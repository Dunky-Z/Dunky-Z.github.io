<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Markdown 书写 PDF 输出优雅的解决方案 | 夜云泊</title><meta name=keywords content="LaTeX,Pandoc,Markdown,PDF,效率"><meta name=description content="折腾背景
Markdown 的简便性是 LaTeX 无法替代的，LaTeX 对排版的精准控制能力又是 Markdown 无法比拟的。一直在寻找一种能够将 Markdown 优雅地转换成 PDF 的解决方案，虽然早就听说也使用过 Pandoc 这把瑞士军刀，但是它太过强大，以致于一直都没用明白。只会简单的转换命令，但是实际效果并不好，最近学会了使用 LaTeX 模板的功能，这才让我眼前一亮，这才是我想要的结果。"><meta name=author content="Nic"><link rel=canonical href=https://lifeislife.cn/posts/markdown%E4%B9%A6%E5%86%99pdf%E8%BE%93%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/><link crossorigin=anonymous href=/assets/css/stylesheet.4490366ee59f83f7324bce1d2f81fb1ebba1a551f24577c75929014495a1d9b1.css integrity="sha256-RJA2buWfg/cyS84dL4H7HruhpVHyRXfHWSkBRJWh2bE=" rel="preload stylesheet" as=style><link rel=icon href=https://lifeislife.cn/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lifeislife.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://lifeislife.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://lifeislife.cn/apple-touch-icon.png><link rel=mask-icon href=https://lifeislife.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://lifeislife.cn/posts/markdown%E4%B9%A6%E5%86%99pdf%E8%BE%93%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Noto+Sans+SC:wght@100..900&display=swap" rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=G-PS8L2EEEPR"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PS8L2EEEPR")}</script><meta property="og:url" content="https://lifeislife.cn/posts/markdown%E4%B9%A6%E5%86%99pdf%E8%BE%93%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"><meta property="og:site_name" content="夜云泊"><meta property="og:title" content="Markdown 书写 PDF 输出优雅的解决方案"><meta property="og:description" content="折腾背景 Markdown 的简便性是 LaTeX 无法替代的，LaTeX 对排版的精准控制能力又是 Markdown 无法比拟的。一直在寻找一种能够将 Markdown 优雅地转换成 PDF 的解决方案，虽然早就听说也使用过 Pandoc 这把瑞士军刀，但是它太过强大，以致于一直都没用明白。只会简单的转换命令，但是实际效果并不好，最近学会了使用 LaTeX 模板的功能，这才让我眼前一亮，这才是我想要的结果。"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-20T08:28:03+00:00"><meta property="article:modified_time" content="2022-08-20T08:28:03+00:00"><meta property="article:tag" content="LaTex"><meta property="article:tag" content="Pandoc"><meta property="article:tag" content="Markdown"><meta property="article:tag" content="PDF"><meta property="article:tag" content="效率"><meta name=twitter:card content="summary"><meta name=twitter:title content="Markdown 书写 PDF 输出优雅的解决方案"><meta name=twitter:description content="折腾背景
Markdown 的简便性是 LaTeX 无法替代的，LaTeX 对排版的精准控制能力又是 Markdown 无法比拟的。一直在寻找一种能够将 Markdown 优雅地转换成 PDF 的解决方案，虽然早就听说也使用过 Pandoc 这把瑞士军刀，但是它太过强大，以致于一直都没用明白。只会简单的转换命令，但是实际效果并不好，最近学会了使用 LaTeX 模板的功能，这才让我眼前一亮，这才是我想要的结果。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://lifeislife.cn/posts/"},{"@type":"ListItem","position":2,"name":"Markdown 书写 PDF 输出优雅的解决方案","item":"https://lifeislife.cn/posts/markdown%E4%B9%A6%E5%86%99pdf%E8%BE%93%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Markdown 书写 PDF 输出优雅的解决方案","name":"Markdown 书写 PDF 输出优雅的解决方案","description":"折腾背景 Markdown 的简便性是 LaTeX 无法替代的，LaTeX 对排版的精准控制能力又是 Markdown 无法比拟的。一直在寻找一种能够将 Markdown 优雅地转换成 PDF 的解决方案，虽然早就听说也使用过 Pandoc 这把瑞士军刀，但是它太过强大，以致于一直都没用明白。只会简单的转换命令，但是实际效果并不好，最近学会了使用 LaTeX 模板的功能，这才让我眼前一亮，这才是我想要的结果。\n","keywords":["LaTeX","Pandoc","Markdown","PDF","效率"],"articleBody":"折腾背景 Markdown 的简便性是 LaTeX 无法替代的，LaTeX 对排版的精准控制能力又是 Markdown 无法比拟的。一直在寻找一种能够将 Markdown 优雅地转换成 PDF 的解决方案，虽然早就听说也使用过 Pandoc 这把瑞士军刀，但是它太过强大，以致于一直都没用明白。只会简单的转换命令，但是实际效果并不好，最近学会了使用 LaTeX 模板的功能，这才让我眼前一亮，这才是我想要的结果。\n效果演示 基础环境配置 Markdown 生成 PDF 主要需要使用 Pandoc 和 LaTeX 两个工具，具体安装方式如下：\nPandoc 的安装 Pandoc 是由 John MacFarlane 开发的标记语言转换工具，可实现不同标记语言间的格式转换。\nWindows 下的安装：\n下载安装包直接安装即可 如果安装了 Chocolate：choco install pandoc 如果安装了 winget：winget install pandoc Linux/FreeBSD下的安装：\nPandoc 已经包含在大部分 Linux 发行版的官方仓库中，直接使用诸如apt/dnf/yum/pacman之类的安装工具直接安装即可 macOS 下的安装：\nbrew install pandoc 详细的安装说明参见：官方安装文档\nLaTeX 的安装 LaTeX 工具，建议安装 texlive。\nWindows 下的安装： 参考该文章下载完整 texlive，注意安装后需要再安装 cjk，cjk-fonts 等相关 package Linux/FreeBSD下的安装： 使用 apt/dnf/yum/pacman/pkg 等安装工具安装 texlive、texlive-latex 等相关软件包 macOS 下的安装： 使用 HomeBrew 安装 texlive 即可 模板配置 配置 Pandoc 模板 为保证生成的 pdf 格式（自动插入封面、目录页、页眉页脚等信息），在本地环境中安装模板，具体步骤是：\n下载MPPL: Markdown to PDF with Pandoc via Latex仓库 将template/mppl.latex拷贝到*/pandoc/templates目录下 Window 下：C:/Users/USERNAME/AppData/Roaming/pandoc/templates，如果Roaming没有pandoc目录，请手动创建！ Linux/FreeBSD/MacOS：~/.pandoc/templates/ 配置 LaTeX 模板 模板定制主要修改模板最前面的模板基础配置相关内容，主要可修改的包括：\n公司和组织，目前默认是\"MPPL\" 正文缩进，目前默认是 2em（2 个中文字符，4 个英文字符） 主要中文字体和英文字体：目前都是微软雅黑 页眉、页脚展示内容，目前是： 左页眉：title 右页眉：“企业机密 - 禁止外传” 左页脚：company 右页脚：页码 字体设置 目前页面默认的字体是微软雅黑，对于非 Windows 系统，可能不存在该字体，则有以下两种解决方案：\n手工安装微软雅黑字体（需要 msyh,msyhbd 两个文件） 修改为其他字体，如苹方、文泉驿等 若需要多个团队共同使用，建议采用方案一。\n如何生成 PDF PDF 文件指定 metadata 信息 在每个 Markdown 最前面增加以下主要 metadata 信息，metadata 内容开始行内容为三个“-”，结束行为三个“.”，示例如下：\ntitle: \"MPPL\" version: \"0.1\" subtitle: \"Markdown to PDF with Pandoc via LaTeX\" date: \"2022-08\" author: \"Dominic\" company: COMPANYNAME file-code: COMPANY-DEPARTMENT-00000000 logo: true logo-url: ./img/logo.png history: - version: V0.1 author: Dominic date: 2022-08-19 desc: 创建文档 其他可选配置项目如下：\nheader-left: 左页眉 header-right: 右页眉 footer-left: 左页脚 footer-right: 右页脚 CJKmainfont: 主要中文字体 mainfont: 主要字体 lot: 是否创建表格目录 lof: 是否创建图片目录 可选配置项中，建议除了 subtitle 外，全部在模板中定制，不在 Markdown 文件中定制\nMarkdown 其他编写要求 Pandoc 默认使用的 pandoc_markdown 格式，为避免 Markdown 转 pdf 格式异常，在编写 Markdown 的时候有几个原则要求：\n每个标题前后都必须有空行 每个表格前后都必须有空行 每个代码块前后收必须有空行 每个列表前后必须有空行 总之，不同文本类型之间都要有空行。\n生成 PDF 文件 pandoc --listings --pdf-engine=xelatex --template=mppl.latex README.md -o README.pdf 摆脱命令行，优雅的 VSCode 书写转换方案 VSCode 与插件安装 打开 VSCode 编辑器，在插件页搜索 markdown-preview-enhanced，接着点击 Install 按钮。详情参考VS Code 安装 MPE。\nMarkdown Preview Enhanced 以下简称 MPE\n使用 VSCode 书写 Markdown 新建文件以.md为后缀即可开始编辑 Markdown 文件，使用 MPE 实时预览与导出。\n\u003c!DOCTYPE html\u003e Responsive Image 配置 MPE 使用 Pandoc 导出 右击 MPE 的预览区域，可以看到 MPE 提供多种导出 PDF 的方案，如使用 Chrome 的 Puppeteer 导出，Prince 导出，Pandoc 导出等等。\n在未使用 Pandoc 前，我也一直使用 MPE 提供的 Chrome 方式导出，但是导出的 PDF 排版总是不尽如意。现在介绍如何使用 Pandoc 方式导出。\n\u003c!DOCTYPE html\u003e Responsive Image 创建 PDF 文档，你需要在 markdown 文件中的 front-matter 里声明 pdf_document 的输出类型：\n--- output: pdf_document: latex_engine: xelatex pandoc_args: [--template=mppl.latex,--listings] --- front-matter：文章的最开头，也就是上文元数据放的地方。和元数据放在一起即可，如图所示：\n\u003c!DOCTYPE html\u003e Responsive Image latex_engine：默认情况下 PDF 文档由 pdflatex 生成。你可以用 latex_engine 选项来定义你想用的引擎。支持的引擎有 pdflatex，xelatex，以及 lualatex。这里需要使用xelatex。\npandoc_args：配置 Pandoc 接受的一些参数，这里我们使用 --template=mppl.latex 和 --listings 来指定模板和使用 listings。这里配置的参数就是执行 Pandoc 时使用的参数，以后就不需要命令行输入了。这里使用上文的mppl.latex模板。\n配置完之后，右击预览界面，选择 Pandoc 导出，稍等片刻，即可生成 PDF 文件。\n\u003c!DOCTYPE html\u003e Responsive Image 常见问题解决 LaTeX 相关错误 VSCode 导出出错时报错信息较短，并且常常不知道具体报错原因及位置，因为是 LaTeX 转换成 PDF 的过程中出现的错误。报错位置是 LaTeX 中间源码的位置，而不是 VSCode 中的位置。这时候我常用的方法是先将 Markdown 转为 LaTeX，然后再转为 PDF，在 LaTeX 编辑器里就可以看到错误位置了。\n比如下面这个错误，我们能看到一些报错信息cant use \\spacefactor in math mode，但是并不知道具体哪里的错误。从信息里可以看出和\\LaTex有关，大概能推测出是使用了这个命令，因为文章里使用了这个命令的地方只有一处。但是如果有其他的错误，就很难确定了。\n\u003c!DOCTYPE html\u003e Responsive Image Markdown 转换 LaTeX 这里还是以模板仓库的README.md为例，当然这个文件是可以正常转换 PDF 的，不会报错。这里只是拿README.md做一个如何使用命令的演示。\npandoc --listings --template=mppl.latex -s README.md -o README.tex LaTeX 编辑器打开，以 TexStudio 为例 打开README.tex文件，编译： \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image 我们可以快速的定位到问题出现的位置，只要搜索相关问题即可。\n\\LaTeX{} 这个宏不能用在数学模式下。但是因为我在 Markdown 里必须使用美元符号$$才能表示 LaTeX 环境，才能正确输出 LaTeX 符号，而 Markdown 转换成 LaTeX 源码时，这个宏就会被包裹在数学环境里，就会报错。如果我想在 PDF 里显示这个符号，那就在 Markdown 里不使用美元符号$$，而是直接输入\\LaTeX{}即可，再导出 PDF 时就不会报错。\n","wordCount":"2461","inLanguage":"zh","datePublished":"2022-08-20T08:28:03Z","dateModified":"2022-08-20T08:28:03Z","author":{"@type":"Person","name":"Nic"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lifeislife.cn/posts/markdown%E4%B9%A6%E5%86%99pdf%E8%BE%93%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},"publisher":{"@type":"Organization","name":"夜云泊","logo":{"@type":"ImageObject","url":"https://lifeislife.cn/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script><script defer src=/static/fontawesome/fontawesome-all.js></script><header class=header><nav class=nav><div class=logo><a href=https://lifeislife.cn/ accesskey=h title="夜云泊 (Alt + H)">夜云泊</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lifeislife.cn/archives/ title=归档><span>归档</span></a></li><li><a href=https://lifeislife.cn/tags/ title=标签><span>标签</span></a></li><li><a href=https://lifeislife.cn/categories/ title=分类><span>分类</span></a></li><li><a href=https://lifeislife.cn/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://lifeislife.cn/awesome-cycling/ title=AwesomeCycling><span>AwesomeCycling</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.travellings.cn/go.html title=开往><span><i class='fa-solid fa-train-subway'></i>开往</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lifeislife.cn/>主页</a>&nbsp;»&nbsp;<a href=https://lifeislife.cn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Markdown 书写 PDF 输出优雅的解决方案</h1><div class=post-meta><span title='2022-08-20 08:28:03 +0000 UTC'>八月 20, 2022</span>&nbsp;·&nbsp;5 分钟&nbsp;·&nbsp;2461 字&nbsp;·&nbsp;Nic</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#效果演示>效果演示</a></li></ul><ul><li><a href=#pandoc-的安装>Pandoc 的安装</a></li><li><a href=#latex-的安装>LaTeX 的安装</a></li></ul><ul><li><a href=#配置-pandoc-模板>配置 Pandoc 模板</a></li><li><a href=#配置-latex-模板>配置 LaTeX 模板</a></li><li><a href=#字体设置>字体设置</a></li></ul><ul><li><a href=#pdf-文件指定-metadata-信息>PDF 文件指定 metadata 信息</a></li><li><a href=#markdown-其他编写要求>Markdown 其他编写要求</a></li><li><a href=#生成-pdf-文件>生成 PDF 文件</a></li></ul><ul><li><a href=#vscode-与插件安装>VSCode 与插件安装</a></li><li><a href=#使用-vscode-书写-markdown>使用 VSCode 书写 Markdown</a></li><li><a href=#配置-mpe-使用-pandoc-导出>配置 MPE 使用 Pandoc 导出</a></li></ul><ul><li><a href=#latex-相关错误>LaTeX 相关错误</a><ul><li><a href=#markdown-转换-latex>Markdown 转换 LaTeX</a></li><li><a href=#latex-编辑器打开以-texstudio-为例>LaTeX 编辑器打开，以 TexStudio 为例</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h1 id=折腾背景>折腾背景<a hidden class=anchor aria-hidden=true href=#折腾背景>#</a></h1><p>Markdown 的简便性是 LaTeX 无法替代的，LaTeX 对排版的精准控制能力又是 Markdown 无法比拟的。一直在寻找一种能够将 Markdown 优雅地转换成 PDF 的解决方案，虽然早就听说也使用过 Pandoc 这把瑞士军刀，但是它太过强大，以致于一直都没用明白。只会简单的转换命令，但是实际效果并不好，最近学会了使用 LaTeX 模板的功能，这才让我眼前一亮，这才是我想要的结果。</p><h2 id=效果演示>效果演示<a hidden class=anchor aria-hidden=true href=#效果演示>#</a></h2><iframe src="/myjs/pdfjs/web/viewer.html?file=/misc/Markdown书写PDF输出优雅的解决方案.pdf" style=width:100%;height:600px></iframe><h1 id=基础环境配置>基础环境配置<a hidden class=anchor aria-hidden=true href=#基础环境配置>#</a></h1><p>Markdown 生成 PDF 主要需要使用 Pandoc 和 LaTeX 两个工具，具体安装方式如下：</p><h2 id=pandoc-的安装>Pandoc 的安装<a hidden class=anchor aria-hidden=true href=#pandoc-的安装>#</a></h2><p>Pandoc 是由 John MacFarlane 开发的标记语言转换工具，可实现不同标记语言间的格式转换。</p><ul><li><p>Windows 下的安装：</p><ul><li>下载<a href=https://github.com/jgm/pandoc/releases>安装包</a>直接安装即可</li><li>如果安装了 Chocolate：<code>choco install pandoc</code></li><li>如果安装了 winget：<code>winget install pandoc</code></li></ul></li><li><p>Linux/FreeBSD下的安装：</p><ul><li>Pandoc 已经包含在大部分 Linux 发行版的官方仓库中，直接使用诸如<code>apt/dnf/yum/pacman</code>之类的安装工具直接安装即可</li></ul></li><li><p>macOS 下的安装：</p><ul><li><code>brew install pandoc</code></li></ul></li></ul><blockquote><p>详细的安装说明参见：<a href=https://pandoc.org/installing.html>官方安装文档</a></p></blockquote><h2 id=latex-的安装>LaTeX 的安装<a hidden class=anchor aria-hidden=true href=#latex-的安装>#</a></h2><p>LaTeX 工具，建议安装 texlive。</p><ul><li>Windows 下的安装：<ul><li><a href=https://zhuanlan.zhihu.com/p/41855480>参考该文章</a>下载完整 texlive，注意安装后需要再安装 cjk，cjk-fonts 等相关 package</li></ul></li><li>Linux/FreeBSD下的安装：<ul><li>使用 <code>apt/dnf/yum/pacman/pkg</code> 等安装工具安装 texlive、texlive-latex 等相关软件包</li></ul></li><li>macOS 下的安装：<ul><li>使用 HomeBrew 安装 texlive 即可</li></ul></li></ul><h1 id=模板配置>模板配置<a hidden class=anchor aria-hidden=true href=#模板配置>#</a></h1><h2 id=配置-pandoc-模板>配置 Pandoc 模板<a hidden class=anchor aria-hidden=true href=#配置-pandoc-模板>#</a></h2><p>为保证生成的 pdf 格式（自动插入封面、目录页、页眉页脚等信息），在本地环境中安装模板，具体步骤是：</p><ul><li>下载<a href=https://github.com/Dunky-Z/MPPL>MPPL: Markdown to PDF with Pandoc via Latex</a>仓库</li><li>将<code>template/mppl.latex</code>拷贝到<code>*/pandoc/templates</code>目录下<ul><li>Window 下：<code>C:/Users/USERNAME/AppData/Roaming/pandoc/templates</code>，如果<code>Roaming</code>没有<code>pandoc</code>目录，请手动创建！</li><li>Linux/FreeBSD/MacOS：<code>~/.pandoc/templates/</code></li></ul></li></ul><h2 id=配置-latex-模板>配置 LaTeX 模板<a hidden class=anchor aria-hidden=true href=#配置-latex-模板>#</a></h2><p>模板定制主要修改模板最前面的<strong>模板基础配置</strong>相关内容，主要可修改的包括：</p><ul><li>公司和组织，目前默认是"MPPL"</li><li>正文缩进，目前默认是 2em（2 个中文字符，4 个英文字符）</li><li>主要中文字体和英文字体：目前都是微软雅黑</li><li>页眉、页脚展示内容，目前是：<ul><li>左页眉：title</li><li>右页眉：&ldquo;企业机密 - 禁止外传&rdquo;</li><li>左页脚：company</li><li>右页脚：页码</li></ul></li></ul><h2 id=字体设置>字体设置<a hidden class=anchor aria-hidden=true href=#字体设置>#</a></h2><p>目前页面默认的字体是微软雅黑，对于非 Windows 系统，可能不存在该字体，则有以下两种解决方案：</p><ol><li>手工安装微软雅黑字体（需要 msyh,msyhbd 两个文件）</li><li>修改为其他字体，如苹方、文泉驿等</li></ol><p>若需要多个团队共同使用，建议采用方案一。</p><h1 id=如何生成-pdf>如何生成 PDF<a hidden class=anchor aria-hidden=true href=#如何生成-pdf>#</a></h1><h2 id=pdf-文件指定-metadata-信息>PDF 文件指定 metadata 信息<a hidden class=anchor aria-hidden=true href=#pdf-文件指定-metadata-信息>#</a></h2><p>在每个 Markdown 最前面增加以下主要 metadata 信息，metadata 内容开始行内容为三个“-”，结束行为三个“.”，示例如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;MPPL&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0.1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>subtitle</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Markdown to PDF with Pandoc via LaTeX&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>date</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2022-08&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>author</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Dominic&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>company</span><span class=p>:</span><span class=w> </span><span class=l>COMPANYNAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>file-code</span><span class=p>:</span><span class=w> </span><span class=l>COMPANY-DEPARTMENT-00000000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>logo</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>logo-url</span><span class=p>:</span><span class=w> </span><span class=l>./img/logo.png</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>history</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>V0.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>author</span><span class=p>:</span><span class=w> </span><span class=l>Dominic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>date</span><span class=p>:</span><span class=w> </span><span class=ld>2022-08-19</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>desc</span><span class=p>:</span><span class=w> </span><span class=l>创建文档</span><span class=w>
</span></span></span></code></pre></div><p>其他可选配置项目如下：</p><ul><li>header-left: 左页眉</li><li>header-right: 右页眉</li><li>footer-left: 左页脚</li><li>footer-right: 右页脚</li><li>CJKmainfont: 主要中文字体</li><li>mainfont: 主要字体</li><li>lot: 是否创建表格目录</li><li>lof: 是否创建图片目录</li></ul><blockquote><p>可选配置项中，建议除了 subtitle 外，全部在模板中定制，不在 Markdown 文件中定制</p></blockquote><h2 id=markdown-其他编写要求>Markdown 其他编写要求<a hidden class=anchor aria-hidden=true href=#markdown-其他编写要求>#</a></h2><p>Pandoc 默认使用的 pandoc_markdown 格式，为避免 Markdown 转 pdf 格式异常，在编写 Markdown 的时候有几个原则要求：</p><ul><li>每个标题前后都必须有空行</li><li>每个表格前后都必须有空行</li><li>每个代码块前后收必须有空行</li><li>每个列表前后必须有空行</li></ul><p><strong>总之，不同文本类型之间都要有空行</strong>。</p><h2 id=生成-pdf-文件>生成 PDF 文件<a hidden class=anchor aria-hidden=true href=#生成-pdf-文件>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pandoc --listings --pdf-engine<span class=o>=</span>xelatex --template<span class=o>=</span>mppl.latex README.md -o README.pdf
</span></span></code></pre></div><h1 id=摆脱命令行优雅的-vscode-书写转换方案>摆脱命令行，优雅的 VSCode 书写转换方案<a hidden class=anchor aria-hidden=true href=#摆脱命令行优雅的-vscode-书写转换方案>#</a></h1><h2 id=vscode-与插件安装>VSCode 与插件安装<a hidden class=anchor aria-hidden=true href=#vscode-与插件安装>#</a></h2><p>打开 VSCode 编辑器，在插件页搜索 <code>markdown-preview-enhanced</code>，接着点击 <code>Install</code> 按钮。详情参考<a href=https://shd101wyy.github.io/markdown-preview-enhanced/#/zh-cn/vscode-installation>VS Code 安装 MPE</a>。</p><blockquote><p>Markdown Preview Enhanced 以下简称 MPE</p></blockquote><h2 id=使用-vscode-书写-markdown>使用 VSCode 书写 Markdown<a hidden class=anchor aria-hidden=true href=#使用-vscode-书写-markdown>#</a></h2><p>新建文件以<code>.md</code>为后缀即可开始编辑 Markdown 文件，使用 MPE 实时预览与导出。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201459472.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201459472.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=配置-mpe-使用-pandoc-导出>配置 MPE 使用 Pandoc 导出<a hidden class=anchor aria-hidden=true href=#配置-mpe-使用-pandoc-导出>#</a></h2><p>右击 MPE 的预览区域，可以看到 MPE 提供多种导出 PDF 的方案，如使用 Chrome 的 Puppeteer 导出，Prince 导出，Pandoc 导出等等。</p><p>在未使用 Pandoc 前，我也一直使用 MPE 提供的 Chrome 方式导出，但是导出的 PDF 排版总是不尽如意。现在介绍如何使用 Pandoc 方式导出。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201500627.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201500627.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><p>创建 PDF 文档，你需要在 <code>markdown</code> 文件中的 <code>front-matter</code> 里声明 <code>pdf_document</code> 的输出类型：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>output</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pdf_document</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>latex_engine</span><span class=p>:</span><span class=w> </span><span class=l>xelatex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pandoc_args</span><span class=p>:</span><span class=w> </span><span class=p>[</span>--<span class=l>template=mppl.latex,--listings]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span></code></pre></div><ul><li><p><code>front-matter</code>：文章的最开头，也就是上文元数据放的地方。和元数据放在一起即可，如图所示：</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201526775.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201526775.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p></li><li><p><code>latex_engine</code>：默认情况下 PDF 文档由 <code>pdflatex</code> 生成。你可以用 <code>latex_engine</code> 选项来定义你想用的引擎。支持的引擎有 <code>pdflatex</code>，<code>xelatex</code>，以及 <code>lualatex</code>。这里需要使用<code>xelatex</code>。</p></li><li><p><code>pandoc_args</code>：配置 Pandoc 接受的一些参数，这里我们使用 <code>--template=mppl.latex</code> 和 <code>--listings</code> 来指定模板和使用 <code>listings</code>。这里配置的参数就是执行 Pandoc 时使用的参数，以后就不需要命令行输入了。这里使用上文的<code>mppl.latex</code>模板。</p></li></ul><p>配置完之后，右击预览界面，选择 Pandoc 导出，稍等片刻，即可生成 PDF 文件。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201537508.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201537508.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h1 id=常见问题解决>常见问题解决<a hidden class=anchor aria-hidden=true href=#常见问题解决>#</a></h1><h2 id=latex-相关错误>LaTeX 相关错误<a hidden class=anchor aria-hidden=true href=#latex-相关错误>#</a></h2><p>VSCode 导出出错时报错信息较短，并且常常不知道具体报错原因及位置，因为是 LaTeX 转换成 PDF 的过程中出现的错误。报错位置是 LaTeX 中间源码的位置，而不是 VSCode 中的位置。这时候我常用的方法是先将 Markdown 转为 LaTeX，然后再转为 PDF，在 LaTeX 编辑器里就可以看到错误位置了。</p><p>比如下面这个错误，我们能看到一些报错信息<code>cant use \spacefactor in math mode</code>，但是并不知道具体哪里的错误。从信息里可以看出和<code>\LaTex</code>有关，大概能推测出是使用了这个命令，因为文章里使用了这个命令的地方只有一处。但是如果有其他的错误，就很难确定了。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201655326.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201655326.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h3 id=markdown-转换-latex>Markdown 转换 LaTeX<a hidden class=anchor aria-hidden=true href=#markdown-转换-latex>#</a></h3><p>这里还是以模板仓库的<code>README.md</code>为例，当然这个文件是可以正常转换 PDF 的，不会报错。这里只是拿<code>README.md</code>做一个如何使用命令的演示。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pandoc --listings --template<span class=o>=</span>mppl.latex -s README.md -o README.tex
</span></span></code></pre></div><h3 id=latex-编辑器打开以-texstudio-为例>LaTeX 编辑器打开，以 TexStudio 为例<a hidden class=anchor aria-hidden=true href=#latex-编辑器打开以-texstudio-为例>#</a></h3><p>打开<code>README.tex</code>文件，编译：<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201708811.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201708811.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201717673.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208201717673.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><p>我们可以快速的定位到问题出现的位置，只要搜索相关问题即可。</p><blockquote><p>\LaTeX{} 这个宏不能用在数学模式下。但是因为我在 Markdown 里必须使用美元符号<code>$$</code>才能表示 LaTeX 环境，才能正确输出 LaTeX 符号，而 Markdown 转换成 LaTeX 源码时，这个宏就会被包裹在数学环境里，就会报错。如果我想在 PDF 里显示这个符号，那就在 Markdown 里不使用美元符号<code>$$</code>，而是直接输入<code>\LaTeX{}</code>即可，再导出 PDF 时就不会报错。</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://lifeislife.cn/tags/latex/>LaTex</a></li><li><a href=https://lifeislife.cn/tags/pandoc/>Pandoc</a></li><li><a href=https://lifeislife.cn/tags/markdown/>Markdown</a></li><li><a href=https://lifeislife.cn/tags/pdf/>PDF</a></li><li><a href=https://lifeislife.cn/tags/%E6%95%88%E7%8E%87/>效率</a></li></ul><nav class=paginav><a class=prev href=https://lifeislife.cn/posts/latex-listing%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE/><span class=title>« 上一页</span><br><span>LaTex-listing 环境设置</span>
</a><a class=next href=https://lifeislife.cn/posts/iic%E5%8D%8F%E8%AE%AE/><span class=title>下一页 »</span><br><span>IIC 协议</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Markdown 书写 PDF 输出优雅的解决方案 on x" href="https://x.com/intent/tweet/?text=Markdown%20%e4%b9%a6%e5%86%99%20PDF%20%e8%be%93%e5%87%ba%e4%bc%98%e9%9b%85%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2fmarkdown%25E4%25B9%25A6%25E5%2586%2599pdf%25E8%25BE%2593%25E5%2587%25BA%25E4%25BC%2598%25E9%259B%2585%25E7%259A%2584%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25A1%2588%2f&amp;hashtags=LaTeX%2cPandoc%2cMarkdown%2cPDF%2c%e6%95%88%e7%8e%87"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Markdown 书写 PDF 输出优雅的解决方案 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2fmarkdown%25E4%25B9%25A6%25E5%2586%2599pdf%25E8%25BE%2593%25E5%2587%25BA%25E4%25BC%2598%25E9%259B%2585%25E7%259A%2584%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25A1%2588%2f&amp;title=Markdown%20%e4%b9%a6%e5%86%99%20PDF%20%e8%be%93%e5%87%ba%e4%bc%98%e9%9b%85%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88&amp;summary=Markdown%20%e4%b9%a6%e5%86%99%20PDF%20%e8%be%93%e5%87%ba%e4%bc%98%e9%9b%85%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88&amp;source=https%3a%2f%2flifeislife.cn%2fposts%2fmarkdown%25E4%25B9%25A6%25E5%2586%2599pdf%25E8%25BE%2593%25E5%2587%25BA%25E4%25BC%2598%25E9%259B%2585%25E7%259A%2584%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25A1%2588%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Markdown 书写 PDF 输出优雅的解决方案 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2flifeislife.cn%2fposts%2fmarkdown%25E4%25B9%25A6%25E5%2586%2599pdf%25E8%25BE%2593%25E5%2587%25BA%25E4%25BC%2598%25E9%259B%2585%25E7%259A%2584%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25A1%2588%2f&title=Markdown%20%e4%b9%a6%e5%86%99%20PDF%20%e8%be%93%e5%87%ba%e4%bc%98%e9%9b%85%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Markdown 书写 PDF 输出优雅的解决方案 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2flifeislife.cn%2fposts%2fmarkdown%25E4%25B9%25A6%25E5%2586%2599pdf%25E8%25BE%2593%25E5%2587%25BA%25E4%25BC%2598%25E9%259B%2585%25E7%259A%2584%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25A1%2588%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Markdown 书写 PDF 输出优雅的解决方案 on whatsapp" href="https://api.whatsapp.com/send?text=Markdown%20%e4%b9%a6%e5%86%99%20PDF%20%e8%be%93%e5%87%ba%e4%bc%98%e9%9b%85%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88%20-%20https%3a%2f%2flifeislife.cn%2fposts%2fmarkdown%25E4%25B9%25A6%25E5%2586%2599pdf%25E8%25BE%2593%25E5%2587%25BA%25E4%25BC%2598%25E9%259B%2585%25E7%259A%2584%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25A1%2588%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Markdown 书写 PDF 输出优雅的解决方案 on telegram" href="https://telegram.me/share/url?text=Markdown%20%e4%b9%a6%e5%86%99%20PDF%20%e8%be%93%e5%87%ba%e4%bc%98%e9%9b%85%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2fmarkdown%25E4%25B9%25A6%25E5%2586%2599pdf%25E8%25BE%2593%25E5%2587%25BA%25E4%25BC%2598%25E9%259B%2585%25E7%259A%2584%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25A1%2588%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Markdown 书写 PDF 输出优雅的解决方案 on ycombinator" href="https://news.ycombinator.com/submitlink?t=Markdown%20%e4%b9%a6%e5%86%99%20PDF%20%e8%be%93%e5%87%ba%e4%bc%98%e9%9b%85%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88&u=https%3a%2f%2flifeislife.cn%2fposts%2fmarkdown%25E4%25B9%25A6%25E5%2586%2599pdf%25E8%25BE%2593%25E5%2587%25BA%25E4%25BC%2598%25E9%259B%2585%25E7%259A%2584%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25A1%2588%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://lifeislife-1.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2026 <a href=https://lifeislife.cn/>夜云泊</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>