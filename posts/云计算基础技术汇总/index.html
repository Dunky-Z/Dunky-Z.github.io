<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>云计算基础技术汇总 | 夜云泊</title><meta name=keywords content="云计算"><meta name=description content="云计算服务类型
传统架构=>Iaas=>Paas=>Saas
自己烧饭=> 叮咚买菜=> 美团外卖=> 餐厅吃饭


<!DOCTYPE html>


    
    
    Responsive Image
    


    
    
        
            
        
    
    

    

"><meta name=author content="Nic"><link rel=canonical href=https://lifeislife.cn/posts/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF%E6%B1%87%E6%80%BB/><link crossorigin=anonymous href=/assets/css/stylesheet.3e75ab39571716f01a345ec7094abf785059c0622f4efe914e97390076cc7aee.css integrity="sha256-PnWrOVcXFvAaNF7HCUq/eFBZwGIvTv6RTpc5AHbMeu4=" rel="preload stylesheet" as=style><link rel=icon href=https://lifeislife.cn/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lifeislife.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://lifeislife.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://lifeislife.cn/apple-touch-icon.png><link rel=mask-icon href=https://lifeislife.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://lifeislife.cn/posts/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF%E6%B1%87%E6%80%BB/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Noto+Sans+SC:wght@100..900&display=swap" rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=G-PS8L2EEEPR"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PS8L2EEEPR")}</script><meta property="og:url" content="https://lifeislife.cn/posts/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF%E6%B1%87%E6%80%BB/"><meta property="og:site_name" content="夜云泊"><meta property="og:title" content="云计算基础技术汇总"><meta property="og:description" content="云计算服务类型 传统架构=>Iaas=>Paas=>Saas
自己烧饭=> 叮咚买菜=> 美团外卖=> 餐厅吃饭
<!DOCTYPE html> Responsive Image "><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-09T21:42:59+00:00"><meta property="article:modified_time" content="2023-06-09T21:42:59+00:00"><meta property="article:tag" content="云计算"><meta name=twitter:card content="summary"><meta name=twitter:title content="云计算基础技术汇总"><meta name=twitter:description content="云计算服务类型
传统架构=>Iaas=>Paas=>Saas
自己烧饭=> 叮咚买菜=> 美团外卖=> 餐厅吃饭


<!DOCTYPE html>


    
    
    Responsive Image
    


    
    
        
            
        
    
    

    

"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://lifeislife.cn/posts/"},{"@type":"ListItem","position":2,"name":"云计算基础技术汇总","item":"https://lifeislife.cn/posts/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF%E6%B1%87%E6%80%BB/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"云计算基础技术汇总","name":"云计算基础技术汇总","description":"云计算服务类型 传统架构=\u0026gt;Iaas=\u0026gt;Paas=\u0026gt;Saas\n自己烧饭=\u0026gt; 叮咚买菜=\u0026gt; 美团外卖=\u0026gt; 餐厅吃饭\n\u003c!DOCTYPE html\u003e Responsive Image ","keywords":["云计算"],"articleBody":"云计算服务类型 传统架构=\u003eIaas=\u003ePaas=\u003eSaas\n自己烧饭=\u003e 叮咚买菜=\u003e 美团外卖=\u003e 餐厅吃饭\n\u003c!DOCTYPE html\u003e Responsive Image 云计算部署形式以及应用 类型 描述 优点 缺点 私有云 利用已有设备自我构建，云端资源只给内部人员使用。 安全性高 维护成本高 社区云、行业云 为特定行业构建共享基础设施的云。 有一套用户体系 维护成本高 公有云 构建大型基础设施云出租给公众。 用户来说成本低，服务多 安全性低 混合云 两种或者两种以上的云组成的云服务 敏捷，灵活，降低成本 兼容性问题 应用 存储云、医疗云、教育云、企业云、金融云、游戏云、桌面云\n关键技术 虚拟化 \u003c!DOCTYPE html\u003e Responsive Image 分布式存储 将数据存储在不同的物理设备中。这种模式不仅摆脱了硬件设备的限制，同时扩展性更好，能够快速响应用户需求的变化（整合存储资源提供动态可伸缩资源池的分布式存储技术)\n数据中心联网 虚拟机之间需要实时同步大量的数据，产生大量东西流量。\n\u003c!DOCTYPE html\u003e Responsive Image 并行编程 在并行编程模式下，并发处理、容错、数据分布、负载均衡等细节都被抽象到一个函数库中，通过统一接口，用户大尺度的计算任务被自动并发和分布执行，即将一个任务自动分成多个子任务，并行地处理海量数据。\n\u003c!DOCTYPE html\u003e Responsive Image 体系结构 云计算平台体系结构由用户界面、服务目录、管理系统、部署工具、监控和服务器集群组成。\n自动化部署 对云资源进行自动化部署指的是基于脚本调节的基础上实现不同厂商对于设备工具的自动配置，用以减少人机交互比例、提高应变效率，避免超负荷人工操作等现象的发生，最终推进智能部署进程。\n\u003c!DOCTYPE html\u003e Responsive Image 云服务提供商 亚马逊云、腾讯云、阿里云、百度云、华为云\n技术架构：开源（Xen,KVM），Vmware，微软 hyper-v，阿里飞天 Apsara\n开源云管理平台：OpenStack\n虚拟化简介 虚拟化：一种计算机资源管理技术，将各种 T 实体资源抽象、转换成另一种形式的技术都是虚拟化。 作用：通过该技术将一台计算机虚拟为多台逻辑计算机。在一台计算机上同时运行多个逻辑计算机，每个逻辑计算机可运行不同的操作系统，并且应用程序都可以在相互独立的空间内运行而互不影响，从而显著提高计算机的工作效率。\n从行业数据互相关联的角度来说，云计算是极度依赖虚拟化的。但虚拟化并非云计算，云计算也并非虚拟化。虚拟化只是云计算的核心技术，但并非云计算的核心关注点。\n云计算是一种服务。虚拟化是云计算的技术基础。\n虚拟化相关的几个概念 Guest OS:运行在虚拟机之上的 OS Guest Machine:虚拟出来的虚拟机 VMM:虚拟机监控器，即虚拟化层 (Virtual Machine Monitor,VMM) Host OS:运行在物理机之上的 OS Host Machine:物理机\n\u003c!DOCTYPE html\u003e Responsive Image 虚拟化类型 虚拟化类型 描述 特点 案例 寄居虚拟化（Type2） 在主机（宿主）操作系统上安装和运行虚拟化程序 - 简单、易于实现。\n- 安装和运行应用程序依赖于主机操作系统对设备的支持。\n- 有两层 OS，管理开销较大，性能损耗大。\n- 虚拟机对各种物理设备 (cpu、内存、硬盘等) 的调用，都通过虚拟化层和宿主机的 OS 一起协调才能完成。 - Vmware\n- VirturalBox\n裸金属虚拟化 (Type1) 直接将 VMM 安装在硬件设备上，VMM 在这种模式下又叫做 Hypervisor，虚拟机有指令要执行时，Hypervisors 会接管该指令，模拟相应的操作。 - 不依赖于操作系统。\n- 支持多种操作系统，多种应用。\n- 依赖虚拟层内核和服务器控制台进行管理。\n- 需要对虚拟层的内核进行开发（难度大）。 - VMware ESX\n- Xen\n- 华为 FusionSphere\n混合虚拟化 在一个现有的正常操作系统下安装一个内核模块，内核拥有虚拟化能力。(相当于寄居与裸金属的混合) - 相对于寄居虚拟化架构，性能高。\n- 相对于裸金属虚拟化架构，不需要开发内核。\n- 可支持多种操作系统。\n- 需底层硬件支持虚拟化扩展功能。 - KVM 寄居虚拟化（Type2）\n\u003c!DOCTYPE html\u003e Responsive Image 裸金属虚拟化 (Type1)\n\u003c!DOCTYPE html\u003e Responsive Image 混合虚拟化\n\u003c!DOCTYPE html\u003e Responsive Image 虚拟化层架构 架构 描述 特点 典型 全虚拟化 即所抽象的 VM 具有完全的物理特性，虚拟化层负责捕获 CPU 指令，为指令访问硬件充当媒介。 - OS 无需修改。\n- 速度和功能都非常不错，使用非常简单。\n- 移植性好。 - VMware\n- KVM\n- Virtualbox\n- Virtual PC\n半虚拟化 起初是为了解决全虚拟化效率不高的困难，它需要修改 OS，工作效率相对全虚拟化要高很多。Hypervisor 直接安装在物理机上，多个虚拟机在 Hypervisor 上运行。Hypervisor 实现方式一般是一个特殊定制的 Linux 系统。 - 架构更精简。\n- 在整体速度上有一定的优势。\n- 需要对 OS 进行修改，在用户体验方面比较麻烦。 - Xen\n- VMWare ESXi\n- 微软 Hyper-V\n硬件辅助虚拟化 硬件辅助虚拟化是随着虚拟化技术的应用越来越广泛 lntl、AMD 等硬件厂商通过对硬件的改造来支持虚拟化技术。\n常用于优化全虚拟化和半虚拟化产品，像 VMware Workstation，它虽然属于全虚拟化，但它在 6.0 版本中引入了硬件辅助虚拟化技术，比如 Intel 的 VT-x 和 AMD 的 AMD-V。主流全虚拟化和半虚拟化产品都支持硬件辅助虚拟化。(VirtualBox,KVM,Xen 等)\n辅助产品 - VT-x\n- AMD-V\n全虚拟化\n\u003c!DOCTYPE html\u003e Responsive Image 半虚拟化\n\u003c!DOCTYPE html\u003e Responsive Image 全虚拟化代表 KVM 和半虚拟化代表 Xen 架构对比 架构 描述 对比 示意图 全虚拟化：KVM KVM(Kernel–Based Virtual Machines) 是一个基于 Linux 内核的虚拟化技术，可以直接将 Linux 内核转换为 Hypervisor。.从而使得 Linuxp 内核能够直接管理虚拟机，直接调用 Linux 内核中的内存管理、进程管理子系统来管理虚拟机。 - 支持全虚拟化\n- 内置在内核中\n- 便于版本安装、升级、维护，性能高\n总结：KVM 平台架构侧重性能 \u003c!DOCTYPE html\u003e Responsive Image 半虚拟化：Xen Xen:直接把操作系统内核改了，把 OS 改成一个轻量级 Hypervisor1 在里面运行了一个管理所有资源作资源调度的 Domain0。\n组成：由 Xen Hypervisor(虚拟化层)、Domin0(管理主机)、Domin U(用户虚\n拟机)\n- 支持全虚拟化、半虚拟化\n- 需要对内核修改\n- 更新版本，Xen 需要重新编译整个内核隔离性好\n总结：Xen 平台架构侧重安全性 \u003c!DOCTYPE html\u003e Responsive Image 容器 容器：包装或装载物品的贮存器，利用一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任一 Liux 或 Windows 机器上，也可以实现虚拟化。相互之间不会有任何接口，实现 App 与操作系统的解耦。\n\u003c!DOCTYPE html\u003e Responsive Image 主流容器技术 定义：Docker) 属于 Liux 容器的一种封装，提供简单易用的容器使用接口，他是目前最流行的 Linux 容器解决方案。 作用：将应用程序与该程序的依赖，打包在一个文件里。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了 Docker，就不用担心环境问题。\n组成：客户端 (Docker Client)、守护进程 (Docker Daemon)、镜像（Docker Image)、容器 (DockerContainer)、仓库（Docker Registry)\n\u003c!DOCTYPE html\u003e Responsive Image 容器和虚拟化的区别 虚拟化 容器 隔离性强，有独立的 GUEST OS 共享内核和 OS，隔离性弱 虚拟化性能差 (\u003e15%) 计算/存储无损耗，无 Guest0S 内存开销（200M) 虚拟机镜像庞大（十几 G 几十 G),且实例化时不能共享 Docker 容器镜象 200300M，且公共基础镜象实例化时\n可以共享 虚拟机镜象缺乏统一标准 Docker 提供了容器应用镜象事实标准，OCI 推动进一步标\n准化 虚拟机创建慢 (\u003e2 分钟) 秒级创建 (\u003c10s)\n相当于建立索引 虚拟机启动慢 (\u003e30s) 读文件逐个加载 秒级 (\u003c1s，不含应用本身启动) 资源虚拟化粒度低，单机 10~100 虚拟机 单机支持 1000+ 容器\n密度很高，适合大规模的部署 计算虚拟化 从服务器组建角度来看，计算虚拟化可分为：\nCPU 虚拟化：保障 CPU 资源的合理调度以及 VM 上的指令能够正常高效的执行。 内存虚拟化：保障内存空间的合理分配、管理，隔离，以及高效可靠地使用。 I/O 虚拟化：保障 VM 的 1O 隔离与正常高效的执行。 常见的计算服务架构有：\nOpenStack Nova 阿里云 ECS 腾讯云 CVM Nova OpenStack 是开源的云平台，通过不同的组件提供计算、存储、网络、数据库等多种云服务。其中计算服务由 Nova 组件提供，通过 nova-API 与其他组件通信，通过 nova-computex 对接不同的虚拟层提供计算虚拟化服务。\n\u003c!DOCTYPE html\u003e Responsive Image 创建实例流程：创建实例请求 nova-api，会唤醒 nova-database，请求刷新数据库。将请求给队列组件，nova-scheduler 从队列中取出请求，请求运行相对应的虚拟机。要运行不同的虚拟机，需要不同的平台支持（KVM，Xen,VMware）。虚拟机不能直接与数据库直接交互，需要通过 nova-conductor 转发。\nECS 云服务器 ECS(Elastic Compute Service) 是阿里云提供的基于 KVM 虚拟化的弹性计算服务，建立在阿里云飞天 (Apsara) 分布式操作系统上。 请求的主要调用流程为：OpenAPI、.业务层、控制系统、宿主机服务。\n\u003c!DOCTYPE html\u003e Responsive Image CVM 云服务器 CVM(Cloud Virtual Machine)) 是腾讯提供的基于 KVM 虚拟化的弹性计算服务，建立在腾讯云分布式资源管理调度系统 VStation.上。 请求的主要调用流程为：API Server、.VStation、服务器集群。\n\u003c!DOCTYPE html\u003e Responsive Image CPU 虚拟化 在物理机（宿主机）中通过线程或进程这种纯软件方式模拟出假的 CPU，通过 CPU 虚拟化就可以将一个物理 CPU 发给不同的虚拟机使用。\n虚拟出来的每颗 CPU 实际上就是一个线程或者进程，因此物理 CPU 核数要大于虚拟 CPU 总核数。\nCPU QoS(Quality of Service) 服务质量 QoS 用来控制虚拟机使用 CPU 资源量的大小。 CPU 资源限额：控制虚拟机占用物理资源使用的上限。 CPU 资源份额：定义了多台虚拟机在竞争物理 CPU 资源时，需按比例分配计算资源。 CPU 预留资源：定义了多台虚拟机在竞争物理 CPU 时，每台虚拟机最低分配的计算资源。\nNUMA NUMA(Non Uniform Memory Access Architecture) 非统一内存访问体系结构，提高物理服务器性能的一种技术。\n将物理服务器的 CPU 和内存资源分到多个 node 上，node 内的内存访问效率最高。\nNUMA 保证了一个 VM 上的 VCPU 尽量分配到同一个 node 中的物理 CPU 上，如果一台 VM 的 VCPU 跨 node 访问内存的话，访问的延时肯定增加。\n内存虚拟化 \u003c!DOCTYPE html\u003e Responsive Image 虚拟化类型 全虚拟化 半虚拟化 硬件辅助虚拟化 为每个 VM 维护一个影子页表记录虚拟化内存与物理内存的映射关系，VMM 将影子页表提交给 CPU 的内存管理单元 MMU 进行地址转换，VM 的页表无需改动。 采用页表写入法，为每个 VM 创建\n一个页表并向虚拟化层注册。VM\n运行过程中 VMM 不断管理和维护\n该页表，确保 VM 能直接访问到合\n适的地址。 EPT/NPT 是内存管理单元 MMU 的\n扩展，CPU 硬件一个特性，通过\n硬件方式实现 GuestOS 物理内存地\n址到主机物理内存地址的转换，系\n统开销更低，性能更高。 内存复用技术 内存复用是指在服务器物理内存一定的情况下，通过综合运用内存复用技术对内存进行分时复用。 内存复用技术有：\n内存气泡：虚拟化层将较空闲 VM 内存，分配给内存使用较高的虚拟机。内存的回收和分配由虚拟化层实现，虚拟机上的应用无感知，提高物理内存利用率。（虚拟机分配的内存不超过物理机总内存） 内存交换：将外部存储虚拟成内存给 VM 使用，将 VM 上长时间未访问的数据存放到外部存储上，建立映射关系。VM 再次访问这些数据是通过映射在与内存上的数据进行交换。 内存共享：VM 只对共用的内存（共享数据内容为零的内存页）做只读操作，有写操作时运用写时复制 (VM 有写操作时，开辟另一空间，并修改映射) IO 虚拟化 全虚拟化 半虚拟化 Pass-Thorugh（直通） 硬件辅助虚拟化 通过软件模拟的形式模拟 O 设备，不需要硬件支持，对虚拟机的操作系统也不需要修改（因为模拟的都是一个常见的硬件网卡，如 IntelE1000，主流操作系统一般都自带这些驱动，因此默认情下虚拟机不需要再安装驱动。缺点就是性能差。 由 Hypervisor 提供资源调用接口。VM 通过特定的调用接口与 Hypervisor 通信，完成获取完整/O 资源控制操作。(需修改内核及驱动程序，存在移植性和适用性问题，导致其使用受限。) Hypervisor] 直接把硬件 PCI 设备分配给虚拟独占使用，性能挡当然好啦。但是浪遗硬件设备，且配置复杂，首先需要在 hypervisor 指定通过 PClid 方式分配给指定的虚拟机，然后虚拟机再识别到设备再安装驱动来使用。 通过硬件的辅助可以让虚拟机直接访问物理设备，而不需要通过 VMM。最常用的就是 SR-lOV(Single Root I/OVirtualizmion)单根 I/O 虚拟化标准，该技术可以直接虚拟出 128-512 网卡，可以让虚拟机都拿到一块独立的网卡，直接使用/O 资源。 常见集群策略 集群简介 集群是一种计算机系统，通过一组计算机或服务器的软硬件连接起来高度紧密地协作完成计算工作。在客户端看来为其提供服务的只有一台设备，实际上它是一群设备的集合，只不过这些设备提供的服务一样。\n集群系统中单个计算机通常称为节点，通过局域网连接，利用多个计算机进行并行计算获得很高计算速度，也可以用多个计算机做备份提高可靠性。（并行计算技术）\nHA 策略 HA(High Availability) 高可用性，一种让服务中断尽可能少的技术。将多台主机组建成一个故障转移集群，运行在集群上的服务（或 VM) 不会因为单台主机的故障而停止。\n提升故障恢复速度，降低业务中断时间、保障业务连续性、实现一定的系统自维护。\nDRS 策略 DRS(Dynamic resource scheduling) 动态资源调度，根据对资源池资源负载的动态监控，合理触发均匀分配规侧，实现资源池中的物理服务器之间重新分配资源，达到负载均衡、消峰填谷。\n当物理服务器上负载过大时，通过 DRS 将虚拟机迁移到其他负载较轻的物理服务器上。当虚拟机遇到负载增大时，DRS 将为资源池中的物理服务器重新分配虚拟机可使用资源，在多个虚拟机之间智能地分配可用资源。\nDPM 策略 DPM（Distributed power management) 分布式电源管理，用于业务较轻时，把虚拟机动态“集中”到集群中的少部分主机上，将其他主机待机，节省电力消耗，等业务量较大时，再重新唤醒之前待机的主机。\n执行 DPM 策略的前提是开启 DRS 策略，即集群必须先设置好 DRS 策略，才能设置 DPM 策略。\n存储虚拟化 存储类型 常用的存储类型有：\n本地磁盘 DAS 简介 云计算虚拟化场景下的本地磁盘是指使用服务器本地的磁盘资源，经过 RAD(磁盘阵列) 化后提供给虚拟化平台进行使用。 DAS(Direct-Attached Storage) 直连式存储：一个存储设备与使用存储空间的服务器\n直接相连的架构。DAS 为服务器提供块级的存储服务。 优点 - 使用方便\n- 无共享框架\n- 多个磁盘合并成一个逻辑磁盘，满足海量存储的需求\n- 可实现应用数据和操作系统的分离\n- 能提高存取性能\n- 实施简单\n缺点 - 对跨服务器来说没有备份、冗余机制 - 服务器发生故障，数据不可访问\n- 传输距离短 NAS SAN 简介 NAS(Network Attached Storage) 网络附加存储：将分布、独立的数据进行整合，集\n中化管理，以便对不同主机和应用服务器进行访问的技术。\nNAS 将存储设备连接到现有的网络上来提供数据和文件服务。 SAN(Storage Area Networks) 存储区域网络：是一种高速的、专门用于存储操作的网\n络，通常独立于计算机局域网。\n提供在主机和存储系统之间数据传输，网络内部数据传输的速率快。\n常见架构有 FC SAN、IP SAN。 优点 - 支持快照等高级特性\n- 集中存储\n- 提供安全集成环境（用户认证和授权)\n- 存储容量利用率高\n- 兼容性高\n- 传输距离远\n- 高带宽\n- 主机、存储设备可以独立扩展\n缺点 - 传输速率低\n- 前期安装和设备成本高 - 成本高、复杂 云存储基本概念 存储资源：表示实际的物理存储设备，例如 DAS(直连存储)、NAS(网络附加存储)、SA(存储区域网络) 等。\n存储设备：表示存储资源中的管理单元，例如本地磁盘、LUN(逻辑单元号)、Storage 存储池、NAS 共享目录等。\n数据存储：表示虚拟化平台中可管理的存储逻辑单元，承载了虚拟机业务，创建磁盘。\n\u003c!DOCTYPE html\u003e Responsive Image 创建虚拟存储的流程 在主机软件界面添加存储资源 (SAN、DAS 等)，对主机的启动进行配置。 主机关联存储资源后，进行扫描存储设备（本地磁盘、LUN 等），将具体的设备扫描到主机上。 主机在选择存储设备，进行数据存储的添加，并进行虚拟化。 最后对虚拟化好的数据存储进行创建卷等操作。 \u003c!DOCTYPE html\u003e Responsive Image 存储模式 非虚拟化存储 虚拟化存储 裸设备映射 传统的存储模式，就是把磁盘进行分区，分割成不同的逻辑卷，每一个逻辑卷可以给到虚拟机进行使用。 将不同的存储设备、磁盘进行格式化，格式化的目的是屏蔽底层存储设备的能力、接口\n协议等差异性，将各种存储资源转化为统一管理的数据存储资源。 将磁盘直接给到虚拟机使用，让虚拟机直接处理调用存储的命令（直接访问磁盘）中间虚拟化层不再对其进行任何干预（卷都不需要创建） 特点 - 性能好 (不再有中间的虚拟化层，VM 读写直接在磁盘上)、速度快、效率高。\n- 支持的存储功能少（不支持快照、精简配置等）\n- 支持多种存储功能（快照、精简磁盘、磁盘扩容、存储热迁移等)。\n- 性能不高（没有非虚拟化存储好）\n速度快（三种模式中最快）、性能好。\n支持的存储功能少（不支持快照、精简配置等），仅支持部分操作系统的虚拟机使用、数据存储只能整块当做裸设备映射的磁盘使用，不可分割。\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image 存储虚拟化方法 基于主机的存储虚拟化 若仅是单个主机服务器（或单个集群）访问多个磁盘阵列，可采用基于主机的存储虚拟化：虚拟化的工作通过特定的软件在主机服务器上完成，经过虚拟化的存储空间可以跨越多个异构的磁盘阵列。\n特点：\n优点是稳定性，以及对异构存储系统的开放性。 软件运行于主机上。 从与主机连接的存储上创建虚拟卷。 \u003c!DOCTYPE html\u003e Responsive Image 基于存储设备的虚拟化 若多个主机服务器需要访问同一个磁盘阵列时，可采用基于存储设备虚拟化。虚拟化的工作在阵列控制器上完成，将一个阵列上的存储容量划分多个存储空间 (LUN),供不同的主机系统访问。主要用在同一存储设备内部，进行数据保护和数据迁移。\n优点是与主机无关，不占用主机资源，数据管理功能丰富。 软件运行于存储设备中专门的嵌入式系统上。 从与 SAN 连接的存储上创建虚拟卷。 \u003c!DOCTYPE html\u003e Responsive Image 基于网络的存储虚拟化 通过在存储区域网 (SAN) 中添加虚似化引擎实现的，主要用于异构存储系统的整合和统数据管理。\n特点：\n优点是与主机无关，不占用主机资源； 支持异构主机、异构存储设备； 能使不同存储设备的数据管理功能统一，统一管理平台，可扩展性好。 \u003c!DOCTYPE html\u003e Responsive Image 存储虚拟化的功能 存储虚拟化可以提高硬件资源的使用效率，简化系统管理的复杂度，增强云存储平台的可靠性。可以通过以下几种技术实现：\n精简磁盘和空间回收 精简磁盘和空间回收用于提高存储资源的使用效率、减小虚拟机未使用空间在主机上占用率过大的问题。\n用户用多少分配多少空间（自动分配）\n空间回收可以将用户删除的数据空间释放到数据存储。\n\u003c!DOCTYPE html\u003e Responsive Image 快照 指定数据集合的一个完全可用拷贝，该拷贝包括相应数据在某个时间点（拷贝开始的时间点) 的映像。 快照可以是其所表示的数据的一个副本，可以是数据的一个复制品。 快照的作用主要是能够进行在线数据备份恢复。 为用户提供了数据访问通道 特点\n记录了虚拟机在某一时间点的内容和状。 恢复虚拟机快照可以使虚拟机多次快速恢复到某一时间点。 快照包含磁盘内容、虚拟机配置信息、内存数据。 多次快照之间保存差量数据，节约存储空间。 快照方式介绍 创建快照时会生成一个新的差分卷，虚拟机会挂载这个差分卷作为磁盘文件。\nROW 写时重定向 COW 写时拷贝 \u003c!DOCTYPE html\u003e Responsive Image 快照链介绍 对虚拟机进行多次的快照操作，这些多次的快照操作形成快照链。\n虚拟机卷始终挂载在快照链的最末端。\n\u003c!DOCTYPE html\u003e Responsive Image 链接克隆 将源卷和差分卷组合映射为一个链接克隆卷，给虚拟机使用。一个链接克隆需要和原始虚拟机共享同一虚拟磁盘文件。 采用共享磁盘文件缩短了创建克隆虚拟机的时间，还节省了物理磁盘空间。 通过链接克隆，可以轻松的为不同的任务创建一个独立的虚拟机。 \u003c!DOCTYPE html\u003e Responsive Image 虚拟磁盘文件迁移 功能：\n将虚拟机的磁盘从一个数据存储迁移到另一个数据存储。可以将虚拟机的所有磁盘整体迁移，也可以单个磁盘分别迁移。 虚拟机的快照可以一起迁移，虚拟机开启或者关闭时都可以迁移。 特点：\n\u003c!DOCTYPE html\u003e Responsive Image 网络虚拟化 虚拟化是对所有 T 资源的虚拟化，提高物理硬件的灵活性及利用效率。云计算中的计算和存储资源分别由计算虚拟化和存储虚拟化提供，而网络作为 T 的重要资源也有相应的虚拟化技术，网络资源由网络虚拟化提供。\n网络是由各种设备组成，有传统的物理网络，还有运行在服务器上看不到的虚拟网络。如何呈现和管理它们将是网络虚拟化的首要目标。\n将物理网络虚拟出多个相互隔离的虚拟网络（逻辑网络），从而使得不同用户之间使用独立的网络资源，从而提高网络资源利用率，实现弹性的网络。\nVLAN 就是一种网络虚拟化，在原有网络基础上通过 VLAN Tag:划分出多个广播域。\n网络虚拟化保障我们创建出来的虚拟机可以正常 通信、访问网络。\n节省物理主机的网卡设备资源，并且可以提供应用的虚拟网络所需的 L2 一 L7 层网络服务。\n网络虚拟化软件提供逻辑上的交换机和路由器 (L2-L3),逻辑负载均衡器，逻辑防火墙 (L4-L7) 等，且可以以任何形式进行组装，从而为虚拟机提供一个完整的 L2-L7 层的虚拟网络拓扑。\n物理网络包含的设备 路由器：工作在网络层，连接两个不同的网络。\n二层交换机：工作在数据链路层，转发数据。\n三层交换机：工作在网络层，结合了部分路由和交换机的功能。\n服务器网卡：提供通信服务。\n虚拟化中的网络架构 网卡虚拟化方法有：\n软件网卡虚拟化\n主要通过软件控制各个虚拟机共享同一块物理网卡实现。软件虚拟出来的网卡可以有单独的 MAC 地址、IP 地址。 所有虚拟机的虚拟网卡通过虚拟交换机以及物理网卡连接至物理交换机。虚拟交换机负责将虚拟机上的数据报文从物理网口转发出去。 \u003c!DOCTYPE html\u003e Responsive Image 硬件网卡虚拟化\n主要用到的技术是单根 I/O 虚拟化 (Single Root/O Virtulization,SR-lOV),就是 I/O 直通技术，通过硬件的辅助可以让虚拟机直接访问物理设备，而不需要通过 VMM。该技术可以直接虚拟出 128-512 网卡，可以让虚拟机都拿到一块独立的网卡，直接使用/O 资源。SR-OV 能够让网络传输绕过软件模拟层，直接分配到虚拟机，这样就降低了软件模拟层中的/○ 开销。 交换机虚拟化：\nOVS(Open vSwitch) 开放虚拟化软件交换机，是一款基于软件实现的开源虚拟以太网交换机，使用开源 Apache2.0 许可协议，主要用于虚拟机 VM 环境。与众多开源的虚拟化平台相整合（支持 Xen、KVM 及 VirtualBox 多种虚拟化技术），主要有两个作用：传递虚拟机之间的流量，实现虚拟机和外界网络的通信。 \u003c!DOCTYPE html\u003e Responsive Image 虚拟化中数据的转发路径 相同端口组不同服务器内的虚拟机通讯需要经过物理网络。（黑线） 相同端口组相同服务器内的虚拟机通讯不需要经过物理网络。（红线） 不同端口组相同服务器的虚拟机通讯需要经过物理网络。（黄色） \u003c!DOCTYPE html\u003e Responsive Image 链路虚拟化 VPC(Virtual Port Channel) 虚链路聚合，是最常见的二层虚拟化技术。\n链路聚合将多个物理端口捆绑在一起，虚拟成为一个逻辑端口。但传统链路聚合不能跨设备，VPC 很好解决了这个问题，既可以跨设备，又可以增加链路带宽、实现链路层的高可用性。\n隧道协议 (Tunneling Protocol)：指通过隧道协议使多个不同协议的网络实现互联。使用隧道传递的数据可以是不同协议的数据帧或包。隧道可以将数据流强制送到特定的地址，并隐藏中间节点的网络地址，还可根据需要，提供对数据加密的功能。\nGRE(Generic Routing Encapsulation) 通用路由封装。 IPsec(Internet Protocol Security)Internett 协议安全。 \u003c!DOCTYPE html\u003e Responsive Image 虚拟网络 虚拟网络 (Virtual Network):是由虚拟链路组成的网络。\n虚拟网络节点之间的连接并不使用物理线缆连接，而是依靠特定的虚拟化链路相连。\n典型的虚拟网络包括：\n层叠网络（虚拟二层延伸网络）\n层叠网络 (Overlay Network)：在现有网络的基础上搭建另外一种网络\n层叠网络允许对没有引 P 地址标识的目的主机路由信息。\n层叠网络可以充分利用现有资源，在不增加成本的前提下，提供更多的服务。（比如 ADSL Internet 接入线路就是基于已经存在的 PSTN 网络实现)\n\u003c!DOCTYPE html\u003e Responsive Image 典型技术：\nVXLAN(Virtual eXtensible Local Area Network) 虚拟扩展局域网：很好地解决了现有 VLAN 技术无法满足大二层网络需求的问题。 VXLAN 技术是一种大二层的虚拟网络技术。 原理是引入一个 UDP 格式的外层隧道作为数据链路层，而原有数据报文内容作为隧道净荷加以传输。 VPN 网络\nVPN(Virtual Private Network) 虚拟专用网：是一种常用于连接中、大型企业或团体与团体间的私人网络的通信方法。\n通过公用的网络架构（比如互联网）来传送内联网的信息。 利用已加密的隧道协议来达到保密、终端认证、信息准确性等安全效果。这种技术可以 在不安全的网络上传送可靠的、安全的信息。 \u003c!DOCTYPE html\u003e Responsive Image ","wordCount":"9380","inLanguage":"zh","datePublished":"2023-06-09T21:42:59Z","dateModified":"2023-06-09T21:42:59Z","author":{"@type":"Person","name":"Nic"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lifeislife.cn/posts/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF%E6%B1%87%E6%80%BB/"},"publisher":{"@type":"Organization","name":"夜云泊","logo":{"@type":"ImageObject","url":"https://lifeislife.cn/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script><script defer src=/static/fontawesome/fontawesome-all.js></script><header class=header><nav class=nav><div class=logo><a href=https://lifeislife.cn/ accesskey=h title="夜云泊 (Alt + H)">夜云泊</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lifeislife.cn/archives/ title=归档><span>归档</span></a></li><li><a href=https://lifeislife.cn/tags/ title=标签><span>标签</span></a></li><li><a href=https://lifeislife.cn/categories/ title=分类><span>分类</span></a></li><li><a href=https://lifeislife.cn/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://lifeislife.cn/awesome-cycling/ title=AwesomeCycling><span>AwesomeCycling</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.travellings.cn/go.html title=开往><span><i class='fa-solid fa-train-subway'></i>开往</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lifeislife.cn/>主页</a>&nbsp;»&nbsp;<a href=https://lifeislife.cn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">云计算基础技术汇总</h1><div class=post-meta><span title='2023-06-09 21:42:59 +0000 UTC'>六月 9, 2023</span>&nbsp;·&nbsp;19 分钟&nbsp;·&nbsp;9380 字&nbsp;·&nbsp;Nic</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#应用>应用</a></li></ul><ul><li><a href=#虚拟化>虚拟化</a></li><li><a href=#分布式存储>分布式存储</a></li><li><a href=#数据中心联网>数据中心联网</a></li><li><a href=#并行编程>并行编程</a></li><li><a href=#体系结构>体系结构</a></li><li><a href=#自动化部署>自动化部署</a></li></ul><ul><li><a href=#虚拟化相关的几个概念>虚拟化相关的几个概念</a></li><li><a href=#虚拟化类型>虚拟化类型</a></li><li><a href=#虚拟化层架构>虚拟化层架构</a><ul><li><a href=#全虚拟化代表-kvm-和半虚拟化代表-xen-架构对比>全虚拟化代表 KVM 和半虚拟化代表 Xen 架构对比</a></li></ul></li></ul><ul><li><a href=#主流容器技术>主流容器技术</a></li><li><a href=#容器和虚拟化的区别>容器和虚拟化的区别</a></li></ul><ul><li><a href=#nova>Nova</a></li><li><a href=#ecs>ECS</a></li><li><a href=#cvm>CVM</a></li></ul><ul><li><a href=#cpu-qosquality-of-service-服务质量>CPU QoS(Quality of Service) 服务质量</a></li><li><a href=#numa>NUMA</a></li></ul><ul><li><a href=#虚拟化类型-1>虚拟化类型</a></li><li><a href=#内存复用技术>内存复用技术</a></li></ul><ul><li><a href=#集群简介>集群简介</a></li><li><a href=#ha-策略>HA 策略</a></li><li><a href=#drs-策略>DRS 策略</a></li><li><a href=#dpm-策略>DPM 策略</a></li></ul><ul><li><a href=#存储类型>存储类型</a></li><li><a href=#云存储基本概念>云存储基本概念</a></li><li><a href=#创建虚拟存储的流程>创建虚拟存储的流程</a></li><li><a href=#存储模式>存储模式</a></li><li><a href=#存储虚拟化方法>存储虚拟化方法</a><ul><li><a href=#基于主机的存储虚拟化>基于主机的存储虚拟化</a></li><li><a href=#基于存储设备的虚拟化>基于存储设备的虚拟化</a></li><li><a href=#基于网络的存储虚拟化>基于网络的存储虚拟化</a></li></ul></li><li><a href=#存储虚拟化的功能>存储虚拟化的功能</a><ul><li><a href=#精简磁盘和空间回收>精简磁盘和空间回收</a></li><li><a href=#快照>快照</a></li><li><a href=#链接克隆>链接克隆</a></li><li><a href=#虚拟磁盘文件迁移>虚拟磁盘文件迁移</a></li></ul></li></ul><ul><li><a href=#物理网络包含的设备>物理网络包含的设备</a></li></ul><ul><li><a href=#虚拟化中数据的转发路径>虚拟化中数据的转发路径</a></li><li><a href=#链路虚拟化>链路虚拟化</a></li><li><a href=#虚拟网络>虚拟网络</a></li></ul></nav></div></details></div><div class=post-content><h1 id=云计算服务类型>云计算服务类型<a hidden class=anchor aria-hidden=true href=#云计算服务类型>#</a></h1><p>传统架构=>Iaas=>Paas=>Saas</p><p>自己烧饭=> 叮咚买菜=> 美团外卖=> 餐厅吃饭</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-36-45-b25eafa700db3dce390dab2aeb3af4f9-20230531093640-f17dbe.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-36-45-b25eafa700db3dce390dab2aeb3af4f9-20230531093640-f17dbe.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h1 id=云计算部署形式以及应用>云计算部署形式以及应用<a hidden class=anchor aria-hidden=true href=#云计算部署形式以及应用>#</a></h1><table><thead><tr><th>类型</th><th>描述</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>私有云</td><td>利用已有设备自我构建，云端资源只给内部人员使用。</td><td>安全性高</td><td>维护成本高</td></tr><tr><td>社区云、行业云</td><td>为特定行业构建共享基础设施的云。</td><td>有一套用户体系</td><td>维护成本高</td></tr><tr><td>公有云</td><td>构建大型基础设施云出租给公众。</td><td>用户来说成本低，服务多</td><td>安全性低</td></tr><tr><td>混合云</td><td>两种或者两种以上的云组成的云服务</td><td>敏捷，灵活，降低成本</td><td>兼容性问题</td></tr></tbody></table><h2 id=应用>应用<a hidden class=anchor aria-hidden=true href=#应用>#</a></h2><p>存储云、医疗云、教育云、企业云、金融云、游戏云、桌面云</p><h1 id=关键技术>关键技术<a hidden class=anchor aria-hidden=true href=#关键技术>#</a></h1><h2 id=虚拟化>虚拟化<a hidden class=anchor aria-hidden=true href=#虚拟化>#</a></h2><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/10-28-09-8bfe3f3fcd50903c6f72132d36c19f3e-20230531102804-d53750.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/10-28-09-8bfe3f3fcd50903c6f72132d36c19f3e-20230531102804-d53750.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=分布式存储>分布式存储<a hidden class=anchor aria-hidden=true href=#分布式存储>#</a></h2><p>将数据存储在不同的物理设备中。这种模式不仅摆脱了硬件设备的限制，同时<strong>扩展性更好</strong>，能够快速响应用户需求的变化（整合存储资源提供动态可伸缩资源池的分布式存储技术)</p><h2 id=数据中心联网>数据中心联网<a hidden class=anchor aria-hidden=true href=#数据中心联网>#</a></h2><p>虚拟机之间需要实时同步大量的数据，产生大量东西流量。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/10-38-24-9e7878e87965a767076d4071dd0e354f-20230531103820-7087aa.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/10-38-24-9e7878e87965a767076d4071dd0e354f-20230531103820-7087aa.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=并行编程>并行编程<a hidden class=anchor aria-hidden=true href=#并行编程>#</a></h2><p>在并行编程模式下，并发处理、容错、数据分布、负载均衡等细节都被抽象到一个函数库中，通过统一接口，用户大尺度的计算任务被自动并发和分布执行，即将一个任务自动分成多个子任务，并行地处理海量数据。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/16-17-02-45f21028b6e199dccd616053e8e43db8-20230602161656-9db753.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/16-17-02-45f21028b6e199dccd616053e8e43db8-20230602161656-9db753.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=体系结构>体系结构<a hidden class=anchor aria-hidden=true href=#体系结构>#</a></h2><p>云计算平台体系结构由用户界面、服务目录、管理系统、部署工具、监控和服务器集群组成。</p><h2 id=自动化部署>自动化部署<a hidden class=anchor aria-hidden=true href=#自动化部署>#</a></h2><p>对云资源进行自动化部署指的是基于脚本调节的基础上实现不同厂商对于设备工具的自动配置，用以减少人机交互比例、提高应变效率，避免超负荷人工操作等现象的发生，最终推进智能部署进程。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/08-46-31-bc2856698d6f9b760f7cad0b1bff7ef1-20230605084626-c49970.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/08-46-31-bc2856698d6f9b760f7cad0b1bff7ef1-20230605084626-c49970.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h1 id=云服务提供商>云服务提供商<a hidden class=anchor aria-hidden=true href=#云服务提供商>#</a></h1><p>亚马逊云、腾讯云、阿里云、百度云、华为云</p><p>技术架构：开源（Xen,KVM），Vmware，微软 hyper-v，阿里飞天 Apsara</p><p>开源云管理平台：OpenStack</p><h1 id=虚拟化简介>虚拟化简介<a hidden class=anchor aria-hidden=true href=#虚拟化简介>#</a></h1><p>虚拟化：一种计算机资源管理技术，将各种 T 实体资源抽象、转换成另一种形式的技术都是虚拟化。
作用：通过该技术将一台计算机虚拟为多台逻辑计算机。在一台计算机上同时运行多个逻辑计算机，每个逻辑计算机可运行不同的操作系统，并且应用程序都可以在相互独立的空间内运行而互不影响，从而<strong>显著提高计算机的工作效率</strong>。</p><p>从行业数据互相关联的角度来说，云计算是极度依赖虚拟化的。但虚拟化并非云计算，云计算也并非虚拟化。<strong>虚拟化只是云计算的核心技术，但并非云计算的核心关注点</strong>。</p><p>云计算是一种服务。虚拟化是云计算的技术基础。</p><h2 id=虚拟化相关的几个概念>虚拟化相关的几个概念<a hidden class=anchor aria-hidden=true href=#虚拟化相关的几个概念>#</a></h2><p>Guest OS:运行在虚拟机之上的 OS
Guest Machine:虚拟出来的虚拟机
VMM:虚拟机监控器，即虚拟化层 (Virtual Machine Monitor,VMM)
Host OS:运行在物理机之上的 OS
Host Machine:物理机</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/12-08-35-2a578c6b5ecfe26034e87a65aafd21da-20230531120830-e26a24.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/12-08-35-2a578c6b5ecfe26034e87a65aafd21da-20230531120830-e26a24.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=虚拟化类型>虚拟化类型<a hidden class=anchor aria-hidden=true href=#虚拟化类型>#</a></h2><table><thead><tr><th>虚拟化类型</th><th>描述</th><th>特点</th><th>案例</th></tr></thead><tbody><tr><td>寄居虚拟化（Type2）</td><td>在主机（宿主）操作系统上安装和运行虚拟化程序</td><td>- 简单、易于实现。<br>- 安装和运行应用程序依赖于主机操作系统对设备的支持。<br>- 有两层 OS，管理开销较大，性能损耗大。<br>- 虚拟机对各种物理设备 (cpu、内存、硬盘等) 的调用，都通过虚拟化层和宿主机的 OS 一起协调才能完成。</td><td>- Vmware<br>- VirturalBox<br></td></tr><tr><td>裸金属虚拟化 (Type1)</td><td>直接将 VMM 安装在硬件设备上，VMM 在这种模式下又叫做 Hypervisor，虚拟机有指令要执行时，Hypervisors 会接管该指令，模拟相应的操作。</td><td>- 不依赖于操作系统。<br>- 支持多种操作系统，多种应用。<br>- 依赖虚拟层内核和服务器控制台进行管理。<br>- 需要对虚拟层的内核进行开发（难度大）。</td><td>- VMware ESX<br>- Xen<br>- 华为 FusionSphere<br></td></tr><tr><td>混合虚拟化</td><td>在一个现有的正常操作系统下<strong>安装一个内核模块</strong>，内核拥有虚拟化能力。(相当于寄居与裸金属的混合)</td><td>- 相对于寄居虚拟化架构，性能高。<br>- 相对于裸金属虚拟化架构，不需要开发内核。<br>- 可支持多种操作系统。<br>- 需底层硬件支持虚拟化扩展功能。</td><td>- KVM</td></tr></tbody></table><p>寄居虚拟化（Type2）</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-24-43-35c85e077a5dc39f5f17e5a2ba879e16-20230602142439-ca0fee.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-24-43-35c85e077a5dc39f5f17e5a2ba879e16-20230602142439-ca0fee.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><p>裸金属虚拟化 (Type1)</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-24-29-4e00e51ef3d07ece5d29fa6a297b2f5b-20230602142424-f05f39.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-24-29-4e00e51ef3d07ece5d29fa6a297b2f5b-20230602142424-f05f39.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><p>混合虚拟化</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-24-07-e0079492f1d08c44e5c5bf88944f6e42-20230602142402-80ad49.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-24-07-e0079492f1d08c44e5c5bf88944f6e42-20230602142402-80ad49.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=虚拟化层架构>虚拟化层架构<a hidden class=anchor aria-hidden=true href=#虚拟化层架构>#</a></h2><table><thead><tr><th>架构</th><th>描述</th><th>特点</th><th>典型</th></tr></thead><tbody><tr><td>全虚拟化</td><td>即所抽象的 VM 具有完全的物理特性，虚拟化层负责捕获 CPU 指令，为指令访问硬件充当媒介。</td><td>- OS 无需修改。<br>- 速度和功能都非常不错，使用非常简单。<br>- 移植性好。</td><td>- VMware<br>- KVM<br>- Virtualbox<br>- Virtual PC<br></td></tr><tr><td>半虚拟化</td><td>起初是为了解决全虚拟化效率不高的困难，它需要修改 OS，工作效率相对全虚拟化要高很多。Hypervisor 直接安装在物理机上，多个虚拟机在 Hypervisor 上运行。Hypervisor 实现方式一般是一个特殊定制的 Linux 系统。</td><td>- 架构更精简。<br>- 在整体速度上有一定的优势。<br>- 需要对 OS 进行修改，在用户体验方面比较麻烦。</td><td>- Xen<br>- VMWare ESXi<br>- 微软 Hyper-V<br></td></tr><tr><td>硬件辅助虚拟化</td><td>硬件辅助虚拟化是随着虚拟化技术的应用越来越广泛 lntl、AMD 等硬件厂商通过对硬件的改造来支持虚拟化技术。<br><br>常用于优化全虚拟化和半虚拟化产品，像 VMware Workstation，它虽然属于全虚拟化，但它在 6.0 版本中引入了硬件辅助虚拟化技术，比如 Intel 的 VT-x 和 AMD 的 AMD-V。主流全虚拟化和半虚拟化产品都支持硬件辅助虚拟化。(VirtualBox,KVM,Xen 等)<br></td><td>辅助产品</td><td>- VT-x<br>- AMD-V<br></td></tr></tbody></table><p>全虚拟化</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/12-21-14-f022c910d48931ce11223d247c888351-20230531122109-78f6d6.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/12-21-14-f022c910d48931ce11223d247c888351-20230531122109-78f6d6.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><p>半虚拟化</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/13-51-35-895d9c73dccc874815424d87298ef8bd-20230531135130-c79d43.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/13-51-35-895d9c73dccc874815424d87298ef8bd-20230531135130-c79d43.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h3 id=全虚拟化代表-kvm-和半虚拟化代表-xen-架构对比>全虚拟化代表 KVM 和半虚拟化代表 Xen 架构对比<a hidden class=anchor aria-hidden=true href=#全虚拟化代表-kvm-和半虚拟化代表-xen-架构对比>#</a></h3><table><thead><tr><th>架构</th><th>描述</th><th>对比</th><th>示意图</th></tr></thead><tbody><tr><td>全虚拟化：KVM</td><td>KVM(Kernel&ndash;Based Virtual Machines) 是一个基于 Linux 内核的虚拟化技术，可以直接将 Linux 内核转换为 Hypervisor。.从而使得 Linuxp 内核能够直接管理虚拟机，直接调用 Linux 内核中的内存管理、进程管理子系统来管理虚拟机。</td><td>- 支持全虚拟化<br>- 内置在内核中<br>- 便于版本安装、升级、维护，性能高<br>总结：KVM 平台架构侧重性能</td><td><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/13-50-44-295215a975864579d54f5ea07685e119-20230531135039-2dafa3.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/13-50-44-295215a975864579d54f5ea07685e119-20230531135039-2dafa3.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></td></tr><tr><td>半虚拟化：Xen</td><td>Xen:直接把操作系统内核改了，把 OS 改成一个轻量级 Hypervisor1 在里面运行了一个管理所有资源作资源调度的 Domain0。<br>组成：由 Xen Hypervisor(虚拟化层)、Domin0(管理主机)、Domin U(用户虚<br>拟机)<br></td><td>- 支持全虚拟化、半虚拟化<br>- 需要对内核修改<br>- 更新版本，Xen 需要重新编译整个内核隔离性好<br>总结：Xen 平台架构侧重安全性</td><td><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-18-51-ec8fcb01ac5cda397c51a883587850ea-20230531141846-6f42cf.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-18-51-ec8fcb01ac5cda397c51a883587850ea-20230531141846-6f42cf.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></td></tr></tbody></table><h1 id=容器>容器<a hidden class=anchor aria-hidden=true href=#容器>#</a></h1><p>容器：包装或装载物品的贮存器，利用一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任一 Liux 或 Windows 机器上，也可以实现虚拟化。相互之间不会有任何接口，实现 App 与操作系统的解耦。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-49-30-c10e37d44495429910370b47eac70018-20230531144926-f7f9e5.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-49-30-c10e37d44495429910370b47eac70018-20230531144926-f7f9e5.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=主流容器技术>主流容器技术<a hidden class=anchor aria-hidden=true href=#主流容器技术>#</a></h2><p>定义：Docker) 属于 Liux 容器的一种封装，提供简单易用的容器使用接口，他是目前最流行的 Linux 容器解决方案。
作用：将应用程序与该程序的依赖，<strong>打包在一个文件里</strong>。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了 Docker，就不用担心环境问题。</p><p>组成：客户端 (Docker Client)、守护进程 (Docker Daemon)、镜像（Docker Image)、容器 (DockerContainer)、仓库（Docker Registry)</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-53-26-70a710bfca6ebb2d0197a8fb28a89b13-20230531145321-ce6e27.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-53-26-70a710bfca6ebb2d0197a8fb28a89b13-20230531145321-ce6e27.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=容器和虚拟化的区别>容器和虚拟化的区别<a hidden class=anchor aria-hidden=true href=#容器和虚拟化的区别>#</a></h2><table><thead><tr><th>虚拟化</th><th>容器</th></tr></thead><tbody><tr><td>隔离性强，有独立的 GUEST OS</td><td>共享内核和 OS，隔离性弱</td></tr><tr><td>虚拟化性能差 (>15%)</td><td>计算/存储无损耗，无 Guest0S 内存开销（200M)</td></tr><tr><td>虚拟机镜像庞大（十几 G 几十 G),且实例化时不能共享</td><td>Docker 容器镜象 200300M，且公共基础镜象实例化时<br>可以共享</td></tr><tr><td>虚拟机镜象缺乏统一标准</td><td>Docker 提供了容器应用镜象事实标准，OCI 推动进一步标<br>准化</td></tr><tr><td>虚拟机创建慢 (>2 分钟)</td><td>秒级创建 (&lt;10s)<br>相当于建立索引</td></tr><tr><td>虚拟机启动慢 (>30s) 读文件逐个加载</td><td>秒级 (&lt;1s，不含应用本身启动)</td></tr><tr><td>资源虚拟化粒度低，单机 10~100 虚拟机</td><td>单机支持 1000+ 容器<br>密度很高，适合大规模的部署</td></tr></tbody></table><h1 id=计算虚拟化>计算虚拟化<a hidden class=anchor aria-hidden=true href=#计算虚拟化>#</a></h1><p>从服务器组建角度来看，计算虚拟化可分为：</p><ul><li>CPU 虚拟化：保障 CPU 资源的合理调度以及 VM 上的指令能够正常高效的执行。</li><li>内存虚拟化：保障内存空间的合理分配、管理，隔离，以及高效可靠地使用。</li><li>I/O 虚拟化：保障 VM 的 1O 隔离与正常高效的执行。</li></ul><p>常见的计算服务架构有：</p><ul><li>OpenStack Nova</li><li>阿里云 ECS</li><li>腾讯云 CVM</li></ul><h2 id=nova>Nova<a hidden class=anchor aria-hidden=true href=#nova>#</a></h2><p>OpenStack 是开源的云平台，通过不同的组件提供计算、存储、网络、数据库等多种云服务。其中计算服务由 Nova 组件提供，通过 nova-API 与其他组件通信，通过 nova-computex 对接不同的虚拟层提供计算虚拟化服务。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/15-20-39-626c5b8808d188dd741630c2f871ac95-20230531152034-53e4f2.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/15-20-39-626c5b8808d188dd741630c2f871ac95-20230531152034-53e4f2.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><p>创建实例流程：创建实例请求 nova-api，会唤醒 nova-database，请求刷新数据库。将请求给队列组件，nova-scheduler 从队列中取出请求，请求运行相对应的虚拟机。要运行不同的虚拟机，需要不同的平台支持（KVM，Xen,VMware）。虚拟机不能直接与数据库直接交互，需要通过 nova-conductor 转发。</p><h2 id=ecs>ECS<a hidden class=anchor aria-hidden=true href=#ecs>#</a></h2><p>云服务器 ECS(Elastic Compute Service) 是阿里云提供的基于 KVM 虚拟化的弹性计算服务，建立在阿里云飞天 (Apsara) 分布式操作系统上。
请求的主要调用流程为：OpenAPI、.业务层、控制系统、宿主机服务。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/15-27-39-3057bca8eb97414d6d91c2201a895311-20230531152734-7f53e0.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/15-27-39-3057bca8eb97414d6d91c2201a895311-20230531152734-7f53e0.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=cvm>CVM<a hidden class=anchor aria-hidden=true href=#cvm>#</a></h2><p>云服务器 CVM(Cloud Virtual Machine)) 是腾讯提供的基于 KVM 虚拟化的弹性计算服务，建立在腾讯云分布式资源管理调度系统 VStation.上。
请求的主要调用流程为：API Server、.VStation、服务器集群。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/15-28-22-2ee550326d62c2552c94cc2ef677e5a3-20230531152818-41688d.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/15-28-22-2ee550326d62c2552c94cc2ef677e5a3-20230531152818-41688d.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h1 id=cpu-虚拟化>CPU 虚拟化<a hidden class=anchor aria-hidden=true href=#cpu-虚拟化>#</a></h1><p>在物理机（宿主机）中通过线程或进程这种纯软件方式模拟出假的 CPU，通过 CPU 虚拟化就可以将一个物理 CPU 发给不同的虚拟机使用。</p><p>虚拟出来的每颗 CPU 实际上就是一个线程或者进程，因此物理 CPU 核数要大于虚拟 CPU 总核数。</p><h2 id=cpu-qosquality-of-service-服务质量>CPU QoS(Quality of Service) 服务质量<a hidden class=anchor aria-hidden=true href=#cpu-qosquality-of-service-服务质量>#</a></h2><p>QoS 用来控制虚拟机使用 CPU 资源量的大小。
CPU 资源限额：控制虚拟机占用物理资源使用的上限。
CPU 资源份额：定义了多台虚拟机在竞争物理 CPU 资源时，需按比例分配计算资源。
CPU 预留资源：定义了多台虚拟机在竞争物理 CPU 时，每台虚拟机最低分配的计算资源。</p><h2 id=numa>NUMA<a hidden class=anchor aria-hidden=true href=#numa>#</a></h2><p>NUMA(Non Uniform Memory Access Architecture) 非统一内存访问体系结构，提高物理服务器性能的一种技术。</p><p>将物理服务器的 CPU 和内存资源分到多个 node 上，node 内的内存访问效率最高。</p><p>NUMA 保证了一个 VM 上的 VCPU 尽量分配到同一个 node 中的物理 CPU 上，如果一台 VM 的 VCPU 跨 node 访问内存的话，访问的延时肯定增加。</p><h1 id=内存虚拟化>内存虚拟化<a hidden class=anchor aria-hidden=true href=#内存虚拟化>#</a></h1><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/15-53-33-a6d733a49ff6057c8e528cad5867f015-20230531155328-769d51.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/15-53-33-a6d733a49ff6057c8e528cad5867f015-20230531155328-769d51.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=虚拟化类型-1>虚拟化类型<a hidden class=anchor aria-hidden=true href=#虚拟化类型-1>#</a></h2><table><thead><tr><th>全虚拟化</th><th>半虚拟化</th><th>硬件辅助虚拟化</th></tr></thead><tbody><tr><td>为每个 VM 维护一个影子页表记录虚拟化内存与物理内存的映射关系，VMM 将影子页表提交给 CPU 的内存管理单元 MMU 进行地址转换，VM 的页表无需改动。</td><td>采用页表写入法，为每个 VM 创建<br>一个页表并向虚拟化层注册。VM<br>运行过程中 VMM 不断管理和维护<br>该页表，确保 VM 能直接访问到合<br>适的地址。</td><td>EPT/NPT 是内存管理单元 MMU 的<br>扩展，CPU 硬件一个特性，通过<br>硬件方式实现 GuestOS 物理内存地<br>址到主机物理内存地址的转换，系<br>统开销更低，性能更高。</td></tr></tbody></table><h2 id=内存复用技术>内存复用技术<a hidden class=anchor aria-hidden=true href=#内存复用技术>#</a></h2><p>内存复用是指在服务器物理内存一定的情况下，通过综合运用内存复用技术对内存进行分时复用。
内存复用技术有：</p><ul><li>内存气泡：虚拟化层将较空闲 VM 内存，分配给内存使用较高的虚拟机。内存的回收和分配由虚拟化层实现，虚拟机上的应用无感知，提高物理内存利用率。（虚拟机分配的内存不超过物理机总内存）</li><li>内存交换：将外部存储虚拟成内存给 VM 使用，将 VM 上长时间未访问的数据存放到外部存储上，建立映射关系。VM 再次访问这些数据是通过映射在与内存上的数据进行交换。</li><li>内存共享：VM 只对共用的内存（共享数据内容为零的内存页）做只读操作，有写操作时运用写时复制 (VM 有写操作时，开辟另一空间，并修改映射)</li></ul><h1 id=io-虚拟化>IO 虚拟化<a hidden class=anchor aria-hidden=true href=#io-虚拟化>#</a></h1><table><thead><tr><th>全虚拟化</th><th>半虚拟化</th><th>Pass-Thorugh（直通）</th><th>硬件辅助虚拟化</th></tr></thead><tbody><tr><td>通过软件模拟的形式模拟 O 设备，<strong>不需要硬件支持</strong>，对虚拟机的操作系统也不需要修改（因为模拟的都是一个常见的硬件网卡，如 IntelE1000，主流操作系统一般都自带这些驱动，因此默认情下虚拟机不需要再安装驱动。缺点就是<strong>性能差</strong>。</td><td>由 Hypervisor 提供资源调用接口。VM 通过特定的调用接口与 Hypervisor 通信，完成获取完整/O 资源控制操作。(需修改内核及驱动程序，存在移植性和适用性问题，导致其使用受限。)</td><td>Hypervisor] 直接把硬件 PCI 设备分配给虚拟独占使用，性能挡当然好啦。但是<strong>浪遗硬件设备</strong>，且<strong>配置复杂</strong>，首先需要在 hypervisor 指定通过 PClid 方式分配给指定的虚拟机，然后虚拟机再识别到设备再安装驱动来使用。</td><td>通过硬件的辅助可以让虚拟机直接访问物理设备，而不需要通过 VMM。最常用的就是 SR-lOV(Single Root I/OVirtualizmion)单根 I/O 虚拟化标准，该技术可以直接虚拟出 128-512 网卡，可以让虚拟机都拿到一块独立的网卡，直接使用/O 资源。</td></tr></tbody></table><h1 id=常见集群策略>常见集群策略<a hidden class=anchor aria-hidden=true href=#常见集群策略>#</a></h1><h2 id=集群简介>集群简介<a hidden class=anchor aria-hidden=true href=#集群简介>#</a></h2><p>集群是一种计算机系统，通过一组计算机或服务器的软硬件连接起来高度紧密地协作完成计算工作。在客户端看来为其提供服务的只有一台设备，实际上它是一群设备的集合，只不过这些设备提供的服务一样。</p><p>集群系统中单个计算机通常称为节点，通过局域网连接，利用多个计算机进行并行计算获得很高计算速度，也可以用多个计算机做备份提高可靠性。（并行计算技术）</p><h2 id=ha-策略>HA 策略<a hidden class=anchor aria-hidden=true href=#ha-策略>#</a></h2><p>HA(High Availability) 高可用性，一种让服务中断尽可能少的技术。将多台主机组建成一个故障转移集群，运行在集群上的服务（或 VM) 不会因为单台主机的故障而停止。</p><p>提升故障恢复速度，降低业务中断时间、保障业务连续性、实现一定的系统自维护。</p><h2 id=drs-策略>DRS 策略<a hidden class=anchor aria-hidden=true href=#drs-策略>#</a></h2><p>DRS(Dynamic resource scheduling) 动态资源调度，根据对资源池资源负载的动态监控，合理触发均匀分配规侧，实现资源池中的物理服务器之间重新分配资源，达到<strong>负载均衡、消峰填谷</strong>。</p><p>当物理服务器上负载过大时，通过 DRS 将虚拟机迁移到其他负载较轻的物理服务器上。当虚拟机遇到负载增大时，DRS 将为资源池中的物理服务器重新分配虚拟机可使用资源，在多个虚拟机之间智能地分配可用资源。</p><h2 id=dpm-策略>DPM 策略<a hidden class=anchor aria-hidden=true href=#dpm-策略>#</a></h2><p>DPM（Distributed power management) 分布式电源管理，用于业务较轻时，把虚拟机动态“集中”到集群中的少部分主机上，将其他主机待机，节省电力消耗，等业务量较大时，再重新唤醒之前待机的主机。</p><p>执行 DPM 策略的前提是开启 DRS 策略，即集群必须先设置好 DRS 策略，才能设置 DPM 策略。</p><h1 id=存储虚拟化>存储虚拟化<a hidden class=anchor aria-hidden=true href=#存储虚拟化>#</a></h1><h2 id=存储类型>存储类型<a hidden class=anchor aria-hidden=true href=#存储类型>#</a></h2><p>常用的存储类型有：</p><table><thead><tr><th></th><th>本地磁盘</th><th>DAS</th></tr></thead><tbody><tr><td>简介</td><td>云计算虚拟化场景下的本地磁盘是指使用服务器本地的磁盘资源，经过 RAD(磁盘阵列) 化后提供给虚拟化平台进行使用。</td><td>DAS(Direct-Attached Storage) 直连式存储：一个存储设备与使用存储空间的服务器<br>直接相连的架构。DAS 为服务器提供块级的存储服务。</td></tr><tr><td>优点</td><td>- 使用方便<br>- 无共享框架<br></td><td>- 多个磁盘合并成一个逻辑磁盘，满足海量存储的需求<br>- 可实现应用数据和操作系统的分离<br>- 能提高存取性能<br>- 实施简单<br></td></tr><tr><td>缺点</td><td>- 对跨服务器来说没有备份、冗余机制</td><td>- 服务器发生故障，数据不可访问<br>- 传输距离短</td></tr></tbody></table><table><thead><tr><th></th><th style=text-align:left>NAS</th><th style=text-align:left>SAN</th></tr></thead><tbody><tr><td>简介</td><td style=text-align:left>NAS(Network Attached Storage) 网络附加存储：将分布、独立的数据进行整合，集<br>中化管理，以便对不同主机和应用服务器进行访问的技术。<br>NAS 将存储设备连接到现有的网络上来提供数据和文件服务。</td><td style=text-align:left>SAN(Storage Area Networks) 存储区域网络：是一种高速的、专门用于存储操作的网<br>络，通常独立于计算机局域网。<br>提供在主机和存储系统之间数据传输，网络内部数据传输的速率快。<br>常见架构有 FC SAN、IP SAN。</td></tr><tr><td>优点</td><td style=text-align:left>- 支持快照等高级特性<br>- 集中存储<br>- 提供安全集成环境（用户认证和授权)<br></td><td style=text-align:left>- 存储容量利用率高<br>- 兼容性高<br>- 传输距离远<br>- 高带宽<br>- 主机、存储设备可以独立扩展<br></td></tr><tr><td>缺点</td><td style=text-align:left>- 传输速率低<br>- 前期安装和设备成本高</td><td style=text-align:left>- 成本高、复杂</td></tr></tbody></table><h2 id=云存储基本概念>云存储基本概念<a hidden class=anchor aria-hidden=true href=#云存储基本概念>#</a></h2><p>存储资源：表示实际的物理存储设备，例如 DAS(直连存储)、NAS(网络附加存储)、SA(存储区域网络) 等。</p><p>存储设备：表示存储资源中的管理单元，例如本地磁盘、LUN(逻辑单元号)、Storage 存储池、NAS 共享目录等。</p><p>数据存储：表示虚拟化平台中可管理的存储逻辑单元，承载了虚拟机业务，创建磁盘。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/18-55-45-5599a99b10ac1c9c3ad6cc69bc1c9c67-20230531185540-d75052.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/18-55-45-5599a99b10ac1c9c3ad6cc69bc1c9c67-20230531185540-d75052.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=创建虚拟存储的流程>创建虚拟存储的流程<a hidden class=anchor aria-hidden=true href=#创建虚拟存储的流程>#</a></h2><ol><li>在主机软件界面添加存储资源 (SAN、DAS 等)，对主机的启动进行配置。</li><li>主机关联存储资源后，进行扫描存储设备（本地磁盘、LUN 等），将具体的设备扫描到主机上。</li><li>主机在选择存储设备，进行数据存储的添加，并进行虚拟化。</li><li>最后对虚拟化好的数据存储进行创建卷等操作。</li></ol><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/18-58-26-0207d3cfacb381f75c3d8f52b3251639-20230531185822-ac2437.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/18-58-26-0207d3cfacb381f75c3d8f52b3251639-20230531185822-ac2437.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=存储模式>存储模式<a hidden class=anchor aria-hidden=true href=#存储模式>#</a></h2><table><thead><tr><th></th><th>非虚拟化存储</th><th>虚拟化存储</th><th>裸设备映射</th></tr></thead><tbody><tr><td></td><td>传统的存储模式，就是把磁盘进行分区，分割成不同的逻辑卷，每一个逻辑卷可以给到虚拟机进行使用。</td><td>将不同的存储设备、磁盘进行格式化，格式化的目的是屏蔽底层存储设备的能力、接口<br>协议等差异性，将各种存储资源转化为统一管理的数据存储资源。</td><td>将磁盘直接给到虚拟机使用，让虚拟机直接处理调用存储的命令（直接访问磁盘）中间虚拟化层不再对其进行任何干预（卷都不需要创建）</td></tr><tr><td>特点</td><td>- 性能好 (不再有中间的虚拟化层，VM 读写直接在磁盘上)、速度快、效率高。<br><br>- 支持的存储功能少（不支持快照、精简配置等）<br></td><td>- 支持多种存储功能（快照、精简磁盘、磁盘扩容、存储热迁移等)。<br>- 性能不高（没有非虚拟化存储好）<br></td><td>速度快（三种模式中最快）、性能好。<br>支持的存储功能少（不支持快照、精简配置等），仅支持部分操作系统的虚拟机使用、数据存储只能整块当做裸设备映射的磁盘使用，不可分割。<br></td></tr><tr><td></td><td><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-05-13-74eb9473a84f7cc8d591b18d5b0ec7ee-20230531190509-4a3908.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-05-13-74eb9473a84f7cc8d591b18d5b0ec7ee-20230531190509-4a3908.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></td><td><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-08-34-98b4e748d8c582b1e74f109fe228fb9c-20230531190829-8006f5.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-08-34-98b4e748d8c582b1e74f109fe228fb9c-20230531190829-8006f5.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></td><td><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-12-22-a0c2ce10d5ab79474d217028ed20056b-20230531191217-563c1b.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-12-22-a0c2ce10d5ab79474d217028ed20056b-20230531191217-563c1b.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></td></tr></tbody></table><h2 id=存储虚拟化方法>存储虚拟化方法<a hidden class=anchor aria-hidden=true href=#存储虚拟化方法>#</a></h2><h3 id=基于主机的存储虚拟化>基于主机的存储虚拟化<a hidden class=anchor aria-hidden=true href=#基于主机的存储虚拟化>#</a></h3><p>若仅是单个主机服务器（或单个集群）访问多个磁盘阵列，可采用基于主机的存储虚拟化：虚拟化的工作通过特定的软件在主机服务器上完成，经过虚拟化的存储空间可以跨越多个异构的磁盘阵列。</p><p>特点：</p><ul><li>优点是稳定性，以及对异构存储系统的开放性。</li><li>软件运行于主机上。</li><li>从与主机连接的存储上创建虚拟卷。</li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/08-36-54-e70134a6efd0d031785dc81eeb922c38-20230601083649-a5e4db.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/08-36-54-e70134a6efd0d031785dc81eeb922c38-20230601083649-a5e4db.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h3 id=基于存储设备的虚拟化>基于存储设备的虚拟化<a hidden class=anchor aria-hidden=true href=#基于存储设备的虚拟化>#</a></h3><p>若多个主机服务器需要访问同一个磁盘阵列时，可采用基于存储设备虚拟化。虚拟化的工作在阵列控制器上完成，将一个阵列上的存储容量划分多个存储空间 (LUN),供不同的主机系统访问。主要用在同一存储设备内部，进行数据保护和数据迁移。</p><ul><li>优点是与主机无关，不占用主机资源，数据管理功能丰富。</li><li>软件运行于存储设备中专门的嵌入式系统上。</li><li>从与 SAN 连接的存储上创建虚拟卷。</li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/08-41-22-f6e0c1760cda24ae776bfcf3c57c2af5-20230601084118-73285e.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/08-41-22-f6e0c1760cda24ae776bfcf3c57c2af5-20230601084118-73285e.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h3 id=基于网络的存储虚拟化>基于网络的存储虚拟化<a hidden class=anchor aria-hidden=true href=#基于网络的存储虚拟化>#</a></h3><p>通过在存储区域网 (SAN) 中添加虚似化引擎实现的，主要用于异构存储系统的整合和统数据管理。</p><p>特点：</p><ul><li>优点是与主机无关，不占用主机资源；</li><li>支持异构主机、异构存储设备；</li><li>能使不同存储设备的数据管理功能统一，统一管理平台，可扩展性好。</li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/08-42-36-66183a6a63e0ab9ed777c2ff96834109-20230601084232-7fdd98.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/08-42-36-66183a6a63e0ab9ed777c2ff96834109-20230601084232-7fdd98.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=存储虚拟化的功能>存储虚拟化的功能<a hidden class=anchor aria-hidden=true href=#存储虚拟化的功能>#</a></h2><p>存储虚拟化可以提高硬件资源的使用效率，简化系统管理的复杂度，增强云存储平台的可靠性。可以通过以下几种技术实现：</p><h3 id=精简磁盘和空间回收>精简磁盘和空间回收<a hidden class=anchor aria-hidden=true href=#精简磁盘和空间回收>#</a></h3><p>精简磁盘和空间回收用于提高存储资源的使用效率、减小虚拟机未使用空间在主机上占用率过大的问题。</p><p>用户用多少分配多少空间（自动分配）<br>空间回收可以将用户删除的数据空间释放到数据存储。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-07-37-a97805053794b23776d5085409611896-20230601090732-4ff3a3.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-07-37-a97805053794b23776d5085409611896-20230601090732-4ff3a3.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h3 id=快照>快照<a hidden class=anchor aria-hidden=true href=#快照>#</a></h3><ul><li>指定数据集合的一个完全可用拷贝，该拷贝包括相应数据在某个时间点（拷贝开始的时间点) 的映像。</li><li>快照可以是其所表示的数据的一个副本，可以是数据的一个复制品。</li><li>快照的作用主要是能够进行在线数据备份恢复。</li><li>为用户提供了数据访问通道</li></ul><p>特点</p><ul><li>记录了虚拟机在某一时间点的内容和状。</li><li>恢复虚拟机快照可以使虚拟机多次快速恢复到某一时间点。</li><li>快照包含磁盘内容、虚拟机配置信息、内存数据。</li><li>多次快照之间<strong>保存差量数据</strong>，节约存储空间。</li></ul><h4 id=快照方式介绍>快照方式介绍<a hidden class=anchor aria-hidden=true href=#快照方式介绍>#</a></h4><p>创建快照时会生成一个新的差分卷，虚拟机会挂载这个差分卷作为磁盘文件。</p><ul><li>ROW 写时重定向</li><li>COW 写时拷贝</li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-13-17-381617aa029cc392aa3ae573efdfb8aa-20230601091313-a0828c.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-13-17-381617aa029cc392aa3ae573efdfb8aa-20230601091313-a0828c.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h4 id=快照链介绍>快照链介绍<a hidden class=anchor aria-hidden=true href=#快照链介绍>#</a></h4><p>对虚拟机进行多次的快照操作，这些多次的快照操作形成快照链。</p><p>虚拟机卷始终挂载在快照链的最末端。</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-35-59-7cc5ae355ea7c376e94b60b952e0284e-20230601093555-863fc8.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-35-59-7cc5ae355ea7c376e94b60b952e0284e-20230601093555-863fc8.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h3 id=链接克隆>链接克隆<a hidden class=anchor aria-hidden=true href=#链接克隆>#</a></h3><ul><li>将源卷和差分卷组合映射为一个链接克隆卷，给虚拟机使用。一个链接克隆需要和原始虚拟机共享同一虚拟磁盘文件。</li><li>采用共享磁盘文件缩短了创建克隆虚拟机的时间，还节省了物理磁盘空间。</li><li>通过链接克隆，可以轻松的为不同的任务创建一个独立的虚拟机。</li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-19-47-654bac5b7dfa915bea5c572df6f58bbd-20230601091942-a6a3d7.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-19-47-654bac5b7dfa915bea5c572df6f58bbd-20230601091942-a6a3d7.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h3 id=虚拟磁盘文件迁移>虚拟磁盘文件迁移<a hidden class=anchor aria-hidden=true href=#虚拟磁盘文件迁移>#</a></h3><p>功能：</p><ul><li>将虚拟机的磁盘从一个数据存储迁移到另一个数据存储。可以将虚拟机的所有磁盘整体迁移，也可以单个磁盘分别迁移。</li><li>虚拟机的快照可以一起迁移，虚拟机开启或者关闭时都可以迁移。</li></ul><p>特点：</p><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-32-38-a14bb4f8ed8bac86585c62877564bb65-20230601093233-54d851.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-32-38-a14bb4f8ed8bac86585c62877564bb65-20230601093233-54d851.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h1 id=网络虚拟化>网络虚拟化<a hidden class=anchor aria-hidden=true href=#网络虚拟化>#</a></h1><p>虚拟化是对所有 T 资源的虚拟化，提高物理硬件的灵活性及利用效率。云计算中的计算和存储资源分别由计算虚拟化和存储虚拟化提供，而网络作为 T 的重要资源也有相应的虚拟化技术，网络资源由网络虚拟化提供。</p><p>网络是由各种设备组成，有传统的物理网络，还有运行在服务器上看不到的虚拟网络。如何呈现和管理它们将是网络虚拟化的首要目标。</p><p>将物理网络虚拟出多个相互隔离的虚拟网络（逻辑网络），从而使得不同用户之间使用独立的网络资源，从而提高网络资源利用率，实现弹性的网络。</p><p>VLAN 就是一种网络虚拟化，在原有网络基础上通过 VLAN Tag:划分出多个广播域。</p><p>网络虚拟化保障我们创建出来的虚拟机可以正常 通信、访问网络。</p><p>节省物理主机的网卡设备资源，并且可以提供应用的虚拟网络所需的 L2 一 L7 层网络服务。</p><p>网络虚拟化软件提供逻辑上的交换机和路由器 (L2-L3),逻辑负载均衡器，逻辑防火墙 (L4-L7) 等，且可以以任何形式进行组装，从而为虚拟机提供一个完整的 L2-L7 层的虚拟网络拓扑。</p><h2 id=物理网络包含的设备>物理网络包含的设备<a hidden class=anchor aria-hidden=true href=#物理网络包含的设备>#</a></h2><p>路由器：工作在网络层，连接两个不同的网络。</p><p>二层交换机：工作在数据链路层，转发数据。</p><p>三层交换机：工作在网络层，结合了部分路由和交换机的功能。</p><p>服务器网卡：提供通信服务。</p><h1 id=虚拟化中的网络架构>虚拟化中的网络架构<a hidden class=anchor aria-hidden=true href=#虚拟化中的网络架构>#</a></h1><p>网卡虚拟化方法有：</p><ul><li><p>软件网卡虚拟化</p><ul><li>主要通过软件控制各个虚拟机共享同一块物理网卡实现。软件虚拟出来的网卡可以有单独的 MAC 地址、IP 地址。</li><li>所有虚拟机的虚拟网卡通过虚拟交换机以及物理网卡连接至物理交换机。虚拟交换机负责将虚拟机上的数据报文从物理网口转发出去。</li></ul></li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-16-53-540de968dd6e4e7cc2e45e8b1b1df1a1-20230601141648-d238fb.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-16-53-540de968dd6e4e7cc2e45e8b1b1df1a1-20230601141648-d238fb.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><ul><li><p>硬件网卡虚拟化</p><ul><li>主要用到的技术是单根 I/O 虚拟化 (Single Root/O Virtulization,SR-lOV),就是 I/O 直通技术，通过硬件的辅助可以让虚拟机直接访问物理设备，而不需要通过 VMM。该技术可以直接虚拟出 128-512 网卡，可以让虚拟机都拿到一块独立的网卡，直接使用/O 资源。SR-OV 能够让网络传输绕过软件模拟层，直接分配到虚拟机，这样就降低了软件模拟层中的/○ 开销。</li></ul></li></ul><p>交换机虚拟化：</p><ul><li>OVS(Open vSwitch) 开放虚拟化软件交换机，是一款基于软件实现的开源虚拟以太网交换机，使用开源 Apache2.0 许可协议，主要用于虚拟机 VM 环境。与众多开源的虚拟化平台相整合（支持 Xen、KVM 及 VirtualBox 多种虚拟化技术），主要有两个作用：传递虚拟机之间的流量，实现虚拟机和外界网络的通信。</li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-30-39-aaaaed14c501175ffa51df2735b09d2a-20230601143034-d4f7f6.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-30-39-aaaaed14c501175ffa51df2735b09d2a-20230601143034-d4f7f6.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=虚拟化中数据的转发路径>虚拟化中数据的转发路径<a hidden class=anchor aria-hidden=true href=#虚拟化中数据的转发路径>#</a></h2><ul><li>相同端口组不同服务器内的虚拟机通讯需要经过物理网络。（黑线）</li><li>相同端口组相同服务器内的虚拟机通讯不需要经过物理网络。（红线）</li><li>不同端口组相同服务器的虚拟机通讯需要经过物理网络。（黄色）</li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/18-59-54-9abbabcce9a6864d7c990eba310e171f-20230601185949-5239e7.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/18-59-54-9abbabcce9a6864d7c990eba310e171f-20230601185949-5239e7.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=链路虚拟化>链路虚拟化<a hidden class=anchor aria-hidden=true href=#链路虚拟化>#</a></h2><p>VPC(Virtual Port Channel) 虚链路聚合，是最常见的二层虚拟化技术。</p><p>链路聚合将多个物理端口捆绑在一起，虚拟成为一个逻辑端口。但传统链路聚合不能跨设备，VPC 很好解决了这个问题，既可以跨设备，又可以增加链路带宽、实现链路层的高可用性。</p><p>隧道协议 (Tunneling Protocol)：指通过隧道协议使多个<strong>不同协议的网络实现互联</strong>。使用隧道传递的数据可以是不同协议的数据帧或包。隧道可以将数据流强制送到特定的地址，并隐藏中间节点的网络地址，还可根据需要，提供对数据加密的功能。</p><ul><li>GRE(Generic Routing Encapsulation) 通用路由封装。</li><li>IPsec(Internet Protocol Security)Internett 协议安全。</li></ul><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-34-04-8dc54676f16ac517fa503ded64966d24-20230601193359-139761.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-34-04-8dc54676f16ac517fa503ded64966d24-20230601193359-139761.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p><h2 id=虚拟网络>虚拟网络<a hidden class=anchor aria-hidden=true href=#虚拟网络>#</a></h2><p>虚拟网络 (Virtual Network):是由虚拟链路组成的网络。</p><p>虚拟网络节点之间的连接并不使用物理线缆连接，而是依靠特定的虚拟化链路相连。</p><p>典型的虚拟网络包括：</p><ul><li><p>层叠网络（虚拟二层延伸网络）</p><ul><li><p>层叠网络 (Overlay Network)：在现有网络的基础上搭建另外一种网络</p></li><li><p>层叠网络允许对没有引 P 地址标识的目的主机路由信息。</p></li><li><p>层叠网络可以充分利用现有资源，在不增加成本的前提下，提供更多的服务。（比如 ADSL Internet 接入线路就是基于已经存在的 PSTN 网络实现)</p></li><li><p><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-36-27-c84d66208097477a09c6ce6b162bfacd-20230601193622-21ef48.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-36-27-c84d66208097477a09c6ce6b162bfacd-20230601193622-21ef48.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></p></li><li><p>典型技术：</p><ul><li>VXLAN(Virtual eXtensible Local Area Network) 虚拟扩展局域网：很好地解决了现有 VLAN 技术无法满足大二层网络需求的问题。</li><li>VXLAN 技术是一种大二层的虚拟网络技术。</li><li>原理是引入一个 UDP 格式的外层隧道作为数据链路层，而原有数据报文内容作为隧道净荷加以传输。</li></ul></li></ul></li><li><p>VPN 网络</p><ul><li><p>VPN(Virtual Private Network) 虚拟专用网：是一种常用于连接中、大型企业或团体与团体间的私人网络的通信方法。</p><ul><li>通过公用的网络架构（比如互联网）来传送内联网的信息。</li><li>利用已加密的隧道协议来达到保密、终端认证、信息准确性等安全效果。这种技术可以</li><li>在不安全的网络上传送可靠的、安全的信息。</li><li><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Image</title><style>.post-img-view{text-align:center}.responsive-image{display:block;margin:0 auto}</style></head><body><div class=post-img-view><a data-fancybox=gallery href=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-39-40-4bc357c1f760435fb8d1a980f230527c-20230601193935-06e11c.png><img class=responsive-image src=https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-39-40-4bc357c1f760435fb8d1a980f230527c-20230601193935-06e11c.png alt style="margin:0 auto"></a></div><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".responsive-image"),t=window.innerHeight/3;e.forEach(function(e){e.style.maxHeight=t+"px"})})</script></body></html></li></ul></li></ul></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://lifeislife.cn/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/>云计算</a></li></ul><nav class=paginav><a class=prev href=https://lifeislife.cn/posts/ubuntu-22-04-%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%B0%B4%E6%98%9F-wifi-%E9%A9%B1%E5%8A%A8mercury-mw310uh/><span class=title>« 上一页</span><br><span>Ubuntu 22.04 系统安装水星 wifi 驱动 Mercury MW310UH</span>
</a><a class=next href=https://lifeislife.cn/posts/devstack%E9%83%A8%E7%BD%B2openstack/><span class=title>下一页 »</span><br><span>Devstack 部署 OpenStack</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 云计算基础技术汇总 on x" href="https://x.com/intent/tweet/?text=%e4%ba%91%e8%ae%a1%e7%ae%97%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%e6%b1%87%e6%80%bb&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2f%25E4%25BA%2591%25E8%25AE%25A1%25E7%25AE%2597%25E5%259F%25BA%25E7%25A1%2580%25E6%258A%2580%25E6%259C%25AF%25E6%25B1%2587%25E6%2580%25BB%2f&amp;hashtags=%e4%ba%91%e8%ae%a1%e7%ae%97"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云计算基础技术汇总 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2f%25E4%25BA%2591%25E8%25AE%25A1%25E7%25AE%2597%25E5%259F%25BA%25E7%25A1%2580%25E6%258A%2580%25E6%259C%25AF%25E6%25B1%2587%25E6%2580%25BB%2f&amp;title=%e4%ba%91%e8%ae%a1%e7%ae%97%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%e6%b1%87%e6%80%bb&amp;summary=%e4%ba%91%e8%ae%a1%e7%ae%97%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%e6%b1%87%e6%80%bb&amp;source=https%3a%2f%2flifeislife.cn%2fposts%2f%25E4%25BA%2591%25E8%25AE%25A1%25E7%25AE%2597%25E5%259F%25BA%25E7%25A1%2580%25E6%258A%2580%25E6%259C%25AF%25E6%25B1%2587%25E6%2580%25BB%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云计算基础技术汇总 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2flifeislife.cn%2fposts%2f%25E4%25BA%2591%25E8%25AE%25A1%25E7%25AE%2597%25E5%259F%25BA%25E7%25A1%2580%25E6%258A%2580%25E6%259C%25AF%25E6%25B1%2587%25E6%2580%25BB%2f&title=%e4%ba%91%e8%ae%a1%e7%ae%97%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%e6%b1%87%e6%80%bb"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云计算基础技术汇总 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2flifeislife.cn%2fposts%2f%25E4%25BA%2591%25E8%25AE%25A1%25E7%25AE%2597%25E5%259F%25BA%25E7%25A1%2580%25E6%258A%2580%25E6%259C%25AF%25E6%25B1%2587%25E6%2580%25BB%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云计算基础技术汇总 on whatsapp" href="https://api.whatsapp.com/send?text=%e4%ba%91%e8%ae%a1%e7%ae%97%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%e6%b1%87%e6%80%bb%20-%20https%3a%2f%2flifeislife.cn%2fposts%2f%25E4%25BA%2591%25E8%25AE%25A1%25E7%25AE%2597%25E5%259F%25BA%25E7%25A1%2580%25E6%258A%2580%25E6%259C%25AF%25E6%25B1%2587%25E6%2580%25BB%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云计算基础技术汇总 on telegram" href="https://telegram.me/share/url?text=%e4%ba%91%e8%ae%a1%e7%ae%97%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%e6%b1%87%e6%80%bb&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2f%25E4%25BA%2591%25E8%25AE%25A1%25E7%25AE%2597%25E5%259F%25BA%25E7%25A1%2580%25E6%258A%2580%25E6%259C%25AF%25E6%25B1%2587%25E6%2580%25BB%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云计算基础技术汇总 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e4%ba%91%e8%ae%a1%e7%ae%97%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%e6%b1%87%e6%80%bb&u=https%3a%2f%2flifeislife.cn%2fposts%2f%25E4%25BA%2591%25E8%25AE%25A1%25E7%25AE%2597%25E5%259F%25BA%25E7%25A1%2580%25E6%258A%2580%25E6%259C%25AF%25E6%25B1%2587%25E6%2580%25BB%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://lifeislife-1.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2025 <a href=https://lifeislife.cn/>夜云泊</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>