<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>QEMU启动RISC-V架构OpenEuler并配置OSC环境 | 夜云泊</title><meta name=keywords content="QEMU,OpenEuler,RISC-V"><meta name=description content="
基于Ubuntu 18.04，QEMU 8.0.2，OpenEuler 22.09
安装QEMU
安装基础编译工具
sudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl \
                 gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev \
                 libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev \
                 libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev  -y
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt install python3.8 python3-pip  -y
sudo apt install -f
pip3 install meson
下载QEMU
建立文件夹用于编译："><meta name=author content="Nic"><link rel=canonical href=https://lifeislife.cn/posts/qemu%E5%90%AF%E5%8A%A8risc-v%E6%9E%B6%E6%9E%84openeuler%E5%B9%B6%E9%85%8D%E7%BD%AEosc%E7%8E%AF%E5%A2%83/><link crossorigin=anonymous href=/assets/css/stylesheet.3e75ab39571716f01a345ec7094abf785059c0622f4efe914e97390076cc7aee.css integrity="sha256-PnWrOVcXFvAaNF7HCUq/eFBZwGIvTv6RTpc5AHbMeu4=" rel="preload stylesheet" as=style><link rel=icon href=https://lifeislife.cn/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lifeislife.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://lifeislife.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://lifeislife.cn/apple-touch-icon.png><link rel=mask-icon href=https://lifeislife.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://lifeislife.cn/posts/qemu%E5%90%AF%E5%8A%A8risc-v%E6%9E%B6%E6%9E%84openeuler%E5%B9%B6%E9%85%8D%E7%BD%AEosc%E7%8E%AF%E5%A2%83/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Noto+Sans+SC:wght@100..900&display=swap" rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=G-PS8L2EEEPR"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PS8L2EEEPR")}</script><meta property="og:url" content="https://lifeislife.cn/posts/qemu%E5%90%AF%E5%8A%A8risc-v%E6%9E%B6%E6%9E%84openeuler%E5%B9%B6%E9%85%8D%E7%BD%AEosc%E7%8E%AF%E5%A2%83/"><meta property="og:site_name" content="夜云泊"><meta property="og:title" content="QEMU启动RISC-V架构OpenEuler并配置OSC环境"><meta property="og:description" content=" 基于Ubuntu 18.04，QEMU 8.0.2，OpenEuler 22.09
安装QEMU 安装基础编译工具 sudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl \ gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev \ libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev \ libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev -y sudo add-apt-repository ppa:deadsnakes/ppa sudo apt install python3.8 python3-pip -y sudo apt install -f pip3 install meson 下载QEMU 建立文件夹用于编译："><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-23T19:28:29+00:00"><meta property="article:modified_time" content="2023-07-23T19:28:29+00:00"><meta property="article:tag" content="QEMU"><meta property="article:tag" content="OpenEuler"><meta property="article:tag" content="RISC-V"><meta name=twitter:card content="summary"><meta name=twitter:title content="QEMU启动RISC-V架构OpenEuler并配置OSC环境"><meta name=twitter:description content="
基于Ubuntu 18.04，QEMU 8.0.2，OpenEuler 22.09
安装QEMU
安装基础编译工具
sudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl \
                 gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev \
                 libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev \
                 libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev  -y
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt install python3.8 python3-pip  -y
sudo apt install -f
pip3 install meson
下载QEMU
建立文件夹用于编译："><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://lifeislife.cn/posts/"},{"@type":"ListItem","position":2,"name":"QEMU启动RISC-V架构OpenEuler并配置OSC环境","item":"https://lifeislife.cn/posts/qemu%E5%90%AF%E5%8A%A8risc-v%E6%9E%B6%E6%9E%84openeuler%E5%B9%B6%E9%85%8D%E7%BD%AEosc%E7%8E%AF%E5%A2%83/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"QEMU启动RISC-V架构OpenEuler并配置OSC环境","name":"QEMU启动RISC-V架构OpenEuler并配置OSC环境","description":" 基于Ubuntu 18.04，QEMU 8.0.2，OpenEuler 22.09\n安装QEMU 安装基础编译工具 sudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl \\ gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev \\ libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev \\ libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev -y sudo add-apt-repository ppa:deadsnakes/ppa sudo apt install python3.8 python3-pip -y sudo apt install -f pip3 install meson 下载QEMU 建立文件夹用于编译：\n","keywords":["QEMU","OpenEuler","RISC-V"],"articleBody":" 基于Ubuntu 18.04，QEMU 8.0.2，OpenEuler 22.09\n安装QEMU 安装基础编译工具 sudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl \\ gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev \\ libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev \\ libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev -y sudo add-apt-repository ppa:deadsnakes/ppa sudo apt install python3.8 python3-pip -y sudo apt install -f pip3 install meson 下载QEMU 建立文件夹用于编译：\ncd \u0026\u0026 mkdir -p qemu-build 建立文件夹用于安装：\ncd \u0026\u0026 mkdir -p /home/user/program/riscv64-qemu 可登录官网将版本号换成最新版本即可：\ncd qemu-build \u0026\u0026 wget \"https://download.qemu.org/qemu-8.0.2.tar.xz\" tar -xf qemu-8.0.2.tar.xz --strip-components=1 安装QEMU cd qemu-build \u0026\u0026 ./configure --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu \\ --enable-kvm --enable-sdl \\ --prefix=/home/user/program/riscv64-qemu make install -j $(nproc) 配置环境变量\necho 'export QEMU_HOME=/home/user/program/riscv64-qemu' \u003e\u003e ~/.bashrc \u0026\u0026 echo 'export PATH=$QEMU_HOME/bin:$PATH' \u003e\u003e ~/.bashrc source ~/.bashrc 下载 OpenEuler RISC-V 系统镜像 建立目录：\ncd \u0026\u0026 mkdir -p /home/user/openeuler 根据自己的用户名修改user\n下载OpenEuler 22.09版本，下载目录下所有文件/home/user/openeuler。如需下载其他版本请进入其他目录选择下载即可。\n也可以根据自己的情况进入镜像站列表选择下载速度更快的镜像站下载\n最新的23.03版本需要在中科院镜像站下载\n文件说明：\nfw_payload_oe_qemuvirt.elf: 利用 openSBI 将 kernel-5.10 的 image 作为 payload 所制作的 QEMU 启动所需文件 openEuler-22.09-qemu-xfce.qcow2.tar.zst: openEuler RISC-V QEMU GUI 镜像压缩包 preview_start_vm_xfce.sh: GUI 虚拟机启动脚本 openeuler-22.09-qemu.qcow2.tar.zst: openEuler RISC-V QEMU headless 镜像压缩包 preview_start_vm.sh: headless 虚拟机启动脚本 解压：\nsudo apt-get install zstd tar -I 'zstdmt' -xvf openEuler-22.09-riscv64-qemu.qcow2.tar.zst 执行启动脚本\nchmod +x preview_start_vm.sh bash preview_start_vm.sh 登录系统 用户名: root 默认密码: openEuler12#$ openEuler 22.09 Kernel 5.10.0 on an riscv64 4penEuler-riscv6 login: openEuler 22.09 Kernel 5.10.0 on an riscv64 openEuler-riscv64 login: root Password: Welcome to 5.10.0 System information as of time: Mon Jul 3 07:52:19 PM CST 2023 System load: 0.17 Processes: 117 Memory used: .6% Swap used: 0.0% Usage On: 6% Users online: 1 [root@openEuler-riscv64 ~]# ls [root@openEuler-riscv64 ~]# pwd 远程登录系统 ssh -p 12055 root@localhost 配置系统 以下操作均在root用户下执行，如果切换了用户会有提示。因为系统初始状态没有普通用户，也没有sudo，所以需要使用root完成一些基础配置。\n修改root密码 原密码太复杂，修改简单密码\npasswd root # 输入两次密码 添加普通用户 # 添加用户 user useradd -s /bin/bash -d /home/user -m user passwd user # 输入两次密码 # 添加管理员权限 usermod -aG wheel user 修改时间 echo \"NTP=ntp.aliyun.com\" \u003e\u003e /etc/systemd/timesyncd.conf systemctl restart systemd-timesyncd.service 查看timesyncd运行状态：\nsystemctl status systemd-timesyncd.service date命令可查看当前系统时间。验证是否配置成功。\n时间务必正确设置，错误的时间会影响诸如https的TLS认证等过程。\n配置DNS vim /etc/resolv.conf nameserver 119.29.29.29 配置软件包源 配置文件为 /etc/yum.repos.d/openEuler.repo 下\nmv /etc/yum.repos.d/openEuler.repo /etc/yum.repos.d/openEuler.repo.bk \u0026\u0026 sudo bash -c \"cat \u003c\u003c EOF \u003e /etc/yum.repos.d/openEuler.repo # just for test [mainline] name=mainline baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/22.09/ enabled=1 gpgcheck=0 # just for test [epol] name=epol baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/22.09/ enabled=1 gpgcheck=0 [extra] name=extra baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/extra/ enabled=1 gpgcheck=0 EOF\" 需要注意的是，因为OpenEuler还在快速发展中，镜像地址可能会发生变化，所以需确认地址是否能够正常访问，如无法访问会导致404错误\n[repoid]中的repoid为软件仓库（repository）的ID号，所有.repo配置文件中的各repoid不能重复，必须唯一。示例中repoid设置为base。 name为软件仓库描述的字符串。 baseurl为软件仓库的地址。 enabled为是否启用该软件源仓库，可选值为1和0。默认值为1，表示启用该软件源仓库。 gpgcheck可设置为1或0，1表示进行gpg（GNU Private Guard）校验，0表示不进行gpg校验，gpgcheck可以确定rpm包的来源是有效和安全的。 gpgkey为验证签名用的公钥。\n磁盘扩容 在宿主机上安装 qemu-img 工具: apt install qemu-utils 在 openEuler RISC-V 虚拟机上安装 growpart 工具: dnf install cloud-utils-growpart 关闭QEMU虚拟机 把 qcow2 文件的容量加200GB： $ qemu-img resize *.qcow2 +200G Image resized. $ qemu-img info *.qcow2 image: openEuler-preview.riscv64.qcow2 file format: qcow2 virtual size: 220 GiB disk size: 9.58 GiB cluster_size: 65536 Format specific information: compat: 1.1 compression type: zlib lazy refcounts: false refcount bits: 16 corrupt: false extended l2: false QEMU 启动 openEuler RISC-V。 启动以后，我们先看看分区情况：可以看到根目录对应的分区只使用了 10G。\n[root@openEuler-RISCV-rare ~]# lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT vda 254:0 0 220G 0 disk └─vda1 254:1 0 10G 0 part / 扩展分区 vda1，执行 growpart /dev/vda1 执行 lsblk 可以看到 / 所在的 vda1 分区已经扩展到了预期大小\n[root@openEuler-RISCV-rare ~]# growpart /dev/vda 1 CHANGED: partition=1 start=2048 old: size=20969472 end=20971520 new: size=419428319 end=419430367 [root@openEuler-RISCV-rare ~]# lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT vda 254:0 0 220G 0 disk └─vda1 254:1 0 220G 0 part / 扩展文件系统： resize2fs /dev/vda1 BUG network backend ‘user‘ is not compiled into this binary git clone https://gitlab.freedesktop.org/slirp/libslirp.git\nhttp://security.ubuntu.com/ubuntu/pool/main/libs/libslirp/libslirp-dev_4.1.0-2ubuntu2.2_amd64.deb\nsudo apt-get install libslirp-dev 重新编译QEMU：\ncd qemu-build \u0026\u0026 rm -rf build cd qemu-build \u0026\u0026 ./configure --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu \\ --enable-kvm --enable-sdl --enable-slirp\\ --prefix=/home/user/program/riscv64-qemu make install -j $(nproc) 参考文档 RISC-V/doc/tutorials/vm-qemu-oErv.md at master · openeuler-mirror/RISC-V · GitHub\nopenEuler 22.09技术白皮书\n","wordCount":"1478","inLanguage":"zh","datePublished":"2023-07-23T19:28:29Z","dateModified":"2023-07-23T19:28:29Z","author":{"@type":"Person","name":"Nic"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lifeislife.cn/posts/qemu%E5%90%AF%E5%8A%A8risc-v%E6%9E%B6%E6%9E%84openeuler%E5%B9%B6%E9%85%8D%E7%BD%AEosc%E7%8E%AF%E5%A2%83/"},"publisher":{"@type":"Organization","name":"夜云泊","logo":{"@type":"ImageObject","url":"https://lifeislife.cn/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script><script defer src=/static/fontawesome/fontawesome-all.js></script><header class=header><nav class=nav><div class=logo><a href=https://lifeislife.cn/ accesskey=h title="夜云泊 (Alt + H)">夜云泊</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lifeislife.cn/archives/ title=归档><span>归档</span></a></li><li><a href=https://lifeislife.cn/tags/ title=标签><span>标签</span></a></li><li><a href=https://lifeislife.cn/categories/ title=分类><span>分类</span></a></li><li><a href=https://lifeislife.cn/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://lifeislife.cn/awesome-cycling/ title=AwesomeCycling><span>AwesomeCycling</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.travellings.cn/go.html title=开往><span><i class='fa-solid fa-train-subway'></i>开往</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lifeislife.cn/>主页</a>&nbsp;»&nbsp;<a href=https://lifeislife.cn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">QEMU启动RISC-V架构OpenEuler并配置OSC环境</h1><div class=post-meta><span title='2023-07-23 19:28:29 +0000 UTC'>七月 23, 2023</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1478 字&nbsp;·&nbsp;Nic</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#安装基础编译工具>安装基础编译工具</a></li><li><a href=#下载qemu>下载QEMU</a></li><li><a href=#安装qemu-1>安装QEMU</a></li></ul><ul><li><ul><li><a href=#远程登录系统>远程登录系统</a></li></ul></li></ul><ul><li><a href=#修改root密码>修改root密码</a></li><li><a href=#添加普通用户>添加普通用户</a></li><li><a href=#修改时间>修改时间</a></li><li><a href=#配置dns>配置DNS</a></li><li><a href=#配置软件包源>配置软件包源</a></li><li><a href=#磁盘扩容>磁盘扩容</a></li></ul><ul><li><a href=#network-backend-user-is-not-compiled-into-this-binary>network backend ‘user‘ is not compiled into this binary</a></li></ul></nav></div></details></div><div class=post-content><blockquote><p>基于Ubuntu 18.04，QEMU 8.0.2，OpenEuler 22.09</p></blockquote><h1 id=安装qemu>安装QEMU<a hidden class=anchor aria-hidden=true href=#安装qemu>#</a></h1><h2 id=安装基础编译工具>安装基础编译工具<a hidden class=anchor aria-hidden=true href=#安装基础编译工具>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>sudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>                 gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>                 libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>                 libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev  -y
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>sudo add-apt-repository ppa:deadsnakes/ppa
</span></span><span class=line><span class=cl>sudo apt install python3.8 python3-pip  -y
</span></span><span class=line><span class=cl>sudo apt install -f
</span></span><span class=line><span class=cl>pip3 install meson
</span></span></code></pre></div><h2 id=下载qemu>下载QEMU<a hidden class=anchor aria-hidden=true href=#下载qemu>#</a></h2><p>建立文件夹用于编译：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>cd</span> <span class=o>&amp;&amp;</span> mkdir -p qemu-build
</span></span></code></pre></div><p>建立文件夹用于安装：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>cd</span> <span class=o>&amp;&amp;</span> mkdir -p /home/user/program/riscv64-qemu
</span></span></code></pre></div><p>可登录<a href=https://www.qemu.org/download/>官网</a>将版本号换成最新版本即可：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>cd</span> qemu-build <span class=o>&amp;&amp;</span> wget  <span class=s2>&#34;https://download.qemu.org/qemu-8.0.2.tar.xz&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>tar -xf qemu-8.0.2.tar.xz --strip-components<span class=o>=</span><span class=m>1</span> 
</span></span></code></pre></div><h2 id=安装qemu-1>安装QEMU<a hidden class=anchor aria-hidden=true href=#安装qemu-1>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>cd</span> qemu-build <span class=o>&amp;&amp;</span> ./configure --target-list<span class=o>=</span>riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>               --enable-kvm --enable-sdl <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>               --prefix<span class=o>=</span>/home/user/program/riscv64-qemu
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>make install -j <span class=k>$(</span>nproc<span class=k>)</span>
</span></span></code></pre></div><p>配置环境变量</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;export QEMU_HOME=/home/user/program/riscv64-qemu&#39;</span> &gt;&gt; ~/.bashrc <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s1>&#39;export PATH=$QEMU_HOME/bin:$PATH&#39;</span> &gt;&gt; ~/.bashrc
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>source</span> ~/.bashrc
</span></span></code></pre></div><h1 id=下载-openeuler-risc-v-系统镜像>下载 OpenEuler RISC-V 系统镜像<a hidden class=anchor aria-hidden=true href=#下载-openeuler-risc-v-系统镜像>#</a></h1><p>建立目录：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>cd</span> <span class=o>&amp;&amp;</span> mkdir -p /home/user/openeuler
</span></span></code></pre></div><blockquote><p>根据自己的用户名修改user</p></blockquote><p>下载<a href=https://repo.openeuler.org/openEuler-preview/RISC-V/openEuler-22.09-riscv64/QEMU/>OpenEuler 22.09版本</a>，下载目录下所有文件/home/user/openeuler。如需下载其他版本请进入其他目录选择下载即可。</p><blockquote><p>也可以根据自己的情况进入<a href=https://www.openeuler.org/zh/mirror/list/>镜像站列表</a>选择下载速度更快的镜像站下载</p></blockquote><blockquote><p>最新的23.03版本需要在<a href=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-23.03-V1-riscv64/>中科院镜像站</a>下载</p></blockquote><p>文件说明：</p><ul><li><code>fw_payload_oe_qemuvirt.elf</code>: 利用 openSBI 将 kernel-5.10 的 image 作为 payload 所制作的 QEMU 启动所需文件</li><li><code>openEuler-22.09-qemu-xfce.qcow2.tar.zst</code>: openEuler RISC-V QEMU GUI 镜像压缩包</li><li><code>preview_start_vm_xfce.sh</code>: GUI 虚拟机启动脚本</li><li><code>openeuler-22.09-qemu.qcow2.tar.zst</code>: openEuler RISC-V QEMU headless 镜像压缩包</li><li><code>preview_start_vm.sh</code>: headless 虚拟机启动脚本</li></ul><p>解压：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl> sudo apt-get install zstd
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl> tar -I <span class=s1>&#39;zstdmt&#39;</span> -xvf openEuler-22.09-riscv64-qemu.qcow2.tar.zst
</span></span></code></pre></div><p>执行启动脚本</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>chmod +x preview_start_vm.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>bash preview_start_vm.sh
</span></span></code></pre></div><h1 id=登录系统>登录系统<a hidden class=anchor aria-hidden=true href=#登录系统>#</a></h1><ul><li>用户名: <code>root</code></li><li>默认密码: <code>openEuler12#$</code></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>openEuler 22.09
</span></span><span class=line><span class=cl>Kernel 5.10.0 on an riscv64
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>4penEuler-riscv6
</span></span><span class=line><span class=cl> login: openEuler 22.09
</span></span><span class=line><span class=cl>Kernel 5.10.0 on an riscv64
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>openEuler-riscv64 login: root
</span></span><span class=line><span class=cl>Password: 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Welcome to 5.10.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>System information as of time:   Mon Jul  <span class=m>3</span> 07:52:19 PM CST <span class=m>2023</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>System load:   0.17
</span></span><span class=line><span class=cl>Processes:   <span class=m>117</span>
</span></span><span class=line><span class=cl>Memory used:   .6%
</span></span><span class=line><span class=cl>Swap used:   0.0%
</span></span><span class=line><span class=cl>Usage On:   6%
</span></span><span class=line><span class=cl>Users online:   <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>root@openEuler-riscv64 ~<span class=o>]</span><span class=c1># ls</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@openEuler-riscv64 ~<span class=o>]</span><span class=c1># pwd</span>
</span></span></code></pre></div><h3 id=远程登录系统>远程登录系统<a hidden class=anchor aria-hidden=true href=#远程登录系统>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>ssh -p <span class=m>12055</span> root@localhost
</span></span></code></pre></div><h1 id=配置系统>配置系统<a hidden class=anchor aria-hidden=true href=#配置系统>#</a></h1><blockquote><p>以下操作均在root用户下执行，如果切换了用户会有提示。因为系统初始状态没有普通用户，也没有sudo，所以需要使用root完成一些基础配置。</p></blockquote><h2 id=修改root密码>修改root密码<a hidden class=anchor aria-hidden=true href=#修改root密码>#</a></h2><p>原密码太复杂，修改简单密码</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>passwd root
</span></span><span class=line><span class=cl><span class=c1># 输入两次密码</span>
</span></span></code></pre></div><h2 id=添加普通用户>添加普通用户<a hidden class=anchor aria-hidden=true href=#添加普通用户>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=c1># 添加用户 user</span>
</span></span><span class=line><span class=cl>useradd -s /bin/bash -d /home/user -m user
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>passwd user
</span></span><span class=line><span class=cl><span class=c1># 输入两次密码</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=c1># 添加管理员权限</span>
</span></span><span class=line><span class=cl>usermod -aG wheel user
</span></span></code></pre></div><h2 id=修改时间>修改时间<a hidden class=anchor aria-hidden=true href=#修改时间>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;NTP=ntp.aliyun.com&#34;</span> &gt;&gt; /etc/systemd/timesyncd.conf
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>systemctl restart systemd-timesyncd.service
</span></span></code></pre></div><p>查看<code>timesyncd</code>运行状态：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>systemctl status systemd-timesyncd.service
</span></span></code></pre></div><p><code>date</code>命令可查看当前系统时间。验证是否配置成功。</p><p><strong>时间务必正确设置</strong>，错误的时间会影响诸如https的TLS认证等过程。</p><h2 id=配置dns>配置DNS<a hidden class=anchor aria-hidden=true href=#配置dns>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>vim /etc/resolv.conf
</span></span><span class=line><span class=cl>nameserver 119.29.29.29
</span></span></code></pre></div><h2 id=配置软件包源>配置软件包源<a hidden class=anchor aria-hidden=true href=#配置软件包源>#</a></h2><p>配置文件为 /etc/yum.repos.d/openEuler.repo 下</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>mv /etc/yum.repos.d/openEuler.repo  /etc/yum.repos.d/openEuler.repo.bk <span class=o>&amp;&amp;</span> sudo bash -c <span class=s2>&#34;cat &lt;&lt; EOF &gt; /etc/yum.repos.d/openEuler.repo
</span></span></span><span class=line><span class=cl><span class=s2># just for test
</span></span></span><span class=line><span class=cl><span class=s2>[mainline]
</span></span></span><span class=line><span class=cl><span class=s2>name=mainline
</span></span></span><span class=line><span class=cl><span class=s2>baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/22.09/
</span></span></span><span class=line><span class=cl><span class=s2>enabled=1
</span></span></span><span class=line><span class=cl><span class=s2>gpgcheck=0
</span></span></span><span class=line><span class=cl><span class=s2># just for test
</span></span></span><span class=line><span class=cl><span class=s2>[epol]
</span></span></span><span class=line><span class=cl><span class=s2>name=epol
</span></span></span><span class=line><span class=cl><span class=s2>baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/22.09/
</span></span></span><span class=line><span class=cl><span class=s2>enabled=1
</span></span></span><span class=line><span class=cl><span class=s2>gpgcheck=0
</span></span></span><span class=line><span class=cl><span class=s2>[extra]
</span></span></span><span class=line><span class=cl><span class=s2>name=extra
</span></span></span><span class=line><span class=cl><span class=s2>baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/extra/
</span></span></span><span class=line><span class=cl><span class=s2>enabled=1
</span></span></span><span class=line><span class=cl><span class=s2>gpgcheck=0
</span></span></span><span class=line><span class=cl><span class=s2>EOF&#34;</span>
</span></span></code></pre></div><blockquote><p>需要注意的是，因为OpenEuler还在快速发展中，镜像地址可能会发生变化，所以需确认地址是否能够正常访问，如无法访问会导致404错误</p></blockquote><blockquote><p>[repoid]中的repoid为软件仓库（repository）的ID号，所有.repo配置文件中的各repoid不能重复，必须唯一。示例中repoid设置为base。
name为软件仓库描述的字符串。
baseurl为软件仓库的地址。
enabled为是否启用该软件源仓库，可选值为1和0。默认值为1，表示启用该软件源仓库。
gpgcheck可设置为1或0，1表示进行gpg（GNU Private Guard）校验，0表示不进行gpg校验，gpgcheck可以确定rpm包的来源是有效和安全的。
gpgkey为验证签名用的公钥。</p></blockquote><h2 id=磁盘扩容>磁盘扩容<a hidden class=anchor aria-hidden=true href=#磁盘扩容>#</a></h2><ol><li>在宿主机上安装 <code>qemu-img</code> 工具:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>apt install qemu-utils
</span></span></code></pre></div><ol start=2><li>在 openEuler RISC-V 虚拟机上安装 <code>growpart</code> 工具:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>dnf install cloud-utils-growpart
</span></span></code></pre></div><ol start=3><li>关闭QEMU虚拟机</li><li>把 qcow2 文件的容量加200GB：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>$ qemu-img resize *.qcow2 +200G
</span></span><span class=line><span class=cl>Image resized.
</span></span><span class=line><span class=cl>$ qemu-img info *.qcow2
</span></span><span class=line><span class=cl>image: openEuler-preview.riscv64.qcow2
</span></span><span class=line><span class=cl>file format: qcow2
</span></span><span class=line><span class=cl>virtual size: <span class=m>220</span> GiB 
</span></span><span class=line><span class=cl>disk size: 9.58 GiB
</span></span><span class=line><span class=cl>cluster_size: <span class=m>65536</span>
</span></span><span class=line><span class=cl>Format specific information:
</span></span><span class=line><span class=cl>    compat: 1.1
</span></span><span class=line><span class=cl>    compression type: zlib
</span></span><span class=line><span class=cl>    lazy refcounts: <span class=nb>false</span>
</span></span><span class=line><span class=cl>    refcount bits: <span class=m>16</span>
</span></span><span class=line><span class=cl>    corrupt: <span class=nb>false</span>
</span></span><span class=line><span class=cl>    extended l2: <span class=nb>false</span>
</span></span></code></pre></div><ol start=5><li>QEMU 启动 openEuler RISC-V。</li></ol><p>启动以后，我们先看看分区情况：可以看到根目录对应的分区只使用了 10G。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=o>[</span>root@openEuler-RISCV-rare ~<span class=o>]</span><span class=c1># lsblk</span>
</span></span><span class=line><span class=cl>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
</span></span><span class=line><span class=cl>vda    254:0    <span class=m>0</span>  220G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>└─vda1 254:1    <span class=m>0</span>   10G  <span class=m>0</span> part /
</span></span></code></pre></div><ol><li>扩展分区 <code>vda1</code>，执行</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>growpart /dev/vda1
</span></span></code></pre></div><p>执行 <code>lsblk</code> 可以看到 / 所在的 <code>vda1</code> 分区已经扩展到了预期大小</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=o>[</span>root@openEuler-RISCV-rare ~<span class=o>]</span><span class=c1># growpart /dev/vda 1</span>
</span></span><span class=line><span class=cl>CHANGED: <span class=nv>partition</span><span class=o>=</span><span class=m>1</span> <span class=nv>start</span><span class=o>=</span><span class=m>2048</span> old: <span class=nv>size</span><span class=o>=</span><span class=m>20969472</span> <span class=nv>end</span><span class=o>=</span><span class=m>20971520</span> new: <span class=nv>size</span><span class=o>=</span><span class=m>419428319</span> <span class=nv>end</span><span class=o>=</span><span class=m>419430367</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@openEuler-RISCV-rare ~<span class=o>]</span><span class=c1># lsblk</span>
</span></span><span class=line><span class=cl>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
</span></span><span class=line><span class=cl>vda    254:0    <span class=m>0</span>  220G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>└─vda1 254:1    <span class=m>0</span>  220G  <span class=m>0</span> part /
</span></span></code></pre></div><ol><li>扩展文件系统：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>resize2fs /dev/vda1
</span></span></code></pre></div><h1 id=bug>BUG<a hidden class=anchor aria-hidden=true href=#bug>#</a></h1><h2 id=network-backend-user-is-not-compiled-into-this-binary>network backend ‘user‘ is not compiled into this binary<a hidden class=anchor aria-hidden=true href=#network-backend-user-is-not-compiled-into-this-binary>#</a></h2><p>git clone <a href=https://gitlab.freedesktop.org/slirp/libslirp.git>https://gitlab.freedesktop.org/slirp/libslirp.git</a></p><p><a href=http://security.ubuntu.com/ubuntu/pool/main/libs/libslirp/libslirp-dev_4.1.0-2ubuntu2.2_amd64.deb>http://security.ubuntu.com/ubuntu/pool/main/libs/libslirp/libslirp-dev_4.1.0-2ubuntu2.2_amd64.deb</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>sudo apt-get install libslirp-dev
</span></span></code></pre></div><p>重新编译QEMU：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>cd</span> qemu-build <span class=o>&amp;&amp;</span> rm -rf build
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nb>cd</span> qemu-build <span class=o>&amp;&amp;</span> ./configure --target-list<span class=o>=</span>riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>               --enable-kvm --enable-sdl --enable-slirp<span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>               --prefix<span class=o>=</span>/home/user/program/riscv64-qemu
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>make install -j <span class=k>$(</span>nproc<span class=k>)</span>
</span></span></code></pre></div><h1 id=参考文档>参考文档<a hidden class=anchor aria-hidden=true href=#参考文档>#</a></h1><p><a href=https://github.com/openeuler-mirror/RISC-V/blob/master/doc/tutorials/vm-qemu-oErv.md>RISC-V/doc/tutorials/vm-qemu-oErv.md at master · openeuler-mirror/RISC-V · GitHub</a></p><p><a href=https://www.openeuler.org/whitepaper/openEuler-whitepaper-2209.pdf>openEuler 22.09技术白皮书</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://lifeislife.cn/tags/qemu/>QEMU</a></li><li><a href=https://lifeislife.cn/tags/openeuler/>OpenEuler</a></li><li><a href=https://lifeislife.cn/tags/risc-v/>RISC-V</a></li></ul><nav class=paginav><a class=prev href=https://lifeislife.cn/posts/%E4%BD%BF%E7%94%A8yadm%E7%AE%A1%E7%90%86%E5%B9%B6%E5%90%8C%E6%AD%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6dotfile/><span class=title>« 上一页</span><br><span>使用 Yadm 管理并同步配置文件 Dotfile</span>
</a><a class=next href=https://lifeislife.cn/posts/ssh-%E7%99%BB%E5%BD%95-openstack-%E5%AE%9E%E4%BE%8B/><span class=title>下一页 »</span><br><span>SSH 登录 OpenStack 实例</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share QEMU启动RISC-V架构OpenEuler并配置OSC环境 on x" href="https://x.com/intent/tweet/?text=QEMU%e5%90%af%e5%8a%a8RISC-V%e6%9e%b6%e6%9e%84OpenEuler%e5%b9%b6%e9%85%8d%e7%bd%aeOSC%e7%8e%af%e5%a2%83&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2fqemu%25E5%2590%25AF%25E5%258A%25A8risc-v%25E6%259E%25B6%25E6%259E%2584openeuler%25E5%25B9%25B6%25E9%2585%258D%25E7%25BD%25AEosc%25E7%258E%25AF%25E5%25A2%2583%2f&amp;hashtags=QEMU%2cOpenEuler%2cRISC-V"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share QEMU启动RISC-V架构OpenEuler并配置OSC环境 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2fqemu%25E5%2590%25AF%25E5%258A%25A8risc-v%25E6%259E%25B6%25E6%259E%2584openeuler%25E5%25B9%25B6%25E9%2585%258D%25E7%25BD%25AEosc%25E7%258E%25AF%25E5%25A2%2583%2f&amp;title=QEMU%e5%90%af%e5%8a%a8RISC-V%e6%9e%b6%e6%9e%84OpenEuler%e5%b9%b6%e9%85%8d%e7%bd%aeOSC%e7%8e%af%e5%a2%83&amp;summary=QEMU%e5%90%af%e5%8a%a8RISC-V%e6%9e%b6%e6%9e%84OpenEuler%e5%b9%b6%e9%85%8d%e7%bd%aeOSC%e7%8e%af%e5%a2%83&amp;source=https%3a%2f%2flifeislife.cn%2fposts%2fqemu%25E5%2590%25AF%25E5%258A%25A8risc-v%25E6%259E%25B6%25E6%259E%2584openeuler%25E5%25B9%25B6%25E9%2585%258D%25E7%25BD%25AEosc%25E7%258E%25AF%25E5%25A2%2583%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share QEMU启动RISC-V架构OpenEuler并配置OSC环境 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2flifeislife.cn%2fposts%2fqemu%25E5%2590%25AF%25E5%258A%25A8risc-v%25E6%259E%25B6%25E6%259E%2584openeuler%25E5%25B9%25B6%25E9%2585%258D%25E7%25BD%25AEosc%25E7%258E%25AF%25E5%25A2%2583%2f&title=QEMU%e5%90%af%e5%8a%a8RISC-V%e6%9e%b6%e6%9e%84OpenEuler%e5%b9%b6%e9%85%8d%e7%bd%aeOSC%e7%8e%af%e5%a2%83"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share QEMU启动RISC-V架构OpenEuler并配置OSC环境 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2flifeislife.cn%2fposts%2fqemu%25E5%2590%25AF%25E5%258A%25A8risc-v%25E6%259E%25B6%25E6%259E%2584openeuler%25E5%25B9%25B6%25E9%2585%258D%25E7%25BD%25AEosc%25E7%258E%25AF%25E5%25A2%2583%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share QEMU启动RISC-V架构OpenEuler并配置OSC环境 on whatsapp" href="https://api.whatsapp.com/send?text=QEMU%e5%90%af%e5%8a%a8RISC-V%e6%9e%b6%e6%9e%84OpenEuler%e5%b9%b6%e9%85%8d%e7%bd%aeOSC%e7%8e%af%e5%a2%83%20-%20https%3a%2f%2flifeislife.cn%2fposts%2fqemu%25E5%2590%25AF%25E5%258A%25A8risc-v%25E6%259E%25B6%25E6%259E%2584openeuler%25E5%25B9%25B6%25E9%2585%258D%25E7%25BD%25AEosc%25E7%258E%25AF%25E5%25A2%2583%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share QEMU启动RISC-V架构OpenEuler并配置OSC环境 on telegram" href="https://telegram.me/share/url?text=QEMU%e5%90%af%e5%8a%a8RISC-V%e6%9e%b6%e6%9e%84OpenEuler%e5%b9%b6%e9%85%8d%e7%bd%aeOSC%e7%8e%af%e5%a2%83&amp;url=https%3a%2f%2flifeislife.cn%2fposts%2fqemu%25E5%2590%25AF%25E5%258A%25A8risc-v%25E6%259E%25B6%25E6%259E%2584openeuler%25E5%25B9%25B6%25E9%2585%258D%25E7%25BD%25AEosc%25E7%258E%25AF%25E5%25A2%2583%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share QEMU启动RISC-V架构OpenEuler并配置OSC环境 on ycombinator" href="https://news.ycombinator.com/submitlink?t=QEMU%e5%90%af%e5%8a%a8RISC-V%e6%9e%b6%e6%9e%84OpenEuler%e5%b9%b6%e9%85%8d%e7%bd%aeOSC%e7%8e%af%e5%a2%83&u=https%3a%2f%2flifeislife.cn%2fposts%2fqemu%25E5%2590%25AF%25E5%258A%25A8risc-v%25E6%259E%25B6%25E6%259E%2584openeuler%25E5%25B9%25B6%25E9%2585%258D%25E7%25BD%25AEosc%25E7%258E%25AF%25E5%25A2%2583%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://lifeislife-1.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2025 <a href=https://lifeislife.cn/>夜云泊</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>