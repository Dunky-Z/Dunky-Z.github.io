<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>如云泊</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="">










<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="../../css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>



<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="atom.xml" title="如云泊" type="application/atom+xml">
</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="../../index.html">
                
                <img src="../../images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-end">
            
            
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/10/15/%E8%A7%A3%E5%86%B3VSCode%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5Error-WebSocket-close-with-status-code-1006/" itemprop="url">解决 VSCode 远程登录失败 Error: WebSocket close with status code 1006</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-10-15T10:53:20.000Z" itemprop="datePublished">10月 15 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="../../categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">Bug 踩坑记录</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            几秒 读完 (约 67 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="保留现场"><a href="#保留现场" class="headerlink" title="保留现场"></a>保留现场</h2><p>使用 VSCode 远程登录失败，报错：Failed to connect to the remote extension host server (Error: WebSocket close with status code 1006)。</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/ssh/sshd_config<br><br>AllowTcpForwarding no<br><br>AllowAgentForwarding no<br><br><span class="hljs-comment"># 替换为</span><br><br>AllowTcpForwarding yes<br><br>AllowAgentForwarding yes<br></code></pre></td></tr></table></figure>

<p>保存后重启 <code>sshd</code> 服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl restart sshd<br></code></pre></td></tr></table></figure>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/10/14/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8GitHub-Actions/" itemprop="url">如何使用 GitHub Actions</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-10-14T14:08:54.000Z" itemprop="datePublished">10月 14 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            18 分钟 读完 (约 2631 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>GitHub Actions 是 GitHub 在 2018 年推出的<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html">持续集成服务</a>。它可以自动完成一些开发周期内的任务，如 Push 代码时自动编译，Pull 代码时自动执行测试脚本等等。</p>
<p>我了解 GitHub Actions 的契机是，我在 GitHub 上保存了一些 Markdown 文档，我希望每次更新文档后自动使用 Pandoc 转换成 PDF 文档。接下来我们一起学习如何通过 GitHub Actions 实现这样的需求。</p>
<p>首先我们先直观的了解一下它在 GitHub 的位置，如果打开一个仓库，它有图中绿色对号√，或者红色叉号×，说明这个项目配置了 GitHub Actions，绿色表示自动化的流程运行成功了，红色表示失败了。</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/10/15/a3a273415c7250d26bb50e293378bf5e.png"></p>
<p>我们点开<code>Actions</code>按钮就可以查看具体的任务详情。下面我们先学习如何配置一个简单的 GitHub Actions。</p>
<h1 id="配置-GitHub-Actions"><a href="#配置-GitHub-Actions" class="headerlink" title="配置 GitHub Actions"></a>配置 GitHub Actions</h1><p>GitHub Actions 可以简单理解为一些自动化脚本，工具，目的就是为了减少重复工作，所以这些工具都可以做成普适性的工具。而 GitHub 官方就开放了一个这类工具的<a target="_blank" rel="noopener" href="https://github.com/marketplace">市场</a>，我们可以在上面搜索自己想要的工具。因为初学 GitHub Actions 所以也不知道怎么写配置文件，我们可以直接搜索一个并应用它，看看别人是怎么写的。</p>
<p>我们进入一个自己的仓库，点击<code>Actions</code>，搜索框中搜索<code>PDF</code>，在搜索结果中找到<a target="_blank" rel="noopener" href="https://github.com/marketplace/actions/create-pdf">Create PDF · Actions</a>这个工具。如果搜索到点击<code>Configure</code>。如果显示未找到，则点击<code>set up a workflow yourself</code>，同样搜索<code>PDF</code>。</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/10/15/f6baead7ab50e1db5ce3611a0525f833.png"></p>
<p>打开<a target="_blank" rel="noopener" href="https://github.com/marketplace/actions/create-pdf">详情页面</a>，拉到底，将<code>Example usage</code>。里的内容复制到编辑框中。点击右上角<code>Start commit</code>将会把我们新建的<code>main.yml</code>提交到仓库中。这就相当于创建了一个生成 PDF 的 GitHub Actions。当然每个 Actions 都有一些使用要求，比如这里还要根据介绍，创建几个文件夹，比如从哪个文件夹获取源文件，生成后的 PDF 又会放到哪个文件夹等。这里就不再介绍，我们先了解如何创建一个 Actions。</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/10/16/0a24d8bcecc9d210b4e6b75b2fccae0b.png"></p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/10/16/69370e917f9c35963a2343176ecf0eea.png"></p>
<h1 id="Workflow-配置"><a href="#Workflow-配置" class="headerlink" title="Workflow 配置"></a>Workflow 配置</h1><p>GitHub Actions 的配置文件叫做 workflow 文件，存放在代码仓库的.github/workflows 目录。</p>
<p>workflow 文件采用 YAML 格式，文件名可以任意取，但是后缀名统一为.yml or .yaml，比如 foo.yml or foo.yaml。一个库可以有多个 workflow 文件。GitHub 只要发现.github/workflows 目录里面有.yml or .yaml 文件，就会自动运行该文件（并行）。</p>
<p>接下来我们逐个参数来解释都有哪些功能。</p>
<h2 id="on"><a href="#on" class="headerlink" title="on"></a>on</h2><p>触发 workflow 的 GitHub 事件的名称。比如<code>push</code>代码时触发，其他人<code>fork</code>代码仓时触发等等。</p>
<p>可以只有一个事件触发，</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">on:</span> <span class="hljs-string">push</span><br></code></pre></td></tr></table></figure>

<p>也可有多个事件触发，使用列表列举，</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">on:</span> [<span class="hljs-string">push</span>, <span class="hljs-string">fork</span>]<br></code></pre></td></tr></table></figure>

<p>所有支持的事件列表，请查看<a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/using-workflows/events-that-trigger-workflows">官方文档</a>。</p>
<h3 id="on-push-fork-tags-branches"><a href="#on-push-fork-tags-branches" class="headerlink" title="on.[push|fork].[tags|branches]"></a>on.[push|fork].[tags|branches]</h3><p><strong>注意</strong>：从这里开始就会出现一个字段下有子字段，每个点号<code>.</code>分割一个子字段。如<code>push</code>或者<code>fork</code>可以作为<code>on</code>的子字段，<code>tags</code>或者<code>branches</code>可以作为<code>push</code>或者<code>fork</code>的子字段。在<code>yaml</code>文件中，缩进很重要，每个缩进都表示是从属关系，表示是该字段的子字段。千万要注意缩进关系，如果缩进出错，那么将无法解析<code>yaml</code>文件。</p>
<p>指定触发事件时，可以限定分支或标签。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure>


<p>上面代码指定，只有 master 分支发生 push 事件时，才会触发 workflow。</p>
<h2 id="name"><a href="#name" class="headerlink" title="name"></a>name</h2><p>工作流程的名称。GitHub 在仓库的操作页面上显示工作流程的名称。如果省略 name，GitHub 将其设置为相对于仓库根目录的工作流程文件路径。</p>
<h2 id="jobs"><a href="#jobs" class="headerlink" title="jobs"></a>jobs</h2><p>workflow 运行包括一项或多项 jobs。jobs 默认是并行运行。要按顺序运行作业，可以使用 <code>[job_id].needs</code> 关键词在其他 job 上定义依赖项。</p>
<p>每个作业在 <code>runs-on</code> 指定的运行器环境中运行。</p>
<h3 id="jobs-job-id"><a href="#jobs-job-id" class="headerlink" title="jobs.[job_id]"></a>jobs.[job_id]</h3><p>jobs 中的每个任务都有一个<code>[job_id]</code> ，且其必须为 jobs 对象中<strong>唯一的字符串键值</strong>。<code>[job_id]</code>必须以字母或<code>_</code>开头，并且只能包含字母数字字符、<code>-</code>或<code>_</code>。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">first_job:</span>  <span class="hljs-comment"># [job_id]，任务 id</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">My</span> <span class="hljs-string">first</span> <span class="hljs-string">job</span><br>  <span class="hljs-attr">second_job:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">My</span> <span class="hljs-string">second</span> <span class="hljs-string">job</span><br></code></pre></td></tr></table></figure>

<h3 id="jobs-job-id-runs-on"><a href="#jobs-job-id-runs-on" class="headerlink" title="jobs.[job_id].[runs-on]"></a>jobs.[job_id].[runs-on]</h3><p><code>runs-on</code> 字段指定运行所需要的虚拟机环境。它是必填字段。目前可用的虚拟机如下。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-string">ubuntu-latest，ubuntu-18.04或ubuntu-16.04</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">windows-latest，windows-2019或windows-2016</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">macOS-latest或macOS-10.14</span><br></code></pre></td></tr></table></figure>

<p>下面代码指定虚拟机环境为 ubuntu-18.04。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-18.04</span><br></code></pre></td></tr></table></figure>


<h3 id="jobs-job-id-name"><a href="#jobs-job-id-name" class="headerlink" title="jobs.[job_id].name"></a>jobs.[job_id].name</h3><p>workflow 文件的主体是 jobs 字段，表示要执行的一项或多项任务。</p>
<p><code>job_id</code> 里面的 <code>name</code> 字段是任务的说明。它可以在网页端的 UI 上显示。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">first_job:</span>  <br>    <span class="hljs-attr">name:</span> <span class="hljs-string">My</span> <span class="hljs-string">first</span> <span class="hljs-string">job</span>  <span class="hljs-comment"># [job_name]，任务名称</span><br>  <span class="hljs-attr">second_job:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">My</span> <span class="hljs-string">second</span> <span class="hljs-string">job</span><br></code></pre></td></tr></table></figure>

<h3 id="jobs-job-id-needs"><a href="#jobs-job-id-needs" class="headerlink" title="jobs.[job_id].needs"></a>jobs.[job_id].needs</h3><p>needs 字段指定当前任务的依赖关系，即运行顺序。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">job1:</span><br>  <span class="hljs-attr">job2:</span><br>    <span class="hljs-attr">needs:</span> <span class="hljs-string">job1</span><br>  <span class="hljs-attr">job3:</span><br>    <span class="hljs-attr">needs:</span> [<span class="hljs-string">job1</span>, <span class="hljs-string">job2</span>]<br></code></pre></td></tr></table></figure>

<p>上面代码中，job1 必须先于 job2 完成，而 job3 等待 job1 和 job2 的完成才能运行。因此，这个 workflow 的运行顺序依次为：job1、job2、job3。</p>
<h3 id="jobs-job-id-steps"><a href="#jobs-job-id-steps" class="headerlink" title="jobs.[job_id].steps"></a>jobs.[job_id].steps</h3><p><code>steps</code> 字段指定每个 Job 的运行步骤，可以包含一个或多个步骤。每个步骤都可以指定以下三个字段。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-string">jobs.[job_id].steps.name：步骤名称。</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">jobs.[job_id].steps.run：该步骤运行的命令或者</span> <span class="hljs-string">action。</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">jobs.[job_id].steps.env：该步骤所需的环境变量。</span><br></code></pre></td></tr></table></figure>

<p>下面是一个完整的 workflow 文件的范例。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Greeting</span> <span class="hljs-string">from</span> <span class="hljs-string">Mona</span><br><span class="hljs-attr">on:</span> <span class="hljs-string">push</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">my-job:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">My</span> <span class="hljs-string">Job</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Print</span> <span class="hljs-string">a</span> <span class="hljs-string">greeting</span><br>        <span class="hljs-attr">env:</span><br>          <span class="hljs-attr">MY_VAR:</span> <span class="hljs-string">Hi</span> <span class="hljs-string">there!</span> <span class="hljs-string">My</span> <span class="hljs-string">name</span> <span class="hljs-string">is</span><br>          <span class="hljs-attr">FIRST_NAME:</span> <span class="hljs-string">Mona</span><br>          <span class="hljs-attr">MIDDLE_NAME:</span> <span class="hljs-string">The</span><br>          <span class="hljs-attr">LAST_NAME:</span> <span class="hljs-string">Octocat</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>          <span class="hljs-string">echo</span> <span class="hljs-string">$MY_VAR</span> <span class="hljs-string">$FIRST_NAME</span> <span class="hljs-string">$MIDDLE_NAME</span> <span class="hljs-string">$LAST_NAME.</span><br></code></pre></td></tr></table></figure>

<p>上面代码中，steps 字段只包括一个步骤。该步骤先注入四个环境变量，然后执行一条 Bash 命令。</p>
<h3 id="jobs-job-id-steps-uses"><a href="#jobs-job-id-steps-uses" class="headerlink" title="jobs.[job_id].steps[*].uses"></a>jobs.[job_id].steps[*].uses</h3><p>选择一个 action，可以理解为若干 steps.run，有利于代码复用。这也是 github action 最主要的功能。</p>
<p>比如最常用的，下载本仓库的代码到工作区，就是使用的一个 action 完成的：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">steps:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Check</span> <span class="hljs-string">out</span> <span class="hljs-string">Git</span> <span class="hljs-string">repository</span><br>    <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>注：<code>@v2</code> 什么意思？<br>表示 Action 的版本。我们如果不带版本号的话，就是默认使用最新版本。Github 官方强烈要求我们带上版本号。这样子的话，我们就不会出现：写好一个 Workflow，但是由于某个 Action 的作者一更新，我们的 Workflow 就崩了的问题</p>
</blockquote>
<h3 id="jobs-job-id-steps-run"><a href="#jobs-job-id-steps-run" class="headerlink" title="jobs.[job_id].steps.run"></a>jobs.[job_id].steps.run</h3><p>在 shell 中执行的命令：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">steps:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">dir</span><br>        <span class="hljs-attr">id:</span> <span class="hljs-string">dir</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>            <span class="hljs-string">mkdir</span> <span class="hljs-string">output</span>  <span class="hljs-comment"># create output dir</span><br></code></pre></td></tr></table></figure>

<p>以上配置是在下载完本仓库的代码后，在仓库根目录新建一个<code>output</code>文件夹。注意<code>run:</code>后的<code>|</code>表示可以多行命令。如果没有<code>|</code>表示只能执行一条命令。</p>
<h3 id="jobs-job-id-steps-working-directory"><a href="#jobs-job-id-steps-working-directory" class="headerlink" title="jobs.[job_id].steps.working-directory"></a>jobs.[job_id].steps.working-directory</h3><p>用来指定在<code>run</code>命令在哪执行。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">dir</span><br>  <span class="hljs-attr">run:</span> <span class="hljs-string">mkdir</span> <span class="hljs-string">output</span><br>  <span class="hljs-attr">working-directory:</span> <span class="hljs-string">./build</span><br></code></pre></td></tr></table></figure>

<h3 id="jobs-job-id-steps-shell"><a href="#jobs-job-id-steps-shell" class="headerlink" title="jobs.[job_id].steps.shell"></a>jobs.[job_id].steps.shell</h3><p>用来指定 shell 类型，如 Python，bash，powershell 等。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">steps:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Display</span> <span class="hljs-string">the</span> <span class="hljs-string">path</span><br>    <span class="hljs-attr">run:</span> <span class="hljs-string">echo</span> <span class="hljs-string">$PATH</span><br>    <span class="hljs-attr">shell:</span> <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure>

<p>所有支持的类型请查看<a target="_blank" rel="noopener" href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsshell">官方文档</a>。</p>
<h3 id="如何跳过-GitHub-Actions"><a href="#如何跳过-GitHub-Actions" class="headerlink" title="如何跳过 GitHub Actions"></a>如何跳过 GitHub Actions</h3><p>在 commit message 中只要包含了下面几个关键词就会跳过 Github Actions。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">skip</span> <span class="hljs-string">ci</span>]<br>[<span class="hljs-string">ci</span> <span class="hljs-string">skip</span>]<br>[<span class="hljs-literal">no</span> <span class="hljs-string">ci</span>]<br>[<span class="hljs-string">skip</span> <span class="hljs-string">actions</span>]<br>[<span class="hljs-string">actions</span> <span class="hljs-string">skip</span>]<br></code></pre></td></tr></table></figure>

<h1 id="实例：自动使用-Pandoc-将-Markdown-文件转换为-PDF"><a href="#实例：自动使用-Pandoc-将-Markdown-文件转换为-PDF" class="headerlink" title="实例：自动使用 Pandoc 将 Markdown 文件转换为 PDF"></a>实例：自动使用 Pandoc 将 Markdown 文件转换为 PDF</h1><p>以<a target="_blank" rel="noopener" href="https://github.com/Dunky-Z/uefi-spec-zh">Dunky-Z/uefi-spec-zh</a>项目中使用的 GitHub Actions 为例，解释如何实现将 Markdown 文件转换为 PDF。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># CI 名为 MPPL</span><br><span class="hljs-attr">name:</span> <span class="hljs-string">MPPL</span><br><br><span class="hljs-comment"># 在 Push 代码时触发 CI</span><br><span class="hljs-attr">on:</span> <span class="hljs-string">push</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-comment"># 任务名称为 convert_via_pandoc</span><br>  <span class="hljs-attr">convert_via_pandoc:</span><br>    <span class="hljs-comment"># 在 ubuntu-latest 系统上运行</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-comment"># 步骤一：下载最新代码</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br>      <span class="hljs-comment"># 步骤二：在项目根目录建立 output 文件夹放生成的 PDF 文件</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">file</span> <span class="hljs-string">list</span><br>        <span class="hljs-attr">id:</span> <span class="hljs-string">files_list</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          mkdir output  # create output dir</span><br><span class="hljs-string"></span>      <span class="hljs-comment"># 步骤三：更新项目的子模块</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Git</span> <span class="hljs-string">Sumbodule</span> <span class="hljs-string">Update</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          git submodule update --init --remote --recursive</span><br><span class="hljs-string"></span>      <span class="hljs-comment"># 步骤四：为运行的系统中安装需要的字体，因为原系统没有需要的中文字体</span><br>      <span class="hljs-comment"># 字体来源为项目目录的MPPL/fonts</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">add</span> <span class="hljs-string">fonts</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          sudo apt-get install ttf-mscorefonts-installer</span><br><span class="hljs-string">          sudo apt-get install fontconfig</span><br><span class="hljs-string">          fc-list :lang=zh</span><br><span class="hljs-string">          ls -lh /usr/share/fonts/</span><br><span class="hljs-string">          cp -rf ./MPPL/fonts/* /usr/share/fonts/</span><br><span class="hljs-string">          mkfontscale</span><br><span class="hljs-string">          mkfontdir</span><br><span class="hljs-string">          fc-cache</span><br><span class="hljs-string">          fc-list</span><br><span class="hljs-string"></span>      <span class="hljs-comment"># 步骤五：安装 pandoc 和 texlive</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">pandoc</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          sudo apt-get update</span><br><span class="hljs-string">          sudo apt-get install texlive-full</span><br><span class="hljs-string">          sudo apt-get install pandoc</span><br><span class="hljs-string">          sudo apt-get clean</span><br><span class="hljs-string"></span>      <span class="hljs-comment"># 步骤六：使用 pandoc 命令生成 pdf</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">build</span> <span class="hljs-string">pdf</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          cd src</span><br><span class="hljs-string">          pandoc -f  markdown-auto_identifiers  --listings --pdf-engine=xelatex --template=../MPPL/templates/mppl.tex  --output=../output/UEFI规范-中文.pdf *.md</span><br><span class="hljs-string"></span>      <span class="hljs-comment"># 步骤七：将生成的结果上传到 GitHub</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-artifact@master</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">output</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">output</span><br></code></pre></td></tr></table></figure>

<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>every step must define a <code>uses</code> or <code>run</code> key<br><a target="_blank" rel="noopener" href="https://github.com/einaregilsson/beanstalk-deploy/issues/2">every step must define a uses or run key · Issue #2 · einaregilsson/beanstalk-deploy</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://github.com/fhem/mod-Buienradar/issues/318">GH actions: a step cannot have both the </a><a target="_blank" rel="noopener" href="https://github.com/fhem/mod-Buienradar/issues/318"><code>uses</code></a><a target="_blank" rel="noopener" href="https://github.com/fhem/mod-Buienradar/issues/318"> and </a><a target="_blank" rel="noopener" href="https://github.com/fhem/mod-Buienradar/issues/318"><code>run</code></a><a target="_blank" rel="noopener" href="https://github.com/fhem/mod-Buienradar/issues/318"> keys · Issue #318 · fhem/mod-Buienradar</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/einaregilsson/beanstalk-deploy/issues/2">every step must define a uses or run key · Issue #2 · einaregilsson/beanstalk-deploy</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/10/10/%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/" itemprop="url">加密算法总结</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-10-10T05:44:32.000Z" itemprop="datePublished">10月 10 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            26 分钟 读完 (约 3825 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><h2 id="明文与密文"><a href="#明文与密文" class="headerlink" title="明文与密文"></a>明文与密文</h2><ul>
<li>Plaintext，明文，未经加密的消息，任何人都可以读</li>
<li>Ciphertext，密文，加密后的消息，不可读</li>
<li>Key，密钥，用于加密和解密（核心是算法）</li>
</ul>
<h2 id="加密与解密概念"><a href="#加密与解密概念" class="headerlink" title="加密与解密概念"></a>加密与解密概念</h2><h3 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h3><p>数据加密 的基本过程，就是对原来为 明文 的文件或数据按 某种算法 进行处理，使其成为 不可读 的一段代码，通常称为“密文”。通过这样的途径，来达到 保护数据 不被 非法人窃取、阅读的目的。</p>
<h3 id="解密"><a href="#解密" class="headerlink" title="解密"></a>解密</h3><p>加密 的 逆过程 为 解密，即将该 编码信息 转化为其 原来数据 的过程。</p>
<h2 id="对称加密和非对称加密"><a href="#对称加密和非对称加密" class="headerlink" title="对称加密和非对称加密"></a>对称加密和非对称加密</h2><p>加密算法分 <strong>对称加密</strong> 和 <strong>非对称加密</strong>，其中对称加密算法的加密与解密 <strong>密钥相同</strong>，非对称加密算法的加密密钥与解密 <strong>密钥不同</strong>，此外，还有一类 <strong>不需要密钥</strong> 的 <strong>散列算法</strong>。</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-00-40-c536814468b9400500824199c2105b28-20221010140039-a6b9ec.png"></p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-10-59-06393c9fde719e436d8f09dc143e5d73-20221010141058-d38144.png"></p>
<h3 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h3><p>对称加密算法 是应用较早的加密算法，又称为 <strong>共享密钥加密算法</strong>。在 对称加密算法 中，使用的密钥只有一个，发送 和 接收 双方都使用这个密钥对数据进行 加密 和 解密。这就要求加密和解密方事先都必须知道加密的密钥。</p>
<ul>
<li><p>数据加密过程：在对称加密算法中，数据发送方 将 明文 (原始数据) 和 加密密钥 一起经过特殊 加密处理，生成复杂的 加密密文 进行发送。</p>
</li>
<li><p>数据解密过程：数据接收方 收到密文后，若想读取原数据，则需要使用 加密使用的密钥 及相同算法的 逆算法 对加密的密文进行解密，才能使其恢复成 可读明文。</p>
</li>
</ul>
<h3 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h3><p>非对称加密算法，又称为 <strong>公开密钥加密算法</strong>。它需要两个密钥，一个称为 公开密钥 (public key)，即 公钥，另一个称为 私有密钥 (private key)，即 私钥。<br>因为 加密 和 解密 使用的是两个不同的密钥，所以这种算法称为 非对称加密算法。</p>
<ul>
<li><p>如果使用 公钥 对数据 进行加密，只有用对应的 私钥 才能 进行解密。</p>
</li>
<li><p>如果使用 私钥 对数据 进行加密，只有用对应的 公钥 才能 进行解密。</p>
</li>
</ul>
<h2 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h2><p>数字签名，顾名思义，就是用来证明自己身份的一种方式。在使用非对称加密算法通信时，<strong>如何验证发送者是真实的发送者，发送的信息没有篡改</strong>，就需要数字签名。一套 数字签名 通常定义两种 互补 的运算，一个用于 签名，另一个用于 验证。分别由 发送者 持有能够 代表自己身份 的 私钥（私钥不可泄露），由 接受者 持有与私钥对应的 公钥，能够在 接受 到来自发送者信息时用于 验证 其身份。</p>
<h1 id="加密算法详解"><a href="#加密算法详解" class="headerlink" title="加密算法详解"></a>加密算法详解</h1><p>通过以上简介可以了解到，加密算法分为需要秘钥的和不需要秘钥的，需要秘钥的有可以分为对称加密与非对称加密两大类。接来来我们就详细探究一下各个加密算法。</p>
<h2 id="哈希算法（不可逆）"><a href="#哈希算法（不可逆）" class="headerlink" title="哈希算法（不可逆）"></a>哈希算法（不可逆）</h2><p>哈希算法可以将任意长度的输入数据，生成固定长度的输出（哈希值）。</p>
<p>常见的哈希算法有如下：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/14-40-43-24c6e7e9577cf8f77efcc6c418aad103-20221010144042-761be3.png"></p>
<p>目前比较常用的是 MD5 和 SHA 系列（比如比特币用的 SHA256 算法，Git 中的 commit hash 用的 SHA1）。</p>
<h3 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h3><p>MD5（Message-Digest）典型应用是对一段信息产生 <strong>信息摘要</strong>，以 防止被篡改。严格来说，MD5 不是一种 加密算法 而是 <strong>摘要算法</strong>。无论是多长的输入，MD5 都会输出长度为 128bits 的一个串 (通常用 16 进制 表示为 32 个字符)。</p>
<h3 id="SHA1"><a href="#SHA1" class="headerlink" title="SHA1"></a>SHA1</h3><p>SHA1(Secure Hash Algorithm) 是和 MD5 一样流行的 消息摘要算法，然而 SHA1 比 MD5 的 安全性更强。对于长度小于 $2 ^{64}$ 位的消息，SHA1 会产生一个 160 位的 消息摘要。</p>
<h2 id="对称加密（可逆）"><a href="#对称加密（可逆）" class="headerlink" title="对称加密（可逆）"></a>对称加密（可逆）</h2><p>对称加密算法是应用比较早的算法，在数据加密和解密的时用的都是同一个密钥，这就造成了密钥管理困难的问题。常见的对称加密算法有 DES、3DES、AES128、AES192、AES256。</p>
<h3 id="A5-1、A5-2及RC4"><a href="#A5-1、A5-2及RC4" class="headerlink" title="A5/1、A5/2及RC4"></a>A5/1、A5/2及RC4</h3><p>A5/1、A5/2及RC4他们都属于对称加密算法，并都属于流加密。先了解什么是流加密。</p>
<p>在密码学中，<strong>流加密</strong>（英语：Stream cipher），是一种对称加密算法，加密和解密双方使用相同伪随机加密数据流（pseudo-random stream）作为密钥，明文数据每次与密钥数据流顺次对应加密，得到密文数据流。实践中通常<strong>把信息中的每一位跟密钥流的每一位进行异或 (xor) 运算来获得密文</strong>。</p>
<h3 id="DES"><a href="#DES" class="headerlink" title="DES"></a>DES</h3><p>DES(Data Encryption Standard) 是对称加密算法领域中的典型算法，是一种<strong>块加密算法</strong>(Block cipher)，其密钥默认长度为 56 位。块加密或者叫分组加密，这种加密方法是把明文分成几个固定大小的 block 块，然后分别对其进行加密。</p>
<p>DES 加密算法是对 <strong>密钥进行保密</strong>，而 <strong>公开算法</strong>，包括加密和解密算法。这样，只有掌握了和发送方 相同密钥 的人才能解读由 DES 加密算法加密的密文数据。因此，破译 DES 加密算法实际上就是 <strong>搜索密钥的编码</strong>。对于 56 位长度的 密钥 来说，如果用 穷举法 来进行搜索的话，其运算次数为 $2 ^{56}$ 次。</p>
<h3 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h3><p>AES 是美国国家标准技术研究所 NIST 旨在取代 DES 的 21 世纪的加密标准。AES 是块加密算法，也就是说，每次处理的数据是一块（16 字节），当数据不是 16 字节的倍数时填充，这就是所谓的<strong>分组密码</strong>（区别于基于比特位的流密码），16 字节是分组长度。AES 共有 ECB、CBC 等多种模式。</p>
<h3 id="SM4"><a href="#SM4" class="headerlink" title="SM4"></a>SM4</h3><p>SM4 算法于 2012 年被国家密码管理局确定为国家密码行业标准，最初主要用于 WAPI (WLAN Authentication and Privacy Infrastructure) 无线网络中。SM4 算法的出现为将我国商用产品上的密码算法由国际标准替换为国家标准提供了强有力的支撑。随后，SM4 算法被广泛应用于政府办公、公安、银行、税务、电力等信息系统中，其在我国密码行业中占据着极其重要的位置。类似于 DES、AES 算法，SM4 算法也是一种分组密码算法。</p>
<h2 id="非对称加密（可逆）"><a href="#非对称加密（可逆）" class="headerlink" title="非对称加密（可逆）"></a>非对称加密（可逆）</h2><p>学习非对称加密之前，我们得了解如何进行安全高效地秘钥交换。我们不可能说通信双方在通信之前，先见个面协商一下秘钥 key，这样非常不方便，但是又不能直接把 key 秘钥通过一个不安全的信道发出去，这样就会被攻击者截获。</p>
<p>所以我们需要有一种方法，<strong>可以让双方在完全没有对方任何预先信息的条件下通过不安全信道创建起一个密钥</strong>。这个密钥可以在后续的通讯中作为对称密钥来加密通讯内容，这就是秘钥交换的概念（key exchange）。</p>
<h3 id="Diffie–Hellman-key-exchange"><a href="#Diffie–Hellman-key-exchange" class="headerlink" title="Diffie–Hellman key exchange"></a>Diffie–Hellman key exchange</h3><p>迪菲-赫尔曼密钥交换（英语：Diffie–Hellman key exchange，缩写为 D-H）是一种安全协议。可以完成上述秘钥交换。</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/16-12-34-6c10e628d0058564969403b4f278deee-20221010161233-308a13.png"></p>
<ol>
<li><p>通信双方 Alice 和 Bob 个准备一个大的质数，Alice 准备的质数是<code>n=11</code>, Bob 准备的质数是<code>g=7</code>，<code>n</code>和<code>g</code>是公开的，任何第三方都可以获取到这个信息。</p>
</li>
<li><p>Alice 准备一个随机自然数<code>x=3</code>, 除了 Alice 没有人知道<code>x</code>是多少，Alice 通过计算<code>g</code>的<code>x</code>次方并且对 <code>n</code> 取模，得到结果大 <code>A</code></p>
</li>
<li><p>Alice 把计算得到的结果 <code>A=2</code> 发送给 Bob，这个信息是公开的，任何人可以获取到 <code>A</code></p>
</li>
<li><p>Bob 同样准备一个随机自然数 <code>y=6</code>，除了 Bob 没有人知道 <code>y</code> 是多少，Bob 通过计算 <code>g</code> 的 <code>y</code> 次方并且对 <code>n</code> 取模，得到结果大 <code>B</code></p>
</li>
<li><p>Bob 把计算结果 <code>B=4</code>，发送给 Alice，，这个信息是公开的，任何人可以获取到 <code>B</code></p>
</li>
<li><p>Alice 拿到 <code>B</code> 以后，对 <code>B</code> 求 <code>x</code> 次方并对 <code>n</code> 取模，得到 <code>K1=9</code></p>
</li>
<li><p>Bob 拿到 <code>A</code> 以后，对 <code>A</code> 对 <code>y</code> 次方并对 <code>n</code> 取模，得到 <code>K2=9</code></p>
</li>
</ol>
<p><code>K1 == K2</code>，Alice 和 Bob 可以使用 <code>K1</code>，<code>K2</code> 作为 Key 进行通信加密。</p>
<p>在整个通信过程中，攻击者是无法知道 <code>x</code>，<code>y</code> 以及 <code>K1</code>，<code>K2</code> 的，或者说计算的困难很大，感兴趣的同学可以在网上找到具体的数学问题，离散对数问题的求解。</p>
<h3 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h3><p>Diffie–Hellman key exchange 发明后不久出现了 RSA，另一个进行公钥交换的算法。它使用了非对称加密算法。</p>
<p>RSA 加密算法是目前最有影响力的 公钥加密算法，并且被普遍认为是目前 最优秀的公钥方案 之一。RSA 是第一个能同时用于 加密 和 数字签名 的算法，它能够 抵抗 到目前为止已知的 所有密码攻击，已被 ISO 推荐为公钥数据加密标准。</p>
<p>RSA 所用到的数学原理可以参考阮一峰老师的文章<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html">RSA 算法原理（一）</a>，文章介绍了 RSA 用到的一些数学定理，不涉及证明，这对于了解 RSA 也就足够了。</p>
<p>简单介绍一下秘钥是生成过程（摘自<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html">RSA 算法原理（二）</a>）：</p>
<ol>
<li><p>随机选择两个不相等的质数 $p$ 和 $q$。爱丽丝选择了$61$和$53$。（实际应用中，这两个质数越大，就越难破解。）</p>
</li>
<li><p>计算$p$和$q$的乘积$n$。爱丽丝就把 $61$ 和 $53$ 相乘。<br> $$n = 61×53 = 3233$$</p>
<p> $n$ 的长度就是密钥长度。$3233$ 写成二进制是 $110010100001$，一共有 $12$ 位，所以这个密钥就是 $12$ 位。实际应用中，RSA 密钥一般是 $1024$ 位，重要场合则为 $2048$ 位。</p>
</li>
<li><p>计算 $n$ 的欧拉函数$\varphi(n)$。根据公式：<br> $$\varphi(n) = (p-1)(q-1)$$</p>
<p> 爱丽丝算出$\varphi(3233)$ 等于 $60×52$，即 $3120$。</p>
</li>
<li><p>随机选择一个整数 $e$，条件是 $1&lt; e &lt; \varphi(n)$，且 $e$ 与$\varphi(n)$ 互质。<br> 爱丽丝就在 $1$ 到 $3120$ 之间，随机选择了 $17$。（实际应用中，常常选择 $65537$。）</p>
</li>
<li><p>计算 $e$ 对于$\varphi(n)$ 的模反元素 $d$。</p>
<p> 所谓”模反元素”就是指有一个整数 $d$，可以使得 $ed$ 被$\varphi(n)$ 除的余数为 $1$。</p>
<p> $$ed ≡ 1 (mod \varphi(n))$$<br> 这个式子等价于</p>
<p> $$ed - 1 = k\varphi(n)$$</p>
<p> 于是，找到模反元素 $d$，实质上就是对下面这个二元一次方程求解。</p>
<p> $$ex + \varphi(n)y = 1$$</p>
<p> 已知 $e=17$, $\varphi(n)=3120$，</p>
<p> $$17x + 3120y = 1$$</p>
<p> 这个方程可以用<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%89%A9%E5%B1%95%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E7%AE%97%E6%B3%95">扩展欧几里得算法</a>求解，此处省略具体过程。总之，爱丽丝算出一组整数解为 $(x,y)=(2753,-15)$，即 $d=2753$。</p>
<p> 至此所有计算完成。</p>
</li>
<li><p>将 $n$ 和 $e$ 封装成公钥，$n$ 和 $d$ 封装成私钥。</p>
<p> 在爱丽丝的例子中，$n=3233$，$e=17$，$d=2753$，所以公钥就是 $(3233,17)$，私钥就是$3233, 2753）$。</p>
<p> 实际应用中，公钥和私钥的数据都采用 <code>ASN.1</code> 格式表达。</p>
</li>
</ol>
<p>RSA 算法为何是可靠的呢？因为该算法基于一个十分简单的数论事实：<strong>将两个大素数相乘十分容易，但想要对其乘积进行因式分解却极其困难，因此可以将乘积公开作为加密密钥</strong>。</p>
<p>回顾上面的密钥生成步骤，一共出现六个数字：</p>
<p>$$p,q,n,\varphi(n),e,d$$</p>
<p>这六个数字之中，公钥用到了两个（$n$和$e$），其余四个数字都是不公开的。其中最关键的是$d$，因为$n$和$d$组成了私钥，一旦$d$泄漏，就等于私钥泄漏。</p>
<p>那么，有无可能在已知$n$和$e$的情况下，推导出$d$？</p>
<ul>
<li>$ed≡1 (mod φ(n))$。只有知道$e$和$φ(n)$，才能算出$d$。</li>
<li>$φ(n)=(p-1)(q-1)$。只有知道$p$和$q$，才能算出$φ(n)$。</li>
<li>$n=pq$。只有将$n$因数分解，才能算出 $p$ 和 $q$。</li>
</ul>
<p>结论：如果 $n$ 可以被因数分解，$d$ 就可以算出，也就意味着私钥被破解。</p>
<p>可是，大整数的因数分解，是一件非常困难的事情。目前，除了暴力破解，还没有发现别的有效方法。</p>
<p>举例来说，你可以对 3233 进行因数分解（61×53），但是你没法对下面这个整数进行因数分解。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">12301866845301177551304949<br>58384962720772853569595334<br>79219732245215172640050726<br>36575187452021997864693899<br>56474942774063845925192557<br>32630345373154826850791702<br>61221429134616704292143116<br>02221240479274737794080665<br>351419597459856902143413<br></code></pre></td></tr></table></figure>

<p>它等于这样两个质数的乘积：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs text">33478071698956898786044169<br>84821269081770479498371376<br>85689124313889828837938780<br>02287614711652531743087737<br>814467999489<br>　　×<br>36746043666799590428244633<br>79962795263227915816434308<br>76426760322838157396665112<br>79233373417143396810270092<br>798736308917<br></code></pre></td></tr></table></figure>

<p>事实上，这大概是人类已经分解的最大整数（232 个十进制位，768 个二进制位）。比它更大的因数分解，还没有被报道过，因此目前被破解的最长 RSA 密钥就是 768 位。</p>
<h1 id="签名与证书"><a href="#签名与证书" class="headerlink" title="签名与证书"></a>签名与证书</h1><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a target="_blank" rel="noopener" href="https://learn-cryptography.readthedocs.io/zh/latest/basic/">Learn Cryptography</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903638117122056">浅谈常见的七种加密算法及实现 - 掘金</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html">RSA 算法原理（一） - 阮一峰的网络日志</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html">RSA 算法原理（二） - 阮一峰的网络日志</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000023445325">加密解密 - 面试官：说一下你常用的加密算法_个人文章 - SegmentFault 思否</a></li>
</ol>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/09/28/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8git-send-mail%E7%BB%99%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E6%8F%90%E4%BA%A4Patch/" itemprop="url">如何使用 git-send-mail 给开源社区提交 Patch</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-28T13:08:29.000Z" itemprop="datePublished">9月 28 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="../../categories/Git-%E5%AE%9E%E6%88%98/">Git 实战</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            9 分钟 读完 (约 1332 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h1 id="需求背景"><a href="#需求背景" class="headerlink" title="需求背景"></a>需求背景</h1><p>如果参与 Linux、QEMU 或者 OpenSBI 等开源项目，不能通过在 GitHub 或者 Gitlab 平台提交<code>pull request</code>。而是需要将修改的代码，通过 Patch 形式提交到对应的<code>listserv</code>供 Maintainer 审核。那么如何创建 Patch 并发送呢？</p>
<p>这里以向 <a target="_blank" rel="noopener" href="https://github.com/riscv-software-src/opensbi">OpenSBI</a> 提交一个 Patch 为例。</p>
<h1 id="创建-Patch"><a href="#创建-Patch" class="headerlink" title="创建 Patch"></a>创建 Patch</h1><p>首先将官方 Repository，Fork 到自己的 GitHub：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/28/5570d8a6420346a4a30463dfb9724f09.png"></p>
<p>回到自己的主页，找到刚刚 Fork 的 Repository，将其 Clone 到本地：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/28/e45a6f8a447f62c7613909672550029c.png"></p>
<p>修改代码与正常开发流程一直，修改完在<code>git commit</code>时需要加上<code>Signed-off-by</code>字段，因为 Merge 代码的人通常不是提交代码的人，有该字段才能证明是你修改了对应的代码。</p>
<p><code>-s</code>参数会自动加上<code>Signed-off-by</code>字段：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git commit -s<br><br>doc:fix some typos<br><br>Signed-off-by: dominic &lt;dominic@gmail.com&gt;<br><br><span class="hljs-comment"># Please enter the commit message for your changes. Lines starting</span><br><span class="hljs-comment"># with &#x27;#&#x27; will be ignored, and an empty message aborts the commit.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Date:      Tue Sep 27 21:11:41 2022 +0800</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># On branch master</span><br><span class="hljs-comment"># Your branch is up to date with &#x27;origin/master&#x27;.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Changes to be committed:</span><br><span class="hljs-comment">#       modified:   docs/domain_support.md</span><br><span class="hljs-comment">#       modified:   docs/library_usage.md</span><br><span class="hljs-comment">#       modified:   docs/platform_requirements.md</span><br><span class="hljs-comment">#       modified:   docs/pmu_support.md</span><br></code></pre></td></tr></table></figure>

<p>生成<code>.patch</code>文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git format-patch HEAD^<br>0001-doc-fix-some-typos.patch<br></code></pre></td></tr></table></figure>

<p>在当前目录下会生成一个<code>0001-doc-fix-some-typos.patch</code>文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git status <br>On branch master<br>Your branch is up to date with <span class="hljs-string">&#x27;origin/master&#x27;</span>.<br><br>Untracked files:<br>  (use <span class="hljs-string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="hljs-keyword">in</span> what will be committed)<br>        0001-doc-fix-some-typos.patch<br><br>nothing added to commit but untracked files present (use <span class="hljs-string">&quot;git add&quot;</span> to track)<br></code></pre></td></tr></table></figure>

<p>这个文件就是我们要发送的文件，文件内容就是我们的代码修改，以及作者等信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ cat 0001-doc-fix-some-typos.patch <br>From d404cb82f4c4aca15dcd35855d0bc96c5b4431d5 Mon Sep 17 00:00:00 2001<br>From: Dunky-Z &lt;xxxxxxxxx@qq.com&gt;<br>Date: Tue, 27 Sep 2022 21:11:41 +0800<br>Subject: [PATCH] doc:fix some typos<br><br>Signed-off-by: dominic &lt;dominic@gmail.com&gt;<br>---<br> docs/domain_support.md        |  6 +++---<br> docs/library_usage.md         |  2 +-<br> docs/platform_requirements.md |  2 +-<br> docs/pmu_support.md           | 10 +++++-----<br> 4 files changed, 10 insertions(+), 10 deletions(-)<br><br>diff --git a/docs/domain_support.md b/docs/domain_support.md<br>index 73931f1..8963b57 100644<br>--- a/docs/domain_support.md<br>+++ b/docs/domain_support.md<br>@@ -2,7 +2,7 @@ OpenSBI Domain Support<br> ======================<br>...<br></code></pre></td></tr></table></figure>

<h1 id="配置-send-email"><a href="#配置-send-email" class="headerlink" title="配置 send-email"></a>配置 send-email</h1><h2 id="安装-git-email"><a href="#安装-git-email" class="headerlink" title="安装 git-email"></a>安装 git-email</h2><p>通过<code>git</code>直接发送 Patch 需要使用<code>git-email</code>工具，得手动安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install git-email<br></code></pre></td></tr></table></figure>

<blockquote>
<p>Windows 平台在安装 Git 时默认已安装</p>
</blockquote>
<h2 id="生成-smtp-授权码"><a href="#生成-smtp-授权码" class="headerlink" title="生成 smtp 授权码"></a>生成 smtp 授权码</h2><p>登录<a target="_blank" rel="noopener" href="https://mail.qq.com/">QQ 邮箱 - 帐户</a>：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/12-33-23-5d80803932cf57943288c95cbe54695f-20220928123322-170195.png"></p>
<p>开启 IMAP/SMTP 服务，并生成授权码：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/12-35-33-82f717633b6d7e09e447beef355a8d33-20220928123532-a208fc.png"></p>
<p>根据提示发送短信：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/12-36-22-173ddcbec9548211275c43b5dc546042-20220928123621-a01c07.png"></p>
<p>记录下生成的授权码：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/12-37-37-97677e266332c45fc640a09659d0ae3f-20220928123736-4d0f30.png"></p>
<h2 id="配置-gitconfig"><a href="#配置-gitconfig" class="headerlink" title="配置.gitconfig"></a>配置.gitconfig</h2><p>Ubuntu 平台：<code>~/.gitconfig</code><br>Windows 平台：<code>C:\Users\用户名\.gitconfig</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">sendemail</span>]<br> <span class="hljs-string">smtpencryption</span> <span class="hljs-string">=</span> <span class="hljs-string">tls</span><br>    <span class="hljs-string">smtpserver</span> <span class="hljs-string">=</span> <span class="hljs-string">smtp.qq.com</span><br>    <span class="hljs-string">smtpuser</span> <span class="hljs-string">=</span> <span class="hljs-string">dominic_riscx@qq.com</span><br> <span class="hljs-string">smtpserverport</span> <span class="hljs-string">=</span> <span class="hljs-number">587</span><br>    <span class="hljs-string">from</span> <span class="hljs-string">=</span> <span class="hljs-string">dominic_riscx@qq.com</span><br> <span class="hljs-string">smtppass</span> <span class="hljs-string">=</span> <span class="hljs-string">xxxxxx</span><br> <span class="hljs-string">cc</span> <span class="hljs-string">=</span> <span class="hljs-string">dominic@gmail.com</span><br> <span class="hljs-comment">#to = opensbi@lists.infradead.org</span><br></code></pre></td></tr></table></figure>

<p>为了方便复制，单独注释：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">sendemail</span>]<br> <span class="hljs-string">smtpencryption</span> <span class="hljs-string">=</span> <span class="hljs-comment"># 加密方式，保持默认</span><br>    <span class="hljs-string">smtpserver</span> <span class="hljs-string">=</span>     <span class="hljs-comment"># smtp 服务器地址，保持默认</span><br>    <span class="hljs-string">smtpuser</span> <span class="hljs-string">=</span>       <span class="hljs-comment"># 邮箱地址，改为 QQ 邮箱地址，也就是用哪个邮箱发送，就填哪个</span><br> <span class="hljs-string">smtpserverport</span> <span class="hljs-string">=</span> <span class="hljs-comment"># 端口号，保持默认</span><br>    <span class="hljs-string">from</span> <span class="hljs-string">=</span>           <span class="hljs-comment"># 同 smtpuser</span><br> <span class="hljs-string">smtppass</span> <span class="hljs-string">=</span>       <span class="hljs-comment"># 上文生成的 smtp 授权码</span><br> <span class="hljs-string">cc</span> <span class="hljs-string">=</span>             <span class="hljs-comment"># 抄送的邮箱地址</span><br> <span class="hljs-comment">#to = opensbi@lists.infradead.org </span><br>    <span class="hljs-comment"># 要发送的地址，这个字段我注释了，因为怕以后发邮件默认发到这个地址，这个字段可以在发送时单独填写</span><br></code></pre></td></tr></table></figure>

<h1 id="发送-Patch"><a href="#发送-Patch" class="headerlink" title="发送 Patch"></a>发送 Patch</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#$ git send-email patch文件名</span><br>$ git send-email  0001-doc-fix-some-typos.patch<br>0001-doc-fix-some-typos.patch<br><span class="hljs-comment"># 提示往哪里发送，填写要接收的邮箱即可，我这里填写的是OpenSBI接收Patch的地址</span><br>To whom should the emails be sent (<span class="hljs-keyword">if</span> anyone)? opensbi@lists.infradead.org<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Message-ID to be used as In-Reply-To <span class="hljs-keyword">for</span> the first email (<span class="hljs-keyword">if</span> any)? <br><span class="hljs-comment"># 回车，保存默认（我还不清楚这里的作用）</span><br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">(mbox) Adding cc: Dunky-Z &lt;xxxxxxxxx@qq.com&gt; from line <span class="hljs-string">&#x27;From: Dunky-Z &lt;xxxxxxxxx@qq.com&gt;&#x27;</span><br>(body) Adding cc: dominic &lt;dominic@gmail.com&gt; from line <span class="hljs-string">&#x27;Signed-off-by: dominic &lt;dominic@gmail.com&gt;&#x27;</span>   <br><br>From: dominic_riscx@qq.com<br>To: opensbi@lists.infradead.org<br>Cc: dominic@gmail.com,<br>        Dunky-Z &lt;xxxxxxxxx@qq.com&gt;<br>Subject: [PATCH] doc:fix some typos<br>Date: Wed, 28 Sep 2022 10:35:30 +0800<br>Message-Id: &lt;20220928023530.2344-1-dominic_riscx@qq.com&gt;<br>X-Mailer: git-send-email 2.34.1.windows.1<br>MIME-Version: 1.0<br>Content-Transfer-Encoding: 8bit<br><br>    The Cc list above has been expanded by additional<br>    addresses found <span class="hljs-keyword">in</span> the patch commit message. By default<br>    send-email prompts before sending whenever this occurs.<br>    This behavior is controlled by the sendemail.confirm<br>    configuration setting.<br><br>    For additional information, run <span class="hljs-string">&#x27;git send-email --help&#x27;</span>.<br>    To retain the current behavior, but squelch this message,<br>    run <span class="hljs-string">&#x27;git config --global sendemail.confirm auto&#x27;</span>.<br><br>Send this email? ([y]es|[n]o|[e]dit|[q]uit|[a]ll): y<br><br><span class="hljs-comment"># y 确认发送</span><br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">OK. Log says:<br>Server: smtp.qq.com<br>MAIL FROM:&lt;dominic_riscx@qq.com&gt;<br>RCPT TO:&lt;opensbi@lists.infradead.org&gt;<br>RCPT TO:&lt;dominic@gmail.com&gt;<br>RCPT TO:&lt;xxxxxxxxx@qq.com&gt;<br>From: dominic_riscx@qq.com<br>To: opensbi@lists.infradead.org<br>Cc: dominic@gmail.com,<br>        Dunky-Z &lt;xxxxxxxxx@qq.com&gt;<br>Subject: [PATCH] doc:fix some typos<br>Date: Wed, 28 Sep 2022 10:35:30 +0800<br>Message-Id: &lt;20220928023530.2344-1-dominic_riscx@qq.com&gt;<br>X-Mailer: git-send-email 2.34.1.windows.1<br>MIME-Version: 1.0<br>Content-Transfer-Encoding: 8bit<br><br>Result: 250<br><br><span class="hljs-comment"># 发送成功</span><br></code></pre></td></tr></table></figure>

<p>前往<a target="_blank" rel="noopener" href="http://lists.infradead.org/pipermail/opensbi/">The opensbi Archives</a>，找到对应的月份，点击<code>Theread</code>，即可找到自己发送的 Patch，每个开源社区一般都会在如何提交 PR 的文档里公开 Patch Archive 网址，这里是以 OpenSBI 的网址。</p>
<p>前往邮箱发送记录中也可以找到对应的 Patch 信息：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/28/52837340ba2d7223cd0eb990f8a5288b.png"></p>
<p>以上就是完整的提交 Patch 过程。</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/09/26/Makefile%E5%9F%BA%E7%A1%80/" itemprop="url">Makefile 基础</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-26T13:36:18.000Z" itemprop="datePublished">9月 26 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            10 分钟 读完 (约 1458 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="目标、依赖、命令"><a href="#目标、依赖、命令" class="headerlink" title="目标、依赖、命令"></a>目标、依赖、命令</h2><ul>
<li>目标就是我们要去 make xxx 的那个 xxx，就是我们最终要生成的东西。</li>
<li>依赖是用来生成目录的原材料</li>
<li>命令就是加工方法，所以 make xxx 的过程其实就是使用命令将依赖加工成目标的过程。</li>
</ul>
<h2 id="通配符-和-Makefile-自动推导"><a href="#通配符-和-Makefile-自动推导" class="headerlink" title="通配符 % 和 Makefile 自动推导"></a>通配符 <code>%</code> 和 Makefile 自动推导</h2><ul>
<li><code>%</code> 是 Makefile 中的通配符，代表一个或几个字母。也就是说<code>%.o</code>就代表所有以<code>.o</code>为结尾的文件。</li>
<li>所谓自动推导其实就是 Makefile 的规则。当 Makefile 需要某一个目标时，他会把这个目标去套规则说明，一旦套上了某个规则说明，则 Makefile 会试图寻找这个规则中的依赖，如果能找到则会执行这个规则用依赖生成目标。</li>
</ul>
<h2 id="Makefile-中定义和使用变量"><a href="#Makefile-中定义和使用变量" class="headerlink" title="Makefile 中定义和使用变量"></a>Makefile 中定义和使用变量</h2><ul>
<li>Makefile 中定义和使用变量，和 shell 脚本中非常相似。相似的是都没有变量类型，直接定义使用，引用变量时用<code>$var</code>。</li>
</ul>
<h2 id="伪目标（-PHONY）"><a href="#伪目标（-PHONY）" class="headerlink" title="伪目标（.PHONY）"></a>伪目标（<code>.PHONY</code>）</h2><ul>
<li>伪目标意思是这个目标本身不代表一个文件，执行这个目标不是为了得到某个文件或东西，而是单纯为了执行这个目标下面的命令。</li>
<li>伪目标一般都没有依赖，因为执行伪目标就是为了执行目标下面的命令。既然一定要执行命令了那就不必加依赖，因为不加依赖意思就是无条件执行。</li>
<li>伪目标可以直接写，不影响使用；但是有时候为了明确声明这个目标是伪目标会在伪目标的前面用<code>.PHONY</code>来明确声明它是伪目标。</li>
</ul>
<h2 id="Makfile-中引用其他-Makefile"><a href="#Makfile-中引用其他-Makefile" class="headerlink" title="Makfile 中引用其他 Makefile"></a>Makfile 中引用其他 Makefile</h2><ul>
<li>有时候 Makefile 总体比较复杂，因此分成好几个 Makefile 来写。然后在主 Makefile 中引用其他的，用 <code>include</code> 指令来引用。引用的效果也是原地展开，和 C 语言中的头文件包含非常相似。</li>
</ul>
<h2 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h2><ul>
<li><code>=</code>最简单的赋值</li>
<li><code>:=</code>一般也是赋值</li>
</ul>
<p>以上这两个大部分情况下效果是一样的，但是有时候不一样。用<code>=</code>赋值的变量，在被解析时他的值取决于最后一次赋值时的值，所以你看变量引用的值时不能只往前面看，还要往后面看。用<code>:=</code>来赋值的，则是就地直接解析，只用往前看即可。</p>
<ul>
<li><code>?=</code>如果变量前面并没有赋值过则执行这条赋值，如果前面已经赋值过了则本行被忽略。（实验可以看出：所谓的没有赋值过其实就是这个变量没有被定义过）</li>
<li><code>+=</code>用来给一个已经赋值的变量接续赋值，意思就是把这次的值加到原来的值的后面，有点类似于 <code>strcat</code>。（注意一个细节，<code>+=</code>续接的内容和原来的内容之间会自动加一个空格隔开）</li>
</ul>
<p>注意：Makefile 中并不要求赋值运算符两边一定要有空格或者无空格，这一点比 shell 的格式要求要松一些。</p>
<h2 id="Makefile-的环境变量"><a href="#Makefile-的环境变量" class="headerlink" title="Makefile 的环境变量"></a>Makefile 的环境变量</h2><ul>
<li>makefile 中用 <code>export</code> 导出的就是环境变量。一般情况下要求环境变量名用大写，普通变量名用小写。</li>
<li>环境变量和普通变量不同，可以这样理解：环境变量类似于整个工程中所有 Makefile 之间可以共享的全局变量，而普通变量只是当前本 Makefile 中使用的局部变量。所以要注意：定义了一个环境变量会影响到工程中别的 Makefile 文件，因此要小心。</li>
<li>Makefile 中可能有一些环境变量可能是 makefile 本身自己定义的内部的环境变量或者是当前的执行环境提供的环境变量（譬如我们在 <code>make</code> 执行时给 makefile 传参。<code>make CC=arm-linux-gcc</code>，其实就是给当前 Makefile 传了一个环境变量 <code>CC</code>，值是 <code>arm-linux-gcc</code>。我们在 <code>make</code> 时给 <code>makefile</code> 传的环境变量值优先级最高的，可以覆盖 makefile 中的赋值）。这就好像 C 语言中编译器预定义的宏<code>__LINE__</code> <code>__FUNCTION__</code>等一样。</li>
</ul>
<h2 id="Makefile-中使用通配符"><a href="#Makefile-中使用通配符" class="headerlink" title="Makefile 中使用通配符"></a>Makefile 中使用通配符</h2><ul>
<li><code>*</code>：若干个任意字符</li>
<li><code>?</code>：1 个任意字符</li>
<li><code>[]</code>：将 <code>[]</code> 中的字符依次去和外面的结合匹配</li>
</ul>
<p>还有个<code>%</code>，也是通配符，表示任意多个字符，和<code>*</code>很相似，但是<code>%</code>一般只用于规则描述中，又叫做规则通配符。</p>
<h2 id="Makefile-的自动变量"><a href="#Makefile-的自动变量" class="headerlink" title="Makefile 的自动变量"></a>Makefile 的自动变量</h2><ul>
<li>为什么使用自动变量。在有些情况下文件集合中文件非常多，描述的时候很麻烦，所以我们 Makefile 就用一些特殊的符号来替代符合某种条件的文件集，这就形成了自动变量。</li>
<li>自动变量的含义：预定义的特殊意义的符号。就类似于 C 语言编译器中预制的那些宏<code>__FILE__</code>一样。</li>
<li>常见自动变量：<ul>
<li><code>$@</code>：规则的目标文件名</li>
<li><code>$&lt;</code>：规则的依赖文件名</li>
<li><code>$^</code>：依赖的文件集合</li>
</ul>
</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>Makefile 中的注释用<code>#</code></li>
<li>在 makefile 的命令行中前面的<code>@</code>表示静默执行</li>
<li>Makefile 中默认情况下在执行一行命令前会先把这行命令给打印出来，然后再执行这行命令</li>
<li>如果你不想看到命令本身，只想看到命令执行就静默执行即可</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/09/25/%E5%B5%8C%E5%85%A5%E5%BC%8FShell%E5%9F%BA%E7%A1%80/" itemprop="url">嵌入式 Shell 基础</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-25T14:35:16.000Z" itemprop="datePublished">9月 25 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="../../categories/Embedded-Development/">Embedded Development</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            18 分钟 读完 (约 2708 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="脚本语言"><a href="#脚本语言" class="headerlink" title="脚本语言"></a>脚本语言</h2><ul>
<li>常用的脚本语言有 sh、bash、csh、ksh、perl、python；</li>
<li>在 Linux 下常用的脚本语言其实就是 bash、sh；</li>
<li>脚本语言一般在嵌入式中应用，主要是用来做配置。（一个复杂的嵌入式程序都是可配置的，配置过程就是用脚本语言来实现的）自然不会使用过于复杂的脚本语言特性，因此只需要针对性的学习即可。</li>
</ul>
<h2 id="shell-脚本的运行机制"><a href="#shell-脚本的运行机制" class="headerlink" title="shell 脚本的运行机制"></a>shell 脚本的运行机制</h2><ul>
<li>C/C++ 语言这种编写过程是：编写出源代码（源代码是不能直接运行的）然后编译链接形成可执行二进制程序，然后才能运行；而脚本程序不同，脚本程序编写好后源代码即可直接运行（没有编译链接过程）；</li>
<li>shell 程序是解释运行的，所谓解释运行就是说当我们执行一个 shell 程序时，shell 解析器会逐行的解释 shell 程序代码，然后一行一行的去运行。（顺序结构）</li>
<li>CPU 实际只认识二进制代码，根本不认识源代码。脚本程序源代码其实也不是二进制代码，CPU 也不认识，也不能直接执行。只不过脚本程序的编译链接过程不是以脚本程序源代码为单位进行的，而是在脚本运行过程中逐行的解释执行时才去完成脚本程序源代码转成二进制的过程（不一定是编译链接，因为这行脚本程序可能早就编译连接好了，这里我们只是调用它）。</li>
</ul>
<h2 id="动手写第一个-shell"><a href="#动手写第一个-shell" class="headerlink" title="动手写第一个 shell"></a>动手写第一个 shell</h2><h3 id="编辑器与编译器"><a href="#编辑器与编译器" class="headerlink" title="编辑器与编译器"></a>编辑器与编译器</h3><ul>
<li>shell 程序是文本格式的，只要是文本编辑器都可以。但是因为我们的 shell 是要在 Linux 系统下运行的，所以换行符必须是<code>\n</code>，而 Windows 下的换行符是<code>\r\n</code>，因此 Windows 中的编辑器写的 shell 不能在 Linux 下运行。</li>
<li>编译器不涉及，因为 shell 是解释性语言，直接编辑完就可以运行。</li>
</ul>
<h3 id="shell-程序运行的运行的三种方法"><a href="#shell-程序运行的运行的三种方法" class="headerlink" title="shell 程序运行的运行的三种方法"></a>shell 程序运行的运行的三种方法</h3><ul>
<li><code>./xx.sh</code>，和运行二进制可执行程序方法一样。这样运行 shell 要求 shell 程序必须具有可执行权限。<code>chmod a+x xx.sh</code> 来添加可执行权限。</li>
<li><code>source xx.sh</code>，<code>source</code> 是 Linux 的一个命令，这个命令就是用来执行脚本程序的。这样运行不需要脚本具有可执行权限。</li>
<li><code>bash xx.sh</code>，<code>bash</code> 是一个脚本程序解释器，本质上是一个可执行程序。这样执行相当于我们执行了 <code>bash</code> 程序，然后把 <code>xx.sh</code> 作为 <code>argv[1]</code> 传给他运行。</li>
</ul>
<h3 id="hello-world-程序和解释"><a href="#hello-world-程序和解释" class="headerlink" title="hello world 程序和解释"></a>hello world 程序和解释</h3><ul>
<li>shell 程序的第一行一般都是以<code>#!/bin/sh</code>开始，这行话的意思就是指定 shell 程序执行时被哪个解释器解释执行。所以我们这里写上<code>/bin/sh</code>意思就是这个<code>shell</code>将来被当前机器中<code>/bin</code>目录下的<code>sh</code>可执行程序执行。可以将第一行写为<code>#!/bin/bash</code>来指定使用<code>bash</code>执行该脚本。</li>
<li>脚本中的注释使用<code>#</code>，<code>#</code>开头的行是注释行。如果有多行需要注释，每行前面都要加<code>#</code>。（<code>#</code>就相当于是 C 语言中的<code>//</code>）;</li>
<li>shell 程序的正文，由很多行 shell 语句构成。</li>
</ul>
<h2 id="shell-语法"><a href="#shell-语法" class="headerlink" title="shell 语法"></a>shell 语法</h2><p>shell 就是把以前命令行中键入执行的命令写成了程序。shell 其实就是为了避免反复的在命令行下手工输入而发明的一种把手工输入步骤记录下来，然后通过执行 shell 脚本程序就能再次复述原来记录的手工输入过程的一种技术。</p>
<h3 id="shell-中的变量定义和引用"><a href="#shell-中的变量定义和引用" class="headerlink" title="shell 中的变量定义和引用"></a>shell 中的变量定义和引用</h3><ul>
<li>变量定义和初始化。shell 是弱类型语言（语言中的变量如果有明确的类型则属于强类型语言；变量没有明确类型就是弱类型语言），和 C 语言不同。在 shell 编程中定义变量不需要制定类型，也没有类型这个概念。</li>
<li>变量定义时可以初始化，使用<code>=</code>进行初始化赋值。在 shell 中赋值的=两边是不能有空格的。<br>注意：shell 对语法非常在意，非常严格。很多地方空格都是必须没有或者必须有，而且不能随意有没有空格。</li>
<li>变量赋值，变量定义后可以再次赋值，新的赋值会覆盖老的赋值。shell 中并不刻意区分变量的定义和赋值，反正每个变量就是一个符号，这个符号的值就是最后一个给他赋值时的值。</li>
<li>变量引用。shell 中引用一个变量必须使用<code>$</code>符号，<code>$</code>符号就是变量解引用符号。</li>
</ul>
<p>注意：<code>$</code>符号后面跟一个字符串，这个字符串就会被当作变量去解析。如果这个字符串本身没有定义，执行时并不会报错，而是把这个变量解析为空。也就是说在 shell 中没有被定义的变量其实就相当于是一个定义并赋值为空的变量。</p>
<p>注意：变量引用的时候可以<code>$var</code>，也可以<code>$&#123;var&#125;</code>。这两种的区别是在某些情况下只能用<code>$&#123;var&#125;</code>而不能简单的<code>$var</code>。</p>
<h3 id="shell-中无引用、单引号和双引号的区别"><a href="#shell-中无引用、单引号和双引号的区别" class="headerlink" title="shell 中无引用、单引号和双引号的区别"></a>shell 中无引用、单引号和双引号的区别</h3><ul>
<li>shell 中使用字符串可以不加双引号，直接使用。而且有空格时也可以，但是缺陷是不能输出<code>&quot;</code>或者其他转义字符。</li>
<li>shell 中也可以使用单引号来表示字符串，也是直接使用的，不能输出转义字符。</li>
<li>单引号中：完全字面替换（不可包含单引号本身）</li>
<li>双引号中：<ul>
<li><code>$</code>加变量名可以取变量的值</li>
<li>反引号仍表示命令替换</li>
<li><code>\$</code>表示<code>$</code>的字面值（输出$符号）</li>
<li>`表示`的字面值</li>
<li><code>\&quot;</code>表示<code>&quot;</code>的字面值</li>
<li><code>\\</code>表示<code>\</code>的字面值</li>
</ul>
</li>
</ul>
<p>除以上情况之外，在其它字符前面的\无特殊含义，只表示字面值。</p>
<p>单引号会原样输出，双引号可以调用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PATH_A=<span class="string">&quot;`pwd`/include&quot;</span></span><br><span class="line">PATH_B=<span class="string">&#x27;`pwd`/include&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH_A</span></span><br><span class="line"><span class="comment"># /home/a/b/include</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH_B</span></span><br><span class="line"><span class="comment"># `pwd`/include</span></span><br></pre></td></tr></table></figure>

<h3 id="shell-中调用-Linux-命令"><a href="#shell-中调用-Linux-命令" class="headerlink" title="shell 中调用 Linux 命令"></a>shell 中调用 Linux 命令</h3><ul>
<li>直接执行</li>
<li>反引号括起来执行。有时候我们在 shell 中调用 Linux 命令是为了得到这个命令的返回值（结果值），这时候就适合用一对反引号 (键盘上 ESC 按键下面的那个按键，和<code>~</code>在一个按键上) 来调用执行命令。</li>
</ul>
<h3 id="shell-中的选择分支结构"><a href="#shell-中的选择分支结构" class="headerlink" title="shell 中的选择分支结构"></a>shell 中的选择分支结构</h3><ul>
<li>shell 的 <code>if</code> 语言用法很多，在此只介绍常用的，其他感兴趣可以自己去学</li>
</ul>
<p>典型<code>if</code>语言格式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 表达式 ]; <span class="keyword">then</span></span><br><span class="line">  xxx</span><br><span class="line">  yyy</span><br><span class="line">  zzz</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  xxx</span><br><span class="line">  ddd</span><br><span class="line">  uuu</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="if-的典型应用"><a href="#if-的典型应用" class="headerlink" title="if 的典型应用"></a>if 的典型应用</h4><ul>
<li><p><code>-f</code>判断文件是否存在，注意<code>[]</code>里面<strong>前后都有空格</strong>，不能省略</p>
</li>
<li><p><code>-d</code>判断目录是否存在</p>
</li>
<li><p><code>&quot;str1&quot; = &quot;str2&quot;</code>判断字符串是否相等，注意<strong>用一个等号而不是两个</strong></p>
</li>
<li><p>判断数字是否相等</p>
<ul>
<li><code>-eq</code>等于</li>
<li><code>-gt</code>大于</li>
<li><code>-lt</code>小于</li>
<li><code>-ge</code>大于等于</li>
<li><code>-le</code>小于等于</li>
</ul>
</li>
<li><p><code>-z</code>判断字符串是否为空，注意<code>-z</code>判断时如果变量本身没定义也是不成立（也就是说-z 认为没定义不等于为空）</p>
</li>
<li><p><code>-o</code>表示逻辑或，连接两个表达式</p>
<ul>
<li><code>if [ 10 -eq 10 -o  ]; then</code></li>
</ul>
</li>
<li><p><code>&amp;&amp;</code> <code>||</code>表示逻辑与和逻辑或</p>
</li>
</ul>
<h3 id="shell-中的循环结构"><a href="#shell-中的循环结构" class="headerlink" title="shell 中的循环结构"></a>shell 中的循环结构</h3><p><code>for</code> 循环，要求能看懂、能改即可。不要求能够完全不参考写出来。因为毕竟嵌入式并不需要完全重新手写。</p>
<p><code>while</code> 循环，和 C 语言的循环在逻辑上无差别，要注意很多格式要求，譬如：<code>while</code> 后面的 <code>[]</code> 两边都有空格，<code>[]</code> 后面有分号（如果 do 放在一行的话），<code>i++</code>的写法中有两层括号。</p>
<h3 id="echo-的创建和追加输入文件"><a href="#echo-的创建和追加输入文件" class="headerlink" title="echo 的创建和追加输入文件"></a>echo 的创建和追加输入文件</h3><ul>
<li>在 shell 中可以直接使用 <code>echo</code> 指令新建一个文件，并且将一些内容传入这个文件中。创建文件并输入内容的关键就是<code>&gt;</code>。</li>
<li>还可以使用 <code>echo</code> 指令配合追加符号<code>&gt;&gt;</code> 向一个已经存在的文件末尾追加输入内容。</li>
</ul>
<h3 id="shell-中其他值得关注的知识点"><a href="#shell-中其他值得关注的知识点" class="headerlink" title="shell 中其他值得关注的知识点"></a>shell 中其他值得关注的知识点</h3><h4 id="case-语句"><a href="#case-语句" class="headerlink" title="case 语句"></a>case 语句</h4><ul>
<li>shell 中的 case 语句和 C 语言中的 switch case 语句作用一样，格式有差异</li>
<li>shell 中的 case 语句天生没有 <code>break</code>，也不需要<code>break</code>，和 C 语言中的 switch case 不同。shell 中的 case 默认就是匹配上哪个执行哪个，不会说执行完了还去执行后面的其他 case</li>
</ul>
<h4 id="调用-shell-程序的传参"><a href="#调用-shell-程序的传参" class="headerlink" title="调用 shell 程序的传参"></a>调用 shell 程序的传参</h4><ul>
<li>C 语言中可以通过 <code>main</code> 函数的 <code>argc</code> 和 <code>argv</code> 给程序传参</li>
<li>shell 程序本身也可以在调用时传参给他。在 shell 程序内部使用传参也是使用的一些特定符号来表示的，包括：<ul>
<li><code>$#</code>表示调用该 shell 时传参的个数。（<code>$#</code>计数时只考虑真正的参数个数）</li>
<li><code>$0、$1、$2·····</code>则依次表示传参的各个参数</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./a.out aa bb cc     </span><br><span class="line"></span><br><span class="line"><span class="comment"># argc = 4</span></span><br><span class="line"><span class="comment"># argv[0] = ./a.out</span></span><br><span class="line"><span class="comment"># argv[1] 是第一个有效参数····</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> a.sh aa bb cc  </span><br><span class="line"><span class="comment"># $# = 3</span></span><br><span class="line"><span class="comment"># $0是执行这个 shell 程序的解析程序的名字</span></span><br><span class="line"><span class="comment"># $1是第一个有效参数的值</span></span><br><span class="line"><span class="comment"># $2是第 2 个有效参数的值·····</span></span><br></pre></td></tr></table></figure>

<h4 id="while-循环和-case-语言和传参结合"><a href="#while-循环和-case-语言和传参结合" class="headerlink" title="while 循环和 case 语言和传参结合"></a>while 循环和 case 语言和传参结合</h4><ul>
<li>shell 中的 <code>break</code> 关键字和 <code>C</code> 语言中意义相同（都是跳出）但是用法不同。因为 shell 中 <code>case</code> 语句默认不用 <code>break</code> 的，因此在 <code>shell</code> 中 <code>break</code> 只用于循环跳出。所以当 <code>while</code> 中内嵌 <code>case</code> 语句时，<code>case</code> 中的 <code>break</code> 是跳出外层的 <code>while</code> 循环的，不是用来跳出 <code>case</code> 语句的。</li>
<li>shell 中的<code>$# $1</code>等内置变量的值是可以被改变，被 <code>shift</code> 指令改变。<code>shift</code> 指令有点像左移运算符，把我们给 shell 程序的传参左移了一个移出去了，原来的<code>$2</code>变成了新的<code>$1</code>，原来的<code>$#</code>少了 1 个。</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/09/25/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-chattr%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E5%B1%9E%E6%80%A7%E9%98%B2%E6%AD%A2%E8%AF%AF%E5%88%A0%E9%99%A4/" itemprop="url">每天学命令-chattr 修改文件与目录属性防止误删除</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-25T03:20:35.000Z" itemprop="datePublished">9月 25 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="../../categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/">每天学命令</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            6 分钟 读完 (约 834 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="使用背景"><a href="#使用背景" class="headerlink" title="使用背景"></a>使用背景</h2><p><code>chattr</code>命令可以修改 Linux 的文件属性，在类 Unix 等发行版中，该命令能够有效防止文件和目录被意外的删除或修改。文件在 Linux 中被描述为一个数据结构，<code>chattr</code> 命令在大多数现代 Linux 操作系统中是可用的，可以修改文件属性，一旦定义文件的隐藏属性，那么<strong>该文件的拥有者和 root 用户也无权操作该文件</strong>，只能解除文件的隐藏属性。这就可以有效的避免被误删除。</p>
<h2 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h2><p>一个完整的命令一般由命令 (chattr)，可选项 (option)，操作符 (operator) 与属性 (attribute) 组成：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">chattr [option] [operator] [attribute]  file<br></code></pre></td></tr></table></figure>

<p>[option] 可选项：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">-R， 递归更改目录及其内容的属性。<br>-V， 详细说明chattr的输出并打印程序版本。<br>-f， 隐藏大多数错误消息。<br></code></pre></td></tr></table></figure>

<p>[operator] 操作符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">+，追加指定属性到文件已存在属性中<br>-， 删除指定属性<br>=，直接设置文件属性为指定属性<br></code></pre></td></tr></table></figure>

<p>[attribute] 属性如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">a， 只能向文件中添加数据<br>A，不更新文件或目录的最后访问时间<br>i， 文件或目录不可改变<br></code></pre></td></tr></table></figure>

<h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><h3 id="lsattr-命令检查文件已有属性"><a href="#lsattr-命令检查文件已有属性" class="headerlink" title="lsattr 命令检查文件已有属性"></a>lsattr 命令检查文件已有属性</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">-d：如果目标是目录，只会列出目录本身的隐藏属性，而不会列出所含文件或子目录的隐藏属性信息<br>-R：作用于目录时，会显示所有的子目录和文件的隐藏信息<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ lsattr clash<br>--------------e------- clash/glados.yaml<br>--------------e------- clash/clash-linux-386-v1.10.0<br>--------------e------- clash/Country.mmdb<br>--------------e------- clash/cache.db<br>--------------e------- clash/clash-linux-amd64-v1.10.0<br>--------------e------- clash/dashboard<br>$ lsattr -d clash<br>--------------e------- clash<br><br>$ lsattr -R clash<br>--------------e------- clash/glados.yaml<br>--------------e------- clash/clash-linux-386-v1.10.0<br>--------------e------- clash/Country.mmdb<br>--------------e------- clash/cache.db<br>--------------e------- clash/clash-linux-amd64-v1.10.0<br>--------------e------- clash/dashboard<br><br>clash/dashboard:<br>--------------e------- clash/dashboard/manifest.webmanifest<br>--------------e------- clash/dashboard/assets<br><br>clash/dashboard/assets:<br>--------------e------- clash/dashboard/assets/logo.b453e72f.png<br>--------------e------- clash/dashboard/assets/index.408383.js<br>--------------e------- clash/dashboard/assets/index.966f8a.css<br>--------------e------- clash/dashboard/assets/vendor.ca5569.js<br><br>--------------e------- clash/dashboard/sw.js<br>--------------e------- clash/dashboard/workbox-7ce28d.js<br>--------------e------- clash/dashboard/index.html<br></code></pre></td></tr></table></figure>

<h3 id="禁止对文件test-md重命名，移动或删除，也不能修改其内容"><a href="#禁止对文件test-md重命名，移动或删除，也不能修改其内容" class="headerlink" title="禁止对文件test.md重命名，移动或删除，也不能修改其内容"></a>禁止对文件<code>test.md</code>重命名，移动或删除，也不能修改其内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo chattr +i test.md<br></code></pre></td></tr></table></figure>

<p>尝试修改该文件，将会被拒绝：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ rm -f ./test.md<br>rm: cannot remove <span class="hljs-string">&#x27;./test.md&#x27;</span>: Operation not permitted<br><br>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Hello World!&#x27;</span> &gt; test.md<br>bash: ./test.md: Operation not permitted<br><br>$ mv ./test.md ./fileDir<br>mv: cannot move <span class="hljs-string">&#x27;./test.md&#x27;</span> to <span class="hljs-string">&#x27;./fileDir/test.md&#x27;</span>: Operation not permitted<br></code></pre></td></tr></table></figure>

<h3 id="禁止修改文件夹fileDir及文件夹中的数据"><a href="#禁止修改文件夹fileDir及文件夹中的数据" class="headerlink" title="禁止修改文件夹fileDir及文件夹中的数据"></a>禁止修改文件夹<code>fileDir</code>及文件夹中的数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkdir ./fileDir &amp;&amp; touch ./fileDir/test.md<br>sudo chattr +i -R ./fileDir<br></code></pre></td></tr></table></figure>

<p>尝试修改文件夹中的内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ rm -rf ./fileDir<br>rm: cannot remove <span class="hljs-string">&#x27;./fileDir/test.md&#x27;</span>: Operation not permitted<br></code></pre></td></tr></table></figure>

<h3 id="允许向文件添加内容，禁止修改或删除内容，禁止移动文件"><a href="#允许向文件添加内容，禁止修改或删除内容，禁止移动文件" class="headerlink" title="允许向文件添加内容，禁止修改或删除内容，禁止移动文件"></a>允许向文件添加内容，禁止修改或删除内容，禁止移动文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ sudo chattr +a ./test.md<br>$ lsattr ./test.md<br>-----a--------e--- ./test.md<br><br>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello World!&quot;</span> &gt;&gt; ./test.md   <span class="hljs-comment"># 追加内容 OK</span><br>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello&quot;</span>&gt; ./test.md            <span class="hljs-comment"># 修改内容 NO</span><br>bash: ./test.md: Operation not permitted<br></code></pre></td></tr></table></figure>

<h3 id="只允许在目录fileDir中建立和修改文件，但是禁止删除、移动文件"><a href="#只允许在目录fileDir中建立和修改文件，但是禁止删除、移动文件" class="headerlink" title="只允许在目录fileDir中建立和修改文件，但是禁止删除、移动文件"></a>只允许在目录<code>fileDir</code>中建立和修改文件，但是禁止删除、移动文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo chattr +a ./fileDir<br></code></pre></td></tr></table></figure>

<h3 id="取消某个属性"><a href="#取消某个属性" class="headerlink" title="取消某个属性"></a>取消某个属性</h3><p>使用<code>-</code>操作符即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 先给文件添加属性a</span><br>$ sudo chattr +a ./test.md<br>$ lsattr ./test.md<br>-----a--------e--- ./test.md<br><br><span class="hljs-comment"># 取消属性a</span><br>$ sudo chattr -a ./test.md<br>$ lsattr ./test.md<br>--------------e--- ./test.md<br></code></pre></td></tr></table></figure>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/09/24/%E8%A7%A3%E5%86%B3Pandoc%E5%B0%86MD%E8%BD%AC%E6%8D%A2%E4%B8%BAPDF%E6%97%B6%E6%8A%A5%E9%94%99-error-tightlist/" itemprop="url">解决 Pandoc 将 MD 转换为 PDF 时报错 (error)\tightlist</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-24T09:27:00.000Z" itemprop="datePublished">9月 24 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="../../categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">Bug 踩坑记录</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            1 分钟 读完 (约 165 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>使用 Pandoc 将<code>test.md</code>转换位 PDF 时，出现如下错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">! Undefined control sequence.<br>&lt;recently <span class="hljs-built_in">read</span>&gt; \tightlist <br><br>l.213 \end&#123;frame&#125;<br><br>pandoc: Error producing PDF from TeX <span class="hljs-built_in">source</span><br>make: *** [test.pdf] Error 43<br></code></pre></td></tr></table></figure>

<p>这是因为在 Markdown 文件中使用<code>-</code>表示无序列表，被转化成了<code>\tightlist</code>但是 Pandoc 版本太老，不支持这个命令。（严格来说是 Pandoc 没有处理这个 LaTeX 命令，不是不支持，因为这是 LaTeX 命令和 Pandoc 没关系）。</p>
<p>有两种方式解决，一是升级 Pandoc 版本，二是将处理<code>\tightlist</code>的命令加到自己使用的模板中。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs TeX"><span class="hljs-keyword">\providecommand</span>&#123;<span class="hljs-keyword">\tightlist</span>&#125;&#123;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\itemsep</span>&#125;&#123;0pt&#125;<span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\parskip</span>&#125;&#123;0pt&#125;&#125;<br></code></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs TeX"><span class="hljs-keyword">\def</span><span class="hljs-keyword">\tightlist</span>&#123;&#125;<br></code></pre></td></tr></table></figure>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/09/24/Markdown%E8%AF%AD%E6%B3%95%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/" itemprop="url">Markdown 语法简明教程</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-24T07:05:12.000Z" itemprop="datePublished">9月 24 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            20 分钟 读完 (约 3002 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h1 id="Markdown-简介"><a href="#Markdown-简介" class="headerlink" title="Markdown 简介"></a>Markdown 简介</h1><h2 id="Markdown-是什么？"><a href="#Markdown-是什么？" class="headerlink" title="Markdown 是什么？"></a>Markdown 是什么？</h2><p><strong>Markdown</strong>是一种轻量级<strong>标记语言</strong>，它以纯文本形式 (<em>易读、易写、易更改</em>) 编写文档，并最终以 HTML 格式发布。</p>
<p><strong>Markdown</strong>也可以理解为将以 Markdown 语法编写的语言转换成 HTML 内容的工具。</p>
<h2 id="谁创造了它？"><a href="#谁创造了它？" class="headerlink" title="谁创造了它？"></a>谁创造了它？</h2><p>它由<a target="_blank" rel="noopener" href="http://www.aaronsw.com/"><strong>Aaron Swartz</strong></a>和<strong>John</strong>共同设计，<strong>Aaron Swartz</strong>就是那位于去年（<em>2013 年 1 月 11 日</em>）自杀，有着<strong>开挂</strong>一般人生经历的程序员。维基百科对他的<a target="_blank" rel="noopener" href="http://zh.wikipedia.org/wiki/%E4%BA%9A%E4%BC%A6%C2%B7%E6%96%AF%E6%B2%83%E8%8C%A8">介绍</a>是：<strong>软件工程师、作家、政治组织者、互联网活动家、维基百科人</strong>。</p>
<ul>
<li><strong>14 岁</strong>参与 RSS 1.0 规格标准的制订。</li>
<li><strong>2004</strong>年入读<strong>斯坦福</strong>，之后退学。</li>
<li><strong>2005</strong>年创建<a target="_blank" rel="noopener" href="http://infogami.org/">Infogami</a>，之后与<a target="_blank" rel="noopener" href="http://www.reddit.com/">Reddit</a>合并成为其合伙人。</li>
<li><strong>2010</strong>年创立求进会（Demand Progress），积极参与禁止网络盗版法案（SOPA）活动，最终该提案被撤回。</li>
<li><strong>2011</strong>年 7 月 19 日，因被控从 MIT 和 JSTOR 下载 480 万篇学术论文并以免费形式上传于网络被捕。</li>
<li><strong>2013</strong>年 1 月自杀身亡。</li>
</ul>
<h2 id="为什么要使用它？"><a href="#为什么要使用它？" class="headerlink" title="为什么要使用它？"></a>为什么要使用它？</h2><ul>
<li>它是易读（看起来舒服）、易写（语法简单）、易更改<strong>纯文本</strong>。处处体现着<strong>极简主义</strong>的影子。</li>
<li>兼容 HTML，可以转换为 HTML 格式发布。</li>
<li>跨平台使用。</li>
<li>越来越多的网站支持 Markdown。</li>
<li>更方便清晰地组织你的电子邮件。（Markdown-here, Airmail）</li>
<li>摆脱 Word</li>
</ul>
<h2 id="怎么使用？"><a href="#怎么使用？" class="headerlink" title="怎么使用？"></a>怎么使用？</h2><p>如果不算<strong>扩展</strong>，Markdown 的语法绝对<strong>简单</strong>到让你爱不释手。</p>
<p>Markdown 语法主要分为如下几大部分：</p>
<p><strong>标题</strong>，<strong>段落</strong>，<strong>区块引用</strong>，<strong>代码区块</strong>，<strong>强调</strong>，<strong>列表</strong>，<strong>分割线</strong>，<strong>链接</strong>，<strong>图片</strong>，**反斜杠 <code>\</code><strong>，</strong>符号’`’**。</p>
<h2 id="谁在用？"><a href="#谁在用？" class="headerlink" title="谁在用？"></a>谁在用？</h2><p>Markdown 的使用者：</p>
<ul>
<li>GitHub</li>
<li>简书</li>
<li>Stack Overflow</li>
<li>Apollo</li>
<li>Moodle</li>
<li>Reddit</li>
<li>等等</li>
</ul>
<h1 id="语法介绍"><a href="#语法介绍" class="headerlink" title="语法介绍"></a>语法介绍</h1><h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><p>两种形式：  </p>
<ol>
<li><p>使用<code>=</code>和<code>-</code>标记一级和二级标题。</p>
<blockquote>
<p>一级标题<br><code>=========</code><br>二级标题<br><code>---------</code></p>
</blockquote>
</li>
<li><p>使用<code>#</code>，可表示 1-6 级标题。</p>
<blockquote>
<p># 一级标题<br>## 二级标题<br>### 三级标题<br>#### 四级标题<br>##### 五级标题<br>###### 六级标题</p>
</blockquote>
</li>
</ol>
<h2 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h2><p>段落的前后要有空行，所谓的空行是指没有文字内容。若想在段内强制换行的方式是使用<strong>两个以上</strong>空格加上回车（引用中换行省略回车）。</p>
<h2 id="区块引用"><a href="#区块引用" class="headerlink" title="区块引用"></a>区块引用</h2><p>区块引用需要在被引用的文本前加上 <code>&gt;</code> 符号。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-quote">&gt; 这是一个区块引用实例，</span><br><br><span class="hljs-quote">&gt; Markdown.</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>这是一个区块引用实例，</p>
</blockquote>
<blockquote>
<p>Markdown.</p>
</blockquote>
<p>Markdown 也允许你偷懒只在整个段落的第一行最前面加上 <code>&gt;</code> :</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-quote">&gt; 平生不会相思，</span><br>才会相思，<br>便害相思。<br><br><span class="hljs-quote">&gt; 空一缕余香在此，</span><br>盼千金游子何之。<br></code></pre></td></tr></table></figure>

<blockquote>
<p>平生不会相思，<br>才会相思，<br>便害相思。</p>
</blockquote>
<blockquote>
<p>空一缕余香在此，<br>盼千金游子何之。</p>
</blockquote>
<h3 id="引用的多层嵌套"><a href="#引用的多层嵌套" class="headerlink" title="引用的多层嵌套"></a>引用的多层嵌套</h3><p>区块引用可以嵌套（例如：引用内的引用）, 只要根据层次加上不同数量的 <code>&gt;</code> :</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">&gt;&gt;&gt; 锄禾日当午，汗滴禾下土。 - 李绅<br><br>&gt;&gt; 山有木兮木有枝，心悦君兮君不知。 - 越人歌<br><br><span class="hljs-quote">&gt; 去年今日此门中，人面桃花相映红。 - 崔护</span><br></code></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<blockquote>
<p>锄禾日当午，汗滴禾下土。 - 李绅</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>山有木兮木有枝，心悦君兮君不知。 - 越人歌</p>
</blockquote>
</blockquote>
<blockquote>
<p>去年今日此门中，人面桃花相映红。 - 题都城南庄</p>
</blockquote>
<h2 id="锚点"><a href="#锚点" class="headerlink" title="锚点"></a>锚点</h2><p>网页中，锚点其实就是页内超链接，也就是链接本文档内部的某些元素，实现当前页面中的跳转。比如我这里写下一个锚点，点击跳转到指定章节。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">[<span class="hljs-string">点击跳转至区块引用</span>](<span class="hljs-link">#区块引用</span>)<br></code></pre></td></tr></table></figure>

<p><a href="#%E5%8C%BA%E5%9D%97%E5%BC%95%E7%94%A8">点击跳转至区块引用</a></p>
<h2 id="代码区块"><a href="#代码区块" class="headerlink" title="代码区块"></a>代码区块</h2><p>代码区块的建立是在每行加上 4 个空格或者一个制表符（如同写代码一样）。如<br>普通段落：</p>
<p>void main()<br>{<br>    printf(“Hello, Markdown.”);<br>}</p>
<p>代码区块：</p>
<pre><code class="hljs">void main()
&#123;
    printf(&quot;Hello, Markdown.&quot;);
&#125;
</code></pre>
<p><strong>注意</strong>:需要和普通段落之间存在空行。</p>
<h2 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h2><p>Markdown 使用星号<code>*</code>和底线<code>_</code>作为标记强调字词的符号。</p>
<h3 id="斜体"><a href="#斜体" class="headerlink" title="斜体"></a>斜体</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-emphasis">*花自飘零水自流*</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p><em>花自飘零水自流</em></p>
</blockquote>
<h3 id="粗体"><a href="#粗体" class="headerlink" title="粗体"></a>粗体</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-strong">**花自飘零水自流**</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>花自飘零水自流</strong></p>
</blockquote>
<h3 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">~~花自飘零水自流~~<br></code></pre></td></tr></table></figure>

<blockquote>
<p><del>花自飘零水自流</del></p>
</blockquote>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>使用<code>·</code>、<code>+</code>、或<code>-</code>标记无序列表，如：</p>
<blockquote>
<p>-（+*）第一项<br>-（+*）第二项<br>- （+*）第三项</p>
</blockquote>
<p><strong>注意</strong>：标记后面最少有一个_空格_或_制表符_。若不在引用区块中，必须和前方段落之间存在空行。</p>
<p>效果：</p>
<blockquote>
<ul>
<li>第一项</li>
<li>第二项</li>
<li>第三项</li>
</ul>
</blockquote>
<p>有序列表的标记方式是将上述的符号换成数字，并辅以<code>.</code>，如：</p>
<blockquote>
<p>1 . 第一项<br>2 . 第二项<br>3 . 第三项</p>
</blockquote>
<p>效果：</p>
<blockquote>
<ol>
<li>第一项</li>
<li>第二项</li>
<li>第三项</li>
</ol>
</blockquote>
<h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><p>分割线最常使用就是三个或以上<code>*</code>，还可以使用<code>-</code>和<code>_</code>。</p>
<hr>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p>Markdown 支持两种形式的链接语法：行内式和参考式两种形式，行内式一般使用较多。</p>
<h3 id="行内式"><a href="#行内式" class="headerlink" title="行内式"></a>行内式</h3><p><code>[]</code>里写链接文字，<code>()</code>里写链接地址，<code>()</code>中的 <code>&quot;&quot;</code> 中可以为链接指定 title 属性，title 属性可加可不加。title 属性的效果是鼠标悬停在链接上会出现指定的 title 文字。<code>[链接文字](链接地址 &quot;链接标题&quot;)</code> 这样的形式。链接地址与链接标题前有一个空格。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">[<span class="hljs-string">MPPL: Markdown to PDF with Pandoc via Latex</span>](<span class="hljs-link">https://github.com/Dunky-Z/MPPL</span>)<br>[<span class="hljs-string">MPPL: Markdown to PDF with Pandoc via Latex</span>](<span class="hljs-link">https://github.com/Dunky-Z/MPPL &quot;MPPL&quot;</span>)<br></code></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/Dunky-Z/MPPL">MPPL: Markdown to PDF with Pandoc via Latex</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Dunky-Z/MPPL" title="MPPL">MPPL: Markdown to PDF with Pandoc via Latex</a></p>
</blockquote>
<h3 id="参考式"><a href="#参考式" class="headerlink" title="参考式"></a>参考式</h3><p>参考式超链接一般用在学术论文上面，或者另一种情况，如果某一个链接在文章中多处使用，那么使用引用的方式创建链接将非常好，它可以让你对链接进行统一的管理。</p>
<p>参考式链接分为两部分，文中的写法 <code>[链接文字][链接标记]</code>，在文本的任意位置添加 <code>[链接标记]:链接地址 &quot;链接标题&quot;</code>, 链接地址与链接标题前有一个空格。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">全球最大的搜索引擎网站是 [<span class="hljs-string">Google</span>][<span class="hljs-symbol">1</span>]。<br><br>[<span class="hljs-symbol">1</span>]:<span class="hljs-link">http://www.google.com &quot;Google&quot;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>全球最大的搜索引擎网站是 <a target="_blank" rel="noopener" href="http://www.google.com/" title="Google">Google</a>。<br><br /></p>
</blockquote>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p>图片的创建方式与超链接相似，而且和超链接一样也有两种写法，行内式和参考式写法。</p>
<p>语法中图片 Alt 的意思是如果图片因为某些原因不能显示，就用定义的图片 Alt 文字来代替图片。图片 Title 则和链接中的 Title 一样，表示鼠标悬停与图片上时出现的文字。Alt 和 Title 都不是必须的，可以省略，但建议写上。</p>
<h3 id="图片行内式"><a href="#图片行内式" class="headerlink" title="图片行内式"></a>图片行内式</h3><p><code>![图片 Alt](图片地址 &quot;图片Title&quot;)</code></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">![](https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Markdown-mark.svg/2880px-Markdown-mark.svg.png)<br></code></pre></td></tr></table></figure>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Markdown-mark.svg/2880px-Markdown-mark.svg.png"></p>
<h3 id="图片参考式"><a href="#图片参考式" class="headerlink" title="图片参考式"></a>图片参考式</h3><p>在文档要插入图片的地方写 <code>![图片 Alt][标记]</code>。</p>
<p>在文档的最后写上 <code>[标记]:图片地址 &quot;Title&quot;</code>。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">![<span class="hljs-string">MarkdownLogo</span>][<span class="hljs-symbol">MarkdownLogo</span>]<br><br>[<span class="hljs-symbol">MarkdownLogo</span>]:<span class="hljs-link">../img/Markdown-mark.png &quot;MarkdownLogo&quot;</span><br></code></pre></td></tr></table></figure>

<h2 id="反斜杠"><a href="#反斜杠" class="headerlink" title="反斜杠\"></a>反斜杠<code>\</code></h2><p>相当于<strong>反转义</strong>作用。使符号成为普通符号。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>对于程序员来说这个功能是必不可少的，插入程序代码的方式有两种，一种是利用缩进 (Tab), 另一种是利用 “`” 符号 (一般在 ESC 键下方) 包裹代码。</p>
<ul>
<li>插入行内代码，即插入一个单词或者一句代码的情况，使用 `code` 这样的形式插入。</li>
<li>插入多行代码，可以使用缩进或者 ``` code ```, 具体看示例。</li>
</ul>
<h3 id="代码行内式"><a href="#代码行内式" class="headerlink" title="代码行内式"></a>代码行内式</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">PHP 打印堆栈信息 <span class="hljs-code">`debug_backtrace()`</span>。<br></code></pre></td></tr></table></figure>

<blockquote>
<p>PHP 打印堆栈信息 <code>debug_backtrace()</code>。</p>
</blockquote>
<h3 id="缩进式多行代码"><a href="#缩进式多行代码" class="headerlink" title="缩进式多行代码"></a>缩进式多行代码</h3><p>缩进 4 个空格或是 1 个制表符。</p>
<p>一个代码区块会一直持续到没有缩进的那一行 (或是文件结尾)。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">$closure = function () use($name) &#123;<br>  return $name;<br>&#125;<br></code></pre></td></tr></table></figure>

<pre><code class="hljs">$closure = function () use($name) &#123;
  return $name;
&#125;
</code></pre>
<h3 id="用六个-包裹多行代码"><a href="#用六个-包裹多行代码" class="headerlink" title="用六个 ` 包裹多行代码"></a>用六个 ` 包裹多行代码</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-quote">&gt; ```c # 为了能够在 Markdown 里演示，所以加了&gt;符号</span><br><span class="hljs-section">#include <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">stdio.h</span>&gt;</span></span></span><br>int main()<br>&#123;<br><span class="hljs-code">    printf(&quot;Hello, World!\n&quot;);</span><br><span class="hljs-code">    return 0;</span><br><span class="hljs-code">&#125;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br>```c<br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello, World!\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="内容目录"><a href="#内容目录" class="headerlink" title="内容目录"></a>内容目录</h3><p>在段落中填写 <code>[TOC]</code> 以显示全文内容的目录结构。</p>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><ol>
<li>不管是哪种方式, 第一行为表头, 第二行分隔表头和主体部分, 第三行开始每一行为一个表格行。</li>
<li>列于列之间用管道符<code>|</code>隔开。原生方式的表格每一行的两边也要有管道符。</li>
<li>第二行还可以为不同的列指定对齐方向。默认为左对齐, 在<code>-</code>右边加上<code>:</code>就右对齐。</li>
</ol>
<p>简单方式:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">诗名|作者|朝代<br>-|-|-<br>白头吟|卓文君|两汉<br>锦瑟|李商隐|唐代<br>登科后|孟郊|唐代<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>诗名</th>
<th>作者</th>
<th>朝代</th>
</tr>
</thead>
<tbody><tr>
<td>白头吟</td>
<td>卓文君</td>
<td>两汉</td>
</tr>
<tr>
<td>锦瑟</td>
<td>李商隐</td>
<td>唐代</td>
</tr>
<tr>
<td>登科后</td>
<td>孟郊</td>
<td>唐代</td>
</tr>
</tbody></table>
<p>原生方式:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">|诗名|作者|朝代|<br>|-|-|-|<br>|白头吟|卓文君|两汉|<br>|锦瑟|李商隐|唐代|<br>|登科后|孟郊|唐代|<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>诗名</th>
<th>作者</th>
<th>朝代</th>
</tr>
</thead>
<tbody><tr>
<td>白头吟</td>
<td>卓文君</td>
<td>两汉</td>
</tr>
<tr>
<td>锦瑟</td>
<td>李商隐</td>
<td>唐代</td>
</tr>
<tr>
<td>登科后</td>
<td>孟郊</td>
<td>唐代</td>
</tr>
</tbody></table>
<p>为表格第二列指定方向:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">诗名|名句<br>-|-:<br>梦微之|君埋泉下泥销骨。<br>上邪|上邪，我欲与君相知，长命无绝衰。<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>诗名</th>
<th align="right">名句</th>
</tr>
</thead>
<tbody><tr>
<td>梦微之</td>
<td align="right">君埋泉下泥销骨。</td>
</tr>
<tr>
<td>上邪</td>
<td align="right">上邪，我欲与君相知，长命无绝衰。</td>
</tr>
</tbody></table>
<h2 id="注脚"><a href="#注脚" class="headerlink" title="注脚"></a>注脚</h2><p>在需要添加注脚的文字后加上脚注名字<code>[^注脚名字]</code>, 称为加注。 然后在文本的任意位置(一般在最后)添加脚注, 脚注前必须有对应的脚注名字。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">使用 Markdown[^1] 可以效率的书写文档，直接转换成 HTML[^2]。<br><br>[<span class="hljs-symbol">^1</span>]: <span class="hljs-link">Markdown 是一种纯文本标记语言</span><br><br>[<span class="hljs-symbol">^2</span>]: <span class="hljs-link">HyperText Markup Language 超文本标记语言</span><br></code></pre></td></tr></table></figure>

<h2 id="LaTeX-公式"><a href="#LaTeX-公式" class="headerlink" title="LaTeX 公式"></a>LaTeX 公式</h2><h3 id="表示行内公式"><a href="#表示行内公式" class="headerlink" title="$ 表示行内公式"></a>$ 表示行内公式</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">质能守恒方程可以用一个很简洁的方程式 $E=mc^2$ 来表达。<br></code></pre></td></tr></table></figure>

<p>质能守恒方程可以用一个很简洁的方程式$E=mc^2$来表达。</p>
<h3 id="表示整行公式"><a href="#表示整行公式" class="headerlink" title="$$ 表示整行公式"></a>$$ 表示整行公式</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">$$\sum<span class="hljs-emphasis">_&#123;i=1&#125;^n a_</span>i=0$$<br>$$f(x<span class="hljs-emphasis">_1,x_</span>x,\ldots,x<span class="hljs-emphasis">_n) = x_</span>1^2 + x<span class="hljs-emphasis">_2^2 + \cdots + x_</span>n^2 $$<br>$$\sum^&#123;j-1&#125;<span class="hljs-emphasis">_&#123;k=0&#125;&#123;\widehat&#123;\gamma&#125;_</span>&#123;kj&#125; z<span class="hljs-emphasis">_k&#125;$$</span><br></code></pre></td></tr></table></figure>

<p>$$\sum_{i=1}^n a_i=0$$</p>
<h1 id="尝试一下"><a href="#尝试一下" class="headerlink" title="尝试一下"></a>尝试一下</h1><ul>
<li><strong>Chrome</strong>下的插件诸如<code>stackedit</code>与<code>markdown-here</code>等非常方便，也不用担心平台受限。</li>
<li><strong>在线</strong>的<a target="_blank" rel="noopener" href="https://www.zybuluo.com/mdeditor">Cmd Markdown 编辑阅读器 - 作业部落出品</a>。</li>
<li><strong>Windowns</strong>下的<a target="_blank" rel="noopener" href="https://typora.io/">Typora — a markdown editor, markdown reader</a>。</li>
<li><strong>Mac</strong>下的 Mou 是国人贡献的，口碑很好。</li>
<li><strong>Linux</strong>下的 ReText 不错。</li>
</ul>
<p><strong>当然，最终境界永远都是笔下是语法，心中格式化。</strong></p>
<hr>
<p><strong>注意</strong>：不同的 Markdown 解释器或工具对相应语法（扩展语法）的解释效果不尽相同，具体可参见工具的使用说明。<br>虽然有人想出面搞一个所谓的标准化的 Markdown，<a target="_blank" rel="noopener" href="http://blog.codinghorror.com/standard-markdown-is-now-common-markdown/">没想到还惹怒了健在的创始人 John Gruber</a>。</p>
<hr>
<p>以上基本是所有 traditonal Markdown 的语法。</p>
<p>关于其它扩展语法可参见具体工具的使用说明。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol>
<li><a target="_blank" rel="noopener" href="https://github.com/younghz/Markdown">Markdown 基本语法。</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cdoco/markdown-syntax">cdoco/markdown-syntax: Markdown 语法详解。</a></li>
</ol>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/09/24/Markdown%E8%A1%A8%E6%A0%BC%E7%AB%96%E7%BA%BF%E8%87%AA%E5%8A%A8%E5%AF%B9%E9%BD%90/" itemprop="url">Markdown 表格竖线自动对齐</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-24T07:01:41.000Z" itemprop="datePublished">9月 24 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="../../categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/">工欲善其事必先利其器</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            3 分钟 读完 (约 521 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="需求背景"><a href="#需求背景" class="headerlink" title="需求背景"></a>需求背景</h2><p>Markdown 中的表格，只要符合语法就能够正常渲染显示，但是符合语法但是 Markdown 源码却不一定易读。就如以下的这个表格，可以正常显示，但是源码在源文件中竖线不对齐，就阅读困难。</p>
<p>源码：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">|诗名|作者|朝代|<br>|-|-|-|<br>|白头吟|卓文君|两汉|<br>|锦瑟|李商隐|唐代|<br>|登科后|孟郊|唐代|<br></code></pre></td></tr></table></figure>

<p>显示效果：</p>
<table>
<thead>
<tr>
<th>诗名</th>
<th>作者</th>
<th>朝代</th>
</tr>
</thead>
<tbody><tr>
<td>白头吟</td>
<td>卓文君</td>
<td>两汉</td>
</tr>
<tr>
<td>锦瑟</td>
<td>李商隐</td>
<td>唐代</td>
</tr>
<tr>
<td>登科后</td>
<td>孟郊</td>
<td>唐代</td>
</tr>
</tbody></table>
<p>我们可以手动将其竖线对齐，如下这样就易读许多：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">| 诗名   | 作者   | 朝代 |<br>| ------ | ------ | ---- |<br>| 白头吟 | 卓文君 | 两汉 |<br>| 锦瑟   | 李商隐 | 唐代 |<br>| 登科后 | 孟郊   | 唐代 |<br></code></pre></td></tr></table></figure>

<p>显示效果保持一致。但是如果一个字符一个字符去手动对齐效率太低，也不符合 Markdown 设计初衷。这就用到了额外的插件，能够辅助我们完成这个工作。</p>
<h2 id="Markdown-All-in-One"><a href="#Markdown-All-in-One" class="headerlink" title="Markdown All in One"></a>Markdown All in One</h2><p>VSCode 插件中心搜索<code>Markdown All in One</code>安装。</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/24/fe35a13933da93bba8f234be209bb212.png"></p>
<p>安装完成后，使用时右击窗口选择<code>Format Document with</code>：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/24/285b770adf0f3b3faff57ee14caca45b.png"></p>
<p>选择<code>Markdown All in One</code>即可自动对齐所有表格竖线：</p>
<p><img src="https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/24/313d3b85a4e98be59acc85fc7337d30f.png"></p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="格式化文档后仍未对齐"><a href="#格式化文档后仍未对齐" class="headerlink" title="格式化文档后仍未对齐"></a>格式化文档后仍未对齐</h3><p>这是由于表格中同时有中英文，而中英文字体不等宽导致的。如果对阅读要求不高，可以不用管，实际上已经格式化完成了。如果需要对齐，那么可以查看<a href="http://lifeislife.cn/2022/08/27/%E7%BC%96%E7%A0%81%E5%AD%97%E4%BD%93%E4%B8%8E%E9%98%85%E8%AF%BB%E5%AD%97%E4%BD%93%E6%8E%A8%E8%8D%90/">编码字体与阅读字体推荐</a>这篇文章的<strong>中文等宽字体</strong>下载并安装，即可正常对齐。</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
    
        
<nav class="pagination is-centered is-rounded" role="navigation" aria-label="pagination">
    <div class="pagination-previous">
        <a href="../6/">上一页</a>
    </div>
    <div class="pagination-next">
        <a href="../8/">下一页</a>
    </div>
    <ul class="pagination-list is-hidden-mobile">
        
        <li><a class="pagination-link" href="../../">1</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="../6/">6</a></li>
        
        <li><a class="pagination-link is-current" href="">7</a></li>
        
        <li><a class="pagination-link" href="../8/">8</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="../26/">26</a></li>
        
    </ul>
</nav>
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2024 Dominic&nbsp;
                powered_by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>




<script src="../../js/script.js"></script>


    
</body>
</html>