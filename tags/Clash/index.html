<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>标签: Clash - 如云泊</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="">










<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="../../css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>



<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="atom.xml" title="如云泊" type="application/atom+xml">
</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="../../index.html">
                
                <img src="../../images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-end">
            
            
            
        </div>
    </div>
</nav>

    <section class="section section-heading">
    <div class="container">
        <div class="content">
            <h5>#Clash</h5>
        </div>
    </div>
</section>
<section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="../../2022/09/10/Linux%E4%B8%8B%E4%BD%BF%E7%94%A8Clash%E4%BD%9C%E4%BB%A3%E7%90%86%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/" itemprop="url">Linux 下使用 Clash 作代理并配置开机启动</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-10T02:03:25.000Z" itemprop="datePublished">9月 10 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="../../categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/">工欲善其事必先利其器</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            3 分钟 读完 (约 475 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><p>点击下载 <a target="_blank" rel="noopener" href="https://glados.rocks/tools/clash-linux.zip">Linux 版本的Clash</a>，下载完成后解压缩。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">unzip</span> clash-linux.zip
<span class="token function">sudo</span> <span class="token function">mv</span> clash-linux /usr/local/bin/clash
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/clash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="初步使用"><a href="#初步使用" class="headerlink" title="初步使用"></a>初步使用</h2><p>下载配置文件，配置文件一般由订阅商（机场）提供，是一个yaml文件，编写了代理服务器的信息，以及访问规则等。这是最关键的一步。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">clash-linux-amd64-v1.10.0 -f 从订阅商那获取的配置文件.ymal -d <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>可以尝试在Git clone 时使用代理，如果可以正常下载，说明代理配置成功。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/twbs/bootstrap.git --config <span class="token string">"http.proxy=127.0.0.1:7890"</span>  
<span class="token comment"># 即可正常下载</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h2><pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">cd ~
sudo cp &#x2F;usr&#x2F;local&#x2F;bin&#x2F;clash &#x2F;etc&#x2F;
sudo vim &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;clash.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>添加如下内容，并保存：</p>
<pre class="line-numbers language-YAML" data-language="YAML"><code class="language-YAML">[Unit]
Description&#x3D;Clash Daemon

[Service]
ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;clash -f &#x2F;etc&#x2F;clash&#x2F;订阅的配置文件.yaml -d &#x2F;etc&#x2F;clash&#x2F;
Restart&#x3D;on-failure

[Install]
WantedBy&#x3D;multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>启用 clash 服务</p>
<pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">sudo systemctl enable clash.service
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>启动 clash 服务</p>
<pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">sudo systemctl start clash.service
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>此外也可以停止或者禁用 clash 服务</p>
<pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">sudo systemctl stop clash.service
sudo systemctl disable clash.service
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>查看运行状态：</p>
<pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">sudo systemctl status clash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>查看 clash 服务日志</p>
<pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">journalctl -e -u clash.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="配置定期更新"><a href="#配置定期更新" class="headerlink" title="配置定期更新"></a>配置定期更新</h2><pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">crontab -e<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>添加如下内容：</p>
<pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">29 6    * * *   root    pgrep clash | xargs kill -s 9 
30 6    * * *   root    cp &#x2F;etc&#x2F;clash&#x2F;订阅的配置文件.yaml &#x2F;etc&#x2F;clash&#x2F;backup.yaml 
31 6    * * *   root    curl https:&#x2F;&#x2F;订阅链接.yaml &gt; &#x2F;etc&#x2F;clash&#x2F;订阅的配置文件.yaml
32 6    * * *   root    sudo systemctl start clash.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>重启cron服务</p>
<pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">sudo systemctl restart cron.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://github.com/ghostxu97/clash-for-linux">ghostxu97/clash-for-linux: Linux环境安装配置Clash工具，以实现代理上网效果。包含下载、安装、配置、运行、测试以及开机自启动、定期自动更新订阅功能的操作文档，希望对你有所帮助</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    
    </div>
    
    
</article>




    
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2024 Dominic&nbsp;
                powered_by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>




<script src="../../js/script.js"></script>


    
</body>
</html>