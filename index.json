[{"content":"é—®é¢˜èƒŒæ™¯ åœ¨ä½¿ç”¨é˜¿é‡Œäº‘è½»é‡æœåŠ¡å™¨æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªä»¤äººå¤´ç–¼çš„é—®é¢˜ï¼šé»˜è®¤é…ç½®æ²¡æœ‰ Swap äº¤æ¢ç©ºé—´ã€‚å½“è¿è¡Œå†…å­˜å ç”¨è¾ƒé«˜çš„åº”ç”¨ï¼ˆå¦‚ç¼–è¯‘é¡¹ç›®ã€è¿è¡Œ CI/CD æµç¨‹ã€éƒ¨ç½²åº”ç”¨ç­‰ï¼‰æ—¶ï¼ŒæœåŠ¡å™¨ç»å¸¸ä¼šå› ä¸ºå†…å­˜ä¸è¶³è€Œå¡æ­»æˆ–æ— å“åº”ã€‚\næˆ‘åœ¨æ¯æ¬¡æ‰§è¡Œ Deploy éƒ¨ç½²æ“ä½œæ—¶éƒ½ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæœºå™¨ç›´æ¥å¡æ­»ï¼Œæ— æ³•ç»§ç»­å·¥ä½œã€‚é€šè¿‡é…ç½® Swap äº¤æ¢ç©ºé—´ï¼ŒæˆåŠŸç¼“è§£äº†è¿™ä¸€é—®é¢˜ï¼Œç°åœ¨è¿è¡Œç¨³å®šå¤šäº†ã€‚\nä»€ä¹ˆæ˜¯ Swapï¼Ÿ Swapï¼ˆäº¤æ¢ç©ºé—´ï¼‰æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ç§è™šæ‹Ÿå†…å­˜æŠ€æœ¯ã€‚å½“ç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä¸è¶³æ—¶ï¼Œç³»ç»Ÿä¼šå°†æš‚æ—¶ä¸ç”¨çš„æ•°æ®ä»å†…å­˜è½¬ç§»åˆ°ç¡¬ç›˜ä¸Šçš„ Swap ç©ºé—´ï¼Œä»è€Œé‡Šæ”¾å†…å­˜ä¾›å…¶ä»–ç¨‹åºä½¿ç”¨ã€‚è™½ç„¶ Swap çš„è¯»å†™é€Ÿåº¦æ¯”ç‰©ç†å†…å­˜æ…¢ï¼Œä½†å®ƒå¯ä»¥æœ‰æ•ˆé˜²æ­¢ç³»ç»Ÿå› å†…å­˜ä¸è¶³è€Œå´©æºƒã€‚\né…ç½®æ­¥éª¤ 1. æ£€æŸ¥å½“å‰ Swap çŠ¶æ€ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç¡®è®¤ç³»ç»Ÿå½“å‰æ˜¯å¦å·²ç»é…ç½®äº† Swapï¼š\nfree -h swapon --show å¦‚æœ Swap è¡Œæ˜¾ç¤ºä¸º 0ï¼Œè¯´æ˜ç³»ç»Ÿæ²¡æœ‰é…ç½®äº¤æ¢ç©ºé—´ã€‚\n2. åˆ›å»º Swap æ–‡ä»¶ æ ¹æ®æœåŠ¡å™¨å†…å­˜å¤§å°ï¼Œå»ºè®®åˆ›å»ºä¸å†…å­˜å®¹é‡ç›¸ç­‰æˆ–ç¨å¤§çš„ Swap ç©ºé—´ã€‚ä»¥ 2GB å†…å­˜çš„æœåŠ¡å™¨ä¸ºä¾‹ï¼Œåˆ›å»º 2GB çš„ Swap æ–‡ä»¶ï¼š\n# æ–¹æ³•ä¸€ï¼šä½¿ç”¨ fallocate å¿«é€Ÿåˆ›å»ºï¼ˆæ¨èï¼‰ sudo fallocate -l 2G /swapfile # æ–¹æ³•äºŒï¼šå¦‚æœ fallocate å‘½ä»¤ä¸å¯ç”¨ï¼Œä½¿ç”¨ dd å‘½ä»¤ sudo dd if=/dev/zero of=/swapfile bs=1G count=2 è¯´æ˜ï¼š\n/swapfile æ˜¯ Swap æ–‡ä»¶çš„è·¯å¾„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ 2G è¡¨ç¤ºåˆ›å»º 2GB å¤§å°çš„æ–‡ä»¶ fallocate å‘½ä»¤é€Ÿåº¦æ›´å¿«ï¼Œä¼˜å…ˆä½¿ç”¨ 3. è®¾ç½®æ–‡ä»¶æƒé™ ä¸ºäº†å®‰å…¨ï¼ŒSwap æ–‡ä»¶åº”è¯¥åªå…è®¸ root ç”¨æˆ·è¯»å†™ï¼š\nsudo chmod 600 /swapfile 4. æ ¼å¼åŒ–ä¸º Swap æ ¼å¼ å°†åˆ›å»ºçš„æ–‡ä»¶æ ¼å¼åŒ–ä¸º Swap äº¤æ¢ç©ºé—´ï¼š\nsudo mkswap /swapfile 5. å¯ç”¨ Swap æ¿€æ´»åˆšåˆšåˆ›å»ºçš„ Swap æ–‡ä»¶ï¼š\nsudo swapon /swapfile 6. éªŒè¯ Swap æ˜¯å¦ç”Ÿæ•ˆ å†æ¬¡æŸ¥çœ‹å†…å­˜å’Œ Swap çŠ¶æ€ï¼š\nfree -h è¾“å‡ºç¤ºä¾‹ï¼š\ntotal used free shared buff/cache available Mem: 2.0G 1.2G 100M 10M 700M 600M Swap: 2.0G 0B 2.0G å¯ä»¥çœ‹åˆ° Swap ä¸€è¡Œå·²ç»æ˜¾ç¤º 2.0Gï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚\n7. é…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ ä¸ºäº†è®© Swap åœ¨ç³»ç»Ÿé‡å¯åè‡ªåŠ¨ç”Ÿæ•ˆï¼Œéœ€è¦å°†å…¶å†™å…¥ /etc/fstab æ–‡ä»¶ï¼š\necho \u0026#39;/swapfile none swap sw 0 0\u0026#39; | sudo tee -a /etc/fstab éªŒè¯ /etc/fstab é…ç½®æ˜¯å¦æ­£ç¡®ï¼š\ncat /etc/fstab ä¼˜åŒ–å»ºè®® è°ƒæ•´ Swappiness å‚æ•°ï¼ˆå¯é€‰ï¼‰ swappiness å‚æ•°æ§åˆ¶ç³»ç»Ÿä½¿ç”¨ Swap çš„ç§¯æç¨‹åº¦ï¼Œå–å€¼èŒƒå›´ 0-100ï¼š\n0ï¼šå°½å¯èƒ½ä¸ä½¿ç”¨ Swapï¼Œåªåœ¨å†…å­˜å®Œå…¨ä¸è¶³æ—¶ä½¿ç”¨ 60ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¹³è¡¡ä½¿ç”¨ç‰©ç†å†…å­˜å’Œ Swap 100ï¼šç§¯æä½¿ç”¨ Swap å¯¹äºå†…å­˜è¾ƒå°çš„æœåŠ¡å™¨ï¼Œå»ºè®®å°† swappiness è®¾ç½®ä¸º 10-30ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨ Swap å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼š\n# æŸ¥çœ‹å½“å‰ swappiness å€¼ cat /proc/sys/vm/swappiness # ä¸´æ—¶ä¿®æ”¹ï¼ˆé‡å¯åå¤±æ•ˆï¼‰ sudo sysctl vm.swappiness=10 # æ°¸ä¹…ä¿®æ”¹ echo \u0026#39;vm.swappiness=10\u0026#39; | sudo tee -a /etc/sysctl.conf sudo sysctl -p æ³¨æ„äº‹é¡¹ ç¡¬ç›˜ç©ºé—´å ç”¨ï¼šSwap æ–‡ä»¶ä¼šå ç”¨ç¡¬ç›˜ç©ºé—´ï¼Œåˆ›å»ºå‰è¯·ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ æ€§èƒ½å½±å“ï¼šè™½ç„¶ Swap å¯ä»¥ç¼“è§£å†…å­˜ä¸è¶³é—®é¢˜ï¼Œä½†è¿‡åº¦ä½¿ç”¨ä¼šå¯¼è‡´ç³»ç»Ÿå˜æ…¢ï¼Œå› ä¸ºç¡¬ç›˜è¯»å†™é€Ÿåº¦è¿œä½äºå†…å­˜ ç›‘æ§ä½¿ç”¨æƒ…å†µï¼šå»ºè®®å®šæœŸç›‘æ§ Swap çš„ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœç»å¸¸å¤§é‡ä½¿ç”¨ Swapï¼Œè¯´æ˜éœ€è¦å‡çº§æœåŠ¡å™¨é…ç½®æˆ–ä¼˜åŒ–åº”ç”¨ ç›‘æ§ Swap ä½¿ç”¨æƒ…å†µ å®æ—¶æŸ¥çœ‹å†…å­˜å’Œ Swap çŠ¶æ€ # æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ free -h # æŒç»­ç›‘æ§ï¼ˆæ¯ 2 ç§’åˆ·æ–°ä¸€æ¬¡ï¼‰ watch -n 2 free -h æŸ¥çœ‹å“ªäº›è¿›ç¨‹åœ¨ä½¿ç”¨ Swap for file in /proc/*/status ; do awk \u0026#39;/VmSwap|Name/{printf $2 \u0026#34; \u0026#34; $3}END{ print \u0026#34;\u0026#34;}\u0026#39; $file; done | sort -k 2 -n -r | head -10 åˆ é™¤ Swapï¼ˆå¦‚éœ€ç§»é™¤ï¼‰ å¦‚æœä»¥åéœ€è¦åˆ é™¤ Swap é…ç½®ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n# 1. å…³é—­ Swap sudo swapoff /swapfile # 2. ä» /etc/fstab ä¸­åˆ é™¤å¯¹åº”è¡Œ sudo sed -i \u0026#39;/\\/swapfile/d\u0026#39; /etc/fstab # 3. åˆ é™¤ Swap æ–‡ä»¶ sudo rm /swapfile æ€»ç»“ é…ç½® Swap æ˜¯è§£å†³å°å†…å­˜æœåŠ¡å™¨è¿è¡Œå¤§å‹åº”ç”¨çš„æœ‰æ•ˆæ–¹æ¡ˆã€‚è™½ç„¶ä¸èƒ½å®Œå…¨æ›¿ä»£ç‰©ç†å†…å­˜ï¼Œä½†å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£å†…å­˜ä¸è¶³å¯¼è‡´çš„ç³»ç»Ÿå¡æ­»é—®é¢˜ã€‚å¯¹äºé˜¿é‡Œäº‘è½»é‡æœåŠ¡å™¨è¿™ç±»é»˜è®¤æ²¡æœ‰ Swap çš„ç¯å¢ƒï¼Œå¼ºçƒˆå»ºè®®é…ç½® Swap ä»¥æé«˜ç³»ç»Ÿç¨³å®šæ€§ã€‚\nå½“ç„¶ï¼Œå¦‚æœåº”ç”¨é•¿æœŸå¤§é‡ä½¿ç”¨ Swapï¼Œæœ€æ ¹æœ¬çš„è§£å†³æ–¹æ¡ˆè¿˜æ˜¯å‡çº§æœåŠ¡å™¨é…ç½®æˆ–ä¼˜åŒ–åº”ç”¨ç¨‹åºçš„å†…å­˜ä½¿ç”¨ã€‚\n","permalink":"https://lifeislife.cn/posts/%E9%98%BF%E9%87%8C%E4%BA%91%E8%BD%BB%E9%87%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AEswap%E8%A7%A3%E5%86%B3%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3/","summary":"\u003ch2 id=\"é—®é¢˜èƒŒæ™¯\"\u003eé—®é¢˜èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eåœ¨ä½¿ç”¨é˜¿é‡Œäº‘è½»é‡æœåŠ¡å™¨æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªä»¤äººå¤´ç–¼çš„é—®é¢˜ï¼š\u003cstrong\u003eé»˜è®¤é…ç½®æ²¡æœ‰ Swap äº¤æ¢ç©ºé—´\u003c/strong\u003eã€‚å½“è¿è¡Œå†…å­˜å ç”¨è¾ƒé«˜çš„åº”ç”¨ï¼ˆå¦‚ç¼–è¯‘é¡¹ç›®ã€è¿è¡Œ CI/CD æµç¨‹ã€éƒ¨ç½²åº”ç”¨ç­‰ï¼‰æ—¶ï¼ŒæœåŠ¡å™¨ç»å¸¸ä¼šå› ä¸ºå†…å­˜ä¸è¶³è€Œå¡æ­»æˆ–æ— å“åº”ã€‚\u003c/p\u003e","title":"é˜¿é‡Œäº‘è½»é‡æœåŠ¡å™¨é…ç½®Swapè§£å†³å†…å­˜ä¸è¶³"},{"content":"åœ¨å¼€å‘åº”ç”¨æ—¶,æˆ‘ä»¬ç»å¸¸éœ€è¦å®ç°æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚ä¾‹å¦‚æˆ‘ä¹‹å‰å¼€å‘çš„è¡¨å•å¡«å†™å·¥å…·(QuickFillForm),å¦‚æœä¸ä¿å­˜åˆ°ç½‘ç›˜,æ¢ä¸ªæµè§ˆå™¨æ•°æ®å°±ä¸¢å¤±äº†;ä½†å¦‚æœæ¥å…¥ OneDrive åŒæ­¥,ç”¨æˆ·å°±èƒ½åœ¨å„ä¸ªè®¾å¤‡ä¸Šæ— ç¼ä½¿ç”¨ã€‚æœ¬æ–‡å°†ä»¥è¿™ä¸ªå®é™…æ¡ˆä¾‹ä¸ºä¾‹,è¯¦ç»†è¯´æ˜å¦‚ä½•ç”³è¯·å’Œé…ç½® OneDrive API,å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®ç°ç½‘ç›˜åŒæ­¥åŠŸèƒ½ã€‚\nåº”ç”¨åœºæ™¯ OneDrive API é€‚ç”¨äºä»¥ä¸‹å¼€å‘åœºæ™¯:\nè·¨è®¾å¤‡æ•°æ®åŒæ­¥: æµè§ˆå™¨æ’ä»¶ã€æ¡Œé¢åº”ç”¨çš„é…ç½®å’Œæ•°æ®åŒæ­¥ æ–‡ä»¶å¤‡ä»½ä¸æ¢å¤: è‡ªåŠ¨å¤‡ä»½ç”¨æˆ·æ•°æ®åˆ°äº‘ç«¯,æ”¯æŒä¸€é”®æ¢å¤ åä½œä¸åˆ†äº«: å®ç°æ–‡ä»¶å…±äº«ã€å¤šäººåä½œç¼–è¾‘åŠŸèƒ½ ç¦»çº¿è®¿é—®: æ”¯æŒç¦»çº¿è¯»å–æ•°æ®,åœ¨çº¿è‡ªåŠ¨åŒæ­¥ å‰ç½®å‡†å¤‡ åœ¨å¼€å§‹ä¹‹å‰,ä½ éœ€è¦å‡†å¤‡:\nâœ… Microsoft è´¦å·(ä¸ªäººè´¦å·æˆ–å·¥ä½œ/å­¦æ ¡è´¦å·å‡å¯) âœ… å¼€å‘ç¯å¢ƒ(æœ¬æ–‡ä»¥æµè§ˆå™¨æ’ä»¶ä¸ºä¾‹) âœ… åŸºç¡€çš„ JavaScript/API è°ƒç”¨çŸ¥è¯† ğŸ’¡ æç¤º: OneDrive API æä¾›äº†å…è´¹çš„å¼€å‘è€…é…é¢,ä¸ªäººåº”ç”¨å®Œå…¨å¤Ÿç”¨ã€‚\nç¬¬ä¸€æ­¥: æ³¨å†Œ Azure åº”ç”¨ 1.1 è®¿é—® Azure Portal æ‰“å¼€æµè§ˆå™¨,è®¿é—® Azure Portal ä½¿ç”¨ä½ çš„ Microsoft è´¦å·ç™»å½• ä¸ªäººè´¦å·(å¦‚ Outlookã€Hotmail é‚®ç®±) å·¥ä½œæˆ–å­¦æ ¡è´¦å·(å¦‚å…¬å¸/å­¦æ ¡æä¾›çš„ Office 365 è´¦å·) å¦‚æœæ²¡æœ‰ Azure è´¦å·,å¯ä»¥å…è´¹æ³¨å†Œ ğŸ“Œ æ³¨æ„: å³ä½¿æ²¡æœ‰ Azure è®¢é˜…,ä¹Ÿå¯ä»¥æ³¨å†Œåº”ç”¨ã€‚å…è´¹è´¦å·è¶³å¤Ÿç”¨äºå¼€å‘æµ‹è¯•ã€‚\n1.2 è¿›å…¥åº”ç”¨æ³¨å†Œé¡µé¢ åœ¨ Azure Portal é¦–é¡µçš„æœç´¢æ ä¸­è¾“å…¥ \u0026ldquo;Azure Active Directory\u0026rdquo; æˆ– \u0026ldquo;Microsoft Entra ID\u0026rdquo; ç‚¹å‡»æœç´¢ç»“æœä¸­çš„ Azure Active Directory æœåŠ¡ åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ° \u0026ldquo;åº”ç”¨æ³¨å†Œ\u0026rdquo; (App registrations) ç‚¹å‡»é¡¶éƒ¨çš„ \u0026quot;+ æ–°æ³¨å†Œ\u0026quot; (New registration) æŒ‰é’® \u003c!DOCTYPE html\u003e Responsive Image 1.3 å¡«å†™åº”ç”¨åŸºæœ¬ä¿¡æ¯ åœ¨åº”ç”¨æ³¨å†Œé¡µé¢,éœ€è¦å¡«å†™ä»¥ä¸‹å…³é”®ä¿¡æ¯:\nåº”ç”¨åç§° å­—æ®µ: åç§° (Name) ç¤ºä¾‹: QuickFillForm Extension æˆ– æˆ‘çš„æ•°æ®åŒæ­¥åº”ç”¨ è¯´æ˜: è¿™æ˜¯åº”ç”¨çš„æ˜¾ç¤ºåç§°,ç”¨æˆ·æˆæƒæ—¶ä¼šçœ‹åˆ°æ­¤åç§° æ”¯æŒçš„è´¦æˆ·ç±»å‹ é€‰æ‹©åº”ç”¨çš„ç”¨æˆ·èŒƒå›´,æ¨èé€‰æ‹©:\nâœ… ä»»ä½•ç»„ç»‡ç›®å½•(ä»»ä½• Azure AD ç›®å½• - å¤šç§Ÿæˆ·)ä¸­çš„å¸æˆ·å’Œä¸ªäºº Microsoft å¸æˆ·(ä¾‹å¦‚,Skypeã€Xbox) è‹±æ–‡é€‰é¡¹: Accounts in any organizational directory (Any Azure AD directory - Multitenant) and personal Microsoft accounts (e.g. Skype, Xbox) ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªé€‰é¡¹?\næ”¯æŒä¸ªäºº Microsoft è´¦å·(æœ€å¹¿æ³›çš„ç”¨æˆ·ç¾¤) æ”¯æŒä¼ä¸šå’Œå­¦æ ¡è´¦å· ä¸é™åˆ¶ç»„ç»‡,ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨ä½ çš„åº”ç”¨ å…¶ä»–é€‰é¡¹è¯´æ˜:\nä»…æ­¤ç»„ç»‡ç›®å½•: ä»…é™ä½ çš„ç»„ç»‡å†…éƒ¨ä½¿ç”¨ ä»»ä½•ç»„ç»‡ç›®å½•: ä»…é™ä¼ä¸š/å­¦æ ¡è´¦å·,ä¸æ”¯æŒä¸ªäººè´¦å· ä»…ä¸ªäºº Microsoft è´¦æˆ·: ä»…æ”¯æŒä¸ªäººè´¦å· é‡å®šå‘ URI (Redirect URI) è¿™æ˜¯ OAuth è®¤è¯å®Œæˆåçš„å›è°ƒåœ°å€,ä¸åŒåº”ç”¨ç±»å‹é…ç½®ä¸åŒ:\næµè§ˆå™¨æ’ä»¶ (Chrome/Edge):\nå¹³å°ç±»å‹: Web URI æ ¼å¼: https://\u0026lt;YOUR_EXTENSION_ID\u0026gt;.chromiumapp.org/onedrive ä¸´æ—¶ç¤ºä¾‹: https://abcdefghijklmnopqrstuvwxyz123456.chromiumapp.org/onedrive Web åº”ç”¨:\nå¹³å°ç±»å‹: Web URI æ ¼å¼: https://yourdomain.com/callback æœ¬åœ°å¼€å‘: http://localhost:3000/callback æ¡Œé¢åº”ç”¨:\nå¹³å°ç±»å‹: å…¬å…±å®¢æˆ·ç«¯/æœ¬æœº URI æ ¼å¼: https://login.microsoftonline.com/common/oauth2/nativeclient âš ï¸ é‡è¦: æµè§ˆå™¨æ’ä»¶çš„ Extension ID éœ€è¦åœ¨æ’ä»¶å®‰è£…åæ‰èƒ½è·å–,ç¨åæˆ‘ä»¬ä¼šæ›´æ–°è¿™ä¸ªé…ç½®ã€‚å¯ä»¥å…ˆå¡«å†™ä¸€ä¸ªä¸´æ—¶å€¼,æˆ–è€…ç•™ç©ºåé¢å†æ·»åŠ ã€‚\n1.4 å®Œæˆæ³¨å†Œ ç¡®è®¤ä¿¡æ¯æ— è¯¯å,ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ \u0026ldquo;æ³¨å†Œ\u0026rdquo; (Register) æŒ‰é’®ã€‚\næ³¨å†ŒæˆåŠŸå,ä¼šè‡ªåŠ¨è·³è½¬åˆ°åº”ç”¨çš„ æ¦‚è¿° (Overview) é¡µé¢,è¿™é‡Œæ˜¾ç¤ºäº†åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯å’Œé‡è¦ IDã€‚\nç¬¬äºŒæ­¥: é…ç½® API æƒé™ æ³¨å†Œå®Œåº”ç”¨å,éœ€è¦ä¸ºåº”ç”¨æ·»åŠ è®¿é—® OneDrive çš„æƒé™ã€‚\n2.1 è¿›å…¥ API æƒé™é¡µé¢ åœ¨åº”ç”¨è¯¦æƒ…é¡µé¢çš„å·¦ä¾§èœå•ä¸­,ç‚¹å‡» \u0026ldquo;API æƒé™\u0026rdquo; (API permissions) ä½ ä¼šçœ‹åˆ°é»˜è®¤å·²ç»æ·»åŠ äº† User.Read æƒé™(è¿™æ˜¯ç”¨äºè¯»å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„æƒé™) 2.2 æ·»åŠ  Microsoft Graph æƒé™ ç‚¹å‡»é¡µé¢ä¸­çš„ \u0026quot;+ æ·»åŠ æƒé™\u0026quot; (Add a permission) æŒ‰é’® åœ¨å³ä¾§å¼¹å‡ºçš„é¢æ¿ä¸­,ç‚¹å‡» \u0026ldquo;Microsoft Graph\u0026rdquo; é€‰æ‹© \u0026ldquo;å§”æ‰˜çš„æƒé™\u0026rdquo; (Delegated permissions) ğŸ’¡ æƒé™ç±»å‹è¯´æ˜:\nå§”æ‰˜çš„æƒé™ (Delegated permissions): åº”ç”¨ä»£è¡¨å·²ç™»å½•ç”¨æˆ·è®¿é—®æ•°æ®,éœ€è¦ç”¨æˆ·æˆæƒ åº”ç”¨ç¨‹åºæƒé™ (Application permissions): åº”ç”¨ä»¥è‡ªå·±çš„èº«ä»½è®¿é—®æ•°æ®,æ— éœ€ç”¨æˆ·ç™»å½•,éœ€è¦ç®¡ç†å‘˜åŒæ„ 2.3 é€‰æ‹©æ‰€éœ€æƒé™ åœ¨æœç´¢æ¡†ä¸­æœç´¢å¹¶å‹¾é€‰ä»¥ä¸‹æƒé™:\nFiles.ReadWrite.AppFolder (æ¨è) æƒé™åç§°: Files.ReadWrite.AppFolder æƒé™çº§åˆ«: å§”æ‰˜çš„æƒé™ ä½œç”¨: å…è®¸åº”ç”¨è¯»å†™åº”ç”¨ä¸“ç”¨æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ ä¼˜åŠ¿: æœ€å®‰å…¨çš„æƒé™,åº”ç”¨åªèƒ½è®¿é—®è‡ªå·±åˆ›å»ºçš„ Apps/\u0026lt;AppName\u0026gt; æ–‡ä»¶å¤¹ é€‚ç”¨åœºæ™¯: å¤§å¤šæ•°åº”ç”¨æ•°æ®åŒæ­¥åœºæ™¯ ç¤ºä¾‹å­˜å‚¨è·¯å¾„:\nOneDrive/ â””â”€â”€ Apps/ â””â”€â”€ QuickFillForm/ â”œâ”€â”€ quickfillform-data.json â””â”€â”€ backup/ offline_access (å¿…éœ€) æƒé™åç§°: offline_access æƒé™çº§åˆ«: å§”æ‰˜çš„æƒé™ ä½œç”¨: å…è®¸åº”ç”¨åœ¨ç”¨æˆ·ç¦»çº¿æ—¶è®¿é—®æ•°æ® ç”¨é€”: è·å–åˆ·æ–°ä»¤ç‰Œ(refresh token),åœ¨è®¿é—®ä»¤ç‰Œè¿‡æœŸåè‡ªåŠ¨ç»­æœŸ Files.ReadWrite.All (å¯é€‰,ä¸æ¨è) æƒé™åç§°: Files.ReadWrite.All æƒé™çº§åˆ«: å§”æ‰˜çš„æƒé™ ä½œç”¨: å…è®¸åº”ç”¨è¯»å†™ç”¨æˆ·çš„æ‰€æœ‰æ–‡ä»¶ é£é™©: æƒé™èŒƒå›´è¿‡å¤§,å¯èƒ½å¼•èµ·ç”¨æˆ·æ‹…å¿§ é€‚ç”¨åœºæ™¯: éœ€è¦è®¿é—®ç”¨æˆ·æ•´ä¸ª OneDrive çš„åº”ç”¨(å¦‚æ–‡ä»¶ç®¡ç†å™¨) 2.4 ç¡®è®¤æ·»åŠ æƒé™ å‹¾é€‰å¥½æƒé™å,ç‚¹å‡»åº•éƒ¨çš„ \u0026ldquo;æ·»åŠ æƒé™\u0026rdquo; (Add permissions) æŒ‰é’® è¿”å› API æƒé™é¡µé¢,ç¡®è®¤åˆ—è¡¨ä¸­æ˜¾ç¤ºä»¥ä¸‹æƒé™: âœ… User.Read (é»˜è®¤) âœ… Files.ReadWrite.AppFolder âœ… offline_access 2.5 æˆäºˆç®¡ç†å‘˜åŒæ„ (å¯é€‰) å¦‚æœä½ æ˜¯ç»„ç»‡ç®¡ç†å‘˜,å¯ä»¥ç‚¹å‡» \u0026ldquo;ä¸º [ç»„ç»‡åç§°] æˆäºˆç®¡ç†å‘˜åŒæ„\u0026rdquo; æŒ‰é’® å¯¹äºä¸ªäººè´¦å·æˆ–å…¬å…±åº”ç”¨,æ­¤æ­¥éª¤å¯ä»¥è·³è¿‡ ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šçœ‹åˆ°æˆæƒé¡µé¢,ç‚¹å‡»\u0026quot;æ¥å—\u0026quot;å³å¯ ç¬¬ä¸‰æ­¥: è·å–åº”ç”¨å‡­æ® 3.1 å¤åˆ¶ Client ID (åº”ç”¨ç¨‹åº ID) åœ¨åº”ç”¨è¯¦æƒ…é¡µé¢çš„ \u0026ldquo;æ¦‚è¿°\u0026rdquo; (Overview) é€‰é¡¹å¡ä¸­ æ‰¾åˆ° \u0026ldquo;åº”ç”¨ç¨‹åº(å®¢æˆ·ç«¯) ID\u0026rdquo; (Application (client) ID) è¿™æ˜¯ä¸€ä¸ª GUID æ ¼å¼çš„å­—ç¬¦ä¸²,ç±»ä¼¼: 12345678-1234-1234-1234-123456789abc ç‚¹å‡»æ—è¾¹çš„å¤åˆ¶å›¾æ ‡,å°† Client ID ä¿å­˜åˆ°å®‰å…¨çš„åœ°æ–¹ ğŸ”’ å®‰å…¨æç¤º: Client ID æ˜¯å…¬å¼€ä¿¡æ¯,å¯ä»¥åœ¨å‰ç«¯ä»£ç ä¸­ä½¿ç”¨ã€‚ä½†ä¸è¦å°†å®ƒä¸ Client Secret æ··æ·†ã€‚\n3.2 æ˜¯å¦éœ€è¦ Client Secret? å¯¹äºä¸åŒç±»å‹çš„åº”ç”¨,Client Secret çš„éœ€æ±‚ä¸åŒ:\nåº”ç”¨ç±»å‹ æ˜¯å¦éœ€è¦ Client Secret åŸå›  æµè§ˆå™¨æ’ä»¶ âŒ ä¸éœ€è¦ ä½¿ç”¨éšå¼æˆæƒæµç¨‹æˆ– PKCE å•é¡µåº”ç”¨ (SPA) âŒ ä¸éœ€è¦ å‰ç«¯ä»£ç æ— æ³•å®‰å…¨å­˜å‚¨å¯†é’¥ Web åº”ç”¨ (æœ‰åç«¯) âœ… éœ€è¦ åœ¨æœåŠ¡å™¨ç«¯å®‰å…¨å­˜å‚¨ æ¡Œé¢/ç§»åŠ¨åº”ç”¨ âŒ ä¸éœ€è¦ ä½¿ç”¨ PKCE æˆæƒæµç¨‹ å¦‚æœéœ€è¦ Client Secret,åˆ›å»ºæ–¹æ³•å¦‚ä¸‹:\nåœ¨å·¦ä¾§èœå•ä¸­ç‚¹å‡» \u0026ldquo;è¯ä¹¦å’Œå¯†ç \u0026rdquo; (Certificates \u0026amp; secrets) ç‚¹å‡» \u0026quot;+ æ–°å®¢æˆ·ç«¯å¯†ç \u0026quot; (New client secret) è¾“å…¥æè¿°(å¦‚ \u0026ldquo;ç”Ÿäº§ç¯å¢ƒå¯†é’¥\u0026rdquo;),é€‰æ‹©è¿‡æœŸæ—¶é—´ ç‚¹å‡» \u0026ldquo;æ·»åŠ \u0026rdquo; (Add) ç«‹å³å¤åˆ¶å¯†é’¥å€¼,æ­¤å¯†é’¥åªæ˜¾ç¤ºä¸€æ¬¡ âš ï¸ è­¦å‘Š: Client Secret æ˜¯æ•æ„Ÿä¿¡æ¯,å¿…é¡»å¦¥å–„ä¿ç®¡,ä¸èƒ½æäº¤åˆ°ä»£ç ä»“åº“ã€‚\n3.3 é…ç½®èº«ä»½éªŒè¯è®¾ç½® åœ¨å·¦ä¾§èœå•ç‚¹å‡» \u0026ldquo;èº«ä»½éªŒè¯\u0026rdquo; (Authentication) ç¡®è®¤ é‡å®šå‘ URI å·²æ­£ç¡®æ·»åŠ  å‘ä¸‹æ»šåŠ¨åˆ° \u0026ldquo;éšå¼æˆæƒå’Œæ··åˆæµ\u0026rdquo; (Implicit grant and hybrid flows) éƒ¨åˆ† å¯¹äºæµè§ˆå™¨æ’ä»¶æˆ– SPA,éœ€è¦å¯ç”¨:\nâœ… å‹¾é€‰ \u0026ldquo;è®¿é—®ä»¤ç‰Œ\u0026rdquo; (Access tokens) âœ… å‹¾é€‰ \u0026ldquo;ID ä»¤ç‰Œ\u0026rdquo; (ID tokens) å¯¹äºä½¿ç”¨æˆæƒç æµç¨‹çš„åº”ç”¨,å¯ä»¥ä¸å‹¾é€‰ä¸Šè¿°é€‰é¡¹\nç‚¹å‡»é¡µé¢åº•éƒ¨çš„ \u0026ldquo;ä¿å­˜\u0026rdquo; (Save) æŒ‰é’® ç¬¬å››æ­¥: é…ç½®åº”ç”¨ä»£ç  ä»¥æµè§ˆå™¨æ’ä»¶ä¸ºä¾‹,è¯´æ˜å¦‚ä½•åœ¨ä»£ç ä¸­é…ç½® OneDrive APIã€‚\n4.1 è·å–æµè§ˆå™¨æ’ä»¶çš„ Extension ID å¦‚æœä½ æ­£åœ¨å¼€å‘æµè§ˆå™¨æ’ä»¶:\næ‰“å¼€ Chrome æˆ– Edge æµè§ˆå™¨ è®¿é—® chrome://extensions/ (Chrome) æˆ– edge://extensions/ (Edge) å¼€å¯å³ä¸Šè§’çš„ \u0026ldquo;å¼€å‘è€…æ¨¡å¼\u0026rdquo; (Developer mode) ç‚¹å‡» \u0026ldquo;åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº\u0026rdquo; (Load unpacked) é€‰æ‹©ä½ çš„æ’ä»¶é¡¹ç›®æ–‡ä»¶å¤¹ å®‰è£…æˆåŠŸå,åœ¨æ’ä»¶å¡ç‰‡ä¸Šæ‰¾åˆ° \u0026ldquo;ID\u0026rdquo; å­—æ®µ,å¤åˆ¶æ‰©å±• ID ç±»ä¼¼: abcdefghijklmnopqrstuvwxyz123456 4.2 æ›´æ–° Azure é‡å®šå‘ URI è¿”å› Azure Portal çš„åº”ç”¨æ³¨å†Œé¡µé¢ è¿›å…¥ \u0026ldquo;èº«ä»½éªŒè¯\u0026rdquo; (Authentication) æ›´æ–°æˆ–æ·»åŠ é‡å®šå‘ URI: https://abcdefghijklmnopqrstuvwxyz123456.chromiumapp.org/onedrive å°† abcdefghijklmnopqrstuvwxyz123456 æ›¿æ¢ä¸ºå®é™…çš„æ‰©å±• ID ç‚¹å‡» \u0026ldquo;ä¿å­˜\u0026rdquo; (Save) 4.3 åœ¨ä»£ç ä¸­é…ç½® Client ID ä»¥ QuickFillForm æ’ä»¶ä¸ºä¾‹,åœ¨ onedrive-sync.js æ–‡ä»¶ä¸­é…ç½®:\nclass OneDriveSync { constructor() { // æ›¿æ¢ä¸ºä½ çš„ Azure åº”ç”¨ç¨‹åº ID (Client ID) this.clientId = \u0026#39;12345678-1234-1234-1234-123456789abc\u0026#39;; // è·å–å½“å‰æ’ä»¶çš„ ID this.redirectUri = `https://${chrome.runtime.id}.chromiumapp.org/onedrive`; // Microsoft Graph API ç«¯ç‚¹ this.graphEndpoint = \u0026#39;https://graph.microsoft.com/v1.0\u0026#39;; // åº”ç”¨ä¸“ç”¨æ–‡ä»¶å¤¹è·¯å¾„ this.appFolderPath = \u0026#39;/me/drive/special/approot\u0026#39;; // è¯·æ±‚çš„æƒé™èŒƒå›´ this.scopes = [ \u0026#39;Files.ReadWrite.AppFolder\u0026#39;, \u0026#39;offline_access\u0026#39; ]; } // è·å–è®¿é—®ä»¤ç‰Œ async getAccessToken() { return new Promise((resolve, reject) =\u0026gt; { chrome.identity.launchWebAuthFlow({ url: this.getAuthUrl(), interactive: true }, (redirectUrl) =\u0026gt; { if (chrome.runtime.lastError) { reject(chrome.runtime.lastError); return; } // ä»å›è°ƒ URL ä¸­æå– access_token const url = new URL(redirectUrl); const token = url.hash.match(/access_token=([^\u0026amp;]*)/)?.[1]; if (token) { resolve(token); } else { reject(new Error(\u0026#39;æ— æ³•è·å–è®¿é—®ä»¤ç‰Œ\u0026#39;)); } }); }); } // æ„å»ºæˆæƒ URL getAuthUrl() { const params = new URLSearchParams({ client_id: this.clientId, response_type: \u0026#39;token\u0026#39;, redirect_uri: this.redirectUri, scope: this.scopes.join(\u0026#39; \u0026#39;), response_mode: \u0026#39;fragment\u0026#39; }); return `https://login.microsoftonline.com/common/oauth2/v2.0/authorize?${params}`; } // ä¸Šä¼ æ–‡ä»¶åˆ° OneDrive async uploadFile(fileName, content) { const token = await this.getAccessToken(); const response = await fetch( `${this.graphEndpoint}${this.appFolderPath}:/${fileName}:/content`, { method: \u0026#39;PUT\u0026#39;, headers: { \u0026#39;Authorization\u0026#39;: `Bearer ${token}`, \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39; }, body: JSON.stringify(content) } ); if (!response.ok) { throw new Error(`ä¸Šä¼ å¤±è´¥: ${response.statusText}`); } return await response.json(); } // ä» OneDrive ä¸‹è½½æ–‡ä»¶ async downloadFile(fileName) { const token = await this.getAccessToken(); const response = await fetch( `${this.graphEndpoint}${this.appFolderPath}:/${fileName}:/content`, { headers: { \u0026#39;Authorization\u0026#39;: `Bearer ${token}` } } ); if (!response.ok) { throw new Error(`ä¸‹è½½å¤±è´¥: ${response.statusText}`); } return await response.json(); } } // ä½¿ç”¨ç¤ºä¾‹ const onedriveSync = new OneDriveSync(); // ä¸Šä¼ æ•°æ® onedriveSync.uploadFile(\u0026#39;data.json\u0026#39;, { key: \u0026#39;value\u0026#39; }) .then(() =\u0026gt; console.log(\u0026#39;ä¸Šä¼ æˆåŠŸ\u0026#39;)) .catch(err =\u0026gt; console.error(\u0026#39;ä¸Šä¼ å¤±è´¥:\u0026#39;, err)); // ä¸‹è½½æ•°æ® onedriveSync.downloadFile(\u0026#39;data.json\u0026#39;) .then(data =\u0026gt; console.log(\u0026#39;ä¸‹è½½çš„æ•°æ®:\u0026#39;, data)) .catch(err =\u0026gt; console.error(\u0026#39;ä¸‹è½½å¤±è´¥:\u0026#39;, err)); 4.4 Web åº”ç”¨é…ç½®ç¤ºä¾‹ å¯¹äºä¼ ç»Ÿ Web åº”ç”¨(æœ‰åç«¯),ä½¿ç”¨æˆæƒç æµç¨‹æ›´å®‰å…¨:\n// å‰ç«¯ä»£ç  function loginWithOneDrive() { const clientId = \u0026#39;YOUR_CLIENT_ID\u0026#39;; const redirectUri = \u0026#39;https://yourdomain.com/callback\u0026#39;; const scopes = \u0026#39;Files.ReadWrite.AppFolder offline_access\u0026#39;; const authUrl = `https://login.microsoftonline.com/common/oauth2/v2.0/authorize?` + `client_id=${clientId}` + `\u0026amp;response_type=code` + `\u0026amp;redirect_uri=${encodeURIComponent(redirectUri)}` + `\u0026amp;scope=${encodeURIComponent(scopes)}`; window.location.href = authUrl; } // åç«¯ä»£ç  (Node.js Express ç¤ºä¾‹) app.get(\u0026#39;/callback\u0026#39;, async (req, res) =\u0026gt; { const code = req.query.code; // ç”¨æˆæƒç æ¢å–è®¿é—®ä»¤ç‰Œ const tokenResponse = await fetch(\u0026#39;https://login.microsoftonline.com/common/oauth2/v2.0/token\u0026#39;, { method: \u0026#39;POST\u0026#39;, headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/x-www-form-urlencoded\u0026#39; }, body: new URLSearchParams({ client_id: process.env.CLIENT_ID, client_secret: process.env.CLIENT_SECRET, code: code, redirect_uri: \u0026#39;https://yourdomain.com/callback\u0026#39;, grant_type: \u0026#39;authorization_code\u0026#39; }) }); const tokenData = await tokenResponse.json(); // ä¿å­˜ access_token å’Œ refresh_token req.session.accessToken = tokenData.access_token; req.session.refreshToken = tokenData.refresh_token; res.redirect(\u0026#39;/dashboard\u0026#39;); }); 4.5 é…ç½® manifest.json (æµè§ˆå™¨æ’ä»¶) åœ¨æ’ä»¶çš„ manifest.json ä¸­æ·»åŠ å¿…è¦çš„æƒé™:\n{ \u0026#34;manifest_version\u0026#34;: 3, \u0026#34;name\u0026#34;: \u0026#34;QuickFillForm\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;permissions\u0026#34;: [ \u0026#34;identity\u0026#34;, \u0026#34;storage\u0026#34; ], \u0026#34;host_permissions\u0026#34;: [ \u0026#34;https://login.microsoftonline.com/*\u0026#34;, \u0026#34;https://graph.microsoft.com/*\u0026#34; ], \u0026#34;oauth2\u0026#34;: { \u0026#34;client_id\u0026#34;: \u0026#34;12345678-1234-1234-1234-123456789abc.chromiumapp.org\u0026#34;, \u0026#34;scopes\u0026#34;: [ \u0026#34;Files.ReadWrite.AppFolder\u0026#34;, \u0026#34;offline_access\u0026#34; ] } } ç¬¬äº”æ­¥: æµ‹è¯•åŒæ­¥åŠŸèƒ½ 5.1 æµ‹è¯•ç”¨æˆ·è®¤è¯ åœ¨åº”ç”¨ä¸­è§¦å‘ OneDrive ç™»å½•æµç¨‹ æµè§ˆå™¨ä¼šæ‰“å¼€ Microsoft ç™»å½•é¡µé¢ è¾“å…¥ Microsoft è´¦å·å’Œå¯†ç ç™»å½• é¦–æ¬¡ä½¿ç”¨ä¼šçœ‹åˆ°æƒé™è¯·æ±‚é¡µé¢: æ˜¾ç¤ºåº”ç”¨åç§° åˆ—å‡ºè¯·æ±‚çš„æƒé™ æ˜¾ç¤ºåº”ç”¨å‘å¸ƒè€…ä¿¡æ¯ ç‚¹å‡» \u0026ldquo;æ¥å—\u0026rdquo; (Accept) æŒ‰é’®æˆæƒ 5.2 æµ‹è¯•æ–‡ä»¶ä¸Šä¼  æµè§ˆå™¨æ’ä»¶ç¤ºä¾‹:\n// æµ‹è¯•ä¸Šä¼ åŠŸèƒ½ async function testUpload() { const testData = { name: \u0026#39;å¼ ä¸‰\u0026#39;, email: \u0026#39;zhangsan@example.com\u0026#39;, phone: \u0026#39;13800138000\u0026#39; }; try { const result = await onedriveSync.uploadFile(\u0026#39;test-data.json\u0026#39;, testData); console.log(\u0026#39;âœ… ä¸Šä¼ æˆåŠŸ:\u0026#39;, result); } catch (error) { console.error(\u0026#39;âŒ ä¸Šä¼ å¤±è´¥:\u0026#39;, error); } } testUpload(); 5.3 æµ‹è¯•æ–‡ä»¶ä¸‹è½½ // æµ‹è¯•ä¸‹è½½åŠŸèƒ½ async function testDownload() { try { const data = await onedriveSync.downloadFile(\u0026#39;test-data.json\u0026#39;); console.log(\u0026#39;âœ… ä¸‹è½½æˆåŠŸ:\u0026#39;, data); } catch (error) { console.error(\u0026#39;âŒ ä¸‹è½½å¤±è´¥:\u0026#39;, error); } } testDownload(); 5.4 éªŒè¯æ–‡ä»¶å­˜å‚¨ä½ç½® ç™»å½• OneDrive ç½‘é¡µç‰ˆ åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ° \u0026ldquo;åº”ç”¨\u0026rdquo; (Apps) æ–‡ä»¶å¤¹ è¿›å…¥ä½ çš„åº”ç”¨æ–‡ä»¶å¤¹,ä¾‹å¦‚ Apps/QuickFillForm/ ç¡®è®¤æ–‡ä»¶å·²æˆåŠŸä¸Šä¼  5.5 æµ‹è¯•è·¨è®¾å¤‡åŒæ­¥ åœ¨è®¾å¤‡ A ä¸Šä¼ æ•°æ® åœ¨è®¾å¤‡ B ä¸Šç™»å½•åŒä¸€ Microsoft è´¦å· ä¸‹è½½æ•°æ®,éªŒè¯æ˜¯å¦ä¸è®¾å¤‡ A ä¸€è‡´ ä¿®æ”¹æ•°æ®åå†æ¬¡ä¸Šä¼  åœ¨è®¾å¤‡ A ä¸Šä¸‹è½½,éªŒè¯æ˜¯å¦æ›´æ–° å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ Q1: æ— æ³•è·å–è®¿é—®ä»¤ç‰Œ é”™è¯¯ä¿¡æ¯:\nAADSTS50011: The redirect URI specified in the request does not match åŸå› åˆ†æ:\nClient ID é…ç½®é”™è¯¯ é‡å®šå‘ URI ä¸åŒ¹é… Extension ID æ›´æ”¹åæœªæ›´æ–° Azure é…ç½® è§£å†³æ–¹æ¡ˆ:\næ£€æŸ¥ä»£ç ä¸­çš„ clientId æ˜¯å¦æ­£ç¡®å¤åˆ¶\n// é”™è¯¯: å¤šä½™çš„ç©ºæ ¼æˆ–ç‰¹æ®Šå­—ç¬¦ this.clientId = \u0026#39;12345678-1234-1234-1234-123456789abc \u0026#39;; // æ­£ç¡® this.clientId = \u0026#39;12345678-1234-1234-1234-123456789abc\u0026#39;; ç¡®è®¤ Azure åº”ç”¨æ³¨å†Œä¸­çš„é‡å®šå‘ URI ä¸ä»£ç å®Œå…¨ä¸€è‡´\nAzure é…ç½®: https://abcdefg123456.chromiumapp.org/onedrive ä»£ç é…ç½®: https://abcdefg123456.chromiumapp.org/onedrive æ³¨æ„åŒºåˆ†å¤§å°å†™å’Œå°¾éƒ¨æ–œæ  ä¿å­˜é…ç½®åç­‰å¾… 2-5 åˆ†é’Ÿè®©é…ç½®ç”Ÿæ•ˆ\nQ2: æƒé™è¢«æ‹’ç»,æ— æ³•è¯»å†™æ–‡ä»¶ é”™è¯¯ä¿¡æ¯:\n403 Forbidden: Access denied åŸå› åˆ†æ:\næƒé™æœªæ­£ç¡®æ·»åŠ  ç”¨æˆ·æœªæˆæƒ ä½¿ç”¨äº†é”™è¯¯çš„ API ç«¯ç‚¹ è§£å†³æ–¹æ¡ˆ:\nåœ¨ Azure Portal æ£€æŸ¥æ˜¯å¦å·²æ·»åŠ  Files.ReadWrite.AppFolder æƒé™ æ¸…é™¤ç”¨æˆ·æˆæƒ,é‡æ–°ç™»å½•å¹¶åŒæ„æƒé™ // æ¸…é™¤ç¼“å­˜çš„ä»¤ç‰Œ chrome.identity.clearAllCachedAuthTokens(() =\u0026gt; { console.log(\u0026#39;å·²æ¸…é™¤ç¼“å­˜,è¯·é‡æ–°ç™»å½•\u0026#39;); }); ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„ API è·¯å¾„: // æ­£ç¡®: ä½¿ç”¨åº”ç”¨ä¸“ç”¨æ–‡ä»¶å¤¹ const path = \u0026#39;/me/drive/special/approot:/data.json:/content\u0026#39;; // é”™è¯¯: ä½¿ç”¨æ ¹ç›®å½• (éœ€è¦ Files.ReadWrite.All æƒé™) const path = \u0026#39;/me/drive/root:/data.json:/content\u0026#39;; Q3: è®¿é—®ä»¤ç‰Œè¿‡æœŸ é”™è¯¯ä¿¡æ¯:\n401 Unauthorized: The access token has expired åŸå› åˆ†æ:\nAccess Token é»˜è®¤æœ‰æ•ˆæœŸ 1 å°æ—¶ æœªå®ç° Refresh Token è‡ªåŠ¨åˆ·æ–°æœºåˆ¶ è§£å†³æ–¹æ¡ˆ:\nå®ç°ä»¤ç‰Œåˆ·æ–°é€»è¾‘:\nclass OneDriveSync { constructor() { this.accessToken = null; this.refreshToken = null; this.tokenExpiry = null; } // è·å–æœ‰æ•ˆçš„è®¿é—®ä»¤ç‰Œ async getValidAccessToken() { // å¦‚æœä»¤ç‰Œæœªè¿‡æœŸ,ç›´æ¥è¿”å› if (this.accessToken \u0026amp;\u0026amp; this.tokenExpiry \u0026gt; Date.now()) { return this.accessToken; } // å¦‚æœæœ‰åˆ·æ–°ä»¤ç‰Œ,å°è¯•åˆ·æ–° if (this.refreshToken) { return await this.refreshAccessToken(); } // å¦åˆ™é‡æ–°ç™»å½• return await this.getAccessToken(); } // åˆ·æ–°è®¿é—®ä»¤ç‰Œ async refreshAccessToken() { const response = await fetch(\u0026#39;https://login.microsoftonline.com/common/oauth2/v2.0/token\u0026#39;, { method: \u0026#39;POST\u0026#39;, headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/x-www-form-urlencoded\u0026#39; }, body: new URLSearchParams({ client_id: this.clientId, refresh_token: this.refreshToken, grant_type: \u0026#39;refresh_token\u0026#39; }) }); const data = await response.json(); this.accessToken = data.access_token; this.refreshToken = data.refresh_token; this.tokenExpiry = Date.now() + (data.expires_in * 1000); // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ chrome.storage.local.set({ onedrive_access_token: this.accessToken, onedrive_refresh_token: this.refreshToken, onedrive_token_expiry: this.tokenExpiry }); return this.accessToken; } } Q4: æ‰¾ä¸åˆ°æ‰©å±• ID è§£å†³æ–¹æ¡ˆ:\nè®¿é—®æµè§ˆå™¨çš„æ‰©å±•ç®¡ç†é¡µé¢: Chrome: chrome://extensions/ Edge: edge://extensions/ ç¡®ä¿å·²å¼€å¯\u0026quot;å¼€å‘è€…æ¨¡å¼\u0026quot; Extension ID æ˜¾ç¤ºåœ¨æ‰©å±•å¡ç‰‡ä¸Š,æ ¼å¼ç±»ä¼¼: ID: abcdefghijklmnopqrstuvwxyz123456 å¦‚æœæ˜¯å·²å‘å¸ƒçš„æ‰©å±•,å¯ä»¥åœ¨ Chrome Web Store çš„ URL ä¸­æ‰¾åˆ°: https://chrome.google.com/webstore/detail/extension-name/abcdefghijklmnopqrstuvwxyz123456 Q5: æ–‡ä»¶ä¸Šä¼ æˆåŠŸä½†åœ¨ OneDrive ä¸­æ‰¾ä¸åˆ° åŸå› åˆ†æ:\nä½¿ç”¨äº†åº”ç”¨ä¸“ç”¨æ–‡ä»¶å¤¹,è·¯å¾„åœ¨ Apps/\u0026lt;AppName\u0026gt;/ ä¸‹ OneDrive ç½‘é¡µç‰ˆç•Œé¢å¯èƒ½æœ‰å»¶è¿Ÿ æ–‡ä»¶åæˆ–è·¯å¾„é”™è¯¯ è§£å†³æ–¹æ¡ˆ:\nåœ¨ OneDrive ç½‘é¡µç‰ˆä¸­,å¯¼èˆªåˆ°: OneDrive â†’ åº”ç”¨ (Apps) â†’ QuickFillForm ç­‰å¾… 1-2 åˆ†é’Ÿ,åˆ·æ–°é¡µé¢ ä½¿ç”¨ API æŸ¥è¯¢æ–‡ä»¶æ˜¯å¦å­˜åœ¨: // åˆ—å‡ºåº”ç”¨æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶ async function listFiles() { const token = await onedriveSync.getValidAccessToken(); const response = await fetch( \u0026#39;https://graph.microsoft.com/v1.0/me/drive/special/approot/children\u0026#39;, { headers: { \u0026#39;Authorization\u0026#39;: `Bearer ${token}` } } ); const data = await response.json(); console.log(\u0026#39;æ–‡ä»¶åˆ—è¡¨:\u0026#39;, data.value); } Q6: è·¨åŸŸè¯·æ±‚è¢«é˜»æ­¢ (CORS) é”™è¯¯ä¿¡æ¯:\nAccess to fetch at \u0026#39;https://graph.microsoft.com/...\u0026#39; has been blocked by CORS policy åŸå› åˆ†æ:\nåœ¨æ™®é€šç½‘é¡µä¸­ç›´æ¥è¯·æ±‚ Graph API æœªåœ¨ manifest.json ä¸­é…ç½® host_permissions è§£å†³æ–¹æ¡ˆ:\næ–¹æ¡ˆä¸€: ä½¿ç”¨åç«¯ä»£ç† (æ¨è)\n// å‰ç«¯è°ƒç”¨åç«¯ API fetch(\u0026#39;/api/onedrive/upload\u0026#39;, { method: \u0026#39;POST\u0026#39;, body: JSON.stringify(data) }); // åç«¯è½¬å‘åˆ° Microsoft Graph app.post(\u0026#39;/api/onedrive/upload\u0026#39;, async (req, res) =\u0026gt; { const response = await fetch(\u0026#39;https://graph.microsoft.com/v1.0/...\u0026#39;, { headers: { \u0026#39;Authorization\u0026#39;: `Bearer ${accessToken}` } }); // ... }); æ–¹æ¡ˆäºŒ: æµè§ˆå™¨æ’ä»¶é…ç½®\n{ \u0026#34;host_permissions\u0026#34;: [ \u0026#34;https://login.microsoftonline.com/*\u0026#34;, \u0026#34;https://graph.microsoft.com/*\u0026#34; ] } Q7: æˆæƒé¡µé¢æ˜¾ç¤º\u0026quot;éœ€è¦ç®¡ç†å‘˜å®¡æ‰¹\u0026quot; é”™è¯¯ä¿¡æ¯:\nAADSTS65001: The user or administrator has not consented to use the application åŸå› åˆ†æ:\nç»„ç»‡ç­–ç•¥è¦æ±‚ç®¡ç†å‘˜æ‰¹å‡†åº”ç”¨ è¯·æ±‚çš„æƒé™éœ€è¦ç®¡ç†å‘˜åŒæ„ è§£å†³æ–¹æ¡ˆ:\nå¦‚æœä½ æ˜¯ç®¡ç†å‘˜,åœ¨ Azure Portal ä¸­æˆäºˆç®¡ç†å‘˜åŒæ„ å¦‚æœä¸æ˜¯ç®¡ç†å‘˜,è”ç³» IT éƒ¨é—¨æ‰¹å‡†åº”ç”¨ ä½¿ç”¨ä¸ªäºº Microsoft è´¦å·æµ‹è¯•(ä¸ªäººè´¦å·æ— éœ€ç®¡ç†å‘˜åŒæ„) å‡å°‘æƒé™è¯·æ±‚,åªä½¿ç”¨å§”æ‰˜æƒé™è€Œä¸æ˜¯åº”ç”¨æƒé™ å®‰å…¨æœ€ä½³å®è·µ 1. ä¿æŠ¤ Client Secret // âŒ é”™è¯¯: åœ¨å‰ç«¯ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥ const clientSecret = \u0026#39;your-secret-key-123456\u0026#39;; // âœ… æ­£ç¡®: åœ¨åç«¯ä½¿ç”¨ç¯å¢ƒå˜é‡ const clientSecret = process.env.AZURE_CLIENT_SECRET; 2. ä½¿ç”¨æœ€å°æƒé™åŸåˆ™ // âŒ é”™è¯¯: è¯·æ±‚è¿‡å¤šæƒé™ const scopes = [ \u0026#39;Files.ReadWrite.All\u0026#39;, \u0026#39;Mail.Read\u0026#39;, \u0026#39;Contacts.ReadWrite\u0026#39; ]; // âœ… æ­£ç¡®: åªè¯·æ±‚å¿…éœ€çš„æƒé™ const scopes = [ \u0026#39;Files.ReadWrite.AppFolder\u0026#39;, \u0026#39;offline_access\u0026#39; ]; 3. å®‰å…¨å­˜å‚¨ä»¤ç‰Œ // âœ… æµè§ˆå™¨æ’ä»¶: ä½¿ç”¨ chrome.storage.local chrome.storage.local.set({ onedrive_token: encryptedToken // æœ€å¥½åŠ å¯†å­˜å‚¨ }); // âœ… Web åº”ç”¨: ä½¿ç”¨ HttpOnly Cookie res.cookie(\u0026#39;access_token\u0026#39;, token, { httpOnly: true, secure: true, sameSite: \u0026#39;strict\u0026#39; }); 4. å®šæœŸæ£€æŸ¥åº”ç”¨æ´»åŠ¨ ç™»å½• Azure Portal è¿›å…¥åº”ç”¨æ³¨å†Œ â†’ ä½ çš„åº”ç”¨ æŸ¥çœ‹ \u0026ldquo;æ¦‚è¿°\u0026rdquo; ä¸­çš„ä½¿ç”¨æƒ…å†µç»Ÿè®¡ æ£€æŸ¥å¼‚å¸¸ç™»å½•å’Œ API è°ƒç”¨ 5. å¤„ç†æ•æ„Ÿæ•°æ® // ä¸Šä¼ å‰åŠ å¯†æ•æ„Ÿæ•°æ® async function uploadSecureData(data) { const encrypted = await encryptData(data); await onedriveSync.uploadFile(\u0026#39;secure-data.enc\u0026#39;, encrypted); } // ä¸‹è½½åè§£å¯† async function downloadSecureData() { const encrypted = await onedriveSync.downloadFile(\u0026#39;secure-data.enc\u0026#39;); return await decryptData(encrypted); } è¿›é˜¶æŠ€å·§ 1. å®ç°æ–‡ä»¶ç‰ˆæœ¬ç®¡ç† OneDrive è‡ªåŠ¨ä¿ç•™æ–‡ä»¶ç‰ˆæœ¬å†å²,å¯ä»¥é€šè¿‡ API è®¿é—®:\nasync function getFileVersions(fileName) { const token = await onedriveSync.getValidAccessToken(); const response = await fetch( `https://graph.microsoft.com/v1.0/me/drive/special/approot:/${fileName}:/versions`, { headers: { \u0026#39;Authorization\u0026#39;: `Bearer ${token}` } } ); const data = await response.json(); return data.value; // è¿”å›ç‰ˆæœ¬åˆ—è¡¨ } 2. å®ç°å¢é‡åŒæ­¥ é€šè¿‡ Delta API è·å–æ–‡ä»¶å˜åŒ–:\nasync function syncChanges(deltaLink) { const token = await onedriveSync.getValidAccessToken(); const url = deltaLink || \u0026#39;https://graph.microsoft.com/v1.0/me/drive/special/approot/delta\u0026#39;; const response = await fetch(url, { headers: { \u0026#39;Authorization\u0026#39;: `Bearer ${token}` } }); const data = await response.json(); // å¤„ç†å˜åŒ–çš„æ–‡ä»¶ for (const item of data.value) { if (item.deleted) { console.log(\u0026#39;æ–‡ä»¶å·²åˆ é™¤:\u0026#39;, item.name); } else { console.log(\u0026#39;æ–‡ä»¶å·²æ›´æ–°:\u0026#39;, item.name); } } // ä¿å­˜ deltaLink ä¾›ä¸‹æ¬¡ä½¿ç”¨ return data[\u0026#39;@odata.deltaLink\u0026#39;]; } 3. å®ç°å†²çªè§£å†³ async function smartSync(fileName, localData) { try { // ä¸‹è½½è¿œç¨‹æ–‡ä»¶ const remoteData = await onedriveSync.downloadFile(fileName); // æ¯”è¾ƒæ—¶é—´æˆ³ if (remoteData.lastModified \u0026gt; localData.lastModified) { // è¿œç¨‹æ›´æ–°,ä¸‹è½½è¦†ç›–æœ¬åœ° return { action: \u0026#39;download\u0026#39;, data: remoteData }; } else if (localData.lastModified \u0026gt; remoteData.lastModified) { // æœ¬åœ°æ›´æ–°,ä¸Šä¼ è¦†ç›–è¿œç¨‹ await onedriveSync.uploadFile(fileName, localData); return { action: \u0026#39;upload\u0026#39;, data: localData }; } else { // æ™ºèƒ½åˆå¹¶ const merged = mergeData(localData, remoteData); await onedriveSync.uploadFile(fileName, merged); return { action: \u0026#39;merge\u0026#39;, data: merged }; } } catch (error) { // æ–‡ä»¶ä¸å­˜åœ¨,ç›´æ¥ä¸Šä¼  if (error.status === 404) { await onedriveSync.uploadFile(fileName, localData); return { action: \u0026#39;create\u0026#39;, data: localData }; } throw error; } } 4. æ‰¹é‡æ“ä½œ ä½¿ç”¨æ‰¹å¤„ç† API æé«˜æ€§èƒ½:\nasync function batchUpload(files) { const token = await onedriveSync.getValidAccessToken(); const requests = files.map((file, index) =\u0026gt; ({ id: index.toString(), method: \u0026#39;PUT\u0026#39;, url: `/me/drive/special/approot:/${file.name}:/content`, headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39; }, body: file.content })); const response = await fetch(\u0026#39;https://graph.microsoft.com/v1.0/$batch\u0026#39;, { method: \u0026#39;POST\u0026#39;, headers: { \u0026#39;Authorization\u0026#39;: `Bearer ${token}`, \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39; }, body: JSON.stringify({ requests }) }); return await response.json(); } ç›¸å…³èµ„æº å®˜æ–¹æ–‡æ¡£ ğŸ“˜ Microsoft Graph API æ–‡æ¡£ ğŸ“˜ OneDrive API å‚è€ƒ ğŸ“˜ Azure AD åº”ç”¨æ³¨å†ŒæŒ‡å— ğŸ“˜ OAuth 2.0 æˆæƒæµç¨‹ å¼€å‘å·¥å…· ğŸ› ï¸ Graph Explorer - åœ¨çº¿æµ‹è¯• API ğŸ› ï¸ Microsoft Graph SDK - å„è¯­è¨€ SDK ğŸ› ï¸ Postman Collection - API è°ƒè¯• ç¤ºä¾‹é¡¹ç›® ğŸ’» OneDrive JavaScript SDK ğŸ’» æµè§ˆå™¨æ’ä»¶ OAuth ç¤ºä¾‹ ç¤¾åŒºèµ„æº ğŸ’¬ Microsoft Graph å¼€å‘è€…è®ºå› ğŸ’¬ Stack Overflow - microsoft-graph ","permalink":"https://lifeislife.cn/posts/onedrive-api%E7%94%B3%E8%AF%B7%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/","summary":"\u003cp\u003eåœ¨å¼€å‘åº”ç”¨æ—¶,æˆ‘ä»¬ç»å¸¸éœ€è¦å®ç°æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚ä¾‹å¦‚æˆ‘ä¹‹å‰å¼€å‘çš„è¡¨å•å¡«å†™å·¥å…·(QuickFillForm),å¦‚æœä¸ä¿å­˜åˆ°ç½‘ç›˜,æ¢ä¸ªæµè§ˆå™¨æ•°æ®å°±ä¸¢å¤±äº†;ä½†å¦‚æœæ¥å…¥ OneDrive åŒæ­¥,ç”¨æˆ·å°±èƒ½åœ¨å„ä¸ªè®¾å¤‡ä¸Šæ— ç¼ä½¿ç”¨ã€‚æœ¬æ–‡å°†ä»¥è¿™ä¸ªå®é™…æ¡ˆä¾‹ä¸ºä¾‹,è¯¦ç»†è¯´æ˜å¦‚ä½•ç”³è¯·å’Œé…ç½® OneDrive API,å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®ç°ç½‘ç›˜åŒæ­¥åŠŸèƒ½ã€‚\u003c/p\u003e","title":"OneDrive API ç”³è¯·é…ç½®æŒ‡å— - å®ç°ç½‘ç›˜åŒæ­¥åŠŸèƒ½"},{"content":"åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æœ¬åœ°ç¼–å†™ä»£ç ï¼Œç„¶åå°†ä»£ç åŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•æˆ–éƒ¨ç½²ã€‚ä¼ ç»Ÿçš„æ–¹å¼æ˜¯ä½¿ç”¨ FileZillaã€WinSCP ç­‰ç¬¬ä¸‰æ–¹å·¥å…·æ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶ï¼Œè¿™ç§æ–¹å¼ä¸ä»…ç¹çï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚VSCode çš„ SFTP æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°æœ¬åœ°ä»£ç ä¸è¿œç¨‹æœåŠ¡å™¨çš„è‡ªåŠ¨åŒæ­¥ï¼Œå¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚\nåº”ç”¨åœºæ™¯ SFTP æ’ä»¶é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š\næœ¬åœ°å¼€å‘ï¼Œè¿œç¨‹è°ƒè¯•ï¼šåœ¨æœ¬åœ°ç¼–å†™ä»£ç ï¼Œä¿å­˜åè‡ªåŠ¨åŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œæ— éœ€æ‰‹åŠ¨ä¸Šä¼  å¿«é€Ÿéƒ¨ç½²ï¼šæœ¬åœ°æµ‹è¯•é€šè¿‡åï¼Œä¸€é”®åŒæ­¥åˆ°ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨ å¤šæœåŠ¡å™¨ç®¡ç†ï¼šåŒæ—¶ç®¡ç†å¤šä¸ªè¿œç¨‹æœåŠ¡å™¨ï¼Œå¿«é€Ÿåˆ‡æ¢ä¸Šä¼ ç›®æ ‡ å›¢é˜Ÿåä½œï¼šç»Ÿä¸€å¼€å‘ç¯å¢ƒï¼Œç¡®ä¿ä»£ç åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œä¸€è‡´ å®‰è£…æ’ä»¶ æ‰“å¼€ VSCodeï¼ŒæŒ‰ä¸‹å¿«æ·é”® Ctrl + Shift + X æ‰“å¼€æ‰©å±•å•†åº—ï¼Œæœç´¢ sftpï¼Œæ‰¾åˆ°åä¸º SFTP çš„æ’ä»¶ï¼ˆä½œè€…ï¼šNatizyskunkï¼‰ï¼Œè¿™æ˜¯å®‰è£…é‡æœ€é«˜ã€æœ€å—æ¬¢è¿çš„ SFTP æ’ä»¶ã€‚ç‚¹å‡»å®‰è£…å³å¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å®‰è£…å®Œæˆåï¼ŒVSCode ä¼šåœ¨ä¾§è¾¹æ æ˜¾ç¤º SFTP å›¾æ ‡ï¼Œè¡¨ç¤ºæ’ä»¶å·²æˆåŠŸå®‰è£…ã€‚\né…ç½®æ’ä»¶ ç”Ÿæˆé…ç½®æ–‡ä»¶ æ’ä»¶å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå½“å‰é¡¹ç›®åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼š\næ–¹å¼ä¸€ï¼šä½¿ç”¨å‘½ä»¤é¢æ¿\næŒ‰ä¸‹å¿«æ·é”® Ctrl + Shift + P æ‰“å¼€å‘½ä»¤é¢æ¿ è¾“å…¥ SFTP: Config å¹¶å›è½¦ VSCode ä¼šåœ¨å½“å‰å·¥ä½œåŒºçš„ .vscode æ–‡ä»¶å¤¹ä¸‹è‡ªåŠ¨ç”Ÿæˆ sftp.json é…ç½®æ–‡ä»¶ æ–¹å¼äºŒï¼šå³é”®èœå•\nåœ¨ VSCode èµ„æºç®¡ç†å™¨ä¸­ï¼Œå³é”®ç‚¹å‡»é¡¹ç›®æ–‡ä»¶å¤¹ é€‰æ‹© SFTP: Config åŒæ ·ä¼šç”Ÿæˆ sftp.json é…ç½®æ–‡ä»¶ åŸºç¡€é…ç½®ç¤ºä¾‹ æ‰“å¼€ç”Ÿæˆçš„ sftp.json æ–‡ä»¶ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªé»˜è®¤çš„é…ç½®æ¨¡æ¿ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€é…ç½®ç¤ºä¾‹ï¼š\n{ \u0026#34;name\u0026#34;: \u0026#34;æˆ‘çš„æœåŠ¡å™¨\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;192.168.1.100\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;sftp\u0026#34;, \u0026#34;port\u0026#34;: 22, \u0026#34;username\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;your_password\u0026#34;, \u0026#34;remotePath\u0026#34;: \u0026#34;/var/www/project\u0026#34;, \u0026#34;uploadOnSave\u0026#34;: true, \u0026#34;useTempFile\u0026#34;: false, \u0026#34;openSsh\u0026#34;: false } å®Œæ•´é…ç½®ç¤ºä¾‹ ä¸‹é¢æ˜¯ä¸€ä¸ªåŒ…å«æ›´å¤šé€‰é¡¹çš„å®Œæ•´é…ç½®ç¤ºä¾‹ï¼š\n{ \u0026#34;name\u0026#34;: \u0026#34;ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;192.168.1.100\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;sftp\u0026#34;, \u0026#34;port\u0026#34;: 22, \u0026#34;username\u0026#34;: \u0026#34;deployer\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;your_password\u0026#34;, \u0026#34;remotePath\u0026#34;: \u0026#34;/home/deployer/project\u0026#34;, \u0026#34;context\u0026#34;: \u0026#34;./\u0026#34;, \u0026#34;uploadOnSave\u0026#34;: true, \u0026#34;useTempFile\u0026#34;: false, \u0026#34;openSsh\u0026#34;: false, \u0026#34;downloadOnOpen\u0026#34;: false, \u0026#34;ignore\u0026#34;: [ \u0026#34;.vscode\u0026#34;, \u0026#34;.git\u0026#34;, \u0026#34;.DS_Store\u0026#34;, \u0026#34;node_modules\u0026#34;, \u0026#34;*.log\u0026#34;, \u0026#34;*.tmp\u0026#34; ], \u0026#34;watcher\u0026#34;: { \u0026#34;files\u0026#34;: \u0026#34;**/*\u0026#34;, \u0026#34;autoUpload\u0026#34;: true, \u0026#34;autoDelete\u0026#34;: false }, \u0026#34;syncOption\u0026#34;: { \u0026#34;delete\u0026#34;: false, \u0026#34;skipCreate\u0026#34;: false, \u0026#34;ignoreExisting\u0026#34;: false, \u0026#34;update\u0026#34;: true }, \u0026#34;sshConfigPath\u0026#34;: null, \u0026#34;concurrency\u0026#34;: 4 } é…ç½®å‚æ•°è¯¦è§£ è¿æ¥é…ç½®å‚æ•° å‚æ•° ç±»å‹ è¯´æ˜ ç¤ºä¾‹ name String é…ç½®åç§°ï¼Œç”¨äºåŒºåˆ†å¤šä¸ªæœåŠ¡å™¨é…ç½® \u0026quot;ç”Ÿäº§ç¯å¢ƒ\u0026quot; host String æœåŠ¡å™¨ IP åœ°å€æˆ–åŸŸåï¼ˆå¿…å¡«ï¼‰ \u0026quot;192.168.1.100\u0026quot; port Number ç«¯å£å·ï¼ŒSFTP é»˜è®¤ 22ï¼ŒFTP é»˜è®¤ 21 22 protocol String ä¼ è¾“åè®®ï¼Œå¯é€‰ sftp æˆ– ftp \u0026quot;sftp\u0026quot; username String ç™»å½•ç”¨æˆ·åï¼ˆå¿…å¡«ï¼‰ \u0026quot;root\u0026quot; password String ç™»å½•å¯†ç  \u0026quot;your_password\u0026quot; è®¤è¯æ–¹å¼å‚æ•° SFTP æ’ä»¶æ”¯æŒä¸‰ç§è®¤è¯æ–¹å¼ï¼š\n1. å¯†ç è®¤è¯ï¼ˆæœ€ç®€å•ï¼‰ { \u0026#34;username\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;your_password\u0026#34; } 2. å¯†é’¥è®¤è¯ï¼ˆæ¨èï¼‰ { \u0026#34;username\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;privateKeyPath\u0026#34;: \u0026#34;C:\\\\Users\\\\YourName\\\\.ssh\\\\id_rsa\u0026#34;, \u0026#34;passphrase\u0026#34;: \u0026#34;å¯†é’¥å¯†ç ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰\u0026#34; } å¯†é’¥æ–‡ä»¶è·¯å¾„è¯´æ˜ï¼š\nWindows: C:\\\\Users\\\\YourName\\\\.ssh\\\\id_rsa æˆ– ~/.ssh/id_rsa Linux/Mac: ~/.ssh/id_rsa æ”¯æŒ OpenSSH æ ¼å¼å’Œ PPK æ ¼å¼çš„å¯†é’¥ 3. SSH Config é…ç½®ï¼ˆé«˜çº§ï¼‰ å¦‚æœä½ å·²ç»é…ç½®äº† SSH config æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨ï¼š\n{ \u0026#34;sshConfigPath\u0026#34;: \u0026#34;~/.ssh/config\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;myserver\u0026#34; } å¯¹åº”çš„ SSH config æ–‡ä»¶å†…å®¹ï¼š\nHost myserver HostName 192.168.1.100 User deployer Port 22 IdentityFile ~/.ssh/id_rsa è·¯å¾„é…ç½®å‚æ•° å‚æ•° ç±»å‹ è¯´æ˜ ç¤ºä¾‹ remotePath String è¿œç¨‹æœåŠ¡å™¨çš„ç›®æ ‡è·¯å¾„ï¼ˆå¿…å¡«ï¼‰ \u0026quot;/var/www/project\u0026quot; context String æœ¬åœ°é¡¹ç›®çš„ç›¸å¯¹è·¯å¾„ï¼Œé»˜è®¤ä¸º ./ \u0026quot;./src\u0026quot; è·¯å¾„é…ç½®è¯´æ˜ï¼š\nå‡è®¾æœ¬åœ°é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š\nproject/ â”œâ”€â”€ src/ â”‚ â”œâ”€â”€ index.js â”‚ â””â”€â”€ utils.js â”œâ”€â”€ tests/ â””â”€â”€ .vscode/ â””â”€â”€ sftp.json å¦‚æœ context ä¸º \u0026quot;./\u0026quot; ä¸” remotePath ä¸º \u0026quot;/var/www/project\u0026quot;ï¼Œåˆ™ src/index.js ä¼šä¸Šä¼ åˆ° /var/www/project/src/index.js å¦‚æœ context ä¸º \u0026quot;./src\u0026quot; ä¸” remotePath ä¸º \u0026quot;/var/www/project\u0026quot;ï¼Œåˆ™ src/index.js ä¼šä¸Šä¼ åˆ° /var/www/project/index.js è‡ªåŠ¨åŒæ­¥å‚æ•° å‚æ•° ç±»å‹ è¯´æ˜ é»˜è®¤å€¼ uploadOnSave Boolean ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨ä¸Šä¼  false downloadOnOpen Boolean æ‰“å¼€æ–‡ä»¶æ—¶è‡ªåŠ¨ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ false useTempFile Boolean ä¸Šä¼ æ—¶ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ï¼ˆé¿å…è¦†ç›–ï¼‰ false æœ€ä½³å®è·µå»ºè®®ï¼š\nå¼€å‘ç¯å¢ƒï¼šè®¾ç½® uploadOnSave: trueï¼Œæ–¹ä¾¿å¿«é€ŸåŒæ­¥ ç”Ÿäº§ç¯å¢ƒï¼šè®¾ç½® uploadOnSave: falseï¼Œé¿å…è¯¯æ“ä½œ å¿½ç•¥æ–‡ä»¶é…ç½® ignore å‚æ•°ç”¨äºæŒ‡å®šå“ªäº›æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä¸éœ€è¦åŒæ­¥ï¼Œæ”¯æŒ glob æ¨¡å¼ï¼š\n{ \u0026#34;ignore\u0026#34;: [ \u0026#34;**/.vscode/**\u0026#34;, \u0026#34;**/.git/**\u0026#34;, \u0026#34;**/.DS_Store\u0026#34;, \u0026#34;**/node_modules/**\u0026#34;, \u0026#34;**/*.log\u0026#34;, \u0026#34;**/*.tmp\u0026#34;, \u0026#34;**/dist/**\u0026#34;, \u0026#34;**/coverage/**\u0026#34; ] } å¸¸ç”¨å¿½ç•¥æ¨¡å¼ï¼š\n**/.git/**ï¼šå¿½ç•¥ Git ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶ **/node_modules/**ï¼šå¿½ç•¥ Node.js ä¾èµ–åŒ… **/*.logï¼šå¿½ç•¥æ‰€æœ‰æ—¥å¿—æ–‡ä»¶ **/dist/**ï¼šå¿½ç•¥æ„å»ºè¾“å‡ºç›®å½• ç›‘å¬å™¨é…ç½®ï¼ˆWatcherï¼‰ ç›‘å¬å™¨å¯ä»¥ç›‘æ§æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨æ‰§è¡ŒåŒæ­¥æ“ä½œï¼š\n{ \u0026#34;watcher\u0026#34;: { \u0026#34;files\u0026#34;: \u0026#34;**/*\u0026#34;, \u0026#34;autoUpload\u0026#34;: true, \u0026#34;autoDelete\u0026#34;: false } } å‚æ•° ç±»å‹ è¯´æ˜ é»˜è®¤å€¼ files String ç›‘å¬çš„æ–‡ä»¶æ¨¡å¼ï¼ˆglobï¼‰ false autoUpload Boolean æ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨ä¸Šä¼  false autoDelete Boolean æœ¬åœ°åˆ é™¤æ–‡ä»¶æ—¶è‡ªåŠ¨åˆ é™¤è¿œç¨‹æ–‡ä»¶ false æ³¨æ„äº‹é¡¹ï¼š\nautoDelete: true å¯èƒ½å¯¼è‡´è¯¯åˆ é™¤ï¼Œè¯·è°¨æ…ä½¿ç”¨ ç›‘å¬å™¨ä¼šæŒç»­è¿è¡Œï¼Œå¯èƒ½å½±å“æ€§èƒ½ï¼Œå»ºè®®æŒ‰éœ€å¯ç”¨ åŒæ­¥é€‰é¡¹ï¼ˆSync Optionï¼‰ syncOption ç”¨äºé…ç½®æ‰‹åŠ¨åŒæ­¥æ—¶çš„è¡Œä¸ºï¼š\n{ \u0026#34;syncOption\u0026#34;: { \u0026#34;delete\u0026#34;: false, \u0026#34;skipCreate\u0026#34;: false, \u0026#34;ignoreExisting\u0026#34;: false, \u0026#34;update\u0026#34;: true } } å‚æ•° ç±»å‹ è¯´æ˜ delete Boolean åˆ é™¤è¿œç¨‹æœåŠ¡å™¨ä¸Šå¤šä½™çš„æ–‡ä»¶ skipCreate Boolean è·³è¿‡åˆ›å»ºæ–°æ–‡ä»¶ ignoreExisting Boolean å¿½ç•¥å·²å­˜åœ¨çš„æ–‡ä»¶ update Boolean æ›´æ–°å·²ä¿®æ”¹çš„æ–‡ä»¶ æ€§èƒ½ä¼˜åŒ–å‚æ•° å‚æ•° ç±»å‹ è¯´æ˜ é»˜è®¤å€¼ concurrency Number å¹¶å‘ä¸Šä¼ çš„æ–‡ä»¶æ•°é‡ 4 connectTimeout Number è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ 10000 keepalive Number ä¿æŒè¿æ¥çš„é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ 10000 { \u0026#34;concurrency\u0026#34;: 8, \u0026#34;connectTimeout\u0026#34;: 15000, \u0026#34;keepalive\u0026#34;: 5000 } æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼š\nç½‘ç»œç¯å¢ƒå¥½æ—¶ï¼Œå¯ä»¥å¢åŠ  concurrency æé«˜ä¸Šä¼ é€Ÿåº¦ ç½‘ç»œä¸ç¨³å®šæ—¶ï¼Œå¢åŠ  connectTimeout é¿å…è¿æ¥è¶…æ—¶ é¢‘ç¹æ“ä½œæ—¶ï¼Œå‡å° keepalive ä¿æŒè¿æ¥æ´»è·ƒ æ’ä»¶ä½¿ç”¨ å¸¸ç”¨æ“ä½œ å®‰è£…å¹¶é…ç½®å¥½æ’ä»¶åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ï¼š\n1. ä¸Šä¼ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ æ–¹å¼ä¸€ï¼šå³é”®èœå•\nåœ¨èµ„æºç®¡ç†å™¨ä¸­å³é”®ç‚¹å‡»æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ é€‰æ‹© Upload ä¸Šä¼ åˆ°æœåŠ¡å™¨ æ–¹å¼äºŒï¼šå‘½ä»¤é¢æ¿\næŒ‰ Ctrl + Shift + P æ‰“å¼€å‘½ä»¤é¢æ¿ è¾“å…¥ SFTP: Upload å¹¶é€‰æ‹©ç›¸åº”çš„å‘½ä»¤ 2. ä¸‹è½½æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ å³é”®ç‚¹å‡»æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ é€‰æ‹© Download ä»æœåŠ¡å™¨ä¸‹è½½ 3. åŒæ­¥æ“ä½œ åŒæ­¥æœ¬åœ°åˆ°è¿œç¨‹ï¼š\nå‘½ä»¤é¢æ¿è¾“å…¥ SFTP: Sync Local -\u0026gt; Remote å°†æœ¬åœ°æ‰€æœ‰æ–‡ä»¶åŒæ­¥åˆ°æœåŠ¡å™¨ åŒæ­¥è¿œç¨‹åˆ°æœ¬åœ°ï¼š\nå‘½ä»¤é¢æ¿è¾“å…¥ SFTP: Sync Remote -\u0026gt; Local å°†æœåŠ¡å™¨æ–‡ä»¶åŒæ­¥åˆ°æœ¬åœ° åŒå‘åŒæ­¥ï¼š\nå‘½ä»¤é¢æ¿è¾“å…¥ SFTP: Sync Both Directions æ ¹æ®æ–‡ä»¶ä¿®æ”¹æ—¶é—´è‡ªåŠ¨åˆ¤æ–­åŒæ­¥æ–¹å‘ 4. å¯¹æ¯”æ–‡ä»¶å·®å¼‚ å³é”®ç‚¹å‡»æ–‡ä»¶ é€‰æ‹© Diff with Remote VSCode ä¼šæ˜¾ç¤ºæœ¬åœ°æ–‡ä»¶å’Œè¿œç¨‹æ–‡ä»¶çš„å·®å¼‚ 5. åˆ—å‡ºè¿œç¨‹æ–‡ä»¶ å‘½ä»¤é¢æ¿è¾“å…¥ SFTP: List å¯ä»¥æµè§ˆè¿œç¨‹æœåŠ¡å™¨çš„æ–‡ä»¶ç›®å½• å®Œæ•´å‘½ä»¤åˆ—è¡¨ æŒ‰ Ctrl + Shift + P æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ SFTP å¯ä»¥çœ‹åˆ°æ‰€æœ‰å¯ç”¨å‘½ä»¤ï¼š\nå‘½ä»¤ è¯´æ˜ SFTP: Config åˆ›å»ºæˆ–ç¼–è¾‘é…ç½®æ–‡ä»¶ SFTP: Upload ä¸Šä¼ å½“å‰æ–‡ä»¶ SFTP: Upload Folder ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ SFTP: Download ä¸‹è½½å½“å‰æ–‡ä»¶ SFTP: Download Folder ä¸‹è½½æ•´ä¸ªæ–‡ä»¶å¤¹ SFTP: Sync Local -\u0026gt; Remote æœ¬åœ°åŒæ­¥åˆ°è¿œç¨‹ SFTP: Sync Remote -\u0026gt; Local è¿œç¨‹åŒæ­¥åˆ°æœ¬åœ° SFTP: Sync Both Directions åŒå‘åŒæ­¥ SFTP: Diff with Remote å¯¹æ¯”æœ¬åœ°å’Œè¿œç¨‹æ–‡ä»¶ SFTP: List åˆ—å‡ºè¿œç¨‹ç›®å½• SFTP: List All åˆ—å‡ºæ‰€æœ‰é…ç½®çš„æœåŠ¡å™¨ SFTP: Delete åˆ é™¤è¿œç¨‹æ–‡ä»¶ å¤šæœåŠ¡å™¨é…ç½® åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åŒæ—¶ç®¡ç†å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒå¤šä¸ªæœåŠ¡å™¨ã€‚SFTP æ’ä»¶æ”¯æŒåœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­é…ç½®å¤šä¸ªæœåŠ¡å™¨ã€‚\né…ç½®å¤šä¸ªæœåŠ¡å™¨ åœ¨ sftp.json ä¸­ä½¿ç”¨æ•°ç»„æ ¼å¼é…ç½®å¤šä¸ªæœåŠ¡å™¨ï¼š\n[ { \u0026#34;name\u0026#34;: \u0026#34;å¼€å‘ç¯å¢ƒ\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;192.168.1.101\u0026#34;, \u0026#34;port\u0026#34;: 22, \u0026#34;username\u0026#34;: \u0026#34;developer\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;dev_password\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;sftp\u0026#34;, \u0026#34;remotePath\u0026#34;: \u0026#34;/home/developer/project\u0026#34;, \u0026#34;uploadOnSave\u0026#34;: true, \u0026#34;ignore\u0026#34;: [ \u0026#34;.vscode/**\u0026#34;, \u0026#34;.git/**\u0026#34;, \u0026#34;node_modules/**\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;æµ‹è¯•ç¯å¢ƒ\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;192.168.1.102\u0026#34;, \u0026#34;port\u0026#34;: 22, \u0026#34;username\u0026#34;: \u0026#34;tester\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;test_password\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;sftp\u0026#34;, \u0026#34;remotePath\u0026#34;: \u0026#34;/var/www/test\u0026#34;, \u0026#34;uploadOnSave\u0026#34;: false, \u0026#34;ignore\u0026#34;: [ \u0026#34;.vscode/**\u0026#34;, \u0026#34;.git/**\u0026#34;, \u0026#34;node_modules/**\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;ç”Ÿäº§ç¯å¢ƒ\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;192.168.1.103\u0026#34;, \u0026#34;port\u0026#34;: 22, \u0026#34;username\u0026#34;: \u0026#34;deployer\u0026#34;, \u0026#34;privateKeyPath\u0026#34;: \u0026#34;~/.ssh/production_key\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;sftp\u0026#34;, \u0026#34;remotePath\u0026#34;: \u0026#34;/var/www/production\u0026#34;, \u0026#34;uploadOnSave\u0026#34;: false, \u0026#34;ignore\u0026#34;: [ \u0026#34;.vscode/**\u0026#34;, \u0026#34;.git/**\u0026#34;, \u0026#34;node_modules/**\u0026#34;, \u0026#34;*.log\u0026#34; ] } ] åˆ‡æ¢æœåŠ¡å™¨ é…ç½®å¤šä¸ªæœåŠ¡å™¨åï¼Œæ¯æ¬¡æ‰§è¡Œä¸Šä¼ ã€ä¸‹è½½ç­‰æ“ä½œæ—¶ï¼ŒVSCode ä¼šå¼¹å‡ºé€‰æ‹©æ¡†ï¼Œè®©ä½ é€‰æ‹©ç›®æ ‡æœåŠ¡å™¨ã€‚\nä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤é¢æ¿ SFTP: List All æŸ¥çœ‹æ‰€æœ‰é…ç½®çš„æœåŠ¡å™¨ã€‚\næœ€ä½³å®è·µ 1. å®‰å…¨é…ç½®å»ºè®® ä¸è¦å°†å¯†ç æ˜æ–‡å†™å…¥é…ç½®æ–‡ä»¶ï¼š\næ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡\n{ \u0026#34;username\u0026#34;: \u0026#34;${env.SFTP_USER}\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;${env.SFTP_PASSWORD}\u0026#34; } æ–¹æ¡ˆäºŒï¼šä½¿ç”¨å¯†é’¥è®¤è¯ï¼ˆæ¨èï¼‰\n{ \u0026#34;username\u0026#34;: \u0026#34;deployer\u0026#34;, \u0026#34;privateKeyPath\u0026#34;: \u0026#34;~/.ssh/id_rsa\u0026#34; } å°†é…ç½®æ–‡ä»¶åŠ å…¥ .gitignoreï¼š\n.vscode/sftp.json å¦‚æœéœ€è¦å›¢é˜Ÿå…±äº«é…ç½®ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª sftp.json.example æ¨¡æ¿æ–‡ä»¶ï¼Œå°†æ•æ„Ÿä¿¡æ¯æ›¿æ¢ä¸ºå ä½ç¬¦ï¼š\n{ \u0026#34;name\u0026#34;: \u0026#34;ç¤ºä¾‹é…ç½®\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;your_server_ip\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;your_username\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;your_password\u0026#34;, \u0026#34;remotePath\u0026#34;: \u0026#34;/path/to/project\u0026#34; } 2. å·¥ä½œæµå»ºè®® å¼€å‘é˜¶æ®µï¼š\n{ \u0026#34;uploadOnSave\u0026#34;: true, \u0026#34;downloadOnOpen\u0026#34;: false, \u0026#34;watcher\u0026#34;: { \u0026#34;autoUpload\u0026#34;: true } } éƒ¨ç½²é˜¶æ®µï¼š\n{ \u0026#34;uploadOnSave\u0026#34;: false, \u0026#34;syncOption\u0026#34;: { \u0026#34;update\u0026#34;: true, \u0026#34;delete\u0026#34;: false } } 3. å›¢é˜Ÿåä½œå»ºè®® ä¸ºå›¢é˜Ÿåˆ›å»ºç»Ÿä¸€çš„é…ç½®æ¨¡æ¿ï¼š\n{ \u0026#34;name\u0026#34;: \u0026#34;å›¢é˜Ÿå¼€å‘æœåŠ¡å™¨\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;${env.DEV_SERVER}\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;${env.DEV_USER}\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;${env.DEV_PASSWORD}\u0026#34;, \u0026#34;remotePath\u0026#34;: \u0026#34;/home/${env.DEV_USER}/project\u0026#34;, \u0026#34;uploadOnSave\u0026#34;: true, \u0026#34;ignore\u0026#34;: [ \u0026#34;.vscode/**\u0026#34;, \u0026#34;.git/**\u0026#34;, \u0026#34;.env\u0026#34;, \u0026#34;node_modules/**\u0026#34;, \u0026#34;*.log\u0026#34; ] } å›¢é˜Ÿæˆå‘˜åœ¨æœ¬åœ°åˆ›å»º .env æ–‡ä»¶é…ç½®è‡ªå·±çš„ç¯å¢ƒå˜é‡å³å¯ã€‚\n4. æ€§èƒ½ä¼˜åŒ–å»ºè®® å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå»ºè®®ä¼˜åŒ–ä»¥ä¸‹é…ç½®ï¼š\n{ \u0026#34;concurrency\u0026#34;: 8, \u0026#34;ignore\u0026#34;: [ \u0026#34;node_modules/**\u0026#34;, \u0026#34;dist/**\u0026#34;, \u0026#34;build/**\u0026#34;, \u0026#34;.git/**\u0026#34;, \u0026#34;**/*.log\u0026#34; ], \u0026#34;syncOption\u0026#34;: { \u0026#34;update\u0026#34;: true } } å¸¸è§é—®é¢˜ 1. è¿æ¥è¶…æ—¶ **é—®é¢˜ï¼š**ä¸Šä¼ æ–‡ä»¶æ—¶æç¤ºè¿æ¥è¶…æ—¶ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\næ£€æŸ¥æœåŠ¡å™¨ IP å’Œç«¯å£æ˜¯å¦æ­£ç¡® æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾å¯¹åº”ç«¯å£ å¢åŠ  connectTimeout å‚æ•°ï¼š { \u0026#34;connectTimeout\u0026#34;: 30000 } 2. æƒé™ä¸è¶³ **é—®é¢˜ï¼š**ä¸Šä¼ æ–‡ä»¶æç¤º Permission deniedã€‚\nè§£å†³æ–¹æ¡ˆï¼š\nç¡®è®¤ç™»å½•ç”¨æˆ·å¯¹ç›®æ ‡ç›®å½•æœ‰å†™æƒé™ åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼šchmod 755 /target/path æˆ–åˆ‡æ¢åˆ°æœ‰æƒé™çš„ç”¨æˆ· 3. å¯†é’¥è®¤è¯å¤±è´¥ **é—®é¢˜ï¼š**ä½¿ç”¨å¯†é’¥ç™»å½•æ—¶æç¤ºè®¤è¯å¤±è´¥ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\nç¡®è®¤å¯†é’¥æ–‡ä»¶è·¯å¾„æ­£ç¡® ç¡®è®¤å¯†é’¥æ–‡ä»¶æƒé™ï¼šchmod 600 ~/.ssh/id_rsa å¦‚æœå¯†é’¥æœ‰å¯†ç ï¼Œéœ€è¦é…ç½® passphrase Windows ç”¨æˆ·æ³¨æ„è·¯å¾„æ ¼å¼ï¼šC:\\\\Users\\\\Name\\\\.ssh\\\\id_rsa 4. æ–‡ä»¶åŒæ­¥å†²çª **é—®é¢˜ï¼š**æœ¬åœ°å’Œè¿œç¨‹æ–‡ä»¶éƒ½è¢«ä¿®æ”¹ï¼Œä¸çŸ¥é“ä»¥å“ªä¸ªä¸ºå‡†ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\nä½¿ç”¨ Diff with Remote å¯¹æ¯”å·®å¼‚ æ‰‹åŠ¨åˆå¹¶ä»£ç åå†ä¸Šä¼  ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·å¦‚ Git ç®¡ç†ä»£ç  5. ä¸Šä¼ é€Ÿåº¦æ…¢ **é—®é¢˜ï¼š**ä¸Šä¼ å¤§é‡æ–‡ä»¶æ—¶é€Ÿåº¦å¾ˆæ…¢ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\nå¢åŠ å¹¶å‘æ•°ï¼š\u0026quot;concurrency\u0026quot;: 10 å®Œå–„ ignore é…ç½®ï¼Œé¿å…ä¸Šä¼ ä¸å¿…è¦çš„æ–‡ä»¶ ä½¿ç”¨ Sync Local -\u0026gt; Remote è€Œä¸æ˜¯ Upload Folder å‚è€ƒèµ„æ–™ SFTP æ’ä»¶å®˜æ–¹æ–‡æ¡£ SSH å¯†é’¥è®¤è¯é…ç½® SFTP åè®®ä»‹ç» ","permalink":"https://lifeislife.cn/posts/vscode-sftp%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%A0%81%E4%B8%8E%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8C%E6%AD%A5/","summary":"\u003cp\u003eåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æœ¬åœ°ç¼–å†™ä»£ç ï¼Œç„¶åå°†ä»£ç åŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•æˆ–éƒ¨ç½²ã€‚ä¼ ç»Ÿçš„æ–¹å¼æ˜¯ä½¿ç”¨ FileZillaã€WinSCP ç­‰ç¬¬ä¸‰æ–¹å·¥å…·æ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶ï¼Œè¿™ç§æ–¹å¼ä¸ä»…ç¹çï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚VSCode çš„ SFTP æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°æœ¬åœ°ä»£ç ä¸è¿œç¨‹æœåŠ¡å™¨çš„è‡ªåŠ¨åŒæ­¥ï¼Œå¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚\u003c/p\u003e","title":"VSCode SFTPæ’ä»¶å®ç°æœ¬åœ°ä»£ç ä¸è¿œç¨‹æœåŠ¡å™¨åŒæ­¥"},{"content":"å‰è¨€ Meta Quest 3 æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„ VR ä¸€ä½“æœºï¼Œä½†åœ¨å›½å†…æ¿€æ´»å­˜åœ¨ç½‘ç»œé™åˆ¶é—®é¢˜ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Netch å·¥å…·ï¼Œé€šè¿‡ Windows ç”µè„‘é…ç½®ç½‘ç»œä»£ç†ï¼Œå®ç° Quest 3 åœ¨å›½å†…çš„é¡ºåˆ©æ¿€æ´»ã€‚\nå‡†å¤‡å·¥ä½œ åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹å†…å®¹ï¼š\nWindows ç”µè„‘ä¸€å° ä¸€ä¸ªè·¯ç”±å™¨ VPN ä»£ç† è·å–ä»£ç†æœåŠ¡ é¦–å…ˆéœ€è¦è·å–ä¸€ä¸ª VPN ä»£ç†æœåŠ¡ã€‚å¯ä»¥è®¿é—®ä»¥ä¸‹ä»»æ„é“¾æ¥æ³¨å†Œï¼Œå¿…é¡»æ”¯æŒ UDP è½¬å‘ï¼Œè¿æ¥ WiFi æ—¶éœ€è¦å¯¹è®¾å¤‡è¿›è¡Œæ—¶é—´æ ¡å‡†ï¼Œè¿™ä¸ªæ ¡å‡†æ­¥éª¤å°±åŒæ—¶éªŒè¯è¿™ä¸ª WiFi æ˜¯å¦å¯ä»¥è¿ç½‘ï¼Œä½†è¿™ä¸ªæ ¡å‡†æ˜¯åŸºäº UDP çš„ï¼Œåªå¼€å¯æ¢¯å­çš„ç³»ç»Ÿä»£ç†åªèƒ½èµ° TCP åˆä¸æ”¯æŒ UDPï¼Œæ‰€ä»¥åªèƒ½ä¸Šç½‘ä¸èƒ½æ ¡å‡†æ—¶é—´ã€‚ç»å¤§éƒ¨åˆ†æœºåœºä¸æ”¯æŒ UDPï¼Œä½ å¯ä»¥å’¨è¯¢æœºåœºå®¢æœæ˜¯å¦æ”¯æŒ UDP è½¬å‘ï¼Œä¹Ÿå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£Quest ç½‘ç»œå—é™åŸå›  | Meta Quest ä¸­æ–‡æŒ‡å—ï¼Œæµ‹è¯•æ˜¯å¦æ”¯æŒ UDPã€‚\nå¦‚æœä½ æ²¡æœ‰ä»£ç†ï¼Œæˆ–è€…ä»£ç†ä¸æ”¯æŒ UDPï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ä»¥ä¸‹ä»£ç†ï¼Œæˆ‘å·²ç»æµ‹è¯•è¿‡ï¼š\né¾™çŒ«äº‘ è€çŒ«äº‘ Web3åŠ é€Ÿå™¨ é€‰æœ€ä¾¿å®œçš„ä¹°å°±è¡Œï¼Œåç»­å¯èƒ½ä¼šç”¨å…¶ä»–ä¸æ”¯æŒ UDP ä¾¿å®œçš„æœºåœºï¼Œæ‰€ä»¥ä¸è¦ä¹°è´µçš„ã€‚æˆ‘ä¹‹å‰ç”¨çš„æœºåœºå°±ä¸æ”¯æŒ UDPï¼Œä½†æ˜¯å¹³æ—¶ä½¿ç”¨å®Œå…¨å¤Ÿç”¨ï¼Œåªæœ‰åœ¨ Quest3 æ¿€æ´»æ˜¯ç”¨åˆ°è¿‡è¿™ä¸€æ¬¡ UDPã€‚\næœºåœºæ³¨å†Œä¹‹åæ³¨æ„çœ‹ä¸€ä¸‹æ˜¯å¦æ”¯æŒå¯¼å‡ºè®¢é˜…åœ°å€ï¼Œæœ‰ä¸€äº›æœºåœºåªèƒ½ä½¿ç”¨è‡ªå·±çš„å®¢æˆ·ç«¯ï¼Œé‚£å°±æ— æ³•ä½¿ç”¨ Netchã€‚è¯·ä¸€å®šè¦æ³¨æ„ï¼ï¼ï¼å› ä¸ºæ–‡ç« å¯èƒ½ç»´æŠ¤ä¸åŠæ—¶ï¼Œæˆ‘ä¹Ÿä¸ä¿è¯ä¸Šé¢çš„æœºåœºæ˜¯å¦è¿˜æ”¯æŒå¯¼å‡ºè®¢é˜…åœ°å€ã€‚ä¹‹å‰ä½¿ç”¨è¿‡ä¸‡è¾¾äº‘çš„æœºåœºï¼Œç”¨äº†ä¸€å¤©å°±å› ä¸ºæ— æ³•å¯¼å‡ºè®¢é˜…åœ°å€æ— æ³•ä½¿ç”¨äº†ã€‚ä»–å®¶æ”¹æˆåªèƒ½ä½¿ç”¨è‡ªå·±çš„å®¢æˆ·ç«¯äº†ã€‚\nNetch é…ç½®æ­¥éª¤ ä¸‹è½½ Netch ä»Netch å¼€æºä¸»é¡µä¸‹è½½æœ€æ–°ç‰ˆæœ¬ã€‚\né‡è¦æç¤ºï¼šä½¿ç”¨ Netch æ—¶ä¸èƒ½åŒæ—¶å¼€å¯å…¶ä»–ä»£ç†è½¯ä»¶ï¼å¦‚æœä¹‹å‰æœ‰å¼€å¯å…¶ä»–ä»£ç†ï¼Œè¯·å…¨éƒ¨å…³é—­åé‡å¯ç”µè„‘ã€‚\nå®‰è£… Netch è§£å‹ä¸‹è½½çš„å‹ç¼©åŒ…åˆ°ä»»æ„ç£ç›˜æ ¹ç›®å½• è¿è¡Œ Netch.exe æ–‡ä»¶ å®‰è£… Npcap å‰å¾€å®˜ç½‘ä¸‹è½½ Npcap å¹¶å®‰è£…Npcap: Windows Packet Capture Library \u0026amp; Driverã€‚\nå®‰è£…æ—¶é€‰æ‹©ï¼š\nSupport raw 802.11 traffic Install Npcap in WinPcap API-Compatible Mode æ·»åŠ è®¢é˜… ç‚¹å‡»ä¸Šæ–¹çš„\u0026quot;è®¢é˜…\u0026quot; â†’ \u0026ldquo;ç®¡ç†è®¢é˜…\u0026rdquo; \u003c!DOCTYPE html\u003e Responsive Image æ·»åŠ è®¢é˜…é“¾æ¥ \u003c!DOCTYPE html\u003e Responsive Image æ›´æ–°æœåŠ¡å™¨ ç‚¹å‡»ä¸Šæ–¹çš„\u0026quot;è®¢é˜…\u0026quot; â†’ \u0026ldquo;æ›´æ–°æœåŠ¡å™¨\u0026rdquo; \u003c!DOCTYPE html\u003e Responsive Image å¦‚æœæ›´æ–°å¤±è´¥ï¼Œæ£€æŸ¥è®¢é˜…é“¾æ¥æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿å…³é—­æ‰€æœ‰å…¶ä»–ä»£ç†è½¯ä»¶ é€‰æ‹©èŠ‚ç‚¹ ç‚¹å‡»\u0026quot;æœåŠ¡å™¨\u0026quot;ï¼Œé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¼˜å…ˆé€‰æ‹©ç¾å›½èŠ‚ç‚¹ å¦‚æœæ˜¯è‡ªå·±çš„ä»£ç†æœåŠ¡ï¼Œå¯ä»¥å¤šå°è¯•ä¸åŒèŠ‚ç‚¹ é€‰æ‹©æ¨¡å¼ ç‚¹å‡»\u0026quot;æ¨¡å¼\u0026quot;ï¼Œé€‰æ‹© [pcap2socks]Tencent(10.6.0.1)Preset\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½® DNS ç‚¹å‡»\u0026quot;è®¾ç½®\u0026quot; \u003c!DOCTYPE html\u003e Responsive Image åˆ‡æ¢åˆ°\u0026quot;WinTUN\u0026quot;é€‰é¡¹å¡ å‹¾é€‰\u0026quot;ä½¿ç”¨è‡ªå®šä¹‰ DNS\u0026quot; å‹¾é€‰\u0026quot;ä»£ç† DNS\u0026quot; å°† DNS æ”¹ä¸º 1.1.1.1 ç‚¹å‡»å³ä¸‹è§’\u0026quot;ä¿å­˜\u0026quot; \u003c!DOCTYPE html\u003e Responsive Image å¯åŠ¨ Netch ç‚¹å‡»å³ä¸‹è§’çš„\u0026quot;å¯åŠ¨\u0026quot;æŒ‰é’®ï¼Œç­‰å¾…å¯åŠ¨å®Œæˆã€‚\nåˆ¤æ–­å¯åŠ¨æˆåŠŸï¼š\n\u0026ldquo;å¯åŠ¨\u0026quot;æŒ‰é’®å˜æˆ\u0026quot;åœæ­¢\u0026rdquo; ä¸‹æ–¹å‡ºç°ç»¿è‰²åœ†å½¢æ ‡å¿— è½¯ä»¶å³ä¾§å‡ºç°ä»¥ä¸‹ç»ˆç«¯çª—å£ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¸¸è§é—®é¢˜å¤„ç† æç¤º\u0026quot;Wrong STUN Server\u0026quot; è¿›å…¥è®¾ç½®ï¼Œå°† STUN æœåŠ¡å™¨æ”¹ä¸ºä»¥ä¸‹ä»»æ„ä¸€ä¸ªï¼š\nstun.voipstunt.com stun.xten.com stun.ekiga.net æ²¡æœ‰ç»¿ç‚¹æˆ–æ˜¾ç¤º NOUDP/UnsupportedServer \u003c!DOCTYPE html\u003e Responsive Image å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š\nåˆ·æ–°çŠ¶æ€ï¼šç‚¹å‡» NOUDP åˆ·æ–°å‡ æ¬¡ï¼Œå¦‚æœå˜æˆé»„ç‚¹æˆ–çº¢ç‚¹ä¹Ÿå¯èƒ½èƒ½ç”¨ å…¼å®¹æ€§é—®é¢˜ï¼šè¿›å…¥è®¾ç½®ï¼Œå‹¾é€‰\u0026quot;TLS AllowInsecure\u0026quot;ï¼Œä¿å­˜åé‡è¯• \u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹ STUN æœåŠ¡å™¨ï¼šåŒä¸Šé¢çš„è§£å†³æ–¹æ¡ˆ æ£€æŸ¥å…¶ä»–è½¯ä»¶ï¼šç¡®ä¿å…³é—­æ‰€æœ‰å…¶ä»–ä»£ç†è½¯ä»¶åé‡å¯ç”µè„‘ æ£€æŸ¥èŠ‚ç‚¹ï¼šé€‰æ‹©å…¶ä»–èŠ‚ç‚¹é‡è¯• é‡å¯è®¾å¤‡ï¼šé‡å¯è·¯ç”±å™¨å’Œ Netch è·³è¿‡ç»¿ç‚¹æ£€æŸ¥ï¼šå¦‚æœåç»­ Quest3 èƒ½æ­£å¸¸æ›´æ–°ï¼ˆè¿›åº¦æ¡ä¼šèµ°ï¼‰ï¼Œå¯ä»¥ä¸ç”¨ç®¡ç»¿ç‚¹ æç¤º\u0026quot;æ‰¾ä¸åˆ° VCRUNTIME140.dll\u0026quot; æœç´¢ä¸‹è½½\u0026quot;Windows å¸¸ç”¨è¿è¡Œåº“\u0026quot;å¹¶å®‰è£…ã€‚\nQuest 3 æ¿€æ´»æµç¨‹ 1. è¿æ¥ WiFi å¯åŠ¨ Quest 3 åœ¨è¯­è¨€é€‰æ‹©ç•Œé¢é€‰æ‹©\u0026quot;ç®€ä½“ä¸­æ–‡\u0026quot; é€‰æ‹©\u0026quot;åœ¨å¤´æˆ´è®¾å¤‡ä¸­è¾“å…¥ WIFI ä¿¡æ¯\u0026quot; é€‰æ‹©ä½ çš„è·¯ç”±å™¨ WiFiï¼Œä¸è¦ç‚¹å‡»è¿æ¥ï¼Œéœ€è¦åé¢é…ç½®é«˜çº§é€‰é¡¹ 2. é…ç½®é™æ€ IP è¾“å…¥ WiFi å¯†ç åï¼Œç‚¹å‡»\u0026quot;é«˜çº§é€‰é¡¹\u0026quot;\nå°† IP è®¾ç½®ä»\u0026quot;DHCP\u0026quot;æ”¹ä¸º\u0026quot;é™æ€\u0026quot;\né…ç½®é™æ€ IP åœ°å€\nIP åœ°å€ï¼š10.6.0.1 ç½‘å…³ï¼š10.6.0.2 ç½‘ç»œå‰ç¼€é•¿åº¦ï¼š24 DNS1:8.8.8.8 æ»šåŠ¨åˆ°é¡µé¢æœ€ä¸‹æ–¹ï¼Œç‚¹å‡»\u0026quot;è¿æ¥\u0026quot;\næ­£å¸¸æƒ…å†µä¸‹ç‚¹å‡»è¿æ¥åï¼ŒNetch è½¯ä»¶æ—è¾¹çš„ç»ˆç«¯çª—å£ä¼šæœ‰å“åº”ï¼Œæœ‰ä¸€è¡Œè¾“å‡ºæç¤ºæŸä¸€ä¸ª IP åœ°å€è®¾å¤‡åŠ å…¥äº†é“¾æ¥ã€‚\n3. ç³»ç»Ÿæ›´æ–° è¿æ¥æˆåŠŸåï¼ŒQuest 3 ä¼šè‡ªåŠ¨è¿›å…¥æ›´æ–°æµç¨‹ã€‚æŒ‰ç…§æˆ‘çš„ç»éªŒï¼Œæ¿€æ´»è¿‡ç¨‹ä¸­ç»å¸¸æ–­è¿ï¼Œæ‰€ä»¥éœ€è¦å¤šå°è¯•å‡ æ¬¡ã€‚ä¸è¦å¼€å§‹æ›´æ–°å°±æŠŠæœºå™¨æ‰”ä¸€è¾¹ï¼Œç»å¸¸çœ‹çœ‹ã€‚\n","permalink":"https://lifeislife.cn/posts/quest3%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B-%E4%BD%BF%E7%94%A8netch/","summary":"\u003ch2 id=\"å‰è¨€\"\u003eå‰è¨€\u003c/h2\u003e\n\u003cp\u003eMeta Quest 3 æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„ VR ä¸€ä½“æœºï¼Œä½†åœ¨å›½å†…æ¿€æ´»å­˜åœ¨ç½‘ç»œé™åˆ¶é—®é¢˜ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Netch å·¥å…·ï¼Œé€šè¿‡ Windows ç”µè„‘é…ç½®ç½‘ç»œä»£ç†ï¼Œå®ç° Quest 3 åœ¨å›½å†…çš„é¡ºåˆ©æ¿€æ´»ã€‚\u003c/p\u003e\n\u003ch2 id=\"å‡†å¤‡å·¥ä½œ\"\u003eå‡†å¤‡å·¥ä½œ\u003c/h2\u003e\n\u003cp\u003eåœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹å†…å®¹ï¼š\u003c/p\u003e","title":"Quest3 æ¿€æ´»æ•™ç¨‹ - ä½¿ç”¨ Netch"},{"content":"å½“ç»ˆç«¯å‡ºç°è¾“å…¥å¡é¡¿ã€å‘½ä»¤æ‰§è¡Œåè¿Ÿè¿Ÿâ€œå›ä¸æ¥â€çš„æƒ…å†µï¼Œå¾€å¾€ä¸æ˜¯å•ä¸€å› ç´ å¯¼è‡´ã€‚æœ¬æ–‡è®°å½•äº†æˆ‘åœ¨ Git Bash ä¸Šçš„æ’æŸ¥è¿‡ç¨‹ï¼šæœ€ç»ˆå‘ç°æ˜¯ oh-my-zsh çš„ z æ’ä»¶åœ¨å®¶ç›®å½•ç´¯ç§¯äº†å¤§é‡ .z æ•°æ®æ–‡ä»¶ï¼Œå¼•å‘äº†æ˜æ˜¾çš„æ…¢å“åº”ã€‚åŒæ—¶ä¹Ÿæ•´ç†äº†ä¸€ä»½æ›´ç³»ç»Ÿçš„ä¼˜åŒ–ä¸æ’é”™æ¸…å•ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå®šä½å¹¶æ¶ˆé™¤å¸¸è§çš„æ€§èƒ½ç“¶é¢ˆã€‚\nä¸€ã€ç°è±¡ä¸ç¯å¢ƒ Git Bash ç»ˆç«¯å¡é¡¿ï¼šè¾“å…¥æœ‰æ˜æ˜¾å»¶è¿Ÿï¼Œå‘½ä»¤æ‰§è¡Œåè¿Ÿè¿Ÿä¸è¿”å›æç¤ºç¬¦ã€‚ ä½¿ç”¨çš„æ˜¯ zshï¼ˆé…åˆ oh-my-zshï¼‰ï¼Œå¯ç”¨äº†åŒ…æ‹¬ z åœ¨å†…çš„å¤šä¸ªæ’ä»¶ã€‚ å®¶ç›®å½•å‡ºç°äº†å¾ˆå¤š .z ç›¸å…³æ–‡ä»¶ï¼ˆz æ’ä»¶çš„è·³è½¬æ•°æ®åº“ï¼‰ï¼Œæ€€ç–‘æ•°æ®åº“è¿‡å¤§å¯¼è‡´æ…¢å“åº”ã€‚ äºŒã€æˆ‘çš„æ’æŸ¥ä¸è§£å†³è¿‡ç¨‹ 1) å…ˆéš”ç¦»é…ç½®ï¼šç”¨å¹²å‡€çš„ zsh -f å¯åŠ¨ zsh -f ä¼šåœ¨ä¸åŠ è½½ ~/.zshrc çš„å‰æä¸‹å¯åŠ¨ä¸€ä¸ªâ€œç©ºé…ç½®â€çš„ zshï¼Œèƒ½å¿«é€Ÿåˆ¤æ–­æ˜¯å¦æ˜¯é…ç½®æˆ–æ’ä»¶å¯¼è‡´é—®é¢˜ã€‚ å¦‚æœ zsh -f ä¸‹ç»ˆç«¯æ¢å¤é¡ºç•…ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šé—®é¢˜åœ¨ ~/.zshrc æˆ–å…¶å¼•å…¥çš„æ’ä»¶ä¸è„šæœ¬ã€‚ 2) å®šä½â€œå«Œç–‘æ’ä»¶â€ï¼šç§»é™¤ ~/.zshrc ä¸­çš„ z æ’ä»¶ æ‰“å¼€ ~/.zshrcï¼Œä» plugins=(...) ä¸­ç§»é™¤ zï¼Œä¿å­˜é€€å‡ºï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯ã€‚ å¦‚æœå¡é¡¿æ¶ˆå¤±ï¼Œè¿›ä¸€æ­¥ç¡®è®¤ z æ’ä»¶å°±æ˜¯ä¸»è¦åŸå› ã€‚ 3) æ¸…ç† z æ’ä»¶æ•°æ®åº“ï¼šåˆ é™¤å®¶ç›®å½•ä¸‹çš„ .z æ•°æ®æ–‡ä»¶ z æ’ä»¶é»˜è®¤ä¼šåœ¨å®¶ç›®å½•å­˜å‚¨è·¯å¾„æƒé‡æ•°æ®åº“ï¼Œæ–‡ä»¶åé€šå¸¸ä¸º ~/.zï¼ˆå¯èƒ½è¿˜æœ‰å¤‡ä»½ï¼Œæ¯”å¦‚ ~/.z.1 ç­‰ï¼‰ã€‚\næ‰§è¡Œï¼š\nrm -f ~/.z ~/.z.* æ³¨æ„ï¼šåªåˆ é™¤ .z åŠå…¶å¤‡ä»½ï¼Œå‹¿ç”¨å®½æ³›çš„é€šé…ç¬¦è¯¯åˆ å…¶ä»–ä»¥ .z å¼€å¤´çš„é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ ~/.zshrcã€~/.zsh_history ç­‰ï¼‰ã€‚\n4) éªŒè¯ å†æ¬¡å¯åŠ¨ Git Bashï¼Œè§‚å¯Ÿè¾“å…¥å“åº”ä¸å‘½ä»¤æ‰§è¡Œè¿”å›ã€‚è‹¥æ˜æ˜¾æ¢å¤æ­£å¸¸ï¼Œåˆ™é—®é¢˜ç¡®è®¤å¹¶è§£å†³ã€‚ ä¸‰ã€æ›´å¤šå¯èƒ½å¯¼è‡´ç»ˆç«¯å¡é¡¿çš„åŸå› ä¸ä¼˜åŒ–æ–¹æ³• ä¸‹é¢æŒ‰å±‚æ¬¡åˆ—å‡ºå¸¸è§ç“¶é¢ˆä¸å¤„ç†ç­–ç•¥ã€‚å»ºè®®ä»â€œå¿«é€Ÿéš”ç¦»â€åˆ°â€œé€æ­¥ä¼˜åŒ–â€ä¾æ¬¡è¿›è¡Œã€‚\nA. zsh é…ç½®ä¸æ’ä»¶å±‚é¢ ç”¨ zsh -f å¿«é€Ÿéš”ç¦»ï¼šå…ˆç¡®è®¤å¡é¡¿æ˜¯å¦æºè‡ª ~/.zshrcã€‚\nç”¨å†…ç½®æ€§èƒ½åˆ†æï¼š\nåœ¨äº¤äº’ä¼šè¯é‡Œæ‰§è¡Œï¼š\nzmodload zsh/zprof source ~/.zshrc zprof æŸ¥çœ‹å“ªä¸ªå‡½æ•°æˆ–æ’ä»¶è€—æ—¶æœ€å¤šï¼Œé’ˆå¯¹æ€§ä¼˜åŒ–æˆ–ç¦ç”¨ã€‚\nç²¾ç®€/ä¼˜åŒ–é«˜å¼€é”€æ’ä»¶ï¼š\nzsh-autosuggestionsï¼šåœ¨è¶…é•¿å†å²æˆ–è¿œç¨‹ç£ç›˜ä¸Šå¯èƒ½æ”¾å¤§å»¶è¿Ÿï¼Œå¿…è¦æ—¶æš‚æ—¶ç¦ç”¨ã€‚ zsh-syntax-highlightingï¼šå¯¹è¶…é•¿å‘½ä»¤è¡Œæˆ–å¤æ‚é«˜äº®ä¹Ÿå¯èƒ½é€ æˆå¡é¡¿ï¼Œå¯ç§»åˆ° ~/.zshrc æœ€æœ«åŠ è½½æˆ–æš‚æ—¶ç¦ç”¨ã€‚ git ç›¸å…³ä¸»é¢˜/æ®µï¼šæç¤ºç¬¦ä¸­æ˜¾ç¤ºä»“åº“çŠ¶æ€è‹¥æ¯æ¬¡åˆ·æ–°éƒ½åšä»£ä»·é«˜çš„æ£€æµ‹ï¼Œæ˜“å¯¼è‡´å¡é¡¿ï¼ˆè¯¦è§ä¸‹ä¸€èŠ‚ï¼‰ã€‚ æ¸…ç†ä¸é™åˆ¶ç¼“å­˜/å†å²ï¼š\nåˆ é™¤è¿‡æœŸçš„ ~/.zcompdump* æ–‡ä»¶ï¼Œè®©è¡¥å…¨ç¼“å­˜é‡æ–°ç”Ÿæˆï¼š\nrm -f ~/.zcompdump* compinit -C é™åˆ¶å†å²å¤§å°ï¼Œé¿å…å†å²è¿‡å¤§ï¼š\nexport HISTSIZE=5000 export SAVEHIST=5000 å¿…è¦æ—¶å‹ç¼©æˆ–æ¸…ç† ~/.zsh_historyï¼ˆå…ˆå¤‡ä»½ï¼Œå†ç”¨ä¸“é—¨å·¥å…·æˆ–è°¨æ…æ“ä½œï¼‰ã€‚\nä¼˜åŒ–è¡¥å…¨ä¸ç¼“å­˜ï¼ˆé€‰åšï¼‰ï¼š\n# å¼€å¯è¡¥å…¨ç¼“å­˜ï¼ˆéœ€ç¡®ä¿ç¼“å­˜ç›®å½•å­˜åœ¨ï¼‰ zstyle \u0026#39;:completion:*\u0026#39; use-cache on zstyle \u0026#39;:completion:*\u0026#39; cache-path $HOME/.zsh/cache æ§åˆ¶ PATH é•¿åº¦ä¸é‡å¤é¡¹ï¼šè¶…é•¿ PATH æˆ–å¤§é‡ç½‘ç»œè·¯å¾„ä¼šå¢åŠ å‘½ä»¤è§£ææˆæœ¬ï¼Œå»é‡å¹¶ç§»é™¤ä¸å¿…è¦æ¡ç›®ã€‚\nè·³è½¬æ’ä»¶æ›¿ä»£ï¼šå¦‚æœä¾èµ–é¢‘ç¹è·¯å¾„è·³è½¬ï¼Œå¯ä»¥è€ƒè™‘æ›´é«˜æ€§èƒ½çš„ zoxideï¼ˆRust å®ç°ï¼Œè·¨å¹³å°ï¼‰ï¼Œæˆ–ä½¿ç”¨ fzf + cd ç»„åˆå®ç°å¿«é€Ÿå¯¼èˆªã€‚\nB. Git çŠ¶æ€/æç¤ºç¬¦å±‚é¢ï¼ˆå¯¹å¤§å‹ä»“åº“å°¤å…¶é‡è¦ï¼‰ å‡å°‘æç¤ºç¬¦çš„ Git çŠ¶æ€å¼€é”€ï¼š\nå¦‚æœä½¿ç”¨ oh-my-zsh çš„ git ä¸»é¢˜æ®µï¼Œå¯ä»¥åªæ˜¾ç¤ºåˆ†æ”¯åï¼Œä¸æ˜¾ç¤ºâ€œè„çŠ¶æ€â€ï¼ˆæ–°å¢/åˆ é™¤/æœªè·Ÿè¸ªï¼‰ï¼Œæ˜¾è‘—å‡å°‘æ¯æ¬¡åˆ·æ–°è°ƒç”¨ï¼š\nexport DISABLE_UNTRACKED_FILES_DIRTY=\u0026#34;true\u0026#34; é¿å…åœ¨ PROMPT æˆ– RPROMPT ä¸­è§¦å‘å®Œæ•´çš„ git statusï¼ˆå°¤å…¶æ˜¯æœ‰å¤§é‡æœªè·Ÿè¸ªæ–‡ä»¶æ—¶ï¼‰ã€‚\næå‡ Git çš„åŸºç¡€æ€§èƒ½ï¼ˆå…¨å±€è®¾ç½®ï¼Œæ¸©å’Œå®‰å…¨ï¼‰ï¼š\ngit config --global core.preloadIndex true git config --global core.fscache true git config --global gc.writeCommitGraph true git maintenance start è¯´æ˜ï¼š\ncore.preloadIndex ä¸ core.fscache å¸¸è§äº Git for Windows çš„åŠ é€Ÿé€‰é¡¹ï¼ˆæ–°ç‰ˆæœ¬å¤šä¸ºé»˜è®¤å¼€å¯ï¼Œæ˜¾å¼é…ç½®æ›´ç¨³å¦¥ï¼‰ã€‚ å†™å…¥ commit-graph ä¸å¼€å¯ç»´æŠ¤ä»»åŠ¡ï¼Œå¯ä»¥åŠ é€Ÿå¤šç§ Git æ“ä½œï¼ˆåŒ…æ‹¬ statusã€log ç­‰ï¼‰ï¼Œå¯¹å¤§ä»“åº“å°¤ä¸ºæ˜æ˜¾ã€‚ ä»…åœ¨ç¡®å®šç‰ˆæœ¬æ”¯æŒçš„æƒ…å†µä¸‹è€ƒè™‘æ–‡ä»¶ç›‘æ§ï¼ˆfsmonitorï¼‰ï¼šæ–°ç‰ˆæœ¬ Git åœ¨ Windows ä¸Šé€æ­¥å®Œå–„å†…ç½® FS ç›‘æ§ç‰¹æ€§ï¼Œèƒ½å‡å°‘åå¤æ‰«ææ–‡ä»¶ç³»ç»Ÿçš„æˆæœ¬ã€‚å»ºè®®å‡çº§åˆ°è¾ƒæ–°çš„ Git for Windows åå†æŸ¥é˜…å¯¹åº”ç‰ˆæœ¬è¯´æ˜å¼€å¯ï¼›æ—§ç‰ˆæˆ–ä¸æ”¯æŒæ—¶ä¸è¦å¯ç”¨ã€‚\nC. ç»ˆç«¯/ç³»ç»Ÿå±‚é¢ï¼ˆWindowsï¼‰ å‡çº§å·¥å…·ä¸ç»„ä»¶ï¼š å‡çº§åˆ°æœ€æ–°çš„ Git for Windowsã€‚ å¦‚æœä½¿ç”¨å¤–éƒ¨ç»ˆç«¯ï¼ˆå¦‚ Windows Terminalï¼‰ï¼Œç•™æ„ ConPTY åç«¯çš„å…¼å®¹å‚æ•°ï¼›ä¸åŒè®¾ç½®åœ¨éƒ¨åˆ†ç¯å¢ƒä¸‹ä¼šå½±å“äº¤äº’æµç•…åº¦ã€‚ æ€æ¯’/å®‰å…¨è½¯ä»¶ä¸ç´¢å¼•æ‰«æï¼š ä¸º C:\\Program Files\\Git\\ å®‰è£…ç›®å½•ä¸ä¸»è¦ä»“åº“è·¯å¾„æ·»åŠ å®æ—¶æ‰«ææ’é™¤è§„åˆ™ï¼Œé¿å…æ¯æ¬¡å‘½ä»¤è§¦å‘å¤§é‡ I/O æ‰«æã€‚ é¿å…åœ¨ç½‘ç»œç›˜ã€åŒæ­¥ç›˜ï¼ˆå¦‚ OneDriveï¼‰æˆ–è¢«ç³»ç»Ÿç´¢å¼•æœåŠ¡é‡åº¦æ‰«æçš„ç›®å½•ä¸­å·¥ä½œã€‚ å­—ä½“ä¸æ¸²æŸ“ï¼š æŸäº› Nerd Font æˆ–é«˜å¼€é”€æ¸²æŸ“é…ç½®åœ¨ä½é…ç¯å¢ƒä¸‹ä¹Ÿä¼šé€ æˆåˆ·æ–°å¡é¡¿ï¼Œå¯æ¢ç”¨å¸¸è§„å­—ä½“æµ‹è¯•ã€‚ å››ã€å¿«é€Ÿæ’æŸ¥ä¸æ“ä½œæ¸…å•ï¼ˆå¯ç›´æ¥æ‹¿æ¥ç”¨ï¼‰ å¹²å‡€å¯åŠ¨ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºé…ç½®é—®é¢˜ï¼š\nzsh -f æ€§èƒ½ç”»åƒï¼ˆæ‰¾å‡ºæœ€æ…¢çš„å‡½æ•°/æ’ä»¶ï¼‰ï¼š\nzmodload zsh/zprof source ~/.zshrc zprof ç§»é™¤ z æ’ä»¶ï¼Œå¹¶æ¸…ç†æ•°æ®åº“ï¼š\nç¼–è¾‘ ~/.zshrcï¼Œä» plugins=(...) ä¸­åˆ é™¤ zï¼›\nåˆ é™¤æ•°æ®åº“æ–‡ä»¶ï¼š\nrm -f ~/.z ~/.z.* é™åˆ¶ Git çŠ¶æ€æ˜¾ç¤ºå¼€é”€ï¼ˆoh-my-zshï¼‰ï¼š\nexport DISABLE_UNTRACKED_FILES_DIRTY=\u0026#34;true\u0026#34; æå‡ Git åŸºç¡€æ€§èƒ½ï¼ˆå…¨å±€ï¼‰ï¼š\ngit config --global core.preloadIndex true git config --global core.fscache true git config --global gc.writeCommitGraph true git maintenance start æ¸…ç†è¡¥å…¨ç¼“å­˜å¹¶å¿«é€Ÿåˆå§‹åŒ–ï¼š\nrm -f ~/.zcompdump* compinit -C äº”ã€ç»“è¯­ è¿™æ¬¡å¡é¡¿çš„æ ¹å› æ˜¯ z æ’ä»¶çš„è·¯å¾„æ•°æ®åº“è¿‡å¤§ï¼Œç§»é™¤æ’ä»¶å¹¶æ¸…ç† .z æ•°æ®åé—®é¢˜å³åˆ»æ¶ˆå¤±ã€‚æ›´é€šç”¨çš„ç»éªŒæ˜¯ï¼šå…ˆç”¨ zsh -f å¿«é€Ÿéš”ç¦»ï¼Œå†ç”¨ zprof å®šä½è€—æ—¶ç‚¹\n","permalink":"https://lifeislife.cn/posts/git-bash%E7%BB%88%E7%AB%AF%E5%8D%A1%E9%A1%BF%E6%8E%92%E6%9F%A5%E5%AE%9E%E5%BD%95/","summary":"\u003cp\u003eå½“ç»ˆç«¯å‡ºç°è¾“å…¥å¡é¡¿ã€å‘½ä»¤æ‰§è¡Œåè¿Ÿè¿Ÿâ€œå›ä¸æ¥â€çš„æƒ…å†µï¼Œå¾€å¾€ä¸æ˜¯å•ä¸€å› ç´ å¯¼è‡´ã€‚æœ¬æ–‡è®°å½•äº†æˆ‘åœ¨ Git Bash ä¸Šçš„æ’æŸ¥è¿‡ç¨‹ï¼šæœ€ç»ˆå‘ç°æ˜¯ oh-my-zsh çš„ \u003ccode\u003ez\u003c/code\u003e æ’ä»¶åœ¨å®¶ç›®å½•ç´¯ç§¯äº†å¤§é‡ \u003ccode\u003e.z\u003c/code\u003e æ•°æ®æ–‡ä»¶ï¼Œå¼•å‘äº†æ˜æ˜¾çš„æ…¢å“åº”ã€‚åŒæ—¶ä¹Ÿæ•´ç†äº†ä¸€ä»½æ›´ç³»ç»Ÿçš„ä¼˜åŒ–ä¸æ’é”™æ¸…å•ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå®šä½å¹¶æ¶ˆé™¤å¸¸è§çš„æ€§èƒ½ç“¶é¢ˆã€‚\u003c/p\u003e","title":"Git Bash ç»ˆç«¯å¡é¡¿æ’æŸ¥å®å½•ï¼šä¸€æ¬¡ z æ’ä»¶æ•°æ®åº“è¿‡å¤§çš„å‘ä¸é«˜æ•ˆä¼˜åŒ–æ¸…å•"},{"content":"åˆ›å»ºæ™®é€šç”¨æˆ·ï¼Œç”¨æˆ·åä¸ºuser\nuseradd -m user ä¿®æ”¹é»˜è®¤shellä¸ºbash\nsudo usermod -s /bin/bash user æ·»åŠ ç”¨æˆ·åˆ°sudoers\nsudo usermod -aG sudo user ç«‹å³ç”Ÿæ•ˆé…ç½®\nsudo newgrp sudo ä¿®æ”¹ç”¨æˆ·å¯†ç \nsudo passwd user ä¸€é”®å®‰è£…Docker\ncurl -fsSL https://cdn.jsdelivr.net/gh/muzihuaner/docker-install@master/install.sh -o install-docker.sh sh install-docker.sh é…ç½®é•œåƒä»“åº“\necho \u0026#39;{\u0026#34;registry-mirrors\u0026#34;: [\u0026#34;https://docker.1ms.run\u0026#34;]}\u0026#39; | sudo tee /etc/docker/daemon.json \u0026gt; /dev/null systemctl daemon-reload systemctl restart docker æ·»åŠ å½“å‰ç”¨æˆ·åˆ°dockerç»„ï¼Œé¿å…æ¯æ¬¡ä½¿ç”¨dockerå‘½ä»¤æ—¶éƒ½éœ€è¦sudo\nsudo usermod -aG docker $USER ç”Ÿæ•ˆé…ç½®\nnewgrp docker å¸¸è§é—®é¢˜ å®‰å“å®¢æˆ·ç«¯ç™»å½•å¯†ç é”™è¯¯ password invalid ç¡®ä¿hostsä¸­çš„åŸŸåéƒ½èƒ½å¤Ÿè¢«æ­£å¸¸è§£æã€‚\n127.0.0.1 us-or-rly101.zwift.com 127.0.0.1 secure.zwift.com 127.0.0.1 cdn.zwift.com å®‰å“è®¾å¤‡å¯ä»¥ä¸‹è½½åº”ç”¨Termuxï¼Œå¯ä»¥ä½¿ç”¨pingå‘½ä»¤æ£€æŸ¥åŸŸåæ˜¯å¦èƒ½å¤Ÿè¢«æ­£å¸¸è§£æã€‚\nping us-or-rly101.zwift.com ping secure.zwift.com ping cdn.zwift.com ä¸€å®šåˆ°æ³¨æ„æ¯ä¸ªåŸŸåéƒ½æµ‹è¯•ä¸€éï¼Œä¹‹å‰æœ‰é‡åˆ°è¿‡åªæœ‰éƒ¨åˆ†åŸŸåèƒ½å¤Ÿè¢«æ­£å¸¸è§£æçš„æƒ…å†µã€‚å¦‚æœå‘ç°éƒ¨åˆ†åŸŸåèƒ½å¤Ÿè¢«æ­£å¸¸è§£æï¼Œè€Œéƒ¨åˆ†åŸŸåä¸èƒ½è¢«æ­£å¸¸è§£æï¼Œå¯ä»¥å°è¯•ä½¿ç”¨txtç¼–è¾‘å·¥å…·ï¼Œæ¯”å¦‚txtpadï¼Œä¸è¦ä½¿ç”¨WPSï¼ŒMicrosoft Wordç­‰å·¥å…·æ¥ç¼–è¾‘ï¼Œè¿™äº›å·¥å…·å¯èƒ½ä¼šè‡ªåŠ¨å°†åŸŸåè½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ï¼Œå¯¼è‡´æ— æ³•è¢«æ­£å¸¸è§£æã€‚ç”¨txtpadç¼–è¾‘åï¼Œä¿å­˜ä¸ºhosts.txtæ–‡ä»¶åˆ°èƒ½æ‰¾åˆ°çš„ä½ç½®ï¼Œç„¶åé‡æ–°ä½¿ç”¨pingå‘½ä»¤æ£€æŸ¥åŸŸåæ˜¯å¦èƒ½å¤Ÿè¢«æ­£å¸¸è§£æã€‚\n","permalink":"https://lifeislife.cn/posts/zwift%E5%8D%95%E6%9C%BA%E7%89%88%E5%A4%9A%E4%BA%BA%E8%81%94%E6%9C%BA%E6%95%99%E7%A8%8B/","summary":"\u003cp\u003eåˆ›å»ºæ™®é€šç”¨æˆ·ï¼Œç”¨æˆ·åä¸ºuser\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003euseradd -m user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¿®æ”¹é»˜è®¤shellä¸ºbash\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo usermod -s /bin/bash user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ·»åŠ ç”¨æˆ·åˆ°sudoers\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo usermod -aG sudo user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eç«‹å³ç”Ÿæ•ˆé…ç½®\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo newgrp sudo\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¿®æ”¹ç”¨æˆ·å¯†ç \u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo passwd user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¸€é”®å®‰è£…Docker\u003c/p\u003e","title":"Zwiftå•æœºç‰ˆå¤šäººè”æœºæ•™ç¨‹"},{"content":"ä¸€åˆ‡è¦ä»ä¸€ä¸ªè½¯ä»¶å¼€å§‹ æŸå¤©çœ‹åˆ°Stravaä¸Šè‡ªå·±çš„éª‘è¡Œè½¨è¿¹ï¼Œä»“é¼ çš„å¤©æ€§å¼€å§‹æ˜¾éœ²ï¼Œæ—¢ç„¶èƒ½è®°å½•éª‘è¡Œçš„è½¨è¿¹ï¼Œä¸ºå•¥ä¸æŠŠå¼€è½¦è½¨è¿¹ï¼Œæ­¥è¡Œè½¨è¿¹éƒ½è®°å½•äº†ï¼Ÿè™½ç„¶æ—©å°±å¬è¯´äº†ä¸–ç•Œè¿·é›¾ï¼ˆFog of Worldï¼‰ï¼Œä½†æ˜¯å› ä¸ºèµ°è¿‡çš„åœ°æ–¹å¹¶ä¸å¤šï¼Œå†åŠ ä¸Šå®‰è£…è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æœ‰å°è¯•ã€‚ç°åœ¨çœ‹åˆ°éª‘è¡Œçš„åœ°æ–¹è¶Šæ¥è¶Šå¤šï¼Œä¸–ç•Œè¿·é›¾ï¼ˆFog of Worldï¼‰çš„è¯±æƒ‘è¶Šæ¥è¶Šå¤§ï¼Œäºæ˜¯å¼€å§‹æŠ˜è…¾ã€‚\nä½¿ç”¨è¿™ä¸ªè½¯ä»¶å°±ä¸å¤šè¯´äº†ï¼Œåæ­£å€’è…¾Google Payå°±æ£é¼“äº†å¥½ä¹…ï¼ŒåˆèŠ±äº†20åˆ€ä¹ä¹°äº†è¿™ä¸ªè½¯ä»¶ã€‚\nè™½ç„¶è¿™ä¸ªè½¯ä»¶æœ¬èº«å°±æ˜¯è‡ªå¸¦è½¨è¿¹è®°å½•åŠŸèƒ½ï¼Œä½†æ˜¯ä½¿ç”¨æ‰‹æœºå¯¼èˆªçš„éƒ½çŸ¥é“ï¼Œä»»ä½•éœ€è¦GPSåŠŸèƒ½çš„è½¯ä»¶éƒ½æ˜¯è€—ç”µå¤§æˆ·ï¼Œè®©è¿™ä¸ªè½¯ä»¶å¸¸é©»åå°æ˜¾ç„¶ä¸èƒ½æ¥å—ï¼Œä¸€æ¬¡å¶ç„¶çš„æœºä¼šï¼Œçœ‹åˆ°äº†è¿™ä¸ªè®¾å¤‡ï¼ŒåŸæ¥å¯ä»¥é€šè¿‡å¤–ç½®GPSè®°å½•è½¨è¿¹ï¼Œäºæ˜¯å¼€å§‹æŠ˜è…¾ã€‚\næ¢é™©å®¶V900 GPSè½¨è¿¹è®°å½•å™¨ ä¸€ä¸ªå¿«20å¹´å‰çš„äº§å“ï¼Œæ—©å·²ç»åœäº§ï¼Œç›®å‰åªèƒ½æ‰¾åˆ°å®ƒçš„å‡çº§ç‰ˆV990ä»¥åŠæ€§èƒ½æ›´å¥½çš„äº§å“ï¼Œä½†æ˜¯ä»·æ ¼ä¹Ÿè´µäº†ä¸å°‘ã€‚å³ä½¿ç°åœ¨èƒ½æ‰¾åˆ°åœ¨å”®çš„V990ï¼Œä»·æ ¼ä¹Ÿè¦500å—ï¼Œè¿˜æ˜¯æ²¡æœ‰èˆå¾—ã€‚åªèƒ½åœ¨é—²é±¼ä¸Šæ·˜ä¸€ä¸‹ï¼Œ140å—æ·˜äº†ä¸€ä¸ªå“ç›¸è¿˜ä¸é”™çš„V900ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å› ä¸ºå¯¹GPSç¡¬ä»¶ä¸€çªä¸é€šï¼Œä¹Ÿä¸çŸ¥é“è¿™ä¸ªè§„æ ¼é‡Œçš„æ€§èƒ½å¦‚ä½•ï¼Œåªæ˜¯æƒ³å½“ç„¶è§‰å¾—ä¸“ç”¨çš„GPSè®°å½•å™¨åº”è¯¥è‡³å°‘æ¯”æ‰‹æœºå¼ºå§ï¼Œä½†æ˜¯ä¸œè¥¿åˆ°æ‰‹åªèƒ½æ„Ÿå¹ä¸€å¥ï¼ŒæŠ€æœ¯è¿›æ­¥å¤ªå¿«äº†ã€‚\nè¿™ç©æ„åªèƒ½è·å–GPSä¿¡å·ï¼Œä½†æ˜¯ç°åœ¨æœ€å»‰ä»·çš„æ‰‹æœºéƒ½èƒ½æ”¯æŒå¤šç§å®šä½æ–¹å¼ï¼ŒåŒ…æ‹¬GPSï¼ŒåŒ—æ–—ï¼ŒGLONASSç­‰ç­‰ä¿¡å·äº†ï¼Œè¿™æ„å‘³å®ƒè·å–å®šä½çš„ç²¾åº¦å’Œé€Ÿåº¦éƒ½è¿œè¿œä¸å¦‚æ‰‹æœºã€‚\nåœ¨å®¤å†…å®šä½äº†å¾ˆä¹…éƒ½æ²¡æœ‰å®šä½æˆåŠŸï¼Œåˆä¸“é—¨åˆ°æ¥¼ä¸‹ç©ºåœ°è¿˜æ˜¯æ— æ³•å®šä½ï¼Œæœ€ç»ˆåªèƒ½æ”¾å¼ƒï¼Œé€€å›å–å®¶ï¼Œä½†æ˜¯å–å®¶ä¹Ÿå¯èƒ½è§‰å¾—æ˜¯è€å¤è‘£äº†ï¼Œä¼°è®¡å¾ˆéš¾å–å‡ºå»ï¼Œæœ€ç»ˆç­”åº”20å—é’±å–ç»™æˆ‘ã€‚æˆ‘å¿ƒæƒ³20å—é’±ä¹°ä¸ªæ›¾ç»500å—çš„ç©å…·ï¼Œä¹ŸæŒºåˆ’ç®—çš„ï¼Œäºæ˜¯å°±æ”¶ä¸‹äº†ã€‚æ—¢ç„¶èƒ½å¼€æœºï¼Œè¯´æ˜ç¡¬ä»¶åº”è¯¥æ²¡é—®é¢˜ï¼Œåº”è¯¥è¿˜æ˜¯èƒ½ç”¨çš„ã€‚\næŠ˜è…¾è¿‡ç¨‹ æ— æ³•å®šä½ å› ä¸ºè®¾å¤‡å¾ˆä¹…æ²¡æœ‰å¼€æœºå®šä½äº†ï¼Œæ‰€ä»¥ç›¸å½“äºå†·å¯åŠ¨ï¼Œé€šå¸¸è·å–GPSä¿¡å·æ—¶é—´å°±ä¼šå¾ˆä¹…ï¼Œä¹‹å‰ä¹°æ–°çš„ç è¡¨æ—¶å°±ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼Œç¬¬ä¸€æ¬¡å®šä½èŠ±äº†å¾ˆä¹…ï¼Œä»¥ä¸ºè®¾å¤‡åäº†ï¼Œåæ¥å®šä½æˆåŠŸä¸€æ¬¡åï¼Œåç»­å®šä½å°±å¾ˆå¿«äº†ã€‚äºæ˜¯æˆ‘åˆæ‰¾äº†ä¸€å—å¹¿åœºç©ºåœ°å¼€å§‹å®šä½ï¼Œè¿™æ¬¡æœç„¶å®šä½æˆåŠŸäº†ã€‚\næ‰€ä»¥æƒ³è¦è§£å†³å®šä½é—®é¢˜ï¼Œé¦–å…ˆä¸èƒ½åœ¨å®¤å†…ï¼Œå®¤å†…å› ä¸ºæ··å‡åœŸé®æŒ¡ä¿¡å·ï¼Œå‡ ä¹æ— æ³•å®šä½æˆåŠŸï¼Œç¬¬ä¸€æ¬¡å®šä½æ—¶æœ€å¥½æ‰¾ä¸ªæ²¡æœ‰é®æŒ¡çš„ç©ºåœ°ï¼Œ3-5åˆ†é’ŸåŸºæœ¬ä¸Šèƒ½å®šä½æˆåŠŸã€‚\næ— æ³•è®°å½•è½¨è¿¹ è¿™ä¸ªé—®é¢˜åŒ…æ‹¬æ’å…¥å†…å­˜å¡åï¼Œå¼€æœºåè‡ªåŠ¨å…³æœºï¼Œå®šä½æˆåŠŸåè®¾å¤‡å‘å‡ºæ€¥ä¿ƒçš„å“”å“”å“”å£°éŸ³ï¼Œè¿™äº›éƒ½æ˜¯å› ä¸ºå†…å­˜å¡åˆ†åŒºæ ¼å¼é—®é¢˜å¯¼è‡´çš„ã€‚\nå› ä¸ºè¿™æ˜¯å¿«20å¹´å‰çš„äº§å“ï¼Œé‚£æ—¶å€™çš„å†…å­˜å¡å¤§å¤šè¿˜æ˜¯4Gä»¥ä¸‹çš„å†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿè¿˜æ˜¯FATæ ¼å¼ï¼Œç°åœ¨æƒ³è¦ä¹°ä¸€ä¸ª4Gä»¥ä¸‹çš„å†…å­˜å¡éƒ½å¾ˆéš¾äº†ï¼Œæ‰€ä»¥èƒ½è§åˆ°çš„å¤§éƒ¨åˆ†å†…å­˜å¡éƒ½æ˜¯æ— æ³•ç›´æ¥åœ¨è¿™ä¸ªè®¾å¤‡ä¸Šä½¿ç”¨ï¼Œå¿…é¡»æ ¼å¼åŒ–æˆFATæ ¼å¼ã€‚æ‰€ä»¥æœ€å¥½æ‰¾ä¸€ä¸ªå°å®¹é‡çš„å¡ï¼Œå¦‚æœæ˜¯4Gä»¥ä¸‹çš„å¡ï¼Œé€šå¸¸å¯ä»¥åœ¨ç”µè„‘ä¸Šç›´æ¥æ ¼å¼åŒ–ä¸ºFATæˆ–è€…FAT16ï¼Œå¦‚æœå¤§äº4Gçš„å¡ï¼Œé‚£å°±éœ€è¦ä¸“é—¨çš„è½¯ä»¶æ¥æ ¼å¼åŒ–äº†ï¼Œå¹¶ä¸”æ ¼å¼åŒ–ä¹‹åçš„å®¹é‡æœ€å¤§å°±åªæœ‰4Gï¼Œæ‰€ä»¥æœ€å¥½ä¹°ä¸€ä¸ªå°å®¹é‡å¡ã€‚\næ ¼å¼åŒ–çš„å·¥å…·å’Œæ­¥éª¤å¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æ¥ï¼šHow to record tracks in V-990/V-900 with a MicroSD card (Capacity above 4G)ã€‚è™½ç„¶æ˜¯è€å¤è‘£äº§å“ï¼Œä½†æ˜¯è¿™ä¸ªå¸¸è§çš„å”®åæ”¯æŒåšçš„è¿˜æ˜¯å¾ˆåˆ°ä½çš„ï¼Œè¿™ä¹ˆå¤šå¹´éƒ½è¿˜ä¿ç•™äº†æ‰€æœ‰äº§å“çš„æ–‡æ¡£å’Œç›¸å…³å·¥å…·ã€‚\næœ€ç»ˆå¡ä¿¡æ¯å¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image äº§å“æ–‡æ¡£é“¾æ¥ï¼šæ”¯æŒå’Œä¸‹è½½\n\u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨è“ç‰™è¿æ¥è®¾å¤‡ è¿™ä¸ªåŠŸèƒ½å½“åˆå¼€å‘å‡ºæ¥åº”è¯¥æ˜¯ä¸ºäº†ç»™ä¸€äº›è½¯ä»¶æä¾›ç¬¬ä¸‰æ–¹çš„å¯¼èˆªåŠŸèƒ½çš„ï¼Œä½†æ˜¯ç°åœ¨å¯¼èˆªå·¥å…·å·²ç»è§¦æ‰‹å¯å¾—ï¼Œè¿™ä¸ªåŠŸèƒ½å°±æ²¡ä»€ä¹ˆç”¨äº†ã€‚å¦‚æœä½ æƒ³å°è¯•ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥ä¸‹è½½ä¸€ä¸ªBluetooth GPSè½¯ä»¶ï¼ŒBluetooth GPSé’ˆå¯¹äºAndroid - ä»Uptodownä¸Šä¸‹è½½APKæ¥è¿æ¥è®¾å¤‡ã€‚\né“¾æ¥è¿‡ç¨‹å¦‚ä¸‹ï¼š\né•¿æŒ‰å¼€æœºé”®å¼€æœºï¼Œè‡ªåŠ¨è¿›å…¥è“ç‰™æ¨¡å¼ï¼Œè“ç‰™ç¯é—ªçƒ æ‰“å¼€æ‰‹æœºè“ç‰™ï¼Œæœç´¢è®¾å¤‡ï¼Œæ‰¾åˆ°è®¾å¤‡åç‚¹å‡»è¿æ¥ï¼Œè®¾å¤‡åç§°ä¸ºColumbus GPS è¾“å…¥åŒ¹é…ç 0000è¿æ¥è®¾å¤‡ æ‰“å¼€è½¯ä»¶é€‰æ‹©Columbus GPSï¼Œç‚¹å‡»è¿æ¥ è¿æ¥æˆåŠŸåï¼Œè½¯ä»¶ä¼šæ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç»çº¬åº¦ï¼Œé€Ÿåº¦ï¼Œæµ·æ‹”ç­‰ \u003c!DOCTYPE html\u003e Responsive Image è½¨è¿¹å®æµ‹ \u003c!DOCTYPE html\u003e Responsive Image è“è‰²æ˜¯ä½³æ˜Forerunner 255çš„è¿åŠ¨è½¨è¿¹ï¼Œçº¢è‰²æ˜¯V900çš„è½¨è¿¹ï¼Œå¯ä»¥çœ‹åˆ°V900çš„æ€§èƒ½åœ¨ä»Šå¤©æ¥è¯´å®Œå…¨ä¸å¤Ÿçœ‹äº†ï¼Œæ¼‚ç§»ä¸¥é‡ï¼Œå¹¶ä¸”æµ·æ‹”ä¿¡æ¯å‡ ä¹ä¸å¯ç”¨ï¼Œè¿™ä¹ˆç‚¹è·ç¦»æµ·æ‹”çˆ¬å‡200å¤šï¼Œåœ¨æµ·å®è¿™ç§å¤§å¹³åŸä¸Šï¼Œèµ°ä¸€å¤©éƒ½çˆ¬ä¸äº†è¿™ä¹ˆé«˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E6%8E%A2%E9%99%A9%E5%AE%B6v900-gps%E8%BD%A8%E8%BF%B9%E8%AE%B0%E5%BD%95%E5%99%A8%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/","summary":"\u003ch1 id=\"ä¸€åˆ‡è¦ä»ä¸€ä¸ªè½¯ä»¶å¼€å§‹\"\u003eä¸€åˆ‡è¦ä»ä¸€ä¸ªè½¯ä»¶å¼€å§‹\u003c/h1\u003e\n\u003cp\u003eæŸå¤©çœ‹åˆ°Stravaä¸Šè‡ªå·±çš„éª‘è¡Œè½¨è¿¹ï¼Œä»“é¼ çš„å¤©æ€§å¼€å§‹æ˜¾éœ²ï¼Œæ—¢ç„¶èƒ½è®°å½•éª‘è¡Œçš„è½¨è¿¹ï¼Œä¸ºå•¥ä¸æŠŠå¼€è½¦è½¨è¿¹ï¼Œæ­¥è¡Œè½¨è¿¹éƒ½è®°å½•äº†ï¼Ÿè™½ç„¶æ—©å°±å¬è¯´äº†ä¸–ç•Œè¿·é›¾ï¼ˆFog of Worldï¼‰ï¼Œä½†æ˜¯å› ä¸ºèµ°è¿‡çš„åœ°æ–¹å¹¶ä¸å¤šï¼Œå†åŠ ä¸Šå®‰è£…è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æœ‰å°è¯•ã€‚ç°åœ¨çœ‹åˆ°éª‘è¡Œçš„åœ°æ–¹è¶Šæ¥è¶Šå¤šï¼Œä¸–ç•Œè¿·é›¾ï¼ˆFog of Worldï¼‰çš„è¯±æƒ‘è¶Šæ¥è¶Šå¤§ï¼Œäºæ˜¯å¼€å§‹æŠ˜è…¾ã€‚\u003c/p\u003e","title":"æ¢é™©å®¶V900 GPSè½¨è¿¹è®°å½•å™¨æŠ˜è…¾ç¬”è®°"},{"content":"Strava Statistics éƒ¨ç½²æ–‡æ¡£ Strava Statistics æ˜¯ä¸€ä¸ªè‡ªæ‰˜ç®¡å·¥å…·ï¼Œåˆ©ç”¨ Strava æ•°æ®ç”Ÿæˆä¸ªäººè¿åŠ¨ç»Ÿè®¡ï¼Œæ”¯æŒ Docker éƒ¨ç½²ï¼Œæä¾›ä¸°å¯Œçš„å¯è§†åŒ–åˆ†æã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ Docker Compose éƒ¨ç½²ã€‚\nç”³è¯· Strava çš„ API æƒé™ åœ¨ZwiftOfflineä¸­ä¹Ÿéœ€è¦ç”¨åˆ° API æƒé™ï¼Œå› ä¸ºä¸åŒåº”ç”¨ç¨‹åºä¹Ÿä¸å†²çªï¼Œæ‡’å¾—å†é‡æ–°ç”³è¯·ï¼Œæ‰€ä»¥ä»¥ä¸‹å¡«çš„ä¿¡æ¯ä½¿ç”¨çš„ ZwiftOffline çš„ API æƒé™ã€‚\nç™»å½•Stravaï¼Œç”³è¯· APIï¼Œè·å–Client IDå’ŒClient Secretã€‚\nå¡«å†™å†…å®¹å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å…¶ä¸­æˆæƒå›è°ƒåŸŸå¡«å†™ï¼šlauncher.zwift.com\nç”³è¯·å®Œæˆåä¼šå¾—åˆ°ä¸‹é¢çš„ä¿¡æ¯ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å°†ä¸‹é¢é“¾æ¥ä¸­çš„client_idå€¼æ¢æˆä¸Šå›¾ä¸­çš„å®¢æˆ· IDï¼Œç„¶åæµè§ˆå™¨ä¸­è®¿é—®è¿™ä¸ªé“¾æ¥ï¼š\nhttp://www.strava.com/oauth/authorize?client_id=xxxxxxx\u0026amp;response_type=code\u0026amp;redirect_uri=http://localhost/exchange_token\u0026amp;approval_prompt=force\u0026amp;scope=activity:read_all ç‚¹å‡»æˆæƒï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ­¤æ—¶è·³è½¬åˆ°ä¸€ä¸ªæ— æ³•è®¿é—®çš„ç½‘é¡µï¼Œå°†åœ°å€æ ä¸­çš„codeå€¼è®°å½•ä¸‹æ¥ï¼Œåé¢éœ€è¦ç”¨åˆ°ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image éœ€è¦ç”¨è¿™ä¸ªcodeå‘èµ·ä¸€ä¸ª cURL è¯·æ±‚å¾—åˆ°refresh_tokenï¼Œå…·ä½“åšæ³•æ˜¯åœ¨å‘½ä»¤è¡Œç»ˆç«¯ä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\ncurl -X POST https://www.strava.com/oauth/token \\ -F client_id=YOURCLIENTID \\ -F client_secret=YOURCLIENTSECRET \\ -F code=AUTHORIZATIONCODE \\ -F grant_type=authorization_code client_idå€¼æ›¿æ¢ä¸ºç”³è¯·å¾—åˆ°çš„å®¢æˆ·ID client_secretå€¼æ›¿æ¢ä¸ºç”³è¯·å¾—åˆ°çš„å®¢æˆ·ç«¯å¯†é’¥ codeæ›¿æ¢ä¸ºä¸Šä¸€æ­¥æµè§ˆå™¨ä¸­å¾—åˆ°çš„code æ‰§è¡ŒæˆåŠŸåå¯ä»¥å¾—åˆ°ä¸‹é¢çš„è¿”å›ä¿¡æ¯ï¼Œéœ€è¦å°†è¿”å›å€¼ä¸­çš„refresh_tokenå’Œaccess_tokenè®°å½•ä¸‹æ¥ï¼Œåé¢éœ€è¦ç”¨åˆ°ï¼š\n{\u0026#34;token_type\u0026#34;:\u0026#34;Bearer\u0026#34;,\u0026#34;expires_at\u0026#34;:1740213400,\u0026#34;expires_in\u0026#34;:21600,\u0026#34;refresh_token\u0026#34;:\u0026#34;123456789123456789\u0026#34;,\u0026#34;access_token\u0026#34;:\u0026#34;123456789123456789\u0026#34;,\u0026#34;athlete\u0026#34;:{\u0026#34;id\u0026#34;:117756825,\u0026#34;username\u0026#34;:\u0026#34;dunky_zhang\u0026#34;,\u0026#34;resource_state\u0026#34;:2,\u0026#34;firstname\u0026#34;:\u0026#34;Dominic\u0026#34;,\u0026#34;lastname\u0026#34;:\u0026#34;Zhang\u0026#34;,\u0026#34;bio\u0026#34;:\u0026#34;éª‘è¡Œå°ç™½\u0026#34;,\u0026#34;city\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;state\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;country\u0026#34;:null,\u0026#34;sex\u0026#34;:\u0026#34;M\u0026#34;,\u0026#34;premium\u0026#34;:true,\u0026#34;summit\u0026#34;:true,\u0026#34;created_at\u0026#34;:\u0026#34;2023-05-10T13:54:32Z\u0026#34;,\u0026#34;updated_at\u0026#34;:\u0026#34;2025-02-06T05:29:52Z\u0026#34;,\u0026#34;badge_type_id\u0026#34;:1,\u0026#34;weight\u0026#34;:66.0,\u0026#34;profile_medium\u0026#34;:\u0026#34;https://dgalywyr863hv.cloudfront.net/pictures/athletes/117756825/32138099/2/medium.jpg\u0026#34;,\u0026#34;profile\u0026#34;:\u0026#34;https://dgalywyr863hv.cloudfront.net/pictures/athletes/117756825/32138099/2/large.jpg\u0026#34;,\u0026#34;friend\u0026#34;:null,\u0026#34;follower\u0026#34;:null}}# Docker Compose éƒ¨ç½² Strava Statistics åˆ›å»ºç›®å½•ç”¨äºå­˜æ”¾ Strava Statistics çš„é…ç½®æ–‡ä»¶\nmkdir statistics-for-strava cd statistics-for-strava åˆ›å»º docker-compose.yml æ–‡ä»¶\ntouch docker-compose.yml ç¼–è¾‘ docker-compose.yml æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š\nservices: app: image: robiningelbrecht/strava-statistics:latest volumes: - ./build:/var/www/build - ./storage/database:/var/www/storage/database - ./storage/files:/var/www/storage/files env_file: ./.env ports: - 8080:8080 environment: - PUID=1000 - PGID=1000 - TZ=Asia/Shanghai # å› ä¸º Strava çš„ API éœ€è¦ä»£ç†è®¿é—®ï¼Œæ‰€ä»¥ä¸‹é¢è®¾ç½®äº†æˆ‘çš„ä»£ç†åœ°å€ï¼Œè¯·ä½ æ ¹æ®è‡ªå·±çš„ä»£ç†åœ°å€è¿›è¡Œè®¾ç½® - http_proxy=http://192.168.1.9:7890 - https_proxy=http://192.168.1.9:7890 - all_proxy=socks5://192.168.1.9:7891 åˆ›å»º .env æ–‡ä»¶\ntouch .env ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š\n# åº”ç”¨ç¨‹åºå°†æ‰˜ç®¡çš„URLã€‚æ­¤URLå°†ç”¨äºæ¸…å•æ–‡ä»¶ä¸­ã€‚ # è¿™å°†å…è®¸æ‚¨å°†Webåº”ç”¨ç¨‹åºä½œä¸ºåŸç”Ÿåº”ç”¨ç¨‹åºå®‰è£…åˆ°æ‚¨çš„è®¾å¤‡ä¸Šã€‚ MANIFEST_APP_URL=http://localhost:8080/ # æ‚¨çš„Stravaåº”ç”¨ç¨‹åºçš„å®¢æˆ·ç«¯IDã€‚ STRAVA_CLIENT_ID=xxxxxxx # æ‚¨çš„Stravaåº”ç”¨ç¨‹åºçš„å®¢æˆ·ç«¯å¯†é’¥ã€‚ STRAVA_CLIENT_SECRET=xxxxxxxxxxxxxx # æ‚¨çš„Stravaåº”ç”¨ç¨‹åºçš„åˆ·æ–°ä»¤ç‰Œã€‚åœ¨ä¸Šä¸€æ­¥è·å–åˆ°çš„ STRAVA_REFRESH_TOKEN=xxxxxxxxxxxxxx # Strava APIæœ‰é™é€Ÿé™åˆ¶ï¼ˆhttps://github.com/robiningelbrecht/strava-statistics/wikiï¼‰ï¼Œ # ä¸ºäº†ç¡®ä¿æˆ‘ä»¬ä¸ä¼šè¾¾åˆ°é™é€Ÿï¼Œæˆ‘ä»¬å¸Œæœ›é™åˆ¶æ¯æ¬¡å¯¼å…¥å¤„ç†çš„æ–°æ´»åŠ¨æ•°é‡ã€‚ # è€ƒè™‘åˆ°æ¯å¤©æœ‰1000æ¬¡è¯·æ±‚é™åˆ¶ï¼Œå¹¶ä¸”å¯¼å…¥ä¸€ä¸ªæ–°æ´»åŠ¨æœ€å¤šå¯èƒ½éœ€è¦3æ¬¡APIè°ƒç”¨ï¼Œ250åº”è¯¥æ˜¯ä¸€ä¸ªå®‰å…¨çš„æ•°å­—ã€‚ NUMBER_OF_NEW_ACTIVITIES_TO_PROCESS_PER_IMPORT=250 # å®šæœŸè¿è¡Œå¯¼å…¥å’ŒHTMLæ„å»ºçš„è®¡åˆ’ã€‚ç•™ç©ºä»¥ç¦ç”¨å®šæœŸå¯¼å…¥ã€‚ # é»˜è®¤è®¡åˆ’ä¸ºæ¯å¤©å‡Œæ™¨04:05è¿è¡Œä¸€æ¬¡ã€‚å¦‚æœæ‚¨ä¸çŸ¥é“ä»€ä¹ˆæ˜¯cronè¡¨è¾¾å¼ï¼Œè¯·å‹¿æ›´æ”¹æ­¤é¡¹ã€‚ # è¯·ç¡®ä¿ä¸è¦è¿‡äºé¢‘ç¹åœ°è¿è¡Œå¯¼å…¥ï¼Œä»¥é¿å…è¾¾åˆ°Strava APIçš„é™é€Ÿã€‚æ¯å¤©ä¸€æ¬¡åº”è¯¥è¶³å¤Ÿã€‚ IMPORT_AND_BUILD_SCHEDULE=\u0026#34;5 4 * * *\u0026#34; # è®¾ç½®ç”¨äºè®¡åˆ’çš„æ—¶åŒº # æœ‰æ•ˆçš„æ—¶åŒºå¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°ï¼ˆTZæ ‡è¯†ç¬¦åˆ—ï¼‰ï¼šhttps://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List TZ=Asia/Shanghai # å…è®¸çš„é€‰é¡¹ï¼šen_USã€fr_FR æˆ– nl_BE LOCALE=en_US # å…è®¸çš„é€‰é¡¹ï¼šmetricï¼ˆå…¬åˆ¶ï¼‰æˆ– imperialï¼ˆè‹±åˆ¶ï¼‰ UNIT_SYSTEM=metric # æ¸²æŸ“åº”ç”¨ç¨‹åºæ—¶ä½¿ç”¨çš„æ—¶é—´æ ¼å¼ # å…è®¸çš„æ ¼å¼ï¼š24 æˆ– 12ï¼ˆåŒ…æ‹¬AMå’ŒPMï¼‰ TIME_FORMAT=24 # æ¸²æŸ“åº”ç”¨ç¨‹åºæ—¶ä½¿ç”¨çš„æ—¥æœŸæ ¼å¼ # å…è®¸çš„æ ¼å¼ï¼šDAY-MONTH-YEARï¼ˆæ—¥-æœˆ-å¹´ï¼‰æˆ– MONTH-DAY-YEARï¼ˆæœˆ-æ—¥-å¹´ï¼‰ DATE_FORMAT=DAY-MONTH-YEAR # è¦å¯¼å…¥çš„è¿åŠ¨ç±»å‹ã€‚ç•™ç©ºä»¥å¯¼å…¥æ‰€æœ‰è¿åŠ¨ç±»å‹ã€‚ # é€šè¿‡æ­¤åˆ—è¡¨ï¼Œæ‚¨è¿˜å¯ä»¥å†³å®šè¿åŠ¨ç±»å‹çš„æ¸²æŸ“é¡ºåºã€‚ # å®Œæ•´çš„å…è®¸é€‰é¡¹åˆ—è¡¨å¯åœ¨ä»¥ä¸‹åœ°å€æ‰¾åˆ°ï¼šhttps://github.com/robiningelbrecht/strava-statistics/wiki/Supported-sport-types/ SPORT_TYPES_TO_IMPORT=\u0026#39;[]\u0026#39; # æ‚¨çš„ç”Ÿæ—¥ã€‚éœ€è¦ç”¨äºè®¡ç®—å¿ƒç‡åŒºé—´ã€‚ ATHLETE_BIRTHDAY=1999-01-01 # ä½“é‡å†å²ï¼ˆå•ä½ä¸ºåƒå…‹æˆ–ç£…ï¼Œå–å†³äºUNIT_SYSTEMï¼‰ã€‚éœ€è¦ç”¨äºè®¡ç®—ç›¸å¯¹åŠŸç‡é‡é‡æ¯”ï¼ˆw/kgï¼‰ã€‚ # æŸ¥çœ‹æ›´å¤šä¿¡æ¯ï¼šhttps://github.com/robiningelbrecht/strava-statistics/wiki ATHLETE_WEIGHTS=\u0026#39;{ \u0026#34;1970-01-01\u0026#34;: 68 }\u0026#39; # FTPï¼ˆåŠŸèƒ½é˜ˆå€¼åŠŸç‡ï¼‰å†å²ã€‚éœ€è¦ç”¨äºè®¡ç®—æ´»åŠ¨å‹åŠ›æ°´å¹³ã€‚ # æŸ¥çœ‹æ›´å¤šä¿¡æ¯ï¼šhttps://github.com/robiningelbrecht/strava-statistics/wiki FTP_VALUES=\u0026#39;{ \u0026#34;2024-12-12\u0026#34;: 235 }\u0026#39; # åŒ…å«ntfyä¸»é¢˜çš„å®Œæ•´URLã€‚æ­¤ä¸»é¢˜å°†ç”¨äºåœ¨æ–°çš„HTMLæ„å»ºè¿è¡Œæ—¶é€šçŸ¥æ‚¨ã€‚ # ç•™ç©ºä»¥ç¦ç”¨é€šçŸ¥ã€‚ NTFY_URL=\u0026#39;\u0026#39; # åœ¨å¯¼å…¥æœŸé—´è¦è·³è¿‡çš„æ´»åŠ¨IDæ•°ç»„ã€‚ # è¿™å…è®¸æ‚¨åœ¨å¯¼å…¥æ—¶è·³è¿‡ç‰¹å®šæ´»åŠ¨ã€‚ ACTIVITIES_TO_SKIP_DURING_IMPORT=\u0026#39;[]\u0026#39; # åˆ›å»º/æ‹¥æœ‰ç”±strava-statisticsç®¡ç†çš„æ–‡ä»¶çš„UIDå’ŒGID # å¯èƒ½ä»…åœ¨Linuxä¸»æœºä¸Šéœ€è¦ï¼Œè¯¦è§Wikiä¸­çš„æ–‡ä»¶æƒé™éƒ¨åˆ† #PUID= #PGID= å¼€å§‹å¯¼å…¥æ•°æ®ï¼š\nå¯åŠ¨å®¹å™¨\ndocker-compose up -d å¯¼å…¥æ•°æ®\ndocker compose exec App bin/console app:strava:import-data docker compose exec App bin/console app:strava:build-files å¯¼å…¥è¿‡ç¨‹éå¸¸éå¸¸æ…¢ï¼Œå› ä¸ºéœ€è¦æŒ¨ä¸ªæ•°æ®è·å–ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å‡ºé”™ï¼Œå¦‚æœå‡ºé”™äº†ï¼Œéœ€è¦å…ˆå…³é—­å®¹å™¨ï¼Œç„¶åé‡æ–°å¯¼å…¥ã€‚ä»¥ä¸‹æ˜¯å¯¼å…¥æˆåŠŸçš„æˆªå›¾ï¼š \u003c!DOCTYPE html\u003e Responsive Image è®¿é—® localhost:8080 æŸ¥çœ‹æ•°æ®\n\u003c!DOCTYPE html\u003e Responsive Image å¸¸è§é—®é¢˜ 401 Unauthorized \u003c!DOCTYPE html\u003e Responsive Image .envä¸­çš„STRAVA_REFRESH_TOKENå¯èƒ½è¿‡æœŸï¼Œéœ€è¦é‡æ–°è·å–ã€‚åˆæˆ–è€…å‹æ ¹å°±å¿˜è®°äº†è·å–refresh_tokenï¼Œéœ€è¦é‡æ–°è·å–ã€‚\nFailed to connect to nominatim.openstreetmap.org \u003c!DOCTYPE html\u003e Responsive Image å› ä¸ºéœ€è¦ç”Ÿæˆä¸€äº›åœ°å›¾çƒ­ç‚¹ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦è®¿é—® nominatim.openstreetmap.orgï¼Œæ‰€ä»¥éœ€è¦é…ç½®ä»£ç†ã€‚\nTring to calculate the relative power for activity \u003c!DOCTYPE html\u003e Responsive Image å› ä¸ºéœ€è¦è®¡ç®—ç›¸å¯¹åŠŸç‡é‡é‡æ¯”ï¼ˆw/kgï¼‰ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ä½“é‡å†å²ã€‚å¦‚æœå‘ç°æŸä¸ªæ´»åŠ¨çš„æ—¶é—´ç‚¹æ²¡æœ‰é…ç½®ä½“é‡ä¿¡æ¯å°±ä¼šæŠ¥è¿™ä¸ªé”™ã€‚çœ‹çœ‹.envä¸­çš„ATHLETE_WEIGHTSæ˜¯å¦é…ç½®æ­£ç¡®ã€‚æˆ‘å»ºè®®ç›´æ¥ä¿®æ”¹æˆæˆ‘æä¾›çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä» 1970 å¹´å¼€å§‹éƒ½æ˜¯å½“å‰çš„ä½“é‡ã€‚å› ä¸ºæˆ‘å°è¯•é…ç½®äº†è‡ªå·±çš„ä½“é‡å†å²ï¼Œä½†æ˜¯ä¸€ç›´æŠ¥é”™ï¼Œæ‰€ä»¥ç›´æ¥æ”¹æˆäº†è¿™ä¸ªã€‚\nLooks like you still need to import your strava data \u003c!DOCTYPE html\u003e Responsive Image å¦‚æœä½ åªæ‰§è¡Œäº†docker-compose up -dï¼Œè€Œæ²¡æœ‰æ‰§è¡Œå¯¼å…¥æ•°æ®çš„å‘½ä»¤ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ã€‚éœ€è¦æ‰§è¡Œå¯¼å…¥æ•°æ®çš„å‘½ä»¤ã€‚å¦‚æœä½ å·²ç»å¯¼å…¥æˆåŠŸäº†ï¼Œå¦‚æœè¿˜æŠ¥è¿™ä¸ªé”™ï¼Œå°±éœ€è¦é‡å¯ä¸€ä¸‹å®¹å™¨ã€‚\n","permalink":"https://lifeislife.cn/posts/docker-compose%E9%83%A8%E7%BD%B2strava-statistics/","summary":"\u003ch1 id=\"strava-statistics-éƒ¨ç½²æ–‡æ¡£\"\u003eStrava Statistics éƒ¨ç½²æ–‡æ¡£\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/robiningelbrecht/strava-statistics\"\u003eStrava Statistics\u003c/a\u003e æ˜¯ä¸€ä¸ªè‡ªæ‰˜ç®¡å·¥å…·ï¼Œåˆ©ç”¨ Strava æ•°æ®ç”Ÿæˆä¸ªäººè¿åŠ¨ç»Ÿè®¡ï¼Œæ”¯æŒ Docker éƒ¨ç½²ï¼Œæä¾›ä¸°å¯Œçš„å¯è§†åŒ–åˆ†æã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ Docker Compose éƒ¨ç½²ã€‚\u003c/p\u003e\n\u003ch2 id=\"ç”³è¯·-strava-çš„-api-æƒé™\"\u003eç”³è¯· Strava çš„ API æƒé™\u003c/h2\u003e\n\u003cp\u003eåœ¨\u003ca href=\"https://lifeislife.cn/awesome-cycling/docs/training-fitness/zwiftoffline/\"\u003eZwiftOffline\u003c/a\u003eä¸­ä¹Ÿéœ€è¦ç”¨åˆ° API æƒé™ï¼Œå› ä¸ºä¸åŒåº”ç”¨ç¨‹åºä¹Ÿä¸å†²çªï¼Œæ‡’å¾—å†é‡æ–°ç”³è¯·ï¼Œæ‰€ä»¥ä»¥ä¸‹å¡«çš„ä¿¡æ¯ä½¿ç”¨çš„ ZwiftOffline çš„ API æƒé™ã€‚\u003c/p\u003e","title":"Docker Compose éƒ¨ç½² Strava Statistics"},{"content":"ZwiftOfflineæ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒºè‡ªåˆ¶çš„ Zwift çš„ server ç«¯ï¼Œå¯ä»¥åœ¨æ²¡æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹è¿›è¡Œ Zwift è¯¾ç¨‹æˆ–è·¯çº¿è®­ç»ƒï¼Œå¤šå¹³å°æ”¯æŒã€‚\nå®‰è£… ZwiftOffline ä»GitHub Release é¡µé¢ä¸‹è½½æœ€æ–°çš„ zoffline å‘å¸ƒç‰ˆã€‚ æ‰¾ä¸€ä¸ªç›®å½•ç”¨äºè¿è¡Œ Zwift offlineï¼Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªzwiftofflineç›®å½•ï¼Œä¿å­˜åˆšåˆšä¸‹è½½çš„exeæ–‡ä»¶ï¼Œç„¶åè¿è¡Œä½ ä¸‹è½½çš„ zoffline.exeã€‚ä¸€æ—¦è¿è¡Œï¼Œzoffline ä¼šåœ¨å…¶æ‰€åœ¨çš„ç›¸åŒæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªstorageç›®å½•ï¼Œç”¨ä»¥ä¿å­˜ä½ çš„ Zwift è¿›åº¦ã€‚ç”Ÿæˆstorageç›®å½•åï¼ŒæŒ‰Ctrl+Cå…ˆå…³é—­ zofflineï¼Œç¨åè¿˜æœ‰å…¶ä»–é…ç½®ã€‚ \u003c!DOCTYPE html\u003e Responsive Image å‰å¾€Zwift å®˜ç½‘ï¼Œæ‹‰åˆ°é¡µé¢åº•éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°å®‰è£…é“¾æ¥ï¼Œå®‰è£… Zwift è½¯ä»¶ã€‚è®°ä½å®‰è£…çš„è·¯å¾„ï¼Œæˆ‘å®‰è£…åœ¨äº†C:\\Program Files (x86)\\Zwiftã€‚ \u003c!DOCTYPE html\u003e Responsive Image è¿è¡Œ Zwiftï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä¼šå¼€å§‹æ›´æ–°ï¼Œå› ä¸ºå®‰è£…çš„åªæ˜¯ä¸€ä¸ªç™»å½•å™¨ï¼Œæ¸¸æˆæœ¬ä½“è¿˜éœ€è¦ä¸‹è½½ã€‚ä¸€å®šè¦å®‰è£…ä¹‹åå°±æ‰§è¡Œè¿™ä¸€æ­¥ï¼Œå› ä¸ºåç»­çš„é…ç½®ä¼šæ”¹å˜ç½‘ç»œé…ç½®ï¼Œå¯¼è‡´æ— æ³•ä¸‹è½½æ¸¸æˆæœ¬ä½“ã€‚ ä»GitHub Rleaseä¸‹è½½é…ç½®è„šæœ¬ç­‰æ–‡ä»¶zoffline-helper.zipï¼Œå°†å…¶ä¹Ÿè§£å‹åˆ°zwiftofflineç›®å½•ã€‚ è¿›å…¥zwiftoffline/zoffline-helperç›®å½•ï¼Œå³é”®ç‚¹å‡»configure_client.batï¼Œé€‰æ‹©ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨é…ç½® zofflineï¼Œä»¥ä¾¿ä½ å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œ Zwiftã€‚æœŸé—´ä¼šå¼¹çª—è®©ä½ é€‰æ‹©Zwiftç›®å½•ï¼Œå°±æ˜¯ä¹‹å‰éœ€è¦è®°ä½çš„å®‰è£…ç›®å½•ï¼š \u003c!DOCTYPE html\u003e Responsive Image æœ€ç»ˆè¿è¡Œå®Œçš„ç»“æœå¦‚ä¸‹ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¿›å…¥zwiftofflineç›®å½•ï¼ŒåŒå‡»zoffline_1.0.140279.exeï¼Œè¿è¡Œ zofflineã€‚ \u003c!DOCTYPE html\u003e Responsive Image å¯åŠ¨åŸç‰ˆ Zwift ç¨‹åºï¼Œå¦‚æœæ˜¾ç¤ºçš„é¡µé¢è¿˜æ˜¯åŸæ¥ Zwift çš„ç™»å½•é¡µé¢ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å¼€äº†ä»£ç†ï¼Œå…³é—­ä»£ç†å†è¯•è¯•ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ä¸‹å›¾æ˜¯å®˜æ–¹åŸç‰ˆç™»å½•ç•Œé¢ï¼Œå¦‚æœæ˜¾ç¤ºè¿™ä¸ªé¡µé¢è¯´æ˜é…ç½®å¤±è´¥ï¼š \u003c!DOCTYPE html\u003e Responsive Image å°†è¾“å…¥æ³•åˆ‡æ¢ä¸ºå¾®è½¯è‹±æ–‡è¾“å…¥æ³•ï¼Œç‚¹å‡»Start Zwiftå³å¯å¼€å§‹æ¸¸æˆã€‚å¦‚æœæ˜¯æœç‹—è¾“å…¥æ³•å°†ä¼šå¡åœ¨ç™»å½•é¡µé¢ã€‚ è·å–ä¸ªäººåŸæ¥çš„ Zwift èµ„æ–™ä¿¡æ¯ å¦‚æœä¸é…ç½®è¿™ä¸€é¡¹ï¼Œé‚£ä¹ˆä½¿ç”¨ Zwift offline éª‘è¡Œçš„æ—¶å€™ï¼Œä¼šæ˜¾ç¤ºä½ çš„ä¿¡æ¯æ˜¯ä¸€ä¸ªæ–°çš„è´¦å·ï¼Œè€Œä¸æ˜¯ä½ åŸæ¥çš„è´¦å·ã€‚\nåœ¨ç™»å½•é¡µé¢å¯ä»¥è¿›å…¥è®¾ç½®ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¡«å†™é‚®ç®±å’Œå¯†ç ï¼Œå‹¾é€‰æ‰€æœ‰é€‰é¡¹ï¼Œç‚¹å‡» Submit å³å¯ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image è¿™æ ·å†ç™»å½•åˆ° Zwift æ—¶å°±æ˜¯åŸæ¥çš„è´¦å·äº†ã€‚\né“¾æ¥ Strava ä¸Šä¼ æ´»åŠ¨ ç™»å½•Stravaï¼Œç”³è¯· APIï¼Œè·å–Client IDå’ŒClient Secretã€‚\nå¡«å†™å†…å®¹å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å…¶ä¸­æˆæƒå›è°ƒåŸŸå¡«å†™ï¼šlauncher.zwift.com\nç”³è¯·å®Œæˆåä¼šå¾—åˆ°ä¸‹é¢çš„ä¿¡æ¯ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨ç™»å½•é¡µé¢å¯ä»¥è¿›å…¥è®¾ç½®ï¼Œå¡«å†™å¾—åˆ°çš„Client IDå’ŒClient Secretã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å³å‡»ç®¡ç†å‘˜è¿è¡Œzoffline-helper/disable_zoffline.batï¼Œè¿™ä¸€æ­¥æŠŠhostsçš„é…ç½®éƒ½æ¸…é™¤ã€‚\nå‘½ä»¤è¡Œé‡Œè¿è¡Œzoffline-helper/strava_auth.exe --client-id CLIENT_ID --client-secret CLIENT_SECRETï¼ŒæŠŠCLIENT_IDå’ŒCLIENT_SECRETæ›¿æ¢æˆä½ çš„stravaåº”ç”¨çš„client idå’Œclient secretã€‚\næµè§ˆå™¨æ‰“å¼€localhost:8000æˆæƒè®¿é—®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æŠŠç›®å½•ä¸­ç”Ÿæˆçš„strava_token.txtç§»åŠ¨åˆ°ç›®å½•storage/1ä¸‹ã€‚\nå³å‡»ç®¡ç†å‘˜è¿è¡Œzoffline-helper/configure_client.batï¼Œé‡æ–°é…ç½®hostsã€‚\nä¸Šä¼ è®­ç»ƒè¯¾ç¨‹ è™½ç„¶Zwiftæœ‰å¾ˆå¤šè®­ç»ƒè¯¾ç¨‹ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯ä¹ æƒ¯åœ¨Intervals ICUä¸Šåˆ›å»ºå¥½è‡ªå·±çš„è¯¾ç¨‹ï¼Œç„¶åä¸Šä¼ åˆ°Zwiftã€‚è™½ç„¶Intervals ICUä¸Šçš„è¯¾ç¨‹å¯ä»¥ç›´æ¥åŒæ­¥åˆ°Zwiftï¼Œä½†æ˜¯å•æœºç‰ˆçš„æ²¡æ³•åŒæ­¥è¿™äº›è¯¾ç¨‹ï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨ä¸Šä¼ ã€‚\nå…·ä½“å¦‚ä½•åˆ›å»ºè¯¾ç¨‹æˆ‘å°±ä¸å¤šè¯´äº†ï¼Œè¿™é‡Œå‡è®¾ä½ å·²ç»æœ‰äº†ä¸€ç³»åˆ—.zwoè®­ç»ƒè¯¾ç¨‹æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ åªéœ€è¦å°†å…¶ä¿å­˜åˆ°Documents/Zwift/Workouts/1ç›®å½•ä¸‹å³å¯ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ³¨æ„å“¦ï¼Œä¸æ˜¯è¿è¡Œç›®å½•ä¸‹çš„zwiftoffline\\storage\\1\\customworkoutså“¦ï¼Œå¼€å§‹æˆ‘è‡ªä½œèªæ˜æŠŠè¯¾ç¨‹æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œç»“æœå‘ç°ä¸Šä¼ ä¸äº†ï¼Œåæ¥æ‰å‘ç°æ˜¯æ”¾é”™äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¸¸è§é—®é¢˜ å¡åœ¨è“è‰²ç™»å½•ç•Œé¢ \u003c!DOCTYPE html\u003e Responsive Image è¿›ç¨‹ç®¡ç†ä¸­å…³é—­Zwiftï¼Œè¾“å…¥æ³•éœ€è¦åˆ‡æ¢ä¸ºå¾®è½¯è‹±æ–‡è¾“å…¥æ³•é‡æ–°ç™»å½•ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½®Zwiftofflineåæ— æ³•æ›´æ–°Zwift å› ä¸ºconfigure_client.batä¼šä¿®æ”¹Hostsæ–‡ä»¶ï¼Œå¯¼è‡´æ— æ³•è¿æ¥åˆ°ZwiftæœåŠ¡å™¨ï¼Œæ‰€ä»¥åœ¨æ›´æ–°Zwiftæ—¶éœ€è¦å…ˆå…³é—­zofflineï¼Œç„¶åå†æ›´æ–°ã€‚å¯ä»¥è¿›å…¥zwiftoffline/zoffline-helperç›®å½•ï¼Œå³é”®ç‚¹å‡»disable_zoffline.batï¼Œé€‰æ‹©ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼Œå¯ä»¥æ¸…é™¤ç½‘ç»œé…ç½®ï¼Œç„¶åå†æ‰“å¼€Zwiftå¼€å¯æ›´æ–°ã€‚\næ— æ³•è‡ªåŠ¨ä¸Šä¼ æ´»åŠ¨åˆ°Strava ","permalink":"https://lifeislife.cn/posts/zwift%E5%8D%95%E6%9C%BA%E7%89%88%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/","summary":"\u003cp\u003e\u003ca href=\"https://github.com/zoffline/zwift-offline?tab=readme-ov-file\"\u003eZwiftOffline\u003c/a\u003eæ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒºè‡ªåˆ¶çš„ Zwift çš„ server ç«¯ï¼Œå¯ä»¥åœ¨æ²¡æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹è¿›è¡Œ Zwift è¯¾ç¨‹æˆ–è·¯çº¿è®­ç»ƒï¼Œå¤šå¹³å°æ”¯æŒã€‚\u003c/p\u003e\n\u003ch2 id=\"å®‰è£…-zwiftoffline\"\u003eå®‰è£… ZwiftOffline\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eä»\u003ca href=\"https://github.com/zoffline/zwift-offline/releases/latest\"\u003eGitHub Release é¡µé¢\u003c/a\u003eä¸‹è½½æœ€æ–°çš„ zoffline å‘å¸ƒç‰ˆã€‚\u003c/li\u003e\n\u003cli\u003eæ‰¾ä¸€ä¸ªç›®å½•ç”¨äºè¿è¡Œ Zwift offlineï¼Œæˆ‘æ–°å»ºäº†ä¸€ä¸ª\u003ccode\u003ezwiftoffline\u003c/code\u003eç›®å½•ï¼Œä¿å­˜åˆšåˆšä¸‹è½½çš„\u003ccode\u003eexe\u003c/code\u003eæ–‡ä»¶ï¼Œç„¶åè¿è¡Œä½ ä¸‹è½½çš„ zoffline.exeã€‚ä¸€æ—¦è¿è¡Œï¼Œzoffline ä¼šåœ¨å…¶æ‰€åœ¨çš„ç›¸åŒæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª\u003ccode\u003estorage\u003c/code\u003eç›®å½•ï¼Œç”¨ä»¥ä¿å­˜ä½ çš„ Zwift è¿›åº¦ã€‚ç”Ÿæˆ\u003ccode\u003estorage\u003c/code\u003eç›®å½•åï¼ŒæŒ‰\u003ccode\u003eCtrl+C\u003c/code\u003eå…ˆå…³é—­ zofflineï¼Œç¨åè¿˜æœ‰å…¶ä»–é…ç½®ã€‚\n\u003cul\u003e\n\u003cli\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/10/ed838fae543dc8d607c231d89fc4888b.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/10/ed838fae543dc8d607c231d89fc4888b.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå‰å¾€\u003ca href=\"https://www.zwift.com/\"\u003eZwift å®˜ç½‘\u003c/a\u003eï¼Œæ‹‰åˆ°é¡µé¢åº•éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°å®‰è£…é“¾æ¥ï¼Œå®‰è£… Zwift è½¯ä»¶ã€‚è®°ä½å®‰è£…çš„è·¯å¾„ï¼Œæˆ‘å®‰è£…åœ¨äº†\u003ccode\u003eC:\\Program Files (x86)\\Zwift\u003c/code\u003eã€‚\n\u003cul\u003e\n\u003cli\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/09/734f7507b1e68958bba2ea2525216752.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/09/734f7507b1e68958bba2ea2525216752.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eè¿è¡Œ Zwiftï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä¼šå¼€å§‹æ›´æ–°ï¼Œå› ä¸ºå®‰è£…çš„åªæ˜¯ä¸€ä¸ªç™»å½•å™¨ï¼Œæ¸¸æˆæœ¬ä½“è¿˜éœ€è¦ä¸‹è½½ã€‚\u003cstrong\u003eä¸€å®šè¦å®‰è£…ä¹‹åå°±æ‰§è¡Œè¿™ä¸€æ­¥ï¼Œå› ä¸ºåç»­çš„é…ç½®ä¼šæ”¹å˜ç½‘ç»œé…ç½®ï¼Œå¯¼è‡´æ— æ³•ä¸‹è½½æ¸¸æˆæœ¬ä½“ã€‚\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eä»\u003ca href=\"https://github.com/oldnapalm/zoffline-helper/releases/latest\"\u003eGitHub Rlease\u003c/a\u003eä¸‹è½½é…ç½®è„šæœ¬ç­‰æ–‡ä»¶\u003ccode\u003ezoffline-helper.zip\u003c/code\u003eï¼Œå°†å…¶ä¹Ÿè§£å‹åˆ°\u003ccode\u003ezwiftoffline\u003c/code\u003eç›®å½•ã€‚\u003c/li\u003e\n\u003cli\u003eè¿›å…¥\u003ccode\u003ezwiftoffline/zoffline-helper\u003c/code\u003eç›®å½•ï¼Œå³é”®ç‚¹å‡»\u003ccode\u003econfigure_client.bat\u003c/code\u003eï¼Œé€‰æ‹©ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨é…ç½® zofflineï¼Œä»¥ä¾¿ä½ å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œ Zwiftã€‚æœŸé—´ä¼šå¼¹çª—è®©ä½ é€‰æ‹©Zwiftç›®å½•ï¼Œå°±æ˜¯ä¹‹å‰éœ€è¦è®°ä½çš„å®‰è£…ç›®å½•ï¼š\n\u003cul\u003e\n\u003cli\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/19/52b44adfe177bde733156c3d2faefe5e.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/19/52b44adfe177bde733156c3d2faefe5e.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/li\u003e\n\u003cli\u003eæœ€ç»ˆè¿è¡Œå®Œçš„ç»“æœå¦‚ä¸‹ï¼š\u003c/li\u003e\n\u003cli\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/09/6769deefaa7c142c42411a43af345e8d.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/09/6769deefaa7c142c42411a43af345e8d.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eè¿›å…¥\u003ccode\u003ezwiftoffline\u003c/code\u003eç›®å½•ï¼ŒåŒå‡»\u003ccode\u003ezoffline_1.0.140279.exe\u003c/code\u003eï¼Œè¿è¡Œ zofflineã€‚\n\u003cul\u003e\n\u003cli\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/09/029bd1af360095a4a279b52c822cd5c7.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/09/029bd1af360095a4a279b52c822cd5c7.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå¯åŠ¨åŸç‰ˆ Zwift ç¨‹åºï¼Œ\u003cstrong\u003eå¦‚æœæ˜¾ç¤ºçš„é¡µé¢è¿˜æ˜¯åŸæ¥ Zwift çš„ç™»å½•é¡µé¢ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å¼€äº†ä»£ç†ï¼Œå…³é—­ä»£ç†å†è¯•è¯•\u003c/strong\u003eã€‚\n\u003cul\u003e\n\u003cli\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/09/e577c5169d652b1ae201a337a0d292f8.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/09/e577c5169d652b1ae201a337a0d292f8.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eä¸‹å›¾æ˜¯å®˜æ–¹åŸç‰ˆç™»å½•ç•Œé¢ï¼Œ\u003cstrong\u003eå¦‚æœæ˜¾ç¤ºè¿™ä¸ªé¡µé¢è¯´æ˜é…ç½®å¤±è´¥\u003c/strong\u003eï¼š\n\u003cul\u003e\n\u003cli\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/19/d8c93c7c78d2f33555bed4a3be9d671f.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2025/02/19/d8c93c7c78d2f33555bed4a3be9d671f.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå°†è¾“å…¥æ³•åˆ‡æ¢ä¸ºå¾®è½¯è‹±æ–‡è¾“å…¥æ³•ï¼Œç‚¹å‡»\u003ccode\u003eStart Zwift\u003c/code\u003eå³å¯å¼€å§‹æ¸¸æˆã€‚å¦‚æœæ˜¯æœç‹—è¾“å…¥æ³•å°†ä¼šå¡åœ¨ç™»å½•é¡µé¢ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è·å–ä¸ªäººåŸæ¥çš„-zwift-èµ„æ–™ä¿¡æ¯\"\u003eè·å–ä¸ªäººåŸæ¥çš„ Zwift èµ„æ–™ä¿¡æ¯\u003c/h2\u003e\n\u003cp\u003eå¦‚æœä¸é…ç½®è¿™ä¸€é¡¹ï¼Œé‚£ä¹ˆä½¿ç”¨ Zwift offline éª‘è¡Œçš„æ—¶å€™ï¼Œä¼šæ˜¾ç¤ºä½ çš„ä¿¡æ¯æ˜¯ä¸€ä¸ªæ–°çš„è´¦å·ï¼Œè€Œä¸æ˜¯ä½ åŸæ¥çš„è´¦å·ã€‚\u003c/p\u003e","title":"Zwift å•æœºç‰ˆå®‰è£…æ•™ç¨‹"},{"content":"å¼•å…¥åŸå›  Per-CPU å˜é‡æ˜¯ Linux å†…æ ¸ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œä¸»è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š\né”ç«äº‰é—®é¢˜\nåœ¨ SMP ç³»ç»Ÿä¸­ï¼Œå¦‚æœå¤šä¸ª CPU åŒæ—¶è®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œéœ€è¦ä½¿ç”¨é”æ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ è¿™ç§é”æœºåˆ¶ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ Per-CPU å˜é‡ä¸ºæ¯ä¸ª CPU æ ¸å¿ƒåˆ†é…ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œæ— éœ€åŠ é”å³å¯å®‰å…¨è®¿é—® éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒPer-CPU å˜é‡æ˜¯ç‹¬ç«‹çš„å˜é‡ï¼Œæ¯ä¸ª CPU åˆ†åˆ«æœ‰ä¸€ä¸ªè‡ªå·±çš„å˜é‡ï¼Œè¿™äº›å˜é‡ä¸æ˜¯äº’ç›¸åŒæ­¥çš„ã€‚ ç¼“å­˜æ•ˆç‡\nä¼ ç»Ÿå…±äº«å˜é‡ä¼šå¯¼è‡´é¢‘ç¹çš„ç¼“å­˜å¤±æ•ˆï¼ˆcache invalidationï¼‰ Per-CPU å˜é‡ä½äºå„è‡ª CPU çš„æœ¬åœ°ç¼“å­˜ä¸­ï¼Œæé«˜ç¼“å­˜å‘½ä¸­ç‡ å‡å°‘äº† CPU é—´çš„ç¼“å­˜åŒæ­¥å¼€é”€ NUMA å‹å¥½\nåœ¨ NUMA æ¶æ„ä¸­ï¼Œè®¿é—®è¿œç«¯å†…å­˜çš„å¼€é”€å¾ˆå¤§ Per-CPU å˜é‡ç¡®ä¿æ•°æ®ä½äºæœ¬åœ°èŠ‚ç‚¹ï¼Œå‡å°‘è·¨ NUMA èŠ‚ç‚¹è®¿é—® è¿™æ—¶å€™ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥å®šä¹‰ 16 ä¸ªå˜é‡åˆ†åˆ«ç”¨äºä¸åŒçš„ CPUï¼Ÿ\nä»£ç å†—ä½™\nå¦‚æœæ‰‹åŠ¨ä¸ºæ¯ä¸ª CPU å®šä¹‰å˜é‡ï¼Œä»£ç ä¼šå˜å¾—å†—é•¿ä¸”éš¾ä»¥ç»´æŠ¤ã€‚\nä¾‹å¦‚ï¼Œå¯¹äº 128 ä¸ª CPU çš„ç³»ç»Ÿï¼Œå¯èƒ½éœ€è¦å®šä¹‰ 128 ä¸ªå˜é‡ï¼š\nint var_cpu0, var_cpu1, var_cpu2, ..., var_cpu127; ä¸èƒ½åŠ¨æ€æ”¯æŒå¤š CPU\nåœ¨æ”¯æŒ CPU çƒ­æ’æ‹”çš„ç³»ç»Ÿä¸­ï¼ŒCPU çš„æ•°é‡å¯èƒ½åŠ¨æ€å˜åŒ–ã€‚ æ‰‹åŠ¨å®šä¹‰å˜é‡æ— æ³•é€‚åº”è¿™ç§åŠ¨æ€å˜åŒ–ã€‚ è®¿é—®æ•ˆç‡ä½\nè®¿é—®ç‰¹å®š CPU çš„å˜é‡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨è®¡ç®—åç§»é‡æˆ–ä½¿ç”¨æ¡ä»¶è¯­å¥ï¼Œæ•ˆç‡è¾ƒä½ã€‚\nä¾‹å¦‚ï¼š\nint *get_var(int cpu) { switch (cpu) { case 0: return \u0026amp;var_cpu0; case 1: return \u0026amp;var_cpu1; // ... default: return NULL; } } ç¼“å­˜å±€éƒ¨æ€§é—®é¢˜\næ‰‹åŠ¨å®šä¹‰çš„å˜é‡å¯èƒ½ä½äºåŒä¸€ç¼“å­˜è¡Œä¸­ï¼Œå¯¼è‡´ ç¼“å­˜è¡Œå…±äº«ï¼ˆFalse Sharingï¼‰ï¼Œé™ä½æ€§èƒ½ã€‚ Per-CPU å˜é‡çš„ä¼˜åŠ¿\nä»£ç ç®€æ´\nPer-CPU å˜é‡é€šè¿‡å†…æ ¸æä¾›çš„æœºåˆ¶è‡ªåŠ¨ä¸ºæ¯ä¸ª CPU åˆ†é…å˜é‡ï¼Œä»£ç æ›´ç®€æ´ã€‚\nä¾‹å¦‚ï¼š\nDEFINE_PER_CPU(int, my_var); åŠ¨æ€é€‚åº” CPU æ•°é‡\nPer-CPU å˜é‡æ”¯æŒåŠ¨æ€ CPU æ•°é‡ï¼Œèƒ½å¤Ÿè‡ªåŠ¨é€‚åº” CPU çƒ­æ’æ‹”ã€‚\nä¾‹å¦‚ï¼ŒåŠ¨æ€åˆ†é… Per-CPU å˜é‡ï¼š\nint __percpu *my_var = alloc_percpu(int); é«˜æ•ˆè®¿é—®\nPer-CPU å˜é‡é€šè¿‡å†…æ ¸æä¾›çš„å®ï¼ˆå¦‚ this_cpu_ptr å’Œ per_cpu_ptrï¼‰é«˜æ•ˆè®¿é—®å½“å‰æˆ–æŒ‡å®š CPU çš„å˜é‡ã€‚\nä¾‹å¦‚ï¼š\nint *ptr = this_cpu_ptr(\u0026amp;my_var); // è®¿é—®å½“å‰ CPU çš„å˜é‡ int *ptr = per_cpu_ptr(\u0026amp;my_var, cpu); // è®¿é—®æŒ‡å®š CPU çš„å˜é‡ ç¼“å­˜ä¼˜åŒ–\nPer-CPU å˜é‡ä¼šè‡ªåŠ¨å¯¹é½åˆ°ç¼“å­˜è¡Œï¼Œé¿å…ç¼“å­˜è¡Œå…±äº«é—®é¢˜ã€‚ ä¾‹å¦‚ï¼Œå†…æ ¸ä¼šç¡®ä¿æ¯ä¸ª CPU çš„å˜é‡ä½äºä¸åŒçš„ç¼“å­˜è¡Œä¸­ã€‚ é™æ€å£°æ˜å’Œå®šä¹‰ // 1. å®šä¹‰ Per-CPU å˜é‡ DEFINE_PER_CPU(type, name); // å®šä¹‰å¹¶åˆå§‹åŒ–ä¸º 0 DEFINE_PER_CPU(type, name) = value; // å®šä¹‰å¹¶æŒ‡å®šåˆå€¼ // 2. å£°æ˜å¤–éƒ¨ Per-CPU å˜é‡ DECLARE_PER_CPU(type, name); // å£°æ˜åœ¨å…¶ä»–åœ°æ–¹å®šä¹‰çš„å˜é‡ // 3. å®šä¹‰ Per-CPU æ•°ç»„ DEFINE_PER_CPU(type, name[SIZE]); // å®šä¹‰æ•°ç»„ç±»å‹ // 4. å®šä¹‰åªè¯» Per-CPU å˜é‡ DEFINE_PER_CPU_READ_MOSTLY(type, name); // ä¸»è¦ç”¨äºåªè¯»æ•°æ®ï¼Œä¼˜åŒ–ç¼“å­˜ å†…éƒ¨å®ç°æœºåˆ¶ #define DEFINE_PER_CPU(type, name) \\ DEFINE_PER_CPU_SECTION(type, name, \u0026#34;\u0026#34;) __attribute__((section(\u0026#34;.data..percpu\u0026#34;))) int per_cpu_n #define DEFINE_PER_CPU_SECTION(type, name, sec) \\ __PCPU_ATTRS(sec) __typeof__(type) name #define __PCPU_ATTRS(sec) \\ __percpu __attribute__((section(PER_CPU_BASE_SECTION sec))) #define PER_CPU_BASE_SECTION \u0026#34;.data..percpu\u0026#34; æ¯”å¦‚ï¼š\n// åœ¨ç¼–è¯‘æ—¶å®šä¹‰ Per-CPU å˜é‡ DEFINE_PER_CPU(int, my_counter) = 0; // å±•å¼€åå®é™…ä¸Šæ˜¯ __attribute__((section(\u0026#34;.data..percpu\u0026#34;))) int my_counter = 0; è¿™é‡Œä¸ºä»€ä¹ˆè¦å¼•å…¥ section æœºåˆ¶ï¼Ÿ\nå¯¹äº kernel ä¸­çš„æ™®é€šå˜é‡ï¼Œç»è¿‡äº†ç¼–è¯‘å’Œé“¾æ¥åï¼Œä¼šè¢«æ”¾ç½®åˆ°.data æˆ–è€….bss æ®µï¼Œç³»ç»Ÿåœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šå‡†å¤‡å¥½ä¸€åˆ‡ï¼ˆä¾‹å¦‚ clear bssï¼‰ï¼Œç”±äº per CPU å˜é‡çš„ç‰¹æ®Šæ€§ï¼Œå†…æ ¸å°†è¿™äº›å˜é‡æ”¾ç½®åˆ°äº†å…¶ä»–çš„ sectionï¼Œä½äº kernel address space ä¸­__per_cpu_startå’Œ__per_cpu_endä¹‹é—´ï¼Œæˆ‘ä»¬ç§°ä¹‹ Per-CPU å˜é‡çš„åŸå§‹å˜é‡ã€‚ æ‘˜è‡ªï¼šLinux å†…æ ¸åŒæ­¥æœºåˆ¶ä¹‹ï¼ˆäºŒï¼‰ï¼šPer-CPU å˜é‡\nSection æœºåˆ¶å…è®¸ç¼–è¯‘å™¨å°†ç‰¹å®šçš„æ•°æ®æ”¾åœ¨ç›®æ ‡æ–‡ä»¶çš„ç‰¹å®šåŒºåŸŸ å¯¹äº Per-CPU å˜é‡ï¼ŒLinux ä½¿ç”¨ .data..percpu section å°†æ‰€æœ‰ Per-CPU å˜é‡é›†ä¸­å­˜æ”¾ è¿™ç§é›†ä¸­å­˜æ”¾ä¾¿äºè¿è¡Œæ—¶è¿›è¡Œæ•´ä½“å¤åˆ¶å’Œç®¡ç† Per-CPU å˜é‡å¦‚ä½•å»ºç«‹å‰¯æœ¬çš„ï¼Ÿ\nåœ¨å†…æ ¸åˆå§‹åŒ–é˜¶æ®µä¼šè°ƒç”¨setup_per_cpu_areaså‡½æ•°ï¼Œä¸ºæ¯ä¸ª CPU è®¾ç½® Per-CPU å˜é‡çš„åç§»åœ°å€ã€‚\nvoid __init setup_per_cpu_areas(void) { unsigned long delta; unsigned int cpu; ... delta = (unsigned long)pcpu_base_addr - (unsigned long)__per_cpu_start; for_each_possible_cpu(cpu) __per_cpu_offset[cpu] = delta + pcpu_unit_offsets[cpu]; } __per_cpu_offset æ˜¯ä¸€ä¸ªå…¨å±€æ•°ç»„ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ª CPU çš„ Per-CPU å˜é‡çš„åç§»åœ°å€ã€‚ åœ¨åˆå§‹åŒ–æ—¶ï¼Œå†…æ ¸ä¼šä¸ºæ¯ä¸ª CPU è®¡ç®—å…¶ Per-CPU å˜é‡çš„åŸºåœ°å€ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ __per_cpu_offset[cpu] ä¸­ã€‚ è¿™ä¸ªåç§»åœ°å€æ˜¯ç›¸å¯¹äº Per-CPU å˜é‡çš„èµ·å§‹åœ°å€ï¼ˆ__per_cpu_startï¼‰çš„ã€‚ åœ¨ CPU åˆå§‹åŒ–æ—¶ï¼Œå†…æ ¸ä¼šä½¿ç”¨è°ƒç”¨set_my_cpu_offsetå‡½æ•°è®¾ç½®æ¯ä¸ª CPU é™æ€ Per-CPU å˜é‡çš„åç§»åœ°å€ã€‚\n#define per_cpu_offset(x) (__per_cpu_offset(x)) void notrace cpu_init(void) { #ifndef CONFIG_CPU_V7M unsigned int cpu = smp_processor_id(); struct stack *stk = \u0026amp;stacks[cpu]; if (cpu \u0026gt;= NR_CPUS) { pr_crit(\u0026#34;CPU%u: bad primary CPU number\\n\u0026#34;, cpu); BUG(); } /* * This only works on resume and secondary cores. For booting on the * boot cpu, smp_prepare_boot_cpu is called after percpu area setup. */ set_my_cpu_offset(per_cpu_offset(cpu)); cpu_proc_init(); ... } åœ¨set_my_cpu_offsetå‡½æ•°ä¸­ï¼Œæ ¹æ®ARM64_HAS_VIRT_HOST_EXTNçš„å€¼ï¼Œé€‰æ‹©å°†åç§»åœ°å€å†™å…¥tpidr_el1æˆ–è€…tpidr_el2å¯„å­˜å™¨ã€‚\n/* arch/arm64/include/asm/percpu.h */ static inline void set_my_cpu_offset(unsigned long off) { asm volatile(ALTERNATIVE(\u0026#34;msr tpidr_el1, %0\u0026#34;, \u0026#34;msr tpidr_el2, %0\u0026#34;, ARM64_HAS_VIRT_HOST_EXTN) :: \u0026#34;r\u0026#34; (off) : \u0026#34;memory\u0026#34;); } åœ¨è®¿é—®æ—¶ä½¿ç”¨this_cpu_ptrå®ï¼Œå±•å¼€åå¯ä»¥å‘ç°ç›¸å½“äº percpu å˜é‡æŒ‡é’ˆ ptr åŠ ä¸Š__my_cpu_offsetã€‚__my_cpu_offsetå®å³æ˜¯ä»å½“å‰cpuçš„tpidr_el1ã€tpidr_el2å¯„å­˜å™¨ä¸­å–å‡ºæ­¤å‰è®¾ç½®çš„__per_cpu_offset[cpu]å€¼ã€‚\n#define this_cpu_ptr(ptr) raw_cpu_ptr(ptr) #define raw_cpu_ptr(ptr) \\ ({ \\ __verify_pcpu_ptr(ptr); \\ arch_raw_cpu_ptr(ptr); \\ }) #define arch_raw_cpu_ptr(ptr) SHIFT_PERCPU_PTR(ptr, __my_cpu_offset) static inline unsigned long __my_cpu_offset(void) { unsigned long off; /* * We want to allow caching the value, so avoid using volatile and * instead use a fake stack read to hazard against barrier(). */ asm(ALTERNATIVE(\u0026#34;mrs %0, tpidr_el1\u0026#34;, \u0026#34;mrs %0, tpidr_el2\u0026#34;, ARM64_HAS_VIRT_HOST_EXTN) : \u0026#34;=r\u0026#34; (off) : \u0026#34;Q\u0026#34; (*(const unsigned long *)current_stack_pointer)); return off; } ä½¿ç”¨æ–¹å¼ Per-CPU å˜é‡çš„å¸¸ç”¨æ“ä½œæ–¹å¼ï¼š\né™æ€å®šä¹‰\n// å®šä¹‰ Per-CPU æ•´å‹å˜é‡ DEFINE_PER_CPU(int, my_percpu_var); // å®šä¹‰ Per-CPU ç»“æ„ä½“ DEFINE_PER_CPU(struct my_struct, my_percpu_struct); è®¿é—®å˜é‡\n// è·å–æœ¬åœ° CPU çš„å˜é‡ int cpu_var = get_cpu_var(my_percpu_var); put_cpu_var(my_percpu_var); // å¿…é¡»é…å¯¹ä½¿ç”¨ // è®¿é—®æŒ‡å®š CPU çš„å˜é‡ int var_cpu0 = per_cpu(my_percpu_var, 0); // éå†æ‰€æœ‰ CPU çš„å˜é‡ int cpu; for_each_possible_cpu(cpu) { int value = per_cpu(my_percpu_var, cpu); // å¤„ç† value } ","permalink":"https://lifeislife.cn/posts/per-cpu-%E5%8F%98%E9%87%8F/","summary":"\u003ch3 id=\"å¼•å…¥åŸå› \"\u003eå¼•å…¥åŸå› \u003c/h3\u003e\n\u003cp\u003ePer-CPU å˜é‡æ˜¯ Linux å†…æ ¸ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œä¸»è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eé”ç«äº‰é—®é¢˜\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨ SMP ç³»ç»Ÿä¸­ï¼Œå¦‚æœå¤šä¸ª CPU åŒæ—¶è®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œéœ€è¦ä½¿ç”¨é”æ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§\u003c/li\u003e\n\u003cli\u003eè¿™ç§é”æœºåˆ¶ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹\u003c/li\u003e\n\u003cli\u003ePer-CPU å˜é‡ä¸ºæ¯ä¸ª CPU æ ¸å¿ƒåˆ†é…ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œæ— éœ€åŠ é”å³å¯å®‰å…¨è®¿é—®\u003c/li\u003e\n\u003cli\u003eéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒPer-CPU å˜é‡æ˜¯ç‹¬ç«‹çš„å˜é‡ï¼Œæ¯ä¸ª CPU åˆ†åˆ«æœ‰ä¸€ä¸ªè‡ªå·±çš„å˜é‡ï¼Œè¿™äº›å˜é‡ä¸æ˜¯äº’ç›¸åŒæ­¥çš„ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç¼“å­˜æ•ˆç‡\u003c/strong\u003e\u003c/p\u003e","title":"Per-CPU å˜é‡"},{"content":"ä¸ºä»€ä¹ˆè¦å‡çº§ äººå‚»é’±å¤šï¼ˆbushiï¼‰ã€‚å¹³æ—¶éª‘å°å­èƒ½å®æ—¶çœ‹åˆ°è‡ªå·±è¾“å‡ºåŠŸç‡ï¼Œåˆ¤æ–­è‡ªå·±çš„çŠ¶æ€ï¼Œä¹Ÿèƒ½æ›´å¥½çš„æ§åˆ¶è‡ªå·±çš„è®­ç»ƒå¼ºåº¦ï¼Œä¸è‡³äºè¿‡åº¦è®­ç»ƒã€‚å¤–å‡ºè·¯éª‘æ²¡æœ‰åŠŸç‡è®¡æ€»è§‰å¾—ä¸å¾—åŠ²ï¼Œç‰¹åˆ«æ˜¯åœ¨è¹­é£æˆ–è€…å›¢éª‘æ—¶ï¼Œä¸çŸ¥é“è‡ªå·±çš„çŠ¶æ€å¦‚ä½•ï¼Œå› ä¸ºè·¯éª‘äººæ¯”è¾ƒå…´å¥‹ï¼Œä¹Ÿè®¸åŠŸç‡å·²ç»è¶…è¿‡è‡ªå·±çš„FTPä½†æ˜¯å¯èƒ½å¹¶ä¸è§‰å¾—ç´¯ï¼Œä½†æ˜¯ä½“èƒ½æ˜¯æœ‰é™çš„ï¼Œä¸ç´¯åªæ˜¯ç²¾ç¥ä¸Šçš„æ„Ÿè§‰ï¼Œä¹Ÿè®¸éª‘ä¸äº†å¤šä¹…ç²¾ç¥å¤´è¿‡äº†å°±è¢«æ‹‰çˆ†äº†ã€‚æ‰€ä»¥ååˆ†æƒ³è¦ä¸€ä¸ªåŠŸç‡è®¡èƒ½å¤Ÿå®æ—¶çœ‹åˆ°è‡ªå·±çš„è¾“å‡ºåŠŸç‡ï¼Œèƒ½è®©è·¯éª‘å°½é‡ç»´æŒåœ¨è‡ªå·±æƒ³è¦çš„å¼ºåº¦ã€‚\nå‰æœŸå‡†å¤‡ å…ˆäº†è§£å’ŒåŠŸç‡è®¡ç›¸å…³çš„å‡ ä¸ªé›¶ä»¶ï¼š\nç›˜ç‰‡ SRAM Rival 107BCD ç›˜ç‰‡ \u003c!DOCTYPE html\u003e Responsive Image ç›˜çˆª SRAM Red AXS/Force \u003c!DOCTYPE html\u003e Responsive Image ç›˜é’‰ï¼šå›ºå®šç›˜ç‰‡å’Œç›˜çˆª SRAM RIVAL 107/94 BCD M8X4.75X8.75 ç›˜é’‰ \u003c!DOCTYPE html\u003e Responsive Image æ›²æŸ„ SRAM RIVAL AXS QUARQ DUB \u003c!DOCTYPE html\u003e Responsive Image æ›²æŸ„èºä¸ SRAM DUB AXS REDæˆ–FROCE æ›²æŸ„èºä¸ \u003c!DOCTYPE html\u003e Responsive Image ä¸­è½´ å’Œæ›²æŸ„è¿æ¥åœ¨ä¸€èµ· \u003c!DOCTYPE html\u003e Responsive Image åŠŸç‡è®¡çš„ç§ç±»æœ‰å¾ˆå¤šï¼Œæœ‰è„šè¸åŠŸç‡è®¡ï¼Œç›˜çˆªåŠŸç‡è®¡ã€æ›²æŸ„åŠŸç‡è®¡å’Œè´´ç‰‡åŠŸç‡è®¡ç­‰ç­‰ï¼Œæ¯ç§åŠŸç‡è®¡éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼Œå› ä¸ºæˆ‘ä¹Ÿä¸æ˜¯ä¸“å®¶æ‰€ä»¥å°±ä¸è¯¦ç»†ä»‹ç»äº†ï¼Œæƒ³è¦äº†è§£çš„å¯ä»¥å‚è€ƒè§†é¢‘å…¬è·¯è½¦åŠŸç‡è®¡ä»‹ç»å’Œé€‰æ‹©å®‰è£…å»ºè®®_å“”å“©å“”å“©_bilibiliã€‚\næˆ‘åœ¨çœ‹äº†ä¸€äº›ä»‹ç»è§†é¢‘ä»¥åŠæ ¹æ®è‡ªå·±ç›®å‰ä½¿ç”¨å¥—ä»¶çš„æƒ…å†µï¼Œæœ€ç»ˆé€‰æ‹©äº†ä½¿ç”¨äººç¾¤æœ€å¹¿çš„ç›˜çˆªå¼åŠŸç‡è®¡ï¼Œç›˜çˆªåŠŸç‡è®¡å°±æ˜¯å°†ä¸Šé¢æåˆ°çš„ç›˜çˆªè¿™ä¸ªé‚»æ¥ç”¨åŠŸç‡è®¡æ›¿æ¢ï¼ŒåŠŸç‡è®¡æœ¬èº«å°±æ˜¯ç›˜çˆªã€‚ä¸‹é¢æ˜¯æˆ‘å‡çº§é€‰è´­çš„ä¸€äº›æ€è·¯ï¼Œä¾›å’Œæˆ‘ä¸€æ ·çš„å°ç™½å‚è€ƒã€‚\nå½“æˆ‘å†³å®šä½¿ç”¨ç›˜çˆªå¼åŠŸç‡è®¡æ—¶ï¼Œå°±éœ€è¦é€‰æ‹©å…·ä½“å“ªä¸€æ¬¾ï¼Œå“ªä¸€ä¸ªå“ç‰Œçš„åŠŸç‡è®¡ï¼Œå¯ä»¥ç›´æ¥æ·˜å®æœç´¢â€œç›˜çˆªåŠŸç‡è®¡â€ï¼Œä¼šæœ‰å¾ˆå¤šé€‰æ‹©ï¼Œå¦‚ï¼š\nè¿ˆé‡‘ P505 SRAM QUARQ Sigeyi æ€å„å¼‚ XCADEY æ¥ä¸‹æ¥å°±æ˜¯æ ¹æ®è‡ªå·±çš„é’±åŒ…å¤§å°æ¥é€‰æ‹©äº†ï¼Œå½“ç„¶è¿˜æœ‰ä¸€ä¸ªæœ€é‡è¦çš„å‚æ•°ï¼Œå°±æ˜¯BCDï¼Œè¿™ä¸ªå‚æ•°æ˜¯ç›˜çˆªåŠŸç‡è®¡çš„èºä¸å­”çš„é—´è·ï¼Œä¸åŒçš„å“ç‰Œä¸åŒçš„å‹å·çš„ç›˜çˆªåŠŸç‡è®¡BCDæ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¸ªå‚æ•°å†³å®šäº†åŠŸç‡è®¡èƒ½å¦å®‰è£…åˆ°ç‰™ç›˜ä¸Šï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯SRAM Rival eTap AXSå¥—ä»¶ï¼Œè¿™ä¸ªå¥—ä»¶çš„BCDæ˜¯107ï¼Œæ‰€ä»¥æˆ‘éœ€è¦é€‰æ‹©BCDä¸º107çš„ç›˜çˆªåŠŸç‡è®¡ã€‚è¿™æ—¶æŸ¥çœ‹å„ä¸ªåŠŸç‡è®¡è¯¦æƒ…å¯ä»¥çœ‹åˆ°è¿ˆé‡‘ä¸æ”¯æŒ107BCDï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ’é™¤è¿™æ¬¾åŠŸç‡è®¡äº†ã€‚åœ¨å‰©ä¸‹çš„å‡ æ¬¾åŠŸç‡è®¡ä¸­ï¼ŒSRAM QUARQæ˜¯SRAMè‡ªå®¶çš„äº§å“ï¼Œæˆ‘è§‰å¾—åŸé…æœ€å¥½ï¼Œæ‰€ä»¥é€‰æ‹©äº†SRAM QUARQã€‚\nå…³äºç›˜ç‰‡å’Œç›˜çˆªè§„æ ¼çš„ä»‹ç»å¯ä»¥å‚è€ƒè§†é¢‘ã€è‡ªè¡Œè½¦ç»´ä¿®æ‰‹å†Œã€‘ç¬¬17æœŸ å…¬è·¯è½¦ç›˜ç‰‡é€‰æ‹©ä¸å®‰è£…_å“”å“©å“”å“©_bilibili\nåœ¨ç¡®å®šäº†åŠŸç‡è®¡åï¼Œå°±éœ€è¦è€ƒè™‘å¦‚ä½•å®‰è£…äº†ï¼ŒRIVALå¥—ä»¶ä¸­ï¼Œæ›²æŸ„å’Œç›˜çˆªæ˜¯ä¸€ä½“çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœè¦åœ¨ä¸æ›´æ¢ç›˜ç‰‡çš„æƒ…å†µä¸‹åŠ è£…åŠŸç‡è®¡ï¼Œå°±éœ€è¦æ›´æ¢æ›²æŸ„ã€‚æ›´æ¢æ›²æŸ„å°±éœ€è¦äº†è§£æ›²æŸ„çš„è§„æ ¼ï¼Œæœ‰ä¸åŒç±»å‹çš„ä¸­è½´æ¯”å¦‚GXPå’ŒDUï¼Œæœ‰ä¸åŒçš„æ›²æŸ„é•¿åº¦ï¼Œè¿˜æœ‰ä¸åŒçš„å®‰è£…è§„æ ¼ï¼Œæ¯”å¦‚3é’‰ï¼Œ5é’‰ï¼Œ8é’‰ç­‰ç­‰ã€‚å› ä¸ºæˆ‘ä»¬å·²ç»é€‰å¥½äº†ç›˜çˆªåŠŸç‡è®¡ï¼Œè€Œç›˜çˆªåŠŸç‡è®¡æ˜¯å’Œæ›²æŸ„å®‰è£…åœ¨ä¸€èµ·çš„ï¼Œæ‰€ä»¥ç›˜çˆªåŠŸç‡è®¡çš„è§„æ ¼å·²ç»ç¡®å®šäº†æ›²æŸ„çš„å®‰è£…è§„æ ¼ï¼Œæ¯”å¦‚QUARQçš„ç›˜çˆªåŠŸç‡è®¡æ˜¯8é’‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€‰æ‹©8é’‰çš„æ›²æŸ„ã€‚æ¥ä¸‹æ¥å°±æ˜¯é€‰æ‹©æ›²æŸ„çš„é•¿åº¦ï¼Œæ›²æŸ„çš„é•¿åº¦æ ¹æ®è‡ªå·±çš„èº«ä½“æ•°æ®æ¥é€‰æ‹©ï¼Œæ²¡æœ‰Fittingçš„è¯å°±çœ‹åŸæ¥æ›²æŸ„çš„é•¿åº¦ï¼Œæ¢ä¸€ä¸ªä¸€æ ·é•¿åº¦çš„å³å¯ï¼Œæ›²æŸ„çš„é•¿åº¦æ ‡æ³¨åœ¨æ›²æŸ„ä¸Šï¼Œæ¯”å¦‚æˆ‘çš„RIVALå¥—ä»¶æ˜¯170mmã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ ¹æ®è¿™äº›ä¿¡æ¯æˆ‘é€‰æ‹©äº†SRAM FORCE DUB 8 é’‰æ›²æŸ„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å…³äºæ›²æŸ„è§„æ ¼çš„ä»‹ç»å¯ä»¥å‚è€ƒè§†é¢‘ã€è‡ªè¡Œè½¦ç»´ä¿®æ‰‹å†Œã€‘ç¬¬15æœŸ è‡ªè¡Œè½¦æ›²æŸ„ç‰™ç›˜è§„æ ¼åŒºåˆ†ä»‹ç»_å“”å“©å“”å“©_bilibili\nè‡³æ­¤ä¸»è¦çš„é›¶ä»¶å·²ç»é€‰è´­å®Œæ¯•ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç­‰å¾…é›¶ä»¶åˆ°è´§ï¼Œç„¶åå¼€å§‹å®‰è£…ã€‚ä½†æ˜¯å®‰è£…å°‘ä¸äº†å·¥å…·ï¼Œéœ€è¦å‡†å¤‡çš„å·¥å…·æœ‰ï¼š\n8 mm å†…å…­è§’æ‰³æ‰‹ï¼Œæ‹†å¸å®‰è£…æ›²æŸ„ ç©ºå¿ƒé’¢ç®¡ï¼Œç”¨äºæ‹†å¸å®‰è£…æ›²æŸ„ï¼Œå½“åšåŠ åŠ›æ†ï¼Œæ›²æŸ„çš„èºä¸æ‰­åŠ›é«˜è¾¾50N.mï¼Œæ™®é€šæ‰³æ‰‹åŠ›è‡‚å¤ªå°ï¼Œå¾ˆéš¾æ‹§ä¸‹æ¥ 6 mm å†…å…­è§’æ‰³æ‰‹ï¼Œæ‹†å¸å®‰è£…è„šè¸ 2 mm å†…å…­è§’æ‰³æ‰‹ï¼Œè°ƒæ•´æ›²æŸ„é”ç´§ç¯ æ‰­åŠ›æ‰³æ‰‹ï¼Œå®‰è£…æ›²æŸ„èºä¸ ç•Œé¢è„‚ æ‹†å¸ æ›²æŸ„æ‹†å¸æ–¹å¼å¯ä»¥å‚è€ƒè§†é¢‘æŠ€å¸ˆæ‰‹å†Œåå››ï¼ˆè¿è½½ï¼‰é€Ÿè”RIVALç‰™ç›˜æ›²æŸ„æ‹†è£…_å“”å“©å“”å“©_bilibiliã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯åœ¨æ‹†å¸æ›²æŸ„æ—¶ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªç©ºå¿ƒé’¢ç®¡å¥—åœ¨å†…å…­è§’æ‰³æ‰‹ä¸Šï¼Œè¿™æ ·å¯ä»¥å¢åŠ åŠ›è‡‚ï¼Œå‡å°åŠ›è‡‚ï¼Œè¿™æ ·å°±å¯ä»¥æ›´å®¹æ˜“çš„æ‹§ä¸‹æ›²æŸ„èºä¸ã€‚è¿˜æœ‰å¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ€»è®°ä¸ä½æ‹†å¸æ›²æŸ„å’Œè„šè¸çš„æ–¹å‘ï¼Œé‚£ä¹ˆå¯ä»¥è¿™ä¹ˆè®°ã€‚æ‹†å¸çš„æ—‹è½¬æ–¹å‘éƒ½æ˜¯è¸©è¸å‰è¿›çš„ç›¸åæ–¹å‘ã€‚\nå®‰è£… å®‰è£…å°±æ˜¯æŠŠèºä¸æ‹§ä¸Šï¼Œä½†æ˜¯æœ‰ä¸€äº›ç»†èŠ‚éœ€è¦æ³¨æ„ï¼š\næ›²æŸ„å’Œç›˜çˆªè¿æ¥çš„èºä¸çš„æ‰­åŠ›å€¼ä¸º 4 N.m å¤§ç‰™ç›˜æ­£é¢æœ‰ä¸€ä¸ªé‡‘å±åœ†æŸ±ï¼Œè¿™ä¸ªåœ†æŸ±ä½“éœ€è¦åœ¨æ›²æŸ„æ­£ä¸‹æ–¹ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å°ç‰™ç›˜ä¸Šæœ‰ä¸€ä¸ªå‡¸èµ·çš„å°–å°–ï¼Œè¿™ä¸ªå°–å°–éœ€è¦åœ¨æ›²æŸ„æ­£ä¸‹æ–¹ \u003c!DOCTYPE html\u003e Responsive Image å°ç‰™ç›˜æ ‡æ³¨é½¿æ•°å’Œå‹å·çš„é‚£é¢æ­£å¯¹è‡ªå·±æ‰æ˜¯æ­£ç¡®çš„æ–¹å‘ ç‰™ç›˜çš„ç›˜é’‰æ‰­åŠ›å€¼ä¸º 10 N.m æ¯ä¸ªèºä¸éƒ½æŠ¹ä¸Šç•Œé¢è„‚ï¼Œå› ä¸ºç‰™ç›˜ä¸Šçš„èºä¸éƒ½ä¼šå—åˆ°å¾ˆå¤§çš„åŠ›ï¼Œæ‰€ä»¥éœ€è¦æŠ¹ä¸Šç•Œé¢è„‚ï¼Œè¿™æ ·å¯ä»¥å‡å°èºä¸çš„æ‘©æ“¦åŠ›ï¼Œå‡å°èºä¸çš„ç£¨æŸï¼Œä¹Ÿå¯ä»¥é˜²æ­¢å¼‚å“ ä¸­è½´çš„å¤§èºä¸æŠ¹ä¸Šé»„æ²¹ï¼Œæ‰­åŠ›å€¼è‡³å°‘ä¸º50 N.mï¼Œæ‰­ç´§æ—¶æœ€å¥½ç”¨ä¸Šç©ºå¿ƒé’¢ç®¡ å‚è€ƒèµ„æ–™ ã€è‡ªè¡Œè½¦ç»´ä¿®æ‰‹å†Œã€‘ç¬¬15æœŸ è‡ªè¡Œè½¦æ›²æŸ„ç‰™ç›˜è§„æ ¼åŒºåˆ†ä»‹ç»_å“”å“©å“”å“©_bilibili ã€è‡ªè¡Œè½¦ç»´ä¿®æ‰‹å†Œã€‘ç¬¬17æœŸ å…¬è·¯è½¦ç›˜ç‰‡é€‰æ‹©ä¸å®‰è£…_å“”å“©å“”å“©_bilibili å…¬è·¯è½¦åŠŸç‡è®¡ä»‹ç»å’Œé€‰æ‹©å®‰è£…å»ºè®®_å“”å“©å“”å“©_bilibili ","permalink":"https://lifeislife.cn/posts/%E9%80%9F%E8%81%94sram-rival%E5%8D%87%E7%BA%A7%E5%8A%9F%E7%8E%87%E8%AE%A1/","summary":"\u003ch1 id=\"ä¸ºä»€ä¹ˆè¦å‡çº§\"\u003eä¸ºä»€ä¹ˆè¦å‡çº§\u003c/h1\u003e\n\u003cp\u003eäººå‚»é’±å¤šï¼ˆbushiï¼‰ã€‚å¹³æ—¶éª‘å°å­èƒ½å®æ—¶çœ‹åˆ°è‡ªå·±è¾“å‡ºåŠŸç‡ï¼Œåˆ¤æ–­è‡ªå·±çš„çŠ¶æ€ï¼Œä¹Ÿèƒ½æ›´å¥½çš„æ§åˆ¶è‡ªå·±çš„è®­ç»ƒå¼ºåº¦ï¼Œä¸è‡³äºè¿‡åº¦è®­ç»ƒã€‚å¤–å‡ºè·¯éª‘æ²¡æœ‰åŠŸç‡è®¡æ€»è§‰å¾—ä¸å¾—åŠ²ï¼Œç‰¹åˆ«æ˜¯åœ¨è¹­é£æˆ–è€…å›¢éª‘æ—¶ï¼Œä¸çŸ¥é“è‡ªå·±çš„çŠ¶æ€å¦‚ä½•ï¼Œå› ä¸ºè·¯éª‘äººæ¯”è¾ƒå…´å¥‹ï¼Œä¹Ÿè®¸åŠŸç‡å·²ç»è¶…è¿‡è‡ªå·±çš„FTPä½†æ˜¯å¯èƒ½å¹¶ä¸è§‰å¾—ç´¯ï¼Œä½†æ˜¯ä½“èƒ½æ˜¯æœ‰é™çš„ï¼Œä¸ç´¯åªæ˜¯ç²¾ç¥ä¸Šçš„æ„Ÿè§‰ï¼Œä¹Ÿè®¸éª‘ä¸äº†å¤šä¹…ç²¾ç¥å¤´è¿‡äº†å°±è¢«æ‹‰çˆ†äº†ã€‚æ‰€ä»¥ååˆ†æƒ³è¦ä¸€ä¸ªåŠŸç‡è®¡èƒ½å¤Ÿå®æ—¶çœ‹åˆ°è‡ªå·±çš„è¾“å‡ºåŠŸç‡ï¼Œèƒ½è®©è·¯éª‘å°½é‡ç»´æŒåœ¨è‡ªå·±æƒ³è¦çš„å¼ºåº¦ã€‚\u003c/p\u003e","title":"é€Ÿè”SRAM RIVALå‡çº§åŠŸç‡è®¡"},{"content":"Followæ˜¯ä¸€ä¸ªå¼€æºRSSé˜…è¯»å™¨ï¼Œå¯ä»¥å‘å¸ƒè‡ªå·±çš„è®¢é˜…æºï¼Œæ¯”å¦‚å°†è‡ªå·±çš„åšå®¢RSSå‘å¸ƒåˆ°Followä¸Šï¼Œå…¶ä»–ç”¨æˆ·åœ¨Followä¸Šè®¢é˜…ä½ çš„åšå®¢æ—¶ï¼Œå°±å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä½ å‘å¸ƒçš„æºï¼Œå¹¶ä¸”å¯ä»¥ä¸ºæºçš„å‘å¸ƒè€…è¿›è¡Œæ‰“èµã€‚å½“ç„¶è‡ªå·±çš„å°åšå®¢ä¹Ÿä¸æŒ‡æœ›å…¶ä»–äººèƒ½è®¢é˜…ï¼Œåªæ˜¯æƒ³å®ŒæˆFollowçš„æˆå°±ä»»åŠ¡ï¼Œå®Œæˆè®¤è¯åå¯ä»¥è·å¾—Powerå€¼ï¼Œå¯ä»¥ç”¨æ¥æ‰“èµå…¶ä»–ç”¨æˆ·ï¼Œä»¥åŠè´­ä¹°å…¶ä»–æœåŠ¡ï¼Œæ¯”å¦‚è®¢é˜…ä»˜è´¹çš„åˆ—è¡¨ç­‰ã€‚\nPaperModå·²ç»åµŒå…¥äº†RSSè®¢é˜…åŠŸèƒ½ï¼Œæ‰€ä»¥è®¤è¯ä¼šå¾ˆæ–¹ä¾¿ï¼Œæ‰€è°“è®¤è¯å°±æ˜¯åœ¨è‡ªå·±çš„ç½‘ç«™ä¸­åŠ å…¥ä¸€æ®µä»£ç ï¼ŒFollowä¼šæ£€æµ‹è¿™æ®µä»£ç ï¼Œå¦‚æœæ£€æµ‹åˆ°äº†ï¼Œå°±ä¼šè®¤ä¸ºè¿™ä¸ªç½‘ç«™æ˜¯ä½ å‘å¸ƒçš„æºï¼Œä»è€Œå®Œæˆè®¤è¯ã€‚\nå¼€å¯PaperModçš„RSSè®¢é˜…åŠŸèƒ½ é¦–å…ˆè¦åœ¨config.yamlä¸­å¼€å¯RSSè®¢é˜…åŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼š\nparams: socialIcons: - name: RSS url: \u0026#34;{ç½‘ç«™é“¾æ¥}/index.xml\u0026#34; ShowFullTextinRSS: true socialIconså‚æ•°ç”¨äºæ·»åŠ åšå®¢ä¸»é¡µçš„å›¾æ ‡ï¼Œè¿™é‡Œæ·»åŠ äº†ä¸€ä¸ªRSSè®¢é˜…å›¾æ ‡ï¼Œå…¶ä¸­{ç½‘ç«™é“¾æ¥}æ˜¯ä½ çš„ç½‘ç«™é“¾æ¥ï¼Œæ¯”å¦‚æˆ‘çš„åšå®¢æ˜¯https://lifeislife.cn/ï¼Œé‚£ä¹ˆè¿™é‡Œå°±å¡«https://lifeislife.cn/index.xmlã€‚ShowFullTextinRSSå‚æ•°æ˜¯æ§åˆ¶RSSè®¢é˜…çš„å†…å®¹æ˜¯å¦æ˜¾ç¤ºå…¨æ–‡ï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™æ˜¾ç¤ºå…¨æ–‡ï¼Œå¦åˆ™åªæ˜¾ç¤ºæ‘˜è¦ã€‚å¦‚æœä¸ºfalseï¼Œé‚£ä¹ˆRSSè®¢é˜…æ—¶åªä¼šæ˜¾ç¤ºæ‘˜è¦ï¼Œç‚¹å‡»åæ‰ä¼šè·³è½¬åˆ°åšå®¢æŸ¥çœ‹å…¨æ–‡ã€‚ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·é˜…è¯»ï¼Œå»ºè®®è®¾ç½®ä¸ºtrueã€‚\nå‰å¾€Followè¿›è¡Œè®¢é˜… æ‰“å¼€åšå®¢ä¸»é¡µï¼Œç‚¹å‡»RSSå›¾æ ‡ï¼Œä¼šè·³è½¬åˆ°https://lifeislife.cn/index.xmlï¼Œè¿™æ˜¯åšå®¢çš„RSSè®¢é˜…åœ°å€ï¼Œå¤åˆ¶è¿™ä¸ªåœ°å€ï¼Œç„¶åæ‰“å¼€Followï¼Œç‚¹å‡»å³ä¸Šè§’çš„+ï¼Œé€‰æ‹©Add Feedï¼Œç²˜è´´åˆšæ‰å¤åˆ¶çš„åœ°å€ï¼Œç‚¹å‡»Add Feedï¼Œå°±å®Œæˆäº†è®¢é˜…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»é¢„è§ˆåç‚¹å‡»è®¢é˜…ï¼Œå°±å®Œæˆäº†è®¢é˜…ã€‚\nè·å–è®¤è¯ä»£ç  åœ¨è®¢é˜…åˆ—è¡¨ä¸­å³å‡»ä½ çš„åšå®¢ï¼Œé€‰æ‹©è®¤è¯ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œé‡Œé¢æœ‰ä¸€æ®µä»£ç ï¼Œå¤åˆ¶è¿™æ®µä»£ç ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ·»åŠ è®¤è¯ä»£ç  éœ€è¦å°†ä¸Šé¢å¾—åˆ°çš„ä»£ç æ·»åŠ åˆ°åšå®¢çš„RSSè®¢é˜…é¡µé¢çš„descriptionæ ‡ç­¾ä¸­ï¼Œè¿™ä¸ªæ ‡ç­¾åœ¨themes/PaperMod/layouts/_default/rss.xmlä¸­ã€‚ä¸ºäº†ä¾¿äºä¿®æ”¹ï¼Œé€šå¸¸æˆ‘ä¼šå°†åšå®¢ä¸»é¢˜åŸç›®å½•ä¸­çš„themes/PaperMod/layouts/_default/rss.xmlå¤åˆ¶åˆ°æˆ‘çš„åšå®¢æ ¹ç›®å½•layouts/_default/rss.xmlï¼Œç„¶ååœ¨layouts/_default/rss.xmlä¸­ä¿®æ”¹descriptionæ ‡ç­¾ã€‚\n\u0026lt;description\u0026gt;feedId:57980998056508425+userId:73222296380546048 Recent content {{ if ne .Title site.Title }}{{ with .Title }}in {{ . }} {{ end }}{{ end }}on {{ site.Title }}\u0026lt;/description\u0026gt; ä»¥ä¸Šå°±æ˜¯æ·»åŠ å¥½çš„çŠ¶æ€ï¼Œä¿å­˜ä¿®æ”¹å¹¶æäº¤ï¼Œç„¶åé‡æ–°éƒ¨ç½²åšå®¢ã€‚\nå®Œæˆè®¤è¯ å›åˆ°Followï¼Œç‚¹å‡»è®¤è¯æŒ‰é’®ï¼Œå¦‚æœåšå®¢å·²ç»è¢«æ­£å¸¸éƒ¨ç½²ï¼Œé‚£ä¹ˆä¼šæ˜¾ç¤ºè®¤è¯æˆåŠŸã€‚ç‚¹å‡»å¤´åƒ-\u0026gt;æˆå°±ï¼Œå°±å¯ä»¥è·å–60Powerçš„å¥–åŠ±ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/papermod%E6%B7%BB%E5%8A%A0follow-rss%E8%AE%A4%E8%AF%81/","summary":"\u003cp\u003e\u003ca href=\"https://follow.is/\"\u003eFollow\u003c/a\u003eæ˜¯ä¸€ä¸ªå¼€æºRSSé˜…è¯»å™¨ï¼Œå¯ä»¥å‘å¸ƒè‡ªå·±çš„è®¢é˜…æºï¼Œæ¯”å¦‚å°†è‡ªå·±çš„åšå®¢RSSå‘å¸ƒåˆ°Followä¸Šï¼Œå…¶ä»–ç”¨æˆ·åœ¨Followä¸Šè®¢é˜…ä½ çš„åšå®¢æ—¶ï¼Œå°±å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä½ å‘å¸ƒçš„æºï¼Œå¹¶ä¸”å¯ä»¥ä¸ºæºçš„å‘å¸ƒè€…è¿›è¡Œæ‰“èµã€‚å½“ç„¶è‡ªå·±çš„å°åšå®¢ä¹Ÿä¸æŒ‡æœ›å…¶ä»–äººèƒ½è®¢é˜…ï¼Œåªæ˜¯æƒ³å®ŒæˆFollowçš„æˆå°±ä»»åŠ¡ï¼Œå®Œæˆè®¤è¯åå¯ä»¥è·å¾—Powerå€¼ï¼Œå¯ä»¥ç”¨æ¥æ‰“èµå…¶ä»–ç”¨æˆ·ï¼Œä»¥åŠè´­ä¹°å…¶ä»–æœåŠ¡ï¼Œæ¯”å¦‚è®¢é˜…ä»˜è´¹çš„åˆ—è¡¨ç­‰ã€‚\u003c/p\u003e\n\u003cp\u003ePaperModå·²ç»åµŒå…¥äº†RSSè®¢é˜…åŠŸèƒ½ï¼Œæ‰€ä»¥è®¤è¯ä¼šå¾ˆæ–¹ä¾¿ï¼Œæ‰€è°“è®¤è¯å°±æ˜¯åœ¨è‡ªå·±çš„ç½‘ç«™ä¸­åŠ å…¥ä¸€æ®µä»£ç ï¼ŒFollowä¼šæ£€æµ‹è¿™æ®µä»£ç ï¼Œå¦‚æœæ£€æµ‹åˆ°äº†ï¼Œå°±ä¼šè®¤ä¸ºè¿™ä¸ªç½‘ç«™æ˜¯ä½ å‘å¸ƒçš„æºï¼Œä»è€Œå®Œæˆè®¤è¯ã€‚\u003c/p\u003e","title":"PaperModæ·»åŠ Follow RSSè®¢é˜…è®¤è¯"},{"content":"NAS çš„ç³»ç»Ÿç£ç›˜ç©ºé—´å‘Šæ€¥äº†ï¼Œå½“åˆç”¨äº†ä¸€å¼ å°±ç¬”è®°æœ¬é—²ç½®çš„å›ºæ€ç¡¬ç›˜ï¼Œåªæœ‰ 128Gï¼Œå¿ƒæƒ³å…‰åšç³»ç»Ÿç›˜åº”è¯¥è¶³å¤Ÿäº†ï¼Œç»“æœè¿˜æ˜¯ç»ä¸ä½æŠ˜è…¾ï¼Œéœ€è¦æ¸…ç†ä¸€ä¸‹ç£ç›˜ç©ºé—´ã€‚æœ¬æ–‡è®°å½•äº†ä¸€äº›å¸¸ç”¨çš„æ¸…ç†ç£ç›˜ç©ºé—´çš„æ–¹æ³•ã€‚\næŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ df -h æ¸…ç†è½¯ä»¶åŒ… # æ¸…ç†æ—§ç‰ˆæœ¬ç¼“å­˜ apt-get autoclean # æ¸…ç†æ‰€æœ‰ç¼“å­˜ apt-get clean # ç§»é™¤å­¤ç«‹è½¯ä»¶ apt-get autoremove æ¸…ç†æ—¥å¿— # æŸ¥çœ‹ journal æ—¥å¿—å ç”¨çš„ç¡¬ç›˜ç©ºé—´ journalctl -x --disk-usage # æ¸…ç†æ—¥å¿—åˆ°åªå‰©ä¸‹ 10M journalctl --vacuum-size=10M # æ¸…ç†ä¸€å¤©å‰çš„æ—¥å¿— journalctl --vacuum-time=1d # æ°¸ä¹…é™åˆ¶ journal æ—¥å¿—çš„å¤§å°ï¼š [Journal] SystemMaxUse=10M # ç¡¬ç›˜ä¸­åªä¿ç•™æœ€è¿‘ 10M çš„æ—¥å¿— RuntimeMaxUse=10M # å†…å­˜ä¸­åªä¿ç•™æœ€è¿‘ 10M çš„æ—¥å¿— æ¸…ç† Docker # æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨ docker container prune # æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒ docker image prune # æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„å· docker volume prune # æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„ç½‘ç»œ docker network prune # æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒã€å®¹å™¨ã€ç½‘ç»œã€å·ï¼Œå¦‚æœä½ ä½¿ç”¨dockerçš„è¯ï¼Œè¿™ä¸€æ­¥ä¼šé‡Šæ”¾å¤§é‡çš„ç©ºé—´ docker system prune --volumes WARNING! This will remove: - all stopped containers - all networks not used by at least one container - all volumes not used by at least one container - all dangling images - all dangling build cache æ¸…ç† pip ç¼“å­˜ # æ¸…ç† pip ç¼“å­˜ pip cache purge rm -r ~/.cache/pip å¤§æ–‡ä»¶æŸ¥æ‰¾æ¸…ç† # æŸ¥æ‰¾å¤§äº 100M çš„æ–‡ä»¶ find / -type f -size +100M # åˆ é™¤å¤§äº 100M çš„æ–‡ä»¶ find / -type f -size +100M -delete ","permalink":"https://lifeislife.cn/posts/linux-%E6%B8%85%E7%90%86%E7%A3%81%E7%9B%98%E9%87%8A%E6%94%BE%E7%A9%BA%E9%97%B4/","summary":"\u003cp\u003eNAS çš„ç³»ç»Ÿç£ç›˜ç©ºé—´å‘Šæ€¥äº†ï¼Œå½“åˆç”¨äº†ä¸€å¼ å°±ç¬”è®°æœ¬é—²ç½®çš„å›ºæ€ç¡¬ç›˜ï¼Œåªæœ‰ 128Gï¼Œå¿ƒæƒ³å…‰åšç³»ç»Ÿç›˜åº”è¯¥è¶³å¤Ÿäº†ï¼Œç»“æœè¿˜æ˜¯ç»ä¸ä½æŠ˜è…¾ï¼Œéœ€è¦æ¸…ç†ä¸€ä¸‹ç£ç›˜ç©ºé—´ã€‚æœ¬æ–‡è®°å½•äº†ä¸€äº›å¸¸ç”¨çš„æ¸…ç†ç£ç›˜ç©ºé—´çš„æ–¹æ³•ã€‚\u003c/p\u003e","title":"Linux æ¸…ç†ç£ç›˜é‡Šæ”¾ç©ºé—´"},{"content":"åœ¨ä½¿ç”¨ systemd-journald è¿›è¡Œæ—¥å¿—ç®¡ç†æ—¶ï¼Œé‡åˆ°å†…æ ¸æ—¥å¿—è¾“å‡ºè¿‡å¿«å¯¼è‡´æ—¥å¿—ä¸¢å¤±çš„æƒ…å†µæ—¶ï¼Œä¸€èˆ¬æ˜¯ç”±äº journald çš„ç¼“å†²åŒºè®¾ç½®è¿‡å°ï¼Œæ— æ³•å¤„ç†å¿«é€Ÿè¾“å‡ºçš„å†…æ ¸æ¶ˆæ¯ã€‚æœ¬æ–‡å°†ä»‹ç»é—®é¢˜åŸå› ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚\né—®é¢˜æè¿° å½“å†…æ ¸æ—¥å¿—è¾“å‡ºè¿‡å¿«æ—¶ï¼Œsystemd-journald å¯èƒ½ä¼šå› å…¶å†…éƒ¨ç¼“å†²åŒºè®¾ç½®è¿‡å°è€Œæ— æ³•å¤„ç†æ‰€æœ‰æ—¥å¿—ï¼Œå¯¼è‡´éƒ¨åˆ†æ—¥å¿—ä¿¡æ¯ä¸¢å¤±ã€‚è¡¨ç°ä¸ºç³»ç»Ÿæ—¥å¿—ä¸­å‡ºç°ç±»ä¼¼ä»¥ä¸‹çš„é”™è¯¯ï¼š\nMissed xxx kernel messages è¿™ç§æƒ…å†µé€šå¸¸å‡ºç°åœ¨å†…æ ¸å¤§é‡è¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€ç³»ç»Ÿåˆå§‹åŒ–é˜¶æ®µæ—¥å¿—é¢‘ç¹è¾“å‡ºï¼Œæˆ–ç³»ç»Ÿå‘ç”Ÿè¾ƒå¤§æ•…éšœæ—¶ã€‚\nåŸå› åˆ†æ systemd-journald æ˜¯ä¸€ä¸ªå¤„ç†ç³»ç»Ÿæ—¥å¿—çš„æœåŠ¡ï¼ŒåŒ…æ‹¬å†…æ ¸æ—¥å¿—ã€‚å®ƒé€šè¿‡ç›‘å¬ /dev/kmsg è·å–å†…æ ¸æ—¥å¿—ä¿¡æ¯ã€‚journald ä½¿ç”¨ä¸€ä¸ªå†…éƒ¨ç¼“å†²åŒºæ¥æš‚å­˜æ—¥å¿—ï¼Œå¦‚æœæ—¥å¿—æµé€Ÿè¿‡å¿«è€Œ journald æ— æ³•åŠæ—¶å¤„ç†ï¼Œè¿™ä¸ªç¼“å†²åŒºä¼šè¢«å¡«æ»¡ï¼Œå¯¼è‡´æ¶ˆæ¯æº¢å‡ºæˆ–ä¸¢å¤±ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œjournald çš„æ—¥å¿—ç¼“å†²åŒºå¤§å°è¾ƒå°ï¼Œå¯èƒ½æ— æ³•åº”å¯¹é«˜é¢‘ç‡çš„æ—¥å¿—è¾“å‡ºã€‚æ­¤å¤–ï¼Œjournald è¿˜å¯èƒ½å—é™äºæŸäº›ç³»ç»Ÿèµ„æºçš„é…ç½®ï¼Œå¦‚æœ€å¤§æ¶ˆæ¯å¤§å°ã€æ—¥å¿—æ–‡ä»¶å¤§å°ç­‰ã€‚\nè§£å†³æ–¹æ¡ˆ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤æ¥ç¼“è§£æˆ–è§£å†³å†…æ ¸æ—¥å¿—ä¸¢å¤±é—®é¢˜ï¼š\n1. å¢åŠ  systemd-journald ç¼“å­˜å¤§å° é€šè¿‡è°ƒæ•´ systemd-journald çš„é…ç½®æ¥å¢å¤§å…¶ç¼“å†²åŒºï¼Œå¯ä»¥å‡å°‘æ—¥å¿—ä¸¢å¤±çš„æƒ…å†µã€‚\nç¼–è¾‘ journald çš„é…ç½®æ–‡ä»¶ï¼š\nsudo vim /etc/systemd/journald.conf æ‰¾åˆ°ä»¥ä¸‹å‚æ•°å¹¶è¿›è¡Œè°ƒæ•´ï¼š\n# RuntimeMaxUse: è®¾ç½®è¿è¡Œæ—¶æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§ä½¿ç”¨ç©ºé—´ã€‚ # å¯ä»¥å°†æ­¤å€¼è®¾ä¸ºè¾ƒå¤§çš„å€¼ï¼Œä¾‹å¦‚ 100Mã€‚ RuntimeMaxUse=100M # SystemMaxUse: è®¾ç½®ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§ä½¿ç”¨ç©ºé—´ã€‚ # å¯ä»¥å°†æ­¤å€¼è®¾ä¸º 500Mã€‚ SystemMaxUse=500M # RateLimitInterval: é™åˆ¶æ—¥å¿—æ¥æ”¶é€Ÿç‡çš„æ—¶é—´é—´éš”ã€‚ # å¯ä»¥é€‚å½“å»¶é•¿æ­¤æ—¶é—´ï¼Œä¾‹å¦‚ 10sã€‚ RateLimitInterval=10s # RateLimitBurst: é™åˆ¶æ—¥å¿—æ¥æ”¶é€Ÿç‡çš„æœ€å¤§çªå‘æ•°ã€‚ # å¢åŠ çªå‘é™åˆ¶ï¼Œæ¯”å¦‚ 10000ã€‚ RateLimitBurst=10000 ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ï¼Œç„¶åé‡å¯ journald æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆï¼š\nsudo systemctl restart systemd-journald 2. è°ƒæ•´å†…æ ¸æ—¥å¿—ç¯å½¢ç¼“å†²åŒºçš„å¤§å° å†…æ ¸æ—¥å¿—å­˜å‚¨åœ¨ä¸€ä¸ªç¯å½¢ç¼“å†²åŒºä¸­ï¼Œè¯¥ç¼“å†²åŒºçš„å¤§å°å¯ä»¥é€šè¿‡ dmesg å‘½ä»¤æŸ¥çœ‹å’Œè°ƒæ•´ã€‚é»˜è®¤çš„ç¼“å†²åŒºå¯èƒ½è¾ƒå°ï¼Œå¯ä»¥é€šè¿‡ kernel å‘½ä»¤è¡Œå‚æ•° log_buf_len æ¥è°ƒæ•´ã€‚\nç¼–è¾‘ grub é…ç½®æ–‡ä»¶ï¼š\nsudo vim /etc/default/grub åœ¨ GRUB_CMDLINE_LINUX_DEFAULT è¡Œä¸­æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š\nGRUB_CMDLINE_LINUX_DEFAULT=\u0026#34;log_buf_len=16M\u0026#34; è¿™å°†å†…æ ¸æ—¥å¿—ç¼“å†²åŒºè®¾ç½®ä¸º 16Mã€‚ä¿å­˜å¹¶æ›´æ–° grubï¼š\nsudo update-grub ç„¶åé‡å¯ç³»ç»Ÿä»¥åº”ç”¨æ›´æ”¹ï¼š\nsudo reboot 3. ç¦ç”¨æ—¥å¿—é€Ÿç‡é™åˆ¶ å¦‚æœæ—¥å¿—é€Ÿç‡é™åˆ¶ä¸ç¬¦åˆå½“å‰ç³»ç»Ÿéœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ç¦ç”¨é€Ÿç‡é™åˆ¶ï¼Œå°¤å…¶æ˜¯åœ¨å¼€å‘å’Œè°ƒè¯•ç¯å¢ƒä¸­ï¼š\nsudo vim /etc/systemd/journald.conf åœ¨é…ç½®æ–‡ä»¶ä¸­ç¦ç”¨æ—¥å¿—é€Ÿç‡é™åˆ¶ï¼š\nRateLimitInterval=0 RateLimitBurst=0 ä¿å­˜æ–‡ä»¶å¹¶é‡å¯ systemd-journald æœåŠ¡ï¼š\nsudo systemctl restart systemd-journald ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3missed--kernel-messages/","summary":"\u003cp\u003eåœ¨ä½¿ç”¨ \u003ccode\u003esystemd-journald\u003c/code\u003e è¿›è¡Œæ—¥å¿—ç®¡ç†æ—¶ï¼Œé‡åˆ°å†…æ ¸æ—¥å¿—è¾“å‡ºè¿‡å¿«å¯¼è‡´æ—¥å¿—ä¸¢å¤±çš„æƒ…å†µæ—¶ï¼Œä¸€èˆ¬æ˜¯ç”±äº \u003ccode\u003ejournald\u003c/code\u003e çš„ç¼“å†²åŒºè®¾ç½®è¿‡å°ï¼Œæ— æ³•å¤„ç†å¿«é€Ÿè¾“å‡ºçš„å†…æ ¸æ¶ˆæ¯ã€‚æœ¬æ–‡å°†ä»‹ç»é—®é¢˜åŸå› ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚\u003c/p\u003e","title":"è§£å†³systemd-journaldæŸ¥çœ‹æ—¥å¿—å‡ºç°Missed  kernel messages"},{"content":" æœ¬æ–‡ç¿»è¯‘è‡ªï¼šPCIe ç¬¬ 2 éƒ¨åˆ† - å…³äºå†…å­˜ï¼šMMIOã€DMAã€TLP ç­‰ï¼â€“ çµé­‚çš„é€†å‘å·¥ç¨‹ \u0026mdash; PCIe Part 2 - All About Memory: MMIO, DMA, TLPs, and more! â€“ Reversing Engineering for the Soul\nåœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº† ECAM ä»¥åŠè½¯ä»¶å’Œç¡¬ä»¶æ•°æ®åŒ…ç½‘ç»œä¸­çš„é…ç½®ç©ºé—´è®¿é—®ã€‚åœ¨è®¨è®ºä¸­ï¼Œå¼•å…¥äº† TLPï¼ˆTransaction Layer Packetsï¼‰çš„æ¦‚å¿µï¼Œè¿™æ˜¯æ‰€æœ‰ PCIe æ•°æ®åœ¨å±‚æ¬¡ç»“æ„ä¸­ç§»åŠ¨çš„é€šç”¨æ•°æ®åŒ…ç»“æ„ã€‚æˆ‘ä»¬è¿˜è®¨è®ºäº†è¿™äº›æ•°æ®åŒ…å¦‚ä½•åƒä»¥å¤ªç½‘ä¸€æ ·ä¼ è¾“ï¼Œå³è·¯ç”±è®¾å¤‡ä½¿ç”¨ä¸€ä¸ªåœ°å€ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯ BDFï¼‰æ¥å‘é€é…ç½®ç©ºé—´æ•°æ®åŒ…ç©¿è¿‡ç½‘ç»œã€‚\né…ç½®ç©ºé—´è¯»å–å’Œå†™å…¥åªæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨è®¾å¤‡æ‰§è¡Œ I/O çš„å‡ ç§æ–¹å¼ä¹‹ä¸€ã€‚é€šè¿‡â€œconfigurationâ€è¿™ä¸ªåç§°ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“å¾ˆæ˜æ˜¾å®ƒçš„æ„å›¾ä¸æ˜¯ä¸ºäº†æ‰§è¡Œå¤§é‡æ•°æ®ä¼ è¾“ã€‚ä¸»è¦ç¼ºç‚¹æ˜¯å®ƒçš„é€Ÿåº¦ï¼Œå› ä¸ºé…ç½®ç©ºé—´æ•°æ®åŒ…æœ€å¤šåªèƒ½åŒ…å«åŒå‘è¯»å–æˆ–å†™å…¥çš„ 64 ä½æ•°æ®ï¼ˆé€šå¸¸åªæœ‰ 32 ä½ï¼‰ã€‚å¯¹äºå¦‚æ­¤å°‘é‡çš„å¯ç”¨æ•°æ®ï¼Œæ•°æ®åŒ…å’Œå…¶ä»–é“¾è·¯æ ‡å¤´çš„å¼€é”€éå¸¸å¤§ï¼Œå› æ­¤æµªè´¹äº†å¸¦å®½ã€‚\næ­£å¦‚ç¬¬ 1 éƒ¨åˆ†æ‰€è®¨è®ºçš„ï¼Œç†è§£å†…å­˜å’Œåœ°å€å°†ç»§ç»­æ˜¯ç†è§£ PCIe çš„å…³é”®ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ›´æ·±å…¥åœ°ç ”ç©¶æ›´å¿«çš„è®¾å¤‡ I/O äº‹åŠ¡å½¢å¼ï¼Œå¹¶å¼€å§‹äº†è§£è½¯ä»¶è®¾å¤‡é©±åŠ¨ç¨‹åºå¦‚ä½•å®é™…ä¸ PCIe è®¾å¤‡è¿æ¥ä»¥å®Œæˆæœ‰ç”¨çš„å·¥ä½œã€‚\næ³¨æ„ï¼šæ‚¨æ— éœ€æˆä¸ºè®¡ç®—æœºä½“ç³»ç»“æ„æˆ– TCP/IP ç½‘ç»œæ–¹é¢çš„ä¸“å®¶å³å¯ä»è¿™ç¯‡æ–‡ç« ä¸­è·å¾—ä¸€äº›ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œäº†è§£ TCP/IP å’Œè™šæ‹Ÿå†…å­˜çš„åŸºç¡€çŸ¥è¯†å¯¹äºæŒæ¡æœ¬æ–‡çš„ä¸€äº›æ ¸å¿ƒæ¦‚å¿µæ˜¯å¿…è¦çš„ã€‚è¿™ç¯‡æ–‡ç« ä¹Ÿä»¥ ç¬¬ 1 éƒ¨åˆ† ä¸­çš„ä¿¡æ¯ä¸ºåŸºç¡€ã€‚å¦‚æœæ‚¨éœ€è¦æŸ¥çœ‹è¿™äº›å†…å®¹ï¼Œè¯·ç«‹å³æŸ¥çœ‹ï¼\nPCIe ä¸­çš„æ•°æ®ä¼ è¾“æ–¹æ³•ç®€ä»‹ é…ç½®ç©ºé—´æ˜¯ä¸€ç§åœ¨æšä¸¾æ—¶é—´å†…é€šè¿‡å…¶ BDF ä¸è®¾å¤‡é€šä¿¡çš„ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„æ–¹å¼ã€‚è¿™æ˜¯ä¸€ç§ç®€å•çš„ä¼ è¾“æ¨¡å¼æ˜¯æœ‰åŸå› çš„ - å®ƒå¿…é¡»æ˜¯é…ç½®å’Œå¯ç”¨çš„æ‰€æœ‰å…¶ä»–æ•°æ®ä¼ è¾“æ–¹æ³•çš„åŸºç¡€ã€‚æšä¸¾è®¾å¤‡åï¼Œé…ç½®ç©ºé—´å·²è®¾ç½®è®¾å¤‡ä¸ä¸»æœºä¸€èµ·æ‰§è¡Œå®é™…å·¥ä½œæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚é…ç½®ç©ºé—´ä»ç”¨äºå…è®¸ä¸»æœºç›‘æ§å’Œå“åº”è®¾å¤‡åŠå…¶é“¾æ¥çŠ¶æ€çš„å˜åŒ–ï¼Œä½†å®ƒä¸ä¼šç”¨äºæ‰§è¡Œè®¾å¤‡çš„å®é™…é«˜é€Ÿä¼ è¾“æˆ–åŠŸèƒ½ã€‚\né…ç½®ç©ºé—´æ˜¯åœ¨æšä¸¾æ—¶é—´é€šè¿‡è®¾å¤‡çš„ BDF è¿›è¡Œé€šä¿¡çš„ä¸€ç§ç®€å•æœ‰æ•ˆçš„æ–¹å¼ã€‚å®ƒæ˜¯ä¸€ç§ç®€å•çš„ä¼ è¾“æ¨¡å¼ï¼Œæ˜¯æ‰€æœ‰æ•°æ®ä¼ è¾“æ–¹æ³•çš„åŸºç¡€ã€‚ä¸€æ—¦è®¾å¤‡è¢«æšä¸¾ï¼Œé…ç½®ç©ºé—´å°±å·²ç»è®¾ç½®äº†è®¾å¤‡æ‰§è¡Œå®é™…å·¥ä½œæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼Œä¸ä¸»æœºæœºå™¨ä¸€èµ·ã€‚é…ç½®ç©ºé—´ä»ç”¨äºå…è®¸ä¸»æœºè®¡ç®—æœºç›‘è§†å’Œå“åº”è®¾å¤‡åŠå…¶é“¾æ¥çš„å˜åŒ–ï¼Œä½†ä¸ä¼šç”¨äºæ‰§è¡Œè®¾å¤‡çš„å®é™…é«˜é€Ÿä¼ è¾“æˆ–åŠŸèƒ½ã€‚\næˆ‘ä»¬ç°åœ¨éœ€è¦çš„æ˜¯æ•°æ®ä¼ è¾“æ–¹æ³•ï¼Œè®©æˆ‘ä»¬çœŸæ­£å¼€å§‹åˆ©ç”¨ PCIe è®¾è®¡çš„é«˜é€Ÿä¼ è¾“ååé‡ã€‚ååé‡æ˜¯å¯¹ç»™å®šæ—¶é—´æ®µå†…ä¼ è¾“çš„å­—èŠ‚æ•°çš„åº¦é‡ã€‚è¿™æ„å‘³ç€ä¸ºäº†æœ€å¤§é™åº¦åœ°æé«˜ååé‡ï¼Œæˆ‘ä»¬å¿…é¡»æœ€å°åŒ–æ¯ä¸ªæ•°æ®åŒ…çš„å¼€é”€ï¼Œä»¥ä¼ è¾“æ¯ä¸ªæ•°æ®åŒ…çš„æœ€å¤§å­—èŠ‚æ•°ã€‚å¦‚æœæˆ‘ä»¬æ¯ä¸ªæ•°æ®åŒ…åªå‘é€å‡ ä¸ª DWORDï¼ˆæ¯ä¸ª 4 å­—èŠ‚ï¼‰ï¼Œå°±åƒåœ¨é…ç½®ç©ºé—´çš„æƒ…å†µä¸‹ä¸€æ ·ï¼ŒPCIe é«˜é€Ÿä¼ è¾“èƒ½åŠ›å°±æµªè´¹äº†ã€‚\nåºŸè¯ä¸å¤šè¯´ï¼Œå…ˆä»‹ç»ä¸€ä¸‹ PCIe ä¸­é«˜é€Ÿ I/O çš„ä¸¤ç§ä¸»è¦å½¢å¼ï¼š\nå†…å­˜æ˜ å°„è¾“å…¥/è¾“å‡ºï¼ˆç®€ç§° MMIOï¼‰- ä¸ä¸»æœº CPU è¯»å–å’Œå†™å…¥å†…å­˜åˆ° ECAM ä»¥æ‰§è¡Œé…ç½®ç©ºé—´è®¿é—®ç±»ä¼¼ï¼ŒMMIO å¯ä»¥ç”¨æ¥æ˜ å°„è®¾å¤‡çš„åœ°å€ç©ºé—´ï¼Œä»¥æ‰§è¡Œå†…å­˜ä¼ è¾“ã€‚ä¸»æœºæœºå™¨åœ¨å…¶ç‰©ç†åœ°å€ç©ºé—´ä¸­é…ç½®â€œå†…å­˜çª—å£â€ï¼Œä½¿ CPU æ‹¥æœ‰ä¸€ä¸ªå†…å­˜åœ°å€çª—å£ï¼Œè¿™äº›å†…å­˜åœ°å€ç¥å¥‡åœ°è½¬æ¢ä¸ºç›´æ¥è¯»å–å’Œå†™å…¥è®¾å¤‡ã€‚å†…å­˜çª—å£åœ¨ RC ä¸­è§£ç ï¼Œå°† CPU çš„è¯»å–å’Œå†™å…¥è½¬æ¢ä¸ºä¼ è¾“åˆ°è®¾å¤‡çš„æ•°æ® TLPsã€‚ç¡¬ä»¶ä¼˜åŒ–ä½¿å¾—è¿™ç§æ–¹æ³•å¯ä»¥å®ç°æ¯”é…ç½®ç©ºé—´è®¿é—®å¿«å¾—å¤šçš„ååé‡ã€‚ç„¶è€Œï¼Œå…¶é€Ÿåº¦ä»ç„¶è¿œè¿œè½åäº DMA çš„æ‰¹é‡ä¼ è¾“é€Ÿåº¦ã€‚ ç›´æ¥å†…å­˜è®¿é—®ï¼ˆç®€ç§° DMAï¼‰- DMA æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¸¸è§çš„æ•°æ®ä¼ è¾“å½¢å¼ï¼Œå› ä¸ºå®ƒå…·æœ‰åŸå§‹ä¼ è¾“é€Ÿåº¦å’Œä½å»¶è¿Ÿã€‚æ¯å½“é©±åŠ¨ç¨‹åºéœ€è¦åœ¨ä¸»æœºå’Œè®¾å¤‡ä¹‹é—´æ²¿ä»»ä¸€æ–¹å‘è¿›è¡Œä»»ä½•é‡è¦å¤§å°çš„ä¼ è¾“æ—¶ï¼Œå®ƒè‚¯å®šä¼šæ˜¯ DMAã€‚ä½†ä¸ MMIO ä¸åŒçš„æ˜¯ï¼ŒDMA æ˜¯ç”±è®¾å¤‡æœ¬èº«å¯åŠ¨çš„ï¼Œè€Œä¸æ˜¯ç”±ä¸»æœº CPU å¯åŠ¨çš„ã€‚ä¸»æœº CPU å°†é€šè¿‡ MMIO å‘Šè¯‰è®¾å¤‡ DMA åº”è¯¥å»å“ªé‡Œï¼Œè®¾å¤‡æœ¬èº«è´Ÿè´£å¼€å§‹å’Œå®Œæˆ DMA ä¼ è¾“ã€‚è¿™å…è®¸è®¾å¤‡åœ¨æ²¡æœ‰ CPU å‚ä¸çš„æƒ…å†µä¸‹æ‰§è¡Œ DMA äº‹åŠ¡ï¼Œä¸è®¾å¤‡å¿…é¡»ç­‰å¾…ä¸»æœº CPU å‘Šè¯‰å®ƒæ¯æ¬¡ä¼ è¾“åšä»€ä¹ˆç›¸æ¯”ï¼Œè¿™èŠ‚çœäº†å¤§é‡çš„ CPU å‘¨æœŸã€‚ç”±äº DMA çš„æ™®éæ€§å’Œé‡è¦æ€§ï¼Œä»ç¡¬ä»¶å®ç°å’Œè½¯ä»¶å±‚é¢äº†è§£ DMA éå¸¸æœ‰ä»·å€¼ã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image MMIO ç®€ä»‹ ä»€ä¹ˆæ˜¯ BARï¼Ÿ ç”±äºé…ç½®ç©ºé—´é™åˆ¶ä¸º 4096 å­—èŠ‚ï¼Œå› æ­¤ä¹‹åæ²¡æœ‰å¤ªå¤šå¯ç”¨ç©ºé—´ç”¨äºç‰¹å®šäºè®¾å¤‡çš„åŠŸèƒ½ã€‚å¦‚æœè®¾å¤‡æƒ³è¦æ˜ å°„ 1GB çš„ MMIO ç©ºé—´æ¥è®¿é—®å…¶å†…éƒ¨ RAMï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿæ²¡æœ‰åŠæ³•å°†å…¶æ”¾å…¥ 4096 å­—èŠ‚çš„é…ç½®ç©ºé—´ã€‚å› æ­¤ï¼Œå®ƒå°†éœ€è¦è¯·æ±‚ä¸€ä¸ªè¢«ç§°ä¸º BARï¼ˆåŸºåœ°å€å¯„å­˜å™¨ï¼‰çš„ä¸œè¥¿ã€‚è¿™æ˜¯é€šè¿‡é…ç½®ç©ºé—´å…¬å¼€çš„ä¸€ä¸ªå¯„å­˜å™¨ï¼Œå…è®¸ä¸»æœºæœºå™¨é…ç½®å…¶å†…å­˜çš„ä¸€ä¸ªåŒºåŸŸï¼Œç›´æ¥æ˜ å°„åˆ°è®¾å¤‡ä¸Šã€‚ç„¶åä¸»æœºæœºå™¨ä¸Šçš„è½¯ä»¶é€šè¿‡å¯¹ BAR çš„ç‰©ç†åœ°å€çš„å†…å­˜è¯»/å†™æŒ‡ä»¤æ¥è®¿é—® BARï¼Œå°±åƒæˆ‘ä»¬åœ¨ ECAM çš„ç¬¬ä¸€éƒ¨åˆ†ä¸­çœ‹åˆ°çš„ MMIO ä¸€æ ·ã€‚å¯¹è®¾å¤‡å†…å­˜æ˜ å°„è¿›è¡Œè¯»å–æˆ–å†™å…¥çš„æ“ä½œå°†ç›´æ¥è½¬æ¢ä¸ºå‘é€åˆ°å±‚æ¬¡ç»“æ„ä¸Šçš„è®¾å¤‡çš„æ•°æ®åŒ…ã€‚å½“è®¾å¤‡éœ€è¦å“åº”æ—¶ï¼Œå®ƒå°†é€šè¿‡å±‚æ¬¡ç»“æ„å‘ä¸»æœºæœºå™¨å‘é€ä¸€ä¸ªæ–°çš„æ•°æ®åŒ…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å½“ CPU æŒ‡ä»¤è¯»å–å™¨ä»¶ MMIO åŒºåŸŸçš„å†…å­˜æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªå†…å­˜è¯»å–è¯·æ±‚äº‹åŠ¡å±‚æ•°æ®åŒ…ï¼ˆMemRd TLPï¼‰ï¼Œè¯¥æ•°æ®åŒ…ä»ä¸»æœºçš„ RC å‘ä¸‹ä¼ è¾“åˆ°å™¨ä»¶ã€‚è¿™ä¸ª TLP åŒ…çš„ç›®çš„æ˜¯é€šçŸ¥è®¾å¤‡å¸Œæœ›è¯»å–è®¾å¤‡ï¼Œç„¶åè®¾å¤‡éœ€è¦å°½å¿«å“åº”è¯·æ±‚åœ°å€ä¸Šçš„å†…å®¹ã€‚\nåœ¨ PCIe ä¸­å‘é€å’Œæ¥æ”¶çš„æ‰€æœ‰æ•°æ®ä¼ è¾“æ•°æ®åŒ…éƒ½å°†é‡‡ç”¨ TLP å½¢å¼ã€‚å›æƒ³ä¸€ä¸‹ç¬¬ 1 éƒ¨åˆ†ï¼Œè¿™äº›æ•°æ®åŒ…æ˜¯è®¾å¤‡ä¹‹é—´çš„æ‰€æœ‰é€šä¿¡éƒ½åœ¨ PCIe ä¸­å‘ç”Ÿçš„ä¸­å¿ƒæŠ½è±¡ã€‚è¿™äº›æ•°æ®åŒ…åœ¨å‡ºç°æ•°æ®ä¼ è¾“é”™è¯¯ï¼ˆç±»ä¼¼äºç½‘ç»œä¸­çš„ TCPï¼‰çš„æƒ…å†µä¸‹æ˜¯å¯é çš„ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦é‡è¯•/é‡æ–°å‘é€ã€‚è¿™ç¡®ä¿äº†æ•°æ®ä¼ è¾“å…å— PCIe å¯ä»¥è¾¾åˆ°çš„æé«˜é€Ÿåº¦ä¸‹å‘ç”Ÿçš„æ¶åŠ£ç”µæ°”å¹²æ‰°ã€‚æˆ‘ä»¬å¾ˆå¿«å°±ä¼šä»”ç»†ç ”ç©¶ TLP çš„ç»“æ„ï¼Œä½†ç°åœ¨åªéœ€å°†è¿™äº›è§†ä¸ºæ‚¨åœ¨ TCP ä¸­çœ‹åˆ°çš„å¸¸è§„ç½‘ç»œæ•°æ®åŒ…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å½“è®¾å¤‡æ”¶åˆ°è¯·æ±‚è€…æ•°æ®åŒ…æ—¶ï¼Œè®¾å¤‡ä¼šä½¿ç”¨ MemRd TLP å“åº”å†…å­˜è¯·æ±‚ã€‚æ­¤ TLP åŒ…å«ä»è®¾å¤‡å†…å­˜ç©ºé—´è¯»å–çš„ç»“æœï¼Œç»™å®šåŸå§‹è¯·æ±‚è€…æ•°æ®åŒ…ä¸­çš„åœ°å€å’Œå¤§å°ã€‚è®¾å¤‡å°†å®ƒæ­£åœ¨å“åº”çš„ç‰¹å®šè¯·æ±‚æ•°æ®åŒ…å’Œå‘é€æ–¹æ ‡è®°åˆ°å“åº”æ•°æ®åŒ…ä¸­ï¼Œäº¤æ¢å±‚æ¬¡ç»“æ„çŸ¥é“å¦‚ä½•å°†å“åº”æ•°æ®åŒ…è¿”å›ç»™è¯·æ±‚è€…ã€‚ç„¶åï¼Œè¯·æ±‚è€…å°†ä½¿ç”¨æ•°æ®åŒ…ä¸­çš„æ•°æ®æ¥æ›´æ–°å‘èµ·è¯·æ±‚çš„ CPU å¯„å­˜å™¨ã€‚\nåŒæ—¶ï¼Œå½“ TLP æ­£åœ¨ä¼ è¾“æ—¶ï¼ŒCPU å¿…é¡»ç­‰å¾…å†…å­˜è¯·æ±‚å®Œæˆï¼Œå¹¶ä¸”å®ƒä¸èƒ½è¢«ä¸­æ–­æˆ–æ‰§è¡Œè®¸å¤šæœ‰ç”¨çš„å·¥ä½œã€‚æ­£å¦‚ä½ å¯èƒ½çœ‹åˆ°çš„ï¼Œå¦‚æœéœ€è¦æ‰§è¡Œå¤§é‡è¿™æ ·çš„è¯·æ±‚ï¼ŒCPU å°†éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´ç­‰å¾…è®¾å¤‡å“åº”æ¯ä¸ªè¯·æ±‚ã€‚è™½ç„¶åœ¨ç¡¬ä»¶çº§åˆ«è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½¿æ­¤è¿‡ç¨‹æ›´åŠ ç®€åŒ–ï¼Œä½†ä½¿ç”¨ CPU å‘¨æœŸç­‰å¾…æ•°æ®ä¼ è¾“å®Œæˆä»ç„¶ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚å¸Œæœ›æ‚¨èƒ½çœ‹åˆ°æˆ‘ä»¬éœ€è¦ç¬¬äºŒç§ç±»å‹çš„ä¼ è¾“ï¼Œå³ DMAï¼Œæ¥è§£å†³ BAR è®¿é—®çš„è¿™äº›ç¼ºç‚¹ã€‚\nè¿™é‡Œçš„å¦ä¸€ä¸ªé‡ç‚¹æ˜¯ï¼Œè®¾å¤‡å†…å­˜å¹¶ä¸ä¸¥æ ¼éœ€è¦ç”¨äºè®¾å¤‡çš„ RAMã€‚è™½ç„¶é€šå¸¸ä¼šçœ‹åˆ°å…·æœ‰æ¿è½½ RAM çš„è®¾å¤‡é€šè¿‡ BAR å…¬å¼€å…¶å†…éƒ¨ RAM çš„æ˜ å°„ï¼Œä½†è¿™ä¸æ˜¯å¿…éœ€çš„ã€‚ä¾‹å¦‚ï¼Œè®¿é—®è®¾å¤‡çš„ BAR å¯èƒ½ä¼šè®¿é—®è®¾å¤‡çš„å†…éƒ¨å¯„å­˜å™¨ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´è®¾å¤‡æ‰§è¡ŒæŸäº›æ“ä½œã€‚ä¾‹å¦‚ï¼Œå†™å…¥ BAR æ˜¯è®¾å¤‡å¼€å§‹æ‰§è¡Œ DMA çš„ä¸»è¦æ–¹å¼ã€‚ä¸€ä¸ªæ ¸å¿ƒè¦ç‚¹æ˜¯ï¼Œè®¾å¤‡ BAR éå¸¸çµæ´»ï¼Œå¯ç”¨äºæ§åˆ¶è®¾å¤‡æˆ–æ‰§è¡Œä¸è®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚\nå¦‚ä½•æšä¸¾ BARï¼Ÿ è®¾å¤‡ä½¿ç”¨å…¶é…ç½®ç©ºé—´ä»è½¯ä»¶è¯·æ±‚å†…å­˜åŒºåŸŸã€‚åœ¨æšä¸¾æ—¶ï¼Œç”±ä¸»æœºç¡®å®šè¯¥åŒºåŸŸå°†æ”¾ç½®åœ¨ç‰©ç†å†…å­˜ä¸­çš„ä½ç½®ã€‚æ¯ä¸ªå™¨ä»¶åœ¨å…¶é…ç½®ç©ºé—´ï¼ˆç§°ä¸ºâ€œå¯„å­˜å™¨â€ï¼Œå› æ­¤ç§°ä¸ºåŸºå€å¯„å­˜å™¨ï¼‰ä¸­éƒ½æœ‰ 6 ä¸ª 32 ä½å€¼ï¼Œå½“æšä¸¾å™¨ä»¶æ—¶ï¼Œè½¯ä»¶å°†è¯»å–å’Œå†™å…¥è¿™äº›å€¼ã€‚è¿™äº›å¯„å­˜å™¨æè¿°äº†å™¨ä»¶å¸Œæœ›åˆ†é…çš„æ¯ä¸ª MMIO åŒºåŸŸçš„é•¿åº¦å’Œå¯¹é½è¦æ±‚ï¼Œæ¯ä¸ªå¯èƒ½çš„ BAR ä¸€ä¸ªï¼Œæ€»å…± 6 ä¸ªä¸åŒçš„åŒºåŸŸã€‚å¦‚æœè®¾å¤‡å¸Œæœ›èƒ½å¤Ÿå°†å…¶ BAR æ˜ å°„åˆ° 4GB ç©ºé—´ï¼ˆ64 ä½ BARï¼‰ä»¥ä¸Šï¼Œå®ƒå¯ä»¥å°†ä¸¤ä¸ª 32 ä½å¯„å­˜å™¨ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ª 64 ä½ BARï¼Œæœ€å¤šåªç•™ä¸‹ä¸‰ä¸ª 64 ä½ BARã€‚\nPCIe\n\u003c!DOCTYPE html\u003e Responsive Image æœ¯è¯­æ³¨é‡Šï¼šå°½ç®¡é¦–å­—æ¯ç¼©ç•¥è¯ BAR è¡¨ç¤ºåŸºå€å¯„å­˜å™¨ï¼Œä½†ä½ ä¼šçœ‹åˆ°ä¸Šé¢çš„æ–‡æœ¬ä¹Ÿå°† MMIO çš„å†…å­˜çª—å£ç§°ä¸º BARã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€é…ç½®ç©ºé—´ä¸­çš„å¯„å­˜å™¨åç§°ä¹Ÿä¸ç»™ device çš„ MMIO åŒºåŸŸç›¸åŒï¼ˆä¸¤è€…éƒ½ç§°ä¸º BARï¼‰ã€‚ä½ å¯èƒ½éœ€è¦æ ¹æ®ä¸Šä¸‹æ–‡ï¼Œä»¥ç¡®å®šå®ƒä»¬æ˜¯æŒ‡å†…å­˜çª—å£ï¼Œè¿˜æ˜¯é…ç½®ç©ºé—´æœ¬èº«çš„å®é™…å¯„å­˜å™¨ã€‚\nBARs æ˜¯é…ç½®ç©ºé—´ä¸­å¦ä¸€ä¸ªç¤ºä¾‹ï¼Œå®ƒä¸æ˜¯å¸¸é‡å¯„å­˜å™¨ã€‚åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬çœ‹äº†ä¸€äº›å¸¸é‡å¯„å­˜å™¨ï¼Œæ¯”å¦‚ VendorID å’Œ DeviceIDã€‚ä½†æ˜¯ BARs ä¸æ˜¯å¸¸é‡å¯„å­˜å™¨ï¼Œå®ƒä»¬åº”è¯¥ç”±è½¯ä»¶å†™å…¥å’Œè¯»å–ã€‚å®é™…ä¸Šï¼Œç”±è½¯ä»¶å†™å…¥å¯„å­˜å™¨çš„å€¼æ˜¯ç‰¹æ®Šçš„ï¼Œå› ä¸ºå°†æŸäº›ç±»å‹çš„å€¼å†™å…¥å¯„å­˜å™¨å°†å¯¼è‡´è¯»å–æ—¶åŠŸèƒ½ä¸åŒã€‚å¦‚æœä½ æ²¡æœ‰ç‰¢è®°è®¾å¤‡å†…å­˜å¹¶éæ€»æ˜¯ RAMï¼Œè¯»å–å›æ¥çš„å€¼å¯èƒ½ä¸å†™å…¥çš„ä¸åŒï¼Œé‚£ä¹ˆç°åœ¨æ­£æ˜¯æ—¶å€™è¿™ä¹ˆåšäº†ã€‚\nè®¾å¤‡å†…å­˜å¯ä»¥æ˜¯ RAMï¼Œä½†å®ƒå¹¶ä¸æ€»æ˜¯ RAMï¼Œä¹Ÿä¸éœ€è¦åƒ RAM é‚£æ ·å·¥ä½œï¼\nä»€ä¹ˆæ˜¯ DMAï¼Ÿå¼•è¨€å’Œç†è®º åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ä¸¤ç§å½¢å¼çš„ I/Oï¼Œé…ç½®ç©ºé—´è®¿é—®å’Œé€šè¿‡ BAR çš„ MMIO è®¿é—®ã€‚æˆ‘ä»¬å°†è®¨è®ºçš„æœ€åä¸€ç§ä¹Ÿæ˜¯æœ€åä¸€ç§è®¿é—®å½¢å¼æ˜¯ç›´æ¥å†…å­˜è®¿é—®ï¼ˆDMAï¼‰ã€‚DMA æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¿«çš„ PCIe æ‰¹é‡ä¼ è¾“æ–¹æ³•ï¼Œå› ä¸ºå®ƒçš„ä¼ è¾“å¼€é”€æœ€å°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡é“¾è·¯ä¼ è¾“æœ€å¤§å­—èŠ‚æ•°æ‰€éœ€çš„èµ„æºæœ€å°‘ã€‚è¿™ä½¿å¾— DMA å¯¹äºçœŸæ­£åˆ©ç”¨ PCIe æä¾›çš„é«˜é€Ÿé“¾è·¯è‡³å…³é‡è¦ã€‚\nä½†æ˜¯ï¼Œå¼ºå¤§çš„åŠ›é‡ä¼šå¸¦æ¥å·¨å¤§çš„æ··ä¹±ã€‚å¯¹äºè½¯ä»¶å¼€å‘äººå‘˜æ¥è¯´ï¼ŒDMA æ˜¯ä¸€ä¸ªéå¸¸é™Œç”Ÿçš„æ¦‚å¿µï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è½¯ä»¶ä¸­æ²¡æœ‰ç±»ä¼¼çš„ä¸œè¥¿å¯ä»¥æ¯”è¾ƒã€‚å¯¹äº MMIOï¼Œæˆ‘ä»¬å¯ä»¥å°†å†…å­˜è®¿é—®æ¦‚å¿µåŒ–ä¸ºä»è®¾å¤‡å†…å­˜ä¸­è¯»å–å’Œå†™å…¥çš„æŒ‡ä»¤ã€‚ä½† DMA ä¸æ­¤éå¸¸ä¸åŒã€‚è¿™æ˜¯å› ä¸º DMA æ˜¯å¼‚æ­¥çš„ï¼Œå®ƒä¸åˆ©ç”¨ CPU æ¥æ‰§è¡Œä¼ è¾“ã€‚ç›¸åï¼Œé¡¾åæ€ä¹‰ï¼Œè¯»å–å’Œå†™å…¥çš„å†…å­˜ç›´æ¥æ¥è‡ªç³»ç»Ÿ RAMã€‚ä¸€æ—¦ DMA å¼€å§‹ï¼Œå”¯ä¸€æ¶‰åŠçš„å„æ–¹æ˜¯ç³»ç»Ÿä¸»å†…å­˜çš„å†…å­˜æ§åˆ¶å™¨å’Œè®¾å¤‡æœ¬èº«ã€‚å› æ­¤ï¼ŒCPU ä¸ä¼šèŠ±è´¹å‘¨æœŸç­‰å¾…å•ä¸ªå†…å­˜è®¿é—®ã€‚ç›¸åï¼Œå®ƒåªæ˜¯å¯åŠ¨è½¬ç§»ï¼Œå¹¶è®©å¹³å°åœ¨åå°è‡ªè¡Œå®Œæˆ DMAã€‚ç„¶åï¼Œå¹³å°å°†åœ¨ä¼ è¾“å®Œæˆæ—¶é€šçŸ¥ CPUï¼Œé€šå¸¸æ˜¯é€šè¿‡ä¸­æ–­ã€‚\nè®©æˆ‘ä»¬æƒ³ä¸€æƒ³ï¼Œä¸ºä»€ä¹ˆå¼‚æ­¥æ‰§è¡Œ DMA å¦‚æ­¤é‡è¦ã€‚è€ƒè™‘ CPU ä»è®¡ç®—æœºä¸Šçš„ NVMe SSD è§£å¯†å¤§é‡æ–‡ä»¶çš„æƒ…å†µã€‚ä¸€æ—¦ä¸»æœºä¸Šçš„ NVMe é©±åŠ¨ç¨‹åºå¯åŠ¨ DMAï¼Œè®¾å¤‡å°±ä¼šä¸æ–­ä»¥æœ€å¿«çš„é€Ÿåº¦å°†æ–‡ä»¶æ•°æ®ä» SSD çš„å†…éƒ¨å­˜å‚¨ä¼ è¾“åˆ° CPU å¯ä»¥è®¿é—®çš„ç³»ç»Ÿ RAM ä¸­çš„ä½ç½®ã€‚ç„¶åï¼ŒCPU å¯ä»¥ä½¿ç”¨å…¶ 100% çš„å¤„ç†èƒ½åŠ›æ¥æ‰§è¡Œè§£å¯†æ•°å­¦è¿ç®—ï¼Œä»¥ä¾¿åœ¨ä»ç³»ç»Ÿå†…å­˜ä¸­è¯»å–æ•°æ®æ—¶è§£å¯†æ–‡ä»¶å—ã€‚CPU ä¸ä¼šèŠ±æ—¶é—´ç­‰å¾…å¯¹è®¾å¤‡è¿›è¡Œå•ä¸ªå†…å­˜è¯»å–ï¼Œè€Œæ˜¯ç®€å•åœ°è¿æ¥æ•°æ®ï¼Œå¹¶å…è®¸è®¾å¤‡å°½å¯èƒ½å¿«åœ°ä¼ è¾“ï¼Œè€Œ CPU ä¼šå°½å¯èƒ½å¿«åœ°å¤„ç†å®ƒã€‚åœ¨æ­¤æœŸé—´ï¼Œä»»ä½•é¢å¤–çš„æ•°æ®éƒ½ä¼šåœ¨ç³»ç»Ÿ RAM ä¸­ç¼“å†²ï¼Œç›´åˆ° CPU å¯ä»¥è®¿é—®å®ƒã€‚è¿™æ ·ï¼Œä»»ä½•è¿‡ç¨‹çš„ä»»ä½•éƒ¨åˆ†éƒ½ä¸ä¼šç­‰å¾…å…¶ä»–äº‹æƒ…å‘ç”Ÿã€‚æ‰€æœ‰è¿™äº›éƒ½ä»¥å°½å¯èƒ½å¿«çš„é€Ÿåº¦åŒæ—¶å‘ç”Ÿã€‚\nç”±äº DMA çš„å¤æ‚æ€§å’Œæ¶‰åŠçš„éƒ¨ä»¶æ•°é‡ï¼Œæˆ‘å°†å°è¯•ä»¥æœ€ç›´æ¥çš„æ–¹å¼è§£é‡Š DMAï¼Œå¹¶ç”¨å¤§é‡å›¾è¡¨æ¥æ˜¾ç¤ºè¯¥è¿‡ç¨‹ã€‚æ›´ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œæ¯ä¸ªè®¾å¤‡éƒ½æœ‰ä¸åŒçš„ DMA æ¥å£ã€‚æ²¡æœ‰ç”¨äºæ‰§è¡Œ DMA çš„é€šç”¨è½¯ä»¶æ¥å£ï¼Œåªæœ‰å™¨ä»¶çš„è®¾è®¡äººå‘˜çŸ¥é“å¦‚ä½•å‘Šè¯‰è¯¥å™¨ä»¶æ‰§è¡Œ DMAã€‚å€¼å¾—åº†å¹¸çš„æ˜¯ï¼ŒæŸäº›è®¾å¤‡ç±»åˆ«ä½¿ç”¨æ™®éè®¤å¯çš„æ¥å£ï¼Œä¾‹å¦‚å¤§å¤šæ•° SSD ä½¿ç”¨çš„ NVMe æ¥å£æˆ– USB 3.0 çš„ XHCI æ¥å£ã€‚å¦‚æœæ²¡æœ‰æ ‡å‡†æ¥å£ï¼Œåˆ™åªæœ‰ç¡¬ä»¶è®¾è®¡äººå‘˜çŸ¥é“è®¾å¤‡å¦‚ä½•æ‰§è¡Œ DMAï¼Œå› æ­¤ç”Ÿäº§è®¾å¤‡çš„å…¬å¸æˆ–ä¸ªäººéœ€è¦æ˜¯ç¼–å†™è®¾å¤‡é©±åŠ¨ç¨‹åºçš„äººï¼Œè€Œä¸æ˜¯ä¾èµ–ä¸æ“ä½œç³»ç»Ÿæ†ç»‘çš„é€šç”¨é©±åŠ¨ç¨‹åºä¸è®¾å¤‡é€šä¿¡ã€‚\nä¸€ä¸ªç®€å•çš„ DMA ä¼ è¾“ - Step by Step æˆ‘ä»¬ DMA æ—…ç¨‹çš„ç¬¬ä¸€æ­¥æ˜¯æŸ¥çœ‹ä¼ è¾“çš„åˆå§‹è®¾ç½®ã€‚è¿™æ¶‰åŠå‡ ä¸ªæ­¥éª¤ï¼Œä¸ºå³å°†åˆ°æ¥çš„ DMA ä¼ è¾“å‡†å¤‡ç³»ç»Ÿå†…å­˜ã€å†…æ ¸å’Œè®¾å¤‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†è®¾ç½® DMAï¼Œä»¥ä¾¿è¯»å–ç³»ç»Ÿ RAM ä¸­å­˜åœ¨çš„ DMA ç¼“å†²åŒºä¸­çš„å†…å­˜å†…å®¹ï¼Œå¹¶å°†å…¶æ”¾å…¥ Target Memory çš„å™¨ä»¶æ¿è½½ RAM ä¸­ã€‚æ­¤æ—¶æˆ‘ä»¬å·²ç»é€‰æ‹©å°†æ­¤å†…å­˜ä» DMA Buffer è¯»å–åˆ°å™¨ä»¶ä¸Šåœ°å€ä¸º 0x8000 ä¸­ã€‚ç›®æ ‡æ˜¯å°½å¿«å°†æ­¤å†…å­˜ä»ç³»ç»Ÿå†…å­˜ä¼ è¾“åˆ°è®¾å¤‡ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å¼€å§‹å¤„ç†å®ƒã€‚å‡è®¾åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†…å­˜é‡å‡  M å­—èŠ‚ï¼ŒMMIO ä¼šå¤ªæ…¢ï¼Œä½†ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†ä»…æ˜¾ç¤º 32 å­—èŠ‚çš„å†…å­˜ã€‚è¿™ç§ä¼ è¾“å°†æ˜¯æœ€ç®€å•çš„ DMA ä¼ è¾“ç±»å‹ï¼šå°†å†…å­˜å—çš„å·²çŸ¥å¤§å°å’Œåœ°å€ä»ç³»ç»Ÿ RAM å¤åˆ¶åˆ°è®¾å¤‡ RAMã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç¬¬ 1 æ­¥ - ä»æ“ä½œç³»ç»Ÿåˆ†é… DMA å†…å­˜ æ­¤è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥æ˜¯ä» OS åˆ†é… DMA å†…å­˜ã€‚è¿™æ„å‘³ç€è®¾å¤‡é©±åŠ¨ç¨‹åºå¿…é¡»è¿›è¡Œ OS API è°ƒç”¨ï¼Œä»¥è¯·æ±‚ OS ä¸ºè®¾å¤‡åˆ†é…ä¸€ä¸ªå†…å­˜åŒºåŸŸä»¥å°†æ•°æ®å†™å…¥ã€‚è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿå¯èƒ½éœ€è¦æ‰§è¡Œç‰¹æ®Šçš„å†…å­˜ç®¡ç†æ“ä½œæ‰èƒ½ä½¿æ•°æ®å¯¹è®¾å¤‡å¯ç”¨ï¼Œä¾‹å¦‚åˆ é™¤ä¿æŠ¤æˆ–é‡æ–°ç»„ç»‡ç°æœ‰åˆ†é…ä»¥ä¿ƒè¿›è¯·æ±‚ã€‚\nä¼ ç»Ÿä¸Šï¼ŒDMAï¼ˆç›´æ¥å†…å­˜è®¿é—®ï¼‰å­˜å‚¨å™¨å¿…é¡»æ˜¯è¿ç»­çš„ç‰©ç†å­˜å‚¨å™¨ï¼Œè¿™æ„å‘³ç€è®¾å¤‡ä»æŸä¸ªåœ°å€å’Œé•¿åº¦çš„èµ·å§‹å¤„å¼€å§‹ï¼Œå¹¶çº¿æ€§åœ°ä»ç¼“å†²åŒºçš„èµ·å§‹ä½ç½®è¯»å–/å†™å…¥æ•°æ®ç›´åˆ°ç»“æŸã€‚å› æ­¤ï¼Œæ“ä½œç³»ç»Ÿå¿…é¡»è´Ÿè´£ç»„ç»‡å…¶ç‰©ç†å†…å­˜ï¼Œä»¥åˆ›å»ºè¶³å¤Ÿå¤§çš„è¿ç»­èŒƒå›´ï¼Œä»¥æ»¡è¶³é©±åŠ¨ç¨‹åºè¯·æ±‚çš„ DMA ç¼“å†²åŒºã€‚æœ‰æ—¶ï¼Œå¯¹äºé•¿æ—¶é—´è¿è¡Œæˆ–ç‰©ç†å†…å­˜æœ‰é™çš„ç³»ç»Ÿæ¥è¯´ï¼Œè¿™å¯èƒ½éå¸¸å›°éš¾ã€‚å› æ­¤ï¼Œè¿™ä¸€é¢†åŸŸçš„å¢å¼ºåŠŸèƒ½å…è®¸æ›´ç°ä»£çš„è®¾å¤‡ä½¿ç”¨ Scatter-Gather å’Œ IOMMU Remapping ç­‰åŠŸèƒ½ä¼ è¾“åˆ°éè¿ç»­çš„å­˜å‚¨å™¨åŒºåŸŸã€‚ç¨åï¼Œæˆ‘ä»¬å°†çœ‹ä¸€äº›è¿™äº›åŠŸèƒ½ã€‚ä½†ç°åœ¨ï¼Œæˆ‘ä»¬åªä¸“æ³¨äºæ›´ç®€å•çš„è¿ç»­å†…å­˜æƒ…å†µã€‚\nä¸€æ—¦è¯·æ±‚çš„åˆ†é…æˆåŠŸï¼ŒAPI å°†è¿”å›å†…å­˜åœ°å€ï¼Œå¹¶æŒ‡å‘ç³»ç»Ÿ RAM ä¸­çš„ç¼“å†²åŒºã€‚è¿™å°†æ˜¯è®¾å¤‡é€šè¿‡ DMA è®¿é—®å†…å­˜çš„åœ°å€ã€‚DMA æ„å›¾ä¸º API è¿”å›çš„åœ°å€å°†è¢«èµ‹äºˆä¸€ä¸ªç‰¹æ®Šçš„åç§°; è®¾å¤‡é€»è¾‘åœ°å€æˆ–é€»è¾‘åœ°å€ã€‚å¯¹äºæˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œé€»è¾‘åœ°å€ç­‰åŒäºç‰©ç†åœ°å€ã€‚è®¾å¤‡çœ‹åˆ°çš„æ˜¯æ“ä½œç³»ç»Ÿçœ‹åˆ°çš„ç‰©ç†å†…å­˜çš„å®Œå…¨ç›¸åŒè§†å›¾ï¼Œæ²¡æœ‰é¢å¤–çš„è½¬æ¢ã€‚ç„¶è€Œï¼Œåœ¨æ›´é«˜çº§çš„ä¼ è¾“å½¢å¼ä¸­ï¼Œæƒ…å†µå¯èƒ½å¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚å› æ­¤æœ€å¥½æ„è¯†åˆ°ï¼Œè®¾å¤‡ç»™å‡ºçš„åœ°å€å¯èƒ½å¹¶éæ€»æ˜¯ä¸å…¶åœ¨ RAM ä¸­å®é™…çš„ç‰©ç†åœ°å€ç›¸åŒã€‚\nåˆ†é…ç¼“å†²åŒºåï¼Œç”±äºç›®çš„æ˜¯å°†æ•°æ®ä»æ­¤ç¼“å†²åŒºç§»åŠ¨åˆ°è®¾å¤‡ï¼Œå› æ­¤è®¾å¤‡é©±åŠ¨ç¨‹åºå°†æå‰ä½¿ç”¨å†™å…¥è®¾å¤‡æ‰€éœ€çš„ä¿¡æ¯å¡«å……ç¼“å†²åŒºã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œç”±é‡å¤ 01 02 03 04 æ¨¡å¼ç»„æˆçš„æ•°æ®æ­£åœ¨ä¼ è¾“åˆ°è®¾å¤‡çš„ RAMã€‚\nç¬¬ 2 æ­¥ - å°† DMA åœ°å€å†™å…¥è®¾å¤‡å¹¶å¼€å§‹ä¼ è¾“ ä¼ è¾“çš„ä¸‹ä¸€æ­¥æ˜¯å‡†å¤‡è®¾å¤‡æ‰§è¡Œäº‹åŠ¡æ‰€éœ€çš„ä¿¡æ¯ã€‚è¿™é€šå¸¸æ˜¯äº†è§£å™¨ä»¶çš„ç‰¹å®š DMA æ¥å£æœ€é‡è¦çš„åœ°æ–¹ã€‚æ¯ä¸ªè®¾å¤‡éƒ½ä»¥è‡ªå·±çš„æ–¹å¼è¿›è¡Œç¼–ç¨‹ï¼Œäº†è§£é©±åŠ¨ç¨‹åºåº”è¯¥å¦‚ä½•å¯¹è®¾å¤‡è¿›è¡Œç¼–ç¨‹çš„å”¯ä¸€æ–¹æ³•æ˜¯å‚è€ƒå…¶é€šç”¨æ ‡å‡†ï¼ˆå¦‚ NVMe è§„èŒƒï¼‰æˆ–ç®€å•åœ°ä¸ç¡¬ä»¶è®¾è®¡äººå‘˜åˆä½œã€‚\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘å°†ä¸ºä¸€ä¸ªåªæœ‰æ‰§è¡Œä¼ è¾“æ‰€éœ€çš„æœ€åŸºæœ¬åŠŸèƒ½çš„è®¾å¤‡æ„å»ºä¸€ä¸ªç®€åŒ–çš„ DMA æ¥å£ã€‚åœ¨ä¸‹é¢çš„å›¾è¡¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªè®¾å¤‡é€šè¿‡å‘ BAR0 MMIO åŒºåŸŸå†™å…¥æ•°å€¼æ¥è¿›è¡Œç¼–ç¨‹ã€‚è¿™æ„å‘³ç€ä¸ºäº†ä¸ºè¿™ä¸ªè®¾å¤‡ç¼–ç¨‹ DMAï¼Œé©±åŠ¨ç¨‹åºå¿…é¡»å°†å†…å­˜å†™å…¥ç”± BAR0 æŒ‡å®šçš„ MMIO åŒºåŸŸã€‚æ¯ä¸ªå¯„å­˜å™¨åœ¨ BAR0 åŒºåŸŸå†…çš„ä½ç½®æ˜¯ç”±é©±åŠ¨ç¨‹åºç¼–å†™è€…æå‰çŸ¥é“çš„ï¼Œå¹¶ä¸”è¢«é›†æˆåˆ°è®¾å¤‡é©±åŠ¨ç¨‹åºçš„ä»£ç ä¸­ã€‚\nå¯¹äºæ­¤ç¤ºä¾‹ã€æˆ‘åœ¨ BAR0 ä¸­åˆ›å»ºäº†å››ä¸ªå™¨ä»¶å¯„å­˜å™¨ï¼š\nDestination Addressï¼ˆç›®æ ‡åœ°å€ï¼‰ - è®¾å¤‡å†…éƒ¨ RAM ä¸­ç”¨äºå†™å…¥ä»ç³»ç»Ÿ RAM è¯»å–çš„æ•°æ®çš„åœ°å€ã€‚è¿™æ˜¯æˆ‘ä»¬å°†å¯¹å·²ç»ç¡®å®šçš„ç›®æ ‡åœ°å€ 0x8000 è¿›è¡Œç¼–ç¨‹çš„åœ°æ–¹ã€‚ Source Addressï¼ˆæºåœ°å€ï¼‰ - è®¾å¤‡å°†ä»ä¸­è¯»å–æ•°æ®çš„ç³»ç»Ÿ RAM çš„é€»è¾‘åœ°å€ã€‚è¿™å°†å¯¹æˆ‘ä»¬å¸Œæœ›è®¾å¤‡è¯»å–çš„ DMA Buffer çš„é€»è¾‘åœ°å€è¿›è¡Œç¼–ç¨‹ã€‚ Transfer Sizeï¼ˆä¼ è¾“å¤§å°ï¼‰ - æˆ‘ä»¬è¦ä¼ è¾“çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ Initiate Transferï¼ˆå¯åŠ¨ä¼ è¾“æ ‡å¿—ä½ï¼‰- ä¸€æ—¦æ¬¡å¯„å­˜å™¨å†™å…¥ 1ï¼Œå™¨ä»¶å°†å¼€å§‹åœ¨ä¸Šé¢ç»™å‡ºçš„åœ°å€ä¹‹é—´è¿›è¡Œä¼ è¾“ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œé©±åŠ¨ç¨‹åºå¯ä»¥åˆ¤æ–­è®¾å¤‡å·²å®Œæˆå¡«å……ç¼“å†²åŒºå¹¶å‡†å¤‡å¥½å¼€å§‹ä¼ è¾“ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºé—¨é“ƒï¼ˆDoor Bellï¼‰å¯„å­˜å™¨ã€‚ \u003c!DOCTYPE html\u003e Responsive Image åœ¨ä¸Šå›¾ä¸­ï¼Œé©±åŠ¨ç¨‹åºéœ€è¦ä½¿ç”¨å™¨ä»¶çš„ BAR0 çš„æ˜ å°„å†…å­˜å°†å¿…è¦çš„å€¼å†™å…¥å¯„å­˜å™¨ï¼ˆå®ƒå¦‚ä½•æ˜ å°„æ­¤å†…å­˜å–å†³äº OSï¼‰ã€‚æ­¤å›¾ä¸­çš„å€¼å¦‚ä¸‹æ‰€ç¤ºï¼š\nTarget Memory - æˆ‘ä»¬è¦ä»å™¨ä»¶å¤åˆ¶çš„å†…å­˜å°†ä¸º 0x00008000ï¼Œå®ƒæ˜ å°„åˆ°å™¨ä»¶æ¿è½½ RAM ä¸­çš„å†…å­˜åŒºåŸŸã€‚è¿™å°†æ˜¯æˆ‘ä»¬çš„ç›®æ ‡åœ°å€ã€‚ DMA ç¼“å†²åŒº - æ“ä½œç³»ç»Ÿåœ¨ 0x001FF000 åˆ†é…å†…å­˜å—ï¼Œå› æ­¤è¿™å°†æ˜¯æˆ‘ä»¬çš„æºåœ°å€ã€‚ æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œé©±åŠ¨ç¨‹åºç°åœ¨å¯ä»¥å°†å€¼ç¼–ç¨‹åˆ°è®¾å¤‡ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç°åœ¨ï¼Œé©±åŠ¨ç¨‹åºå·²ç»é…ç½®äº†æ‰§è¡Œä¼ è¾“æ‰€éœ€çš„æ‰€æœ‰å¯„å­˜å™¨ã€‚æœ€åä¸€æ­¥æ˜¯å‘å¯åŠ¨ä¼ è¾“å¯„å­˜å™¨å†™å…¥ä¸€ä¸ªå€¼ï¼Œè¯¥å¯„å­˜å™¨å……å½“å¼€å§‹ä¼ è¾“çš„ Door bell å¯„å­˜å™¨ã€‚ä¸€æ—¦å†™å…¥æ­¤å€¼ï¼Œè®¾å¤‡å°†é©±åŠ¨ DMA ä¼ è¾“ï¼Œå¹¶ç‹¬ç«‹äºé©±åŠ¨ç¨‹åºæˆ– CPU çš„å‚ä¸æ‰§è¡Œå®ƒã€‚é©±åŠ¨ç¨‹åºå·²å®Œæˆå¯åŠ¨ä¼ è¾“çš„å·¥ä½œï¼Œæ­¤æ—¶ CPU å¯åœ¨ç­‰å¾…è®¾å¤‡é€šçŸ¥ç³»ç»Ÿ DMA å®Œæˆçš„åŒæ—¶ï¼Œè‡ªç”±è¿›è¡Œå…¶ä»–å·¥ä½œã€‚\nç¬¬ 3 æ­¥ - è®¾å¤‡æ‰§è¡Œ DMA äº‹åŠ¡ ç°åœ¨ï¼Œé©±åŠ¨ç¨‹åºå·²å†™å…¥ Door bell å¯„å­˜å™¨ï¼Œè®¾å¤‡ç°åœ¨å°†æ¥ç®¡å¤„ç†å®é™…ä¼ è¾“ã€‚åœ¨è®¾å¤‡æœ¬èº«ä¸Šï¼Œå­˜åœ¨ä¸€ä¸ªåä¸º DMA å¼•æ“çš„æ¨¡å—ï¼Œè´Ÿè´£å¤„ç†å’Œç»´æŠ¤äº‹åŠ¡çš„æ‰€æœ‰æ–¹é¢ã€‚å½“å™¨ä»¶è¢«ç¼–ç¨‹æ—¶ï¼Œå¯¹ BAR0 çš„å¯„å­˜å™¨å†™å…¥æ­£åœ¨å¯¹ DMA å¼•æ“è¿›è¡Œç¼–ç¨‹ï¼Œå…¶ä¸­åŒ…å«å¼€å§‹åœ¨ PCIe é“¾è·¯ä¸Šå‘é€å¿…è¦çš„ TLP ä»¥æ‰§è¡Œå†…å­˜äº‹åŠ¡æ‰€éœ€çš„ä¿¡æ¯ã€‚\nå¦‚ä¸Šä¸€èŠ‚æ‰€è¿°ï¼ŒPCIe é“¾è·¯ä¸Šçš„æ‰€æœ‰å†…å­˜æ“ä½œéƒ½æ˜¯é€šè¿‡ Memory Write/Read TLP å®Œæˆçš„ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ·±å…¥ç ”ç©¶åœ¨äº¤æ˜“å‘ç”Ÿæ—¶è®¾å¤‡çš„ DMA å¼•æ“å‘é€å’Œæ¥æ”¶çš„ TLPã€‚è¯·è®°ä½ï¼Œæ›´å®¹æ˜“å°† TLP è§†ä¸ºåœ¨å•ä¸ªå¯é è¿æ¥ä¸Šå‘é€å’Œæ¥æ”¶æ•°æ®çš„ç½‘ç»œæ•°æ®åŒ…ã€‚\nå¦‚åœ¨å‰æ–‡éƒ¨åˆ†è®¨è®ºè¿‡çš„ï¼ŒPCIe é“¾æ¥ä¸Šçš„æ‰€æœ‰å†…å­˜æ“ä½œéƒ½æ˜¯é€šè¿‡å†…å­˜å†™å…¥/è¯»å– TLPs æ¥å®Œæˆçš„ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è®¾å¤‡çš„ DMA å¼•æ“åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‘é€å’Œæ¥æ”¶çš„ TLPsã€‚è¦ç‰¢è®°çš„æ˜¯ï¼Œå°† TLPs è§†ä¸ºåœ¨ä¸€ä¸ªå•ä¸€ã€å¯é çš„è¿æ¥ä¸Šå‘é€å’Œæ¥æ”¶æ•°æ®çš„ç½‘ç»œæ•°æ®åŒ…æ›´æ˜“äºç†è§£ã€‚\næ’æ›²ï¼šå¿«é€Ÿäº†è§£ TLP åœ¨æŸ¥çœ‹é“¾è·¯ä¸Šçš„ TLP ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ä»”ç»†äº†è§£ä¸€ä¸‹æ•°æ®åŒ…ç»“æ„æœ¬èº«çš„æ¦‚è§ˆã€‚\nä»¥ä¸‹æ˜¯å†…å­˜è¯»å–è¯·æ±‚å’Œå“åº”çš„ä¸¤ä¸ª TLPã€‚å¦‚å‰æ‰€è¿°ï¼Œç”¨äºå†…å­˜æ“ä½œçš„ TLP åˆ©ç”¨è¯·æ±‚å’Œå“åº”ç³»ç»Ÿã€‚æ‰§è¡Œè¯»å–çš„è®¾å¤‡å°†ç”Ÿæˆç‰¹å®šåœ°å€å’Œé•¿åº¦ï¼ˆä»¥ 4 å­—èŠ‚ DWORD ä¸ºå•ä½ï¼‰çš„è¯»å–è¯·æ±‚ TLPï¼Œç„¶ååä¸‹æ¥ç­‰å¾…å®Œæˆæ•°æ®åŒ…åˆ°è¾¾åŒ…å«å“åº”æ•°æ®çš„é“¾è·¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸ç”Ÿæˆè¯·æ±‚çš„è®¾å¤‡ã€Requester ä»¥åŠå”¯ä¸€çš„ Tag å€¼ç›¸å…³çš„å…ƒæ•°æ®ã€‚æ­¤ Tag å€¼ç”¨äºå°†è¯·æ±‚ä¸å…¶å®ŒæˆåŒ¹é…ã€‚å½“è®¾å¤‡ç”Ÿæˆè¯·æ±‚æ—¶ï¼Œå®ƒä¼šä½¿ç”¨å”¯ä¸€å€¼æ ‡è®° TLP ä»¥è·Ÿè¸ªå¾…å¤„ç†çš„è¯·æ±‚ã€‚è¯¥å€¼ç”±è¯·æ±‚çš„å‘é€è€…é€‰æ‹©ï¼Œå¹¶ä¸”ç”±å‘é€è€…æ¥è·Ÿè¸ªå…¶åˆ†é…çš„ Tagsã€‚\néšç€å®Œæˆçš„æ•°æ®é€šè¿‡é“¾è·¯åˆ°è¾¾ï¼Œå®Œæˆçš„ Tag è®©è®¾å¤‡èƒ½å¤Ÿå°†æ¥å…¥çš„æ•°æ®æ­£ç¡®åœ°ç§»è‡³ç‰¹å®šä¼ è¾“æ‰€éœ€çš„ä½ç½®ã€‚è¯¥ç³»ç»Ÿå…è®¸å•ä¸€è®¾å¤‡æœ‰å¤šä¸ªç‹¬ç‰¹çš„æœªå®Œæˆä¼ è¾“ä»»åŠ¡ï¼Œå°½ç®¡å®ƒä»¬æ¥æ”¶çš„æ•°æ®åŒ…ç›¸äº’äº¤é”™ï¼Œä½†ä»èƒ½ä¿æŒä½œä¸ºç‹¬ç«‹ä¼ è¾“ä»»åŠ¡çš„æœ‰åºæ€§ã€‚\næ•°æ®åŒ…å†…éƒ¨è¿˜åŒ…å«äº†å¿…è¦çš„ä¿¡æ¯ï¼Œä½¿å¾— PCIe åˆ‡æ¢å±‚æ¬¡ç»“æ„èƒ½å¤Ÿç¡®å®šè¯·æ±‚å’Œå®Œæˆéœ€è¦å»å‘çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå†…å­˜åœ°å€è¢«ç”¨æ¥ç¡®å®šæ­£åœ¨è¯·æ±‚è®¿é—®çš„è®¾å¤‡æ˜¯å“ªä¸€ä¸ªã€‚åœ¨æšä¸¾æœŸé—´ï¼Œå±‚æ¬¡ç»“æ„ä¸­çš„æ¯ä¸€ä¸ªè®¾å¤‡éƒ½è¢«ç¼–ç¨‹ä»¥æ‹¥æœ‰å„è‡ªç‹¬ç‰¹çš„åœ°å€èŒƒå›´ã€‚åˆ‡æ¢ç»“æ„æ ¹æ®æ•°æ®åŒ…ä¸­çš„å†…å­˜åœ°å€ï¼Œç¡®å®šæ•°æ®åŒ…éœ€è¦å»å‘å“ªé‡Œä»¥è®¿é—®é‚£ä¸ªåœ°å€ã€‚\nè®¾å¤‡æ”¶åˆ°å¹¶å¤„ç†è¯·æ±‚åï¼Œå“åº”æ•°æ®å°†ä»¥ Completion TLP çš„å½¢å¼å‘é€å›å»ã€‚å®Œæˆæˆ–â€œå“åº”â€æ•°æ®åŒ…å¯ä»¥è€Œä¸”é€šå¸¸ä¼šè¢«åˆ†æ®µä¸ºè®¸å¤šè¾ƒå°çš„ TLPï¼Œè¿™äº› TLP å‘é€æ•´ä½“å“åº”çš„ä¸€éƒ¨åˆ†ã€‚è¿™æ˜¯å› ä¸ºåœ¨æšä¸¾æœŸé—´ï¼Œå·²ç¡®å®šè®¾å¤‡å’Œæ€»çº¿å¯ä»¥å¤„ç†æœ€å¤§æœ‰æ•ˆè½½è·å¤§å°ï¼ˆMPSï¼‰ã€‚MPS å¯æ ¹æ®å¹³å°å’Œè®¾å¤‡åŠŸèƒ½è¿›è¡Œé…ç½®ï¼Œä» 128 å¼€å§‹ï¼Œæœ€é«˜å¯è¾¾ 4096 çš„ 2 æ¬¡æ–¹å¤§å°ã€‚é€šå¸¸ï¼Œæ­¤å€¼çº¦ä¸º 256 å­—èŠ‚ï¼Œè¿™æ„å‘³ç€éœ€è¦å°†å¤§å‹è¯»å–è¯·æ±‚æ‹†åˆ†ä¸ºè®¸å¤šè¾ƒå°çš„ TLPã€‚è¿™äº›æ•°æ®åŒ…ä¸­çš„æ¯ä¸€ä¸ªéƒ½æœ‰ä¸€ä¸ªå­—æ®µï¼Œè¯¥å­—æ®µæŒ‡ç¤ºå®Œæˆå“åº”çš„åŸå§‹è¯·æ±‚çš„åç§»é‡ï¼Œæœ‰æ•ˆè´Ÿè½½ä¸­æ˜¯è¿”å›çš„æ•°æ®å—ã€‚\næœ‰ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ï¼Œå³å†…å­˜ TLP ä½¿ç”¨ BDF æ¥å¯»å€æ•°æ®åŒ…éœ€è¦å»å¾€çš„ä½ç½®ã€‚å…¶å®è¯·æ±‚ä»…ä½¿ç”¨å†…å­˜åœ°å€æ¥æŒ‡ç¤ºæ•°æ®åŒ…çš„ç›®çš„åœ°ï¼Œå¹¶ä¸”è®¾å¤‡å’Œç›®æ ‡ä¹‹é—´çš„æ¡¥æ¥è®¾å¤‡è´Ÿè´£å°†è¯¥æ•°æ®åŒ…å‘é€åˆ°å…¶æ­£ç¡®çš„ä½ç½®ã€‚ã€‚ç„¶è€Œï¼Œå®Œæˆæ•°æ®åŒ…ç¡®å®åˆ©ç”¨è¯·æ±‚è€…çš„ BDF å°†æ•°æ®è¿”å›ç»™å‘èµ·è¯·æ±‚çš„è®¾å¤‡ã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå±•ç¤ºå†…å­˜è¯»å–å’Œå“åº”è¿‡ç¨‹çš„å›¾è¡¨ï¼Œå›¾ä¸­å±•ç¤ºå‡ºè¯·æ±‚ä¼šä½¿ç”¨ä¸€ä¸ªåœ°å€æ¥å‘èµ·è¯·æ±‚ï¼Œè€Œå®Œæˆçš„æ“ä½œä¼šä½¿ç”¨è¯·æ±‚ä¸­ Request å­—æ®µçš„ BDF æ¥å‘é€ç›¸åº”åº”ç­”ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç°åœ¨å›åˆ°å®é™…çš„ä¼ è¾“ è®©æˆ‘ä»¬çœ‹çœ‹ DMA å¼•æ“ä¸ºäº†æ‰§è¡Œæˆ‘ä»¬çš„è¯·æ±‚è€Œå‘é€å’Œæ¥æ”¶çš„æ‰€æœ‰å†…å®¹ã€‚ç”±äºæˆ‘ä»¬è¯·æ±‚äº† 32 å­—èŠ‚çš„æ•°æ®ï¼Œå› æ­¤åªæœ‰ä¸€ä¸ªå•ä¸€çš„ Memory Read Request å’Œä¸€ä¸ªå¸¦æœ‰å“åº”çš„å•ä¸€ Memory Read Completion æ•°æ®åŒ…ã€‚ä¸ºäº†ä¾¿äºæ‚¨ç†è§£ï¼Œè¯·åœæ­¢å‘å‰é˜…è¯»ï¼Œå¹¶è€ƒè™‘ä¸€ä¸‹åœ¨æ­¤äº‹åŠ¡ä¸­å“ªä¸ªè®¾å¤‡å°†å‘é€å’Œæ¥æ”¶å“ªä¸ª TLPã€‚å¦‚æœæ‚¨éœ€è¦å†æ¬¡æŸ¥çœ‹ç¬¬ 2 æ­¥çš„å›¾è¡¨ï¼Œè¯·å‘ä¸Šæ»šåŠ¨ã€‚\nç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä¸€ä¸‹ä¼ è¾“çš„å®é™…æ•°æ®åŒ…ã€‚è™½ç„¶æˆ‘å°†ç»§ç»­ç»˜åˆ¶è¿™ä¸ªæ¨¡æ‹Ÿç¤ºä¾‹ï¼Œä½†æˆ‘è®¤ä¸ºå¯¹äºè¿™ä¸ªç»ƒä¹ ï¼Œå½“æ‰§è¡ŒçœŸå®ä¼ è¾“æ—¶ï¼Œå®é™…çœ‹åˆ°å…¶ä¸­ä¸€äº› TLP æ˜¯ä»€ä¹ˆæ ·å­å¯èƒ½ä¼šå¾ˆæœ‰è¶£ã€‚\nåœ¨å®éªŒä¸­ï¼Œæˆ‘ä½¿ç”¨çœŸå®è®¾å¤‡é…ç½®äº†å¦‚ä¸Šæ–‡æ‰€ç¤ºçš„åŒç±»é€šç”¨å‚æ•°ï¼Œå¹¶å¯åŠ¨äº† DMAã€‚è¿™ä¸ªè®¾å¤‡ä¼šå‘é€çœŸå®çš„ TLPsï¼Œå°†ç³»ç»Ÿ RAM ä¸­çš„å†…å­˜è¯»å–åˆ°è®¾å¤‡é‡Œã€‚å› æ­¤ï¼Œä½ å°†æœ‰æœºä¼šç½•è§åœ°æŸ¥çœ‹åœ¨æ‰§è¡Œè¿™ç§ DMA æ—¶å‘é€çš„å®é™… TLPs çš„ä¾‹å­ï¼Œé™¤éæœ‰åˆ†æå™¨ï¼Œå¦åˆ™è¿™äº›åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ ä¹æ— æ³•çœ‹åˆ°ã€‚\nè¦æŸ¥çœ‹æ­¤å®éªŒï¼Œè¯·ç‚¹å‡»æ­¤é“¾æ¥è‡³é…å¥—æ–‡ç« ï¼šExperiment - Packet Dumping PCIe DMA TLPs with a Protocol Analyzer and Pcileech â€“ Reversing Engineering for the Soul\nä»¥ä¸‹æ˜¯å™¨ä»¶ç”Ÿæˆçš„å†…å­˜è¯»å–è¯·æ±‚ä»¥åŠè¯·æ±‚å¦‚ä½•éå†å±‚æ¬¡ç»“æ„çš„æ¡†å›¾ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å‹˜è¯¯è¡¨ï¼š0x32 åº”è¯¥æ˜¯ 32\næ­¤å›¾ä¸­æ¦‚è¿°çš„æ­¥éª¤å¦‚ä¸‹ï¼š\nDMA å¼•æ“åˆ›å»º TLP - DMA å¼•æ“è¯†åˆ«å‡ºå®ƒå¿…é¡»ä» 0x001FF000 è¯»å– 32 å­—èŠ‚ã€‚å®ƒç”Ÿæˆä¸€ä¸ªåŒ…å«æ­¤è¯·æ±‚çš„ TLPï¼Œå¹¶é€šè¿‡å…¶æœ¬åœ° PCIe é“¾è·¯å°†å…¶å‘é€å‡ºå»ã€‚ TLP éå†å±‚æ¬¡ç»“æ„ - PCIe çš„äº¤æ¢å±‚æ¬¡ç»“æ„é€šè¿‡æ¡¥æ¥è®¾å¤‡ç§»åŠ¨æ­¤è¯·æ±‚ï¼Œç›´åˆ°å®ƒåˆ°è¾¾å…¶ç›®çš„åœ°ï¼Œå³ RCã€‚å›æƒ³ä¸€ä¸‹ï¼ŒRC è´Ÿè´£å¤„ç†æ‰€æœ‰ç”¨äºè®¿é—®ç³»ç»Ÿ RAM çš„ä¼ å…¥æ•°æ®åŒ…ã€‚ é€šçŸ¥ DRAM æ§åˆ¶å™¨ - RC åœ¨å†…éƒ¨ä¸ DRAM æ§åˆ¶å™¨é€šä¿¡ï¼Œè¯¥æ§åˆ¶å™¨è´Ÿè´£å®é™…è®¿é—®ç³»ç»Ÿ DRAM çš„å†…å­˜ã€‚ ä» DRAM è¯»å–å†…å­˜ - ä»åœ°å€ 0x001FF000 çš„ DRAM è¯·æ±‚ç»™å®šé•¿åº¦çš„ 32 å­—èŠ‚ï¼Œå¹¶å°†å…¶è¿”å›åˆ°å€¼ä¸º 01 02 03 04\u0026hellip; å°½é‡ä¸è¦è¢«è¿™äº›ä¿¡æ¯æ·¹æ²¡ï¼Œå› ä¸ºæˆ‘ç¡®å®çŸ¥é“ä»…é’ˆå¯¹å•ä¸ªå†…å­˜è¯·æ±‚ TLP å°±æœ‰å¾ˆå¤šäº‹æƒ…è¦åšã€‚æ‰€æœ‰è¿™äº›åœ¨é«˜å±‚æ¬¡ä¸Šå½’ç»“ä¸ºä»…ä» RAM ä¸­çš„åœ°å€ 0x001FF000 è¯»å– 32 å­—èŠ‚çš„å†…å­˜ã€‚å¹³å°å¦‚ä½•é€šè¿‡ä¸ DRAM æ§åˆ¶å™¨é€šä¿¡æ¥å®é™…è¯»å–ç³»ç»Ÿ DRAMï¼Œä»…ä¾›æ‚¨å‚è€ƒã€‚è®¾å¤‡æœ¬èº«ä¸çŸ¥é“ Root Complex å®é™…ä¸Šæ˜¯å¦‚ä½•è¯»å–æ­¤å†…å­˜çš„ï¼Œå®ƒåªæ˜¯ä½¿ç”¨ TLP å¯åŠ¨ä¼ è¾“ã€‚\næ³¨æ„ï¼šæ­¤å¤„æœªæ˜¾ç¤ºæ›´å¤æ‚çš„ RAM ç¼“å­˜è¿‡ç¨‹ã€‚åœ¨ x86-64 ä¸Šï¼Œæ¥è‡ªè®¾å¤‡çš„æ‰€æœ‰å†…å­˜è®¿é—®éƒ½æ˜¯ç¼“å­˜ä¸€è‡´çš„ï¼Œè¿™æ„å‘³ç€å¹³å°ä¼šè‡ªåŠ¨å°† CPU ç¼“å­˜ä¸è®¾å¤‡æ­£åœ¨è®¿é—®çš„å€¼åŒæ­¥ã€‚åœ¨å…¶ä»–å¹³å°ï¼ˆå¦‚ ARM å¹³å°ï¼‰ä¸Šï¼Œç”±äºå…¶ç¼“å­˜æ¶æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„è¿‡ç¨‹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªå‡è®¾ç¼“å­˜ä¸€è‡´æ€§æ­£åœ¨è‡ªåŠ¨ä¸ºæˆ‘ä»¬å¤„ç†ï¼Œæˆ‘ä»¬å¯¹æ­¤æ²¡æœ‰ä»»ä½•ç‰¹åˆ«çš„æ‹…å¿§ã€‚\nå½“ RC æ”¶åˆ°æ­¤ TLP æ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨æ ‡è®° Requester å’Œ Tag çš„è¯»å–å†…å®¹ã€‚å½“å®ƒç­‰å¾… DRAM å“åº”è¯¥å€¼æ—¶ï¼Œæ­¤è¯·æ±‚çš„ä¿¡æ¯å°†åœ¨ RC ä¸­ç­‰å¾…ã€‚è¦æ¦‚å¿µåŒ–è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å°†å…¶è§†ä¸ºç½‘ç»œå¥—æ¥å­—ä¸­çš„â€œopen connectionâ€ã€‚RC çŸ¥é“å®ƒéœ€è¦å“åº”ä»€ä¹ˆï¼Œå› æ­¤ä¼šç­‰åˆ°å“åº”æ•°æ®å¯ç”¨åï¼Œå†é€šè¿‡å¥—æ¥å­—å°†æ•°æ®å‘é€å›å»ã€‚\næœ€åï¼Œå°† Completion ä» Root Complex å‘é€å›è®¾å¤‡ã€‚è¯·æ³¨æ„ï¼ŒDestination ä¸ Requester ç›¸åŒï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä»¥ä¸‹æ˜¯å“åº”æ•°æ®åŒ…æ¦‚è¿°çš„æ­¥éª¤ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼š\nä» DRAM è¯»å–å†…å­˜ - DRAM æ§åˆ¶å™¨ä»ç³»ç»Ÿ DRAM ä¸­ 0x001FF000 çš„ DMA ç¼“å†²åŒºåœ°å€è¯»å– 32 å­—èŠ‚ã€‚ DRAM æ§åˆ¶å™¨å“åº”æ ¹å¤åˆä½“ - DRAM æ§åˆ¶å™¨åœ¨å†…éƒ¨å“åº”ä» DRAM å‘ RC è¯·æ±‚çš„å†…å­˜ RC ç”Ÿæˆå®Œæˆ - RC è·Ÿè¸ªä¼ è¾“å¹¶ä¸ºä» DRAM è¯»å–çš„å€¼åˆ›å»ºå®Œæˆ TLPã€‚åœ¨æ­¤ TLP ä¸­ï¼Œå…ƒæ•°æ®å€¼æ˜¯æ ¹æ® RC å¯¹å¾…å¤„ç†ä¼ è¾“çš„äº†è§£æ¥è®¾ç½®çš„ï¼Œä¾‹å¦‚å‘é€çš„å­—èŠ‚æ•°ã€ä¼ è¾“çš„æ ‡è®°ä»¥åŠä»åŸå§‹è¯·æ±‚çš„ Requester å­—æ®µå¤åˆ¶çš„ç›®æ ‡ BDFã€‚ DMA å¼•æ“æ¥æ”¶ TLP - DMA å¼•æ“é€šè¿‡ PCIe é“¾è·¯æ¥æ”¶ TLPï¼Œå¹¶æŸ¥çœ‹æ ‡ç­¾æ˜¯å¦ä¸åŸå§‹è¯·æ±‚çš„ç›¸åŒæ ‡ç­¾åŒ¹é…ã€‚å®ƒè¿˜ä¼šåœ¨å†…éƒ¨è·Ÿè¸ªæ­¤å€¼ï¼Œå¹¶çŸ¥é“æœ‰æ•ˆè´Ÿè½½ä¸­çš„å†…å­˜åº”å†™å…¥ Target Memoryï¼Œè¯¥å†…å­˜åœ¨è®¾å¤‡å†…éƒ¨ RAM ä¸­å¤„äº 0x8000ã€‚ Target Memory is Writtenï¼ˆç›®æ ‡å†…å­˜å·²å†™å…¥ï¼‰ - è®¾å¤‡å†…å­˜ä¸­çš„å€¼å°†æ›´æ–°ä¸ºä»æ•°æ®åŒ…çš„ Payload ä¸­å¤åˆ¶çš„å€¼ã€‚ ç³»ç»Ÿä¸­æ–­ - è™½ç„¶è¿™æ˜¯å¯é€‰çš„ï¼Œä½†å¤§å¤šæ•° DMA å¼•æ“å°†é…ç½®ä¸ºåœ¨ DMA å®Œæˆæ—¶ä¸­æ–­ä¸»æœº CPUã€‚è¿™ä¼šåœ¨è®¾å¤‡æˆåŠŸå®Œæˆ DMA æ—¶å‘è®¾å¤‡é©±åŠ¨ç¨‹åºå‘å‡ºé€šçŸ¥ã€‚ åŒæ ·ï¼Œä»…å¤„ç†è¿™ä¸ª complete æ•°æ®åŒ…å°±æ¶‰åŠå¾ˆå¤šæ­¥éª¤ã€‚ä½†æ˜¯ï¼ŒåŒæ ·ï¼Œæ‚¨å¯ä»¥å°†æ•´ä¸ªè¿‡ç¨‹ç®€å•åœ°è§†ä¸ºâ€œä»è®¾å¤‡çš„è¯·æ±‚ä¸­æ”¶åˆ° 32 å­—èŠ‚çš„å“åº”â€ã€‚è¿™äº›æ­¥éª¤çš„å…¶ä½™éƒ¨åˆ†åªæ˜¯ä¸ºäº†å‘æ‚¨å±•ç¤ºæ­¤å“åº”å¤„ç†çš„å®Œæ•´ç«¯åˆ°ç«¯æ˜¯ä»€ä¹ˆæ ·å­ã€‚\nä»è¿™é‡Œï¼Œè®¾å¤‡é©±åŠ¨ç¨‹åºä¼šæ”¶åˆ° DMA å·²å®Œæˆçš„é€šçŸ¥ï¼Œè®¾å¤‡é©±åŠ¨ç¨‹åºçš„ä»£ç è´Ÿè´£æ¸…ç† DMA ç¼“å†²åŒºæˆ–å°†å…¶å­˜å‚¨èµ·æ¥ä»¥ä¾›ä¸‹æ¬¡ä½¿ç”¨ã€‚\nåœ¨æˆ‘ä»¬çš„è‰°è‹¦åŠªåŠ›åï¼Œæˆ‘ä»¬ç»ˆäºå®Œæˆäº†ä¸€æ¬¡å•ä¸€çš„ DMA ä¼ è¾“äº‹åŠ¡ï¼æƒ³åˆ°è¿™å°±æ˜¯æˆ‘èƒ½æä¾›çš„æœ€â€œç®€å•â€çš„ä¼ è¾“æ–¹å¼ï¼ŒçœŸæ˜¯è®©äººæƒŠè®¶ã€‚æœ‰äº† IOMMU é‡æ˜ å°„å’Œ Scatter-Gather èƒ½åŠ›çš„åŠ å…¥ï¼Œè¿™äº›äº‹åŠ¡ç”šè‡³å¯èƒ½å˜å¾—æ›´å¤æ‚ã€‚ä½†å°±ç°åœ¨è€Œè¨€ï¼Œä½ åº”è¯¥å¯¹ DMA çš„å…¨éƒ¨å†…å®¹ä»¥åŠå®ƒå¦‚ä½•åœ¨çœŸå®è®¾å¤‡ä¸­è¿ä½œæœ‰äº†æ·±å…¥çš„ç†è§£ã€‚\nå°¾å£° - å…³äºå¤æ‚æ€§çš„å°è¯´æ˜ å¦‚æœæ‚¨è¯»å®Œè¿™ç¯‡æ–‡ç« å¹¶è§‰å¾—è‡ªå·±æ²¡æœ‰å®Œå…¨æŒæ¡æ‰€æœ‰æŠ›ç»™æ‚¨çš„æ¦‚å¿µï¼Œæˆ–è€…å¯¹å¤æ‚æ€§æ„Ÿåˆ°ä¸çŸ¥æ‰€æªï¼Œæ‚¨ä¸å¿…æ‹…å¿ƒã€‚è¿™äº›å¸–å­å¦‚æ­¤å¤æ‚çš„åŸå› æ˜¯å®ƒä¸ä»…æ¶µç›–å¹¿æ³›çš„ä¸»é¢˜ï¼Œè€Œä¸”è¿˜æ¶µç›–å¹¿æ³›çš„ä¸“ä¸šã€‚é€šå¸¸ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ¯ä¸ªéƒ¨åˆ†åœ¨è¡Œä¸šä¸­éƒ½æœ‰ä¸åŒçš„å›¢é˜Ÿï¼Œä»–ä»¬åªå…³æ³¨ä»–ä»¬åœ¨è¿™ä¸ªå¤æ‚æœºå™¨ä¸­çš„â€œé½¿è½®â€ã€‚é€šå¸¸ï¼Œç¡¬ä»¶å¼€å‘äººå‘˜ä¸“æ³¨äºè®¾å¤‡ï¼Œé©±åŠ¨ç¨‹åºå¼€å‘äººå‘˜ä¸“æ³¨äºé©±åŠ¨ç¨‹åºä»£ç ï¼Œè€Œæ“ä½œç³»ç»Ÿå¼€å‘äººå‘˜ä¸“æ³¨äºèµ„æºç®¡ç†ã€‚è¿™äº›å›¢é˜Ÿä¹‹é—´å¾ˆå°‘æœ‰å¤ªå¤šé‡å ï¼Œé™¤éåœ¨ä»–ä»¬çš„è¾¹ç•Œäº¤æ¥ï¼Œä»¥ä¾¿å¦ä¸€æ”¯å›¢é˜Ÿå¯ä»¥è¿æ¥åˆ°å®ƒã€‚\nè¿™äº›å¸–å­æœ‰ç‚¹ç‹¬ç‰¹ï¼Œå› ä¸ºå®ƒä»¬è¯•å›¾å°†ç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œè®°å½•ï¼Œä»¥ä¾¿äºæ¦‚å¿µç†è§£ï¼Œè€Œä¸æ˜¯å®ç°ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨é€šå¸¸åˆ’å®šå›¢é˜Ÿè¾¹ç•Œçš„åœ°æ–¹ï¼Œè¿™äº›å¸–å­æ ¹æœ¬ä¸å…³å¿ƒã€‚æˆ‘é¼“åŠ±è§‰å¾—è¿™ä¸ªè¯é¢˜æœ‰è¶£çš„è¯»è€…åœ¨è‡ªå·±çš„æ—¶é—´é‡Œç»§ç»­æ·±å…¥ç ”ç©¶ã€‚ä¹Ÿè®¸æ‚¨å¯ä»¥äº†è§£ä¸€äº› FPGA å¹¶å¼€å§‹åˆ¶ä½œè‡ªå·±çš„è®¾å¤‡ï¼Œæˆ–è€…æ‚¨å¯ä»¥è´­ä¹°ä¸€ä¸ªè®¾å¤‡å¹¶å¼€å§‹å°è¯•å¯¹å…¶è¿›è¡Œé€†å‘å·¥ç¨‹ï¼Œå¹¶é€šè¿‡æ‚¨è‡ªå·±çš„å®šåˆ¶è½¯ä»¶ä¸å®ƒè¿›è¡Œé€šä¿¡ã€‚\næ€»ç»“ å¸Œæœ›æ‚¨å–œæ¬¢è¿™ç¯‡æ·±å…¥æ¢è®¨ PCIe å†…å­˜ä¼ è¾“çš„æ–‡ç« ï¼è™½ç„¶æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ¶µç›–äº†å¤§é‡ä¿¡æ¯ï¼Œä½†å…”å­æ´æ€»æ˜¯æ›´æ·±ã€‚å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œé€šè¿‡å­¦ä¹ é…ç½®ç©ºé—´è®¿é—®ã€MMIOï¼ˆBARï¼‰å’Œ DMAï¼Œæ‚¨ç°åœ¨å·²ç»æ¶µç›–äº† PCIe ä¸­å¯ç”¨çš„å„ç§å½¢å¼çš„æ•°æ®é€šä¿¡ï¼å¯¹äºè¿æ¥åˆ° PCIe æ€»çº¿çš„æ¯ä¸ªè®¾å¤‡ï¼Œä¸»æœºç³»ç»Ÿå’Œè®¾å¤‡ä¹‹é—´çš„é€šä¿¡å°†é€šè¿‡è¿™ä¸‰ç§æ–¹æ³•ä¸­çš„ä¸€ç§è¿›è¡Œã€‚è®¾å¤‡çš„é“¾æ¥ã€èµ„æºå’Œé©±åŠ¨ç¨‹åºè½¯ä»¶çš„æ‰€æœ‰è®¾ç½®å’Œé…ç½®æœ€ç»ˆéƒ½æ˜¯ä¸ºäº†ä¿ƒè¿›è¿™ä¸‰ç§å½¢å¼çš„é€šä¿¡ã€‚\nè¿™ç¯‡æ–‡ç« èŠ±äº†è¿™ä¹ˆé•¿æ—¶é—´æ‰å‘å¸ƒçš„ä¸€ä¸ªé‡è¦åŸå› æ˜¯ï¼Œä¸ºäº†ç†è§£è¿™ä¸€åˆ‡ï¼Œæˆ‘å¿…é¡»å‘è¯»è€…å±•ç¤ºå¤§é‡ä¿¡æ¯ã€‚å¾ˆéš¾å†³å®šä»€ä¹ˆå€¼å¾—å†™ï¼Œä»€ä¹ˆå¤ªæ·±ä»¥è‡³äºç†è§£å˜å¾—æ¨¡ç³Šã€‚è¿™ä¸ªå†³å®šç˜«ç—ªä½¿åšå®¢å†™ä½œè¿‡ç¨‹èŠ±è´¹çš„æ—¶é—´æ¯”æˆ‘é¢„æœŸçš„è¦é•¿å¾—å¤šã€‚å†åŠ ä¸Šå…¨èŒå·¥ä½œï¼Œå¾ˆéš¾æ‰¾åˆ°æ—¶é—´æ¥æ’°å†™è¿™äº›å¸–å­ã€‚\nåœ¨å³å°†å‘å¸ƒçš„å¸–å­ä¸­ï¼Œæˆ‘æœŸå¾…ç€è®¨è®ºä»¥ä¸‹ä¸€äº›æˆ–æ‰€æœ‰çš„è¯é¢˜ï¼š\nå±‚æ¬¡ç»“æ„çš„ PCIe äº¤æ¢/æ¡¥æ¥å’Œæšä¸¾ æ›´é«˜çº§çš„ DMA ä¸»é¢˜ï¼Œä¾‹å¦‚ DMA é‡æ–°æ˜ å°„ ç”µæºç®¡ç†;è®¾å¤‡å¦‚ä½•â€œç¡çœ â€å’Œâ€œå”¤é†’â€ å¹³å°/OS çš„ä¸­æ–­åŠå…¶åˆ†é…å’Œå¤„ç† è®¾å¤‡çš„ç®€å•é©±åŠ¨ç¨‹åºå¼€å‘ç¤ºä¾‹ ä¸å¾€å¸¸ä¸€æ ·ï¼Œå¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³è¯„è®ºæˆ–è®¨è®ºè¿™ä¸ªç³»åˆ—çš„æŸä¸ªæ–¹é¢ï¼Œä½ æœ€å¥½åœ¨æˆ‘çš„ discord çš„ #hardware é¢‘é“ä¸­é€šè¿‡â€œ@gbpsâ€æ‰¾åˆ°æˆ‘ï¼Œé€†å‘å·¥ç¨‹ discord\nè¯·æœŸå¾…æœªæ¥çš„å¸–å­ï¼\n","permalink":"https://lifeislife.cn/posts/%E8%AF%91%E6%96%87-pcie-part2/","summary":"\u003cblockquote\u003e\n\u003cp\u003eæœ¬æ–‡ç¿»è¯‘è‡ªï¼š\u003ca href=\"https://ctf.re/kernel/pcie/tutorial/dma/mmio/tlp/2024/03/26/pcie-part-2/\"\u003ePCIe ç¬¬ 2 éƒ¨åˆ† - å…³äºå†…å­˜ï¼šMMIOã€DMAã€TLP ç­‰ï¼â€“ çµé­‚çš„é€†å‘å·¥ç¨‹ \u0026mdash; PCIe Part 2 - All About Memory: MMIO, DMA, TLPs, and more! â€“ Reversing Engineering for the Soul\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eåœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº† ECAM ä»¥åŠè½¯ä»¶å’Œç¡¬ä»¶æ•°æ®åŒ…ç½‘ç»œä¸­çš„é…ç½®ç©ºé—´è®¿é—®ã€‚åœ¨è®¨è®ºä¸­ï¼Œå¼•å…¥äº† TLPï¼ˆTransaction Layer Packetsï¼‰çš„æ¦‚å¿µï¼Œè¿™æ˜¯æ‰€æœ‰ PCIe æ•°æ®åœ¨å±‚æ¬¡ç»“æ„ä¸­ç§»åŠ¨çš„é€šç”¨æ•°æ®åŒ…ç»“æ„ã€‚æˆ‘ä»¬è¿˜è®¨è®ºäº†è¿™äº›æ•°æ®åŒ…å¦‚ä½•åƒä»¥å¤ªç½‘ä¸€æ ·ä¼ è¾“ï¼Œå³è·¯ç”±è®¾å¤‡ä½¿ç”¨ä¸€ä¸ªåœ°å€ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯ BDFï¼‰æ¥å‘é€é…ç½®ç©ºé—´æ•°æ®åŒ…ç©¿è¿‡ç½‘ç»œã€‚\u003c/p\u003e","title":"PCIe Part 2 - å…³äºå†…å­˜çš„ä¸€åˆ‡ MMIO DMA TLPs !"},{"content":" æœ¬æ–‡ç¿»è¯‘è‡ªï¼šé¢å‘ Windows åˆå­¦è€…çš„ PCIe å®ç”¨æ•™ç¨‹ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰â€“ çµé­‚çš„é€†å‘å·¥ç¨‹ \u0026mdash; A Practical Tutorial on PCIe for Total Beginners on Windows (Part 1) â€“ Reversing Engineering for the Soul\nHelloï¼æˆ‘æœ€è¿‘ä¸€ç›´åœ¨ä¸ä¸€äº›æœ‹å‹å’ŒåŒäº‹äº¤è°ˆï¼Œä»–ä»¬æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äº PCIe çš„ä¿¡æ¯ï¼Œä½†å¯¹å¤æ‚æ€§æˆ–ç¼ºä¹é€‚åˆåˆå­¦è€…çš„ç®€å•èµ„æºæ„Ÿåˆ°å®³æ€•ã€‚æˆ‘æœ€è¿‘ç»å¸¸ä½¿ç”¨ PCIeï¼Œè§‰å¾—å¯èƒ½å€¼å¾—ä»¥åšå®¢æ–‡ç« çš„å½¢å¼åˆ†äº«æˆ‘çš„ä¸€äº›ç»éªŒã€‚\næœ¬æ–‡ä¸»è¦ä¾›å…·æœ‰è®¡ç®—æœºç³»ç»ŸèƒŒæ™¯å¹¶ä¸”å–œæ¬¢äº²èº«å®è·µçš„äººå‘˜ä½¿ç”¨ã€‚å®ƒä¹Ÿé€‚ç”¨äº PCIe çš„åˆå­¦è€…ï¼Œæˆ–è€…æ˜¯å¯¹é€šç”¨æ¦‚å¿µæœ‰æ‰€ç†è§£ä½†å´æ— æ³•å°†å®ƒä»¬è”ç³»åœ¨ä¸€èµ·çš„äººã€‚\nç¬¬ä¸€ä»¶äº‹æ˜¯ç¬¬ä¸€ä»¶äº‹ï¼šä¸è¦è¢«å“å€’ã€‚æœ‰å¾ˆå¤šé¦–å­—æ¯ç¼©ç•¥è¯å’Œä»¤äººå›°æƒ‘çš„æ¦‚å¿µï¼Œå½“ä½ \u0026quot;æ˜ç™½\u0026quot;æ—¶ï¼Œå®ƒä»¬å°±ä¼šå˜å¾—ç®€å•ã€‚å½“æ—¶è¦è¿ˆå‡ºä¸€æ­¥ï¼Œä¸è¦å®³æ€•æå‡ºé—®é¢˜ï¼ï¼ˆå¦‚æœä½ æƒ³é—®æˆ‘é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘åœ¨ Reverse Engineering Discord çš„ #hardware é¢‘é“@Gbps ping æˆ‘ï¼‰\næˆ‘æ‰“ç®—åœ¨è¿™ä¸ªç³»åˆ—ä¸­åšå‡ ä»¶äº‹ï¼š\nä»è½¯ä»¶æ–¹é¢å°† PCIe åˆ†è§£ä¸ºæˆ‘è®¤ä¸ºæœ€é‡è¦çš„å†…å®¹ï¼Œä»¥å­¦ä¹ å’Œä¸ºç°ä»£ PC/æœåŠ¡å™¨ç³»ç»Ÿæ„å»ºä¸€ä¸ªè‰¯å¥½çš„åŸºçº¿æ€æƒ³æ¨¡å‹ã€‚ å±•ç¤ºä½¿ç”¨å„ç§å·¥å…·ï¼ˆé€šå¸¸æ˜¯ WinDbgï¼‰åœ¨ Windows ä¸Šè°ƒæŸ¥ PCIe å±‚æ¬¡ç»“æ„å’Œè®¾å¤‡çš„å®é™…ç¤ºä¾‹ã€‚ ä¸ºé¿å…é€ æˆæ··æ·†ï¼Œæˆ‘ä¼šæœ‰æ„è¯†åœ°ç®€åŒ–æˆ–ç•¥è¿‡ä¸€äº›å…·ä½“çš„ç»†èŠ‚ã€‚åœ¨è¿™é‡Œï¼Œå¯èƒ½ä¼šæœ‰ä¸€äº›æœ¯è¯­çš„ä½¿ç”¨ä¸å‡†ç¡®ï¼Œç”šè‡³ä¿¡æ¯æœ¬èº«ä¹Ÿå¯èƒ½åœ¨æŠ€æœ¯ä¸Šæœ‰æ‰€å‡ºå…¥ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†å­¦ä¹ æ•´ä¸ªç³»ç»Ÿï¼Œè€Œä¸æ˜¯è§„èŒƒçš„å…·ä½“ç»†èŠ‚ã€‚PCIe æ˜¯å¤æ‚çš„ï¼Œå½“æˆ‘ä»¬å¤„äºåˆå­¦é˜¶æ®µæ—¶ï¼Œé™·å…¥è¿‡å¤šçš„ç»†èŠ‚å’Œç‰¹æ®Šæƒ…å†µæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ æˆ‘ä»¬å¸Œæœ›é€šè¿‡å°†è¿™é¡¹æŠ€æœ¯ä¸ä½ å·²ç»ç†Ÿæ‚‰çš„æ¦‚å¿µç›¸è”ç³»ï¼Œæ¥æ­å¼€å…¶ç¥ç§˜é¢çº±ã€‚PCIe å¹¶æœªé‡æ–°å‘æ˜è½®å­ï¼Œé€šè¿‡ç†è§£ä¸å®ƒç±»ä¼¼çš„æŠ€æœ¯ï¼Œä½ å¯èƒ½å·²ç»æ¯”ä½ è‡ªå·±æ„è¯†åˆ°çš„äº†è§£å¾—æ›´å¤šã€‚ æˆ‘ä¸æ‰“ç®—ç”¨è¿™ä¸ªç³»åˆ—åšä»¥ä¸‹äº‹æƒ…ï¼š\nè¯¦ç»†äº†è§£ä¼ ç»Ÿ PCI æˆ– PCI-Xã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™é¡¹æŠ€æœ¯é™¤äº†å†å²ä»·å€¼ä¹‹å¤–å¹¶ä¸é‡è¦ã€‚ æ¼”ç¤ºå¦‚ä½•ä¸º PCIe è®¾å¤‡ç¼–å†™è®¾å¤‡é©±åŠ¨ç¨‹åºã€‚è¿™æ˜¯éå¸¸ç‰¹å®šäºæ“ä½œç³»ç»Ÿçš„ï¼Œå¹¶ä¸”æ¯”è¿™é‡Œè¦è®¨è®ºçš„è¦é«˜å¾—å¤šã€‚ è¯¦ç»†ä»‹ç» PCIe çš„é“¾è·¯å±‚ã€‚è¯¥è§„èŒƒçš„ä¸€åŠä»¥ä¸Šéƒ½èŠ±åœ¨äº†è¿™ä¸ªä¸»é¢˜ä¸Šï¼Œå¹¶åŒ…å«äº†ä¸€äº›ä¸–ç•Œä¸Šæœ€å‰æ²¿çš„é«˜é€Ÿæ•°æ®ä¼ è¾“æŠ€æœ¯ã€‚æˆ‘ä¸å¤„ç†è¿™è¾¹çš„äº‹æƒ…ï¼Œä½†æ˜¯å°†æ¥æˆ‘å¯èƒ½ä¼šè°ˆè®ºä½¿ç”¨ FPGA æ„å»º PCIe è®¾å¤‡ï¼ˆæˆ‘ä»¥å‰åšè¿‡ï¼‰ã€‚ å¸®åŠ©ä½ ä½¿ç”¨ PCIe åœ¨è§†é¢‘æ¸¸æˆä¸­ä½œå¼Šã€‚æ˜¯çš„ï¼Œå®ƒå­˜åœ¨ã€‚ä¸ï¼Œæˆ‘ä¸ä¼šå¸®å¿™ã€‚ è¿™å¹¶ä¸æ˜¯å¯¹æŠ€æœ¯æˆ–åè®®çš„å…¨é¢ç ”ç©¶ã€‚è¦è·å¾—çœŸæ­£è¯¦å°½çš„äº†è§£ï¼Œä½ åº”è¯¥å‚è€ƒæ°¸è¿œéš¾ä»¥æ‰æ‘¸çš„ PCI-SIG PCI Express åŸºæœ¬è§„èŒƒã€‚è¿™æ˜¯å®ç°æ‰€æœ‰ PCIe ä»£ç æ‰€ä¾æ®çš„è§„èŒƒã€‚ç›®å‰ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è¯¥è§„èŒƒçš„ 6.0 ç‰ˆï¼Œä½† 3.0 åŠæ›´é«˜ç‰ˆæœ¬çš„ç‰ˆæœ¬éƒ½ä¸ç°ä»£ PCIe å®Œå…¨ç›¸å…³ã€‚å¦‚ä½•è·å¾—è¿™ç§æ˜‚è´µçš„è§„æ ¼å¯¹è¯»è€…æ¥è¯´æ˜¯ä¸€é¡¹ç»ƒä¹ ã€‚\næ³¨æ„ï¼šæˆ‘æœ‰æ—¶ä¼šåœ¨â€œPCIâ€å’Œâ€œPCIeâ€ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œå°†æŠ€æœ¯æè¿°ä¸ºä¸€ç§ä¹ æƒ¯çš„åŠ›é‡ã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æœ¬ç³»åˆ—ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å…³äº PCIe çš„ã€‚\nä»€ä¹ˆæ˜¯ PCIeï¼Œæˆ‘ä¸ºä»€ä¹ˆè¦å…³æ³¨ï¼Ÿ PCIe ä»£è¡¨ Peripheral Component Interconnect Expressï¼Œå¤–å›´è®¾å¤‡ç»„ä»¶äº’è”ä¼ è¾“ã€‚å®ƒäº 2003 å¹´é¦–æ¬¡æ¨å‡ºï¼Œæ˜¯ä»æ—©æœŸ PC æ—¶ä»£è¶Šæ¥è¶Šæµè¡Œçš„æ—§ PCI å’Œ PCI-X è§„èŒƒæ¼”å˜è€Œæ¥çš„ï¼ˆä¸º Express æ·»åŠ äº†â€œeâ€ä»¥åŒºåˆ†å®ƒï¼‰ã€‚\nå¤§å¤šæ•°ä½¿ç”¨è®¡ç®—æœºçš„äººéƒ½è®¤ä¸ºå®ƒæ˜¯ä¸»æ¿ä¸Šæ’å…¥æ˜¾å¡æˆ–é€‚é…å™¨å¡çš„ PCIe æ’æ§½ï¼Œä½† PCIe ä¸ä»…ä»…æ˜¯è¿™å‡ ä¸ªæ‰©å±• Portã€‚PCIe æ˜¯ç°ä»£ CPU ä¸è¿æ¥åˆ°ç³»ç»Ÿçš„å‡ ä¹æ‰€æœ‰è®¾å¤‡é€šä¿¡çš„åŸºç¡€ã€‚\nè‡ªæ¨å‡ºä»¥æ¥ï¼ŒPCIe çš„å—æ¬¢è¿ç¨‹åº¦é£™å‡ï¼Œæˆä¸ºçŸ­è·ç¦»é«˜é€Ÿæ•°æ®ä¼ è¾“çš„è¿‘ä¹é€šç”¨çš„æ ‡å‡†ã€‚å‡ ä¹æ‰€æœ‰çš„ M.2 SSD éƒ½ä½¿ç”¨ NVMe over PCIe ä½œä¸ºå…¶ä¼ è¾“åè®®ã€‚Thunderbolt 3 èƒ½å¤Ÿä½¿ç”¨å¤–éƒ¨çº¿å°† PCIe è®¾å¤‡ç›´æ¥åŠ¨æ€çƒ­æ’æ‹”åˆ°ç³»ç»Ÿï¼ˆæ”¯æŒæ‰©å±•åå’Œ eGPU ç­‰æŠ€æœ¯ï¼‰ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒUSB4 æ­£åœ¨æ‰©å±• Thunderbolt 3ï¼Œä»¥ä½¿è¿™ç§ PCIe è·¯ç”±æŠ€æœ¯èƒ½å¤Ÿè¾¾åˆ°å¼€æ”¾çš„ USB è§„èŒƒã€‚CXL ç­‰æ–°å‹ä¼ è¾“åè®®ï¼Œç”¨äºæ•°æ®ä¸­å¿ƒæœåŠ¡å™¨ï¼Œä»¥ PCIe ä¸ºåŸºç¡€è§„èŒƒå¹¶åœ¨å…¶ä¸Šæ‰©å±•ä»–ä»¬çš„ç‰¹åˆ«åŠŸèƒ½ã€‚\nå³ä½¿ä¸ä¹‹é€šä¿¡çš„è®¾å¤‡æœ¬èº«ä¸ä½¿ç”¨ PCIe ä½œä¸ºå…¶ç‰©ç†å±‚åè®®ï¼Œç³»ç»Ÿä»å¿…é¡»ä½¿ç”¨ PCI çš„è½¯ä»¶æ¥å£è¿›è¡Œé€šä¿¡ã€‚è¿™æ˜¯å› ä¸ºç³»ç»Ÿä½¿ç”¨é€‚é…å™¨ï¼ˆé€šå¸¸ç§°ä¸ºä¸»æœºæ§åˆ¶å™¨ï¼‰ï¼Œè¿™äº›é€‚é…å™¨æ˜¯ PCI è®¾å¤‡ï¼Œæœ‰åŠ©äºå°†æ¥è‡ª CPU çš„ PCI è¯·æ±‚è½¬æ¢ä¸ºä¸»æœºæ§åˆ¶å™¨æ”¯æŒçš„ä»»ä½•åè®®æˆ–æ€»çº¿ã€‚ä¾‹å¦‚ï¼Œæ­¤æµ‹è¯•è®¡ç®—æœºä¸Šçš„æ‰€æœ‰ USB 3.1 éƒ½ä½¿ç”¨ USB XHCI åè®®ï¼Œè¯¥åè®®æ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œé€šè¿‡ä¸ USB ä¸»æœºæ§åˆ¶å™¨é€šä¿¡çš„ PCI é©±åŠ¨ç¨‹åºå°† PCIe æ¡¥æ¥åˆ° USBã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ¯‹åº¸ç½®ç–‘ï¼ŒPCI å¦‚ä»Šæ— å¤„ä¸åœ¨ï¼Œå¹¶ä¸”å·²è¢«è®¡ç®—æœºä¸–ç•Œçš„å„ä¸ªéƒ¨åˆ†å®Œå…¨é‡‡ç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å¯¹è¿™é¡¹æŠ€æœ¯æœ‰å¾ˆå¥½çš„ç†è§£ï¼Œä»¥æ›´å¥½åœ°ç†è§£ç°ä»£è®¡ç®—ã€‚\nç ”ç©¶ PCIe å±‚æ¬¡ç»“æ„ - ä¸€ç§åˆ†ç»„äº¤æ¢ç½‘ç»œ ä»ä¼ ç»Ÿçš„ PCI è½¬å˜åˆ° PCIe æœ€é‡è¦çš„å˜åŒ–æ˜¯ä»çœŸæ­£çš„æ€»çº¿æ‹“æ‰‘ç»“æ„è½¬å˜ä¸ºç‚¹å¯¹ç‚¹é“¾æ¥ã€‚ä½ å¯ä»¥å°†è¿™çœ‹ä½œæ˜¯ä»¥å¤ªç½‘é›†çº¿å™¨å‘ä»Šå¤©çš„ä»¥å¤ªç½‘äº¤æ¢æœºçš„æ¼”å˜ã€‚æ¯ä¸ªé“¾æ¥éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç‚¹å¯¹ç‚¹é“¾æ¥ï¼Œå…¶è·¯ç”±æ–¹å¼å°±åƒåœ¨ä¸€ä¸ªåˆ†ç»„äº¤æ¢çš„ä»¥å¤ªç½‘ç½‘ç»œä¸Šçš„ä»¥å¤ªç½‘çº¿ä¸€æ ·ã€‚è¿™æ„å‘³ç€ PCIe å®é™…ä¸Šå¹¶ä¸æ˜¯ä¸€ä¸ªâ€œæ€»çº¿åè®®â€ï¼Œå°½ç®¡åœ¨å„ç§æ–‡çŒ®å’ŒæŠ€æœ¯è§„èŒƒä¸­è®©äººå›°æƒ‘çš„é¢‘ç¹ä½¿ç”¨â€œæ€»çº¿â€è¿™ä¸ªè¯ã€‚äººä»¬å¿…é¡»ä»”ç»†ç†è§£ï¼Œè¿™ä¸ªè¯â€œæ€»çº¿â€å¹¶ä¸æ„å‘³ç€å¤šä¸ª PCIe è®¾å¤‡åœ¨åŒä¸€ä¸ªç‰©ç†é“¾æ¥ä¸Šè¿›è¡Œé€šä¿¡ã€‚æ•°æ®åŒ…ï¼ˆä¹Ÿè¢«ç§°ä¸º TLPsï¼‰ç»è¿‡æ¯ä¸ªå•ç‹¬çš„é“¾æ¥ï¼Œå±‚æ¬¡ç»“æ„ä¸­çš„äº¤æ¢è®¾å¤‡ä½¿ç”¨æ•°æ®åŒ…å†…çš„è·¯ç”±ä¿¡æ¯å°†æ•°æ®åŒ…ä¼ é€åˆ°æ­£ç¡®çš„ Portã€‚\nåœ¨æˆ‘ä»¬è¿›å…¥ PCIe çš„æŠ€æœ¯ç»†èŠ‚ä¹‹å‰ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦è°ˆè°ˆæ•´ä¸ªç³»ç»Ÿçš„å¸ƒå±€ã€‚æˆ‘ä»¬ç ”ç©¶ PCIe å±‚æ¬¡ç»“æ„çš„ç¬¬ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ Windows è®¾å¤‡ç®¡ç†å™¨ã€‚å¤§å¤šæ•°ç†Ÿæ‚‰ Windows çš„äººä»¥å‰éƒ½ç”¨è¿‡å®ƒï¼Œä½†æ²¡æœ‰å¤šå°‘äººçŸ¥é“ View \u0026gt; Devices by Connection ä¸­å‘ç°çš„éå¸¸æ–¹ä¾¿çš„åŠŸèƒ½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é€šè¿‡é€‰æ‹©æ­¤è§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ ¹ PNPï¼ˆPlug-N-Playï¼‰èŠ‚ç‚¹çœ‹åˆ°ç³»ç»Ÿçš„å®Œæ•´æ‹“æ‰‘ã€‚PNP æ ¹èŠ‚ç‚¹æ˜¯ Windows ä¸Šæ‰€æœ‰è®¾å¤‡æ ‘çš„æ ¹ï¼Œæ— è®ºå®ƒä»¬ä½¿ç”¨ä»€ä¹ˆæ€»çº¿æˆ–åè®®ã€‚æ¯ä¸ªè®¾å¤‡ï¼ˆæ— è®ºæ˜¯è™šæ‹Ÿè®¾å¤‡è¿˜æ˜¯ç‰©ç†è®¾å¤‡ï¼‰éƒ½è¢«æšä¸¾å¹¶æ”¾ç½®åœ¨æ­¤ PNP æ ‘ä¸Šã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Device Manager çš„è¿™ä¸ªè§†å›¾æ¥æŸ¥çœ‹è¿™ä¸ªæ ‘çš„å¸ƒå±€ã€‚\nç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ç³»ç»Ÿä¸Šæ‰¾åˆ° PCI è®¾å¤‡çš„å¸ƒå±€ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ„å»º PCI æ ‘åœ¨è¿™å°æœºå™¨ä¸Šçš„å¤–è§‚çš„å¯è§†åŒ–æ¨¡å‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ° PCI æ ‘çš„æ ¹ï¼šRCã€‚RCï¼ˆç¼©å†™ä¸º RCï¼‰æ˜¯ç³»ç»Ÿä¸Šæ‰€æœ‰ PCIe çš„æ‰€æœ‰è€…ã€‚å®ƒç‰©ç†ä¸Šä½äº CPU èŠ¯ç‰‡ä¸Šï¼Œè´Ÿè´£å……å½“æ‰€æœ‰ PCIe è®¾å¤‡æ¥æ”¶å’Œå‘é€æ•°æ®åŒ…çš„ä¸»æœºã€‚å®ƒå¯ä»¥è¢«è®¤ä¸ºæ˜¯è½¯ä»¶ï¼ˆåœ¨ä½ çš„æœºå™¨ä¸Šæ‰§è¡Œçš„æŒ‡ä»¤ï¼‰å’Œç¡¬ä»¶ï¼ˆPCIe å’Œ RAM çš„å¤–éƒ¨ä¸–ç•Œï¼‰ä¹‹é—´çš„æ¡¥æ¢ã€‚\nåœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œå®ƒä½äºè¿™é‡Œçš„ PNP å±‚æ¬¡ç»“æ„ä¸­ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ³¨æ„ï¼šä½ ç°åœ¨å¯èƒ½ä¼šé—®ï¼šâ€œå¦‚æœ PCI ä¸»å¯¼äº†ä¸€åˆ‡ï¼Œä¸ºä»€ä¹ˆ PCI æ ¹å¤åˆç‰©ä¸åœ¨æ ‘çš„é¡¶éƒ¨ï¼Ÿç­”æ¡ˆæ˜¯ç”±äº PCIe æ€»çº¿ä¸æ˜¯å¯åŠ¨æœŸé—´å›ºä»¶æä¾›çš„ç³»ç»Ÿåˆå§‹å¸ƒå±€ã€‚ç›¸åï¼ŒACPIï¼ˆé«˜çº§é…ç½®å’Œç”µæºæ¥å£ï¼‰æ˜¯æè¿° PCIe åˆ°æ“ä½œç³»ç»Ÿå­˜åœ¨çš„ä¸œè¥¿ã€‚è™½ç„¶ä½ æ°¸è¿œä¸ä¼šåœ¨ PC ä¸­çœ‹åˆ°å®ƒï¼Œä½†å¯ä»¥æè¿°ä¸€ä¸ªæ²¡æœ‰ PCI æ€»çº¿çš„ç³»ç»Ÿï¼Œæ‰€æœ‰å†…å®¹éƒ½å®Œå…¨ç”± ACPI æä¾›ã€‚æˆ‘ä»¬ç¨åä¼šè¯¦ç»†è®¨è®º ACPIï¼Œä½†ç°åœ¨ä¸è¦å¤ªæ‹…å¿ƒè¿™ä¸ªï¼Œåªè¦çŸ¥é“ ACPI æ˜¯å›ºä»¶å‘Šè¯‰æˆ‘ä»¬RCåœ¨å“ªé‡Œçš„æ–¹å¼ï¼Œç„¶åå¸®åŠ©æ“ä½œç³»ç»Ÿæšä¸¾æ ‘ä¸­çš„ PCI è®¾å¤‡ã€‚\næ‰€ä»¥ç°åœ¨æˆ‘ä»¬çŸ¥é“ RC æ˜¯ PCIe æ ‘çš„é¡¶éƒ¨ï¼Œç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒä¸‹é¢çš„æ‰€æœ‰å†…å®¹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä¸å‡ºæ‰€æ–™ï¼Œæ­¤ PCI æ€»çº¿ä¸Šæœ‰è®¸å¤šè®¾å¤‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è´Ÿè´£éŸ³é¢‘ã€é›†æˆæ˜¾å¡ã€USBã€ä¸²è¡Œå’Œ SATA çš„å„ç§æ§åˆ¶å™¨ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°å…¶ä¸­ä¸€äº›è®¾å¤‡ç§°ä¸º PCI Express Root Portã€‚Root Port æ˜¯RCä¸Šçš„ä¸€ä¸ª Portï¼Œå¦ä¸€ä¸ª PCIe ç«¯ç‚¹ï¼ˆåˆåç‰©ç†â€œè®¾å¤‡â€ï¼‰æˆ–äº¤æ¢æœºï¼ˆåˆåâ€œè·¯ç”±å™¨â€ï¼‰å¯ä»¥è¿æ¥åˆ°è¯¥ Portã€‚å‡ºäº PCI è§„èŒƒçš„è€ƒè™‘ï¼Œä½ å°†å¬åˆ° Endpoint ç§°ä¸º Type 0 è®¾å¤‡ï¼Œè€Œ Switchï¼ˆæˆ–ç½‘æ¡¥ï¼‰ç§°ä¸º Type 1 è®¾å¤‡ï¼Œå› ä¸ºä¸€ä¸ªè¢«é…ç½®ä¸ºç”¨äºé€šä¿¡çš„è®¾å¤‡ï¼Œå¦ä¸€ä¸ªè¢«é…ç½®ä¸ºç”¨äºè·¯ç”±æ•°æ®åŒ…çš„è®¾å¤‡ã€‚RC å°†å…·æœ‰ä¸å…¶ç‰©ç†æ”¯æŒçš„ä¸€æ ·å¤šçš„ Root Portã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥è¿æ¥åˆ° CPU èŠ¯ç‰‡çš„æ¬¡æ•°è¶Šå¤šã€‚CPU ä¸Šçš„ä¸€äº› Root Port å¯èƒ½ç›´æ¥è·¯ç”±åˆ°ç‰©ç† PCIe æ’æ§½ï¼Œè€Œå…¶ä»– Root Port å¯èƒ½è·¯ç”±åˆ°å…¶ä»–ç±»å‹çš„æ’æ§½ï¼Œå¦‚ NVMe æ’æ§½ã€‚å®ƒä¹Ÿå¯èƒ½è¢«è·¯ç”±åˆ°å¦ä¸€ä¸ª PCIe äº¤æ¢è®¾å¤‡ï¼Œè¯¥è®¾å¤‡å¯ä»¥å°†æ•°æ®åŒ…è·¯ç”±åˆ°å¤šä¸ª Portï¼Œä»è€Œä¸€æ¬¡è·¯ç”±åˆ°å¤šä¸ªç«¯ç‚¹ã€‚\næˆ‘ä¼šç»§ç»­æå‡ºè¿™ä¸ªæ¯”è¾ƒï¼Œä½†æˆ‘è§‰å¾—è¿™å¾ˆé‡è¦â€”â€”å¦‚æœä½ å·²ç»äº†è§£ä»¥å¤ªç½‘äº¤æ¢æœºï¼Œä½ å°±å·²ç»äº†è§£ PCIe äº¤æ¢æœºã€‚ä½ å¯ä»¥æƒ³è±¡è¿™äº› Root Port å°±åƒå°å¼è®¡ç®—æœºä¸Šçš„ä»¥å¤ªç½‘ Portã€‚ä½ å¯ä»¥å°†è¿™äº›ç›´æ¥è¿æ¥åˆ°å…¶ä»–è®¾å¤‡ï¼ˆä¾‹å¦‚æ‘„åƒå¤´ï¼‰ï¼Œä¹Ÿå¯ä»¥å°†å®ƒä»¬è¿æ¥åˆ°åƒå®¶ç”¨è·¯ç”±å™¨/è°ƒåˆ¶è§£è°ƒå™¨è¿™æ ·çš„äº¤æ¢æœºï¼Œè¿™å°†äº¤æ¢æ•°æ®åŒ…ä»¥å…¬å¼€æ›´å¤šè¿æ¥ï¼Œä»¥ä¾¿ä¸æ›´å¤šè®¾å¤‡å’Œæœºå™¨é€šä¿¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»¥å¤ªç½‘çº¿æ˜¯å°†ä¸€ä¸ª PCIe Port è¿æ¥åˆ°å¦ä¸€ä¸ª PCIe Port çš„é“œçº¿ï¼Œä»è€Œä½¿å…¶æˆä¸ºâ€œç‚¹å¯¹ç‚¹â€ã€‚\nè€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬å¼€å§‹ç»˜åˆ¶è¿™ä¸ªå±‚æ¬¡ç»“æ„ï¼ˆéƒ¨åˆ†ï¼‰å›¾è¡¨ï¼Œä»¥ä¾¿æˆ‘ä»¬ç›´è§‚åœ°çœ‹åˆ°å®ƒçš„å…¨éƒ¨å¸ƒå±€ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨ PCI ä¸­ï¼Œç³»ç»Ÿä¸Šçš„æ‰€æœ‰â€œæ€»çº¿â€éƒ½ç”¨ 0 åˆ° 255ï¼ˆå«ï¼‰ä¹‹é—´çš„æ•°å­—æ ‡è¯†ã€‚æ­¤å¤–ï¼Œæ‰€æœ‰è®¾å¤‡éƒ½ä½¿ç”¨â€œè®¾å¤‡ IDâ€å’Œâ€œåŠŸèƒ½ IDâ€è¿›è¡Œæ ‡è¯†ã€‚è¿™é€šå¸¸è¢«æè¿°ä¸º Bus/Device/Functionï¼Œæˆ–ç®€ç§°ä¸º BDFã€‚åœ¨æ›´æ­£ç¡®çš„è§„èŒƒæœ¯è¯­ä¸­ï¼Œè¿™ç§°ä¸º RIDï¼ˆè¯·æ±‚è€… IDï¼‰ã€‚ä¸ºäº†å‡å°‘æ··æ·†ï¼Œæˆ‘å°†å®ƒç§°ä¸º BDFã€‚BDF å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒä¸“é—¨å‘Šè¯‰æˆ‘ä»¬è®¾å¤‡åœ¨ PCIe å±‚æ¬¡ç»“æ„ä¸­çš„ä½ç½®ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä¸ä¹‹é€šä¿¡ã€‚\nå› ä¸ºè¿™äº›éƒ½ä½äºå±‚çº§ç»“æ„çš„é¡¶å±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä¸ºè¿™ä¸ªâ€œbusâ€æä¾›ä¸€ä¸ªæ•°å­—æ ‡è¯†ç¬¦ï¼Œå³â€œBus 0â€æˆ– Root Busã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å³é”®å•å‡»é¡¶çº§è®¾å¤‡å¹¶é€‰æ‹© Properties å¹¶æŸ¥çœ‹ Location æ¥éªŒè¯æ‰€æœ‰è¿™äº›è®¾å¤‡æ˜¯å¦éƒ½æ˜¯ Bus 0 è®¾å¤‡ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¯¹äºæ­¤é›†æˆå›¾å½¢è®¾å¤‡ï¼Œå®ƒçš„ BDF ä¸º 0:2.0ã€‚å®ƒä½äºæ€»çº¿ 0ï¼ˆæ ¹æ€»çº¿ï¼‰ä¸Šï¼Œè®¾å¤‡ ID ä¸º 2ï¼ŒåŠŸèƒ½ ID ä¸º 0ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œè®¾å¤‡â€è¡¨ç¤ºç‰©ç†è®¾å¤‡ï¼Œä¾‹å¦‚æ˜¾å¡ã€‚â€œåŠŸèƒ½â€æ˜¯ç‰©ç†è®¾å¤‡å‘ç³»ç»Ÿå…¬å¼€çš„ç‹¬ç‰¹åŠŸèƒ½ã€‚æ— è®ºå‡ºäºä½•ç§æ„å›¾å’Œç›®çš„ï¼Œéƒ½å¯ä»¥å°†å…¶è§†ä¸ºä¸€ä¸ªå•ç‹¬çš„å®ä½“ã€‚å…¬å¼€å¤šä¸ªåŠŸèƒ½çš„è®¾å¤‡è¢«æ°å½“åœ°ç§°ä¸ºå¤šåŠŸèƒ½è®¾å¤‡ï¼ˆMFDï¼‰ã€‚è¿™æ„å‘³ç€å®ƒå‘ç³»ç»Ÿå…¬å¼€ä¸¤ä¸ªæˆ–å¤šä¸ª PCI è¿æ¥ï¼Œè€Œå®é™…ä¸Šåªæœ‰ä¸€ä¸ªè®¾å¤‡ã€‚æˆ‘ä»¬å¾ˆå¿«å°±ä¼šçœ‹åˆ°ä¸€ä¸ªçœŸæ­£çš„ MFD ç¤ºä¾‹ã€‚\næ•é”çš„è¯»è€…ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬å·²ç»æ‰“ç ´äº†æˆ‘ä¹‹å‰æåˆ°çš„â€œè§„åˆ™â€ï¼šä¸è¿™ä¸ªç‹¬ç‰¹çš„æ€»çº¿ 0 ç›¸è¿çš„è®¾å¤‡æœ‰å¾ˆå¤šã€‚è¿™æ˜¯ PCIe ä¸­â€œç‚¹å¯¹ç‚¹â€è§„åˆ™çš„ç¬¬ä¸€ä¸ªä¾‹å¤–ï¼Œåªæœ‰åœ¨å› ä¸ºæ€»çº¿ 0 ç‰©ç†ä¸Šä½äº CPU çš„ç¡…ç‰‡ä¸Šçš„æƒ…å†µä¸‹æ‰å…è®¸è¿™æ ·åšã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™äº›è®¾å¤‡ä¹‹é—´æ²¡æœ‰ç”µæ°”è·¯å¾„ï¼Œè¿™æ˜¯ä¸€ä¸ªæƒ³è±¡ä¸­çš„è¿æ¥ã€‚æ‰€æœ‰è¿™äº›è®¾å¤‡éƒ½å­˜åœ¨äº CPU å°è£…å†…ï¼Œå¹¶ä½¿ç”¨æé«˜é€Ÿç”µæ°”äº’è¿è¿›è¡Œè·¯ç”±ã€‚è¿™äº›å¤„ç†å™¨äº’è¿ä½¿ç”¨çš„æ˜¯ç‰¹å®šäº CPU ä¾›åº”å•†çš„å†…éƒ¨åè®®ï¼Œå°½ç®¡è¿™äº›åè®®å¹¶æœªå…¬å¼€æ–‡æ¡£ï¼Œä½†æˆ‘ä»¬ä»ç„¶ä»¥ PCIe çš„â€œè¯­è¨€â€ä¸å®ƒè¿›è¡Œé€šä¿¡ã€‚è¿™äº›ç«¯ç‚¹ï¼ˆæ ‡è®°ä¸ºç»¿è‰²ï¼‰ï¼Œç”±äºå…¶ç‰¹æ®Šæ€§è´¨ï¼Œå°†è¢«èµ‹äºˆä¸€ä¸ªç‰¹æ®Šçš„åç§°ï¼šæ ¹å¤åˆé›†æˆç«¯ç‚¹ï¼ˆRC Integrated Endpointsï¼Œç®€ç§° RCIEï¼‰ï¼Œå› ä¸ºå®ƒä»¬ç›´æ¥é›†æˆåœ¨ RC ä¸Šã€‚\nè¿™å¹¶ä¸å¥‡æ€ªï¼Œä½ ä¼šæœŸæœ›é›†æˆ UHD å›¾å½¢ç­‰è®¾å¤‡å°†ç‰©ç†ä½äº CPU ä¸Šï¼ˆå› ä¸ºå®ƒæ˜¯ CPU è§„æ ¼çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è§‚å¯Ÿå…¶ä»– RCIE æ¥äº†è§£ç³»ç»Ÿçš„ä¸€äº›æ›´æœ‰è¶£çš„æ‹“æ‰‘ç»“æ„ï¼Œä¾‹å¦‚è¿™é‡Œä¹Ÿå­˜åœ¨ RAM æ§åˆ¶å™¨ï¼ˆä¸å†…å­˜çš„ DRAM DIMM é€šä¿¡çš„ç¡…ï¼‰å’Œ USB æ§åˆ¶å™¨ï¼ˆä¸å¤–éƒ¨ USB è®¾å¤‡é€šä¿¡çš„ç¡…ï¼‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæŸäº› CPU ä»…æ”¯æŒæŸäº›ç±»å‹çš„ RAM å’Œ USB è§„èŒƒçš„åŸå› â€”â€”å› ä¸ºé€šä¿¡çš„è®¾å¤‡åœ¨ç‰©ç†ä¸Šä½äº CPU ä¸Šï¼Œå¹¶ä¸”ä»…æ”¯æŒå®ƒä»¬åœ¨ç‰©ç†ä¸Šåˆ›å»ºæ—¶è¦æ”¯æŒçš„è§„èŒƒã€‚\næ›´æ–°ï¼šè¿™ç§è¯´æ³•æ˜¯ä¸æ­£ç¡®çš„ã€‚ä¸€äº› IO æ§åˆ¶å™¨ä»ç„¶å¯ä»¥åœ¨ç§°ä¸º PCHï¼ˆIntelï¼‰æˆ–ä¹Ÿç§°ä¸ºèŠ¯ç‰‡ç»„ï¼ˆAMDï¼‰çš„åˆ†ç«‹èŠ¯ç‰‡ä¸Šæ‰¾åˆ°ï¼Œè¯¥èŠ¯ç‰‡ä½äº CPU é™„è¿‘ï¼Œå¹¶ä¸”å…·æœ‰é«˜é€Ÿé“¾è·¯ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒæ˜¯é›†æˆåˆ° CPU èŠ¯ç‰‡ä¸­ã€‚ä¸Šé¢è¿™å¥è¯é”™è¯¯åœ°è¯´ä½ å¯ä»¥åœ¨ç‰©ç† CPU ä¸Šæ‰¾åˆ° USB æ§åˆ¶å™¨ï¼Œè€Œå®ƒæ›´æœ‰å¯èƒ½åœ¨â€œèŠ¯ç‰‡ç»„â€ä¸Šã€‚ä½†æ˜¯ï¼Œä¸ºäº†æé«˜é€Ÿåº¦ï¼Œä¸ RAM é€šä¿¡çš„å†…å­˜æ§åˆ¶å™¨ä½äº CPU èŠ¯ç‰‡ä¸Šã€‚\næ­¤å›¾æ˜¯å±‚æ¬¡ç»“æ„ç¬¬ä¸€çº§çš„æœ€å°åŒ–ç‰ˆæœ¬ï¼Œä½†ç°åœ¨è®©æˆ‘ä»¬é€šè¿‡åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­å±•å¼€å…¶ä½™çš„ Root Ports æ¥æ„å»ºå±‚æ¬¡ç»“æ„çš„å…¶ä½™éƒ¨åˆ†ã€‚\nè¿™æ˜¯å¡«å……çš„å›¾è¡¨çš„æ ·å­ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ³¨æ„ï¼šæˆ‘å·²ç»æ ‡è®°äº† UHD Graphics è®¾å¤‡å’Œæ€»çº¿ 0 çš„ BDFã€‚\nè¿™äº› Root Port ç‰©ç†ä¸Šä½äº CPU ä¸Šï¼Œä½†è¿æ¥åˆ°å®ƒçš„è®¾å¤‡å¹¶ä¸åœ¨å…¶ä¸­ã€‚è¿™å°æœºå™¨çš„å¤–éƒ¨ PCIe æ’æ§½ä¸Šè¿æ¥äº† 3 ä¸ªè®¾å¤‡ï¼šä¸€å— NVIDIA Quadro P400 å›¾å½¢å¡å’Œä¸¤ä¸ª NVMe é©±åŠ¨å™¨ã€‚é€šè¿‡è¿›å…¥è®¾å¤‡ç®¡ç†å™¨ä¸­æ¯ä¸ªè®¾å¤‡çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è·å–å¹¶æ›´æ–°å®ƒä»¬åœ¨è§†è§‰ä¸Šçš„ BDF(æ€»çº¿ã€è®¾å¤‡ã€åŠŸèƒ½) ä¿¡æ¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨æ¯ä¸ª Root Port ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªè®¾å¤‡å·²ç‰©ç†è¿æ¥ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ª Bus ä¸‹éƒ½å…¬å¼€äº†ä¸€ä¸ªæ–°çš„ Busã€‚Root Port å……å½“äº†æ¡¥ï¼Œå®ƒå°†æˆ‘ä»¬ä»æ€»çº¿ 0 æ¡¥æ¥åˆ°æ–°çš„æ€»çº¿ï¼Œå› æ­¤å¿…é¡»ä¸ºæ–°æ€»çº¿åˆ†é…ä¸€ä¸ªæ–°çš„æ•°å­— IDï¼Œå¹¶ä¸”è¯¥ Port ä¸‹çš„æ‰€æœ‰è®¾å¤‡/åŠŸèƒ½éƒ½å°†ç»§æ‰¿è¯¥æ–°æ€»çº¿ç¼–å·ã€‚è¿™ä¸ OS/å›ºä»¶åœ¨å¼•å¯¼æœŸé—´çš„æ€»çº¿æšä¸¾æœŸé—´ä½¿ç”¨çš„é€»è¾‘ç›¸åŒï¼šæ‰€æœ‰ç½‘æ¡¥å’Œäº¤æ¢æœºéƒ½å…¬å¼€ä¸€æ¡æ–°æ€»çº¿ï¼Œå¿…é¡»ä¸ºå…¶åˆ†é…æ–°çš„æ€»çº¿ ID å·ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¤šåŠŸèƒ½è®¾å¤‡çš„å¥½ä¾‹å­ã€‚Quadro P400 æ˜¾å¡å……å½“å…·æœ‰ä¸¤ç§åŠŸèƒ½çš„ MFDã€‚ç¬¬ä¸€ä¸ªå‡½æ•°æ˜¯ 0ï¼ˆBDF 01:00.0ï¼‰ï¼Œæ˜¯æ˜¾å¡è®¾å¤‡æœ¬èº«ã€‚ç¬¬äºŒä¸ªåŠŸèƒ½æ˜¯ 1ï¼ˆBDF 01:00.1ï¼‰ï¼Œå®ƒæ˜¯éŸ³é¢‘æ§åˆ¶å™¨ï¼Œå…è®¸ä» HDMI ç­‰ Port æ’­æ”¾éŸ³é¢‘ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½æ˜¯ä¸åŒçš„â€”â€”å®ƒä»¬ç”¨äºå®Œå…¨ä¸åŒçš„ç›®çš„ï¼Œå¹¶ä¸”å…·æœ‰ä¸ä¹‹å…³è”çš„å•ç‹¬é©±åŠ¨ç¨‹åºå’Œé…ç½®ï¼Œä½†å®ƒä»¬ä»ç„¶ç”±ç›¸åŒçš„ç‰©ç†è®¾å¤‡ï¼ˆå³è®¾å¤‡ 0ï¼‰å®ç°ï¼Œå¹¶ä¸”ä½äºåŒä¸€æ€»çº¿ï¼ˆå³æ€»çº¿ 1ï¼‰ä¸Šã€‚è¿™ä¸ PCIe çš„ç‚¹å¯¹ç‚¹è§„åˆ™æ˜¯ä¸€è‡´çš„ï¼Œä¸€ä¸ªé“¾è·¯ä¸Šåªèƒ½è¿æ¥ä¸€ä¸ªç‰©ç†è®¾å¤‡ï¼Œå› æ­¤æ€»çº¿ä¸Šåªèƒ½å­˜åœ¨ä¸€ä¸ªç‰©ç†è®¾å¤‡ï¼ˆé™¤äº†ä¾‹å¤–ï¼Œæ€»çº¿ 0ï¼‰ã€‚\nä» WinDbg æ¢ç´¢ PCIe å±‚æ¬¡ç»“æ„å’Œè®¾å¤‡ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡ä½¿ç”¨ Device Manager çš„â€œView by Connectionâ€åŠŸèƒ½çœ‹åˆ°äº†æ ‡å‡†çš„ PCI æ€»çº¿å±‚æ¬¡ç»“æ„ã€‚è¿˜æœ‰å¦ä¸€ç§æ›´è¯¦ç»†çš„æ–¹æ³•æ¥è°ƒæŸ¥ PCIe å±‚æ¬¡ç»“æ„ï¼šä½¿ç”¨ WinDbg æä¾›çš„å¯é å†…æ ¸è°ƒè¯•æ‰©å±•ã€‚\næ³¨æ„ï¼šæˆ‘ä»¬å‡è®¾ä½ äº†è§£å¦‚ä½•åœ¨ä¸€å°æœºå™¨ä¸Šè®¾ç½®å†…æ ¸è°ƒè¯•å™¨æ¥ç»§ç»­ä¸‹é¢çš„æ“ä½œã€‚ä½ ä¹Ÿå¯ä»¥ç”¨ LiveKD æ¥å®Œæˆå¤§éƒ¨åˆ†ç»ƒä¹ ã€‚å¦‚æœä½ å¹¶ä¸äº†è§£å¦‚ä½•è®¾ç½®ï¼Œå¯ä»¥å‚è€ƒå¾®è½¯æä¾›çš„æŒ‡å—ï¼šè®¾ç½® KDNETã€‚\næˆ‘å·²ç»è¿æ¥åˆ°äº†ä¸€å°ä¸ä¸Šè¿°ä½¿ç”¨çš„æœºå™¨ä¸åŒçš„æ–°æµ‹è¯•æœºã€‚æˆ‘ä»¬å°†é€šè¿‡è°ƒè¯•å™¨çš„è¾“å‡ºï¼Œæ¥æ¼”ç»ƒå¦‚ä½•ç»˜åˆ¶è¿™å°æœºå™¨çš„å±‚æ¬¡ç»“æ„å›¾ã€‚æˆ‘ä»¬ä¹Ÿå°†å­¦ä¹ å¦‚ä½•é€šè¿‡å…¶é…ç½®å†…å­˜æ¥æŸ¥æ‰¾è®¾å¤‡çš„ä¿¡æ¯ã€‚\næ”¾å…¥è°ƒè¯•å™¨åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ï¼pcitree å‘½ä»¤å¼€å§‹ã€‚è¿™å°†è½¬å‚¨ç³»ç»Ÿä¸Šåˆ—ä¸¾çš„ PCI è®¾å¤‡çš„æ–‡æœ¬æ ‘å½¢å›¾ã€‚\n8: kd\u0026gt; !pcitree Bus 0x0 (FDO Ext ffffdc89b9f75920) (d=0, f=0) 80866f00 devext 0xffffdc89b0759270 devstack 0xffffdc89b0759120 0600 Bridge/HOST to PCI (d=1, f=0) 80866f02 devext 0xffffdc89ba0c74c0 devstack 0xffffdc89ba0c7370 0604 Bridge/PCI to PCI Bus 0x1 (FDO Ext ffffdc89ba0aa190) No devices have been enumerated on this bus. (d=2, f=0) 80866f04 devext 0xffffdc89ba0c94c0 devstack 0xffffdc89ba0c9370 0604 Bridge/PCI to PCI Bus 0x2 (FDO Ext ffffdc89ba0a8190) (d=0, f=0) 10de13bb devext 0xffffdc89ba04f270 devstack 0xffffdc89ba04f120 0300 Display Controller/VGA (d=0, f=1) 10de0fbc devext 0xffffdc89ba051270 devstack 0xffffdc89ba051120 0403 Multimedia Device/Unknown Sub Class (d=3, f=0) 80866f08 devext 0xffffdc89ba0cb4c0 devstack 0xffffdc89ba0cb370 0604 Bridge/PCI to PCI Bus 0x3 (FDO Ext ffffdc89ba08f190) No devices have been enumerated on this bus. (d=5, f=0) 80866f28 devext 0xffffdc89ba0cd4c0 devstack 0xffffdc89ba0cd370 0880 Base System Device/\u0026#39;Other\u0026#39; base system device (d=5, f=1) 80866f29 devext 0xffffdc89ba0cf4c0 devstack 0xffffdc89ba0cf370 0880 Base System Device/\u0026#39;Other\u0026#39; base system device (d=5, f=2) 80866f2a devext 0xffffdc89ba0d14c0 devstack 0xffffdc89ba0d1370 0880 Base System Device/\u0026#39;Other\u0026#39; base system device (d=5, f=4) 80866f2c devext 0xffffdc89ba0d34c0 devstack 0xffffdc89ba0d3370 0800 Base System Device/Interrupt Controller (d=11, f=0) 80868d7c devext 0xffffdc89ba0d84c0 devstack 0xffffdc89ba0d8370 ff00 (Explicitly) Undefined/Unknown Sub Class (d=11, f=4) 80868d62 devext 0xffffdc89ba0da4c0 devstack 0xffffdc89ba0da370 0106 Mass Storage Controller/Unknown Sub Class (d=14, f=0) 80868d31 devext 0xffffdc89ba0dc4c0 devstack 0xffffdc89ba0dc370 0c03 Serial Bus Controller/USB (d=16, f=0) 80868d3a devext 0xffffdc89ba0de4c0 devstack 0xffffdc89ba0de370 0780 Simple Serial Communications Controller/\u0026#39;Other\u0026#39; (d=16, f=3) 80868d3d devext 0xffffdc89ba0e04c0 devstack 0xffffdc89ba0e0370 0700 Simple Serial Communications Controller/Serial Port (d=19, f=0) 808615a0 devext 0xffffdc89ba0e24c0 devstack 0xffffdc89ba0e2370 0200 Network Controller/Ethernet (d=1a, f=0) 80868d2d devext 0xffffdc89ba0e44c0 devstack 0xffffdc89ba0e4370 0c03 Serial Bus Controller/USB (d=1b, f=0) 80868d20 devext 0xffffdc89ba0254c0 devstack 0xffffdc89ba025370 0403 Multimedia Device/Unknown Sub Class (d=1c, f=0) 80868d10 devext 0xffffdc89ba0274c0 devstack 0xffffdc89ba027370 0604 Bridge/PCI to PCI Bus 0x4 (FDO Ext ffffdc89ba0a9190) No devices have been enumerated on this bus. (d=1c, f=1) 80868d12 devext 0xffffdc89ba02c4c0 devstack 0xffffdc89ba02c370 0604 Bridge/PCI to PCI Bus 0x5 (FDO Ext ffffdc89b9fe6190) No devices have been enumerated on this bus. (d=1c, f=3) 80868d16 devext 0xffffdc89ba02e4c0 devstack 0xffffdc89ba02e370 0604 Bridge/PCI to PCI Bus 0x6 (FDO Ext ffffdc89ba0a7190) (d=0, f=0) 12838893 devext 0xffffdc89ba062270 devstack 0xffffdc89ba062120 0604 Bridge/PCI to PCI Bus 0x7 (FDO Ext ffffdc89ba064250) No devices have been enumerated on this bus. (d=1c, f=4) 80868d18 devext 0xffffdc89ba0304c0 devstack 0xffffdc89ba030370 0604 Bridge/PCI to PCI Bus 0x8 (FDO Ext ffffdc89ba0b2190) No devices have been enumerated on this bus. (d=1d, f=0) 80868d26 devext 0xffffdc89ba0364c0 devstack 0xffffdc89ba036370 0c03 Serial Bus Controller/USB (d=1f, f=0) 80868d44 devext 0xffffdc89ba0384c0 devstack 0xffffdc89ba038370 0601 Bridge/PCI to ISA (d=1f, f=2) 80868d02 devext 0xffffdc89ba03a4c0 devstack 0xffffdc89ba03a370 0106 Mass Storage Controller/Unknown Sub Class (d=1f, f=3) 80868d22 devext 0xffffdc89ba03c4c0 devstack 0xffffdc89ba03c370 0c05 Serial Bus Controller/Unknown Sub Class æ³¨æ„ï¼šå¦‚æœä½ é‡åˆ°â€œæ— æ³•è·å– PciFdoExtensionListHead åœ°å€â€çš„é”™è¯¯ï¼Œç¡®ä¿ä½ çš„ç¬¦å·è®¾ç½®æ­£ç¡®ï¼Œå¹¶æ‰§è¡Œ.reload pci.sys æ“ä½œæ¥é‡æ–°åŠ è½½ PCI çš„ç¬¦å·ã€‚\nå½“æ˜¾ç¤ºæ­¤è¾“å‡ºæ—¶ï¼Œç”±äºç©ºæ ¼çš„æ ¼å¼è®¾ç½®æ–¹å¼ï¼Œå¯èƒ½å¾ˆéš¾ç›´è§‚åœ°çœ‹åˆ°â€œtreeâ€ã€‚è§£é‡Šæ­¤è¾“å‡ºçš„æ–¹æ³•æ˜¯æŸ¥çœ‹ Bus 0x æ–‡æœ¬çš„ç¼©è¿›ã€‚ä»»ä½•æ¯” Bus 0x è¡Œè¿›ä¸€æ­¥ç¼©è¿›ä¸€ç»„ç©ºæ ¼çš„ä¸œè¥¿éƒ½æ˜¯è¯¥æ€»çº¿ä¸Šçš„è®¾å¤‡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å™¨ä»¶çš„æ­£ä¸‹æ–¹è¿˜æœ‰å…¶ä»– Bus 0x çº¿è·¯ã€‚è¿™æ„å‘³ç€ Bus 0x çº¿ä¸Šæ–¹çš„å™¨ä»¶æ­£åœ¨å‘æˆ‘ä»¬å…¬å¼€ä¸€æ¡æ–°æ€»çº¿ï¼Œå¹¶ä¸”æ€»çº¿ç¼–å·åœ¨é‚£é‡Œç»™å‡ºã€‚\nè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ­¤è¾“å‡ºçš„ç‰¹å®šéƒ¨åˆ†ï¼š\nBus 0x0 (FDO Ext ffffdc89b9f75920) (d=0, f=0) 80866f00 devext 0xffffdc89b0759270 devstack 0xffffdc89b0759120 0600 Bridge/HOST to PCI (d=1, f=0) 80866f02 devext 0xffffdc89ba0c74c0 devstack 0xffffdc89ba0c7370 0604 Bridge/PCI to PCI Bus 0x1 (FDO Ext ffffdc89ba0aa190) No devices have been enumerated on this bus. (d=2, f=0) 80866f04 devext 0xffffdc89ba0c94c0 devstack 0xffffdc89ba0c9370 0604 Bridge/PCI to PCI Bus 0x2 (FDO Ext ffffdc89ba0a8190) (d=0, f=0) 10de13bb devext 0xffffdc89ba04f270 devstack 0xffffdc89ba04f120 0300 Display Controller/VGA (d=0, f=1) 10de0fbc devext 0xffffdc89ba051270 devstack 0xffffdc89ba051120 0403 Multimedia Device/Unknown Sub Class (d=3, f=0) 80866f08 devext 0xffffdc89ba0cb4c0 devstack 0xffffdc89ba0cb370 0604 Bridge/PCI to PCI Bus 0x3 (FDO Ext ffffdc89ba08f190) No devices have been enumerated on this bus. åœ¨æ­¤è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªè®¾å¤‡æ˜¾ç¤ºçš„ BDFã€‚æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°æ€»çº¿ 0 ä¸Šå­˜åœ¨çš„ä¸€ç»„ Root Portï¼Œè¿™äº› Port ä¸‹é¢æ²¡æœ‰åˆ—ä¸¾ä»»ä½•è®¾å¤‡ï¼Œè¿™æ„å‘³ç€æ’æ§½å°šæœªè¿æ¥åˆ°ä»»ä½•è®¾å¤‡ã€‚\nåœ¨è¿™é‡Œçœ‹åˆ°æ ‘ç»“æ„åº”è¯¥æ›´å®¹æ˜“ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒç”»å‡ºæ¥ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ³¨æ„ï¼šè¿™åªæ˜¯ä¸€ä¸ªå·§åˆï¼Œå³å…¬äº¤å·æ°å¥½ä¸æ¡¥æ¢/PCI çš„è®¾å¤‡ç¼–å·åŒ¹é…åˆ° PCI ç«¯å£ã€‚\nå¦‚ä½ ç°åœ¨æ‰€çŸ¥ï¼Œæ ‡è®°ä¸º Bridge/PCI to PCI çš„è®¾å¤‡å®é™…ä¸Šæ˜¯ Root Portï¼Œè€Œæ€»çº¿ 2 ä¸Šçš„è®¾å¤‡å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½è®¾å¤‡ã€‚ä¸è®¾å¤‡ç®¡ç†å™¨ä¸åŒï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°ï¼pcitree ä¸­çš„è®¾å¤‡çœŸå®åç§°ã€‚ç›¸åï¼Œæˆ‘ä»¬åªå¾—åˆ°äº†ä¸€ä¸ªé€šç”¨çš„ PCI åç§°ï¼Œç”¨äºè®¾å¤‡â€œç±»å‹â€å°†è‡ªå·±å®£ä¼ ä¸ºä»€ä¹ˆã€‚è¿™æ˜¯å› ä¸ºè®¾å¤‡ç®¡ç†å™¨ ä»é©±åŠ¨ç¨‹åºè¯»å–è®¾å¤‡åç§°ï¼Œè€Œä¸æ˜¯ç›´æ¥ä» PCI è¯»å–è®¾å¤‡åç§°ã€‚\nè¦äº†è§£æ›´å¤šå…³äºè¿™ä¸ªæ˜¾ç¤ºæ§åˆ¶å™¨è®¾å¤‡çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤ ï¼devext [pointer]ï¼Œå…¶ä¸­ [pointer] æ˜¯å¸ƒå±€ä¸­å•è¯ devext åé¢çš„å€¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒæ˜¯ï¼š\n(d=0, f=0) 10de13bb devext 0xffffdc89ba04f270 devstack 0xffffdc89ba04f120 0300 Display Controller/VGA !devext 0xffffdc89ba04f270 ä»è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä» Windows ä¸­çš„ PCI æ€»çº¿é©±åŠ¨ç¨‹åºè·å¾—æ­¤ PCI è®¾å¤‡çš„æ‘˜è¦çš„æ‰“å°è¾“å‡ºï¼Œpci.sysï¼š\n8: kd\u0026gt; !devext 0xffffdc89ba04f270 PDO Extension, Bus 0x2, Device 0, Function 0. DevObj 0xffffdc89ba04f120 Parent FDO DevExt 0xffffdc89ba0a8190 Device State = PciStarted Vendor ID 10de (NVIDIA CORPORATION) Device ID 13BB Subsystem Vendor ID 103c (HEWLETT-PACKARD COMPANY) Subsystem ID 1098 Header Type 0, Class Base/Sub 03/00 (Display Controller/VGA) Programming Interface: 00, Revision: a2, IntPin: 01, RawLine 00 Possible Decodes ((cmd \u0026amp; 7) = 7): BMI Capabilities: Ptr=60, power msi express Express capabilities: (BIOS controlled) Logical Device Power State: D0 Device Wake Level: Unspecified WaitWakeIrp: \u0026lt;none\u0026gt; Requirements: Alignment Length Minimum Maximum BAR0 Mem: 01000000 01000000 0000000000000000 00000000ffffffff BAR1 Mem: 10000000 10000000 0000000000000000 ffffffffffffffff BAR3 Mem: 02000000 02000000 0000000000000000 ffffffffffffffff BAR5 Io: 00000080 00000080 0000000000000000 00000000ffffffff ROM BAR: 00080000 00080000 0000000000000000 00000000ffffffff VF BAR0 Mem: 00080000 00080000 0000000000000000 00000000ffffffff Resources: Start Length BAR0 Mem: 00000000f2000000 01000000 BAR1 Mem: 00000000e0000000 10000000 BAR3 Mem: 00000000f0000000 02000000 BAR5 Io: 0000000000001000 00000080 Interrupt Requirement: Line Based - Min Vector = 0x0, Max Vector = 0xffffffff Message Based: Type - Msi, 0x1 messages requested Interrupt Resource: Type - MSI, 0x1 Messages Granted è¿™é‡Œæœ‰å¾ˆå¤šå†…æ ¸çŸ¥é“çš„å…³äºè¿™ä¸ªè®¾å¤‡çš„ä¿¡æ¯ã€‚æ­¤ä¿¡æ¯æ˜¯é€šè¿‡ é…ç½®ç©ºé—´ï¼ˆç¼©å†™ä¸ºâ€œconfig spaceâ€ï¼‰æ£€ç´¢çš„ï¼Œé…ç½®ç©ºé—´ æ˜¯ç³»ç»Ÿä¸Šçš„å†…å­˜éƒ¨åˆ†ï¼Œå…è®¸å†…æ ¸ä»¥æ ‡å‡†åŒ–çš„æ–¹å¼æšä¸¾ã€æŸ¥è¯¢ä¿¡æ¯å’Œè®¾ç½® PCI è®¾å¤‡ã€‚è½¯ä»¶ä»è®¾å¤‡è¯»å–å†…å­˜ä»¥æŸ¥è¯¢ä¾›åº”å•† ID ç­‰ä¿¡æ¯ï¼Œè®¾å¤‡ï¼ˆå¦‚æœå·²æ‰“å¼€ç”µæºï¼‰ä½¿ç”¨è¯¥ä¿¡æ¯è¿›è¡Œå“åº”ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†æ›´å¤šåœ°è®¨è®ºè¿™å®é™…ä¸Šæ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œä½†è¦çŸ¥é“è¿™é‡ŒæŸ¥è¯¢çš„ä¿¡æ¯æ˜¯ä»é…ç½®ç©ºé—´ç”Ÿæˆçš„ã€‚\nå› æ­¤ï¼Œè®©æˆ‘ä»¬åˆ†è§£ä¸€äº›é‡è¦çš„ä¸œè¥¿ï¼š\nDevObjï¼šæŒ‡å‘ ntï¼_DEVICE_OBJECT ç»“æ„çš„æŒ‡é’ˆï¼Œè¯¥ç»“æ„è¡¨ç¤ºå†…æ ¸ä¸­çš„ç‰©ç†è®¾å¤‡ã€‚ Vendor IDï¼šæ³¨å†Œç»™ç‰¹å®šè®¾å¤‡åˆ¶é€ å•†çš„ 16 ä½ ID å·ã€‚æ­¤å€¼æ˜¯æ ‡å‡†åŒ–çš„ï¼ŒPCI-SIG å¿…é¡»ä¸ºæ–°ä¾›åº”å•†åˆ†é…ä¸€ä¸ªå”¯ä¸€ IDï¼Œä»¥ä¾¿å®ƒä»¬ä¸ä¼šé‡å ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™æ˜¯ NVIDIA æ˜¾å¡ã€‚ Device IDï¼šæ‰§è¡Œ PCIe çš„ç‰¹å®šèŠ¯ç‰‡çš„ 16 ä½ ID å·ã€‚ç±»ä¼¼çš„æƒ³æ³•æ˜¯ï¼Œå…¬å¸å¿…é¡»ä¸ºå…¶èŠ¯ç‰‡è¯·æ±‚ä¸€ä¸ªå”¯ä¸€çš„ IDï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šä¸ä»»ä½•å…¶ä»–èŠ¯ç‰‡å†²çªã€‚ Subsystem Vendor IDï¼šèŠ¯ç‰‡æ‰€åœ¨ç”µè·¯æ¿çš„ä¾›åº”å•† IDã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œHPâ€æ˜¯æ˜¾å¡çš„ç”Ÿäº§å•†ï¼Œè€Œâ€œNVIDIAâ€è®¾è®¡äº†å›¾å½¢èŠ¯ç‰‡ã€‚ Subsystem Device IDï¼šèŠ¯ç‰‡æ‰€åœ¨ç”µè·¯æ¿çš„è®¾å¤‡ IDã€‚ Logical Device Power Stateï¼šæ­¤è®¾å¤‡çš„ç”µæºçŠ¶æ€ã€‚PCI ä¸­æœ‰ä¸¤ç§ä¸»è¦çš„ç”µæºçŠ¶æ€ï¼ŒD0 = è®¾å¤‡å·²é€šç”µï¼ŒD3 = è®¾å¤‡å¤„äºä½åŠŸè€—çŠ¶æ€æˆ–å®Œå…¨å…³é—­ã€‚ Requirementsï¼šè®¾å¤‡è¦æ±‚ OS ä¸ºå…¶åˆ†é…çš„å†…å­˜è¦æ±‚ã€‚ç¨åä¼šè¯¦ç»†ä»‹ç»ã€‚ Resourcesï¼šæ“ä½œç³»ç»Ÿåˆ†é…ç»™æ­¤è®¾å¤‡çš„å†…å­˜èµ„æºã€‚æ­¤è®¾å¤‡å·²æ‰“å¼€ç”µæºå¹¶å¯åŠ¨ï¼Œå› æ­¤å·²ä¸ºå…¶åˆ†é…äº†èµ„æºã€‚ Interrupt Requirement/Resourceï¼šä¸ä¸Šè¿°ç›¸åŒï¼Œä½†æ˜¯å¯¹äºä¸­æ–­åˆ™ä¸åŒã€‚ è¦å®é™…è·å–æœ‰å…³æ­¤è®¾å¤‡çš„å®Œæ•´ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ PCI Lookup ä¸­çš„å‡ºè‰²å·¥å…·æ¥æŸ¥è¯¢æœ‰å…³åœ¨ PCI-SIG ä¸­æ³¨å†Œçš„ PCI è®¾å¤‡çš„å…¬å…±ä¿¡æ¯ã€‚è®©æˆ‘ä»¬å°†æœ‰å…³è®¾å¤‡å’Œ Vendor ID çš„ä¿¡æ¯æ”¾å…¥æ¡†ä¸­ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å½“æˆ‘ä»¬æœç´¢æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°è¿™ä¸ªï¼š\n\u003c!DOCTYPE html\u003e Responsive Image è¿™å‘Šè¯‰æˆ‘ä»¬è¯¥è®¾å¤‡æ˜¯ NVIDIA åˆ›å»ºçš„ Quadro K620 æ˜¾å¡ã€‚å­ç³»ç»Ÿ ID å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸ªç‰¹å®šçš„å¡ PCB æ˜¯ç”± HP ç”Ÿäº§çš„ï¼Œè¯¥å…¬å¸å·²è·å¾— NVIDIA çš„è®¸å¯ã€‚\næˆ‘ä»¬åœ¨ ï¼devext ä¸­çœ‹åˆ°çš„å¾ˆå¥½åœ°æ¦‚è¿°äº† pci.sys åœ¨æ‘˜è¦ä¸­ç‰¹åˆ«å…³å¿ƒå‘æˆ‘ä»¬å±•ç¤ºçš„å†…å®¹ï¼Œä½†å®ƒåªè§¦åŠäº†é…ç½®ç©ºé—´ä¸­æ‰€æœ‰ä¿¡æ¯çš„çš®æ¯›ã€‚è¦å°†æ‰€æœ‰ä¿¡æ¯è½¬å‚¨åˆ°é…ç½®ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰©å±•å ï¼pci 100 B D Fï¼Œå…¶ä¸­ BDF æ˜¯æˆ‘ä»¬ç›¸å…³è®¾å¤‡çš„ BDFã€‚100 æ˜¯ä¸€ç»„æ ‡å¿—ï¼ŒæŒ‡å®šæˆ‘ä»¬è¦è½¬å‚¨æœ‰å…³è®¾å¤‡çš„æ‰€æœ‰ä¿¡æ¯ã€‚æ˜¾ç¤ºçš„ä¿¡æ¯å°†æŒ‰ç…§å®ƒåœ¨è®¾å¤‡çš„ config space ä¸­å­˜åœ¨çš„é¡ºåºè¿›è¡Œå¸ƒå±€ã€‚æ¯ä¸ªéƒ¨åˆ†çš„å‰ç¼€æ˜¯ä¸€ä¸ªåç§»é‡ï¼Œä¾‹å¦‚ 02 è¡¨ç¤º Device IDã€‚è¿™æŒ‡å®šäº†ä»ä¸­è¯»å–æ­¤å€¼çš„ config ç©ºé—´çš„åç§»é‡ã€‚è¿™äº›åç§»é‡åœ¨ PCI è§„èŒƒä¸­è¿›è¡Œäº†è¯¦ç»†è¯´æ˜ï¼Œå¹¶ä¸”ä¸ä¼šå‡ºäºå‘åå…¼å®¹æ€§ç›®çš„åœ¨ PCI ç‰ˆæœ¬ä¹‹é—´æ›´æ”¹ã€‚\n8: kd\u0026gt; !pci 100 2 0 0 PCI Configuration Space (Segment:0000 Bus:02 Device:00 Function:00) Common Header: 00: VendorID 10de Nvidia Corporation 02: DeviceID 13bb 04: Command 0507 IOSpaceEn MemSpaceEn BusInitiate SERREn InterruptDis 06: Status 0010 CapList 08: RevisionID a2 09: ProgIF 00 VGA 0a: SubClass 00 VGA Compatible Controller 0b: BaseClass 03 Display Controller 0c: CacheLineSize 0000 0d: LatencyTimer 00 0e: HeaderType 80 0f: BIST 00 10: BAR0 f2000000 14: BAR1 e000000c 18: BAR2 00000000 1c: BAR3 f000000c 20: BAR4 00000000 24: BAR5 00001001 28: CBCISPtr 00000000 2c: SubSysVenID 103c 2e: SubSysID 1098 30: ROMBAR 00000000 34: CapPtr 60 3c: IntLine 00 3d: IntPin 01 3e: MinGnt 00 3f: MaxLat 00 Device Private: 40: 1098103c 00000000 00000000 00000000 50: 00000000 00000001 0023d6ce 00000000 60: 00036801 00000008 00817805 fee001f8 70: 00000000 00000000 00120010 012c8de1 80: 00003930 00453d02 11010140 00000000 90: 00000000 00000000 00000000 00040013 a0: 00000000 00000006 00000002 00000000 b0: 00000000 01140009 00000000 00000000 c0: 00000000 00000000 00000000 00000000 d0: 00000000 00000000 00000000 00000000 e0: 00000000 00000000 00000000 00000000 f0: 00000000 00000000 00000000 00000000 Capabilities: 60: CapID 01 PwrMgmt Capability 61: NextPtr 68 62: PwrMgmtCap 0003 Version=3 64: PwrMgmtCtrl 0008 DataScale:0 DataSel:0 D0 68: CapID 05 MSI Capability 69: NextPtr 78 6a: MsgCtrl 64BitCapable MSIEnable MultipleMsgEnable:0 (0x1) MultipleMsgCapable:0 (0x1) 6c: MsgAddrLow fee001f8 70: MsgAddrHi 0 74: MsgData 0 78: CapID 10 PCI Express Capability 79: NextPtr 00 7a: Express Caps 0012 (ver. 2) Type:LegacyEP 7c: Device Caps 012c8de1 80: Device Control 3930 bcre/flr MRR:1K NS ap pf ET MP:256 RO ur fe nf ce 82: Device Status 0000 tp ap ur fe nf ce 84: Link Caps 00453d02 88: Link Control 0140 es CC rl ld RCB:64 ASPM:None 8a: Link Status 1101 SCC lt lte NLW:x16 LS:2.5 9c: DeviceCaps2 00040013 CTR:3 CTDIS arifwd aor aoc32 aoc64 cas128 noro ltr TPH:0 OBFF:1 extfmt eetlp EETLPMax:0 a0: DeviceControl2 0000 CTVal:0 ctdis arifwd aor aoeb idoreq idocom ltr OBFF:0 eetlp Enhanced Capabilities: 100: CapID 0002 Virtual Channel Capability Version 1 NextPtr 258 0104: Port VC Capability 1 00000000 0108: Port VC Capability 2 00000000 010c: Port VC Control 0000 010e: Port VC Status 0000 0110: VC Resource[0] Cap 00000000 0114: VC Resource[0] Control 800000ff 011a: VC Resource[0] Status 0000 258: CapID 001e L1 PM SS Capability Version 1 NextPtr 128 25c: Capabilities 0028ff1f PTPOV:5 PTPOS:0 PCMRT:255 L1PMS ASPML11 ASPML12 PCIPML11 PCIPML12 260: Control1 00000000 LTRL12TS:0 LTRL12TV:0 CMRT:0 aspml11 aspml12 pcipml11 pcipml12 264: Control2 00000028 TPOV:5 TPOS:0 128: CapID 0004 Power Budgeting Capability Version 1 NextPtr 600 600: CapID 000b Vendor Specific Capability Version 1 NextPtr 000 Vendor Specific ID 0001 - Ver. 1 Length: 024 è¿™ä¸ªè§†å›¾çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å…³é…ç½®ç©ºé—´çš„ Capabilities éƒ¨åˆ†çš„è¯¦ç»†ä¿¡æ¯ã€‚Capabilities æ˜¯ config ç©ºé—´ä¸­çš„ä¸€ç»„ç»“æ„ï¼Œå®ƒå‡†ç¡®æè¿°äº† device èƒ½å¤Ÿå®ç°çš„åŠŸèƒ½ã€‚Capabilities åŒ…æ‹¬é“¾æ¥é€Ÿåº¦å’Œè®¾å¤‡æ”¯æŒçš„ä¸­æ–­ç±»å‹ç­‰ä¿¡æ¯ã€‚PCI è§„èŒƒä¸­æ·»åŠ çš„ä»»ä½•æ–°åŠŸèƒ½éƒ½å°†é€šè¿‡è¿™äº›ç»“æ„è¿›è¡Œå…¬å¸ƒï¼Œè¿™äº›ç»“æ„åœ¨é…ç½®ç©ºé—´ä¸­å½¢æˆäº†ä¸€ä¸ªåŠŸèƒ½é“¾è¡¨ï¼Œå¯ä»¥è¿­ä»£ä»¥å‘ç°è®¾å¤‡çš„æ‰€æœ‰åŠŸèƒ½ã€‚å¹¶éæ‰€æœ‰è¿™äº›åŠŸèƒ½éƒ½ä¸æ“ä½œç³»ç»Ÿç›¸å…³ï¼Œæœ‰äº›åŠŸèƒ½ä»…ä¸æœ¬æ–‡æœªæ¶µç›–çš„ç¡¬ä»¶æ–¹é¢ç›¸å…³ã€‚ç°åœ¨ï¼Œæˆ‘ä¸ä¼šè¯¦ç»†ä»‹ç»è¯¥è®¾å¤‡çš„åŠŸèƒ½ã€‚\nPCIeï¼šä¸€åˆ‡éƒ½ä¸å†…å­˜ç›¸å…³ ç°åœ¨æˆ‘ä»¬å·²ç»ç ”ç©¶äº†å‡ ä¸ªè®¾å¤‡å’Œ PCI æ€»çº¿çš„å±‚æ¬¡ç»“æ„ï¼Œè®©æˆ‘ä»¬è°ˆè°ˆä¸è½¯ä»¶å’Œ PCI è®¾å¤‡çš„é€šä¿¡å®é™…ä¸Šæ˜¯å¦‚ä½•è¿ä½œçš„ã€‚å½“æˆ‘ç¬¬ä¸€æ¬¡å­¦ä¹  PCI æ—¶ï¼Œæˆ‘å¾ˆéš¾ç†è§£å½“è½¯ä»¶ä¸ PCI è®¾å¤‡è¿æ¥æ—¶åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚å› ä¸ºæ•´ä¸ªäº‹åŠ¡å¯¹ä½œä¸ºè½¯ä»¶å¼€å‘äººå‘˜çš„ä½ æ¥è¯´æ˜¯æŠ½è±¡å‡ºæ¥çš„ï¼Œæ‰€ä»¥å¾ˆéš¾ä»…é€šè¿‡ä»è°ƒè¯•å·¥å…·ä¸­æ¢å…¥ PCI å†…å­˜æ¥æ„å»ºæ‰€å‘ç”Ÿçš„äº‹æƒ…çš„å¿ƒæ™ºæ¨¡å‹ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½æä¾›æ¯”æˆ‘åˆšå¼€å§‹æ—¶æ‰€èƒ½å¾—åˆ°çš„æ›´å¥½çš„æ¦‚è¿°ã€‚\né¦–å…ˆï¼Œæˆ‘è¦åšä¸€ä¸ªå¤§èƒ†çš„å£°æ˜ï¼šæ‰€æœ‰ç°ä»£ PCIe é€šä¿¡éƒ½æ˜¯é€šè¿‡å†…å­˜è¯»å†™å®Œæˆçš„ã€‚å¦‚æœä½ äº†è§£ PCIe ä¸­çš„å†…å­˜å¦‚ä½•å·¥ä½œï¼Œä½ å°±ä¼šäº†è§£ PCIe è½¯ä»¶é€šä¿¡çš„å·¥ä½œåŸç†ã€‚ï¼ˆæ˜¯çš„ï¼Œåœ¨æŸäº›å¹³å°ä¸Šè¿˜æœ‰å…¶ä»–ä¼ ç»Ÿçš„é€šä¿¡æ–¹å¼ï¼Œä½†æˆ‘ä»¬ä¸ä¼šè®¨è®ºè¿™äº›æ–¹å¼ï¼Œå› ä¸ºå®ƒä»¬å·²è¢«å¼ƒç”¨ï¼‰ã€‚\nç°åœ¨ï¼Œè®©æˆ‘ä»¬è°ˆè°ˆç°ä»£å¹³å°ä¸Šä¸åŒç±»å‹çš„å†…å­˜ã€‚åœ¨å¯åŠ¨çš„æ—©æœŸï¼Œæ“ä½œç³»ç»Ÿçš„ CPU å°†ä½¿ç”¨è™šæ‹Ÿå†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCPU çœ‹åˆ°çš„å†…å­˜åœ°å€æ˜¯æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸–ç•Œçš„å†…å­˜è§†å›¾ã€‚\nå°±æˆ‘ä»¬çš„ç›®çš„è€Œè¨€ï¼Œç³»ç»Ÿä¸Šæœ‰ä¸¤ç§ç±»å‹çš„ç‰©ç†å†…å­˜ï¼š\nRAM - è¯»å–æˆ–å†™å…¥æ—¶ä»è®¡ç®—æœºä¸Šçš„ DRAM DIMM å­˜å‚¨å’Œæ£€ç´¢çš„åœ°å€ã€‚è¿™å°±æ˜¯å¤§å¤šæ•°äººåœ¨æƒ³åˆ°â€œå†…å­˜â€æ—¶æ‰€æƒ³åˆ°çš„ã€‚ Device Memoryï¼ˆè®¾å¤‡å†…å­˜ï¼‰ - åœ¨è¯»å–æˆ–å†™å…¥æ—¶ä¸ç³»ç»Ÿä¸Šçš„è®¾å¤‡â€œå¯¹è¯â€çš„åœ°å€ã€‚è¿™é‡Œçš„å…³é”®è¯æ˜¯â€œå¯¹è¯â€ã€‚å®ƒä¸ä¼šåœ¨è®¾å¤‡ä¸Šå­˜å‚¨å†…å­˜ï¼Œä¹Ÿä¸ä¼šæ£€ç´¢è®¾å¤‡ä¸Šçš„å†…å­˜ï¼ˆå°½ç®¡è®¾å¤‡å¯èƒ½åŒæ—¶èƒ½å¤ŸåŒæ—¶æ£€ç´¢ä¸¤è€…ï¼‰ã€‚ä½ å¯èƒ½æ­£åœ¨ä¸ä¹‹é€šä¿¡çš„åœ°å€ç”šè‡³å¯èƒ½æ ¹æœ¬ä¸æ˜¯å†…å­˜ï¼Œè€Œæ˜¯ä¸€ä¸ªæ›´æŠ½è±¡çš„â€œdevice registerâ€ ï¼Œç”¨äºé…ç½®è®¾å¤‡çš„å†…éƒ¨å·¥ä½œã€‚è¿™ç§è®¿é—®ä¼šå‘ç”Ÿä»€ä¹ˆå–å†³äºè®¾å¤‡ã€‚ä½ æ‰€åšçš„åªæ˜¯ä¸è®¾å¤‡é€šä¿¡ã€‚ä½ é€šå¸¸ä¼šçœ‹åˆ°è¿™ç§°ä¸º MMIOï¼Œå®ƒå…¨ç§°æ˜¯ Memory-Mapped I/Oã€‚ æ³¨æ„ï¼šæ¯å½“è®¾å¤‡ä¸å“åº”è®¾å¤‡å†…å­˜åŒºåŸŸä¸­è®¿é—®çš„åœ°å€æ—¶ï¼ŒPCI çš„è®¾å¤‡å†…å­˜å°†å§‹ç»ˆè¯»å–â€œå…¨ 1â€æˆ–â€œæ‰€æœ‰ FFâ€ã€‚è¿™æ˜¯äº†è§£è®¾å¤‡ä½•æ—¶å®é™…å“åº”çš„ä¾¿æ·æ–¹æ³•ã€‚å¦‚æœä½ çœ‹åˆ°æ‰€æœ‰ FFï¼Œåˆ™è¡¨ç¤ºä½ æ­£åœ¨è¯»å–æ— æ•ˆçš„è®¾å¤‡åœ°å€ã€‚\nåˆå­¦è€…è®¤ä¸ºæ‰€æœ‰ç‰©ç†å†…å­˜éƒ½æ˜¯ RAMï¼Œè¿™æ˜¯é”™è¯¯çš„ã€‚å½“è½¯ä»¶ä¸ PCI åŒºåŸŸä¸­çš„ PCI è®¾å¤‡é€šä¿¡æ—¶ï¼Œå®ƒä¸ä¼šä» RAM è¯»å–å’Œå†™å…¥æ•°æ®ã€‚ç›¸åï¼Œè¯¥è®¾å¤‡ä» RC æ¥æ”¶ä¸€ä¸ªæ•°æ®åŒ…ï¼ˆTLPï¼Œä¼ è¾“å±‚æ•°æ®åŒ…ï¼‰ï¼Œå½“ PCI åŒºåŸŸå†…çš„åœ°å€è¢«è¯»/å†™æ—¶ï¼Œä½ çš„ CPU ä¼šç«‹å³è‡ªåŠ¨ç”Ÿæˆè¯¥æ•°æ®åŒ…ã€‚ä½ æ— éœ€åœ¨è½¯ä»¶ä¸­åˆ›å»ºè¿™äº›æ•°æ®åŒ…ï¼Œæ‰€æœ‰è¿™äº›æ•°æ®åŒ…éƒ½æ˜¯åœ¨è®¿é—®æ­¤å†…å­˜åç«‹å³å®Œå…¨åœ¨åå°ç”Ÿæˆçš„ã€‚åœ¨è½¯ä»¶ä¸­ï¼Œä½ ç”šè‡³æ— æ³•æŸ¥çœ‹æˆ–æ•è·è¿™äº›æ•°æ®åŒ…ï¼Œè€Œéœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„ç¡¬ä»¶æµ‹è¯•è®¾å¤‡æ¥æ‹¦æˆªå’ŒæŸ¥çœ‹æ­£åœ¨å‘é€çš„æ•°æ®åŒ…ã€‚ç¨åä¼šè¯¦ç»†ä»‹ç»ã€‚\nå¦‚æœæœ‰å¸®åŠ©ï¼Œè¯·å°†ç‰©ç†å†…å­˜è§†ä¸ºè®¾å¤‡çš„æ˜ å°„ã€‚RAM æ˜¯ä¸ºä½ æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸­çš„è®¾å¤‡ã€‚PCI è¿˜ä¼šè‡ªåŠ¨ä¸ºä½ æ˜ å°„åŒºåŸŸã€‚å°½ç®¡å®ƒä»¬æˆªç„¶ä¸åŒä¸”è¡Œä¸ºä¹Ÿéå¸¸ä¸åŒï¼Œä½†å®ƒä»¬åœ¨è½¯ä»¶ä¸­çœ‹èµ·æ¥æ˜¯ç›¸åŒçš„ã€‚\nåœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¸å‹ç³»ç»Ÿå¦‚ä½•å°†è™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°ç‰©ç†å†…å­˜ã€‚è¯·æ³¨æ„ï¼Œæœ‰ä¸¤ä¸ª RAM åŒºåŸŸå’Œä¸¤ä¸ª PCI å†…å­˜åŒºåŸŸã€‚è¿™æ˜¯å› ä¸ºæŸäº›è¾ƒæ—§çš„ PCI è®¾å¤‡åªèƒ½å¯»å€ 32 ä½å†…å­˜ã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„ RAM ä¸é€‚åˆ 4GB ä»¥ä¸‹çš„åœ°å€çª—å£ï¼Œåˆ™ä¸€äº› RAM ä¼šä¸Šç§»åˆ° 4GB ä»¥ä¸Šã€‚ç”±äºä½ çš„å¤„ç†å™¨æ”¯æŒ 64 ä½åœ°å€ï¼Œå› æ­¤è¿™ä¸æ˜¯é—®é¢˜ã€‚æ­¤å¤–ï¼Œåœ¨ 4GB è¡Œä¸Šæ–¹ä¸ºæ”¯æŒ 64 ä½åœ°å€çš„ PCI è®¾å¤‡åˆ›å»ºç¬¬äºŒä¸ªçª—å£ã€‚ç”±äº 4GB åŒºåŸŸå¯èƒ½éå¸¸æœ‰é™ï¼Œå› æ­¤è®¾å¤‡æœ€å¥½åœ¨ 4GB ä»¥ä¸Šç§»åŠ¨å°½å¯èƒ½å¤šçš„å†…å­˜ï¼Œä»¥å…å¼„ä¹±ä¸‹é¢çš„ç©ºé—´ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥è°ˆè°ˆæˆ‘ä»¬å·²ç»è§è¿‡å­˜å‚¨å™¨ï¼šé…ç½®ç©ºé—´ï¼ˆConfiguration Spaceï¼‰ã€‚\né…ç½®ç©ºé—´ä½äºä¸€ä¸ªåä¸º ECAMï¼ˆExtended Configuration Access Managementï¼Œæ‰©å±•é…ç½®è®¿é—®ç®¡ç†ï¼‰çš„å†…å­˜éƒ¨åˆ†ã€‚å› ä¸ºå®ƒæ˜¯ä¸€ç§è®¾å¤‡å†…å­˜ï¼Œæ‰€ä»¥è¦ä»å†…æ ¸ï¼ˆä½¿ç”¨è™šæ‹Ÿå†…å­˜ï¼‰è®¿é—®è¿™æ®µå†…å­˜ï¼Œå†…æ ¸å¿…é¡»è¯·æ±‚å†…å­˜ç®¡ç†å™¨å°†è¿™éƒ¨åˆ†ç‰©ç†å†…å­˜æ˜ å°„åˆ°ä¸€ä¸ªè™šæ‹Ÿåœ°å€ä¸Šã€‚ç„¶åï¼Œè½¯ä»¶æŒ‡ä»¤å¯ä»¥ä½¿ç”¨æ˜ å°„çš„è™šæ‹Ÿåœ°å€æ¥ä»ç‰©ç†åœ°å€è¯»å–å’Œå†™å…¥ã€‚åœ¨ Windows ä¸Šï¼Œå®šä½å’Œæ˜ å°„è¿™æ®µå†…å­˜çš„å·¥ä½œéƒ¨åˆ†ç”±pci.syså¤„ç†ï¼Œéƒ¨åˆ†ç”±acpi.syså¤„ç†ï¼Œè¿˜æœ‰éƒ¨åˆ†ç”±å†…æ ¸ï¼ˆå…·ä½“æ¥è¯´æ˜¯ HALï¼‰å¤„ç†ã€‚\næ³¨æ„ï¼šé€šå¸¸ï¼Œåœ¨ Windows ä¸­æ˜ å°„è®¾å¤‡å†…å­˜çš„æ–¹å¼æ˜¯é€šè¿‡ MmMapIoSpaceExï¼Œè¿™æ˜¯é©±åŠ¨ç¨‹åºå¯ç”¨äºæ˜ å°„ç‰©ç†è®¾å¤‡å†…å­˜çš„ APIã€‚ä½†æ˜¯ï¼Œä¸ºäº†è¿›è¡Œé…ç½®ç©ºé—´è®¿é—®ï¼Œè½¯ä»¶å¿…é¡»ä½¿ç”¨ HalGetBusDataByOffset å’Œ HalSetBusDataByOffset æ¥ç¡®ä¿ pci.sys çš„å†…éƒ¨çŠ¶æ€ä¸ä½ æ­£åœ¨æ‰§è¡Œçš„é…ç½®ç©ºé—´è¯»/å†™ä¿æŒåŒæ­¥ã€‚å¦‚æœä½ å°è¯•è‡ªå·±æ˜ å°„å’Œæ›´æ”¹é…ç½®ç©ºé—´ï¼Œåˆ™å¯èƒ½ä¼šä½¿ pci.sys çŠ¶æ€ä¸åŒæ­¥å¹¶å¯¼è‡´è“å±æ­»æœºã€‚\næ³¨æ„ï¼šECAM/PCI åŒºåŸŸåœ¨ç‰©ç†å†…å­˜ä¸­çš„ä½ç½®å–å†³äºå¹³å°ã€‚å¼•å¯¼æ—¶çš„å›ºä»¶å°†åˆ†é…ç³»ç»Ÿç‰©ç†å†…å­˜çš„æ‰€æœ‰ç‰¹æ®ŠåŒºåŸŸã€‚ç„¶åï¼Œå›ºä»¶ä¼šåœ¨å¼•å¯¼æœŸé—´å‘æ“ä½œç³»ç»Ÿå…¬å¸ƒè¿™äº›åŒºåŸŸçš„ä½ç½®ã€‚åœ¨ x86-64 ç³»ç»Ÿä¸Šï¼ŒECAM åŒºåŸŸå°†ä½¿ç”¨ç§°ä¸º MCFG çš„è¡¨ï¼ˆç»“æ„ï¼‰é€šè¿‡ ACPI ä»å›ºä»¶è¿›è¡Œé€šä¿¡ã€‚ç°åœ¨çŸ¥é“ä½¿ç”¨ä»€ä¹ˆç‰¹å®šåè®®æ¥æ£€ç´¢æ­¤ä¿¡æ¯ä¸æ˜¯å¾ˆé‡è¦å—ï¼Œåªéœ€äº†è§£æ“ä½œç³»ç»Ÿä»å›ºä»¶ä¸­æ£€ç´¢è¿™äº›åŒºåŸŸçš„åœ°å€ï¼Œå›ºä»¶å†³å®šäº†å°†å®ƒä»¬æ”¾åœ¨å“ªé‡Œã€‚\nå› æ­¤ï¼Œä¸ºäº†è¿›è¡Œé…ç½®ç©ºé—´è®¿é—®ï¼Œå†…æ ¸å¿…é¡»å°†é…ç½®ç©ºé—´ï¼ˆECAMï¼‰æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ã€‚è¿™æ˜¯è¿™æ ·çš„äº‹æƒ…ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨æ­¤ä¹‹åï¼Œå†…æ ¸ç°åœ¨å¯ä»¥ä½¿ç”¨è™šæ‹Ÿæ˜ å°„ä¸è®¾å¤‡çš„é…ç½®ç©ºé—´è¿›è¡Œé€šä¿¡ã€‚ä½†æ˜¯è¿™ä¸ªé…ç½®ç©ºé—´æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿå—¯ï¼Œå®ƒåªæ˜¯æˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„ä¸€å †é…ç½®ç©ºé—´ç»“æ„å—ã€‚è®¾å¤‡å¯èƒ½å…·æœ‰çš„æ¯ä¸ªå¯èƒ½çš„ BDF éƒ½åœ¨ ECAM ä¸­æä¾›äº†ç©ºé—´æ¥å¯¹å…¶è¿›è¡Œé…ç½®ã€‚å®ƒçš„å¸ƒå±€æ–¹å¼æ˜¯ï¼Œè®¾å¤‡çš„ BDF ä¼šå‘Šè¯‰ä½ å…¶é…ç½®ç©ºé—´åœ¨ ECAM ä¸­çš„ç¡®åˆ‡ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»™å®šä¸€ä¸ª BDFï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—è¦æ·»åŠ åˆ° ECAM åŒºåŸŸåŸºæ•°çš„åç§»é‡ï¼Œä»¥ä¾¿ä¸è®¾å¤‡é€šä¿¡ï¼Œå› ä¸ºæ¯ä¸ªåŠŸèƒ½çš„æ‰€æœ‰ ECAM åŒºåŸŸçš„å¤§å°éƒ½ç›¸åŒã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä»è¿™å¼ å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹çœ‹åˆ° PCIe çš„æšä¸¾å®é™…ä¸Šæ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚å½“æˆ‘ä»¬è¯»å›æœ‰æ•ˆçš„é…ç½®ç©ºé—´æ•°æ®æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“è¯¥ BDF ä¸Šå­˜åœ¨è®¾å¤‡ã€‚å¦‚æœæˆ‘ä»¬æ”¹ä¸ºè¯»å› FFï¼Œæˆ‘ä»¬çŸ¥é“è®¾å¤‡ä¸åœ¨è¯¥æ’æ§½æˆ–åŠŸèƒ½ä¸­ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¸ä¼šä¸ºäº†æšä¸¾æ‰€æœ‰è®¾å¤‡è€Œæš´åŠ›ç ´è§£æ¯ä¸ªåœ°å€ï¼Œå› ä¸ºç”±äº MMIO çš„å¼€é”€ï¼Œä»£ä»·æ¯”è¾ƒå¤§ã€‚ä½†æ˜¯ï¼Œè¿™ç§è›®åŠ›çš„é«˜çº§ç‰ˆæœ¬æ˜¯æˆ‘ä»¬å¦‚ä½•å¿«é€Ÿæšä¸¾æ‰€æœ‰å·²é€šç”µå¹¶åœ¨é…ç½®ç©ºé—´ä¸Šå“åº”æˆ‘ä»¬çš„è®¾å¤‡ã€‚\næŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ· - è½¯ä»¶é…ç½®ç©ºé—´è®¿é—® ç°åœ¨æˆ‘ä»¬äº†è§£äº†å¦‚ä½•è®¿é—®é…ç½®ç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸¤ç«¯ï¼ˆå±‚æ¬¡ç»“æ„å’Œ MMIOï¼‰æ”¾åœ¨ä¸€èµ·ï¼Œä»¥æŸ¥çœ‹ä»å†…æ ¸æ¨¡å¼è¯»å–é…ç½®ç©ºé—´çš„æŒ‡ä»¤çš„å®Œæ•´è·¯å¾„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è®©æˆ‘ä»¬é€æ­¥å®Œæˆæ­¤å¤„é‡‡ç”¨çš„æ•´ä¸ªè·¯å¾„ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼š\nåœ¨å†…æ ¸æ¨¡å¼ä¸‹è¿è¡Œçš„æŸäº›ä»£ç ä» ECAM è™šæ‹Ÿæ˜ å°„ä¸­è¯»å–åç§»é‡ã€‚ è™šæ‹Ÿæ˜ å°„ç”± CPU çš„é¡µè¡¨è½¬æ¢ä¸º ECAM ä¸­çš„ç‰©ç†åœ°å€ã€‚ è¯»å–ç‰©ç†åœ°å€ï¼Œå¯¼è‡´å†…éƒ¨ CPU äº’è¿ä¸­å‘ç”Ÿæ“ä½œï¼Œä»¥é€šçŸ¥RCè®¿é—®ã€‚ RCå°†è¯·æ±‚çš„æ•°æ®åŒ…åŒ–ç‰ˆæœ¬ç”Ÿæˆä¸º TLPï¼Œè¯¥ TLP æ˜¾ç¤ºâ€œè¯»å–è®¾å¤‡ 02:00.0 çš„åç§»é‡ 0x0 å¤„çš„å€¼â€ï¼Œå¹¶é€šè¿‡å±‚æ¬¡ç»“æ„å‘é€è¯¥è¯·æ±‚ã€‚ TLP ç”±æ€»çº¿ 2 ä¸Šçš„æ­¤æ˜¾ç¤ºæ§åˆ¶å™¨æ¥æ”¶ï¼Œå¹¶çœ‹åˆ°å®ƒæ˜¯ä¸€ä¸ªé…ç½®ç©ºé—´ TLPã€‚ç°åœ¨ï¼Œå®ƒçŸ¥é“ä½¿ç”¨åŒ…å«åç§»é‡ 0x0 å¤„çš„å€¼å†…å®¹çš„é…ç½®ç©ºé—´å“åº” TLP è¿›è¡Œå“åº”ã€‚ ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å“åº”ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å“åº”è·¯å¾„æ²¡é‚£ä¹ˆæœ‰è¶£äº†ã€‚è®¾å¤‡ä»¥å«æœ‰åç§» 0 å¤„çš„å€¼ï¼ˆæˆ‘ä»¬çŸ¥é“è¿™æ˜¯ä¾›åº”å•† IDï¼‰çš„ç‰¹æ®Š TLP è¿›è¡Œå“åº”ã€‚è¿™ä¸ªæ•°æ®åŒ…æ‰¾åˆ°å›åˆ°è¯·æ±‚è€…ï¼ˆå³RCï¼‰ï¼Œç„¶åäº’è¿é€šçŸ¥ CPU æ›´æ–° rax çš„å€¼ä¸º 0x10DEï¼Œè¿™æ˜¯ NVIDIA æ˜¾å¡çš„ä¾›åº”å•† IDã€‚ç„¶åï¼ŒCPU å¼€å§‹æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚\nå¦‚ä½ æ‰€æƒ³é‚£æ ·ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œè®¿é—®å¯èƒ½æ¯”é€šè¿‡å…¨éƒ¨çš„ TLP ç”Ÿæˆçš„ RAM æ…¢å¾ˆå¤šã€‚è¿™ç¡®å®æ˜¯äº‹å®ï¼Œå¹¶ä¸”è¿™ä¹Ÿæ˜¯å­˜åœ¨æ¯”è¿™ç§ MMIO æ–¹æ³•æ›´å¤šçš„æ–¹å¼å»ä¸è®¾å¤‡é€šä¿¡çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»å¦ä¸€ç§æ–¹æ³•ï¼Œå³ DMAï¼Œä»¥åŠå®ƒå¯¹äºç¡®ä¿è½¯ä»¶èƒ½å¤Ÿå°½å¯èƒ½å¿«åœ°åœ¨ CPU å’Œè®¾å¤‡ä¹‹é—´ä¼ è¾“å†…å­˜çš„è‡³å…³é‡è¦æ€§ã€‚\nç»ƒä¹ ï¼šé€šè¿‡ WinDbg æ‰‹åŠ¨è®¿é—® ECAM æˆ‘ä»¬çœ‹äº†ä¸€ä¸‹ config space access ç†è®ºä¸Šæ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œä½†è®©æˆ‘ä»¬è‡ªå·±ç”¨ debugger åšåŒæ ·çš„äº‹æƒ…ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›ï¼š\næ‰¾åˆ° ECAM åœ¨ç³»ç»Ÿä¸Šçš„ä½ç½®ã€‚ è®¡ç®—åˆ° ECAM çš„åç§»é‡ä»¥è¯»å–è®¾å¤‡çš„ä¾›åº”å•† IDã€‚ä¸ºæ­¤ï¼Œæˆ‘é€‰æ‹©äº† NVIDIA æ˜¾å¡ä¸Šçš„Multimedia Device @ 02:00.1 åœ¨è¯¥åœ°å€æ‰§è¡Œç‰©ç†å†…å­˜è¯»å–ä»¥æ£€ç´¢å€¼ã€‚ ç¬¬ä¸€æ­¥æ˜¯æ‰¾åˆ° ECAMã€‚é‰´äº ECAM çš„ä½ç½®æ¥è‡ª ACPIï¼Œç‰¹åˆ«æ˜¯ ACPI ä¸­çš„ MCFG è¡¨ï¼Œè¿™éƒ¨åˆ†æœ‰ç‚¹æ£˜æ‰‹ã€‚è¿™æ˜¯ firmware ç”¨æ¥å‘Šè¯‰æ“ä½œç³»ç»Ÿ ECAM åœ¨ç³»ç»Ÿçš„ç‰©ç†å†…å­˜æ˜ å°„ä¸­çš„ä½ç½®çš„è¡¨ã€‚å…³äº ACPI ä»¥åŠå¦‚ä½•å°†å…¶ä¸ PCI ç»“åˆä½¿ç”¨ï¼Œæœ‰å¾ˆå¤šå†…å®¹è¦è®¨è®ºï¼Œä½†ç°åœ¨ï¼Œæˆ‘å°†å¿«é€Ÿè·³åˆ°ç›¸å…³éƒ¨åˆ†ä»¥å®ç°æˆ‘ä»¬çš„ç›®æ ‡ã€‚\nåœ¨æˆ‘ä»¬çš„è°ƒè¯•å™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨!acpicacheæ¥è½¬å‚¨æ‰€æœ‰ ACPI è¡¨çš„ç¼“å­˜å‰¯æœ¬ã€‚è¦è½¬å‚¨ MCFGï¼Œè¯·ç‚¹å‡»é“¾æ¥ MCFG æ¥è½¬å‚¨å…¶å†…å®¹ï¼Œæˆ–æ‰‹åŠ¨é”®å…¥!acpitable MCFGï¼š\n8: kd\u0026gt; !acpicache Dumping cached ACPI tables... XSDT @(fffff7b6c0004018) Rev: 0x1 Len: 0x0000bc TableID: SLIC-WKS MCFG @(fffff7b6c0005018) Rev: 0x1 Len: 0x00003c TableID: SLIC-WKS FACP @(fffff7b6c0007018) Rev: 0x4 Len: 0x0000f4 TableID: SLIC-WKS APIC @(fffff7b6c0008018) Rev: 0x2 Len: 0x000afc TableID: SLIC-WKS DMAR @(fffff7b6c000a018) Rev: 0x1 Len: 0x0000c0 TableID: SLIC-WKS HPET @(fffff7b6c015a018) Rev: 0x1 Len: 0x000038 TableID: SLIC-WKS TCPA @(ffffdc89b07209f8) Rev: 0x2 Len: 0x000064 TableID: EDK2 SSDT @(ffffdc89b0720a88) Rev: 0x2 Len: 0x0003b3 TableID: Tpm2Tabl TPM2 @(ffffdc89b0720e68) Rev: 0x3 Len: 0x000034 TableID: EDK2 SSDT @(ffffdc89b07fc018) Rev: 0x1 Len: 0x0013a1 TableID: Plat_Wmi UEFI @(ffffdc89b07fd3e8) Rev: 0x1 Len: 0x000042 TableID: BDAT @(ffffdc89b07fd458) Rev: 0x1 Len: 0x000030 TableID: SLIC-WKS MSDM @(ffffdc89b07fd4b8) Rev: 0x3 Len: 0x000055 TableID: SLIC-WKS SLIC @(ffffdc89b07fd538) Rev: 0x1 Len: 0x000176 TableID: SLIC-WKS WSMT @(ffffdc89b07fd6d8) Rev: 0x1 Len: 0x000028 TableID: SLIC-WKS WDDT @(ffffdc89b0721a68) Rev: 0x1 Len: 0x000040 TableID: SLIC-WKS SSDT @(ffffdc89b2580018) Rev: 0x2 Len: 0x086372 TableID: SSDT PM NITR @(ffffdc89b26063b8) Rev: 0x2 Len: 0x000071 TableID: SLIC-WKS ASF! @(ffffdc89b2606548) Rev: 0x20 Len: 0x000074 TableID: HCG BGRT @(ffffdc89b26065e8) Rev: 0x1 Len: 0x000038 TableID: TIANO DSDT @(ffffdc89b0e94018) Rev: 0x2 Len: 0x021c89 TableID: SLIC-WKS 8: kd\u0026gt; !acpitable MCFG HEADER - fffff7b6c0005018 Signature: MCFG Length: 0x0000003c Revision: 0x01 Checksum: 0x3c OEMID: HPQOEM OEMTableID: SLIC-WKS OEMRevision: 0x00000001 CreatorID: INTL CreatorRev: 0x20091013 BODY - fffff7b6c000503c fffff7b6`c000503c 00 00 00 00 00 00 00 00-00 00 00 d0 00 00 00 00 ................ fffff7b6`c000504c 00 00 00 ff 00 00 00 00 ........ è¦äº†è§£å¦‚ä½•é˜…è¯»æ­¤è¡¨ï¼Œé—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ ACPI è§„èŒƒã€‚ä¸å…¶è®©ä½ è¿™æ ·åšï¼Œä¸å¦‚çœå»ä½ çš„ç—›è‹¦ï¼ŒæŠŠç›¸å…³éƒ¨åˆ†æ‹‰åˆ°è¿™é‡Œï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç”±äº ï¼acpitable å‘½ä»¤å·²ç»è§£æå¹¶æ˜¾ç¤ºæ­¤è¡¨ä¸­ Creator Revision ä¹‹å‰çš„æ‰€æœ‰å†…å®¹ï¼Œå› æ­¤ BODY çš„å‰ 8 ä¸ªå­—èŠ‚å°†æ˜¯åç§»é‡ 36 å¤„çš„ 8 ä¸ªå­—èŠ‚çš„ Reserved å†…å­˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è·³è¿‡è¿™ 8 ä¸ªå­—èŠ‚å¹¶æ‰¾åˆ°ä»¥ä¸‹ç»“æ„ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ­¤å­—èŠ‚çš„å‰ 8 ä¸ªå­—èŠ‚æ˜¯ Reserved åé¢çš„åŒºåŸŸçš„ ECAM åŒºåŸŸçš„åœ°å€ã€‚è¿™æ„å‘³ç€ ECAM åŸºå€çš„åç§»é‡ä¸ºåç§»é‡ 8ã€‚\nBODY - fffff7b6c000503c fffff7b6`c000503c 00 00 00 00 00 00 00 00-00 00 00 d0 00 00 00 00 ................ fffff7b6`c000504c 00 00 00 ff 00 00 00 00 ........ å¯¹äºè¿™ä¸ªç³»ç»Ÿï¼ŒECAM ä½äºåœ°å€ï¼š0xD0000000ã€‚ï¼ˆè¯·åˆ«å¿˜äº†ä»¥å°ç«¯åºæ¥è¯»å–è¿™ä¸ªåœ°å€ï¼‰\nä¸ºäº†éªŒè¯æˆ‘ä»¬å¾—åˆ°äº†æ­£ç¡®çš„åœ°å€ï¼Œè®©æˆ‘ä»¬è¯»å–00:00.0çš„ä¾›åº”å•† IDï¼Œè¿™ä¹Ÿæ˜¯ ECAM çš„å‰ä¸¤ä¸ªå­—èŠ‚ã€‚æˆ‘ä»¬å°†ä½¿ç”¨!dwå‘½ä»¤æ¥å®Œæˆè¿™ä¸ªæ“ä½œï¼Œè¯¥å‘½ä»¤ä»£è¡¨çš„dump physical wordï¼ˆæ„Ÿå¹å·ä»£è¡¨ç‰©ç†ï¼‰ã€‚è¿™ä¸ªå‘½ä»¤è¦æ±‚ä½ æŒ‡å®šä¸€ä¸ªç¼“å­˜ç±»å‹ï¼Œåœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œæ€»æ˜¯ä½¿ç”¨[uc]æˆ–è€…è¯´æœªç¼“å­˜ã€‚å®ƒè¿˜æä¾›äº†ä¸€ä¸ªé•¿åº¦ï¼Œè¿™æ˜¯ç”± L1 æŒ‡å®šè¦è¯»å–çš„ word çš„æ•°é‡ã€‚\næ³¨æ„ï¼šè¯·åŠ¡å¿…å§‹ç»ˆå°†ç›®æ ‡è®¾å¤‡å†…å­˜çš„å¤§å°ä¸æˆ‘ä»¬ä»è½¯ä»¶ä¸­è¯»å–çš„å¤§å°ç›¸åŒ¹é…ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬è¦è¯»å–çš„å€¼æ˜¯ 16 ä½å€¼ï¼ˆå¦‚ä¾›åº”å•† IDï¼‰ï¼Œåˆ™å¿…é¡»æ‰§è¡Œ 16 ä½è¯»å–ã€‚æ‰§è¡Œ 32 ä½è¯»å–å¯èƒ½ä¼šæ›´æ”¹è®¾å¤‡å“åº”çš„ç»“æœã€‚å¯¹äºé…ç½®ç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–ä¾›åº”å•† ID çš„æ›´å¤§å¤§å°ï¼Œä½†å¹¶éåœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯å¦‚æ­¤ã€‚æœ€å¥½å…»æˆå°†è¯»å–å¤§å°ä¸ç›®æ ‡å¤§å°åŒ¹é…çš„ä¹ æƒ¯ï¼Œä»¥é¿å…ä»»ä½•æ„å¤–ç»“æœã€‚è¯·è®°ä½ï¼šè®¾å¤‡å†…å­˜ä¸æ˜¯ RAMã€‚\nç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬è¯»å– 00ï¼š00.0 çš„ VendorIDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n8: kd\u0026gt; !dw [uc] D0000000 L1 #d0000000 8086 æˆ‘ä»¬è¯»å–çš„ç»“æœå€¼ä¸º 0x8086ï¼Œå®ƒæ°å¥½æ˜¯ Intel çš„ä¾›åº”å•† IDã€‚ä¸ºäº†éªŒè¯è¿™æ˜¯æ­£ç¡®çš„ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ ï¼pci è½¬å‚¨ç›¸åŒçš„å†…å®¹ã€‚\n8: kd\u0026gt; !pci 100 0 0 0 PCI Configuration Space (Segment:0000 Bus:00 Device:00 Function:00) Common Header: 00: VendorID 8086 Intel Corporation ä»ç‰¹å®šå‡½æ•°è¯»å– VendorID ç°åœ¨è¦è®¡ç®—æˆ‘ä»¬å¸Œæœ›ä¸ä¹‹é€šä¿¡çš„å¦ä¸€ä¸ªå‡½æ•°ï¼ˆ02ï¼š00.1 çš„ NVIDIA å¡ï¼‰çš„ ECAM åœ°å€ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä½¿ç”¨ç›®æ ‡å‡½æ•°çš„ BDF å’Œä¸€äº›ä½æ•°å­¦è®¡ç®—åˆ° ECAM çš„åç§»é‡æ¥æ‰‹åŠ¨æ‰§è¡Œâ€œæ•°ç»„è®¿é—®â€ã€‚\nè®¡ç®—æ–¹æ³•å­˜åœ¨äº PCIe è§„èŒƒä¸­ï¼Œè¯¥è§„èŒƒä¸ºæ€»çº¿ã€å™¨ä»¶å’Œå‡½æ•°åˆ†é…äº†ä¸€å®šæ•°é‡çš„ ECAM ä½æ¥è®¡ç®—åç§»é‡ï¼š\n| 27 - 20 | 19 - 15 | 14 - 12 | 11 - 0 | | Bus Nr | Dev Nr | Function Nr | Register | é€šè¿‡å¡«å†™ BDF å¹¶æ ¹æ®æ¯ä¸ªå…ƒç´ çš„ä½ä½ç½®å¯¹ç»“æœè¿›è¡Œç§»ä½å’Œ OR è¿ç®—ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºè¦æ·»åŠ åˆ° ECAM çš„åç§»é‡ã€‚\næˆ‘å°†ä½¿ç”¨ pythonï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ æƒ³è¦çš„è®¡ç®—å™¨ï¼š\n\u0026gt;\u0026gt;\u0026gt; hex(0xD0000000 + ((2 \u0026lt;\u0026lt; 20) | (0 \u0026lt;\u0026lt; 15) | (1 \u0026lt;\u0026lt; 12))) \u0026#39;0xd0201000\u0026#39; è¿™æ„å‘³ç€ 02ï¼š00.1 çš„ ECAM åŒºåŸŸä½äº 0xD0201000ã€‚\nç°åœ¨ï¼Œè¦ä»å‡½æ•°ä¸­è¯»å– VendorID çš„å€¼ï¼š\n8: kd\u0026gt; !dw [uc] D0201000 L1 #d0201000 10de ç»“æœæ˜¯ 0x10deï¼Œæˆ‘ä»¬ä»ä¸Šé¢çŸ¥é“å®ƒæ˜¯ NVIDIA Corporationï¼è¿™æ„å‘³ç€æˆ‘ä»¬æˆåŠŸåœ°ä» ECAM ä¸­è¯»å–äº†æ­¤å‡½æ•°çš„ç¬¬ä¸€ä¸ªå€¼ã€‚\næ€»ç»“ è¿™ç¯‡å¸–å­æœ€ç»ˆæ¯”æˆ‘é¢„æœŸçš„è¦é•¿å¾—å¤šï¼æˆ‘ä¸ä¼šç»§ç»­è¿™ç¯‡æ–‡ç« ï¼Œè€Œæ˜¯å°†å…¶æ‹†åˆ†å¹¶éšç€æ—¶é—´çš„æ¨ç§»å……å®è¯¥ç³»åˆ—ã€‚å…³äº PCIeï¼Œæˆ‘æƒ³ä»‹ç»çš„ä¸»é¢˜å¤ªå¤šäº†ï¼Œä½†ç©ºé—²æ—¶é—´å´å¾ˆå°‘ï¼Œä½†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†æ›´è¯¦ç»†åœ°ä»‹ç»è®¾å¤‡ BARï¼ˆä¸€ç§ç‰¹å®šäºè®¾å¤‡çš„ MMIO å½¢å¼ï¼‰å’Œ DMAï¼ˆç›´æ¥å†…å­˜è®¿é—®ï¼‰ã€‚æœ¬ç³»åˆ—å°†ç»§ç»­ä½¿ç”¨ä¸ä»¥å‰ç›¸åŒçš„ç§Ÿæˆ·ï¼Œæ›´ä¾§é‡äºç†è§£è€Œä¸æ˜¯å…·ä½“ç»†èŠ‚ã€‚\nå¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªå¯¹ PCIe ä¸–ç•Œçš„å°å°äº†è§£ï¼æœŸå¾…æ›´å¤šç²¾å½©ã€‚\nå•å‡»æ­¤å¤„æŸ¥çœ‹ç¬¬ 2 éƒ¨åˆ†ï¼\n","permalink":"https://lifeislife.cn/posts/%E8%AF%91%E6%96%87-pcie-part1/","summary":"\u003cblockquote\u003e\n\u003cp\u003eæœ¬æ–‡ç¿»è¯‘è‡ªï¼š\u003ca href=\"https://ctf.re/windows/kernel/pcie/tutorial/2023/02/14/pcie-part-1/\"\u003eé¢å‘ Windows åˆå­¦è€…çš„ PCIe å®ç”¨æ•™ç¨‹ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰â€“ çµé­‚çš„é€†å‘å·¥ç¨‹ \u0026mdash; A Practical Tutorial on PCIe for Total Beginners on Windows (Part 1) â€“ Reversing Engineering for the Soul\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eHelloï¼æˆ‘æœ€è¿‘ä¸€ç›´åœ¨ä¸ä¸€äº›æœ‹å‹å’ŒåŒäº‹äº¤è°ˆï¼Œä»–ä»¬æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äº PCIe çš„ä¿¡æ¯ï¼Œä½†å¯¹å¤æ‚æ€§æˆ–ç¼ºä¹é€‚åˆåˆå­¦è€…çš„ç®€å•èµ„æºæ„Ÿåˆ°å®³æ€•ã€‚æˆ‘æœ€è¿‘ç»å¸¸ä½¿ç”¨ PCIeï¼Œè§‰å¾—å¯èƒ½å€¼å¾—ä»¥åšå®¢æ–‡ç« çš„å½¢å¼åˆ†äº«æˆ‘çš„ä¸€äº›ç»éªŒã€‚\u003c/p\u003e","title":"PCIe Part 1 - é¢å‘ Windows åˆå­¦è€…çš„ PCIe å®ç”¨æ•™ç¨‹"},{"content":"åŒæ­¥ Strava æ•°æ® GearAutomator æ˜¯ä¸€ä¸ªå¯ä»¥ç”Ÿæˆ Strava è¿åŠ¨çƒ­å›¾å’Œå¤©æ°”å¡ç‰‡çš„å·¥å…·ï¼Œè®¿é—® GearAutomatorï¼Œç‚¹å‡»çš„Connect with StravaæŒ‰é’®ï¼Œç„¶åè¾“å…¥ Strava çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚\næ ¹æ®è¿åŠ¨æ•°æ®é‡ä¸åŒï¼Œç”Ÿæˆæ—¶é—´ä¼šæœ‰æ‰€ä¸åŒï¼Œè¯·å‹¿å…³é—­é¡µé¢ï¼Œç­‰å¾…ç”Ÿæˆå®Œæˆã€‚Stravaçš„APIé™åˆ¶å¾ˆä¸¥æ ¼ï¼ŒåŒæ­¥æ•°æ®å¾ˆæ…¢ï¼Œè¿æ¥ä¸ŠStravaä¹‹åï¼Œå»ºè®®å¹²å…¶ä»–äº‹æƒ…ï¼Œç­‰å¾…æ•°æ®åŒæ­¥å®Œæˆï¼Œä¸ç”¨é¢‘ç¹åˆ·æ–°é¡µé¢ã€‚æˆ‘ç¬¬ä¸€æ¬¡åŒæ­¥æ•°æ®ä¸çŸ¥é“èŠ±äº†å¤šä¹…ä¸€ç›´æ²¡æœ‰æ˜¾ç¤ºçƒ­å›¾ï¼Œä»¥ä¸ºè¿™ä¸ªå·¥å…·å¤±æ•ˆäº†ï¼Œåæ¥æŸä¸€å¤©å†æ¬¡è®¿é—®ï¼Œå‘ç°çƒ­å›¾å·²ç»ç”Ÿæˆäº†ã€‚\næŸ¥çœ‹çƒ­å›¾ Zwiftè™šæ‹Ÿéª‘è¡Œä¹Ÿä¼šä½¿ç”¨çœŸå®çš„GPXæ•°æ®ï¼Œæ‰€ä»¥åœ¨çƒ­åŠ›åœ°å›¾ä¸­ä¹Ÿèƒ½çœ‹åˆ°æœ‰è½¨è¿¹ï¼Œè™šæ‹Ÿéª‘è¡Œä¼šç”¨ç´«è‰²è½¨è¿¹è¡¨ç¤ºï¼ŒçœŸå®éª‘è¡Œä¼šç”¨ç»¿è‰²è½¨è¿¹è¡¨ç¤ºã€‚å›¾ä¸­ç´«è‰²è½¨è¿¹å°±æ˜¯å·´é»é¦™è¡—å†²åˆºã€‚ç»¿è‰²è½¨è¿¹æ˜¯ä¸€æ¬¡è·¯éª‘ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image é…ç½®å¤©æ°”å¡ç‰‡ Strava è®¢é˜…ç”¨æˆ·å¯ä»¥ç”Ÿæˆæ¯æ¬¡è¿åŠ¨çš„å¤©æ°”å¡ç‰‡ï¼Œå¯ä»¥åœ¨è¿åŠ¨ç®€ä»‹ä¸­çœ‹åˆ°è¿™æ¬¡è¿åŠ¨æ—¶çš„å¤©æ°”æƒ…å†µï¼Œå¦‚å›¾æ‰€ç¤ºï¼š\næ²¡æœ‰è®¢é˜…çš„ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªå·¥å…·æ¥ç”Ÿæˆï¼Œåœ¨å¤©æ°”é…ç½®é¡µé¢ï¼Œå¼€å¯å³å¯ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å½“ä¸‹æ¬¡æœ‰æ–°çš„æ•°æ®åŒæ­¥åˆ°Stravaæ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨æ ‡é¢˜ä¸‹é¢ç”Ÿæˆå¤©æ°”ä¿¡æ¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœä½ æƒ³è‡ªå®šä¹‰å¤©æ°”å¡ç‰‡çš„æ ·å¼ï¼Œå¯ä»¥åœ¨å¤©æ°”å¡ç‰‡é…ç½®é¡µé¢è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚å°†è‹±æ–‡è½¬æ¢ä¸ºä¸­æ–‡ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä½ å¯ä»¥ç›´æ¥å¤åˆ¶ä¸‹é¢çš„æ–‡æœ¬ï¼Œæ›¿æ¢å³å¯ï¼š\næ¸©åº¦: ${temperature} ä½“æ„Ÿæ¸©åº¦: ${apparentTemperature} å¤©æ°”çŠ¶å†µ: ${skyCon} æ¹¿åº¦: ${humidity} æ°”å‹: ${pressure} äº‘é‡: ${cloudRate} é£é€Ÿ: ${windSpeed} èƒ½è§åº¦: ${visibility} ç©ºæ°”è´¨é‡: ç©ºæ°”è´¨é‡æŒ‡æ•°(AQI): ${aqi} ç»†é¢—ç²’ç‰©(PM2.5): ${pm25} å¯å¸å…¥é¢—ç²’ç‰©(PM10): ${pm10} è‡­æ°§(O3): ${o3} äºŒæ°§åŒ–ç¡«(SO2): ${so2} äºŒæ°§åŒ–æ°®(NO2): ${no2} ä¸€æ°§åŒ–ç¢³(CO): ${co} ç´«å¤–çº¿å¼ºåº¦(UV): ${uv} åœ°é¢æ¥æ”¶çš„å¤ªé˜³è¾å°„(DSWRF): ${dswrf} æ¸©åº¦: ${startTemperature} - ${endTemperature} ä½“æ„Ÿæ¸©åº¦: ${startApparentTemperature} - ${endApparentTemperature} å¤©æ°”çŠ¶å†µ: ${startSkyCon} - ${endSkyCon} æ¹¿åº¦: ${startHumidity} - ${endHumidity} æ°”å‹: ${startPressure} - ${endPressure} äº‘é‡: ${startCloudRate} - ${endCloudRate} é£é€Ÿ: ${startWindSpeed} - ${endWindSpeed} èƒ½è§åº¦: ${startVisibility} - ${endVisibility} ç©ºæ°”è´¨é‡: ç©ºæ°”è´¨é‡æŒ‡æ•°(AQI): ${startAqi} - ${endAqi} ç»†é¢—ç²’ç‰©(PM2.5): ${startPM25} - ${endPM25} å¯å¸å…¥é¢—ç²’ç‰©(PM10): ${startPM10} - ${endPM10} è‡­æ°§(O3): ${startO3} - ${endO3} äºŒæ°§åŒ–ç¡«(SO2): ${startSO2} - ${endSO2} äºŒæ°§åŒ–æ°®(NO2): ${startNO2} - ${endNO2} ä¸€æ°§åŒ–ç¢³(CO): ${startCO} - ${endCO} ç´«å¤–çº¿å¼ºåº¦(UV): ${startUV} - ${endUV} åœ°é¢æ¥æ”¶çš„å¤ªé˜³è¾å°„(DSWRF): ${startDswrf} - ${endDswrf} ","permalink":"https://lifeislife.cn/posts/gearautomator%E7%94%9F%E6%88%90strava%E8%BF%90%E5%8A%A8%E7%83%AD%E5%9B%BE%E5%92%8C%E5%A4%A9%E6%B0%94%E5%8D%A1%E7%89%87/","summary":"\u003ch1 id=\"åŒæ­¥-strava-æ•°æ®\"\u003eåŒæ­¥ Strava æ•°æ®\u003c/h1\u003e\n\u003cp\u003eGearAutomator æ˜¯ä¸€ä¸ªå¯ä»¥ç”Ÿæˆ Strava è¿åŠ¨çƒ­å›¾å’Œå¤©æ°”å¡ç‰‡çš„å·¥å…·ï¼Œè®¿é—® \u003ca href=\"https://www.gearaut.com\"\u003eGearAutomator\u003c/a\u003eï¼Œç‚¹å‡»çš„\u003ccode\u003eConnect with Strava\u003c/code\u003eæŒ‰é’®ï¼Œç„¶åè¾“å…¥ Strava çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚\u003c/p\u003e\n\u003cp\u003eæ ¹æ®è¿åŠ¨æ•°æ®é‡ä¸åŒï¼Œç”Ÿæˆæ—¶é—´ä¼šæœ‰æ‰€ä¸åŒï¼Œè¯·å‹¿å…³é—­é¡µé¢ï¼Œç­‰å¾…ç”Ÿæˆå®Œæˆã€‚Stravaçš„APIé™åˆ¶å¾ˆä¸¥æ ¼ï¼ŒåŒæ­¥æ•°æ®å¾ˆæ…¢ï¼Œè¿æ¥ä¸ŠStravaä¹‹åï¼Œå»ºè®®å¹²å…¶ä»–äº‹æƒ…ï¼Œç­‰å¾…æ•°æ®åŒæ­¥å®Œæˆï¼Œä¸ç”¨é¢‘ç¹åˆ·æ–°é¡µé¢ã€‚æˆ‘ç¬¬ä¸€æ¬¡åŒæ­¥æ•°æ®ä¸çŸ¥é“èŠ±äº†å¤šä¹…ä¸€ç›´æ²¡æœ‰æ˜¾ç¤ºçƒ­å›¾ï¼Œä»¥ä¸ºè¿™ä¸ªå·¥å…·å¤±æ•ˆäº†ï¼Œåæ¥æŸä¸€å¤©å†æ¬¡è®¿é—®ï¼Œå‘ç°çƒ­å›¾å·²ç»ç”Ÿæˆäº†ã€‚\u003c/p\u003e","title":"GearAutomatorç”ŸæˆStravaè¿åŠ¨çƒ­å›¾å’Œå¤©æ°”å¡ç‰‡"},{"content":"æƒ³äº†è§£å¦‚ä½•æä¾› APIï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ CMN æ¨¡å—æ˜¯å¦‚ä½•ä½¿ç”¨ API çš„ï¼Œåœ¨æ–‡ä»¶module/cmn700/src/mod_cmn700.cæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š\n// module/cmn700/src/mod_cmn700.c static struct mod_system_info_get_info_api *system_info_api; int cmn700_start(fwk_id_t id) { ... status = system_info_api-\u0026gt;get_system_info(\u0026amp;system_info); if (status == FWK_SUCCESS) { chip_id = system_info-\u0026gt;chip_id; multi_chip_mode = system_info-\u0026gt;multi_chip_mode; } ... } ä»–è°ƒç”¨äº†system_info_api-\u0026gt;get_system_infoè¿™ä¸ªå‡½æ•°ï¼Œå®é™…è¿™å°±æ˜¯ mod_system_info æš´éœ²ç»™ mod_cmn700 çš„ä¸€ä¸ª APIã€‚ç”¨äºè·å–ç³»ç»Ÿä¿¡æ¯ã€‚\nä¸ºä½•è¿™ä¸ªé™æ€å˜é‡system_info_apiå°±èƒ½è°ƒç”¨åˆ°mod_system_infoçš„å‡½æ•°å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­æœç´¢ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š\n// module/cmn700/src/mod_cmn700.c static int cmn700_bind(fwk_id_t id, unsigned int round) { ... if (fwk_id_is_type(id, FWK_ID_TYPE_MODULE)) { /* Bind to system info module to obtain multi-chip info */ status = fwk_module_bind( FWK_ID_MODULE(FWK_MODULE_IDX_SYSTEM_INFO), FWK_ID_API(FWK_MODULE_IDX_SYSTEM_INFO, MOD_SYSTEM_INFO_GET_API_IDX), \u0026amp;system_info_api); return status; } ... } åœ¨cmn700_bindå‡½æ•°ä¸­ï¼Œè°ƒç”¨äº†fwk_module_bindå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ç»‘å®šä¸€ä¸ªæ¨¡å—çš„ APIï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡è¿™ä¸ª API è°ƒç”¨æ¨¡å—çš„å‡½æ•°ã€‚fwk_module_bindå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æä¾› API çš„æ¨¡å—çš„ IDï¼Œæ¯”å¦‚å½“å‰æ˜¯æ¨¡å—system_infoçš„ IDï¼Œå¦‚æœæ˜¯è¦ç”¨ USB çš„ APIï¼Œé‚£ä¹ˆå°±æ˜¯ USB æ¨¡å—çš„ IDã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ API çš„ IDï¼Œè¿™ä¸ª ID æ˜¯åœ¨æ¨¡å—çš„å¤´æ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œæ¯”å¦‚mod_system_info.hä¸­å®šä¹‰äº†MOD_SYSTEM_INFO_GET_API_IDXï¼Œè¿™ä¸ªå®å®šä¹‰çš„å€¼å°±æ˜¯ API çš„ IDã€‚ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ API çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆå°±æ˜¯å¼€å¤´æåˆ°çš„é™æ€å˜é‡çš„åœ°å€ï¼Œå®ƒæ˜¯å®šä¹‰åœ¨ä½¿ç”¨ API çš„æ¨¡å—ä¸­çš„ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡ API çš„æŒ‡é’ˆè°ƒç”¨æ¨¡å—çš„å‡½æ•°ã€‚å¯¹äº USB æ¨¡å—ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ä½¿ç”¨åˆ° USB çš„æ¨¡å—ä¸­å®šä¹‰ä¸€ä¸ªé™æ€å˜é‡ã€‚\nfwk_module_bindåšäº†ä»€ä¹ˆå‘¢ï¼Ÿè¿›å…¥è¯¥å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå›è°ƒäº†mod_system_infoçš„process_bind_requestå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯system_info_process_bind_requestå‡½æ•°ã€‚\n// framework/src/fwk_module.c int fwk_module_bind(fwk_id_t target_id, fwk_id_t api_id, const void *api) { ... status = fwk_mod_ctx-\u0026gt;desc-\u0026gt;process_bind_request( fwk_module_ctx.bind_id, target_id, api_id, (const void **)api); ... } system_info_process_bind_requestå‡½æ•°çš„ä½œç”¨æ˜¯æ ¹æ® API çš„ ID è¿”å› API çš„æŒ‡é’ˆã€‚å®ƒæŠŠget_system_info_apiçš„åœ°å€èµ‹å€¼ç»™äº†apiã€‚è¿™å°±å®ç°äº† API çš„æš´éœ²ã€‚ç»è¿‡è¿™ä¸ªå‡½æ•°ï¼Œsystem_info_apiå°±æŒ‡å‘äº†get_system_info_apiã€‚å®é™…å°±æ˜¯æˆ‘ä»¬åœ¨cmn700_bindå‡½æ•°ä¸­ä½¿ç”¨system_info_apiå°±æ˜¯åœ¨è°ƒç”¨get_system_info_apiã€‚\n// module/system_info/src/mod_system_info.c static int system_info_process_bind_request(fwk_id_t requester_id, fwk_id_t targer_id, fwk_id_t api_id, const void **api) { switch (fwk_id_get_api_idx(api_id)) { case MOD_SYSTEM_INFO_GET_API_IDX: *api = \u0026amp;get_system_info_api; break; default: return FWK_E_PARAM; } return FWK_SUCCESS; } è§£é‡Šå®Œè¿™ä¸ª bind å‡½æ•°ï¼Œå®ƒæ˜¯åœ¨å“ªè¢«è°ƒç”¨çš„ï¼Ÿå®ƒåœ¨æ¡†æ¶åˆå§‹åŒ–æ—¶å°±ä¼šè¢«è°ƒç”¨ï¼Œåˆ†æfwk_arch_initå‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°åœ¨fwk_module_startå‡½æ•°ä¸­ä¼šå¯¹æ¯ä¸€ä¸ªæ¨¡å—è°ƒç”¨bindå‡½æ•°ã€‚å‡½æ•°è°ƒç”¨æµç¨‹å‚è€ƒå›¾ç‰‡æ–‡ä»¶ã€‚åœ¨æ­¤å°±ä¸å†èµ˜è¿°äº†ã€‚\nç»è¿‡ä»¥ä¸Šåˆ†æï¼Œæä¾› API çš„æ¨¡å—éœ€è¦åšçš„äº‹æƒ…å°±æ˜¯ï¼š\nåœ¨æ¨¡å—çš„å¤´æ–‡ä»¶ä¸­å®šä¹‰ API çš„ IDï¼Œå®ƒæœ‰ä¸€å®šçš„æ ¼å¼ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ MSCP æ–‡æ¡£doc/framework.mdçš„APIsç« èŠ‚ã€‚\nenum mod_modulename_api { MOD_MODULENAME_API_A, MOD_MODULENAME_API_B, }; åœ¨æ¨¡å—çš„æºæ–‡ä»¶ä¸­å®šä¹‰ API ç»“æ„ä½“ï¼Œç”¨äºåœ¨å…¶ä»–æ¨¡å—ä¸­ä½¿ç”¨ã€‚\nstruct mod_system_info_get_info_api { int (*get_system_info)(const struct mod_system_info **sys_info); }; åœ¨æ¨¡å—åŸæ–‡ä»¶ä¸­æä¾›process_bind_requestå‡½æ•°ï¼Œç”¨äºæ ¹æ® API çš„ ID è¿”å› API çš„æŒ‡é’ˆã€‚\nstatic int system_info_process_bind_request(fwk_id_t requester_id, fwk_id_t targer_id, fwk_id_t api_id, const void **api) { switch (fwk_id_get_api_idx(api_id)) { case MOD_SYSTEM_INFO_GET_API_IDX: *api = \u0026amp;get_system_info_api; break; default: return FWK_E_PARAM; } return FWK_SUCCESS; } åœ¨æ¨¡å—çš„æºæ–‡ä»¶ä¸­å®šä¹‰ API çš„æŒ‡é’ˆï¼Œç”¨äºæä¾› API çš„åœ°å€ã€‚\nstatic struct mod_system_info_get_info_api get_system_info_api = { .get_system_info = system_info_get_system_info, }; å®ç°éœ€è¦æä¾›çš„ API å‡½æ•°ã€‚\nstatic int system_info_get_system_info(const struct mod_system_info **sys_info) { *sys_info = \u0026amp;system_info; return FWK_SUCCESS; } ä»¥ä¸Šå°±æ˜¯å¤§è‡´çš„ç§»æ¤æµç¨‹äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/scp-firmware%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-module%E9%97%B4api%E8%B0%83%E7%94%A8%E5%88%86%E6%9E%90/","summary":"\u003cp\u003eæƒ³äº†è§£å¦‚ä½•æä¾› APIï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ CMN æ¨¡å—æ˜¯å¦‚ä½•ä½¿ç”¨ API çš„ï¼Œåœ¨æ–‡ä»¶\u003ccode\u003emodule/cmn700/src/mod_cmn700.c\u003c/code\u003eæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š\u003c/p\u003e","title":"SCP-firmware æºç åˆ†æ-module é—´ api è°ƒç”¨åˆ†æ"},{"content":"æ¨èä¸€ä¸ªå¼€æºå·¥å…·ï¼ŒElevate for Stravaï¼Œå¯ä»¥ä¸º Strava æä¾›ä¸°å¯Œçš„æ•°æ®åˆ†æåŠŸèƒ½ï¼Œå¸®åŠ©éª‘è¡Œçˆ±å¥½è€…å’Œè¿åŠ¨å‘˜æ›´å¥½åœ°äº†è§£è‡ªå·±çš„è¿åŠ¨è¡¨ç°ã€‚ç›®å‰æœ‰Webæ’ä»¶ã€Windows APPå’ŒMacOS APPã€‚å¼€å‘è€…è¡¨ç¤ºæœªæ¥ä¸»è¦æ˜¯æä¾›åº”ç”¨è½¯ä»¶ï¼Œæ’ä»¶å¼€å‘å¯èƒ½æŠ•å…¥ä¼šå‡å°‘ï¼Œå¦‚æœæƒ³è¦æ›´å¿«æ›´å…¨é¢ä½“éªŒè½¯ä»¶åŠŸèƒ½ï¼Œæ¨èä½¿ç”¨Windows APPæˆ–MacOS APPã€‚å› ä¸ºWebæ’ä»¶ä½¿ç”¨æ›´åŠ æ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘å°±ä»¥Webæ’ä»¶ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚\nå®‰è£…å·¥å…· ä»¥ä¸‹æ˜¯ç®€å•çš„å®‰è£…æ­¥éª¤ï¼ŒAppç‰ˆæœ¬å¯ä»¥å‰å¾€Elevate for Stravaçš„githubä¸»é¡µReleaseé¡µé¢ä¸‹è½½ã€‚\nå®‰è£…æ‰©å±•ç¨‹åº\nç”¨æˆ·å¯ä»¥é€šè¿‡ Chrome æˆ– Firefox æµè§ˆå™¨çš„æ‰©å±•å•†åº—æœç´¢â€œElevate for Stravaâ€ï¼Œç„¶åç‚¹å‡»â€œå®‰è£…â€æŒ‰é’®ã€‚å¦‚æœä½ æ˜¯Chromeç”¨æˆ·ï¼Œå¯ä»¥ç‚¹å‡»æ­¤é“¾æ¥ç›´è¾¾ã€‚å…¶ä»–æµè§ˆå™¨å¯ä»¥è®¿é—®å®˜ç½‘æŸ¥çœ‹ã€‚ åŒæ­¥ Strava æ•°æ®\nå®‰è£…å®Œæˆåï¼Œç”¨æˆ·éœ€è¦ç™»å½•ä»–ä»¬çš„ Strava è´¦æˆ·ï¼Œå¹¶æˆæƒ Elevate è®¿é—®å…¶è¿åŠ¨æ•°æ®ã€‚ä¹‹åï¼ŒElevate å°†è‡ªåŠ¨åŒæ­¥ Strava æ•°æ®ï¼Œå¹¶å¼€å§‹ç”Ÿæˆå„ç§åˆ†ææŠ¥å‘Šã€‚ \u003c!DOCTYPE html\u003e Responsive Image é…ç½®å’Œä½¿ç”¨\nç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è°ƒæ•´ Elevate çš„è®¾ç½®ï¼ŒåŒ…æ‹¬å•ä½ã€åˆ†æå‚æ•°ç­‰é€‰é¡¹ã€‚ ä½¿ç”¨ä»‹ç» ç¬¬ä¸€æ¬¡å¯¼å…¥æˆåŠŸåå…ˆåˆ«ç€æ€¥æŸ¥çœ‹æ•°æ®ï¼Œå…ˆé…ç½®ä¸€ä¸‹ä¸ªäººä¿¡æ¯ï¼Œå‚è€ƒä¸‹å›¾ã€‚åˆ‡è®°åŸºæœ¬ä¿¡æ¯å’ŒStravaä¿æŒä¸€è‡´ï¼Œä¸ç„¶é‡æ–°å¯¼å…¥çœŸçš„å¾ˆè´¹æ—¶é—´ï¼Œå› ä¸ºStravaæ¥å£è¯·æ±‚æœ‰é™åˆ¶ï¼Œä½ å¯ä»¥åœ¨Stravaç”³è¯·å¯¼å‡ºæ‰€æœ‰æ•°æ®ä¸ºæ–‡ä»¶ï¼Œè¿™æ ·ä¼šå¿«å¾ˆå¤šï¼Œåé¢å†è¯¦ç»†ä»‹ç»ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æŸ¥çœ‹æ´»åŠ¨æ±‡æ€»\n\u003c!DOCTYPE html\u003e Responsive Image è®¾ç½®å¹´åº¦ç›®æ ‡ï¼Œè®¡ç®—ç›®æ ‡è¿›åº¦\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ä½ æ˜¯ä¸æ˜¯ä¹Ÿæƒ³çŸ¥é“è‡ªå·±å…³æ³¨çš„å¤§ä½¬åŠŸç‡æ˜¯å¤šå°‘ï¼Ÿå˜¿å˜¿ï¼ŒElevateä¼šæ ¹æ®å¤§ä½¬å…¬å¼€çš„æ•°æ®ï¼Œé¢„ä¼°ä¸€ä¸ªåŠŸç‡å’Œå·¥ä½“æ¯”ã€‚ä»¥ä¸‹å°±æ˜¯èŒƒäºŒç‰¹çš„ä¸€æ¬¡éª‘è¡Œæ•°æ®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image More Dataï¼ç‚¹å‡»æ©™è‰²çš„æŒ‰é’®ï¼Œå¯ä»¥æ˜¾ç¤ºæ›´å¤šçš„æ•°æ®ä¿¡æ¯ï¼Œå½“ç„¶è¿™äº›ä¿¡æ¯å¯¹äºæ™®é€šéª‘è¡Œè€…ä½œç”¨ä¸å¤§ã€‚å¯¹äºä¸šä½™è½¦æ‰‹å¯ä»¥é€šè¿‡è¿™äº›æ•°æ®æ¥å­¦ä¹ ä¸€ä¸‹èŒä¸šè½¦æ‰‹çš„éª‘è¡Œä¹ æƒ¯ã€‚æ¯”å¦‚åŠŸç‡åˆ†é…ï¼Œè¸é¢‘åˆ†é…ç­‰ç­‰ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/elevate-for-strava%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6%E6%9B%B4%E5%85%A8%E9%9D%A2%E7%9A%84%E9%AA%91%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/","summary":"\u003cp\u003eæ¨èä¸€ä¸ªå¼€æºå·¥å…·ï¼Œ\u003ca href=\"https://github.com/thomaschampagne/elevate\"\u003eElevate for Strava\u003c/a\u003eï¼Œå¯ä»¥ä¸º Strava æä¾›ä¸°å¯Œçš„æ•°æ®åˆ†æåŠŸèƒ½ï¼Œå¸®åŠ©éª‘è¡Œçˆ±å¥½è€…å’Œè¿åŠ¨å‘˜æ›´å¥½åœ°äº†è§£è‡ªå·±çš„è¿åŠ¨è¡¨ç°ã€‚ç›®å‰æœ‰Webæ’ä»¶ã€Windows APPå’ŒMacOS APPã€‚å¼€å‘è€…è¡¨ç¤ºæœªæ¥ä¸»è¦æ˜¯æä¾›åº”ç”¨è½¯ä»¶ï¼Œæ’ä»¶å¼€å‘å¯èƒ½æŠ•å…¥ä¼šå‡å°‘ï¼Œå¦‚æœæƒ³è¦æ›´å¿«æ›´å…¨é¢ä½“éªŒè½¯ä»¶åŠŸèƒ½ï¼Œæ¨èä½¿ç”¨Windows APPæˆ–MacOS APPã€‚å› ä¸ºWebæ’ä»¶ä½¿ç”¨æ›´åŠ æ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘å°±ä»¥Webæ’ä»¶ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚\u003c/p\u003e","title":"Elevate for Stravaæµè§ˆå™¨æ’ä»¶æ›´å…¨é¢çš„éª‘è¡Œæ•°æ®åˆ†æ"},{"content":"QEMU åœ¨ decode æŒ‡ä»¤çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨å„å¹³å°æ‰€å®šä¹‰çš„ instruction decoders æ¥è§£ææŒ‡ä»¤ã€‚å¦‚åœ¨ ARM å¹³å°ä¸‹ï¼Œå°±å®šä¹‰äº†ï¼šdisas_arm_insn()ã€disas_thumb_insn() åŠ disas_thumb2_insn() ç­‰æ¥åˆ†åˆ«è´Ÿè´£ ARM 32-bits æŒ‡ä»¤ã€ARM Thumb æŒ‡ä»¤åŠ ARM Thumb2 æŒ‡ä»¤çš„è§£æã€‚\nè€Œ Decodetree åˆ™æ˜¯ç”± Bastian Koppelmann äº 2017 å¹´åœ¨ ç§»æ¤ RISC-V QEMU çš„æ—¶å€™æ‰€æå‡ºæ¥çš„æœºåˆ¶ (è¯¦è§ï¼šè®¨è®ºé‚®ä»¶1ã€è®¨è®ºé‚®ä»¶2)ã€‚æå‡ºè¯¥æœºåˆ¶ä¸»è¦æ˜¯å› ä¸ºè¿‡å¾€çš„ instruction decoders (å¦‚ï¼šARM) éƒ½æ˜¯é‡‡ç”¨ä¸€å † switch-case æ¥åšåˆ¤æ–­ã€‚ä¸ä»…éš¾é˜…è¯»ï¼Œä¹Ÿéš¾ä»¥ç»´æŠ¤ã€‚\nå› æ­¤ Bastian Koppelmann å°±æå‡ºäº† Decodetree çš„æœºåˆ¶ï¼Œå¼€å‘è€…åªéœ€è¦é€šè¿‡ Decodetree çš„è¯­æ³•å®šä¹‰å„ä¸ªæŒ‡ä»¤çš„æ ¼å¼ï¼Œä¾¿å¯äº¤ç”± Decodetree æ¥åŠ¨æ€ç”Ÿæˆå¯¹åº”åŒ…å« switch-case çš„ instruction decoder .c æ–‡æ¡£ã€‚\nDecodetree ç‰¹åˆ«é€‚åˆåƒ RISC-V è¿™ç§å…·æœ‰å›ºå®šæŒ‡ä»¤æ ¼å¼çš„ ISAã€‚\nå› ä¸ºå„å­—æ®µéƒ½åœ¨å›ºå®šçš„ä½ç½®ï¼Œ(å¦‚ RISC-V çš„ opcode éƒ½æ˜¯å›ºå®šåœ¨ bits[6..0] çš„ä½ç½®)ã€‚ \u003c!DOCTYPE html\u003e Responsive Image Decodetree å…¶å®æ˜¯ç”± Python script (./scripts/decodetree.py) æ‰€ç”Ÿæˆçš„ã€‚ä½¿ç”¨æ–‡æ¡£å¯ä»¥å‚è€ƒï¼š./docs/devel/decodetree.rstï¼Œé‡Œé¢æœ‰è¯¦ç»†å®šä¹‰äº†å…¶è¯­æ³•çš„æ ¼å¼ã€‚QEMU åœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè°ƒç”¨ Decodetreeï¼Œæ ¹æ®å„å¹³å°æ‰€å®šä¹‰çš„ decode æ–‡æ¡£ï¼ŒåŠ¨æ€ç”Ÿæˆå¯¹åº”çš„ decoderã€‚\nå¦‚ RISC-V çš„ instruction decoders å°±æ˜¯è¢«å®šä¹‰åœ¨ï¼š./target/riscv/*.decode ä¸­ã€‚å…¶ Makefile.obj å°±æœ‰å¦‚ä¸‹çš„å£°æ˜ï¼š\n... DECODETREE = $(SRC_PATH)/scripts/decodetree.py decode32-y = $(SRC_PATH)/target/riscv/insn32.decode decode32-$(TARGET_RISCV64) += $(SRC_PATH)/target/riscv/insn32-64.decode ... target/riscv/decode_insn32.inc.c: $(decode32-y) $(DECODETREE) $(call quiet-command, \\ $(PYTHON) $(DECODETREE) -o $@ --static-decode decode_insn32 \\ $(decode32-y), \u0026#34;GEN\u0026#34;, $(TARGET_DIR)$@) Decodetree çš„è¯­æ³•å…±åˆ†ä¸ºï¼šFieldsã€Argument Setsã€Formatsã€Patterns äº”éƒ¨åˆ†ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ Decodetree çš„è¯­æ³•ï¼Œæ¥åŠ¨æ€ç”Ÿæˆä¸€ä¸ªæŒ‡ä»¤çš„ decoderã€‚\nField Field å®šä¹‰å¦‚ä½•å–å‡ºä¸€æŒ‡ä»¤ä¸­ï¼Œå„å­—æ®µ (eg: rd, rs1, rs2, imm) çš„å€¼ã€‚\nfield_def := \u0026#39;%\u0026#39; identifier ( unnamed_field )* ( !function=identifier )? unnamed_field := number \u0026#39;:\u0026#39; ( \u0026#39;s\u0026#39; ) number å…¶è¯­æ³•ç”± % å¼€å¤´ï¼Œéšåç´§æ¥ç€ä¸€ä¸ª identifier åŠé›¶ä¸ªæˆ–å¤šä¸ª unamed_fieldï¼Œå¹¶å¯å†åŠ ä¸Šå¯é€‰çš„ !functionã€‚\nidentifier å¯ç”±å¼€å‘è€…è‡ªå®šï¼Œå¦‚ï¼šrdã€immâ€¦ ç­‰ã€‚ unamed_field å®šä¹‰äº†è¯¥å­—æ®µçš„æ‰€åœ¨æ¯”ç‰¹ã€‚ç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†è¯¥å­—æ®µçš„ least-significant bit positionï¼Œç¬¬äºŒä¸ªæ•°å­—åˆ™å®šä¹‰äº†è¯¥å­—æ®µçš„æ¯”ç‰¹é•¿åº¦ã€‚å¦å¤–å¯åŠ ä¸Šå¯é€‰çš„ s å­—ç¬¦æ¥æ ‡æ˜åœ¨å–å‡ºè¯¥å­—æ®µåï¼Œæ˜¯å¦éœ€è¦åš ç¬¦å·æ‰©å±•ã€‚ Egï¼š%rd 7:5 ä»£è¡¨ rd å äº†æŒ‡ä»¤ä¸­ bits 7 ~ bits 11 çš„ä½ç½® (insn[11:7])ï¼Œå…± 5 bitsã€‚ !function å®šä¹‰åœ¨æˆªå–å‡ºè¯¥å­—æ®µçš„å€¼åï¼Œæ‰€ä¼šå†è°ƒç”¨çš„ functionã€‚ Field (32-bits æŒ‡ä»¤) æœ€åä¼šç”Ÿæˆå¯¹åº”çš„ extract32() åŠ sextract32() ä»£ç ï¼Œä»¥ç”¨æ¥å–å¾—æŒ‡ä»¤ä¸­å„å­—æ®µçš„å€¼ï¼š\nField ç¤ºä¾‹ Input Generated code %disp 0:s16 sextract(i, 0, 16) %imm9 16:6 10:3 extract(i, 16, 6) \u0026laquo; 3 %disp12 0:s1 1:1 2:10 sextract(i, 0, 1) \u0026laquo; 11 %shimm8 5:s8 13:1 !function=expand_shimm8 expand_shimm8(sextract(i, 5, 8)) \u0026laquo; 1 ä»¥ RISC-V çš„ U-type æŒ‡ä»¤ä¸ºä¾‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å…¶ä¸­ï¼Œimm å  insn[31:12]ï¼Œå…±20ä½ï¼Œrd å  insn[11:7]ï¼Œä¸” imm éœ€è¦åš ç¬¦å·æ‰©å±• å å·¦ç§» 12 ä½ (20-bit immediate is shifted left by 12 bits to form U immediates)ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬è¦å®šä¹‰ RISC-V çš„ U-type æŒ‡ä»¤ï¼Œåˆ™å¯ä»¥å£°æ˜æˆï¼š\n%rd 7:5 %imm_u 12:s20 !function=ex_shift_12 20 è¡¨ç¤ºå  20 bits\næœ€åä¼šç”Ÿæˆå¦‚ä¸‹çš„ä»£ç ï¼š\nstatic void decode_insn32_extract_u(DisasContext *ctx, arg_u *a, uint32_t insn) { a-\u0026gt;imm = ex_shift_12(ctx, sextract32(insn, 12, 20)); a-\u0026gt;rd = extract32(insn, 7, 5); } static void decode_insn32_extract_u() æ˜¯ç”±ä¸‹æ–‡ Format å®šä¹‰æ‰€ç”Ÿæˆçš„ï¼Œè€Œ arg_u *a åˆ™æ˜¯ç”± Argument Set å®šä¹‰æ‰€ç”Ÿæˆçš„ï¼Œå°†ä¼šåœ¨åé¢çš„éƒ¨åˆ†å†åšè¯´æ˜ã€‚\nå¯ä»¥çœ‹åˆ°ï¼š\na-\u0026gt;imm = ex_shift_12(ctx, sextract32(insn, 12, 20)); a-\u0026gt;rd = extract32(insn, 7, 5); a-\u0026gt;imm æ˜¯ç”± insn[31:12] æ‰€å–å¾—å¹¶åšç¬¦å·æ‰©å±•ï¼Œä¸”ä¼šå†è°ƒç”¨ ex_shift_12() æ¥ å·¦ç§» 12 ä¸ª bitsã€‚\nP.S. RISC-V çš„ ex_shift_12() æ˜¯é€šè¿‡å®šä¹‰åœ¨./target/riscv/translate.c ä¸­ EX_SH è¿™ä¸ª macro æ‰€å±•å¼€çš„ï¼š\n#define EX_SH(amount) \\ static int ex_shift_##amount(DisasContext *ctx, int imm) \\ { \\ return imm \u0026lt;\u0026lt; amount; \\ } EX_SH(1) EX_SH(2) EX_SH(3) EX_SH(4) EX_SH(12) a-\u0026gt;rd æ˜¯ç”± insn[11:7] æ‰€å–å¾—ã€‚\næ­¤å¤–ï¼Œåœ¨ Decodetree çš„ spec ä¸­ä¹Ÿæœ‰æåˆ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åªå®šä¹‰ !function æ¥ç›´æ¥è°ƒç”¨è¯¥ functionã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰ DisasContext ä¼šè¢«ä¼ å…¥è¯¥ functionã€‚\nå¦‚ ARM Thumb ./target/arm/t16.decode å°±æœ‰å®šä¹‰ï¼š\n# Set S if the instruction is outside of an IT block. %s !function=t16_setflags static void disas_t16_extract_addsub_2i(DisasContext *ctx, arg_s_rri_rot *a, uint16_t insn) { a-\u0026gt;imm = extract32(insn, 6, 3); a-\u0026gt;rn = extract32(insn, 3, 3); a-\u0026gt;rd = extract32(insn, 0, 3); a-\u0026gt;s = t16_setflags(ctx); a-\u0026gt;rot = 0; } è¯·æ³¨æ„ï¼ŒæœªåŒ…å«ä»»ä½• unnamed_fields æˆ– !function çš„ Field ä¼šè¢«è§†ä¸ºé”™è¯¯ã€‚\nArgument Set Argument Set å®šä¹‰ç”¨æ¥ä¿å­˜ä»æŒ‡ä»¤ä¸­æ‰€æˆªå–å‡ºæ¥å„å­—æ®µçš„å€¼ã€‚\nargs_def := \u0026#39;\u0026amp;\u0026#39; identifier ( args_elt )+ ( !extern )? args_elt := identifier å…¶è¯­æ³•ç”± \u0026amp; å¼€å¤´ï¼Œéšåç´§æ¥ç€ä¸€ä¸ªæˆ–å¤šä¸ªçš„ identifier ï¼Œå¹¶å¯å†åŠ ä¸Šå¯é€‰çš„ !extern ã€‚\nidentifier å¯ç”±å¼€å‘è€…è‡ªè®¢ï¼Œå¦‚ï¼šregsã€loadstoreâ€¦ ç­‰ã€‚ !extern åˆ™è¡¨ç¤ºæ˜¯å¦åœ¨å…¶ä»–åœ°æ–¹å·²ç»ç”±å…¶ä»–çš„ decoder å®šä¹‰è¿‡ã€‚å¦‚æœæœ‰è¯¥å­—æ®µï¼Œå°±ä¸ä¼šå†æ¬¡ç”Ÿæˆå¯¹åº”çš„ argument set structã€‚ Argument Set ç¤ºä¾‹ ä¾‹1ï¼š\n\u0026amp;ampreg3 ra rb rc ä¼šç”Ÿæˆä»¥ä¸‹çš„ argument set structï¼š\ntypedef struct { int ra; int rb; int rc; } arg_reg3; ä¾‹2ï¼š\n\u0026amp;loadstore reg base offset åˆ™ä¼šç”Ÿæˆä»¥ä¸‹çš„ argument set structï¼š\ntypedef struct { int base; int offset; int reg; } arg_loadstore; å› æ­¤ï¼Œä»¥åˆšåˆšçš„ RISC-V U-type æŒ‡ä»¤ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦ä»æŒ‡ä»¤ä¸­æˆªå– imm åŠ rd å­—æ®µçš„å€¼ï¼Œå¯ä»¥å£°æ˜å…¶ argument set å¦‚ä¸‹ï¼š\n\u0026amp;u imm rd æœ€åä¼šç”Ÿæˆä»¥ä¸‹çš„ argument set structï¼š\ntypedef struct { int imm; int rd; } arg_u; æ­¤ argument set struct ä¼šè¢«ä¼ å…¥ç”± Format å®šä¹‰æ‰€ç”Ÿæˆçš„ extract functionï¼š\nstatic void decode_insn32_extract_u(DisasContext *ctx, arg_u *a, uint32_t insn) { a-\u0026gt;imm = ex_shift_12(ctx, sextract32(insn, 12, 20)); a-\u0026gt;rd = extract32(insn, 7, 5); } æ‰€ä¼ å…¥çš„arg_u ä¼šä¿å­˜ä»æŒ‡ä»¤ä¸­æˆªå–å‡ºçš„ imm åŠ rd å­—æ®µçš„å€¼ï¼Œå¾…åç»­ä½¿ç”¨ã€‚\nFormat Format å®šä¹‰äº†æŒ‡ä»¤çš„æ ¼å¼ (å¦‚ RISC-V ä¸­çš„ Rã€Iã€Sã€Bã€Uã€J-type)ï¼Œå¹¶ä¼šç”Ÿæˆå¯¹åº”çš„ decode functionã€‚\nfmt_def := \u0026#39;@\u0026#39; identifier ( fmt_elt )+ fmt_elt := fixedbit_elt | field_elt | field_ref | args_ref fixedbit_elt := [01.-]+ field_elt := identifier \u0026#39;:\u0026#39; \u0026#39;s\u0026#39;? number field_ref := \u0026#39;%\u0026#39; identifier | identifier \u0026#39;=\u0026#39; \u0026#39;%\u0026#39; identifier args_ref := \u0026#39;\u0026amp;\u0026#39; identifier å…¶è¯­æ³•ç”± @ å¼€å¤´ï¼Œéšåç´§æ¥ç€ä¸€ä¸ª identifier åŠä¸€ä¸ªä»¥ä¸Šçš„ fmt_eltã€‚\nidentifier å¯ç”±å¼€å‘è€…è‡ªè®¢ï¼Œå¦‚ï¼šoprã€opiâ€¦ ç­‰ã€‚\nfmt_elt åˆ™å¯ä»¥é‡‡ç”¨ä»¥ä¸‹ä¸åŒçš„è¯­æ³•ï¼š\nfixedbit_elt åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª 0ã€1ã€.ã€-ï¼Œæ¯ä¸€ä¸ªä»£è¡¨æŒ‡ä»¤ä¸­çš„ 1 ä¸ª bitã€‚\n. ä»£è¡¨è¯¥ bit å¯ä»¥ç”¨ 0 æˆ–æ˜¯ 1 æ¥è¡¨ç¤ºã€‚ - ä»£è¡¨è¯¥ bit å®Œå…¨è¢«å¿½ç•¥ã€‚ field_elt å¯ä»¥ç”¨ Field çš„è¯­æ³•æ¥å£°æ˜ã€‚\nEgï¼šra:5ã€rb:5ã€lit:8 field_ref æœ‰ä¸‹åˆ—ä¸¤ç§æ ¼å¼ (ä»¥ä¸‹èŒƒä¾‹å‚è€ƒä¸Šæ–‡æ‰€å®šä¹‰ä¹‹ Field)ï¼š\n'%' identifierï¼šç›´æ¥å‚è€ƒä¸€ä¸ªè¢«å®šä¹‰è¿‡çš„ Fieldã€‚\nå¦‚ï¼š%rdï¼Œä¼šç”Ÿæˆï¼š\na-\u0026gt;rd = extract32(insn, 7, 5); identifier '=' '%' identifierï¼šç›´æ¥å‚è€ƒä¸€ä¸ªè¢«å®šä¹‰è¿‡çš„ Fieldï¼Œä½†é€šè¿‡ç¬¬ä¸€ä¸ª identifier æ¥é‡å‘½åå…¶æ‰€å¯¹åº”çš„ argument åç§°ã€‚æ­¤æ–¹å¼å¯ä»¥ç”¨æ¥æŒ‡å®šä¸åŒçš„ argument åç§°æ¥å‚è€ƒè‡³åŒä¸€ä¸ª Fieldã€‚\nå¦‚ï¼šmy_rd=%rdï¼Œä¼šç”Ÿæˆï¼š\na-\u0026gt;my_rd = extract32(insn, 7, 5); args_ref æŒ‡å®šæ‰€ä¼ å…¥ decode function çš„ Argument Setã€‚è‹¥æ²¡æœ‰æŒ‡å®š args_ref çš„è¯ï¼ŒDecodetree ä¼šæ ¹æ® field_elt æˆ– field_ref è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª Argument Setã€‚æ­¤å¤–ï¼Œä¸€ä¸ª Format æœ€å¤šåªèƒ½åŒ…å«ä¸€ä¸ª args_refã€‚\nå½“ fixedbit_elt æˆ– field_ref è¢«å®šä¹‰æ—¶ï¼Œè¯¥ Foramt çš„æ‰€æœ‰çš„ bits éƒ½å¿…é¡»è¢«å®šä¹‰ (å¯é€šè¿‡ fixedbit_elt æˆ– . æ¥å®šä¹‰å„ä¸ª bitsï¼Œç©ºæ ¼ä¼šè¢«å¿½ç•¥)ã€‚\nFormat ç¤ºä¾‹ @opi ...... ra:5 lit:8 1 ....... rc:5 å®šä¹‰äº† op1 è¿™ä¸ª Formatï¼Œå…¶ä¸­ï¼š\ninsn[31:26] å¯ä¸º 0 æˆ– 1ã€‚ insn[25:21] ä¸º raã€‚ insn[20:13] ä¸º litã€‚ insn[12] å›ºå®šä¸º 1ã€‚ insn[11:5] å¯ä¸º 0 æˆ– 1ã€‚ insn[4:0] ä¸º rcã€‚ æ­¤ Format ä¼šç”Ÿæˆä»¥ä¸‹çš„ decode functionï¼š\ntypedef struct { int lit; int ra; int rc; } arg_decode_insn320; static void decode_insn32_extract_opi(DisasContext *ctx, arg_decode_insn320 *a, uint32_t insn) { a-\u0026gt;ra = extract32(insn, 21, 5); a-\u0026gt;lit = extract32(insn, 13, 8); a-\u0026gt;rc = extract32(insn, 0, 5); } ç”±äºæˆ‘ä»¬æ²¡æœ‰æŒ‡å®š args_refï¼Œå› æ­¤ Decodetree æ ¹æ®äº† field_elt çš„å®šä¹‰ï¼Œè‡ªåŠ¨ç”Ÿæˆäº† arg_decode_insn320 è¿™ä¸ª Argument Setã€‚\nä»¥ RISC-V I-type æŒ‡ä»¤ä¸ºä¾‹ï¼š\n# Fields: %rs1 15:5 %rd 7:5 # immediates: %imm_i 20:s12 # Argment sets: \u0026amp;i imm rs1 rd @i ........ ........ ........ ........ \u0026amp;i imm=%imm_i %rs1 %rd å®šä¹‰äº† i è¿™ä¸ª Formatï¼Œå…¶ä¸­ï¼š\ninsn[31:20] ä¸º immï¼Œä¸”ä¸º ç¬¦å·æ‰©å±•ã€‚ insn[19:5] ä¸º rs1ã€‚ insn[11:7] ä¸º rdã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š\næ­¤ Format æŒ‡å®šäº† Argument Setï¼š\u0026amp;iã€‚ \u0026amp;i ä¸­å¿…é¡»åŒ…å«æ‰€æœ‰æœ‰ç”¨åˆ°çš„ arguments (ä¹Ÿå°±æ˜¯ï¼šimmã€rs1 åŠ rd) imm æ˜¯é€šè¿‡é‡å‘½åçš„æ–¹å¼æ¥å‚è€ƒ %imm_i è¿™ä¸ª Fieldã€‚ æ­¤èŒƒä¾‹ä¼šç”Ÿæˆä»¥ä¸‹çš„ decode functionï¼š\ntypedef struct { int imm; int rd; int rs1; } arg_i; static void decode_insn32extract_i(DisasContext *ctx, arg_i *a, uint32_t insn) { a-\u0026gt;imm = sextract32(insn, 20, 12); a-\u0026gt;rs1 = extract32(insn, 15, 5); a-\u0026gt;rd = extract32(insn, 7, 5); } ç›¸æ¯”äºç¬¬ä¸€ä¸ªèŒƒä¾‹ï¼Œç”±äºè¿™æ¬¡æˆ‘ä»¬æœ‰æŒ‡å®š args_refï¼š\u0026amp;iï¼Œå› æ­¤å¯¹åº”çš„ arg_i ä¼šè¢«ä¼ å…¥ decode functionã€‚\nå›åˆ°å…ˆå‰çš„ RISC-V U-type æŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚åŒ I-type æŒ‡ä»¤å®šä¹‰å…¶æ ¼å¼ï¼š\n# Fields: %rd 7:5 # immediates: %imm_u 12:s20 !function=ex_shift_12 # Argument sets: \u0026amp;u imm rd @u .................... ..... ....... \u0026amp;u imm=%imm_u %rd å®šä¹‰äº† u è¿™ä¸ª Formatï¼Œå…¶ä¸­ï¼š\ninsn[31:12] ä¸º immï¼Œä¸”ä¸º ç¬¦å·æ‰©å±•ã€‚ insn[11:7] ä¸º rdã€‚ ä¼šç”Ÿæˆä»¥ä¸‹çš„ decode functionï¼š\ntypedef struct { int imm; int rd; } arg_u; static void decode_insn32_extract_u(DisasContext *ctx, arg_u *a, uint32_t insn) { a-\u0026gt;imm = ex_shift_12(ctx, sextract32(insn, 12, 20)); a-\u0026gt;rd = extract32(insn, 7, 5); } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š\næ­¤ Format æŒ‡å®šäº† Argument Setï¼š\u0026amp;uã€‚ \u0026amp;u ä¸­å¿…é¡»åŒ…å«æ‰€æœ‰æœ‰ç”¨åˆ°çš„ arguments (ä¹Ÿå°±æ˜¯ï¼šimmã€rd) imm æ˜¯é€šè¿‡é‡å‘½åçš„æ–¹å¼æ¥å‚è€ƒ %imm_u è¿™ä¸ª Fieldã€‚ Pattern Pattern å®é™…å®šä¹‰äº†ä¸€ä¸ªæŒ‡ä»¤çš„ decode æ–¹å¼ã€‚Decodetree ä¼šæ ¹æ® Patterns çš„å®šä¹‰ï¼Œæ¥åŠ¨æ€äº§ç”Ÿå‡ºå¯¹åº”çš„ switch-case decode åˆ¤æ–­åˆ†æ”¯ã€‚\npat_def := identifier ( pat_elt )+ pat_elt := fixedbit_elt | field_elt | field_ref | args_ref | fmt_ref | const_elt fmt_ref := \u0026#39;@\u0026#39; identifier const_elt := identifier \u0026#39;=\u0026#39; number å…¶è¯­æ³•ç”±ç”¨æˆ·æ‰€å®šä¹‰çš„ identifierï¼Œéšåç´§æ¥ç€ä¸€ä¸ªä»¥ä¸Šçš„ pat_eltã€‚\nidentifier å¯ç”±å¼€å‘è€…è‡ªè®¢ï¼Œå¦‚ï¼šaddl_rã€addli â€¦ ç­‰ã€‚\npat_elt åˆ™å¯ä»¥é‡‡ç”¨ä»¥ä¸‹ä¸åŒçš„è¯­æ³•ï¼š\nfixedbit_elt ä¸åœ¨ Format ä¸­ fixedbit_elt çš„å®šä¹‰ç›¸åŒã€‚ field_elt ä¸åœ¨ Format ä¸­ field_elt çš„å®šä¹‰ç›¸åŒã€‚ field_ref ä¸åœ¨ Format ä¸­ field_ref çš„å®šä¹‰ç›¸åŒã€‚ args_ref ä¸åœ¨ Format ä¸­ args_ref çš„å®šä¹‰ç›¸åŒã€‚ fmt_ref ç›´æ¥å‚è€ƒä¸€ä¸ªè¢«å®šä¹‰è¿‡çš„Formatã€‚ const_elt å¯ä»¥ç›´æ¥æŒ‡å®šæŸä¸€ä¸ª argument çš„å€¼ã€‚ ç”±äº Pattern å®é™…å®šä¹‰äº†ä¸€ä¸ªæŒ‡ä»¤çš„ decode æ–¹å¼ï¼Œå› æ­¤æ‰€æœ‰çš„ bits åŠ arguments (å¦‚æœæœ‰å‚è€ƒ args_ref çš„è¯) éƒ½å¿…é¡»æ˜ç¡®çš„è¢«å®šä¹‰ï¼Œå¦‚æœåœ¨æ­é…äº†æ‰€æœ‰çš„ pat_elt åè¿˜æœ‰æœªå®šä¹‰çš„ bits æˆ–æ˜¯ arguments çš„è¯ï¼ŒDecodetree ä¾¿ä¼šæŠ¥é”™ã€‚\næ­¤å¤–ï¼ŒPattern æ‰€äº§ç”Ÿå‡ºæ¥çš„ decoderï¼Œæœ€åè¿˜ä¼šè°ƒç”¨å¯¹åº”çš„ translator functionã€‚translator function éœ€å¼€å‘è€…è‡ªè¡Œå®šä¹‰ã€‚\nPattern ç¤ºä¾‹ addl_i 010000 ..... ..... .... 0000000 ..... @opi å®šä¹‰äº† addl_i è¿™ä¸ªæŒ‡ä»¤çš„ Patternï¼Œå…¶ä¸­ï¼š\ninsn[31:26] ä¸º 010000ã€‚ insn[11:5] ä¸º 0000000ã€‚ å‚è€ƒäº† Format ç¤ºä¾‹ä¸­ å®šä¹‰çš„ @opi Formatã€‚ ç”±äº Pattern çš„æ‰€æœ‰ bits éƒ½å¿…é¡»æ˜ç¡®çš„è¢«å®šä¹‰ï¼Œå› æ­¤ @opi å¿…é¡»åŒ…å«å…¶ä½™ insn[25:12] åŠ insn[4:0] çš„æ ¼å¼å®šä¹‰ï¼Œå¦åˆ™ Decodetree ä¾¿ä¼šæŠ¥é”™ã€‚ æœ€å addl_i çš„ decoder è¿˜ä¼šè°ƒç”¨ trans_addl_i() è¿™ä¸ª translator functionã€‚\næ­é…ä¹‹å‰ä»‹ç»çš„ Fieldsã€Argument Sets åŠ Formatsï¼Œè®©æˆ‘ä»¬å†çœ‹å‡ ä¸ªå®Œæ•´çš„ä¾‹å­åº”è¯¥ä¼šæ›´æ¸…æ¥š Decodetree æ˜¯æ€äº§ç”Ÿä¸€ä¸ªæŒ‡ä»¤çš„ decoder çš„ã€‚\né¦–å…ˆæ˜¯ RISC-V çš„ lui åŠ auipc æŒ‡ä»¤ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image # Fields: %rd 7:5 # immediates: %imm_u 12:s20 !function=ex_shift_12 # Argument sets: \u0026amp;u imm rd # Formats: @u .................... ..... ....... \u0026amp;u imm=%imm_u %rd # Patterns lui .................... ..... 0110111 @u auipc .................... ..... 0010111 @u ä¼šäº§ç”Ÿä»¥ä¸‹ lui åŠ auipc çš„ decoderï¼š\ntypedef struct { int imm; int rd; } arg_u; static void decode_insn32_extract_u(DisasContext *ctx, arg_u *a, uint32_t insn) { a-\u0026gt;imm = ex_shift_12(ctx, sextract32(insn, 12, 20)); a-\u0026gt;rd = extract32(insn, 7, 5); } static bool decode_insn32(DisasContext *ctx, uint32_t insn) { union { arg_u f_u; } u; decode_insn32_extract_u(ctx, \u0026amp;u.f_u, insn); switch (insn \u0026amp; 0x0000007f) { case 0x00000017: if (trans_auipc(ctx, \u0026amp;u.f_u)) return true; return false; case 0x00000037: if (trans_lui(ctx, \u0026amp;u.f_u)) return true; return false; } return false; } å›é¡¾åˆ°ç›®å‰ä¸ºæ­¢æ‰€ä»‹ç»çš„ï¼š\nArgument Setsï¼š\u0026amp;u è¿™ä¸ª argument set åŒ…å«äº† imm åŠ rd è¿™ä¸¤ä¸ª argumentsã€‚\ntypedef struct { int imm; int rd; } arg_u; Fieldsï¼š imm åŠ rd åˆ†åˆ«ä½åœ¨ insn[31:12] åŠ insn[11:7]ï¼Œä¸” imm ä¸º ç¬¦å·æ‰©å±•ã€‚æœ€ååœ¨æˆªå–å‡º imm çš„å€¼åï¼Œè¿˜ä¼šè°ƒç”¨ ex_shift_12()ã€‚\na-\u0026gt;imm = ex_shift_12(ctx, sextract32(insn, 12, 20)); a-\u0026gt;rd = extract32(insn, 7, 5); Formatsï¼š@u å®šä¹‰äº† RISC-V U-type æŒ‡ä»¤çš„æ ¼å¼\nå‚è€ƒäº† \u0026amp;u è¿™ä¸ª Argument Setï¼Œå› æ­¤ decode function ä¼šä¼ å…¥ arg_u ä½œä¸ºå‚æ•°ã€‚ insn[31:12] å‚è€ƒäº† imm_u è¿™ä¸ª Field (å¹¶é‡å‘½åä¸º imm) insn[11:7] å‚è€ƒäº† rd è¿™ä¸ª Fieldã€‚ static void decode_insn32_extract_u(DisasContext *ctx, arg_u *a, uint32_t insn) { a-\u0026gt;imm = ex_shift_12(ctx, sextract32(insn, 12, 20)); a-\u0026gt;rd = extract32(insn, 7, 5); } Patternsï¼š\nlui çš„ opcode (insn[6:0]) ä¸º 0010111ï¼Œä¹Ÿå°±æ˜¯ 0x17ï¼Œåœ¨äº§ç”Ÿå‡ºæ¥çš„ switch-case ä¸­å¯ä»¥çœ‹åˆ°å…¶å¯¹åº”çš„ caseã€‚ lui çš„ decoder æœ€åè°ƒç”¨äº† trans_lui()ï¼Œå¹¶ä¼ å…¥ DisasContext åŠç»ç”± decode_insn32_extract_u() æ‰€è§£æå‡ºæ¥çš„ arg_uã€‚ auipc çš„ opcode (insn[6:0]) ä¸º 0110111ï¼Œä¹Ÿå°±æ˜¯ 0x37ï¼Œåœ¨äº§ç”Ÿå‡ºæ¥çš„ switch-case ä¸­å¯ä»¥çœ‹åˆ°å…¶å¯¹åº”çš„ caseã€‚ auipc çš„ decoder æœ€åè°ƒç”¨äº† trans_auipc()ï¼Œå¹¶ä¼ å…¥ DisasContext åŠç»ç”± decode_insn32_extract_u() æ‰€è§£æå‡ºæ¥çš„ arg_uã€‚ P.S. è¿™è¾¹ç”±äº Decodetree å‘ç° lui åŠ auipc å¯ä»¥å…±ç”¨ decode_insn32_extract_u()ï¼Œå› æ­¤å°†å…¶æåˆ°äº† switch-case ä¹‹å¤–ã€‚ static bool decode_insn32(DisasContext *ctx, uint32_t insn) { union { arg_u f_u; } u; decode_insn32_extract_u(ctx, \u0026amp;u.f_u, insn); switch (insn \u0026amp; 0x0000007f) { case 0x00000017: if (trans_auipc(ctx, \u0026amp;u.f_u)) return true; return false; case 0x00000037: if (trans_lui(ctx, \u0026amp;u.f_u)) return true; return false; } return false; } æˆ‘ä»¬å¦å¤–å¯ä»¥å‘ç°ï¼ŒPattern + Format æŠŠæ‰€æœ‰çš„ 32-bits éƒ½ç»™äº†æ˜ç¡®çš„å®šä¹‰ï¼š\nPattern å®šä¹‰äº† opcode (insn[6:0])ã€‚ Format å‚è€ƒäº† imm (insn[31:12]) åŠ rd (insn[11:7])ã€‚ å¦‚æœæœ‰ä»»ä½•æœªæ˜ç¡®å®šä¹‰çš„ bits çš„è¯ï¼ŒDecodetree ä¾¿ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚å¦‚æœæˆ‘ä»¬å°† lui çš„ opcode æœ€é«˜ 2 ä¸ª bits (insn[6:5]) ç”± 01 æ”¹æˆ ..ï¼š\nlui .................... ..... ..10111 @u Decodetree åœ¨è§£ææ—¶ï¼Œä¾¿ä¼šæŠ¥é”™ï¼š\n./insn32.decode:17: error: (â€˜bits left unspecified (0x00000060)â€™,)\nDecodetree æé†’æˆ‘ä»¬ï¼Œinsn[6:5] (0x00000060) å°šæœªç»™å‡ºæ˜ç¡®å®šä¹‰ï¼Œå¹¶ä¼šæ˜¾ç¤ºå‡ºå…¶é”™è¯¯çš„è¡Œæ•°ã€‚\ntrans_lui() å’Œ trans_auipc() è¢«å®šä¹‰åœ¨ target/riscv/insn_trans/trans_rvi.inc.cï¼š\nstatic bool trans_lui(DisasContext *ctx, arg_lui *a) { if (a-\u0026gt;rd != 0) { tcg_gen_movi_tl(cpu_gpr[a-\u0026gt;rd], a-\u0026gt;imm); } return true; } static bool trans_auipc(DisasContext *ctx, arg_auipc *a) { if (a-\u0026gt;rd != 0) { tcg_gen_movi_tl(cpu_gpr[a-\u0026gt;rd], a-\u0026gt;imm + ctx-\u0026gt;base.pc_next); } return true; } å¯ä»¥çœ‹åˆ° trans_*() è´Ÿè´£å®é™…æŒ‡ä»¤çš„ä¸šåŠ¡é€»è¾‘åŠäº§ç”Ÿå¯¹åº”çš„ TCG codesã€‚\nå¦‚åŒå…ˆå‰æ‰€ä»‹ç»ï¼ŒPatterns çš„ pat_elt ä¹Ÿå¯ä»¥é‡‡ç”¨ field_elt è¯­æ³•ï¼Œå¦‚ RISC-V çš„ fence æŒ‡ä»¤ï¼š\nfence ---- pred:4 succ:4 ----- 000 ----- 0001111 insn[27:24] ä¸º predã€‚ insn[23:20] ä¸º succã€‚ insn[14:12] å›ºå®šä¸º 000ã€‚ insn[6:0] ä¸º opcode (0001111)ã€‚ æ²¡æœ‰å‚è€ƒä»»ä½•çš„ Formatã€‚ å‰©ä¸‹çš„ insn[31:28]ã€insn[19:15]ã€insn[11:7] è¢«å£°æ˜ä¸º -ï¼Œå› æ­¤å°±ç®—æ²¡æœ‰è¢«æ˜ç¡®å®šä¹‰ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚ æ‰€ç”Ÿæˆ fence çš„ decoder å¦‚ä¸‹ï¼š\ntypedef struct { int pred; int succ; } arg_decode_insn320; static void decode_insn32_extract_decode_insn32_Fmt_0(DisasContext *ctx, arg_decode_insn320 *a, uint32_t insn) { a-\u0026gt;pred = extract32(insn, 24, 4); a-\u0026gt;succ = extract32(insn, 20, 4); } static bool decode_insn32(DisasContext *ctx, uint32_t insn) { union { arg_decode_insn320 f_decode_insn320; } u; decode_insn32_extract_decode_insn32_Fmt_0(ctx, \u0026amp;u.f_decode_insn320, insn); switch (insn \u0026amp; 0x0000707f) { case 0x0000000f: if (trans_fence(ctx, \u0026amp;u.f_decode_insn320)) return true; return false; } return false; } å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è¿™æ¬¡æˆ‘ä»¬æ²¡æœ‰å‚è€ƒä»»ä½•çš„ Argument Setï¼Œä½† Decodetree è¿˜æ˜¯æ›¿æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªåŒ…å« pred å’Œ succ çš„ arg_decode_insn320 ã€‚\ntrans_fence() åŒæ ·æ˜¯è¢«å®šä¹‰åœ¨ ./target/riscv/insn_trans/trans_rvi.inc.cï¼š\nstatic bool trans_fence(DisasContext *ctx, arg_fence *a) { tcg_gen_mb(TCG_MO_ALL | TCG_BAR_SC); return true; } Pattern Groups Pattern Groups ç”±ä¸€ä¸ªä»¥ä¸Šçš„ Patterns æ‰€ç»„æˆï¼Œå…¶ä¸»è¦å·®åˆ«æ˜¯ä¸åŒ Patterns ä¹‹é—´çš„ bits å¯ä»¥ overlapã€‚å½“åŒç»„ä¸­æœ‰å¤šä¸ª Patterns æ—¶ï¼Œä¼šä¾æ®è¯¥ç»„ä¸­å„ Pattern çš„å£°æ˜é¡ºåºä¾åºåˆ¤æ–­ç›®å‰çš„æŒ‡ä»¤æ˜¯å¦ç¬¦åˆå…¶å®šä¹‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå½“ç¬¦åˆçš„ Pattern å…¶ trans_*() å›ä¼ å€¼ä¸º false æ—¶ï¼Œä¹Ÿä¼šè¢«è§†ä¸ºä¸ç›¸ç¬¦ï¼Œè€Œç»§ç»­åˆ¤æ–­è¯¥ç»„ä¸­çš„ä¸‹ä¸€ä¸ª Patternã€‚å› æ­¤ Pattern Groups éå¸¸é€‚åˆå°†å¤šä¸ªç›¸ä¼¼æ ¼å¼çš„æŒ‡ä»¤ç»™ç»„æˆåŒä¸€ä¸ª Pattern Groupã€‚\ngroup := \u0026#39;{\u0026#39; ( pat_def | group )+ \u0026#39;}\u0026#39; å„ Pattern Group ä»¥ { å¼€å¤´ï¼Œå¹¶ä»¥ } ç»“å°¾ï¼Œä¸”å…è®¸ nested pattern groups çš„å­˜åœ¨ï¼Œå…¶ä»–è¯­æ³•çš†ä¸ Pattern ç›¸åŒã€‚\nPattern Group ç¤ºä¾‹ { { nop 000010 ----- ----- 0000 001001 0 00000 copy 000010 00000 r1:5 0000 001001 0 rt:5 } or 000010 rt2:5 r1:5 cf:4 001001 0 rt:5 } ä¼šäº§ç”Ÿä»¥ä¸‹çš„ decoderï¼š\nswitch (insn \u0026amp; 0xfc000fe0) { case 0x08000240: if ((insn \u0026amp; 0x0000f000) == 0x00000000) { if ((insn \u0026amp; 0x0000001f) == 0x00000000) { extract_decode_Fmt_0(\u0026amp;u.f_decode0, insn); if (trans_nop(ctx, \u0026amp;u.f_decode0)) return true; } if ((insn \u0026amp; 0x03e00000) == 0x00000000) { extract_decode_Fmt_1(\u0026amp;u.f_decode1, insn); if (trans_copy(ctx, \u0026amp;u.f_decode1)) return true; } } extract_decode_Fmt_2(\u0026amp;u.f_decode2, insn); if (trans_or(ctx, \u0026amp;u.f_decode2)) return true; return false; } å½“æŒ‡ä»¤çš„å€¼ç¬¦åˆ nop åŠ copy è¿™ä¸ªå†…å±‚ Pattern Group æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­è¯¥æŒ‡ä»¤æ˜¯å¦ç¬¦åˆ nop æŒ‡ä»¤çš„å®šä¹‰ï¼Œä¸” trans_nop() çš„å›ä¼ å€¼ä¸º trueã€‚å¦åˆ™çš„è¯ï¼Œå°±ä¼šç»§ç»­åˆ¤æ–­æ˜¯å¦ç¬¦åˆåŒç»„ä¸­çš„ copy æŒ‡ä»¤ã€‚è‹¥éƒ½ä¸ç¬¦ï¼Œå°±ä¼šå†åˆ¤æ–­æ˜¯å¦ç¬¦åˆå¤–å±‚ Pattern Group çš„ or æŒ‡ä»¤ã€‚è‹¥ä»ä¸ç¬¦ï¼Œæ‰ä¼šå›ä¼  false è¡¨ç¤º decode å¤±è´¥ã€‚\nä¸å•çº¯ä½¿ç”¨ Pattern æœ€å¤§ä¸åŒçš„æ˜¯ï¼Œå½“ä¸€ Pattern çš„ trans_*() å›ä¼ å€¼ä¸º false æ—¶ï¼Œä¸ä¼šç›´æ¥å›ä¼  false (ä»£è¡¨ decode å¤±è´¥)ï¼Œè€Œæ˜¯ä¼šæ¥ç»­ç€åˆ¤æ–­åç»­çš„ Patterns æ˜¯å¦ç›¸ç¬¦ã€‚\nRISC-V Compressed-Extension ä¸­çš„ c.ebreakã€c.jalrã€åŠ c.add æŒ‡ä»¤ï¼Œç”±äºè¿™ä¸‰ä¸ªæŒ‡ä»¤çš„æ ¼å¼éå¸¸ç›¸ä¼¼ï¼Œå› æ­¤éå¸¸é€‚åˆä½¿ç”¨ Pattern Group æ¥å®šä¹‰ï¼š\nRISC-V spec. ä¸­å®šä¹‰ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image C.EBREAKæŒ‡ä»¤ä¸C.ADDæŒ‡ä»¤å…±äº«ç›¸åŒçš„opcodeï¼Œä½†æ˜¯rdå’Œrs2éƒ½ä¸ºzeroï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨CRæ ¼å¼ã€‚ C.JALRæŒ‡ä»¤åªæœ‰åœ¨rs1â‰ x0æ—¶æ‰æœ‰æ•ˆï¼›å½“rs1=x0æ—¶ï¼Œå¯¹åº”çš„ä»£ç ç‚¹æ˜¯C.EBREAKæŒ‡ä»¤ã€‚ C.ADDæŒ‡ä»¤åªæœ‰åœ¨rs2â‰ x0æ—¶æ‰æœ‰æ•ˆï¼›å½“rs2=x0æ—¶ï¼Œå¯¹åº”çš„ä»£ç ç‚¹æ˜¯C.JALRå’ŒC.EBREAKæŒ‡ä»¤ã€‚å…·æœ‰rs2Ì¸=x0å’Œrd=x0çš„ä»£ç ç‚¹æ˜¯HINTsã€‚ c.ebreakã€c.jalrã€c.add ä¸‰ä¸ªæŒ‡ä»¤ï¼š\ninsn[15:13]ã€insn[12]ã€insn[1:0] çš„å€¼çš†ç›¸åŒã€‚ å½“ insn[11:7] ä¸” insn[6:2] çš„å€¼çš†ä¸º 0 (rs1=0 ä¸” rs2=0) æ—¶ä¸º c.ebreak æŒ‡ä»¤ã€‚ å½“åªæœ‰ insn[11:7] çš„å€¼ä¸º 0 (rs1=0 ä¸” rs2â‰ 0) æ—¶ä¸º c.jalr æŒ‡ä»¤ã€‚ å¦åˆ™ä¸º c.add æŒ‡ä»¤ (rs1â‰ x0 ä¸” rs2â‰ 0)ã€‚ # Fields %rd 7:5 %rs2_5 2:5 # Argument Sets \u0026amp;r rd rs1 rs2 !extern \u0026amp;i imm rs1 rd !extern # Formats @cr .... ..... ..... .. \u0026amp;r rs2=%rs2_5 rs1=%rd %rd @c_jalr ... . ..... ..... .. \u0026amp;i imm=0 rs1=%rd # Pattern Groups { ebreak 100 1 00000 00000 10 jalr 100 1 ..... 00000 10 @c_jalr rd=1 # C.JALR add 100 1 ..... ..... 10 @cr } æ‰€ç”Ÿæˆçš„ decoder å¦‚ä¸‹ï¼š\nstatic void decode_insn16_extract_c_jalr(DisasContext *ctx, arg_i *a, uint16_t insn) { a-\u0026gt;imm = 0; a-\u0026gt;rs1 = extract32(insn, 7, 5); } static void decode_insn16_extract_cr(DisasContext *ctx, arg_r *a, uint16_t insn) { a-\u0026gt;rs2 = extract32(insn, 2, 5); a-\u0026gt;rs1 = extract32(insn, 7, 5); a-\u0026gt;rd = extract32(insn, 7, 5); } static void decode_insn16_extract_decode_insn16_Fmt_2(DisasContext *ctx, arg_decode_insn162 *a, uint16_t insn) {} static bool decode_insn16(DisasContext *ctx, uint16_t insn) { union { arg_decode_insn162 f_decode_insn162; arg_i f_i; arg_r f_r; } u; switch (insn \u0026amp; 0x0000f003) { case 0x00009002: if ((insn \u0026amp; 0x00000ffc) == 0x00000000) { decode_insn16_extract_decode_insn16_Fmt_2(ctx, \u0026amp;u.f_decode_insn162, insn); if (trans_ebreak(ctx, \u0026amp;u.f_decode_insn162)) return true; } if ((insn \u0026amp; 0x0000007c) == 0x00000000) { decode_insn16_extract_c_jalr(ctx, \u0026amp;u.f_i, insn); u.f_i.rd = 1; if (trans_jalr(ctx, \u0026amp;u.f_i)) return true; } decode_insn16_extract_cr(ctx, \u0026amp;u.f_r, insn); if (trans_add(ctx, \u0026amp;u.f_r)) return true; return false; } return false; } å½“æŒ‡ä»¤æ ¼å¼ç¬¦åˆ c.ebreakã€c.jalrã€c.add çš„ Pattern Group æ—¶ï¼Œä¼šä¾åºåˆ¤æ–­è¯¥æŒ‡ä»¤æ˜¯å¦ç¬¦åˆ c.ebreakã€c.jalrã€c.add çš„å®šä¹‰ä»¥åŠå…¶å¯¹åº”çš„ trans_*()ã€‚\nå¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨ c_jalr Format å’Œ jalr Pattern ä¸­æœ‰åˆ†åˆ«æŒ‡å®šå…¶ imm åŠ rd çš„å€¼ä¸º 0ï¼Œæ‰€ç”Ÿæˆçš„ codes ä¹Ÿä¼šåˆ†åˆ«åœ¨å¯¹åº”çš„åœ°æ–¹å°†è¯¥å€¼è®¾ä¸º 0 (è§ codes æ³¨è§£è¯´æ˜)ã€‚\næ€»ç»“ ä»¥ä¸Šå°±æ˜¯ Decodetree çš„è¯­æ³•è¯´æ˜ã€‚é€šè¿‡ Decodetreeï¼Œæˆ‘ä»¬ä¸ç”¨å†åƒä»¥å‰ä»¥æ ·å†™ä¸€å¤§åŒ…çš„ switch-case æ¥ decode æŒ‡ä»¤ã€‚å°†ä¸åŒç±»å‹çš„æŒ‡ä»¤å†™è‡³ä¸åŒçš„ decode æ¡£ï¼Œä¸ä»…æ–¹ä¾¿ç»´æŠ¤ï¼Œé˜…è¯»èµ·æ¥ä¹Ÿæ›´ä¸ºå®¹æ˜“ã€‚\n--translateï¼štranslator function çš„ prefixï¼Œé»˜è®¤ä¸º transã€‚ä¸€æ—¦æŒ‡å®šåï¼Œtranslator function çš„ scope å°±ä¸ä¼šå†æ˜¯ staticã€‚ --decodeï¼šdecode function çš„ prefixï¼Œé»˜è®¤ä¸º decodeï¼Œä¸” scope ä¸º staticã€‚ä¸€æ—¦æŒ‡å®šåï¼Œdecode function çš„ scope å°±ä¸ä¼šå†æ˜¯ staticã€‚ --static-decodeï¼šå¦‚åŒ --decodeï¼Œä¸è¿‡ decode function çš„ scope ä»ç»´æŒä¸º staticã€‚ -o / --outputï¼šæŒ‡å®šç”Ÿæˆçš„ decoder .c æ¡£è·¯å¾„ã€‚ -w / --insnwidthï¼šæŒ‡ä»¤é•¿åº¦ï¼Œegï¼š32 or 16ï¼Œé»˜è®¤ä¸º 32ã€‚ --varinsnwidthï¼šæŒ‡ä»¤ä¸ºä¸å®šé•¿åº¦ã€‚ æœ€åä¸€ä¸ªå‚æ•°ä¸ºè¾“å…¥çš„ decode æ¡£è·¯å¾„ã€‚ è¿è¡ŒèŒƒä¾‹ï¼š\n./decodetree.py -o target/riscv/decode_insn16.inc.c --static-decode decode_insn16 \\ -w 16 ./insn16.decode static inline int32_t sextract32(uint32_t value, int start, int length){ assert(start \u0026gt;= 0 \u0026amp;\u0026amp; length \u0026gt; 0 \u0026amp;\u0026amp; length \u0026lt;= 32 - start); return ((int32_t)(value \u0026lt;\u0026lt; (32 - length - start))) \u0026gt;\u0026gt; (32 - length);} ","permalink":"https://lifeislife.cn/posts/qemu-decodetree%E8%AF%A6%E8%A7%A3/","summary":"\u003cp\u003eQEMU åœ¨ decode æŒ‡ä»¤çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨å„å¹³å°æ‰€å®šä¹‰çš„ instruction decoders æ¥è§£ææŒ‡ä»¤ã€‚å¦‚åœ¨ ARM å¹³å°ä¸‹ï¼Œå°±å®šä¹‰äº†ï¼š\u003ccode\u003edisas_arm_insn()\u003c/code\u003eã€\u003ccode\u003edisas_thumb_insn()\u003c/code\u003e åŠ \u003ccode\u003edisas_thumb2_insn()\u003c/code\u003e ç­‰æ¥åˆ†åˆ«è´Ÿè´£ ARM 32-bits æŒ‡ä»¤ã€ARM Thumb æŒ‡ä»¤åŠ ARM Thumb2 æŒ‡ä»¤çš„è§£æã€‚\u003c/p\u003e","title":"QEMU Decodetreeè¯¦è§£"},{"content":"ä¸ºäº†é¿å…qBittorrnetåœ¨ä¸‹è½½æ–‡ä»¶æ—¶å¯¹æœºæ¢°ç¡¬ç›˜é¢‘ç¹è¯»å†™ï¼Œå¯ä»¥å°†å›ºæ€ç¡¬ç›˜ä½œä¸ºä¸´æ—¶ä¸‹è½½ç›˜ï¼Œåœ¨ä¸‹è½½å®Œæˆåå†å°†æ–‡ä»¶ç§»åŠ¨åˆ°æœºæ¢°ç¡¬ç›˜ã€‚qBittorrentkå¯ä»¥é€šè¿‡ç®€å•çš„è®¾ç½®å°±èƒ½å®ç°è¿™ä¸€ç›®çš„ã€‚\né¦–å…ˆéœ€è¦å°†å›ºæ€ç¡¬ç›˜æ˜ å°„åˆ°qBittorrentçš„å®¹å™¨ä¸­ã€‚æˆ‘æ˜¯ä½¿ç”¨docker-composeéƒ¨ç½²çš„qBittorrentï¼Œæ‰€ä»¥éœ€è¦åœ¨docker-compose.ymlä¸­æ·»åŠ ä¸€ä¸ªvolumeï¼š\nservices: qbittorrent: image: linuxserver/qbittorrent:latest container_name: qbittorrent restart: always ports: - 8080:8080 environment: - TZ=Asia/Shanghai volumes: - /root/sharedfolder/appdata/qbittorrent:/config - /root/sharedfolder/downloads/qbittorrent:/downloads - /srv/download-disk/downloads/qbittorrent:/download-disk å…¶ä¸­/root/sharedfolder/downloads/qbittorrent:/downloadsæ˜¯åŸæ¥æœºæ¢°ç¡¬ç›˜çš„ç›®å½•ï¼Œæˆ‘ä»¬ä¸éœ€è¦åŠ¨ä»–ã€‚/srv/download-disk/downloads/qbittorrent:/download-diskæ˜¯æ–°çš„å›ºæ€ç¡¬ç›˜çš„ç›®å½•ï¼Œæˆ‘åœ¨download-diskç›®å½•ä¸‹æ–°å»ºäº†å’Œä¹‹å‰ä¸€æ ·çš„ç›®å½•ç»“æ„ã€‚å°†å®ƒæ˜ å°„åˆ°å®¹å™¨çš„/download-diskç›®å½•ä¸‹ã€‚\nè¿›å…¥qBittorrentçš„webé¡µé¢ï¼Œå…ˆå…¨é€‰æ‰€æœ‰çš„ä»»åŠ¡ï¼Œå°†ä»»åŠ¡æš‚åœã€‚\nç‚¹å‡»å·¥å…·-\u0026gt;é€‰é¡¹-\u0026gt;ä¸‹è½½ï¼Œè®¾ç½®ä¿å­˜æœªå®Œæˆçš„æ–‡ä»¶åˆ°å›ºæ€ç¡¬ç›˜ã€‚è·¯å¾„å°±æ˜¯æˆ‘ä»¬åœ¨docker-compose.ymlä¸­è®¾ç½®çš„/download-diskç›®å½•ä¸‹çš„qbincompleteç›®å½•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é‡å¯qBittorrentå®¹å™¨ï¼Œè¿™æ ·å°±è®¾ç½®å¥½äº†ã€‚\nå†æ¬¡ç™»å½•qBittorrentçš„webé¡µé¢ï¼ŒqBittorrentä¼šè‡ªåŠ¨å°†ä¹‹å‰æš‚åœçš„ä»»åŠ¡éƒ½ç§»åŠ¨åˆ°å›ºæ€ç¡¬ç›˜/download-diskä¸­ã€‚ä½ åœ¨å®¿ä¸»æœºçš„/srv/download-disk/downloads/qbittorrent/qbincompleteç›®å½•ä¸‹å°±èƒ½çœ‹åˆ°è¿™äº›ä»»åŠ¡ã€‚ä½ å¯ä»¥é‡æ–°å¯åŠ¨æ‰€æœ‰ä»»åŠ¡ï¼Œå½“ä»–ä»¬ç§»åŠ¨å®Œæˆåå°±ä¼šç»§ç»­ä¸‹è½½ã€‚ä¸‹è½½å®Œæˆåå°±ä¼šè‡ªåŠ¨ç§»åŠ¨åˆ°æœºæ¢°ç¡¬ç›˜ä¸­ã€‚ä¹Ÿå°±æ˜¯ä½ è®¾ç½®çš„é»˜è®¤ä¸‹è½½ä½ç½®ï¼Œæ¯”å¦‚æˆ‘çš„ä¸‹è½½ä½ç½®ä¸º/root/sharedfolder/downloads/qbittorrent/qbcompleteã€‚\n","permalink":"https://lifeislife.cn/posts/qbittorrent%E8%AE%BE%E7%BD%AE%E5%8D%95%E7%8B%AC%E7%9A%84%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E4%BD%9C%E4%B8%BA%E4%B8%B4%E6%97%B6%E4%B8%8B%E8%BD%BD%E7%9B%98/","summary":"\u003cp\u003eä¸ºäº†é¿å…qBittorrnetåœ¨ä¸‹è½½æ–‡ä»¶æ—¶å¯¹æœºæ¢°ç¡¬ç›˜é¢‘ç¹è¯»å†™ï¼Œå¯ä»¥å°†å›ºæ€ç¡¬ç›˜ä½œä¸ºä¸´æ—¶ä¸‹è½½ç›˜ï¼Œåœ¨ä¸‹è½½å®Œæˆåå†å°†æ–‡ä»¶ç§»åŠ¨åˆ°æœºæ¢°ç¡¬ç›˜ã€‚qBittorrentkå¯ä»¥é€šè¿‡ç®€å•çš„è®¾ç½®å°±èƒ½å®ç°è¿™ä¸€ç›®çš„ã€‚\u003c/p\u003e","title":"qBittorrent è®¾ç½®å•ç‹¬çš„å›ºæ€ç¡¬ç›˜ä½œä¸ºä¸´æ—¶ä¸‹è½½ç›˜"},{"content":"ç”¨qBittorrentä¸‹è½½æ–‡ä»¶æœ‰äº›èµ„æºä¸Šä¼ ç‡å¾ˆä½ï¼Œä¸‹è½½å¾ˆæ…¢ï¼Œå°±ä¼šå¯¹æœºæ¢°ç¡¬ç›˜é¢‘ç¹è¯»å†™ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç¡¬ç›˜å¯¿å‘½ç¼©çŸ­ã€‚è™½ç„¶ç»„äº†RAID5ï¼Œä½†æ˜¯è¿˜æ˜¯å¸Œæœ›ç¡¬ç›˜èƒ½æ´»å¾—ä¹…ä¸€ç‚¹å§ã€‚æ‰€ä»¥ä¹°äº†ä¸€å—æ–°å›ºæ€ä¸“é—¨ç”¨æ¥ä¸‹è½½æ–‡ä»¶ï¼Œä½œä¸ºä¸´æ—¶å­˜æ”¾ï¼Œç­‰æ–‡ä»¶ä¸‹è½½å®Œäº†å†æ•´å—æ‹·è´åˆ°RAID5é‡Œã€‚OMVæœ¬æ¥æŒ‚è½½æ–°ç¡¬ç›˜å¾ˆç®€å•çš„ï¼ŒUIé¡µé¢ç‚¹ç‚¹å°±å¯ä»¥äº†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºæˆ‘è¿™å—ç¡¬ç›˜æ˜¯é€šè¿‡PCIeè½¬æ¥å¡æ¥åœ¨ä¸»æ¿ä¸Šçš„ï¼ŒæŒ‚è½½ä¸€ç›´æŠ¥é”™ã€‚\nOMV\\ExecException: Failed to execute command \u0026#39;export PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin; export LANG=C.UTF-8; omv-salt deploy run --no-color fstab 2\u0026gt;\u0026amp;1\u0026#39; with exit code \u0026#39;1\u0026#39;: /usr/lib/python3/dist-packages/requests/__init__.py:91: RequestsDependencyWarning: urllib3 (1.26.18) or chardet (3.0.4) doesn\u0026#39;t match a supported version! RequestsDependencyWarning) ç½‘ä¸Šæ‰¾äº†ä¸€åœˆä¹Ÿæ²¡æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œåªå¥½è‡ªå·±æ‰‹åŠ¨æŒ‚è½½äº†ã€‚\né¦–å…ˆæŸ¥çœ‹æ–°ç¡¬ç›˜çš„è®¾å¤‡åï¼š\nlsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT nvme0n1 259:0 0 931.5G 0 disk ä½¿ç”¨fdiskå‘½ä»¤å¯¹ç¡¬ç›˜è¿›è¡Œåˆ†åŒºï¼š\nfdisk /dev/nvme0n1 Welcome to fdisk (util-linux 2.39.1). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. # è¾“å…¥nè¡¨ç¤ºæ–°å»ºåˆ†åŒº Command (m for help): n Partition type p primary (2 primary, 0 extended, 2 free) e extended (container for logical partitions) # è¾“å…¥pè¡¨ç¤ºä¸»åˆ†åŒº Select (default p): p # åˆ†åŒºå·ç›´æ¥å›è½¦ä½¿ç”¨é»˜è®¤çš„ï¼Œæ–°ç¡¬ç›˜åº”è¯¥ä¸º1 Partition number (2-128, default 2): # è¾“å…¥ä¸¤æ¬¡å›è½¦ä½¿ç”¨é»˜è®¤çš„ï¼Œä»ç¬¬ä¸€ä¸ªæ‰‡åŒºå¼€å§‹ï¼Œåˆ°æœ€åä¸€ä¸ªæ‰‡åŒºç»“æŸï¼Œå³æ•´ä¸ªç¡¬ç›˜ # æˆ‘å› ä¸ºå·²ç»åˆ†åŒºå®Œäº†ï¼Œæ‰€ä»¥æ‰¾äº†ä»¥å‰çš„ç¬”è®°ï¼Œæ‰€ä»¥æ‰‡åŒºå·å’Œå®é™…çš„å¤§å°ï¼Œä½ ä»¬åªéœ€è¦ä¸¤æ¬¡å›è½¦å°±è¡Œäº† First sector (1001472-452984798, default 1001472): Last sector, +/-sectors or +/-size{K,M,G,T,P} (1001472-452984798, default 452982783): # è¾“å…¥wä¿å­˜é€€å‡º Command (m for help): w The partition table has been altered. Calling ioctl() to re-read partition table. Syncing disks. # åˆ†åŒºå®Œæˆäº† æ ¼å¼åŒ–åˆ†åŒºï¼š\nmkfs.ext4 /dev/nvme0n1p1 mke2fs 1.44.5 (15-Dec-2018) Creating filesystem with 244189696 4k blocks and 61054976 inodes Filesystem UUID: 1b1b1b1b-1b1b-1b1b-1b1b-1b1b1b1b1b1b Superblock backups stored on blocks: 32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 102400000, 214990848 åˆ›å»ºæŒ‚è½½ç‚¹ï¼š\n# åœ¨NASä¸Šåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç”¨æ¥æŒ‚è½½æ–°ç¡¬ç›˜ï¼Œæˆ‘çš„ç¡¬ç›˜éƒ½æŒ‚è½½åœ¨äº†srvç›®å½•ä¸‹ï¼Œæ‰€ä»¥è¿™é‡Œä¹ŸæŒ‚è½½åœ¨srvä¸‹ mkdir /srv/download-disk æŒ‚è½½ç¡¬ç›˜ï¼š\nmount /dev/nvme0n1p1 /srv/download-disk æŸ¥çœ‹æŒ‚è½½æƒ…å†µï¼š\n$ df -h Filesystem Size Used Avail Use% Mounted on udev 7.6G 0 7.6G 0% /dev tmpfs 1.6G 13M 1.5G 1% /run /dev/sda1 116G 97G 14G 88% / tmpfs 7.6G 0 7.6G 0% /dev/shm tmpfs 5.0M 0 5.0M 0% /run/lock tmpfs 7.6G 0 7.6G 0% /sys/fs/cgroup /dev/nvme0n1p1 916G 28K 870G 1% /srv/download-disk ä¸ºæ–‡ä»¶ç³»ç»Ÿæ‰“ä¸Šæ ‡ç­¾ï¼Œä¸ºäº†èƒ½åœ¨NASä¸­èƒ½æ–¹ä¾¿åŒºåˆ†ç¡¬ç›˜ï¼Œæˆ‘å°±ç”¨äº†ç¡¬ç›˜çš„å“ç‰Œå’Œå®¹é‡ï¼š\ne2label /dev/nvme0n1p1 Kingston1tb æŸ¥çœ‹æ ‡ç­¾ï¼š\n$ blkid è®¾ç½®è‡ªåŠ¨æŒ‚è½½ï¼Œç¼–è¾‘/etc/fstabæ–‡ä»¶ï¼Œæ¯æ¬¡é‡å¯åéƒ½ä¼šè‡ªåŠ¨æŒ‚è½½ï¼š\necho \u0026#34;/dev/nvme0n1p1 /srv/download-disk ext4 defaults 0 0\u0026#34; \u0026gt;\u0026gt; /etc/fstab ","permalink":"https://lifeislife.cn/posts/linux%E6%8C%82%E8%BD%BD%E6%96%B0%E7%A1%AC%E7%9B%98/","summary":"\u003cp\u003eç”¨qBittorrentä¸‹è½½æ–‡ä»¶æœ‰äº›èµ„æºä¸Šä¼ ç‡å¾ˆä½ï¼Œä¸‹è½½å¾ˆæ…¢ï¼Œå°±ä¼šå¯¹æœºæ¢°ç¡¬ç›˜é¢‘ç¹è¯»å†™ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç¡¬ç›˜å¯¿å‘½ç¼©çŸ­ã€‚è™½ç„¶ç»„äº†RAID5ï¼Œä½†æ˜¯è¿˜æ˜¯å¸Œæœ›ç¡¬ç›˜èƒ½æ´»å¾—ä¹…ä¸€ç‚¹å§ã€‚æ‰€ä»¥ä¹°äº†ä¸€å—æ–°å›ºæ€ä¸“é—¨ç”¨æ¥ä¸‹è½½æ–‡ä»¶ï¼Œä½œä¸ºä¸´æ—¶å­˜æ”¾ï¼Œç­‰æ–‡ä»¶ä¸‹è½½å®Œäº†å†æ•´å—æ‹·è´åˆ°RAID5é‡Œã€‚OMVæœ¬æ¥æŒ‚è½½æ–°ç¡¬ç›˜å¾ˆç®€å•çš„ï¼ŒUIé¡µé¢ç‚¹ç‚¹å°±å¯ä»¥äº†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºæˆ‘è¿™å—ç¡¬ç›˜æ˜¯é€šè¿‡PCIeè½¬æ¥å¡æ¥åœ¨ä¸»æ¿ä¸Šçš„ï¼ŒæŒ‚è½½ä¸€ç›´æŠ¥é”™ã€‚\u003c/p\u003e","title":"LinuxæŒ‚è½½æ–°ç¡¬ç›˜"},{"content":"ç¼–è¯‘æºç  ä¸‹è½½é…ç½®å·¥å…·é“¾ è®¿é—®ARM å®˜ç½‘ä¸‹è½½å·¥å…·é“¾ä¸‹è½½è‡ªå·±ç³»ç»Ÿçš„ç‰ˆæœ¬çš„å·¥å…·é“¾ã€‚å¦‚æœä½ ä¹Ÿæ˜¯ x86_64 çš„ Linux ç³»ç»Ÿï¼Œç›´æ¥ç‚¹å‡»è¯¥é“¾æ¥ä¸‹è½½ arm-gnu-toolchain-13.3\nè§£å‹å·¥å…·é“¾ï¼š\nxz -d arm-gnu-toolchain-13.3.rel1-x86_64-aarch64-none-linux-gnu.tar.xz tar -xvf arm-gnu-toolchain-13.3.rel1-x86_64-aarch64-none-linux-gnu.tar å°†å·¥å…·é“¾è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚\nç¼–è¯‘æºç  æºç ä½¿ç”¨ CMake è¿›è¡Œç¼–è¯‘ï¼ŒCMake ç‰ˆæœ¬éœ€è¦ 3.18.4 ä»¥ä¸Šã€‚å¦‚æœä½ æ˜¯ Ubuntu 20.04ï¼Œç›´æ¥å®‰è£…å³å¯ã€‚\nsudo apt install cmake å¦‚æœä½ æ˜¯ Ubuntu 18.04ï¼Œéœ€è¦å‡çº§ CMAKEã€‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼ä¸‹è½½æºç ç¼–è¯‘å®‰è£… CMAKEã€‚\nwget https://github.com/Kitware/CMake/releases/download/v3.22.0/cmake-3.22.0-linux-x86_64.tar.gz tar -zxvf cmake-3.22.0-linux-x86_64.tar.gz mv cmake-3.22.0-linux-x86_64 /usr/local/cmake export PATH=/usr/local/cmake/bin:$PATH æºç ç¼–è¯‘ï¼š\nmake -f Makefile.cmake PRODUCT=totalcompute/tc2 MODE=debug firmware-scp_ramfw æºç ç¼–è¯‘æˆåŠŸåï¼Œä¼šåœ¨build/tc2/GNU/debug/firmware-scp_ramfw/binç›®å½•ä¸‹ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ã€‚å…·ä½“ç¼–è¯‘å‚æ•°ï¼Œå¯ä»¥å‚è€ƒæºç æ ¹ç›®å½•ä¸‹çš„user_guideæ–‡æ¡£ã€‚\nåˆå§‹åŒ–æµç¨‹åˆ†æ \u003c!DOCTYPE html\u003e Responsive Image fwk_module_init åˆå§‹æ—¶ï¼Œmodule_config_table æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¢«åˆå§‹åŒ–çš„ï¼Ÿ module_config_table æ— æ³•åœ¨æºç ä¸­ç›´æ¥æœç´¢åˆ°ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ï¼Œå½“ä½ ç¼–è¯‘ä¸€æ¬¡åï¼Œå°±ä¼šåœ¨ output/build/mpw/GNU/debug/firmware-scp_romfw/framework/src/fwk_module_list.c æ‰¾åˆ°è¿™ä¸ªå˜é‡ã€‚å…·ä½“å®ƒæ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Œæ³¨æ„é€šè¿‡ framework/CMakeLists.txt æ–‡ä»¶ä¸­çš„è¿™æ®µä»£ç å®Œæˆï¼Œæˆ‘ä»¬é€è¡Œåˆ†æè¿™æ®µä»£ç ã€‚\nlist(LENGTH SCP_MODULES SCP_MODULE_IDX_MAX) è·å–æ¨¡å—åˆ—è¡¨çš„é•¿åº¦ï¼Œä¿å­˜åœ¨ SCP_MODULE_IDX_MAX å˜é‡ä¸­ã€‚åœ¨æ¯ä¸ª Firmware.cmake æ–‡ä»¶ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª SCP_MODULES å˜é‡ï¼Œè¿™ä¸ªå˜é‡ä¿å­˜äº†è¯¥äº§å“æ‰€åŒ…å«çš„æ¨¡å—ã€‚\n# product/juno/scp_romfw/Firmware.cmake list(APPEND SCP_MODULES \u0026#34;test\u0026#34;) list(APPEND SCP_MODULES \u0026#34;uart\u0026#34;) å½“å‰æˆ‘ä»¬åŠ å…¥äº†ä¸¤ä¸ªæ¨¡å—ï¼Œæ‰€ä»¥ SCP_MODULE_IDX_MAX çš„å€¼ä¸º 2ã€‚\nforeach(idx RANGE ${SCP_MODULE_IDX_MAX}) if(idx EQUAL SCP_MODULE_IDX_MAX) string(APPEND SCP_MODULE_IDX_GEN \u0026#34; FWK_MODULE_IDX_COUNT = ${idx},\\n\u0026#34;) break() endif() éå†æ¨¡å—åˆ—è¡¨ï¼Œç”Ÿæˆæ¨¡å—ç´¢å¼•çš„å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š\nenum fwk_module_idx { FWK_MODULE_IDX_COUNT = 0, }; list(GET SCP_MODULES ${idx} SCP_MODULE) å°† SCP_MODULES åˆ—è¡¨ä¸­ç´¢å¼•ä¸º idx çš„å…ƒç´ èµ‹å€¼ç»™å˜é‡ SCP_MODULEï¼Œä»¥ä¾¿åœ¨åç»­çš„ä»£ç ä¸­ä½¿ç”¨ã€‚å½“å‰ idx ä¸º 0ï¼Œæ‰€ä»¥ SCP_MODULE ä¸º testã€‚\nstring(MAKE_C_IDENTIFIER ${SCP_MODULE} SCP_MODULE) string(TOUPPER ${SCP_MODULE} SCP_MODULE_UPPER) å°† SCP_MODULE è½¬æ¢ä¸º C æ ‡è¯†ç¬¦ã€‚å°† SCP_MODULE è½¬ä¸ºå¤§å†™å¹¶ä¿å­˜åœ¨ SCP_MODULE_UPPER ä¸­ï¼Œå³ SCP_MODULE_UPPER=\u0026quot;TEST\u0026quot;\nstring(APPEND SCP_MODULE_IDX_GEN \u0026#34; FWK_MODULE_IDX_${SCP_MODULE_UPPER} = ${idx},\\n\u0026#34;) string(APPEND SCP_MODULE_ID_INIT_GEN \u0026#34;#define FWK_MODULE_ID_${SCP_MODULE_UPPER}_INIT FWK_ID_MODULE_INIT(FWK_MODULE_IDX_${SCP_MODULE_UPPER})\\n\u0026#34;) string(APPEND SCP_MODULE_ID_GEN \u0026#34;#define FWK_MODULE_ID_${SCP_MODULE_UPPER} FWK_ID_MODULE(FWK_MODULE_IDX_${SCP_MODULE_UPPER})\\n\u0026#34;) string(APPEND SCP_MODULE_ID_CONST_GEN \u0026#34;static const fwk_id_t fwk_module_id_${SCP_MODULE} = FWK_MODULE_ID_${SCP_MODULE_UPPER}_INIT;\\n\u0026#34;) string(APPEND SCP_MODULE_EXTERN_GEN \u0026#34;extern const struct fwk_module module_${SCP_MODULE};\\n\u0026#34;) string(APPEND SCP_MODULE_EXTERN_CONFIG_GEN \u0026#34;extern const struct fwk_module_config config_${SCP_MODULE};\\n\u0026#34;) string(APPEND SCP_MODULE_GEN \u0026#34; \u0026amp;module_${SCP_MODULE},\\n\u0026#34;) string(APPEND SCP_MODULE_CONFIG_GEN \u0026#34; \u0026amp;config_${SCP_MODULE},\\n\u0026#34;) è¿›è¡Œä¸€äº›å®æ›¿æ¢ï¼Œæ›¿æ¢åçš„ç»“æœå¦‚ä¸‹ï¼š\nSCP_MODULE_IDX_GEN: \u0026#34; FWK_MODULE_IDX_TEST = 0,\u0026#34; SCP_MODULE_ID_INIT_GEN: \u0026#34;#define FWK_MODULE_ID_TEST_INIT FWK_ID_MODULE_INIT(FWK_MODULE_IDX_TEST)\u0026#34; SCP_MODULE_ID_GEN: \u0026#34;#define FWK_MODULE_ID_TEST FWK_ID_MODULE(FWK_MODULE_IDX_TEST)\u0026#34; SCP_MODULE_ID_CONST_GEN: \u0026#34;static const fwk_id_t fwk_module_id_test = FWK_MODULE_ID_TEST_INIT;\u0026#34; SCP_MODULE_EXTERN_GEN: \u0026#34;extern const struct fwk_module module_test;\u0026#34; SCP_MODULE_EXTERN_CONFIG_GEN: \u0026#34;extern const struct fwk_module_config config_test;\u0026#34; SCP_MODULE_GEN: \u0026#34;\u0026amp;module_test,\u0026#34; SCP_MODULE_CONFIG_GEN: \u0026#34;\u0026amp;config_test,\u0026#34; target_compile_definitions(framework PUBLIC \u0026#34;BUILD_HAS_MOD_${SCP_MODULE_UPPER}=1\u0026#34;) å°† BUILD_HAS_MOD_TEST å®šä¹‰ä¸º 1ï¼Œä»¥ä¾¿åœ¨åç»­çš„ä»£ç ä¸­ä½¿ç”¨ã€‚\nåœ¨æºç æ–‡ä»¶ä¸­æœ‰ä¸¤ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œåˆ†åˆ«ä¸º fwk_module_list.c.in å’Œ fwk_module_idx.h.inï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­åŒ…å«äº†ä¸€äº›å®å®šä¹‰ï¼Œè¿™äº›å®å®šä¹‰åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šè¢«æ›¿æ¢ä¸ºä¸Šé¢ç”Ÿæˆçš„å®å®šä¹‰ã€‚\n#include \u0026lt;stddef.h\u0026gt; @SCP_MODULE_EXTERN_GEN@ const struct fwk_module *module_table[FWK_MODULE_IDX_COUNT] = { @SCP_MODULE_GEN@ }; @SCP_MODULE_EXTERN_CONFIG_GEN@ const struct fwk_module_config *module_config_table[FWK_MODULE_IDX_COUNT] = { @SCP_MODULE_CONFIG_GEN@ }; #include \u0026lt;fwk_id.h\u0026gt; @SCP_MODULE_ID_INIT_GEN@ @SCP_MODULE_ID_GEN@ enum fwk_module_idx { @SCP_MODULE_IDX_GEN@ }; @SCP_MODULE_ID_CONST_GEN@ åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°±ä¼šç”Ÿæˆä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶ï¼Œå½“ä½¿ç”¨module_config_tableæ—¶ï¼Œå°±ä¼šå¼•ç”¨è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°å¯¹åº”çš„é…ç½®ã€‚\n// build/mpw/GNU/debug/firmware-scp_romfw/framework/include/fwk_module_idx.h #define FWK_MODULE_ID_TEST_INIT FWK_ID_MODULE_INIT(FWK_MODULE_IDX_TEST) #define FWK_MODULE_ID_UART_INIT FWK_ID_MODULE_INIT(FWK_MODULE_IDX_UART) #define FWK_MODULE_ID_TEST FWK_ID_MODULE(FWK_MODULE_IDX_TEST) #define FWK_MODULE_ID_UART FWK_ID_MODULE(FWK_MODULE_IDX_UART) enum fwk_module_idx { FWK_MODULE_IDX_TEST = 0, FWK_MODULE_IDX_UART = 1, FWK_MODULE_IDX_COUNT = 2, }; static const fwk_id_t fwk_module_id_test = FWK_MODULE_ID_TEST_INIT; static const fwk_id_t fwk_module_id_uart = FWK_MODULE_ID_UART_INIT; // build/mpw/GNU/debug/firmware-scp_romfw/framework/src/fwk_module_list.c extern const struct fwk_module module_test; extern const struct fwk_module module_uart; const struct fwk_module *module_table[FWK_MODULE_IDX_COUNT] = { \u0026amp;module_test, \u0026amp;module_uart, }; extern const struct fwk_module_config config_test; extern const struct fwk_module_config config_uart; const struct fwk_module_config *module_config_table[FWK_MODULE_IDX_COUNT] = { \u0026amp;config_test, \u0026amp;config_uart, }; å¦‚ä½•ç¡®å®šå„ä¸ªæ¨¡å—åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­çš„æ‰§è¡Œé¡ºåºï¼Ÿ åœ¨æ¯ä¸ªäº§å“ç›®å½• mscp/product/juno/scp_romfw/Firmware.cmake ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª Firmware.cmake æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ä¼šåŒ…å«è¯¥äº§å“æ‰€åŒ…å«çš„æ¨¡å—ï¼š\nlist(APPEND SCP_MODULES \u0026#34;juno-ppu\u0026#34;) list(APPEND SCP_MODULES \u0026#34;juno-rom\u0026#34;) list(APPEND SCP_MODULES \u0026#34;gtimer\u0026#34;) list(APPEND SCP_MODULES \u0026#34;sds\u0026#34;) list(APPEND SCP_MODULES \u0026#34;bootloader\u0026#34;) list(APPEND SCP_MODULES \u0026#34;juno-soc-clock\u0026#34;) ç¼–è¯‘åä¼šåœ¨ output æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆfwk_module_idx.hæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ä¼šåŒ…å«æ‰€æœ‰æ¨¡å—çš„ç´¢å¼•ï¼Œå¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/scp-firmware%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E4%BB%A5%E5%8F%8A%E6%A8%A1%E5%9D%97%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B/","summary":"\u003ch2 id=\"ç¼–è¯‘æºç \"\u003eç¼–è¯‘æºç \u003c/h2\u003e\n\u003ch3 id=\"ä¸‹è½½é…ç½®å·¥å…·é“¾\"\u003eä¸‹è½½é…ç½®å·¥å…·é“¾\u003c/h3\u003e\n\u003cp\u003eè®¿é—®\u003ca href=\"https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads\"\u003eARM å®˜ç½‘ä¸‹è½½å·¥å…·é“¾\u003c/a\u003eä¸‹è½½è‡ªå·±ç³»ç»Ÿçš„ç‰ˆæœ¬çš„å·¥å…·é“¾ã€‚å¦‚æœä½ ä¹Ÿæ˜¯ x86_64 çš„ Linux ç³»ç»Ÿï¼Œç›´æ¥ç‚¹å‡»\u003ca href=\"https://developer.arm.com/-/media/Files/downloads/gnu/13.3.rel1/binrel/arm-gnu-toolchain-13.3.rel1-x86_64-aarch64-none-linux-gnu.tar.xz\"\u003eè¯¥é“¾æ¥ä¸‹è½½ arm-gnu-toolchain-13.3\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eè§£å‹å·¥å…·é“¾ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003exz -d arm-gnu-toolchain-13.3.rel1-x86_64-aarch64-none-linux-gnu.tar.xz\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etar -xvf arm-gnu-toolchain-13.3.rel1-x86_64-aarch64-none-linux-gnu.tar\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå°†å·¥å…·é“¾è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚\u003c/p\u003e\n\u003ch3 id=\"ç¼–è¯‘æºç -1\"\u003eç¼–è¯‘æºç \u003c/h3\u003e\n\u003cp\u003eæºç ä½¿ç”¨ CMake è¿›è¡Œç¼–è¯‘ï¼ŒCMake ç‰ˆæœ¬éœ€è¦ 3.18.4 ä»¥ä¸Šã€‚å¦‚æœä½ æ˜¯ Ubuntu 20.04ï¼Œç›´æ¥å®‰è£…å³å¯ã€‚\u003c/p\u003e","title":"SCP-firmware æºç åˆ†æ - æºç ç¼–è¯‘ä»¥åŠæ¨¡å—åˆå§‹åŒ–æµç¨‹"},{"content":"é…ç½®é¡µé¢çš„èœå• åœ¨config.yamlä¸­é…ç½®menuå­—æ®µï¼Œå¦‚ä¸‹ï¼š\nmenu: main: - identifier: \u0026#34;archives\u0026#34; name: \u0026#34;å½’æ¡£\u0026#34; url: \u0026#34;/archives/\u0026#34; weight: 2 - identifier: \u0026#34;tags\u0026#34; name: \u0026#34;æ ‡ç­¾\u0026#34; url: \u0026#34;/tags/\u0026#34; weight: 3 - identifier: \u0026#34;categories\u0026#34; name: \u0026#34;åˆ†ç±»\u0026#34; url: \u0026#34;/categories/\u0026#34; weight: 4 å…¶ä¸­weightå­—æ®µè¡¨ç¤ºèœå•çš„æ’åºï¼Œæ•°å­—è¶Šå°è¶Šé å‰ã€‚æ­¤æ—¶é¡µé¢åº”è¯¥ä¼šæ˜¾ç¤ºè¿™ä¸‰ä¸ªèœå•ï¼Œä½†æ˜¯å½’æ¡£é¡µé¢æ˜¯ 404ï¼Œè¿˜éœ€è¦åœ¨åˆ›å»ºä¸€ä¸ªcontent/archives.mdæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n--- title: \u0026#34;Archive\u0026#34; layout: \u0026#34;archives\u0026#34; url: \u0026#34;/archives\u0026#34; summary: \u0026#34;archives\u0026#34; --- å…¶ä¸­æœ€å…³é”®çš„å°±æ˜¯layoutå­—æ®µï¼ŒæŒ‡å®šäº†è¿™ä¸ªé¡µé¢ä½¿ç”¨çš„æ¨¡æ¿ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯themes\\PaperMod\\layouts\\_default\\archives.htmlæ¨¡æ¿ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨content/archives.mdä¸­åªéœ€è¦åˆ¶å®šè¿™ä¸ªæ¨¡æ¿å°±è¡Œï¼Œä¸éœ€è¦å†æ·»åŠ å…¶ä»–å†…å®¹ï¼Œè¿™æ ·å°±èƒ½å¤Ÿè®©å½’æ¡£é¡µé¢æ­£å¸¸æ˜¾ç¤ºäº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹ layout æ¨¡æ¿ æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹ä¸»é¢˜ä¸­çš„æ–‡ä»¶ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ä¸»é¢˜æ›´æ–°æ—¶ä¸¢å¤±æˆ‘ä»¬çš„ä¿®æ”¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ä¸»é¢˜ä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°layoutsç›®å½•ä¸‹ï¼Œç„¶åå†è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ ·å°±ä¸ä¼šä¸¢å¤±æˆ‘ä»¬çš„ä¿®æ”¹äº†ã€‚hugo ä¼šä¼˜å…ˆä½¿ç”¨layoutsç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚\næ–‡ç« æ·»åŠ æ ‡ç­¾å’Œåˆ†ç±» åœ¨æ–‡ç« çš„å¤´éƒ¨æ·»åŠ tagså’Œcategorieså­—æ®µï¼Œå¦‚ä¸‹ï¼š\ntags: [ELF, C] categories: [C è¯­è¨€å…¥é—¨] æ–‡ç« æ·»åŠ å°é¢å›¾ åœ¨staticç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªimgç›®å½•ï¼Œç„¶åå°†å›¾ç‰‡a.jpgæ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œç„¶ååœ¨æ–‡ç« çš„å¤´éƒ¨æ·»åŠ coverå­—æ®µï¼Œå¦‚ä¸‹ï¼š\ncover: image: img/a.jpg # è®¾ç½®å›¾ç‰‡çš„å°æ ‡é¢˜ alt: \u0026#34;å›¾ç‰‡\u0026#34; caption: \u0026#34;å›¾ç‰‡\u0026#34; \u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»å›¾ç‰‡æ˜¾ç¤ºåŸå›¾ åœ¨config.yamlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\nparams: cover: linkFullImages: true è®¾ç½®é¢åŒ…å±‘å¯¼èˆª åœ¨config.yamlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\nparams: showBreadCrumbs: true \u003c!DOCTYPE html\u003e Responsive Image è®¾ç½®ä¸»é¡µæ¬¢è¿ä¿¡æ¯ åœ¨config.yamlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\nparams: homeInfoParams: title: \u0026#34;æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢\u0026#34; content: \u0026#34;è¿™é‡Œæ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œæ¬¢è¿è®¿é—®ã€‚\u0026#34; \u003c!DOCTYPE html\u003e Responsive Image ä¸»é¡µæ·»åŠ ç¤¾äº¤ç½‘ç«™ä¿¡æ¯ params: # ä¸»é¡µæ·»åŠ ç¤¾äº¤ç½‘ç«™å›¾æ ‡ socialIcons: - name: GitHub url: \u0026#34;https://github.com/Dunky-Z\u0026#34; \u003c!DOCTYPE html\u003e Responsive Image æ·»åŠ æœç´¢åŠŸèƒ½ æ·»åŠ ä»¥ä¸‹é…ç½®åˆ° config.yml æ–‡ä»¶ï¼ˆä¸Šè¿°é…ç½®æ–‡ä»¶å·²æœ‰ï¼Œæ­¤å¤„ä¸ç”¨é‡å¤æ·»åŠ ï¼‰\noutputs: home: - HTML - RSS - JSON # is necessary åœ¨ content æ–‡ä»¶å¤¹ä¸­åˆ›å»º search.md å¹¶æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š\n--- title: \u0026#34;ğŸ” æœç´¢\u0026#34; # in any language you want layout: \u0026#34;search\u0026#34; # is necessary # url: \u0026#34;/archive\u0026#34; # description: \u0026#34;Description for Search\u0026#34; summary: \u0026#34;search\u0026#34; placeholder: \u0026#34;æœç´¢æ¡†å†…çš„é»˜è®¤æ˜¾ç¤º\u0026#34; --- è¦ä½¿å¾—æŸäº›ç‰¹å®šçš„ä¸è¢«æœç´ åˆ°ï¼Œå¯ä»¥åœ¨åšå®¢å¼€å¤´æ·»åŠ ï¼š\n--- searchHidden: true æ›´æ”¹å­—ä½“ æ‰“å¼€è°·æ­Œå­—ä½“ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„å­—ä½“ï¼Œç‚¹å‡» Get Font-\u0026gt;Get embed codeï¼Œå¤åˆ¶ html å’Œ css ä¸¤éƒ¨åˆ†å¤‡ç”¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å°†ä¸»é¢˜ä¸­çš„themes\\PaperMod\\layouts\\partials\\extend_head.htmlæ–‡ä»¶å¤åˆ¶åˆ°åšå®¢ä¸»ç›®å½•ä¸‹çš„layout\\partials\\extend_head.htmlç›®å½•ä¸‹ï¼Œä¸€å®šè¦ä¿æŒç›®å½•ç»“æ„ä¸€è‡´ï¼Œæ²¡æœ‰çš„ç›®å½•è‡ªå·±åˆ›å»ºä¸€ä¸ªã€‚å°† Html ä»£ç ç²˜è´´åˆ°extend_head.htmlæ–‡ä»¶ä¸­ã€‚\nå°†ä¸»é¢˜ä¸­çš„themes\\PaperMod\\assets\\css\\extended\\blank.cssæ–‡ä»¶å¤åˆ¶åˆ°åšå®¢ä¸»ç›®å½•ä¸‹çš„assets\\css\\extended\\blank.cssç›®å½•ä¸‹ï¼ŒåŒæ ·éœ€è¦ä¿æŒç›®å½•ç»“æ„ä¸€è‡´ï¼Œå°† css ä»£ç ç²˜è´´åˆ°blank.cssæ–‡ä»¶ä¸­ã€‚æ³¨æ„ Google Font æä¾›çš„æ˜¯ä¸ª CSS æ¨¡æ¿ï¼Œæœ‰äº›å…·ä½“çš„å‚æ•°éœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼Œæ¯”å¦‚å°–æ‹¬å·é‡Œçš„å†…å®¹æ˜¯éœ€è¦è‡ªå·±å¡«å†™çš„ã€‚æˆ‘çš„ä¿®æ”¹å¦‚ä¸‹ï¼š\nbody{ font-family: \u0026#34;Noto Sans SC\u0026#34;, sans-serif; font-optical-sizing: auto; font-size: 1rem; line-height: 1.5; margin: 0; } ä¿®æ”¹ä»£ç å­—ä½“è¿‡ç¨‹ä¸€æ ·ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGoogle Font å¯ä»¥é€‰æ‹©å¤šä¸ªå­—ä½“ï¼Œæ¯”å¦‚æˆ‘é€‰æ‹©äº†ä¸¤ç§å­—ä½“ï¼Œä¸€ç§JetBrains+Monoç”¨äºä»£ç ï¼Œä¸€ç§Noto+Sans+SCç”¨äºä¸­æ–‡ï¼Œåœ¨é€‰æ‹©ç¬¬äºŒä¸ªå­—ä½“æ—¶ï¼Œç‚¹å‡» Get embed font é»˜è®¤ä¼šæŠŠhtmlä»£ç ä½•å¿…åœ¨äº†ä¸€èµ·ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š\n\u0026lt;link rel=\u0026#34;preconnect\u0026#34; href=\u0026#34;https://fonts.googleapis.com\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;preconnect\u0026#34; href=\u0026#34;https://fonts.gstatic.com\u0026#34; crossorigin\u0026gt; \u0026lt;link href=\u0026#34;https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800\u0026amp;family=Noto+Sans+SC:wght@100..900\u0026amp;display=swap\u0026#34; rel=\u0026#34;stylesheet\u0026#34;\u0026gt; åŠ å…¥ Disqus è¯„è®º å‰å¾€Disqus å®˜ç½‘æ³¨å†Œè´¦å·ï¼Œåˆ›å»ºä¸€ä¸ªç«™ç‚¹ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image ç„¶åå°†ç«™ç‚¹çš„shortnameå¤åˆ¶ä¸‹æ¥ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image ç„¶ååœ¨config.yamlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\nparams: env: production comments: true services: disqus: shortname: lifeislife-1 å›åˆ° Disqus å®˜ç½‘ï¼Œç‚¹å‡»Create a new siteï¼Œç­‰å‡ åˆ†é’Ÿåˆ›å»ºå®Œæˆã€‚å®‰è£…æ—¶æ‹‰åˆ°ä¸‹é¢é€‰æ‹©æ‰‹åŠ¨å®‰è£…ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æŠŠä»£ç å—å¤åˆ¶ä¸‹æ¥ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¤åˆ¶ä¸»é¢˜ä¸­çš„themes\\PaperMod\\layouts\\partials\\comments.htmlæ–‡ä»¶åˆ°åšå®¢ä¸»ç›®å½•ä¸‹çš„layouts\\partials\\comments.htmlç›®å½•ä¸‹ï¼Œç„¶åå°† Disqus æä¾›çš„ä»£ç ç²˜è´´åˆ°comments.htmlæ–‡ä»¶ä¸­ã€‚\n\u0026lt;div id=\u0026#34;disqus_thread\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */ /* var disqus_config = function () { this.page.url = PAGE_URL; // Replace PAGE_URL with your page\u0026#39;s canonical URL variable this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page\u0026#39;s unique identifier variable }; */ (function() { // DON\u0026#39;T EDIT BELOW THIS LINE var d = document, s = d.createElement(\u0026#39;script\u0026#39;); s.src = \u0026#39;https://lifeislife-1.disqus.com/embed.js\u0026#39;; s.setAttribute(\u0026#39;data-timestamp\u0026#39;, +new Date()); (d.head || d.body).appendChild(s); })(); \u0026lt;/script\u0026gt; \u0026lt;noscript\u0026gt;Please enable JavaScript to view the \u0026lt;a href=\u0026#34;https://disqus.com/?ref_noscript\u0026#34;\u0026gt;comments powered by Disqus.\u0026lt;/a\u0026gt;\u0026lt;/noscript\u0026gt; é…ç½®å®Œæˆï¼Œåˆ·æ–°é¡µé¢å¯ä»¥åœ¨åšå®¢åº•éƒ¨çœ‹åˆ°è¯„è®ºæ¡†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½®ç½‘ç«™çš„ favicon Favicon å°±æ˜¯ç½‘ç«™çš„å°å›¾æ ‡ï¼Œæ¯”å¦‚æ ‡ç­¾æ ä¸­çš„å›¾æ ‡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å‡†å¤‡ä¸€ä¸ªå–œæ¬¢çš„ Logoï¼Œæœ€å¥½ä¸º png æ ¼å¼ï¼Œå°ºå¯¸ä¸º 1:1ï¼Œä½†æ˜¯å›¾ç‰‡å†…å®¹ä¸ºåœ†å½¢ï¼Œåœ†å½¢å¤–é¢ä¸ºé€æ˜çš„ï¼Œè¿™æ ·æ‰ä¸ä¼šå½±å“æ˜¾ç¤ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€Favicon Generatorï¼Œé€‰æ‹©è‡ªå·±çš„å›¾æ ‡ï¼Œç‚¹å‡» Generate Faviconï¼Œä¸‹è½½ç”Ÿæˆçš„æ–‡ä»¶ã€‚\næŠŠè§£å‹çš„æ–‡ä»¶éƒ½æ”¾åˆ°åšå®¢ä¸»ç›®å½•ä¸‹çš„static/assetsç›®å½•ä¸‹ã€‚æ¯”å¦‚/static/assets/favicon.icoã€‚\nä¿®æ”¹é…ç½®æ–‡ä»¶config.yamlï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\nparams: assets: disableHLJS: true favicon: \u0026#34;/assets/favicon.ico\u0026#34; # favicon: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # favicon16x16: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # favicon32x32: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # apple_touch_icon: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # safari_pinned_tab: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; è·¯å¾„ä¸­ä¸éœ€è¦åŠ ä¸Šstaticã€‚\nåˆ·æ–°é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ç½‘ç«™å›¾æ ‡å·²ç»ä¿®æ”¹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹åŸå›¾ åšå®¢ä¸­æœ‰ä¸€äº›å›¾ç‰‡æ¯”è¾ƒå¤§ï¼Œæ— æ³•æŸ¥çœ‹åŸå›¾å°±çœ‹ä¸åˆ°ç»†èŠ‚ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹åŸå›¾ã€‚\nä¿®æ”¹ç½‘ç«™æ ¹ç›®å½•ä¸‹çš„ config.yaml æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\nparams: fancybox: true ä¸»é¢˜ç›®å½•ä¸‹åˆ›å»ºä»¥ä¸‹è·¯å¾„å’Œæ–‡ä»¶/layouts/_default/_markup/render-image.htmlï¼Œå¹¶æ·»åŠ å†…å®¹ï¼š\n{{if .Page.Site.Params.fancybox }} \u0026lt;div class=\u0026#34;post-img-view\u0026#34;\u0026gt; \u0026lt;a data-fancybox=\u0026#34;gallery\u0026#34; href=\u0026#34;{{ .Destination | safeURL }}\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;{{ .Destination | safeURL }}\u0026#34; alt=\u0026#34;{{ .Text }}\u0026#34; {{ with .Title}} title=\u0026#34;{{ . }}\u0026#34;{{ end }} /\u0026gt; \u0026lt;/a\u0026gt; \u0026lt;/div\u0026gt; {{ end }} ä¸»é¢˜ layouts/partials ç›®å½•ä¸‹çš„ head.html æˆ–è€… footer.html ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š\n{{if .Page.Site.Params.fancybox }} \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css\u0026#34; /\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{ end }} å›¾ç‰‡å±…ä¸­ï¼Œè®¾ç½®æ˜¾ç¤ºå¤§å° ä¿®æ”¹ä¹‹å‰/layouts/_default/_markup/render-image.htmlä¸­çš„ä»£ç ï¼Œåœ¨imgæ ‡ç­¾ä¸Šæ·»åŠ style=\u0026quot;display: block; margin: 0 auto; width: 60%;\u0026quot;ã€‚\ndisplay: block - ä½¿å›¾ç‰‡å˜ä¸ºå—çº§å…ƒç´ ï¼Œè¿™æ · margin: 0 auto æ‰ä¼šç”Ÿæ•ˆã€‚ margin: 0 auto - å°†å›¾ç‰‡æ°´å¹³å±…ä¸­ã€‚ width: 60% - å°†å›¾ç‰‡å®½åº¦è®¾ç½®ä¸ºåŸå›¾çš„ 60%ã€‚é¿å…åŸå›¾å¤ªå¤§å ç”¨é¡µé¢ç©ºé—´ã€‚ {{ if .Page.Site.Params.fancybox }} \u0026lt;div class=\u0026#34;post-img-view\u0026#34;\u0026gt; \u0026lt;a data-fancybox=\u0026#34;gallery\u0026#34; href=\u0026#34;{{ .Destination | safeURL }}\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;{{ .Destination | safeURL }}\u0026#34; alt=\u0026#34;{{ .Text }}\u0026#34; {{ with .Title}} title=\u0026#34;{{ . }}\u0026#34;{{ end }} style=\u0026#34;display: block; margin: 0 auto; width: 60%;\u0026#34; /\u0026gt; \u0026lt;/a\u0026gt; \u0026lt;/div\u0026gt; {{ end }} æ ¹æ®å±å¹•å¤§å°è‡ªé€‚åº”å›¾ç‰‡é«˜åº¦ ä¿®æ”¹ä¹‹å‰/layouts/_default/_markup/render-image.htmlä¸­çš„ä»£ç ï¼ŒåŠ å…¥JSè„šæœ¬ï¼Œæ ¹æ®å±å¹•å¤§å°è‡ªé€‚åº”å›¾ç‰‡é«˜åº¦ã€‚\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Responsive Image\u0026lt;/title\u0026gt; \u0026lt;style\u0026gt; .post-img-view { text-align: center; } .responsive-image { display: block; margin: 0 auto; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; {{ if .Page.Site.Params.fancybox }} \u0026lt;div class=\u0026#34;post-img-view\u0026#34;\u0026gt; \u0026lt;a data-fancybox=\u0026#34;gallery\u0026#34; href=\u0026#34;{{ .Destination | safeURL }}\u0026#34;\u0026gt; \u0026lt;img class=\u0026#34;responsive-image\u0026#34; src=\u0026#34;{{ .Destination | safeURL }}\u0026#34; alt=\u0026#34;{{ .Text }}\u0026#34; {{ with .Title}} title=\u0026#34;{{ . }}\u0026#34;{{ end }} style=\u0026#34;margin: 0 auto;\u0026#34;/\u0026gt; \u0026lt;/a\u0026gt; \u0026lt;/div\u0026gt; {{ end }} \u0026lt;script\u0026gt; document.addEventListener(\u0026#34;DOMContentLoaded\u0026#34;, function() { var images = document.querySelectorAll(\u0026#34;.responsive-image\u0026#34;); var maxHeight = window.innerHeight / 3; images.forEach(function(image) { image.style.maxHeight = maxHeight + \u0026#34;px\u0026#34;; }); }); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; æ•ˆæœå¦‚ä¸‹ï¼Œä¸ç”¨æ‹…å¿ƒä¸€å¼ å›¾ç‰‡é“ºæ»¡æ•´ä¸ªå±å¹•äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åŠ å…¥å“”å“©å“”å“©è§†é¢‘ {{ \u0026lt; douban src=\u0026#34;https://book.douban.com/subject/30838038/\u0026#34; \u0026gt; }} # ä½¿ç”¨çš„æ—¶å€™æŠŠå»æ‰å°–æ‹¬å¼§å¤–ä¾§ç©ºæ ¼ï¼Œæ­¤å¤„æ˜¯ä¸ºäº†é˜²æ­¢è¢«è¯†åˆ«ç”Ÿæ•ˆ ","permalink":"https://lifeislife.cn/posts/hugo%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/","summary":"\u003ch2 id=\"é…ç½®é¡µé¢çš„èœå•\"\u003eé…ç½®é¡µé¢çš„èœå•\u003c/h2\u003e\n\u003cp\u003eåœ¨\u003ccode\u003econfig.yaml\u003c/code\u003eä¸­é…ç½®\u003ccode\u003emenu\u003c/code\u003eå­—æ®µï¼Œå¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003emenu\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e- \u003cspan class=\"nt\"\u003eidentifier\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;archives\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;å½’æ¡£\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;/archives/\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003eweight\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e- \u003cspan class=\"nt\"\u003eidentifier\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;tags\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;æ ‡ç­¾\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;/tags/\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003eweight\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e- \u003cspan class=\"nt\"\u003eidentifier\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;categories\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;åˆ†ç±»\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;/categories/\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003eweight\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå…¶ä¸­\u003ccode\u003eweight\u003c/code\u003eå­—æ®µè¡¨ç¤ºèœå•çš„æ’åºï¼Œæ•°å­—è¶Šå°è¶Šé å‰ã€‚æ­¤æ—¶é¡µé¢åº”è¯¥ä¼šæ˜¾ç¤ºè¿™ä¸‰ä¸ªèœå•ï¼Œä½†æ˜¯å½’æ¡£é¡µé¢æ˜¯ 404ï¼Œè¿˜éœ€è¦åœ¨åˆ›å»ºä¸€ä¸ª\u003ccode\u003econtent/archives.md\u003c/code\u003eæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\u003c/p\u003e","title":"Hugo ä¸»é¢˜é…ç½®"},{"content":"VSCode æ’ä»¶å‘å¸ƒç®€æ˜“æµç¨‹ æ³¨å†Œå¾®è½¯å¼€å‘è€…è´¦å· å¦‚æœå·²ç»æœ‰å¾®è½¯è´¦å·ï¼Œç›´æ¥ç™»å½•å³å¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ªå¾®è½¯è´¦å·ã€‚ç™»å½•ï¼šhttps://login.live.com/ã€‚\nç™»å½•https://aka.ms/SignupAzureDevOpsï¼Œæ³¨å†Œå¾®è½¯å¼€å‘è€…è´¦å·ã€‚è®¾ç½®ä¿å­˜é»˜è®¤å³å¯ï¼Œè‡ªå·±è®¾ç½®ä¹Ÿè¡Œï¼Œä¸å¤ªé‡è¦ã€‚\nå³ä¸Šè§’åˆ›å»ºPersonal Access Tokenï¼Œç”¨äºç™»å½•vsceã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ›å»ºçš„Tokenåéšæ„ï¼Œä½†æ˜¯Organizationå’ŒScopeséœ€è¦é€‰æ‹©æ­£ç¡®çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚\nOrganizationï¼šAll accessible organizations Scopesï¼šFull access \u003c!DOCTYPE html\u003e Responsive Image åˆ›å»ºæˆåŠŸåï¼Œä¼šç”Ÿæˆä¸€ä¸ªTokenï¼Œéœ€è¦ä¿å­˜å¥½ï¼Œåç»­ä¼šç”¨åˆ°ã€‚Tokenåªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œå¦‚æœå¿˜è®°äº†ï¼Œéœ€è¦é‡æ–°åˆ›å»ºã€‚\næ³¨å†ŒVSCode Publisher ç™»å½•ï¼šhttps://aka.ms/vscode-create-publisherï¼Œå¡«å†™å§“åå³å¯å¦‚â€œDominic Zhangâ€ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„IDï¼ŒIDåªèƒ½æ˜¯æ•°å­—å­—æ¯ä¸‹åˆ’çº¿ï¼Œæ‰€ä»¥ä¼šç”Ÿæˆâ€œDominicZhangâ€ã€‚éœ€è¦è®°ä½è¿™ä¸ªIDï¼Œåç»­ä¼šç”¨åˆ°ã€‚\nvsceç™»å½•å¹¶å‘å¸ƒæ’ä»¶ è¾“å…¥åœ¨æ³¨å†Œå¾®è½¯å¼€å‘è€…è´¦å·æ—¶ç”Ÿæˆçš„Tokenï¼Œç™»å½•vsceã€‚\nvsce login DominicZhang WARNING Failed to open credential store. Falling back to storing secrets clear-text in: /home/nic/.vsce https://marketplace.visualstudio.com/manage/publishers/ Personal Access Token for publisher \u0026#39;DominicZhang\u0026#39;: **************************************************** The Personal Access Token verification succeeded for the publisher \u0026#39;DominicZhang\u0026#39;. æ‰“åŒ…æ’ä»¶ï¼š\nvsce package å‘å¸ƒæ’ä»¶ï¼š\nvsce publish ","permalink":"https://lifeislife.cn/posts/vscode-%E6%8F%92%E4%BB%B6%E5%8F%91%E5%B8%83%E7%AE%80%E6%98%93%E6%B5%81%E7%A8%8B/","summary":"\u003ch1 id=\"vscode-æ’ä»¶å‘å¸ƒç®€æ˜“æµç¨‹\"\u003eVSCode æ’ä»¶å‘å¸ƒç®€æ˜“æµç¨‹\u003c/h1\u003e\n\u003ch2 id=\"æ³¨å†Œå¾®è½¯å¼€å‘è€…è´¦å·\"\u003eæ³¨å†Œå¾®è½¯å¼€å‘è€…è´¦å·\u003c/h2\u003e\n\u003cp\u003eå¦‚æœå·²ç»æœ‰å¾®è½¯è´¦å·ï¼Œç›´æ¥ç™»å½•å³å¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ªå¾®è½¯è´¦å·ã€‚ç™»å½•ï¼šhttps://login.live.com/ã€‚\u003c/p\u003e\n\u003cp\u003eç™»å½•https://aka.ms/SignupAzureDevOpsï¼Œæ³¨å†Œå¾®è½¯å¼€å‘è€…è´¦å·ã€‚è®¾ç½®ä¿å­˜é»˜è®¤å³å¯ï¼Œè‡ªå·±è®¾ç½®ä¹Ÿè¡Œï¼Œä¸å¤ªé‡è¦ã€‚\u003c/p\u003e","title":"VSCode æ’ä»¶å‘å¸ƒç®€æ˜“æµç¨‹"},{"content":"é…ç½®Windowsä¸å¼€å‘æ¿ç½‘ç»œé€šä¿¡ é…ç½®Windowsä¾§ç½‘å¡ å°†Windowsä¸å¼€å‘æ¿é€šè¿‡USBç½‘å¡è¿æ¥ï¼Œå¼€å‘æ¿çš„ç½‘å¡æ’å£é€‰æ‹©eth0ï¼Œä¹Ÿå°±æ˜¯é è¿‘æ‹¨ç å¼€å…³çš„ç½‘å£ã€‚å¼€å‘æ¿å¼€æœºï¼ŒWindowsçš„è®¾å¤‡ç®¡ç†å™¨ä¸­å‡ºç°ä»¥ä¸‹ç½‘å¡è¡¨ç¤ºç½‘å¡åŠŸèƒ½æ­£å¸¸ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒï¼Œé€‰æ‹©æ›´æ”¹é€‚é…å™¨è®¾ç½®ï¼Œæ‰¾åˆ°USBç½‘å¡ï¼Œå³é”®å±æ€§ï¼Œé€‰æ‹©Internetåè®®ç‰ˆæœ¬4ï¼ˆTCP/IPv4ï¼‰ï¼Œç‚¹å‡»å±æ€§ï¼Œé€‰æ‹©ä½¿ç”¨ä»¥ä¸‹IPåœ°å€ï¼Œè®¾ç½®IPåœ°å€ä¸ºä»¥ä¸‹å†…å®¹ï¼š\nIPåœ°å€ï¼š192.168.1.111 å­ç½‘æ©ç ï¼š255.255.225.0 é»˜è®¤ç½‘å…³ï¼š192.168.1.1 ç½‘å¡çš„IPè¦å’Œä½ Windowä¸»æœºè‡ªå·±çš„IPåœ¨ä¸€ä¸ªç½‘æ®µï¼Œä¸èƒ½ç›²ç›®è®¾ç½®ä¸ºæ‰‹å†Œé‡Œçš„192.168.5.10ï¼Œè¿™æ ·ä¼šå¯¼è‡´Windowsä¸»æœºæ— æ³•è®¿é—®å¼€å‘æ¿ã€‚å¯ä»¥é€šè¿‡åœ¨Windowså‘½ä»¤è¡Œè¾“å…¥ipconfigæŸ¥çœ‹Windowsä¸»æœºçš„IPåœ°å€ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¿‡è·¯ç”±å™¨ï¼Œé»˜è®¤éƒ½æ˜¯åœ¨192.168.1.xç½‘æ®µã€‚é‚£ä¹ˆç½‘å…³é€šå¸¸å°±æ˜¯è¿™ä¸ªç½‘æ®µçš„ç¬¬ä¸€ä¸ªåœ°å€ï¼Œä¹Ÿå°±æ˜¯192.168.1.1ï¼Œè¿™ä¹Ÿæ˜¯è·¯ç”±å™¨çš„åœ°å€ã€‚\nå¦‚æœä½ é…ç½®å®Œç½‘å¡ä»¥åŠå¼€å‘æ¿çš„IPåèƒ½æ­£å¸¸ç›¸äº’pingé€šï¼Œé‚£ä¹ˆè¯´æ˜ç½‘ç»œé…ç½®æˆåŠŸã€‚å¦‚æœä½ å¾ˆä¸å·§å’Œæˆ‘ä¸€æ ·ï¼ŒUSBç½‘å¡ä¸€ç›´æ— æ³•é€šè¿‡DHCPè‡ªåŠ¨è·å–IPåœ°å€ï¼Œå¹¶ä¸”é…ç½®å®Œé™æ€IPååªèƒ½å•ä¾§pingé€šï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥å’Œæˆ‘ä¸€æ ·å°†USBç½‘å¡å’Œä¸»æœºçš„WIFIç½‘å¡æ¡¥æ¥ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°åŒå‘é€šä¿¡ã€‚è¿™é‡Œæœ‰ä¸ªå‰ææ¡ä»¶å°±æ˜¯ä½ çš„ä¸»æœºåŸå…ˆå°±æœ‰ä¸¤å¼ ç½‘å¡ï¼Œä¸€å¼ ç”¨äºè¿æ¥è·¯ç”±å™¨ï¼Œä¸€å¼ æ˜¯WIFIç½‘å¡ã€‚ä¸èƒ½ç›´æ¥å°†USBç½‘å¡å’Œè¿æ¥è·¯ç”±å™¨çš„ç½‘å¡æ¡¥æ¥ã€‚\nä¸‡ä¸‡æ²¡æƒ³åˆ°ä¸€å¼ æ•´å¹´é—²ç½®çš„WIFIç½‘å¡ç«Ÿç„¶æ´¾ä¸Šäº†ç”¨åœºã€‚\né€‰æ‹©WIFIç½‘å¡å’ŒUSBç½‘å¡ï¼Œå³é”®æ¡¥æ¥ï¼Œè¿™æ ·å°±åˆ›å»ºä¸€ä¸ªç½‘æ¡¥ï¼Œç½‘æ¡¥ä¼šè‡ªåŠ¨è·å–IPåœ°å€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¼€å‘æ¿ä¾§é…ç½®ç½‘å¡ é…ç½®ç½‘å¡IPï¼Œè¿™ä¸ªIPä¹Ÿæ˜¯éœ€è¦å’ŒWindowsä¸»æœºåœ¨ä¸€ä¸ªç½‘æ®µçš„ã€‚å› ä¸ºè·¯ç”±å™¨åˆ†é…IPæ—¶ä¼šä»å°åˆ°å¤§åˆ†é…ï¼Œä¸ºäº†é¿å…å’Œå·²æœ‰çš„è®¾å¤‡IPå†²çªï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå¤§çš„IPï¼Œæ¯”å¦‚112ã€‚\n# é…ç½®ç½‘å¡ipä¸º192.169.1.112ï¼Œå­ç½‘æ©ç ä¸º255.255.255.0 ifconfig eth0 192.168.1.112 è®¾ç½®é»˜è®¤ç½‘å…³ï¼š\nip route add default via 192.168.1.1 æ³¨æ„ï¼šæ›´æ¢ç½‘å£éœ€è¦é‡å¯å¼€å‘æ¿\n[Match] Name=eth0 [Network] Address=192.168.1.112/24 Gateway=192.168.1.1 æŒ‚è½½NSFå…±äº«ç›®å½• Windowsä¾§é…ç½® å®‰è£…haneWIN NFS æœåŠ¡å™¨ï¼ˆhttps://pan.baidu.com/s/1y2R2aJyEExnCJ7FRqdaNdA æå–ç ï¼šesdwï¼‰\nå®‰è£…è·¯å¾„ä¸€èˆ¬ä¸ºï¼šC:\\Program Files (x86)\\nfsdã€‚ä½¿ç”¨VScodeæ‰“å¼€è¯¥ç›®å½•ä¸‹çš„exportsæ–‡ä»¶ï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼Œä¿å­˜æ—¶éœ€è¦ç”¨ç®¡ç†å‘˜èº«ä»½ä¿å­˜ï¼š d:\\nfs -public 192.168.1.112 d:\\nfsï¼šå…±äº«ç›®å½•ä¸ºDç›˜çš„nfsï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µä¿®æ”¹ã€‚ -publicï¼šè¡¨ç¤ºå…±äº«ç›®å½•ä¸ºå…¬å…±ç›®å½•ï¼Œå³æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®ã€‚ IPï¼šä¸ºå¼€å‘æ¿çš„IPåœ°å€ï¼Œè¡¨ç¤ºè¦ä¸è¿™ä¸ªIPè¿›è¡Œå…±äº«ã€‚ å…³é—­é˜²ç«å¢™æˆ–è€…å¼€å¯å¿…è¦çš„é€šä¿¡ç«¯å£\nå¦‚æœä¸ºäº†çœäº‹ï¼Œå¯ä»¥ç›´æ¥å…³é—­Windowsé˜²ç«å¢™ å¦‚æœä¸æƒ³å…³é˜²ç«å¢™éœ€è¦å¼€å¯ä»¥ä¸‹ç«¯å£çš„é€šä¿¡ï¼š TCP 111 UDP 111 TCP 2049 UDP 2049 TCP 1058 UDP 1058 å¼€å¯ç«¯å£çš„æ–¹æ³•ä¸ºï¼šæ§åˆ¶é¢æ¿ -\u0026gt; ç³»ç»Ÿå’Œå®‰å…¨ -\u0026gt; Windows Defender é˜²ç«å¢™ -\u0026gt; é«˜çº§è®¾ç½® -\u0026gt; å…¥ç«™è§„åˆ™ -\u0026gt; æ–°å»ºè§„åˆ™ -\u0026gt; ç«¯å£ -\u0026gt; ä¸‹ä¸€æ­¥ -\u0026gt; TCP -\u0026gt; ç‰¹å®šæœ¬åœ°ç«¯å£ -\u0026gt; 2049 -\u0026gt; ä¸‹ä¸€æ­¥ -\u0026gt; å…è®¸è¿æ¥ -\u0026gt; ä¸‹ä¸€æ­¥ -\u0026gt; ä¸‹ä¸€æ­¥ -\u0026gt; è§„åˆ™åç§° -\u0026gt; å®Œæˆã€‚ éœ€è¦æ³¨æ„åœ¨å‡ºç«™è§„åˆ™å’Œå…¥ç«™è§„åˆ™éƒ½éœ€è¦æ·»åŠ ã€‚ é‡å¯Windows NFS ServeræœåŠ¡\nå³é”®Windowså¾½æ ‡é”®ï¼Œæ‰“å¼€è®¡ç®—æœºç®¡ç†ï¼Œæ‰¾åˆ°æœåŠ¡å’Œåº”ç”¨ç¨‹åºï¼Œç‚¹å‡»æœåŠ¡ï¼Œæ‰¾åˆ°NFS Serverï¼Œå³é”®é‡å¯ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»è½¯ä»¶çš„è¾“å‡ºé€‰é¡¹å¡ï¼Œç‚¹å‡»é‡å¯æœåŠ¡å™¨ï¼Œå¦‚æœå‡ºç°å¦‚å›¾é…ç½®è¡¨ç¤ºæ­£ç¡®å¯åŠ¨æœåŠ¡ï¼š \u003c!DOCTYPE html\u003e Responsive Image å¼€å‘æ¿ä¾§é…ç½® æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œç”¨äºæŒ‚è½½å…±äº«ç›®å½•\nmkdir /nfs æŒ‚è½½å…±äº«ç›®å½•\nmount -vvv -t nfs -o nolock -o vers=3,port=2049 192.168.1.7:/d/nfs /nfs -vvvï¼šè¡¨ç¤ºæŒ‚è½½æ—¶è¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œå¯çœç•¥ -t nfsï¼šè¡¨ç¤ºæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸ºnfs -o nolockï¼šè¡¨ç¤ºä¸ä½¿ç”¨é”å®šæœºåˆ¶ -o vers=3ï¼šè¡¨ç¤ºä½¿ç”¨NFSv3ç‰ˆæœ¬ -o port=2049ï¼šè¡¨ç¤ºNFSæœåŠ¡ç«¯å£å· 192.168.1.7:/d/nfsï¼šè¡¨ç¤ºNFSæœåŠ¡å™¨çš„IPåœ°å€å’Œå…±äº«ç›®å½• /nfs: è¡¨ç¤ºå¼€å‘æ¿ä¸Šçš„å…±äº«ç›®å½• å¸¸è§é”™è¯¯ æŒ‚è½½æ—¶æŠ¥é”™ï¼športmap query failed: RPC: Timed out ç‚¹å‡»NFSæœåŠ¡çš„ç«¯å£æ˜ å°„é¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹RPCä½¿ç”¨çš„æ‰€æœ‰ç«¯å£ï¼Œéœ€è¦å°†è¿™äº›ç«¯å£éƒ½å¼€æ”¾ï¼Œæˆ–è€…ç›´æ¥å…³é—­é˜²ç«å¢™ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸€äº›å¯èƒ½ç”¨åˆ°çš„å‘½ä»¤ï¼š\nip route add default via 192.168.1.1 ip route del 0.0.0.0/0 via 192.168.1.1 dev eth0 ip route del 192.168.1.0/24 dev eth0 vi /etc/systemd/network/50-static.network systemctl enable systemd-networkd å¦‚ä½•åœ¨Windowsä¸Šæ­å»ºNFSæœåŠ¡å™¨å®ç°å¼€å‘æ¿ä¸Windowsä¹‹é—´çš„æ–‡ä»¶å…±äº«_opencv_Jack_å°æ˜-GitCode å¼€æºç¤¾åŒº\n","permalink":"https://lifeislife.cn/posts/windows%E6%8C%82%E8%BD%BDnfs%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0%E4%B8%8E%E5%BC%80%E5%8F%91%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/","summary":"\u003ch2 id=\"é…ç½®windowsä¸å¼€å‘æ¿ç½‘ç»œé€šä¿¡\"\u003eé…ç½®Windowsä¸å¼€å‘æ¿ç½‘ç»œé€šä¿¡\u003c/h2\u003e\n\u003ch3 id=\"é…ç½®windowsä¾§ç½‘å¡\"\u003eé…ç½®Windowsä¾§ç½‘å¡\u003c/h3\u003e\n\u003cp\u003eå°†Windowsä¸å¼€å‘æ¿é€šè¿‡USBç½‘å¡è¿æ¥ï¼Œå¼€å‘æ¿çš„ç½‘å¡æ’å£é€‰æ‹©eth0ï¼Œä¹Ÿå°±æ˜¯é è¿‘æ‹¨ç å¼€å…³çš„ç½‘å£ã€‚å¼€å‘æ¿å¼€æœºï¼ŒWindowsçš„è®¾å¤‡ç®¡ç†å™¨ä¸­å‡ºç°ä»¥ä¸‹ç½‘å¡è¡¨ç¤ºç½‘å¡åŠŸèƒ½æ­£å¸¸ã€‚\u003c/p\u003e","title":"WindowsæŒ‚è½½NFSç½‘ç»œæ–‡ä»¶ç³»ç»Ÿå®ç°ä¸å¼€å‘æ–‡ä»¶ä¼ è¾“"},{"content":"QEMU æ˜¯ä¸€ä¸ªå¼€æºçš„è™šæ‹ŸåŒ–è½¯ä»¶ï¼Œå®ƒèƒ½å¤Ÿæ¨¡æ‹Ÿä¸åŒçš„ç¡¬ä»¶å¹³å°ï¼Œè®©ç”¨æˆ·åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¹‹é—´è¿›è¡Œåˆ‡æ¢å’Œæµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ QEMU å¸¸ç”¨å‘½ä»¤çš„æ€»ç»“æ–‡æ¡£ï¼ŒåŒ…å«æ¯ä¸ªå‘½ä»¤çš„åŠŸèƒ½è¯´æ˜ã€‚\nQEMU å®‰è£… æºç ä¸‹è½½ å‹ç¼©åŒ…æ–¹å¼ ç‰ˆæœ¬å¯ä»¥ä¿®æ”¹\ncd qemu-build \u0026amp;\u0026amp; wget \u0026#34;https://download.qemu.org/qemu-8.0.2.tar.xz\u0026#34; tar -xf qemu-8.0.2.tar.xz --strip-components=1 Clone æ–¹å¼ git clone https://gitlab.com/qemu-project/qemu.git cd qemu git submodule init git submodule update --recursive é…ç½®ç¼–è¯‘é€‰é¡¹ ./configure --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu \\ --enable-kvm \\ --enable-debug \\ --enable-sdl \\ --prefix=/home/user/program/riscv64-qemu \\ --python=/usr/bin/python3 # --python=pythonè·¯å¾„ï¼Œå¦‚æœæç¤ºé»˜è®¤pythonç‰ˆæœ¬ä½ï¼Œå¯ä»¥åŠ è¿™ä¸ªå‚æ•° # --prefix é€‰é¡¹è®¾ç½®qemuçš„å®‰è£…ä½ç½®ç»å¯¹è·¯å¾„ï¼Œä¹‹åè‹¥è¦å¸è½½åˆ é™¤qemuåªè¦åˆ é™¤è¯¥æ–‡ä»¶å¤¹å³å¯ï¼Œ--enable-kvmå¼€å¯kvm # configå®Œï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„qemuå®‰è£…æ–‡ä»¶å¤¹ä¸‹é¢æ‰¾åˆ°config-host.makæ–‡ä»¶ï¼Œ # è¯¥æ–‡ä»¶è®°å½•ç€qemué…ç½®çš„é€‰é¡¹ï¼Œå¯ä»¥å’Œè‡ªå·±è®¾ç½®çš„è¿›è¡Œå¯¹æ¯”ï¼Œç¡®ä¿é…ç½®å’Œè‡ªå·±å·²çŸ¥ ä¸€äº›å¸¸ç”¨çš„ç¼–è¯‘é€‰é¡¹ \u0026ndash;enable-debugï¼šç¼–è¯‘è°ƒè¯•ç‰ˆæœ¬ï¼Œè°ƒè¯•ç‰ˆæœ¬çš„è¿è¡Œé€Ÿåº¦éå¸¸æ…¢ \u0026ndash;disable-werrorï¼šå¿½ç•¥è­¦å‘Šï¼Œå¦åˆ™ä»»ä½•ç¼–è¯‘è­¦å‘Šéƒ½è¢«è§†ä¸ºç¼–è¯‘é”™è¯¯ \u0026ndash;enable-pluginsï¼šå¼€å¯TCG Pluginæ”¯æŒ \u0026ndash;disable-stack-protectorï¼šå…³é—­QEMUè‡ªèº«çš„æ ˆä¿æŠ¤ \u0026ndash;extra-cflags=\u0026quot;-O3\u0026quot;ï¼šèƒ½è®©ä½ çš„QEMUæé€Ÿ5~10%ï¼Œå¦‚æœç¼–è¯‘æ—¶æŠ¥é”™ï¼Œè¯·åŠ ä¸Š--disable-werror \u0026ndash;prefix=\u0026lt;è·¯å¾„\u0026gt;ï¼šæŒ‡å®šå®‰è£…ç›®å½•çš„è·¯å¾„ \u0026ndash;target-list=\u0026lt;æ¶æ„\u0026gt;ï¼šæŒ‡å®šè¦ç¼–è¯‘çš„ç›®æ ‡æ¶æ„åˆ—è¡¨ï¼Œä¾‹å¦‚ x86_64-softmmu,arm-softmmuã€‚ \u0026ndash;enable-\u0026lt;åŠŸèƒ½\u0026gt;ï¼šå¯ç”¨æŒ‡å®šçš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ--enable-kvm å¯ç”¨ KVM æ”¯æŒï¼Œ--enable-gtk å¯ç”¨ GTK å›¾å½¢ç•Œé¢ç­‰ã€‚ \u0026ndash;disable-\u0026lt;åŠŸèƒ½\u0026gt;ï¼šç¦ç”¨æŒ‡å®šçš„åŠŸèƒ½ã€‚ \u0026ndash;enable-debugï¼šå¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ŒåŒ…æ‹¬è°ƒè¯•ç¬¦å·å’Œè°ƒè¯•è¾“å‡ºã€‚ \u0026ndash;enable-virtfsï¼šå¯ç”¨ virtio æ–‡ä»¶ç³»ç»Ÿæ”¯æŒã€‚ \u0026ndash;enable-modulesï¼šå¯ç”¨æ¨¡å—æ”¯æŒã€‚ \u0026ndash;disable-guest-agentï¼šç¦ç”¨å®¢æˆ·æœºä»£ç†æ”¯æŒã€‚ \u0026ndash;enable-trace-backend=\u0026lt;åç«¯\u0026gt;ï¼šæŒ‡å®šè·Ÿè¸ªåç«¯ï¼Œä¾‹å¦‚ simpleã€log æˆ– dtraceã€‚ \u0026ndash;disable-vhost-netï¼šç¦ç”¨ vhost-net æ”¯æŒã€‚ ç¼–è¯‘æ—¶è¾“å‡º.i æ–‡ä»¶ç”¨äºæŸ¥çœ‹å®å®šä¹‰å±•å¼€ $ ./configure --extra-cflags=\u0026#34;-save-temps\u0026#34; --target-list=riscv64-linux-user,riscv64-softmmu --disable-werror --python=/usr/bin/python3 å¯åŠ¨è™šæ‹Ÿæœº ä»¥ä¸‹å‘½ä»¤ç”¨äºå¯åŠ¨è™šæ‹Ÿæœºï¼š\nqemu-system-x86_64 -boot d -cdrom /path/to/iso -m 1024 -hda /path/to/hda.img -boot dï¼šä» CD/DVD å¯åŠ¨ -cdrom /path/to/isoï¼šæŒ‡å®š ISO æ–‡ä»¶çš„è·¯å¾„ -m 1024ï¼šè®¾ç½®è™šæ‹Ÿæœºçš„å†…å­˜å¤§å°ä¸º 1024MB -hda /path/to/hda.imgï¼šæŒ‡å®šè™šæ‹Ÿç¡¬ç›˜çš„è·¯å¾„ å®‰è£…ç³»ç»Ÿè‡³ç£ç›˜ qemu-system-x86_64 \\ -cdrom ~/Downloads/ubuntu.iso \\ -drive file=ubuntu.qcow2 \\ -enable-kvm \\ -cpu host \\ -smp cores=2,threads=2 \\ -m 2G \\ -vga virtio \\ -display sdl,gl=on ç½‘ç»œé…ç½® ä»¥ä¸‹å‘½ä»¤ç”¨äºé…ç½®è™šæ‹Ÿæœºçš„ç½‘ç»œï¼š\nqemu-system-x86_64 -net nic -net user,hostfwd=tcp::2222-:22 -net nicï¼šå¯ç”¨è™šæ‹Ÿç½‘å¡ -net userï¼šä½¿ç”¨ç”¨æˆ·æ¨¡å¼ç½‘ç»œå †æ ˆ hostfwd=tcp::2222-:22ï¼šå°†ä¸»æœºçš„ 2222 ç«¯å£è½¬å‘åˆ°è™šæ‹Ÿæœºçš„ 22 ç«¯å£ è°ƒè¯•ç›¸å…³å‘½ä»¤ å¯åŠ¨è°ƒè¯•æ¨¡å¼ qemu-system-x86_64 -s -S -sï¼šå¯ç”¨ GDB è°ƒè¯• -Sï¼šåœ¨å¯åŠ¨æ—¶æš‚åœè™šæ‹Ÿæœºï¼Œç­‰å¾…è°ƒè¯•å™¨è¿æ¥ è¾“å‡ºè°ƒè¯•æ—¥å¿— /home/user/develop/qemu/build/qemu-riscv64 -d in_asm,exec,cpu,strace -D ./log hello QEMU çš„ -d å‚æ•°è¯´æ˜\næ—¥å¿—é€‰é¡¹ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ï¼š\nout_asmï¼šæ˜¾ç¤ºæ¯ä¸ªå·²ç¼–è¯‘åŸºæœ¬å—ç”Ÿæˆçš„å®¿ä¸»æ±‡ç¼–ä»£ç  in_asmï¼šæ˜¾ç¤ºæ¯ä¸ªå·²ç¼–è¯‘åŸºæœ¬å—çš„ç›®æ ‡æ±‡ç¼–ä»£ç  opï¼šæ˜¾ç¤ºæ¯ä¸ªå·²ç¼–è¯‘åŸºæœ¬å—çš„å¾®æ“ä½œ op_optï¼šæ˜¾ç¤ºä¼˜åŒ–åçš„å¾®æ“ä½œ op_indï¼šæ˜¾ç¤ºé—´æ¥é™ä½å‰çš„å¾®æ“ä½œ intï¼šä»¥ç®€çŸ­æ ¼å¼æ˜¾ç¤ºä¸­æ–­/å¼‚å¸¸ execï¼šåœ¨æ¯æ¬¡æ‰§è¡ŒåŸºæœ¬å—å‰æ˜¾ç¤ºè·Ÿè¸ªï¼ˆå¤§é‡æ—¥å¿—ï¼‰ cpuï¼šåœ¨è¿›å…¥åŸºæœ¬å—å‰æ˜¾ç¤º CPU å¯„å­˜å™¨ï¼ˆå¤§é‡æ—¥å¿—ï¼‰ fpuï¼šåœ¨â€œcpuâ€æ—¥å¿—ä¸­åŒ…å« FPU å¯„å­˜å™¨ mmuï¼šè®°å½•ä¸ MMU ç›¸å…³çš„æ´»åŠ¨ pcallï¼šä»…é™ x86ï¼šæ˜¾ç¤ºä¿æŠ¤æ¨¡å¼ä¸‹çš„è¿œç¨‹è°ƒç”¨/è¿”å›/å¼‚å¸¸ cpu_resetï¼šåœ¨ CPU é‡ç½®å‰æ˜¾ç¤º CPU çŠ¶æ€ unimpï¼šè®°å½•æœªå®ç°çš„åŠŸèƒ½ guest_errorsï¼šå½“æ¥å®¾æ“ä½œç³»ç»Ÿæ‰§è¡Œæ— æ•ˆæ“ä½œï¼ˆä¾‹å¦‚è®¿é—®ä¸å­˜åœ¨çš„å¯„å­˜å™¨ï¼‰æ—¶è®°å½•æ—¥å¿— pageï¼šåœ¨ç”¨æˆ·æ¨¡å¼ä»¿çœŸå¼€å§‹æ—¶è½¬å‚¨é¡µé¢ nochainï¼šä¸é“¾å¼ç¼–è¯‘åŸºæœ¬å—ï¼Œä»¥ä¾¿â€œexecâ€å’Œâ€œcpuâ€æ˜¾ç¤ºå®Œæ•´çš„è·Ÿè¸ª pluginï¼šè¾“å‡ºæ¥è‡ª TCG æ’ä»¶çš„ä¿¡æ¯ straceï¼šè®°å½•æ¯ä¸ªç”¨æˆ·æ¨¡å¼ç³»ç»Ÿè°ƒç”¨ã€å…¶è¾“å…¥å’Œç»“æœ trace:PATTERNï¼šå¯ç”¨è·Ÿè¸ªäº‹ä»¶ ä½¿ç”¨ \u0026quot;-d trace:help\u0026quot; æ¥è·å–è·Ÿè¸ªäº‹ä»¶åˆ—è¡¨ã€‚\nqemu-system-xxx å¸¸ç”¨ç›¸å…³å‚æ•° -Mï¼šæŒ‡å®š machineï¼Œ-help å¯ä»¥åˆ—å‡ºæ‰€æœ‰æ‰€æ”¯æŒçš„ machine -cpuï¼šæŒ‡å®šæ¨¡æ‹Ÿçš„ CPU å‹å·ï¼Œä¾‹å¦‚ cortex-a57ã€cortex-a53 ç­‰ã€‚ -smpï¼šCPU æ ¸æ•° -mï¼šRAM å®¹é‡ -kernelï¼šLinux kernel æ–‡ä»¶ -appendï¼šLinux Kernel çš„ bootargsã€‚è¿™ä¸ªå‘½ä»¤çš„å‚æ•°å¾ˆå¤æ‚ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ kernel æ–‡æ¡£ã€‚ -consoleï¼šè®¾å¤‡åå¿…é¡»å’Œ machine çš„ä¸²å£ä¸€è‡´ï¼Œå¦åˆ™ä¼šçœ‹ä¸åˆ° kernel logã€‚è€Œä¸åŒçš„å¹³å° console åç§°éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ˜¯ Kernel å¾ˆä¸å‹å¥½çš„ä¸€ç‚¹ã€‚ -ignore_loglevelï¼šå¯ä»¥è®©ä½ çœ‹åˆ°å°½å¯èƒ½å¤šçš„ kernel logï¼Œå½“ç„¶ä¹Ÿä¼šå‡æ…¢ kernel çš„å¯åŠ¨é€Ÿåº¦ -initï¼šå¿…é¡»ä¿è¯ initrd é‡Œæœ‰/linuxrc è¿™ä¸ªæ–‡ä»¶ï¼Œå¦åˆ™ä¼šæ— æ³•å¯åŠ¨ shell -initrdï¼šæŒ‡å®š initrd æ–‡ä»¶ å¿«ç…§ç®¡ç† # æ‹å¿«ç…§ qemu-img snapshot -c oe-rv-snapshot1 openEuler-22.09-riscv64-qemu.qcow2 # åˆ—ä¸¾å¿«ç…§ qemu-img snapshot-l openEuler-22.09-riscv64-qemu.qcow2 # æ¢å¤å¿«ç…§ qemu-img snapshot -a my_snapshot mydisk.qcow2 æŸ¥çœ‹è™šæ‹Ÿç¡¬ç›˜ä¿¡æ¯ qemu-img info /path/to/image å°†è™šæ‹Ÿç¡¬ç›˜è½¬æ¢ä¸º QCOW2 æ ¼å¼ qemu-img convert -O qcow2 /path/to/image /path/to/new/image è°ƒæ•´ç£ç›˜å¤§å° qemu-img resize ubuntu.qcow2 +5G æ˜¾ç¤ºå™¨é€‰é¡¹ qemu-system-x86_64 -vga std qemu-system-x86_64 -display sdl qemu-system-x86_64 -display gtk -vga stdï¼šä½¿ç”¨æ ‡å‡† VGA æ˜¾ç¤ºå™¨ -display sdlï¼šä½¿ç”¨ SDL æ˜¾ç¤ºå™¨ -display gtkï¼šä½¿ç”¨ GTK æ˜¾ç¤ºå™¨ è¾“å…¥é€‰é¡¹ qemu-system-x86_64 -k en-us qemu-system-x86_64 -usb qemu-system-x86_64 -device usb-mouse -k en-usï¼šä½¿ç”¨è‹±æ–‡é”®ç›˜å¸ƒå±€ -usbï¼šå¯ç”¨ USB æ”¯æŒ -device usb-mouseï¼šä½¿ç”¨ USB é¼ æ ‡è®¾å¤‡ å£°éŸ³é€‰é¡¹ ä»¥ä¸‹å‘½ä»¤ç”¨äºé…ç½®è™šæ‹Ÿæœºçš„å£°éŸ³ï¼š\nqemu-system-x86_64 -soundhw all qemu-system-x86_64 -soundhw sb16 qemu-system-x86_64 -audiodev pa,id=pa1,out.mixing-engine=off -soundhw allï¼šå¯ç”¨æ‰€æœ‰å£°å¡ -soundhw sb16ï¼šå¯ç”¨ SoundBlaster 16 å£°å¡ -audiodev pa,id=pa1,out.mixing-engine=offï¼šä½¿ç”¨ PulseAudio å£°éŸ³è®¾å¤‡ USB è®¾å¤‡ç®¡ç† ä»¥ä¸‹å‘½ä»¤ç”¨äºç®¡ç†è™šæ‹Ÿæœºçš„ USB è®¾å¤‡ï¼š\nqemu-system-x86_64 -usbdevice host:1234:5678 qemu-system-x86_64 -usbdevice tablet qemu-system-x86_64 -usbdevice keyboard -usbdevice hostğŸ”¢5678ï¼šå°†ä¸»æœºçš„ USB è®¾å¤‡ 1234:5678 åˆ†é…ç»™è™šæ‹Ÿæœº -usbdevice tabletï¼šä½¿ç”¨ USB è§¦æ‘¸æ¿ -usbdevice keyboardï¼šä½¿ç”¨ USB é”®ç›˜ ","permalink":"https://lifeislife.cn/posts/qemu%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","summary":"\u003cp\u003eQEMU æ˜¯ä¸€ä¸ªå¼€æºçš„è™šæ‹ŸåŒ–è½¯ä»¶ï¼Œå®ƒèƒ½å¤Ÿæ¨¡æ‹Ÿä¸åŒçš„ç¡¬ä»¶å¹³å°ï¼Œè®©ç”¨æˆ·åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¹‹é—´è¿›è¡Œåˆ‡æ¢å’Œæµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ QEMU å¸¸ç”¨å‘½ä»¤çš„æ€»ç»“æ–‡æ¡£ï¼ŒåŒ…å«æ¯ä¸ªå‘½ä»¤çš„åŠŸèƒ½è¯´æ˜ã€‚\u003c/p\u003e","title":"QEMU å¸¸ç”¨å‘½ä»¤"},{"content":"å¸¸è§æœ¯è¯­ é»„è¡«ï¼ˆYellow jersey/Maillot Jauneï¼‰ é»„è¡«æ˜¯æ€»æˆç»©é¢†å…ˆè€…çš„è±¡å¾ï¼Œç©¿ä¸Šé»„è¡«çš„è½¦æ‰‹å°±æ˜¯æ¯”èµ›çš„é¢†å¤´ç¾Šã€‚ ç»¿è¡«ï¼ˆGreen jersey/Maillot Vertï¼‰ ç»¿è¡«ä»£è¡¨å†²åˆºç§¯åˆ†çš„é¢†å…ˆè€…ï¼Œé€šå¸¸ç”±æ“…é•¿å¹³åœ°å†²åˆºçš„è½¦æ‰‹ç©¿ç€ã€‚ åœ†ç‚¹è¡«ï¼ˆPolka dot jersey/Maillot Ã  Pois Rougesï¼‰ åœ†ç‚¹è¡«æˆäºˆçˆ¬å¡ç§¯åˆ†æœ€é«˜çš„è½¦æ‰‹ï¼Œçˆ¬å¡èƒ½åŠ›å¼ºçš„è½¦æ‰‹æ›´æœ‰æœºä¼šè·å¾—ã€‚ ç™½è¡«ï¼ˆWhite jersey/Maillot Blancï¼‰ ç™½è¡«æ˜¯æœ€ä½³å¹´è½»è½¦æ‰‹ï¼ˆ25å²ä»¥ä¸‹ï¼‰çš„è±¡å¾ï¼Œè¡¨ç°ä¼˜å¼‚çš„å¹´è½»è½¦æ‰‹ä¼šç©¿ä¸Šç™½è¡«ã€‚ çªå›´/å…”å­ï¼ˆBreakawayï¼‰ æŒ‡æ¯”èµ›ä¸­ä¸€å°éƒ¨åˆ†è½¦æ‰‹ä»ä¸»é›†å›¢ï¼ˆPelotonï¼‰ä¸­çªå›´å‡ºæ¥ï¼Œå°è¯•æŠ¢å é¢†å…ˆä½ç½®ã€‚ ä¸»é›†å›¢ï¼ˆPelotonï¼‰ ä¸»é›†å›¢æ˜¯æ¯”èµ›ä¸­æœ€å¤§çš„è½¦æ‰‹é˜Ÿä¼ï¼Œå¤§éƒ¨åˆ†è½¦æ‰‹éƒ½ä¼šå¾…åœ¨ä¸»é›†å›¢é‡Œï¼ŒèŠ‚çœä½“åŠ›ã€‚ å†²åˆºï¼ˆSprintï¼‰ å†²åˆºæ˜¯æ¯”èµ›æœ€åå‡ ç™¾ç±³çš„æ¿€çƒˆç«äº‰ï¼Œå†²åˆºæ‰‹ï¼ˆSprinterï¼‰ä»¬ä¼šåœ¨è¿™æ—¶å…¨åŠ›ä»¥èµ´ï¼Œäº‰å¤ºèµ›æ®µå† å†›ã€‚ æ‰é˜Ÿï¼ˆDroppedï¼‰ è¢«å…¶ä»–é€‰æ‰‹ç”©åœ¨åé¢ï¼Œä¹Ÿè¢«ç§°ä¸ºoff the backæˆ–è€…out the backã€‚ è®¡æ—¶èµ›ï¼ˆTime Trialï¼‰ è®¡æ—¶èµ›æ˜¯è½¦æ‰‹å•ç‹¬å‡ºå‘ï¼ŒæŒ‰æ—¶é—´è®¡æˆç»©çš„æ¯”èµ›å½¢å¼ï¼ŒåŒ…æ‹¬ä¸ªäººè®¡æ—¶èµ›ï¼ˆITTï¼‰å’Œå›¢é˜Ÿè®¡æ—¶èµ›ï¼ˆTTTï¼‰ã€‚ æ€»æˆç»©ï¼ˆGeneral Classification, GCï¼‰ æ€»æˆç»©æ˜¯æ ¹æ®è½¦æ‰‹æ¯ä¸ªèµ›æ®µçš„æ—¶é—´ç´¯åŠ è®¡ç®—çš„ï¼Œæœ€ç»ˆæ€»æ—¶é—´æœ€å°‘çš„è½¦æ‰‹å°†è·å¾—é»„è¡«ã€‚ çš‡åèµ›æ®µï¼ˆQueen Stageï¼‰ æŒ‡çš„æ˜¯èƒ½å¤Ÿå†³å®šå¤šæ—¥èµ›æœ€ç»ˆæ’åçš„å…³é”®æ€§å±±åœ°èµ›æ®µï¼Œé€šå¸¸æœ‰æ•°åº§éš¾åº¦å¾ˆå¤§çš„å±±å³°ã€‚ ç«è½¦ï¼ˆPacelineï¼‰ æŒ‡çš„æ˜¯é˜Ÿå‹åœ¨å‰é¢åšè‹¦åŠ›ï¼Œä¿æŠ¤ä¸»å°†ï¼Œä¸ºä¸»å°†èŠ‚çœä½“åŠ›çš„æˆ˜æœ¯ã€‚ï¼ˆå¯¹åº”çš„æœ‰å†²åˆºç«è½¦æˆ–æ˜¯å±±åœ°ç«è½¦ï¼‰ è·Ÿé£/è¹­é£/å¸å°¾æµï¼ˆDraftï¼‰ åœ¨é«˜é€Ÿéª‘è¡Œè¿‡ç¨‹ä¸­ï¼Œè½¦æ‰‹çš„å¤§éƒ¨åˆ†ä½“åŠ›æ˜¯æ¶ˆè€—åœ¨å¯¹æŠ—ç©ºæ°”é˜»åŠ›ï¼ˆé£é˜»ï¼‰ä¸Šã€‚å› æ­¤ä¼šæœ‰è½¦æ‰‹éª‘åœ¨å…¶ä»–äººæˆ–è½¦å­åæ–¹ï¼Œæ¥é™ä½é£é˜»ï¼ŒèŠ‚çœä½“åŠ›ã€‚ ç²˜ç“¶ï¼ˆSticky Bpttleï¼‰ é€‰æ‰‹åœ¨æ‹¿è¡¥ç»™è½¦çš„æ°´å£¶æ—¶ï¼Œä¼šçŸ­æš‚è·å¾—è¡¥ç»™è½¦æ‰€å¸¦æ¥çš„åŠ©åŠ›ï¼Œä»¥èŠ‚çœä½“åŠ›ï¼Œé€šå¸¸ä¸‰äº”ç§’ä¹‹å†…éƒ½æ˜¯è¢«å…è®¸çš„ï¼Œå¦‚æœæ—¶é—´å¤ªé•¿è¢«è£åˆ¤å‘ç°å°†ä¼šè¢«ç½šæ¬¾ç”šè‡³å–æ¶ˆæˆç»©ã€‚ å…³é—¨æ—¶é—´ï¼ˆTime limitï¼‰ åœ¨æ¯å¤©çš„æ¯”èµ›ä¸­ï¼Œè½¦æ‰‹ä»¬å¿…é¡»åœ¨ä¸è¶…è¿‡å½“æ—¥èµ›æ®µå† å†›ç”¨æ—¶çš„ä¸€å®šæ¯”ä¾‹æ—¶é—´å†…å®Œèµ›ï¼Œå¦åˆ™å°†è¢«å–æ¶ˆæ¯”èµ›èµ„æ ¼ï¼Œä¸è¢«è·å‡†åœ¨ç¬¬äºŒå¤©çš„æ¯”èµ›æ—¶å‘è½¦ï¼›ç¡®åˆ‡çš„æ¯”ä¾‹å–å†³äºèµ›æ®µçš„ç±»å‹ã€åœ°å½¢å’Œé€Ÿåº¦ï¼›é€Ÿåº¦å¿«æ—¶ï¼Œåœ¨å¹³åœ°èµ›æ®µä¸­ï¼Œæ¯”ä¾‹ä¼šä½è‡³5%ï¼Œè€Œé€Ÿåº¦æ…¢æ—¶ï¼Œåœ¨å±±åœ°èµ›æ®µä¸­ï¼Œæ¯”ä¾‹ä¼šè¾¾åˆ°16ã€17%ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œèµ›äº‹ç»„ç»‡è€…æœ‰æƒé…Œæƒ…èµ¦å…ä¸€äº›è½¦æ‰‹ï¼Œæ¯”å¦‚å½“æœ‰è¿‡å¤§ä¸€éƒ¨åˆ†è½¦æ‰‹æ— æ³•åœ¨å…³é—¨æ—¶é—´å†…å®Œèµ›æ—¶ã€‚å†å²ä¸Šä¹Ÿæœ‰è¿‡ç‰¹ä¾‹ï¼Œä¸€äº›å¤§ç‰Œå†²åˆºæ‰‹è¢«å…³é—¨ï¼Œç„¶åç»„å§”ä¼šä»¥æ‰£å†²åˆºç§¯åˆ†çš„å½¢å¼æ¥æ”¾ä»–ä»¬ä¸€é©¬ã€‚ çˆ¬å¡ç‚¹ç­‰çº§ï¼ˆMountain Climb Classificationï¼‰ æ¯”èµ›ä¸­è®¾ç½®çš„çˆ¬å¡æŠ¢åˆ†ç‚¹ï¼Œéš¾åº¦ä¸çº§æ•°ç”±ä½è‡³é«˜ä¸º4ã€3ã€2ã€1ã€HCï¼ˆé¡¶çº§ï¼‰ï¼›è¶Šé«˜çš„çº§æ•°ä»£è¡¨çˆ¬å¡é•¿åº¦è¶Šé•¿ã€å¡åº¦è¶Šé™¡ã€‚ è¡¥ç»™åŒº Feed Zone æ¯”èµ›ä¸­è®¾ç½®ä¸€ä¸ªåŒºåŸŸï¼Œè®©è½¦é˜Ÿæä¾›è½¦æ‰‹é¥®é£Ÿè¡¥ç»™è¢‹çš„åœ°æ–¹ã€‚é€šå¸¸ï¼Œè½¦æ‰‹ä¸ä¼šåœ¨è¿™ä¸ªåŒºåŸŸå‘åŠ¨æ”»å‡»ã€‚ åƒåœ¾ä¸¢å¼ƒåŒºï¼ˆCollection Zoneï¼‰ UCIè§„å®šåªèƒ½åœ¨å›ºå®šçš„åƒåœ¾ä¸¢å¼ƒåŒºæ‰”åƒåœ¾ï¼Œå¦åˆ™ä¼šè¢«ç½šæ¬¾ã€‚ è‡ªè¡Œè½¦æˆ˜æœ¯ æ²¹ç®¡ä¸Šæœ‰ä¸ªå°æ¹¾åšä¸»å«åšã€Šå–‚æˆ‘é˜¿ç»´ã€‹åšäº†ä¸€ä¸ªè‡ªè¡Œè½¦æˆ˜æœ¯çš„ç³»åˆ—è§†é¢‘ï¼Œè¿™ä¸ªç³»åˆ—çš„è§†é¢‘é€‰æ‹©äº†ä¸€äº›å®æˆ˜çš„æˆ˜å†µå¹¶ç»“åˆäº†ä¸‰ç»´åŠ¨ç”»æ¥è§£é‡Šå„ç§æˆ˜æœ¯ï¼Œéå¸¸ç›´è§‚æ˜“æ‡‚ï¼Œæ¨èå¤§å®¶è§‚çœ‹ã€‚\nç¯æ³•è§‚èµ›ä¸­å°ç™½å¸¸é—®çš„é—®é¢˜ ä¸ºä½•çº¦çº³æ–¯æ¸©æ ¼é«˜ï¼ˆJonas Vingegaard Rasmussenï¼‰å¤–å·é²¨é±¼ä½¬ï¼Ÿ æ¸©æ ¼é«˜åœ¨è¿›å…¥èŒä¸šæ¯”èµ›ä¹‹å‰æ›¾åœ¨é±¼ç±»åŠ å·¥å‚å¹²è¿‡ä¸€å¹´å·¦å³çš„å…¼èŒï¼Œæ‰€ä»¥ç²‰ä¸ç»™ä»–èµ·äº†å¤–å·shaé±¼ä½¬ã€‚å› ä¸ºé²¨é±¼å’Œshaé±¼å‘éŸ³ç›¸åŒï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ä¸ªå¤–å·ã€‚å…¶å®ä¹Ÿæ˜¯ä¸ºäº†è§„é¿ç¤¾äº¤å¹³å°çš„æ•æ„Ÿè¯ã€‚ ä¸ºä½•æåˆ°æ³¢åŠ æŸ¥å°±ä¼šæåˆ°èŠ¬è¾¾ï¼Ÿå«ä»–èŠ¬è¾¾è¶…äººï¼Ÿ å› ä¸ºå…¶ä»–è½¦æ‰‹ç»“æŸæ¯”èµ›å¤§å¤šä¼šå–çº¯å‡€æ°´æˆ–è€…ä¸€äº›ç”µè§£è´¨é¥®æ–™ï¼Œæˆ–è€…ä¸€äº›æˆ‘ä»¬ä¸è®¤è¯†çš„åŠŸèƒ½é¥®æ–™ã€‚è€Œæ³¢åŠ æŸ¥å–œæ¬¢æ¯”èµ›åå–èŠ¬è¾¾ã€‚ä¸è¿‡ä»Šå¹´å¾ˆå°‘çœ‹åˆ°ä»–å–èŠ¬è¾¾äº†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ²¡è¦åˆ°èµåŠ©è´¹ï¼ˆç‹—å¤´ä¿å‘½ï¼‰ã€‚ æ¯æ¬¡æ¯”èµ›éƒ½æœ‰å››äº”ä¸ªå°æ—¶ï¼Œè½¦æ‰‹æ€ä¹ˆä¸Šå•æ‰€ï¼Ÿ å½“ç„¶æ˜¯ç«™ç€è§£å†³äº†ï¼Œå“ˆå“ˆã€‚æ¯”èµ›å¼€å§‹æ—¶è½¦é€Ÿè¾ƒæ…¢ï¼Œè¿˜å¯ä»¥åœè½¦åœ¨è·¯è¾¹è§£å†³ã€‚æ¯”èµ›ä¸­æ®µè½¦é€Ÿä¼šå¾ˆå¿«ï¼Œä¸€æ—¦åœè½¦å°†å¾ˆéš¾è¿½ä¸Šï¼Œé€šå¸¸è¿™æ—¶è½¦æ‰‹ä¼šè¾¹éª‘è¾¹æ”¾æ°´ï¼Œå¦‚æœä½ åœ¨ç›´æ’­ä¸­çœ‹åˆ°æœ‰åœ¨è¾¹ä¸Šéª‘è½¦å¹¶ä¸”éª‘è¡Œå§¿åŠ¿å¥‡æ€ªçš„è½¦æ‰‹ï¼Œé‚£ä¹ˆä»–å¯èƒ½åœ¨æ”¾æ°´ã€‚ ç¯æ³•ä¸­æœ‰ä¸­å›½çš„è½¦é˜Ÿå—ï¼Ÿ å¾ˆå¯æƒœï¼Œæ²¡æœ‰ã€‚ç›®å‰ä¹Ÿåªæœ‰ä¸€ä½ä¸­å›½è½¦æ‰‹å®Œæˆè¿‡ç¯æ³•ï¼Œæ˜¯åœ¨2014å¹´æ¥è‡ªæ·å®‰ç‰¹Â·ç¦§ç›è¯ºè½¦é˜Ÿä¸­å›½è½¦æ‰‹è®¡æˆï¼Œä»¥ç¬¬164åï¼Œä¹Ÿæ˜¯æœ€åä¸€åå®Œæˆæ¯”èµ›ã€‚ æœ‰çš„èµ›æ®µåœ¨ç»ˆç‚¹å‰è®¸å¤šè½¦æ‰‹ä¸ºä»€ä¹ˆå‘è·¯è¾¹æ‰”æ°´å£¶ï¼Ÿ ä¸ºäº†å‡è½»è´Ÿé‡ï¼Œæé«˜å†²åˆºé€Ÿåº¦ã€‚ å¡æ–‡è¿ªä»€ï¼ˆMark CAVENDISHï¼‰å¤–å·ç”±æ¥ï¼Ÿ ç›˜çˆ·ï¼šå–è‡ªåå­—ï¼ˆCAVENDISHï¼‰çš„æœ€åå››ä¸ªå­—æ¯ï¼ˆDishï¼‰ã€‚ æ›¼å²›é£å¼¹ï¼šå› ä¸ºå¡æ–‡è¿ªä»€æ˜¯åœŸç”ŸåœŸé•¿çš„æ›¼å²›äººï¼Œå¹¶ä¸”é€Ÿåº¦é£å¿«ï¼ˆæ›¼å²›ä»¥æ‘©æ‰˜èµ›æ›¼å²›TTè‘—ç§°ï¼‰ã€‚ å¡èƒ–ï¼šå¡æ–‡è¿ªä»€ä¸æ“…çˆ¬å¡ï¼Œä»¥åŠæ¯é€¢ä½³èŠ‚èƒ–ä¸‰æ–¤çš„ä½“è´¨ï¼Œä¸ºä»–æ‹›æ¥äº†è¿™ä¸ªâ€œé›…å·â€ã€‚ ä¸ºä½•ä¸æƒ³äº‰èµ›æ®µçš„è½¦é˜Ÿä¹Ÿä¼šåœ¨å‰é¢å¸¦é£ï¼Ÿä¸ºä½•è¦æŠŠä¸»å°†å¸¦åˆ°æœ€åä¸‰å…¬é‡Œï¼Ÿ é¦–å…ˆåœ¨é›†å›¢å‰æ–¹ç›¸å¯¹æ¥è¯´è¾ƒä¸ºå®‰å…¨ï¼Œå› ä¸ºé›†å›¢åæ–¹åªèƒ½çœ‹åˆ°å‰é¢è½¦æ‰‹çš„å±è‚¡ï¼Œå¯¹çªå‘æƒ…å†µéš¾ä»¥é¢„åˆ¤ã€‚å…¶æ¬¡å› ä¸ºåœ¨æœ€åä¸‰å…¬é‡Œå‘ç”Ÿæ‘”è½¦æˆ–è€…æœºæ¢°æ•…éšœï¼Œæˆç»©æŒ‰ç…§å¤§é›†å›¢çš„è¿‡çº¿æˆç»©è®¡ç®—ï¼Œä¸ä¼šä¸¢æ—¶é—´ã€‚ æ›´æ–°ï¼šUCI å·²å†³å®šå…è®¸ç»„ç»‡è€…å’Œå…¶ä»–åˆ©ç›Šç›¸å…³è€…è¯•è¡Œè¦æ±‚ä¿®æ”¹æ‰€è°“çš„â€œä¸‰å…¬é‡Œâ€ï¼ˆæˆ–â€œå†²åˆºåŒºâ€ï¼‰è§„åˆ™ï¼ˆã€ŠUCI è§„åˆ™ã€‹ç¬¬ 2.6. 027 æ¡ï¼‰ï¼Œè¯¥è§„åˆ™é€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼šæ¯”èµ›è¿›å…¥æœ€åå†²åˆºåŒºï¼Œæ ¹æ®è¯¥è§„åˆ™ï¼Œå¦‚æœåœ¨å…¬è·¯èµ›æ®µçš„æœ€åä¸‰å…¬é‡Œï¼ˆä¸åŒ…æ‹¬å±±é¡¶ç»ˆç‚¹ï¼‰å‘ç”Ÿé€‚å½“æ³¨æ„åˆ°çš„äº‹ä»¶ï¼ˆä¾‹å¦‚è·Œå€’ã€æœºæ¢°é—®é¢˜æˆ–çˆ†èƒï¼‰ï¼Œå—å½±å“çš„éª‘æ‰‹çš„æ—¶é—´è®°å…¥äº‹ä»¶å‘ç”Ÿæ—¶ä¸ä»–ä¸€èµ·éª‘è½¦çš„éª‘æ‰‹çš„æ—¶é—´ã€‚å¦‚æœæœ‰æ­£å½“ç†ç”±ï¼Œæå‡ºè¯·æ±‚çš„ç»„ç»‡è€…ï¼ˆæˆ–å…¶ä»–åˆ©ç›Šç›¸å…³è€…ï¼‰å¯ä»¥å»¶é•¿ä¸Šè¿°è§„åˆ™æ‰€è€ƒè™‘çš„è·ç¦»ï¼Œæœ€å¤šå¯ä»¥å¢åŠ åˆ°äº”å…¬é‡Œã€‚ä»»ä½•å˜æ›´éƒ½å¿…é¡»åœ¨æ¯”èµ›å¼€å§‹å‰è·å¾—åŒæ„ã€‚ ç¯æ³•æ˜¯ä¸æ˜¯åªæœ‰ä¸€æ¡çº¿è·¯ï¼Ÿç¯ç»•æ³•å›½å›½ç•Œå—ï¼Ÿ ä¸æ˜¯ï¼Œç¯æ³•å¤šä¸ªèµ›æ®µï¼Œå¹¶ä¸”ç¯æ³•æ¯å¹´çš„çº¿è·¯éƒ½ä¸ä¸€æ ·ï¼Œä»Šå¹´2024å¹´å°±æœ‰21ä¸ªèµ›æ®µï¼Œå¹¶ä¸”ä¹Ÿä¸æ˜¯ç¯ç»•æ³•å›½è¾¹å¢ƒçº¿ï¼Œæœ‰æ—¶å€™ä¼šç»è¿‡æ³•å›½ä»¥å¤–çš„å›½å®¶ï¼Œæ¯”å¦‚ä»Šå¹´2024å¹´ï¼Œå°±æ˜¯ä»æ„å¤§åˆ©çš„ä½›ç½—ä¼¦è¨å‘è½¦ã€‚ æ¯”èµ›ä¸­çš„å…”å­æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä¸ºä½•æœ‰é£ä¸è¹­è¦è‡ªå·±é¡¶é£éª‘ï¼Ÿ ä¹‹å‰å›å¤å“”ç«™çš„ä¸€ä½çš„æé—®ã€‚å…”å­å°±æ˜¯çªå›´çš„è½¦æ‰‹ï¼Œå°±æ˜¯å†²åœ¨æœ€å‰é¢è¿œç¦»å¤§é›†å›¢çš„è½¦æ‰‹ã€‚æ¯ä¸ªè½¦é˜Ÿåœ¨æ¯åœºæ¯”èµ›ä¸­çš„æˆ˜æœ¯ä¸åŒè¿™ä¸ªç›®çš„å°±å¤ªå¤šäº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä¸€ä¸ªè½¦æ‰‹è§‰å¾—è‡ªå·±ä»Šå¤©çŠ¶æ€ç‰¹åˆ«å¥½ï¼Œé‚£ä»–å°±å¯ä»¥å†²å‡ºå»ä¸ºäº†äº‰å¤ºèµ›æ®µå† å†›ï¼Œå¦‚æœè·Ÿç€å¤§é›†å›¢çš„è¯æœ€åçš„å†²åˆºä¼šå¾ˆéš¾å–èƒœã€‚ä¹Ÿæœ‰çš„è½¦é˜Ÿæƒ³è¦æ‹‰èµåŠ©è·å¾—æ›´é«˜çš„æ›å…‰ï¼Œé‚£å°±ä¼šå®‰æ’è½¦æ‰‹çªå›´ï¼Œè¿™æ ·å¯ä»¥è·å¾—æ›´å¤šçš„é•œå¤´å¢åŠ æ›å…‰é‡ã€‚è¿˜æœ‰å°±æ˜¯æ¯”èµ›ä¸€èˆ¬éƒ½æœ‰è£èª‰è¡«ï¼Œè£èª‰è¡«ä¸ä»…ä»…åªæœ‰æˆç»©ç¬¬ä¸€æ‰æœ‰ï¼Œä¹Ÿæœ‰å†²åˆºå¾—åˆ†æœ€å¤šçš„ï¼Œçˆ¬å¡å¾—åˆ†æœ€å¤šçš„ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰çªå›´è½¦æ‰‹å†²å‡ºå»æŠ¢å¤ºè¿™äº›ç§¯åˆ†è·å¾—è£èª‰è¡«ã€‚å†æœ‰å°±æ˜¯åªæ˜¯ä¸ºäº†æ‰“ä¹±ç«äº‰å¯¹æ‰‹çš„èŠ‚å¥ï¼Œå› ä¸ºä½ çªå›´çš„è¯ï¼Œç«äº‰å¯¹æ‰‹å°±éœ€è¦æ¶ˆè€—å¤§é‡ä½“åŠ›è¿½èµ¶ï¼Œå¾ˆå®¹æ˜“ä¹±äº†èŠ‚å¥ã€‚å½“ç„¶ä½ ä¹Ÿè‚¯å®šå¬è¿‡ç©ºä¸­åŠ æ²¹è¿™ä¸ªæˆ˜æœ¯ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªæˆ˜æœ¯æ—¶å°±éœ€è¦å…”å­è¿™ä¸ªè§’è‰²ï¼Œä¸€èˆ¬æ˜¯å®åŠ›è¾ƒå¼ºçš„å‰¯å°†çªå›´ï¼Œåœ¨çˆ¬å¡ä¹‹å‰ç­‰è‡ªå·±çš„ä¸»å°†ï¼ˆåœ¨ç­‰å¾…è¿‡ç¨‹ä¸­å°±ä¼šé™é€Ÿæ¢å¤ä½“åŠ›ï¼‰ï¼Œç„¶ååœ¨çˆ¬å¡æ—¶ä¸ºä»–ç ´é£ï¼Œå› ä¸ºè¿™æ—¶å€™ç«äº‰å¯¹æ‰‹åœ¨è¿½å…”å­çš„æ—¶å€™å·²ç»æ¶ˆè€—äº†ä½“åŠ›ï¼Œè€Œå…”å­å·²ç»ç¨æœ‰æ¢å¤ï¼Œè¿™æ—¶å€™å°±èƒ½å°†ä¸»å°†å‘å°„å‡ºå»ã€‚ è½¦æ‰‹æŠŠç«‹ä½ç½®æ˜¯æ˜¾ç¤ºå±å—ï¼Ÿè¿˜æ˜¯ä¸€å¼ è´´çº¸ï¼Ÿ æ˜¯è´´çº¸ï¼Œæ ‡æ³¨äº†ç®€å•çš„èµ›æ®µä¿¡æ¯ï¼Œæœ€é‡è¦çš„æ˜¯è¡¥ç»™æ—¶é—´ï¼Œæ¯”å¦‚å›¾2å°±æ˜¯ç¬¬å››èµ›æ®µæ³¢åŠ æŸ¥è½¦ä¸Šè´´çš„è´´çº¸ï¼Œæ ‡æ³¨äº†æµ·æ‹”å›¾ï¼Œè¿˜æœ‰åœ¨å“ªäº›ä½ç½®è¿›è¡Œè¡¥ç»™ã€‚ç è¡¨ä¸€èˆ¬æ”¾åœ¨æŠŠç«‹å‰æ–¹ï¼Œçªå‡ºçš„éƒ¨åˆ†ï¼Œæœ‰ä¸ªæ¶å­ã€‚ ä»€ä¹ˆæ˜¯åå…¬é‡Œå…šï¼Ÿ å°±æ˜¯åªçœ‹æ¯”èµ›æœ€å10å…¬é‡Œçš„è§‚ä¼—ï¼Œå› ä¸ºå¹³è·¯èµ›æ®µé€šå¸¸æ¯”è¾ƒæ— èŠï¼Œä¸ä¼šæœ‰ä»€ä¹ˆè¿›æ”»ï¼Œåªæœ‰æœ€åå‡ å…¬é‡Œæ‰æœ‰ä¸€äº›åŠ¨ä½œã€‚ ä¸ªäººè®¡æ—¶èµ›ï¼ˆITTï¼‰å¦‚ä½•è¿›è¡Œçš„ï¼Ÿ æ‰€æœ‰æœªé€€èµ›çš„é€‰æ‰‹ï¼Œéƒ½ä¼šå‚åŠ ã€‚å‘è½¦é¡ºåºæ˜¯å½“å‰æ€»æˆç»©çš„å€’åºã€‚å‘è½¦é—´éš”ä¸ç¡®å®šï¼ˆå¯èƒ½UCIæœ‰è§„å®šå¦‚æœæœ‰çŸ¥é“å…·ä½“è®¡ç®—æ–¹å¼çš„æ¬¢è¿è¯„è®ºåŒºå‘ŠçŸ¥ï¼‰ï¼Œ2024å¹´ç¯æ³•ç¬¬7èµ›æ®µå‘è½¦é—´éš”ä¸º1åˆ†é’Ÿã€‚å’Œå…¶ä»–èµ›æ®µä¸åŒï¼Œä¸ªäººè®¡æ—¶èµ›æ²¡æœ‰é˜Ÿå‹å’Œå…¶ä»–äººç ´é£ï¼Œå®Œå…¨éœ€è¦æ¯”æ‹¼ä¸ªäººå®åŠ›ï¼Œç”¨æ—¶æœ€çŸ­è€…è·èƒœã€‚æ­¤å¤–è¿˜æœ‰å›¢é˜Ÿè®¡æ—¶èµ›ï¼ˆTTTï¼‰ï¼Œæ˜¯ä»¥è½¦é˜Ÿä¸ºå•ä½é—´éš”å‘è½¦ï¼Œæ¯”æ‹¼è½¦é˜Ÿæ•´ä½“å®åŠ›ï¼Œ2024å¹´ç¯æ³•æ²¡æœ‰å›¢é˜Ÿè®¡æ—¶èµ›ã€‚ ç›´æ’­ä¸­å±å¹•ä¸Šæ–¹çš„æ—¶é—´å·®æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ ä¸Šæ–¹æ ‡å¿—å¯ä»¥æŸ¥çœ‹é›†å›¢ä¿¡æ¯ï¼Œé»„è‰²é«˜äº®æ¡†è¡¨ç¤ºå½“ç„¶ç”»é¢æ˜¯å“ªä¸ªé›†å›¢ï¼Œæ¯”å¦‚ç°åœ¨å°±æ˜¯è¡¨ç¤ºç”»é¢æ˜¯å¤§é›†å›¢ã€‚é›†å›¢æ ‡é¢˜å¯èƒ½ä¸ºè£èª‰è¡«çš„æ³•è¯­åç§°ï¼ˆæ¯”å¦‚Maillot Jauneæ˜¯é»„è¡«ï¼ŒGr.æ˜¯Groupçš„ç¼©å†™ï¼‰ï¼Œé¢†å¤´ç¾Šï¼ˆTÃªte de la Courseï¼Œè¡¨ç¤ºè¿™ä¸ªé›†å›¢ä»å¼€å§‹å°±çªå›´å¹¶ä¸€ç›´ä¿æŒé¢†å…ˆæœªè¢«è¿½ä¸Šè¿‡ï¼‰ï¼Œæ˜æ˜Ÿè½¦æ‰‹çš„åå­—ï¼ˆæ¯”å¦‚å›¾ä¸­çš„Carapazå’ŒJohannessenï¼‰ï¼Œå¤§é›†å›¢ï¼ˆPelotonï¼‰ï¼Œè¿½å‡»é›†å›¢ï¼ˆChaseï¼‰ç­‰ç­‰ã€‚æ˜¾ç¤ºçš„æ—¶é—´è¡¨ç¤ºä¸çªå›´é›†å›¢çš„å·®è·ï¼Œæ‰€æœ‰çš„æ—¶é—´éƒ½æ˜¯ç›¸å¯¹äºçªå›´é›†å›¢çš„ï¼Œä¸æ˜¯ç›¸å¯¹äºå®ƒçš„å‰ä¸€ä¸ªé›†å›¢ã€‚æ¯”å¦‚å½“å‰å¤§é›†å›¢æ¯”çªå›´é›†å›¢æ…¢äº†çº¦ä¸‰åˆ†é’Ÿä¸‰åå››ç§’ï¼Œå¡æ‹‰å¸•å…¹æ¯”çªå›´é›†å›¢æ…¢äº†çº¦åä¸ƒç§’ã€‚ ç ´é£æ‰‹åœ¨æ¯”èµ›å‰å°±å®šå¥½äº†å—ã€‚æ¯åœºæ¯”èµ›ä¼šè½®æµå—ï¼Ÿ ä¸æ˜¯å®šå¥½çš„ï¼Œä½†æ˜¯æ¯ä¸ªè½¦é˜Ÿéƒ½ä¼šèµ›å‰å®šæˆ˜æœ¯ï¼Œèµ›åœºä¸Šå˜åŒ–å¾ˆå¤šï¼Œèµ›ä¸­è½¦æ‰‹ä¹Ÿä¼šå¬æ— çº¿ç”µé‡Œè½¦é˜Ÿä¸»ç®¡çš„å®‰æ’ã€‚æœ‰ä¸€ç‚¹æ˜¯å®šçš„ï¼Œä¸»å°†å‡ ä¹ä¸ä¼šå‚ä¸ç ´é£ã€‚ æœ€ä½³è½¦é˜Ÿå¥–æ˜¯å¦‚ä½•è¯„æ¯”çš„ï¼Ÿ æ¯ä¸ªèµ›æ®µç»“æŸåï¼Œæ ¹æ®æ¯ä¸ªè½¦é˜Ÿçš„å‰ä¸‰åæœ€å¥½æˆç»©ï¼Œè®¡ç®—è½¦é˜Ÿçš„æ€»æˆç»©ã€‚æ—¶é—´æœ€å°‘çš„è½¦é˜Ÿè·å¾—æœ€ä½³è½¦é˜Ÿå¥–ã€‚ èµåŠ©å•†èµåŠ©çš„èµ„æºæ˜¯å¦åŒ…å«ä½ æåˆ°çš„è¿™äº›è§’è‰²ï¼Œæ˜¯è‚¯å®šåŒ…å«çš„ã€‚ä½†æ˜¯å…·ä½“èµåŠ©äº†ä»€ä¹ˆï¼ŒèµåŠ©å¤šå°‘ï¼Œå¦‚ä½•åˆ†é…ï¼Œä¹Ÿç®—æ˜¯å•†ä¸šæœºå¯†å§ï¼Œæˆ‘å°±ä¸å¾—è€ŒçŸ¥äº†ã€‚æˆ‘ä¹Ÿåˆ†äº«ä¸€äº›æˆ‘äº†è§£çš„ä¿¡æ¯ã€‚èµåŠ©å•†æŠ•å…¥æœ€å¤§çš„è¿˜æ˜¯åœ¨è‡ªè¡Œè½¦ä¸Šã€‚æ¯è¾†è‡ªè¡Œè½¦è‡³å°‘éƒ½åœ¨ä¸€ä¸‡ç¾å…ƒä»¥ä¸Šã€‚æ¯ä¸ªèµ›å­£éƒ½è¦æŠ•å…¥ä¸€ä¸¤ç™¾è¾†çš„è½¦ï¼Œè¿™äº›è£…å¤‡è‚¯å®šéƒ½æ˜¯åˆ†é…ç»™è½¦æ‰‹çš„ï¼Œæ­¤å¤–èµåŠ©å•†é€šå¸¸è¿˜ä¼šèµåŠ©å„ä¸ªè½¦é˜Ÿå…¨çƒå¾æˆ˜çš„å·®æ—…è´¹ï¼Œè¿™å°±è‚¯å®šåŒ…å«æ‰€æœ‰åå‹¤ä¿éšœäººå‘˜äº†ã€‚è¿™é‡Œæ’ä¸€ä¸ªæœ‰æ„æ€çš„ï¼Œè½¦é˜ŸèµåŠ©å•†çš„æŠ•å…¥ä¸ä»…å¯ä»¥ä»è½¦æ‰‹è£…å¤‡çœ‹å‡ºå·®å¼‚ï¼Œåå‹¤ä¿éšœè½¦ä¸Šä¹Ÿèƒ½ç®¡ä¸­çª¥è±¹ã€‚å»å¹´çš„å† å†›è½¦é˜Ÿvismaè½¦é˜Ÿå¤§å·´å ªæ¯”ç§»åŠ¨å ¡å’ï¼Œç§»åŠ¨ä¹‹å®¶ï¼Œè€Œç°åœ¨åªæ˜¯èŒä¸šè½¦é˜Ÿä¹é€è½¦é˜Ÿ(Vismaè½¦é˜Ÿæ˜¯ä¸–ç•Œçº§è½¦é˜Ÿï¼Œæ¯”èŒä¸šè½¦é˜Ÿé«˜ä¸€çº§)çš„å¤§å·´å°±ç•¥æ˜¾â€œå¯’é…¸â€äº†ã€‚æ„Ÿå…´è¶£çš„è¯å¯ä»¥æ²¹ç®¡æœç´¢å…³é”®è¯Inside Team busã€‚çœ‹çœ‹å„ä¸ªè½¦é˜Ÿå¤§å·´çš„å†…éƒ¨è±ªåè®¾æ–½ï¼Œè¿˜æ˜¯è›®æœ‰æ„æ€çš„ã€‚ å…³äºèµåŠ©å•†çš„å†…å®¹ï¼Œæˆ‘ä¹Ÿæ˜¯å¤–è¡Œäººï¼Œæˆ‘ç»™ä½ å‘äº†ä¸€ä¸ªé“¾æ¥ï¼Œå¯ä»¥äº†è§£æ›´å¤šå…³äºèµåŠ©çš„å†…å®¹ã€‚ä¹Ÿæ„Ÿè°¢ä½ çš„æé—®ï¼Œè®©æˆ‘ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šã€‚\nç¬¬äºŒä¸ªé—®é¢˜æ˜¯å…³äºå¦‚ä½•è·å¾—æ¯”èµ›å¥–é‡‘ä»¥åŠå¥–é‡‘å¦‚ä½•åˆ†é…çš„ã€‚å¦‚ä½•è·å¾—å¥–é‡‘ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥ç›´æ¥ç«™å†…æœç´¢åº”è¯¥æœ‰æœ‹å‹åšæ€»ç»“ï¼Œæˆ‘å°±ç®€å•æ¦‚æ‹¬ä¸€ä¸‹å§ï¼Œå¥–é‡‘é™¤äº†å’Œæ¯”èµ›æ’åç›¸å…³ï¼Œå’Œè£èª‰è¡«ä¹Ÿæ˜¯æ¯æ¯ç›¸å…³çš„ã€‚1. æœ€åæ€»æˆç»©çš„å‰ä¸‰åè‚¯å®šæ˜¯æœ‰å¥–é‡‘çš„ï¼ˆç¬¬ä¸€åå¯ä»¥è·å¾—50ä¸‡æ¬§å…ƒçš„å¥–é‡‘ï¼‰ï¼Œå…¶å®æ¯ä¸ªå®Œèµ›çš„é€‰æ‰‹éƒ½æœ‰å¥–é‡‘ã€‚2. æ¯ä¸ªèµ›æ®µä¹Ÿä¼šæ ¹æ®æ’åå‘æ”¾å¥–é‡‘ï¼Œä½†æ˜¯é€šå¸¸å°±åªæœ‰å‰20åä¼šæœ‰å¥–é‡‘ã€‚3. æ¯ä¸ªè£èª‰è¡«æ¯ç©¿ä¸€å¤©éƒ½ä¼šè·å¾—ä¸€æ¬¡å¥–é‡‘ï¼Œæ¯”å¦‚çˆ¬å¡ç‹åœ†ç‚¹è¡«ï¼Œæ¯ç©¿ä¸€å¤©å°±èƒ½è·å¾—300æ¬§å…ƒã€‚4. èµ›æ®µä¸­å¦‚æœæœ‰æ ‡æ³¨ç­‰çº§çš„çˆ¬å¡ï¼Œé‚£ä¹ˆç‡å…ˆé€šè¿‡è¿™ä¸ªçˆ¬å¡çš„è½¦æ‰‹ä¹Ÿä¼šè·å¾—å¥–é‡‘ã€‚5. ç»„å§”ä¼šä¼šä¸ºæ¯ä¸ªèµ›æ®µä¸­çªå›´ï¼Œè¿›æ”»æœ€ç§¯æçš„é€‰æ‰‹é¢å‘æ•¢æ–—å¥–ï¼Œå¹¶åœ¨ä¸‹ä¸ªèµ›æ®µç”¨çº¢è‰²å·ç ç‰Œæ ‡è®°ã€‚æ‹¿æ•¢æ–—å¥–ä¹Ÿä¼šè·å¾—2000æ¬§å…ƒçš„å¥–é‡‘ã€‚6. é™¤äº†ä¸ªäººå¥–é‡‘ï¼Œè¿˜æœ‰æœ€ä½³è½¦é˜Ÿå¥–ï¼Œæ¯ä¸€èµ›æ®µç»“æŸåï¼Œæ ¹æ®æ¯ä¸ªè½¦é˜Ÿçš„å‰ä¸‰åæœ€å¥½æˆç»©ï¼Œè®¡ç®—è½¦é˜Ÿçš„æ€»æˆç»©ã€‚æ—¶é—´æœ€å°‘çš„è½¦é˜Ÿè·å¾—æœ€ä½³è½¦é˜Ÿå¥–ï¼ˆ2800æ¬§å…ƒï¼‰ã€‚7. æ­¤å¤–éœ€è¦æé†’çš„æ˜¯ï¼Œå¥–é‡‘åªä¼šå‘ç»™çœŸæ­£è·å¾—è£èª‰è¡«çš„äººï¼Œå¦‚æœæ˜¯é¡ºå»¶ä»£ç©¿è£èª‰è¡«ï¼Œæ˜¯ä¸ä¼šè·å¾—å¥–é‡‘çš„ã€‚\nå†è¯´è¯´å¥–é‡‘çš„åˆ†é…ï¼Œå¥–é‡‘ä»é¢å­ä¸Šè®²ï¼Œä»–æ˜¯å½’å±è·å¾—è€…ä¸ªäººçš„ï¼ˆæœ€ä½³å›¢é˜Ÿå¥–é™¤å¤–ï¼‰ï¼Œä½†æ˜¯é‡Œå­ä¸Šé€šå¸¸ä¼šæ ¹æ®å†…éƒ¨è§„å®šè¿›è¡Œåˆ†é…ã€‚å…·ä½“å¦‚ä½•åˆ†é…æˆ‘ä¹Ÿä¸å¤Ÿä¸“ä¸šï¼Œå°±ä¸è¯¯å¯¼ä½ äº†ã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹ä½ è¯´çš„è‚¯å®šæ²¡é”™ï¼Œè·å¥–ä¸€èˆ¬ç¦»ä¸å¼€å…¶ä»–é˜Ÿå‹çš„å¸®åŠ©ï¼Œè‚¯å®šä¼šæŒ‰å‡ºåŠ›ç¨‹åº¦æ¥åˆ†é…ã€‚è‡³äºç¯æ³•ç»„å§”ä¼šå¦‚ä½•å‘æ”¾å¥–é‡‘ï¼Œå‘æ”¾åˆ°å“ªé‡Œï¼Œæˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œå¦‚æœä½ æœ‰æ‰¾åˆ°ç›¸å…³èµ„æ–™ï¼Œæ¬¢è¿åˆ†äº«ç»™æˆ‘ã€‚\nè§‚èµ›å·¥å…· ç¯æ³•å®˜ç½‘ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image Tour Tracker ç½‘é¡µç‰ˆï¼šhttps://live.thetourtracker.com/\nAPPç‰ˆæœ¬ï¼šGoogle Play Store å’Œ Apple App Store æœç´¢ Tour Trackerã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¥¥è¿ä¼šå…¬è·¯è½¦æ¦‚å†µ ç”·å­ä¸ªäººè®¡æ—¶èµ›æ²¡æœ‰ä¸­å›½é€‰æ‰‹å‚åŠ ï¼Œä½†æ˜¯ç”·å­å…¬è·¯èµ›æœ‰å•å…ˆæ™¯ä¸€ä½ä¸­å›½é€‰æ‰‹å‚åŠ ã€‚å•å…ˆæ™¯ç›®å‰æ•ˆåŠ›äºä¸­å›½åå…´-é“­æ™®æ´²é™…è½¦é˜Ÿã€‚2018å¹´é›…åŠ è¾¾äºšè¿ä¼šä¸Šï¼Œä»–è·å¾—ç”·å­å±±åœ°è‡ªè¡Œè½¦é“¶ç‰Œï¼Œ2019å¹´ç¯ä¸­å›½è‡ªè¡Œè½¦èµ›ï¼Œè·å¾—ç¬¬äºŒèµ›æ®µå† å†›ã€‚æœŸå¾…å•å…ˆæ™¯åœ¨å¥¥è¿ä¼šä¸Šå–å¾—å¥½æˆç»©ã€‚ï¼ˆPSï¼šä¸ç”¨æƒŠè®¶å“¦ï¼Œæ˜¯æœ‰ç¯ä¸­å›½æ¯”èµ›çš„ï¼Œåªæ˜¯2019å¹´ä¹‹åå› ä¸ºç–«æƒ…å°±åœåŠäº†ï¼Œå¹¶ä¸”ä¹Ÿæ²¡æœ‰å¤åŠçš„æ¶ˆæ¯ï¼‰ å¥³å­ä¸ªäººè®¡æ—¶èµ›æœ‰ä¸­å›½é€‰æ‰‹å”æ¬£å‚åŠ ï¼ŒåŒæ—¶å¥¹è¿˜ä¼šå‚åŠ å¥³å­å…¬è·¯èµ›ã€‚å¥¹æ˜¯ä¸­å›½ç¬¬ä¸€ä½å‚åŠ å·´é»é²è´å¥³å­è‡ªè¡Œè½¦ä¸Šå¹¶å®Œèµ›çš„è½¦æ‰‹ï¼Œä¹Ÿæ˜¯ä¸­å›½ç¬¬ä¸€ä½å‚åŠ ç¯è¥¿ç­ç‰™å¥³å­è‡ªè¡Œè½¦èµ›å¹¶å®Œèµ›çš„è½¦æ‰‹ï¼ŒæœŸå¾…å¥¹åœ¨å¥¥è¿ä¼šä¸Šå–å¾—å¥½æˆç»©ã€‚ æ¯”èµ›è§„åˆ™ç®€è¿° ç”·å¥³ä¸ªäººè®¡æ—¶èµ›\nä¸€åœºå®šèƒœè´Ÿçš„æ¯”èµ›ï¼Œè¿åŠ¨å‘˜åœ¨è§„å®šçš„æ—¶é—´å†…å®Œæˆæ¯”èµ›ï¼Œæˆç»©æœ€å¥½çš„è¿åŠ¨å‘˜è·å¾—é‡‘ç‰Œï¼› è¿åŠ¨å‘˜æŒ‰ç…§è§„å®šçš„é—´éš”æ—¶é—´å•ç‹¬å‡ºå‘ï¼Œä»¥è¿åŠ¨å‘˜åˆ°è¾¾ç»ˆç‚¹çš„æˆç»©ä¼˜åŠ£æ’åï¼› å‘è½¦æ—¶ç”±åŒä¸€åè£åˆ¤å‘˜æ‰¶è½¦ï¼› é—´éš”1-2åˆ†é’Ÿå‘è½¦ï¼Œå…·ä½“å‘è½¦æ—¶é—´å¯åœ¨Tour Trackerï¼Œå¥¥æ—åŒ¹å…‹å®˜ç½‘ï¼ŒProCyclingStatsç­‰ç½‘ç«™æŸ¥çœ‹ï¼› å³ä½¿è¿½ä¸Šäº†å‰é¢å‘è½¦çš„è½¦æ‰‹ï¼Œä¹Ÿä¸èƒ½ç›¸äº’é¢†éª‘ï¼› åœ¨è¶…è½¦ä»¥åŠè¢«è¶…è¶Šè¿‡ç¨‹ä¸­ï¼Œè¿åŠ¨å‘˜ä¸å¾—è¿›å…¥å¯¹æ‰‹å·¦å³2ç±³ï¼Œå‰å25ç±³çš„ç©ºé—´ï¼› é˜Ÿè½¦ä¸å¾—åœ¨è¿åŠ¨å‘˜å‰æ–¹è¡Œé©¶ï¼Œåªèƒ½åœ¨è¿åŠ¨å‘˜åæ–¹25ç±³å¤–è¡Œé©¶ï¼› ç”·å¥³å…¬è·¯èµ›\nä¸€åœºå®šèƒœè´Ÿçš„æ¯”èµ›ï¼Œè¿åŠ¨å‘˜åœ¨è§„å®šçš„æ—¶é—´å†…å®Œæˆæ¯”èµ›ï¼Œæˆç»©æœ€å¥½çš„è¿åŠ¨å‘˜è·å¾—é‡‘ç‰Œï¼› å‘è½¦ä½ç½®æŒ‰ç…§ç­¾åˆ°é¡ºåºç¡®å®šï¼› æ¯”èµ›ä¸­å¯ä»¥è·Ÿé£ï¼Œå¯ä»¥äº’ç›¸å¸®åŠ©ï¼Œäº¤æ¢é£Ÿç‰©å’Œæ°´ä»¥åŠå·¥å…·ç­‰ï¼Œä½†æ˜¯ä¸èƒ½ç›¸äº’æ¨è¡Œï¼› åœ¨èµ›ç¨‹çš„å‰50å…¬é‡Œå’Œè¿›å…¥æœ€å20å…¬é‡Œåï¼Œä¸å¾—è¿›è¡Œè¡¥ç»™ï¼Œèµ›é“ä¸Šä¼šæœ‰æ ‡è¯†è¡¥ç»™å¼€å§‹åŒºåŸŸå’Œè¡¥ç»™ç»“æŸåŒºåŸŸï¼› é˜Ÿè½¦ä¸å¾—è¶…è¶Šè¿åŠ¨å‘˜ï¼Œåªæœ‰è£åˆ¤åŒæ„æ‰å¯ä»¥ï¼› ","permalink":"https://lifeislife.cn/posts/%E5%B0%8F%E7%99%BD%E7%8E%AF%E6%B3%95%E8%A7%82%E8%B5%9B%E6%8C%87%E5%8D%97/","summary":"\u003ch2 id=\"å¸¸è§æœ¯è¯­\"\u003eå¸¸è§æœ¯è¯­\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eé»„è¡«ï¼ˆYellow jersey/Maillot Jauneï¼‰\né»„è¡«æ˜¯æ€»æˆç»©é¢†å…ˆè€…çš„è±¡å¾ï¼Œç©¿ä¸Šé»„è¡«çš„è½¦æ‰‹å°±æ˜¯æ¯”èµ›çš„é¢†å¤´ç¾Šã€‚\u003c/li\u003e\n\u003cli\u003eç»¿è¡«ï¼ˆGreen jersey/Maillot Vertï¼‰\nç»¿è¡«ä»£è¡¨å†²åˆºç§¯åˆ†çš„é¢†å…ˆè€…ï¼Œé€šå¸¸ç”±æ“…é•¿å¹³åœ°å†²åˆºçš„è½¦æ‰‹ç©¿ç€ã€‚\u003c/li\u003e\n\u003cli\u003eåœ†ç‚¹è¡«ï¼ˆPolka dot jersey/Maillot Ã  Pois Rougesï¼‰\nåœ†ç‚¹è¡«æˆäºˆçˆ¬å¡ç§¯åˆ†æœ€é«˜çš„è½¦æ‰‹ï¼Œçˆ¬å¡èƒ½åŠ›å¼ºçš„è½¦æ‰‹æ›´æœ‰æœºä¼šè·å¾—ã€‚\u003c/li\u003e\n\u003cli\u003eç™½è¡«ï¼ˆWhite jersey/Maillot Blancï¼‰\nç™½è¡«æ˜¯æœ€ä½³å¹´è½»è½¦æ‰‹ï¼ˆ25å²ä»¥ä¸‹ï¼‰çš„è±¡å¾ï¼Œè¡¨ç°ä¼˜å¼‚çš„å¹´è½»è½¦æ‰‹ä¼šç©¿ä¸Šç™½è¡«ã€‚\u003c/li\u003e\n\u003cli\u003eçªå›´/å…”å­ï¼ˆBreakawayï¼‰\næŒ‡æ¯”èµ›ä¸­ä¸€å°éƒ¨åˆ†è½¦æ‰‹ä»ä¸»é›†å›¢ï¼ˆPelotonï¼‰ä¸­çªå›´å‡ºæ¥ï¼Œå°è¯•æŠ¢å é¢†å…ˆä½ç½®ã€‚\u003c/li\u003e\n\u003cli\u003eä¸»é›†å›¢ï¼ˆPelotonï¼‰\nä¸»é›†å›¢æ˜¯æ¯”èµ›ä¸­æœ€å¤§çš„è½¦æ‰‹é˜Ÿä¼ï¼Œå¤§éƒ¨åˆ†è½¦æ‰‹éƒ½ä¼šå¾…åœ¨ä¸»é›†å›¢é‡Œï¼ŒèŠ‚çœä½“åŠ›ã€‚\u003c/li\u003e\n\u003cli\u003eå†²åˆºï¼ˆSprintï¼‰\nå†²åˆºæ˜¯æ¯”èµ›æœ€åå‡ ç™¾ç±³çš„æ¿€çƒˆç«äº‰ï¼Œå†²åˆºæ‰‹ï¼ˆSprinterï¼‰ä»¬ä¼šåœ¨è¿™æ—¶å…¨åŠ›ä»¥èµ´ï¼Œäº‰å¤ºèµ›æ®µå† å†›ã€‚\u003c/li\u003e\n\u003cli\u003eæ‰é˜Ÿï¼ˆDroppedï¼‰\nè¢«å…¶ä»–é€‰æ‰‹ç”©åœ¨åé¢ï¼Œä¹Ÿè¢«ç§°ä¸ºoff the backæˆ–è€…out the backã€‚\u003c/li\u003e\n\u003cli\u003eè®¡æ—¶èµ›ï¼ˆTime Trialï¼‰\nè®¡æ—¶èµ›æ˜¯è½¦æ‰‹å•ç‹¬å‡ºå‘ï¼ŒæŒ‰æ—¶é—´è®¡æˆç»©çš„æ¯”èµ›å½¢å¼ï¼ŒåŒ…æ‹¬ä¸ªäººè®¡æ—¶èµ›ï¼ˆITTï¼‰å’Œå›¢é˜Ÿè®¡æ—¶èµ›ï¼ˆTTTï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eæ€»æˆç»©ï¼ˆGeneral Classification, GCï¼‰\næ€»æˆç»©æ˜¯æ ¹æ®è½¦æ‰‹æ¯ä¸ªèµ›æ®µçš„æ—¶é—´ç´¯åŠ è®¡ç®—çš„ï¼Œæœ€ç»ˆæ€»æ—¶é—´æœ€å°‘çš„è½¦æ‰‹å°†è·å¾—é»„è¡«ã€‚\u003c/li\u003e\n\u003cli\u003eçš‡åèµ›æ®µï¼ˆQueen Stageï¼‰\næŒ‡çš„æ˜¯èƒ½å¤Ÿå†³å®šå¤šæ—¥èµ›æœ€ç»ˆæ’åçš„å…³é”®æ€§å±±åœ°èµ›æ®µï¼Œé€šå¸¸æœ‰æ•°åº§éš¾åº¦å¾ˆå¤§çš„å±±å³°ã€‚\u003c/li\u003e\n\u003cli\u003eç«è½¦ï¼ˆPacelineï¼‰\næŒ‡çš„æ˜¯é˜Ÿå‹åœ¨å‰é¢åšè‹¦åŠ›ï¼Œä¿æŠ¤ä¸»å°†ï¼Œä¸ºä¸»å°†èŠ‚çœä½“åŠ›çš„æˆ˜æœ¯ã€‚ï¼ˆå¯¹åº”çš„æœ‰å†²åˆºç«è½¦æˆ–æ˜¯å±±åœ°ç«è½¦ï¼‰\u003c/li\u003e\n\u003cli\u003eè·Ÿé£/è¹­é£/å¸å°¾æµï¼ˆDraftï¼‰\nåœ¨é«˜é€Ÿéª‘è¡Œè¿‡ç¨‹ä¸­ï¼Œè½¦æ‰‹çš„å¤§éƒ¨åˆ†ä½“åŠ›æ˜¯æ¶ˆè€—åœ¨å¯¹æŠ—ç©ºæ°”é˜»åŠ›ï¼ˆé£é˜»ï¼‰ä¸Šã€‚å› æ­¤ä¼šæœ‰è½¦æ‰‹éª‘åœ¨å…¶ä»–äººæˆ–è½¦å­åæ–¹ï¼Œæ¥é™ä½é£é˜»ï¼ŒèŠ‚çœä½“åŠ›ã€‚\u003c/li\u003e\n\u003cli\u003eç²˜ç“¶ï¼ˆSticky Bpttleï¼‰\né€‰æ‰‹åœ¨æ‹¿è¡¥ç»™è½¦çš„æ°´å£¶æ—¶ï¼Œä¼šçŸ­æš‚è·å¾—è¡¥ç»™è½¦æ‰€å¸¦æ¥çš„åŠ©åŠ›ï¼Œä»¥èŠ‚çœä½“åŠ›ï¼Œé€šå¸¸ä¸‰äº”ç§’ä¹‹å†…éƒ½æ˜¯è¢«å…è®¸çš„ï¼Œå¦‚æœæ—¶é—´å¤ªé•¿è¢«è£åˆ¤å‘ç°å°†ä¼šè¢«ç½šæ¬¾ç”šè‡³å–æ¶ˆæˆç»©ã€‚\u003c/li\u003e\n\u003cli\u003eå…³é—¨æ—¶é—´ï¼ˆTime limitï¼‰\nåœ¨æ¯å¤©çš„æ¯”èµ›ä¸­ï¼Œè½¦æ‰‹ä»¬å¿…é¡»åœ¨ä¸è¶…è¿‡å½“æ—¥èµ›æ®µå† å†›ç”¨æ—¶çš„ä¸€å®šæ¯”ä¾‹æ—¶é—´å†…å®Œèµ›ï¼Œå¦åˆ™å°†è¢«å–æ¶ˆæ¯”èµ›èµ„æ ¼ï¼Œä¸è¢«è·å‡†åœ¨ç¬¬äºŒå¤©çš„æ¯”èµ›æ—¶å‘è½¦ï¼›ç¡®åˆ‡çš„æ¯”ä¾‹å–å†³äºèµ›æ®µçš„ç±»å‹ã€åœ°å½¢å’Œé€Ÿåº¦ï¼›é€Ÿåº¦å¿«æ—¶ï¼Œåœ¨å¹³åœ°èµ›æ®µä¸­ï¼Œæ¯”ä¾‹ä¼šä½è‡³5%ï¼Œè€Œé€Ÿåº¦æ…¢æ—¶ï¼Œåœ¨å±±åœ°èµ›æ®µä¸­ï¼Œæ¯”ä¾‹ä¼šè¾¾åˆ°16ã€17%ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œèµ›äº‹ç»„ç»‡è€…æœ‰æƒé…Œæƒ…èµ¦å…ä¸€äº›è½¦æ‰‹ï¼Œæ¯”å¦‚å½“æœ‰è¿‡å¤§ä¸€éƒ¨åˆ†è½¦æ‰‹æ— æ³•åœ¨å…³é—¨æ—¶é—´å†…å®Œèµ›æ—¶ã€‚å†å²ä¸Šä¹Ÿæœ‰è¿‡ç‰¹ä¾‹ï¼Œä¸€äº›å¤§ç‰Œå†²åˆºæ‰‹è¢«å…³é—¨ï¼Œç„¶åç»„å§”ä¼šä»¥æ‰£å†²åˆºç§¯åˆ†çš„å½¢å¼æ¥æ”¾ä»–ä»¬ä¸€é©¬ã€‚\u003c/li\u003e\n\u003cli\u003eçˆ¬å¡ç‚¹ç­‰çº§ï¼ˆMountain Climb Classificationï¼‰\næ¯”èµ›ä¸­è®¾ç½®çš„çˆ¬å¡æŠ¢åˆ†ç‚¹ï¼Œéš¾åº¦ä¸çº§æ•°ç”±ä½è‡³é«˜ä¸º4ã€3ã€2ã€1ã€HCï¼ˆé¡¶çº§ï¼‰ï¼›è¶Šé«˜çš„çº§æ•°ä»£è¡¨çˆ¬å¡é•¿åº¦è¶Šé•¿ã€å¡åº¦è¶Šé™¡ã€‚\u003c/li\u003e\n\u003cli\u003eè¡¥ç»™åŒº Feed Zone\næ¯”èµ›ä¸­è®¾ç½®ä¸€ä¸ªåŒºåŸŸï¼Œè®©è½¦é˜Ÿæä¾›è½¦æ‰‹é¥®é£Ÿè¡¥ç»™è¢‹çš„åœ°æ–¹ã€‚é€šå¸¸ï¼Œè½¦æ‰‹ä¸ä¼šåœ¨è¿™ä¸ªåŒºåŸŸå‘åŠ¨æ”»å‡»ã€‚\u003c/li\u003e\n\u003cli\u003eåƒåœ¾ä¸¢å¼ƒåŒºï¼ˆCollection Zoneï¼‰\nUCIè§„å®šåªèƒ½åœ¨å›ºå®šçš„åƒåœ¾ä¸¢å¼ƒåŒºæ‰”åƒåœ¾ï¼Œå¦åˆ™ä¼šè¢«ç½šæ¬¾ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"è‡ªè¡Œè½¦æˆ˜æœ¯\"\u003eè‡ªè¡Œè½¦æˆ˜æœ¯\u003c/h2\u003e\n\u003cp\u003eæ²¹ç®¡ä¸Šæœ‰ä¸ªå°æ¹¾åšä¸»å«åš\u003ca href=\"https://www.youtube.com/watch?v=f1ncgvjB_z4\u0026amp;list=PLa5LB6K0vQT3CzQNp7traSqvvp4Sn_uaQ\"\u003eã€Šå–‚æˆ‘é˜¿ç»´ã€‹åšäº†ä¸€ä¸ªè‡ªè¡Œè½¦æˆ˜æœ¯çš„ç³»åˆ—è§†é¢‘\u003c/a\u003eï¼Œè¿™ä¸ªç³»åˆ—çš„è§†é¢‘é€‰æ‹©äº†ä¸€äº›å®æˆ˜çš„æˆ˜å†µå¹¶ç»“åˆäº†ä¸‰ç»´åŠ¨ç”»æ¥è§£é‡Šå„ç§æˆ˜æœ¯ï¼Œéå¸¸ç›´è§‚æ˜“æ‡‚ï¼Œæ¨èå¤§å®¶è§‚çœ‹ã€‚\u003c/p\u003e","title":"å°ç™½ç¯æ³•è§‚èµ›æŒ‡å—"},{"content":"å‡†å¤‡å·¥ä½œ ä¸€ç›´åœ¨QEMUä¸ŠåšRISC-Vå¼€å‘ï¼Œæœ€è¿‘å…¥æ‰‹äº†Milk-V Duo Så¼€å‘æ¿ï¼Œå‡†å¤‡å°è¯•åœ¨ç¡¬ä»¶ä¸Šç©ç©RISC-Vã€‚99å—é’±çš„å¼€å‘æ¿ï¼Œæ€§ä»·æ¯”è¿˜æ˜¯å¾ˆé«˜çš„ã€‚ä»¥ä¸‹å†…å®¹å°±æ˜¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ä» microSD å¡å¯åŠ¨ Duo | Milk-Vï¼Œå¤ç°ä¸€éã€‚å…ˆç†Ÿæ‚‰ä¸€ä¸‹ç¡¬ä»¶ã€‚\nMilk-V Duo Så¼€å‘æ¿ä¸€å— å¤§äº 1GB çš„ microSD å¡ï¼Œæˆ‘ä¹°çš„æ˜¯ SD å¡ç‰ˆæœ¬ï¼Œå¦‚æœä¹°çš„è‡ªå¸¦eMMCçš„å°±ä¸éœ€è¦äº†ã€‚ Type-C æ•°æ®çº¿ å‡†å¤‡é•œåƒå¹¶çƒ§å½• ä¸‹è½½å®˜æ–¹é•œåƒï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯milkv-duos-sd-v1.1.1-2024-0528.img.zipã€‚è§£å‹åå°±å¯ä»¥å¾—åˆ°é•œåƒæ–‡ä»¶ã€‚æˆ‘ä¹ æƒ¯ä½¿ç”¨Rufusçƒ§å½•é•œåƒã€‚\nMilk-V Duo S å¯åŠ¨ï¼ å°†SDå¡æ’å…¥å¼€å‘æ¿ï¼Œç„¶åä½¿ç”¨Type-Cçº¿è¿æ¥Duo Så¼€å‘æ¿å’Œç”µè„‘ã€‚ç¨ç­‰ç‰‡åˆ»å¼€å‘æ¿ä¸Šçš„è“è‰²LEDç¯å°†é—ªçƒï¼Œçº¢è‰²LEDä¿æŒå¸¸é‡äº®ã€‚è¯´æ˜å¼€å‘æ¿å·²ç»å¯åŠ¨æˆåŠŸã€‚æ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡SSHè¿æ¥å¼€å‘æ¿äº†ã€‚\nåœ¨ä½¿ç”¨SSHä¹‹å‰éœ€è¦å¼€å¯Windows RNDISã€‚å¼€å¯è¿‡ç¨‹å‚è€ƒå®˜æ–¹æ–‡æ¡£è®¾ç½®å·¥ä½œç¯å¢ƒ | Milk-Vï¼Œæˆ‘å°±ä¸å†é‡å¤äº†ï¼Œå›¾ç‰‡æœ‰ç‚¹å¤šï¼Œçœ‹å®˜æ–¹æ–‡æ¡£æ›´ç›´è§‚ã€‚\n","permalink":"https://lifeislife.cn/posts/milk-v-duo-s-%E5%90%AF%E5%8A%A8/","summary":"\u003ch2 id=\"å‡†å¤‡å·¥ä½œ\"\u003eå‡†å¤‡å·¥ä½œ\u003c/h2\u003e\n\u003cp\u003eä¸€ç›´åœ¨QEMUä¸ŠåšRISC-Vå¼€å‘ï¼Œæœ€è¿‘å…¥æ‰‹äº†Milk-V Duo Så¼€å‘æ¿ï¼Œå‡†å¤‡å°è¯•åœ¨ç¡¬ä»¶ä¸Šç©ç©RISC-Vã€‚99å—é’±çš„å¼€å‘æ¿ï¼Œæ€§ä»·æ¯”è¿˜æ˜¯å¾ˆé«˜çš„ã€‚ä»¥ä¸‹å†…å®¹å°±æ˜¯å‚è€ƒå®˜æ–¹æ–‡æ¡£\u003ca href=\"https://milkv.io/zh/docs/duo/getting-started/boot\"\u003eä» microSD å¡å¯åŠ¨ Duo | Milk-V\u003c/a\u003eï¼Œå¤ç°ä¸€éã€‚å…ˆç†Ÿæ‚‰ä¸€ä¸‹ç¡¬ä»¶ã€‚\u003c/p\u003e","title":"Milk-V Duo S å¯åŠ¨"},{"content":"æ ¹æ–‡ä»¶ç³»ç»Ÿ æ–‡ä»¶ç³»ç»Ÿä¸æ ¹æ–‡ä»¶ç³»ç»Ÿ æ–‡ä»¶ç³»ç»Ÿï¼ˆFile Systemï¼‰æ˜¯æ“ä½œç³»ç»Ÿç”¨äºç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„ä¸€ç§æ–¹å¼ã€‚å®ƒå®šä¹‰äº†å¦‚ä½•åœ¨å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ç¡¬ç›˜ã€SSDã€USB é©±åŠ¨å™¨ç­‰ï¼‰ä¸Šç»„ç»‡æ–‡ä»¶å’Œç›®å½•ï¼Œä»¥åŠå¦‚ä½•è¿›è¡Œæ•°æ®çš„è¯»å†™æ“ä½œã€‚\nå¸¸è§çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹æœ‰ï¼š\next4ï¼šLinux æœ€å¸¸ç”¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå¤§æ–‡ä»¶å’Œå¤§åˆ†åŒºã€‚ NTFSï¼šWindows æ“ä½œç³»ç»Ÿå¸¸ç”¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒæ–‡ä»¶åŠ å¯†å’Œæƒé™æ§åˆ¶ã€‚ FAT32ï¼šä¸€ç§å…¼å®¹æ€§å¹¿æ³›çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¸¸ç”¨äº USB é©±åŠ¨å™¨å’Œå†…å­˜å¡ã€‚ XFSï¼šé€‚ç”¨äºé«˜æ€§èƒ½å’Œé«˜å®¹é‡å­˜å‚¨éœ€æ±‚çš„æ–‡ä»¶ç³»ç»Ÿã€‚ btrfsï¼šä¸€ç§ç°ä»£ Linux æ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå¿«ç…§ã€å‹ç¼©å’Œå¤šè®¾å¤‡ç®¡ç†ã€‚ æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆRoot File Systemï¼Œé€šå¸¸ç®€ç§°ä¸º rootfsï¼‰æ˜¯æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„ä¸­çš„é¡¶çº§æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒåŒ…å«äº†æ“ä½œç³»ç»Ÿå¯åŠ¨å’Œè¿è¡Œæ‰€éœ€çš„æ‰€æœ‰åŸºæœ¬æ–‡ä»¶å’Œç›®å½•ã€‚æ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡çš„èµ·ç‚¹ï¼Œåœ¨ Linux ä¸­ç”±å•ä¸ªæ–œæ ï¼ˆ/ï¼‰è¡¨ç¤ºã€‚æ ¹æ–‡ä»¶ç³»ç»Ÿé¦–å…ˆæ˜¯å†…æ ¸å¯åŠ¨æ—¶æ‰€ mount çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå†…æ ¸ä»£ç æ˜ åƒæ–‡ä»¶ä¿å­˜åœ¨æ ¹æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè€Œç³»ç»Ÿå¼•å¯¼å¯åŠ¨ç¨‹åºä¼šåœ¨æ ¹æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¹‹åä»ä¸­æŠŠä¸€äº›åŸºæœ¬çš„åˆå§‹åŒ–è„šæœ¬å’ŒæœåŠ¡ç­‰åŠ è½½åˆ°å†…å­˜ä¸­å»è¿è¡Œã€‚\næ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯å»ºç«‹åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šçš„ã€‚æ ¹æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨æŸç§å…·ä½“çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆå¦‚ ext4ï¼‰æ¥ç®¡ç†å’Œå­˜å‚¨å…¶å†…å®¹ã€‚\nåŸºäºå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿ ramdisk æ˜¯ä¸€ç§åŸºäºå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå°†å†…å­˜çš„ä¸€éƒ¨åˆ†ç”¨ä½œç¡¬ç›˜é©±åŠ¨å™¨ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚ramdisk æ˜¯ä¸€ä¸ªè™šæ‹Ÿç£ç›˜ï¼Œå®ƒçš„å¤§å°å’Œç¡¬ç›˜é©±åŠ¨å™¨çš„å¤§å°ä¸€æ ·ã€‚ramdisk çš„ä¼˜ç‚¹æ˜¯é€Ÿåº¦å¿«ï¼Œç¼ºç‚¹æ˜¯æ–­ç”µåæ•°æ®ä¸¢å¤±ã€‚\næ ¹æ–‡ä»¶ç³»ç»Ÿä¸­å„ç§é…ç½®æ–‡ä»¶çš„ä½œç”¨ä»¥åŠé…ç½®æ–‡ä»¶çš„æ ¼å¼ä»‹ç» /etc/inittab /etc/inittab æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå®ƒæ˜¯ init ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®ç³»ç»Ÿçš„è¿è¡Œçº§åˆ«å’Œ init ç¨‹åºçš„è¡Œä¸ºã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œinit ç¨‹åºæ˜¯ç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œå®ƒè´Ÿè´£å¯åŠ¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰å…¶ä»–è¿›ç¨‹ã€‚/etc/inittab æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªé…ç½®é¡¹ï¼Œæ¯ä¸ªé…ç½®é¡¹ç”±å››ä¸ªå­—æ®µç»„æˆï¼Œå­—æ®µä¹‹é—´ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦åˆ†éš”ã€‚/etc/inittab æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š\nid:runlevels:action:process æ¯ä¸ªå­—æ®µç”¨å†’å·åˆ†éš”ï¼Œå¯ä»¥ç¼ºçœã€‚å„å­—æ®µçš„å«ä¹‰å¦‚ä¸‹ï¼š\nidï¼šé…ç½®é¡¹çš„æ ‡è¯†ç¬¦ï¼Œç”¨äºæ ‡è¯†é…ç½®é¡¹ã€‚ runlevelsï¼šé…ç½®é¡¹æ‰€å¯¹åº”çš„è¿è¡Œçº§åˆ«ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡Œçº§åˆ«çš„ç»„åˆã€‚ actionï¼šé…ç½®é¡¹çš„åŠ¨ä½œï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§åŠ¨ä½œä¹‹ä¸€ï¼š sysinitï¼šç³»ç»Ÿåˆå§‹åŒ–æ—¶è¿è¡Œã€‚ respawnï¼šå¦‚æœè¿›ç¨‹ç»ˆæ­¢ï¼Œç«‹å³é‡æ–°å¯åŠ¨ã€‚ askfirstï¼šåœ¨è¿è¡Œ process ä¹‹å‰è¯¢é—®ç”¨æˆ·ã€‚å¹¶åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤º Please press Enter to active this consoleã€‚ waitï¼šç­‰å¾…è¿›ç¨‹ç»ˆæ­¢ï¼Œç„¶åç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªé…ç½®é¡¹ã€‚ onceï¼šåªè¿è¡Œä¸€æ¬¡ï¼Œè¿›ç¨‹ç»ˆæ­¢åä¸ä¼šé‡æ–°å¯åŠ¨ã€‚ bootï¼šåœ¨ç³»ç»Ÿå¼•å¯¼æ—¶è¿è¡Œã€‚ bootwaitï¼šåœ¨ç³»ç»Ÿå¼•å¯¼æ—¶è¿è¡Œï¼Œç­‰å¾…è¿›ç¨‹ç»ˆæ­¢åç»§ç»­å¼•å¯¼ã€‚ initdefaultï¼šè®¾ç½®é»˜è®¤è¿è¡Œçº§åˆ«ã€‚ shutdownï¼šåœ¨ç³»ç»Ÿå…³æœºæ—¶è¿è¡Œã€‚ processï¼šè¦æ‰§è¡Œçš„è¿›ç¨‹æˆ–è„šæœ¬çš„è·¯å¾„ã€‚ ç¤ºä¾‹ï¼š\n# /etc/inittab #ç³»ç»Ÿå¼€æœºæˆ–é‡æ–°å¯åŠ¨ï¼Œæ‰§è¡ŒrcSæ–‡ä»¶ ::sysinit:/etc/init.d/rcS #ç³»ç»Ÿå¯åŠ¨åï¼Œè¿è¡Œç™»å½•ç¨‹åº ::askfirst:-/bin/login #æŒ‰ä¸‹ç»„åˆé”®â€œctrl+alt+delâ€ï¼Œé‡å¯Linuxç³»ç»Ÿ ::ctrlaltdel:-/sbin/reboot #ç³»ç»Ÿå…³æœºæ—¶ï¼Œå¸è½½æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿ ::shutdown:/bin/umount -a -r #é‡å¯initè¿›ç¨‹ ::restart:/sbin/init /etc/fstab /etc/fstab æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ä¿¡æ¯ã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯é€šè¿‡æŒ‚è½½çš„æ–¹å¼æ¥è®¿é—®çš„ï¼Œ/etc/fstab æ–‡ä»¶ä¸­è®°å½•äº†ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ä¿¡æ¯ã€‚/etc/fstab æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š\ndevice mount_point fs_type options dump pass å„å­—æ®µçš„å«ä¹‰å¦‚ä¸‹ï¼š\ndeviceï¼šè®¾å¤‡æ–‡ä»¶æˆ– UUIDã€‚ mount_pointï¼šæŒ‚è½½ç‚¹ã€‚ fs_typeï¼šæ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚ optionsï¼šæŒ‚è½½é€‰é¡¹ã€‚ dumpï¼šå¤‡ä»½æ ‡å¿—ï¼Œç”¨äºå¤‡ä»½å·¥å…·ã€‚ passï¼šæ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥é¡ºåºã€‚ ç¤ºä¾‹ï¼š\n# /etc/fstab # \u0026lt;æ–‡ä»¶ç³»ç»Ÿ\u0026gt; \u0026lt;æŒ‚è½½ç‚¹\u0026gt; \u0026lt;ç±»å‹\u0026gt; \u0026lt;é€‰é¡¹\u0026gt; \u0026lt;dump\u0026gt; \u0026lt;fsck\u0026gt; # æ ¹æ–‡ä»¶ç³»ç»Ÿ /dev/sda1 / ext4 defaults 1 1 # æ ¹åˆ†åŒºï¼Œä½¿ç”¨ ext4 æ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # /boot åˆ†åŒºï¼Œç”¨äºå­˜æ”¾å¼•å¯¼åŠ è½½ç¨‹åºå’Œå†…æ ¸é•œåƒ /dev/sda2 /boot ext4 defaults 1 2 # /boot åˆ†åŒºï¼Œä½¿ç”¨ ext4 æ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # äº¤æ¢åˆ†åŒºï¼Œç”¨ä½œè™šæ‹Ÿå†…å­˜ /dev/sda3 none swap sw 0 0 # äº¤æ¢åˆ†åŒºï¼Œä¸éœ€è¦æŒ‚è½½ç‚¹ï¼Œä½¿ç”¨ swap ç±»å‹ # /home åˆ†åŒºï¼Œç”¨äºå­˜æ”¾ç”¨æˆ·çš„ä¸ªäººæ•°æ® /dev/sda4 /home ext4 defaults 1 2 # /home åˆ†åŒºï¼Œä½¿ç”¨ ext4 æ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # /tmp åˆ†åŒºï¼Œç”¨äºå­˜æ”¾ä¸´æ—¶æ–‡ä»¶ /dev/sda5 /tmp ext4 defaults 1 2 # /tmp åˆ†åŒºï¼Œä½¿ç”¨ ext4 æ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # /var åˆ†åŒºï¼Œç”¨äºå­˜æ”¾å¯å˜æ•°æ®æ–‡ä»¶ï¼Œå¦‚æ—¥å¿—ã€é‚®ä»¶ã€ç¼“å­˜ç­‰ /dev/sda6 /var ext4 defaults 1 2 # /var åˆ†åŒºï¼Œä½¿ç”¨ ext4 æ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # /mnt/data åˆ†åŒºï¼Œç”¨äºå­˜æ”¾é¢å¤–çš„æ•°æ®æ–‡ä»¶ /dev/sda7 /mnt/data ext4 defaults 1 2 # /mnt/data åˆ†åŒºï¼Œä½¿ç”¨ ext4 æ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # æŒ‚è½½ proc æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºè®¿é—®è¿›ç¨‹å’Œç³»ç»Ÿä¿¡æ¯ proc /proc proc defaults 0 0 # proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # æŒ‚è½½ sysfs æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºè®¿é—®è®¾å¤‡å’Œå†…æ ¸ä¿¡æ¯ sysfs /sys sysfs defaults 0 0 # sysfs è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # æŒ‚è½½ tmpfs æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºä¸´æ—¶æ–‡ä»¶å­˜å‚¨ tmpfs /dev/shm tmpfs defaults 0 0 # tmpfs è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ # æŒ‚è½½ devpts æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºä¼ªç»ˆç«¯è®¾å¤‡ devpts /dev/pts devpts gid=5,mode=620 0 0 # devpts è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤æŒ‚è½½é€‰é¡¹ /etc/init.d/rcS /etc/init.d/rcS æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªåˆå§‹åŒ–è„šæœ¬ï¼Œç”¨äºç³»ç»Ÿåˆå§‹åŒ–æ—¶è¿è¡Œã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œ/etc/init.d/rcS è„šæœ¬æ˜¯ç³»ç»Ÿåˆå§‹åŒ–æ—¶è¿è¡Œçš„ç¬¬ä¸€ä¸ªè„šæœ¬ï¼Œå®ƒè´Ÿè´£åˆå§‹åŒ–ç³»ç»Ÿä¸­çš„å„ç§æœåŠ¡å’Œé…ç½®ã€‚/etc/init.d/rcS è„šæœ¬é€šå¸¸åŒ…å«äº†ä¸€äº›åˆå§‹åŒ–å‘½ä»¤ï¼Œå¦‚åŠ è½½æ¨¡å—ã€æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€å¯åŠ¨æœåŠ¡ç­‰ã€‚/etc/init.d/rcS è„šæœ¬çš„æ ¼å¼å¦‚ä¸‹ï¼š\n#!/bin/sh # è¿™è¡Œæ˜¯ shebangï¼Œç”¨äºæŒ‡å®šè¿™ä¸ªè„šæœ¬å°†ç”± /bin/sh è§£é‡Šæ‰§è¡Œ # æŒ‚è½½ proc æ–‡ä»¶ç³»ç»Ÿåˆ° /proc ç›®å½• mount -t proc none /proc # proc æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºæä¾›å†…æ ¸å’Œè¿›ç¨‹çš„ä¿¡æ¯ # æŒ‚è½½ sysfs æ–‡ä»¶ç³»ç»Ÿåˆ° /sys ç›®å½• mount -t sysfs none /sys # sysfs æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºæä¾›è®¾å¤‡å’Œå†…æ ¸ä¿¡æ¯ # æŒ‚è½½ devtmpfs æ–‡ä»¶ç³»ç»Ÿåˆ° /dev ç›®å½• mount -t devtmpfs none /dev # devtmpfs æ˜¯ä¸€ä¸ªç”¨äºè®¾å¤‡èŠ‚ç‚¹çš„ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ # è¿è¡Œ mdev ä»¥åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ /sbin/mdev -s # mdev æ˜¯ä¸€ä¸ªè½»é‡çº§çš„è®¾å¤‡ç®¡ç†å·¥å…·ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç† /dev ç›®å½•ä¸­çš„è®¾å¤‡èŠ‚ç‚¹ # è®¾ç½®ä¸»æœºå echo \u0026#34;myhostname\u0026#34; \u0026gt; /proc/sys/kernel/hostname # å°†ä¸»æœºåè®¾ç½®ä¸º \u0026#34;myhostname\u0026#34;ï¼Œè¿™ä¸ªåå­—å¯ä»¥æ ¹æ®éœ€è¦æ›´æ”¹ # å¯åŠ¨ç½‘ç»œæ¥å£é…ç½®è„šæœ¬ ifconfig lo up # å¯åŠ¨å›ç¯æ¥å£ loï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç½‘ç»œæ¥å£ï¼Œç”¨äºç½‘ç»œè½¯ä»¶æœ¬åœ°é€šä¿¡ # è¿è¡Œæ‰€æœ‰ä½äº /etc/init.d/ ç›®å½•ä¸­çš„åˆå§‹åŒ–è„šæœ¬ for script in /etc/init.d/S*; do if [ -x \u0026#34;$script\u0026#34; ]; then \u0026#34;$script\u0026#34; start fi done # éå† /etc/init.d/ ç›®å½•ä¸­çš„æ‰€æœ‰ä»¥ S å¼€å¤´çš„è„šæœ¬ï¼Œå¹¶æ‰§è¡Œå®ƒä»¬ä»¥å¯åŠ¨ç›¸åº”çš„æœåŠ¡ # -x é€‰é¡¹ç”¨äºæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ # æŒ‚è½½ç”¨æˆ·æ–‡ä»¶ç³»ç»Ÿï¼ˆå¯é€‰ï¼Œæ ¹æ®å®é™…éœ€è¦ï¼‰ mount -a # æŒ‚è½½ /etc/fstab æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿ # æ‰“å°å¯åŠ¨å®Œæˆä¿¡æ¯ echo \u0026#34;System initialization complete.\u0026#34; # è¾“å‡ºç³»ç»Ÿåˆå§‹åŒ–å®Œæˆä¿¡æ¯ /etc/profile /etc/profile æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªå…¨å±€é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡å’Œç”¨æˆ·çš„ shell ç¯å¢ƒã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œ/etc/profile æ–‡ä»¶æ˜¯ç³»ç»Ÿå¯åŠ¨æ—¶åŠ è½½çš„ç¬¬ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†ç³»ç»Ÿçš„å…¨å±€ç¯å¢ƒå˜é‡å’Œç”¨æˆ·çš„ shell ç¯å¢ƒé…ç½®ã€‚/etc/profile æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š\n# /etc/profile #!/bin/sh # è¿™è¡Œæ˜¯ shebangï¼Œç”¨äºæŒ‡å®šè¿™ä¸ªè„šæœ¬å°†ç”± /bin/sh è§£é‡Šæ‰§è¡Œ # è®¾ç½® PATH ç¯å¢ƒå˜é‡ï¼Œå®šä¹‰ç³»ç»Ÿå‘½ä»¤çš„æœç´¢è·¯å¾„ PATH=\u0026#34;/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\u0026#34; export PATH # /usr/local/sbin:/usr/local/bin æ˜¯ç³»ç»Ÿç®¡ç†å‘˜å’Œç”¨æˆ·å®‰è£…çš„ç¨‹åºè·¯å¾„ # /sbin:/bin:/usr/sbin:/usr/bin æ˜¯ç³»ç»Ÿé»˜è®¤çš„å‘½ä»¤è·¯å¾„ # è®¾ç½®ç”¨æˆ· umaskï¼Œå®šä¹‰æ–°æ–‡ä»¶å’Œç›®å½•çš„é»˜è®¤æƒé™æ©ç  umask 022 # umask 022 è¡¨ç¤ºæ–°æ–‡ä»¶çš„é»˜è®¤æƒé™æ˜¯ 755ï¼Œæ–°ç›®å½•çš„é»˜è®¤æƒé™æ˜¯ 644 # è®¾ç½®ç³»ç»Ÿè¯­è¨€å’ŒåŒºåŸŸ LANG=\u0026#34;en_US.UTF-8\u0026#34; export LANG # LANG å˜é‡å®šä¹‰äº†ç³»ç»Ÿçš„è¯­è¨€ç¯å¢ƒï¼Œè¿™é‡Œè®¾ç½®ä¸ºç¾å›½è‹±è¯­ UTF-8 ç¼–ç  # è®¾ç½®å†å²è®°å½•æ–‡ä»¶å’Œå¤§å° HISTSIZE=1000 HISTFILESIZE=2000 export HISTSIZE HISTFILESIZE # HISTSIZE å®šä¹‰äº† shell ä¼šè¯å†å²è®°å½•çš„æ¡ç›®æ•°ï¼ŒHISTFILESIZE å®šä¹‰äº†å†å²è®°å½•æ–‡ä»¶çš„æœ€å¤§æ¡ç›®æ•° # ç³»ç»Ÿå¯åŠ¨ä¿¡æ¯ echo \u0026#34;Welcome to your Linux system!\u0026#34; # åœ¨ç”¨æˆ·ç™»å½•æ—¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯ # è¯»å–å¹¶æ‰§è¡Œ /etc/bashrcï¼ˆå¦‚æœå­˜åœ¨ï¼‰ if [ -f /etc/bashrc ]; then . /etc/bashrc fi # /etc/bashrc æ˜¯å¦ä¸€ä¸ªå…¨å±€é…ç½®æ–‡ä»¶ï¼Œé€šå¸¸åŒ…å« bash shell çš„é…ç½® # ä½¿ç”¨ . /etc/bashrc å‘½ä»¤å°†å…¶å†…å®¹å¯¼å…¥å½“å‰ shell ç¯å¢ƒ # é…ç½®åˆ«åï¼ˆç¤ºä¾‹ï¼‰ alias ll=\u0026#39;ls -l\u0026#39; alias la=\u0026#39;ls -A\u0026#39; alias l=\u0026#39;ls -CF\u0026#39; # å®šä¹‰ä¸€äº›å¸¸ç”¨å‘½ä»¤çš„åˆ«å # ll ä»£è¡¨ ls -lï¼Œæ˜¾ç¤ºè¯¦ç»†åˆ—è¡¨ # la ä»£è¡¨ ls -Aï¼Œæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬éšè—æ–‡ä»¶ï¼ˆä½†ä¸åŒ…æ‹¬ . å’Œ ..ï¼‰ # l ä»£è¡¨ ls -CFï¼Œä»¥åˆ†ç±»æ ¼å¼æ˜¾ç¤ºæ–‡ä»¶ # è¯»å–ç”¨æˆ·ç‰¹å®šçš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ if [ -f \u0026#34;$HOME/.profile\u0026#34; ]; then . \u0026#34;$HOME/.profile\u0026#34; fi # .profile æ˜¯ç”¨æˆ·çš„ä¸ªäººé…ç½®æ–‡ä»¶ # ä½¿ç”¨ . $HOME/.profile å‘½ä»¤å°†å…¶å†…å®¹å¯¼å…¥å½“å‰ shell ç¯å¢ƒ # è®¾ç½®ç¼–è¾‘å™¨ EDITOR=vim export EDITOR # å®šä¹‰é»˜è®¤çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸º vim # è®¾ç½®ä¸»æœºåæ˜¾ç¤ºï¼Œä¹Ÿå°±æ˜¯ç»ˆç«¯æœ€å‰é¢æç¤ºç¬¦çš„æ ·å¼ PS1=\u0026#39;\\u@\\h:\\w\\$ \u0026#39; export PS1 # PS1 å®šä¹‰äº† shell æç¤ºç¬¦çš„æ ·å¼ # \\u ä»£è¡¨ç”¨æˆ·å # \\h ä»£è¡¨ä¸»æœºå # \\w ä»£è¡¨å½“å‰å·¥ä½œç›®å½• Busybox ç®€ä»‹ä»¥åŠå¦‚ä½•åˆ¶ä½œ Busybox æ–‡ä»¶ç³»ç»Ÿ å‡†å¤‡ QEMU cd \u0026amp;\u0026amp; mkdir -p /home/user/program/riscv64-qemu cd workspace git clone https://github.com/qemu/qemu.git cd qemu cd qemu \u0026amp;\u0026amp; ./configure --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu \\ --enable-kvm --enable-sdl \\ --prefix=/home/user/program/riscv64-qemu make install -j $(nproc) å‡†å¤‡ OpenSBI cd workspace git clone https://github.com/riscv-software-src/opensbi.git cd opensbi make ARCH=riscv CROSS_COMPILE=riscv64-unknown-linux-gnu- PLATFORM=generic å‡†å¤‡ Linux å†…æ ¸ cd workspace git clone https://github.com/torvalds/linux.git make ARCH=riscv CROSS_COMPILE=riscv64-unknown-linux-gnu- defconfig make ARCH=riscv CROSS_COMPILE=riscv64-unknown-linux-gnu- -j $(nproc) å‡†å¤‡ Busybox è¿›å…¥ä¸‹è½½è½¯ä»¶åŒ…ï¼Œhttps://busybox.net/downloads/\nwget https://busybox.net/downloads/busybox-1.36.1.tar.bz2 tar -xvf busybox-1.36.1.tar.bz2 mv busybox-1.36.1 busybox cd busybox é…ç½®ç¼–è¯‘é€‰é¡¹\nmake CROSS_COMPILE=riscv64-unknown-linux-gnu- menuconfig é€‰æ‹©é™æ€åº“æ¨¡å¼ï¼Œè®¾ç½®è·¯å¾„ï¼šSettings -\u0026gt; Build static binary (no shared libs)\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç¼–è¯‘ Busybox\nmake CROSS_COMPILE=riscv64-unknown-linux-gnu- -j $(nproc) å¦‚æœéœ€è¦é¢‘ç¹ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥åœ¨ Menuconfig ä¸­è®¾ç½®äº¤å‰ç¼–è¯‘å™¨è·¯å¾„ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡éƒ½æŒ‡å®šäº†ã€‚è®¾ç½®è·¯å¾„ä¸ºï¼šSettings -\u0026gt; Build Options -\u0026gt; Cross Compiler prefixã€‚å°†å…¶è®¾ç½®ä¸º riscv64-unknown-linux-gnu-ã€‚\nå®‰è£… Busyboxï¼š\nmake CROSS_COMPILE=riscv64-unknown-linux-gnu- install Busybox é»˜è®¤å®‰è£…åœ¨å½“å‰ç›®å½•çš„_install ç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥åœ¨ Menuconfig ä¸­è®¾ç½®å®‰è£…ç›®å½•ï¼Œè·¯å¾„ä¸ºï¼šSettings -\u0026gt; Build Options -\u0026gt; Destination path for \u0026lsquo;make install\u0026rsquo;ã€‚\næŸ¥çœ‹å®‰è£…ç›®å½•\nls _install bin linuxrc sbin usr åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ\nqemu-img create -f raw rootfs.img 256M mkfs.ext4 rootfs.img mkdir rootfs sudo mount -o loop rootfs.img rootfs sudo cp -r _install/* rootfs cd rootfs sudo mkdir proc sys dev etc etc/init.d cd etc cd init.d sudo touch rcS sudo chmod +x rcS sudo vim rcS å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š\n#!/bin/sh mount -t proc none /proc mount -t sysfs none /sys /sbin/mdev -s sudo umount rootfs qemu å¯åŠ¨å†…æ ¸ï¼š\n#!/usr/bin/env bash RESTORE=$(echo -en \u0026#39;\\001\\033[0m\\002\u0026#39;) YELLOW=$(echo -en \u0026#39;\\001\\033[00;33m\\002\u0026#39;) ## Configuration vcpu=8 memory=16 drive=\u0026#34;/home/user/workspace/rootfs.img\u0026#34; kernel=\u0026#34; /home/user/workspace/linux-stable/arch/riscv/boot/Image\u0026#34; fw=\u0026#34;/home/user/workspace/opensbi/build/platform/generic/firmware/fw_jump.bin\u0026#34; ssh_port=12070 cmd=\u0026#34;/home/user/program/riscv64-qemu/bin/qemu-system-riscv64 \\ -nographic -machine virt \\ -smp \u0026#34;$vcpu\u0026#34; -m \u0026#34;$memory\u0026#34;G \\ -cpu rv64\\ -bios \u0026#34;$fw\u0026#34; \\ -kernel \u0026#34;$kernel\u0026#34; \\ -drive file=$drive,format=raw,id=hd0 \\ -device virtio-blk-device,drive=hd0 \\ -append \u0026#34;root=/dev/vda console=ttyS0\u0026#34; \u0026#34; echo ${YELLOW}:: Starting VM...${RESTORE} echo ${YELLOW}:: Using following configuration${RESTORE} echo \u0026#34;\u0026#34; echo ${YELLOW}vCPU Cores: \u0026#34;$vcpu\u0026#34;${RESTORE} echo ${YELLOW}Memory: \u0026#34;$memory\u0026#34;G${RESTORE} echo ${YELLOW}Disk: \u0026#34;$drive\u0026#34;${RESTORE} echo ${YELLOW}SSH Port: \u0026#34;$ssh_port\u0026#34;${RESTORE} echo \u0026#34;\u0026#34; echo ${YELLOW}:: NOTE: Make sure ONLY ONE .qcow2 file is${RESTORE} echo ${YELLOW}in the current directory${RESTORE} echo \u0026#34;\u0026#34; echo ${YELLOW}:: Tip: Try setting DNS manually if QEMU user network doesn\\\u0026#39;t work well. ${RESTORE} echo ${YELLOW}:: HOWTO -\\\u0026gt; https://serverfault.com/a/810639 ${RESTORE} echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; sleep 2 eval $cmd \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/busybox-%E6%9E%84%E5%BB%BA%E5%B9%B6%E5%90%AF%E5%8A%A8-risc-v-linux-%E5%86%85%E6%A0%B8/","summary":"\u003ch1 id=\"æ ¹æ–‡ä»¶ç³»ç»Ÿ\"\u003eæ ¹æ–‡ä»¶ç³»ç»Ÿ\u003c/h1\u003e\n\u003ch2 id=\"æ–‡ä»¶ç³»ç»Ÿä¸æ ¹æ–‡ä»¶ç³»ç»Ÿ\"\u003eæ–‡ä»¶ç³»ç»Ÿä¸æ ¹æ–‡ä»¶ç³»ç»Ÿ\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eæ–‡ä»¶ç³»ç»Ÿ\u003c/strong\u003eï¼ˆFile Systemï¼‰æ˜¯æ“ä½œç³»ç»Ÿç”¨äºç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„ä¸€ç§æ–¹å¼ã€‚å®ƒå®šä¹‰äº†å¦‚ä½•åœ¨å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ç¡¬ç›˜ã€SSDã€USB é©±åŠ¨å™¨ç­‰ï¼‰ä¸Šç»„ç»‡æ–‡ä»¶å’Œç›®å½•ï¼Œä»¥åŠå¦‚ä½•è¿›è¡Œæ•°æ®çš„è¯»å†™æ“ä½œã€‚\u003c/p\u003e","title":"BusyBox æ„å»ºå¹¶å¯åŠ¨ RISC-V Linux å†…æ ¸"},{"content":"Google Play æ”¹åŒº ç¬¬ä¸€æ­¥ç™»å½• Google Payï¼Œç‚¹å‡»å³ä¸Šè§’çš„è®¾ç½®æŒ‰é’®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç¬¬äºŒæ­¥ç‚¹å‡»ä»˜æ¬¾æ–¹å¼ï¼Œåˆ é™¤å·²æœ‰çš„ä»˜æ¬¾æ–¹å¼ã€‚ç„¶åç‚¹å‡»æ·»åŠ ä»˜æ¬¾æ–¹å¼ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç¬¬ä¸‰æ­¥æ·»åŠ ä¿¡ç”¨å¡æˆ–è€…å€Ÿè®°å¡ï¼Œå¡«å†™å¡å·ã€æœ‰æ•ˆæœŸã€CVVã€å§“åã€åœ°å€ç­‰ä¿¡æ¯ã€‚æ‰€æœ‰ä¿¡æ¯å¯ä»¥ä½¿ç”¨ç¾å›½åœ°å€ç”Ÿæˆã€‚ç¾å›½åœ°å€åªæ˜¯ç½‘ç«™çš„åç§°ï¼Œæ ¹æ®å®é™…æƒ…å†µå¯ä»¥é€‰æ‹©å…¶ä»–å›½å®¶çš„åœ°å€ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼š\nä½ è¦æ”¹å“ªä¸ªå›½å®¶å°±é€‰æ‹©å“ªä¸ªå›½å®¶ï¼Œå¹¶ä¸”ç”Ÿæˆå¯¹åº”å›½å®¶çš„åœ°å€ã€‚ åœ°å€ç¬¬ä¸€è¡Œå’Œåœ°å€ç¬¬äºŒè¡Œå¯ä»¥éšä¾¿å¡«ã€‚ å¸‚/åŒºã€å·/çœã€é‚®ç¼–ã€å¿…é¡»ä½¿ç”¨ç”Ÿæˆçš„åœ°å€ã€‚ \u003c!DOCTYPE html\u003e Responsive Image å¡«å†™ç¤ºä¾‹å¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç¬¬å››æ­¥æ·»åŠ å®Œæˆåç‚¹å‡»ä¿å­˜ï¼Œæ­¤æ—¶åº•éƒ¨ä¼šæœ‰å¼¹çª—æç¤ºï¼Œå¦‚å›¾æ‰€ç¤ºã€‚è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œç‚¹å‡»ç»§ç»­ã€‚å…³é—­çª—å£åˆ°Google PayæŸ¥çœ‹åœ°åŒºå·²ç»å®Œæˆæ›´æ”¹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœä¸å·§ï¼Œä½ ä¹Ÿè·Ÿæˆ‘ä¸€æ ·æ²¡èƒ½ä¿®æ”¹æˆåŠŸï¼Œå¯ä»¥å°è¯•åœ¨æ‰‹æœºç«¯ç™»å½•Google Playï¼Œåœ¨æ‰‹æœºç«¯æ·»åŠ ä»˜æ¬¾æ–¹å¼ã€‚æ·»åŠ æ–¹å¼å’Œç”µè„‘ç«¯ä¸€æ ·ï¼Œåªæ˜¯åœ¨æ‰‹æœºç«¯æ·»åŠ æ›´å®¹æ˜“æˆåŠŸã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/google-play-%E6%94%B9%E5%8C%BA/","summary":"\u003ch1 id=\"google-play-æ”¹åŒº\"\u003eGoogle Play æ”¹åŒº\u003c/h1\u003e\n\u003cp\u003eç¬¬ä¸€æ­¥ç™»å½• \u003ca href=\"https://pay.google.com/\"\u003eGoogle Pay\u003c/a\u003eï¼Œç‚¹å‡»å³ä¸Šè§’çš„è®¾ç½®æŒ‰é’®ã€‚\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2024/06/14/9a6c2e3777731d27ef47d33cb95c8a0c.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2024/06/14/9a6c2e3777731d27ef47d33cb95c8a0c.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eç¬¬äºŒæ­¥ç‚¹å‡»ä»˜æ¬¾æ–¹å¼ï¼Œåˆ é™¤å·²æœ‰çš„ä»˜æ¬¾æ–¹å¼ã€‚ç„¶åç‚¹å‡»æ·»åŠ ä»˜æ¬¾æ–¹å¼ã€‚\u003c/p\u003e","title":"Google Play æ”¹åŒº"},{"content":"VSCodeæ»šåŠ¨æ¡å·¦ä¾§æœ‰è¾ƒå®½çš„æ»šåŠ¨æ¡ï¼Œè¿™ç©æ„å«å°åœ°å›¾Minimapï¼Œä½œç”¨å’Œæ¸¸æˆé‡Œçš„å°åœ°å›¾ç±»ä¼¼ï¼Œå°±æ˜¯ä¸ºäº†çœ‹ä¸€ä¸‹æ•´ä¸ªä»£ç ç»“æ„ï¼Œä¾¿äºå¿«é€Ÿå®šä½ï¼Œä½†æ˜¯æˆ‘ä¹ æƒ¯ç”¨æœç´¢ï¼Œè§‰å¾—è¿™ç©æ„å¤ªå åœ°æ–¹äº†ï¼Œå¯ä»¥åœ¨è®¾ç½®é‡Œæœç´¢Minimapè¿›è¡Œå…³é—­ï¼Œæˆ–è€…è®¾ç½®ä¸ºè‡ªåŠ¨éšè—ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/vscode%E5%85%B3%E9%97%AD%E6%BB%9A%E5%8A%A8%E6%9D%A1%E9%A2%84%E8%A7%88/","summary":"\u003cp\u003eVSCodeæ»šåŠ¨æ¡å·¦ä¾§æœ‰è¾ƒå®½çš„æ»šåŠ¨æ¡ï¼Œè¿™ç©æ„å«å°åœ°å›¾Minimapï¼Œä½œç”¨å’Œæ¸¸æˆé‡Œçš„å°åœ°å›¾ç±»ä¼¼ï¼Œå°±æ˜¯ä¸ºäº†çœ‹ä¸€ä¸‹æ•´ä¸ªä»£ç ç»“æ„ï¼Œä¾¿äºå¿«é€Ÿå®šä½ï¼Œä½†æ˜¯æˆ‘ä¹ æƒ¯ç”¨æœç´¢ï¼Œè§‰å¾—è¿™ç©æ„å¤ªå åœ°æ–¹äº†ï¼Œå¯ä»¥åœ¨è®¾ç½®é‡Œæœç´¢Minimapè¿›è¡Œå…³é—­ï¼Œæˆ–è€…è®¾ç½®ä¸ºè‡ªåŠ¨éšè—ã€‚\u003c/p\u003e","title":"VSCodeå…³é—­æ»šåŠ¨æ¡é¢„è§ˆ"},{"content":"æ‡’å¾—è‡ªå·±æ­å»ºäº†ï¼Œè¿˜è¦å‡†å¤‡ä¸€å°å…¬ç½‘æœåŠ¡å™¨ï¼Œç›´æ¥æ‰¾ç¬¬ä¸‰æ–¹æœåŠ¡å•†ã€‚ç­¾åˆ°å…è´¹é€æµé‡ï¼Œä¸è¿‡æµé‡ä¸å¤šï¼Œä¸è¿‡ç”¨æ¥ç©¿é€ä¸ªå°æœåŠ¡è¿˜æ˜¯å¤Ÿçš„ã€‚\nhttps://chickfrp.com?affcode=2649EJBPNQ https://console.openfrp.net/ åˆ›å»ºéš§é“ï¼Œä¸‹è½½é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š\n[common] protocol=tcp server_addr=ali-shanghai-a.chickfrp.com server_port=7000 user=xxxxxxxxx token=xxxxxxxx tcp_mux=true [ openai ] type= tcp remote_port= 10006 local_ip= 192.168.1.9 local_port= 3322 use_compression=false use_encryption=false é…ç½®å®¢æˆ·ç«¯ï¼Œä¸‹é¢ä»¥ Linux ä¸ºä¾‹ï¼Œå› ä¸ºéœ€è¦é…ç½® Docker æœåŠ¡ï¼Œæ‰€ä»¥åšä¸ªç®€å•è®°å½•ã€‚\n# ä¸‹è½½ frp åº”ç”¨ï¼Œè§£å‹å frpc æ˜¯å®¢æˆ·ç«¯ï¼Œfrps æ˜¯æœåŠ¡ç«¯ï¼Œä»Šå¤©æˆ‘ä»¬åªç”¨åˆ° frpc wget https://github.com/fatedier/frp/releases/download/v0.56.0/frp_0.56.0_linux_amd64.tar.gz tar zxvf frp_0.56.0_linux_amd64.tar.gz å°†æœåŠ¡å•†æä¾›çš„é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°frpc.tomlä¸­ã€‚æœåŠ¡å•†æä¾›çš„å¯èƒ½æ˜¯æ—§ç‰ˆæœ¬çš„ frp é…ç½®ï¼Œæ˜¯iniæ ¼å¼ï¼Œéœ€è¦è½¬æ¢æˆtomlæ ¼å¼ã€‚æœ‰èƒ½åŠ›å¯ä»¥è‡ªå·±ç¨å¾®æ”¹ä¸€ä¸‹æ ¼å¼å°±è¡Œï¼Œä¸ä¼šçš„è¯ï¼Œå¯ä»¥ç”¨åœ¨çº¿è½¬æ¢å·¥å…·ï¼Œæ¯”å¦‚ï¼šhttps://toml.info/zh/ini-to-tomlã€‚\nç®€å•å¯åŠ¨ï¼š\n./frpc -c ./frpc.toml 2024-04-01 21:04:29.326 [I] [client/control.go:170] [19341bf77b5454753237] [SDSDasdaderf.openai] start proxy success é…ç½® Docker-compose ä¸€é”®å¯åŠ¨ï¼Œå°†é…ç½®æ–‡ä»¶frpc.tomlæ˜ å°„åˆ°å®¹å™¨ä¸­ã€‚\nversion: \u0026#34;3.7\u0026#34; services: frp: image: stilleshan/frpc:latest container_name: frp volumes: - /path/to/frpc.toml:/frp/frpc.toml restart: always docker-compose up -då¯åŠ¨å®¹å™¨ã€‚docker logs frpæŸ¥çœ‹æ—¥å¿—ã€‚å‡ºç°start proxy successè¡¨ç¤ºæˆåŠŸã€‚\n","permalink":"https://lifeislife.cn/posts/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/","summary":"\u003cp\u003eæ‡’å¾—è‡ªå·±æ­å»ºäº†ï¼Œè¿˜è¦å‡†å¤‡ä¸€å°å…¬ç½‘æœåŠ¡å™¨ï¼Œç›´æ¥æ‰¾ç¬¬ä¸‰æ–¹æœåŠ¡å•†ã€‚ç­¾åˆ°å…è´¹é€æµé‡ï¼Œä¸è¿‡æµé‡ä¸å¤šï¼Œä¸è¿‡ç”¨æ¥ç©¿é€ä¸ªå°æœåŠ¡è¿˜æ˜¯å¤Ÿçš„ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://chickfrp.com?affcode=2649EJBPNQ\"\u003ehttps://chickfrp.com?affcode=2649EJBPNQ\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://console.openfrp.net/\"\u003ehttps://console.openfrp.net/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåˆ›å»ºéš§é“ï¼Œä¸‹è½½é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š\u003c/p\u003e","title":"FRP å†…ç½‘ç©¿é€"},{"content":"é—®é¢˜èƒŒæ™¯ ä¸€æ¬¾ SoC èŠ¯ç‰‡ï¼Œä¼šæ”¯æŒå¤šç§æ–¹å¼å¯åŠ¨ï¼Œæ¯”å¦‚ä» NAND Flashã€SPI Flashã€eMMCã€USBã€UART å¯åŠ¨ã€‚å¯¹äº SPI Flash å¯åŠ¨ï¼ŒBootROM éœ€è¦çŸ¥é“ SPI Flash çš„å‹å·ã€å®¹é‡ã€é¡µå¤§å°ã€æ“¦é™¤å¤§å°ç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–ã€å†™å…¥ã€æ“¦é™¤ SPI Flashã€‚ä½†æ˜¯ï¼Œä¸åŒå‚å®¶çš„ SPI Flashï¼Œè¿™äº›å‚æ•°å¯èƒ½ä¸åŒï¼Œè€Œ ROM ä¸­çš„ä»£ç æ˜¯æ— æ³•ä¿®æ”¹çš„ï¼Œå¹¶ä¸”å®¹é‡æœ‰é™ï¼Œå¦‚ä½•ä»¥æœ€å°çš„ä»£ç é‡ï¼Œé€‚é…ä¸åŒå‚å®¶çš„ SPI Flash å‘¢ï¼Ÿ\nSPI å¼€å‘æµç¨‹ SPI æ§åˆ¶å™¨åˆå§‹\nSPI æ§åˆ¶å™¨æœ‰è‡ªå·±çš„å¯„å­˜å™¨ï¼Œå¯ä»¥é…ç½® SPI çš„é¡µï¼Œå—çš„æ“¦é™¤æ—¶é—´ï¼Œæ˜¯å¦éœ€è¦ DMAï¼Œæ˜¯å¦å¼€å¯ä¸­æ–­ï¼Œå•æ¬¡è¯»å†™çš„å¤§å°ç­‰ç­‰ã€‚ ä½¿ç”¨ SPI å¯¹ Flash è¿›è¡Œé…ç½®\nBootROM çš„ SPI æ”¯æŒä¸‰ç§æ¨¡å¼ï¼šSingleã€Dualã€Quadï¼Œè¿™ä¸ä»…è¦é…ç½® SPI æœ¬èº«çš„å¯„å­˜å™¨ï¼Œä¹Ÿéœ€è¦é…ç½® Flash çš„å¯„å­˜å™¨ã€‚é…ç½® Flash çš„å¯„å­˜å™¨å°±éœ€è¦ä½¿ç”¨ SPI æ¥å®Œæˆã€‚ BootROM ä¸­é…ç½® SPI æ§åˆ¶å™¨çš„ SPIC_CSR_01 å¯„å­˜å™¨çš„spi_bus_mode ä½å¯ä»¥é…ç½® SPI çš„æ¨¡å¼ï¼› æŸ¥é˜… Flash æ‰‹å†Œï¼Œæ‰¾åˆ°é…ç½®æ€»çº¿æ¨¡å¼çš„å¯„å­˜å™¨ä»¥åŠæ“ä½œå®ƒçš„å‘½ä»¤ï¼Œå¦‚ WINBOND-W25Q128JW è¿™æ¬¾ Flash çš„é…ç½®å¯„å­˜å™¨ä¸º Status Register-2ï¼ŒFlash çš„å¯„å­˜å™¨æ˜¯æ— æ³•ç›´æ¥è¯»å†™çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Flash æ‰‹å†Œä¸­æ‰¾åˆ°æ“ä½œè¿™ä¸ªå¯„å­˜å™¨çš„å‘½ä»¤ï¼Œåœ¨æ‰‹å†Œçš„ Instructions ç« èŠ‚å¯ä»¥æ‰¾åˆ°è¿™æ¬¾ Flash çš„é…ç½®å‘½ä»¤ä¸º Write Status Register-2ï¼Œå‘½ä»¤ç ä¸º 0x31ï¼Œåªè¦æˆ‘ä»¬å‘ Flash å‘é€ 0x31ï¼Œå°±å¯ä»¥é…ç½® Flash çš„æ€»çº¿æ¨¡å¼äº†ã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¦‚ä½•å‘ Flash å‘é€æŒ‡ä»¤ï¼Ÿéœ€è¦å°†çœŸæ­£è¦å‘é€çš„æŒ‡ä»¤å†™å…¥ SPI çš„å¯„å­˜å™¨SPIC_CSR_06ï¼Œè¯¥å¯„å­˜å™¨çš„å„ä¸ª Bit å¯ä»¥é…ç½®å‘½ä»¤ç ï¼Œå‘½ä»¤ç±»å‹ï¼Œå‘½ä»¤æ˜¯å¦æœ‰æ•ˆç­‰ä¿¡æ¯ã€‚æˆ‘ä»¬å°†ä¹‹å‰çš„å‘½ä»¤ç 0x31å†™å…¥åˆ°SPIC_CSR_06çš„command_codeä½ï¼Œç„¶åå°†SPIC_CSR_06çš„command_typeä½è®¾ç½®ä¸ºwrite status registerï¼ŒSPI å°±ä¼šè‡ªåŠ¨å°†è¿™äº›ä¿¡æ¯å‘é€ç»™ Flashã€‚Flash æ¥æ”¶åˆ°å‘½ä»¤åï¼Œä¼šæ ¹æ®å‘½ä»¤ç æ‰§è¡Œé…ç½®å¯„å­˜å™¨çš„æ“ä½œã€‚ SPI è¯»å†™ Flash\nå’Œé…ç½® Flash æ€»çº¿æ¨¡å¼ä¸€æ ·ï¼Œè¯»å†™ Flash ä¹Ÿéœ€è¦é…ç½® SPI æ§åˆ¶å™¨çš„å¯„å­˜å™¨ï¼Œä»¥åŠé…ç½® Flash çš„å¯„å­˜å™¨ã€‚SPI æ§åˆ¶å™¨çš„å¯„å­˜å™¨é…ç½®å’Œé…ç½® Flash æ€»çº¿æ¨¡å¼ä¸€æ ·ï¼Œåªæ˜¯å‘½ä»¤ç å’Œå‘½ä»¤ç±»å‹ä¸åŒã€‚ç¨æœ‰ä¸åŒçš„æ˜¯éœ€è¦å…ˆé…ç½®å¥½ SPI å¯„å­˜å™¨ï¼Œé…ç½®è¯»å†™çš„å¤§å°ä»¥åŠè¯»å†™çš„åœ°å€ï¼Œç„¶åå†é…ç½®SPIC_CSR_06ã€‚Flashæ¥æ”¶åˆ°å‘½ä»¤åï¼Œä¼šæ ¹æ®å‘½ä»¤ç æ‰§è¡Œè¯»å†™æ“ä½œã€‚ä¸»è®¾å¤‡åªéœ€è¦è¯»å†™ Flash çš„æŒ‡å®šåœ°å€å³å¯è¯»å†™åˆ°æ•°æ®ã€‚ SPI é©±åŠ¨å¦‚ä½•é€‚é…ä¸åŒçš„ Flash åœ¨å¼€å‘æµç¨‹ä¸­æˆ‘ä»¬å¹¶æœªè€ƒè™‘ä¸åŒå‚å®¶çš„ Flash å¦‚ä½•æ“ä½œï¼Œåªæ˜¯å…³å¿ƒäº† WINBOND-W25Q128JW è¿™æ¬¾ Flash çš„æ“ä½œã€‚åœ¨æ“ä½œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸åŒå‚å®¶çš„ Flash çš„æ“ä½œåŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯å‘½ä»¤ç ã€é¡µå¤§å°ã€æ“¦é™¤å¤§å°ç­‰å‚æ•°ä¸åŒã€‚æˆ‘ä»¬åªè¦é’ˆå¯¹ä¸åŒçš„ Flashï¼Œé…ç½®ä¸åŒçš„å‚æ•°å³å¯ã€‚ä½†æ˜¯ï¼Œå¦‚ä½•çŸ¥é“å½“å‰ Flash çš„å‚æ•°å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ° SFDP äº†ã€‚\nSFDP æ˜¯ JEDEC å‘å¸ƒçš„ JESD216 çš„ä¸€ä¸ªæ–°æ ‡å‡†ï¼Œç›®å‰çš„ç‰ˆæœ¬å·æ˜¯ V1.0ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒSFDPï¼ˆSerial Flash Discoverable Parametersï¼‰å°±ç›¸å½“äºä¸€å¼ å­˜å‚¨äº† FLASH éƒ¨åˆ†å±æ€§çš„è¡¨ï¼Œæ­¤è¡¨æ˜¯ä¸å ç”¨ FLASH æœ¬èº«çš„å­˜å‚¨ç©ºé—´çš„ã€‚SFDP ä¸­çš„ä¿¡æ¯è‡ªå‡ºå‚å°±è¢«å›ºå®šï¼Œåªä¾›è¯»å–ï¼Œå¼€å‘äººå‘˜å¯é€šè¿‡å‘é€æ“ä½œæŒ‡ä»¤ 0x5A æ¥è¯»å–å½“å‰ FLASH çš„ SFDP ç›¸å…³å†…å®¹ï¼Œè¿™æœ‰åˆ©äºå¼€å‘äººå‘˜äº†è§£ FLASH ä¹‹é—´çš„å·®å¼‚ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œç¼©çŸ­æ•´ä¸ªå¼€å‘å‘¨æœŸã€‚\nä¹Ÿå°±æ˜¯åªè¦ Flash ç ”å‘æ—¶éµå¾ªäº† JESD216 è¿™ä¸ªæ ‡å‡†ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡å‘é€ 0x5A è¿™ä¸ªå‘½ä»¤ç ï¼Œå»è·å–Flashç›¸å…³å‚æ•°ã€‚æœ€ä¸ºå…³é”®çš„å°±æ˜¯å…¶ä¸­ä¼šä¿å­˜ Flash å‚å•†çš„ IDï¼Œå½“æˆ‘ä»¬è·å–åˆ° Flash å‚å•†çš„ ID æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ® ID æ‰§è¡Œä¸åŒçš„é…ç½®æ“ä½œã€‚\nå¯¹äº WINBOND-W25Q128JW è¿™æ¬¾ Flashï¼Œåœ¨æ•°æ®æ‰‹å†Œçš„Featureé‡Œå°±å¯ä»¥çœ‹åˆ°å®ƒæ˜¯æ”¯æŒ SFDP çš„ï¼š \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/bootrom%E4%B8%ADspi%E5%A6%82%E4%BD%95%E9%80%82%E9%85%8D%E4%B8%8D%E5%90%8C%E5%8E%82%E5%AE%B6%E7%9A%84flash%E8%8A%AF%E7%89%87/","summary":"\u003ch1 id=\"é—®é¢˜èƒŒæ™¯\"\u003eé—®é¢˜èƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eä¸€æ¬¾ SoC èŠ¯ç‰‡ï¼Œä¼šæ”¯æŒå¤šç§æ–¹å¼å¯åŠ¨ï¼Œæ¯”å¦‚ä» NAND Flashã€SPI Flashã€eMMCã€USBã€UART å¯åŠ¨ã€‚å¯¹äº SPI Flash å¯åŠ¨ï¼ŒBootROM éœ€è¦çŸ¥é“ SPI Flash çš„å‹å·ã€å®¹é‡ã€é¡µå¤§å°ã€æ“¦é™¤å¤§å°ç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–ã€å†™å…¥ã€æ“¦é™¤ SPI Flashã€‚ä½†æ˜¯ï¼Œä¸åŒå‚å®¶çš„ SPI Flashï¼Œè¿™äº›å‚æ•°å¯èƒ½ä¸åŒï¼Œè€Œ ROM ä¸­çš„ä»£ç æ˜¯æ— æ³•ä¿®æ”¹çš„ï¼Œå¹¶ä¸”å®¹é‡æœ‰é™ï¼Œå¦‚ä½•ä»¥æœ€å°çš„ä»£ç é‡ï¼Œé€‚é…ä¸åŒå‚å®¶çš„ SPI Flash å‘¢ï¼Ÿ\u003c/p\u003e","title":"BootROM ä¸­ SPI å¦‚ä½•é€‚é…ä¸åŒå‚å®¶çš„ Flash èŠ¯ç‰‡"},{"content":"GitHub Copilot CLI æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒå…è®¸ä½ åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ GitHub Copilotã€‚ä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥è·å–ä»£ç å»ºè®®ï¼Œè¿™äº›å»ºè®®æ˜¯ç”± OpenAI çš„ GPT-4 æ¨¡å‹ç”Ÿæˆçš„ã€‚è¿™ä¸ªå·¥å…·å¯ä»¥åœ¨ä»»ä½•æ”¯æŒå‘½ä»¤è¡Œçš„ç¯å¢ƒä¸­ä½¿ç”¨ï¼ŒåŒ…æ‹¬ Visual Studio Code çš„é›†æˆç»ˆç«¯ã€‚\nå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šUsing GitHub Copilot in the CLI - GitHub Docs\nå®‰è£… å‰æï¼š\néœ€è¦è®¢é˜…Github Copilotï¼Œæ¯æœˆ$10ã€‚\néœ€è¦å®‰è£…GH CLI\nè®¢é˜…è‡ªè¡Œè§£å†³ï¼Œæ¥ä¸‹æ¥å®‰è£…GH CLIï¼š\nsudo mkdir -p -m 755 /etc/apt/keyrings \u0026amp;\u0026amp; wget -qO- https://cli.github.com/packages/githubcli-archive-keyring.gpg | sudo tee /etc/apt/keyrings/githubcli-archive-keyring.gpg \u0026gt; /dev/null \\ \u0026amp;\u0026amp; sudo chmod go+r /etc/apt/keyrings/githubcli-archive-keyring.gpg \\ \u0026amp;\u0026amp; echo \u0026#34;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main\u0026#34; | sudo tee /etc/apt/sources.list.d/github-cli.list \u0026gt; /dev/null \\ \u0026amp;\u0026amp; sudo apt update \\ \u0026amp;\u0026amp; sudo apt install gh -y å¦‚æœæ²¡æ³•å®‰è£…ï¼Œå¯ä»¥ä¸‹è½½debæ–‡ä»¶æ‰‹åŠ¨å®‰è£…ã€‚Release GitHub CLI 2.46.0 Â· cli/cli\nå®‰è£…å®ŒGH CLIåï¼Œå®‰è£…Copilot CLIï¼š\n$ gh auth login # é€‰æ‹©ç™»å½•è´¦å·ç±»å‹ä¸ºGithub.com ? What account do you want to log into? [Use arrows to move, type to filter] \u0026gt; GitHub.com GitHub Enterprise Server # é€‰æ‹©ä¼ è¾“åè®®ä¸ºSSH ? What is your preferred protocol for Git operations on this host? [Use arrows to move, type to filter] HTTPS \u0026gt; SSH # é€‰æ‹©ä¸€ä¸ªæœ¬åœ°çš„å…¬é’¥ï¼Œå¹¶å‘½åSSH keyçš„åç§° ? Title for your SSH key: (GitHub CLI) wsl2 # é€‰æ‹©éªŒè¯æ–¹å¼ä¸ºä½¿ç”¨æµè§ˆå™¨éªŒè¯ ? How would you like to authenticate GitHub CLI? [Use arrows to move, type to filter] \u0026gt; Login with a web browser Paste an authentication token ! First copy your one-time code: 7AAA-SA47 # å›è½¦åä¼šå¼¹å‡ºæµè§ˆå™¨ï¼Œè¾“å…¥éªŒè¯ç å³å¯ Press Enter to open github.com in your browser... ! Failed opening a web browser at https://github.com/login/device fork/exec /usr/bin/winchrome: exec format error Please try entering the URL in your browser manually WSL2 ç¯å¢ƒä¸‹å¯èƒ½ä¼šå‡ºç°æ— æ³•æ‰“å¼€æµè§ˆå™¨çš„æƒ…å†µï¼Œå¯ä»¥æ‰‹åŠ¨æ‰“å¼€æµè§ˆå™¨è¾“å…¥åœ°å€éªŒè¯https://github.com/login/deviceã€‚\nä½¿ç”¨ æ”¯æŒä¸¤ä¸ªå‘½ä»¤ï¼š\n# è§£é‡Šä»£ç  gh copilot explain # è·å–å‘½ä»¤è¡Œå»ºè®® gh copilot suggest ç¤ºä¾‹ï¼š\n$ gh copilot explain \u0026#34;sudo apt-get\u0026#34; Welcome to GitHub Copilot in the CLI! version 1.0.1 (2024-03-22) I\u0026#39;m powered by AI, so surprises and mistakes are possible. Make sure to verify any generated code or suggestions, and share feedback so that we can learn and improve. For more information, see https://gh.io/gh-copilot-transparency Explanation: â€¢ sudo is used to run a command with elevated rights, typically as a superuser. â€¢ apt-get is the Ubuntu package manager. â€¢ It is used to manage packages on the system, including installing, updating, and removing software packages. â€¢ It requires administrative privileges to perform these operations. â€¢ Additional sub-commands can be used with apt-get to perform specific tasks, such as install, remove, update, etc. $ gh copilot suggest \u0026#34;Install git\u0026#34; Welcome to GitHub Copilot in the CLI! version 1.0.1 (2024-03-22) I\u0026#39;m powered by AI, so surprises and mistakes are possible. Make sure to verify any generated code or suggestions, and share feedback so that we can learn and improve. For more information, see https://gh.io/gh-copilot-transparency ? What kind of command can I help you with? [Use arrows to move, type to filter] \u0026gt; generic shell command gh command git command Suggestion: sudo apt-get install git ? Select an option [Use arrows to move, type to filter] \u0026gt; Copy command to clipboard Explain command Execute command Revise command Rate response Exit gh copilot é»˜è®¤æä¾›äº†è¿™ä¸¤ä¸ªå‘½ä»¤çš„åˆ«åï¼Œæ— éœ€è¾“å…¥å®Œæ•´å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š\n# ghce ä¸º gh copilot explain çš„åˆ«å ghce \u0026#34;sudo apt-get\u0026#34; # ghcs ä¸º gh copilot suggest çš„åˆ«å ghcs \u0026#34;install git\u0026#34; ä¸ºäº†ä¾¿äºåœ¨æ¯ä¸ªç»ˆç«¯ä¸­ä½¿ç”¨ gh copilot cliï¼Œå°†ä»¥ä¸‹é…ç½®æ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š\necho \u0026#39;eval \u0026#34;$(gh copilot alias -- zsh)\u0026#34;\u0026#39; \u0026gt;\u0026gt; ~/.zshrc ","permalink":"https://lifeislife.cn/posts/github-copilot-cli%E5%91%BD%E4%BB%A4%E8%A1%8Cai%E5%B7%A5%E5%85%B7/","summary":"\u003cp\u003eGitHub Copilot CLI æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒå…è®¸ä½ åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ GitHub Copilotã€‚ä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥è·å–ä»£ç å»ºè®®ï¼Œè¿™äº›å»ºè®®æ˜¯ç”± OpenAI çš„ GPT-4 æ¨¡å‹ç”Ÿæˆçš„ã€‚è¿™ä¸ªå·¥å…·å¯ä»¥åœ¨ä»»ä½•æ”¯æŒå‘½ä»¤è¡Œçš„ç¯å¢ƒä¸­ä½¿ç”¨ï¼ŒåŒ…æ‹¬ Visual Studio Code çš„é›†æˆç»ˆç«¯ã€‚\u003c/p\u003e","title":"GitHub Copilot CLIå‘½ä»¤è¡ŒAIå·¥å…·"},{"content":"Windowsä¸Šé€šè¿‡WSL2è¿›è¡ŒLinuxå¼€å‘ï¼Œä½†æ˜¯æœ‰æ—¶å€™éœ€è¦å¼€å‘å¸¦GUIçš„å¼•ç”¨ï¼Œè¿™æ ·å°±éœ€è¦å°†å›¾åƒè½¬å‘ã€‚\né…ç½®Windows ä¸‹è½½å®‰è£…XMingï¼Œå¯åŠ¨Xlaunchã€‚\né€‰æ‹©MultiWindow è®¾ç½®Display numberä¸º10ï¼ˆå¯ä»¥è‡ªè¡Œè®¾ç½®ï¼Œä¸»è¦æ˜¯éœ€è¦å’Œåé¢åœ¨WSL2ä¸­è®¾ç½®çš„å˜é‡ä¿æŒä¸€è‡´ï¼‰ é€‰æ‹©Start no clientï¼ˆWindowsçš„XMingæ˜¯è¢«åŠ¨ç­‰å¾…æ¥æ”¶å›¾åƒæ•°æ®ï¼Œæ‰€ä»¥é€‰æ‹©è¯¥é¡¹ï¼‰ ä¸€ç›´ä¸‹ä¸€é¡µï¼Œå…¶ä½™ä¿æŒé»˜è®¤ï¼Œç‚¹å‡»å®Œæˆå³å¯ã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image é…ç½®VSCode å®‰è£…RemoteX11æ’ä»¶ï¼Œç›´æ¥åœ¨æ’ä»¶ä¸­å¿ƒæœç´¢å®‰è£…å³å¯ã€‚\næ‰“å¼€è®¾ç½®é¡µé¢ï¼Œæœç´¢Remote x11ï¼Œæ‰¾åˆ°å¦‚ä¸‹é…ç½®é¡¹ï¼Œå°†Display Numberé…ç½®ä¸º10\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½®WSL2 å®‰è£…xclockç”¨äºæµ‹è¯•\nsudo apt-get install xclock è®¾ç½®ç¯å¢ƒå˜é‡\nexport DISPLAY=localhost:10.0 # æˆ–è€… export DISPLAY=:0 è¿è¡ŒxclockæŸ¥çœ‹ç»“æœ\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/remotex11-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E5%B8%A6gui%E5%BA%94%E7%94%A8/","summary":"\u003cp\u003eWindowsä¸Šé€šè¿‡WSL2è¿›è¡ŒLinuxå¼€å‘ï¼Œä½†æ˜¯æœ‰æ—¶å€™éœ€è¦å¼€å‘å¸¦GUIçš„å¼•ç”¨ï¼Œè¿™æ ·å°±éœ€è¦å°†å›¾åƒè½¬å‘ã€‚\u003c/p\u003e\n\u003ch2 id=\"é…ç½®windows\"\u003eé…ç½®Windows\u003c/h2\u003e\n\u003cp\u003eä¸‹è½½å®‰è£…XMingï¼Œå¯åŠ¨Xlaunchã€‚\u003c/p\u003e","title":"RemoteX11 è¿œç¨‹è°ƒè¯•å¸¦GUIåº”ç”¨"},{"content":"ä»¥å‰å¯¹è½¯ä»¶åŒ…çš„æ„å»ºä¸å¤ªäº†è§£ï¼Œå–œæ¬¢éšæ„ä¿®æ”¹è½¯ä»¶æºåˆ—è¡¨ï¼Œè½¯ä»¶æºå’Œå½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬ä¸ä¸€è‡´å°±ä¼šå‡ºç°å®‰è£…äº†ä¸€ä¸ªä¾èµ–è¾ƒå¤šçš„è½¯ä»¶åŒ…åä¼šå‡ºç°è¿é”ååº”ï¼Œä¿®æ”¹äº†æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ç‰ˆæœ¬ï¼Œå¯¼è‡´ç³»ç»Ÿæ•…éšœã€‚æœ€å¸¸å‡ºç°çš„å°±æ˜¯ä¿®æ”¹äº†GCCç‰ˆæœ¬ï¼Œå¯¼è‡´GLIBCXXç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯¼è‡´ç³»ç»Ÿè½¯ä»¶æ— æ³•è¿è¡Œã€‚\nå¦‚æœä½ çš„ç³»ç»Ÿè¿˜èƒ½æ­£å¸¸å®‰è£…è½¯ä»¶ï¼Œé‚£ä¹ˆä¿®æ”¹è½¯ä»¶æºå’Œå½“å‰ç³»ç»Ÿç‰ˆæœ¬ä¿å­˜ä¸€è‡´ï¼Œç„¶åæ›´æ–°è½¯ä»¶ï¼Œå¹¶é‡æ–°å®‰è£…GCCå³å¯è§£å†³é—®é¢˜ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\n# ä¿®æ”¹è½¯ä»¶æº sudo vim /etc/apt/sources.list # æ£€æŸ¥å½“å‰ç³»ç»Ÿç‰ˆæœ¬ lsb_release -a # å°†è½¯ä»¶æºä¿®æ”¹ä¸ºå½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„è½¯ä»¶æºï¼ŒUbuntuç³»ç»Ÿç‰ˆæœ¬å·å¯¹åº”çš„è½¯ä»¶æºåˆ—è¡¨å¯ä»¥åœ¨https://wiki.ubuntu.com/ReleasesæŸ¥çœ‹ # æ›´æ–°è½¯ä»¶ sudo apt update # å®‰è£…GCCï¼Œbuild-essentialåŒ…å«äº†GCC sudo apt install build-essential å¦‚æœä½ å’Œæˆ‘ä¸€æ ·å€’éœ‰ï¼Œè¿ apt éƒ½æ— æ³•ä½¿ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ dpkg å‘½ä»¤æ‰‹åŠ¨å®‰è£… GCCã€‚\nå› ä¸ºè¯¯æ“ä½œåœ¨ Ubuntu 20.04 ä¸Šå®‰è£…äº† Ubuntu 18.04 çš„ GCCï¼Œå¯¼è‡´ç³»ç»Ÿè½¯ä»¶æ— æ³•è¿è¡Œï¼Œapt ä¹Ÿæ— æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨å®‰è£… GCCã€‚\napt: libx86_64-linux-gnu-libstdc++.so.6: version `GLIBCXX_3.4.29\u0026#39; not found (required by libx86_64-linux-gnulibapt-private.so.0.0) æ—¢ç„¶libstdc++ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œæˆ‘ä»¬å°±å»ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„GCCï¼Œè®¿é—®https://packages.ubuntu.com/ï¼Œåœ¨ä¸‹æ–¹çš„æœç´¢æ¡†ä¸­è¾“å…¥libstdc++6ï¼Œé€‰æ‹©å¯¹åº”çš„ç³»ç»Ÿç‰ˆæœ¬ï¼Œç„¶åä¸‹è½½å¯¹åº”çš„GCCã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»æœç´¢ç»“æœï¼Œç‚¹å‡»ç³»ç»Ÿçš„æ¶æ„ï¼Œä¸€èˆ¬ä¸ºamd64ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image å…·ä½“ä¸‹è½½åœ°å€æ¯”è¾ƒéšè”½ï¼Œç›´æ¥ç‚¹å‡»çº¢æ¡†çš„é“¾æ¥æ²¡æœ‰ååº”ï¼Œä½ å¯ä»¥å³é”®å¦å­˜ä¸ºåˆ°æœ¬åœ°ï¼Œæˆ‘ä¹ æƒ¯å¤åˆ¶é“¾æ¥åç”¨wgetä¸‹è½½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸‹è½½å®Œæˆåï¼Œä½¿ç”¨dpkgå‘½ä»¤å®‰è£…GCCã€‚\nsudo dpkg -i libstdc++6_12.3.0-1ubuntu1\\~22.04_amd64.deb ä¹‹åå¯ä»¥æ£€æŸ¥ä¸€ä¸‹ç¼ºå¤±çš„GLIBCXXç‰ˆæœ¬å·²ç»å®‰è£…ã€‚\n$ strings /lib/x86_64-linux-gnu/libstdc++.so.6 | grep GLIBCXX GLIBCXX_3.4 GLIBCXX_3.4.1 GLIBCXX_3.4.2 GLIBCXX_3.4.3 GLIBCXX_3.4.4 GLIBCXX_3.4.5 GLIBCXX_3.4.6 GLIBCXX_3.4.7 GLIBCXX_3.4.8 GLIBCXX_3.4.9 GLIBCXX_3.4.10 GLIBCXX_3.4.11 GLIBCXX_3.4.12 GLIBCXX_3.4.13 GLIBCXX_3.4.14 GLIBCXX_3.4.15 GLIBCXX_3.4.16 GLIBCXX_3.4.17 GLIBCXX_3.4.18 GLIBCXX_3.4.19 GLIBCXX_3.4.20 GLIBCXX_3.4.21 GLIBCXX_3.4.22 GLIBCXX_3.4.23 GLIBCXX_3.4.24 GLIBCXX_3.4.25 GLIBCXX_3.4.26 GLIBCXX_3.4.27 GLIBCXX_3.4.28 GLIBCXX_3.4.29 GLIBCXX_3.4.30 GLIBCXX_DEBUG_MESSAGE_LENGTH æ­¤æ—¶apt åº”è¯¥å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®å¤ä¸€ä¸‹æ‰€æœ‰è½¯ä»¶åŒ…ï¼Œè®©å®ƒå›åˆ°æ­£ç¡®çš„ç‰ˆæœ¬å³å¯æ¢å¤ç³»ç»Ÿã€‚\nsudo apt --fix-broken install ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3%E7%B3%BB%E7%BB%9F%E4%BE%9D%E8%B5%96%E9%94%99%E8%AF%AFglibcxx-3-4-29-not-found/","summary":"\u003cp\u003eä»¥å‰å¯¹è½¯ä»¶åŒ…çš„æ„å»ºä¸å¤ªäº†è§£ï¼Œå–œæ¬¢éšæ„ä¿®æ”¹è½¯ä»¶æºåˆ—è¡¨ï¼Œè½¯ä»¶æºå’Œå½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬ä¸ä¸€è‡´å°±ä¼šå‡ºç°å®‰è£…äº†ä¸€ä¸ªä¾èµ–è¾ƒå¤šçš„è½¯ä»¶åŒ…åä¼šå‡ºç°è¿é”ååº”ï¼Œä¿®æ”¹äº†æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ç‰ˆæœ¬ï¼Œå¯¼è‡´ç³»ç»Ÿæ•…éšœã€‚æœ€å¸¸å‡ºç°çš„å°±æ˜¯ä¿®æ”¹äº†GCCç‰ˆæœ¬ï¼Œå¯¼è‡´GLIBCXXç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯¼è‡´ç³»ç»Ÿè½¯ä»¶æ— æ³•è¿è¡Œã€‚\u003c/p\u003e","title":"è§£å†³ç³»ç»Ÿä¾èµ–é”™è¯¯GLIBCXX_3.4.29 not found"},{"content":"repo æºé…ç½®è§£æ openEuler çš„è½¯ä»¶æºé…ç½®æ–‡ä»¶ä½äº/etc/yum.repos.d/ç›®å½•ä¸‹ï¼Œä»¥.repo ä¸ºåç¼€åï¼Œæ–‡ä»¶åå¯ä»¥ä»»æ„å–ï¼Œä½†æ˜¯å¿…é¡»ä»¥.repo ç»“å°¾ã€‚\n#generic-repos is licensed under the Mulan PSL v2. #You can use this software according to the terms and conditions of the Mulan PSL v2. #You may obtain a copy of Mulan PSL v2 at: # http://license.coscl.org.cn/MulanPSL2 #THIS SOFTWARE IS PROVIDED ON AN \u0026#34;AS IS\u0026#34; BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR #IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR #PURPOSE. #See the Mulan PSL v2 for more details. [OS] name=OS baseurl=http://repo.openeuler.org/openEuler-23.09/OS/$basearch/ metalink=https://mirrors.openeuler.org/metalink?repo=$releasever/OS\u0026amp;arch=$basearch metadata_expire=1h enabled=1 gpgcheck=1 gpgkey=http://repo.openeuler.org/openEuler-23.09/OS/$basearch/RPM-GPG-KEY-openEuler [source] name=source baseurl=http://repo.openeuler.org/openEuler-23.09/source/ metalink=https://mirrors.openeuler.org/metalink?repo=$releasever\u0026amp;arch=source metadata_expire=1h enabled=1 gpgcheck=1 gpgkey=http://repo.openeuler.org/openEuler-23.09/source/RPM-GPG-KEY-openEuler å…¶ä¸­å„ä¸ªé…ç½®é¡¹çš„å«ä¹‰å¦‚ä¸‹ï¼š\n[repoid]ä¸­çš„ repoid ä¸ºè½¯ä»¶ä»“åº“ï¼ˆrepositoryï¼‰çš„ ID å·ï¼Œæ‰€æœ‰.repo é…ç½®æ–‡ä»¶ä¸­çš„å„ repoid ä¸èƒ½é‡å¤ï¼Œå¿…é¡»å”¯ä¸€ã€‚ç¤ºä¾‹ä¸­ repoid ä¸º OS å’Œ sourceã€‚ name ä¸ºè½¯ä»¶ä»“åº“æè¿°çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä»»æ„å–ï¼Œä½†æ˜¯å»ºè®®å–ä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°ï¼Œæ–¹ä¾¿ç”¨æˆ·ç†è§£ã€‚ç¤ºä¾‹ä¸­ name ä¸º OS å’Œ sourceã€‚ baseurl ä¸ºè½¯ä»¶ä»“åº“çš„åœ°å€ï¼Œå¯ä»¥æ˜¯ httpã€httpsã€ftp ç­‰åè®®ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°ç›®å½•ã€‚ enabled ä¸ºæ˜¯å¦å¯ç”¨è¯¥è½¯ä»¶æºä»“åº“ï¼Œå¯é€‰å€¼ä¸º 1 å’Œ 0ã€‚é»˜è®¤å€¼ä¸º 1ï¼Œè¡¨ç¤ºå¯ç”¨è¯¥è½¯ä»¶æºä»“åº“ã€‚ç¤ºä¾‹ä¸­ enabled ä¸º 1ã€‚ metalink ä¸ºåŠ¨æ€çš„é•œåƒåœ°å€ï¼Œç”¨äºé•œåƒåŠ é€Ÿã€‚ metadata_expire ä¸ºå…ƒæ•°æ®è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚é»˜è®¤å€¼ä¸º 90 åˆ†é’Ÿï¼Œå³ 5400 ç§’ã€‚ç¤ºä¾‹ä¸­ metadata_expire ä¸º 1hï¼Œå³ 1 å°æ—¶ã€‚ gpgcheck å¯è®¾ç½®ä¸º 1 æˆ– 0ï¼Œ1 è¡¨ç¤ºè¿›è¡Œ gpgï¼ˆGNU Private Guardï¼‰æ ¡éªŒï¼Œ0 è¡¨ç¤ºä¸è¿›è¡Œ gpg æ ¡éªŒï¼Œgpgcheck å¯ä»¥ç¡®å®š rpm åŒ…çš„æ¥æºæ˜¯æœ‰æ•ˆå’Œå®‰å…¨çš„ã€‚ gpgkey ä¸ºéªŒè¯ç­¾åç”¨çš„å…¬é’¥åœ°å€ï¼Œå¦‚æœ gpgcheck ä¸º 1ï¼Œåˆ™å¿…é¡»è®¾ç½® gpgkeyã€‚ gpgcheck è¯¦è§£ RPM-GPG-KEY æ˜¯ä¸€ä¸ªå…¬å…±å¯†é’¥ï¼Œç”¨äºéªŒè¯ç”±è¯¥å¯†é’¥ç­¾åçš„RPMåŒ…çš„çœŸå®æ€§å’Œå®Œæ•´æ€§ã€‚åœ¨ä½¿ç”¨ yum æˆ– dnf è¿™æ ·çš„åŒ…ç®¡ç†å·¥å…·æ—¶ï¼Œè¿™äº›å·¥å…·ä¼šä½¿ç”¨ GPG å¯†é’¥æ¥éªŒè¯è½¯ä»¶åŒ…çš„ç­¾åï¼Œä»¥ç¡®ä¿è½¯ä»¶åŒ…æ¥è‡ªäºå¯ä¿¡çš„æºï¼Œä¸”æœªè¢«ç¯¡æ”¹ã€‚\nå‘½åçº¦å®šï¼š RPM-GPG-KEY æ˜¯ä¸€ä¸ªå‘½åçº¦å®šï¼Œé€šå¸¸ä¸å…¶æ‰€å±çš„ä»“åº“æˆ–å‘è¡Œç‰ˆç›¸å…³ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ä½¿ç”¨æŸä¸ªç‰¹å®šå‘è¡Œç‰ˆçš„å®˜æ–¹ä»“åº“ï¼Œå®ƒå¯èƒ½ä¼šæä¾›ä¸€ä¸ª RPM-GPG-KEY æ–‡ä»¶æ¥è¿›è¡Œè½¯ä»¶åŒ…ç­¾åéªŒè¯ã€‚å¦‚openEulerå®˜æ–¹ä»“åº“æä¾›çš„ RPM-GPG-KEY æ–‡ä»¶åä¸º RPM-GPG-KEY-openEulerã€‚\nå¯†é’¥ç”Ÿæˆï¼š è¿™ä¸ªå¯†é’¥æ˜¯é€šè¿‡ GPGï¼ˆGNU Privacy Guardï¼‰å·¥å…·ç”Ÿæˆçš„ã€‚GPG æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡ŒåŠ å¯†å’Œç­¾åçš„å¼€æºå·¥å…·ã€‚RPM-GPG-KEY æ–‡ä»¶åŒ…å«äº†ä¸€ä¸ªå…¬é’¥ï¼Œè¯¥å…¬é’¥ç”±ä»“åº“æ‰€æœ‰è€…ä½¿ç”¨ç§é’¥ç­¾ç½²è½¯ä»¶åŒ…ï¼Œè€Œç”¨æˆ·ä½¿ç”¨å…¬é’¥éªŒè¯è½¯ä»¶åŒ…ã€‚\néªŒè¯è½¯ä»¶åŒ…ï¼š å½“ç”¨æˆ·ä½¿ç”¨ yum æˆ– dnf å®‰è£…è½¯ä»¶åŒ…æ—¶ï¼Œè¿™äº›å·¥å…·ä¼šæ£€æŸ¥è½¯ä»¶åŒ…çš„ç­¾åï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„ RPM-GPG-KEY æ–‡ä»¶ä¸­çš„å…¬é’¥æ¥éªŒè¯ç­¾åã€‚å¦‚æœéªŒè¯é€šè¿‡ï¼Œå·¥å…·ä¼šè®¤ä¸ºè½¯ä»¶åŒ…æ˜¯å¯ä¿¡çš„ï¼Œå¦åˆ™å°†ä¼šå‘å‡ºè­¦å‘Šæˆ–æ‹’ç»å®‰è£…ã€‚\nå¯¼å…¥å¯†é’¥ï¼š ä¸ºäº†ä½¿ç”¨ RPM-GPG-KEY æ–‡ä»¶ï¼Œç”¨æˆ·é€šå¸¸éœ€è¦å°†å¯†é’¥å¯¼å…¥åˆ°æœ¬åœ°ç³»ç»Ÿä¸­ã€‚è¿™é€šå¸¸å¯ä»¥é€šè¿‡è¿è¡Œç±»ä¼¼äºä»¥ä¸‹å‘½ä»¤çš„å¯¼å…¥å¯†é’¥çš„æ“ä½œæ¥å®Œæˆï¼š\nrpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-openEuler ä¸Šè¿°å‘½ä»¤ä¸­çš„ /etc/pki/rpm-gpg/RPM-GPG-KEY-openEuler è·¯å¾„å¯èƒ½ä¼šå› å‘è¡Œç‰ˆå’Œé…ç½®è€Œæœ‰æ‰€ä¸åŒã€‚\nRPMåŒ…ç­¾å å¯¹äºå‘å¸ƒçš„ RPM åŒ…è¿›è¡Œ GPG ç­¾åæ˜¯ä¸€ç§é‡è¦çš„å®‰å…¨æªæ–½ï¼Œå¯ä»¥ç¡®ä¿æ¥æ”¶è€…èƒ½å¤ŸéªŒè¯è½¯ä»¶åŒ…çš„çœŸå®æ€§å’Œå®Œæ•´æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€èˆ¬çš„æ­¥éª¤ï¼š\nç”Ÿæˆ GPG å¯†é’¥ï¼š å¦‚æœä½ è¿˜æ²¡æœ‰ GPG å¯†é’¥å¯¹ï¼Œä½ éœ€è¦ä½¿ç”¨ GPG å·¥å…·ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ŒåŒ…æ‹¬ç§é’¥å’Œå…¬é’¥ã€‚ä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç”Ÿæˆå¯†é’¥ï¼š\ngpg --gen-key å½“ä½ è¿è¡Œ gpg --gen-key å‘½ä»¤æ—¶ï¼Œå®ƒä¼šå¯åŠ¨ GPGï¼ˆGNU Privacy Guardï¼‰çš„å¯†é’¥ç”Ÿæˆè¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹å°†å¼•å¯¼ä½ æä¾›ä¸€äº›å¿…è¦çš„ä¿¡æ¯ä»¥ç”Ÿæˆå¯†é’¥å¯¹ï¼ŒåŒ…æ‹¬ç§é’¥å’Œå…¬é’¥ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸ªå‘½ä»¤çš„è¯¦ç»†æ­¥éª¤ï¼š\né€‰æ‹©å¯†é’¥ç±»å‹ï¼š ä½ å°†è¢«è¦æ±‚é€‰æ‹©å¯†é’¥çš„ç±»å‹ã€‚é€šå¸¸ï¼Œé»˜è®¤çš„ RSA å’Œ DSA éƒ½æ˜¯å¯æ¥å—çš„é€‰æ‹©ï¼Œä½ å¯ä»¥é€šè¿‡é”®å…¥æ•°å­—æ¥é€‰æ‹©ã€‚\né€‰æ‹©å¯†é’¥å¤§å°ï¼š ä½ å°†è¢«è¦æ±‚é€‰æ‹©å¯†é’¥çš„å¤§å°ã€‚é€šå¸¸ï¼Œé»˜è®¤å€¼ï¼ˆé€šå¸¸æ˜¯2048ä½ï¼‰æ˜¯è¶³å¤Ÿçš„ï¼Œä½†ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ›´å¤§çš„å€¼ã€‚\né€‰æ‹©å¯†é’¥çš„æœ‰æ•ˆæœŸï¼š ä½ å°†è¢«è¦æ±‚é€‰æ‹©å¯†é’¥çš„æœ‰æ•ˆæœŸã€‚ä½ å¯ä»¥é€‰æ‹©å¯†é’¥æ°¸ä¹…æœ‰æ•ˆï¼Œæˆ–è€…åœ¨ä¸€æ®µç‰¹å®šçš„æ—¶é—´å†…æœ‰æ•ˆã€‚å¦‚æœä½ é€‰æ‹©äº†ç‰¹å®šçš„æ—¶é—´ï¼Œä½ éœ€è¦è¾“å…¥ä¸€ä¸ªè¡¨ç¤ºæœ‰æ•ˆæœŸçš„å€¼ï¼Œä¾‹å¦‚1yè¡¨ç¤ºä¸€å¹´ï¼Œ1mè¡¨ç¤ºä¸€ä¸ªæœˆã€‚\næä¾›ç”¨æˆ·æ ‡è¯†ä¿¡æ¯ï¼š ä½ å°†è¢«è¦æ±‚æä¾›ä¸å¯†é’¥ç›¸å…³è”çš„ç”¨æˆ·æ ‡è¯†ä¿¡æ¯ã€‚è¿™åŒ…æ‹¬ä½ çš„çœŸå®å§“åã€ç”µå­é‚®ä»¶åœ°å€å’Œä¸€ä¸ªå¯é€‰çš„æ³¨é‡Šã€‚\nç¡®è®¤æä¾›çš„ä¿¡æ¯ï¼š GPG å°†æ˜¾ç¤ºä½ æä¾›çš„ä¿¡æ¯å¹¶è¯¢é—®ä½ æ˜¯å¦ç¡®è®¤ã€‚å¦‚æœç¡®è®¤æ— è¯¯ï¼Œä½ å¯ä»¥è¾“å…¥ O æˆ–ç›´æ¥æŒ‰å›è½¦é”®ã€‚\nè¾“å…¥ä¿æŠ¤å¯†è¯­ï¼ˆpassphraseï¼‰ï¼š ä½ å°†è¢«è¦æ±‚è¾“å…¥ä¿æŠ¤å¯†è¯­ï¼Œç”¨äºä¿æŠ¤ä½ çš„ç§é’¥ã€‚è¯·ç¡®ä¿é€‰æ‹©ä¸€ä¸ªå¼ºå¯†ç ã€‚\nç­‰å¾…å¯†é’¥ç”Ÿæˆï¼š GPG å°†ä½¿ç”¨æä¾›çš„ä¿¡æ¯ç”Ÿæˆå¯†é’¥å¯¹ã€‚è¿™å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œå…·ä½“å–å†³äºä½ é€‰æ‹©çš„å¯†é’¥å¤§å°ã€‚\nç”Ÿæˆå®Œæˆï¼š ä¸€æ—¦ç”Ÿæˆå®Œæˆï¼Œä½ å°†çœ‹åˆ°ä¸€æ¡æ¶ˆæ¯è¡¨æ˜å¯†é’¥ç”ŸæˆæˆåŠŸã€‚\nåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å°†çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ä¸€äº›æç¤ºï¼š\ngpg: key ABCDEFGH marked as ultimately trusted gpg: revocation certificate stored as \u0026#39;/home/your_user/.gnupg/openpgp-revocs.d/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.rev\u0026#39; public and secret key created and signed. gpg: checking the trustdb gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model gpg: depth: 0 valid: 2 signed: 0 trust: 0-, 0q, 0n, 0m, 0f, 2u pub 2048R/XXXXXXXX 2024-01-01 [expires: 2024-01-01] Key fingerprint = XXXX YYYY ZZZZ AAAA BBBB CCCC DDDD EEEE FFFF 1111 uid Your Name \u0026lt;your.email@example.com\u0026gt; sub 2048R/YYYYYYYY 2024-01-01 [expires: 2024-01-01] åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒXXXXXXXX æ˜¯ä½ çš„å¯†é’¥ IDï¼ŒYYYYYYYY æ˜¯å­å¯†é’¥çš„ IDã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™äº› ID æ¥å¼•ç”¨ä½ çš„å¯†é’¥ã€‚\nå¯¼å‡ºå…¬é’¥ï¼š ç”Ÿæˆå¯†é’¥åï¼Œä½ éœ€è¦å°†å…¬é’¥å¯¼å‡ºã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\ngpg --output RPM-GPG-KEY-your-repo --armor --export your@email.com è¿™å°†ç”Ÿæˆä¸€ä¸ª ASCII æ ¼å¼çš„å…¬é’¥æ–‡ä»¶ RPM-GPG-KEY-your-repoï¼Œä½ å¯ä»¥ä¸è½¯ä»¶åŒ…ä¸€èµ·å‘å¸ƒã€‚\nä¸º RPM åŒ…ç­¾åï¼š åœ¨æ„å»º RPM åŒ…æ—¶ï¼Œä½¿ç”¨ rpmbuild å‘½ä»¤æ—¶ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  --sign é€‰é¡¹æ¥æŒ‡ç¤º rpmbuild å¯¹ RPM åŒ…è¿›è¡Œç­¾åã€‚ä¾‹å¦‚ï¼š\nrpmbuild -ba your-package.spec --sign å½“ä½ æ‰§è¡Œ rpmbuild -ba your-package.spec --sign å‘½ä»¤æ—¶ï¼Œrpmbuild ä¼šä½¿ç”¨é»˜è®¤çš„ GPG å¯†é’¥è¿›è¡Œç­¾åã€‚è¿™é€šå¸¸æ˜¯ä½ åœ¨ç³»ç»Ÿä¸Šé…ç½®ä¸ºé»˜è®¤ GPG å¯†é’¥çš„å¯†é’¥ã€‚\nä½ å¯ä»¥é€šè¿‡æ£€æŸ¥ rpmbuild ä½¿ç”¨çš„ GPG å¯†é’¥æ¥ç¡®è®¤å®ƒæ˜¯å“ªä¸ªå¯†é’¥ï¼š\nrpm -q gpg-pubkey --qf \u0026#39;%{name}-%{version}-%{release} --\u0026gt; %{summary}\\n\u0026#39; è¿™ä¸ªå‘½ä»¤å°†æ˜¾ç¤ºç³»ç»Ÿä¸Šå®‰è£…çš„ GPG å…¬é’¥ï¼Œå…¶ä¸­é»˜è®¤çš„å¯†é’¥å¯èƒ½æ˜¯ \u0026ldquo;gpg-pubkey-xxxxxxxx-yyyyyyyy\u0026rdquo;ã€‚ä½ å¯ä»¥æ ¹æ®å¯†é’¥çš„ \u0026ldquo;xxxxxxxx-yyyyyyyy\u0026rdquo; éƒ¨åˆ†æ¥ç¡®å®šé»˜è®¤ä½¿ç”¨çš„ GPG å¯†é’¥ã€‚\nå¦‚æœä½ æƒ³ä½¿ç”¨ä¸åŒçš„ GPG å¯†é’¥è¿›è¡Œç­¾åï¼Œå¯ä»¥åœ¨ rpmbuild å‘½ä»¤ä¸­ä½¿ç”¨ --signwith é€‰é¡¹ï¼Œä¾‹å¦‚ï¼š\nrpmbuild -ba your-package.spec --signwith \u0026lt;key-id\u0026gt; å…¶ä¸­ \u0026lt;key-id\u0026gt; æ˜¯ä½ æƒ³è¦ä½¿ç”¨çš„ GPG å¯†é’¥çš„ IDã€‚è¿™ä¼šè¦†ç›–é»˜è®¤çš„å¯†é’¥ã€‚ç¡®ä¿ä½ åœ¨æ„å»ºå’Œç­¾å RPM åŒ…æ—¶ä½¿ç”¨çš„æ˜¯æ­£ç¡®çš„ GPG å¯†é’¥ã€‚\nå¯¼å…¥å¯†é’¥ï¼š ä¸ºäº†éªŒè¯ä½ çš„è½¯ä»¶åŒ…ï¼Œç”¨æˆ·éœ€è¦å¯¼å…¥ä½ çš„å…¬é’¥ã€‚ä»–ä»¬å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nrpm --import RPM-GPG-KEY-your-repo å‘å¸ƒï¼š å°†ç­¾åçš„ RPM åŒ…å’Œå…¬é’¥ä¸€èµ·å‘å¸ƒã€‚ç¡®ä¿ç”¨æˆ·çŸ¥é“ä»–ä»¬å¯ä»¥ä½¿ç”¨å¯¼å…¥çš„å…¬é’¥æ¥éªŒè¯è½¯ä»¶åŒ…çš„ç­¾åã€‚\n","permalink":"https://lifeislife.cn/posts/repo%E6%BA%90%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/","summary":"\u003ch1 id=\"repo-æºé…ç½®è§£æ\"\u003erepo æºé…ç½®è§£æ\u003c/h1\u003e\n\u003cp\u003eopenEuler çš„è½¯ä»¶æºé…ç½®æ–‡ä»¶ä½äº/etc/yum.repos.d/ç›®å½•ä¸‹ï¼Œä»¥.repo ä¸ºåç¼€åï¼Œæ–‡ä»¶åå¯ä»¥ä»»æ„å–ï¼Œä½†æ˜¯å¿…é¡»ä»¥.repo ç»“å°¾ã€‚\u003c/p\u003e","title":"repoæºé…ç½®è§£æ"},{"content":"åˆå­¦ Linux å†…æ ¸æˆ–è€…ç¬¬ä¸€æ¬¡ç¼–è¯‘ä½¿ç”¨å†…æ ¸æ¨¡å—æ—¶ç»å¸¸ä¼šé‡åˆ°ç±»ä¼¼è¿™æ ·çš„é”™è¯¯ï¼š\ninsmod: ERROR: could not insert module kvm.ko: Invalid module format è¿™ä¸ªæŠ¥é”™é€šå¸¸ç”±äºå½“å‰æ’å…¥kvm.koçš„version magicç‰ˆæœ¬ä¿¡æ¯ä¸æ­£åœ¨è¿è¡Œçš„ kernel çš„version magicç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚\nå†…æ ¸æ ¡éªŒæ¨¡å—çš„æµç¨‹ æˆ‘ä»¬ä»é—®é¢˜å‡ºå‘ï¼Œçœ‹çœ‹å†…æ ¸æ˜¯å¦‚ä½•æ ¡éªŒæ¨¡å—çš„ã€‚æœç´¢äº†å†…æ ¸æºç ï¼Œæ‰¾åˆ°äº†åœ¨å‡½æ•°check_versionä¸­æŠ›å‡ºäº†disagrees about version of symbolé”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬æ ¹æ®æºç æ¥å›æº¯ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ã€‚\n// kernel/module.c static int check_version(const struct load_info *info, const char *symname, struct module *mod, const s32 *crc) { Elf_Shdr *sechdrs = info-\u0026gt;sechdrs; unsigned int versindex = info-\u0026gt;index.vers; unsigned int i, num_versions; struct modversion_info *versions; /* Exporting module didn\u0026#39;t supply crcs? OK, we\u0026#39;re already tainted. */ if (!crc) return 1; /* No versions at all? modprobe --force does this. */ if (versindex == 0) return try_to_force_load(mod, symname) == 0; versions = (void *) sechdrs[versindex].sh_addr; num_versions = sechdrs[versindex].sh_size / sizeof(struct modversion_info); for (i = 0; i \u0026lt; num_versions; i++) { u32 crcval; if (strcmp(versions[i].name, symname) != 0) continue; if (IS_ENABLED(CONFIG_MODULE_REL_CRCS)) crcval = resolve_rel_crc(crc); else crcval = *crc; if (versions[i].crc == crcval) return 1; pr_debug(\u0026#34;Found checksum %X vs module %lX\\n\u0026#34;, crcval, versions[i].crc); goto bad_version; } /* Broken toolchain. Warn once, then let it go.. */ pr_warn_once(\u0026#34;%s: no symbol version for %s\\n\u0026#34;, info-\u0026gt;name, symname); return 1; bad_version: pr_warn(\u0026#34;%s: disagrees about version of symbol %s\\n\u0026#34;, info-\u0026gt;name, symname); return 0; } å‚æ•°è¯´æ˜ï¼š\ninfo: åŒ…å«æ­£åœ¨åŠ è½½ä¿¡æ¯çš„ç»“æ„ä½“ã€‚ symname: éœ€è¦æŸ¥æ‰¾å¯¹æ¯”çš„ç¬¦å·çš„åç§°ã€‚ mod: è¡¨ç¤ºæ¨¡å—çš„ç»“æ„ä½“ã€‚ crc: å½“å‰æ­£åœ¨è¿è¡Œçš„å†…æ ¸çš„æ¨¡å—ç¬¦å·çš„ CRCï¼ˆCyclic Redundancy Checkï¼‰å€¼ å¦‚æœ CRC ä¸ºç©ºï¼Œä¸æ£€æŸ¥ç›´æ¥ PASS å¦‚æœæ¨¡å—ä¸­æ²¡æœ‰_versions å°èŠ‚ï¼Œè¡¨ç¤ºæ¨¡å—æ²¡æœ‰å¼€å¯ CRC å¦‚æœå¼€å¯äº† CONFIG_MODULE_FORCE_LOADï¼Œåˆ™å¼ºåˆ¶åŠ è½½ï¼Œå†…æ ¸æ ‡è®°ä¸º taintedï¼Œç›´æ¥ PASS å¦‚æœæ²¡æœ‰å¼€å¯ CONFIG_MODULE_FORCE_LOADï¼Œåˆ™æŠ¥é”™ å¦‚æœæ¨¡å—ä¸­æœ‰_versions å°èŠ‚ï¼Œæ²¡æœ‰æ‰¾åˆ° module_layout ç¬¦å·ï¼ŒæŠ¥ warningï¼Œç›´æ¥ PASS å¦‚æœæ¨¡å—ä¸­æœ‰_versions å°èŠ‚ï¼Œæ‰¾åˆ° module_layout ç¬¦å· å¯¹æ¯”_versions å°èŠ‚ä¸­çš„ CRC å’Œå‚æ•°ä¸­çš„ CRCï¼Œå¦‚æœä¸€è‡´ï¼ŒPASS å¦‚æœä¸ä¸€è‡´ï¼ŒæŠ¥é”™ æ’æ’­ä¸€å¥ï¼ŒCRCæ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Linux å†…æ ¸ä¸­ï¼Œæ¨¡å—ç¬¦å· CRCï¼ˆCyclic Redundancy Checkï¼‰æ˜¯ä¸€ç§æ ¡éªŒå€¼ï¼Œç”¨äºç¡®ä¿æ¨¡å—ä¸­çš„ç¬¦å·ï¼ˆå‡½æ•°ã€å˜é‡ç­‰ï¼‰åœ¨åŠ è½½æ—¶ä¸å†…æ ¸ä¸­çš„ç¬¦å·ä¸€è‡´ã€‚å½“æ¨¡å—è¢«æ„å»ºæ—¶ï¼Œé’ˆå¯¹æ¯ä¸ªç¬¦å·éƒ½ä¼šè®¡ç®—ä¸€ä¸ª CRC å€¼ï¼Œç„¶åå°†è¿™äº› CRC å€¼ä¿å­˜åœ¨æ¨¡å—çš„ç¬¦å·ç‰ˆæœ¬è¡¨ä¸­ã€‚ç®€å•ç†è§£å°±æ˜¯å¦‚æœè¦ä¿æŒCRCä¸å˜ï¼Œéœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š\nè¯­æ³•ä¿æŒä¸å˜ éµå®ˆè¿™ä¸ªæ¡ä»¶ï¼Œè¯´æ˜å¦‚æœæ¨¡å—åœ¨æ–°å†…æ ¸ä¸‹é‡æ–°ç¼–è¯‘ï¼Œé‚£åº”è¯¥æ²¡æœ‰ä»»ä½•è¯­æ³•é—®é¢˜ã€‚ å³å¯¼å‡ºç¬¦å·çš„ç±»å‹åæ²¡æœ‰å˜åŒ–ï¼Œå¦‚æœæ˜¯å‡½æ•°ï¼Œåˆ™è¦æ±‚å‚æ•°å’Œè¿”å›å€¼ç±»å‹æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼›å¦‚æœè¿™äº›ç±»å‹æ˜¯ç»“æ„ä½“çš„è¯ï¼Œç»“æ„ä½“çš„æˆå‘˜åä¹Ÿæ²¡æœ‰æœ‰ä»»ä½•å˜åŒ–ã€‚ è¯­ä¹‰ä¿æŒä¸å˜ è¿™è¦æ±‚ç¬¦å·çš„ç±»å‹ä¸èƒ½æœ‰å˜åŒ–ï¼Œå¦‚æœç±»å‹æœ¬èº«æ˜¯ç»“æ„ä½“(struct)ï¼Œåˆ™å®ƒæˆå‘˜çš„ç±»å‹ä¸èƒ½æœ‰å˜åŒ–ï¼Œæˆå‘˜åœ¨ç»“æ„ä½“å†…çš„ä½ç½®ä¸èƒ½æœ‰å˜åŒ–ï¼Œä»¥åŠæˆå‘˜æœ¬èº«ä¸èƒ½å¢åˆ ã€‚ å¦‚æœæƒ³è¦æ·±å…¥äº†è§£å¦‚ä½•è®¡ç®—CRCå¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ï¼šLinuxå†…æ ¸æ¨¡å—ç¬¦å·CRCæ£€æŸ¥æœºåˆ¶-CSDNåšå®¢ åˆ†æä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå†…æ ¸ä¼šé€šè¿‡éå†æ­£åœ¨åŠ è½½çš„æ¨¡å—çš„ç‰ˆæœ¬ä¿¡æ¯çš„æ•°ç»„versionsï¼Œä»ä¸­æŸ¥æ‰¾ä¸ç»™å®šç¬¦å·åç§°åŒ¹é…çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™è®¡ç®— CRC å€¼ï¼Œä¸å‚æ•°ä¸­çš„ CRC å€¼è¿›è¡Œæ¯”è¾ƒã€‚ï¼ˆé€šè¿‡åç»­åˆ†ææˆ‘ä»¬çŸ¥é“å‚æ•°çš„ CRC å°±æ˜¯æ­£åœ¨è¿è¡Œçš„å†…æ ¸çš„ module_layout ç¬¦å·çš„ CRCï¼‰å¦‚æœåŒ¹é…ï¼Œè¡¨ç¤ºç‰ˆæœ¬ä¸€è‡´ï¼Œè¿”å› 1ã€‚å¦‚æœä¸åŒ¹é…ï¼Œæ‰“å°è°ƒè¯•ä¿¡æ¯ï¼Œå¹¶è·³è½¬åˆ° bad_versionï¼Œè¾“å‡ºè­¦å‘Šä¿¡æ¯ã€‚\nè¿™é‡Œæœ‰ä¸¤ä¸ªç–‘é—®ï¼Œ\nversions å†…å®¹æ˜¯æ€ä¹ˆé“¾æ¥åˆ°æ¨¡å—çš„ elf æ–‡ä»¶ä¸­çš„ï¼Ÿ æˆ‘ä»¬æ‰¾åˆ°æ¨¡å—çš„mod.cæ–‡ä»¶ï¼Œæ‰“å¼€å¯ä»¥å‘ç°ä»¥ä¸‹å†…å®¹ï¼š\nMODULE_INFO(vermagic, VERMAGIC_STRING); MODULE_INFO(name, KBUILD_MODNAME); __visible struct module __this_module __section(.gnu.linkonce.this_module) = { .name = KBUILD_MODNAME, .init = init_module, #ifdef CONFIG_MODULE_UNLOAD .exit = cleanup_module, #endif .arch = MODULE_ARCH_INIT, }; #ifdef CONFIG_RETPOLINE MODULE_INFO(retpoline, \u0026#34;Y\u0026#34;); #endif static const struct modversion_info ____versions[] __used __section(__versions) = { { 0x3e549f1d, \u0026#34;module_layout\u0026#34; }, { 0x5138e6ba, \u0026#34;param_ops_int\u0026#34; }, { 0x183b57f9, \u0026#34;phy_ethtool_nway_reset\u0026#34; }, { 0x6e5363eb, \u0026#34;eth_validate_addr\u0026#34; }, { 0x4df55e5b, \u0026#34;usb_deregister\u0026#34; }, { 0x8e48f69b, \u0026#34;usb_register_driver\u0026#34; }, } è¿™ä¸ªæ–‡ä»¶æ˜¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è°ƒç”¨äº†scripts/modpostè„šæœ¬ç”Ÿæˆçš„ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯åœ¨é‡Œé¢å¢åŠ äº† 2 ä¸ª__sectionï¼Œ.gnu.linkonce.this_moduleå’Œ__versionsã€‚__versions å°èŠ‚çš„å†…å®¹å°±æ˜¯ä¸€äº›å­—ç¬¦ä¸²å’Œå€¼ç»„æˆçš„æ•°ç»„ï¼Œcheck_versionå°±æ˜¯è§£æè¿™ä¸ªå°èŠ‚å»åšéªŒè¯ã€‚\nCRC å€¼å“ªæ¥çš„ï¼Ÿ æˆ‘ä»¬ç»§ç»­å‘ä¸Šè·Ÿè¸ªï¼Œæ‰¾åˆ°å‡½æ•°check_modstruct_versionï¼Œå…¶ä¸­find_symbolä¼šåœ¨å†…æ ¸ç¬¦å·è¡¨ä¸­æŸ¥æ‰¾ç»™å®šç¬¦å·åç§°çš„ç¬¦å·ä¿¡æ¯ï¼Œæ¥ç€è°ƒç”¨check_versionå‡½æ•°ï¼Œä¼ å…¥ç¬¦å·åç§°ã€æ¨¡å—ç»“æ„ä½“å’Œ CRC å€¼ï¼Œè¿›è¡Œç‰ˆæœ¬åŒ¹é…ã€‚\n// kernel/module.c static inline int check_modstruct_version(const struct load_info *info, struct module *mod) { const s32 *crc; /* * Since this should be found in kernel (which can\u0026#39;t be removed), no * locking is necessary -- use preempt_disable() to placate lockdep. */ preempt_disable(); if (!find_symbol(\u0026#34;module_layout\u0026#34;, NULL, \u0026amp;crc, true, false)) { preempt_enable(); BUG(); } preempt_enable(); return check_version(info, \u0026#34;module_layout\u0026#34;, mod, crc); } // è·å–å½“å‰è¿è¡Œå†…æ ¸ module_layout å‡½æ•°çš„ crc å€¼ find_symbol(\u0026#34;module_layout\u0026#34;, NULL, \u0026amp;crc, true, false) each_symbol_section(find_exported_symbol_in_section, \u0026amp;fsa) // éå†å†…æ ¸ä¸‰ä¸ªå¯¼å‡ºç¬¦å·è¡¨æ®µ__start___ksymtabï¼Œ__start___ksymtab_gpl å’Œ__start___ksymtab_gpl_futureï¼Œä¸ºæ¯æ®µè°ƒç”¨ find_symbol_in_section each_symbol_in_section(arr, ARRAY_SIZE(arr), NULL, fn, data) // éå†å†…æ ¸æ¯ä¸ªå·²åŠ è½½æ¨¡å—çš„ä¸‰ä¸ªå¯¼å‡ºç¬¦å·è¡¨æ®µ mod-\u0026gt;syms,mod-\u0026gt;gpl_syms,mod-\u0026gt;gpl_future_symsï¼Œä¸ºæ¯æ®µè°ƒç”¨ find_symbol_in_section each_symbol_in_section(arr, ARRAY_SIZE(arr), mod, fn, data) // å¯¹å¯¼å‡ºç¬¦å·è¡¨è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼ŒæŒ‰ç…§å­—ç¬¦ä¸²æ’åºï¼Œç¬¦å·è¡¨çš„åœ°å€æŒ‰ç…§åœ°å€æ’åº find_exported_symbol_in_section(const struct symsearch *syms,struct module *owner,void *data) Linux å¯¹å¯è£…è½½æ¨¡å—é‡‡å–äº†ä¸¤å±‚éªŒè¯ï¼šé™¤äº†ä¸Šè¿°çš„æ¨¡å— CRC å€¼æ ¡éªŒå¤–è¿˜æœ‰ vermagic çš„æ£€æŸ¥ã€‚æ¨¡å— vermagicï¼ˆå³ Version Magic Stringï¼‰ä¿å­˜äº†æ¨¡å—ç¼–è¯‘æ—¶çš„å†…æ ¸ç‰ˆæœ¬ä»¥åŠ SMP ç­‰é…ç½®ä¿¡æ¯ï¼Œå½“æ¨¡å— vermagic ä¸ä¸»æœºä¿¡æ¯ä¸ç›¸ç¬¦æ—¶ä¹Ÿæ— æ³•åŠ è½½æ¨¡å—ã€‚\nåœ¨å†…æ ¸ä¸­load_moduleå‡½æ•°è°ƒç”¨check_modstruct_versionå‡½æ•°å®Œæˆ CRC æ ¡éªŒåï¼Œå°±ä¼šç»§ç»­è°ƒç”¨layout_and_allocate --\u0026gt; check_modinfo å®Œæˆ vermagic æ ¡éªŒã€‚\n// kernel/module.c static int check_modinfo(struct module *mod, struct load_info *info, int flags) { const char *modmagic = get_modinfo(info, \u0026#34;vermagic\u0026#34;); int err; if (flags \u0026amp; MODULE_INIT_IGNORE_VERMAGIC) modmagic = NULL; /* This is allowed: modprobe --force will invalidate it. */ if (!modmagic) { err = try_to_force_load(mod, \u0026#34;bad vermagic\u0026#34;); if (err) return err; } else if (!same_magic(modmagic, vermagic, info-\u0026gt;index.vers)) { pr_err(\u0026#34;%s: version magic \u0026#39;%s\u0026#39; should be \u0026#39;%s\u0026#39;\\n\u0026#34;, info-\u0026gt;name, modmagic, vermagic); return -ENOEXEC; } ... return 0; } get_modinfo ä¼šè·å–å†…æ ¸ä¸­çš„ vermagic ä¿¡æ¯ï¼Œæ¨¡å— vermagic ä¿¡æ¯åˆ™è¢«ä¿å­˜åœ¨äº† ELF çš„ .modinfo å°èŠ‚ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬è¯´çš„ vermagic å°±æ˜¯ä¸‹æ–‡æåˆ°çš„æ‹“å±•ç‰ˆæœ¬ä¿¡æ¯ï¼Œå®ƒå°±æ˜¯ç³»ç»Ÿé…ç½®ä¿¡æ¯ç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\nå¦‚ä½•è§£å†³æ¨¡å—æ ¡éªŒé”™è¯¯ Linux å¯¹å¯è£…è½½æ¨¡å—é‡‡å–äº†ä¸¤å±‚éªŒè¯ï¼Œæˆ‘ä»¬éœ€è¦åˆ†åˆ«ä» CRC å’Œ vermagic ä¸¤ä¸ªæ–¹é¢æ¥è§£å†³æ¨¡å—æ ¡éªŒé”™è¯¯ã€‚é¦–å…ˆä»ç®€å•çš„ vermagic æ ¡éªŒå¼€å§‹ã€‚æˆ‘ä»¬éœ€è¦ä¿è¯è¿è¡Œçš„å†…æ ¸ç‰ˆæœ¬ä¸æ¨¡å—ç¼–è¯‘æ—¶çš„å†…æ ¸ç‰ˆæœ¬ä¸€è‡´ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯ vermagic æ ¡éªŒé€šè¿‡ã€‚é¦–å…ˆäº†è§£å¦‚ä½•æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ä»¥åŠæ¨¡å—ç‰ˆæœ¬ä¿¡æ¯ï¼Œç„¶åä¿®æ”¹å†…æ ¸æ¨¡å—ç‰ˆæœ¬ä¿¡æ¯ã€‚\nè§£å†³ vermagic æ ¡éªŒé”™è¯¯ å¦‚ä½•æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ä»¥åŠæ¨¡å—ç‰ˆæœ¬ä¿¡æ¯ unameå‚æ•°åŠŸèƒ½ï¼š\n-s, è¾“å‡º kernel åç§°ï¼› -n, è¾“å‡ºä¸»æœºåï¼› -r, è¾“å‡º kernel å‘è¡Œç‰ˆæœ¬å·ï¼› -v, è¾“å‡ºæ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼› -m, è¾“å‡ºä¸»æœºçš„ç¡¬ä»¶æ¶æ„åç§°ï¼› -p, è¾“å‡ºå¤„ç†å™¨ç±»å‹ï¼› -i, è¾“å‡ºç¡¬ä»¶å¹³å°ï¼› -o, è¾“å‡ºæ“ä½œç³»ç»Ÿåç§° -a, è¾“å‡ºæ‰€æœ‰ä¿¡æ¯ # è¾“å‡ºkernelå‘è¡Œç‰ˆæœ¬å· uname -r 6.4.0-10.1.0.20.oe2309.riscv64 # è¾“å‡ºæ‰€æœ‰ä¿¡æ¯ uname -a Linux openeuler 6.4.0-10.1.0.20.oe2309.riscv64 #1 SMP Sat Oct 7 06:19:28 UTC 2023 riscv64 riscv64 riscv64 GNU/Linux modinfo å¯ä»¥æŸ¥çœ‹æ¨¡å—ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¨¡å—vermagicä¿¡æ¯ã€‚\nmodinfo kvm.ko filename: /root/build-kernel/kernel/./arch/riscv/kvm/kvm.ko license: GPL author: Qumranet srcversion: 5DA13DC0E55100B5FE1D56A depends: intree: Y name: kvm vermagic: 6.4.0 SMP mod_unload modversions riscv parm: halt_poll_ns:uint parm: halt_poll_ns_grow:uint parm: halt_poll_ns_grow_start:uint parm: halt_poll_ns_shrink:uint å…¶ä¸­vermagicå°±æ˜¯version magicç‰ˆæœ¬ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰kvm.koçš„version magicç‰ˆæœ¬ä¿¡æ¯ä¸º6.4.0ã€‚ä¸å‰æ–‡çš„uname -rè¾“å‡ºçš„ kernel å‘è¡Œç‰ˆæœ¬å·6.4.0-10.1.0.20.oe2309.riscv64ä¸ä¸€è‡´ã€‚æ‰€ä»¥ä¼šæŠ¥é”™ã€‚\nä¿®æ”¹å†…æ ¸æ¨¡å—ç‰ˆæœ¬ä¿¡æ¯ ä¿®æ”¹åŸºç¡€ç‰ˆæœ¬ä¿¡æ¯ æ‰“å¼€å†…æ ¸æºä»£ç æ ¹ç›®å½•ä¸‹çš„ Makefile æ–‡ä»¶ã€‚ä½ ä¼šæ‰¾åˆ°ä¸€ä¸ªåŒ…å«å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯çš„åœ°æ–¹ï¼Œç±»ä¼¼äºï¼š\n# SPDX-License-Identifier: GPL-2.0 VERSION = 6 PATCHLEVEL = 4 SUBLEVEL = 0 EXTRAVERSION = è¡¨ç¤ºå†…æ ¸ç‰ˆåŸºç¡€æœ¬å·ä¸º6.4.0ã€‚\nä¿®æ”¹æ‹“å±•ç‰ˆæœ¬ä¿¡æ¯ kernel å¼•å…¥äº†ä¸€äº›é…ç½®æ¥å¢å¼ºç‰ˆæœ¬ä¿¡æ¯ï¼Œåœ¨å†…æ ¸æºç çš„\u0026quot;include/linux/vermagic.h\u0026quot;ä¸‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¨¡å—çš„å¥å…¨ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¦‚ä¸‹é»˜è®¤é…ç½®çš„æœ‰ï¼š\n/* Simply sanity version stamp for modules. */ #ifdef CONFIG_SMP #define MODULE_VERMAGIC_SMP \u0026#34;SMP \u0026#34; #else #define MODULE_VERMAGIC_SMP \u0026#34;\u0026#34; #endif #ifdef CONFIG_PREEMPT_BUILD #define MODULE_VERMAGIC_PREEMPT \u0026#34;preempt \u0026#34; #elif defined(CONFIG_PREEMPT_RT) #define MODULE_VERMAGIC_PREEMPT \u0026#34;preempt_rt \u0026#34; #else #define MODULE_VERMAGIC_PREEMPT \u0026#34;\u0026#34; #endif #ifdef CONFIG_MODULE_UNLOAD #define MODULE_VERMAGIC_MODULE_UNLOAD \u0026#34;mod_unload \u0026#34; #else #define MODULE_VERMAGIC_MODULE_UNLOAD \u0026#34;\u0026#34; #endif #ifdef CONFIG_MODVERSIONS #define MODULE_VERMAGIC_MODVERSIONS \u0026#34;modversions \u0026#34; #else #define MODULE_VERMAGIC_MODVERSIONS \u0026#34;\u0026#34; #endif #ifdef RANDSTRUCT #include \u0026lt;generated/randstruct_hash.h\u0026gt; #define MODULE_RANDSTRUCT \u0026#34;RANDSTRUCT_\u0026#34; RANDSTRUCT_HASHED_SEED #else #define MODULE_RANDSTRUCT #endif #define VERMAGIC_STRING \\ UTS_RELEASE \u0026#34; \u0026#34; \\ MODULE_VERMAGIC_SMP MODULE_VERMAGIC_PREEMPT \\ MODULE_VERMAGIC_MODULE_UNLOAD MODULE_VERMAGIC_MODVERSIONS \\ MODULE_ARCH_VERMAGIC \\ MODULE_RANDSTRUCT å…¶ä¸­ï¼Œ\u0026quot;UTS_RELEASE\u0026quot;çš„é…ç½®åœ¨å†…æ ¸æºç çš„\u0026quot;include/generated/utsrelease.h\u0026quot;ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œutsrelease.hçš„å†…å®¹æ˜¯ç”±Makefileå’Œ``.configçš„å†…å®¹æ¥ç”Ÿæˆçš„ï¼Œå½“æˆåŠŸç¼–è¯‘kernelä»¥åï¼Œutsrelease.h`å¾—åˆ°æ›´æ–°ï¼Œ\n#defineUTS_RELEASE \u0026#34;6.4.0\u0026#34; é‚£ä¹ˆå‰æ–‡\u0026quot;6.4.0-d46299ae\u0026quot;ä¸­çš„\u0026quot;-d46299ae\u0026quot;æ˜¯å¦‚ä½•å¾—æ¥çš„å‘¢ï¼Ÿå…¶å®è¿™ä¸ªæ˜¯å¼€å‘è€…ä½¿ç”¨äº† Git æ¥ç®¡ç†ä»£ç ã€‚å½“ä½ ä¿®æ”¹æˆ–è€…æäº¤ä»£ç ä»¥åï¼Œæ¯æ¬¡ç¼–è¯‘å†…æ ¸åï¼Œåœ¨\u0026quot;UTS_RELEASE\u0026quot;åé¢å°±ä¼šçœ‹åˆ°ä¸€ä¸²å“ˆå¸Œå€¼ï¼Œä¾‹å¦‚\u0026quot;6.4.0-d46299ae\u0026quot;ï¼Œå…¶ä¸­\u0026quot;-d46299ae\u0026quot;è¿™ä¸ªå°±æ˜¯ Git ç‰ˆæœ¬æ§åˆ¶è€Œäº§ç”Ÿçš„å“ˆå¸Œå€¼ã€‚å‘è¡Œç‰ˆæœ¬å·åªæ˜¯å„ä¸ªå‚å•†ç”¨äºåŒºåˆ«è‡ªå·±å‘å¸ƒçš„ä¸åŒæ—¶æœŸçš„ kernel ç‰ˆæœ¬æˆ–è€…äº§å“ç‰ˆæœ¬è€Œäº§ç”Ÿçš„ç¼–å·ï¼Œå®Œå…¨ç”±å„å‚å•†è‡ªå·±å®šä¹‰ã€‚\nè§£å†³ CRC æ ¡éªŒé”™è¯¯ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µä¿®æ”¹æ–°æ¨¡å—çš„ module_layout çš„ CRC ä¸å†…æ ¸CRCç›¸åŒï¼Œå†æ’å…¥ã€‚/bootç›®å½•ä¸‹é€šå¸¸æœ‰ä¸ªåœ¨symvers-\u0026lt;kernel_version\u0026gt;.gz æ–‡ä»¶é€šå¸¸åŒ…å«äº†å†…æ ¸æ¨¡å—çš„ç¬¦å·ç‰ˆæœ¬ä¿¡æ¯ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯ç”± Linux å†…æ ¸æ„å»ºæ—¶ç”Ÿæˆçš„ï¼Œç”¨äºè®°å½•åœ¨è¯¥å†…æ ¸ç‰ˆæœ¬ä¸‹æ„å»ºçš„æ¨¡å—çš„ç¬¦å·ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‡½æ•°å’Œå˜é‡çš„åç§°ã€ç‰ˆæœ¬å·ç­‰ã€‚é‡Œé¢å°±ä¿å­˜äº†å†…æ ¸çš„ module_layout çš„ CRC å€¼ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨gzip -då‘½ä»¤è§£å‹è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ° module_layout çš„ CRC å€¼ï¼Œè®°å½•ä¸‹æ¥ã€‚\næ–¹æ³•ä¸€ï¼šä½¿ç”¨ 16 è¿›åˆ¶ç¼–è¾‘å™¨ä¿®æ”¹æ¨¡å—æ–‡ä»¶ï¼Œå°† module_layout çš„å€¼ä¿®æ”¹ä¸ºç›¸åŒçš„å€¼ï¼Œå†æ’å…¥ã€‚ åœ¨ Linux ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ hexdump å’Œ xxd ç­‰å·¥å…·æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶å°è¯•ç¼–è¾‘ã€‚ä¸‹é¢æ˜¯ä¸€ç§ä½¿ç”¨ xxd æŸ¥çœ‹å’Œä¿®æ”¹äºŒè¿›åˆ¶æ–‡ä»¶çš„æ–¹æ³•ï¼š\nä½¿ç”¨ xxd å°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬æ¢ä¸ºåå…­è¿›åˆ¶æ–‡æœ¬ï¼š\nxxd /usr/src/linux-6.4.0-10.1.0.20.oe2309.riscv64/arch/riscv/kvm/kvm.ko \u0026gt; kvm_hex.txt è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º kvm_hex.txt çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å« kvm.ko çš„åå…­è¿›åˆ¶è¡¨ç¤ºã€‚\nä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚ nano æˆ– vimï¼‰æ‰“å¼€ kvm_hex.txtï¼Œæ‰¾åˆ°å¹¶ç¼–è¾‘ module_layout çš„å€¼ã€‚è¯·ç¡®ä¿ä½ äº†è§£æ‰€åšæ›´æ”¹çš„å«ä¹‰ï¼Œå¹¶ä¸”åªä¿®æ”¹ä½ ç¡®ä¿¡çš„å†…å®¹ã€‚\nä¿å­˜å¹¶å…³é—­æ–‡æœ¬ç¼–è¾‘å™¨ã€‚\nä½¿ç”¨ xxd å°†ä¿®æ”¹åçš„åå…­è¿›åˆ¶æ–‡æœ¬è½¬æ¢å›äºŒè¿›åˆ¶æ–‡ä»¶ï¼š\nxxd -r kvm_hex.txt \u0026gt; /usr/src/linux-6.4.0-10.1.0.20.oe2309.riscv64/arch/riscv/kvm/kvm.ko è¿™å°†è¦†ç›–åŸå§‹çš„ kvm.ko æ–‡ä»¶ã€‚\næ–¹æ³•äºŒï¼šä¿®æ”¹ Module.symvers\n# æ¸…ç†ç¼–è¯‘ç»“æœã€‚ä¸è¦ä½¿ç”¨ make distcleanï¼Œè¿™ä¼šåˆ é™¤.config æ–‡ä»¶ä»¥åŠ Module.symvers æ–‡ä»¶ make clean # ä¿®æ”¹ Module.symvers æ–‡ä»¶ sed -i \u0026#39;/module_layout/ s/0x[0-9a-f][0-9a-f]*/0xdf88831e/\u0026#39; Module.symvers # é‡æ–°ç¼–è¯‘æ¨¡å— make M=./arch/riscv/kvm/ -j33 # æ£€æŸ¥æ¨¡å—çš„ module_layout modprobe --dump-modversions /usr/src/linux-6.4.0-10.1.0.20.oe2309.riscv64/arch/riscv/kvm/kvm.ko | grep module_layout 0xdf88831e å¦‚ä½•ç”Ÿæˆ .mod.c æ–‡ä»¶ å¦‚æœæ˜¯è‡ªå·±å†™çš„æ¨¡å—ï¼Œå¯ä»¥æ ¹æ®ä¸‹é¢çš„å‘½ä»¤ç¼–è¯‘æ¨¡å—ï¼Œå°±å¯ä»¥å¾—åˆ°.mod.cæ–‡ä»¶ï¼Œå®ƒæ˜¯æºæ–‡ä»¶åˆ°.mod.oæ–‡ä»¶çš„ä¸€ä¸ªä¸­é—´æ–‡ä»¶ã€‚\nmake -C /root/build-kernel/kernel M=/driver_study/ modules -j22 å¦‚æœæ˜¯ç”¨å†…æ ¸è‡ªå·±çš„æ¨¡å—ï¼Œæ‰§è¡Œmake moduleså‘½ä»¤ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°.mod.cæ–‡ä»¶ã€‚ä½†æ˜¯ä¸€èˆ¬æ‰§è¡Œmake -j22å‘½ä»¤å°±ä¸ä¼šç”Ÿæˆè¿™äº›æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾ä¸€ä¸ªå¯ç”¨çš„å†…æ ¸æ¨¡å—ï¼Œä¾‹å¦‚kvm.koï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å¾—åˆ°.mod.cæ–‡ä»¶ã€‚ä¸èƒ½éšä¾¿æ‰¾ä¸ªæ¨¡å—ï¼Œå¿…é¡»åœ¨ config ä¸­å¼€å¯çš„æ¨¡å—ï¼Œå¦åˆ™ä¼šæŠ¥é”™undefined!ã€‚\nmake M=./arch/riscv/kvm modules -j22 ","permalink":"https://lifeislife.cn/posts/linux%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E6%A0%A1%E9%AA%8C%E6%9C%BA%E5%88%B6/","summary":"\u003cp\u003eåˆå­¦ Linux å†…æ ¸æˆ–è€…ç¬¬ä¸€æ¬¡ç¼–è¯‘ä½¿ç”¨å†…æ ¸æ¨¡å—æ—¶ç»å¸¸ä¼šé‡åˆ°ç±»ä¼¼è¿™æ ·çš„é”™è¯¯ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003einsmod: ERROR: could not insert module kvm.ko: Invalid module format \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™ä¸ªæŠ¥é”™é€šå¸¸ç”±äºå½“å‰æ’å…¥\u003ccode\u003ekvm.ko\u003c/code\u003eçš„\u003ccode\u003eversion magic\u003c/code\u003eç‰ˆæœ¬ä¿¡æ¯ä¸æ­£åœ¨è¿è¡Œçš„ kernel çš„\u003ccode\u003eversion magic\u003c/code\u003eç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚\u003c/p\u003e","title":"Linuxå†…æ ¸æ¨¡å—æ ¡éªŒæœºåˆ¶"},{"content":"binfmt_misc ç®€ä»‹ binfmt_misc æ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ä¸ªæœºåˆ¶ï¼Œå®ƒå…è®¸ç”¨æˆ·ç©ºé—´å®šä¹‰æ–°çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¹¶å°†å®ƒä»¬ä¸ç›¸åº”çš„è§£é‡Šå™¨å…³è”èµ·æ¥ã€‚è¿™ä¸ªæœºåˆ¶ä½¿å¾—åœ¨ Linux ä¸Šèƒ½å¤ŸåŠ¨æ€åœ°æ³¨å†Œå¹¶è¿è¡Œä¸åŒæ¶æ„çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»è€Œæ”¯æŒäº¤å‰ç¼–è¯‘å’Œå¤šæ¶æ„ç¯å¢ƒã€‚\nå…·ä½“æ¥è¯´ï¼Œbinfmt_misc çš„åŠŸèƒ½å¯ä»¥é€šè¿‡ /proc/sys/fs/binfmt_misc/ ç›®å½•ä¸‹çš„æ–‡ä»¶ç³»ç»Ÿæ¥å£å®ç°ã€‚è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ç”¨äºæ³¨å†Œå’Œç®¡ç†äºŒè¿›åˆ¶æ ¼å¼å’Œç›¸åº”è§£é‡Šå™¨ä¹‹é—´çš„å…³è”å…³ç³»ã€‚\nä¸‹é¢æ˜¯ä¸€äº›ä¸ binfmt_misc ç›¸å…³çš„é‡è¦æ¦‚å¿µå’Œæ–‡ä»¶ï¼š\næ³¨å†Œè¡¨æ–‡ä»¶ï¼š åœ¨ /proc/sys/fs/binfmt_misc/ ç›®å½•ä¸‹ï¼Œæ¯ä¸ªæ³¨å†Œçš„äºŒè¿›åˆ¶æ ¼å¼éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æ³¨å†Œè¡¨æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶çš„å‘½åé€šå¸¸éµå¾ªæ ¼å¼ \u0026lt;æ ¼å¼åç§°\u0026gt;ï¼Œä¾‹å¦‚ qemu-riscv64ã€‚ æ³¨å†Œå’Œæ³¨é”€ï¼š ç”¨æˆ·ç©ºé—´å¯ä»¥é€šè¿‡åœ¨æ³¨å†Œè¡¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶æ¥æ³¨å†Œæ–°çš„äºŒè¿›åˆ¶æ ¼å¼ã€‚è¿™å¯ä»¥é€šè¿‡å†™å…¥æ³¨å†Œè¡¨æ–‡ä»¶çš„æ–¹å¼å®Œæˆã€‚ç›¸åï¼Œé€šè¿‡åˆ é™¤è¿™äº›æ–‡ä»¶ï¼Œå¯ä»¥æ³¨é”€äºŒè¿›åˆ¶æ ¼å¼çš„æ”¯æŒã€‚ è§£é‡Šå™¨ï¼š å¯¹äºæ¯ç§æ³¨å†Œçš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œéœ€è¦æŒ‡å®šç›¸åº”çš„è§£é‡Šå™¨ï¼Œå³ç”¨äºæ‰§è¡Œè¿™ç§æ ¼å¼çš„ç¨‹åºã€‚åœ¨æ³¨å†Œè¡¨æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ interpreter å­—æ®µæŒ‡å®šè§£é‡Šå™¨çš„è·¯å¾„ã€‚ å‚æ•°ï¼š é™¤äº†è§£é‡Šå™¨ï¼Œè¿˜å¯ä»¥ä¸ºæ¯ä¸ªæ³¨å†Œçš„æ ¼å¼æŒ‡å®šä¸€äº›å‚æ•°ã€‚è¿™äº›å‚æ•°å¯ä»¥å½±å“å¦‚ä½•è¿è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ å†…æ ¸å¦‚ä½•é€šè¿‡ binfmt_misc æœºåˆ¶æ·»åŠ æ–°æ¶æ„çš„æ”¯æŒï¼Ÿ å¯ä»¥é€šè¿‡å‘ /proc/sys/fs/binfmt_misc/register æ–‡ä»¶å†™å…¥æ³¨å†Œä¿¡æ¯æ¥æ³¨å†Œæ–°çš„äºŒè¿›åˆ¶æ ¼å¼ã€‚å‘Šè¯‰å†…æ ¸æŸä¸€æ ¼å¼çš„æ–‡ä»¶ç”¨ä»€ä¹ˆè§£é‡Šå™¨æ¥æ‰§è¡Œã€‚å†™å…¥çš„æ ¼å¼å¦‚ä¸‹ï¼š\n:name:type:offset:magic:mask:interpreter:flags å„ä¸ªå­—æ®µä»¥å†’å·åˆ†éš”ï¼Œéƒ¨åˆ†å­—æ®µå¯ä»¥ç¼ºçœï¼Œä½†æ˜¯å†’å·éœ€è¦ä¿ç•™ã€‚\nå­—æ®µå«ä¹‰å¦‚ä¸‹ï¼š\nnameï¼šäºŒè¿›åˆ¶æ ¼å¼çš„åç§°ï¼Œæ¯”å¦‚qemu-riscv64ã€‚\ntypeï¼šç±»å‹ä¸º E æˆ– Mã€‚\nå¦‚æœæ˜¯ Eï¼Œå¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ç”±å…¶æ–‡ä»¶æ‰©å±•åæ ‡è¯†ï¼šmagic æ˜¯è¦ä¸äºŒè¿›åˆ¶æ ¼å¼ç›¸å…³è”çš„æ–‡ä»¶æ‰©å±•åï¼›offset å’Œ mask å°†è¢«å¿½ç•¥ã€‚ å¦‚æœæ˜¯ Mï¼Œæ ¼å¼ç”±æ–‡ä»¶ä¸­ç»å¯¹åç§»ï¼ˆé»˜è®¤ä¸º 0ï¼‰å¤„çš„é­”æ•°æ ‡è¯†ï¼Œå¹¶ä¸” mask æ˜¯ä¸€ä¸ªä½æ©ç ï¼ˆé»˜è®¤ä¸ºå…¨ 0xFFï¼‰ï¼Œè¡¨ç¤ºæ•°å­—ä¸­å“ªäº›ä½æ˜¯æœ‰æ•ˆçš„ã€‚ interpreterï¼šæ˜¯è¦ä½œä¸ºåŒ¹é…æ–‡ä»¶çš„å‚æ•°è¿è¡Œçš„è§£é‡Šå™¨ï¼Œä½¿ç”¨è§£é‡Šå™¨çš„ç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚/usr/bin/qemu-riscv64-staticã€‚\nflagsï¼šå¯é€‰å­—æ®µï¼Œæ§åˆ¶ interpreter æ‰“å¼€æ–‡ä»¶çš„è¡Œä¸ºã€‚å…±æ”¯æŒ POCF å››ç§ flagã€‚\nP è¡¨ç¤º preserve-argv[0]ï¼Œä¿ç•™åŸå§‹çš„ argv[0] å‚æ•°ã€‚ O è¡¨ç¤º open-binaryï¼Œbinfmt-misc é»˜è®¤ä¼šä¼ é€’æ–‡ä»¶çš„è·¯å¾„ï¼Œè€Œå¯ç”¨è¿™ä¸ªå‚æ•°æ—¶ï¼Œbinfmt-misc ä¼šæ‰“å¼€æ–‡ä»¶ï¼Œä¼ é€’æ–‡ä»¶æè¿°ç¬¦ã€‚ C è¡¨ç¤º credentialsï¼Œå³ä¼šä¼ é€’æ–‡ä»¶çš„ setuid ç­‰æƒé™ï¼Œè¿™ä¸ªé€‰é¡¹ä¹Ÿéšå«äº† Oã€‚ F è¡¨ç¤º fix binaryï¼Œbinfmt-misc é»˜è®¤çš„è¡Œä¸ºåœ¨ spwan è¿›ç¨‹æ—¶ä¼šå»¶è¿Ÿï¼Œè¿™ç§æ–¹å¼å¯èƒ½ä¼šå—åˆ° mount å‘½åç©ºé—´å’Œ chroot çš„å½±å“ï¼Œè®¾ç½® F æ—¶ä¼šç«‹åˆ»æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè¦åœ¨ x86_64 æ¶æ„çš„ç³»ç»Ÿä¸Šè¿è¡Œ RISC-V æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ³¨å†Œ RISC-V äºŒè¿›åˆ¶æ ¼å¼ï¼š\né¦–å…ˆéœ€è¦æ·»åŠ è§£é‡Šå™¨ï¼Œé€šå¸¸ä½¿ç”¨ QEMU çš„é™æ€äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºè§£é‡Šå™¨ï¼Œåœ¨ Ubuntu ç³»ç»Ÿä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š\nsudo apt install qemu-user-static æ³¨å†ŒäºŒè¿›åˆ¶æ ¼å¼ï¼š\necho \u0026#39;:qemu-riscv64:M:0:7f454c460201010000000000000000000200f300::/usr/libexec/qemu-binfmt/riscv64-binfmt-P:POCF\u0026#39; \u0026gt; /proc/sys/fs/binfmt_misc/register è¡¨ç¤ºå°† RISC-V äºŒè¿›åˆ¶æ ¼å¼æ³¨å†Œåˆ° /proc/sys/fs/binfmt_misc/qemu-riscv64 æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ /usr/libexec/qemu-binfmt/riscv64-binfmt-P ä½œä¸ºè§£é‡Šå™¨ï¼ŒåŒæ—¶ä¼ é€’ POCF å‚æ•°ã€‚æ‰§è¡Œäº†ä»¥ä¸Šå‘½ä»¤ï¼Œå†…æ ¸ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª /proc/sys/fs/binfmt_misc/qemu-riscv64 æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n$ sudo cat /proc/sys/fs/binfmt_misc/qemu-riscv64 enabled interpreter /usr/libexec/qemu-binfmt/riscv64-binfmt-P flags: POCF offset 0 magic 7f454c460201010000000000000000000200f300 mask ffffffffffffff00fffffffffffffffffeffffff è¿™å°±å®Œæˆäº† RISC-V äºŒè¿›åˆ¶æ ¼å¼çš„æ³¨å†Œã€‚æ­¤æ—¶ï¼Œä½ å°±å¯ä»¥åœ¨ x86_64 æ¶æ„çš„ç³»ç»Ÿä¸Šè¿è¡Œ RISC-V æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶äº†ã€‚\nä½¿ç”¨ Docker è¿è¡Œ RISC-V çš„å®¹å™¨ï¼š\n$ docker run --rm -it devops/openeuler-builder:23.09-riscv64 uname -m riscv64 ä½¿ç”¨å°è£…å¥½çš„ç¨‹åºç®€åŒ–æ³¨å†Œè¿‡ç¨‹ ä»¥ä¸Šçš„å†™å…¥ register æ–‡ä»¶çš„æ–¹å¼æ¯”è¾ƒç¹çï¼Œå¯ä»¥ä½¿ç”¨å°è£…å¥½çš„ç¨‹åºæ¥ç®€åŒ–æ³¨å†Œè¿‡ç¨‹ã€‚\næ–¹å¼ä¸€ï¼š\nsudo apt install qemu-user-binfmt å¯ä»¥å®‰è£…æ‰€æœ‰ QEMU æ”¯æŒçš„æ¶æ„ã€‚\næ–¹å¼äºŒï¼š\n# å®‰è£…è§£é‡Šå™¨ sudo apt install qemu-user-static # å®‰è£…binfmtæ“ä½œæ”¯æŒ sudo apt install binfmt-support # å¼€å¯å¼‚æ„æ”¯æŒ sudo update-binfmts --package=qemu-user-static --enable åŒä¸Šã€‚\næ³¨é”€ echo -1 \u0026gt;/proc/sys/fs/binfmt_misc/status # æ³¨é”€æ‰€æœ‰æ³¨å†Œçš„æ¡ç›® echo -1 \u0026gt;/proc/sys/fs/binfmt_misc/qemu-riscv64 # æ³¨é”€å•ä¸ªæ¡ç›® æˆ–è€…é€šè¿‡å‘½ä»¤è¡Œå·¥å…·å®Œæˆï¼š\n# å®‰è£…binfmtæ“ä½œæ”¯æŒ sudo apt install binfmt-support # ç¦ç”¨qemu-riscv64ï¼Œå†æ¬¡æŸ¥çœ‹/proc/sys/fs/binfmt_misc/å‘ç°qemu-riscv64å·²è¢«åˆ é™¤ sudo update-binfmts --disable qemu-riscv64 Gitea å¦‚ä½•å®ç°å¤šæ¶æ„åº”ç”¨æ„å»ºï¼Ÿ Gitea ä¸ä¼šè‡ªå·±è¿è¡Œ Jobï¼Œè€Œæ˜¯å°† Job å§”æ‰˜ç»™ Runnerã€‚Gitea Actions çš„ Runner è¢«ç§°ä¸º act runnerï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºã€‚åœ¨æ¥æ”¶åˆ° Job åï¼Œact runner ä¼šæ ¹æ® Job çš„å†…å®¹ï¼Œå¯ç”¨ä¸åŒçš„ Container æ¥è¿è¡Œ Jobã€‚\nä¸ºäº†é¿å…æ¶ˆè€—è¿‡å¤šèµ„æºå¹¶å½±å“ Gitea å®ä¾‹ï¼ŒGitea å’Œ Runner ä¸€èˆ¬è¿è¡Œåœ¨ä¸åŒçš„æœºå™¨ä¸Šã€‚ä½†æ˜¯åŒä¸€ä¸ª Runner å¯åŠ¨çš„å®¹å™¨ä¸€å®šåœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚æˆ‘è¿™é‡Œæ¼”ç¤ºçš„ç»Ÿä¸€éƒ½åœ¨åŒä¸€å° x86 æ¶æ„çš„æœºå™¨ä¸Šã€‚\nå› ä¸ºéƒ½è¿è¡Œåœ¨ x86 æ¶æ„çš„æœºå™¨ä¸Šï¼Œæ‰€æœ‰æ‰§è¡Œä»»åŠ¡çš„ Container ä¹Ÿä¸€å®šæ˜¯ x86 æ¶æ„çš„ã€‚ä½†æ˜¯æˆ‘ä»¬äº†è§£äº†ä¸Šé¢çš„ binfmt_misc æœºåˆ¶åï¼Œå°±å¯ä»¥åœ¨å®¹å™¨å†…éƒ¨é€šè¿‡æ³¨å†Œä¸åŒæ¶æ„çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œä»è€Œåœ¨ x86 æ¶æ„çš„æœºå™¨ä¸Šè¿è¡Œä¸åŒæ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å°±å¯ä»¥å®ç°å¤šæ¶æ„åº”ç”¨æ„å»ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€ Gitea çš„ tea çš„é¡¹ç›®æºç æ‰¾åˆ°å®ƒçš„ release workflow æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä½¿ç”¨äº†docker/setup-qemu-action@v3è¿™ä¸ª action æ¥å®ç°å¤šæ¶æ„æ„å»ºã€‚\n- name: Set up QEMU uses: docker/setup-qemu-action@v3 æŸ¥é˜…action çš„æºç ï¼Œå¯ä»¥å‘ç°åº•å±‚å®ç°æ˜¯é€šè¿‡binfmt_miscæ¥å®ç°çš„ã€‚\nfunc init() { // å®šä¹‰äº†ä¸€äº›å…¨å±€å˜é‡ flag.StringVar(\u0026amp;mount, \u0026#34;mount\u0026#34;, \u0026#34;/proc/sys/fs/binfmt_misc\u0026#34;, \u0026#34;binfmt_misc mount point\u0026#34;) flag.StringVar(\u0026amp;toInstall, \u0026#34;install\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;architectures to install\u0026#34;) flag.StringVar(\u0026amp;toUninstall, \u0026#34;uninstall\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;architectures to uninstall\u0026#34;) flag.BoolVar(\u0026amp;flVersion, \u0026#34;version\u0026#34;, false, \u0026#34;display version\u0026#34;) } func install(arch string) error { cfg, ok := configs[arch] // æ‹¼æ¥è·¯å¾„ä¸º/proc/sys/fs/binfmt_misc/registerï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ£€æŸ¥æ˜¯å¦èƒ½å¤Ÿæ‰“å¼€æˆåŠŸ register := filepath.Join(mount, \u0026#34;register\u0026#34;) file, err := os.OpenFile(register, os.O_WRONLY, 0) binaryBasename, binaryFullpath, err := getBinaryNames(cfg) if err != nil { return err } // å‘/proc/sys/fs/binfmt_misc/register å†™å…¥ lineï¼Œæ³¨å†ŒäºŒè¿›åˆ¶æ ¼å¼ line := fmt.Sprintf(\u0026#34;:%s:M:0:%s:%s:%s:%s\u0026#34;, binaryBasename, cfg.magic, cfg.mask, binaryFullpath, flags) _, err = file.Write([]byte(line)) if err != nil { e, ok := err.(*os.PathError) if ok \u0026amp;\u0026amp; e.Err == syscall.EEXIST { return errors.Errorf(\u0026#34;%s already registered\u0026#34;, binaryBasename) } return errors.Errorf(\u0026#34;cannot register %q to %s: %s\u0026#34;, binaryFullpath, register, err) } return nil } Q \u0026amp; A ä¸ºä½•/proc/sys/fs/binfmt_misc/register æ–‡ä»¶æ˜¯åªè¯»çš„ï¼Ÿ /proc/sys/fs/binfmt_misc/register æ–‡ä»¶æ˜¯åªå†™çš„ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ Linux ä¸­ï¼Œ/proc æ–‡ä»¶ç³»ç»Ÿä¸‹çš„å¾ˆå¤šæ–‡ä»¶éƒ½æ˜¯é€šè¿‡å¯¹æ–‡ä»¶è¿›è¡Œå†™å…¥æ¥è¿›è¡Œé…ç½®å’Œæ§åˆ¶çš„ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸ä»£è¡¨å†…æ ¸å‚æ•°æˆ–æ§åˆ¶æ¥å£ï¼Œæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥ä¸å†…æ ¸è¿›è¡Œäº¤äº’ã€‚\nå¯¹äº /proc/sys/fs/binfmt_misc/register æ–‡ä»¶æ¥è¯´ï¼Œé€šè¿‡å†™å…¥æ³¨å†Œä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥å‘å†…æ ¸æ³¨å†Œæ–°çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå‘ŠçŸ¥å†…æ ¸å¦‚ä½•æ‰§è¡Œç‰¹å®šçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™ç§åªå†™çš„è®¾è®¡æ˜¯ä¸ºäº†ä¿æŒç®€å•æ€§å’Œå®‰å…¨æ€§ã€‚å…è®¸ç”¨æˆ·åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æ³¨å†Œæ–°çš„æ ¼å¼ï¼Œè€Œä¸æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–æ³¨å†Œä¿¡æ¯ï¼Œå¯ä»¥æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚\nè™½ç„¶ /proc/sys/fs/binfmt_misc/register æ–‡ä»¶æ˜¯åªå†™çš„ï¼Œä½†æ˜¯é€šè¿‡å‘æ–‡ä»¶ä¸­å†™å…¥æ­£ç¡®æ ¼å¼çš„æ³¨å†Œä¿¡æ¯ï¼Œç”¨æˆ·ä»ç„¶èƒ½å¤Ÿæœ‰æ•ˆåœ°é…ç½®æ–°çš„äºŒè¿›åˆ¶æ ¼å¼ã€‚è¿™ç§è®¾è®¡ç¬¦åˆ Linux ä¸­çš„æ–‡ä»¶ç³»ç»Ÿå’Œæƒé™æ¨¡å‹ã€‚\nå‚è€ƒèµ„æ–™ Kernel Support for miscellaneous Binary Formats (binfmt_misc)\n","permalink":"https://lifeislife.cn/posts/x86%E5%B9%B3%E5%8F%B0%E4%BD%BF%E7%94%A8gitea-actions%E6%9E%84%E5%BB%BA%E5%A4%9A%E6%9E%B6%E6%9E%84%E5%BA%94%E7%94%A8/","summary":"\u003ch1 id=\"binfmt_misc-ç®€ä»‹\"\u003ebinfmt_misc ç®€ä»‹\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003ebinfmt_misc\u003c/code\u003e æ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ä¸ªæœºåˆ¶ï¼Œå®ƒå…è®¸ç”¨æˆ·ç©ºé—´å®šä¹‰æ–°çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¹¶å°†å®ƒä»¬ä¸ç›¸åº”çš„è§£é‡Šå™¨å…³è”èµ·æ¥ã€‚è¿™ä¸ªæœºåˆ¶ä½¿å¾—åœ¨ Linux ä¸Šèƒ½å¤ŸåŠ¨æ€åœ°æ³¨å†Œå¹¶è¿è¡Œä¸åŒæ¶æ„çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»è€Œæ”¯æŒäº¤å‰ç¼–è¯‘å’Œå¤šæ¶æ„ç¯å¢ƒã€‚\u003c/p\u003e","title":"x86 å¹³å°ä½¿ç”¨ Gitea Actions æ„å»ºå¤šæ¶æ„åº”ç”¨ (binfmt_misc)"},{"content":"å¡åœ¨55%çš„åŸºæœ¬ä¸Šé©±åŠ¨å·²ç»ä¸‹è½½å®Œæˆï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®‰è£…ã€‚è¿™æ—¶æˆ‘ä»¬æ‰¾åˆ°ä¸‹è½½çš„æ–‡ä»¶æ‰‹åŠ¨å®‰è£…å³å¯ã€‚ä¸€èˆ¬ä¿å­˜çš„è·¯å¾„ä¸ºC:\\Users\\Administrator\\AppData\\Local\\Packages\\B9ECED6F.ArmouryCrate_qmba6cd70vzyy\\LocalState\\SupportTempï¼Œæ‰¾åˆ°éœ€è¦å®‰è£…çš„é©±åŠ¨æ–‡ä»¶å¤¹ï¼ŒåŒå‡»setup.exeå³å¯ã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3armoury-crate-%E5%8D%8E%E7%A1%95%E5%A5%A5%E5%88%9B%E4%B8%AD%E5%BF%83%E5%AE%89%E8%A3%85%E9%A9%B1%E5%8A%A8%E5%8D%A1%E5%9C%A855/","summary":"\u003cp\u003eå¡åœ¨55%çš„åŸºæœ¬ä¸Šé©±åŠ¨å·²ç»ä¸‹è½½å®Œæˆï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®‰è£…ã€‚è¿™æ—¶æˆ‘ä»¬æ‰¾åˆ°ä¸‹è½½çš„æ–‡ä»¶æ‰‹åŠ¨å®‰è£…å³å¯ã€‚ä¸€èˆ¬ä¿å­˜çš„è·¯å¾„ä¸º\u003ccode\u003eC:\\Users\\Administrator\\AppData\\Local\\Packages\\B9ECED6F.ArmouryCrate_qmba6cd70vzyy\\LocalState\\SupportTemp\u003c/code\u003eï¼Œæ‰¾åˆ°éœ€è¦å®‰è£…çš„é©±åŠ¨æ–‡ä»¶å¤¹ï¼ŒåŒå‡»\u003ccode\u003esetup.exe\u003c/code\u003eå³å¯ã€‚\u003c/p\u003e","title":"è§£å†³Armoury Crate(åç¡•å¥¥åˆ›ä¸­å¿ƒï¼‰å®‰è£…é©±åŠ¨å¡åœ¨55%"},{"content":"è¿ç§»è¿‡ç¨‹ # å…³é—­WSL2 wsl --shutdown # æŸ¥çœ‹WSL2çš„çŠ¶æ€ wsl -l -v NAME STATE VERSION Stopped 2 Ubuntu Stopped 2 # å¯¼å‡ºWSL2 wsl --export Ubuntu D:\\wsl2\\ubuntu.tar æ­£åœ¨å¯¼å‡ºï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚ æ“ä½œæˆåŠŸå®Œæˆã€‚ # åˆ é™¤WSL2 wsl --unregister Ubuntu æ­£åœ¨æ³¨é”€ã€‚ æ“ä½œæˆåŠŸå®Œæˆã€‚ # å¯¼å…¥WSL2 wsl --import Ubuntu D:\\wsl2 D:\\wsl2\\ubuntu.tar --version 2 æ­£åœ¨å¯¼å…¥ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚ æ“ä½œæˆåŠŸå®Œæˆã€‚ # è®¾ç½®é»˜è®¤ç”¨æˆ·ï¼Œå¦‚æœä¸è®¾ç½®å°†ä¼šä½¿ç”¨rootç”¨æˆ·ï¼Œå› ä¸ºä¹‹å‰æˆ‘ä¸€ç›´ä½¿ç”¨è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ï¼Œå¦åˆ™zshé…ç½®æ–‡ä»¶ä¼šæ‰¾ä¸åˆ° ubuntu.exe config --default-user nic # å¯åŠ¨WSL2 wsl å¯èƒ½æœ‰äººå’Œæˆ‘ä¸€æ ·å®‰è£…äº†Dockerï¼Œå¯ç”¨WSLåï¼Œdockerè¿è¡Œæ•°æ®éƒ½åœ¨WSLå‘è¡Œç‰ˆä¸­ï¼Œæ–‡ä»¶ä½ç½®éƒ½åªèƒ½ç”±WSLç®¡ç†ï¼\nå®‰è£…dockeråï¼Œdockerä¼šè‡ªåŠ¨åˆ›å»º2ä¸ªå‘è¡Œç‰ˆï¼š\nwsl -l -v NAME STATE VERSION Stopped 2 docker-desktop Stopped 2 docker-desktop-data Stopped 2 å’Œä¸Šé¢ä¸€æ ·éœ€è¦åˆ°å¯¼å‡ºï¼Œåˆ é™¤ï¼Œå¯¼å…¥ã€‚\n# å…³é—­docker å°†Dockerç¨‹åºé€€å‡ºå³å¯ # å¯¼å‡ºdocker-desktop wsl --export docker-desktop D:\\wsl2\\docker-desktop\\docker-desktop.tar # åˆ é™¤docker-desktop wsl --unregister docker-desktop # å¯¼å…¥docker-desktop wsl --import docker-desktop D:\\wsl2\\docker-desktop D:\\wsl2\\docker-desktop\\docker-desktop.tar --version 2 # å¯¼å‡ºdocker-desktop-data wsl --export docker-desktop-data D:\\wsl2\\docker-desktop-data.tar # åˆ é™¤docker-desktop-data wsl --unregister docker-desktop-data # å¯¼å…¥docker-desktop-data wsl --import docker-desktop-data D:\\wsl2\\docker-desktop-data D:\\wsl2\\docker-desktop-data\\docker-desktop-data.tar --version 2 ","permalink":"https://lifeislife.cn/posts/%E8%BF%81%E7%A7%BBwsl2%E5%88%B0%E9%9D%9E%E7%B3%BB%E7%BB%9F%E7%9B%98/","summary":"\u003ch1 id=\"è¿ç§»è¿‡ç¨‹\"\u003eè¿ç§»è¿‡ç¨‹\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å…³é—­WSL2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewsl --shutdown\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æŸ¥çœ‹WSL2çš„çŠ¶æ€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewsl -l -v\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eNAME                   STATE           VERSION\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eStopped         \u003cspan class=\"m\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  Ubuntu         Stopped         \u003cspan class=\"m\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¯¼å‡ºWSL2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewsl --export Ubuntu D:\u003cspan class=\"se\"\u003e\\w\u003c/span\u003esl2\u003cspan class=\"se\"\u003e\\u\u003c/span\u003ebuntu.tar\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eæ­£åœ¨å¯¼å‡ºï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eæ“ä½œæˆåŠŸå®Œæˆã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ é™¤WSL2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewsl --unregister Ubuntu\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eæ­£åœ¨æ³¨é”€ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eæ“ä½œæˆåŠŸå®Œæˆã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¯¼å…¥WSL2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewsl --import Ubuntu D:\u003cspan class=\"se\"\u003e\\w\u003c/span\u003esl2 D:\u003cspan class=\"se\"\u003e\\w\u003c/span\u003esl2\u003cspan class=\"se\"\u003e\\u\u003c/span\u003ebuntu.tar --version \u003cspan class=\"m\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eæ­£åœ¨å¯¼å…¥ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eæ“ä½œæˆåŠŸå®Œæˆã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# è®¾ç½®é»˜è®¤ç”¨æˆ·ï¼Œå¦‚æœä¸è®¾ç½®å°†ä¼šä½¿ç”¨rootç”¨æˆ·ï¼Œå› ä¸ºä¹‹å‰æˆ‘ä¸€ç›´ä½¿ç”¨è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ï¼Œå¦åˆ™zshé…ç½®æ–‡ä»¶ä¼šæ‰¾ä¸åˆ°\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eubuntu.exe config --default-user nic\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¯åŠ¨WSL2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewsl\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå¯èƒ½æœ‰äººå’Œæˆ‘ä¸€æ ·å®‰è£…äº†Dockerï¼Œå¯ç”¨WSLåï¼Œdockerè¿è¡Œæ•°æ®éƒ½åœ¨WSLå‘è¡Œç‰ˆä¸­ï¼Œæ–‡ä»¶ä½ç½®éƒ½åªèƒ½ç”±WSLç®¡ç†ï¼\u003c/p\u003e","title":"è¿ç§»WSL2åˆ°éç³»ç»Ÿç›˜"},{"content":"åŠæœˆå‰ç»™ç”¨äº†ä¸‰å¹´çš„å°ç±³ 10 æ¢äº†ä¸€å—äºŒæ‰‹ç”µæ± ï¼Œæ‰‹æœºåˆå¯ä»¥å†æˆ˜ä¸‰å¹´äº†ã€‚æƒ³ç€è‡ªå·±è¿˜æœ‰ä¸¤ä¸ªè€³æœºï¼Œä¹Ÿæ²¡æœ‰ä¸¥é‡æ•…éšœï¼Œåªæ˜¯ç”µæ± äºç‚¹ç”¨ä¸äº†åŠå°æ—¶ï¼Œäºæ˜¯ä¹Ÿæƒ³ç€æ¢ä¸ªç”µæ± ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å¤æ´»ã€‚æœ¬æ¥ä»¥ä¸ºè€³æœºå¤ªå°ï¼Œå¤ªç²¾å¯†ï¼Œæ€•è‡ªå·±ä¿®ä¸äº†ï¼Œä½†æ˜¯æƒ³æƒ³å¦‚æœä¸æ¢ç”µæ± ï¼Œè¿™ä¸ªè€³æœºä¹Ÿè¿˜æ˜¯æ­»è·¯ä¸€æ¡ï¼Œä¸å¦‚è‡ªå·±å°è¯•å°è¯•ï¼Œä¹Ÿèƒ½ç§¯æ”’ä¸€ç‚¹ç»éªŒã€‚å®æ“ä¸‹æ¥ï¼Œå‘ç°å¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆéš¾ï¼Œåªè¦æœ‰è€å¿ƒï¼Œè¿˜æ˜¯èƒ½ä¿®å¥½çš„ã€‚ç”šè‡³æ¯”æ¢æ‰‹æœºç”µæ± è¿˜è¦å®¹æ˜“äº›ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šèºä¸éœ€è¦æ‹†ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤šèƒ¶éœ€è¦æ’¬ã€‚\nå°ç±³ FlipBuds Pro é…ä»¶å’Œå·¥å…·å‡†å¤‡ é…ä»¶\nCR1154 3V é”‚ç”µæ± ï¼ˆå¯ä»¥ç›´æ¥æ·˜å®æœç´¢ FlipBuds Pro ç”µæ± ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœè¿™ä¸ªå‹å·ï¼Œæœ€å¥½ä¹°å¸¦çº¿çš„ï¼Œä¸å¸¦çº¿ç„Šæ¥ä¼šæ¯”è¾ƒéº»çƒ¦ï¼‰ å·¥å…·\nçƒ­é£æªï¼ˆå¹é£æœºå³å¯ï¼‰ ç”µçƒ™é“ï¼ˆå°ç±³çš„è¿™ä¸ªè€³æœºæ˜¯éœ€è¦ç„Šæ¥ç”µæ± çº¿çš„ï¼‰ é•Šå­ï¼ˆæ¸…ç†è€³æœºé‡Œé¢çš„èƒ¶æ°´ï¼‰ æ‹†æœº ç”¨å¹é£æœºå¯¹å‡†è€³æœºå¹ä¸€ä¸¤åˆ†é’Ÿï¼Œæ²¿ç€åˆæ¨¡çº¿å¾’æ‰‹å°±èƒ½æ°å¼€ã€‚æ‰“å¼€è…”ä½“æ—¶éœ€è¦æ…¢ä¸€ç‚¹ï¼Œæœ‰åœ°æ–¹æœ‰èƒ¶æ°´ç²˜ç²˜ï¼Œä¸æ˜¯ä¸€æ‰“å¼€å°±æ˜¯å›¾ä¸­çš„æ ·å­ï¼Œéœ€è¦æŠŠèƒ¶æ°´æ¸…ç†å¹²å‡€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ†ç¦»åå¯ä»¥ä»è¾¹ç¼˜å°†ç”µæ± æ’¬å‡ºæ¥ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç”µæ± æ­£æä¸Šç”¨çš„åŒé¢èƒ¶å°†å¯¼çº¿ç²˜åˆ°äº†æ­£æï¼Œç”¨å¹é£æœºå¯¹å‡†å›¾ä¸­ä½ç½®ç¨å¾®åŠ çƒ­ä¸€åˆ†é’Ÿä½œç”¨ï¼Œç„¶åå°†ç”µæ± æ­£æä¸Šçš„è´´ç‰‡å–ä¸‹æ¥ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é™¤äº†ä¸Šé¢ä¸€ä¸ªè¿æ¥ç‚¹ï¼Œè¿˜æœ‰ä¸¤ä¸ªç„Šæ¥çš„è¿æ¥ç‚¹ï¼Œç”¨ç”µçƒ™é“åŠ çƒ­å–ä¸‹å³å¯å°†ç”µæ± è„±ç¦»ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ²¡æœ‰å¾®è·é•œå¤´ï¼Œç”¨äº†æˆ‘çˆ±éŸ³é¢‘ç½‘çš„å›¾ç‰‡\nè£…æœº å°†ç”µæ± çº¢çº¿è¿æ¥åˆ°æ­£æï¼Œé»‘çº¿è¿æ¥åˆ°è´Ÿæï¼Œç„¶åå°†ç”µæ± æ”¾å›åŸä½ï¼Œåˆæ¨¡å³å¯ã€‚å¦‚æœä¸çŸ¥é“æ­£è´Ÿæï¼Œå¯ä»¥åœ¨è€³æœºçº¿è·¯æ¿ä¸Šæœ‰æ ‡è¯†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image è¿˜æœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯å¸é™„ç£é“çš„å®‰è£…ï¼Œå¯èƒ½åœ¨æ‹†ç”µæ± æ—¶å€™ç£é“ä¼šæ‰è½ï¼Œå¯ä»¥æ ¹æ®å›¾ç‰‡ä¸­ç£é“çš„ä½ç½®è¿›è¡Œå®‰è£…ã€‚å…ˆæ”¾ç£é“å†å®‰ç”µæ± ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨è£…æœºè¿‡ç¨‹ä¸­å°±å¯ä»¥è¿æ¥æ‰‹æœºï¼Œå¹¶æ’­æ”¾éŸ³ä¹æµ‹è¯•è€³æœºæ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œã€‚å› ä¸ºåˆæ¨¡æ—¶éœ€è¦å¤§åŠ›å‹åˆï¼Œæ’­æ”¾éŸ³ä¹è¿˜èƒ½ä¿è¯å‹åˆè¿‡ç¨‹ä¸­çº¿è·¯æ²¡æœ‰æ–­å¼€ã€‚\næµ‹è¯• \u003c!DOCTYPE html\u003e Responsive Image ç”¨äº†ä¸€å¤©ï¼Œè€³æœºç”µæ± èƒ½ç”¨å››å°æ—¶å·¦å³ï¼ŒåŸºæœ¬ä¸Šå’Œå…¨æ–°çš„ä¸€æ ·ã€‚\nç´¢å°¼ WF-1000XM3ã€ é…ä»¶å’Œå·¥å…·å‡†å¤‡ é…ä»¶\nCR1254 3.7V é”‚ç”µæ± ï¼ŒåŸè£…çš„æ˜¯ VARTA å“ç‰Œçš„ï¼Œæˆ‘ä¹°çš„æ˜¯ ZeniPowerï¼Œåªè¦å‹å·ä¸€æ ·ï¼Œå“ç‰Œè‡ªå·±é€‰ã€‚ç”šè‡³å¯ä»¥é€‰ 3.85Vï¼Œ75mAh çš„ç»­èˆªæ›´å¥½ã€‚ å·¥å…·\nçƒ­é£æªï¼ˆå¹é£æœºå³å¯ï¼‰ é•Šå­ï¼ˆæ¸…ç†è€³æœºé‡Œé¢çš„èƒ¶æ°´ï¼‰ èºä¸åˆ€ æ‹†æœº ç”¨å¹é£æœºå¯¹ç€è€³æœºçš„è§¦æ‘¸åŸç›˜å¹ä¸€ä¸¤åˆ†é’Ÿèƒ¶æ°´åªåœ¨è¿™å—åŒºåŸŸï¼Œè¾¹ç¼˜æ˜¯å¡æ‰£ä¸éœ€è¦åŠ çƒ­ï¼ŒæŒ‡ç”²é•¿çš„è¯ç›´æ¥ç”¨æŒ‡ç”²æ°å¼€å³å¯ã€‚æ‰“å¼€åçš„æ ·å­å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æœ‰ä¸¤ä¸ªå°èºä¸ï¼Œæ‹§ä¸‹åå°±å¯ä»¥å°†ç›–æ¿ç¿»è¿‡æ¥ï¼Œç”µæ± å°±åœ¨ä¸‹æ–¹ã€‚ç”µæ± ä¸‹æ–¹æœ‰åŒé¢èƒ¶ï¼Œç›´æ¥æŠ ä¸å®¹æ˜“æŠ å‡ºæ¥ï¼Œç”¨å¹é£æœºå¯¹ç€ç›–æ¿å¹ä¸€ä¸¤åˆ†é’Ÿå°±å¯ä»¥å°†èƒ¶æ°´è½¯åŒ–ï¼Œç„¶åç”¨é•Šå­å°†èƒ¶æ°´å–ä¸‹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å®‰è£… å°†ç”µæ± æ”¾å›åŸä½ï¼Œç›–æ¿åˆä¸Šï¼Œæ‹§ä¸Šèºä¸å³å¯ã€‚åœ¨å®‰è£…å›è€³æœºç›–æ—¶éœ€è¦æ³¨æ„è€³æœºç›–æ˜¯åˆ†å·¦å³çš„ï¼Œå¦‚æœå·¦å³é¢ å€’äº†æ˜¯åˆä¸ä¸Šçš„ã€‚å‚è€ƒå›¾ä¸­çš„ä½ç½®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E8%80%B3%E6%9C%BA%E6%8D%A2%E7%94%B5%E6%B1%A0%E5%A4%8D%E6%B4%BB%E8%80%B3%E6%9C%BA%E5%B0%8F%E8%AE%B0/","summary":"\u003cp\u003eåŠæœˆå‰ç»™ç”¨äº†ä¸‰å¹´çš„å°ç±³ 10 æ¢äº†ä¸€å—äºŒæ‰‹ç”µæ± ï¼Œæ‰‹æœºåˆå¯ä»¥å†æˆ˜ä¸‰å¹´äº†ã€‚æƒ³ç€è‡ªå·±è¿˜æœ‰ä¸¤ä¸ªè€³æœºï¼Œä¹Ÿæ²¡æœ‰ä¸¥é‡æ•…éšœï¼Œåªæ˜¯ç”µæ± äºç‚¹ç”¨ä¸äº†åŠå°æ—¶ï¼Œäºæ˜¯ä¹Ÿæƒ³ç€æ¢ä¸ªç”µæ± ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å¤æ´»ã€‚æœ¬æ¥ä»¥ä¸ºè€³æœºå¤ªå°ï¼Œå¤ªç²¾å¯†ï¼Œæ€•è‡ªå·±ä¿®ä¸äº†ï¼Œä½†æ˜¯æƒ³æƒ³å¦‚æœä¸æ¢ç”µæ± ï¼Œè¿™ä¸ªè€³æœºä¹Ÿè¿˜æ˜¯æ­»è·¯ä¸€æ¡ï¼Œä¸å¦‚è‡ªå·±å°è¯•å°è¯•ï¼Œä¹Ÿèƒ½ç§¯æ”’ä¸€ç‚¹ç»éªŒã€‚å®æ“ä¸‹æ¥ï¼Œå‘ç°å¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆéš¾ï¼Œåªè¦æœ‰è€å¿ƒï¼Œè¿˜æ˜¯èƒ½ä¿®å¥½çš„ã€‚ç”šè‡³æ¯”æ¢æ‰‹æœºç”µæ± è¿˜è¦å®¹æ˜“äº›ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šèºä¸éœ€è¦æ‹†ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤šèƒ¶éœ€è¦æ’¬ã€‚\u003c/p\u003e","title":"è€³æœºæ¢ç”µæ± å¤æ´»è€³æœºå°è®°"},{"content":"é—®é¢˜èƒŒæ™¯ ä¸çŸ¥ä»€ä¹ˆåŸå› ï¼Œä¸€ç›´æ­£å¸¸ä½¿ç”¨çš„Adobe Photoshop 2021çªç„¶å¼€å§‹å¼¹çª—æç¤ºå‡çº§ï¼Œè¿˜æ˜¯æ—¥æ–‡çš„ï¼ˆåº”è¯¥æ˜¯ä»£ç†åˆ°åˆ°æ—¥æœ¬äº†ï¼‰ï¼Œå¯èƒ½æ ¹æ®åœ°åŒºä¸åŒï¼Œå¼¹çª—çš„å†…å®¹ä¹Ÿä¸åŒï¼Œä½†æ˜¯éƒ½æ˜¯æç¤ºå‡çº§ï¼Œå€’è®¡æ—¶10å¤©ï¼Œä¸çŸ¥é“åå¤©ä¹‹åå•¥æƒ…å†µã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è§£å†³æ–¹æ³• Adobeçš„å…¶ä»–è½¯ä»¶åŒç†ï¼Œæ¯”å¦‚æˆ‘åœ¨ç”¨çš„Lightroomä¹Ÿæ˜¯è¿™æ ·ï¼Œè§£å†³æ–¹æ³•ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä»¥ä¸‹æ–¹å¼åŸºäºWindows 11ï¼Œå…¶ä»–ç‰ˆæœ¬çš„Windowsä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚\nå¦‚æœæ²¡æœ‰ç”¨ä»£ç†ï¼Œå¯ä»¥ç›´æ¥å°†Photoshopç¨‹åºç¦æ­¢è”ç½‘ã€‚å¯ä»¥é€šè¿‡é…ç½®Windowsçš„é˜²ç«å¢™æ¥å®ç°ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š\næ‰“å¼€è®¾ç½®æœç´¢â€œé˜²ç«å¢™â€ï¼Œæ‰“å¼€Windowsé˜²ç«å¢™ï¼Œé€‰æ‹©â€œé«˜çº§è®¾ç½®â€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é€‰æ‹©â€œå‡ºç«™è§„åˆ™â€ï¼Œç‚¹å‡»â€œæ–°å»ºè§„åˆ™â€ï¼Œé€‰æ‹©è§„åˆ™ç±»å‹ä¸ºâ€œç¨‹åºâ€ï¼Œç¨‹åºé€‰æ‹©ä¸ºPhotoshopçš„å®‰è£…ç›®å½•ä¸‹çš„Photoshop.exeï¼Œç„¶åé€‰æ‹©â€œé˜»æ­¢è¿æ¥â€ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥ï¼Œæœ€åå‘½åè§„åˆ™ä¸ºâ€œç¦æ­¢Photoshopè”ç½‘â€ã€‚ \u003c!DOCTYPE html\u003e Responsive Image å¦‚æœä½¿ç”¨äº†ä»£ç†ï¼Œé˜²ç«å¢™å¯èƒ½ä¼šè¢«ç»•è¿‡ï¼ŒPhotoshopå¯èƒ½ä»ç„¶ä¼šé€šè¿‡ä»£ç†è®¿é—®æ›´æ–°æœåŠ¡å™¨ã€‚éœ€è¦é€šè¿‡é…ç½®ä»£ç†å°†Photoshopç¦æ­¢ä»£ç†ã€‚å¦‚æœä¸é…ç½®ï¼Œå¯ä»¥åœ¨æ¯æ¬¡æ‰“å¼€Adobeç›¸å…³è½¯ä»¶å‰å…³é—­ä»£ç†ï¼Œå¦‚æœé…ç½®ï¼Œè¿™é‡Œä»¥Clash for Windowsä¸ºä¾‹ï¼Œå¯ä»¥é€šè¿‡é…ç½®Clashçš„è§„åˆ™æ¥å®ç°ï¼Œä¸ç”¨å…³é—­ä»£ç†ã€‚å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š\nç‚¹å‡»â€œProfilesâ€ï¼Œé€‰æ‹©è‡ªå·±çš„è®¢é˜…ï¼Œå³å‡»é€‰æ‹©â€œEditâ€ï¼Œå°†ä»¥ä¸‹è¿™äº›è§„åˆ™æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­ä¿å­˜å³å¯ï¼ŒæŠŠé…ç½®æ”¾åˆ°æœ€å‰é¢ï¼Œè¿™æ ·ä¼˜å…ˆçº§æœ€é«˜ã€‚\n# Final - MATCH,Proxy - PROCESS-NAME,Lightroom.exe,REJECT - PROCESS-NAME,lightroom.exe,REJECT - PROCESS-NAME,Photoshop.exe,REJECT - PROCESS-NAME,photoshop.exe,REJECT - PROCESS-NAME,Adobe Lightroom CEF Helper.exe,REJECT - PROCESS-NAME,AdobeIPCBroker.exe,REJECT - PROCESS-NAME,dynamiclinkmanager.exe,REJECT - PROCESS-NAME,dynamiclinkmediaserver.exe,REJECT - DOMAIN-SUFFIX,adobe.com,REJECT - DOMAIN-SUFFIX,adobelogin.com,REJECT - DOMAIN-SUFFIX,adobesc.com,REJECT - DOMAIN-SUFFIX,adobe.io,REJECT - DOMAIN-SUFFIX,adobecc.com,REJECT - DOMAIN-SUFFIX,adobemarketingcloud.com,REJECT - DOMAIN-SUFFIX,adobe.net,REJECT - DOMAIN-SUFFIX,adobeexchange.com,REJECT - DOMAIN-SUFFIX,photoshop.com,REJECT - DOMAIN-SUFFIX,photoshop.adobe.com,REJECT - DOMAIN-KEYWORD,photoshop,REJECT å…¶ä»–ç¨‹åºä½ å¯ä»¥è‡ªå·±æ·»åŠ ï¼Œæ ¼å¼ä¸ºPROCESS-NAME,ç¨‹åºå,REJECTã€‚è¡¨ç¤ºæ‹’ç»è¿™äº›ç¨‹åºè®¿é—®ç½‘ç»œã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3adobe-photoshop%E6%AD%A3%E7%89%88%E5%8D%87%E7%BA%A7%E5%BC%B9%E7%AA%97/","summary":"\u003ch2 id=\"é—®é¢˜èƒŒæ™¯\"\u003eé—®é¢˜èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eä¸çŸ¥ä»€ä¹ˆåŸå› ï¼Œä¸€ç›´æ­£å¸¸ä½¿ç”¨çš„Adobe Photoshop 2021çªç„¶å¼€å§‹å¼¹çª—æç¤ºå‡çº§ï¼Œè¿˜æ˜¯æ—¥æ–‡çš„ï¼ˆåº”è¯¥æ˜¯ä»£ç†åˆ°åˆ°æ—¥æœ¬äº†ï¼‰ï¼Œå¯èƒ½æ ¹æ®åœ°åŒºä¸åŒï¼Œå¼¹çª—çš„å†…å®¹ä¹Ÿä¸åŒï¼Œä½†æ˜¯éƒ½æ˜¯æç¤ºå‡çº§ï¼Œå€’è®¡æ—¶10å¤©ï¼Œä¸çŸ¥é“åå¤©ä¹‹åå•¥æƒ…å†µã€‚\u003c/p\u003e","title":"è§£å†³Adobe Photoshopæ­£ç‰ˆå‡çº§å¼¹çª—"},{"content":"å®‰è£…ä¸é…ç½® ç™»å½• Zwift å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œå®‰è£…å®Œæˆåæ‰“å¼€ï¼Œè¾“å…¥é‚®ç®±å’Œå¯†ç ç™»å½•ã€‚ä½†æ˜¯æˆ‘çš„ç”µè„‘ç¦»éª‘è¡Œå°è¾ƒè¿œï¼Œè“ç‰™å¾ˆä¸ç¨³å®šï¼ŒZwift è¿˜æœ‰ä¸€ä¸ªé…å¥—çš„æ‰‹æœº Appï¼Œå« Companionï¼Œå¯ä»¥åœ¨è°·æ­Œå•†åº—å®‰è£…ã€‚å®‰è£…åæ‰“å¼€ç™»å½•ã€‚Zwift PC å®¢æˆ·ç«¯ç™»å½•ååœ¨é…å¯¹è£…ç½®é¡µé¢å·¦ä¸Šè§’é€‰æ‹©â€œé€è¿‡æ‰‹æœºè¿›è¡Œé…å¯¹â€ï¼Œæ­£å¸¸æƒ…å†µä¸‹æ‰‹æœºç«¯ä¼šè‡ªåŠ¨å¼¹å‡ºé…å¯¹é¡µé¢ã€‚è®°å¾—æ‰“å¼€æ‰‹æœºçš„è“ç‰™å¼€å…³ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image é“å…·åŠŸèƒ½ä»‹ç» \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¸¸è§é—®é¢˜ å¯åŠ¨åé—ªé€€ å°†è¾“å…¥æ³•åˆ‡æ¢ä¸ºè‹±æ–‡æ¨¡å¼å†é‡æ–°å¯åŠ¨ã€‚\næ²¡æœ‰å…¶ä»–ç©å®¶ï¼Œåªæœ‰è‡ªå·± æŒ‚å…¨å±€ä»£ç†é‡æ–°å¯åŠ¨ã€‚\n","permalink":"https://lifeislife.cn/posts/zwift%E4%BD%BF%E7%94%A8tips/","summary":"\u003ch1 id=\"å®‰è£…ä¸é…ç½®\"\u003eå®‰è£…ä¸é…ç½®\u003c/h1\u003e\n\u003cp\u003eç™»å½• Zwift å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œå®‰è£…å®Œæˆåæ‰“å¼€ï¼Œè¾“å…¥é‚®ç®±å’Œå¯†ç ç™»å½•ã€‚ä½†æ˜¯æˆ‘çš„ç”µè„‘ç¦»éª‘è¡Œå°è¾ƒè¿œï¼Œè“ç‰™å¾ˆä¸ç¨³å®šï¼ŒZwift è¿˜æœ‰ä¸€ä¸ªé…å¥—çš„æ‰‹æœº Appï¼Œå« Companionï¼Œå¯ä»¥åœ¨è°·æ­Œå•†åº—å®‰è£…ã€‚å®‰è£…åæ‰“å¼€ç™»å½•ã€‚Zwift PC å®¢æˆ·ç«¯ç™»å½•ååœ¨é…å¯¹è£…ç½®é¡µé¢å·¦ä¸Šè§’é€‰æ‹©â€œé€è¿‡æ‰‹æœºè¿›è¡Œé…å¯¹â€ï¼Œæ­£å¸¸æƒ…å†µä¸‹æ‰‹æœºç«¯ä¼šè‡ªåŠ¨å¼¹å‡ºé…å¯¹é¡µé¢ã€‚è®°å¾—æ‰“å¼€æ‰‹æœºçš„è“ç‰™å¼€å…³ã€‚\u003c/p\u003e","title":"ZWIFT ä½¿ç”¨ Tips"},{"content":"Docker-Compose version: \u0026#34;3.8\u0026#34; services: nexus: image: sonatype/nexus3 container_name: nexus restart: always ports: - 8081:8081 volumes: - /srv/nexus/data:/nexus-data ä¿®æ”¹/srv/nexusç›®å½•çš„æ‰€æœ‰è€…ä¸ºå½“å‰ç”¨æˆ·ï¼š\nsudo chown -R username:username /srv/nexus ä¿®æ”¹dataç›®å½•æœ‰æœ€é«˜æƒé™ï¼Œå¦åˆ™æ— æ³•å¯åŠ¨æˆåŠŸï¼š\nsudo chmod -R 777 /srv/nexus/data ä»£ç†Docker Hub ç™»å½•WEBé¡µé¢ ç™»å½•WEBé¡µé¢ï¼Œåœ°å€ä¸ºï¼šhttp://192.168.1.9:8081ã€‚ ç”¨æˆ·åä¸ºï¼šadminï¼Œå¯†ç é€šè¿‡å‘½ä»¤è·å–ï¼š\ndocker exec nexus3 cat /nexus-data/admin.password åˆ›å»ºBlob åœ¨ Nexus Repository Manager ä¸­ï¼ŒBlob Storeï¼ˆäºŒè¿›åˆ¶å¤§å¯¹è±¡å­˜å‚¨ï¼‰æ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨ä»“åº“æ•°æ®çš„æ ¸å¿ƒç»„ä»¶ã€‚Blob Store ä¸»è¦ç”¨äºå­˜å‚¨å„ç§äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾‹å¦‚è½¯ä»¶åŒ…ã€ä¾èµ–åº“ã€æ„å»ºäº§ç‰©ç­‰ï¼Œè¿™äº›æ–‡ä»¶é€šå¸¸è¢«ç§°ä¸ºâ€œblobâ€ã€‚\nBlob Store çš„ä½œç”¨åŒ…æ‹¬ï¼š\nå­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼š Blob Store è¢«è®¾è®¡ç”¨æ¥å®‰å…¨ã€å¯é åœ°å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶å¯ä»¥æ˜¯å„ç§å½¢å¼çš„æ„å»ºäº§ç‰©ã€è½¯ä»¶åŒ…ã€ä¾èµ–åº“ç­‰ã€‚Blob Store æ˜¯ Nexus ä»“åº“ç®¡ç†ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œå®ƒä¸ºè¿™äº›æ–‡ä»¶æä¾›äº†ä¸€ä¸ªä¸­å¤®å­˜å‚¨ä½ç½®ã€‚\næ”¯æŒä¸åŒç±»å‹çš„å­˜å‚¨åç«¯ï¼š Nexus æ”¯æŒä¸åŒç±»å‹çš„ Blob Storeï¼Œä¾‹å¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€äº‘å­˜å‚¨ï¼ˆå¦‚Amazon S3ã€Google Cloud Storageï¼‰ç­‰ã€‚è¿™ä½¿å¾—ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©ä¸åŒçš„å­˜å‚¨åç«¯ï¼Œå¹¶æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œæ‰©å±•æˆ–è¿ç§»ã€‚\næä¾›å­˜å‚¨ç­–ç•¥ï¼š Blob Store å…è®¸ä½ å®šä¹‰å­˜å‚¨ç­–ç•¥ï¼Œä»¥ç¡®å®šä½•æ—¶ä»¥åŠå¦‚ä½•æ¸…ç†æˆ–åˆ é™¤ä¸å†éœ€è¦çš„æ–‡ä»¶ã€‚è¿™å¯¹äºç®¡ç†ä»“åº“çš„å­˜å‚¨ç©ºé—´éå¸¸é‡è¦ï¼Œå¯ä»¥æ ¹æ®ç­–ç•¥è‡ªåŠ¨æ¸…ç†ä¸å†éœ€è¦çš„å¿«ç…§æˆ–æ—§ç‰ˆæœ¬ã€‚\næ”¯æŒä»£ç†å’Œç¼“å­˜ï¼š åœ¨ Maven Repository çš„åœºæ™¯ä¸‹ï¼ŒBlob Store è¿˜å¯ä»¥ç”¨äºä»£ç†è¿œç¨‹ Maven ä»“åº“ï¼Œå¹¶ç¼“å­˜è¿œç¨‹ä»“åº“ä¸­çš„æ–‡ä»¶ã€‚è¿™æœ‰åŠ©äºæé«˜æ„å»ºæ€§èƒ½ï¼Œå‡å°‘å¯¹è¿œç¨‹ä»“åº“çš„ä¾èµ–ã€‚\næˆ‘ä»¬ç¼“å­˜çš„é•œåƒéœ€è¦å­˜å‚¨ä¸ºblobï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªBlob storeã€‚ç‚¹å‡»å·¦ä¾§èœå•æ çš„Blob Storesï¼Œç„¶åç‚¹å‡»Create blob storeï¼Œé€‰æ‹©Typeä¸ºFileï¼ŒNameå¡«å†™ä¸ºdockerhubã€‚\nåˆ›å»ºRepository åœ¨ Nexus Repository Manager ä¸­ï¼Œæœ‰ä¸‰ç§ä¸»è¦çš„ä»“åº“ç±»å‹ï¼šHosted Repositoryã€Proxy Repositoryã€å’Œ Group Repositoryã€‚æ¯ç§ç±»å‹éƒ½æœ‰ä¸åŒçš„ä½œç”¨å’Œç”¨é€”ï¼š\nHosted Repositoryï¼ˆæ‰˜ç®¡ä»“åº“ï¼‰:\nä½œç”¨ï¼š ç”¨äºå­˜å‚¨å’Œç®¡ç†æœ¬åœ°åˆ›å»ºçš„éƒ¨ç½²ï¼ˆdeployï¼‰çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™åŒ…æ‹¬ä½ è‡ªå·±æˆ–ä½ çš„å›¢é˜Ÿåˆ›å»ºçš„åº“ï¼Œä¾‹å¦‚ Maven æ„ä»¶ã€npm åŒ…ã€Docker é•œåƒç­‰ã€‚ ä½¿ç”¨åœºæ™¯ï¼š å½“ä½ éœ€è¦åœ¨å†…éƒ¨å­˜å‚¨å’Œåˆ†äº«è‡ªå·±åˆ›å»ºçš„æ„å»ºäº§ç‰©æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Hosted Repositoryã€‚ Proxy Repositoryï¼ˆä»£ç†ä»“åº“ï¼‰:\nä½œç”¨ï¼š ç”¨äºä»£ç†å’Œç¼“å­˜è¿œç¨‹ä»“åº“çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å½“ä½ ä»è¿œç¨‹ä»“åº“è·å–æ„å»ºä¾èµ–æ—¶ï¼ŒProxy Repository ä¼šå°†è¿™äº›æ–‡ä»¶ç¼“å­˜åœ¨æœ¬åœ°ï¼Œä»è€Œæé«˜æ„å»ºæ€§èƒ½å¹¶å‡å°‘å¯¹è¿œç¨‹ä»“åº“çš„ä¾èµ–ã€‚ ä½¿ç”¨åœºæ™¯ï¼š åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä½ é€šå¸¸ä¼šä¾èµ–äºä¸€äº›å…¬å…±çš„è¿œç¨‹ä»“åº“ï¼Œä¾‹å¦‚ Maven Centralã€npm registryã€Docker Hubç­‰ã€‚ä½¿ç”¨ Proxy Repository å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†è¿™äº›ä¾èµ–å¹¶å‡å°‘å¯¹è¿œç¨‹ä»“åº“çš„ç›´æ¥è®¿é—®ã€‚ Group Repositoryï¼ˆç»„åˆä»“åº“ï¼‰:\nä½œç”¨ï¼š å…è®¸ä½ å°†å¤šä¸ªä»“åº“ç»„åˆæˆä¸€ä¸ªé€»è¾‘å•å…ƒã€‚å½“ä½ éœ€è¦åœ¨æ„å»ºä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªä»“åº“çš„å†…å®¹æ—¶ï¼ŒGroup Repository å¯ä»¥å°†è¿™äº›ä»“åº“ç»„åˆåœ¨ä¸€èµ·ï¼Œä½¿å®ƒä»¬åœ¨åº”ç”¨ç¨‹åºä¸­çœ‹èµ·æ¥åƒä¸€ä¸ªå•ä¸€çš„ä»“åº“ã€‚ ä½¿ç”¨åœºæ™¯ï¼š å½“ä½ æœ‰å¤šä¸ª Proxy Repository æˆ– Hosted Repository æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Group Repository å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ã€‚è¿™å¯¹äºç®€åŒ–æ„å»ºé…ç½®ã€ç»Ÿä¸€ä¾èµ–ç®¡ç†ç­‰éå¸¸æœ‰ç”¨ã€‚ æˆ‘ä»¬ä¸€èˆ¬åˆ›å»ºä¸‰ä¸ªä»“åº“ï¼Œproxyä»£ç†å…¬å…±é•œåƒï¼Œhostedä¿å­˜è‡ªå·±çš„é•œåƒï¼Œgroupå°†proxyå’Œhostedç»„åˆåœ¨ä¸€èµ·ã€‚æˆ‘ä»¬åˆ†åˆ«åˆ›å»ºä¸‰ä¸ªä»“åº“ã€‚\nproxy ç‚¹å‡»å·¦ä¾§èœå•æ çš„Repositoriesï¼Œç„¶åç‚¹å‡»Create repositoryï¼Œé€‰æ‹©Docker (proxy)ï¼ŒæŒ‰ç…§ä¸‹å›¾å¡«å†™ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image Remote storage å›¾ä¸­å¡«å†™ä¸ºhttps://registry-1.docker.ioï¼Œè¿™æ˜¯dockerhubçš„åœ°å€ã€‚ä½†æ˜¯å®æµ‹ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨åŠ é€Ÿåœ°å€https://dockerproxy.comã€‚éœ€è¦æ³¨æ„ä¿®æ”¹ä¸€ä¸‹ã€‚\nè¿˜æœ‰ä¸€äº›å›½å†…é•œåƒæºå¯é€‰ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªé¡¹ç›®ã€‚Test Registry Â· docker-practice/docker-registry-cn-mirror-test@83a4dd4\n\u003c!DOCTYPE html\u003e Responsive Image Blob storeé€‰æ‹©ä¸ºåˆšåˆšåˆ›å»ºçš„dockerhubã€‚\n\u003c!DOCTYPE html\u003e Responsive Image hosted hostedæ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦å¡«ä¸ªåç§°å°±è¡Œäº†ï¼Œè¿™é‡Œå¡«å†™ä¸ºdocker-hostedã€‚\ngroup group éœ€è¦æ³¨æ„ä»¥ä¸‹ï¼š\nHTTPéœ€è¦å•ç‹¬è®¾ç½®ç«¯å£å·ã€‚æˆ‘ä»¬è®¾ç½®ä¸WEBé¡µé¢ä¸åŒçš„ç«¯å£å·ï¼Œ8082å³å¯ã€‚ éœ€è¦å°†proxyå’Œhostedéƒ½æ·»åŠ åˆ°groupä¸­ï¼Œè¿™æ ·æ‰èƒ½å°†ä¸¤ä¸ªä»“åº“ç»„åˆåœ¨ä¸€èµ·ã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¯ç”¨Realms è¿™é‡Œè¦åœ¨ Security-Realms é‡Œé¢å¯ç”¨ Docker Bearer Token Realmã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‹‰å–é•œåƒ å¦‚æœç›´æ¥ä½¿ç”¨docker pullæ‹‰å–é•œåƒï¼Œä¼šæŠ¥é”™ï¼š\n$ docker pull 192.168.1.9:8082/redis Using default tag: latest Error response from daemon: Get \u0026#34;https://192.168.1.9:8082/v2/\u0026#34;: http: server gave HTTP response to HTTPS client ç¼–è¾‘/etc/docker/daemon.jsonæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\n{ \u0026#34;insecure-registries\u0026#34;: [ \u0026#34;192.168.1.9:8082\u0026#34; ], \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;http://192.168.1.9:8082\u0026#34; ] } æ³¨æ„ï¼šregistry-mirrorsä¸­åªä¿ç•™ä¸€ä¸ªNexusçš„åœ°å€ï¼Œè¿™æ ·é»˜è®¤å°±ä¼šä»Nexusæ‹‰å–é•œåƒã€‚å¦‚æœæœ‰å¤šä¸ªåœ°å€ï¼Œå°±å¯èƒ½ä¼šä»å…¶ä»–åœ°å€æ‹‰å–é•œåƒã€‚å› ä¸ºæˆ‘ä»¬åœ¨Nexusä¸­é…ç½®çš„URLå°±æ˜¯docker-proxyçš„åœ°å€ï¼Œä»–å°±æ˜¯ä¸€ä¸ªå›½å†…ä»£ç†åœ°å€ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬åªä¿ç•™ä¸€ä¸ªNexusçš„åœ°å€å°±è¡Œã€‚ æ³¨æ„ï¼š insecure-registries æ‹¼å†™ï¼Œä¸è¦å†™æˆ insecure-registryã€‚æœ€å¥½ç›´æ¥å¤åˆ¶ï¼Œjsonæ ¼å¼å¾ˆä¸¥æ ¼ã€‚\né‡å¯DockeræœåŠ¡ï¼š\nsudo systemctl restart docker ç™»å½•Docker Registryï¼š\néœ€è¦æ³¨æ„çš„shiï¼Œè¿™é‡Œçš„ç”¨æˆ·åå’Œå¯†ç æ˜¯Nexusçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œä¸æ˜¯Docker Hubçš„ç”¨æˆ·åå’Œå¯†ç ã€‚\ndocker login 192.168.1.9:8082 -u admin -p admin123 æ‹‰å–é•œåƒï¼š\n$ docker pull redis Using default tag: latest latest: Pulling from redis 1f7ce2fa46ab: Already exists 4827e9d1e197: Pull complete 5845062cfda9: Pull complete 44d659adcf8b: Pull complete b6962d83313d: Pull complete 5d29cf86ecab: Pull complete 4f4fb700ef54: Pull complete 3a2d9f90268c: Pull complete Digest: sha256:249e1bfb9448ae9e76807748f8cb3c5cc73e55441b7b36364c61a7428c9e814c Status: Downloaded newer image for 192.168.1.9:8082/redis:latest 192.168.1.9:8082/redis:latest å¯ä»¥åœ¨é¦–é¡µçš„Browse Dockerä¸­çœ‹åˆ°é•œåƒå·²ç»è¢«ç¼“å­˜äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ¨é€é•œåƒ å¦‚æœä½ éœ€è¦ä¸Šä¼ è‡ªå·±ä¿®æ”¹çš„é•œåƒï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹ä¹‹å‰çš„docker-hostedï¼Œå…¶ä¸­HTTPä¸­è¯¥ä¸º8083ï¼Œå’Œdocker-proxyçš„ç«¯å£å·åŒºåˆ†ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä»8082ä¸‹è½½é•œåƒï¼Œä»8083æ¨é€é•œåƒã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é¦–å…ˆæˆ‘ä»¬éœ€è¦é‡å‘½åé•œåƒï¼Œæ ¼å¼å¦‚ä¸‹\ndocker tag \u0026lt;imageId or imageName\u0026gt; \u0026lt;nexus-hostname\u0026gt;:\u0026lt;repository-port\u0026gt;/\u0026lt;image\u0026gt;:\u0026lt;tag\u0026gt; docker tag af340544ed62 192.168.1.9:8083/hello-world:mytag docker push 192.168.1.9:8083/hello-world:mytag æ‹‰å–è¿™ä¸ªé•œåƒï¼š\ndocker pull 192.168.1.9:8083/hello-world:mytag ä»£ç† YUM æº ä»£ç† APT æº å’Œ YUM æºä»£ç†ç¨æœ‰ä¸åŒçš„æ˜¯ï¼ŒAPT æºä»£ç†æ—¶æ²¡æœ‰ Group ä»“åº“ï¼Œä½†æ˜¯ä½¿ç”¨APTæºçš„ç³»ç»Ÿå¦‚Ubuntuä¹Ÿæ˜¯æœ‰å¤šä¸ªç‰ˆæœ¬çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ Distribution å‚æ•°é‡Œå¡«å†™éœ€è¦ä»£ç†çš„ç‰ˆæœ¬å³å¯ï¼Œæ¯éš”ç‰ˆæœ¬ç”¨é€—å·åˆ†éš”ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¸¸ç”¨çš„ç‰ˆæœ¬ä»¥åŠä»£å·å¦‚ä¸‹ï¼š\nUbuntu 16.04 Xenial Xerus Ubuntu 18.04 Bionic Beaver Ubuntu 20.04 Focal Fossa Ubuntu 21.04 Hirsute Hippo Ubuntu 21.10 Impish Indri Ubuntu 22.04 Jammy Jellyfish Ubuntu 22.10 Kinetic Kudu Ubuntu 23.04 Lunar Lobster Ubuntu 23.10 Mantic Minotau ä»£ç†åœ°å€ä¸ºï¼šhttp://192.168.1.9:8081/repository/apt-proxy/ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Ubuntuä¸­ä½¿ç”¨è¿™ä¸ªåœ°å€æ¥ä»£ç†APTæºã€‚ä¿®æ”¹/etc/apt/sources.listæ–‡ä»¶ï¼Œå°†åŸæ¥çš„æºåœ°å€æ›¿æ¢ä¸ºNexusçš„åœ°å€å³å¯ã€‚\n# é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb http://192.168.1.9:8081/repository/apt-proxy/ jammy main restricted universe multiverse # deb-src http://192.168.1.9:8081/repository/apt-proxy/ jammy main restricted universe multiverse deb http://192.168.1.9:8081/repository/apt-proxy/ jammy-updates main restricted universe multiverse # deb-src http://192.168.1.9:8081/repository/apt-proxy/ jammy-updates main restricted universe multiverse deb http://192.168.1.9:8081/repository/apt-proxy/ jammy-backports main restricted universe multiverse # deb-src http://192.168.1.9:8081/repository/apt-proxy/ jammy-backports main restricted universe multiverse deb http://192.168.1.9:8081/repository/apt-proxy/ jammy-security main restricted universe multiverse # deb-src http://192.168.1.9:8081/repository/apt-proxy/ jammy-security main restricted universe multiverse # é¢„å‘å¸ƒè½¯ä»¶æºï¼Œä¸å»ºè®®å¯ç”¨ # deb http://192.168.1.9:8081/repository/apt-proxy/ jammy-proposed main restricted universe multiverse # # deb-src http://192.168.1.9:8081/repository/apt-proxy/ jammy-proposed main restricted universe multiverse ä»£ç† pip æº ä½¿ç”¨é˜¿é‡Œäº‘ä½œä¸ºä»£ç†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Nexusä¸­åˆ›å»ºä¸€ä¸ªPyPIä»£ç†ä»“åº“ã€‚ç‚¹å‡»å·¦ä¾§èœå•æ çš„Repositoriesï¼Œç„¶åç‚¹å‡»Create repositoryï¼Œé€‰æ‹©PyPI (proxy)ï¼ŒæŒ‰ç…§ä¸‹å›¾å¡«å†™ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å†åˆ›å»ºä¸€ä¸ªPyPI Groupä»“åº“ï¼Œå°†åˆšåˆšåˆ›å»ºçš„PyPIä»£ç†ä»“åº“å’ŒPyPI Hostedä»“åº“æ·»åŠ åˆ°Groupä»“åº“ä¸­ã€‚\nç¼–è¾‘/etc/pip.confæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\næˆ–è€…åœ¨ç”¨æˆ·ç›®å½•ä¸‹çš„~/.pip/pip.confæ–‡ä»¶ä¸­æ·»åŠ \n[global] index = http://192.168.1.9:8081/repository/pypi/ index-url = http://192.168.1.9:8081/repository/pypi/simple trusted-host = 192.168.1.9 åœ¨ WSL2 ä¸­ä½¿ç”¨ Nexus ä»£ç† å› ä¸º WSL2 ä½¿ç”¨çš„æ˜¯å®¿ä¸»æœºWindowsçš„Docker desktopä½œä¸ºDockerå¼•æ“ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨Windowsä¸­é…ç½®Dockerçš„ä»£ç†ã€‚æ‰“å¼€Docker Desktopï¼Œç‚¹å‡»Settingsï¼Œç„¶åé€‰æ‹©Docker Engineï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image { \u0026#34;builder\u0026#34;: { \u0026#34;gc\u0026#34;: { \u0026#34;defaultKeepStorage\u0026#34;: \u0026#34;20GB\u0026#34;, \u0026#34;enabled\u0026#34;: true } }, \u0026#34;experimental\u0026#34;: false, \u0026#34;insecure-registries\u0026#34;: [ \u0026#34;http://192.168.1.9:8082\u0026#34; ], \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;http://192.168.1.9:8082\u0026#34; ] } é‡å¯Docker Desktopã€‚ç„¶ååœ¨WSL2ä¸­ä½¿ç”¨ docker info æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¸¸è§é”™è¯¯ docker login nexus unauthorized authentication required ç¡®è®¤ç™»å½•å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œå¯†ç ä¸ºNexusç™»å½•å¯†ç  å´æ˜¯å¦å¯ç”¨Realms docker login nexus connection refused docker login 192.168.1.9:8082 -u admin -p admin123 ç¡®è®¤Docker composeé…ç½®æ–‡ä»¶ä¸­å·²ç»å°†ç«¯å£8082æš´éœ²ï¼Œå¦‚æœæ–°å¢éœ€è¦é‡å¯Nexus\nç¡®è®¤é˜²ç«å¢™å…³é—­æˆ–è€…å·²ç»æ‰“å¼€ç«¯å£\nsudo ufw allow 8082 sudo ufw allow 8082/tcp ç¡®è®¤å·²ç»å°†ç§æœ‰ä»“åº“æ·»åŠ åˆ°äº†/etc/docker/daemon.jsonï¼Œå¹¶ä¸”åŠæ—¶é‡å¯äº†dockeræœåŠ¡\nsudo systemctl restart docker.service ç¡®è®¤å·²ç»å¼€å¯äº†Http connector\nå¦‚å›¾ï¼š \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/nexus-%E9%95%9C%E5%83%8F%E4%BB%A3%E7%90%86/","summary":"\u003ch1 id=\"docker-compose\"\u003eDocker-Compose\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yml\" data-lang=\"yml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003eversion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;3.8\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"nt\"\u003eservices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003enexus\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003esonatype/nexus3\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003enexus\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003erestart\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003ealways\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eports\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"m\"\u003e8081\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e8081\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003evolumes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/srv/nexus/data:/nexus-data\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¿®æ”¹/srv/nexusç›®å½•çš„æ‰€æœ‰è€…ä¸ºå½“å‰ç”¨æˆ·ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo chown -R username:username /srv/nexus\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¿®æ”¹dataç›®å½•æœ‰æœ€é«˜æƒé™ï¼Œå¦åˆ™æ— æ³•å¯åŠ¨æˆåŠŸï¼š\u003c/p\u003e","title":"Nexusæ­å»ºå†…éƒ¨é•œåƒ"},{"content":"Tunasync é¡¹ç›®ç®€ä»‹ Tunasync æ˜¯ä¸€ä¸ªå¼€æºçš„é•œåƒç«™ç‚¹é•œåƒå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿæ­å»ºä¸€ä¸ªé•œåƒç«™ç‚¹ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿçš„åŒæ­¥é•œåƒç«™ç‚¹çš„é•œåƒã€‚æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„æ¸…åå¤§å­¦é•œåƒç«™å°±æ˜¯ä½¿ç”¨ Tunasync æ¥åŒæ­¥é•œåƒçš„ã€‚\nå‡†å¤‡ workspace åˆ›å»ºç›®å½•ç”¨äºå­˜æ”¾ Tunasync çš„ç¨‹åºã€é…ç½®æ–‡ä»¶å’Œæ•°æ®åº“æ–‡ä»¶ï¼š\nmkdir /home/username/tunasync mkdir /home/username/tunasync/conf mkdir /home/username/tunasync/db åˆ›å»ºç›®å½•ç”¨äºå­˜æ”¾é•œåƒæ–‡ä»¶ï¼š\nsudo mkdir /srv/mirrors srv ç›®å½•éœ€è¦ root æƒé™ï¼Œå°† mirrors ç›®å½•çš„æ‰€æœ‰è€…æ”¹ä¸ºå½“å‰ç”¨æˆ·ï¼š\nsudo chown -R username:username /srv/mirrors ä¸‹è½½ Tunasync å¯ä»¥ä» Tunasync é¡¹ç›®çš„ Github releases ç¼–è¯‘å¥½çš„ç¨‹åºç›´æ¥ä½¿ç”¨ã€‚\ncd /home/username/tunasync wget https://github.com/tuna/tunasync/releases/download/v0.8.0/tunasync-linux-amd64-bin.tar.gz tar -zxvf tunasync-linux-amd64-bin.tar.gz é…ç½® Tunasync Manager é…ç½® åˆ›å»ºé…ç½®æ–‡ä»¶/home/username/tunasync/conf/manager.confï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\ndebug = false [server] addr = \u0026#34;127.0.0.1\u0026#34; port = 12345 ssl_cert = \u0026#34;\u0026#34; ssl_key = \u0026#34;\u0026#34; [files] db_type = \u0026#34;bolt\u0026#34; db_file = \u0026#34;/home/username/tunasync/db/manager.db\u0026#34; ca_cert = \u0026#34;\u0026#34; Worker é…ç½® åˆ›å»ºé…ç½®æ–‡ä»¶/home/username/tunasync/conf/worker-openeuler.confï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\n[global] name = \u0026#34;openeuler_worker\u0026#34; log_dir = \u0026#34;/srv/mirrors/log/tunasync/{{.Name}}\u0026#34; mirror_dir = \u0026#34;/srv/mirrors\u0026#34; concurrent = 10 interval = 1440 [manager] api_base = \u0026#34;http://localhost:12345\u0026#34; token = \u0026#34;some_token\u0026#34; ca_cert = \u0026#34;\u0026#34; [cgroup] enable = false base_path = \u0026#34;/sys/fs/cgroup\u0026#34; group = \u0026#34;tunasync\u0026#34; [server] hostname = \u0026#34;localhost\u0026#34; listen_addr = \u0026#34;127.0.0.1\u0026#34; listen_port = 16010 ssl_cert = \u0026#34;\u0026#34; ssl_key = \u0026#34;\u0026#34; [[mirrors]] name = \u0026#34;centos\u0026#34; provider = \u0026#34;rsync\u0026#34; upstream = \u0026#34;rsync://mirrors.tuna.tsinghua.edu.cn/openeuler/\u0026#34; use_ipv6 = false å¯åŠ¨ Tunasync å¯åŠ¨ Manager cd /home/username/tunasync ./tunasync manager -c conf/manager.conf \u0026gt;\u0026gt; /srv/mirrors/log/plog/manager.log \u0026amp; å¯åŠ¨ Worker cd /home/username/tunasync ./tunasync worker -c conf/worker-openeuler.conf \u0026gt;\u0026gt; /srv/mirrors/log/plog/worker-openeuler.log \u0026amp; é€šå¸¸å¯èƒ½åŒæ­¥ä¸æ­¢ä¸€ä¸ªé•œåƒç«™ç‚¹ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ª Worker é…ç½®æ–‡ä»¶ï¼Œç„¶åå¯åŠ¨å¤šä¸ª Workerã€‚\nåˆ›å»º web æœåŠ¡ å®‰è£… Apache2ï¼š\nsudo apt update sudo apt install apache2 ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š\nUbuntu ä¸­çš„ Apache2 ä¸»è¦é…ç½®æ–‡ä»¶æ˜¯ /etc/apache2/apache2.confã€‚å¯ä»¥åœ¨æ­¤æ–‡ä»¶ä¸­è¿›è¡Œå…¨å±€é…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸“é—¨çš„é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ /etc/apache2/sites-available/your-site.confã€‚\nsudo nano /etc/apache2/apache2.conf åœ¨ apache2.conf æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹è¡Œï¼Œè®¾ç½® DocumentRoot å’Œç›®å½•è®¿é—®æƒé™ï¼š\nDocumentRoot /mirrors \u0026lt;Directory \u0026#34;/mirrors\u0026#34;\u0026gt; Options Indexes FollowSymLinks AllowOverride None Require all granted \u0026lt;/Directory\u0026gt; è¯·ç¡®ä¿å°† \u0026lt;Directory\u0026gt; éƒ¨åˆ†æ·»åŠ åˆ°æ­£ç¡®çš„ä½ç½®ã€‚å¯ä»¥åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ° \u0026lt;Directory /var/www/\u0026gt; éƒ¨åˆ†ï¼Œç„¶ååœ¨è¯¥éƒ¨åˆ†ä¸‹æ·»åŠ é…ç½®ã€‚\né‡æ–°å¯åŠ¨ Apache2 æœåŠ¡ï¼š\nåœ¨è¿›è¡Œé…ç½®æ›´æ”¹åï¼Œéœ€è¦é‡æ–°å¯åŠ¨ Apache2 æœåŠ¡ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š\nsudo systemctl restart apache2 è¡¥å……æ–‡ä»¶ï¼š\nå°† index.html æ–‡ä»¶å’Œå…¶ä»–éœ€è¦çš„æ–‡ä»¶æ·»åŠ åˆ° /srv/mirrors ç›®å½•ä¸­ã€‚\næµ‹è¯•ï¼š\næ‰“å¼€ Web æµè§ˆå™¨ï¼Œè®¿é—® http://your-server-ip æˆ– http://localhostï¼Œåº”è¯¥èƒ½å¤Ÿçœ‹åˆ° /srv/mirrors ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚\nå¦‚æ‰“ä¸å¼€ï¼Œéœ€è¦å¼€å¯é˜²ç«å¢™\nsudo ufw allow http sudo ufw allow https ä¿®æ”¹ Web æœåŠ¡ç«¯å£\nç¼–è¾‘ Apache2 é…ç½®æ–‡ä»¶ï¼š\nsudo nano /etc/apache2/ports.conf **åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ° â€‹Listenâ€‹ ** è¡Œï¼Œä¿®æ”¹ç«¯å£ï¼š\nListen 2081 ç¼–è¾‘è™šæ‹Ÿä¸»æœºé…ç½®ï¼ˆå¦‚æœæœ‰ï¼‰ï¼š\nå¦‚æœä½ æœ‰è™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨ /etc/apache2/sites-available/ ä¸­ï¼‰ï¼Œç¡®ä¿å…¶ä¸­çš„ \u0026lt;VirtualHost\u0026gt; éƒ¨åˆ†ä¸­çš„ç«¯å£ä¹Ÿè¢«ä¿®æ”¹ä¸º 2081ã€‚\nä¿å­˜å¹¶é€€å‡ºé…ç½®æ–‡ä»¶ã€‚\né‡å¯ Apache æœåŠ¡ï¼š\nsudo systemctl restart apache2 æ‰“å¼€é˜²ç«å¢™ç«¯å£ 1. **æ‰“å¼€ 2081 ç«¯å£ï¼š** ```bash sudo ufw allow 2081 ``` 2. **æ£€æŸ¥é…ç½®ï¼š** ```bash sudo ufw status ``` ç¡®ä¿ 2081 ç«¯å£å·²ç»æ­£ç¡®æ·»åŠ ã€‚ 3. **é‡å¯é˜²ç«å¢™ï¼ˆå¯é€‰ï¼‰ï¼š** ```bash sudo ufw reload ``` æˆ–è€… ```bash sudo systemctl restart ufw ``` è¿™æ ·ï¼Œä½ å°±å°† Apache2 Web æœåŠ¡çš„ç«¯å£ä¿®æ”¹ä¸º 2081ï¼Œå¹¶ä¸”åªå¼€æ”¾äº† 2081 ç«¯å£ã€‚ç¡®ä¿ä¿®æ”¹äº†é˜²ç«å¢™è§„åˆ™åï¼Œä»èƒ½å¤Ÿé€šè¿‡æ–°çš„ç«¯å£è®¿é—®ä½ çš„ç½‘ç«™ã€‚ ","permalink":"https://lifeislife.cn/posts/tunasync%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E9%95%9C%E5%83%8F%E7%AB%99/","summary":"\u003ch1 id=\"tunasync-é¡¹ç›®ç®€ä»‹\"\u003eTunasync é¡¹ç›®ç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eTunasync æ˜¯ä¸€ä¸ªå¼€æºçš„é•œåƒç«™ç‚¹é•œåƒå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿæ­å»ºä¸€ä¸ªé•œåƒç«™ç‚¹ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿçš„åŒæ­¥é•œåƒç«™ç‚¹çš„é•œåƒã€‚æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„æ¸…åå¤§å­¦é•œåƒç«™å°±æ˜¯ä½¿ç”¨ Tunasync æ¥åŒæ­¥é•œåƒçš„ã€‚\u003c/p\u003e","title":"Tunasync æ­å»ºç§æœ‰é•œåƒç«™"},{"content":"å®‰è£…Clangdæ’ä»¶ åœ¨VSCodeä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®‰è£…Clangdæ’ä»¶ï¼š\næ‰“å¼€VSCodeï¼› ç‚¹å‡»å·¦ä¾§çš„æ’ä»¶å›¾æ ‡ï¼ˆCtrl+Shift+Xï¼‰ï¼› æœç´¢â€œClangdâ€æ’ä»¶ï¼› ç‚¹å‡»â€œå®‰è£…â€æŒ‰é’®ã€‚ ç”Ÿæˆcompile_commands.json å¯¹äºmakeé¡¹ç›®æ¥è¯´ï¼Œå¸¸è§„æ¥è®²ï¼Œå¯ä»¥ä½¿ç”¨Bearæ¥å¯¹æºç ç”Ÿæˆcompile_commands.jsonã€‚é¦–å…ˆå®‰è£…Bearï¼š\nsudo apt install bear ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š\nbear make -j32 ç¼–è¯‘å®Œæˆåï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆcompile_commands.jsonæ–‡ä»¶ã€‚\nå¯¹äºCMAKEé¡¹ç›®æ¥è¯´ï¼Œå¯ä»¥åœ¨CMakeLists.txtä¸­æ·»åŠ ä»¥ä¸‹è¯­å¥ï¼Œç„¶åé‡æ–°ç¼–è¯‘é¡¹ç›®å³å¯ç”Ÿæˆcompile_commands.jsonæ–‡ä»¶ï¼š set(CMAKE_EXPORT_COMPILE_COMMANDS True)\né…ç½®Clangdæ’ä»¶ è¿›å…¥åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œä¸‹è½½é…ç½®æ–‡ä»¶ï¼š\ngit clone --depth 1 https://github.com/Dunky-Z/dot-vscode.git .vscode ä¸»è¦ä¿®æ”¹--compile-commands-dirå‚æ•°ï¼Œå°†å…¶ä¿®æ”¹ä¸ºè‡ªå·±çš„è·¯å¾„ã€‚\néšä¾¿æ‰“å¼€å†…æ ¸æºç æ–‡ä»¶ï¼Œclangdå°†ä¼šè‡ªåŠ¨ç”Ÿæˆç´¢å¼•ï¼Œå¹¶å°†ç´¢å¼•æ–‡ä»¶.idxä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„.cacheç›®å½•ä¸­ã€‚\nLinux-5.4 â”œâ”€â”€ .cache â”‚Â â””â”€â”€ clangd â”œâ”€â”€ .config â”œâ”€â”€ .git å¦‚æœç”Ÿæˆäº†ç´¢å¼•æ–‡ä»¶ï¼Œé‚£ä¹ˆè¯´æ˜é…ç½®æˆåŠŸï¼Œå¯ä»¥æ‰“å¼€æºç æ–‡ä»¶çœ‹çœ‹æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸è·³è½¬ã€‚\n","permalink":"https://lifeislife.cn/posts/vscode-linux%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83/","summary":"\u003ch2 id=\"å®‰è£…clangdæ’ä»¶\"\u003eå®‰è£…Clangdæ’ä»¶\u003c/h2\u003e\n\u003cp\u003eåœ¨VSCodeä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®‰è£…Clangdæ’ä»¶ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ‰“å¼€VSCodeï¼›\u003c/li\u003e\n\u003cli\u003eç‚¹å‡»å·¦ä¾§çš„æ’ä»¶å›¾æ ‡ï¼ˆCtrl+Shift+Xï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eæœç´¢â€œClangdâ€æ’ä»¶ï¼›\u003c/li\u003e\n\u003cli\u003eç‚¹å‡»â€œå®‰è£…â€æŒ‰é’®ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ç”Ÿæˆcompile_commandsjson\"\u003eç”Ÿæˆcompile_commands.json\u003c/h2\u003e\n\u003cp\u003eå¯¹äºmakeé¡¹ç›®æ¥è¯´ï¼Œå¸¸è§„æ¥è®²ï¼Œå¯ä»¥ä½¿ç”¨Bearæ¥å¯¹æºç ç”Ÿæˆcompile_commands.jsonã€‚é¦–å…ˆå®‰è£…Bearï¼š\u003c/p\u003e","title":"VSCode Linuxå†…æ ¸æºç é˜…è¯»ç¯å¢ƒ"},{"content":"é€šè¿‡æ–‡æ¡£èµ„æ–™ç™¾åº¦ç½‘ç›˜ä¸‹è½½é…å¥—èµ„æ–™ï¼Œå­¦ä¹ æ‰‹å†Œç›®å½•ä¸­æœ‰åµŒå…¥å¼Linuxåº”ç”¨å¼€å‘å®Œå…¨æ‰‹å†ŒV5.1_STM32MP157_Proå¼€å‘æ¿.pdfï¼Œé‡Œé¢æœ‰è¯¦ç»†çš„å¼€å‘ç¯å¢ƒæ­å»ºæ­¥éª¤ï¼Œä½†æ˜¯åœ¨æ­å»ºè¿‡ç¨‹ä¸­è¿˜æ˜¯é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè®°å½•å¦‚ä¸‹ï¼š\nModuleNotFoundError: No module named \u0026lsquo;requests\u0026rsquo; ../repo/repo init -u https://gitee.com/weidongshan/manifests.git -b linux-sdk -m stm32mp1/100ask_stm32mp157_pro_release-v2.0.xml --no-repo-verify Traceback (most recent call last): File \u0026#34;/home/nic/develop/repo/main.py\u0026#34;, line 56, in \u0026lt;module\u0026gt; from subcmds.version import Version File \u0026#34;/home/nic/develop/repo/subcmds/__init__.py\u0026#34;, line 35, in \u0026lt;module\u0026gt; mod = __import__(__name__, File \u0026#34;/home/nic/develop/repo/subcmds/selfupdate.py\u0026#34;, line 22, in \u0026lt;module\u0026gt; from subcmds.sync import _PostRepoUpgrade File \u0026#34;/home/nic/develop/repo/subcmds/sync.py\u0026#34;, line 74, in \u0026lt;module\u0026gt; from project import Project File \u0026#34;/home/nic/develop/repo/project.py\u0026#34;, line 33, in \u0026lt;module\u0026gt; import requests ModuleNotFoundError: No module named \u0026#39;requests\u0026#39; è§£å†³æ–¹æ³•ï¼š\npython -m pip install requests ModuleNotFoundError: No module named \u0026lsquo;formatter\u0026rsquo; formatterå·²ç»åœ¨python3.4æ ‡è®°æˆåºŸå¼ƒæ¥å£ï¼Œåœ¨python3.10å·²ç»æ­£å¼åˆ é™¤ï¼Œå¹¶ä¸”å…¶ä¾èµ–çš„cStringIOä¹Ÿå·²ç»åˆ é™¤ã€‚æ‰€ä»¥ä¸èƒ½ç®€å•çš„å®‰è£…formatteræ¨¡å—ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è§£å†³ï¼š\næ–¹æ³•ä¸€ï¼šé™ä½pythonç‰ˆæœ¬åˆ°3.9ä»¥ä¸‹ æ·»åŠ  ppa æºï¼Œæ­¤æºå¯å®‰è£…å¤šä¸ª python ç‰ˆæœ¬ sudo add-apt-repository ppa:deadsnakes/ppa å®‰è£… python3.9 sudo apt install python3.9 å»ºç«‹ python çš„ç»„,å¹¶æ·»åŠ  Python3.9 çš„å¯é€‰é¡¹ï¼Œä¼˜å…ˆçº§ä¸º 1 sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.9 1 éªŒè¯å½“å‰ python æ˜¯å¦æ˜¯ 3.9 ç‰ˆæœ¬ python --version å¦‚æœä¸æ˜¯ï¼Œç”¨ä»¥ä¸‹å‘½ä»¤æ‰‹åŠ¨é…ç½®ä¸€ä¸‹ sudo update-alternatives --config python æ–¹æ³•äºŒï¼šä¿®æ”¹repoæºç  å°†repo/repo/subcmds/help.pyæ–‡ä»¶æ›¿æ¢ä¸ºå¦‚ä¸‹å†…å®¹ï¼š\nä¹Ÿå¯ä»¥å‚è€ƒGoogleä¿®å¤åçš„ä»£ç ï¼Œæ ¹æ®diffä¿®æ”¹æ–‡ä»¶ã€‚\n# -*- coding:utf-8 -*- # # Copyright (C) 2008 The Android Open Source Project # # Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. from __future__ import print_function import re import sys import textwrap from subcmds import all_commands from color import Coloring from command import PagedCommand, MirrorSafeCommand, GitcAvailableCommand, GitcClientCommand import gitc_utils class Help(PagedCommand, MirrorSafeCommand): common = False helpSummary = \u0026#34;Display detailed help on a command\u0026#34; helpUsage = \u0026#34;\u0026#34;\u0026#34; %prog [--all|command] \u0026#34;\u0026#34;\u0026#34; helpDescription = \u0026#34;\u0026#34;\u0026#34; Displays detailed usage information about a command. \u0026#34;\u0026#34;\u0026#34; def _PrintCommands(self, commandNames): \u0026#34;\u0026#34;\u0026#34;Helper to display |commandNames| summaries.\u0026#34;\u0026#34;\u0026#34; maxlen = 0 for name in commandNames: maxlen = max(maxlen, len(name)) fmt = \u0026#39; %%-%ds %%s\u0026#39; % maxlen for name in commandNames: command = all_commands[name]() try: summary = command.helpSummary.strip() except AttributeError: summary = \u0026#39;\u0026#39; print(fmt % (name, summary)) def _PrintAllCommands(self): print(\u0026#39;usage: repo COMMAND [ARGS]\u0026#39;) print(\u0026#39;The complete list of recognized repo commands are:\u0026#39;) commandNames = list(sorted(all_commands)) self._PrintCommands(commandNames) print(\u0026#34;See \u0026#39;repo help \u0026lt;command\u0026gt;\u0026#39; for more information on a \u0026#34; \u0026#39;specific command.\u0026#39;) def _PrintCommonCommands(self): print(\u0026#39;usage: repo COMMAND [ARGS]\u0026#39;) print(\u0026#39;The most commonly used repo commands are:\u0026#39;) def gitc_supported(cmd): if not isinstance(cmd, GitcAvailableCommand) and not isinstance(cmd, GitcClientCommand): return True if self.manifest.isGitcClient: return True if isinstance(cmd, GitcClientCommand): return False if gitc_utils.get_gitc_manifest_dir(): return True return False commandNames = list(sorted([name for name, command in all_commands.items() if command.common and gitc_supported(command)])) self._PrintCommands(commandNames) print( \u0026#34;See \u0026#39;repo help \u0026lt;command\u0026gt;\u0026#39; for more information on a specific command.\\n\u0026#34; \u0026#34;See \u0026#39;repo help --all\u0026#39; for a complete list of recognized commands.\u0026#34;) def _PrintCommandHelp(self, cmd, header_prefix=\u0026#39;\u0026#39;): class _Out(Coloring): def __init__(self, gc): Coloring.__init__(self, gc, \u0026#39;help\u0026#39;) self.heading = self.printer(\u0026#39;heading\u0026#39;, attr=\u0026#39;bold\u0026#39;) self._first = True def _PrintSection(self, heading, bodyAttr): try: body = getattr(cmd, bodyAttr) except AttributeError: return if body == \u0026#39;\u0026#39; or body is None: return if not self._first: self.nl() self._first = False self.heading(\u0026#39;%s%s\u0026#39;, header_prefix, heading) self.nl() self.nl() me = \u0026#39;repo %s\u0026#39; % cmd.NAME body = body.strip() body = body.replace(\u0026#39;%prog\u0026#39;, me) # Extract the title, but skip any trailing {#anchors}. asciidoc_hdr = re.compile(r\u0026#39;^\\n?#+ ([^{]+)(\\{#.+\\})?$\u0026#39;) for para in body.split(\u0026#34;\\n\\n\u0026#34;): if para.startswith(\u0026#39; \u0026#39;): self.write(\u0026#39;%s\u0026#39;, para) self.nl() self.nl() continue m = asciidoc_hdr.match(para) if m: self.heading(\u0026#39;%s%s\u0026#39;, header_prefix, m.group(1)) self.nl() self.nl() continue lines = textwrap.wrap(para.replace(\u0026#39; \u0026#39;, \u0026#39; \u0026#39;), width=80, break_long_words=False, break_on_hyphens=False) for line in lines: self.write(\u0026#39;%s\u0026#39;, line) self.nl() self.nl() out = _Out(self.manifest.globalConfig) out._PrintSection(\u0026#39;Summary\u0026#39;, \u0026#39;helpSummary\u0026#39;) cmd.OptionParser.print_help() out._PrintSection(\u0026#39;Description\u0026#39;, \u0026#39;helpDescription\u0026#39;) def _PrintAllCommandHelp(self): for name in sorted(all_commands): cmd = all_commands[name]() cmd.manifest = self.manifest self._PrintCommandHelp(cmd, header_prefix=\u0026#39;[%s] \u0026#39; % (name,)) def _Options(self, p): p.add_option(\u0026#39;-a\u0026#39;, \u0026#39;--all\u0026#39;, dest=\u0026#39;show_all\u0026#39;, action=\u0026#39;store_true\u0026#39;, help=\u0026#39;show the complete list of commands\u0026#39;) p.add_option(\u0026#39;--help-all\u0026#39;, dest=\u0026#39;show_all_help\u0026#39;, action=\u0026#39;store_true\u0026#39;, help=\u0026#39;show the --help of all commands\u0026#39;) def Execute(self, opt, args): if len(args) == 0: if opt.show_all_help: self._PrintAllCommandHelp() elif opt.show_all: self._PrintAllCommands() else: self._PrintCommonCommands() elif len(args) == 1: name = args[0] try: cmd = all_commands[name]() except KeyError: print(\u0026#34;repo: \u0026#39;%s\u0026#39; is not a repo command.\u0026#34; % name, file=sys.stderr) sys.exit(1) cmd.manifest = self.manifest self._PrintCommandHelp(cmd) else: self._PrintCommandHelp(self) ","permalink":"https://lifeislife.cn/posts/%E5%B5%8C%E5%85%A5%E5%BC%8Flinux%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91/","summary":"\u003cp\u003eé€šè¿‡\u003ca href=\"https://pan.baidu.com/s/1Gnh9G8a05LSgHYlohyl93Q?pwd=root#list/path=%2F\"\u003eæ–‡æ¡£èµ„æ–™ç™¾åº¦ç½‘ç›˜\u003c/a\u003eä¸‹è½½é…å¥—èµ„æ–™ï¼Œå­¦ä¹ æ‰‹å†Œç›®å½•ä¸­æœ‰åµŒå…¥å¼Linuxåº”ç”¨å¼€å‘å®Œå…¨æ‰‹å†ŒV5.1_STM32MP157_Proå¼€å‘æ¿.pdfï¼Œé‡Œé¢æœ‰è¯¦ç»†çš„å¼€å‘ç¯å¢ƒæ­å»ºæ­¥éª¤ï¼Œä½†æ˜¯åœ¨æ­å»ºè¿‡ç¨‹ä¸­è¿˜æ˜¯é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè®°å½•å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003ch2 id=\"modulenotfounderror-no-module-named-requests\"\u003eModuleNotFoundError: No module named \u0026lsquo;requests\u0026rsquo;\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e../repo/repo init -u https://gitee.com/weidongshan/manifests.git -b linux-sdk -m stm32mp1/100ask_stm32mp157_pro_release-v2.0.xml --no-repo-verify\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eTraceback \u003cspan class=\"o\"\u003e(\u003c/span\u003emost recent call last\u003cspan class=\"o\"\u003e)\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  File \u003cspan class=\"s2\"\u003e\u0026#34;/home/nic/develop/repo/main.py\u0026#34;\u003c/span\u003e, line 56, in \u0026lt;module\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    from subcmds.version import Version\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  File \u003cspan class=\"s2\"\u003e\u0026#34;/home/nic/develop/repo/subcmds/__init__.py\u0026#34;\u003c/span\u003e, line 35, in \u0026lt;module\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nv\"\u003emod\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e __import__\u003cspan class=\"o\"\u003e(\u003c/span\u003e__name__,\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  File \u003cspan class=\"s2\"\u003e\u0026#34;/home/nic/develop/repo/subcmds/selfupdate.py\u0026#34;\u003c/span\u003e, line 22, in \u0026lt;module\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    from subcmds.sync import _PostRepoUpgrade\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  File \u003cspan class=\"s2\"\u003e\u0026#34;/home/nic/develop/repo/subcmds/sync.py\u0026#34;\u003c/span\u003e, line 74, in \u0026lt;module\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    from project import Project\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  File \u003cspan class=\"s2\"\u003e\u0026#34;/home/nic/develop/repo/project.py\u0026#34;\u003c/span\u003e, line 33, in \u0026lt;module\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    import requests\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eModuleNotFoundError: No module named \u003cspan class=\"s1\"\u003e\u0026#39;requests\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè§£å†³æ–¹æ³•ï¼š\u003c/p\u003e","title":"åµŒå…¥å¼Linuxé©±åŠ¨å¼€å‘ç¯å¢ƒæ­å»ºè¸©å‘"},{"content":"sudo apt update åœ¨æ›´æ–°æºæ—¶æŠ¥é”™ Clearsigned file isn\u0026rsquo;t valid, got \u0026lsquo;NOSPLIT\u0026rsquo; (does the network require authentication?)ã€‚\næ¢ä¸­ç§‘å¤§çš„æºè§£å†³ï¼Œå…¶ä½™æºæ— æ³•è§£å†³ã€‚\nå¦‚è¦ç”¨äºå…¶ä»–ç‰ˆæœ¬ï¼ŒæŠŠ jammy æ¢æˆå…¶ä»–ç‰ˆæœ¬ä»£å·å³å¯: 22.04ï¼šjammyï¼›20.04ï¼šfocalï¼›18.04ï¼šbionicï¼›16.04ï¼šxenialï¼›14.04ï¼štrustyã€‚\n# é»˜è®¤æ³¨é‡Šäº†æºç ä»“åº“ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse # deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse # deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse # deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse # deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3ubuntu%E6%9B%B4%E6%96%B0%E6%BA%90%E6%8A%A5%E9%94%99clearsigned-file-isn-t-valid-got-nosplit/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt update\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eåœ¨æ›´æ–°æºæ—¶æŠ¥é”™ Clearsigned file isn\u0026rsquo;t valid, got \u0026lsquo;NOSPLIT\u0026rsquo; (does the network require authentication?)ã€‚\u003c/p\u003e\n\u003cp\u003eæ¢ä¸­ç§‘å¤§çš„æºè§£å†³ï¼Œå…¶ä½™æºæ— æ³•è§£å†³ã€‚\u003c/p\u003e\n\u003cp\u003eå¦‚è¦ç”¨äºå…¶ä»–ç‰ˆæœ¬ï¼ŒæŠŠ jammy æ¢æˆå…¶ä»–ç‰ˆæœ¬ä»£å·å³å¯: 22.04ï¼šjammyï¼›20.04ï¼šfocalï¼›18.04ï¼šbionicï¼›16.04ï¼šxenialï¼›14.04ï¼štrustyã€‚\u003c/p\u003e","title":"è§£å†³Ubuntuæ›´æ–°æºæŠ¥é”™Clearsigned file isnt valid, got NOSPLIT"},{"content":"docker-compose éƒ¨ç½² version: \u0026#34;3.7\u0026#34; services: postgres: image: postgres:latest container_name: postgres ports: - 5432:5432 networks: - br-net-gitea environment: POSTGRES_USER: user POSTGRES_PASSWORD: 123456 POSTGRES_DB: gitea volumes: - ./postgresql:/var/lib/postgresql - ./data:/var/lib/postgresql/data gitea: image: gitea/gitea:1.20.5 container_name: gitea environment: - USER_UID=1000 - USER_GID=1000 - GITEA__database__DB_TYPE=postgres - GITEA__database__HOST=192.168.1.9:5432 - GITEA__database__NAME=gitea - GITEA__database__USER=user - GITEA__database__PASSWD=123456 restart: always networks: - br-net-gitea volumes: - ./data:/data - /etc/timezone:/etc/timezone:ro - /etc/localtime:/etc/localtime:ro - /home/git/.ssh/:/data/git/.ssh ports: - 3000:3000 - \u0026#34;127.0.0.1:2222:22\u0026#34; depends_on: - postgres act_runner: image: gitea/act_runner:latest environment: - GITEA_INSTANCE_URL=http://192.168.1.9:3000 - GITEA_RUNNER_REGISTRATION_TOKEN=Qw5Qf4A1bTENfIOQlc1NSNyFYMLp7TAtSujb5ihF - GITEA_RUNNER_NAME=docker_runner volumes: - /var/run/docker.sock:/var/run/docker.sock - ./act_runner/act_data:/data - ./act_runner/act_cache:/root/.cache å¸¸è§é—®é¢˜ é¦–æ¬¡ç™»å½•webæ—¶æ²¡æœ‰åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼Œå¦‚ä½•ç™»å½• æ‰“å¼€Giteaç½‘é¡µæ³¨å†Œçš„ç¬¬ä¸€ä¸ªè´¦å·å°±æ˜¯ç®¡ç†å‘˜è´¦å·ã€‚æ— éœ€ç‰¹æ®Šè®¾ç½®ã€‚ä¹Ÿæ— éœ€æ‰¾å›å¯†ç ã€‚\nä»Githubå¯¼å…¥ä»“åº“æ—¶æŠ¥é”™ï¼šä»ä¸å…è®¸çš„ä¸»æœºå¯¼å…¥ æ‰“å¼€é…ç½®æ–‡ä»¶gitea/conf/app.iniï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š\n[migrations] ALLOW_LOCALNETWORKS = true ALLOWED_DOMAINS = 127.0.0.1,192.168.31.100,github.com,*.github.com IMPORT_LOCAL_PATHS = true ;; å¯¼å…¥æœ¬åœ°ä»“åº“å¼€å…³ï¼Œfalseï¼šè®¾ç½®ä¸ºfalseï¼Œé˜²æ­¢æ‰€æœ‰ç”¨æˆ·ï¼ˆåŒ…æ‹¬adminï¼‰å¯¼å…¥æœåŠ¡å™¨ä¸Šçš„æœ¬åœ°è·¯å¾„ã€‚ docker-compose restart giteaé‡å¯å®¹å™¨ã€‚\nä»¥ä¸‹ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡å¯å®¹å™¨æ‰èƒ½ç”Ÿæ•ˆï¼Œä¸å†èµ˜è¿°ã€‚\nå¦‚ä½•å¼€å¯è½¯ä»¶åŒ… [packages] ENABLED = true å¼€å¯action [actions] ENABLED=true error response from daemon server gave http response to https client docker login æŠ¥é”™\né…ç½®/etc/docker/daemon.json\n\u0026#34;insecure-registries\u0026#34;: [ \u0026#34;192.168.1.9:2010\u0026#34; ] å¦‚ä½•ä¸Šä¼ dockeré•œåƒåˆ°giteaåˆ¶å“åº“ # ç™»å½•ä½ çš„é•œåƒä»“åº“ï¼Œä¹Ÿå°±æ˜¯ä½ çš„ Gitea æœåŠ¡å™¨åœ°å€ docker login 192.168.1.9:2010 # ä»å®˜æ–¹ä»“åº“æ‹‰å–ä¸€ä¸ª nginx:latest é•œåƒï¼Œå¹¶æ”¹å docker pull nginx:latest docker tag nginx:latest 192.168.1.9:2010/zhangsan/nginx:latest # æ¨é€é•œåƒåˆ° Gitea æœåŠ¡å™¨ docker push 192.168.1.9:2010/zhangsan/nginx:latest ","permalink":"https://lifeislife.cn/posts/%E4%BD%BF%E7%94%A8gitea%E9%83%A8%E7%BD%B2%E4%B8%AA%E4%BA%BA%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93/","summary":"\u003ch1 id=\"docker-compose-éƒ¨ç½²\"\u003edocker-compose éƒ¨ç½²\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yml\" data-lang=\"yml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003eversion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;3.7\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"nt\"\u003eservices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003epostgres\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003epostgres:latest\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003epostgres\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eports\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"m\"\u003e5432\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e5432\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003enetworks\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003ebr-net-gitea\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ePOSTGRES_USER\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003euser\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"m\"\u003e123456\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ePOSTGRES_DB\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003egitea\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003evolumes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e./postgresql:/var/lib/postgresql\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e./data:/var/lib/postgresql/data\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003egitea\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003egitea/gitea:1.20.5\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003egitea\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eUSER_UID=1000\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eUSER_GID=1000\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eGITEA__database__DB_TYPE=postgres\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eGITEA__database__HOST=192.168.1.9:5432\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eGITEA__database__NAME=gitea\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eGITEA__database__USER=user\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eGITEA__database__PASSWD=123456\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003erestart\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003ealways\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003enetworks\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003ebr-net-gitea\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003evolumes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e./data:/data\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/etc/timezone:/etc/timezone:ro\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/etc/localtime:/etc/localtime:ro\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/home/git/.ssh/:/data/git/.ssh\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eports\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"m\"\u003e3000\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e3000\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;127.0.0.1:2222:22\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edepends_on\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003epostgres\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003eact_runner\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003egitea/act_runner:latest\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eGITEA_INSTANCE_URL=http://192.168.1.9:3000\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eGITEA_RUNNER_REGISTRATION_TOKEN=Qw5Qf4A1bTENfIOQlc1NSNyFYMLp7TAtSujb5ihF\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eGITEA_RUNNER_NAME=docker_runner\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003evolumes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/var/run/docker.sock:/var/run/docker.sock\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e./act_runner/act_data:/data\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e./act_runner/act_cache:/root/.cache\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"å¸¸è§é—®é¢˜\"\u003eå¸¸è§é—®é¢˜\u003c/h1\u003e\n\u003ch2 id=\"é¦–æ¬¡ç™»å½•webæ—¶æ²¡æœ‰åˆ›å»ºç®¡ç†å‘˜è´¦å·å¦‚ä½•ç™»å½•\"\u003eé¦–æ¬¡ç™»å½•webæ—¶æ²¡æœ‰åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼Œå¦‚ä½•ç™»å½•\u003c/h2\u003e\n\u003cp\u003eæ‰“å¼€Giteaç½‘é¡µæ³¨å†Œçš„ç¬¬ä¸€ä¸ªè´¦å·å°±æ˜¯ç®¡ç†å‘˜è´¦å·ã€‚æ— éœ€ç‰¹æ®Šè®¾ç½®ã€‚ä¹Ÿæ— éœ€æ‰¾å›å¯†ç ã€‚\u003c/p\u003e","title":"ä½¿ç”¨Giteaéƒ¨ç½²ä¸ªäººä»£ç ä»“åº“"},{"content":"ä¹°çš„ä¸€äº›è¯¾ç¨‹é…å¥—èµ„æ–™éƒ½æ˜¯ PDF æ ¼å¼çš„ï¼Œä¸ºäº†é˜²æ­¢ç›—ç‰ˆéƒ½äº‹å…ˆç”¨çš„å›¾ç‰‡è½¬æˆçš„ PDFï¼Œè¿™æ · PDF é‡Œçš„å†…å®¹æ—¢æ²¡æ³•å¤åˆ¶ä¹Ÿæ²¡æ³•æœç´¢ï¼Œåœ¨æŸ¥æ‰¾èµ„æ–™é‡Œçš„å…³é”®è¯çš„æ—¶å€™å°±å¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å°±æƒ³ç€æŠŠè¿™äº› PDF è½¬æˆå¯æœç´¢çš„ PDFã€‚æ‰¾åˆ°äº†ä¸€æ¬¾å·¥å…·å«åš ocrmypdfï¼Œå¯ä»¥æŠŠ PDF è½¬æˆå¯æœç´¢çš„ PDFï¼Œè€Œä¸”è¿˜æ”¯æŒä¸­æ–‡ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ã€‚è¯¦ç»†ä½¿ç”¨æ–‡æ¡£å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ OCRmyPDF documentationã€‚\nå®‰è£… sudo apt install ocrmypdf ä½¿ç”¨ æŒ‡å®š OCR çš„è¯­è¨€ å®‰è£…è¯­è¨€åŒ…\nsudo apt install tesseract-ocr-chi-sim æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\n$ tesseract --list-langs List of available languages (3): chi_sim eng osd æ³¨æ„å‚æ•° -l åé¢çš„è¯­è¨€åŒ…åç§°æ˜¯ä¸‹åˆ’çº¿ï¼Œè€Œä¸æ˜¯çŸ­æ¨ªçº¿ã€‚\nocrmypdf -l chi_sim input.pdf output.pdf $ ocrmypdf -l chi_sim --redo-ocr input.pdf output.pdf Scanning contents: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 752/752 [00:14\u0026lt;00:00, 51.36page/s] Start processing 24 pages concurrently 33 redoing OCR 26 [tesseract] lots of diacritics - possibly poor OCR 54 [tesseract] lots of diacritics - possibly poor OCR 88 [tesseract] lots of diacritics - possibly poor OCR 119 [tesseract] lots of diacritics - possibly poor OCR 203 [tesseract] lots of diacritics - possibly poor OCR 256 [tesseract] lots of diacritics - possibly poor OCR 265 [tesseract] lots of diacritics - possibly poor OCR 347 [tesseract] lots of diacritics - possibly poor OCR 376 [tesseract] lots of diacritics - possibly poor OCR 383 [tesseract] lots of diacritics - possibly poor OCR 386 [tesseract] lots of diacritics - possibly poor OCR 402 [tesseract] lots of diacritics - possibly poor OCR 404 [tesseract] lots of diacritics - possibly poor OCR 403 [tesseract] lots of diacritics - possibly poor OCR 412 [tesseract] lots of diacritics - possibly poor OCR 415 [tesseract] lots of diacritics - possibly poor OCR 410 [tesseract] lots of diacritics - possibly poor OCR 439 [tesseract] lots of diacritics - possibly poor OCR 519 [tesseract] lots of diacritics - possibly poor OCR 526 [tesseract] lots of diacritics - possibly poor OCR 587 [tesseract] lots of diacritics - possibly poor OCR 591 [tesseract] lots of diacritics - possibly poor OCR 595 [tesseract] lots of diacritics - possibly poor OCR 607 [tesseract] lots of diacritics - possibly poor OCR 644 [tesseract] lots of diacritics - possibly poor OCR 661 [tesseract] lots of diacritics - possibly poor OCR 682 [tesseract] lots of diacritics - possibly poor OCR 720 [tesseract] lots of diacritics - possibly poor OCR 742 [tesseract] lots of diacritics - possibly poor OCR OCR: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 752.0/752.0 [03:41\u0026lt;00:00, 3.40page/s] Postprocessing... Some input metadata could not be copied because it is not permitted in PDF/A. You may wish to examine the output PDF\u0026#39;s XMP metadata. PDF/A conversion: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 752/752 [01:09\u0026lt;00:00, 10.80page/s] Recompressing JPEGs: 0image [00:00, ?image/s] Deflating JPEGs: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 756/756 [00:00\u0026lt;00:00, 920.21image/s] JBIG2: 0item [00:00, ?item/s] Optimize ratio: 1.20 savings: 17.0% Output file is okay but is not PDF/A (seems to be No PDF/A metadata in XMP) è½¬æ¢çš„ç»“æœè¿˜ä¸é”™ï¼Œé¡µé¢æ’ç‰ˆä¸ä¼šæ”¹å˜ï¼Œä¿æŒåŸæ ·ï¼Œä½†æ˜¯æœç´¢æ–‡å­—æ—¶å¯èƒ½éœ€è¦ç”¨ç©ºæ ¼åˆ†å¼€ã€‚\n","permalink":"https://lifeislife.cn/posts/ocrmypdf-%E8%AE%A9pdf%E5%8F%AF%E6%90%9C%E7%B4%A2/","summary":"\u003cp\u003eä¹°çš„ä¸€äº›è¯¾ç¨‹é…å¥—èµ„æ–™éƒ½æ˜¯ PDF æ ¼å¼çš„ï¼Œä¸ºäº†é˜²æ­¢ç›—ç‰ˆéƒ½äº‹å…ˆç”¨çš„å›¾ç‰‡è½¬æˆçš„ PDFï¼Œè¿™æ · PDF é‡Œçš„å†…å®¹æ—¢æ²¡æ³•å¤åˆ¶ä¹Ÿæ²¡æ³•æœç´¢ï¼Œåœ¨æŸ¥æ‰¾èµ„æ–™é‡Œçš„å…³é”®è¯çš„æ—¶å€™å°±å¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å°±æƒ³ç€æŠŠè¿™äº› PDF è½¬æˆå¯æœç´¢çš„ PDFã€‚æ‰¾åˆ°äº†ä¸€æ¬¾å·¥å…·å«åš ocrmypdfï¼Œå¯ä»¥æŠŠ PDF è½¬æˆå¯æœç´¢çš„ PDFï¼Œè€Œä¸”è¿˜æ”¯æŒä¸­æ–‡ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ã€‚è¯¦ç»†ä½¿ç”¨æ–‡æ¡£å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£\u003ca href=\"https://ocrmypdf.readthedocs.io/en/latest/installation.html\"\u003e OCRmyPDF documentation\u003c/a\u003eã€‚\u003c/p\u003e","title":"ocrmypdf è®© PDF å¯æœç´¢"},{"content":" æœ¬æ¬¡å®éªŒæ˜¯æ¸…åå¤§å­¦æ“ä½œç³»ç»Ÿè¯¾ç¨‹çš„è¯¾ç¨‹å®éªŒï¼Œå®éªŒå†…å®¹æ˜¯åŸºäº RISC-V æ¶æ„çš„ uCore æ“ä½œç³»ç»Ÿã€‚æœ¬æ¬¡å®éªŒçš„ç›®çš„æ˜¯æ­å»ºå®éªŒç¯å¢ƒï¼Œä¸ºåç»­å®éªŒåšå‡†å¤‡ã€‚æŒ‡å¯¼ä¹¦å‚è€ƒuCore-Tutorial-Guide-2023S æ–‡æ¡£ã€‚æœ¬ç³»åˆ—æ–‡ç« å†…å®¹ä¸»è¦æ˜¯æŒ‡å¯¼ä¹¦çš„è¡¥å……ä»¥åŠæˆ‘åœ¨å®éªŒè¿‡ç¨‹çš„ä¸€äº›ç†è§£ã€‚\næœ¬ç« æ²¡æœ‰ä»€ä¹ˆéœ€è¦ç‰¹åˆ«è¯´æ˜çš„ï¼ŒæŒ‡å¯¼æ‰‹å†Œååˆ†è¯¦ç»†ï¼ŒæŒ‰ç…§æŒ‡å¯¼æ‰‹å†Œçš„æ­¥éª¤ä¸€æ­¥æ­¥æ¥å°±å¯ä»¥äº†ã€‚å› ä¸ºå¹³æ—¶ä¹Ÿåœ¨ç”¨ WSL2 å¼€å‘ï¼Œæ‰€ä»¥é…ç½®ååˆ†é¡ºåˆ©ï¼Œæ²¡æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« å°±å½“å å‘äº†ï¼Œå¦‚æœåç»­æœ‰ä»€ä¹ˆéœ€è¦è¡¥å……çš„å†æ¥æ›´æ–°ã€‚\n","permalink":"https://lifeislife.cn/posts/ucore-%E5%AE%9E%E9%AA%8C%E7%AC%AC0%E7%AB%A0-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","summary":"\u003cblockquote\u003e\n\u003cp\u003eæœ¬æ¬¡å®éªŒæ˜¯æ¸…åå¤§å­¦æ“ä½œç³»ç»Ÿè¯¾ç¨‹çš„è¯¾ç¨‹å®éªŒï¼Œå®éªŒå†…å®¹æ˜¯åŸºäº RISC-V æ¶æ„çš„ uCore æ“ä½œç³»ç»Ÿã€‚æœ¬æ¬¡å®éªŒçš„ç›®çš„æ˜¯æ­å»ºå®éªŒç¯å¢ƒï¼Œä¸ºåç»­å®éªŒåšå‡†å¤‡ã€‚æŒ‡å¯¼ä¹¦å‚è€ƒ\u003ca href=\"https://learningos.github.io/uCore-Tutorial-Guide-2023S/index.html\"\u003euCore-Tutorial-Guide-2023S æ–‡æ¡£\u003c/a\u003eã€‚æœ¬ç³»åˆ—æ–‡ç« å†…å®¹ä¸»è¦æ˜¯æŒ‡å¯¼ä¹¦çš„è¡¥å……ä»¥åŠæˆ‘åœ¨å®éªŒè¿‡ç¨‹çš„ä¸€äº›ç†è§£ã€‚\u003c/p\u003e","title":"uCore-å®éªŒç¬¬ 0 ç«  - å®éªŒç¯å¢ƒæ­å»º"},{"content":"äº†è§£ç³»ç»Ÿè°ƒç”¨ æ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿè°ƒç”¨ï¼ˆsyscallï¼‰æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™åº”ç”¨ç¨‹åºä½¿ç”¨çš„ä¸€ç§æ¥å£ã€‚å®ƒå…è®¸åº”ç”¨ç¨‹åºé€šè¿‡å‘æ“ä½œç³»ç»Ÿå‘é€è¯·æ±‚ï¼Œæ¥æ‰§è¡Œä¸€äº›å¿…é¡»ç”±æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ä»»åŠ¡ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶ã€åˆ›å»ºè¿›ç¨‹ã€åˆ†é…å†…å­˜ç­‰ã€‚\né€šä¿—åœ°è¯´ï¼Œå¯ä»¥æŠŠæ“ä½œç³»ç»Ÿçœ‹ä½œä¸€ä¸ªå·¨å¤§çš„æœåŠ¡å‘˜ï¼Œè€Œåº”ç”¨ç¨‹åºå°±åƒæ˜¯é¡¾å®¢ã€‚åº”ç”¨ç¨‹åºä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶æˆ–æ‰§è¡Œç‰¹æƒæ“ä½œï¼Œå› ä¸ºè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šæˆ–ä¸å®‰å…¨ã€‚æ‰€ä»¥ï¼Œåº”ç”¨ç¨‹åºéœ€è¦é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥ä¸æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼Œè¯·æ±‚æ“ä½œç³»ç»Ÿä»£è¡¨å®ƒå®ŒæˆæŸäº›ä»»åŠ¡ã€‚\nå½“åº”ç”¨ç¨‹åºéœ€è¦æ“ä½œç³»ç»Ÿæ‰§è¡Œç‰¹å®šçš„åŠŸèƒ½æ—¶ï¼Œå®ƒä¼šè°ƒç”¨é€‚å½“çš„ç³»ç»Ÿè°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¼ é€’å‚æ•°ç»™å®ƒã€‚ç„¶åæ“ä½œç³»ç»Ÿä¼šæ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶æ ¹æ®è¯·æ±‚çš„ç±»å‹å’Œå‚æ•°æ¥æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚å®Œæˆåï¼Œæ“ä½œç³»ç»Ÿä¼šå°†æ‰§è¡Œç»“æœè¿”å›ç»™åº”ç”¨ç¨‹åºã€‚\nåœ¨ RISC-V æ¶æ„ä¸­ï¼Œç³»ç»Ÿè°ƒç”¨æ˜¯é€šè¿‡ä½¿ç”¨ç‰¹å®šçš„æŒ‡ä»¤æ¥å®ç°çš„ã€‚å…·ä½“æ¥è¯´ï¼ŒRISC-V æ¶æ„æä¾›äº†ä¸€ä¸ªç§°ä¸º ecallï¼ˆenvironment callï¼‰çš„æŒ‡ä»¤æ¥è§¦å‘ç³»ç»Ÿè°ƒç”¨ã€‚\nè¦ä½¿ç”¨ syscallï¼Œåœ¨ RISC-V æ±‡ç¼–ä»£ç ä¸­å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥å®Œæˆï¼š\nå°†ç³»ç»Ÿè°ƒç”¨ç¼–å·ï¼ˆsyscall numberï¼‰æ”¾å…¥å¯„å­˜å™¨ a7 ä¸­ï¼Œè¯¥ç¼–å·å¯¹åº”äºæ‰€éœ€çš„ç³»ç»Ÿè°ƒç”¨åŠŸèƒ½ã€‚ å°†ç³»ç»Ÿè°ƒç”¨æ‰€éœ€çš„å‚æ•°æ”¾å…¥å…¶ä»–ç›¸åº”çš„å¯„å­˜å™¨ä¸­ã€‚ä¾‹å¦‚ï¼Œå‚æ•°ä¼ é€’ç»™æ–‡ä»¶è¯»å–ç³»ç»Ÿè°ƒç”¨å¯èƒ½éœ€è¦å°†æ–‡ä»¶æè¿°ç¬¦æ”¾å…¥ a0 å¯„å­˜å™¨ï¼Œç¼“å†²åŒºåœ°å€æ”¾å…¥ a1 å¯„å­˜å™¨ï¼Œä»¥åŠè¯»å–çš„å­—èŠ‚æ•°æ”¾å…¥ a2 å¯„å­˜å™¨ã€‚ æ‰§è¡Œ ecall æŒ‡ä»¤ã€‚è¿™ä¼šè§¦å‘æ“ä½œç³»ç»Ÿå¤„ç†å½“å‰è¿è¡Œçš„ç¨‹åºçš„ç³»ç»Ÿè°ƒç”¨è¯·æ±‚ã€‚ æ“ä½œç³»ç»Ÿæ¥æ”¶åˆ°ç³»ç»Ÿè°ƒç”¨è¯·æ±‚åï¼Œæ ¹æ®å¯„å­˜å™¨ a7 ä¸­çš„ç³»ç»Ÿè°ƒç”¨ç¼–å·å’Œå…¶ä»–å¯„å­˜å™¨ä¸­çš„å‚æ•°æ¥æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚ å½“æ“ä½œç³»ç»Ÿå®Œæˆç³»ç»Ÿè°ƒç”¨è¯·æ±‚æ—¶ï¼Œå®ƒå°†ç»“æœæ”¾å…¥é€‚å½“çš„å¯„å­˜å™¨ä¸­ï¼Œé€šå¸¸æ˜¯ a0 å¯„å­˜å™¨ã€‚ ç¨‹åºç»§ç»­æ‰§è¡Œï¼Œå¯ä»¥æ£€æŸ¥ç»“æœå¹¶è¿›è¡Œåç»­çš„å¤„ç†ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…·ä½“çš„ç³»ç»Ÿè°ƒç”¨ç¼–å·ä»¥åŠå‚æ•°çš„ä¼ é€’æ–¹å¼ä¼šæ ¹æ®æ“ä½œç³»ç»Ÿçš„å®ç°è€Œæœ‰æ‰€ä¸åŒã€‚æ‰€ä»¥åœ¨ç¼–å†™ RISC-V æ±‡ç¼–ä»£ç æ—¶ï¼Œéœ€è¦å‚è€ƒæ“ä½œç³»ç»Ÿçš„ç›¸å…³æ–‡æ¡£æ¥äº†è§£å…·ä½“çš„ç³»ç»Ÿè°ƒç”¨æ¥å£å’Œå‚æ•°ä¼ é€’æ–¹å¼ã€‚\nmakr run ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ å½“æ‰§è¡Œmake runå‘½ä»¤åï¼Œä»¥ä¸‹æ˜¯è¿è¡Œæµç¨‹çš„æ¦‚è¿°ï¼š\nå†…æ ¸ä»£ç ç¼–è¯‘ï¼šæ‰§è¡Œmake runä¼šè§¦å‘ Makefile ä¸­çš„ç›¸åº”è§„åˆ™ï¼Œä»è€Œç¼–è¯‘ç”Ÿæˆå†…æ ¸ï¼ˆkernelï¼‰äºŒè¿›åˆ¶æ–‡ä»¶ã€‚\nåŠ è½½ kernel å¹¶å¯åŠ¨ QEMUï¼šæ ¹æ® QEMUOPTS å˜é‡æŒ‡å®šçš„å‚æ•°ï¼ŒQEMU åŠ è½½ç”Ÿæˆçš„ kernel äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶å¯åŠ¨æ¨¡æ‹Ÿå™¨ã€‚\nå¼•å¯¼ä»£ç æ‰§è¡Œï¼šåœ¨æ¨¡æ‹Ÿå™¨å¯åŠ¨åï¼ŒCPU çš„é€šç”¨å¯„å­˜å™¨è¢«æ¸…é›¶ï¼Œç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰æŒ‡å‘ 0x1000 çš„ä½ç½®ï¼Œè¿™é‡Œæœ‰ç¡¬ä»¶å›ºåŒ–çš„ä¸€å°æ®µå¼•å¯¼ä»£ç ã€‚è¯¥å¼•å¯¼ä»£ç ä¼šè¿…é€Ÿè·³è½¬åˆ° 0x80000000 å¤„çš„ RustSBIï¼ˆRust Supervisor Binary Interfaceï¼‰ã€‚\nRustSBI å®Œæˆç¡¬ä»¶åˆå§‹åŒ–ï¼šRustSBI æ˜¯ä¸€ä¸ªç”¨äºä¸æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’çš„æ¥å£å±‚ã€‚åœ¨è·³è½¬åˆ° RustSBI ä¹‹åï¼Œå®ƒä¼šå®Œæˆå¿…è¦çš„ç¡¬ä»¶åˆå§‹åŒ–å·¥ä½œã€‚\næ‰§è¡Œæ“ä½œç³»ç»Ÿç¬¬ä¸€æ¡æŒ‡ä»¤ï¼šRustSBI åœ¨å®Œæˆç¡¬ä»¶åˆå§‹åŒ–åï¼Œä¼šè·³è½¬åˆ° kernel äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨å†…å­˜ä½ç½® 0x80200000 å¤„ï¼Œå¹¶å¼€å§‹æ‰§è¡Œæˆ‘ä»¬æ“ä½œç³»ç»Ÿçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚\nç»¼ä¸Šæ‰€è¿°ï¼Œæ‰§è¡Œmake runå‘½ä»¤ä¼šå®Œæˆå†…æ ¸çš„ç¼–è¯‘å’ŒåŠ è½½ï¼Œå¯åŠ¨ QEMU è™šæ‹Ÿæœºï¼Œå¹¶ç»è¿‡å¼•å¯¼ä»£ç å’Œ RustSBI çš„å¤„ç†ï¼Œæœ€ç»ˆå¼€å§‹æ‰§è¡Œæ“ä½œç³»ç»Ÿçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚\näº†è§£é“¾æ¥è„šæœ¬ # kernel.ld BASE_ADDRESS = 0x80200000; SECTIONS { . = BASE_ADDRESS; skernel = .; stext = .; .text : { *(.text.entry) # ç¬¬ä¸€è¡Œä»£ç  *(.text .text.*) } ... } kernel.ld ä¸­çš„ BASE_ADDRESS = 0x80200000 æŒ‡å®šäº†å†…æ ¸çš„åŠ è½½åœ°å€ï¼Œè¿™ä¸ªåœ°å€å“ªæ¥çš„ï¼Ÿ ä»¥ä¸‹å†…å®¹æ‘˜è‡ªå‚è€ƒrCore-Tutorial-Book-v3 3.6.0-alpha.1 æ–‡æ¡£ï¼š\nåœ¨ Qemu æ¨¡æ‹Ÿçš„ virt ç¡¬ä»¶å¹³å°ä¸Šï¼Œç‰©ç†å†…å­˜çš„èµ·å§‹ç‰©ç†åœ°å€ä¸º 0x80000000ï¼Œç‰©ç†å†…å­˜çš„é»˜è®¤å¤§å°ä¸º 128MiBï¼Œå®ƒå¯ä»¥é€šè¿‡ -m é€‰é¡¹è¿›è¡Œé…ç½®ã€‚å¦‚æœä½¿ç”¨é»˜è®¤é…ç½®çš„ 128MiB ç‰©ç†å†…å­˜åˆ™å¯¹åº”çš„ç‰©ç†åœ°å€åŒºé—´ä¸º [0x80000000,0x88000000) ã€‚å¦‚æœä½¿ç”¨ä¸Šé¢ç»™å‡ºçš„å‘½ä»¤å¯åŠ¨ Qemuï¼Œé‚£ä¹ˆåœ¨ Qemu å¼€å§‹æ‰§è¡Œä»»ä½•æŒ‡ä»¤ä¹‹å‰ï¼Œé¦–å…ˆæŠŠä¸¤ä¸ªæ–‡ä»¶åŠ è½½åˆ° Qemu çš„ç‰©ç†å†…å­˜ä¸­ï¼šå³ä½œæŠŠä½œä¸º bootloader çš„ rustsbi-qemu.bin åŠ è½½åˆ°ç‰©ç†å†…å­˜ä»¥ç‰©ç†åœ°å€ 0x80000000 å¼€å¤´çš„åŒºåŸŸä¸Šï¼ŒåŒæ—¶æŠŠå†…æ ¸é•œåƒ os.bin åŠ è½½åˆ°ä»¥ç‰©ç†åœ°å€ 0x80200000 å¼€å¤´çš„åŒºåŸŸä¸Šã€‚\nä¸ºä»€ä¹ˆåŠ è½½åˆ°è¿™ä¸¤ä¸ªä½ç½®å‘¢ï¼Ÿè¿™ä¸ Qemu æ¨¡æ‹Ÿè®¡ç®—æœºåŠ ç”µå¯åŠ¨åçš„è¿è¡Œæµç¨‹æœ‰å…³ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè®¡ç®—æœºåŠ ç”µä¹‹åçš„å¯åŠ¨æµç¨‹å¯ä»¥åˆ†æˆè‹¥å¹²ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µå‡ç”±ä¸€å±‚è½¯ä»¶æˆ– å›ºä»¶ è´Ÿè´£ï¼Œæ¯ä¸€å±‚è½¯ä»¶æˆ–å›ºä»¶çš„åŠŸèƒ½æ˜¯è¿›è¡Œå®ƒåº”å½“æ‰¿æ‹…çš„åˆå§‹åŒ–å·¥ä½œï¼Œå¹¶åœ¨æ­¤ä¹‹åè·³è½¬åˆ°ä¸‹ä¸€å±‚è½¯ä»¶æˆ–å›ºä»¶çš„å…¥å£åœ°å€ï¼Œä¹Ÿå°±æ˜¯å°†è®¡ç®—æœºçš„æ§åˆ¶æƒç§»äº¤ç»™äº†ä¸‹ä¸€å±‚è½¯ä»¶æˆ–å›ºä»¶ã€‚Qemu æ¨¡æ‹Ÿçš„å¯åŠ¨æµç¨‹åˆ™å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šç¬¬ä¸€ä¸ªé˜¶æ®µç”±å›ºåŒ–åœ¨ Qemu å†…çš„ä¸€å°æ®µæ±‡ç¼–ç¨‹åºè´Ÿè´£ï¼›ç¬¬äºŒä¸ªé˜¶æ®µç”± bootloader è´Ÿè´£ï¼›ç¬¬ä¸‰ä¸ªé˜¶æ®µåˆ™ç”±å†…æ ¸é•œåƒè´Ÿè´£ã€‚\nç¬¬ä¸€é˜¶æ®µï¼šå°†å¿…è¦çš„æ–‡ä»¶è½½å…¥åˆ° Qemu ç‰©ç†å†…å­˜ä¹‹åï¼ŒQemu CPU çš„ç¨‹åºè®¡æ•°å™¨ï¼ˆPC, Program Counterï¼‰ä¼šè¢«åˆå§‹åŒ–ä¸º 0x1000ï¼Œå› æ­¤ Qemu å®é™…æ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ä½äºç‰©ç†åœ°å€ 0x1000ï¼Œæ¥ä¸‹æ¥å®ƒå°†æ‰§è¡Œå¯¥å¯¥æ•°æ¡æŒ‡ä»¤å¹¶è·³è½¬åˆ°ç‰©ç†åœ°å€ 0x80000000 å¯¹åº”çš„æŒ‡ä»¤å¤„å¹¶è¿›å…¥ç¬¬äºŒé˜¶æ®µã€‚ä»åé¢çš„è°ƒè¯•è¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œè¯¥åœ°å€ 0x80000000 è¢«å›ºåŒ–åœ¨ Qemu ä¸­ï¼Œä½œä¸º Qemu çš„ä½¿ç”¨è€…ï¼Œæˆ‘ä»¬åœ¨ä¸è§¦åŠ Qemu æºä»£ç çš„æƒ…å†µä¸‹æ— æ³•è¿›è¡Œæ›´æ”¹ã€‚\nç¬¬äºŒé˜¶æ®µï¼šç”±äº Qemu çš„ç¬¬ä¸€é˜¶æ®µå›ºå®šè·³è½¬åˆ° 0x80000000ï¼Œæˆ‘ä»¬éœ€è¦å°†è´Ÿè´£ç¬¬äºŒé˜¶æ®µçš„ bootloader rustsbi-qemu.bin æ”¾åœ¨ä»¥ç‰©ç†åœ°å€ 0x80000000 å¼€å¤´çš„ç‰©ç†å†…å­˜ä¸­ï¼Œè¿™æ ·å°±èƒ½ä¿è¯ 0x80000000 å¤„æ­£å¥½ä¿å­˜ bootloader çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚åœ¨è¿™ä¸€é˜¶æ®µï¼Œbootloader è´Ÿè´£å¯¹è®¡ç®—æœºè¿›è¡Œä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œå¹¶è·³è½¬åˆ°ä¸‹ä¸€é˜¶æ®µè½¯ä»¶çš„å…¥å£ï¼Œåœ¨ Qemu ä¸Šå³å¯å®ç°å°†è®¡ç®—æœºæ§åˆ¶æƒç§»äº¤ç»™æˆ‘ä»¬çš„å†…æ ¸é•œåƒ os.binã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸åŒçš„ bootloader è€Œè¨€ï¼Œä¸‹ä¸€é˜¶æ®µè½¯ä»¶çš„å…¥å£ä¸ä¸€å®šç›¸åŒï¼Œè€Œä¸”è·å–è¿™ä¸€ä¿¡æ¯çš„æ–¹å¼å’Œæ—¶é—´ç‚¹ä¹Ÿä¸åŒï¼šå…¥å£åœ°å€å¯èƒ½æ˜¯ä¸€ä¸ªé¢„å…ˆçº¦å®šå¥½çš„å›ºå®šçš„å€¼ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åœ¨ bootloader è¿è¡ŒæœŸé—´æ‰åŠ¨æ€è·å–åˆ°çš„å€¼ã€‚æˆ‘ä»¬é€‰ç”¨çš„ RustSBI åˆ™æ˜¯å°†ä¸‹ä¸€é˜¶æ®µçš„å…¥å£åœ°å€é¢„å…ˆçº¦å®šä¸ºå›ºå®šçš„ 0x80200000ï¼Œåœ¨ RustSBI çš„åˆå§‹åŒ–å·¥ä½œå®Œæˆä¹‹åï¼Œå®ƒä¼šè·³è½¬åˆ°è¯¥åœ°å€å¹¶å°†è®¡ç®—æœºæ§åˆ¶æƒç§»äº¤ç»™ä¸‹ä¸€é˜¶æ®µçš„è½¯ä»¶â€”â€”ä¹Ÿå³æˆ‘ä»¬çš„å†…æ ¸é•œåƒã€‚\nç¬¬ä¸‰é˜¶æ®µï¼šä¸ºäº†æ­£ç¡®åœ°å’Œä¸Šä¸€é˜¶æ®µçš„ RustSBI å¯¹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å†…æ ¸çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ä½äºç‰©ç†åœ°å€ 0x80200000 å¤„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†å†…æ ¸é•œåƒé¢„å…ˆåŠ è½½åˆ° Qemu ç‰©ç†å†…å­˜ä»¥åœ°å€ 0x80200000 å¼€å¤´çš„åŒºåŸŸä¸Šã€‚ä¸€æ—¦ CPU å¼€å§‹æ‰§è¡Œå†…æ ¸çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œè¯æ˜è®¡ç®—æœºçš„æ§åˆ¶æƒå·²ç»è¢«ç§»äº¤ç»™æˆ‘ä»¬çš„å†…æ ¸ï¼Œä¹Ÿå°±è¾¾åˆ°äº†æœ¬èŠ‚çš„ç›®æ ‡ã€‚\nä»¥ä¸Šè¿‡ç¨‹æ˜¯ QEMU ä¸­çš„å¯åŠ¨æµç¨‹ï¼ŒçœŸå®è®¡ç®—æœºçš„åŠ ç”µå¯åŠ¨æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š ç¬¬ä¸€é˜¶æ®µï¼šåŠ ç”µå CPU çš„ PC å¯„å­˜å™¨è¢«è®¾ç½®ä¸ºè®¡ç®—æœºå†…éƒ¨åªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼ŒRead-only Memoryï¼‰çš„ç‰©ç†åœ°å€ï¼Œéšå CPU å¼€å§‹è¿è¡Œ ROM å†…çš„è½¯ä»¶ã€‚æˆ‘ä»¬ä¸€èˆ¬å°†è¯¥è½¯ä»¶ç§°ä¸ºå›ºä»¶ï¼ˆFirmwareï¼‰ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å¯¹ CPU è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œå°†åç»­é˜¶æ®µçš„ bootloader çš„ä»£ç ã€æ•°æ®ä»ç¡¬ç›˜è½½å…¥åˆ°ç‰©ç†å†…å­˜ï¼Œæœ€åè·³è½¬åˆ°é€‚å½“çš„åœ°å€å°†è®¡ç®—æœºæ§åˆ¶æƒè½¬ç§»ç»™ bootloaderã€‚å®ƒå¤§è‡´å¯¹åº”äº Qemu å¯åŠ¨çš„ç¬¬ä¸€é˜¶æ®µï¼Œå³åœ¨ç‰©ç†åœ°å€ 0x1000 å¤„æ”¾ç½®çš„è‹¥å¹²æ¡æŒ‡ä»¤ã€‚å¯ä»¥çœ‹åˆ° Qemu ä¸Šçš„å›ºä»¶éå¸¸ç®€å•ï¼Œå› ä¸ºå®ƒå¹¶ä¸éœ€è¦è´Ÿè´£å°† bootloader ä»ç¡¬ç›˜åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ï¼Œè¿™ä¸ªä»»åŠ¡æ­¤å‰å·²ç»ç”± Qemu è‡ªèº«å®Œæˆäº†ã€‚ ç¬¬äºŒé˜¶æ®µï¼šbootloader åŒæ ·å®Œæˆä¸€äº› CPU çš„åˆå§‹åŒ–å·¥ä½œï¼Œå°†æ“ä½œç³»ç»Ÿé•œåƒä»ç¡¬ç›˜åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ï¼Œæœ€åè·³è½¬åˆ°é€‚å½“åœ°å€å°†æ§åˆ¶æƒè½¬ç§»ç»™æ“ä½œç³»ç»Ÿã€‚å¯ä»¥çœ‹åˆ°ä¸€èˆ¬æƒ…å†µä¸‹ bootloader éœ€è¦å®Œæˆä¸€äº›æ•°æ®åŠ è½½å·¥ä½œï¼Œè¿™ä¹Ÿå°±æ˜¯å®ƒåå­—ä¸­ loader çš„æ¥æºã€‚å®ƒå¯¹åº”äº Qemu å¯åŠ¨çš„ç¬¬äºŒé˜¶æ®µã€‚åœ¨ Qemu ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ RustSBI åŠŸèƒ½è¾ƒå¼±ï¼Œå®ƒå¹¶æ²¡æœ‰èƒ½åŠ›å®ŒæˆåŠ è½½çš„å·¥ä½œï¼Œå†…æ ¸é•œåƒå®é™…ä¸Šæ˜¯å’Œ bootloader ä¸€èµ·åœ¨ Qemu å¯åŠ¨ä¹‹å‰åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­çš„ã€‚ ç¬¬ä¸‰é˜¶æ®µï¼šæ§åˆ¶æƒè¢«è½¬ç§»ç»™æ“ä½œç³»ç»Ÿã€‚ç”±äºç¯‡å¹…æ‰€é™åé¢æˆ‘ä»¬å°±ä¸å†èµ˜è¿°äº†ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸ºäº†è®©è®¡ç®—æœºçš„å¯åŠ¨æ›´åŠ çµæ´»ï¼Œbootloader ç›®å‰å¯èƒ½éå¸¸å¤æ‚ï¼šå®ƒå¯èƒ½ä¹Ÿåˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œå¹¶ä¸”èƒ½ç®¡ç†ä¸€äº›ç¡¬ä»¶èµ„æºï¼Œä»å¤æ‚æ€§ä¸Šå®ƒå·²æ¥è¿‘ä¸€ä¸ªä¼ ç»Ÿæ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿã€‚\nç»ˆç«¯æ˜¯å¦‚ä½•æ§åˆ¶é¢œè‰²çš„ï¼Ÿ enum LOG_COLOR { RED = 31, GREEN = 32, BLUE = 34, GRAY = 90, YELLOW = 93, }; #if defined(USE_LOG_ERROR) #define errorf(fmt, ...) \\ do { \\ int tid = threadid(); \\ printf(\u0026#34;\\x1b[%dm[%s %d]\u0026#34; fmt \u0026#34;\\x1b[0m\\n\u0026#34;, RED, \u0026#34;ERROR\u0026#34;, tid, \\ ##__VA_ARGS__); \\ } while (0) #else ANSI è½¬ä¹‰ç æ˜¯ä¸€ç§ç”¨äºæ§åˆ¶ç»ˆç«¯è¾“å‡ºçš„ç‰¹æ®Šå­—ç¬¦åºåˆ—ã€‚å®ƒä»¬ç”±\\x1bï¼ˆæˆ–\\033ï¼‰å¼€å¤´ï¼Œåé¢è·Ÿç€ä¸€ç³»åˆ—æ•°å­—å’Œåˆ†å·ç»„æˆã€‚\nANSI è½¬ä¹‰ç ä¸­çš„æ•°å­—éƒ¨åˆ†ç”¨äºæŒ‡å®šä¸åŒçš„æ§åˆ¶æ“ä½œï¼Œå¦‚è®¾ç½®æ–‡æœ¬é¢œè‰²ã€èƒŒæ™¯é¢œè‰²ã€å…‰æ ‡ä½ç½®ç­‰ç­‰ã€‚å…¶ä¸­ï¼Œç”¨äºè®¾ç½®é¢œè‰²çš„è½¬ä¹‰ç åŒ…æ‹¬ä¸‰ä¸ªä¸»è¦çš„éƒ¨åˆ†ï¼š\\x1b[é¢œè‰²ä»£ç mã€‚\nå…·ä½“æ¥è¯´ï¼Œ\\x1b[è¡¨ç¤ºå¼€å§‹ä½¿ç”¨æ§åˆ¶åºåˆ—ï¼Œæ¥ä¸‹æ¥çš„æ•°å­—ä»£è¡¨ä¸åŒçš„é¢œè‰²ä»£ç ï¼Œæœ€åçš„mè¡¨ç¤ºç»“æŸæ§åˆ¶åºåˆ—ã€‚ä¾‹å¦‚ï¼Œ\\x1b[31mè¡¨ç¤ºå°†æ–‡æœ¬é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²ï¼Œè€Œ\\x1b[0mç”¨äºé‡ç½®æ‰€æœ‰å±æ€§ä¸ºé»˜è®¤å€¼ã€‚\nå½“ç»ˆç«¯é‡åˆ°è¿™æ ·çš„è½¬ä¹‰åºåˆ—æ—¶ï¼Œå®ƒä¼šè§£æå¹¶æ‰§è¡Œç›¸åº”çš„æ§åˆ¶æ“ä½œï¼Œä»è€Œå®ç°å¯¹æ–‡æœ¬é¢œè‰²ã€èƒŒæ™¯é¢œè‰²å’Œå…¶ä»–å±æ€§çš„æ§åˆ¶ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒçš„ç»ˆç«¯å¯èƒ½æ”¯æŒä¸åŒçš„ ANSI è½¬ä¹‰ç ï¼Œå¹¶ä¸”ä¸åŒæ“ä½œç³»ç»Ÿä¹Ÿå¯èƒ½æœ‰ä¸åŒçš„å®ç°ã€‚å› æ­¤ï¼Œåœ¨ç¼–å†™ä½¿ç”¨ ANSI è½¬ä¹‰ç çš„ä»£ç æ—¶ï¼Œå»ºè®®å…ˆæµ‹è¯•å¹¶ç¡®ä¿å…¶åœ¨ç›®æ ‡ç»ˆç«¯ä¸Šæ­£å¸¸å·¥ä½œã€‚\næ›´å¤šè¯¦ç»†è§£é‡Šå¯ä»¥å‚è€ƒæ–‡ç« ï¼šç»ˆç«¯é¢œè‰²æ§åˆ¶ - ç®€ä¹¦ã€‚\nåº”ç”¨ç¨‹åºè¾“å‡ºå­—ç¬¦ä¼šè°ƒç”¨ SBI æœåŠ¡ï¼ŒSBI ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ å› ä¸ºå¯¹ Rust è¯­è¨€ä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥è¿™é‡Œçš„åˆ†ææ˜¯åŸºäº C è¯­è¨€çš„ OpenSBI æ¥åˆ†æçš„ï¼Œä»–ä»¬çš„é€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæœ‰ç†Ÿæ‚‰ Rust çš„å¯ä»¥æŸ¥çœ‹ RustSBI æºç \næ ¹æ®æŒ‡å¯¼ä¹¦ä¸­çš„è§£é‡Šä»¥åŠé˜…è¯»ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“è°ƒç”¨äº† printf æœ€ç»ˆå®é™…ä¸Šæ˜¯è°ƒç”¨äº† sbi_callã€‚é‚£ä¹ˆ sbi_call æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿå› ä¸ºæˆ‘æ˜¯åšé©±åŠ¨å¼€å‘ä»¥åŠå›ºä»¶å¼€å‘çš„ï¼Œä¹Ÿç»å¸¸éœ€è¦ä½¿ç”¨ OpenSBIï¼Œæ‰€æƒ³å¤šé—®ä¸€å¥ï¼ŒOpenSBI æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼ŸOpenSBI æ˜¯å¦‚ä½•æä¾›æœåŠ¡çš„å‘¢ï¼Ÿå®ƒæ˜¯å¦‚ä½•æ‰“å°å‡ºå­—ç¬¦çš„å‘¢ï¼Ÿ\nå†…æ ¸ä¸­çš„ SBI è°ƒç”¨ æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å†…æ ¸ä¸­çš„ sbi_call éƒ½åšäº†å†™å•¥ã€‚\n// uCore-Tutorial-Code-2023S/os/sbi.c const uint64 SBI_CONSOLE_PUTCHAR = 1; void console_putchar(int c) { sbi_call(SBI_CONSOLE_PUTCHAR, c, 0, 0); } // uCore-Tutorial-Code-2023S/os/sbi.c int inline sbi_call(uint64 which, uint64 arg0, uint64 arg1, uint64 arg2) { // ä½¿ç”¨å¯„å­˜å™¨å˜é‡æ¥ä¿å­˜å‚æ•°å€¼å’Œç³»ç»Ÿè°ƒç”¨ç¼–å· register uint64 a0 asm(\u0026#34;a0\u0026#34;) = arg0; // å°† \u0026#39;arg0\u0026#39; çš„å€¼ä¿å­˜åœ¨å¯„å­˜å™¨ \u0026#39;a0\u0026#39; ä¸­ register uint64 a1 asm(\u0026#34;a1\u0026#34;) = arg1; // å°† \u0026#39;arg1\u0026#39; çš„å€¼ä¿å­˜åœ¨å¯„å­˜å™¨ \u0026#39;a1\u0026#39; ä¸­ register uint64 a2 asm(\u0026#34;a2\u0026#34;) = arg2; // å°† \u0026#39;arg2\u0026#39; çš„å€¼ä¿å­˜åœ¨å¯„å­˜å™¨ \u0026#39;a2\u0026#39; ä¸­ register uint64 a7 asm(\u0026#34;a7\u0026#34;) = which; // å°† \u0026#39;which\u0026#39; çš„å€¼ä¿å­˜åœ¨å¯„å­˜å™¨ \u0026#39;a7\u0026#39; ä¸­ // å†…è”æ±‡ç¼–ä»£ç ä½¿ç”¨ ecall æŒ‡ä»¤è¿›è¡Œç³»ç»Ÿè°ƒç”¨ asm volatile( \u0026#34;ecall\u0026#34; // ä½¿ç”¨ ecall æŒ‡ä»¤è¿›è¡Œç³»ç»Ÿè°ƒç”¨ // åœ¨è¿™æ®µä»£ç ä¸­ï¼ŒæŒ‡ä»¤ \u0026#34;ecall\u0026#34; çš„è¾“å…¥å‚æ•°æ˜¯å¯„å­˜å™¨ a0 a1 a2 å’Œ a7ï¼Œè¾“å‡ºå‚æ•°æ˜¯å¯„å­˜å™¨ a0 : \u0026#34;=r\u0026#34;(a0) // è¾“å‡ºæ“ä½œæ•°ï¼šå°†è¿”å›å€¼å­˜å‚¨åœ¨å˜é‡ \u0026#39;a0\u0026#39; ä¸­ : \u0026#34;r\u0026#34;(a0), \u0026#34;r\u0026#34;(a1), \u0026#34;r\u0026#34;(a2), \u0026#34;r\u0026#34;(a7) // è¾“å…¥æ“ä½œæ•°ï¼šä¼ é€’å‚æ•°å’Œç³»ç»Ÿè°ƒç”¨ç¼–å· : \u0026#34;memory\u0026#34; // \u0026#34;memory\u0026#34; æ ‡å¿—å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™æ¡æŒ‡ä»¤å¯èƒ½ä¼šä¿®æ”¹å†…å­˜ä¸­çš„æ•°æ®ï¼Œéœ€è¦è¿›è¡Œå†…å­˜å±éšœæ“ä½œæ¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€‚ ); return a0; // è¿”å›å­˜å‚¨åœ¨å˜é‡ \u0026#39;a0\u0026#39; ä¸­çš„å€¼ } é‚£ä¹ˆ OpenSBI å¦‚ä½•æä¾›æœåŠ¡ï¼Ÿåœ¨include/sbi/sbi_ecall.hè¿™ç§å®šä¹‰äº†æ¯ä¸ªecallæœåŠ¡å…¨å±€å˜é‡ã€‚\n//include/sbi/sbi_ecall.h extern struct sbi_ecall_extension ecall_base; extern struct sbi_ecall_extension ecall_legacy; extern struct sbi_ecall_extension ecall_time; extern struct sbi_ecall_extension ecall_rfence; extern struct sbi_ecall_extension ecall_ipi; extern struct sbi_ecall_extension ecall_vendor; extern struct sbi_ecall_extension ecall_hsm; extern struct sbi_ecall_extension ecall_srst; åœ¨lib/sbi/sbi_ecall.cä¸­æ³¨å†Œäº†æ‰€æœ‰çš„ecallæœåŠ¡ï¼Œå¹¶å°†å…¶åŠ åˆ°é“¾è¡¨ecall_exts_listä¸­ã€‚\nint sbi_ecall_init(void) { int ret; struct sbi_ecall_extension *ext; unsigned long i; for (i = 0; i \u0026lt; sbi_ecall_exts_size; i++) { ext = sbi_ecall_exts[i]; ret = sbi_ecall_register_extension(ext); if (ret) return ret; } return 0; } int sbi_ecall_register_extension(struct sbi_ecall_extension *ext) { struct sbi_ecall_extension *t; if (!ext || (ext-\u0026gt;extid_end \u0026lt; ext-\u0026gt;extid_start) || !ext-\u0026gt;handle) return SBI_EINVAL; sbi_list_for_each_entry(t, \u0026amp;ecall_exts_list, head) { unsigned long start = t-\u0026gt;extid_start; unsigned long end = t-\u0026gt;extid_end; if (end \u0026lt; ext-\u0026gt;extid_start || ext-\u0026gt;extid_end \u0026lt; start) /* no overlap */; else return SBI_EINVAL; } SBI_INIT_LIST_HEAD(\u0026amp;ext-\u0026gt;head); sbi_list_add_tail(\u0026amp;ext-\u0026gt;head, \u0026amp;ecall_exts_list); return 0; } /** * Iterate over list of given type * @param pos the type * to use as a loop cursor. * @param head the head for your list. * @param member the name of the list_struct within the struct. */ #define sbi_list_for_each_entry(pos, head, member) \\ for (pos = sbi_list_entry((head)-\u0026gt;next, typeof(*pos), member);\t\\ \u0026amp;pos-\u0026gt;member != (head); \\ pos = sbi_list_entry(pos-\u0026gt;member.next, typeof(*pos), member)) é‚£ä¹ˆæœåŠ¡ id å¦‚ä½•å’Œç›¸å¯¹åº”çš„æœåŠ¡ç»‘å®šçš„å‘¢ï¼Ÿä»¥ecall_timeä¸ºä¾‹ï¼ŒæŸ¥çœ‹å…¶ç»“æ„ä½“åŸå‹struct sbi_ecall_extension ï¼š\n// include/sbi/sbi_ecall.h: 23 struct sbi_ecall_extension { struct sbi_dlist head; unsigned long extid_start; unsigned long extid_end; int (* probe)(unsigned long extid, unsigned long *out_val); int (* handle)(unsigned long extid, unsigned long funcid, const struct sbi_trap_regs *regs, unsigned long *out_val, struct sbi_trap_info *out_trap); }; å¯ä»¥çœ‹åˆ°æœ‰ extid_startã€extid_end å’Œ handleã€‚\nç›®å‰ OpenSBI é€æ­¥å°†æ¯ä¸ªæœåŠ¡çš„å®ç°éƒ½æ”¾åœ¨äº†lib/sbiå•ç‹¬æ–‡ä»¶ä¸­ï¼Œä»¥ecall_timeä¸ºä¾‹ï¼Œå…¶å®ç°åœ¨lib/sbi/sbi_ecall_time.cä¸­ã€‚å•ç‹¬ä¸ºå…¶ç»‘å®šå›è°ƒå¤„ç†å‡½æ•°sbi_ecall_time_handlerã€‚ä½†æ˜¯è¿˜æœ‰å¾ˆå¤šæœåŠ¡çš„å®ç°è¿˜æ˜¯æ”¾åœ¨äº†lib/sbi/sbi_ecall_legacy.cä¸­ï¼Œåç»­åº”è¯¥ä¼šé€æ­¥è¿ç§»ã€‚æˆ‘ä»¬ä¸Šæ–‡ä½¿ç”¨çš„SBI_CONSOLE_PUTCHARæœåŠ¡å°±æ˜¯åœ¨è¿™é‡Œå®ç°çš„ã€‚\n// lib/sbi/sbi_ecall_legacy.c struct sbi_ecall_extension ecall_legacy = { .extid_start = SBI_EXT_0_1_SET_TIMER, .extid_end = SBI_EXT_0_1_SHUTDOWN, .handle = sbi_ecall_legacy_handler, }; static int sbi_ecall_legacy_handler(unsigned long extid, unsigned long funcid, const struct sbi_trap_regs *regs, unsigned long *out_val, struct sbi_trap_info *out_trap) { int ret = 0; struct sbi_tlb_info tlb_info; u32 source_hart = current_hartid(); ulong hmask = 0; switch (extid) { case SBI_EXT_0_1_SET_TIMER: sbi_timer_event_start((u64)regs-\u0026gt;a0); break; case SBI_EXT_0_1_CONSOLE_PUTCHAR: sbi_putc(regs-\u0026gt;a0); break; case SBI_EXT_0_1_CONSOLE_GETCHAR: ret = sbi_getc(); break; // ... }; return ret; } è¿™å°±æŠŠ id ä¸ç›¸åº”çš„æœåŠ¡å‡½æ•°ç»‘å®šã€‚ä¸€ä¸ªextidå¯¹åº”ä¸€ä¸ªhandlerã€‚\næˆ‘ä»¬å¯ä»¥åœ¨æ‰¾åˆ°SBI_EXT_0_1_CONSOLE_PUTCHARçš„å€¼ï¼Œæ˜¯ä¸ Linux å†…æ ¸é‡Œå®šä¹‰çš„å€¼æ˜¯ä¸€è‡´çš„ã€‚\n// include/sbi/sbi_ecall_interface.h /* SBI Extension IDs */ #define SBI_EXT_0_1_CONSOLE_PUTCHAR\t0x1 ecall æœåŠ¡è°ƒç”¨æµç¨‹ åœ¨ firmware/fw_base.S ä¸­æ³¨å†Œäº† Machine Mode çš„ trap handlerï¼Œå³ sbi_trap_handlerï¼›\n_start_warm: /* Setup trap handler */ la\ta4, _trap_handler csrw\tCSR_MTVEC, a4 /* CSR_MTVEC = _trap_handler */ _trap_handler: TRAP_SAVE_AND_SETUP_SP_T0 TRAP_SAVE_MEPC_MSTATUS 0 TRAP_SAVE_GENERAL_REGS_EXCEPT_SP_T0 TRAP_CALL_C_ROUTINE TRAP_RESTORE_GENERAL_REGS_EXCEPT_SP_T0 TRAP_RESTORE_MEPC_MSTATUS 0 TRAP_RESTORE_SP_T0 mret .macro\tTRAP_CALL_C_ROUTINE /* Call C routine */ add\ta0, sp, zero call\tsbi_trap_handler .endm åœ¨ lib/sbi/sbi_trap.c ä¸­å®šä¹‰äº† sbi_trap_handlerï¼Œå¤„ç†å„ç§ mcauseï¼Œæ¯”å¦‚ Illegal Instructionsï¼ŒMisaligned Load \u0026amp; Store, Supervisor \u0026amp; Machine Ecall ç­‰ã€‚\n// lib/sbi/sbi_trap.c void sbi_trap_handler(struct sbi_trap_regs *regs) { ... switch (mcause) { case CAUSE_ILLEGAL_INSTRUCTION: rc = sbi_illegal_insn_handler(mtval, regs); break; case CAUSE_MISALIGNED_LOAD: rc = sbi_misaligned_load_handler(mtval, mtval2, mtinst, regs); break; case CAUSE_MISALIGNED_STORE: rc = sbi_misaligned_store_handler(mtval, mtval2, mtinst, regs); break; case CAUSE_SUPERVISOR_ECALL: case CAUSE_MACHINE_ECALL: rc = sbi_ecall_handler(regs); break; default: /* If the trap came from S or U mode, redirect it there */ trap.epc = regs-\u0026gt;mepc; trap.cause = mcause; trap.tval = mtval; trap.tval2 = mtval2; trap.tinst = mtinst; rc = sbi_trap_redirect(regs, \u0026amp;trap); break; }; ... åœ¨ lib/sbi/sbi_ecall.c ä¸­å®šä¹‰äº†å¤„ç† ecall mcause çš„ sbi_ecall_handlerï¼Œå®ƒéå†ä¸Šé¢ ecall_exts_list ä¸­æ³¨å†Œçš„å„ç§ ecall æœåŠ¡ã€‚\nsbi_ecall_handler æ ¹æ® Linux å†…æ ¸ä¼ é€’çš„ ext (extension id) æ‰¾åˆ°é“¾è¡¨ä¸­å¯¹åº”çš„ ecall æœåŠ¡ï¼Œæ‰§è¡Œå…¶ä¸­çš„ handle å‡½æ•°ï¼Œè¯¥å‡½æ•°æ ¹æ® fid æ‰§è¡Œå…·ä½“çš„æœåŠ¡å†…å®¹ã€‚\n// lib/sbi/sbi_ecall.c int sbi_ecall_handler(struct sbi_trap_regs *regs) { // ... unsigned long extension_id = regs-\u0026gt;a7; unsigned long func_id = regs-\u0026gt;a6; struct sbi_trap_info trap = {0}; unsigned long out_val = 0; // éå†æ‰€æœ‰ ecall æœåŠ¡ ext = sbi_ecall_find_extension(extension_id); if (ext \u0026amp;\u0026amp; ext-\u0026gt;handle) { // å¦‚æœæ‰¾åˆ°äº†å°±æ‰§è¡Œ ret = ext-\u0026gt;handle(extension_id, func_id, regs, \u0026amp;out_val, \u0026amp;trap); if (extension_id \u0026gt;= SBI_EXT_0_1_SET_TIMER \u0026amp;\u0026amp; extension_id \u0026lt;= SBI_EXT_0_1_SHUTDOWN) is_0_1_spec = 1; } else { ret = SBI_ENOTSUPP; } ... } æˆ‘ä»¬å¯ä»¥å‘ç° extension_id å°±æ˜¯ a7 å¯„å­˜å™¨ï¼Œä»–å’Œæˆ‘ä»¬åœ¨ uCore OS ä¸­å®šä¹‰çš„ SBI_EXT_0_1_CONSOLE_PUTCHAR æ˜¯ä¸€è‡´çš„ã€‚\nç¨‹åºçš„å†…å­˜å¸ƒå±€ä¸ç¼–è¯‘æµç¨‹ ç¨‹åºçš„å†…å­˜å¸ƒå±€ uCore çš„ç¼–è¯‘ç³»ç»Ÿ .PHONY: clean build user # è®¾ç½®ä¼ªç›®æ ‡cleanã€buildå’Œuserï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤makeæ¥æ‰§è¡Œè¿™äº›ç›®æ ‡ all: build_kernel # é»˜è®¤ç›®æ ‡ä¸ºbuild_kernelï¼Œå³æ‰§è¡Œbuild_kernelç›®æ ‡ä¸‹çš„æŒ‡ä»¤ LOG ?= error # å®šä¹‰ä¸€ä¸ªå˜é‡LOGï¼Œé»˜è®¤å€¼æ˜¯error K = os TOOLPREFIX = riscv64-unknown-elf- CC = $(TOOLPREFIX)gcc AS = $(TOOLPREFIX)gcc LD = $(TOOLPREFIX)ld OBJCOPY = $(TOOLPREFIX)objcopy OBJDUMP = $(TOOLPREFIX)objdump PY = python3 GDB = $(TOOLPREFIX)gdb CP = cp MKDIR_P = mkdir -p BUILDDIR = build C_SRCS = $(wildcard $K/*.c) # å®šä¹‰ä¸€ä¸ªå˜é‡C_SRCSï¼Œä½¿ç”¨wildcardå‡½æ•°åŒ¹é…æ‰€æœ‰ä»¥.cä¸ºåç¼€çš„æ–‡ä»¶ï¼Œå¹¶å­˜å‚¨åœ¨$Kç›®å½•ä¸‹ AS_SRCS = $(wildcard $K/*.S) # å®šä¹‰ä¸€ä¸ªå˜é‡AS_SRCSï¼Œä½¿ç”¨wildcardå‡½æ•°åŒ¹é…æ‰€æœ‰ä»¥.Sä¸ºåç¼€çš„æ–‡ä»¶ï¼Œå¹¶å­˜å‚¨åœ¨$Kç›®å½•ä¸‹ C_OBJS = $(addprefix $(BUILDDIR)/, $(addsuffix .o, $(basename $(C_SRCS)))) # å®šä¹‰ä¸€ä¸ªå˜é‡C_OBJSï¼Œé€šè¿‡addprefixå’Œaddsuffixå‡½æ•°å°†$(C_SRCS)ä¸­çš„è·¯å¾„æ›¿æ¢ä¸º$(BUILDDIR)ï¼Œå¹¶å°†åç¼€ä¿®æ”¹ä¸º.o AS_OBJS = $(addprefix $(BUILDDIR)/, $(addsuffix .o, $(basename $(AS_SRCS)))) # å®šä¹‰ä¸€ä¸ªå˜é‡AS_OBJSï¼Œé€šè¿‡addprefixå’Œaddsuffixå‡½æ•°å°†$(AS_SRCS)ä¸­çš„è·¯å¾„æ›¿æ¢ä¸º$(BUILDDIR)ï¼Œå¹¶å°†åç¼€ä¿®æ”¹ä¸º.o OBJS = $(C_OBJS) $(AS_OBJS) # å®šä¹‰ä¸€ä¸ªå˜é‡OBJSï¼Œå…¶å€¼ä¸º$(C_OBJS)å’Œ$(AS_OBJS)çš„ç»„åˆ HEADER_DEP = $(addsuffix .d, $(basename $(C_OBJS))) # å®šä¹‰ä¸€ä¸ªå˜é‡HEADER_DEPï¼Œé€šè¿‡addsuffixå‡½æ•°å°†$(C_OBJS)ä¸­çš„åç¼€ä¿®æ”¹ä¸º.d -include $(HEADER_DEP) # åŒ…å«$(HEADER_DEP)ä¸­çš„.dæ–‡ä»¶ CFLAGS = -Wall -Werror -O -fno-omit-frame-pointer -ggdb # å®šä¹‰ä¸€ä¸ªå˜é‡CFLAGSï¼Œå¹¶èµ‹å€¼ä¸º-Wall -Werror -O -fno-omit-frame-pointer -ggdb CFLAGS += -MD # å°†-MDé€‰é¡¹è¿½åŠ åˆ°CFLAGSå˜é‡ä¸­ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆä¾èµ–å…³ç³»æ–‡ä»¶ CFLAGS += -mcmodel=medany # å°†-mcmodel=medanyé€‰é¡¹è¿½åŠ åˆ°CFLAGSå˜é‡ä¸­ï¼Œç”¨äºæŒ‡å®šå†…å­˜æ¨¡å‹ CFLAGS += -ffreestanding -fno-common -nostdlib -mno-relax # å°†-ffreestanding -fno-common -nostdlib -mno-relaxé€‰é¡¹è¿½åŠ åˆ°CFLAGSå˜é‡ä¸­ï¼Œç”¨äºç¼–è¯‘æ— æ“ä½œç³»ç»Ÿç¯å¢ƒä¸‹çš„ç¨‹åº CFLAGS += -I$K # å°†-I$Ké€‰é¡¹è¿½åŠ åˆ°CFLAGSå˜é‡ä¸­ï¼Œç”¨äºæŒ‡å®šå¤´æ–‡ä»¶æœç´¢è·¯å¾„ä¸º$Kç›®å½•ä¸‹ CFLAGS += $(shell $(CC) -fno-stack-protector -E -x c /dev/null \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 \u0026amp;\u0026amp; echo -fno-stack-protector) # å°†$(CC) -fno-stack-protector -E -x c /dev/null \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 \u0026amp;\u0026amp; echo -fno-stack-protectorå‘½ä»¤æ‰§è¡Œç»“æœè¿½åŠ åˆ°CFLAGSå˜é‡ä¸­ï¼Œç”¨äºç¦ç”¨æ ˆä¿æŠ¤æœºåˆ¶ ifeq ($(LOG), error) CFLAGS += -D LOG_LEVEL_ERROR else ifeq ($(LOG), warn) CFLAGS += -D LOG_LEVEL_WARN else ifeq ($(LOG), info) CFLAGS += -D LOG_LEVEL_INFO else ifeq ($(LOG), debug) CFLAGS += -D LOG_LEVEL_DEBUG else ifeq ($(LOG), trace) CFLAGS += -D LOG_LEVEL_TRACE endif # æ ¹æ®$(LOG)å˜é‡çš„å€¼ï¼Œå‘CFLAGSå˜é‡è¿½åŠ ç›¸åº”çš„é¢„å¤„ç†å™¨é€‰é¡¹ï¼Œç›¸å½“äºæ·»åŠ äº†ä¸€ä¸ªå®å®šä¹‰ï¼Œlog.hä¸­çš„LOG_LEVEL_ERRORç­‰å®å®šä¹‰ä¼šæ ¹æ®è¿™ä¸ªå®å®šä¹‰æ¥å†³å®šæ˜¯å¦ç”Ÿæ•ˆ # Disable PIE when possible (for Ubuntu 16.10 toolchain) ifneq ($(shell $(CC) -dumpspecs 2\u0026gt;/dev/null | grep -e \u0026#39;[^f]no-pie\u0026#39;),) CFLAGS += -fno-pie -no-pie endif ifneq ($(shell $(CC) -dumpspecs 2\u0026gt;/dev/null | grep -e \u0026#39;[^f]nopie\u0026#39;),) CFLAGS += -fno-pie -nopie endif # æ ¹æ®ç³»ç»Ÿç¯å¢ƒåˆ¤æ–­æ˜¯å¦æ”¯æŒPIEï¼ˆä½ç½®æ— å…³æ‰§è¡Œï¼‰é€‰é¡¹ï¼Œå¹¶æ ¹æ®æƒ…å†µå‘CFLAGSå˜é‡è¿½åŠ ç›¸åº”çš„é€‰é¡¹ LDFLAGS = -z max-page-size=4096 # å®šä¹‰ä¸€ä¸ªå˜é‡LDFLAGSï¼Œå¹¶èµ‹å€¼ä¸º-z max-page-size=4096 $(AS_OBJS): $(BUILDDIR)/$K/%.o : $K/%.S @mkdir -p $(@D) $(CC) $(CFLAGS) -c $\u0026lt; -o $@ # è§„åˆ™ï¼šç”Ÿæˆ$(AS_OBJS)ç›®æ ‡æ‰€éœ€çš„ä¾èµ–æ–‡ä»¶$(BUILDDIR)/$K/%.oï¼Œä¾èµ–äº$K/%.Sï¼Œå¹¶é€šè¿‡$(CC)å‘½ä»¤ç¼–è¯‘ç”Ÿæˆç›®æ ‡æ–‡ä»¶ $(C_OBJS): $(BUILDDIR)/$K/%.o : $K/%.c $(BUILDDIR)/$K/%.d @mkdir -p $(@D) $(CC) $(CFLAGS) -c $\u0026lt; -o $@ # è§„åˆ™ï¼šç”Ÿæˆ$(C_OBJS)ç›®æ ‡æ‰€éœ€çš„ä¾èµ–æ–‡ä»¶$(BUILDDIR)/$K/%.oï¼Œä¾èµ–äº$K/%.cå’Œ$(BUILDDIR)/$K/%.dï¼Œå¹¶é€šè¿‡$(CC)å‘½ä»¤ç¼–è¯‘ç”Ÿæˆç›®æ ‡æ–‡ä»¶ $(HEADER_DEP): $(BUILDDIR)/$K/%.d : $K/%.c @mkdir -p $(@D) @set -e; rm -f $@; $(CC) -MM $\u0026lt; $(INCLUDEFLAGS) \u0026gt; $@.$$$$; \\ sed \u0026#39;s,\\($*\\)\\.o[ :]*,\\1.o $@ : ,g\u0026#39; \u0026lt; $@.$$$$ \u0026gt; $@; \\ rm -f $@.$$$$ # è§„åˆ™ï¼šç”Ÿæˆ$(HEADER_DEP)ç›®æ ‡æ‰€éœ€çš„ä¾èµ–æ–‡ä»¶$(BUILDDIR)/$K/%.dï¼Œä¾èµ–äº$K/%.cï¼Œå¹¶é€šè¿‡$(CC)å‘½ä»¤ç”Ÿæˆä¾èµ–å…³ç³»æ–‡ä»¶ build: build/kernel # å®šä¹‰ä¸€ä¸ªç›®æ ‡buildï¼Œå…¶ä¾èµ–äºbuild/kernel build/kernel: $(OBJS) $(LD) $(LDFLAGS) -T os/kernel.ld -o $(BUILDDIR)/kernel $(OBJS) $(OBJDUMP) -S $(BUILDDIR)/kernel \u0026gt; $(BUILDDIR)/kernel.asm $(OBJDUMP) -t $(BUILDDIR)/kernel | sed \u0026#39;1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d\u0026#39; \u0026gt; $(BUILDDIR)/kernel.sym @echo \u0026#39;Build kernel done\u0026#39; # è§„åˆ™ï¼šç”Ÿæˆbuild/kernelç›®æ ‡ï¼Œä¾èµ–äº$(OBJS)ï¼Œé€šè¿‡$(LD)å‘½ä»¤è¿æ¥ç”Ÿæˆkernelï¼Œå¹¶é€šè¿‡$(OBJDUMP)å‘½ä»¤ç”Ÿæˆæ±‡ç¼–æ–‡ä»¶å’Œç¬¦å·è¡¨ clean: rm -rf $(BUILDDIR) # BOARD BOARD\t?= qemu SBI\t?= rustsbi BOOTLOADER\t:= ./bootloader/rustsbi-qemu.bin QEMU = qemu-system-riscv64 QEMUOPTS = \\ -nographic \\ -machine virt \\ -bios $(BOOTLOADER) \\ -kernel build/kernel\t\\ run: build/kernel $(QEMU) $(QEMUOPTS) # QEMU\u0026#39;s gdb stub command line changed in 0.11 QEMUGDB = $(shell if $(QEMU) -help | grep -q \u0026#39;^-gdb\u0026#39;; \\ then echo \u0026#34;-gdb tcp::15234\u0026#34;; \\ else echo \u0026#34;-s -p 15234\u0026#34;; fi) # å¯åŠ¨QEMUå¹¶é€šè¿‡GDBè°ƒè¯•ï¼Œæ­¤æ—¶QEMuä¼šè¿›å…¥åå°è¿è¡Œï¼Œå¹¶æš‚åœæ‰§è¡Œï¼Œç­‰å¾…GDBè¿æ¥ # è¿æ¥çš„GDBç«¯å£ä¸º15234 debug: build/kernel .gdbinit $(QEMU) $(QEMUOPTS) -S $(QEMUGDB) \u0026amp; sleep 1 $(GDB) ç¼–è¯‘ã€è¿è¡Œ uCore çš„ä¸€äº›å¸¸ç”¨å‘½ä»¤æœ‰å¦‚ä¸‹ä¸€äº›ï¼Œæ¶‰åŠäº†åç»­ç« èŠ‚ä¸­å¼•å…¥çš„æµ‹è¯•ç”¨ä¾‹ä¸­çš„å‘½ä»¤ï¼š\nmake run make debug make clean # ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹çš„å‰å››ç«  make user CHAPTER=4 LOG=trace # ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹çš„ç¬¬å››ç«  make user CHAPTER=4_only LOG=trace # åªè¿è¡Œæµ‹è¯•ç”¨ä¾‹çš„ç¬¬å››ç«  make test CHAPTER=4_only é™„å½• makefile å’Œ qemu\nAS = $(TOOLPREFIX)gas \u0026gt; AS = $(TOOLPREFIX)as\nå‚è€ƒèµ„æ–™ ç»ˆç«¯é¢œè‰²æ§åˆ¶ - ç®€ä¹¦ ","permalink":"https://lifeislife.cn/posts/ucore-%E5%AE%9E%E9%AA%8C%E7%AC%AC1%E7%AB%A0-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%89%A7%E8%A1%8C%E7%8E%AF%E5%A2%83/","summary":"\u003ch1 id=\"äº†è§£ç³»ç»Ÿè°ƒç”¨\"\u003eäº†è§£ç³»ç»Ÿè°ƒç”¨\u003c/h1\u003e\n\u003cp\u003eæ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿè°ƒç”¨ï¼ˆsyscallï¼‰æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™åº”ç”¨ç¨‹åºä½¿ç”¨çš„ä¸€ç§æ¥å£ã€‚å®ƒå…è®¸åº”ç”¨ç¨‹åºé€šè¿‡å‘æ“ä½œç³»ç»Ÿå‘é€è¯·æ±‚ï¼Œæ¥æ‰§è¡Œä¸€äº›å¿…é¡»ç”±æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ä»»åŠ¡ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶ã€åˆ›å»ºè¿›ç¨‹ã€åˆ†é…å†…å­˜ç­‰ã€‚\u003c/p\u003e","title":"uCore-å®éªŒç¬¬ 1 ç«  - åº”ç”¨ç¨‹åºä¸åŸºæœ¬æ‰§è¡Œç¯å¢ƒ"},{"content":"é¦–å…ˆï¼Œ.section .data è¡¨ç¤ºå®šä¹‰äº†ä¸€ä¸ªæ•°æ®æ®µï¼Œåœ¨è¿™ä¸ªæ®µä¸­å®šä¹‰äº†ä¸€ç³»åˆ—çš„å…¨å±€å˜é‡ã€‚å…¶ä¸­ï¼Œ_app_num æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œè¡¨ç¤ºä¸€ä¸ª 64 ä½çš„æ•´æ•°ï¼Œåˆå§‹å€¼ä¸º 23ã€‚æ¥ä¸‹æ¥æ˜¯ä¸€ç³»åˆ—çš„æ ‡ç­¾ï¼Œåˆ†åˆ«ä»£è¡¨äº†åº”ç”¨ç¨‹åºçš„èµ·å§‹åœ°å€ï¼Œæ¯ä¸ªæ ‡ç­¾éƒ½æ˜¯ 64 ä½çš„æ•´æ•°ã€‚\næ¥ç€ï¼Œ.section .data åé¢åˆå‡ºç°äº†ä¸€ä¸ªæ ‡ç­¾ _app_namesï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼ŒåŒ…å«äº†ä¸€ç»„å­—ç¬¦ä¸²ï¼Œåˆ†åˆ«å‘½åä¸º \u0026ldquo;ch2b_exit\u0026rdquo;ã€\u0026ldquo;ch2b_hello_world\u0026rdquo;ã€\u0026ldquo;ch2b_power\u0026rdquo; ç­‰ç­‰ã€‚è¿™äº›å­—ç¬¦ä¸²åå­—å¯¹åº”äº†å‰é¢å®šä¹‰çš„åº”ç”¨ç¨‹åºçš„èµ·å§‹åœ°å€ã€‚\nå†å¾€ä¸‹ï¼Œå‡ºç°äº†ä¸€ä¸ªæ ‡ç­¾ INIT_PROCï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºåˆå§‹åŒ–è¿›ç¨‹çš„åç§°ï¼Œå€¼ä¸º \u0026ldquo;usershell\u0026rdquo;ã€‚\nä¹‹åï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½æœ‰è‡ªå·±çš„æ ‡ç­¾å’Œæ®µåï¼Œæ¯”å¦‚ app_0_startã€app_1_start ç­‰ç­‰ã€‚æ¯ä¸ªæ ‡ç­¾éƒ½åŒ…å«ä¸€ä¸ªæŒ‡ä»¤ .incbinï¼Œå®ƒç”¨äºå°†ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆä»¥å­—ç¬¦ä¸²å½¢å¼æŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼‰æ’å…¥åˆ°å½“å‰æ®µä¸­ã€‚\nè¿›ç¨‹åˆå§‹åŒ–åˆ†æ scheduler() fetch_task() // è·å–ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„è¿›ç¨‹ swtch(\u0026amp;curenv-\u0026gt;context, nextenv-\u0026gt;context) // åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè¿›ç¨‹ä¸Šä¸‹æ–‡ // Per-process state struct proc { enum procstate state; // è¿›ç¨‹çŠ¶æ€ int pid; // è¿›ç¨‹ ID uint64 ustack; // è¿›ç¨‹ç”¨æˆ·æ ˆè™šæ‹Ÿåœ°å€ (ç”¨æˆ·é¡µè¡¨) uint64 kstack; // è¿›ç¨‹å†…æ ¸æ ˆè™šæ‹Ÿåœ°å€ (å†…æ ¸é¡µè¡¨) struct trapframe *trapframe; // è¿›ç¨‹ä¸­æ–­å¸§ struct context context; // ç”¨äºä¿å­˜è¿›ç¨‹å†…æ ¸æ€çš„å¯„å­˜å™¨ä¿¡æ¯ï¼Œè¿›ç¨‹åˆ‡æ¢æ—¶ä½¿ç”¨ pagetable_t pagetable; // User page table uint64 max_page; uint64 program_brk; uint64 heap_bottom; struct proc * parent; // Parent process uint64 exit_code; struct file * files[FD_BUFFER_SIZE]; uint32 syscall_times[MAX_SYSCALL_NUM]; // ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ç»Ÿè®¡ uint64 start_time; // è¿›ç¨‹å¼€å§‹è¿è¡Œæ—¶é—´ struct vma vmas[NVMA]; // è™šæ‹Ÿå†…å­˜åŒºåŸŸ }; wait ç³»ç»Ÿè°ƒç”¨çš„åŠŸèƒ½ wait ç³»ç»Ÿè°ƒç”¨æ˜¯ç”¨äºå¤„ç†å­è¿›ç¨‹ç»ˆæ­¢çŠ¶æ€çš„ç³»ç»Ÿè°ƒç”¨ã€‚å…¶ä¸»è¦åŠŸèƒ½æ˜¯ç­‰å¾…å­è¿›ç¨‹çš„ç»ˆæ­¢ï¼Œå¹¶è·å–å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ä¿¡æ¯ã€‚åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå½“ä¸€ä¸ªçˆ¶è¿›ç¨‹åˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹åï¼Œé€šå¸¸ä¼šä½¿ç”¨ wait æ¥ç­‰å¾…å­è¿›ç¨‹çš„ç»ˆæ­¢ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„å¤„ç†ï¼Œå¦‚å›æ”¶å­è¿›ç¨‹çš„èµ„æºæˆ–è·å–å…¶è¿è¡Œç»“æœã€‚\nä»¥ä¸‹æ˜¯ wait ç³»ç»Ÿè°ƒç”¨çš„ä¸»è¦åŠŸèƒ½ï¼š\nç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢ï¼šçˆ¶è¿›ç¨‹è°ƒç”¨ wait ç³»ç»Ÿè°ƒç”¨åï¼Œä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢ã€‚å¦‚æœå­è¿›ç¨‹å·²ç»ç»ˆæ­¢ï¼Œé‚£ä¹ˆ wait ç«‹å³è¿”å›ï¼Œå¦åˆ™çˆ¶è¿›ç¨‹ä¼šä¸€ç›´ç­‰å¾…ç›´åˆ°å­è¿›ç¨‹ç»ˆæ­¢ã€‚\nè·å–å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼šwait ç³»ç»Ÿè°ƒç”¨ä¼šè·å–å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­è¿›ç¨‹çš„é€€å‡ºç ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªæ•´æ•°ï¼‰ã€‚è¿™ä¸ªé€€å‡ºç å¯ä»¥å‘Šè¯‰çˆ¶è¿›ç¨‹å­è¿›ç¨‹çš„ç»ˆæ­¢æƒ…å†µï¼Œä¾‹å¦‚æ˜¯å¦æˆåŠŸæ‰§è¡Œç­‰ã€‚\nå›æ”¶å­è¿›ç¨‹èµ„æºï¼šä¸€æ—¦å­è¿›ç¨‹ç»ˆæ­¢ï¼Œå…¶å ç”¨çš„ç³»ç»Ÿèµ„æºï¼ˆå¦‚å†…å­˜ã€æ–‡ä»¶æè¿°ç¬¦ç­‰ï¼‰é€šå¸¸éœ€è¦ç”±çˆ¶è¿›ç¨‹æ¥å›æ”¶ï¼Œä»¥é¿å…èµ„æºæ³„æ¼ã€‚wait ç³»ç»Ÿè°ƒç”¨åœ¨ç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢åï¼Œä¼šè‡ªåŠ¨å›æ”¶è¿™äº›èµ„æºã€‚\nå¤„ç†åƒµå°¸è¿›ç¨‹ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå­è¿›ç¨‹å¯èƒ½ä¼šåœ¨ç»ˆæ­¢åæˆä¸ºåƒµå°¸è¿›ç¨‹ï¼Œå³å·²ç»ç»ˆæ­¢ä½†å…¶è¿›ç¨‹æè¿°ç¬¦ä»ç„¶å­˜åœ¨ã€‚çˆ¶è¿›ç¨‹å¯ä»¥ä½¿ç”¨ wait æ¥å›æ”¶è¿™äº›åƒµå°¸è¿›ç¨‹ï¼Œé‡Šæ”¾ç›¸å…³èµ„æºã€‚\nexecã€fork å’Œ spawn æ˜¯æ“ä½œç³»ç»Ÿä¸­å¸¸è§çš„è¿›ç¨‹ç®¡ç†ç³»ç»Ÿè°ƒç”¨ï¼Œå„è‡ªå…·æœ‰ä¸åŒçš„åŠŸèƒ½å’Œç”¨é€”ï¼š\nexec ç³»ç»Ÿè°ƒç”¨ï¼š\nåŠŸèƒ½ï¼šexec ç³»ç»Ÿè°ƒç”¨ç”¨äºåœ¨å½“å‰è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­åŠ è½½å¹¶æ‰§è¡Œä¸€ä¸ªæ–°çš„ç¨‹åºã€‚ ç”¨é€”ï¼šé€šå¸¸åœ¨ä¸€ä¸ªè¿›ç¨‹éœ€è¦æ›¿æ¢è‡ªèº«çš„æ‰§è¡Œæ˜ åƒæ—¶ä½¿ç”¨ã€‚å®ƒä¼šåŠ è½½ä¸€ä¸ªæ–°çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¦†ç›–å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´å’Œä»£ç æ®µï¼Œç„¶åå¼€å§‹æ‰§è¡Œæ–°çš„ç¨‹åºã€‚è¿™ä¸ªæ–°ç¨‹åºå¯ä»¥æ˜¯å®Œå…¨ä¸åŒçš„ç¨‹åºï¼Œä»è€Œå…è®¸è¿›ç¨‹åŠ¨æ€åˆ‡æ¢åˆ°ä¸åŒçš„åº”ç”¨ç¨‹åºï¼Œè€Œä¸éœ€è¦åˆ›å»ºæ–°çš„è¿›ç¨‹ã€‚ fork ç³»ç»Ÿè°ƒç”¨ï¼š\nåŠŸèƒ½ï¼šfork ç³»ç»Ÿè°ƒç”¨ç”¨äºåˆ›å»ºä¸€ä¸ªä¸å½“å‰è¿›ç¨‹å‡ ä¹å®Œå…¨ç›¸åŒçš„æ–°è¿›ç¨‹ï¼ŒåŒ…æ‹¬ä»£ç ã€æ•°æ®å’Œä¸Šä¸‹æ–‡ç­‰ã€‚ ç”¨é€”ï¼šé€šå¸¸ç”¨äºåˆ›å»ºæ–°çš„è¿›ç¨‹ï¼Œæ–°è¿›ç¨‹ç§°ä¸ºå­è¿›ç¨‹ï¼Œå®ƒä»çˆ¶è¿›ç¨‹ç»§æ‰¿äº†å¤§éƒ¨åˆ†çŠ¶æ€ï¼Œç„¶åå¯ä»¥åœ¨ç‹¬ç«‹çš„åœ°å€ç©ºé—´ä¸­æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚fork åˆ›å»ºçš„å­è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹çš„å‰¯æœ¬ï¼Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚ spawn ç³»ç»Ÿè°ƒç”¨ï¼š\nåŠŸèƒ½ï¼šspawn ç³»ç»Ÿè°ƒç”¨é€šå¸¸ç”¨äºåˆ›å»ºæ–°çš„è¿›ç¨‹å¹¶æ‰§è¡ŒæŒ‡å®šçš„ç¨‹åºã€‚ ç”¨é€”ï¼šç±»ä¼¼äº forkï¼Œå®ƒä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œä½†ä¸åƒ fork é‚£æ ·å®Œå…¨å¤åˆ¶çˆ¶è¿›ç¨‹ã€‚ç›¸åï¼Œspawn å…è®¸ä½ æŒ‡å®šä¸€ä¸ªæ–°ç¨‹åºçš„è·¯å¾„å’Œå‚æ•°ï¼Œè€Œä¸æ˜¯å®Œå…¨å¤åˆ¶å½“å‰è¿›ç¨‹çš„çŠ¶æ€ã€‚è¿™ä½¿å¾—å®ƒæ›´é€‚åˆç”¨äºå¯åŠ¨æ–°ç¨‹åºï¼Œè€Œä¸æ˜¯ç®€å•åœ°åˆ›å»ºä¸€ä¸ªè¿›ç¨‹å‰¯æœ¬ã€‚ æ€»ç»“ï¼š\nexec ç”¨äºæ›¿æ¢å½“å‰è¿›ç¨‹çš„æ‰§è¡Œæ˜ åƒï¼Œå…è®¸åŠ è½½å’Œæ‰§è¡Œæ–°ç¨‹åºã€‚ fork ç”¨äºåˆ›å»ºä¸€ä¸ªå‡ ä¹ä¸çˆ¶è¿›ç¨‹ç›¸åŒçš„æ–°è¿›ç¨‹ï¼Œæ–°è¿›ç¨‹æˆä¸ºçˆ¶è¿›ç¨‹çš„å‰¯æœ¬ã€‚ spawn é€šå¸¸ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹å¹¶æ‰§è¡ŒæŒ‡å®šçš„ç¨‹åºï¼Œå…è®¸æŒ‡å®šä¸åŒçš„ç¨‹åºè·¯å¾„å’Œå‚æ•°ã€‚ é™„å½• æœ¬ç« ä»»åŠ¡ï¼š åœ¨æ¬¡ -\u0026gt; åœ¨æ­¤\n","permalink":"https://lifeislife.cn/posts/ucore-%E5%AE%9E%E9%AA%8C%E7%AC%AC5%E7%AB%A0-%E8%BF%9B%E7%A8%8B%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/","summary":"\u003cp\u003eé¦–å…ˆï¼Œ\u003ccode\u003e.section .data\u003c/code\u003e è¡¨ç¤ºå®šä¹‰äº†ä¸€ä¸ªæ•°æ®æ®µï¼Œåœ¨è¿™ä¸ªæ®µä¸­å®šä¹‰äº†ä¸€ç³»åˆ—çš„å…¨å±€å˜é‡ã€‚å…¶ä¸­ï¼Œ\u003ccode\u003e_app_num\u003c/code\u003e æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œè¡¨ç¤ºä¸€ä¸ª 64 ä½çš„æ•´æ•°ï¼Œåˆå§‹å€¼ä¸º 23ã€‚æ¥ä¸‹æ¥æ˜¯ä¸€ç³»åˆ—çš„æ ‡ç­¾ï¼Œåˆ†åˆ«ä»£è¡¨äº†åº”ç”¨ç¨‹åºçš„èµ·å§‹åœ°å€ï¼Œæ¯ä¸ªæ ‡ç­¾éƒ½æ˜¯ 64 ä½çš„æ•´æ•°ã€‚\u003c/p\u003e","title":"uCore å®éªŒç¬¬ 5 ç«  - è¿›ç¨‹åŠè¿›ç¨‹ç®¡ç†"},{"content":" ä¸ºä½•æŒ‡å®š TRAMPOLINE å’Œ TRAPFRAME åœ¨ va çš„æœ€é«˜ä½ï¼Ÿ TRAMPOLINE å’Œ TRAPFRAME è¢«å®šä¹‰åœ¨æœ€é«˜çš„è™šæ‹Ÿå†…å­˜åœ°å€ä¸Šï¼Œæ˜¯å› ä¸ºå®ƒä»¬åœ¨æ“ä½œç³»ç»Ÿçš„å†…å­˜å¸ƒå±€ä¸­èµ·ç€é‡è¦ä½œç”¨ã€‚ TRAMPOLINE è¢«ç”¨ä½œä»ç”¨æˆ·æ¨¡å¼åˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼çš„è·³è½¬ç›®æ ‡ã€‚å½“å‘ç”Ÿå¼‚å¸¸æˆ–ä¸­æ–­æ—¶ï¼Œå¤„ç†å™¨å°†ä»ç”¨æˆ·æ¨¡å¼åˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼ï¼Œå¹¶å°†æ§åˆ¶æƒè½¬ç§»åˆ°å†…æ ¸ä¸­é¢„å®šä¹‰çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯é™·é˜±å¤„ç†ç¨‹åºã€‚TRAMPOLINE é¡µé¢è¢«æ˜ å°„åˆ°æœ€é«˜è™šæ‹Ÿåœ°å€ï¼Œä»¥ä¾¿å¤„ç†å™¨èƒ½å¤Ÿåœ¨è¿™ä¸ªè½¬æ¢è¿‡ç¨‹ä¸­æ–¹ä¾¿åœ°å¼•ç”¨å®ƒã€‚é€šè¿‡å°†å…¶æ”¾ç½®åœ¨æœ€é«˜åœ°å€ï¼Œç¡®ä¿äº†æ— è®ºç³»ç»Ÿçš„å…·ä½“å†…å­˜å¸ƒå±€å¦‚ä½•ï¼Œå®ƒå§‹ç»ˆæ˜¯å¯è®¿é—®çš„ã€‚ å¦ä¸€æ–¹é¢ï¼ŒTRAPFRAME ç”¨äºåœ¨å‘ç”Ÿå¼‚å¸¸æˆ–ä¸­æ–­æ—¶å­˜å‚¨æœºå™¨çŠ¶æ€ã€‚å®ƒåŒ…å«å¯„å­˜å™¨ã€æ ‡å¿—å’Œå…¶ä»–æ“ä½œç³»ç»Ÿå¤„ç†å¼‚å¸¸æ‰€éœ€çš„ä¿¡æ¯ã€‚TRAPFRAME ä¹Ÿè¢«æ”¾ç½®åœ¨æœ€é«˜çš„è™šæ‹Ÿåœ°å€ä¸Šï¼Œä»¥ç¡®ä¿å®ƒæ˜“äºè®¿é—®ï¼Œå¹¶ä¸”é™·é˜±å¤„ç†ç¨‹åºå¯ä»¥é«˜æ•ˆåœ°è®¿é—®å®ƒã€‚ é€šè¿‡å°† TRAMPOLINE å’Œ TRAPFRAME å®šä¹‰åœ¨æœ€é«˜çš„è™šæ‹Ÿå†…å­˜åœ°å€ä¸Šï¼Œå†…æ ¸å¯ä»¥æ–¹ä¾¿è€Œå¯é åœ°å¤„ç†å¼‚å¸¸å’Œä¸­æ–­ï¼Œè€Œæ— éœ€å…³å¿ƒå®ƒä»¬åœ¨å†…å­˜ä¸­çš„ç‰¹å®šä½ç½®ã€‚\nå¦‚ä½•ç¡®å®šåˆ†é¡µæ–¹æ¡ˆ - satp åœ¨ MMU æ²¡æœ‰ä½¿èƒ½çš„æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€æ˜¯ç›¸åŒçš„ã€‚åœ¨ MMU ä½¿èƒ½çš„æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿåœ°å€ä¼šè¢«è½¬æ¢æˆç‰©ç†åœ°å€ã€‚è¿™ä¸ªè½¬æ¢è¿‡ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿæ¥ç®¡ç†çš„ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦ç»´æŠ¤ä¸€ä¸ªæ•°æ®ç»“æ„æ¥è®°å½•è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»ã€‚è¿™ä¸ªæ•°æ®ç»“æ„å°±æ˜¯é¡µè¡¨ã€‚\nè½¬æ¢çš„è¿‡ç¨‹éœ€è¦åˆ†é¡µæœºåˆ¶ï¼Œåˆ†é¡µæœºåˆ¶æœ‰å¤šç§ã€‚RISC-V çš„åˆ†é¡µæ–¹æ¡ˆä»¥ SvX çš„æ¨¡å¼å‘½åï¼Œå…¶ä¸­ X æ˜¯ä»¥ä½ä¸ºå•ä½çš„è™šæ‹Ÿåœ°å€çš„é•¿åº¦ã€‚åœ¨ RV64 æ¶æ„ä¸‹ï¼ŒRISC-V æ”¯æŒå¤šç§åˆ†é¡µæ–¹æ¡ˆï¼ŒåŒ…æ‹¬ Sv39ï¼ŒSv48ï¼ŒSv57 ä»¥åŠ Sv64ã€‚Sv39 æœ€å¤§æ”¯æŒ 39 ä½çš„è™šæ‹Ÿåœ°å€ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ”¯æŒ 512 GB çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚Sv48 æœ€å¤§æ”¯æŒ 48 ä½çš„è™šæ‹Ÿåœ°å€ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ”¯æŒ 256 TB çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚æˆ‘ä»¬å°†åœ¨æœ¬ç« ä¸­å®ç° Sv39 åˆ†é¡µæ–¹æ¡ˆã€‚\nå¦‚ä½•å¼€å¯åˆ†é¡µæœºåˆ¶å‘¢ï¼ŸRISC-V çš„åˆ†é¡µæœºåˆ¶æ˜¯é€šè¿‡ satpï¼ˆSupervisor address translation and protectionï¼‰å¯„å­˜å™¨æ¥å¼€å¯çš„ã€‚satp å¯„å­˜å™¨å­—æ®µåˆ†å¸ƒå¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image Mode å­—æ®µå¯ä»¥å†³å®šæ˜¯å¦å¼€å¯åˆ†é¡µä»¥åŠåˆ†é¡µçº§æ•°ã€‚Mode=0 æ—¶ï¼Œä¸å¼€å¯åˆ†é¡µï¼›Mode=8 æ—¶ï¼Œå¼€å¯ Sv39 åˆ†é¡µæœºåˆ¶ã€‚ ASIDï¼ˆAddress Space Identifierï¼Œåœ°å€ç©ºé—´æ ‡è¯†ç¬¦ï¼‰åŸŸæ˜¯å¯é€‰çš„ï¼Œå®ƒå¯ä»¥ç”¨æ¥é™ä½ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚ç›®å‰æˆ‘ä»¬æš‚ä¸è€ƒè™‘è¿™ä¸ªå­—æ®µçš„ä½œç”¨ã€‚ PPNï¼ˆPhysical Page Numberï¼Œç‰©ç†é¡µå·ï¼‰ï¼Œä¿å­˜äº†æ ¹é¡µè¡¨çš„ç‰©ç†åœ°å€ã€‚ SV39 å¤šçº§é¡µè¡¨æœºåˆ¶ é¡µè¡¨é¡¹æè¿° \u003c!DOCTYPE html\u003e Responsive Image Sv39 é¡µè¡¨é¡¹ï¼ˆpage-table entryï¼ŒPTEï¼‰çš„å¸ƒå±€ï¼Œä»å·¦åˆ°å³åˆ†åˆ«åŒ…å«å¦‚ä¸‹æ‰€è¿°çš„åŸŸï¼š\nV ä½å†³å®šäº†è¯¥é¡µè¡¨é¡¹çš„å…¶ä½™éƒ¨åˆ†æ˜¯å¦æœ‰æ•ˆ (V=1 æ—¶æœ‰æ•ˆ)ã€‚è‹¥ V=0ï¼Œåˆ™ä»»ä½•éå†åˆ°æ­¤é¡µè¡¨é¡¹çš„è™šå€è½¬æ¢æ“ä½œéƒ½ä¼šå¯¼è‡´é¡µé”™è¯¯ã€‚ Rã€W å’Œ X ä½åˆ†åˆ«è¡¨ç¤ºæ­¤é¡µæ˜¯å¦å¯ä»¥è¯»å–ã€å†™å…¥å’Œæ‰§è¡Œã€‚å¦‚æœè¿™ä¸‰ä¸ªä½éƒ½æ˜¯ 0ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡µè¡¨é¡¹æ˜¯æŒ‡å‘ä¸‹ä¸€çº§é¡µè¡¨çš„æŒ‡é’ˆï¼Œå¦åˆ™å®ƒæ˜¯é¡µè¡¨æ ‘çš„ä¸€ä¸ªå¶èŠ‚ç‚¹ã€‚ U ä½è¡¨ç¤ºè¯¥é¡µæ˜¯å¦æ˜¯ç”¨æˆ·é¡µé¢ã€‚è‹¥ U=0ï¼Œåˆ™ U æ¨¡å¼ä¸èƒ½è®¿é—®æ­¤é¡µé¢ï¼Œä½† S æ¨¡å¼å¯ä»¥ã€‚è‹¥ U=1ï¼Œåˆ™ U æ¨¡å¼ä¸‹èƒ½è®¿é—®è¿™ä¸ªé¡µé¢ï¼Œè€Œ S æ¨¡å¼ä¸èƒ½ã€‚ G ä½è¡¨ç¤ºè¿™ä¸ªæ˜ å°„æ˜¯å¦å¯¹æ‰€æœ‰è™šå€ç©ºé—´æœ‰æ•ˆï¼Œç¡¬ä»¶å¯ä»¥ç”¨è¿™ä¸ªä¿¡æ¯æ¥æé«˜åœ°å€è½¬æ¢çš„æ€§èƒ½ã€‚è¿™ä¸€ä½é€šå¸¸åªç”¨äºå±äºæ“ä½œç³»ç»Ÿçš„é¡µé¢ã€‚ A ä½è¡¨ç¤ºè‡ªä»ä¸Šæ¬¡ A ä½è¢«æ¸…é™¤ä»¥æ¥ï¼Œè¯¥é¡µé¢æ˜¯å¦è¢«è®¿é—®è¿‡ã€‚ D ä½è¡¨ç¤ºè‡ªä»ä¸Šæ¬¡æ¸…é™¤ D ä½ä»¥æ¥é¡µé¢æ˜¯å¦è¢«å¼„è„ï¼ˆä¾‹å¦‚è¢«å†™å…¥ï¼‰ã€‚ RSW åŸŸç•™ç»™æ“ä½œç³»ç»Ÿä½¿ç”¨ï¼Œå®ƒä¼šè¢«ç¡¬ä»¶å¿½ç•¥ã€‚ PPN åŸŸåŒ…å«ç‰©ç†é¡µå·ï¼Œè¿™æ˜¯ç‰©ç†åœ°å€çš„ä¸€éƒ¨åˆ†ã€‚è‹¥è¿™ä¸ªé¡µè¡¨é¡¹æ˜¯ä¸€ä¸ªå¶èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ PPN æ˜¯è½¬æ¢åç‰©ç†åœ°å€çš„ä¸€éƒ¨åˆ†ã€‚å¦åˆ™ PPN ç»™å‡ºä¸‹ä¸€èŠ‚é¡µè¡¨çš„åœ°å€ã€‚ è™šæ‹Ÿåœ°å€è½¬æ¢ç‰©ç†åœ°å€è¿‡ç¨‹ \u003c!DOCTYPE html\u003e Responsive Image å½“ satp å¯„å­˜å™¨ä¸­å¼€å¯åˆ†é¡µæ—¶ï¼ŒS æ¨¡å¼å’Œ U æ¨¡å¼ä¸­è®¿å­˜çš„åœ°å€éƒ½ä¼šè¢«è§†ä¸ºè™šæ‹Ÿåœ°å€ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºç‰©ç†åœ°å€ã€‚è™šæ‹Ÿåœ°å€è½¬æ¢ç‰©ç†åœ°å€çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š\nä» satp å¯„å­˜å™¨ä¸­è¯»å– PPNï¼Œå¾—åˆ°æ ¹é¡µè¡¨çš„ç‰©ç†åœ°å€ï¼Œä¸ºäº†è¡¨è¿°æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†å…¶è®°åšä¸‰çº§é¡µè¡¨åŸºåœ°å€ satp.PPNï¼› ä»è™šæ‹Ÿåœ°å€ä¸­å–å‡ºä¸‰çº§è™šæ‹Ÿé¡µå· L2 å¤„ç†å™¨ä¼šè¯»å–åœ°å€ä½äº satp.PPN * 4096 + L2 * 4 çš„é¡µè¡¨é¡¹ï¼Œå¾—åˆ°ä¸‹ä¸€çº§é¡µè¡¨çš„åŸºåœ°å€ L1.PPNï¼› ä»è™šæ‹Ÿåœ°å€ä¸­å–å‡ºäºŒçº§è™šæ‹Ÿé¡µå· L1 å¤„ç†å™¨ä¼šè¯»å–åœ°å€ä½äº L1.PPN * 4096 + L1 * 4 çš„é¡µè¡¨é¡¹ï¼Œå¾—åˆ°ä¸‹ä¸€çº§é¡µè¡¨çš„åŸºåœ°å€ L0.PPNï¼› ä»è™šæ‹Ÿåœ°å€ä¸­å–å‡ºä¸€çº§è™šæ‹Ÿé¡µå· L0 å¤„ç†å™¨ä¼šè¯»å–åœ°å€ä½äº L0.PPN * 4096 + L0 * 4 çš„é¡µè¡¨é¡¹ï¼Œå¾—åˆ°ç‰©ç†é¡µå· PPNï¼› å°† PPN å’Œè™šæ‹Ÿåœ°å€çš„ä½ 12 ä½ä¹Ÿå°±æ˜¯ Offset æ‹¼æ¥èµ·æ¥ï¼Œå¾—åˆ°ç‰©ç†åœ°å€ã€‚ æˆ‘ä»¬çœ‹ä»£ç ä¸­æ˜¯å¦‚ä½•å®ç°çš„ï¼š\n#define PTE2PA(pte) (((pte) \u0026gt;\u0026gt; 10) \u0026lt;\u0026lt; 12) // ä»è™šæ‹Ÿåœ°å€ä¸­æå–ä¸‰ä¸ª 9 ä½çš„é¡µè¡¨ç´¢å¼• #define PXMASK 0x1FF // 9 // PGSHIFT = 12ï¼Œè¿™æ®µå®å®šä¹‰ç”¨äºå®šä½ VPNx çš„ä½ç½® #define PXSHIFT(level) (PGSHIFT + (9 * (level))) // ä»è™šæ‹Ÿåœ°å€ VA ä¸­æå–å‡ºç¬¬ level çº§é¡µè¡¨çš„ç´¢å¼• #define PX(level, va) ((((uint64)(va)) \u0026gt;\u0026gt; PXSHIFT(level)) \u0026amp; PXMASK) ä¸Šé¢è¿™ä¸‰ä¸ªå·¥å…·å®å¯ä»¥ç”¨æ¥æå–è™šæ‹Ÿé¡µå· VPNã€‚\n// è¿”å›é¡µè¡¨ pagetable ä¸­ä¸è™šæ‹Ÿåœ°å€ va å¯¹åº”çš„ PTE çš„åœ°å€ã€‚ // å¦‚æœ alloc != 0ï¼Œåˆ™åˆ›å»ºæ‰€éœ€çš„é¡µè¡¨é¡µã€‚ // // RISC-V Sv39 æ–¹æ¡ˆæœ‰ä¸‰çº§é¡µè¡¨é¡µã€‚ä¸€ä¸ªé¡µè¡¨é¡µåŒ…å« 512 ä¸ª 64 ä½çš„ PTEsã€‚ // ä¸€ä¸ª 64 ä½çš„è™šæ‹Ÿåœ°å€è¢«åˆ†ä¸ºäº”ä¸ªå­—æ®µï¼š // 39..63 -- å¿…é¡»ä¸ºé›¶ã€‚ // 30..38 -- 2 çº§ç´¢å¼•çš„ 9 ä½ã€‚ // 21..29 -- 1 çº§ç´¢å¼•çš„ 9 ä½ã€‚ // 12..20 -- 0 çº§ç´¢å¼•çš„ 9 ä½ã€‚ // 0..11 -- é¡µé¢å†…çš„ 12 ä½å­—èŠ‚åç§»é‡ã€‚ // pagetable é¡µè¡¨ // va è™šæ‹Ÿåœ°å€ // alloc é¡µè¡¨é¡¹ä¸å­˜åœ¨æ—¶æ˜¯å¦åˆ†é… pte_t *walk(pagetable_t pagetable, uint64 va, int alloc) { if (va \u0026gt;= MAXVA) panic(\u0026#34;walk\u0026#34;); for (int level = 2; level \u0026gt; 0; level--) { pte_t *pte = \u0026amp;pagetable[PX(level, va)]; // é€šè¿‡ PTE çš„æ ‡å¿—ä½åˆ¤æ–­æ¯ä¸€çº§çš„ pte æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ï¼ˆV ä½ï¼‰ if (*pte \u0026amp; PTE_V) { pagetable = (pagetable_t)PTE2PA(*pte); } else { // å¦‚æœè¯¥é¡¹æ— æ•ˆä¸” alloc æ ‡å¿—è¢«è®¾ç½®ï¼Œåˆ™åˆ†é…ä¸€ä¸ªæ–°çš„é¡µè¡¨ // å¦‚æœ alloc å‚æ•°=0 æˆ–è€…å·²ç»æ²¡æœ‰ç©ºé—²çš„å†…å­˜äº†ï¼Œé‚£ä¹ˆé‡åˆ°ä¸­é€” V=0 çš„ pte æ•´ä¸ª walk è¿‡ç¨‹å°±ä¼šç›´æ¥é€€å‡º if (!alloc || (pagetable = (pde_t *)kalloc()) == 0) { return 0; } // æ¸…ç©ºåˆ†é…çš„é¡µè¡¨ memset(pagetable, 0, PGSIZE); // æ›´æ–°é¡µè¡¨é¡¹ï¼Œå°†å…¶æŒ‡å‘æ–°åˆ†é…çš„é¡µè¡¨ï¼Œå¹¶è®¾ç½®æœ‰æ•ˆä½ PTE_V *pte = PA2PTE(pagetable) | PTE_V; } } // è¿”å›æœ€ä½çº§å’Œè™šæ‹Ÿåœ°å€çš„é¡µè¡¨é¡¹ï¼Œä¸æ˜¯è¿”å›ç‰©ç†åœ°å€ return \u0026amp;pagetable[PX(0, va)]; } æ¯æ¬¡ä»è™šæ‹Ÿåœ°å€ va ä¸­æå–å‡ºä¸€ä¸ªè™šæ‹Ÿé¡µå·ï¼Œç„¶åæ ¹æ®è¿™ä¸ªè™šæ‹Ÿé¡µå·ä»é¡µè¡¨ä¸­å–å‡ºä¸‹ä¸€çº§é¡µè¡¨çš„åŸºåœ°å€ã€‚å¦‚æœè¿™ä¸ªé¡µè¡¨é¡¹æ— æ•ˆï¼Œé‚£ä¹ˆæ ¹æ® alloc å‚æ•°å†³å®šæ˜¯å¦åˆ†é…ä¸€ä¸ªæ–°çš„é¡µè¡¨ã€‚å¦‚æœ alloc å‚æ•°ä¸º 0 æˆ–è€…å·²ç»æ²¡æœ‰ç©ºé—²çš„å†…å­˜äº†ï¼Œé‚£ä¹ˆé‡åˆ°ä¸­é€” V=0 çš„ pte æ•´ä¸ª walk è¿‡ç¨‹å°±ä¼šç›´æ¥é€€å‡ºã€‚å¦‚æœ alloc å‚æ•°ä¸º 1ï¼Œé‚£ä¹ˆå°±ä¼šåˆ†é…ä¸€ä¸ªæ–°çš„é¡µè¡¨ï¼Œç„¶åå°†è¿™ä¸ªé¡µè¡¨é¡¹æŒ‡å‘æ–°åˆ†é…çš„é¡µè¡¨ï¼Œå¹¶è®¾ç½®æœ‰æ•ˆä½ PTE_Vã€‚\næˆ‘ä»¬å¯ä»¥å‘ç° walk è¿”å›çš„ç»“æœä¸æ˜¯ç‰©ç†åœ°å€ï¼Œè€Œæ˜¯é¡µè¡¨é¡¹çš„åœ°å€ã€‚è¿™æ˜¯å› ä¸º walk å‡½æ•°çš„ä½œç”¨æ˜¯å°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ï¼Œè€Œé¡µè¡¨é¡¹ä¸­çš„ PPN åªæ˜¯ç‰©ç†åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜éœ€è¦åŠ ä¸Šè™šæ‹Ÿåœ°å€çš„ä½ 12 ä½åç§»é‡æ‰èƒ½å¾—åˆ°ç‰©ç†åœ°å€ã€‚\nå¦‚ä½•å»ºç«‹é¡µè¡¨ å‰é¢çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯ä»¥ç”¨æˆ·çš„è§’åº¦æ¥è€ƒè™‘çš„ï¼Œä¹Ÿå°±æ˜¯ç»™ä½ ä¸€ä¸ªè™šæ‹Ÿåœ°å€æŒ‰ç…§åˆ†é¡µçš„è§„åˆ™å°†å…¶è½¬åŒ–æˆç‰©ç†åœ°å€å°±èƒ½è®¿é—®äº†ã€‚ä½†æ˜¯ä½œä¸ºä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¤šè€ƒè™‘ä¸€ä¸‹ï¼Œé¡µè¡¨æ˜¯å“ªæ¥çš„ï¼Ÿæˆ‘ä»¬çŸ¥é“ä»è™šæ‹Ÿåœ°å€ä¸­å»è·å–é¡µè¡¨åœ°å€ï¼Œä½†æ˜¯é¡µè¡¨çš„å†…å®¹æ˜¯å“ªæ¥çš„å‘¢ï¼Ÿé¡µè¡¨æ˜¯å¦‚ä½•å»ºç«‹èµ·æ¥çš„å‘¢ï¼Ÿè¿™äº›æ˜¯éœ€è¦æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ã€‚\nå»ºç«‹é¡µè¡¨ä¹Ÿå°±æ˜¯å»ºç«‹è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»ã€‚ä¹Ÿå°±æ˜¯ç»™ä½ ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œä½ éœ€è¦å‘Šè¯‰æˆ‘å¦‚ä½•æŸ¥åˆ°ç‰©ç†åœ°å€ï¼Œå®é™…ä¸Šè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å»ºç«‹é¡µè¡¨çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯é€šè¿‡ walk å‡½æ•°æ¥å®Œæˆçš„ï¼Œä»ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“å¦‚æœé¡µè¡¨éƒ½å»ºå¥½çš„æƒ…å†µä¸‹ walk å°±æ˜¯ä¸æ–­æŸ¥é¡µè¡¨çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆåœ¨æ²¡æœ‰é¡µè¡¨çš„æƒ…å†µä¸‹ï¼Œwalk è¿˜å¯ä»¥å»ºç«‹ä¸€ä¸ªä¸ªé¡µè¡¨ã€‚ç¨æœ‰ä¸åŒçš„æ˜¯ï¼Œwalk è¿”å›çš„æ˜¯æœ€åä¸€çº§é¡µè¡¨é¡¹çš„åœ°å€ï¼Œæˆ‘ä»¬éœ€è¦å°†ç‰©ç†åœ°å€å†™å…¥è¿™ä¸ªé¡µè¡¨é¡¹ä¸­ã€‚\nåœ¨ uCore ä¸­ä½¿ç”¨ mappages å‡½æ•°å°è£…äº† walk å‡½æ•°ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n#define PA2PTE(pa) ((((uint64)pa) \u0026gt;\u0026gt; 12) \u0026lt;\u0026lt; 10) /** * ä¸ºä»è™šæ‹Ÿåœ°å€ va å¼€å§‹çš„é¡µé¢åˆ›å»ºæŒ‡å‘ç‰©ç†åœ°å€ pa å¼€å§‹çš„é¡µè¡¨é¡¹ï¼ˆPTEï¼‰ * æ³¨æ„ï¼šva å’Œ size å¯èƒ½ä¸æ˜¯é¡µé¢å¯¹é½çš„ * å¦‚æœæ— æ³•åˆ†é…æ‰€éœ€çš„é¡µè¡¨ï¼Œåˆ™è¿”å› 0ï¼Œå¦åˆ™è¿”å› -1 * * @param pagetable æ ¹é¡µè¡¨åœ°å€ * @param va è™šæ‹Ÿåœ°å€ * @param size æ˜ å°„çš„å­—èŠ‚æ•° * @param pa ç‰©ç†åœ°å€ * @param perm æƒé™ä½ * @return æˆåŠŸè¿”å› 0ï¼Œå¦åˆ™è¿”å› -1 */ int mappages(pagetable_t pagetable, uint64 va, uint64 size, uint64 pa, int perm) { uint64 virtualAddress, lastVirtualAddress; pte_t *pte; // åœ°å€å¿…é¡»æ˜¯é¡µé¢å¯¹é½çš„ virtualAddress = PGROUNDDOWN(va); lastVirtualAddress = PGROUNDDOWN(va + size - 1); for (;;) { // è¿”å›æœ€ä½çº§çš„è™šæ‹Ÿåœ°å€çš„é¡µè¡¨é¡¹ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é¡µè¡¨é¡¹ // é¡µè¡¨é¡¹å¯èƒ½ä¼šå› ä¸ºå†…å­˜ä¸è¶³åˆ›å»ºå¤±è´¥ï¼Œå¦‚æœåˆ›å»ºå¤±è´¥ï¼Œåˆ™è¿”å› -1 if ((pte = walk(pagetable, virtualAddress, 1)) == 0) { return -1; } // å¦‚æœ PTE å·²ç»æœ‰æ•ˆï¼Œåˆ™è¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶è¿”å› -1 if (*pte \u0026amp; PTE_V) { errorf(\u0026#34;remap\u0026#34;); return -1; } // å°†ç‰©ç†åœ°å€ pa è½¬æ¢ä¸ºé¡µè¡¨é¡¹ï¼Œå¹¶è®¾ç½®æƒé™ä½ perm å’Œ æœ‰æ•ˆä½ PTE_V *pte = PA2PTE(pa) | perm | PTE_V; // å¦‚æœå½“å‰æ˜¯æœ€åä¸€ä¸ªåœ°å€ï¼Œåˆ™ç»“æŸå¾ªç¯ if (virtualAddress == lastVirtualAddress) { break; } virtualAddress += PGSIZE; pa += PGSIZE; } return 0; } é—®ç­”ä½œä¸š è¯·åˆ—ä¸¾ SV39 é¡µè¡¨é¡µè¡¨é¡¹çš„ç»„æˆï¼Œç»“åˆè¯¾å ‚å†…å®¹ï¼Œæè¿°å…¶ä¸­çš„æ ‡å¿—ä½æœ‰ä½•ä½œç”¨ï¼æ½œåœ¨ä½œç”¨ï¼Ÿ Sv39 é¡µè¡¨é¡µè¡¨é¡¹çš„ç»„æˆå¦‚ä¸‹ï¼š\næœ‰æ•ˆä½ (V)ï¼šè¿™æ˜¯é¡µè¡¨é¡¹çš„æœ€é«˜ä½ï¼Œç”¨äºæŒ‡ç¤ºé¡µè¡¨é¡¹æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœæœ‰æ•ˆä½è®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºé¡µè¡¨é¡¹æœ‰æ•ˆï¼Œå¯ä»¥ä½¿ç”¨ï¼›å¦‚æœè®¾ç½®ä¸º 0ï¼Œè¡¨ç¤ºé¡µè¡¨é¡¹æ— æ•ˆï¼Œç¦æ­¢ä½¿ç”¨ã€‚è¿™æ˜¯è™šæ‹Ÿå†…å­˜ä¸­é¡µè¡¨é¡¹çš„åŸºæœ¬æœ‰æ•ˆæ€§æ ‡å¿—ã€‚ å†™å…¥ä½ (W)ï¼šè¿™ä¸ªæ ‡å¿—ä½ç”¨äºæŒ‡ç¤ºæ˜¯å¦å¯ä»¥å¯¹æ­¤é¡µè¿›è¡Œå†™å…¥æ“ä½œã€‚å¦‚æœè®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºå…è®¸å†™å…¥ï¼›å¦‚æœè®¾ç½®ä¸º 0ï¼Œè¡¨ç¤ºç¦æ­¢å†™å…¥ã€‚å®ƒæ˜¯é¡µè¡¨é¡¹çš„è®¿é—®æƒé™æ§åˆ¶æ ‡å¿—ä¹‹ä¸€ã€‚ ç”¨æˆ·ä½ (U)ï¼šç”¨æˆ·ä½ç”¨äºæŒ‡ç¤ºæ˜¯å¦å…è®¸ç”¨æˆ·æ€ç¨‹åºè®¿é—®æ­¤é¡µã€‚å¦‚æœè®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºå…è®¸ç”¨æˆ·æ€è®¿é—®ï¼›å¦‚æœè®¾ç½®ä¸º 0ï¼Œè¡¨ç¤ºåªå…è®¸å†…æ ¸æ€è®¿é—®ã€‚å®ƒæ˜¯é¡µè¡¨é¡¹çš„è®¿é—®æƒé™æ§åˆ¶æ ‡å¿—ä¹‹ä¸€ã€‚ æ‰§è¡Œä½ (X)ï¼šæ‰§è¡Œä½ç”¨äºæŒ‡ç¤ºæ˜¯å¦å…è®¸æ‰§è¡Œæ­¤é¡µä¸Šçš„æŒ‡ä»¤ã€‚å¦‚æœè®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºå…è®¸æ‰§è¡Œï¼›å¦‚æœè®¾ç½®ä¸º 0ï¼Œè¡¨ç¤ºç¦æ­¢æ‰§è¡Œã€‚å®ƒä¹Ÿæ˜¯é¡µè¡¨é¡¹çš„è®¿é—®æƒé™æ§åˆ¶æ ‡å¿—ä¹‹ä¸€ã€‚ å…¨å±€ä½ (G)ï¼šå…¨å±€ä½ç”¨äºæŒ‡ç¤ºæ­¤é¡µæ˜¯å¦æ˜¯å…¨å±€çš„ï¼Œå³æ— éœ€ TLB ç¼“å­˜ï¼Œé€šå¸¸ç”¨äºå†…æ ¸é¡µã€‚å¦‚æœè®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºæ˜¯å…¨å±€çš„ï¼›å¦‚æœè®¾ç½®ä¸º 0ï¼Œè¡¨ç¤ºä¸æ˜¯å…¨å±€çš„ã€‚ å·²è®¿é—®ä½ (A)ï¼šå·²è®¿é—®ä½è¡¨ç¤ºæ˜¯å¦å·²ç»è®¿é—®è¿‡æ­¤é¡µï¼Œé€šå¸¸ç”±ç¡¬ä»¶è®¾ç½®ã€‚æ“ä½œç³»ç»Ÿå¯ä»¥ç”¨å®ƒæ¥å®ç°é¡µé¢ç½®æ¢ç®—æ³•ï¼Œå¦‚ LRUã€‚ å·²ä¿®æ”¹ä½ (D)ï¼šå·²ä¿®æ”¹ä½è¡¨ç¤ºæ˜¯å¦å·²ç»å¯¹æ­¤é¡µè¿›è¡Œäº†å†™å…¥æ“ä½œã€‚ä¸å·²è®¿é—®ä½ç±»ä¼¼ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥ç”¨å®ƒæ¥å®ç°é¡µé¢ç½®æ¢ç®—æ³•ã€‚ ç‰©ç†é¡µæ¡†åœ°å€ (PPN)ï¼šè¿™æ˜¯é¡µè¡¨é¡¹ä¸­å­˜å‚¨çš„ç‰©ç†é¡µæ¡†çš„åœ°å€ã€‚å®ƒæŒ‡ç¤ºäº†è™šæ‹Ÿé¡µåˆ°ç‰©ç†é¡µçš„æ˜ å°„å…³ç³»ã€‚ Sv39 é¡µè¡¨çš„é¡µè¡¨é¡¹æ ‡å¿—ä½å…è®¸æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶å®ç°å¯¹è™šæ‹Ÿå†…å­˜çš„ç»†ç²’åº¦æ§åˆ¶å’Œä¿æŠ¤ã€‚ä¸åŒçš„æ ‡å¿—ä½ç»„åˆå¯ä»¥å®ç°ä¸åŒçº§åˆ«çš„å†…å­˜ä¿æŠ¤å’Œæƒé™æ§åˆ¶ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œå¯ç”¨æ€§ã€‚ä¾‹å¦‚ï¼Œæœ‰æ•ˆä½ã€å†™å…¥ä½ã€ç”¨æˆ·ä½å’Œæ‰§è¡Œä½çš„ä¸åŒç»„åˆå¯ä»¥å®ç°ä¸åŒçº§åˆ«çš„å†…å­˜ä¿æŠ¤ï¼Œä½¿æ“ä½œç³»ç»Ÿå¯ä»¥å°†ä¸åŒçš„å†…å­˜åŒºåŸŸåˆ†é…ç»™ç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œå¹¶è®¾ç½®ä¸åŒçš„æƒé™ã€‚å·²è®¿é—®ä½å’Œå·²ä¿®æ”¹ä½åˆ™ç”¨äºå®ç°é¡µé¢ç½®æ¢ç®—æ³•ï¼Œå¸®åŠ©æ“ä½œç³»ç»Ÿå†³å®šå“ªäº›é¡µé¢åº”è¯¥è¢«ç½®æ¢å‡ºå»ï¼Œä»¥ä¼˜åŒ–å†…å­˜åˆ©ç”¨ç‡ã€‚å…¨å±€ä½å¯ä»¥ç”¨äºæ ‡è¯†å…¨å±€å…±äº«çš„é¡µï¼Œä»è€ŒèŠ‚çœ TLB ç¼“å­˜ç©ºé—´ã€‚ç‰©ç†é¡µæ¡†åœ°å€æ˜¯é¡µè¡¨é¡¹çš„æ ¸å¿ƒï¼Œå®ƒå»ºç«‹äº†è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»ï¼Œä½¿è™šæ‹Ÿå†…å­˜ç®¡ç†æˆä¸ºå¯èƒ½ã€‚\nç¼ºé¡µç›¸å…³é—®é¢˜ è¯·é—®å“ªäº›å¼‚å¸¸å¯èƒ½æ˜¯ç¼ºé¡µå¯¼è‡´çš„ï¼Ÿ ç¼ºé¡µå¼‚å¸¸æ˜¯ç”±äºè¿›ç¨‹è®¿é—®çš„é¡µé¢ä¸åœ¨é¡µè¡¨ä¸­æˆ–è€…åœ¨é¡µè¡¨ä¸­æ— æ•ˆè€Œå¼•å‘çš„å¼‚å¸¸ã€‚ä»¥ä¸‹è¿™äº›å¼‚å¸¸å¯èƒ½æ˜¯å› ä¸ºç¼ºé¡µå¯¼è‡´çš„ï¼š\nLoad Page Faultï¼ˆLoad å¼‚å¸¸ï¼‰ï¼šå½“è¿›ç¨‹è¯•å›¾è¯»å–ä¸€ä¸ªä¸åœ¨é¡µè¡¨ä¸­æˆ–è€…æ— æ•ˆçš„é¡µé¢æ—¶ï¼Œä¼šå¼•å‘ Load Page Fault å¼‚å¸¸ã€‚åœ¨ RISC-V ä¸­ï¼Œè¿™ä¸ªå¼‚å¸¸å¯¹åº”çš„å¼‚å¸¸ä»£ç æ˜¯ 5ã€‚\nStore Page Faultï¼ˆStore å¼‚å¸¸ï¼‰ï¼šå½“è¿›ç¨‹è¯•å›¾å†™å…¥ä¸€ä¸ªä¸åœ¨é¡µè¡¨ä¸­æˆ–è€…æ— æ•ˆçš„é¡µé¢æ—¶ï¼Œä¼šå¼•å‘ Store Page Fault å¼‚å¸¸ã€‚åœ¨ RISC-V ä¸­ï¼Œè¿™ä¸ªå¼‚å¸¸å¯¹åº”çš„å¼‚å¸¸ä»£ç æ˜¯ 7ã€‚\nInstruction Page Faultï¼ˆæŒ‡ä»¤é¡µå¼‚å¸¸ï¼‰ï¼šå½“è¿›ç¨‹è¯•å›¾æ‰§è¡Œä¸€ä¸ªä¸åœ¨é¡µè¡¨ä¸­æˆ–è€…æ— æ•ˆçš„é¡µé¢ä¸Šçš„æŒ‡ä»¤æ—¶ï¼Œä¼šå¼•å‘ Instruction Page Fault å¼‚å¸¸ã€‚åœ¨ RISC-V ä¸­ï¼Œè¿™ä¸ªå¼‚å¸¸å¯¹åº”çš„å¼‚å¸¸ä»£ç æ˜¯ 12ã€‚\nå‘ç”Ÿç¼ºé¡µæ—¶ï¼Œæè¿°ç›¸å…³çš„é‡è¦å¯„å­˜å™¨çš„å€¼ï¼ˆlab2 ä¸­æè¿°è¿‡çš„å¯ä»¥ç®€å•ç‚¹ï¼‰ã€‚ sepcï¼ˆException Program Counterï¼‰ï¼štrap å‘ç”Ÿæ—¶ä¼šå°†å½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€å†™å…¥å…¶ä¸­ï¼Œç”¨äº trap å¤„ç†å®Œæˆåè¿”å›ã€‚ stvalï¼ˆMachine Trap Valueï¼‰ï¼šmtval å¯„å­˜å™¨åŒ…å«å¯¼è‡´å¼‚å¸¸çš„åŸå› ï¼Œå³å¯¼è‡´å¼‚å¸¸çš„æŒ‡ä»¤çš„å…·ä½“ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ˜¯ç¼ºé¡µå¼‚å¸¸ï¼Œé‚£ä¹ˆ mtval å¯„å­˜å™¨åŒ…å«å¯¼è‡´ç¼ºé¡µå¼‚å¸¸çš„è™šæ‹Ÿåœ°å€ã€‚ scause: ä¸­æ–­/å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œ CSR å¯„å­˜å™¨ scause ä¸­ä¼šè®°å½•å…¶ä¿¡æ¯ï¼Œ Interrupt ä½è®°å½•æ˜¯ä¸­æ–­è¿˜æ˜¯å¼‚å¸¸ï¼Œ Exception Code è®°å½•ä¸­æ–­/å¼‚å¸¸çš„ç§ç±»ã€‚ sstatus: è®°å½•å¤„ç†å™¨å½“å‰çŠ¶æ€ï¼Œå…¶ä¸­ SPP æ®µè®°å½•å½“å‰ç‰¹æƒç­‰çº§ã€‚ stvec: è®°å½•å¤„ç† trap çš„å…¥å£åœ°å€ï¼Œç°æœ‰ä¸¤ç§æ¨¡å¼ Direct å’Œ Vectored ã€‚ sscratch: å…¶ä¸­çš„å€¼æ˜¯æŒ‡å‘hartç›¸å…³çš„Sæ€ä¸Šä¸‹æ–‡çš„æŒ‡é’ˆï¼Œæ¯”å¦‚å†…æ ¸æ ˆçš„æŒ‡é’ˆã€‚ ä»¥ä¸‹è¡Œä¸ºçš„å¥½å¤„ï¼Ÿ ç¼ºé¡µæœ‰ä¸¤ä¸ªå¸¸è§çš„åŸå› ï¼Œå…¶ä¸€æ˜¯ Lazy ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯ç›´åˆ°å†…å­˜é¡µé¢è¢«è®¿é—®æ‰å®é™…è¿›è¡Œé¡µè¡¨æ“ä½œã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç¨‹åºè¢«æ‰§è¡Œæ—¶ï¼Œè¿›ç¨‹çš„ä»£ç æ®µç†è®ºä¸Šéœ€è¦ä»ç£ç›˜åŠ è½½åˆ°å†…å­˜ã€‚ä½†æ˜¯ os å¹¶ä¸ä¼šé©¬ä¸Šè¿™æ ·åšï¼Œè€Œæ˜¯ä¼šä¿å­˜ .text æ®µåœ¨ç£ç›˜çš„ä½ç½®ä¿¡æ¯ï¼Œåœ¨è¿™äº›ä»£ç ç¬¬ä¸€æ¬¡è¢«æ‰§è¡Œæ—¶æ‰å®Œæˆä»ç£ç›˜çš„åŠ è½½æ“ä½œã€‚\nLazy Loading ç­–ç•¥æœ‰ä»¥ä¸‹å¥½å¤„ï¼š\nå‡å°‘åˆå§‹åŒ–å¼€é”€ï¼šLazy Loading å…è®¸æ“ä½œç³»ç»Ÿåœ¨ç¨‹åºå¯åŠ¨æ—¶åªåŠ è½½å¿…éœ€çš„é¡µé¢ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ•´ä¸ªç¨‹åºã€‚è¿™å¯ä»¥å‡å°‘å¯åŠ¨æ—¶é—´å’Œåˆå§‹åŒ–å¼€é”€ï¼Œå› ä¸ºä¸éœ€è¦å°†æ•´ä¸ªç¨‹åºåŠ è½½åˆ°å†…å­˜ä¸­ã€‚ èŠ‚çœå†…å­˜ï¼šLazy Loading ç­–ç•¥é¿å…äº†ä¸å¿…è¦çš„å†…å­˜å ç”¨ã€‚å¦‚æœç¨‹åºçš„æŸäº›éƒ¨åˆ†ä»ä¸è¢«è®¿é—®ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¸ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä»è€ŒèŠ‚çœäº†å†…å­˜èµ„æºã€‚ æé«˜å“åº”é€Ÿåº¦ï¼šé€šè¿‡ä»…åœ¨éœ€è¦æ—¶åŠ è½½é¡µé¢ï¼ŒLazy Loading å¯ä»¥æé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦ã€‚åªæœ‰å½“ç¨‹åºè®¿é—®æŸä¸ªé¡µé¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šæ‰§è¡Œç£ç›˜åŠ è½½æ“ä½œï¼Œè€Œä¸ä¼šåœ¨ç¨‹åºå¯åŠ¨æ—¶æµªè´¹æ—¶é—´åŠ è½½å¯èƒ½æ°¸è¿œä¸ä¼šè¢«è®¿é—®çš„å†…å®¹ã€‚ æ›´å¥½çš„ç£ç›˜åˆ©ç”¨ç‡ï¼šLazy Loading å…è®¸æ“ä½œç³»ç»Ÿå°†ç¨‹åºçš„ä¸åŒéƒ¨åˆ†åˆ†æ•£åœ¨ç£ç›˜ä¸Šï¼Œæ ¹æ®éœ€è¦åŠ è½½ã€‚è¿™å¯ä»¥æé«˜ç£ç›˜åˆ©ç”¨ç‡ï¼Œå› ä¸ºä¸éœ€è¦åœ¨ç£ç›˜ä¸Šä¸ºæ•´ä¸ªç¨‹åºåˆ†é…è¿ç»­çš„ç©ºé—´ã€‚ è¯·é—®å¤„ç† 10G è¿ç»­çš„å†…å­˜é¡µé¢ï¼Œéœ€è¦æ“ä½œçš„é¡µè¡¨å®é™…å¤§è‡´å ç”¨å¤šå°‘å†…å­˜ (ç»™å‡ºæ•°é‡çº§å³å¯)ï¼Ÿ æ­¤å¤– COW(Copy On Write) ä¹Ÿæ˜¯å¸¸è§çš„å®¹æ˜“å¯¼è‡´ç¼ºé¡µçš„ Lazy ç­–ç•¥ï¼Œè¿™ä¸ªä¹‹åå†è¯´ã€‚å…¶å®ï¼Œæˆ‘ä»¬çš„ mmap ä¹Ÿå¯ä»¥é‡‡å– Lazy ç­–ç•¥ï¼Œæ¯”å¦‚ï¼šä¸€ä¸ªç”¨æˆ·è¿›ç¨‹å…ˆåç”³è¯·äº† 10G çš„å†…å­˜ç©ºé—´ï¼Œç„¶åç”¨äº†å…¶ä¸­ 1M å°±ç›´æ¥é€€å‡ºäº†ã€‚æŒ‰ç…§ç°åœ¨çš„åšæ³•ï¼Œæˆ‘ä»¬æ˜¾ç„¶äºå¤§äº†ï¼Œè¿›è¡Œäº†å¾ˆå¤šæ²¡æœ‰æ„ä¹‰çš„é¡µè¡¨æ“ä½œã€‚\nå¤„ç† 10GB è¿ç»­çš„å†…å­˜é¡µé¢æ‰€éœ€çš„é¡µè¡¨å®é™…ä¸Šå ç”¨çš„å†…å­˜é‡å–å†³äºæ“ä½œç³»ç»Ÿçš„é¡µè¡¨ç»“æ„å’Œç®¡ç†ç­–ç•¥ã€‚åœ¨ RISC-V çš„é¡µè¡¨ç»“æ„ä¸­ï¼Œä¸€ä¸ªé¡µè¡¨é¡¹ï¼ˆPage Table Entryï¼ŒPTEï¼‰é€šå¸¸å æ® 8 å­—èŠ‚ï¼ˆ64 ä½ç³»ç»Ÿï¼‰ï¼Œå…¶ä¸­åŒ…æ‹¬ç‰©ç†é¡µæ¡†å·å’Œä¸€äº›æ ‡å¿—ä½ã€‚è®©æˆ‘ä»¬å‡è®¾ä¸€ä¸ª PTE å ç”¨ 8 å­—èŠ‚ã€‚\nä¸ºäº†ä¼°ç®— 10GB è¿ç»­å†…å­˜é¡µé¢æ‰€éœ€çš„é¡µè¡¨å®é™…å ç”¨å†…å­˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œè®¡ç®—ï¼š\né¦–å…ˆï¼Œå°† 10GB è½¬æ¢ä¸ºå­—èŠ‚æ•°ã€‚1GB ç­‰äº 1,073,741,824 å­—èŠ‚ï¼Œæ‰€ä»¥ 10GB ç­‰äº 10 * 1,073,741,824 = 10,737,418,240 å­—èŠ‚ã€‚\nç„¶åï¼Œè®¡ç®—æ¯ä¸ªé¡µé¢è¡¨é¡¹è¦†ç›–çš„å†…å­˜èŒƒå›´ã€‚å‡è®¾æ¯ä¸ªé¡µé¢è¡¨é¡¹ç®¡ç† 4KBï¼ˆ4 * 1024 å­—èŠ‚ï¼‰çš„å†…å­˜é¡µé¢ã€‚\nè®¡ç®—éœ€è¦å¤šå°‘ä¸ªé¡µé¢è¡¨é¡¹æ¥ç®¡ç† 10GB çš„å†…å­˜ã€‚è¿™å¯ä»¥é€šè¿‡å°† 10GB é™¤ä»¥æ¯ä¸ªé¡µé¢è¡¨é¡¹ç®¡ç†çš„å†…å­˜èŒƒå›´æ¥å®ç°ã€‚\næœ€åï¼Œå°†æ‰€éœ€çš„é¡µé¢è¡¨é¡¹æ•°é‡ä¹˜ä»¥æ¯ä¸ª PTE çš„å¤§å°æ¥ä¼°ç®—æ‰€éœ€çš„æ€»å†…å­˜é‡ã€‚\nè®©æˆ‘ä»¬è¿›è¡Œå…·ä½“è®¡ç®—ï¼š\nå†…å­˜å¤§å°ï¼š10,737,418,240 å­—èŠ‚ æ¯ä¸ªé¡µé¢è¡¨é¡¹ç®¡ç†çš„å†…å­˜èŒƒå›´ï¼š4KB = 4 * 1024 å­—èŠ‚ éœ€è¦çš„é¡µé¢è¡¨é¡¹æ•°é‡ï¼š10,737,418,240 å­—èŠ‚ / 4KB = 2,621,440 ä¸ªé¡µè¡¨é¡¹ å‡è®¾æ¯ä¸ªé¡µè¡¨é¡¹å ç”¨ 8 å­—èŠ‚ï¼Œåˆ™éœ€è¦çš„æ€»å†…å­˜é‡ä¸ºï¼š\n2,621,440 ä¸ªé¡µè¡¨é¡¹ * 8 å­—èŠ‚/é¡µè¡¨é¡¹ = 20,971,520 å­—èŠ‚\næ‰€ä»¥ï¼Œå¤„ç† 10GB è¿ç»­çš„å†…å­˜é¡µé¢æ‰€éœ€çš„é¡µè¡¨å®é™…å ç”¨å†…å­˜é‡çº¦ä¸º 20,971,520 å­—èŠ‚ï¼Œæˆ–è€…å¤§çº¦ 20MBã€‚è¿™åªæ˜¯ä¸€ä¸ªä¼°ç®—ï¼Œå®é™…å†…å­˜å ç”¨å¯èƒ½ä¼šå› æ“ä½œç³»ç»Ÿçš„ç®¡ç†ç­–ç•¥å’Œå¯¹é½ç­‰å› ç´ è€Œæœ‰æ‰€ä¸åŒã€‚\nè¯·ç®€å•æ€è€ƒå¦‚ä½•æ‰èƒ½åœ¨ç°æœ‰æ¡†æ¶åŸºç¡€ä¸Šå®ç° Lazy ç­–ç•¥ï¼Œç¼ºé¡µæ—¶åˆå¦‚ä½•å¤„ç†ï¼Ÿæè¿°åˆç†å³å¯ï¼Œä¸éœ€è¦è€ƒè™‘å®ç°ã€‚ è¦åœ¨ç°æœ‰æ¡†æ¶åŸºç¡€ä¸Šå®ç° Lazy ç­–ç•¥ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹ç®€å•æ€è·¯ï¼š\nå»¶è¿ŸåŠ è½½ï¼ˆLazy Loadingï¼‰ï¼šåœ¨ç”¨æˆ·è¿›ç¨‹è¯·æ±‚å†…å­˜æ˜ å°„æ—¶ï¼Œä¸ç«‹å³å°†æ•´ä¸ªå†…å­˜åŒºåŸŸåŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ã€‚è€Œæ˜¯ä»…åˆ›å»ºè™šæ‹Ÿå†…å­˜æ˜ å°„å’Œé¡µè¡¨é¡¹ï¼Œè®°å½•å¯¹åº”çš„ç£ç›˜ä½ç½®ç­‰ä¿¡æ¯ã€‚\nç¼ºé¡µå¤„ç†ï¼ˆPage Fault Handlingï¼‰ï¼šå½“ç”¨æˆ·è¿›ç¨‹è®¿é—®è™šæ‹Ÿå†…å­˜ä¸­çš„æŸä¸ªå°šæœªåŠ è½½çš„å†…å­˜é¡µé¢æ—¶ï¼Œä¼šè§¦å‘ç¼ºé¡µå¼‚å¸¸ã€‚åœ¨ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºä¸­ï¼Œæ“ä½œç³»ç»Ÿä¼šæ ¹æ®é¡µè¡¨ä¸­çš„ç£ç›˜ä½ç½®ä¿¡æ¯ï¼Œå°†ç›¸åº”çš„ç£ç›˜æ•°æ®åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ï¼Œå¹¶æ›´æ–°é¡µè¡¨é¡¹ï¼Œä½¿å…¶æŒ‡å‘æ–°åŠ è½½çš„ç‰©ç†é¡µé¢ã€‚\næƒ°æ€§åŠ è½½ï¼ˆDemand Pagingï¼‰ï¼šä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¯ä»¥é‡‡ç”¨æƒ°æ€§åŠ è½½ç­–ç•¥ï¼Œå³åªåŠ è½½å®é™…è¢«è®¿é—®çš„å†…å­˜é¡µé¢ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ•´ä¸ªåŒºåŸŸã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ç¼ºé¡µå¤„ç†ç¨‹åºä¸­è¿›è¡Œæ‡’åŠ è½½æ“ä½œæ¥å®ç°ã€‚\nå†…å­˜å›æ”¶ï¼ˆMemory Reclamationï¼‰ï¼šå½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥é€‰æ‹©å›æ”¶ä¸€äº›ä¸å¸¸è®¿é—®çš„å†…å­˜é¡µé¢ï¼Œå°†å…¶å†™å›ç£ç›˜ï¼Œå¹¶æ›´æ–°é¡µè¡¨é¡¹ä¸ºæ— æ•ˆã€‚è¿™éœ€è¦æ ¹æ®é¡µé¢è®¿é—®æ¨¡å¼å’Œç­–ç•¥æ¥ç¡®å®šå“ªäº›é¡µé¢å¯ä»¥è¢«å›æ”¶ã€‚\næ€§èƒ½ä¼˜åŒ–ï¼šä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¯ä»¥é‡‡ç”¨é¢„è¯»å–ï¼ˆPrefetchingï¼‰ç­–ç•¥ï¼Œå³åœ¨ç¼ºé¡µå¤„ç†æ—¶ï¼Œä¸ä»…åŠ è½½å½“å‰è®¿é—®çš„é¡µé¢ï¼Œè¿˜é¢„å…ˆåŠ è½½ç›¸é‚»çš„é¡µé¢ï¼Œä»¥å‡å°‘æœªæ¥å¯èƒ½çš„ç¼ºé¡µæ¬¡æ•°ã€‚\næ­¤æ—¶é¡µé¢å¤±æ•ˆå¦‚ä½•è¡¨ç°åœ¨é¡µè¡¨é¡¹ (PTE) ä¸Šï¼Ÿ ç¼ºé¡µçš„å¦ä¸€ä¸ªå¸¸è§åŸå› æ˜¯ swap ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯å†…å­˜é¡µé¢å¯èƒ½è¢«æ¢åˆ°ç£ç›˜ä¸Šäº†ï¼Œå¯¼è‡´å¯¹åº”é¡µé¢å¤±æ•ˆã€‚\nDirty bit (D ä½)ï¼šå½“é¡µé¢è¢«ä¿®æ”¹å¹¶ä¸”å°šæœªå†™å›åˆ°ä¸»å­˜æ—¶ï¼Œè¯¥ä½ä¼šè¢«è®¾ç½®ä¸º 1ã€‚å¦‚æœé¡µé¢å·²ç»è¢«æ¢å‡ºåˆ°ç£ç›˜ä¸Šï¼ŒD ä½å°†ä¿æŒä¸º 1ï¼Œä»¥æŒ‡ç¤ºé¡µé¢æ•°æ®å·²è¿‡æœŸã€‚\nValid bit (V ä½)ï¼šå½“é¡µé¢åœ¨ä¸»å­˜ä¸­æœ‰æ•ˆæ—¶ï¼ŒV ä½è¢«è®¾ç½®ä¸º 1ã€‚å¦‚æœé¡µé¢è¢«æ¢å‡ºåˆ°ç£ç›˜ä¸Šï¼ŒV ä½å°†è¢«æ¸…é™¤ä¸º 0ï¼Œè¡¨ç¤ºè¯¥é¡µæ— æ•ˆã€‚\né€šè¿‡æ£€æŸ¥é¡µè¡¨é¡¹çš„ D ä½å’Œ V ä½ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥ç¡®å®šé¡µé¢æ˜¯å¦éœ€è¦ä»ç£ç›˜é‡æ–°åŠ è½½åˆ°å†…å­˜ä¸­ã€‚å¦‚æœ D ä½ä¸º 1ï¼Œè¯´æ˜é¡µé¢éœ€è¦å†™å›åˆ°ä¸»å­˜ï¼Œåœ¨å°†å…¶ç½®ä¸ºæœ‰æ•ˆä¹‹å‰ï¼Œå¿…é¡»å°†é¡µæ•°æ®ä»ç£ç›˜è¯»å–åˆ°å†…å­˜ä¸­ã€‚å¦‚æœ V ä½ä¸º 0ï¼Œè¯´æ˜é¡µé¢å½“å‰æ— æ•ˆï¼Œéœ€è¦å°†å…¶ä»ç£ç›˜åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°† V ä½è®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºé¡µé¢æœ‰æ•ˆã€‚\nåŒé¡µè¡¨ä¸å•é¡µè¡¨ ä¸ºäº†é˜²èŒƒä¾§ä¿¡é“æ”»å‡»ï¼Œæˆ‘ä»¬çš„ os ä½¿ç”¨äº†åŒé¡µè¡¨ã€‚ä½†æ˜¯ä¼ ç»Ÿçš„è®¾è®¡ä¸€ç›´æ˜¯å•é¡µè¡¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·çº¿ç¨‹å’Œå¯¹åº”çš„å†…æ ¸çº¿ç¨‹å…±ç”¨åŒä¸€å¼ é¡µè¡¨ï¼Œåªä¸è¿‡å†…æ ¸å¯¹åº”çš„åœ°å€åªå…è®¸åœ¨å†…æ ¸æ€è®¿é—®ã€‚è¯·ç»“åˆè¯¾å ‚çŸ¥è¯†å›ç­”å¦‚ä¸‹é—®é¢˜ï¼š(å¤‡æ³¨ï¼šè¿™é‡Œçš„å•/åŒçš„è¯´æ³•ä»…ä¸ºè‡ªåˆ›çš„é€šä¿—è¯´æ³•ï¼Œå¹¶æ— è¿™ä¸ªåè¯æ¦‚å¿µï¼Œè¯¦æƒ…è§ KPTI )\nå•é¡µè¡¨æƒ…å†µä¸‹ï¼Œå¦‚ä½•æ›´æ¢é¡µè¡¨ï¼Ÿ åœ¨å•é¡µè¡¨æƒ…å†µä¸‹ï¼Œé¡µè¡¨çš„æ›´æ¢é€šå¸¸æ˜¯ç”±æ“ä½œç³»ç»Ÿçš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ¥è§¦å‘çš„ã€‚å½“ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€æˆ–ä»ä¸€ä¸ªè¿›ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæ ¹æ®ç›¸åº”çš„ä¸Šä¸‹æ–‡ä¿¡æ¯åŠ è½½ä¸åŒçš„é¡µè¡¨ï¼Œå®ç°é¡µè¡¨çš„æ›´æ¢ã€‚\nå•é¡µè¡¨æƒ…å†µä¸‹ï¼Œå¦‚ä½•æ§åˆ¶ç”¨æˆ·æ€æ— æ³•è®¿é—®å†…æ ¸é¡µé¢ï¼Ÿï¼ˆtips:çœ‹çœ‹ç¬¬ä¸€é¢˜æœ€åä¸€é—®ï¼‰ è®¾ç½®é¡µé¢æƒé™ï¼šå†…æ ¸é¡µé¢é€šå¸¸ä¼šè¢«è®¾ç½®ä¸ºåªèƒ½åœ¨å†…æ ¸æ€ä¸‹è®¿é—®ï¼ˆä¾‹å¦‚ï¼Œè®¾ç½® PTE_U ä½ä¸º 0ï¼‰ï¼Œè¿™æ ·ç”¨æˆ·æ€æ— æ³•è®¿é—®å†…æ ¸é¡µé¢ã€‚ æ“ä½œç³»ç»Ÿæƒé™ï¼šæ“ä½œç³»ç»Ÿå†…æ ¸æ€æ‹¥æœ‰è¾ƒé«˜çš„æƒé™ï¼Œå¯ä»¥é€šè¿‡ç‰¹æƒçº§åˆ«æˆ–è®¿é—®æ§åˆ¶æœºåˆ¶æ¥ç¡®ä¿ç”¨æˆ·æ€æ— æ³•ç›´æ¥è®¿é—®å†…æ ¸é¡µé¢ã€‚ç”¨æˆ·ç¨‹åºåªèƒ½é€šè¿‡ç³»ç»Ÿè°ƒç”¨è¿›å…¥å†…æ ¸æ€ï¼Œå¹¶åœ¨å†…æ ¸æ€ä¸‹ç”±æ“ä½œç³»ç»Ÿæ‰§è¡Œï¼Œä»è€Œå®ç°å¯¹å†…æ ¸é¡µé¢çš„è®¿é—®æ§åˆ¶ã€‚ å•é¡µè¡¨æœ‰ä½•ä¼˜åŠ¿ï¼Ÿï¼ˆå›ç­”åˆç†å³å¯ï¼‰ å•é¡µè¡¨çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºç®€åŒ–äº†åœ°å€è½¬æ¢è¿‡ç¨‹ï¼Œå‡å°‘äº†å†…å­˜è®¿é—®çš„å¼€é”€ã€‚ç”±äºç”¨æˆ·çº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹å…±äº«åŒä¸€å¼ é¡µè¡¨ï¼Œä¸éœ€è¦åœ¨ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶é¢‘ç¹åˆ‡æ¢é¡µè¡¨ï¼Œè¿™å¯ä»¥æé«˜åœ°å€è½¬æ¢çš„æ•ˆç‡ã€‚æ­¤å¤–ï¼Œå•é¡µè¡¨è¿˜å¯ä»¥èŠ‚çœå†…å­˜ï¼Œå› ä¸ºä¸éœ€è¦ä¸ºæ¯ä¸ªç”¨æˆ·çº¿ç¨‹åˆ†é…ç‹¬ç«‹çš„é¡µè¡¨ã€‚\nåŒé¡µè¡¨å®ç°ä¸‹ï¼Œä½•æ—¶éœ€è¦æ›´æ¢é¡µè¡¨ï¼Ÿå‡è®¾ä½ å†™ä¸€ä¸ªå•é¡µè¡¨æ“ä½œç³»ç»Ÿï¼Œä½ ä¼šé€‰æ‹©ä½•æ—¶æ›´æ¢é¡µè¡¨ï¼ˆå›ç­”åˆç†å³å¯ï¼‰ï¼Ÿ åœ¨åŒé¡µè¡¨å®ç°ä¸‹ï¼Œé¡µè¡¨çš„æ›´æ¢é€šå¸¸åœ¨å‘ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶éœ€è¦ã€‚å½“ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€æˆ–ä»ä¸€ä¸ªè¿›ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œéœ€è¦åŠ è½½ç›¸åº”çš„é¡µè¡¨ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„åœ°å€è½¬æ¢ã€‚å¦‚æœæ“ä½œç³»ç»Ÿé‡‡ç”¨äº†æ¯ä¸ªè¿›ç¨‹ç‹¬ç«‹çš„é¡µè¡¨ï¼Œé‚£ä¹ˆåœ¨è¿›ç¨‹åˆ‡æ¢æ—¶éœ€è¦æ›´æ¢é¡µè¡¨ã€‚\nå¦‚æœæˆ‘å†™ä¸€ä¸ªå•é¡µè¡¨æ“ä½œç³»ç»Ÿï¼Œæˆ‘ä¼šé€‰æ‹©åœ¨å‘ç”Ÿè¿›ç¨‹åˆ‡æ¢æ—¶æ›´æ¢é¡µè¡¨ï¼Œå› ä¸ºè¿™æ˜¯æœ€é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æƒ…å†µä¹‹ä¸€ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå¦‚ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œå¯èƒ½ä¸éœ€è¦æ›´æ¢æ•´å¼ é¡µè¡¨ï¼Œè€Œåªéœ€ä¿®æ”¹é¡µè¡¨é¡¹çš„æƒé™ä½æ¥å®ç°è®¿é—®æ§åˆ¶ã€‚è¿™æ ·å¯ä»¥å‡å°‘é¡µè¡¨æ›´æ¢çš„å¼€é”€ï¼Œæé«˜æ€§èƒ½ã€‚\né™„å½• ä¿®æ”¹useré¡¹ç›®ä¸­çš„makefileï¼Œåˆ é™¤ch4_\n","permalink":"https://lifeislife.cn/posts/ucore-%E5%AE%9E%E9%AA%8C%E7%AC%AC4%E7%AB%A0-%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/","summary":"\u003cblockquote\u003e\n\u003cp\u003eä¸ºä½•æŒ‡å®š TRAMPOLINE å’Œ TRAPFRAME åœ¨ va çš„æœ€é«˜ä½ï¼Ÿ\nTRAMPOLINE å’Œ TRAPFRAME è¢«å®šä¹‰åœ¨æœ€é«˜çš„è™šæ‹Ÿå†…å­˜åœ°å€ä¸Šï¼Œæ˜¯å› ä¸ºå®ƒä»¬åœ¨æ“ä½œç³»ç»Ÿçš„å†…å­˜å¸ƒå±€ä¸­èµ·ç€é‡è¦ä½œç”¨ã€‚\nTRAMPOLINE è¢«ç”¨ä½œä»ç”¨æˆ·æ¨¡å¼åˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼çš„è·³è½¬ç›®æ ‡ã€‚å½“å‘ç”Ÿå¼‚å¸¸æˆ–ä¸­æ–­æ—¶ï¼Œå¤„ç†å™¨å°†ä»ç”¨æˆ·æ¨¡å¼åˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼ï¼Œå¹¶å°†æ§åˆ¶æƒè½¬ç§»åˆ°å†…æ ¸ä¸­é¢„å®šä¹‰çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯é™·é˜±å¤„ç†ç¨‹åºã€‚TRAMPOLINE é¡µé¢è¢«æ˜ å°„åˆ°æœ€é«˜è™šæ‹Ÿåœ°å€ï¼Œä»¥ä¾¿å¤„ç†å™¨èƒ½å¤Ÿåœ¨è¿™ä¸ªè½¬æ¢è¿‡ç¨‹ä¸­æ–¹ä¾¿åœ°å¼•ç”¨å®ƒã€‚é€šè¿‡å°†å…¶æ”¾ç½®åœ¨æœ€é«˜åœ°å€ï¼Œç¡®ä¿äº†æ— è®ºç³»ç»Ÿçš„å…·ä½“å†…å­˜å¸ƒå±€å¦‚ä½•ï¼Œå®ƒå§‹ç»ˆæ˜¯å¯è®¿é—®çš„ã€‚\nå¦ä¸€æ–¹é¢ï¼ŒTRAPFRAME ç”¨äºåœ¨å‘ç”Ÿå¼‚å¸¸æˆ–ä¸­æ–­æ—¶å­˜å‚¨æœºå™¨çŠ¶æ€ã€‚å®ƒåŒ…å«å¯„å­˜å™¨ã€æ ‡å¿—å’Œå…¶ä»–æ“ä½œç³»ç»Ÿå¤„ç†å¼‚å¸¸æ‰€éœ€çš„ä¿¡æ¯ã€‚TRAPFRAME ä¹Ÿè¢«æ”¾ç½®åœ¨æœ€é«˜çš„è™šæ‹Ÿåœ°å€ä¸Šï¼Œä»¥ç¡®ä¿å®ƒæ˜“äºè®¿é—®ï¼Œå¹¶ä¸”é™·é˜±å¤„ç†ç¨‹åºå¯ä»¥é«˜æ•ˆåœ°è®¿é—®å®ƒã€‚\né€šè¿‡å°† TRAMPOLINE å’Œ TRAPFRAME å®šä¹‰åœ¨æœ€é«˜çš„è™šæ‹Ÿå†…å­˜åœ°å€ä¸Šï¼Œå†…æ ¸å¯ä»¥æ–¹ä¾¿è€Œå¯é åœ°å¤„ç†å¼‚å¸¸å’Œä¸­æ–­ï¼Œè€Œæ— éœ€å…³å¿ƒå®ƒä»¬åœ¨å†…å­˜ä¸­çš„ç‰¹å®šä½ç½®ã€‚\u003c/p\u003e","title":"uCore å®éªŒç¬¬ 4 ç«  - åœ°å€ç©ºé—´"},{"content":"// å¯åŠ¨æ—¶åˆå§‹åŒ–è¿›ç¨‹è¡¨ void proc_init(void) { struct proc *p; for (p = pool; p \u0026lt; \u0026amp;pool[NPROC]; p++) { p-\u0026gt;state = UNUSED; // p - pool æ˜¯ p æŒ‡å‘çš„ proc åœ¨ pool ä¸­çš„ä¸‹æ ‡ï¼Œå› æ­¤ p - pool å˜åŒ–æƒ…å†µæ˜¯ 0, 1, 2, ..., NPROC - 1 p-\u0026gt;kstack = (uint64)kstack[p - pool]; p-\u0026gt;ustack = (uint64)ustack[p - pool]; p-\u0026gt;trapframe = (struct trapframe *)trapframe[p - pool]; /* * LAB1: you may need to initialize your new fields of proc here */ } idle.kstack = (uint64)boot_stack_top; idle.pid = 0; current_proc = \u0026amp;idle; } p - pool è¡¨ç¤ºä»€ä¹ˆï¼Ÿ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º pool çš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«äº†å¤šä¸ªç±»å‹ä¸º struct proc çš„å…ƒç´ ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæŒ‡é’ˆ p æŒ‡å‘å…¶ä¸­çš„æŸä¸ªå…ƒç´ ã€‚ å½“ p æŒ‡å‘ pool æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œp - pool çš„ç»“æœå°†æ˜¯ 0ï¼Œå› ä¸ºæŒ‡é’ˆç›¸å¯¹äºæ•°ç»„é¦–åœ°å€çš„åç§»é‡ä¸º 0ã€‚ å½“ p æŒ‡å‘ pool æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ æ—¶ï¼Œp - pool çš„ç»“æœå°†æ˜¯ 1ï¼Œå› ä¸ºæŒ‡é’ˆç›¸å¯¹äºæ•°ç»„é¦–åœ°å€çš„åç§»é‡ä¸º 1ã€‚ ä»¥æ­¤ç±»æ¨ï¼Œå½“ p æŒ‡å‘ pool æ•°ç»„çš„ç¬¬ N ä¸ªå…ƒç´ æ—¶ï¼Œp - pool çš„ç»“æœå°†æ˜¯ N-1ï¼Œå› ä¸ºæŒ‡é’ˆç›¸å¯¹äºæ•°ç»„é¦–åœ°å€çš„åç§»é‡ä¸º N-1ã€‚ æ€»ç»“æ¥è¯´ï¼Œå¦‚æœ p æ˜¯æŒ‡å‘ pool æ•°ç»„ä¸­ç¬¬ N ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆ p - pool çš„ç»“æœå°†æ˜¯ N-1ã€‚\nåŸè°ƒåº¦å‡½æ•°æ¯æ¬¡éƒ½ä¼šä» pool æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹éå†ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ¯æ¬¡éƒ½æ˜¯ä»ç¬¬ä¸€ä¸ªè¿›ç¨‹å¼€å§‹è¿è¡Œï¼Œè€Œä¸æ˜¯ä»ä¸Šæ¬¡è¿è¡Œçš„è¿›ç¨‹å¼€å§‹è¿è¡Œã€‚éœ€è¦ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š\n// è°ƒåº¦ç¨‹åºæ°¸ä¸è¿”å›ã€‚å®ƒå¾ªç¯æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š // - é€‰æ‹©è¦è¿è¡Œçš„è¿›ç¨‹ã€‚ // - åˆ‡æ¢ä»¥å¯åŠ¨è¿è¡Œè¯¥è¿›ç¨‹ã€‚ // - æœ€ç»ˆï¼Œè¯¥è¿›ç¨‹é€šè¿‡åˆ‡æ¢å°†æ§åˆ¶æƒ // ä¼ é€’å›è°ƒåº¦ç¨‹åºã€‚ void scheduler(void) { struct proc *p; struct proc *last_checked_proc = pool; // åˆå§‹åŒ–æŒ‡é’ˆä¸º pool for (;;) { for (p = last_checked_proc; p \u0026lt; \u0026amp;pool[NPROC]; p++) { // å°† p åˆå§‹åŒ–ä¸º last_checked_proc if (p-\u0026gt;state == RUNNABLE) { /* * LAB1ï¼šä½ å¯èƒ½éœ€è¦åœ¨è¿™é‡Œåˆå§‹åŒ–è¿›ç¨‹çš„èµ·å§‹æ—¶é—´ */ p-\u0026gt;state = RUNNING; current_proc = p; swtch(\u0026amp;idle.context, \u0026amp;p-\u0026gt;context); } } last_checked_proc = pool + 1; // æ›´æ–° last_checked_proc çš„å€¼ä¸ºä¸‹ä¸€ä¸ªä½ç½® } } LAB1 --- os/loader.c | 5 +- os/proc.c | 15 +- os/proc.h | 23 +- os/syscall.c | 55 ++++- os/syscall_ids.h | 5 +- os/timer.h | 2 + 9 files changed, 374 insertions(+), 291 deletions(-) diff --git a/os/loader.c b/os/loader.c index b45e85d..b21b0a4 100644 --- a/os/loader.c +++ b/os/loader.c @@ -1,6 +1,7 @@ #include \u0026#34;loader.h\u0026#34; #include \u0026#34;defs.h\u0026#34; #include \u0026#34;trap.h\u0026#34; +#include \u0026lt;string.h\u0026gt; static uint64 app_num; static uint64 *app_info_ptr; @@ -49,8 +50,10 @@ int run_all_app() trapframe-\u0026gt;sp = (uint64)p-\u0026gt;ustack + USER_STACK_SIZE; p-\u0026gt;state = RUNNABLE; /* -\t* LAB1: you may need to initialize your new fields of proc here +\t* LAB1: åˆå§‹åŒ–ç³»ç»Ÿè°ƒç”¨æ•°ä»¥åŠè¿›ç¨‹å¼€å§‹æ—¶é—´ */ + memset(p-\u0026gt;syscall_times, 0, MAX_SYSCALL_NUM * sizeof(uint32)); + p-\u0026gt;start_time = 0; } return 0; } \\ No newline at end of file diff --git a/os/proc.c b/os/proc.c index fee3886..0c69ae5 100644 --- a/os/proc.c +++ b/os/proc.c @@ -2,6 +2,7 @@ #include \u0026#34;defs.h\u0026#34; #include \u0026#34;loader.h\u0026#34; #include \u0026#34;trap.h\u0026#34; +#include \u0026#34;timer.h\u0026#34; struct proc pool[NPROC]; char kstack[NPROC][PAGE_SIZE]; @@ -33,9 +34,8 @@ void proc_init(void) p-\u0026gt;kstack = (uint64)kstack[p - pool]; p-\u0026gt;ustack = (uint64)ustack[p - pool]; p-\u0026gt;trapframe = (struct trapframe *)trapframe[p - pool]; - /* -\t* LAB1: you may need to initialize your new fields of proc here -\t*/ + memset(p-\u0026gt;syscall_times, 0, MAX_SYSCALL_NUM * sizeof(uint32)); + p-\u0026gt;start_time = 0; } idle.kstack = (uint64)boot_stack_top; idle.pid = 0; @@ -47,6 +47,7 @@ int allocpid() static int PID = 1; return PID++; } + // åœ¨è¿›ç¨‹è¡¨ä¸­å¯»æ‰¾ä¸€ä¸ªæœªä½¿ç”¨çš„è¿›ç¨‹ã€‚ // å¦‚æœæ‰¾åˆ°ï¼Œåˆ™åˆå§‹åŒ–åœ¨å†…æ ¸ä¸­è¿è¡Œæ‰€éœ€çš„çŠ¶æ€ã€‚ // å¦‚æœæ²¡æœ‰ç©ºé—²çš„è¿›ç¨‹ï¼Œæˆ–è€…å†…å­˜åˆ†é…å¤±è´¥ï¼Œåˆ™è¿”å› 0ã€‚ @@ -80,14 +81,18 @@ void scheduler(void) { struct proc *p; struct proc *last_checked_proc = pool; // åˆå§‹åŒ–æŒ‡é’ˆä¸º pool - for (;;) { for (p = last_checked_proc; p \u0026lt; \u0026amp;pool[NPROC]; p++) { // å°† p åˆå§‹åŒ–ä¸º last_checked_proc if (p-\u0026gt;state == RUNNABLE) { /* - * LAB1ï¼šä½ å¯èƒ½éœ€è¦åœ¨è¿™é‡Œåˆå§‹åŒ–è¿›ç¨‹çš„èµ·å§‹æ—¶é—´ + * LAB1ï¼šåœ¨è¿™é‡Œåˆå§‹åŒ–è¿›ç¨‹çš„å¼€å§‹æ—¶é—´ */ + if (p-\u0026gt;start_time == 0) { + uint64 cycle = get_cycle(); + p-\u0026gt;start_time = + (cycle % CPU_FREQ) * MILLISECONDS_PER_SECOND / CPU_FREQ; + } p-\u0026gt;state = RUNNING; current_proc = p; swtch(\u0026amp;idle.context, \u0026amp;p-\u0026gt;context); diff --git a/os/proc.h b/os/proc.h index d208c5d..53576bf 100644 --- a/os/proc.h +++ b/os/proc.h @@ -3,7 +3,8 @@ #include \u0026#34;types.h\u0026#34; -#define NPROC (16) +#define NPROC (16) // æœ€å¤§è¿›ç¨‹æ•° +#define MAX_SYSCALL_NUM (500) // æœ€å¤§ç³»ç»Ÿè°ƒç”¨æ•° // Saved registers for kernel context switches. struct context { @@ -42,14 +43,28 @@ struct proc { uint64 kstack; // è¿›ç¨‹å†…æ ¸æ ˆè™šæ‹Ÿåœ°å€ (å†…æ ¸é¡µè¡¨) struct trapframe *trapframe; // è¿›ç¨‹ä¸­æ–­å¸§ struct context context; // ç”¨äºä¿å­˜è¿›ç¨‹å†…æ ¸æ€çš„å¯„å­˜å™¨ä¿¡æ¯ï¼Œè¿›ç¨‹åˆ‡æ¢æ—¶ä½¿ç”¨ - /* -\t* LAB1: you may need to add some new fields here + /* +\t* LAB1: æ·»åŠ ä¸€äº›æ–°çš„æˆå‘˜ç”¨äºæ–°çš„ sys_task_info ç³»ç»Ÿè°ƒç”¨ */ + uint32 syscall_times[MAX_SYSCALL_NUM]; // ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ç»Ÿè®¡ TODO: åç»­æ”¹ä¸ºæŒ‡é’ˆ + uint64 start_time; // è¿›ç¨‹å¼€å§‹è¿è¡Œæ—¶é—´ }; /* -* LAB1: you may need to define struct for TaskInfo here +* LAB1: å®šä¹‰ TaskInfo ç»“æ„ä½“ */ +typedef enum { + UnInit, + Ready, + Running, + Exited, +} TaskStatus; + +typedef struct { + TaskStatus status; + uint32 syscall_times[MAX_SYSCALL_NUM]; + int time; // è¿›ç¨‹è¿è¡Œæ—¶é—´ç»Ÿè®¡ +} TaskInfo; struct proc *curr_proc(); void exit(int); diff --git a/os/syscall.c b/os/syscall.c index 1cc5aeb..f54ed86 100644 --- a/os/syscall.c +++ b/os/syscall.c @@ -4,6 +4,7 @@ #include \u0026#34;syscall_ids.h\u0026#34; #include \u0026#34;timer.h\u0026#34; #include \u0026#34;trap.h\u0026#34; +#include \u0026#34;proc.h\u0026#34; uint64 sys_write(int fd, char *str, uint len) { @@ -31,14 +32,46 @@ uint64 sys_sched_yield() uint64 sys_gettimeofday(TimeVal *val, int _tz) { uint64 cycle = get_cycle(); - val-\u0026gt;sec = cycle / CPU_FREQ; - val-\u0026gt;usec = (cycle % CPU_FREQ) * MICROSECONDS_PER_SECOND / CPU_FREQ; + tracef(\u0026#34;sys_gettimeofday cycle = %d\u0026#34;, cycle); + val-\u0026gt;sec = cycle / CPU_FREQ; + val-\u0026gt;msec = (cycle % CPU_FREQ) * MILLISECONDS_PER_SECOND / CPU_FREQ; + val-\u0026gt;usec = (cycle % CPU_FREQ) * MICROSECONDS_PER_SECOND / CPU_FREQ; return 0; } -/* -* LAB1: you may need to define sys_task_info here -*/ +/** + * LAB1ï¼šæ­¤å¤„å®šä¹‰ sys_task_info å‡½æ•° + * æŸ¥è¯¢å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¿¡æ¯ï¼Œä»»åŠ¡ä¿¡æ¯åŒ…æ‹¬ä»»åŠ¡æ§åˆ¶å—ç›¸å…³ä¿¡æ¯ï¼ˆä»»åŠ¡çŠ¶æ€ï¼‰ã€ä»»åŠ¡ä½¿ç”¨çš„ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ã€ä»»åŠ¡æ€»è¿è¡Œæ—¶é•¿ã€‚ + */ +int sys_task_info(TaskInfo *ti) +{ + struct proc *proc = curr_proc(); + // TODO: proc æ£€æŸ¥ä¸ºç©º + for (int i = 0; i \u0026lt; MAX_SYSCALL_NUM; i++) { + ti-\u0026gt;syscall_times[i] = proc-\u0026gt;syscall_times[i]; + } + uint64 cycle = get_cycle(); + uint64 current_time = + (cycle % CPU_FREQ) * MILLISECONDS_PER_SECOND / CPU_FREQ; + infof(\u0026#34;sys_task_info current_time = %d\u0026#34;, current_time); + infof(\u0026#34;proc-\u0026gt;start_time = %d\u0026#34;, proc-\u0026gt;start_time); + infof(\u0026#34;ti-\u0026gt;time = %d\u0026#34;, current_time - proc-\u0026gt;start_time); + + if (proc-\u0026gt;state == RUNNING) { + ti-\u0026gt;status = Running; + } else if (proc-\u0026gt;state == RUNNABLE) { + ti-\u0026gt;status = Ready; + } else if (proc-\u0026gt;state == SLEEPING) { + ti-\u0026gt;status = Ready; + } else if (proc-\u0026gt;state == ZOMBIE) { + ti-\u0026gt;status = Exited; + } else if (proc-\u0026gt;state == UNUSED) { + ti-\u0026gt;status = UnInit; + } + + ti-\u0026gt;time = current_time - proc-\u0026gt;start_time; + return 0; +} extern char trap_page[]; @@ -51,8 +84,9 @@ void syscall() tracef(\u0026#34;syscall %d args = [%x, %x, %x, %x, %x, %x]\u0026#34;, id, args[0], args[1], args[2], args[3], args[4], args[5]); /* -\t* LAB1: you may need to update syscall counter for task info here +\t* LAB1: æ›´æ–°ç³»ç»Ÿè°ƒç”¨æ¬¡æ•° */ + curr_proc()-\u0026gt;syscall_times[id]++; switch (id) { case SYS_write: ret = sys_write(args[0], (char *)args[1], args[2]); @@ -67,8 +101,15 @@ void syscall() ret = sys_gettimeofday((TimeVal *)args[0], args[1]); break; /* -\t* LAB1: you may need to add SYS_taskinfo case here +\t* LAB1: åœ¨æ­¤å¤„æ·»åŠ  SYS_task_info çš„ç³»ç»Ÿè°ƒç”¨å¤„ç†æƒ…å†µ */ + case SYS_task_info: + ret = sys_task_info((TaskInfo *)args[0]); + break; + case SYS_getpid: + infof(\u0026#34;SYS_getpid %d\u0026#34;, SYS_getpid); + ret = curr_proc()-\u0026gt;pid; + break; default: ret = -1; errorf(\u0026#34;unknown syscall %d\u0026#34;, id); diff --git a/os/syscall_ids.h b/os/syscall_ids.h index 05a6cb9..3c1a5a9 100644 --- a/os/syscall_ids.h +++ b/os/syscall_ids.h @@ -277,9 +277,8 @@ #define SYS_io_pgetevents 292 #define SYS_rseq 293 #define SYS_kexec_file_load 294 -/* -* LAB1: you may need to define SYS_task_info here -*/ +// LAB1ï¼šæ·»åŠ  SYS_task_info çš„ç³»ç»Ÿè°ƒç”¨å· +#define SYS_task_info 410 #define SYS_pidfd_send_signal 424 #define SYS_io_uring_setup 425 #define SYS_io_uring_enter 426 diff --git a/os/timer.h b/os/timer.h index c6ebd14..63ab45c 100644 --- a/os/timer.h +++ b/os/timer.h @@ -6,6 +6,7 @@ #define TICKS_PER_SEC (100) // QEMU #define CPU_FREQ (12500000) +#define MILLISECONDS_PER_SECOND (1000) #define MICROSECONDS_PER_SECOND (1000000) uint64 get_cycle(); @@ -14,6 +15,7 @@ void set_next_timer(); typedef struct { uint64 sec; // è‡ª Unix çºªå…ƒèµ·çš„ç§’æ•° + uint64 msec; // æ¯«ç§’æ•° uint64 usec; // å¾®ç§’æ•° } TimeVal; -- 2.34.1 é—®ç­”ä½œä¸š é—®é¢˜ä¸€ æ­£ç¡®è¿›å…¥ U æ€åï¼Œç¨‹åºçš„ç‰¹å¾è¿˜åº”æœ‰ï¼šä½¿ç”¨ S æ€ç‰¹æƒæŒ‡ä»¤ï¼Œè®¿é—® S æ€å¯„å­˜å™¨åä¼šæŠ¥é”™ã€‚è¯·åŒå­¦ä»¬å¯ä»¥è‡ªè¡Œæµ‹è¯•è¿™äº›å†…å®¹ï¼ˆå‚è€ƒ å‰ä¸‰ä¸ªæµ‹ä¾‹ï¼Œæè¿°ç¨‹åºå‡ºé”™è¡Œä¸ºï¼ŒåŒæ—¶æ³¨æ„æ³¨æ˜ä½ ä½¿ç”¨çš„ sbi åŠå…¶ç‰ˆæœ¬ã€‚\næµ‹è¯•å‰ä¸‰ä¸ªæµ‹è¯•ç”¨ä¾‹æŒ‡çš„æ˜¯uCore-Tutorial-Code-2023S/user/src/ ç›®å½•ä¸‹çš„ä¸‰ä¸ªbadæµ‹è¯•ç”¨ä¾‹ï¼ŒæŸ¥çœ‹useré¡¹ç›®çš„ Makefile å¯ä»¥å‘ç°åœ¨ç¼–è¯‘æ—¶ä¿®æ”¹CHAPTERå‚æ•°å€¼ä¸º2_badå³å¯ç¼–è¯‘è¿è¡Œè¿™äº›æµ‹è¯•ç”¨ä¾‹ã€‚\n[rustsbi] RustSBI version 0.3.0-alpha.2, adapting to RISC-V SBI v1.0.0 .______ __ __ _______.___________. _______..______ __ | _ \\ | | | | / | | / || _ \\ | | | |_) | | | | | | (----`---| |----`| (----`| |_) || | | / | | | | \\ \\ | | \\ \\ | _ \u0026lt; | | | |\\ \\----.| `--\u0026#39; |.----) | | | .----) | | |_) || | | _| `._____| \\______/ |_______/ |__| |_______/ |______/ |__| [rustsbi] Implementation : RustSBI-QEMU Version 0.2.0-alpha.2 [rustsbi] Platform Name : riscv-virtio,qemu [rustsbi] Platform SMP : 1 [rustsbi] Platform Memory : 0x80000000..0x88000000 [rustsbi] Boot HART : 0 [rustsbi] Device Tree Region : 0x87000000..0x87000ef2 [rustsbi] Firmware Address : 0x80000000 [rustsbi] Supervisor Address : 0x80200000 [rustsbi] pmp01: 0x00000000..0x80000000 (-wr) [rustsbi] pmp02: 0x80000000..0x80200000 (---) [rustsbi] pmp03: 0x80200000..0x88000000 (xwr) [rustsbi] pmp04: 0x88000000..0x00000000 (-wr) [TRACE 0]load app 0 at 0x0000000080400000 [TRACE 0]load app 1 at 0x0000000080420000 [TRACE 0]load app 2 at 0x0000000080440000 [INFO 0]start scheduler! [ERROR 1]unknown trap: 0x0000000000000007, stval = 0x0000000000000000 [INFO 1]è¿›ç¨‹ 1 ä»¥ä»£ç  -1 é€€å‡º IllegalInstruction in application, core dumped. [INFO 2]è¿›ç¨‹ 2 ä»¥ä»£ç  -3 é€€å‡º IllegalInstruction in application, core dumped. [INFO 3]è¿›ç¨‹ 3 ä»¥ä»£ç  -3 é€€å‡º [PANIC 3] os/loader.c:15: all apps over ç¬¬ä¸€ä¸ªè¿›ç¨‹æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š\nint main() { int *p = (int *)0; *p = 0; return 0; } åœ¨æ‚¨æä¾›çš„ä»£ç ä¸­ï¼Œå°†ç©ºæŒ‡é’ˆåˆ†é…ç»™æŒ‡é’ˆå˜é‡*p åï¼Œè¯•å›¾å¯¹å…¶è¿›è¡Œè§£å¼•ç”¨å¹¶å°†å€¼ 0 èµ‹ç»™è¯¥æŒ‡é’ˆã€‚ç”±äºç”¨æˆ·æ¨¡å¼ä¸‹ç¦æ­¢ç›´æ¥è®¿é—®ç‰©ç†å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿä¼šæ£€æµ‹åˆ°è¿™ä¸ªéæ³•æ“ä½œå¹¶è§¦å‘å¼‚å¸¸ã€‚å› æ­¤ï¼Œè¯¥ç¨‹åº IllegalInstruction in application, core dumped.\nåœ¨ RISC-V æ¶æ„ä¸­ï¼ŒU æ¨¡å¼æ˜¯æœ€ä½çš„ç”¨æˆ·æ¨¡å¼ï¼Œç”¨æˆ·ç¨‹åºæ— æ³•ç›´æ¥è®¿é—®ç‰©ç†å†…å­˜æˆ–å…¶ä»–ç‰¹æƒçº§åˆ«èµ„æºã€‚è¿™ç§é™åˆ¶æ˜¯ä¸ºäº†ç¡®ä¿æ“ä½œç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚\nç¬¬äºŒä¸ªè¿›ç¨‹æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š\nint main() { asm volatile(\u0026#34;sret\u0026#34;); return 0; } è¯•å›¾ä½¿ç”¨æ±‡ç¼–è¯­è¨€æ‰§è¡Œ sret æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ç”¨äºä»ä¸­æ–­æˆ–å¼‚å¸¸å¤„ç†ç¨‹åºè¿”å›ã€‚ç”±äºç”¨æˆ·æ¨¡å¼ä¸‹ç¦æ­¢ç›´æ¥è®¿é—®ç‰¹æƒçº§åˆ«å¯„å­˜å™¨ï¼Œæ“ä½œç³»ç»Ÿä¼šæ£€æµ‹åˆ°è¿™ä¸ªéæ³•æ“ä½œå¹¶è§¦å‘å¼‚å¸¸ã€‚å› æ­¤ï¼Œè¯¥ç¨‹åº IllegalInstruction in application, core dumpedã€‚\nç¬¬ä¸‰ä¸ªè¿›ç¨‹æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š\nint main() { uint64 x; asm volatile(\u0026#34;csrr %0, sstatus\u0026#34; : \u0026#34;=r\u0026#34;(x)); return 0; } åŸå› åŒä¸Šï¼Œè¯•å›¾ä½¿ç”¨æ±‡ç¼–è¯­è¨€æ‰§è¡Œ csrr æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ç”¨äºä»ç‰¹æƒçº§åˆ«å¯„å­˜å™¨ä¸­è¯»å–å€¼ã€‚ç”±äºç”¨æˆ·æ¨¡å¼ä¸‹ç¦æ­¢ç›´æ¥è®¿é—®ç‰¹æƒçº§åˆ«å¯„å­˜å™¨ï¼Œæ“ä½œç³»ç»Ÿä¼šæ£€æµ‹åˆ°è¿™ä¸ªéæ³•æ“ä½œå¹¶è§¦å‘å¼‚å¸¸ã€‚å› æ­¤ï¼Œè¯¥ç¨‹åº IllegalInstruction in application, core dumpedã€‚\nåœ¨æ“ä½œç³»ç»Ÿä»£ç ä¸­ï¼Œè§¦å‘å¼‚å¸¸åä¼šè¿›å…¥void usertrap() å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šæ ¹æ® scause å¯„å­˜å™¨çš„å€¼åˆ¤æ–­å¼‚å¸¸ç±»å‹ï¼Œç”¨ä¾‹ä¸­çš„ç»“æœè¿›å…¥äº†case IllegalInstructionï¼Œå…¶ä¸­ IllegalInstruction = 2ã€‚æˆ‘ä»¬æŸ¥é˜…æ‰‹å†Œ riscv-privileged.pdf ï¼Œå¯ä»¥æŸ¥åˆ° IllegalInstruction çš„å€¼ä¸º 2ï¼Œä¸é¢„æœŸç›¸ç¬¦ã€‚\né—®é¢˜äºŒ è¯·ç»“åˆç”¨ä¾‹ç†è§£ trampoline.S ä¸­ä¸¤ä¸ªå‡½æ•° userret å’Œ uservec çš„ä½œç”¨ï¼Œå¹¶å›ç­”å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\nL79: åˆšè¿›å…¥ userret æ—¶ï¼Œa0ã€a1 åˆ†åˆ«ä»£è¡¨äº†ä»€ä¹ˆå€¼ã€‚ åœ¨è¿›å…¥userretå‡½æ•°æ—¶ï¼Œa0å’Œa1åˆ†åˆ«ä»£è¡¨ä»¥ä¸‹å€¼ï¼š\na0: TRAPFRAME çš„åœ°å€ï¼ŒæŒ‡å‘å½“å‰è¿›ç¨‹çš„é™·é˜±å¸§ï¼ˆtrapframeï¼‰ç»“æ„ä½“ã€‚ a1: ç”¨æˆ·é¡µè¡¨çš„åœ°å€ï¼Œå³è¿›ç¨‹çš„é¡µè¡¨ï¼ˆpagetableï¼‰ã€‚è¿™ä¸ªåœ°å€ä¼šè¢«å†™å…¥åˆ°satpå¯„å­˜å™¨ä¸­ï¼Œç”¨äºåˆ‡æ¢åˆ°ç”¨æˆ·æ¨¡å¼çš„é¡µè¡¨ã€‚ L87-L88: sfence æŒ‡ä»¤æœ‰ä½•ä½œç”¨ï¼Ÿä¸ºä»€ä¹ˆè¦æ‰§è¡Œè¯¥æŒ‡ä»¤ï¼Œå½“å‰ç« èŠ‚ä¸­ï¼Œåˆ æ‰è¯¥æŒ‡ä»¤ä¼šå¯¼è‡´é”™è¯¯å—ï¼Ÿ csrw satp, a1 sfence.vma zero, zero sfenceæŒ‡ä»¤ï¼ˆStore Fenceï¼‰çš„ä½œç”¨æ˜¯ç¡®ä¿ä¹‹å‰çš„å­˜å‚¨æ“ä½œå®Œæˆï¼Œå¹¶ä¸”å¯¹å…¶ä»–å¤„ç†å™¨ä¸Šçš„æ ¸å¿ƒå¯è§ã€‚\næ‰§è¡ŒsfenceæŒ‡ä»¤çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ä¿è¯å†…å­˜è®¿é—®çš„é¡ºåºæ€§å’Œä¸€è‡´æ€§ã€‚åœ¨å¤šæ ¸å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œä¸åŒçš„æ ¸å¿ƒå¯èƒ½ä¼šæœ‰è‡ªå·±çš„ç¼“å­˜ï¼Œå½“ä¸€ä¸ªæ ¸å¿ƒä¿®æ”¹äº†å…±äº«å†…å­˜ä¸­çš„æ•°æ®æ—¶ï¼Œä¸ºäº†ä¿è¯å…¶ä»–æ ¸å¿ƒèƒ½å¤Ÿçœ‹åˆ°è¿™ä¸ªä¿®æ”¹ï¼Œéœ€è¦ä½¿ç”¨sfenceæŒ‡ä»¤æ¥åˆ·æ–°ç¼“å­˜å¹¶å°†ä¿®æ”¹å†™å›å…±äº«å†…å­˜ã€‚\nåœ¨ä»£ç ä¸­ï¼ŒsfenceæŒ‡ä»¤è¢«ç”¨äºç¡®ä¿å¯¹ç”¨æˆ·é¡µè¡¨çš„ä¿®æ”¹å¯¹å…¶ä»–å¤„ç†å™¨ä¸Šçš„æ ¸å¿ƒå¯è§ã€‚å› ä¸ºç›®å‰æˆ‘åªä½¿ç”¨äº†å•æ ¸å¤„ç†å™¨ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°å¤šæ ¸å¤„ç†å™¨çš„æƒ…å†µï¼Œå› æ­¤sfenceæŒ‡ä»¤çš„ä½œç”¨æ˜¯ç¡®ä¿å¯¹ç”¨æˆ·é¡µè¡¨çš„ä¿®æ”¹å¯¹å½“å‰æ ¸å¿ƒå¯è§ã€‚\nå› æ­¤ï¼Œå½“å‰ç« èŠ‚ä¸­ï¼Œåˆ æ‰è¯¥æŒ‡ä»¤ä¸ä¼šå¯¼è‡´é”™è¯¯ã€‚\nL96-L125: ä¸ºä½•æ³¨é‡Šä¸­è¯´è¦é™¤å» a0ï¼Ÿå“ªä¸€ä¸ªåœ°å€ä»£è¡¨ a0ï¼Ÿç°åœ¨ a0 çš„å€¼å­˜åœ¨ä½•å¤„ï¼Ÿ # restore all but a0 from TRAPFRAME ld ra, 40(a0) ld sp, 48(a0) ld t5, 272(a0) ld t6, 280(a0) a0 æ˜¯ä¿å­˜åœ¨ sscratch å¯„å­˜å™¨ä¸­çš„ï¼Œé¦–å…ˆï¼Œè¯¥ä»£ç é€šè¿‡ ld æŒ‡ä»¤ä» TRAPFRAME ä¸­åŠ è½½å„ä¸ªå¯„å­˜å™¨çš„å€¼ã€‚ç„¶åï¼Œè¿™äº›å€¼è¢«å­˜å‚¨åœ¨ç›¸åº”çš„å¯„å­˜å™¨ä¸­ï¼Œä»¥ä¾¿åœ¨æ¢å¤ç”¨æˆ·ä¸Šä¸‹æ–‡æ—¶ä½¿ç”¨ã€‚\næ¥ä¸‹æ¥ï¼Œä»£ç ä½¿ç”¨ csrrw æŒ‡ä»¤å°† sscratch å¯„å­˜å™¨çš„å€¼ä¸ a0ï¼ˆå³ TRAPFRAMEï¼‰è¿›è¡Œäº¤æ¢ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†å°†ç”¨æˆ·çš„ a0ï¼ˆTRAPFRAMEï¼‰ä¿å­˜åœ¨ sscratch å¯„å­˜å™¨ä¸­ï¼Œä»¥ä¾¿åç»­æ­¥éª¤å¯ä»¥æ­£ç¡®åœ°æ¢å¤ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚\næœ€åï¼Œé€šè¿‡ sret æŒ‡ä»¤è¿”å›åˆ°ç”¨æˆ·æ¨¡å¼ï¼Œå¹¶å°†æ§åˆ¶æƒäº¤ç»™ç”¨æˆ·ä»£ç ã€‚åœ¨æ‰§è¡Œ sret æŒ‡ä»¤åï¼Œå¤„ç†å™¨å°†æ ¹æ®ç”¨æˆ·ä¸Šä¸‹æ–‡ä¸­çš„ sepc å¯„å­˜å™¨çš„å€¼è·³è½¬åˆ°ç”¨æˆ·ä»£ç çš„æŒ‡ä»¤åœ°å€ã€‚è¿”å›çš„åŒæ—¶ï¼Œå¤„ç†å™¨è¿˜ä¼šè‡ªåŠ¨æ¢å¤ sstatus å¯„å­˜å™¨çš„å€¼ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„ç‰¹æƒçº§åˆ«å’Œä¸­æ–­çŠ¶æ€ã€‚\nuserretï¼šä¸­å‘ç”ŸçŠ¶æ€åˆ‡æ¢åœ¨å“ªä¸€æ¡æŒ‡ä»¤ï¼Ÿä¸ºä½•æ‰§è¡Œä¹‹åä¼šè¿›å…¥ç”¨æˆ·æ€ï¼Ÿ åœ¨userretå‡½æ•°ä¸­ï¼Œå‘ç”ŸçŠ¶æ€åˆ‡æ¢çš„æŒ‡ä»¤æ˜¯sretæŒ‡ä»¤ã€‚\nsretæŒ‡ä»¤ç”¨äºä»å†…æ ¸æ¨¡å¼åˆ‡æ¢åˆ°ç”¨æˆ·æ¨¡å¼ï¼Œå¹¶å°†æ§åˆ¶æƒäº¤ç»™ç”¨æˆ·ä»£ç ã€‚æ‰§è¡ŒsretæŒ‡ä»¤åï¼Œå¤„ç†å™¨ä¼šæ ¹æ®ç”¨æˆ·ä¸Šä¸‹æ–‡ä¸­çš„sepcå¯„å­˜å™¨çš„å€¼è·³è½¬åˆ°ç”¨æˆ·ä»£ç çš„æŒ‡ä»¤åœ°å€ã€‚\næ‰§è¡ŒsretæŒ‡ä»¤ä¹‹åè¿›å…¥ç”¨æˆ·æ€çš„åŸå› æ˜¯ï¼Œè¯¥æŒ‡ä»¤ä¼šè‡ªåŠ¨æ¢å¤sstatuså¯„å­˜å™¨çš„å€¼ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„ç‰¹æƒçº§åˆ«å’Œä¸­æ–­çŠ¶æ€ã€‚å½“sretæŒ‡ä»¤æ‰§è¡Œåï¼Œå¤„ç†å™¨å°†ä»å†…æ ¸æ€åˆ‡æ¢å›ç”¨æˆ·æ€ï¼Œç¨‹åºå°†ç»§ç»­æ‰§è¡Œç”¨æˆ·ä»£ç ã€‚è¿™æ„å‘³ç€userretå‡½æ•°æˆåŠŸå®Œæˆäº†ä»å†…æ ¸åˆ‡æ¢åˆ°ç”¨æˆ·æ¨¡å¼çš„è¿‡ç¨‹ã€‚\nL29ï¼šæ‰§è¡Œä¹‹åï¼Œa0 å’Œ sscratch ä¸­å„æ˜¯ä»€ä¹ˆå€¼ï¼Œä¸ºä»€ä¹ˆï¼Ÿ csrrw a0, sscratch, a0 åœ¨æ‰§è¡ŒæŒ‡ä»¤åï¼Œa0å’Œsscratchä¸­çš„å€¼å‘ç”Ÿäº†äº’æ¢ã€‚\nå‡è®¾åŸå§‹a0å¯„å­˜å™¨ä¸­çš„å€¼ä¸º Xï¼Œè€Œsscratchå¯„å­˜å™¨ä¸­çš„å€¼ä¸º Yã€‚æ‰§è¡Œcsrrw a0, sscratch, a0æŒ‡ä»¤åï¼Œa0å¯„å­˜å™¨ä¸­çš„å€¼å˜ä¸º Yï¼Œè€Œsscratchå¯„å­˜å™¨ä¸­çš„å€¼å˜ä¸º Xã€‚\nè¿™æ˜¯å› ä¸ºcsrrwæŒ‡ä»¤æ˜¯ä¸€ä¸ªç‰¹æƒæŒ‡ä»¤ï¼Œç”¨äºå°†æŸä¸ª CSRï¼ˆControl and Status Registerï¼‰çš„å€¼è¯»å–åˆ°ç›®æ ‡å¯„å­˜å™¨ï¼Œç„¶åå°†ç›®æ ‡å¯„å­˜å™¨çš„å€¼å†™å›åˆ°è¯¥ CSR ä¸­ã€‚åœ¨è¿™é‡Œï¼Œcsrrw a0, sscratch, a0æŒ‡ä»¤å°†sscratchå¯„å­˜å™¨çš„å€¼è¯»å–åˆ°a0å¯„å­˜å™¨ä¸­ï¼ŒåŒæ—¶å°†a0å¯„å­˜å™¨ä¸­çš„å€¼å†™å›åˆ°sscratchå¯„å­˜å™¨ä¸­ï¼Œä»è€Œå®ç°äº†ä¸¤è€…ä¹‹é—´çš„æ•°æ®äº¤æ¢ã€‚\nL32-L61: ä» trapframe ç¬¬å‡ é¡¹å¼€å§‹ä¿å­˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿæ˜¯å¦ä»è¯¥é¡¹å¼€å§‹ä¿å­˜äº†æ‰€æœ‰çš„å€¼ï¼Œå¦‚æœä¸æ˜¯ï¼Œä¸ºä»€ä¹ˆï¼Ÿ sd ra, 40(a0) sd sp, 48(a0) ... sd t5, 272(a0) sd t6, 280(a0) è¿›å…¥ S æ€æ˜¯å“ªä¸€æ¡æŒ‡ä»¤å‘ç”Ÿçš„ï¼Ÿ L75-L76: ld t0, 16(a0) æ‰§è¡Œä¹‹åï¼Œt0ä¸­çš„å€¼æ˜¯ä»€ä¹ˆï¼Œè§£é‡Šè¯¥å€¼çš„ç”±æ¥ï¼Ÿ ld t0, 16(a0) jr t0 ld t0, 16(a0)å°±æ˜¯ä» trapframe ä¸­æ¢å¤ t0å¯„å­˜å™¨å€¼ï¼Œt0ä¿å­˜äº†kernel_trapçš„å…¥å£åœ°å€ã€‚ä½¿ç”¨ jr t0ï¼Œå°±è·³è½¬åˆ°äº†æˆ‘ä»¬æ—©å…ˆè®¾å®šåœ¨ trapframe-\u0026gt;kernel_trap ä¸­çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯ trap.c ä¹‹ä¸­çš„ usertrap å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åœ¨ main çš„åˆå§‹åŒ–ä¹‹ä¸­å·²ç»è°ƒç”¨äº†ã€‚\n","permalink":"https://lifeislife.cn/posts/ucore-%E5%AE%9E%E9%AA%8C%E7%AC%AC3%E7%AB%A0-%E5%A4%9A%E9%81%93%E7%A8%8B%E5%BA%8F%E4%B8%8E%E5%88%86%E6%97%B6%E5%A4%9A%E4%BB%BB%E5%8A%A1/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å¯åŠ¨æ—¶åˆå§‹åŒ–è¿›ç¨‹è¡¨\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eproc_init\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eproc\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epool\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003epool\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eNPROC\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003estate\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUNUSED\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"c1\"\u003e// p - pool æ˜¯ p æŒ‡å‘çš„ proc åœ¨ pool ä¸­çš„ä¸‹æ ‡ï¼Œå› æ­¤ p - pool å˜åŒ–æƒ…å†µæ˜¯ 0, 1, 2, ..., NPROC - 1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003ekstack\u003c/span\u003e    \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euint64\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003ekstack\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epool\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eustack\u003c/span\u003e    \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euint64\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eustack\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epool\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003etrapframe\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003etrapframe\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003etrapframe\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epool\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"cm\"\u003e/*\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e\t\t* LAB1: you may need to initialize your new fields of proc here\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e\t\t*/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eidle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ekstack\u003c/span\u003e  \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euint64\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eboot_stack_top\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eidle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epid\u003c/span\u003e     \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003ecurrent_proc\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eidle\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003ep - pool è¡¨ç¤ºä»€ä¹ˆï¼Ÿ\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º pool çš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«äº†å¤šä¸ªç±»å‹ä¸º struct proc çš„å…ƒç´ ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæŒ‡é’ˆ p æŒ‡å‘å…¶ä¸­çš„æŸä¸ªå…ƒç´ ã€‚\nå½“ p æŒ‡å‘ pool æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œp - pool çš„ç»“æœå°†æ˜¯ 0ï¼Œå› ä¸ºæŒ‡é’ˆç›¸å¯¹äºæ•°ç»„é¦–åœ°å€çš„åç§»é‡ä¸º 0ã€‚\nå½“ p æŒ‡å‘ pool æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ æ—¶ï¼Œp - pool çš„ç»“æœå°†æ˜¯ 1ï¼Œå› ä¸ºæŒ‡é’ˆç›¸å¯¹äºæ•°ç»„é¦–åœ°å€çš„åç§»é‡ä¸º 1ã€‚\nä»¥æ­¤ç±»æ¨ï¼Œå½“ p æŒ‡å‘ pool æ•°ç»„çš„ç¬¬ N ä¸ªå…ƒç´ æ—¶ï¼Œp - pool çš„ç»“æœå°†æ˜¯ N-1ï¼Œå› ä¸ºæŒ‡é’ˆç›¸å¯¹äºæ•°ç»„é¦–åœ°å€çš„åç§»é‡ä¸º N-1ã€‚\næ€»ç»“æ¥è¯´ï¼Œå¦‚æœ p æ˜¯æŒ‡å‘ pool æ•°ç»„ä¸­ç¬¬ N ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆ p - pool çš„ç»“æœå°†æ˜¯ N-1ã€‚\u003c/p\u003e","title":"uCore å®éªŒç¬¬ 3 ç«  - å¤šé“ç¨‹åºä¸åˆ†æ—¶å¤šä»»åŠ¡"},{"content":"èƒŒæ™¯ é…ç½® yaml æ–‡ä»¶æ—¶ä¼šé‡åˆ°éœ€è¦å°†é…ç½®çš„å†…å®¹æŒ‰ç…§é”®å€¼æ’åºçš„æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·riscv_fork_list.yamlï¼š\npackages: - name: accumulo - name: abseil-cpp - name: acpica-tools - name: acpid - name: activemq - name: afflib - name: adcli - name: adwaita-icon-theme - name: aide - name: alsa-lib - name: amtk - name: anaconda - name: apache-sshd - name: annobin - name: antlr3 - name: apache-commons-csv - name: aom - name: apache-commons-beanutils - name: apache-commons-daemon - name: apache-commons-el - name: apache-commons-exec - name: apache-commons-jexl - name: apache-poi - name: apache-rat æˆ‘æƒ³æŒ‰ç…§ name çš„å­—æ¯é¡ºåºæ’åºï¼Œå¯ä»¥ä½¿ç”¨ yq å·¥å…·æ¥å®ç°ã€‚\nå®‰è£… yq wget https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 -O /usr/bin/yq \u0026amp;\u0026amp;\\ chmod +x /usr/bin/yq ä½¿ç”¨ yq yq -i \u0026#39;.packages |= sort_by(.name)\u0026#39; riscv_fork_list.yaml packages: - name: abseil-cpp - name: accumulo - name: acpica-tools - name: acpid - name: activemq - name: adcli - name: adwaita-icon-theme - name: afflib - name: aide - name: alsa-lib - name: amtk - name: anaconda - name: annobin - name: antlr3 - name: aom - name: apache-commons-beanutils - name: apache-commons-csv - name: apache-commons-daemon - name: apache-commons-el - name: apache-commons-exec - name: apache-commons-jexl - name: apache-poi - name: apache-rat - name: apache-sshd ","permalink":"https://lifeislife.cn/posts/yq%E4%B8%BAyaml%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%8E%92%E5%BA%8F/","summary":"\u003ch1 id=\"èƒŒæ™¯\"\u003eèƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eé…ç½® \u003ccode\u003eyaml\u003c/code\u003e æ–‡ä»¶æ—¶ä¼šé‡åˆ°éœ€è¦å°†é…ç½®çš„å†…å®¹æŒ‰ç…§é”®å€¼æ’åºçš„æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·\u003ccode\u003eriscv_fork_list.yaml\u003c/code\u003eï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003epackages\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eaccumulo\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eabseil-cpp\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eacpica-tools\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eacpid\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eactivemq\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eafflib\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eadcli\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eadwaita-icon-theme\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eaide\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003ealsa-lib\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eamtk\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eanaconda\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-sshd\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eannobin\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eantlr3\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-commons-csv\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eaom\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-commons-beanutils\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-commons-daemon\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-commons-el\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-commons-exec\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-commons-jexl\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-poi\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e- \u003cspan class=\"nt\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eapache-rat\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæˆ‘æƒ³æŒ‰ç…§ \u003ccode\u003ename\u003c/code\u003e çš„å­—æ¯é¡ºåºæ’åºï¼Œå¯ä»¥ä½¿ç”¨ \u003ccode\u003eyq\u003c/code\u003e å·¥å…·æ¥å®ç°ã€‚\u003c/p\u003e","title":"yq ä¸º yaml æ–‡ä»¶å†…å®¹æ’åº"},{"content":"é—®é¢˜æè¿° åœ¨ VSCode ä¸­ç¼–è¾‘ Markdown æ–‡æœ¬ï¼Œå¤åˆ¶åˆ°æ€æºç¬”è®°åï¼Œæ€æºç¬”è®°æ— æ³•è½¬ä¹‰ä¸º Markdown æ ¼å¼ã€‚ä¼šå˜æˆä¸€ä¸ªä»£ç å—ï¼Œä½†æ˜¯ä»£ç å—å†…çš„å†…å®¹å¹¶ä¸æ˜¯å¤åˆ¶çš„å†…å®¹ã€‚\næ¯”å¦‚ä¸Šé¢è¿™æ®µè¯å¤åˆ¶åˆ°æ€æºç¬”è®°æˆäº†ä¸‹å›¾è¿™æ ·ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä½†æ˜¯æˆ‘éœ€è¦çš„æ˜¯èƒ½å¤Ÿè½¬ä¹‰ä¸º Markdown çš„é˜…è¯»æ¨¡å¼ã€‚\nè§£å†³æ–¹æ³• é—®é¢˜çš„åŸå› åœ¨äº VSCode å¤åˆ¶çš„æ–‡æœ¬æ˜¯å¸¦æ ¼å¼çš„ï¼Œè€Œæ€æºç¬”è®°é»˜è®¤çš„ç²˜è´´æ¨¡å¼æ˜¯çº¯æ–‡æœ¬æ¨¡å¼ï¼Œæ‰€ä»¥ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜ã€‚\nè§£å†³æ–¹æ³•å°±æ˜¯ä» VSCode å¤åˆ¶çš„å†…å®¹ä¸ºçº¯æ–‡æœ¬ï¼Œä¸€ç§å¯ä»¥æŠŠæ–‡æœ¬å¤åˆ¶åˆ° txt æ–‡ä»¶ä¸­ï¼Œå†å¤åˆ¶ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚\nç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨ VSCode çš„æ’ä»¶ Copy Plain Textï¼Œæœç´¢ä¸‹è½½åï¼Œé»˜è®¤å¿«æ·é”®ä¸º Ctrl+Alt+Cï¼Œå¯ä»¥å¤åˆ¶ä¸ºçº¯æ–‡æœ¬ã€‚\nå†æ¬¡ç²˜è´´åˆ°æ€æºç¬”è®°ä¸­ï¼Œå°±å¯ä»¥è½¬ä¹‰ä¸º Markdown æ ¼å¼äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3%E5%A4%8D%E5%88%B6markdown%E6%96%87%E6%9C%AC%E5%88%B0%E6%80%9D%E6%BA%90%E7%AC%94%E8%AE%B0%E6%97%A0%E6%B3%95%E8%BD%AC%E4%B9%89%E4%B8%BAmarkdown%E6%A0%BC%E5%BC%8F/","summary":"\u003ch2 id=\"é—®é¢˜æè¿°\"\u003eé—®é¢˜æè¿°\u003c/h2\u003e\n\u003cp\u003eåœ¨ VSCode ä¸­ç¼–è¾‘ Markdown æ–‡æœ¬ï¼Œå¤åˆ¶åˆ°æ€æºç¬”è®°åï¼Œæ€æºç¬”è®°æ— æ³•è½¬ä¹‰ä¸º Markdown æ ¼å¼ã€‚ä¼šå˜æˆä¸€ä¸ªä»£ç å—ï¼Œä½†æ˜¯ä»£ç å—å†…çš„å†…å®¹å¹¶ä¸æ˜¯å¤åˆ¶çš„å†…å®¹ã€‚\u003c/p\u003e\n\u003cp\u003eæ¯”å¦‚ä¸Šé¢è¿™æ®µè¯å¤åˆ¶åˆ°æ€æºç¬”è®°æˆäº†ä¸‹å›¾è¿™æ ·ï¼š\u003c/p\u003e","title":"è§£å†³å¤åˆ¶ Markdown æ–‡æœ¬åˆ°æ€æºç¬”è®°æ— æ³•è½¬ä¹‰ä¸º Markdown æ ¼å¼"},{"content":"flowchart TB subgraph entry.S _entry[_entry] end subgraph link_app.S _app_num[_app_num] end subgraph main.c main[main] end subgraph loader.c loader_init[loader_init] run_next_app[run_next_app] load_app[load_app] end _entry --\u0026gt; main main --\u0026gt; loader_init main --\u0026gt; run_next_app run_next_app --\u0026gt; load_app loader_init --\u0026gt; _app_num ","permalink":"https://lifeislife.cn/posts/ucore-%E5%AE%9E%E9%AA%8C%E7%AC%AC2%E7%AB%A0-%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-gdscript3\" data-lang=\"gdscript3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eflowchart\u003c/span\u003e \u003cspan class=\"n\"\u003eTB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003esubgraph\u003c/span\u003e \u003cspan class=\"n\"\u003eentry\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003e_entry\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003e_entry\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003esubgraph\u003c/span\u003e \u003cspan class=\"n\"\u003elink_app\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003e_app_num\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003e_app_num\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003esubgraph\u003c/span\u003e \u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ec\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003esubgraph\u003c/span\u003e \u003cspan class=\"n\"\u003eloader\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ec\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003eloader_init\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eloader_init\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003erun_next_app\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003erun_next_app\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003eload_app\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eload_app\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003e_entry\u003c/span\u003e \u003cspan class=\"o\"\u003e--\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003emain\u003c/span\u003e \u003cspan class=\"o\"\u003e--\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eloader_init\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003emain\u003c/span\u003e \u003cspan class=\"o\"\u003e--\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003erun_next_app\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003erun_next_app\u003c/span\u003e \u003cspan class=\"o\"\u003e--\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eload_app\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eloader_init\u003c/span\u003e \u003cspan class=\"o\"\u003e--\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_app_num\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"uCore å®éªŒç¬¬ 2 ç«  - æ‰¹å¤„ç†ç³»ç»Ÿ"},{"content":"èƒŒæ™¯ç®€ä»‹ åœ¨ä½¿ç”¨ VSCode çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå®‰è£…ä¸€äº›æ’ä»¶æ¥æé«˜å¼€å‘æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œç”±äºæŸäº›åŸå› ï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•ç›´æ¥è®¿é—® VSCode çš„æ’ä»¶å¸‚åœºï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç¦»çº¿å®‰è£…æ’ä»¶äº†ã€‚\nè¿™é‡Œå­˜åœ¨ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ä¸ºæœ¬åœ°çš„ VSCode å®‰è£…æ’ä»¶ï¼Œå¦ä¸€ç§æ˜¯ä¸ºè¿œç¨‹çš„ VSCode å®‰è£…æ’ä»¶ã€‚æœ¬æ–‡å°†åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æƒ…å†µä¸‹çš„ç¦»çº¿å®‰è£…æ–¹æ³•ã€‚\nè¿œç¨‹ VSCode ä¹Ÿå°±æ˜¯ VSCode çš„Remote DevelopmentåŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ SSHã€Dockerã€WSL ç­‰æ–¹å¼è¿œç¨‹è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„ VSCodeã€‚\næ–¹æ³•ä¸€ï¼šä½¿ç”¨å·²å®‰è£…çš„æ’ä»¶ç›®å½• ä»å·²ç»å®‰è£…æ’ä»¶çš„ç”µè„‘ä¸Šæ‹·è´æ‰€æœ‰æ’ä»¶ï¼Œè·¯å¾„ä¸€èˆ¬ä¸º C:\\ç”¨æˆ·\\ç”¨æˆ·å\\.vscode\\extensions æ‹·è´åˆ°ç¦»çº¿å®‰è£…çš„ç”µè„‘ä¸Šçš„ .vscode/extensions æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼Œé‡å¯ VScode å³å¯å®‰è£…æˆåŠŸã€‚ å¯¹äºè¿œç¨‹ VSCode æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œæ’ä»¶ä¸åŒºåˆ†æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°çš„ Windows ä¸Šçš„ VSCode ä¸Šå®‰è£…æ’ä»¶ï¼Œç„¶åå°†æ’ä»¶ç›®å½•å‹ç¼©åæ•´ä¸ªæ‹·è´åˆ°è¿œç¨‹ä¸»æœºä¸Šå³å¯ã€‚\nè¿œç¨‹ä¸»æœºä¸Šçš„æ’ä»¶ç›®å½•ä¸€èˆ¬åœ¨ ~/.vscode-server/extensions ä¸‹ã€‚å°†å‹ç¼©çš„æ–‡ä»¶è§£è¯åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œé‡å¯ VSCode å³å¯ã€‚\næ–¹æ³•äºŒï¼šä¸‹è½½ç¦»çº¿å®‰è£…åŒ… vslx å®‰è£… åˆ° VScode æ’ä»¶ä¸­å¿ƒ æœç´¢éœ€è¦ä½¿ç”¨çš„æ’ä»¶åç§°\nä¸‹è½½å¯¹åº”çš„æ‹“å±•ç¨‹åºæ–‡ä»¶ï¼Œä¸‹è½½çš„æ–‡ä»¶çš„åç¼€æ˜¯.vslx \u003c!DOCTYPE html\u003e Responsive Image VSCode ä¸­å®‰è£… \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E5%A6%82%E4%BD%95%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85vscode%E6%8F%92%E4%BB%B6/","summary":"\u003ch1 id=\"èƒŒæ™¯ç®€ä»‹\"\u003eèƒŒæ™¯ç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eåœ¨ä½¿ç”¨ VSCode çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå®‰è£…ä¸€äº›æ’ä»¶æ¥æé«˜å¼€å‘æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œç”±äºæŸäº›åŸå› ï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•ç›´æ¥è®¿é—® VSCode çš„æ’ä»¶å¸‚åœºï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç¦»çº¿å®‰è£…æ’ä»¶äº†ã€‚\u003c/p\u003e","title":"å¦‚ä½•ç¦»çº¿å®‰è£… VSCode æ’ä»¶"},{"content":"å‘½ä»¤è¡Œ åœ¨ Windows ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ netsh å‘½ä»¤æ¥æ·»åŠ ã€æŸ¥çœ‹å’Œåˆ é™¤ç«¯å£è½¬å‘è§„åˆ™ã€‚\nè¦æ·»åŠ ä¸€ä¸ªç«¯å£è½¬å‘è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nnetsh interface portproxy add v4tov4 listenaddress=\u0026lt;local_address\u0026gt; listenport=\u0026lt;local_port\u0026gt; connectaddress=\u0026lt;remote_address\u0026gt; connectport=\u0026lt;remote_port\u0026gt; å…¶ä¸­ï¼š\n\u0026lt;local_address\u0026gt;æ˜¯æœ¬åœ°ç›‘å¬çš„åœ°å€ï¼ˆå¯ä»¥æ˜¯ IP åœ°å€æˆ– 0.0.0.0 è¡¨ç¤ºæ‰€æœ‰åœ°å€ï¼‰ã€‚ \u0026lt;local_port\u0026gt;æ˜¯æœ¬åœ°ç›‘å¬çš„ç«¯å£ã€‚ \u0026lt;remote_address\u0026gt;æ˜¯è½¬å‘è¿æ¥åˆ°çš„è¿œç¨‹åœ°å€ã€‚ \u0026lt;remote_port\u0026gt;æ˜¯è½¬å‘è¿æ¥åˆ°çš„è¿œç¨‹ç«¯å£ã€‚ ä¾‹å¦‚ï¼Œè¦å°†æœ¬åœ°çš„ 8080 ç«¯å£è½¬å‘åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ 80 ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nnetsh interface portproxy add v4tov4 listenaddress=127.0.0.1 listenport=8080 connectaddress=192.168.0.100 connectport=80 è¦æŸ¥çœ‹å½“å‰çš„ç«¯å£è½¬å‘è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nnetsh interface portproxy show v4tov4 è¦åˆ é™¤ç‰¹å®šçš„ç«¯å£è½¬å‘è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nnetsh interface portproxy delete v4tov4 listenaddress=\u0026lt;local_address\u0026gt; listenport=\u0026lt;local_port\u0026gt; å…¶ä¸­çš„\u0026lt;local_address\u0026gt;å’Œ\u0026lt;local_port\u0026gt;åº”è¯¥ä¸ä½ æƒ³åˆ é™¤çš„è§„åˆ™åŒ¹é…ã€‚\nè¯·æ³¨æ„ï¼Œæ‰§è¡Œè¿™äº›æ“ä½œé€šå¸¸éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚\nGUI ä½¿ç”¨å¼€æºå·¥å…·PortProxyGUIå¯ä»¥åœ¨ UI ç•Œé¢å¿«é€Ÿå¢åˆ æ”¹æŸ¥ç«¯å£æ˜ å°„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/windows%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/","summary":"\u003ch1 id=\"å‘½ä»¤è¡Œ\"\u003eå‘½ä»¤è¡Œ\u003c/h1\u003e\n\u003cp\u003eåœ¨ Windows ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ netsh å‘½ä»¤æ¥æ·»åŠ ã€æŸ¥çœ‹å’Œåˆ é™¤ç«¯å£è½¬å‘è§„åˆ™ã€‚\u003c/p\u003e\n\u003cp\u003eè¦\u003cstrong\u003eæ·»åŠ ä¸€ä¸ªç«¯å£è½¬å‘è§„åˆ™\u003c/strong\u003eï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enetsh interface portproxy add v4tov4 \u003cspan class=\"nv\"\u003elistenaddress\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u0026lt;local_address\u0026gt; \u003cspan class=\"nv\"\u003elistenport\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u0026lt;local_port\u0026gt; \u003cspan class=\"nv\"\u003econnectaddress\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u0026lt;remote_address\u0026gt; \u003cspan class=\"nv\"\u003econnectport\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u0026lt;remote_port\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå…¶ä¸­ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e\u0026lt;local_address\u0026gt;\u003c/code\u003eæ˜¯æœ¬åœ°ç›‘å¬çš„åœ°å€ï¼ˆå¯ä»¥æ˜¯ IP åœ°å€æˆ– 0.0.0.0 è¡¨ç¤ºæ‰€æœ‰åœ°å€ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\u0026lt;local_port\u0026gt;\u003c/code\u003eæ˜¯æœ¬åœ°ç›‘å¬çš„ç«¯å£ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\u0026lt;remote_address\u0026gt;\u003c/code\u003eæ˜¯è½¬å‘è¿æ¥åˆ°çš„è¿œç¨‹åœ°å€ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\u0026lt;remote_port\u0026gt;\u003c/code\u003eæ˜¯è½¬å‘è¿æ¥åˆ°çš„è¿œç¨‹ç«¯å£ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¾‹å¦‚ï¼Œè¦å°†æœ¬åœ°çš„ 8080 ç«¯å£è½¬å‘åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ 80 ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\u003c/p\u003e","title":"Windows ç«¯å£æ˜ å°„"},{"content":"èƒŒæ™¯ç®€ä»‹ WSL2 æ˜¯ Windows çš„å­ç³»ç»Ÿï¼Œå¯ä»¥åœ¨ Windows ä¸Šè¿è¡Œ Linuxï¼Œä½†æ˜¯ WSL2 æ˜¯è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥è®¿é—® WSL2 ä¸­çš„æœåŠ¡ï¼Œæ¯”å¦‚ SSH æœåŠ¡ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨å†…ç½‘ç©¿é€å·¥å…·èŠ±ç”Ÿå£³æ¥å®ç°è¿œç¨‹è®¿é—® WSL2 ä¸­çš„æœåŠ¡ã€‚\nå®ç°è¿™ä¸€éœ€æ±‚éœ€è¦å®Œæˆä¸¤ä¸ªåŠŸèƒ½ã€‚\nWSL2 ä¸­çš„æœåŠ¡æ˜¯è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„ï¼Œå¦‚ä½•å°†å…¬ç½‘çš„è®¿é—®è½¬å‘åˆ° WSL2 ä¸­ã€‚ Windows æ²¡æœ‰å…¬ç½‘ IPï¼Œå¦‚ä½•é€šè¿‡å…¬ç½‘æ¥è®¿é—®ã€‚ WSL2 ç«¯å£è½¬å‘ è·å– WSL2 çš„ IP åœ°å€ï¼š\nhostname -I | awk \u0026#39;{print $1}\u0026#39; 172.26.13.98 Windows è‡ªå¸¦çš„netsh interface portproxyå¯ä»¥å®ç°ç«¯å£è½¬å‘ã€‚ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ cmdï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nnetsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=2222 connectaddress=172.26.13.98 connectport=22 listenportï¼šå…¬ç½‘è®¿é—®çš„ç«¯å£ï¼ˆæ”¹ä¸€ä¸ªä¸å†²çªçš„å°±è¡Œï¼‰ connectaddressï¼šWSL2 çš„ IP åœ°å€ connectportï¼šWSL2 ä¸­ SSH æœåŠ¡çš„ç«¯å£ (é»˜è®¤ä¸º 22ï¼Œä¸éœ€è¦æ›´æ”¹) å¼€å¯ Windows é˜²ç«å¢™å…¥ç«™è§„åˆ™ï¼Œç®¡ç†å‘˜èº«ä»½æ‰“å¼€ cmdï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nnetsh advfirewall firewall add rule name=WSL2 dir=in action=allow protocol=TCP localport=2222 è¿™ä¸ªå‘½ä»¤æ˜¯ç”¨äºåœ¨ Windows é«˜çº§é˜²ç«å¢™ä¸­æ·»åŠ ä¸€æ¡è§„åˆ™ã€‚ä¸‹é¢æ˜¯å¯¹æ¯ä¸ªå‚æ•°çš„è§£é‡Šï¼š\nname=WSL2ï¼šå°†è§„åˆ™å‘½åä¸º \u0026ldquo;WSL2\u0026rdquo;ã€‚ dir=inï¼šæŒ‡å®šè§„åˆ™é€‚ç”¨äºä¼ å…¥çš„ç½‘ç»œæµé‡ã€‚ action=allowï¼šå…è®¸é€šè¿‡è¯¥è§„åˆ™çš„æµé‡é€šè¿‡é˜²ç«å¢™ã€‚ protocol=TCPï¼šæŒ‡å®šè§„åˆ™é€‚ç”¨äº TCP åè®®çš„æµé‡ã€‚ localport=2222ï¼šæŒ‡å®šæœ¬åœ°ç«¯å£å·ä¸º 2222ã€‚ éªŒè¯ç«¯å£è½¬å‘æ˜¯å¦æˆåŠŸï¼š\nssh -p 2222 user@localhost user ä¿®æ”¹æˆ WSL2 çš„ç”¨æˆ·å å¦‚æœé…ç½®æˆåŠŸï¼Œåˆ™ä¼šæˆåŠŸç™»å½• WSL2ã€‚\nå®‰è£…é…ç½®èŠ±ç”Ÿå£³ è¿›å…¥å®˜ç½‘ä¸‹è½½èŠ±ç”Ÿå£³å®¢æˆ·ç«¯ï¼Œå®‰è£…åæ‰“å¼€ï¼Œæ³¨å†Œè´¦å·ï¼Œç™»å½•ã€‚éœ€è¦å®åè®¤è¯\nå…è´¹è´¦æˆ·å¯ä»¥ç»‘å®š2 ä¸ªæ˜ å°„ï¼Œå¯¹æˆ‘æ¥è¯´æš‚æ—¶å¤Ÿç”¨äº†ï¼Œå…è´¹æµé‡ 1G/æœˆã€‚å®æµ‹é˜…è¯»ä»£ç ä¸ç¼–è¯‘çš„è¯å¤§æ¦‚æ¯å¤© 50Må·¦å³ã€‚\næ‰“å¼€å®¢æˆ·ç«¯ï¼Œæ·»åŠ æ˜ å°„ï¼Œé…ç½®å¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä¿å­˜å³å¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸï¼Œæ‰¾ä¸€å°ä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘çš„ç”µè„‘ï¼Œä½¿ç”¨ SSH è¿æ¥ WSL2ï¼š\nå¦‚æœå¤åˆ¶å‡ºæ¥çš„è®¿é—®åœ°å€ä¸ºabcdjsj.goho.co:33445ï¼Œé‚£ä¹ˆ SSH å‘½ä»¤ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š\nssh -p 33445 user@abcdjsj.goho.co user ä¿®æ”¹æˆ WSL2 çš„ç”¨æˆ·å å¦‚æœé…ç½®æˆåŠŸï¼Œåˆ™ä¼šæˆåŠŸç™»å½• WSL2ã€‚\né¢˜å¤–è¯ WSL2 çš„ IP ä¼šç»å¸¸å˜åŒ–ï¼Œå¦‚æœè¿ä¸ä¸Šäº†ï¼Œå¯ä»¥é‡æ–°è·å–ä¸€ä¸‹ IPï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹å„ä¸ªé…ç½®ã€‚æˆ–è€…æƒ³åŠæ³•å°† WSL2 çš„ IP å›ºå®šä¸‹æ¥ã€‚ å¸¦å®½æœ‰é™ï¼Œç™»å½•æ—¶æ¯”è¾ƒæ…¢ï¼Œè€å¿ƒç­‰å¾…ã€‚åç»­å‡†å¤‡ä½¿ç”¨ frp è‡ªå»ºä¸€ä¸ªç©¿é€æœåŠ¡ã€‚ PC è€—ç”µä¼¤ä¸èµ·å•Šï¼Œä¸€ç™¾å¤šç“¦èµ¶ä¸Šä¸‰å››å° NAS äº†ã€‚è¿™ç©æ„åªèƒ½åº”æ€¥ï¼Œé•¿æ—¶é—´æŒ‚æœºç”µè´¹éƒ½å¤Ÿä¹°ä¸ªäº‘æœåŠ¡å™¨äº†ã€‚ å¸¸è§é—®é¢˜ \u0026ldquo;System is booting up. Unprivileged users are not permitted to log in yet\u0026rdquo; ç™»å½•æœåŠ¡ç«¯ï¼Œä¹Ÿå°±æ˜¯ WSL2ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\nsudo rm /run/nologin ","permalink":"https://lifeislife.cn/posts/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E5%AE%B6%E9%87%8C%E7%9A%84wsl2/","summary":"\u003ch1 id=\"èƒŒæ™¯ç®€ä»‹\"\u003eèƒŒæ™¯ç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eWSL2 æ˜¯ Windows çš„å­ç³»ç»Ÿï¼Œå¯ä»¥åœ¨ Windows ä¸Šè¿è¡Œ Linuxï¼Œä½†æ˜¯ WSL2 æ˜¯è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥è®¿é—® WSL2 ä¸­çš„æœåŠ¡ï¼Œæ¯”å¦‚ SSH æœåŠ¡ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨å†…ç½‘ç©¿é€å·¥å…·\u003cstrong\u003eèŠ±ç”Ÿå£³\u003c/strong\u003eæ¥å®ç°è¿œç¨‹è®¿é—® WSL2 ä¸­çš„æœåŠ¡ã€‚\u003c/p\u003e","title":"å†…ç½‘ç©¿é€è¿œç¨‹è®¿é—®å®¶é‡Œçš„ WSL2"},{"content":"Docker-compose å¯åŠ¨ ä¸‹è½½å®˜æ–¹çš„ docker-compose.yml æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹ç«¯å£å’ŒæŒ‚è½½è·¯å¾„ï¼Œç„¶åå¯åŠ¨å³å¯ã€‚\nwget https://dl.photoprism.app/docker/docker-compose.yml å¦‚æœæ— æ³•ä¸‹è½½ä¸‹è½½åœ°å€å¯ä»¥å‰å¾€ Docker Compose - PhotoPrism æŸ¥çœ‹æœ€æ–°ã€‚\næ ¹æ®è‡ªå·±éœ€è¦ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š\nversion: \u0026#39;3.5\u0026#39; services: photoprism: ## Use photoprism/photoprism:preview for testing preview builds: image: dockerproxy.com/photoprism/photoprism:latest # é…ç½®äº†é•œåƒåŠ é€Ÿ ports: - \u0026#34;2342:2342\u0026#34; # HTTP port (host:container) environment: PHOTOPRISM_ADMIN_USER: \u0026#34;admin\u0026#34; # ç®¡ç†å‘˜ç”¨æˆ·å PHOTOPRISM_ADMIN_PASSWORD: \u0026#34;12345678\u0026#34; # ç®¡ç†å‘˜å¯†ç  PHOTOPRISM_DETECT_NSFW: \u0026#34;true\u0026#34; # è‡ªåŠ¨æ£€æµ‹ NSFW å›¾ç‰‡å¹¶æ ‡è®°éšç§å›¾ç‰‡ PHOTOPRISM_UPLOAD_NSFW: \u0026#34;true\u0026#34; # è¿è¡Œä¸Šä¼  NSFW å›¾ç‰‡ ## Share hardware devices with FFmpeg and TensorFlow (optional): devices: - \u0026#34;/dev/dri:/dev/dri\u0026#34; # å¦‚æœæœ‰æ ¸æ˜¾æˆ–è€…ç‹¬æ˜¾å¯ä»¥é…ç½®ç¡¬ä»¶åŠ é€Ÿ volumes: - \u0026#34;/root/sharedfolder/syncthing/Photo_Album:/photoprism/originals/Photo_Album\u0026#34; # ç…§ç‰‡å­˜æ”¾è·¯å¾„ - \u0026#34;/root/sharedfolder/syncthing/daily:/photoprism/originals/daily\u0026#34; # ç…§ç‰‡å­˜æ”¾è·¯å¾„ - \u0026#34;/root/sharedfolder/syncthing/baby:/photoprism/originals/baby\u0026#34; # ç…§ç‰‡å­˜æ”¾è·¯å¾„ - \u0026#34;./storage:/photoprism/storage\u0026#34; # ä¸è¦åˆ é™¤ (DO NOT REMOVE) ç„¶åå¯åŠ¨å³å¯ï¼š\ndocker-compose up -d åˆå§‹åŒ–éœ€è¦æ—¶é—´ï¼Œç­‰å¾…ä¸€åˆ†é’Ÿå·¦å³ï¼Œç„¶åè®¿é—® http://{hostip}:2342 å³å¯çœ‹åˆ°ç™»å½•ç•Œé¢ã€‚\né…ç½® é…ç½®ä¸­æ–‡ç•Œé¢ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç´¢å¼•ç…§ç‰‡ è¿™ä¸ªè¿‡ç¨‹ä¼šè°ƒç”¨ TensorFlow è¿›è¡Œç…§ç‰‡çš„ AI è¯†åˆ«ï¼Œç„¶åè‡ªåŠ¨è¿›è¡Œåˆ†ç±»ï¼Œç…§ç‰‡å¦‚æœå¾ˆå¤šä¼šå¾ˆæ…¢ã€‚å¦‚æœåªæƒ³ç´¢å¼•æŸä¸€ä¸ªç›®å½•å°±ç‚¹å‡»å›¾ç‰‡ä¸­çš„åŒºåŸŸé€‰æ‹©æŒ‡å®šç›®å½•ï¼Œé€‰æ‹©ç›®å½•çš„è¿‡ç¨‹ä¼šåŠ è½½æ¯”è¾ƒæ…¢ï¼Œéœ€è¦ç­‰å¾…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨ç›¸å†Œ ç´¢å¼•å®Œæˆå°±å¯ä»¥ç‚¹å‡»æœç´¢è¿›è¡ŒæŸ¥çœ‹æ‰€æœ‰ç…§ç‰‡äº†ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç´¢å¼•è¿‡ç¨‹ä¼šæ ¹æ®ç…§ç‰‡çš„ Exif ä¿¡æ¯è‡ªåŠ¨åˆ†ç±»ï¼ŒåŒ…æ‹¬æ—¶é—´ä¸åœ°ç‚¹ã€‚åæ‚”ä»ç›¸æœºå¯¼å‡ºç…§ç‰‡æ—¶æŠŠåœ°ç‚¹æŠ¹å»äº†ã€‚\nç…§ç‰‡è¿˜æ˜¯å¾—åŠæ—¶æ•´ç†å‘€ï¼Œè¿™æˆåƒä¸Šä¸‡å¼ ç…§ç‰‡æŒ¨ä¸ªæ ‡è®°è¿˜æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå°±è¿™æ ·å§ï¼Œåšä¸ªå›¾ç‰‡å¢™ä¹Ÿä¸é”™ã€‚\nå¸¸è§é—®é¢˜ åœ¨docker-compose.ymlä¸­åˆ é™¤å·²ç»ç´¢å¼•çš„volumeï¼Œä¸ºä½•å›¾ç‰‡åº“ä¸­è¿˜å­˜åœ¨ç¼“å­˜ ç¼“å­˜ä¿å­˜åœ¨storageä¸­ï¼Œå¦‚æœå›¾ç‰‡å†…å®¹ä¸å¤šï¼Œå¯ä»¥å°†è¯¥ç›®å½•åˆ é™¤ï¼Œé‡å¯å®¹å™¨ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†ç¼“å­˜åˆ é™¤ï¼š\n# è¿›å…¥å®¹å™¨ docker exec -it photo-prism bash # åˆ é™¤ç´¢å¼• photoprism purge # åˆ é™¤æ–‡ä»¶ photoprism cleanup å…¨é€‰å›¾ç‰‡ï¼Œé€‰æ‹©å¤šä¸ªå›¾ç‰‡ å¯ä»¥é€‰æ‹©ä¸€å¼ å›¾ç‰‡åæŒ‰ä½Shiftåˆ°æœ€åä¸€å¼ ï¼Œæ‰¹é‡é€‰æ‹©å›¾ç‰‡\nå®šæ—¶ç´¢å¼•ç…§ç‰‡ å¯ä»¥ä½¿ç”¨ crontab å®šæ—¶æ‰§è¡Œ photoprism index å‘½ä»¤ï¼Œä¾‹å¦‚æ¯å¤©å‡Œæ™¨ 3 ç‚¹æ‰§è¡Œä¸€æ¬¡ï¼š\n# ç¼–è¾‘å®šæ—¶ä»»åŠ¡ crontab -e # æ·»åŠ ä»¥ä¸‹å†…å®¹ 0 3 * * * docker exec -i photo-prism photoprism index ","permalink":"https://lifeislife.cn/posts/photoprism%E9%83%A8%E7%BD%B2%E7%A7%81%E4%BA%BA%E7%9B%B8%E5%86%8C/","summary":"\u003ch1 id=\"docker-compose-å¯åŠ¨\"\u003eDocker-compose å¯åŠ¨\u003c/h1\u003e\n\u003cp\u003eä¸‹è½½å®˜æ–¹çš„ \u003ccode\u003edocker-compose.yml\u003c/code\u003e æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹ç«¯å£å’ŒæŒ‚è½½è·¯å¾„ï¼Œç„¶åå¯åŠ¨å³å¯ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewget https://dl.photoprism.app/docker/docker-compose.yml\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eå¦‚æœæ— æ³•ä¸‹è½½ä¸‹è½½åœ°å€å¯ä»¥å‰å¾€ \u003ca href=\"https://docs.photoprism.app/getting-started/docker-compose/\"\u003eDocker Compose - PhotoPrism\u003c/a\u003e æŸ¥çœ‹æœ€æ–°ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eæ ¹æ®è‡ªå·±éœ€è¦ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yml\" data-lang=\"yml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003eversion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;3.5\u0026#39;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"nt\"\u003eservices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003ephotoprism\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"c\"\u003e## Use photoprism/photoprism:preview for testing preview builds:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003edockerproxy.com/photoprism/photoprism:latest\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"c\"\u003e# é…ç½®äº†é•œåƒåŠ é€Ÿ\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eports\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;2342:2342\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"c\"\u003e# HTTP port (host:container)\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ePHOTOPRISM_ADMIN_USER\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;admin\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e                 \u003c/span\u003e\u003cspan class=\"c\"\u003e# ç®¡ç†å‘˜ç”¨æˆ·å\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ePHOTOPRISM_ADMIN_PASSWORD\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;12345678\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e          \u003c/span\u003e\u003cspan class=\"c\"\u003e# ç®¡ç†å‘˜å¯†ç \u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ePHOTOPRISM_DETECT_NSFW\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e                 \u003c/span\u003e\u003cspan class=\"c\"\u003e# è‡ªåŠ¨æ£€æµ‹ NSFW å›¾ç‰‡å¹¶æ ‡è®°éšç§å›¾ç‰‡\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003ePHOTOPRISM_UPLOAD_NSFW\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e                 \u003c/span\u003e\u003cspan class=\"c\"\u003e# è¿è¡Œä¸Šä¼  NSFW å›¾ç‰‡   \u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"c\"\u003e## Share hardware devices with FFmpeg and TensorFlow (optional):\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edevices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e     \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;/dev/dri:/dev/dri\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e                           \u003c/span\u003e\u003cspan class=\"c\"\u003e# å¦‚æœæœ‰æ ¸æ˜¾æˆ–è€…ç‹¬æ˜¾å¯ä»¥é…ç½®ç¡¬ä»¶åŠ é€Ÿ\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003evolumes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;/root/sharedfolder/syncthing/Photo_Album:/photoprism/originals/Photo_Album\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e               \u003c/span\u003e\u003cspan class=\"c\"\u003e# ç…§ç‰‡å­˜æ”¾è·¯å¾„\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;/root/sharedfolder/syncthing/daily:/photoprism/originals/daily\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e               \u003c/span\u003e\u003cspan class=\"c\"\u003e# ç…§ç‰‡å­˜æ”¾è·¯å¾„\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;/root/sharedfolder/syncthing/baby:/photoprism/originals/baby\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e               \u003c/span\u003e\u003cspan class=\"c\"\u003e# ç…§ç‰‡å­˜æ”¾è·¯å¾„\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;./storage:/photoprism/storage\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e                  \u003c/span\u003e\u003cspan class=\"c\"\u003e# ä¸è¦åˆ é™¤ (DO NOT REMOVE)\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eç„¶åå¯åŠ¨å³å¯ï¼š\u003c/p\u003e","title":"PhotoPrism éƒ¨ç½²ç§äººç›¸å†Œ"},{"content":"docker-compose.yml version: \u0026#34;3.7\u0026#34; services: radarr: container_name: radarr image: dockerproxy.com/linuxserver/radarr:latest ports: - \u0026#34;7878:7878\u0026#34; environment: - PUID=1000 - PGID=1000 - UMASK=002 - TZ=Asia/Shanghai volumes: - /root/sharedfolder/appdata/radarr:/config - /root/sharedfolder/media:/movies - /root/sharedfolder/downloads/qbittorrent:/downloads é…ç½®ä¸­æ–‡ç•Œé¢ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¯¼å…¥è§†é¢‘ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/docker%E9%83%A8%E7%BD%B2radarr%E5%88%AE%E5%89%8A%E7%94%B5%E5%BD%B1/","summary":"\u003ch1 id=\"docker-composeyml\"\u003edocker-compose.yml\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-YAML\" data-lang=\"YAML\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003eversion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;3.7\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"nt\"\u003eservices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003eradarr\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eradarr\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003edockerproxy.com/linuxserver/radarr:latest\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eports\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;7878:7878\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003ePUID=1000\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003ePGID=1000\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eUMASK=002\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eTZ=Asia/Shanghai\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003evolumes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/root/sharedfolder/appdata/radarr:/config\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/root/sharedfolder/media:/movies\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/root/sharedfolder/downloads/qbittorrent:/downloads\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eé…ç½®ä¸­æ–‡ç•Œé¢ï¼š\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2023/08/17/9dbfcaa5f918bccfa99ce64cc97a7e16.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2023/08/17/9dbfcaa5f918bccfa99ce64cc97a7e16.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Docker éƒ¨ç½² Radarr åˆ®å‰Šç”µå½±"},{"content":"ç”Ÿæˆå¯†é’¥å¯¹ å®¿ä¸»æœºä»»æ„ä¸‹ç›®å½•æ‰§è¡Œï¼š\n$ ssh-keygen -t rsa Generating public/private rsa key pair. Enter file in which to save the key (/home/user/.ssh/id_rsa): host2servera_id_rsa Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in host2servera_id_rsa. Your public key has been saved in host2servera_id_rsa.pub. The key fingerprint is: SHA256:OkWcw+R3x6Z2mzeYQuG033H3N9qIeym3TZKzz6YD8tQ user@ubuntu18 The key\u0026#39;s randomart image is: +---[RSA 2048]----+ | . | | = . . | | B .o. + | | . oo.o+ | | S ++ ..o| | o ..+.A=o=| | o +..B+=+| | . oo=@o+| | o=ss= | +----[SHA256]-----+ ä¸€ç›´å›è½¦ç¡®å®šï¼Œç”Ÿæˆå…¬ç§é’¥ï¼Œä¿å­˜åœ¨~/.sshç›®å½•ä¸‹ã€‚\næˆ‘åœ¨å®¿ä¸»æœºä¸Šç”Ÿæˆçš„å…¬ç§é’¥åç§°ä¸ºï¼Œåˆ†åˆ«æ˜¯host2servera_id_rsa,host2servera_id_rsa.pubæ–¹ä¾¿æˆ‘è®°å¿†ã€‚å¦‚æœä¸€ç›´å›è½¦ï¼Œé‚£ä¹ˆç”Ÿæˆçš„å…¬ç§é’¥åç§°ä¸ºid_rsaï¼Œid_rsa.pubã€‚\nå‘é€å…¬é’¥ å°†å…¬é’¥å¤åˆ¶åˆ°æœåŠ¡å™¨ ServerA ä¸Šï¼Œä»¥ IPï¼š10.12.193.53 ä¸ºä¾‹ã€‚\n$ ssh-copy-id 10.12.193.53 # è¾“å…¥å¯†ç  /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed /usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys user@10.12.193.53\u0026#39;s password: Number of key(s) added: 1 Now try logging into the machine, with: \u0026#34;ssh \u0026#39;10.12.193.53\u0026#39;\u0026#34; and check to make sure that only the key(s) you wanted were added. é»˜è®¤æ˜¯æŠŠ ServerA çš„ç”¨æˆ·å½“åš user è¿›è¡Œç™»å½•ã€‚å¦‚æœæœ‰ç¡®å®šçš„ç”¨æˆ·å¦‚userAï¼Œå°±ä½¿ç”¨ssh-copy-id userA@10.12.193.53\nç„¶åå°±å¯ä»¥ç›´æ¥å…å¯†ç ç™»å½•äº†ï¼š\nssh user@10.12.193.53 # æˆ–è€… ssh userA@10.12.193.53 å¦‚æœè¿˜æ˜¯éœ€è¦è¾“å…¥å¯†ç ï¼Œå¯èƒ½ssh-agentæ²¡æœ‰å¯åŠ¨ï¼Œæ‰§è¡Œeval $(ssh-agent)å¯åŠ¨ssh-agentï¼Œç„¶åå†æ¬¡ç™»å½•å³å¯ã€‚ç„¶åå°†ç§é’¥æ·»åŠ åˆ°ssh-agentä¸­ï¼Œæ‰§è¡Œssh-add ~/.ssh/host2servera_id_rsaï¼Œç„¶åå†æ¬¡ç™»å½•å³å¯ã€‚\né…ç½®å¿«æ·ç™»å½• å³ä½¿å…å¯†ç™»å½•ï¼Œè¾“å…¥ä¸€é•¿ä¸² IP ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œèƒ½ä¸èƒ½é…ç½®æ›´ç®€å•çš„ç™»å½•æ–¹å¼ï¼Œæ¯”å¦‚ç»™æœåŠ¡å™¨èµ·ä¸ªåå­—å¦‚ServerAç›´æ¥ä½¿ç”¨ssh ServerAå°±ç™»å½•æœåŠ¡å™¨ï¼Œèƒ½ã€‚\næ‰“å¼€~/.ssh/configé…ç½®å¦‚ä¸‹å†…å®¹ï¼š\nHost ServerA HostName 10.12.193.53 Port 22 User userA IdentityFile ~/.ssh/host2servera_id_rsa ç„¶åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ssh ServerAç™»å½•äº†ã€‚\n","permalink":"https://lifeislife.cn/posts/ssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/","summary":"\u003ch1 id=\"ç”Ÿæˆå¯†é’¥å¯¹\"\u003eç”Ÿæˆå¯†é’¥å¯¹\u003c/h1\u003e\n\u003cp\u003eå®¿ä¸»æœºä»»æ„ä¸‹ç›®å½•æ‰§è¡Œï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ ssh-keygen -t rsa\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eGenerating public/private rsa key pair.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eEnter file in which to save the key \u003cspan class=\"o\"\u003e(\u003c/span\u003e/home/user/.ssh/id_rsa\u003cspan class=\"o\"\u003e)\u003c/span\u003e: host2servera_id_rsa\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eEnter passphrase \u003cspan class=\"o\"\u003e(\u003c/span\u003eempty \u003cspan class=\"k\"\u003efor\u003c/span\u003e no passphrase\u003cspan class=\"o\"\u003e)\u003c/span\u003e: \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eEnter same passphrase again: \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eYour identification has been saved in host2servera_id_rsa.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eYour public key has been saved in host2servera_id_rsa.pub.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eThe key fingerprint is:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eSHA256:OkWcw+R3x6Z2mzeYQuG033H3N9qIeym3TZKzz6YD8tQ user@ubuntu18\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eThe key\u003cspan class=\"err\"\u003e\u0026#39;\u003c/span\u003es randomart image is:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+---\u003cspan class=\"o\"\u003e[\u003c/span\u003eRSA 2048\u003cspan class=\"o\"\u003e]\u003c/span\u003e----+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e        .        \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e       \u003cspan class=\"o\"\u003e=\u003c/span\u003e .   .   \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e        B .o. +  \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e       . oo.o+   \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e        S  ++ ..o\u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e       o ..+.A\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003eo\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e      o   +..B+\u003cspan class=\"o\"\u003e=\u003c/span\u003e+\u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e       .   \u003cspan class=\"nv\"\u003eoo\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e@o+\u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e           \u003cspan class=\"nv\"\u003eo\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003ess\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+----\u003cspan class=\"o\"\u003e[\u003c/span\u003eSHA256\u003cspan class=\"o\"\u003e]\u003c/span\u003e-----+\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¸€ç›´å›è½¦ç¡®å®šï¼Œç”Ÿæˆå…¬ç§é’¥ï¼Œä¿å­˜åœ¨\u003ccode\u003e~/.ssh\u003c/code\u003eç›®å½•ä¸‹ã€‚\u003c/p\u003e","title":"SSH å…å¯†ç™»å½•"},{"content":"é…ç½®ç½‘æ¡¥ brctl # åˆ›å»ºä¸€ä¸ªåä¸º br0 çš„ç½‘æ¡¥ sudo brctl addbr br0 # åˆ é™¤ç½‘æ¡¥ br0 sudo brctl delbr br0 # åˆ—å‡ºæ‰€æœ‰çš„ç½‘æ¡¥åŠå…¶æ¥å£ä¿¡æ¯ sudo brctl show # å°†ç½‘ç»œæ¥å£ `eth0` æ·»åŠ åˆ°ç½‘æ¡¥ `br0` ä¸­ sudo brctl addif br0 eth0 # ä»ç½‘æ¡¥ `br0` ä¸­åˆ é™¤ç½‘ç»œæ¥å£ `eth0` sudo brctl delif br0 eth0 ### æ˜¾ç¤ºç½‘æ¡¥ `br0` çš„ Spanning Tree Protocol (STP)é…ç½® sudo brctl showstp br0 # ç¦ç”¨ Linux å†…æ ¸ä¸­æ¡¥æ¥å™¨å¯¹æ•°æ®åŒ…è¿›è¡Œå¤„ç†æ—¶è°ƒç”¨ iptables çš„åŠŸèƒ½ã€‚è¿™ç§é…ç½®é€šå¸¸ç”¨äºæé«˜æ¡¥æ¥é€Ÿåº¦ï¼Œå‡å°‘æ¡¥æ¥è¿‡ç¨‹ä¸­çš„ CPU å¼€é”€ã€‚ sudo sysctl net.bridge.bridge-nf-call-iptables=0 sudo sysctl net.bridge.bridge-nf-call-iptables=0 # ä¸ºè™šæ‹Ÿç½‘å¡è®¾ç½®IPå¹¶å¯åŠ¨ sudo ifconfig tap0 192.168.2.1 up è™šæ‹Ÿç½‘ç»œè®¾å¤‡ tunctl # åˆ›å»ºä¸€ä¸ªåä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ sudo tunctl -t tun0 # å°†è™šæ‹Ÿç½‘å¡è®¾ç½®ä¸ºä»»ä½•äººéƒ½æœ‰æƒé™ä½¿ç”¨ï¼š sudo chmod 0666 /dev/net/tun # åˆ é™¤åä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ sudo tunctl -d tun0 # åˆ›å»ºåä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¹¶æŒ‡å®šå…¶æ‹¥æœ‰è€…å’Œç»„ sudo tunctl -u user -g group -t tun0 # åˆ—å‡ºæ‰€æœ‰æ´»è·ƒçš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡åŠå…¶æ¥å£ä¿¡æ¯ sudo tunctl -s # æŒ‡å®šè™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€ sudo tunctl -m [mac_address] -t tun0 # åˆ—å‡ºå…·æœ‰ç»™å®šè®¾å¤‡åç§°å‰ç¼€çš„æ‰€æœ‰å·²åˆ†é…çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ sudo tunctl -g [device_name_prefix] # åˆ†é…è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå°†ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º sudo tunctl -p -t tun0 # å°†è™šæ‹Ÿç½‘ç»œè®¾å¤‡å…³è”åˆ°ç°æœ‰çš„æ¡¥æ¥è®¾å¤‡ sudo tunctl -b -t tun0 -g br0 # ä»ç°æœ‰è™šæ‹Ÿç½‘ç»œè®¾å¤‡è§£é™¤å…³è” sudo tunctl -B -t tun0 # æŒ‡å®šè™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„æœ€å¤§ä¼ è¾“å•å…ƒ(MTU) sudo ip link set tun0 mtu [value] # å¯ç”¨è™šæ‹Ÿç½‘ç»œè®¾å¤‡ sudo ip link set tun0 up # ç¦ç”¨è™šæ‹Ÿç½‘ç»œè®¾å¤‡ sudo ip link set tun0 down # æ˜¾ç¤ºç”±Linuxå†…æ ¸ç®¡ç†çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„çŠ¶æ€ä¿¡æ¯ sudo ip link show tun0 # ä¿®æ”¹è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€ sudo ip link set dev tun0 address [mac_address] # ä¸ºè™šæ‹Ÿç½‘ç»œè®¾å¤‡åˆ†é…ä¸€ä¸ªIPv4åœ°å€ sudo ip addr add [ip_address/cidr] dev tun0 # ä»è™šæ‹Ÿç½‘ç»œè®¾å¤‡ä¸­åˆ é™¤ä¸€ä¸ªIPv4åœ°å€ sudo ip addr del [ip_address/cidr] dev tun0 # æ£€æŸ¥è™šæ‹Ÿç½‘ç»œè®¾å¤‡æ˜¯å¦å·²åˆ†é…IPv4åœ°å€ ip addr show tun0 | grep inet # ä½¿ç”¨DLADDRå‘½ä»¤è·å–è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€ sudo ethtool -P tun0 # åˆ—å‡ºå½“å‰æ‰€æœ‰æ´»åŠ¨çš„ç½‘ç»œæ¥å£ ip a # æ£€æŸ¥è™šæ‹Ÿç½‘ç»œè®¾å¤‡æ˜¯å¦å·²åˆ†é…IPv6åœ°å€ ip addr show tun0 | grep inet6 ç½‘ç»œæ¥å£ç®¡ç†ï¼ˆifconfigï¼‰ # æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£ä¿¡æ¯ ifconfig -a # æ¿€æ´»æŒ‡å®šæ¥å£(å¦‚ eth0) ifconfig eth0 up # å…³é—­æŒ‡å®šæ¥å£(å¦‚ eth0) ifconfig eth0 down # æ·»åŠ  IP åœ°å€ï¼Œä¾‹å¦‚æ·»åŠ  IP åœ°å€ä¸º 192.168.2.100 çš„ç½‘å¡ eth0 ifconfig eth0 192.168.2.100 netmask 255.255.255.0 up # åˆ é™¤ IP åœ°å€ï¼Œä¾‹å¦‚åˆ é™¤ç½‘å¡ eth0 ä¸Šçš„ IP åœ°å€ ifconfig eth0 0.0.0.0 # å¯ç”¨æˆ–ç¦ç”¨å¹¿æ’­åœ°å€ ifconfig eth0 broadcast 192.168.2.255 up ifconfig eth0 -broadcast # è®¾ç½®ç½‘å¡ mtu å¤§å°ä¸º 9000 ifconfig eth0 mtu 9000 # å¢åŠ ä¸€ä¸ªè™šæ‹Ÿç½‘ç»œæ¥å£ eth0:1ï¼Œå¹¶é…ç½® IP åœ°å€ä¸º 192.168.2.100 ifconfig eth0:1 192.168.2.100 netmask 255.255.255.0 up è·¯ç”±ç®¡ç†ï¼ˆrouteï¼‰ # æ˜¾ç¤ºå½“å‰è·¯ç”±è¡¨ route -n # æ·»åŠ é»˜è®¤è·¯ç”± route add default gw 192.168.2.1 # åˆ é™¤é»˜è®¤è·¯ç”± route del default # å¢åŠ ä¸€ä¸ªåˆ°ç›®æ ‡ç½‘ç»œçš„é™æ€è·¯ç”± route add -net 192.168.100.0 netmask 255.255.255.0 gw 192.168.2.1 # åˆ é™¤é™æ€è·¯ç”± route del -net 192.168.100.0 netmask 255.255.255.0 gw 192.168.2.1 # æ¸…é™¤æ‰€æœ‰è·¯ç”±ç¼“å­˜é¡¹ route flush cache # æŸ¥çœ‹ IP åœ°å€å¯¹åº”ç½‘å¡æ¥å£çš„ MAC åœ°å€ arping -I eth0 192.168.2.1 DNS è§£æï¼ˆnslookup å’Œ digï¼‰ # ä½¿ç”¨åŸŸåæœåŠ¡å™¨è§£æåŸŸå nslookup www.example.com # æŒ‡å®šåŸŸåæœåŠ¡å™¨ï¼Œå¹¶è§£æåŸŸå nslookup www.example.com 8.8.8.8 # æŸ¥è¯¢DNSåœ°å€ dig example.com +nssearch # æŸ¥è¯¢æ‰€æœ‰çš„ NS è®°å½• dig example.com NS # æŸ¥è¯¢æŸä¸ªåŸŸåçš„ MX è®°å½• dig example.com MX ç½‘ç»œè¯Šæ–­å·¥å…·ï¼ˆping å’Œ tracerouteï¼‰ # æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºä¹‹é—´çš„è¿é€šæ€§ï¼ŒæŸ¥çœ‹ç½‘ç»œæ˜¯å¦å¯è¾¾ ping 192.168.2.1 # ping å‘½ä»¤çš„é«˜çº§é€‰é¡¹ï¼Œæ§åˆ¶å‘é€çš„æ•°æ®åŒ…æ•°é‡ã€å¤§å°å’Œæ—¶é—´é—´éš”ç­‰å‚æ•° ping -c 5 -s 100 -i 1 192.168.2.1 # æ˜¾ç¤ºæ•°æ®åŒ…åœ¨ç½‘ç»œä¸Šçš„ä¼ è¾“è·¯å¾„ï¼Œæ£€æµ‹ç½‘ç»œæ•…éšœ traceroute www.google.com # æ˜¾ç¤ºæ¯ä¸€è·³æ‰€ç»è¿‡çš„è·¯ç”±å™¨åç§°å’Œ IP åœ°å€ traceroute -n www.google.com ç½‘ç»œæµé‡åˆ†æå·¥å…·ï¼ˆtcpdump å’Œ wiresharkï¼‰ # ç›‘å¬æŒ‡å®šçš„ç½‘ç»œæ¥å£ä¸Šçš„æ•°æ®åŒ…ï¼Œæ˜¾ç¤ºæ¯ä¸ªæ•°æ®åŒ…çš„è¯¦ç»†ä¿¡æ¯ tcpdump -i eth0 # ç›‘å¬æŒ‡å®šç«¯å£ä¸Šçš„æ•°æ®åŒ… tcpdump port 80 # æ˜¾ç¤ºä»æŒ‡å®šæºåœ°å€åˆ°ç›®æ ‡åœ°å€çš„æ‰€æœ‰ç½‘ç»œæµé‡ tcpdump src 192.168.2.100 and dst 192.168.2.200 # æ˜¾ç¤ºæ‰€æœ‰ IP æµé‡ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°æ–‡ä»¶ tcp.pcap ä¸­ï¼Œä»¥ä¾¿ä½¿ç”¨ Wireshark åˆ†æ tcpdump -i eth0 -w tcp.pcap ip # å›¾å½¢åŒ–çš„ç½‘ç»œåè®®åˆ†æå·¥å…·ï¼Œç”¨äºåˆ†æç½‘ç»œæµé‡ wireshark å…¶ä»–å‘½ä»¤ # æ˜¾ç¤ºç½‘ç»œè¿æ¥çŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯ netstat -an # æ˜¾ç¤º TCP/IP é…ç½®å‚æ•° sysctl net.ipv4.tcp_* # è®¾ç½® TCP/IP å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½® SYN æ”»å‡»ä¿æŠ¤ sysctl -w net.ipv4.tcp_syncookies=1 # é‡æ–°åŠ è½½ /etc/resolv.conf æ–‡ä»¶ systemd-resolve --flush-caches # æ˜¾ç¤ºå½“å‰ DNS æœåŠ¡å™¨ systemd-resolve --status | grep \u0026#39;DNS Servers\u0026#39; # é‡å¯ç½‘ç»œ systemctl restart NetworkManager ","permalink":"https://lifeislife.cn/posts/linux%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","summary":"\u003ch1 id=\"é…ç½®ç½‘æ¡¥-brctl\"\u003eé…ç½®ç½‘æ¡¥ brctl\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ›å»ºä¸€ä¸ªåä¸º br0 çš„ç½‘æ¡¥\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo brctl addbr br0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ é™¤ç½‘æ¡¥ br0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo brctl delbr br0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ—å‡ºæ‰€æœ‰çš„ç½‘æ¡¥åŠå…¶æ¥å£ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo brctl show\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å°†ç½‘ç»œæ¥å£ `eth0` æ·»åŠ åˆ°ç½‘æ¡¥ `br0` ä¸­\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo brctl addif br0 eth0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ä»ç½‘æ¡¥ `br0` ä¸­åˆ é™¤ç½‘ç»œæ¥å£ `eth0`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo brctl delif br0 eth0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e### æ˜¾ç¤ºç½‘æ¡¥ `br0` çš„ Spanning Tree Protocol (STP)é…ç½®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo brctl showstp br0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ç¦ç”¨ Linux å†…æ ¸ä¸­æ¡¥æ¥å™¨å¯¹æ•°æ®åŒ…è¿›è¡Œå¤„ç†æ—¶è°ƒç”¨ iptables çš„åŠŸèƒ½ã€‚è¿™ç§é…ç½®é€šå¸¸ç”¨äºæé«˜æ¡¥æ¥é€Ÿåº¦ï¼Œå‡å°‘æ¡¥æ¥è¿‡ç¨‹ä¸­çš„ CPU å¼€é”€ã€‚\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo sysctl net.bridge.bridge-nf-call-iptables\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo sysctl net.bridge.bridge-nf-call-iptables\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ä¸ºè™šæ‹Ÿç½‘å¡è®¾ç½®IPå¹¶å¯åŠ¨\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ifconfig tap0 192.168.2.1 up\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"è™šæ‹Ÿç½‘ç»œè®¾å¤‡-tunctl\"\u003eè™šæ‹Ÿç½‘ç»œè®¾å¤‡ tunctl\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ›å»ºä¸€ä¸ªåä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -t tun0 \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å°†è™šæ‹Ÿç½‘å¡è®¾ç½®ä¸ºä»»ä½•äººéƒ½æœ‰æƒé™ä½¿ç”¨ï¼š\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo chmod \u003cspan class=\"m\"\u003e0666\u003c/span\u003e /dev/net/tun\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ é™¤åä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -d tun0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ›å»ºåä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¹¶æŒ‡å®šå…¶æ‹¥æœ‰è€…å’Œç»„\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -u user -g group -t tun0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ—å‡ºæ‰€æœ‰æ´»è·ƒçš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡åŠå…¶æ¥å£ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -s \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æŒ‡å®šè™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -m \u003cspan class=\"o\"\u003e[\u003c/span\u003emac_address\u003cspan class=\"o\"\u003e]\u003c/span\u003e -t tun0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ—å‡ºå…·æœ‰ç»™å®šè®¾å¤‡åç§°å‰ç¼€çš„æ‰€æœ‰å·²åˆ†é…çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -g \u003cspan class=\"o\"\u003e[\u003c/span\u003edevice_name_prefix\u003cspan class=\"o\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ†é…è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå°†ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -p -t tun0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å°†è™šæ‹Ÿç½‘ç»œè®¾å¤‡å…³è”åˆ°ç°æœ‰çš„æ¡¥æ¥è®¾å¤‡\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -b -t tun0 -g br0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ä»ç°æœ‰è™šæ‹Ÿç½‘ç»œè®¾å¤‡è§£é™¤å…³è”\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo tunctl -B -t tun0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æŒ‡å®šè™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„æœ€å¤§ä¼ è¾“å•å…ƒ(MTU)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ip link \u003cspan class=\"nb\"\u003eset\u003c/span\u003e tun0 mtu \u003cspan class=\"o\"\u003e[\u003c/span\u003evalue\u003cspan class=\"o\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¯ç”¨è™šæ‹Ÿç½‘ç»œè®¾å¤‡\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ip link \u003cspan class=\"nb\"\u003eset\u003c/span\u003e tun0 up\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ç¦ç”¨è™šæ‹Ÿç½‘ç»œè®¾å¤‡\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ip link \u003cspan class=\"nb\"\u003eset\u003c/span\u003e tun0 down\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºç”±Linuxå†…æ ¸ç®¡ç†çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„çŠ¶æ€ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ip link show tun0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ä¿®æ”¹è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ip link \u003cspan class=\"nb\"\u003eset\u003c/span\u003e dev tun0 address \u003cspan class=\"o\"\u003e[\u003c/span\u003emac_address\u003cspan class=\"o\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ä¸ºè™šæ‹Ÿç½‘ç»œè®¾å¤‡åˆ†é…ä¸€ä¸ªIPv4åœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ip addr add \u003cspan class=\"o\"\u003e[\u003c/span\u003eip_address/cidr\u003cspan class=\"o\"\u003e]\u003c/span\u003e dev tun0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ä»è™šæ‹Ÿç½‘ç»œè®¾å¤‡ä¸­åˆ é™¤ä¸€ä¸ªIPv4åœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ip addr del \u003cspan class=\"o\"\u003e[\u003c/span\u003eip_address/cidr\u003cspan class=\"o\"\u003e]\u003c/span\u003e dev tun0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ£€æŸ¥è™šæ‹Ÿç½‘ç»œè®¾å¤‡æ˜¯å¦å·²åˆ†é…IPv4åœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eip addr show tun0 \u003cspan class=\"p\"\u003e|\u003c/span\u003e grep inet\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ä½¿ç”¨DLADDRå‘½ä»¤è·å–è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ethtool -P tun0 \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ—å‡ºå½“å‰æ‰€æœ‰æ´»åŠ¨çš„ç½‘ç»œæ¥å£\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eip a \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ£€æŸ¥è™šæ‹Ÿç½‘ç»œè®¾å¤‡æ˜¯å¦å·²åˆ†é…IPv6åœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eip addr show tun0 \u003cspan class=\"p\"\u003e|\u003c/span\u003e grep inet6 \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"ç½‘ç»œæ¥å£ç®¡ç†ifconfig\"\u003eç½‘ç»œæ¥å£ç®¡ç†ï¼ˆifconfigï¼‰\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig -a\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ¿€æ´»æŒ‡å®šæ¥å£(å¦‚ eth0)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig eth0 up\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å…³é—­æŒ‡å®šæ¥å£(å¦‚ eth0)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig eth0 down\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ·»åŠ  IP åœ°å€ï¼Œä¾‹å¦‚æ·»åŠ  IP åœ°å€ä¸º 192.168.2.100 çš„ç½‘å¡ eth0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig eth0 192.168.2.100 netmask 255.255.255.0 up\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ é™¤ IP åœ°å€ï¼Œä¾‹å¦‚åˆ é™¤ç½‘å¡ eth0 ä¸Šçš„ IP åœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig eth0 0.0.0.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¯ç”¨æˆ–ç¦ç”¨å¹¿æ’­åœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig eth0 broadcast 192.168.2.255 up\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig eth0 -broadcast\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# è®¾ç½®ç½‘å¡ mtu å¤§å°ä¸º 9000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig eth0 mtu \u003cspan class=\"m\"\u003e9000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¢åŠ ä¸€ä¸ªè™šæ‹Ÿç½‘ç»œæ¥å£ eth0:1ï¼Œå¹¶é…ç½® IP åœ°å€ä¸º 192.168.2.100\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eifconfig eth0:1 192.168.2.100 netmask 255.255.255.0 up\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"è·¯ç”±ç®¡ç†route\"\u003eè·¯ç”±ç®¡ç†ï¼ˆrouteï¼‰\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºå½“å‰è·¯ç”±è¡¨\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eroute -n\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ·»åŠ é»˜è®¤è·¯ç”±\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eroute add default gw 192.168.2.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ é™¤é»˜è®¤è·¯ç”±\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eroute del default\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¢åŠ ä¸€ä¸ªåˆ°ç›®æ ‡ç½‘ç»œçš„é™æ€è·¯ç”±\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eroute add -net 192.168.100.0 netmask 255.255.255.0 gw 192.168.2.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ é™¤é™æ€è·¯ç”±\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eroute del -net 192.168.100.0 netmask 255.255.255.0 gw 192.168.2.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ¸…é™¤æ‰€æœ‰è·¯ç”±ç¼“å­˜é¡¹\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eroute flush cache\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æŸ¥çœ‹ IP åœ°å€å¯¹åº”ç½‘å¡æ¥å£çš„ MAC åœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003earping -I eth0 192.168.2.1\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"dns-è§£ænslookup-å’Œ-dig\"\u003eDNS è§£æï¼ˆnslookup å’Œ digï¼‰\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ä½¿ç”¨åŸŸåæœåŠ¡å™¨è§£æåŸŸå\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enslookup www.example.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æŒ‡å®šåŸŸåæœåŠ¡å™¨ï¼Œå¹¶è§£æåŸŸå\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enslookup www.example.com 8.8.8.8\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æŸ¥è¯¢DNSåœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003edig example.com +nssearch\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æŸ¥è¯¢æ‰€æœ‰çš„ NS è®°å½•\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003edig example.com NS\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æŸ¥è¯¢æŸä¸ªåŸŸåçš„ MX è®°å½•\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003edig example.com MX\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"ç½‘ç»œè¯Šæ–­å·¥å…·ping-å’Œ-traceroute\"\u003eç½‘ç»œè¯Šæ–­å·¥å…·ï¼ˆping å’Œ tracerouteï¼‰\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºä¹‹é—´çš„è¿é€šæ€§ï¼ŒæŸ¥çœ‹ç½‘ç»œæ˜¯å¦å¯è¾¾\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eping 192.168.2.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ping å‘½ä»¤çš„é«˜çº§é€‰é¡¹ï¼Œæ§åˆ¶å‘é€çš„æ•°æ®åŒ…æ•°é‡ã€å¤§å°å’Œæ—¶é—´é—´éš”ç­‰å‚æ•°\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eping -c \u003cspan class=\"m\"\u003e5\u003c/span\u003e -s \u003cspan class=\"m\"\u003e100\u003c/span\u003e -i \u003cspan class=\"m\"\u003e1\u003c/span\u003e 192.168.2.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºæ•°æ®åŒ…åœ¨ç½‘ç»œä¸Šçš„ä¼ è¾“è·¯å¾„ï¼Œæ£€æµ‹ç½‘ç»œæ•…éšœ\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etraceroute www.google.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºæ¯ä¸€è·³æ‰€ç»è¿‡çš„è·¯ç”±å™¨åç§°å’Œ IP åœ°å€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etraceroute -n www.google.com\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"ç½‘ç»œæµé‡åˆ†æå·¥å…·tcpdump-å’Œ-wireshark\"\u003eç½‘ç»œæµé‡åˆ†æå·¥å…·ï¼ˆtcpdump å’Œ wiresharkï¼‰\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ç›‘å¬æŒ‡å®šçš„ç½‘ç»œæ¥å£ä¸Šçš„æ•°æ®åŒ…ï¼Œæ˜¾ç¤ºæ¯ä¸ªæ•°æ®åŒ…çš„è¯¦ç»†ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etcpdump -i eth0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# ç›‘å¬æŒ‡å®šç«¯å£ä¸Šçš„æ•°æ®åŒ…\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etcpdump port \u003cspan class=\"m\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºä»æŒ‡å®šæºåœ°å€åˆ°ç›®æ ‡åœ°å€çš„æ‰€æœ‰ç½‘ç»œæµé‡\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etcpdump src 192.168.2.100 and dst 192.168.2.200\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºæ‰€æœ‰ IP æµé‡ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°æ–‡ä»¶ tcp.pcap ä¸­ï¼Œä»¥ä¾¿ä½¿ç”¨ Wireshark åˆ†æ\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etcpdump -i eth0 -w tcp.pcap ip\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å›¾å½¢åŒ–çš„ç½‘ç»œåè®®åˆ†æå·¥å…·ï¼Œç”¨äºåˆ†æç½‘ç»œæµé‡\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewireshark\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"å…¶ä»–å‘½ä»¤\"\u003eå…¶ä»–å‘½ä»¤\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºç½‘ç»œè¿æ¥çŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enetstat -an\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤º TCP/IP é…ç½®å‚æ•°\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esysctl net.ipv4.tcp_*\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# è®¾ç½® TCP/IP å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½® SYN æ”»å‡»ä¿æŠ¤\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esysctl -w net.ipv4.tcp_syncookies\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# é‡æ–°åŠ è½½ /etc/resolv.conf æ–‡ä»¶\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esystemd-resolve --flush-caches\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ˜¾ç¤ºå½“å‰ DNS æœåŠ¡å™¨\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esystemd-resolve --status \u003cspan class=\"p\"\u003e|\u003c/span\u003e grep \u003cspan class=\"s1\"\u003e\u0026#39;DNS Servers\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# é‡å¯ç½‘ç»œ\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esystemctl restart NetworkManager\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Linux ç½‘ç»œé…ç½®å¸¸ç”¨å‘½ä»¤"},{"content":"Quick Setup å®‰è£…å·¥å…· å®‰è£…ä¸¤ä¸ªç½‘ç»œç®¡ç†å·¥å…·ç”¨äºå»ºç«‹ç½‘æ¡¥ä»¥åŠè™šæ‹Ÿç½‘å¡ï¼š\n# å®‰è£…è™šæ‹Ÿç½‘æ¡¥å·¥å…· sudo apt install bridge-utils -y # UMLï¼ˆUser-mode linuxï¼‰å·¥å…· sudo apt install uml-utilities -y é…ç½®è„šæœ¬ qemu-ifup å°†ä¸‹é¢çš„è„šæœ¬ä¿å­˜ä¸ºæ–‡ä»¶ qemu-ifupï¼Œå¹¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼š\nä¸ºäº†æ–¹ä¾¿å¤åˆ¶è„šæœ¬ï¼Œåœ¨ confluence é¡µé¢æä¾›äº†è„šæœ¬å†…å®¹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ã€‚\nmkdir -p /etc/qemu mv qemu-ifup /etc/qemu \u0026amp;\u0026amp; mv qemu-ifdown /etc/qemu sudo chmod +x qemu-ifup sudo chmod +x qemu-ifdown å› ä¸ºç½‘å¡ä¿¡æ¯ä¸å®¹æ˜“å®šä½ï¼Œå¯èƒ½ä¸€å°æœºå™¨æœ‰å¤šä¸ªç½‘å¡ï¼Œæ‰€ä»¥ä¸æ–¹ä¾¿ç”¨è„šæœ¬è·å–ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹ã€‚å°†ä¸‹é¢çš„NICå€¼ä¿®æ”¹ä¸ºå®¿ä¸»æœºå¯ä»¥ä¸Šç½‘çš„ç½‘å¡åç§°ã€‚å¯ä»¥é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹ã€‚\n#!/bin/bash # è®¾ç½®é»˜è®¤ç½‘å¡ä¿¡æ¯ NIC=enp2s0 # è®¾ç½®ç”¨æˆ·å USER_NAME=user # è®¾ç½®ç½‘æ¡¥åç§° BRIDGE=br0 # è®¾ç½®ç½‘ç»œä¿¡æ¯ NIC_IP=$(ifconfig $NIC | grep \u0026#34;inet\\b\u0026#34; | awk \u0026#39;{print $2}\u0026#39;) NIC_NETMAST=$(ifconfig $NIC | grep \u0026#34;inet\\b\u0026#34; | awk \u0026#39;{print $4}\u0026#39;) NIC_BROADCAST=$(ifconfig $NIC | grep \u0026#34;inet\\b\u0026#34; | awk \u0026#39;{print $6}\u0026#39;) NETMASK=255.255.240.0 # è®¾ç½®é»˜è®¤ç½‘å…³åœ°å€ GATEWAY=10.12.192.1 # è·å–å®¿ä¸»æœºç½‘å¡MACåœ°å€ï¼Œå› ä¸ºåˆ›å»ºçš„ç½‘æ¡¥MACåœ°å€æ˜¯éšæœºçš„ï¼Œ # æ— æ³•æ¥å…¥å…¬å¸ï¼Œéœ€è¦ä»å¼€å‘æœºç½‘å¡å°†å…¶MACåœ°å€èµ‹å€¼ç»™ç½‘æ¡¥ MAC=$(ifconfig $NIC | grep \u0026#34;ether\\b\u0026#34; | awk \u0026#39;{print $2}\u0026#39;) # æ£€æŸ¥ç½‘æ¡¥æ˜¯å¦å·²åˆ›å»ºï¼Œå·²åˆ›å»ºå°±å¿½ç•¥ function check_bridge() { echO \u0026#34;Check bridge...\u0026#34; if brctl show | grep \u0026#34;^$BRIDGE\u0026#34; \u0026amp;\u0026gt; /dev/null; then return 1 else return 0 fi } # åˆ›å»ºç½‘æ¡¥ function create_bridge() { echo \u0026#34;Start Create bridge...\u0026#34; brctl addbr \u0026#34;$BRIDGE\u0026#34; brctl addif \u0026#34;$BRIDGE\u0026#34; \u0026#34;$NIC\u0026#34; ifconfig br0 0.0.0.0 promisc up dhclient $BRIDGE } # ifconfig \u0026#34;$BRIDGE\u0026#34; \u0026#34;$NIC_IP\u0026#34; netmask \u0026#34;$NIC_NETMAST\u0026#34; broadcast \u0026#34;$NIC_BROADCAST\u0026#34; hw ether \u0026#34;$MAC\u0026#34; promisc up # å¯ç”¨IPè½¬å‘ function enable_ip_forward() { echo 1 \u0026gt; /proc/sys/net/ipv4/ip_forward } # è®¾ç½®ç½‘æ¡¥ function setup_bridge() { check_bridge \u0026#34;$BRIDGE\u0026#34; if [ $? -eq 0 ]; then create_bridge fi enable_ip_forward } if [ -n \u0026#34;$1\u0026#34; ]; then setup_bridge echo \u0026#34;Creating $1...\u0026#34; tunctl -t \u0026#34;$1\u0026#34; -u \u0026#34;$USER_NAME\u0026#34; ifconfig \u0026#34;$1\u0026#34; 0.0.0.0 up echo \u0026#34;Adding $1 to $BRIDGE...\u0026#34; brctl addif \u0026#34;$BRIDGE\u0026#34; \u0026#34;$1\u0026#34; sleep 5 ifconfig \u0026#34;$BRIDGE\u0026#34; hw ether \u0026#34;$MAC\u0026#34; promisc up exit 0 else echo \u0026#34;Error: no interface specified.\u0026#34; exit 1 fi qemu-ifdown ä»¥ä¸‹æ˜¯qemu-ifdownè„šæœ¬ï¼Œç”¨äºåœ¨å…³é—­ QEMU æ—¶å…³é—­è™šæ‹Ÿç½‘å¡ï¼Œå°†å…¶ä»ç½‘æ¡¥ä¸­ç§»é™¤ï¼Œåˆ é™¤è™šæ‹Ÿç½‘å¡ã€‚\n#!/bin/bash # è®¾ç½®ç½‘æ¡¥åç§° BRIDGE=br0 if [ -n \u0026#34;$1\u0026#34; ]; then # å°†tapè®¾å¤‡ä»ç½‘æ¡¥ä¸­ç§»é™¤ brctl delif ${BRIDGE} $1 # å…³é—­tapè®¾å¤‡ ip link link $1 down # åˆ é™¤tapè®¾å¤‡ ip link del \u0026#34;$1\u0026#34; tunctl -d \u0026#34;$1\u0026#34; exit 0 else echo \u0026#34;Error: no interface specified\u0026#34; exit 1 fi å°†ç³»ç»Ÿé•œåƒå¤åˆ¶ä¸€ä»½å¹¶ä¿®æ”¹æ–‡ä»¶åï¼ŒQEMU ä¸èƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªé•œåƒå¯åŠ¨ä¸¤ä¸ªè™šæ‹Ÿæœºã€‚\ncp openEuler-22.09-riscv64-qemu.qcow2 openEuler-22.09-riscv64-qemu-vm1.qcow2 éœ€è¦ä¿®æ”¹å¯åŠ¨è„šæœ¬ä¸­çš„é•œåƒæ–‡ä»¶åï¼Œä»¥åŠå¯åŠ¨å‚æ•°ï¼Œå°†driveä»¥åŠcmdå˜é‡çš„å†…å®¹è¦†ç›–ä¸ºä¸‹é¢çš„å†…å®¹ï¼Œä¿®æ”¹macä¸ºåˆ†é…ç»™è‡ªå·±çš„è™šæ‹Ÿæœºçš„ MAC åœ°å€ï¼Œscriptä¸ºä¸Šé¢çš„è„šæœ¬qemu-ifupçš„è·¯å¾„ã€‚\n# è¯¥è„šæœ¬ç”¨äºå¯åŠ¨VM0 drive=\u0026#34;openEuler-22.09-riscv64-qemu.qcow2\u0026#34; .... cmd=\u0026#34;qemu-system-riscv64 \\ -nographic -machine virt \\ -smp \u0026#34;$vcpu\u0026#34; -m \u0026#34;$memory\u0026#34;G \\ -bios \u0026#34;$fw\u0026#34; \\ -drive file=\u0026#34;$drive\u0026#34;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,script=/etc/qemu/qemu-ifup,downscript=/etc/qemu/qemu-ifdown \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet\u0026#34; ä»¥sudoæƒé™å¯åŠ¨è„šæœ¬ï¼š\nsudo ./preview_start_vm0.sh ä»¥ä¸‹ä¸ºé…ç½® VM1 è¿‡ç¨‹ï¼ŒVM1 çš„å¯åŠ¨è„šæœ¬ä¸ VM0 çš„å¯åŠ¨è„šæœ¬ç±»ä¼¼ï¼Œåªéœ€è¦ä¿®æ”¹driveä»¥åŠMACï¼Œå¿…é¡»ä¿è¯MACä¸ VM0 çš„MACä¸åŒã€‚\n# è¯¥è„šæœ¬ç”¨äºå¯åŠ¨VM1 drive=\u0026#34;openEuler-22.09-riscv64-qemu.qcow2\u0026#34; .... cmd=\u0026#34;qemu-system-riscv64 \\ -nographic -machine virt \\ -smp \u0026#34;$vcpu\u0026#34; -m \u0026#34;$memory\u0026#34;G \\ -bios \u0026#34;$fw\u0026#34; \\ -drive file=\u0026#34;$drive\u0026#34;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet,mac=80:d4:09:62:cd:3c \\ -netdev tap,id=tapnet,script=/etc/qemu/qemu-ifup,downscript=/etc/qemu/qemu-ifdown \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet\u0026#34; ç½‘ç»œé€šä¿¡æµ‹è¯• å½“å‰ç½‘ç»œçŠ¶æ€å¦‚ä¸‹ï¼š\nHOST:10.12.192.177 VM0:10.12.193.53 VM1:10.12.193.101 HOST \u0026ndash;\u0026gt; VM0 # user @ ubuntu18 in ~/openeuler/openEuler2209 [18:41:54] $ ping -c 3 10.12.193.101 PING 10.12.193.101 (10.12.193.101) 56(84) bytes of data. 64 bytes from 10.12.193.101: icmp_seq=1 ttl=64 time=1.37 ms 64 bytes from 10.12.193.101: icmp_seq=2 ttl=64 time=0.897 ms 64 bytes from 10.12.193.101: icmp_seq=3 ttl=64 time=0.890 ms --- 10.12.193.101 ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2002ms rtt min/avg/max/mdev = 0.890/1.055/1.378/0.228 ms Host \u0026ndash;\u0026gt; VM1 çš„æµ‹è¯•ç»“æœä¸ Host \u0026ndash;\u0026gt; VM0 çš„æµ‹è¯•ç»“æœç›¸åŒã€‚\nVM0 \u0026ndash;\u0026gt; HOST [root@openEuler-riscv64 ~]# ping -c 3 10.12.193.53 PING 10.12.193.53 (10.12.193.53) 56(84) bytes of data. 64 bytes from 10.12.193.53: icmp_seq=1 ttl=64 time=0.716 ms 64 bytes from 10.12.193.53: icmp_seq=2 ttl=64 time=1.74 ms 64 bytes from 10.12.193.53: icmp_seq=3 ttl=64 time=1.81 ms --- 10.12.193.53 ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2009ms rtt min/avg/max/mdev = 0.716/1.424/1.812/0.501 ms VM1 \u0026ndash;\u0026gt; Host çš„æµ‹è¯•ç»“æœä¸ Host \u0026ndash;\u0026gt; VM0 çš„æµ‹è¯•ç»“æœç›¸åŒã€‚\nVM1 \u0026ndash;\u0026gt; VM0 [root@openEuler-riscv64 ~]# ping -c 3 10.12.193.53 PING 10.12.193.53 (10.12.193.53) 56(84) bytes of data. 64 bytes from 10.12.193.53: icmp_seq=1 ttl=64 time=0.716 ms 64 bytes from 10.12.193.53: icmp_seq=2 ttl=64 time=1.74 ms 64 bytes from 10.12.193.53: icmp_seq=3 ttl=64 time=1.81 ms --- 10.12.193.53 ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2009ms rtt min/avg/max/mdev = 0.716/1.424/1.812/0.501 ms VM0 \u0026ndash;\u0026gt; VM1 ä¸ VM1 \u0026ndash;\u0026gt; VM0 çš„æµ‹è¯•ç»“æœç›¸åŒã€‚\nVM0 \u0026ndash;\u0026gt; github [root@openEuler-riscv64 ~]# ping -c 4 github.com PING github.com (192.30.255.113) 56(84) bytes of data. 64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=1 ttl=46 time=221 ms 64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=2 ttl=46 time=277 ms 64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=3 ttl=46 time=216 ms 64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=4 ttl=46 time=218 ms --- github.com ping statistics --- 4 packets transmitted, 4 received, 0% packet loss, time 3014ms rtt min/avg/max/mdev = 215.984/232.733/276.593/25.374 ms HOST \u0026ndash;\u0026gt; github # user @ ubuntu18 in ~/openeuler/openEuler2209 [17:59:40] $ ping -c 3 github.com PING github.com (192.30.255.113) 56(84) bytes of data. 64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=1 ttl=46 time=218 ms 64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=2 ttl=46 time=216 ms 64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=3 ttl=46 time=216 ms --- github.com ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2002ms rtt min/avg/max/mdev = 216.252/217.087/218.409/0.945 ms åŸç†æ¢ç©¶ (Ongoing) Step by Step è§£æ æŸ¥çœ‹ä¸€ä¸‹ç½‘ç»œæ¥å£ä¿¡æ¯ï¼š\nifconfig enp3s0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 10.12.192.173 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::a00:27ff:fe32:e709 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether 08:00:27:32:e7:09 txqueuelen 1000 (Ethernet) RX packets 6017 bytes 5412928 (5.4 MB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 1979 bytes 179467 (179.4 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10\u0026lt;host\u0026gt; loop txqueuelen 1000 (Local Loopback) RX packets 125 bytes 10142 (10.1 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 125 bytes 10142 (10.1 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 åˆ›å»ºä¸€ä¸ªåä¸ºbr0çš„ç½‘æ¡¥\nsudo brctl addbr br0 å°†ç½‘æ¡¥ä¸å®¿ä¸»æœºçš„ç½‘å¡ç»‘å®š\nsudo brctl addif br0 enp3s0 å¯ç”¨ br0 æ¥å£ï¼Œå¹¶ä» DHCP æœåŠ¡å™¨è·å¾— IP åœ°å€\nsudo ifconfig br0 0.0.0.0 promisc up sudo dhclient br0 æŸ¥çœ‹è™šæ‹Ÿç½‘æ¡¥åˆ—è¡¨\nsudo brctl show br0 bridge name\tbridge id\tSTP enabled interfaces br0\t8000.e0be0388eec9 no enp3s0 æŸ¥çœ‹ br0 çš„å„æ¥å£ä¿¡æ¯\nsudo brctl showstp br0 br0 bridge id\t8000.e0be0388eec9 designated root\t8000.e0be0388eec9 root port\t0\tpath cost 0 max age\t20.00s forward delay\t15.00s hello time\t2.00s ageing time\t300.00s hello timer\t0.00s\t\u0026lt;tbd\u0026gt; forward timer\t0.00s\t\u0026lt;tbd\u0026gt; ageing timer\t0.00s\t\u0026lt;tbd\u0026gt; enp3s0 (1) port id\t8001\tlocal state forwarding designated root\t8000.08002732e709 path cost\t100 designated bridge\t8000.08002732e709 designated port\t8001 forward delay\t15.00s hello time\t2.00s max age\t20.00s ageing time\t300.00s priority\t128 å½“å‰ç½‘ç»œæ‹“æ‰‘ï¼š\n+-----------------------------------+ | Internet | +-----------------------------------+ | | v +---------------------------------------------------------+ | enp3s0 (Host Interface) | | IP: 10.12.192.173 | +---------------------------------------------------------+ | v +---------------------------------------------------------+ | br0 (Bridge) | | IP: 10.12.192.173 | +---------------------------------------------------------+ åˆ›å»ºä¸€ä¸ª tap0 æ¥å£ç”¨äºVM0ä½¿ç”¨ï¼Œå…è®¸ user ç”¨æˆ·è®¿é—®\nsudo tunctl -t tap0 -u user åœ¨è™šæ‹Ÿç½‘æ¡¥ä¸­å¢åŠ  tap0 æ¥å£\nsudo brctl addif br0 tap0 å¯ç”¨ tap0 æ¥å£ï¼Œæ··æ‚æ¨¡å¼\nsudo ifconfig tap0 0.0.0.0 promisc up å°†ç½‘æ¡¥çš„ MAC åœ°å€ä¿®æ”¹ä¸ºå®¿ä¸»æœºçš„ MAC åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥æ¥å…¥å…¬å¸ç½‘ç»œäº†ã€‚å¦åˆ™å› ä¸ºå†…ç½‘çš„ MAC åœ°å€è¿‡æ»¤ï¼Œæ— æ³•æ¥å…¥å…¬å¸ç½‘ç»œã€‚\nifconfig br0 hw ether 08:00:27:32:e7:09 promisc up æŸ¥çœ‹è™šæ‹Ÿç½‘æ¡¥åˆ—è¡¨\n$ sudo brctl show br0 bridge name\tbridge id\tSTP enabled interfaces br0\t8000.08002732e709 no enp3s0 tap0 æŸ¥çœ‹å½“å‰çš„ç½‘æ¡¥çŠ¶æ€ï¼š\n$ sudo brctl showstp br0 br0 bridge id\t8000.08002732e709 designated root\t8000.08002732e709 root port\t0\tpath cost\t0 max age\t20.00\tbridge max age\t20.00 hello time\t2.00\tbridge hello time\t2.00 forward delay\t15.00\tbridge forward delay\t15.00 ageing time\t300.00 hello timer\t0.00\ttcn timer\t0.00 topology change timer\t0.00\tgc timer\t7.75 flags\tenp2s0 (1) port id\t8001\tstate\tforwarding designated root\t8000.08002732e709\tpath cost\t4 designated bridge\t8000.08002732e709\tmessage age timer\t0.00 designated port\t8001\tforward delay timer\t0.00 designated cost\t0\thold timer\t0.00 flags\ttap0 (2) port id\t8002\tstate\tdisabled designated root\t8000.08002732e709\tpath cost\t100 designated bridge\t8000.08002732e709\tmessage age timer\t0.00 designated port\t8002\tforward delay timer\t0.00 designated cost\t0\thold timer\t0.00 flags\ttap0å¯èƒ½å¤„äºdisabledçŠ¶æ€ï¼Œå› ä¸ºè¿˜æ²¡æœ‰è™šæ‹Ÿæœºä½¿ç”¨å®ƒã€‚å¯åŠ¨è™šæ‹Ÿæœºä¹‹åä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°forwardingçŠ¶æ€ã€‚\nå½“å‰ç½‘ç»œæ‹“æ‰‘ï¼š\n+-----------------------------------+ | Internet | +-----------------------------------+ | | v +---------------------------------------------------------+ | enp3s0 (Host Interface) | | IP: 10.12.192.173 | +---------------------------------------------------------+ | v +---------------------------------------------------------+ | br0 (Bridge) | | IP: 10.12.192.173 | | +---------------------+ | | | tap0 | | | | IP: 0.0.0.0 | | +---------------------------------------------------------+ å¯åŠ¨ QEMU\ncmd=\u0026#34;qemu-system-riscv64 \\ -nographic -machine virt \\ -smp \u0026#34;$vcpu\u0026#34; -m \u0026#34;$memory\u0026#34;G \\ -bios \u0026#34;$fw\u0026#34; \\ -drive file=\u0026#34;$drive\u0026#34;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,ifname=tap0,script=no,downscript=no \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet\u0026#34; å…³æ³¨è¿™æ®µè„šæœ¬çš„ç½‘ç»œé…ç½®éƒ¨åˆ†ï¼š\n-device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,ifname=tap0,script=no,downscript=no \\ è¯¦ç»†è§£é‡Šå¯ä»¥æŸ¥çœ‹â€œQEMU ç½‘ç»œè™šæ‹ŸåŒ–ç« èŠ‚â€ï¼Œç¬¬ä¸€ä¸ªå‚æ•° -device virtio-net-device å®šä¹‰äº†åä¸º virtio-net-device çš„ç½‘ç»œè®¾å¤‡ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ä¸€ä¸ªåä¸º tapnet çš„ç½‘ç»œè®¾å¤‡ä¸Šï¼ŒæŒ‡å®šå®ƒçš„ MAC åœ°å€ä¸º e0:be:03:88:54:e8ã€‚ç¬¬äºŒä¸ªå‚æ•° -netdev tap ç”¨äºæŒ‡å®šåç«¯å®ç°ï¼Œä½¿ç”¨tapæ–¹å¼ï¼Œå¹¶ä¸”æŒ‡å®šå”¯ä¸€ ID ä¸ºtapnetç”±-deviceå‚æ•°ä¸­çš„å­å‚æ•°netdevä½¿ç”¨ï¼ŒæŒ‡å®šifname=tap0ï¼Œè¡¨ç¤ºä½¿ç”¨tap0æ¥å£ä½œä¸ºè™šæ‹ŸåŒ–çš„åç«¯ã€‚script=noå’Œdownscript=noè¡¨ç¤ºä¸ä½¿ç”¨è„šæœ¬æ¥å¯åŠ¨å’Œå…³é—­tap0æ¥å£ã€‚\næŸ¥çœ‹å½“å‰çš„ç½‘ç»œæ¥å£ä¿¡æ¯ifconfigï¼š\nbr0: flags=4419\u0026lt;UP,BROADCAST,RUNNING,PROMISC,MULTICAST\u0026gt; mtu 1500 inet 10.12.192.173 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::e2be:3ff:fe88:eec9 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether 08:00:27:32:e7:09 txqueuelen 1000 (Ethernet) RX packets 861148 bytes 310707296 (310.7 MB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 17556062 bytes 1516515693 (1.5 GB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 enp2s0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 10.12.192.173 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::4964:61f8:420d:6781 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether 08:00:27:32:e7:09 txqueuelen 1000 (Ethernet) RX packets 894523 bytes 325547917 (325.5 MB) RX errors 0 dropped 1926 overruns 0 frame 0 TX packets 17563568 bytes 1516947572 (1.5 GB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10\u0026lt;host\u0026gt; loop txqueuelen 1000 (Local Loopback) RX packets 1654925876 bytes 134933568498 (134.9 GB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 1654925876 bytes 134933568498 (134.9 GB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 tap0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet6 fe80::f8ae:85ff:fed7:f9cd prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether fa:ae:85:d7:f9:cd txqueuelen 1000 (Ethernet) RX packets 557 bytes 44913 (44.9 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 7165 bytes 832171 (832.1 KB) TX errors 0 dropped 55942 overruns 0 carrier 0 collisions 0 å½“å‰ç½‘ç»œæ‹“æ‰‘ï¼š\n+-----------------------------------+ | Internet | +-----------------------------------+ | | v +---------------------------------------------------------+ | enp3s0 (Host Interface) | | IP: 10.12.192.173 | +---------------------------------------------------------+ | v +---------------------------------------------------------+ | br0 (Bridge) | | IP: 10.12.192.173 | | +---------------------+ | | | tap0 | | | | IP: 0.0.0.0 | | +---------------------------|-----------------------------+ | v +---------------------------|-----------------------------+ | | eth0 | | | | IP:10.12.193.53 | | | +---------------------+ | | VM0 (QEMU) | +---------------------------------------------------------+ æŸ¥çœ‹å½“å‰çš„ç½‘æ¡¥çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ° tap0 å·²ç»å¤„äº forwarding çŠ¶æ€ï¼š\n$ sudo brctl showstp br0 br0 bridge id\t8000.08002732e709 designated root\t8000.08002732e709 enp2s0 (1) port id\t8001\tstate\tforwarding designated root\t8000.08002732e709\tpath cost\t4 designated bridge\t8000.08002732e709\tmessage age tap0 (2) port id\t8002\tstate\tforwarding designated root\t8000.08002732e709\tpath cost\t100 designated bridge\t8000.08002732e709\tmessage age æ·»åŠ  VM1 è¿‡ç¨‹å°±å¿½ç•¥äº†ï¼Œæ·»åŠ åçš„ç½‘ç»œæ‹“æ‰‘å¦‚ä¸‹ï¼š\n+-----------------------------------+ | Internet | +-----------------------------------+ | | v +---------------------------------------------------------+ | enp3s0 (Host Interface) | | IP: 10.12.192.173 | +---------------------------------------------------------+ | v +---------------------------------------------------------+ | br0 (Bridge) | | IP: 10.12.192.173 | | +---------------------+ +-------------------+ | | | tap0 | | tap1 | | | | IP: 0.0.0.0 | | IP: 0.0.0.0 | | +---------------|-------------------------|---------------+ | | v v +---------------|----------+ +-----------|---------------+ | | eth0 | | | | eth0 | | | | IP:10.12.193.53 | | | | IP:10.12.193.101 | | | +---------------------+| | +-------------------+ | | VM0 (QEMU) | | VM1 (QEMU) | +--------------------------+ +---------------------------+ QEMU ç½‘ç»œè™šæ‹ŸåŒ– QEMU å¯¹äºç½‘ç»œçš„è™šæ‹ŸåŒ–éœ€è¦ä¸¤ä¸ªå‚æ•°æ¥æŒ‡å®šï¼š\nå…¶ä¸­ä¸€ä¸ªç”¨äºæŒ‡å®šç½‘ç»œçš„å‰ç«¯é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Guest ä¸­çš„å®ç° å¦ä¸€ä¸ªç”¨äºæŒ‡å®šç½‘ç»œçš„åç«¯å®ç°ï¼Œä¹Ÿå°±æ˜¯åœ¨ Host ä¸­çš„å®ç°ã€‚ QEMU æ”¯æŒä¸¤ç§æ–¹å¼æ¥å®ç°ç½‘ç»œè™šæ‹ŸåŒ–ï¼Œä¸€ç§æ˜¯æ—§ç‰ˆæœ¬ä¸Šä½¿ç”¨çš„å‚æ•°ä¸º -net é…åˆ -net ï¼Œå¦ä¸€ç§æ˜¯åœ¨æ–°ç‰ˆæœ¬ä¸Šæ”¯æŒçš„ -device é…åˆ -netdev ã€‚QEMU çš„å‘å±•è¶‹åŠ¿æ˜¯å€¾å‘äºç”¨ -device ä¸€ç§å‘½ä»¤æ ¼å¼æ¥è™šæ‹Ÿå‡ºä¸åŒçš„è®¾å¤‡ï¼Œå…¶ä¸­åŒ…æ‹¬ç½‘å¡è®¾å¤‡ã€‚\n-net \u0026amp; -net (legacy) è™½ç„¶ä»ç„¶æ”¯æŒï¼Œä½†æ˜¯é€æ­¥è¢«åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨ã€‚\næˆ‘ä»¬ä»¥ä»¥ä¸‹å‘½ä»¤ä¸ºä¾‹ï¼Œæ¥è¯´æ˜ -net å’Œ -net çš„ä½¿ç”¨æ–¹æ³•ï¼š\nvcpu=8 memory=8 drive=\u0026#34;openEuler-22.09-V1-riscv64-qemu.qcow2\u0026#34; fw=\u0026#34;fw_payload_oe_qemuvirt.elf\u0026#34; cmd=\u0026#34;qemu-system-riscv64 \\ -nographic -machine virt \\ -smp \u0026#34;$vcpu\u0026#34; -m \u0026#34;$memory\u0026#34;G \\ -kernel \u0026#34;$fw\u0026#34; \\ -bios none \\ -drive file=\u0026#34;$drive\u0026#34;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -net nic,mac=52:54:00:12:34:56 \\ -net tap,ifname=tap0,script=no,downscript=no \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet \\ -append \u0026#39;root=/dev/vda1 rw console=ttyS0 swiotlb=1 loglevel=3 systemd.default_timeout_start_sec=600 selinux=0 highres=off mem=\u0026#34;$memory_append\u0026#34;M earlycon\u0026#39; \u0026#34; å…¶ä¸­è¿™ä¸¤ä¸ªå‚æ•°å³å®ç°äº†è™šæ‹ŸåŒ–ç½‘ç»œï¼š\n-net nic,mac=52:54:00:12:34:56 \\ -net tap,ifname=tap0,script=no,downscript=no \\ ç¬¬ä¸€ä¸ªå‚æ•° -net nic ç”¨äºæŒ‡å®šä¸Šè¿°æ‰€è¯´çš„å‰ç«¯é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Guest ä¸­çš„å®ç°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ é»˜è®¤çš„é©±åŠ¨ï¼Œè¿™ä¸ªé©±åŠ¨æ˜¯ QEMU ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿç½‘å¡è®¾å¤‡ï¼ŒæŒ‡å®šå®ƒçš„ MAC åœ°å€ä¸º 52:54:00:12:34:56ã€‚\nç¬¬äºŒä¸ªå‚æ•° -net tap ç”¨äºæŒ‡å®šåç«¯å®ç°ï¼Œä¹Ÿå°±æ˜¯ Host ä¸­çš„å®ç°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ tap é©±åŠ¨ï¼Œå®ƒçš„ç½‘å¡åç§°ä¸º tap0ï¼Œå¹¶ä¸”ä¸æ‰§è¡Œä»»ä½•è„šæœ¬ã€‚è¿™ä¸¤ä¸ªå‚æ•°çš„ç»„åˆå°±å®ç°äº†è™šæ‹ŸåŒ–ç½‘ç»œã€‚\næ›´å¤šç¤ºä¾‹ï¼š\n-net nic,model=virtio \\ -net tap,ifname=tap3,script=/ect/qemu/qemu-ifup,downscript=no \\ ç¬¬ä¸€ä¸ªå‚æ•° -net nic ç”¨äºæŒ‡å®šä¸Šè¿°æ‰€è¯´çš„å‰ç«¯é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Guest ä¸­çš„å®ç°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ virtio é©±åŠ¨ï¼Œè¿™ä¸ªé©±åŠ¨æ˜¯ QEMU ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿç½‘å¡è®¾å¤‡ã€‚ç¬¬äºŒä¸ªå‚æ•° -net tap ç”¨äºæŒ‡å®šåç«¯å®ç°ï¼Œä¹Ÿå°±æ˜¯ Host ä¸­çš„å®ç°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ tap é©±åŠ¨ï¼Œå®ƒçš„ç½‘å¡åç§°ä¸º tap3ï¼Œå¹¶ä¸”æ‰§è¡Œè„šæœ¬ /ect/qemu/qemu-ifupã€‚\nè§£é‡Š/ect/qemu/qemu-ifup è¯¥è„šæœ¬ç”¨äºåˆ›å»ºç½‘æ¡¥ï¼Œå°†ç½‘æ¡¥ä¸å®¿ä¸»æœºçš„ç½‘å¡ç»‘å®šï¼Œç„¶åå°†è™šæ‹Ÿç½‘å¡ç»‘å®šåˆ°ç½‘æ¡¥ä¸Šï¼Œè¿™æ ·è™šæ‹Ÿæœºå°±å¯ä»¥é€šè¿‡ç½‘æ¡¥ä¸å®¿ä¸»æœºé€šä¿¡ï¼Œå®¿ä¸»æœºä¹Ÿå¯ä»¥é€šè¿‡ç½‘æ¡¥ä¸è™šæ‹Ÿæœºé€šä¿¡ã€‚\n-device \u0026amp; -netdev ï¼ˆRecommendedï¼‰ è¿™æ˜¯æ–°ç‰ˆæœ¬çš„ QEMU æ”¯æŒçš„å‘½ä»¤æ ¼å¼ï¼Œä¹Ÿæ˜¯ QEMU æœªæ¥çš„å‘å±•è¶‹åŠ¿ï¼Œæˆ‘ä»¬ä»¥ä»¥ä¸‹å‘½ä»¤ä¸ºä¾‹ï¼Œæ¥è¯´æ˜ -device å’Œ -netdev çš„ä½¿ç”¨æ–¹æ³•ï¼š\nqemu-system-riscv64 \\ -nographic -machine virt \\ -smp \u0026#34;$vcpu\u0026#34; -m \u0026#34;$memory\u0026#34;G \\ -bios \u0026#34;$fw\u0026#34; \\ -drive file=\u0026#34;$drive\u0026#34;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,ifname=tap0,script=~/qemu-script/qemu-ifup,downscript=no \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet å…¶ä¸­è¿™ä¸¤ä¸ªå‚æ•°å³å®ç°äº†è™šæ‹ŸåŒ–ç½‘ç»œï¼š\n-device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,ifname=tap0,script=~/qemu-script/qemu-ifup,downscript=no \\ ç¬¬ä¸€ä¸ªå‚æ•° -device virtio-net-device ç”¨äºæŒ‡å®šä¸Šè¿°æ‰€è¯´çš„å‰ç«¯é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Guest ä¸­çš„å®ç°ï¼Œå®šä¹‰äº†åä¸º virtio-net-device çš„ç½‘ç»œè®¾å¤‡ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ä¸€ä¸ªåä¸º tapnet çš„ç½‘ç»œè®¾å¤‡ä¸Šï¼ŒæŒ‡å®šå®ƒçš„ MAC åœ°å€ä¸º e0:be:03:88:54:e8ã€‚\nç¬¬äºŒä¸ªå‚æ•° -netdev tap ç”¨äºæŒ‡å®šåç«¯å®ç°ï¼Œä½¿ç”¨tapæ–¹å¼ï¼Œå¹¶ä¸”æŒ‡å®šå”¯ä¸€ ID ä¸ºtapnetç”±-deviceå‚æ•°ä¸­çš„å­å‚æ•°netdevä½¿ç”¨ã€‚ç½‘å¡åç§°ä¸ºtap0å¹¶ä¸”æ‰§è¡Œè„šæœ¬ ~/qemu-script/qemu-ifupã€‚\n-netdev å‚æ•°ä¸­ id çš„ä½¿ç”¨ -netdev å‚æ•°ä¸­çš„ id ç”¨äºæŒ‡å®šå”¯ä¸€çš„ IDï¼Œè¿™ä¸ª ID ä¼šè¢« -device å‚æ•°ä¸­çš„å­å‚æ•° netdev ä½¿ç”¨ï¼Œè¿™æ · -device å‚æ•°å°±çŸ¥é“è¦å°†å‰ç«¯é©±åŠ¨è¿æ¥åˆ°å“ªä¸ªåç«¯å®ç°ä¸Šäº†ã€‚id å¯ä»¥è‡ªå®šä¹‰ä»»æ„å”¯ä¸€å­—ç¬¦ä¸²å¦‚-netdev tap,id=testå¯¹åº”-device virtio-net-device,netdev=test\næ›´å¤šç¤ºä¾‹ï¼š\n-device virtio-net-pci,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,script=no,downscript=no \\ ç¬¬ä¸€ä¸ªå‚æ•° -device virtio-net-pci å®šä¹‰äº†åä¸º virtio-net-pci çš„ç½‘ç»œè®¾å¤‡ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ä¸€ä¸ªåä¸º tapnet çš„ç½‘ç»œè®¾å¤‡ä¸Šï¼ŒæŒ‡å®šå®ƒçš„ MAC åœ°å€ä¸º e0:be:03:88:54:e8ã€‚\nç¬¬äºŒä¸ªå‚æ•°ï¼Œä»”ç»†è§‚å¯Ÿä¼šå‘ç°ï¼Œæˆ‘ä»¬æ²¡æœ‰å®šä¹‰é“¾æ¥åˆ°åç«¯ç½‘å¡çš„åç§°ifnameï¼Œè¿™æ˜¯å› ä¸ºä»¥tapæ¨¡å¼å¯åŠ¨ QEMU æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºtapè®¾å¤‡ï¼Œå…·ä½“ç½‘å¡åç§°æ ¹æ®å½“å‰å®¿ä¸»æœºçš„ç½‘å¡æƒ…å†µè€Œå®šï¼Œé»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªåä¸ºtap0çš„ç½‘å¡ï¼Œå¦‚æœå¯åŠ¨äº†ä¸¤ä¸ªè™šæ‹Ÿæœºï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªè™šæ‹Ÿæœºçš„ç½‘å¡åç§°å°±æ˜¯tap1ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nåŒºåˆ† tap æ¨¡å¼ä¸ bridge æ¨¡å¼ æˆ‘ä»¬æœ‰æ—¶å€™ä¼šç”¨ä»¥ä¸‹çš„å‘½ä»¤è¿›è¡Œ QEMU è™šæ‹Ÿæœºæ¡¥æ¥ç½‘ç»œçš„é…ç½®ï¼š\n-device virtio-net-device,netdev=bridgenet,mac=52:54:00:12:34:57 \\ -netdev bridge,ifname=br0,id=bridgenet è¿™ä¹Ÿèƒ½ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¡¥æ¥ç½‘ç»œï¼Œè¿™æ˜¯å› ä¸ºå®ƒå’Œ -netdev tap çš„å·¥ä½œæ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ -netdev bridge çš„ç®€åŒ–å†™æ³•ï¼Œqemu-bridge-helper åœ¨èƒŒåæ›¿æˆ‘ä»¬åšäº† tap è®¾å¤‡åˆ›å»ºä»¥åŠå°† tap è®¾å¤‡åŠ å…¥æ¡¥æ¥å£çš„æ‰€æœ‰äº‹æƒ…ã€‚\næ·»åŠ å¤šå¼ ç½‘å¡ å¦‚æœäº†è§£ä¸Šè¿°å†…å®¹ï¼Œæ·»åŠ å¤šå¼ ç½‘å¡å°±ååˆ†å®¹æ˜“å®ç°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å†æ·»åŠ ä¸€å¯¹ -device å’Œ -netdev å‚æ•°å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nqemu-system-riscv64 \\ -nographic -machine virt \\ -smp \u0026#34;$vcpu\u0026#34; -m \u0026#34;$memory\u0026#34;G \\ -bios \u0026#34;$fw\u0026#34; \\ -drive file=\u0026#34;$drive\u0026#34;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet0,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet0,script=/etc/qemu/qemu-ifup,downscript=/etc/qemu/qemu-ifdown \\ -device virtio-net-device,netdev=tapnet1,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet1,script=/etc/qemu/qemu-ifup,downscript=/etc/qemu/qemu-ifdown \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ª -device å‚æ•°æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„ IDï¼Œè¿™ä¸ª ID ä¼šè¢« -netdev å‚æ•°ä¸­çš„å­å‚æ•° netdev ä½¿ç”¨ï¼Œè¿™æ · -device å‚æ•°å°±çŸ¥é“è¦å°†å‰ç«¯é©±åŠ¨è¿æ¥åˆ°å“ªä¸ªåç«¯å®ç°ä¸Šäº†ã€‚å¹¶ä¸”æ¯ä¸ª tap è®¾å¤‡åªèƒ½è¢«ä¸€ä¸ªè™šæ‹Ÿæœºä½¿ç”¨ï¼Œæ‰€ä»¥æ¯ä¸ªè™šæ‹Ÿæœºçš„ tap è®¾å¤‡åç§°ä¸èƒ½ç›¸åŒã€‚\nç™»å½•è™šæ‹ŸæœºæŸ¥çœ‹ç½‘å¡ä¿¡æ¯ï¼š\n[root@openEuler-riscv64 ~]# ifconfig eth0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 10.12.193.53 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::9e6:287b:30a2:574d prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether e0:be:03:88:54:e8 txqueuelen 1000 (Ethernet) RX packets 81 bytes 9871 (9.6 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 19 bytes 1735 (1.6 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 eth1: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 10.12.193.101 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::4fe0:9e1e:4681:52b7 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether 80:d4:09:62:cd:3c txqueuelen 1000 (Ethernet) RX packets 76 bytes 9471 (9.2 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 15 bytes 1708 (1.6 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10\u0026lt;host\u0026gt; loop txqueuelen 1000 (Local Loopback) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 ä¸åŒç½‘ç»œç­–ç•¥å·¥ä½œæ–¹å¼ NAT ç½‘ç»œæ¨¡å¼ NAT ç½‘ç»œä»¥è·¯ç”±å™¨çš„ NAT åŠŸèƒ½ä¸ºåŸç†ï¼Œå…è®¸è™šæ‹Ÿæœºé€šè¿‡å…±äº«ä¸»æœºçš„ IP åœ°å€è®¿é—®äº’è”ç½‘ï¼Œä½†è™šæ‹Ÿæœºä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ã€‚é€šè¿‡ç«¯å£è½¬å‘å¯ä»¥å®ç°è™šæ‹Ÿæœºä¹‹é—´çš„è¿æ¥ã€‚ æ¡¥æ¥ç½‘ç»œæ¨¡å¼ æ¡¥æ¥ç½‘ç»œæ¨¡å¼é€šè¿‡è™šæ‹Ÿäº¤æ¢æœºè¿æ¥è™šæ‹Ÿæœºå’Œä¸»æœºï¼Œä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥é€šè¿‡å±€åŸŸç½‘è®¿é—®äº’è”ç½‘ï¼Œå¹¶å…è®¸è™šæ‹Ÿæœºä¹‹é—´ç›´æ¥é€šä¿¡ã€‚ å†…éƒ¨ç½‘ç»œæ¨¡å¼ å†…éƒ¨ç½‘ç»œæ¨¡å¼ä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥åˆ›å»ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„ç½‘ç»œï¼Œè™šæ‹Ÿæœºä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚ ä»…ä¸»æœºç½‘ç»œæ¨¡å¼ ä»…ä¸»æœºç½‘ç»œæ¨¡å¼å…è®¸è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥é€šä¿¡ï¼Œå¹¶ä¸”ä¸ä¸»æœºä¹‹é—´ä¹Ÿå¯ä»¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚ VM \u0026lt;\u0026gt; VM VM â†’ HOST HOST â†’ VM VM â†’ Internet Internet â†’ VM ç½‘ç»œåœ°å€è½¬æ¢ NAT Ã— âˆš Ã— âˆš Ã— NAT ç½‘ç»œ âˆš âˆš Ã— âˆš Ã— Bridged Adapter æ¡¥æ¥ç½‘å¡ âˆš âˆš âˆš âˆš âˆš TUN/TAP ç½‘ç»œè®¾å¤‡ TAP å±äº Linux å†…æ ¸æ”¯æŒçš„ä¸€ç§è™šæ‹ŸåŒ–ç½‘ç»œè®¾å¤‡ï¼Œè¿˜æœ‰ TUN ä¹Ÿå±äºè¿™ç§è®¾å¤‡ï¼Œå®ƒä»¬å®Œå…¨ç”±è½¯ä»¶æ¨¡æ‹Ÿå®ç°ï¼ŒTUN/TAP è´Ÿè´£åœ¨å†…æ ¸åè®®æ ˆå’Œç”¨æˆ·è¿›ç¨‹ä¹‹é—´ä¼ é€åè®®æ•°æ®å•å…ƒã€‚TUN å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œè€Œ TAP å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ŒTUN è´Ÿè´£ä¸åº”ç”¨ç¨‹åºäº¤æ¢ IP æ•°æ®åŒ…ï¼Œè€Œ TAP ä¸åº”ç”¨ç¨‹åºäº¤æ¢ä»¥å¤ªç½‘å¸§ã€‚æ‰€ä»¥ TUN ç»å¸¸æ¶‰åŠè·¯ç”±ï¼Œè€Œ TAP å¸¸ç”¨äºç½‘ç»œæ¡¥æ¥ã€‚\nSSH è¿œç¨‹ç™»å½•è™šæ‹Ÿæœº å®¿ä¸»æœºä»»æ„ä¸‹ç›®å½•æ‰§è¡Œï¼š\n$ ssh-keygen -t rsa Generating public/private rsa key pair. Enter file in which to save the key (/home/user/.ssh/id_rsa): host2vm0_id_irsa Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in host2vm0_id_irsa. Your public key has been saved in host2vm0_id_irsa.pub. The key fingerprint is: SHA256:OkWcw+R3x6Z2mzeYQuG033H3N9qIeym3TZKzz6YD8tQ user@ubuntu18 The key\u0026#39;s randomart image is: +---[RSA 2048]----+ | . | | = . . | | B .o. + | | . oo.o+ | | S ++ ..o| | o ..+.E=o=| | o +..B+=+| | . oo=@o+| | o=**= | +----[SHA256]-----+ ä¸€ç›´å›è½¦ç¡®å®šï¼Œç”Ÿæˆå…¬ç§é’¥ï¼Œä¿å­˜åœ¨~/.sshç›®å½•ä¸‹ã€‚\næˆ‘åœ¨å®¿ä¸»æœºä¸Šç”Ÿæˆçš„å…¬ç§é’¥åç§°ä¸ºï¼Œåˆ†åˆ«æ˜¯host2vm0_id_rsa,host2vm0_id_rsa.pubæ–¹ä¾¿æˆ‘è®°å¿†ã€‚å¦‚æœä¸€ç›´å›è½¦ï¼Œé‚£ä¹ˆç”Ÿæˆçš„å…¬ç§é’¥åç§°ä¸ºid_rsaï¼Œid_rsa.pubã€‚\nå°†å…¬é’¥å¤åˆ¶åˆ°è™šæ‹Ÿæœº VM0 ä¸Šï¼Œä»¥å½“å‰è™šæ‹Ÿæœº VM0 çš„ IPï¼š10.12.193.53 ä¸ºä¾‹ã€‚\n$ ssh-copy-id 10.12.193.53 # è¾“å…¥å¯†ç  /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed /usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys user@10.12.193.53\u0026#39;s password: Number of key(s) added: 1 Now try logging into the machine, with: \u0026#34;ssh \u0026#39;10.12.193.53\u0026#39;\u0026#34; and check to make sure that only the key(s) you wanted were added. ç„¶åå°±å¯ä»¥ç›´æ¥å…å¯†ç ç™»å½•äº†ï¼š\nssh user@10.12.193.53 Fixed Problems (Ongoing) cannot ioctl tunsetiff tap0 device or resource busy (errno=16) failed to initialize tap device: Operation not permitted åŒç±»å‹é”™è¯¯ï¼šfailed to create TAP device: Operation not permittedã€‚å› ä¸ºåˆ›å»ºè™šæ‹Ÿè®¾å¤‡ tap éœ€è¦ root æƒé™ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ sudo å‘½ä»¤ã€‚æ‰§è¡Œ QEMU å¯åŠ¨æ˜¯éœ€è¦æ·»åŠ  sudoã€‚\nQEMU è™šæ‹Ÿæœºå¯åŠ¨åç½‘å¡å¤„äº DOWN çŠ¶æ€ï¼Œæ— æ³•è·å– IP æŸ¥çœ‹æ˜¯å¦æ˜¯ MAC åœ°å€é…ç½®é”™è¯¯ï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤æ£€æŸ¥ï¼š\nsudo ifconfig eth0 up SIOCSIFFLAGS: Cannot assign requested address å¦‚æœæŠ¥é”™ï¼Œå‚è€ƒä¸‹é¢ç« èŠ‚SIOCSIFFLAGS: Cannot assign requested addressè§£å†³æ–¹æ³•è¿›è¡Œè§£å†³ã€‚\nè™šæ‹Ÿæœºå¯ä»¥ ping é€šå¤–ç½‘ï¼Œå®¿ä¸»æœºæ— æ³• ping å¤–ç½‘ è¿™ç§æƒ…å†µè¯´æ˜åŸºæœ¬ç½‘ç»œæ²¡æœ‰é—®é¢˜ï¼Œåªæ˜¯ DNS è§£ææœ‰é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹/etc/resolv.confæ–‡ä»¶è§£å†³ã€‚\næµ·å® DNS æœåŠ¡å™¨åœ°å€ï¼š10.12.2.21 å’Œ 10.12.2.22ï¼Œæˆ‘çš„æƒ…å†µæ˜¯åªèƒ½ ping 10.12.2.21ï¼Œå¯ä»¥é€‰æ‹©è‡ªå·±èƒ½ ping é€šçš„ DNS æœåŠ¡å™¨åœ°å€ã€‚å¦‚æœæ— æ³• ping é€šï¼Œè¯´æ˜é—®é¢˜ä¸åœ¨è¿™ï¼Œéœ€è¦è‡ªè¡Œè§£å†³ã€‚\n# ä¿®æ”¹ DNS æœåŠ¡å™¨åœ°å€ sudo vim /etc/resolv.conf # æ·»åŠ ä»¥ä¸‹å†…å®¹ nameserver 10.12.2.21 nameserver 10.12.2.22 ç½‘ç»œé…ç½®é”™è¯¯ï¼Œå¦‚ä½•æ¢å¤é…ç½®ä¹‹å‰çš„çŠ¶æ€ æœ€ç®€å•çš„æ–¹å¼ - é‡å¯ï¼Œå› ä¸ºæ‰€æœ‰æ“ä½œéƒ½æ˜¯å‘½ä»¤è¡Œé…ç½®ï¼Œéƒ½æ˜¯ä¸´æ—¶é…ç½®ï¼Œå¯ä»¥ç›´æ¥é‡å¯è§£å†³ã€‚\næ—¢ç„¶æœ‰è¿™ä¸€å°èŠ‚ï¼Œè¯´æ˜è‚¯å®šæœ‰æ—¶å€™ä¸æ–¹ä¾¿ç›´æ¥é‡å¯ï¼Œé‚£ä¹ˆå°±éœ€è¦æ‰‹åŠ¨æ¢å¤é…ç½®ä¹‹å‰çš„çŠ¶æ€ã€‚ä½†æ˜¯èƒ½å¤Ÿæ¢å¤çš„å‰ææ˜¯éœ€è¦è®°å¾—ä¹‹å‰çš„ç½‘å¡ IP åœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³ã€å¹¿æ’­åœ°å€ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åœ¨å±€åŸŸç½‘é‡Œï¼Œå¯èƒ½åªæœ‰ IP ä¸åŒï¼Œå…¶ä»–ä¿¡æ¯å¦‚æœæ²¡è®°ä½å¯ä»¥æŸ¥çœ‹å…¶ä»–åŒäº‹çš„ç½‘å¡é…ç½®å³å¯ã€‚\n# å°†ç½‘æ¡¥ç»‘å®šçš„ç½‘å¡ä»ç½‘æ¡¥ä¸Šç§»é™¤ sudo brctl delif br0 enp2s0 sudo brctl delif br0 tap0 # é…ç½®å®¿ä¸»æœºç½‘å¡ä¿¡æ¯ï¼Œå¿…é¡»ä¸€å­—ä¸å·®ï¼Œä¿æŒå’Œä¹‹å‰ä¸€æ¨¡ä¸€æ ·æ‰èƒ½æ¢å¤ sudo ip addr add 10.12.192.173/20 broadcast 10.12.207.255 dev enp2s0 # å¿…é¡»è®¾ç½®ç½‘å…³ sudo ip route add default via 10.12.192.1 dev enp2s0 # é‡å¯ç½‘ç»œç®¡ç†å™¨ systemctl restart NetworkManager -netdev tap,id=tapnet,script=/qemu-script/qemu-ifup,:network script /qemu-script/qemu-ifup failed with status 256 å¯èƒ½åŸå›  1: qemu-ifup è„šæœ¬æ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œéœ€è¦æ·»åŠ æ‰§è¡Œæƒé™ã€‚\nchmod +x qemu-ifup å¯èƒ½åŸå›  2: qemu-ifup è·¯å¾„ä¸å¯¹ï¼Œå¿…é¡»æ”¾åˆ°/etc/qemu/ç›®å½•ä¸‹ã€‚\nmkdir -p /etc/qemu mv qemu-ifup /etc/qemu \u0026amp;\u0026amp; mv qemu-ifdown /etc/qemu sudo chmod +x qemu-ifup sudo chmod +x qemu-ifdown SIOCSIFFLAGS: Cannot assign requested address sudo ifconfig eth0 up SIOCSIFFLAGS: Cannot assign requested address ä¸€èˆ¬ç”±äº MAC åœ°å€é…ç½®é”™è¯¯å¯¼è‡´ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ MAC åœ°å€ä¸ºå¤šæ’­åœ°å€è§£å†³ã€‚\nsudo ifconfig enp2s0 hw ether 00:11:22:33:44:55 é‡å¯ç½‘å¡\nsudo ifconfig enp2s0 down sudo ifconfig enp2s0 up MAC åœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸­çš„æœ€åä¸€ä½ï¼ˆå³ç¬¬ 7 ä½ï¼‰ç”¨äºæ ‡è¯†è¯¥åœ°å€æ˜¯å•æ’­ï¼Œå¤šæ’­è¿˜æ˜¯å¹¿æ’­åœ°å€ã€‚å¦‚æœè¿™ä¸ªä½è®¾ç½®ä¸º 0ï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå•æ’­åœ°å€ï¼›å¦‚æœè®¾ç½®ä¸º 1ï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¤šæ’­æˆ–å¹¿æ’­åœ°å€ã€‚\nä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šä¸Šè¿°æ¯ä¸ª MAC åœ°å€æ˜¯å¦æ˜¯å•æ’­åœ°å€ï¼š\ncd:c2:05:84:c8:2c - å•æ’­åœ°å€ 13:7b:49:fc:a6:aa - å•æ’­åœ°å€ 8f:aa:42:29:e8:68 - å•æ’­åœ°å€ 00:11:22:33:44:55 æ˜¯å¤šæ’­åœ°å€ã€‚\nqemu -device drive with 0 bus=0 unit=0 exists è¿™ä¸ªé”™è¯¯é€šå¸¸æ„å‘³ç€æ‚¨å°è¯•åœ¨ QEMU VM ä¸­æ·»åŠ ä¸€ä¸ªé‡å¤çš„è®¾å¤‡ã€‚\nå¦‚æœæ‚¨å·²ç»åœ¨ VM ä¸­æ·»åŠ äº†é©±åŠ¨å™¨ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°æ­¤é—®é¢˜ã€‚æ‚¨å¯ä»¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸¤ä¸ªå…·æœ‰ç›¸åŒ bus å’Œ unit çš„è®¾å¤‡ï¼ˆåœ¨æ­¤æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ 0ï¼‰ã€‚è§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•æ˜¯åˆ é™¤é‡å¤è®¾å¤‡æˆ–æ›´æ”¹å…¶é…ç½®ä»¥åŒ…æ‹¬å”¯ä¸€çš„ bus å’Œ unitã€‚\nå¦‚æœæ‚¨æ²¡æœ‰æ„å›¾æ·»åŠ é‡å¤çš„è®¾å¤‡ï¼Œåœ¨è¿è¡Œ QEMU ä¹‹å‰ï¼Œæ‚¨å¯èƒ½éœ€è¦æ£€æŸ¥æ‚¨çš„å‘½ä»¤è¡Œï¼Œä»¥ç¡®ä¿æ­£ç¡®è®¾ç½®äº† -drive é€‰é¡¹ã€‚è¯·æ³¨æ„ï¼Œå½“ä½¿ç”¨ -device æ·»åŠ è®¾å¤‡æ—¶ï¼Œæ‚¨è¿˜åº”è¯¥é¿å…ä½¿ç”¨ -drive é€‰é¡¹ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½å¼•èµ·å†²çªã€‚\nå¦‚æœæ‚¨éœ€è¦è¿›ä¸€æ­¥å¸®åŠ©ï¼Œå»ºè®®æä¾›å®Œæ•´çš„ QEMU å‘½ä»¤å’Œå‚æ•°åˆ—è¡¨ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£é—®é¢˜å¹¶æä¾›æ›´è¯¦ç»†çš„å»ºè®®ã€‚\nå‚è€ƒèµ„æ–™ QEMU ç½‘ç»œé…ç½® // å›´åŸ ç†è§£ Linux è™šæ‹Ÿç½‘å¡è®¾å¤‡ tun/tap çš„ä¸€åˆ‡ | éªé©¬é‡‘é¾™ QEMU ç½‘ç»œé…ç½®ä¸€æŠŠæ¢­ | CataLpa\u0026rsquo;s Site qemu è™šæ‹Ÿæœºä¸å¤–éƒ¨ç½‘ç»œçš„é€šä¿¡ li_Jiejun çš„åšå®¢-CSDN åšå®¢ å®‰è£… qemu-kvm ä»¥åŠé…ç½®æ¡¥æ¥ç½‘ç»œ QEMU ä¸­çš„ç½‘ç»œè™šæ‹ŸåŒ–é…ç½®_ç¨‹åºçŒ¿ Ricky çš„æ—¥å¸¸å¹²è´§çš„åšå®¢-CSDN åšå®¢ Nginx Directory QEMU ç½‘ç»œé…ç½® - æµ™æ—é¾™å“¥ - åšå®¢å›­ ã€qemuã€‘qemu ç½‘ç»œé…ç½® - çŸ¥ä¹ QEMU ç½‘ç»œé…ç½® // å›´åŸ å®‰è£… qemu-kvm ä»¥åŠé…ç½®æ¡¥æ¥ç½‘ç»œ åœ¨ qemu ä¸­ä½¿ç”¨æ¡¥æ¥ç½‘ç»œ - T^3 Blog ä¸º QEMU é…ç½®ç½‘æ¡¥ä¸Šç½‘ | Yanick\u0026rsquo;s Wiki ç†è§£ Linux è™šæ‹Ÿç½‘å¡è®¾å¤‡ tun/tap çš„ä¸€åˆ‡ | éªé©¬é‡‘é¾™ QEMU ç½‘ç»œé…ç½®ä¸€æŠŠæ¢­ | CataLpa\u0026rsquo;s Site é™„å½• ","permalink":"https://lifeislife.cn/posts/qemu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/","summary":"\u003ch1 id=\"quick-setup\"\u003eQuick Setup\u003c/h1\u003e\n\u003ch2 id=\"å®‰è£…å·¥å…·\"\u003eå®‰è£…å·¥å…·\u003c/h2\u003e\n\u003cp\u003eå®‰è£…ä¸¤ä¸ªç½‘ç»œç®¡ç†å·¥å…·ç”¨äºå»ºç«‹ç½‘æ¡¥ä»¥åŠè™šæ‹Ÿç½‘å¡ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å®‰è£…è™šæ‹Ÿç½‘æ¡¥å·¥å…·\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install bridge-utils -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# UMLï¼ˆUser-mode linuxï¼‰å·¥å…·        \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install uml-utilities  -y   \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"é…ç½®è„šæœ¬\"\u003eé…ç½®è„šæœ¬\u003c/h2\u003e\n\u003ch3 id=\"qemu-ifup\"\u003eqemu-ifup\u003c/h3\u003e\n\u003cp\u003eå°†ä¸‹é¢çš„è„šæœ¬ä¿å­˜ä¸ºæ–‡ä»¶ \u003ccode\u003eqemu-ifup\u003c/code\u003eï¼Œå¹¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼š\u003c/p\u003e","title":"QEMU è™šæ‹Ÿæœºç½‘ç»œé…ç½®"},{"content":"Dotfiles å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨è½¯ä»¶çš„æ—¶å€™ï¼Œè½¯ä»¶ä¸ºäº†å­˜å‚¨æˆ‘ä»¬ä¸ªäººåå¥½è®¾ç½®è€Œå»ºç«‹çš„ä¸€ä¸ªä»¥ . å¼€å¤´çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œvim çš„é…ç½®æ–‡ä»¶å°±æ˜¯ .vimrcï¼Œzsh çš„é…ç½®æ–‡ä»¶å°±æ˜¯ .zshrcã€‚è¿™äº›æ–‡ä»¶é€šå¸¸å­˜å‚¨åœ¨ç”¨æˆ·çš„ home ç›®å½•ä¸­ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸åŒçš„ç”µè„‘ä¸Šå·¥ä½œæ—¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç›¸åŒçš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·æ¥ç®¡ç†è¿™äº›æ–‡ä»¶ã€‚æˆ–è€…åœ¨ä¸€å°æ–°ç”µè„‘ä¸Šæƒ³å¿«é€Ÿé…ç½®å¥½ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·æ¥ç®¡ç†è¿™äº›æ–‡ä»¶ã€‚Yadm å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™äº›éœ€æ±‚ã€‚\nå®‰è£… yadm å®‰è£… å®‰è£… yadm éå¸¸ç®€å•ï¼Œåªéœ€åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\nsudo apt-get install yadm åˆå§‹åŒ– yadm ä»“åº“ åˆ›å»ºä¸€ä¸ªæ–°çš„ yadm ä»“åº“å¾ˆå®¹æ˜“ï¼Œåªéœ€åœ¨ home ç›®å½•ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nyadm init ç°åœ¨ï¼Œyadm å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½çš„ git ä»“åº“ã€‚\nå­˜å‚¨åº“ä½ç½®/home/nic/.local/share/yadm/\næ·»åŠ  dotfile æ–‡ä»¶ è¦å°†ç°æœ‰çš„ dotfile æ·»åŠ åˆ° yadm ä»“åº“ä¸­ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nyadm add ~/.zshrc ä¸€æ—¦æ‚¨å®Œæˆäº†å¯¹è¦æ·»åŠ çš„æ–‡ä»¶çš„æ›´æ”¹å¹¶å°†å®ƒä»¬æ·»åŠ åˆ° yadm ä»“åº“ä¸­ï¼Œæ‚¨éœ€è¦æäº¤å®ƒä»¬ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nyadm commit -m \u0026#34;Add .zshrc file to yadm repository\u0026#34; å»ºç«‹è¿œç¨‹ä»“åº“ ä½¿ç”¨ yadm è¿˜å¯ä»¥å°† dotfile æ–‡ä»¶åŒæ­¥åˆ° GitHub ç­‰ Git æ‰˜ç®¡æœåŠ¡ä¸­ã€‚\nç™»å½• Githubï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º dotfile çš„ä»“åº“ã€‚ç°åœ¨ï¼Œæ‚¨éœ€è¦å°†æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“è¿æ¥èµ·æ¥ã€‚è¦å°†æœ¬åœ°ä»“åº“è¿æ¥åˆ°è¿œç¨‹ä»“åº“ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nyadm remote add origin https://github.com/[ç”¨æˆ·å]/dotfile.git ç°åœ¨ yadm å·²ç»è¿æ¥åˆ°æ‚¨åœ¨ Github ä¸Šåˆ›å»ºçš„ä»“åº“ã€‚è¦å°†æœ¬åœ°ä»£ç ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nyadm push ä½¿ç”¨å¤šå°ç”µè„‘æ—¶å¦‚ä½•åŒæ­¥é…ç½® å‡è®¾éœ€è¦åœ¨å¤šä¸ªè®¡ç®—æœºä¹‹é—´å…±äº« dotfile æ–‡ä»¶ã€‚åªéœ€æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å³å¯ï¼š\nåœ¨å¦ä¸€å°è®¡ç®—æœºä¸Šå®‰è£… yadm å¹¶åˆå§‹åŒ– yadm ä»“åº“ã€‚ å°†è¿œç¨‹ä»“åº“å…‹éš†åˆ°è¯¥è®¡ç®—æœºçš„ yadm ä»“åº“ä¸­ï¼š yadm clone https://github.com/[ç”¨æˆ·å]/dotfile.git æ­¤æ—¶ï¼Œæ‚¨çš„ dotfile æ–‡ä»¶åº”åœ¨è®¡ç®—æœºä¸Šè‡ªåŠ¨æ›´æ–°ã€‚ æ‰§è¡Œå®Œ clone å‘½ä»¤åå®é™…ä¸Šå°±æ˜¯ yadm ä¼šæŠŠè¿œç¨‹ä»“åº“çš„æ–‡ä»¶éƒ½æ‹·è´åˆ°æœ¬åœ°ã€‚\nå¦‚æœæœ¬åœ°æœ‰ä¿®æ”¹å’Œè¿œç¨‹æœ‰å†²çªæ€ä¹ˆåŠ å¦‚æœæœ¬åœ°æœ‰ä¿®æ”¹ï¼Œè¿œç¨‹ä¹Ÿæœ‰ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå†²çªã€‚è¿™æ—¶å€™éœ€è¦å…ˆè§£å†³å†²çªï¼Œç„¶åå†æäº¤ã€‚\næ¯å°ç”µè„‘çš„é…ç½®ä¸ä¸€æ ·æ€ä¹ˆåŠ æ¯”å¦‚æˆ‘ä»¬ä¼šåœ¨.zshrcä¸­é…ç½®ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œä½†æ˜¯æ¯å°ç”µè„‘çš„ç¯å¢ƒå˜é‡å¯èƒ½ä¸ä¸€æ ·ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨.zshrcä¸­æ·»åŠ ä¸€äº›åˆ¤æ–­ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç®€å•çš„åˆ¤æ–­ä¸€ä¸‹ä¸»æœºåï¼Œç„¶åæ ¹æ®ä¸»æœºåæ¥åŠ è½½ä¸åŒçš„é…ç½®ã€‚\nif [ $HOSTNAME = \u0026#34;xxx\u0026#34; ]; then # xxxçš„é…ç½® elif [ $HOSTNAME = \u0026#34;yyy\u0026#34; ]; then # yyyçš„é…ç½® fi ä½†æœ‰ä¸€äº›é…ç½®æ–‡ä»¶å¯èƒ½ä¸æ”¯æŒè¿™æ ·çš„æ·»åŠ è¯­å¥ï¼Œæ¯”å¦‚.gitconfigï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ yadm çš„ Alternate Files åŠŸèƒ½è§£å†³ã€‚\nAlternate Files æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†åŒä¸€æ–‡ä»¶ä¸åŒç‰ˆæœ¬çš„åŠŸèƒ½ï¼Œæœ‰æ—¶åœ¨ä¸åŒçš„ä¸»æœºã€æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·éœ€è¦ä¸åŒçš„æ–‡ä»¶ã€‚Alternate Files å…è®¸ä½¿ç”¨åŒä¸€ä¸ªæ–‡ä»¶åå­—ï¼Œåœ¨æ–‡ä»¶ååæ·»åŠ ä¸€ä¸ªå¸¦æœ‰æ¡ä»¶çš„åç¼€ï¼Œä¾‹å¦‚##os.Linux,hostname.host1ï¼Œclass.workï¼Œyadm ä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„ç‰¹å®šæ¡ä»¶è‡ªåŠ¨é€‰æ‹©é€‚å½“çš„ç‰ˆæœ¬ï¼Œå¹¶åˆ›å»ºç¬¦å·é“¾æ¥ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„ç‰ˆæœ¬ï¼Œå®ƒå°†é€‰æ‹©é»˜è®¤ç‰ˆæœ¬ã€‚\nå°±ä»¥.gitconfigé…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨å…¬å¸çš„ç”µè„‘å’Œå®¶é‡Œçš„ç”µè„‘é…ç½®ä¸å¤ªä¸€æ ·ï¼Œæ¯”å¦‚å…¬å¸ä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼š\n[user] email = å…¬å¸é‚®ç®± name = å…¬å¸ç”¨æˆ·å åœ¨å®¶é‡Œä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼š\n[user] email = æ—¥å¸¸ä½¿ç”¨é‚®ç®± name = æ—¥å¸¸ä½¿ç”¨ç”¨æˆ·å é…ç½®æ–‡ä»¶ä¸æ”¯æŒæ¡ä»¶è¯­å¥ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡ç›´æ¥åœ¨åŒä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œå®Œæˆä¸åŒç¯å¢ƒçš„é…ç½®ã€‚è¿™å°±ç”¨åˆ°äº† Alternate Files åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å¤åˆ¶ä¸¤ä¸ª.gitconfigæ–‡ä»¶åé¢æ·»åŠ ä¸€ä¸ªæ¡ä»¶åç¼€ï¼Œæ¯”å¦‚.gitconfig##class.workï¼Œç„¶ååœ¨.gitconfig##class.workæ–‡ä»¶ä¸­æ·»åŠ å…¬å¸çš„é…ç½®ï¼Œ.gitconfigæ–‡ä»¶ä¸­æ·»åŠ å®¶é‡Œçš„é…ç½®ã€‚è¿™æ · yadm å°±ä¼šæ ¹æ®å½“å‰çš„ä¸»æœºåè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„é…ç½®æ–‡ä»¶ã€‚å¹¶æŠŠè¿™ä¸‰ä¸ªæ–‡ä»¶éƒ½åŠ å…¥åˆ° yadm ä»“åº“ä¸­ã€‚\nyadm add ~/.gitconfig yadm add ~/.gitconfig##class.work yadm add ~/.gitconfig##class.home é‚£ä¹ˆ yadm æ˜¯å¦‚ä½•å®ç°ä¸åŒç¯å¢ƒçš„åˆ‡æ¢å‘¢ï¼Ÿæˆ‘ä»¬è¿˜éœ€è¦è¿›ä¸€æ­¥é…ç½®ï¼Œæœ‰æ³¨æ„åˆ°æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶åä¸­çš„classå±æ€§å—ï¼Œè¿™æ˜¯ yadm æ”¯æŒçš„æ¡ä»¶å±æ€§ä¹‹ä¸€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡yadm configå‘½ä»¤æ¥é…ç½®å½“å‰ç”µè„‘çš„å±æ€§ã€‚æ¯”å¦‚æˆ‘ä»¬é…ç½®å…¬å¸ç”µè„‘çš„classå±æ€§ä¸ºworkï¼Œå®¶é‡Œçš„ç”µè„‘çš„classå±æ€§ä¸ºhomeã€‚\nyadm config local.class work æˆ‘ä»¬æ‰§è¡Œå®Œæ­¤å‘½ä»¤åï¼Œyadm ä¼šè‡ªåŠ¨ä¸º.gitconfigæ–‡ä»¶æ·»åŠ ä¸€ä¸ªè½¯é“¾æ¥ï¼Œé“¾æ¥åˆ°.gitconfig##class.workæ–‡ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å…¬å¸ç”µè„‘ä¸Šä½¿ç”¨å…¬å¸çš„é…ç½®äº†ã€‚å¦‚æœæˆ‘ä»¬åœ¨å®¶é‡Œçš„ç”µè„‘ä¸Šæ‰§è¡Œyadm config local.class homeï¼Œé‚£ä¹ˆ yadm ä¼šè‡ªåŠ¨ä¸º.gitconfigæ–‡ä»¶æ·»åŠ ä¸€ä¸ªè½¯é“¾æ¥ï¼Œé“¾æ¥åˆ°.gitconfig##class.homeæ–‡ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å®¶é‡Œçš„ç”µè„‘ä¸Šä½¿ç”¨å®¶é‡Œçš„é…ç½®äº†ã€‚\nyadm æ”¯æŒä»¥ä¸‹è¿™äº›æ¡ä»¶ï¼š\nå±æ€§ æ„ä¹‰ arch, a å¦‚æœå€¼åŒ¹é…æ¶æ„åˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ uname -m è®¡ç®—æ¶æ„ã€‚ class, c å¦‚æœå€¼åŒ¹é… local.class é…ç½®ï¼Œåˆ™æœ‰æ•ˆã€‚å¿…é¡»ä½¿ç”¨â€œyadm config local.class â€æ‰‹åŠ¨è®¾ç½® Classã€‚ default å½“æ²¡æœ‰å…¶ä»–å¤‡é€‰é¡¹æœ‰æ•ˆæ—¶æœ‰æ•ˆã€‚ distro, d å¦‚æœå€¼ä¸å‘è¡Œç‰ˆåŒ¹é…ï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ lsb_release -siæˆ–æ£€æŸ¥/etc/os-releaseæ¥è®¡ç®—åˆ†å¸ƒã€‚ distro_family, f å¦‚æœå€¼åŒ¹é…å‘è¡Œç‰ˆç³»åˆ—ï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡æ£€æŸ¥/etc/os-release ä¸­çš„ ID_LIKE è¡Œè®¡ç®—å‘è¡Œç‰ˆç³»åˆ—ã€‚ extension, e ä¸€ç§ç‰¹æ®Šçš„â€œæ¡ä»¶â€ï¼Œä¸å½±å“é€‰æ‹©è¿‡ç¨‹ã€‚å®ƒçš„ç›®çš„æ˜¯å…è®¸å¤‡é€‰æ–‡ä»¶ä»¥ç‰¹å®šæ‰©å±•åç»“å°¾ï¼Œä¾‹å¦‚ä½¿ç¼–è¾‘å™¨æ­£ç¡®çªå‡ºæ˜¾ç¤ºå†…å®¹ã€‚ hostname, h å¦‚æœå€¼åŒ¹é…çŸ­ä¸»æœºåï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ uname -nï¼Œå¹¶å»é™¤ä»»ä½•åŸŸæ¥è®¡ç®—ä¸»æœºåã€‚ osï¼Œo å¦‚æœå€¼ä¸æ“ä½œç³»ç»ŸåŒ¹é…ï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ uname -s è®¡ç®— OSã€‚* template, t å½“å€¼ä¸æ”¯æŒçš„æ¨¡æ¿å¤„ç†å™¨åŒ¹é…æ—¶æœ‰æ•ˆã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æ¨¡æ¿éƒ¨åˆ†ã€‚ user, u å¦‚æœå€¼åŒ¹é…å½“å‰ç”¨æˆ·ï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ id -u -n è®¡ç®—å½“å‰ç”¨æˆ·ã€‚ å†ä¸¾ä¸ªä¾‹å­ï¼Œä¸Šé¢ç”¨çš„ class æ¡ä»¶æ˜¯å¿…é¡»é€šè¿‡yadm config local.class \u0026lt;class\u0026gt;æ‰‹åŠ¨è®¾ç½®çš„ã€‚ä½†æ˜¯æœ‰ä¸€äº›æ¡ä»¶ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½® yadm å¯ä»¥è‡ªåŠ¨è¯†åˆ«ã€‚æ¯”å¦‚ os å±æ€§ã€‚æˆ‘ä»¬å°†.zshrcæ–‡ä»¶å¤åˆ¶ä¸¤ä»½ä»½ï¼Œå‘½åä¸º.zshrc##os.Linuxå’Œ.zshrc##os.Darwinï¼Œç„¶ååœ¨.zshrc##os.Linuxæ–‡ä»¶ä¸­æ·»åŠ ä¸€äº› Linux ç³»ç»Ÿçš„é…ç½®ï¼Œ.zshrc##os.Darwinæ–‡ä»¶ä¸­æ·»åŠ ä¸€äº› Mac ç³»ç»Ÿçš„é…ç½®ã€‚å¹¶æŠŠè¿™ä¸‰ä¸ªæ–‡ä»¶éƒ½åŠ å…¥åˆ° yadm ä»“åº“ä¸­ã€‚è¿™æ · yadm å°±ä¼šæ ¹æ®å½“å‰çš„ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„é…ç½®æ–‡ä»¶ã€‚\n","permalink":"https://lifeislife.cn/posts/%E4%BD%BF%E7%94%A8yadm%E7%AE%A1%E7%90%86%E5%B9%B6%E5%90%8C%E6%AD%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6dotfile/","summary":"\u003cp\u003eDotfiles å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨è½¯ä»¶çš„æ—¶å€™ï¼Œè½¯ä»¶ä¸ºäº†å­˜å‚¨æˆ‘ä»¬ä¸ªäººåå¥½è®¾ç½®è€Œå»ºç«‹çš„ä¸€ä¸ªä»¥ \u003ccode\u003e.\u003c/code\u003e å¼€å¤´çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œvim çš„é…ç½®æ–‡ä»¶å°±æ˜¯ \u003ccode\u003e.vimrc\u003c/code\u003eï¼Œzsh çš„é…ç½®æ–‡ä»¶å°±æ˜¯ \u003ccode\u003e.zshrc\u003c/code\u003eã€‚è¿™äº›æ–‡ä»¶é€šå¸¸å­˜å‚¨åœ¨ç”¨æˆ·çš„ home ç›®å½•ä¸­ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸åŒçš„ç”µè„‘ä¸Šå·¥ä½œæ—¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç›¸åŒçš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·æ¥ç®¡ç†è¿™äº›æ–‡ä»¶ã€‚æˆ–è€…åœ¨ä¸€å°æ–°ç”µè„‘ä¸Šæƒ³å¿«é€Ÿé…ç½®å¥½ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·æ¥ç®¡ç†è¿™äº›æ–‡ä»¶ã€‚Yadm å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™äº›éœ€æ±‚ã€‚\u003c/p\u003e","title":"ä½¿ç”¨ Yadm ç®¡ç†å¹¶åŒæ­¥é…ç½®æ–‡ä»¶ Dotfile"},{"content":" åŸºäºUbuntu 18.04ï¼ŒQEMU 8.0.2ï¼ŒOpenEuler 22.09\nå®‰è£…QEMU å®‰è£…åŸºç¡€ç¼–è¯‘å·¥å…· sudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl \\ gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev \\ libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev \\ libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev -y sudo add-apt-repository ppa:deadsnakes/ppa sudo apt install python3.8 python3-pip -y sudo apt install -f pip3 install meson ä¸‹è½½QEMU å»ºç«‹æ–‡ä»¶å¤¹ç”¨äºç¼–è¯‘ï¼š\ncd \u0026amp;\u0026amp; mkdir -p qemu-build å»ºç«‹æ–‡ä»¶å¤¹ç”¨äºå®‰è£…ï¼š\ncd \u0026amp;\u0026amp; mkdir -p /home/user/program/riscv64-qemu å¯ç™»å½•å®˜ç½‘å°†ç‰ˆæœ¬å·æ¢æˆæœ€æ–°ç‰ˆæœ¬å³å¯ï¼š\ncd qemu-build \u0026amp;\u0026amp; wget \u0026#34;https://download.qemu.org/qemu-8.0.2.tar.xz\u0026#34; tar -xf qemu-8.0.2.tar.xz --strip-components=1 å®‰è£…QEMU cd qemu-build \u0026amp;\u0026amp; ./configure --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu \\ --enable-kvm --enable-sdl \\ --prefix=/home/user/program/riscv64-qemu make install -j $(nproc) é…ç½®ç¯å¢ƒå˜é‡\necho \u0026#39;export QEMU_HOME=/home/user/program/riscv64-qemu\u0026#39; \u0026gt;\u0026gt; ~/.bashrc \u0026amp;\u0026amp; echo \u0026#39;export PATH=$QEMU_HOME/bin:$PATH\u0026#39; \u0026gt;\u0026gt; ~/.bashrc source ~/.bashrc ä¸‹è½½ OpenEuler RISC-V ç³»ç»Ÿé•œåƒ å»ºç«‹ç›®å½•ï¼š\ncd \u0026amp;\u0026amp; mkdir -p /home/user/openeuler æ ¹æ®è‡ªå·±çš„ç”¨æˆ·åä¿®æ”¹user\nä¸‹è½½OpenEuler 22.09ç‰ˆæœ¬ï¼Œä¸‹è½½ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶/home/user/openeulerã€‚å¦‚éœ€ä¸‹è½½å…¶ä»–ç‰ˆæœ¬è¯·è¿›å…¥å…¶ä»–ç›®å½•é€‰æ‹©ä¸‹è½½å³å¯ã€‚\nä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µè¿›å…¥é•œåƒç«™åˆ—è¡¨é€‰æ‹©ä¸‹è½½é€Ÿåº¦æ›´å¿«çš„é•œåƒç«™ä¸‹è½½\næœ€æ–°çš„23.03ç‰ˆæœ¬éœ€è¦åœ¨ä¸­ç§‘é™¢é•œåƒç«™ä¸‹è½½\næ–‡ä»¶è¯´æ˜ï¼š\nfw_payload_oe_qemuvirt.elf: åˆ©ç”¨ openSBI å°† kernel-5.10 çš„ image ä½œä¸º payload æ‰€åˆ¶ä½œçš„ QEMU å¯åŠ¨æ‰€éœ€æ–‡ä»¶ openEuler-22.09-qemu-xfce.qcow2.tar.zst: openEuler RISC-V QEMU GUI é•œåƒå‹ç¼©åŒ… preview_start_vm_xfce.sh: GUI è™šæ‹Ÿæœºå¯åŠ¨è„šæœ¬ openeuler-22.09-qemu.qcow2.tar.zst: openEuler RISC-V QEMU headless é•œåƒå‹ç¼©åŒ… preview_start_vm.sh: headless è™šæ‹Ÿæœºå¯åŠ¨è„šæœ¬ è§£å‹ï¼š\nsudo apt-get install zstd tar -I \u0026#39;zstdmt\u0026#39; -xvf openEuler-22.09-riscv64-qemu.qcow2.tar.zst æ‰§è¡Œå¯åŠ¨è„šæœ¬\nchmod +x preview_start_vm.sh bash preview_start_vm.sh ç™»å½•ç³»ç»Ÿ ç”¨æˆ·å: root é»˜è®¤å¯†ç : openEuler12#$ openEuler 22.09 Kernel 5.10.0 on an riscv64 4penEuler-riscv6 login: openEuler 22.09 Kernel 5.10.0 on an riscv64 openEuler-riscv64 login: root Password: Welcome to 5.10.0 System information as of time: Mon Jul 3 07:52:19 PM CST 2023 System load: 0.17 Processes: 117 Memory used: .6% Swap used: 0.0% Usage On: 6% Users online: 1 [root@openEuler-riscv64 ~]# ls [root@openEuler-riscv64 ~]# pwd è¿œç¨‹ç™»å½•ç³»ç»Ÿ ssh -p 12055 root@localhost é…ç½®ç³»ç»Ÿ ä»¥ä¸‹æ“ä½œå‡åœ¨rootç”¨æˆ·ä¸‹æ‰§è¡Œï¼Œå¦‚æœåˆ‡æ¢äº†ç”¨æˆ·ä¼šæœ‰æç¤ºã€‚å› ä¸ºç³»ç»Ÿåˆå§‹çŠ¶æ€æ²¡æœ‰æ™®é€šç”¨æˆ·ï¼Œä¹Ÿæ²¡æœ‰sudoï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨rootå®Œæˆä¸€äº›åŸºç¡€é…ç½®ã€‚\nä¿®æ”¹rootå¯†ç  åŸå¯†ç å¤ªå¤æ‚ï¼Œä¿®æ”¹ç®€å•å¯†ç \npasswd root # è¾“å…¥ä¸¤æ¬¡å¯†ç  æ·»åŠ æ™®é€šç”¨æˆ· # æ·»åŠ ç”¨æˆ· user useradd -s /bin/bash -d /home/user -m user passwd user # è¾“å…¥ä¸¤æ¬¡å¯†ç  # æ·»åŠ ç®¡ç†å‘˜æƒé™ usermod -aG wheel user ä¿®æ”¹æ—¶é—´ echo \u0026#34;NTP=ntp.aliyun.com\u0026#34; \u0026gt;\u0026gt; /etc/systemd/timesyncd.conf systemctl restart systemd-timesyncd.service æŸ¥çœ‹timesyncdè¿è¡ŒçŠ¶æ€ï¼š\nsystemctl status systemd-timesyncd.service dateå‘½ä»¤å¯æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ—¶é—´ã€‚éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸã€‚\næ—¶é—´åŠ¡å¿…æ­£ç¡®è®¾ç½®ï¼Œé”™è¯¯çš„æ—¶é—´ä¼šå½±å“è¯¸å¦‚httpsçš„TLSè®¤è¯ç­‰è¿‡ç¨‹ã€‚\né…ç½®DNS vim /etc/resolv.conf nameserver 119.29.29.29 é…ç½®è½¯ä»¶åŒ…æº é…ç½®æ–‡ä»¶ä¸º /etc/yum.repos.d/openEuler.repo ä¸‹\nmv /etc/yum.repos.d/openEuler.repo /etc/yum.repos.d/openEuler.repo.bk \u0026amp;\u0026amp; sudo bash -c \u0026#34;cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/yum.repos.d/openEuler.repo # just for test [mainline] name=mainline baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/22.09/ enabled=1 gpgcheck=0 # just for test [epol] name=epol baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/22.09/ enabled=1 gpgcheck=0 [extra] name=extra baseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/extra/ enabled=1 gpgcheck=0 EOF\u0026#34; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºOpenEulerè¿˜åœ¨å¿«é€Ÿå‘å±•ä¸­ï¼Œé•œåƒåœ°å€å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥éœ€ç¡®è®¤åœ°å€æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œå¦‚æ— æ³•è®¿é—®ä¼šå¯¼è‡´404é”™è¯¯\n[repoid]ä¸­çš„repoidä¸ºè½¯ä»¶ä»“åº“ï¼ˆrepositoryï¼‰çš„IDå·ï¼Œæ‰€æœ‰.repoé…ç½®æ–‡ä»¶ä¸­çš„å„repoidä¸èƒ½é‡å¤ï¼Œå¿…é¡»å”¯ä¸€ã€‚ç¤ºä¾‹ä¸­repoidè®¾ç½®ä¸ºbaseã€‚ nameä¸ºè½¯ä»¶ä»“åº“æè¿°çš„å­—ç¬¦ä¸²ã€‚ baseurlä¸ºè½¯ä»¶ä»“åº“çš„åœ°å€ã€‚ enabledä¸ºæ˜¯å¦å¯ç”¨è¯¥è½¯ä»¶æºä»“åº“ï¼Œå¯é€‰å€¼ä¸º1å’Œ0ã€‚é»˜è®¤å€¼ä¸º1ï¼Œè¡¨ç¤ºå¯ç”¨è¯¥è½¯ä»¶æºä»“åº“ã€‚ gpgcheckå¯è®¾ç½®ä¸º1æˆ–0ï¼Œ1è¡¨ç¤ºè¿›è¡Œgpgï¼ˆGNU Private Guardï¼‰æ ¡éªŒï¼Œ0è¡¨ç¤ºä¸è¿›è¡Œgpgæ ¡éªŒï¼Œgpgcheckå¯ä»¥ç¡®å®šrpmåŒ…çš„æ¥æºæ˜¯æœ‰æ•ˆå’Œå®‰å…¨çš„ã€‚ gpgkeyä¸ºéªŒè¯ç­¾åç”¨çš„å…¬é’¥ã€‚\nç£ç›˜æ‰©å®¹ åœ¨å®¿ä¸»æœºä¸Šå®‰è£… qemu-img å·¥å…·: apt install qemu-utils åœ¨ openEuler RISC-V è™šæ‹Ÿæœºä¸Šå®‰è£… growpart å·¥å…·: dnf install cloud-utils-growpart å…³é—­QEMUè™šæ‹Ÿæœº æŠŠ qcow2 æ–‡ä»¶çš„å®¹é‡åŠ 200GBï¼š $ qemu-img resize *.qcow2 +200G Image resized. $ qemu-img info *.qcow2 image: openEuler-preview.riscv64.qcow2 file format: qcow2 virtual size: 220 GiB disk size: 9.58 GiB cluster_size: 65536 Format specific information: compat: 1.1 compression type: zlib lazy refcounts: false refcount bits: 16 corrupt: false extended l2: false QEMU å¯åŠ¨ openEuler RISC-Vã€‚ å¯åŠ¨ä»¥åï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹åˆ†åŒºæƒ…å†µï¼šå¯ä»¥çœ‹åˆ°æ ¹ç›®å½•å¯¹åº”çš„åˆ†åŒºåªä½¿ç”¨äº† 10Gã€‚\n[root@openEuler-RISCV-rare ~]# lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT vda 254:0 0 220G 0 disk â””â”€vda1 254:1 0 10G 0 part / æ‰©å±•åˆ†åŒº vda1ï¼Œæ‰§è¡Œ growpart /dev/vda1 æ‰§è¡Œ lsblk å¯ä»¥çœ‹åˆ° / æ‰€åœ¨çš„ vda1 åˆ†åŒºå·²ç»æ‰©å±•åˆ°äº†é¢„æœŸå¤§å°\n[root@openEuler-RISCV-rare ~]# growpart /dev/vda 1 CHANGED: partition=1 start=2048 old: size=20969472 end=20971520 new: size=419428319 end=419430367 [root@openEuler-RISCV-rare ~]# lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT vda 254:0 0 220G 0 disk â””â”€vda1 254:1 0 220G 0 part / æ‰©å±•æ–‡ä»¶ç³»ç»Ÿï¼š resize2fs /dev/vda1 BUG network backend â€˜userâ€˜ is not compiled into this binary git clone https://gitlab.freedesktop.org/slirp/libslirp.git\nhttp://security.ubuntu.com/ubuntu/pool/main/libs/libslirp/libslirp-dev_4.1.0-2ubuntu2.2_amd64.deb\nsudo apt-get install libslirp-dev é‡æ–°ç¼–è¯‘QEMUï¼š\ncd qemu-build \u0026amp;\u0026amp; rm -rf build cd qemu-build \u0026amp;\u0026amp; ./configure --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu \\ --enable-kvm --enable-sdl --enable-slirp\\ --prefix=/home/user/program/riscv64-qemu make install -j $(nproc) å‚è€ƒæ–‡æ¡£ RISC-V/doc/tutorials/vm-qemu-oErv.md at master Â· openeuler-mirror/RISC-V Â· GitHub\nopenEuler 22.09æŠ€æœ¯ç™½çš®ä¹¦\n","permalink":"https://lifeislife.cn/posts/qemu%E5%90%AF%E5%8A%A8risc-v%E6%9E%B6%E6%9E%84openeuler%E5%B9%B6%E9%85%8D%E7%BD%AEosc%E7%8E%AF%E5%A2%83/","summary":"\u003cblockquote\u003e\n\u003cp\u003eåŸºäºUbuntu 18.04ï¼ŒQEMU 8.0.2ï¼ŒOpenEuler 22.09\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch1 id=\"å®‰è£…qemu\"\u003eå®‰è£…QEMU\u003c/h1\u003e\n\u003ch2 id=\"å®‰è£…åŸºç¡€ç¼–è¯‘å·¥å…·\"\u003eå®‰è£…åŸºç¡€ç¼–è¯‘å·¥å…·\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e                 gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e                 libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e                 libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev  -y\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo add-apt-repository ppa:deadsnakes/ppa\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install python3.8 python3-pip  -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install -f\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003epip3 install meson\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"ä¸‹è½½qemu\"\u003eä¸‹è½½QEMU\u003c/h2\u003e\n\u003cp\u003eå»ºç«‹æ–‡ä»¶å¤¹ç”¨äºç¼–è¯‘ï¼š\u003c/p\u003e","title":"QEMUå¯åŠ¨RISC-Væ¶æ„OpenEulerå¹¶é…ç½®OSCç¯å¢ƒ"},{"content":"åŸºç¡€é…ç½® æ·»åŠ å®‰å…¨ç»„è§„åˆ™ï¼Œå…è®¸ Ping å’Œ SSH è®¿é—®è™šæ‹Ÿæœºï¼š\nopenstack security group rule create --proto icmp default root@allone:~# openstack security group rule create --proto icmp default +-------------------+---------------------------+ | Field | Value | +-------------------+-------------------------+ | created_at | 2023-06-28T06:26:10Z | | description | | | direction | ingress | | ether_type | IPv4 | | id | fe9adfc3-dc42-4680-8ecd-ed5a667e1215 | | location | cloud=\u0026#39;\u0026#39;, project.domain_id=, project.domain_name=\u0026#39;Default\u0026#39;, project.id=\u0026#39;6396365541a74b6b8ea8812d1af05e70\u0026#39;, project.name=\u0026#39;admin\u0026#39;, region_name=\u0026#39;\u0026#39;, zone= | | name | None | | port_range_max | None | | port_range_min | None | | project_id | 6396365541a74b6b8ea8812d1af05e70 | | protocol | icmp | | remote_group_id | None | | remote_ip_prefix | 0.0.0.0/0 | | revision_number | 0 | | security_group_id | f10a3927-5e76-47b4-8691-4169348845ae | | tags | [] | | updated_at | 2023-06-28T06:26:10Z | +-------------------+--------------------------------+ openstack security group rule create --proto tcp --dst-port 22 default root@allone:~# openstack security group rule create --proto tcp --dst-port 22 default +-------------------+--------------------------------------+ | Field | Value | +-------------------+--------------------------------------------+ | created_at | 2023-06-28T06:26:15Z | | description | | | direction | ingress | | ether_type | IPv4 | | id | af699cf9-5fc0-45e2-a009-0bb7828e2d1a | | location | cloud=\u0026#39;\u0026#39;, project.domain_id=, project.domain_name=\u0026#39;Default\u0026#39;, project.id=\u0026#39;6396365541a74b6b8ea8812d1af05e70\u0026#39;, project.name=\u0026#39;admin\u0026#39;, region_name=\u0026#39;\u0026#39;, zone= | | name | None | | port_range_max | 22 | | port_range_min | 22 | | project_id | 6396365541a74b6b8ea8812d1af05e70 | | protocol | tcp | | remote_group_id | None | | remote_ip_prefix | 0.0.0.0/0 | | revision_number | 0 | | security_group_id | f10a3927-5e76-47b4-8691-4169348845ae | | tags | [] | | updated_at | 2023-06-28T06:26:15Z | +-------------------+-----------------+ å‘½ä»¤è¡Œæ–¹å¼ ç”Ÿæˆç§˜é’¥ ssh-keygen -q -N â€œâ€ -q é€‰é¡¹è¡¨ç¤ºé™é»˜æ¨¡å¼ï¼Œå³åœ¨ç”Ÿæˆå¯†é’¥å¯¹çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¾“å‡ºä»»ä½•æç¤ºä¿¡æ¯æˆ–è­¦å‘Šã€‚ -N é€‰é¡¹åé¢å¯ä»¥è·Ÿä¸€ä¸ªå¯†ç ä½œä¸ºå‚æ•°ã€‚è¯¥å¯†ç å°†ç”¨äºä¿æŠ¤ç”Ÿæˆçš„ç§é’¥æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®š -N å‚æ•°ï¼Œåˆ™ç§é’¥æ–‡ä»¶å°†ä¸å—å¯†ç ä¿æŠ¤ã€‚ è¯¥å‘½ä»¤ä¼šåœ¨~/.ssh/ç›®å½•ä¸­è‡ªåŠ¨ç”Ÿæˆä¸€å¯¹å…¬ç§é’¥ã€‚é»˜è®¤ç§é’¥åç§°ï¼šid_rsaï¼Œé»˜è®¤å…¬é’¥åç§°ï¼šid_rsa.pub\nopenstack keypair create --public-key ~/.ssh/id_rsa.pub mykey å‘ OpenStack æ·»åŠ å…¬é’¥ï¼Œç”¨äºåˆ›å»ºå®ä¾‹æ—¶é€‰æ‹©ï¼š\nroot@allone:~# openstack keypair create --public-key ~/.ssh/id_rsa.pub mykey +-------------+-------------------------------------------------+ | Field | Value | +-------------+-------------------------------------------------+ | fingerprint | 11:36:75:e0:c3:98:4c:97:90:30:f5:69:e1:17:a9:4b | | name | mykey | | user_id | 9027da91a2134825a421d78db11011d0 | +-------------+-------------------------------------------------+ openstack keypair list root@allone:~# openstack keypair list +---------------------+-------------------------------------------------+ | Name | Fingerprint | +---------------------+-------------------------------------------------+ | mykey | 11:36:75:e0:c3:98:4c:97:90:30:f5:69:e1:17:a9:4b | | ubuntu cloud server | 67:b4:8a:64:83:4e:47:d0:7c:87:46:34:3b:03:e6:17 | +---------------------+-------------------------------------------------+ ssh ubuntu@10.0.2.111 å…¶ä¸­ï¼Œubuntunæ˜¯å®ä¾‹çš„ç”¨æˆ·åï¼Œ10.0.2.111æ˜¯å®ä¾‹çš„ IP åœ°å€ã€‚\nWEB ç•Œé¢æ–¹å¼ åˆ›å»ºå¯†é’¥å¯¹ Project-Key Pairs-Create Keypairs\n\u003c!DOCTYPE html\u003e Responsive Image ä¸ºå¯†é’¥å¯¹èµ·ä¸ªåå­—ï¼šsshkeyï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªç±»å‹ï¼šSSH Key\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»åˆ›å»ºåä¼šå¼¹å‡ºä¸‹è½½ç§é’¥çš„çª—å£ï¼Œè¿™æ—¶å€™éœ€è¦å°†ç§é’¥ä¸‹è½½åˆ°æœ¬åœ°ã€‚å¹¶å°†ä»–ç§»åŠ¨åˆ° ssh ç›®å½•ä¸‹æ–¹ä¾¿ç®¡ç†ã€‚\n# åˆ‡æ¢rootç”¨æˆ·ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€ç›´éƒ½æ˜¯ç”¨rootç”¨æˆ·æ“ä½œçš„OpenStack sudo su mv sshkey.pem ~/.ssh \u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨å…¬é’¥åˆ›å»ºå®ä¾‹ Project-Instances-Launch Instance\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨ Key Pair ä¸­é€‰æ‹©åˆšåˆšåˆ›å»ºçš„ sshkeyã€‚è¿™é‡Œå®é™…å°±æ˜¯å°†åˆ›å»ºçš„å¯†é’¥å¯¹ä¸­çš„å…¬é’¥æ”¾åˆ°äº†æˆ‘ä»¬çš„å®ä¾‹ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ‹¿ç€æœ¬åœ°çš„ç§é’¥å»è®¿é—®å®ä¾‹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç™»å½•å®ä¾‹ ssh -i ~/.ssh/sshkey.pem ubuntun@10.0.2.111 å…¶ä¸­~/.ssh/sshkey.pemæ˜¯æˆ‘ä»¬ä¸‹è½½çš„ç§é’¥æ–‡ä»¶ï¼Œubuntunæ˜¯å®ä¾‹çš„ç”¨æˆ·åï¼Œ10.0.2.111æ˜¯å®ä¾‹çš„ IP åœ°å€ã€‚\n","permalink":"https://lifeislife.cn/posts/ssh-%E7%99%BB%E5%BD%95-openstack-%E5%AE%9E%E4%BE%8B/","summary":"\u003ch1 id=\"åŸºç¡€é…ç½®\"\u003eåŸºç¡€é…ç½®\u003c/h1\u003e\n\u003cp\u003eæ·»åŠ å®‰å…¨ç»„è§„åˆ™ï¼Œå…è®¸ Ping å’Œ SSH è®¿é—®è™šæ‹Ÿæœºï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eopenstack security group rule create --proto icmp default\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eroot@allone:~# openstack security group rule create --proto icmp default\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------------------+---------------------------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e Field             \u003cspan class=\"p\"\u003e|\u003c/span\u003e Value                                                                                                                                                   \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------------------+-------------------------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e created_at        \u003cspan class=\"p\"\u003e|\u003c/span\u003e 2023-06-28T06:26:10Z                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e description       \u003cspan class=\"p\"\u003e|\u003c/span\u003e                                                                                                                                                         \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e direction         \u003cspan class=\"p\"\u003e|\u003c/span\u003e ingress                                                                                                                                                 \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e ether_type        \u003cspan class=\"p\"\u003e|\u003c/span\u003e IPv4                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e id                \u003cspan class=\"p\"\u003e|\u003c/span\u003e fe9adfc3-dc42-4680-8ecd-ed5a667e1215                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e location          \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nv\"\u003ecloud\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e, project.domain_id\u003cspan class=\"o\"\u003e=\u003c/span\u003e, project.domain_name\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;Default\u0026#39;\u003c/span\u003e, project.id\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;6396365541a74b6b8ea8812d1af05e70\u0026#39;\u003c/span\u003e, project.name\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;admin\u0026#39;\u003c/span\u003e, \u003cspan class=\"nv\"\u003eregion_name\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e, \u003cspan class=\"nv\"\u003ezone\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e name              \u003cspan class=\"p\"\u003e|\u003c/span\u003e None                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e port_range_max    \u003cspan class=\"p\"\u003e|\u003c/span\u003e None                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e port_range_min    \u003cspan class=\"p\"\u003e|\u003c/span\u003e None                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e project_id        \u003cspan class=\"p\"\u003e|\u003c/span\u003e 6396365541a74b6b8ea8812d1af05e70                                                                                                                        \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e protocol          \u003cspan class=\"p\"\u003e|\u003c/span\u003e icmp                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e remote_group_id   \u003cspan class=\"p\"\u003e|\u003c/span\u003e None                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e remote_ip_prefix  \u003cspan class=\"p\"\u003e|\u003c/span\u003e 0.0.0.0/0                                                                                                                                               \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e revision_number   \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e                                                                                                                                                       \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e security_group_id \u003cspan class=\"p\"\u003e|\u003c/span\u003e f10a3927-5e76-47b4-8691-4169348845ae                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e tags              \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"o\"\u003e[]\u003c/span\u003e                                                                                                                                                      \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e updated_at        \u003cspan class=\"p\"\u003e|\u003c/span\u003e 2023-06-28T06:26:10Z                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------------------+--------------------------------+\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eopenstack security group rule create --proto tcp --dst-port \u003cspan class=\"m\"\u003e22\u003c/span\u003e default\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eroot@allone:~# openstack security group rule  create --proto tcp --dst-port \u003cspan class=\"m\"\u003e22\u003c/span\u003e default\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------------------+--------------------------------------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e Field             \u003cspan class=\"p\"\u003e|\u003c/span\u003e Value                                                                                                                                                   \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------------------+--------------------------------------------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e created_at        \u003cspan class=\"p\"\u003e|\u003c/span\u003e 2023-06-28T06:26:15Z                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e description       \u003cspan class=\"p\"\u003e|\u003c/span\u003e                                                                                                                                                         \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e direction         \u003cspan class=\"p\"\u003e|\u003c/span\u003e ingress                                                                                                                                                 \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e ether_type        \u003cspan class=\"p\"\u003e|\u003c/span\u003e IPv4                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e id                \u003cspan class=\"p\"\u003e|\u003c/span\u003e af699cf9-5fc0-45e2-a009-0bb7828e2d1a                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e location          \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nv\"\u003ecloud\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e, project.domain_id\u003cspan class=\"o\"\u003e=\u003c/span\u003e, project.domain_name\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;Default\u0026#39;\u003c/span\u003e, project.id\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;6396365541a74b6b8ea8812d1af05e70\u0026#39;\u003c/span\u003e, project.name\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;admin\u0026#39;\u003c/span\u003e, \u003cspan class=\"nv\"\u003eregion_name\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e, \u003cspan class=\"nv\"\u003ezone\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e name              \u003cspan class=\"p\"\u003e|\u003c/span\u003e None                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e port_range_max    \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"m\"\u003e22\u003c/span\u003e                                                                                                                                                      \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e port_range_min    \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"m\"\u003e22\u003c/span\u003e                                                                                                                                                      \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e project_id        \u003cspan class=\"p\"\u003e|\u003c/span\u003e 6396365541a74b6b8ea8812d1af05e70                                                                                                                        \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e protocol          \u003cspan class=\"p\"\u003e|\u003c/span\u003e tcp                                                                                                                                                     \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e remote_group_id   \u003cspan class=\"p\"\u003e|\u003c/span\u003e None                                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e remote_ip_prefix  \u003cspan class=\"p\"\u003e|\u003c/span\u003e 0.0.0.0/0                                                                                                                                               \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e revision_number   \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e                                                                                                                                                       \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e security_group_id \u003cspan class=\"p\"\u003e|\u003c/span\u003e f10a3927-5e76-47b4-8691-4169348845ae                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e tags              \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"o\"\u003e[]\u003c/span\u003e                                                                                                                                                      \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e|\u003c/span\u003e updated_at        \u003cspan class=\"p\"\u003e|\u003c/span\u003e 2023-06-28T06:26:15Z                                                                                                                                    \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------------------+-----------------+\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"å‘½ä»¤è¡Œæ–¹å¼\"\u003eå‘½ä»¤è¡Œæ–¹å¼\u003c/h1\u003e\n\u003ch2 id=\"ç”Ÿæˆç§˜é’¥\"\u003eç”Ÿæˆç§˜é’¥\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003essh-keygen -q -N â€œâ€\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-q\u003c/code\u003e é€‰é¡¹è¡¨ç¤ºé™é»˜æ¨¡å¼ï¼Œå³åœ¨ç”Ÿæˆå¯†é’¥å¯¹çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¾“å‡ºä»»ä½•æç¤ºä¿¡æ¯æˆ–è­¦å‘Šã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-N\u003c/code\u003e é€‰é¡¹åé¢å¯ä»¥è·Ÿä¸€ä¸ªå¯†ç ä½œä¸ºå‚æ•°ã€‚è¯¥å¯†ç å°†ç”¨äºä¿æŠ¤ç”Ÿæˆçš„ç§é’¥æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®š \u003ccode\u003e-N\u003c/code\u003e å‚æ•°ï¼Œåˆ™ç§é’¥æ–‡ä»¶å°†ä¸å—å¯†ç ä¿æŠ¤ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eè¯¥å‘½ä»¤ä¼šåœ¨\u003ccode\u003e~/.ssh/\u003c/code\u003eç›®å½•ä¸­è‡ªåŠ¨ç”Ÿæˆä¸€å¯¹å…¬ç§é’¥ã€‚é»˜è®¤ç§é’¥åç§°ï¼šid_rsaï¼Œé»˜è®¤å…¬é’¥åç§°ï¼šid_rsa.pub\u003c/p\u003e","title":"SSH ç™»å½• OpenStack å®ä¾‹"},{"content":"è§£å†³æ–¹æ¡ˆ VirtualBox Ubuntu æ— æ³•è”ç½‘ï¼Œé‡å¯åå¯ä»¥è”ç½‘ä½†æ˜¯å‡ åˆ†é’Ÿåæ–­å¼€ç½‘ç»œã€‚ç¬”è€…çš„æƒ…å†µæ˜¯å› ä¸º NetworkManager è‡ªåŠ¨ä¿®æ”¹äº†ç½‘ç»œé…ç½®å¯¼è‡´æ— æ³•è”ç½‘ï¼Œå…·ä½“ç°è±¡æ˜¯å¼€æœºåç½‘å¡ä¿¡æ¯å¦‚ä¸‹ï¼š\nuser@allone:~$ ifconfig brq64ff9b38-fa: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 ether ce:29:de:12:35:06 txqueuelen 1000 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 enp0s3: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 10.0.2.15 netmask 255.255.255.0 broadcast 10.0.2.255 inet6 fe80::2e8f:2be6:3752:dec4 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether 08:00:27:18:31:21 txqueuelen 1000 (Ethernet) RX packets 947 bytes 584483 (584.4 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 800 bytes 116611 (116.6 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 æ­¤æ—¶ç½‘ç»œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œç»è¿‡ä¸€ä¸¤åˆ†é’Ÿåç½‘ç»œä¿¡æ¯å¦‚ä¸‹ï¼š\nuser@allone:~$ ifconfig brq64ff9b38-fa: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 10.0.2.15 netmask 255.255.255.0 broadcast 10.0.2.255 ether ce:29:de:12:35:06 txqueuelen 1000 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 enp0s3: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet6 fe80::2e8f:2be6:3752:dec4 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether 08:00:27:18:31:21 txqueuelen 1000 (Ethernet) RX packets 947 bytes 584483 (584.4 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 800 bytes 116611 (116.6 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 ä¹Ÿå°±æ˜¯é»˜è®¤è™šæ‹Ÿç½‘å¡çš„ IP åœ°å€ä¸¢å¤±ï¼Œè€Œä¸çŸ¥åç½‘å¡ brq64ff9b38-fa å´æ‹¥æœ‰äº† IPï¼Œæ­¤æ—¶ç½‘ç»œä¸å¯ç”¨ã€‚å¦‚æœæœ‰ç±»ä¼¼æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å°è¯•è§£å†³ï¼Œå¦‚æœæ˜¯å…¶ä»–é—®é¢˜ã€‚è¯·é…Œæƒ…å‚è€ƒã€‚\nå…³é—­ NetworkManager sudo systemctl stop NetworkManager sudo systemctl disable NetworkManager sudo systemctl mask NetworkManager å¼€å¯ systemd-networkd sudo systemctl unmask systemd-networkd.service sudo systemctl enable systemd-networkd.service sudo systemctl start systemd-networkd.service é…ç½® Netplan ç¼–è¾‘/etc/netplan/01-network-manager-all.yaml\nnetwork: version: 2 renderer: networkd ethernets: enp0s3: dhcp4: yes dhcp6: yes addresses: [10.0.2.15/23] nameservers: addresses: [8.8.8.8, 8.8.4.4] optional: true å…¶ä¸­ enp0s3 ä¸ºç½‘å¡åç§°ï¼Œaddresses ä¸ºç½‘å¡å¯¹åº”çš„ IPï¼Œå‡å¯ä»¥é€šè¿‡ ifconfig æŸ¥è¯¢ã€‚\nä»¥ä¸‹æ˜¯ä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼Œä»¥åŠé—®é¢˜å›æº¯æœ‰å…´è¶£å¯ä»¥ç»§ç»­é˜…è¯»ã€‚\nèƒŒæ™¯çŸ¥è¯† NetworkManager ä¸ systemd-networked NetworkManager æ˜¯ä¸€é¡¹åç«¯æœåŠ¡ï¼Œç”¨äºæ§åˆ¶ Ubuntu æ“ä½œç³»ç»Ÿä¸Šçš„ç½‘ç»œæ¥å£ã€‚NetworkManager çš„æ›¿ä»£æ–¹æ³•æ˜¯ systemd-networkedï¼Œè¿™ä¸¤è€…åªèƒ½ä½¿ç”¨ä¸€ä¸ªã€‚åœ¨ Ubuntu æ¡Œé¢ä¸Šï¼ŒNetworkManager æ˜¯é€šè¿‡å›¾å½¢ç”¨æˆ·ç•Œé¢ç®¡ç†ç½‘ç»œç•Œé¢çš„é»˜è®¤æœåŠ¡ã€‚å› æ­¤ï¼Œå¦‚æœè¦é€šè¿‡ GUI é…ç½® IP åœ°å€ï¼Œåˆ™åº”å¯ç”¨ NetworkManagerã€‚å¦‚æœç”¨çš„æ˜¯æ— æ¡Œé¢çš„ Server ç‰ˆï¼Œå°±å¯ä»¥ä½¿ç”¨ systemd-networked æ¥ç®¡ç†ç½‘ç»œã€‚\nè¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥é€šè¿‡é…ç½® netplanï¼Œå³/etc/netplan/01-network-manager-all.yaml æ¥ç®¡ç†ç½‘ç»œï¼Œä½†æ˜¯åœ¨ renderer å±æ€§ä¸­é…ç½®æœ‰æ‰€ä¸åŒï¼Œä½¿ç”¨ NetworkManager æ—¶é…ç½®å¦‚ä¸‹ï¼š\nnetwork: version: 2 renderer: NetworkManager è€Œä½¿ç”¨ systemd-networked æ—¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š\nnetwork: version: 2 renderer: networkd æœ‰æ—¶æ— æ³•è”ç½‘å¯èƒ½æ˜¯å› ä¸ºé…ç½®ä¸å®é™…ä½¿ç”¨çš„ç½‘ç»œç®¡ç†æ–¹å¼ä¸åŒ¹é…å¯¼è‡´çš„ã€‚\n","permalink":"https://lifeislife.cn/posts/virtualbox-ubuntu%E6%97%A0%E6%B3%95%E8%81%94%E7%BD%91/","summary":"\u003ch1 id=\"è§£å†³æ–¹æ¡ˆ\"\u003eè§£å†³æ–¹æ¡ˆ\u003c/h1\u003e\n\u003cp\u003eVirtualBox Ubuntu æ— æ³•è”ç½‘ï¼Œé‡å¯åå¯ä»¥è”ç½‘ä½†æ˜¯å‡ åˆ†é’Ÿåæ–­å¼€ç½‘ç»œã€‚ç¬”è€…çš„æƒ…å†µæ˜¯å› ä¸º NetworkManager è‡ªåŠ¨ä¿®æ”¹äº†ç½‘ç»œé…ç½®å¯¼è‡´æ— æ³•è”ç½‘ï¼Œå…·ä½“ç°è±¡æ˜¯å¼€æœºåç½‘å¡ä¿¡æ¯å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003euser@allone:~$ ifconfig\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ebrq64ff9b38-fa: \u003cspan class=\"nv\"\u003eflags\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt;  mtu \u003cspan class=\"m\"\u003e1500\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        ether ce:29:de:12:35:06  txqueuelen \u003cspan class=\"m\"\u003e1000\u003c/span\u003e  \u003cspan class=\"o\"\u003e(\u003c/span\u003eEthernet\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        RX packets \u003cspan class=\"m\"\u003e0\u003c/span\u003e  bytes \u003cspan class=\"m\"\u003e0\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003e0.0 B\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        RX errors \u003cspan class=\"m\"\u003e0\u003c/span\u003e  dropped \u003cspan class=\"m\"\u003e0\u003c/span\u003e  overruns \u003cspan class=\"m\"\u003e0\u003c/span\u003e  frame \u003cspan class=\"m\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        TX packets \u003cspan class=\"m\"\u003e0\u003c/span\u003e  bytes \u003cspan class=\"m\"\u003e0\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003e0.0 B\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        TX errors \u003cspan class=\"m\"\u003e0\u003c/span\u003e  dropped \u003cspan class=\"m\"\u003e0\u003c/span\u003e overruns \u003cspan class=\"m\"\u003e0\u003c/span\u003e  carrier \u003cspan class=\"m\"\u003e0\u003c/span\u003e  collisions \u003cspan class=\"m\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eenp0s3: \u003cspan class=\"nv\"\u003eflags\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt;  mtu \u003cspan class=\"m\"\u003e1500\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        inet6 fe80::2e8f:2be6:3752:dec4  prefixlen \u003cspan class=\"m\"\u003e64\u003c/span\u003e  scopeid 0x20\u0026lt;link\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        ether 08:00:27:18:31:21  txqueuelen \u003cspan class=\"m\"\u003e1000\u003c/span\u003e  \u003cspan class=\"o\"\u003e(\u003c/span\u003eEthernet\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        RX packets \u003cspan class=\"m\"\u003e947\u003c/span\u003e  bytes \u003cspan class=\"m\"\u003e584483\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003e584.4 KB\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        RX errors \u003cspan class=\"m\"\u003e0\u003c/span\u003e  dropped \u003cspan class=\"m\"\u003e0\u003c/span\u003e  overruns \u003cspan class=\"m\"\u003e0\u003c/span\u003e  frame \u003cspan class=\"m\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        TX packets \u003cspan class=\"m\"\u003e800\u003c/span\u003e  bytes \u003cspan class=\"m\"\u003e116611\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003e116.6 KB\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        TX errors \u003cspan class=\"m\"\u003e0\u003c/span\u003e  dropped \u003cspan class=\"m\"\u003e0\u003c/span\u003e overruns \u003cspan class=\"m\"\u003e0\u003c/span\u003e  carrier \u003cspan class=\"m\"\u003e0\u003c/span\u003e  collisions \u003cspan class=\"m\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ­¤æ—¶ç½‘ç»œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œç»è¿‡ä¸€ä¸¤åˆ†é’Ÿåç½‘ç»œä¿¡æ¯å¦‚ä¸‹ï¼š\u003c/p\u003e","title":"VirtualBox Ubuntu æ— æ³•è”ç½‘"},{"content":" ğŸ’» NAT ç½‘ç»œæ¨¡å¼ NAT ç½‘ç»œä»¥è·¯ç”±å™¨çš„ NAT åŠŸèƒ½ä¸ºåŸç†ï¼Œå…è®¸è™šæ‹Ÿæœºé€šè¿‡å…±äº«ä¸»æœºçš„ IP åœ°å€è®¿é—®äº’è”ç½‘ï¼Œä½†è™šæ‹Ÿæœºä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ã€‚é€šè¿‡ç«¯å£è½¬å‘å¯ä»¥å®ç°è™šæ‹Ÿæœºä¹‹é—´çš„è¿æ¥ã€‚ ğŸ”— æ¡¥æ¥ç½‘ç»œæ¨¡å¼ æ¡¥æ¥ç½‘ç»œæ¨¡å¼é€šè¿‡è™šæ‹Ÿäº¤æ¢æœºè¿æ¥è™šæ‹Ÿæœºå’Œä¸»æœºï¼Œä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥é€šè¿‡å±€åŸŸç½‘è®¿é—®äº’è”ç½‘ï¼Œå¹¶å…è®¸è™šæ‹Ÿæœºä¹‹é—´ç›´æ¥é€šä¿¡ã€‚ ğŸ”’ å†…éƒ¨ç½‘ç»œæ¨¡å¼ å†…éƒ¨ç½‘ç»œæ¨¡å¼ä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥åˆ›å»ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„ç½‘ç»œï¼Œè™šæ‹Ÿæœºä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚ ğŸ  ä»…ä¸»æœºç½‘ç»œæ¨¡å¼ ä»…ä¸»æœºç½‘ç»œæ¨¡å¼å…è®¸è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥é€šä¿¡ï¼Œå¹¶ä¸”ä¸ä¸»æœºä¹‹é—´ä¹Ÿå¯ä»¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚ è™šæ‹Ÿæœº â†” è™šæ‹Ÿæœº è™šæ‹Ÿæœº â†’ å®¿ä¸»æœº å®¿ä¸»æœº â†’ è™šæ‹Ÿæœº è™šæ‹Ÿæœº â†’ äº’è”ç½‘ äº’è”ç½‘ â†’ è™šæ‹Ÿæœº ç½‘ç»œåœ°å€è½¬æ¢ NAT Ã— âˆš Ã— âˆš Ã— NAT ç½‘ç»œ âˆš âˆš Ã— âˆš Ã— Bridged Adapter æ¡¥æ¥ç½‘å¡ âˆš âˆš âˆš âˆš âˆš ","permalink":"https://lifeislife.cn/posts/virtual-box%E7%9A%84%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F/","summary":"\u003cul\u003e\n\u003cli\u003eğŸ’» NAT ç½‘ç»œæ¨¡å¼\n\u003cul\u003e\n\u003cli\u003eNAT ç½‘ç»œä»¥è·¯ç”±å™¨çš„ NAT åŠŸèƒ½ä¸ºåŸç†ï¼Œå…è®¸è™šæ‹Ÿæœºé€šè¿‡å…±äº«ä¸»æœºçš„ IP åœ°å€è®¿é—®äº’è”ç½‘ï¼Œä½†è™šæ‹Ÿæœºä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ã€‚é€šè¿‡ç«¯å£è½¬å‘å¯ä»¥å®ç°è™šæ‹Ÿæœºä¹‹é—´çš„è¿æ¥ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eğŸ”— æ¡¥æ¥ç½‘ç»œæ¨¡å¼\n\u003cul\u003e\n\u003cli\u003eæ¡¥æ¥ç½‘ç»œæ¨¡å¼é€šè¿‡è™šæ‹Ÿäº¤æ¢æœºè¿æ¥è™šæ‹Ÿæœºå’Œä¸»æœºï¼Œä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥é€šè¿‡å±€åŸŸç½‘è®¿é—®äº’è”ç½‘ï¼Œå¹¶å…è®¸è™šæ‹Ÿæœºä¹‹é—´ç›´æ¥é€šä¿¡ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eğŸ”’ å†…éƒ¨ç½‘ç»œæ¨¡å¼\n\u003cul\u003e\n\u003cli\u003eå†…éƒ¨ç½‘ç»œæ¨¡å¼ä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥åˆ›å»ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„ç½‘ç»œï¼Œè™šæ‹Ÿæœºä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eğŸ  ä»…ä¸»æœºç½‘ç»œæ¨¡å¼\n\u003cul\u003e\n\u003cli\u003eä»…ä¸»æœºç½‘ç»œæ¨¡å¼å…è®¸è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥é€šä¿¡ï¼Œå¹¶ä¸”ä¸ä¸»æœºä¹‹é—´ä¹Ÿå¯ä»¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e\u003c/th\u003e\n          \u003cth\u003eè™šæ‹Ÿæœº â†” è™šæ‹Ÿæœº\u003c/th\u003e\n          \u003cth\u003eè™šæ‹Ÿæœº â†’ å®¿ä¸»æœº\u003c/th\u003e\n          \u003cth\u003eå®¿ä¸»æœº â†’ è™šæ‹Ÿæœº\u003c/th\u003e\n          \u003cth\u003eè™šæ‹Ÿæœº â†’ äº’è”ç½‘\u003c/th\u003e\n          \u003cth\u003eäº’è”ç½‘ â†’ è™šæ‹Ÿæœº\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç½‘ç»œåœ°å€è½¬æ¢ NAT\u003c/td\u003e\n          \u003ctd\u003eÃ—\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eÃ—\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eÃ—\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eNAT ç½‘ç»œ\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eÃ—\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eÃ—\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eBridged Adapter æ¡¥æ¥ç½‘å¡\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n          \u003ctd\u003eâˆš\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e","title":"Virtual Box çš„ä¸åŒè™šæ‹Ÿæœºç½‘ç»œæ¨¡å¼"},{"content":"æ•°æ®é“¾è·¯å±‚ åŸºæœ¬æ¦‚å¿µ ç»“ç‚¹ï¼šä¸»æœºï¼Œè·¯ç”±å™¨ é“¾è·¯ï¼šç½‘ç»œä¸­ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„ç‰©ç†é€šé“ï¼Œé“¾è·¯çš„ä¼ è¾“ä»‹è´¨ä¸»è¦æœ‰åŒç»çº¿ã€å…‰çº¤å’Œå¾®æ³¢ã€‚åˆ†ä¸ºæœ‰çº¿é“¾è·¯ã€æ— çº¿é“¾è·¯ã€‚ æ•°æ®é“¾è·¯ï¼šç½‘ç»œä¸­ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„é€»è¾‘é€šé“ï¼ŒæŠŠå®ç°æ§åˆ¶æ•°æ®ä¼ è¾“åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šå°±æ„æˆæ•°æ®é“¾è·¯ã€‚ å¸§ï¼šé“¾è·¯å±‚çš„åè®®æ•°æ®å•å…ƒï¼Œå°è£…ç½‘ç»œå±‚æ•°æ®æŠ¥ã€‚\næ•°æ®é“¾è·¯å±‚è´Ÿè´£é€šè¿‡ä¸€æ¡é“¾è·¯ä»ä¸€ä¸ªç»“ç‚¹å‘å¦ä¸€ä¸ªç‰©ç†é“¾è·¯ç›´æ¥ç›¸è¿çš„ç›¸é‚»ç»“ç‚¹ä¼ é€æ•°æ®æŠ¥ã€‚\næ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½ åŠŸèƒ½æ¦‚è¿° æ•°æ®é“¾è·¯å±‚åœ¨ç‰©ç†å±‚æä¾›æœåŠ¡çš„åŸºç¡€ä¸Šå‘ç½‘ç»œå±‚æä¾›æœåŠ¡ï¼Œå…¶æœ€åŸºæœ¬çš„æœåŠ¡æ˜¯å°†æºè‡ªç½‘ç»œå±‚æ¥çš„æ•°æ®å¯é åœ°ä¼ è¾“åˆ°ç›¸é‚»èŠ‚ç‚¹çš„ç›®æ ‡æœºç½‘ç»œå±‚ã€‚å…¶ä¸»è¦ä½œç”¨æ˜¯åŠ å¼ºç‰©ç†å±‚ä¼ è¾“åŸå§‹æ¯”ç‰¹æµçš„åŠŸèƒ½ï¼Œå°†ç‰©ç†å±‚æä¾›çš„å¯èƒ½å‡ºé”™çš„ç‰©ç†è¿ æ¥æ”¹é€ æˆä¸ºé€»è¾‘ä¸Šæ— å·®é”™çš„æ•°æ®é“¾è·¯ï¼Œä½¿ä¹‹å¯¹ç½‘ç»œå±‚è¡¨ç°ä¸ºä¸€æ¡æ— å·®é”™çš„é“¾è·¯ã€‚\nä¸ºç½‘ç»œå±‚æä¾›æœåŠ¡ æ— ç¡®è®¤æ— è¿æ¥æœåŠ¡ æœ‰ç¡®è®¤æ— è¿æ¥æœåŠ¡ æœ‰ç¡®è®¤é¢å‘è¿æ¥æœåŠ¡ é“¾è·¯ç®¡ç† è¿æ¥çš„å»ºç«‹ï¼Œç»´æŒï¼Œé‡Šæ”¾ ç»„å¸§ å·®é”™æ§åˆ¶ å°è£…æˆå¸§ å°è£…æˆå¸§å°±æ˜¯åœ¨ä¸€æ®µæ•°æ®çš„å‰åéƒ¨åˆ†æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œè¿™æ ·å°±æ„æˆäº†ä¸€ä¸ªå¸§ã€‚æ¥æ”¶ç«¯åœ¨æ”¶åˆ°ç‰©ç†å±‚ä¸Šäº¤çš„æ¯”ç‰¹æµåï¼Œå°±èƒ½æ ¹æ®é¦–éƒ¨å’Œå°¾éƒ¨çš„æ ‡è®°(å¸§å®šç•Œç¬¦)ï¼Œä»æ”¶åˆ°çš„æ¯”ç‰¹æµä¸­è¯†åˆ«å¸§çš„å¼€å§‹å’Œç»“æŸã€‚\né¦–éƒ¨å’Œå°¾éƒ¨åŒ…å«è®¸å¤šçš„æ§åˆ¶ä¿¡æ¯ï¼Œä»–ä»¬çš„ä¸€ä¸ªé‡è¦ä½œç”¨ï¼šå¸§å®šç•Œï¼ˆç¡®å®šå¸§çš„ç•Œé™ï¼‰ã€‚\nå¸§åŒæ­¥ï¼šæ¥æ”¶æ–¹åº”å½“èƒ½ä»æ¥æ”¶åˆ°çš„äºŒè¿›åˆ¶æ¯”ç‰¹æµä¸­åŒºåˆ†å‡ºå¸§çš„èµ·å§‹å’Œç»ˆæ­¢ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é€æ˜ä¼ è¾“\nå·®é”™æ§åˆ¶ ä¼ è¾“ä¸­çš„å·®é”™éƒ½æ˜¯ç”±å™ªå£°å¼•èµ·çš„ã€‚\nå…¨å±€æ€§ï¼Œç”±äºçº¿è·¯æœ¬èº«ç”µæ°”ç‰¹æ€§æ‰€äº§ç”Ÿçš„éšæœºå™ªå£° å±€éƒ¨æ€§ï¼Œç”±äºå¤–ç•ŒçŸ­æš‚çš„åŸå› é€ æˆçš„å†²å‡»å™ªå£° å·®é”™åˆåˆ†ä¸ºä½é”™å’Œå¸§é”™\nä½é”™ï¼Œæ¯”ç‰¹ä½å‡ºé”™ï¼Œ1 å˜ 0,0 å˜ 1 å¸§é”™ï¼ŒåŒ…æ‹¬ä¸¢å¤±ï¼Œé‡å¤ï¼Œå¤±åº å‘ç°å·®é”™çš„å¸§åå°±å°†é”™è¯¯å€¼ä¸¢å¼ƒï¼Œå¦‚æœæ²¡æœ‰å·®é”™æ§åˆ¶ï¼Œå°†ä¼šæµªè´¹å¤§é‡èµ„æºï¼Œå› ä¸ºä¼ è¾“è¿‡ç¨‹ä¸­ä¸€ç›´ä¼ è¾“äº†é”™è¯¯çš„ä¿¡æ¯ã€‚\nå·®é”™æ§åˆ¶\næ£€é”™ç¼–ç  å¥‡å¶æ ¡éªŒç  å¾ªç¯å†—ä½™ CRC çº é”™ç¼–ç  æµ·æ˜ç  è¿™é‡Œæåˆ°çš„ç¼–ç å’Œç‰©ç†å±‚çš„ç¼–ç ä¸è°ƒåˆ¶ä¸åŒï¼Œç‰©ç†å±‚çš„ç¼–ç é’ˆå¯¹å•ä¸ªæ¯”ç‰¹ï¼Œè§£å†³ä¼ è¾“åŒæ­¥é—®é¢˜ã€‚è¿™é‡Œçš„ç¼–ç é’ˆå¯¹çš„æ˜¯ä¸€ç»„æ¯”ç‰¹ï¼Œé€šè¿‡å†—ä½™ç çš„æŠ€æœ¯æ£€æµ‹ä¼ è¾“ä¸­æ˜¯å¦å‡ºé”™ã€‚\nå¥‡å¶æ ¡éªŒç  å¥‡æ ¡éªŒç ï¼šåœ¨ä¿¡æ¯å…ƒå‰åŠ ä¸Š 1 ä½åä½¿å¾— 1 çš„ä¸ªæ•°ä¸ºå¥‡æ•°ä¸ª å¶æ£€éªŒç ï¼šåœ¨ä¿¡æ¯å…ƒå‰åŠ ä¸Š 1 ä½åä½¿å¾— 1 çš„ä¸ªæ•°ä¸ºå¶æ•°ä¸ª\nè¯¥æ£€æµ‹æ–¹å¼åªèƒ½æ£€æµ‹å‡ºå¥‡æ•°ä¸ªçš„ä½é”™ï¼Œæ£€é”™èƒ½åŠ›ä¸º 50%\nå¦‚æœä¸€ä¸ªå­—ç¬¦Sçš„ASCIç¼–ç ä»ä½åˆ°é«˜ä¾æ¬¡ä¸º1100101ï¼Œé‡‡ç”¨å¥‡æ ¡éªŒï¼Œåœ¨ä¸‹è¿°æ”¶åˆ°çš„ä¼ è¾“åå­—ç¬¦ä¸­ï¼Œå“ªç§é”™è¯¯ä¸èƒ½æ£€æµ‹ï¼Ÿ A.11000011B.11001010 C.11001100 D.11010011 ç­”ï¼šå› ä¸ºé‡‡ç”¨å¥‡æ ¡éªŒï¼Œæ‰€ä»¥åœ¨é¦–ä½åŠ ä¸Šä¸€ä¸ª1ä½¿å¾—æ‰€æœ‰1ä¸ªæ•°ä¸ºå¥‡æ•°å˜æˆ11100101ï¼ŒABCé€‰é¡¹ä¸­1çš„ä¸ªæ•°éƒ½æ˜¯å¶æ•°ä¸ªï¼Œæ˜æ˜¾å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥èƒ½æ£€æµ‹å‡ºé”™è¯¯ï¼Œä½†æ˜¯Dé€‰é¡¹çš„1ä¹Ÿæ˜¯å¥‡æ•°ä¸ªï¼Œå°†æ— æ³•åˆ¤æ–­æ˜¯å¦å‡ºç°å·®é”™ã€‚ CRC å¾ªç¯å†—ä½™ç  \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image é“¾è·¯å±‚çš„ä¸¤ç§ä¿¡é“ å±€åŸŸç½‘ã€å¹¿åŸŸç½‘ æ•°æ®é“¾è·¯å±‚çš„è®¾å¤‡ æµé‡æ§åˆ¶ä¸å¯é ä¼ è¾“ å•å¸§æ»‘åŠ¨çª—å£ä¸åœæ­¢ç­‰å¾…åè®® \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image SR é€‰æ‹©é‡ä¼ åè®® \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ»‘åŠ¨çª—å£æœ€å¤§å€¼ \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/","summary":"\u003ch2 id=\"æ•°æ®é“¾è·¯å±‚\"\u003eæ•°æ®é“¾è·¯å±‚\u003c/h2\u003e\n\u003ch5 id=\"åŸºæœ¬æ¦‚å¿µ\"\u003eåŸºæœ¬æ¦‚å¿µ\u003c/h5\u003e\n\u003cp\u003e\u003cstrong\u003eç»“ç‚¹\u003c/strong\u003eï¼šä¸»æœºï¼Œè·¯ç”±å™¨\n\u003cstrong\u003eé“¾è·¯\u003c/strong\u003eï¼šç½‘ç»œä¸­ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„\u003ccode\u003eç‰©ç†é€šé“\u003c/code\u003eï¼Œé“¾è·¯çš„ä¼ è¾“ä»‹è´¨ä¸»è¦æœ‰åŒç»çº¿ã€å…‰çº¤å’Œå¾®æ³¢ã€‚åˆ†ä¸ºæœ‰çº¿é“¾è·¯ã€æ— çº¿é“¾è·¯ã€‚\n\u003cstrong\u003eæ•°æ®é“¾è·¯\u003c/strong\u003eï¼šç½‘ç»œä¸­ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„\u003ccode\u003eé€»è¾‘é€šé“\u003c/code\u003eï¼ŒæŠŠå®ç°æ§åˆ¶æ•°æ®ä¼ è¾“\u003ccode\u003eåè®®\u003c/code\u003eçš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šå°±æ„æˆæ•°æ®é“¾è·¯ã€‚\n\u003cstrong\u003eå¸§\u003c/strong\u003eï¼šé“¾è·¯å±‚çš„åè®®æ•°æ®å•å…ƒï¼Œå°è£…ç½‘ç»œå±‚æ•°æ®æŠ¥ã€‚\u003c/p\u003e","title":"è®¡ç®—æœºç½‘ç»œ - æ•°æ®é“¾è·¯å±‚"},{"content":"ç¡®è®¤ç½‘å¡ä¿¡æ¯ lsusb å¾—åˆ° USB è®¾å¤‡ä¿¡æ¯\nBus 001 Device 013: ID 0bda:a192 Realtek Semiconductor Corp. Disk å®‰è£…ç½‘å¡é©±åŠ¨ æ ¹æ®è®¾å¤‡ IDï¼Œç”¨å…³é”®è¯ç½‘ä¸Šæœç´ ä¸€ä¸‹ç›¸å…³é©±åŠ¨ï¼Œå¾—åˆ°æœ‰è¿™ä¸ªé©±åŠ¨å¯ç”¨ï¼š\nsudo apt update sudo apt install build-essential git dkms git clone https://gitee.com/BrightXu/rtl8192fu.git cd rtl8192fu make -j$(nproc) sudo make install sudo modprobe 8192fu æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\nusb-devices å¦‚æœæœ‰ Driver=rtl8192fu å­—æ®µè¯´æ˜å®‰è£…æˆåŠŸã€‚å¦‚æœæ¡Œé¢å³ä¸Šè§’æ— çº¿è¿æ¥å›¾æ ‡å¯ç”¨ï¼Œè¯´æ˜å¯ä»¥ä½¿ç”¨æ— çº¿ç½‘ç»œäº†ã€‚å¦‚æœä¸å¯ç”¨ç»§ç»­å¾€ä¸‹çœ‹ã€‚\nä¿®æ”¹è®¾å¤‡æ¨¡å¼ å¦‚æœä½¿ç”¨lsusbå‘½ä»¤æŸ¥çœ‹è®¾å¤‡ï¼Œå‘ç°è®¾å¤‡æœ«å°¾ä¾ç„¶æ˜¯ Disk æ¨¡å¼ï¼Œè¯´æ˜è¿™ä¸ªè®¾å¤‡æ˜¯ç£ç›˜è®¾å¤‡ï¼Œè¿˜ä¸èƒ½å½“åšç½‘ç»œé€‚é…å™¨ä½¿ç”¨ï¼Œéœ€è¦ä¿®æ”¹å…¶æ¨¡å¼ã€‚\nsudo apt-get install -y usb-modeswitch sudo vim /lib/udev/rules.d/40-usb_modeswitch.rules åœ¨æœ€å LABEL ä¹‹å‰åŠ ä¸Š\n# Realtek 8192F Wifi AC USB ATTR{idVendor}==\u0026#34;0bda\u0026#34;, ATTR{idProduct}==\u0026#34;a192\u0026#34;, RUN+=\u0026#34;/usr/sbin/usb_modeswitch -K -v 0bda -p a192\u0026#34; LABEL=\u0026#34;modeswitch_rules_end\u0026#34; sudo usb_modeswitch -KW -v 0bda -p a192 å…³é—­å®‰å…¨å¯åŠ¨ å®‰å…¨å¯åŠ¨æ¨¡å¼ä¸‹æ— æ³•ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„é©±åŠ¨ï¼Œæ‰€ä»¥éœ€è¦åœ¨å¼€æœºæ—¶è¿›å…¥ BIOS å°†å®‰å…¨å¯åŠ¨å…³é—­ï¼Œæ¯ä¸ªä¸»æ¿ä¸ä¸€æ ·ï¼Œè‡ªè¡Œæœç´¢ã€‚\nå‚è€ƒ linux ç³»ç»Ÿä¸‹ usb ç½‘å¡çš„é©±åŠ¨å®‰è£…_linux usb ç½‘å¡-CSDN åšå®¢\nä¸º ubuntu 22.04 ç³»ç»Ÿå®‰è£…æ°´æ˜Ÿ realtek 5g wifi é©±åŠ¨ - éƒ­åä¼Ÿçš„åšå®¢\nubuntu 18.04 usb æ— çº¿ç½‘å¡æ— æ³•ä½¿ç”¨\u0026ndash;ID 0bda:a192 Realtek Semiconductor Corp._æ”¾ç¾Š Wa çš„åšå®¢-CSDN åšå®¢\n","permalink":"https://lifeislife.cn/posts/ubuntu-22-04-%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%B0%B4%E6%98%9F-wifi-%E9%A9%B1%E5%8A%A8mercury-mw310uh/","summary":"\u003ch1 id=\"ç¡®è®¤ç½‘å¡ä¿¡æ¯\"\u003eç¡®è®¤ç½‘å¡ä¿¡æ¯\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003elsusb\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå¾—åˆ° USB è®¾å¤‡ä¿¡æ¯\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e Bus \u003cspan class=\"m\"\u003e001\u003c/span\u003e Device 013: ID 0bda:a192 Realtek Semiconductor Corp. Disk\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"å®‰è£…ç½‘å¡é©±åŠ¨\"\u003eå®‰è£…ç½‘å¡é©±åŠ¨\u003c/h1\u003e\n\u003cp\u003eæ ¹æ®è®¾å¤‡ IDï¼Œç”¨å…³é”®è¯ç½‘ä¸Šæœç´ ä¸€ä¸‹ç›¸å…³é©±åŠ¨ï¼Œå¾—åˆ°æœ‰è¿™ä¸ªé©±åŠ¨å¯ç”¨ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt update\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install build-essential git dkms\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit clone https://gitee.com/BrightXu/rtl8192fu.git\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003ecd\u003c/span\u003e rtl8192fu\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emake -j\u003cspan class=\"k\"\u003e$(\u003c/span\u003enproc\u003cspan class=\"k\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo make install\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo modprobe 8192fu\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\u003c/p\u003e","title":"Ubuntu 22.04 ç³»ç»Ÿå®‰è£…æ°´æ˜Ÿ wifi é©±åŠ¨ Mercury MW310UH"},{"content":"äº‘è®¡ç®—æœåŠ¡ç±»å‹ ä¼ ç»Ÿæ¶æ„=\u0026gt;Iaas=\u0026gt;Paas=\u0026gt;Saas\nè‡ªå·±çƒ§é¥­=\u0026gt; å®å’šä¹°èœ=\u0026gt; ç¾å›¢å¤–å–=\u0026gt; é¤å…åƒé¥­\n\u003c!DOCTYPE html\u003e Responsive Image äº‘è®¡ç®—éƒ¨ç½²å½¢å¼ä»¥åŠåº”ç”¨ ç±»å‹ æè¿° ä¼˜ç‚¹ ç¼ºç‚¹ ç§æœ‰äº‘ åˆ©ç”¨å·²æœ‰è®¾å¤‡è‡ªæˆ‘æ„å»ºï¼Œäº‘ç«¯èµ„æºåªç»™å†…éƒ¨äººå‘˜ä½¿ç”¨ã€‚ å®‰å…¨æ€§é«˜ ç»´æŠ¤æˆæœ¬é«˜ ç¤¾åŒºäº‘ã€è¡Œä¸šäº‘ ä¸ºç‰¹å®šè¡Œä¸šæ„å»ºå…±äº«åŸºç¡€è®¾æ–½çš„äº‘ã€‚ æœ‰ä¸€å¥—ç”¨æˆ·ä½“ç³» ç»´æŠ¤æˆæœ¬é«˜ å…¬æœ‰äº‘ æ„å»ºå¤§å‹åŸºç¡€è®¾æ–½äº‘å‡ºç§Ÿç»™å…¬ä¼—ã€‚ ç”¨æˆ·æ¥è¯´æˆæœ¬ä½ï¼ŒæœåŠ¡å¤š å®‰å…¨æ€§ä½ æ··åˆäº‘ ä¸¤ç§æˆ–è€…ä¸¤ç§ä»¥ä¸Šçš„äº‘ç»„æˆçš„äº‘æœåŠ¡ æ•æ·ï¼Œçµæ´»ï¼Œé™ä½æˆæœ¬ å…¼å®¹æ€§é—®é¢˜ åº”ç”¨ å­˜å‚¨äº‘ã€åŒ»ç–—äº‘ã€æ•™è‚²äº‘ã€ä¼ä¸šäº‘ã€é‡‘èäº‘ã€æ¸¸æˆäº‘ã€æ¡Œé¢äº‘\nå…³é”®æŠ€æœ¯ è™šæ‹ŸåŒ– \u003c!DOCTYPE html\u003e Responsive Image åˆ†å¸ƒå¼å­˜å‚¨ å°†æ•°æ®å­˜å‚¨åœ¨ä¸åŒçš„ç‰©ç†è®¾å¤‡ä¸­ã€‚è¿™ç§æ¨¡å¼ä¸ä»…æ‘†è„±äº†ç¡¬ä»¶è®¾å¤‡çš„é™åˆ¶ï¼ŒåŒæ—¶æ‰©å±•æ€§æ›´å¥½ï¼Œèƒ½å¤Ÿå¿«é€Ÿå“åº”ç”¨æˆ·éœ€æ±‚çš„å˜åŒ–ï¼ˆæ•´åˆå­˜å‚¨èµ„æºæä¾›åŠ¨æ€å¯ä¼¸ç¼©èµ„æºæ± çš„åˆ†å¸ƒå¼å­˜å‚¨æŠ€æœ¯)\næ•°æ®ä¸­å¿ƒè”ç½‘ è™šæ‹Ÿæœºä¹‹é—´éœ€è¦å®æ—¶åŒæ­¥å¤§é‡çš„æ•°æ®ï¼Œäº§ç”Ÿå¤§é‡ä¸œè¥¿æµé‡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¹¶è¡Œç¼–ç¨‹ åœ¨å¹¶è¡Œç¼–ç¨‹æ¨¡å¼ä¸‹ï¼Œå¹¶å‘å¤„ç†ã€å®¹é”™ã€æ•°æ®åˆ†å¸ƒã€è´Ÿè½½å‡è¡¡ç­‰ç»†èŠ‚éƒ½è¢«æŠ½è±¡åˆ°ä¸€ä¸ªå‡½æ•°åº“ä¸­ï¼Œé€šè¿‡ç»Ÿä¸€æ¥å£ï¼Œç”¨æˆ·å¤§å°ºåº¦çš„è®¡ç®—ä»»åŠ¡è¢«è‡ªåŠ¨å¹¶å‘å’Œåˆ†å¸ƒæ‰§è¡Œï¼Œå³å°†ä¸€ä¸ªä»»åŠ¡è‡ªåŠ¨åˆ†æˆå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶è¡Œåœ°å¤„ç†æµ·é‡æ•°æ®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä½“ç³»ç»“æ„ äº‘è®¡ç®—å¹³å°ä½“ç³»ç»“æ„ç”±ç”¨æˆ·ç•Œé¢ã€æœåŠ¡ç›®å½•ã€ç®¡ç†ç³»ç»Ÿã€éƒ¨ç½²å·¥å…·ã€ç›‘æ§å’ŒæœåŠ¡å™¨é›†ç¾¤ç»„æˆã€‚\nè‡ªåŠ¨åŒ–éƒ¨ç½² å¯¹äº‘èµ„æºè¿›è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²æŒ‡çš„æ˜¯åŸºäºè„šæœ¬è°ƒèŠ‚çš„åŸºç¡€ä¸Šå®ç°ä¸åŒå‚å•†å¯¹äºè®¾å¤‡å·¥å…·çš„è‡ªåŠ¨é…ç½®ï¼Œç”¨ä»¥å‡å°‘äººæœºäº¤äº’æ¯”ä¾‹ã€æé«˜åº”å˜æ•ˆç‡ï¼Œé¿å…è¶…è´Ÿè·äººå·¥æ“ä½œç­‰ç°è±¡çš„å‘ç”Ÿï¼Œæœ€ç»ˆæ¨è¿›æ™ºèƒ½éƒ¨ç½²è¿›ç¨‹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image äº‘æœåŠ¡æä¾›å•† äºšé©¬é€Šäº‘ã€è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ã€ç™¾åº¦äº‘ã€åä¸ºäº‘\næŠ€æœ¯æ¶æ„ï¼šå¼€æºï¼ˆXen,KVMï¼‰ï¼ŒVmwareï¼Œå¾®è½¯ hyper-vï¼Œé˜¿é‡Œé£å¤© Apsara\nå¼€æºäº‘ç®¡ç†å¹³å°ï¼šOpenStack\nè™šæ‹ŸåŒ–ç®€ä»‹ è™šæ‹ŸåŒ–ï¼šä¸€ç§è®¡ç®—æœºèµ„æºç®¡ç†æŠ€æœ¯ï¼Œå°†å„ç§ T å®ä½“èµ„æºæŠ½è±¡ã€è½¬æ¢æˆå¦ä¸€ç§å½¢å¼çš„æŠ€æœ¯éƒ½æ˜¯è™šæ‹ŸåŒ–ã€‚ ä½œç”¨ï¼šé€šè¿‡è¯¥æŠ€æœ¯å°†ä¸€å°è®¡ç®—æœºè™šæ‹Ÿä¸ºå¤šå°é€»è¾‘è®¡ç®—æœºã€‚åœ¨ä¸€å°è®¡ç®—æœºä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªé€»è¾‘è®¡ç®—æœºï¼Œæ¯ä¸ªé€»è¾‘è®¡ç®—æœºå¯è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºéƒ½å¯ä»¥åœ¨ç›¸äº’ç‹¬ç«‹çš„ç©ºé—´å†…è¿è¡Œè€Œäº’ä¸å½±å“ï¼Œä»è€Œæ˜¾è‘—æé«˜è®¡ç®—æœºçš„å·¥ä½œæ•ˆç‡ã€‚\nä»è¡Œä¸šæ•°æ®äº’ç›¸å…³è”çš„è§’åº¦æ¥è¯´ï¼Œäº‘è®¡ç®—æ˜¯æåº¦ä¾èµ–è™šæ‹ŸåŒ–çš„ã€‚ä½†è™šæ‹ŸåŒ–å¹¶éäº‘è®¡ç®—ï¼Œäº‘è®¡ç®—ä¹Ÿå¹¶éè™šæ‹ŸåŒ–ã€‚è™šæ‹ŸåŒ–åªæ˜¯äº‘è®¡ç®—çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä½†å¹¶éäº‘è®¡ç®—çš„æ ¸å¿ƒå…³æ³¨ç‚¹ã€‚\näº‘è®¡ç®—æ˜¯ä¸€ç§æœåŠ¡ã€‚è™šæ‹ŸåŒ–æ˜¯äº‘è®¡ç®—çš„æŠ€æœ¯åŸºç¡€ã€‚\nè™šæ‹ŸåŒ–ç›¸å…³çš„å‡ ä¸ªæ¦‚å¿µ Guest OS:è¿è¡Œåœ¨è™šæ‹Ÿæœºä¹‹ä¸Šçš„ OS Guest Machine:è™šæ‹Ÿå‡ºæ¥çš„è™šæ‹Ÿæœº VMM:è™šæ‹Ÿæœºç›‘æ§å™¨ï¼Œå³è™šæ‹ŸåŒ–å±‚ (Virtual Machine Monitor,VMM) Host OS:è¿è¡Œåœ¨ç‰©ç†æœºä¹‹ä¸Šçš„ OS Host Machine:ç‰©ç†æœº\n\u003c!DOCTYPE html\u003e Responsive Image è™šæ‹ŸåŒ–ç±»å‹ è™šæ‹ŸåŒ–ç±»å‹ æè¿° ç‰¹ç‚¹ æ¡ˆä¾‹ å¯„å±…è™šæ‹ŸåŒ–ï¼ˆType2ï¼‰ åœ¨ä¸»æœºï¼ˆå®¿ä¸»ï¼‰æ“ä½œç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè™šæ‹ŸåŒ–ç¨‹åº - ç®€å•ã€æ˜“äºå®ç°ã€‚\n- å®‰è£…å’Œè¿è¡Œåº”ç”¨ç¨‹åºä¾èµ–äºä¸»æœºæ“ä½œç³»ç»Ÿå¯¹è®¾å¤‡çš„æ”¯æŒã€‚\n- æœ‰ä¸¤å±‚ OSï¼Œç®¡ç†å¼€é”€è¾ƒå¤§ï¼Œæ€§èƒ½æŸè€—å¤§ã€‚\n- è™šæ‹Ÿæœºå¯¹å„ç§ç‰©ç†è®¾å¤‡ (cpuã€å†…å­˜ã€ç¡¬ç›˜ç­‰) çš„è°ƒç”¨ï¼Œéƒ½é€šè¿‡è™šæ‹ŸåŒ–å±‚å’Œå®¿ä¸»æœºçš„ OS ä¸€èµ·åè°ƒæ‰èƒ½å®Œæˆã€‚ - Vmware\n- VirturalBox\nè£¸é‡‘å±è™šæ‹ŸåŒ– (Type1) ç›´æ¥å°† VMM å®‰è£…åœ¨ç¡¬ä»¶è®¾å¤‡ä¸Šï¼ŒVMM åœ¨è¿™ç§æ¨¡å¼ä¸‹åˆå«åš Hypervisorï¼Œè™šæ‹Ÿæœºæœ‰æŒ‡ä»¤è¦æ‰§è¡Œæ—¶ï¼ŒHypervisors ä¼šæ¥ç®¡è¯¥æŒ‡ä»¤ï¼Œæ¨¡æ‹Ÿç›¸åº”çš„æ“ä½œã€‚ - ä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿã€‚\n- æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼Œå¤šç§åº”ç”¨ã€‚\n- ä¾èµ–è™šæ‹Ÿå±‚å†…æ ¸å’ŒæœåŠ¡å™¨æ§åˆ¶å°è¿›è¡Œç®¡ç†ã€‚\n- éœ€è¦å¯¹è™šæ‹Ÿå±‚çš„å†…æ ¸è¿›è¡Œå¼€å‘ï¼ˆéš¾åº¦å¤§ï¼‰ã€‚ - VMware ESX\n- Xen\n- åä¸º FusionSphere\næ··åˆè™šæ‹ŸåŒ– åœ¨ä¸€ä¸ªç°æœ‰çš„æ­£å¸¸æ“ä½œç³»ç»Ÿä¸‹å®‰è£…ä¸€ä¸ªå†…æ ¸æ¨¡å—ï¼Œå†…æ ¸æ‹¥æœ‰è™šæ‹ŸåŒ–èƒ½åŠ›ã€‚(ç›¸å½“äºå¯„å±…ä¸è£¸é‡‘å±çš„æ··åˆ) - ç›¸å¯¹äºå¯„å±…è™šæ‹ŸåŒ–æ¶æ„ï¼Œæ€§èƒ½é«˜ã€‚\n- ç›¸å¯¹äºè£¸é‡‘å±è™šæ‹ŸåŒ–æ¶æ„ï¼Œä¸éœ€è¦å¼€å‘å†…æ ¸ã€‚\n- å¯æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿã€‚\n- éœ€åº•å±‚ç¡¬ä»¶æ”¯æŒè™šæ‹ŸåŒ–æ‰©å±•åŠŸèƒ½ã€‚ - KVM å¯„å±…è™šæ‹ŸåŒ–ï¼ˆType2ï¼‰\n\u003c!DOCTYPE html\u003e Responsive Image è£¸é‡‘å±è™šæ‹ŸåŒ– (Type1)\n\u003c!DOCTYPE html\u003e Responsive Image æ··åˆè™šæ‹ŸåŒ–\n\u003c!DOCTYPE html\u003e Responsive Image è™šæ‹ŸåŒ–å±‚æ¶æ„ æ¶æ„ æè¿° ç‰¹ç‚¹ å…¸å‹ å…¨è™šæ‹ŸåŒ– å³æ‰€æŠ½è±¡çš„ VM å…·æœ‰å®Œå…¨çš„ç‰©ç†ç‰¹æ€§ï¼Œè™šæ‹ŸåŒ–å±‚è´Ÿè´£æ•è· CPU æŒ‡ä»¤ï¼Œä¸ºæŒ‡ä»¤è®¿é—®ç¡¬ä»¶å……å½“åª’ä»‹ã€‚ - OS æ— éœ€ä¿®æ”¹ã€‚\n- é€Ÿåº¦å’ŒåŠŸèƒ½éƒ½éå¸¸ä¸é”™ï¼Œä½¿ç”¨éå¸¸ç®€å•ã€‚\n- ç§»æ¤æ€§å¥½ã€‚ - VMware\n- KVM\n- Virtualbox\n- Virtual PC\nåŠè™šæ‹ŸåŒ– èµ·åˆæ˜¯ä¸ºäº†è§£å†³å…¨è™šæ‹ŸåŒ–æ•ˆç‡ä¸é«˜çš„å›°éš¾ï¼Œå®ƒéœ€è¦ä¿®æ”¹ OSï¼Œå·¥ä½œæ•ˆç‡ç›¸å¯¹å…¨è™šæ‹ŸåŒ–è¦é«˜å¾ˆå¤šã€‚Hypervisor ç›´æ¥å®‰è£…åœ¨ç‰©ç†æœºä¸Šï¼Œå¤šä¸ªè™šæ‹Ÿæœºåœ¨ Hypervisor ä¸Šè¿è¡Œã€‚Hypervisor å®ç°æ–¹å¼ä¸€èˆ¬æ˜¯ä¸€ä¸ªç‰¹æ®Šå®šåˆ¶çš„ Linux ç³»ç»Ÿã€‚ - æ¶æ„æ›´ç²¾ç®€ã€‚\n- åœ¨æ•´ä½“é€Ÿåº¦ä¸Šæœ‰ä¸€å®šçš„ä¼˜åŠ¿ã€‚\n- éœ€è¦å¯¹ OS è¿›è¡Œä¿®æ”¹ï¼Œåœ¨ç”¨æˆ·ä½“éªŒæ–¹é¢æ¯”è¾ƒéº»çƒ¦ã€‚ - Xen\n- VMWare ESXi\n- å¾®è½¯ Hyper-V\nç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æ˜¯éšç€è™šæ‹ŸåŒ–æŠ€æœ¯çš„åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³› lntlã€AMD ç­‰ç¡¬ä»¶å‚å•†é€šè¿‡å¯¹ç¡¬ä»¶çš„æ”¹é€ æ¥æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯ã€‚\nå¸¸ç”¨äºä¼˜åŒ–å…¨è™šæ‹ŸåŒ–å’ŒåŠè™šæ‹ŸåŒ–äº§å“ï¼Œåƒ VMware Workstationï¼Œå®ƒè™½ç„¶å±äºå…¨è™šæ‹ŸåŒ–ï¼Œä½†å®ƒåœ¨ 6.0 ç‰ˆæœ¬ä¸­å¼•å…¥äº†ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œæ¯”å¦‚ Intel çš„ VT-x å’Œ AMD çš„ AMD-Vã€‚ä¸»æµå…¨è™šæ‹ŸåŒ–å’ŒåŠè™šæ‹ŸåŒ–äº§å“éƒ½æ”¯æŒç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ã€‚(VirtualBox,KVM,Xen ç­‰)\nè¾…åŠ©äº§å“ - VT-x\n- AMD-V\nå…¨è™šæ‹ŸåŒ–\n\u003c!DOCTYPE html\u003e Responsive Image åŠè™šæ‹ŸåŒ–\n\u003c!DOCTYPE html\u003e Responsive Image å…¨è™šæ‹ŸåŒ–ä»£è¡¨ KVM å’ŒåŠè™šæ‹ŸåŒ–ä»£è¡¨ Xen æ¶æ„å¯¹æ¯” æ¶æ„ æè¿° å¯¹æ¯” ç¤ºæ„å›¾ å…¨è™šæ‹ŸåŒ–ï¼šKVM KVM(Kernel\u0026ndash;Based Virtual Machines) æ˜¯ä¸€ä¸ªåŸºäº Linux å†…æ ¸çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥å°† Linux å†…æ ¸è½¬æ¢ä¸º Hypervisorã€‚.ä»è€Œä½¿å¾— Linuxp å†…æ ¸èƒ½å¤Ÿç›´æ¥ç®¡ç†è™šæ‹Ÿæœºï¼Œç›´æ¥è°ƒç”¨ Linux å†…æ ¸ä¸­çš„å†…å­˜ç®¡ç†ã€è¿›ç¨‹ç®¡ç†å­ç³»ç»Ÿæ¥ç®¡ç†è™šæ‹Ÿæœºã€‚ - æ”¯æŒå…¨è™šæ‹ŸåŒ–\n- å†…ç½®åœ¨å†…æ ¸ä¸­\n- ä¾¿äºç‰ˆæœ¬å®‰è£…ã€å‡çº§ã€ç»´æŠ¤ï¼Œæ€§èƒ½é«˜\næ€»ç»“ï¼šKVM å¹³å°æ¶æ„ä¾§é‡æ€§èƒ½ \u003c!DOCTYPE html\u003e Responsive Image åŠè™šæ‹ŸåŒ–ï¼šXen Xen:ç›´æ¥æŠŠæ“ä½œç³»ç»Ÿå†…æ ¸æ”¹äº†ï¼ŒæŠŠ OS æ”¹æˆä¸€ä¸ªè½»é‡çº§ Hypervisor1 åœ¨é‡Œé¢è¿è¡Œäº†ä¸€ä¸ªç®¡ç†æ‰€æœ‰èµ„æºä½œèµ„æºè°ƒåº¦çš„ Domain0ã€‚\nç»„æˆï¼šç”± Xen Hypervisor(è™šæ‹ŸåŒ–å±‚)ã€Domin0(ç®¡ç†ä¸»æœº)ã€Domin U(ç”¨æˆ·è™š\næ‹Ÿæœº)\n- æ”¯æŒå…¨è™šæ‹ŸåŒ–ã€åŠè™šæ‹ŸåŒ–\n- éœ€è¦å¯¹å†…æ ¸ä¿®æ”¹\n- æ›´æ–°ç‰ˆæœ¬ï¼ŒXen éœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ªå†…æ ¸éš”ç¦»æ€§å¥½\næ€»ç»“ï¼šXen å¹³å°æ¶æ„ä¾§é‡å®‰å…¨æ€§ \u003c!DOCTYPE html\u003e Responsive Image å®¹å™¨ å®¹å™¨ï¼šåŒ…è£…æˆ–è£…è½½ç‰©å“çš„è´®å­˜å™¨ï¼Œåˆ©ç”¨ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä¸€ Liux æˆ– Windows æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼Œå®ç° App ä¸æ“ä½œç³»ç»Ÿçš„è§£è€¦ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸»æµå®¹å™¨æŠ€æœ¯ å®šä¹‰ï¼šDocker) å±äº Liux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ï¼Œä»–æ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux å®¹å™¨è§£å†³æ–¹æ¡ˆã€‚ ä½œç”¨ï¼šå°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚æœ‰äº† Dockerï¼Œå°±ä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚\nç»„æˆï¼šå®¢æˆ·ç«¯ (Docker Client)ã€å®ˆæŠ¤è¿›ç¨‹ (Docker Daemon)ã€é•œåƒï¼ˆDocker Image)ã€å®¹å™¨ (DockerContainer)ã€ä»“åº“ï¼ˆDocker Registry)\n\u003c!DOCTYPE html\u003e Responsive Image å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ« è™šæ‹ŸåŒ– å®¹å™¨ éš”ç¦»æ€§å¼ºï¼Œæœ‰ç‹¬ç«‹çš„ GUEST OS å…±äº«å†…æ ¸å’Œ OSï¼Œéš”ç¦»æ€§å¼± è™šæ‹ŸåŒ–æ€§èƒ½å·® (\u0026gt;15%) è®¡ç®—/å­˜å‚¨æ— æŸè€—ï¼Œæ—  Guest0S å†…å­˜å¼€é”€ï¼ˆ200M) è™šæ‹Ÿæœºé•œåƒåºå¤§ï¼ˆåå‡  G å‡ å G),ä¸”å®ä¾‹åŒ–æ—¶ä¸èƒ½å…±äº« Docker å®¹å™¨é•œè±¡ 200300Mï¼Œä¸”å…¬å…±åŸºç¡€é•œè±¡å®ä¾‹åŒ–æ—¶\nå¯ä»¥å…±äº« è™šæ‹Ÿæœºé•œè±¡ç¼ºä¹ç»Ÿä¸€æ ‡å‡† Docker æä¾›äº†å®¹å™¨åº”ç”¨é•œè±¡äº‹å®æ ‡å‡†ï¼ŒOCI æ¨åŠ¨è¿›ä¸€æ­¥æ ‡\nå‡†åŒ– è™šæ‹Ÿæœºåˆ›å»ºæ…¢ (\u0026gt;2 åˆ†é’Ÿ) ç§’çº§åˆ›å»º (\u0026lt;10s)\nç›¸å½“äºå»ºç«‹ç´¢å¼• è™šæ‹Ÿæœºå¯åŠ¨æ…¢ (\u0026gt;30s) è¯»æ–‡ä»¶é€ä¸ªåŠ è½½ ç§’çº§ (\u0026lt;1sï¼Œä¸å«åº”ç”¨æœ¬èº«å¯åŠ¨) èµ„æºè™šæ‹ŸåŒ–ç²’åº¦ä½ï¼Œå•æœº 10~100 è™šæ‹Ÿæœº å•æœºæ”¯æŒ 1000+ å®¹å™¨\nå¯†åº¦å¾ˆé«˜ï¼Œé€‚åˆå¤§è§„æ¨¡çš„éƒ¨ç½² è®¡ç®—è™šæ‹ŸåŒ– ä»æœåŠ¡å™¨ç»„å»ºè§’åº¦æ¥çœ‹ï¼Œè®¡ç®—è™šæ‹ŸåŒ–å¯åˆ†ä¸ºï¼š\nCPU è™šæ‹ŸåŒ–ï¼šä¿éšœ CPU èµ„æºçš„åˆç†è°ƒåº¦ä»¥åŠ VM ä¸Šçš„æŒ‡ä»¤èƒ½å¤Ÿæ­£å¸¸é«˜æ•ˆçš„æ‰§è¡Œã€‚ å†…å­˜è™šæ‹ŸåŒ–ï¼šä¿éšœå†…å­˜ç©ºé—´çš„åˆç†åˆ†é…ã€ç®¡ç†ï¼Œéš”ç¦»ï¼Œä»¥åŠé«˜æ•ˆå¯é åœ°ä½¿ç”¨ã€‚ I/O è™šæ‹ŸåŒ–ï¼šä¿éšœ VM çš„ 1O éš”ç¦»ä¸æ­£å¸¸é«˜æ•ˆçš„æ‰§è¡Œã€‚ å¸¸è§çš„è®¡ç®—æœåŠ¡æ¶æ„æœ‰ï¼š\nOpenStack Nova é˜¿é‡Œäº‘ ECS è…¾è®¯äº‘ CVM Nova OpenStack æ˜¯å¼€æºçš„äº‘å¹³å°ï¼Œé€šè¿‡ä¸åŒçš„ç»„ä»¶æä¾›è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œã€æ•°æ®åº“ç­‰å¤šç§äº‘æœåŠ¡ã€‚å…¶ä¸­è®¡ç®—æœåŠ¡ç”± Nova ç»„ä»¶æä¾›ï¼Œé€šè¿‡ nova-API ä¸å…¶ä»–ç»„ä»¶é€šä¿¡ï¼Œé€šè¿‡ nova-computex å¯¹æ¥ä¸åŒçš„è™šæ‹Ÿå±‚æä¾›è®¡ç®—è™šæ‹ŸåŒ–æœåŠ¡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ›å»ºå®ä¾‹æµç¨‹ï¼šåˆ›å»ºå®ä¾‹è¯·æ±‚ nova-apiï¼Œä¼šå”¤é†’ nova-databaseï¼Œè¯·æ±‚åˆ·æ–°æ•°æ®åº“ã€‚å°†è¯·æ±‚ç»™é˜Ÿåˆ—ç»„ä»¶ï¼Œnova-scheduler ä»é˜Ÿåˆ—ä¸­å–å‡ºè¯·æ±‚ï¼Œè¯·æ±‚è¿è¡Œç›¸å¯¹åº”çš„è™šæ‹Ÿæœºã€‚è¦è¿è¡Œä¸åŒçš„è™šæ‹Ÿæœºï¼Œéœ€è¦ä¸åŒçš„å¹³å°æ”¯æŒï¼ˆKVMï¼ŒXen,VMwareï¼‰ã€‚è™šæ‹Ÿæœºä¸èƒ½ç›´æ¥ä¸æ•°æ®åº“ç›´æ¥äº¤äº’ï¼Œéœ€è¦é€šè¿‡ nova-conductor è½¬å‘ã€‚\nECS äº‘æœåŠ¡å™¨ ECS(Elastic Compute Service) æ˜¯é˜¿é‡Œäº‘æä¾›çš„åŸºäº KVM è™šæ‹ŸåŒ–çš„å¼¹æ€§è®¡ç®—æœåŠ¡ï¼Œå»ºç«‹åœ¨é˜¿é‡Œäº‘é£å¤© (Apsara) åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿä¸Šã€‚ è¯·æ±‚çš„ä¸»è¦è°ƒç”¨æµç¨‹ä¸ºï¼šOpenAPIã€.ä¸šåŠ¡å±‚ã€æ§åˆ¶ç³»ç»Ÿã€å®¿ä¸»æœºæœåŠ¡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image CVM äº‘æœåŠ¡å™¨ CVM(Cloud Virtual Machine)) æ˜¯è…¾è®¯æä¾›çš„åŸºäº KVM è™šæ‹ŸåŒ–çš„å¼¹æ€§è®¡ç®—æœåŠ¡ï¼Œå»ºç«‹åœ¨è…¾è®¯äº‘åˆ†å¸ƒå¼èµ„æºç®¡ç†è°ƒåº¦ç³»ç»Ÿ VStation.ä¸Šã€‚ è¯·æ±‚çš„ä¸»è¦è°ƒç”¨æµç¨‹ä¸ºï¼šAPI Serverã€.VStationã€æœåŠ¡å™¨é›†ç¾¤ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image CPU è™šæ‹ŸåŒ– åœ¨ç‰©ç†æœºï¼ˆå®¿ä¸»æœºï¼‰ä¸­é€šè¿‡çº¿ç¨‹æˆ–è¿›ç¨‹è¿™ç§çº¯è½¯ä»¶æ–¹å¼æ¨¡æ‹Ÿå‡ºå‡çš„ CPUï¼Œé€šè¿‡ CPU è™šæ‹ŸåŒ–å°±å¯ä»¥å°†ä¸€ä¸ªç‰©ç† CPU å‘ç»™ä¸åŒçš„è™šæ‹Ÿæœºä½¿ç”¨ã€‚\nè™šæ‹Ÿå‡ºæ¥çš„æ¯é¢— CPU å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹ï¼Œå› æ­¤ç‰©ç† CPU æ ¸æ•°è¦å¤§äºè™šæ‹Ÿ CPU æ€»æ ¸æ•°ã€‚\nCPU QoS(Quality of Service) æœåŠ¡è´¨é‡ QoS ç”¨æ¥æ§åˆ¶è™šæ‹Ÿæœºä½¿ç”¨ CPU èµ„æºé‡çš„å¤§å°ã€‚ CPU èµ„æºé™é¢ï¼šæ§åˆ¶è™šæ‹Ÿæœºå ç”¨ç‰©ç†èµ„æºä½¿ç”¨çš„ä¸Šé™ã€‚ CPU èµ„æºä»½é¢ï¼šå®šä¹‰äº†å¤šå°è™šæ‹Ÿæœºåœ¨ç«äº‰ç‰©ç† CPU èµ„æºæ—¶ï¼Œéœ€æŒ‰æ¯”ä¾‹åˆ†é…è®¡ç®—èµ„æºã€‚ CPU é¢„ç•™èµ„æºï¼šå®šä¹‰äº†å¤šå°è™šæ‹Ÿæœºåœ¨ç«äº‰ç‰©ç† CPU æ—¶ï¼Œæ¯å°è™šæ‹Ÿæœºæœ€ä½åˆ†é…çš„è®¡ç®—èµ„æºã€‚\nNUMA NUMA(Non Uniform Memory Access Architecture) éç»Ÿä¸€å†…å­˜è®¿é—®ä½“ç³»ç»“æ„ï¼Œæé«˜ç‰©ç†æœåŠ¡å™¨æ€§èƒ½çš„ä¸€ç§æŠ€æœ¯ã€‚\nå°†ç‰©ç†æœåŠ¡å™¨çš„ CPU å’Œå†…å­˜èµ„æºåˆ†åˆ°å¤šä¸ª node ä¸Šï¼Œnode å†…çš„å†…å­˜è®¿é—®æ•ˆç‡æœ€é«˜ã€‚\nNUMA ä¿è¯äº†ä¸€ä¸ª VM ä¸Šçš„ VCPU å°½é‡åˆ†é…åˆ°åŒä¸€ä¸ª node ä¸­çš„ç‰©ç† CPU ä¸Šï¼Œå¦‚æœä¸€å° VM çš„ VCPU è·¨ node è®¿é—®å†…å­˜çš„è¯ï¼Œè®¿é—®çš„å»¶æ—¶è‚¯å®šå¢åŠ ã€‚\nå†…å­˜è™šæ‹ŸåŒ– \u003c!DOCTYPE html\u003e Responsive Image è™šæ‹ŸåŒ–ç±»å‹ å…¨è™šæ‹ŸåŒ– åŠè™šæ‹ŸåŒ– ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– ä¸ºæ¯ä¸ª VM ç»´æŠ¤ä¸€ä¸ªå½±å­é¡µè¡¨è®°å½•è™šæ‹ŸåŒ–å†…å­˜ä¸ç‰©ç†å†…å­˜çš„æ˜ å°„å…³ç³»ï¼ŒVMM å°†å½±å­é¡µè¡¨æäº¤ç»™ CPU çš„å†…å­˜ç®¡ç†å•å…ƒ MMU è¿›è¡Œåœ°å€è½¬æ¢ï¼ŒVM çš„é¡µè¡¨æ— éœ€æ”¹åŠ¨ã€‚ é‡‡ç”¨é¡µè¡¨å†™å…¥æ³•ï¼Œä¸ºæ¯ä¸ª VM åˆ›å»º\nä¸€ä¸ªé¡µè¡¨å¹¶å‘è™šæ‹ŸåŒ–å±‚æ³¨å†Œã€‚VM\nè¿è¡Œè¿‡ç¨‹ä¸­ VMM ä¸æ–­ç®¡ç†å’Œç»´æŠ¤\nè¯¥é¡µè¡¨ï¼Œç¡®ä¿ VM èƒ½ç›´æ¥è®¿é—®åˆ°åˆ\né€‚çš„åœ°å€ã€‚ EPT/NPT æ˜¯å†…å­˜ç®¡ç†å•å…ƒ MMU çš„\næ‰©å±•ï¼ŒCPU ç¡¬ä»¶ä¸€ä¸ªç‰¹æ€§ï¼Œé€šè¿‡\nç¡¬ä»¶æ–¹å¼å®ç° GuestOS ç‰©ç†å†…å­˜åœ°\nå€åˆ°ä¸»æœºç‰©ç†å†…å­˜åœ°å€çš„è½¬æ¢ï¼Œç³»\nç»Ÿå¼€é”€æ›´ä½ï¼Œæ€§èƒ½æ›´é«˜ã€‚ å†…å­˜å¤ç”¨æŠ€æœ¯ å†…å­˜å¤ç”¨æ˜¯æŒ‡åœ¨æœåŠ¡å™¨ç‰©ç†å†…å­˜ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç»¼åˆè¿ç”¨å†…å­˜å¤ç”¨æŠ€æœ¯å¯¹å†…å­˜è¿›è¡Œåˆ†æ—¶å¤ç”¨ã€‚ å†…å­˜å¤ç”¨æŠ€æœ¯æœ‰ï¼š\nå†…å­˜æ°”æ³¡ï¼šè™šæ‹ŸåŒ–å±‚å°†è¾ƒç©ºé—² VM å†…å­˜ï¼Œåˆ†é…ç»™å†…å­˜ä½¿ç”¨è¾ƒé«˜çš„è™šæ‹Ÿæœºã€‚å†…å­˜çš„å›æ”¶å’Œåˆ†é…ç”±è™šæ‹ŸåŒ–å±‚å®ç°ï¼Œè™šæ‹Ÿæœºä¸Šçš„åº”ç”¨æ— æ„ŸçŸ¥ï¼Œæé«˜ç‰©ç†å†…å­˜åˆ©ç”¨ç‡ã€‚ï¼ˆè™šæ‹Ÿæœºåˆ†é…çš„å†…å­˜ä¸è¶…è¿‡ç‰©ç†æœºæ€»å†…å­˜ï¼‰ å†…å­˜äº¤æ¢ï¼šå°†å¤–éƒ¨å­˜å‚¨è™šæ‹Ÿæˆå†…å­˜ç»™ VM ä½¿ç”¨ï¼Œå°† VM ä¸Šé•¿æ—¶é—´æœªè®¿é—®çš„æ•°æ®å­˜æ”¾åˆ°å¤–éƒ¨å­˜å‚¨ä¸Šï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚VM å†æ¬¡è®¿é—®è¿™äº›æ•°æ®æ˜¯é€šè¿‡æ˜ å°„åœ¨ä¸å†…å­˜ä¸Šçš„æ•°æ®è¿›è¡Œäº¤æ¢ã€‚ å†…å­˜å…±äº«ï¼šVM åªå¯¹å…±ç”¨çš„å†…å­˜ï¼ˆå…±äº«æ•°æ®å†…å®¹ä¸ºé›¶çš„å†…å­˜é¡µï¼‰åšåªè¯»æ“ä½œï¼Œæœ‰å†™æ“ä½œæ—¶è¿ç”¨å†™æ—¶å¤åˆ¶ (VM æœ‰å†™æ“ä½œæ—¶ï¼Œå¼€è¾Ÿå¦ä¸€ç©ºé—´ï¼Œå¹¶ä¿®æ”¹æ˜ å°„) IO è™šæ‹ŸåŒ– å…¨è™šæ‹ŸåŒ– åŠè™šæ‹ŸåŒ– Pass-Thorughï¼ˆç›´é€šï¼‰ ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– é€šè¿‡è½¯ä»¶æ¨¡æ‹Ÿçš„å½¢å¼æ¨¡æ‹Ÿ O è®¾å¤‡ï¼Œä¸éœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œå¯¹è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿä¹Ÿä¸éœ€è¦ä¿®æ”¹ï¼ˆå› ä¸ºæ¨¡æ‹Ÿçš„éƒ½æ˜¯ä¸€ä¸ªå¸¸è§çš„ç¡¬ä»¶ç½‘å¡ï¼Œå¦‚ IntelE1000ï¼Œä¸»æµæ“ä½œç³»ç»Ÿä¸€èˆ¬éƒ½è‡ªå¸¦è¿™äº›é©±åŠ¨ï¼Œå› æ­¤é»˜è®¤æƒ…ä¸‹è™šæ‹Ÿæœºä¸éœ€è¦å†å®‰è£…é©±åŠ¨ã€‚ç¼ºç‚¹å°±æ˜¯æ€§èƒ½å·®ã€‚ ç”± Hypervisor æä¾›èµ„æºè°ƒç”¨æ¥å£ã€‚VM é€šè¿‡ç‰¹å®šçš„è°ƒç”¨æ¥å£ä¸ Hypervisor é€šä¿¡ï¼Œå®Œæˆè·å–å®Œæ•´/O èµ„æºæ§åˆ¶æ“ä½œã€‚(éœ€ä¿®æ”¹å†…æ ¸åŠé©±åŠ¨ç¨‹åºï¼Œå­˜åœ¨ç§»æ¤æ€§å’Œé€‚ç”¨æ€§é—®é¢˜ï¼Œå¯¼è‡´å…¶ä½¿ç”¨å—é™ã€‚) Hypervisor] ç›´æ¥æŠŠç¡¬ä»¶ PCI è®¾å¤‡åˆ†é…ç»™è™šæ‹Ÿç‹¬å ä½¿ç”¨ï¼Œæ€§èƒ½æŒ¡å½“ç„¶å¥½å•¦ã€‚ä½†æ˜¯æµªé—ç¡¬ä»¶è®¾å¤‡ï¼Œä¸”é…ç½®å¤æ‚ï¼Œé¦–å…ˆéœ€è¦åœ¨ hypervisor æŒ‡å®šé€šè¿‡ PClid æ–¹å¼åˆ†é…ç»™æŒ‡å®šçš„è™šæ‹Ÿæœºï¼Œç„¶åè™šæ‹Ÿæœºå†è¯†åˆ«åˆ°è®¾å¤‡å†å®‰è£…é©±åŠ¨æ¥ä½¿ç”¨ã€‚ é€šè¿‡ç¡¬ä»¶çš„è¾…åŠ©å¯ä»¥è®©è™šæ‹Ÿæœºç›´æ¥è®¿é—®ç‰©ç†è®¾å¤‡ï¼Œè€Œä¸éœ€è¦é€šè¿‡ VMMã€‚æœ€å¸¸ç”¨çš„å°±æ˜¯ SR-lOV(Single Root I/OVirtualizmion)å•æ ¹ I/O è™šæ‹ŸåŒ–æ ‡å‡†ï¼Œè¯¥æŠ€æœ¯å¯ä»¥ç›´æ¥è™šæ‹Ÿå‡º 128-512 ç½‘å¡ï¼Œå¯ä»¥è®©è™šæ‹Ÿæœºéƒ½æ‹¿åˆ°ä¸€å—ç‹¬ç«‹çš„ç½‘å¡ï¼Œç›´æ¥ä½¿ç”¨/O èµ„æºã€‚ å¸¸è§é›†ç¾¤ç­–ç•¥ é›†ç¾¤ç®€ä»‹ é›†ç¾¤æ˜¯ä¸€ç§è®¡ç®—æœºç³»ç»Ÿï¼Œé€šè¿‡ä¸€ç»„è®¡ç®—æœºæˆ–æœåŠ¡å™¨çš„è½¯ç¡¬ä»¶è¿æ¥èµ·æ¥é«˜åº¦ç´§å¯†åœ°åä½œå®Œæˆè®¡ç®—å·¥ä½œã€‚åœ¨å®¢æˆ·ç«¯çœ‹æ¥ä¸ºå…¶æä¾›æœåŠ¡çš„åªæœ‰ä¸€å°è®¾å¤‡ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä¸€ç¾¤è®¾å¤‡çš„é›†åˆï¼Œåªä¸è¿‡è¿™äº›è®¾å¤‡æä¾›çš„æœåŠ¡ä¸€æ ·ã€‚\né›†ç¾¤ç³»ç»Ÿä¸­å•ä¸ªè®¡ç®—æœºé€šå¸¸ç§°ä¸ºèŠ‚ç‚¹ï¼Œé€šè¿‡å±€åŸŸç½‘è¿æ¥ï¼Œåˆ©ç”¨å¤šä¸ªè®¡ç®—æœºè¿›è¡Œå¹¶è¡Œè®¡ç®—è·å¾—å¾ˆé«˜è®¡ç®—é€Ÿåº¦ï¼Œä¹Ÿå¯ä»¥ç”¨å¤šä¸ªè®¡ç®—æœºåšå¤‡ä»½æé«˜å¯é æ€§ã€‚ï¼ˆå¹¶è¡Œè®¡ç®—æŠ€æœ¯ï¼‰\nHA ç­–ç•¥ HA(High Availability) é«˜å¯ç”¨æ€§ï¼Œä¸€ç§è®©æœåŠ¡ä¸­æ–­å°½å¯èƒ½å°‘çš„æŠ€æœ¯ã€‚å°†å¤šå°ä¸»æœºç»„å»ºæˆä¸€ä¸ªæ•…éšœè½¬ç§»é›†ç¾¤ï¼Œè¿è¡Œåœ¨é›†ç¾¤ä¸Šçš„æœåŠ¡ï¼ˆæˆ– VM) ä¸ä¼šå› ä¸ºå•å°ä¸»æœºçš„æ•…éšœè€Œåœæ­¢ã€‚\næå‡æ•…éšœæ¢å¤é€Ÿåº¦ï¼Œé™ä½ä¸šåŠ¡ä¸­æ–­æ—¶é—´ã€ä¿éšœä¸šåŠ¡è¿ç»­æ€§ã€å®ç°ä¸€å®šçš„ç³»ç»Ÿè‡ªç»´æŠ¤ã€‚\nDRS ç­–ç•¥ DRS(Dynamic resource scheduling) åŠ¨æ€èµ„æºè°ƒåº¦ï¼Œæ ¹æ®å¯¹èµ„æºæ± èµ„æºè´Ÿè½½çš„åŠ¨æ€ç›‘æ§ï¼Œåˆç†è§¦å‘å‡åŒ€åˆ†é…è§„ä¾§ï¼Œå®ç°èµ„æºæ± ä¸­çš„ç‰©ç†æœåŠ¡å™¨ä¹‹é—´é‡æ–°åˆ†é…èµ„æºï¼Œè¾¾åˆ°è´Ÿè½½å‡è¡¡ã€æ¶ˆå³°å¡«è°·ã€‚\nå½“ç‰©ç†æœåŠ¡å™¨ä¸Šè´Ÿè½½è¿‡å¤§æ—¶ï¼Œé€šè¿‡ DRS å°†è™šæ‹Ÿæœºè¿ç§»åˆ°å…¶ä»–è´Ÿè½½è¾ƒè½»çš„ç‰©ç†æœåŠ¡å™¨ä¸Šã€‚å½“è™šæ‹Ÿæœºé‡åˆ°è´Ÿè½½å¢å¤§æ—¶ï¼ŒDRS å°†ä¸ºèµ„æºæ± ä¸­çš„ç‰©ç†æœåŠ¡å™¨é‡æ–°åˆ†é…è™šæ‹Ÿæœºå¯ä½¿ç”¨èµ„æºï¼Œåœ¨å¤šä¸ªè™šæ‹Ÿæœºä¹‹é—´æ™ºèƒ½åœ°åˆ†é…å¯ç”¨èµ„æºã€‚\nDPM ç­–ç•¥ DPMï¼ˆDistributed power management) åˆ†å¸ƒå¼ç”µæºç®¡ç†ï¼Œç”¨äºä¸šåŠ¡è¾ƒè½»æ—¶ï¼ŒæŠŠè™šæ‹ŸæœºåŠ¨æ€â€œé›†ä¸­â€åˆ°é›†ç¾¤ä¸­çš„å°‘éƒ¨åˆ†ä¸»æœºä¸Šï¼Œå°†å…¶ä»–ä¸»æœºå¾…æœºï¼ŒèŠ‚çœç”µåŠ›æ¶ˆè€—ï¼Œç­‰ä¸šåŠ¡é‡è¾ƒå¤§æ—¶ï¼Œå†é‡æ–°å”¤é†’ä¹‹å‰å¾…æœºçš„ä¸»æœºã€‚\næ‰§è¡Œ DPM ç­–ç•¥çš„å‰ææ˜¯å¼€å¯ DRS ç­–ç•¥ï¼Œå³é›†ç¾¤å¿…é¡»å…ˆè®¾ç½®å¥½ DRS ç­–ç•¥ï¼Œæ‰èƒ½è®¾ç½® DPM ç­–ç•¥ã€‚\nå­˜å‚¨è™šæ‹ŸåŒ– å­˜å‚¨ç±»å‹ å¸¸ç”¨çš„å­˜å‚¨ç±»å‹æœ‰ï¼š\næœ¬åœ°ç£ç›˜ DAS ç®€ä»‹ äº‘è®¡ç®—è™šæ‹ŸåŒ–åœºæ™¯ä¸‹çš„æœ¬åœ°ç£ç›˜æ˜¯æŒ‡ä½¿ç”¨æœåŠ¡å™¨æœ¬åœ°çš„ç£ç›˜èµ„æºï¼Œç»è¿‡ RAD(ç£ç›˜é˜µåˆ—) åŒ–åæä¾›ç»™è™šæ‹ŸåŒ–å¹³å°è¿›è¡Œä½¿ç”¨ã€‚ DAS(Direct-Attached Storage) ç›´è¿å¼å­˜å‚¨ï¼šä¸€ä¸ªå­˜å‚¨è®¾å¤‡ä¸ä½¿ç”¨å­˜å‚¨ç©ºé—´çš„æœåŠ¡å™¨\nç›´æ¥ç›¸è¿çš„æ¶æ„ã€‚DAS ä¸ºæœåŠ¡å™¨æä¾›å—çº§çš„å­˜å‚¨æœåŠ¡ã€‚ ä¼˜ç‚¹ - ä½¿ç”¨æ–¹ä¾¿\n- æ— å…±äº«æ¡†æ¶\n- å¤šä¸ªç£ç›˜åˆå¹¶æˆä¸€ä¸ªé€»è¾‘ç£ç›˜ï¼Œæ»¡è¶³æµ·é‡å­˜å‚¨çš„éœ€æ±‚\n- å¯å®ç°åº”ç”¨æ•°æ®å’Œæ“ä½œç³»ç»Ÿçš„åˆ†ç¦»\n- èƒ½æé«˜å­˜å–æ€§èƒ½\n- å®æ–½ç®€å•\nç¼ºç‚¹ - å¯¹è·¨æœåŠ¡å™¨æ¥è¯´æ²¡æœ‰å¤‡ä»½ã€å†—ä½™æœºåˆ¶ - æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œæ•°æ®ä¸å¯è®¿é—®\n- ä¼ è¾“è·ç¦»çŸ­ NAS SAN ç®€ä»‹ NAS(Network Attached Storage) ç½‘ç»œé™„åŠ å­˜å‚¨ï¼šå°†åˆ†å¸ƒã€ç‹¬ç«‹çš„æ•°æ®è¿›è¡Œæ•´åˆï¼Œé›†\nä¸­åŒ–ç®¡ç†ï¼Œä»¥ä¾¿å¯¹ä¸åŒä¸»æœºå’Œåº”ç”¨æœåŠ¡å™¨è¿›è¡Œè®¿é—®çš„æŠ€æœ¯ã€‚\nNAS å°†å­˜å‚¨è®¾å¤‡è¿æ¥åˆ°ç°æœ‰çš„ç½‘ç»œä¸Šæ¥æä¾›æ•°æ®å’Œæ–‡ä»¶æœåŠ¡ã€‚ SAN(Storage Area Networks) å­˜å‚¨åŒºåŸŸç½‘ç»œï¼šæ˜¯ä¸€ç§é«˜é€Ÿçš„ã€ä¸“é—¨ç”¨äºå­˜å‚¨æ“ä½œçš„ç½‘\nç»œï¼Œé€šå¸¸ç‹¬ç«‹äºè®¡ç®—æœºå±€åŸŸç½‘ã€‚\næä¾›åœ¨ä¸»æœºå’Œå­˜å‚¨ç³»ç»Ÿä¹‹é—´æ•°æ®ä¼ è¾“ï¼Œç½‘ç»œå†…éƒ¨æ•°æ®ä¼ è¾“çš„é€Ÿç‡å¿«ã€‚\nå¸¸è§æ¶æ„æœ‰ FC SANã€IP SANã€‚ ä¼˜ç‚¹ - æ”¯æŒå¿«ç…§ç­‰é«˜çº§ç‰¹æ€§\n- é›†ä¸­å­˜å‚¨\n- æä¾›å®‰å…¨é›†æˆç¯å¢ƒï¼ˆç”¨æˆ·è®¤è¯å’Œæˆæƒ)\n- å­˜å‚¨å®¹é‡åˆ©ç”¨ç‡é«˜\n- å…¼å®¹æ€§é«˜\n- ä¼ è¾“è·ç¦»è¿œ\n- é«˜å¸¦å®½\n- ä¸»æœºã€å­˜å‚¨è®¾å¤‡å¯ä»¥ç‹¬ç«‹æ‰©å±•\nç¼ºç‚¹ - ä¼ è¾“é€Ÿç‡ä½\n- å‰æœŸå®‰è£…å’Œè®¾å¤‡æˆæœ¬é«˜ - æˆæœ¬é«˜ã€å¤æ‚ äº‘å­˜å‚¨åŸºæœ¬æ¦‚å¿µ å­˜å‚¨èµ„æºï¼šè¡¨ç¤ºå®é™…çš„ç‰©ç†å­˜å‚¨è®¾å¤‡ï¼Œä¾‹å¦‚ DAS(ç›´è¿å­˜å‚¨)ã€NAS(ç½‘ç»œé™„åŠ å­˜å‚¨)ã€SA(å­˜å‚¨åŒºåŸŸç½‘ç»œ) ç­‰ã€‚\nå­˜å‚¨è®¾å¤‡ï¼šè¡¨ç¤ºå­˜å‚¨èµ„æºä¸­çš„ç®¡ç†å•å…ƒï¼Œä¾‹å¦‚æœ¬åœ°ç£ç›˜ã€LUN(é€»è¾‘å•å…ƒå·)ã€Storage å­˜å‚¨æ± ã€NAS å…±äº«ç›®å½•ç­‰ã€‚\næ•°æ®å­˜å‚¨ï¼šè¡¨ç¤ºè™šæ‹ŸåŒ–å¹³å°ä¸­å¯ç®¡ç†çš„å­˜å‚¨é€»è¾‘å•å…ƒï¼Œæ‰¿è½½äº†è™šæ‹Ÿæœºä¸šåŠ¡ï¼Œåˆ›å»ºç£ç›˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ›å»ºè™šæ‹Ÿå­˜å‚¨çš„æµç¨‹ åœ¨ä¸»æœºè½¯ä»¶ç•Œé¢æ·»åŠ å­˜å‚¨èµ„æº (SANã€DAS ç­‰)ï¼Œå¯¹ä¸»æœºçš„å¯åŠ¨è¿›è¡Œé…ç½®ã€‚ ä¸»æœºå…³è”å­˜å‚¨èµ„æºåï¼Œè¿›è¡Œæ‰«æå­˜å‚¨è®¾å¤‡ï¼ˆæœ¬åœ°ç£ç›˜ã€LUN ç­‰ï¼‰ï¼Œå°†å…·ä½“çš„è®¾å¤‡æ‰«æåˆ°ä¸»æœºä¸Šã€‚ ä¸»æœºåœ¨é€‰æ‹©å­˜å‚¨è®¾å¤‡ï¼Œè¿›è¡Œæ•°æ®å­˜å‚¨çš„æ·»åŠ ï¼Œå¹¶è¿›è¡Œè™šæ‹ŸåŒ–ã€‚ æœ€åå¯¹è™šæ‹ŸåŒ–å¥½çš„æ•°æ®å­˜å‚¨è¿›è¡Œåˆ›å»ºå·ç­‰æ“ä½œã€‚ \u003c!DOCTYPE html\u003e Responsive Image å­˜å‚¨æ¨¡å¼ éè™šæ‹ŸåŒ–å­˜å‚¨ è™šæ‹ŸåŒ–å­˜å‚¨ è£¸è®¾å¤‡æ˜ å°„ ä¼ ç»Ÿçš„å­˜å‚¨æ¨¡å¼ï¼Œå°±æ˜¯æŠŠç£ç›˜è¿›è¡Œåˆ†åŒºï¼Œåˆ†å‰²æˆä¸åŒçš„é€»è¾‘å·ï¼Œæ¯ä¸€ä¸ªé€»è¾‘å·å¯ä»¥ç»™åˆ°è™šæ‹Ÿæœºè¿›è¡Œä½¿ç”¨ã€‚ å°†ä¸åŒçš„å­˜å‚¨è®¾å¤‡ã€ç£ç›˜è¿›è¡Œæ ¼å¼åŒ–ï¼Œæ ¼å¼åŒ–çš„ç›®çš„æ˜¯å±è”½åº•å±‚å­˜å‚¨è®¾å¤‡çš„èƒ½åŠ›ã€æ¥å£\nåè®®ç­‰å·®å¼‚æ€§ï¼Œå°†å„ç§å­˜å‚¨èµ„æºè½¬åŒ–ä¸ºç»Ÿä¸€ç®¡ç†çš„æ•°æ®å­˜å‚¨èµ„æºã€‚ å°†ç£ç›˜ç›´æ¥ç»™åˆ°è™šæ‹Ÿæœºä½¿ç”¨ï¼Œè®©è™šæ‹Ÿæœºç›´æ¥å¤„ç†è°ƒç”¨å­˜å‚¨çš„å‘½ä»¤ï¼ˆç›´æ¥è®¿é—®ç£ç›˜ï¼‰ä¸­é—´è™šæ‹ŸåŒ–å±‚ä¸å†å¯¹å…¶è¿›è¡Œä»»ä½•å¹²é¢„ï¼ˆå·éƒ½ä¸éœ€è¦åˆ›å»ºï¼‰ ç‰¹ç‚¹ - æ€§èƒ½å¥½ (ä¸å†æœ‰ä¸­é—´çš„è™šæ‹ŸåŒ–å±‚ï¼ŒVM è¯»å†™ç›´æ¥åœ¨ç£ç›˜ä¸Š)ã€é€Ÿåº¦å¿«ã€æ•ˆç‡é«˜ã€‚\n- æ”¯æŒçš„å­˜å‚¨åŠŸèƒ½å°‘ï¼ˆä¸æ”¯æŒå¿«ç…§ã€ç²¾ç®€é…ç½®ç­‰ï¼‰\n- æ”¯æŒå¤šç§å­˜å‚¨åŠŸèƒ½ï¼ˆå¿«ç…§ã€ç²¾ç®€ç£ç›˜ã€ç£ç›˜æ‰©å®¹ã€å­˜å‚¨çƒ­è¿ç§»ç­‰)ã€‚\n- æ€§èƒ½ä¸é«˜ï¼ˆæ²¡æœ‰éè™šæ‹ŸåŒ–å­˜å‚¨å¥½ï¼‰\né€Ÿåº¦å¿«ï¼ˆä¸‰ç§æ¨¡å¼ä¸­æœ€å¿«ï¼‰ã€æ€§èƒ½å¥½ã€‚\næ”¯æŒçš„å­˜å‚¨åŠŸèƒ½å°‘ï¼ˆä¸æ”¯æŒå¿«ç…§ã€ç²¾ç®€é…ç½®ç­‰ï¼‰ï¼Œä»…æ”¯æŒéƒ¨åˆ†æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿæœºä½¿ç”¨ã€æ•°æ®å­˜å‚¨åªèƒ½æ•´å—å½“åšè£¸è®¾å¤‡æ˜ å°„çš„ç£ç›˜ä½¿ç”¨ï¼Œä¸å¯åˆ†å‰²ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å­˜å‚¨è™šæ‹ŸåŒ–æ–¹æ³• åŸºäºä¸»æœºçš„å­˜å‚¨è™šæ‹ŸåŒ– è‹¥ä»…æ˜¯å•ä¸ªä¸»æœºæœåŠ¡å™¨ï¼ˆæˆ–å•ä¸ªé›†ç¾¤ï¼‰è®¿é—®å¤šä¸ªç£ç›˜é˜µåˆ—ï¼Œå¯é‡‡ç”¨åŸºäºä¸»æœºçš„å­˜å‚¨è™šæ‹ŸåŒ–ï¼šè™šæ‹ŸåŒ–çš„å·¥ä½œé€šè¿‡ç‰¹å®šçš„è½¯ä»¶åœ¨ä¸»æœºæœåŠ¡å™¨ä¸Šå®Œæˆï¼Œç»è¿‡è™šæ‹ŸåŒ–çš„å­˜å‚¨ç©ºé—´å¯ä»¥è·¨è¶Šå¤šä¸ªå¼‚æ„çš„ç£ç›˜é˜µåˆ—ã€‚\nç‰¹ç‚¹ï¼š\nä¼˜ç‚¹æ˜¯ç¨³å®šæ€§ï¼Œä»¥åŠå¯¹å¼‚æ„å­˜å‚¨ç³»ç»Ÿçš„å¼€æ”¾æ€§ã€‚ è½¯ä»¶è¿è¡Œäºä¸»æœºä¸Šã€‚ ä»ä¸ä¸»æœºè¿æ¥çš„å­˜å‚¨ä¸Šåˆ›å»ºè™šæ‹Ÿå·ã€‚ \u003c!DOCTYPE html\u003e Responsive Image åŸºäºå­˜å‚¨è®¾å¤‡çš„è™šæ‹ŸåŒ– è‹¥å¤šä¸ªä¸»æœºæœåŠ¡å™¨éœ€è¦è®¿é—®åŒä¸€ä¸ªç£ç›˜é˜µåˆ—æ—¶ï¼Œå¯é‡‡ç”¨åŸºäºå­˜å‚¨è®¾å¤‡è™šæ‹ŸåŒ–ã€‚è™šæ‹ŸåŒ–çš„å·¥ä½œåœ¨é˜µåˆ—æ§åˆ¶å™¨ä¸Šå®Œæˆï¼Œå°†ä¸€ä¸ªé˜µåˆ—ä¸Šçš„å­˜å‚¨å®¹é‡åˆ’åˆ†å¤šä¸ªå­˜å‚¨ç©ºé—´ (LUN),ä¾›ä¸åŒçš„ä¸»æœºç³»ç»Ÿè®¿é—®ã€‚ä¸»è¦ç”¨åœ¨åŒä¸€å­˜å‚¨è®¾å¤‡å†…éƒ¨ï¼Œè¿›è¡Œæ•°æ®ä¿æŠ¤å’Œæ•°æ®è¿ç§»ã€‚\nä¼˜ç‚¹æ˜¯ä¸ä¸»æœºæ— å…³ï¼Œä¸å ç”¨ä¸»æœºèµ„æºï¼Œæ•°æ®ç®¡ç†åŠŸèƒ½ä¸°å¯Œã€‚ è½¯ä»¶è¿è¡Œäºå­˜å‚¨è®¾å¤‡ä¸­ä¸“é—¨çš„åµŒå…¥å¼ç³»ç»Ÿä¸Šã€‚ ä»ä¸ SAN è¿æ¥çš„å­˜å‚¨ä¸Šåˆ›å»ºè™šæ‹Ÿå·ã€‚ \u003c!DOCTYPE html\u003e Responsive Image åŸºäºç½‘ç»œçš„å­˜å‚¨è™šæ‹ŸåŒ– é€šè¿‡åœ¨å­˜å‚¨åŒºåŸŸç½‘ (SAN) ä¸­æ·»åŠ è™šä¼¼åŒ–å¼•æ“å®ç°çš„ï¼Œä¸»è¦ç”¨äºå¼‚æ„å­˜å‚¨ç³»ç»Ÿçš„æ•´åˆå’Œç»Ÿæ•°æ®ç®¡ç†ã€‚\nç‰¹ç‚¹ï¼š\nä¼˜ç‚¹æ˜¯ä¸ä¸»æœºæ— å…³ï¼Œä¸å ç”¨ä¸»æœºèµ„æºï¼› æ”¯æŒå¼‚æ„ä¸»æœºã€å¼‚æ„å­˜å‚¨è®¾å¤‡ï¼› èƒ½ä½¿ä¸åŒå­˜å‚¨è®¾å¤‡çš„æ•°æ®ç®¡ç†åŠŸèƒ½ç»Ÿä¸€ï¼Œç»Ÿä¸€ç®¡ç†å¹³å°ï¼Œå¯æ‰©å±•æ€§å¥½ã€‚ \u003c!DOCTYPE html\u003e Responsive Image å­˜å‚¨è™šæ‹ŸåŒ–çš„åŠŸèƒ½ å­˜å‚¨è™šæ‹ŸåŒ–å¯ä»¥æé«˜ç¡¬ä»¶èµ„æºçš„ä½¿ç”¨æ•ˆç‡ï¼Œç®€åŒ–ç³»ç»Ÿç®¡ç†çš„å¤æ‚åº¦ï¼Œå¢å¼ºäº‘å­˜å‚¨å¹³å°çš„å¯é æ€§ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æŠ€æœ¯å®ç°ï¼š\nç²¾ç®€ç£ç›˜å’Œç©ºé—´å›æ”¶ ç²¾ç®€ç£ç›˜å’Œç©ºé—´å›æ”¶ç”¨äºæé«˜å­˜å‚¨èµ„æºçš„ä½¿ç”¨æ•ˆç‡ã€å‡å°è™šæ‹Ÿæœºæœªä½¿ç”¨ç©ºé—´åœ¨ä¸»æœºä¸Šå ç”¨ç‡è¿‡å¤§çš„é—®é¢˜ã€‚\nç”¨æˆ·ç”¨å¤šå°‘åˆ†é…å¤šå°‘ç©ºé—´ï¼ˆè‡ªåŠ¨åˆ†é…ï¼‰\nç©ºé—´å›æ”¶å¯ä»¥å°†ç”¨æˆ·åˆ é™¤çš„æ•°æ®ç©ºé—´é‡Šæ”¾åˆ°æ•°æ®å­˜å‚¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¿«ç…§ æŒ‡å®šæ•°æ®é›†åˆçš„ä¸€ä¸ªå®Œå…¨å¯ç”¨æ‹·è´ï¼Œè¯¥æ‹·è´åŒ…æ‹¬ç›¸åº”æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼ˆæ‹·è´å¼€å§‹çš„æ—¶é—´ç‚¹) çš„æ˜ åƒã€‚ å¿«ç…§å¯ä»¥æ˜¯å…¶æ‰€è¡¨ç¤ºçš„æ•°æ®çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå¯ä»¥æ˜¯æ•°æ®çš„ä¸€ä¸ªå¤åˆ¶å“ã€‚ å¿«ç…§çš„ä½œç”¨ä¸»è¦æ˜¯èƒ½å¤Ÿè¿›è¡Œåœ¨çº¿æ•°æ®å¤‡ä»½æ¢å¤ã€‚ ä¸ºç”¨æˆ·æä¾›äº†æ•°æ®è®¿é—®é€šé“ ç‰¹ç‚¹\nè®°å½•äº†è™šæ‹Ÿæœºåœ¨æŸä¸€æ—¶é—´ç‚¹çš„å†…å®¹å’ŒçŠ¶ã€‚ æ¢å¤è™šæ‹Ÿæœºå¿«ç…§å¯ä»¥ä½¿è™šæ‹Ÿæœºå¤šæ¬¡å¿«é€Ÿæ¢å¤åˆ°æŸä¸€æ—¶é—´ç‚¹ã€‚ å¿«ç…§åŒ…å«ç£ç›˜å†…å®¹ã€è™šæ‹Ÿæœºé…ç½®ä¿¡æ¯ã€å†…å­˜æ•°æ®ã€‚ å¤šæ¬¡å¿«ç…§ä¹‹é—´ä¿å­˜å·®é‡æ•°æ®ï¼ŒèŠ‚çº¦å­˜å‚¨ç©ºé—´ã€‚ å¿«ç…§æ–¹å¼ä»‹ç» åˆ›å»ºå¿«ç…§æ—¶ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å·®åˆ†å·ï¼Œè™šæ‹Ÿæœºä¼šæŒ‚è½½è¿™ä¸ªå·®åˆ†å·ä½œä¸ºç£ç›˜æ–‡ä»¶ã€‚\nROW å†™æ—¶é‡å®šå‘ COW å†™æ—¶æ‹·è´ \u003c!DOCTYPE html\u003e Responsive Image å¿«ç…§é“¾ä»‹ç» å¯¹è™šæ‹Ÿæœºè¿›è¡Œå¤šæ¬¡çš„å¿«ç…§æ“ä½œï¼Œè¿™äº›å¤šæ¬¡çš„å¿«ç…§æ“ä½œå½¢æˆå¿«ç…§é“¾ã€‚\nè™šæ‹Ÿæœºå·å§‹ç»ˆæŒ‚è½½åœ¨å¿«ç…§é“¾çš„æœ€æœ«ç«¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é“¾æ¥å…‹éš† å°†æºå·å’Œå·®åˆ†å·ç»„åˆæ˜ å°„ä¸ºä¸€ä¸ªé“¾æ¥å…‹éš†å·ï¼Œç»™è™šæ‹Ÿæœºä½¿ç”¨ã€‚ä¸€ä¸ªé“¾æ¥å…‹éš†éœ€è¦å’ŒåŸå§‹è™šæ‹Ÿæœºå…±äº«åŒä¸€è™šæ‹Ÿç£ç›˜æ–‡ä»¶ã€‚ é‡‡ç”¨å…±äº«ç£ç›˜æ–‡ä»¶ç¼©çŸ­äº†åˆ›å»ºå…‹éš†è™šæ‹Ÿæœºçš„æ—¶é—´ï¼Œè¿˜èŠ‚çœäº†ç‰©ç†ç£ç›˜ç©ºé—´ã€‚ é€šè¿‡é“¾æ¥å…‹éš†ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä¸åŒçš„ä»»åŠ¡åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºã€‚ \u003c!DOCTYPE html\u003e Responsive Image è™šæ‹Ÿç£ç›˜æ–‡ä»¶è¿ç§» åŠŸèƒ½ï¼š\nå°†è™šæ‹Ÿæœºçš„ç£ç›˜ä»ä¸€ä¸ªæ•°æ®å­˜å‚¨è¿ç§»åˆ°å¦ä¸€ä¸ªæ•°æ®å­˜å‚¨ã€‚å¯ä»¥å°†è™šæ‹Ÿæœºçš„æ‰€æœ‰ç£ç›˜æ•´ä½“è¿ç§»ï¼Œä¹Ÿå¯ä»¥å•ä¸ªç£ç›˜åˆ†åˆ«è¿ç§»ã€‚ è™šæ‹Ÿæœºçš„å¿«ç…§å¯ä»¥ä¸€èµ·è¿ç§»ï¼Œè™šæ‹Ÿæœºå¼€å¯æˆ–è€…å…³é—­æ—¶éƒ½å¯ä»¥è¿ç§»ã€‚ ç‰¹ç‚¹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç½‘ç»œè™šæ‹ŸåŒ– è™šæ‹ŸåŒ–æ˜¯å¯¹æ‰€æœ‰ T èµ„æºçš„è™šæ‹ŸåŒ–ï¼Œæé«˜ç‰©ç†ç¡¬ä»¶çš„çµæ´»æ€§åŠåˆ©ç”¨æ•ˆç‡ã€‚äº‘è®¡ç®—ä¸­çš„è®¡ç®—å’Œå­˜å‚¨èµ„æºåˆ†åˆ«ç”±è®¡ç®—è™šæ‹ŸåŒ–å’Œå­˜å‚¨è™šæ‹ŸåŒ–æä¾›ï¼Œè€Œç½‘ç»œä½œä¸º T çš„é‡è¦èµ„æºä¹Ÿæœ‰ç›¸åº”çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œç½‘ç»œèµ„æºç”±ç½‘ç»œè™šæ‹ŸåŒ–æä¾›ã€‚\nç½‘ç»œæ˜¯ç”±å„ç§è®¾å¤‡ç»„æˆï¼Œæœ‰ä¼ ç»Ÿçš„ç‰©ç†ç½‘ç»œï¼Œè¿˜æœ‰è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçœ‹ä¸åˆ°çš„è™šæ‹Ÿç½‘ç»œã€‚å¦‚ä½•å‘ˆç°å’Œç®¡ç†å®ƒä»¬å°†æ˜¯ç½‘ç»œè™šæ‹ŸåŒ–çš„é¦–è¦ç›®æ ‡ã€‚\nå°†ç‰©ç†ç½‘ç»œè™šæ‹Ÿå‡ºå¤šä¸ªç›¸äº’éš”ç¦»çš„è™šæ‹Ÿç½‘ç»œï¼ˆé€»è¾‘ç½‘ç»œï¼‰ï¼Œä»è€Œä½¿å¾—ä¸åŒç”¨æˆ·ä¹‹é—´ä½¿ç”¨ç‹¬ç«‹çš„ç½‘ç»œèµ„æºï¼Œä»è€Œæé«˜ç½‘ç»œèµ„æºåˆ©ç”¨ç‡ï¼Œå®ç°å¼¹æ€§çš„ç½‘ç»œã€‚\nVLAN å°±æ˜¯ä¸€ç§ç½‘ç»œè™šæ‹ŸåŒ–ï¼Œåœ¨åŸæœ‰ç½‘ç»œåŸºç¡€ä¸Šé€šè¿‡ VLAN Tag:åˆ’åˆ†å‡ºå¤šä¸ªå¹¿æ’­åŸŸã€‚\nç½‘ç»œè™šæ‹ŸåŒ–ä¿éšœæˆ‘ä»¬åˆ›å»ºå‡ºæ¥çš„è™šæ‹Ÿæœºå¯ä»¥æ­£å¸¸ é€šä¿¡ã€è®¿é—®ç½‘ç»œã€‚\nèŠ‚çœç‰©ç†ä¸»æœºçš„ç½‘å¡è®¾å¤‡èµ„æºï¼Œå¹¶ä¸”å¯ä»¥æä¾›åº”ç”¨çš„è™šæ‹Ÿç½‘ç»œæ‰€éœ€çš„ L2 ä¸€ L7 å±‚ç½‘ç»œæœåŠ¡ã€‚\nç½‘ç»œè™šæ‹ŸåŒ–è½¯ä»¶æä¾›é€»è¾‘ä¸Šçš„äº¤æ¢æœºå’Œè·¯ç”±å™¨ (L2-L3),é€»è¾‘è´Ÿè½½å‡è¡¡å™¨ï¼Œé€»è¾‘é˜²ç«å¢™ (L4-L7) ç­‰ï¼Œä¸”å¯ä»¥ä»¥ä»»ä½•å½¢å¼è¿›è¡Œç»„è£…ï¼Œä»è€Œä¸ºè™šæ‹Ÿæœºæä¾›ä¸€ä¸ªå®Œæ•´çš„ L2-L7 å±‚çš„è™šæ‹Ÿç½‘ç»œæ‹“æ‰‘ã€‚\nç‰©ç†ç½‘ç»œåŒ…å«çš„è®¾å¤‡ è·¯ç”±å™¨ï¼šå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œè¿æ¥ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œã€‚\näºŒå±‚äº¤æ¢æœºï¼šå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œè½¬å‘æ•°æ®ã€‚\nä¸‰å±‚äº¤æ¢æœºï¼šå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œç»“åˆäº†éƒ¨åˆ†è·¯ç”±å’Œäº¤æ¢æœºçš„åŠŸèƒ½ã€‚\næœåŠ¡å™¨ç½‘å¡ï¼šæä¾›é€šä¿¡æœåŠ¡ã€‚\nè™šæ‹ŸåŒ–ä¸­çš„ç½‘ç»œæ¶æ„ ç½‘å¡è™šæ‹ŸåŒ–æ–¹æ³•æœ‰ï¼š\nè½¯ä»¶ç½‘å¡è™šæ‹ŸåŒ–\nä¸»è¦é€šè¿‡è½¯ä»¶æ§åˆ¶å„ä¸ªè™šæ‹Ÿæœºå…±äº«åŒä¸€å—ç‰©ç†ç½‘å¡å®ç°ã€‚è½¯ä»¶è™šæ‹Ÿå‡ºæ¥çš„ç½‘å¡å¯ä»¥æœ‰å•ç‹¬çš„ MAC åœ°å€ã€IP åœ°å€ã€‚ æ‰€æœ‰è™šæ‹Ÿæœºçš„è™šæ‹Ÿç½‘å¡é€šè¿‡è™šæ‹Ÿäº¤æ¢æœºä»¥åŠç‰©ç†ç½‘å¡è¿æ¥è‡³ç‰©ç†äº¤æ¢æœºã€‚è™šæ‹Ÿäº¤æ¢æœºè´Ÿè´£å°†è™šæ‹Ÿæœºä¸Šçš„æ•°æ®æŠ¥æ–‡ä»ç‰©ç†ç½‘å£è½¬å‘å‡ºå»ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ç¡¬ä»¶ç½‘å¡è™šæ‹ŸåŒ–\nä¸»è¦ç”¨åˆ°çš„æŠ€æœ¯æ˜¯å•æ ¹ I/O è™šæ‹ŸåŒ– (Single Root/O Virtulization,SR-lOV),å°±æ˜¯ I/O ç›´é€šæŠ€æœ¯ï¼Œé€šè¿‡ç¡¬ä»¶çš„è¾…åŠ©å¯ä»¥è®©è™šæ‹Ÿæœºç›´æ¥è®¿é—®ç‰©ç†è®¾å¤‡ï¼Œè€Œä¸éœ€è¦é€šè¿‡ VMMã€‚è¯¥æŠ€æœ¯å¯ä»¥ç›´æ¥è™šæ‹Ÿå‡º 128-512 ç½‘å¡ï¼Œå¯ä»¥è®©è™šæ‹Ÿæœºéƒ½æ‹¿åˆ°ä¸€å—ç‹¬ç«‹çš„ç½‘å¡ï¼Œç›´æ¥ä½¿ç”¨/O èµ„æºã€‚SR-OV èƒ½å¤Ÿè®©ç½‘ç»œä¼ è¾“ç»•è¿‡è½¯ä»¶æ¨¡æ‹Ÿå±‚ï¼Œç›´æ¥åˆ†é…åˆ°è™šæ‹Ÿæœºï¼Œè¿™æ ·å°±é™ä½äº†è½¯ä»¶æ¨¡æ‹Ÿå±‚ä¸­çš„/â—‹ å¼€é”€ã€‚ äº¤æ¢æœºè™šæ‹ŸåŒ–ï¼š\nOVS(Open vSwitch) å¼€æ”¾è™šæ‹ŸåŒ–è½¯ä»¶äº¤æ¢æœºï¼Œæ˜¯ä¸€æ¬¾åŸºäºè½¯ä»¶å®ç°çš„å¼€æºè™šæ‹Ÿä»¥å¤ªç½‘äº¤æ¢æœºï¼Œä½¿ç”¨å¼€æº Apache2.0 è®¸å¯åè®®ï¼Œä¸»è¦ç”¨äºè™šæ‹Ÿæœº VM ç¯å¢ƒã€‚ä¸ä¼—å¤šå¼€æºçš„è™šæ‹ŸåŒ–å¹³å°ç›¸æ•´åˆï¼ˆæ”¯æŒ Xenã€KVM åŠ VirtualBox å¤šç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼‰ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼šä¼ é€’è™šæ‹Ÿæœºä¹‹é—´çš„æµé‡ï¼Œå®ç°è™šæ‹Ÿæœºå’Œå¤–ç•Œç½‘ç»œçš„é€šä¿¡ã€‚ \u003c!DOCTYPE html\u003e Responsive Image è™šæ‹ŸåŒ–ä¸­æ•°æ®çš„è½¬å‘è·¯å¾„ ç›¸åŒç«¯å£ç»„ä¸åŒæœåŠ¡å™¨å†…çš„è™šæ‹Ÿæœºé€šè®¯éœ€è¦ç»è¿‡ç‰©ç†ç½‘ç»œã€‚ï¼ˆé»‘çº¿ï¼‰ ç›¸åŒç«¯å£ç»„ç›¸åŒæœåŠ¡å™¨å†…çš„è™šæ‹Ÿæœºé€šè®¯ä¸éœ€è¦ç»è¿‡ç‰©ç†ç½‘ç»œã€‚ï¼ˆçº¢çº¿ï¼‰ ä¸åŒç«¯å£ç»„ç›¸åŒæœåŠ¡å™¨çš„è™šæ‹Ÿæœºé€šè®¯éœ€è¦ç»è¿‡ç‰©ç†ç½‘ç»œã€‚ï¼ˆé»„è‰²ï¼‰ \u003c!DOCTYPE html\u003e Responsive Image é“¾è·¯è™šæ‹ŸåŒ– VPC(Virtual Port Channel) è™šé“¾è·¯èšåˆï¼Œæ˜¯æœ€å¸¸è§çš„äºŒå±‚è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚\né“¾è·¯èšåˆå°†å¤šä¸ªç‰©ç†ç«¯å£æ†ç»‘åœ¨ä¸€èµ·ï¼Œè™šæ‹Ÿæˆä¸ºä¸€ä¸ªé€»è¾‘ç«¯å£ã€‚ä½†ä¼ ç»Ÿé“¾è·¯èšåˆä¸èƒ½è·¨è®¾å¤‡ï¼ŒVPC å¾ˆå¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ—¢å¯ä»¥è·¨è®¾å¤‡ï¼Œåˆå¯ä»¥å¢åŠ é“¾è·¯å¸¦å®½ã€å®ç°é“¾è·¯å±‚çš„é«˜å¯ç”¨æ€§ã€‚\néš§é“åè®® (Tunneling Protocol)ï¼šæŒ‡é€šè¿‡éš§é“åè®®ä½¿å¤šä¸ªä¸åŒåè®®çš„ç½‘ç»œå®ç°äº’è”ã€‚ä½¿ç”¨éš§é“ä¼ é€’çš„æ•°æ®å¯ä»¥æ˜¯ä¸åŒåè®®çš„æ•°æ®å¸§æˆ–åŒ…ã€‚éš§é“å¯ä»¥å°†æ•°æ®æµå¼ºåˆ¶é€åˆ°ç‰¹å®šçš„åœ°å€ï¼Œå¹¶éšè—ä¸­é—´èŠ‚ç‚¹çš„ç½‘ç»œåœ°å€ï¼Œè¿˜å¯æ ¹æ®éœ€è¦ï¼Œæä¾›å¯¹æ•°æ®åŠ å¯†çš„åŠŸèƒ½ã€‚\nGRE(Generic Routing Encapsulation) é€šç”¨è·¯ç”±å°è£…ã€‚ IPsec(Internet Protocol Security)Internett åè®®å®‰å…¨ã€‚ \u003c!DOCTYPE html\u003e Responsive Image è™šæ‹Ÿç½‘ç»œ è™šæ‹Ÿç½‘ç»œ (Virtual Network):æ˜¯ç”±è™šæ‹Ÿé“¾è·¯ç»„æˆçš„ç½‘ç»œã€‚\nè™šæ‹Ÿç½‘ç»œèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å¹¶ä¸ä½¿ç”¨ç‰©ç†çº¿ç¼†è¿æ¥ï¼Œè€Œæ˜¯ä¾é ç‰¹å®šçš„è™šæ‹ŸåŒ–é“¾è·¯ç›¸è¿ã€‚\nå…¸å‹çš„è™šæ‹Ÿç½‘ç»œåŒ…æ‹¬ï¼š\nå±‚å ç½‘ç»œï¼ˆè™šæ‹ŸäºŒå±‚å»¶ä¼¸ç½‘ç»œï¼‰\nå±‚å ç½‘ç»œ (Overlay Network)ï¼šåœ¨ç°æœ‰ç½‘ç»œçš„åŸºç¡€ä¸Šæ­å»ºå¦å¤–ä¸€ç§ç½‘ç»œ\nå±‚å ç½‘ç»œå…è®¸å¯¹æ²¡æœ‰å¼• P åœ°å€æ ‡è¯†çš„ç›®çš„ä¸»æœºè·¯ç”±ä¿¡æ¯ã€‚\nå±‚å ç½‘ç»œå¯ä»¥å……åˆ†åˆ©ç”¨ç°æœ‰èµ„æºï¼Œåœ¨ä¸å¢åŠ æˆæœ¬çš„å‰æä¸‹ï¼Œæä¾›æ›´å¤šçš„æœåŠ¡ã€‚ï¼ˆæ¯”å¦‚ ADSL Internet æ¥å…¥çº¿è·¯å°±æ˜¯åŸºäºå·²ç»å­˜åœ¨çš„ PSTN ç½‘ç»œå®ç°)\n\u003c!DOCTYPE html\u003e Responsive Image å…¸å‹æŠ€æœ¯ï¼š\nVXLAN(Virtual eXtensible Local Area Network) è™šæ‹Ÿæ‰©å±•å±€åŸŸç½‘ï¼šå¾ˆå¥½åœ°è§£å†³äº†ç°æœ‰ VLAN æŠ€æœ¯æ— æ³•æ»¡è¶³å¤§äºŒå±‚ç½‘ç»œéœ€æ±‚çš„é—®é¢˜ã€‚ VXLAN æŠ€æœ¯æ˜¯ä¸€ç§å¤§äºŒå±‚çš„è™šæ‹Ÿç½‘ç»œæŠ€æœ¯ã€‚ åŸç†æ˜¯å¼•å…¥ä¸€ä¸ª UDP æ ¼å¼çš„å¤–å±‚éš§é“ä½œä¸ºæ•°æ®é“¾è·¯å±‚ï¼Œè€ŒåŸæœ‰æ•°æ®æŠ¥æ–‡å†…å®¹ä½œä¸ºéš§é“å‡€è·åŠ ä»¥ä¼ è¾“ã€‚ VPN ç½‘ç»œ\nVPN(Virtual Private Network) è™šæ‹Ÿä¸“ç”¨ç½‘ï¼šæ˜¯ä¸€ç§å¸¸ç”¨äºè¿æ¥ä¸­ã€å¤§å‹ä¼ä¸šæˆ–å›¢ä½“ä¸å›¢ä½“é—´çš„ç§äººç½‘ç»œçš„é€šä¿¡æ–¹æ³•ã€‚\né€šè¿‡å…¬ç”¨çš„ç½‘ç»œæ¶æ„ï¼ˆæ¯”å¦‚äº’è”ç½‘ï¼‰æ¥ä¼ é€å†…è”ç½‘çš„ä¿¡æ¯ã€‚ åˆ©ç”¨å·²åŠ å¯†çš„éš§é“åè®®æ¥è¾¾åˆ°ä¿å¯†ã€ç»ˆç«¯è®¤è¯ã€ä¿¡æ¯å‡†ç¡®æ€§ç­‰å®‰å…¨æ•ˆæœã€‚è¿™ç§æŠ€æœ¯å¯ä»¥ åœ¨ä¸å®‰å…¨çš„ç½‘ç»œä¸Šä¼ é€å¯é çš„ã€å®‰å…¨çš„ä¿¡æ¯ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF%E6%B1%87%E6%80%BB/","summary":"\u003ch1 id=\"äº‘è®¡ç®—æœåŠ¡ç±»å‹\"\u003eäº‘è®¡ç®—æœåŠ¡ç±»å‹\u003c/h1\u003e\n\u003cp\u003eä¼ ç»Ÿæ¶æ„=\u0026gt;Iaas=\u0026gt;Paas=\u0026gt;Saas\u003c/p\u003e\n\u003cp\u003eè‡ªå·±çƒ§é¥­=\u0026gt; å®å’šä¹°èœ=\u0026gt; ç¾å›¢å¤–å–=\u0026gt; é¤å…åƒé¥­\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-36-45-b25eafa700db3dce390dab2aeb3af4f9-20230531093640-f17dbe.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/09-36-45-b25eafa700db3dce390dab2aeb3af4f9-20230531093640-f17dbe.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"äº‘è®¡ç®—åŸºç¡€æŠ€æœ¯æ±‡æ€»"},{"content":"Devstack éƒ¨ç½² OpenStack è¯•éªŒå‘ç°åœ¨ Host ä¸º Ubuntu20.04 å’Œ 22.04 ä¸Šæ— æ³•é¡ºåˆ©å®‰è£… VirtualBoxï¼Œè¯·åœ¨ Ubuntu18.04 ä¸Šå®‰è£… VirtualBoxã€‚è™šæ‹Ÿæœºé•œåƒç‰ˆæœ¬ä¸º Ubuntu20.04ï¼Œä»¥ä¸‹æ­¥éª¤å¯ä»¥ç¨³å®šå¤ç°ï¼ŒOpenStack masterï¼ˆc424a7a299e37004d318107648bb18e157344985ï¼‰ç‰ˆæœ¬ã€‚\næ€»è€Œè¨€ä¹‹ï¼Œåœ¨ 18.04 ç‰ˆæœ¬ä¸Šå®‰è£… VirtualBoxï¼Œåœ¨ 20.04 ç‰ˆæœ¬ä¸Šå®‰è£… OpenStackã€‚\nå› ä¸ºå®‰è£… OpenStack å®¹æ˜“ç ´è¯ç³»ç»ŸåŒ…ä¾èµ–ï¼Œå¦‚æœä¸ºäº†å­¦ä¹ å»ºè®®åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…ã€‚\nå®‰è£…è¿‡ç¨‹ä¸­éœ€è¦ä¸‹è½½é•œåƒï¼Œè¯·ç¡®è®¤æœºå™¨å¯ä»¥è®¿é—®å¤–ç½‘ã€‚\nå®‰è£… VirtualBox sudo apt update sudo apt install virtualbox virtualbox-ext-pack ç¡®è®¤ VirtualBox é…ç½® è¯·ç¡®è®¤ VirtualBox é…ç½®å¦‚ä¸‹ï¼ŒVirtualBox é»˜è®¤é…ç½®ç¡¬ç›˜ä¸º 10Gï¼Œè¿œè¿œä¸å¤Ÿç”¨ï¼Œä¸ºäº†é¿å…åç»­çš„éº»çƒ¦ï¼Œè¯·ç¡®è®¤å¦‚ä¸‹é…ç½®ï¼š\nç£ç›˜å¤§äº 100G\nå†…å­˜å¤§äº 16G\nCPU å¤§äº 4 ä¸ª\nä¸‹è½½é•œåƒå¹¶å®‰è£… é•œåƒå¯ä»¥å»æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ | Tsinghua Open Source Mirrorä¸‹è½½ã€‚\næ›´æ–°æº sudo mv /etc/apt/sources.list /etc/apt/sources.list.bk \u0026amp;\u0026amp; sudo bash -c \u0026#34;cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/apt/sources.list deb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restrcdicted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restrcd \u0026amp;\u0026amp; mkdir .pip \u0026amp;\u0026amp; cd .pipicted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse EOF\u0026#34; å¤‡ç”¨æº (ä»¥å¤‡ä¸æ—¶ä¹‹éœ€) sudo mv /etc/apt/sources.list /etc/apt/sources.list.bk \u0026amp;\u0026amp; sudo bash -c \u0026#34;cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/apt/sources.list deb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restrcdicted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restrcd \u0026amp;\u0026amp; mkdir .pip \u0026amp;\u0026amp; cd .pipicted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse EOF\u0026#34; sudo mv /etc/apt/sources.list /etc/apt/sources.list.bk \u0026amp;\u0026amp; sudo bash -c \u0026#34;cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/apt/sources.list deb https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse deb-src https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse deb https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse deb-src https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse deb https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse deb-src https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse deb https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse deb-src https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse EOF\u0026#34; sudo mv /etc/apt/sources.list /etc/apt/sources.list.bk \u0026amp;\u0026amp; sudo bash -c \u0026#34;cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/apt/sources.list deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse EOF\u0026#34; å®‰è£…åŸºç¡€åŒ… sudo apt update sudo apt install git sudo apt install aptitude aptitude ç”¨äºè§£å†³åŒ…ä¾èµ–å†²çªã€‚\næ·»åŠ ç”¨æˆ· æ·»åŠ  stack ç”¨æˆ·\nsudo useradd -s /bin/bash -d /opt/stack -m stack æˆäºˆ sudo æƒé™\necho \u0026#34;stack ALL=(ALL) NOPASSWD: ALL\u0026#34; | sudo tee /etc/sudoers.d/stack åˆ‡æ¢åˆ° stack ç”¨æˆ·\nsudo su - stack PIP é…ç½® cd \u0026amp;\u0026amp; mkdir -p .pip \u0026amp;\u0026amp; cd .pip \u0026amp;\u0026amp; bash -c \u0026#34;cat \u0026lt;\u0026lt; EOF \u0026gt; ~/.pip/pip.conf [global] timeout = 6000 index-url = http://mirrors.aliyun.com/pypi/simple/ trusted-host = mirrors.aliyun.com EOF\u0026#34; ä»“åº“ä¸‹è½½ git clone https://github.com/openstack/devstack --depth 1 é…ç½® local.conf åªéœ€è¦ä¿®æ”¹ HOST_IPï¼Œå…¶ä»–çš„å¯ä»¥ä¸ç”¨ä¿®æ”¹ï¼ŒHOST_IP ä¸ºæœ¬æœº IP åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨ ifconfig æŸ¥çœ‹ã€‚å¦‚æœæ˜¯è™šæ‹Ÿæœºå°±æ˜¯è™šæ‹Ÿæœºçš„ IPï¼Œvirtualbox åˆ›å»ºçš„è™šæ‹Ÿæœºé»˜è®¤ä¸º 10.0.2.15ã€‚\ncd devstack \u0026amp;\u0026amp; touch local.conf \u0026amp;\u0026amp; bash -c \u0026#34;cat \u0026lt;\u0026lt; EOF \u0026gt; /opt/stack/devstack/local.conf [[local|localrc]] HOST_IP=10.0.2.15 GIT_BASE=http://git.trystack.cn ADMIN_PASSWORD=user DATABASE_PASSWORD=$ADMIN_PASSWORD RABBIT_PASSWORD=$ADMIN_PASSWORD SERVICE_PASSWORD=$ADMIN_PASSWORD EOF\u0026#34; å®‰è£… FORCE=yes ./stack.sh BUG è§£å†³ systemd åŒ…ä¾èµ–å†²çª sudo aptitude install systemd é€‰æ‹©N å†é€‰æ‹©Y ModuleNotFoundError: No module named \u0026lsquo;distutils.cmd\u0026rsquo; sudo apt-get install python3.10-distutils # æ ¹æ®è‡ªå·±çš„ Python ç‰ˆæœ¬å†³å®šï¼Œå¯ä»¥ python3.7-distutils python3.8-distutils ....éƒ½è¯•ä¸€é apparmor invalid capability bpf sudo apt install apparmor No tenant network is available for allocation vim /etc/neutron/plugins/ml2/ml2_conf.ini [ml2] type_drivers = flat,vlan,vxlan tenant_network_types = vxlan [ml2_type_vxlan] vni_ranges = 1:1000 unix:/var/run/openvswitch/db.sock: database connection failed (Connection refused) cd /opt/stack/devstack/lib/neutron_plugin vi ovn_agent 116G è·³è½¬åˆ°116è¡Œ OVS_RUNDIR=$OVS_PREFIX/var/run/openvswitch ä¿®æ”¹ä¸ºOVS_RUNDIR=$OVS_PREFIX/var/run/ovn sudo rm -rf /var/run/ovn VirtualBox å¯åŠ¨æŠ¥é”™ : Failed to send host log message Ctrl+F2è¿›å…¥å¦ä¸€ä¸ªç»ˆç«¯ è¾“å…¥ï¼šstartxè¿›å…¥æ¡Œé¢ AttributeError: module â€˜collectionsâ€˜ has no attribute â€˜MutableMappingâ€˜ collections.MutableMapping collections.abc.MutableMapping ModuleNotFoundError: No module named \u0026lsquo;distutils.core\u0026rsquo; sudo apt install python3-pip ERROR: Cannot uninstall \u0026lsquo;simplejson\u0026rsquo;. It is a distutils installed project and thus we cannot sudo pip install --ignore-installed wrapt enum34 simplejson netaddr server certificate verification failed. CAfile: none CRLfile: none git config --global http.sslverify false git config --global https.sslverify false Ubuntu:ç™»å½•é¡µé¢éªŒè¯å‡ºé”™ sudo loginctl unlock-sessions Ubuntu:é‡è£…æ¡Œé¢ sudo apt install ubuntu-desktop Ubuntu ç™»å½•ç•Œé¢ Authentication Error sudo loginctl unlock-sessions sudo echo \u0026#34;fs.inotify.max_user_watches=524288\u0026#34; \u0026gt;\u0026gt; /etc/sysctl.conf Ubuntu æ— æ³•è¿›å…¥æ¡Œé¢ç³»ç»Ÿï¼Œä½†æ˜¯å¯ä»¥ SSH é“¾æ¥ sudo rm -rf /var/lib/apt/lists/* sudo apt-get clean sudo apt-get update sudo apt-get install --reinstall appstream gsettings-desktop-schemas : ç ´åï¼šmutter (ï¼œ 3.31.4) ä½†æ˜¯ 3.28.4-0ubuntu18.04.2 æ­£è¦è¢«å®‰è£…è§£å†³æ–¹æ¡ˆ sudo apt install gsettings-desktop-schemas sudo apt-get install build-essential ","permalink":"https://lifeislife.cn/posts/devstack%E9%83%A8%E7%BD%B2openstack/","summary":"\u003ch1 id=\"devstack-éƒ¨ç½²-openstack\"\u003eDevstack éƒ¨ç½² OpenStack\u003c/h1\u003e\n\u003cp\u003eè¯•éªŒå‘ç°åœ¨ Host ä¸º Ubuntu20.04 å’Œ 22.04 ä¸Šæ— æ³•é¡ºåˆ©å®‰è£… VirtualBoxï¼Œè¯·åœ¨ Ubuntu18.04 ä¸Šå®‰è£… VirtualBoxã€‚è™šæ‹Ÿæœºé•œåƒç‰ˆæœ¬ä¸º Ubuntu20.04ï¼Œä»¥ä¸‹æ­¥éª¤å¯ä»¥ç¨³å®šå¤ç°ï¼ŒOpenStack masterï¼ˆc424a7a299e37004d318107648bb18e157344985ï¼‰ç‰ˆæœ¬ã€‚\u003c/p\u003e","title":"Devstack éƒ¨ç½² OpenStack"},{"content":"ç‰©ç†å±‚ åŸºæœ¬æ¦‚å¿µ ç‰©ç†å±‚è§£å†³å¦‚ä½•åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµï¼Œè€Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚ ç‰©ç†å±‚ä¸»è¦ä»»åŠ¡ï¼šç¡®å®šä¸ä¼ è¾“åª’ä½“æ¥å£æœ‰å…³çš„ä¸€äº›ç‰¹æ€§\næœºæ¢°ç‰¹æ€§ï¼šå®šä¹‰ç‰©ç†è¿æ¥çš„ç‰¹æ€§ï¼Œè§„å®šç‰©ç†è¿æ¥æ—¶æ‰€é‡‡ç”¨çš„è§„æ ¼ã€æ¥å£å½¢çŠ¶ã€å¼•çº¿æ•°ç›®ã€å¼•è„šæ•°é‡å’Œæ’åˆ—æƒ…å†µã€‚ ç”µæ°”ç‰¹æ€§ï¼šè§„å®šä¼ è¾“äºŒè¿›åˆ¶ä½æ—¶ï¼Œçº¿è·¯ä¸Šä¿¡å·çš„ç”µå‹èŒƒå›´ã€é˜»æŠ—åŒ¹é…ã€ä¼ è¾“é€Ÿç‡å’Œè·ç¦»é™åˆ¶ç­‰ã€‚ åŠŸèƒ½ç‰¹æ€§ï¼šæŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³è¡¨ç¤ºä½•ç§æ„ä¹‰ï¼Œæ¥å£éƒ¨ä»¶çš„ä¿¡å·çº¿çš„ç”¨é€”ã€‚ è§„ç¨‹ç‰¹æ€§ï¼ˆè¿‡ç¨‹ç‰¹æ€§ï¼‰ï¼šå®šä¹‰å„æ¡ç‰©ç†çº¿è·¯çš„å·¥ä½œè§„ç¨‹å’Œæ—¶åºå…³ç³» æ•°æ®é€šä¿¡åŸºç¡€æ¦‚å¿µ å…¸å‹çš„æ•°æ®é€šä¿¡æ¨¡å‹ \u003c!DOCTYPE html\u003e Responsive Image é€šä¿¡çš„ç›®çš„æ˜¯ä¼ é€æ¶ˆæ¯ã€‚ æ•°æ®ï¼šä¼ é€ä¿¡æ¯çš„å®ä½“ï¼Œé€šå¸¸æ˜¯æœ‰æ„ä¹‰çš„ç¬¦å·åºåˆ—ã€‚ ä¿¡å·ï¼šæ•°æ®çš„ç”µæ°”/ç”µç£çš„è¡¨ç°ï¼Œæ˜¯æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å­˜åœ¨å½¢å¼ã€‚\næ•°å­—ä¿¡å·ï¼šä»£è¡¨æ¶ˆæ¯çš„å‚æ•°å–å€¼æ˜¯ç¦»æ•£çš„ã€‚ - æ¨¡æ‹Ÿä¿¡å·ï¼šä»£è¡¨æ¶ˆæ¯çš„å‚æ•°å–å€¼æ˜¯è¿ç»­çš„ã€‚ ä¿¡æºï¼šäº§ç”Ÿå’Œå‘é€æ•°æ®çš„æºå¤´ã€‚ ä¿¡é“ï¼šä¿¡å·çš„ä¼ è¾“åª’ä»‹ã€‚ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºå‘æŸä¸€ä¸ªæ–¹å‘ä¼ é€ä¿¡æ¯çš„ä»‹è´¨ï¼Œå› æ­¤ä¸€æ¡é€šä¿¡çº¿è·¯å¾€å¾€åŒ…å«ä¸€æ¡å‘é€ä¿¡é“å’Œä¸€æ¡æ¥æ”¶ä¿¡é“ã€‚\né€šä¿¡æ–¹å¼ ä»é€šä¿¡åŒæ–¹ä¿¡æ¯çš„äº¤äº’æ–¹å¼çœ‹ï¼Œå¯ä»¥æœ‰ä¸‰ç§åŸºæœ¬æ–¹å¼ï¼š\nå•å·¥é€šä¿¡åªæœ‰ä¸€ä¸ªæ–¹å‘çš„é€šä¿¡è€Œæ²¡æœ‰åæ–¹å‘çš„äº¤äº’ï¼Œä»…éœ€è¦ä¸€ä¸€æ¡ä¿¡é“ã€‚ åŠåŒå·¥é€šä¿¡é€šä¿¡çš„åŒæ–¹éƒ½å¯ä»¥å‘é€æˆ–æ¥æ”¶ä¿¡æ¯ï¼Œä½†ä»»ä½•ä¸€æ–¹éƒ½ä¸èƒ½åŒæ—¶å‘é€å’Œæ¥æ”¶ï¼Œéœ€è¦ä¸¤æ¡ä¿¡é“ã€‚ å…¨åŒå·¥é€šä¿¡é€šä¿¡åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥å—ä¿¡æ¯ï¼Œä¹Ÿéœ€è¦ä¸¤æ¡ä¿¡é“ã€‚ ä¼ è¾“æ–¹å¼ ä¸²è¡Œä¼ è¾“ é€Ÿåº¦æ…¢ï¼Œè´¹ç”¨ä½ï¼Œé€‚åˆè¿œè·ç¦» å¹¶è¡Œä¼ è¾“ é€Ÿåº¦å¿«ï¼Œè´¹ç”¨é«˜ï¼Œé€‚åˆè¿‘è·ç¦» \u003c!DOCTYPE html\u003e Responsive Image ç å…ƒ ç å…ƒæ˜¯æŒ‡ç”¨ä¸€ä¸ªå›ºå®šæ—¶é•¿çš„ä¿¡å·æ³¢å½¢ï¼ˆæ•°å­—è„‰å†²ï¼‰ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ï¼Œæ˜¯æ•°å­—é€šä¿¡ä¸­æ•°å­—ä¿¡å·çš„è®¡é‡å•ä½ï¼Œè¿™ä¸ªæ—¶é•¿å†…çš„ä¿¡å·ç§°ä¸ºkè¿›åˆ¶ç å…ƒï¼Œè€Œè¯¥æ—¶é•¿ç§°ä¸ºç å…ƒå®½åº¦ã€‚å½“ç å…ƒçš„ç¦»æ•£çŠ¶æ€æœ‰ M ä¸ªæ—¶ï¼ˆM å¤§äº 2ï¼‰ï¼Œæ­¤æ—¶ç å…ƒä¸º M è¿›åˆ¶ç å…ƒã€‚ 1ç å…ƒå¯ä»¥æºå¸¦å¤šä¸ªæ¯”ç‰¹çš„ä¿¡æ¯é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç æ—¶ï¼Œåªæœ‰ä¸¤ç§ä¸åŒçš„ç å…ƒï¼Œä¸€ç§ä»£è¡¨ 0 çŠ¶æ€ï¼Œå¦ - ä¸€ç§ä»£è¡¨ 1 çŠ¶æ€ã€‚åœ¨å››è¿›åˆ¶ç å…ƒä¸­ï¼Œä¸€ä¸ªç å…ƒå°±ç”± 2 æ¯”ç‰¹ç»„æˆã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é€Ÿç‡ï¼Œæ³¢ç‰¹ï¼Œå¸¦å®½ é€Ÿç‡ä¹Ÿå«æ•°æ®ç‡ï¼Œæ˜¯æŒ‡æ•°æ®çš„ä¼ è¾“é€Ÿç‡ï¼Œè¡¨ç¤ºå•ä½æ—¶é—´å†…ä¼ è¾“çš„æ•°æ®é‡ã€‚å¯ä»¥ç”¨ç å…ƒä¼ è¾“é€Ÿç‡å’Œä¿¡æ¯ä¼ è¾“é€Ÿç‡è¡¨ç¤ºã€‚ ä¼ è¾“é€Ÿç‡æ˜¯ä¸»æœºä¸Šå‘å‡ºçš„é€Ÿç‡ï¼Œè€Œä¼ æ’­é€Ÿç‡æ˜¯åœ¨ä¿¡é“ä¸Šçš„ä¼ æ’­é€Ÿç‡ã€‚ä¸¤è€…æ˜¯ä¸åŒçš„æ¦‚å¿µ\nç å…ƒä¼ è¾“é€Ÿç‡1sä¼ è¾“å¤šå°‘ä¸ªç å…ƒï¼šåˆ«åç å…ƒé€Ÿç‡ã€æ³¢å½¢é€Ÿç‡ã€è°ƒåˆ¶é€Ÿç‡ã€ç¬¦å·é€Ÿç‡ç­‰ï¼Œå®ƒè¡¨ç¤ºå•ä½æ—¶é—´å†…æ•°å­—é€šä¿¡ç³»ç»Ÿæ‰€ä¼ è¾“çš„ç å…ƒä¸ªæ•°ï¼ˆä¹Ÿå¯ç§°ä¸ºè„‰å†²ä¸ªæ•°æˆ–ä¿¡å·å˜åŒ–çš„æ¬¡æ•°ï¼‰ï¼Œå•ä½æ˜¯æ³¢ç‰¹ï¼ˆBaudï¼‰ã€‚1 æ³¢ç‰¹è¡¨ç¤ºæ•°å­—é€šä¿¡ç³»ç»Ÿæ¯ç§’ä¼ è¾“ä¸€ä¸ªç å…ƒã€‚è¿™é‡Œçš„ç å…ƒå¯ä»¥æ˜¯å¤šè¿›åˆ¶çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯äºŒè¿›åˆ¶çš„ï¼Œä½†ç å…ƒé€Ÿç‡ä¸è¿›åˆ¶æ•°æ— å…³ã€‚ ä¿¡æ¯ä¼ è¾“é€Ÿç‡1sä¼ è¾“å¤šå°‘ä¸ªæ¯”ç‰¹ï¼šåˆ«åä¿¡æ¯é€Ÿç‡ã€æ¯”ç‰¹ç‡ç­‰ï¼Œè¡¨ç¤ºå•ä½æ—¶é—´å†…æ•°å­—é€šä¿¡ç³»ç»Ÿä¼ è¾“çš„äºŒè¿›åˆ¶ç å…ƒä¸ªæ•°ï¼ˆå³æ¯”ç‰¹æ•°ï¼‰ï¼Œå•ä½æ˜¯æ¯”ç‰¹/ç§’ï¼ˆb/sï¼‰ã€‚ å…³ç³»ï¼šè‹¥ä¸€ä¸ªç å…ƒæºå¸¦n bitçš„ä¿¡æ¯é‡ï¼Œåˆ™M Baudçš„ç å…ƒä¼ è¾“é€Ÿç‡æ‰€å¯¹åº”çš„ä¿¡æ¯ä¼ è¾“é€Ÿç‡ä¸ºM * n bit/sã€‚\nå¸¦å®½ (æ˜¯ä¸ªç†æƒ³å€¼)ï¼šè¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ è¾“æ•°æ®çš„èƒ½åŠ›ã€‚å•ä½æ˜¯ b/sã€‚\n\u003c!DOCTYPE html\u003e Responsive Image 4 è¿›åˆ¶è¡¨ç¤ºç å…ƒæœ‰ 4 ç§æ³¢å½¢ï¼Œåªéœ€è¦ 2 ä½å°±å¯ä»¥è¡¨ç¤º 4 ç§æ³¢å½¢ï¼ŒåŒç† 16 è¿›åˆ¶éœ€è¦ 4 ä½è¡¨ç¤ºã€‚\nå¥ˆæ°å‡†åˆ™ å¤±çœŸ \u003c!DOCTYPE html\u003e Responsive Image å½±å“å¤±çœŸç¨‹åº¦çš„å› ç´ ï¼š\nç å…ƒä¼ è¾“é€Ÿç‡ ä¿¡å·ä¼ è¾“è·ç¦» å™ªå£°å¹²æ‰° ä¼ è¾“åª’ä½“è´¨é‡ ç é—´ä¸²æ‰° \u003c!DOCTYPE html\u003e Responsive Image é¢‘ç‡å¤ªä½ï¼Œä¼šå®¹æ˜“å—åˆ°ä¼ è¾“è·ç¦»ï¼Œå™ªå£°çš„å¹²æ‰°ï¼Œä»è€Œæ›´å®¹æ˜“å¤±çœŸï¼Œæ‰€ä»¥ä¸å…è®¸é€šè¿‡ é¢‘ç‡å¤ªé«˜ï¼Œä¸å®¹æ˜“åŒºåˆ†ç å…ƒä¹‹é—´çš„åŒºåˆ«\nç é—´ä¸²æ‰°ï¼šæ¥æ”¶ç«¯æ”¶åˆ°çš„ä¿¡å·æ³¢å½¢å¤±å»äº†ç å…ƒä¹‹é—´æ¸…æ™°ç•Œé™çš„ç°è±¡ã€‚\nå¥ˆæ°å‡†åˆ™ å¥ˆæ°å‡†åˆ™ï¼šåœ¨ç†æƒ³ä½é€šï¼ˆæ— å™ªå£°ï¼Œå¸¦å®½å—é™ï¼‰æ¡ä»¶ä¸‹ï¼Œä¸ºäº†é¿å…ç é—´ä¸²æ‰°ï¼Œæé™ç å…ƒä¼ è¾“é€Ÿç‡ä¸º2W Baudï¼ŒW æ˜¯ä¿¡é“å¸¦å®½ï¼Œå•ä½æ˜¯Hzã€‚(åªæœ‰åœ¨å¥ˆæ°å‡†åˆ™å’Œé¦™å†œå®šç†ä¸­çš„å¸¦å®½é‡‡ç”¨Hz)\nç†æƒ³ä½é€šä¿¡é“ä¸‹çš„æé™æ•°æ®ä¼ è¾“ç‡ =$2Wlog_2V$(b/s) W:å¸¦å®½ï¼ŒVï¼šç å…ƒçš„ç¦»æ•£ç”µå¹³æ•°ç›®ï¼ˆå‡ ç§ç å…ƒï¼‰\n1.åœ¨ä»»ä½•ä¿¡é“ä¸­ï¼Œç å…ƒä¼ è¾“çš„é€Ÿç‡æ˜¯æœ‰ä¸Šé™çš„ã€‚è‹¥ä¼ è¾“é€Ÿç‡è¶…è¿‡æ­¤ä¸Šé™ï¼Œå°±ä¼šå‡ºç°ä¸¥é‡çš„ç é—´ä¸²æ‰°é—®é¢˜ï¼Œä½¿æ¥æ”¶ç«¯å¯¹ç å…ƒçš„å®Œå…¨æ­£ç¡®è¯†åˆ«æˆä¸ºä¸å¯èƒ½ã€‚ 2.ä¿¡é“çš„é¢‘å¸¦è¶Šå®½ï¼ˆå³èƒ½é€šè¿‡çš„ä¿¡å·é«˜é¢‘åˆ†é‡è¶Šå¤šï¼‰ï¼Œå°±å¯ä»¥ç”¨æ›´é«˜çš„é€Ÿç‡è¿›è¡Œç å…ƒçš„æœ‰æ•ˆä¼ è¾“ã€‚ 3.å¥ˆæ°å‡†åˆ™ç»™å‡ºäº†ç å…ƒä¼ è¾“é€Ÿç‡çš„é™åˆ¶ï¼Œä½†å¹¶æ²¡æœ‰å¯¹ä¿¡æ¯ä¼ è¾“é€Ÿç‡ç»™å‡ºé™åˆ¶ã€‚ 4.ç”±äºç å…ƒçš„ä¼ è¾“é€Ÿç‡å—å¥ˆæ°å‡†åˆ™çš„åˆ¶çº¦ï¼Œæ‰€ä»¥è¦æé«˜æ•°æ®çš„ä¼ è¾“é€Ÿç‡ï¼Œå°±å¿…é¡»è®¾æ³•ä½¿æ¯ä¸ªç å…ƒèƒ½æºå¸¦æ›´å¤šä¸ªæ¯”ç‰¹çš„ä¿¡æ¯é‡ï¼Œè¿™å°±éœ€è¦é‡‡ç”¨å¤šå…ƒåˆ¶çš„è°ƒåˆ¶æ–¹æ³•ã€‚\nç»ƒä¹ ï¼šåœ¨æ— å™ªå£°çš„æƒ…å†µä¸‹ï¼Œè‹¥æŸé€šä¿¡é“¾è·¯çš„å¸¦å®½ä¸º3kHzï¼Œé‡‡ç”¨4ä¸ªç›¸ä½ï¼Œæ¯ä¸ªç›¸ä½å…·æœ‰4ç§æŒ¯å¹…çš„QAMè°ƒåˆ¶æŠ€æœ¯ï¼Œåˆ™è¯¥é€šä¿¡é“¾è·¯çš„æœ€å¤§æ•°æ®ä¼ è¾“ç‡æ˜¯å¤šå°‘ï¼Ÿ ç­”ï¼šä¿¡å·æœ‰4 x 4=16ç§å˜åŒ– æœ€å¤§æ•°æ®ä¼ è¾“ç‡=2 x 3k x4=24kb/s é¦™å†œå®šç† å™ªå£°å­˜åœ¨äºæ‰€æœ‰çš„ç”µå­è®¾å¤‡å’Œé€šä¿¡ä¿¡é“ä¸­ã€‚ç”±äºå™ªå£°éšæœºäº§ç”Ÿï¼Œå®ƒçš„ç¬æ—¶å€¼æœ‰æ—¶ä¼šå¾ˆå¤§ï¼Œå› æ­¤å™ªå£°ä¼šä½¿æ¥æ”¶ç«¯å¯¹ç å…ƒçš„åˆ¤å†³äº§ç”Ÿé”™è¯¯ã€‚ä½†æ˜¯å™ªå£°çš„å½±å“æ˜¯ç›¸å¯¹çš„ï¼Œè‹¥ä¿¡å·è¾ƒå¼ºï¼Œé‚£ä¹ˆå™ªå£°å½±å“ç›¸å¯¹è¾ƒå°ã€‚å› æ­¤ï¼Œä¿¡å™ªæ¯”å°±å¾ˆé‡è¦ã€‚\nä¿¡å™ªæ¯” = ä¿¡å·çš„å¹³å‡åŠŸç‡ / å™ªå£°çš„å¹³å‡åŠŸç‡ï¼Œå¸¸è®°ä¸º S/Nï¼Œå¹¶ç”¨åˆ†è´ï¼ˆdBï¼‰ä½œä¸ºåº¦é‡å•ä½ï¼Œå³ï¼š $$dB = 10log_{10}(S/N)$$\né¦™å†œå®šç†ï¼šåœ¨å¸¦å®½å—é™ä¸”æœ‰å™ªå£°çš„ä¿¡é“ä¸­ï¼Œä¸ºäº†ä¸äº§ç”Ÿè¯¯å·®ï¼Œä¿¡æ¯çš„æ•°æ®ä¼ è¾“é€Ÿç‡æœ‰ä¸Šé™å€¼ã€‚ ä¿¡é“çš„æé™ä¼ è¾“é€Ÿç‡ = $Wlog_2(1+S/N)$(b/s)\n1.ä¿¡é“çš„å¸¦å®½æˆ–ä¿¡é“ä¸­çš„ä¿¡å™ªæ¯”è¶Šå¤§ï¼Œåˆ™ä¿¡æ¯çš„æé™ä¼ è¾“é€Ÿç‡å°±è¶Šé«˜ã€‚ 2.å¯¹ä¸€å®šçš„ä¼ è¾“å¸¦å®½å’Œä¸€ - å®šçš„ä¿¡å™ªæ¯”ï¼Œä¿¡æ¯ä¼ è¾“é€Ÿç‡çš„ä¸Šé™å°±ç¡®å®šäº†ã€‚ 3.åªè¦ä¿¡æ¯çš„ä¼ è¾“é€Ÿç‡ä½äºä¿¡é“çš„æé™ä¼ è¾“é€Ÿç‡ï¼Œå°±ä¸€å®šèƒ½æ‰¾åˆ°æŸç§æ–¹æ³•æ¥å®ç°æ— å·®é”™çš„ä¼ è¾“ã€‚ 4.é¦™å†œå®šç†å¾—å‡ºçš„ä¸ºæé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡ï¼Œå®é™…ä¿¡é“èƒ½è¾¾åˆ°çš„ä¼ è¾“é€Ÿç‡è¦æ¯”å®ƒä½ä¸å°‘ã€‚ 5.ä»é¦™å†œå®šç†å¯ä»¥çœ‹å‡ºï¼Œè‹¥ä¿¡é“å¸¦å®½ W æˆ–ä¿¡å™ªæ¯” S/N æ²¡æœ‰ä¸Šé™ï¼ˆä¸å¯èƒ½ï¼‰ï¼Œé‚£ä¹ˆä¿¡é“çš„æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡ä¹Ÿå°±æ²¡æœ‰ä¸Šé™ã€‚\nç»ƒä¹ ï¼šç”µè¯ç³»ç»Ÿçš„å…¸å‹å‚æ•°æ˜¯ä¿¡é“å¸¦å®½ä¸º3000Hzï¼Œä¿¡å™ªæ¯”ä¸º30dBï¼Œåˆ™è¯¥ç³»ç»Ÿæœ€å¤§æ•°æ®ä¼ è¾“é€Ÿç‡æ˜¯å¤šå°‘ï¼Ÿ ç­”ï¼š30dB=10log1oï¼ˆS/Nï¼‰åˆ™S/N=1000 ä¿¡é“çš„æé™æ•°æ®ä¼ è¾“é€Ÿç‡=Wlog2ï¼ˆ1+S/Nï¼‰=3000 x log2ï¼ˆ1+1000ï¼‰\u0026gt;30kb/s å½“é¢˜ç›®ä¸­æ—¢ç»™å‡ºäº†ç å…ƒä¿¡æ¯ï¼Œåˆç»™äº†ä¿¡å™ªæ¯”ä¿¡æ¯ï¼Œå°±éœ€è¦ç”¨ä¸¤ä¸ªå…¬å¼éƒ½ç®—ä¸€ä¸‹ï¼Œå–æœ€å°å€¼\né¢˜ç›®ï¼šäºŒè¿›åˆ¶ä¿¡å·åœ¨ä¿¡å™ªæ¯”ä¸º127ï¼š1çš„4kHzä¿¡é“ä¸Šä¼ è¾“ï¼Œæœ€å¤§çš„æ•°æ®é€Ÿç‡å¯è¾¾åˆ°å¤šå°‘ï¼Ÿ ç­”ï¼š Niceï¼š2 X 4000X log2=8000b/s é¦™æµ“ï¼š4000 log2ï¼ˆ1+127ï¼‰=28000b/s ç¼–ç ä¸è°ƒåˆ¶ åŸºå¸¦ä¿¡å·ä¸å®½å¸¦ä¿¡å· ä¿¡é“ï¼šä¿¡å·çš„ä¼ è¾“åª’ä»‹ã€‚ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºå‘æŸä¸€ä¸ªæ–¹å‘ä¼ é€ä¿¡æ¯çš„ä»‹è´¨ï¼Œå› æ­¤ä¸€æ¡é€šä¿¡çº¿è·¯å¾€å¾€åŒ…å«ä¸€æ¡å‘é€ä¿¡é“å’Œä¸€æ¡æ¥æ”¶ä¿¡é“ã€‚\nä¿¡é“ä¸Šä¼ è¾“çš„ä¿¡å·\nåŸºå¸¦ä¿¡å· å°†æ•°å­—ä¿¡å· 1 å’Œ 0 ç›´æ¥ç”¨ä¸¤ç§ä¸åŒçš„ç”µå‹è¡¨ç¤ºï¼Œå†é€åˆ°æ•°å­—ä¿¡é“ä¸Šå»ä¼ è¾“ï¼ˆåŸºå¸¦ä¼ è¾“ï¼‰æ¥è‡ªä¿¡æºçš„ä¿¡å·ï¼Œåƒè®¡ç®—æœºè¾“å‡ºçš„ä»£è¡¨å„ç§æ–‡å­—æˆ–å›¾åƒæ–‡ä»¶çš„æ•°æ®ä¿¡å·éƒ½å±äºåŸºå¸¦ä¿¡å·ã€‚åŸºå¸¦ä¿¡å·å°±æ˜¯å‘å‡ºçš„ç›´æ¥è¡¨è¾¾äº†è¦ä¼ è¾“çš„ä¿¡æ¯çš„ä¿¡å·ï¼Œæ¯”å¦‚æˆ‘ä»¬è¯´è¯çš„å£°æ³¢å°±æ˜¯åŸºå¸¦ä¿¡å·ã€‚ å®½å¸¦ä¿¡å· å°†åŸºå¸¦ä¿¡å·è¿›è¡Œè°ƒåˆ¶åå½¢æˆçš„é¢‘åˆ†å¤ç”¨æ¨¡æ‹Ÿä¿¡å·ï¼Œå†ä¼ é€åˆ°æ¨¡æ‹Ÿä¿¡é“ä¸Šå»ä¼ è¾“ï¼ˆå®½å¸¦ä¼ è¾“ï¼‰ã€‚ æŠŠåŸºå¸¦ä¿¡å·ç»è¿‡è½½æ³¢è°ƒåˆ¶åï¼ŒæŠŠä¿¡å·çš„é¢‘ç‡èŒƒå›´æ¬ç§»åˆ°è¾ƒé«˜çš„é¢‘æ®µä»¥ä¾¿åœ¨ä¿¡é“ä¸­ä¼ è¾“ï¼ˆå³ä»…åœ¨ä¸€æ®µé¢‘ç‡èŒƒå›´å†…èƒ½å¤Ÿé€šè¿‡ä¿¡é“ï¼‰ åœ¨ä¼ è¾“è·ç¦»è¾ƒè¿‘æ—¶ï¼Œè®¡ç®—æœºç½‘ç»œé‡‡ç”¨åŸºå¸¦ä¼ è¾“æ–¹å¼ï¼ˆè¿‘è·ç¦»è¡°å‡å°ï¼Œä»è€Œä¿¡å·å†…å®¹ä¸æ˜“å‘ç”Ÿå˜åŒ–ï¼‰ åœ¨ä¼ è¾“è·ç¦»è¾ƒè¿œæ—¶ï¼Œè®¡ç®—æœºç½‘ç»œé‡‡ç”¨å®½å¸¦ä¼ è¾“æ–¹å¼ï¼ˆè¿œè·ç¦»è¡°å‡å¤§ï¼Œå³ä½¿ä¿¡å·å˜åŒ–å¤§ä¹Ÿèƒ½æœ€åè¿‡æ»¤å‡ºæ¥åŸºå¸¦ä¿¡å·ï¼‰\nç¼–ç ä¸è°ƒåˆ¶ ç¼–ç ï¼šæ•°å­—æ•°æ®-ã€‹æ•°å­—ä¿¡å·ï¼ˆæ•°å­—å‘é€å™¨ï¼‰ è°ƒåˆ¶ï¼šæ•°å­—æ•°æ®-ã€‹æ¨¡æ‹Ÿä¿¡å·ï¼ˆè°ƒåˆ¶å™¨ï¼‰\nç¼–ç ï¼šæ¨¡æ‹Ÿæ•°æ®-ã€‹æ•°å­—ä¿¡å·ï¼ˆPCM ç¼–ç å™¨ï¼‰ è°ƒåˆ¶ï¼šæ¨¡æ‹Ÿæ•°æ®-ã€‹æ¨¡æ‹Ÿä¿¡å·ï¼ˆæ”¾å¤§å™¨è°ƒåˆ¶å™¨ï¼‰\næ•°å­—æ•°æ®-ã€‹æ•°å­—ä¿¡å· éå½’é›¶ç¼–ç ï¼ˆNRZï¼‰ï¼ˆé«˜1ä½0ï¼‰ ç¼–ç å®¹æ˜“å®ç°ï¼Œä½†æ²¡æœ‰æ£€é”™åŠŸèƒ½ï¼Œä¸”æ— æ³•åˆ¤æ–­ä¸€-ä¸ªç å…ƒçš„å¼€å§‹å’Œç»“æŸï¼Œä»¥è‡³äºæ”¶å‘åŒæ–¹éš¾ä»¥ä¿æŒåŒæ­¥ã€‚ä¸€ä¸ªç å…ƒå†…ç”µå¹³ä¸ä¼šè·³å˜ã€‚ å½’é›¶ç¼–ç ï¼ˆRZï¼‰ ä¿¡å·ç”µå¹³åœ¨ä¸€ä¸€ä¸ªç å…ƒä¹‹å†…éƒ½è¦æ¢å¤åˆ°é›¶çš„è¿™ç§ç¼–ç æˆç¼–ç æ–¹å¼ã€‚ åå‘ä¸å½’é›¶ç¼–ç ï¼ˆNRZIï¼‰ ä¿¡å·ç”µå¹³ç¿»è½¬è¡¨ç¤º 0ï¼Œä¿¡å·ç”µå¹³ä¸ã€‚å˜è¡¨ç¤º 1ã€‚ä¸€ä¸ªç å…ƒå†…ç”µå¹³ä¸ä¼šè·³å˜ã€‚ æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆå‰é«˜åä½1ï¼Œå‰ä½åé«˜ä¸º0ï¼‰ å°†ä¸€ä¸ªç å…ƒåˆ†æˆä¸¤ä¸ªç›¸ç­‰çš„é—´éš”ï¼Œå‰ä¸€ä¸ªé—´éš”ä¸ºä½ç”µå¹³å - ä¸€ä¸ªé—´éš”ä¸ºé«˜ç”µå¹³è¡¨ç¤ºç å…ƒ 1ï¼›ç å…ƒ 0 åˆ™æ­£å¥½ç›¸åã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨ç›¸åçš„è§„å®šã€‚è¯¥ç¼–ç çš„ç‰¹ç‚¹æ˜¯åœ¨æ¯\u0026ndash;ä¸ªç å…ƒçš„ä¸­é—´å‡ºç°ç”µå¹³è·³å˜ï¼Œä½ä¸­é—´çš„è·³å˜æ—¢ä½œæ—¶é’Ÿä¿¡å·ï¼ˆå¯ç”¨äºåŒæ­¥ï¼‰ï¼Œåˆä½œæ•°æ®ä¿¡å·ï¼Œä½†å®ƒæ‰€å çš„é¢‘å¸¦å®½åº¦æ˜¯åŸå§‹çš„åŸºå¸¦å®½åº¦çš„ä¸¤å€ã€‚æ¯ä¸€ä¸ªç å…ƒéƒ½è¢«è°ƒæˆä¸¤ä¸ªç”µå¹³ï¼Œæ‰€ä»¥æ•°æ®ä¼ è¾“é€Ÿç‡åªæœ‰è°ƒåˆ¶é€Ÿç‡çš„1/2ã€‚ å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆåŒ1å¼‚0ï¼‰ å¸¸ç”¨äºå±€åŸŸç½‘ä¼ è¾“ï¼Œå…¶è§„åˆ™æ˜¯ï¼šè‹¥ç å…ƒä¸º 1ï¼Œåˆ™å‰åŠä¸ªç å…ƒçš„ç”µå¹³ä¸ä¸Šä¸€ä¸ªç å…ƒçš„ååŠä¸ªç å…ƒçš„ç”µå¹³ç›¸åŒï¼Œè‹¥ä¸º 0ï¼Œåˆ™ç›¸åã€‚è¯¥ç¼–ç çš„ç‰¹ç‚¹æ˜¯ï¼Œåœ¨æ¯ä¸ªç å…ƒçš„ä¸­é—´ï¼Œéƒ½æœ‰ä¸€æ¬¡ç”µå¹³çš„è·³è½¬ï¼Œå¯ä»¥å®ç°è‡ªåŒæ­¥ï¼Œä¸”æŠ—å¹²æ‰°æ€§å¼ºäºæ›¼å½»æ–¯ç‰¹ç¼–ç ã€‚ 4B/5Bç¼–ç  æ¯”ç‰¹æµä¸­æ’å…¥é¢å¤–çš„æ¯”ç‰¹ä»¥æ‰“ç ´è¿ä¸²çš„ 0 æˆ– 1ï¼Œå°±æ˜¯ç”¨ 5 ä¸ªæ¯”ç‰¹æ¥ç¼–ç  4 ä¸ªæ¯”ç‰¹çš„æ•°æ®ï¼Œä¹‹åå†ä¼ ç»™æ¥æ”¶æ–¹ï¼Œå› æ­¤ç§°ä¸º 4B/5Bã€‚ç¼–ç æ•ˆç‡ä¸º 80%ã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ•°å­—æ•°æ®-ã€‹æ¨¡æ‹Ÿä¿¡å· æ•°å­—æ•°æ®è°ƒåˆ¶æŠ€æœ¯åœ¨å‘é€ç«¯å°†æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œè€Œåœ¨æ¥æ”¶ç«¯å°†æ¨¡æ‹Ÿä¿¡å·è¿˜åŸä¸ºæ•°å­—ä¿¡å·ï¼Œåˆ†åˆ«å¯¹åº”äºè°ƒåˆ¶è§£è°ƒå™¨çš„è°ƒåˆ¶å’Œè§£è°ƒè¿‡ç¨‹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¾‹ï¼šæŸé€šä¿¡é“¾è·¯çš„æ³¢ç‰¹ç‡æ˜¯1200Baudï¼Œé‡‡ç”¨4ä¸ªç›¸ä½ï¼Œæ¯ä¸ªç›¸ä½æœ‰4ç§æŒ¯å¹…çš„QAMè°ƒåˆ¶æŠ€æœ¯ï¼Œåˆ™è¯¥é“¾è·¯çš„ä¿¡æ¯ä¼ è¾“é€Ÿç‡æ˜¯å¤šå°‘ï¼Ÿ ç­”ï¼š4ä¸ªç›¸ä½4ç§æŒ¯å¹…ä¹Ÿå°±æ˜¯è¯´æœ‰16ä¸ªç å…ƒã€‚16ä¸ªç å…ƒä¹Ÿå°±æ˜¯16ä¸ªçŠ¶æ€ï¼Œéœ€è¦4ä½æ¥è¡¨ç¤ºã€‚ä¹Ÿå°±æ˜¯1ç å…ƒå¯¹åº”4bitã€‚é¢˜ç›®ä¸­æ³¢ç‰¹ç‡æ˜¯1200ï¼Œä¹Ÿå°±è¯´æ˜1200*4=4800bit/sã€‚ æ¨¡æ‹Ÿæ•°æ®-ã€‹æ•°å­—ä¿¡å· è®¡ç®—æœºå†…éƒ¨å¤„ç†çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå¤„ç†çš„éƒ½æ˜¯æ•°å­—éŸ³é¢‘ï¼Œæ‰€ä»¥éœ€è¦å°†æ¨¡æ‹ŸéŸ³é¢‘é€šè¿‡é‡‡æ ·ã€é‡åŒ–è½¬æ¢æˆæœ‰é™ä¸ªæ•°å­—è¡¨ç¤ºçš„ç¦»æ•£åºåˆ—ï¼ˆå³å®ç°éŸ³é¢‘æ•°å­—åŒ–ï¼‰ã€‚ æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯å¯¹éŸ³é¢‘ä¿¡å·è¿›è¡Œç¼–ç çš„è„‰ç è°ƒåˆ¶ï¼ˆPCMï¼‰ï¼Œåœ¨è®¡ç®—æœºåº”ç”¨ä¸­ï¼Œèƒ½å¤Ÿè¾¾åˆ°æœ€é«˜ä¿çœŸæ°´å¹³çš„å°±æ˜¯ PCM ç¼–ç ï¼Œè¢«å¹¿æ³›ç”¨äºç´ æä¿å­˜åŠéŸ³ä¹æ¬£èµï¼ŒCDã€DVD ä»¥åŠæˆ‘ä»¬å¸¸è§çš„WAVæ–‡ä»¶ä¸­å‡æœ‰åº”ç”¨ã€‚å®ƒä¸»è¦åŒ…æ‹¬ä¸‰æ­¥ï¼šæŠ½æ ·ã€é‡åŒ–ã€ç¼–ç ã€‚\næŠ½æ · å¯¹æ¨¡æ‹Ÿä¿¡å·å‘¨æœŸæ€§æ‰«æï¼ŒæŠŠæ—¶é—´ä¸Šè¿ç»­çš„ä¿¡å·å˜æˆæ—¶é—´ä¸Šç¦»æ•£çš„ä¿¡å·ã€‚ä¸ºäº†ä½¿æ‰€å¾—çš„ç¦»æ•£ä¿¡å·èƒ½æ— å¤±çœŸåœ°ä»£è¡¨è¢«æŠ½æ ·çš„æ¨¡æ‹Ÿæ•°æ®ï¼Œè¦ä½¿ç”¨é‡‡æ ·å®šç†é‡‡æ ·ï¼šé‡‡æ ·é¢‘ç‡ \u0026gt;= 2*ä¿¡å·æœ€é«˜é¢‘ç‡ é‡åŒ– æŠŠæŠ½æ ·å–å¾—çš„ç”µå¹³å¹…å€¼æŒ‰ç…§ä¸€å®šçš„åˆ†çº§æ ‡åº¦è½¬åŒ–ä¸ºå¯¹åº”çš„æ•°å­—å€¼ï¼Œå¹¶å–æ•´æ•°ï¼Œè¿™å°±æŠŠè¿ç»­çš„ç”µå¹³å¹…å€¼è½¬æ¢ä¸ºç¦»æ•£çš„æ•°å­—é‡ã€‚ ç¼–ç  æŠŠé‡åŒ–çš„ç»“æœè½¬æ¢ä¸ºä¸ä¹‹å¯¹åº”çš„äºŒè¿›åˆ¶ç¼–ç ã€‚ æ¨¡æ‹Ÿæ•°æ®-ã€‹æ¨¡æ‹Ÿä¿¡å· ä¸ºäº†å®ç°ä¼ è¾“çš„æœ‰æ•ˆæ€§ï¼Œå¯èƒ½éœ€è¦è¾ƒé«˜çš„é¢‘ç‡ã€‚è¿™ç§è°ƒåˆ¶æ–¹å¼è¿˜å¯ä»¥ä½¿ç”¨é¢‘åˆ†å¤ç”¨æŠ€æœ¯ï¼Œå……åˆ†åˆ©ç”¨å¸¦å®½èµ„æºã€‚åœ¨ç”µè¯æœºå’Œæœ¬åœ°äº¤æ¢æœºæ‰€ä¼ è¾“çš„ä¿¡å·æ˜¯é‡‡ç”¨æ¨¡æ‹Ÿä¿¡å·ä¼ è¾“æ¨¡æ‹Ÿæ•°æ®çš„æ–¹å¼ï¼›æ¨¡æ‹Ÿçš„å£°éŸ³æ•°æ®æ˜¯åŠ è½½åˆ°æ¨¡æ‹Ÿçš„è½½æ³¢ä¿¡å·ä¸­ä¼ è¾“çš„ã€‚\nä¼ è¾“ä»‹è´¨åŠåˆ†ç±» ä¼ è¾“ä»‹è´¨ä¹Ÿç§°ä¼ è¾“åª’ä½“/ä¼ è¾“åª’ä»‹ï¼Œå®ƒå°±æ˜¯æ•°æ®ä¼ è¾“ç³»ç»Ÿä¸­åœ¨å‘é€è®¾å¤‡å’Œæ¥æ”¶è®¾å¤‡ä¹‹é—´çš„ç‰©ç†é€šè·¯ã€‚ä¼ è¾“åª’ä½“å¹¶ä¸æ˜¯ç‰©ç†å±‚ã€‚ ä¼ è¾“åª’ä½“åœ¨ç‰©ç†å±‚çš„ä¸‹é¢ï¼Œå› ä¸ºç‰©ç†å±‚æ˜¯ä½“ç³»ç»“æ„çš„ç¬¬ä¸€å±‚ï¼Œå› æ­¤æœ‰æ—¶ç§°ä¼ è¾“åª’ä½“ä¸º 0 å±‚ã€‚åœ¨ä¼ è¾“åª’ä½“ä¸­ä¼ è¾“çš„æ˜¯ä¿¡å·ï¼Œä½†ä¼ è¾“åª’ä½“å¹¶ä¸çŸ¥é“æ‰€ä¼ è¾“çš„ä¿¡å·ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚ä½†ç‰©ç†å±‚è§„å®šäº†ç”µæ°”ç‰¹æ€§ï¼Œå› æ­¤èƒ½å¤Ÿè¯†åˆ«æ‰€ä¼ é€çš„æ¯”ç‰¹æµã€‚\nä¼ è¾“ä»‹è´¨\nå¯¼å‘æ€§ï¼šç”µç£æ³¢è¢«å¯¼å‘æ²¿ç€å›ºä½“åª’ä»‹ä¼ æ’­ éå¯¼å‘æ€§ï¼šç©ºæ°”ï¼Œæµ·æ°´ç­‰ åŒç»çº¿ åŒç»çº¿æ˜¯å¤è€ã€åˆæœ€å¸¸ç”¨çš„ä¼ è¾“ä»‹è´¨ï¼Œå®ƒç”±ä¸¤æ ¹é‡‡ç”¨ä¸€å®šè§„åˆ™å¹¶æ’ç»åˆçš„ã€ç›¸äº’ç»ç¼˜çš„é“œå¯¼çº¿ç»„æˆã€‚ç»åˆå¯ä»¥å‡å°‘å¯¹ç›¸é‚»å¯¼çº¿çš„ç”µç£å¹²æ‰°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åŒç»çº¿ä»·æ ¼ä¾¿å®œï¼Œæ˜¯æœ€å¸¸ç”¨çš„ä¼ è¾“ä»‹è´¨ä¹‹ä¸€ï¼Œåœ¨å±€åŸŸç½‘å’Œä¼ ç»Ÿç”µè¯ç½‘ä¸­æ™®éä½¿ç”¨ã€‚æ¨¡æ‹Ÿä¼ è¾“å’Œæ•°å­—ä¼ è¾“éƒ½å¯ä»¥ä½¿ç”¨åŒç»çº¿ï¼Œå…¶é€šä¿¡è·ç¦»ä¸€èˆ¬ä¸ºå‡ å…¬é‡Œåˆ°æ•°åå…¬é‡Œã€‚è·ç¦»å¤ªè¿œæ—¶ï¼Œå¯¹äºæ¨¡æ‹Ÿä¼ è¾“ï¼Œè¦ç”¨æ”¾å¤§å™¨æ”¾å¤§è¡°å‡çš„ä¿¡å·ï¼›å¯¹äºæ•°å­—ä¼ è¾“ï¼Œè¦ç”¨ä¸­ç»§å™¨å°†å¤±çœŸçš„ä¿¡å·æ•´å½¢ã€‚\nåŒè½´ç”µç¼† åŒè½´ç”µç¼†ç”±å¯¼ä½“é“œè´¨èŠ¯çº¿ã€ç»ç¼˜å±‚ã€ç½‘çŠ¶ç¼–ç»‡å±è”½å±‚å’Œå¡‘æ–™å¤–å±‚æ„æˆã€‚æŒ‰ç‰¹æ€§é˜»æŠ—æ•°å€¼çš„ä¸åŒï¼Œé€šå¸¸å°†åŒè½´ç”µç¼†åˆ†ä¸ºä¸¤ç±»ï¼š50$\\Omega$åŒè½´ ç”µç¼†å’Œ 75$\\Omega$åŒè½´ç”µç¼†ã€‚å…¶ä¸­ï¼Œ50$\\Omega$åŒè½´ç”µç¼†ä¸»è¦ç”¨äºä¼ é€åŸºå¸¦æ•°å­—ä¿¡å·ï¼Œåˆç§°ä¸ºåŸºå¸¦åŒè½´ç”µç¼†ï¼Œå®ƒåœ¨å±€åŸŸç½‘ä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼›75$\\Omega$åŒè½´ç”µç¼†ä¸»è¦ç”¨äºä¼ é€å®½å¸¦ä¿¡å·ï¼Œåˆç§°ä¸ºå®½å¸¦åŒè½´ç”µç¼†ï¼Œå®ƒä¸»è¦ç”¨äºæœ‰çº¿ç”µè§†ç³»ç»Ÿã€‚\nç”±äºå¤–å¯¼ä½“å±è”½å±‚çš„ä½œç”¨ï¼ŒåŒè½´ç”µç¼†æŠ—å¹²æ‰°ç‰¹æ€§æ¯”åŒç»çº¿å¥½ï¼Œè¢«å‚æ³›ç”¨äºä¼ è¾“è¾ƒé«˜é€Ÿç‡çš„æ•°æ®ï¼Œå…¶ä¼ è¾“è·ç¦»æ›´è¿œï¼Œä½†ä»·æ ¼è¾ƒåŒç»çº¿è´µ\n\u003c!DOCTYPE html\u003e Responsive Image å…‰çº¤ å…‰çº¤é€šä¿¡å°±æ˜¯åˆ©ç”¨å…‰å¯¼çº¤ç»´ï¼ˆç®€ç§°å…‰çº¤ï¼‰ä¼ é€’å…‰è„‰å†²æ¥è¿›è¡Œé€šä¿¡ã€‚æœ‰å…‰è„‰å†²è¡¨ç¤º 1ï¼Œæ— å…‰è„‰å†²è¡¨ç¤º 0ã€‚è€Œå¯è§å…‰çš„é¢‘ç‡å¤§çº¦æ˜¯ 108MHzï¼Œå› æ­¤å…‰çº¤é€šä¿¡ç³»ç»Ÿçš„å¸¦å®½è¿œè¿œå¤§äºç›®å‰å…¶ä»–å„ç§ä¼ è¾“åª’ä½“çš„å¸¦å®½ã€‚\nå…‰çº¤ä¸»è¦ç”±çº¤èŠ¯ï¼ˆå®å¿ƒçš„ï¼ï¼‰å’ŒåŒ…å±‚æ„æˆï¼Œå…‰æ³¢é€šè¿‡çº¤èŠ¯è¿›è¡Œä¼ å¯¼ï¼ŒåŒ…å±‚è¾ƒçº¤èŠ¯æœ‰è¾ƒä½çš„æŠ˜å°„ç‡ã€‚å½“å…‰çº¿ä»é«˜æŠ˜å°„ç‡çš„ä»‹è´¨å°„å‘ä½æŠ˜å°„ç‡çš„ä»‹è´¨æ—¶ï¼Œå…¶æŠ˜å°„è§’å°†å¤§äºå…¥å°„è§’ã€‚å› æ­¤ï¼Œå¦‚æœå…¥å°„è§’è¶³å¤Ÿå¤§ï¼Œå°±ä¼šå‡ºç°å…¨åå°„ï¼Œå³å…‰çº¿ç¢°åˆ°åŒ…å±‚æ—¶å€™å°±ä¼šæŠ˜å°„å›çº¤èŠ¯ã€è¿™ä¸ªè¿‡ç¨‹ä¸æ–­é‡å¤ï¼Œå…‰ä¹Ÿå°±æ²¿ç€å…‰çº¤ä¼ è¾“ä¸‹å»ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å…‰çº¤ç‰¹ç‚¹ï¼š\nä¼ è¾“æŸè€—å°ï¼Œä¸­ç»§è·ç¦»é•¿ï¼Œå¯¹è¿œè·ç¦»ä¼ è¾“ç‰¹åˆ«ç»æµã€‚ æŠ—é›·ç”µå’Œç”µç£å¹²æ‰°æ€§èƒ½å¥½ã€‚ æ— ä¸²éŸ³å¹²æ‰°ï¼Œä¿å¯†æ€§å¥½ï¼Œä¹Ÿä¸æ˜“è¢«çªƒå¬æˆ–æˆªå–æ•°æ®ã€‚ æ— çº¿ç”µæ³¢ ä¿¡å·æ‰€æœ‰æ–¹å‘éƒ½èƒ½ä¼ æ’­\nè¾ƒå¼ºç©¿é€èƒ½åŠ›ï¼Œå¯ä¼ è¿œè·ç¦»ï¼Œå¹¿æ³›ç”¨äºé€šä¿¡é¢†åŸŸï¼ˆå¦‚æ‰‹æœºé€šä¿¡ï¼‰ã€‚\nå¾®æ³¢ ä¿¡å·å›ºå®šæ–¹å‘ä¼ æ’­\nå¾®æ³¢é€šä¿¡é¢‘ç‡è¾ƒé«˜ã€é¢‘æ®µèŒƒå›´å®½ï¼Œå› æ­¤æ•°æ®ç‡å¾ˆé«˜\nä¼˜ç‚¹ï¼š\né€šä¿¡å®¹é‡å¤§ è·ç¦»è¿œ è¦†ç›–å¹¿ å¹¿æ’­é€šä¿¡å’Œå¤šå€é€šä¿¡ ç¼ºç‚¹ï¼š\nä¼ æ’­æ—¶å»¶é•¿ï¼ˆ250-270msï¼‰ å—æ°”å€™å½±å“å¤§ï¼ˆegï¼šå¼ºé£å¤ªé˜³é»‘å­çˆ†å‘ã€æ—¥å‡Œï¼‰X ä¿¡ è¯¯ç ç‡è¾ƒé«˜ æˆæœ¬é«˜ çº¢å¤–çº¿ï¼Œæ¿€å…‰ ä¿¡å·å›ºå®šæ–¹å‘ä¼ æ’­\nè¦æŠŠè¦ä¼ è¾“çš„ä¿¡å·åˆ†åˆ«è½¬æ¢ä¸ºå„è‡ªçš„ä¿¡å·æ ¼å¼ï¼Œå³çº¢å¤–å…‰ä¿¡å·å’Œæ¿€å…‰ä¿¡å·ï¼Œå†åœ¨ç©ºé—´ä¸­ä¼ æ’­ã€‚\nç‰©ç†å±‚è®¾å¤‡ ä¸­ç»§å™¨ \u003c!DOCTYPE html\u003e Responsive Image è¯ç”ŸåŸå› ï¼šç”±äºå­˜åœ¨æŸè€—ï¼Œåœ¨çº¿è·¯ä¸Šä¼ è¾“çš„ä¿¡å·åŠŸç‡ä¼šé€æ¸è¡°å‡ï¼Œè¡°å‡åˆ°\u0026ndash;å®šç¨‹åº¦æ—¶å°†é€ æˆä¿¡å·å¤±çœŸï¼Œå› æ­¤ä¼šå¯¼è‡´æ¥æ”¶é”™è¯¯ã€‚ ä¸­ç»§å™¨çš„åŠŸèƒ½(å†ç”Ÿæ•°å­—ä¿¡å·)ï¼šå¯¹ä¿¡å·è¿›è¡Œå†ç”Ÿå’Œè¿˜åŸï¼Œå¯¹è¡°å‡çš„ä¿¡å·è¿›è¡Œæ”¾å¤§ï¼Œä¿æŒä¸åŸæ•°æ®ç›¸åŒï¼Œä»¥å¢åŠ ä¿¡å·ä¼ è¾“çš„è·ç¦»ï¼Œå»¶é•¿ç½‘ç»œçš„é•¿åº¦ã€‚ ä¸­ç»§å™¨ä¸¤ç«¯ï¼šé€‚ç”¨äºå®Œå…¨ç›¸åŒçš„ä¸¤ç±»ç½‘ç»œçš„äº’è¿ï¼Œé€Ÿç‡è¦ç›¸åŒï¼Œåªåšè½¬å‘ä¸åšæ£€æµ‹ï¼Œå¯ä»¥è¿æ¥ä¸åŒè®¾å¤‡ï¼Œä¸¤ç«¯æ˜¯åŒä¸€ä¸ªåè®® 5-4-3è§„åˆ™ï¼šç½‘ç»œæ ‡å‡†ä¸­éƒ½å¯¹ä¿¡å·çš„å»¶è¿ŸèŒƒå›´ä½œäº†å…·ä½“çš„è§„å®šï¼Œå› è€Œä¸­ç»§å™¨åªèƒ½åœ¨è§„å®šçš„èŒƒå›´å†…è¿›è¡Œï¼Œå¦åˆ™ä¼šç½‘ç»œæ•…éšœã€‚ 5ä¸ªç½‘æ®µ-4ä¸ªä¸­ç»§å™¨-3ä¸ªè®¾å¤‡\n\u003c!DOCTYPE html\u003e Responsive Image é›†çº¿å™¨ï¼ˆå¤šå£ä¸­ç»§å™¨ï¼‰ \u003c!DOCTYPE html\u003e Responsive Image åŠŸèƒ½ï¼šå†ç”Ÿä¸æ”¾å¤§ä¿¡å· ä¸èƒ½åˆ†å‰²å†²çªåŸŸï¼Œè¿æ¥åœ¨é›†çº¿å™¨ä¸Šçš„å·¥ä½œä¸»æœºå¹³åˆ†å¸¦å®½\n","permalink":"https://lifeislife.cn/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E7%89%A9%E7%90%86%E5%B1%82/","summary":"\u003ch2 id=\"ç‰©ç†å±‚\"\u003eç‰©ç†å±‚\u003c/h2\u003e\n\u003ch3 id=\"åŸºæœ¬æ¦‚å¿µ\"\u003eåŸºæœ¬æ¦‚å¿µ\u003c/h3\u003e\n\u003cp\u003eç‰©ç†å±‚è§£å†³å¦‚ä½•åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Š\u003ccode\u003eä¼ è¾“æ•°æ®æ¯”ç‰¹æµ\u003c/code\u003eï¼Œè€Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚\nç‰©ç†å±‚ä¸»è¦ä»»åŠ¡ï¼šç¡®å®šä¸ä¼ è¾“åª’ä½“\u003ccode\u003eæ¥å£\u003c/code\u003eæœ‰å…³çš„ä¸€äº›ç‰¹æ€§\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæœºæ¢°ç‰¹æ€§ï¼šå®šä¹‰ç‰©ç†è¿æ¥çš„ç‰¹æ€§ï¼Œè§„å®šç‰©ç†è¿æ¥æ—¶æ‰€é‡‡ç”¨çš„è§„æ ¼ã€æ¥å£å½¢çŠ¶ã€å¼•çº¿æ•°ç›®ã€\u003ccode\u003eå¼•è„šæ•°é‡\u003c/code\u003eå’Œæ’åˆ—æƒ…å†µã€‚\u003c/li\u003e\n\u003cli\u003eç”µæ°”ç‰¹æ€§ï¼šè§„å®šä¼ è¾“äºŒè¿›åˆ¶ä½æ—¶ï¼Œçº¿è·¯ä¸Šä¿¡å·çš„\u003ccode\u003eç”µå‹èŒƒå›´\u003c/code\u003eã€é˜»æŠ—åŒ¹é…ã€ä¼ è¾“\u003ccode\u003eé€Ÿç‡\u003c/code\u003eå’Œ\u003ccode\u003eè·ç¦»\u003c/code\u003eé™åˆ¶ç­‰ã€‚\u003c/li\u003e\n\u003cli\u003eåŠŸèƒ½ç‰¹æ€§ï¼šæŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€\u003ccode\u003eç”µå¹³è¡¨ç¤ºä½•ç§æ„ä¹‰\u003c/code\u003eï¼Œæ¥å£éƒ¨ä»¶çš„ä¿¡å·çº¿çš„ç”¨é€”ã€‚\u003c/li\u003e\n\u003cli\u003eè§„ç¨‹ç‰¹æ€§ï¼ˆè¿‡ç¨‹ç‰¹æ€§ï¼‰ï¼šå®šä¹‰å„æ¡ç‰©ç†çº¿è·¯çš„å·¥ä½œ\u003ccode\u003eè§„ç¨‹å’Œæ—¶åº\u003c/code\u003eå…³ç³»\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"æ•°æ®é€šä¿¡åŸºç¡€æ¦‚å¿µ\"\u003eæ•°æ®é€šä¿¡åŸºç¡€æ¦‚å¿µ\u003c/h3\u003e\n\u003ch4 id=\"å…¸å‹çš„æ•°æ®é€šä¿¡æ¨¡å‹\"\u003eå…¸å‹çš„æ•°æ®é€šä¿¡æ¨¡å‹\u003c/h4\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2023/06/10/dcfc2ba8a7d5d1e222e8be2ea6e6b78b.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2023/06/10/dcfc2ba8a7d5d1e222e8be2ea6e6b78b.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"è®¡ç®—æœºç½‘ç»œ - ç‰©ç†å±‚"},{"content":"REST Client æ˜¯ VSCode ä¸­ä¸€æ¬¾éå¸¸å¥½ç”¨çš„æ’ä»¶ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿã€æ–¹ä¾¿åœ°å‘é€ HTTP è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šè¯¦ç»†ä»‹ç» REST Client çš„ä½¿ç”¨æ–¹æ³•ã€‚\nå®‰è£… REST Client æ’ä»¶ åœ¨ VSCode ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®‰è£… REST Client æ’ä»¶ï¼š\næ‰“å¼€ VSCodeï¼› ç‚¹å‡»å·¦ä¾§çš„æ’ä»¶å›¾æ ‡ï¼ˆCtrl+Shift+Xï¼‰ï¼› æœç´¢â€œREST Clientâ€æ’ä»¶ï¼› ç‚¹å‡»â€œå®‰è£…â€æŒ‰é’®ã€‚ å‘é€ HTTP è¯·æ±‚ ä½¿ç”¨ REST Client æ’ä»¶å‘é€ HTTP è¯·æ±‚éå¸¸ç®€å•ã€‚ä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„.restæ–‡æœ¬æ–‡ä»¶ï¼Œå°†è¯·æ±‚ä¿¡æ¯æ”¾å…¥å…¶ä¸­ï¼Œç„¶åä½¿ç”¨å¿«æ·é”®Ctrl + Alt + R æˆ–è€…å³é”®èœå•çš„ Send Request é€‰é¡¹å‘é€è¯·æ±‚ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ GET è¯·æ±‚çš„ä¾‹å­ï¼š\nGET https://jsonplaceholder.typicode.com/posts/1 HTTP/1.1 è¿™ä¸ªè¯·æ±‚ä¼šè·å– JSONPlaceholder API ä¸­çš„ä¸€ç¯‡åšå®¢æ–‡ç« ã€‚\nå¦‚æœä½ æƒ³æ·»åŠ è¯·æ±‚å¤´æˆ–è¯·æ±‚ä½“ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š\nGET https://jsonplaceholder.typicode.com/posts/1 HTTP/1.1 Content-Type: application/json { \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } è¿™ä¸ªè¯·æ±‚ä¼šåœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  Content-Type å¤´ï¼Œè¯·æ±‚ä½“ä¸­åŒ…å« JSON æ•°æ®ã€‚\næŸ¥çœ‹å“åº” å‘é€è¯·æ±‚åï¼Œä½ å¯ä»¥åœ¨ç¼–è¾‘å™¨åº•éƒ¨çœ‹åˆ°å“åº”ä¿¡æ¯ã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹å“åº”å¤´ã€å“åº”ä½“æˆ–çŠ¶æ€ç ç­‰è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š\n### HTTP/1.1 200 OK Content-Type: application/json; charset=utf-8 ... { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit...\u0026#34; } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ###ç”¨æ¥åˆ†éš”è¯·æ±‚å’Œå“åº”ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŸ¥çœ‹è¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯äº†ã€‚\nå˜é‡ REST Client æ’ä»¶è¿˜æ”¯æŒå˜é‡çš„ä½¿ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨${variable}è¯­æ³•æ¥å®šä¹‰å˜é‡ï¼Œç„¶ååœ¨è¯·æ±‚ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼š\n@host = https://jsonplaceholder.typicode.com GET ${host}/posts/1 HTTP/1.1 åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º host çš„å˜é‡ï¼Œå¹¶åœ¨è¯·æ±‚ä¸­ä½¿ç”¨å®ƒæ¥æŒ‡å®š API çš„åŸºç¡€ URLã€‚\nå¾ªç¯ å¦‚æœä½ éœ€è¦å‘é€å¤šä¸ªè¯·æ±‚ï¼ŒREST Client æ’ä»¶æ”¯æŒå¾ªç¯è¯­æ³•ã€‚ä¾‹å¦‚ï¼š\n@host = https://jsonplaceholder.typicode.com @for(i,1,10){ GET ${host}/posts/${i} HTTP/1.1 } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@for è¯­æ³•æ¥å‘é€ 10 ä¸ª GET è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚ URL ä¸­çš„ i å˜é‡ä» 1 åˆ° 10 ä¾æ¬¡é€’å¢ã€‚\næ¡ä»¶è¯­å¥ å¦‚æœä½ éœ€è¦æ ¹æ®æ¡ä»¶å‘é€è¯·æ±‚ï¼ŒREST Client æ’ä»¶ä¹Ÿæ”¯æŒæ¡ä»¶è¯­å¥ã€‚ä¾‹å¦‚ï¼š\n@host = https://jsonplaceholder.typicode.com @if(isDebug){ GET ${host}/posts/1 HTTP/1.1 }else{ GET ${host}/posts/2 HTTP/1.1 } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@if è¯­æ³•æ¥åˆ¤æ–­æ˜¯å¦ä¸ºè°ƒè¯•æ¨¡å¼ï¼Œå¦‚æœæ˜¯å°±å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¦åˆ™å‘é€å¦ä¸€ä¸ªè¯·æ±‚ã€‚\nå¯¼å…¥ç¯å¢ƒå˜é‡ REST Client æ’ä»¶æ”¯æŒä»å¤–éƒ¨æ–‡ä»¶ä¸­å¯¼å…¥ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨.env æ–‡ä»¶ä¸­å®šä¹‰å˜é‡ï¼š\nhost=https://jsonplaceholder.typicode.com isDebug=true ç„¶ååœ¨è¯·æ±‚æ–‡ä»¶ä¸­ä½¿ç”¨@environment è¯­æ³•æ¥å¯¼å…¥è¿™äº›å˜é‡ï¼š\n@environment .env @if(isDebug){ GET ${host}/posts/1 HTTP/1.1 }else{ GET ${host}/posts/2 HTTP/1.1 } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@environment è¯­æ³•ä».env æ–‡ä»¶ä¸­å¯¼å…¥ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨è¯·æ±‚æ–‡ä»¶ä¸­ä½¿ç”¨è¿™äº›å˜é‡ã€‚\nç»“è®º REST Client æ’ä»¶æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿã€æ–¹ä¾¿åœ°å‘é€ HTTP è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† REST Client çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å‘é€è¯·æ±‚ã€æŸ¥çœ‹å“åº”ã€ä½¿ç”¨å˜é‡ã€å¾ªç¯ã€æ¡ä»¶è¯­å¥å’Œå¯¼å…¥ç¯å¢ƒå˜é‡ç­‰ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨ REST Client æ’ä»¶ã€‚\n","permalink":"https://lifeislife.cn/posts/vscode-%E6%8F%92%E4%BB%B6-rest-client%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/","summary":"\u003cp\u003eREST Client æ˜¯ VSCode ä¸­ä¸€æ¬¾éå¸¸å¥½ç”¨çš„æ’ä»¶ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿã€æ–¹ä¾¿åœ°å‘é€ HTTP è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šè¯¦ç»†ä»‹ç» REST Client çš„ä½¿ç”¨æ–¹æ³•ã€‚\u003c/p\u003e\n\u003ch2 id=\"å®‰è£…-rest-client-æ’ä»¶\"\u003eå®‰è£… REST Client æ’ä»¶\u003c/h2\u003e\n\u003cp\u003eåœ¨ VSCode ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®‰è£… REST Client æ’ä»¶ï¼š\u003c/p\u003e","title":"VSCode æ’ä»¶ REST Client ä½¿ç”¨æ–‡æ¡£"},{"content":"åœ¨ WSL2 ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸ Docker æœåŠ¡ç›¸å…³çš„é—®é¢˜ï¼Œå› ä¸º WSL2 ä¸ä¼ ç»Ÿ Linux ç³»ç»Ÿåœ¨æŸäº›æ–¹é¢æœ‰æ‰€ä¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹æ­¥éª¤æ¥è§£å†³é—®é¢˜ï¼š\né¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† WSL2 çš„æœ€æ–°ç‰ˆæœ¬ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–° WSL2ï¼š wsl --update ç¡®ä¿ Docker Desktop for Windows å·²å®‰è£…å¹¶å¯ç”¨ WSL2 é›†æˆã€‚ä½ å¯ä»¥åœ¨ Docker Desktop è®¾ç½®ä¸­æ‰¾åˆ°è¿™ä¸ªé€‰é¡¹ã€‚ç¡®ä¿ä½ çš„ WSL2 å‘è¡Œç‰ˆå·²è¢«æ·»åŠ åˆ° Docker Desktop çš„ WSL é›†æˆåˆ—è¡¨ä¸­ã€‚ç‚¹å‡»é“¾æ¥ä¸‹è½½å®‰è£…åœ¨ Windows ä¸Šå®‰è£… Docker æ¡Œé¢ã€‚ åœ¨ WSL2 ä¸­ï¼Œå°è¯•æ‰‹åŠ¨åœæ­¢ Docker æœåŠ¡ï¼š sudo /etc/init.d/docker stop å¦‚æœè¿™ä¸ªå‘½ä»¤æ— æ³•åœæ­¢ Docker æœåŠ¡ï¼Œè¯·å°è¯•ä»¥ä¸‹å‘½ä»¤ï¼š sudo killall dockerd å¸è½½ Dockerï¼š sudo apt-get purge docker-ce åˆ é™¤ Docker ç›¸å…³çš„æ–‡ä»¶å’Œç›®å½•ï¼š sudo rm -rf /var/lib/docker é‡æ–°å¯åŠ¨ WSL2ï¼š wsl --shutdown ç„¶åé‡æ–°æ‰“å¼€ WSL2ã€‚ åœ¨ WSL2 ä¸­ï¼Œä¸è¦ç›´æ¥å®‰è£… Docker CEã€‚è€Œæ˜¯ä½¿ç”¨ Docker Desktop for Windows æä¾›çš„ Docker æœåŠ¡ã€‚è¿™æ„å‘³ç€ä½ ä¸éœ€è¦åœ¨ WSL2 ä¸­å®‰è£… Docker CEï¼Œå› ä¸º Docker Desktop å·²ç»æä¾›äº† Docker æœåŠ¡ã€‚ ç¡®ä¿ä½ çš„ WSL2 å‘è¡Œç‰ˆå¯ä»¥è®¿é—® Docker Desktop æä¾›çš„ Docker æœåŠ¡ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ï¼š docker --version docker info ","permalink":"https://lifeislife.cn/posts/wsl2%E5%AE%89%E8%A3%85docker/","summary":"\u003cp\u003eåœ¨ WSL2 ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸ Docker æœåŠ¡ç›¸å…³çš„é—®é¢˜ï¼Œå› ä¸º WSL2 ä¸ä¼ ç»Ÿ Linux ç³»ç»Ÿåœ¨æŸäº›æ–¹é¢æœ‰æ‰€ä¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹æ­¥éª¤æ¥è§£å†³é—®é¢˜ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eé¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† WSL2 çš„æœ€æ–°ç‰ˆæœ¬ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–° WSL2ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewsl --update\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"2\"\u003e\n\u003cli\u003eç¡®ä¿ Docker Desktop for Windows å·²å®‰è£…å¹¶å¯ç”¨ WSL2 é›†æˆã€‚ä½ å¯ä»¥åœ¨ Docker Desktop è®¾ç½®ä¸­æ‰¾åˆ°è¿™ä¸ªé€‰é¡¹ã€‚ç¡®ä¿ä½ çš„ WSL2 å‘è¡Œç‰ˆå·²è¢«æ·»åŠ åˆ° Docker Desktop çš„ WSL é›†æˆåˆ—è¡¨ä¸­ã€‚ç‚¹å‡»é“¾æ¥ä¸‹è½½å®‰è£…\u003ca href=\"https://dockerdocs.cn/docker-for-windows/install/\"\u003eåœ¨ Windows ä¸Šå®‰è£… Docker æ¡Œé¢\u003c/a\u003eã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨ WSL2 ä¸­ï¼Œå°è¯•æ‰‹åŠ¨åœæ­¢ Docker æœåŠ¡ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo /etc/init.d/docker stop\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cpre\u003e\u003ccode\u003eå¦‚æœè¿™ä¸ªå‘½ä»¤æ— æ³•åœæ­¢ Docker æœåŠ¡ï¼Œè¯·å°è¯•ä»¥ä¸‹å‘½ä»¤ï¼š\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo killall dockerd\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"4\"\u003e\n\u003cli\u003eå¸è½½ Dockerï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt-get purge docker-ce\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"5\"\u003e\n\u003cli\u003eåˆ é™¤ Docker ç›¸å…³çš„æ–‡ä»¶å’Œç›®å½•ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo rm -rf /var/lib/docker\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"6\"\u003e\n\u003cli\u003eé‡æ–°å¯åŠ¨ WSL2ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewsl --shutdown\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"7\"\u003e\n\u003cli\u003eç„¶åé‡æ–°æ‰“å¼€ WSL2ã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨ WSL2 ä¸­ï¼Œä¸è¦ç›´æ¥å®‰è£… Docker CEã€‚è€Œæ˜¯ä½¿ç”¨ Docker Desktop for Windows æä¾›çš„ Docker æœåŠ¡ã€‚è¿™æ„å‘³ç€ä½ ä¸éœ€è¦åœ¨ WSL2 ä¸­å®‰è£… Docker CEï¼Œå› ä¸º Docker Desktop å·²ç»æä¾›äº† Docker æœåŠ¡ã€‚\u003c/li\u003e\n\u003cli\u003eç¡®ä¿ä½ çš„ WSL2 å‘è¡Œç‰ˆå¯ä»¥è®¿é—® Docker Desktop æä¾›çš„ Docker æœåŠ¡ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003edocker --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003edocker info\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"WSL2 å®‰è£… Docker"},{"content":"ä¸€ç”Ÿä¸€èŠ¯æ¦‚è¿° â€œä¸€ç”Ÿä¸€èŠ¯â€æ¦‚è¿° _å“”å“©å“”å“©_bilibili\nç¨‹åºçš„æ‰§è¡Œå’Œæ¨¡æ‹Ÿå™¨ freestanding è¿è¡Œæ—¶ç¯å¢ƒ ç¨‹åºå¦‚ä½•ç»“æŸè¿è¡Œ åœ¨æ­£å¸¸çš„ç¯å¢ƒä¸­ï¼Œå†™äº†ä¸€æ®µä»£ç returnä¹‹åï¼Œå®é™…ä¸Šè°ƒç”¨äº†ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨exitã€‚ä½†æ˜¯åœ¨ freestanding ç¯å¢ƒä¸­ï¼Œæ²¡æœ‰æ“ä½œç³»ç»Ÿæ”¯æŒï¼Œæ ¹æ® C99 æ‰‹å†Œè§„å®šï¼Œåœ¨ freestanding ç¯å¢ƒä¸­ç»“æŸè¿è¡Œæ˜¯ç”±ç”¨æˆ·å®ç°å†³å®šçš„ã€‚\n5.1.2.1 Freestanding environment 2 The effect of program termination in a freestanding environment is implementation-defined. åœ¨ qemu-system-riscv64 ä¸­çš„ virt æœºå™¨æ¨¡å‹ä¸­ï¼Œå¾€ä¸€ä¸ªç‰¹æ®Šçš„åœ°å€å†™å…¥ä¸€ä¸ªç‰¹æ®Šçš„â€œæš—å·â€å³å¯ç»“æŸ QEMU\n#include \u0026lt;stdint.h\u0026gt; void _start() { volatile uint8_t *p = (uint8_t *)(uintptr_t)0x10000000; *p = \u0026#39;A\u0026#39;; volatile uint32_t *exit = (uint32_t *)(uintptr_t)0x100000; *exit = 0x5555; // magic number _start(); // é€’å½’è°ƒç”¨ï¼Œå¦‚æœæ­£å¸¸é€€å‡ºå°†ä¸ä¼šå†æ¬¡æ‰“å°A } åœ¨è‡ªåˆ¶ freestanding è¿è¡Œæ—¶ç¯å¢ƒä¸Šè¿è¡Œ Hello ç¨‹åº QEMU è™½ç„¶æ˜¯ä¸ªå¼€æºé¡¹ç›®ï¼Œä½†è¿˜æŒºå¤æ‚ï¼Œä¸åˆ©äºæˆ‘ä»¬ç†è§£ç»†èŠ‚ã€‚è®©æˆ‘ä»¬æ¥è®¾è®¡ä¸€ä¸ªé¢å‘ RISC-V ç¨‹åºçš„ç®€å• freestanding è¿è¡Œæ—¶ç¯å¢ƒï¼Œæˆ‘åšä»¥ä¸‹çº¦å®šã€‚\nç¨‹åºä»åœ°å€ 0 å¼€å§‹æ‰§è¡Œ åªæ”¯æŒä¸¤æ¡æŒ‡ä»¤ addi æŒ‡ä»¤ ebreak æŒ‡ä»¤ å¯„å­˜å™¨ a0=0 æ—¶ï¼Œè¾“å‡ºå¯„å­˜å™¨ a1 ä½ 8 ä½çš„å­—ç¬¦ å¯„å­˜å™¨ a0=1 æ—¶ï¼Œç»“æŸè¿è¡Œ ABI Mnemonicï¼ˆRISC-V å®˜æ–¹ä¸ºæ¯ä¸ªå¯„å­˜å™¨èµ·ä¸ªåå­—ï¼‰ static void ebreak(long arg0, long arg1) { asm volatile(\u0026#34;addi a0, x0, %0;\u0026#34; \u0026#34;addi a1, x0, %1;\u0026#34; \u0026#34;ebreak\u0026#34; : : \u0026#34;i\u0026#34;(arg0), \u0026#34;i\u0026#34;(arg1)); } static void putch(char ch) { ebreak(0, ch); } static void halt(int code) { ebreak(1, code); while (1); } void _start() { putch(\u0026#39;A\u0026#39;); halt(0); } /** * è¿™æ®µä»£ç å®šä¹‰äº†ä¸‰ä¸ªå‡½æ•°ï¼šebreakã€putch å’Œ haltã€‚ * ebreak å‡½æ•°æ˜¯ä¸€ä¸ªå†…è”æ±‡ç¼–å‡½æ•°ï¼Œå®ƒæ‰§è¡Œ ebreak æŒ‡ä»¤ã€‚ * è¯¥æŒ‡ä»¤æ˜¯ RISC-V æ¶æ„ä¸­çš„ä¸€æ¡è°ƒè¯•æŒ‡ä»¤ï¼Œå¯ä»¥åœ¨è°ƒè¯•å™¨çš„æ§åˆ¶ä¸‹æ‰§è¡Œã€‚ * è¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° arg0 å’Œ arg1ï¼Œå®ƒä»¬å°†è¢«å­˜å‚¨åœ¨å¯„å­˜å™¨ a0 å’Œ a1 ä¸­ã€‚ * putch å‡½æ•°è°ƒç”¨äº† ebreak å‡½æ•°ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸º 0ï¼Œ * ç¬¬äºŒä¸ªå‚æ•°è®¾ä¸ºå‡½æ•°å‚æ•° chã€‚è¿™æ ·åšçš„ç›®çš„å¯èƒ½æ˜¯ä¸ºäº†åœ¨è°ƒè¯•å™¨çš„æ§åˆ¶ä¸‹è¾“å‡ºä¸€ä¸ªå­—ç¬¦ã€‚ * halt å‡½æ•°è°ƒç”¨äº† ebreak å‡½æ•°ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸º 1ï¼Œ * ç¬¬äºŒä¸ªå‚æ•°è®¾ä¸ºå‡½æ•°å‚æ•° codeã€‚è¿™æ ·åšçš„ç›®çš„å¯èƒ½æ˜¯ä¸ºäº†é€šçŸ¥è°ƒè¯•å™¨ç¨‹åºå·²ç»ç»“æŸï¼Œ * å¹¶ä½¿ç”¨ code ä½œä¸ºç»“æŸçŠ¶æ€ã€‚ç„¶åï¼Œhalt å‡½æ•°è¿›å…¥ä¸€ä¸ªæ­»å¾ªç¯ï¼Œç­‰å¾…è°ƒè¯•å™¨çš„æ“ä½œã€‚ * æœ€åï¼Œ_start å‡½æ•°è°ƒç”¨äº† putch å‡½æ•°è¾“å‡ºå­—ç¬¦ \u0026#39;A\u0026#39;ï¼Œç„¶åè°ƒç”¨ halt å‡½æ•°ç»“æŸç¨‹åº */ riscv64-linux-gnu-gcc -march=rv64g -ffreestanding -nostdlib -static -Wl,-Ttext=0 \\ -O2 -o prog a.c riscv64-linux-gnu-gcc: è¿™æ˜¯ GCC çš„å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ï¼Œè¡¨ç¤ºä½¿ç”¨çš„æ˜¯ GCC ç¼–è¯‘å™¨ã€‚riscv64-linux-gnu æ˜¯ç¼–è¯‘å™¨çš„ç›®æ ‡å¹³å°ï¼Œè¡¨ç¤ºç”Ÿæˆçš„ä»£ç æ˜¯é’ˆå¯¹ RISC-V æ¶æ„ï¼Œè¿è¡Œåœ¨ Linux ç³»ç»Ÿä¸Šçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚\n-march=rv64g: è¿™ä¸ªå‚æ•°æŒ‡å®šäº†ç¼–è¯‘å™¨ä½¿ç”¨çš„æŒ‡ä»¤é›†ã€‚rv64g è¡¨ç¤ºä½¿ç”¨ RISC-V æ¶æ„çš„ 64 ä½æŒ‡ä»¤é›†ã€‚\n-ffreestanding: è¿™ä¸ªå‚æ•°æŒ‡ç¤ºç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç å°†åœ¨ freestanding è¿è¡Œç¯å¢ƒä¸­è¿è¡Œã€‚åœ¨ freestanding è¿è¡Œç¯å¢ƒä¸­ï¼Œç¨‹åºä¸ä¼šè‡ªåŠ¨é“¾æ¥æ ‡å‡† C åº“ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨è°ƒç”¨ main å‡½æ•°ã€‚\n-nostdlib: è¿™ä¸ªå‚æ•°è¡¨ç¤ºç¼–è¯‘å™¨ä¸éœ€è¦é“¾æ¥æ ‡å‡† C åº“ã€‚\n-static: è¿™ä¸ªå‚æ•°è¡¨ç¤ºç”Ÿæˆçš„ä»£ç æ˜¯é™æ€é“¾æ¥çš„ã€‚\n-Wl,-Ttext=0: è¿™ä¸ªå‚æ•°æ˜¯ä¼ é€’ç»™é“¾æ¥å™¨çš„ï¼Œè¡¨ç¤ºè®¾ç½®ä»£ç æ®µçš„èµ·å§‹åœ°å€ä¸º 0ã€‚\n-O2: è¿™ä¸ªå‚æ•°æŒ‡ç¤ºç¼–è¯‘å™¨ä½¿ç”¨ä¼˜åŒ–çº§åˆ«ä¸º 2 çš„ä¼˜åŒ–é€‰é¡¹ã€‚\n-o prog: è¿™ä¸ªå‚æ•°æŒ‡å®šç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ä¸º progã€‚\na.c: è¿™æ˜¯è¦ç¼–è¯‘çš„ C æºæ–‡ä»¶çš„åç§°ã€‚\nllvm-objdump -d prog åæ±‡ç¼–ç»“æœå¦‚ä¸‹ï¼š\nprog: file format elf64-littleriscv Disassembly of section .text: 0000000000000000 \u0026lt;_start\u0026gt;: 0: 13 05 00 00 li a0, 0 4: 93 05 10 04 li a1, 65 8: 73 00 10 00 ebreak c: 13 05 10 00 li a0, 1 10: 93 05 00 00 li a1, 0 14: 73 00 10 00 ebreak 18: 6f 00 00 00 j 0x18 \u0026lt;_start+0x18\u0026gt; æˆ‘ä»¬çº¦å®šä¸­æ²¡æœ‰liæŒ‡ä»¤ï¼Œä½†æ˜¯æ±‡ç¼–ä¸­å´å‡ºç°äº†ï¼Œè¿™æ˜¯å› ä¸ºliæ˜¯ä¸€æ¡ä¼ªæŒ‡ä»¤ï¼Œå®ƒçš„å®é™…å®ç°ä¾ç„¶æ˜¯addiã€‚å¦‚æœä¸ä½¿ç”¨ä¼ªæŒ‡ä»¤å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åæ±‡ç¼–ï¼š\nllvm-objdump -M no-aliases -d prog ç»“æœå¦‚ä¸‹ï¼Œæ²¡æœ‰ä¼ªæŒ‡ä»¤ï¼Œåªæœ‰æˆ‘ä»¬çº¦å®šçš„å‡ æ¡æŒ‡ä»¤ã€‚\nprog: file format elf64-littleriscv Disassembly of section .text: 0000000000000000 \u0026lt;_start\u0026gt;: 0: 13 05 00 00 addi a0, zero, 0 4: 93 05 10 04 addi a1, zero, 65 8: 73 00 10 00 ebreak c: 13 05 10 00 addi a0, zero, 1 10: 93 05 00 00 addi a1, zero, 0 14: 73 00 10 00 ebreak 18: 6f 00 00 00 jal zero, 0x18 \u0026lt;_start+0x18\u0026gt; YEMU æŒ‡ä»¤å¦‚ä½•æ‰§è¡Œ ISA æ‰‹å†Œå®šä¹‰äº†ä¸€ä¸ªçŠ¶æ€æœºã€‚\nçŠ¶æ€é›†åˆ S = {\u0026lt;R, M\u0026gt;}\nR = {PC, x0, x1, x2, \u0026hellip;} RISC-V æ‰‹å†Œ -\u0026gt; 2.1 Programmersâ€™Model for Base Integer ISA PC = ç¨‹åºè®¡æ•°å™¨ = å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤ä½ç½® M = å†…å­˜ RISC-V æ‰‹å†Œ -\u0026gt; 1.4 Memory æ¿€åŠ±äº‹ä»¶ï¼šæ‰§è¡Œ PC æŒ‡å‘çš„æŒ‡ä»¤ çŠ¶æ€è½¬ç§»è§„åˆ™ï¼šæŒ‡ä»¤çš„è¯­ä¹‰ (semantics) åˆå§‹çŠ¶æ€ S0 = \u0026lt;R0, M0\u0026gt;\næˆ‘ä»¬åªè¦æŠŠè¿™ä¸ªçŠ¶æ€æœºå®ç°å‡ºæ¥ï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥æ‰§è¡ŒæŒ‡ä»¤äº†ï¼\nç”¨å˜é‡å®ç°å†…å­˜ #include \u0026lt;stdint.h\u0026gt; uint64_t R[32], PC; // according to the RISC-V manual uint8_t M[64]; // 64-Byte memory Q: ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ int64_t å’Œ int8_t?\nA: Cè¯­è¨€æ ‡å‡†è§„å®š, æœ‰ç¬¦å·æ•°æº¢å‡ºæ˜¯undefined behavior, ä½†æ— ç¬¦å·æ•°ä¸ä¼šæº¢å‡º\n6.5 Expressions 5 If an exceptional condition occurs during the evaluation of an expression (that is, if the result is not mathematically defined or not in the range of representable values for its type), the behavior is undefined. 6.2.5 Types 9 A computation involving unsigned operands can never overflow, because a result that cannot be represented by the resulting unsigned integer type is reduced modulo the number that is one greater than the largest value that can be represented by the resulting type.\nç”¨è¯­å¥å®ç°æŒ‡ä»¤çš„è¯­ä¹‰ æŒ‡ä»¤å‘¨æœŸ (instruction cycle): æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„æ­¥éª¤\nå–æŒ‡ (fetch): ä» PC æ‰€æŒ‡ç¤ºçš„å†…å­˜ä½ç½®è¯»å–ä¸€æ¡æŒ‡ä»¤ è¯‘ç  (decode): æŒ‰ç…§æ‰‹å†Œè§£ææŒ‡ä»¤çš„æ“ä½œç  (opcode) å’Œæ“ä½œæ•° (operand) æ‰§è¡Œ (execute): æŒ‰è§£æå‡ºçš„æ“ä½œç ï¼Œå¯¹æ“ä½œæ•°è¿›è¡Œå¤„ç† æ›´æ–° PC: è®© PC æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ çŠ¶æ€æœºä¸æ–­æ‰§è¡ŒæŒ‡ä»¤ï¼Œç›´åˆ°ç»“æŸè¿è¡Œï¼š\n#include \u0026lt;stdbool.h\u0026gt; bool halt = false; while (!halt) { inst_cycle(); } 31 20 19 15 14 12 11 7 6 0 +---------------+-----+-----+-----+---------+ | imm[11:0] | rs1 | 000 | rd | 0010011 | ADDI +---------------+-----+-----+-----+---------+ +---------------+-----+-----+-----+---------+ | 000000000001 |00000| 000 |00000| 1110011 | EBREAK +---------------+-----+-----+-----+---------+ ä¸€ä¸ªç®€å•çš„å®ç°ï¼š\nvoid inst_cycle() { uint32_t inst = *(uint32_t *)\u0026amp;M[PC]; if (((inst \u0026amp; 0x7f) == 0x13) \u0026amp;\u0026amp; ((inst \u0026gt;\u0026gt; 12) \u0026amp; 0x7) == 0) { // addi if (((inst \u0026gt;\u0026gt; 7) \u0026amp; 0x1f) != 0) { R[(inst \u0026gt;\u0026gt; 7) \u0026amp; 0x1f] = R[(inst \u0026gt;\u0026gt; 15) \u0026amp; 0x1f] + (((inst \u0026gt;\u0026gt; 20) \u0026amp; 0x7ff) - ((inst \u0026amp; 0x80000000) ? 4096 : 0)); } } else if (inst == 0x00100073) { // ebreak if (R[10] == 0) { putchar(R[11] \u0026amp; 0xff); } else if (R[10] == 1) { halt = true; } else { printf(\u0026#34;Unsupported ebreak command\\n\u0026#34;); } } else { printf(\u0026#34;Unsupported instuction\\n\u0026#34;); } PC += 4; } NEMU ä»£ç å¯¼è¯» make é¡¹ç›®æ„ # æ˜¾ç¤ºmakeè¸ªè¿¹ strace make # æ˜¾ç¤ºæ„å»ºè¿‡ç¨‹ make -d # æ˜¾ç¤ºæ›´è¯¦ç»†çš„æ„å»ºæ„è¿‡ç¨‹ make --debug=v Reading makefiles... Reading makefile `Makefile\u0026#39;... Updating goal targets.... File `all\u0026#39; does not exist. File `all\u0026#39; does not exist. Looking for an implicit rule for `all\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.c\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.cc\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.C\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.cpp\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.CPP\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.cxx\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.CXX\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.c++\u0026#39;. Trying pattern rule with stem `all\u0026#39;. Trying implicit prerequisite `all.C++\u0026#39;. No implicit rule found for `all\u0026#39;. Finished prerequisites of target file `all\u0026#39;. Must remake target `all\u0026#39;. gcc -o all all.o Finished prerequisites of target file `all\u0026#39;. Must remake target `all\u0026#39;. gcc -o all all.o Successfully remade target file `all\u0026#39;. # åªæ‰“å°å‘½ä»¤ä¸æ‰§è¡Œ make -n # è¾“å‡ºç›®æ ‡è¢«æ„å»ºçš„åŸå› å’Œæ‰§è¡Œçš„å‘½ä»¤ make --trace ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ª makefileï¼Œå…¶ç›®æ ‡ all ä¾èµ–äºç›®æ ‡ foo å’Œ barï¼Œå¹¶ä¸”æ‚¨è¿è¡Œ make --trace allï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š\nmake[1]: Entering directory \u0026#39;/path/to/project\u0026#39; gcc -o foo foo.c make[1]: Leaving directory \u0026#39;/path/to/project\u0026#39; make[1]: Entering directory \u0026#39;/path/to/project\u0026#39; gcc -o bar bar.c make[1]: Leaving directory \u0026#39;/path/to/project\u0026#39; make[1]: Entering directory \u0026#39;/path/to/project\u0026#39; gcc -o all foo.o bar.o make[1]: Leaving directory \u0026#39;/path/to/project\u0026#39; make -nB # -B å¯ä»¥å¼ºåˆ¶ make æ„å»ºæ‰€æœ‰ç›®æ ‡ï¼Œå³ä½¿å®ƒä»¬å·²ç»æ˜¯æœ€æ–°çš„ make -nB | vim - åœ¨ vim ç¼–è¾‘å™¨ä¸­è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œè¿‡æ»¤ä¸éœ€è¦çš„ä¿¡æ¯ã€‚\n# åªä¿ç•™ gcc æˆ– g++å¼€å¤´çš„è¡Œ :%!grep \u0026#34;^\\(gcc\\|g++\\)\u0026#34; # å°†ç¯å¢ƒå˜é‡$NEMU_HOME æ‰€æŒ‡ç¤ºå­—ç¬¦ä¸²æ›¿æ¢ä¸º$NEMU_HOME :%!sed -e \u0026#34;s+$NEMU_HOME+\\$NEMU_HOME+g\u0026#34; # å°†$NEMU_HOME/build/obj-riscv64-nemu-interpreter æ›¿æ¢ä¸º$OBJ_DIR :%s+\\$NEMU_HOME/build/obj-riscv64-nemu-interpreter+$OBJ_DIR+g # å°†-c ä¹‹å‰çš„å†…å®¹æ›¿æ¢ä¸º$CFLAGS :%s/-O2.*=riscv64/$CFLAGS/g # å°†æœ€åä¸€è¡Œçš„ç©ºæ ¼æ›¿æ¢æˆæ¢è¡Œå¹¶ç¼©è¿›ä¸¤æ ¼ :$s/ */\\r /g è°ƒè¯•æŠ€å·§é€‰å°† æ–­è¨€ åœ¨ C ç¨‹åºä¸­ä½¿ç”¨æ–­è¨€ï¼ˆassertï¼‰ä¸ä¼šå¢åŠ é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿä¸ä¼šå¢åŠ æ•°æ®æ®µç©ºé—´ã€‚æ–­è¨€æ˜¯ä¸€ç§åœ¨è¿è¡Œæ—¶æ£€æŸ¥ç¨‹åºå‡è®¾æ˜¯å¦ä¸ºçœŸçš„æ–¹æ³•ï¼Œå½“æ–­è¨€å¤±è´¥æ—¶ï¼Œç¨‹åºä¼šç»ˆæ­¢æ‰§è¡Œå¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚\nåœ¨ C è¯­è¨€ä¸­ï¼Œæ–­è¨€é€šå¸¸ä½¿ç”¨å®æ¥å®ç°ã€‚å®ƒåœ¨ç¼–è¯‘æ—¶è¢«è§£é‡Šä¸ºä¸€ä¸ªç®€å•çš„æ¡ä»¶è¯­å¥ï¼Œå› æ­¤å®ƒä¸ä¼šå¢åŠ ç¨‹åºçš„å†…å­˜ç©ºé—´æˆ–æ•°æ®æ®µç©ºé—´ã€‚æ–­è¨€å®çš„å®šä¹‰é€šå¸¸ç±»ä¼¼äºä»¥ä¸‹ä»£ç ï¼š\n#include \u0026lt;assert.h\u0026gt; #define assert(expression) ((void)0) è¿™é‡Œçš„ expression æ˜¯è¦æ£€æŸ¥çš„æ¡ä»¶ã€‚å¦‚æœ expression ä¸ºå‡ï¼Œåˆ™ assert() å‡½æ•°ä¼šå‘å‡ºé”™è¯¯æ¶ˆæ¯å¹¶ç»ˆæ­¢ç¨‹åºçš„æ‰§è¡Œã€‚å¦‚æœ expression ä¸ºçœŸï¼Œåˆ™ assert() å‡½æ•°ä¸ä¼šäº§ç”Ÿä»»ä½•æ“ä½œï¼Œå¹¶ä¸”è¢«è§£é‡Šä¸º ((void)0)ã€‚è¿™ä¸ªè¯­å¥ä¸ä¼šå¢åŠ ä»»ä½•å†…å­˜æˆ–æ•°æ®æ®µç©ºé—´ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä¸€ä¸ªç¨‹åºä½¿ç”¨å¤§é‡çš„æ–­è¨€æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¯¹ç¨‹åºçš„æ€§èƒ½äº§ç”Ÿä¸€äº›å½±å“ï¼Œå› ä¸ºæ¯ä¸ªæ–­è¨€éƒ½éœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œæ£€æŸ¥ã€‚å› æ­¤ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåº”è¯¥å°½å¯èƒ½å‡å°‘ä½¿ç”¨æ–­è¨€ï¼Œå¹¶åœ¨æµ‹è¯•å’Œè°ƒè¯•é˜¶æ®µä½¿ç”¨å®ƒä»¬æ¥ç¡®ä¿ä»£ç çš„æ­£ ç¡®æ€§ã€‚\n// nemu/src/isa/riscv64/local-include/reg.h static inline int check_reg_idx(int idx) { IFDEF(CONFIG_RT_CHECK, assert(idx \u0026gt;= 0 \u0026amp;\u0026amp; idx \u0026lt; 32)); return idx; } ç¼–è¯‘å™¨å·¥å…· sanitizer è®©ç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥ assert, æ‹¦æˆªå¸¸è§çš„éé¢„æœŸè¡Œä¸º\nAddressSanitizer - æ£€æŸ¥æŒ‡é’ˆè¶Šç•Œï¼Œuse-after-free ThreadSanitizer - æ£€æŸ¥å¤šçº¿ç¨‹æ•°æ®ç«äº‰ LeakSanitizer - æ£€æŸ¥å†…å­˜æ³„æ¼ UndefinedBehaviorSanitizer - æ£€æŸ¥ UB è¿˜èƒ½æ£€æŸ¥æŒ‡é’ˆçš„æ¯”è¾ƒå’Œç›¸å‡ æ‰“å¼€åç¨‹åºè¿è¡Œæ•ˆç‡æœ‰æ‰€ä¸‹é™\nä½†è°ƒè¯•çš„æ—¶å€™éå¸¸å€¼å¾—ï¼Œèººç€å°±èƒ½è®©å·¥å…·å¸®ä½ æ‰¾ bug man gcc æŸ¥çœ‹å…·ä½“ç”¨æ³• ä½¿ç”¨æ–¹æ³• GCC æä¾›äº†å¤šç§ Sanitizer å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…åœ¨ç¼–è¯‘æ—¶æ£€æµ‹å’Œä¿®å¤å¸¸è§çš„ç¼–ç¨‹é”™è¯¯ï¼Œä¾‹å¦‚å†…å­˜æ³„æ¼ã€ç¼“å†²åŒºæº¢å‡ºã€ä½¿ç”¨æœªåˆå§‹åŒ–çš„å˜é‡ç­‰ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ª Sanitizer å·¥å…·çš„ç¤ºä¾‹ç”¨æ³•ï¼š\nAddress Sanitizerï¼ˆASANï¼‰ï¼šæ£€æµ‹å†…å­˜é”™è¯¯ï¼Œä¾‹å¦‚ä½¿ç”¨å·²ç»é‡Šæ”¾çš„å†…å­˜ã€å †æ ˆå’Œå…¨å±€ç¼“å†²åŒºçš„æº¢å‡ºå’Œä¸‹æº¢ç­‰ã€‚\ngcc -fsanitize=address -g \u0026lt;source files\u0026gt; -o \u0026lt;output file\u0026gt; Undefined Behavior Sanitizerï¼ˆUBSANï¼‰ï¼šæ£€æµ‹æœªå®šä¹‰è¡Œä¸ºï¼Œä¾‹å¦‚é™¤ä»¥é›¶ã€ä½¿ç”¨æœªåˆå§‹åŒ–çš„å˜é‡ã€æŒ‡é’ˆæº¢å‡ºç­‰ã€‚\ngcc -fsanitize=undefined -g \u0026lt;source files\u0026gt; -o \u0026lt;output file\u0026gt; Thread Sanitizerï¼ˆTSANï¼‰ï¼šæ£€æµ‹å¹¶å‘é—®é¢˜ï¼Œä¾‹å¦‚ç«äº‰æ¡ä»¶ã€æ­»é”ç­‰ã€‚\ngcc -fsanitize=thread -g \u0026lt;source files\u0026gt; -o \u0026lt;output file\u0026gt; Memory Sanitizerï¼ˆMSANï¼‰ï¼šæ£€æµ‹ä½¿ç”¨æœªåˆå§‹åŒ–çš„å†…å­˜ï¼Œä¾‹å¦‚è¯»å–æœªåˆå§‹åŒ–çš„å†…å­˜ã€ä½¿ç”¨å·²é‡Šæ”¾çš„å†…å­˜ç­‰ã€‚\ngcc -fsanitize=memory -g \u0026lt;source files\u0026gt; -o \u0026lt;output file\u0026gt; éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSanitizer å·¥å…·å¯èƒ½ä¼šå¢åŠ ç¨‹åºçš„æ‰§è¡Œæ—¶é—´å’Œå†…å­˜æ¶ˆè€—ï¼Œå¹¶ä¸”å¯èƒ½ä¼šäº§ç”Ÿè¯¯æŠ¥ï¼Œå› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥ç¦ç”¨ Sanitizer å·¥å…·ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å¼€å‘å’Œæµ‹è¯•é˜¶æ®µå¯ç”¨ Sanitizer å·¥å…·ï¼Œä»¥å¸®åŠ©ä»–ä»¬å‘ç°å’Œä¿®å¤ä»£ç ä¸­çš„é—®é¢˜ã€‚\nè‡ªé¡¶å‘ä¸‹ç†è§£ç¨‹åºè¡Œä¸º ftrace - å‡½æ•°è°ƒç”¨å±‚æ¬¡ï¼Œç†è§£ç¨‹åºçš„å¤§ä½“è¡Œä¸º itrace - æŒ‡ä»¤æ‰§è¡Œå±‚æ¬¡ï¼Œç†è§£æŒ‡ä»¤çº§åˆ«çš„è¡Œä¸º mtrace - è®¿å­˜çš„è¸ªè¿¹ dtrace - è®¾å¤‡è®¿é—®çš„è¸ªè¿¹ sdb - çµæ´»ç»†è‡´åœ°æ£€æŸ¥å®¢æˆ·ç¨‹åºçš„çŠ¶æ€ si - ç»†ç²’åº¦çš„çŠ¶æ€è½¬ç§» info r/x - æ£€æŸ¥R/M ç›‘è§†ç‚¹ - æ•æ‰æŸçŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶åˆ» sdb ä¸ gdb ç»“åˆä½¿ç”¨\nå…ˆç”¨ sdb å®šä½åˆ°å‡ºé”™ç‚¹é™„è¿‘ å†ç”¨ gdb è§‚å¯Ÿ NEMU çš„ç»†èŠ‚è¡Œä¸º ç¨‹åºçš„è¿è¡Œæ—¶é—´éƒ½èŠ±åœ¨äº†å“ªé‡Œ Linux çš„æ€§èƒ½åˆ†æå·¥å…· perf æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå®ƒå¯ä»¥é€šè¿‡ç¡¬ä»¶è®¡æ•°å™¨ï¼ˆHardware counterï¼‰æˆ–è€…æ€§èƒ½äº‹ä»¶ï¼ˆPerformance eventï¼‰æ¥å¯¹ Linux ç³»ç»Ÿçš„æ€§èƒ½è¿›è¡Œåˆ†æã€‚ä»¥ä¸‹æ˜¯ perf å·¥å…·çš„å®‰è£…å’Œä½¿ç”¨æ–¹æ³•ã€‚\nå®‰è£… perf å·¥å…· åœ¨å¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆä¸­ï¼Œperf å·¥å…·å·²ç»é¢„å…ˆå®‰è£…ï¼Œå¦‚æœæ²¡æœ‰é¢„å…ˆå®‰è£…ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚\nDebian/Ubuntu ç³»ç»Ÿï¼šsudo apt-get install linux-tools-common linux-tools-generic Fedora ç³»ç»Ÿï¼šsudo dnf install perf CentOS/RHEL ç³»ç»Ÿï¼šsudo yum install perf å®‰è£…å®Œæ¯•ä¹‹åï¼Œå¯ä»¥é€šè¿‡ perf version å‘½ä»¤æ¥æ£€æŸ¥ perf ç‰ˆæœ¬ä¿¡æ¯ã€‚\nç¼–å†™ä¸€ä¸ªç®€å•çš„ C ä»£ç  è¿™é‡Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç®€å•çš„ C ä»£ç ï¼Œç”¨äºæµ‹è¯• perf å·¥å…·çš„ä½¿ç”¨ã€‚ä»£ç å¦‚ä¸‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; int main() { int i, sum = 0; for (i = 1; i \u0026lt;= 1000000; i++) sum += i; printf(\u0026#34;sum = %d\\n\u0026#34;, sum); return 0; } ä»£ç çš„ä½œç”¨æ˜¯è®¡ç®— 1 åˆ° 1000000 çš„å’Œã€‚\nä½¿ç”¨ perf å·¥å…· ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ perf å·¥å…·æ¥å¯¹ä¸Šè¿°ä»£ç è¿›è¡Œæ€§èƒ½åˆ†æã€‚å‡è®¾ä»£ç ä¿å­˜åœ¨æ–‡ä»¶ test.c ä¸­ã€‚\nç»Ÿè®¡ CPU å‘¨æœŸæ•° ä»¥ä¸‹å‘½ä»¤ç”¨äºç»Ÿè®¡ç¨‹åºçš„ CPU å‘¨æœŸæ•°ï¼š\nperf stat ./test è¾“å‡ºç»“æœç±»ä¼¼äºï¼š\nPerformance counter stats for \u0026#39;./test\u0026#39;: 19,23 msec task-clock:u # 0.988 CPUs utilized 0 context-switches:u # 0.000 K/sec 0 cpu-migrations:u # 0.000 K/sec 575 page-faults:u # 0.030 M/sec 64,013,620,231 cycles:u # 3.324 GHz (49.80%) 40,010,335,480 instructions:u # 0.62 insn per cycle (62.34%) 9,998,469,566 branches:u # 518.693 M/sec (62.27%) 763,176 branch-misses:u # 0.01% of all branches (62.32%) 0.019438122 seconds time elapsed 0.019411000 seconds user 0.000007000 seconds sys è¾“å‡ºç»“æœä¸­çš„ cycles è¡¨ç¤º CPU å‘¨æœŸæ•°ï¼Œinstructions è¡¨ç¤ºæŒ‡ä»¤æ•°ï¼Œbranches è¡¨ç¤ºåˆ†æ”¯æŒ‡ä»¤æ•°ã€‚å…¶ä¸­ï¼Œcycles å’Œ instructions çš„æ¯”ä¾‹ä»£è¡¨äº† CPU çš„æ•ˆç‡ï¼Œå³ IPCï¼ˆInstructions Per Cycleï¼‰ã€‚\nç»Ÿè®¡å‡½æ•°è°ƒç”¨æ¬¡æ•° ä»¥ä¸‹å‘½ä»¤ç”¨äºç»Ÿè®¡ç¨‹åºä¸­å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°ï¼š\nperf record -e cycles -g ./test è¿™ä¸ªå‘½ä»¤å°†å¯åŠ¨ perf å·¥å…·ï¼Œå¹¶ä½¿ç”¨ -g é€‰é¡¹è®°å½•è°ƒç”¨å…³ç³»å›¾ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ sudo æƒé™è¿è¡Œè¯¥å‘½ä»¤ï¼Œä»¥ä¾¿ perf å·¥å…·å¯ä»¥è®¿é—®ç³»ç»Ÿçš„ç¡¬ä»¶è®¡æ•°å™¨ã€‚\næˆä¸ºä¸“ä¸šç å†œ è¦ç†Ÿæ‚‰é¡¹ç›®äº† -\u0026gt; STFW/RTFM/RTFSC, å°è¯•ç†è§£ä¸€åˆ‡ç»†èŠ‚ è¦å†™ä»£ç äº† ä»”ç»† RTFM, æ­£ç¡®ç†è§£éœ€æ±‚ ç¼–å†™å¯è¯»ï¼Œå¯ç»´æŠ¤ï¼Œæ˜“éªŒè¯çš„ä»£ç  (ä¸è¨€è‡ªæ˜ï¼Œä¸è¨€è‡ªè¯) ç”¨ lint å·¥å…·æ£€æŸ¥ä»£ç  è¿›è¡Œå……åˆ†çš„æµ‹è¯• æ·»åŠ å……åˆ†çš„æ–­è¨€ è¦è°ƒè¯•äº† é»˜å¿µâ€œæœºå™¨æ°¸è¿œæ˜¯å¯¹çš„/æœªæµ‹è¯•ä»£ç æ°¸è¿œæ˜¯é”™çš„â€ sanitizer, trace, printf, gdb, â€¦ å¹³æ—¶ -\u0026gt; ç”¨æ­£ç¡®çš„å·¥å…·/æ–¹æ³•åšäº‹æƒ… æ„Ÿåˆ°ä¸çˆ½äº† -\u0026gt; æ‰¾æ­£ç¡®çš„å·¥å…·/æ­åŸºç¡€è®¾æ–½ æ€»çº¿é€‰è®² å®šä¹‰ å¹¿ä¹‰ä¸Šè®²æ€»çº¿å°±æ˜¯ä¸€ä¸ªé€šä¿¡ç³»ç»Ÿï¼Œä»¥ä¸‹è¿™äº›éƒ½å±äºå¹¿ä¹‰çš„æ€»çº¿æ¦‚å¿µ:TCP/IP, ä»¥å¤ªç½‘ï¼Œç½‘çº¿ï¼ŒRTL ä¿¡å·ï¼Œç³»ç»Ÿè°ƒç”¨ã€‚\nä¸»åŠ¨å‘èµ·é€šä¿¡çš„å« masterï¼Œå“åº”é€šä¿¡çš„å« slaveã€‚\n","permalink":"https://lifeislife.cn/posts/%E4%B8%80%E7%94%9F%E4%B8%80%E8%8A%AF%E7%AC%94%E8%AE%B0/","summary":"\u003ch1 id=\"ä¸€ç”Ÿä¸€èŠ¯æ¦‚è¿°\"\u003eä¸€ç”Ÿä¸€èŠ¯æ¦‚è¿°\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://www.bilibili.com/video/BV12e4y1Y76i/?spm_id_from=333.788\u0026amp;vd_source=7ff88341de4b5111bdf3db48b4e9ca44\"\u003eâ€œä¸€ç”Ÿä¸€èŠ¯â€æ¦‚è¿° _å“”å“©å“”å“©_bilibili\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"ç¨‹åºçš„æ‰§è¡Œå’Œæ¨¡æ‹Ÿå™¨\"\u003eç¨‹åºçš„æ‰§è¡Œå’Œæ¨¡æ‹Ÿå™¨\u003c/h1\u003e\n\u003ch2 id=\"freestanding-è¿è¡Œæ—¶ç¯å¢ƒ\"\u003efreestanding è¿è¡Œæ—¶ç¯å¢ƒ\u003c/h2\u003e\n\u003ch3 id=\"ç¨‹åºå¦‚ä½•ç»“æŸè¿è¡Œ\"\u003eç¨‹åºå¦‚ä½•ç»“æŸè¿è¡Œ\u003c/h3\u003e\n\u003cp\u003eåœ¨æ­£å¸¸çš„ç¯å¢ƒä¸­ï¼Œå†™äº†ä¸€æ®µä»£ç \u003ccode\u003ereturn\u003c/code\u003eä¹‹åï¼Œå®é™…ä¸Šè°ƒç”¨äº†ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨\u003ccode\u003eexit\u003c/code\u003eã€‚ä½†æ˜¯åœ¨ freestanding ç¯å¢ƒä¸­ï¼Œæ²¡æœ‰æ“ä½œç³»ç»Ÿæ”¯æŒï¼Œæ ¹æ® C99 æ‰‹å†Œè§„å®šï¼Œåœ¨ freestanding ç¯å¢ƒä¸­ç»“æŸè¿è¡Œæ˜¯ç”±ç”¨æˆ·å®ç°å†³å®šçš„ã€‚\u003c/p\u003e","title":"ä¸€ç”Ÿä¸€èŠ¯ç¬”è®°"},{"content":"åŸºç¡€è®¾æ–½ æœ¬ç« è®°å½•ä¸€äº›é…ç½®ç¬”è®°ï¼Œä¸æ˜¯ step by step æ•™ç¨‹\nå®‰è£… JAVA # å…ç™»é™†ä¸‹è½½java https://xiandan.io/posts/jdk-download.html # é«˜é€Ÿé•œåƒ https://github.com/LilithBristol/javajdkforwinx64 Linux ç¯å¢ƒå˜é‡ PATH\n%JAVA_HOME%\\bin %JAVA_HOME%\\jre\\bin Windows ç¯å¢ƒå˜é‡\n# JAVA_HOME C:\\Program Files\\Java\\jdk1.8.0_212 # CLASSPATH .;%JAVA_HOME%\\bin;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar VSCode å¼€å‘ç¯å¢ƒ åŸºç¡€æ’ä»¶ å®‰è£… Extension Pack for Java å³å¯ï¼Œä¼šæŠŠç”¨åˆ°çš„å¼€å‘æ’ä»¶éƒ½å®‰è£…ã€‚ä¸éœ€è¦å®‰è£… Java Language Support ä¼šå’Œ Extension Pack for Java ä¸­çš„ Language Support for Java by Red Hat å†²çªã€‚ç›®å‰ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿæ²¡æœ‰é‡åˆ°å¿…é¡»ä½¿ç”¨ Java Language Support çš„æƒ…å†µã€‚\nåŸºæœ¬ä½¿ç”¨ ä½¿ç”¨ CTRL+SHIFT+P è¾“å…¥ Java: create Projectï¼Œè¾“å…¥é¡¹ç›®åï¼Œåœ¨ src æ–‡ä»¶å¤¹ä¸­ï¼Œé€‰æ‹© Run è¿è¡Œ Java ä»£ç ã€‚\nå¸¸ç”¨å¿«æ·é”® # å¯¼åŒ… shift + alt + o IDEA å¼€å‘ç¯å¢ƒ ä¸‹è½½å®‰è£… IDEA Java é›†æˆå¼€å‘ç¯å¢ƒ IntelliJ IDEA 2022.3 Ultimate æ°¸ä¹…æ¿€æ´»ç‰ˆ - é£è½¯èµ„æºç«™\né…ç½® MAVEN,IDEA ä¸­ä¸‹è½½é€Ÿåº¦æ…¢ # IDEAä¸­ç¼–è¾‘åŒºå³é”®--maven--create xml \u0026lt;mirrors\u0026gt; \u0026lt;mirror\u0026gt; \u0026lt;id\u0026gt;alimaven\u0026lt;/id\u0026gt; \u0026lt;name\u0026gt;aliyun maven\u0026lt;/name\u0026gt; \u0026lt;url\u0026gt;http://maven.aliyun.com/nexus/content/groups/public/\u0026lt;/url\u0026gt; \u0026lt;mirrorOf\u0026gt;central\u0026lt;/mirrorOf\u0026gt; \u0026lt;/mirror\u0026gt; \u0026lt;mirror\u0026gt; \u0026lt;id\u0026gt;uk\u0026lt;/id\u0026gt; \u0026lt;mirrorOf\u0026gt;central\u0026lt;/mirrorOf\u0026gt; \u0026lt;name\u0026gt;Human Readable Name for this Mirror.\u0026lt;/name\u0026gt; \u0026lt;url\u0026gt;http://uk.maven.org/maven2/\u0026lt;/url\u0026gt; \u0026lt;/mirror\u0026gt; \u0026lt;mirror\u0026gt; \u0026lt;id\u0026gt;CN\u0026lt;/id\u0026gt; \u0026lt;name\u0026gt;OSChina Central\u0026lt;/name\u0026gt; \u0026lt;url\u0026gt;http://maven.oschina.net/content/groups/public/\u0026lt;/url\u0026gt; \u0026lt;mirrorOf\u0026gt;central\u0026lt;/mirrorOf\u0026gt; \u0026lt;/mirror\u0026gt; \u0026lt;mirror\u0026gt; \u0026lt;id\u0026gt;nexus\u0026lt;/id\u0026gt; \u0026lt;name\u0026gt;internal nexus repository\u0026lt;/name\u0026gt; \u0026lt;url\u0026gt;http://repo.maven.apache.org/maven2\u0026lt;/url\u0026gt; \u0026lt;mirrorOf\u0026gt;central\u0026lt;/mirrorOf\u0026gt; \u0026lt;/mirror\u0026gt; \u0026lt;/mirrors\u0026gt; å®‰è£… MYSQL sudo apt install mysql sudo mysql -u root -p source /home/user/oa_system/VBlog/blogserver/src/main/resources/vueblog.sql å¸¸ç”¨å‘½ä»¤ # åˆ›å»ºæ•°æ®åº“ CREATE DATABASE ryvue; # åˆ‡æ¢å½“å‰æ•°æ®åº“ use ryvue; set character set utf8; # æ‰§è¡Œsqlè„šæœ¬ source /home/user/oa_system/RuoYi-Vue/sql/ry_20220822.sql source /home/user/oa_system/RuoYi-Vue/sql/quartz.sql # åˆ é™¤æ•°æ®åº“ drop database æ•°æ®åº“å; # æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ show databases; # åˆ›å»ºæ•°æ®åº“ create database æ•°æ®åº“å; # æ˜¾ç¤ºæ•°æ®åº“ç¼–ç æ ¼å¼ SHOW VARIABLES LIKE \u0026#39;character_set_%\u0026#39;; # åˆ é™¤ mysql å¯†ç  SET PASSWORD FOR root@localhost=PASSWORD(\u0026#39;\u0026#39;); # é‡å»ºæ•°æ®åº“ drop database ryvue; create database ryvue; use ryvue; å®‰è£…æ•°æ®åº“å¯è§†åŒ–å·¥å…· mysql-workbench echo \u0026#34;deb http://security.ubuntu.com/ubuntu focal-security main\u0026#34; | sudo tee /etc/apt/sources.list.d/focal-security.list sudo apt-get update sudo apt-get install libssl1.1 wget https://downloads.mysql.com/archives/get/p/8/file/mysql-workbench-community_8.0.12-1ubuntu18.04_amd64.deb sudo dpkg -i mysql*.deb sudo apt-get install -f sudo dpkg -i mysql*.deb VSCode æ’ä»¶-MySQL by weijan Chen vscode-database-client å®˜æ–¹æ–‡æ¡£\n\u003c!DOCTYPE html\u003e Responsive Image å®‰è£… NPM sudo apt install npm -y npm set progress=false npm config set registry http://registry.npmjs.org/ npm install --legacy-peer-deps reify:abbrev: sill audit bulk request åˆ é™¤ package-lock.json æ–‡ä»¶ å®‰è£… nvm æ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä»¥åœ¨ Ubuntu ä¸Šä¸‹è½½ nvmï¼š\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash è¯¥å‘½ä»¤å°†ä» nvm GitHub å­˜å‚¨åº“ä¸‹è½½å®‰è£…è„šæœ¬ï¼Œå¹¶ä½¿ç”¨ bash åœ¨æ‚¨çš„ Ubuntu ç³»ç»Ÿä¸Šè¿è¡Œå®ƒã€‚è¿è¡Œæ­¤å‘½ä»¤åï¼Œnvm å°†è¢«å®‰è£…åœ¨æ‚¨çš„å®¶ç›®å½•ä¸­ã€‚\nå®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä»¥ä½¿ nvm ç”Ÿæ•ˆï¼š\nsource ~/.bashrc ç¡®è®¤ nvm æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š\nnvm --version å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å°†çœ‹åˆ° nvm çš„ç‰ˆæœ¬å·ã€‚\nå®‰è£… node.js å’Œ npm ä½¿ç”¨ nvm å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ Node.jsï¼š\nnvm install \u0026lt;node-version\u0026gt; ä¾‹å¦‚ï¼š\nnvm install 14.17.6 è¿™å°†å®‰è£… Node.js ç‰ˆæœ¬ 14.17.6ã€‚\nå®‰è£…å®Œæˆåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å·²å®‰è£…çš„ Node.js ç‰ˆæœ¬è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬ï¼š\nnvm alias default \u0026lt;node-version\u0026gt; ä¾‹å¦‚ï¼š\nnvm alias default 14.17.6 è¿™å°†è®¾ç½® Node.js ç‰ˆæœ¬ 14.17.6 ä¸ºé»˜è®¤ç‰ˆæœ¬ã€‚\nç¡®è®¤ Node.js å’Œ npm æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š\nnode -v npm -v å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å°†çœ‹åˆ° Node.js å’Œ npm çš„ç‰ˆæœ¬å·ã€‚\nä½¿ç”¨ nvm åˆ‡æ¢ Node.js ç‰ˆæœ¬ï¼š\nä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯ç”¨çš„ Node.js ç‰ˆæœ¬ï¼š\nnvm ls-remote è¯¥å‘½ä»¤å°†æ˜¾ç¤ºå¯ç”¨çš„ Node.js ç‰ˆæœ¬åˆ—è¡¨ã€‚\nä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ Node.jsï¼š\nnvm install \u0026lt;node-version\u0026gt; ä¾‹å¦‚ï¼š\nnvm install 12.22.6 è¿™å°†å®‰è£… Node.js ç‰ˆæœ¬ 12.22.6ã€‚\nä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ‡æ¢åˆ°ç‰¹å®šç‰ˆæœ¬çš„ Node.jsï¼š\nnvm use \u0026lt;node-version\u0026gt; ä¾‹å¦‚ï¼š\nnvm use 12.22.6 è¿™å°†åˆ‡æ¢åˆ° Node.js ç‰ˆæœ¬ 12.22.6ã€‚\nç¡®è®¤å½“å‰ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬ï¼š\nnode -v å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å°†çœ‹åˆ°å½“å‰ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬å·ã€‚\nERROR åˆé›† Java Error: Could not find or load main class org.apache.maven.wrapper.MavenWrapperMain maven ç›¸å…³ä¾èµ–è¿˜æ²¡ä¸‹è½½å®Œ JSON parse error: Cannot construct instance of ç¡®è®¤è¯·æ±‚æ–¹å¼æ˜¯ get è¿˜æ˜¯ postï¼Œå¦‚æœæ˜¯ post æ˜¯ä¸æ˜¯å‰ç«¯å‘äº†ä¸€ä¸ªç©ºä¸²ã€‚ç©ºä¸²è¦ç”¨{}åŒ…è£¹\nError: JAVA_HOME is not defined correctly # ç¼ºå°‘.mavenrc é…ç½®æ–‡ä»¶ vim ~/.mavenrc # å°† JAVA é…ç½®æ”¾è¿›å» export JAVA_HOME=/usr/lib/jvm/jdk1dot8 é…ç½®æ•°æ®è¡¨ä¸­ä¸å­˜åœ¨çš„å­—æ®µ @TableField(exist = false) Error creating bean with name \u0026lsquo;minioController\u0026rsquo; endpoint must not be null æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦é…ç½®äº† endpoint\nè§£å†³ MyBatis æŠ¥é”™ org.apache.ibatis.binding.BindingException: Invalid bound statement (not found) 1ã€æ£€æŸ¥ xml æ–‡ä»¶çš„ namespace æ˜¯å¦å¯¹åº”æ¥å£ï¼Œè¦æ˜¯å…¨è·¯å¾„ã€‚\n2ã€xml ä¸­çš„å‡½æ•° id å’Œæ¥å£ä¸­çš„å‡½æ•°åæ˜¯å¦å¯¹å¾—ä¸Šï¼Œå‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹æ˜¯å¦å¯¹å¾—ä¸Š\n3ã€å»çœ‹è¾“å‡ºç›®å½•ä¸­æœ‰æ²¡æœ‰ xml æ˜ å°„æ–‡ä»¶ï¼Œmaven é¡¹ç›®é»˜è®¤æŠŠèµ„æºæ–‡ä»¶æ”¾åœ¨ src/main/resources ä¸‹ï¼Œé»˜è®¤åªè¯†åˆ« src/main/resources ä¸‹çš„èµ„æºæ–‡ä»¶ã€‚\nUnable to obtain LocalDateTime from TemporalAccessor You can\u0026rsquo;t parse a date string into LocalDateTime without a time.\nLocalDateTime.parse(\u0026ldquo;2019-10-25\u0026rdquo;, DateTimeFormatter.ofPattern(\u0026ldquo;yyyy-MM-dd\u0026rdquo;))\nYou should parse the string into LocalDate and call LocalDate.atStartOfDay() to return LocalDateTime with time 00:00:00.\nLocalDate.parse(\u0026ldquo;2019-10-25\u0026rdquo;, DateTimeFormatter.ofPattern(\u0026ldquo;yyyy-MM-dd\u0026rdquo;)).atStartOfDay()\n// ä¼ å…¥çš„æ—¶é—´æ ¼å¼è¦å’Œè§£æçš„æ—¶é—´æ ¼å¼ä¿æŒä¸€è‡´ï¼Œå¦‚ä»¥ä¸‹è§£ææ–¹å¼ï¼Œä¼ å…¥å‚æ•° 2023-03-08 11:11:11 LocalDateTime startDateTime = LocalDateTime.parse(startTime, DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;)); LocalDateTime endDateTime = LocalDateTime.parse(endTime, DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;)); DateTimeFormatter localDateFmt = DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd\u0026#34;); DateTimeFormatter localDateFmt = DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd\u0026#34;); if (!\u0026#34;\u0026#34;.equals(startTime) \u0026amp;\u0026amp; !\u0026#34;\u0026#34;.equals(endTime)) { LocalDate startDate = LocalDate.parse(startTime, localDateFmt); LocalDate endDate = LocalDate.parse(endTime, localDateFmt); LocalDateTime startDateTime = LocalDateTime.of(startDate, LocalTime.MIN); LocalDateTime endDateTime = LocalDateTime.of(endDate, LocalTime.MAX); log.debug(\u0026#34;startDateTime: \u0026#34; + startDateTime); log.debug(\u0026#34;endDateTime: \u0026#34; + endDateTime); queryWrapper.between(\u0026#34;create_time\u0026#34;, startDateTime, endDateTime); } mybatisplus æäº¤æ•°æ®åæ— æ³•ç«‹å³è¢«æŸ¥è¯¢åˆ° æå‡äº‹åŠ¡éš”ç¦»çº§åˆ« @Transactional(isolation = Isolation.READ_UNCOMMITTED) One record is expected, but the query result is multiple records è§£å†³æ–¹æ¡ˆï¼šå¦‚æœæƒ³å–ä¸€æ¡å¹¶ä¸æƒ³æŠ¥é”™æ—¶ä½¿ç”¨ getOne(queryWrapper,false) æ³¨æ„ mybatisplus çš„ sql è¿”å›å€¼ java.lang.NumberFormatException: null æ£€æŸ¥ä½¿ç”¨ Integer.parseInt è½¬æ¢æ—¶ï¼Œæ˜¯å¦è½¬æ¢çš„æ•°å¯èƒ½ä¸º null\nUnexpected error occurred in scheduled taskjava.lang.NullPointerException: null æœåŠ¡ç±»æ²¡æœ‰æ­£ç¡®æ³¨å…¥ï¼Œæ¯ä¸€ä¸ªéœ€è¦æ³¨å…¥ç±»éƒ½éœ€è¦æ·»åŠ  Autowire æ³¨è§£\nUnhandled exception type åŸå› ï¼šè¢«å¼ºåˆ¶å¼‚å¸¸å¤„ç†çš„ä»£ç å—ï¼Œå¿…é¡»è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæç¤ºâ€œUnhandled exception type Exceptionâ€é”™è¯¯è­¦å‘Šã€‚\néœ€è¦å°†ä»£ç å†™åˆ° try catch é‡Œï¼\nMySQL æ•°æ®åº“ä¹±ç ï¼Œå‰ç«¯ä¹±ç  sudo vim /etc/mysql/my.cnf # å¡«å†™å¦‚ä¸‹é…ç½® [client] default-character-set=utf8mb4 [mysqld] character-set-server = utf8mb4 collation-server = utf8mb4_unicode_ci init_connect=\u0026#39;SET NAMES utf8mb4\u0026#39; skip-character-set-client-handshake = true [mysql] default-character-set = utf8mb4 nested exception is java.lang.NullPointerException] with root cause \u003c!DOCTYPE html\u003e Responsive Image Error attempting to get column \u0026lsquo;motion_id\u0026rsquo; from result set æ•°æ®åº“å­—æ®µç±»å‹ä¸åç«¯ç±»å‹ä¸ä¸€è‡´\nå‰ç«¯ digital envelope routines::unsupported export NODE_OPTIONS=--openssl-legacy-provider ç¦æ­¢è·¨åŸŸç­–ç•¥ (CORS policy) node: \u0026ndash;openssl-legacy-provider is not allowed in NODE_OPTIONS unset NODE_OPTIONS Unexpected character (\u0026rsquo;}\u0026rsquo; è¯·æ±‚çš„æ—¶å€™æœ€åä¸€ä¸ªå­—æ®µåé¢ä¸è¦åŠ é€—å·\nThe value of the \u0026lsquo;Access-Control-Allow-Origin\u0026rsquo; header in the response must not be the wildcard \u0026lsquo;*\u0026rsquo; when the request\u0026rsquo;s credentials mode is \u0026lsquo;include\u0026rsquo;. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute è¿™ä¸ªé”™è¯¯é€šå¸¸æ˜¯å› ä¸ºåœ¨ä½¿ç”¨ XMLHttpRequest å¯¹è±¡è¿›è¡Œè·¨åŸŸè¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”å¤´ä¸­çš„ Access-Control-Allow-Origin çš„å€¼ä¸º*ï¼Œä½†è¯·æ±‚çš„ withCredentials å±æ€§è¢«è®¾ç½®ä¸º trueï¼Œè¿™ä¸¤è€…ä¹‹é—´æ˜¯ç›¸äº’å†²çªçš„ã€‚\nXMLHttpRequest å¯¹è±¡å…·æœ‰ withCredentials å±æ€§ï¼Œå¦‚æœè®¾ç½®ä¸º trueï¼Œå®ƒå°†åœ¨è¯·æ±‚ä¸­åŒ…æ‹¬æ¥è‡ªå…¶ä»–åŸŸçš„ cookie ç­‰å‡­æ®ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨åœ¨å“åº”å¤´ä¸­å°† Access-Control-Allow-Origin è®¾ç½®ä¸º*ï¼Œæµè§ˆå™¨ä¼šç¦æ­¢è®¿é—®è¿™äº›å‡­æ®ä¿¡æ¯ã€‚è¿™æ˜¯ä¸€é¡¹å®‰å…¨ä¿æŠ¤æªæ–½ï¼Œé˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚\nè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œå°† Access-Control-Allow-Origin è®¾ç½®ä¸ºè¯·æ±‚æ¥æºçš„åŸŸåï¼Œè€Œä¸æ˜¯ä½¿ç”¨é€šé…ç¬¦*ã€‚è¿™å¯ä»¥è®©æµè§ˆå™¨å®‰å…¨åœ°å‘é€å‡­æ®ä¿¡æ¯ã€‚\nåœ¨å‰ç«¯ï¼Œéœ€è¦å°† withCredentials å±æ€§è®¾ç½®ä¸º trueï¼Œä»¥ä¾¿åœ¨è¯·æ±‚ä¸­åŒ…å«å‡­æ®ä¿¡æ¯ã€‚åŒæ—¶ï¼Œéœ€è¦ç¡®ä¿è¯·æ±‚çš„æ¥æºåŸŸåä¸æœåŠ¡å™¨ç«¯è®¾ç½®çš„ Access-Control-Allow-Origin ä¸€è‡´ã€‚\nå¦‚æœä½ æ— æ³•æ›´æ”¹æœåŠ¡å™¨ç«¯çš„è®¾ç½®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ä»£ç†æˆ–è€… JSONP ç­‰è·¨åŸŸè§£å†³æ–¹æ¡ˆã€‚\n\u003c!DOCTYPE html\u003e Responsive Image VUE é¡¹ç›®ç«¯å£ä¸å›ºå®š Application run failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name \u0026lsquo;communityInfoController\u0026rsquo; æ£€æŸ¥target/classes/mapper/DepartmentMapper.xmlä¸­çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæ£€æŸ¥å¼•å·æ˜¯å¦å¤šäº†ï¼Œå°‘äº†\n\u0026lt;select id=\u0026#34;findIdByOrgId\u0026#34; resultType=\u0026#34;resultType=\u0026#34;java.lang.Integer\u0026#34;\u0026gt; SELECT CAST(id AS UNSIGNED) AS id FROM department WHERE organization_id = #{orgId} \u0026lt;/select\u0026gt; é”™è¯¯ç  400-å‰åç«¯å‚æ•°å¯¹ä¸ä¸Š {POST/GET} there is already xx bean method \u003c!DOCTYPE html\u003e Responsive Image NPM å¯åŠ¨:digital envelope routines::unsupported export NODE_OPTIONS=--openssl-legacy-provider npm run serve The field file exceeds its maximum permitted size of 1048576 bytes spring boot ä¸Šä¼ æ–‡ä»¶æ—¶æ¥å£æŠ¥é”™ The field file exceeds its maximum permitted size of 1048576 bytes.ç»æ’æŸ¥å®˜æ–¹è®¾ç½®æ¯ä¸ªæ–‡ä»¶çš„é…ç½®æœ€å¤§ä¸º 1Mbï¼Œå•æ¬¡è¯·æ±‚çš„æ–‡ä»¶çš„æ€»æ•°ä¸èƒ½å¤§äº 10Mbï¼Œä¸Šä¼ å¤§äº 1Mb çš„æ–‡ä»¶éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆapplication.propertiesï¼‰ 1.Spring Boot 1.3.x æˆ–è€…ä¹‹å‰\nmultipart.maxFileSize=100Mb multipart.maxRequestSize=1000Mb 2.Spring Boot 1.4.x ä»¥å\nspring.http.multipart.maxFileSize=100Mb spring.http.multipart.maxRequestSize=1000Mb 3.Spring Boot 2.0 ä¹‹å\nspring.servlet.multipart.max-file-size=100MB spring.servlet.multipart.max-request-size=1000MB å­—æ®µä¸å­˜åœ¨ è¯·æ±‚çš„æ—¶å€™å­—æ®µåå­—å’Œ java ä¸­å‘½åä¿æŒä¸€ç›´ï¼Œè€Œä¸æ˜¯å’Œæ•°æ®åº“åå­—ä¿æŒä¸€æ ·\næ•°æ®åº“ communications link failure é…ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ src/utils/request.js\n\u003c!DOCTYPE html\u003e Responsive Image Request method GET not supported å‰ç«¯è¯·æ±‚äº‹ä»¶æ²¡æœ‰è®¾ç½®è¯·æ±‚æ–¹å¼ post è¿˜æ˜¯ get\n\u003c!DOCTYPE html\u003e Responsive Image Invalid cros request è·¨åŸŸ\nå¤„ç†æœªæ¥æ•°æ® https://www.bilibili.com/video/BV1U44y1W77D?t=1655.5\u0026amp;p=23\nTIPS å‰ç«¯ä¿å­˜ä»£ç éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ç”Ÿæ•ˆ è·å–ç”¨æˆ· IP String userIp = request.getRemoteAddr(); è§£å†³æ–¹æ¡ˆï¼šJava å®ä½“ç±»å­—æ®µ ä¸è¿”å›ç»™å‰ç«¯ @JsonIgnore @ApiModelProperty(value = \u0026#34;ä¸é‡è¦\u0026#34;) @TableField(exist = false) private String unimportant; Dateutil åŒ… import java.text.SimpleDateFormat; import java.util.Calendar; import java.util.Date; è·å–è¯·æ±‚å‚æ•° public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception { //è·å–è¯·æ±‚å‚æ•° String queryString = request.getQueryString(); log.info(\u0026#34;è¯·æ±‚å‚æ•°:{}\u0026#34;, queryString); } åç«¯è®¾ç½® header å‰ç«¯è·å–ä¸åˆ° # å¿…é¡»è¦åŠ è¿™æ¡å­—æ®µæ§åˆ¶èƒ½å¤Ÿè·å–çš„ header response.addHeader(\u0026#34;Access-Control-Expose-Headers\u0026#34;,\u0026#34;test\u0026#34;); response.addHeader(\u0026#34;test\u0026#34;, \u0026#34;sdfdsfdsf\u0026#34;); axios è¯·æ±‚ axios.get(\u0026#39;http://opm.eswincomputing.com:9090/user/page\u0026#39;) .then(function (response) { console.log(response.headers); }) .catch(function (error) { console.log(error.headers); }); æŸ¥è¯¢ç«¯å£å ç”¨ lsof -i lsof -i:8080ï¼šæŸ¥çœ‹ 8080 ç«¯å£å ç”¨ æ‰“å°è¾“å‡º # Application.yml logging: level: com.eswincomputing.springboot: debug # ä½¿ç”¨ @Slf4j @RestController @RequestMapping(\u0026#34;/patch-record\u0026#34;) public class PatchRecordController { @Resource private IPatchRecordService patchRecordServic log.info(version); } æ ¡éªŒå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º StrUtil.isBlank() æŸ¥è¯¢ä¸»é”® SELECT id FROM department WHERE organization_id = #{orgId} å­—ç¬¦æ•´å‹äº’è½¬ Integer.parseInt(user.getDelFlag()) è§£æ json å­—ç¬¦ä¸² \u0026lt;!-- json è§£æ --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;fastjson\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.21\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; JSONObject object = JSONObject.parseObject(patchRecord.getAttachmentList()); String fileUID = object.getString(\u0026#34;file_uid\u0026#34;); String fileName = object.getString(\u0026#34;file_name\u0026#34;); é€—å·åˆ†å‰²å­—ç¬¦ä¸² String string = \u0026#34;å¼ ä¸‰ï¼Œæå››ï¼Œç‹äº”ï¼Œé©¬å…­ï¼Œå°æ°”\u0026#34;; String substring = string.substring(0, string.length() - 1); System.out.println(substring); String[] split = substring.split(\u0026#34;,\u0026#34;);//ä»¥é€—å·åˆ†å‰² for (String string2 : split) { System.out.println(\u0026#34;æ•°æ®--\u0026gt;\u0026gt;\u0026gt;\u0026#34; + string2); } ","permalink":"https://lifeislife.cn/posts/java%E5%B0%8F%E7%99%BD%E7%AC%94%E8%AE%B0/","summary":"\u003ch1 id=\"åŸºç¡€è®¾æ–½\"\u003eåŸºç¡€è®¾æ–½\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæœ¬ç« è®°å½•ä¸€äº›é…ç½®ç¬”è®°ï¼Œä¸æ˜¯ step by step æ•™ç¨‹\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"å®‰è£…-java\"\u003eå®‰è£… JAVA\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å…ç™»é™†ä¸‹è½½java\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ehttps://xiandan.io/posts/jdk-download.html\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# é«˜é€Ÿé•œåƒ\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ehttps://github.com/LilithBristol/javajdkforwinx64\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eLinux ç¯å¢ƒå˜é‡ PATH\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e%JAVA_HOME%\u003cspan class=\"se\"\u003e\\b\u003c/span\u003ein\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e%JAVA_HOME%\u003cspan class=\"se\"\u003e\\j\u003c/span\u003ere\u003cspan class=\"se\"\u003e\\b\u003c/span\u003ein\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eWindows ç¯å¢ƒå˜é‡\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# JAVA_HOME\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eC:\u003cspan class=\"se\"\u003e\\P\u003c/span\u003erogram Files\u003cspan class=\"se\"\u003e\\J\u003c/span\u003eava\u003cspan class=\"se\"\u003e\\j\u003c/span\u003edk1.8.0_212\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# CLASSPATH\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e.\u003cspan class=\"p\"\u003e;\u003c/span\u003e%JAVA_HOME%\u003cspan class=\"se\"\u003e\\b\u003c/span\u003ein\u003cspan class=\"p\"\u003e;\u003c/span\u003e%JAVA_HOME%\u003cspan class=\"se\"\u003e\\l\u003c/span\u003eib\u003cspan class=\"se\"\u003e\\d\u003c/span\u003et.jar\u003cspan class=\"p\"\u003e;\u003c/span\u003e%JAVA_HOME%\u003cspan class=\"se\"\u003e\\l\u003c/span\u003eib\u003cspan class=\"se\"\u003e\\t\u003c/span\u003eools.jar\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"vscode-å¼€å‘ç¯å¢ƒ\"\u003eVSCode å¼€å‘ç¯å¢ƒ\u003c/h2\u003e\n\u003ch3 id=\"åŸºç¡€æ’ä»¶\"\u003eåŸºç¡€æ’ä»¶\u003c/h3\u003e\n\u003cp\u003eå®‰è£… \u003ccode\u003eExtension Pack for Java\u003c/code\u003e å³å¯ï¼Œä¼šæŠŠç”¨åˆ°çš„å¼€å‘æ’ä»¶éƒ½å®‰è£…ã€‚ä¸éœ€è¦å®‰è£… Java Language Support ä¼šå’Œ Extension Pack for Java ä¸­çš„ Language Support for Java by Red Hat å†²çªã€‚ç›®å‰ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿæ²¡æœ‰é‡åˆ°å¿…é¡»ä½¿ç”¨ Java Language Support çš„æƒ…å†µã€‚\u003c/p\u003e","title":"JAVA å°ç™½ç¬”è®°"},{"content":"GitLab CI/CD æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿå®ç°è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ GitLab CI/CD çš„ Pipeline åŠŸèƒ½ï¼Œä»¥å®ç°å°† Markdown æ–‡ä»¶è‡ªåŠ¨ç¼–è¯‘ä¸º PDF å¹¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢çš„åŠŸèƒ½ã€‚\nå‡†å¤‡å·¥ä½œ åœ¨å¼€å§‹ä½¿ç”¨ GitLab CI/CD çš„ Pipeline åŠŸèƒ½ä¹‹å‰ï¼Œéœ€è¦è¿›è¡Œä¸€äº›å‡†å¤‡å·¥ä½œã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\nåˆ›å»º GitLab é¡¹ç›®ï¼šåœ¨ GitLab ä¸Šåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¹¶å°† Markdown æ–‡ä»¶ä¸Šä¼ è‡³é¡¹ç›®çš„æŸä¸ªç›®å½•ä¸‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°† Markdown æ–‡ä»¶ä¸Šä¼ è‡³é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå¹¶å‘½åä¸º example.mdã€‚ å®‰è£… Pandocï¼šPandoc æ˜¯ä¸€ä¸ªç”¨äºæ–‡æ¡£è½¬æ¢çš„å·¥å…·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒå°† Markdown æ–‡ä»¶è½¬æ¢ä¸º PDFã€‚åœ¨å®‰è£… Pandoc ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£… LaTeXï¼Œå› ä¸º Pandoc ä½¿ç”¨ LaTeX è¿›è¡Œ PDF æ¸²æŸ“ã€‚å…·ä½“å®‰è£…æ­¥éª¤è¯·å‚è€ƒ Pandoc å’Œ LaTeX çš„å®˜æ–¹æ–‡æ¡£ã€‚\nåˆ›å»º Releaseï¼šåœ¨ GitLab ä¸Šåˆ›å»ºä¸€ä¸ª Releaseï¼Œç”¨äºå­˜å‚¨ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶ã€‚å…·ä½“æ“ä½œæ–¹æ³•è¯·å‚è€ƒ GitLab çš„å®˜æ–¹æ–‡æ¡£ã€‚\nåˆ›å»º CI/CD é…ç½®æ–‡ä»¶ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.gitlab-ci.yml æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰ Pipeline çš„æµç¨‹ã€‚\nç¼–å†™ CI/CD é…ç½®æ–‡ä»¶ ä¸‹é¢æ˜¯ä¸€ä¸ªæ ·ä¾‹çš„.gitlab-ci.yml æ–‡ä»¶ï¼Œç”¨äºå®ç°å°† Markdown æ–‡ä»¶ç¼–è¯‘ä¸º PDF å¹¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢çš„åŠŸèƒ½ã€‚\nimage: pandoc/core:latest stages: - build pdf: stage: build script: - pandoc example.md -o example.pdf - curl --header \u0026#34;PRIVATE-TOKEN: ${CI_PRIVATE_TOKEN}\u0026#34; --upload-file example.pdf \u0026#34;${CI_API_V4_URL}/projects/${CI_PROJECT_ID}/uploads\u0026#34; artifacts: paths: - example.pdf ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† pandoc/core:latest ä½œä¸º Docker é•œåƒï¼Œè¯¥é•œåƒå·²ç»é¢„å®‰è£…äº† Pandoc å·¥å…·ã€‚\nè¯¥æ–‡ä»¶ä¸­åŒ…å«äº†ä¸€ä¸ª build é˜¶æ®µï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ª pdf ä»»åŠ¡ã€‚åœ¨ pdf ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Pandoc å·¥å…·å°† Markdown æ–‡ä»¶è½¬æ¢ä¸º PDF æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ cURL å·¥å…·å°†ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç¯å¢ƒå˜é‡${CI_PRIVATE_TOKEN}å’Œ${CI_API_V4_URL}ï¼Œè¿™äº›å˜é‡æ˜¯ GitLab è‡ªåŠ¨æ³¨å…¥çš„ï¼Œç”¨äºè¿›è¡Œèº«ä»½éªŒè¯å’Œä¸Šä¼ æ–‡ä»¶ã€‚\næœ€åï¼Œæˆ‘ä»¬å°†ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶å®šä¹‰ä¸º Pipeline çš„ artifactsï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ–‡ä»¶èƒ½å¤Ÿè¢«ä¿ç•™å¹¶å¯ç”¨äºåç»­çš„éƒ¨ç½²ã€‚\nè¿è¡Œ Pipeline å®Œæˆ CI/CD é…ç½®æ–‡ä»¶çš„ç¼–å†™åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ GitLab ä¸Šå¯åŠ¨ Pipelineï¼Œå°† Markdown æ–‡ä»¶è‡ªåŠ¨ç¼–è¯‘ä¸º PDF å¹¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\næäº¤ä»£ç ï¼šå°†.gitlab-ci.yml æ–‡ä»¶æäº¤åˆ° GitLab\nå¯åŠ¨ Pipelineï¼šåœ¨ GitLab ä¸Šæ‰“å¼€é¡¹ç›®ï¼Œå¹¶ç‚¹å‡»â€œCI/CDâ€-\u0026gt;â€œPipelinesâ€é€‰é¡¹å¡ã€‚ç‚¹å‡»â€œRun Pipelineâ€æŒ‰é’®ï¼Œå¯åŠ¨ Pipeline æµç¨‹ã€‚\nç­‰å¾… Pipeline å®Œæˆï¼šåœ¨ Pipeline å¯åŠ¨åï¼ŒGitLab ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª Runner å¹¶åˆ†é…ä»»åŠ¡ã€‚Pipeline çš„çŠ¶æ€ä¼šåœ¨é¡µé¢ä¸Šå®æ—¶æ›´æ–°ï¼Œç›´åˆ° Pipeline æ‰§è¡Œå®Œæˆã€‚\næŸ¥çœ‹ Releaseï¼šPipeline æ‰§è¡Œå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ GitLab Release ç•Œé¢ä¸­æ‰¾åˆ°ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶ã€‚ç‚¹å‡» PDF æ–‡ä»¶é“¾æ¥ï¼Œå³å¯ä¸‹è½½å¹¶æŸ¥çœ‹ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶ã€‚\n","permalink":"https://lifeislife.cn/posts/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8gitlab-ci-pipeline/","summary":"\u003cp\u003eGitLab CI/CD æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿå®ç°è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ GitLab CI/CD çš„ Pipeline åŠŸèƒ½ï¼Œä»¥å®ç°å°† Markdown æ–‡ä»¶è‡ªåŠ¨ç¼–è¯‘ä¸º PDF å¹¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢çš„åŠŸèƒ½ã€‚\u003c/p\u003e","title":"å¦‚ä½•ä½¿ç”¨ Gitlab CI Pipeline"},{"content":"Markdown æ˜¯æ”¯æŒåµŒå…¥ HTML çš„ï¼Œå¤§éƒ¨åˆ†é˜…è¯»å™¨ä¹Ÿéƒ½æ”¯æŒè§£æã€‚Draw.io å¯ä»¥å¯¼å‡ºä¸º HTML æ ¼å¼ã€‚\næ–‡ä»¶â€”å¯¼å‡ºä¸º HTMLâ€”å¯¼å‡ºâ€”æ–°çª—å£æ‰“å¼€â€”å¤åˆ¶ HTML ä»£ç â€”åªä¿ç•™\u0026lt;body\u0026gt;æ ‡ç­¾ä¹‹é—´çš„å†…å®¹ï¼Œä¸åŒ…å«\u0026lt;body\u0026gt;å’Œ\u0026lt;/body\u0026gt;ã€‚\n","permalink":"https://lifeislife.cn/posts/markdown%E5%B5%8C%E5%85%A5draw-io/","summary":"\u003cp\u003eMarkdown æ˜¯æ”¯æŒåµŒå…¥ HTML çš„ï¼Œå¤§éƒ¨åˆ†é˜…è¯»å™¨ä¹Ÿéƒ½æ”¯æŒè§£æã€‚Draw.io å¯ä»¥å¯¼å‡ºä¸º HTML æ ¼å¼ã€‚\u003c/p\u003e\n\u003cp\u003eæ–‡ä»¶â€”å¯¼å‡ºä¸º HTMLâ€”å¯¼å‡ºâ€”æ–°çª—å£æ‰“å¼€â€”å¤åˆ¶ HTML ä»£ç â€”åªä¿ç•™\u003ccode\u003e\u0026lt;body\u0026gt;\u003c/code\u003eæ ‡ç­¾ä¹‹é—´çš„å†…å®¹ï¼Œä¸åŒ…å«\u003ccode\u003e\u0026lt;body\u0026gt;\u003c/code\u003eå’Œ\u003ccode\u003e\u0026lt;/body\u0026gt;\u003c/code\u003eã€‚\u003c/p\u003e","title":"Markdown åµŒå…¥ Draw.io"},{"content":"ä» APT å®‰è£… Install the GPG Key for https://apt.llvm.org/\nwget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add - Add the repo for Clang 11 stable-old for Ubuntu 18.04 Bionic\necho \u0026#34;deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-11 main\u0026#34; | sudo tee -a /etc/apt/sources.list sudo apt-get update Install practically everything (except python-clang-11 which for some reason doesn\u0026rsquo;t work)\nsudo apt-get install libllvm-11-ocaml-dev libllvm11 llvm-11 llvm-11-dev llvm-11-doc llvm-11-examples llvm-11-runtime \\ clang-11 clang-tools-11 clang-11-doc libclang-common-11-dev libclang-11-dev libclang1-11 clang-format-11 clangd-11 \\ libfuzzer-11-dev lldb-11 lld-11 libc++-11-dev libc++abi-11-dev libomp-11-dev -y Make Clang 11 and everything related to it defaults\nsudo update-alternatives \\ --install /usr/lib/llvm llvm /usr/lib/llvm-11 50 \\ --slave /usr/bin/llvm-config llvm-config /usr/bin/llvm-config-11 \\ --slave /usr/bin/llvm-ar llvm-ar /usr/bin/llvm-ar-11 \\ --slave /usr/bin/llvm-as llvm-as /usr/bin/llvm-as-11 \\ --slave /usr/bin/llvm-bcanalyzer llvm-bcanalyzer /usr/bin/llvm-bcanalyzer-11 \\ --slave /usr/bin/llvm-cov llvm-cov /usr/bin/llvm-cov-11 \\ --slave /usr/bin/llvm-diff llvm-diff /usr/bin/llvm-diff-11 \\ --slave /usr/bin/llvm-dis llvm-dis /usr/bin/llvm-dis-11 \\ --slave /usr/bin/llvm-dwarfdump llvm-dwarfdump /usr/bin/llvm-dwarfdump-11 \\ --slave /usr/bin/llvm-extract llvm-extract /usr/bin/llvm-extract-11 \\ --slave /usr/bin/llvm-link llvm-link /usr/bin/llvm-link-11 \\ --slave /usr/bin/llvm-mc llvm-mc /usr/bin/llvm-mc-11 \\ --slave /usr/bin/llvm-mcmarkup llvm-mcmarkup /usr/bin/llvm-mcmarkup-11 \\ --slave /usr/bin/llvm-nm llvm-nm /usr/bin/llvm-nm-11 \\ --slave /usr/bin/llvm-objdump llvm-objdump /usr/bin/llvm-objdump-11 \\ --slave /usr/bin/llvm-ranlib llvm-ranlib /usr/bin/llvm-ranlib-11 \\ --slave /usr/bin/llvm-readobj llvm-readobj /usr/bin/llvm-readobj-11 \\ --slave /usr/bin/llvm-rtdyld llvm-rtdyld /usr/bin/llvm-rtdyld-11 \\ --slave /usr/bin/llvm-size llvm-size /usr/bin/llvm-size-11 \\ --slave /usr/bin/llvm-stress llvm-stress /usr/bin/llvm-stress-11 \\ --slave /usr/bin/llvm-symbolizer llvm-symbolizer /usr/bin/llvm-symbolizer-11 \\ --slave /usr/bin/llvm-tblgen llvm-tblgen /usr/bin/llvm-tblgen-11 sudo update-alternatives \\ --install /usr/bin/clang clang /usr/bin/clang-11 50 \\ --slave /usr/bin/clang++ clang++ /usr/bin/clang++-11 \\ --slave /usr/bin/lld lld /usr/bin/lld-11 \\ --slave /usr/bin/clang-format clang-format /usr/bin/clang-format-11 \\ --slave /usr/bin/clang-tidy clang-tidy /usr/bin/clang-tidy-11 \\ --slave /usr/bin/clang-tidy-diff.py clang-tidy-diff.py /usr/bin/clang-tidy-diff-11.py \\ --slave /usr/bin/clang-include-fixer clang-include-fixer /usr/bin/clang-include-fixer-11 \\ --slave /usr/bin/clang-offload-bundler clang-offload-bundler /usr/bin/clang-offload-bundler-11 \\ --slave /usr/bin/clangd clangd /usr/bin/clangd-11 \\ --slave /usr/bin/clang-check clang-check /usr/bin/clang-check-11 \\ --slave /usr/bin/scan-view scan-view /usr/bin/scan-view-11 \\ --slave /usr/bin/clang-apply-replacements clang-apply-replacements /usr/bin/clang-apply-replacements-11 \\ --slave /usr/bin/clang-query clang-query /usr/bin/clang-query-11 \\ --slave /usr/bin/modularize modularize /usr/bin/modularize-11 \\ --slave /usr/bin/sancov sancov /usr/bin/sancov-11 \\ --slave /usr/bin/c-index-test c-index-test /usr/bin/c-index-test-11 \\ --slave /usr/bin/clang-reorder-fields clang-reorder-fields /usr/bin/clang-reorder-fields-11 \\ --slave /usr/bin/clang-change-namespace clang-change-namespace /usr/bin/clang-change-namespace-11 \\ --slave /usr/bin/clang-import-test clang-import-test /usr/bin/clang-import-test-11 \\ --slave /usr/bin/scan-build scan-build /usr/bin/scan-build-11 \\ --slave /usr/bin/scan-build-py scan-build-py /usr/bin/scan-build-py-11 \\ --slave /usr/bin/clang-cl clang-cl /usr/bin/clang-cl-11 \\ --slave /usr/bin/clang-rename clang-rename /usr/bin/clang-rename-11 \\ --slave /usr/bin/find-all-symbols find-all-symbols /usr/bin/find-all-symbols-11 \\ --slave /usr/bin/lldb lldb /usr/bin/lldb-11 \\ --slave /usr/bin/lldb-server lldb-server /usr/bin/lldb-server-11 Installing CMake Install Kitware\u0026rsquo;s GPG Key\nwget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2\u0026gt;/dev/null | gpg --dearmor - | sudo tee /etc/apt/trusted.gpg.d/kitware.gpg \u0026gt;/dev/null Add repository\necho \u0026#34;deb https://apt.kitware.com/ubuntu/ bionic main\u0026#34; | sudo tee -a /etc/apt/sources.list sudo apt-get update Install this optional package so you don\u0026rsquo;t have to mess with GPG keys anymore\nsudo apt-get install kitware-archive-keyring sudo rm /etc/apt/trusted.gpg.d/kitware.gpg Now upgrade cmake if you already have it installed with sudo apt-get upgrade -y or just install it using sudo apt-get install cmake -y\nä½¿ç”¨æºç å®‰è£… # æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ sudo apt update # å®‰è£…å¿…è¦çš„ä¾èµ–åŒ… sudo apt install build-essential cmake python3-dev # ä¸‹è½½ Clang/LLVM 11 çš„æºä»£ç  wget https://github.com/llvm/llvm-project/releases/download/llvmorg-11.0.0/llvm-11.0.0.src.tar.xz # è§£å‹æºä»£ç æ–‡ä»¶ tar xvf llvm-11.0.0.src.tar.xz # è¿›å…¥è§£å‹åçš„ç›®å½• cd llvm-11.0.0.src # åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œç”¨äºå­˜æ”¾ Clang/LLVM ç¼–è¯‘çš„ç»“æœ mkdir build cd build # ä½¿ç”¨ cmake ç¼–è¯‘ Clang/LLVM cmake .. # ç¼–è¯‘ Clang/LLVM make # å®‰è£… Clang/LLVM sudo make install ","permalink":"https://lifeislife.cn/posts/ubuntu-18-04-%E5%AE%89%E8%A3%85clang-llvm-11/","summary":"\u003ch2 id=\"ä»-apt-å®‰è£…\"\u003eä» APT å®‰è£…\u003c/h2\u003e\n\u003cp\u003eInstall the GPG Key for \u003ccode\u003ehttps://apt.llvm.org/\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewget -O - https://apt.llvm.org/llvm-snapshot.gpg.key \u003cspan class=\"p\"\u003e|\u003c/span\u003e sudo apt-key add -\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eAdd the repo for Clang 11 \u003ccode\u003estable-old\u003c/code\u003e for Ubuntu 18.04 Bionic\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-11 main\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e sudo tee -a /etc/apt/sources.list\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt-get update\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eInstall practically everything (except \u003ccode\u003epython-clang-11\u003c/code\u003e which for some reason doesn\u0026rsquo;t work)\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt-get install libllvm-11-ocaml-dev libllvm11 llvm-11 llvm-11-dev llvm-11-doc llvm-11-examples llvm-11-runtime \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003eclang-11 clang-tools-11 clang-11-doc libclang-common-11-dev libclang-11-dev libclang1-11 clang-format-11 clangd-11 \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003elibfuzzer-11-dev lldb-11 lld-11 libc++-11-dev libc++abi-11-dev libomp-11-dev -y\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eMake Clang 11 and everything related to it defaults\u003c/p\u003e","title":"Ubuntu 18.04 å®‰è£…Clang/LLVM 11"},{"content":"chown å‘½ä»¤ç”¨æ¥å˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…æˆ–æ‰€å±ç¾¤ç»„ï¼Œé€šè¿‡ chown æ”¹å˜æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œç¾¤ç»„ã€‚ç”¨æˆ·å¯ä»¥æ˜¯ç”¨æˆ·åæˆ–è€…ç”¨æˆ· IDï¼›ç»„å¯ä»¥æ˜¯ç»„åæˆ–è€…ç»„ IDï¼›æ–‡ä»¶æ˜¯ä»¥ç©ºæ ¼åˆ†å¼€çš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ–‡ä»¶åä¹Ÿæ”¯æŒé€šé…ç¬¦ã€‚\nå‘½ä»¤æ ¼å¼ chown [é€‰é¡¹] [ç”¨æˆ·æˆ–ç»„] [æ–‡ä»¶æˆ–ç›®å½•] -cæˆ–--changes #æ•ˆæœç±»ä¼¼â€œ-vâ€å‚æ•°ï¼Œä½†ä»…å›æŠ¥æ›´æ”¹çš„éƒ¨åˆ†ï¼› -fæˆ–--quiteæˆ–â€”-silent #ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼› -hæˆ–--no-dereference #åªå¯¹ç¬¦å·è¿æ¥çš„æ–‡ä»¶ä½œä¿®æ”¹ï¼Œè€Œä¸æ›´æ”¹å…¶ä»–ä»»ä½•ç›¸å…³æ–‡ä»¶ï¼› -Ræˆ–--recursive #é€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†ï¼› -væˆ–--version #æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼› --dereference #æ•ˆæœå’Œâ€œ-hâ€å‚æ•°ç›¸åŒï¼› --help #åœ¨çº¿å¸®åŠ© --reference=\u0026lt;å‚è€ƒæ–‡ä»¶æˆ–ç›®å½•\u0026gt; #æŠŠæŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…ä¸æ‰€å±ç¾¤ç»„å…¨éƒ¨è®¾æˆå’Œå‚è€ƒæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…ä¸æ‰€å±ç¾¤ç»„ç›¸åŒï¼› --version #æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ å®ä¾‹ å°†æ–‡ä»¶test.mdæ‹¥æœ‰è€…æ”¹ä¸ºnic\nchown nic test.md å°†ç›®å½•/home/nic/developåŠå…¶ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶ã€å­ç›®å½•çš„æ–‡ä»¶æ‹¥æœ‰è€…æ”¹ä¸ºnic\nchown -R nic /home/nic/develop ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-chown%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%8B%A5%E6%9C%89%E8%80%85/","summary":"\u003cp\u003echown å‘½ä»¤ç”¨æ¥å˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…æˆ–æ‰€å±ç¾¤ç»„ï¼Œé€šè¿‡ chown æ”¹å˜æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œç¾¤ç»„ã€‚ç”¨æˆ·å¯ä»¥æ˜¯ç”¨æˆ·åæˆ–è€…ç”¨æˆ· IDï¼›ç»„å¯ä»¥æ˜¯ç»„åæˆ–è€…ç»„ IDï¼›æ–‡ä»¶æ˜¯ä»¥ç©ºæ ¼åˆ†å¼€çš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ–‡ä»¶åä¹Ÿæ”¯æŒé€šé…ç¬¦ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-chown ä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…"},{"content":"-aÂ #æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ -dÂ #åªæ˜¾ç¤ºç›®å½•ï¼ˆåç§°ï¼‰ -lÂ #æ˜¾ç¤ºé“¾æ¥æ–‡ä»¶çš„åŸå§‹æ–‡ä»¶ -fÂ #æ˜¾ç¤ºæ‰€åˆ—å‡ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„å®Œæ•´ç›®å½•è·¯å¾„ -iÂ #ä¸ä»¥é˜¶æ¢¯çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•åç§° -qÂ #å°†æ§åˆ¶å­—ç¬¦ä»¥?å­—ç¬¦ä»£æ›¿ï¼Œæ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•åç§° -NÂ #ç›´æ¥æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•çš„åç§° -pÂ #æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„æƒé™ä¿¡æ¯ -uÂ #æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰è€…æˆ–è€…uid -gÂ #æ˜¾ç¤ºæ–‡ä»¶æ‰€å±ç»„æˆ–è€…gid -sÂ #æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„å¤§å°ä¿¡æ¯ -hÂ #ä»¥å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ä¿¡æ¯ -DÂ #æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¥æœŸ -vÂ #æŒ‰å­—æ¯æ•°å­—æ­£åºæ˜¾ç¤ºæ–‡ä»¶ -rÂ #æŒ‰å­—æ¯æ•°å­—å€’åºæ˜¾ç¤ºæ–‡ä»¶ -tÂ #æŒ‰æœ€åæ—¶é—´æ’åºæ˜¾ç¤ºæ–‡ä»¶ -CÂ #åœ¨æ–‡ä»¶å’Œç›®å½•åˆ—è¡¨ä¸ŠåŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†æ–‡ä»¶ç±»å‹ -PÂ patternÂ #åªæ˜¾ç¤ºåŒ¹é…æ­£åˆ™è¡¨å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§° -IÂ patternÂ #ä¸ä¸Šç»“æœç›¸å å®ä¾‹ æ˜¾ç¤ºå½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ–‡ä»¶åŠç›®å½•åç§°\n$ tree . â”œâ”€â”€ CODE_OF_CONDUCT.md â”œâ”€â”€ CONTRIBUTING.md â”œâ”€â”€ Fedora-35 â”‚ â”œâ”€â”€ Dockerfile â”‚ â””â”€â”€ Readme.md â”œâ”€â”€ LICENSE â”œâ”€â”€ README.md â”œâ”€â”€ Ubuntu-20 â”‚ â”œâ”€â”€ Dockerfile â”‚ â”œâ”€â”€ Readme.md â”‚ â”œâ”€â”€ init_edkrepo_conf.sh â”‚ â””â”€â”€ ubuntu20_dev_entrypoint.sh â””â”€â”€ Windows-2022 â”œâ”€â”€ Dockerfile â””â”€â”€ Readme.md 3 directories, 12 files åªæ˜¾ç¤ºä¸€å±‚ç›®å½•ç»“æ„\n$ tree -L 1 . â”œâ”€â”€ CODE_OF_CONDUCT.md â”œâ”€â”€ CONTRIBUTING.md â”œâ”€â”€ Fedora-35 â”œâ”€â”€ LICENSE â”œâ”€â”€ README.md â”œâ”€â”€ Ubuntu-20 â””â”€â”€ Windows-2022 3 directories, 4 files åªæ˜¾ç¤ºç›®å½•ä¸æ˜¾ç¤ºæ–‡ä»¶\n$ tree -d . â”œâ”€â”€ Fedora-35 â”œâ”€â”€ Ubuntu-20 â””â”€â”€ Windows-2022 3 directories ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-tree%E6%98%BE%E7%A4%BA%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-aÂ Â Â \u003cspan class=\"c1\"\u003e#æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-dÂ Â Â \u003cspan class=\"c1\"\u003e#åªæ˜¾ç¤ºç›®å½•ï¼ˆåç§°ï¼‰\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-lÂ Â Â \u003cspan class=\"c1\"\u003e#æ˜¾ç¤ºé“¾æ¥æ–‡ä»¶çš„åŸå§‹æ–‡ä»¶\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-fÂ Â Â \u003cspan class=\"c1\"\u003e#æ˜¾ç¤ºæ‰€åˆ—å‡ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„å®Œæ•´ç›®å½•è·¯å¾„\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-iÂ Â Â \u003cspan class=\"c1\"\u003e#ä¸ä»¥é˜¶æ¢¯çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•åç§°\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-qÂ Â Â \u003cspan class=\"c1\"\u003e#å°†æ§åˆ¶å­—ç¬¦ä»¥?å­—ç¬¦ä»£æ›¿ï¼Œæ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•åç§°\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-NÂ Â Â \u003cspan class=\"c1\"\u003e#ç›´æ¥æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•çš„åç§°\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-pÂ Â Â \u003cspan class=\"c1\"\u003e#æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„æƒé™ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-uÂ Â Â \u003cspan class=\"c1\"\u003e#æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰è€…æˆ–è€…uid\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-gÂ Â Â \u003cspan class=\"c1\"\u003e#æ˜¾ç¤ºæ–‡ä»¶æ‰€å±ç»„æˆ–è€…gid\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-sÂ Â Â \u003cspan class=\"c1\"\u003e#æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„å¤§å°ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-hÂ Â Â \u003cspan class=\"c1\"\u003e#ä»¥å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ä¿¡æ¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-DÂ Â Â \u003cspan class=\"c1\"\u003e#æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¥æœŸ\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-vÂ Â Â \u003cspan class=\"c1\"\u003e#æŒ‰å­—æ¯æ•°å­—æ­£åºæ˜¾ç¤ºæ–‡ä»¶\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-rÂ Â Â \u003cspan class=\"c1\"\u003e#æŒ‰å­—æ¯æ•°å­—å€’åºæ˜¾ç¤ºæ–‡ä»¶\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-tÂ Â Â \u003cspan class=\"c1\"\u003e#æŒ‰æœ€åæ—¶é—´æ’åºæ˜¾ç¤ºæ–‡ä»¶\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-CÂ Â Â \u003cspan class=\"c1\"\u003e#åœ¨æ–‡ä»¶å’Œç›®å½•åˆ—è¡¨ä¸ŠåŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†æ–‡ä»¶ç±»å‹\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-PÂ patternÂ Â Â Â \u003cspan class=\"c1\"\u003e#åªæ˜¾ç¤ºåŒ¹é…æ­£åˆ™è¡¨å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-IÂ patternÂ Â Â Â \u003cspan class=\"c1\"\u003e#ä¸ä¸Šç»“æœç›¸å\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"å®ä¾‹\"\u003eå®ä¾‹\u003c/h2\u003e\n\u003cp\u003eæ˜¾ç¤ºå½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ–‡ä»¶åŠç›®å½•åç§°\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ tree                 \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ CODE_OF_CONDUCT.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ CONTRIBUTING.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ Fedora-35\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ Dockerfile\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â””â”€â”€ Readme.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ LICENSE\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ README.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ Ubuntu-20\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ Dockerfile\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ Readme.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ init_edkrepo_conf.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â””â”€â”€ ubuntu20_dev_entrypoint.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ””â”€â”€ Windows-2022\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ Dockerfile\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â””â”€â”€ Readme.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e directories, \u003cspan class=\"m\"\u003e12\u003c/span\u003e files\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eåªæ˜¾ç¤ºä¸€å±‚ç›®å½•ç»“æ„\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-tree æ˜¾ç¤ºç›®å½•ç»“æ„"},{"content":" ASAP: As Soon As Possible. è¯·å°½å¿«å®Œæˆ ACK: Acknowledgement. æ‰¿è®¤ï¼ŒåŒæ„ã€‚è¡¨ç¤ºæ¥å—ä»£ç çš„æ”¹åŠ¨ CR: Code Review. è¯·æ±‚ä»£ç å®¡æŸ¥ CCN: Code Comments Needed.éœ€è¦çš„ä»£ç æ³¨é‡Šï¼šåœ¨è¿™é‡Œæœ‰ä¸€äº›ç®€çŸ­çš„æ³¨é‡Šåœ¨é«˜å±‚æ¬¡ä¸Šæè¿°æ¯ä¸ªä¸»è¦ä»£ç å—çš„ä½œç”¨ï¼ˆä¾‹å¦‚ï¼Œâ€œå¤„ç† HTTP è¯·æ±‚ä¸­çš„æ ‡å¤´â€ï¼‰ä¼šå¾ˆæœ‰å¸®åŠ© DOODOO: Documentation Out Of Date Or Obsolete.æ–‡æ¡£è¿‡æ—¶æˆ–è¿‡æ—¶ï¼šæ­¤æ–‡æ¡£ä¼¼ä¹ä¸æ­£ç¡®ï¼šæ˜¯å¦è¿‡æ—¶ï¼Ÿ DNM: Do not merge. ä¸è¦åˆå¹¶ ditto: å¤šä¸ªé‡å¤çš„è¡¨è¿°ï¼Œä¸‹ä¸€æ¬¡å¯ä»¥ç”¨ ditto è¡¨ç¤ºåŒä¸Š IMO: In My Opinion åœ¨æˆ‘çœ‹æ¥ã€ä¾æˆ‘çœ‹ã€ä¾æˆ‘æ‰€è§ LGT1: Looks Good To 1. å¦‚æœæœ‰ä¸€ä¸ªå›å¤ LGTM åˆ™å¯ä»¥æ·»åŠ ä¸º LGT1ï¼Œ1 ä»£è¡¨ç›®å‰æœ‰ 1 ä¸ªèµ LGT2: Looks Good To 2. å¦‚æœæœ‰ä¸¤ä¸ªå›å¤ LGTM åˆ™å¯ä»¥æ·»åŠ ä¸º LGT2ï¼Œ2 ä»£è¡¨ç›®å‰æœ‰ 2 ä¸ªèµ LGTM: Looks Good To Me. ä»£ç å·²ç»è¿‡ reviewï¼Œå¯ä»¥åˆå¹¶ MCE: Must Check for Errors.å¿…é¡»æ£€æŸ¥é”™è¯¯ï¼šè¿™é‡Œå¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯æˆ–å¼‚å¸¸æƒ…å†µï¼Œä½†æ‚¨æ²¡æœ‰ä»»ä½•ä»£ç æ¥å¤„ç†æ­¤ç±»äº‹ä»¶ MRï¼šmerge request. åˆå¹¶è¯·æ±‚ NACK/NAK: Negative acknowledgement. ä¸åŒæ„ï¼Œä¸æ¥å—è¿™æ¬¡çš„æ”¹åŠ¨ IMHO: In My Humble Opinion IMO è°¦è™šçš„è¯´æ³• IMO: In My Opinion. åœ¨æˆ‘çœ‹æ¥ IIRC: If I Recall Correctly. å¦‚æœæˆ‘æ²¡æœ‰è®°é”™çš„è¯ PRï¼šPull Request. æ‹‰å–è¯·æ±‚ï¼Œç»™å…¶ä»–é¡¹ç›®æäº¤ä»£ç  PTAL: Please Take A Look. æç¤ºé¡¹ç›® Owner/contributor review RFC: Request For Comment. è¯·æ±‚è¿›è¡Œè®¨è®ºï¼Œè¡¨ç¤ºè®¤ä¸ºæŸä¸ªæƒ³æ³•å¾ˆå¥½ï¼Œé‚€è¯·å¤§å®¶ä¸€èµ·è®¨è®ºä¸€ä¸‹ RCP: Repeated Code Pattern.é‡å¤ä»£ç æ¨¡å¼ï¼šä¸ä¸Šé¢å‡ è¡Œéå¸¸ç›¸ä¼¼çš„ä»£ç åœ¨è®¸å¤šä¸åŒçš„åœ°æ–¹é‡å¤å‡ºç°ã€‚æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥ç®€åŒ–å®ƒï¼ˆä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªéšè—ç»†èŠ‚çš„æ›´é«˜çº§åˆ«çš„ APIï¼Œæˆ–è€…æ‰¾åˆ°ä¸€ä¸ªæ›´é›†ä¸­çš„åœ°æ–¹æ¥æ‰§è¡Œè¿™äº›æ“ä½œï¼Œè¿™æ ·è¿™é‡Œå°±ä¸éœ€è¦è¿™æ®µä»£ç äº†ï¼‰ã€‚ SGTM: Sounds Good To Me. å’Œä¸Šé¢é‚£å¥æ„æ€å·®ä¸å¤šï¼Œä¹Ÿæ˜¯å·²ç»é€šè¿‡äº† review çš„æ„æ€ TBD: To Be Done. æœªå®Œæˆï¼Œå¾…ç»­ TL;DR: Too Long; Donâ€™t Read. PR å†…å®¹å¤ªå¤šï¼Œæ²¡åŠæ³•çœ‹ TMLI: Too Many Levels of Indentation.Too Many Levels of Indentationï¼šç¼©è¿›å¤ªæ·±çš„ä»£ç å¾ˆéš¾é˜…è¯»ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥é‡æ„ä»£ç ä»¥å‡å°‘åµŒå¥—çº§åˆ«ã€‚ WIP: Work In Progress. å‘Šè¯‰é¡¹ç›®ç»´æŠ¤è€…è¿™ä¸ªåŠŸèƒ½è¿˜æœªå®Œæˆï¼Œæ–¹ä¾¿ç»´æŠ¤è€… review å·²æäº¤çš„ä»£ç  TBR: To Be Reviewed. æç¤ºç»´æŠ¤è€…è¿›è¡Œ review TBD: To Be Done (or Defined/Discussed/Decided/Determined). æ ¹æ®è¯­å¢ƒä¸åŒæ„ä¹‰æœ‰æ‰€åŒºåˆ«ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯è¿˜æ²¡æå®šçš„æ„æ€ ","permalink":"https://lifeislife.cn/posts/codereview%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%BC%A9%E5%86%99/","summary":"\u003cul\u003e\n\u003cli\u003eASAP: As Soon As Possible. è¯·å°½å¿«å®Œæˆ\u003c/li\u003e\n\u003cli\u003eACK: Acknowledgement. æ‰¿è®¤ï¼ŒåŒæ„ã€‚è¡¨ç¤ºæ¥å—ä»£ç çš„æ”¹åŠ¨\u003c/li\u003e\n\u003cli\u003eCR: Code Review. è¯·æ±‚ä»£ç å®¡æŸ¥\u003c/li\u003e\n\u003cli\u003eCCN: Code Comments Needed.éœ€è¦çš„ä»£ç æ³¨é‡Šï¼šåœ¨è¿™é‡Œæœ‰ä¸€äº›ç®€çŸ­çš„æ³¨é‡Šåœ¨é«˜å±‚æ¬¡ä¸Šæè¿°æ¯ä¸ªä¸»è¦ä»£ç å—çš„ä½œç”¨ï¼ˆä¾‹å¦‚ï¼Œâ€œå¤„ç† HTTP è¯·æ±‚ä¸­çš„æ ‡å¤´â€ï¼‰ä¼šå¾ˆæœ‰å¸®åŠ©\u003c/li\u003e\n\u003cli\u003eDOODOO: Documentation Out Of Date Or Obsolete.æ–‡æ¡£è¿‡æ—¶æˆ–è¿‡æ—¶ï¼šæ­¤æ–‡æ¡£ä¼¼ä¹ä¸æ­£ç¡®ï¼šæ˜¯å¦è¿‡æ—¶ï¼Ÿ\u003c/li\u003e\n\u003cli\u003eDNM: Do not merge. ä¸è¦åˆå¹¶\u003c/li\u003e\n\u003cli\u003editto: å¤šä¸ªé‡å¤çš„è¡¨è¿°ï¼Œä¸‹ä¸€æ¬¡å¯ä»¥ç”¨ ditto è¡¨ç¤ºåŒä¸Š\u003c/li\u003e\n\u003cli\u003eIMO: In My Opinion åœ¨æˆ‘çœ‹æ¥ã€ä¾æˆ‘çœ‹ã€ä¾æˆ‘æ‰€è§\u003c/li\u003e\n\u003cli\u003eLGT1: Looks Good To 1. å¦‚æœæœ‰ä¸€ä¸ªå›å¤ LGTM åˆ™å¯ä»¥æ·»åŠ ä¸º LGT1ï¼Œ1 ä»£è¡¨ç›®å‰æœ‰ 1 ä¸ªèµ\u003c/li\u003e\n\u003cli\u003eLGT2: Looks Good To 2. å¦‚æœæœ‰ä¸¤ä¸ªå›å¤ LGTM åˆ™å¯ä»¥æ·»åŠ ä¸º LGT2ï¼Œ2 ä»£è¡¨ç›®å‰æœ‰ 2 ä¸ªèµ\u003c/li\u003e\n\u003cli\u003eLGTM: Looks Good To Me. ä»£ç å·²ç»è¿‡ reviewï¼Œå¯ä»¥åˆå¹¶\u003c/li\u003e\n\u003cli\u003eMCE: Must Check for Errors.å¿…é¡»æ£€æŸ¥é”™è¯¯ï¼šè¿™é‡Œå¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯æˆ–å¼‚å¸¸æƒ…å†µï¼Œä½†æ‚¨æ²¡æœ‰ä»»ä½•ä»£ç æ¥å¤„ç†æ­¤ç±»äº‹ä»¶\u003c/li\u003e\n\u003cli\u003eMRï¼šmerge request. åˆå¹¶è¯·æ±‚\u003c/li\u003e\n\u003cli\u003eNACK/NAK: Negative acknowledgement. ä¸åŒæ„ï¼Œä¸æ¥å—è¿™æ¬¡çš„æ”¹åŠ¨\u003c/li\u003e\n\u003cli\u003eIMHO: In My Humble Opinion IMO è°¦è™šçš„è¯´æ³•\u003c/li\u003e\n\u003cli\u003eIMO: In My Opinion. åœ¨æˆ‘çœ‹æ¥\u003c/li\u003e\n\u003cli\u003eIIRC: If I Recall Correctly. å¦‚æœæˆ‘æ²¡æœ‰è®°é”™çš„è¯\u003c/li\u003e\n\u003cli\u003ePRï¼šPull Request. æ‹‰å–è¯·æ±‚ï¼Œç»™å…¶ä»–é¡¹ç›®æäº¤ä»£ç \u003c/li\u003e\n\u003cli\u003ePTAL: Please Take A Look. æç¤ºé¡¹ç›® Owner/contributor review\u003c/li\u003e\n\u003cli\u003eRFC: Request For Comment. è¯·æ±‚è¿›è¡Œè®¨è®ºï¼Œè¡¨ç¤ºè®¤ä¸ºæŸä¸ªæƒ³æ³•å¾ˆå¥½ï¼Œé‚€è¯·å¤§å®¶ä¸€èµ·è®¨è®ºä¸€ä¸‹\u003c/li\u003e\n\u003cli\u003eRCP: Repeated Code Pattern.é‡å¤ä»£ç æ¨¡å¼ï¼šä¸ä¸Šé¢å‡ è¡Œéå¸¸ç›¸ä¼¼çš„ä»£ç åœ¨è®¸å¤šä¸åŒçš„åœ°æ–¹é‡å¤å‡ºç°ã€‚æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥ç®€åŒ–å®ƒï¼ˆä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªéšè—ç»†èŠ‚çš„æ›´é«˜çº§åˆ«çš„ APIï¼Œæˆ–è€…æ‰¾åˆ°ä¸€ä¸ªæ›´é›†ä¸­çš„åœ°æ–¹æ¥æ‰§è¡Œè¿™äº›æ“ä½œï¼Œè¿™æ ·è¿™é‡Œå°±ä¸éœ€è¦è¿™æ®µä»£ç äº†ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eSGTM: Sounds Good To Me. å’Œä¸Šé¢é‚£å¥æ„æ€å·®ä¸å¤šï¼Œä¹Ÿæ˜¯å·²ç»é€šè¿‡äº† review çš„æ„æ€\u003c/li\u003e\n\u003cli\u003eTBD: To Be Done. æœªå®Œæˆï¼Œå¾…ç»­\u003c/li\u003e\n\u003cli\u003eTL;DR: Too Long; Donâ€™t Read. PR å†…å®¹å¤ªå¤šï¼Œæ²¡åŠæ³•çœ‹\u003c/li\u003e\n\u003cli\u003eTMLI: Too Many Levels of Indentation.Too Many Levels of Indentationï¼šç¼©è¿›å¤ªæ·±çš„ä»£ç å¾ˆéš¾é˜…è¯»ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥é‡æ„ä»£ç ä»¥å‡å°‘åµŒå¥—çº§åˆ«ã€‚\u003c/li\u003e\n\u003cli\u003eWIP: Work In Progress. å‘Šè¯‰é¡¹ç›®ç»´æŠ¤è€…è¿™ä¸ªåŠŸèƒ½è¿˜æœªå®Œæˆï¼Œæ–¹ä¾¿ç»´æŠ¤è€… review å·²æäº¤çš„ä»£ç \u003c/li\u003e\n\u003cli\u003eTBR: To Be Reviewed. æç¤ºç»´æŠ¤è€…è¿›è¡Œ review\u003c/li\u003e\n\u003cli\u003eTBD: To Be Done (or Defined/Discussed/Decided/Determined). æ ¹æ®è¯­å¢ƒä¸åŒæ„ä¹‰æœ‰æ‰€åŒºåˆ«ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯è¿˜æ²¡æå®šçš„æ„æ€\u003c/li\u003e\n\u003c/ul\u003e","title":"CodeReview ä¸­å¸¸è§ç¼©å†™"},{"content":"æ‰“å¼€ Word å¾ˆå¿«ï¼Œä½†æ˜¯ä¸€ç¼–è¾‘å°±ç‰¹åˆ«å¡ï¼Œå°¤å…¶æ—¶æ‹–åŠ¨è¡¨æ ¼æ—¶å‡ ä¹æ˜¯é€å¸§ç§»åŠ¨ã€‚è¿™æ˜¯ç¡¬ä»¶å›¾å½¢åŠ é€Ÿé—®é¢˜ã€‚è§£å†³æ–¹å¼å¦‚ä¸‹ã€‚\næ‰“å¼€ Wordï¼Œç‚¹å‡»å·¦ä¸Šè§’â€”\u0026gt;æ–‡ä»¶â€”\u0026gt;é€‰é¡¹â€”\u0026gt;é«˜çº§ï¼Œä¸€ç›´æ‹‰åˆ°â€œæ˜¾ç¤ºâ€ï¼› å‹¾é€‰ç¦ç”¨ç¡¬ä»¶å›¾å½¢åŠ é€Ÿï¼› å–æ¶ˆå‹¾é€‰å­åƒç´ å®šä½å¹³æ»‘å±å¹•ä¸Šçš„å­—ä½“ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/office-%E8%A7%A3%E5%86%B3word%E7%BC%96%E8%BE%91%E5%8D%A1%E9%A1%BF/","summary":"\u003cp\u003eæ‰“å¼€ Word å¾ˆå¿«ï¼Œä½†æ˜¯ä¸€ç¼–è¾‘å°±ç‰¹åˆ«å¡ï¼Œå°¤å…¶æ—¶æ‹–åŠ¨è¡¨æ ¼æ—¶å‡ ä¹æ˜¯é€å¸§ç§»åŠ¨ã€‚è¿™æ˜¯ç¡¬ä»¶å›¾å½¢åŠ é€Ÿé—®é¢˜ã€‚è§£å†³æ–¹å¼å¦‚ä¸‹ã€‚\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eæ‰“å¼€ Wordï¼Œç‚¹å‡»å·¦ä¸Šè§’â€”\u0026gt;æ–‡ä»¶â€”\u0026gt;é€‰é¡¹â€”\u0026gt;é«˜çº§ï¼Œä¸€ç›´æ‹‰åˆ°â€œæ˜¾ç¤ºâ€ï¼›\u003c/li\u003e\n\u003cli\u003eå‹¾é€‰\u003cstrong\u003eç¦ç”¨ç¡¬ä»¶å›¾å½¢åŠ é€Ÿ\u003c/strong\u003eï¼›\u003c/li\u003e\n\u003cli\u003eå–æ¶ˆå‹¾é€‰\u003cstrong\u003eå­åƒç´ å®šä½å¹³æ»‘å±å¹•ä¸Šçš„å­—ä½“\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/12/03/7215b5c4712d13d43182a8c610d64c37.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/12/03/7215b5c4712d13d43182a8c610d64c37.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"OFFICE-è§£å†³ Word ç¼–è¾‘å¡é¡¿"},{"content":"å°†ä»“åº“git cloneåˆ°æœ¬åœ°åå‘ç°æœ¬åœ°ç¼ºå¤±äº†ä¸€äº›è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ã€‚ä¸€èˆ¬å‘ç”Ÿåœ¨git clone â€”depth 1è®¾ç½®å…‹éš†æ·±åº¦æ—¶å‘ç”Ÿã€‚å› ä¸ºæœ‰äº›å¤§å‹é¡¹ç›®ä¸€æ¬¡æ€§å…‹éš†å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥åªå…‹éš†ä¸€å±‚æ·±åº¦ã€‚\nå¦‚è¿œç¨‹æœ‰åˆ†æ”¯branch_aï¼Œå…‹éš†ä¸‹æ¥åä½¿ç”¨git branch -avå‘½ä»¤æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯æ²¡æœ‰æ˜¾ç¤ºè¯¥åˆ†æ”¯ï¼Œè¯¥å¦‚ä½•è§£å†³ï¼Ÿ\ngit remote set-branches origin \u0026#39;branch_a\u0026#39; git fetch -v ","permalink":"https://lifeislife.cn/posts/git-clone%E4%B8%8B%E6%9D%A5%E7%9A%84%E5%88%86%E6%94%AF%E4%B8%8D%E5%AE%8C%E6%95%B4/","summary":"\u003cp\u003eå°†ä»“åº“\u003ccode\u003egit clone\u003c/code\u003eåˆ°æœ¬åœ°åå‘ç°æœ¬åœ°ç¼ºå¤±äº†ä¸€äº›è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ã€‚ä¸€èˆ¬å‘ç”Ÿåœ¨\u003ccode\u003egit clone â€”depth 1\u003c/code\u003eè®¾ç½®å…‹éš†æ·±åº¦æ—¶å‘ç”Ÿã€‚å› ä¸ºæœ‰äº›å¤§å‹é¡¹ç›®ä¸€æ¬¡æ€§å…‹éš†å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥åªå…‹éš†ä¸€å±‚æ·±åº¦ã€‚\u003c/p\u003e","title":"Git cloneä¸‹æ¥çš„åˆ†æ”¯ä¸å®Œæ•´"},{"content":"æäº¤è¡¥ä¸çš„æœ€ä½³å®è·µ æœ¬æ–‡ç¿»è¯‘è‡ªå®˜æ–¹æ•™ç¨‹Git - MyFirstContributionï¼ŒåŸæ–‡åŒ…å«å¼€å‘åˆ°æäº¤çš„æ•´ä¸ªå‘¨æœŸã€‚ä½†æ˜¯æƒ³è¦æäº¤çš„äººåº”è¯¥éƒ½å·²ç»å¼€å‘å®Œä»£ç äº†ï¼Œæ‰€ä»¥æœ¬æ–‡ç”¨è‡ªå·±çš„å®é™…ä¾‹å­é‡æ–°å†™äº†ä¸€éï¼Œçœå»äº†å¼€å‘ä»£ç ç­‰æµç¨‹ï¼Œé‡ç‚¹ä»‹ç»å¦‚ä½•ä½¿ç”¨ git send-emailã€‚\nç¯å¢ƒå‡†å¤‡ ä¸‹è½½ OpenSBI ä»“åº“ git clone https://github.com/riscv-software-src/opensbi.git cd opensbi å®‰è£…ä¾èµ– è¦ä»æºä»£ç æ„å»º OpenSBIï¼š\nmake æ³¨ï¼šOpenSBI çš„æ„å»ºæ˜¯å¯å¹¶è¡Œçš„ã€‚ä¸Šé¢çš„å‘½ä»¤å¯ä»¥æ·»åŠ -j#å‚æ•°ï¼Œå¦‚-j12ã€‚\nç¡®è®¤è¦è§£å†³çš„é—®é¢˜ åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å°†æ¨¡æ‹Ÿæäº¤ä¸€ä¸ªç®€å•çš„ Patchï¼Œ.gitignoreæ–‡ä»¶å¯ä»¥è¿‡æ»¤ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œç°åœ¨ä½¿ç”¨ VSCode çš„ç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œä½¿ç”¨ VSCode å¼€å‘æ—¶å¸¸å¸¸ä¼šç”Ÿæˆ.vscodeç›®å½•ï¼Œä½†æ˜¯è¿™äº›æ–‡ä»¶ä¸è¯¥è¢«æ¨é€è‡³è¿œç¨‹ï¼ŒåŸä»“åº“ä¸­çš„.gitignoreæ–‡ä»¶ä¸­æ²¡æœ‰è¿‡æ»¤è¯¥æ–‡ä»¶ï¼Œæˆ‘ä»¬ç»™ä»–åŠ ä¸Šã€‚\nä¸ºäº†èƒ½å¤Ÿæ¨¡æ‹Ÿä¸€æ¬¡å‘é€å¤šä¸ªcommitçš„åœºæ™¯ï¼Œæˆ‘ä»¬å°†å†æ·»åŠ ä¸€ä¸ª.soç”¨æ¥è¿‡æ»¤ç¼–è¯‘è¿‡ç¨‹ä¸­ç”Ÿæˆçš„.soæ–‡ä»¶ã€‚\nå»ºç«‹å·¥ä½œç©ºé—´ è®©æˆ‘ä»¬å…ˆå»ºç«‹ä¸€ä¸ªå¼€å‘åˆ†æ”¯æ¥è¿›è¡Œæˆ‘ä»¬çš„ä¿®æ”¹ã€‚\ngit checkout -b update_gitignore origin/master æˆ‘ä»¬å°†åœ¨è¿™é‡Œåšä¸€äº›æäº¤ï¼Œä»¥æ¼”ç¤ºå¦‚ä½•å°†ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªè¡¥ä¸çš„ä¸»é¢˜åŒæ—¶é€å®¡ã€‚\nå®ç°ä»£ç  è¿‡æ»¤ .vscode æ‰“å¼€æ–‡ä»¶.gitignoreï¼Œä¸ºè¯¥æ–‡ä»¶æ·»åŠ /.vscode/ï¼š\n# Object files *.o *.a *.dep #Build \u0026amp; install directories build/ install/ # Development friendly files tags cscope* /.vscode/ ä¸ºä»¥ä¸Šä¿®æ”¹åšä¸€æ¬¡æäº¤ï¼š\n$ git status On branch update_gitignore Your branch is up to date with \u0026#39;origin/master\u0026#39;. Changes not staged for commit: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to update what will be committed) (use \u0026#34;git checkout -- \u0026lt;file\u0026gt;...\u0026#34; to discard changes in working directory) modified: .gitignore $ git add .gitignore $ git commit -s æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åå°†ä¼šå¼¹å‡ºç¼–è¾‘æ¡†ç”¨æ¥ç¼–å†™æäº¤ä¿¡æ¯ã€‚ä¸»é¢˜è¡Œè¦å°‘äº 50 ä¸ªå­—ç¬¦ï¼Œç„¶åæ˜¯ä¸€ä¸ªç©ºè¡Œï¼ˆå¿…é¡»ï¼‰ï¼Œç„¶åæ˜¯æ‚¨çš„æäº¤æ¶ˆæ¯çš„æ­£æ–‡ã€‚è¯·è®°ä½è¦æ˜ç¡®å¹¶æä¾›æ›´æ”¹çš„åŸå› ï¼ˆç†ç”±ï¼‰ï¼Œç‰¹åˆ«æ˜¯å¦‚æœæ— æ³•ä»æ‚¨çš„å·®å¼‚ä¸­è½»æ¾ç†è§£ä½ çš„æäº¤å†…å®¹æ—¶ã€‚ç¼–è¾‘æäº¤æ¶ˆæ¯æ—¶ï¼Œä¸è¦åˆ é™¤ä¸Šé¢ Signed-off-by æ·»åŠ çš„ trailerã€‚ï¼ˆç”±ä¸Šé¢å‘½ä»¤-så‚æ•°ç”Ÿæˆï¼‰ã€‚\nå…¶ä»–è§„èŒƒè¯·è¯¦ç»†æŸ¥é˜…ç›®æ ‡ç¤¾åŒºçš„æäº¤è§„èŒƒï¼Œå¦‚OpenSBIè¦æ±‚ä¸»é¢˜è¡Œéœ€è¦ä»¥ lib:ï¼Œ platform:, firmware:, docs:, utils: æˆ–è€… top:ä¸ºå‰ç¼€ï¼Œä¿®æ”¹.gitignoreå±äºtopèŒƒç•´ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å…¶åŠ åœ¨ä¸»é¢˜è¡Œä¸Šã€‚\ntop: filter .vscode folder Filter the workspace\u0026#39;s \u0026#39;.vscode\u0026#39; directory by adding \u0026#39;/.vscode/\u0026#39; to the.gitignore file. Signed-off-by: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; ç»§ç»­ç”¨ git show æ£€æŸ¥æ‚¨çš„æ–°æäº¤ã€‚å°¤å…¶ä¸è¦å‡ºç°ä¸éœ€è¦åœ¨æœ¬æ¬¡æäº¤çš„å†…å®¹ã€‚é€šå¸¸ä½¿ç”¨ä¸åŒçš„ IDE éƒ½å¯èƒ½ä¼šæ— æ„é—´ç”Ÿæˆä¸€äº›é…ç½®æ–‡ä»¶ç­‰ï¼Œè¯·æ³¨æ„å°†å…¶å‰”é™¤ã€‚\ncommit 5dc340c29979d4c5d8c4d5a6e881348239714434 (HEAD -\u0026gt; update_gitignore) Author: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; Date: Fri Nov 18 16:06:21 2022 +0800 top: filter .vscode folder Filter the workspace\u0026#39;s \u0026#39;.vscode\u0026#39; directory by adding \u0026#39;/.vscode/\u0026#39; to the.gitignore file. Signed-off-by: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; diff --git a/.gitignore b/.gitignore index 95692bb..90cf552 100644 --- a/.gitignore +++ b/.gitignore @@ -10,3 +10,5 @@ install/ # Development friendly files tags cscope* + +/.vscode/ è¿‡æ»¤ .cache ä¸ä¸Šä¸€èŠ‚æ­¥éª¤ç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨.gitignoreæ–‡ä»¶ä¸­å†æ·»åŠ ä¸€ä¸ª/.cache/å­—æ®µç”¨æ¥è¿‡æ»¤.cacheæ–‡ä»¶å¤¹ã€‚\n# Object files *.o *.a *.dep #Build \u0026amp; install directories build/ install/ # Development friendly files tags cscope* /.vscode/ /.cache/ æ·»åŠ å®Œæˆ‘ä»¬å°±å³ä½¿ä¿å­˜å·¥ä½œè¿›åº¦ï¼Œæ–°ç”Ÿæˆä¸€ä¸ªcommitã€‚\ngit add .gitignore git commit -s top: filter .cache folder Filter the workspace\u0026#39;s \u0026#39;.cache\u0026#39; directory by adding \u0026#39;/.cache/\u0026#39; to the.gitignore file. Signed-off-by: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; ä»¥ä¸Šæˆ‘ä»¬å°±å·²ç»å‡†å¤‡å¥½æ‰€æœ‰çš„ä»£ç äº†ï¼Œåœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹å¯èƒ½ä¿®æ”¹çš„æ˜¯.cæˆ–è€….hç­‰æºæ–‡ä»¶ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬èƒ½å¤Ÿä½¿ä»£ç ç¼–è¯‘ã€è¿è¡Œå¹¶ä¸”æµ‹è¯•é€šè¿‡åå†æäº¤ã€‚\nè¿™é‡Œä¸ºäº†æ¼”ç¤ºæäº¤æµç¨‹ï¼Œå°±æ²¡æœ‰æ¶‰åŠè¿™äº›æ­¥éª¤ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦å‡†å¤‡æäº¤çš„è¡¥ä¸æ–‡ä»¶äº†ã€‚\nå‡†å¤‡æäº¤è¡¥ä¸ OpenSBI é¡¹ç›®æ˜¯é€šè¿‡ç”µå­é‚®ä»¶å‘é€è¡¥ä¸æ¥è¿›è¡Œä»£ç å®¡æŸ¥çš„ï¼Œå½“è¡¥ä¸å‡†å¤‡å¥½å¹¶å¾—åˆ°ç¤¾åŒºè®¤å¯åï¼Œç»´æŠ¤è€…å°±ä¼šåº”ç”¨ï¼ˆApplyï¼‰è¿™äº›è¡¥ä¸ã€‚OpenSBI é¡¹ç›®ä¸æ¥å—æ¥è‡ª Pull Request çš„è´¡çŒ®ï¼Œè€Œä¸”é€šè¿‡ç”µå­é‚®ä»¶å‘é€çš„è¡¥ä¸éœ€è¦ä»¥æŒ‡å®šçš„æ–¹å¼è¿›è¡Œå®¡æ ¸ã€‚\nåœ¨ç ”ç©¶å¦‚ä½•å°†ä½ çš„æäº¤è½¬åŒ–ä¸ºç”µå­é‚®ä»¶çš„è¡¥ä¸ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹æœ€ç»ˆçš„ç»“æœï¼Œå³è¡¥ä¸ç³»åˆ—ï¼ˆPatch Seriesï¼‰æ˜¯ä»€ä¹ˆæ ·å­ã€‚ä¸‹é¢æ˜¯ OpenSBI é‚®ä»¶åˆ—è¡¨å­˜æ¡£çš„ç½‘é¡µç•Œé¢ä¸Šçš„è¡¥ä¸ç³»åˆ—çš„æ‘˜è¦è§†å›¾çš„ä¸€ä¸ªä¾‹å­ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬å¯ä»¥æ³¨æ„å‡ ç‚¹ï¼š\næ¯æ¬¡æäº¤éƒ½æ˜¯ä»¥å•ç‹¬çš„é‚®ä»¶å½¢å¼å‘é€ï¼Œæäº¤ä¿¡æ¯çš„æ ‡é¢˜ä¸ºä¸»é¢˜ï¼Œå‰ç¼€ä¸º[PATCH i/n]ï¼Œä»£è¡¨nä¸ªæäº¤ç³»åˆ—ä¸­çš„ç¬¬ i ä¸ªæäº¤ã€‚ æ¯ä¸ªè¡¥ä¸éƒ½æ˜¯ä½œä¸ºå¯¹cover letterçš„å›å¤ï¼Œcover letterçš„å‰ç¼€ä¸º[PATCH 0/n]ï¼Œåºå·ä¸º 0 çš„æ ‡é¢˜ã€‚ è¡¥ä¸ç³»åˆ—çš„åç»­è¿­ä»£è¢«æ ‡è®°ä¸º PATCH v2ã€PATCH v3ï¼Œç­‰ç­‰ï¼Œä»¥ä»£æ›¿ PATCHã€‚ä¾‹å¦‚ï¼Œ[PATCH v2 1/3]å°†æ˜¯ç¬¬äºŒæ¬¡è¿­ä»£ä¸­ä¸‰ä¸ªè¡¥ä¸çš„ç¬¬ä¸€ä¸ªè¡¥ä¸ã€‚æ¯æ¬¡è¿­ä»£éƒ½æœ‰ä¸€ä¸ªæ–°çš„cover letterï¼ˆå¦‚ä¸Šé¢çš„[PATCH v2 0/3]ï¼‰ï¼Œæœ¬èº«å°±æ˜¯å¯¹å‰ä¸€æ¬¡è¿­ä»£çš„cover letterçš„å›å¤ï¼ˆä¸‹é¢ä¼šæœ‰æ›´å¤šä»‹ç»ï¼‰ã€‚ æ³¨ï¼šå•ä¸€è¡¥ä¸çš„ä¸»é¢˜æ˜¯ä»¥[PATCH]ã€[PATCH v2]ç­‰å‘é€çš„ï¼Œæ²¡æœ‰ i/n ç¼–å·ã€‚å¦‚ä¸Šå›¾ä¸­çš„ç¬¬å››ä¸ª Patchï¼Œå°±æ˜¯ä¸€ä¸ªå•ä¸€è¡¥ä¸ã€‚\nä»€ä¹ˆæ˜¯ cover letter é™¤äº†ç»™æ¯ä¸ªè¡¥ä¸å‘ä¸€å°é‚®ä»¶å¤–ï¼ŒOpenSBI ç¤¾åŒºè¿˜å¸Œæœ›ä½ çš„è¡¥ä¸èƒ½é™„å¸¦ä¸€å° cover letterã€‚è¿™æ˜¯ä¿®æ”¹æäº¤çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå› ä¸ºå®ƒæ¦‚æ‹¬äº†ä½ æƒ³è¦åšä»€ä¹ˆï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Œæ¯”ä»…ä»…çœ‹ä½ çš„è¡¥ä¸æ›´æ˜æ˜¾ã€‚\nä½ çš„ cover letter çš„æ ‡é¢˜åº”è¯¥æ˜¯èƒ½ç®€æ´åœ°æ¶µç›–ä½ æ•´ä¸ªä¸»é¢˜åˆ†æ”¯çš„ç›®çš„ã€‚å°±åƒæˆ‘ä»¬çš„æäº¤ä¿¡æ¯æ ‡é¢˜ä¸€æ ·ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ç³»åˆ—æ ‡é¢˜ã€‚\nUpdate gitignore --- cover letter çš„æ­£æ–‡æ˜¯ç”¨æ¥ç»™è¯„å®¡å‘˜æä¾›é¢å¤–çš„èƒŒæ™¯ã€‚ä¸€å®šè¦è§£é‡Šä»»ä½•ä½ çš„è¡¥ä¸è‡ªå·±æ²¡æœ‰è¯´æ¸…æ¥šçš„ä¸œè¥¿ï¼Œä½†è¦è®°ä½ï¼Œç”±äº cover letter æ²¡æœ‰è®°å½•åœ¨æäº¤å†å²ä¸­ï¼Œä»»ä½•å¯èƒ½å¯¹æœªæ¥ç‰ˆæœ¬åº“å†å²çš„è¯»è€…æœ‰ç”¨çš„ä¸œè¥¿ä¹Ÿåº”è¯¥åœ¨ä½ çš„æäº¤ä¿¡æ¯ä¸­å‡ºç°ã€‚\nä¸‹æ–‡æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ç”Ÿæˆ cover letter ä»¥åŠå¦‚ä½•å¡«å†™ cover letterã€‚\nç”¨ git send-email å‘é€è¡¥ä¸ å‰ææ¡ä»¶ - è®¾ç½® git send-email å¯¹ send-email çš„é…ç½®ä¼šæ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿå’Œç”µå­é‚®ä»¶ä¾›åº”å•†è€Œæœ‰æ‰€ä¸åŒï¼Œé…ç½®å¯ä»¥å‚è€ƒæ–‡æ¡£å¦‚ä½•ä½¿ç”¨ git-send-mail ç»™å¼€æºç¤¾åŒºæäº¤ Patch - å¦‚äº‘æ³Šã€‚\nå‡†å¤‡åˆå§‹è¡¥ä¸é›† åœ¨å‡†å¤‡é‚®ä»¶æœ¬èº«ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡è¡¥ä¸ã€‚\ngit format-patch --cover-letter -o update_gitignore/ --base=auto update_gitignore@{u}..update_gitignore --cover-letter é€‰é¡¹å‘Šè¯‰ format-patch ä¸ºä½ åˆ›å»ºä¸€ä¸ª cover letter æ¨¡æ¿ã€‚åœ¨ä½ å‡†å¤‡å‘é€ä¹‹å‰ï¼Œä½ å°†éœ€è¦å¡«å†™è¯¥æ¨¡æ¿ã€‚ -o update_gitignore/ é€‰é¡¹å‘Šè¯‰ format-patch æŠŠè¡¥ä¸æ–‡ä»¶æ”¾åˆ°ç›®å½•update_gitignoreä¸­ã€‚è¿™æ ·å‘é€å¤šä¸ªcommitæ—¶å°±å¯ä»¥ä½¿ç”¨å‘½ä»¤ä¸€æ¬¡æ€§å‘é€ï¼Œå› ä¸º git send-email å¯ä»¥æ¥æ”¶ä¸€ä¸ªç›®å½•å¹¶ä»é‚£é‡Œå‘é€æ‰€æœ‰è¡¥ä¸ã€‚ --base=auto é€‰é¡¹å‘Šè¯‰å‘½ä»¤è®°å½•â€åŸºæœ¬æäº¤â€ï¼Œæ¥æ”¶è€…å°†åœ¨æ­¤åŸºç¡€ä¸Šåº”ç”¨è¡¥ä¸ç³»åˆ—ã€‚è‡ªåŠ¨å€¼å°†ä½¿ format-patch è‡ªåŠ¨è®¡ç®—åŸºæœ¬æäº¤ï¼Œå³è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯çš„æœ€æ–°æäº¤å’ŒæŒ‡å®šä¿®è®¢èŒƒå›´çš„åˆå¹¶åŸºæ•°ã€‚ update_gitignore@{u}..update_gitignore é€‰é¡¹å‘Šè¯‰ format-patch ä¸ºä½ åœ¨ update_gitignore åˆ†æ”¯ä¸Šåˆ›å»ºçš„æäº¤ç”Ÿæˆè¡¥ä¸ï¼Œå› ä¸ºå®ƒæ˜¯ä»ä¸Šæ¸¸åˆ†å‰å‡ºæ¥çš„ã€‚@{u}çš„æ„æ€å°±æ˜¯ä»åˆ†å‰å¼€å§‹åˆ°æœ€æ–°çš„æäº¤ã€‚ æ‰§è¡Œå®Œè¯¥å‘½ä»¤æˆ‘ä»¬çœ‹çœ‹ç”Ÿæˆäº†å“ªäº›å†…å®¹ã€‚\n$ git status On branch update_gitignore Your branch is ahead of \u0026#39;origin/master\u0026#39; by 2 commits. (use \u0026#34;git push\u0026#34; to publish your local commits) Untracked files: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to include in what will be committed) update_gitignore/ $ ls update_gitignore 0000-cover-letter.patch 0001-top-filter-.vscode-folder.patch 0002-top-filter-.cache-folder.patch è¯¥å‘½ä»¤å°†ä¸ºæ¯æ¬¡æäº¤åˆ¶ä½œä¸€ä¸ªè¡¥ä¸æ–‡ä»¶ã€‚è¿è¡Œåï¼Œæ‚¨å¯ä»¥ç”¨æ‚¨å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨çœ‹ä¸€ä¸‹æ¯ä¸ªè¡¥ä¸ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ã€‚å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†ä¸€ä¸ª-oå‚æ•°ä¸­çš„update_gitignoreæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ cover letter å’Œä¸Šæ–‡æˆ‘ä»¬åšçš„ä¸¤æ¬¡æäº¤å¯¹åº”çš„è¡¥ä¸æ–‡ä»¶ã€‚\nåˆ†åˆ«æ‰“å¼€ä»–ä»¬ï¼Œç»“æœå¦‚ä¸‹ï¼š\nFrom 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001 From: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; Date: Fri, 18 Nov 2022 16:41:32 +0800 Subject: [PATCH 0/2] *** SUBJECT HERE *** *** BLURB HERE *** Dominic Zhang (2): top: filter .vscode folder top: filter .cache folder .gitignore | 3 +++ 1 file changed, 3 insertions(+) base-commit: 880685586dcee950d209088a461443449a1693ce -- 2.17.1 From 5dc340c29979d4c5d8c4d5a6e881348239714434 Mon Sep 17 00:00:00 2001 From: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; Date: Fri, 18 Nov 2022 16:06:21 +0800 Subject: [PATCH 1/2] top: filter .vscode folder Filter the workspace\u0026#39;s \u0026#39;.vscode\u0026#39; directory by adding \u0026#39;/.vscode/\u0026#39; to the.gitignore file. Signed-off-by: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; --- .gitignore | 2 ++ 1 file changed, 2 insertions(+) diff --git a/.gitignore b/.gitignore index 95692bb..90cf552 100644 --- a/.gitignore +++ b/.gitignore @@ -10,3 +10,5 @@ install/ # Development friendly files tags cscope* + +/.vscode/ \\ No newline at end of file -- 2.17.1 From 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001 From: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; Date: Fri, 18 Nov 2022 16:20:37 +0800 Subject: [PATCH 2/2] top: filter .cache folder Filter the workspace\u0026#39;s \u0026#39;.cache\u0026#39; directory by adding \u0026#39;/.cache/\u0026#39; to the.gitignore file. Signed-off-by: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; --- .gitignore | 3 ++- 1 file changed, 2 insertions(+), 1 deletion(-) diff --git a/.gitignore b/.gitignore index 90cf552..bf9d716 100644 --- a/.gitignore +++ b/.gitignore @@ -11,4 +11,5 @@ install/ tags cscope* -/.vscode/ \\ No newline at end of file +/.vscode/ +/.cache/ \\ No newline at end of file -- 2.17.1 æ³¨ï¼šå¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ --rfc å‚æ•°ï¼Œåœ¨ä½ çš„è¡¥ä¸ä¸»é¢˜å‰åŠ ä¸Š[RFC PATCH]ï¼Œè€Œä¸æ˜¯[PATCH]ã€‚RFC æ˜¯â€è¯·æ±‚è¯„è®ºâ€çš„æ„æ€ï¼Œè¡¨ç¤ºè™½ç„¶ä½ çš„ä»£ç è¿˜æ²¡æœ‰å‡†å¤‡å¥½æäº¤ï¼Œä½†ä½ æƒ³å¼€å§‹ä»£ç å®¡æŸ¥è¿‡ç¨‹ã€‚ä½ ä¹Ÿå¯èƒ½åœ¨åˆ—è¡¨ä¸­çœ‹åˆ°æ ‡æœ‰â€WIPâ€çš„è¡¥ä¸ï¼Œè¿™æ„å‘³ç€ä»–ä»¬è¿˜æ²¡æœ‰å®Œæˆï¼Œä½†å¸Œæœ›å®¡æŸ¥è€…èƒ½çœ‹çœ‹ä»–ä»¬ç›®å‰çš„æˆæœã€‚ä½ å¯ä»¥ç”¨--subject-prefix=WIPæ¥æ·»åŠ è¿™ä¸ªæ ‡å¿—ã€‚\næ£€æŸ¥å¹¶ç¡®ä¿ä½ çš„è¡¥ä¸å’Œ cover letter æ¨¡æ¿å­˜åœ¨äºä½ æŒ‡å®šçš„ç›®å½•ä¸­ï¼Œè¿™å°±å®Œæˆæ‰€æœ‰å‡†å¤‡äº†ã€‚\nå‡†å¤‡é‚®ä»¶ ç”±äºä½ åœ¨è°ƒç”¨ format-patch æ—¶ä½¿ç”¨äº†--cover-letterï¼Œä½ å·²ç»å‡†å¤‡å¥½äº†ä¸€ä¸ª cover letter æ¨¡æ¿ã€‚åœ¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€å®ƒã€‚\nä½ åº”è¯¥çœ‹åˆ°å·²ç»æœ‰ä¸€äº›æ ‡é¢˜å­˜åœ¨ã€‚æ£€æŸ¥ä½ çš„From:æ ‡é¢˜æ˜¯å¦æ­£ç¡®ã€‚ç„¶åä¿®æ”¹ä½ çš„Subject:ã€‚\nç¡®ä¿ä¿ç•™[PATCH 0/X]çš„éƒ¨åˆ†ï¼›è¿™æ˜¯å‘ Git ç¤¾åŒºè¡¨æ˜è¿™å°é‚®ä»¶æ˜¯ä¸€ä¸ªè¡¥ä¸ç³»åˆ—çš„å¼€å§‹ï¼Œè®¸å¤šå®¡æŸ¥è€…ä¼šæ ¹æ®è¿™ç§ç±»å‹çš„æ ‡è®°è¿‡æ»¤ä»–ä»¬çš„é‚®ä»¶ã€‚\næ¥ä¸‹æ¥ï¼Œä½ å¿…é¡»å¡«å†™ä½ çš„ cover letter çš„æ­£æ–‡ã€‚åŒæ ·ï¼Œå…³äºåº”åŒ…æ‹¬å“ªäº›å†…å®¹ï¼Œè§ä¸Šæ–‡ã€‚\næœ€åï¼Œä¿¡ä¸­ä¼šåŒ…æ‹¬ç”¨äºç”Ÿæˆè¡¥ä¸çš„ Git çš„ç‰ˆæœ¬ã€‚ä½ å¯ä»¥ä¸ç”¨ç®¡è¿™ä¸ªå­—ç¬¦ä¸²ã€‚\nå®Œå–„åçš„ cover letter å¦‚ä¸‹ï¼š\nFrom 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001 From: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; Date: Fri, 18 Nov 2022 16:41:32 +0800 Subject: [PATCH 0/2] Update gitignore vscode is a very popular IDE, and it often needs to generate a.vscode. cache directory to hold workspace configuration files that should not be committed to a remote repository, so we made some modifications to the gitignore file to filter such directories. Dominic Zhang (2): top: filter .vscode folder top: filter .cache folder .gitignore | 3 +++ 1 file changed, 3 insertions(+) base-commit: 880685586dcee950d209088a461443449a1693ce -- 2.17.1 å‘é€é‚®ä»¶ åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥æœ‰ä¸€ä¸ªç›®å½• update_gitignore/ï¼Œé‡Œé¢åŒ…å«ä½ çš„è¡¥ä¸å’Œä¸€å° cover letterã€‚æ˜¯æ—¶å€™æŠŠå®ƒå‘å‡ºå»äº†ï¼ä½ å¯ä»¥åƒè¿™æ ·å‘é€ã€‚\ngit send-email --to=target@example.com update_gitignore/*.patch æ³¨ï¼šè¯·æŸ¥çœ‹ git help send-email ä¸­çš„ä¸€äº›å…¶ä»–é€‰é¡¹ï¼Œä½ å¯èƒ½ä¼šå‘ç°è¿™äº›é€‰é¡¹å¾ˆæœ‰ä»·å€¼ï¼Œæ¯”å¦‚æ”¹å˜å›å¤åœ°å€æˆ–æ·»åŠ æ›´å¤šçš„æŠ„é€åœ°å€æˆ–å¯†é€åœ°å€ã€‚\næ³¨ï¼šå½“ä½ å‘é€ä¸€ä¸ªçœŸæ­£çš„è¡¥ä¸æ—¶ï¼Œå®ƒå°†è¢«å‘é€åˆ° opensbi@lists.infradead.org - ä½†è¯·ä¸è¦æŠŠä½ çš„è¡¥ä¸é›†ä»æ•™ç¨‹ä¸­å‘é€åˆ°çœŸæ­£çš„é‚®ä»¶åˆ—è¡¨ä¸­ï¼ç°åœ¨ä½ å¯ä»¥æŠŠå®ƒå‘é€ç»™ä½ è‡ªå·±ï¼Œä»¥ç¡®ä¿ä½ äº†è§£å®ƒçš„å½¢å¼ã€‚\nåœ¨ä½ è¿è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œä½ ä¼šä¸ºæ¯ä¸ªå³å°†å‘å‡ºçš„è¡¥ä¸çœ‹åˆ°ä¸€ä¸ªäº¤äº’æç¤ºã€‚è¿™ç»™äº†ä½ æœ€åä¸€æ¬¡æœºä¼šæ¥ç¼–è¾‘æˆ–æ”¾å¼ƒå‘é€ä¸€äº›ä¸œè¥¿ï¼ˆä½†è¿˜æ˜¯é‚£å¥è¯ï¼Œä¸è¦ç”¨è¿™ç§æ–¹å¼ç¼–è¾‘ä»£ç ï¼‰ã€‚ä¸€æ—¦ä½ åœ¨è¿™äº›æç¤ºä¸‹æŒ‰ä¸‹ y æˆ– aï¼Œä½ çš„é‚®ä»¶å°±ä¼šè¢«å‘é€å‡ºå»ï¼Congratulation!\nå‘é€è¡¥ä¸çš„æ›´æ–°ç‰ˆæœ¬ æœ¬èŠ‚å°†é‡ç‚¹ä»‹ç»å¦‚ä½•å‘é€ä½ çš„è¡¥ä¸é›†çš„ v2 ç‰ˆã€‚æˆ‘ä»¬å°†åœ¨ v2 ç‰ˆä¸­é‡æ–°ä½¿ç”¨æˆ‘ä»¬çš„ update_gitignore åˆ†æ”¯ã€‚åœ¨æˆ‘ä»¬åšä»»ä½•æ”¹åŠ¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªåä¸ºupdate_gitignore-v1çš„åˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯æ˜¯æˆ‘ä»¬æ²¡æœ‰åšæ–°çš„æ”¹åŠ¨çš„åˆ†æ”¯ã€‚è¿™æ ·åœ¨åé¢æˆ‘ä»¬å°±å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œå¯¹æ¯”å·®å¼‚ã€‚\ngit checkout update_gitignore git branch update_gitignore-v1 åœ¨æ›´æ–°è¡¥ä¸æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ç¤¾åŒºçš„æ„è§åªè®©ä¿®æ”¹æœ€æ–°çš„ä¸€ä¸ªæäº¤ï¼Œä¸€ç§æ˜¯ä¿®æ”¹å†å²è®°å½•ä¸­çš„ commitã€‚æˆ‘ä»¬åˆ†åˆ«æ¥å¤„ç†è¿™ä¸¤ç§æƒ…å†µã€‚\nå¦‚ä½•ä¿®æ”¹æœ€æ–°çš„æäº¤ æ¯”å¦‚åªéœ€è¦ä¿®æ”¹top: filter .cache folderè¿™ä¸ª commitã€‚å› ä¸ºå®ƒåœ¨æˆ‘ä»¬çš„ä¿®æ”¹ä¸­æ˜¯æœ€æ–°çš„ commitï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹ä»£ç ä¿®æ”¹ã€‚æ¯”å¦‚æˆ‘ä»¬åšä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼Œç»™ä¿®æ”¹çš„å†…å®¹/.cacheåŠ ä¸ªæ³¨é‡Šã€‚\n# Object files *.o *.a *.dep #Build \u0026amp; install directories build/ install/ # Development friendly files tags cscope* /.vscode/ # Cache file /.cache/ git add .gitignore git commit --amend æ³¨æ„ï¼æˆ‘ä»¬ä¸éœ€è¦ç”Ÿæˆæ–°çš„commitï¼Œæ‰€ä»¥ä½¿ç”¨ --amendå‚æ•°ä¿®æ”¹æœ€æ–°çš„commit messageå³å¯ã€‚æ‰§è¡Œè¿™æ¡å‘½ä»¤ä¼šå¼¹å‡ºç¼–è¾‘çª—å£ï¼Œå› ä¸ºä¿®æ”¹å†…å®¹å·²ç»å¾ˆæ˜ç¡®ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨commit messageé‡Œå†åšé¢å¤–è¯´æ˜ï¼Œç›´æ¥ä¿å­˜é€€å‡ºå³å¯ã€‚å¦‚æœä¿®æ”¹å†…å®¹æ¯”è¾ƒå¤§ï¼Œéœ€è¦é‡æ–°ç¼–å†™commit messageã€‚\nä»¥ä¸Šæˆ‘ä»¬å°±å®Œæˆäº†ä¸€æ¬¡æ›´æ–°ã€‚\nå¦‚ä½•ä¿®æ”¹å†å²è®°å½•ä¸­çš„æäº¤ å¦‚æœå¾ˆä¸å·§ï¼Œç¤¾åŒºè¦æ±‚ä¿®æ”¹çš„æ˜¯top: filter .vscode folderè¿™ä¸ªæäº¤çš„å†…å®¹ï¼Œé‚£æ€ä¹ˆåŠï¼Œå› ä¸ºå®ƒä¸æ˜¯æœ€æ–°çš„æäº¤ï¼Œè€Œæ˜¯ä¸Šä¸€ä¸ªæäº¤ï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨git commit --amendæ¥ç›´æ¥å¯¹ä»–ä¿®æ”¹ï¼Œå¥½åœ¨ Git ååˆ†å¼ºå¤§ï¼Œä¸éœ€è¦æˆ‘ä»¬resetå°±å¯ä»¥å®Œæˆè¿™æ ·çš„å·¥ä½œã€‚\nåŒæ ·æˆ‘ä»¬ä¹Ÿåšä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼Œä¸º/.vscode/ä¹Ÿæ·»åŠ ä¸€ä¸ªæ³¨é‡Šã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°git rebaseè¿™ä¸ªå¼ºå¤§çš„å‘½ä»¤ã€‚æœ¬æ–‡åªä»‹ç»ä½¿ç”¨åˆ°çš„åŠŸèƒ½ï¼Œå…¶ä»–åŠŸèƒ½éœ€è¦å¤§å®¶è‡ªè¡Œæ‘¸ç´¢ã€‚\ngit rebase -i è¿™æ¡å‘½ä»¤ä¼šå¼¹å‡ºç¼–è¾‘çª—å£ï¼Œ-iå‚æ•°è¡¨ç¤ºä»¥äº¤äº’å¼æ–¹å¼è¿›è¡Œå˜åŸºï¼ˆrebaseï¼‰æ“ä½œã€‚å¼¹å‡ºçª—å£å†…å®¹å¦‚ä¸‹ï¼š\npick 7175772 top: filter .vscode folder pick 52b63f3 top: filter .cache folder # Rebase 8806855..52b63f3 onto 8806855 (2 commands) # # Commands: # p, pick = use commit # r, reword = use commit, but edit the commit message # e, edit = use commit, but stop for amending # s, squash = use commit, but meld into previous commit # f, fixup = like \u0026#34;squash\u0026#34;, but discard this commit\u0026#39;s log message # x, exec = run command (the rest of the line) using shell # d, drop = remove commit # # These lines can be re-ordered; they are executed from top to bottom. # # If you remove a line here THAT COMMIT WILL BE LOST. # # However, if you remove everything, the rebase will be aborted. # # Note that empty commits are commented out çª—å£ä¼šæ˜¾ç¤ºæ‰€æœ‰æœªæäº¤åˆ°è¿œç¨‹çš„ commitï¼Œä¸‹é¢çš„æ³¨é‡Šä¹Ÿå‘Šè¯‰äº†æˆ‘ä»¬è¯¥å¦‚ä½•ä½¿ç”¨ã€‚æˆ‘ä»¬æ‰¾åˆ°editçš„è¡Œï¼Œå¯ä»¥çœ‹åˆ°è§£é‡Šä¸ºä½¿ç”¨å½“å‰çš„ commitï¼Œä½†æ˜¯åœ¨å˜åŸºè¿‡ç¨‹ä¸­ä¼šåœä¸‹æ¥è®©æˆ‘ä»¬ä¿®æ”¹ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬ç¼–è¾‘å½“å‰çš„å†…å®¹å¦‚ä¸‹ï¼š\nedit 7175772 top: filter .vscode folder pick 52b63f3 top: filter .cache folder è¡¨ç¤ºæˆ‘ä»¬éœ€è¦ç¼–è¾‘å†å²è®°å½•ä¸­çš„top: filter .vscode folderæäº¤ï¼Œä½†æ˜¯å¦ä¸€ä¸ª commit æˆ‘ä»¬ä¸åšæ”¹å˜ã€‚ä¿å­˜å¹¶é€€å‡ºå½“å‰çª—å£åï¼Œä¼šæœ‰å¦‚ä¸‹æç¤ºã€‚\nStopped at 7175772... top: filter .vscode folder You can amend the commit now, with git commit --amend Once you are satisfied with your changes, run git rebase --continue æ ¹æ®æç¤ºï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€ç³»åˆ—ä¿®æ”¹äº†ï¼Œä¿®æ”¹å®Œä½¿ç”¨git commit --amendä¿å­˜ï¼Œå¦‚æœä¸€åˆ‡ç¬¦åˆè‡ªå·±è¦æ±‚äº†ï¼Œå†ä½¿ç”¨git rebase --continueå®Œæˆå˜åŸºæ“ä½œã€‚\næˆ‘ä»¬å…ˆä¿®æ”¹ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å·²ç»å›åˆ°äº†æ²¡æœ‰/.cache/çš„çŠ¶æ€ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€è¡Œæ³¨é‡Šï¼š\n# Object files *.o *.a *.dep #Build \u0026amp; install directories build/ install/ # Development friendly files tags cscope* # VSCode config file /.vscode/ git add .gitignore git commit --amend åŒæ ·å¼¹å‡ºçª—å£åæˆ‘ä»¬ç›´æ¥ä¿å­˜é€€å‡ºï¼Œå¦‚æœä¿®æ”¹å¹…åº¦è¾ƒå¤§ï¼Œå¯ä»¥è¿›ä¸€æ­¥è¡¥å……è¯´æ˜ã€‚ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç»§ç»­å®Œæˆå˜åŸºã€‚\ngit rebase --continue æ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸ä»…ä¿®æ”¹äº†å†å²è®°å½•ä¸­çš„ commitï¼Œè¿˜ä¿è¯äº†æœ€æ–°çš„ commit æ²¡æœ‰ä¸¢å¤±æˆ–è€…æ›´æ”¹ã€‚\nå‡†å¤‡æ›´æ–°ç‰ˆæœ¬çš„è¡¥ä¸é›† $ git format-patch -v2 --cover-letter -o update_gitignore/ master..update_gitignore-v1 update_gitignore/v2-0000-cover-letter.patch update_gitignore/v2-0001-top-filter-.vscode-folder.patch update_gitignore/v2-0002-top-filter-.cache-folder.patch --range-diff master..update_gitignore-v1 å‚æ•°å‘Šè¯‰ format-patch åœ¨ cover letter ä¸­åŒ…æ‹¬ update_gitignore-v1 å’Œ update_gitignore ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚ã€‚è¿™æœ‰åŠ©äºå‘Šè¯‰è¯„å®¡äººä½ çš„ v1 å’Œ v2 è¡¥ä¸ä¹‹é—´çš„å·®å¼‚ã€‚\n-v2 å‚æ•°å‘Šè¯‰ format-patch å°†ä½ çš„è¡¥ä¸è¾“å‡ºä¸º v2 ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°ä½ çš„ v2 ç‰ˆè¡¥ä¸éƒ½è¢«å‘½åä¸º v2-000n-my-commit-subject.patchã€‚-v2 ä¹Ÿä¼šå°†ä½ çš„è¡¥ä¸æ ¼å¼åŒ–ï¼Œåœ¨å‰é¢åŠ ä¸Š[PATCH v2]ï¼Œè€Œä¸æ˜¯[PATCH]ã€‚\nè¿è¡Œæ­¤å‘½ä»¤åï¼Œformat-patch ä¼šå°†è¡¥ä¸è¾“å‡ºåˆ° update_gitignore/ ç›®å½•ï¼Œä¸ v1 ç‰ˆçš„è¡¥ä¸ä¸€èµ·ã€‚ä½¿ç”¨ä¸€ä¸ªç›®å½•å¯ä»¥æ–¹ä¾¿åœ¨æ ¡å¯¹ v2 è¡¥ä¸æ—¶å‚è€ƒæ—§çš„ v1 è¡¥ä¸ï¼Œä½†ä½ éœ€è¦æ³¨æ„åªå‘é€ v2 è¡¥ä¸ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ update_gitignore/v2-.patchè¿™æ ·çš„æ¨¡å¼ï¼ˆè€Œä¸æ˜¯ update_gitignore/.patchï¼Œè¿™å°†åŒ¹é… v1 å’Œ v2 è¡¥ä¸ï¼‰ã€‚\nå†æ¬¡ç¼–è¾‘ä½ çš„ cover letterã€‚ç°åœ¨æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ—¶é—´æ¥æåŠä½ çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬å’Œç°åœ¨æœ‰ä»€ä¹ˆä¸åŒï¼Œå¦‚æœå®ƒæ˜¯é‡è¦çš„ä¸œè¥¿ã€‚ä½ ä¸éœ€è¦åœ¨ä½ çš„ç¬¬äºŒå° cover letter ä¸­ä½¿ç”¨å®Œå…¨ç›¸åŒçš„å†…å®¹ï¼›é‡ç‚¹æ˜¯å‘å®¡æŸ¥äººå‘˜è§£é‡Šä½ æ‰€åšçš„å¯èƒ½ä¸é‚£ä¹ˆæ˜æ˜¾çš„å˜åŒ–ã€‚\næˆ‘ä»¬å°±ç®€å•çš„å†™ä¸€ä¸‹æ·»åŠ äº†æ³¨é‡Šã€‚\nFrom 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001 From: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; Date: Fri, 18 Nov 2022 19:35:06 +0800 Subject: [PATCH v2 0/2] Update gitignore Add a comment for the folder name. Dominic Zhang (2): top: filter .vscode folder top: filter .cache folder .gitignore | 3 +++ 1 file changed, 3 insertions(+) -- 2.17.1 å‘é€æ›´æ–°ç‰ˆæœ¬æ—¶ä½ éœ€è¦å°†æ–°ç‰ˆæœ¬æŠ„é€ç»™æå‡ºå»ºè®®çš„äººï¼Œä½ å¯ä»¥åœ¨ä½ çš„ cover letter ä¸­ç›´æ¥æ·»åŠ è¿™äº›æŠ„é€è¡Œï¼Œåœ¨ Subject è¡Œä¸Šé¢å†™ä¸Šè¿™æ ·ä¸€è¡Œã€‚\nCC: Name \u0026lt;name@example.com\u0026gt; ä¾‹å¦‚ï¼ŒæŠŠæ›´æ–°çš„é‚®ä»¶æŠ„é€ç»™æˆ‘è‡ªå·±ï¼š\nFrom 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001 From: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; CC: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; Date: Fri, 18 Nov 2022 19:35:06 +0800 Subject: [PATCH v2 0/2] Update gitignore Add a comment for the folder name. Dominic Zhang (2): top: filter .vscode folder top: filter .cache folder .gitignore | 3 +++ 1 file changed, 3 insertions(+) -- 2.17.1 ç°åœ¨å†æ¬¡å‘é€ç”µå­é‚®ä»¶ï¼Œæ³¨æ„ä½ ä¼ å…¥çš„å‚æ•°ã€‚\ngit send-email --to target@example.com update_gitignore/v2-*.patch æ­å–œä½ å®Œæˆäº†ä¸€æ¬¡è¡¥ä¸ç‰ˆæœ¬æ›´æ–°ã€‚\nå¯¹äºä¸€äº›ç¤¾åŒºï¼Œè¦æ±‚æ›´æ–°çš„ç‰ˆæœ¬éœ€è¦åœ¨åŒä¸€ä¸ª thread ä¸Šè¿›è¡Œã€‚å¦‚ä¸‹ç¤ºä¾‹è¿™æ ·ï¼š\n[PATCH 0/2] Here is what I did... [PATCH 1/2] Clean up and tests [PATCH 2/2] Implementation [PATCH v2 0/3] Here is a reroll [PATCH v2 1/3] Clean up [PATCH v2 2/3] New tests [PATCH v2 3/3] Implementation å°±æ˜¯æ›´æ–°çš„ç‰ˆæœ¬éœ€è¦å…³è”åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè€Œä¸èƒ½ä½œä¸ºå•ç‹¬çš„ä¸€ä¸ªåˆ—è¡¨ã€‚\nä½ è¿˜éœ€è¦å»æ‰¾åˆ°ä½ ä¹‹å‰çš„ cover letter çš„ Message-Idã€‚ä½ å¯ä»¥åœ¨å‘é€ç¬¬ä¸€ä¸ªè¡¥ä¸ç³»åˆ—æ—¶ï¼Œä» git send-email çš„è¾“å‡ºä¸­è®°ä¸‹å®ƒã€‚ ä¾‹å¦‚ï¼š\n$ git send-email --to Dominic Zhang@gmail.com update_gitignore/v2-*.patch update_gitignore/v2-0000-cover-letter.patch update_gitignore/v2-0001-top-filter-.vscode-folder.patch update_gitignore/v2-0002-top-filter-.cache-folder.patch (mbox) Adding cc: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt; from line \u0026#39;From: Dominic Zhang \u0026lt;Dominic Zhang@gmail.com\u0026gt;\u0026#39; (mbox) Adding cc: Dominic Zhang \u0026lt;254758318@qq.com\u0026gt; from line \u0026#39;CC: Dominic Zhang \u0026lt;254758318@qq.com\u0026gt;\u0026#39; From: Dominic Zhang@gmail.com To: Dominic Zhang@gmail.com Cc: Dominic Zhang \u0026lt;254758318@qq.com\u0026gt; Subject: [PATCH v2 0/2] Update gitignore Date: Fri, 18 Nov 2022 19:54:54 +0800 Message-Id: \u0026lt;20221118115456.2242-1-Dominic Zhang@gmail.com\u0026gt; X-Mailer: git-send-email 2.17.1 ä½ ä¹Ÿå¯ä»¥ä»ç¤¾åŒºçš„é‚®ç®±åˆ—è¡¨ä¸­æ‰¾åˆ° Message IDï¼Œå› ä¸º OpenSBI ä¸è¦æ±‚åœ¨åŒä¸€ä¸ª thread å›å¤ï¼Œæ‰€ä»¥æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¿™é‡Œä»¥Git ç¤¾åŒºçš„é‚®ç®±åˆ—è¡¨ä¸ºä¾‹ã€‚éšä¾¿ç‚¹å‡»ä¸€ä¸ªè¡¥ä¸ä¸»é¢˜ï¼Œåœ¨é¡µé¢ä¸­æ‰¾åˆ°permalinkæˆ–è€…rawï¼Œç‚¹å‡»æ‰“å¼€å³å¯æ‰¾åˆ° Message ID ä¿¡æ¯ã€‚\nå®ƒçš„æ ¼å¼ä¸€èˆ¬å¦‚ä¸‹ï¼š\nMessage-Id: \u0026lt;foo.12345.author@example.com\u0026gt; \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¦‚æœè¦å‘é€æ›´æ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æ‰¾åˆ°ä¸Šä¸€ç‰ˆæœ¬çš„ Message IDã€‚å¦‚å‘é€çš„æ˜¯ V3 ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ° V2 ç‰ˆæœ¬çš„ Message IDã€‚å¹¶ä¸”åœ¨å‘é€é‚®ä»¶æ—¶æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š\n$ git send-email --to Dominic Zhang@gmail.com --in-reply-to=\u0026#34;\u0026lt;foo.12345.author@example.com\u0026gt;\u0026#34; update_gitignore/v2-*.patch åªæœ‰ä¸€ä¸ª Patch çš„æ›´æ”¹ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ çš„éå¸¸å°çš„å˜åŒ–å¯èƒ½åªåŒ…æ‹¬ä¸€ä¸ªè¡¥ä¸ã€‚è¿™æ—¶ï¼Œä½ åªéœ€è¦å‘é€ä¸€å°é‚®ä»¶ã€‚ä½ çš„æäº¤ä¿¡æ¯åº”è¯¥å·²ç»å¾ˆæœ‰æ„ä¹‰äº†ï¼Œä½ åªéœ€è¦ç”Ÿæˆè¡¥ä¸æ–‡ä»¶å°±å¯ä»¥å‘é€äº†ã€‚\ngit format-patch -o update_gitignore/ HEAD^ HEAD^å‚æ•°è¡¨ç¤ºç”Ÿæˆä¸ä¸Šä¸€ä¸ªæäº¤ä¹‹é—´çš„å·®å¼‚ã€‚ ","permalink":"https://lifeislife.cn/posts/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%90%91%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E6%8F%90patch/","summary":"\u003ch1 id=\"æäº¤è¡¥ä¸çš„æœ€ä½³å®è·µ\"\u003eæäº¤è¡¥ä¸çš„æœ€ä½³å®è·µ\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæœ¬æ–‡ç¿»è¯‘è‡ªå®˜æ–¹æ•™ç¨‹\u003ca href=\"https://git-scm.com/docs/MyFirstContribution\"\u003eGit - MyFirstContribution\u003c/a\u003eï¼ŒåŸæ–‡åŒ…å«å¼€å‘åˆ°æäº¤çš„æ•´ä¸ªå‘¨æœŸã€‚ä½†æ˜¯æƒ³è¦æäº¤çš„äººåº”è¯¥éƒ½å·²ç»å¼€å‘å®Œä»£ç äº†ï¼Œæ‰€ä»¥æœ¬æ–‡ç”¨è‡ªå·±çš„å®é™…ä¾‹å­é‡æ–°å†™äº†ä¸€éï¼Œçœå»äº†å¼€å‘ä»£ç ç­‰æµç¨‹ï¼Œé‡ç‚¹ä»‹ç»å¦‚ä½•ä½¿ç”¨ git send-emailã€‚\u003c/p\u003e","title":"æ‰‹æŠŠæ‰‹æ•™ä½ å‘å¼€æºç¤¾åŒºæ Patch"},{"content":"ç¡®è®¤ Debian ç‰ˆæœ¬ $ cat /etc/os-release PRETTY_NAME=\u0026#34;Debian GNU/Linux 10 (buster)\u0026#34; NAME=\u0026#34;Debian GNU/Linux\u0026#34; VERSION_ID=\u0026#34;10\u0026#34; VERSION=\u0026#34;10 (buster)\u0026#34; VERSION_CODENAME=buster ID=debian HOME_URL=\u0026#34;https://www.debian.org/\u0026#34; SUPPORT_URL=\u0026#34;https://www.debian.org/support\u0026#34; BUG_REPORT_URL=\u0026#34;https://bugs.debian.org/\u0026#34; æ‹¬å·é‡Œçš„busterå°±æ˜¯ç‰ˆæœ¬ä¿¡æ¯ã€‚\nè·å–é•œåƒåœ°å€ æ‰“å¼€debian | æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼Œé€‰æ‹©busterç‰ˆæœ¬ï¼Œå¤åˆ¶æ‰€æœ‰é•œåƒåœ°å€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image # é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free å¤‡ä»½åŸæ–‡ä»¶ è¿™ä¹Ÿç®—æ˜¯ç³»ç»Ÿæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜æ˜¯ä¿é™©ä¸€ç‚¹ï¼Œå‡ºé”™äº†å†æ”¹å›æ¥ã€‚\nsudo cp /etc/apt/sources.list /etc/apt/sources.list.backup æ‰“å¼€å¹¶ä¿®æ”¹ sudo vim /etc/apt/sources.list vimç”¨çš„ä¸ä¹ æƒ¯çš„ä¼°è®¡ä¼šå’Œæˆ‘ä¸€æ ·æ‰¾å…¨é€‰å†…å®¹æ€ä¹ˆæ“ä½œã€‚æ•™ç»™ä½ äº† åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œå°±æ˜¯æŒ‰ä¸€ä¸‹escé”®ï¼Œç„¶åè¾“å…¥ggvGã€‚å…·ä½“ä»€ä¹ˆå«ä¹‰çœ‹VIM ç¬”è®°å§ï¼Œé€‰æ‹©åç›´æ¥deleteåˆ é™¤ï¼Œé•œåƒåœ°å€ç²˜è´´è¿›å»ã€‚ä¿å­˜é€€å‡ºã€‚\næ›´æ–° sudo apt-get update sudo apt-get dist-upgrade sudo apt-get upgrade ","permalink":"https://lifeislife.cn/posts/linux%E6%9B%B4%E6%8D%A2debian%E8%BD%AF%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%BA%90/","summary":"\u003ch2 id=\"ç¡®è®¤-debian-ç‰ˆæœ¬\"\u003eç¡®è®¤ Debian ç‰ˆæœ¬\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ cat /etc/os-release               \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003ePRETTY_NAME\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;Debian GNU/Linux 10 (buster)\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003eNAME\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;Debian GNU/Linux\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003eVERSION_ID\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003eVERSION\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;10 (buster)\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003eVERSION_CODENAME\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003ebuster\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003eID\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003edebian\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003eHOME_URL\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;https://www.debian.org/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003eSUPPORT_URL\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;https://www.debian.org/support\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003eBUG_REPORT_URL\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;https://bugs.debian.org/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ‹¬å·é‡Œçš„\u003ccode\u003ebuster\u003c/code\u003eå°±æ˜¯ç‰ˆæœ¬ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003ch2 id=\"è·å–é•œåƒåœ°å€\"\u003eè·å–é•œåƒåœ°å€\u003c/h2\u003e\n\u003cp\u003eæ‰“å¼€\u003ca href=\"https://mirrors.tuna.tsinghua.edu.cn/help/debian/\"\u003edebian | æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™\u003c/a\u003eï¼Œé€‰æ‹©\u003ccode\u003ebuster\u003c/code\u003eç‰ˆæœ¬ï¼Œå¤åˆ¶æ‰€æœ‰é•œåƒåœ°å€ã€‚\u003c/p\u003e","title":"æ›´æ¢ Debian è½¯ä»¶æ›´æ–°æº"},{"content":"è½¬è½½è‡ªhuth (Thomas Huth)çš„ä¸€ç¯‡æ–‡ç« ï¼ŒåŸæ–‡å·²ç» 404ï¼Œä»ç½‘é¡µå¿«ç…§ä¸­æ‰¾å›çš„æ–‡ç« ã€‚\nNote that this is a blog post for (new) QEMU developers. If you are just interested in using QEMU, you can certainly skip this text. Otherwise, in case you have ever been in touch with the QEMU device model (\u0026ldquo;qdev\u0026rdquo;), you are likely aware of the basic qdev code boilerplate already:\nstatic void mydev_realize(DeviceState *dev, Error **errp) { } static void mydev_instance_init(Object *obj) { } static Property mydev_properties[] = { DEFINE_PROP_xxx(\u0026#34;myprop\u0026#34;, MyDevState, field, ...), DEFINE_PROP_END_OF_LIST(), }; static void mydev_class_init(ObjectClass *oc, void *data) { DeviceClass *dc = DEVICE_CLASS(oc); dc-\u0026gt;realize = mydev_realize; dc-\u0026gt;desc = \u0026#34;My cool device\u0026#34;; dc-\u0026gt;props = mydev_properties; } static const TypeInfo mydev_info = { .name = TYPE_MYDEV, .parent = TYPE_SYS_BUS_DEVICE, .instance_size = sizeof(mydev_state), .instance_init = mydev_instance_init, .class_init = mydev_class_init, }; static void mydev_register_types(void) { type_register_static(\u0026amp;mydev_info); } type_init(mydev_register_types) There are three different initialization functions involved here, the class_init, the instance_init and the realize function. While it is quite obvious to distinguish the class_init function from the two others (it is used for initializing the class data, not the data that is used for an instance â€¦ this is similar to the object model with classes and instances in C++), I initially always wondered about the difference between the instance_init() and the realize() functions. Having fixed quite a lot of related bugs in the past months in the QEMU code base, I now know that a lot of other people are also not properly aware of the difference here, so I think it is now time to write down some information that I\u0026rsquo;m now aware of, to make sure that I don\u0026rsquo;t forget about this again, and maybe help others to avoid related bugs in the future ;-)\nFirst it is of course always a good idea to have a look at the documentation. While the documentation of TypeInfo (where instance_init() is defined) is not very helpful to understand the differences, the documentation of DeviceClass (where realize() is defined) has some more useful information: You can learn here that the object instantiation is done first, before the device is realized, i.e. the instance_init() function is called first, and the realize() function is called afterwards. The former must not fail, while the latter can return an error to its caller via a pointer to an â€œErrorâ€ object pointer.\nSo the basic idea here is that device objects are first instantiated, then these objects can be inspected for their interfaces and their creators can set up their properties to configure their settings and wire them up with other devices, before the device finally becomes \u0026ldquo;active\u0026rdquo; by being realized. It is important here to notice that devices can be instantiated (and also finalized) without being realized! This happens for example if the device is introspected: If you enter for example device_add xyz,help at the HMP monitor, or if you send the device-list-properties QOM command to QEMU to retrieve the device\u0026rsquo;s properties, QEMU creates a temporary instance of the device to query the properties of the object, without realizing it. The object gets destroyed (\u0026ldquo;finalized\u0026rdquo;) immediately afterwards.\nKnowing this, you can avoid a set of bugs which could be found with a couple of devices in the past:\nIf you want your device to provide properties for other parts of the QEMU code or for the users, and you want to add those properties via one of the many object_property_add*() functions of QEMU (instead of using the â€œpropsâ€ field of the DeviceClass), then you should do this in the instance_init() and not in the realize() function. Otherwise the properties won\u0026rsquo;t show up when the user runs --device xyz,help or the device-list-properties QOM command to get some information about your device. instance_init() functions must really never fail, i.e. also not call abort() or exit(). Otherwise QEMU can terminate unexpectedly when a user simply wanted to have a look at the list of device properties with device_add xyz,help or the device-list-properties QOM command. If your device cannot work in certain circumstances, check for the error condition in the realize() function instead and return with an appropriate error there. Never assume that your device is always instantiated only with the machine that it was designed for. It\u0026rsquo;s of course a good idea to set the â€œuser_creatable = falseâ€ flag in the DeviceClass of your device if your device cannot be plugged in arbitrary machines. But device introspection can still happen at any time, with any machine. So if you wrote a device called \u0026ldquo;mydev-a\u0026rdquo; that only works with --machine A, the user still can start QEMU with the option --machine B instead and then run device_add mydev-a,help or the device-list-properties QOM command. The instance_init() function of your device will be called to create a temporary instance of your device, even though the base machine is B and not A here. So you especially should take care to not depend on the availability of certain buses or other devices in the instance_init() function, nor use things like serial_hd() or nd_table[] in your instance_init() function, since these might (and should) have been used by the machine init function already. If your device needs to be wired up, provide properties as interfaces to the outside and let the creator of your device (e.g. the machine init code) wire your device between the device instantiation and the realize phase instead. Make sure that your device leaves a clean state after a temporary instance is destroyed again, i.e. don\u0026rsquo;t assume that there will be only one instance of your device which is created at the beginning right after QEMU has been started and is destroyed at the very end before QEMU terminates. Thus do not assume that the things that you do in your instance_init() don\u0026rsquo;t need explicit clean-up since the device instance will only be destroyed when QEMU terminates. Device instances can be created and destroyed at any time, so when the device is finalized, you must not leave any dangling pointers or references to your device behind you, e.g. in the QOM tree. When you create other objects in your instance_init() function, make sure to set proper parents of these objects or use an instance_finalize() function, so that the created objects get cleaned up correctly again when your device is destroyed. All in all, if you write code for a new QEMU device, it is likely a good idea to use the instance_init() function only for e.g. creating properties and other things that are required before device realization, and then do the main work in the realize() function instead.\n","permalink":"https://lifeislife.cn/posts/qemu-s-instance-init-vs-realize/","summary":"\u003cp\u003eè½¬è½½è‡ª\u003ca href=\"https://github.com/huth\"\u003ehuth (Thomas Huth)\u003c/a\u003eçš„ä¸€ç¯‡æ–‡ç« ï¼ŒåŸæ–‡å·²ç» 404ï¼Œä»ç½‘é¡µå¿«ç…§ä¸­æ‰¾å›çš„æ–‡ç« ã€‚\u003c/p\u003e\n\u003cp\u003eNote that this is a blog post for (new) QEMU developers. If you are just interested in using QEMU, you can certainly skip this text. Otherwise, in case you have ever been in touch with the QEMU device model (\u0026ldquo;qdev\u0026rdquo;), you are likely aware of the basic qdev code boilerplate already:\u003c/p\u003e","title":"QEMU's instance_init() vs. realize()"},{"content":"å¼•è¨€ ç»Ÿä¸€å¯æ‰©å±•å›ºä»¶æ¥å£ (UEFI) è§„èŒƒæè¿°äº†æ“ä½œç³»ç»Ÿå’Œå¹³å°å›ºä»¶ä¹‹é—´çš„æ¥å£ã€‚UEFI ä¹‹å‰æ˜¯å¯æ‰©å±•å›ºä»¶æ¥å£è§„èŒƒ 1.10 (EFI)ã€‚å› æ­¤ï¼Œä¸€äº›ä»£ç å’ŒæŸäº›åè®®åç§°ä¿ç•™äº† EFI åç§°ã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œæœ¬è§„èŒƒä¸­çš„ EFI åç§°å¯å‡å®šä¸º UEFI çš„ä¸€éƒ¨åˆ†ã€‚\nè¯¥æ¥å£é‡‡ç”¨æ•°æ®è¡¨çš„å½¢å¼ï¼Œå…¶ä¸­åŒ…å«ä¸å¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä»¥åŠå¯ä¾› OS åŠ è½½ç¨‹åºå’Œ OS ä½¿ç”¨çš„å¼•å¯¼å’Œè¿è¡Œæ—¶æœåŠ¡è°ƒç”¨ã€‚å®ƒä»¬å…±åŒæä¾›äº†ä¸€ä¸ªå¼•å¯¼æ“ä½œç³»ç»Ÿçš„æ ‡å‡†ç¯å¢ƒã€‚æœ¬è§„èŒƒæ˜¯ä½œä¸ºä¸€ä¸ªçº¯ç²¹çš„æ¥å£è§„èŒƒè®¾è®¡çš„ã€‚å› æ­¤ï¼Œè¯¥è§„èŒƒå®šä¹‰äº†å¹³å°å›ºä»¶å¿…é¡»å®ç°çš„æ¥å£å’Œç»“æ„é›†ã€‚ç±»ä¼¼åœ°ï¼Œè¯¥è§„èŒƒå®šä¹‰äº†æ“ä½œç³»ç»Ÿåœ¨å¼•å¯¼æ—¶å¯èƒ½ä½¿ç”¨çš„ä¸€ç»„æ¥å£å’Œç»“æ„ã€‚æ— è®ºæ˜¯å›ºä»¶å¼€å‘è€…é€‰æ‹©å¦‚ä½•å®ç°æ‰€éœ€çš„å…ƒç´ ï¼Œè¿˜æ˜¯æ“ä½œç³»ç»Ÿå¼€å‘è€…é€‰æ‹©å¦‚ä½•åˆ©ç”¨è¿™äº›æ¥å£å’Œç»“æ„ï¼Œéƒ½ç”±å¼€å‘è€…è‡ªå·±å†³å®šã€‚\nè¯¥è§„èŒƒçš„ç›®çš„æ˜¯å®šä¹‰ä¸€ç§æ–¹æ³•ï¼Œä½¿æ“ä½œç³»ç»Ÿå’Œå¹³å°å›ºä»¶ä»…é€šä¿¡æ”¯æŒæ“ä½œç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹æ‰€å¿…éœ€çš„ä¿¡æ¯ã€‚è¿™æ˜¯é€šè¿‡å¹³å°å’Œå›ºä»¶æä¾›ç»™æ“ä½œç³»ç»Ÿçš„è½¯ä»¶å¯è§æ¥å£çš„æ­£å¼å’Œå®Œæ•´çš„æŠ½è±¡è§„èŒƒæ¥å®ç°çš„ã€‚\næœ¬è§„èŒƒçš„ç›®çš„æ˜¯ä¸ºæ“ä½œç³»ç»Ÿå’Œå¹³å°å›ºä»¶å®šä¹‰ä¸€ç§æ–¹å¼ï¼Œä»¥ä»…ä¼ é€’æ”¯æŒæ“ä½œç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹æ‰€éœ€çš„ä¿¡æ¯ã€‚è¿™æ˜¯é€šè¿‡å¹³å°å’Œå›ºä»¶å‘ˆç°ç»™æ“ä½œç³»ç»Ÿçš„è½¯ä»¶å¯è§æ¥å£çš„æŠ½è±¡è§„èŒƒæ¥å®ç°çš„ã€‚\nä½¿ç”¨è¿™ä¸€æ­£å¼å®šä¹‰ï¼Œæ—¨åœ¨è¿è¡Œåœ¨ä¸å—æ”¯æŒçš„å¤„ç†å™¨è§„èŒƒå…¼å®¹çš„å¹³å°ä¸Šçš„æ”¶ç¼©åŒ…è£…æ“ä½œç³»ç»Ÿå°†èƒ½å¤Ÿåœ¨å„ç§ç³»ç»Ÿè®¾è®¡ä¸Šå¯åŠ¨ï¼Œè€Œæ— éœ€è¿›ä¸€æ­¥çš„å¹³å°æˆ–æ“ä½œç³»ç»Ÿå®šåˆ¶ã€‚è¯¥å®šä¹‰è¿˜å…è®¸å¹³å°åˆ›æ–°å¼•å…¥æ–°ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œä»¥å¢å¼ºå¹³å°çš„èƒ½åŠ›ï¼Œè€Œä¸éœ€è¦æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„å¼•å¯¼é¡ºåºç¼–å†™æ–°ä»£ç ã€‚\næ­¤å¤–ï¼ŒæŠ½è±¡è§„èŒƒå¼€è¾Ÿäº†ä¸€æ¡æ›¿ä»£é—ç•™è®¾å¤‡å’Œå›ºä»¶ä»£ç çš„è·¯å¾„ã€‚æ–°çš„è®¾å¤‡ç±»å‹å’Œç›¸å…³ä»£ç å¯ä»¥é€šè¿‡ç›¸åŒå®šä¹‰çš„æŠ½è±¡æ¥å£æä¾›åŒç­‰çš„åŠŸèƒ½ï¼ŒåŒæ ·ä¸ä¼šå½±å“ OS å¼•å¯¼æ”¯æŒä»£ç ã€‚\nè¯¥è§„èŒƒé€‚ç”¨äºä»ç§»åŠ¨ç³»ç»Ÿåˆ°æœåŠ¡å™¨çš„æ‰€æœ‰ç¡¬ä»¶å¹³å°ã€‚è¯¥è§„èŒƒæä¾›äº†ä¸€ç»„æ ¸å¿ƒæœåŠ¡ä»¥åŠä¸€ç»„åè®®æ¥å£ã€‚åè®®æ¥å£çš„é€‰æ‹©å¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»è€Œå‘å±•ï¼Œå¹¶é’ˆå¯¹ä¸åŒçš„å¹³å°å¸‚åœºç»†åˆ†è¿›è¡Œä¼˜åŒ–ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¯¥è§„èŒƒå…è®¸ oem æä¾›æœ€å¤§é™åº¦çš„å¯æ‰©å±•æ€§å’Œå®šåˆ¶èƒ½åŠ›ï¼Œä»¥å®ç°å·®å¼‚åŒ–ã€‚åœ¨è¿™æ–¹é¢ï¼ŒUEFI çš„ç›®çš„æ˜¯å®šä¹‰ä¸€ä¸ªä»ä¼ ç»Ÿçš„â€œPC-ATâ€é£æ ¼çš„å¼•å¯¼ä¸–ç•Œåˆ°ä¸€ä¸ªæ²¡æœ‰é—ç•™ API çš„ç¯å¢ƒçš„è¿›åŒ–è·¯å¾„ã€‚\nUEFI é©±åŠ¨æ¨¡å‹æ‰©å±• å¯¹å¯åŠ¨è®¾å¤‡çš„è®¿é—®æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„åè®®æ¥å£æä¾›çš„ã€‚UEFI é©±åŠ¨æ¨¡å‹çš„ä¸€ä¸ªç›®çš„æ˜¯ä¸º \u0026ldquo;PC-AT\u0026quot;å¼çš„ Option ROMï¼ˆTODOï¼‰æä¾›ä¸€ä¸ªæ›¿ä»£å“ã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œå†™åœ¨ UEFI é©±åŠ¨æ¨¡å‹ä¸Šçš„é©±åŠ¨ï¼Œè¢«è®¾è®¡ä¸ºåœ¨é¢„å¯åŠ¨ç¯å¢ƒä¸­è®¿é—®å¯åŠ¨è®¾å¤‡ã€‚å®ƒä»¬å¹¶ä¸æ˜¯ä¸ºäº†å–ä»£é«˜æ€§èƒ½çš„ã€é’ˆå¯¹æ“ä½œç³»ç»Ÿçš„é©±åŠ¨ç¨‹åºã€‚\nUEFI é©±åŠ¨æ¨¡å‹è¢«è®¾è®¡ä¸ºæ”¯æŒæ‰§è¡Œæ¨¡å—åŒ–çš„ä»£ç ï¼Œä¹Ÿè¢«ç§°ä¸ºé©±åŠ¨ï¼Œåœ¨é¢„å¯åŠ¨ç¯å¢ƒä¸­è¿è¡Œã€‚è¿™äº›é©±åŠ¨ç¨‹åºå¯ä»¥ç®¡ç†æˆ–æ§åˆ¶å¹³å°ä¸Šçš„ç¡¬ä»¶æ€»çº¿å’Œè®¾å¤‡ï¼Œä¹Ÿå¯ä»¥æä¾›ä¸€äº›è½¯ä»¶è¡ç”Ÿçš„ã€å¹³å°ç‰¹å®šçš„æœåŠ¡ã€‚\nUEFI é©±åŠ¨æ¨¡å‹è¿˜åŒ…å«äº† UEFI é©±åŠ¨ç¼–å†™è€…æ‰€éœ€çš„ä¿¡æ¯ï¼Œä»¥è®¾è®¡å’Œå®ç°å¹³å°å¯åŠ¨ UEFI å…¼å®¹çš„æ“ä½œç³»ç»Ÿå¯èƒ½éœ€è¦çš„ä»»ä½•æ€»çº¿é©±åŠ¨å’Œè®¾å¤‡é©±åŠ¨çš„ç»„åˆã€‚\nUEFI é©±åŠ¨æ¨¡å‹è¢«è®¾è®¡ä¸ºé€šç”¨çš„ï¼Œå¯ä»¥é€‚åº”ä»»ä½•ç±»å‹çš„æ€»çº¿æˆ–è®¾å¤‡ã€‚UEFI è§„èŒƒæè¿°äº†å¦‚ä½•ç¼–å†™ PCI æ€»çº¿é©±åŠ¨ç¨‹åºã€PCI è®¾å¤‡é©±åŠ¨ç¨‹åºã€USB æ€»çº¿é©±åŠ¨ç¨‹åºã€USB è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œ SCSI é©±åŠ¨ç¨‹åºã€‚æä¾›äº†å…è®¸å°† UEFI é©±åŠ¨ç¨‹åºå­˜å‚¨åœ¨ PCI Option ROM ä¸­çš„å…¶ä»–è¯¦ç»†ä¿¡æ¯ï¼ŒåŒæ—¶ä¿æŒäº†ä¸æ—§ Option ROM é•œåƒçš„å…¼å®¹æ€§ã€‚\nUEFI è§„èŒƒçš„ä¸€ä¸ªè®¾è®¡ç›®æ ‡æ˜¯ä½¿é©±åŠ¨é•œåƒå°½å¯èƒ½çš„å°ã€‚ç„¶è€Œï¼Œå¦‚æœä¸€ä¸ªé©±åŠ¨ç¨‹åºéœ€è¦æ”¯æŒå¤šä¸ªå¤„ç†å™¨æ¶æ„ï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦ä¸ºæ¯ä¸ªæ”¯æŒçš„å¤„ç†å™¨æ¶æ„æä¾›ä¸€ä¸ªé©±åŠ¨ç¨‹åºå¯¹è±¡æ–‡ä»¶ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªç©ºé—´é—®é¢˜ï¼Œæœ¬è§„èŒƒè¿˜å®šä¹‰äº† EFI å­—èŠ‚ä»£ç è™šæ‹Ÿæœºï¼ˆEFI Byte Code Virtual Machineï¼‰ã€‚ä¸€ä¸ª UEFI é©±åŠ¨å¯ä»¥è¢«ç¼–è¯‘æˆä¸€ä¸ª EFI å­—èŠ‚ä»£ç å¯¹è±¡æ–‡ä»¶ã€‚UEFI Specification-complaintï¼ˆTODOï¼‰çš„å›ºä»¶å¿…é¡»åŒ…å«ä¸€ä¸ª EFI å­—èŠ‚ä»£ç è§£é‡Šå™¨ã€‚è¿™ä½¿å¾—æ”¯æŒå¤šç§å¤„ç†å™¨æ¶æ„çš„å•ä¸€ EFI å­—èŠ‚ä»£ç å¯¹è±¡æ–‡ä»¶å¯ä»¥è¢«è¿å‡ºã€‚å¦ä¸€ç§èŠ‚çœç©ºé—´çš„æŠ€æœ¯æ˜¯ä½¿ç”¨å‹ç¼©ã€‚è¯¥è§„èŒƒå®šä¹‰äº†å‹ç¼©å’Œè§£å‹ç®—æ³•ï¼Œå¯ç”¨äºå‡å°‘ UEFI é©±åŠ¨ç¨‹åºçš„å¤§å°ï¼Œä»è€Œå‡å°‘ UEFI é©±åŠ¨ç¨‹åºå­˜å‚¨åœ¨ ROM è®¾å¤‡ä¸­æ—¶çš„å¼€é”€ã€‚\nOSVã€IHVã€OEM å’Œå›ºä»¶ä¾›åº”å•†å¯ä»¥ä½¿ç”¨ UEFI è§„èŒƒä¸­åŒ…å«çš„ä¿¡æ¯æ¥è®¾è®¡å’Œå®ç°ç¬¦åˆæœ¬è§„èŒƒçš„å›ºä»¶ã€ç”Ÿæˆæ ‡å‡†åè®®æ¥å£çš„é©±åŠ¨ç¨‹åºä»¥åŠå¯ç”¨äºå¼•å¯¼ UEFI å…¼å®¹çš„æ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºæ“ä½œç³»ç»Ÿã€‚\nç« èŠ‚å®‰æ’ æœ¬è§„èŒƒçš„ç« èŠ‚ç»„ç»‡å¦‚ä¸‹ï¼š\nç« èŠ‚å å†…å®¹ å¼•è¨€/æ¦‚è¿° ä»‹ç» UEFI è§„èŒƒï¼Œå¹¶æè¿° UEFI çš„ä¸»è¦ç»„ä»¶ã€‚ å¯åŠ¨ç®¡ç†å™¨ ç®¡ç†å™¨ç”¨äºåŠ è½½å†™å…¥æ­¤è§„èŒƒçš„é©±åŠ¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºã€‚ EFI ç³»ç»Ÿè¡¨å’Œåˆ†åŒº æè¿°äº†ä¸€ä¸ª EFI ç³»ç»Ÿè¡¨ï¼Œå®ƒè¢«ä¼ é€’ç»™æ¯ä¸ªå…¼å®¹çš„é©±åŠ¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªåŸºäº GUID çš„åˆ†åŒºæ–¹æ¡ˆã€‚ å—è½¬æ¢è¡¨ ç”¨äºæ‰§è¡Œå— I/O çš„å¸ƒå±€å’Œè§„åˆ™é›†ï¼Œå¯æä¾›å•ä¸ªå—çš„æ–­ç”µå†™å…¥åŸå­æ€§ã€‚ å¼•å¯¼æœåŠ¡ åŒ…å«åœ¨å¼•å¯¼æ“ä½œç³»ç»Ÿä¹‹å‰å­˜åœ¨äº UEFI å…¼å®¹ç³»ç»Ÿä¸­çš„åŸºæœ¬æœåŠ¡çš„å®šä¹‰ã€‚ è¿è¡Œæ—¶æœåŠ¡ åŒ…å«åœ¨æ“ä½œç³»ç»Ÿå¯åŠ¨ä¹‹å‰å’Œä¹‹åå­˜åœ¨äºå…¼å®¹ç³»ç»Ÿä¸­çš„åŸºæœ¬æœåŠ¡çš„å®šä¹‰ã€‚ åè®® EFI åŠ è½½å›¾åƒåè®®æè¿°å·²åŠ è½½åˆ°å†…å­˜çš„ UEFI é•œåƒã€‚ è®¾å¤‡è·¯å¾„åè®®æä¾›äº†åœ¨ UEFI ç¯å¢ƒä¸­æ„å»ºå’Œç®¡ç†è®¾å¤‡è·¯å¾„æ‰€éœ€çš„ä¿¡æ¯ã€‚ UEFI é©±åŠ¨æ¨¡å‹æè¿°äº†ä¸€ç»„æœåŠ¡å’Œåè®®ï¼Œé€‚ç”¨äºæ¯ä¸ªæ€»çº¿å’Œè®¾å¤‡ç±»å‹ã€‚ æ§åˆ¶å°æ”¯æŒåè®®å®šä¹‰äº†I/Oåè®®ï¼Œå¤„ç†ç³»ç»Ÿç”¨æˆ·åœ¨å¯åŠ¨æœåŠ¡ç¯å¢ƒä¸­æ‰§è¡Œçš„åŸºäºæ–‡æœ¬çš„ä¿¡æ¯çš„è¾“å…¥å’Œè¾“å‡ºã€‚ åª’ä»‹è®¿é—®åè®®å®šä¹‰äº†åŠ è½½æ–‡ä»¶åè®®ï¼Œæ–‡ä»¶ç³»ç»Ÿæ ¼å¼å’Œåª’ä»‹æ ¼å¼å¤„ç†å¯ç§»åŠ¨åª’ä»‹ã€‚ PCI æ€»çº¿æ”¯æŒåè®®å®šä¹‰ PCI æ€»çº¿é©±åŠ¨ç¨‹åºï¼ŒPCI è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œ PCI Option ROM å¸ƒå±€ã€‚æ‰€æè¿°çš„åè®®åŒ…æ‹¬ PCI æ ¹æ¡¥ I/O åè®®å’Œ PCI I/Oåè®®ã€‚ SCSI é©±åŠ¨ç¨‹åºæ¨¡å‹å’Œæ€»çº¿æ”¯æŒå®šä¹‰äº† SCSI I/Oåè®®å’Œæ‰©å±•SCSI Pass Thru åè®®ï¼Œç”¨äºæŠ½è±¡è®¿é—®ç”± SCSI ä¸»æœºæ§åˆ¶å™¨äº§ç”Ÿçš„ SCSI é€šé“ã€‚ iSCSIåè®®å®šä¹‰äº†é€šè¿‡TCP/IPä¼ è¾“SCSIæ•°æ®ã€‚ USB æ”¯æŒåè®®å®šä¹‰äº† USB æ€»çº¿é©±åŠ¨ç¨‹åºå’Œ USB è®¾å¤‡é©±åŠ¨ç¨‹åºã€‚ è°ƒè¯•å™¨æ”¯æŒåè®®æè¿°äº†ä¸€ç»„å¯é€‰çš„åè®®ï¼Œæä¾›æ‰€éœ€çš„æœåŠ¡ï¼Œä»¥å®ç°ä¸€ä¸ªæºçº§è°ƒè¯•å™¨çš„ UEFI ç¯å¢ƒã€‚ å‹ç¼©ç®—æ³•è§„èŒƒè¯¦ç»†æè¿°äº†å‹ç¼©/è§£å‹ç¼©ç®—æ³•ï¼Œå¤–åŠ ä¸€ä¸ªæ ‡å‡†çš„EFIè§£å‹ç¼©æ¥å£ï¼Œç”¨äºå¯åŠ¨æ—¶ä½¿ç”¨ã€‚ ACPI åè®®å¯ç”¨äºä»å¹³å°ä¸Šå®‰è£…æˆ–åˆ é™¤ ACPI è¡¨ã€‚ å­—ç¬¦ä¸²æœåŠ¡ï¼šUnicode æ’åºåè®®å…è®¸åœ¨å¯åŠ¨æœåŠ¡ç¯å¢ƒä¸­è¿è¡Œçš„ä»£ç å¯¹ç»™å®šè¯­è¨€çš„ Unicode å­—ç¬¦ä¸²æ‰§è¡Œè¯æ³•æ¯”è¾ƒå‡½æ•°;æ­£åˆ™è¡¨è¾¾å¼åè®®ç”¨äºæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é… Unicode å­—ç¬¦ä¸²ã€‚ EFI å­—èŠ‚ç è™šæ‹Ÿæœº å®šä¹‰ EFI å­—èŠ‚ç è™šæ‹Ÿå¤„ç†å™¨åŠå…¶æŒ‡ä»¤é›†ã€‚å®ƒè¿˜å®šä¹‰äº†å¦‚ä½•å°† EBC å¯¹è±¡æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä»¥åŠä»æœ¬æœºä»£ç åˆ° EBC ä»£ç å†è½¬æ¢åˆ°æœ¬æœºä»£ç çš„æœºåˆ¶ã€‚ å›ºä»¶æ›´æ–°å’ŒæŠ¥å‘Š ä¸ºè®¾å¤‡æä¾›ä¸€ä¸ªæŠ½è±¡ï¼Œä»¥æä¾›å›ºä»¶ç®¡ç†æ”¯æŒã€‚ ç½‘ç»œåè®® SNPã€PXEã€BIS å’Œ HTTP å¯åŠ¨åè®®å®šä¹‰äº†åœ¨ UEFI å¯åŠ¨æœåŠ¡ç¯å¢ƒä¸­æ‰§è¡Œæ—¶æä¾›å¯¹ç½‘ç»œè®¾å¤‡è®¿é—®çš„åè®®ã€‚ å—ç®¡ç½‘ç»œåè®®å®šä¹‰äº† EFI å—ç®¡ç½‘ç»œåè®®ï¼Œå®ƒæä¾›åŸå§‹ (æœªæ ¼å¼åŒ–) å¼‚æ­¥ç½‘ç»œæ•°æ®åŒ… I/O æœåŠ¡å’Œæ‰˜ç®¡ç½‘ç»œæœåŠ¡ç»‘å®šåè®®ï¼Œç”¨äºå®šä½ MNP é©±åŠ¨æ”¯æŒçš„é€šä¿¡è®¾å¤‡ã€‚ VLANã€EAPã€Wi-Fi å’Œ Supplicant åè®®å®šä¹‰äº†ä¸€ä¸ªåè®®ï¼Œä¸º VLAN é…ç½®æä¾›å¯ç®¡ç†æ€§æ¥å£ã€‚ è“ç‰™åè®®å®šä¹‰ã€‚ TCPã€IPã€PIPsecã€FTPã€GTLS å’Œ Configurations åè®®å®šä¹‰äº† EFI TCPv4 (Transmission Control Protocol version 4) åè®®å’Œ EFI IPv4 (Internet Protocol version 4) åè®®ã€‚ ARPã€DHCPã€DNSã€HTTP å’Œ REST åè®®å®šä¹‰äº† ARP (Address Resolution Protocol) åè®®æ¥å£å’Œ EFI DHCPv4 åè®®ã€‚ UDP å’Œ MTFTP åè®®å®šä¹‰äº† EFI UDPv4 (User Datagram Protocol version 4) åè®®ï¼Œè¯¥åè®®åœ¨ EFI IPv4 åè®®ä¸Šæ¥å£ï¼Œå¹¶å®šä¹‰äº† EFI MTFTPv4 åè®®æ¥å£ï¼Œè¯¥æ¥å£å»ºç«‹åœ¨ EFI UDPv4 åè®®ä¹‹ä¸Šã€‚ å®‰å…¨å¼•å¯¼å’Œé©±åŠ¨ç¨‹åºç­¾å ä»‹ç» Secure Boot å’Œç”Ÿæˆ UEFI æ•°å­—ç­¾åçš„æ–¹æ³•ã€‚ äººæœºç•Œé¢åŸºç¡€è®¾æ–½ (HII) å®šä¹‰å®ç°äººæœºæ¥å£åŸºç¡€è®¾æ–½ (HII) æ‰€éœ€çš„æ ¸å¿ƒä»£ç å’ŒæœåŠ¡ï¼ŒåŒ…æ‹¬ç®¡ç†ç”¨æˆ·è¾“å…¥å’Œç›¸å…³åè®®çš„ä»£ç å®šä¹‰çš„åŸºæœ¬æœºåˆ¶ã€‚ æè¿°ç”¨äºç®¡ç†ç³»ç»Ÿé…ç½®çš„æ•°æ®å’Œ api:æè¿°æ—‹é’®å’Œè®¾ç½®çš„å®é™…æ•°æ®ã€‚ ç”¨æˆ·æ ‡è¯† æè¿°æè¿°å¹³å°å½“å‰ç”¨æˆ·çš„æœåŠ¡ã€‚ å®‰å…¨æŠ€æœ¯ æè¿°ç”¨äºåˆ©ç”¨å®‰å…¨æŠ€æœ¯çš„åè®®ï¼ŒåŒ…æ‹¬åŠ å¯†æ•£åˆ—å’Œå¯†é’¥ç®¡ç†ã€‚ æ‚é¡¹åè®® Timestamp åè®®æä¾›äº†ä¸€ä¸ªç‹¬ç«‹äºå¹³å°çš„æ¥å£æ¥æ£€ç´¢é«˜åˆ†è¾¨ç‡çš„æ—¶é—´æˆ³è®¡æ•°å™¨ã€‚å½“è°ƒç”¨ ResetSystem æ—¶ï¼Œé‡ç½®é€šçŸ¥åè®®æä¾›æ³¨å†Œé€šçŸ¥çš„æœåŠ¡ã€‚ é™„å½• GUID å’Œæ—¶é—´æ ¼å¼ã€‚ åŸºäºåŸºæœ¬æ–‡æœ¬çš„æ§åˆ¶å°è¦æ±‚ï¼Œç¬¦åˆ efi ç³»ç»Ÿéœ€è¦æä¾›é€šä¿¡èƒ½åŠ›ã€‚ è®¾å¤‡è·¯å¾„ä½¿ç”¨æ•°æ®ç»“æ„çš„ä¾‹å­ï¼Œå®šä¹‰å„ç§ç¡¬ä»¶è®¾å¤‡çš„å¼•å¯¼æœåŠ¡ã€‚ çŠ¶æ€ä»£ç åˆ—å‡ºäº† UEFI æ¥å£è¿”å›çš„æˆåŠŸã€é”™è¯¯å’Œè­¦å‘Šä»£ç ã€‚ é€šç”¨ç½‘ç»œé©±åŠ¨ç¨‹åºæ¥å£å®šä¹‰äº†32/64ä½ç¡¬ä»¶å’Œè½¯ä»¶é€šç”¨ç½‘ç»œé©±åŠ¨ç¨‹åºæ¥å£(UNDIs)ã€‚ ä½¿ç”¨ç®€å•æŒ‡é’ˆåè®®ã€‚ ä½¿ç”¨ EFI æ‰©å±• SCISI ç›´é€šåè®®ã€‚ å‹ç¼©æºä»£ç çš„ä¸€ä¸ªå‹ç¼©ç®—æ³•çš„å®ç°ã€‚ ä¸€ä¸ª EFI è§£å‹ç¼©ç®—æ³•çš„å®ç°çš„è§£å‹æºä»£ç ã€‚ EFI å­—èŠ‚ç è™šæ‹Ÿæœºæ“ä½œç åˆ—è¡¨æä¾›äº†ç›¸åº”æŒ‡ä»¤é›†çš„æ‘˜è¦ã€‚ å­—æ¯åŠŸèƒ½åˆ—è¡¨æŒ‰å­—æ¯é¡ºåºæ ‡è¯†æ‰€æœ‰ UEFI æ¥å£åŠŸèƒ½ã€‚ EFI 1.10 åè®®å˜æ›´å’ŒæŠ˜æ—§æ¸…å•æ ‡è¯†äº†åè®®ã€GUIDã€ä¿®è®¢æ ‡è¯†ç¬¦åç§°å˜æ›´ä»¥åŠä¸ EFI 1.10 è§„èŒƒç›¸æ¯”å·²å¼ƒç”¨çš„åè®®ã€‚ å¹³å°é”™è¯¯è®°å½•æè¿°äº†ç”¨äºè¡¨ç¤ºå¹³å°ç¡¬ä»¶é”™è¯¯çš„å¸¸è§å¹³å°é”™è¯¯è®°å½•æ ¼å¼ã€‚ UEFI ACPI Data Table å®šä¹‰äº† UEFI ACPI è¡¨æ ¼å¼ã€‚ ç¡¬ä»¶é”™è¯¯è®°å½•æŒä¹…æ€§ä½¿ç”¨ã€‚ å¼•ç”¨ æœ¯è¯­è¡¨ ç´¢å¼• æä¾›è§„èŒƒä¸­å…³é”®æœ¯è¯­å’Œæ¦‚å¿µçš„ç´¢å¼•ã€‚ ç›®æ ‡ â€œPC-ATâ€å¯åŠ¨ç¯å¢ƒå¯¹è¡Œä¸šå†…çš„åˆ›æ–°æå‡ºäº†é‡å¤§æŒ‘æˆ˜ã€‚æ¯ä¸€ä¸ªæ–°çš„å¹³å°åŠŸèƒ½æˆ–ç¡¬ä»¶åˆ›æ–°éƒ½è¦æ±‚å›ºä»¶å¼€å‘äººå‘˜è®¾è®¡è¶Šæ¥è¶Šå¤æ‚çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”é€šå¸¸è¦æ±‚æ“ä½œç³»ç»Ÿå¼€å‘äººå‘˜ä¿®æ”¹å¼•å¯¼ä»£ç ï¼Œç„¶åå®¢æˆ·æ‰èƒ½ä»åˆ›æ–°ä¸­å—ç›Šã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªè€—æ—¶çš„è¿‡ç¨‹ï¼Œéœ€è¦å¤§é‡çš„èµ„æºæŠ•èµ„ã€‚\nUEFI è§„èŒƒçš„ä¸»è¦ç›®æ ‡æ˜¯å®šä¹‰ä¸€ä¸ªæ›¿ä»£å¼•å¯¼ç¯å¢ƒï¼Œå¯ä»¥å‡è½»è¿™äº›è€ƒè™‘ã€‚åœ¨è¿™ä¸ªç›®æ ‡ä¸­ï¼Œè¯¥è§„èŒƒç±»ä¼¼äºå…¶ä»–ç°æœ‰çš„å¼•å¯¼è§„èŒƒã€‚æœ¬è§„èŒƒçš„ä¸»è¦å±æ€§å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å±æ€§ï¼š\nä¸€è‡´çš„ã€å¯æ‰©å±•çš„å¹³å°ç¯å¢ƒã€‚è¯¥è§„èŒƒä¸ºå›ºä»¶å®šä¹‰äº†ä¸€ä¸ªå®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥æè¿°æ‰€æœ‰å¹³å°ç‰¹æ€§å’Œ OS çš„ surface platform(TODO) åŠŸèƒ½åœ¨å¼•å¯¼è¿‡ç¨‹ä¸­ã€‚è¿™äº›å®šä¹‰éå¸¸ä¸°å¯Œï¼Œè¶³ä»¥æ¶µç›–ä¸€ç³»åˆ—å½“ä»£å¤„ç†å™¨è®¾è®¡ã€‚\nä»å›ºä»¶ä¸­æŠ½è±¡æ“ä½œç³»ç»Ÿã€‚è¯¥è§„èŒƒå®šä¹‰äº†å¹³å°åŠŸèƒ½çš„æ¥å£ã€‚é€šè¿‡ä½¿ç”¨æŠ½è±¡æ¥å£ï¼Œè¯¥è§„èŒƒå…è®¸åœ¨æ„å»º OS åŠ è½½å™¨æ—¶ï¼Œè€Œæ— éœ€äº†è§£ä½œä¸ºè¿™äº›æ¥å£åŸºç¡€çš„å¹³å°å’Œå›ºä»¶ã€‚è¿™äº›æ¥å£ä»£è¡¨äº†åº•å±‚å¹³å°å’Œå›ºä»¶å®ç°ä¸æ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºä¹‹é—´å®šä¹‰è‰¯å¥½çš„ç¨³å®šè¾¹ç•Œã€‚è¿™æ ·çš„è¾¹ç•Œå…è®¸åº•å±‚å›ºä»¶å’Œæ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºæ›´æ”¹ï¼Œå‰ææ˜¯ä¸¤è€…éƒ½å°†äº¤äº’é™åˆ¶åœ¨å®šä¹‰çš„æ¥å£ä¸Šã€‚\nåˆç†çš„è®¾å¤‡æŠ½è±¡ï¼Œä¸éœ€è¦é—ç•™æ¥å£ã€‚â€œPC-ATâ€BIOS æ¥å£è¦æ±‚æ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºå¯¹æŸäº›ç¡¬ä»¶è®¾å¤‡çš„å·¥ä½œæœ‰ç‰¹å®šçš„äº†è§£ã€‚è¯¥è§„èŒƒä¸º OS åŠ è½½å™¨å¼€å‘äººå‘˜æä¾›äº†ä¸€äº›ä¸åŒçš„ä¸œè¥¿ï¼šæŠ½è±¡æ¥å£ä½¿å¾—å¯ä»¥æ„å»ºåœ¨ä¸€ç³»åˆ—åº•å±‚ç¡¬ä»¶è®¾å¤‡ä¸Šå·¥ä½œçš„ä»£ç ï¼Œè€Œæ— éœ€æ˜ç¡®äº†è§£è¯¥èŒƒå›´å†…æ¯ä¸ªè®¾å¤‡çš„ç»†èŠ‚ã€‚\nä»å›ºä»¶ä¸­æå– Option ROMã€‚è¯¥è§„èŒƒå®šä¹‰äº†å¹³å°åŠŸèƒ½çš„æ¥å£ï¼ŒåŒ…æ‹¬ PCIã€USB å’Œ SCSI ç­‰æ ‡å‡†æ€»çº¿ç±»å‹ã€‚æ”¯æŒçš„æ€»çº¿ç±»å‹å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå¢åŠ ï¼Œå› æ­¤åŒ…æ‹¬äº†ä¸€ç§æ‰©å±•åˆ°æœªæ¥æ€»çº¿ç±»å‹çš„æœºåˆ¶ã€‚è¿™äº›å®šä¹‰çš„æ¥å£ä»¥åŠæ‰©å±•åˆ°æœªæ¥æ€»çº¿ç±»å‹çš„èƒ½åŠ›æ˜¯ UEFI é©±åŠ¨ç¨‹åºæ¨¡å‹çš„ç»„ä»¶ã€‚UEFI é©±åŠ¨æ¨¡å‹çš„ä¸€ä¸ªç›®çš„æ˜¯è§£å†³ç°æœ‰â€œPC-ATâ€Option ROM ä¸­å­˜åœ¨çš„å¹¿æ³›é—®é¢˜ã€‚ä¸ OS åŠ è½½ç¨‹åºä¸€æ ·ï¼Œé©±åŠ¨ç¨‹åºä½¿ç”¨æŠ½è±¡æ¥å£ï¼Œå› æ­¤å¯ä»¥æ„å»ºè®¾å¤‡é©±åŠ¨ç¨‹åºå’Œæ€»çº¿é©±åŠ¨ç¨‹åºï¼Œè€Œæ— éœ€äº†è§£ä½œä¸ºè¿™äº›æ¥å£åŸºç¡€çš„å¹³å°å’Œå›ºä»¶ã€‚\næ¶æ„ä¸Šå¯å…±äº«çš„ç³»ç»Ÿåˆ†åŒºã€‚æ‰©å±•å¹³å°åŠŸèƒ½å’Œæ·»åŠ æ–°è®¾å¤‡çš„è®¡åˆ’é€šå¸¸éœ€è¦è½¯ä»¶æ”¯æŒã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå½“è¿™äº›å¹³å°åˆ›æ–°ï¼ˆTODOï¼‰åœ¨æ“ä½œç³»ç»Ÿæ§åˆ¶å¹³å°ä¹‹å‰è¢«æ¿€æ´»æ—¶ï¼Œå®ƒä»¬å¿…é¡»ç”±ç‰¹å®šäºå¹³å°è€Œä¸æ˜¯å®¢æˆ·é€‰æ‹©çš„æ“ä½œç³»ç»Ÿçš„ä»£ç æ”¯æŒã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯åœ¨åˆ¶é€ è¿‡ç¨‹ä¸­å°†ä»£ç åµŒå…¥å¹³å°ä¸­ï¼ˆä¾‹å¦‚ï¼Œåœ¨é—ªå­˜è®¾å¤‡ä¸­ï¼‰ã€‚å¯¹è¿™ç§æŒä¹…å­˜å‚¨çš„éœ€æ±‚æ­£åœ¨å¿«é€Ÿå¢é•¿ã€‚è¯¥è§„èŒƒå®šä¹‰äº†å¤§å‹æµ·é‡å­˜å‚¨åª’ä»‹ç±»å‹ä¸Šçš„æŒä¹…å­˜å‚¨ï¼Œä»¥ä¾›å¹³å°æ”¯æŒä»£ç æ‰©å±•ä½¿ç”¨ï¼Œä»¥è¡¥å……ä¼ ç»Ÿæ–¹æ³•ã€‚è§„èŒƒä¸­æ˜ç¡®äº†å…¶å·¥ä½œåŸç†çš„å®šä¹‰ï¼Œä»¥ç¡®ä¿å›ºä»¶å¼€å‘å•†ã€OEMã€æ“ä½œç³»ç»Ÿä¾›åº”å•†ç”šè‡³ç¬¬ä¸‰æ–¹å¯ä»¥å®‰å…¨åœ°å…±äº«ç©ºé—´ï¼ŒåŒæ—¶å¢åŠ å¹³å°åŠŸèƒ½ã€‚\nå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®šä¹‰æä¾›è¿™äº›å±æ€§çš„å¼•å¯¼ç¯å¢ƒã€‚å®é™…ä¸Šï¼Œåœ¨ç¼–å†™æœ¬è§„èŒƒæ—¶ï¼Œå·²ç»å­˜åœ¨å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼Œä»å­¦æœ¯è§’åº¦æ¥çœ‹å¯èƒ½æ˜¯å¯è¡Œçš„ã€‚ç„¶è€Œï¼Œè€ƒè™‘åˆ°å½“å‰å›´ç»•æ”¯æŒçš„å¤„ç†å™¨å¹³å°çš„åŸºç¡€è®¾æ–½èƒ½åŠ›ï¼Œè¿™äº›æ›¿ä»£æ–¹æ¡ˆé€šå¸¸ä¼šå¸¦æ¥å¾ˆé«˜çš„é—¨æ§›ã€‚æœ¬è§„èŒƒæ—¨åœ¨æä¾›ä¸Šé¢åˆ—å‡ºçš„å±æ€§ï¼ŒåŒæ—¶ä¹Ÿè®¤è¯†åˆ°è¡Œä¸šçš„ç‹¬ç‰¹éœ€æ±‚ï¼Œè¯¥è¡Œä¸šåœ¨å…¼å®¹æ€§æ–¹é¢è¿›è¡Œäº†å¤§é‡æŠ•èµ„ï¼Œå¹¶ä¸”æ‹¥æœ‰å¤§é‡æ— æ³•ç«‹å³æ”¾å¼ƒçš„ç³»ç»Ÿå®‰è£…åŸºç¡€ã€‚è¿™äº›éœ€æ±‚æ¨åŠ¨äº†å¯¹æœ¬è§„èŒƒä¸­ä½“ç°çš„é™„åŠ å±æ€§çš„è¦æ±‚ï¼š\nè¿›åŒ–æ€§çš„ï¼Œè€Œä¸æ˜¯é©å‘½æ€§çš„ã€‚è§„èŒƒä¸­çš„æ¥å£å’Œç»“æ„æ—¨åœ¨å°½å¯èƒ½åœ°å‡å°‘åˆå§‹å®ç°çš„è´Ÿæ‹…ã€‚è™½ç„¶å·²ç»å°æ³¨æ„ä¿åœ¨æ¥å£æœ¬èº«ä¸­ç»´æŠ¤é€‚å½“çš„æŠ½è±¡ï¼Œä½†è¯¥è®¾è®¡è¿˜ç¡®ä¿å¯ä»¥é‡ç”¨ BIOS ä»£ç æ¥å®ç°æ¥å£ï¼Œè€Œåªéœ€è¦æœ€å°‘çš„é¢å¤–ç¼–ç å·¥ä½œã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ PC-AT å¹³å°ä¸Šï¼Œè§„èŒƒæœ€åˆå¯ä»¥ä½œä¸ºåŸºäºç°æœ‰ä»£ç çš„åº•å±‚å®ç°ä¹‹ä¸Šçš„è–„æ¥å£ï¼ˆthin Interface TODOï¼‰å±‚æ¥å®ç°ã€‚åŒæ—¶ï¼ŒæŠ½è±¡æ¥å£çš„å¼•å…¥æä¾›äº†å°†æ¥ä»é—ç•™ä»£ç çš„è¿ç§»ã€‚ä¸€æ—¦æŠ½è±¡è¢«ç¡®ç«‹ä¸ºå›ºä»¶å’Œæ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºåœ¨å¼•å¯¼æœŸé—´äº¤äº’çš„æ‰‹æ®µï¼Œå¼€å‘äººå‘˜å°±å¯ä»¥éšæ„æ›¿æ¢æŠ½è±¡æ¥å£ä¸‹çš„é—ç•™ä»£ç ã€‚ç±»ä¼¼çš„ç¡¬ä»¶é—ç•™è¿ç§»ä¹Ÿæ˜¯å¯èƒ½çš„ã€‚ç”±äºæŠ½è±¡éšè—äº†è®¾å¤‡çš„ç»†èŠ‚ï¼Œå› æ­¤å¯ä»¥ç§»é™¤åº•å±‚ç¡¬ä»¶ï¼Œå¹¶ç”¨æä¾›æ”¹è¿›åŠŸèƒ½ã€é™ä½æˆæœ¬æˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹çš„æ–°ç¡¬ä»¶æ›¿æ¢å®ƒã€‚æ˜¾ç„¶ï¼Œè¿™éœ€è¦ç¼–å†™æ–°çš„å¹³å°å›ºä»¶æ¥æ”¯æŒè®¾å¤‡å¹¶é€šè¿‡æŠ½è±¡æ¥å£å°†å…¶å‘ˆç°ç»™ OS åŠ è½½å™¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰æ¥å£æŠ½è±¡ï¼Œåˆ™å¯èƒ½æ ¹æœ¬æ— æ³•ç§»é™¤æ—§è®¾å¤‡ã€‚ è®¾è®¡ä¸Šçš„å…¼å®¹æ€§ã€‚ç³»ç»Ÿåˆ†åŒºç»“æ„çš„è®¾è®¡è¿˜ä¿ç•™äº†å½“å‰åœ¨â€œPC-ATâ€å¼•å¯¼ç¯å¢ƒä¸­ä½¿ç”¨çš„æ‰€æœ‰ç»“æ„ã€‚å› æ­¤ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤Ÿä»åŒä¸€ç£ç›˜å¼•å¯¼ä¼ ç»Ÿæ“ä½œç³»ç»Ÿæˆ– EFI-aware æ“ä½œç³»ç»Ÿçš„å•ä¸€ç³»ç»Ÿæ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ã€‚ ç®€åŒ–äº†æ“ä½œç³»ç»Ÿä¸­ç«‹çš„å¹³å°å¢å€¼çš„æ·»åŠ ã€‚è¯¥è§„èŒƒå®šä¹‰äº†ä¸€ä¸ªå¼€æ”¾çš„ã€å¯æ‰©å±•çš„æ¥å£ï¼Œå®ƒæœ‰åŠ©äºåˆ›å»ºå¹³å°â€œé©±åŠ¨ç¨‹åºâ€ã€‚è¿™äº›å¯èƒ½ç±»ä¼¼äºæ“ä½œç³»ç»Ÿé©±åŠ¨ç¨‹åºï¼Œåœ¨å¼•å¯¼è¿‡ç¨‹ä¸­ä¸ºæ–°è®¾å¤‡ç±»å‹æä¾›æ”¯æŒï¼Œæˆ–è€…å®ƒä»¬å¯èƒ½ç”¨äºå®ç°å¢å¼ºçš„å¹³å°åŠŸèƒ½ï¼Œä¾‹å¦‚å®¹é”™æˆ–å®‰å…¨æ€§ã€‚æ­¤å¤–ï¼Œè¿™ç§æ‰©å±•å¹³å°èƒ½åŠ›çš„èƒ½åŠ›ä»ä¸€å¼€å§‹å°±è¢«è®¾è®¡åˆ°è§„èŒƒä¸­ã€‚è¿™æ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜é¿å…åœ¨å°è¯•å°†æ–°ä»£ç æŒ¤å…¥ä¼ ç»Ÿ BIOS ç¯å¢ƒæ—¶æ‰€å›ºæœ‰çš„è®¸å¤šæŒ«è´¥æ„Ÿã€‚ç”±äºåŒ…å«ç”¨äºæ·»åŠ æ–°åè®®çš„æ¥å£ï¼ŒOEM æˆ–å›ºä»¶å¼€å‘äººå‘˜æ‹¥æœ‰ä»¥æ¨¡å—åŒ–æ–¹å¼å‘å¹³å°æ·»åŠ åŠŸèƒ½çš„åŸºç¡€è®¾æ–½ã€‚ç”±äºè§„èŒƒä¸­å®šä¹‰çš„è°ƒç”¨çº¦å®šå’Œç¯å¢ƒï¼Œæ­¤ç±»é©±åŠ¨ç¨‹åºå¯èƒ½ä¼šä½¿ç”¨é«˜çº§ç¼–ç è¯­è¨€æ¥å®ç°ã€‚è¿™åè¿‡æ¥å¯èƒ½æœ‰åŠ©äºé™ä½åˆ›æ–°çš„éš¾åº¦å’Œæˆæœ¬ã€‚ç³»ç»Ÿåˆ†åŒºé€‰é¡¹ä¸ºæ­¤ç±»æ‰©å±•æä¾›äº†éæ˜“å¤±æ€§å­˜å‚¨å™¨å­˜å‚¨çš„æ›¿ä»£æ–¹æ¡ˆã€‚ å»ºç«‹åœ¨ç°æœ‰æŠ•å…¥çš„åŸºç¡€ä¸Šã€‚åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œè§„èŒƒé¿å…åœ¨ç°æœ‰è¡Œä¸šè§„èŒƒæä¾›è¶³å¤Ÿè¦†ç›–çš„é¢†åŸŸé‡æ–°å®šä¹‰æ¥å£å’Œç»“æ„ã€‚ä¾‹å¦‚ï¼ŒACPI è§„èŒƒä¸ºæ“ä½œç³»ç»Ÿæä¾›äº†å‘ç°å’Œé…ç½®å¹³å°èµ„æºæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚åŒæ ·ï¼Œè§„èŒƒè®¾è®¡çš„è¿™ç§å“²å­¦é€‰æ‹©æ—¨åœ¨å°½å¯èƒ½é™ä½é‡‡ç”¨è¯¥è§„èŒƒçš„éšœç¢ã€‚ ç›®æ ‡å—ä¼— æœ¬æ–‡æ¡£ä¸»è¦é€‚ç”¨äºä»¥ä¸‹è¯»è€…ï¼š\nå°†å®ç° UEFI é©±åŠ¨ç¨‹åºçš„ IHV å’Œ OEMã€‚ å°†åˆ›å»ºæ”¯æŒçš„å¤„ç†å™¨å¹³å°çš„ OEM å‚å•†ï¼Œæ—¨åœ¨å¯åŠ¨ shrink-wrapï¼ˆTODOï¼‰çš„æ“ä½œç³»ç»Ÿã€‚ BIOS å¼€å‘äººå‘˜ï¼Œæ— è®ºæ˜¯åˆ›å»ºé€šç”¨ BIOS å’Œå…¶ä»–å›ºä»¶äº§å“çš„äººå‘˜ï¼Œè¿˜æ˜¯ä¿®æ”¹è¿™äº›äº§å“çš„æ”¯æŒäººå‘˜ã€‚ æ“ä½œç³»ç»Ÿå¼€å‘äººå‘˜å°†è°ƒæ•´ä»–ä»¬çš„ shrink-wrapï¼ˆTODOï¼‰æ“ä½œç³»ç»Ÿäº§å“ï¼Œç”¨æ¥åœ¨æ”¯æŒçš„åŸºäºå¤„ç†å™¨çš„å¹³å°ä¸Šè¿è¡Œã€‚ UEFI è®¾è®¡æ¦‚è¿° UEFI çš„è®¾è®¡åŸºäºä»¥ä¸‹åŸºæœ¬è¦ç´ ï¼š\né‡ç”¨ç°æœ‰çš„åŸºäºè¡¨æ ¼çš„æ¥å£ã€‚ä¸ºäº†ä¿æŒå¯¹ç°æœ‰åŸºç¡€æ”¯æŒä»£ç ï¼ˆåŒ…æ‹¬æ“ä½œç³»ç»Ÿå’Œå›ºä»¶ï¼‰çš„æŠ•èµ„ï¼Œå¿…é¡»åœ¨å¸Œæœ›ç¬¦åˆ UEFI è§„èŒƒçš„å¹³å°ä¸Šï¼Œå®ç°é€šå¸¸åœ¨ä¸æ”¯æŒçš„å¤„ç†å™¨è§„èŒƒå…¼å®¹çš„å¹³å°ä¸Šï¼Œå®ç°çš„è®¸å¤šç°æœ‰è§„èŒƒã€‚ ï¼ˆæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…é™„å½• Qï¼šå‚è€ƒèµ„æ–™ã€‚ï¼‰ ç³»ç»Ÿåˆ†åŒºã€‚ç³»ç»Ÿåˆ†åŒºå®šä¹‰äº†ä¸€ä¸ªåˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿï¼Œå¯å…è®¸å¤šä¸ªä¾›åº”å•†ä¹‹é—´å®‰å…¨å…±äº«ï¼Œå¹¶ç”¨äºä¸åŒç›®çš„ã€‚åŒ…å«å•ç‹¬çš„ã€å¯å…±äº«çš„ç³»ç»Ÿåˆ†åŒºçš„èƒ½åŠ›æä¾›äº†å¢åŠ å¹³å°é™„åŠ å€¼çš„æœºä¼šï¼Œè€Œä¸ä¼šæ˜¾è‘—å¢åŠ å¯¹éæ˜“å¤±æ€§å¹³å°å­˜å‚¨å™¨çš„éœ€æ±‚ã€‚ å¼•å¯¼æœåŠ¡ã€‚å¼•å¯¼æœåŠ¡ä¸ºå¯åœ¨å¼•å¯¼æœŸé—´ä½¿ç”¨çš„è®¾å¤‡å’Œç³»ç»ŸåŠŸèƒ½æä¾›æ¥å£ã€‚è®¾å¤‡è®¿é—®æ˜¯é€šè¿‡â€œå¥æŸ„â€ï¼ˆhandlesï¼‰å’Œâ€œåè®®â€(protocols) æŠ½è±¡å‡ºæ¥çš„ã€‚è¿™æœ‰åˆ©äºé‡ç”¨ç°æœ‰ BIOS ä»£ç ï¼Œå°†åŸºæœ¬å®ç°è¦æ±‚ä¿æŒåœ¨è§„èŒƒä¹‹å¤–ï¼Œè€Œä¸ä¼šç»™è®¿é—®è®¾å¤‡çš„æ¶ˆè´¹è€…å¸¦æ¥è´Ÿæ‹…ã€‚ è¿è¡Œæ—¶æœåŠ¡ã€‚æä¾›äº†ä¸€ç»„æœ€å°çš„è¿è¡Œæ—¶æœåŠ¡ï¼Œä»¥ç¡®ä¿å¯¹åŸºç¡€å¹³å°çš„ç¡¬ä»¶èµ„æºè¿›è¡Œé€‚å½“çš„æŠ½è±¡ï¼Œè¿™äº›èµ„æºå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿåœ¨æ­£å¸¸è¿è¡Œæ—¶éœ€è¦çš„ã€‚ \u003c!DOCTYPE html\u003e Responsive Image å›¾ 1-1 æè¿°äº†ç”¨äºå®Œæˆå¹³å°å’Œæ“ä½œç³»ç»Ÿå¼•å¯¼çš„ç¬¦åˆ UEFI è§„èŒƒçš„ç³»ç»Ÿçš„å„ç§ç»„ä»¶çš„äº¤äº’ã€‚\nå¹³å°å›ºä»¶èƒ½å¤Ÿä»ç³»ç»Ÿåˆ†åŒºä¸­æ£€ç´¢æ“ä½œç³»ç»ŸåŠ è½½å™¨é•œåƒã€‚è¯¥è§„èŒƒæä¾›äº†å„ç§å¤§å®¹é‡å­˜å‚¨è®¾å¤‡ç±»å‹ï¼ŒåŒ…æ‹¬ç£ç›˜ã€CD-ROM å’Œ DVDï¼Œä»¥åŠé€šè¿‡ç½‘ç»œçš„è¿œç¨‹å¯åŠ¨ã€‚é€šè¿‡å¯æ‰©å±•çš„åè®®æ¥å£ï¼Œæœ‰å¯èƒ½å¢åŠ å…¶ä»–çš„å¼•å¯¼åª’ä»‹ç±»å‹ï¼Œå°½ç®¡å¦‚æœè¿™äº›åª’ä»‹éœ€è¦ä½¿ç”¨æœ¬æ–‡ä»¶ä¸­å®šä¹‰çš„åè®®ä»¥å¤–çš„åè®®ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹æ“ä½œç³»ç»ŸåŠ è½½å™¨ã€‚\nä¸€æ—¦å¯åŠ¨ï¼Œæ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºå°†ç»§ç»­å¼•å¯¼æ•´ä¸ªæ“ä½œç³»ç»Ÿã€‚ä¸ºæ­¤ï¼Œå®ƒå¯ä»¥ä½¿ç”¨æœ¬è§„èŒƒæˆ–å…¶ä»–æ‰€éœ€è§„èŒƒå®šä¹‰çš„ EFI å¼•å¯¼æœåŠ¡å’Œæ¥å£æ¥æ¢æµ‹ã€è§£æå’Œåˆå§‹åŒ–å„ç§å¹³å°ç»„ä»¶å’Œç®¡ç†å®ƒä»¬çš„æ“ä½œç³»ç»Ÿè½¯ä»¶ã€‚åœ¨å¼•å¯¼é˜¶æ®µï¼ŒEFI è¿è¡Œæ—¶æœåŠ¡ä¹Ÿå¯ä¾› OS åŠ è½½å™¨ä½¿ç”¨ã€‚\nUEFI é©±åŠ¨æ¨¡å‹ æœ¬èŠ‚æè¿°äº†ç¬¦åˆæœ¬è§„èŒƒçš„å›ºä»¶çš„é©±åŠ¨æ¨¡å‹çš„ç›®æ ‡ã€‚ç›®æ ‡æ˜¯è®©è¿™ä¸ªé©±åŠ¨æ¨¡å‹ä¸ºæ‰€æœ‰ç±»å‹çš„æ€»çº¿å’Œè®¾å¤‡æä¾›ä¸€ä¸ªå®ç°æ€»çº¿é©±åŠ¨å’Œè®¾å¤‡é©±åŠ¨çš„æœºåˆ¶ã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæ”¯æŒçš„æ€»çº¿ç±»å‹åŒ…æ‹¬ PCIã€USB ç­‰ã€‚\néšç€ç¡¬ä»¶æ¶æ„çš„ä¸æ–­å‘å±•ï¼Œå¹³å°ä¸­å­˜åœ¨çš„æ€»çº¿æ•°é‡å’Œç±»å‹ä¹Ÿåœ¨ä¸æ–­å¢åŠ ã€‚è¿™ç§è¶‹åŠ¿åœ¨é«˜ç«¯æœåŠ¡å™¨ä¸­å°¤ä¸ºæ˜æ˜¾ã€‚ç„¶è€Œï¼Œæ›´å¤šæ ·åŒ–çš„æ€»çº¿ç±»å‹è¢«è®¾è®¡åˆ°æ¡Œé¢å’Œç§»åŠ¨ç³»ç»Ÿï¼Œç”šè‡³ä¸€äº›åµŒå…¥å¼ç³»ç»Ÿä¸­ã€‚è¿™ç§æ—¥ç›Šå¢é•¿çš„å¤æ‚æ€§ï¼Œæ„å‘³ç€åœ¨é¢„å¯åŠ¨ç¯å¢ƒä¸­ï¼Œéœ€è¦ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥æè¿°å’Œç®¡ç†å¹³å°ä¸­çš„æ‰€æœ‰æ€»çº¿å’Œè®¾å¤‡ã€‚UEFI é©±åŠ¨æ¨¡å‹ä»¥åè®®ã€æœåŠ¡å’Œå¯åŠ¨æœåŠ¡çš„å½¢å¼æä¾›äº†è¿™ç§ç®€å•çš„æ–¹æ³•ã€‚\nUEFI é©±åŠ¨ç¨‹åºæ¨¡å‹ç›®æ ‡ UEFI é©±åŠ¨æ¨¡å‹æœ‰ä»¥ä¸‹ç›®æ ‡ï¼š\nå…¼å®¹ â€“ ç¬¦åˆæ­¤è§„èŒƒçš„é©±åŠ¨ç¨‹åºå¿…é¡»ä¿æŒä¸ EFI 1.10 è§„èŒƒå’Œ UEFI è§„èŒƒçš„å…¼å®¹æ€§ã€‚è¿™æ„å‘³ç€ UEFI é©±åŠ¨ç¨‹åºæ¨¡å‹åˆ©ç”¨ UEFI 2. 0 è§„èŒƒä¸­çš„å¯æ‰©å±•æ€§æœºåˆ¶æ¥æ·»åŠ æ‰€éœ€çš„åŠŸèƒ½ã€‚ ç®€å• - ç¬¦åˆæœ¬è§„èŒƒçš„é©±åŠ¨ç¨‹åºå¿…é¡»æ˜“äºå®ç°ï¼Œæ˜“äºç»´æŠ¤ã€‚UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»å…è®¸é©±åŠ¨ç¼–å†™è€…ä¸“æ³¨äºæ­£åœ¨å¼€å‘çš„ç‰¹å®šè®¾å¤‡çš„é©±åŠ¨ã€‚é©±åŠ¨ç¨‹åºä¸åº”å…³æ³¨å¹³å°ç­–ç•¥æˆ–å¹³å°ç®¡ç†é—®é¢˜ã€‚è¿™äº›è€ƒè™‘åº”è¯¥ç•™ç»™ç³»ç»Ÿå›ºä»¶ã€‚ å¯æ‰©å±•æ€§ - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»èƒ½å¤Ÿé€‚åº”æ‰€æœ‰ç±»å‹çš„å¹³å°ã€‚è¿™äº›å¹³å°åŒ…æ‹¬åµŒå…¥å¼ç³»ç»Ÿã€ç§»åŠ¨å’Œæ¡Œé¢ç³»ç»Ÿï¼Œä»¥åŠå·¥ä½œç«™å’ŒæœåŠ¡å™¨ã€‚ çµæ´» - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»æ”¯æŒæšä¸¾æ‰€æœ‰è®¾å¤‡çš„èƒ½åŠ›ï¼Œæˆ–è€…åªæšä¸¾å¯åŠ¨æ‰€éœ€æ“ä½œç³»ç»Ÿçš„é‚£äº›è®¾å¤‡ã€‚æœ€å°çš„è®¾å¤‡æšä¸¾æä¾›äº†å¯¹æ›´å¿«é€Ÿçš„å¯åŠ¨èƒ½åŠ›çš„æ”¯æŒï¼Œè€Œå®Œæ•´çš„è®¾å¤‡åª’ä½“æä¾›äº†åœ¨ç³»ç»Ÿä¸­å­˜åœ¨çš„ä»»ä½•å¯åŠ¨è®¾å¤‡ä¸Šæ‰§è¡Œæ“ä½œç³»ç»Ÿå®‰è£…ã€ç³»ç»Ÿç»´æŠ¤æˆ–ç³»ç»Ÿè¯Šæ–­çš„èƒ½åŠ›ã€‚ å¯æ‰©å±•æ€§ - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»èƒ½å¤Ÿæ‰©å±•åˆ°æœªæ¥å®šä¹‰çš„æ€»çº¿ç±»å‹ã€‚ å¯ç§»æ¤æ€§ - æ ¹æ® UEFI é©±åŠ¨æ¨¡å‹ç¼–å†™çš„é©±åŠ¨ï¼Œå¿…é¡»åœ¨ä¸åŒå¹³å°å’Œæ”¯æŒçš„å¤„ç†å™¨æ¶æ„ä¹‹é—´å¯ç§»æ¤ã€‚ å¯äº’æ“ä½œæ€§ - é©±åŠ¨ç¨‹åºå¿…é¡»ä¸å…¶ä»–é©±åŠ¨ç¨‹åºå’Œç³»ç»Ÿå›ºä»¶å…±å­˜ï¼Œå¹¶ä¸”å¿…é¡»åœ¨ä¸äº§ç”Ÿèµ„æºå†²çªçš„æƒ…å†µä¸‹è¿›è¡Œæ“ä½œã€‚ æè¿°å¤æ‚çš„æ€»çº¿å±‚æ¬¡ç»“æ„ - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»èƒ½å¤Ÿæè¿°å„ç§æ€»çº¿æ‹“æ‰‘ç»“æ„ï¼Œä»éå¸¸ç®€å•çš„å•æ€»çº¿å¹³å°åˆ°åŒ…å«è®¸å¤šä¸åŒç±»å‹æ€»çº¿çš„éå¸¸å¤æ‚çš„å¹³å°ã€‚ é©±åŠ¨å ç”¨ç©ºé—´å° - ç”± UEFI é©±åŠ¨ç¨‹åºæ¨¡å‹äº§ç”Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°å¿…é¡»æœ€å°åŒ–ï¼Œä»¥å‡å°‘æ•´ä½“å¹³å°æˆæœ¬ã€‚è™½ç„¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§æ˜¯ç›®æ ‡ï¼Œä½†æ”¯æŒè¿™äº›æ‰€éœ€çš„é¢å¤–å¼€é”€å¿…é¡»ä¿æŒåœ¨æœ€ä½æ°´å¹³ï¼Œä»¥é˜²æ­¢å›ºä»¶ç»„ä»¶çš„å¤§å°å˜å¾—æ— æ³•ç®¡ç†ã€‚ è§£å†³é—ç•™ Option ROM çš„é—®é¢˜ - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»ç›´æ¥è§£å†³é—ç•™ Option ROM çš„çº¦æŸå’Œé™åˆ¶ã€‚å…·ä½“æ¥è¯´ï¼Œå¿…é¡»èƒ½å¤Ÿå»ºç«‹åŒæ—¶æ”¯æŒ UEFI é©±åŠ¨å’Œä¼ ç»Ÿ Option ROM çš„æ’ä»¶å¡ï¼Œè¿™ç§å¡å¯ä»¥åœ¨ä¼ ç»Ÿ BIOS ç³»ç»Ÿå’Œç¬¦åˆ UEFI çš„å¹³å°ä¸Šæ‰§è¡Œï¼Œè€Œæ— éœ€ä¿®æ”¹å¡ä¸Šçš„ä»£ç ã€‚è¯¥è§£å†³æ–¹æ¡ˆå¿…é¡»æä¾›ä¸€ä¸ªä»ä¼ ç»Ÿ Option ROM é©±åŠ¨ç¨‹åºè¿ç§»åˆ° UEFI é©±åŠ¨ç¨‹åºçš„è¿›åŒ–è·¯å¾„ã€‚ é—ç•™ Option ROM é—®é¢˜ è¿™ä¸ªæ”¯æŒé©±åŠ¨æ¨¡å‹çš„æƒ³æ³•æ¥è‡ªäºå¯¹ UEFI è§„èŒƒçš„åé¦ˆï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ˜ç¡®çš„ã€ç”±å¸‚åœºé©±åŠ¨çš„å¯¹ä¼ ç»Ÿé€‰é¡¹ ROMï¼ˆæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºæ‰©å±• ROMï¼‰çš„æ›¿ä»£è¦æ±‚ã€‚äººä»¬è®¤ä¸ºï¼ŒUEFI è§„èŒƒçš„å‡ºç°ä»£è¡¨äº†ä¸€ä¸ªæœºä¼šï¼Œé€šè¿‡ç”¨ä¸€ç§åœ¨ UEFI è§„èŒƒæ¡†æ¶å†…å·¥ä½œçš„æ›¿ä»£æœºåˆ¶æ¥å–ä»£ä¼ ç»Ÿé€‰é¡¹ ROM é•œåƒçš„æ„å»ºå’Œæ“ä½œï¼Œä»è€Œæ‘†è„±éšå«çš„é™åˆ¶ã€‚\nè¿ç§»è¦æ±‚ è¿ç§»è¦æ±‚æ¶µç›–äº†ä»æœ€åˆå®æ–½æœ¬è§„èŒƒåˆ°æœªæ¥æ‰€æœ‰å¹³å°å’Œæ“ä½œç³»ç»Ÿéƒ½å®æ–½æœ¬è§„èŒƒçš„è¿‡æ¸¡æ—¶æœŸã€‚åœ¨è¿™ä¸€æ—¶æœŸï¼Œæœ‰ä¸¤ä¸ªä¸»è¦çš„å…¼å®¹æ€§è€ƒè™‘æ˜¯å¾ˆé‡è¦çš„ã€‚\nèƒ½å¤Ÿç»§ç»­å¯åŠ¨ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿï¼› èƒ½å¤Ÿåœ¨ç°æœ‰çš„å¹³å°ä¸Šå®ç° UEFIï¼Œå°½å¯èƒ½å¤šåœ°å¤ç”¨ç°æœ‰çš„å›ºä»¶ä»£ç ï¼Œå°†å¼€å‘èµ„æºå’Œæ—¶é—´è¦æ±‚é™åˆ°æœ€ä½ã€‚ æ—§ç‰ˆæ“ä½œç³»ç»Ÿæ”¯æŒ UEFI è§„èŒƒä»£è¡¨äº†æ”¶ç¼©å¼æ“ä½œç³»ç»Ÿå’Œå›ºä»¶åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­è¿›è¡Œé€šä¿¡çš„é¦–é€‰æ–¹å¼ã€‚ç„¶è€Œï¼Œé€‰æ‹©åˆ¶ä½œä¸€ä¸ªç¬¦åˆè¯¥è§„èŒƒçš„å¹³å°ï¼Œå¹¶ä¸æ’é™¤è¯¥å¹³å°ï¼Œä¹Ÿæ”¯æŒä¸äº†è§£ UEFI è§„èŒƒçš„ï¼Œç°æœ‰ä¼ ç»Ÿæ“ä½œç³»ç»ŸäºŒè¿›åˆ¶æ–‡ä»¶ã€‚\nUEFI è§„èŒƒå¹¶ä¸é™åˆ¶å¹³å°è®¾è®¡è€…ï¼Œé€‰æ‹©åŒæ—¶æ”¯æŒ UEFI è§„èŒƒå’Œæ›´ä¼ ç»Ÿçš„ \u0026ldquo;PC-AT \u0026ldquo;å¯åŠ¨åŸºç¡€æ¶æ„ã€‚å¦‚æœè¦å®ç°è¿™æ ·çš„ä¼ ç»ŸåŸºç¡€æ¶æ„ï¼Œåº”è¯¥æŒ‰ç…§ç°æœ‰çš„è¡Œä¸šæƒ¯ä¾‹æ¥å¼€å‘ï¼Œè¿™äº›æƒ¯ä¾‹æ˜¯åœ¨æœ¬è§„èŒƒèŒƒå›´ä¹‹å¤–å®šä¹‰çš„ã€‚åœ¨ä»»ä½•ç»™å®šçš„å¹³å°ä¸Šï¼Œæ”¯æŒçš„ä¼ ç»Ÿæ“ä½œç³»ç»Ÿçš„é€‰é¡¹æ˜¯ç”±è¯¥å¹³å°çš„åˆ¶é€ å•†å†³å®šçš„ã€‚\nåœ¨æ—§å¹³å°ä¸Šæ”¯æŒ UEFI è§„èŒƒ UEFI è§„èŒƒç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œå…è®¸ä»¥æœ€å°‘çš„å¼€å‘å·¥ä½œæ‰©å±•ç°æœ‰ç³»ç»Ÿä»¥æ”¯æŒå®ƒã€‚ç‰¹åˆ«æ˜¯ UEFI è§„èŒƒä¸­å®šä¹‰çš„æŠ½è±¡ç»“æ„å’ŒæœåŠ¡ï¼Œéƒ½å¯ä»¥åœ¨é—ç•™å¹³å°ä¸Šå¾—åˆ°æ”¯æŒ\nä¾‹å¦‚ï¼Œè¦åœ¨ç°æœ‰ä¸”å—æ”¯æŒçš„åŸºäº 32 ä½çš„å¹³å°ä¸Šå®ç°æ­¤ç±»æ”¯æŒï¼Œè¯¥å¹³å°ä½¿ç”¨ä¼ ç»Ÿ BIOS æ¥æ”¯æŒæ“ä½œç³»ç»Ÿå¯åŠ¨ï¼Œéœ€è¦æä¾›é¢å¤–çš„å›ºä»¶ä»£ç å±‚ã€‚éœ€è¦è¿™äº›é¢å¤–çš„ä»£ç æ¥å°†æœåŠ¡å’Œè®¾å¤‡çš„ç°æœ‰æ¥å£è½¬æ¢ä¸ºå¯¹æœ¬è§„èŒƒä¸­å®šä¹‰çš„æŠ½è±¡çš„æ”¯æŒã€‚\næœ¬æ–‡æ¡£ä¸­ä½¿ç”¨çš„çº¦å®š æ•°æ®ç»“æ„æè¿° æ”¯æŒçš„å¤„ç†å™¨æ˜¯â€œå°ç«¯â€æœºå™¨ã€‚è¿™ç§åŒºåˆ«æ„å‘³ç€å†…å­˜ä¸­å¤šå­—èŠ‚æ•°æ®é¡¹çš„ä½ä½å­—èŠ‚ä½äºæœ€ä½åœ°å€ï¼Œè€Œé«˜ä½å­—èŠ‚ä½äºæœ€é«˜åœ°å€ã€‚ä¸€äº›å—æ”¯æŒçš„ 64 ä½å¤„ç†å™¨å¯ä»¥é…ç½®ä¸ºâ€œå°ç«¯â€å’Œâ€œå¤§ç«¯â€æ“ä½œã€‚æ‰€æœ‰æ—¨åœ¨ç¬¦åˆæœ¬è§„èŒƒçš„å®ç°éƒ½ä½¿ç”¨â€œå°ç«¯â€æ“ä½œã€‚\nåœ¨æŸäº›å†…å­˜å¸ƒå±€æè¿°ä¸­ï¼ŒæŸäº›å­—æ®µè¢«æ ‡è®°ä¸ºä¿ç•™ã€‚è½¯ä»¶å¿…é¡»å°†è¿™äº›å­—æ®µåˆå§‹åŒ–ä¸ºé›¶å¹¶åœ¨è¯»å–æ—¶å¿½ç•¥å®ƒä»¬ã€‚åœ¨æ›´æ–°æ“ä½œä¸­ï¼Œè½¯ä»¶å¿…é¡»ä¿ç•™ä»»ä½•ä¿ç•™å­—æ®µã€‚\nåè®®æè¿° åè®®æè¿°ä¸€èˆ¬æœ‰ä»¥ä¸‹æ ¼å¼ï¼š\nåè®®åç§°ï¼šåè®®æ¥å£çš„æ­£å¼åç§°ã€‚ æ‘˜è¦ï¼šåè®®æ¥å£çš„ç®€è¦æè¿°ã€‚ GUIDï¼šåè®®æ¥å£çš„ 128 ä½ GUID (Globally Unique Identifier)ã€‚ åè®®æ¥å£ç»“æ„ï¼šä¸€ç§â€œc é£æ ¼â€çš„æ•°æ®ç»“æ„å®šä¹‰ï¼ŒåŒ…å«ç”±è¯¥åè®®æ¥å£äº§ç”Ÿçš„è¿‡ç¨‹å’Œæ•°æ®å­—æ®µã€‚ å‚æ•°ï¼šåè®®æ¥å£ç»“æ„ä¸­å„å­—æ®µçš„ç®€è¦è¯´æ˜ã€‚ æè¿°ï¼šå¯¹æ¥å£æä¾›çš„åŠŸèƒ½çš„æè¿°ï¼ŒåŒ…æ‹¬è°ƒç”¨è€…åº”è¯¥çŸ¥é“çš„ä»»ä½•é™åˆ¶å’Œè­¦å‘Šã€‚ ç›¸å…³å®šä¹‰ï¼šåè®®æ¥å£ç»“æ„æˆ–å…¶ä»»ä½•è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ç±»å‹å£°æ˜å’Œå¸¸é‡ã€‚ è¿‡ç¨‹æè¿° è¿‡ç¨‹æè¿°é€šå¸¸å…·æœ‰ä»¥ä¸‹æ ¼å¼ï¼š\nè¿‡ç¨‹åç§°ï¼šè¿‡ç¨‹çš„æ­£å¼åç§°ã€‚ æ‘˜è¦ï¼šè¿‡ç¨‹çš„ç®€è¦è¯´æ˜ã€‚ åŸå‹ï¼šå®šä¹‰è°ƒç”¨åºåˆ—çš„â€œC é£æ ¼â€è¿‡ç¨‹æ ‡å¤´ã€‚ å‚æ•°ï¼šå¯¹ç¨‹åºåŸå‹ä¸­æ¯ä¸ªå­—æ®µçš„ç®€è¦æè¿°ã€‚ æè¿°ï¼šå¯¹æ¥å£æ‰€æä¾›çš„åŠŸèƒ½çš„æè¿°ï¼ŒåŒ…æ‹¬è°ƒç”¨è€…åº”è¯¥æ³¨æ„çš„ä»»ä½•é™åˆ¶å’Œæ³¨æ„äº‹é¡¹ã€‚ ç›¸å…³å®šä¹‰ï¼šä»…ç”±è¯¥è¿‡ç¨‹ä½¿ç”¨çš„ç±»å‹å£°æ˜å’Œå¸¸é‡ã€‚ è¿”å›çš„çŠ¶æ€ä»£ç ï¼šå¯¹æ¥å£æ‰€è¿”å›çš„ä»»ä½•ä»£ç çš„æè¿°ã€‚è¯¥è¿‡ç¨‹éœ€è¦å®ç°æœ¬è¡¨ä¸­åˆ—å‡ºçš„ä»»ä½•çŠ¶æ€ä»£ç ã€‚å¯ä»¥è¿”å›æ›´å¤šçš„é”™è¯¯ä»£ç ï¼Œä½†æ˜¯å®ƒä»¬ä¸ä¼šè¢«æ ‡å‡†çš„ç¬¦åˆæ€§æµ‹è¯•æ‰€æµ‹è¯•ï¼Œè€Œä¸”ä»»ä½•ä½¿ç”¨è¯¥ç¨‹åºçš„è½¯ä»¶ï¼Œéƒ½ä¸èƒ½ä¾èµ–äºå®ç°å¯èƒ½æä¾›çš„ä»»ä½•æ‰©å±•é”™è¯¯ä»£ç ã€‚ æŒ‡ä»¤æè¿° EBC æŒ‡ä»¤çš„æŒ‡ä»¤æè¿°ä¸€èˆ¬æœ‰ä»¥ä¸‹æ ¼å¼ï¼š\næŒ‡ä»¤åç§°ï¼šæŒ‡ä»¤çš„æ­£å¼åç§°ã€‚ è¯­æ³•ï¼šæŒ‡ä»¤çš„ç®€è¦æè¿°ã€‚ æè¿°ï¼šå¯¹æŒ‡ä»¤æ‰€æä¾›çš„åŠŸèƒ½çš„æè¿°ï¼Œå¹¶é™„æœ‰æŒ‡ä»¤ç¼–ç çš„è¯¦ç»†è¡¨æ ¼ã€‚ æ“ä½œï¼šè¯¦ç»†è¯´æ˜å¯¹æ“ä½œæ•°è¿›è¡Œçš„æ“ä½œã€‚ è¡Œä¸ºå’Œé™åˆ¶ï¼šé€é¡¹æè¿°æŒ‡ä»¤ä¸­æ¶‰åŠçš„æ¯ä¸ªæ“ä½œæ•°çš„è¡Œä¸ºï¼Œä»¥åŠé€‚ç”¨äºæ“ä½œæ•°æˆ–æŒ‡ä»¤çš„ä»»ä½•é™åˆ¶ã€‚ ä¼ªä»£ç çº¦å®š æå‡ºä¼ªä»£ç æ˜¯ä¸ºäº†ä»¥æ›´ç®€æ´çš„å½¢å¼æè¿°ç®—æ³•ã€‚æœ¬æ–‡ä»¶ä¸­çš„æ‰€æœ‰ç®—æ³•éƒ½ä¸æ‰“ç®—ç›´æ¥è¿›è¡Œç¼–è¯‘ã€‚ä»£ç æ˜¯åœ¨ä¸å‘¨å›´æ–‡æœ¬ç›¸å¯¹åº”çš„æ°´å¹³ä¸Šå‘ˆç°çš„ã€‚\nåœ¨æè¿°å˜é‡æ—¶ï¼Œåˆ—è¡¨æ˜¯ä¸€ä¸ªæ— åºçš„åŒè´¨å¯¹è±¡çš„é›†åˆã€‚ä¸€ä¸ªé˜Ÿåˆ—æ˜¯ä¸€ä¸ªåŒè´¨å¯¹è±¡çš„æœ‰åºåˆ—è¡¨ã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™å‡è®¾æ’åºä¸ºå…ˆè¿›å…ˆå‡ºã€‚\nä¼ªä»£ç ä»¥ç±»ä¼¼äº C çš„æ ¼å¼å‘ˆç°ï¼Œåœ¨é€‚å½“çš„åœ°æ–¹ä½¿ç”¨ C çº¦å®šã€‚ç¼–ç é£æ ¼ï¼Œç‰¹åˆ«æ˜¯ç¼©è¿›é£æ ¼ï¼Œæ˜¯ä¸ºäº†å¯è¯»æ€§ï¼Œä¸ä¸€å®šç¬¦åˆ UEFI è§„èŒƒçš„å®ç°ã€‚\næ’ç‰ˆçº¦å®š æœ¬æ–‡ä»¶é‡‡ç”¨äº†ä»¥ä¸‹æè¿°çš„æ’ç‰ˆå’Œè¯´æ˜æ€§æƒ¯ä¾‹ã€‚\nçº¯æ–‡æœ¬ï¼šè§„èŒƒä¸­çš„ç»å¤§éƒ¨åˆ†æè¿°æ€§æ–‡æœ¬éƒ½ä½¿ç”¨æ™®é€šæ–‡æœ¬å­—ä½“ã€‚ çº¯æ–‡æœ¬ï¼ˆè“è‰²ï¼‰ï¼šä»»ä½•æœ‰ä¸‹åˆ’çº¿å’Œè“è‰²çš„çº¯æ–‡æœ¬éƒ½è¡¨ç¤ºä¸äº¤å‰å‚è€ƒèµ„æ–™çš„æ´»åŠ¨é“¾æ¥ã€‚ç‚¹å‡»è¯¥è¯ï¼Œå°±å¯ä»¥è·Ÿè¸ªè¶…é“¾æ¥ã€‚ åŠ ç²—ï¼šåœ¨æ–‡æœ¬ä¸­ï¼Œç²—ä½“å­—æ ‡è¯†äº†ä¸€ä¸ªå¤„ç†å™¨å¯„å­˜å™¨çš„åç§°ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œé»‘ä½“å­—å¯ä»¥ä½œä¸ºæ®µè½ä¸­çš„æ ‡é¢˜ã€‚ æ–œä½“ï¼šåœ¨æ–‡æœ¬ä¸­ï¼Œæ–œä½“å­—å¯ä»¥ç”¨ä½œå¼ºè°ƒï¼Œä»¥å¼•å…¥ä¸€ä¸ªæ–°çš„æœ¯è¯­æˆ–è¡¨ç¤ºæ‰‹å†Œæˆ–è§„èŒƒçš„åç§°ã€‚ åŠ ç²—ç­‰å®½ï¼ˆæš—çº¢è‰²ï¼‰ï¼šè®¡ç®—æœºä»£ç ã€ç¤ºä¾‹ä»£ç æ®µå’Œæ‰€æœ‰åŸå‹ä»£ç æ®µä½¿ç”¨ BOLD Monospace å­—ä½“ï¼Œé¢œè‰²ä¸ºæš—çº¢è‰²ã€‚è¿™äº›ä»£ç åˆ—è¡¨é€šå¸¸å‡ºç°åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç‹¬ç«‹çš„æ®µè½ä¸­ï¼Œå°½ç®¡å•è¯æˆ–ç‰‡æ®µä¹Ÿå¯ä»¥åµŒå…¥åˆ°ä¸€ä¸ªæ­£å¸¸çš„æ–‡æœ¬æ®µè½ä¸­ã€‚ åŠ ç²—ç­‰å®½ï¼ˆè“è‰²ï¼‰ï¼šç”¨ç²—ä½“å•è‰²å­—ä½“çš„å­—ï¼Œä¸‹åˆ’çº¿å’Œè“è‰²çš„å­—ï¼Œè¡¨ç¤ºè¯¥åŠŸèƒ½æˆ–ç±»å‹å®šä¹‰çš„ä»£ç å®šä¹‰çš„æ´»åŠ¨è¶…é“¾æ¥ã€‚ç‚¹å‡»è¯¥è¯ï¼Œå³å¯è¿›å…¥è¶…é“¾æ¥ã€‚ æ³¨æ„ï¼šå‡ºäºç®¡ç†å’Œæ–‡ä»¶å¤§å°çš„è€ƒè™‘ï¼Œæ¯ä¸€é¡µä¸Šåªæœ‰ç¬¬ä¸€æ¬¡å‡ºç°çš„å‚è€ƒæ–‡çŒ®æ˜¯ä¸€ä¸ªä¸»åŠ¨é“¾æ¥ã€‚åŒä¸€é¡µä¸Šçš„åç»­å‚è€ƒæ–‡çŒ®ä¸ä¼šè¢«ä¸»åŠ¨é“¾æ¥åˆ°å®šä¹‰ä¸Šï¼Œè€Œæ˜¯ä½¿ç”¨æ ‡å‡†çš„ã€æ— ä¸‹åˆ’çº¿çš„ BOLD Monospace å­—ä½“ã€‚åœ¨é¡µé¢ä¸Šæ‰¾åˆ°è¯¥åç§°çš„ç¬¬ä¸€ä¸ªå®ä¾‹ï¼ˆä½¿ç”¨ä¸‹åˆ’çº¿çš„ BOLD Monospace å­—ä½“ï¼‰ï¼Œç‚¹å‡»è¯¥è¯å³å¯è·³è½¬åˆ°è¯¥åŠŸèƒ½æˆ–ç±»å‹çš„å®šä¹‰ã€‚\næ–œä½“ç­‰å®½ï¼šåœ¨ä»£ç æˆ–æ–‡æœ¬ä¸­ï¼Œæ–œä½“å­—è¡¨ç¤ºå¿…é¡»æä¾›çš„å˜é‡ä¿¡æ¯çš„å ä½ç¬¦åç§°ï¼ˆå³å‚æ•°ï¼‰ã€‚ æ•°å­—æ ¼å¼ åœ¨æœ¬æ ‡å‡†ä¸­ï¼ŒäºŒè¿›åˆ¶æ•°å­—æ˜¯ç”±ä»…ç”±è¥¿æ–¹é˜¿æ‹‰ä¼¯æ•°å­— 0 å’Œ 1 ç»„æˆçš„ä»»ä½•æ•°å­—åºåˆ—è¡¨ç¤ºçš„ï¼Œåé¢ç´§è·Ÿä¸€ä¸ªå°å†™çš„ bï¼ˆä¾‹å¦‚ï¼Œ0101bï¼‰ã€‚åœ¨äºŒè¿›åˆ¶æ•°å­—è¡¨ç¤ºä¸­çš„å­—ç¬¦ä¹‹é—´å¯ä»¥åŒ…å«ä¸‹åˆ’çº¿æˆ–ç©ºæ ¼ï¼Œä»¥å¢åŠ å¯è¯»æ€§æˆ–åˆ’åˆ†é¢†åŸŸè¾¹ç•Œï¼ˆä¾‹å¦‚ï¼Œ0 0101 1010b æˆ– 0_0101_1010bï¼‰ã€‚\nåå…­è¿›åˆ¶ åå…­è¿›åˆ¶æ•°å­—åœ¨æœ¬æ ‡å‡†ä¸­ç”¨ 0x è¡¨ç¤ºï¼Œå‰é¢æ˜¯ä»…ç”±è¥¿é˜¿æ‹‰ä¼¯æ•°å­— 0 è‡³ 9 å’Œ/æˆ–å¤§å†™è‹±æ–‡å­—æ¯ A è‡³ F ç»„æˆçš„ä»»ä½•æ•°å­—åºåˆ—ï¼ˆä¾‹å¦‚ï¼Œ0xFA23ï¼‰ã€‚åå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºä¸­çš„å­—ç¬¦ä¹‹é—´å¯ä»¥åŒ…å«ä¸‹åˆ’çº¿æˆ–ç©ºæ ¼ï¼Œä»¥å¢åŠ å¯è¯»æ€§æˆ–åˆ’å®šå­—æ®µè¾¹ç•Œï¼ˆä¾‹å¦‚ï¼Œ0xB FD8C FA23 æˆ– 0xB_FD8C_FA23ï¼‰ã€‚\nåè¿›åˆ¶ åœ¨æœ¬æ ‡å‡†ä¸­ï¼Œå°æ•°æ˜¯ç”±ä»…ç”±é˜¿æ‹‰ä¼¯æ•°å­— 0 åˆ° 9 ç»„æˆçš„ä»»ä½•æ•°å­—åºåˆ—æ¥è¡¨ç¤ºçš„ï¼Œåé¢ä¸ç´§è·Ÿå°å†™çš„ b æˆ–å°å†™çš„ hï¼ˆä¾‹å¦‚ï¼Œ25ï¼‰ã€‚æœ¬æ ‡å‡†ä½¿ç”¨ä»¥ä¸‹æƒ¯ä¾‹æ¥è¡¨ç¤ºå°æ•°ï¼š\nå°æ•°ç‚¹åˆ†éš”ç¬¦ï¼ˆå³åˆ†éš”æ•°å­—çš„æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ï¼‰æ˜¯ä¸€ä¸ªå¥å·ï¼› åƒä½æ•°åˆ†éš”ç¬¦ï¼ˆå³åˆ†éš”æ•°å­—éƒ¨åˆ†çš„ä¸‰ä½æ•°ç»„ï¼‰æ˜¯ä¸€ä¸ªé€—å·ï¼› åƒä½æ•°åˆ†éš”ç¬¦ç”¨äºæ•°å­—çš„æ•´æ•°éƒ¨åˆ†ï¼Œä¸ç”¨äºæ•°å­—çš„å°æ•°éƒ¨åˆ†ã€‚ äºŒè¿›åˆ¶å‰ç¼€ æœ¬æ ‡å‡†ä½¿ç”¨å›½é™…å•ä½åˆ¶ï¼ˆSIï¼‰ä¸­å®šä¹‰çš„å‰ç¼€æ¥è¡¨ç¤º 10 çš„å¹‚å€¼ã€‚è§ \u0026ldquo;SI äºŒè¿›åˆ¶å‰ç¼€ \u0026ldquo;æ ‡é¢˜ä¸‹çš„ \u0026ldquo;UEFI ç›¸å…³æ–‡ä»¶é“¾æ¥\u0026rdquo;ï¼ˆhttp://uefi.org/uefiï¼‰ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æœ¬æ ‡å‡†ä½¿ç”¨ISO/IEC 80000-13ã€Šæ•°é‡å’Œå•ä½\u0026ndash;ç¬¬ 13 éƒ¨åˆ†ï¼šä¿¡æ¯ç§‘å­¦å’ŒæŠ€æœ¯ã€‹å’Œ IEEE 1514ã€ŠäºŒè¿›åˆ¶å€æ•°å‰ç¼€æ ‡å‡†ã€‹ä¸­å®šä¹‰çš„äºŒè¿›åˆ¶å‰ç¼€ï¼Œç”¨äºè¡¨ç¤º 2 çš„å¹‚å€¼ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¾‹å¦‚ï¼Œ4 KB æ„å‘³ç€ 4000 ä¸ªå­—èŠ‚ï¼Œ4 KiB æ„å‘³ç€ 4096 ä¸ªå­—èŠ‚ã€‚\nä¿®è®¢å· å¯¹ UEFI è§„èŒƒçš„æ›´æ–°è¢«è®¤ä¸ºæ˜¯æ–°çš„ä¿®è®¢æˆ–å‹˜è¯¯è¡¨ï¼Œå¦‚ä¸‹æ‰€è¿°ï¼š\nå½“æœ‰å®è´¨æ€§çš„æ–°å†…å®¹æˆ–å¯èƒ½ä¿®æ”¹ç°æœ‰è¡Œä¸ºçš„å˜åŒ–æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ä¿®è®¢ã€‚æ–°çš„ä¿®è®¢ç‰ˆç”±ä¸€ä¸ªä¸»è¦çš„ã€‚æ¬¡è¦çš„ç‰ˆæœ¬å·æ¥æŒ‡å®šï¼ˆä¾‹å¦‚ï¼šxx.yyï¼‰ã€‚åœ¨å˜åŒ–ç‰¹åˆ«å°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰ä¸€ä¸ª major.minor.minor çš„å‘½åæƒ¯ä¾‹ï¼ˆä¾‹å¦‚ xx.yy.zzï¼‰ã€‚ å½“æ‰¹å‡†çš„è§„èŒƒæ›´æ–°ä¸åŒ…æ‹¬ä»»ä½•é‡è¦çš„æ–°ææ–™æˆ–ä¿®æ”¹ç°æœ‰è¡Œä¸ºæ—¶ï¼Œå°±ä¼šäº§ç”Ÿå‹˜è¯¯çš„ç‰ˆæœ¬ã€‚å‹˜è¯¯çš„æŒ‡å®šæ–¹æ³•æ˜¯åœ¨ç‰ˆæœ¬å·åé¢åŠ ä¸Šä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œå¦‚ xx.yy å‹˜è¯¯ Aã€‚ ","permalink":"https://lifeislife.cn/posts/zh-uefi%E8%A7%84%E8%8C%83-1-%E5%BC%95%E8%A8%80/","summary":"\u003ch1 id=\"å¼•è¨€\"\u003eå¼•è¨€\u003c/h1\u003e\n\u003cp\u003eç»Ÿä¸€å¯æ‰©å±•å›ºä»¶æ¥å£ (UEFI) è§„èŒƒæè¿°äº†æ“ä½œç³»ç»Ÿå’Œå¹³å°å›ºä»¶ä¹‹é—´çš„æ¥å£ã€‚UEFI ä¹‹å‰æ˜¯å¯æ‰©å±•å›ºä»¶æ¥å£è§„èŒƒ 1.10 (EFI)ã€‚å› æ­¤ï¼Œä¸€äº›ä»£ç å’ŒæŸäº›åè®®åç§°ä¿ç•™äº† EFI åç§°ã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œæœ¬è§„èŒƒä¸­çš„ EFI åç§°å¯å‡å®šä¸º UEFI çš„ä¸€éƒ¨åˆ†ã€‚\u003c/p\u003e","title":"ZH-UEFI è§„èŒƒ -1-å¼•è¨€"},{"content":"ä¿ç•™ç°åœº ä½¿ç”¨ VSCode è¿œç¨‹ç™»å½•å¤±è´¥ï¼ŒæŠ¥é”™ï¼šFailed to connect to the remote extension host server (Error: WebSocket close with status code 1006)ã€‚\nè§£å†³æ–¹æ³• vim /etc/ssh/sshd_config AllowTcpForwarding no AllowAgentForwarding no # æ›¿æ¢ä¸º AllowTcpForwarding yes AllowAgentForwarding yes ä¿å­˜åé‡å¯ sshd æœåŠ¡ï¼š\nsystemctl restart sshd ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3vscode%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5error-websocket-close-with-status-code-1006/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eä½¿ç”¨ VSCode è¿œç¨‹ç™»å½•å¤±è´¥ï¼ŒæŠ¥é”™ï¼šFailed to connect to the remote extension host server (Error: WebSocket close with status code 1006)ã€‚\u003c/p\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003evim /etc/ssh/sshd_config\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eAllowTcpForwarding no\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eAllowAgentForwarding no\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ›¿æ¢ä¸º\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eAllowTcpForwarding yes\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eAllowAgentForwarding yes\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¿å­˜åé‡å¯ \u003ccode\u003esshd\u003c/code\u003e æœåŠ¡ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esystemctl restart sshd\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"è§£å†³ VSCode è¿œç¨‹ç™»å½•å¤±è´¥ Error: WebSocket close with status code 1006"},{"content":"ç®€ä»‹ GitHub Actions æ˜¯ GitHub åœ¨ 2018 å¹´æ¨å‡ºçš„æŒç»­é›†æˆæœåŠ¡ã€‚å®ƒå¯ä»¥è‡ªåŠ¨å®Œæˆä¸€äº›å¼€å‘å‘¨æœŸå†…çš„ä»»åŠ¡ï¼Œå¦‚ Push ä»£ç æ—¶è‡ªåŠ¨ç¼–è¯‘ï¼ŒPull ä»£ç æ—¶è‡ªåŠ¨æ‰§è¡Œæµ‹è¯•è„šæœ¬ç­‰ç­‰ã€‚\næˆ‘äº†è§£ GitHub Actions çš„å¥‘æœºæ˜¯ï¼Œæˆ‘åœ¨ GitHub ä¸Šä¿å­˜äº†ä¸€äº› Markdown æ–‡æ¡£ï¼Œæˆ‘å¸Œæœ›æ¯æ¬¡æ›´æ–°æ–‡æ¡£åè‡ªåŠ¨ä½¿ç”¨ Pandoc è½¬æ¢æˆ PDF æ–‡æ¡£ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ å¦‚ä½•é€šè¿‡ GitHub Actions å®ç°è¿™æ ·çš„éœ€æ±‚ã€‚\né¦–å…ˆæˆ‘ä»¬å…ˆç›´è§‚çš„äº†è§£ä¸€ä¸‹å®ƒåœ¨ GitHub çš„ä½ç½®ï¼Œå¦‚æœæ‰“å¼€ä¸€ä¸ªä»“åº“ï¼Œå®ƒæœ‰å›¾ä¸­ç»¿è‰²å¯¹å·âˆšï¼Œæˆ–è€…çº¢è‰²å‰å·Ã—ï¼Œè¯´æ˜è¿™ä¸ªé¡¹ç›®é…ç½®äº† GitHub Actionsï¼Œç»¿è‰²è¡¨ç¤ºè‡ªåŠ¨åŒ–çš„æµç¨‹è¿è¡ŒæˆåŠŸäº†ï¼Œçº¢è‰²è¡¨ç¤ºå¤±è´¥äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬ç‚¹å¼€ActionsæŒ‰é’®å°±å¯ä»¥æŸ¥çœ‹å…·ä½“çš„ä»»åŠ¡è¯¦æƒ…ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆå­¦ä¹ å¦‚ä½•é…ç½®ä¸€ä¸ªç®€å•çš„ GitHub Actionsã€‚\né…ç½® GitHub Actions GitHub Actions å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€äº›è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œå·¥å…·ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å‡å°‘é‡å¤å·¥ä½œï¼Œæ‰€ä»¥è¿™äº›å·¥å…·éƒ½å¯ä»¥åšæˆæ™®é€‚æ€§çš„å·¥å…·ã€‚è€Œ GitHub å®˜æ–¹å°±å¼€æ”¾äº†ä¸€ä¸ªè¿™ç±»å·¥å…·çš„å¸‚åœºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢æœç´¢è‡ªå·±æƒ³è¦çš„å·¥å…·ã€‚å› ä¸ºåˆå­¦ GitHub Actions æ‰€ä»¥ä¹Ÿä¸çŸ¥é“æ€ä¹ˆå†™é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æœç´¢ä¸€ä¸ªå¹¶åº”ç”¨å®ƒï¼Œçœ‹çœ‹åˆ«äººæ˜¯æ€ä¹ˆå†™çš„ã€‚\næˆ‘ä»¬è¿›å…¥ä¸€ä¸ªè‡ªå·±çš„ä»“åº“ï¼Œç‚¹å‡»Actionsï¼Œæœç´¢æ¡†ä¸­æœç´¢PDFï¼Œåœ¨æœç´¢ç»“æœä¸­æ‰¾åˆ°Create PDF Â· Actionsè¿™ä¸ªå·¥å…·ã€‚å¦‚æœæœç´¢åˆ°ç‚¹å‡»Configureã€‚å¦‚æœæ˜¾ç¤ºæœªæ‰¾åˆ°ï¼Œåˆ™ç‚¹å‡»set up a workflow yourselfï¼ŒåŒæ ·æœç´¢PDFã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€è¯¦æƒ…é¡µé¢ï¼Œæ‹‰åˆ°åº•ï¼Œå°†Example usageã€‚é‡Œçš„å†…å®¹å¤åˆ¶åˆ°ç¼–è¾‘æ¡†ä¸­ã€‚ç‚¹å‡»å³ä¸Šè§’Start commitå°†ä¼šæŠŠæˆ‘ä»¬æ–°å»ºçš„main.ymlæäº¤åˆ°ä»“åº“ä¸­ã€‚è¿™å°±ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªç”Ÿæˆ PDF çš„ GitHub Actionsã€‚å½“ç„¶æ¯ä¸ª Actions éƒ½æœ‰ä¸€äº›ä½¿ç”¨è¦æ±‚ï¼Œæ¯”å¦‚è¿™é‡Œè¿˜è¦æ ¹æ®ä»‹ç»ï¼Œåˆ›å»ºå‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ä»å“ªä¸ªæ–‡ä»¶å¤¹è·å–æºæ–‡ä»¶ï¼Œç”Ÿæˆåçš„ PDF åˆä¼šæ”¾åˆ°å“ªä¸ªæ–‡ä»¶å¤¹ç­‰ã€‚è¿™é‡Œå°±ä¸å†ä»‹ç»ï¼Œæˆ‘ä»¬å…ˆäº†è§£å¦‚ä½•åˆ›å»ºä¸€ä¸ª Actionsã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image Workflow é…ç½® GitHub Actions çš„é…ç½®æ–‡ä»¶å«åš workflow æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨ä»£ç ä»“åº“çš„.github/workflows ç›®å½•ã€‚\nworkflow æ–‡ä»¶é‡‡ç”¨ YAML æ ¼å¼ï¼Œæ–‡ä»¶åå¯ä»¥ä»»æ„å–ï¼Œä½†æ˜¯åç¼€åç»Ÿä¸€ä¸º.yml or .yamlï¼Œæ¯”å¦‚ foo.yml or foo.yamlã€‚ä¸€ä¸ªåº“å¯ä»¥æœ‰å¤šä¸ª workflow æ–‡ä»¶ã€‚GitHub åªè¦å‘ç°.github/workflows ç›®å½•é‡Œé¢æœ‰.yml or .yaml æ–‡ä»¶ï¼Œå°±ä¼šè‡ªåŠ¨è¿è¡Œè¯¥æ–‡ä»¶ï¼ˆå¹¶è¡Œï¼‰ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸ªå‚æ•°æ¥è§£é‡Šéƒ½æœ‰å“ªäº›åŠŸèƒ½ã€‚\non è§¦å‘ workflow çš„ GitHub äº‹ä»¶çš„åç§°ã€‚æ¯”å¦‚pushä»£ç æ—¶è§¦å‘ï¼Œå…¶ä»–äººforkä»£ç ä»“æ—¶è§¦å‘ç­‰ç­‰ã€‚\nå¯ä»¥åªæœ‰ä¸€ä¸ªäº‹ä»¶è§¦å‘ï¼Œ\non: push ä¹Ÿå¯æœ‰å¤šä¸ªäº‹ä»¶è§¦å‘ï¼Œä½¿ç”¨åˆ—è¡¨åˆ—ä¸¾ï¼Œ\non: [push, fork] æ‰€æœ‰æ”¯æŒçš„äº‹ä»¶åˆ—è¡¨ï¼Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚\non.[push|fork].[tags|branches] æ³¨æ„ï¼šä»è¿™é‡Œå¼€å§‹å°±ä¼šå‡ºç°ä¸€ä¸ªå­—æ®µä¸‹æœ‰å­å­—æ®µï¼Œæ¯ä¸ªç‚¹å·.åˆ†å‰²ä¸€ä¸ªå­å­—æ®µã€‚å¦‚pushæˆ–è€…forkå¯ä»¥ä½œä¸ºonçš„å­å­—æ®µï¼Œtagsæˆ–è€…brancheså¯ä»¥ä½œä¸ºpushæˆ–è€…forkçš„å­å­—æ®µã€‚åœ¨yamlæ–‡ä»¶ä¸­ï¼Œç¼©è¿›å¾ˆé‡è¦ï¼Œæ¯ä¸ªç¼©è¿›éƒ½è¡¨ç¤ºæ˜¯ä»å±å…³ç³»ï¼Œè¡¨ç¤ºæ˜¯è¯¥å­—æ®µçš„å­å­—æ®µã€‚åƒä¸‡è¦æ³¨æ„ç¼©è¿›å…³ç³»ï¼Œå¦‚æœç¼©è¿›å‡ºé”™ï¼Œé‚£ä¹ˆå°†æ— æ³•è§£æyamlæ–‡ä»¶ã€‚\næŒ‡å®šè§¦å‘äº‹ä»¶æ—¶ï¼Œå¯ä»¥é™å®šåˆ†æ”¯æˆ–æ ‡ç­¾ã€‚\non: push: branches: - master ä¸Šé¢ä»£ç æŒ‡å®šï¼Œåªæœ‰ master åˆ†æ”¯å‘ç”Ÿ push äº‹ä»¶æ—¶ï¼Œæ‰ä¼šè§¦å‘ workflowã€‚\nname å·¥ä½œæµç¨‹çš„åç§°ã€‚GitHub åœ¨ä»“åº“çš„æ“ä½œé¡µé¢ä¸Šæ˜¾ç¤ºå·¥ä½œæµç¨‹çš„åç§°ã€‚å¦‚æœçœç•¥ nameï¼ŒGitHub å°†å…¶è®¾ç½®ä¸ºç›¸å¯¹äºä»“åº“æ ¹ç›®å½•çš„å·¥ä½œæµç¨‹æ–‡ä»¶è·¯å¾„ã€‚\njobs workflow è¿è¡ŒåŒ…æ‹¬ä¸€é¡¹æˆ–å¤šé¡¹ jobsã€‚jobs é»˜è®¤æ˜¯å¹¶è¡Œè¿è¡Œã€‚è¦æŒ‰é¡ºåºè¿è¡Œä½œä¸šï¼Œå¯ä»¥ä½¿ç”¨ [job_id].needs å…³é”®è¯åœ¨å…¶ä»– job ä¸Šå®šä¹‰ä¾èµ–é¡¹ã€‚\næ¯ä¸ªä½œä¸šåœ¨ runs-on æŒ‡å®šçš„è¿è¡Œå™¨ç¯å¢ƒä¸­è¿è¡Œã€‚\njobs.[job_id] jobs ä¸­çš„æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ª[job_id] ï¼Œä¸”å…¶å¿…é¡»ä¸º jobs å¯¹è±¡ä¸­å”¯ä¸€çš„å­—ç¬¦ä¸²é”®å€¼ã€‚[job_id]å¿…é¡»ä»¥å­—æ¯æˆ–_å¼€å¤´ï¼Œå¹¶ä¸”åªèƒ½åŒ…å«å­—æ¯æ•°å­—å­—ç¬¦ã€-æˆ–_ã€‚\njobs: first_job: # [job_id]ï¼Œä»»åŠ¡ id name: My first job second_job: name: My second job jobs.[job_id].[runs-on] runs-on å­—æ®µæŒ‡å®šè¿è¡Œæ‰€éœ€è¦çš„è™šæ‹Ÿæœºç¯å¢ƒã€‚å®ƒæ˜¯å¿…å¡«å­—æ®µã€‚ç›®å‰å¯ç”¨çš„è™šæ‹Ÿæœºå¦‚ä¸‹ã€‚\n- ubuntu-latestï¼Œubuntu-18.04æˆ–ubuntu-16.04 - windows-latestï¼Œwindows-2019æˆ–windows-2016 - macOS-latestæˆ–macOS-10.14 ä¸‹é¢ä»£ç æŒ‡å®šè™šæ‹Ÿæœºç¯å¢ƒä¸º ubuntu-18.04ã€‚\nruns-on: ubuntu-18.04 jobs.[job_id].name workflow æ–‡ä»¶çš„ä¸»ä½“æ˜¯ jobs å­—æ®µï¼Œè¡¨ç¤ºè¦æ‰§è¡Œçš„ä¸€é¡¹æˆ–å¤šé¡¹ä»»åŠ¡ã€‚\njob_id é‡Œé¢çš„ name å­—æ®µæ˜¯ä»»åŠ¡çš„è¯´æ˜ã€‚å®ƒå¯ä»¥åœ¨ç½‘é¡µç«¯çš„ UI ä¸Šæ˜¾ç¤ºã€‚\njobs: first_job: name: My first job # [job_name]ï¼Œä»»åŠ¡åç§° second_job: name: My second job jobs.[job_id].needs needs å­—æ®µæŒ‡å®šå½“å‰ä»»åŠ¡çš„ä¾èµ–å…³ç³»ï¼Œå³è¿è¡Œé¡ºåºã€‚\njobs: job1: job2: needs: job1 job3: needs: [job1, job2] ä¸Šé¢ä»£ç ä¸­ï¼Œjob1 å¿…é¡»å…ˆäº job2 å®Œæˆï¼Œè€Œ job3 ç­‰å¾… job1 å’Œ job2 çš„å®Œæˆæ‰èƒ½è¿è¡Œã€‚å› æ­¤ï¼Œè¿™ä¸ª workflow çš„è¿è¡Œé¡ºåºä¾æ¬¡ä¸ºï¼šjob1ã€job2ã€job3ã€‚\njobs.[job_id].steps steps å­—æ®µæŒ‡å®šæ¯ä¸ª Job çš„è¿è¡Œæ­¥éª¤ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤ã€‚æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥æŒ‡å®šä»¥ä¸‹ä¸‰ä¸ªå­—æ®µã€‚\n- jobs.[job_id].steps.nameï¼šæ­¥éª¤åç§°ã€‚ - jobs.[job_id].steps.runï¼šè¯¥æ­¥éª¤è¿è¡Œçš„å‘½ä»¤æˆ–è€… actionã€‚ - jobs.[job_id].steps.envï¼šè¯¥æ­¥éª¤æ‰€éœ€çš„ç¯å¢ƒå˜é‡ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ workflow æ–‡ä»¶çš„èŒƒä¾‹ã€‚\nname: Greeting from Mona on: push jobs: my-job: name: My Job runs-on: ubuntu-latest steps: - name: Print a greeting env: MY_VAR: Hi there! My name is FIRST_NAME: Mona MIDDLE_NAME: The LAST_NAME: Octocat run: | echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME. ä¸Šé¢ä»£ç ä¸­ï¼Œsteps å­—æ®µåªåŒ…æ‹¬ä¸€ä¸ªæ­¥éª¤ã€‚è¯¥æ­¥éª¤å…ˆæ³¨å…¥å››ä¸ªç¯å¢ƒå˜é‡ï¼Œç„¶åæ‰§è¡Œä¸€æ¡ Bash å‘½ä»¤ã€‚\njobs.[job_id].steps[*].uses é€‰æ‹©ä¸€ä¸ª actionï¼Œå¯ä»¥ç†è§£ä¸ºè‹¥å¹² steps.runï¼Œæœ‰åˆ©äºä»£ç å¤ç”¨ã€‚è¿™ä¹Ÿæ˜¯ github action æœ€ä¸»è¦çš„åŠŸèƒ½ã€‚\næ¯”å¦‚æœ€å¸¸ç”¨çš„ï¼Œä¸‹è½½æœ¬ä»“åº“çš„ä»£ç åˆ°å·¥ä½œåŒºï¼Œå°±æ˜¯ä½¿ç”¨çš„ä¸€ä¸ª action å®Œæˆçš„ï¼š\nsteps: - name: Check out Git repository uses: actions/checkout@v2 æ³¨ï¼š@v2 ä»€ä¹ˆæ„æ€ï¼Ÿ è¡¨ç¤º Action çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¦‚æœä¸å¸¦ç‰ˆæœ¬å·çš„è¯ï¼Œå°±æ˜¯é»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚Github å®˜æ–¹å¼ºçƒˆè¦æ±‚æˆ‘ä»¬å¸¦ä¸Šç‰ˆæœ¬å·ã€‚è¿™æ ·å­çš„è¯ï¼Œæˆ‘ä»¬å°±ä¸ä¼šå‡ºç°ï¼šå†™å¥½ä¸€ä¸ª Workflowï¼Œä½†æ˜¯ç”±äºæŸä¸ª Action çš„ä½œè€…ä¸€æ›´æ–°ï¼Œæˆ‘ä»¬çš„ Workflow å°±å´©äº†çš„é—®é¢˜\njobs.[job_id].steps.run åœ¨ shell ä¸­æ‰§è¡Œçš„å‘½ä»¤ï¼š\nsteps: - uses: actions/checkout@v2 - name: create dir id: dir run: | mkdir output # create output dir ä»¥ä¸Šé…ç½®æ˜¯åœ¨ä¸‹è½½å®Œæœ¬ä»“åº“çš„ä»£ç åï¼Œåœ¨ä»“åº“æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªoutputæ–‡ä»¶å¤¹ã€‚æ³¨æ„run:åçš„|è¡¨ç¤ºå¯ä»¥å¤šè¡Œå‘½ä»¤ã€‚å¦‚æœæ²¡æœ‰|è¡¨ç¤ºåªèƒ½æ‰§è¡Œä¸€æ¡å‘½ä»¤ã€‚\njobs.[job_id].steps.working-directory ç”¨æ¥æŒ‡å®šåœ¨runå‘½ä»¤åœ¨å“ªæ‰§è¡Œã€‚\n- name: Create dir run: mkdir output working-directory: ./build jobs.[job_id].steps.shell ç”¨æ¥æŒ‡å®š shell ç±»å‹ï¼Œå¦‚ Pythonï¼Œbashï¼Œpowershell ç­‰ã€‚\nsteps: - name: Display the path run: echo $PATH shell: bash æ‰€æœ‰æ”¯æŒçš„ç±»å‹è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚\nå¦‚ä½•è·³è¿‡ GitHub Actions åœ¨ commit message ä¸­åªè¦åŒ…å«äº†ä¸‹é¢å‡ ä¸ªå…³é”®è¯å°±ä¼šè·³è¿‡ Github Actionsã€‚\n[skip ci] [ci skip] [no ci] [skip actions] [actions skip] å®ä¾‹ï¼šè‡ªåŠ¨ä½¿ç”¨ Pandoc å°† Markdown æ–‡ä»¶è½¬æ¢ä¸º PDF ä»¥Dunky-Z/uefi-spec-zhé¡¹ç›®ä¸­ä½¿ç”¨çš„ GitHub Actions ä¸ºä¾‹ï¼Œè§£é‡Šå¦‚ä½•å®ç°å°† Markdown æ–‡ä»¶è½¬æ¢ä¸º PDFã€‚\n# CI åä¸º MPPL name: MPPL # åœ¨ Push ä»£ç æ—¶è§¦å‘ CI on: push jobs: # ä»»åŠ¡åç§°ä¸º convert_via_pandoc convert_via_pandoc: # åœ¨ ubuntu-latest ç³»ç»Ÿä¸Šè¿è¡Œ runs-on: ubuntu-latest steps: # æ­¥éª¤ä¸€ï¼šä¸‹è½½æœ€æ–°ä»£ç  - uses: actions/checkout@v2 # æ­¥éª¤äºŒï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å»ºç«‹ output æ–‡ä»¶å¤¹æ”¾ç”Ÿæˆçš„ PDF æ–‡ä»¶ - name: create file list id: files_list run: | mkdir output # create output dir # æ­¥éª¤ä¸‰ï¼šæ›´æ–°é¡¹ç›®çš„å­æ¨¡å— - name: Git Sumbodule Update run: | git submodule update --init --remote --recursive # æ­¥éª¤å››ï¼šä¸ºè¿è¡Œçš„ç³»ç»Ÿä¸­å®‰è£…éœ€è¦çš„å­—ä½“ï¼Œå› ä¸ºåŸç³»ç»Ÿæ²¡æœ‰éœ€è¦çš„ä¸­æ–‡å­—ä½“ # å­—ä½“æ¥æºä¸ºé¡¹ç›®ç›®å½•çš„MPPL/fonts - name: add fonts run: | sudo apt-get install ttf-mscorefonts-installer sudo apt-get install fontconfig fc-list :lang=zh ls -lh /usr/share/fonts/ cp -rf ./MPPL/fonts/* /usr/share/fonts/ mkfontscale mkfontdir fc-cache fc-list # æ­¥éª¤äº”ï¼šå®‰è£… pandoc å’Œ texlive - name: install pandoc run: | sudo apt-get update sudo apt-get install texlive-full sudo apt-get install pandoc sudo apt-get clean # æ­¥éª¤å…­ï¼šä½¿ç”¨ pandoc å‘½ä»¤ç”Ÿæˆ pdf - name: build pdf run: | cd src pandoc -f markdown-auto_identifiers --listings --pdf-engine=xelatex --template=../MPPL/templates/mppl.tex --output=../output/UEFIè§„èŒƒ-ä¸­æ–‡.pdf *.md # æ­¥éª¤ä¸ƒï¼šå°†ç”Ÿæˆçš„ç»“æœä¸Šä¼ åˆ° GitHub - uses: actions/upload-artifact@master with: name: output path: output æ³¨æ„äº‹é¡¹ every step must define a uses or run key every step must define a uses or run key Â· Issue #2 Â· einaregilsson/beanstalk-deploy\nå‚è€ƒ GH actions: a step cannot have both the uses and run keys Â· Issue #318 Â· fhem/mod-Buienradar\nevery step must define a uses or run key Â· Issue #2 Â· einaregilsson/beanstalk-deploy\n","permalink":"https://lifeislife.cn/posts/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8github-actions/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eGitHub Actions æ˜¯ GitHub åœ¨ 2018 å¹´æ¨å‡ºçš„\u003ca href=\"http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html\"\u003eæŒç»­é›†æˆæœåŠ¡\u003c/a\u003eã€‚å®ƒå¯ä»¥è‡ªåŠ¨å®Œæˆä¸€äº›å¼€å‘å‘¨æœŸå†…çš„ä»»åŠ¡ï¼Œå¦‚ Push ä»£ç æ—¶è‡ªåŠ¨ç¼–è¯‘ï¼ŒPull ä»£ç æ—¶è‡ªåŠ¨æ‰§è¡Œæµ‹è¯•è„šæœ¬ç­‰ç­‰ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘äº†è§£ GitHub Actions çš„å¥‘æœºæ˜¯ï¼Œæˆ‘åœ¨ GitHub ä¸Šä¿å­˜äº†ä¸€äº› Markdown æ–‡æ¡£ï¼Œæˆ‘å¸Œæœ›æ¯æ¬¡æ›´æ–°æ–‡æ¡£åè‡ªåŠ¨ä½¿ç”¨ Pandoc è½¬æ¢æˆ PDF æ–‡æ¡£ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ å¦‚ä½•é€šè¿‡ GitHub Actions å®ç°è¿™æ ·çš„éœ€æ±‚ã€‚\u003c/p\u003e","title":"å¦‚ä½•ä½¿ç”¨ GitHub Actions"},{"content":"åŸºæœ¬æ¦‚å¿µ æ˜æ–‡ä¸å¯†æ–‡ Plaintextï¼Œæ˜æ–‡ï¼Œæœªç»åŠ å¯†çš„æ¶ˆæ¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¯» Ciphertextï¼Œå¯†æ–‡ï¼ŒåŠ å¯†åçš„æ¶ˆæ¯ï¼Œä¸å¯è¯» Keyï¼Œå¯†é’¥ï¼Œç”¨äºåŠ å¯†å’Œè§£å¯†ï¼ˆæ ¸å¿ƒæ˜¯ç®—æ³•ï¼‰ åŠ å¯†ä¸è§£å¯†æ¦‚å¿µ åŠ å¯† æ•°æ®åŠ å¯† çš„åŸºæœ¬è¿‡ç¨‹ï¼Œå°±æ˜¯å¯¹åŸæ¥ä¸º æ˜æ–‡ çš„æ–‡ä»¶æˆ–æ•°æ®æŒ‰ æŸç§ç®—æ³• è¿›è¡Œå¤„ç†ï¼Œä½¿å…¶æˆä¸º ä¸å¯è¯» çš„ä¸€æ®µä»£ç ï¼Œé€šå¸¸ç§°ä¸ºâ€œå¯†æ–‡â€ã€‚é€šè¿‡è¿™æ ·çš„é€”å¾„ï¼Œæ¥è¾¾åˆ° ä¿æŠ¤æ•°æ® ä¸è¢« éæ³•äººçªƒå–ã€é˜…è¯»çš„ç›®çš„ã€‚\nè§£å¯† åŠ å¯† çš„ é€†è¿‡ç¨‹ ä¸º è§£å¯†ï¼Œå³å°†è¯¥ ç¼–ç ä¿¡æ¯ è½¬åŒ–ä¸ºå…¶ åŸæ¥æ•°æ® çš„è¿‡ç¨‹ã€‚\nå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯† åŠ å¯†ç®—æ³•åˆ† å¯¹ç§°åŠ å¯† å’Œ éå¯¹ç§°åŠ å¯†ï¼Œå…¶ä¸­å¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†ä¸è§£å¯† å¯†é’¥ç›¸åŒï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†å¯†é’¥ä¸è§£å¯† å¯†é’¥ä¸åŒï¼Œæ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç±» ä¸éœ€è¦å¯†é’¥ çš„ æ•£åˆ—ç®—æ³•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†ç®—æ³• æ˜¯åº”ç”¨è¾ƒæ—©çš„åŠ å¯†ç®—æ³•ï¼Œåˆç§°ä¸º å…±äº«å¯†é’¥åŠ å¯†ç®—æ³•ã€‚åœ¨ å¯¹ç§°åŠ å¯†ç®—æ³• ä¸­ï¼Œä½¿ç”¨çš„å¯†é’¥åªæœ‰ä¸€ä¸ªï¼Œå‘é€ å’Œ æ¥æ”¶ åŒæ–¹éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥å¯¹æ•°æ®è¿›è¡Œ åŠ å¯† å’Œ è§£å¯†ã€‚è¿™å°±è¦æ±‚åŠ å¯†å’Œè§£å¯†æ–¹äº‹å…ˆéƒ½å¿…é¡»çŸ¥é“åŠ å¯†çš„å¯†é’¥ã€‚\næ•°æ®åŠ å¯†è¿‡ç¨‹ï¼šåœ¨å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œæ•°æ®å‘é€æ–¹ å°† æ˜æ–‡ (åŸå§‹æ•°æ®) å’Œ åŠ å¯†å¯†é’¥ ä¸€èµ·ç»è¿‡ç‰¹æ®Š åŠ å¯†å¤„ç†ï¼Œç”Ÿæˆå¤æ‚çš„ åŠ å¯†å¯†æ–‡ è¿›è¡Œå‘é€ã€‚\næ•°æ®è§£å¯†è¿‡ç¨‹ï¼šæ•°æ®æ¥æ”¶æ–¹ æ”¶åˆ°å¯†æ–‡åï¼Œè‹¥æƒ³è¯»å–åŸæ•°æ®ï¼Œåˆ™éœ€è¦ä½¿ç”¨ åŠ å¯†ä½¿ç”¨çš„å¯†é’¥ åŠç›¸åŒç®—æ³•çš„ é€†ç®—æ³• å¯¹åŠ å¯†çš„å¯†æ–‡è¿›è¡Œè§£å¯†ï¼Œæ‰èƒ½ä½¿å…¶æ¢å¤æˆ å¯è¯»æ˜æ–‡ã€‚\néå¯¹ç§°åŠ å¯† éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œåˆç§°ä¸º å…¬å¼€å¯†é’¥åŠ å¯†ç®—æ³•ã€‚å®ƒéœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼Œä¸€ä¸ªç§°ä¸º å…¬å¼€å¯†é’¥ (public key)ï¼Œå³ å…¬é’¥ï¼Œå¦ä¸€ä¸ªç§°ä¸º ç§æœ‰å¯†é’¥ (private key)ï¼Œå³ ç§é’¥ã€‚ å› ä¸º åŠ å¯† å’Œ è§£å¯† ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯†é’¥ï¼Œæ‰€ä»¥è¿™ç§ç®—æ³•ç§°ä¸º éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚\nå¦‚æœä½¿ç”¨ å…¬é’¥ å¯¹æ•°æ® è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ ç§é’¥ æ‰èƒ½ è¿›è¡Œè§£å¯†ã€‚\nå¦‚æœä½¿ç”¨ ç§é’¥ å¯¹æ•°æ® è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ å…¬é’¥ æ‰èƒ½ è¿›è¡Œè§£å¯†ã€‚\næ•°å­—ç­¾å æ•°å­—ç­¾åï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ¥è¯æ˜è‡ªå·±èº«ä»½çš„ä¸€ç§æ–¹å¼ã€‚åœ¨ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•é€šä¿¡æ—¶ï¼Œå¦‚ä½•éªŒè¯å‘é€è€…æ˜¯çœŸå®çš„å‘é€è€…ï¼Œå‘é€çš„ä¿¡æ¯æ²¡æœ‰ç¯¡æ”¹ï¼Œå°±éœ€è¦æ•°å­—ç­¾åã€‚ä¸€å¥— æ•°å­—ç­¾å é€šå¸¸å®šä¹‰ä¸¤ç§ äº’è¡¥ çš„è¿ç®—ï¼Œä¸€ä¸ªç”¨äº ç­¾åï¼Œå¦ä¸€ä¸ªç”¨äº éªŒè¯ã€‚åˆ†åˆ«ç”± å‘é€è€… æŒæœ‰èƒ½å¤Ÿ ä»£è¡¨è‡ªå·±èº«ä»½ çš„ ç§é’¥ï¼ˆç§é’¥ä¸å¯æ³„éœ²ï¼‰ï¼Œç”± æ¥å—è€… æŒæœ‰ä¸ç§é’¥å¯¹åº”çš„ å…¬é’¥ï¼Œèƒ½å¤Ÿåœ¨ æ¥å— åˆ°æ¥è‡ªå‘é€è€…ä¿¡æ¯æ—¶ç”¨äº éªŒè¯ å…¶èº«ä»½ã€‚\nåŠ å¯†ç®—æ³•è¯¦è§£ é€šè¿‡ä»¥ä¸Šç®€ä»‹å¯ä»¥äº†è§£åˆ°ï¼ŒåŠ å¯†ç®—æ³•åˆ†ä¸ºéœ€è¦ç§˜é’¥çš„å’Œä¸éœ€è¦ç§˜é’¥çš„ï¼Œéœ€è¦ç§˜é’¥çš„æœ‰å¯ä»¥åˆ†ä¸ºå¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†ä¸¤å¤§ç±»ã€‚æ¥æ¥æ¥æˆ‘ä»¬å°±è¯¦ç»†æ¢ç©¶ä¸€ä¸‹å„ä¸ªåŠ å¯†ç®—æ³•ã€‚\nå“ˆå¸Œç®—æ³•ï¼ˆä¸å¯é€†ï¼‰ å“ˆå¸Œç®—æ³•å¯ä»¥å°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ï¼Œç”Ÿæˆå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼ˆå“ˆå¸Œå€¼ï¼‰ã€‚\nå¸¸è§çš„å“ˆå¸Œç®—æ³•æœ‰å¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ MD5 å’Œ SHA ç³»åˆ—ï¼ˆæ¯”å¦‚æ¯”ç‰¹å¸ç”¨çš„ SHA256 ç®—æ³•ï¼ŒGit ä¸­çš„ commit hash ç”¨çš„ SHA1ï¼‰ã€‚\nMD5 MD5ï¼ˆMessage-Digestï¼‰å…¸å‹åº”ç”¨æ˜¯å¯¹ä¸€æ®µä¿¡æ¯äº§ç”Ÿ ä¿¡æ¯æ‘˜è¦ï¼Œä»¥ é˜²æ­¢è¢«ç¯¡æ”¹ã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒMD5 ä¸æ˜¯ä¸€ç§ åŠ å¯†ç®—æ³• è€Œæ˜¯ æ‘˜è¦ç®—æ³•ã€‚æ— è®ºæ˜¯å¤šé•¿çš„è¾“å…¥ï¼ŒMD5 éƒ½ä¼šè¾“å‡ºé•¿åº¦ä¸º 128bits çš„ä¸€ä¸ªä¸² (é€šå¸¸ç”¨ 16 è¿›åˆ¶ è¡¨ç¤ºä¸º 32 ä¸ªå­—ç¬¦)ã€‚\nSHA1 SHA1(Secure Hash Algorithm) æ˜¯å’Œ MD5 ä¸€æ ·æµè¡Œçš„ æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼Œç„¶è€Œ SHA1 æ¯” MD5 çš„ å®‰å…¨æ€§æ›´å¼ºã€‚å¯¹äºé•¿åº¦å°äº $2 ^{64}$ ä½çš„æ¶ˆæ¯ï¼ŒSHA1 ä¼šäº§ç”Ÿä¸€ä¸ª 160 ä½çš„ æ¶ˆæ¯æ‘˜è¦ã€‚\nå¯¹ç§°åŠ å¯†ï¼ˆå¯é€†ï¼‰ å¯¹ç§°åŠ å¯†ç®—æ³•æ˜¯åº”ç”¨æ¯”è¾ƒæ—©çš„ç®—æ³•ï¼Œåœ¨æ•°æ®åŠ å¯†å’Œè§£å¯†çš„æ—¶ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯†é’¥ï¼Œè¿™å°±é€ æˆäº†å¯†é’¥ç®¡ç†å›°éš¾çš„é—®é¢˜ã€‚å¸¸è§çš„å¯¹ç§°åŠ å¯†ç®—æ³•æœ‰ DESã€3DESã€AES128ã€AES192ã€AES256ã€‚\nA5/1ã€A5/2åŠRC4 A5/1ã€A5/2åŠRC4ä»–ä»¬éƒ½å±äºå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå¹¶éƒ½å±äºæµåŠ å¯†ã€‚å…ˆäº†è§£ä»€ä¹ˆæ˜¯æµåŠ å¯†ã€‚\nåœ¨å¯†ç å­¦ä¸­ï¼ŒæµåŠ å¯†ï¼ˆè‹±è¯­ï¼šStream cipherï¼‰ï¼Œæ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒåŠ å¯†å’Œè§£å¯†åŒæ–¹ä½¿ç”¨ç›¸åŒä¼ªéšæœºåŠ å¯†æ•°æ®æµï¼ˆpseudo-random streamï¼‰ä½œä¸ºå¯†é’¥ï¼Œæ˜æ–‡æ•°æ®æ¯æ¬¡ä¸å¯†é’¥æ•°æ®æµé¡ºæ¬¡å¯¹åº”åŠ å¯†ï¼Œå¾—åˆ°å¯†æ–‡æ•°æ®æµã€‚å®è·µä¸­é€šå¸¸æŠŠä¿¡æ¯ä¸­çš„æ¯ä¸€ä½è·Ÿå¯†é’¥æµçš„æ¯ä¸€ä½è¿›è¡Œå¼‚æˆ– (xor) è¿ç®—æ¥è·å¾—å¯†æ–‡ã€‚\nDES DES(Data Encryption Standard) æ˜¯å¯¹ç§°åŠ å¯†ç®—æ³•é¢†åŸŸä¸­çš„å…¸å‹ç®—æ³•ï¼Œæ˜¯ä¸€ç§å—åŠ å¯†ç®—æ³•(Block cipher)ï¼Œå…¶å¯†é’¥é»˜è®¤é•¿åº¦ä¸º 56 ä½ã€‚å—åŠ å¯†æˆ–è€…å«åˆ†ç»„åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹æ³•æ˜¯æŠŠæ˜æ–‡åˆ†æˆå‡ ä¸ªå›ºå®šå¤§å°çš„ block å—ï¼Œç„¶ååˆ†åˆ«å¯¹å…¶è¿›è¡ŒåŠ å¯†ã€‚\nDES åŠ å¯†ç®—æ³•æ˜¯å¯¹ å¯†é’¥è¿›è¡Œä¿å¯†ï¼Œè€Œ å…¬å¼€ç®—æ³•ï¼ŒåŒ…æ‹¬åŠ å¯†å’Œè§£å¯†ç®—æ³•ã€‚è¿™æ ·ï¼Œåªæœ‰æŒæ¡äº†å’Œå‘é€æ–¹ ç›¸åŒå¯†é’¥ çš„äººæ‰èƒ½è§£è¯»ç”± DES åŠ å¯†ç®—æ³•åŠ å¯†çš„å¯†æ–‡æ•°æ®ã€‚å› æ­¤ï¼Œç ´è¯‘ DES åŠ å¯†ç®—æ³•å®é™…ä¸Šå°±æ˜¯ æœç´¢å¯†é’¥çš„ç¼–ç ã€‚å¯¹äº 56 ä½é•¿åº¦çš„ å¯†é’¥ æ¥è¯´ï¼Œå¦‚æœç”¨ ç©·ä¸¾æ³• æ¥è¿›è¡Œæœç´¢çš„è¯ï¼Œå…¶è¿ç®—æ¬¡æ•°ä¸º $2 ^{56}$ æ¬¡ã€‚\nAES AES æ˜¯ç¾å›½å›½å®¶æ ‡å‡†æŠ€æœ¯ç ”ç©¶æ‰€ NIST æ—¨åœ¨å–ä»£ DES çš„ 21 ä¸–çºªçš„åŠ å¯†æ ‡å‡†ã€‚AES æ˜¯å—åŠ å¯†ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡å¤„ç†çš„æ•°æ®æ˜¯ä¸€å—ï¼ˆ16 å­—èŠ‚ï¼‰ï¼Œå½“æ•°æ®ä¸æ˜¯ 16 å­—èŠ‚çš„å€æ•°æ—¶å¡«å……ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åˆ†ç»„å¯†ç ï¼ˆåŒºåˆ«äºåŸºäºæ¯”ç‰¹ä½çš„æµå¯†ç ï¼‰ï¼Œ16 å­—èŠ‚æ˜¯åˆ†ç»„é•¿åº¦ã€‚AES å…±æœ‰ ECBã€CBC ç­‰å¤šç§æ¨¡å¼ã€‚\nSM4 SM4 ç®—æ³•äº 2012 å¹´è¢«å›½å®¶å¯†ç ç®¡ç†å±€ç¡®å®šä¸ºå›½å®¶å¯†ç è¡Œä¸šæ ‡å‡†ï¼Œæœ€åˆä¸»è¦ç”¨äº WAPI (WLAN Authentication and Privacy Infrastructure) æ— çº¿ç½‘ç»œä¸­ã€‚SM4 ç®—æ³•çš„å‡ºç°ä¸ºå°†æˆ‘å›½å•†ç”¨äº§å“ä¸Šçš„å¯†ç ç®—æ³•ç”±å›½é™…æ ‡å‡†æ›¿æ¢ä¸ºå›½å®¶æ ‡å‡†æä¾›äº†å¼ºæœ‰åŠ›çš„æ”¯æ’‘ã€‚éšåï¼ŒSM4 ç®—æ³•è¢«å¹¿æ³›åº”ç”¨äºæ”¿åºœåŠå…¬ã€å…¬å®‰ã€é“¶è¡Œã€ç¨åŠ¡ã€ç”µåŠ›ç­‰ä¿¡æ¯ç³»ç»Ÿä¸­ï¼Œå…¶åœ¨æˆ‘å›½å¯†ç è¡Œä¸šä¸­å æ®ç€æå…¶é‡è¦çš„ä½ç½®ã€‚ç±»ä¼¼äº DESã€AES ç®—æ³•ï¼ŒSM4 ç®—æ³•ä¹Ÿæ˜¯ä¸€ç§åˆ†ç»„å¯†ç ç®—æ³•ã€‚\néå¯¹ç§°åŠ å¯†ï¼ˆå¯é€†ï¼‰ å­¦ä¹ éå¯¹ç§°åŠ å¯†ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—äº†è§£å¦‚ä½•è¿›è¡Œå®‰å…¨é«˜æ•ˆåœ°ç§˜é’¥äº¤æ¢ã€‚æˆ‘ä»¬ä¸å¯èƒ½è¯´é€šä¿¡åŒæ–¹åœ¨é€šä¿¡ä¹‹å‰ï¼Œå…ˆè§ä¸ªé¢åå•†ä¸€ä¸‹ç§˜é’¥ keyï¼Œè¿™æ ·éå¸¸ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯åˆä¸èƒ½ç›´æ¥æŠŠ key ç§˜é’¥é€šè¿‡ä¸€ä¸ªä¸å®‰å…¨çš„ä¿¡é“å‘å‡ºå»ï¼Œè¿™æ ·å°±ä¼šè¢«æ”»å‡»è€…æˆªè·ã€‚\næ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥è®©åŒæ–¹åœ¨å®Œå…¨æ²¡æœ‰å¯¹æ–¹ä»»ä½•é¢„å…ˆä¿¡æ¯çš„æ¡ä»¶ä¸‹é€šè¿‡ä¸å®‰å…¨ä¿¡é“åˆ›å»ºèµ·ä¸€ä¸ªå¯†é’¥ã€‚è¿™ä¸ªå¯†é’¥å¯ä»¥åœ¨åç»­çš„é€šè®¯ä¸­ä½œä¸ºå¯¹ç§°å¯†é’¥æ¥åŠ å¯†é€šè®¯å†…å®¹ï¼Œè¿™å°±æ˜¯ç§˜é’¥äº¤æ¢çš„æ¦‚å¿µï¼ˆkey exchangeï¼‰ã€‚\nDiffieâ€“Hellman key exchange è¿ªè²-èµ«å°”æ›¼å¯†é’¥äº¤æ¢ï¼ˆè‹±è¯­ï¼šDiffieâ€“Hellman key exchangeï¼Œç¼©å†™ä¸º D-Hï¼‰æ˜¯ä¸€ç§å®‰å…¨åè®®ã€‚å¯ä»¥å®Œæˆä¸Šè¿°ç§˜é’¥äº¤æ¢ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é€šä¿¡åŒæ–¹ Alice å’Œ Bob ä¸ªå‡†å¤‡ä¸€ä¸ªå¤§çš„è´¨æ•°ï¼ŒAlice å‡†å¤‡çš„è´¨æ•°æ˜¯n=11, Bob å‡†å¤‡çš„è´¨æ•°æ˜¯g=7ï¼Œnå’Œgæ˜¯å…¬å¼€çš„ï¼Œä»»ä½•ç¬¬ä¸‰æ–¹éƒ½å¯ä»¥è·å–åˆ°è¿™ä¸ªä¿¡æ¯ã€‚\nAlice å‡†å¤‡ä¸€ä¸ªéšæœºè‡ªç„¶æ•°x=3, é™¤äº† Alice æ²¡æœ‰äººçŸ¥é“xæ˜¯å¤šå°‘ï¼ŒAlice é€šè¿‡è®¡ç®—gçš„xæ¬¡æ–¹å¹¶ä¸”å¯¹ n å–æ¨¡ï¼Œå¾—åˆ°ç»“æœå¤§ A\nAlice æŠŠè®¡ç®—å¾—åˆ°çš„ç»“æœ A=2 å‘é€ç»™ Bobï¼Œè¿™ä¸ªä¿¡æ¯æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººå¯ä»¥è·å–åˆ° A\nBob åŒæ ·å‡†å¤‡ä¸€ä¸ªéšæœºè‡ªç„¶æ•° y=6ï¼Œé™¤äº† Bob æ²¡æœ‰äººçŸ¥é“ y æ˜¯å¤šå°‘ï¼ŒBob é€šè¿‡è®¡ç®— g çš„ y æ¬¡æ–¹å¹¶ä¸”å¯¹ n å–æ¨¡ï¼Œå¾—åˆ°ç»“æœå¤§ B\nBob æŠŠè®¡ç®—ç»“æœ B=4ï¼Œå‘é€ç»™ Aliceï¼Œï¼Œè¿™ä¸ªä¿¡æ¯æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººå¯ä»¥è·å–åˆ° B\nAlice æ‹¿åˆ° B ä»¥åï¼Œå¯¹ B æ±‚ x æ¬¡æ–¹å¹¶å¯¹ n å–æ¨¡ï¼Œå¾—åˆ° K1=9\nBob æ‹¿åˆ° A ä»¥åï¼Œå¯¹ A å¯¹ y æ¬¡æ–¹å¹¶å¯¹ n å–æ¨¡ï¼Œå¾—åˆ° K2=9\nK1 == K2ï¼ŒAlice å’Œ Bob å¯ä»¥ä½¿ç”¨ K1ï¼ŒK2 ä½œä¸º Key è¿›è¡Œé€šä¿¡åŠ å¯†ã€‚\nåœ¨æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ä¸­ï¼Œæ”»å‡»è€…æ˜¯æ— æ³•çŸ¥é“ xï¼Œy ä»¥åŠ K1ï¼ŒK2 çš„ï¼Œæˆ–è€…è¯´è®¡ç®—çš„å›°éš¾å¾ˆå¤§ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°å…·ä½“çš„æ•°å­¦é—®é¢˜ï¼Œç¦»æ•£å¯¹æ•°é—®é¢˜çš„æ±‚è§£ã€‚\nRSA Diffieâ€“Hellman key exchange å‘æ˜åä¸ä¹…å‡ºç°äº† RSAï¼Œå¦ä¸€ä¸ªè¿›è¡Œå…¬é’¥äº¤æ¢çš„ç®—æ³•ã€‚å®ƒä½¿ç”¨äº†éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚\nRSA åŠ å¯†ç®—æ³•æ˜¯ç›®å‰æœ€æœ‰å½±å“åŠ›çš„ å…¬é’¥åŠ å¯†ç®—æ³•ï¼Œå¹¶ä¸”è¢«æ™®éè®¤ä¸ºæ˜¯ç›®å‰ æœ€ä¼˜ç§€çš„å…¬é’¥æ–¹æ¡ˆ ä¹‹ä¸€ã€‚RSA æ˜¯ç¬¬ä¸€ä¸ªèƒ½åŒæ—¶ç”¨äº åŠ å¯† å’Œ æ•°å­—ç­¾å çš„ç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿ æŠµæŠ— åˆ°ç›®å‰ä¸ºæ­¢å·²çŸ¥çš„ æ‰€æœ‰å¯†ç æ”»å‡»ï¼Œå·²è¢« ISO æ¨èä¸ºå…¬é’¥æ•°æ®åŠ å¯†æ ‡å‡†ã€‚\nRSA æ‰€ç”¨åˆ°çš„æ•°å­¦åŸç†å¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„æ–‡ç« RSA ç®—æ³•åŸç†ï¼ˆä¸€ï¼‰ï¼Œæ–‡ç« ä»‹ç»äº† RSA ç”¨åˆ°çš„ä¸€äº›æ•°å­¦å®šç†ï¼Œä¸æ¶‰åŠè¯æ˜ï¼Œè¿™å¯¹äºäº†è§£ RSA ä¹Ÿå°±è¶³å¤Ÿäº†ã€‚\nç®€å•ä»‹ç»ä¸€ä¸‹ç§˜é’¥æ˜¯ç”Ÿæˆè¿‡ç¨‹ï¼ˆæ‘˜è‡ªRSA ç®—æ³•åŸç†ï¼ˆäºŒï¼‰ï¼‰ï¼š\néšæœºé€‰æ‹©ä¸¤ä¸ªä¸ç›¸ç­‰çš„è´¨æ•° $p$ å’Œ $q$ã€‚çˆ±ä¸½ä¸é€‰æ‹©äº†$61$å’Œ$53$ã€‚ï¼ˆå®é™…åº”ç”¨ä¸­ï¼Œè¿™ä¸¤ä¸ªè´¨æ•°è¶Šå¤§ï¼Œå°±è¶Šéš¾ç ´è§£ã€‚ï¼‰\nè®¡ç®—$p$å’Œ$q$çš„ä¹˜ç§¯$n$ã€‚çˆ±ä¸½ä¸å°±æŠŠ $61$ å’Œ $53$ ç›¸ä¹˜ã€‚ $$n = 61Ã—53 = 3233$$\n$n$ çš„é•¿åº¦å°±æ˜¯å¯†é’¥é•¿åº¦ã€‚$3233$ å†™æˆäºŒè¿›åˆ¶æ˜¯ $110010100001$ï¼Œä¸€å…±æœ‰ $12$ ä½ï¼Œæ‰€ä»¥è¿™ä¸ªå¯†é’¥å°±æ˜¯ $12$ ä½ã€‚å®é™…åº”ç”¨ä¸­ï¼ŒRSA å¯†é’¥ä¸€èˆ¬æ˜¯ $1024$ ä½ï¼Œé‡è¦åœºåˆåˆ™ä¸º $2048$ ä½ã€‚\nè®¡ç®— $n$ çš„æ¬§æ‹‰å‡½æ•°$\\varphi(n)$ã€‚æ ¹æ®å…¬å¼ï¼š $$\\varphi(n) = (p-1)(q-1)$$\nçˆ±ä¸½ä¸ç®—å‡º$\\varphi(3233)$ ç­‰äº $60Ã—52$ï¼Œå³ $3120$ã€‚\néšæœºé€‰æ‹©ä¸€ä¸ªæ•´æ•° $e$ï¼Œæ¡ä»¶æ˜¯ $1\u0026lt; e \u0026lt; \\varphi(n)$ï¼Œä¸” $e$ ä¸$\\varphi(n)$ äº’è´¨ã€‚ çˆ±ä¸½ä¸å°±åœ¨ $1$ åˆ° $3120$ ä¹‹é—´ï¼Œéšæœºé€‰æ‹©äº† $17$ã€‚ï¼ˆå®é™…åº”ç”¨ä¸­ï¼Œå¸¸å¸¸é€‰æ‹© $65537$ã€‚ï¼‰\nè®¡ç®— $e$ å¯¹äº$\\varphi(n)$ çš„æ¨¡åå…ƒç´  $d$ã€‚\næ‰€è°“\u0026quot;æ¨¡åå…ƒç´ \u0026quot;å°±æ˜¯æŒ‡æœ‰ä¸€ä¸ªæ•´æ•° $d$ï¼Œå¯ä»¥ä½¿å¾— $ed$ è¢«$\\varphi(n)$ é™¤çš„ä½™æ•°ä¸º $1$ã€‚\n$$ed â‰¡ 1 (mod \\varphi(n))$$ è¿™ä¸ªå¼å­ç­‰ä»·äº\n$$ed - 1 = k\\varphi(n)$$\näºæ˜¯ï¼Œæ‰¾åˆ°æ¨¡åå…ƒç´  $d$ï¼Œå®è´¨ä¸Šå°±æ˜¯å¯¹ä¸‹é¢è¿™ä¸ªäºŒå…ƒä¸€æ¬¡æ–¹ç¨‹æ±‚è§£ã€‚\n$$ex + \\varphi(n)y = 1$$\nå·²çŸ¥ $e=17$, $\\varphi(n)=3120$ï¼Œ\n$$17x + 3120y = 1$$\nè¿™ä¸ªæ–¹ç¨‹å¯ä»¥ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚è§£ï¼Œæ­¤å¤„çœç•¥å…·ä½“è¿‡ç¨‹ã€‚æ€»ä¹‹ï¼Œçˆ±ä¸½ä¸ç®—å‡ºä¸€ç»„æ•´æ•°è§£ä¸º $(x,y)=(2753,-15)$ï¼Œå³ $d=2753$ã€‚\nè‡³æ­¤æ‰€æœ‰è®¡ç®—å®Œæˆã€‚\nå°† $n$ å’Œ $e$ å°è£…æˆå…¬é’¥ï¼Œ$n$ å’Œ $d$ å°è£…æˆç§é’¥ã€‚\nåœ¨çˆ±ä¸½ä¸çš„ä¾‹å­ä¸­ï¼Œ$n=3233$ï¼Œ$e=17$ï¼Œ$d=2753$ï¼Œæ‰€ä»¥å…¬é’¥å°±æ˜¯ $(3233,17)$ï¼Œç§é’¥å°±æ˜¯$3233, 2753ï¼‰$ã€‚\nå®é™…åº”ç”¨ä¸­ï¼Œå…¬é’¥å’Œç§é’¥çš„æ•°æ®éƒ½é‡‡ç”¨ ASN.1 æ ¼å¼è¡¨è¾¾ã€‚\nRSA ç®—æ³•ä¸ºä½•æ˜¯å¯é çš„å‘¢ï¼Ÿå› ä¸ºè¯¥ç®—æ³•åŸºäºä¸€ä¸ªååˆ†ç®€å•çš„æ•°è®ºäº‹å®ï¼šå°†ä¸¤ä¸ªå¤§ç´ æ•°ç›¸ä¹˜ååˆ†å®¹æ˜“ï¼Œä½†æƒ³è¦å¯¹å…¶ä¹˜ç§¯è¿›è¡Œå› å¼åˆ†è§£å´æå…¶å›°éš¾ï¼Œå› æ­¤å¯ä»¥å°†ä¹˜ç§¯å…¬å¼€ä½œä¸ºåŠ å¯†å¯†é’¥ã€‚\nå›é¡¾ä¸Šé¢çš„å¯†é’¥ç”Ÿæˆæ­¥éª¤ï¼Œä¸€å…±å‡ºç°å…­ä¸ªæ•°å­—ï¼š\n$$p,q,n,\\varphi(n),e,d$$\nè¿™å…­ä¸ªæ•°å­—ä¹‹ä¸­ï¼Œå…¬é’¥ç”¨åˆ°äº†ä¸¤ä¸ªï¼ˆ$n$å’Œ$e$ï¼‰ï¼Œå…¶ä½™å››ä¸ªæ•°å­—éƒ½æ˜¯ä¸å…¬å¼€çš„ã€‚å…¶ä¸­æœ€å…³é”®çš„æ˜¯$d$ï¼Œå› ä¸º$n$å’Œ$d$ç»„æˆäº†ç§é’¥ï¼Œä¸€æ—¦$d$æ³„æ¼ï¼Œå°±ç­‰äºç§é’¥æ³„æ¼ã€‚\né‚£ä¹ˆï¼Œæœ‰æ— å¯èƒ½åœ¨å·²çŸ¥$n$å’Œ$e$çš„æƒ…å†µä¸‹ï¼Œæ¨å¯¼å‡º$d$ï¼Ÿ\n$edâ‰¡1 (mod Ï†(n))$ã€‚åªæœ‰çŸ¥é“$e$å’Œ$Ï†(n)$ï¼Œæ‰èƒ½ç®—å‡º$d$ã€‚ $Ï†(n)=(p-1)(q-1)$ã€‚åªæœ‰çŸ¥é“$p$å’Œ$q$ï¼Œæ‰èƒ½ç®—å‡º$Ï†(n)$ã€‚ $n=pq$ã€‚åªæœ‰å°†$n$å› æ•°åˆ†è§£ï¼Œæ‰èƒ½ç®—å‡º $p$ å’Œ $q$ã€‚ ç»“è®ºï¼šå¦‚æœ $n$ å¯ä»¥è¢«å› æ•°åˆ†è§£ï¼Œ$d$ å°±å¯ä»¥ç®—å‡ºï¼Œä¹Ÿå°±æ„å‘³ç€ç§é’¥è¢«ç ´è§£ã€‚\nå¯æ˜¯ï¼Œå¤§æ•´æ•°çš„å› æ•°åˆ†è§£ï¼Œæ˜¯ä¸€ä»¶éå¸¸å›°éš¾çš„äº‹æƒ…ã€‚ç›®å‰ï¼Œé™¤äº†æš´åŠ›ç ´è§£ï¼Œè¿˜æ²¡æœ‰å‘ç°åˆ«çš„æœ‰æ•ˆæ–¹æ³•ã€‚\nä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥å¯¹ 3233 è¿›è¡Œå› æ•°åˆ†è§£ï¼ˆ61Ã—53ï¼‰ï¼Œä½†æ˜¯ä½ æ²¡æ³•å¯¹ä¸‹é¢è¿™ä¸ªæ•´æ•°è¿›è¡Œå› æ•°åˆ†è§£ã€‚\n12301866845301177551304949 58384962720772853569595334 79219732245215172640050726 36575187452021997864693899 56474942774063845925192557 32630345373154826850791702 61221429134616704292143116 02221240479274737794080665 351419597459856902143413 å®ƒç­‰äºè¿™æ ·ä¸¤ä¸ªè´¨æ•°çš„ä¹˜ç§¯ï¼š\n33478071698956898786044169 84821269081770479498371376 85689124313889828837938780 02287614711652531743087737 814467999489 Ã— 36746043666799590428244633 79962795263227915816434308 76426760322838157396665112 79233373417143396810270092 798736308917 äº‹å®ä¸Šï¼Œè¿™å¤§æ¦‚æ˜¯äººç±»å·²ç»åˆ†è§£çš„æœ€å¤§æ•´æ•°ï¼ˆ232 ä¸ªåè¿›åˆ¶ä½ï¼Œ768 ä¸ªäºŒè¿›åˆ¶ä½ï¼‰ã€‚æ¯”å®ƒæ›´å¤§çš„å› æ•°åˆ†è§£ï¼Œè¿˜æ²¡æœ‰è¢«æŠ¥é“è¿‡ï¼Œå› æ­¤ç›®å‰è¢«ç ´è§£çš„æœ€é•¿ RSA å¯†é’¥å°±æ˜¯ 768 ä½ã€‚\nç­¾åä¸è¯ä¹¦ å‚è€ƒ Learn Cryptography æµ…è°ˆå¸¸è§çš„ä¸ƒç§åŠ å¯†ç®—æ³•åŠå®ç° - æ˜é‡‘ RSA ç®—æ³•åŸç†ï¼ˆä¸€ï¼‰ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— RSA ç®—æ³•åŸç†ï¼ˆäºŒï¼‰ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— åŠ å¯†è§£å¯† - é¢è¯•å®˜ï¼šè¯´ä¸€ä¸‹ä½ å¸¸ç”¨çš„åŠ å¯†ç®—æ³•_ä¸ªäººæ–‡ç«  - SegmentFault æ€å¦ ","permalink":"https://lifeislife.cn/posts/%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/","summary":"\u003ch1 id=\"åŸºæœ¬æ¦‚å¿µ\"\u003eåŸºæœ¬æ¦‚å¿µ\u003c/h1\u003e\n\u003ch2 id=\"æ˜æ–‡ä¸å¯†æ–‡\"\u003eæ˜æ–‡ä¸å¯†æ–‡\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ePlaintextï¼Œæ˜æ–‡ï¼Œæœªç»åŠ å¯†çš„æ¶ˆæ¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¯»\u003c/li\u003e\n\u003cli\u003eCiphertextï¼Œå¯†æ–‡ï¼ŒåŠ å¯†åçš„æ¶ˆæ¯ï¼Œä¸å¯è¯»\u003c/li\u003e\n\u003cli\u003eKeyï¼Œå¯†é’¥ï¼Œç”¨äºåŠ å¯†å’Œè§£å¯†ï¼ˆæ ¸å¿ƒæ˜¯ç®—æ³•ï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åŠ å¯†ä¸è§£å¯†æ¦‚å¿µ\"\u003eåŠ å¯†ä¸è§£å¯†æ¦‚å¿µ\u003c/h2\u003e\n\u003ch3 id=\"åŠ å¯†\"\u003eåŠ å¯†\u003c/h3\u003e\n\u003cp\u003eæ•°æ®åŠ å¯† çš„åŸºæœ¬è¿‡ç¨‹ï¼Œå°±æ˜¯å¯¹åŸæ¥ä¸º æ˜æ–‡ çš„æ–‡ä»¶æˆ–æ•°æ®æŒ‰ æŸç§ç®—æ³• è¿›è¡Œå¤„ç†ï¼Œä½¿å…¶æˆä¸º ä¸å¯è¯» çš„ä¸€æ®µä»£ç ï¼Œé€šå¸¸ç§°ä¸ºâ€œå¯†æ–‡â€ã€‚é€šè¿‡è¿™æ ·çš„é€”å¾„ï¼Œæ¥è¾¾åˆ° ä¿æŠ¤æ•°æ® ä¸è¢« éæ³•äººçªƒå–ã€é˜…è¯»çš„ç›®çš„ã€‚\u003c/p\u003e","title":"åŠ å¯†ç®—æ³•æ€»ç»“"},{"content":"éœ€æ±‚èƒŒæ™¯ å¦‚æœå‚ä¸ Linuxã€QEMU æˆ–è€… OpenSBI ç­‰å¼€æºé¡¹ç›®ï¼Œä¸èƒ½é€šè¿‡åœ¨ GitHub æˆ–è€… Gitlab å¹³å°æäº¤pull requestã€‚è€Œæ˜¯éœ€è¦å°†ä¿®æ”¹çš„ä»£ç ï¼Œé€šè¿‡ Patch å½¢å¼æäº¤åˆ°å¯¹åº”çš„listservä¾› Maintainer å®¡æ ¸ã€‚é‚£ä¹ˆå¦‚ä½•åˆ›å»º Patch å¹¶å‘é€å‘¢ï¼Ÿ\nè¿™é‡Œä»¥å‘ OpenSBI æäº¤ä¸€ä¸ª Patch ä¸ºä¾‹ã€‚\nåˆ›å»º Patch é¦–å…ˆå°†å®˜æ–¹ Repositoryï¼ŒFork åˆ°è‡ªå·±çš„ GitHubï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å›åˆ°è‡ªå·±çš„ä¸»é¡µï¼Œæ‰¾åˆ°åˆšåˆš Fork çš„ Repositoryï¼Œå°†å…¶ Clone åˆ°æœ¬åœ°ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹ä»£ç ä¸æ­£å¸¸å¼€å‘æµç¨‹ä¸€ç›´ï¼Œä¿®æ”¹å®Œåœ¨git commitæ—¶éœ€è¦åŠ ä¸ŠSigned-off-byå­—æ®µï¼Œå› ä¸º Merge ä»£ç çš„äººé€šå¸¸ä¸æ˜¯æäº¤ä»£ç çš„äººï¼Œæœ‰è¯¥å­—æ®µæ‰èƒ½è¯æ˜æ˜¯ä½ ä¿®æ”¹äº†å¯¹åº”çš„ä»£ç ã€‚\n-så‚æ•°ä¼šè‡ªåŠ¨åŠ ä¸ŠSigned-off-byå­—æ®µï¼š\n$ git commit -s doc:fix some typos Signed-off-by: dominic \u0026lt;dominic@gmail.com\u0026gt; # Please enter the commit message for your changes. Lines starting # with \u0026#39;#\u0026#39; will be ignored, and an empty message aborts the commit. # # Date: Tue Sep 27 21:11:41 2022 +0800 # # On branch master # Your branch is up to date with \u0026#39;origin/master\u0026#39;. # # Changes to be committed: # modified: docs/domain_support.md # modified: docs/library_usage.md # modified: docs/platform_requirements.md # modified: docs/pmu_support.md ç”Ÿæˆ.patchæ–‡ä»¶ï¼š\n$ git format-patch HEAD^ 0001-doc-fix-some-typos.patch åœ¨å½“å‰ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª0001-doc-fix-some-typos.patchæ–‡ä»¶ï¼š\n$ git status On branch master Your branch is up to date with \u0026#39;origin/master\u0026#39;. Untracked files: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to include in what will be committed) 0001-doc-fix-some-typos.patch nothing added to commit but untracked files present (use \u0026#34;git add\u0026#34; to track) è¿™ä¸ªæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬è¦å‘é€çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å°±æ˜¯æˆ‘ä»¬çš„ä»£ç ä¿®æ”¹ï¼Œä»¥åŠä½œè€…ç­‰ä¿¡æ¯ï¼š\n$ cat 0001-doc-fix-some-typos.patch From d404cb82f4c4aca15dcd35855d0bc96c5b4431d5 Mon Sep 17 00:00:00 2001 From: Dunky-Z \u0026lt;xxxxxxxxx@qq.com\u0026gt; Date: Tue, 27 Sep 2022 21:11:41 +0800 Subject: [PATCH] doc:fix some typos Signed-off-by: dominic \u0026lt;dominic@gmail.com\u0026gt; --- docs/domain_support.md | 6 +++--- docs/library_usage.md | 2 +- docs/platform_requirements.md | 2 +- docs/pmu_support.md | 10 +++++----- 4 files changed, 10 insertions(+), 10 deletions(-) diff --git a/docs/domain_support.md b/docs/domain_support.md index 73931f1..8963b57 100644 --- a/docs/domain_support.md +++ b/docs/domain_support.md @@ -2,7 +2,7 @@ OpenSBI Domain Support ====================== ... é…ç½® send-email å®‰è£… git-email é€šè¿‡gitç›´æ¥å‘é€ Patch éœ€è¦ä½¿ç”¨git-emailå·¥å…·ï¼Œå¾—æ‰‹åŠ¨å®‰è£…ï¼š\nsudo apt install git-email Windows å¹³å°åœ¨å®‰è£… Git æ—¶é»˜è®¤å·²å®‰è£…\nç”Ÿæˆ smtp æˆæƒç  ç™»å½•QQ é‚®ç®± - å¸æˆ·ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¼€å¯ IMAP/SMTP æœåŠ¡ï¼Œå¹¶ç”Ÿæˆæˆæƒç ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ ¹æ®æç¤ºå‘é€çŸ­ä¿¡ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image è®°å½•ä¸‹ç”Ÿæˆçš„æˆæƒç ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½®.gitconfig Ubuntu å¹³å°ï¼š~/.gitconfig Windows å¹³å°ï¼šC:\\Users\\ç”¨æˆ·å\\.gitconfig\n[sendemail] smtpencryption = tls smtpserver = smtp.qq.com smtpuser = dominic_riscx@qq.com smtpserverport = 587 from = dominic_riscx@qq.com smtppass = xxxxxx cc = dominic@gmail.com #to = opensbi@lists.infradead.org ä¸ºäº†æ–¹ä¾¿å¤åˆ¶ï¼Œå•ç‹¬æ³¨é‡Šï¼š\n[sendemail] smtpencryption = # åŠ å¯†æ–¹å¼ï¼Œä¿æŒé»˜è®¤ smtpserver = # smtp æœåŠ¡å™¨åœ°å€ï¼Œä¿æŒé»˜è®¤ smtpuser = # é‚®ç®±åœ°å€ï¼Œæ”¹ä¸º QQ é‚®ç®±åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç”¨å“ªä¸ªé‚®ç®±å‘é€ï¼Œå°±å¡«å“ªä¸ª smtpserverport = # ç«¯å£å·ï¼Œä¿æŒé»˜è®¤ from = # åŒ smtpuser smtppass = # ä¸Šæ–‡ç”Ÿæˆçš„ smtp æˆæƒç  cc = # æŠ„é€çš„é‚®ç®±åœ°å€ #to = opensbi@lists.infradead.org # è¦å‘é€çš„åœ°å€ï¼Œè¿™ä¸ªå­—æ®µæˆ‘æ³¨é‡Šäº†ï¼Œå› ä¸ºæ€•ä»¥åå‘é‚®ä»¶é»˜è®¤å‘åˆ°è¿™ä¸ªåœ°å€ï¼Œè¿™ä¸ªå­—æ®µå¯ä»¥åœ¨å‘é€æ—¶å•ç‹¬å¡«å†™ å‘é€ Patch #$ git send-email patchæ–‡ä»¶å $ git send-email 0001-doc-fix-some-typos.patch 0001-doc-fix-some-typos.patch # æç¤ºå¾€å“ªé‡Œå‘é€ï¼Œå¡«å†™è¦æ¥æ”¶çš„é‚®ç®±å³å¯ï¼Œæˆ‘è¿™é‡Œå¡«å†™çš„æ˜¯OpenSBIæ¥æ”¶Patchçš„åœ°å€ To whom should the emails be sent (if anyone)? opensbi@lists.infradead.org Message-ID to be used as In-Reply-To for the first email (if any)? # å›è½¦ï¼Œä¿å­˜é»˜è®¤ï¼ˆæˆ‘è¿˜ä¸æ¸…æ¥šè¿™é‡Œçš„ä½œç”¨ï¼‰ (mbox) Adding cc: Dunky-Z \u0026lt;xxxxxxxxx@qq.com\u0026gt; from line \u0026#39;From: Dunky-Z \u0026lt;xxxxxxxxx@qq.com\u0026gt;\u0026#39; (body) Adding cc: dominic \u0026lt;dominic@gmail.com\u0026gt; from line \u0026#39;Signed-off-by: dominic \u0026lt;dominic@gmail.com\u0026gt;\u0026#39; From: dominic_riscx@qq.com To: opensbi@lists.infradead.org Cc: dominic@gmail.com, Dunky-Z \u0026lt;xxxxxxxxx@qq.com\u0026gt; Subject: [PATCH] doc:fix some typos Date: Wed, 28 Sep 2022 10:35:30 +0800 Message-Id: \u0026lt;20220928023530.2344-1-dominic_riscx@qq.com\u0026gt; X-Mailer: git-send-email 2.34.1.windows.1 MIME-Version: 1.0 Content-Transfer-Encoding: 8bit The Cc list above has been expanded by additional addresses found in the patch commit message. By default send-email prompts before sending whenever this occurs. This behavior is controlled by the sendemail.confirm configuration setting. For additional information, run \u0026#39;git send-email --help\u0026#39;. To retain the current behavior, but squelch this message, run \u0026#39;git config --global sendemail.confirm auto\u0026#39;. Send this email? ([y]es|[n]o|[e]dit|[q]uit|[a]ll): y # y ç¡®è®¤å‘é€ OK. Log says: Server: smtp.qq.com MAIL FROM:\u0026lt;dominic_riscx@qq.com\u0026gt; RCPT TO:\u0026lt;opensbi@lists.infradead.org\u0026gt; RCPT TO:\u0026lt;dominic@gmail.com\u0026gt; RCPT TO:\u0026lt;xxxxxxxxx@qq.com\u0026gt; From: dominic_riscx@qq.com To: opensbi@lists.infradead.org Cc: dominic@gmail.com, Dunky-Z \u0026lt;xxxxxxxxx@qq.com\u0026gt; Subject: [PATCH] doc:fix some typos Date: Wed, 28 Sep 2022 10:35:30 +0800 Message-Id: \u0026lt;20220928023530.2344-1-dominic_riscx@qq.com\u0026gt; X-Mailer: git-send-email 2.34.1.windows.1 MIME-Version: 1.0 Content-Transfer-Encoding: 8bit Result: 250 # å‘é€æˆåŠŸ å‰å¾€The opensbi Archivesï¼Œæ‰¾åˆ°å¯¹åº”çš„æœˆä»½ï¼Œç‚¹å‡»Thereadï¼Œå³å¯æ‰¾åˆ°è‡ªå·±å‘é€çš„ Patchï¼Œæ¯ä¸ªå¼€æºç¤¾åŒºä¸€èˆ¬éƒ½ä¼šåœ¨å¦‚ä½•æäº¤ PR çš„æ–‡æ¡£é‡Œå…¬å¼€ Patch Archive ç½‘å€ï¼Œè¿™é‡Œæ˜¯ä»¥ OpenSBI çš„ç½‘å€ã€‚\nå‰å¾€é‚®ç®±å‘é€è®°å½•ä¸­ä¹Ÿå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„ Patch ä¿¡æ¯ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä»¥ä¸Šå°±æ˜¯å®Œæ•´çš„æäº¤ Patch è¿‡ç¨‹ã€‚\n","permalink":"https://lifeislife.cn/posts/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8git-send-mail%E7%BB%99%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E6%8F%90%E4%BA%A4patch/","summary":"\u003ch1 id=\"éœ€æ±‚èƒŒæ™¯\"\u003eéœ€æ±‚èƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eå¦‚æœå‚ä¸ Linuxã€QEMU æˆ–è€… OpenSBI ç­‰å¼€æºé¡¹ç›®ï¼Œä¸èƒ½é€šè¿‡åœ¨ GitHub æˆ–è€… Gitlab å¹³å°æäº¤\u003ccode\u003epull request\u003c/code\u003eã€‚è€Œæ˜¯éœ€è¦å°†ä¿®æ”¹çš„ä»£ç ï¼Œé€šè¿‡ Patch å½¢å¼æäº¤åˆ°å¯¹åº”çš„\u003ccode\u003elistserv\u003c/code\u003eä¾› Maintainer å®¡æ ¸ã€‚é‚£ä¹ˆå¦‚ä½•åˆ›å»º Patch å¹¶å‘é€å‘¢ï¼Ÿ\u003c/p\u003e","title":"å¦‚ä½•ä½¿ç”¨ git-send-mail ç»™å¼€æºç¤¾åŒºæäº¤ Patch"},{"content":"ç›®æ ‡ã€ä¾èµ–ã€å‘½ä»¤ ç›®æ ‡å°±æ˜¯æˆ‘ä»¬è¦å» make xxx çš„é‚£ä¸ª xxxï¼Œå°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦ç”Ÿæˆçš„ä¸œè¥¿ã€‚ ä¾èµ–æ˜¯ç”¨æ¥ç”Ÿæˆç›®å½•çš„åŸææ–™ å‘½ä»¤å°±æ˜¯åŠ å·¥æ–¹æ³•ï¼Œæ‰€ä»¥ make xxx çš„è¿‡ç¨‹å…¶å®å°±æ˜¯ä½¿ç”¨å‘½ä»¤å°†ä¾èµ–åŠ å·¥æˆç›®æ ‡çš„è¿‡ç¨‹ã€‚ é€šé…ç¬¦ % å’Œ Makefile è‡ªåŠ¨æ¨å¯¼ % æ˜¯ Makefile ä¸­çš„é€šé…ç¬¦ï¼Œä»£è¡¨ä¸€ä¸ªæˆ–å‡ ä¸ªå­—æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´%.oå°±ä»£è¡¨æ‰€æœ‰ä»¥.oä¸ºç»“å°¾çš„æ–‡ä»¶ã€‚ æ‰€è°“è‡ªåŠ¨æ¨å¯¼å…¶å®å°±æ˜¯ Makefile çš„è§„åˆ™ã€‚å½“ Makefile éœ€è¦æŸä¸€ä¸ªç›®æ ‡æ—¶ï¼Œä»–ä¼šæŠŠè¿™ä¸ªç›®æ ‡å»å¥—è§„åˆ™è¯´æ˜ï¼Œä¸€æ—¦å¥—ä¸Šäº†æŸä¸ªè§„åˆ™è¯´æ˜ï¼Œåˆ™ Makefile ä¼šè¯•å›¾å¯»æ‰¾è¿™ä¸ªè§„åˆ™ä¸­çš„ä¾èµ–ï¼Œå¦‚æœèƒ½æ‰¾åˆ°åˆ™ä¼šæ‰§è¡Œè¿™ä¸ªè§„åˆ™ç”¨ä¾èµ–ç”Ÿæˆç›®æ ‡ã€‚ Makefile ä¸­å®šä¹‰å’Œä½¿ç”¨å˜é‡ Makefile ä¸­å®šä¹‰å’Œä½¿ç”¨å˜é‡ï¼Œå’Œ shell è„šæœ¬ä¸­éå¸¸ç›¸ä¼¼ã€‚ç›¸ä¼¼çš„æ˜¯éƒ½æ²¡æœ‰å˜é‡ç±»å‹ï¼Œç›´æ¥å®šä¹‰ä½¿ç”¨ï¼Œå¼•ç”¨å˜é‡æ—¶ç”¨$varã€‚ ä¼ªç›®æ ‡ï¼ˆ.PHONYï¼‰ ä¼ªç›®æ ‡æ„æ€æ˜¯è¿™ä¸ªç›®æ ‡æœ¬èº«ä¸ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰§è¡Œè¿™ä¸ªç›®æ ‡ä¸æ˜¯ä¸ºäº†å¾—åˆ°æŸä¸ªæ–‡ä»¶æˆ–ä¸œè¥¿ï¼Œè€Œæ˜¯å•çº¯ä¸ºäº†æ‰§è¡Œè¿™ä¸ªç›®æ ‡ä¸‹é¢çš„å‘½ä»¤ã€‚ ä¼ªç›®æ ‡ä¸€èˆ¬éƒ½æ²¡æœ‰ä¾èµ–ï¼Œå› ä¸ºæ‰§è¡Œä¼ªç›®æ ‡å°±æ˜¯ä¸ºäº†æ‰§è¡Œç›®æ ‡ä¸‹é¢çš„å‘½ä»¤ã€‚æ—¢ç„¶ä¸€å®šè¦æ‰§è¡Œå‘½ä»¤äº†é‚£å°±ä¸å¿…åŠ ä¾èµ–ï¼Œå› ä¸ºä¸åŠ ä¾èµ–æ„æ€å°±æ˜¯æ— æ¡ä»¶æ‰§è¡Œã€‚ ä¼ªç›®æ ‡å¯ä»¥ç›´æ¥å†™ï¼Œä¸å½±å“ä½¿ç”¨ï¼›ä½†æ˜¯æœ‰æ—¶å€™ä¸ºäº†æ˜ç¡®å£°æ˜è¿™ä¸ªç›®æ ‡æ˜¯ä¼ªç›®æ ‡ä¼šåœ¨ä¼ªç›®æ ‡çš„å‰é¢ç”¨.PHONYæ¥æ˜ç¡®å£°æ˜å®ƒæ˜¯ä¼ªç›®æ ‡ã€‚ Makfile ä¸­å¼•ç”¨å…¶ä»– Makefile æœ‰æ—¶å€™ Makefile æ€»ä½“æ¯”è¾ƒå¤æ‚ï¼Œå› æ­¤åˆ†æˆå¥½å‡ ä¸ª Makefile æ¥å†™ã€‚ç„¶ååœ¨ä¸» Makefile ä¸­å¼•ç”¨å…¶ä»–çš„ï¼Œç”¨ include æŒ‡ä»¤æ¥å¼•ç”¨ã€‚å¼•ç”¨çš„æ•ˆæœä¹Ÿæ˜¯åŸåœ°å±•å¼€ï¼Œå’Œ C è¯­è¨€ä¸­çš„å¤´æ–‡ä»¶åŒ…å«éå¸¸ç›¸ä¼¼ã€‚ èµ‹å€¼ =æœ€ç®€å•çš„èµ‹å€¼ :=ä¸€èˆ¬ä¹Ÿæ˜¯èµ‹å€¼ ä»¥ä¸Šè¿™ä¸¤ä¸ªå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸ä¸€æ ·ã€‚ç”¨=èµ‹å€¼çš„å˜é‡ï¼Œåœ¨è¢«è§£ææ—¶ä»–çš„å€¼å–å†³äºæœ€åä¸€æ¬¡èµ‹å€¼æ—¶çš„å€¼ï¼Œæ‰€ä»¥ä½ çœ‹å˜é‡å¼•ç”¨çš„å€¼æ—¶ä¸èƒ½åªå¾€å‰é¢çœ‹ï¼Œè¿˜è¦å¾€åé¢çœ‹ã€‚ç”¨:=æ¥èµ‹å€¼çš„ï¼Œåˆ™æ˜¯å°±åœ°ç›´æ¥è§£æï¼Œåªç”¨å¾€å‰çœ‹å³å¯ã€‚\n?=å¦‚æœå˜é‡å‰é¢å¹¶æ²¡æœ‰èµ‹å€¼è¿‡åˆ™æ‰§è¡Œè¿™æ¡èµ‹å€¼ï¼Œå¦‚æœå‰é¢å·²ç»èµ‹å€¼è¿‡äº†åˆ™æœ¬è¡Œè¢«å¿½ç•¥ã€‚ï¼ˆå®éªŒå¯ä»¥çœ‹å‡ºï¼šæ‰€è°“çš„æ²¡æœ‰èµ‹å€¼è¿‡å…¶å®å°±æ˜¯è¿™ä¸ªå˜é‡æ²¡æœ‰è¢«å®šä¹‰è¿‡ï¼‰ +=ç”¨æ¥ç»™ä¸€ä¸ªå·²ç»èµ‹å€¼çš„å˜é‡æ¥ç»­èµ‹å€¼ï¼Œæ„æ€å°±æ˜¯æŠŠè¿™æ¬¡çš„å€¼åŠ åˆ°åŸæ¥çš„å€¼çš„åé¢ï¼Œæœ‰ç‚¹ç±»ä¼¼äº strcatã€‚ï¼ˆæ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼Œ+=ç»­æ¥çš„å†…å®¹å’ŒåŸæ¥çš„å†…å®¹ä¹‹é—´ä¼šè‡ªåŠ¨åŠ ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼‰ æ³¨æ„ï¼šMakefile ä¸­å¹¶ä¸è¦æ±‚èµ‹å€¼è¿ç®—ç¬¦ä¸¤è¾¹ä¸€å®šè¦æœ‰ç©ºæ ¼æˆ–è€…æ— ç©ºæ ¼ï¼Œè¿™ä¸€ç‚¹æ¯” shell çš„æ ¼å¼è¦æ±‚è¦æ¾ä¸€äº›ã€‚\nMakefile çš„ç¯å¢ƒå˜é‡ makefile ä¸­ç”¨ export å¯¼å‡ºçš„å°±æ˜¯ç¯å¢ƒå˜é‡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹è¦æ±‚ç¯å¢ƒå˜é‡åç”¨å¤§å†™ï¼Œæ™®é€šå˜é‡åç”¨å°å†™ã€‚ ç¯å¢ƒå˜é‡å’Œæ™®é€šå˜é‡ä¸åŒï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šç¯å¢ƒå˜é‡ç±»ä¼¼äºæ•´ä¸ªå·¥ç¨‹ä¸­æ‰€æœ‰ Makefile ä¹‹é—´å¯ä»¥å…±äº«çš„å…¨å±€å˜é‡ï¼Œè€Œæ™®é€šå˜é‡åªæ˜¯å½“å‰æœ¬ Makefile ä¸­ä½¿ç”¨çš„å±€éƒ¨å˜é‡ã€‚æ‰€ä»¥è¦æ³¨æ„ï¼šå®šä¹‰äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ä¼šå½±å“åˆ°å·¥ç¨‹ä¸­åˆ«çš„ Makefile æ–‡ä»¶ï¼Œå› æ­¤è¦å°å¿ƒã€‚ Makefile ä¸­å¯èƒ½æœ‰ä¸€äº›ç¯å¢ƒå˜é‡å¯èƒ½æ˜¯ makefile æœ¬èº«è‡ªå·±å®šä¹‰çš„å†…éƒ¨çš„ç¯å¢ƒå˜é‡æˆ–è€…æ˜¯å½“å‰çš„æ‰§è¡Œç¯å¢ƒæä¾›çš„ç¯å¢ƒå˜é‡ï¼ˆè­¬å¦‚æˆ‘ä»¬åœ¨ make æ‰§è¡Œæ—¶ç»™ makefile ä¼ å‚ã€‚make CC=arm-linux-gccï¼Œå…¶å®å°±æ˜¯ç»™å½“å‰ Makefile ä¼ äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ CCï¼Œå€¼æ˜¯ arm-linux-gccã€‚æˆ‘ä»¬åœ¨ make æ—¶ç»™ makefile ä¼ çš„ç¯å¢ƒå˜é‡å€¼ä¼˜å…ˆçº§æœ€é«˜çš„ï¼Œå¯ä»¥è¦†ç›– makefile ä¸­çš„èµ‹å€¼ï¼‰ã€‚è¿™å°±å¥½åƒ C è¯­è¨€ä¸­ç¼–è¯‘å™¨é¢„å®šä¹‰çš„å®__LINE__ __FUNCTION__ç­‰ä¸€æ ·ã€‚ Makefile ä¸­ä½¿ç”¨é€šé…ç¬¦ *ï¼šè‹¥å¹²ä¸ªä»»æ„å­—ç¬¦ ?ï¼š1 ä¸ªä»»æ„å­—ç¬¦ []ï¼šå°† [] ä¸­çš„å­—ç¬¦ä¾æ¬¡å»å’Œå¤–é¢çš„ç»“åˆåŒ¹é… è¿˜æœ‰ä¸ª%ï¼Œä¹Ÿæ˜¯é€šé…ç¬¦ï¼Œè¡¨ç¤ºä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œå’Œ*å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯%ä¸€èˆ¬åªç”¨äºè§„åˆ™æè¿°ä¸­ï¼Œåˆå«åšè§„åˆ™é€šé…ç¬¦ã€‚\nMakefile çš„è‡ªåŠ¨å˜é‡ ä¸ºä»€ä¹ˆä½¿ç”¨è‡ªåŠ¨å˜é‡ã€‚åœ¨æœ‰äº›æƒ…å†µä¸‹æ–‡ä»¶é›†åˆä¸­æ–‡ä»¶éå¸¸å¤šï¼Œæè¿°çš„æ—¶å€™å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ Makefile å°±ç”¨ä¸€äº›ç‰¹æ®Šçš„ç¬¦å·æ¥æ›¿ä»£ç¬¦åˆæŸç§æ¡ä»¶çš„æ–‡ä»¶é›†ï¼Œè¿™å°±å½¢æˆäº†è‡ªåŠ¨å˜é‡ã€‚ è‡ªåŠ¨å˜é‡çš„å«ä¹‰ï¼šé¢„å®šä¹‰çš„ç‰¹æ®Šæ„ä¹‰çš„ç¬¦å·ã€‚å°±ç±»ä¼¼äº C è¯­è¨€ç¼–è¯‘å™¨ä¸­é¢„åˆ¶çš„é‚£äº›å®__FILE__ä¸€æ ·ã€‚ å¸¸è§è‡ªåŠ¨å˜é‡ï¼š $@ï¼šè§„åˆ™çš„ç›®æ ‡æ–‡ä»¶å $\u0026lt;ï¼šè§„åˆ™çš„ä¾èµ–æ–‡ä»¶å $^ï¼šä¾èµ–çš„æ–‡ä»¶é›†åˆ å…¶ä»– Makefile ä¸­çš„æ³¨é‡Šç”¨# åœ¨ makefile çš„å‘½ä»¤è¡Œä¸­å‰é¢çš„@è¡¨ç¤ºé™é»˜æ‰§è¡Œ Makefile ä¸­é»˜è®¤æƒ…å†µä¸‹åœ¨æ‰§è¡Œä¸€è¡Œå‘½ä»¤å‰ä¼šå…ˆæŠŠè¿™è¡Œå‘½ä»¤ç»™æ‰“å°å‡ºæ¥ï¼Œç„¶åå†æ‰§è¡Œè¿™è¡Œå‘½ä»¤ å¦‚æœä½ ä¸æƒ³çœ‹åˆ°å‘½ä»¤æœ¬èº«ï¼Œåªæƒ³çœ‹åˆ°å‘½ä»¤æ‰§è¡Œå°±é™é»˜æ‰§è¡Œå³å¯ ","permalink":"https://lifeislife.cn/posts/makefile%E5%9F%BA%E7%A1%80/","summary":"\u003ch2 id=\"ç›®æ ‡ä¾èµ–å‘½ä»¤\"\u003eç›®æ ‡ã€ä¾èµ–ã€å‘½ä»¤\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eç›®æ ‡å°±æ˜¯æˆ‘ä»¬è¦å» make xxx çš„é‚£ä¸ª xxxï¼Œå°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦ç”Ÿæˆçš„ä¸œè¥¿ã€‚\u003c/li\u003e\n\u003cli\u003eä¾èµ–æ˜¯ç”¨æ¥ç”Ÿæˆç›®å½•çš„åŸææ–™\u003c/li\u003e\n\u003cli\u003eå‘½ä»¤å°±æ˜¯åŠ å·¥æ–¹æ³•ï¼Œæ‰€ä»¥ make xxx çš„è¿‡ç¨‹å…¶å®å°±æ˜¯ä½¿ç”¨å‘½ä»¤å°†ä¾èµ–åŠ å·¥æˆç›®æ ‡çš„è¿‡ç¨‹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"é€šé…ç¬¦--å’Œ-makefile-è‡ªåŠ¨æ¨å¯¼\"\u003eé€šé…ç¬¦ \u003ccode\u003e%\u003c/code\u003e å’Œ Makefile è‡ªåŠ¨æ¨å¯¼\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e%\u003c/code\u003e æ˜¯ Makefile ä¸­çš„é€šé…ç¬¦ï¼Œä»£è¡¨ä¸€ä¸ªæˆ–å‡ ä¸ªå­—æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´\u003ccode\u003e%.o\u003c/code\u003eå°±ä»£è¡¨æ‰€æœ‰ä»¥\u003ccode\u003e.o\u003c/code\u003eä¸ºç»“å°¾çš„æ–‡ä»¶ã€‚\u003c/li\u003e\n\u003cli\u003eæ‰€è°“è‡ªåŠ¨æ¨å¯¼å…¶å®å°±æ˜¯ Makefile çš„è§„åˆ™ã€‚å½“ Makefile éœ€è¦æŸä¸€ä¸ªç›®æ ‡æ—¶ï¼Œä»–ä¼šæŠŠè¿™ä¸ªç›®æ ‡å»å¥—è§„åˆ™è¯´æ˜ï¼Œä¸€æ—¦å¥—ä¸Šäº†æŸä¸ªè§„åˆ™è¯´æ˜ï¼Œåˆ™ Makefile ä¼šè¯•å›¾å¯»æ‰¾è¿™ä¸ªè§„åˆ™ä¸­çš„ä¾èµ–ï¼Œå¦‚æœèƒ½æ‰¾åˆ°åˆ™ä¼šæ‰§è¡Œè¿™ä¸ªè§„åˆ™ç”¨ä¾èµ–ç”Ÿæˆç›®æ ‡ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"makefile-ä¸­å®šä¹‰å’Œä½¿ç”¨å˜é‡\"\u003eMakefile ä¸­å®šä¹‰å’Œä½¿ç”¨å˜é‡\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eMakefile ä¸­å®šä¹‰å’Œä½¿ç”¨å˜é‡ï¼Œå’Œ shell è„šæœ¬ä¸­éå¸¸ç›¸ä¼¼ã€‚ç›¸ä¼¼çš„æ˜¯éƒ½æ²¡æœ‰å˜é‡ç±»å‹ï¼Œç›´æ¥å®šä¹‰ä½¿ç”¨ï¼Œå¼•ç”¨å˜é‡æ—¶ç”¨\u003ccode\u003e$var\u003c/code\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ä¼ªç›®æ ‡phony\"\u003eä¼ªç›®æ ‡ï¼ˆ\u003ccode\u003e.PHONY\u003c/code\u003eï¼‰\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eä¼ªç›®æ ‡æ„æ€æ˜¯è¿™ä¸ªç›®æ ‡æœ¬èº«ä¸ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰§è¡Œè¿™ä¸ªç›®æ ‡ä¸æ˜¯ä¸ºäº†å¾—åˆ°æŸä¸ªæ–‡ä»¶æˆ–ä¸œè¥¿ï¼Œè€Œæ˜¯å•çº¯ä¸ºäº†æ‰§è¡Œè¿™ä¸ªç›®æ ‡ä¸‹é¢çš„å‘½ä»¤ã€‚\u003c/li\u003e\n\u003cli\u003eä¼ªç›®æ ‡ä¸€èˆ¬éƒ½æ²¡æœ‰ä¾èµ–ï¼Œå› ä¸ºæ‰§è¡Œä¼ªç›®æ ‡å°±æ˜¯ä¸ºäº†æ‰§è¡Œç›®æ ‡ä¸‹é¢çš„å‘½ä»¤ã€‚æ—¢ç„¶ä¸€å®šè¦æ‰§è¡Œå‘½ä»¤äº†é‚£å°±ä¸å¿…åŠ ä¾èµ–ï¼Œå› ä¸ºä¸åŠ ä¾èµ–æ„æ€å°±æ˜¯æ— æ¡ä»¶æ‰§è¡Œã€‚\u003c/li\u003e\n\u003cli\u003eä¼ªç›®æ ‡å¯ä»¥ç›´æ¥å†™ï¼Œä¸å½±å“ä½¿ç”¨ï¼›ä½†æ˜¯æœ‰æ—¶å€™ä¸ºäº†æ˜ç¡®å£°æ˜è¿™ä¸ªç›®æ ‡æ˜¯ä¼ªç›®æ ‡ä¼šåœ¨ä¼ªç›®æ ‡çš„å‰é¢ç”¨\u003ccode\u003e.PHONY\u003c/code\u003eæ¥æ˜ç¡®å£°æ˜å®ƒæ˜¯ä¼ªç›®æ ‡ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"makfile-ä¸­å¼•ç”¨å…¶ä»–-makefile\"\u003eMakfile ä¸­å¼•ç”¨å…¶ä»– Makefile\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eæœ‰æ—¶å€™ Makefile æ€»ä½“æ¯”è¾ƒå¤æ‚ï¼Œå› æ­¤åˆ†æˆå¥½å‡ ä¸ª Makefile æ¥å†™ã€‚ç„¶ååœ¨ä¸» Makefile ä¸­å¼•ç”¨å…¶ä»–çš„ï¼Œç”¨ \u003ccode\u003einclude\u003c/code\u003e æŒ‡ä»¤æ¥å¼•ç”¨ã€‚å¼•ç”¨çš„æ•ˆæœä¹Ÿæ˜¯åŸåœ°å±•å¼€ï¼Œå’Œ C è¯­è¨€ä¸­çš„å¤´æ–‡ä»¶åŒ…å«éå¸¸ç›¸ä¼¼ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"èµ‹å€¼\"\u003eèµ‹å€¼\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e=\u003c/code\u003eæœ€ç®€å•çš„èµ‹å€¼\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:=\u003c/code\u003eä¸€èˆ¬ä¹Ÿæ˜¯èµ‹å€¼\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä»¥ä¸Šè¿™ä¸¤ä¸ªå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸ä¸€æ ·ã€‚ç”¨\u003ccode\u003e=\u003c/code\u003eèµ‹å€¼çš„å˜é‡ï¼Œåœ¨è¢«è§£ææ—¶ä»–çš„å€¼å–å†³äºæœ€åä¸€æ¬¡èµ‹å€¼æ—¶çš„å€¼ï¼Œæ‰€ä»¥ä½ çœ‹å˜é‡å¼•ç”¨çš„å€¼æ—¶ä¸èƒ½åªå¾€å‰é¢çœ‹ï¼Œè¿˜è¦å¾€åé¢çœ‹ã€‚ç”¨\u003ccode\u003e:=\u003c/code\u003eæ¥èµ‹å€¼çš„ï¼Œåˆ™æ˜¯å°±åœ°ç›´æ¥è§£æï¼Œåªç”¨å¾€å‰çœ‹å³å¯ã€‚\u003c/p\u003e","title":"Makefile åŸºç¡€"},{"content":"è„šæœ¬è¯­è¨€ å¸¸ç”¨çš„è„šæœ¬è¯­è¨€æœ‰ shã€bashã€cshã€kshã€perlã€pythonï¼› åœ¨ Linux ä¸‹å¸¸ç”¨çš„è„šæœ¬è¯­è¨€å…¶å®å°±æ˜¯ bashã€shï¼› è„šæœ¬è¯­è¨€ä¸€èˆ¬åœ¨åµŒå…¥å¼ä¸­åº”ç”¨ï¼Œä¸»è¦æ˜¯ç”¨æ¥åšé…ç½®ã€‚ï¼ˆä¸€ä¸ªå¤æ‚çš„åµŒå…¥å¼ç¨‹åºéƒ½æ˜¯å¯é…ç½®çš„ï¼Œé…ç½®è¿‡ç¨‹å°±æ˜¯ç”¨è„šæœ¬è¯­è¨€æ¥å®ç°çš„ï¼‰è‡ªç„¶ä¸ä¼šä½¿ç”¨è¿‡äºå¤æ‚çš„è„šæœ¬è¯­è¨€ç‰¹æ€§ï¼Œå› æ­¤åªéœ€è¦é’ˆå¯¹æ€§çš„å­¦ä¹ å³å¯ã€‚ shell è„šæœ¬çš„è¿è¡Œæœºåˆ¶ C/C++ è¯­è¨€è¿™ç§ç¼–å†™è¿‡ç¨‹æ˜¯ï¼šç¼–å†™å‡ºæºä»£ç ï¼ˆæºä»£ç æ˜¯ä¸èƒ½ç›´æ¥è¿è¡Œçš„ï¼‰ç„¶åç¼–è¯‘é“¾æ¥å½¢æˆå¯æ‰§è¡ŒäºŒè¿›åˆ¶ç¨‹åºï¼Œç„¶åæ‰èƒ½è¿è¡Œï¼›è€Œè„šæœ¬ç¨‹åºä¸åŒï¼Œè„šæœ¬ç¨‹åºç¼–å†™å¥½åæºä»£ç å³å¯ç›´æ¥è¿è¡Œï¼ˆæ²¡æœ‰ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ï¼‰ï¼› shell ç¨‹åºæ˜¯è§£é‡Šè¿è¡Œçš„ï¼Œæ‰€è°“è§£é‡Šè¿è¡Œå°±æ˜¯è¯´å½“æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª shell ç¨‹åºæ—¶ï¼Œshell è§£æå™¨ä¼šé€è¡Œçš„è§£é‡Š shell ç¨‹åºä»£ç ï¼Œç„¶åä¸€è¡Œä¸€è¡Œçš„å»è¿è¡Œã€‚ï¼ˆé¡ºåºç»“æ„ï¼‰ CPU å®é™…åªè®¤è¯†äºŒè¿›åˆ¶ä»£ç ï¼Œæ ¹æœ¬ä¸è®¤è¯†æºä»£ç ã€‚è„šæœ¬ç¨‹åºæºä»£ç å…¶å®ä¹Ÿä¸æ˜¯äºŒè¿›åˆ¶ä»£ç ï¼ŒCPU ä¹Ÿä¸è®¤è¯†ï¼Œä¹Ÿä¸èƒ½ç›´æ¥æ‰§è¡Œã€‚åªä¸è¿‡è„šæœ¬ç¨‹åºçš„ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ä¸æ˜¯ä»¥è„šæœ¬ç¨‹åºæºä»£ç ä¸ºå•ä½è¿›è¡Œçš„ï¼Œè€Œæ˜¯åœ¨è„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­é€è¡Œçš„è§£é‡Šæ‰§è¡Œæ—¶æ‰å»å®Œæˆè„šæœ¬ç¨‹åºæºä»£ç è½¬æˆäºŒè¿›åˆ¶çš„è¿‡ç¨‹ï¼ˆä¸ä¸€å®šæ˜¯ç¼–è¯‘é“¾æ¥ï¼Œå› ä¸ºè¿™è¡Œè„šæœ¬ç¨‹åºå¯èƒ½æ—©å°±ç¼–è¯‘è¿æ¥å¥½äº†ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯è°ƒç”¨å®ƒï¼‰ã€‚ åŠ¨æ‰‹å†™ç¬¬ä¸€ä¸ª shell ç¼–è¾‘å™¨ä¸ç¼–è¯‘å™¨ shell ç¨‹åºæ˜¯æ–‡æœ¬æ ¼å¼çš„ï¼Œåªè¦æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬çš„ shell æ˜¯è¦åœ¨ Linux ç³»ç»Ÿä¸‹è¿è¡Œçš„ï¼Œæ‰€ä»¥æ¢è¡Œç¬¦å¿…é¡»æ˜¯\\nï¼Œè€Œ Windows ä¸‹çš„æ¢è¡Œç¬¦æ˜¯\\r\\nï¼Œå› æ­¤ Windows ä¸­çš„ç¼–è¾‘å™¨å†™çš„ shell ä¸èƒ½åœ¨ Linux ä¸‹è¿è¡Œã€‚ ç¼–è¯‘å™¨ä¸æ¶‰åŠï¼Œå› ä¸º shell æ˜¯è§£é‡Šæ€§è¯­è¨€ï¼Œç›´æ¥ç¼–è¾‘å®Œå°±å¯ä»¥è¿è¡Œã€‚ shell ç¨‹åºè¿è¡Œçš„è¿è¡Œçš„ä¸‰ç§æ–¹æ³• ./xx.shï¼Œå’Œè¿è¡ŒäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæ–¹æ³•ä¸€æ ·ã€‚è¿™æ ·è¿è¡Œ shell è¦æ±‚ shell ç¨‹åºå¿…é¡»å…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚chmod a+x xx.sh æ¥æ·»åŠ å¯æ‰§è¡Œæƒé™ã€‚ source xx.shï¼Œsource æ˜¯ Linux çš„ä¸€ä¸ªå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å°±æ˜¯ç”¨æ¥æ‰§è¡Œè„šæœ¬ç¨‹åºçš„ã€‚è¿™æ ·è¿è¡Œä¸éœ€è¦è„šæœ¬å…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚ bash xx.shï¼Œbash æ˜¯ä¸€ä¸ªè„šæœ¬ç¨‹åºè§£é‡Šå™¨ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºã€‚è¿™æ ·æ‰§è¡Œç›¸å½“äºæˆ‘ä»¬æ‰§è¡Œäº† bash ç¨‹åºï¼Œç„¶åæŠŠ xx.sh ä½œä¸º argv[1] ä¼ ç»™ä»–è¿è¡Œã€‚ hello world ç¨‹åºå’Œè§£é‡Š shell ç¨‹åºçš„ç¬¬ä¸€è¡Œä¸€èˆ¬éƒ½æ˜¯ä»¥#!/bin/shå¼€å§‹ï¼Œè¿™è¡Œè¯çš„æ„æ€å°±æ˜¯æŒ‡å®š shell ç¨‹åºæ‰§è¡Œæ—¶è¢«å“ªä¸ªè§£é‡Šå™¨è§£é‡Šæ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå†™ä¸Š/bin/shæ„æ€å°±æ˜¯è¿™ä¸ªshellå°†æ¥è¢«å½“å‰æœºå™¨ä¸­/binç›®å½•ä¸‹çš„shå¯æ‰§è¡Œç¨‹åºæ‰§è¡Œã€‚å¯ä»¥å°†ç¬¬ä¸€è¡Œå†™ä¸º#!/bin/bashæ¥æŒ‡å®šä½¿ç”¨bashæ‰§è¡Œè¯¥è„šæœ¬ã€‚ è„šæœ¬ä¸­çš„æ³¨é‡Šä½¿ç”¨#ï¼Œ#å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šè¡Œã€‚å¦‚æœæœ‰å¤šè¡Œéœ€è¦æ³¨é‡Šï¼Œæ¯è¡Œå‰é¢éƒ½è¦åŠ #ã€‚ï¼ˆ#å°±ç›¸å½“äºæ˜¯ C è¯­è¨€ä¸­çš„//ï¼‰; shell ç¨‹åºçš„æ­£æ–‡ï¼Œç”±å¾ˆå¤šè¡Œ shell è¯­å¥æ„æˆã€‚ shell è¯­æ³• shell å°±æ˜¯æŠŠä»¥å‰å‘½ä»¤è¡Œä¸­é”®å…¥æ‰§è¡Œçš„å‘½ä»¤å†™æˆäº†ç¨‹åºã€‚shell å…¶å®å°±æ˜¯ä¸ºäº†é¿å…åå¤çš„åœ¨å‘½ä»¤è¡Œä¸‹æ‰‹å·¥è¾“å…¥è€Œå‘æ˜çš„ä¸€ç§æŠŠæ‰‹å·¥è¾“å…¥æ­¥éª¤è®°å½•ä¸‹æ¥ï¼Œç„¶åé€šè¿‡æ‰§è¡Œ shell è„šæœ¬ç¨‹åºå°±èƒ½å†æ¬¡å¤è¿°åŸæ¥è®°å½•çš„æ‰‹å·¥è¾“å…¥è¿‡ç¨‹çš„ä¸€ç§æŠ€æœ¯ã€‚\nshell ä¸­çš„å˜é‡å®šä¹‰å’Œå¼•ç”¨ å˜é‡å®šä¹‰å’Œåˆå§‹åŒ–ã€‚shell æ˜¯å¼±ç±»å‹è¯­è¨€ï¼ˆè¯­è¨€ä¸­çš„å˜é‡å¦‚æœæœ‰æ˜ç¡®çš„ç±»å‹åˆ™å±äºå¼ºç±»å‹è¯­è¨€ï¼›å˜é‡æ²¡æœ‰æ˜ç¡®ç±»å‹å°±æ˜¯å¼±ç±»å‹è¯­è¨€ï¼‰ï¼Œå’Œ C è¯­è¨€ä¸åŒã€‚åœ¨ shell ç¼–ç¨‹ä¸­å®šä¹‰å˜é‡ä¸éœ€è¦åˆ¶å®šç±»å‹ï¼Œä¹Ÿæ²¡æœ‰ç±»å‹è¿™ä¸ªæ¦‚å¿µã€‚ å˜é‡å®šä¹‰æ—¶å¯ä»¥åˆå§‹åŒ–ï¼Œä½¿ç”¨=è¿›è¡Œåˆå§‹åŒ–èµ‹å€¼ã€‚åœ¨ shell ä¸­èµ‹å€¼çš„=ä¸¤è¾¹æ˜¯ä¸èƒ½æœ‰ç©ºæ ¼çš„ã€‚ æ³¨æ„ï¼šshell å¯¹è¯­æ³•éå¸¸åœ¨æ„ï¼Œéå¸¸ä¸¥æ ¼ã€‚å¾ˆå¤šåœ°æ–¹ç©ºæ ¼éƒ½æ˜¯å¿…é¡»æ²¡æœ‰æˆ–è€…å¿…é¡»æœ‰ï¼Œè€Œä¸”ä¸èƒ½éšæ„æœ‰æ²¡æœ‰ç©ºæ ¼ã€‚ å˜é‡èµ‹å€¼ï¼Œå˜é‡å®šä¹‰åå¯ä»¥å†æ¬¡èµ‹å€¼ï¼Œæ–°çš„èµ‹å€¼ä¼šè¦†ç›–è€çš„èµ‹å€¼ã€‚shell ä¸­å¹¶ä¸åˆ»æ„åŒºåˆ†å˜é‡çš„å®šä¹‰å’Œèµ‹å€¼ï¼Œåæ­£æ¯ä¸ªå˜é‡å°±æ˜¯ä¸€ä¸ªç¬¦å·ï¼Œè¿™ä¸ªç¬¦å·çš„å€¼å°±æ˜¯æœ€åä¸€ä¸ªç»™ä»–èµ‹å€¼æ—¶çš„å€¼ã€‚ å˜é‡å¼•ç”¨ã€‚shell ä¸­å¼•ç”¨ä¸€ä¸ªå˜é‡å¿…é¡»ä½¿ç”¨$ç¬¦å·ï¼Œ$ç¬¦å·å°±æ˜¯å˜é‡è§£å¼•ç”¨ç¬¦å·ã€‚ æ³¨æ„ï¼š$ç¬¦å·åé¢è·Ÿä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±ä¼šè¢«å½“ä½œå˜é‡å»è§£æã€‚å¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²æœ¬èº«æ²¡æœ‰å®šä¹‰ï¼Œæ‰§è¡Œæ—¶å¹¶ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªå˜é‡è§£æä¸ºç©ºã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ shell ä¸­æ²¡æœ‰è¢«å®šä¹‰çš„å˜é‡å…¶å®å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªå®šä¹‰å¹¶èµ‹å€¼ä¸ºç©ºçš„å˜é‡ã€‚\næ³¨æ„ï¼šå˜é‡å¼•ç”¨çš„æ—¶å€™å¯ä»¥$varï¼Œä¹Ÿå¯ä»¥${var}ã€‚è¿™ä¸¤ç§çš„åŒºåˆ«æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹åªèƒ½ç”¨${var}è€Œä¸èƒ½ç®€å•çš„$varã€‚\nshell ä¸­æ— å¼•ç”¨ã€å•å¼•å·å’ŒåŒå¼•å·çš„åŒºåˆ« shell ä¸­ä½¿ç”¨å­—ç¬¦ä¸²å¯ä»¥ä¸åŠ åŒå¼•å·ï¼Œç›´æ¥ä½¿ç”¨ã€‚è€Œä¸”æœ‰ç©ºæ ¼æ—¶ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ç¼ºé™·æ˜¯ä¸èƒ½è¾“å‡º\u0026quot;æˆ–è€…å…¶ä»–è½¬ä¹‰å­—ç¬¦ã€‚ shell ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨å•å¼•å·æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œä¹Ÿæ˜¯ç›´æ¥ä½¿ç”¨çš„ï¼Œä¸èƒ½è¾“å‡ºè½¬ä¹‰å­—ç¬¦ã€‚ å•å¼•å·ä¸­ï¼šå®Œå…¨å­—é¢æ›¿æ¢ï¼ˆä¸å¯åŒ…å«å•å¼•å·æœ¬èº«ï¼‰ åŒå¼•å·ä¸­ï¼š $åŠ å˜é‡åå¯ä»¥å–å˜é‡çš„å€¼ åå¼•å·ä»è¡¨ç¤ºå‘½ä»¤æ›¿æ¢ \\$è¡¨ç¤º$çš„å­—é¢å€¼ï¼ˆè¾“å‡º$ç¬¦å·ï¼‰ `è¡¨ç¤º`çš„å­—é¢å€¼ \\\u0026quot;è¡¨ç¤º\u0026quot;çš„å­—é¢å€¼ \\\\è¡¨ç¤º\\çš„å­—é¢å€¼ é™¤ä»¥ä¸Šæƒ…å†µä¹‹å¤–ï¼Œåœ¨å…¶å®ƒå­—ç¬¦å‰é¢çš„\\æ— ç‰¹æ®Šå«ä¹‰ï¼Œåªè¡¨ç¤ºå­—é¢å€¼ã€‚\nå•å¼•å·ä¼šåŸæ ·è¾“å‡ºï¼ŒåŒå¼•å·å¯ä»¥è°ƒç”¨å‘½ä»¤ï¼š\nPATH_A=\u0026#34;`pwd`/include\u0026#34; PATH_B=\u0026#39;`pwd`/include\u0026#39; echo $PATH_A # /home/a/b/include echo $PATH_B # `pwd`/include shell ä¸­è°ƒç”¨ Linux å‘½ä»¤ ç›´æ¥æ‰§è¡Œ åå¼•å·æ‹¬èµ·æ¥æ‰§è¡Œã€‚æœ‰æ—¶å€™æˆ‘ä»¬åœ¨ shell ä¸­è°ƒç”¨ Linux å‘½ä»¤æ˜¯ä¸ºäº†å¾—åˆ°è¿™ä¸ªå‘½ä»¤çš„è¿”å›å€¼ï¼ˆç»“æœå€¼ï¼‰ï¼Œè¿™æ—¶å€™å°±é€‚åˆç”¨ä¸€å¯¹åå¼•å· (é”®ç›˜ä¸Š ESC æŒ‰é”®ä¸‹é¢çš„é‚£ä¸ªæŒ‰é”®ï¼Œå’Œ~åœ¨ä¸€ä¸ªæŒ‰é”®ä¸Š) æ¥è°ƒç”¨æ‰§è¡Œå‘½ä»¤ã€‚ shell ä¸­çš„é€‰æ‹©åˆ†æ”¯ç»“æ„ shell çš„ if è¯­è¨€ç”¨æ³•å¾ˆå¤šï¼Œåœ¨æ­¤åªä»‹ç»å¸¸ç”¨çš„ï¼Œå…¶ä»–æ„Ÿå…´è¶£å¯ä»¥è‡ªå·±å»å­¦ å…¸å‹ifè¯­è¨€æ ¼å¼ï¼š\nif [ è¡¨è¾¾å¼ ]; then xxx yyy zzz else xxx ddd uuu fi if çš„å…¸å‹åº”ç”¨ -fåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ³¨æ„[]é‡Œé¢å‰åéƒ½æœ‰ç©ºæ ¼ï¼Œä¸èƒ½çœç•¥\n-dåˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨\n\u0026quot;str1\u0026quot; = \u0026quot;str2\u0026quot;åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œæ³¨æ„ç”¨ä¸€ä¸ªç­‰å·è€Œä¸æ˜¯ä¸¤ä¸ª\nåˆ¤æ–­æ•°å­—æ˜¯å¦ç›¸ç­‰\n-eqç­‰äº -gtå¤§äº -ltå°äº -geå¤§äºç­‰äº -leå°äºç­‰äº -zåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œæ³¨æ„-zåˆ¤æ–­æ—¶å¦‚æœå˜é‡æœ¬èº«æ²¡å®šä¹‰ä¹Ÿæ˜¯ä¸æˆç«‹ï¼ˆä¹Ÿå°±æ˜¯è¯´-z è®¤ä¸ºæ²¡å®šä¹‰ä¸ç­‰äºä¸ºç©ºï¼‰\n-oè¡¨ç¤ºé€»è¾‘æˆ–ï¼Œè¿æ¥ä¸¤ä¸ªè¡¨è¾¾å¼\nif [ 10 -eq 10 -o ]; then \u0026amp;\u0026amp; ||è¡¨ç¤ºé€»è¾‘ä¸å’Œé€»è¾‘æˆ–\nshell ä¸­çš„å¾ªç¯ç»“æ„ for å¾ªç¯ï¼Œè¦æ±‚èƒ½çœ‹æ‡‚ã€èƒ½æ”¹å³å¯ã€‚ä¸è¦æ±‚èƒ½å¤Ÿå®Œå…¨ä¸å‚è€ƒå†™å‡ºæ¥ã€‚å› ä¸ºæ¯•ç«ŸåµŒå…¥å¼å¹¶ä¸éœ€è¦å®Œå…¨é‡æ–°æ‰‹å†™ã€‚\nwhile å¾ªç¯ï¼Œå’Œ C è¯­è¨€çš„å¾ªç¯åœ¨é€»è¾‘ä¸Šæ— å·®åˆ«ï¼Œè¦æ³¨æ„å¾ˆå¤šæ ¼å¼è¦æ±‚ï¼Œè­¬å¦‚ï¼šwhile åé¢çš„ [] ä¸¤è¾¹éƒ½æœ‰ç©ºæ ¼ï¼Œ[] åé¢æœ‰åˆ†å·ï¼ˆå¦‚æœ do æ”¾åœ¨ä¸€è¡Œçš„è¯ï¼‰ï¼Œi++çš„å†™æ³•ä¸­æœ‰ä¸¤å±‚æ‹¬å·ã€‚\necho çš„åˆ›å»ºå’Œè¿½åŠ è¾“å…¥æ–‡ä»¶ åœ¨ shell ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ echo æŒ‡ä»¤æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å°†ä¸€äº›å†…å®¹ä¼ å…¥è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚åˆ›å»ºæ–‡ä»¶å¹¶è¾“å…¥å†…å®¹çš„å…³é”®å°±æ˜¯\u0026gt;ã€‚ è¿˜å¯ä»¥ä½¿ç”¨ echo æŒ‡ä»¤é…åˆè¿½åŠ ç¬¦å·\u0026gt;\u0026gt; å‘ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶æœ«å°¾è¿½åŠ è¾“å…¥å†…å®¹ã€‚ shell ä¸­å…¶ä»–å€¼å¾—å…³æ³¨çš„çŸ¥è¯†ç‚¹ case è¯­å¥ shell ä¸­çš„ case è¯­å¥å’Œ C è¯­è¨€ä¸­çš„ switch case è¯­å¥ä½œç”¨ä¸€æ ·ï¼Œæ ¼å¼æœ‰å·®å¼‚ shell ä¸­çš„ case è¯­å¥å¤©ç”Ÿæ²¡æœ‰ breakï¼Œä¹Ÿä¸éœ€è¦breakï¼Œå’Œ C è¯­è¨€ä¸­çš„ switch case ä¸åŒã€‚shell ä¸­çš„ case é»˜è®¤å°±æ˜¯åŒ¹é…ä¸Šå“ªä¸ªæ‰§è¡Œå“ªä¸ªï¼Œä¸ä¼šè¯´æ‰§è¡Œå®Œäº†è¿˜å»æ‰§è¡Œåé¢çš„å…¶ä»– case è°ƒç”¨ shell ç¨‹åºçš„ä¼ å‚ C è¯­è¨€ä¸­å¯ä»¥é€šè¿‡ main å‡½æ•°çš„ argc å’Œ argv ç»™ç¨‹åºä¼ å‚ shell ç¨‹åºæœ¬èº«ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨æ—¶ä¼ å‚ç»™ä»–ã€‚åœ¨ shell ç¨‹åºå†…éƒ¨ä½¿ç”¨ä¼ å‚ä¹Ÿæ˜¯ä½¿ç”¨çš„ä¸€äº›ç‰¹å®šç¬¦å·æ¥è¡¨ç¤ºçš„ï¼ŒåŒ…æ‹¬ï¼š $#è¡¨ç¤ºè°ƒç”¨è¯¥ shell æ—¶ä¼ å‚çš„ä¸ªæ•°ã€‚ï¼ˆ$#è®¡æ•°æ—¶åªè€ƒè™‘çœŸæ­£çš„å‚æ•°ä¸ªæ•°ï¼‰ $0ã€$1ã€$2Â·Â·Â·Â·Â·åˆ™ä¾æ¬¡è¡¨ç¤ºä¼ å‚çš„å„ä¸ªå‚æ•° ./a.out aa bb cc # argc = 4 # argv[0] = ./a.out # argv[1] æ˜¯ç¬¬ä¸€ä¸ªæœ‰æ•ˆå‚æ•°Â·Â·Â·Â· source a.sh aa bb cc # $# = 3 # $0æ˜¯æ‰§è¡Œè¿™ä¸ª shell ç¨‹åºçš„è§£æç¨‹åºçš„åå­— # $1æ˜¯ç¬¬ä¸€ä¸ªæœ‰æ•ˆå‚æ•°çš„å€¼ # $2æ˜¯ç¬¬ 2 ä¸ªæœ‰æ•ˆå‚æ•°çš„å€¼Â·Â·Â·Â·Â· while å¾ªç¯å’Œ case è¯­è¨€å’Œä¼ å‚ç»“åˆ shell ä¸­çš„ break å…³é”®å­—å’Œ C è¯­è¨€ä¸­æ„ä¹‰ç›¸åŒï¼ˆéƒ½æ˜¯è·³å‡ºï¼‰ä½†æ˜¯ç”¨æ³•ä¸åŒã€‚å› ä¸º shell ä¸­ case è¯­å¥é»˜è®¤ä¸ç”¨ break çš„ï¼Œå› æ­¤åœ¨ shell ä¸­ break åªç”¨äºå¾ªç¯è·³å‡ºã€‚æ‰€ä»¥å½“ while ä¸­å†…åµŒ case è¯­å¥æ—¶ï¼Œcase ä¸­çš„ break æ˜¯è·³å‡ºå¤–å±‚çš„ while å¾ªç¯çš„ï¼Œä¸æ˜¯ç”¨æ¥è·³å‡º case è¯­å¥çš„ã€‚ shell ä¸­çš„$# $1ç­‰å†…ç½®å˜é‡çš„å€¼æ˜¯å¯ä»¥è¢«æ”¹å˜ï¼Œè¢« shift æŒ‡ä»¤æ”¹å˜ã€‚shift æŒ‡ä»¤æœ‰ç‚¹åƒå·¦ç§»è¿ç®—ç¬¦ï¼ŒæŠŠæˆ‘ä»¬ç»™ shell ç¨‹åºçš„ä¼ å‚å·¦ç§»äº†ä¸€ä¸ªç§»å‡ºå»äº†ï¼ŒåŸæ¥çš„$2å˜æˆäº†æ–°çš„$1ï¼ŒåŸæ¥çš„$#å°‘äº† 1 ä¸ªã€‚ ","permalink":"https://lifeislife.cn/posts/%E5%B5%8C%E5%85%A5%E5%BC%8Fshell%E5%9F%BA%E7%A1%80/","summary":"\u003ch2 id=\"è„šæœ¬è¯­è¨€\"\u003eè„šæœ¬è¯­è¨€\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå¸¸ç”¨çš„è„šæœ¬è¯­è¨€æœ‰ shã€bashã€cshã€kshã€perlã€pythonï¼›\u003c/li\u003e\n\u003cli\u003eåœ¨ Linux ä¸‹å¸¸ç”¨çš„è„šæœ¬è¯­è¨€å…¶å®å°±æ˜¯ bashã€shï¼›\u003c/li\u003e\n\u003cli\u003eè„šæœ¬è¯­è¨€ä¸€èˆ¬åœ¨åµŒå…¥å¼ä¸­åº”ç”¨ï¼Œä¸»è¦æ˜¯ç”¨æ¥åšé…ç½®ã€‚ï¼ˆä¸€ä¸ªå¤æ‚çš„åµŒå…¥å¼ç¨‹åºéƒ½æ˜¯å¯é…ç½®çš„ï¼Œé…ç½®è¿‡ç¨‹å°±æ˜¯ç”¨è„šæœ¬è¯­è¨€æ¥å®ç°çš„ï¼‰è‡ªç„¶ä¸ä¼šä½¿ç”¨è¿‡äºå¤æ‚çš„è„šæœ¬è¯­è¨€ç‰¹æ€§ï¼Œå› æ­¤åªéœ€è¦é’ˆå¯¹æ€§çš„å­¦ä¹ å³å¯ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"shell-è„šæœ¬çš„è¿è¡Œæœºåˆ¶\"\u003eshell è„šæœ¬çš„è¿è¡Œæœºåˆ¶\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eC/C++ è¯­è¨€è¿™ç§ç¼–å†™è¿‡ç¨‹æ˜¯ï¼šç¼–å†™å‡ºæºä»£ç ï¼ˆæºä»£ç æ˜¯ä¸èƒ½ç›´æ¥è¿è¡Œçš„ï¼‰ç„¶åç¼–è¯‘é“¾æ¥å½¢æˆå¯æ‰§è¡ŒäºŒè¿›åˆ¶ç¨‹åºï¼Œç„¶åæ‰èƒ½è¿è¡Œï¼›è€Œè„šæœ¬ç¨‹åºä¸åŒï¼Œè„šæœ¬ç¨‹åºç¼–å†™å¥½åæºä»£ç å³å¯ç›´æ¥è¿è¡Œï¼ˆæ²¡æœ‰ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eshell ç¨‹åºæ˜¯è§£é‡Šè¿è¡Œçš„ï¼Œæ‰€è°“è§£é‡Šè¿è¡Œå°±æ˜¯è¯´å½“æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª shell ç¨‹åºæ—¶ï¼Œshell è§£æå™¨ä¼šé€è¡Œçš„è§£é‡Š shell ç¨‹åºä»£ç ï¼Œç„¶åä¸€è¡Œä¸€è¡Œçš„å»è¿è¡Œã€‚ï¼ˆé¡ºåºç»“æ„ï¼‰\u003c/li\u003e\n\u003cli\u003eCPU å®é™…åªè®¤è¯†äºŒè¿›åˆ¶ä»£ç ï¼Œæ ¹æœ¬ä¸è®¤è¯†æºä»£ç ã€‚è„šæœ¬ç¨‹åºæºä»£ç å…¶å®ä¹Ÿä¸æ˜¯äºŒè¿›åˆ¶ä»£ç ï¼ŒCPU ä¹Ÿä¸è®¤è¯†ï¼Œä¹Ÿä¸èƒ½ç›´æ¥æ‰§è¡Œã€‚åªä¸è¿‡è„šæœ¬ç¨‹åºçš„ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ä¸æ˜¯ä»¥è„šæœ¬ç¨‹åºæºä»£ç ä¸ºå•ä½è¿›è¡Œçš„ï¼Œè€Œæ˜¯åœ¨è„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­é€è¡Œçš„è§£é‡Šæ‰§è¡Œæ—¶æ‰å»å®Œæˆè„šæœ¬ç¨‹åºæºä»£ç è½¬æˆäºŒè¿›åˆ¶çš„è¿‡ç¨‹ï¼ˆä¸ä¸€å®šæ˜¯ç¼–è¯‘é“¾æ¥ï¼Œå› ä¸ºè¿™è¡Œè„šæœ¬ç¨‹åºå¯èƒ½æ—©å°±ç¼–è¯‘è¿æ¥å¥½äº†ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯è°ƒç”¨å®ƒï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åŠ¨æ‰‹å†™ç¬¬ä¸€ä¸ª-shell\"\u003eåŠ¨æ‰‹å†™ç¬¬ä¸€ä¸ª shell\u003c/h2\u003e\n\u003ch3 id=\"ç¼–è¾‘å™¨ä¸ç¼–è¯‘å™¨\"\u003eç¼–è¾‘å™¨ä¸ç¼–è¯‘å™¨\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eshell ç¨‹åºæ˜¯æ–‡æœ¬æ ¼å¼çš„ï¼Œåªè¦æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬çš„ shell æ˜¯è¦åœ¨ Linux ç³»ç»Ÿä¸‹è¿è¡Œçš„ï¼Œæ‰€ä»¥æ¢è¡Œç¬¦å¿…é¡»æ˜¯\u003ccode\u003e\\n\u003c/code\u003eï¼Œè€Œ Windows ä¸‹çš„æ¢è¡Œç¬¦æ˜¯\u003ccode\u003e\\r\\n\u003c/code\u003eï¼Œå› æ­¤ Windows ä¸­çš„ç¼–è¾‘å™¨å†™çš„ shell ä¸èƒ½åœ¨ Linux ä¸‹è¿è¡Œã€‚\u003c/li\u003e\n\u003cli\u003eç¼–è¯‘å™¨ä¸æ¶‰åŠï¼Œå› ä¸º shell æ˜¯è§£é‡Šæ€§è¯­è¨€ï¼Œç›´æ¥ç¼–è¾‘å®Œå°±å¯ä»¥è¿è¡Œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"shell-ç¨‹åºè¿è¡Œçš„è¿è¡Œçš„ä¸‰ç§æ–¹æ³•\"\u003eshell ç¨‹åºè¿è¡Œçš„è¿è¡Œçš„ä¸‰ç§æ–¹æ³•\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e./xx.sh\u003c/code\u003eï¼Œå’Œè¿è¡ŒäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæ–¹æ³•ä¸€æ ·ã€‚è¿™æ ·è¿è¡Œ shell è¦æ±‚ shell ç¨‹åºå¿…é¡»å…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚\u003ccode\u003echmod a+x xx.sh\u003c/code\u003e æ¥æ·»åŠ å¯æ‰§è¡Œæƒé™ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esource xx.sh\u003c/code\u003eï¼Œ\u003ccode\u003esource\u003c/code\u003e æ˜¯ Linux çš„ä¸€ä¸ªå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å°±æ˜¯ç”¨æ¥æ‰§è¡Œè„šæœ¬ç¨‹åºçš„ã€‚è¿™æ ·è¿è¡Œä¸éœ€è¦è„šæœ¬å…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebash xx.sh\u003c/code\u003eï¼Œ\u003ccode\u003ebash\u003c/code\u003e æ˜¯ä¸€ä¸ªè„šæœ¬ç¨‹åºè§£é‡Šå™¨ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºã€‚è¿™æ ·æ‰§è¡Œç›¸å½“äºæˆ‘ä»¬æ‰§è¡Œäº† \u003ccode\u003ebash\u003c/code\u003e ç¨‹åºï¼Œç„¶åæŠŠ \u003ccode\u003exx.sh\u003c/code\u003e ä½œä¸º \u003ccode\u003eargv[1]\u003c/code\u003e ä¼ ç»™ä»–è¿è¡Œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"hello-world-ç¨‹åºå’Œè§£é‡Š\"\u003ehello world ç¨‹åºå’Œè§£é‡Š\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eshell ç¨‹åºçš„ç¬¬ä¸€è¡Œä¸€èˆ¬éƒ½æ˜¯ä»¥\u003ccode\u003e#!/bin/sh\u003c/code\u003eå¼€å§‹ï¼Œè¿™è¡Œè¯çš„æ„æ€å°±æ˜¯æŒ‡å®š shell ç¨‹åºæ‰§è¡Œæ—¶è¢«å“ªä¸ªè§£é‡Šå™¨è§£é‡Šæ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå†™ä¸Š\u003ccode\u003e/bin/sh\u003c/code\u003eæ„æ€å°±æ˜¯è¿™ä¸ª\u003ccode\u003eshell\u003c/code\u003eå°†æ¥è¢«å½“å‰æœºå™¨ä¸­\u003ccode\u003e/bin\u003c/code\u003eç›®å½•ä¸‹çš„\u003ccode\u003esh\u003c/code\u003eå¯æ‰§è¡Œç¨‹åºæ‰§è¡Œã€‚å¯ä»¥å°†ç¬¬ä¸€è¡Œå†™ä¸º\u003ccode\u003e#!/bin/bash\u003c/code\u003eæ¥æŒ‡å®šä½¿ç”¨\u003ccode\u003ebash\u003c/code\u003eæ‰§è¡Œè¯¥è„šæœ¬ã€‚\u003c/li\u003e\n\u003cli\u003eè„šæœ¬ä¸­çš„æ³¨é‡Šä½¿ç”¨\u003ccode\u003e#\u003c/code\u003eï¼Œ\u003ccode\u003e#\u003c/code\u003eå¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šè¡Œã€‚å¦‚æœæœ‰å¤šè¡Œéœ€è¦æ³¨é‡Šï¼Œæ¯è¡Œå‰é¢éƒ½è¦åŠ \u003ccode\u003e#\u003c/code\u003eã€‚ï¼ˆ\u003ccode\u003e#\u003c/code\u003eå°±ç›¸å½“äºæ˜¯ C è¯­è¨€ä¸­çš„\u003ccode\u003e//\u003c/code\u003eï¼‰;\u003c/li\u003e\n\u003cli\u003eshell ç¨‹åºçš„æ­£æ–‡ï¼Œç”±å¾ˆå¤šè¡Œ shell è¯­å¥æ„æˆã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"shell-è¯­æ³•\"\u003eshell è¯­æ³•\u003c/h2\u003e\n\u003cp\u003eshell å°±æ˜¯æŠŠä»¥å‰å‘½ä»¤è¡Œä¸­é”®å…¥æ‰§è¡Œçš„å‘½ä»¤å†™æˆäº†ç¨‹åºã€‚shell å…¶å®å°±æ˜¯ä¸ºäº†é¿å…åå¤çš„åœ¨å‘½ä»¤è¡Œä¸‹æ‰‹å·¥è¾“å…¥è€Œå‘æ˜çš„ä¸€ç§æŠŠæ‰‹å·¥è¾“å…¥æ­¥éª¤è®°å½•ä¸‹æ¥ï¼Œç„¶åé€šè¿‡æ‰§è¡Œ shell è„šæœ¬ç¨‹åºå°±èƒ½å†æ¬¡å¤è¿°åŸæ¥è®°å½•çš„æ‰‹å·¥è¾“å…¥è¿‡ç¨‹çš„ä¸€ç§æŠ€æœ¯ã€‚\u003c/p\u003e","title":"åµŒå…¥å¼ Shell åŸºç¡€"},{"content":"ä½¿ç”¨èƒŒæ™¯ chattrå‘½ä»¤å¯ä»¥ä¿®æ”¹ Linux çš„æ–‡ä»¶å±æ€§ï¼Œåœ¨ç±» Unix ç­‰å‘è¡Œç‰ˆä¸­ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿæœ‰æ•ˆé˜²æ­¢æ–‡ä»¶å’Œç›®å½•è¢«æ„å¤–çš„åˆ é™¤æˆ–ä¿®æ”¹ã€‚æ–‡ä»¶åœ¨ Linux ä¸­è¢«æè¿°ä¸ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œchattr å‘½ä»¤åœ¨å¤§å¤šæ•°ç°ä»£ Linux æ“ä½œç³»ç»Ÿä¸­æ˜¯å¯ç”¨çš„ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶å±æ€§ï¼Œä¸€æ—¦å®šä¹‰æ–‡ä»¶çš„éšè—å±æ€§ï¼Œé‚£ä¹ˆè¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œ root ç”¨æˆ·ä¹Ÿæ— æƒæ“ä½œè¯¥æ–‡ä»¶ï¼Œåªèƒ½è§£é™¤æ–‡ä»¶çš„éšè—å±æ€§ã€‚è¿™å°±å¯ä»¥æœ‰æ•ˆçš„é¿å…è¢«è¯¯åˆ é™¤ã€‚\nå‘½ä»¤æ ¼å¼ ä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤ä¸€èˆ¬ç”±å‘½ä»¤ (chattr)ï¼Œå¯é€‰é¡¹ (option)ï¼Œæ“ä½œç¬¦ (operator) ä¸å±æ€§ (attribute) ç»„æˆï¼š\nchattr [option] [operator] [attribute] file [option] å¯é€‰é¡¹ï¼š\n-Rï¼Œ é€’å½’æ›´æ”¹ç›®å½•åŠå…¶å†…å®¹çš„å±æ€§ã€‚ -Vï¼Œ è¯¦ç»†è¯´æ˜chattrçš„è¾“å‡ºå¹¶æ‰“å°ç¨‹åºç‰ˆæœ¬ã€‚ -fï¼Œ éšè—å¤§å¤šæ•°é”™è¯¯æ¶ˆæ¯ã€‚ [operator] æ“ä½œç¬¦ï¼š\n+ï¼Œè¿½åŠ æŒ‡å®šå±æ€§åˆ°æ–‡ä»¶å·²å­˜åœ¨å±æ€§ä¸­ -ï¼Œ åˆ é™¤æŒ‡å®šå±æ€§ =ï¼Œç›´æ¥è®¾ç½®æ–‡ä»¶å±æ€§ä¸ºæŒ‡å®šå±æ€§ [attribute] å±æ€§å¦‚ä¸‹ï¼š\naï¼Œ åªèƒ½å‘æ–‡ä»¶ä¸­æ·»åŠ æ•°æ® Aï¼Œä¸æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•çš„æœ€åè®¿é—®æ—¶é—´ iï¼Œ æ–‡ä»¶æˆ–ç›®å½•ä¸å¯æ”¹å˜ ä½¿ç”¨å®ä¾‹ lsattr å‘½ä»¤æ£€æŸ¥æ–‡ä»¶å·²æœ‰å±æ€§ -dï¼šå¦‚æœç›®æ ‡æ˜¯ç›®å½•ï¼Œåªä¼šåˆ—å‡ºç›®å½•æœ¬èº«çš„éšè—å±æ€§ï¼Œè€Œä¸ä¼šåˆ—å‡ºæ‰€å«æ–‡ä»¶æˆ–å­ç›®å½•çš„éšè—å±æ€§ä¿¡æ¯ -Rï¼šä½œç”¨äºç›®å½•æ—¶ï¼Œä¼šæ˜¾ç¤ºæ‰€æœ‰çš„å­ç›®å½•å’Œæ–‡ä»¶çš„éšè—ä¿¡æ¯ $ lsattr clash --------------e------- clash/glados.yaml --------------e------- clash/clash-linux-386-v1.10.0 --------------e------- clash/Country.mmdb --------------e------- clash/cache.db --------------e------- clash/clash-linux-amd64-v1.10.0 --------------e------- clash/dashboard $ lsattr -d clash --------------e------- clash $ lsattr -R clash --------------e------- clash/glados.yaml --------------e------- clash/clash-linux-386-v1.10.0 --------------e------- clash/Country.mmdb --------------e------- clash/cache.db --------------e------- clash/clash-linux-amd64-v1.10.0 --------------e------- clash/dashboard clash/dashboard: --------------e------- clash/dashboard/manifest.webmanifest --------------e------- clash/dashboard/assets clash/dashboard/assets: --------------e------- clash/dashboard/assets/logo.b453e72f.png --------------e------- clash/dashboard/assets/index.408383.js --------------e------- clash/dashboard/assets/index.966f8a.css --------------e------- clash/dashboard/assets/vendor.ca5569.js --------------e------- clash/dashboard/sw.js --------------e------- clash/dashboard/workbox-7ce28d.js --------------e------- clash/dashboard/index.html ç¦æ­¢å¯¹æ–‡ä»¶test.mdé‡å‘½åï¼Œç§»åŠ¨æˆ–åˆ é™¤ï¼Œä¹Ÿä¸èƒ½ä¿®æ”¹å…¶å†…å®¹ sudo chattr +i test.md å°è¯•ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œå°†ä¼šè¢«æ‹’ç»ï¼š\n$ rm -f ./test.md rm: cannot remove \u0026#39;./test.md\u0026#39;: Operation not permitted $ echo \u0026#39;Hello World!\u0026#39; \u0026gt; test.md bash: ./test.md: Operation not permitted $ mv ./test.md ./fileDir mv: cannot move \u0026#39;./test.md\u0026#39; to \u0026#39;./fileDir/test.md\u0026#39;: Operation not permitted ç¦æ­¢ä¿®æ”¹æ–‡ä»¶å¤¹fileDiråŠæ–‡ä»¶å¤¹ä¸­çš„æ•°æ® mkdir ./fileDir \u0026amp;\u0026amp; touch ./fileDir/test.md sudo chattr +i -R ./fileDir å°è¯•ä¿®æ”¹æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼š\n$ rm -rf ./fileDir rm: cannot remove \u0026#39;./fileDir/test.md\u0026#39;: Operation not permitted å…è®¸å‘æ–‡ä»¶æ·»åŠ å†…å®¹ï¼Œç¦æ­¢ä¿®æ”¹æˆ–åˆ é™¤å†…å®¹ï¼Œç¦æ­¢ç§»åŠ¨æ–‡ä»¶ $ sudo chattr +a ./test.md $ lsattr ./test.md -----a--------e--- ./test.md $ echo \u0026#34;Hello World!\u0026#34; \u0026gt;\u0026gt; ./test.md # è¿½åŠ å†…å®¹ OK $ echo \u0026#34;hello\u0026#34;\u0026gt; ./test.md # ä¿®æ”¹å†…å®¹ NO bash: ./test.md: Operation not permitted åªå…è®¸åœ¨ç›®å½•fileDirä¸­å»ºç«‹å’Œä¿®æ”¹æ–‡ä»¶ï¼Œä½†æ˜¯ç¦æ­¢åˆ é™¤ã€ç§»åŠ¨æ–‡ä»¶ sudo chattr +a ./fileDir å–æ¶ˆæŸä¸ªå±æ€§ ä½¿ç”¨-æ“ä½œç¬¦å³å¯ï¼š\n# å…ˆç»™æ–‡ä»¶æ·»åŠ å±æ€§a $ sudo chattr +a ./test.md $ lsattr ./test.md -----a--------e--- ./test.md # å–æ¶ˆå±æ€§a $ sudo chattr -a ./test.md $ lsattr ./test.md --------------e--- ./test.md ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-chattr%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E5%B1%9E%E6%80%A7%E9%98%B2%E6%AD%A2%E8%AF%AF%E5%88%A0%E9%99%A4/","summary":"\u003ch2 id=\"ä½¿ç”¨èƒŒæ™¯\"\u003eä½¿ç”¨èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003echattr\u003c/code\u003eå‘½ä»¤å¯ä»¥ä¿®æ”¹ Linux çš„æ–‡ä»¶å±æ€§ï¼Œåœ¨ç±» Unix ç­‰å‘è¡Œç‰ˆä¸­ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿæœ‰æ•ˆé˜²æ­¢æ–‡ä»¶å’Œç›®å½•è¢«æ„å¤–çš„åˆ é™¤æˆ–ä¿®æ”¹ã€‚æ–‡ä»¶åœ¨ Linux ä¸­è¢«æè¿°ä¸ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œ\u003ccode\u003echattr\u003c/code\u003e å‘½ä»¤åœ¨å¤§å¤šæ•°ç°ä»£ Linux æ“ä½œç³»ç»Ÿä¸­æ˜¯å¯ç”¨çš„ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶å±æ€§ï¼Œä¸€æ—¦å®šä¹‰æ–‡ä»¶çš„éšè—å±æ€§ï¼Œé‚£ä¹ˆ\u003cstrong\u003eè¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œ root ç”¨æˆ·ä¹Ÿæ— æƒæ“ä½œè¯¥æ–‡ä»¶\u003c/strong\u003eï¼Œåªèƒ½è§£é™¤æ–‡ä»¶çš„éšè—å±æ€§ã€‚è¿™å°±å¯ä»¥æœ‰æ•ˆçš„é¿å…è¢«è¯¯åˆ é™¤ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-chattr ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•å±æ€§é˜²æ­¢è¯¯åˆ é™¤"},{"content":"ä½¿ç”¨ Pandoc å°†test.mdè½¬æ¢ä½ PDF æ—¶ï¼Œå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š\n! Undefined control sequence. \u0026lt;recently read\u0026gt; \\tightlist l.213 \\end{frame} pandoc: Error producing PDF from TeX source make: *** [test.pdf] Error 43 è¿™æ˜¯å› ä¸ºåœ¨ Markdown æ–‡ä»¶ä¸­ä½¿ç”¨-è¡¨ç¤ºæ— åºåˆ—è¡¨ï¼Œè¢«è½¬åŒ–æˆäº†\\tightlistä½†æ˜¯ Pandoc ç‰ˆæœ¬å¤ªè€ï¼Œä¸æ”¯æŒè¿™ä¸ªå‘½ä»¤ã€‚ï¼ˆä¸¥æ ¼æ¥è¯´æ˜¯ Pandoc æ²¡æœ‰å¤„ç†è¿™ä¸ª LaTeX å‘½ä»¤ï¼Œä¸æ˜¯ä¸æ”¯æŒï¼Œå› ä¸ºè¿™æ˜¯ LaTeX å‘½ä»¤å’Œ Pandoc æ²¡å…³ç³»ï¼‰ã€‚\næœ‰ä¸¤ç§æ–¹å¼è§£å†³ï¼Œä¸€æ˜¯å‡çº§ Pandoc ç‰ˆæœ¬ï¼ŒäºŒæ˜¯å°†å¤„ç†\\tightlistçš„å‘½ä»¤åŠ åˆ°è‡ªå·±ä½¿ç”¨çš„æ¨¡æ¿ä¸­ã€‚\n\\providecommand{\\tightlist}{% \\setlength{\\itemsep}{0pt}\\setlength{\\parskip}{0pt}} æˆ–è€…\n\\def\\tightlist{} ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3pandoc%E5%B0%86md%E8%BD%AC%E6%8D%A2%E4%B8%BApdf%E6%97%B6%E6%8A%A5%E9%94%99-error-tightlist/","summary":"\u003cp\u003eä½¿ç”¨ Pandoc å°†\u003ccode\u003etest.md\u003c/code\u003eè½¬æ¢ä½ PDF æ—¶ï¼Œå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e! Undefined control sequence.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;recently read\u0026gt; \u003cspan class=\"se\"\u003e\\t\u003c/span\u003eightlist \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003el.213 \u003cspan class=\"se\"\u003e\\e\u003c/span\u003end\u003cspan class=\"o\"\u003e{\u003c/span\u003eframe\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003epandoc: Error producing PDF from TeX \u003cspan class=\"nb\"\u003esource\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emake: *** \u003cspan class=\"o\"\u003e[\u003c/span\u003etest.pdf\u003cspan class=\"o\"\u003e]\u003c/span\u003e Error \u003cspan class=\"m\"\u003e43\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™æ˜¯å› ä¸ºåœ¨ Markdown æ–‡ä»¶ä¸­ä½¿ç”¨\u003ccode\u003e-\u003c/code\u003eè¡¨ç¤ºæ— åºåˆ—è¡¨ï¼Œè¢«è½¬åŒ–æˆäº†\u003ccode\u003e\\tightlist\u003c/code\u003eä½†æ˜¯ Pandoc ç‰ˆæœ¬å¤ªè€ï¼Œä¸æ”¯æŒè¿™ä¸ªå‘½ä»¤ã€‚ï¼ˆä¸¥æ ¼æ¥è¯´æ˜¯ Pandoc æ²¡æœ‰å¤„ç†è¿™ä¸ª LaTeX å‘½ä»¤ï¼Œä¸æ˜¯ä¸æ”¯æŒï¼Œå› ä¸ºè¿™æ˜¯ LaTeX å‘½ä»¤å’Œ Pandoc æ²¡å…³ç³»ï¼‰ã€‚\u003c/p\u003e","title":"è§£å†³ Pandoc å°† MD è½¬æ¢ä¸º PDF æ—¶æŠ¥é”™ (error)\\tightlist"},{"content":"Markdown ç®€ä»‹ Markdown æ˜¯ä»€ä¹ˆï¼Ÿ Markdownæ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒä»¥çº¯æ–‡æœ¬å½¢å¼ (æ˜“è¯»ã€æ˜“å†™ã€æ˜“æ›´æ”¹) ç¼–å†™æ–‡æ¡£ï¼Œå¹¶æœ€ç»ˆä»¥ HTML æ ¼å¼å‘å¸ƒã€‚\nMarkdownä¹Ÿå¯ä»¥ç†è§£ä¸ºå°†ä»¥ Markdown è¯­æ³•ç¼–å†™çš„è¯­è¨€è½¬æ¢æˆ HTML å†…å®¹çš„å·¥å…·ã€‚\nè°åˆ›é€ äº†å®ƒï¼Ÿ å®ƒç”±Aaron Swartzå’ŒJohnå…±åŒè®¾è®¡ï¼ŒAaron Swartzå°±æ˜¯é‚£ä½äºå»å¹´ï¼ˆ2013 å¹´ 1 æœˆ 11 æ—¥ï¼‰è‡ªæ€ï¼Œæœ‰ç€å¼€æŒ‚ä¸€èˆ¬äººç”Ÿç»å†çš„ç¨‹åºå‘˜ã€‚ç»´åŸºç™¾ç§‘å¯¹ä»–çš„ä»‹ç»æ˜¯ï¼šè½¯ä»¶å·¥ç¨‹å¸ˆã€ä½œå®¶ã€æ”¿æ²»ç»„ç»‡è€…ã€äº’è”ç½‘æ´»åŠ¨å®¶ã€ç»´åŸºç™¾ç§‘äººã€‚\n14 å²å‚ä¸ RSS 1.0 è§„æ ¼æ ‡å‡†çš„åˆ¶è®¢ã€‚ 2004å¹´å…¥è¯»æ–¯å¦ç¦ï¼Œä¹‹åé€€å­¦ã€‚ 2005å¹´åˆ›å»ºInfogamiï¼Œä¹‹åä¸Redditåˆå¹¶æˆä¸ºå…¶åˆä¼™äººã€‚ 2010å¹´åˆ›ç«‹æ±‚è¿›ä¼šï¼ˆDemand Progressï¼‰ï¼Œç§¯æå‚ä¸ç¦æ­¢ç½‘ç»œç›—ç‰ˆæ³•æ¡ˆï¼ˆSOPAï¼‰æ´»åŠ¨ï¼Œæœ€ç»ˆè¯¥ææ¡ˆè¢«æ’¤å›ã€‚ 2011å¹´ 7 æœˆ 19 æ—¥ï¼Œå› è¢«æ§ä» MIT å’Œ JSTOR ä¸‹è½½ 480 ä¸‡ç¯‡å­¦æœ¯è®ºæ–‡å¹¶ä»¥å…è´¹å½¢å¼ä¸Šä¼ äºç½‘ç»œè¢«æ•ã€‚ 2013å¹´ 1 æœˆè‡ªæ€èº«äº¡ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ å®ƒæ˜¯æ˜“è¯»ï¼ˆçœ‹èµ·æ¥èˆ’æœï¼‰ã€æ˜“å†™ï¼ˆè¯­æ³•ç®€å•ï¼‰ã€æ˜“æ›´æ”¹çº¯æ–‡æœ¬ã€‚å¤„å¤„ä½“ç°ç€æç®€ä¸»ä¹‰çš„å½±å­ã€‚ å…¼å®¹ HTMLï¼Œå¯ä»¥è½¬æ¢ä¸º HTML æ ¼å¼å‘å¸ƒã€‚ è·¨å¹³å°ä½¿ç”¨ã€‚ è¶Šæ¥è¶Šå¤šçš„ç½‘ç«™æ”¯æŒ Markdownã€‚ æ›´æ–¹ä¾¿æ¸…æ™°åœ°ç»„ç»‡ä½ çš„ç”µå­é‚®ä»¶ã€‚ï¼ˆMarkdown-here, Airmailï¼‰ æ‘†è„± Word æ€ä¹ˆä½¿ç”¨ï¼Ÿ å¦‚æœä¸ç®—æ‰©å±•ï¼ŒMarkdown çš„è¯­æ³•ç»å¯¹ç®€å•åˆ°è®©ä½ çˆ±ä¸é‡Šæ‰‹ã€‚\nMarkdown è¯­æ³•ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ å¤§éƒ¨åˆ†ï¼š\næ ‡é¢˜ï¼Œæ®µè½ï¼ŒåŒºå—å¼•ç”¨ï¼Œä»£ç åŒºå—ï¼Œå¼ºè°ƒï¼Œåˆ—è¡¨ï¼Œåˆ†å‰²çº¿ï¼Œé“¾æ¥ï¼Œå›¾ç‰‡ï¼Œåæ–œæ  \\ï¼Œç¬¦å·\u0026rsquo;`\u0026rsquo;ã€‚\nè°åœ¨ç”¨ï¼Ÿ Markdown çš„ä½¿ç”¨è€…ï¼š\nGitHub ç®€ä¹¦ Stack Overflow Apollo Moodle Reddit ç­‰ç­‰ è¯­æ³•ä»‹ç» æ ‡é¢˜ ä¸¤ç§å½¢å¼ï¼š\nä½¿ç”¨=å’Œ-æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜ã€‚\nä¸€çº§æ ‡é¢˜ ========= äºŒçº§æ ‡é¢˜ ---------\nä½¿ç”¨#ï¼Œå¯è¡¨ç¤º 1-6 çº§æ ‡é¢˜ã€‚\n# ä¸€çº§æ ‡é¢˜ ## äºŒçº§æ ‡é¢˜ ### ä¸‰çº§æ ‡é¢˜ #### å››çº§æ ‡é¢˜ ##### äº”çº§æ ‡é¢˜ ###### å…­çº§æ ‡é¢˜\næ®µè½ æ®µè½çš„å‰åè¦æœ‰ç©ºè¡Œï¼Œæ‰€è°“çš„ç©ºè¡Œæ˜¯æŒ‡æ²¡æœ‰æ–‡å­—å†…å®¹ã€‚è‹¥æƒ³åœ¨æ®µå†…å¼ºåˆ¶æ¢è¡Œçš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šç©ºæ ¼åŠ ä¸Šå›è½¦ï¼ˆå¼•ç”¨ä¸­æ¢è¡Œçœç•¥å›è½¦ï¼‰ã€‚\nåŒºå—å¼•ç”¨ åŒºå—å¼•ç”¨éœ€è¦åœ¨è¢«å¼•ç”¨çš„æ–‡æœ¬å‰åŠ ä¸Š \u0026gt; ç¬¦å·ã€‚\n\u0026gt; è¿™æ˜¯ä¸€ä¸ªåŒºå—å¼•ç”¨å®ä¾‹ï¼Œ \u0026gt; Markdown. è¿™æ˜¯ä¸€ä¸ªåŒºå—å¼•ç”¨å®ä¾‹ï¼Œ\nMarkdown.\nMarkdown ä¹Ÿå…è®¸ä½ å·æ‡’åªåœ¨æ•´ä¸ªæ®µè½çš„ç¬¬ä¸€è¡Œæœ€å‰é¢åŠ ä¸Š \u0026gt; :\n\u0026gt; å¹³ç”Ÿä¸ä¼šç›¸æ€ï¼Œ æ‰ä¼šç›¸æ€ï¼Œ ä¾¿å®³ç›¸æ€ã€‚ \u0026gt; ç©ºä¸€ç¼•ä½™é¦™åœ¨æ­¤ï¼Œ ç›¼åƒé‡‘æ¸¸å­ä½•ä¹‹ã€‚ å¹³ç”Ÿä¸ä¼šç›¸æ€ï¼Œ æ‰ä¼šç›¸æ€ï¼Œ ä¾¿å®³ç›¸æ€ã€‚\nç©ºä¸€ç¼•ä½™é¦™åœ¨æ­¤ï¼Œ ç›¼åƒé‡‘æ¸¸å­ä½•ä¹‹ã€‚\nå¼•ç”¨çš„å¤šå±‚åµŒå¥— åŒºå—å¼•ç”¨å¯ä»¥åµŒå¥—ï¼ˆä¾‹å¦‚ï¼šå¼•ç”¨å†…çš„å¼•ç”¨ï¼‰, åªè¦æ ¹æ®å±‚æ¬¡åŠ ä¸Šä¸åŒæ•°é‡çš„ \u0026gt; :\n\u0026gt;\u0026gt;\u0026gt; é”„ç¦¾æ—¥å½“åˆï¼Œæ±—æ»´ç¦¾ä¸‹åœŸã€‚ - æç»… \u0026gt;\u0026gt; å±±æœ‰æœ¨å…®æœ¨æœ‰æï¼Œå¿ƒæ‚¦å›å…®å›ä¸çŸ¥ã€‚ - è¶Šäººæ­Œ \u0026gt; å»å¹´ä»Šæ—¥æ­¤é—¨ä¸­ï¼Œäººé¢æ¡ƒèŠ±ç›¸æ˜ çº¢ã€‚ - å´”æŠ¤ é”„ç¦¾æ—¥å½“åˆï¼Œæ±—æ»´ç¦¾ä¸‹åœŸã€‚ - æç»…\nå±±æœ‰æœ¨å…®æœ¨æœ‰æï¼Œå¿ƒæ‚¦å›å…®å›ä¸çŸ¥ã€‚ - è¶Šäººæ­Œ\nå»å¹´ä»Šæ—¥æ­¤é—¨ä¸­ï¼Œäººé¢æ¡ƒèŠ±ç›¸æ˜ çº¢ã€‚ - é¢˜éƒ½åŸå—åº„\né”šç‚¹ ç½‘é¡µä¸­ï¼Œé”šç‚¹å…¶å®å°±æ˜¯é¡µå†…è¶…é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯é“¾æ¥æœ¬æ–‡æ¡£å†…éƒ¨çš„æŸäº›å…ƒç´ ï¼Œå®ç°å½“å‰é¡µé¢ä¸­çš„è·³è½¬ã€‚æ¯”å¦‚æˆ‘è¿™é‡Œå†™ä¸‹ä¸€ä¸ªé”šç‚¹ï¼Œç‚¹å‡»è·³è½¬åˆ°æŒ‡å®šç« èŠ‚ã€‚\n[ç‚¹å‡»è·³è½¬è‡³åŒºå—å¼•ç”¨](#åŒºå—å¼•ç”¨) ç‚¹å‡»è·³è½¬è‡³åŒºå—å¼•ç”¨\nä»£ç åŒºå— ä»£ç åŒºå—çš„å»ºç«‹æ˜¯åœ¨æ¯è¡ŒåŠ ä¸Š 4 ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼ˆå¦‚åŒå†™ä»£ç ä¸€æ ·ï¼‰ã€‚å¦‚ æ™®é€šæ®µè½ï¼š\nvoid main() { printf(\u0026ldquo;Hello, Markdown.\u0026rdquo;); }\nä»£ç åŒºå—ï¼š\nvoid main() { printf(\u0026quot;Hello, Markdown.\u0026quot;); } æ³¨æ„:éœ€è¦å’Œæ™®é€šæ®µè½ä¹‹é—´å­˜åœ¨ç©ºè¡Œã€‚\nå¼ºè°ƒ Markdown ä½¿ç”¨æ˜Ÿå·*å’Œåº•çº¿_ä½œä¸ºæ ‡è®°å¼ºè°ƒå­—è¯çš„ç¬¦å·ã€‚\næ–œä½“ *èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ* èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ\nç²—ä½“ **èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ** èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ\nåˆ é™¤çº¿ ~~èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ~~ èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ\nåˆ—è¡¨ ä½¿ç”¨Â·ã€+ã€æˆ–-æ ‡è®°æ— åºåˆ—è¡¨ï¼Œå¦‚ï¼š\n-ï¼ˆ+*ï¼‰ç¬¬ä¸€é¡¹ -ï¼ˆ+*ï¼‰ç¬¬äºŒé¡¹ - ï¼ˆ+*ï¼‰ç¬¬ä¸‰é¡¹\næ³¨æ„ï¼šæ ‡è®°åé¢æœ€å°‘æœ‰ä¸€ä¸ª_ç©ºæ ¼_æˆ–_åˆ¶è¡¨ç¬¦_ã€‚è‹¥ä¸åœ¨å¼•ç”¨åŒºå—ä¸­ï¼Œå¿…é¡»å’Œå‰æ–¹æ®µè½ä¹‹é—´å­˜åœ¨ç©ºè¡Œã€‚\næ•ˆæœï¼š\nç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ æœ‰åºåˆ—è¡¨çš„æ ‡è®°æ–¹å¼æ˜¯å°†ä¸Šè¿°çš„ç¬¦å·æ¢æˆæ•°å­—ï¼Œå¹¶è¾…ä»¥.ï¼Œå¦‚ï¼š\n1 . ç¬¬ä¸€é¡¹ 2 . ç¬¬äºŒé¡¹ 3 . ç¬¬ä¸‰é¡¹\næ•ˆæœï¼š\nç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ åˆ†å‰²çº¿ åˆ†å‰²çº¿æœ€å¸¸ä½¿ç”¨å°±æ˜¯ä¸‰ä¸ªæˆ–ä»¥ä¸Š*ï¼Œè¿˜å¯ä»¥ä½¿ç”¨-å’Œ_ã€‚\né“¾æ¥ Markdown æ”¯æŒä¸¤ç§å½¢å¼çš„é“¾æ¥è¯­æ³•ï¼šè¡Œå†…å¼å’Œå‚è€ƒå¼ä¸¤ç§å½¢å¼ï¼Œè¡Œå†…å¼ä¸€èˆ¬ä½¿ç”¨è¾ƒå¤šã€‚\nè¡Œå†…å¼ []é‡Œå†™é“¾æ¥æ–‡å­—ï¼Œ()é‡Œå†™é“¾æ¥åœ°å€ï¼Œ()ä¸­çš„ \u0026quot;\u0026quot; ä¸­å¯ä»¥ä¸ºé“¾æ¥æŒ‡å®š title å±æ€§ï¼Œtitle å±æ€§å¯åŠ å¯ä¸åŠ ã€‚title å±æ€§çš„æ•ˆæœæ˜¯é¼ æ ‡æ‚¬åœåœ¨é“¾æ¥ä¸Šä¼šå‡ºç°æŒ‡å®šçš„ title æ–‡å­—ã€‚[é“¾æ¥æ–‡å­—](é“¾æ¥åœ°å€ \u0026quot;é“¾æ¥æ ‡é¢˜\u0026quot;) è¿™æ ·çš„å½¢å¼ã€‚é“¾æ¥åœ°å€ä¸é“¾æ¥æ ‡é¢˜å‰æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚\n[MPPL: Markdown to PDF with Pandoc via Latex](https://github.com/Dunky-Z/MPPL) [MPPL: Markdown to PDF with Pandoc via Latex](https://github.com/Dunky-Z/MPPL \u0026#34;MPPL\u0026#34;) MPPL: Markdown to PDF with Pandoc via Latex\nMPPL: Markdown to PDF with Pandoc via Latex\nå‚è€ƒå¼ å‚è€ƒå¼è¶…é“¾æ¥ä¸€èˆ¬ç”¨åœ¨å­¦æœ¯è®ºæ–‡ä¸Šé¢ï¼Œæˆ–è€…å¦ä¸€ç§æƒ…å†µï¼Œå¦‚æœæŸä¸€ä¸ªé“¾æ¥åœ¨æ–‡ç« ä¸­å¤šå¤„ä½¿ç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨å¼•ç”¨çš„æ–¹å¼åˆ›å»ºé“¾æ¥å°†éå¸¸å¥½ï¼Œå®ƒå¯ä»¥è®©ä½ å¯¹é“¾æ¥è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ã€‚\nå‚è€ƒå¼é“¾æ¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ–‡ä¸­çš„å†™æ³• [é“¾æ¥æ–‡å­—][é“¾æ¥æ ‡è®°]ï¼Œåœ¨æ–‡æœ¬çš„ä»»æ„ä½ç½®æ·»åŠ  [é“¾æ¥æ ‡è®°]:é“¾æ¥åœ°å€ \u0026quot;é“¾æ¥æ ‡é¢˜\u0026quot;, é“¾æ¥åœ°å€ä¸é“¾æ¥æ ‡é¢˜å‰æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚\nå…¨çƒæœ€å¤§çš„æœç´¢å¼•æ“ç½‘ç«™æ˜¯ [Google][1]ã€‚ [1]:http://www.google.com \u0026#34;Google\u0026#34; å…¨çƒæœ€å¤§çš„æœç´¢å¼•æ“ç½‘ç«™æ˜¯ Googleã€‚ å›¾ç‰‡ å›¾ç‰‡çš„åˆ›å»ºæ–¹å¼ä¸è¶…é“¾æ¥ç›¸ä¼¼ï¼Œè€Œä¸”å’Œè¶…é“¾æ¥ä¸€æ ·ä¹Ÿæœ‰ä¸¤ç§å†™æ³•ï¼Œè¡Œå†…å¼å’Œå‚è€ƒå¼å†™æ³•ã€‚\nè¯­æ³•ä¸­å›¾ç‰‡ Alt çš„æ„æ€æ˜¯å¦‚æœå›¾ç‰‡å› ä¸ºæŸäº›åŸå› ä¸èƒ½æ˜¾ç¤ºï¼Œå°±ç”¨å®šä¹‰çš„å›¾ç‰‡ Alt æ–‡å­—æ¥ä»£æ›¿å›¾ç‰‡ã€‚å›¾ç‰‡ Title åˆ™å’Œé“¾æ¥ä¸­çš„ Title ä¸€æ ·ï¼Œè¡¨ç¤ºé¼ æ ‡æ‚¬åœä¸å›¾ç‰‡ä¸Šæ—¶å‡ºç°çš„æ–‡å­—ã€‚Alt å’Œ Title éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥çœç•¥ï¼Œä½†å»ºè®®å†™ä¸Šã€‚\nå›¾ç‰‡è¡Œå†…å¼ ![å›¾ç‰‡ Alt](å›¾ç‰‡åœ°å€ \u0026quot;å›¾ç‰‡Title\u0026quot;)\n![](https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Markdown-mark.svg/2880px-Markdown-mark.svg.png) \u003c!DOCTYPE html\u003e Responsive Image å›¾ç‰‡å‚è€ƒå¼ åœ¨æ–‡æ¡£è¦æ’å…¥å›¾ç‰‡çš„åœ°æ–¹å†™ ![å›¾ç‰‡ Alt][æ ‡è®°]ã€‚\nåœ¨æ–‡æ¡£çš„æœ€åå†™ä¸Š [æ ‡è®°]:å›¾ç‰‡åœ°å€ \u0026quot;Title\u0026quot;ã€‚\n![MarkdownLogo][MarkdownLogo] [MarkdownLogo]:../img/Markdown-mark.png \u0026#34;MarkdownLogo\u0026#34; åæ–œæ \\ ç›¸å½“äºåè½¬ä¹‰ä½œç”¨ã€‚ä½¿ç¬¦å·æˆä¸ºæ™®é€šç¬¦å·ã€‚\nä»£ç  å¯¹äºç¨‹åºå‘˜æ¥è¯´è¿™ä¸ªåŠŸèƒ½æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œæ’å…¥ç¨‹åºä»£ç çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åˆ©ç”¨ç¼©è¿› (Tab), å¦ä¸€ç§æ˜¯åˆ©ç”¨ \u0026ldquo;`\u0026rdquo; ç¬¦å· (ä¸€èˆ¬åœ¨ ESC é”®ä¸‹æ–¹) åŒ…è£¹ä»£ç ã€‚\næ’å…¥è¡Œå†…ä»£ç ï¼Œå³æ’å…¥ä¸€ä¸ªå•è¯æˆ–è€…ä¸€å¥ä»£ç çš„æƒ…å†µï¼Œä½¿ç”¨ `code` è¿™æ ·çš„å½¢å¼æ’å…¥ã€‚ æ’å…¥å¤šè¡Œä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ç¼©è¿›æˆ–è€… ``` code ```, å…·ä½“çœ‹ç¤ºä¾‹ã€‚ ä»£ç è¡Œå†…å¼ PHP æ‰“å°å †æ ˆä¿¡æ¯ `debug_backtrace()`ã€‚ PHP æ‰“å°å †æ ˆä¿¡æ¯ debug_backtrace()ã€‚\nç¼©è¿›å¼å¤šè¡Œä»£ç  ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦ã€‚\nä¸€ä¸ªä»£ç åŒºå—ä¼šä¸€ç›´æŒç»­åˆ°æ²¡æœ‰ç¼©è¿›çš„é‚£ä¸€è¡Œ (æˆ–æ˜¯æ–‡ä»¶ç»“å°¾)ã€‚\n$closure = function () use($name) { return $name; } $closure = function () use($name) { return $name; } ç”¨å…­ä¸ª ` åŒ…è£¹å¤šè¡Œä»£ç  \u0026gt; ```c # ä¸ºäº†èƒ½å¤Ÿåœ¨ Markdown é‡Œæ¼”ç¤ºï¼Œæ‰€ä»¥åŠ äº†\u0026gt;ç¬¦å· #include \u0026lt;stdio.h\u0026gt; int main() { printf(\u0026#34;Hello, World!\\n\u0026#34;); return 0; } \u0026gt; ``` #include \u0026lt;stdio.h\u0026gt; int main() { printf(\u0026#34;Hello, World!\\n\u0026#34;); return 0; } å†…å®¹ç›®å½• åœ¨æ®µè½ä¸­å¡«å†™ [TOC] ä»¥æ˜¾ç¤ºå…¨æ–‡å†…å®¹çš„ç›®å½•ç»“æ„ã€‚\nè¡¨æ ¼ ä¸ç®¡æ˜¯å“ªç§æ–¹å¼, ç¬¬ä¸€è¡Œä¸ºè¡¨å¤´, ç¬¬äºŒè¡Œåˆ†éš”è¡¨å¤´å’Œä¸»ä½“éƒ¨åˆ†, ç¬¬ä¸‰è¡Œå¼€å§‹æ¯ä¸€è¡Œä¸ºä¸€ä¸ªè¡¨æ ¼è¡Œã€‚ åˆ—äºåˆ—ä¹‹é—´ç”¨ç®¡é“ç¬¦|éš”å¼€ã€‚åŸç”Ÿæ–¹å¼çš„è¡¨æ ¼æ¯ä¸€è¡Œçš„ä¸¤è¾¹ä¹Ÿè¦æœ‰ç®¡é“ç¬¦ã€‚ ç¬¬äºŒè¡Œè¿˜å¯ä»¥ä¸ºä¸åŒçš„åˆ—æŒ‡å®šå¯¹é½æ–¹å‘ã€‚é»˜è®¤ä¸ºå·¦å¯¹é½, åœ¨-å³è¾¹åŠ ä¸Š:å°±å³å¯¹é½ã€‚ ç®€å•æ–¹å¼:\nè¯—å|ä½œè€…|æœä»£ -|-|- ç™½å¤´åŸ|å“æ–‡å›|ä¸¤æ±‰ é”¦ç‘Ÿ|æå•†éš|å”ä»£ ç™»ç§‘å|å­ŸéƒŠ|å”ä»£ è¯—å ä½œè€… æœä»£ ç™½å¤´åŸ å“æ–‡å› ä¸¤æ±‰ é”¦ç‘Ÿ æå•†éš å”ä»£ ç™»ç§‘å å­ŸéƒŠ å”ä»£ åŸç”Ÿæ–¹å¼:\n|è¯—å|ä½œè€…|æœä»£| |-|-|-| |ç™½å¤´åŸ|å“æ–‡å›|ä¸¤æ±‰| |é”¦ç‘Ÿ|æå•†éš|å”ä»£| |ç™»ç§‘å|å­ŸéƒŠ|å”ä»£| è¯—å ä½œè€… æœä»£ ç™½å¤´åŸ å“æ–‡å› ä¸¤æ±‰ é”¦ç‘Ÿ æå•†éš å”ä»£ ç™»ç§‘å å­ŸéƒŠ å”ä»£ ä¸ºè¡¨æ ¼ç¬¬äºŒåˆ—æŒ‡å®šæ–¹å‘:\nè¯—å|åå¥ -|-: æ¢¦å¾®ä¹‹|å›åŸ‹æ³‰ä¸‹æ³¥é”€éª¨ã€‚ ä¸Šé‚ª|ä¸Šé‚ªï¼Œæˆ‘æ¬²ä¸å›ç›¸çŸ¥ï¼Œé•¿å‘½æ— ç»è¡°ã€‚ è¯—å åå¥ æ¢¦å¾®ä¹‹ å›åŸ‹æ³‰ä¸‹æ³¥é”€éª¨ã€‚ ä¸Šé‚ª ä¸Šé‚ªï¼Œæˆ‘æ¬²ä¸å›ç›¸çŸ¥ï¼Œé•¿å‘½æ— ç»è¡°ã€‚ æ³¨è„š åœ¨éœ€è¦æ·»åŠ æ³¨è„šçš„æ–‡å­—ååŠ ä¸Šè„šæ³¨åå­—[^æ³¨è„šåå­—], ç§°ä¸ºåŠ æ³¨ã€‚ ç„¶ååœ¨æ–‡æœ¬çš„ä»»æ„ä½ç½®(ä¸€èˆ¬åœ¨æœ€å)æ·»åŠ è„šæ³¨, è„šæ³¨å‰å¿…é¡»æœ‰å¯¹åº”çš„è„šæ³¨åå­—ã€‚\nä½¿ç”¨ Markdown[^1] å¯ä»¥æ•ˆç‡çš„ä¹¦å†™æ–‡æ¡£ï¼Œç›´æ¥è½¬æ¢æˆ HTML[^2]ã€‚ [^1]: Markdown æ˜¯ä¸€ç§çº¯æ–‡æœ¬æ ‡è®°è¯­è¨€ [^2]: HyperText Markup Language è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ LaTeX å…¬å¼ $ è¡¨ç¤ºè¡Œå†…å…¬å¼ è´¨èƒ½å®ˆæ’æ–¹ç¨‹å¯ä»¥ç”¨ä¸€ä¸ªå¾ˆç®€æ´çš„æ–¹ç¨‹å¼ $E=mc^2$ æ¥è¡¨è¾¾ã€‚ è´¨èƒ½å®ˆæ’æ–¹ç¨‹å¯ä»¥ç”¨ä¸€ä¸ªå¾ˆç®€æ´çš„æ–¹ç¨‹å¼$E=mc^2$æ¥è¡¨è¾¾ã€‚\n$$ è¡¨ç¤ºæ•´è¡Œå…¬å¼ $$\\sum_{i=1}^n a_i=0$$ $$f(x_1,x_x,\\ldots,x_n) = x_1^2 + x_2^2 + \\cdots + x_n^2 $$ $$\\sum^{j-1}_{k=0}{\\widehat{\\gamma}_{kj} z_k}$$ $$\\sum_{i=1}^n a_i=0$$\nå°è¯•ä¸€ä¸‹ Chromeä¸‹çš„æ’ä»¶è¯¸å¦‚stackeditä¸markdown-hereç­‰éå¸¸æ–¹ä¾¿ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå¹³å°å—é™ã€‚ åœ¨çº¿çš„Cmd Markdown ç¼–è¾‘é˜…è¯»å™¨ - ä½œä¸šéƒ¨è½å‡ºå“ã€‚ Windownsä¸‹çš„Typora â€” a markdown editor, markdown readerã€‚ Macä¸‹çš„ Mou æ˜¯å›½äººè´¡çŒ®çš„ï¼Œå£ç¢‘å¾ˆå¥½ã€‚ Linuxä¸‹çš„ ReText ä¸é”™ã€‚ å½“ç„¶ï¼Œæœ€ç»ˆå¢ƒç•Œæ°¸è¿œéƒ½æ˜¯ç¬”ä¸‹æ˜¯è¯­æ³•ï¼Œå¿ƒä¸­æ ¼å¼åŒ–ã€‚\næ³¨æ„ï¼šä¸åŒçš„ Markdown è§£é‡Šå™¨æˆ–å·¥å…·å¯¹ç›¸åº”è¯­æ³•ï¼ˆæ‰©å±•è¯­æ³•ï¼‰çš„è§£é‡Šæ•ˆæœä¸å°½ç›¸åŒï¼Œå…·ä½“å¯å‚è§å·¥å…·çš„ä½¿ç”¨è¯´æ˜ã€‚ è™½ç„¶æœ‰äººæƒ³å‡ºé¢æä¸€ä¸ªæ‰€è°“çš„æ ‡å‡†åŒ–çš„ Markdownï¼Œæ²¡æƒ³åˆ°è¿˜æƒ¹æ€’äº†å¥åœ¨çš„åˆ›å§‹äºº John Gruberã€‚\nä»¥ä¸ŠåŸºæœ¬æ˜¯æ‰€æœ‰ traditonal Markdown çš„è¯­æ³•ã€‚\nå…³äºå…¶å®ƒæ‰©å±•è¯­æ³•å¯å‚è§å…·ä½“å·¥å…·çš„ä½¿ç”¨è¯´æ˜ã€‚\nå‚è€ƒèµ„æ–™ Markdown åŸºæœ¬è¯­æ³•ã€‚ cdoco/markdown-syntax: Markdown è¯­æ³•è¯¦è§£ã€‚ ","permalink":"https://lifeislife.cn/posts/markdown%E8%AF%AD%E6%B3%95%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/","summary":"\u003ch1 id=\"markdown-ç®€ä»‹\"\u003eMarkdown ç®€ä»‹\u003c/h1\u003e\n\u003ch2 id=\"markdown-æ˜¯ä»€ä¹ˆ\"\u003eMarkdown æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eMarkdown\u003c/strong\u003eæ˜¯ä¸€ç§è½»é‡çº§\u003cstrong\u003eæ ‡è®°è¯­è¨€\u003c/strong\u003eï¼Œå®ƒä»¥çº¯æ–‡æœ¬å½¢å¼ (\u003cem\u003eæ˜“è¯»ã€æ˜“å†™ã€æ˜“æ›´æ”¹\u003c/em\u003e) ç¼–å†™æ–‡æ¡£ï¼Œå¹¶æœ€ç»ˆä»¥ HTML æ ¼å¼å‘å¸ƒã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eMarkdown\u003c/strong\u003eä¹Ÿå¯ä»¥ç†è§£ä¸ºå°†ä»¥ Markdown è¯­æ³•ç¼–å†™çš„è¯­è¨€è½¬æ¢æˆ HTML å†…å®¹çš„å·¥å…·ã€‚\u003c/p\u003e","title":"Markdown è¯­æ³•ç®€æ˜æ•™ç¨‹"},{"content":"éœ€æ±‚èƒŒæ™¯ Markdown ä¸­çš„è¡¨æ ¼ï¼Œåªè¦ç¬¦åˆè¯­æ³•å°±èƒ½å¤Ÿæ­£å¸¸æ¸²æŸ“æ˜¾ç¤ºï¼Œä½†æ˜¯ç¬¦åˆè¯­æ³•ä½†æ˜¯ Markdown æºç å´ä¸ä¸€å®šæ˜“è¯»ã€‚å°±å¦‚ä»¥ä¸‹çš„è¿™ä¸ªè¡¨æ ¼ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œä½†æ˜¯æºç åœ¨æºæ–‡ä»¶ä¸­ç«–çº¿ä¸å¯¹é½ï¼Œå°±é˜…è¯»å›°éš¾ã€‚\næºç ï¼š\n|è¯—å|ä½œè€…|æœä»£| |-|-|-| |ç™½å¤´åŸ|å“æ–‡å›|ä¸¤æ±‰| |é”¦ç‘Ÿ|æå•†éš|å”ä»£| |ç™»ç§‘å|å­ŸéƒŠ|å”ä»£| æ˜¾ç¤ºæ•ˆæœï¼š\nè¯—å ä½œè€… æœä»£ ç™½å¤´åŸ å“æ–‡å› ä¸¤æ±‰ é”¦ç‘Ÿ æå•†éš å”ä»£ ç™»ç§‘å å­ŸéƒŠ å”ä»£ æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°†å…¶ç«–çº¿å¯¹é½ï¼Œå¦‚ä¸‹è¿™æ ·å°±æ˜“è¯»è®¸å¤šï¼š\n| è¯—å | ä½œè€… | æœä»£ | | ------ | ------ | ---- | | ç™½å¤´åŸ | å“æ–‡å› | ä¸¤æ±‰ | | é”¦ç‘Ÿ | æå•†éš | å”ä»£ | | ç™»ç§‘å | å­ŸéƒŠ | å”ä»£ | æ˜¾ç¤ºæ•ˆæœä¿æŒä¸€è‡´ã€‚ä½†æ˜¯å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦å»æ‰‹åŠ¨å¯¹é½æ•ˆç‡å¤ªä½ï¼Œä¹Ÿä¸ç¬¦åˆ Markdown è®¾è®¡åˆè¡·ã€‚è¿™å°±ç”¨åˆ°äº†é¢å¤–çš„æ’ä»¶ï¼Œèƒ½å¤Ÿè¾…åŠ©æˆ‘ä»¬å®Œæˆè¿™ä¸ªå·¥ä½œã€‚\nMarkdown All in One VSCode æ’ä»¶ä¸­å¿ƒæœç´¢Markdown All in Oneå®‰è£…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å®‰è£…å®Œæˆåï¼Œä½¿ç”¨æ—¶å³å‡»çª—å£é€‰æ‹©Format Document withï¼š\n\u003c!DOCTYPE html\u003e Responsive Image é€‰æ‹©Markdown All in Oneå³å¯è‡ªåŠ¨å¯¹é½æ‰€æœ‰è¡¨æ ¼ç«–çº¿ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¸¸è§é—®é¢˜ æ ¼å¼åŒ–æ–‡æ¡£åä»æœªå¯¹é½ è¿™æ˜¯ç”±äºè¡¨æ ¼ä¸­åŒæ—¶æœ‰ä¸­è‹±æ–‡ï¼Œè€Œä¸­è‹±æ–‡å­—ä½“ä¸ç­‰å®½å¯¼è‡´çš„ã€‚å¦‚æœå¯¹é˜…è¯»è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥ä¸ç”¨ç®¡ï¼Œå®é™…ä¸Šå·²ç»æ ¼å¼åŒ–å®Œæˆäº†ã€‚å¦‚æœéœ€è¦å¯¹é½ï¼Œé‚£ä¹ˆå¯ä»¥æŸ¥çœ‹ç¼–ç å­—ä½“ä¸é˜…è¯»å­—ä½“æ¨èè¿™ç¯‡æ–‡ç« çš„ä¸­æ–‡ç­‰å®½å­—ä½“ä¸‹è½½å¹¶å®‰è£…ï¼Œå³å¯æ­£å¸¸å¯¹é½ã€‚\n","permalink":"https://lifeislife.cn/posts/markdown%E8%A1%A8%E6%A0%BC%E7%AB%96%E7%BA%BF%E8%87%AA%E5%8A%A8%E5%AF%B9%E9%BD%90/","summary":"\u003ch2 id=\"éœ€æ±‚èƒŒæ™¯\"\u003eéœ€æ±‚èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eMarkdown ä¸­çš„è¡¨æ ¼ï¼Œåªè¦ç¬¦åˆè¯­æ³•å°±èƒ½å¤Ÿæ­£å¸¸æ¸²æŸ“æ˜¾ç¤ºï¼Œä½†æ˜¯ç¬¦åˆè¯­æ³•ä½†æ˜¯ Markdown æºç å´ä¸ä¸€å®šæ˜“è¯»ã€‚å°±å¦‚ä»¥ä¸‹çš„è¿™ä¸ªè¡¨æ ¼ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œä½†æ˜¯æºç åœ¨æºæ–‡ä»¶ä¸­ç«–çº¿ä¸å¯¹é½ï¼Œå°±é˜…è¯»å›°éš¾ã€‚\u003c/p\u003e","title":"Markdown è¡¨æ ¼ç«–çº¿è‡ªåŠ¨å¯¹é½"},{"content":"Introduction Document Version 20211203\nControl and Status Registers (CSRs) Machine-Level ISA, Version 1.12 æœ¬ç« ä»‹ç»äº†æœºå™¨æ¨¡å¼ï¼ˆM-modeï¼‰ä¸­å¯ç”¨çš„æœºå™¨çº§æ“ä½œï¼Œè¿™æ˜¯ RISC-V ç³»ç»Ÿä¸­æœ€é«˜æƒé™çš„æ¨¡å¼ã€‚M æ¨¡å¼ç”¨äºå¯¹ç¡¬ä»¶å¹³å°çš„ä½çº§è®¿é—®ï¼Œæ˜¯å¤ä½æ—¶è¿›å…¥çš„ç¬¬ä¸€ä¸ªæ¨¡å¼ã€‚M æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°é‚£äº›åœ¨ç¡¬ä»¶ä¸­ç›´æ¥å®ç°è¿‡äºå›°éš¾æˆ–æˆæœ¬é«˜æ˜‚çš„åŠŸèƒ½ã€‚RISC-V çš„æœºå™¨çº§ ISA åŒ…å«ä¸€ä¸ªå…±åŒçš„æ ¸å¿ƒï¼Œæ ¹æ®æ”¯æŒçš„å…¶ä»–æƒé™çº§åˆ«å’Œç¡¬ä»¶å®ç°çš„å…¶ä»–ç»†èŠ‚æ¥æ‰©å±•ã€‚\nMachine-Level CSRs é™¤äº†æœ¬èŠ‚ä¸­æè¿°çš„æœºå™¨çº§ CSRs å¤–ï¼ŒM-mode ä»£ç è¿˜å¯ä»¥è®¿é—®è¾ƒä½ç‰¹æƒçº§åˆ«çš„æ‰€æœ‰ CSRsã€‚\nMachine ISA Register misa misa CSR æ˜¯ WARL è¯»å†™å¯„å­˜å™¨ï¼ŒæŠ¥å‘Šç¡¬ä»¶ (hart) æ”¯æŒçš„ ISAã€‚è¯¥å¯„å­˜å™¨åœ¨ä»»ä½•å®ç°ä¸­éƒ½å¿…é¡»æ˜¯å¯è¯»çš„ï¼Œä½†æ˜¯å¯ä»¥è¿”å›é›¶å€¼ä»¥æŒ‡ç¤ºæœªå®ç° misa å¯„å­˜å™¨ï¼Œè¿™å°±éœ€è¦é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„éæ ‡å‡†æœºåˆ¶ç¡®å®š CPU åŠŸèƒ½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image MXLï¼ˆæœºå™¨ XLENï¼‰å­—æ®µç¼–ç æœ¬æœºåŸºæœ¬æ•´æ•° ISA å®½åº¦ï¼Œå¦‚è¡¨ 3.1 æ‰€ç¤ºã€‚MXL å­—æ®µåœ¨æ”¯æŒå¤šä¸ªåŸºæœ¬ ISA å®½åº¦çš„å®ç°ä¸­å¯èƒ½æ˜¯å¯å†™çš„ã€‚M-mode ä¸‹çš„æœ‰æ•ˆ XLEN, MXLENï¼Œç”± MXL çš„è®¾ç½®ç»™å‡ºï¼Œå¦‚æœ misa ä¸ºé›¶ï¼Œåˆ™æœ‰ä¸€ä¸ªå›ºå®šçš„å€¼ã€‚é‡ç½®æ—¶ï¼ŒMXL å­—æ®µå§‹ç»ˆè®¾ç½®ä¸ºæœ€å¹¿æ³›æ”¯æŒçš„ ISA å˜ç§ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image misa CSR ä¸º MXLEN ä½å®½ã€‚å¦‚æœä» misa è¯»å–çš„å€¼ä¸ä¸ºé›¶ï¼Œè¯¥å€¼çš„ MXL å­—æ®µæ€»æ˜¯è¡¨ç¤ºå½“å‰çš„ MXLENã€‚å¦‚æœå¯¹ misa çš„å†™æ“ä½œå¯¼è‡´ MXLEN å‘ç”Ÿæ›´æ”¹ï¼Œåˆ™ MXL çš„ä½ç½®å°†ä»¥æ–°çš„å®½åº¦ç§»åŠ¨åˆ° misa çš„æœ€é«˜æœ‰æ•ˆä¸¤ä½ã€‚\nå¯ä»¥ä½¿ç”¨è¿”å›çš„ misa å€¼çš„ç¬¦å·ä¸Šçš„åˆ†æ”¯ï¼Œä»¥åŠå¯èƒ½åœ¨ç¬¦å·ä¸Šå·¦ç§»ä¸€ä¸ªåˆ†æ”¯å’Œç¬¬äºŒä¸ªåˆ†æ”¯ï¼Œæ¥å¿«é€Ÿç¡®å®šåŸºæœ¬å®½åº¦ã€‚è¿™äº›æ£€æŸ¥å¯ä»¥ç”¨æ±‡ç¼–ä»£ç ç¼–å†™ï¼Œè€Œæ— éœ€çŸ¥é“æœºå™¨çš„å¯„å­˜å™¨å®½åº¦ï¼ˆXLENï¼‰ã€‚åŸºæœ¬å®½åº¦ç”± XLEN = 2^(MXL + 4) ç»™å‡ºã€‚å¦‚æœ misa ä¸ºé›¶ï¼Œåˆ™å¯ä»¥é€šè¿‡å°†ç«‹å³æ•° 4 æ”¾ç½®åœ¨ä¸€ä¸ªå¯„å­˜å™¨ä¸­ï¼Œç„¶åä¸€æ¬¡å°†å¯„å­˜å™¨å·¦ç§» 31 ä½æ¥æ‰¾åˆ°åŸºæœ¬å®½åº¦ã€‚å¦‚æœåœ¨ä¸€æ¬¡ç§»ä½åä¸ºé›¶ï¼Œåˆ™è¯¥æœºå™¨ä¸º RV32ã€‚å¦‚æœä¸¤æ¬¡ç§»ä½åä¸ºé›¶ï¼Œåˆ™æœºå™¨ä¸º RV64ï¼Œå¦åˆ™ä¸º RV128ã€‚\nExtensions å­—æ®µç¼–ç äº†ç›®å‰å­˜æœ‰çš„æ ‡å‡†æ‰©å±•ï¼Œå…¶æ¯ä¸ª bit éƒ½å¯¹åº”äº†å­—æ¯è¡¨ä¸­çš„ä¸€ä¸ªå­—æ¯ï¼ˆbit 0 ç¼–ç æ‰©å±•â€œAâ€æ˜¯å¦å­˜åœ¨ï¼Œbit 1 ç¼–ç æ‰©å±•â€œBâ€æ˜¯å¦å­˜åœ¨\u0026hellip; ç›´è‡³ bit 25 ç¼–ç â€œZâ€ï¼‰ã€‚å¦‚æœåŸºç¡€ ISA æ˜¯ RV32Iã€RV64I æˆ– RV128Iï¼Œåˆ™ç½®ä½â€œIâ€bitï¼Œå¦åˆ™å¦‚æœåŸºç¡€ ISA æ˜¯ RV32Eï¼Œåˆ™ç½®ä½â€œEâ€bitã€‚\nExtensions å­—æ®µæ˜¯ä¸€ä¸ªèƒ½åŒ…å«å¯å†™ä½çš„ WARL å­—æ®µï¼ˆå¦‚æœå®ç°å…è®¸ä¿®æ”¹æ‰€æ”¯æŒçš„ ISAï¼‰ã€‚\nå¤ä½ï¼ˆresetï¼‰æ—¶ï¼ŒExtensions åº”åŒ…å«æ‰€æ”¯æŒæ‰©å±•çš„æœ€å¤§é›†ï¼Œå¦‚æœ E å’Œ I éƒ½å¯ç”¨ï¼Œåˆ™ä¼˜å…ˆé€‰æ‹© Iã€‚\nåœ¨é€šè¿‡æ¸…é™¤ misa ä¸­ç›¸åº” bit æ¥ç¦æ­¢ä¸€ä¸ªæ ‡å‡†æ‰©å±•æ—¶ï¼Œç”±è¯¥æ‰©å±•æ‰€å®šä¹‰æˆ–ä¿®æ”¹çš„æŒ‡ä»¤å’Œ CSR å°†æ¢å¤ä¸ºè¯¥æ‰©å±•æœªå®ç°æ—¶çš„å®šä¹‰ï¼Œæˆ–è€…ä¿ç•™è¡Œä¸ºï¼ˆrevert to their defined or reserved behaviors as if the extension is not implementedï¼‰ã€‚\nRV128 base ISA çš„è®¾è®¡å°šæœªå®Œå·¥ï¼Œå°½ç®¡é¢„è®¡æœ¬ specification ä¸­å¤§éƒ¨åˆ†çš„å‰©ä½™éƒ¨åˆ†éƒ½å°†é€‚ç”¨äº RV128ï¼Œä½†æœ¬ç‰ˆæœ¬çš„æ–‡æ¡£ä»…å…³æ³¨ RV32 å’Œ RV64ã€‚\nå¦‚æœæ”¯æŒç”¨æˆ·æ¨¡å¼ï¼ˆuser modeï¼‰ï¼Œåˆ™å°†â€œUâ€bit ç½®ä½ï¼›å¦‚æœæ”¯æŒä¸»ç®¡æ¨¡å¼ï¼ˆsupervisor modeï¼‰ï¼Œåˆ™å°†â€œSâ€bit ç½®ä½ã€‚\nå¦‚æœå­˜åœ¨ä»»ä½•éæ ‡å‡†æ‰©å±•ï¼ˆnon-standard extensionsï¼‰ï¼Œåˆ™å°†â€œXâ€bit ç½®ä½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image â€œEâ€ä½æ˜¯åªè¯»çš„ã€‚é™¤éå°† misa ç¡¬è¿çº¿ä¸ºé›¶ï¼Œå¦åˆ™â€œEâ€ä½å§‹ç»ˆè¯»å–ä¸ºâ€œIâ€ä½çš„è¡¥ç ï¼ˆè¡¥é›†ï¼Ÿï¼‰ã€‚åŒæ—¶æ”¯æŒ RV32E å’Œ RV32I çš„å®ç°å¯ä»¥é€šè¿‡æ¸…é™¤â€œIâ€ä½æ¥é€‰æ‹© RV32Eã€‚\nå¦‚æœ ISA åŠŸèƒ½ x ä¾èµ– ISA åŠŸèƒ½ yï¼Œåˆ™å°è¯•å¯ç”¨åŠŸèƒ½ x ä½†ç¦ç”¨åŠŸèƒ½ y ä¼šå¯¼è‡´ä¸¤ä¸ªåŠŸèƒ½éƒ½è¢«ç¦ç”¨ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®â€œFâ€ = 0 å’Œâ€œDâ€ = 1 ä¼šå¯¼è‡´åŒæ—¶æ¸…é™¤â€œFâ€å’Œâ€œDâ€ã€‚\nå…·ä½“å®ç°å¯èƒ½ä¼šåœ¨ 2 æˆ–å¤šä¸ª misa å­—æ®µçš„é›†ä½“è®¾ç½®ä¸Šæ–½åŠ é¢å¤–çº¦æŸï¼Œæ­¤æ—¶å°†å®ƒä»¬çš„é›†ä½“çœ‹ä½œæ˜¯ä¸€ä¸ª WARL å­—æ®µã€‚è¯•å›¾å‘å…¶ä¸­å†™å…¥ä¸€ä¸ªä¸æ”¯æŒçš„ç»„åˆä¼šå¯¼è‡´è¿™äº› bits è¢«ç½®ä¸ºæŸä¸ªæ”¯æŒçš„ç»„åˆã€‚\nå†™ misa å¯èƒ½ä¼šå¢åŠ  IALIGNï¼Œä¾‹å¦‚ï¼Œé€šè¿‡ç¦ç”¨ C æ‰©å±•ã€‚å¦‚æœè¦å†™å…¥ misa çš„æŒ‡ä»¤å¢åŠ äº† IALIGNï¼Œè€Œåä¸€æ¡æŒ‡ä»¤çš„åœ°å€æœªæŒ‰ IALIGN ä½å¯¹é½ï¼Œåˆ™å°†æŠ‘åˆ¶å¯¹ misa çš„å†™å…¥ï¼Œä»è€Œä½¿ misa ä¿æŒä¸å˜ã€‚\nåœ¨è½¯ä»¶å¯ç”¨ä¸€ä¸ªä¹‹å‰è¢«ç¦ç”¨çš„æ‰©å±•æ—¶ï¼Œé™¤è¯¥æ‰©å±•å¦æœ‰è§„å®šï¼ˆspecifiedï¼‰ï¼Œå¦åˆ™æ‰€æœ‰å•ç‹¬ä¸è¯¥æ‰©å±•æœ‰å…³çš„çŠ¶æ€éƒ½å°†æ˜¯æœªæŒ‡å®šçš„ï¼ˆunspecifiedï¼‰ã€‚\nMachine Vendor ID Register mvendorid mvendorid CSR æ˜¯ä¸€ä¸ª 32 ä½åªè¯»å¯„å­˜å™¨ï¼Œæä¾›å†…æ ¸ä¾›åº”å•†çš„ JEDEC åˆ¶é€ å•† IDã€‚æ­¤å¯„å­˜å™¨åœ¨ä»»ä½•å®ç°ä¸­éƒ½å¿…é¡»æ˜¯å¯è¯»çš„ï¼Œä½†å¯ä»¥è¿”å› 0ï¼Œè¡¨ç¤ºè¯¥å­—æ®µæœªå®ç°æˆ–è¿™æ˜¯éå•†ä¸šå®ç°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image JEDEC åˆ¶é€ å•† ID é€šå¸¸ç¼–ç ä¸ºå•å­—èŠ‚è¿ç»­çš„ 0x7f ä»£ç çš„åºåˆ—ï¼Œä»¥ä¸ç­‰äº 0x7f çš„å•å­—èŠ‚ ID ç»ˆæ­¢ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªå­—èŠ‚çš„æœ€é«˜æœ‰æ•ˆä½ä¸­å¸¦æœ‰å¥‡æ ¡éªŒä½ã€‚mvendorid åœ¨ Bank å­—æ®µä¸­ç¼–ç å•å­—èŠ‚çš„è¿ç»­ä»£ç ï¼Œå¹¶åœ¨ Offset å­—æ®µä¸­ç¼–ç æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œä¸¢å¼ƒå¥‡å¶æ ¡éªŒä½ã€‚ä¾‹å¦‚ï¼ŒJEDEC åˆ¶é€ å•† ID 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x8aï¼ˆåäºŒä¸ªè¿ç»­ä»£ç ï¼Œåè·Ÿ 0x8aï¼‰å°†åœ¨ mvendorid å­—æ®µä¸­ç¼–ç ä¸º 0x60aã€‚\nè¯‘è€…æ³¨ï¼šJEDEC å›ºæ€æŠ€æœ¯åä¼šï¼ˆJEDEC Solid State Technology Associationï¼‰æ˜¯å›ºæ€åŠåŠå¯¼ä½“å·¥ä¸šç•Œçš„ä¸€ä¸ªæ ‡å‡†åŒ–ç»„ç»‡ï¼Œå®ƒç”±çº¦ 300 å®¶å…¬å¸æˆå‘˜ç»„æˆï¼Œçº¦ 3300 åæŠ€æœ¯äººå‘˜é€šè¿‡ 50 ä¸ªä¸åŒçš„å§”å‘˜ä¼šè¿ä½œï¼Œåˆ¶å®šå›ºæ€ç”µå­æ–¹é¢çš„å·¥ä¸šæ ‡å‡†ã€‚JEDEC æ›¾ç»æ˜¯ç”µå­å·¥ä¸šè”ç›Ÿï¼ˆEIAï¼‰çš„ä¸€éƒ¨åˆ†ï¼šè”åˆç”µå­è®¾å¤‡å·¥ç¨‹å§”å‘˜ä¼šï¼ˆJoint Electron Device Engineering Councilï¼ŒJEDECï¼‰ã€‚è¯¥åä¼šåˆ¶å®šäº†ä¸€ä¸ªåˆ¶é€ å•†æ ‡è¯†ç çš„æ ‡å‡†ï¼šStandard Manufacturerâ€™s Identification Codeï¼Œé€šè¿‡è¯»å–mvendoridå¯„å­˜å™¨å€¼ï¼ŒæŸ¥é˜…è¯¥æ ‡å‡†å³å¯ç¡®å®šåˆ¶é€ å•†ã€‚\næ³¨ï¼šç”¨ JEDEC çš„è¯æ¥è¯´ï¼ŒBank ç¼–å·æ¯” Continuation çš„æ•°é‡å¤§ 1ï¼›å› æ­¤ï¼Œmvendorid Bank å­—æ®µç¼–ç çš„å€¼æ¯” JEDEC Bank ç¼–å·å°ä¸€ã€‚\næ³¨ï¼šä»¥å‰ï¼Œä¾›åº”å•† ID æ˜¯ RISC-V åŸºé‡‘ä¼šåˆ†é…çš„ç¼–å·ï¼Œä½†è¿™ä¸ JEDEC åœ¨ç»´æŠ¤åˆ¶é€ å•† ID æ ‡å‡†æ–¹é¢çš„å·¥ä½œé‡å¤ã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œå‘ JEDEC æ³¨å†Œåˆ¶é€ å•† ID çš„ä¸€æ¬¡æ€§è´¹ç”¨ä¸º 500 ç¾å…ƒã€‚\nMachine-Mode Privileged Instructions Environment Call and Breakpoint Trap-Return Instructions Wait for Interrupt ç­‰å¾…ä¸­æ–­æŒ‡ä»¤ (WFI) ä¸ºå®ç°æä¾›äº†ä¸€ä¸ªæç¤ºï¼Œå³å½“å‰çš„ hart å¯ä»¥åœæ­¢ï¼Œç›´åˆ°éœ€è¦æœåŠ¡ä¸­æ–­ã€‚WFI æŒ‡ä»¤çš„æ‰§è¡Œä¹Ÿå¯ä»¥ç”¨æ¥é€šçŸ¥ç¡¬ä»¶å¹³å°åˆé€‚çš„ä¸­æ–­åº”è¯¥ä¼˜å…ˆè·¯ç”±åˆ°è¿™ä¸ª hartã€‚WFI åœ¨æ‰€æœ‰ç‰¹æƒæ¨¡å¼ä¸‹éƒ½å¯ç”¨ï¼Œå¹¶ä¸”å¯ç”¨äº U æ¨¡å¼ (å¯é€‰åœ°)ã€‚å½“ mstatus ä¸­çš„ TW = 1 æ—¶ï¼Œè¯¥æŒ‡ä»¤å¯èƒ½ä¼šå¼•å‘éæ³•æŒ‡ä»¤å¼‚å¸¸ï¼Œå¦‚ç¬¬ 3.1.6.5 èŠ‚æ‰€è¿°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœåœ¨ hart åœæ­¢æ—¶å­˜åœ¨æˆ–ç¨åå‡ºç°å¯ç”¨çš„ä¸­æ–­ï¼Œåˆ™ä¸­æ–­ trap å°†åœ¨ä»¥ä¸‹æŒ‡ä»¤ä¸Šæ‰§è¡Œï¼Œå³åœ¨ trap å¤„ç†ç¨‹åºä¸­æ¢å¤æ‰§è¡Œå¹¶ä¸” mepc = pc + 4ã€‚\n","permalink":"https://lifeislife.cn/posts/zh-the-risc-v-instruction-set-manual-volume-2-%E7%89%B9%E6%9D%83%E7%BA%A7%E6%9E%B6%E6%9E%84/","summary":"\u003ch1 id=\"introduction\"\u003eIntroduction\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDocument Version 20211203\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch1 id=\"control-and-status-registers-csrs\"\u003eControl and Status Registers (CSRs)\u003c/h1\u003e\n\u003ch1 id=\"machine-level-isa-version-112\"\u003eMachine-Level ISA, Version 1.12\u003c/h1\u003e\n\u003cp\u003eæœ¬ç« ä»‹ç»äº†æœºå™¨æ¨¡å¼ï¼ˆM-modeï¼‰ä¸­å¯ç”¨çš„æœºå™¨çº§æ“ä½œï¼Œè¿™æ˜¯ RISC-V ç³»ç»Ÿä¸­æœ€é«˜æƒé™çš„æ¨¡å¼ã€‚M æ¨¡å¼ç”¨äºå¯¹ç¡¬ä»¶å¹³å°çš„ä½çº§è®¿é—®ï¼Œæ˜¯å¤ä½æ—¶è¿›å…¥çš„ç¬¬ä¸€ä¸ªæ¨¡å¼ã€‚M æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°é‚£äº›åœ¨ç¡¬ä»¶ä¸­ç›´æ¥å®ç°è¿‡äºå›°éš¾æˆ–æˆæœ¬é«˜æ˜‚çš„åŠŸèƒ½ã€‚RISC-V çš„æœºå™¨çº§ ISA åŒ…å«ä¸€ä¸ªå…±åŒçš„æ ¸å¿ƒï¼Œæ ¹æ®æ”¯æŒçš„å…¶ä»–æƒé™çº§åˆ«å’Œç¡¬ä»¶å®ç°çš„å…¶ä»–ç»†èŠ‚æ¥æ‰©å±•ã€‚\u003c/p\u003e","title":"ZH-The RISC-V Instruction Set Manual Volume 2-ç‰¹æƒçº§æ¶æ„"},{"content":"Markdownlint ç®€ä»‹ Markdown æ ‡è®°è¯­è¨€æ—¨åœ¨æ˜“äºé˜…è¯»ã€ç¼–å†™å’Œç†è§£ã€‚å®ƒçš„çµæ´»æ€§æ—¢æ˜¯ä¼˜ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ã€‚è¯­æ³•ä¼—å¤šï¼Œå› æ­¤æ ¼å¼å¯èƒ½ä¸ä¸€è‡´ã€‚æŸäº›æ„é€ åœ¨æ‰€æœ‰è§£æå™¨ä¸­éƒ½ä¸èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œåº”è¯¥é¿å…ã€‚CommonMark è§„èŒƒæ ‡å‡†åŒ–è§£æå™¨ã€‚\nMarkdownlint æ˜¯ä¸€ä¸ªç”¨äº Node.js çš„é™æ€åˆ†æå·¥å…·ï¼Œæœ‰ä¸€ä¸ªæ ‡å‡†è§„èŒƒï¼Œç”¨äºå¼ºåˆ¶æ‰§è¡Œ Markdown æ–‡ä»¶çš„æ ‡å‡†å’Œä¸€è‡´æ€§ã€‚\nMarkdownlint æ’ä»¶ä½¿ç”¨ markdownlintæä¾›äº†å¤šç§ä½¿ç”¨åœºæ™¯ä¸‹çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚å‘½ä»¤è¡Œï¼Œç¼–è¾‘å™¨ç”šè‡³ GitHub Actionã€‚å› ä¸ºæˆ‘å¹³æ—¶å†™ Markdown æ–‡æ¡£éƒ½æ˜¯ä½¿ç”¨ VSCodeï¼Œæ‰€ä»¥ä»‹ç»ä¸€ä¸‹ VSCode ä¸‹çš„ä½¿ç”¨ã€‚å…¶ä»–ç¼–è¾‘å™¨åŒ…æ‹¬ VIMï¼ŒSublime ä¹Ÿéƒ½æ”¯æŒï¼Œå¯ä»¥å‰å¾€å®˜ç½‘æŸ¥é˜…æ–¹æ³•ã€‚\nVSCode éœ€è¦ä¸‹è½½æ’ä»¶ï¼ŒCtrl+Shift+Xæ‰“å¼€æ’ä»¶ä¸­å¿ƒï¼Œæœç´¢Markdownlintå®‰è£…å³å¯ã€‚\nå®‰è£…æ’ä»¶åæ‰“å¼€ Markdown æ–‡æ¡£ï¼Œå¦‚æœæœ‰ä¸ç¬¦åˆè§„èŒƒçš„è¯­æ³•å°†ä¼šè­¦å‘Šæ ‡è¯†ã€‚å¦‚ï¼Œæ ‡é¢˜å‰åæ²¡æœ‰ç©ºè¡Œï¼Œå°†ä¼šæ ‡è¯†ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æç¤ºè¿åäº†ç¬¬ 22 æ¡è§„èŒƒï¼Œç¬¬ 22 æ¡è§„èŒƒçš„å°±æ˜¯æ ‡é¢˜å‰åéœ€è¦æœ‰ç©ºè¡Œéš”å¼€ã€‚\nç›®å‰æœ‰ 53 æ¡è§„èŒƒï¼Œå¯ä»¥åœ¨markdownlint/Rules.mdæŸ¥çœ‹æ‰€æœ‰è§„èŒƒçš„å†…å®¹ã€‚\nå½“ç„¶è¿™äº›è§„èŒƒä¹Ÿéƒ½å¯ä»¥è‡ªå®šä¹‰æ˜¯å¦æ£€æŸ¥ï¼Œæ¯”å¦‚ç¬¬ 24 æ¡è§„å®šï¼Œæ–‡æ¡£å†…ä¸å¯ä»¥æœ‰é‡å¤çš„æ ‡é¢˜ï¼Œä½†æ˜¯æˆ‘å°±æœ‰é‡å¤æ ‡é¢˜çš„éœ€æ±‚ï¼Œé‚£è¯¥å¦‚ä½•å…³é—­è¿™ä¸ªæ£€æŸ¥å‘¢ï¼ŒMarkdownlint æä¾›äº†é…ç½®çš„æ–¹å¼ã€‚\nCtrl+Shift+Pæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥ Markdownlintï¼Œæ‰¾åˆ°Creat or open the markdownlint configuration fileã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œè¡¨ç¤ºå…³é—­ç¬¬ 24 æ¡è§„èŒƒçš„æ£€æŸ¥ï¼š\n{ \u0026#34;MD024\u0026#34;: false, } è¿™æ ·æ–‡æ¡£ä¸­å°†ä¸ä¼šæœ‰ç¬¬ 24 æ¡è§„èŒƒçš„æ£€æŸ¥è­¦å‘Šï¼Œå…¶ä»–æ£€æŸ¥åŒç†ã€‚\nMarkdownlint è‡ªå®šä¹‰è§„åˆ™ MD001 - Heading levels should only increment by one level at a time æ ‡é¢˜ç­‰çº§ä¸€æ¬¡åªèƒ½å¢åŠ ä¸€çº§ï¼Œä¸èƒ½è·¨çº§ã€‚\nåŸç†ï¼šæ ‡é¢˜ä»£è¡¨æ–‡æ¡£çš„ç»“æ„ï¼Œè·³è¿‡æ—¶å¯èƒ½ä¼šé€ æˆæ··æ·† - ç‰¹åˆ«æ˜¯å¯¹äºå¯è®¿é—®æ€§åœºæ™¯ã€‚\nMD002 - First heading should be a top-level heading æ–‡æ¡£çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜å¿…é¡»æ˜¯æœ€é«˜çº§çš„æ ‡é¢˜ï¼ˆæ ‡é¢˜ç­‰çº§ 1 çº§åˆ° 6 çº§é€æ¸é™ä½ï¼‰\nMD003 - Heading style æ•´ç¯‡æ–‡æ¡£éœ€è¦é‡‡ç”¨ä¸€è‡´çš„æ ‡é¢˜æ ¼å¼ã€‚\nMD004 - Unordered list style æ— åºåˆ—è¡¨æ ¼å¼éœ€è¦ä¸€è‡´ã€‚\nMD005 - Inconsistent indentation for list items at the same level åŒä¸€çº§çš„åˆ—è¡¨ç¼©è¿›å¿…é¡»ä¸€è‡´ åœ¨æœ‰åºåˆ—è¡¨ä¸­ï¼Œå‰é¢çš„æ•°å­—åºå·å¯ä»¥å·¦å¯¹é½ï¼Œä¹Ÿå¯ä»¥å³å¯¹é½ MD006 - Consider starting bulleted lists at the beginning of the line ä¸€çº§åˆ—è¡¨ä¸èƒ½ç¼©è¿›ã€‚\nå¦‚ä¸‹ä¸ºæŠ¥é”™ï¼š\nSome text * List item * List item MD007 - Unordered list indentation æ— åºåˆ—è¡¨åµŒå¥—ç¼©è¿›æ—¶é»˜è®¤é‡‡ç”¨ä¸¤ä¸ªç©ºæ ¼ã€‚\nMD009 - Trailing spaces è¡Œå°¾æœ€å¤šå¯ä»¥æ·»åŠ ä¸¤ä¸ªç©ºæ ¼ï¼Œè¶…è¿‡ä¼šç»™å‡ºè­¦å‘Šï¼Œä¸¤ä¸ªç©ºæ ¼æ­£å¥½å¯ä»¥ç”¨äºæ¢è¡Œã€‚\nMD010 - Hard tabs ä¸èƒ½ä½¿ç”¨ tab é”®ç¼©è¿›ï¼Œè¦ä½¿ç”¨ç©ºæ ¼ã€‚\nåŸç†ï¼šç¡¬åˆ¶è¡¨ç¬¦é€šå¸¸ç”±ä¸åŒçš„ç¼–è¾‘å™¨ä»¥ä¸ä¸€è‡´çš„æ–¹å¼å‘ˆç°ï¼Œå¹¶ä¸”æ¯”ç©ºæ ¼æ›´éš¾å¤„ç†ã€‚\nMD011 - Reversed link syntax å½“é‡åˆ°çœ‹ä¼¼é“¾æ¥çš„æ–‡æœ¬ï¼Œä½†è¯­æ³•ä¼¼ä¹å·²åè½¬ï¼ˆ[] å’Œ () åè½¬ï¼‰æ—¶ï¼Œå°†è§¦å‘æ­¤è§„åˆ™ã€‚\nMD012 - Multiple consecutive blank lines æ–‡æ¡£ä¸­ä¸èƒ½æœ‰è¿ç»­çš„ç©ºè¡Œï¼Œåœ¨ä»£ç å—ä¸­æ­¤è§„åˆ™ä¸ä¼šç”Ÿæ•ˆã€‚\nMD013 - Line length é»˜è®¤è¡Œçš„æœ€å¤§é•¿åº¦æ˜¯ 80ï¼Œæ­¤è§„åˆ™å¯¹ä»£ç å—ã€è¡¨æ ¼ã€æ ‡é¢˜ä¹Ÿç”Ÿæ•ˆã€‚\nMD014 - Dollar signs used before commands without showing output åœ¨ä»£ç å—ä¸­ï¼Œç»ˆç«¯å‘½ä»¤å‰ä¸éœ€è¦æœ‰ç¾å…ƒç¬¦å· ($) å¦‚æœä»£ç å—ä¸­æ—¢æœ‰ç»ˆç«¯å‘½ä»¤ï¼Œä¹Ÿæœ‰å‘½ä»¤çš„è¾“å‡ºï¼Œåˆ™ç»ˆç«¯å‘½ä»¤å‰å¯ä»¥æœ‰ç¾å…ƒç¬¦å· ($)ã€‚\nMD018 - No space after hash on atx style heading åœ¨\u0026quot;atx\u0026quot;æ ¼å¼çš„æ ‡é¢˜ä¸­ï¼Œ#å·å’Œæ–‡å­—é—´éœ€ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚\nMD019 - Multiple spaces after hash on atx style heading åœ¨\u0026quot;atx\u0026quot;æ ¼å¼çš„æ ‡é¢˜ä¸­ï¼Œ#å·å’Œæ–‡å­—é—´åªèƒ½ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œä¸èƒ½æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚\nMD020 - No space inside hashes on closed atx style heading åœ¨\u0026quot;closed_atx\u0026quot;æ ¼å¼çš„æ ‡é¢˜ä¸­ï¼Œæ–‡å­—å’Œå‰åçš„#å·ä¹‹é—´éœ€ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚\nMD021 - Multiple spaces inside hashes on closed atx style heading åœ¨\u0026quot;closed_atx\u0026quot;æ ¼å¼çš„æ ‡é¢˜ä¸­ï¼Œæ–‡å­—å’Œå‰åçš„#å·ä¹‹é—´åªèƒ½ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œä¸èƒ½æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚\nMD022 - Headings should be surrounded by blank lines æ ‡é¢˜è¡Œçš„ä¸Šä¸‹è¡Œå¿…é¡»éƒ½æ˜¯ç©ºè¡Œã€‚\nMD023 - Headings must start at the beginning of the line æ ‡é¢˜è¡Œä¸èƒ½ç¼©è¿›ã€‚\nMD024 - Multiple headings with the same content æ–‡æ¡£ä¸èƒ½æœ‰å†…å®¹é‡å¤çš„æ ‡é¢˜ã€‚\nMD025 - Multiple top-level headings in the same document åŒä¸€æ–‡æ¡£åªèƒ½æœ‰ä¸€ä¸ªæœ€é«˜çº§çš„æ ‡é¢˜ï¼Œé»˜è®¤æ˜¯åªèƒ½æœ‰ä¸€ä¸ª 1 çº§æ ‡é¢˜ã€‚\nMD026 - Trailing punctuation in heading æ ‡é¢˜è¡Œæœ«å°¾ä¸èƒ½æœ‰ä»¥ä¸‹æ ‡ç‚¹ç¬¦å·ã€‚\nMD027 - Multiple spaces after blockquote symbol åˆ›å»ºå¼•ç”¨åŒºå—æ—¶ï¼Œå³å°–æ‹¬å· ( \u0026gt; ) å’Œæ–‡å­—ä¹‹é—´æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚\nMD028 - Blank line inside blockquote ä¸¤ä¸ªå¼•ç”¨åŒºå—é—´ä¸èƒ½ä»…ç”¨ä¸€ä¸ªç©ºè¡Œéš”å¼€æˆ–è€…åŒä¸€å¼•ç”¨åŒºå—ä¸­ä¸èƒ½æœ‰ç©ºè¡Œï¼Œå¦‚æœä¸€è¡Œä¸­æ²¡æœ‰å†…å®¹ï¼Œåˆ™è¿™ä¸€è¡Œè¦ç”¨\u0026gt;å¼€å¤´ã€‚\nMD029 - Ordered list item prefix æœ‰åºåˆ—è¡¨çš„å‰ç¼€åºå·æ ¼å¼å¿…é¡»åªç”¨ 1 æˆ–è€…ä» 1 å¼€å§‹çš„åŠ  1 é€’å¢æ•°å­—ã€‚\nMD030 - Spaces after list markers åˆ—è¡¨ï¼ˆæœ‰åºã€æ— åºï¼‰çš„å‰ç¼€ç¬¦å·å’Œæ–‡å­—ä¹‹é—´ç”¨ 1 ä¸ªç©ºæ ¼éš”å¼€ åœ¨åˆ—è¡¨åµŒå¥—æˆ–è€…åŒä¸€åˆ—è¡¨é¡¹ä¸­æœ‰å¤šä¸ªæ®µè½æ—¶ï¼Œæ— åºåˆ—è¡¨ç¼©è¿›ä¸¤ä¸ªç©ºæ ¼ï¼Œæœ‰åºåˆ—è¡¨ç¼©è¿› 3 ä¸ªç©ºæ ¼ã€‚\nMD031 - Fenced code blocks should be surrounded by blank lines å•ç‹¬çš„ä»£ç å—å‰åéœ€è¦ç”¨ç©ºè¡Œéš”å¼€ï¼ˆé™¤éæ˜¯åœ¨æ–‡æ¡£å¼€å¤´æˆ–æœ«å°¾ï¼‰ï¼Œå¦åˆ™æœ‰äº›è§£é‡Šå™¨ä¸ä¼šè§£é‡Šä¸ºä»£ç å—\nMD032 - Lists should be surrounded by blank lines åˆ—è¡¨ï¼ˆæœ‰åºã€æ— åºï¼‰å‰åéœ€è¦ç”¨ç©ºè¡Œéš”å¼€ï¼Œå¦åˆ™æœ‰äº›è§£é‡Šå™¨ä¸ä¼šè§£é‡Šä¸ºåˆ—è¡¨ã€‚\nåˆ—è¡¨çš„ç¼©è¿›å¿…é¡»ä¸€è‡´ã€‚\nMD033 - Inline HTML æ–‡æ¡£ä¸­ä¸å…è®¸ä½¿ç”¨ HTML è¯­å¥ã€‚\nMD034 - Bare URL used å•çº¯çš„é“¾æ¥åœ°å€éœ€è¦ç”¨å°–æ‹¬å· (\u0026lt;\u0026gt;) åŒ…è£¹ï¼Œå¦åˆ™æœ‰äº›è§£é‡Šå™¨ä¸ä¼šè§£é‡Šä¸ºé“¾æ¥ã€‚\nMD035 - Horizontal rule style åˆ›å»ºæ°´å¹³çº¿æ—¶æ•´ç¯‡æ–‡æ¡£è¦ç»Ÿä¸€ (consistent)ï¼Œè¦å’Œæ–‡æ¡£ä¸­ç¬¬ä¸€æ¬¡åˆ›å»ºæ°´å¹³çº¿ä½¿ç”¨çš„ç¬¦å·ä¸€è‡´ã€‚\nMD036 - Emphasis used instead of a heading ä¸èƒ½ç”¨åŠ ç²—ä»£æ›¿æ ‡é¢˜ã€‚\nMD037 - Spaces inside emphasis markers ç”¨äºåˆ›å»ºå¼ºè°ƒçš„ç¬¦å·å’Œå¼ºè°ƒçš„çš„æ–‡å­—ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚\nMD038 - Spaces inside code span elements å½“ç”¨å•åå¼•å·åˆ›å»ºä»£ç æ®µçš„æ—¶å€™ï¼Œå•åå¼•å·å’Œå®ƒä»¬ä¹‹é—´çš„ä»£ç ä¸èƒ½æœ‰ç©ºæ ¼ å¦‚æœè¦æŠŠå•åå¼•å·åµŒå…¥åˆ°ä»£ç æ®µçš„é¦–å°¾ï¼Œåˆ›å»ºä»£ç æ®µçš„å•åå¼•å·å’ŒåµŒå…¥çš„å•åå¼•å·é—´è¦æœ‰ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚\nMD039 - Spaces inside link text é“¾æ¥åå’ŒåŒ…å›´å®ƒçš„ä¸­æ‹¬å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä½†é“¾æ¥åä¸­é—´å¯ä»¥æœ‰ç©ºæ ¼ã€‚\nMD040 - Fenced code blocks should have a language specified å•ç‹¬çš„ä»£ç å—ï¼ˆæ­¤å¤„æ˜¯æŒ‡ä¸Šä¸‹ç”¨ä¸‰ä¸ªåå¼•å·åŒ…å›´çš„ä»£ç å—ï¼‰åº”è¯¥æŒ‡å®šä»£ç å—çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä¸€ç‚¹æœ‰åŠ©äºè§£é‡Šå™¨å¯¹ä»£ç è¿›è¡Œä»£ç é«˜äº®ã€‚\nMD041 - First line in a file should be a top-level heading æ–‡æ¡£çš„ç¬¬ä¸€ä¸ªéç©ºè¡Œåº”è¯¥æ˜¯æ–‡æ¡£æœ€é«˜çº§çš„æ ‡é¢˜ï¼Œé»˜è®¤æ˜¯ 1 çº§æ ‡é¢˜ã€‚\nMD042 - No empty links é“¾æ¥çš„åœ°å€ä¸èƒ½ä¸ºç©ºã€‚\nMD043 - Required heading structure è¦æ±‚æ ‡é¢˜éµå¾ªä¸€å®šçš„ç»“æ„ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰è§„å®šçš„ç»“æ„ã€‚\nMD044 - Proper names should have the correct capitalization æŒ‡å®šä¸€äº›åç§°ï¼Œä¼šæ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ­£ç¡®çš„å¤§å†™ã€‚\nMD045 - Images should have alternate text (alt text) å›¾ç‰‡é“¾æ¥å¿…é¡»åŒ…å«æè¿°æ–‡æœ¬ï¼ˆalt textï¼‰ã€‚\nMD046 - Code block style æ•´ç¯‡æ–‡æ¡£é‡‡ç”¨ä¸€è‡´çš„ä»£ç æ ¼å¼ã€‚\nMD047 - Files should end with a single newline character æ–‡æ¡£éœ€ç”¨ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚\nMD048 - Code fence style è¡¨ç¤ºä»£ç å—çš„æ ‡è®°éœ€è¦ä¸€ç›´ï¼Œå¯ä»¥æ˜¯æ³¢æµªå·ï¼Œä¹Ÿå¯ä»¥æ˜¯ç‚¹å·ã€‚ä½†æ˜¯éœ€è¦ä¿æŒä¸€è‡´ã€‚\nMD049 - Emphasis style should be consistent å¼ºè°ƒç¬¦å·éœ€è¦ä¸€ç›´ï¼Œå¦‚æ–œä½“ã€‚\nMD050 - Strong style should be consistent åŠ ç²—ç¬¦å·éœ€è¦ä¿æŒä¸€è‡´ã€‚\nMD051 - Link fragments should be valid é”šç‚¹éœ€è¦è¡¨ç¤ºæ­£ç¡®ã€‚\n","permalink":"https://lifeislife.cn/posts/%E4%BD%BF%E7%94%A8markdownlint%E5%AF%B9markdown%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F%E6%A3%80%E6%9F%A5/","summary":"\u003ch1 id=\"markdownlint-ç®€ä»‹\"\u003eMarkdownlint ç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eMarkdown æ ‡è®°è¯­è¨€æ—¨åœ¨æ˜“äºé˜…è¯»ã€ç¼–å†™å’Œç†è§£ã€‚å®ƒçš„çµæ´»æ€§æ—¢æ˜¯ä¼˜ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ã€‚è¯­æ³•ä¼—å¤šï¼Œå› æ­¤æ ¼å¼å¯èƒ½ä¸ä¸€è‡´ã€‚æŸäº›æ„é€ åœ¨æ‰€æœ‰è§£æå™¨ä¸­éƒ½ä¸èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œåº”è¯¥é¿å…ã€‚CommonMark è§„èŒƒæ ‡å‡†åŒ–è§£æå™¨ã€‚\u003c/p\u003e","title":"ä½¿ç”¨ Markdownlint å¯¹ Markdown æ–‡æœ¬æ ¼å¼æ£€æŸ¥"},{"content":"éœ€æ±‚èƒŒæ™¯ åœ¨å†™ MD æ–‡æ¡£æ—¶ä¸ºäº†è¿½æ±‚ç¾è§‚ï¼Œè¡¨æ ¼é€šå¸¸éƒ½æ˜¯å¯¹é½çš„ï¼Œè¿™å°±éœ€è¦å­—ä½“å¿…é¡»ç­‰å®½ï¼Œä½†æ˜¯å†™ä»£ç æ—¶ç­‰å®½å­—ä½“çš„å› ä¸ºå¾ˆç˜¦å°ï¼Œä¸å®¹æ˜“é˜…è¯»ï¼Œæ‰€ä»¥æƒ³è¦ä¸€ä¸ªæ’ä»¶èƒ½å¤Ÿåœ¨å¤šä¸ªå­—ä½“ç›´æ¥å¿«é€Ÿåˆ‡æ¢ã€‚ä¸‡èƒ½ VSCode å•¥éƒ½æœ‰ï¼Œæ’ä»¶ä¸­å¿ƒå°±æœ‰ä¸€æ¬¾ä¸“é—¨åˆ‡æ¢å­—ä½“çš„æ’ä»¶Font Switcherã€‚ç›´æ¥æœç´¢å®‰è£…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½®ä¸ä½¿ç”¨ æ‰“å¼€é…ç½®è„šæœ¬settings.jsonï¼Œå¦‚æœä»¥å‰ä¿®æ”¹è¿‡å­—ä½“ï¼Œæ‰¾åˆ°\u0026quot;editor.fontFamily\u0026quot;é…ç½®é¡¹ï¼Œå¦‚æœæ²¡æœ‰å°±ç›´æ¥æ·»åŠ ã€‚\nè¿™æ˜¯æˆ‘çš„å­—ä½“ï¼Œæ·»åŠ ä½ ä»¬æœºå™¨ä¸Šå®‰è£…çš„å­—ä½“ï¼Œæ¯ä¸ªé€—å·é—´éš”éƒ½æ˜¯ä¸åŒçš„å­—ä½“ï¼Œå¯ä»¥ä½¿ç”¨Font Switcheråˆ‡æ¢ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­—ä½“åæ²¡æœ‰ç©ºæ ¼ä¸éœ€è¦åŠ å•å¼•å·ï¼ŒåŠ äº†ä¹Ÿæ— å¦¨ï¼Œå¦‚æœæœ‰ç©ºæ ¼ï¼Œä¸€å®šè¦åŠ å¼•å·ã€‚\n\u0026#34;editor.fontFamily\u0026#34;: \u0026#34;\u0026#39;Sarasa Mono SC\u0026#39;, å¾®è½¯é›…é»‘ï¼Œ\u0026#39;Noto Sans Mono CJK SC\u0026#39;, \u0026#39;JetBrains Mono\u0026#39;, Consolas, monospace\u0026#34;, Ctrl+Shift+Pæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥Switch Fontï¼Œé€‰æ‹©åˆ‡æ¢çš„å­—ä½“ã€‚å¦‚å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ![](https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/12/15-17-44-dd742307432154f630585e05a1f57956-GIF 2022-9-12 15-17-27-836285.gif)\n","permalink":"https://lifeislife.cn/posts/vscode%E5%AD%97%E4%BD%93%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2/","summary":"\u003ch2 id=\"éœ€æ±‚èƒŒæ™¯\"\u003eéœ€æ±‚èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eåœ¨å†™ MD æ–‡æ¡£æ—¶ä¸ºäº†è¿½æ±‚ç¾è§‚ï¼Œè¡¨æ ¼é€šå¸¸éƒ½æ˜¯å¯¹é½çš„ï¼Œè¿™å°±éœ€è¦å­—ä½“å¿…é¡»ç­‰å®½ï¼Œä½†æ˜¯å†™ä»£ç æ—¶ç­‰å®½å­—ä½“çš„å› ä¸ºå¾ˆç˜¦å°ï¼Œä¸å®¹æ˜“é˜…è¯»ï¼Œæ‰€ä»¥æƒ³è¦ä¸€ä¸ªæ’ä»¶èƒ½å¤Ÿåœ¨å¤šä¸ªå­—ä½“ç›´æ¥å¿«é€Ÿåˆ‡æ¢ã€‚ä¸‡èƒ½ VSCode å•¥éƒ½æœ‰ï¼Œæ’ä»¶ä¸­å¿ƒå°±æœ‰ä¸€æ¬¾ä¸“é—¨åˆ‡æ¢å­—ä½“çš„æ’ä»¶\u003ccode\u003eFont Switcher\u003c/code\u003eã€‚ç›´æ¥æœç´¢å®‰è£…ã€‚\u003c/p\u003e","title":"VSCode å­—ä½“å¿«é€Ÿåˆ‡æ¢"},{"content":"ä¿ç•™ç°åœº \u003c!DOCTYPE html\u003e Responsive Image è§£å†³æ–¹æ³• å‘½ä»¤è¡Œæ‰§è¡Œ\nstty sane ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3linux%E7%BB%88%E7%AB%AF%E5%9B%9E%E8%BD%A6%E9%94%AE%E5%8F%98%E6%88%90%E5%AD%97%E7%AC%A6m/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/12/14-49-58-a6e2e264bfab205e0838ad8e49adec81-20220912144956-12eead.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/12/14-49-58-a6e2e264bfab205e0838ad8e49adec81-20220912144956-12eead.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cp\u003eå‘½ä»¤è¡Œæ‰§è¡Œ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003estty sane\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"è§£å†³ Linux ç»ˆç«¯å›è½¦é”®å˜æˆå­—ç¬¦ M"},{"content":"éœ€æ±‚èƒŒæ™¯ ç”¨è¿‡ Python çš„éƒ½çŸ¥é“ï¼ŒPython æ˜¯ä¸å‘åå…¼å®¹çš„ï¼Œä¹Ÿå°±æ˜¯ Python3.X å¼€å‘çš„ç¨‹åºï¼Œä½¿ç”¨ Python2.X ç¯å¢ƒå°±æ— æ³•æ­£å¸¸è¿è¡Œã€‚å› ä¸ºå¾ˆå¤šè¯­æ³•éƒ½æ”¹å˜äº†ã€‚ç°åœ¨æ¥è§¦åˆ°çš„å¤§éƒ¨åˆ† Python ç¨‹åºéƒ½æ˜¯ Python3.X å¼€å‘çš„ï¼Œä½†æ˜¯å¶å°”ä¹Ÿä¼šé‡åˆ°ä½¿ç”¨ Python2.X çš„æ—¶å€™ã€‚è¿™å°±éœ€è¦çµæ´»åˆ‡æ¢ç‰ˆæœ¬ã€‚\nä¸€èˆ¬ Linux çš„å„ä¸ªå‘è¡Œç‰ˆéƒ½é¢„è£…äº† Python2.Xã€‚æˆ‘ä½¿ç”¨çš„ Debian å°±é¢„è£…äº† Python2.7ã€‚\n$ python -V Python 2.7.16 ä½†æ˜¯æˆ‘åŒæ—¶ä¹Ÿå®‰è£…äº† Python3.7\n$ ls /usr/bin | grep \u0026#34;python*\u0026#34; dh_python2 python python2 python2.7 python3 python3.7 python3.7m python3m alias ä¿®æ”¹åˆ«å $ alias python=/usr/bin/python3 $ python -V Python 3.7.3 ä¸Šé¢çš„åˆ«åä¿®æ”¹åªå¯¹å½“å‰ç»ˆç«¯æœ‰æ•ˆã€‚å¦‚æœè¦ä½¿æ¯ä¸ªçª—å£éƒ½ä½¿ç”¨è¿™ä¸ªåˆ«åï¼Œå°†åˆ«ååŠ å…¥~/.bashrcï¼Œå¦‚ zsh æ˜¯åˆ™æ˜¯~/.zshrcã€‚\nè½¯é“¾æ¥ å’Œä¿®æ”¹åˆ«åç±»ä¼¼\nln -s python /usr/bin/python3 update-alternatives update-alternativesæ˜¯ Debian ç³»ç»Ÿæä¾›çš„ä¸€ä¸ªå·¥å…·ï¼ŒUbuntu æ˜¯åŸºäº Debian çš„ï¼Œæ‰€ä»¥ Ubuntu ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œå…¶ä»–å‘è¡Œç‰ˆæ²¡æœ‰è¯¥å·¥å…·ã€‚å®ƒå¯ä»¥ç”¨æ¥æ–¹ä¾¿å¿«æ·åœ°åˆ‡æ¢åº”ç”¨ç‰ˆæœ¬ï¼Œä¸ä»…ä»…ç”¨æ¥åˆ‡æ¢ Pythonï¼Œå…¶ä»–åº”ç”¨ç¨‹åºæœ‰å¤šä¸ªç‰ˆæœ¬çš„ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥å·¥å…·ã€‚\nupdate-alternativesæœ¬è´¨ä¹Ÿæ˜¯å»ºç«‹è½¯é“¾æ¥ï¼Œåªä¸è¿‡æœ‰äº†ç»Ÿä¸€çš„ç®¡ç†ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨--installå‚æ•°ï¼Œæ·»åŠ ä¸€äº›å€™é€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œpythonè¿™ä¸ªå‘½ä»¤æ—¶ï¼Œå®ƒå¯ä»¥æœ‰å“ªäº›é€‰æ‹©ï¼Œåœ¨è¿™é‡Œå°±æ˜¯python3.7.3å’Œpython2.7.16ä¸¤ä¸ªé€‰æ‹©ã€‚\n# --install \u0026lt;é“¾æ¥\u0026gt; \u0026lt;åç§°\u0026gt; \u0026lt;è·¯å¾„\u0026gt; \u0026lt;ä¼˜å…ˆçº§\u0026gt; sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 2 sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.7 1 æ³¨æ„ï¼Œè¿™é‡Œçš„/usr/bin/pythoné“¾æ¥æ–‡ä»¶ï¼Œä¸¤ä¸ªå¯é€‰é¡¹å¿…é¡»æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·è¿™ä¸ªé“¾æ¥æ–‡ä»¶æ‰å¯ä»¥é€‰æ‹©ä¸¤ä¸ªä¸åŒçš„å¯é€‰é¡¹å»é“¾æ¥ã€‚\npythonæ˜¯åœ¨å‘½ä»¤è¡Œæ‰§è¡Œçš„å‘½ä»¤ã€‚/usr/bin/python2.7æ˜¯æ‰§è¡Œpythonå‘½ä»¤åè°ƒç”¨å…·ä½“å“ªä¸ªç‰ˆæœ¬ã€‚æœ€åçš„æ•°å­—2æ˜¯ä¼˜å…ˆçº§ï¼Œä¹Ÿå°±æ˜¯python2.7æ¯”python3.7ä¼˜å…ˆçº§é«˜ï¼Œå¦‚æœä¸æŒ‡å®šç‰ˆæœ¬ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯ä½¿ç”¨python2ã€‚\næˆ‘ä»¬å†æŸ¥çœ‹ä¸€ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œå‘ç°æ˜¯python2.7.16ã€‚è¯´æ˜æ˜¯é»˜è®¤ç‰ˆæœ¬ã€‚å¹¶ä¸”pythonå·²è¢«é“¾æ¥åˆ°æˆ‘ä»¬ç®¡ç†çš„è½¯é“¾æ¥ä¸Šã€‚\n$ python -V Python 2.7.16 $ ll /usr/bin | grep \u0026#34;python\u0026#34; lrwxrwxrwx 1 root python -\u0026gt; /etc/alternatives/python æŸ¥çœ‹pythonçš„å¯é€‰é…ç½®ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªå¯é€‰é…ç½®ï¼Œé»˜è®¤æ˜¯python2ï¼Œç¬¬ä¸€åˆ—æ˜¯åºå·ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ‡æ¢åˆ°python3ï¼Œå¯¹åº”çš„æ•°å­—2å³å¯ã€‚\nroot at RISCX in ~ $ update-alternatives --config python There are 2 choices for the alternative python (providing /usr/bin/python). Selection Path Priority Status ------------------------------------------------------------ * 0 /usr/bin/python2.7 2 auto mode 1 /usr/bin/python2.7 2 manual mode 2 /usr/bin/python3.7 1 manual mode Press \u0026lt;enter\u0026gt; to keep the current choice[*], or type selection number:2 update-alternatives: using /usr/bin/python3.7 to provide /usr/bin/python (python) in manual mode å†æ¬¡æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œå‘ç°å·²ç»åˆ‡æ¢æˆåŠŸã€‚\n$ python -V Python 3.7.3 æ‰§è¡Œupdate-alternativesç»å¸¸ä¼šå¯¼è‡´æˆ‘çš„ç»ˆç«¯å›è½¦å¤±æ•ˆï¼Œå¯ä»¥å‚è€ƒè§£å†³ Linux ç»ˆç«¯å›è½¦é”®å˜æˆå­—ç¬¦ M\n--removeï¼Œåˆ é™¤å¯é€‰é¡¹ï¼š\nsudo update-alternatives --remove python /usr/bin/python2.7 ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3linux%E4%B8%8B%E5%88%87%E6%8D%A2python%E7%89%88%E6%9C%AC/","summary":"\u003ch2 id=\"éœ€æ±‚èƒŒæ™¯\"\u003eéœ€æ±‚èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eç”¨è¿‡ Python çš„éƒ½çŸ¥é“ï¼ŒPython æ˜¯ä¸å‘åå…¼å®¹çš„ï¼Œä¹Ÿå°±æ˜¯ Python3.X å¼€å‘çš„ç¨‹åºï¼Œä½¿ç”¨ Python2.X ç¯å¢ƒå°±æ— æ³•æ­£å¸¸è¿è¡Œã€‚å› ä¸ºå¾ˆå¤šè¯­æ³•éƒ½æ”¹å˜äº†ã€‚ç°åœ¨æ¥è§¦åˆ°çš„å¤§éƒ¨åˆ† Python ç¨‹åºéƒ½æ˜¯ Python3.X å¼€å‘çš„ï¼Œä½†æ˜¯å¶å°”ä¹Ÿä¼šé‡åˆ°ä½¿ç”¨ Python2.X çš„æ—¶å€™ã€‚è¿™å°±éœ€è¦çµæ´»åˆ‡æ¢ç‰ˆæœ¬ã€‚\u003c/p\u003e","title":"Linux ä¸‹åˆ‡æ¢ Python ç‰ˆæœ¬"},{"content":"ä¿ç•™ç°åœº ImportError: No module named \u0026#39;ConfigParser\u0026#39; Command \u0026#34;python setup.py egg_info\u0026#34; failed with error code 1 in è§£å†³æ–¹æ³• åœ¨ Python 3.x ç‰ˆæœ¬åï¼ŒConfigParser.py å·²ç»æ›´åä¸º configparser.py æ‰€ä»¥å‡ºé”™ï¼\nå¯ä»¥åˆ‡æ¢ Python2 æ‰§è¡Œã€‚\nä¹Ÿå¯ä»¥å°è¯•å°†æ–‡ä»¶é‡å‘½åä¸ºConfigParser.pyã€‚\nä»¥ä¸‹ä¸ºå‚è€ƒï¼Œæ¯ä¸ªäººå®‰è£…è·¯å¾„å¯èƒ½ä¸ä¸€æ ·ï¼Œå¯ä»¥å…¨å±€æœç´¢configparser.pyã€‚\ncp /usr/lib/python3.7/configparser.py /usr/lib/python3.7/ConfigParser.py ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3python-no-module-named-configparser/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eImportError: No module named \u003cspan class=\"s1\"\u003e\u0026#39;ConfigParser\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eCommand \u003cspan class=\"s2\"\u003e\u0026#34;python setup.py egg_info\u0026#34;\u003c/span\u003e failed with error code \u003cspan class=\"m\"\u003e1\u003c/span\u003e in\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cp\u003eåœ¨ Python 3.x ç‰ˆæœ¬åï¼Œ\u003ccode\u003eConfigParser.py\u003c/code\u003e å·²ç»æ›´åä¸º \u003ccode\u003econfigparser.py\u003c/code\u003e æ‰€ä»¥å‡ºé”™ï¼\u003c/p\u003e\n\u003cp\u003eå¯ä»¥åˆ‡æ¢ Python2 æ‰§è¡Œã€‚\u003c/p\u003e\n\u003cp\u003eä¹Ÿå¯ä»¥å°è¯•å°†æ–‡ä»¶é‡å‘½åä¸º\u003ccode\u003eConfigParser.py\u003c/code\u003eã€‚\u003c/p\u003e","title":"è§£å†³ Python No module named 'ConfigParser'"},{"content":"ä¿ç•™ç°åœº åœ¨ LaTeX ç¼–è¯‘ä¸­æŠ¥é”™ï¼šMissing character: There is no (U+00A0) (U+00A0) in font JetBrains Monoã€‚\næ¢ç©¶åŸå›  å¦‚æœè¦ææ¸…æ¥šå…·ä½“åŸå› ï¼Œå°±å¾—ä»å­—ç¬¦ä¸å­—ç¬¦ç¼–ç è¯´èµ·äº†ã€‚è§£å†³åŠæ³•ç›´æ¥è·³åˆ°ä¸‹ä¸€èŠ‚å§ã€‚\nå­—ç¬¦ï¼Œå°±æ˜¯â€œaâ€ï¼Œâ€œAâ€ï¼Œâ€œä½ â€ç­‰ä¹¦å†™ç¬¦å·ã€‚\nå­—ç¬¦é›†ï¼Œé€šå¸¸å°±æ˜¯æŸç§è¯­è¨€å­—ç¬¦é›†åˆï¼Œæ¯”å¦‚è‹±è¯­å°±æ˜¯ASCII å­—ç¬¦é›†ï¼Œä¸­æ–‡æœ‰GBK å­—ç¬¦é›†ç­‰\næ³¨æ„ï¼Œä¸æ˜¯æ¯ç§è¯­è¨€åªå¯¹åº”ä¸€ç§å­—ç¬¦é›†ï¼ˆæ¯”å¦‚ GB2312ï¼ŒGBKï¼ŒGB18030 éƒ½åŒ…å«äº†å¸¸ç”¨æ±‰å­—ï¼Œåè€…æ˜¯å‰è€…çš„è¶…é›†ï¼‰ï¼Œè€Œä¸”å­—ç¬¦é›†ä¹Ÿä¸æ˜¯åªå¯¹åº”ä¸€ç§è¯­è¨€ï¼Œä¾‹å¦‚ Unicode å­—ç¬¦é›†å°±åŒ…å«æ‰€æœ‰è¯­è¨€å­—ç¬¦ï¼Œå­—ç¬¦é›†åªæ˜¯è®¾è®¡è€…ä¸ºäº†ç»™å­—ç¬¦ç¼–ç ï¼ˆCode Point/Numberingï¼‰è®¾è®¡ç¼–ç æ—¶ï¼Œä¸ºäº†æ”¶å½•åˆ°å‘½åçš„å­—ç¬¦é›†åˆï¼Œä½†æ˜¯é€šå¸¸è®¾è®¡è€…éƒ½ä¸ºå­—ç¬¦é›†è®¾è®¡äº†å¯¹åº”çš„ç¼–ç è§„èŒƒã€‚\nå­—ç¬¦ç¼–ç ,ç»™å­—ç¬¦é›†é‡Œçš„å­—ç¬¦ç¼–å·ã€‚\nç¼–ç é¡µï¼Œåœ¨ unicode å‘æ˜ä¹‹å‰ï¼Œå„ä¸ªåœ°åŒºéƒ½ç”¨ 2 å­—èŠ‚ç¼–ç è‡ªå·±çš„å­—ç¬¦é›†ï¼Œç›¸åŒçš„ç¼–ç å¯¹åº”ä¸åŒçš„å­—ç¬¦ï¼Œä¸ºäº†æœ¬åœ°åŒ–ï¼ŒWindows å‘æ˜äº†ç¼–ç é¡µï¼Œæ¥å¯¹åº”ä¸åŒçš„å­—ç¬¦é›†ã€‚\nå­—ç¬¦ç¼–ç ï¼Œå¯¹ç»™å®šçš„å­—ç¬¦ç¼–ç ç¼–ç æˆå­—èŠ‚è¡¨ç¤ºã€‚\næ—©æœŸï¼Œå­—ç¬¦è¢«ç¼–å·åï¼Œå­˜å‚¨æ—¶å°±æŒ‰ç…§ç¼–å·çš„æ–¹å¼å­˜å‚¨ï¼Œæ²¡æœ‰ encoding çš„è¿‡ç¨‹ï¼Œåæ¥å‘æ˜ Unicode åï¼Œå‘ç°å¦‚æœæŒ‰ç…§ Unicode çš„ç¼–å·ç›´æ¥å­˜å‚¨çš„è¯ï¼Œå¯¹äºè‹±æ–‡å­—ç¬¦å°±æœ‰å¾ˆå¤§å­˜å‚¨æµªè´¹ï¼Œå› ä¸ºä»»æ„å­—ç¬¦éƒ½éœ€è¦ 2 å­—èŠ‚å­˜å‚¨ï¼Œåæ¥äººä»¬å‘æ˜ UTF-8 è¿™ç§ç¼–ç æ–¹å¼ï¼Œè¿™æ · UTF-8 å°±å¯ä»¥ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºè‹±æ–‡å­—ç¬¦ï¼Œ2 ä¸ªä»¥ä¸Šå­—èŠ‚è¡¨ç¤ºæ±‰å­—å­—ç¬¦ã€‚\nå­—ä½“ï¼Œå®šä¹‰äº†å­—ç¬¦çš„å›¾å½¢è¡¨ç¤ºï¼Œç°åœ¨çš„è½¯ä»¶å±•ç¤ºå­—ç¬¦æ—¶ç”¨ Unicode è¡¨ç¤ºï¼Œå­—ä½“æ˜¯ Unicode ç¼–ç å’Œå­—ç¬¦å›¾å½¢çš„æ˜ å°„ï¼Œè€Œä»¥å¾€æ¯”å¦‚ WindowsCMD æ§åˆ¶å°ï¼Œæ²¡æœ‰å¯¹åº” Unicodeï¼Œåˆ™ç”¨ç¼–ç é¡µæ¥åŒºåˆ†ï¼Œæ‰€ä»¥å­—ä½“å°±æ˜¯å­—ç¬¦ç¼–ç é‡‘å’Œä»£ç é¡µåˆ°å­—ç¬¦å›¾å½¢çš„æ˜ å°„ã€‚\næ–‡æœ¬æ–‡ä»¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œéƒ½æ˜¯ä¸€ç³»åˆ—çš„å­—èŠ‚æµï¼Œå¦‚æœä¸å‘Šè¯‰æ–‡æœ¬ç¼–è¾‘å™¨è¯¥æ–‡ä»¶çš„ç¼–ç æ–¹å¼ï¼Œç¼–è¾‘å™¨ä¼šå°è¯•ç”¨é»˜è®¤çš„ç¼–ç ï¼ˆä¾èµ–äºæ“ä½œç³»ç»Ÿè®¾ç½®ï¼‰åˆæˆ–è€…è‡ªå·±æ¢æµ‹ï¼ˆdetectï¼Œæ¯”å¦‚æ–‡ä»¶å¼€å¤´æœ‰ FFEF æˆ–è€… EFFF å­—èŠ‚å°±è¡¨æ˜ UTF-16 ç¼–ç ï¼Œæœ‰å¾ˆå¤š 10ï¼Œ110 å¼€å¤´çš„å­—èŠ‚ï¼Œå¾ˆå¯èƒ½æ˜¯ UTF-8 ç¼–ç ï¼‰å¹¶å°è¯•è§£ç ï¼Œå¦‚æœæ²¡æœ‰çŒœå¯¹ï¼Œé‚£å°±ä¼šæ˜¾ç¤ºä¹±ç ã€‚\nå›åˆ°å‡ºé”™çš„é—®é¢˜ï¼Œæç¤ºæˆ‘ä»¬åœ¨å­—ä½“ JetBrains Monoä¸­æ²¡æœ‰U+00A0ï¼Œæˆ‘ä»¬æœç´¢ä¸€ä¸‹å°±çŸ¥é“è¿™æ˜¯ä¸€ä¸ª Unicode å­—ç¬¦NO-BREAK SPACEã€‚æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„äº†è§£ä¹ŸçŸ¥é“äº†ï¼Œå­—ä½“å°±æ˜¯å­—ç¬¦ç¼–ç åˆ°å­—ç¬¦å›¾åƒçš„æ˜ å°„ï¼Œä½†æ˜¯ä¸€ä¸ªå­—ä½“å°¤å…¶æ˜¯ä¸€äº›æœ‰ä¸“é—¨ç”¨é€”çš„å­—ä½“ï¼ˆæ¯”å¦‚ JetBrains Mono è®¾è®¡åˆè¡·æ˜¯ä¸ºè½¯ä»¶å·¥ç¨‹æ˜¾ç¤ºä»£ç ç”¨çš„ï¼‰ï¼Œå®ƒä¸ä¼šæ˜ å°„æ‰€æœ‰çš„å­—ç¬¦ï¼ŒJetBrains Mono è¿™ä¸ªå­—ä½“é‡Œå°±æ²¡æœ‰æ˜ å°„ U+00A0ã€‚è¿™å°±å¯¼è‡´åœ¨ LaTeX ç¼–è¯‘æ—¶æ— æ³•åœ¨å­—ä½“ä¸­æ‰¾åˆ°å¯¹åº”çš„å­—ç¬¦å›¾åƒæ˜¾ç¤ºã€‚\næ‰€æœ‰è§£å†³åŠæ³•å°±æ˜¯è¦ä¸æ›¿æ¢æ‰è¿™ä¸ªå­—ç¬¦ï¼Œè¦ä¸æ¢ä¸ªå­—ä½“ã€‚\nè§£å†³æ–¹æ³• VSCode æ­£åˆ™æœç´¢\\U00A0å³å¯æœç´¢åˆ°ç›¸å…³å­—ç¬¦ï¼Œå°†å…¶æ›¿æ¢æˆç©ºæ ¼ã€‚\nå‚è€ƒ å­—ç¬¦ï¼Œå­—ç¬¦é›†ï¼Œå­—ç¬¦ç¼–ç ï¼Œç¼–ç é¡µï¼Œå­—ä½“ - ç®€ä¹¦\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3latex%E7%BC%96%E8%AF%91missing-character-there-is-no-u-00a0-u-00a0-in-font/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eåœ¨ LaTeX ç¼–è¯‘ä¸­æŠ¥é”™ï¼šMissing character: There is no   (U+00A0) (U+00A0) in font JetBrains Monoã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eå¦‚æœè¦ææ¸…æ¥šå…·ä½“åŸå› ï¼Œå°±å¾—ä»å­—ç¬¦ä¸å­—ç¬¦ç¼–ç è¯´èµ·äº†ã€‚è§£å†³åŠæ³•ç›´æ¥è·³åˆ°ä¸‹ä¸€èŠ‚å§ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eå­—ç¬¦\u003c/strong\u003eï¼Œå°±æ˜¯â€œaâ€ï¼Œâ€œAâ€ï¼Œâ€œä½ â€ç­‰ä¹¦å†™ç¬¦å·ã€‚\u003c/p\u003e","title":"è§£å†³ LaTeX ç¼–è¯‘ Missing character There is no (U+00A0) in font"},{"content":"ä½¿ç”¨ MobaXertm è¿æ¥æœåŠ¡å™¨åï¼Œæƒ³è¦åœ¨è¿è¡Œä¸€ä¸ªä¸‹è½½ä»»åŠ¡ï¼Œä½¿ç”¨\u0026amp;æŒ‚åœ¨åå°åï¼Œé€€å‡º MobaXtermï¼Œåå°çš„ä»»åŠ¡ä¹Ÿéšä¹‹ä¸­æ–­ï¼Œäºæ˜¯æœåˆ°è¿™ä¸ªnohupå‘½ä»¤ï¼Œå¯ä»¥å®Œæˆæˆ‘çš„éœ€æ±‚ã€‚\nnohupæ„æ€æ˜¯ No Hang Upï¼Œä¸è¦æŒ‚èµ·çš„æ„æ€ï¼Œå³ä½¿é€€å‡ºç»ˆç«¯ä¹Ÿä¸ä¼šä¸­æ–­ä»»åŠ¡ã€‚\nä¸ºäº†æ–¹ä¾¿ä»¥åæŸ¥é˜…ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹å…³äºåå°è¿è¡Œç›¸å…³çš„å‘½ä»¤ã€‚é¦–å…ˆæ˜¯æœ€å¸¸ç”¨çš„\u0026amp;ç¬¦å·ã€‚\n\u0026amp; åå°è¿è¡Œ æ¯”å¦‚æ‰§è¡Œç¼–è¯‘ä»»åŠ¡æ—¶é€šå¸¸ä¼šå ç”¨ç»ˆç«¯å‰å°ï¼Œè¿™æ—¶å€™æ— æ³•å†æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œé™¤éå†å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå¯¹äºæœ‰ GUI ç•Œé¢æ—¶ï¼Œå†å¼€ä¸€ä¸ªç»ˆç«¯å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœæ˜¯æœåŠ¡å™¨å°±åªèƒ½å†æƒ³åŠæ³•äº†ã€‚ \u0026amp;å¯ä»¥å°†å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹æ”¾åœ¨åå°è¿è¡Œï¼Œå¦‚ï¼š\n$ make \u0026gt; make.log 2\u0026gt;\u0026amp;1 \u0026amp; [1] 16586 2\u0026gt;\u0026amp;1 æ˜¯å°†æ ‡å‡†å‡ºé”™é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼Œè¿™é‡Œçš„æ ‡å‡†è¾“å‡ºå·²ç»é‡å®šå‘åˆ°äº†make.logæ–‡ä»¶ï¼Œå³å°†æ ‡å‡†å‡ºé”™ä¹Ÿè¾“å‡ºåˆ°make.logæ–‡ä»¶ä¸­ã€‚æœ€åä¸€ä¸ª\u0026amp;ï¼Œæ˜¯è®©è¯¥å‘½ä»¤åœ¨åå°æ‰§è¡Œã€‚ è¯•æƒ³2\u0026gt;1ä»£è¡¨ä»€ä¹ˆï¼Œ2ä¸\u0026gt;ç»“åˆä»£è¡¨é”™è¯¯é‡å®šå‘ï¼Œè€Œ1åˆ™ä»£è¡¨é”™è¯¯é‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶1ï¼Œè€Œä¸ä»£è¡¨æ ‡å‡†è¾“å‡ºï¼›æ¢æˆ2\u0026gt;\u0026amp;1ï¼Œ\u0026amp;ä¸1ç»“åˆå°±ä»£è¡¨æ ‡å‡†è¾“å‡ºäº†ï¼Œå°±å˜æˆé”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºã€‚\nåœ¨åå°è¿è¡Œmakeè¿›è¡Œç¼–è¯‘ï¼Œå¹¶å°†è¾“å‡ºç»“æœï¼ˆé”™è¯¯å’Œæ­£å¸¸è¾“å‡ºï¼‰éƒ½ä¿å­˜åˆ°make.logæ–‡ä»¶ä¸­ï¼Œæäº¤ä»»åŠ¡æˆåŠŸåï¼Œä¼šæ˜¾ç¤ºè¿›ç¨‹ IDï¼Œç¼–è¯‘çš„è¿›ç¨‹ ID ä¸º 16586ã€‚\næœ‰äº†è¿›ç¨‹ ID æˆ‘ä»¬å¯ä»¥ç›‘æ§ï¼Œä¹Ÿå¯ä»¥ä¸­æ–­è¿›ç¨‹ï¼š\n# æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ ps -ef | grep 16586 # ä¸­æ–­è¿›ç¨‹ kill -9 16586 ä½†æ˜¯ä½¿ç”¨ \u0026amp;æ—¶å…³é—­ç»ˆç«¯åï¼Œè¿›ç¨‹ä¹Ÿä¼šéšä¹‹å…³é—­ã€‚å¦‚æœæƒ³è¦åœ¨åå°æŒç»­è¿è¡Œç¨‹åºï¼Œå°±éœ€è¦nohupå‘½ä»¤ã€‚\nnohup ä½¿ç”¨ $ nohup make \u0026gt; make.log 2\u0026gt;\u0026amp;1 \u0026amp; [1] 112233 å‘½ä»¤åŠŸèƒ½åŒä¸Šï¼Œä½†æ˜¯ç»ˆç«¯å…³é—­ï¼Œåå°ç¨‹åºä¹Ÿä¼šç»§ç»­æ‰§è¡Œã€‚\nNOTEï¼šç»ˆç«¯å…³é—­ï¼Œæ˜¯æŒ‡å¸¦ GUI çš„ç•Œé¢é‡Œç»ˆç«¯ï¼Œå¦‚æœä½¿ç”¨ SSH ç­‰ç™»é™†ï¼Œæ¯”å¦‚ä½¿ç”¨ MobaXtermï¼Œä¸€ä¸ª session ç›¸å½“äºä¸€ä¸ªç™»é™†è´¦æˆ·ï¼Œå¦‚æœå¼‚å¸¸é€€å‡ºäº†è¿™ä¸ªè´¦æˆ·ï¼Œé‚£ä¹ˆåå°æ‰§è¡Œçš„ç¨‹åºä¹Ÿä¼šä¸­æ–­ã€‚å¦‚æœéœ€è¦ç»§ç»­æ‰§è¡Œï¼Œéœ€è¦æ­£å¸¸é€€å‡ºè´¦æˆ·ï¼Œæ‰§è¡Œexitå‘½ä»¤ã€‚\næ±‡æ€» fg # å°†åå°ä¸­çš„å‘½ä»¤è°ƒè‡³å‰å°ç»§ç»­è¿è¡Œ bg # å°†ä¸€ä¸ªåœ¨åå°æš‚åœçš„å‘½ä»¤ï¼Œå˜æˆç»§ç»­æ‰§è¡Œ (åœ¨åå°æ‰§è¡Œ) jobs # æŸ¥çœ‹å½“å‰æœ‰å¤šå°‘åœ¨åå°è¿è¡Œçš„å‘½ä»¤ kill %num # ç»ˆæ­¢è¿›ç¨‹num \u0026amp; # åŠ åœ¨å‘½ä»¤åå¯ä»¥å°†å…¶ç½®äºåå°è¿è¡Œ ctrl + z # ç½®äºåå°ï¼Œå¹¶ä¸”æš‚åœä¸å¯æ‰§è¡Œ ctrl + c # ç»ˆæ­¢å‰å°è¿›ç¨‹ ctrl + \\ # é€€å‡º ctrl + d # ç»“æŸå½“å‰è¾“å…¥(å³ç”¨æˆ·ä¸å†ç»™å½“å‰ç¨‹åºå‘å‡ºæŒ‡ä»¤)ï¼Œé‚£ä¹ˆLinuxé€šå¸¸å°†ç»“æŸå½“å‰ç¨‹åº ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-nohup%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C/","summary":"\u003cp\u003eä½¿ç”¨ MobaXertm è¿æ¥æœåŠ¡å™¨åï¼Œæƒ³è¦åœ¨è¿è¡Œä¸€ä¸ªä¸‹è½½ä»»åŠ¡ï¼Œä½¿ç”¨\u003ccode\u003e\u0026amp;\u003c/code\u003eæŒ‚åœ¨åå°åï¼Œé€€å‡º MobaXtermï¼Œåå°çš„ä»»åŠ¡ä¹Ÿéšä¹‹ä¸­æ–­ï¼Œäºæ˜¯æœåˆ°è¿™ä¸ª\u003ccode\u003enohup\u003c/code\u003eå‘½ä»¤ï¼Œå¯ä»¥å®Œæˆæˆ‘çš„éœ€æ±‚ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-nohup åå°è¿è¡Œ"},{"content":"æŠ€æœ¯æ²¡å­¦å¤šå°‘ï¼Œæ•™ç¨‹ä¸‹æ»¡äº†ç¡¬ç›˜ï¼Œä¸€ç›´æƒ³ä¸“é—¨éƒ¨ç½² NAS æ¥å­˜æ–‡ä»¶ï¼Œä½†æ˜¯ä¸€æ¥è¦èŠ±é’±ï¼ŒäºŒæ¥æ­å»º NAS æ²¡æœ‰ç»éªŒæ€•éƒ¨ç½²ä¸å¥½ï¼Œæ²¡æœ‰ç°åœ¨ç¡¬ç›˜ç›´è¿èˆ’é€‚ï¼Œæ‰€ä»¥å°†å°±ç”¨å§ã€‚\nè‡ªä»æœ‰å¤©å¿˜äº†å¿˜äº†ä¼‘çœ ç”µè„‘ï¼Œä¸€ä¸ªè‡ªåŠ¨å¤‡ä»½ä»»åŠ¡å¼€å¯ï¼Œåœ¨ 40 åº¦çš„é«˜æ¸©å¤©ï¼Œæ»¡é€Ÿè·‘äº†ä¸€å¤©ï¼Œä¸‹ç­å›æ¥ç¡¬ç›˜ç›´æ¥æŠ¥åºŸã€‚è¿™å°±åŠ é€Ÿæˆ‘æŠ˜è…¾éƒ¨ç½² NAS çš„è¿›ç¨‹ã€‚\nå‡†å¤‡é˜¶æ®µ å¨è”é€šçš„å‡ æ¬¾ä¸­æ„çš„ NAS æ”¾è´­ç‰©è½¦å¾ˆä¹…äº†ï¼Œå¦‚æœç¡¬ç›˜æ²¡æœ‰è¿™ä¹ˆæ—©åæ‰ï¼Œå¯èƒ½åœ¨åŒåä¸€å°±ä¹°æ•´æœºäº†ï¼Œç°åœ¨ç¦»åŒåä¸€è¿˜æ—©ï¼Œç¡¬ä»¶ä»·æ ¼éƒ½ä¸ä¾¿å®œï¼Œæƒ³æ¥æƒ³å»è¿˜æ˜¯ä¹°äºŒæ‰‹ç¡¬ä»¶æ”’ä¸€å°æ›´åˆ’ç®—ã€‚å¦‚æœä¹°æ•´æœºï¼Œç¡¬ç›˜åŠ  NAS ä¸»æœºå°±å¾—äº”åƒå¤§æ´‹ï¼Œåªæ˜¯ç”¨æ¥å­˜æ–‡ä»¶ï¼Œéƒ¨ç½²ä¸ª Jellyfin çœ‹ç”µå½±ç”¨ï¼Œå±å®å¥¢ä¾ˆäº†ã€‚\nï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥\nä¹°äºŒæ‰‹å°±å¾—ä»é›¶å¼€å§‹å­¦ã€‚ç”Ÿå‘½ä¸ä¼‘ï¼ŒæŠ˜è…¾ä¸æ­¢ã€‚ç»è¿‡ä¸€æ¬¡å®Œæ•´çš„ NAS æ”’æœºè¿‡ç¨‹å‘ç°ï¼Œå…¶å® NAS å°±æ˜¯å®‰è£…äº†ä¸“ç”¨ç³»ç»Ÿçš„ä¸€å°ç”µè„‘è€Œå·²ã€‚è¿™ä¸ªä¸“ç”¨ç³»ç»Ÿå°±æ˜¯é¢å‘ç½‘ç»œå­˜å‚¨å¼€å‘çš„ï¼Œå¦‚ç¾¤æ™–ï¼Œå¨è”é€šï¼Œå¼€æºçš„ OMVï¼ŒFreeNAS ç­‰ç­‰ã€‚\næ—¢ç„¶æ˜¯ä¸€å°ç”µè„‘ï¼Œå…¶å®æ”’ NAS å°±å’Œæ”’ç”µè„‘ä¸€æ ·ï¼Œé€‰é…å¥½ä»¥ä¸‹å‡ å¤§ä»¶å³å¯ã€‚\nCPU ä¸»æ¿ æ•£çƒ­å™¨ æœºç®± å†…å­˜ ç”µæº æœºç®±é£æ‰‡ ä¸‹é¢åˆ†åˆ«ä»‹ç»åœ¨æ”’æœºè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›æ¦‚å¿µï¼Œå‚æ•°åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚\nCPU CPU å‹å·å­—æ¯æ•°å­—éƒ½æ˜¯ä»€ä¹ˆæ„æ€ \u003c!DOCTYPE html\u003e Responsive Image Intel æ˜¯è‹±ç‰¹å°”çš„è‹±æ–‡åç§°ï¼Œä¹Ÿæ˜¯ç›®å‰çƒ­é—¨çš„ CPU å“ç‰Œï¼› â€œé…·ç¿â€ä»£è¡¨è‹±ç‰¹å°”å“ç‰Œä¸‹é¢å‘æ™®é€šæ¶ˆè´¹è€…çš„ä¸€ä¸ª CPU ç³»åˆ—ï¼Œä¸€èˆ¬åˆ’åˆ†ä¸º Coreï¼ˆé…·ç¿ï¼‰ã€Pentiumï¼ˆå¥”è…¾ï¼‰ã€Celeronï¼ˆèµ›æ‰¬ï¼‰ã€Xeonï¼ˆè‡³å¼ºï¼‰ã€Atomï¼ˆå‡ŒåŠ¨ï¼‰ç­‰ï¼› i5 ä»£è¡¨è¿™æ¬¾ CPU å®šä½ä¸­ç«¯ï¼Œåœ¨å…¶ä¸‹é¢è¿˜æœ‰ i3ï¼Œåœ¨å…¶ä¸Šé¢è¿˜æœ‰ i7 å’Œ i9ï¼ŒåŒä¸€ä»£ä¸­ï¼Œæ•°å­—è¶Šå¤§ï¼Œæ€§èƒ½è¶Šå¼ºï¼›ä½†æ˜¯ä¸åŒä»£ - æ•°ä¹‹é—´ï¼Œæ€§èƒ½ä¸èƒ½ç›´æ¥ç›¸æ¯”ï¼Œæ¯”å¦‚ 12 ä»£çš„ i5 åœ¨ç†è®ºæ€§èƒ½ä¸Šæ˜¯å¼ºäº 10 ä»£ i7 çš„ã€‚ 12 ä»£è¡¨è¿™æ¬¾ CPU çš„ä»£æ•°ï¼Œè¯´æ˜å…¶å·²ç»å‘å±•åˆ°ç¬¬åäºŒä»£äº†ï¼Œæ•°å­—è¶Šå¤§è¶Šæ–°ï¼› 600 è¿™ä¸‰ä½æ•°å­—ä»£è¡¨ Intel SKU å‹å·åˆ’åˆ†ï¼Œä¸€èˆ¬æ¥è¯´ Core i7 æœ‰å›ºå®šå‡ ä¸ª SKUï¼Œæ¯”æ–¹è¯´ 700ï¼›Core i5 æœ‰ 600/500/400ï¼›Core i3 æœ‰ 300/100 ç­‰ç­‰ï¼Œä¸€èˆ¬æ¥è¯´æ•°å­—è¶Šå¤§è¯´æ˜éš¶å±çš„ Core ç³»åˆ—è¶Šé«˜çº§ï¼ŒåŒçº§åˆ«ä¸‹æ¯”è¾ƒï¼Œæ•°å­—è¶Šå¤§é¢‘ç‡è¶Šé«˜ï¼Œæ¢å¥è¯è¯´æ€§èƒ½å°±è¶Šå¼ºï¼Œæ¯”æ–¹è¯´ Core i5-8600 é»˜è®¤ 3.1GHzï¼Œç¿é¢‘ 4.3GHzï¼Œæ¯” Core i5-8500 é»˜è®¤ 3.0GHzï¼Œç¿é¢‘ 4.1GHz è¦å¼ºã€‚ K å¸¦ K çš„è¡¨ç¤ºä¸é”é¢‘ï¼Œå¯ä»¥é…åˆ Z ç³»åˆ—ä¸»æ¿è¿›è¡Œè¶…é¢‘æ“ä½œï¼Œé€‚åˆä¼šè¶…é¢‘ç©å®¶ä½¿ç”¨ï¼Œæ¯”æ–¹è¯´ i7-12700Kï¼Œi5-12600K ç­‰ F å¸¦ F çš„è¡¨ç¤ºä¸å¸¦é›†æˆæ˜¾å¡ï¼Œä½ å¿…é¡»é…åˆç‹¬ç«‹æ˜¾å¡ä½¿ç”¨ï¼› å½“ç„¶ï¼Œé™¤äº†ä¾‹å­ä¸­çš„è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¿˜ä¼šé‡åˆ°å…¶å®ƒ CPU å‹å·çš„åç¼€ï¼š\nKï¼šè¡¨ç¤ºæ”¯æŒè¶…é¢‘ä¸”å†…ç½®æ ¸æ˜¾çš„ CPU å‹å·ï¼Œä¾‹å¦‚å‹å·ï¼ši5-12600Kã€i7-12700Kï¼› Fï¼šè¡¨ç¤ºæ— å†…ç½®æ ¸æ˜¾ï¼Œä¾‹å¦‚å‹å·ï¼ši5-12400Fã€i7-12700Fï¼› KFï¼šè¡¨ç¤ºæ”¯æŒè¶…é¢‘ä¸”æ— å†…ç½®æ ¸æ˜¾çš„ CPU å‹å·ï¼Œä¾‹å¦‚å‹å·ï¼ši5-12600KFï¼Œi7-12700KFã€‚ Tï¼šè¡¨ç¤ºä½åŠŸè€—ç‰ˆï¼Œç›¸åŒå‹å·ä¸‹åŠŸè€—æ›´ä½ï¼Œæ€§èƒ½ä¹Ÿå·®ä¸€äº›ï¼Œä¾‹å¦‚å‹å·ï¼ši7-10700Tï¼› X/XEï¼šè¡¨ç¤ºè‡³å°Šæ——èˆ°çº§ï¼Œä¾‹å¦‚å‹å·ï¼ši9-10980XEã€‚ KSï¼šå¯ä»¥ç†è§£ä¸ºå®˜æ–¹è¶…é¢‘ç‰ˆï¼Œæå‡äº†ä¸»é¢‘çš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚ i9-9900K å’Œ i9-9900KSï¼Œi9-9900KS å‡ºå‚çš„ä¸»é¢‘è¦é«˜äº Kï¼Œä¾‹å¦‚å‹å·ï¼ši9-9900KSã€‚ Uï¼šä½ç”µå‹ï¼Œæ€§èƒ½å¼±äº›ä½†åŠŸè€—ä½ï¼Œé€šå¸¸å‡ºç°åœ¨è½»è–„æœ¬ä¸­ï¼Œä¸¾ä¾‹å‹å·ï¼ši7 10510Uï¼› Hï¼šæ ‡å‹ï¼Œæ€§èƒ½å¼ºï¼Œé€šå¸¸å‡ºç°åœ¨æ¸¸æˆæœ¬ä¸­ï¼Œä¸¾ä¾‹å‹å·ï¼ši5-11300H Yï¼šè¶…ä½ç”µå‹ï¼Œæ€§èƒ½å¾ˆå¼±åŠŸè€—éå¸¸ä½ï¼Œé€šå¸¸å‡ºç°åœ¨è½»è–„æœ¬ä¸­ï¼Œä¸¾ä¾‹å‹å·ï¼ši3-10110Yï¼› HKï¼šä¸€èˆ¬ä½¿ç”¨åœ¨ Intel é«˜ç«¯å‘çƒ§çº§ CPU ä¸Šï¼Œå¯è¶…é¢‘ï¼Œä¸¾ä¾‹å‹å·ï¼ši9-11980HKï¼› Gï¼šG1ã€G4 ä»¥åŠ G7 ç­‰ï¼ŒG åé¢çš„æ•°å­—è¡¨ç¤ºæ ¸æ˜¾æ€§èƒ½å¼ºå¼±ï¼Œæ•°å­—è¶Šå¤§ä»£è¡¨æ ¸æ˜¾æ€§èƒ½è¶Šå¼ºï¼Œé€šå¸¸æ•°å­—å°äº 4 çš„æ˜¯é›†æˆçš„æ™®é€šè¶…é«˜æ¸… (UHD) æ ¸æ˜¾ï¼Œå¤§äºç­‰äº 4 çš„æ˜¯é›†æˆçš„é«˜æ€§èƒ½é”ç‚¬ (Iris) æ ¸æ˜¾ã€‚Intel ç§»åŠ¨ç‰ˆ CPU åç¼€ï¼Œä¸¾ä¾‹å‹å·ï¼ši5-1155G7ã€i3-1115G4ã€i3-1005G1ï¼› HQï¼šæ ‡å‡†ç”µå‹ï¼ŒQ æ¿è½½å››æ ¸ï¼Œæ—©æœŸçš„è€åç¼€ï¼Œä¸¾ä¾‹å‹å·ï¼ši7-7700HQï¼› MQï¼šæ ‡å‡†ç”µå‹ï¼ŒQ æ’æ‹”å››æ ¸ï¼Œæ—©æœŸçš„è€åç¼€ï¼Œä¸¾ä¾‹å‹å·ï¼ši7-4810MQï¼› Mï¼šæ—©æœŸåç¼€ M å°±æ˜¯ç§»åŠ¨ç«¯ CPUï¼Œåªæ˜¯ä¸ºäº†ä¸å°å¼æœºåŒºåˆ«å¼€ï¼Œä¸¾ä¾‹å‹å·ï¼ši7-2620Mã€‚ ä¸»æ¿ ATXï¼ŒMicro-ATXï¼ŒMini-ITX åŒºåˆ« åœ¨äº†è§£ä¹°å•¥ä¸»æ¿æ—¶ï¼Œä¸å…ä¼šçœ‹åˆ°å„ç§ TXï¼Œæ¯”å¦‚æˆ‘ä¹°çš„è¿™å—ä¸ƒå½©è™¹ B460iTX ä¸»æ¿ï¼Œç®€ç§°å°±æ˜¯ä¸ƒå½©è™¹ B460iï¼Œè¿˜æœ‰ä¸å¸¦æœ€åå­—æ¯içš„ã€‚ä»–ä»¬æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿå…¶å®è¿™å°±æ˜¯è¡¨ç¤ºäº†ä¸»æ¿çš„å°ºå¯¸ã€‚ä¸»æ¿å°ºå¯¸å¸¸è§çš„æœ‰ä¸‰ç§å°ºå¯¸ï¼š\næ ‡å‡†-ATXï¼š30.5 å˜ç±³ x 24.4 å˜ç±³\nMicro-ATXï¼š24.4 cm x 24.4 cm\nMini-ITXï¼š17 å˜ç±³ x 17 å˜ç±³\n\u003c!DOCTYPE html\u003e Responsive Image ä¸€èˆ¬æ”’æœºä¼šç”¨æ ‡å‡† ATXï¼Œæˆ–è€… MATX ä¹Ÿå¾ˆå¸¸ç”¨ï¼Œè€Œ ITX å°±å¸¸è¢«ç”¨æ¥æ­å»ºä½åŠŸè€—çš„æœåŠ¡å™¨ï¼Œå¦‚æˆ‘ä»¬è¦æ­å»ºçš„ NASã€‚å› ä¸ºå®ƒæ˜¯ 7*24 å°æ—¶ä¸é—´æ–­å·¥ä½œçš„ï¼ŒåŠŸè€—æ˜¯éœ€è¦å¤šè€ƒè™‘çš„ã€‚\næ•£çƒ­å™¨ é£å†·ä¸æ°´å†· \u003c!DOCTYPE html\u003e Responsive Image é£å†·å°±æ˜¯æ•£çƒ­é³ç‰‡åŠ é£æ‰‡ã€‚æ•£çƒ­é³ç‰‡ä¼šç©¿å…¥é“œç®¡ï¼Œé“œç®¡ä¸ä¸‹æ–¹åº•åº§ç›¸è¿ï¼Œåº•åº§ä¸ CPU ç›´æ¥æ¥è§¦ã€‚CPU çƒ­é‡é“œç®¡åº•åº§ä¼ å¯¼ç»™é“œç®¡ï¼Œé“œç®¡ä¼ å¯¼ç»™æ•£çƒ­é³ç‰‡ï¼Œæ•£çƒ­é³ç‰‡é“œç®¡é£æ‰‡æ•£çƒ­ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ°´å†·å°±æ˜¯æ°´å†·å¤´åŠ é£æ‰‡ã€‚ç®€å•ç†è§£å°±æ˜¯é£å†·çš„é“œç®¡æ¢æˆäº†æ¶²ä½“ã€‚æ¶²ä½“æµåŠ¨ä¼ å¯¼æ¯”é“œç®¡æ›´å¿«ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé£å†·æ›´å®‰å…¨ï¼Œæ¯”è¾ƒç®€å•ï¼Œæ€§èƒ½ä¸Šé™æ¯”è¾ƒä½ï¼Œè€Œæ°´å†·åœ¨å¤–è§‚ã€æ€§èƒ½æ–¹é¢æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œç¼ºç‚¹å°±æ˜¯ç›¸å¯¹æ¯”è¾ƒè´µï¼Œè¿˜æœ‰æ¼æ¶²é£é™©ï¼Œä¸è¿‡ç°åœ¨çš„æ°´å†·æ¼æ¶²æ¦‚ç‡å¾ˆå°ã€‚ç»†åˆ†çš„è¯é£å†·è¿˜æœ‰ä¸‹å‹å¼ï¼Œä¸‹å‹å¼æ¯”è¾ƒé€‚åˆ itx å°æœºç®±ï¼Œè€Œå¡”å¼å°±é€‚åˆæ™®é€šæœºç®±ï¼Œæ°´å†·ä¹Ÿåˆ†ä¸€ä½“å¼æ°´å†·å’Œåˆ†ä½“å¼æ°´å†·ï¼Œå¸¸è§çš„éƒ½æ˜¯ä¸€ä½“å¼æ°´å†·ã€‚\næœºç®± å¡”å¼ï¼Œæœºæ¶ä¸åˆ€ç‰‡åŒºåˆ« å¡”å¼æœåŠ¡å™¨å¤–å½¢å’Œæ™®é€šå®¶ç”¨æœåŠ¡å™¨ç›¸å·®ä¸å¤šï¼Œå¡”å¼ä¸»æœºåœ¨ä¸»æ¿æ‰©å±•ä¸Šæœ‰ä¼˜åŠ¿ï¼Œä¸€èˆ¬é¢„ç•™æ¥å£è¾ƒå¤šï¼Œæ–¹ä¾¿æ‰©å±•ã€‚é€‚ç”¨äºå…¥é—¨å’Œå·¥ä½œç«™ã€‚\næœºæ¶æœåŠ¡å™¨çš„å¤–è§‚å®‰è£…å·¥ä¸šæ ‡å‡†ç»Ÿä¸€è®¾è®¡ï¼Œéœ€è¦é…åˆæœºæŸœç»Ÿä¸€ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºä¼ä¸šæœåŠ¡å™¨å¯†é›†éƒ¨ç½²ã€‚æœºæ¶æœåŠ¡å™¨å› ä¸ºéœ€è¦å¯†é›†ç´§å‡‘ï¼Œæ‰€ä»¥åœ¨è®¾è®¡æ—¶ä¼šéå¸¸ç´§å‡‘ï¼Œå……åˆ†åˆ©ç”¨æœ‰é™çš„ç©ºé—´ã€‚æœºæ¶æœåŠ¡å™¨å®½åº¦ 19 è‹±å¯¸ï¼Œé«˜åº¦ä»¥ U ä¸ºå•ä½ (1U=1.75 è‹±å¯¸ =44.45 æ¯«ç±³ï¼‰.\nåˆ€ç‰‡æœåŠ¡å™¨çš„ä¸»ä½“ç»“æ„æ˜¯ä¸»ä½“æœºç®±ä¸­å¯ä»¥æœ‰è®¸å¤šçƒ­æ‹”æ’çš„ä¸»æ¿ï¼Œæ¯ä¸€å—ä¸»æ¿éƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œè‡ªå·±çš„ç³»ç»Ÿï¼Œè¿™äº›ä¸»æ¿å¯ä»¥é›†åˆæˆä¸€ä¸ªæœåŠ¡å™¨é›†ç¾¤ï¼Œåœ¨é›†ç¾¤æ¨¡å¼ä¸‹å¯ä»¥è¿æ¥èµ·æ¥æä¾›æ›´å¥½çš„ç½‘ç»œä»¥åŠå…±äº«èµ„æºã€‚\nå…¨å¡”ï¼Œä¸­å¡”ä¸å°å¡”åŒºåˆ« å½¢å®¹çš„æ˜¯æœºç®±çš„å¤§å°ã€‚\næ™®é€šæœºç®±ï¼Œåªèƒ½æ”¾ mATX ä¸»æ¿å’Œä¸€ä¸ªæ ‡å‡†ç”µæºï¼Œä»…æœ‰ 1-2 ä¸ªå…‰é©±ä½ï¼›\nä¸­å¡”æœºç®± ATï¼ŒX ä¸»æ¿ç”šè‡³æ˜¯ EATX ä¸»æ¿å’Œä¸€ä¸ªæ ‡å‡†ç”µæºï¼Œæ‹¥æœ‰ 3-4 ä¸ªå…‰é©±ä½ï¼›\nå…¨å¡”æœºç®±ï¼Œå¯ä»¥åœ¨ä¸»æ¿ä¸Šä¸‹çš„ä½ç½®éƒ½å®‰æ”¾ä¸€ä¸ªç”µæºï¼Œä¸€å…±æ”¾ä¸¤ä¸ªç”µæºæ‹¥æœ‰ 4 ä¸ªä»¥ä¸Šçš„å…‰é©±ä½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å†…å­˜ ç”µæº å…¨æ¨¡ç»„ï¼ŒåŠæ¨¡ç»„ä¸éæ¨¡ç»„åŒºåˆ« æ€»ç»“ä¸€å¥è¯å°±æ˜¯èƒ½ä¸èƒ½æ‹”æ‰ä¸éœ€è¦çš„ä¾›ç”µçº¿ï¼Œèƒ½æ‹”å¤šå°‘ã€‚\néæ¨¡ç»„ ä¸€ä¸ªéƒ½ä¸èƒ½æ‹”ï¼Œç”µæºçº¿ç›´æ¥ä»ç”µæºå†…éƒ¨å¼•å‡ºï¼Œè¾“å‡ºçº¿ç¼†å›ºå®šï¼Œæ— æ³•è¿›è¡Œæ‰©å±•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åŠæ¨¡ç»„ \u003c!DOCTYPE html\u003e Responsive Image èƒ½æ‹”ä¸€éƒ¨åˆ†ï¼Œè¾“å‡ºè®¾è®¡ä¸Šæ—¢æœ‰éæ¨¡ç»„ç”µæºçš„ç›´å‡ºçº¿ï¼Œåˆæœ‰å…¨æ¨¡ç»„ç”µæºçš„æ‰©å±•æ¥å£ã€‚\nå…¨æ¨¡ç»„ èƒ½å…¨æ‹”ï¼Œæ‰€æœ‰çº¿ç¼†éƒ½èƒ½æŒ‰éœ€æ’ä¸Šã€‚å› ä¸ºä¸€èˆ¬ä¸€å—ä¸»æ¿ä¸ä¼šæŠŠæ‰€æœ‰ç”µæºçº¿éƒ½ç”¨ä¸Šï¼Œè¿™æ ·åªéœ€è¦æ’ä¸Šè‡ªå·±éœ€è¦çš„çº¿ç¼†å³å¯ï¼Œå¯ä»¥ä¿è¯èµ°çº¿æ¸…æ¥šï¼Œæœºç®±æ¸…çˆ½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é‡‘ç‰Œï¼Œé“¶ç‰Œå’Œé“œç‰Œå•¥åŒºåˆ« é‡‘ç‰Œï¼Œé“¶ç‰Œï¼Œé“œç‰ŒæŒ‡çš„æ˜¯ç”µæºçš„è½¬æ¢æ•ˆç‡ã€‚æœ‰é’›é‡‘ã€ç™½é‡‘ã€é‡‘ç‰Œã€é“¶ç‰Œã€é“œç‰Œã€ç™½ç‰Œç­‰æ¡£æ¬¡ï¼Œæ¡£æ¬¡è¶Šé«˜ï¼Œè½¬æ¢æ•ˆç‡ä¹Ÿè¶Šé«˜ï¼Œä½†æˆæœ¬ä¹Ÿè¶Šé«˜ï¼ŒåŠŸç‡è¶Šå°ï¼Œç›¸å¯¹æˆæœ¬ä¹Ÿè¶Šé«˜ã€‚æ¯ä¸ªâ€œç‰Œâ€å¯¹åº”çš„æ”»ç•¥è½¬æ¢æˆ–è€…å‚æ•°ä¹Ÿæ˜¯ä¸åŒçš„ã€‚\nç™½ç‰Œï¼šæœ€ä½è¦æ±‚æ˜¯ 20-100% è´Ÿè½½ä¸‹ï¼Œè½¬æ¢æ•ˆç‡å¿…é¡»è¾¾åˆ° 80%ï¼›\né“œç‰Œï¼šä¸ä¸ŠåŒæ¡ä»¶å¤§äºç­‰äº 82%ï¼Œ85%@50% è´Ÿè½½ï¼›\né“¶ç‰Œï¼šå¤§äºç­‰äº 85%ï¼Œ88%@50% è´Ÿè½½ï¼›\né‡‘ç‰Œï¼šå¤§äºç­‰äº 87%ï¼Œ90%@50% è´Ÿè½½ï¼›\nç™½é‡‘ç‰Œï¼š90%@20% è´Ÿè½½ã€92%@50% è´Ÿè½½ã€89%@100% è´Ÿè½½ã€‚\né’›é‡‘ç‰Œï¼šè¦æ±‚ 10%ã€20%ã€50%ã€100% è´Ÿè½½ä¸‹çš„æ•ˆç‡åˆ†åˆ«ä¸º 90%ã€94%ã€96%ã€92%ã€‚\nä¸¾ä¸ªä¾‹å­ï¼š 500w é‡‘ç‰Œå’Œ 500w é“œç‰Œï¼Œéƒ½èƒ½å¸¦åŠ¨ 500w åŠŸè€—çš„ç”µè„‘ã€‚é‡‘ç‰Œç”µæºåœ¨ 100% è´Ÿè½½æ—¶ï¼Œè½¬æ¢ç‡è¶…è¿‡ 87%ï¼Œå¯ä»¥ç®—ä¸€ä¸‹ï¼Œ500/0.87=575w è€—ç”µã€‚ é“œç‰Œ 100% è´Ÿè½½è½¬æ¢ç‡è¶…è¿‡ 82% 500/0.82=610wè€—ç”µï¼Œç®€å•è¯´å°±æ˜¯å¥½ç”µæºçœç”µã€‚\nç¡¬ç›˜ å›ºæ€ç¡¬ç›˜ æœºæ¢°ç¡¬ç›˜ å‚ç›´ç›˜ PMR ä¸å ç“¦ç›˜ SMR åŒºåˆ« ä½œè€…ï¼šä¸€èµ·å­¦ç‚¹ä»€ä¹ˆ é“¾æ¥ï¼šhttps://www.zhihu.com/question/369882964/answer/2227127605\nå‚ç›´ç£è®°å½•ï¼ˆPerpendicular magnetic recordingï¼ŒPMRï¼‰ï¼Œä¹Ÿç§°ä¸ºä¼ ç»Ÿç£æ€§è®°å½• (conventional magnetic recordingï¼ŒCMR)ï¼Œç”±äº SMR å…¶å®ä¹Ÿæ˜¯å‚ç›´å¼ç£è®°å½•çš„ä¸€ç§ï¼Œåªæ˜¯ç›¸è¾ƒäºå‚ç›´ç£è®°å½•æ–¹å¼ç£ç›˜ä¼˜åŒ–äº†å†™å…¥å¯†åº¦ï¼Œå› æ­¤ä¸ºäº†é¿å…è¢«è®¤ä¸ºæ‰€æœ‰å‚ç›´ç£è®°å½•çš„ç¡¬ç›˜éƒ½æ˜¯ SMR ç¡¬ç›˜ï¼Œå¤§å®¶ä¹Ÿä¹ æƒ¯æŠŠé SMR çš„å‚ç›´æœºæ¢°ç›˜ç§°ä¸º CMRã€‚\næœ€å¼€å§‹ç”±äºç¡¬ç›˜å®¹é‡æå‡çš„éœ€æ±‚ï¼Œç£æ€§è®°å½•é¢—ç²’çš„å°ºå¯¸éœ€è¦ä¸æ–­ä¸‹é™ï¼Œå¯¼è‡´å‡ºç°äº†ç”µç£å­¦ä¸Šçš„è¶…é¡ºç£æ•ˆåº”ï¼ˆè¶…é¡ºç£æ€§ï¼šå½“æŸäº›å…·æœ‰ç£æ€§çš„é¢—ç²’å°äºæŸä¸ªå°ºå¯¸æ—¶ï¼Œå¤–åœºäº§ç”Ÿçš„ç£å–å‘åŠ›å¤ªå°è€Œæ— æ³•æŠµæŠ—çƒ­æ‰°åŠ¨çš„å¹²æ‰°ï¼Œè€Œå¯¼è‡´å…¶ç£åŒ–æ€§è´¨ä¸é¡ºç£ä½“ï¼ˆé€šä¿—æ¥è¯´å°±æ˜¯æŒ‡ææ–™å¯¹ç£åœºå“åº”å¾ˆå¼±çš„ç£ï¼‰ç›¸ä¼¼ã€‚ï¼‰ï¼Œè¿™å°±é™åˆ¶äº†ç¡¬ç›˜å®¹é‡æå‡çš„æ½œåŠ›ã€‚\nä¹‹å‰ç¡¬ç›˜å‚å•†ä½¿ç”¨çºµå‘ï¼ˆå¹³è¡Œï¼ŒLongitudinal Magnetic Recordingï¼ŒLMRï¼‰è¯»å†™æŠ€æœ¯ï¼Œç£æ€§è®°å½•é¢—ç²’çš„æ˜“ç£åŒ–æ–¹å‘ç›¸å¯¹äºç¢Ÿç‰‡æ˜¯å¹³è¡Œçš„ï¼Œé¢—ç²’æ²¿ç€ç¢Ÿç‰‡åœ†å‘¨ä»¥ç«¯å¯¹ç«¯æ’åˆ—ï¼Œæ‰€ä»¥ä¾¿æœ‰æœºä¼šå‡ºç° SSï¼ˆå—ï¼‰å’Œ NNï¼ˆåŒ—ï¼‰çš„äº’æ–¥æ’åˆ—ã€‚å½“é¢—ç²’çš„å°ºå¯¸ä¸æ–­ä¸‹é™è€Œå¯†åº¦ä¸æ–­æå‡ï¼Œåœ¨å®¤æ¸©çš„æƒ…å†µä¸‹é¢—ç²’ä¾¿ä¼šå¯¹éšæœºçš„çƒ­è¿åŠ¨å¼‚å¸¸æ•æ„Ÿï¼Œå¤±å»ç¨³å®šæ€§ï¼Œå¯¼è‡´å‡ºç°æ¯”ç‰¹ï¼ˆ0 å’Œ 1ï¼‰ç¿»è½¬çš„ç°è±¡ï¼Œè®°å½•çš„æ•°æ®å› æ­¤è¢«ç ´åã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è€Œä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œåæ¥å°±å¼€å‘å‡ºäº†å‚ç›´ç£è®°å½•æŠ€æœ¯ï¼ˆPerpendicular Recordingï¼‰çš„ç¡¬ç›˜ï¼Œè¿™ç§ç¡¬ç›˜ä¸­çš„ç£æ€§è®°å½•é¢—ç²’çš„æ˜“ç£åŒ–æ–¹å‘ç›¸å¯¹äºç¢Ÿç‰‡æ˜¯å‚ç›´çš„ï¼Œå…è®¸ä½¿ç”¨å•æç£å¤´é…åˆç£è®°å½•ä»‹è´¨ä¸‹çš„è½¯ç£å±‚å°†ä¿¡æ¯å†™å…¥ç£è®°å½•ä»‹è´¨ä¸­ï¼Œè¿™æ ·é‡‡ç”¨å…·æœ‰ç›¸åŒé¥±å’Œç£åŒ–å¼ºåº¦çš„ææ–™æ‰€åˆ¶å¤‡çš„å‚ç›´å†™å…¥ç£å¤´ï¼Œèƒ½äº§ç”Ÿè¿œå¤šäºä¼ ç»Ÿå†™å…¥ç£å¤´æ‰€èƒ½äº§ç”Ÿçš„ç£åœºã€‚æ›´å¤§çš„å†™å…¥ç£åœºå…è®¸æˆ‘ä»¬ä½¿ç”¨å…·æœ‰æ›´é«˜ç£å„å‘å¼‚æ€§çš„ææ–™æ¥åˆ¶å¤‡ç£è®°å½•ä»‹è´¨ï¼Œè€Œç£å„å‘å¼‚æ€§è¶Šå¼ºï¼Œå‡ºç°è¶…é¡ºç£æ€§æ•ˆåº”çš„ä¸´ç•Œä½“ç§¯å°±è¶Šå°ï¼Œå› æ­¤ï¼Œç¢Ÿç‰‡ä¸­çš„å­˜å‚¨å¯†åº¦å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦å†…å¾—åˆ°è¿›ä¸€æ­¥çš„æé«˜ã€‚\nä½†æ˜¯è¿™æ ·è™½ç„¶æé«˜äº†ç¡¬ç›˜çš„å­˜å‚¨å¯†åº¦ï¼Œä½†æ˜¯å¾ˆå¿«ä¹Ÿå°±è¾¾åˆ°äº†ç“¶é¢ˆï¼Œå·¥ç¨‹å¸ˆåˆå¼€å§‹æƒ³æ–°çš„æ–¹æ³•æ¥æé«˜ç¡¬ç›˜çš„å­˜å‚¨å¯†åº¦ï¼Œè¿™å°±è¯ç”Ÿäº†å¤§å®¶éƒ½çŸ¥é“çš„ SMR å ç“¦ç›˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å ç“¦å¼æœºæ¢°ç¡¬ç›˜ï¼ˆShingled magnetic recordingï¼ŒSMRï¼Œç›´è¯‘ä¸ºåˆ†å±‚ç£è®°å½•ï¼‰ï¼šä¹Ÿæ˜¯ä¸€ç§ç”¨äºç¡¬ç›˜é©±åŠ¨å™¨çš„ç£å­˜å‚¨æ•°æ®è®°å½•æŠ€æœ¯ï¼Œå¯æé«˜å­˜å‚¨å¯†åº¦å’Œæ¯ä¸ªé©±åŠ¨å™¨çš„æ•´ä½“å­˜å‚¨å®¹é‡ã€‚å¸¸è§„çš„ç¡¬ç›˜é©±åŠ¨å™¨é€šè¿‡å†™å…¥å½¼æ­¤å¹³è¡Œè€Œä¸é‡å çš„ç£é“æ¥è®°å½•æ•°æ®ï¼Œä¾‹å¦‚ PMRã€‚è€Œå ç“¦ç£è®°å½•æŠ€æœ¯çš„ç¡¬ç›˜å†™å…¥çš„æ–°ç£é“åˆ™ä¸å…ˆå‰å†™å…¥çš„ç£é“éƒ¨åˆ†é‡å ï¼Œä»è€Œä½¿å…ˆå‰çš„ç£é“æ›´çª„ï¼Œå› æ­¤èƒ½æ‹¥æœ‰æ›´é«˜çš„ç£é“å¯†åº¦ï¼Œè¿›è€Œæé«˜ç£ç›˜å®¹é‡ã€‚ä½¿ç”¨å ç“¦ç£æŠ€æœ¯çš„ç£é“ç›¸äº’é‡å ï¼Œä¸ç”¨ä½œå±‹é¡¶çš„ç“¦ç‰‡å †å æ–¹å¼ç±»ä¼¼ã€‚ä¹‹æ‰€ä»¥èƒ½è¿™æ ·åšæ˜¯å› ä¸ºç£ç›˜å†™å…¥ç£å¤´ç”±äºç‰©ç†ä¸Šçš„åŸå› æ¯”è¯»å–ç£å¤´å®½ä¸Šè®¸å¤šï¼Œå› è€Œç”±æ­£å¸¸æ–¹å¼å†™å…¥çš„ç£é“å®½åº¦è¿œæ¯”è¯»å–ç£å¤´æ‰€éœ€çš„ç£é“å®½åº¦æ¥å¾—å®½ï¼Œæ­¤å¤–ä¸ºäº†é¿å…ç£é“é—´ç›¸äº’å¹²æ‰°ï¼Œç£é“å’Œç£é“ä¹‹é—´å…¶å®è¿˜æœ‰ä¸€éƒ¨åˆ†ç©ºéš™ï¼Œå› æ­¤è¯»å–ä¿¡æ¯çš„ç£é“ä»…å æ‰€æœ‰ç£é“çš„å¾ˆå°ä¸€éƒ¨åˆ†ï¼Œå¾ˆå¤§çš„ç£ç›˜ç©ºé—´éƒ½è¢«æµªè´¹äº†ï¼Œåªæ˜¯å› ä¸ºæŠ€æœ¯åŸå› æˆ‘ä»¬ä¸èƒ½å°†å†™å…¥ç£å¤´åˆ¶ä½œçš„å’Œè¯»å–ç£å¤´ä¸€æ ·å°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç”±äºç£é“å­˜åœ¨é‡å ï¼Œå ç“¦å¼ç£ç›˜çš„å†™å…¥è¿‡ç¨‹è¾ƒä¸ºå¤æ‚ã€‚å¦‚æœæˆ‘ä»¬éšæœºå†™å…¥ä¸€ä¸ªç£é“ï¼Œç”±äºå†™å…¥ç£å¤´çš„å®½åº¦æ¯”ç£é“å®½ï¼Œå› æ­¤å†™å…¥ä¼šå½±å“åˆ°ä¸´è¿‘ç£é“ï¼Œå¦‚æœè¿™ä¸ªä¸´è¿‘ç£é“æœ‰æ•°æ®ï¼Œè¿™äº›æ•°æ®å°±ä¹Ÿéœ€è¦ä¾æ¬¡é‡å†™ä»¥å…æ•°æ®è¢«ç ´åï¼Œä¾æ­¤ç±»æ¨ã€‚å› æ­¤ï¼ŒSMR ç£ç›˜ä¸€èˆ¬åˆ†æˆå¾ˆå¤šå—åªèƒ½è¿½åŠ æ•°æ®ï¼ˆé¡ºåºå†™å…¥ï¼‰çš„åŒºåŸŸï¼ˆZoneï¼‰ï¼Œè¿™å’Œå›ºæ€ç¡¬ç›˜çš„é—ªå­˜é¡µç®¡ç†ç±»ä¼¼ã€‚ä½¿ç”¨â€œè®¾å¤‡ç®¡ç†â€ï¼ˆdevice-managedï¼‰æ–¹å¼çš„ SMR ç£ç›˜é€šè¿‡å†…éƒ¨å›ºä»¶å¤„ç†äº† SMR ç£ç›˜å¤æ‚çš„å†™å…¥é—®é¢˜ï¼Œä»è€Œå¯¹ç”¨æˆ·å°è£…äº† SMR ç£ç›˜çš„å¤æ‚æ€§ï¼Œä»¤ç”¨æˆ·å¯ä»¥åƒä½¿ç”¨ PMR ç¡¬ç›˜ä¸€æ ·éšæœºå†™å…¥ SMR ç¡¬ç›˜ã€‚å…¶ä»– SMR ç£ç›˜åˆ™ä½¿ç”¨â€œä¸»æœºç®¡ç†â€ï¼ˆhost-managedï¼‰æ–¹å¼ï¼Œéœ€è¦æ“ä½œç³»ç»Ÿè¯†åˆ« SMR ç£ç›˜å¹¶æ‹¥æœ‰èƒ½å¯¹ SMR ç£ç›˜è¿›è¡Œæ­£ç¡®é¡ºåºå†™å…¥çš„é©±åŠ¨ç¨‹åºæ‰èƒ½è¢«æ­£å¸¸ä½¿ç”¨ã€‚\nå ç“¦ç›˜ç›¸è¾ƒäºå‚ç›´ç›˜æ€§èƒ½ä¹Ÿæœ‰ä¸€å®šä¸‹é™ï¼Œå› ä¸ºä¼ ç»Ÿçš„ CMR ç¡¬ç›˜ç£é“ä¹‹é—´ä¸ä¼šäº’ç›¸å¹²æ‰°ï¼Œå†™å…¥æ•°æ®æ—¶å¯ä»¥ä»»æ„è¿›è¡Œå†™å…¥ï¼Œè€Œå ç“¦ç›˜ç”±äºåœ¨ä¸€ä¸ªç£é“å†™å…¥æ•°æ®æ—¶ä¸å¯é¿å…ä¼šå½±å“ç›¸é‚»çš„ç£é“ï¼Œéœ€è¦å°†ä¸‹ä¸€ç£é“çš„æ•°æ®å…ˆæ‹¿å‡ºï¼ˆæš‚æ—¶æ”¾å…¥ç¡¬ç›˜ CMR ç¼“å†²åŒºï¼‰å†è¿›è¡Œå†™å…¥ï¼Œè€Œæ¢å¤ä¸‹ä¸€ç£é“çš„æ•°æ®åˆ™åˆä¼šå¯¹ä¸‹ä¸‹ç£é“çš„æ•°æ®è¿›è¡Œå½±å“ï¼Œåˆ™åˆéœ€è¦å…ˆå–å‡ºä¸‹ä¸‹ç£é“çš„æ•°æ®ï¼Œå› æ­¤å®Œæˆä¼ ç»Ÿå‚ç›´ç¡¬ç›˜ä¸€æ¬¡çš„å†™å…¥æ“ä½œï¼Œå ç“¦å¼ç¡¬ç›˜åˆ™éœ€è¦å¤šæ¬¡çš„å†™å…¥ï¼ŒåŒæ ·çš„æ•°æ®é‡éœ€è¦æ›´å¤šçš„å†™å…¥æ“ä½œï¼Œä¹Ÿä¼šå¢å¤§æŸåçš„æ¦‚ç‡ã€‚\né…ä»¶é€‰è´­ é…ä»¶ å‹å· ä»·æ ¼ ä¸»æ¿ ä¸ƒå½©è™¹ B460-ITX 300^1^ CPU I3-10100 600^1^ æœºç®± Invasion X5 330^1^ ç”µæº æŒ¯åå†°å±±é‡‘è¶ 550W 300^1^ ç¡¬ç›˜ è¥¿æ•° HC550 1390 SSD xxxxx æ—§ç”µè„‘æ‹†çš„ æ•£çƒ­å™¨ åˆ©æ°‘ AX120 RSE 74 å†…å­˜æ¡ é…·å…½ DDR4 16G 245 åˆè®¡ 3239 1.è¡¨ç¤ºäºŒæ‰‹ä»·æ ¼\nä¸»æ¿ åˆšå…¥é—¨å…¶å®æœ€å¤´ç–¼çš„å°±æ˜¯åˆ°åº•ä¹°ä»€ä¹ˆå‹å·ï¼Œå› ä¸ºå„ä¸ªé…ä»¶ä¹‹é—´åˆæœ‰å…¼å®¹é—®é¢˜ï¼Œæ¯”å¦‚ç›¸ä¸­äº†ä¸€æ¬¾ ITX çš„æœºç®±ï¼Œä½†æ˜¯ä¸»æ¿å´æ˜¯ ATX çš„ï¼Œä¸»æ¿éƒ½æ”¾ä¸è¿›æœºç®±é‡Œï¼Œè¿™å°±å¾ˆéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦ç¡®å®šä¸€ä¸ªé…ä»¶ï¼Œå…¶ä½™é…ä»¶éƒ½å®‰è£…è¿™ä¸ªé…ä»¶çš„è§„æ ¼å»ä¹°ï¼Œå¹¶ä¸”éƒ½è¦é€‚é…è¿™ä¸ªé…ä»¶ã€‚é‚£ä¹ˆè¿™ä¸ªé…ä»¶æœ€å¥½çš„é€‰æ‹©å°±æ˜¯ä¸»æ¿ã€‚\næˆ‘ä»¬å…ˆç¡®å®šè‡ªå·±è¦ä¹°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ä¸»æ¿ï¼Œè®©æ‰€æœ‰å…¶ä»–çš„é…ä»¶éƒ½é€‚é…è¿™ä¸ªä¸»æ¿ã€‚é€‰æ‹©ä¸»æ¿çš„å¥½å¤„æ˜¯ï¼Œä¸»æ¿ä¸Šå„ä¸ªæ¥å£å°±èƒ½ä½“ç°å‡ºè¿™å° NAS çš„æ€§èƒ½ã€‚ä¸è‡³äºé…ä»¶ä¹°çš„å¤ªç¦»è°±ã€‚\næœºç®± å¾®å‹æœºç®±ä¹° ITX æ¿ï¼ŒMINI æœºç®±ä¹° M-ATX æ¿å’Œ ITX æ¿ï¼Œä¸­å¡”æœºç®±ä¹° ATX æ¿ã€‚å› ä¸º NAS æ˜¯ä¸ªæœåŠ¡å™¨ï¼Œå¯èƒ½ä¼šæ°¸è¿œè¢«æ”¾åœ¨å¢™è§’ï¼Œæ‰€ä»¥é¢œå€¼ä¸é‡è¦ï¼Œå®ç”¨æ‰æ˜¯ç‹é“ï¼Œä¹°ä¸€ä¸ªç›˜ä½å¤šå®ç”¨æ€§å¼ºçš„å°±è¡Œã€‚\nåœ¨å‰æœŸå‡†å¤‡æ—¶çœ‹åˆ°å¾ˆå¤šæ¨èè¿å¹¿çš„æœºç®±ï¼Œæœ¬æ¥å†³å®šè¦ä¹°å®ƒï¼Œä½†æ˜¯äº†è§£åˆ° NAS çš„æœ¬è´¨å°±æ˜¯ä¸€å°ç”µè„‘ä¸»æœºæ—¶ï¼Œæ„è¯†åˆ°ä¸ºä½•ä¸ä¹°ä¸ªç”µè„‘æœºç®±ï¼Ÿä¸ºä½•è¦é€‰æ‹©æˆå“çš„æœºç®±ï¼Ÿè™½ç„¶æˆå“çš„ NAS æœºç®±æœ‰ç¡¬ç›˜ä½ï¼Œå¯çƒ­æ’æ‹”ã€‚ä½†æ˜¯æˆ‘ä¸ºå•¥è¦å»æ’æ‹”æœåŠ¡å™¨ä¸Šçš„ç¡¬ç›˜ï¼Ÿ\nå½“æˆ‘æœ‰è¿™ä¸ªæ„è¯†åï¼Œæˆ‘çš„é€‰æ‹©ä¸€ä¸‹å­å¤šäº†èµ·æ¥ï¼Œæˆ‘æœ€ç»ˆé€‰äº†é€›æ·˜å®å¶ç„¶çœ‹çš„ Invasion æœºç®±ã€‚ååˆ†ç®€çº¦çš„å¤–å½¢ï¼Œç”šè‡³è¿˜æœ‰ç»ç’ƒä¾§ç½©ï¼Œå››æ ¼é‡‘å±ç¡¬ç›˜æ¶ä¸“ä¸º NAS æ‰“é€ ã€‚åªè¦ä¸åˆ°ä¸‰ç™¾å—ã€‚äºæ˜¯ç«‹é©¬è½¬å¤´æ‰“å¼€å°é»„é±¼ï¼Œä¸€æœè¿˜çœŸæœ‰è½¬å–çš„ï¼Œå‡çº§ç‰ˆçš„ 8 æ ¼ç¡¬ç›˜æ¶åªè¦ 330ã€‚æ”¶åˆ°è´§åä¹Ÿå¾ˆæ»¡æ„ï¼Œå‡ ä¹æ˜¯å…¨æ–°çš„ï¼Œç»ç’ƒè†œéƒ½æ²¡æœ‰æ’•ï¼Œè¿˜é€äº†ä¿©é£æ‰‡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image CPU é€‰æ‹© CPU å¯¹äºå°ç™½æ¥è¯´æœ€é‡è¦çš„å°±æ˜¯è¦é€‰æ‹©å¸¦æ ¸æ˜¾çš„ CPUï¼Œå› ä¸º NAS ä¸Šæ˜¾å¡å…¶å®æ²¡å¿…è¦ï¼ŒCPU çš„æ ¸æ˜¾å°±ç»°ç»°æœ‰ä½™äº†ï¼Œå¦‚æœæ—¢æ²¡æœ‰æ˜¾å¡ä¹Ÿæ²¡æœ‰æ ¸æ˜¾å°±ä¼šæ— æ³•äº®æœºã€‚æ‰€ä»¥é€‰æ‹© CPU æ—¶è¦é€‰æ‹©å¸¦æ ¸æ˜¾çš„ï¼Œä¹Ÿå°±æ˜¯ Intel çš„ CPU å‹å·ä¸å¸¦Fçš„ï¼Œæ¯”å¦‚æˆ‘æœ€ç»ˆé€‰æ‹©çš„ I3-10100ã€‚AMD çš„ CPU å‹å·æ ‡è¯†æˆ‘ä¹Ÿæ²¡å¼„æ¸…æ¥šï¼Œå¯ä»¥è‡ªå·±æœç´¢ä¸€ä¸‹è‡ªå·±æƒ³è¦çš„ CPU æ˜¯å¦æœ‰æ ¸æ˜¾ã€‚\nå…¶æ¬¡å°±æ˜¯åŠŸè€—ï¼Œå› ä¸º NAS è¦ 7*24 å°æ—¶è¿è¡Œï¼Œæ‰€ä»¥é€‰æ‹©æ€§èƒ½ä½ä¸€ç‚¹çš„ CPU å°±å¥½äº†ï¼Œå¦å¤–å°±æ˜¯éœ€è¦å…³æ³¨ CPU æ˜¯å¦æœ‰éŸ³è§†é¢‘è§£ç çš„èƒ½åŠ›ã€‚å› ä¸ºå¹³æ—¶çˆ±æŠ˜è…¾ï¼Œæƒ³ç€ä»¥åæŒ‡ä¸å®šåœ¨ NAS ä¸ŠæŠ˜è…¾äº›å•¥ï¼Œæ‰€ä»¥é€‰æ‹©äº†æ€§èƒ½ä¸ç®—ä½çš„ I3-10100ã€‚ä¸¤ä¸ªæœˆä½“éªŒä¸‹æ¥ï¼Œæ€§èƒ½è¿˜æ˜¯è¿‡å‰©äº†ï¼Œæ—¥å¸¸åŸºæœ¬ä¸Šéƒ½å¤„äºå¾…æœºçŠ¶æ€ï¼Œåªæœ‰å‘¨æœ«çœ‹ç”µå½±ä¼šç”¨ä¸€ä¸‹ï¼ŒCPU åˆ©ç”¨ç‡å¾ˆä½ï¼Œå¥½åœ¨æ—¥å¸¸åŠŸè€—åªæœ‰ 30Wã€‚-\n\u003c!DOCTYPE html\u003e Responsive Image å®‰è£… OVM (OpenMediaVaultt) å‚è€ƒè§†é¢‘ï¼šèœ—ç‰›æ˜Ÿé™…å®‰è£…å¼€æº NAS ç³»ç»Ÿ Openmediavault åŠåˆå§‹åŒ–é…ç½®ï¼ˆå¸æ³¢å›¾ï¼‰â€”â€”OMV ç³»åˆ—æ•™ç¨‹ 01\nä¸ºä»€ä¹ˆé€‰æ‹©å®ƒ OpenMediaVaultï¼ˆä»¥ä¸‹å‡ç®€ç§° OMVï¼‰æ˜¯é™¤ FreeNAS å¤–ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„å¼€æº NAS ç³»ç»Ÿã€‚\né¢„å¤‡è½¯ä»¶ä¸‹è½½ ä¸‹è½½ OpenMediaVaultt ç³»ç»Ÿï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ ISO æ ¼å¼ Old Stable ç‰ˆæœ¬ï¼Œè™½ç„¶æƒ³ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡å®‰è£…æ²¡æœ‰æˆåŠŸï¼Œé€‰æ‹©äº†æ—§ç‰ˆæœ¬å®‰è£…æˆåŠŸäº†ã€‚\nä¸‹è½½ å¾® PE å·¥å…·ç®±ï¼Œç”¨æ¥æ ¼å¼åŒ–ç³»ç»Ÿç›˜ï¼Œå¦‚æœæ˜¯æ–°ä¹°çš„ç³»ç»Ÿç›˜å°±ä¸éœ€è¦ä¸‹è½½ã€‚\nä¸‹è½½ Rufus è½»æ¾åˆ›å»º USB å¯åŠ¨ç›˜ï¼Œè¿™ä¸ªå¿…é¡»è¦ç”¨çš„ã€‚\nåˆ¶ä½œå¯åŠ¨ç›˜ éœ€è¦ä¸€ä¸ªå®¹é‡å¤§äº 4G çš„ U ç›˜ï¼Œç”¨ Rufus å°† OMV å†™å…¥ U ç›˜å³å¯ã€‚å®‰è£…æ—¶ä¼šä» U ç›˜å¯åŠ¨ï¼Œç„¶åå°†ç³»ç»Ÿå®‰è£…åˆ°æ’åœ¨ä¸»æ¿ä¸Šçš„ç³»ç»Ÿç›˜å†…ã€‚\nå¯åŠ¨ç›˜åˆ¶ä½œå°±ä¸è¯¦ç»†è¯´äº†ï¼Œéƒ½æ˜¯ä¸€é”®å¼æ“ä½œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ¶ä½œå®Œåè¿›å…¥ U ç›˜å†…æŸ¥çœ‹æ˜¯å¦å†™å…¥æˆåŠŸï¼ŒU ç›˜å†…æ˜¯å¦æœ‰æ–‡ä»¶ï¼Œæˆ–è€…æŸ¥çœ‹ä¸€ä¸‹ U ç›˜ä½¿ç”¨å¤§å°ï¼Œå¦‚æœæ¯”ç³»ç»Ÿ ISO å¤§å°è¿˜å°ï¼Œé‚£è‚¯å®šæ²¡æœ‰å†™æˆåŠŸã€‚æˆ‘å°±åˆ¶ä½œäº†ä¸‰éæ‰å‘ç°æ²¡æœ‰å†™æˆåŠŸï¼Œè™½ç„¶èƒ½çœ‹åˆ°å¯åŠ¨é€‰é¡¹ï¼Œä½†æ˜¯è¿›å…¥å®‰è£…å°±é»‘å±ï¼Œå› ä¸ºæ ¹æœ¬æ²¡æœ‰å¯ä»¥å®‰è£…çš„æ–‡ä»¶ã€‚\nå¦‚æœæ²¡æœ‰åˆ¶ä½œæˆåŠŸï¼Œå°è¯•æ ¼å¼åŒ–U ç›˜åé‡æ–°åˆ¶ä½œã€‚\nå®‰è£…è¿‡ç¨‹ å‚è€ƒè§†é¢‘å³å¯ï¼Œå¾ˆè¯¦ç»†ã€‚\nè¸©å‘è®°å½• # git sudo apt install git # python sudo apt install python # vim sudo apt install vim Docker é…ç½® å®‰è£… Portainer ç®¡ç†å®¹å™¨ æ›´æ¢å›½å†…é•œåƒæº \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç½‘æ˜“ http://hub-mirror.c.163.com ustc http://docker.mirrors.ustc.edu.cn é˜¿é‡Œäº‘ http://\u0026lt;ä½ çš„ ID\u0026gt;.mirror.aliyuncs.com æˆ–è€…ä½¿ç”¨ä¸€ä½ç½‘å‹æä¾›çš„ http://1nj0zren.mirror.aliyuncs.com å› ä¸ºå¯èƒ½æœ‰æœ‹å‹çœ‹äº†æ¯”è¾ƒè€çš„æ•™ç¨‹ï¼ˆæ¯”å¦‚æˆ‘ï¼Œ:( ï¼‰ï¼Œå¯èƒ½ä¼šç”¨åˆ°ä¸€äº›åœæ­¢æœåŠ¡çš„è¿›è¡Œï¼Œå¦‚ï¼š\nhttps://dockerhub.azk8s.cn https://reg-mirror.qiniu.com https://registry.docker-cn.com å¦‚æœæ— æ³•æ‹‰å–é•œåƒï¼Œæ£€æŸ¥æ˜¯å¦ç”¨äº†è¿™å‡ ä¸ªï¼Œå¦‚æœç”¨äº†è¯·æ¢é•œåƒæºã€‚\nå®‰è£… Jellyfin éƒ¨ç½²å½±éŸ³æœåŠ¡å™¨ å®‰è£… Transmission ä¸‹è½½ å®‰è£… qBittorrent ä¸‹è½½ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ·»åŠ  tracker list ngosang/trackerslist: Updated list of public BitTorrent trackers\n\u003c!DOCTYPE html\u003e Responsive Image å®‰è£… Jackett æœç´¢ç§å­ Docker ä¸­å®‰è£…ï¼Œé€‰æ‹©ç½‘æ˜“çš„é•œåƒï¼Œé˜¿é‡Œçš„é•œåƒå¤ªæ—§äº†ã€‚\né…ç½®ç«¯å£å·9117ï¼Œæ˜ å°„ä¸¤ä¸ªè·¯å¾„å³å¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å®‰è£…è¿‡ç¨‹å‚è€ƒHow to configure Jackett pluginã€‚\nç‚¹å‡»è¿™é‡Œä¸‹è½½æºç ï¼Œå¤åˆ¶å…¨æ–‡å¹¶ä¿å­˜ä¸ºjackett.pyæ–‡ä»¶ã€‚\nå¦‚æœæŒ‰ç…§ä»¥ä¸Šå®‰è£… qBittorrent é‚£ä¹ˆä¿å­˜è·¯å¾„ä¸ºå…±äº«æ–‡ä»¶å¤¹ä¸‹appdata/qBittorrent/nova3/engines/ã€‚\nå¦‚æœæ²¡æ‰¾åˆ°ï¼Œæ‰¾æ‰¾æ˜¯å¦æœ‰ä»¥ä¸‹è·¯å¾„ã€‚\n~/.local/share/data/qBittorrent/nova3/engines/ # æˆ–è€… ~/.local/share/qBittorrent/nova3/engines/ å†åœ¨ç›¸åŒè·¯å¾„ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶jackett.jsonï¼Œå†™å…¥ä»¥ä¸‹é…ç½®ï¼š\n{ \u0026#34;api_key\u0026#34;: \u0026#34;YOUR_API_KEY_HERE\u0026#34;, \u0026#34;tracker_first\u0026#34;: false, // å¦‚æœä½ ç™»å½• OMV çš„åœ°å€æ˜¯ 192.168.0.1 \u0026#34;url\u0026#34;: \u0026#34;http://192.168.0.1:9117\u0026#34; } å®‰è£… Hlink ç¡¬é“¾æ¥æŒç»­åšç§ ä¸‹è½½çš„æ–‡ä»¶åå¤ªè¿‡æ‚ä¹±ï¼Œå¯ä»¥ç”¨ TMM ç­‰åˆ®å‰Šå·¥å…·åˆ®å‰Šï¼Œé‡å‘½åï¼Œå»ºç«‹å½±éŸ³åº“ã€‚ä½†æ˜¯é‡å‘½ååå°±æ— æ³•åšç§ã€‚æƒ³èµ·äº† Linux æœ‰ç¡¬é“¾æ¥åŠŸèƒ½ï¼Œåœ¨æ¯å¤©å­¦å‘½ä»¤-ln è½¯ç¡¬é“¾æ¥è¿™ç¯‡æ–‡ç« ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚ç®€è¨€ä¹‹å°±æ˜¯åˆ›å»ºçš„ç¡¬é“¾æ¥å¯ä»¥ä»»æ„ä¿®æ”¹æ–‡ä»¶åï¼Œçœ‹ä¸Šå»æ˜¯ä¸€ä»½æ‹·è´ï¼Œä½†æ˜¯å®é™…ä¸å ç”¨ç¡¬ç›˜ç©ºé—´ã€‚\nä¸‹è½½çš„æ–‡ä»¶å¤ªå¤šï¼Œåˆæ˜¯æ–‡ä»¶å¤¹åµŒå¥—ï¼Œæ‰‹åŠ¨åˆ›å»ºæ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰äººä¸“é—¨ä¸ºè¿™ä¸ªéœ€æ±‚å¼€æºäº†ä¸€ä¸ªé¡¹ç›®hlinkï¼Œå¯ä»¥æ‰¹é‡åˆ›å»ºç¡¬é“¾æ¥ã€‚è¿™é‡Œè¿˜æ˜¯ä»¥ä½¿ç”¨ Docker ä¸ºä¾‹ã€‚\né…ç½® Docker é•œåƒåï¼šlikun7981/hlink ç«¯å£å·ï¼š9090 ç›®å½•æ˜ å°„ï¼š/media : /root/sharedfolder ç¯å¢ƒå˜é‡ï¼šHLINK_HOMEï¼š/root/sharedfolder/appdata/hlink é€‰æ‹©è‡ªå·±æ”¾é…ç½®æ–‡ä»¶çš„ç›®å½•å³å¯\n/root/sharedfolder æ˜¯æˆ‘æŒ‚è½½çš„ç¡¬ç›˜çš„æ ¹ç›®å½•ï¼Œå»ºè®®æ˜ å°„æ ¹ç›®å½•ï¼Œä¸è¦åˆ›å»ºå¤šä¸ªç›®å½•ï¼Œæ¯”å¦‚æ˜ å°„/root/sharedfolder/movie å’Œ/root/sharedfolder/musicã€‚å› ä¸ºç¡¬é“¾æ¥ä¸æ”¯æŒè·¨ç›˜ç¬¦åˆ›å»ºï¼Œè™½ç„¶æˆ‘ä»¬æœ¬åœ° music å’Œ movie æ˜¯åœ¨ä¸€ä¸ªç›˜ç¬¦ï¼Œä½†æ˜¯è¿™æ ·æ˜ å°„åœ¨å®¹å™¨ä¸­å°±æ˜¯ä¸¤ä¸ªç›˜ï¼Œå°±ä¼šæ— æ³•åˆ›å»ºç¡¬é“¾æ¥ï¼Œæ‰€ä»¥åªæ˜ å°„ä¸€ä¸ªæ ¹ç›®å½•ã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image é…ç½® Hlink æµè§ˆå™¨è¾“å…¥ IP:9090ï¼Œæ‰“å¼€é…ç½®ç•Œé¢ã€‚\næ·»åŠ ä¸€ä¸ªæ–°é…ç½®ï¼Œæ³¨é‡Šååˆ†è¯¦ç»†ï¼Œå°±ä¸èµ˜è¿°äº†ï¼Œä½†æ˜¯è·¯å¾„ä¸€å®šè¦å†™å¯¹ï¼Œå¯ä»¥æ–°å»ºä¸¤ä¸ªæµ‹è¯•ç›®å½•ï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½å¤Ÿåˆ›å»ºæˆåŠŸã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸¤ä¸ªé‡è¦é…ç½®è§£é‡Šï¼š\n/** * /media æ˜¯å®¹å™¨é‡Œçš„ç›®å½•ï¼Œå› ä¸ºæˆ‘åªæ˜ å°„äº†ä¸€ä¸ªç›®å½•ï¼Œæ‰€ä»¥è¿™å°±æ˜¯å®¹å™¨çš„æ ¹ç›®å½• * å¯¹åº”åˆ°æˆ‘ä¸»æœºï¼Œå°±æ˜¯/root/sharedfolder è¿™ä¸ªç›®å½• * æ‰€ä»¥/media/downloads/qbittorrent/qbcomplete/movie * å°±æ˜¯/root/sharedfolder/downloads/qbittorrent/qbcomplete/movie * åä¸€ä¸ªè·¯å¾„/media/media/movie åŒç† * ç­‰ä»·äº/root/sharedfolder/media/movie */ /** * å‰ä¸€ä¸ªè·¯å¾„æ˜¯ä¸‹è½½çš„è·¯å¾„ï¼Œè¿™é‡Œçš„æ–‡ä»¶éƒ½æ˜¯ä¸èƒ½é‡å‘½åæ•´ç†çš„ * åä¸€ä¸ªè·¯å¾„æ˜¯å½±éŸ³åº“çš„è·¯å¾„ï¼Œhlink æ‰§è¡Œå®Œä¼šåœ¨è¿™é‡Œåˆ›å»ºç›¸åŒçš„æ–‡ä»¶é“¾æ¥ * è¿™ä¸ªé“¾æ¥å¯ä»¥ä»»æ„ä¿®æ”¹ï¼Œç§»åŠ¨ï¼Œåˆ é™¤ */ pathsMapping: { \u0026#39;/media/downloads/qbittorrent/qbcomplete/movie\u0026#39;: \u0026#39;/media/media/movie\u0026#39;, }, /** * è®¾ç½® true æ‰“å¼€ç¼“å­˜ï¼Œè¿™æ ·å³ä½¿å½±éŸ³åº“é‡Œçš„æ–‡ä»¶è¢«åˆ é™¤ï¼Œç§»åŠ¨ * ä¹Ÿä¸ä¼šåˆ›å»ºæ–°çš„ç¡¬é“¾æ¥ */ openCache: true, ç¼“å­˜çš„æ–‡ä»¶ä¿¡æ¯åœ¨å³ä¸Šè§’ç¼–è¾‘ç¼“å­˜å¯ä»¥æŸ¥çœ‹ï¼Œå¦‚æœå·²ç»æ‰§è¡Œè¿‡åˆ›å»ºç¡¬é“¾æ¥ä½†æ˜¯æ²¡æœ‰æ˜¾ç¤ºï¼ŒShfit+F5åˆ·æ–°ç•Œé¢é‡è¯•ã€‚\nè¸©å‘è®°å½• ä¸»æ¿æ— æ³•è¯†åˆ«å›ºæ€ç¡¬ç›˜ å› ä¸ºæƒ³åˆ©ç”¨ä¸Šä¸‰å¹´å‰ä»ç¬”è®°æœ¬ä¸Šæ‹†ä¸‹æ¥çš„å›ºæ€ï¼Œä½†æ²¡æ³¨æ„æ¥å£çš„åè®®ã€‚ä¸»æ¿ç°åœ¨å¤§å¤šé»˜è®¤æ”¯æŒ NEVe åè®®ï¼Œä½†æ˜¯æˆ‘çš„ç¡¬ç›˜æ˜¯å¾ˆä¹…ä¹‹å‰çš„ SATA åè®®ã€‚è¿™å— B460i ä¸»æ¿é»˜è®¤æ”¯æŒ NVMe åè®®çš„ï¼Œä½†æ˜¯ä¹Ÿæ”¯æŒ SATA åè®®ï¼Œéœ€è¦æ›´æ”¹è·³å¸½ã€‚\næ‰¾äº†åŠå¤©å›¾ç‰‡æ²¡æœ‰æ‰¾åˆ°ä¸€æ ·çš„ï¼Œå®˜ç½‘çš„å›¾ç‰‡æ˜¯å’Œè¯´æ˜ä¹¦ä¸Šçš„ä¸€æ ·æ˜¯æ‹¨åŠ¨å¼€å…³å½¢å¼çš„ï¼Œä½†æ˜¯æˆ‘ä¹°çš„äºŒæ‰‹çš„æ˜¯è·³å¸½ï¼ˆå“­ï¼‰ï¼Œä¸ä¼šæ˜¯ä¹°åˆ°å‡çš„äº†å§ã€‚å¼€å…³å…¨éƒ¨æ‹¨åˆ°å·¦è¾¹æ‰æ”¯æŒ SATA åè®®ã€‚ç”¨è·³å¸½ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¿…é¡»éƒ½è¿æ¥çš„æ˜¯å·¦è¾¹ä¸¤ä¸ªå¼•è„šã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ— æ³•è¯†åˆ« U ç›˜å¯åŠ¨ç›˜ å¼•å¯¼æ¨¡å¼æœ‰ä¸¤ç§ UEFI å’Œ Legacyï¼Œè¿™ä¸ªåœ¨åšå¯åŠ¨ç›˜æ—¶å°±ç¡®å®šäº†ã€‚å¦‚æœä¸»æ¿ä½¿ç”¨çš„ UEFI æ¨¡å¼ï¼Œè€Œå¯åŠ¨ç›˜åˆ¶ä½œçš„æ˜¯ Legacy æ¨¡å¼ï¼Œå°±æ— æ³•è¯†åˆ«ï¼Œéœ€è¦åœ¨ Bios é‡Œæ‰¾åˆ°å¯åŠ¨æ¨¡å¼é€‰æ‹©çš„ç›¸å…³é€‰é¡¹ï¼Œé…ç½®å¯ä»¥ä½¿ç”¨ Legacy æ¨¡å¼æˆ–è€… UEFIã€‚ï¼ˆè®°å½•è¿™äº›æ—¶å·²ç»ä¸æƒ³å†è¿› Bios äº†æ‰€ä»¥ä¹Ÿæ²¡æœ‰å›¾ç‰‡ï¼Œæ€»ä¹‹è¦é…ç½®å¼•å¯¼æ–¹å¼ï¼Œé¿å…è¿‡æ»¤äº†ä¸€äº›å¼•å¯¼æ–¹å¼å¯¼è‡´ U ç›˜æ— æ³•è¯†åˆ«ï¼‰\nä¸åŒç½‘æ®µè®¾å¤‡æ— æ³•äº’é€š OVM æ— æ³•æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜ æŠ¥é”™ï¼šThe filesystem label contains blanks. Please remove them by renaming the filesystem to be able to mount it.\nç§»åŠ¨ç¡¬ç›˜åé‡Œæœ‰ç©ºæ ¼ï¼Œæ’åˆ° Windows ä¸Šé‡å‘½åä¸€ä¸‹å³å¯ã€‚\nifconfig not found # ifconfig sudo apt install net-tools ll not found vim ~/.bashrc # æ‰¾åˆ° #alias ll=â€™ls -lâ€™ï¼Œå»æ‰å‰é¢çš„#å°±å¯ä»¥äº†ã€‚ source ~/.bashrc å‚è€ƒ CPU å‹å·è§£è¯»ï¼šæ•™ä½  CPU å‹å·åç¼€æ€ä¹ˆçœ‹ï¼ŸCPU å‹å·åé¢çš„å­—æ¯å’Œæ•°å­—åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ - çŸ¥ä¹ ä»é›¶å¼€å§‹æ­å»º NAS: ç¡¬ä»¶ç¯‡ | Verne in GitHub ä»é›¶æ­å»ºä¸€å° NASï¼šè½¯ä»¶ç¯‡ | Verne in GitHub Intel CPU å‹å·è§£è¯»ä»¥åŠå¦‚ä½•ç²—ç•¥åˆ¤æ–­ Intel CPU çš„æ€§èƒ½ (i3ã€i5ã€i7 ä»¥åŠ CPU çš„ä»£æ•°)_å®æŒ‡åŸå‘³å¼ çš„åšå®¢-CSDN åšå®¢_cpu ä»£æ•° NAS | ç¾¤æ™–å®‰è£… qBittorrent å¥—ä»¶å¹¶ä¼˜åŒ–è®¾ç½®ã€æ›¿æ¢ UIï¼ˆé docker å®‰è£…ï¼‰ | é†‰æ¸”å°ç«™ Docker ä¸­å›½æº - ç®€ä¹¦ é‡‘ç‰Œ é“œç‰Œ ä»€ä¹ˆåŒºåˆ«å‘€ï¼Ÿ - ç”µæº - Antec ç½‘ç«™ æœºÂ·ç§‘æ™®è´´ï¼šç”µè„‘ç”µæºé‡‘ã€é“¶ã€é“œç‰Œåˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ_é“œç‰Œç”µæºå’Œé‡‘ç‰Œç”µæºçš„åŒºåˆ« - è°ƒè‰²ç›˜ç½‘ç»œ ã€éæ¨¡ç»„ç”µæºï¼ŒåŠæ¨¡ç»„ç”µæºï¼Œå…¨æ¨¡ç»„ç”µæºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿã€‘ - çŸ¥ä¹ ç”µæºå…¨æ¨¡ç»„å’Œéæ¨¡ç»„ç©¶ç«Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ_ç”µè„‘ç”µæº_ä»€ä¹ˆå€¼å¾—ä¹° æµ…è°ˆç»„è£…æœºæœºç®±çš„é€‰æ‹©ï¼ˆç¯‡ä¸€ï¼šå¤§å°ï¼‰ - çŸ¥ä¹ å“ªç¨® PC æ©Ÿç®±å°ºå¯¸æœ€é©åˆæ‚¨çš„ä¸‹ä¸€å€‹ç‰ˆæœ¬ï¼Ÿ - HowThere 199 å…ƒé£å†·/æ°´å†·æ•£çƒ­å™¨ç®€å•å¯¹æ¯”ï¼šè°æ‰æ˜¯ä½ çš„çˆ± - è¶…èƒ½ç½‘ ã€æ•™ç¨‹ã€‘èœ—ç‰›æ˜Ÿé™…å®‰è£…å¼€æº NAS ç³»ç»Ÿ Openmediavault åŠåˆå§‹åŒ–é…ç½®ï¼ˆå¸æ³¢å›¾ï¼‰â€”â€”OMV ç³»åˆ—æ•™ç¨‹ 01_å“”å“©å“”å“©_bilibili How to configure Jackett plugin Â· qbittorrent/search-plugins Wiki å®‰è£… NAS Toolsï¼Œæ‰“é€ è‡ªåŠ¨åŒ–è§‚å½±ã€è¿½å‰§ç³»ç»Ÿï¼ŒNAS åª’ä½“åº“æ•´ç†å·¥å…·ï¼Œå¨è”é€š Docker ç‰ˆ NAS Tools å®‰è£…æ•™ç¨‹~feat.å¨è”é€š HS 264_å“”å“©å“”å“©_bilibili Home | hlink ","permalink":"https://lifeislife.cn/posts/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E5%8F%B0nas%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1%E5%99%A8/","summary":"\u003cp\u003eæŠ€æœ¯æ²¡å­¦å¤šå°‘ï¼Œæ•™ç¨‹ä¸‹æ»¡äº†ç¡¬ç›˜ï¼Œä¸€ç›´æƒ³ä¸“é—¨éƒ¨ç½² NAS æ¥å­˜æ–‡ä»¶ï¼Œä½†æ˜¯ä¸€æ¥è¦èŠ±é’±ï¼ŒäºŒæ¥æ­å»º NAS æ²¡æœ‰ç»éªŒæ€•éƒ¨ç½²ä¸å¥½ï¼Œæ²¡æœ‰ç°åœ¨ç¡¬ç›˜ç›´è¿èˆ’é€‚ï¼Œæ‰€ä»¥å°†å°±ç”¨å§ã€‚\u003c/p\u003e\n\u003cp\u003eè‡ªä»æœ‰å¤©å¿˜äº†å¿˜äº†ä¼‘çœ ç”µè„‘ï¼Œä¸€ä¸ªè‡ªåŠ¨å¤‡ä»½ä»»åŠ¡å¼€å¯ï¼Œåœ¨ 40 åº¦çš„é«˜æ¸©å¤©ï¼Œæ»¡é€Ÿè·‘äº†ä¸€å¤©ï¼Œä¸‹ç­å›æ¥ç¡¬ç›˜ç›´æ¥æŠ¥åºŸã€‚è¿™å°±åŠ é€Ÿæˆ‘æŠ˜è…¾éƒ¨ç½² NAS çš„è¿›ç¨‹ã€‚\u003c/p\u003e","title":"ä»é›¶å¼€å§‹æ­å»ºä¸€å° NAS å­˜å‚¨æœåŠ¡å™¨"},{"content":"ä¸‹è½½å®‰è£… ç‚¹å‡»ä¸‹è½½ Linux ç‰ˆæœ¬çš„ Clashï¼Œä¸‹è½½å®Œæˆåè§£å‹ç¼©ã€‚\nunzip clash-linux.zip sudo mv clash-linux /usr/local/bin/clash sudo chmod +x /usr/local/bin/clash åˆæ­¥ä½¿ç”¨ ä¸‹è½½é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¸€èˆ¬ç”±è®¢é˜…å•†ï¼ˆæœºåœºï¼‰æä¾›ï¼Œæ˜¯ä¸€ä¸ª yaml æ–‡ä»¶ï¼Œç¼–å†™äº†ä»£ç†æœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œä»¥åŠè®¿é—®è§„åˆ™ç­‰ã€‚è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚\nclash-linux-amd64-v1.10.0 -f ä»è®¢é˜…å•†é‚£è·å–çš„é…ç½®æ–‡ä»¶.ymal -d . å¯ä»¥å°è¯•åœ¨ Git clone æ—¶ä½¿ç”¨ä»£ç†ï¼Œå¦‚æœå¯ä»¥æ­£å¸¸ä¸‹è½½ï¼Œè¯´æ˜ä»£ç†é…ç½®æˆåŠŸã€‚\ngit clone https://github.com/twbs/bootstrap.git --config \u0026#34;http.proxy=127.0.0.1:7890\u0026#34; # å³å¯æ­£å¸¸ä¸‹è½½ å¼€æœºå¯åŠ¨ cd ~ sudo cp /usr/local/bin/clash /etc/ sudo vim /etc/systemd/system/clash.service æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå¹¶ä¿å­˜ï¼š\n[Unit] Description=Clash Daemon [Service] ExecStart=/usr/local/bin/clash -f /etc/clash/è®¢é˜…çš„é…ç½®æ–‡ä»¶.yaml -d /etc/clash/ Restart=on-failure [Install] WantedBy=multi-user.target å¯ç”¨ clash æœåŠ¡\nsudo systemctl enable clash.service å¯åŠ¨ clash æœåŠ¡\nsudo systemctl start clash.service æ­¤å¤–ä¹Ÿå¯ä»¥åœæ­¢æˆ–è€…ç¦ç”¨ clash æœåŠ¡\nsudo systemctl stop clash.service sudo systemctl disable clash.service æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š\nsudo systemctl status clash æŸ¥çœ‹ clash æœåŠ¡æ—¥å¿—\njournalctl -e -u clash.service é…ç½®å®šæœŸæ›´æ–° crontab -e æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š\n29 6 * * * root pgrep clash | xargs kill -s 9 30 6 * * * root cp /etc/clash/è®¢é˜…çš„é…ç½®æ–‡ä»¶.yaml /etc/clash/backup.yaml 31 6 * * * root curl https://è®¢é˜…é“¾æ¥.yaml \u0026gt; /etc/clash/è®¢é˜…çš„é…ç½®æ–‡ä»¶.yaml 32 6 * * * root sudo systemctl start clash.service é‡å¯ cron æœåŠ¡\nsudo systemctl restart cron.service ä½¿ç”¨ Dashboard ç¼–è¾‘/etc/clash/glados.yamlï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼Œé»˜è®¤é…ç½®ä¸º127.0.0.1:9090ã€‚å¦‚æœä½ çš„9090ç«¯å£æ²¡æœ‰è¢«å ç”¨ï¼Œå°†å…¶ä¿®æ”¹ä¸º0.0.0.0:9090å³å¯ï¼Œå› ä¸ºæˆ‘çš„ NAS9090ç«¯å£è¢«å ç”¨ï¼Œæ‰€ä»¥ä¿®æ”¹æˆäº†0.0.0.0:19090ã€‚\nexternal-controller: 0.0.0.0:19090 è¿™æ ·å°±å¯ä»¥åœ¨æµè§ˆå™¨é€šè¿‡Nas IP:19090/uiè®¿é—® Dashboardï¼Œæ¯”å¦‚192.168.1.9:19090/uiã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ›´æ–¹ä¾¿çš„æ–¹å¼ï¼šä½¿ç”¨ Docker éƒ¨ç½² version: \u0026#34;3.7\u0026#34; services: clash: image: dreamacro/clash-premium container_name: clash hostname: clash restart: unless-stopped ports: - 7890:7890 - 7891:7891 - 9090:9090 volumes: - /root/sharefolder/appdata/clash:/root/.config/clash # ä¿®æ”¹ä¸ºä½ çš„é…ç½®æ–‡ä»¶ç›®å½• environment: - TZ=Asia/Shanghai clash-dashboard: image: haishanh/yacd:master container_name: clash-dashboard ports: - \u0026#34;7880:80\u0026#34; restart: always environment: - TZ=Asia/Shanghai depends_on: - clash è¿™æ ·å°±å¯ä»¥åœ¨æµè§ˆå™¨é€šè¿‡Nas IP:7880è®¿é—® clash-dashboardï¼Œæ¯”å¦‚192.168.1.9:7880ã€‚ç‚¹å‡»é…ç½®ï¼Œå¤§æ¦‚ç‡æ˜¾ç¤ºæ— æ³•è¿æ¥åˆ°åç«¯ã€‚ä¿®æ”¹åç«¯åœ°å€ä½http://192.168.1.9:9090ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å®šæ—¶æ›´æ–°ï¼š\ncrontab -e # æ·»åŠ ä»¥ä¸‹çš„å†…å®¹ # æ¯éš” 8 å°æ—¶å¤‡ä»½é…ç½®æ–‡ä»¶ 0 */8 * * * cp /root/sharefolder/appdata/clash/config.yaml /root/sharedfolder/appdata/clash/config.yaml.bak # æ¯éš” 8 å°æ—¶å»¶è¿Ÿ 5 åˆ†é’Ÿæ”¯æ›´æ–°é…ç½®æ–‡ä»¶ 5 */8 * * * curl https://xxxxxxx \u0026gt; /root/sharedfolder/appdata/clash/config.yaml # æ¯éš” 8 å°æ—¶å»¶è¿Ÿ 6 åˆ†é’Ÿä¿®æ”¹é…ç½®æ–‡ä»¶ allow-lan: false ä¿®æ”¹ä¸ºtrue 6 */8 * * * sed -i \u0026#39;s/allow-lan: false/allow-lan: true/\u0026#39; /root/sharedfolder/appdata/clash/config.yaml # æ¯éš” 8 å°æ—¶å»¶è¿Ÿ 7 åˆ†é’Ÿä¿®æ”¹é…ç½®æ–‡ä»¶ external-controller: 7 */8 * * * sed -i \u0026#39;s/external-controller: 127.0.0.1:9090/external-controller: 0.0.0.0:9090/\u0026#39; /root/sharedfolder/appdata/clash/config.yaml # æ¯éš” 8 å°æ—¶å»¶è¿Ÿ 8 åˆ†é’Ÿä¿®æ”¹é…ç½®æ–‡ä»¶ external-ui: dashboard æ³¨é‡Šæ‰ï¼Œå³ä¸ä½¿ç”¨å†…ç½®çš„dashboardï¼Œæœ‰çš„æœºåœºæä¾›çš„é…ç½®æ–‡ä»¶æ²¡æœ‰è¿™ä¸ªé…ç½®ï¼Œå°±ä¸éœ€è¦æ·»åŠ è¿™è¡Œ 8 */8 * * * sed -i \u0026#39;s/external-ui: dashboard/#external-ui: dashboard/\u0026#39; /root/sharefolder/appdata/clash/config.yaml # æ¯éš” 8 å°æ—¶å»¶è¿Ÿ 9 åˆ†é’Ÿé‡å¯ clash 9 */8 * * * docker restart clash 10 */8 * * * docker restart clash-dashboard å‚è€ƒ ghostxu97/clash-for-linux: Linux ç¯å¢ƒå®‰è£…é…ç½® Clash å·¥å…·ï¼Œä»¥å®ç°ä»£ç†ä¸Šç½‘æ•ˆæœã€‚åŒ…å«ä¸‹è½½ã€å®‰è£…ã€é…ç½®ã€è¿è¡Œã€æµ‹è¯•ä»¥åŠå¼€æœºè‡ªå¯åŠ¨ã€å®šæœŸè‡ªåŠ¨æ›´æ–°è®¢é˜…åŠŸèƒ½çš„æ“ä½œæ–‡æ¡£ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©\n","permalink":"https://lifeislife.cn/posts/linux%E4%B8%8B%E4%BD%BF%E7%94%A8clash%E4%BD%9C%E4%BB%A3%E7%90%86%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/","summary":"\u003ch2 id=\"ä¸‹è½½å®‰è£…\"\u003eä¸‹è½½å®‰è£…\u003c/h2\u003e\n\u003cp\u003eç‚¹å‡»ä¸‹è½½ \u003ca href=\"https://glados.rocks/tools/clash-linux.zip\"\u003eLinux ç‰ˆæœ¬çš„ Clash\u003c/a\u003eï¼Œä¸‹è½½å®Œæˆåè§£å‹ç¼©ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eunzip clash-linux.zip\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo mv clash-linux /usr/local/bin/clash\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo chmod +x /usr/local/bin/clash\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"åˆæ­¥ä½¿ç”¨\"\u003eåˆæ­¥ä½¿ç”¨\u003c/h2\u003e\n\u003cp\u003eä¸‹è½½é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¸€èˆ¬ç”±è®¢é˜…å•†ï¼ˆæœºåœºï¼‰æä¾›ï¼Œæ˜¯ä¸€ä¸ª yaml æ–‡ä»¶ï¼Œç¼–å†™äº†ä»£ç†æœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œä»¥åŠè®¿é—®è§„åˆ™ç­‰ã€‚è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚\u003c/p\u003e","title":"Linux ä¸‹ä½¿ç”¨ Clash ä½œä»£ç†å¹¶é…ç½®å¼€æœºå¯åŠ¨"},{"content":"","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3no-module-named-configparser/","summary":"","title":"è§£å†³ No module named 'ConfigParser'"},{"content":"è§£å†³æ–¹æ³• ç»ˆç«¯æ‰§è¡Œï¼š\nstty sane å‚è€ƒ command line - Pressing enter produces ^M instead of a newline - Ask Ubuntu\n","permalink":"https://lifeislife.cn/posts/linux%E7%BB%88%E7%AB%AF%E5%9B%9E%E8%BD%A6%E5%8F%98%E6%88%90-m/","summary":"\u003ch1 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h1\u003e\n\u003cp\u003eç»ˆç«¯æ‰§è¡Œï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003estty sane\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"å‚è€ƒ\"\u003eå‚è€ƒ\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://askubuntu.com/questions/441744/pressing-enter-produces-m-instead-of-a-newline#comment578102_441744\"\u003ecommand line - Pressing enter produces ^M instead of a newline - Ask Ubuntu\u003c/a\u003e\u003c/p\u003e","title":"Linux ç»ˆç«¯å›è½¦å˜æˆ^M"},{"content":"","permalink":"https://lifeislife.cn/posts/linux%E5%88%87%E6%8D%A2%E4%B8%8D%E5%90%8Cpython%E7%89%88%E6%9C%AC/","summary":"","title":"Linux åˆ‡æ¢ä¸åŒ Python ç‰ˆæœ¬"},{"content":"æ•ˆæœ ä¸‹è½½ pdf.js å‰å¾€å®˜ç½‘ä¸‹è½½pdf.jsã€‚\nä¸ºäº†ä¿è¯å…¼å®¹æ€§ï¼Œå»ºè®®ä¸‹è½½æ—§ç‰ˆï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ·»åŠ  pdfjs åˆ°ä¸»é¢˜ä¸­ å°†ä¸‹è½½æ–‡ä»¶å¤¹å‘½åä¸º pdfjsï¼Œæ‹·è´åˆ° themes/fluid/source/myjs ä¸­ã€‚myjsç›®å½•ä¸ºè‡ªå·±æ–°å»ºç›®å½•ã€‚å¹¶å°†è¯¥ç›®å½•skip_renderã€‚\næ‰“å¼€ HEXO çš„é…ç½®æ–‡ä»¶ï¼ˆä¸æ˜¯ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼‰_config.ymlï¼Œæœç´¢skip_renderï¼Œé…ç½®å¦‚ä¸‹ï¼š\nskip_render: [myjs/**] å¦‚æœä¸é…ç½®è¯¥é€‰é¡¹ï¼ŒåµŒå…¥çš„ PDF å°†ä¼šå¸¦æœ‰åšå®¢ä¸»é¢˜è¾¹æ¡†ã€‚å¦‚å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹ viewer.js ç›´æ¥ä½¿ç”¨ä¸‹è½½çš„æ–‡ä»¶ä¼šæŠ¥é”™ï¼š\nError: file origin does not match viewer\u0026#39;s æ³¨é‡Šweb/viewer.jsæ–‡ä»¶ä¸­çš„ç›¸åº”å†…å®¹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨æ–¹æ³• åœ¨ Markdown æ–‡æ¡£ä¸­ä½¿ç”¨ \u0026lt;iframe\u0026gt; æ§ä»¶é…åˆpdf.js åº“å®Œæˆ pdf æ˜¾ç¤º\n\u0026lt;iframe src=\u0026#39;/myjs/pdfjs/web/viewer.html?file=\u0026lt;src-to-pdf\u0026gt;\u0026#39; style=\u0026#39;width:100%;height:100%\u0026#39;\u0026gt;\u0026lt;/iframe\u0026gt; \u0026lt;src-to-pdf\u0026gt;ï¼šéœ€è¦æ˜¾ç¤ºçš„ pdf æ–‡ä»¶çš„é“¾æ¥ /myjs/pdfjs/web/viewer.htmlï¼šæ”¹ä¸ºè‡ªå·±çš„ pdfjs ç›®å½• å‚è€ƒ Fluid -3- pdf.js PCï¼Œç§»åŠ¨ç«¯æŸ¥çœ‹ PDF - åˆè§è‹å²š ","permalink":"https://lifeislife.cn/posts/hexo%E5%8D%9A%E5%AE%A2%E5%B5%8C%E5%85%A5pdf/","summary":"\u003ch1 id=\"æ•ˆæœ\"\u003eæ•ˆæœ\u003c/h1\u003e\n\u003ciframe src=\"/myjs/pdfjs/web/viewer.html?file=/misc/Markdownä¹¦å†™PDFè¾“å‡ºä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ.pdf\" style=\"width:100%;height:600px\"\u003e\u003c/iframe\u003e\n\u003ch1 id=\"ä¸‹è½½-pdfjs\"\u003eä¸‹è½½ pdf.js\u003c/h1\u003e\n\u003cp\u003eå‰å¾€\u003ca href=\"https://mozilla.github.io/pdf.js\"\u003eå®˜ç½‘\u003c/a\u003eä¸‹è½½\u003ccode\u003epdf.js\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eä¸ºäº†ä¿è¯å…¼å®¹æ€§ï¼Œå»ºè®®ä¸‹è½½æ—§ç‰ˆï¼š\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/03/18-02-32-6b30daefccbd074fc4a35844850845ea-20220903180230-1223af.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/03/18-02-32-6b30daefccbd074fc4a35844850845ea-20220903180230-1223af.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/03/18-02-57-878391ebdd45d2771db4af95418070bf-20220903180256-c4617f.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/03/18-02-57-878391ebdd45d2771db4af95418070bf-20220903180256-c4617f.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"HEXO åšå®¢åµŒå…¥ PDF"},{"content":"ç”¨æˆ·æ€ä¸å†…æ ¸æ€ ç›®å‰ä¸ºæ­¢çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯è¿è¡Œåœ¨ Machine æ¨¡å¼ä¸‹ï¼Œä½†æ˜¯åœ¨å“ªå†³å®šç¨‹åºè¿è¡Œåœ¨ä»€ä¹ˆæ¨¡å¼ä¸‹çš„å‘¢ï¼Ÿ\nåœ¨å­¦ä¹ æŠ¢å å¼å¤šä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬æœ‰äº†åˆ›å»ºä»»åŠ¡çš„æ¦‚å¿µï¼Œåœ¨æ±‡ç¼–ä»£ç ä¸­æœ‰è¿™ä¹ˆä¸€æ®µï¼Œä½¿ç”¨åˆ°äº†mstatuså¯„å­˜å™¨ï¼š\n# Notice: default mstatus is 0 # Set mstatus.MPP to 3, so we still run in Machine mode after MRET. # Set mstatus.MPIE to 1, so MRET will enable the interrupt. li t0, 3 \u0026lt;\u0026lt; 11 | 1 \u0026lt;\u0026lt; 7 csrr a1, mstatus # a1 = mstatus or t0, t0, a1 # t0 = t0 | a1 csrw mstatus, t0 # mstatus = t0 j start_kernel # hart 0 jump to c mretè¿”å›åï¼Œæ˜¯æ ¹æ®å¯„å­˜å™¨mstatusçš„MPPæ¥å†³å®šæ¥æ¥æ¥æ˜¯å¤„äºä»€ä¹ˆæ¨¡å¼ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢å°†MPPé…ç½®ä¸º3ï¼Œ MPPçš„åŠŸèƒ½æ˜¯ è®°å½• Machine æ¨¡å¼ä¸‹ï¼Œå‰ä¸€ä¸ªï¼Œç‰¹æƒçº§ã€‚è¿™é‡Œè§£å®ç°äº†åœ¨mretä¹‹åå°†æ¨¡å¼è®¾ç½®ä¸º Machine æ¨¡å¼ï¼ˆ3ï¼‰ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å› ä¸ºmstatusä¸Šç”µåé»˜è®¤ä¸ºå…¨ 0ï¼Œæ‰€ä»¥å¦‚æœä¸å¯¹å…¶è®¾ç½®ï¼Œé‚£ä¹ˆåœ¨mretä¹‹åï¼Œå°±æ˜¯è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼ˆ0ï¼‰ã€‚\nå¦‚æœæƒ³è®©ç¨‹åºè·‘åœ¨ç”¨æˆ·æ€ï¼Œåªè¦ä¸å¯¹é½è®¾ç½®ï¼Œä¿æŒé»˜è®¤å³å¯ï¼š\n# Notice: default mstatus is 0 # Set mstatus.MPP to 3, so we still run in Machine mode after MRET. # Set mstatus.MPIE to 1, so MRET will enable the interrupt. li t0, 1 \u0026lt;\u0026lt; 7 csrr a1, mstatus # a1 = mstatus or t0, t0, a1 # t0 = t0 | a1 csrw mstatus, t0 # mstatus = t0 j start_kernel # hart 0 jump to c ä¸ºä»€ä¹ˆéœ€è¦ç³»ç»Ÿè°ƒç”¨ï¼Ÿå› ä¸ºåœ¨ç”¨æˆ·æ€ä¸€äº›èµ„æºï¼ˆå¯„å­˜å™¨ï¼‰çš„è®¿é—®æ˜¯å—é™çš„ï¼Œæ‰€ä»¥éœ€è¦å°è£…ä¸€äº›å‡½æ•°ï¼Œè¿™äº›å‡½æ•°é‡Œä¼šè¿›è¡Œæ¨¡å¼åˆ‡æ¢ï¼Œç„¶åè®¿é—®éœ€è¦çš„èµ„æºã€‚\né‚£ä¹ˆå¦‚ä½•è¿›è¡Œæ¨¡å¼çš„åˆ‡æ¢å‘¢ï¼Ÿè¿™å°±éœ€è¦ecallæŒ‡ä»¤ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯è§¦å‘äº†å¼‚å¸¸ï¼Œå°±ä¼šè¿›å…¥åˆ° Machine æ¨¡å¼å¤„ç†å¼‚å¸¸ï¼Œåœ¨ Machine æ¨¡å¼ä¸‹å°±ç›¸å½“äºåœ¨å†…æ ¸æ€äº†ï¼Œå°±æ²¡æœ‰è®¿é—®èµ„æºçš„é™åˆ¶äº†ã€‚\nç³»ç»Ÿæ¨¡å¼çš„åˆ‡æ¢ \u003c!DOCTYPE html\u003e Responsive Image ECALLæŒ‡ä»¤å®é™…å°±æ˜¯ä¸»åŠ¨è§¦å‘å¼‚å¸¸ï¼Œæ ¹æ®ECALLçš„æƒé™çº§åˆ«äº§ç”Ÿä¸åŒçš„å¼‚å¸¸ç ï¼Œå¦‚ä¸‹å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä» User æ¨¡å¼è°ƒç”¨ECALLå¼‚å¸¸ç ç­‰äº 8ï¼Œä» Supervisor æ¨¡å¼è°ƒç”¨å¼‚å¸¸ç ç­‰äº 9ï¼Œä» Machine æ¨¡å¼è°ƒç”¨å¼‚å¸¸ç ç­‰äº 11ã€‚\nå¼‚å¸¸äº§ç”Ÿæ—¶epcå¯„å­˜å™¨çš„å€¼å­˜æ”¾çš„æ˜¯ECALLæŒ‡ä»¤æœ¬èº«çš„åœ°å€ã€‚\nå¦‚æœæƒ³è§¦å‘å®Œå¼‚å¸¸æ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œéœ€è¦åœ¨å¼‚å¸¸å¤„ç†é€»è¾‘é‡ŒæŠŠ epc å¯„å­˜å™¨å€¼æ”¹ä¸ºä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼Œå¦åˆ™ä¼šè¿›å…¥æ­»å¾ªç¯ã€‚\nç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡Œæµç¨‹ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç³»ç»Ÿè°ƒç”¨çš„ä¼ å‚ ç³»ç»Ÿè°ƒç”¨ä½œä¸ºæ“ä½œç³»ç»Ÿçš„å¯¹å¤–æ¥å£ï¼Œç”±æ“ä½œç³»ç»Ÿçš„å®ç°è´Ÿè´£å®šä¹‰ã€‚å‚è€ƒ Linux çš„ç³»ç»Ÿè°ƒç”¨ï¼ŒRVOS å®šä¹‰ç³»ç»Ÿè°ƒç”¨çš„ä¼ å‚è§„åˆ™å¦‚ä¸‹ï¼š\nç³»ç»Ÿè°ƒç”¨å·æ”¾åœ¨a7ä¸­ ç³»ç»Ÿè°ƒç”¨å‚æ•°ä½¿ç”¨a0-a5 è¿”å›å€¼ä½¿ç”¨a0 \u003c!DOCTYPE html\u003e Responsive Image ç³»ç»Ÿè°ƒç”¨çš„å°è£… \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/risc-v%E5%85%A5%E9%97%A8-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/","summary":"\u003ch2 id=\"ç”¨æˆ·æ€ä¸å†…æ ¸æ€\"\u003eç”¨æˆ·æ€ä¸å†…æ ¸æ€\u003c/h2\u003e\n\u003cp\u003eç›®å‰ä¸ºæ­¢çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯è¿è¡Œåœ¨ Machine æ¨¡å¼ä¸‹ï¼Œä½†æ˜¯åœ¨å“ªå†³å®šç¨‹åºè¿è¡Œåœ¨ä»€ä¹ˆæ¨¡å¼ä¸‹çš„å‘¢ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eåœ¨å­¦ä¹ æŠ¢å å¼å¤šä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬æœ‰äº†åˆ›å»ºä»»åŠ¡çš„æ¦‚å¿µï¼Œåœ¨æ±‡ç¼–ä»£ç ä¸­æœ‰è¿™ä¹ˆä¸€æ®µï¼Œä½¿ç”¨åˆ°äº†\u003ccode\u003emstatus\u003c/code\u003eå¯„å­˜å™¨ï¼š\u003c/p\u003e","title":"RISC-V å…¥é—¨ - ç³»ç»Ÿè°ƒç”¨"},{"content":"éœ€æ±‚ å·¥ä½œæ—¶éœ€è¦å¼€å¯å¤šä¸ªæ ‡ç­¾é¡µï¼Œåœ¨åŒä¸€ä¸ªçª—å£é‡Œæ‰“å¼€åˆæŸ¥æ‰¾ä¸å˜ï¼Œäºæ˜¯åˆ†ä¸ºå¤šä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£é‡Œçš„æ ‡ç­¾é¡µå·¥ä½œå†…å®¹ä¸€è‡´ã€‚å¦‚æ‰€æœ‰æ–‡æ¡£æ”¾åœ¨ä¸€ä¸ªçª—å£ï¼Œéœ€è¦ç™¾åº¦ï¼ŒGoogle æœç´¢æ—¶ç”¨å•ç‹¬çš„ä¸€ä¸ªé—®é¢˜æœç´¢çª—å£ã€‚è¿™æ ·å°±é¿å…æ¯æ¬¡æ‰“å¼€çª—å£éƒ½è¦æŒ¨ä¸ªç‚¹ä¸€éã€‚\nEdge è®¾ç½® æ‰“å¼€è®¾ç½®-æ›´å¤šå·¥å…· - ä¸ºçª—å£å‘½åã€‚å³å¯é‡å‘½åçª—å£\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image Chrome è®¾ç½® åŒä¸Šï¼Œè·¯å¾„åŸºæœ¬ä¸€è‡´éƒ½æ˜¯åœ¨è®¾ç½®-æ›´å¤šå·¥å…·ä¸­ã€‚\nå‡çº§ \u003c!DOCTYPE html\u003e Responsive Image åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°çª—å£å¤ªå¤šä»»åŠ¡æ å¤ªæŒ¤äº†ï¼ŒChrome è‡ªèº«æœ‰æ ‡ç­¾åˆ†ç»„çš„åŠŸèƒ½ï¼Œå…¶å®å®Œå…¨å¯ä»¥æ›¿ä»£çª—å£ã€‚ä¹Ÿå¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚å°‘æ•°æ´¾æœ‰ä»‹ç»ï¼Œå°±ä¸é€ è½®å­äº†ã€‚ä½“éªŒä¸€æ®µæ—¶é—´ç¡®å®å¾ˆå¥½ç”¨ã€‚\n","permalink":"https://lifeislife.cn/posts/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%BB%E5%8A%A1%E6%A0%8F%E5%A4%9A%E7%AA%97%E5%8F%A3%E5%91%BD%E5%90%8D/","summary":"\u003ch2 id=\"éœ€æ±‚\"\u003eéœ€æ±‚\u003c/h2\u003e\n\u003cp\u003eå·¥ä½œæ—¶éœ€è¦å¼€å¯å¤šä¸ªæ ‡ç­¾é¡µï¼Œåœ¨åŒä¸€ä¸ªçª—å£é‡Œæ‰“å¼€åˆæŸ¥æ‰¾ä¸å˜ï¼Œäºæ˜¯åˆ†ä¸ºå¤šä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£é‡Œçš„æ ‡ç­¾é¡µå·¥ä½œå†…å®¹ä¸€è‡´ã€‚å¦‚æ‰€æœ‰æ–‡æ¡£æ”¾åœ¨ä¸€ä¸ªçª—å£ï¼Œéœ€è¦ç™¾åº¦ï¼ŒGoogle æœç´¢æ—¶ç”¨å•ç‹¬çš„ä¸€ä¸ªé—®é¢˜æœç´¢çª—å£ã€‚è¿™æ ·å°±é¿å…æ¯æ¬¡æ‰“å¼€çª—å£éƒ½è¦æŒ¨ä¸ªç‚¹ä¸€éã€‚\u003c/p\u003e","title":"æµè§ˆå™¨ä»»åŠ¡æ å¤šçª—å£å‘½å"},{"content":"è°ƒæ•™èƒŒæ™¯ å½“æœ‰å¤šä¸ªé¡¹ç›®åŒæ—¶æ‰“å¼€æ—¶ï¼ŒVSCode çª—å£å¼€å¾—å¤ªå¤šå°±æ‰¾ä¸åˆ°è‡ªå·±æƒ³è¦æ‰“å¼€çš„çª—å£ï¼Œå› ä¸ºçª—å£å‘½åé»˜è®¤æŒ‰ç…§å½“å‰æ‰“å¼€çš„æ–‡ä»¶å‘½åçš„ï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šã€‚å°±éœ€è¦æŒ¨ä¸ªæ‰“å¼€æ‰èƒ½ç¡®å®šè‡ªå·±æƒ³è¦æ‰“å¼€çš„çª—å£ã€‚\nå¦‚æœèƒ½æŒ‰ç…§é¡¹ç›®åå‘½åçª—å£å°±ä¼šä¾¿æ·è®¸å¤šï¼Œå¥½åœ¨ VSCode æä¾›é‡å‘½åçš„æ–¹å¼ã€‚åŒæ ·çš„éœ€æ±‚å¯èƒ½åœ¨æµè§ˆå™¨ä¸­ä¹Ÿä¼šé‡åˆ°ï¼Œå¯ä»¥å‚è€ƒæµè§ˆå™¨ä»»åŠ¡æ å¤šçª—å£å‘½å - å¦‚äº‘æ³Šã€‚\nä¿®æ”¹æ–¹å¼ File -\u0026gt; Preferences -\u0026gt; Setting æœç´¢ Window: Title æ”¹æˆï¼š\n${dirty}${rootName}${separator}${activeEditorMedium}${separator}${appName} å…¶ä»–å¯ç”¨é…ç½®è¯´æ˜ï¼š\n\u0026#34;${activeEditorShort}\u0026#34;: æ–‡ä»¶å (ä¾‹å¦‚ myFile.txt)ã€‚ \u0026#34;${activeEditorMedium}\u0026#34;: ç›¸å¯¹äºå·¥ä½œåŒºæ–‡ä»¶å¤¹çš„æ–‡ä»¶è·¯å¾„ (ä¾‹å¦‚, myFolder/myFileFolder/myFile.txt)ã€‚ \u0026#34;${activeEditorLong}\u0026#34;: æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ (ä¾‹å¦‚ /Users/Development/myFolder/myFileFolder/myFile.txt)ã€‚ \u0026#34;${activeFolderShort}\u0026#34;: æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹åç§° (ä¾‹å¦‚, myFileFolder)ã€‚ \u0026#34;${activeFolderMedium}\u0026#34;: ç›¸å¯¹äºå·¥ä½œåŒºæ–‡ä»¶å¤¹çš„ã€åŒ…å«æ–‡ä»¶çš„æ–‡ä»¶å¤¹çš„è·¯å¾„, (ä¾‹å¦‚ myFolder/myFileFolder)ã€‚ \u0026#34;${activeFolderLong}\u0026#34;: æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„å®Œæ•´è·¯å¾„ (ä¾‹å¦‚ /Users/Development/myFolder/myFileFolder)ã€‚ \u0026#34;${folderName}\u0026#34;: æ–‡ä»¶æ‰€åœ¨å·¥ä½œåŒºæ–‡ä»¶å¤¹çš„åç§° (ä¾‹å¦‚ myFolder)ã€‚ \u0026#34;${folderpath}\u0026#34;: æ–‡ä»¶æ‰€åœ¨å·¥ä½œåŒºæ–‡ä»¶å¤¹çš„è·¯å¾„ (ä¾‹å¦‚ /Users/Development/myFolder)ã€‚ \u0026#34;${rootName}\u0026#34;: æ‰“å¼€çš„å·¥ä½œåŒºæˆ–æ–‡ä»¶å¤¹çš„åç§° (ä¾‹å¦‚ myFolder æˆ– myWorkspace)ã€‚ \u0026#34;${rootPath}\u0026#34;: æ‰“å¼€çš„å·¥ä½œåŒºæˆ–æ–‡ä»¶å¤¹çš„æ–‡ä»¶è·¯å¾„ (ä¾‹å¦‚ /Users/Development/myWorkspace)ã€‚ \u0026#34;${appName}\u0026#34;: ä¾‹å¦‚ VS Codeã€‚ â€œ${remoteName}â€: ä¾‹å¦‚ SSH ${dirty}: è¡¨æ˜æ´»åŠ¨ç¼–è¾‘å™¨å…·æœ‰æœªä¿å­˜æ›´æ”¹çš„æ—¶é—´çš„æŒ‡ç¤ºå™¨ã€‚ \u0026#34;${separator}\u0026#34;: ä¸€ç§æ¡ä»¶åˆ†éš”ç¬¦ (\u0026#34;-\u0026#34;), ä»…åœ¨è¢«åŒ…å«å€¼æˆ–é™æ€æ–‡æœ¬çš„å˜é‡åŒ…å›´æ—¶æ˜¾ç¤º ","permalink":"https://lifeislife.cn/posts/vscode%E4%BB%BB%E5%8A%A1%E6%A0%8F%E5%A4%9A%E7%AA%97%E5%8F%A3%E5%91%BD%E5%90%8D/","summary":"\u003ch2 id=\"è°ƒæ•™èƒŒæ™¯\"\u003eè°ƒæ•™èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eå½“æœ‰å¤šä¸ªé¡¹ç›®åŒæ—¶æ‰“å¼€æ—¶ï¼ŒVSCode çª—å£å¼€å¾—å¤ªå¤šå°±æ‰¾ä¸åˆ°è‡ªå·±æƒ³è¦æ‰“å¼€çš„çª—å£ï¼Œå› ä¸ºçª—å£å‘½åé»˜è®¤æŒ‰ç…§å½“å‰æ‰“å¼€çš„æ–‡ä»¶å‘½åçš„ï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šã€‚å°±éœ€è¦æŒ¨ä¸ªæ‰“å¼€æ‰èƒ½ç¡®å®šè‡ªå·±æƒ³è¦æ‰“å¼€çš„çª—å£ã€‚\u003c/p\u003e","title":"VSCode ä»»åŠ¡æ å¤šçª—å£å‘½å"},{"content":"ä¿ç•™ç°åœº å‡çº§pipæ—¶å‡ºç°æŠ¥é”™ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image è§£å†³æ–¹æ³• åŠ ä¸Š--user\npython -m pip install --upgrade pip --user ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3error-could-not-install-packages-due-to-an-environmenterror-%E6%8B%92%E7%BB%9D%E8%AE%BF%E9%97%AE/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eå‡çº§\u003ccode\u003epip\u003c/code\u003eæ—¶å‡ºç°æŠ¥é”™ï¼š\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/08/27/21-59-14-303384c2d30eca141422d200bd35470c-20220827215913-0ec1da.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/08/27/21-59-14-303384c2d30eca141422d200bd35470c-20220827215913-0ec1da.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cp\u003eåŠ ä¸Š\u003ccode\u003e--user\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003epython -m pip install --upgrade pip  --user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"è§£å†³ ERROR Could not install packages due to an EnvironmentError æ‹’ç»è®¿é—®"},{"content":"ç¼–ç å­—ä½“ ç¼–ç å­—ä½“é¦–è¦åŸåˆ™ï¼šç­‰å®½ï¼Œç­‰å®½ï¼Œè¿˜æ˜¯ TMD ç­‰å®½ï¼\nJetBrains Mono \u003c!DOCTYPE html\u003e Responsive Image Hack \u003c!DOCTYPE html\u003e Responsive Image Source Code Pro \u003c!DOCTYPE html\u003e Responsive Image Fira Mono \u003c!DOCTYPE html\u003e Responsive Image Consolas ä¿åº•å­—ä½“ï¼ŒåŸºæœ¬ä¸Š Windows ç”µè„‘éƒ½æœ‰é¢„è£…ã€‚\né˜…è¯»å­—ä½“ çœ‹å¤šäº†é»‘ä½“ï¼Œå…¶å®æœ‰è¡¬çº¿çš„å®‹ä½“æ‰èƒ½ä½“ç°ä¸­æ–‡æ–‡å­—ä¹‹ç¾ã€‚\næ€æºå®‹ä½“ \u003c!DOCTYPE html\u003e Responsive Image åæ–‡ä¸­å®‹ \u003c!DOCTYPE html\u003e Responsive Image ä¸­æ–‡ç­‰å®½å­—ä½“ å¯¹äºæ—¢æƒ³è¦æ»¡è¶³ç¼–ç¨‹å­—ä½“åˆæƒ³è¦ä¸­æ–‡ä¹¦å†™çš„ï¼Œæœ‰å‡ æ¬¾ç­‰å®½ä¸­æ–‡å­—ä½“ä¹Ÿä¸é”™ã€‚\nSarasa Gothic / æ›´çº±é»‘ä½“ \u003c!DOCTYPE html\u003e Responsive Image æ€æºé»‘ä½“/Source Han Sans \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E7%BC%96%E7%A0%81%E5%AD%97%E4%BD%93%E4%B8%8E%E9%98%85%E8%AF%BB%E5%AD%97%E4%BD%93%E6%8E%A8%E8%8D%90/","summary":"\u003ch1 id=\"ç¼–ç å­—ä½“\"\u003eç¼–ç å­—ä½“\u003c/h1\u003e\n\u003cp\u003eç¼–ç å­—ä½“é¦–è¦åŸåˆ™ï¼šç­‰å®½ï¼Œç­‰å®½ï¼Œè¿˜æ˜¯ TMD ç­‰å®½ï¼\u003c/p\u003e\n\u003ch2 id=\"jetbrains-mono\"\u003e\u003ca href=\"https://www.jetbrains.com/lp/mono/\"\u003eJetBrains Mono\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/08/27/20-50-54-1fe539cd3cb0a6bc28936cb76fd28644-20220827205054-dccd39.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/08/27/20-50-54-1fe539cd3cb0a6bc28936cb76fd28644-20220827205054-dccd39.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003ch2 id=\"hack\"\u003e\u003ca href=\"https://github.com/source-foundry/Hack\"\u003eHack\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/08/27/20-53-57-e5174c7461a1d5b578a44d71f4a201c9-20220827205356-b71842.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/08/27/20-53-57-e5174c7461a1d5b578a44d71f4a201c9-20220827205356-b71842.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"ç¼–ç å­—ä½“ä¸é˜…è¯»å­—ä½“æ¨è"},{"content":"æœ€ç®€å•çš„æ–¹å¼ ä½¿ç”¨å‚æ•°æŒ‡å®šå®‰è£…è·¯å¾„ï¼š\npip install -t D:\\python3.5(32bit)\\Lib\\site-packages numpy å¨å¨å¨ å¦‚æœç”µè„‘ä¸Šå®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„Pythonçš„è¯ï¼Œåœ¨éœ€è¦ä½¿ç”¨pipå®‰è£…æ–°packageæ—¶ï¼Œå°±ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼šæˆ‘æŠŠpackageå®‰è£…åˆ°å“ªäº†ï¼Ÿ\nå› ä¸ºæ¯ä¸ªç‰ˆæœ¬çš„ Python æ˜¯æœ‰è‡ªå·±ç‹¬ç«‹çš„pipï¼Œä¹Ÿæœ‰ç‹¬ç«‹çš„libç›®å½•çš„ï¼Œç®¡ç†çš„åŒ…ä¹Ÿå„ä¸åŒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨é»˜è®¤çš„pipå‘½ä»¤å®‰è£…çš„ä½ç½®ï¼Œå°±æ˜¯é»˜è®¤çš„pythonä½ç½®ã€‚\næ¯”å¦‚æˆ‘åœ¨ç»ˆç«¯æ•²ä¸‹pythonï¼Œä½¿ç”¨çš„æ˜¯python3.6é‚£ä¹ˆå®‰è£…çš„packageå°±ä¼šåœ¨C:\\Python36\\Lib\\site-packagesï¼ˆæ ¹æ®è‡ªå·±å®‰è£… Python çš„è·¯å¾„ç¨æœ‰åŒºåˆ«ï¼‰ã€‚\næƒ…æ™¯ä¸€ï¼šå®‰è£…çš„éƒ½æ˜¯ Python3.x ç‰ˆæœ¬ æœ‰æ—¶å€™ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘å‡†å¤‡è·‘çš„é¡¹ç›®åªèƒ½ç”¨python3.8ï¼Œæˆ‘å¾—æŠŠpackageå®‰è£…åˆ°python38é‡Œï¼Œæ€ä¹ˆåŠï¼Ÿ\næ–¹æ³• 1 æŠŠå…¶ä¸­ä¸€ä¸ªpythonç¯å¢ƒå˜é‡åˆ æ‰ï¼Œç•™ä¸‹ï¼ˆå¦‚æœæ²¡æœ‰éœ€è¦æ·»åŠ ï¼‰python38çš„è·¯å¾„å’Œscriptæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š\npython -m pip install xxxxx å› ä¸ºé»˜è®¤Pythonå·²ç»è¢«ä¿®æ”¹ä¸ºpython38ã€‚\næ–¹æ³• 2 ä½¿ç”¨æ–‡ç« å¼€å¤´çš„æ–¹å¼ï¼Œæœ€æ–¹ä¾¿ï¼Œç›´æ¥æŒ‡å®š python å…¨å±€è·¯å¾„\npip install -t D:\\python3.5(32bit)\\Lib\\site-packages numpy æƒ…æ™¯äºŒï¼šå®‰è£… Python2.x ä¸ Python3.x Python3.x ä½¿ç”¨ï¼š\npy -3 -m pip install numpy Python2.x ä½¿ç”¨ï¼š\npy -2 -m pip install numpy ","permalink":"https://lifeislife.cn/posts/%E5%A4%9A%E7%89%88%E6%9C%ACpython%E4%BD%BF%E7%94%A8pip%E5%AE%89%E8%A3%85package%E9%97%AE%E9%A2%98/","summary":"\u003ch2 id=\"æœ€ç®€å•çš„æ–¹å¼\"\u003eæœ€ç®€å•çš„æ–¹å¼\u003c/h2\u003e\n\u003cp\u003eä½¿ç”¨å‚æ•°æŒ‡å®šå®‰è£…è·¯å¾„ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003epip install -t D:\u003cspan class=\"se\"\u003e\\p\u003c/span\u003eython3.5\u003cspan class=\"o\"\u003e(\u003c/span\u003e32bit\u003cspan class=\"o\"\u003e)\u003c/span\u003e\u003cspan class=\"se\"\u003e\\L\u003c/span\u003eib\u003cspan class=\"se\"\u003e\\s\u003c/span\u003eite-packages numpy\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"å¨å¨å¨\"\u003eå¨å¨å¨\u003c/h2\u003e\n\u003cp\u003eå¦‚æœç”µè„‘ä¸Šå®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„\u003ccode\u003ePython\u003c/code\u003eçš„è¯ï¼Œåœ¨éœ€è¦ä½¿ç”¨\u003ccode\u003epip\u003c/code\u003eå®‰è£…æ–°\u003ccode\u003epackage\u003c/code\u003eæ—¶ï¼Œå°±ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼šæˆ‘æŠŠ\u003ccode\u003epackage\u003c/code\u003eå®‰è£…åˆ°å“ªäº†ï¼Ÿ\u003c/p\u003e","title":"å¤šç‰ˆæœ¬ Python ä½¿ç”¨ pip å®‰è£… package é—®é¢˜"},{"content":"ä¿ç•™ç°åœº \u003c!DOCTYPE html\u003e Responsive Image Unable to load picture or PDF file \u0026#39;xxxxxx\u0026#39; \u0026lt;to be read again\u0026gt; xxxx æ¢ç©¶åŸå›  å›¾ç‰‡é“¾æ¥é”™è¯¯ï¼Œè½¬æ¢ PDF è¿‡ç¨‹ä¸­ä¼šå…ˆä¸‹è½½æ‰€æœ‰å›¾ç‰‡åˆ°AppData/Local/Temp/tex2pdf.****æ–‡ä»¶å¤¹é‡Œï¼Œå› ä¸ºæ— æ³•æ­£å¸¸ä¸‹è½½å›¾ç‰‡ï¼Œæ‰€æœ‰æŠ¥é”™ã€‚æ£€æŸ¥å›¾ç‰‡é“¾æ¥æ˜¯å¦æœ‰æ•ˆã€‚\nè§£å†³æ–¹æ³• æ£€æŸ¥å›¾ç‰‡é“¾æ¥æ˜¯å¦æœ‰æ•ˆã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3unable-to-load-picture-or-pdf-file/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-25-10-0001dfd98f5655f4cb7f8c57dbb72723-20220826192508-b7c23b.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-25-10-0001dfd98f5655f4cb7f8c57dbb72723-20220826192508-b7c23b.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eUnable to load picture or PDF file \u003cspan class=\"s1\"\u003e\u0026#39;xxxxxx\u0026#39;\u003c/span\u003e \u0026lt;to be \u003cspan class=\"nb\"\u003eread\u003c/span\u003e again\u0026gt; xxxx\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eå›¾ç‰‡é“¾æ¥é”™è¯¯ï¼Œè½¬æ¢ PDF è¿‡ç¨‹ä¸­ä¼šå…ˆä¸‹è½½æ‰€æœ‰å›¾ç‰‡åˆ°\u003ccode\u003eAppData/Local/Temp/tex2pdf.****\u003c/code\u003eæ–‡ä»¶å¤¹é‡Œï¼Œå› ä¸ºæ— æ³•æ­£å¸¸ä¸‹è½½å›¾ç‰‡ï¼Œæ‰€æœ‰æŠ¥é”™ã€‚æ£€æŸ¥å›¾ç‰‡é“¾æ¥æ˜¯å¦æœ‰æ•ˆã€‚\u003c/p\u003e","title":"è§£å†³ Unable to åŠ è½½ picture or PDF file"},{"content":"è°ƒæ•™èƒŒæ™¯ åœ¨VSCodeä½¿ç”¨æœç´¢/æ›¿æ¢æ—¶ï¼ŒåŒ¹é…çš„å­—ç¬¦ä¼šâ€œé«˜äº®â€ï¼ˆé«˜äº®ä¸ªå±ï¼‰ï¼ŒçŸ¥é“è‡ªå·±å½“å‰æœåˆ°åˆ°ä»€ä¹ˆä½ç½®ï¼Œå¦‚æœåŒ¹é…å­—ç¬¦è¾ƒå°‘è¿˜å¥½ï¼Œå¦‚æœåŒ¹é…å¤ªå¤šï¼Œé»˜è®¤çš„é«˜äº®å°±å¾ˆéš¾å‘ç°å½“å‰å·²ç»æœç´¢åˆ°ä»€ä¹ˆä½ç½®äº†ã€‚æ¯”å¦‚æˆ‘å½“å‰åœ¨æœç´¢â€œæœç´¢â€è¿™ä¸¤ä¸ªå­—ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¤§å®¶è¿˜èƒ½çœ‹åˆ°æˆ‘å½“å‰æœç´¢åˆ°å“ªäº†å—ï¼Ÿ\nä½†æ˜¯å¦‚æœè®¾ç½®æˆè¿™æ ·å‘¢ï¼Ÿ\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½® æœç´¢åŒ¹é…æ—¶é«˜äº®é¢œè‰² \u003c!DOCTYPE html\u003e Responsive Image æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\n\u0026#34;workbench.colorCustomizations\u0026#34;: { \u0026#34;editor.findMatchBackground\u0026#34;: \u0026#34;#ff0000\u0026#34;, } è¡¨ç¤ºæœç´¢åŒ¹é…æ—¶é«˜äº®ï¼Œé«˜äº®é¢œè‰²ä¸ºçº¢è‰²ã€‚è‡ªå·±å¯ä»¥é€‰æ‹©åˆé€‚çš„é¢œè‰²ã€‚\næœç´¢ç»“æœé«˜äº® ä¸ä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œæœç´¢æ—¶ä¼šé«˜äº®æ‰€æœ‰çš„ç»“æœï¼Œä½†æ˜¯ç‚¹å‡»ç®­å¤´åŒ¹é…åˆ°å½“å‰ç»“æœæ—¶å°±æ˜¯ä¸Šé¢çš„é«˜äº®ï¼Œå…¶ä½™æœªåŒ¹é…çš„çŠ¶æ€å°±æ˜¯ä¸‹é¢çš„é«˜äº®ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u0026#34;workbench.colorCustomizations\u0026#34;: { \u0026#34;editor.findMatchHighlightBackground\u0026#34;: \u0026#34;#ff00ff\u0026#34;, } é€‰æ‹©æ—¶é¢œè‰² \u003c!DOCTYPE html\u003e Responsive Image \u0026#34;workbench.colorCustomizations\u0026#34;: { \u0026#34;editor.selectionBackground\u0026#34;: \u0026#34;#2f00ff\u0026#34;, } èŒƒå›´æœç´¢æ—¶èƒŒæ™¯é¢œè‰² æœ‰æ—¶å€™æœç´¢ä¸æ˜¯å…¨å±€æœç´¢ï¼Œæ˜¯åœ¨è‡ªå·±é€‰ä¸­çš„èŒƒå›´å†…æœç´¢ï¼Œé‚£è¿™ä¸ªèŒƒå›´ä¹Ÿæ˜¯å¯ä»¥é«˜äº®çš„ï¼Œå¼€å¯èŒƒå›´æœç´¢éœ€è¦ç‚¹å‡»æœç´¢æ¡†çš„æŒ‰é’®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u0026#34;workbench.colorCustomizations\u0026#34;: { \u0026#34;editor.findMatchHighlightBackground\u0026#34;: \u0026#34;#ff00ff\u0026#34;, \u0026#34;editor.findRangeHighlightBackground\u0026#34;: \u0026#34;#ff9900\u0026#34; } ","permalink":"https://lifeislife.cn/posts/vscode%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E5%8C%B9%E9%85%8D%E9%AB%98%E4%BA%AE/","summary":"\u003ch1 id=\"è°ƒæ•™èƒŒæ™¯\"\u003eè°ƒæ•™èƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eåœ¨VSCodeä½¿ç”¨æœç´¢/æ›¿æ¢æ—¶ï¼ŒåŒ¹é…çš„å­—ç¬¦ä¼šâ€œé«˜äº®â€ï¼ˆé«˜äº®ä¸ªå±ï¼‰ï¼ŒçŸ¥é“è‡ªå·±å½“å‰æœåˆ°åˆ°ä»€ä¹ˆä½ç½®ï¼Œå¦‚æœåŒ¹é…å­—ç¬¦è¾ƒå°‘è¿˜å¥½ï¼Œå¦‚æœåŒ¹é…å¤ªå¤šï¼Œé»˜è®¤çš„é«˜äº®å°±å¾ˆéš¾å‘ç°å½“å‰å·²ç»æœç´¢åˆ°ä»€ä¹ˆä½ç½®äº†ã€‚æ¯”å¦‚æˆ‘å½“å‰åœ¨æœç´¢â€œæœç´¢â€è¿™ä¸¤ä¸ªå­—ï¼š\u003c/p\u003e","title":"VSCodeæœç´¢ç»“æœ/åŒ¹é…é«˜äº®"},{"content":"ä»»åŠ¡åˆ‡æ¢ ä»»åŠ¡ç®€ä»‹ å¤šä»»åŠ¡ä¸ä¸Šä¸‹æ–‡ ä»»åŠ¡å°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤æ‰§è¡Œæµã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœæœ‰å¤šä¸ª HARTï¼Œé‚£å°±å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªæŒ‡ä»¤æ‰§è¡Œæµã€‚\nåä½œå¼å¤šä»»åŠ¡\nåä½œå¼ç¯å¢ƒä¸‹ï¼Œä¸‹ä¸€ä¸ªä»»åŠ¡è¢«è°ƒåº¦çš„å‰ææ˜¯å½“å‰ä»»åŠ¡ä¸»åŠ¨æ”¾å¼ƒå¤„ç†å™¨ã€‚\næŠ¢å å¼å¤šä»»åŠ¡\næŠ¢å å¼ç¯å¢ƒä¸‹ï¼Œæ“ä½œç³»ç»Ÿå®Œå…¨å†³å®šä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å‰¥å¤ºå½“å‰ä»»åŠ¡å¯¹å¤„ç†å™¨çš„ä½¿ç”¨ï¼Œå°†å¤„ç†å™¨æä¾›ç»™å…¶å®ƒä»»åŠ¡ã€‚\nåä½œå¼å¤šä»»åŠ¡ ä¸Šä¸‹æ–‡åˆ‡æ¢ \u003c!DOCTYPE html\u003e Responsive Image åˆ‡æ¢è¿‡ç¨‹éœ€è¦å®Œæˆï¼š\nä¿å­˜ä¸Šæ–‡ï¼ˆä¿å­˜ä¸Šä¸€ä¸ªä»»åŠ¡çš„å¯„å­˜å™¨ä¿¡æ¯ï¼‰ æ¢å¤ä¸‹æ–‡ï¼ˆæ¢å¤ä¸‹ä¸€ä¸ªä»»åŠ¡çš„å¯„å­˜å™¨ä¿¡æ¯ï¼‰ CPU ä¸­æœ‰ 32 ä¸ªå¯„å­˜å™¨ï¼Œä¿å­˜å„ç§çŠ¶æ€ï¼Œåœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¸»è¦å…³æ³¨ä¸¤ä¸ªå¯„å­˜å™¨ï¼šra(x1) å­˜æ”¾è¿”å›åœ°å€ï¼Œmscratch ä¸€ä¸ªç‰¹æƒå¯„å­˜å™¨ï¼ŒæŒ‡å‘å½“å‰å¤„ç†çš„ä»»åŠ¡ã€‚\nåˆ‡æ¢è¿‡ç¨‹ åˆå§‹åŒ–å¯„å­˜å™¨ï¼Œæ ¹æ®è°ƒç”¨çº¦å®šï¼Œraéƒ½åˆå§‹åŒ–ä¸ºä»»åŠ¡çš„ç¬¬ä¸€æ¡æŒ‡ä»¤åœ°å€ã€‚mscratchå¼€å§‹æŒ‡å‘ Task Aã€‚\n\u003c!DOCTYPE html\u003e Responsive Image Task A ç¨³å®šæ‰§è¡Œï¼Œå½“ä»–æƒ³è¦æ”¾å¼ƒ CPU æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ call swithc_toæŒ‡ä»¤ã€‚æ‰§è¡Œcallçš„è¿‡ç¨‹ä¸­ï¼Œå°±ä¼šæŠŠå½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€æ”¾åˆ° CPU çš„raå¯„å­˜å™¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ¥ä¸‹é‡Œè·³è½¬åˆ°swithc_toå‡½æ•°æ‰§è¡Œï¼Œè¯¥å‡½æ•°æ˜¯åˆ‡æ¢ä¸Šä¸‹æ–‡çš„æ ¸å¿ƒå‡½æ•°ã€‚é¦–å…ˆä¿å­˜ä¸Šæ–‡ï¼Œå°† CPU ä¸­çš„å¯„å­˜å™¨ä¿¡æ¯å…¨éƒ¨ä¿å­˜ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åˆ‡æ¢mscratchæŒ‡é’ˆåˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡ Task Bï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ¢å¤ä¸‹æ–‡ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å½“swithc_toå‡½æ•°æ‰§è¡Œåˆ°returnæ—¶ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œçš„æŒ‡ä»¤å°±æ˜¯ CPU ä¸­raä¿å­˜çš„é‚£æ¡æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯åœ°å€ä¸ºjæŒ‡ä»¤ï¼Œè¿™å°±æ˜¯ Task B çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œè¿™æ ·å°±å®Œæˆäº†ä»»åŠ¡çš„åˆ‡æ¢ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æºç åˆ†æ åˆ‡æ¢æ ¸å¿ƒå‡½æ•° switch_to switch_to: csrrw t6, mscratch, t6 # swap t6 and mscratch beqz t6, 1f # Notice: previous task may be NULL reg_save t6 # save context of prev task # æŠŠCPUçš„ä¿¡æ¯ä¿å­˜åˆ°å†…å­˜ # Save the actual t6 register, which we swapped into # mscratch mv t5, t6 # t5 points to the context of current task csrr t6, mscratch # read t6 back from mscratch sw t6, 120(t5) # save t6 with t5 as base 1: # switch mscratch to point to the context of the next task csrw mscratch, a0 # Restore all GP registers # Use t6 to point to the context of the new task mv t6, a0 reg_restore t6 # æŠŠå†…å­˜é‡Œçš„ä¿¡æ¯æ¢å¤åˆ°CPU # Do actual context switching. ret åˆ›å»ºå’Œåˆå§‹åŒ–ç¬¬ä¸€å·ä»»åŠ¡ ä½¿ç”¨ç»“æ„ä½“contextä¿å­˜ä¸Šä¸‹æ–‡ä¸­å¯„å­˜å™¨çš„ä¿¡æ¯ï¼š\nstruct context { /* ignore x0 */ reg_t ra; reg_t sp; reg_t gp; reg_t tp; reg_t t0; reg_t t1; reg_t t2; reg_t s0; reg_t s1; reg_t a0; reg_t a1; reg_t a2; reg_t a3; reg_t a4; reg_t a5; reg_t a6; reg_t a7; reg_t s2; reg_t s3; reg_t s4; reg_t s5; reg_t s6; reg_t s7; reg_t s8; reg_t s9; reg_t s10; reg_t s11; reg_t t3; reg_t t4; reg_t t5; reg_t t6; }; #define STACK_SIZE 1024 uint8_t task_stack[STACK_SIZE]; struct context ctx_task; å†™ä¸€ä¸ªä»»åŠ¡å‡½æ•°ï¼ŒåŠŸèƒ½å°±æ˜¯æ¯éš”1000 æ»´ç­”æ‰“å°ä¸€å¥è¯ã€‚\nvoid user_task0(void) { uart_puts(\u0026#34;Task 0: Created!\\n\u0026#34;); while (1) { uart_puts(\u0026#34;Task 0: Running...\\n\u0026#34;); task_delay(1000); } } åˆå§‹åŒ–ä»»åŠ¡ï¼Œéœ€è¦åˆå§‹åŒ–æ ˆï¼Œå¹¶æŠŠä»»åŠ¡çš„é¦–åœ°å€ä¿å­˜åˆ°contextçš„raå¯„å­˜å™¨ã€‚\nvoid sched_init() { w_mscratch(0); ctx_task.sp = (reg_t) \u0026amp;task_stack[STACK_SIZE - 1]; ctx_task.ra = (reg_t) user_task0; } åˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªç”¨æˆ·ä»»åŠ¡ switch_toå‡½æ•°çš„å‚æ•°å°±æ˜¯ä¸Šä¸‹æ–‡ï¼Œå½“æ‰§è¡Œåˆ°retæ—¶ä¹Ÿå°±åˆ‡æ¢åˆ°äº†user_task0ã€‚\nvoid schedule() { struct context *next = \u0026amp;ctx_task; switch_to(next); } ä»¥ä¸Šæ˜¯å•ä»»åŠ¡çš„æƒ…å†µï¼Œå¦‚æœæ˜¯å¤šä»»åŠ¡æ—¶ï¼Œå°±ç”¨æ•°ç»„ä¿å­˜å¤šä¸ªcontextï¼Œæœ€å¤§æ”¯æŒ 10 ä¸ªä»»åŠ¡ã€‚\n#define MAX_TASKS 10 #define STACK_SIZE 1024 uint8_t task_stack[MAX_TASKS][STACK_SIZE]; struct context ctx_tasks[MAX_TASKS]; ä½¿ç”¨ç®€å•çš„æ±‚æ¨¡å–ä½™çš„æ–¹å¼ç¡®å®šä¸‹ä¸€ä¸ªä»»åŠ¡æ˜¯å“ªä¸€ä¸ªï¼š\n/* * _top is used to mark the max available position of ctx_tasks * _current is used to point to the context of current task */ static int _top = 0; static int _current = -1; /* * implment a simple cycle FIFO schedular */ void schedule() { if (_top \u0026lt;= 0) { panic(\u0026#34;Num of task should be greater than zero!\u0026#34;); return; } _current = (_current + 1) % _top; struct context *next = \u0026amp;(ctx_tasks[_current]); switch_to(next); } å› ä¸ºå¤šä¸ªä»»åŠ¡åä½œï¼Œéœ€è¦ä¸€ä¸ªå‡½æ•°æ¥è¡¨ç¤ºä¸»åŠ¨æ”¾å¼ƒ CPUï¼š\n/* * DESCRIPTION * task_yield() causes the calling task to relinquish the CPU and a new * task gets to run. */ void task_yield() { schedule(); } è°ƒç”¨å…³ç³» \u003c!DOCTYPE html\u003e Responsive Image æŠ¢å å¼å¤šä»»åŠ¡ æŠ¢å å¼å¤šä»»åŠ¡ï¼šæŠ¢å å¼ç¯å¢ƒä¸‹ï¼Œæ“ä½œç³»ç»Ÿå®Œå…¨å†³å®šä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å‰¥å¤ºå½“å‰ä»»åŠ¡å¯¹å¤„ç†å™¨çš„ä½¿ç”¨ï¼Œå°†å¤„ç†å™¨æä¾›ç»™å…¶ä»–ä»»åŠ¡ã€‚\nå¯„å­˜å™¨ \u003c!DOCTYPE html\u003e Responsive Image å¯¹ MSIP å†™å…¥ 1 æ—¶è§¦å‘ è½¯ä¸­æ–­ï¼Œå†™å…¥ 0 æ—¶è¡¨ç¤ºå¯¹ä¸­æ–­è¿›è¡Œåº”ç­”ï¼Œä¹Ÿå°±æ˜¯å¤„ç†å®Œäº†è½¯ä¸­æ–­ã€‚\nä»»åŠ¡åŒæ­¥ä¸é” å¹¶å‘ä¸åŒæ­¥ å¹¶å‘ï¼šå¤šä¸ªæ§åˆ¶æµåŒæ—¶æ‰§è¡Œ\nå¤šå¤„ç†å™¨å¤šä»»åŠ¡ å•å¤„ç†å™¨å¤šä»»åŠ¡ å•å¤„ç†å™¨ä»»åŠ¡ + ä¸­æ–­ åŒæ­¥ï¼šä¸ºäº†ä¿è¯åœ¨å¹¶å‘æ‰§è¡Œçš„ç¯å¢ƒä¸­å„ä¸ªæ§åˆ¶æµå¯ä»¥æœ‰æ•ˆæ‰§è¡Œè€Œé‡‡ç”¨çš„ä¸€ç§ç¼–ç¨‹æŠ€æœ¯\nä¸´ç•ŒåŒºã€é”ä¸æ­»é” ä¸´ç•ŒåŒºï¼šåœ¨å¹¶å‘çš„ç¨‹åºæ‰§è¡Œç¯å¢ƒä¸­ï¼Œæ‰€è°“ä¸´ç•ŒåŒºæŒ‡çš„æ˜¯ä¸€ä¸ªä¼šè®¿é—®å…±äº«èµ„æºçš„æŒ‡ä»¤ç‰‡æ®µï¼Œè€Œä¸”å½“è¿™æ ·çš„å¤šä¸ªæŒ‡ä»¤ç‰‡æ®µåŒæ—¶è®¿é—®æŸä¸ªå…±äº«èµ„æºæ—¶å¯èƒ½ä¼šå¼•å‘é—®é¢˜ã€‚\nåœ¨å¹¶å‘ç¯å¢ƒä¸‹ä¸ºäº†æœ‰æ•ˆæ§åˆ¶ä¸´ç•ŒåŒºçš„æ‰§è¡Œï¼ˆåŒæ­¥ï¼‰ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯å½“æœ‰ä¸€ä¸ªæ§åˆ¶æµè¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå…¶ä»–ç›¸å…³æ§åˆ¶æµå¿…é¡»ç­‰å¾…ã€‚\né”ï¼šä¸€ç§å¸¸è§çš„ç”¨æ¥å®ç°åŒæ­¥çš„æŠ€æœ¯\nä¸å¯ç¡çœ é” å¯ç¡çœ é” \u003c!DOCTYPE html\u003e Responsive Image å½“å‘ç”Ÿä¸­æ–­æ—¶ï¼Œå³è¾¹çš„ä»»åŠ¡è·å– CPU èµ„æºï¼Œå¼€å§‹æ‰§è¡Œï¼Œä½†æ˜¯è·å–é”æ—¶å‘ç°å½“å‰å·²ç»å¤„äºé”å®šçŠ¶æ€ï¼Œæ‰€ä»¥å°±å¤„äºç­‰å¾…çŠ¶æ€ã€‚\nå½“ä¸‹ä¸€ä¸ªä¸­æ–­å‘ç”Ÿï¼Œå·¦ä¾§ä»»åŠ¡å›å» CPU åä¼šç»§ç»­æ‰§è¡Œï¼Œå®é™…ä¸Šå·¦ä¾§ä»»åŠ¡ä¹Ÿä¸å¿…ç­‰å¾…ï¼Œä»–å¯ä»¥ä¸€ç›´æ‰§è¡Œï¼Œå› ä¸ºå³ä¾§ä»»åŠ¡ä¸€ç›´æ— æ³•è·å–é”ã€‚\nå½“ç„¶ï¼Œå³ä¾§ä»»åŠ¡ä¹Ÿå¯ä»¥ä¸€ç›´è§¦å‘ä¸­æ–­ï¼Œè®©å·¦ä¾§ä»»åŠ¡è®©å‡º CPUã€‚ä¹Ÿå°±æ˜¯å·¦ä¾§ä»»åŠ¡é€»è¾‘ä¸Šå¯ä»¥ä¸€ç›´è¿è¡Œï¼Œä½†æ˜¯å®é™…è¿˜æ˜¯ä¼šè¢«æ‰“æ–­ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å½“å·¦ä¾§ä»»åŠ¡æ‰§è¡Œå®Œé‡Šæ”¾é”ï¼Œå³ä¾§ä»»åŠ¡å°±å¯ä»¥è·å–é”ï¼Œå¹¶æ­£å¸¸æ‰§è¡Œä¸‹å»ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ­»é”ï¼šå½“æ§åˆ¶æµæ‰§è¡Œè·¯å¾„ä¸­ä¼šæ¶‰åŠå¤šä¸ªé”ï¼Œå¹¶ä¸”è¿™äº›æ§åˆ¶æµæ‰§è¡Œè·¯å¾„è·å–çš„é¡ºåºä¸åŒæ—¶å°±å¯èƒ½å‘é€æ­»é”ã€‚\nè§£å†³æ­»é”ï¼š\nè°ƒæ•´è·å–é”çš„é¡ºåºï¼Œæ¯”å¦‚ä¿æŒä¸€è‡´ å°½å¯èƒ½é˜²æ­¢ä»»åŠ¡åœ¨æŒæœ‰ä¸€æŠŠé”åŒæ—¶ç”³è¯·å…¶ä»–é” è‡ªæ—‹é” \u003c!DOCTYPE html\u003e Responsive Image ä¸èƒ½ä» C è¯­è¨€çš„å±‚é¢å»ç†è§£é”ï¼Œåº”è¯¥è¦ä»æŒ‡ä»¤çº§åˆ«å»ç†è§£ã€‚ä¸Šé¢çš„è¿™ç§ä¸Šé”æ–¹å¼æ˜¯æœ‰é—®é¢˜çš„ã€‚\nå¦‚æœä¸¤ä¸ªæ§åˆ¶æµåŒæ—¶åŠ é”ï¼Œå°±å¯èƒ½åŒæ—¶è·å–äº†é”ï¼Œå› ä¸ºåœ¨æ±‡ç¼–æŒ‡ä»¤çº§åˆ«ï¼Œæ¯æ¡æŒ‡ä»¤æ‰§è¡Œä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image AMOSWAP\nloop: lw a4, -20(s0) # å‚æ•°1 li a5, 1 # å‚æ•° 2 amoswap.w.aq a5, a5, (a4) # å°†a5ä¸a4æŒ‡å‘çš„å†…å­˜çš„å€¼è¿›è¡Œäº¤æ¢ # å°† 1 ä¸ a4 äº¤æ¢ï¼Œè¡¨ç¤ºå¦‚æœåŸæ¥ä¸Šé”ï¼ˆ1ï¼‰é‚£å°±ä»€ä¹ˆéƒ½æ²¡åš # å¦‚æœåŸæ¥æ²¡ä¸Šé”ï¼ˆ0ï¼‰é‚£å°±ç«‹å³ä¸Šé” mv a3, a5 bnez a3,loop ![](https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/08/28/21-38-57-b7cece2166dba14bd128970cefdd2702-20220828213857-b116cd.png) ","permalink":"https://lifeislife.cn/posts/risc-v%E5%85%A5%E9%97%A8-%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2%E4%B8%8E%E9%94%81/","summary":"\u003ch1 id=\"ä»»åŠ¡åˆ‡æ¢\"\u003eä»»åŠ¡åˆ‡æ¢\u003c/h1\u003e\n\u003ch2 id=\"ä»»åŠ¡ç®€ä»‹\"\u003eä»»åŠ¡ç®€ä»‹\u003c/h2\u003e\n\u003ch3 id=\"å¤šä»»åŠ¡ä¸ä¸Šä¸‹æ–‡\"\u003eå¤šä»»åŠ¡ä¸ä¸Šä¸‹æ–‡\u003c/h3\u003e\n\u003cp\u003eä»»åŠ¡å°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤æ‰§è¡Œæµã€‚\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20220826151826.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20220826151826.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eå¦‚æœæœ‰å¤šä¸ª HARTï¼Œé‚£å°±å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªæŒ‡ä»¤æ‰§è¡Œæµã€‚\u003c/p\u003e","title":"RISC-V å…¥é—¨ - ä»»åŠ¡åˆ‡æ¢ä¸é”"},{"content":"å¦‚ä½•è®¡ç®—å †çš„å¤§å°ï¼Œåªæœ‰ç®—å‡ºå¯ç”¨ç©ºé—´æ‰èƒ½å¯¹å…¶ç®¡ç†ã€‚\nENTRY\nåŠŸèƒ½ï¼šç”¨äºè®¾ç½®å…¥å£ç‚¹ï¼Œå³ç¨‹åºä¸­æ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ symbol å‚æ•°æ˜¯ä¸€ä¸ªç¬¦å·çš„åç§°\nOUTPUT_ARCH\nåŠŸèƒ½ï¼šæŒ‡å®šè¾“å‡ºæ–‡ä»¶æ‰€é€‚ç”¨çš„è®¡ç®—æœºä½“ç³»æ¶æ„\nä¸ºä»€ä¹ˆç”¨ riscv64-unknown-elf-gccï¼Œä½†æ˜¯ç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶æ˜¯ 32 ä½ç¨‹åºï¼Ÿ riscv64 æ˜¯ host æ˜¯ 64 ä½ç³»ç»Ÿï¼Œç¼–è¯‘ target æ˜¯ç”± gcc çš„å‚æ•°å†³å®š\nMEMORY\nåŠŸèƒ½ï¼šç”¨äºæè¿°ç›®æ ‡æœºå™¨ä¸Šå†…å­˜åŒºåŸŸçš„ä½ç½®ï¼Œå¤§å°å’Œç›¸å…³\nMEMORY { /* å†…å­˜ç±»å‹ä¸ºROMï¼Œèµ·å§‹åœ°å€0ï¼Œé•¿åº¦256K */ rom(rx):ORIGIN = 0, LENGTH = 256K /* å†…å­˜ç±»å‹ä¸ºRAMï¼Œèµ·å§‹åœ°å€0x40000000ï¼Œé•¿åº¦4M */ ram(!rx):org = 0x40000000, l = 4M } TODOï¼šæ‹¬å·é‡Œçš„ rx å«ä¹‰æ˜¯ï¼Ÿ\nSECTION\nåŠŸèƒ½ï¼šå‘Šè¯‰é“¾æ¥å™¨å¦‚ä½•å°† input sections æ˜ å°„åˆ° output sectionsï¼Œä»¥åŠå¦‚ä½•å°† output sections æ”¾ç½®åˆ°å†…å­˜ä¸­ã€‚\nSECTION { .=0x0000; .text:{*(.text)} .=0x8000000; .data:{*(.data)} .bss:{*(.bss)} }\u0026gt;ram PROVIDE\nåŠŸèƒ½ï¼š\nå¯ä»¥åœ¨ Linker Script ä¸­å®šä¹‰ç¬¦å·ï¼ˆSymbolsï¼‰ æ¯ä¸ªç¬¦å·åŒ…æ‹¬ä¸€ä¸ªåå­—ï¼ˆname) å’Œä¸€ä¸ªå¯¹åº”çš„åœ°å€å€¼ï¼ˆaddressï¼‰ åœ¨ä»£ç ä¸­å¯ä»¥è®¿é—®è¿™äº›ç¬¦å·ï¼Œç­‰åŒäºè®¿é—®ä¸€ä¸ªåœ°å€ã€‚ .bss :{ PROVIDE(_bss_start = .); /* å½“å‰åœ°å€èµ‹å€¼ç»™ç¬¦å·_bss_start */ *(.sbss .sbss.*) *(.bss .bss.*) *(COMMON) PROVIDE(_bss_end = .); } \u0026gt;ram PROVIDE(_memory_start = ORIGIN(ram)); PROVIDE(_memory_end = ORIGIN(ram) + LENGTH(ram)); PROVIDE(_heap_start = _bss_end); /* å †ç©ºé—´å°±æ˜¯æ¥åœ¨äº†bssæ®µä¹‹åï¼Œæ‰€ä»¥å †å¼€å§‹åœ°å€å°±æ˜¯bssç»“æŸåœ°å€ */ PROVIDE(_heap_size = _memory_end - _heap_start); /* è®¡ç®—å †å¤§å° */ .globalè¡¨ç¤ºå…¨å±€å˜é‡ï¼Œ.wordè¡¨ç¤ºå®šä¹‰å˜é‡ï¼Œä¸‹é¢çš„ä»£ç å°±æ˜¯å®šä¹‰ä¸€äº›å…¨å±€å˜é‡ï¼Œæ–¹ä¾¿åœ¨ C ä»£ç ä¸­ä½¿ç”¨ã€‚\n/* mem.S */ .section .rodata .global HEAP_START HEAP_START: .word _heap_start .global HEAP_SIZE HEAP_SIZE: .word _heap_size .global TEXT_START TEXT_START: .word _text_start .global TEXT_END TEXT_END: .word _text_end .global DATA_START DATA_START: .word _data_start .global DATA_END DATA_END: .word _data_end .global RODATA_START RODATA_START: .word _rodata_start .global RODATA_END RODATA_END: .word _rodata_end .global BSS_START BSS_START: .word _bss_start .global BSS_END BSS_END: .word _bss_end /* * Following global vars are defined in mem.S */ extern uint32_t TEXT_START; extern uint32_t TEXT_END; extern uint32_t DATA_START; extern uint32_t DATA_END; extern uint32_t RODATA_START; extern uint32_t RODATA_END; extern uint32_t BSS_START; extern uint32_t BSS_END; extern uint32_t HEAP_START; extern uint32_t HEAP_SIZE; #define PAGE_SIZE 4096 static uint32_t _num_pages = _num_pages = (HEAP_SIZE / PAGE_SIZE) - 8; å®ç° Page çº§åˆ«çš„å†…å­˜åˆ†é…ä¸é‡Šæ”¾\næ—¥å¸¸ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼Œéƒ½æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½åˆ†é…ç©ºé—´ï¼Œä½†æ˜¯ä¸ºäº†æ•™å­¦æ–¹ä¾¿ï¼ŒRVOS æ˜¯ä»¥ Page ä¸ºå•ä½åˆ†é…å†…å­˜ã€‚\næ•°æ®ç»“æ„è®¾è®¡\næ•°ç»„æ–¹å¼ç®¡ç† å°†å†…å­˜æ¨¡æ‹Ÿä¸ºä¸€ä¸ªè¿ç»­çš„æ•°ç»„ï¼Œæ•°ç»„çš„å‰éƒ¨é¢„ç•™ 8 ä¸ª Page æ¥ç®¡ç†å…¶ä½™çš„å†…å­˜ã€‚ç›®å‰è€ƒè™‘ç®¡ç†çš„çŠ¶æ€æœ‰ï¼š\nè¿™ Page æ˜¯å¦è¢«ä½¿ç”¨äº† è¿™ä¸ª Page æ˜¯ä¸æ˜¯æœ€åä¸€å—åˆ†é…çš„å†…å­˜ï¼Œæ–¹ä¾¿æˆ‘ä»¬é‡Šæ”¾å†…å­˜æ—¶æ‰¾åˆ°æœ€åä¸€å—åˆ†é…çš„å†…å­˜ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª 8 bit çš„flagæ¥è®°å½•è¿™äº›ä¿¡æ¯ï¼Œflag bit[0]è¡¨ç¤ºæ˜¯å¦å·²ä½¿ç”¨ï¼Œflag bit[1]è¡¨ç¤ºæ˜¯å¦æ˜¯æœ€åä¸€ä¸ªåˆ†é…çš„é¡µé¢ã€‚\n/* * Page Descriptor * flags: * - bit 0: flag if this page is taken(allocated) * - bit 1: flag if this page is the last page of the memory block allocated */ struct Page { uint8_t flags; }; ä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ª Page éƒ½ç”±ä¸€ä¸ª 8 bit çš„ç»“æ„ä½“struct Pageç®¡ç†ï¼Œæˆ‘ä»¬æ€»å…±åˆ†é…äº† 8 ä¸ª Page ç”¨æ¥ç®¡ç†ï¼Œä¸€ä¸ª Page å  4Kï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¸€ä¸ªç®¡ç†$8 \\times 4096 = 32768$ä¸ª Pageã€‚é‚£å°±åˆšå¥½å¯ä»¥ç®¡ç†$32768 \\times 4096 = 134217728 \\text{bit}$å†…å­˜=128Mã€‚\n\u003c!DOCTYPE html\u003e Responsive Image Page åˆ†é…ä¸é‡Šæ”¾æ¥å£è®¾è®¡\n/* * åˆ†é…è¿ç»­nä¸ªå¯ç”¨ç‰©ç†é¡µ * - npages: éœ€è¦åˆ†é…çš„é¡µçš„ä¸ªæ•° */ void *page_alloc(int npages) { /* Note we are searching the page descriptor bitmaps. */ int found = 0; struct Page *page_i = (struct Page *)HEAP_START; for (int i = 0; i \u0026lt; (_num_pages - npages); i++) { if (_is_free(page_i)) { found = 1; /* * æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨Pageï¼Œç»§ç»­åˆ¤æ–­æ˜¯å¦æœ‰Nä¸ªè¿ç»­å¯ç”¨page */ struct Page *page_j = page_i; for (int j = i; j \u0026lt; (i + npages); j++) { if (!_is_free(page_j)) { found = 0; break; } page_j++; } /* * æ‰¾åˆ°äº†è¿ç»­çš„Nä¸ªå¯ç”¨pageï¼Œå°†Nä¸ªpageè®¾ç½®ä¸ºå·²åˆ†é…çŠ¶æ€ */ if (found) { struct Page *page_k = page_i; for (int k = i; k \u0026lt; (i + npages); k++) { _set_flag(page_k, PAGE_TAKEN); page_k++; } page_k--; _set_flag(page_k, PAGE_LAST); // è¿”å›å¯ç”¨pageé¦–åœ°å€ return (void *)(_alloc_start + i * PAGE_SIZE); } } page_i++; } return NULL; } /* * é‡Šæ”¾å·²åˆ†é…çš„ç‰©ç†é¡µ * - p: å¾…é‡Šæ”¾çš„é¦–åœ°å€ */ void page_free(void *p) { /* * åˆ¤æ–­éæ³•è¾“å…¥ï¼Œpä¸èƒ½ä¸ºç©ºæˆ–è€…è¶…å‡ºæœ€å¤§å¯åˆ†é…å¤§å° */ if (!p || (uint32_t)p \u0026gt;= _alloc_end) { return; } /* è®¡ç®—å‡ºè¿™ä¸ªé¦–åœ°å€pæ‰€åœ¨çš„pageçš„æè¿°ç¬¦ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°ç¬¬å‡ ä¸ªæè¿°ç¬¦åœ¨ç®¡ç†è¿™å—å†…å­˜ */ struct Page *page = (struct Page *)HEAP_START; page += ((uint32_t)p - _alloc_start)/ PAGE_SIZE; /* å¾ªç¯æ¸…ç©ºæ ‡è¯† */ while (!_is_free(page)) { if (_is_last(page)) { _clear(page); break; } else { _clear(page); page++;; } } } ","permalink":"https://lifeislife.cn/posts/risc-v%E5%85%A5%E9%97%A8-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","summary":"\u003cp\u003eå¦‚ä½•è®¡ç®—å †çš„å¤§å°ï¼Œåªæœ‰ç®—å‡ºå¯ç”¨ç©ºé—´æ‰èƒ½å¯¹å…¶ç®¡ç†ã€‚\u003c/p\u003e\n\u003cp\u003eENTRY\u003c/p\u003e\n\u003cp\u003eåŠŸèƒ½ï¼šç”¨äºè®¾ç½®å…¥å£ç‚¹ï¼Œå³ç¨‹åºä¸­æ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤\nsymbol å‚æ•°æ˜¯ä¸€ä¸ªç¬¦å·çš„åç§°\u003c/p\u003e\n\u003cp\u003eOUTPUT_ARCH\u003c/p\u003e\n\u003cp\u003eåŠŸèƒ½ï¼šæŒ‡å®šè¾“å‡ºæ–‡ä»¶æ‰€é€‚ç”¨çš„è®¡ç®—æœºä½“ç³»æ¶æ„\u003c/p\u003e","title":"RISC-V å…¥é—¨ - å†…å­˜ç®¡ç†"},{"content":"æ€»è§ˆ backgroundcolor èƒŒæ™¯é¢œè‰² numbers ä»£ç è¡Œå· \\lstset{ numbers = left, % è¡Œå·é å·¦ basicstyle = \\ttfamily, % åŸºæœ¬ä»£ç é£æ ¼ keywordstyle = \\bfseries, % å…³é”®å­—é£æ ¼ commentstyle = \\ttfamily, % æ³¨é‡Šçš„é£æ ¼ frame = single, % é˜´å½±æ•ˆæœ escapeinside=``, % è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡ xleftmargin=2em,xrightmargin=2em, aboveskip=1em, breaklines = true, language = C, % è¯­è¨€é€‰C } \u003c!DOCTYPE html\u003e Responsive Image \\lstset{ numbers = right, % è¡Œå·é å·¦ basicstyle = \\ttfamily, % åŸºæœ¬ä»£ç é£æ ¼ keywordstyle = \\bfseries, % å…³é”®å­—é£æ ¼ commentstyle = \\ttfamily, % æ³¨é‡Šçš„é£æ ¼ frame = single, % é˜´å½±æ•ˆæœ escapeinside=``, % è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡ xleftmargin=2em,xrightmargin=2em, aboveskip=1em, breaklines = true, language = C, % è¯­è¨€é€‰C } \u003c!DOCTYPE html\u003e Responsive Image stepnumber é—´éš”æ˜¾ç¤ºè¡Œå· \\lstset{ numbers = right, % è¡Œå·é å·¦ stepnumber = 2, % æ¯ä¸¤è¡Œæ˜¾ç¤ºä¸€æ¬¡è¡Œå· } firstnumber å¼€å§‹è¡Œå· firstnumber = 10 å¼€å§‹è¡Œå·ä¸º 10 firstnumber = last å¼€å§‹è¡Œå·ä¸ºä¸Šä¸€æ®µ listing çš„ç»“æŸè¡Œå· xleftmargin/xrightmargin/aboveskip/below è·ç¦»å¤–éƒ¨å…ƒç´ è·ç¦» è®¾ç½®ä»£ç å—ä¸Šä¸‹å·¦å³çš„è·ç¦»ï¼Œä¸å¤–éƒ¨å…ƒç´ çš„è·ç¦»ï¼Œè€Œä¸æ˜¯ä»£ç ä¸è¾¹æ¡†çš„è·ç¦»ã€‚\n\\lstset{ basicstyle = \\ttfamily, % åŸºæœ¬ä»£ç é£æ ¼ numbers = left, % è¡Œå·é å·¦ keywordstyle = \\bfseries, % å…³é”®å­—é£æ ¼ commentstyle = \\ttfamily, % æ³¨é‡Šçš„é£æ ¼ frame = single, % é˜´å½±æ•ˆæœ escapeinside=``, % è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡ xleftmargin=0em,xrightmargin=0em, aboveskip=0em,belowskip=0em, breaklines = true, language = C, % è¯­è¨€é€‰C } \u003c!DOCTYPE html\u003e Responsive Image \\lstset{ basicstyle = \\ttfamily, % åŸºæœ¬ä»£ç é£æ ¼ numbers = left, % è¡Œå·é å·¦ keywordstyle = \\bfseries, % å…³é”®å­—é£æ ¼ commentstyle = \\ttfamily, % æ³¨é‡Šçš„é£æ ¼ frame = single, % çº¿æ¡† escapeinside =``, % è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡ xleftmargin =5em, xrightmargin =0em, aboveskip =2em, belowskip =0em, breaklines = true, language = C, % è¯­è¨€é€‰C } \u003c!DOCTYPE html\u003e Responsive Image frame è¾¹æ¡†æ ·å¼ è®¾ç½®è¾¹æ¡†æ ·å¼ï¼š\nnone:æ— æ¡† single:å•çº¿æ¡† leftline,topline,rightline,bottomline:ä¸Šä¸‹å·¦å³çš„çº¿ ltrb:ä¸Šé¢å‚æ•°çš„ç¼©å†™ï¼Œframe=lr è¡¨ç¤ºå·¦å³æœ‰çº¿ LTRB:å¤§å†™è¡¨ç¤ºåŒçº¿ \\lstset{ frame = single, % çº¿æ¡† } \u003c!DOCTYPE html\u003e Responsive Image \\lstset{ frame = shadowbox, % é˜´å½± } \u003c!DOCTYPE html\u003e Responsive Image \\lstset{ frame = LR, % å·¦å³è¾¹æ¡†åŒçº¿ } \u003c!DOCTYPE html\u003e Responsive Image rulesepcolor é˜´å½±é¢œè‰² \\lstset{ frame = shadowbox, % é˜´å½± rulesepcolor= \\color{ red!20!green!20!blue!20} , % é˜´å½±é¢œè‰² } \u003c!DOCTYPE html\u003e Responsive Image rulecolor è¾¹æ¡†é¢œè‰² \\lstset{ rulecolor = \\color{red}, % è¾¹æ¡†é¢œè‰² } \u003c!DOCTYPE html\u003e Responsive Image frameround è¾¹æ¡†å€’è§’ \\lstset{ frameround = fftt, % è¾¹æ¡†å€’è§’ï¼Œfè¡¨ç¤ºå°–è§’ï¼Œtè¡¨ç¤ºå€’è§’ï¼Œé¡ºåºæ˜¯ç¬¬ä¸€ä¸ªå­—æ¯è¡¨ç¤ºå³ä¸Šè§’ï¼Œé¡ºæ—¶é’ˆ } \u003c!DOCTYPE html\u003e Responsive Image framesep è¾¹æ¡†ä¸ä»£ç çš„è·ç¦» ä»£ç ä¸ä¼šç§»åŠ¨ï¼ŒåŠ¨çš„æ˜¯è¾¹æ¡†ã€‚\n\\lstset{ framesep = 6em, % è¾¹æ¡†ä¸ä»£ç çš„è·ç¦» } \u003c!DOCTYPE html\u003e Responsive Image \\lstset{ framesep = 6em, % è¾¹æ¡†ä¸ä»£ç çš„è·ç¦» } \u003c!DOCTYPE html\u003e Responsive Image framexleftmargin/framexrightmargin/frameytopmargin/frameybottommargin è¾¹æ¡†ä¸ä»£ç è·ç¦» \\lstset{ framexleftmargin = -2em, % å·¦è¾¹æ¡†ä¸ä»£ç è·ç¦» framexrightmargin = -5em, % å³è¾¹æ¡†ä¸ä»£ç è·ç¦» framexbottommargin = 2em, % ä¸‹è¾¹æ¡†ä¸ä»£ç è·ç¦» framextopmargin = 2em, % ä¸Šè¾¹æ¡†ä¸ä»£ç è·ç¦» } \u003c!DOCTYPE html\u003e Responsive Image \\lstset{ framexleftmargin = 1em, % å·¦è¾¹æ¡†ä¸ä»£ç è·ç¦» framexrightmargin = 1em, % å³è¾¹æ¡†ä¸ä»£ç è·ç¦» framexbottommargin = 0em, % ä¸‹è¾¹æ¡†ä¸ä»£ç è·ç¦» framextopmargin = 0em, % ä¸Šè¾¹æ¡†ä¸ä»£ç è·ç¦» } \u003c!DOCTYPE html\u003e Responsive Image breaklines å¼ºåˆ¶æ¢è¡Œ è®¾ç½®ä»£ç è¶…é•¿æ—¶è‡ªåŠ¨æ¢è¡Œï¼š\n\\lstset{ breaklines = false, % ä¸æ¢è¡Œ } \u003c!DOCTYPE html\u003e Responsive Image \\lstset{ breaklines = true, % ä¸æ¢è¡Œ } \u003c!DOCTYPE html\u003e Responsive Image numberstyle/keywordstyle/identifierstyle/commentstyle/commentstyle è¡Œå·ã€å…³é”®å­—ã€æ ‡è¯†ç¬¦ã€æ³¨é‡Šçš„æ ·å¼ \\definecolor{listing-background}{HTML}{F7F7F7} \\definecolor{listing-rule}{HTML}{B3B2B3} \\definecolor{listing-numbers}{HTML}{B3B2B3} \\definecolor{listing-text-color}{HTML}{000000} \\definecolor{listing-keyword}{HTML}{435489} \\definecolor{listing-identifier}{HTML}{435489} \\definecolor{listing-string}{HTML}{00999A} \\definecolor{listing-comment}{HTML}{8E8E8E} \\definecolor{listing-javadoc-comment}{HTML}{006CA9} \\lstset{ numberstyle = \\color{listing-numbers}, % è¡Œå·é¢œè‰² keywordstyle = \\color{listing-keyword}, % å…³é”®å­—é¢œè‰² identifierstyle = \\color{listing-identifier}, % å˜é‡é¢œè‰² commentstyle = \\color{listing-comment}, % æ³¨é‡Šé¢œè‰² } \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/latex-listing%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE/","summary":"\u003ch1 id=\"æ€»è§ˆ\"\u003eæ€»è§ˆ\u003c/h1\u003e\n\u003ch1 id=\"backgroundcolor-èƒŒæ™¯é¢œè‰²\"\u003ebackgroundcolor èƒŒæ™¯é¢œè‰²\u003c/h1\u003e\n\u003ch1 id=\"numbers-ä»£ç è¡Œå·\"\u003enumbers ä»£ç è¡Œå·\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-LaTeX\" data-lang=\"LaTeX\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003e\\lstset\u003c/span\u003e\u003cspan class=\"nb\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    numbers             = left,             \u003cspan class=\"c\"\u003e% è¡Œå·é å·¦\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u003c/span\u003e    basicstyle          = \u003cspan class=\"k\"\u003e\\ttfamily\u003c/span\u003e,        \u003cspan class=\"c\"\u003e% åŸºæœ¬ä»£ç é£æ ¼\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u003c/span\u003e    keywordstyle        = \u003cspan class=\"k\"\u003e\\bfseries\u003c/span\u003e,        \u003cspan class=\"c\"\u003e% å…³é”®å­—é£æ ¼\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u003c/span\u003e    commentstyle        = \u003cspan class=\"k\"\u003e\\ttfamily\u003c/span\u003e,        \u003cspan class=\"c\"\u003e% æ³¨é‡Šçš„é£æ ¼\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u003c/span\u003e    frame       = single,                   \u003cspan class=\"c\"\u003e% é˜´å½±æ•ˆæœ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u003c/span\u003e    escapeinside=``,                        \u003cspan class=\"c\"\u003e% è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u003c/span\u003e    xleftmargin=2em,xrightmargin=2em, aboveskip=1em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    breaklines          =   true,\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    language            = C,                \u003cspan class=\"c\"\u003e% è¯­è¨€é€‰C\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u003c/span\u003e\u003cspan class=\"nb\"\u003e}\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208211022328.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208211022328.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"LaTex-listing ç¯å¢ƒè®¾ç½®"},{"content":"æŠ˜è…¾èƒŒæ™¯ Markdown çš„ç®€ä¾¿æ€§æ˜¯ LaTeX æ— æ³•æ›¿ä»£çš„ï¼ŒLaTeX å¯¹æ’ç‰ˆçš„ç²¾å‡†æ§åˆ¶èƒ½åŠ›åˆæ˜¯ Markdown æ— æ³•æ¯”æ‹Ÿçš„ã€‚ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§èƒ½å¤Ÿå°† Markdown ä¼˜é›…åœ°è½¬æ¢æˆ PDF çš„è§£å†³æ–¹æ¡ˆï¼Œè™½ç„¶æ—©å°±å¬è¯´ä¹Ÿä½¿ç”¨è¿‡ Pandoc è¿™æŠŠç‘å£«å†›åˆ€ï¼Œä½†æ˜¯å®ƒå¤ªè¿‡å¼ºå¤§ï¼Œä»¥è‡´äºä¸€ç›´éƒ½æ²¡ç”¨æ˜ç™½ã€‚åªä¼šç®€å•çš„è½¬æ¢å‘½ä»¤ï¼Œä½†æ˜¯å®é™…æ•ˆæœå¹¶ä¸å¥½ï¼Œæœ€è¿‘å­¦ä¼šäº†ä½¿ç”¨ LaTeX æ¨¡æ¿çš„åŠŸèƒ½ï¼Œè¿™æ‰è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œè¿™æ‰æ˜¯æˆ‘æƒ³è¦çš„ç»“æœã€‚\næ•ˆæœæ¼”ç¤º åŸºç¡€ç¯å¢ƒé…ç½® Markdown ç”Ÿæˆ PDF ä¸»è¦éœ€è¦ä½¿ç”¨ Pandoc å’Œ LaTeX ä¸¤ä¸ªå·¥å…·ï¼Œå…·ä½“å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š\nPandoc çš„å®‰è£… Pandoc æ˜¯ç”± John MacFarlane å¼€å‘çš„æ ‡è®°è¯­è¨€è½¬æ¢å·¥å…·ï¼Œå¯å®ç°ä¸åŒæ ‡è®°è¯­è¨€é—´çš„æ ¼å¼è½¬æ¢ã€‚\nWindows ä¸‹çš„å®‰è£…ï¼š\nä¸‹è½½å®‰è£…åŒ…ç›´æ¥å®‰è£…å³å¯ å¦‚æœå®‰è£…äº† Chocolateï¼šchoco install pandoc å¦‚æœå®‰è£…äº† wingetï¼šwinget install pandoc Linux/FreeBSDä¸‹çš„å®‰è£…ï¼š\nPandoc å·²ç»åŒ…å«åœ¨å¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆçš„å®˜æ–¹ä»“åº“ä¸­ï¼Œç›´æ¥ä½¿ç”¨è¯¸å¦‚apt/dnf/yum/pacmanä¹‹ç±»çš„å®‰è£…å·¥å…·ç›´æ¥å®‰è£…å³å¯ macOS ä¸‹çš„å®‰è£…ï¼š\nbrew install pandoc è¯¦ç»†çš„å®‰è£…è¯´æ˜å‚è§ï¼šå®˜æ–¹å®‰è£…æ–‡æ¡£\nLaTeX çš„å®‰è£… LaTeX å·¥å…·ï¼Œå»ºè®®å®‰è£… texliveã€‚\nWindows ä¸‹çš„å®‰è£…ï¼š å‚è€ƒè¯¥æ–‡ç« ä¸‹è½½å®Œæ•´ texliveï¼Œæ³¨æ„å®‰è£…åéœ€è¦å†å®‰è£… cjkï¼Œcjk-fonts ç­‰ç›¸å…³ package Linux/FreeBSDä¸‹çš„å®‰è£…ï¼š ä½¿ç”¨ apt/dnf/yum/pacman/pkg ç­‰å®‰è£…å·¥å…·å®‰è£… texliveã€texlive-latex ç­‰ç›¸å…³è½¯ä»¶åŒ… macOS ä¸‹çš„å®‰è£…ï¼š ä½¿ç”¨ HomeBrew å®‰è£… texlive å³å¯ æ¨¡æ¿é…ç½® é…ç½® Pandoc æ¨¡æ¿ ä¸ºä¿è¯ç”Ÿæˆçš„ pdf æ ¼å¼ï¼ˆè‡ªåŠ¨æ’å…¥å°é¢ã€ç›®å½•é¡µã€é¡µçœ‰é¡µè„šç­‰ä¿¡æ¯ï¼‰ï¼Œåœ¨æœ¬åœ°ç¯å¢ƒä¸­å®‰è£…æ¨¡æ¿ï¼Œå…·ä½“æ­¥éª¤æ˜¯ï¼š\nä¸‹è½½MPPL: Markdown to PDF with Pandoc via Latexä»“åº“ å°†template/mppl.latexæ‹·è´åˆ°*/pandoc/templatesç›®å½•ä¸‹ Window ä¸‹ï¼šC:/Users/USERNAME/AppData/Roaming/pandoc/templatesï¼Œå¦‚æœRoamingæ²¡æœ‰pandocç›®å½•ï¼Œè¯·æ‰‹åŠ¨åˆ›å»ºï¼ Linux/FreeBSD/MacOSï¼š~/.pandoc/templates/ é…ç½® LaTeX æ¨¡æ¿ æ¨¡æ¿å®šåˆ¶ä¸»è¦ä¿®æ”¹æ¨¡æ¿æœ€å‰é¢çš„æ¨¡æ¿åŸºç¡€é…ç½®ç›¸å…³å†…å®¹ï¼Œä¸»è¦å¯ä¿®æ”¹çš„åŒ…æ‹¬ï¼š\nå…¬å¸å’Œç»„ç»‡ï¼Œç›®å‰é»˜è®¤æ˜¯\u0026quot;MPPL\u0026quot; æ­£æ–‡ç¼©è¿›ï¼Œç›®å‰é»˜è®¤æ˜¯ 2emï¼ˆ2 ä¸ªä¸­æ–‡å­—ç¬¦ï¼Œ4 ä¸ªè‹±æ–‡å­—ç¬¦ï¼‰ ä¸»è¦ä¸­æ–‡å­—ä½“å’Œè‹±æ–‡å­—ä½“ï¼šç›®å‰éƒ½æ˜¯å¾®è½¯é›…é»‘ é¡µçœ‰ã€é¡µè„šå±•ç¤ºå†…å®¹ï¼Œç›®å‰æ˜¯ï¼š å·¦é¡µçœ‰ï¼štitle å³é¡µçœ‰ï¼š\u0026ldquo;ä¼ä¸šæœºå¯† - ç¦æ­¢å¤–ä¼ \u0026rdquo; å·¦é¡µè„šï¼šcompany å³é¡µè„šï¼šé¡µç  å­—ä½“è®¾ç½® ç›®å‰é¡µé¢é»˜è®¤çš„å­—ä½“æ˜¯å¾®è½¯é›…é»‘ï¼Œå¯¹äºé Windows ç³»ç»Ÿï¼Œå¯èƒ½ä¸å­˜åœ¨è¯¥å­—ä½“ï¼Œåˆ™æœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š\næ‰‹å·¥å®‰è£…å¾®è½¯é›…é»‘å­—ä½“ï¼ˆéœ€è¦ msyh,msyhbd ä¸¤ä¸ªæ–‡ä»¶ï¼‰ ä¿®æ”¹ä¸ºå…¶ä»–å­—ä½“ï¼Œå¦‚è‹¹æ–¹ã€æ–‡æ³‰é©¿ç­‰ è‹¥éœ€è¦å¤šä¸ªå›¢é˜Ÿå…±åŒä½¿ç”¨ï¼Œå»ºè®®é‡‡ç”¨æ–¹æ¡ˆä¸€ã€‚\nå¦‚ä½•ç”Ÿæˆ PDF PDF æ–‡ä»¶æŒ‡å®š metadata ä¿¡æ¯ åœ¨æ¯ä¸ª Markdown æœ€å‰é¢å¢åŠ ä»¥ä¸‹ä¸»è¦ metadata ä¿¡æ¯ï¼Œmetadata å†…å®¹å¼€å§‹è¡Œå†…å®¹ä¸ºä¸‰ä¸ªâ€œ-â€ï¼Œç»“æŸè¡Œä¸ºä¸‰ä¸ªâ€œ.â€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š\ntitle: \u0026#34;MPPL\u0026#34; version: \u0026#34;0.1\u0026#34; subtitle: \u0026#34;Markdown to PDF with Pandoc via LaTeX\u0026#34; date: \u0026#34;2022-08\u0026#34; author: \u0026#34;Dominic\u0026#34; company: COMPANYNAME file-code: COMPANY-DEPARTMENT-00000000 logo: true logo-url: ./img/logo.png history: - version: V0.1 author: Dominic date: 2022-08-19 desc: åˆ›å»ºæ–‡æ¡£ å…¶ä»–å¯é€‰é…ç½®é¡¹ç›®å¦‚ä¸‹ï¼š\nheader-left: å·¦é¡µçœ‰ header-right: å³é¡µçœ‰ footer-left: å·¦é¡µè„š footer-right: å³é¡µè„š CJKmainfont: ä¸»è¦ä¸­æ–‡å­—ä½“ mainfont: ä¸»è¦å­—ä½“ lot: æ˜¯å¦åˆ›å»ºè¡¨æ ¼ç›®å½• lof: æ˜¯å¦åˆ›å»ºå›¾ç‰‡ç›®å½• å¯é€‰é…ç½®é¡¹ä¸­ï¼Œå»ºè®®é™¤äº† subtitle å¤–ï¼Œå…¨éƒ¨åœ¨æ¨¡æ¿ä¸­å®šåˆ¶ï¼Œä¸åœ¨ Markdown æ–‡ä»¶ä¸­å®šåˆ¶\nMarkdown å…¶ä»–ç¼–å†™è¦æ±‚ Pandoc é»˜è®¤ä½¿ç”¨çš„ pandoc_markdown æ ¼å¼ï¼Œä¸ºé¿å… Markdown è½¬ pdf æ ¼å¼å¼‚å¸¸ï¼Œåœ¨ç¼–å†™ Markdown çš„æ—¶å€™æœ‰å‡ ä¸ªåŸåˆ™è¦æ±‚ï¼š\næ¯ä¸ªæ ‡é¢˜å‰åéƒ½å¿…é¡»æœ‰ç©ºè¡Œ æ¯ä¸ªè¡¨æ ¼å‰åéƒ½å¿…é¡»æœ‰ç©ºè¡Œ æ¯ä¸ªä»£ç å—å‰åæ”¶å¿…é¡»æœ‰ç©ºè¡Œ æ¯ä¸ªåˆ—è¡¨å‰åå¿…é¡»æœ‰ç©ºè¡Œ æ€»ä¹‹ï¼Œä¸åŒæ–‡æœ¬ç±»å‹ä¹‹é—´éƒ½è¦æœ‰ç©ºè¡Œã€‚\nç”Ÿæˆ PDF æ–‡ä»¶ pandoc --listings --pdf-engine=xelatex --template=mppl.latex README.md -o README.pdf æ‘†è„±å‘½ä»¤è¡Œï¼Œä¼˜é›…çš„ VSCode ä¹¦å†™è½¬æ¢æ–¹æ¡ˆ VSCode ä¸æ’ä»¶å®‰è£… æ‰“å¼€ VSCode ç¼–è¾‘å™¨ï¼Œåœ¨æ’ä»¶é¡µæœç´¢ markdown-preview-enhancedï¼Œæ¥ç€ç‚¹å‡» Install æŒ‰é’®ã€‚è¯¦æƒ…å‚è€ƒVS Code å®‰è£… MPEã€‚\nMarkdown Preview Enhanced ä»¥ä¸‹ç®€ç§° MPE\nä½¿ç”¨ VSCode ä¹¦å†™ Markdown æ–°å»ºæ–‡ä»¶ä»¥.mdä¸ºåç¼€å³å¯å¼€å§‹ç¼–è¾‘ Markdown æ–‡ä»¶ï¼Œä½¿ç”¨ MPE å®æ—¶é¢„è§ˆä¸å¯¼å‡ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½® MPE ä½¿ç”¨ Pandoc å¯¼å‡º å³å‡» MPE çš„é¢„è§ˆåŒºåŸŸï¼Œå¯ä»¥çœ‹åˆ° MPE æä¾›å¤šç§å¯¼å‡º PDF çš„æ–¹æ¡ˆï¼Œå¦‚ä½¿ç”¨ Chrome çš„ Puppeteer å¯¼å‡ºï¼ŒPrince å¯¼å‡ºï¼ŒPandoc å¯¼å‡ºç­‰ç­‰ã€‚\nåœ¨æœªä½¿ç”¨ Pandoc å‰ï¼Œæˆ‘ä¹Ÿä¸€ç›´ä½¿ç”¨ MPE æä¾›çš„ Chrome æ–¹å¼å¯¼å‡ºï¼Œä½†æ˜¯å¯¼å‡ºçš„ PDF æ’ç‰ˆæ€»æ˜¯ä¸å°½å¦‚æ„ã€‚ç°åœ¨ä»‹ç»å¦‚ä½•ä½¿ç”¨ Pandoc æ–¹å¼å¯¼å‡ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ›å»º PDF æ–‡æ¡£ï¼Œä½ éœ€è¦åœ¨ markdown æ–‡ä»¶ä¸­çš„ front-matter é‡Œå£°æ˜ pdf_document çš„è¾“å‡ºç±»å‹ï¼š\n--- output: pdf_document: latex_engine: xelatex pandoc_args: [--template=mppl.latex,--listings] --- front-matterï¼šæ–‡ç« çš„æœ€å¼€å¤´ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡å…ƒæ•°æ®æ”¾çš„åœ°æ–¹ã€‚å’Œå…ƒæ•°æ®æ”¾åœ¨ä¸€èµ·å³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image latex_engineï¼šé»˜è®¤æƒ…å†µä¸‹ PDF æ–‡æ¡£ç”± pdflatex ç”Ÿæˆã€‚ä½ å¯ä»¥ç”¨ latex_engine é€‰é¡¹æ¥å®šä¹‰ä½ æƒ³ç”¨çš„å¼•æ“ã€‚æ”¯æŒçš„å¼•æ“æœ‰ pdflatexï¼Œxelatexï¼Œä»¥åŠ lualatexã€‚è¿™é‡Œéœ€è¦ä½¿ç”¨xelatexã€‚\npandoc_argsï¼šé…ç½® Pandoc æ¥å—çš„ä¸€äº›å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ --template=mppl.latex å’Œ --listings æ¥æŒ‡å®šæ¨¡æ¿å’Œä½¿ç”¨ listingsã€‚è¿™é‡Œé…ç½®çš„å‚æ•°å°±æ˜¯æ‰§è¡Œ Pandoc æ—¶ä½¿ç”¨çš„å‚æ•°ï¼Œä»¥åå°±ä¸éœ€è¦å‘½ä»¤è¡Œè¾“å…¥äº†ã€‚è¿™é‡Œä½¿ç”¨ä¸Šæ–‡çš„mppl.latexæ¨¡æ¿ã€‚\né…ç½®å®Œä¹‹åï¼Œå³å‡»é¢„è§ˆç•Œé¢ï¼Œé€‰æ‹© Pandoc å¯¼å‡ºï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œå³å¯ç”Ÿæˆ PDF æ–‡ä»¶ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¸¸è§é—®é¢˜è§£å†³ LaTeX ç›¸å…³é”™è¯¯ VSCode å¯¼å‡ºå‡ºé”™æ—¶æŠ¥é”™ä¿¡æ¯è¾ƒçŸ­ï¼Œå¹¶ä¸”å¸¸å¸¸ä¸çŸ¥é“å…·ä½“æŠ¥é”™åŸå› åŠä½ç½®ï¼Œå› ä¸ºæ˜¯ LaTeX è½¬æ¢æˆ PDF çš„è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯ã€‚æŠ¥é”™ä½ç½®æ˜¯ LaTeX ä¸­é—´æºç çš„ä½ç½®ï¼Œè€Œä¸æ˜¯ VSCode ä¸­çš„ä½ç½®ã€‚è¿™æ—¶å€™æˆ‘å¸¸ç”¨çš„æ–¹æ³•æ˜¯å…ˆå°† Markdown è½¬ä¸º LaTeXï¼Œç„¶åå†è½¬ä¸º PDFï¼Œåœ¨ LaTeX ç¼–è¾‘å™¨é‡Œå°±å¯ä»¥çœ‹åˆ°é”™è¯¯ä½ç½®äº†ã€‚\næ¯”å¦‚ä¸‹é¢è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€äº›æŠ¥é”™ä¿¡æ¯cant use \\spacefactor in math modeï¼Œä½†æ˜¯å¹¶ä¸çŸ¥é“å…·ä½“å“ªé‡Œçš„é”™è¯¯ã€‚ä»ä¿¡æ¯é‡Œå¯ä»¥çœ‹å‡ºå’Œ\\LaTexæœ‰å…³ï¼Œå¤§æ¦‚èƒ½æ¨æµ‹å‡ºæ˜¯ä½¿ç”¨äº†è¿™ä¸ªå‘½ä»¤ï¼Œå› ä¸ºæ–‡ç« é‡Œä½¿ç”¨äº†è¿™ä¸ªå‘½ä»¤çš„åœ°æ–¹åªæœ‰ä¸€å¤„ã€‚ä½†æ˜¯å¦‚æœæœ‰å…¶ä»–çš„é”™è¯¯ï¼Œå°±å¾ˆéš¾ç¡®å®šäº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image Markdown è½¬æ¢ LaTeX è¿™é‡Œè¿˜æ˜¯ä»¥æ¨¡æ¿ä»“åº“çš„README.mdä¸ºä¾‹ï¼Œå½“ç„¶è¿™ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥æ­£å¸¸è½¬æ¢ PDF çš„ï¼Œä¸ä¼šæŠ¥é”™ã€‚è¿™é‡Œåªæ˜¯æ‹¿README.mdåšä¸€ä¸ªå¦‚ä½•ä½¿ç”¨å‘½ä»¤çš„æ¼”ç¤ºã€‚\npandoc --listings --template=mppl.latex -s README.md -o README.tex LaTeX ç¼–è¾‘å™¨æ‰“å¼€ï¼Œä»¥ TexStudio ä¸ºä¾‹ æ‰“å¼€README.texæ–‡ä»¶ï¼Œç¼–è¯‘ï¼š \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ï¼Œåªè¦æœç´¢ç›¸å…³é—®é¢˜å³å¯ã€‚\n\\LaTeX{} è¿™ä¸ªå®ä¸èƒ½ç”¨åœ¨æ•°å­¦æ¨¡å¼ä¸‹ã€‚ä½†æ˜¯å› ä¸ºæˆ‘åœ¨ Markdown é‡Œå¿…é¡»ä½¿ç”¨ç¾å…ƒç¬¦å·$$æ‰èƒ½è¡¨ç¤º LaTeX ç¯å¢ƒï¼Œæ‰èƒ½æ­£ç¡®è¾“å‡º LaTeX ç¬¦å·ï¼Œè€Œ Markdown è½¬æ¢æˆ LaTeX æºç æ—¶ï¼Œè¿™ä¸ªå®å°±ä¼šè¢«åŒ…è£¹åœ¨æ•°å­¦ç¯å¢ƒé‡Œï¼Œå°±ä¼šæŠ¥é”™ã€‚å¦‚æœæˆ‘æƒ³åœ¨ PDF é‡Œæ˜¾ç¤ºè¿™ä¸ªç¬¦å·ï¼Œé‚£å°±åœ¨ Markdown é‡Œä¸ä½¿ç”¨ç¾å…ƒç¬¦å·$$ï¼Œè€Œæ˜¯ç›´æ¥è¾“å…¥\\LaTeX{}å³å¯ï¼Œå†å¯¼å‡º PDF æ—¶å°±ä¸ä¼šæŠ¥é”™ã€‚\n","permalink":"https://lifeislife.cn/posts/markdown%E4%B9%A6%E5%86%99pdf%E8%BE%93%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","summary":"\u003ch1 id=\"æŠ˜è…¾èƒŒæ™¯\"\u003eæŠ˜è…¾èƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eMarkdown çš„ç®€ä¾¿æ€§æ˜¯ LaTeX æ— æ³•æ›¿ä»£çš„ï¼ŒLaTeX å¯¹æ’ç‰ˆçš„ç²¾å‡†æ§åˆ¶èƒ½åŠ›åˆæ˜¯ Markdown æ— æ³•æ¯”æ‹Ÿçš„ã€‚ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§èƒ½å¤Ÿå°† Markdown ä¼˜é›…åœ°è½¬æ¢æˆ PDF çš„è§£å†³æ–¹æ¡ˆï¼Œè™½ç„¶æ—©å°±å¬è¯´ä¹Ÿä½¿ç”¨è¿‡ Pandoc è¿™æŠŠç‘å£«å†›åˆ€ï¼Œä½†æ˜¯å®ƒå¤ªè¿‡å¼ºå¤§ï¼Œä»¥è‡´äºä¸€ç›´éƒ½æ²¡ç”¨æ˜ç™½ã€‚åªä¼šç®€å•çš„è½¬æ¢å‘½ä»¤ï¼Œä½†æ˜¯å®é™…æ•ˆæœå¹¶ä¸å¥½ï¼Œæœ€è¿‘å­¦ä¼šäº†ä½¿ç”¨ LaTeX æ¨¡æ¿çš„åŠŸèƒ½ï¼Œè¿™æ‰è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œè¿™æ‰æ˜¯æˆ‘æƒ³è¦çš„ç»“æœã€‚\u003c/p\u003e","title":"Markdown ä¹¦å†™ PDF è¾“å‡ºä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ"},{"content":"IIC æ¦‚è¿° IICï¼ˆInter-Integrated Circuitï¼‰ï¼Œä¹Ÿå« I2Cï¼ˆInter-IC Communicationï¼‰æ€»çº¿ï¼Œæ˜¯ä¸€ç§ä¸²è¡Œé€šä¿¡åè®®ï¼Œç”± Philips å…¬å¸åœ¨ 1980 å¹´ä»£åˆå¼€å‘ã€‚IIC æ€»çº¿ç”¨äºè¿æ¥å¾®æ§åˆ¶å™¨ã€ä¼ æ„Ÿå™¨å’Œå…¶ä»–é›†æˆç”µè·¯ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\nåŒçº¿åˆ¶ç»“æ„ç®€å•ï¼šç”±ä¸€æ¡æ•°æ®çº¿ï¼ˆSDAï¼‰å’Œä¸€æ¡æ—¶é’Ÿçº¿ï¼ˆSCLï¼‰ç»„æˆã€‚ å¤šä¸»æœºå¹¶è¡Œé€šä¿¡ï¼šå¤šä¸ª Master è®¾å¤‡å¯åŒæ—¶æ¥å…¥åŒä¸€æ¡ IIC æ€»çº¿ä¸Šè¿›è¡Œæ•°æ®äº¤æ¢ã€‚ ç¡¬ä»¶èµ„æºå ç”¨å°‘ï¼šåªè¦ä¸¤æ ¹çº¿å°±å¯ä»¥è¿æ¥å¤šä¸ªå™¨ä»¶ã€‚ æ•°æ®ä¼ è¾“é€Ÿç‡å¿«ï¼šç°ä»£ IIC æ€»çº¿çš„æœ€é«˜ä¼ è¾“é€Ÿç‡å¯è¾¾åˆ° 400Kbpsã€‚ ä½åŠŸè€—è®¾è®¡ï¼šä½¿ç”¨è€…å¯ä»¥é€šè¿‡è½¯ä»¶æ§åˆ¶è®¾å¤‡è¿›å…¥ç¡çœ æ¨¡å¼ä»¥å‡å°‘åŠŸè€—ã€‚ ä¼ è¾“åè®® å†™æ“ä½œ ä¸»æœºè¦å‘å‡ºä¸€ä¸ªèµ·å§‹ä¿¡å· ä¸»æœºå‘å‡ºä¸€ä¸ªè®¾å¤‡åœ°å€ç”¨æ¥ç¡®å®šæ˜¯å¾€é‚£ä¸€ä¸ªèŠ¯ç‰‡å†™æ•°æ®ï¼Œä»¥åŠå†™æ ‡è®°ï¼ˆ0ï¼‰ ä»è®¾å¤‡å›åº”ï¼ˆç”¨æ¥ç¡®å®šè¿™ä¸ªè®¾å¤‡æ˜¯é¦™å­˜åœ¨ï¼Œç„¶åå°±å¯ä»¥ä¼ è¾“æ•°æ®ï¼‰ ä¸»è®¾å¤‡å‘é€ä¸€ä¸ªå­—èŠ‚æ•°æ®ç»™ä»è®¾å¤‡ï¼Œå¹¶ç­‰å¾…å›åº” æ¯ä¼ è¾“ä¸€å­—èŠ‚æ•…æ®ï¼Œæ¥æ”¶æ–¹è¦æœ‰ä¸€ä¸ªå›åº”ä¿¡å·ï¼ˆç¡®å®šæ•…æ®æ˜¯å¦æ¥å—å®Œæˆï¼‰ï¼Œç„¶åå†ä¼ è¾“ä¸‹ä¸€ä¸ªæ•…æ®ã€‚ æ•°æ®å‘é€å®Œä¹‹åï¼Œä¸»æœºå°±ä¼šå‘é€ä¸€ä¸ªåœæ­¢ä¿¡å·ã€‚ è¯»æ“ä½œ ä¸»æœºè¦å‘å‡ºä¸€ä¸ªèµ·å§‹ä¿¡å· ä¸»æœºå‘å‡ºä¸€ä¸ªè®¾å¤‡åœ°å€ç”¨æ¥ç¡®å®šæ˜¯å¾€é‚£ä¸€ä¸ªèŠ¯ç‰‡è¯»æ•°æ®ï¼Œä»¥åŠè¯»æ ‡è®°ï¼ˆ1ï¼‰ ä»è®¾å¤‡å›åº”ï¼ˆç”¨æ¥ç¡®å®šè¿™ä¸ªè®¾å¤‡æ˜¯å¦å­˜åœ¨ï¼‰ï¼Œç„¶åå°±å¯ä»¥ä¼ è¾“æ•°æ® ä»è®¾å¤‡å‘é€ä¸€ä¸ªå­—èŠ‚æ”¾æ®ç»™ä¸»è®¾å¤‡ï¼Œå¹¶ç­‰å¾…å›åº” æ¯ä¼ è¾“ä¸€å­—èŠ‚æ•°æ®ï¼Œæ¥æ”¶æ–¹è¦æœ‰ä¸€ä¸ªå›åº”ä¿¡å·ï¼ˆç¡®å®šæ•°æ®æ˜¯å¦æ¥å—å®Œæˆï¼‰ï¼Œç„¶åå†ä¼ è¾“ä¸‹ä¸€ä¸ªæ”¾æ®ã€‚ æ•°æ®å‘é€å®Œä¹‹åï¼Œä¸»èŠ¯ç‰‡å°±ä¼šå‘é€ä¸€ä¸ªåœæ­¢ä¿¡å·ã€‚ çŠ¶æ€ ç©ºé—²çŠ¶æ€ SCL å’Œ SDA éƒ½ä¸ºé«˜ç”µå¹³ æ­¤æ—¶å„ä¸ªå™¨ä»¶çš„è¾“å‡ºçº§åœºæ•ˆåº”ç®¡å‡å¤„åœ¨æˆªæ­¢çŠ¶æ€ï¼Œå³é‡Šæ”¾æ€»çº¿ï¼Œç”±ä¸¤æ¡ä¿¡å·çº¿å„è‡ªçš„ä¸Šæ‹‰ç”µé˜»æŠŠç”µå¹³æ‹‰é«˜ã€‚\nèµ·å§‹çŠ¶æ€ \u003c!DOCTYPE html\u003e Responsive Image SCL ä¸ºé«˜ç”µå¹³ï¼ŒSDA ç”±é«˜ç”µå¹³å˜ä¸ºä½ç”µå¹³ æ ‡å¿—ç€ä¸€æ¬¡æ•°æ®ä¼ è¾“çš„å¼€å§‹ã€‚èµ·å§‹ä¿¡å·æ˜¯ç”±ä¸»æ§å™¨ä¸»åŠ¨å»ºç«‹çš„ï¼Œåœ¨å»ºç«‹è¯¥ä¿¡å·ä¹‹å‰ I2C æ€»çº¿å¿…é¡»å¤„äºç©ºé—²çŠ¶æ€ã€‚\nç»“æŸçŠ¶æ€ SCL ä¸ºé«˜ç”µå¹³ï¼ŒSDA ç”±ä½ç”µå¹³å˜ä¸ºé«˜ç”µå¹³ æ•°æ®ä¼ è¾“çŠ¶æ€ SCL é«˜ç”µå¹³æœŸé—´ï¼ŒSDL ä¿æŒç¨³å®š SDL ä¸ºé«˜ç”µå¹³è¡¨ç¤º 1ï¼Œä½ç”µå¹³è¡¨ç¤º 0 åœ¨ IIC æ€»çº¿ä¸Šä¼ é€çš„æ¯ä¸€ä½æ•°æ®éƒ½æœ‰ä¸€ä¸ªæ—¶é’Ÿè„‰å†²ç›¸å¯¹åº” (æˆ–åŒæ­¥æ§åˆ¶)ï¼Œå³åœ¨ SCL ä¸²è¡Œæ—¶é’Ÿçš„é…åˆä¸‹ï¼Œæ•°æ®åœ¨ SDA ä¸Šä»é«˜ä½å‘ä½ä½ä¾æ¬¡ä¸²è¡Œä¼ é€æ¯ä¸€ä½çš„æ•°æ®ã€‚è¿›è¡Œæ•°æ®ä¼ é€æ—¶ï¼Œåœ¨ SCL å‘ˆç°é«˜ç”µå¹³æœŸé—´ï¼ŒSDA ä¸Šçš„ç”µå¹³å¿…é¡»ä¿æŒç¨³å®šï¼Œä½ç”µå¹³ä¸ºæ•°æ® 0ï¼Œé«˜ç”µå¹³ä¸ºæ•°æ® 1ã€‚åªæœ‰åœ¨ SCL ä¸ºä½ç”µå¹³æœŸé—´ï¼Œæ‰å…è®¸ SDA ä¸Šçš„ç”µå¹³æ”¹å˜çŠ¶æ€ã€‚ä¸‹å›¾æ˜¯ 0xaa åœ¨ IIC æ€»çº¿ä¸Šæœ‰æ•ˆä¼ è¾“ (æœ‰æ•ˆä¼ è¾“æ˜¯æŒ‡ç¬¬ 9 ä¸ªæ—¶é’Ÿçš„é«˜ç”µå¹³æœŸé—´ï¼Œä»æœºç»™ä¸»æœºåé¦ˆäº†ä¸€ä¸ªæœ‰æ•ˆçš„åº”ç­”ä½ 0) çš„å›¾ç¤º\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨æ—¶åºå›¾ä¸­ï¼ŒMSB ä»£è¡¨çš„æ˜¯ Most Significant Bitï¼ˆæœ€é«˜ä½ï¼‰ã€‚å®ƒè¡¨ç¤ºäºŒè¿›åˆ¶æ•°ä¸­æœ€å·¦è¾¹çš„ä¸€ä½ï¼Œä¹Ÿå°±æ˜¯æœ€é«˜ä½ã€‚åœ¨ä¸€ä¸ª n ä½çš„äºŒè¿›åˆ¶æ•°ä¸­ï¼Œæœ€é«˜ä½çš„æƒå€¼ä¸º 2^(n-1)ã€‚å› æ­¤ï¼ŒMSB åœ¨æ—¶åºå›¾ä¸­é€šå¸¸ç”¨æ¥æŒ‡ç¤ºäºŒè¿›åˆ¶æ•°æˆ–æ•°æ®å­—çš„æœ€é«˜ä½ã€‚åŒç†ï¼ŒLSB ä»£è¡¨çš„æ˜¯ Least Significant Bitï¼ˆæœ€ä½ä½ï¼‰ã€‚å®ƒè¡¨ç¤ºäºŒè¿›åˆ¶æ•°ä¸­æœ€å³è¾¹çš„ä¸€ä½ï¼Œä¹Ÿå°±æ˜¯æœ€ä½ä½ã€‚\nåº”ç­”çŠ¶æ€ SCL ä¸ºé«˜ç”µå¹³ï¼ŒSDA ç”±é«˜ç”µå¹³å˜ä¸ºä½ç”µå¹³ï¼ˆä¸Šå›¾æœ€åçš„ ACK æ ‡è®°ï¼‰ I2C æ€»çº¿ä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯ä»¥ 8 ä½å­—èŠ‚ä¼ é€çš„ï¼Œå‘é€å™¨ (ä¸»æœº) æ¯å‘é€ä¸€ä¸ªå­—èŠ‚ï¼Œå°±åœ¨ç¬¬ 9 ä¸ªæ—¶é’Ÿè„‰å†²æœŸé—´é‡Šæ”¾æ•°æ®çº¿ï¼Œç”±ä»è®¾å¤‡åé¦ˆä¸€ä¸ªåº”ç­”ä¿¡å·ã€‚åº”ç­”ä¿¡å·ä¸ºä½ç”µå¹³æ—¶ï¼Œè§„å®šä¸ºæœ‰æ•ˆåº”ç­”ä½ (ACK ç®€ç§°åº”ç­”ä½)ï¼Œè¡¨ç¤ºæ¥æ”¶å™¨å·²ç»æˆåŠŸåœ°æ¥æ”¶äº†è¯¥å­—èŠ‚ï¼›åº”ç­”ä¿¡å·ä¸ºé«˜ç”µå¹³æ—¶ï¼Œè§„å®šä¸ºéåº”ç­”ä½ (NACK)ï¼Œä¸€èˆ¬è¡¨ç¤ºæ¥æ”¶å™¨æ¥æ”¶è¯¥å­—èŠ‚æ²¡æœ‰æˆåŠŸã€‚å¯¹äºåé¦ˆæœ‰æ•ˆåº”ç­”ä½ ACK çš„è¦æ±‚æ˜¯ï¼Œæ¥æ”¶å™¨åœ¨ç¬¬ 9 ä¸ªæ—¶é’Ÿè„‰å†²ä¹‹å‰çš„ä½ç”µå¹³æœŸé—´å°† SDA çº¿æ‹‰ä½ï¼Œå¹¶ä¸”ç¡®ä¿åœ¨è¯¥æ—¶é’Ÿçš„é«˜ç”µå¹³æœŸé—´ä¸ºç¨³å®šçš„ä½ç”µå¹³ã€‚\nä»¥ä¸‹å››ç§æƒ…å†µ IIC é€šä¿¡è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿéåº”ç­”ä½ï¼ˆNACKï¼‰ï¼š\nä»æœºæ­£åœ¨å¤„ç†æŸäº›å®æ—¶çš„æ“ä½œæ— æ³•ä¸ä¸»æœºå®ç° IIC é€šä¿¡çš„æ—¶å€™ï¼Œä»æœºä¼šç»™ä¸»æœºåé¦ˆä¸€ä¸ªéåº”ç­” (NACK) ä¸»æœºå‘é€æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œä»æœºæ— æ³•è§£æå‘é€çš„æ•°æ®ï¼Œä»æœºä¹Ÿä¼šç»™ä¸»æœºåé¦ˆä¸€ä¸ªéåº”ç­”ä½ (NACK) ä¸»æœºå‘é€æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œä»æœºæ— æ³•å†ç»§ç»­æ¥æ”¶æ•°æ®ï¼Œä»æœºä¹Ÿä¼šç»™ä¸»æœºåé¦ˆä¸€ä¸ªéåº”ç­”ä½ (NACK) ä¸»æœºä»ä»æœºä¸­è¯»å–æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œä¸»æœºä¸æƒ³å†æ¥æ”¶æ•°æ®ï¼Œä¸»æœºä¼šç»™ä»æœºåé¦ˆä¸€ä¸ªéåº”ç­”ä½ (NACK)ï¼Œæ³¨æ„ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸»æœºç»™ä»æœºåé¦ˆä¸€ä¸ªéåº”ç­”ä½ (NACK) å‚è€ƒèµ„æ–™ IICæ€»çº¿çš„åŸç†ä¸Verilogå®ç° - jgliu - åšå®¢å›­ IICæ—¶åºåˆ†æ - å¤å¤©å¸ˆå¦¹ - åšå®¢å›­ ","permalink":"https://lifeislife.cn/posts/iic%E5%8D%8F%E8%AE%AE/","summary":"\u003ch1 id=\"iic-æ¦‚è¿°\"\u003eIIC æ¦‚è¿°\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eIICï¼ˆInter-Integrated Circuitï¼‰\u003c/strong\u003eï¼Œä¹Ÿå« I2Cï¼ˆInter-IC Communicationï¼‰æ€»çº¿ï¼Œæ˜¯ä¸€ç§ä¸²è¡Œé€šä¿¡åè®®ï¼Œç”± Philips å…¬å¸åœ¨ 1980 å¹´ä»£åˆå¼€å‘ã€‚IIC æ€»çº¿ç”¨äºè¿æ¥å¾®æ§åˆ¶å™¨ã€ä¼ æ„Ÿå™¨å’Œå…¶ä»–é›†æˆç”µè·¯ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\u003c/p\u003e","title":"IIC åè®®"},{"content":"å› ä¸ºç»ˆç«¯é…ç½®çš„åŸå› ï¼Œç¼–è¯‘çš„ç»“æœè¾“å‡ºæ˜¯ä¸­æ–‡ï¼Œè¿™æ ·æœç´¢é—®é¢˜ä¸å¦‚è‹±æ–‡çš„è¡¨è¿°ç²¾ç¡®ã€‚é…ç½®ç»ˆç«¯çš„è¯­è¨€ä¸ºè‹±æ–‡ï¼Œå°±å¯ä»¥è¾“å‡ºè‹±æ–‡ã€‚\nexport LANG=en_US ","permalink":"https://lifeislife.cn/posts/%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%E4%BB%A5%E8%8B%B1%E6%96%87%E8%BE%93%E5%87%BA/","summary":"\u003cp\u003eå› ä¸ºç»ˆç«¯é…ç½®çš„åŸå› ï¼Œç¼–è¯‘çš„ç»“æœè¾“å‡ºæ˜¯ä¸­æ–‡ï¼Œè¿™æ ·æœç´¢é—®é¢˜ä¸å¦‚è‹±æ–‡çš„è¡¨è¿°ç²¾ç¡®ã€‚é…ç½®ç»ˆç«¯çš„è¯­è¨€ä¸ºè‹±æ–‡ï¼Œå°±å¯ä»¥è¾“å‡ºè‹±æ–‡ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eLANG\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003een_US\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"ç¼–è¯‘é”™è¯¯ä»¥è‹±æ–‡è¾“å‡º"},{"content":"ä¿ç•™ç°åœº void* foo(void *dst, ...) { // some code unsigned int offset = (unsigned int) dst % 8; // warning here! // some code continue... } å†™é©±åŠ¨ç¨‹åºæ—¶ç»å¸¸ä¼šç›´æ¥å¯¹åœ°å€è¿›è¡Œä¿®æ”¹ï¼Œé…ç½®å¯„å­˜å™¨çš„å€¼ï¼Œä¹Ÿä¼šå°†åœ°å€çš„å€¼ä½œä¸ºæ•°æ®è¿›è¡Œä¼ é€’ï¼Œè¿™å°±ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒæŒ‡é’ˆå¼ºè½¬æˆæ•´å‹ï¼Œç±»å‹ä¸åŒ¹é…æ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚\næ¢ç©¶åŸå›  å‡ºç°è¿™ä¸ªè­¦å‘Šçš„åŸå› æ˜¯ï¼Œå°†void*ç±»å‹å¼ºè½¬æˆunsigned intæ˜¯ä¸å¯ç§»æ¤çš„ã€‚ä»€ä¹ˆå«ä¸å¯ç§»æ¤å‘¢ï¼Ÿ\næˆ‘ä»¬çŸ¥é“æŒ‡é’ˆç±»å‹ï¼Œåœ¨ 32 ä½ç³»ç»Ÿä¸‹æ˜¯ 4 å­—èŠ‚ï¼Œåœ¨ 64 ä½ç³»ç»Ÿä¸‹æ˜¯ 8 å­—èŠ‚ï¼Œè€Œunsigned intä¸ç®¡åœ¨ä»€ä¹ˆç³»ç»Ÿä¸‹éƒ½æ˜¯æ˜¯ 4 å­—èŠ‚ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå°†void*ç±»å‹å¼ºè½¬æˆunsigned intï¼Œåœ¨ 64 ä½ç³»ç»Ÿä¸‹å°±æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ä¿å­˜çœŸæ­£çš„æ•°æ®ã€‚\nè§£å†³æ–¹æ³• ç²—æš´åœ°ç”¨doubleæ¥æ¥æ”¶ å…ˆæ¥æ”¶ï¼Œå†æˆªæ–­ï¼š\nvoid* foo(void *dst, ...) { // some code unsigned int offset = (unsigned int)(unsigned double) dst % 8; // warning here! // some code continue... } uintptr_t uintptr_t ä¿è¯è¶³å¤Ÿå®½ï¼Œä»¥ä¾¿å°† void* è½¬æ¢ä¸º uintptr_t å¹¶å†æ¬¡è¿”å›å°†äº§ç”ŸåŸå§‹æŒ‡é’ˆå€¼ã€‚è¿˜æœ‰ä¸€ä¸ªç±»å‹ intptr_tï¼Œå®ƒæ˜¯æœ‰ç¬¦å·çš„ï¼›\n#include \u0026lt;stdint.h\u0026gt; // æˆ–è€… \u0026lt;inttypes.h\u0026gt; void* foo(void *dst, ...) { // some code unsigned int offset = (uintptr_t) dst % 8; // warning here! // some code continue... } ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3cast-from-pointer-to-integer-of-different-size/","summary":"\u003ch1 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003efoo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003edst\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e...)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// some code\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eoffset\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003edst\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// warning here!\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"c1\"\u003e// some code continue...\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå†™é©±åŠ¨ç¨‹åºæ—¶ç»å¸¸ä¼šç›´æ¥å¯¹åœ°å€è¿›è¡Œä¿®æ”¹ï¼Œé…ç½®å¯„å­˜å™¨çš„å€¼ï¼Œä¹Ÿä¼šå°†åœ°å€çš„å€¼ä½œä¸ºæ•°æ®è¿›è¡Œä¼ é€’ï¼Œè¿™å°±ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒæŒ‡é’ˆå¼ºè½¬æˆæ•´å‹ï¼Œç±»å‹ä¸åŒ¹é…æ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚\u003c/p\u003e","title":"è§£å†³ cast from pointer to integer of different size"},{"content":"äº†è§£è°ƒè¯•åŸç†æ—¶çœ‹åˆ°äº†ä¸€ä¸ªè´¨é‡æ¯”è¾ƒé«˜çš„è§†é¢‘ï¼Œã€è›‹é¥¼åµŒå…¥å¼ã€‘ä¸€èµ·æ¢ç©¶è°ƒè¯•åŸç†ã€‚UP é€šä¿—ï¼Œå½¢è±¡åœ°è®²è§£äº† DEBUG çš„ä¸€äº›åŸç†ï¼Œå€¼å¾—åå¤è§‚çœ‹ï¼Œä½†æ˜¯è§†é¢‘ä¸å¦‚æ–‡å­—æŸ¥é˜…æ•ˆç‡é«˜ï¼Œé‚è®°å½•äº†ä»¥ä¸‹æ–‡ç¨¿å†…å®¹ã€‚\nä»€ä¹ˆæ˜¯ JTAG 1985 å¹´ï¼Œå‡ å®¶åŠå¯¼ä½“å‚å•†ä¸ºäº†è§£å†³æ¿çº§æµ‹è¯•çš„é—®é¢˜ï¼Œæˆç«‹äº† Joint Test Action Groupï¼ˆJTAGï¼‰è”åˆæµ‹è¯•è¡ŒåŠ¨å°ç»„ï¼Œä»–ä»¬å¸Œæœ›å°†æµ‹è¯•ç‚¹å’Œæµ‹è¯•ç”µè·¯é›†æˆåœ¨èŠ¯ç‰‡å†…éƒ¨å¼•è„šå¤„ã€‚åŒæ—¶ï¼Œç•™å‡ºä¸€ä¸ªç»Ÿä¸€åè®®çš„æ¥å£ï¼Œå¤§å®¶éƒ½èƒ½é€šè¿‡è¿™ä¸ªæ¥å£æ¥è®¿é—®èŠ¯ç‰‡çš„è¾“å…¥ä¸è¾“å‡ºçŠ¶æ€ã€‚è¿™æ ·å°±çœå»äº†æ¿çº§æµ‹è¯•æ˜¯çš„ç‰©ç†æ¥è§¦ï¼ŒåŒæ—¶è¿˜èƒ½è¿›è¡Œé€»è¾‘æ€§è°ƒè¯•ã€‚åæ¥ IEEE ç»„ç»‡ï¼Œå°†è¿™ä¸ªæ–¹æ¡ˆåˆ¶å®šæˆäº†æ ‡å‡† IEEE 1149.1ï¼Œè¿™å°±æ˜¯ç°åœ¨æˆ‘ä»¬å¸¸å¬åˆ°çš„ JTAG è°ƒè¯•ã€‚\nè¾¹ç•Œæ‰«ææŠ€æœ¯ å®ç° JTAG è°ƒè¯•æœ€é‡è¦çš„ä¸€ä¸ªæŠ€æœ¯å°±æ˜¯è¾¹ç•Œæ‰«ææŠ€æœ¯ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ç»™èŠ¯ç‰‡çš„æ¯ä¸€ä¸ªè¾“å…¥è¾“å‡ºå¼•è„šï¼Œæ·»åŠ ä¸€ä¸ªç§»ä½å¯„å­˜å™¨å•å…ƒï¼Œä¹Ÿç§°ä¸ºè¾¹ç•Œæ‰«æå•å…ƒï¼ˆBoundary Scan Cellï¼ŒBSCï¼‰ã€‚é€šè¿‡å®ƒä¸€è¾¹å¯ä»¥å®ç°å¯¹èŠ¯ç‰‡è¾“å‡ºæ•°æ®çš„æˆªå–ï¼Œå¦ä¸€è¾¹å¯ä»¥å®Œæˆå¯¹è¾“å…¥æ•°æ®çš„æ›¿ä»£ã€‚æ­£å¸¸è¿è¡ŒçŠ¶æ€ä¸‹ï¼Œè¿™äº›å¯„å­˜å™¨åˆæ˜¯é€æ˜èˆ¬çš„å­˜åœ¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿™äº›ä½äºå¼•è„šè¾¹ç•Œçš„ç§»ä½å¯„å­˜å™¨ï¼Œè¿˜å¯ä»¥ä¸²åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€æ¡è¾¹ç•Œæ‰«æé“¾ï¼Œä»¥ä¸²è¡Œçš„æ–¹å¼ä»å¤–éƒ¨æ›´æ–°æ‰«æå•å…ƒä¸Šçš„æ•°æ®ï¼Œä»¥åŠå¯¹å¤–è¾“å‡ºè¾¹ç•Œæ‰«æå•å…ƒæ•è·çš„æ•°æ®ã€‚å¦‚æœæ¿ä¸Šæœ‰å¤šä¸ªè¿™æ ·çš„èŠ¯ç‰‡ï¼Œä»–ä»¬è¿˜èƒ½ä»¥èŠèŠ±é“¾çš„å½¢å¼ä¸²è”åœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±å¤§å¤§æ–¹ä¾¿äº†æµ‹è¯•çš„è¿‡ç¨‹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¦å®ç°å¯¹å†…éƒ¨ç§»ä½å¯„å­˜å™¨å•å…ƒæˆ–è€…è¯´å¯¹æ•´ä¸ªæ‰«æé“¾çš„è®¿é—®å’Œæ“ä½œï¼Œä¾¿ä¾èµ–äº JTAG è°ƒè¯•åè®®å’Œç›¸åº”çš„ç‰©ç†æ¥å£ã€‚JTAG æ ‡å‡†æ¥å£åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\nTDI(Test Data In) TDO(Test Data Out) TCLK(Test Clock) TMS(Test Mode Select) TRST(Test Reset)ï¼šå¯é€‰ï¼Œç”¨äºå¤ä½ \u003c!DOCTYPE html\u003e Responsive Image è°ƒè¯•é€»è¾‘çš„å®ç°ï¼Œæ˜¯é€šè¿‡èŠ¯ç‰‡å†…éƒ¨çš„ TAPï¼ˆTest Access Portï¼‰æ¥å®Œæˆçš„ã€‚æ¨¡å¼çŠ¶æ€ä¿¡å· TMS é…åˆæµ‹è¯•æ—¶é’Ÿä¿¡å· TCLKï¼Œä»¥ä¸€å®šçš„æ—¶åºè¿›å…¥åˆ° TAP æ§åˆ¶å™¨åï¼Œç”± TAP æ§åˆ¶å™¨å†…éƒ¨çš„çŠ¶æ€æœºè½¬åŒ–ä¸ºç›¸åº”çš„æ§åˆ¶åŠ¨ä½œã€‚ä»è€Œå®Œæˆæ•°æ®çš„ç§»ä½ï¼Œå¼•è„šçŠ¶æ€çš„æ•è·å’Œæ›´æ–°ã€‚\nè®¾å¤‡ ID å¯„å­˜å™¨æ„æˆçš„æ‰«æé“¾ï¼Œæ¿å¡ä¸€è¿ä¸Šè°ƒè¯•å™¨ï¼Œé€šè¿‡å¯¹è¿™æ¡æ‰«æé“¾çš„è®¿é—®ï¼Œå°±èƒ½å¤Ÿè¯†åˆ«åˆ°è¢«è°ƒè¯•èŠ¯ç‰‡çš„ä¿¡å·ã€‚å­˜æ”¾è°ƒè¯•æœºåˆ¶ç›¸å…³é…ç½®çš„æ•°æ®å¯„å­˜å™¨ï¼Œæ‰€æ„æˆçš„æ‰«æé“¾ï¼Œåé¢æ–­ç‚¹å’Œå•æ­¥è°ƒè¯•æ—¶å°±ä¼šç”¨åˆ°ã€‚ä»¥åŠç§»ä½çš„ BYPASS å¯„å­˜å™¨ï¼Œå½“è°ƒè¯•é“¾è·¯ä¸Šæœ‰å¤šä¸ªèŠ¯ç‰‡è¿æ¥æ—¶ï¼Œæ¥å‡å°‘æ€»è°ƒè¯•é“¾è·¯çš„é•¿åº¦ã€‚\nä»¥ä¸Šéƒ½å±äºæ•°æ®å¯„å­˜å™¨æ„æˆæ‰«æé“¾ï¼Œå› ä¸ºæƒ³è¦åœ¨ä»–ä»¬ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œéœ€è¦å¼•å…¥å¦å¤–çš„æŒ‡ä»¤å¯„å­˜å™¨ï¼Œä»¥åŠå¯¹åº”çš„æ‰«æé“¾ï¼Œè¿™æ ·è°ƒè¯•ä¸»æœºå°†ä¸åŒçš„è°ƒè¯•å‘½ä»¤å†™åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­ï¼Œå°±å¯ä»¥é€‰é€šéœ€è¦è°ƒè¯•çš„æ•°æ®é“¾è·¯ã€‚æ•°æ®ä¸æŒ‡ä»¤å¯„å­˜å™¨ä¸¤ç§é“¾è·¯çš„åˆ‡æ¢ï¼Œå°±é€šè¿‡ TAP æ§åˆ¶å™¨å®Œæˆã€‚\nè¡¥å……ï¼š å¦‚æœèŠ¯ç‰‡æ”¯æŒ JTAG è°ƒè¯•ï¼Œé‚£ä¹ˆèŠ¯ç‰‡ä¸Šå°±å¿…é¡»æœ‰ä¸Šè¿°çš„å››ä¸ªæ¥å£ï¼ŒTDIï¼ŒTDOï¼ŒTCLKï¼ŒTMSã€‚ \u003c!DOCTYPE html\u003e Responsive Image èŠ¯ç‰‡å¤–æœ‰ä¸ª Adapter ä¸ä¹‹ Pin to Pin è¿æ¥ï¼Œè´Ÿè´£åè®®è½¬æ¢ï¼ŒæŠŠ USB çš„ JTAG æ§åˆ¶ä¿¡æ¯æŒ‰ JTAG åè®®è½¬æ¢è¾“å‡ºï¼Œæ»¡è¶³åè®®å®šä¹‰çš„ç”µæ°”ç‰¹æ€§ã€‚ Adapter ä¸ Host è¿æ¥ï¼ŒHost å¯ä»¥æ˜¯æˆ‘ä»¬çš„ PCï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªåµŒå…¥å¼è°ƒè¯•å™¨ã€‚ Host ä¸Šé€šå¸¸éœ€è¦è¿è¡Œä¸€äº›è½¯ä»¶ï¼Œå¦‚ OpenOCDï¼Œè´Ÿè´£æŠŠ GDB çš„é«˜çº§åˆ«å‘½ä»¤è½¬æ¢æˆ JTAG å‘½ä»¤ï¼Œå¹¶é€šè¿‡ç‰¹å®š Adapter çš„è¦æ±‚è¿›è¡Œæ‰“åŒ…ï¼Œè°ƒç”¨ OS æä¾›çš„ USB/ETH/PCI é©±åŠ¨å‘é€å‡ºå»ã€‚ GDB ä¸ OpenOCD é€šè¿‡ä¸€äº›è¿œç¨‹åè®®ï¼Œå¦‚ TCP/IPï¼Œè¿›è¡Œé€šä¿¡ã€‚è¿™æ ·å°±èƒ½å¤Ÿè°ƒè¯• Chipã€‚\næ–­ç‚¹æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ é€šè¿‡ä»¥ä¸Š JTAG è°ƒè¯•æ¥å£ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿæµ‹è¯•å¼•è„šçš„è¾“å…¥è¾“å‡ºäº†ï¼ŒåŒæ—¶ä¹Ÿè·å¾—äº†è§‚å¯Ÿå’Œæ”¹å˜èŠ¯ç‰‡å†…éƒ¨æ•°æ®çš„æœºä¼šï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å¦‚ä½•è¿›è¡Œè°ƒè¯•å‘¢ï¼Ÿæ¯”å¦‚æ‰“ä¸ªæ–­ç‚¹ï¼Ÿ\næ–­ç‚¹ä½œä¸ºä¸€ç§å¹²é¢„æ€§è°ƒè¯•ï¼Œæ ¹æ®è°ƒè¯•è¡Œä¸ºçš„ä¸åŒï¼Œåˆ†ä¸ºç›‘æ§æ¨¡å¼å’Œä¸­æ­¢æ¨¡å¼ã€‚\nç›‘æ§æ¨¡å¼ï¼ˆè½¯ä»¶æ–­ç‚¹ï¼‰ï¼šä¼šè§¦å‘å¼‚å¸¸ï¼Œäº¤ç”±ç›¸åº”çš„è½¯ä»¶ç¨‹åºæ¥å¤„ç†ï¼Œå¤„ç†å™¨ä»ç„¶å¤„äºè¿è¡ŒçŠ¶æ€ã€‚ ä¸­æ­¢æ¨¡å¼ï¼ˆç¡¬ä»¶æ–­ç‚¹ï¼‰ï¼Œä½¿å¤„ç†å™¨è¿›å…¥éæ­£å¸¸è¿è¡Œçš„è°ƒè¯•çŠ¶æ€ã€‚ ä»¥ ARM æ¶æ„æ¥è¯´ï¼Œæœ€åˆå·¥ç¨‹å¸ˆæƒ³åˆ°çš„åŠæ³•æ˜¯æ’å…¥ä¸€æ¡æŒ‡ä»¤é›†ä¸­æ²¡æœ‰å®šä¹‰çš„æ— æ•ˆæŒ‡ä»¤ï¼Œæ¥æ›¿æ¢æ‰å¸Œæœ›æ‰“æ–­æŒ‡ä»¤å¤„çš„æºæŒ‡ä»¤ã€‚è¿™æ ·å†…æ ¸è¿è¡Œåˆ°è¿™æ¡æŒ‡ä»¤æ—¶ï¼Œå°±ä¼šè¿›å…¥åˆ°æ— æ•ˆæŒ‡ä»¤çš„æœåŠ¡ç¨‹åºï¼Œåœ¨è¿™ä¸ªå¼‚å¸¸çš„æœåŠ¡ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å†å»åšæƒ³è¦çš„è°ƒè¯•æ“ä½œï¼Œæ“ä½œå®Œæˆåï¼Œè¿˜åŸå½“æ—¶è¢«æ›¿æ¢çš„æŒ‡ä»¤ã€‚å¹¶ç»§ç»­æ‰§è¡Œã€‚\nåæ¥ ARMv5 å¼€å§‹å¼•å…¥ä¸“é—¨ç”¨äºè°ƒè¯•çš„BKPTæŒ‡ä»¤ï¼Œç±»ä¼¼ä¸ X86 æŒ‡ä»¤é›†çš„INT3æŒ‡ä»¤ï¼Œä½†ä¸ç®¡æ˜¯ä¸æ˜¯ä¸“ç”¨æŒ‡ä»¤ï¼Œä»–ä»¬éƒ½å±äºè½¯ä»¶ä¸­æ–­ã€‚è¿™æ„å‘³ç€æˆ‘æƒ³è¦å®æ—¶åœ°æ·»åŠ è¿™ç§æ–­ç‚¹ï¼Œå°±è¦æ±‚èƒ½å¤Ÿéšæ—¶åœ°æ›´æ”¹ç¨‹åºï¼Œæ’å…¥æ–­ç‚¹æŒ‡ä»¤ï¼Œè€Œä¸€èˆ¬åªæœ‰ç¨‹åºè¿è¡Œåœ¨ RAM ä¸Šï¼Œæ‰æ–¹ä¾¿è¿™æ ·æ“ä½œã€‚é‚£å¦‚æœç›´æ¥ä» FLASH ä¸Šå–å€è¿è¡Œçš„ç¨‹åºï¼Œå› ä¸º FLASH å…ˆæ“¦åå†™çš„ç‰©ç†ç‰¹æ€§ï¼Œæ˜¯æ— æ³•é€šè¿‡éšæ„æ’å…¥æŒ‡ä»¤æ¥å®ç°æ–­ç‚¹çš„ã€‚æ›´ä¸è¦è¯´ä»åªè¯»å­˜å‚¨å™¨ä¸Šè¿è¡Œçš„ç¨‹åºï¼Œæ¯”å¦‚è¯´å›ºåŒ–åœ¨ BIOS ä¸­ä¸Šç”µè‡ªæ£€ POST ç¨‹åºï¼Œé¢å¯¹è¿™ç§æƒ…å†µï¼Œéœ€è¦çš„å°±æ˜¯ç¡¬ä»¶æ–­ç‚¹ã€‚\nç¡¬ä»¶æ–­ç‚¹é¡¾åæ€ä¹‰ï¼Œéœ€è¦é¢å¤–çš„ç¡¬ä»¶é€»è¾‘æ”¯æŒï¼Œä¸»è¦èµ·çš„ä½œç”¨å°±æ˜¯æš‚å­˜å’Œæ¯”è¾ƒï¼Œæˆ‘ä»¬æŠŠè¿™ç§å®ç°ç‰¹å®šé€»è¾‘çš„ç»„åˆç”µè·¯ï¼Œç§°ä¸ºå®å•å…ƒï¼ˆMacro Cellï¼‰ã€‚\nè¿˜è®°å¾—æˆ‘ä»¬å‰é¢è¯´è¿‡ JTAG åè®®ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•æ‰«æé“¾å—ï¼Ÿç¡¬ä»¶æ–­ç‚¹å®å•å…ƒçš„æ§åˆ¶å’Œæ¯”è¾ƒä¸¤ç§æ•°æ®å¯„å­˜å™¨ï¼Œå°±å¯ä»¥ä½œä¸ºä¸¤æ¡æ‹“å±•æ‰«æé“¾ï¼ŒåŠ å…¥åˆ° JTAG è°ƒè¯•æ¡†æ¶ä¸­ã€‚\nä½ åœ¨è°ƒè¯•è½¯ä»¶ä¸­æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é’®ï¼Œå¯¹åº”çš„é‚£è¡Œä»£ç åœ°å€ï¼Œå°±ä¼šé€šè¿‡ä¸Šè¿°æ‰«æé“¾ï¼Œè¢«è®°å½•åˆ°æ–­ç‚¹å®å•å…ƒç›¸åº”çš„å¯„å­˜å™¨ä¸­ï¼Œå½“ç„¶ï¼Œè°ƒè¯•å™¨èƒ½å¤ŸçŸ¥é“æŸè¡Œä»£ç çš„åœ°å€ï¼Œæ˜¯ä¾èµ–äºç¼–è¯‘æ—¶ç”Ÿæˆçš„ ELF æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ä¿¡æ¯ã€‚è€Œå½“ç¨‹åºæ­£å¸¸è¿è¡Œå–å€æ—¶ï¼Œå¦‚æœå®å•å…ƒçš„å¯„å­˜å™¨ï¼Œå‘ç°äº†æ€»çº¿ä¸Šå‡ºç°äº†è®°å½•è¿‡çš„åœ°å€ï¼Œæ¯”è¾ƒå™¨å°±ä¼šå‘å‡ºè°ƒè¯•çŠ¶æ€ä¿¡å·ï¼ŒCPU æ¥æ”¶åˆ°è¿™ä¸ªä¿¡å·åæš‚åœè¿è¡Œï¼Œè¿›å…¥è°ƒè¯•æ¨¡å¼æˆ–è€…å¼‚å¸¸ã€‚\nå› ä¸ºæ¯æ‰“ä¸€ä¸ªæ–­ç‚¹ï¼Œéƒ½éœ€è¦å®å•å…ƒç›¸åº”çš„å¯„å­˜å™¨æ¥ä¿å­˜åœ°å€ä¿¡æ¯ã€‚è€Œå¯„å­˜å™¨æ•°é‡æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥è°ƒè¯•è½¯ä»¶ä¸€æ—¦å’ŒèŠ¯ç‰‡å»ºç«‹èµ·äº†è¿æ¥ï¼Œå°±ä¼šé€šè¿‡ä¸Šè¿°çš„å¦å¤–ä¸€æ¡æ§åˆ¶å¯„å­˜å™¨è·å¾—è¯¥ç¡¬ä»¶æ–­ç‚¹å®å•å…ƒæ‰€æ”¯æŒçš„æœ€å¤§æ–­ç‚¹æ•°ï¼Œè¿™æ ·ä½ åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­å¦‚æœæ–­ç‚¹æ‰“å¤šäº†ï¼Œè°ƒè¯•å™¨å°±ä¼šæŠ¥é”™ã€‚\nä¸ºä»€ä¹ˆè°ƒè¯•å™¨èƒ½å¤Ÿçƒ§å½•ç¨‹åºå‘¢ï¼Ÿ æ­£å¸¸æƒ…å†µä¸‹ï¼ŒCPU å†…æ ¸é€šè¿‡å†…éƒ¨çš„ç³»ç»Ÿæ€»çº¿ï¼Œä» FLASH æˆ–è€… RAM ä¸­è·å–è¿è¡Œçš„æŒ‡ä»¤ï¼Œäº¤æ¢æ•°æ®ï¼Œå¹¶åœ¨ä¸€å®šçš„é©±åŠ¨ç¨‹åºä¸‹ï¼Œå®ç°å¯¹ FLASH çš„æ“¦é™¤å’Œå†™å…¥æ“ä½œã€‚ä¸ºäº†æŠŠæŒ‡ä»¤å’Œæ•°æ®ç›´æ¥ç»™ CPU å†…æ ¸ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€æ¡æ‰«æé“¾ï¼Œè¿™æ¡æ‰«æé“¾ç›´æ¥åœ¨ç³»ç»Ÿæ€»çº¿ä¸Šå¼€äº†ä¸€ä¸ªå£å­ï¼Œé€šè¿‡ä¸Šä½æœºçš„è°ƒè¯•ä¿¡å·ï¼ŒæŠŠç›¸å…³çš„æ“ä½œæŒ‡ä»¤ç›´æ¥ä¼ åˆ°æ€»çº¿ä¸Šï¼Œä¾› CPU å†…æ ¸å–ç”¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é‚£ä¹ˆæ•´ä¸ªè°ƒè¯•å™¨çš„ä¸‹è½½è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š\nç¬¬ä¸€ï¼Œé€šè¿‡è°ƒè¯•å™¨ä½¿å¾— CPU è¿›å…¥è°ƒè¯•æ¨¡å¼ï¼› ç¬¬äºŒï¼Œé€šè¿‡æ€»çº¿æ‰«æé“¾å°† FLASH ç¼–ç¨‹ç®—æ³•ä¸å³å°†è¢«ä¸‹è½½çš„ç”¨æˆ·ç¨‹åºæ”¾åˆ° RAM ä¸­ï¼› ç¬¬ä¸‰ï¼Œå°† CPU çš„ PC æŒ‡é’ˆæŒ‡å‘åˆšåˆšæ¬è¿å®Œæˆçš„ RAM åœ°å€èµ·å§‹å¤„ï¼Œå¹¶é€€å‡ºè°ƒè¯•çŠ¶æ€ï¼› ç¬¬å››ï¼ŒCPU å°†åœ¨æ­£å¸¸çŠ¶æ€ä¸‹è¿è¡Œ RAM ä¸­çš„ FLASH ç¼–ç¨‹ç®—æ³•ã€‚å°†ç”¨æˆ·ä»£ç çƒ§å½•åˆ°ç¡®å®šä½ç½®ä¸Šï¼Œæ‰§è¡Œå®Œæˆåå›åˆ°è°ƒè¯•çŠ¶æ€ã€‚ å¦‚æœ RAM ç©ºé—´ä¸å¤Ÿå¤§ï¼Œä»¥ä¸Šæ“ä½œè¿˜éœ€è¦é‡å¤å¤šæ¬¡æ‰§è¡Œã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç¬¬äºŒæ­¥æ“ä½œ RAM æ—¶ï¼Œæ˜¯å¤„äºè°ƒè¯•çŠ¶æ€ä¸‹ï¼Œè€Œè°ƒè¯•æ—¶é’Ÿçš„é€Ÿç‡æ˜¯æ— æ³•æ»¡è¶³ RAM æˆ–è€… FLASH çš„è®¿é—®é€Ÿç‡è¦æ±‚çš„ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼ŒCPU ä¼šé¢‘ç¹çš„åœ¨ç³»ç»Ÿæ—¶é’Ÿä¸è°ƒè¯•æ—¶é’Ÿä¹‹é—´åˆ‡æ¢\nè°ƒè¯•æ—¶é’Ÿä¸‹ï¼Œæ€»çº¿æ‰«æé“¾å…ˆä¼ é€’æ¥è¦å†™å…¥çš„æ•°æ®å’Œ RAM åœ°å€ï¼ŒCPU å…ˆåˆ†åˆ«æš‚å­˜åœ¨å†…éƒ¨é€šç”¨å¯„å­˜å™¨ä¸­ï¼Œæ¥ç€æ‰«æé“¾ä¼ é€’å†™å…¥æŒ‡ä»¤ï¼Œå¹¶åˆ‡æ¢ä¸ºç³»ç»Ÿæ—¶é’Ÿã€‚CPU åœ¨æ­£å¸¸çŠ¶æ€ä¸‹æ‰§è¡Œæ¬è¿æŒ‡ä»¤ï¼Œå¾€ RAM é‡Œå†™å…¥æ•°æ®ï¼Œæ‰§è¡Œå®Œæˆåå›åˆ°è°ƒè¯•çŠ¶æ€ï¼Œç»§ç»­é€šè¿‡æ‰«æé“¾ä¼ é€’åé¢è¦å†™å…¥çš„å€¼ï¼Œ\nOpenOCD (Open On-Chip Debugger) OpenOCDï¼ˆOpen On-Chip Debuggerï¼‰å¼€æºç‰‡ä¸Šè°ƒè¯•å™¨ï¼Œæ˜¯ä¸€æ¬¾å¼€æºè½¯ä»¶ï¼Œæœ€åˆæ˜¯ç”± Dominic Rath åŒå­¦è¿˜åœ¨å¤§å­¦æœŸé—´å‘èµ·çš„ï¼ˆ2005 å¹´ï¼‰é¡¹ç›®ã€‚OpenOCD æ—¨åœ¨æä¾›é’ˆå¯¹åµŒå…¥å¼è®¾å¤‡çš„è°ƒè¯•ã€ç³»ç»Ÿç¼–ç¨‹å’Œè¾¹ç•Œæ‰«æåŠŸèƒ½ã€‚\nå‚è€ƒèµ„æ–™ ã€è›‹é¥¼åµŒå…¥å¼ã€‘é¥®èŒ¶å…ˆï¼ŸDEBUG å…ˆï¼ä¸€èµ·æ¢ç©¶è°ƒè¯•åŸç†_å“”å“©å“”å“©_bilibili æµ…è°ˆ RISC-V çš„ DEBUG ç³»ç»ŸåŠå…¶ä»¿çœŸ - çŸ¥ä¹ ESP32 JTAG Debug 01: JTAG æ¥å£ç®€ä»‹_å“”å“©å“”å“©_bilibili+\n","permalink":"https://lifeislife.cn/posts/debug%E5%8E%9F%E7%90%86/","summary":"\u003cp\u003eäº†è§£è°ƒè¯•åŸç†æ—¶çœ‹åˆ°äº†ä¸€ä¸ªè´¨é‡æ¯”è¾ƒé«˜çš„è§†é¢‘ï¼Œ\u003ca href=\"https://www.bilibili.com/video/BV1iN411Z7jk?spm_id_from=333.999.0.0\u0026amp;vd_source=7ff88341de4b5111bdf3db48b4e9ca44\"\u003eã€è›‹é¥¼åµŒå…¥å¼ã€‘ä¸€èµ·æ¢ç©¶è°ƒè¯•åŸç†\u003c/a\u003eã€‚UP é€šä¿—ï¼Œå½¢è±¡åœ°è®²è§£äº† DEBUG çš„ä¸€äº›åŸç†ï¼Œå€¼å¾—åå¤è§‚çœ‹ï¼Œä½†æ˜¯è§†é¢‘ä¸å¦‚æ–‡å­—æŸ¥é˜…æ•ˆç‡é«˜ï¼Œé‚è®°å½•äº†ä»¥ä¸‹æ–‡ç¨¿å†…å®¹ã€‚\u003c/p\u003e\n\u003ch2 id=\"ä»€ä¹ˆæ˜¯-jtag\"\u003eä»€ä¹ˆæ˜¯ JTAG\u003c/h2\u003e\n\u003cp\u003e1985 å¹´ï¼Œå‡ å®¶åŠå¯¼ä½“å‚å•†ä¸ºäº†è§£å†³æ¿çº§æµ‹è¯•çš„é—®é¢˜ï¼Œæˆç«‹äº† Joint Test Action Groupï¼ˆJTAGï¼‰è”åˆæµ‹è¯•è¡ŒåŠ¨å°ç»„ï¼Œä»–ä»¬å¸Œæœ›å°†æµ‹è¯•ç‚¹å’Œæµ‹è¯•ç”µè·¯é›†æˆåœ¨èŠ¯ç‰‡å†…éƒ¨å¼•è„šå¤„ã€‚åŒæ—¶ï¼Œç•™å‡ºä¸€ä¸ªç»Ÿä¸€åè®®çš„æ¥å£ï¼Œå¤§å®¶éƒ½èƒ½é€šè¿‡è¿™ä¸ªæ¥å£æ¥è®¿é—®èŠ¯ç‰‡çš„è¾“å…¥ä¸è¾“å‡ºçŠ¶æ€ã€‚è¿™æ ·å°±çœå»äº†æ¿çº§æµ‹è¯•æ˜¯çš„ç‰©ç†æ¥è§¦ï¼ŒåŒæ—¶è¿˜èƒ½è¿›è¡Œé€»è¾‘æ€§è°ƒè¯•ã€‚åæ¥ IEEE ç»„ç»‡ï¼Œå°†è¿™ä¸ªæ–¹æ¡ˆåˆ¶å®šæˆäº†æ ‡å‡† IEEE 1149.1ï¼Œè¿™å°±æ˜¯ç°åœ¨æˆ‘ä»¬å¸¸å¬åˆ°çš„ JTAG è°ƒè¯•ã€‚\u003c/p\u003e","title":"DEBUG åŸç†"},{"content":"SSH æ€»æ˜¯è¢«å¼ºè¡Œä¸­æ–­ï¼Œå°¤å…¶æ˜¯ç”¨ VSCode ä»£ç å†™çš„å¥½å¥½çš„ï¼Œçªç„¶åˆ·æ–°çª—å£ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œæ›´æƒ¹äººæ¼ç«ã€‚\nå¯ä»¥é€šè¿‡é…ç½®æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯çš„ SSH æ¥ä¿æŒ SSH é“¾æ¥ï¼š\næ–¹æ³•ä¸€ï¼šé…ç½®æœåŠ¡ç«¯ å¯ä»¥åœ¨æœåŠ¡ç«¯é…ç½®ï¼Œè®© server æ¯éš” 30 ç§’å‘ client å‘é€ä¸€ä¸ª keep-alive åŒ…æ¥ä¿æŒè¿æ¥ï¼š\nvim /etc/ssh/sshd_config ClientAliveInterval 30 ClientAliveCountMax 60 ç¬¬äºŒè¡Œé…ç½®è¡¨ç¤ºå¦‚æœå‘é€ keep-alive åŒ…æ•°é‡è¾¾åˆ° 60 æ¬¡ï¼Œå®¢æˆ·ç«¯ä¾ç„¶æ²¡æœ‰ååº”ï¼Œåˆ™æœåŠ¡ç«¯ sshd æ–­å¼€è¿æ¥ã€‚å¦‚æœä»€ä¹ˆéƒ½ä¸æ“ä½œï¼Œè¯¥é…ç½®å¯ä»¥è®©è¿æ¥ä¿æŒ 30s*60ï¼Œ30 min\né‡å¯æœ¬åœ° ssh\nsudo service ssh restart å¦‚æœæ‰¾ä¸åˆ° ssh,â€Failed to restart ssh.service: Unit ssh.service not found.â€ ï¼Œéœ€è¦å®‰è£…\nsudo apt-get install openssh-server æ–¹æ³•äºŒï¼šé…ç½®å®¢æˆ·ç«¯ å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰æƒé™é…ç½®ï¼Œæˆ–è€…æ— æ³•é…ç½®ï¼Œå¯ä»¥é…ç½®å®¢æˆ·ç«¯ sshï¼Œä½¿å®¢æˆ·ç«¯å‘èµ·çš„æ‰€æœ‰ä¼šè¯éƒ½ä¿æŒè¿æ¥ï¼š\nvim /etc/ssh/ssh_config ServerAliveInterval 30 ServerAliveCountMax 60 æœ¬åœ° ssh æ¯éš” 30s å‘ server ç«¯ sshd å‘é€ keep-alive åŒ…ï¼Œå¦‚æœå‘é€ 60 æ¬¡ï¼Œserver æ— å›åº”æ–­å¼€è¿æ¥ã€‚\nåœ¨ VSCode é‡Œå¯ä»¥ç›´æ¥æ·»åŠ é…ç½®ï¼Œæ•ˆæœä¸€æ ·ï¼š \u003c!DOCTYPE html\u003e Responsive Image Host 11.22.33.44 HostName 11.22.33.44 User user Port 112343 ServerAliveInterval 30 ServerAliveCountMax 60 ","permalink":"https://lifeislife.cn/posts/%E4%BF%9D%E6%8C%81ssh%E8%BF%9E%E6%8E%A5/","summary":"\u003cp\u003eSSH æ€»æ˜¯è¢«å¼ºè¡Œä¸­æ–­ï¼Œå°¤å…¶æ˜¯ç”¨ VSCode ä»£ç å†™çš„å¥½å¥½çš„ï¼Œçªç„¶åˆ·æ–°çª—å£ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œæ›´æƒ¹äººæ¼ç«ã€‚\u003c/p\u003e\n\u003cp\u003eå¯ä»¥é€šè¿‡é…ç½®æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯çš„ SSH æ¥ä¿æŒ SSH é“¾æ¥ï¼š\u003c/p\u003e\n\u003ch2 id=\"æ–¹æ³•ä¸€é…ç½®æœåŠ¡ç«¯\"\u003eæ–¹æ³•ä¸€ï¼šé…ç½®æœåŠ¡ç«¯\u003c/h2\u003e\n\u003cp\u003eå¯ä»¥åœ¨æœåŠ¡ç«¯é…ç½®ï¼Œè®© server æ¯éš” 30 ç§’å‘ client å‘é€ä¸€ä¸ª keep-alive åŒ…æ¥ä¿æŒè¿æ¥ï¼š\u003c/p\u003e","title":"ä¿æŒ SSH è¿æ¥"},{"content":"éšç€æ’ä»¶è¶Šè£…è¶Šå¤šï¼Œæ ‡ç­¾æ å³ä¾§çš„æŒ‰é’®ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œä¸¥é‡ç¼©å°äº†æ ‡é¢˜æ æ˜¾ç¤ºèŒƒå›´ã€‚è¿™ç‰‡æŒ‰é’®åŒºåŸŸåˆæœ‰æœ€å¤§é•¿åº¦çš„é™åˆ¶ï¼Œå½“æŒ‰é’®å¤ªå¤šï¼Œå°±ä¼šéšè—åˆ°ä¸‹æ‹‰èœå•é‡Œï¼ˆæœ€å³ä¾§çš„ä¸‰ä¸ªç‚¹ï¼‰ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´ä¸€äº›å¸¸ç”¨çš„æŒ‰é’®è¢«éšè—ï¼Œè€Œä¸å¸¸ç”¨çš„æŒ‰é’®åˆå åœ°æ–¹ã€‚é‚£ä¹ˆæ€æ ·æ‰èƒ½éšè—ä¸éœ€è¦çš„æŒ‰é’®å‘¢ï¼Ÿ\n\u003c!DOCTYPE html\u003e Responsive Image \u0026#34;gitlens.menus\u0026#34;: { \u0026#34;editorGroup\u0026#34;: { \u0026#34;blame\u0026#34;: false, \u0026#34;compare\u0026#34;: true }, }, ","permalink":"https://lifeislife.cn/posts/vscode%E9%9A%90%E8%97%8F%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2%E5%8F%B3%E4%B8%8A%E8%A7%92%E7%9A%84%E6%8C%89%E9%92%AE/","summary":"\u003cp\u003eéšç€æ’ä»¶è¶Šè£…è¶Šå¤šï¼Œæ ‡ç­¾æ å³ä¾§çš„æŒ‰é’®ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œä¸¥é‡ç¼©å°äº†æ ‡é¢˜æ æ˜¾ç¤ºèŒƒå›´ã€‚è¿™ç‰‡æŒ‰é’®åŒºåŸŸåˆæœ‰æœ€å¤§é•¿åº¦çš„é™åˆ¶ï¼Œå½“æŒ‰é’®å¤ªå¤šï¼Œå°±ä¼šéšè—åˆ°ä¸‹æ‹‰èœå•é‡Œï¼ˆæœ€å³ä¾§çš„ä¸‰ä¸ªç‚¹ï¼‰ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´ä¸€äº›å¸¸ç”¨çš„æŒ‰é’®è¢«éšè—ï¼Œè€Œä¸å¸¸ç”¨çš„æŒ‰é’®åˆå åœ°æ–¹ã€‚é‚£ä¹ˆæ€æ ·æ‰èƒ½éšè—ä¸éœ€è¦çš„æŒ‰é’®å‘¢ï¼Ÿ\u003c/p\u003e","title":"VSCode éšè—ç¼–è¾‘é¡µé¢å³ä¸Šè§’çš„æŒ‰é’®"},{"content":"Docker å¯åŠ¨ version: \u0026#34;3.7\u0026#34; services: jellyfin: image: dockerproxy.com/linuxserver/jellyfin:latest container_name: jellyfin hostname: RISCX environment: - PUID=1000 - PGID=1000 - TZ=Asia/Shanghai - HTTP_PROXY:\u0026#39;http://192.168.1.9:7890\u0026#39; - HTTPS_PROXY:\u0026#39;http://192.168.1.9:7890\u0026#39; volumes: - /root/sharedfolder/appdata/jellyfin/config:/config - /root/sharedfolder/media:/media - /root/sharedfolder/appdata/jellyfin/cache:/cache devices: - /dev/dri:/dev/dri extra_hosts: - \u0026#34;api.themoviedb.org:108.138.246.55\u0026#34; - \u0026#34;image.themoviedb.org:104.16.61.155\u0026#34; - \u0026#34;www.36dm.com:104.21.80.200\u0026#34; network_mode: \u0026#34;host\u0026#34; restart: unless-stopped åˆå§‹åŒ–é…ç½® å°±ä¸æŒ¨ä¸ªè´´å›¾äº†ï¼Œå»ºè®®å°†é¡µé¢éƒ½è®¾ç½®ä¸ºä¸­æ–‡ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯é€‰æ‹©å›½å®¶çš„æ—¶å€™ï¼Œä¸­å›½çš„è‹±æ–‡å…¨ç§°æ˜¯ People\u0026rsquo;s Republic of Chinaï¼Œä¸æ˜¯ Chinaï¼Œéœ€è¦ä»”ç»†æ‰¾ä¸€ä¸‹ã€‚\nè½¬ç é…ç½® ä¸»è¦é…ç½®ç¡¬è§£ç ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§é™ä½ CPU çš„ä½¿ç”¨ç‡ï¼Œæé«˜æ’­æ”¾çš„æµç•…åº¦ã€‚èƒ½å¤Ÿå¼€å¯ç¡¬è§£éœ€è¦ GPU æ”¯æŒï¼Œå¦‚æœ CPU æœ‰æ ¸æ˜¾ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¼€å¯ç¡¬è§£ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±ç®—äº†å§ï¼Œè·³è¿‡ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æ”¯æŒç¡¬è§£ã€‚\ncat /proc/cpuinfo | grep \u0026#34;flags\u0026#34; è¯¥å‘½ä»¤å°†è¾“å‡º CPU çš„ç³»ç»Ÿä¿¡æ¯ï¼Œå¹¶åœ¨è¾“å‡ºç»“æœä¸­æœç´¢\u0026quot;flags\u0026quot;ï¼ˆæ ‡å¿—ï¼‰è¡Œã€‚å¦‚æœè¯¥è¡Œä¸­åŒ…å«\u0026quot;vme\u0026quot;ã€\u0026ldquo;cmov\u0026rdquo;ã€\u0026ldquo;cx8\u0026rdquo;ã€\u0026ldquo;mmx\u0026rdquo;ã€\u0026ldquo;sse\u0026rdquo;ã€\u0026ldquo;sse2\u0026rdquo;ã€\u0026ldquo;sse3\u0026rdquo;ã€\u0026ldquo;ssse3\u0026rdquo;ã€\u0026ldquo;sse4_1\u0026rdquo;ã€\u0026ldquo;sse4_2\u0026rdquo;ã€\u0026ldquo;avx\u0026quot;ç­‰å…³é”®è¯ï¼Œåˆ™è¯´æ˜è¯¥ CPU æ”¯æŒè§†é¢‘ç¡¬è§£ç ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image è°ƒç”¨Potplayeræœ¬åœ°è§£ç  ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ’ä»¶å¯ä»¥å®ç°è°ƒç”¨æœ¬åœ°æ’­æ”¾å™¨æ’­æ”¾è§†é¢‘ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ Potplayer ç­‰æ’­æ”¾å™¨è¿›è¡Œæ’­æ”¾ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ Jellyfin çš„å†…ç½®æ’­æ”¾å™¨ã€‚æ–‡æ¡£å†™çš„ååˆ†è¯¦ç»†ï¼Œåœ¨è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚\nkjtsune/embyToLocalPlayer: Emby/Jellyfin è°ƒç”¨å¤–éƒ¨æœ¬åœ°æ’­æ”¾å™¨ï¼Œå¹¶å›ä¼ æ’­æ”¾è®°å½•ã€‚é€‚é… Plexã€‚\næ’ä»¶é…ç½® æ‰€æœ‰æ’ä»¶éƒ½å¯ä»¥é€šè¿‡ä»¥ä¸‹è·¯å¾„é…ç½®ï¼Œåç»­ä¸å†èµ˜è¿°ã€‚æ‰€æœ‰åœ°å€éƒ½åŠ ä¸Šäº†ä»£ç†åœ°å€https://mirror.ghproxy.comï¼Œè¯·ä¸è¦åˆ æ‰ï¼Œå¦åˆ™ç›®å½•ä¸­çš„æ’ä»¶å°†æ— æ³•åŠ è½½ã€‚\nç®¡ç†é¡µé¢ -\u0026gt; æ’ä»¶ -\u0026gt; å­˜å‚¨åº“ -\u0026gt; æ·»åŠ å­˜å‚¨åº“ -\u0026gt; è¾“å…¥manifest.jsonåœ°å€ -\u0026gt; ç¡®å®š\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨ç›®å½•ä¸­æ‰¾åˆ°åˆšåˆšæ·»åŠ çš„æ’ä»¶ï¼Œç‚¹å‡»å®‰è£…å³å¯ã€‚\næ›´æ¢çš®è‚¤ https://mirror.ghproxy.com/https://raw.githubusercontent.com/danieladov/JellyfinPluginManifest/master/manifest.json \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å­—å¹•åˆ®å‰Š å¼¹å¹•åˆ®å‰Š Danmu æ”¯æŒä¸‹è½½å“”ç«™ï¼Œçˆ±å¥‡è‰ºï¼Œè…¾è®¯ï¼Œä¼˜é…·ï¼Œç­‰è§†é¢‘çš„å¼¹å¹•ã€‚\nhttps://mirror.ghproxy.com/https://github.com/cxfksword/jellyfin-plugin-danmu/releases/download/manifest/manifest_cn.json å­—å¹•åˆ®å‰Š OpenSubtitles OpenSubtitles æ²¡æ‰¾åˆ° manifest.json åœ°å€ï¼Œéœ€è¦ä¸‹è½½æ’ä»¶ï¼Œç„¶åä¸Šä¼ åˆ° Jellyfin ä¸­å®‰è£…ã€‚jellyfin/jellyfin-plugin-opensubtitles\nHome | opensubtitles.comæ³¨å†Œè´¦å·ï¼Œç”Ÿæˆ API Keyï¼Œç„¶ååœ¨æ’ä»¶ä¸­é…ç½®å³å¯ã€‚\nå…ƒæ•°æ® å‰§é›†é‡å‘½å Nriver/Episode-ReName: ç”µè§†å‰§/ç•ªå‰§è‡ªåŠ¨åŒ–é‡å‘½åå·¥å…·, ä¸€é”®æ‰¹é‡æ”¹å. å¯é…åˆQBittorrentä¸‹è½½åè‡ªåŠ¨é‡å‘½å, æ–¹ä¾¿Embyè‡ªåŠ¨åˆ®å‰Š. æ”¯æŒWindows, Linux, MacOS, Docker å’Œ ç¾¤æ™–å¥—ä»¶ç¯å¢ƒè¿è¡Œ\nå¸¸è§„åˆ®å‰Š Metashark https://mirror.ghproxy.com/https://github.com/cxfksword/jellyfin-plugin-metashark/releases/download/manifest/manifest_cn.json å°æ—¥å­åˆ®å‰Š Metatube éƒ¨ç½²åç«¯æœåŠ¡ï¼Œç„¶ååœ¨æ’ä»¶ä¸­é…ç½®åç«¯åœ°å€å³å¯ã€‚è¿™é‡Œæ¯”è¾ƒå…³é”®çš„æ˜¯éœ€è¦é…ç½®ä»£ç†ï¼Œå¹¶ä¸”ä»£ç†éœ€è¦é€šè¿‡WebUIè®¾ç½®å…è®¸æ¥è‡ªå±€åŸŸç½‘çš„è¿æ¥ï¼Œå¦åˆ™æ— æ³•è·å–åˆ°æ•°æ®ã€‚è¯·å‚è€ƒè¿™ç¯‡æ–‡ç« Linux ä¸‹ä½¿ç”¨ Clash ä½œä»£ç†å¹¶é…ç½®å¼€æœºå¯åŠ¨ | å¤œäº‘æ³Šä¸ªäººåšå®¢ã€‚ä»£ç†åè®®æœ€å¥½é€‰æ‹©socks5ã€‚\nmetatube: image: metatube/metatube-server:latest container_name: metatube ports: - 8180:8080 restart: unless-stopped environment: - http_proxy=socks5://192.168.1.9:7891 - https_proxy=socks5://192.168.1.9:7891 - USER_UID=1000 - USER_GID=1000 - TZ=Asia/Shanghai networks: - br-net-metatube depends_on: - metatube-postgres volumes: - /root/sharedfolder/appdata/metatube/run:/var/run command: -dsn \u0026#34;postgres://metatube:metatube@/metatube?host=/var/run/postgresql\u0026#34; -port 8080 -db-auto-migrate -db-prepared-stmt metatube-postgres: image: postgres:15-alpine container_name: metatube-postgres restart: unless-stopped environment: - USER_UID=1000 - USER_GID=1000 - POSTGRES_USER=metatube - POSTGRES_PASSWORD=metatube - POSTGRES_DB=metatube - TZ=Asia/Shanghai volumes: - /root/sharedfolder/appdata/metatube/db:/var/lib/postgresql/data - /root/sharedfolder/appdata/metatube/run:/var/run command: \u0026#34;-c TimeZone=Asia/Shanghai -c log_timezone=Asia/Shanghai -c listen_addresses=\u0026#39;\u0026#39; -c unix_socket_permissions=0777\u0026#34; networks: br-net-metatube: external: true \u003c!DOCTYPE html\u003e Responsive Image https://mirror.ghproxy.com/https://raw.githubusercontent.com/metatube-community/jellyfin-plugin-metatube/dist/manifest.json æ¬§ç¾åˆ®å‰Š TheP**nDB Google æœç´¢ TheP**nDB æ³¨å†Œè´¦å·ï¼Œç”Ÿæˆ API Keyï¼Œç„¶ååœ¨æ’ä»¶ä¸­é…ç½®å³å¯ã€‚\nhttps://mirror.ghproxy.com/https://raw.githubusercontent.com/ThePornDatabase/Jellyfin.Plugin.ThePornDB/main/manifest.json \u003c!DOCTYPE html\u003e Responsive Image è·³è¿‡ç‰‡å¤´ Intro-Skip https://mirror.ghproxy.com/https://raw.githubusercontent.com/ConfusedPolarBear/intro-skipper/master/manifest.json ","permalink":"https://lifeislife.cn/posts/jellyfin%E6%89%93%E9%80%A0%E6%9C%AC%E5%9C%B0%E5%BD%B1%E9%9F%B3%E5%BA%93/","summary":"\u003ch1 id=\"docker-å¯åŠ¨\"\u003eDocker å¯åŠ¨\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yml\" data-lang=\"yml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003eversion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;3.7\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"nt\"\u003eservices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003ejellyfin\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003edockerproxy.com/linuxserver/jellyfin:latest\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003ejellyfin\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003ehostname\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eRISCX\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003ePUID=1000\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003ePGID=1000\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eTZ=Asia/Shanghai  \u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eHTTP_PROXY:\u0026#39;http://192.168.1.9:7890\u0026#39;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003eHTTPS_PROXY:\u0026#39;http://192.168.1.9:7890\u0026#39;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003evolumes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/root/sharedfolder/appdata/jellyfin/config:/config\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/root/sharedfolder/media:/media\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/root/sharedfolder/appdata/jellyfin/cache:/cache\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edevices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"l\"\u003e/dev/dri:/dev/dri\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eextra_hosts\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;api.themoviedb.org:108.138.246.55\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;image.themoviedb.org:104.16.61.155\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e- \u003cspan class=\"s2\"\u003e\u0026#34;www.36dm.com:104.21.80.200\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003enetwork_mode\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;host\u0026#34;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003erestart\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eunless-stopped\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"åˆå§‹åŒ–é…ç½®\"\u003eåˆå§‹åŒ–é…ç½®\u003c/h1\u003e\n\u003cp\u003eå°±ä¸æŒ¨ä¸ªè´´å›¾äº†ï¼Œå»ºè®®å°†é¡µé¢éƒ½è®¾ç½®ä¸ºä¸­æ–‡ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯\u003cstrong\u003eé€‰æ‹©å›½å®¶\u003c/strong\u003eçš„æ—¶å€™ï¼Œ\u003cstrong\u003eä¸­å›½çš„è‹±æ–‡å…¨ç§°æ˜¯ People\u0026rsquo;s Republic of China\u003c/strong\u003eï¼Œä¸æ˜¯ Chinaï¼Œéœ€è¦ä»”ç»†æ‰¾ä¸€ä¸‹ã€‚\u003c/p\u003e","title":"Jellyfin æ‰“é€ æœ¬åœ°å½±éŸ³åº“"},{"content":"æŠ˜è…¾èƒŒæ™¯ ä¸€ç›´æƒ³æ‰¾ä¸€ä¸ªèƒ½å¤Ÿå¿«é€ŸåŒæ­¥æ‰‹æœºä¸ç”µè„‘æ•°æ®çš„å·¥å…·ï¼Œå› ä¸ºæ‰‹æœºäº‘æœåŠ¡çš„ç©ºé—´å°‘çš„å¯æ€œï¼Œæ‰€ä»¥ä¹ æƒ¯éš”ä¸€æ®µæ—¶é—´å°†æ‰‹æœºé‡Œçš„ç…§ç‰‡ã€è§†é¢‘è¿˜æœ‰ä¸€äº›æ–‡ä»¶å¯¼å‡ºåˆ°ç”µè„‘ä¸Šã€‚ä½†æ˜¯æ¯æ¬¡å¤‡ä»½æ–‡ä»¶éƒ½å¾—è¿æ¥æ•°æ®çº¿ï¼Œå¹¶ä¸”æ²¡æ³•å¢é‡å¤‡ä»½ï¼Œå¾—æ‰‹åŠ¨æŒ‘é€‰ï¼Œä¹Ÿè¿˜æŒºéº»çƒ¦çš„ã€‚\né€› GitHub æ—¶ï¼Œæ— æ„é—´å‘ç°äº† Syncthingï¼Œå‡ ä¹ç¬¦åˆäº†æˆ‘æ‰€æœ‰çš„é¢„æœŸã€‚\nå¼€æºï¼Œå…è´¹ï¼Œè‡ªå·±ç”µè„‘å°±å¯ä»¥å½“æœåŠ¡å™¨ï¼Œä»¥åå…¥äº† NASï¼Œå¯ä»¥è‡ªå·±æ­å»ºæœ¬åœ°æœåŠ¡å™¨ã€‚ åŒæ­¥é€Ÿåº¦å¿«ï¼Œå–å†³ WIFI çš„é€Ÿåº¦ï¼Œç›®å‰ä½¿ç”¨ 30M/sï¼ŒåŸºæœ¬æ»¡é€Ÿã€‚ å¤šç«¯æ”¯æŒï¼Œé™¤äº† IOSï¼ˆåæ­£æˆ‘ä¹Ÿæ²¡æœ‰ iOS è®¾å¤‡ï¼Œå˜¿å˜¿ï¼‰ï¼Œå‡ ä¹å…¨å¹³å°æ”¯æŒï¼ŒåŒ…æ‹¬ NAS åŠè·¯ç”±å™¨ã€‚ å¢é‡åŒæ­¥ï¼Œå†ä¹Ÿä¸ç”¨æŒ‘æ–‡ä»¶å¤‡ä»½äº†ã€‚ è¯ä¸å¤šè¯´ï¼Œå¼€æ•´ã€‚\nä¸‹è½½å®‰è£… ç›´æ¥è¿›å…¥Syncthingå®˜ç½‘ï¼Œä¸‹è½½å®‰è£…ã€‚åœ¨ Ubuntu ä¸‹å®‰è£…å‚è€ƒè¿™é‡Œã€‚Android ç‰ˆæœ¬ä¸‹è½½Syncthingã€‚\næ¥ä¸‹æ¥ä»¥ Windows ä¸ Android æ‰‹æœºåŒæ­¥ä¸ºä¾‹ï¼Œä¸‹è½½å®‰è£…åï¼Œæ‰“å¼€syncthing.exeï¼Œå³å¯æ‰“å¼€ç®¡ç†ç•Œé¢ï¼Œæˆ–è€…æµè§ˆå™¨è¾“å…¥http://127.0.0.1:8384ä¹Ÿå¯è¿›å…¥ç®¡ç†ç•Œé¢ã€‚\nWindows ç•Œé¢ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image Android ç•Œé¢ï¼š \u003c!DOCTYPE html\u003e Responsive Image è®¾å¤‡é…å¯¹ Windows ç®¡ç†é¡µé¢-\u0026gt;æ“ä½œ-\u0026gt;æ˜¾ç¤º IDï¼Œä¼šæ˜¾ç¤ºæœ¬æœºçš„äºŒç»´ç ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image Android æ‰‹æœºæ‰“å¼€åº”ç”¨ï¼Œåˆ‡æ¢åˆ°è®¾å¤‡ç•Œé¢ï¼Œç‚¹å‡»å³ä¸Šè§’åŠ å·ï¼Œç‚¹å‡»äºŒç»´ç æ ‡è¯†ï¼Œå³å¯æ‰«æäºŒç»´ç ï¼Œå®Œæˆè®¾å¤‡æ·»åŠ ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœæ­£ç¡®æ·»åŠ ï¼ŒWindows ç®¡ç†ç•Œé¢ä¼šæ˜¾ç¤º Android è®¾å¤‡ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image Android åŒæ­¥è‡³ Windows æ‰“å¼€ Android åº”ç”¨ï¼Œåˆ‡æ¢åˆ°æ–‡ä»¶å¤¹ç•Œé¢ï¼Œç‚¹å‡»å³ä¸Šè§’åŠ å·ï¼Œé…ç½®åŒæ­¥çš„æ–‡ä»¶å¤¹ï¼š \u003c!DOCTYPE html\u003e Responsive Image æ ¹æ®ä¸‹å›¾æç¤ºï¼Œé…ç½®åº”ç”¨ï¼Œè®°å¾—ä¿å­˜ï¼š \u003c!DOCTYPE html\u003e Responsive Image ç›®å½•åˆ—è¡¨æ˜¾ç¤ºåˆšåˆšçš„é…ç½®ï¼š \u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»æ‰“å¼€ï¼Œå¼€å¯ä¸è¿œç¨‹è®¾å¤‡ Windows åŒæ­¥ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å½“è¿”å›æ—¶ï¼ŒWindows ç«¯å°†ä¼šå¼¹å‡ºé€šçŸ¥ï¼Œæç¤ºæœ‰ Android è®¾å¤‡çš„æ–‡ä»¶è¦åˆ†äº«åˆ°ç”µè„‘ï¼Œç‚¹å‡»æ·»åŠ ï¼š \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image è‡³æ­¤ï¼ŒAndroid åŒæ­¥è‡³ Windows å®Œæˆã€‚æ­¤æ—¶åœ¨ Android è®¾å¤‡çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä»»æ„æ–‡ä»¶ï¼Œéƒ½ä¼šåŒæ­¥åˆ° Windowsã€‚\nå¦‚æœæ˜¯å±€åŸŸç½‘å†…ï¼Œå‘ç°è®¾å¤‡çš„é€Ÿåº¦å¾ˆæ…¢ï¼Œå¯ä»¥å°è¯•è®¾ç½®é™æ€çš„ IPã€‚æ‰‹æœºç«¯ -\u0026gt; è®¾å¤‡ -\u0026gt; é“¾æ¥å›¾æ ‡ã€‚é»˜è®¤ä¸º dynamicï¼Œå°†å…¶æ”¹ä¸º Windows çš„ IP å’Œ syncthing çš„ç«¯å£ã€‚å¦‚tcp://192.168.1.9:22000ã€‚\nä¹Ÿå¯ä»¥åœ¨æœåŠ¡ç«¯é…ç½®æ‰‹æœºçš„IPï¼Œæ‰‹æœºIPå¯ä»¥é€šè¿‡è®¾ç½®ä¸­å¿ƒ-\u0026gt;å…³äºæ‰‹æœº-\u0026gt;çŠ¶æ€-\u0026gt;IPåœ°å€æŸ¥çœ‹ã€‚æ¯”å¦‚192.168.1.16ï¼Œé‚£ä¹ˆå¯ä»¥é…ç½®ä¸ºtcp://192.168.1.16:22000ã€‚\nWindows åŒæ­¥è‡³ Android Windows ç®¡ç†ç•Œé¢ï¼Œæ·»åŠ æ–‡ä»¶å¤¹ï¼š \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»ä¿å­˜åï¼Œä¸ä¹‹å‰ç±»ä¼¼ï¼ŒAndroid ä¼šæç¤ºæœ‰ Windows è®¾å¤‡çš„æ–‡ä»¶è¦åˆ†äº«åˆ° Androidï¼Œç‚¹å‡»æ·»åŠ ï¼š\nå¦‚æœ Android è®¾å¤‡æ²¡æœ‰å¼¹å‡ºæç¤ºæ·»åŠ å…±äº«æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆæ‰“å¼€åº”ç”¨ä¾§è¾¹æ -\u0026gt;ç½‘é¡µç®¡ç†é¡µé¢ï¼Œå°†ä¼šæœ‰å¼¹çª—ï¼Œå¦‚ä¸‹å›¾\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»æ·»åŠ ï¼Œé…ç½®æ–‡ä»¶å¤¹ç›®å½•ç­‰ä¸ä¹‹å‰ç±»ä¼¼ã€‚\nè‡³æ­¤ï¼ŒWindows åŒæ­¥è‡³ Android å®Œæˆã€‚æ­¤æ—¶åœ¨ Windows è®¾å¤‡çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä»»æ„æ–‡ä»¶ï¼Œéƒ½ä¼šåŒæ­¥åˆ° Androidã€‚\nä½¿ç”¨æŠ€å·§ Syncthing æ”¯æŒä¸‰ç§å·¥ä½œæ¨¡å¼ å‘é€å’Œæ¥æ”¶ï¼ŒSend \u0026amp; Receive Folderï¼Œè¿™æ˜¯æ–‡ä»¶å¤¹çš„é»˜è®¤æ¨¡å¼ï¼Œå¯¹æ–‡ä»¶å¤¹çš„ä¿®æ”¹ä¼šå‘é€ï¼Œå…¶ä»–è®¾å¤‡çš„ä¿®æ”¹ä¹Ÿä¼šåŒæ­¥å›æ¥ã€‚ ä»…å‘é€ Send Onlyï¼Œè¿™ç§æ¨¡å¼è¡¨ç¤ºä»…ä»…å°†å½“å‰è®¾å¤‡ä¸Šçš„æ–‡ä»¶å¤¹çš„æ”¹åŠ¨å‘é€åˆ°å…¶ä»–è®¾å¤‡ï¼Œç”¨æ¥éšå¼åœ°è¡¨ç¤ºå…¶ä»–åŒæ­¥è®¾å¤‡ä¸Šçš„æ–‡ä»¶ä¸ä¼šè¢«ä¿®æ”¹ï¼Œæˆ–è€…å…¶ä»–è®¾å¤‡ä¸Šçš„ä¿®æ”¹å¯ä»¥è¢«å¿½ç•¥ã€‚è¿™ç§æ¨¡å¼éå¸¸é€‚åˆï¼Œå°†å½“å‰è®¾å¤‡è®¾å®šä¸ºå·¥ä½œè®¾å¤‡ï¼Œç„¶åè®¾å®šä¸€å°è®¾å¤‡ä½œä¸ºæ­¤è®¾å¤‡çš„å¤‡ä»½ã€‚ åœ¨ Send Only æ¨¡å¼ä¸‹ï¼Œé›†ç¾¤ä¸­å…¶ä»–è®¾å¤‡çš„ä¿®æ”¹éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä¿®æ”¹ä¾ç„¶ä¼šæ¥æ”¶ï¼Œæ–‡ä»¶å¤¹å¯èƒ½ä¼šå‡ºç° ã€Œout of syncã€ï¼Œä½†æ˜¯æ²¡æœ‰ä¿®æ”¹ä¼šè¢«åº”ç”¨åˆ°æœ¬åœ°ã€‚ å½“ Send Only æ–‡ä»¶å¤¹å‡ºç° out of syncï¼Œé‚£ä¹ˆä¸€ä¸ªçº¢è‰²çš„ Override Changes ä¼šå‡ºç°åœ¨æ–‡ä»¶å¤¹è¯¦æƒ…ä¸­ï¼Œç‚¹å‡»è¯¥æŒ‰é’®ä¼šå¼ºåˆ¶å°†å½“å‰ä¸»æœºçš„çŠ¶æ€åŒæ­¥åˆ°å…¶ä»–å‰©ä½™èŠ‚ç‚¹ã€‚ä»»ä½•å¯¹æ–‡ä»¶çš„ä¿®æ”¹ï¼Œéƒ½ä¼šè¢«å½“å‰ä¸»æœºä¸Šçš„ç‰ˆæœ¬æ‰€è¦†ç›–ï¼Œä»»ä½•ä¸å­˜åœ¨äºå½“å‰ä¸»æœºèŠ‚ç‚¹çš„æ–‡ä»¶éƒ½ä¼šè¢«åˆ é™¤ï¼Œå…¶ä»–ç±»ä¼¼ã€‚ ä»…æ¥æ”¶ Receive Onlyï¼Œè¿™ç§æ¨¡å¼ä¸‹æ‰€æœ‰çš„ä¿®æ”¹éƒ½ä¼šè¢«æ¥æ”¶å¹¶åº”ç”¨ï¼Œç„¶åé‡æ–°åˆ†å‘ç»™å…¶ä»–ä½¿ç”¨ send-receive æ¨¡å¼çš„è®¾å¤‡ã€‚ä½†æ˜¯æœ¬åœ°çš„ä¿®æ”¹ä¸ä¼šè¢«åˆ†å‘ç»™å…¶ä»–è®¾å¤‡ã€‚è¿™ç§æ¨¡å¼é€‚åˆäºå»ºç«‹å¤‡ä»½é•œåƒï¼ˆreplication mirrorsï¼‰ï¼Œæˆ–è€…å¤‡ä»½ç›®çš„ä¸»æœºçš„åœºæ™¯ï¼Œè¿™äº›æƒ…å†µä¸‹ä¸æœŸæœ›æœ‰æœ¬åœ°ä¿®æ”¹æˆ–è€…æœ¬åœ°çš„ä¿®æ”¹æ˜¯ä¸å…è®¸çš„ å½“æœ¬åœ°æ–‡ä»¶è¢«åˆ é™¤æ—¶ï¼ŒSyncthing ä¼šæ˜¾ç¤ºä¸€ä¸ª Revert Local Changes æŒ‰é’®ã€‚ä½¿ç”¨è¿™ä¸ªæŒ‰é’®ä¼šå°†æœ¬åœ°çš„ä¿®æ”¹å›æ’¤ï¼Œæ‰€æœ‰æ·»åŠ çš„æ–‡ä»¶ä¼šè¢«åˆ é™¤ï¼Œä¿®æ”¹æˆ–åˆ é™¤çš„æ–‡ä»¶ä¼šé‡æ–°ä»å…¶ä»–èŠ‚ç‚¹åŒæ­¥ï¼Œæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä½†æ˜¯å‡å¦‚ A è®¾å¤‡è®¾ç½®ä»…å‘é€ï¼ŒB è®¾å¤‡è®¾ç½®å‘é€å’Œæ¥æ”¶ï¼ŒA æ˜¯ä¸ä¼šåŒæ­¥ B çš„æ›´æ”¹çš„ï¼ å¿½ç•¥ç‰¹å®šæ–‡ä»¶ã€ç›®å½• å¿½ç•¥åˆ—è¡¨ï¼Œå’Œ gitignore ç±»ä¼¼ã€‚æ¯ä¸€å°è®¾å¤‡ä¸Šçš„ .stignore éƒ½æ˜¯åˆ†åˆ«è®¾ç½®çš„ï¼Œä¸ä¼šè¿›è¡ŒåŒæ­¥ã€‚\nå¦‚æœ A çš„.stignoreå¿½ç•¥äº† test ï¼Œè€Œ B æ²¡æœ‰è¿™æ ·åšï¼Œå®é™…ä¸Šä¼šå‘ç”Ÿè¿™æ ·çš„äº‹æƒ…ï¼š\nA ä¸ä¼šæ‰«æå’Œé€šçŸ¥ Bï¼ˆå¹¿æ’­ï¼‰å…³äº test çš„å˜åŠ¨ï¼› B å¯¹å…³äº test çš„å˜åŠ¨æŒå¼€æ”¾çš„å§¿æ€ï¼Œä½†ä¸ä¼šæ”¶åˆ°ä»»ä½•å…³äº A ä¸Šé¢ test çš„å˜åŠ¨ä¿¡æ¯ï¼ˆå¯èƒ½æ¥æ”¶åˆ°å…¶å®ƒåŒæ­¥è®¾å¤‡çš„ï¼‰ï¼› B ä¼šæ‰«æ test ä»¥åŠæ¨é€å…¶å…³äº test å˜åŠ¨çš„ä¿¡æ¯ï¼Œä½†ä¼šè¢« A å¿½ç•¥ï¼ŒA ä¹Ÿä¼šå¿½ç•¥å…¶å®ƒåŒæ­¥è®¾å¤‡å…³äº test çš„ä¿¡æ¯ï¼› B ä¼šæ¥æ”¶æ¥è‡ªå…¶å®ƒåŒæ­¥è®¾å¤‡æ¨é€çš„å…³äº test çš„ä¿¡æ¯ï¼› å‚è€ƒèµ„æ–™ Syncthing åˆä¸€æ¬¾åŒæ­¥å·¥å…· | Verne in GitHub\nFolder Types â€” Syncthing documentation\n","permalink":"https://lifeislife.cn/posts/%E4%BD%BF%E7%94%A8syncthing%E5%A4%9A%E7%AB%AF%E4%B8%9D%E6%BB%91%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%87%E4%BB%BD/","summary":"\u003ch2 id=\"æŠ˜è…¾èƒŒæ™¯\"\u003eæŠ˜è…¾èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eä¸€ç›´æƒ³æ‰¾ä¸€ä¸ªèƒ½å¤Ÿå¿«é€ŸåŒæ­¥æ‰‹æœºä¸ç”µè„‘æ•°æ®çš„å·¥å…·ï¼Œå› ä¸ºæ‰‹æœºäº‘æœåŠ¡çš„ç©ºé—´å°‘çš„å¯æ€œï¼Œæ‰€ä»¥ä¹ æƒ¯éš”ä¸€æ®µæ—¶é—´å°†æ‰‹æœºé‡Œçš„ç…§ç‰‡ã€è§†é¢‘è¿˜æœ‰ä¸€äº›æ–‡ä»¶å¯¼å‡ºåˆ°ç”µè„‘ä¸Šã€‚ä½†æ˜¯æ¯æ¬¡å¤‡ä»½æ–‡ä»¶éƒ½å¾—è¿æ¥æ•°æ®çº¿ï¼Œå¹¶ä¸”æ²¡æ³•å¢é‡å¤‡ä»½ï¼Œå¾—æ‰‹åŠ¨æŒ‘é€‰ï¼Œä¹Ÿè¿˜æŒºéº»çƒ¦çš„ã€‚\u003c/p\u003e","title":"ä½¿ç”¨ Syncthing å¤šç«¯ä¸æ»‘åŒæ­¥ä¸å¤‡ä»½"},{"content":"ä¿ç•™ç°åœº remote: Resolving deltas: 100% (114/114) remote: Processing changes: refs: 1,done remote: ERROR: missing Change-Idincommit message footer remote: remote: Hint: To automatically insert Change-Id,installthe hook: remote: gitdir=$(git rev-parse --git-dir);scp-p -P XX XX@gerrit.xxxxx.com:hooks/commit-msg${gitdir}/hooks/ remote: And then amend the commit: remote: git commit --amend æ¢ç©¶åŸå›  ç†è§£ change-id ä»£ç å®¡æ ¸æ˜¯è¦å¯¹ä¸€ä¸ªå®Œæ•´çš„å˜æ›´è¿›è¡Œå®¡æ ¸ï¼Œæ¯”å¦‚ä¸€æ¬¡ Bug ä¿®å¤ï¼Œæœ‰å¤šæ¬¡æäº¤ Commitï¼Œæ¯æ¬¡çš„ Commit Id éƒ½ä¸åŒï¼Œé‚£ä¹ˆå¦‚ä½•å°†å¤šä¸ªä¸åŒçš„ Commit ID å…³è”åˆ°åŒä¸€ä¸ª Chanege-Id å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦å°† Change-Id æ·»åŠ åˆ° Commit çš„ footerï¼ˆæœ€åä¸€è¡Œï¼‰ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å°†å¤šä¸ª Commit å…³è”åˆ°åŒä¸€ä¸ª Change-Id äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image Change-Id ä¸ºé¿å…ä¸æäº¤ Id å†²çªï¼Œé€šå¸¸ä»¥å¤§å†™å­—æ¯ I ä¸ºå‰ç¼€ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ï¼ŒChange-Id æ˜¯ Gerrit çš„æ¦‚å¿µï¼Œä¸æ˜¯ Git çš„æ¦‚å¿µã€‚ä½ åªæœ‰ç”¨ Gerrit æ‰ä¼šæœ‰ Change-Idï¼Œè€Œ Git åªæœ‰æäº¤ Idã€‚\né‚£ä¹ˆè¿™ä¸ª Change-Id æ˜¯æ€ä¹ˆç”Ÿæˆçš„å‘¢ï¼Ÿ\nç†è§£ git hooks æˆ‘åœ¨Git hooks é’©å­çš„ä½¿ç”¨ä¸­æœ‰è¯¦ç»†è§£é‡Šã€‚åœ¨è¿™é‡Œç®€å•çš„ä»‹ç»ä¸€ä¸‹ï¼Œé’©å­ (hooks) æ˜¯ä¸€äº›åœ¨.git/hooksç›®å½•çš„è„šæœ¬ï¼Œåœ¨è¢«ç‰¹å®šçš„äº‹ä»¶è§¦å‘åè¢«è°ƒç”¨ã€‚æ¯”å¦‚æ‰§è¡Œgit commitï¼Œgit pushï¼Œgit pullç­‰å‘½ä»¤æ—¶ï¼Œè„šæœ¬ä¼šè¢«è°ƒç”¨ã€‚\nGerrit ä¹Ÿæä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„commit-msgé’©å­ï¼Œå½“æˆ‘ä»¬åœ¨æ‰§è¡Œgit commitæ—¶ï¼Œä¼šè¢«è°ƒç”¨ã€‚ä¼šè‡ªåŠ¨ç”ŸæˆChange-Idï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°commitçš„ footer ä¸­ã€‚\né€šå¸¸æˆ‘ä»¬ä»è¿œç¨‹ä¸‹è½½ä»£ç åï¼Œä¼šè‡ªåŠ¨ä¸‹è½½commit-msgé’©å­ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°.git/hooksç›®å½•ä¸­ã€‚æ­£å¸¸æ¥è¯´hooksæ˜¯ä¸ä¼šåŠ å…¥ä»£ç ä»“åº“çš„ï¼Œè¿™åº”è¯¥å–å†³äº Gerrit çš„é…ç½®ã€‚\nè¿™æ¬¡é”™è¯¯åº”è¯¥æ˜¯æˆ‘åœ¨æµ‹è¯•é’©å­çš„æ—¶å€™ï¼Œå°† Gerrit æ ‡å‡†é’©å­åˆ é™¤äº†ï¼Œå¯¼è‡´æ— æ³•æ­£ç¡®ç”Ÿæˆ Change-Idã€‚\nè§£å†³æ–¹æ³• æŠ¥é”™æ—¶å…¶å®å·²ç»æä¾›äº†è§£å†³æ–¹å¼ï¼š\n# æç¤ºè®©æˆ‘ä»¬å®‰è£…è¿œç¨‹çš„é’©å­ remote: Hint: To automatically insert Change-Id,installthe hook: # åœ¨å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š # è¿™æ¡å‘½ä»¤å°†æ‰¾åˆ°è¯¥é¡¹ç›®çš„ git ç›®å½•,å¹¶å°†å…¶èµ‹å€¼ç»™ gitdir è¿™ä¸ªå˜é‡ gitdir=$(git rev-parse --git-dir) # æ‰§è¡Œ scp å‘½ä»¤,ä» gerrit ä»£ç æœåŠ¡å™¨å°†é’©å­è„šæœ¬æ–‡ä»¶ commit-msg ä¸‹è½½åˆ°é¡¹ç›®çš„é’©å­ç›®å½•ä¸‹ (ä¸€èˆ¬æ˜¯ .git/hooks/) scp-p -P XX XX@gerrit.xxxxx.com:hooks/commit-msg${gitdir}/hooks/ å®‰è£…å®Œä¹‹åé‡æ–°git commit --amendï¼Œå°±å¯ä»¥æ­£å¸¸ç”Ÿæˆ Change-Id äº†ã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3%E6%8F%90%E4%BA%A4gerrit-missing-change-id/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eremote: Resolving deltas: 100% \u003cspan class=\"o\"\u003e(\u003c/span\u003e114/114\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eremote: Processing changes: refs: 1,done   \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eremote: ERROR: missing Change-Idincommit message footer\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eremote:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eremote: Hint: To automatically insert Change-Id,installthe hook:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eremote:   \u003cspan class=\"nv\"\u003egitdir\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$(\u003c/span\u003egit rev-parse --git-dir\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003escp-p -P XX XX@gerrit.xxxxx.com:hooks/commit-msg\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003egitdir\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e/hooks/\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eremote: And \u003cspan class=\"k\"\u003ethen\u003c/span\u003e amend the commit:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eremote:   git commit --amend\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003ch3 id=\"ç†è§£-change-id\"\u003eç†è§£ change-id\u003c/h3\u003e\n\u003cp\u003eä»£ç å®¡æ ¸æ˜¯è¦å¯¹ä¸€ä¸ªå®Œæ•´çš„å˜æ›´è¿›è¡Œå®¡æ ¸ï¼Œæ¯”å¦‚ä¸€æ¬¡ Bug ä¿®å¤ï¼Œæœ‰å¤šæ¬¡æäº¤ Commitï¼Œæ¯æ¬¡çš„ Commit Id éƒ½ä¸åŒï¼Œé‚£ä¹ˆå¦‚ä½•å°†å¤šä¸ªä¸åŒçš„ Commit ID å…³è”åˆ°åŒä¸€ä¸ª Chanege-Id å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦å°† Change-Id æ·»åŠ åˆ° Commit çš„ footerï¼ˆæœ€åä¸€è¡Œï¼‰ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å°†å¤šä¸ª Commit å…³è”åˆ°åŒä¸€ä¸ª Change-Id äº†ã€‚\u003c/p\u003e","title":"è§£å†³æäº¤ gerrit missing Change-Id"},{"content":"èƒŒæ™¯ å…¬å¸ä½¿ç”¨ Gerrit ä½œä¸º Review å¹³å°ï¼Œä½†æ˜¯æ¯æ¬¡æäº¤ä»£ç éƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ  Reviewerï¼Œè¿˜è¦æŠ„é€ç»„å†…æˆå‘˜ï¼Œè¿™ç§é‡å¤æ€§åŠ³åŠ¨ï¼Œç¨‹åºå‘˜æ˜¯ç»ä¸èƒ½å®¹å¿çš„ã€‚gerrit æä¾›äº†å‘é€é‚®ä»¶çš„åŠŸèƒ½ã€‚\nè§£å†³æ–¹æ³• å®˜æ–¹ç¤ºä¾‹ï¼š\ngit push ssh://john.doe@git.example.com:29418/kernel/common HEAD:refs/for/experimental%r=a@a.com,cc=b@o.com æœ€åçš„%æ˜¯ä¸ªåˆ†éš”ç¬¦ï¼Œr='a@a.comè¡¨ç¤º Reviewer æ˜¯a@a.comï¼Œcc=b@o.comè¡¨ç¤ºæŠ„é€ç»„å†…æˆå‘˜æ˜¯b@o.comã€‚\næ³¨æ„ï¼é‚®ç®±ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼\nä»¥ä¸€ä¸ªä»“åº“ä¸ºä¾‹ï¼š\ngit push origin HEAD:refs/for/branch_dev_name%cc=zhangsan@qq.com,cc=lisi@qq.com,cc=wangerma@qq.com,cc=chenwu@qq.com ä½†æ˜¯è¦è¿™ä¹ˆå†™ï¼Œå²‚ä¸æ˜¯æŠŠæ“ä½œææ›´å¤æ‚äº†ã€‚\nç»ˆæåŠæ³•ï¼Œæ‰“å¼€é¡¹ç›®è·¯å¾„ä¸‹çš„.gitç›®å½•ã€‚ç¼–è¾‘configæ–‡ä»¶ï¼š\nåŸæ–‡ä»¶é‡Œæœ‰å¦‚ä¸‹å­—æ®µï¼š\n[core] repositoryformatversion = 0 filemode = false bare = false logallrefupdates = true ignorecase = true [remote \u0026#34;origin\u0026#34;] url = git@github.com:Dunky-Z/Dunky-Z.github.io.git fetch = +refs/heads/*:refs/remotes/origin/* æˆ‘ä»¬å¯ä»¥å°†è¿œç¨‹ä»“åº“åæ¢æˆå®¹æ˜“åŒºåˆ†çš„åå­—ï¼Œè‡ªå·±éšæ„ï¼š\n[core] repositoryformatversion = 0 filemode = false bare = false logallrefupdates = true ignorecase = true [remote \u0026#34;origin\u0026#34;] url = git@github.com:Dunky-Z/Dunky-Z.github.io.git fetch = +refs/heads/*:refs/remotes/origin/* # ä»¥ä¸‹ä¸ºæ–°å¢å†…å®¹ [remote \u0026#34;review\u0026#34;] url = git@github.com:Dunky-Z/Dunky-Z.github.io.git fetch = +refs/heads/*:refs/remotes/origin/* push = HEAD:refs/for/%cc=zhangsan@qq.com, cc=lisi@qq.com, cc=wangerma@qq.com, cc=chenwu@qq.com ä¸‹æ¬¡æƒ³è¦æ¨é€éœ€è¦ review çš„ä»£ç ï¼Œå°±ç›´æ¥æ‰§è¡Œgit push reviewï¼Œå…¶ä¸­pushå°±ç›¸å½“äºï¼š\npush HEAD:refs/for/%cc=zhangsan@qq.com,cc=lisi@qq.com,cc=wangerma@qq.com,cc=chenwu@qq.com å‚è€ƒèµ„æ–™ Gerrit Code Review - Uploading Changes\n","permalink":"https://lifeislife.cn/posts/gerrit%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E6%8A%84%E9%80%81%E6%8F%90%E9%86%92/","summary":"\u003ch2 id=\"èƒŒæ™¯\"\u003eèƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eå…¬å¸ä½¿ç”¨ Gerrit ä½œä¸º Review å¹³å°ï¼Œä½†æ˜¯æ¯æ¬¡æäº¤ä»£ç éƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ  Reviewerï¼Œè¿˜è¦æŠ„é€ç»„å†…æˆå‘˜ï¼Œè¿™ç§é‡å¤æ€§åŠ³åŠ¨ï¼Œç¨‹åºå‘˜æ˜¯ç»ä¸èƒ½å®¹å¿çš„ã€‚gerrit æä¾›äº†å‘é€é‚®ä»¶çš„åŠŸèƒ½ã€‚\u003c/p\u003e","title":"Gerrit æ‰¹é‡æ·»åŠ æŠ„é€æé†’"},{"content":"æœ‰æ—¶éœ€è¦é€šè¿‡makeç¼–è¯‘å‘½ä»¤æ—¶ç¡®å®šä»£ç ä¸­çš„å®å®šä¹‰ï¼Œå¦‚ç¼–è¯‘ä¸åŒçš„ç‰ˆæœ¬åªéœ€è¦ä½¿ç”¨ä¸åŒçš„ç¼–è¯‘å‘½ä»¤å³å¯ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å†…éƒ¨ä»£ç ã€‚\nå½“å‰çš„éœ€æ±‚æ˜¯ä»£ç ä¸­æœ‰ä¸€éƒ¨åˆ†ä»£ç é€šè¿‡å®å®šä¹‰æ¥ç¡®å®šç¼–è¯‘çš„æ˜¯ DIE0 ç‰ˆæœ¬è¿˜æ˜¯ DIE1 ç‰ˆæœ¬ï¼Œå¦‚æœå®šä¹‰äº†DIE_ORDINAL_0 å°±ä½¿ç”¨ DIE0 çš„åŸºåœ°å€ï¼Œå¦‚æœæœªå®šä¹‰å°±ä½¿ç”¨ DIE1 çš„åŸºåœ°å€ã€‚\n#define DIE_ORDINAL_0 #ifdef DIE_ORDINAL_0 #define PERIPH_BASE (SYS_BASE_ADDR_DIE0) #else #define PERIPH_BASE (SYS_BASE_ADDR_DIE1) #endif gcc å‘½ä»¤æ”¯æŒ-Då®å®šä¹‰ï¼Œç›¸å½“äº C ä¸­çš„å…¨å±€#defineï¼Œåœ¨ Makefile ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å®å®šä¹‰æ¥æ§åˆ¶æºç¨‹åºçš„ç¼–è¯‘ã€‚åªè¦åœ¨ Makefile ä¸­çš„ CFLAGS ä¸­é€šè¿‡é€‰é¡¹-D æ¥æŒ‡å®šä½ äºå®šä¹‰çš„å®å³å¯ã€‚\nCFLAGS += -D DIE_ORDINAL_0 # åœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Šæ­¤é€‰é¡¹å°±å¯ä»¥äº† $(CC) $(CFLAGS) $^ -o $@ è¿™æ ·çš„è¯ï¼Œç›¸å½“äºè®¾ç½®äº†DIE_ORDINAL_0è¿™ä¸ªå®å®šä¹‰ã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³é€šè¿‡å‘½ä»¤è¡Œçš„å‚æ•°æ¥å†³å®šæ˜¯å¦ä½¿ç”¨è¿™ä¸ªå®å®šä¹‰ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›ç®€å•çš„æ–¹æ³•è·å–ï¼š\nifeq ($(DIE0), y) CFLAGS +=-DDIE_ORDINAL_0 else CFLAGS +=-DDIE_ORDINAL_1 endif $(CC) $(CFLAGS) $^ -o $@ ä»å‘½ä»¤è¡Œæ‰¾åˆ°DIE0è¿™ä¸ªå‚æ•°ï¼Œå¦‚æœå®ƒç­‰äºyè¡¨ç¤ºä½¿ç”¨DIE_ORDINAL_0ã€‚å¦‚æœä¸ç­‰äºyåˆ™ä½¿ç”¨DIE_ORDINAL_1ï¼Œå› ä¸ºæˆ‘ä»¬ä»£ç é‡Œæ²¡æœ‰DIE_ORDINAL_1ï¼Œæ‰€ä»¥å°±ç›¸å½“äºæ²¡æœ‰å®šä¹‰DIE_ORDINAL_0ã€‚\nå‘½ä»¤è¡Œç¤ºä¾‹ï¼š\n# ç¼–è¯‘DIE0 make DIE0=\u0026#34;y\u0026#34; # ç¼–è¯‘DIE1 make DIE0=\u0026#34;n\u0026#34; ","permalink":"https://lifeislife.cn/posts/makefile%E7%A1%AE%E5%AE%9A%E5%AE%8F%E5%AE%9A%E4%B9%89/","summary":"\u003cp\u003eæœ‰æ—¶éœ€è¦é€šè¿‡\u003ccode\u003emake\u003c/code\u003eç¼–è¯‘å‘½ä»¤æ—¶ç¡®å®šä»£ç ä¸­çš„å®å®šä¹‰ï¼Œå¦‚ç¼–è¯‘ä¸åŒçš„ç‰ˆæœ¬åªéœ€è¦ä½¿ç”¨ä¸åŒçš„ç¼–è¯‘å‘½ä»¤å³å¯ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å†…éƒ¨ä»£ç ã€‚\u003c/p\u003e\n\u003cp\u003eå½“å‰çš„éœ€æ±‚æ˜¯ä»£ç ä¸­æœ‰ä¸€éƒ¨åˆ†ä»£ç é€šè¿‡å®å®šä¹‰æ¥ç¡®å®šç¼–è¯‘çš„æ˜¯ DIE0 ç‰ˆæœ¬è¿˜æ˜¯ DIE1 ç‰ˆæœ¬ï¼Œå¦‚æœå®šä¹‰äº†\u003ccode\u003eDIE_ORDINAL_0\u003c/code\u003e å°±ä½¿ç”¨ DIE0 çš„åŸºåœ°å€ï¼Œå¦‚æœæœªå®šä¹‰å°±ä½¿ç”¨ DIE1 çš„åŸºåœ°å€ã€‚\u003c/p\u003e","title":"Makefile ç¡®å®šå®å®šä¹‰"},{"content":"ä½¿ç”¨èƒŒæ™¯ åœ¨æµ‹è¯•ä¸‹è½½é€Ÿåº¦ï¼Œæˆ–è€…æµ‹è¯•åŠ è§£å¯†æ–‡ä»¶ï¼Œäº¦æˆ–è€…åˆ¶ä½œæ–‡ä»¶ç³»ç»Ÿæ—¶éƒ½éœ€è¦ä¸€äº›æŒ‡å®šå¤§å°çš„æ–‡ä»¶ã€‚Linux æœ‰ä¸€äº›å‘½ä»¤å¯ä»¥å¿«é€Ÿå®Œæˆè¿™æ ·çš„ä»»åŠ¡ã€‚æ¥ä¸‹æ¥ä»‹ç»å‡ ä¸ªå¥½ç”¨çš„å‘½ä»¤ã€‚\nç©ºæ´æ–‡ä»¶ åœ¨ Unix æ–‡ä»¶æ“ä½œä¸­ï¼Œæ“ä½œæ–‡ä»¶çš„ä½ç§»é‡å¯ä»¥å¤§äºæ–‡ä»¶çš„å½“å‰é•¿åº¦ï¼Œåœ¨ä¸‹ä¸€æ¬¡å†™æ“ä½œæ—¶ï¼Œå°±ä¼šæŠŠæ–‡ä»¶æ’‘å¤§ï¼ˆExtendï¼‰ï¼Œåœ¨æ–‡ä»¶é‡Œåˆ›å»ºç©ºæ´ï¼ˆHoleï¼‰ï¼Œæ²¡æœ‰è¢«å®é™…å†™å…¥çš„éƒ¨åˆ†éƒ½æ˜¯ 0ã€‚ç©ºæ´æ–‡ä»¶æ˜¯å¦å ç”¨å®é™…ç£ç›˜ç©ºé—´ç”±æ–‡ä»¶ç³»ç»Ÿè§‰å¾—ï¼ŒLinux ä¸­ç©ºæ´æ–‡ä»¶ä¸å ç”¨å®é™…ç£ç›˜ç©ºé—´ã€‚\nfallocate fallocateç”¨äºå°†å—é¢„åˆ†é…ç»™æ–‡ä»¶ã€‚å¯¹äºæ”¯æŒfallocateç³»ç»Ÿè°ƒç”¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™å¯ä»¥é€šè¿‡åˆ†é…å—å¹¶å°†å…¶æ ‡è®°ä¸ºæœªåˆå§‹åŒ–æ¥å¿«é€Ÿå®Œæˆï¼Œå› æ­¤ä¸éœ€è¦å¯¹æ•°æ®å—è¿›è¡Œ I/O æ“ä½œã€‚è¿™æ˜¯åˆ›å»ºæ–‡ä»¶è€Œä¸æ˜¯ç”¨é›¶å¡«å……çš„æ›´å¿«çš„æ–¹æ³•ã€‚å¤§æ–‡ä»¶å‡ ä¹å¯ä»¥ç«‹å³åˆ›å»ºï¼Œè€Œä¸å¿…ç­‰å¾…ä»»ä½• I/O æ“ä½œå®Œæˆã€‚\nè¯­æ³•ï¼š\nfallocate [-n] [-o offset] -l length filename d: æ£€æµ‹é›¶å¹¶æ›¿æ¢ä¸ºç©ºæ´ã€‚ -nï¼šæŒ‡å®šæ–‡ä»¶çš„å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚ -oï¼šæŒ‡å®šæ–‡ä»¶çš„åç§»é‡ï¼Œå¯ä»¥è·ŸäºŒè¿›åˆ¶$2^{N}$åç¼€KiBï¼ŒMiBï¼ŒGiBï¼ŒTiBï¼ŒPiBå’ŒEiBï¼ˆiBä¸ºå¯é€‰ï¼Œä¾‹å¦‚ï¼ŒKçš„å«ä¹‰ä¸KiBçš„å«ä¹‰ç›¸åŒæˆ–åç¼€KBï¼ŒMBï¼ŒGBï¼ŒPBå’ŒEBçš„åè¿›åˆ¶ï¼ˆ$10^{N}$ï¼‰ã€‚ -lï¼šæŒ‡å®šæ–‡ä»¶çš„å¤§å°ï¼Œå•ä½åŒä¸Šã€‚ -p, --punch-hole: å°†æŸä¸ªèŒƒå›´æ›¿æ¢ä¸ºç©ºæ´ (è¿å¸¦æ‰“å¼€ -n)ã€‚ filenameï¼šæŒ‡å®šæ–‡ä»¶åã€‚ ç¤ºä¾‹ï¼š åˆ†é…ä¸€ä¸ªå¤§å°ä¸º512MBçš„æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºefi.imgï¼š\nfallocate -l 512M efi.img å°†efi.imgæ–‡ä»¶ä¸­çš„0æ›¿æ¢ä¸ºç©ºæ´ï¼š\nfallocate -d efi.img ä»åç§» 128M çš„ä½ç½®æŒ–ä¸€ä¸ª 10M å¤§å°çš„æ´\nfallocate -p -o 128M -l 10M efi.img dd Linux dd å‘½ä»¤ç”¨äºè¯»å–ã€è½¬æ¢å¹¶è¾“å‡ºæ•°æ®ã€‚dd å¯ä»æ ‡å‡†è¾“å…¥æˆ–æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œæ ¹æ®æŒ‡å®šçš„æ ¼å¼æ¥è½¬æ¢æ•°æ®ï¼Œå†è¾“å‡ºåˆ°æ–‡ä»¶ã€è®¾å¤‡æˆ–æ ‡å‡†è¾“å‡º\ndd çš„åŸæ„ä¸º data duplicatorï¼Œä½†ç”±äº dd å±äºè¾ƒä½é˜¶çš„èµ„æ–™å¤„ç†å·¥å…·ï¼Œé€šå¸¸éƒ½ä¼šä»¥ç®¡ç†è€…ï¼ˆrootï¼‰æƒé™æ¥æ‰§è¡Œï¼Œå¦‚æœç¨æœ‰ä¸æ…ï¼Œä¹Ÿå¾ˆå®¹æ˜“é€ æˆä¸¥é‡çš„åæœï¼ˆä¾‹å¦‚æ•´é¢—ç¡¬ç¢Ÿçš„èµ„æ–™ä¸è§ç­‰ç­‰ï¼‰ï¼Œæ‰€ä»¥æœ‰äº›äººä¹ŸæŠŠ dd å–åä¸º data destroyerã€‚dd æŒ‡ä»¤æ•™å­¦ä¸å®ç”¨èŒƒä¾‹ï¼Œå¤‡ä»½ä¸å›å¤èµ„æ–™çš„å°å·¥å…· - GT Wang\nif=FILE : æŒ‡å®šè¾“å…¥æ–‡ä»¶ï¼Œè‹¥ä¸æŒ‡å®šåˆ™ä»æ ‡æ³¨è¾“å…¥è¯»å–ã€‚è¿™é‡ŒæŒ‡å®šä¸º/dev/zero æ˜¯ Linux çš„ä¸€ä¸ªä¼ªæ–‡ä»¶ï¼Œå®ƒå¯ä»¥äº§ç”Ÿè¿ç»­ä¸æ–­çš„ null æµï¼ˆäºŒè¿›åˆ¶çš„ 0ï¼‰ã€‚ of=FILE : æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œè‹¥ä¸æŒ‡å®šåˆ™è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚ bs=BYTES : æ¯æ¬¡è¯»å†™çš„å­—èŠ‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨å•ä½ Kã€Mã€G ç­‰ç­‰ã€‚å¦å¤–è¾“å…¥è¾“å‡ºå¯ä»¥åˆ†åˆ«ç”¨ ibsã€obs æŒ‡å®šï¼Œè‹¥ä½¿ç”¨ bsï¼Œåˆ™è¡¨ç¤ºæ˜¯ ibs å’Œ obs éƒ½æ˜¯ç”¨è¯¥å‚æ•°ã€‚ count=BLOCKS : è¯»å–çš„ block æ•°ï¼Œblock çš„å¤§å°ç”± ibs æŒ‡å®šã€‚ ç¤ºä¾‹ï¼š ç”Ÿæˆä¸€ä¸ª1gå¤§å°çš„æ–‡ä»¶ï¼Œå†…å®¹å…¨ä¸º0ï¼Œå—å¤§å°ä¸º1Mï¼Œæ–‡ä»¶åä¸ºefi.imgï¼š\ndd if=/dev/zero of=efi.img bs=1M count=1024 ç”Ÿæˆä¸€ä¸ª1gå¤§å°çš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºéšæœºæ•°ï¼Œå—å¤§å°ä¸º10Mï¼Œæ–‡ä»¶åä¸ºefi.imgï¼š\ndd if=/dev/urandom of=efi.img bs=10M count=1024 truncate -sï¼šæŒ‡å®šæ–‡ä»¶çš„å¤§å°ï¼Œå¯ä»¥è·ŸäºŒè¿›åˆ¶$2^{N}$åç¼€KiBï¼ŒMiBï¼ŒGiBï¼ŒTiBï¼ŒPiBå’ŒEiBï¼ˆiBä¸ºå¯é€‰ï¼Œä¾‹å¦‚ï¼ŒKçš„å«ä¹‰ä¸KiBçš„å«ä¹‰ç›¸åŒæˆ–åç¼€KBï¼ŒMBï¼ŒGBï¼ŒPBå’ŒEBçš„åè¿›åˆ¶ï¼ˆ$10^{N}$ï¼‰ã€‚ ç¤ºä¾‹ï¼š ç”Ÿæˆä¸€ä¸ª 100M å¤§å°çš„æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºefi.imgï¼š\ntruncate -s 100M efi.img å‚è€ƒ Linux æ–‡ä»¶ç©ºæ´ä¸ç¨€ç–æ–‡ä»¶\n","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-%E7%94%9F%E6%88%90%E6%8C%87%E5%AE%9A%E5%A4%A7%E5%B0%8F%E6%96%87%E4%BB%B6/","summary":"\u003ch2 id=\"ä½¿ç”¨èƒŒæ™¯\"\u003eä½¿ç”¨èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eåœ¨æµ‹è¯•ä¸‹è½½é€Ÿåº¦ï¼Œæˆ–è€…æµ‹è¯•åŠ è§£å¯†æ–‡ä»¶ï¼Œäº¦æˆ–è€…åˆ¶ä½œæ–‡ä»¶ç³»ç»Ÿæ—¶éƒ½éœ€è¦ä¸€äº›æŒ‡å®šå¤§å°çš„æ–‡ä»¶ã€‚Linux æœ‰ä¸€äº›å‘½ä»¤å¯ä»¥å¿«é€Ÿå®Œæˆè¿™æ ·çš„ä»»åŠ¡ã€‚æ¥ä¸‹æ¥ä»‹ç»å‡ ä¸ªå¥½ç”¨çš„å‘½ä»¤ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-ç”ŸæˆæŒ‡å®šå¤§å°æ–‡ä»¶"},{"content":"SPI æ¦‚è¿° SPI æ˜¯ä¸€ç§åŒæ­¥çš„ã€å…¨åŒå·¥çš„ã€é«˜é€Ÿçš„ä¸²è¡Œé€šä¿¡æ€»çº¿ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image 4 çº¿åˆ¶ SPI å››ä¸ªä¿¡å·ï¼š\nSCLKï¼šä¸²è¡Œæ—¶é’Ÿä¿¡å·ï¼Œç”±ä¸»è®¾å¤‡äº§ç”Ÿï¼Œç”¨äºåŒæ­¥æ•°æ®ä¼ è¾“ã€‚ CSï¼šç‰‡é€‰ä¿¡å·ï¼Œç”±ä¸»è®¾å¤‡äº§ç”Ÿï¼Œç”¨äºé€‰æ‹©ä»è®¾å¤‡ã€‚ MOSIï¼šä¸»è®¾å¤‡è¾“å‡ºï¼Œä»è®¾å¤‡è¾“å…¥ï¼Œç”¨äºä¸»è®¾å¤‡å‘ä»è®¾å¤‡ä¼ è¾“æ•°æ®ã€‚ MISOï¼šä¸»è®¾å¤‡è¾“å…¥ï¼Œä»è®¾å¤‡è¾“å‡ºï¼Œç”¨äºä»è®¾å¤‡å‘ä¸»è®¾å¤‡ä¼ è¾“æ•°æ®ã€‚ é™¤äº†å››çº¿å¼ SPI æ€»çº¿ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸‰çº¿å¼ SPI æ€»çº¿å’ŒåŒçº¿å¼ SPI æ€»çº¿ã€‚\nå››çº¿å¼ SPI æ€»çº¿ï¼Œä¹Ÿç§°ä¸ºæ ‡å‡† SPI æ€»çº¿ï¼Œç”± SCLKã€MOSIã€MISO å’Œ SSï¼ˆSlave Selectï¼‰å››ä¸ªä¿¡å·çº¿ç»„æˆã€‚å…¶ä¸­ï¼ŒSCLK æ˜¯æ—¶é’Ÿä¿¡å·çº¿ï¼›MOSI æ˜¯ä¸»è®¾å¤‡å‘ä»è®¾å¤‡å‘é€æ•°æ®çš„ä¿¡å·çº¿ï¼›MISO æ˜¯ä»è®¾å¤‡å‘ä¸»è®¾å¤‡å‘é€æ•°æ®çš„ä¿¡å·çº¿ï¼›SS æ˜¯ä»è®¾å¤‡çš„ç‰‡é€‰ä¿¡å·çº¿ï¼Œç”¨äºé€‰æ‹©è¦é€šä¿¡çš„ä»è®¾å¤‡ã€‚\nä¸‰çº¿å¼ SPI æ€»çº¿å°† MOSI å’Œ MISO åˆå¹¶ä¸ºå•ä¸€çš„ä¿¡å·çº¿ã€‚è¿™ç§ SPI æ€»çº¿æœ‰ä¸€ä¸ªä¸“é—¨çš„å«åš MOMI çš„ä¿¡å·çº¿ï¼Œæ—¢å¯ä»¥ä½œä¸ºä¸»è®¾å¤‡å‘ä»è®¾å¤‡å‘é€æ•°æ®çš„ä¿¡å·çº¿ï¼Œåˆå¯ä»¥ä½œä¸ºä»è®¾å¤‡å‘ä¸»è®¾å¤‡å‘é€æ•°æ®çš„ä¿¡å·çº¿ã€‚\nåŒçº¿å¼ SPI æ€»çº¿ï¼ˆä¹Ÿç§°ä¸º MICROWIRE æˆ– uWireï¼‰ï¼Œç”±ä¸€ä¸ªä¸²è¡Œæ•°æ®çº¿å’Œä¸€ä¸ªæ—¶é’Ÿçº¿ç»„æˆã€‚åœ¨è¿™ç§ SPI æ€»çº¿ä¸Šï¼Œæ²¡æœ‰å•ç‹¬çš„ç‰‡é€‰ä¿¡å·çº¿ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªå¸§é€‰æ‹©æ§åˆ¶ä½æ¥é€‰æ‹©ç›¸åº”çš„ä»è®¾å¤‡ã€‚\nä»–ä»¬ä¼ è¾“é€Ÿç‡æœ‰å·®åˆ«å—ï¼Ÿ æ˜¯çš„ï¼ŒSPI æ€»çº¿çš„ä¸åŒç±»å‹ä¹‹é—´å­˜åœ¨ä¼ è¾“é€Ÿç‡ä¸Šçš„å·®åˆ«ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå››çº¿å¼ SPI æ€»çº¿çš„ä¼ è¾“é€Ÿåº¦æœ€å¿«ï¼Œè€ŒåŒçº¿å¼ SPI æ€»çº¿çš„ä¼ è¾“é€Ÿåº¦æœ€æ…¢ã€‚ä½†å…·ä½“çš„ä¼ è¾“é€Ÿåº¦ä¼šå—åˆ°å¾ˆå¤šå› ç´ çš„å½±å“ï¼Œä¾‹å¦‚å·¥ä½œé¢‘ç‡ã€æ•°æ®çº¿é•¿åº¦ç­‰ç­‰ã€‚å¦‚æœè¦åœ¨å®é™…åº”ç”¨ä¸­é€‰æ‹©åˆé€‚çš„ SPI æ€»çº¿ç±»å‹ï¼Œéœ€è¦è€ƒè™‘è¯¸å¦‚è¿™äº›å› ç´ çš„å½±å“ï¼Œå¹¶æ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œæƒè¡¡å–èˆã€‚ SPI æ€»çº¿çš„ä¼ è¾“é€Ÿåº¦å¿«æ…¢ä¸å…¶ä¿¡å·çº¿æ•°é‡æœ‰å…³ã€‚åŒçº¿å¼ SPI æ€»çº¿ä¸€å…±åªæœ‰ä¸¤æ¡ä¿¡å·çº¿ï¼šä¸€ä¸ªä¸»è®¾å¤‡ (Master) è¾“å‡ºæ—¶é’Ÿä¿¡å· (SCLK)ï¼Œä¸€ä¸ªä¸»è®¾å¤‡é€šè¿‡è¯¥ä¿¡å·çº¿è¯»å–ä»è®¾å¤‡ (Slave) çš„åº”ç­”ä¿¡å·ã€‚è€Œå››çº¿å¼ SPI æ€»çº¿é™¤äº†ä¸Šè¿°ä¸¤æ¡ä¿¡å·çº¿å¤–ï¼Œè¿˜æœ‰ä¸¤æ¡ç”¨äºæ•°æ®ä¼ è¾“çš„ä¿¡å·çº¿ï¼šä¸»è®¾å¤‡é€šè¿‡ MOSI ä¿¡å·çº¿å‘ä»è®¾å¤‡å‘é€æ•°æ®ï¼Œä»è®¾å¤‡åˆ™é€šè¿‡ MISO ä¿¡å·çº¿å°†æ•°æ®è¿”å›ç»™ä¸»è®¾å¤‡ã€‚ç”±äºå››çº¿å¼ SPI æ€»çº¿æœ‰ä¸“é—¨çš„æ•°æ®ä¼ è¾“ä¿¡å·çº¿ï¼Œæ•…å¯ä»¥é€šè¿‡åŒæ—¶åœ¨è¿™ä¸¤æ¡ä¿¡å·çº¿ä¸Šä¼ è¾“æ•°æ®æ¥å®ç°æ›´é«˜çš„ä¼ è¾“é€Ÿç‡ï¼Œä»è€Œæ¯”åŒçº¿å¼ SPI æ€»çº¿å¿«ä¸€äº›ã€‚\næ—¶é’Ÿææ€§å’Œæ—¶é’Ÿç›¸ä½ åœ¨ SPI ä¸­ï¼Œä¸»æœºå¯ä»¥é€‰æ‹©æ—¶é’Ÿææ€§å’Œæ—¶é’Ÿç›¸ä½ã€‚åœ¨ç©ºé—²çŠ¶æ€æœŸé—´ï¼ŒCPOL ä½è®¾ç½®æ—¶é’Ÿä¿¡å·çš„ææ€§ã€‚ç©ºé—²çŠ¶æ€æ˜¯æŒ‡ä¼ è¾“å¼€å§‹æ—¶ CS ä¸ºé«˜ç”µå¹³ä¸”åœ¨å‘ä½ç”µå¹³è½¬å˜çš„æœŸé—´ï¼Œä»¥åŠä¼ è¾“ç»“æŸæ—¶ CS ä¸ºä½ç”µå¹³ä¸”åœ¨å‘é«˜ç”µå¹³è½¬å˜çš„æœŸé—´ã€‚CPHA ä½é€‰æ‹©æ—¶é’Ÿç›¸ä½ã€‚æ ¹æ® CPHA ä½çš„çŠ¶æ€ï¼Œä½¿ç”¨æ—¶é’Ÿä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿æ¥é‡‡æ ·å’Œ/æˆ–ç§»ä½æ•°æ®ã€‚ä¸»æœºå¿…é¡»æ ¹æ®ä»æœºçš„è¦æ±‚é€‰æ‹©æ—¶é’Ÿææ€§å’Œæ—¶é’Ÿç›¸ä½ã€‚æ ¹æ® CPOL å’Œ CPHA ä½çš„é€‰æ‹©ï¼Œæœ‰å››ç§ SPI æ¨¡å¼å¯ç”¨ã€‚è¡¨ 1 æ˜¾ç¤ºäº†è¿™ 4 ç§ SPI æ¨¡å¼ã€‚\nSPI æ¨¡å¼ CPOL(Serial Clock Polarity) CPHA(Serial Clock Phase) ç©ºé—²çŠ¶æ€ä¸‹çš„æ—¶é’Ÿææ€§ é‡‡æ ·æ—¶çš„æ—¶é’Ÿç›¸ä½ ç§»ä½æ•°æ®çš„æ—¶é’Ÿç›¸ä½ 0 0 0 é€»è¾‘ä½ç”µå¹³ ä¸Šå‡æ²¿ ä¸‹é™æ²¿ 1 0 1 é€»è¾‘ä½ç”µå¹³ ä¸‹é™æ²¿ ä¸Šå‡æ²¿ 2 1 1 é«˜ç”µå¹³ ä¸‹é™æ²¿ ä¸Šå‡æ²¿ 3 1 0 é«˜ç”µå¹³ ä¸Šå‡æ²¿ ä¸‹é™æ²¿ CPOL å’Œ CPHA å¯ä»¥é€šè¿‡ SPI çš„çŠ¶æ€å¯„å­˜å™¨è®¾ç½®ã€‚\næ˜¾ç¤ºäº†å››ç§ SPI æ¨¡å¼ä¸‹çš„é€šä¿¡ç¤ºä¾‹ã€‚åœ¨è¿™äº›ç¤ºä¾‹ä¸­ï¼Œæ•°æ®æ˜¾ç¤ºåœ¨ MOSI å’Œ MISO çº¿ä¸Šã€‚ä¼ è¾“çš„å¼€å§‹å’Œç»“æŸç”¨ç»¿è‰²è™šçº¿è¡¨ç¤ºï¼Œé‡‡æ ·è¾¹æ²¿ç”¨æ©™è‰²è™šçº¿è¡¨ç¤ºï¼Œç§»ä½è¾¹æ²¿ç”¨è“è‰²è™šçº¿è¡¨ç¤ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸‹å›¾ç»™å‡ºäº† SPI æ¨¡å¼ 1 çš„æ—¶åºå›¾ã€‚åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œæ—¶é’Ÿææ€§ä¸º 0ï¼Œè¡¨ç¤ºæ—¶é’Ÿä¿¡å·çš„ç©ºé—²çŠ¶æ€ä¸ºä½ç”µå¹³ã€‚æ­¤æ¨¡å¼ä¸‹çš„æ—¶é’Ÿç›¸ä½ä¸º 1ï¼Œè¡¨ç¤ºæ•°æ®åœ¨ä¸‹é™æ²¿é‡‡æ ·ï¼ˆç”±æ©™è‰²è™šçº¿æ˜¾ç¤ºï¼‰ï¼Œå¹¶ä¸”æ•°æ®åœ¨æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿ç§»å‡ºï¼ˆç”±è“è‰²è™šçº¿æ˜¾ç¤ºï¼‰ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¤šä»æœºé…ç½® æ ‡å‡† SPI æ¨¡å¼ \u003c!DOCTYPE html\u003e Responsive Image åœ¨å¸¸è§„æ¨¡å¼ä¸‹ï¼Œä¸»æœºéœ€è¦ä¸ºæ¯ä¸ªä»æœºæä¾›å•ç‹¬çš„ç‰‡é€‰ä¿¡å·ã€‚ä¸€æ—¦ä¸»æœºä½¿èƒ½ï¼ˆæ‹‰ä½ï¼‰ç‰‡é€‰ä¿¡å·ï¼ŒMOSI/MISO çº¿ä¸Šçš„æ—¶é’Ÿå’Œæ•°æ®ä¾¿å¯ç”¨äºæ‰€é€‰çš„ä»æœºã€‚å¦‚æœä½¿èƒ½å¤šä¸ªç‰‡é€‰ä¿¡å·ï¼Œåˆ™ MISO çº¿ä¸Šçš„æ•°æ®ä¼šè¢«ç ´åï¼Œå› ä¸ºä¸»æœºæ— æ³•è¯†åˆ«å“ªä¸ªä»æœºæ­£åœ¨ä¼ è¾“æ•°æ®ã€‚\nä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œéšç€ä»æœºæ•°é‡çš„å¢åŠ ï¼Œæ¥è‡ªä¸»æœºçš„ç‰‡é€‰çº¿çš„æ•°é‡ä¹Ÿå¢åŠ ã€‚è¿™ä¼šå¿«é€Ÿå¢åŠ ä¸»æœºéœ€è¦æä¾›çš„è¾“å…¥å’Œè¾“å‡ºæ•°é‡ï¼Œå¹¶é™åˆ¶å¯ä»¥ä½¿ç”¨çš„ä»æœºæ•°é‡ã€‚å¯ä»¥ä½¿ç”¨å…¶ä»–æŠ€æœ¯æ¥å¢åŠ å¸¸è§„æ¨¡å¼ä¸‹çš„ä»æœºæ•°é‡ï¼Œä¾‹å¦‚ä½¿ç”¨å¤šè·¯å¤ç”¨å™¨äº§ç”Ÿç‰‡é€‰ä¿¡å·ã€‚\nèŠèŠ±é“¾æ¨¡å¼ \u003c!DOCTYPE html\u003e Responsive Image åœ¨èŠèŠ±é“¾æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä»æœºçš„ç‰‡é€‰ä¿¡å·è¿æ¥åœ¨ä¸€èµ·ï¼Œæ•°æ®ä»ä¸€ä¸ªä»æœºä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªä»æœºã€‚åœ¨æ­¤é…ç½®ä¸­ï¼Œæ‰€æœ‰ä»æœºåŒæ—¶æ¥æ”¶åŒä¸€ SPI æ—¶é’Ÿã€‚æ¥è‡ªä¸»æœºçš„æ•°æ®ç›´æ¥é€åˆ°ç¬¬ä¸€ä¸ªä»æœºï¼Œè¯¥ä»æœºå°†æ•°æ®æä¾›ç»™ä¸‹ä¸€ä¸ªä»æœºï¼Œä¾æ­¤ç±»æ¨ã€‚\nä½¿ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œç”±äºæ•°æ®æ˜¯ä»ä¸€ä¸ªä»æœºä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªä»æœºï¼Œæ‰€ä»¥ä¼ è¾“æ•°æ®æ‰€éœ€çš„æ—¶é’Ÿå‘¨æœŸæ•°ä¸èŠèŠ±é“¾ä¸­çš„ä»æœºä½ç½®æˆæ¯”ä¾‹ã€‚ä¸ºä½¿ç¬¬ 3 ä¸ªä»æœºèƒ½å¤Ÿè·å¾—æ•°æ®ï¼Œéœ€è¦ 24 ä¸ªæ—¶é’Ÿè„‰å†²ï¼Œè€Œå¸¸è§„ SPI æ¨¡å¼ä¸‹åªéœ€ 8 ä¸ªæ—¶é’Ÿè„‰å†²ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†æ—¶é’Ÿå‘¨æœŸå’Œé€šè¿‡èŠèŠ±é“¾çš„æ•°æ®ä¼ æ’­ã€‚å¹¶éæ‰€æœ‰ SPI å™¨ä»¶éƒ½æ”¯æŒèŠèŠ±é“¾æ¨¡å¼ã€‚è¯·å‚é˜…äº§å“æ•°æ®æ‰‹å†Œä»¥ç¡®è®¤èŠèŠ±é“¾æ˜¯å¦å¯ç”¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image SPI å®ç° å‚è€ƒèµ„æ–™ SPI æ¥å£ç®€ä»‹ | äºšå¾·è¯ºåŠå¯¼ä½“\nSPI åè®® - æ°å“¥çš„{è¿ç»´ï¼Œç¼–ç¨‹ï¼Œè°ƒæ¿å­}å°ç¬”è®°\n","permalink":"https://lifeislife.cn/posts/spi%E5%8D%8F%E8%AE%AE/","summary":"\u003ch1 id=\"spi-æ¦‚è¿°\"\u003eSPI æ¦‚è¿°\u003c/h1\u003e\n\u003cp\u003eSPI æ˜¯ä¸€ç§åŒæ­¥çš„ã€å…¨åŒå·¥çš„ã€é«˜é€Ÿçš„ä¸²è¡Œé€šä¿¡æ€»çº¿ã€‚\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-17-11-68acbe1aebbf2173bbc3401dffd69c5a-20230814191709-b01232.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/19-17-11-68acbe1aebbf2173bbc3401dffd69c5a-20230814191709-b01232.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003e4 çº¿åˆ¶ SPI å››ä¸ªä¿¡å·ï¼š\u003c/p\u003e","title":"SPI åè®®"},{"content":"ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿå†…å­˜ï¼Ÿ CPU è®¿é—®å†…å­˜çš„æœ€è‡ªç„¶çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ç‰©ç†åœ°å€ï¼Œè¿™ç§æ–¹å¼ç§°ä¸ºç‰©ç†å¯»å€ã€‚1ï¼Œè®¡ç®—æœºä¸­å¹¶ä¸æ˜¯åªæœ‰ä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œï¼Œå¦‚æœå®ƒä»¬éƒ½æ˜¯ç”¨ç‰©ç†å¯»å€çš„æ–¹å¼ï¼Œé‚£ä¹ˆæ‰€æœ‰ç¨‹åºå¿…é¡»åœ¨é“¾æ¥ä¹‹å‰ç¡®å®šå¥½è‡ªå·±æ‰€ç”¨åˆ°çš„å†…å­˜èŒƒå›´ï¼Œå¦åˆ™ä¸¤ä¸ªç¨‹åºå°±å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚2ï¼Œç¨‹åºå¤§äºå†…å­˜çš„é—®é¢˜æ—©åœ¨ä¸Šä¸–çºªå…­åå¹´ä»£å°±å‡ºç°ï¼Œåæ¥å‡ºç°äº†è¦†ç›–æŠ€æœ¯ï¼ˆOverlayï¼‰ï¼ŒæŠŠç¨‹åºåˆ†å‰²æˆè®¸å¤šç‰‡æ®µã€‚ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶ï¼Œå°†è¦†ç›–ç®¡ç†æ¨¡å—è£…å…¥å†…å­˜ï¼Œè¯¥ç®¡ç†æ¨¡å—ç«‹å³è£…å…¥å¹¶è¿è¡Œè¦†ç›– 0ã€‚æ‰§è¡Œå®Œæˆåï¼Œè¦†ç›– 0 é€šçŸ¥ç®¡ç†æ¨¡å—è£…å…¥è¦†ç›– 1ï¼Œæˆ–è€…å ç”¨è¦†ç›– 0 çš„ä¸Šæ–¹ä½ç½®ï¼ˆå¦‚æœæœ‰ç©ºé—´ï¼‰ï¼Œæˆ–è€…å ç”¨è¦†ç›– 0ï¼ˆå¦‚æœæ²¡æœ‰ç©ºé—´ï¼‰ã€‚æŠŠä¸€ä¸ªå¤§ç¨‹åºåˆ†å‰²æˆå°çš„ã€æ¨¡å—åŒ–çš„ç‰‡æ®µæ˜¯éå¸¸è´¹æ—¶å’Œæ¯ç‡¥çš„ï¼Œå¹¶ä¸”æ˜“äºå‡ºé”™ã€‚å¾ˆå°‘ç¨‹åºå‘˜æ“…é•¿ä½¿ç”¨è¦†ç›–æŠ€æœ¯ã€‚\nä¸ºäº†æ›´åŠ æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜å¹¶ä¸”å°‘å‡ºé”™ï¼Œç°ä»£ç³»ç»Ÿæä¾›äº†ä¸€ç§å¯¹ä¸»å­˜çš„æŠ½è±¡æ¦‚å¿µï¼Œå«åšè™šæ‹Ÿå†…å­˜(VM)ã€‚ä¸»è¦æœ‰ä¸‰ä¸ªåŠŸèƒ½ï¼š\nå®ƒå°†ä¸»å­˜çœ‹æˆæ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„åœ°å€ç©ºé—´çš„é«˜é€Ÿç¼“å­˜ï¼Œåœ¨ä¸»å­˜ä¸­åªä¿å­˜æ´»åŠ¨åŒºåŸŸï¼Œå¹¶æ ¹æ®éœ€è¦åœ¨ç£ç›˜å’Œä¸»å­˜ä¹‹é—´æ¥å›ä¼ é€æ•°æ®ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®ƒé«˜æ•ˆåœ°ä½¿ç”¨äº†ä¸»å­˜ã€‚ å®ƒä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›äº†ä¸€è‡´çš„åœ°å€ç©ºé—´ï¼Œä»è€Œç®€åŒ–äº†å†…å­˜ç®¡ç†ã€‚ å®ƒä¿æŠ¤äº†æ¯ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸è¢«å…¶ä»–è¿›ç¨‹ç ´åã€‚ ä»€ä¹ˆæ˜¯è™šæ‹Ÿå¯»å€ï¼Ÿ å¦‚æœä¸»å­˜è¢«åˆ†ä¸ºé•¿åº¦ä¸º$M$çš„å•å­—èŠ‚å¤§å°çš„æ•°ç»„ï¼Œæ¯ä¸ªå­—èŠ‚éƒ½å¯¹åº”ä¸€ä¸ªç‰©ç†åœ°å€ï¼ŒCPU é€šè¿‡è¿™ä¸ªå”¯ä¸€çš„åœ°å€è®¿é—®ä¸»å­˜ï¼Œè¿™æ ·çš„æ–¹å¼å°±æ˜¯ç‰©ç†å¯»å€ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ç°ä»£å¤„ç†å™¨ä½¿ç”¨è™šæ‹Ÿå¯»å€çš„æ–¹å¼ã€‚CPU é€šè¿‡ç”Ÿæˆçš„è™šæ‹Ÿåœ°å€æ¥è®¿é—®å†…å­˜ï¼Œè¿™ä¸ªåœ°å€åœ¨é€åˆ°å†…å­˜ä¹‹å‰ä¼šè¢«è½¬æ¢æˆç‰©ç†åœ°å€ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåœ°å€ç¿»è¯‘ã€‚CPU èŠ¯ç‰‡ä¸Šå«åšå†…å­˜ç®¡ç†å•å…ƒï¼ˆMemory Management Unit, MMUï¼‰çš„ä¸“ç”¨ç¡¬ä»¶ï¼Œåˆ©ç”¨å­˜æ”¾åœ¨ä¸»å­˜ä¸­çš„æŸ¥è¯¢è¡¨æ¥åŠ¨æ€ç¿»è¯‘è™šæ‹Ÿåœ°å€ï¼Œè¯¥è¡¨çš„å†…å®¹ç”±æ“ä½œç³»ç»Ÿç®¡ç†ã€‚ \u003c!DOCTYPE html\u003e Responsive Image è™šæ‹Ÿå†…å­˜ä½œä¸ºç¼“å­˜çš„å·¥å…· æ¦‚å¿µä¸Šè€Œè¨€ï¼Œè™šæ‹Ÿå†…å­˜è¢«ç»„ç»‡æˆä¸ºä¸€ä¸ªç”±å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„ N ä¸ªè¿ç»­çš„å­—èŠ‚å¤§å°çš„å•å…ƒç»„æˆçš„æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯å­—èŠ‚æ•°ç»„ã€‚æ¯ä¸ªå­—èŠ‚éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„è™šæ‹Ÿåœ°å€ä½œä¸ºæ•°ç»„çš„ç´¢å¼•ã€‚ç£ç›˜ä¸Šæ´»åŠ¨çš„æ•°ç»„å†…å®¹è¢«ç¼“å­˜åœ¨ä¸»å­˜ä¸­ã€‚åœ¨å­˜å‚¨å™¨ç»“æ„ä¸­ï¼Œè¾ƒä½å±‚æ¬¡ä¸Šçš„ç£ç›˜çš„æ•°æ®è¢«åˆ†å‰²æˆå—ï¼Œè¿™äº›å—ä½œä¸ºå’Œè¾ƒé«˜å±‚æ¬¡çš„ä¸»å­˜ä¹‹é—´çš„ä¼ è¾“å•å…ƒã€‚ä¸»å­˜ä½œä¸ºè™šæ‹Ÿå†…å­˜çš„ç¼“å­˜ã€‚\nè™šæ‹Ÿå†…å­˜è¢«åˆ†å‰²ä¸ºå¤§å°å›ºå®šçš„å—ï¼Œè¿™äº›å—å«è™šæ‹Ÿé¡µï¼ˆVirtual Pageï¼ŒVPï¼‰ï¼Œç±»ä¼¼çš„ç‰©ç†å†…å­˜ä¹Ÿæœ‰ç‰©ç†é¡µ(Physical Page, PP)ã€‚è™šæ‹Ÿé¡µæœ‰ä¸‰ç§ä¸åŒçš„çŠ¶æ€ï¼š\næœªåˆ†é…ï¼šVM ç³»ç»Ÿè¿˜æœªåˆ†é… (æˆ–è€…åˆ›å»ºï¼‰çš„é¡µã€‚æœªåˆ†é…çš„å—æ²¡æœ‰ä»»ä½•æ•°æ®å’Œå®ƒä»¬ç›¸å…³è”ï¼Œå› æ­¤ä¹Ÿå°±ä¸å ç”¨ä»»ä½•ç£ç›˜ç©ºé—´ã€‚ å·²ç¼“å­˜ï¼šå½“å‰å·²ç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­çš„å·²åˆ†é…é¡µã€‚ æœªç¼“å­˜ï¼šæœªç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­çš„å·²åˆ†é…é¡µã€‚ ä¸ºäº†æœ‰åŠ©äºæ¸…æ™°ç†è§£å­˜å‚¨å±‚æ¬¡ç»“æ„ä¸­ä¸åŒçš„ç¼“å­˜æ¦‚å¿µï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æœ¯è¯­SRAMç¼“å­˜æ¥è¡¨ç¤ºä½äº CPU å’Œä¸»å­˜ä¹‹é—´çš„ Llã€L2 å’Œ L3 é«˜é€Ÿç¼“å­˜ï¼Œå¹¶ä¸”ç”¨æœ¯è¯­ DRAM ç¼“å­˜æ¥è¡¨ç¤ºè™šæ‹Ÿå†…å­˜ç³»ç»Ÿçš„ç¼“å­˜ï¼Œå®ƒåœ¨ä¸»å­˜ä¸­ç¼“å­˜è™šæ‹Ÿé¡µã€‚\nåœ¨å­˜å‚¨å±‚æ¬¡ç»“æ„ä¸­ï¼ŒDRAM ç¼“å­˜çš„ä½ç½®å¯¹å®ƒçš„ç»„ç»‡ç»“æ„æœ‰å¾ˆå¤§çš„å½±å“ã€‚å›æƒ³ä¸€ä¸‹ï¼ŒDRAM æ¯” SRAM è¦æ…¢å¤§çº¦ 10 å€ï¼Œè€Œç£ç›˜è¦æ¯” DRAM æ…¢å¤§çº¦ 100000 å¤šå€ã€‚å› æ­¤ï¼ŒDRAM ç¼“å­˜ä¸­çš„ä¸å‘½ä¸­æ¯”èµ· SRAM ç¼“å­˜ä¸­çš„ä¸å‘½ä¸­è¦æ˜‚è´µå¾—å¤šã€‚å› æ­¤ï¼Œä¸ç¡¬ä»¶å¯¹ SRAM ç¼“å­˜ç›¸æ¯”ï¼Œæ“ä½œç³»ç»Ÿå¯¹ DRAM ç¼“å­˜ä½¿ç”¨äº†æ›´å¤æ‚ç²¾å¯†çš„æ›¿æ¢ç®—æ³•ã€‚ï¼ˆè¿™äº›æ›¿æ¢ç®—æ³•è¶…å‡ºäº†æˆ‘ä»¬çš„è®¨è®ºèŒƒå›´ï¼‰ã€‚æœ€åï¼Œå› ä¸ºå¯¹ç£ç›˜çš„è®¿é—®æ—¶é—´å¾ˆé•¿ï¼ŒDRAM ç¼“å­˜æ€»æ˜¯ä½¿ç”¨å†™å›ï¼Œè€Œä¸æ˜¯ç›´å†™ã€‚\né¡µè¡¨ è™šæ‹Ÿå†…å­˜ç³»ç»Ÿå¯ä»¥å®Œæˆä»¥ä¸‹è¿™äº›åŠŸèƒ½ï¼Œ\nåˆ¤å®šä¸€ä¸ªè™šæ‹Ÿé¡µæ˜¯å¦ç¼“å­˜åœ¨ DRAM ä¸­çš„æŸä¸ªåœ°æ–¹ï¼› å¯ä»¥ç¡®å®šè¿™ä¸ªè™šæ‹Ÿé¡µå­˜æ”¾åœ¨å“ªä¸ªç‰©ç†é¡µä¸­ï¼› å¦‚æœä¸å‘½ä¸­ï¼Œç³»ç»Ÿå¿…é¡»åˆ¤æ–­è¿™ä¸ªè™šæ‹Ÿé¡µå­˜æ”¾åœ¨ç£ç›˜çš„å“ªä¸ªä½ç½®ï¼Œåœ¨ç‰©ç†å†…å­˜ä¸­é€‰æ‹©ä¸€ä¸ªç‰ºç‰²é¡µï¼Œå¹¶å°†è™šæ‹Ÿé¡µä»ç£ç›˜å¤åˆ¶åˆ° DRAM ä¸­ï¼Œæ›¿æ¢è¿™ä¸ªç‰ºç‰²é¡µã€‚ è¿™äº›åŠŸèƒ½æ˜¯ç”±è½¯ç¡¬ä»¶è”åˆæä¾›çš„ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿè½¯ä»¶ã€MMUï¼ˆå†…å­˜ç®¡ç†å•å…ƒï¼‰ä¸­çš„åœ°å€ç¿»è¯‘ç¡¬ä»¶å’Œä¸€ä¸ªå­˜æ”¾åœ¨ç‰©ç†å†…å­˜ä¸­å«åšé¡µè¡¨ï¼ˆpage tableï¼‰çš„æ•°æ®ç»“æ„ã€‚é¡µè¡¨å°†è™šæ‹Ÿé¡µæ˜ å°„åˆ°ç‰©ç†é¡µã€‚æ¯æ¬¡åœ°å€ç¿»è¯‘ç¡¬ä»¶å°†ä¸€ä¸ªè™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€æ—¶ï¼Œéƒ½ä¼šè¯»å–é¡µè¡¨ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£ç»´æŠ¤é¡µè¡¨çš„å†…å®¹ï¼Œä»¥åŠåœ¨ç£ç›˜ä¸ DRAM ä¹‹é—´æ¥å›ä¼ é€é¡µã€‚\nå›¾ 9-4 å±•ç¤ºäº†ä¸€ä¸ªé¡µè¡¨çš„åŸºæœ¬ç»„ç»‡ç»“æ„ã€‚é¡µè¡¨å°±æ˜¯ä¸€ä¸ªé¡µè¡¨æ¡ç›®ï¼ˆPage Table Entryï¼ŒPTEï¼‰çš„æ•°ç»„ã€‚è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„æ¯ä¸ªé¡µåœ¨é¡µè¡¨ä¸­ä¸€ä¸ªå›ºå®šåç§»é‡å¤„éƒ½æœ‰ä¸€ä¸ª PTEã€‚\nPTE ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š\næœ‰æ•ˆä½ï¼šè¡¨æ˜äº†è¯¥è™šæ‹Ÿé¡µå½“å‰æ˜¯å¦è¢«ç¼“å­˜åœ¨ DRAM ä¸­ï¼› åœ°å€ï¼šè¡¨ç¤º DRAM ä¸­ç›¸åº”çš„ç‰©ç†é¡µçš„èµ·å§‹ä½ç½®ï¼Œè¿™ä¸ªç‰©ç†é¡µä¸­ç¼“å­˜äº†è¯¥è™šæ‹Ÿé¡µã€‚ \u003c!DOCTYPE html\u003e Responsive Image é¡µå‘½ä¸­ä¸ç¼ºé¡µ \u003c!DOCTYPE html\u003e Responsive Image l\nå½“ CPU è®¿é—®å·²è¢«ç¼“å­˜çš„åœ°å€æ—¶ï¼Œå°±å«åšé¡µå‘½ä¸­ã€‚å¦‚è®¿é—®ä¸Šå›¾ VP2ï¼Œè™šæ‹Ÿåœ°å€ç´¢å¼•åˆ° PTE2ï¼Œæ­¤æ—¶æœ‰æ•ˆä½ä¸º 1ï¼Œåœ°å€ç¿»è¯‘ç¡¬ä»¶å°±çŸ¥é“è¯¥åœ°å€è¢«ç¼“å­˜äº†ã€‚\nå½“ CPU è®¿é—®æœªè¢«ç¼“å­˜çš„åœ°å€æ—¶ï¼Œä¼šå¯¼è‡´ç¼ºé¡µã€‚å¦‚è®¿é—®ä¸Šå›¾çš„ VP3ï¼Œè™šæ‹Ÿåœ°å€ç´¢å¼•åˆ° PTE3ï¼Œæ­¤æ—¶æœ‰æ•ˆä½ä¸º 0ï¼Œåœ°å€ç¿»è¯‘ç¡¬ä»¶å°±çŸ¥é“è¯¥åœ°å€æœªè¢«ç¼“å­˜ï¼Œéœ€è¦ä»ç£ç›˜ä¸­è¯»å–ã€‚\nè¿™æ—¶ä¼šè§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ã€‚ç¼ºé¡µå¼‚å¸¸è°ƒç”¨å†…æ ¸ä¸­çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè¯¥ç¨‹åºä¼šé€‰æ‹©ä¸€ä¸ªç‰ºç‰²é¡µï¼Œåœ¨æ­¤ä¾‹ä¸­å°±æ˜¯å­˜æ”¾åœ¨ PP 3 ä¸­çš„ VP 4ã€‚å¦‚æœ VP 4 å·²ç»è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆå†…æ ¸å°±ä¼šå°†å®ƒå¤åˆ¶å›ç£ç›˜ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œå†…æ ¸éƒ½ä¼šä¿®æ”¹ VP 4 çš„é¡µè¡¨æ¡ç›®ï¼Œåæ˜ å‡º VP 4 ä¸å†ç¼“å­˜åœ¨ä¸»å­˜ä¸­è¿™ä¸€äº‹å®ã€‚\næ¥ä¸‹æ¥ï¼Œå†…æ ¸ä»ç£ç›˜å¤åˆ¶ VP 3 åˆ°å†…å­˜ä¸­çš„ PP 3ï¼Œæ›´æ–° PTE 3ï¼Œéšåè¿”å›ã€‚å½“å¼‚å¸¸å¤„ç†ç¨‹åºè¿”å›æ—¶ï¼Œå®ƒä¼šé‡æ–°å¯åŠ¨å¯¼è‡´ç¼ºé¡µçš„æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ä¼šæŠŠå¯¼è‡´ç¼ºé¡µçš„è™šæ‹Ÿåœ°å€é‡å‘é€åˆ°åœ°å€ç¿»è¯‘ç¡¬ä»¶ã€‚ä½†æ˜¯ç°åœ¨ï¼ŒVP 3 å·²ç»ç¼“å­˜åœ¨ä¸»å­˜ä¸­äº†ï¼Œé‚£ä¹ˆé¡µå‘½ä¸­ä¹Ÿèƒ½ç”±åœ°å€ç¿»è¯‘ç¡¬ä»¶æ­£å¸¸å¤„ç†äº†ã€‚å›¾ 9-7 å±•ç¤ºäº†åœ¨ç¼ºé¡µä¹‹åæˆ‘ä»¬çš„ç¤ºä¾‹é¡µè¡¨çš„çŠ¶æ€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨è™šæ‹Ÿå†…å­˜çš„ä¹ æƒ¯è¯´æ³•ä¸­ï¼Œå—è¢«ç§°ä¸ºé¡µã€‚åœ¨ç£ç›˜å’Œå†…å­˜ä¹‹é—´ä¼ é€é¡µçš„æ´»åŠ¨å«åšäº¤æ¢ï¼ˆswappingï¼‰æˆ–è€…é¡µé¢è°ƒåº¦ï¼ˆpagingï¼‰ã€‚é¡µä»ç£ç›˜æ¢å…¥ï¼ˆæˆ–è€…é¡µé¢è°ƒå…¥ï¼‰DRAM å’Œä» DRAM æ¢å‡ºï¼ˆæˆ–è€…é¡µé¢è°ƒå‡ºï¼‰ç£ç›˜ã€‚ä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æœ€åæ—¶åˆ»ï¼Œä¹Ÿå°±æ˜¯å½“æœ‰ä¸å‘½ä¸­å‘ç”Ÿæ—¶ï¼Œæ‰æ¢å…¥é¡µé¢çš„è¿™ç§ç­–ç•¥ç§°ä¸ºæŒ‰éœ€é¡µé¢è°ƒåº¦ï¼ˆdemand pagingï¼‰ã€‚\nè™šæ‹Ÿå†…å­˜ä½œä¸ºå†…å­˜ç®¡ç†çš„å·¥å…· ä¹‹å‰æˆ‘ä»¬åªè®¨è®ºäº†ä¸€ä¸ªé¡µè¡¨çš„æƒ…å†µï¼Œä½†æ˜¯å®é™…ä¸Šæ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½åˆ†é…äº†ä¸€ä¸ªç‹¬ç«‹çš„é¡µè¡¨ã€‚å¤šä¸ªè™šæ‹Ÿé¡µé¢å¯ä»¥æ˜ å°„åˆ°åŒä¸€ä¸ªå…±äº«ç‰©ç†é¡µé¢ä¸Šã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æŒ‰éœ€é¡µé¢è°ƒåº¦å’Œç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„ç»“åˆï¼Œå¯¹ç³»ç»Ÿä¸­å†…å­˜çš„ä½¿ç”¨å’Œç®¡ç†é€ æˆäº†æ·±è¿œçš„å½±å“ã€‚ç‰¹åˆ«åœ°ï¼ŒVM ç®€åŒ–äº†é“¾æ¥å’ŒåŠ è½½ã€ä»£ç å’Œæ•°æ®å…±äº«ï¼Œä»¥åŠåº”ç”¨ç¨‹åºçš„å†…å­˜åˆ†é…ã€‚\nç®€åŒ–é“¾æ¥ã€‚ç‹¬ç«‹çš„åœ°å€ç©ºé—´å…è®¸æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜æ˜ åƒä½¿ç”¨ç›¸åŒçš„åŸºæœ¬æ ¼å¼ï¼Œè€Œä¸ç®¡ä»£ç å’Œæ•°æ®å®é™…å­˜æ”¾åœ¨ç‰©ç†å†…å­˜çš„ä½•å¤„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç»™å®šçš„ Linux ç³»ç»Ÿä¸Šçš„æ¯ä¸ªè¿›ç¨‹éƒ½ä½¿ç”¨ç±»ä¼¼çš„å†…å­˜æ ¼å¼ã€‚å¯¹äº 64 ä½åœ°å€ç©ºé—´ï¼Œä»£ç æ®µæ€»æ˜¯ä»è™šæ‹Ÿåœ°å€ 0x400000 å¼€å§‹ã€‚æ•°æ®æ®µè·Ÿåœ¨ä»£ç æ®µä¹‹åï¼Œä¸­é—´æœ‰ä¸€æ®µç¬¦åˆè¦æ±‚çš„å¯¹é½ç©ºç™½ã€‚æ ˆå æ®ç”¨æˆ·è¿›ç¨‹åœ°å€ç©ºé—´æœ€é«˜çš„éƒ¨åˆ†ï¼Œå¹¶å‘ä¸‹ç”Ÿé•¿ã€‚è¿™æ ·çš„ä¸€è‡´æ€§æå¤§åœ°ç®€åŒ–äº†é“¾æ¥å™¨çš„è®¾è®¡å’Œå®ç°ï¼Œå…è®¸é“¾æ¥å™¨ç”Ÿæˆå®Œå…¨é“¾æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™äº›å¯æ‰§è¡Œæ–‡ä»¶æ˜¯ç‹¬ç«‹äºç‰©ç†å†…å­˜ä¸­ä»£ç å’Œæ•°æ®çš„æœ€ç»ˆä½ç½®çš„ã€‚ ç®€åŒ–åŠ è½½ã€‚è™šæ‹Ÿå†…å­˜è¿˜ä½¿å¾—å®¹æ˜“å‘å†…å­˜ä¸­åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«å¯¹è±¡æ–‡ä»¶ã€‚è¦æŠŠç›®æ ‡æ–‡ä»¶ä¸­ .text å’Œ .data èŠ‚åŠ è½½åˆ°ä¸€ä¸ªæ–°åˆ›å»ºçš„è¿›ç¨‹ä¸­ï¼ŒLinux åŠ è½½å™¨ä¸ºä»£ç å’Œæ•°æ®æ®µåˆ†é…è™šæ‹Ÿé¡µï¼ŒæŠŠå®ƒä»¬æ ‡è®°ä¸ºæ— æ•ˆçš„ï¼ˆå³æœªè¢«ç¼“å­˜çš„ï¼‰ï¼Œå°†é¡µè¡¨æ¡ç›®æŒ‡å‘ç›®æ ‡æ–‡ä»¶ä¸­é€‚å½“çš„ä½ç½®ã€‚æœ‰è¶£çš„æ˜¯ï¼ŒåŠ è½½å™¨ä»ä¸ä»ç£ç›˜åˆ°å†…å­˜å®é™…å¤åˆ¶ä»»ä½•æ•°æ®ã€‚åœ¨æ¯ä¸ªé¡µåˆæ¬¡è¢«å¼•ç”¨æ—¶ï¼Œè¦ä¹ˆæ˜¯ CPU å–æŒ‡ä»¤æ—¶å¼•ç”¨çš„ï¼Œè¦ä¹ˆæ˜¯ä¸€æ¡æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤å¼•ç”¨ä¸€ä¸ªå†…å­˜ä½ç½®æ—¶å¼•ç”¨çš„ï¼Œè™šæ‹Ÿå†…å­˜ç³»ç»Ÿä¼šæŒ‰ç…§éœ€è¦è‡ªåŠ¨åœ°è°ƒå…¥æ•°æ®é¡µã€‚å°†ä¸€ç»„è¿ç»­çš„è™šæ‹Ÿé¡µæ˜ å°„åˆ°ä»»æ„ä¸€ä¸ªæ–‡ä»¶ä¸­çš„ä»»æ„ä½ç½®çš„è¡¨ç¤ºæ³•ç§°ä½œå†…å­˜æ˜ å°„ï¼ˆmemory mappingï¼‰ã€‚Linux æä¾›ä¸€ä¸ªç§°ä¸º mmap çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå…è®¸åº”ç”¨ç¨‹åºè‡ªå·±åšå†…å­˜æ˜ å°„ã€‚ ç®€åŒ–å…±äº«ã€‚ç‹¬ç«‹åœ°å€ç©ºé—´ä¸ºæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç®¡ç†ç”¨æˆ·è¿›ç¨‹å’Œæ“ä½œç³»ç»Ÿè‡ªèº«ä¹‹é—´å…±äº«çš„ä¸€è‡´æœºåˆ¶ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç§æœ‰çš„ä»£ç ã€æ•°æ®ã€å †ä»¥åŠæ ˆåŒºåŸŸï¼Œæ˜¯ä¸å’Œå…¶ä»–è¿›ç¨‹å…±äº«çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸­ï¼Œæ“ä½œç³»ç»Ÿåˆ›å»ºé¡µè¡¨ï¼Œå°†ç›¸åº”çš„è™šæ‹Ÿé¡µæ˜ å°„åˆ°ä¸è¿ç»­çš„ç‰©ç†é¡µé¢ã€‚ ç®€åŒ–å†…å­˜åˆ†é…ã€‚è™šæ‹Ÿå†…å­˜ä¸ºå‘ç”¨æˆ·è¿›ç¨‹æä¾›ä¸€ä¸ªç®€å•çš„åˆ†é…é¢å¤–å†…å­˜çš„æœºåˆ¶ã€‚å½“ä¸€ä¸ªè¿è¡Œåœ¨ç”¨æˆ·è¿›ç¨‹ä¸­çš„ç¨‹åºè¦æ±‚é¢å¤–çš„å †ç©ºé—´æ—¶ï¼ˆå¦‚è°ƒç”¨ malloc çš„ç»“æœï¼‰ï¼Œæ“ä½œç³»ç»Ÿåˆ†é…ä¸€ä¸ªé€‚å½“æ•°å­—ï¼ˆä¾‹å¦‚ kï¼‰ä¸ªè¿ç»­çš„è™šæ‹Ÿå†…å­˜é¡µé¢ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸­ä»»æ„ä½ç½®çš„ k ä¸ªä»»æ„çš„ç‰©ç†é¡µé¢ã€‚ç”±äºé¡µè¡¨å·¥ä½œçš„æ–¹å¼ï¼Œæ“ä½œç³»ç»Ÿæ²¡æœ‰å¿…è¦åˆ†é… k ä¸ªè¿ç»­çš„ç‰©ç†å†…å­˜é¡µé¢ã€‚é¡µé¢å¯ä»¥éšæœºåœ°åˆ†æ•£åœ¨ç‰©ç†å†…å­˜ä¸­ã€‚ è™šæ‹Ÿå†…å­˜ä½œä¸ºå†…å­˜ä¿æŠ¤çš„å·¥å…· æ“ä½œç³»ç»Ÿä¸­çš„ç”¨æˆ·ç¨‹åºä¸åº”è¯¥ä¿®æ”¹åªè¯»çš„ä»£ç æ®µï¼Œä¹Ÿä¸åº”è¯¥è¯»å–æˆ–è€…ä¿®æ”¹å†…æ ¸ä¸­çš„ä»£ç å’Œæ•°æ®ç»“æ„æˆ–è€…è®¿é—®ç§æœ‰çš„ä»¥åŠå…¶ä»–çš„è¿›ç¨‹çš„å†…å­˜ï¼Œå¦‚æœæ— æ³•å¯¹ç”¨æˆ·è¿›ç¨‹çš„å†…å­˜è®¿é—®è¿›è¡Œé™åˆ¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥è®¿é—®å’Œä¿®æ”¹å…¶ä»–è¿›ç¨‹çš„å†…å­˜å½±å“ç³»ç»Ÿçš„å®‰å…¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é€šè¿‡åœ¨é¡µè¡¨ä¸­æ·»åŠ é¡µé¢çš„ä¿æŠ¤å±æ€§ï¼Œå¯ä»¥è®©æ“ä½œç³»ç»Ÿåœ¨é¡µé¢è¢«è®¿é—®æ—¶è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœé¡µé¢è¢«ä¿æŠ¤ä¸ºåªè¯»ï¼Œåˆ™æ“ä½œç³»ç»Ÿä¼šæŠ¥é”™ã€‚\nåœ¨å›¾ 9-10 è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ª PTE ä¸­å·²ç»æ·»åŠ äº†ä¸‰ä¸ªè®¸å¯ä½ã€‚SUP ä½è¡¨ç¤ºè¿›ç¨‹æ˜¯å¦å¿…é¡»è¿è¡Œåœ¨å†…æ ¸ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰æ¨¡å¼ä¸‹æ‰èƒ½è®¿é—®è¯¥é¡µã€‚è¿è¡Œåœ¨å†…æ ¸æ¨¡å¼ä¸­çš„è¿›ç¨‹å¯ä»¥è®¿é—®ä»»ä½•é¡µé¢ï¼Œä½†æ˜¯è¿è¡Œåœ¨ç”¨æˆ·æ¨¡å¼ä¸­çš„è¿›ç¨‹åªå…è®¸è®¿é—®é‚£äº› SUP ä¸º 0 çš„é¡µé¢ã€‚READ ä½å’Œ WRITE ä½æ§åˆ¶å¯¹é¡µé¢çš„è¯»å’Œå†™è®¿é—®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¿›ç¨‹ i è¿è¡Œåœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œé‚£ä¹ˆå®ƒæœ‰è¯» VP 0 å’Œè¯»å†™ VP 1 çš„æƒé™ã€‚ç„¶è€Œï¼Œä¸å…è®¸å®ƒè®¿é—® VP 2ã€‚\nå¦‚æœä¸€æ¡æŒ‡ä»¤è¿åäº†è¿™äº›è®¸å¯æ¡ä»¶ï¼Œé‚£ä¹ˆ CPU å°±è§¦å‘ä¸€ä¸ªä¸€èˆ¬ä¿æŠ¤æ•…éšœï¼Œå°†æ§åˆ¶ä¼ é€’ç»™ä¸€ä¸ªå†…æ ¸ä¸­çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚Linux shell ä¸€èˆ¬å°†è¿™ç§å¼‚å¸¸æŠ¥å‘Šä¸ºæ®µé”™è¯¯ï¼ˆsegmentation faultï¼‰ã€‚\nåœ°å€ç¿»è¯‘ åŸºæœ¬å‚æ•°\nç¬¦å· æè¿° $$\\small N=2^n$$ è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„åœ°å€æ•°é‡ $$\\small M=2^m$$ ç‰©ç†åœ°å€ç©ºé—´ä¸­çš„åœ°å€æ•°é‡ $$\\small P=2^p$$ é¡µçš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰ è™šæ‹Ÿåœ°å€ï¼ˆVAï¼‰çš„ç»„æˆéƒ¨åˆ†\nç¬¦å· æè¿° VPO è™šæ‹Ÿé¡µé¢åç§»é‡ï¼ˆå­—èŠ‚ï¼‰ VPN è™šæ‹Ÿé¡µå· TLBI TLB ç´¢å¼• TLBT TLB æ ‡è®° ç‰©ç†åœ°å€ï¼ˆPAï¼‰çš„ç»„æˆéƒ¨åˆ†\nç¬¦å· æè¿° PPO ç‰©ç†é¡µé¢åç§»é‡ï¼ˆå­—èŠ‚ï¼‰ PPN ç‰©ç†é¡µå· CO ç¼“å†²å—å†…çš„å­—èŠ‚åç§»é‡ CI é«˜é€Ÿç¼“å­˜ç´¢å¼• CT é«˜é€Ÿç¼“å­˜æ ‡è®° \u003c!DOCTYPE html\u003e Responsive Image å›¾ 9-12 å±•ç¤ºäº† MMU å¦‚ä½•åˆ©ç”¨é¡µè¡¨æ¥å®ç°åœ°å€ç¿»è¯‘ã€‚CPU ä¸­çš„ä¸€ä¸ªæ§åˆ¶å¯„å­˜å™¨ï¼Œé¡µè¡¨åŸºå€å¯„å­˜å™¨ï¼ˆPage Table Base Registerï¼ŒPTBRï¼‰æŒ‡å‘å½“å‰é¡µè¡¨ã€‚$n$ ä½çš„è™šæ‹Ÿåœ°å€åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ª $p$ ä½çš„è™šæ‹Ÿé¡µé¢åç§»ï¼ˆVirtual Page Offsetï¼ŒVPOï¼‰å’Œä¸€ä¸ª$\\small (n-p)$ä½çš„è™šæ‹Ÿé¡µå·ï¼ˆVirtual Page Numberï¼ŒVPNï¼‰ã€‚MMU åˆ©ç”¨ VPN æ¥é€‰æ‹©é€‚å½“çš„ PTEã€‚ä¾‹å¦‚ï¼ŒVPN 0 é€‰æ‹© PTE 0ï¼ŒVPN 1 é€‰æ‹© PTE 1ï¼Œä»¥æ­¤ç±»æ¨ã€‚å°†é¡µè¡¨æ¡ç›®ä¸­ç‰©ç†é¡µå·ï¼ˆPhysical Page Numberï¼ŒPPNï¼‰å’Œè™šæ‹Ÿåœ°å€ä¸­çš„ VPã€‚ä¸²è”èµ·æ¥ï¼Œå°±å¾—åˆ°ç›¸åº”çš„ç‰©ç†åœ°å€ã€‚æ³¨æ„ï¼Œå› ä¸ºç‰©ç†å’Œè™šæ‹Ÿé¡µé¢éƒ½æ˜¯ P å­—èŠ‚çš„ï¼Œæ‰€ä»¥ç‰©ç†é¡µé¢åç§»ï¼ˆPhysical Page Offsetï¼ŒPPOï¼‰å’Œ VPO æ˜¯ç›¸åŒçš„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å›¾ 9-13a å±•ç¤ºäº†å½“é¡µé¢å‘½ä¸­æ—¶ï¼ŒCPU ç¡¬ä»¶æ‰§è¡Œçš„æ­¥éª¤ã€‚\nç¬¬ 1 æ­¥ï¼šå¤„ç†å™¨ç”Ÿæˆä¸€ä¸ª è™šæ‹Ÿåœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ é€ç»™ MMUã€‚ ç¬¬ 2 æ­¥ï¼šMMU ç”Ÿæˆ PTE åœ°å€ï¼Œå¹¶ä»é«˜é€Ÿç¼“å­˜/ä¸»å­˜è¯·æ±‚å¾—åˆ°å®ƒã€‚ ç¬¬ 3 æ­¥ï¼šé«˜é€Ÿç¼“å­˜/ä¸»å­˜å‘ MMU è¿”å› PTEã€‚ ç¬¬ 4 æ­¥ï¼šMMU æ„é€ ç‰©ç†åœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ é€ç»™é«˜é€Ÿç¼“å­˜/ä¸»å­˜ã€‚ ç¬¬ 5 æ­¥ï¼šé«˜é€Ÿç¼“å­˜/ä¸»å­˜è¿”å›æ‰€è¯·æ±‚çš„æ•°æ®å­—ç»™å¤„ç†å™¨ã€‚ é¡µé¢å‘½ä¸­å®Œå…¨æ˜¯ç”±ç¡¬ä»¶æ¥å¤„ç†çš„ï¼Œä¸ä¹‹ä¸åŒçš„æ˜¯ï¼Œå¤„ç†ç¼ºé¡µè¦æ±‚ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿå†…æ ¸åä½œå®Œæˆï¼Œå¦‚å›¾ 9-13b æ‰€ç¤ºã€‚\nç¬¬ 1 - 3 æ­¥ï¼šå’Œå›¾ 9-13a ä¸­çš„ç¬¬ 1 æ­¥åˆ°ç¬¬ 3 æ­¥ç›¸åŒã€‚ ç¬¬ 4 æ­¥ï¼šPTE ä¸­çš„æœ‰æ•ˆä½æ˜¯é›¶ï¼Œæ‰€ä»¥ MMU è§¦å‘äº†ä¸€æ¬¡å¼‚å¸¸ï¼Œä¼ é€’ CPU ä¸­çš„æ§åˆ¶åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºã€‚ ç¬¬ 5 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºç¡®å®šå‡ºç‰©ç†å†…å­˜ä¸­çš„ç‰ºç‰²é¡µï¼Œå¦‚æœè¿™ä¸ªé¡µé¢å·²ç»è¢«ä¿®æ”¹äº†ï¼Œåˆ™æŠŠå®ƒæ¢å‡ºåˆ°ç£ç›˜ã€‚ ç¬¬ 6 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºé¡µé¢è°ƒå…¥æ–°çš„é¡µé¢ï¼Œå¹¶æ›´æ–°å†…å­˜ä¸­çš„ PTEã€‚ ç¬¬ 7 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºè¿”å›åˆ°åŸæ¥çš„è¿›ç¨‹ï¼Œå†æ¬¡æ‰§è¡Œå¯¼è‡´ç¼ºé¡µçš„æŒ‡ä»¤ã€‚CPU å°†å¼•èµ·ç¼ºé¡µçš„è™šæ‹Ÿåœ°å€é‡æ–°å‘é€ç»™ MMUã€‚å› ä¸ºè™šæ‹Ÿé¡µé¢ç°åœ¨ç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œæ‰€ä»¥å°±ä¼šå‘½ä¸­ï¼Œåœ¨ MMU æ‰§è¡Œäº†å›¾ 9-13b ä¸­çš„æ­¥éª¤ä¹‹åï¼Œä¸»å­˜å°±ä¼šå°†æ‰€è¯·æ±‚å­—è¿”å›ç»™å¤„ç†å™¨ã€‚ åˆ©ç”¨ TLB åŠ é€Ÿåœ°å€ç¿»è¯‘ æ¯æ¬¡ CPU è®¿é—®ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼ŒMMU å°±å¿…é¡»æŸ¥æ‰¾ PTEï¼Œä»¥ä¾¿å°†è™šæ‹Ÿåœ°å€ç¿»è¯‘ä¸ºç‰©ç†åœ°å€ã€‚åœ¨æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œè¿™ä¼šè¦æ±‚ä»å†…å­˜å¤šå–ä¸€æ¬¡æ•°æ®ï¼Œä»£ä»·æ˜¯å‡ ååˆ°å‡ ç™¾ä¸ªå‘¨æœŸã€‚å¦‚æœ PTE ç¢°å·§ç¼“å­˜åœ¨ L1 ä¸­ï¼Œé‚£ä¹ˆå¼€é”€å°±ä¸‹é™åˆ° 1 ä¸ªæˆ– 2 ä¸ªå‘¨æœŸã€‚ä¸ºäº†æ¶ˆé™¤è¿™æ ·çš„å¼€é”€ï¼Œåœ¨ MMU ä¸­åŒ…æ‹¬äº†ä¸€ä¸ªå…³äº PTE çš„å°çš„ç¼“å­˜ï¼Œç§°ä¸ºç¿»è¯‘åå¤‡ç¼“å†²å™¨ï¼ˆTranslation Lookaside Bufferï¼ŒTLBï¼‰ã€‚\nTLB æ˜¯ä¸€ä¸ªå°çš„ã€è™šæ‹Ÿå¯»å€çš„ç¼“å­˜ï¼Œå…¶ä¸­æ¯ä¸€è¡Œéƒ½ä¿å­˜ç€ä¸€ä¸ªç”±å•ä¸ª PTE ç»„æˆçš„å—ã€‚TLB é€šå¸¸æœ‰é«˜åº¦çš„ç›¸è”åº¦ã€‚å¦‚å›¾ 9-15 æ‰€ç¤ºï¼Œç”¨äºç»„é€‰æ‹©å’Œè¡ŒåŒ¹é…çš„ç´¢å¼•å’Œæ ‡è®°å­—æ®µæ˜¯ä»è™šæ‹Ÿåœ°å€ä¸­çš„è™šæ‹Ÿé¡µå·ä¸­æå–å‡ºæ¥çš„ã€‚å¦‚æœ TLB æœ‰$\\small T = 2^t$ä¸ªç»„ï¼Œé‚£ä¹ˆ TLB ç´¢å¼•ï¼ˆTLBIï¼‰æ˜¯ç”± VPN çš„ $t$ ä¸ªæœ€ä½ä½ç»„æˆçš„ï¼Œè€Œ TLB æ ‡è®°ï¼ˆTLBTï¼‰æ˜¯ç”± VPN ä¸­å‰©ä½™çš„ä½ç»„æˆçš„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å›¾ 9-16a å±•ç¤ºäº†å½“ TLB å‘½ä¸­æ—¶ï¼ˆé€šå¸¸æƒ…å†µï¼‰æ‰€åŒ…æ‹¬çš„æ­¥éª¤ã€‚è¿™é‡Œçš„å…³é”®ç‚¹æ˜¯ï¼Œæ‰€æœ‰çš„åœ°å€ç¿»è¯‘æ­¥éª¤éƒ½æ˜¯åœ¨èŠ¯ç‰‡ä¸Šçš„ MMU ä¸­æ‰§è¡Œçš„ï¼Œå› æ­¤éå¸¸å¿«ã€‚\nç¬¬ 1 æ­¥ï¼šCPU äº§ç”Ÿä¸€ä¸ªè™šæ‹Ÿåœ°å€ã€‚ ç¬¬ 2 - 3 æ­¥ï¼šMMU ä» TLB ä¸­å–å‡ºç›¸åº”çš„ PTEã€‚ ç¬¬ 4 æ­¥ï¼šMMU å°†è¿™ä¸ªè™šæ‹Ÿåœ°å€ç¿»è¯‘æˆä¸€ä¸ªç‰©ç†åœ°å€ï¼Œå¹¶ä¸”å°†å®ƒå‘é€åˆ°é«˜é€Ÿç¼“å­˜/ä¸»å­˜ã€‚ ç¬¬ 5 æ­¥ï¼šé«˜é€Ÿç¼“å­˜/ä¸»å­˜å°†æ‰€è¯·æ±‚çš„æ•°æ®å­—è¿”å›ç»™ CPUã€‚ \u003c!DOCTYPE html\u003e Responsive Image å½“ TLB ä¸å‘½ä¸­æ—¶ï¼ŒMMU å¿…é¡»ä» L1 ç¼“å­˜ä¸­å–å‡ºç›¸åº”çš„ PTEï¼Œå¦‚å›¾ 9-16b æ‰€ç¤ºã€‚æ–°å–å‡ºçš„ PTE å­˜æ”¾åœ¨ TLB ä¸­ï¼Œå¯èƒ½ä¼šè¦†ç›–ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ¡ç›®ã€‚\nå¤šçº§é¡µè¡¨ 32 ä½ç¯å¢ƒä¸‹ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´å…± 4GBã€‚å¦‚æœåˆ†æˆ 4KB ä¸€ä¸ªé¡µï¼Œé‚£å°±æ˜¯ 1M ä¸ªé¡µã€‚æ¯ä¸ªé¡µè¡¨é¡¹éœ€è¦ 4 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œé‚£ä¹ˆæ•´ä¸ª 4GB ç©ºé—´çš„æ˜ å°„å°±éœ€è¦ 4MB çš„å†…å­˜æ¥å­˜å‚¨æ˜ å°„è¡¨ã€‚å¦‚æœæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„æ˜ å°„è¡¨ï¼Œ100 ä¸ªè¿›ç¨‹å°±éœ€è¦ 400MB çš„å†…å­˜ã€‚å¯¹äºå†…æ ¸æ¥è®²ï¼Œæœ‰ç‚¹å¤§äº†ã€‚\né¡µè¡¨ä¸­æ‰€æœ‰é¡µè¡¨é¡¹å¿…é¡»æå‰å»ºå¥½ï¼Œå¹¶ä¸”è¦æ±‚æ˜¯è¿ç»­çš„ã€‚å¦‚æœä¸è¿ç»­ï¼Œå°±æ²¡æœ‰åŠæ³•é€šè¿‡è™šæ‹Ÿåœ°å€é‡Œé¢çš„é¡µå·æ‰¾åˆ°å¯¹åº”çš„é¡µè¡¨é¡¹äº†ã€‚\né‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¯•ç€å°†é¡µè¡¨å†åˆ†é¡µï¼Œ4G çš„ç©ºé—´éœ€è¦ 4M çš„é¡µè¡¨æ¥å­˜å‚¨æ˜ å°„ã€‚æˆ‘ä»¬æŠŠè¿™ 4M åˆ†æˆ 1Kï¼ˆ1024ï¼‰ä¸ª 4Kï¼Œæ¯ä¸ª 4K åˆèƒ½æ”¾åœ¨ä¸€é¡µé‡Œé¢ï¼Œè¿™æ · 1K ä¸ª 4K å°±æ˜¯ 1K ä¸ªé¡µï¼Œè¿™ 1K ä¸ªé¡µä¹Ÿéœ€è¦ä¸€ä¸ªè¡¨è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬ç§°ä¸ºé¡µç›®å½•è¡¨ï¼Œè¿™ä¸ªé¡µç›®å½•è¡¨é‡Œé¢æœ‰ 1K é¡¹ï¼Œæ¯é¡¹ 4 ä¸ªå­—èŠ‚ï¼Œé¡µç›®å½•è¡¨å¤§å°ä¹Ÿæ˜¯ 4Kã€‚\né¡µç›®å½•æœ‰ 1K é¡¹ï¼Œç”¨ 10 ä½å°±å¯ä»¥è¡¨ç¤ºè®¿é—®é¡µç›®å½•çš„å“ªä¸€é¡¹ã€‚è¿™ä¸€é¡¹å…¶å®å¯¹åº”çš„æ˜¯ä¸€æ•´é¡µçš„é¡µè¡¨é¡¹ï¼Œä¹Ÿå³ 4K çš„é¡µè¡¨é¡¹ã€‚æ¯ä¸ªé¡µè¡¨é¡¹ä¹Ÿæ˜¯ 4 ä¸ªå­—èŠ‚ï¼Œå› è€Œä¸€æ•´é¡µçš„é¡µè¡¨é¡¹æ˜¯ 1K ä¸ªã€‚å†ç”¨ 10 ä½å°±å¯ä»¥è¡¨ç¤ºè®¿é—®é¡µè¡¨é¡¹çš„å“ªä¸€é¡¹ï¼Œé¡µè¡¨é¡¹ä¸­çš„ä¸€é¡¹å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªé¡µï¼Œæ˜¯å­˜æ”¾æ•°æ®çš„é¡µï¼Œè¿™ä¸ªé¡µçš„å¤§å°æ˜¯ 4Kï¼Œç”¨ 12 ä½å¯ä»¥å®šä½è¿™ä¸ªé¡µå†…çš„ä»»ä½•ä¸€ä¸ªä½ç½®ã€‚\nè¿™æ ·åŠ èµ·æ¥æ­£å¥½ 32 ä½ï¼Œä¹Ÿå°±æ˜¯ç”¨å‰ 10 ä½å®šä½åˆ°é¡µç›®å½•è¡¨ä¸­çš„ä¸€é¡¹ã€‚å°†è¿™ä¸€é¡¹å¯¹åº”çš„é¡µè¡¨å–å‡ºæ¥å…± 1k é¡¹ï¼Œå†ç”¨ä¸­é—´ 10 ä½å®šä½åˆ°é¡µè¡¨ä¸­çš„ä¸€é¡¹ï¼Œå°†è¿™ä¸€é¡¹å¯¹åº”çš„å­˜æ”¾æ•°æ®çš„é¡µå–å‡ºæ¥ï¼Œå†ç”¨æœ€å 12 ä½å®šä½åˆ°é¡µä¸­çš„å…·ä½“ä½ç½®è®¿é—®æ•°æ®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œæ˜ å°„ 4GB åœ°å€ç©ºé—´å°±éœ€è¦ 4MB+4KB çš„å†…å­˜ï¼Œè¿™æ ·ä¸æ˜¯æ›´å¤§ äº†å—ï¼Ÿå½“ç„¶å¦‚æœé¡µæ˜¯æ»¡çš„ï¼Œå½“æ—¶æ˜¯æ›´å¤§äº†ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¾€å¾€ä¸ä¼šä¸ºä¸€ä¸ªè¿›ç¨‹åˆ†é…é‚£ä¹ˆå¤šå†… å­˜ã€‚ æ¯”å¦‚è¯´ï¼Œä¸Šé¢å›¾ä¸­ï¼Œæˆ‘ä»¬å‡è®¾åªç»™è¿™ä¸ªè¿›ç¨‹åˆ†é…äº†ä¸€ä¸ªæ•°æ®é¡µã€‚å¦‚æœåªä½¿ç”¨é¡µè¡¨ï¼Œä¹Ÿéœ€è¦å®Œ æ•´çš„ 1M ä¸ªé¡µè¡¨é¡¹å…± 4M çš„å†…å­˜ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº†é¡µç›®å½•ï¼Œé¡µç›®å½•éœ€è¦ 1K ä¸ªå…¨éƒ¨åˆ†é…ï¼Œå ç”¨å†…å­˜ 4Kï¼Œä½†æ˜¯é‡Œé¢åªæœ‰ä¸€é¡¹ä½¿ç”¨äº†ã€‚åˆ°äº†é¡µè¡¨é¡¹ï¼Œåªéœ€è¦åˆ†é…èƒ½å¤Ÿç®¡ç†é‚£ä¸ªæ•°æ®é¡µçš„é¡µè¡¨é¡¹é¡µå°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤š 4Kï¼Œè¿™æ ·å†…å­˜å°±èŠ‚çœå¤šäº†\nå½“ç„¶å¯¹äº 64 ä½çš„ç³»ç»Ÿï¼Œä¸¤çº§è‚¯å®šä¸å¤Ÿäº†ï¼Œå°±å˜æˆäº†å››çº§ç›®å½•ï¼Œåˆ†åˆ«æ˜¯å…¨å±€é¡µç›®å½•é¡¹ PGDï¼ˆPage Global Directoryï¼‰ã€ä¸Šå±‚é¡µç›®å½•é¡¹ PUDï¼ˆPage Upper Directoryï¼‰ã€ä¸­é—´ é¡µç›®å½•é¡¹ PMDï¼ˆPage Middle Directoryï¼‰å’Œé¡µè¡¨é¡¹ PTEï¼ˆPage Table Entryï¼‰ã€‚ä¹Ÿå°±æ˜¯ä¸€çº§é¡µè¡¨ï¼ŒäºŒçº§é¡µè¡¨ï¼Œä¸‰çº§é¡µè¡¨ï¼Œå››çº§é¡µè¡¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E7%90%86%E8%A7%A3%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/","summary":"\u003ch2 id=\"ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿå†…å­˜\"\u003eä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿå†…å­˜ï¼Ÿ\u003c/h2\u003e\n\u003cp\u003eCPU è®¿é—®å†…å­˜çš„æœ€è‡ªç„¶çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ç‰©ç†åœ°å€ï¼Œè¿™ç§æ–¹å¼ç§°ä¸º\u003cstrong\u003eç‰©ç†å¯»å€\u003c/strong\u003eã€‚1ï¼Œè®¡ç®—æœºä¸­å¹¶ä¸æ˜¯åªæœ‰ä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œï¼Œå¦‚æœå®ƒä»¬éƒ½æ˜¯ç”¨ç‰©ç†å¯»å€çš„æ–¹å¼ï¼Œé‚£ä¹ˆæ‰€æœ‰ç¨‹åºå¿…é¡»åœ¨é“¾æ¥ä¹‹å‰ç¡®å®šå¥½è‡ªå·±æ‰€ç”¨åˆ°çš„å†…å­˜èŒƒå›´ï¼Œå¦åˆ™ä¸¤ä¸ªç¨‹åºå°±å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚2ï¼Œç¨‹åºå¤§äºå†…å­˜çš„é—®é¢˜æ—©åœ¨ä¸Šä¸–çºªå…­åå¹´ä»£å°±å‡ºç°ï¼Œåæ¥å‡ºç°äº†\u003cstrong\u003eè¦†ç›–æŠ€æœ¯\u003c/strong\u003eï¼ˆOverlayï¼‰ï¼ŒæŠŠç¨‹åºåˆ†å‰²æˆè®¸å¤šç‰‡æ®µã€‚ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶ï¼Œå°†è¦†ç›–ç®¡ç†æ¨¡å—è£…å…¥å†…å­˜ï¼Œè¯¥ç®¡ç†æ¨¡å—ç«‹å³è£…å…¥å¹¶è¿è¡Œè¦†ç›– 0ã€‚æ‰§è¡Œå®Œæˆåï¼Œè¦†ç›– 0 é€šçŸ¥ç®¡ç†æ¨¡å—è£…å…¥è¦†ç›– 1ï¼Œæˆ–è€…å ç”¨è¦†ç›– 0 çš„ä¸Šæ–¹ä½ç½®ï¼ˆå¦‚æœæœ‰ç©ºé—´ï¼‰ï¼Œæˆ–è€…å ç”¨è¦†ç›– 0ï¼ˆå¦‚æœæ²¡æœ‰ç©ºé—´ï¼‰ã€‚æŠŠä¸€ä¸ªå¤§ç¨‹åºåˆ†å‰²æˆå°çš„ã€æ¨¡å—åŒ–çš„ç‰‡æ®µæ˜¯éå¸¸è´¹æ—¶å’Œæ¯ç‡¥çš„ï¼Œå¹¶ä¸”æ˜“äºå‡ºé”™ã€‚å¾ˆå°‘ç¨‹åºå‘˜æ“…é•¿ä½¿ç”¨è¦†ç›–æŠ€æœ¯ã€‚\u003c/p\u003e","title":"ç†è§£è™šæ‹Ÿå†…å­˜"},{"content":"åœ¨åšCSAPP_LAB-Cache Labæ—¶ï¼Œå®éªŒè¦æ±‚å¯¹è¾“å…¥å‚æ•°è¿›è¡Œå¤„ç†ï¼Œå¦‚ç¨‹åºcsimæ‰§è¡Œéœ€è¦ 4 ä¸ªå‚æ•°ï¼š\n./csim -s 4 -E 6 -b 4 -t \u0026lt;tracefile\u0026gt; åŸå…ˆæƒ³é€šè¿‡å­—ç¬¦ä¸²è§£æï¼Œä¸€ä¸ªä¸ªå¤„ç†ï¼Œä½†æ˜¯çœ‹åˆ°äº†å…¶ä»–å‚è€ƒä»£ç åå‘ç°äº†ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡getopt()å‡½æ•°æ¥è§£æå‚æ•°ã€‚\nå‡½æ•°çš„åŠŸèƒ½ï¼šè§£æå‘½ä»¤è¡Œå‚æ•°ã€‚ å¤´æ–‡ä»¶ #include \u0026lt;unistd.h\u0026gt;\nåœ¨å­¦ä¹ å‡½æ•°å‰éœ€è¦äº†è§£ä¸è¯¥å‡½æ•°ç›¸å…³çš„å››ä¸ªå˜é‡ï¼š\nint opterrï¼šæ§åˆ¶æ˜¯å¦è¾“å‡ºé”™è¯¯ï¼› å¦‚æœæ­¤å˜é‡çš„å€¼éé›¶ï¼Œåˆ™ getopt åœ¨é‡åˆ°æœªçŸ¥é€‰é¡¹å­—ç¬¦æˆ–ç¼ºå°‘å¿…éœ€å‚æ•°çš„é€‰é¡¹æ—¶å°†é”™è¯¯æ¶ˆæ¯æ‰“å°åˆ°æ ‡å‡†é”™è¯¯æµ (ç»ˆç«¯)ã€‚è¯¥å€¼é»˜è®¤ä¸ºéé›¶ã€‚å¦‚æœå°†æ­¤å˜é‡è®¾ç½®ä¸ºé›¶ï¼Œgetopt ä¸ä¼šæ‰“å°ä»»ä½•æ¶ˆæ¯ï¼Œä½†ä»ä¼šè¿”å›é—®å·?æç¤ºé”™è¯¯ã€‚\nint optoptï¼šä¿å­˜æœªçŸ¥çš„é€‰é¡¹ï¼› å½“ getopt é‡åˆ°æœªçŸ¥é€‰é¡¹å­—ç¬¦æˆ–ç¼ºå°‘å¿…éœ€å‚æ•°çš„é€‰é¡¹æ—¶ï¼Œå®ƒå°†è¯¥é€‰é¡¹å­—ç¬¦å­˜å‚¨åœ¨æ­¤å˜é‡ä¸­ã€‚\nint optindï¼šæŒ‡å‘ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„å‚æ•°ï¼› æ­¤å˜é‡ç”± getopt è®¾ç½®ä¸ºè¦å¤„ç†çš„ argv æ•°ç»„çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚ä¸€æ—¦ getopt æ‰¾åˆ°æ‰€æœ‰é€‰é¡¹å‚æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨æ­¤å˜é‡æ¥ç¡®å®šå…¶ä½™éé€‰é¡¹å‚æ•°çš„å¼€å§‹ä½ç½®ã€‚è¯¥å˜é‡çš„åˆå§‹å€¼ä¸º 1ã€‚\nchar * optargï¼šä¿å­˜é€‰é¡¹å‚æ•°ï¼› å¯¹äºé‚£äº›æ¥å—å‚æ•°çš„é€‰é¡¹ï¼Œæ­¤å˜é‡ç”± getopt è®¾ç½®ä¸ºæŒ‡å‘é€‰é¡¹å‚æ•°çš„å€¼ã€‚\nå‡½æ•°åŸå‹ï¼š\nint getopt(int argc, char * const argv[], const char * options); å‚æ•°è§£æï¼š\nå‚æ•°argc å’Œargv æ˜¯ç”±main()ä¼ é€’çš„å‚æ•°ä¸ªæ•°å’Œå†…å®¹ã€‚ options å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒæŒ‡å®šå¯¹è¯¥ç¨‹åºæœ‰æ•ˆçš„é€‰é¡¹å­—ç¬¦ã€‚æ­¤å­—ç¬¦ä¸²ä¸­çš„é€‰é¡¹å­—ç¬¦åé¢å¯ä»¥è·Ÿä¸€ä¸ªå†’å·ï¼ˆ:ï¼‰ï¼Œè¡¨ç¤ºå®ƒéœ€è¦ä¸€ä¸ªå¿…éœ€çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥ä¸é€‰é¡¹è¿å†™ä¹Ÿå¯ä»¥ç©ºæ ¼åˆ†å¼€ï¼Œå¦‚-a13 or -a 13ã€‚å¦‚æœé€‰é¡¹å­—ç¬¦åè·Ÿä¸¤ä¸ªå†’å·ï¼ˆ::ï¼‰ï¼Œåˆ™å…¶å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæœ‰å‚æ•°ï¼Œé‚£ä¹ˆå‚æ•°ä¸èƒ½ä¸é€‰é¡¹åˆ†å‰²ï¼Œå¦‚åªèƒ½å†™æˆ-a13è€Œä¸èƒ½å†™æˆ-a 13ï¼›è¿™æ˜¯ä¸€ä¸ª GNU æ‰©å±•ã€‚ å®ä¾‹ï¼š\nä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†é€šå¸¸å¦‚ä½•ä½¿ç”¨ getoptã€‚éœ€è¦æ³¨æ„çš„å…³é”®ç‚¹æ˜¯ï¼š\né€šå¸¸ï¼Œgetopt åœ¨å¾ªç¯ä¸­è¢«è°ƒç”¨ã€‚å½“ getopt è¿”å› -1 è¡¨ç¤ºæ²¡æœ‰æ›´å¤šé€‰é¡¹å­˜åœ¨æ—¶ï¼Œå¾ªç¯ç»ˆæ­¢ã€‚ switch è¯­å¥ç”¨äºè°ƒåº¦ getopt çš„è¿”å›å€¼ã€‚åœ¨å…¸å‹ä½¿ç”¨ä¸­ï¼Œæ¯ç§æƒ…å†µåªè®¾ç½®ä¸€ä¸ªç¨ååœ¨ç¨‹åºä¸­ä½¿ç”¨çš„å˜é‡ã€‚ ç¬¬äºŒä¸ªå¾ªç¯ç”¨äºå¤„ç†å‰©ä½™çš„éé€‰é¡¹å‚æ•°ã€‚ #include \u0026lt;ctype.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; int main (int argc, char **argv) { int aflag = 0; int bflag = 0; char *cvalue = NULL; int index; int c; opterr = 0; while ((c = getopt (argc, argv, \u0026#34;abc:\u0026#34;)) != -1) switch (c) { case \u0026#39;a\u0026#39;: aflag = 1; break; case \u0026#39;b\u0026#39;: bflag = 1; break; case \u0026#39;c\u0026#39;: cvalue = optarg; break; case \u0026#39;?\u0026#39;: if (optopt == \u0026#39;c\u0026#39;) fprintf (stderr, \u0026#34;Option -%c requires an argument.\\n\u0026#34;, optopt); else if (isprint (optopt)) fprintf (stderr, \u0026#34;Unknown option `-%c\u0026#39;.\\n\u0026#34;, optopt); else fprintf (stderr, \u0026#34;Unknown option character `\\\\x%x\u0026#39;.\\n\u0026#34;, optopt); return 1; default: abort (); } printf (\u0026#34;aflag = %d, bflag = %d, cvalue = %s\\n\u0026#34;, aflag, bflag, cvalue); for (index = optind; index \u0026lt; argc; index++) printf (\u0026#34;Non-option argument %s\\n\u0026#34;, argv[index]); return 0; } ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼Œå±•ç¤ºäº†è¯¥ç¨‹åºä½¿ç”¨ä¸åŒçš„å‚æ•°ç»„åˆæ‰“å°çš„å†…å®¹ï¼š\n% testopt aflag = 0, bflag = 0, cvalue = (null) // é€‰é¡¹å¯ä»¥ç”¨ç©ºæ ¼åˆ†å‰² % testopt -a -b aflag = 1, bflag = 1, cvalue = (null) // ä¹Ÿå¯ä»¥è¿å†™ % testopt -ab aflag = 1, bflag = 1, cvalue = (null) // å¿…é€‰å‚æ•°ï¼Œå¯ä»¥ç”¨ç©ºæ ¼åˆ†å‰² % testopt -c foo aflag = 0, bflag = 0, cvalue = foo // å¿…é€‰å‚æ•°ï¼Œå¯ä»¥è¿å†™ % testopt -cfoo aflag = 0, bflag = 0, cvalue = foo // æ²¡æœ‰å¯¹åº”çš„é€‰é¡¹ % testopt arg1 aflag = 0, bflag = 0, cvalue = (null) Non-option argument arg1 // -aé€‰é¡¹æ²¡æœ‰éœ€è¦å¤„ç†çš„å‚æ•°ï¼Œæ‰€ä»¥arg1æ— æ³•å¤„ç† % testopt -a arg1 aflag = 1, bflag = 0, cvalue = (null) Non-option argument arg1 % testopt -c foo arg1 aflag = 0, bflag = 0, cvalue = foo Non-option argument arg1 % testopt -a -- -b aflag = 1, bflag = 0, cvalue = (null) Non-option argument -b % testopt -a - aflag = 1, bflag = 0, cvalue = (null) Non-option argument - å‚è€ƒèµ„æ–™ åŸæ¥å‘½ä»¤è¡Œå‚æ•°å¤„ç†å¯ä»¥è¿™ä¹ˆå†™-getoptï¼Ÿ_huangxiaohu_coder çš„åšå®¢-CSDN åšå®¢ Linux ä¸‹ getopt() å‡½æ•°çš„ç®€å•ä½¿ç”¨ - é’å„¿å“¥å“¥ - åšå®¢å›­ Using Getopt (The GNU C Library)\n","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80getopt-%E5%87%BD%E6%95%B0%E7%9A%84%E7%94%A8%E6%B3%95/","summary":"\u003cp\u003eåœ¨åš\u003ca href=\"https://dunky-z.github.io/2022/07/11/CSAPP-LAB-Cache-Lab/\"\u003eCSAPP_LAB-Cache Lab\u003c/a\u003eæ—¶ï¼Œå®éªŒè¦æ±‚å¯¹è¾“å…¥å‚æ•°è¿›è¡Œå¤„ç†ï¼Œå¦‚ç¨‹åº\u003ccode\u003ecsim\u003c/code\u003eæ‰§è¡Œéœ€è¦ 4 ä¸ªå‚æ•°ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e./csim -s \u003cspan class=\"m\"\u003e4\u003c/span\u003e -E \u003cspan class=\"m\"\u003e6\u003c/span\u003e -b \u003cspan class=\"m\"\u003e4\u003c/span\u003e -t \u0026lt;tracefile\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eåŸå…ˆæƒ³é€šè¿‡å­—ç¬¦ä¸²è§£æï¼Œä¸€ä¸ªä¸ªå¤„ç†ï¼Œä½†æ˜¯çœ‹åˆ°äº†å…¶ä»–å‚è€ƒä»£ç åå‘ç°äº†ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡\u003ccode\u003egetopt()\u003c/code\u003eå‡½æ•°æ¥è§£æå‚æ•°ã€‚\u003c/p\u003e","title":"C è¯­è¨€ getopt() å‡½æ•°çš„ç”¨æ³•"},{"content":"ä¿ç•™ç°åœº Windows ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ VSCode çš„ç»ˆç«¯æ—¶ï¼Œä¸­æ–‡æ˜¾ç¤ºä¸ºä¹±ç ï¼Œå¦‚ä½¿ç”¨git statuså‘½ä»¤æŸ¥çœ‹ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œä¸­æ–‡æ–‡ä»¶åå°±æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼š \u003c!DOCTYPE html\u003e Responsive Image æ¢ç©¶åŸå›  å› ä¸ºç»ˆç«¯è¢«æ›¿æ¢æˆäº† git bashï¼Œå®ƒå¯¹æ‰€æœ‰éè‹±æ–‡çš„å­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰ã€‚\nå®˜æ–¹æ–‡æ¡£æåˆ°ï¼š\nè¾“å‡ºè·¯å¾„çš„å‘½ä»¤ï¼ˆä¾‹å¦‚ls-filesã€diffï¼‰å°†é€šè¿‡å°†è·¯å¾„åæ‹¬åœ¨åŒå¼•å·ä¸­å¹¶ä»¥ä¸ C è½¬ä¹‰æ§åˆ¶å­—ç¬¦ç›¸åŒçš„æ–¹å¼ç”¨åæ–œæ è½¬ä¹‰è¿™äº›å­—ç¬¦æ¥å¼•ç”¨è·¯å¾„åä¸­çš„å¼‚å¸¸å­—ç¬¦ï¼ˆä¾‹å¦‚\\tç”¨äº TAB, \\n è¡¨ç¤ºLFï¼Œ\\\\è¡¨ç¤ºåæ–œæ ï¼‰æˆ–å€¼å¤§äº 0x80 çš„å­—èŠ‚ï¼ˆä¾‹å¦‚ï¼Œå…«è¿›åˆ¶ \\302\\265 è¡¨ç¤º UTF-8 ä¸­çš„â€œmicroâ€ï¼‰ã€‚å¦‚æœæ­¤å˜é‡è®¾ç½®ä¸º falseï¼Œåˆ™é«˜äº 0x80 çš„å­—èŠ‚ä¸å†è¢«è§†ä¸ºå¼‚å¸¸ã€‚æ— è®ºæ­¤å˜é‡çš„è®¾ç½®å¦‚ä½•ï¼ŒåŒå¼•å·ã€åæ–œæ å’Œæ§åˆ¶å­—ç¬¦æ€»æ˜¯è¢«è½¬ä¹‰ã€‚ä¸€ä¸ªç®€å•çš„ç©ºæ ¼å­—ç¬¦ä¸è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸çš„ã€‚è®¸å¤šå‘½ä»¤å¯ä»¥ä½¿ç”¨ -z é€‰é¡¹å®Œå…¨é€å­—è¾“å‡ºè·¯å¾„åã€‚é»˜è®¤å€¼æ˜¯ trueã€‚\nè§£å†³æ–¹æ³• å‘½ä»¤è¡Œè¾“å…¥ï¼Œå–æ¶ˆè½¬ä¹‰ï¼š\ngit config --global core.quotepath false ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3vs-code%E7%BB%88%E7%AB%AF%E4%BD%BF%E7%94%A8git-bash%E6%97%B6%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eWindows ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ VSCode çš„ç»ˆç«¯æ—¶ï¼Œä¸­æ–‡æ˜¾ç¤ºä¸ºä¹±ç ï¼Œå¦‚ä½¿ç”¨\u003ccode\u003egit status\u003c/code\u003eå‘½ä»¤æŸ¥çœ‹ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œä¸­æ–‡æ–‡ä»¶åå°±æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼š\n\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202207162158602.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202207162158602.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"è§£å†³ VS Code ç»ˆç«¯ä½¿ç”¨ git bash æ—¶ä¸­æ–‡ä¹±ç "},{"content":"æŠ€æœ¯èƒŒæ™¯ è½¬è½½è‡ª^[ç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰æŠ€æœ¯çš„èƒŒæ™¯ã€æ„ä¹‰ä»¥åŠå‘å±•_ç¢ç¢æ€çš„åšå®¢-CSDN åšå®¢]\nåœ¨è¿‡å»çš„å‡ åå¹´é‡Œï¼Œé›†æˆç”µè·¯åˆ¶é€ å·¥è‰ºæŠ€æœ¯ã€å°è£…ä¸æµ‹è¯•æŠ€æœ¯ã€è®¾è®¡æ–¹æ³•å­¦å’Œ EDA å·¥å…·ç­‰å¾®ç”µå­ç›¸å…³æŠ€æœ¯å§‹ç»ˆä¿æŒç€å¿«é€Ÿçš„å‘å±•ã€‚æ ¹æ®å›½é™…åŠå¯¼ä½“æŠ€æœ¯å‘å±•è·¯çº¿å›¾ï¼ˆInternational Technology Roadmap for Semiconductors, ITRSï¼‰é¢„æµ‹ï¼Œåˆ° 2024 å¹´ IC åˆ¶é€ æŠ€æœ¯å°†è¾¾åˆ° 2 nmã€‚ä½†æ˜¯ï¼Œå…¨å±€äº’è¿çº¿çš„æ€§èƒ½æå‡ç¨‹åº¦æ˜æ˜¾ä½äºæ™¶ä½“ç®¡æ€§èƒ½æå‡ç¨‹åº¦ã€‚å—åˆ°äºšé˜ˆå€¼æ¼ç”µæµåŠŸè€—ã€åŠ¨æ€åŠŸè€—ã€å™¨ä»¶å¯é æ€§ä»¥åŠå…¨å±€äº’è¿çº¿ç­‰å½±å“ï¼Œé€šè¿‡æå‡å•ä¸ªå¤„ç†å™¨æ ¸çš„æ€§èƒ½æ¥æå‡ç³»ç»Ÿæ•´ä½“æ€§èƒ½å·²å˜å¾—éå¸¸éš¾ä»¥å®ç°ï¼ŒåŒæ—¶èŠ¯ç‰‡è®¾è®¡çš„éš¾åº¦å’Œå¤æ‚åº¦ä¹Ÿåœ¨è¿›ä¸€æ­¥å¢åŠ ã€‚ç‰‡ä¸Šç³»ç»Ÿï¼ˆSystem on Chip, SoCï¼‰å…·æœ‰é›†æˆåº¦é«˜ã€åŠŸè€—ä½ã€æˆæœ¬ä½ã€ä½“ç§¯å°ç­‰ä¼˜ç‚¹ï¼Œå·²ç»æˆä¸ºè¶…å¤§è§„æ¨¡é›†æˆç”µè·¯ç³»ç»Ÿè®¾è®¡çš„ä¸»æµæ–¹å‘ã€‚éšç€ç‰‡ä¸Šç³»ç»Ÿ SoC çš„åº”ç”¨éœ€æ±‚è¶Šæ¥è¶Šä¸°å¯Œã€è¶Šæ¥è¶Šå¤æ‚ï¼Œç‰‡ä¸Šå¤šæ ¸ MPSoC (MultiprocessorSystem on Chip, MPSoC) å·²ç»æˆä¸ºå‘å±•çš„å¿…ç„¶è¶‹åŠ¿ï¼ŒåŒæ—¶ MPSoC ä¸Šé›†æˆçš„ IP æ ¸æ•°é‡ä¹Ÿå°†ä¼šæŒ‰ç…§æ‘©å°”å®šå¾‹ç»§ç»­å‘å±•ã€‚ç›®å‰ï¼ŒMPSoC å·²ç»é€æ¸åº”ç”¨äºç½‘ç»œé€šä¿¡ã€å¤šåª’ä½“ç­‰åµŒå…¥å¼ç”µå­è®¾å¤‡ä¸­ã€‚åŠå¯¼ä½“å·¥è‰ºæŠ€æœ¯çš„å¿«é€Ÿå‘å±•ä¸ºé›†æˆç”µè·¯è®¾è®¡æä¾›äº†å¾ˆå¤§çš„å‘å±•ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€ç³»åˆ—æ–°çš„é—®é¢˜å’ŒæŒ‘æˆ˜ï¼Œå¦‚èŠ¯ç‰‡çš„æ€§èƒ½ã€åŠŸè€—ã€å¯é æ€§ã€å¯æ‰©å±•æ€§ç­‰ç­‰ã€‚\néšç€ç³»ç»Ÿæ€§èƒ½éœ€æ±‚è¶Šæ¥è¶Šé«˜ï¼Œå¤„ç†å™¨æ ¸ä¹‹é—´çš„äº’è¿æ¶æ„å¿…é¡»èƒ½å¤Ÿæä¾›å…·æœ‰è¾ƒä½å»¶è¿Ÿå’Œé«˜ååç‡çš„æœåŠ¡ï¼Œå¹¶ä¸”å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚ä¼ ç»Ÿçš„åŸºäºæ€»çº¿çš„é›†ä¸­å¼äº’è¿æ¶æ„å·²ç»éš¾ä»¥æ»¡è¶³ç°ä»Šç³»ç»Ÿçš„æ€§èƒ½éœ€æ±‚ï¼Œè€ŒåŸºäºæŠ¥æ–‡äº¤æ¢çš„**ç‰‡ä¸Šç½‘ç»œï¼ˆNetwork on Chip, NoCï¼‰**é€æ¸æˆä¸ºç‰‡ä¸Šå¤šæ ¸é—´é€šè®¯çš„é¦–é€‰äº’è¿æ¶æ„ã€‚åœ¨ NoC ä¸­ï¼Œè·¯ç”±èŠ‚ç‚¹ä¹‹é—´é€šè¿‡å±€éƒ¨äº’è¿çº¿ç›¸è¿æ¥ï¼Œæ¯ä¸€ä¸ªè·¯ç”±èŠ‚ç‚¹é€šè¿‡ç½‘ç»œæ¥å£ NI ä¸ä¸€ä¸ªæœ¬åœ° IP æ ¸ç›¸è¿æ¥ï¼Œæºè·¯ç”±èŠ‚ç‚¹å’Œç›®çš„è·¯ç”±èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®é€šè®¯éœ€è¦ç»è¿‡å¤šä¸ªè·³æ­¥æ¥å®ç°ã€‚å› æ­¤ï¼ŒNoC æŠ€æœ¯çš„å‡ºç°ä½¿å¾—ç‰‡ä¸Šç³»ç»Ÿ SoC çš„è®¾è®¡ä¹Ÿå°†ä»ä»¥è®¡ç®—ä¸ºä¸­å¿ƒé€æ¸è¿‡æ¸¡åˆ°ä»¥é€šè®¯ä¸ºä¸­å¿ƒã€‚\nä¼ ç»Ÿçš„ SoC ç³»ç»Ÿé‡‡ç”¨æ€»çº¿äº’è¿ç»“æ„ï¼Œå¦‚ æ‰€ç¤ºã€‚è™½ç„¶äººä»¬å·²ç»æå‡ºäº†å¾ˆå¤šæ”¹è¿›çš„æ€»çº¿ç»“æ„ï¼Œä¾‹å¦‚å°†å…±äº«æ€»çº¿æ”¹è¿›ä¸ºæ¡¥æ¥å¤šæ€»çº¿ç»“æ„ã€å±‚æ¬¡åŒ–æ€»çº¿ç»“æ„ç­‰æ›´å¤æ‚çš„ç»“æ„ã€‚ä½†æ˜¯å½“è¿›å…¥ MPSoC æ—¶ä»£ï¼Œå•èŠ¯ç‰‡ä¸Šé›†æˆçš„å¤„ç†å™¨æ ¸æ•°è¶Šæ¥è¶Šå¤šæ—¶ï¼Œæ€»çº¿ç»“æ„åœ¨é€šè®¯æ€§èƒ½ã€åŠŸè€—ã€å…¨å±€æ—¶é’ŸåŒæ­¥ã€ä¿¡å·å®Œæ•´æ€§ä»¥åŠä¿¡å·å¯é æ€§ç­‰æ–¹é¢é¢ä¸´ç€å·¨å¤§çš„æŒ‘æˆ˜ï¼Œè¿™äº›å¤æ‚çš„æ”¹è¿›å‹æ€»çº¿ç»“æ„ä»æ— æ³•è§£å†³ç‰‡ä¸Šå¤šæ ¸é—´é€šä¿¡æ‰€é¢ä¸´çš„é—®é¢˜ã€‚å› æ­¤ï¼ŒMPSoC ä¸Šå¤šæ ¸é—´çš„é€šè®¯é—®é¢˜å·²ç»æˆä¸ºåˆ¶çº¦ç³»ç»Ÿæ€§èƒ½æå‡çš„ä¸»è¦ç“¶é¢ˆã€‚\n\u003c!DOCTYPE html\u003e Responsive Image NoC çš„æ¦‚å¿µæ˜¯ç”± Agarwalï¼ˆ1999 å¹´ï¼‰ã€Guerrier å’Œ Greinerï¼ˆ2000 å¹´ï¼‰ã€Dally å’Œ Towlesï¼ˆ2001 å¹´ï¼‰ã€Benini å’Œ Micheliï¼ˆ2002 å¹´ï¼‰ã€Jantsch å’Œ Tenhunenï¼ˆ2003 å¹´ï¼‰ç­‰äººé€æ­¥æå‡ºçš„ã€‚ç›®å‰ï¼Œå¯¹äº NoC è¿˜æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å®šä¹‰ï¼Œå¤§å¤šæ•° NoC ç ”ç©¶è€…è®¤ä¸º NoC æ˜¯ SoC ç³»ç»Ÿçš„é€šè®¯å­é›†ï¼Œå¹¶ä¸”åº”è¯¥å¼•å…¥äº’è”ç½‘ç»œæŠ€æœ¯æ¥è§£å†³ç‰‡ä¸Šå¤šæ ¸çš„é€šè®¯é—®é¢˜ã€‚\nNoC çš„æ„ä¹‰ è½¬è½½è‡ª^[ç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰æŠ€æœ¯çš„èƒŒæ™¯ã€æ„ä¹‰ä»¥åŠå‘å±•_ç¢ç¢æ€çš„åšå®¢-CSDN åšå®¢]\néšç€å•èŠ¯ç‰‡ä¸Šé›†æˆçš„å¤„ç†å™¨æ ¸æ•°è¶Šæ¥è¶Šå¤šï¼Œç‰‡ä¸Šäº’è¿æ¶æ„ç»å†äº†ä»ä¸“ç”¨äº’è¿çº¿ï¼ŒBusï¼ŒCrossbar åˆ° NoCã€‚NoC å€Ÿé‰´äº†åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿçš„é€šè®¯æ–¹å¼ï¼Œé‡‡ç”¨æ•°æ®è·¯ç”±å’Œåˆ†ç»„äº¤æ¢æŠ€æœ¯æ›¿ä»£ä¼ ç»Ÿçš„æ€»çº¿ç»“æ„ï¼Œä»ä½“ç³»ç»“æ„ä¸Šè§£å†³äº† SoC æ€»çº¿ç»“æ„ç”±äºåœ°å€ç©ºé—´æœ‰é™å¯¼è‡´çš„å¯æ‰©å±•æ€§å·®ï¼Œåˆ†æ—¶é€šè®¯å¼•èµ·çš„é€šè®¯æ•ˆç‡ä½ä¸‹ï¼Œä»¥åŠå…¨å±€æ—¶é’ŸåŒæ­¥å¼•èµ·çš„åŠŸè€—å’Œé¢ç§¯ç­‰é—®é¢˜ã€‚ä¸ä¼ ç»Ÿçš„æ€»çº¿äº’è¿æŠ€æœ¯ç›¸æ¯”ï¼Œç‰‡ä¸Šç½‘ç»œå…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š\nç¬¬ä¸€ï¼Œç½‘ç»œå¸¦å®½ã€‚æ€»çº¿ç»“æ„äº’è¿å¤šä¸ª IP æ ¸ï¼Œå…±äº«ä¸€æ¡æ•°æ®æ€»çº¿ï¼Œå…¶ç¼ºç‚¹æ˜¯åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€å¯¹ IP è¿›è¡Œé€šä¿¡ã€‚éšç€ç³»ç»Ÿè§„æ¨¡çš„é€æ¸å¢å¤§ï¼Œæ€»çº¿ç»“æ„çš„é€šä¿¡æ•ˆç‡å¿…ç„¶æˆä¸ºé™åˆ¶ç³»ç»Ÿæ€§èƒ½æå‡çš„ç“¶é¢ˆã€‚ç‰‡ä¸Šç½‘ç»œå…·æœ‰éå¸¸ä¸°å¯Œçš„ä¿¡é“èµ„æºï¼Œä¸ºç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç½‘ç»œåŒ–çš„é€šä¿¡å¹³å°ã€‚ç½‘ç»œä¸­çš„å¤šä¸ªèŠ‚ç‚¹å¯ä»¥åŒæ—¶åˆ©ç”¨ç½‘ç»œä¸­çš„ä¸åŒç‰©ç†é“¾è·¯è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œæ”¯æŒå¤šä¸ª IP æ ¸å¹¶å‘åœ°è¿›è¡Œæ•°æ®é€šä¿¡ã€‚éšç€ç½‘ç»œè§„æ¨¡çš„å¢å¤§ï¼Œç½‘ç»œä¸Šçš„ä¿¡é“èµ„æºä¹Ÿç›¸åº”å¢å¤šã€‚å› æ­¤ï¼ŒNoC æŠ€æœ¯ç›¸å¯¹äº Bus äº’è¿æŠ€æœ¯å…·æœ‰è¾ƒé«˜çš„å¸¦å®½ï¼Œä»¥åŠæ›´é«˜çš„é€šä¿¡æ•ˆç‡ã€‚å½“å¹¶å‘è¿›è¡Œæ•°æ®é€šä¿¡æ—¶ç½‘ç»œä¼šäº§ç”Ÿç«äº‰ï¼Œå³ä¼šå­˜åœ¨è¯·æ±‚åŒä¸€æ¡ç‰©ç†é“¾è·¯çš„èŠ‚ç‚¹å¯¹ã€‚NoC çš„è·¯ç”±èŠ‚ç‚¹é€šè¿‡åˆ†æ—¶å¤ç”¨ç‰©ç†é“¾è·¯æ¥è§£å†³ç«äº‰ï¼Œä¸ Bus ç»“æ„ç›¸æ¯”ï¼ŒNoC èƒ½å¤Ÿé™ä½ç«äº‰å‘ç”Ÿçš„æ¦‚ç‡ã€‚\nç¬¬äºŒï¼Œå¯æ‰©å±•æ€§å’Œè®¾è®¡æˆæœ¬ã€‚æ€»çº¿ç»“æ„éœ€è¦é’ˆå¯¹ä¸åŒçš„ç³»ç»Ÿéœ€æ±‚å•ç‹¬è¿›è¡Œè®¾è®¡ï¼Œå½“ç³»ç»ŸåŠŸèƒ½æ‰©å±•æ—¶ï¼Œéœ€è¦å¯¹ç°æœ‰çš„è®¾è®¡æ–¹æ¡ˆé‡æ–°è®¾è®¡ï¼Œä»è€Œä¸¥é‡å½±å“è®¾è®¡çš„å‘¨æœŸå’Œèµ„æœ¬æŠ•å…¥ã€‚**NoC ä¸­æ¯ä¸ªè·¯ç”±èŠ‚ç‚¹å’Œæœ¬åœ° IP æ ¸é€šè¿‡ç½‘ç»œæ¥å£ï¼ˆNetworkInterface, NIï¼‰ç›¸è¿ï¼Œå½“ç³»ç»Ÿéœ€è¦å‡çº§æ‰©å±•æ–°åŠŸèƒ½æ—¶ï¼Œåªéœ€è¦å°†æ–°å¢åŠ çš„å¤„ç†å™¨æ ¸é€šè¿‡ç½‘ç»œæ¥å£ NI æ¥å…¥åˆ°ç½‘ç»œä¸­çš„è·¯ç”±èŠ‚ç‚¹å³å¯ï¼Œæ— éœ€é‡æ–°è®¾è®¡ç½‘ç»œã€‚**å› æ­¤ï¼Œç‰‡ä¸Šç½‘ç»œå…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚ç‰‡ä¸Šç½‘ç»œä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç‰‡ä¸Šäº’è¿ç»“æ„ï¼Œèƒ½å¤Ÿæ»¡è¶³ä¸åŒç³»ç»Ÿçš„åº”ç”¨éœ€æ±‚ï¼Œå½“ç½‘ç»œä¸­èŠ‚ç‚¹æ•°é‡å¢åŠ æ—¶ï¼Œä»…éœ€è¦æŒ‰ç…§ç›¸åº”çš„æ‹“æ‰‘ç»“æ„è§„åˆ™ç»§ç»­å¢å¤§ç½‘ç»œçš„è§„æ¨¡å³å¯ï¼Œç¼©çŸ­äº†äº§å“çš„è®¾è®¡å‘¨æœŸï¼ŒèŠ‚çº¦äº†è®¾è®¡æˆæœ¬ã€‚\nç¬¬ä¸‰ï¼ŒåŠŸè€—ã€‚éšç€ SoC è§„æ¨¡çš„ä¸æ–­å¢å¤§ï¼Œæ€»çº¿ä¸Šæ¯æ¬¡ä¿¡æ¯äº¤äº’éƒ½éœ€è¦é©±åŠ¨å…¨å±€äº’è¿çº¿ï¼Œå› æ­¤æ€»çº¿ç»“æ„æ‰€æ¶ˆè€—çš„åŠŸè€—å°†æ˜¾è‘—å¢åŠ ï¼Œå¹¶ä¸”éšç€é›†æˆç”µè·¯å·¥è‰ºçš„ä¸æ–­å‘å±•ï¼Œæƒ³è¦ä¿è¯å…¨å±€æ—¶é’ŸåŒæ­¥ä¹Ÿå°†å˜å¾—éš¾ä»¥å®ç°ã€‚è€Œåœ¨ NoC ä¸­ï¼Œä¿¡æ¯äº¤äº’æ¶ˆè€—çš„åŠŸè€—ä¸è¿›è¡Œé€šè®¯çš„è·¯ç”±èŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»å¯†åˆ‡ç›¸å…³ï¼Œè·ç¦»è¾ƒè¿‘çš„ä¸¤ä¸ªèŠ‚ç‚¹è¿›è¡Œé€šè®¯æ—¶æ¶ˆè€—çš„åŠŸè€—å°±æ¯”è¾ƒä½ã€‚\nç¬¬å››ï¼Œä¿¡å·å®Œæ•´æ€§å’Œä¿¡å·å»¶è¿Ÿã€‚éšç€é›†æˆç”µè·¯ç‰¹å¾å°ºå¯¸çš„ä¸æ–­å‡å°ï¼Œç”µè·¯è§„æ¨¡çš„ä¸æ–­å¢å¤§ï¼Œäº’è¿çº¿çš„å®½åº¦å’Œé—´è·ä¹Ÿåœ¨ä¸æ–­åœ°å‡å°ï¼Œçº¿é—´è€¦åˆç”µå®¹ç›¸åº”å¢å¤§ï¼Œé•¿çš„å…¨å±€å¹¶è¡Œæ€»çº¿ä¼šå¼•èµ·è¾ƒå¤§çš„ä¸²æ‰°å™ªå£°ï¼Œä»è€Œå½±å“ä¿¡å·çš„å®Œæ•´æ€§ä»¥åŠä¿¡å·ä¼ è¾“çš„æ­£ç¡®æ€§ã€‚åŒæ—¶ï¼Œäº’è¿çº¿ä¸Šçš„å»¶è¿Ÿå°†æˆä¸ºå½±å“ä¿¡å·å»¶è¿Ÿçš„ä¸»è¦å› ç´ ï¼Œæ€»çº¿ç»“æ„å…¨å±€äº’è¿çº¿ä¸Šçš„å»¶è¿Ÿå°†å¤§äºä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œä»è€Œä½¿å¾—æ—¶é’Ÿçš„åç§»å¾ˆéš¾ç®¡ç†ã€‚\nç¬¬äº”ï¼Œå…¨å±€åŒæ­¥ã€‚æ€»çº¿ç»“æ„é‡‡ç”¨å…¨å±€åŒæ­¥æ—¶é’Ÿï¼Œéšç€èŠ¯ç‰‡é›†æˆåº¦çš„æé«˜ï¼ŒèŠ¯ç‰‡çš„å·¥ä½œé¢‘ç‡ä¹Ÿåœ¨ä¸æ–­æé«˜ï¼Œåœ¨èŠ¯ç‰‡å†…ä¼šå½¢æˆå¾ˆåºå¤§çš„æ—¶é’Ÿæ ‘ï¼Œå› æ­¤å¾ˆéš¾å®ç°ç‰‡ä¸Šå„ä¸ªæ¨¡å—çš„å…¨å±€åŒæ­¥æ—¶é’Ÿã€‚é‡‡ç”¨æ—¶é’Ÿæ ‘ï¼ˆClock Treeï¼‰ä¼˜åŒ–çš„æ–¹æ³•å¯ä»¥æ”¹å–„ç”±æ—¶é’Ÿç¿»è½¬å¼•èµ·çš„æ—¶é’Ÿåå·®å’Œæ—¶é’ŸæŠ–åŠ¨ï¼Œä½†åŒæ­¥æ—¶é’Ÿç½‘ç»œæ‰€äº§ç”Ÿçš„åŠ¨æ€åŠŸè€—ç”šè‡³å¯è¾¾æ€»åŠŸè€—çš„ 40% ä»¥ä¸Šã€‚ä¸ºäº†æé«˜ç³»ç»Ÿçš„æ—¶é’Ÿé¢‘ç‡ï¼Œåªèƒ½å¯¹å…¨å±€äº’è¿çº¿é‡‡ç”¨åˆ†å¸ƒå¼æµæ°´çº¿ç»“æ„ï¼Œæˆ–è€…é‡‡ç”¨å…¨å±€å¼‚æ­¥å±€éƒ¨åŒæ­¥ï¼ˆGlobal Asynchronous Local Synchronous,GALSï¼‰çš„æ—¶é’Ÿç­–ç•¥ã€‚\n","permalink":"https://lifeislife.cn/posts/noc-net-on-chip-%E6%80%BB%E7%BA%BF%E4%BA%92%E8%81%94%E6%9E%84%E6%9E%B6/","summary":"\u003ch2 id=\"æŠ€æœ¯èƒŒæ™¯\"\u003eæŠ€æœ¯èƒŒæ™¯\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eè½¬è½½è‡ª^[\u003ca href=\"https://blog.csdn.net/pieces_thinking/article/details/77938041\"\u003eç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰æŠ€æœ¯çš„èƒŒæ™¯ã€æ„ä¹‰ä»¥åŠå‘å±•_ç¢ç¢æ€çš„åšå®¢-CSDN åšå®¢\u003c/a\u003e]\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eåœ¨è¿‡å»çš„å‡ åå¹´é‡Œï¼Œé›†æˆç”µè·¯åˆ¶é€ å·¥è‰ºæŠ€æœ¯ã€å°è£…ä¸æµ‹è¯•æŠ€æœ¯ã€è®¾è®¡æ–¹æ³•å­¦å’Œ EDA å·¥å…·ç­‰å¾®ç”µå­ç›¸å…³æŠ€æœ¯å§‹ç»ˆä¿æŒç€å¿«é€Ÿçš„å‘å±•ã€‚æ ¹æ®\u003ca href=\"https://zh.wikipedia.org/zh-sg/%E5%9B%BD%E9%99%85%E5%8D%8A%E5%AF%BC%E4%BD%93%E6%8A%80%E6%9C%AF%E5%8F%91%E5%B1%95%E8%93%9D%E5%9B%BE\"\u003eå›½é™…åŠå¯¼ä½“æŠ€æœ¯å‘å±•è·¯çº¿å›¾\u003c/a\u003eï¼ˆInternational Technology Roadmap for Semiconductors, ITRSï¼‰é¢„æµ‹ï¼Œåˆ° 2024 å¹´ IC åˆ¶é€ æŠ€æœ¯å°†è¾¾åˆ° 2 nmã€‚ä½†æ˜¯ï¼Œå…¨å±€äº’è¿çº¿çš„æ€§èƒ½æå‡ç¨‹åº¦æ˜æ˜¾ä½äºæ™¶ä½“ç®¡æ€§èƒ½æå‡ç¨‹åº¦ã€‚å—åˆ°äºšé˜ˆå€¼æ¼ç”µæµåŠŸè€—ã€åŠ¨æ€åŠŸè€—ã€å™¨ä»¶å¯é æ€§ä»¥åŠå…¨å±€äº’è¿çº¿ç­‰å½±å“ï¼Œ\u003cstrong\u003eé€šè¿‡æå‡å•ä¸ªå¤„ç†å™¨æ ¸çš„æ€§èƒ½æ¥æå‡ç³»ç»Ÿæ•´ä½“æ€§èƒ½å·²å˜å¾—éå¸¸éš¾ä»¥å®ç°\u003c/strong\u003eï¼ŒåŒæ—¶èŠ¯ç‰‡è®¾è®¡çš„éš¾åº¦å’Œå¤æ‚åº¦ä¹Ÿåœ¨è¿›ä¸€æ­¥å¢åŠ ã€‚ç‰‡ä¸Šç³»ç»Ÿï¼ˆSystem on Chip, SoCï¼‰å…·æœ‰é›†æˆåº¦é«˜ã€åŠŸè€—ä½ã€æˆæœ¬ä½ã€ä½“ç§¯å°ç­‰ä¼˜ç‚¹ï¼Œå·²ç»æˆä¸ºè¶…å¤§è§„æ¨¡é›†æˆç”µè·¯ç³»ç»Ÿè®¾è®¡çš„ä¸»æµæ–¹å‘ã€‚éšç€ç‰‡ä¸Šç³»ç»Ÿ SoC çš„åº”ç”¨éœ€æ±‚è¶Šæ¥è¶Šä¸°å¯Œã€è¶Šæ¥è¶Šå¤æ‚ï¼Œç‰‡ä¸Šå¤šæ ¸ MPSoC (MultiprocessorSystem on Chip, MPSoC) å·²ç»æˆä¸ºå‘å±•çš„å¿…ç„¶è¶‹åŠ¿ï¼ŒåŒæ—¶ MPSoC ä¸Šé›†æˆçš„ IP æ ¸æ•°é‡ä¹Ÿå°†ä¼šæŒ‰ç…§æ‘©å°”å®šå¾‹ç»§ç»­å‘å±•ã€‚ç›®å‰ï¼ŒMPSoC å·²ç»é€æ¸åº”ç”¨äºç½‘ç»œé€šä¿¡ã€å¤šåª’ä½“ç­‰åµŒå…¥å¼ç”µå­è®¾å¤‡ä¸­ã€‚åŠå¯¼ä½“å·¥è‰ºæŠ€æœ¯çš„å¿«é€Ÿå‘å±•ä¸ºé›†æˆç”µè·¯è®¾è®¡æä¾›äº†å¾ˆå¤§çš„å‘å±•ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€ç³»åˆ—æ–°çš„é—®é¢˜å’ŒæŒ‘æˆ˜ï¼Œå¦‚èŠ¯ç‰‡çš„æ€§èƒ½ã€åŠŸè€—ã€å¯é æ€§ã€å¯æ‰©å±•æ€§ç­‰ç­‰ã€‚\u003c/p\u003e","title":"NOC(net-on-chip) æ€»çº¿äº’è”æ„æ¶"},{"content":" å‚è€ƒè‡ªPoC : How to build and test ACPI enabled kernel Â· riscv-non-isa/riscv-acpi Wiki\nå‡†å¤‡ç¯å¢ƒåŠå·¥å…·é“¾ å®‰è£… RISC-V å·¥å…·é“¾ï¼Œéœ€ä¸‹è½½åŸå‘è¡Œç‰ˆã€‚å¥½åœ¨ apt å¯ä»¥å®‰è£…ã€‚\nå¦‚æœæŠ¥é”™ï¼šriscv64-linux-gnu-gcc: error: unrecognized command line option â€˜-mno-relaxâ€™; did you mean â€˜-Wno-vlaâ€™?ï¼Œå¤šåŠæ˜¯å·¥å…·é“¾åŸå› ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ–¹æ³•å®‰è£…ï¼ï¼ï¼\nsudo apt remove gcc-riscv64-linux-gnu sudo apt install gcc-8-riscv64-linux-gnu å®‰è£…å¿…è¦çš„ä¸‰æ–¹åº“ï¼Œä»¥ä¸‹ä¸ºUbuntuä¸‹çš„å‘½ä»¤ï¼Œå…¶ä»–å¹³å°å¯ä»¥å‚è€ƒè¿™ä¸ªæ–‡æ¡£ã€‚\nsudo apt install autoconf automake autotools-dev curl libmpc-dev libmpfr-dev libgmp-dev \\ gawk build-essential bison flex texinfo gperf libtool patchutils bc \\ zlib1g-dev libexpat-dev git ä¸‹è½½æºç  å¯èƒ½æ— æ³•ä¸€æ¬¡æ­å»ºæˆåŠŸï¼Œä¸€äº›ç¯å¢ƒå˜é‡ä¼šç»å¸¸ç”¨åˆ°ï¼Œæ‰€ä»¥å¹²è„†æŠŠæ‰€æœ‰ç¯å¢ƒå˜é‡æ”¾åˆ°.bashrcã€‚\nvim ~/.bashrc # æ·»åŠ ä»¥ä¸‹å†…å®¹ export WORK_DIR=~/riscv64-acpi export GCC5_RISCV64_PREFIX=riscv64-unknown-elf- export MAINSPACE=~/riscv64-acpi/tianocore export PACKAGES_PATH=$MAINSPACE/edk2:$MAINSPACE/edk2-platforms export EDK_TOOLS_PATH=$MAINSPACE/edk2/BaseTools é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­ä¸‹è½½å¹¶æ„å»ºæ‰€æœ‰æºä»£ç ã€‚\nsource ~/.bashrc WORK_DIR=$PWD/riscv64-acpi mkdir -p $WORK_DIR cd $WORK_DIR ç„¶åä¸‹è½½æ‰€æœ‰éœ€è¦çš„æºï¼Œå®ƒä»¬æ˜¯ï¼šqemuã€opensbiã€edk2ã€edk2-platformsã€linuxã€‚\nä¸‹è½½åœ°å€æ›´æ¢æˆäº†åŠ é€Ÿé•œåƒæºï¼ŒåŸæ¥åœ°å€ä¸‹è½½å¤ªæ…¢ï¼Œå®¹æ˜“ä¸­æ–­ã€‚ä¸‹è½½åœ°å€æ›´æ¢æˆäº†åŠ é€Ÿé•œåƒæºï¼ŒåŸæ¥åœ°å€ä¸‹è½½å¤ªæ…¢ï¼Œå®¹æ˜“ä¸­æ–­ã€‚æœ‰ä¸¤ä¸ªé¡¹ç›®åŒ…å«å­æ¨¡å—ï¼Œä¸‹è½½å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥--depth=1èˆå¼ƒäº†å¤šä½™çš„æäº¤è®°å½•ã€‚\ngit clone --branch dev-upstream https://hub.fastgit.xyz/ventanamicro/qemu.git qemu git clone --branch dev-upstream https://hub.fastgit.xyz/ventanamicro/opensbi.git opensbi git clone --branch dev-upstream --recurse-submodules --depth=1 https://hub.fastgit.xyz/ventanamicro/edk2.git tianocore/edk2 git clone --branch dev-upstream --recurse-submodules --depth=1 https://hub.fastgit.xyz/ventanamicro/edk2-platforms.git tianocore/edk2-platforms git clone --branch dev-upstream https://hub.fastgit.xyz/ventanamicro/linux.git linux ç¼–è¯‘æ„å»º QEMU cd $WORK_DIR/qemu ./configure --target-list=riscv64-softmmu make -j $(nproc) OPENSBI æ­¤å¤„æˆ‘ä»¬ä½¿ç”¨ä»¥riscv64-unknown-elf-ä¸ºå‰ç¼€çš„ç‰ˆæœ¬ï¼Œåˆ™è¡¨ç¤ºè¯¥ç‰ˆæœ¬GCCå·¥å…·é“¾ä¼šä½¿ç”¨newlibä½œä¸ºCè¿è¡Œåº“ã€‚åŸæ–‡ä½¿ç”¨riscv64-linux-gnu-ï¼Œè¡¨ç¤ºGCCå·¥å…·é“¾ä¼šä½¿ç”¨Linuxçš„Glibcä½œä¸ºCè¿è¡Œåº“ã€‚ä½†æ˜¯æœ¬äººæœªç¼–è¯‘æˆåŠŸã€‚æ•…åé¢ç¼–è¯‘å·¥å…·å‡ä½¿ç”¨riscv64-unknown-elf-ï¼Œä¸åŸæ–‡ä¸åŒã€‚\ncd $WORK_DIR/opensbi make ARCH=riscv CROSS_COMPILE=riscv64-unknown-elf- make PLATFORM=generic EDK2 å›ºä»¶ æ­¤å¤„åŸæ–‡é‡Œè®¾ç½®äº†ä¸€äº›ç¯å¢ƒå˜é‡åœ¨å¼€å¤´æˆ‘ä»¬è®¾ç½®äº†ï¼Œè¯·ä¸è¦é‡æ–°è®¾ç½®ï¼Œå°¤å…¶ä¸èƒ½export WORKSPACE=pwdï¼Œå› ä¸ºä¸æºç è„šæœ¬çš„WORKSPACEå†²çªã€‚\ncd $WORK_DIR/tianocore source edk2/edksetup.sh make -C edk2/BaseTools clean make -C edk2/BaseTools make -C edk2/BaseTools/Source/C source edk2/edksetup.sh BaseTools # åŸæ–‡ä½¿ç”¨ -buildtarget RELEASEã€‚ä½†æ˜¯æç¤º Not supported target RELEASE build -a RISCV64 -b DEBUG -D FW_BASE_ADDRESS=0x80200000 -D EDK2_PAYLOAD_OFFSET -p Platform/Qemu/RiscvVirt/RiscvVirt.dsc -t GCC5 ERROR StoreCurrentConfiguration:7: no such file or directory: /home/user/riscv64-acpi/tianocore/Conf/BuildEnv.sh\nä¸è¦è®¾ç½®export WORKSPACE=pwdï¼ï¼ï¼å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½ä¸å¯è¡Œï¼Œç›´æ¥æŠŠè·¯å¾„å†™æ­»export CONF_PATH=$WORK_DIR/tianocore/edk2/Conf\nuuid/uuid.h: No such file or directory\nsudo apt install uuid-dev Not supported target RELEASE\n# å°†buildå‘½ä»¤æ”¹ä¸ºå¦‚ä¸‹ï¼Œä½¿ç”¨DEBUGç‰ˆæœ¬ã€‚ build -a RISCV64 -b DEBUG -D FW_BASE_ADDRESS=0x80200000 -D EDK2_PAYLOAD_OFFSET -p Platform/Qemu/RiscvVirt/RiscvVirt.dsc -t GCC5 Linux cd $WORK_DIR/linux make ARCH=riscv CROSS_COMPILE=riscv64-unknown-elf- defconfig make ARCH=riscv CROSS_COMPILE=riscv64-unknown-elf- -j $(nproc) Rootfs æ‚¨å¯ä»¥ä½¿ç”¨æ‚¨é€‰æ‹©çš„ä»»ä½• rootfsã€‚æ­¤ç¤ºä¾‹ä½¿ç”¨ buildrootã€‚\næ­¤æ­¥è€—æ—¶è¾ƒä¹…ï¼Œä¸ç½‘ç»œç¯å¢ƒæœ‰å…³ï¼Œå¦‚æœç½‘ç»œä¸å¥½å¯èƒ½æŒ‰å°æ—¶ç®—ã€‚å®¹æ˜“ä¸­æ–­ï¼Œéœ€è¦é‡æ–°ä¸‹è½½ã€‚\ncd $WORK_DIR/ git clone https://hub.fastgit.xyz/buildroot/buildroot.git cd $WORK_DIR/buildroot make qemu_riscv64_virt_defconfig make rootfs-cpio åˆ›å»º EFI åˆ†åŒºå¹¶å¤åˆ¶æ–‡ä»¶ fallocate -l 512M efi.img sgdisk -n 1:34: -t 1:EF00 $WORK_DIR/efi.img sudo losetup -fP $WORK_DIR/efi.img loopdev=`losetup -j $WORK_DIR/efi.img | awk -F: \u0026#39;{print $1}\u0026#39;` efi_part=\u0026#34;$loopdev\u0026#34;p1 sudo mkfs.msdos $efi_part mkdir -p /tmp/mnt sudo mount $efi_part /tmp/mnt/ sudo cp $WORK_DIR/linux/arch/riscv/boot/Image /tmp/mnt/ sudo umount /tmp/mnt sudo losetup -D $loopdev è¿è¡Œ ä½¿ç”¨ virtio-blk ç£ç›˜ åŸæ–‡å‚æ•°-drive file=$WORK_DIR/buildroot/output/images/rootfs.ext2,format=raw,id=hd0éœ€è¦æ›´æ”¹å¦‚ä¸‹ã€‚å› ä¸ºåœ¨ç¼–è¯‘ Rootfs æ—¶çš„å‘½ä»¤æ˜¯make rootfs-cpioæ‰€ä»¥ç”Ÿæˆçš„æ˜¯rootfs.cpioã€‚æ— æ³•æ‰¾åˆ°rootfs.ext2\n$WORK_DIR/qemu/build/qemu-system-riscv64 -nographic \\ -machine virt,aclint=on,aia=aplic-imsic,acpi=on -cpu rv64,sscofpmf=true -smp 8 -m 2G \\ -bios $WORK_DIR/opensbi/build/platform/generic/firmware/fw_jump.elf \\ -kernel $WORK_DIR/tianocore/Build/RiscvVirt/DEBUG_GCC5/FV/RISCVVIRT.fd \\ -drive file=$WORK_DIR/buildroot/output/images/rootfs.cpio,format=raw,id=hd0 \\ -device virtio-blk-device,drive=hd0 \\ -drive file=$WORK_DIR/efi.img,format=raw,id=hd1 \\ -device virtio-blk-device,drive=hd1 \\ -device virtio-net-device,netdev=usernet \\ -netdev user,id=usernet,hostfwd=tcp::9990-:22 ERROR æ— æ³•æ‰¾åˆ°rootfs.ext2\n# å› ä¸ºåœ¨ç¼–è¯‘ Rootfs æ—¶çš„å‘½ä»¤æ˜¯ make rootfs-cpio æ‰€ä»¥ç”Ÿæˆçš„æ˜¯ rootfs.cpio # åŸæ–‡å‚æ•° -drive file=$WORK_DIR/buildroot/output/images/rootfs.ext2,format=raw,id=hd0 \\ # ä¿®æ”¹ä¸º -drive file=$WORK_DIR/buildroot/output/images/rootfs.cpio,format=raw,id=hd0 \\ æ— æ³•æ‰¾åˆ°RISCVVIRT.fd\n# å› ä¸ºç¼–è¯‘ EDK2 å›ºä»¶æ—¶ï¼Œå‚æ•°æ˜¯-b DEBUG ç‰ˆæœ¬ï¼ŒåŸæ–‡æ˜¯ RELEASE ç‰ˆæœ¬ï¼Œè¿™ä¸¤ä¸ªç‰ˆæœ¬è·¯å¾„ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æ‰¾ä¸åˆ° # åŸæ–‡å‚æ•° -kernel $WORK_DIR/tianocore/Build/RiscvVirt/RELEASE_GCC5/FV/RISCVVIRT.fd \\ # ä¿®æ”¹ä¸º -kernel $WORK_DIR/tianocore/Build/RiscvVirt/DEBUG_GCC5/FV/RISCVVIRT.fd \\ At EFI Shell:\nShell\u0026gt; fs0:\\Image root=/dev/vdb console=ttyS0 rootwait earlycon \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨ virtio-scsi ç£ç›˜ $WORK_DIR/qemu/build/qemu-system-riscv64 -nographic \\ -machine virt,aclint=on,aia=aplic-imsic,acpi=on -cpu rv64,ssofpmf=true -smp 8 -m 2G \\ -bios $WORK_DIR/opensbi/build/platform/generic/firmware/fw_jump.elf \\ -kernel $WORK_DIR/tianocore/Build/RiscvVirt/DEBUG_GCC5/FV/RISCVVIRT.fd \\ -device virtio-scsi-pci,id=scsi0,num_queues=4 \\ -device scsi-hd,drive=drive0,bus=scsi0.0,channel=0,scsi-id=0,lun=0 \\ -drive file=$WORK_DIR/buildroot/output/images/rootfs.cpio,format=raw,if=none,id=drive0 \\ -device virtio-scsi-pci,id=scsi1,num_queues=4 \\ -device scsi-hd,drive=drive1,bus=scsi0.0,channel=0,scsi-id=1,lun=0 \\ -drive file=$WORK_DIR/efi.img,format=raw,if=none,id=drive1 \\ -device virtio-net-device,netdev=usernet \\ -netdev user,id=usernet,hostfwd=tcp::9990-:22 At EFI Shell:\nShell\u0026gt; fs0:\\Image root=/dev/sda console=ttyS0 rootwait earlycon ","permalink":"https://lifeislife.cn/posts/%E6%9E%84%E5%BB%BA%E5%92%8C%E6%B5%8B%E8%AF%95risc-v%E6%9E%B6%E6%9E%84%E4%B8%8B%E5%90%AF%E7%94%A8acpi%E7%9A%84%E5%86%85%E6%A0%B8/","summary":"\u003cblockquote\u003e\n\u003cp\u003eå‚è€ƒè‡ª\u003ca href=\"https://github.com/riscv-non-isa/riscv-acpi/wiki/PoC-:-How-to-build-and-test-ACPI-enabled-kernel\"\u003ePoC : How to build and test ACPI enabled kernel Â· riscv-non-isa/riscv-acpi Wiki\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"å‡†å¤‡ç¯å¢ƒåŠå·¥å…·é“¾\"\u003eå‡†å¤‡ç¯å¢ƒåŠå·¥å…·é“¾\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eå®‰è£… RISC-V å·¥å…·é“¾ï¼Œéœ€ä¸‹è½½åŸå‘è¡Œç‰ˆã€‚å¥½åœ¨ apt å¯ä»¥å®‰è£…ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¦‚æœæŠ¥é”™ï¼šriscv64-linux-gnu-gcc: error: unrecognized command line option â€˜-mno-relaxâ€™; did you mean â€˜-Wno-vlaâ€™?ï¼Œå¤šåŠæ˜¯å·¥å…·é“¾åŸå› ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ–¹æ³•å®‰è£…ï¼ï¼ï¼\u003c/p\u003e","title":"æ„å»ºå’Œæµ‹è¯• RISC-V æ¶æ„ä¸‹å¯ç”¨ ACPI çš„å†…æ ¸"},{"content":"é¢„å¤‡çŸ¥è¯† å¼€å§‹è¿™ä¸ªå®éªŒå‰ï¼Œéœ€è¦å­¦ä¹ ã€ŠCSAPP ç¬¬å…­ç« -å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ã€‹çš„ç›¸å…³å†…å®¹ï¼Œä¸ç¼“å­˜ç›¸å…³çš„å†…å®¹ï¼Œæˆ‘ä¹Ÿåšäº†ç›¸å…³çš„CPU Cache é«˜é€Ÿç¼“å­˜å­¦ä¹ è®°å½•å¯ä»¥å‚è€ƒã€‚\nå®éªŒç›¸å…³çš„æ–‡ä»¶å¯ä»¥ä»CS:APP3e, Bryant and O\u0026rsquo;Hallaronä¸‹è½½ã€‚\nå…¶ä¸­ï¼Œ\nREADMEï¼šä»‹ç»å®éªŒç›®çš„å’Œå®éªŒè¦æ±‚ï¼Œä»¥åŠå®éªŒçš„ç›¸å…³æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»åœ¨ 64-bit x86-64 system ä¸Šè¿è¡Œå®éªŒã€‚éœ€è¦å®‰è£… Valgrind å·¥å…·ã€‚ Writeupï¼šå®éªŒæŒ‡å¯¼ã€‚ Release Notesï¼šç‰ˆæœ¬å‘å¸ƒä¿¡æ¯ã€‚ Self-Study Handoutï¼šéœ€è¦ä¸‹è½½çš„å‹ç¼©åŒ…ï¼Œé‡Œé¢åŒ…å«äº†å¾…ä¿®æ”¹çš„æºç æ–‡ä»¶ç­‰ã€‚ ä¸‹è½½ Self-Study Handout å¹¶è§£å‹ï¼Œå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼š\nâ”œâ”€â”€ cachelab.c # ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œå¦‚æ‰“å°è¾“å‡ºç­‰ï¼Œä¸éœ€è¦ä¿®æ”¹ â”œâ”€â”€ cachelab.h # åŒä¸Š â”œâ”€â”€ csim.c # éœ€è¦å®Œå–„çš„ä¸»æ–‡ä»¶ï¼Œéœ€è¦åœ¨è¿™é‡Œæ¨¡æ‹ŸCache â”œâ”€â”€ csim-ref # å·²ç»ç¼–è¯‘å¥½çš„ç¨‹åºï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿçš„Cacheéœ€è¦ä¸è¿™ä¸ªç¨‹åºè¿è¡Œçš„ç»“æœä¿æŒä¸€è‡´ â”œâ”€â”€ driver.py # é©±åŠ¨ç¨‹åºï¼Œè¿è¡Œ test-csim å’Œ test-trans â”œâ”€â”€ Makefile # ç”¨æ¥ç¼–è¯‘csimç¨‹åº â”œâ”€â”€ README # â”œâ”€â”€ test-csim # æµ‹è¯•ç¼“å­˜æ¨¡æ‹Ÿå™¨ â”œâ”€â”€ test-trans.c # æµ‹è¯•è½¬ç½®åŠŸèƒ½ â”œâ”€â”€ tracegen.c # test-trans è¾…åŠ©ç¨‹åº â”œâ”€â”€ traces # test-csim.c ä½¿ç”¨çš„è·Ÿè¸ªæ–‡ä»¶ â”‚ â”œâ”€â”€ dave.trace â”‚ â”œâ”€â”€ long.trace â”‚ â”œâ”€â”€ trans.trace â”‚ â”œâ”€â”€ yi2.trace â”‚ â””â”€â”€ yi.trace â””â”€â”€ trans.c \u003c!DOCTYPE html\u003e Responsive Image Part A â€”â€” Writing A Cache Simulator åœ¨ Part Aï¼Œæˆ‘ä»¬å°†åœ¨ csim.c ä¸­ç¼–å†™ä¸€ä¸ªç¼“å­˜æ¨¡æ‹Ÿå™¨ï¼Œå®ƒå°† valgrind å†…å­˜è·Ÿè¸ªä½œä¸ºè¾“å…¥ï¼Œåœ¨æ­¤è·Ÿè¸ªä¸Šæ¨¡æ‹Ÿé«˜é€Ÿç¼“å­˜çš„å‘½ä¸­/æœªå‘½ä¸­è¡Œä¸ºï¼Œå¹¶è¾“å‡ºå‘½ä¸­ã€æœªå‘½ä¸­å’Œé©±é€çš„æ€»æ•°ã€‚\nè¿™é‡Œçš„è¾“å…¥ç”±valgrindé€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆçš„ï¼š\nvalgrind --log-fd=1 --tool=lackey -v --trace-mem=yes ls -l --log-fd=1è¡¨ç¤ºå°†è¾“å‡ºè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼› --tool=lackeyï¼šLackey æ˜¯ä¸€ä¸ªç®€å•çš„ Valgrind å·¥å…·ï¼Œå¯è¿›è¡Œå„ç§åŸºæœ¬ç¨‹åºæµ‹é‡ï¼› --trace-mem=yesï¼šLackey çš„ä¸€ä¸ªå‚æ•°ï¼Œå¯ç”¨åï¼ŒLackey ä¼šæ‰“å°ç¨‹åºå‡ ä¹æ‰€æœ‰å†…å­˜è®¿é—®çš„å¤§å°å’Œåœ°å€ï¼› ls -lï¼šæ˜¯ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ã€‚ ä¹Ÿå°±æ˜¯æ£€æµ‹ls -lç¨‹åºåœ¨è¿è¡Œæ—¶è®¿é—®å†…å­˜çš„æƒ…å†µã€‚\næ‰§è¡Œç»“æœåƒä¸‹é¢çš„å½¢å¼ï¼š\n# [space]operation address,size I 0400639c,4 L 1ffeffec00,8 I 040063a0,2 S 1ffeffea50,8 I 040063a2,4 L 1ffeffebf0,8 I 040063a6,3 I 040063a9,3 L 1ffeffebf8,4 I 040063ac,7 æ“ä½œå­—æ®µè¡¨ç¤ºå†…å­˜è®¿é—®çš„ç±»å‹ï¼šIè¡¨ç¤ºæŒ‡ä»¤åŠ è½½ï¼ŒLè¡¨ç¤ºæ•°æ®åŠ è½½ï¼ŒSè¡¨ç¤ºæ•°æ®å­˜å‚¨ï¼ŒMè¡¨ç¤ºæ•°æ®ä¿®æ”¹ï¼ˆå³ï¼Œæ•°æ®åŠ è½½åè·Ÿæ•°æ®å­˜å‚¨ï¼‰ ï¼‰ã€‚æ¯ä¸ªIä¹‹å‰éƒ½æ²¡æœ‰ç©ºæ ¼ã€‚æ¯ä¸ªMã€Lå’ŒSä¹‹å‰æ€»æ˜¯æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚åœ°å€å­—æ®µæŒ‡å®šä¸€ä¸ª 64 ä½çš„åå…­è¿›åˆ¶å†…å­˜åœ°å€ã€‚ size å­—æ®µæŒ‡å®šæ“ä½œè®¿é—®çš„å­—èŠ‚æ•°ã€‚\näº†è§£è¿™äº›åŸºç¡€åï¼Œæˆ‘ä»¬æœ€ä¸»è¦çš„æ˜¯è¦æ˜ç¡®ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºå…·ä½“æœ‰å“ªäº›å‚æ•°ï¼Œæ€ä¹ˆæ‰§è¡Œçš„ã€‚csim-refæ˜¯å·²ç»å®Œæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®ƒçš„ç”¨æ³•æ˜¯\n./csim-ref [-hv] -s \u0026lt;s\u0026gt; -E \u0026lt;E\u0026gt; -b \u0026lt;b\u0026gt; -t \u0026lt;tracefile\u0026gt; -hï¼šæ‰“å°å¸®åŠ©ä¿¡æ¯ï¼› -vï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼Œå¦‚æ˜¯ Iï¼ŒL è¿˜æ˜¯ Mï¼› -s \u0026lt;s\u0026gt;ï¼šç»„ç´¢å¼•ä½æ•°ï¼ˆ$S=2^{s}$ç»„ä¸ªæ•°ï¼‰ï¼› -E \u0026lt;E\u0026gt;ï¼šå…³è”æ€§ï¼ˆæ¯ç»„çš„è¡Œæ•°ï¼‰ï¼› -b \u0026lt;b\u0026gt;ï¼šå—ä½æ•°ï¼ˆ$B=2^{b}$ æ˜¯å—å¤§å°ï¼‰ï¼› -t \u0026lt;tracefile\u0026gt;ï¼švalgrind ç”Ÿæˆçš„æ–‡ä»¶ï¼› å¦‚ï¼š\n./csim-ref -s 4 -E 1 -b 4 -t traces/yi.trace hits:4 misses:5 evictions:3 å¦‚æœæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯å¯ä»¥æ‰§è¡Œï¼š\n./csim-ref -v -s 4 -E 1 -b 4 -t traces/yi.trace L 10,1 miss M 20,1 miss hit L 22,1 hit S 18,1 hit L 110,1 miss eviction L 210,1 miss eviction M 12,1 miss eviction hit hits:4 misses:5 evictions:3 æˆ‘ä»¬çš„ç›®çš„å°±æ˜¯è¦å®Œå–„csim.cï¼Œä½¿å…¶èƒ½å¤Ÿä½¿ç”¨ä¸Šé¢ç›¸åŒçš„å‚æ•°ï¼Œå¾—åˆ°ä¸csim-refç›¸åŒçš„ç»“æœã€‚ Cache Lab Implementa/on and Blockingè¿™ä»½ PPT é‡Œæœ‰ä¸€äº›å®éªŒæŒ‡å¯¼ï¼Œå¯ä»¥å‚è€ƒã€‚ é¦–å…ˆéœ€è¦è§£å†³çš„å°±æ˜¯å¦‚ä½•å¤„ç†è¾“å…¥çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ PPT é‡Œæåˆ°çš„getoptåº“æ¥è§£å†³ã€‚\n#include \u0026lt;stdbool.h\u0026gt; #include \u0026lt;string.h\u0026gt; #include \u0026#34;cachelab.h\u0026#34; #include \u0026#34;getopt.h\u0026#34; static int S; // ç»„ä¸ªæ•° static int s; // ç»„å çš„ä½æ•° static int E; static int B; static int hits = 0; static int misses = 0; static int evictions = 0; typedef struct _CacheLine { unsigned tag; struct _CacheLine *next; struct _CacheLine *prev; } CacheLine; typedef struct _Cache { CacheLine *head; CacheLine *tail; int *size; } Cache; static Cache *cache; void parse_option(int argc, char **argv, char **fileName) { int option; while ((option = getopt(argc, argv, \u0026#34;s:E:b:t:\u0026#34;)) != -1) { switch (option) { case \u0026#39;s\u0026#39;: s = atoi(optarg); // ä¼ å…¥çš„å‚æ•°ä¸ºå ç”¨çš„bitï¼Œéœ€è¦è½¬æ¢ä¸º10è¿›åˆ¶ S = 1 \u0026lt;\u0026lt; s; case \u0026#39;E\u0026#39;: E = atoi(optarg); case \u0026#39;b\u0026#39;: B = atoi(optarg); case \u0026#39;t\u0026#39;: strcpy(*fileName, optarg); } } } void initialize_cache() { cache = malloc(S * sizeof(*cache)); for (int i = 0; i \u0026lt; S; i++) { cache[i].head = malloc(sizeof(CacheLine)); cache[i].tail = malloc(sizeof(CacheLine)); cache[i].head-\u0026gt;next = cache[i].tail; cache[i].tail-\u0026gt;prev = cache[i].head; (cache[i].size) = (int *)malloc(sizeof(int)); *(cache[i].size) = 0; } } /*! * @breif Add a new CacheLine to the Cache first line * @param nodeToDel CacheLine to be deleted * @param curLru Current Cache */ void insert_first_line(CacheLine *node, Cache *curLru) { node-\u0026gt;next = curLru-\u0026gt;head-\u0026gt;next; node-\u0026gt;prev = curLru-\u0026gt;head; curLru-\u0026gt;head-\u0026gt;next-\u0026gt;prev = node; curLru-\u0026gt;head-\u0026gt;next = node; *(curLru-\u0026gt;size) = *(curLru-\u0026gt;size) + 1; } void evict(CacheLine *nodeToDel, Cache *curLru) { nodeToDel-\u0026gt;next-\u0026gt;prev = nodeToDel-\u0026gt;prev; nodeToDel-\u0026gt;prev-\u0026gt;next = nodeToDel-\u0026gt;next; *(curLru-\u0026gt;size) = *(curLru-\u0026gt;size) - 1; } void update(unsigned address) { unsigned int mask = 0xFFFFFFFF; unsigned int maskSet = mask \u0026gt;\u0026gt; (32 - s); // å–å‡ºç»„ç´¢å¼• unsigned int targetSet = ((maskSet) \u0026amp; (address \u0026gt;\u0026gt; B)); // å–å‡ºæ ‡è®° unsigned int targetTag = address \u0026gt;\u0026gt; (s + B); Cache curLru = cache[targetSet]; // æŸ¥æ‰¾æ˜¯å¦å­˜ä¸å½“å‰æ ‡è®°ä½ç›¸åŒçš„ç¼“å­˜è¡Œ CacheLine *cur = curLru.head-\u0026gt;next; bool found = 0; while (cur != curLru.tail) { if (cur-\u0026gt;tag == targetTag) { found = true; break; } cur = cur-\u0026gt;next; } if (found) { hits++; evict(cur, \u0026amp;curLru); insert_first_line(cur, \u0026amp;curLru); printf(\u0026#34;\u0026gt; hit!, set: %d \\n\u0026#34;, targetSet); } else { CacheLine *newNode = malloc(sizeof(CacheLine)); newNode-\u0026gt;tag = targetTag; if (*(curLru.size) == E) { // å¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ™åˆ é™¤æœ€åä¸€ä¸ªç¼“å­˜è¡Œ evict(curLru.tail-\u0026gt;prev, \u0026amp;curLru); insert_first_line(newNode, \u0026amp;curLru); evictions++; misses++; printf(\u0026#34;\u0026gt; evic \u0026amp;\u0026amp; miss set:%d\\n\u0026#34;, targetSet); } else { misses++; insert_first_line(newNode, \u0026amp;curLru); printf(\u0026#34;\u0026gt; miss %d\\n\u0026#34;, targetSet); } } } void cache_simulate(char *fileName) { // åˆ†é…å¹¶åˆå§‹åŒ–Sç»„ç¼“å­˜ initialize_cache(); FILE *file = fopen(fileName, \u0026#34;r\u0026#34;); char op; unsigned int address; int size; while (fscanf(file, \u0026#34; %c %x,%d\u0026#34;, \u0026amp;op, \u0026amp;address, \u0026amp;size) \u0026gt; 0) { printf(\u0026#34;%c, %x %d\\n\u0026#34;, op, address, size); switch (op) { case \u0026#39;L\u0026#39;: update(address); break; case \u0026#39;M\u0026#39;: update(address); case \u0026#39;S\u0026#39;: update(address); break; } } } int main(int argc, char **argv) { char *fileName = malloc(100 * sizeof(char)); parse_option(argc, argv, \u0026amp;fileName); cache_simulate(fileName); printSummary(hits, misses, evictions); return 0; } ","permalink":"https://lifeislife.cn/posts/csapp-lab-cache-lab/","summary":"\u003ch2 id=\"é¢„å¤‡çŸ¥è¯†\"\u003eé¢„å¤‡çŸ¥è¯†\u003c/h2\u003e\n\u003cp\u003eå¼€å§‹è¿™ä¸ªå®éªŒå‰ï¼Œéœ€è¦å­¦ä¹ ã€ŠCSAPP ç¬¬å…­ç« -å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ã€‹çš„ç›¸å…³å†…å®¹ï¼Œä¸ç¼“å­˜ç›¸å…³çš„å†…å®¹ï¼Œæˆ‘ä¹Ÿåšäº†ç›¸å…³çš„\u003ca href=\"https://dunky-z.github.io/2022/07/10/CPU-Cache%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/\"\u003eCPU Cache é«˜é€Ÿç¼“å­˜å­¦ä¹ è®°å½•\u003c/a\u003eå¯ä»¥å‚è€ƒã€‚\u003c/p\u003e\n\u003cp\u003eå®éªŒç›¸å…³çš„æ–‡ä»¶å¯ä»¥ä»\u003ca href=\"http://csapp.cs.cmu.edu/3e/labs.html\"\u003eCS:APP3e, Bryant and O\u0026rsquo;Hallaron\u003c/a\u003eä¸‹è½½ã€‚\u003c/p\u003e","title":"CSAPP-LAB-Cache Lab"},{"content":"å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„ \u003c!DOCTYPE html\u003e Responsive Image ä» Cacheã€å†…å­˜ï¼Œåˆ° SSD å’Œ HDD ç¡¬ç›˜ï¼Œä¸€å°ç°ä»£è®¡ç®—æœºä¸­ï¼Œå°±ç”¨ä¸Šäº†æ‰€æœ‰è¿™äº›å­˜å‚¨å™¨è®¾å¤‡ã€‚å…¶ä¸­ï¼Œå®¹é‡è¶Šå°çš„è®¾å¤‡é€Ÿåº¦è¶Šå¿«ï¼Œè€Œä¸”ï¼ŒCPU å¹¶ä¸æ˜¯ç›´æ¥å’Œæ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡æ‰“äº¤é“ï¼Œè€Œæ˜¯æ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡ï¼Œåªå’Œå®ƒç›¸é‚»çš„å­˜å‚¨è®¾å¤‡æ‰“äº¤é“ã€‚æ¯”å¦‚ï¼ŒCPUCache æ˜¯ä»å†…å­˜é‡ŒåŠ è½½è€Œæ¥çš„ï¼Œæˆ–è€…éœ€è¦å†™å›å†…å­˜ï¼Œå¹¶ä¸ä¼šç›´æ¥å†™å›æ•°æ®åˆ°ç¡¬ç›˜ï¼Œä¹Ÿä¸ä¼šç›´æ¥ä»ç¡¬ç›˜åŠ è½½æ•°æ®åˆ° CPUCache ä¸­ï¼Œè€Œæ˜¯å…ˆåŠ è½½åˆ°å†…å­˜ï¼Œå†ä»å†…å­˜åŠ è½½åˆ° Cache ä¸­ã€‚\nè¿™æ ·ï¼Œå„ä¸ªå­˜å‚¨å™¨åªå’Œç›¸é‚»çš„ä¸€å±‚å­˜å‚¨å™¨æ‰“äº¤é“ï¼Œå¹¶ä¸”éšç€ä¸€å±‚å±‚å‘ä¸‹ï¼Œå­˜å‚¨å™¨çš„å®¹é‡é€å±‚å¢å¤§ï¼Œè®¿é—®é€Ÿåº¦é€å±‚å˜æ…¢ï¼Œè€Œå•ä½å­˜å‚¨æˆæœ¬ä¹Ÿé€å±‚ä¸‹é™ï¼Œä¹Ÿå°±æ„æˆäº†æˆ‘ä»¬æ—¥å¸¸æ‰€è¯´çš„å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ã€‚\né«˜é€Ÿç¼“å­˜ ç¼“å­˜ä¸æ˜¯ CPU çš„ä¸“å±åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå®ƒå½“æˆä¸€ç§ç­–ç•¥ï¼Œä»»ä½•æ—¶å€™æƒ³è¦å¢åŠ æ•°æ®ä¼ è¾“æ€§èƒ½ï¼Œéƒ½å¯ä»¥é€šè¿‡åŠ ä¸€å±‚ç¼“å­˜è¯•è¯•ã€‚\nå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„çš„ä¸­å¿ƒæ€æƒ³æ˜¯ï¼Œå¯¹äºæ¯ä¸ª$k$ï¼Œä½äº$k$å±‚çš„æ›´å¿«æ›´å°çš„å­˜å‚¨è®¾å¤‡ä½œä¸ºä½äº$k+1$å±‚çš„æ›´å¤§æ›´æ…¢çš„å­˜å‚¨è®¾å¤‡çš„ç¼“å­˜ã€‚ä¸‹å›¾å±•ç¤ºäº†å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ä¸­ç¼“å­˜çš„ä¸€èˆ¬æ€§æ¦‚å¿µã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ•°æ®æ€»æ˜¯ä»¥å—blockä¸ºå•ä½ï¼Œåœ¨å±‚ä¸å±‚ä¹‹é—´æ¥å›å¤åˆ¶ã€‚\nè¯´å›é«˜é€Ÿç¼“å­˜ï¼ŒæŒ‰ç…§æ‘©å°”å®šå¾‹ï¼ŒCPU çš„è®¿é—®é€Ÿåº¦æ¯ 18 ä¸ªæœˆä¾¿ä¼šç¿»ä¸€ç¿»ï¼Œç›¸å½“äºæ¯å¹´å¢é•¿ 60%ã€‚å†…å­˜çš„è®¿é—®é€Ÿåº¦è™½ç„¶ä¸æ–­å¢é•¿ï¼Œå´è¿œæ²¡æœ‰é‚£ä¹ˆå¿«ï¼Œæ¯å¹´åªå¢é•¿ 7% å·¦å³ã€‚è¿™æ ·å°±å¯¼è‡´ CPU æ€§èƒ½å’Œå†…å­˜è®¿é—®çš„å·®è·ä¸æ–­æ‹‰å¤§ã€‚ä¸ºäº†å¼¥è¡¥ä¸¤è€…ä¹‹é—´å·®å¼‚ï¼Œç°ä»£ CPU å¼•å…¥äº†é«˜é€Ÿç¼“å­˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image CPU çš„è¯»ï¼ˆloadï¼‰å®è´¨ä¸Šå°±æ˜¯ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®åˆ°å¯„å­˜å™¨ï¼ˆregisterï¼‰é‡Œï¼Œåœ¨å¤šçº§ç¼“å­˜çš„æ¶æ„ä¸­ï¼Œå¦‚æœç¼“å­˜ä¸­æ‰¾ä¸åˆ°æ•°æ®ï¼ˆCache missï¼‰ï¼Œå°±ä¼šå±‚å±‚è¯»å–äºŒçº§ç¼“å­˜ä¸‰çº§ç¼“å­˜ï¼Œä¸€æ—¦æ‰€æœ‰çš„ç¼“å­˜é‡Œéƒ½æ‰¾ä¸åˆ°å¯¹åº”çš„æ•°æ®ï¼Œå°±è¦å»å†…å­˜é‡Œå¯»å€äº†ã€‚å¯»å€åˆ°çš„æ•°æ®é¦–å…ˆæ”¾åˆ°å¯„å­˜å™¨é‡Œï¼Œå…¶å‰¯æœ¬ä¼šé©»ç•™åˆ° CPU çš„ç¼“å­˜ä¸­ã€‚\nCPU çš„å†™ï¼ˆstoreï¼‰ä¹Ÿæ˜¯é’ˆå¯¹ç¼“å­˜ä½œå†™å…¥ã€‚å¹¶ä¸ä¼šç›´æ¥å’Œå†…å­˜æ‰“äº¤é“ï¼Œè€Œæ˜¯é€šè¿‡æŸç§æœºåˆ¶å®ç°æ•°æ®ä»ç¼“å­˜åˆ°å†…å­˜çš„å†™å›ï¼ˆwrite backï¼‰ã€‚\nç¼“å­˜åˆ°åº•å¦‚ä½•ä¸ CPU å’Œä¸»å­˜æ•°æ®äº¤æ¢çš„ï¼ŸCPU å¦‚ä½•ä»ç¼“å­˜ä¸­è¯»å†™æ•°æ®çš„ï¼Ÿç¼“å­˜ä¸­æ²¡æœ‰è¯»çš„æ•°æ®ï¼Œæˆ–è€…ç¼“å­˜å†™æ»¡äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å…ˆä» CPU å¦‚ä½•è¯»å–æ•°æ®è¯´èµ·ã€‚\nç¼“å­˜è¯»å– CPU å‘èµ·ä¸€ä¸ªè¯»å–è¯·æ±‚åï¼Œè¿”å›çš„ç»“æœä¼šæœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š\nç¼“å­˜å‘½ä¸­ (cache hit) è¦è¯»å–çš„æ•°æ®åˆšå¥½åœ¨ç¼“å­˜ä¸­ï¼Œå«åšç¼“å­˜å‘½ä¸­ã€‚ ç¼“å­˜ä¸å‘½ä¸­ (cache miss) å‘é€ç¼“å­˜ä¸å‘½ä¸­ï¼Œç¼“å­˜å°±å¾—æ‰§è¡Œä¸€ç›´æ”¾ç½®ç­–ç•¥(placement policy)ï¼Œæ¯”å¦‚ LRUã€‚æ¥å†³å®šä»ä¸»å­˜ä¸­å–å‡ºçš„æ•°æ®æ”¾åˆ°å“ªé‡Œã€‚ å¼ºåˆ¶æ€§ä¸å‘½ä¸­(compulsory miss)/å†·ä¸å‘½ä¸­(cold miss)ï¼šç¼“å­˜ä¸­æ²¡æœ‰è¦è¯»å–çš„æ•°æ®ï¼Œéœ€è¦ä»ä¸»å­˜è¯»å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®æ”¾å…¥ç¼“å­˜ã€‚ å†²çªä¸å‘½ä¸­(conflict miss)ï¼šç¼“å­˜ä¸­æœ‰è¦è¯»çš„æ•°æ®ï¼Œåœ¨é‡‡å–æ”¾ç½®ç­–ç•¥æ—¶ï¼Œä»ä¸»å­˜ä¸­å–æ•°æ®æ”¾åˆ°ç¼“å­˜æ—¶å‘ç”Ÿäº†å†²çªï¼Œè¿™å«åšå†²çªä¸å‘½ä¸­ã€‚ é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨ç»„ç»‡ç»“æ„ æ•´ä¸ª Cache è¢«åˆ’åˆ†ä¸º 1 ä¸ªæˆ–å¤šä¸ªç»„ (Set)ï¼Œ$S$ è¡¨ç¤ºç»„çš„ä¸ªæ•°ã€‚æ¯ä¸ªç»„åŒ…å« 1 ä¸ªæˆ–å¤šä¸ªç¼“å­˜è¡Œ(Cache line)ï¼Œ$E$ è¡¨ç¤ºä¸€ä¸ªç»„ä¸­ç¼“å­˜è¡Œçš„è¡Œæ•°ã€‚æ¯ä¸ªç¼“å­˜è¡Œç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šæœ‰æ•ˆä½(valid)ï¼Œæ ‡è®°ä½ï¼ˆtagï¼‰ï¼Œæ•°æ®å—ï¼ˆcache blockï¼‰ã€‚\næœ‰æ•ˆä½ï¼šè¯¥ä½ç­‰äº 1ï¼Œè¡¨ç¤ºè¿™ä¸ªè¡Œæ•°æ®æœ‰æ•ˆã€‚ æ ‡è®°ä½ï¼šå”¯ä¸€çš„æ ‡è¯†äº†å­˜å‚¨åœ¨é«˜é€Ÿç¼“å­˜ä¸­çš„å—ï¼Œæ ‡è¯†ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ã€‚ æ•°æ®å—ï¼šä¸€éƒ¨åˆ†å†…å­˜æ•°æ®çš„å‰¯æœ¬ã€‚ \u003c!DOCTYPE html\u003e Responsive Image Cache çš„ç»“æ„å¯ä»¥ç”±å…ƒç»„$(S,E,B,m)$è¡¨ç¤ºã€‚ä¸åŒ…æ‹¬æœ‰æ•ˆä½å’Œæ ‡è®°ä½ã€‚Cache çš„å¤§å°ä¸º $C=S \\times E \\times B$.\næ¥ä¸‹æ¥çœ‹çœ‹ Cache æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå½“ CPU æ‰§è¡Œæ•°æ®åŠ è½½æŒ‡ä»¤ï¼Œä»å†…å­˜åœ°å€ A è¯»å–æ•°æ®æ—¶ï¼Œæ ¹æ®å­˜å‚¨å™¨å±‚æ¬¡åŸç†ï¼Œå¦‚æœ Cache ä¸­ä¿å­˜ç€ç›®æ ‡æ•°æ®çš„å‰¯æœ¬ï¼Œé‚£ä¹ˆå°±ç«‹å³å°†æ•°æ®è¿”å›ç»™ CPUã€‚é‚£ä¹ˆ Cache å¦‚ä½•çŸ¥é“è‡ªå·±ä¿å­˜äº†ç›®æ ‡æ•°æ®çš„å‰¯æœ¬å‘¢ï¼Ÿ\nå‡è®¾ç›®æ ‡åœ°å€çš„æ•°æ®é•¿åº¦ä¸º$m$ä½ï¼Œè¿™ä¸ªåœ°å€è¢«å‚æ•° $S$ å’Œ $B$ åˆ†æˆäº†ä¸‰ä¸ªå­—æ®µï¼š\n\u003c!DOCTYPE html\u003e Responsive Image é¦–å…ˆé€šè¿‡é•¿åº¦ä¸º$s$çš„ç»„ç´¢å¼•ï¼Œç¡®å®šç›®æ ‡æ•°æ®ä¿å­˜åœ¨å“ªä¸€ä¸ªç»„ (Set) ä¸­ï¼Œå…¶æ¬¡é€šè¿‡é•¿åº¦ä¸º$t$çš„æ ‡è®°ï¼Œç¡®å®šåœ¨å“ªä¸€è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶æœ‰æ•ˆä½å¿…é¡»ç­‰äº 1ï¼Œæœ€åæ ¹æ®é•¿åº¦ä¸º$b$çš„å—åç§»ï¼Œæ¥ç¡®å®šç›®æ ‡æ•°æ®åœ¨æ•°æ®å—ä¸­çš„ç¡®åˆ‡ä½ç½®ã€‚\nQï¼šæ—¢ç„¶è¯»å– Cache ç¬¬ä¸€æ­¥æ˜¯ç»„é€‰æ‹©ï¼Œä¸ºä»€ä¹ˆä¸ç”¨é«˜ä½ä½œä¸ºç»„ç´¢å¼•ï¼Œè€Œä½¿ç”¨ä¸­é—´çš„ä¸ºä½œä¸ºç»„ç´¢å¼•ï¼Ÿ Aï¼šå¦‚æœä½¿ç”¨äº†é«˜ä½ä½œç´¢å¼•ï¼Œé‚£ä¹ˆä¸€äº›è¿ç»­çš„å†…å­˜å—å°±ä¼šæ˜ å°„åˆ°ç›¸åŒçš„é«˜é€Ÿç¼“å­˜å—ã€‚å¦‚å›¾å‰å››ä¸ªå—æ˜ å°„åˆ°ç¬¬ä¸€ä¸ªç¼“å­˜ç»„ï¼Œç¬¬äºŒä¸ªå››ä¸ªå—æ˜ å°„åˆ°ç¬¬äºŒä¸ªç»„ï¼Œä¾æ¬¡ç±»æ¨ã€‚å¦‚æœä¸€ä¸ªç¨‹åºæœ‰è‰¯å¥½çš„ç©ºé—´å±€éƒ¨æ€§ï¼Œé¡ºåºæ‰«æä¸€ä¸ªæ•°ç»„çš„å…ƒç´ ï¼Œé‚£ä¹ˆåœ¨ä»»ä½•æ—¶å€™ï¼Œç¼“å­˜ä¸­éƒ½åªä¿å­˜åœ¨ä¸€ä¸ªå—å¤§å°çš„æ•°ç»„å†…å®¹ã€‚è¿™æ ·å¯¹ç¼“å­˜çš„ä½¿ç”¨ç‡å¾ˆä½ã€‚ç›¸æ¯”è€Œè¨€ï¼Œå¦‚æœä½¿ç”¨ä¸­é—´çš„ä½ä½œä¸ºç»„ç´¢å¼•ï¼Œé‚£ä¹ˆç›¸é‚»çš„å—æ€»æ˜¯æ˜ å°„åˆ°ä¸åŒçš„ç»„ï¼Œå›¾ä¸­çš„æƒ…å†µèƒ½å¤Ÿå­˜æ”¾æ•´ä¸ªå¤§å°çš„æ•°ç»„ç‰‡ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ Direct Mapped Cache æ ¹æ®æ¯ä¸ªç»„çš„ç¼“å­˜è¡Œæ•° $E$ çš„ä¸åŒï¼ŒCache è¢«åˆ†ä¸ºä¸åŒçš„ç±»ã€‚æ¯ä¸ªç»„åªæœ‰ä¸€è¡Œ$E=1$çš„é«˜é€Ÿç¼“å­˜è¢«ç§°ä¸ºç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜(direct-mapped cache)ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å½“ä¸€æ¡åŠ è½½æŒ‡ä»¤æŒ‡ç¤º CPU ä»ä¸»å­˜åœ°å€ A ä¸­è¯»å–ä¸€ä¸ªå­— w æ—¶ï¼Œä¼šå°†è¯¥ä¸»å­˜åœ°å€ A å‘é€åˆ°é«˜é€Ÿç¼“å­˜ä¸­ï¼Œåˆ™é«˜é€Ÿç¼“å­˜ä¼šæ ¹æ®ç»„é€‰æ‹©ï¼Œè¡ŒåŒ¹é…å’Œå­—æŠ½å–ä¸‰æ­¥æ¥åˆ¤æ–­åœ°å€ A æ˜¯å¦å‘½ä¸­ã€‚\nç»„é€‰æ‹©(set selection)ï¼šæ ¹æ®ç»„ç´¢å¼•å€¼æ¥ç¡®å®šå±äºå“ªä¸€ä¸ªç»„ï¼Œå¦‚å›¾ä¸­ç´¢å¼•é•¿åº¦ä¸º 5 ä½ï¼Œå¯ä»¥æ£€ç´¢ 32 ä¸ªç»„ ($2^5=32$)ã€‚å½“$s=0$æ—¶ï¼Œæ­¤æ—¶ç»„é€‰æ‹©çš„ç»“æœä¸ºset 0ï¼Œå½“$s=1$æ—¶ï¼Œæ­¤æ—¶ç»„é€‰æ‹©çš„ç»“æœä¸ºset 1ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¡ŒåŒ¹é… (line match)ï¼šé¦–å…ˆçœ‹ç¼“å­˜è¡Œçš„æœ‰æ•ˆä½ï¼Œæ­¤æ—¶æœ‰æ•ˆä½ä¸º 1ï¼Œè¡¨ç¤ºå½“å‰æ•°æ®æœ‰æ•ˆã€‚ç„¶åå¯¹æ¯”ç¼“å­˜è¡Œçš„æ ‡è®°0110ä¸åœ°å€ä¸­çš„æ ‡è®°0110æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡æ•°æ®åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰ã€‚å¦‚æœä¸ä¸€è‡´æˆ–è€…æœ‰æ•ˆä½ä¸º 0ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡æ•°æ®ä¸åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ï¼ˆç¼“å­˜ä¸å‘½ä¸­ï¼‰ã€‚å¦‚æœå‘½ä¸­ï¼Œå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥å­—æŠ½å–ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å­—æŠ½å– (word extraction)ï¼šæ ¹æ®åç§»é‡$b$ç¡®å®šç›®æ ‡æ•°æ®çš„ç¡®åˆ‡ä½ç½®ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä»æ•°æ®å—çš„ä»€ä¹ˆä½ç½®å¼€å§‹æŠ½å–ä½ç½®ã€‚å¦‚å½“åç§»å—ç­‰äº100æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡æ•°æ®èµ·å§‹åœ°å€ä½äºå­—èŠ‚ 4 å¤„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šæ¸…é™¤è¿™ä¸ªè¿‡ç¨‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ï¼Œæè¿°ä¸º$(S,E,B,m) = (4,1,2,4)$ã€‚æ¢å¥è¯è¯´ï¼Œé«˜é€Ÿç¼“å­˜æœ‰ 4 ä¸ªç»„ï¼Œæ¯ä¸ªç»„ 1 è¡Œï¼Œæ¯ä¸ªæ•°æ®å— 2 ä¸ªå­—èŠ‚ï¼Œåœ°å€é•¿åº¦ä¸º 4 ä½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œ8 ä¸ªå†…å­˜å—ï¼Œä½†åªæœ‰ 4 ä¸ªé«˜é€Ÿç¼“å­˜ç»„ï¼Œæ‰€ä»¥ä¼šæœ‰å¤šä¸ªå—æ˜ å°„åˆ°åŒä¸€ä¸ªé«˜é€Ÿç¼“å­˜ç»„ä¸­ã€‚ä¾‹å¦‚ï¼Œå— 0 å’Œå— 4 éƒ½ä¼šè¢«æ˜ å°„åˆ°ç»„ 0ã€‚\nä¸‹é¢æˆ‘ä»¬æ¥æ¨¡æ‹Ÿå½“ CPU æ‰§è¡Œä¸€ç³»åˆ—è¯»çš„æ—¶å€™ï¼Œé«˜é€Ÿç¼“å­˜çš„æ‰§è¡Œæƒ…å†µï¼Œæˆ‘ä»¬å‡è®¾æ¯æ¬¡ CPU è¯» 1 ä¸ªå­—èŠ‚çš„å­—ã€‚\nè¯»åœ°å€ 0(0000) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¯»åœ°å€ 1(0001) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¯»åœ°å€ 13(1101) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¯»åœ°å€ 8(1000) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¯»åœ°å€ 0(0000) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image ç»„ç›¸è”é«˜é€Ÿç¼“å­˜ Set Associative Cache ç”±äºç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜çš„ç»„ä¸­åªæœ‰ä¸€è¡Œï¼Œæ‰€ä»¥å®¹æ˜“å‘ç”Ÿå†²çªä¸å‘½ä¸­ã€‚ç»„ç›¸è”é«˜é€Ÿç¼“å­˜ (Set associative cache) è¿è¡Œæœ‰å¤šè¡Œç¼“å­˜è¡Œã€‚ä½†æ˜¯ç¼“å­˜è¡Œæœ€å¤§ä¸èƒ½è¶…è¿‡ $C/B$ã€‚\nå¦‚å›¾ä¸€ä¸ªç»„ä¸­åŒ…å«äº†ä¸¤è¡Œç¼“å­˜è¡Œï¼Œè¿™ç§æˆ‘ä»¬ç§°ä¸º 2 è·¯ç›¸è”é«˜é€Ÿç¼“å­˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç»„é€‰æ‹©ï¼šä¸ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜çš„ç»„é€‰æ‹©è¿‡ç¨‹ä¸€æ ·ã€‚\nè¡ŒåŒ¹é…ï¼šå› ä¸ºä¸€ä¸ªç»„æœ‰å¤šè¡Œï¼Œæ‰€ä»¥éœ€è¦éå†æ‰€æœ‰è¡Œï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆä½ä¸º 1ï¼Œå¹¶ä¸”æ ‡è®°ä¸ºä¸åœ°å€ä¸­çš„æ ‡è®°ä½ç›¸åŒ¹é…çš„ä¸€è¡Œã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œè¡¨ç¤ºç¼“å­˜å‘½ä¸­ã€‚\nå­—æŠ½å–ï¼šæ ¹æ®åç§»é‡$b$ç¡®å®šç›®æ ‡æ•°æ®çš„ç¡®åˆ‡ä½ç½®ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä»æ•°æ®å—çš„ä»€ä¹ˆä½ç½®å¼€å§‹æŠ½å–ä½ç½®ã€‚å¦‚å½“åç§»å—ç­‰äº100æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡æ•°æ®èµ·å§‹åœ°å€ä½äºå­—èŠ‚ 4 å¤„ã€‚\nå¦‚æœä¸å‘½ä¸­ï¼Œé‚£ä¹ˆå°±éœ€è¦ä»ä¸»å­˜ä¸­å–å‡ºéœ€è¦çš„æ•°æ®å—ï¼Œä½†æ˜¯å°†æ•°æ®å—æ”¾åœ¨å“ªä¸€è¡Œç¼“å­˜è¡Œå‘¢ï¼Ÿå¦‚æœå­˜åœ¨ç©ºè¡Œ ($valid=0$)ï¼Œé‚£å°±æ”¾åˆ°ç©ºè¡Œé‡Œã€‚å¦‚æœæ²¡æœ‰ç©ºè¡Œï¼Œå°±å¾—é€‰æ‹©ä¸€ä¸ªéç©ºè¡Œæ¥æ›¿æ¢ï¼ŒåŒæ—¶å¸Œæœ› CPU ä¸ä¼šå¾ˆå¿«å¼•ç”¨è¿™ä¸ªè¢«æ›¿æ¢çš„è¡Œã€‚è¿™é‡Œä»‹ç»å‡ ä¸ªæ›¿æ¢ç­–ç•¥ã€‚\næœ€ç®€å•çš„æ–¹å¼å°±æ˜¯éšæœºé€‰æ‹©ä¸€è¡Œæ¥æ›¿æ¢ï¼Œå…¶ä»–å¤æ‚çš„æ–¹å¼å°±æ˜¯åˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œä½¿å¾—æ¥ä¸‹æ¥ CPU å¼•ç”¨æ›¿æ¢çš„è¡Œæ¦‚ç‡æœ€å°ã€‚å¦‚\næœ€ä¸å¸¸ä½¿ç”¨ (LFU, Least Frequently Used)ï¼Œé€‰æ‹©ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„è¡Œã€‚ æœ€è¿‘æœ€å°‘ä½¿ç”¨ (LRU, Least Recently Used)ï¼Œé€‰æ‹©æœ€è¿‘ä½¿ç”¨æœ€å°‘çš„è¡Œã€‚ å…¨ç›¸è”é«˜é€Ÿç¼“å­˜ Fully Associative Cache æ•´ä¸ª Cache åªæœ‰ä¸€ä¸ªç»„ï¼Œè¿™ä¸ªç»„åŒ…å«äº†æ‰€æœ‰çš„ç¼“å­˜è¡Œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç»„é€‰æ‹©ï¼šå› ä¸ºåªæœ‰ä¸€ä¸ªç»„ï¼Œæ‰€æœ‰é»˜è®¤æ€»æ˜¯é€‰æ‹© set 0ã€‚å®é™…ä¸Šè¿™ä¸å°±ç›´æ¥å¯ä»¥å¿½ç•¥äº†ï¼Œè®¿é—®çš„åœ°å€ä¹Ÿå°±åªéœ€è¦åˆ’åˆ†ä¸ºæ ‡è®°å’Œåç§»ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¡ŒåŒ¹é…ï¼šåŒç»„ç›¸è”é«˜é€Ÿç¼“å­˜ã€‚\nå­—æŠ½å–ï¼šåŒç»„ç›¸è”é«˜é€Ÿç¼“å­˜ã€‚\nç”±äºç¡¬ä»¶å®ç°åŠæˆæœ¬ç­‰åŸå› ï¼Œå…¨ç›¸è”é«˜é€Ÿç¼“å­˜åªé€‚åˆåšå°è§„æ¨¡çš„ç¼“å­˜ã€‚ä¾‹å¦‚è™šæ‹Ÿå†…å­˜ä¸­çš„ TLBï¼ˆç¿»è¯‘å¤‡ç”¨ç¼“å­˜å™¨ï¼ŒTranslation Lookaside Bufferï¼‰ã€‚\nç¼“å­˜å†™å…¥ å†™å…¥ Cache çš„æ€§èƒ½æ¯”å†™å…¥ä¸»å†…å­˜è¦å¿«ï¼Œé‚£ä¹ˆå†™å…¥æ•°æ®åˆ°åº•æ˜¯å†™å…¥ Cache è¿˜æ˜¯å†™å…¥ä¸»å†…å­˜å‘¢ï¼Ÿå¦‚æœç›´æ¥å†™å…¥ä¸»å†…å­˜é‡Œï¼ŒCache é‡Œé¢çš„æ•°æ®æ˜¯å¦ä¼šå¤±æ•ˆå‘¢ï¼Ÿ\nå†™ç›´è¾¾ å†™ç›´è¾¾ç­–ç•¥ï¼ˆWrite-Throughï¼‰ï¼šå½“æ•°æ®è¦å†™å…¥ä¸»å†…å­˜é‡Œé¢ï¼Œå†™å…¥å‰ï¼Œä¼šå…ˆå»åˆ¤æ–­æ•°æ®æ˜¯å¦å·²ç»åœ¨ Cache é‡Œé¢äº†ã€‚å¦‚æœæ•°æ®å·²ç»åœ¨ Cache é‡Œäº†ï¼Œå…ˆæŠŠæ•°æ®å†™å…¥æ›´æ–°åˆ° Cache é‡Œé¢ï¼Œå†å†™å…¥åˆ°ä¸»å†…å­˜é‡Œé¢ï¼›å¦‚æœæ•°æ®ä¸åœ¨ Cache é‡Œï¼Œå°±åªæ›´æ–°ä¸»å†…å­˜ã€‚\nå†™å› å†™å›ç­–ç•¥ï¼ˆWrite-Backï¼‰ï¼šå¦‚æœå‘ç°è¦å†™å…¥çš„æ•°æ®ï¼Œå°±åœ¨ CPU Cache é‡Œé¢ï¼Œé‚£ä¹ˆå°±åªæ˜¯æ›´æ–° CPU Cache é‡Œé¢çš„æ•°æ®ã€‚åŒæ—¶ï¼Œä¼šæ ‡è®° CPU Cache é‡Œçš„è¿™ä¸ª Block æ˜¯è„ï¼ˆDirtyï¼‰çš„ï¼Œè¡¨ç¤º CPU Cache é‡Œé¢çš„è¿™ä¸ª Block çš„æ•°æ®ï¼Œå’Œä¸»å†…å­˜æ˜¯ä¸ä¸€è‡´çš„ã€‚å¦‚æœå‘ç°ï¼Œè¦å†™å…¥çš„æ•°æ®æ‰€å¯¹åº”çš„ Cache Block é‡Œï¼Œæ”¾çš„æ˜¯åˆ«çš„å†…å­˜åœ°å€çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦çœ‹ä¸€çœ‹ï¼Œé‚£ä¸ª Cache Block é‡Œé¢çš„æ•°æ®æœ‰æ²¡æœ‰æ ‡è®°æˆè„çš„ã€‚å¦‚æœæ˜¯è„çš„è¯ï¼Œè¦å…ˆæŠŠè¿™ä¸ª Cache Block é‡Œé¢çš„æ•°æ®ï¼Œå†™å…¥åˆ°ä¸»å†…å­˜é‡Œé¢ã€‚ç„¶åï¼Œå†æŠŠå½“å‰è¦å†™å…¥çš„æ•°æ®ï¼Œå†™å…¥åˆ° Cache é‡Œï¼ŒåŒæ—¶æŠŠ Cache Block æ ‡è®°æˆè„çš„ã€‚å¦‚æœ Block é‡Œé¢çš„æ•°æ®æ²¡æœ‰è¢«æ ‡è®°æˆè„çš„è¯ï¼Œé‚£ä¹ˆç›´æ¥æŠŠæ•°æ®å†™å…¥åˆ° Cache é‡Œé¢ï¼Œç„¶åå†æŠŠ Cache Block æ ‡è®°æˆè„çš„å°±å¥½äº†ã€‚\nåœ¨ç”¨äº†å†™å›è¿™ä¸ªç­–ç•¥ä¹‹åï¼Œåœ¨åŠ è½½å†…å­˜æ•°æ®åˆ° Cache é‡Œé¢çš„æ—¶å€™ï¼Œä¹Ÿè¦å¤šå‡ºä¸€æ­¥åŒæ­¥è„ Cache çš„åŠ¨ä½œã€‚å¦‚æœåŠ è½½å†…å­˜é‡Œé¢çš„æ•°æ®åˆ° Cache çš„æ—¶å€™ï¼Œå‘ç° Cache Block é‡Œé¢æœ‰è„æ ‡è®°ï¼Œä¹Ÿè¦å…ˆæŠŠ Cache Block é‡Œçš„æ•°æ®å†™å›åˆ°ä¸»å†…å­˜ï¼Œæ‰èƒ½åŠ è½½æ•°æ®è¦†ç›–æ‰ Cacheã€‚\nç¼“å­˜ä¸€è‡´æ€§ CPU ç¼“å­˜ä¸€è‡´æ€§ MESI åè®® - å¦‚äº‘æ³Š\nå‚è€ƒèµ„æ–™ C/C++ä¸­ volatile å…³é”®å­—è¯¦è§£ - chao_yu - åšå®¢å›­ volatile èƒ½è§£å†³ cache çš„æ•°æ®ä¸€è‡´æ€§å—ï¼Ÿç­”æ¡ˆæ˜¯ä¸èƒ½_å¤©æ‰ 2012 çš„åšå®¢-CSDN åšå®¢_volatilewritecache cpu ç¼“å­˜å’Œ volatile - XuMinzhe - åšå®¢å›­ ã€CSAPP-æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‘6-5. ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜_å“”å“©å“”å“©_bilibili 24 å¼ å›¾ 7000 å­—è¯¦è§£è®¡ç®—æœºä¸­çš„é«˜é€Ÿç¼“å­˜ - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº - è…¾è®¯äº‘\n","permalink":"https://lifeislife.cn/posts/cpu-cache%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/","summary":"\u003ch2 id=\"å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„\"\u003eå­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202205081652018.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202205081652018.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eä» Cacheã€å†…å­˜ï¼Œåˆ° SSD å’Œ HDD ç¡¬ç›˜ï¼Œä¸€å°ç°ä»£è®¡ç®—æœºä¸­ï¼Œå°±ç”¨ä¸Šäº†æ‰€æœ‰è¿™äº›å­˜å‚¨å™¨è®¾å¤‡ã€‚å…¶ä¸­ï¼Œå®¹é‡è¶Šå°çš„è®¾å¤‡é€Ÿåº¦è¶Šå¿«ï¼Œè€Œä¸”ï¼ŒCPU å¹¶ä¸æ˜¯ç›´æ¥å’Œæ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡æ‰“äº¤é“ï¼Œè€Œæ˜¯æ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡ï¼Œåªå’Œå®ƒç›¸é‚»çš„å­˜å‚¨è®¾å¤‡æ‰“äº¤é“ã€‚æ¯”å¦‚ï¼ŒCPUCache æ˜¯ä»å†…å­˜é‡ŒåŠ è½½è€Œæ¥çš„ï¼Œæˆ–è€…éœ€è¦å†™å›å†…å­˜ï¼Œå¹¶ä¸ä¼šç›´æ¥å†™å›æ•°æ®åˆ°ç¡¬ç›˜ï¼Œä¹Ÿä¸ä¼šç›´æ¥ä»ç¡¬ç›˜åŠ è½½æ•°æ®åˆ° CPUCache ä¸­ï¼Œè€Œæ˜¯å…ˆåŠ è½½åˆ°å†…å­˜ï¼Œå†ä»å†…å­˜åŠ è½½åˆ° Cache ä¸­ã€‚\u003c/p\u003e","title":"CPU Cache é«˜é€Ÿç¼“å­˜"},{"content":"KeePass å®‰è£… ä¸‹è½½ä¸å®‰è£…\nå®˜ç½‘ï¼š https://keepass.info/download.html\nä¸‹è½½å®Œæˆåè¿›è¡Œå®‰è£…ï¼Œé»˜è®¤å®‰è£…ä½ç½®æ˜¯ï¼šC:\\Program Files (x86)\\KeePass Password Safe 2æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©å®‰è£…è·¯å¾„ã€‚\næ›´æ”¹ä¸­æ–‡è¯­è¨€\nä¸­æ–‡è¯­è¨€åŒ…ï¼š KeePass-Chinese_Simplified\nå°†è¯­è¨€åŒ…ä¸‹è½½åå¤åˆ¶åˆ°å®‰è£…è·¯å¾„ä¸‹çš„Languagesæ–‡ä»¶å¤¹ä¸‹ï¼Œé»˜è®¤ä¸ºï¼šC:\\Program Files (x86)\\KeePass Password Safe 2\\Languagesã€‚é‡å¯è½¯ä»¶ã€‚\nç‚¹å‡» View-\u0026gt;Change Language.Â é€‰æ‹©ä¸­æ–‡ç®€ä½“ï¼ˆChinese-Simplifiedï¼‰ã€‚é‡å¯è½¯ä»¶ï¼Œå³å¯å®Œæˆè¯­è¨€æ›´æ”¹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸­æ–‡ç•Œé¢ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åŸºæœ¬ä½¿ç”¨ 1.åˆ›å»ºä¸€ä¸ªæ•°æ®åº“\nç‚¹å‡»Â æ–‡ä»¶-ã€‹æ–°å»ºã€‚å¼¹å‡ºå¯¹è¯æ¡†ä¸ºæ•°æ®åº“åˆ›å»ºç®¡ç†å¯†ç ã€‚è¿™ä¸ªå¯†ç æ˜¯å”¯ä¸€éœ€è¦è®°å¿†çš„å¯†ç ã€‚å½“ç„¶å¦‚æœè¿½æ±‚æ›´é«˜çš„å®‰å…¨æ€§ï¼Œå¯ä»¥ç‚¹å‡»æ˜¾ç¤ºé«˜çº§é€‰é¡¹ï¼Œæä¾›æ›´å¤šçš„å¯†ç é€‰é¡¹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image 2.æ·»åŠ è®°å½•\nç‚¹å‡»æ·»åŠ è®°å½•ï¼Œåœ¨å¼¹å‡ºçš„çª—å£å¡«å…¥ç›¸å…³ä¿¡æ¯ã€‚å³å¯å®Œæˆå¯†ç æ·»åŠ ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„ç½‘ç«™ï¼Œç¬¬ä¸€æ¬¡æ³¨å†Œå¯†ç ã€‚å¯ä»¥é€šè¿‡å¯†ç ç”Ÿæˆå™¨ï¼Œç”Ÿæˆä¸€ä¸ªé«˜å¼ºåº¦çš„å¯†ç æ¥æ·»åŠ è®°å½•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image 3.åˆ›å»ºä¸€ä¸ªå¯†ç ç”Ÿæˆæ¨¡æ¿\næ­£å¸¸å›½å†…çš„ç½‘ç«™å¯ä»¥ä½¿ç”¨çš„å¯†ç é•¿åº¦ 6-16 ä½ï¼Œå¯ä»¥ä½¿ç”¨å¤§å°å†™ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ã€‚æˆ‘ä»¬æŠŠè¿™äº›é€‰é¡¹å‹¾é€‰ï¼Œå¯†ç é•¿åº¦è®¾ç½® 16 ä½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»ä¿å­˜å¹¶ç»™æ¨¡æ¿è®¾ç½®ä¸ªåå­—æ–¹ä¾¿ä¸‹æ¬¡ä½¿ç”¨\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¦‚æœä¿å­˜åæƒ³æ›´æ”¹ä¸€ä¸‹ï¼Œæ¯”å¦‚å†åŠ ä¸ªå¯ä»¥ä½¿ç”¨ç©ºæ ¼ï¼Œå¯ä»¥é‡æ–°å‹¾é€‰åˆšåˆšçš„é€‰é¡¹ï¼Œä¿å­˜æ—¶ç‚¹å‡»å°ä¸‰è§’ï¼Œé€‰æ‹©åˆšåˆšä¿å­˜çš„æ–¹æ¡ˆå°±å¯ä»¥è¦†ç›–ã€‚\nå¯¼å…¥ Chrome å·²ä¿å­˜çš„å¯†ç \nå¾ˆå¤šå°ä¼™ä¼´åœ¨ä½¿ç”¨ KeePass ä¹‹å‰è‚¯å®šåœ¨ Chrome ç­‰æµè§ˆå™¨é‡Œä¹Ÿä¿å­˜äº†å¾ˆå¤šå¯†ç ã€‚æƒ³å°†å…¶å¯¼å…¥ KeePass æ–¹ä¾¿ç®¡ç†ã€‚Chrome æ˜¯å¯ä»¥å¯¼å‡ºå¯†ç çš„ï¼ŒKeePass ä¹Ÿå¯ä»¥å¯¼å…¥å¯†ç ã€‚\nç‚¹å‡»æµè§ˆå™¨å³ä¸Šè§’ï¼Œæ‰“å¼€è®¾ç½®ç•Œé¢ã€‚æ‰¾åˆ°å¯†ç \n\u003c!DOCTYPE html\u003e Responsive Image æ‰¾åˆ°å·²ä¿å­˜çš„å¯†ç -ã€‹å¯¼å‡ºå¯†ç ã€‚é€‰æ‹©æ–¹ä¾¿æ‰¾åˆ°çš„è·¯å¾„ï¼Œä¿å­˜å¯†ç è®°å½•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€ KeePassï¼Œç‚¹å‡»æ–‡ä»¶-ã€‹å¯¼å…¥ï¼Œé€‰æ‹© Chrome æµè§ˆå™¨çš„æ ¼å¼ã€‚ç‚¹å‡»æ–‡ä»¶å¤¹å›¾æ ‡æ‰¾åˆ°åˆšåˆšå¯¼å‡ºçš„å¯†ç æ–‡ä»¶ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é«˜çº§é…ç½® KeePass æ­é…åšæœäº‘å®ç°äº‘åŒæ­¥ ç™»å½•åšæœäº‘åˆ›å»ºä¸ªäººåŒæ­¥æ–‡ä»¶å¤¹ï¼Œè‹¥æ²¡æœ‰å…ˆæ³¨å†Œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æœ€å¥½å•ç‹¬å»ºä¸€ä¸ªä¸“é—¨çš„æ–‡ä»¶å¤¹\n\u003c!DOCTYPE html\u003e Responsive Image å°†å·²ç»ç”Ÿæˆçš„æ•°æ®åº“ä¸Šä¼ åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»å³ä¸Šè§’è¿›å…¥è´¦æˆ·ä¿¡æ¯ï¼Œç‚¹å‡»å®‰å…¨é€‰é¡¹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»æ·»åŠ åº”ç”¨\n\u003c!DOCTYPE html\u003e Responsive Image è¾“å…¥åº”ç”¨åç§°ï¼Œåº”ç”¨åç§°åªæ˜¯æ–¹ä¾¿åŒºåˆ†ä½œç”¨ï¼Œæ‰€ä»¥å’Œè¦åŒæ­¥çš„åº”ç”¨åç§°ä¸€è‡´å°±å¥½ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»ç”Ÿæˆå¯†ç ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ­¤æ—¶äº‘ç›˜ç«¯é…ç½®å®Œæˆï¼Œåˆ‡å›åˆ° KeePass è¿›è¡Œå®¢æˆ·ç«¯é…ç½®ã€‚ç‚¹å‡»æ–‡ä»¶-ã€‹åŒæ­¥-ã€‹ä¸ç½‘å€ï¼ˆURLï¼‰åŒæ­¥\n\u003c!DOCTYPE html\u003e Responsive Image ç½‘å€ï¼š https://dav.jianguoyun.com/dav/KeePass/keepassData.kdbx\næ³¨æ„ï¼šçº¢è‰²éƒ¨åˆ†æ˜¯ä¸ªäººåŒæ­¥æ–‡ä»¶å¤¹çš„åç§°ï¼Œç»¿è‰²éƒ¨åˆ†æ˜¯ä¸Šä¼ çš„æ•°æ®åº“å…¨ç§°ï¼Œä¸€å®šåˆ«å¿˜äº†åç¼€\n**ç”¨æˆ·åï¼š**ä½ çš„åšæœäº‘ç™»å½•åï¼ˆé‚®ç®±æˆ–è€…æ‰‹æœºå·ï¼‰\nå¯†ç ï¼šç”Ÿæˆåº”ç”¨çš„å¯†ç ï¼Œï¼ˆä¸æ˜¯ç™»å½•åšæœäº‘çš„å¯†ç ï¼‰\nç‚¹å‡»ç¡®å®šï¼Œæ­¤æ—¶å·²ç»å¯ä»¥å®ŒæˆåŒæ­¥ï¼Œä½†æ˜¯æ¯æ¬¡åŒæ­¥ä»ç„¶éœ€è¦æ‰‹åŠ¨ç¡®å®šã€‚å‚è€ƒäº†ä»€ä¹ˆå€¼å¾—ä¹°ä¸Šå°ä¹ CSNçš„æ–¹æ³•ï¼Œé€šè¿‡è§¦å‘å™¨å®ç°è‡ªåŠ¨åŒæ­¥ã€‚\nè§¦å‘å™¨ä»£ç ï¼š\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;TriggerCollection xmlns:xsd=\u0026#34;http://www.w3.org/2001/XMLSchema\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34;\u0026gt; \u0026lt;Triggers\u0026gt; \u0026lt;Trigger\u0026gt; \u0026lt;Guid\u0026gt;L2euC7Mr/EKh7nPjueuZvQ==\u0026lt;/Guid\u0026gt; \u0026lt;Name\u0026gt;SaveSync\u0026lt;/Name\u0026gt; \u0026lt;Events\u0026gt; \u0026lt;Event\u0026gt; \u0026lt;TypeGuid\u0026gt;s6j9/ngTSmqcXdW6hDqbjg==\u0026lt;/TypeGuid\u0026gt; \u0026lt;Parameters\u0026gt; \u0026lt;Parameter\u0026gt;1\u0026lt;/Parameter\u0026gt; \u0026lt;Parameter\u0026gt;kdbx\u0026lt;/Parameter\u0026gt; \u0026lt;/Parameters\u0026gt; \u0026lt;/Event\u0026gt; \u0026lt;/Events\u0026gt; \u0026lt;Conditions /\u0026gt; \u0026lt;Actions\u0026gt; \u0026lt;Action\u0026gt; \u0026lt;TypeGuid\u0026gt;tkamn96US7mbrjykfswQ6g==\u0026lt;/TypeGuid\u0026gt; \u0026lt;Parameters\u0026gt; \u0026lt;Parameter\u0026gt;SaveSync\u0026lt;/Parameter\u0026gt; \u0026lt;Parameter\u0026gt;0\u0026lt;/Parameter\u0026gt; \u0026lt;/Parameters\u0026gt; \u0026lt;/Action\u0026gt; \u0026lt;Action\u0026gt; \u0026lt;TypeGuid\u0026gt;Iq135Bd4Tu2ZtFcdArOtTQ==\u0026lt;/TypeGuid\u0026gt; \u0026lt;Parameters\u0026gt; \u0026lt;Parameter\u0026gt;https://dav.jianguoyun.com/dav/keePass/passwordSync.kdbx\u0026lt;/Parameter\u0026gt; \u0026lt;Parameter\u0026gt;123456\u0026lt;/Parameter\u0026gt; \u0026lt;Parameter\u0026gt;123456\u0026lt;/Parameter\u0026gt; \u0026lt;/Parameters\u0026gt; \u0026lt;/Action\u0026gt; \u0026lt;Action\u0026gt; \u0026lt;TypeGuid\u0026gt;tkamn96US7mbrjykfswQ6g==\u0026lt;/TypeGuid\u0026gt; \u0026lt;Parameters\u0026gt; \u0026lt;Parameter\u0026gt;SaveSync\u0026lt;/Parameter\u0026gt; \u0026lt;Parameter\u0026gt;1\u0026lt;/Parameter\u0026gt; \u0026lt;/Parameters\u0026gt; \u0026lt;/Action\u0026gt; \u0026lt;/Actions\u0026gt; \u0026lt;/Trigger\u0026gt; \u0026lt;/Triggers\u0026gt; \u0026lt;/TriggerCollection\u0026gt; å¤åˆ¶è§¦å‘å™¨ä»£ç ï¼Œç‚¹å‡»å·¥å…·-ã€‹è§¦å‘å™¨ï¼Œç‚¹å‡»å·¥å…·-ã€‹ä»å‰ªåˆ‡æ¿ç²˜è´´è§¦å‘å™¨ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¯¼å…¥æˆåŠŸåï¼Œåœ¨è§¦å‘å™¨é¡µé¢ä¼šå¤šä¸€ä¸ªè§¦å‘å™¨ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åŒå‡»æ‰“å¼€SaveSync,æ‰“å¼€æœ€åä¸€ä¸ªåŠ¨ä½œçª—å£ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åŒå‡»ä¸­é—´çš„æ¡ç›®ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å°†ä¿¡æ¯æ¢æˆåŒæ­¥äº‘ç›˜çš„ä¿¡æ¯ï¼š\næ–‡ä»¶/ç½‘å€ï¼šÂ https://dav.jianguoyun.com/dav/KeePass/keepassData.kdbx\næ³¨æ„ï¼šçº¢è‰²éƒ¨åˆ†æ˜¯ä¸ªäººåŒæ­¥æ–‡ä»¶å¤¹çš„åç§°ï¼Œç»¿è‰²éƒ¨åˆ†æ˜¯ä¸Šä¼ çš„æ•°æ®åº“å…¨ç§°ï¼Œä¸€å®šåˆ«å¿˜äº†åç¼€\n**IOÂ è¿æ¥ - ç”¨æˆ·åï¼š**ä½ çš„åšæœäº‘ç™»å½•åï¼ˆé‚®ç®±æˆ–è€…æ‰‹æœºå·ï¼‰\nIO è¿æ¥ - å¯†ç ï¼šç”Ÿæˆåº”ç”¨çš„å¯†ç ï¼Œï¼ˆä¸æ˜¯ç™»å½•åšæœäº‘çš„å¯†ç ï¼‰\nç‚¹å‡»ç¡®å®šï¼Œå›åˆ°ä¸»é¡µé¢ï¼Œç‚¹å‡»å·¥å…·-ã€‹é€‰é¡¹\n\u003c!DOCTYPE html\u003e Responsive Image æ‰¾åˆ°Â é«˜çº§ï¼Œå‘ä¸‹ç¿»ï¼Œåœ¨æ–‡ä»¶è¾“å…¥/è¾“å‡ºè¿æ¥Â æ ç›®é‡Œæ‰¾åˆ°Â å†™å…¥æ•°æ®åº“æ—¶ä½¿ç”¨æ–‡ä»¶äº¤æ¢Â æ­¤é¡¹ä¸å‹¾é€‰\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»ç¡®å®šï¼Œè¿”å›ä¸»é¡µé¢ã€‚æ­¤æ—¶ç‚¹å‡»ä¿å­˜æŒ‰é’®æˆ–è€… Ctrl+Sã€‚å³å¯ä¸äº‘ç›˜è¿›è¡ŒåŒæ­¥ã€‚\nChrome ä¸Šä½¿ç”¨æ’ä»¶å®ç°å¯†ç è‡ªåŠ¨å¡«å……ä¸åŒæ­¥ åœ¨ KeePass å®¢æˆ·ç«¯å®‰è£…KeePassRPC æ’ä»¶ï¼š\nå°†å…¶æ”¾å…¥å®‰è£…ç›®å½•ï¼ˆ.\\KeePass\\Pluginsï¼‰æ–‡ä»¶å¤¹ä¸‹ï¼Œé€€å‡ºè½¯ä»¶ï¼Œé‡å¯å³å¯è‡ªåŠ¨å®‰è£…ã€‚\nåœ¨æµè§ˆå™¨å®¢æˆ·ç«¯å®‰è£…æµè§ˆå™¨æ’ä»¶Keeï¼Œè‹¥æ— æ³•ç§‘å­¦ä¸Šç½‘ï¼Œå¯èƒ½éœ€è¦è‡ªè¡Œç™¾åº¦æœç´¢ Kee æ’ä»¶\n\u003c!DOCTYPE html\u003e Responsive Image å®‰è£…å®Œæˆåä¼šè·³å‡ºçª—å£æç¤ºæˆæƒï¼Œå°† KeePass å®¢æˆ·ç«¯è·³å‡ºçš„çª—å£ä¸­çš„çº¢è‰²æˆæƒç å¡«å…¥å³å¯è¿æ¥æµè§ˆå™¨ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨ Kee\n\u003c!DOCTYPE html\u003e Responsive Image å†æ¬¡ä½¿ç”¨æµè§ˆå™¨å¡«å†™å¯†ç æ˜¯å¯ä»¥çœ‹åˆ°æ–‡æœ¬æ¡†ä¼šæœ‰ logoï¼ŒKee ä¼šè‡ªåŠ¨å¡«å†™å·²ä¿å­˜çš„å¯†ç ã€‚å¦‚æœç¬¬ä¸€æ¬¡ç™»é™†ï¼Œåœ¨ç™»å½•åå¯ä»¥ç‚¹å‡»æµè§ˆå™¨æ’ä»¶å›¾æ ‡ï¼Œæ‰¾åˆ° SaveÂ latest loginï¼Œä¿å­˜åˆšåˆšè¾“å…¥çš„å¯†ç ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¯†ç ç®¡ç†å™¨çš„é‡è¦ä½œç”¨ä¹‹ä¸€å°±æ˜¯ç”Ÿæˆé«˜å¼ºåº¦å¯†ç ï¼Œå¯ä»¥ç”¨ KeePass å®¢æˆ·ç«¯æ¥ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥æ˜¯ Kee è¿™ä¸ªæ’ä»¶çš„ä¸€ä¸ªç”Ÿæˆå¯†ç åŠŸèƒ½ç”Ÿæˆã€‚è‹±æ–‡ç‰ˆçš„æ˜¯Generate newÂ password\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8-keepass/","summary":"\u003ch2 id=\"keepass-å®‰è£…\"\u003e\u003cstrong\u003eKeePass å®‰è£…\u003c/strong\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eä¸‹è½½ä¸å®‰è£…\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå®˜ç½‘ï¼š \u003ca href=\"https://keepass.info/download.html\"\u003ehttps://keepass.info/download.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eä¸‹è½½å®Œæˆåè¿›è¡Œå®‰è£…ï¼Œé»˜è®¤å®‰è£…ä½ç½®æ˜¯ï¼š\u003ccode\u003eC:\\Program Files (x86)\\KeePass Password Safe 2\u003c/code\u003eæ–‡ä»¶å¤¹ä¸‹ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©å®‰è£…è·¯å¾„ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eæ›´æ”¹ä¸­æ–‡è¯­è¨€\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eä¸­æ–‡è¯­è¨€åŒ…ï¼š \u003ca href=\"https://www.keepass.com.cn/language#:~:text=%E5%9C%A8keepass%E4%B8%AD%EF%BC%8C%E5%8D%95%E5%87%BB,%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8Keepass%E3%80%82\"\u003eKeePass-Chinese_Simplified\u003c/a\u003e\u003c/p\u003e","title":"å¯†ç ç®¡ç†å™¨-KeePass"},{"content":"volatile èƒ½å¦è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ ä¸ºä½•ä¼šäº§ç”Ÿè¿™æ ·çš„ç–‘é—®ï¼Œè¿˜å¾—ä»ä¸€ä¸ªå·¥ä½œä¸­çš„ Bug è¯´èµ·ã€‚åœ¨ä½¿ç”¨ PMPï¼ˆPhysical Memory Protectï¼‰å¯¹ç‰©ç†å†…å­˜è¿›è¡Œä¿æŠ¤æ—¶ï¼Œæ— æ³•æˆåŠŸä¿æŠ¤ï¼Œç®€å•æ¥è¯´ PMP å¯ä»¥å¯¹ä¸€æ®µç‰©ç†å†…å­˜è®¾ç½®ä¿æŠ¤ï¼Œå¦‚ä¿æŠ¤è¿™æ®µå†…å­˜ä¸å¯å†™ã€‚æµ‹è¯•æ—¶ï¼Œå…ˆå¯¹è¿™æ®µå†…å­˜å†™å…¥0x1234ï¼Œå†è¯»å–è¿™æ®µå†…å­˜ã€‚å¦‚æœè¯»å–çš„å€¼ä¸º0x0è¡¨ç¤ºä¿æŠ¤æˆåŠŸï¼Œä½†å®é™…æ€»èƒ½æˆåŠŸè¯»å–0x1234ã€‚\nvolatile int test; test = read(0xFF740000); print(\u0026#34;Before = %x\\n\u0026#34;, test); // ä¿æŠ¤ä¹‹å‰æ•°æ® Before = 0x1111 PMP(0xFF740000, 0x400); // ä¿æŠ¤è¿™æ®µå†…å­˜ä¸å¯å†™ write(0xFF740000, 0x1234); // å†™å…¥æ•°æ® test = read(0xFF740000); print(\u0026#34;After = %x\\n\u0026#34;, test); // é¢„æœŸè¯»å–ä¸º0x0ï¼Œå®é™…æ€»èƒ½æˆåŠŸè¯»å–0x1234 å› ä¸ºè¯»å–çš„å˜é‡testè®¾ç½®ä¸ºvolatileï¼Œæ‰€ä»¥æŒ‰ç…§ä»¥å¾€çš„ç†è§£ï¼Œç³»ç»Ÿæ€»æ˜¯é‡æ–°ä»å®ƒæ‰€åœ¨çš„å†…å­˜è¯»å–æ•°æ®ï¼Œè¿™é‡Œåº”è¯¥èƒ½æ­£ç¡®è¯»å–å‡ºæ•°æ®ã€‚\nä½†æ˜¯å¿½ç•¥äº†ä¸€ç‚¹ï¼Œå½“ä½¿ç”¨volatileå˜é‡æ—¶ï¼ŒCPU åªæ˜¯ä¸å†ä½¿ç”¨å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œç›´æ¥å»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œè¿™é‡Œçš„å†…å­˜å®é™…ä¸Šæ˜¯åŒ…æ‹¬ Cache çš„ã€‚\næ‰€ä»¥å½“æ•°æ®è¢« Cached ä¹‹åï¼Œå½“å†æ¬¡è¯»å–æ—¶ï¼ŒCPU å¯èƒ½ä¼šç›´æ¥è¯»å– Cached çš„æ•°æ®ï¼Œè€Œä¸æ˜¯å»è¯»å–çœŸæ­£å†…å­˜ä¸­çš„æ•°æ®ã€‚å› æ­¤ï¼Œvolatile ä¸èƒ½è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚\nå…³äº Cache çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒCPU Cache é«˜é€Ÿç¼“å­˜ - å¦‚äº‘æ³Šã€‚\n","permalink":"https://lifeislife.cn/posts/volatile%E8%83%BD%E5%90%A6%E8%A7%A3%E5%86%B3%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/","summary":"\u003ch1 id=\"volatile-èƒ½å¦è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜\"\u003evolatile èƒ½å¦è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜\u003c/h1\u003e\n\u003cp\u003eä¸ºä½•ä¼šäº§ç”Ÿè¿™æ ·çš„ç–‘é—®ï¼Œè¿˜å¾—ä»ä¸€ä¸ªå·¥ä½œä¸­çš„ Bug è¯´èµ·ã€‚åœ¨ä½¿ç”¨ PMPï¼ˆPhysical Memory Protectï¼‰å¯¹ç‰©ç†å†…å­˜è¿›è¡Œä¿æŠ¤æ—¶ï¼Œæ— æ³•æˆåŠŸä¿æŠ¤ï¼Œç®€å•æ¥è¯´ PMP å¯ä»¥å¯¹ä¸€æ®µç‰©ç†å†…å­˜è®¾ç½®ä¿æŠ¤ï¼Œå¦‚ä¿æŠ¤è¿™æ®µå†…å­˜ä¸å¯å†™ã€‚æµ‹è¯•æ—¶ï¼Œå…ˆå¯¹è¿™æ®µå†…å­˜å†™å…¥\u003ccode\u003e0x1234\u003c/code\u003eï¼Œå†è¯»å–è¿™æ®µå†…å­˜ã€‚å¦‚æœè¯»å–çš„å€¼ä¸º\u003ccode\u003e0x0\u003c/code\u003eè¡¨ç¤ºä¿æŠ¤æˆåŠŸï¼Œä½†å®é™…æ€»èƒ½æˆåŠŸè¯»å–\u003ccode\u003e0x1234\u003c/code\u003eã€‚\u003c/p\u003e","title":"volatile èƒ½å¦è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜"},{"content":"CS å¯è§†åŒ– - å¸¸ç”¨çš„ Git å‘½ä»¤ Authorï¼šLydia Hallie è¯‘ï¼šğŸŒ³ğŸš€ CS Visualized: Useful Git Commands - DEV Community\nå°½ç®¡ Git æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œä½†æˆ‘æƒ³å¤§å¤šæ•°äººéƒ½ä¼šåŒæ„ï¼Œå½“æˆ‘è¯´å®ƒä¹Ÿå¯èƒ½æ˜¯â€¦â€¦ä¸€åœºå½»å¤´å½»å°¾çš„å™©æ¢¦å½“æˆ‘æ‰§è¡ŒæŸä¸ªå‘½ä»¤æ—¶åˆ†æ”¯äº¤äº’ï¼Œå®ƒå°†å¦‚ä½•å½±å“å†å²è®°å½•ï¼Ÿå½“æˆ‘åœ¨masteråˆ†æ”¯æ‰§è¡Œhard resetã€force pushåˆ° originã€åœ¨.gitæ–‡ä»¶å¤¹æ‰§è¡Œrimrafçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„åŒäº‹éƒ½å“­äº†ï¼Ÿ\næˆ‘è®¤ä¸ºè¿™å°†æ˜¯åˆ›å»ºä¸€äº›æœ€å¸¸è§å’Œæœ€æœ‰ç”¨å‘½ä»¤çš„å¯è§†åŒ–ç¤ºä¾‹çš„å®Œç¾ç”¨ä¾‹ï¼æˆ‘ä»‹ç»çš„è®¸å¤šå‘½ä»¤éƒ½æœ‰å¯é€‰å‚æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›å‚æ•°æ¥æ›´æ”¹å®ƒä»¬çš„è¡Œä¸ºã€‚åœ¨æˆ‘çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘å°†ä»‹ç»å‘½ä»¤çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œä¸æ·»åŠ ï¼ˆå¤ªå¤šï¼‰é…ç½®é€‰é¡¹ï¼\nMerging æ‹¥æœ‰å¤šä¸ªåˆ†æ”¯éå¸¸æ–¹ä¾¿ï¼Œå¯ä»¥å°†æ–°æ›´æ”¹å½¼æ­¤åˆ†å¼€ï¼Œå¹¶ç¡®ä¿æ‚¨ä¸ä¼šæ„å¤–åœ°å°†æœªç»æ‰¹å‡†æˆ–æŸåçš„æ›´æ”¹æ¨é€åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ä¸€æ—¦æ›´æ”¹è·å¾—æ‰¹å‡†ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æˆ‘ä»¬çš„ç”Ÿäº§åˆ†æ”¯ä¸­è·å¾—è¿™äº›æ›´æ”¹ï¼\nå°†æ›´æ”¹ä»ä¸€ä¸ªåˆ†æ”¯è½¬ç§»åˆ°å¦ä¸€ä¸ªåˆ†æ”¯çš„ä¸€ç§æ–¹æ³•æ˜¯æ‰§è¡Œ git mergeï¼Git å¯ä»¥æ‰§è¡Œä¸¤ç§ç±»å‹çš„åˆå¹¶ï¼šfast-forward æˆ–â€‹â€‹ no-fast-forwardã€‚\nç°åœ¨è¿™å¯èƒ½æ²¡æœ‰å¤šå¤§æ„ä¹‰ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹å·®å¼‚ï¼\nFast-forward (--ff) å¦‚æœå½“å‰åˆ†æ”¯ä¸å³å°†åˆå¹¶è¿‡æ¥çš„åˆ†æ”¯ç›¸æ¯”ï¼Œæ²¡æœ‰é¢å¤–çš„æäº¤ï¼Œè¿™ç§å°±æ˜¯fast-forwardåˆå¹¶ã€‚Git å¾ˆä¼šå·æ‡’ï¼Œå®ƒä¼šé¦–å…ˆå°è¯•æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œå³fast-forwardã€‚è¿™ç§åˆå¹¶æ–¹å¼ä¸ä¼šåˆ›å»ºæ–°çš„æäº¤ï¼Œåªæ˜¯æŠŠå¦ä¸€ä¸ªåˆ†æ”¯çš„æäº¤è®°å½•ç›´æ¥åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å®Œç¾çš„ï¼æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨ master åˆ†æ”¯ä¸Šä½¿ç”¨åœ¨ dev åˆ†æ”¯ä¸Šæ‰€åšçš„æ‰€æœ‰æ›´æ”¹ã€‚é‚£ä¹ˆï¼Œno-fast-forward åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ\nNo-fast-foward (--no-ff) å¦‚æœä¸æ‚¨è¦åˆå¹¶çš„åˆ†æ”¯ç›¸æ¯”ï¼Œæ‚¨å½“å‰çš„åˆ†æ”¯æ²¡æœ‰ä»»ä½•é¢å¤–çš„æäº¤ï¼Œé‚£å°±å¤ªå¥½äº†ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘è§ï¼å¦‚æœæˆ‘ä»¬åœ¨å½“å‰åˆ†æ”¯ä¸Šæäº¤äº†æˆ‘ä»¬æƒ³è¦åˆå¹¶çš„åˆ†æ”¯æ²¡æœ‰çš„æ›´æ”¹ï¼ŒGit å°†æ‰§è¡Œ no-fast-forward åˆå¹¶ã€‚\nä½¿ç”¨ no-fast-forward åˆå¹¶ï¼ŒGit åœ¨æ´»åŠ¨åˆ†æ”¯ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤ã€‚æäº¤çš„çˆ¶æäº¤æŒ‡å‘æ´»åŠ¨åˆ†æ”¯å’Œæˆ‘ä»¬è¦åˆå¹¶çš„åˆ†æ”¯ï¼\n\u003c!DOCTYPE html\u003e Responsive Image æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œå®Œç¾çš„åˆå¹¶ï¼ master åˆ†æ”¯ç°åœ¨åŒ…å«æˆ‘ä»¬åœ¨ dev åˆ†æ”¯ä¸Šæ‰€åšçš„æ‰€æœ‰æ›´æ”¹ã€‚\nMerge Conflicts å°½ç®¡ Git æ“…é•¿å†³å®šå¦‚ä½•åˆå¹¶åˆ†æ”¯å’Œå‘æ–‡ä»¶æ·»åŠ æ›´æ”¹ï¼Œä½†å®ƒä¸èƒ½æ€»æ˜¯è‡ªå·±åšå‡ºè¿™ä¸ªå†³å®šã€‚å½“æˆ‘ä»¬å°è¯•åˆå¹¶çš„ä¸¤ä¸ªåˆ†æ”¯åœ¨åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€è¡Œä¸Šå‘ç”Ÿæ›´æ”¹æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæˆ–è€…å¦‚æœä¸€ä¸ªåˆ†æ”¯åˆ é™¤äº†å¦ä¸€ä¸ªåˆ†æ”¯ä¿®æ”¹çš„æ–‡ä»¶ï¼Œç­‰ç­‰ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒGit ä¼šè¦æ±‚æ‚¨å¸®åŠ©å†³å®šæˆ‘ä»¬è¦ä¿ç•™ä¸¤ä¸ªé€‰é¡¹ä¸­çš„å“ªä¸€ä¸ªï¼å‡è®¾åœ¨ä¸¤ä¸ªåˆ†æ”¯ä¸Šï¼Œæˆ‘ä»¬ç¼–è¾‘äº† README.md ä¸­çš„ç¬¬ä¸€è¡Œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœæˆ‘ä»¬æƒ³å°† dev åˆå¹¶åˆ° master ä¸­ï¼Œè¿™å°†å¯¼è‡´åˆå¹¶å†²çªï¼šæ‚¨å¸Œæœ›æ ‡é¢˜æ˜¯ Hello! è¿˜æ˜¯ Hey!ï¼Ÿ\nå½“è¯•å›¾åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒGit ä¼šå‘Šè¯‰ä½ å†²çªå‘ç”Ÿåœ¨å“ªé‡Œã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨åˆ é™¤ä¸æƒ³ä¿ç•™çš„æ›´æ”¹ï¼Œä¿å­˜æ›´æ”¹ï¼Œå†æ¬¡æ·»åŠ æ›´æ”¹çš„æ–‡ä»¶ï¼Œç„¶åæäº¤æ›´æ”¹\n\u003c!DOCTYPE html\u003e Responsive Image è€¶ï¼å°½ç®¡åˆå¹¶å†²çªé€šå¸¸å¾ˆçƒ¦äººï¼Œä½†å®ƒå®Œå…¨æœ‰é“ç†ï¼šGit ä¸åº”è¯¥è‡ªå·±å†³å®šé€‰æ‹©å“ªä¸€ä¸ªæ›´æ”¹ã€‚\nRebasing æˆ‘ä»¬åˆšåˆšçœ‹åˆ°äº†å¦‚ä½•é€šè¿‡æ‰§è¡Œ git merge å°†æ›´æ”¹ä»ä¸€ä¸ªåˆ†æ”¯åº”ç”¨åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚å¦ä¸€ç§å°†æ›´æ”¹ä»ä¸€ä¸ªåˆ†æ”¯æ·»åŠ åˆ°å¦ä¸€ä¸ªçš„æ–¹æ³•æ˜¯æ‰§è¡Œgit rebaseã€‚\ngit rebase å¤åˆ¶å½“å‰åˆ†æ”¯çš„æäº¤ï¼Œå¹¶å°†è¿™äº›å¤åˆ¶çš„æäº¤æ”¾åœ¨æŒ‡å®šåˆ†æ”¯çš„é¡¶éƒ¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å®Œç¾ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨ dev åˆ†æ”¯ä¸Šä½¿ç”¨åœ¨ master åˆ†æ”¯ä¸Šæ‰€åšçš„æ‰€æœ‰æ›´æ”¹ï¼\nä¸åˆå¹¶ç›¸æ¯”ï¼Œä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«æ˜¯ Git ä¸ä¼šå°è¯•æ‰¾å‡ºè¦ä¿ç•™å’Œä¸ä¿ç•™çš„æ–‡ä»¶ã€‚æˆ‘ä»¬æ­£åœ¨å˜åŸºçš„åˆ†æ”¯æ€»æ˜¯æœ‰æˆ‘ä»¬æƒ³è¦ä¿ç•™çš„æœ€æ–°æ›´æ”¹ï¼é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨ä¸ä¼šé‡åˆ°ä»»ä½•åˆå¹¶å†²çªï¼Œå¹¶ä¿æŒè‰¯å¥½çš„çº¿æ€§ Git å†å²è®°å½•ã€‚\nè¿™ä¸ªä¾‹å­å±•ç¤ºäº†åŸºäº master åˆ†æ”¯çš„å˜åŸºã€‚ç„¶è€Œï¼Œåœ¨æ›´å¤§çš„é¡¹ç›®ä¸­ï¼Œæ‚¨é€šå¸¸ä¸æƒ³è¿™æ ·åšã€‚ git rebase æ”¹å˜äº†é¡¹ç›®çš„å†å²ï¼Œå› ä¸ºä¸ºå¤åˆ¶çš„æäº¤åˆ›å»ºäº†æ–°çš„å“ˆå¸Œï¼\næ¯å½“æ‚¨åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šå·¥ä½œå¹¶ä¸”ä¸»åˆ†æ”¯å·²æ›´æ–°æ—¶ï¼Œé‡æ–°å®šåŸºéƒ½å¾ˆæ£’ã€‚æ‚¨å¯ä»¥è·å¾—åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æ›´æ–°ï¼Œè¿™å°†é˜²æ­¢æœªæ¥çš„åˆå¹¶å†²çªï¼\nInteractive Rebase åœ¨é‡æ–°æäº¤æäº¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å®ƒä»¬ï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ interactive rebase æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚äº¤äº’å¼å˜åŸºå¯¹äºæ‚¨å½“å‰æ­£åœ¨å¤„ç†çš„åˆ†æ”¯ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”æƒ³è¦ä¿®æ”¹ä¸€äº›æäº¤ã€‚\næˆ‘ä»¬å¯ä»¥å¯¹æˆ‘ä»¬æ­£åœ¨å˜åŸºçš„æäº¤æ‰§è¡Œ 6 é¡¹æ“ä½œï¼š\nreword: Change the commit message edit: Amend this commit squash: Meld commit into the previous commit fixup: Meld commit into the previous commit, without keeping the commit\u0026rsquo;s log message exec: Run a command on each commit we want to rebase drop: Remove the commit æƒŠäººçš„ï¼è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨æ§åˆ¶æˆ‘ä»¬çš„æäº¤ã€‚å¦‚æœæˆ‘ä»¬æƒ³åˆ é™¤ä¸€ä¸ªæäº¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ drop å®ƒã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æˆ–è€…ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å°†å¤šä¸ªæäº¤å‹ç¼©åœ¨ä¸€èµ·ä»¥è·å¾—æ›´æ¸…æ™°çš„å†å²è®°å½•ï¼Œæ²¡é—®é¢˜ï¼\n\u003c!DOCTYPE html\u003e Responsive Image äº¤äº’å¼å˜åŸºä½¿æ‚¨å¯ä»¥å¯¹å°è¯•å˜åŸºçš„æäº¤è¿›è¡Œå¤§é‡æ§åˆ¶ï¼Œå³ä½¿åœ¨å½“å‰æ´»åŠ¨åˆ†æ”¯ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼\nResetting æˆ‘ä»¬å¯èƒ½ä¼šæäº¤æˆ‘ä»¬ä»¥åä¸æƒ³è¦çš„æ›´æ”¹ã€‚ä¹Ÿè®¸å®ƒæ˜¯ä¸€ä¸ªWIPæäº¤ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå¼•å…¥é”™è¯¯çš„æäº¤ï¼åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ git resetã€‚\ngit reset ä¼šåˆ é™¤æ‰€æœ‰å½“å‰æš‚å­˜çš„æ–‡ä»¶ï¼Œå¹¶è®©æˆ‘ä»¬æ§åˆ¶ HEAD åº”è¯¥æŒ‡å‘çš„ä½ç½®ã€‚\nSoft reset è½¯é‡ç½®å°† HEAD ç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ï¼ˆæˆ–æäº¤çš„ç´¢å¼•ä¸ HEAD ç›¸æ¯”ï¼‰ï¼Œè€Œä¸ä¼šæ¶ˆé™¤éšååœ¨æäº¤ä¸­å¼•å…¥çš„æ›´æ”¹ï¼\nå‡è®¾æˆ‘ä»¬ä¸æƒ³ä¿ç•™æ·»åŠ äº†style.cssæ–‡ä»¶çš„æäº¤9e78iï¼Œä¹Ÿä¸æƒ³ä¿ç•™æ·»åŠ äº†index.jsæ–‡ä»¶çš„æäº¤035ccã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ç¡®å®å¸Œæœ›ä¿ç•™æ–°æ·»åŠ çš„ style.css å’Œ index.js æ–‡ä»¶ï¼è½¯é‡ç½®çš„å®Œç¾ç”¨ä¾‹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¾“å…¥ git status æ—¶ï¼Œæ‚¨ä¼šçœ‹åˆ°æˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®å¯¹å…ˆå‰æäº¤æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ã€‚è¿™å¾ˆæ£’ï¼Œå› ä¸ºè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¿®å¤è¿™äº›æ–‡ä»¶çš„å†…å®¹å¹¶åœ¨ä»¥åå†æ¬¡æäº¤å®ƒä»¬ï¼\nHard reset æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¸æƒ³ä¿ç•™æŸäº›æäº¤å¼•å…¥çš„æ›´æ”¹ã€‚ä¸è½¯é‡ç½®ä¸åŒï¼Œæˆ‘ä»¬ä¸å†éœ€è¦è®¿é—®å®ƒä»¬ã€‚Git åº”è¯¥ç®€å•åœ°å°†å…¶çŠ¶æ€é‡ç½®å›æŒ‡å®šæäº¤æ—¶çš„çŠ¶æ€ï¼šè¿™ç”šè‡³åŒ…æ‹¬å·¥ä½œç›®å½•å’Œæš‚å­˜æ–‡ä»¶ä¸­çš„æ›´æ”¹ï¼\n\u003c!DOCTYPE html\u003e Responsive Image Git ä¸¢å¼ƒäº†åœ¨ 9e78i å’Œ 035cc ä¸Šå¼•å…¥çš„æ›´æ”¹ï¼Œå¹¶å°†å…¶çŠ¶æ€é‡ç½®ä¸ºæäº¤ ec5be æ—¶çš„çŠ¶æ€ã€‚\nReverting æ’¤æ¶ˆæ›´æ”¹çš„å¦ä¸€ç§æ–¹æ³•æ˜¯æ‰§è¡Œgit revertã€‚é€šè¿‡æ¢å¤æŸä¸ªæäº¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«æ¢å¤çš„æ›´æ”¹çš„æ–°æäº¤ï¼\nå‡è®¾ ec5be æ·»åŠ äº†ä¸€ä¸ª index.js æ–‡ä»¶ã€‚åæ¥ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ„è¯†åˆ°æˆ‘ä»¬ä¸å†å¸Œæœ›è¿™æ¬¡æäº¤å¼•å…¥çš„è¿™ç§å˜åŒ–ï¼è®©æˆ‘ä»¬æ¢å¤ ec5be æäº¤ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å®Œç¾çš„ï¼æäº¤9e78iæ¢å¤äº†ç”±ec5beæäº¤å¼•å…¥çš„æ›´æ”¹ã€‚æ‰§è¡Œ git revert éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥æ’¤æ¶ˆæŸä¸ªæäº¤ï¼Œè€Œæ— éœ€ä¿®æ”¹åˆ†æ”¯çš„å†å²è®°å½•ã€‚\nCherry-picking å½“æŸä¸ªåˆ†æ”¯åŒ…å«åœ¨æ´»åŠ¨åˆ†æ”¯ä¸Šå¼•å…¥äº†æˆ‘ä»¬éœ€è¦çš„æ›´æ”¹çš„æäº¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ cherry-pick è¯¥å‘½ä»¤ï¼é€šè¿‡ cherry-pick æäº¤ï¼Œæˆ‘ä»¬åœ¨æ´»åŠ¨åˆ†æ”¯ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°æäº¤ï¼Œå…¶ä¸­åŒ…å«ç”± cherry-pick æäº¤æ‰€å¼•å…¥çš„æ›´æ”¹ã€‚\nå‡è®¾ dev åˆ†æ”¯ä¸Šçš„æäº¤ 76d12 æ·»åŠ äº†æˆ‘ä»¬æƒ³è¦åœ¨ master åˆ†æ”¯ä¸­çš„ index.js æ–‡ä»¶çš„æ›´æ”¹ã€‚æˆ‘ä»¬ä¸æƒ³è¦æ•´ä¸ªï¼Œæˆ‘ä»¬åªå…³å¿ƒè¿™ä¸€æ¬¡æäº¤ï¼\n\u003c!DOCTYPE html\u003e Responsive Image å¾ˆé…·ï¼Œmaster åˆ†æ”¯ç°åœ¨åŒ…å«äº† 76d12 å¼•å…¥çš„æ›´æ”¹ï¼\nFetching å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªè¿œç¨‹ Git åˆ†æ”¯ï¼Œä¾‹å¦‚ GitHub ä¸Šçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿè¿œç¨‹åˆ†æ”¯å…·æœ‰å½“å‰åˆ†æ”¯æ²¡æœ‰çš„æäº¤ï¼ä¹Ÿè®¸å¦ä¸€ä¸ªåˆ†æ”¯è¢«åˆå¹¶äº†ï¼Œä½ çš„åŒäº‹æ¨é€äº†ä¸€ä¸ªå¿«é€Ÿä¿®å¤ï¼Œç­‰ç­‰ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¿œç¨‹åˆ†æ”¯ä¸Šæ‰§è¡Œ git fetch åœ¨æœ¬åœ°è·å–è¿™äº›æ›´æ”¹ï¼å®ƒä¸ä¼šä»¥ä»»ä½•æ–¹å¼å½±å“æ‚¨çš„æœ¬åœ°åˆ†æ”¯ï¼šfetch åªæ˜¯ä¸‹è½½æ–°æ•°æ®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬ç°åœ¨å¯ä»¥çœ‹åˆ°è‡ªä¸Šæ¬¡æ¨é€ä»¥æ¥æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ï¼æ—¢ç„¶æˆ‘ä»¬åœ¨æœ¬åœ°æ‹¥æœ‰æ–°æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†³å®šè¦å¦‚ä½•å¤„ç†è¿™äº›æ•°æ®ã€‚\nPulling è™½ç„¶ git fetch å¯¹äºè·å–åˆ†æ”¯çš„è¿œç¨‹ä¿¡æ¯éå¸¸æœ‰ç”¨ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œ git pullã€‚ git pull å®é™…ä¸Šæ˜¯ä¸¤ä¸ªå‘½ä»¤åˆäºŒä¸ºä¸€ï¼šgit fetch å’Œ git mergeã€‚å½“æˆ‘ä»¬ä»æºä¸­æå–æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆåƒä½¿ç”¨ git fetch ä¸€æ ·è·å–æ‰€æœ‰æ•°æ®ï¼Œä¹‹åæœ€æ–°çš„æ›´æ”¹ä¼šè‡ªåŠ¨åˆå¹¶åˆ°æœ¬åœ°åˆ†æ”¯ä¸­ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¤ªæ£’äº†ï¼Œæˆ‘ä»¬ç°åœ¨ä¸è¿œç¨‹åˆ†æ”¯å®Œç¾åŒæ­¥ï¼Œå¹¶æ‹¥æœ‰æ‰€æœ‰æœ€æ–°æ›´æ”¹ï¼\nReflog æ¯ä¸ªäººéƒ½ä¼šçŠ¯é”™ï¼Œè¿™å®Œå…¨æ²¡å…³ç³»ï¼æœ‰æ—¶ä½ å¯èƒ½ä¼šè§‰å¾—ä½ æŠŠä½ çš„ git repo æç ¸äº†ï¼Œä»¥è‡³äºä½ åªæƒ³å®Œå…¨åˆ é™¤å®ƒã€‚\ngit reflog æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼Œç”¨äºæ˜¾ç¤ºæ‰€æœ‰å·²é‡‡å–çš„æ“ä½œçš„æ—¥å¿—ï¼è¿™åŒ…æ‹¬åˆå¹¶ã€é‡ç½®ã€æ¢å¤ï¼šåŸºæœ¬ä¸Šæ˜¯å¯¹åˆ†æ”¯çš„ä»»ä½•æ›´æ”¹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœæ‚¨çŠ¯äº†é”™è¯¯ï¼Œæ‚¨å¯ä»¥æ ¹æ® reflog æä¾›ç»™æˆ‘ä»¬çš„ä¿¡æ¯é€šè¿‡é‡ç½® HEAD è½»æ¾åœ°é‡åšæ­¤æ“ä½œï¼\nå‡è®¾æˆ‘ä»¬å®é™…ä¸Šå¹¶ä¸æƒ³åˆå¹¶ origin åˆ†æ”¯ã€‚å½“æˆ‘ä»¬æ‰§è¡Œ git reflog å‘½ä»¤æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°åˆå¹¶å‰ repo çš„çŠ¶æ€æ˜¯åœ¨ HEAD@{1}ã€‚è®©æˆ‘ä»¬æ‰§è¡Œ git reset å°† HEAD æŒ‡å‘å®ƒåœ¨ HEAD@{1} ä¸Šçš„ä½ç½®ï¼\n\u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€æ–°çš„ action å·²ç»æ¨é€åˆ°reflogäº†ï¼\n","permalink":"https://lifeislife.cn/posts/zh-cs%E5%8F%AF%E8%A7%86%E5%8C%96-%E5%B8%B8%E7%94%A8%E7%9A%84git%E5%91%BD%E4%BB%A4/","summary":"\u003ch1 id=\"cs-å¯è§†åŒ–---å¸¸ç”¨çš„-git-å‘½ä»¤\"\u003eCS å¯è§†åŒ– - å¸¸ç”¨çš„ Git å‘½ä»¤\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAuthorï¼šLydia Hallie\nè¯‘ï¼š\u003ca href=\"https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1\"\u003eğŸŒ³ğŸš€ CS Visualized: Useful Git Commands - DEV Community\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå°½ç®¡ Git æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œä½†æˆ‘æƒ³å¤§å¤šæ•°äººéƒ½ä¼šåŒæ„ï¼Œå½“æˆ‘è¯´å®ƒä¹Ÿå¯èƒ½æ˜¯â€¦â€¦ä¸€åœºå½»å¤´å½»å°¾çš„å™©æ¢¦å½“æˆ‘æ‰§è¡ŒæŸä¸ªå‘½ä»¤æ—¶åˆ†æ”¯äº¤äº’ï¼Œå®ƒå°†å¦‚ä½•å½±å“å†å²è®°å½•ï¼Ÿå½“æˆ‘åœ¨\u003ccode\u003emaster\u003c/code\u003eåˆ†æ”¯æ‰§è¡Œ\u003ccode\u003ehard reset\u003c/code\u003eã€\u003ccode\u003eforce push\u003c/code\u003eåˆ° \u003ccode\u003eorigin\u003c/code\u003eã€åœ¨\u003ccode\u003e.git\u003c/code\u003eæ–‡ä»¶å¤¹æ‰§è¡Œ\u003ccode\u003erimraf\u003c/code\u003eçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„åŒäº‹éƒ½å“­äº†ï¼Ÿ\u003c/p\u003e","title":"ZH-CS å¯è§†åŒ– - å¸¸ç”¨çš„ Git å‘½ä»¤"},{"content":"æ•°ç»„åˆå§‹åŒ– int arr[6] = { [0]=5, [1]=6, [3] =10, [4]=11 }; æˆ– int arr[6] = { [0]=5, 6, [3] =10, 11 }; æˆ– int arr[6] = { [3] =10, 11, [0]=5, 6 }; (æŒ‡å®šé¡ºåºå¯å˜) å‡ç­‰æ•ˆäºï¼šint arr[6] = {5, 6, 0, 10, 11, 0}; Note:\nè‹¥åœ¨æŸä¸ªæŒ‡å®šåˆå§‹åŒ–é¡¹ç›®åè·Ÿæœ‰ä¸è‡³ä¸€ä¸ªå€¼ï¼Œå¦‚[3]=10,11ã€‚åˆ™å¤šå‡ºçš„æ•°å€¼ç”¨äºå¯¹åç»­çš„æ•°ç»„å…ƒç´ è¿›è¡Œåˆå§‹åŒ–ï¼Œå³æ•°å€¼ 11 ç”¨æ¥åˆå§‹åŒ– arr[4]ã€‚ C æ•°ç»„åˆå§‹åŒ–ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åï¼Œæœªåˆå§‹åŒ–çš„å…ƒç´ å°†è¢«è‡ªåŠ¨åœ°åˆå§‹åŒ–ä¸º 0 æˆ– NULL(é’ˆå¯¹æŒ‡é’ˆå˜é‡)ã€‚æœªç»è¿‡ä»»ä½•åˆå§‹åŒ–çš„æ•°ç»„ï¼Œæ‰€æœ‰å…ƒç´ çš„å€¼éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚ GNU C è¿˜æ”¯æŒ[first â€¦ last]=value(â€¦ä¸¤ä¾§æœ‰ç©ºæ ¼) çš„å½¢å¼ï¼Œå°†è¯¥èŒƒå›´å†…çš„è‹¥å¹²å…ƒç´ åˆå§‹åŒ–ä¸ºç›¸åŒå€¼ã€‚å¦‚ï¼š\nint arr[]={ [0 ... 3]=1, [4 ... 5]=2, [6 ... 9] =3}; æˆ– int arr[]={ [0 ... 3]=1, [4 ... 5]=2, [6 ... 8] =3, [9] =3}; å‡ç­‰æ•ˆäºï¼šint arr[10] = {1, 1, 1, 1, 2, 2, 3, 3, 3, 3}; ç»“æ„ä½“åˆå§‹åŒ– å¯¹äºç»“æ„ä½“\nstruct Structure{ int a; int b; }; æˆ– struct Structure{ int a, b; }; æœ‰ä»¥ä¸‹å‡ ç§åˆå§‹åŒ–æ–¹å¼ï¼š ç”¨.fieldname=æŒ‡å®šå¾…åˆå§‹åŒ–æˆå‘˜å(æˆå‘˜åˆå§‹åŒ–é¡ºåºå¯å˜)ï¼Œæ¨èä½¿ç”¨çš„æ–¹å¼ï¼Œè¯¥æ–¹å¼åˆå§‹åŒ–æ—¶ä¸å¿…ä¸¥æ ¼æŒ‰ç…§å®šä¹‰æ—¶çš„é¡ºåºï¼Œçµæ´»æ€§å¾ˆé«˜ã€‚\nstruct Structure tStct = { .a = 1, .b = 2 }; ç”¨fieldname:æŒ‡å®šå¾…åˆå§‹åŒ–æˆå‘˜å(æˆå‘˜åˆå§‹åŒ–é¡ºåºå¯å˜)ï¼ŒGCC 2.5 å·²åºŸé™¤ï¼Œä½†ä»æ¥å—\nstruct Structure tStct = { a : 1, b : 2 }; ç”¨åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–\nstruct Structure tStct = { 1, 2 }; ç»“æ„ä½“æ•°ç»„åˆå§‹åŒ– æ–¹æ³•ä¸€ï¼š\nstruct Structure ptStct[10] = { [2].b = 0x2B, [2].a = 0x2A, [0].a = 0x0A }; æ–¹æ³•äºŒï¼šè¯¥æ–¹æ³•å¯ä»¥ç”¨äºæ¸…é™¤ç»“æ„ä½“ã€‚\nmemset(ptStct, 0, sizeof(struct Structure) * 10); è”åˆä½“åˆå§‹åŒ– å¯ç”¨.fieldname(æˆ–å·²åºŸå¼ƒçš„fieldname:) æŒ‡ç¤ºç¬¦æ¥æŒ‡å®šä½¿ç”¨è”åˆä½“çš„å“ªä¸ªå…ƒç´ ï¼Œå¦‚ï¼š\nunion UnionT { int i; double d; }; union UnionT tUnion = { .d = 4 }; ","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80%E6%95%B0%E7%BB%84-%E7%BB%93%E6%9E%84%E4%BD%93-%E7%BB%93%E6%9E%84%E4%BD%93%E6%95%B0%E7%BB%84-%E8%81%94%E5%90%88%E4%BD%93%E5%88%9D%E5%A7%8B%E5%8C%96/","summary":"\u003ch2 id=\"æ•°ç»„åˆå§‹åŒ–\"\u003eæ•°ç»„åˆå§‹åŒ–\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-C\" data-lang=\"C\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e11\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e \u003cspan class=\"err\"\u003eæˆ–\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e11\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e \u003cspan class=\"err\"\u003eæˆ–\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e11\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e6\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"err\"\u003eæŒ‡å®šé¡ºåºå¯å˜\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"err\"\u003eå‡ç­‰æ•ˆäºï¼š\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e11\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eNote:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eè‹¥åœ¨æŸä¸ªæŒ‡å®šåˆå§‹åŒ–é¡¹ç›®åè·Ÿæœ‰ä¸è‡³ä¸€ä¸ªå€¼ï¼Œå¦‚\u003ccode\u003e[3]=10,11\u003c/code\u003eã€‚åˆ™å¤šå‡ºçš„æ•°å€¼ç”¨äºå¯¹åç»­çš„æ•°ç»„å…ƒç´ è¿›è¡Œåˆå§‹åŒ–ï¼Œå³æ•°å€¼ 11 ç”¨æ¥åˆå§‹åŒ– arr[4]ã€‚\u003c/li\u003e\n\u003cli\u003eC æ•°ç»„åˆå§‹åŒ–ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åï¼Œæœªåˆå§‹åŒ–çš„å…ƒç´ å°†è¢«è‡ªåŠ¨åœ°åˆå§‹åŒ–ä¸º 0 æˆ– NULL(é’ˆå¯¹æŒ‡é’ˆå˜é‡)ã€‚æœªç»è¿‡ä»»ä½•åˆå§‹åŒ–çš„æ•°ç»„ï¼Œæ‰€æœ‰å…ƒç´ çš„å€¼éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eGNU C è¿˜æ”¯æŒ\u003ccode\u003e[first â€¦ last]=value\u003c/code\u003e(\u003ccode\u003eâ€¦\u003c/code\u003e\u003cstrong\u003eä¸¤ä¾§æœ‰ç©ºæ ¼\u003c/strong\u003e) çš„å½¢å¼ï¼Œå°†è¯¥èŒƒå›´å†…çš„è‹¥å¹²å…ƒç´ åˆå§‹åŒ–ä¸ºç›¸åŒå€¼ã€‚å¦‚ï¼š\u003c/p\u003e","title":"Cè¯­è¨€æ•°ç»„/ç»“æ„ä½“/ç»“æ„ä½“æ•°ç»„/è”åˆä½“åˆå§‹åŒ–"},{"content":"åŠŸèƒ½ watch å‘½ä»¤çš„åŠŸèƒ½å¦‚å…¶åï¼Œå¯ä»¥ç›‘è§†å‘½ä»¤çš„æ‰§è¡Œç»“æœã€‚å®ƒå®ç°çš„åŸç†å°±æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡å‘½ä»¤ï¼Œç„¶åæ˜¾ç¤ºç»“æœã€‚ä»–çš„ç”¨é€”å¾ˆå¹¿ï¼Œå…·ä½“æ€ä¹ˆç”¨å°±é æƒ³è±¡åŠ›äº†ã€‚\nå‘½ä»¤å‚æ•° -n # æˆ–--interval watché»˜è®¤æ¯2ç§’è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œå¯ä»¥ç”¨-næˆ–-intervalæ¥æŒ‡å®šé—´éš”çš„æ—¶é—´ã€‚ -d # æˆ–--differences ç”¨-dæˆ–--differences é€‰é¡¹watch ä¼šé«˜äº®æ˜¾ç¤ºå˜åŒ–çš„åŒºåŸŸã€‚ è€Œ-d=cumulativeé€‰é¡¹ä¼šæŠŠå˜åŠ¨è¿‡çš„åœ°æ–¹(ä¸ç®¡æœ€è¿‘çš„é‚£æ¬¡æœ‰æ²¡æœ‰å˜åŠ¨)éƒ½é«˜äº®æ˜¾ç¤ºå‡ºæ¥ã€‚ -t # æˆ–-no-title ä¼šå…³é—­watchå‘½ä»¤åœ¨é¡¶éƒ¨çš„æ—¶é—´é—´éš”,å‘½ä»¤ï¼Œå½“å‰æ—¶é—´çš„è¾“å‡ºã€‚ -h # æˆ–--help # æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ å®ä¾‹ watch -d \u0026#39;ls -l | grep tmp\u0026#39; # ç›‘æµ‹å½“å‰ç›®å½•ä¸­ scf\u0026#39; çš„æ–‡ä»¶çš„å˜åŒ– ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-watch%E5%91%A8%E6%9C%9F%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4/","summary":"\u003ch2 id=\"åŠŸèƒ½\"\u003eåŠŸèƒ½\u003c/h2\u003e\n\u003cp\u003ewatch å‘½ä»¤çš„åŠŸèƒ½å¦‚å…¶åï¼Œå¯ä»¥ç›‘è§†å‘½ä»¤çš„æ‰§è¡Œç»“æœã€‚å®ƒå®ç°çš„åŸç†å°±æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡å‘½ä»¤ï¼Œç„¶åæ˜¾ç¤ºç»“æœã€‚ä»–çš„ç”¨é€”å¾ˆå¹¿ï¼Œå…·ä½“æ€ä¹ˆç”¨å°±é æƒ³è±¡åŠ›äº†ã€‚\u003c/p\u003e\n\u003ch2 id=\"å‘½ä»¤å‚æ•°\"\u003eå‘½ä»¤å‚æ•°\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-n # æˆ–--interval  watché»˜è®¤æ¯2ç§’è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œå¯ä»¥ç”¨-næˆ–-intervalæ¥æŒ‡å®šé—´éš”çš„æ—¶é—´ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-d # æˆ–--differences  ç”¨-dæˆ–--differences é€‰é¡¹watch ä¼šé«˜äº®æ˜¾ç¤ºå˜åŒ–çš„åŒºåŸŸã€‚ è€Œ-d=cumulativeé€‰é¡¹ä¼šæŠŠå˜åŠ¨è¿‡çš„åœ°æ–¹(ä¸ç®¡æœ€è¿‘çš„é‚£æ¬¡æœ‰æ²¡æœ‰å˜åŠ¨)éƒ½é«˜äº®æ˜¾ç¤ºå‡ºæ¥ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-t # æˆ–-no-title  ä¼šå…³é—­watchå‘½ä»¤åœ¨é¡¶éƒ¨çš„æ—¶é—´é—´éš”,å‘½ä»¤ï¼Œå½“å‰æ—¶é—´çš„è¾“å‡ºã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-h # æˆ–--help # æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"å®ä¾‹\"\u003eå®ä¾‹\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewatch -d \u0026#39;ls -l | grep tmp\u0026#39;       # ç›‘æµ‹å½“å‰ç›®å½•ä¸­ scf\u0026#39; çš„æ–‡ä»¶çš„å˜åŒ–\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-watch å‘¨æœŸæ‰§è¡Œå‘½ä»¤"},{"content":"Git hooks ç®€ä»‹ \u003c!DOCTYPE html\u003e Responsive Image Git èƒ½åœ¨ç‰¹å®šçš„é‡è¦åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘è‡ªå®šä¹‰è„šæœ¬ã€‚æ¯”å¦‚ï¼Œcommitä¹‹å‰æ£€æŸ¥commit messageæ˜¯å¦ç¬¦åˆçº¦å®šçš„æ ¼å¼ï¼Œpushä¹‹å‰æ£€æŸ¥ä»£ç æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦ç¼–è¯‘é€šè¿‡ç­‰ç­‰ã€‚Git å°±æä¾›äº†hooksè¿™æ ·çš„æœºåˆ¶ã€‚\næˆ‘ä»¬åœ¨å“ªèƒ½æ‰¾åˆ°hookså‘¢ï¼Ÿåœ¨åˆå§‹åŒ–ä»£ç ä»“åº“git initæ—¶ï¼ŒGit ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª.git/hooksç›®å½•ï¼Œé‡Œé¢å­˜æ”¾äº†æ‰€æœ‰çš„é’©å­ã€‚å› ä¸º.gitæ˜¯éšè—ç›®å½•ï¼Œæ˜¾ç¤ºéšè—ç›®å½•åå°±å¯ä»¥æ‰¾åˆ°hooksè¿™ä¸ªç›®å½•ã€‚\nåœ¨ VSCode é‡Œä¸€èˆ¬é»˜è®¤æŠŠ.gitç›®å½•æ’é™¤æ˜¾ç¤ºï¼Œæ‰€ä»¥æ‰“å¼€é¡¹ç›®ç›®å½•æ—¶ä¸ä¼šæ˜¾ç¤ºè¯¥ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥æ”¶åˆ°åœ¨ VSCode æ˜¾ç¤º.gitç›®å½•ï¼šæ‰“å¼€è®¾ç½®ç•Œé¢ï¼Œæœç´¢excludeæ‰¾åˆ°å›¾ä¸­çš„è®¾ç½®ï¼Œå°†.gitç›®å½•ä»æ’é™¤åˆ—è¡¨ä¸­ç§»é™¤ï¼Œå³å¯åœ¨ VSCode ä¸­æ˜¾ç¤º.gitç›®å½•ã€‚\nç°åœ¨æˆ‘ä»¬æ‰¾åˆ°äº†hooksï¼Œè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ æ‰€æœ‰é»˜è®¤çš„hookséƒ½æ˜¯ä»¥.sampleä¸ºåç¼€ï¼Œåªéœ€è¦ç§»é™¤.sampleå³å¯æ¿€æ´»hooksã€‚\néšä¾¿æ‰“å¼€ä¸€ä¸ªhooksæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå®é™…æ˜¯hookså°±æ˜¯ä¸€ä¸ªä¸ªshellè„šæœ¬ã€‚è¿™äº›è„šæœ¬ä¼šåœ¨ç‰¹å®šçš„åŠ¨ä½œå‘ç”Ÿæ—¶è¢«æ‰§è¡Œã€‚ç¤ºèŒƒçš„è¿™äº›hookséƒ½æ˜¯shellè„šæœ¬ï¼Œå®é™…ä¸Šåªè¦æ˜¯æ–‡ä»¶åæ­£ç¡®çš„å¯æ‰§è¡Œè„šæœ¬éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¦‚å°†pre-pushå†…å®¹æ”¹ä¸ºpython, Rubyç­‰ç­‰è„šæœ¬éƒ½å¯ä»¥ã€‚\nå¦‚ä½•ä½¿ç”¨ä¸€ä¸ª hooks ä»¥pre-commitè¿™ä¸ªhooksä¸ºä¾‹ï¼Œæ¥ç¤ºèŒƒä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Git hooksã€‚\næ‰“å¼€.git/hooks/pre-commit.sampleï¼Œè¿™ä¸ªhooksçš„å¤§ä½“åŠŸèƒ½æ˜¯æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦åŒ…å«éASCIIå­—ç¬¦ï¼Œå¦‚æœåŒ…å«ï¼Œåˆ™æ— æ³•æ‰§è¡Œcommitæ“ä½œï¼Œå¹¶æç¤ºç”¨æˆ·ä¿®æ”¹æ–‡ä»¶åã€‚\nåˆ é™¤pre-commit.sampleçš„åç¼€\nâœ mv .git/hooks/pre-commit.sample .git/hooks/pre-commit æ·»åŠ ä¸€ä¸ªæœ‰æ±‰å­—çš„æ–‡ä»¶åï¼Œå¦‚æµ‹è¯•.md\nâœ touch æµ‹è¯•.md å°†æ–°æ–‡ä»¶æäº¤\nâœ git add æµ‹è¯•.md âœ git commit -m \u0026#34;æµ‹è¯•\u0026#34; Error: Attempt to add a non-ASCII file name. This can cause problems if you want to work with people on other platforms. To be portable it is advisable to rename the file. If you know what you are doing you can disable this check using: git config hooks.allownonascii true å¦‚æœæ— æ³•æ‰§è¡Œpre-commitå¯èƒ½æœªè¢«èµ‹äºˆæ‰§è¡Œæƒé™ï¼Œä¿®æ”¹ä¸€ä¸‹æƒé™å³å¯ï¼šchmod +x .git/hooks/pre-commit\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨è¿›è¡Œcommitæ“ä½œæ—¶è¢«ä¸­æ–­äº†ï¼Œä¼šæç¤ºç”¨æˆ·ä¿®æ”¹æ–‡ä»¶åã€‚å…¶ä»–çš„hooksç”¨æ³•ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰åœ¨ä»€ä¹ˆæ—¶å€™å¯ä»¥pushï¼Œä»€ä¹ˆæ—¶å€™å¯ä»¥rebaseç­‰ç­‰ã€‚\nhooksé€šå¸¸ä¼šè¢«ç”¨æ¥åšæäº¤ä»£ç å‰çš„ä¸€ä¸ªæ£€æŸ¥ï¼Œæ¯”å¦‚é£æ ¼æ˜¯å¦ç»Ÿä¸€ï¼Œç¼–è¯‘æ˜¯å¦é€šè¿‡ç­‰ç­‰ã€‚å¦‚æœå›¢é˜Ÿåˆä½œæ—¶ï¼Œè¿™æ ·çš„æ£€æŸ¥æœ€å¥½èƒ½å¤Ÿä¸æˆå‘˜ä¿æŒä¸€è‡´ï¼Œä½†æ˜¯hooksæ‰€åœ¨çš„.gitç›®å½•æ˜¯ä¸ä¼šè¢«Gitè‡ªå·±ç‰ˆæœ¬ç®¡ç†çš„ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒä¸èƒ½æ¨é€åˆ°è¿œç«¯ä¸æˆå‘˜å…±äº«ã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\nå¦‚ä½•åŒæ­¥hooksæ–‡ä»¶ æ–¹æ¡ˆä¸€ï¼šä¸æºç æ”¾åœ¨ä¸€èµ· ä»£ç ä»“åº“ä¸­æ–°å»ºä¸€ä¸ªhooksç›®å½•ï¼Œå°†è¯¥ç›®å½•åŒæ­¥åˆ°è¿œç¨‹ã€‚å…¶ä»–æˆå‘˜ä¸‹è½½ä»£ç æ—¶ä¹Ÿä¼šä¸‹è½½hooksç›®å½•ï¼Œé€šè¿‡è„šæœ¬çš„æ–¹å¼å°†hooksç›®å½•è¦†ç›–æœ¬åœ°çš„.git/hooksç›®å½•ã€‚\n#!/bin/bash cp -r ./hooks/ .git/hooks/ chmod +x -R .git/hooks echo \u0026#39;Hooks sync to remote success!\u0026#39; exit 0 æ–¹æ¡ˆäºŒï¼šä½¿ç”¨pre-commitæ¡†æ¶ pre_commit æ˜¯ pre-commit åŒåçš„å¼€æºåº”ç”¨ï¼Œä½¿ç”¨pre-commitï¼Œä»£ç ä»“åº“é‡Œåªéœ€è¦æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨pre_commitç”Ÿæˆç»Ÿä¸€çš„hooksã€‚\npre-commitéšç€å‘å±•ï¼Œå·²ç»ä¸å•å•åªèƒ½ç”¨äºgit hooksçš„pre-commité˜¶æ®µï¼Œè€Œæ˜¯èƒ½ä½œç”¨äºæ‰€æœ‰git hooksçš„æ‰€æœ‰é˜¶æ®µï¼Œå¦‚ä¸Šé¢è¯´çš„prepare-commit-msg, commit-msg, post-commiç­‰ã€‚\nå®‰è£…pre-commit\npip install pre-commit åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶ .pre-commit-config.yaml\ntouch .pre-commit-config.yaml é¦–å…ˆäº†è§£é…ç½®çš„æ ¼å¼\né¡¶å±‚æœ‰ä¸€ä¸ªå‚æ•°åä¸º repos repos ä¸­æ¯ä¸ªå…ƒç´ ä¸º repo ï¼Œä»£è¡¨ä¸€ä¸ªä»£ç åº“ï¼Œä¸€èˆ¬æ˜¯githubæˆ–gitlabé“¾æ¥ã€‚åœ¨ä½¿ç”¨æ—¶ä¼šä»å¯¹åº”åœ°å€ä¸‹è½½ï¼Œå¦‚æœå‡ºç°ä¸‹è½½æ…¢çš„æƒ…å†µï¼Œå¯ä»¥åœ¨giteeæœç´¢æ˜¯å¦æœ‰ç›¸å…³é•œåƒã€‚ æ¯ä¸ª repo ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª hook ï¼Œæ¯ä¸ª hook ä»£è¡¨ä¸€ä¸ªä»»åŠ¡ã€‚ æ¯ä¸ªä»»åŠ¡é‡Œå¯ç†è§£ä¸ºä¸€ä¸ªå‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œä¾‹å¦‚flake8/yapf/blackã€‚ pre_commitå®˜æ–¹æä¾›äº†å„ç§é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ã€‚æ¯”å¦‚æˆ‘éœ€è¦ä¸€ä¸ªæ ¼å¼åŒ–Cè¯­è¨€ä»£ç çš„é…ç½®ï¼Œé€‰æ‹©äº†mirrors-clang-formatï¼Œè¿˜é€‰äº†ä¸€ä¸ªç”¨æ¥åˆ é™¤è¡Œå°¾ç©ºæ ¼çš„ã€‚\nrepos: - repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.3.0 hooks: - id: trailing-whitespace - repo: https://github.com/pre-commit/mirrors-clang-format rev: v14.0.6 hooks: - id: clang-format types_or: [c] å‚æ•°çš„å«ä¹‰å¯ä»¥å‚è€ƒpre-commitçš„æ–‡æ¡£ã€‚æ¯ä¸ªidå¯¹åº”çš„å…¶å®éƒ½æ˜¯ä¸€ä¸ªç¨‹åºï¼Œä¸ºäº†ä¿è¯éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œè¿˜éœ€è¦å®‰è£…è¿™äº›ç¨‹åºã€‚ä¸€èˆ¬åœ¨ä»“åº“çš„READMEä¸­éƒ½ä¼šæœ‰æç¤ºå¦‚ä½•å®‰è£…ã€‚\næ ¹æ®é…ç½®æ–‡ä»¶å®‰è£…hooks åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š\npre-commit install åœ¨æ‰§è¡Œgit commitå‘½ä»¤æ—¶å°†ä¼šè‡ªåŠ¨æ£€æŸ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œpre-commitä¼šä»ä»“åº“é‡Œä¸‹è½½ä»£ç ï¼Œç„¶åæ ¹æ®é‡Œé¢çš„é…ç½®æ‰§è¡Œç›¸åº”çš„è„šæœ¬ã€‚å®Œæˆå„ç§æ£€æŸ¥ã€‚\nå¸¸ç”¨å‘½ä»¤ # æ‰‹åŠ¨å¯¹æ‰€æœ‰çš„æ–‡ä»¶æ‰§è¡Œ hooksï¼Œæ–°å¢ hook çš„æ—¶å€™å¯ä»¥æ‰§è¡Œï¼Œä½¿å¾—ä»£ç å‡ç¬¦åˆè§„èŒƒã€‚ç›´æ¥æ‰§è¡Œè¯¥æŒ‡ä»¤åˆ™æ— éœ€ç­‰åˆ° pre-commit é˜¶æ®µå†è§¦å‘ hooks pre-commit run --all-files # æ‰§è¡Œç‰¹å®š hooks pre-commit run \u0026lt;hook_id\u0026gt; # å°†æ‰€æœ‰çš„hookæ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬/tag pre-commit autoupdate # æŒ‡å®šæ›´æ–° repo pre-commit autoupdate --repo https://github.com/pre-commit/mirrors-clang-format å‚è€ƒèµ„æ–™ C++ é¡¹ç›®ä¸­ä½¿ç”¨ Pre-commit ååŠ©å®ç°ä»£ç è§„èŒƒæ£€æŸ¥_æ¸…æ¬¢å®ˆæŠ¤è€…çš„åšå®¢-CSDN åšå®¢\ngit push ä¹‹å‰è‡ªåŠ¨ç¼–è¯‘éªŒè¯ - ç®€ä¹¦\nä½¿ç”¨ pre-commit å®ç°ä»£ç æ£€æŸ¥_æ¸…æ¬¢å®ˆæŠ¤è€…çš„åšå®¢-CSDN åšå®¢\npre-commit\nGit åŸºæœ¬åŸç†ä»‹ç» (32)â€”â€”git hook å’Œ python_å“”å“©å“”å“©_bilibili\n","permalink":"https://lifeislife.cn/posts/git-hooks%E9%92%A9%E5%AD%90%E7%9A%84%E4%BD%BF%E7%94%A8/","summary":"\u003ch2 id=\"git-hooks-ç®€ä»‹\"\u003eGit hooks ç®€ä»‹\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208271329199.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202208271329199.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eGit èƒ½åœ¨ç‰¹å®šçš„é‡è¦åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘è‡ªå®šä¹‰è„šæœ¬ã€‚æ¯”å¦‚ï¼Œ\u003ccode\u003ecommit\u003c/code\u003eä¹‹å‰æ£€æŸ¥\u003ccode\u003ecommit message\u003c/code\u003eæ˜¯å¦ç¬¦åˆçº¦å®šçš„æ ¼å¼ï¼Œ\u003ccode\u003epush\u003c/code\u003eä¹‹å‰æ£€æŸ¥ä»£ç æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦ç¼–è¯‘é€šè¿‡ç­‰ç­‰ã€‚Git å°±æä¾›äº†\u003ccode\u003ehooks\u003c/code\u003eè¿™æ ·çš„æœºåˆ¶ã€‚\u003c/p\u003e","title":"Git hooks é’©å­çš„ä½¿ç”¨"},{"content":"ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ä¸€è‡´ ç›®å‰ä¸»æµç”µè„‘çš„ CPU éƒ½æ˜¯å¤šæ ¸å¿ƒçš„ï¼Œå¤šæ ¸å¿ƒçš„æœ‰ç‚¹å°±æ˜¯åœ¨ä¸èƒ½æå‡ CPU ä¸»é¢‘åï¼Œé€šè¿‡å¢åŠ æ ¸å¿ƒæ¥æå‡ CPU ååé‡ã€‚æ¯ä¸ªæ ¸å¿ƒéƒ½æœ‰è‡ªå·±çš„ L1 Cache å’Œ L2 Cacheï¼Œåªæ˜¯å…±ç”¨ L3 Cache å’Œä¸»å†…å­˜ã€‚æ¯ä¸ªæ ¸å¿ƒæ“ä½œæ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªæ ¸å¿ƒçš„ Cache å°±ä¸æ˜¯åŒæ­¥æ›´æ–°çš„ï¼Œè¿™æ ·å°±ä¼šå¸¦æ¥ç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰çš„é—®é¢˜ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå¦‚å›¾ï¼š \u003c!DOCTYPE html\u003e Responsive Image æœ‰ 2 ä¸ª CPUï¼Œä¸»å†…å­˜é‡Œæœ‰ä¸ªå˜é‡x=0ã€‚CPU A ä¸­æœ‰ä¸ªéœ€è¦å°†å˜é‡xåŠ 1ã€‚CPU A å°±å°†å˜é‡xåŠ è½½åˆ°è‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œç„¶åå°†å˜é‡xåŠ 1ã€‚å› ä¸ºæ­¤æ—¶ CPU A è¿˜æœªå°†ç¼“å­˜æ•°æ®å†™å›ä¸»å†…å­˜ï¼ŒCPU B å†è¯»å–å˜é‡xæ—¶ï¼Œå˜é‡xçš„å€¼ä¾ç„¶æ˜¯0ã€‚\nè¿™é‡Œçš„é—®é¢˜å°±æ˜¯æ‰€è°“çš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œå› ä¸º CPU A çš„ç¼“å­˜ä¸ CPU B çš„ç¼“å­˜æ˜¯ä¸ä¸€è‡´çš„ã€‚\nå¦‚ä½•è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ é€šè¿‡åœ¨æ€»çº¿åŠ  LOCK é”çš„æ–¹å¼ åœ¨é”ä½æ€»çº¿ä¸ŠåŠ ä¸€ä¸ª LOCK æ ‡è¯†ï¼ŒCPU A è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œé”ä½æ€»çº¿ï¼Œå…¶ä»– CPU æ­¤æ—¶æ— æ³•è¿›è¡Œå†…å­˜è¯»å†™æ“ä½œï¼Œåªæœ‰ç­‰è§£é”äº†æ‰èƒ½è¿›è¡Œæ“ä½œã€‚\nè¯¥æ–¹å¼å› ä¸ºé”ä½äº†æ•´ä¸ªæ€»çº¿ï¼Œæ‰€ä»¥æ•ˆç‡ä½ã€‚\nç¼“å­˜ä¸€è‡´æ€§åè®® MESI è¯¥æ–¹å¼å¯¹å•ä¸ªç¼“å­˜è¡Œçš„æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä¸ä¼šå½±å“åˆ°å†…å­˜å…¶ä»–æ•°æ®çš„è¯»å†™ã€‚\nåœ¨å­¦ä¹  MESI åè®®ä¹‹å‰ï¼Œç®€å•äº†è§£ä¸€ä¸‹æ€»çº¿å—…æ¢æœºåˆ¶ï¼ˆBus Snoopingï¼‰ã€‚è¦å¯¹è‡ªå·±çš„ç¼“å­˜åŠ é”ï¼Œéœ€è¦é€šçŸ¥å…¶ä»– CPUï¼Œå¤šä¸ª CPU æ ¸å¿ƒä¹‹é—´çš„æ•°æ®ä¼ æ’­é—®é¢˜ã€‚æœ€å¸¸è§çš„ä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯æ€»çº¿å—…æ¢ã€‚\nè¿™ä¸ªç­–ç•¥ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æŠŠæ‰€æœ‰çš„è¯»å†™è¯·æ±‚éƒ½é€šè¿‡æ€»çº¿å¹¿æ’­ç»™æ‰€æœ‰çš„ CPU æ ¸å¿ƒï¼Œç„¶åè®©å„ä¸ªæ ¸å¿ƒå»â€œå—…æ¢â€è¿™äº›è¯·æ±‚ï¼Œå†æ ¹æ®æœ¬åœ°çš„æƒ…å†µè¿›è¡Œå“åº”ã€‚MESI å°±æ˜¯åŸºäºæ€»çº¿å—…æ¢æœºåˆ¶çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚\nMESI åè®®çš„ç”±æ¥æ˜¯å¯¹ Cache Line çš„å››ä¸ªä¸åŒçš„æ ‡è®°ï¼Œåˆ†åˆ«æ˜¯ï¼š\nçŠ¶æ€ çŠ¶æ€ æè¿° ç›‘å¬ä»»åŠ¡ Modified å·²ä¿®æ”¹ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®è¢«ä¿®æ”¹äº†ï¼Œå’Œå†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬ Cache ä¸­ Cache Line å¿…é¡»æ—¶åˆ»ç›‘å¬æ‰€æœ‰è¯•å›¾è¯»è¯¥ Cache Line ç›¸å¯¹äºä¸»å­˜çš„æ“ä½œï¼Œè¿™ç§æ“ä½œå¿…é¡»åœ¨ç¼“å­˜å°†è¯¥ Cache Line å†™å›ä¸»å­˜å¹¶å°†çŠ¶æ€æ”¹ä¸º S çŠ¶æ€ä¹‹å‰ï¼Œè¢«å»¶è¿Ÿæ‰§è¡Œ Exclusive ç‹¬äº«ï¼Œäº’æ–¥ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬ Cache Cache Line å¿…é¡»ç›‘å¬å…¶ä»–ç¼“å­˜è¯»ä¸»å­˜ä¸­è¯¥ Cache Line çš„æ“ä½œï¼Œä¸€æ—¦æœ‰è¿™ç§æ“ä½œï¼Œè¯¥ Cache Line éœ€è¦æ”¹ä¸º S çŠ¶æ€ Shared å…±äº«çš„ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œæ•°æ®å­˜åœ¨äºå¾ˆå¤šä¸ª Cache ä¸­ Cache Line å¿…é¡»ç›‘å¬å…¶ä»– Cache Line ä½¿è¯¥ Cache Line æ— æ•ˆæˆ–è€…ç‹¬äº«è¯¥ Cache Line çš„è¯·æ±‚ï¼Œå¹¶å°† Cache Line æ”¹ä¸º I çŠ¶æ€ Invalid æ— æ•ˆçš„ è¯¥ Cache Line æ— æ•ˆ æ—  æ•´ä¸ª MESI çš„çŠ¶æ€ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºæ¥è¡¨ç¤ºå®ƒçš„çŠ¶æ€æµè½¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸åŒçŠ¶æ€è§¦å‘çš„äº‹ä»¶æ“ä½œï¼Œå¯èƒ½æ¥è‡ªäºå½“å‰ CPU æ ¸å¿ƒï¼Œä¹Ÿå¯èƒ½æ¥è‡ªæ€»çº¿é‡Œå…¶ä»– CPU æ ¸å¿ƒå¹¿æ’­å‡ºæ¥çš„ä¿¡å·ã€‚æˆ‘æŠŠå„ä¸ªçŠ¶æ€ä¹‹é—´çš„æµè½¬ç”¨è¡¨æ ¼æ€»ç»“äº†ä¸€ä¸‹ï¼š\nå½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ M Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ M M Local Write ä¿®æ”¹ cache æ•°æ®ï¼ŒçŠ¶æ€ä¸å˜ M M Remote Read è¿™è¡Œæ•°æ®è¢«å†™åˆ°å†…å­˜ä¸­ï¼Œä½¿å…¶ä»–æ ¸èƒ½ä½¿ç”¨åˆ°æœ€æ–°æ•°æ®ï¼ŒçŠ¶æ€å˜ä¸º S S M Remote Write è¿™è¡Œæ•°æ®è¢«å†™å…¥å†…å­˜ä¸­ï¼Œå…¶ä»–æ ¸å¯ä»¥è·å–åˆ°æœ€æ–°æ•°æ®ï¼Œç”±äºå…¶ä»– CPU ä¿®æ”¹è¯¥æ¡æ•°æ®ï¼Œåˆ™æœ¬åœ° Cache å˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ E Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ E E Local Write ä¿®æ”¹æ•°æ®ï¼ŒçŠ¶æ€æ”¹ä¸º M M E Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼Œå˜ä¸º S S E Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ S Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ S S Local Write ä¿®æ”¹æ•°æ®ï¼ŒçŠ¶æ€æ”¹ä¸º Mï¼Œå…¶ä»– CPU çš„ Cache Line çŠ¶æ€æ”¹ä¸º I M S Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼ŒçŠ¶æ€ä¸å˜ S S Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ I Local Read 1. å¦‚æœå…¶ä»– CPU æ²¡æœ‰è¿™ä»½æ•°æ®ï¼Œç›´æ¥ä»å†…å­˜ä¸­åŠ è½½æ•°æ®ï¼ŒçŠ¶æ€å˜ä¸º Eï¼›\n2. å¦‚æœå…¶ä»– CPU æœ‰è¿™ä¸ªæ•°æ®ï¼Œä¸” Cache Line çŠ¶æ€ä¸º Mï¼Œåˆ™å…ˆæŠŠ Cache Line ä¸­çš„å†…å®¹å†™å›åˆ°ä¸»å­˜ã€‚æœ¬åœ° Cache å†ä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œè¿™æ—¶ä¸¤ä¸ª Cache Line çš„çŠ¶æ€éƒ½å˜ä¸º Sï¼›\n3. å¦‚æœå…¶ä»– Cache Line æœ‰è¿™ä»½æ•°æ®ï¼Œå¹¶ä¸”çŠ¶æ€ä¸º S æˆ–è€… Eï¼Œåˆ™æœ¬åœ° Cache Line ä»ä¸»å­˜è¯»å–æ•°æ®ï¼Œå¹¶å°†è¿™äº› Cache Line çŠ¶æ€æ”¹ä¸º S E æˆ–è€… S I Local Write 1. å…ˆä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œå¦‚æœå…¶ä»– Cache Line ä¸­æœ‰è¿™ä»½æ•°æ®ï¼Œä¸”çŠ¶æ€ä¸º Mï¼Œåˆ™ç°å°†æ•°æ®æ›´æ–°åˆ°ä¸»å­˜å†è¯»å–ï¼Œå°† Cache Line çŠ¶æ€æ”¹ä¸º Mï¼›\n2. å¦‚æœå…¶ä»– Cache Line æœ‰è¿™ä»½æ•°æ®ï¼Œä¸”çŠ¶æ€ä¸º E æˆ–è€… Sï¼Œåˆ™å…¶ä»– Cache Line çŠ¶æ€æ”¹ä¸º I M I Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼ŒçŠ¶æ€ä¸å˜ S I Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I ","permalink":"https://lifeislife.cn/posts/cpu%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7mesi%E5%8D%8F%E8%AE%AE/","summary":"\u003ch2 id=\"ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ä¸€è‡´\"\u003eä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ä¸€è‡´\u003c/h2\u003e\n\u003cp\u003eç›®å‰ä¸»æµç”µè„‘çš„ CPU éƒ½æ˜¯å¤šæ ¸å¿ƒçš„ï¼Œå¤šæ ¸å¿ƒçš„æœ‰ç‚¹å°±æ˜¯åœ¨ä¸èƒ½æå‡ CPU ä¸»é¢‘åï¼Œé€šè¿‡å¢åŠ æ ¸å¿ƒæ¥æå‡ CPU ååé‡ã€‚æ¯ä¸ªæ ¸å¿ƒéƒ½æœ‰è‡ªå·±çš„ L1 Cache å’Œ L2 Cacheï¼Œåªæ˜¯å…±ç”¨ L3 Cache å’Œä¸»å†…å­˜ã€‚æ¯ä¸ªæ ¸å¿ƒæ“ä½œæ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªæ ¸å¿ƒçš„ Cache å°±ä¸æ˜¯åŒæ­¥æ›´æ–°çš„ï¼Œè¿™æ ·å°±ä¼šå¸¦æ¥ç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰çš„é—®é¢˜ã€‚\u003c/p\u003e","title":"CPU ç¼“å­˜ä¸€è‡´æ€§ MESI åè®®"},{"content":"è®¾ç½®ç»ˆç«¯ä¸º Gitbash ç”¨æƒ¯äº† Linux ç»ˆç«¯çš„å‘½ä»¤ï¼ŒWindows çš„ shell çœŸçš„å¤ªä¸é¡ºæ‰‹äº†ï¼Œä½†æ˜¯ Gitbash å¾ˆå¤šå‘½ä»¤ç›¸ä¼¼ï¼Œå¯ä»¥å°†é»˜è®¤çš„ shell æ¢æˆ Gitbashã€‚\næ‰“å¼€settings.jsoné…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹\n\u0026#34;terminal.integrated.profiles.windows\u0026#34;: { \u0026#34;PowerShell -NoProfile\u0026#34;: { \u0026#34;source\u0026#34;: \u0026#34;PowerShell\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-NoProfile\u0026#34; ] }, \u0026#34;Git-Bash\u0026#34;: { \u0026#34;path\u0026#34;: \u0026#34;D:\\\\Software\\\\Git\\\\bin\\\\bash.exe\u0026#34;, //binè·¯å¾„ä¸‹çš„bashï¼Œä¸æ˜¯git-bash.exeã€‚å¦åˆ™ä¼šæ‰“å¼€å¤–éƒ¨çª—å£ \u0026#34;args\u0026#34;: [] } }, \u0026#34;terminal.integrated.defaultProfile.windows\u0026#34;: \u0026#34;Git-Bash\u0026#34;, \u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹ç»ˆç«¯é…è‰² æ‰“å¼€Base16 Terminal Colors for Visual Studio Codeï¼Œé€‰æ‹©ä¸€æ¬¾é…ç½®å¤åˆ¶\n\u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€ VScodesettings.jsonï¼Œæ›¿æ¢å¦‚ä¸‹\n\u0026#34;workbench.colorCustomizations\u0026#34;: { \u0026#34;terminal.background\u0026#34;:\u0026#34;#1C2023\u0026#34;, \u0026#34;terminal.foreground\u0026#34;:\u0026#34;#C7CCD1\u0026#34;, \u0026#34;terminalCursor.background\u0026#34;:\u0026#34;#C7CCD1\u0026#34;, \u0026#34;terminalCursor.foreground\u0026#34;:\u0026#34;#C7CCD1\u0026#34;, \u0026#34;terminal.ansiBlack\u0026#34;:\u0026#34;#1C2023\u0026#34;, \u0026#34;terminal.ansiBlue\u0026#34;:\u0026#34;#AE95C7\u0026#34;, \u0026#34;terminal.ansiBrightBlack\u0026#34;:\u0026#34;#747C84\u0026#34;, \u0026#34;terminal.ansiBrightBlue\u0026#34;:\u0026#34;#AE95C7\u0026#34;, \u0026#34;terminal.ansiBrightCyan\u0026#34;:\u0026#34;#95AEC7\u0026#34;, \u0026#34;terminal.ansiBrightGreen\u0026#34;:\u0026#34;#95C7AE\u0026#34;, \u0026#34;terminal.ansiBrightMagenta\u0026#34;:\u0026#34;#C795AE\u0026#34;, \u0026#34;terminal.ansiBrightRed\u0026#34;:\u0026#34;#C7AE95\u0026#34;, \u0026#34;terminal.ansiBrightWhite\u0026#34;:\u0026#34;#F3F4F5\u0026#34;, \u0026#34;terminal.ansiBrightYellow\u0026#34;:\u0026#34;#AEC795\u0026#34;, \u0026#34;terminal.ansiCyan\u0026#34;:\u0026#34;#95AEC7\u0026#34;, \u0026#34;terminal.ansiGreen\u0026#34;:\u0026#34;#95C7AE\u0026#34;, \u0026#34;terminal.ansiMagenta\u0026#34;:\u0026#34;#C795AE\u0026#34;, \u0026#34;terminal.ansiRed\u0026#34;:\u0026#34;#C7AE95\u0026#34;, \u0026#34;terminal.ansiWhite\u0026#34;:\u0026#34;#C7CCD1\u0026#34;, \u0026#34;terminal.ansiYellow\u0026#34;:\u0026#34;#AEC795\u0026#34; }, ä¿®æ”¹åæ•ˆæœ\n\u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹ç»ˆç«¯å­—ä½“ æ–¹æ³•ä¸€ï¼šæ‰“å¼€ VScodesettings.jsonï¼ŒåŠ ä¸Šä¸‹é¢è¿™ä¸ªé…ç½®ï¼Œå­—ä½“æ”¹æˆè‡ªå·±ç”µè„‘ä¸Šçš„å­—ä½“\n\u0026#34;terminal.integrated.fontFamily\u0026#34;: \u0026#34;JetBrains Mono\u0026#34;, æ–¹æ³•äºŒï¼šæ‰“å¼€è®¾ç½®é¡µé¢ï¼Œæœç´¢terminal font\n\u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹åçš„æ•ˆæœ\n\u003c!DOCTYPE html\u003e Responsive Image è§£å†³ä¸­æ–‡ä¹±ç  git config --global core.quotepath false ","permalink":"https://lifeislife.cn/posts/vscode%E8%AE%BE%E7%BD%AE%E7%BB%88%E7%AB%AF%E4%B8%BAgitbash/","summary":"\u003ch2 id=\"è®¾ç½®ç»ˆç«¯ä¸º-gitbash\"\u003eè®¾ç½®ç»ˆç«¯ä¸º Gitbash\u003c/h2\u003e\n\u003cp\u003eç”¨æƒ¯äº† Linux ç»ˆç«¯çš„å‘½ä»¤ï¼ŒWindows çš„ shell çœŸçš„å¤ªä¸é¡ºæ‰‹äº†ï¼Œä½†æ˜¯ Gitbash å¾ˆå¤šå‘½ä»¤ç›¸ä¼¼ï¼Œå¯ä»¥å°†é»˜è®¤çš„ shell æ¢æˆ Gitbashã€‚\u003c/p\u003e\n\u003cp\u003eæ‰“å¼€\u003ccode\u003esettings.json\u003c/code\u003eé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹\u003c/p\u003e","title":"VSCode è®¾ç½®ç»ˆç«¯ä¸º Gitbash"},{"content":"é¢„å¤‡çŸ¥è¯† è¶…çº¿ç¨‹æŠ€æœ¯ (Hyper-Threading)ï¼šå°±æ˜¯åˆ©ç”¨ç‰¹æ®Šçš„ç¡¬ä»¶æŒ‡ä»¤ï¼ŒæŠŠä¸¤ä¸ªé€»è¾‘å†…æ ¸ (CPU core) æ¨¡æ‹Ÿæˆä¸¤ä¸ªç‰©ç†èŠ¯ç‰‡ï¼Œè®©å•ä¸ªå¤„ç†å™¨éƒ½èƒ½ä½¿ç”¨çº¿ç¨‹çº§å¹¶è¡Œè®¡ç®—ï¼Œè¿›è€Œå…¼å®¹å¤šçº¿ç¨‹æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶ï¼Œå‡å°‘äº† CPU çš„é—²ç½®æ—¶é—´ï¼Œæé«˜çš„ CPU çš„è¿è¡Œæ•ˆç‡ã€‚\næˆ‘ä»¬å¸¸å¬åˆ°çš„åŒæ ¸å››çº¿ç¨‹/å››æ ¸å…«çº¿ç¨‹æŒ‡çš„å°±æ˜¯æ”¯æŒè¶…çº¿ç¨‹æŠ€æœ¯çš„CPU.\nç‰©ç† CPUï¼šæœºå™¨ä¸Šå®‰è£…çš„å®é™… CPU, æ¯”å¦‚è¯´ä½ çš„ä¸»æ¿ä¸Šå®‰è£…äº†ä¸€ä¸ª 8 æ ¸ CPUï¼Œé‚£ä¹ˆç‰©ç† CPU ä¸ªæ•°å°±æ˜¯ 1 ä¸ªï¼Œæ‰€ä»¥ç‰©ç† CPU ä¸ªæ•°å°±æ˜¯ä¸»æ¿ä¸Šå®‰è£…çš„ CPU ä¸ªæ•°ã€‚\né€»è¾‘ CPUï¼šä¸€èˆ¬æƒ…å†µï¼Œæˆ‘ä»¬è®¤ä¸ºä¸€é¢— CPU å¯ä»¥æœ‰å¤šæ ¸ï¼ŒåŠ ä¸Š Intel çš„è¶…çº¿ç¨‹æŠ€æœ¯ (HT), å¯ä»¥åœ¨é€»è¾‘ä¸Šå†åˆ†ä¸€å€æ•°é‡çš„ CPU core å‡ºæ¥ï¼›\né€»è¾‘CPUæ•°é‡ = ç‰©ç†CPUæ•°é‡ x CPU cores x 2(å¦‚æœæ”¯æŒå¹¶å¼€å¯HT) //å‰ææ˜¯CPUçš„å‹å·ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´åªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„åŠ èµ·æ¥ï¼Œä¸ç”¨ç›´æ¥ä¹˜ä»¥ç‰©ç†CPUæ•°é‡ //æ¯”å¦‚ä½ çš„ç”µè„‘å®‰è£…äº†ä¸€å—4æ ¸CPUï¼Œå¹¶ä¸”æ”¯æŒä¸”å¼€å¯äº†è¶…çº¿ç¨‹ï¼ˆHTï¼‰æŠ€æœ¯ï¼Œé‚£ä¹ˆé€»è¾‘CPUæ•°é‡ = 1 Ã— 4 Ã— 2 = 8 Linux ä¸‹æŸ¥çœ‹ CPU ç›¸å…³ä¿¡æ¯, CPU çš„ä¿¡æ¯ä¸»è¦éƒ½åœ¨/proc/cupinfoä¸­ã€‚\n# æŸ¥çœ‹ç‰©ç†CPUä¸ªæ•° âœ ~ cat /proc/cpuinfo|grep \u0026#34;physical id\u0026#34;|sort -u|wc -l 32 # æŸ¥çœ‹æ¯ä¸ªç‰©ç†CPUä¸­coreçš„ä¸ªæ•°(å³æ ¸æ•°) âœ ~ cat /proc/cpuinfo|grep \u0026#34;cpu cores\u0026#34;|uniq 1 # æˆ–è€… âœ cat /proc/cpuinfo | grep \u0026#39;process\u0026#39; | sort | uniq | wc -l 1 # æŸ¥çœ‹é€»è¾‘CPUçš„ä¸ªæ•° âœ ~ cat /proc/cpuinfo|grep \u0026#34;processor\u0026#34;|wc -l 32 # æŸ¥çœ‹CPUçš„åç§°å‹å· âœ ~ cat /proc/cpuinfo|grep \u0026#34;name\u0026#34;|cut -f2 -d:|uniq Intel Xeon Processor (Skylake, IBRS) Linux æŸ¥çœ‹æŸä¸ªè¿›ç¨‹è¿è¡Œåœ¨å“ªä¸ªé€»è¾‘ CPU ä¸Š\nps -eo pid,args,psr pidï¼šè¿›ç¨‹ ID argsï¼šè¯¥è¿›ç¨‹æ‰§è¡Œæ—¶ä¼ å…¥çš„å‘½ä»¤è¡Œå‚æ•° psrï¼šåˆ†é…ç»™è¿›ç¨‹çš„é€»è¾‘ CPU ä¾‹å­ï¼š\nâœ ps -eo pid,args,psr | grep firefox 20118 /usr/lib/firefox/firefox -n 13 20208 /usr/lib/firefox/firefox -c 9 20266 /usr/lib/firefox/firefox -c 29 20329 /usr/lib/firefox/firefox -c 24 20499 /usr/lib/firefox/firefox -c 7 20565 /usr/lib/firefox/firefox -c 15 20596 /usr/lib/firefox/firefox -c 24 20760 /usr/lib/firefox/firefox -c 18 22110 /usr/lib/firefox/firefox -c 27 25857 /usr/lib/firefox/firefox -c 28 26347 /usr/lib/firefox/firefox -c 19 26899 /usr/lib/firefox/firefox -c 29 Linux æŸ¥çœ‹çº¿ç¨‹çš„ TID\nTID å°±æ˜¯ Thread IDï¼Œä»–å’Œ POSIX ä¸­pthread_tè¡¨ç¤ºçš„çº¿ç¨‹ ID å®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚\nLinux ä¸­çš„ POSIX çº¿ç¨‹åº“å®ç°çš„çº¿ç¨‹å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªè½»é‡çº§è¿›ç¨‹ (LWP),è¿™ä¸ª TID å°±æ˜¯è¿™ä¸ªçº¿ç¨‹çš„çœŸå® PID.\nä½†æ˜¯åˆä¸èƒ½é€šè¿‡getpid()å‡½æ•°è·å–ï¼ŒLinux ä¸­å®šä¹‰äº†gettid()è¿™ä¸ªæ¥å£ï¼Œä½†æ˜¯é€šå¸¸éƒ½æ˜¯æœªå®ç°çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼è·å– TIDã€‚\nä½¿ç”¨ API è·å–ï¼š\n#include \u0026lt;sys/syscall.h\u0026gt; pid_t tid; tid = syscall(__NR_gettid); // or syscall(SYS_gettid) å‘½ä»¤è¡Œæ–¹å¼è·å–ï¼š\n# 3ç§æ–¹æ³•(æ¨èç¬¬ä¸‰ç§æ–¹æ³•) âœ ps -efL | grep prog_name âœ ls /proc/pid/task //æ–‡ä»¶å¤¹åå³TID âœ ps -To \u0026#39;pid,lwp,psr,cmd\u0026#39; -p PID ä»€ä¹ˆæ˜¯ CPU äº²å’Œæ€§ CPU çš„äº²å’Œæ€§ (Affinity)ï¼Œå±äºä¸€ç§è°ƒåº¦å±æ€§ï¼Œå¯ä»¥ç»‘å®šè¿›ç¨‹åˆ°æŒ‡å®š CPU ä¸Šã€‚Â æ¢å¥è¯è¯´ï¼Œå°±æ˜¯è¿›ç¨‹è¦åœ¨æŒ‡å®šçš„ CPU ä¸Šå°½é‡é•¿æ—¶é—´åœ°è¿è¡Œè€Œä¸è¢«è¿ç§»åˆ°å…¶ä»–å¤„ç†å™¨ã€‚\nä¸ºä½•ä¼šå‡ºç°è¿™ç§æŠ€æœ¯ï¼Ÿåœ¨ SMP(Symmetric Multi-Processing å¯¹ç§°å¤šå¤„ç†) æ¶æ„ä¸‹ï¼Œè°ƒåº¦å™¨ä¼šè¯•å›¾ä¿æŒè¿›ç¨‹åœ¨ç›¸åŒçš„ CPU ä¸Šè¿è¡Œï¼Œè¿™æ„å‘³ç€è¿›ç¨‹é€šå¸¸ä¸ä¼šåœ¨å¤„ç†å™¨ä¹‹é—´é¢‘ç¹è¿ç§»ï¼Œè¿›ç¨‹è¿ç§»çš„é¢‘ç‡å°å°±æ„å‘³ç€äº§ç”Ÿçš„è´Ÿè½½å°ã€‚\nåˆå¦‚ï¼Œæ¯ä¸ª CPU æœ¬èº«è‡ªå·±ä¼šæœ‰ç¼“å­˜ï¼Œç¼“å­˜ç€è¿›ç¨‹ä½¿ç”¨çš„ä¿¡æ¯ï¼Œè€Œè¿›ç¨‹å¯èƒ½ä¼šè¢«æ“ä½œç³»ç»Ÿè°ƒåº¦åˆ°å…¶ä»– CPU ä¸Šï¼Œå¦‚æ­¤ï¼ŒCPU ç¼“å­˜å‘½ä¸­ç‡å°±ä½äº†ï¼Œå½“ç»‘å®š CPU åï¼Œç¨‹åºå°±ä¼šä¸€ç›´åœ¨æŒ‡å®šçš„ CPU è·‘ï¼Œä¸ä¼šç”±æ“ä½œç³»ç»Ÿè°ƒåº¦åˆ°å…¶ä»– CPU ä¸Šï¼Œæ€§èƒ½æœ‰ä¸€å®šçš„æé«˜ã€‚\nè½¯äº²å’Œæ€§: å°±æ˜¯è¿›ç¨‹è¦åœ¨æŒ‡å®šçš„ CPU ä¸Šå°½é‡é•¿æ—¶é—´åœ°è¿è¡Œè€Œä¸è¢«è¿ç§»åˆ°å…¶ä»–å¤„ç†å™¨ï¼ŒLinux å†…æ ¸è¿›ç¨‹è°ƒåº¦å™¨å¤©ç”Ÿå°±å…·æœ‰è¢«ç§°ä¸º è½¯ CPU äº²å’Œæ€§ï¼ˆaffinityï¼‰çš„ç‰¹æ€§ï¼Œè¿™æ„å‘³ç€è¿›ç¨‹é€šå¸¸ä¸ä¼šåœ¨å¤„ç†å™¨ä¹‹é—´é¢‘ç¹è¿ç§»ã€‚è¿™ç§çŠ¶æ€æ­£æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ï¼Œå› ä¸ºè¿›ç¨‹è¿ç§»çš„é¢‘ç‡å°å°±æ„å‘³ç€äº§ç”Ÿçš„è´Ÿè½½å°ã€‚\nç¡¬äº²å’Œæ€§ï¼šç®€å•æ¥è¯´å°±æ˜¯åˆ©ç”¨ Linux å†…æ ¸æä¾›ç»™ç”¨æˆ·çš„ APIï¼Œå¼ºè¡Œå°†è¿›ç¨‹æˆ–è€…çº¿ç¨‹ç»‘å®šåˆ°æŸä¸€ä¸ªæŒ‡å®šçš„ CPU æ ¸è¿è¡Œã€‚\nCPU affinity ä½¿ç”¨ä½æ©ç  (bitmask) è¡¨ç¤ºï¼Œæ¯ä¸€ä½éƒ½è¡¨ç¤ºä¸€ä¸ª CPU, ç½® 1 è¡¨ç¤º\u0026quot;ç»‘å®š\u0026quot;ã€‚æœ€ä½ä½è¡¨ç¤ºç¬¬ä¸€ä¸ªé€»è¾‘ CPU, æœ€é«˜ä½è¡¨ç¤ºæœ€åä¸€ä¸ªé€»è¾‘ CPUã€‚\nCPU affinity å…¸å‹çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ä½¿ç”¨ 16 è¿›åˆ¶ï¼Œå…·ä½“å¦‚ä¸‹ã€‚\n0b00000000000000000000000000000001 = 0x00000001 è¡¨ç¤º processor #0 0b00000000000000000000000001010101 = 0x00000055 è¡¨ç¤º processors #0, #2, #4, #6 0b11111111111111111111111111111111 = 0xFFFFFFFF è¡¨ç¤ºæ‰€æœ‰ processors (#0 through #31) ä½¿ç”¨tasksetå‘½ä»¤è®¾ç½® CPU äº²å’Œæ€§ å‘½ä»¤è¡Œå½¢å¼\ntaskset [options] mask command [arg]... taskset [options] -p [mask] pid å‚æ•°è§£æ [OPTIONS]taskset çš„å¯é€‰å‚æ•°\n-a, --all-tasks (æ—§ç‰ˆæœ¬ä¸­æ²¡æœ‰è¿™ä¸ªé€‰é¡¹) è¿™ä¸ªé€‰é¡¹æ¶‰åŠåˆ°äº†linuxä¸­TIDçš„æ¦‚å¿µ,ä»–ä¼šå°†ä¸€ä¸ªè¿›ç¨‹ä¸­æ‰€æœ‰çš„TIDéƒ½æ‰§è¡Œä¸€æ¬¡CPUäº²å’Œæ€§è®¾ç½®. TID å°±æ˜¯ Thread IDï¼Œä»–å’Œ POSIX ä¸­ pthread_t è¡¨ç¤ºçš„çº¿ç¨‹ ID å®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚ Linuxä¸­çš„POSIXçº¿ç¨‹åº“å®ç°çš„çº¿ç¨‹å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªè¿›ç¨‹(LWP),è¿™ä¸ªTIDå°±æ˜¯è¿™ä¸ªçº¿ç¨‹çš„çœŸå®PID.\n-p, --pid æ“ä½œå·²å­˜åœ¨çš„PID,è€Œä¸æ˜¯åŠ è½½ä¸€ä¸ªæ–°çš„ç¨‹åº\n-c, --cpu-list å£°æ˜CPUçš„äº²å’ŒåŠ›ä½¿ç”¨æ•°å­—è¡¨ç¤ºè€Œä¸æ˜¯ç”¨ä½æ©ç è¡¨ç¤º. ä¾‹å¦‚ 0,5,7,9-11.\n-h, --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯\n-V, --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯\nmask : cpu äº²å’Œæ€§ï¼Œå½“æ²¡æœ‰-cé€‰é¡¹æ—¶ï¼Œå…¶å€¼å‰æ— è®ºæœ‰æ²¡æœ‰0xæ ‡è®°éƒ½æ˜¯ 16 è¿›åˆ¶çš„ï¼Œå½“æœ‰-cé€‰é¡¹æ—¶ï¼Œå…¶å€¼æ˜¯åè¿›åˆ¶çš„ã€‚\ncommand : å‘½ä»¤æˆ–è€…å¯æ‰§è¡Œç¨‹åº\npid : è¿›ç¨‹ IDï¼Œå¯ä»¥é€šè¿‡ps/top/pidofç­‰å‘½ä»¤è·å–\n[arg] command çš„å‚æ•°\nå®ä¾‹ ä½¿ç”¨æŒ‡å®šçš„ CPU äº²å’Œæ€§è¿è¡Œä¸€ä¸ªæ–°ç¨‹åº taskset [-c] mask command [arg]... # ä¸¾ä¾‹: ä½¿ç”¨CPU0è¿è¡Œlså‘½ä»¤æ˜¾ç¤º/etc/init.dä¸‹çš„æ‰€æœ‰å†…å®¹ taskset -c 0 ls -al /etc/init.d/ æ˜¾ç¤ºå·²ç»è¿è¡Œçš„è¿›ç¨‹çš„ CPU äº²å’Œæ€§ taskset -p pid # ä¸¾ä¾‹:æŸ¥çœ‹initè¿›ç¨‹(PID=1)çš„CPUäº²å’Œæ€§ taskset -p 1 æ”¹å˜å·²ç»è¿è¡Œè¿›ç¨‹çš„ CPU äº²å’Œæ€§ taskset -p[c] mask pid ä¸¾ä¾‹:æ‰“å¼€2ä¸ªç»ˆç«¯,åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯è¿è¡Œtopå‘½ä»¤,ç¬¬äºŒä¸ªç»ˆç«¯ä¸­ é¦–å…ˆè¿è¡Œ:[~]#Â ps -eo pid,args,psr | grep topÂ #è·å–topå‘½ä»¤çš„pidå’Œå…¶æ‰€è¿è¡Œçš„CPUå· å…¶æ¬¡è¿è¡Œ:[~]#Â taskset -cp æ–°çš„CPUå· pid #æ›´æ”¹topå‘½ä»¤è¿è¡Œçš„CPUå· æœ€åè¿è¡Œ:[~]#Â ps -eo pid,args,psr | grep topÂ #æŸ¥çœ‹æ˜¯å¦æ›´æ”¹æˆåŠŸ âœ ~ ps -eo pid,args,psr | grep top 2501 nautilus-desktop 24 2634 /usr/libexec/xdg-desktop-po 18 2658 /usr/libexec/xdg-desktop-po 11 23848 top 6 âœ ~ taskset -cp 10 23848 pid 23848\u0026#39;s current affinity list: 0-31 pid 23848\u0026#39;s new affinity list: 10 âœ ~ ps -eo pid,args,psr | grep top 2501 nautilus-desktop 24 2634 /usr/libexec/xdg-desktop-po 18 2658 /usr/libexec/xdg-desktop-po 11 23848 top 10 ä¸€ä¸ªç”¨æˆ·è¦è®¾å®šä¸€ä¸ªè¿›ç¨‹çš„ CPU äº²å’Œæ€§ï¼Œå¦‚æœç›®æ ‡è¿›ç¨‹æ˜¯è¯¥ç”¨æˆ·çš„ï¼Œåˆ™å¯ä»¥è®¾ç½®ï¼Œå¦‚æœæ˜¯å…¶ä»–ç”¨æˆ·çš„ï¼Œåˆ™ä¼šè®¾ç½®å¤±è´¥ï¼Œæç¤ºÂ Operation not permitted.å½“ç„¶ root ç”¨æˆ·æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚ ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è·å–ä»»æ„ä¸€ä¸ªè¿›ç¨‹çš„ CPU äº²å’Œæ€§ã€‚\nç¨‹åº API å®ç°ç¡¬äº²å’Œæ€§ ä»¥ä¸‹å®éªŒä½¿ç”¨çš„æºç å¯ä»¥ä»è¿™ä¸ªä»“åº“è·å–ã€‚\nä»¥ä¸‹æ˜¯ä¸€äº›è®¾ç½®äº²å’Œæ€§æ—¶ä¼šç”¨åˆ°çš„å®å®šä¹‰åŠå‡½æ•°ï¼š\n#define _GNU_SOURCE #include \u0026lt;sched.h\u0026gt; #include \u0026lt;pthread.h\u0026gt; //æ³¨æ„\u0026lt;pthread.h\u0026gt;åŒ…å«\u0026lt;sched.h\u0026gt; /* MACRO */ // å¯¹ CPU é›†åˆå§‹åŒ–ï¼Œå°†å…¶è®¾ç½®ä¸ºç©ºé›† void CPU_ZERO(cpu_set_t *set); void CPU_ZERO_S(size_t setsize, cpu_set_t *set); // å°† CPU åŠ å…¥åˆ° CPU é›†ä¸­ void CPU_SET(int cpu, cpu_set_t *set); void CPU_SET_S(int cpu, size_t setsize, cpu_set_t *set); // å°† CPU ä» CPU é›†ä¸­ç§»é™¤ void CPU_CLR(int cpu, cpu_set_t *set); void CPU_CLR_S(int cpu, size_t setsize, cpu_set_t *set); // åˆ¤æ–­ CPU æ˜¯å¦åœ¨ CPU é›†ä¸­ int CPU_ISSET(int cpu, cpu_set_t *set); int CPU_ISSET_S(int cpu, size_t setsize, cpu_set_t *set); // è®¡ç®— CPU é›†çš„å¤§å° void CPU_COUNT(cpu_set_t *set); void CPU_COUNT_S(size_t setsize, cpu_set_t *set); // The following macros perform logical operations on CPU sets /* Store the logical AND of the sets srcset1 and srcset2 in destset (which may be one of the source sets). */ void CPU_AND(cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); void CPU_AND_S(size_t setsize, cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); /* Store the logical OR of the sets srcset1 and srcset2 in destset (which may be one of the source sets). */ void CPU_OR(cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); void CPU_OR_S(size_t setsize, cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); /* Store the logical XOR of the sets srcset1 and srcset2 in destset (which may be one of the source sets). */ void CPU_XOR(cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); void CPU_XOR_S(size_t setsize, cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); /* Test whether two CPU set contain exactly the same CPUs. */ int CPU_EQUAL(cpu_set_t *set1, cpu_set_t *set2); int CPU_EQUAL_S(size_t setsize, cpu_set_t *set1, cpu_set_t *set2); /* The following macros are used to allocate and deallocate CPU sets: */ /* Allocate a CPU set large enough to hold CPUs in the range 0 to num_cpus-1 */ cpu_set_t *CPU_ALLOC(int num_cpus); /* Return the size in bytes of the CPU set that would be needed to hold CPUs in the range 0 to num_cpus-1. This macro provides the value that can be used for the setsize argument in the CPU_*_S() macros */ size_t CPU_ALLOC_SIZE(int num_cpus); /* Free a CPU set previously allocated by CPU_ALLOC(). */ void CPU_FREE(cpu_set_t *set); /* API */ /*è¯¥å‡½æ•°è®¾ç½®è¿›ç¨‹ä¸º pid çš„è¿™ä¸ªè¿›ç¨‹ï¼Œè®©å®ƒè¿è¡Œåœ¨ mask æ‰€è®¾å®šçš„ CPU ä¸Šã€‚å¦‚æœ pid çš„å€¼ä¸º 0, *åˆ™è¡¨ç¤ºæŒ‡å®šçš„æ˜¯å½“å‰è¿›ç¨‹ï¼Œä½¿å½“å‰è¿›ç¨‹è¿è¡Œåœ¨ mask æ‰€è®¾å®šçš„é‚£äº› CPU ä¸Š. *ç¬¬äºŒä¸ªå‚æ•° cpusetsize æ˜¯ mask æ‰€æŒ‡å®šçš„æ•°çš„é•¿åº¦ã€‚é€šå¸¸è®¾å®šä¸º sizeof(cpu_set_t). *å¦‚æœå½“å‰ pid æ‰€æŒ‡å®šçš„è¿›ç¨‹æ­¤æ—¶æ²¡æœ‰è¿è¡Œåœ¨ mask æ‰€æŒ‡å®šçš„ä»»æ„ä¸€ä¸ª CPU ä¸Šï¼Œ *åˆ™è¯¥æŒ‡å®šçš„è¿›ç¨‹ä¼šä»å…¶å®ƒ CPU ä¸Šè¿ç§»åˆ° mask çš„æŒ‡å®šçš„ä¸€ä¸ª CPU ä¸Šè¿è¡Œ. */ int sched_setaffinity(pid_t pid, size_t cpusetsize, cpu_set_t *mask); /*è¯¥å‡½æ•°è·å¾— pid æ‰€æŒ‡ç¤ºçš„è¿›ç¨‹çš„ CPU ä½æ©ç ï¼Œå¹¶å°†è¯¥æ©ç è¿”å›åˆ° mask æ‰€æŒ‡å‘çš„ç»“æ„ä¸­. *å³è·å¾—æŒ‡å®š pid å½“å‰å¯ä»¥è¿è¡Œåœ¨å“ªäº› CPU ä¸Š. *åŒæ ·ï¼Œå¦‚æœ pid çš„å€¼ä¸º 0.ä¹Ÿè¡¨ç¤ºçš„æ˜¯å½“å‰è¿›ç¨‹ */ int sched_getaffinity(pid_t pid, size_t cpusetsize, cpu_set_t *mask); /* set CPU affinity attribute in thread attributes object */ int pthread_attr_setaffinity_np(pthread_attr_t *attr, size_t cpusetsize, const cpu_set_t *cpuset); /* get CPU affinity attribute in thread attributes object */ int pthread_attr_getaffinity_np(const pthread_attr_t *attr, size_t cpusetsize, cpu_set_t *cpuset); /* set CPU affinity of a thread */ int pthread_setaffinity_np(pthread_t thread, size_t cpusetsize, const cpu_set_t *cpuset); /* get CPU affinity of a thread */ int pthread_getaffinity_np(pthread_t thread, size_t cpusetsize, cpu_set_t *cpuset); ç¨‹åºä¸­ä¼šä½¿ç”¨syscallæ¥è·å–ä¸€äº›å†…æ ¸æ•°æ®ï¼Œsyscallæ˜¯æ‰§è¡Œä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œæ ¹æ®æŒ‡å®šçš„å‚æ•°numberå’Œæ‰€æœ‰ç³»ç»Ÿè°ƒç”¨çš„æ¥å£æ¥ç¡®å®šè°ƒç”¨å“ªä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œç”¨äºç”¨æˆ·ç©ºé—´è·Ÿå†…æ ¸ä¹‹é—´çš„æ•°æ®äº¤æ¢ï¼Œä¸‹é¢æ˜¯syscallå‡½æ•°åŸå‹åŠä¸€äº›å¸¸ç”¨çš„numberï¼š\n//syscall - indirect system call #define _GNU_SOURCE /* See feature_test_macros(7) */ #include \u0026lt;unistd.h\u0026gt; #include \u0026lt;sys/syscall.h\u0026gt; /* For SYS_xxx definitions */ int syscall(int number, ...); // æŸ¥çœ‹ç¼“å­˜å†…å­˜é¡µé¢çš„å¤§å°ï¼›æ‰“å°ç”¨%ld é•¿æ•´å‹ã€‚ sysconf(_SC_PAGESIZE); // æŸ¥çœ‹å†…å­˜çš„æ€»é¡µæ•°ï¼›æ‰“å°ç”¨%ld é•¿æ•´å‹ã€‚ sysconf(_SC_PHYS_PAGES) // æŸ¥çœ‹å¯ä»¥åˆ©ç”¨çš„æ€»é¡µæ•°ï¼›æ‰“å°ç”¨%ld é•¿æ•´å‹ã€‚ sysconf(_SC_AVPHYS_PAGES) // æŸ¥çœ‹ CPU çš„ä¸ªæ•°ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚ sysconf(_SC_NPROCESSORS_CONF) // æŸ¥çœ‹åœ¨ä½¿ç”¨çš„ CPU ä¸ªæ•°ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚ sysconf(_SC_NPROCESSORS_ONLN) // è®¡ç®—å†…å­˜å¤§å°ã€‚ (long long)sysconf(_SC_PAGESIZE) * (long long)sysconf(_SC_PHYS_PAGES) // æŸ¥çœ‹æœ€å¤§ç™»å½•åé•¿åº¦ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚ sysconf(_SC_LOGIN_NAME_MAX) // æŸ¥çœ‹æœ€å¤§ä¸»æœºé•¿åº¦ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚ sysconf(_SC_HOST_NAME_MAX) // æ¯ä¸ªè¿›ç¨‹è¿è¡Œæ—¶æ‰“å¼€çš„æ–‡ä»¶æ•°ç›®ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚ sysconf(_SC_OPEN_MAX) // æŸ¥çœ‹æ¯ç§’ä¸­è·‘è¿‡çš„è¿ç®—é€Ÿç‡ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚ sysconf(_SC_CLK_TCK) ä½¿ç”¨ 2 ç§æ–¹å¼ (å¸¦å’Œä¸å¸¦_S åç¼€çš„å®) è·å–å½“å‰è¿›ç¨‹çš„ CPU äº²å’Œæ€§ ç›¸å…³çš„å®é€šå¸¸éƒ½åˆ†ä¸º 2 ç§ï¼Œä¸€ç§æ˜¯å¸¦_Såç¼€çš„ï¼Œä¸€ç§ä¸æ˜¯ä¸å¸¦_Såç¼€çš„ï¼Œä»å£°æ˜ä¸Šçœ‹å¸¦_Såç¼€çš„å®éƒ½å¤šå‡ºä¸€ä¸ªå‚æ•° setsizeã€‚\nä»åŠŸèƒ½ä¸Šçœ‹ä»–ä»¬çš„åŒºåˆ«æ˜¯å¸¦_Såç¼€çš„å®æ˜¯ç”¨äºæ“ä½œåŠ¨æ€ç”³è¯·çš„CPU set(s)ï¼Œæ‰€è°“çš„åŠ¨æ€ç”³è¯·å…¶å®å°±æ˜¯ä½¿ç”¨å® CPU_ALLOC ç”³è¯·ï¼Œ\nå‚æ•° setsize å¯ä»¥æ˜¯é€šè¿‡å® CPU_ALLOC_SIZE è·å¾—ï¼Œä¸¤è€…çš„ç”¨æ³•è¯¦è§ä¸‹é¢çš„ä¾‹å­ã€‚\n#define _GNU_SOURCE #include \u0026lt;sched.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; #undef WITH_S #ifdef WITH_S int main(void) { int i, nrcpus; cpu_set_t *pmask; size_t cpusize; unsigned long bitmask = 0; /* è·å–é€»è¾‘ CPU ä¸ªæ•° */ nrcpus = sysconf(_SC_NPROCESSORS_CONF); pmask = CPU_ALLOC(nrcpus); cpusize = CPU_ALLOC_SIZE(nrcpus); CPU_ZERO_S(cpusize, pmask); /* è·å– CPU äº²å’Œæ€§ */ if (sched_getaffinity(0, cpusize, pmask) == -1) { perror(\u0026#34;sched_getaffinity\u0026#34;); CPU_FREE(pmask); exit(EXIT_FAILURE); } for (i = 0; i \u0026lt; nrcpus; i++) { if (CPU_ISSET_S(i, cpusize, pmask)) { bitmask |= (unsigned long)0x01 \u0026lt;\u0026lt; i; printf(\u0026#34;processor #%d is set\\n\u0026#34;, i); } } printf(\u0026#34;bitmask = %#lx\\n\u0026#34;, bitmask); CPU_FREE(pmask); exit(EXIT_SUCCESS); } #else int main(void) { int i, nrcpus; cpu_set_t mask; unsigned long bitmask = 0; CPU_ZERO(\u0026amp;mask); /* è·å– CPU äº²å’Œæ€§ */ if (sched_getaffinity(0, sizeof(cpu_set_t), \u0026amp;mask) == -1) { perror(\u0026#34;sched_getaffinity\u0026#34;); exit(EXIT_FAILURE); } /* è·å–é€»è¾‘ CPU ä¸ªæ•° */ nrcpus = sysconf(_SC_NPROCESSORS_CONF); for (i = 0; i \u0026lt; nrcpus; i++) { if (CPU_ISSET(i, \u0026amp;mask)) { bitmask |= (unsigned long)0x01 \u0026lt;\u0026lt; i; printf(\u0026#34;processor #%d is set\\n\u0026#34;, i); } } printf(\u0026#34;bitmask = %#lx\\n\u0026#34;, bitmask); exit(EXIT_SUCCESS); } #endif # ç›´æ¥è¿è¡Œï¼Œä¸è®¾ç½®äº²å’Œæ€§ï¼Œè·å–CPUäº²å’Œæ€§ä¸ºæ‰€æœ‰CPUéƒ½ä¼šè¢«è®¾ç½® âœ Affinity git:(main) ./bin/main processor #0 is set processor #1 is set processor #2 is set processor #3 is set processor #4 is set processor #5 is set processor #6 is set processor #7 is set processor #8 is set processor #9 is set processor #10 is set processor #11 is set processor #12 is set processor #13 is set processor #14 is set processor #15 is set processor #16 is set processor #17 is set processor #18 is set processor #19 is set processor #20 is set processor #21 is set processor #22 is set processor #23 is set processor #24 is set processor #25 is set processor #26 is set processor #27 is set processor #28 is set processor #29 is set processor #30 is set processor #31 is set bitmask = 0xffffffff # ä½¿ç”¨tasksetè®¾ç½®äº²å’Œæ€§ï¼Œå°†mainç¨‹åºç»‘å®šåˆ°ç¬¬1ä¸ªCPUä¸Šï¼Œmaskè½¬åŒ–ä¸º16è¿›åˆ¶ä¸º0x1 âœ Affinity git:(main) taskset 1 ./bin/main processor #0 is set bitmask = 0x1 # ä½¿ç”¨tasksetè®¾ç½®äº²å’Œæ€§ï¼Œå°†mainç¨‹åºç»‘å®šåˆ°ç¬¬1,3,5,7ä¸ªCPUä¸Šï¼Œmaskè½¬åŒ–ä¸º16è¿›åˆ¶ä¸º0x55 âœ Affinity git:(main) taskset 55 ./bin/main processor #0 is set processor #2 is set processor #4 is set processor #6 is set bitmask = 0x55 # ä½¿ç”¨tasksetè®¾ç½®äº²å’Œæ€§ï¼Œå°†mainç¨‹åºç»‘å®šåˆ°ç¬¬1,2,3,4ä¸ªCPUä¸Šï¼Œmaskè½¬åŒ–ä¸º16è¿›åˆ¶ä¸º0xf âœ Affinity git:(main) taskset F ./bin/main processor #0 is set processor #1 is set processor #2 is set processor #3 is set bitmask = 0xf è®¾ç½®è¿›ç¨‹çš„ CPU äº²å’Œæ€§åå†è·å–æ˜¾ç¤º CPU äº²å’Œæ€§ #define _GNU_SOURCE #include \u0026lt;sched.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; /* sysconf */ #include \u0026lt;stdlib.h\u0026gt; /* exit */ #include \u0026lt;stdio.h\u0026gt; int main(void) { int i, nrcpus; cpu_set_t mask; unsigned long bitmask = 0; CPU_ZERO(\u0026amp;mask); CPU_SET(0, \u0026amp;mask); /* add CPU0 to cpu set */ CPU_SET(2, \u0026amp;mask); /* add CPU2 to cpu set */ CPU_SET(3, \u0026amp;mask); /* add CPU3 to cpu set */ /* è®¾ç½® CPU äº²å’Œæ€§ */ if (sched_setaffinity(0, sizeof(cpu_set_t), \u0026amp;mask) == -1) { perror(\u0026#34;sched_setaffinity\u0026#34;); exit(EXIT_FAILURE); } CPU_ZERO(\u0026amp;mask); if (sched_getaffinity(0, sizeof(cpu_set_t), \u0026amp;mask) == -1) { perror(\u0026#34;sched_getaffinity\u0026#34;); exit(EXIT_FAILURE); } /* get logical cpu number */ nrcpus = sysconf(_SC_NPROCESSORS_CONF); for (i = 0; i \u0026lt; nrcpus; i++) { if (CPU_ISSET(i, \u0026amp;mask)) { bitmask |= (unsigned long)0x01 \u0026lt;\u0026lt; i; printf(\u0026#34;processor #%d is set\\n\u0026#34;, i); } } printf(\u0026#34;bitmask = %#lx\\n\u0026#34;, bitmask); exit(EXIT_SUCCESS); } âœ Affinity git:(main) âœ— ./bin/main processor #0 is set processor #2 is set processor #3 is set bitmask = 0xd è®¾ç½®çº¿ç¨‹çš„ CPU å±æ€§åå†è·å–æ˜¾ç¤º CPU äº²å’Œæ€§ #define _GNU_SOURCE #include \u0026lt;pthread.h\u0026gt; //ä¸ç”¨å†åŒ…å«\u0026lt;sched.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;errno.h\u0026gt; #define handle_error_en(en, msg) \\ do { errno = en; perror(msg); exit(EXIT_FAILURE); } while (0) int main(int argc, char *argv[]) { int s, j; cpu_set_t cpuset; pthread_t thread; thread = pthread_self(); /* Set affinity mask to include CPUs 0 to 7 */ CPU_ZERO(\u0026amp;cpuset); for (j = 0; j \u0026lt; 8; j++) CPU_SET(j, \u0026amp;cpuset); s = pthread_setaffinity_np(thread, sizeof(cpu_set_t), \u0026amp;cpuset); if (s != 0) { handle_error_en(s, \u0026#34;pthread_setaffinity_np\u0026#34;); } /* Check the actual affinity mask assigned to the thread */ s = pthread_getaffinity_np(thread, sizeof(cpu_set_t), \u0026amp;cpuset); if (s != 0) { handle_error_en(s, \u0026#34;pthread_getaffinity_np\u0026#34;); } printf(\u0026#34;Set returned by pthread_getaffinity_np() contained:\\n\u0026#34;); for (j = 0; j \u0026lt; CPU_SETSIZE; j++) //CPU_SETSIZE æ˜¯å®šä¹‰åœ¨\u0026lt;sched.h\u0026gt;ä¸­çš„å®ï¼Œé€šå¸¸æ˜¯ 1024 { if (CPU_ISSET(j, \u0026amp;cpuset)) { printf(\u0026#34; CPU %d\\n\u0026#34;, j); } } exit(EXIT_SUCCESS); } âœ Affinity git:(main) ./bin/main Set returned by pthread_getaffinity_np() contained: CPU 0 CPU 1 CPU 2 CPU 3 CPU 4 CPU 5 CPU 6 CPU 7 ä½¿ç”¨ seched_setaffinity è®¾ç½®çº¿ç¨‹çš„ CPU äº²å’Œæ€§ #define _GNU_SOURCE #include \u0026lt;sched.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;sys/syscall.h\u0026gt; // syscall int main(void) { pid_t tid; int i, nrcpus; cpu_set_t mask; unsigned long bitmask = 0; CPU_ZERO(\u0026amp;mask); CPU_SET(0, \u0026amp;mask); /* add CPU0 to cpu set */ CPU_SET(2, \u0026amp;mask); /* add CPU2 to cpu set */ // è·å–çº¿ç¨‹ id tid = syscall(__NR_gettid); // or syscall(SYS_gettid); // å¯¹æŒ‡å®šçº¿ç¨‹ id è®¾ç½® CPU äº²å’Œæ€§ if (sched_setaffinity(tid, sizeof(cpu_set_t), \u0026amp;mask) == -1) { perror(\u0026#34;sched_setaffinity\u0026#34;); exit(EXIT_FAILURE); } nrcpus = sysconf(_SC_NPROCESSORS_CONF); for (i = 0; i \u0026lt; nrcpus; i++) { if (CPU_ISSET(i, \u0026amp;mask)) { bitmask |= (unsigned long)0x01 \u0026lt;\u0026lt; i; printf(\u0026#34;processor #%d is set\\n\u0026#34;, i); } } exit(EXIT_SUCCESS); } âœ Affinity git:(main) ./bin/main processor #0 is set processor #2 is set ä»€ä¹ˆæ˜¯ä¸­æ–­äº²å’Œæ€§ è®¡ç®—æœºä¸­ï¼Œä¸­æ–­æ˜¯ä¸€ç§ç”µä¿¡å·ï¼Œç”±ç¡¬ä»¶äº§ç”Ÿå¹¶ç›´æ¥é€åˆ°ä¸­æ–­æ§åˆ¶å™¨ä¸Šï¼Œå†ç”±ä¸­æ–­æ§åˆ¶å™¨å‘ CPU å‘é€ä¸­æ–­ä¿¡å·ï¼ŒCPU æ£€æµ‹åˆ°ä¿¡å·åï¼Œä¸­æ–­å½“å‰å·¥ä½œè½¬è€Œå¤„ç†ä¸­æ–­ä¿¡å·ã€‚CPU ä¼šé€šçŸ¥æ“ä½œç³»ç»Ÿå·²ç»äº§ç”Ÿä¸­æ–­ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šå¯¹ä¸­æ–­è¿›è¡Œå¤„ç†ã€‚ è¿™é‡Œæœ‰ç¯‡æ¨æ–‡ï¼šCPU æ˜æ˜ 8 ä¸ªæ ¸ï¼Œç½‘å¡ä¸ºå•¥æ‹¼å‘½æŠ˜è…¾ä¸€å·æ ¸ï¼Ÿç”ŸåŠ¨çš„è§£é‡Šäº†ä¸­æ–­äº²å’Œæ€§ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼ŒLinux ä¸­æ–­å“åº”ä¼šè¢«å¹³å‡åˆ†é…åˆ°æ‰€æœ‰ CPU æ ¸å¿ƒä¸Šï¼ŒåŠ¿å¿…ä¼šå‘ç”Ÿå†™æ–°çš„æ•°æ®å’ŒæŒ‡ä»¤ç¼“å­˜ï¼Œå¹¶ä¸ CPU æ ¸å¿ƒä¸ŠåŸæœ‰è¿›ç¨‹äº§ç”Ÿå†²çªï¼Œé€ æˆä¸­æ–­å“åº”å»¶è¿Ÿï¼Œå½±å“è¿›ç¨‹å¤„ç†æ—¶é—´ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†ä¸­æ–­ï¼ˆæˆ–è¿›ç¨‹ï¼‰ç»‘å®šåˆ°æŒ‡å®š CPU æ ¸å¿ƒä¸Šï¼Œä¸­æ–­ï¼ˆæˆ–è¿›ç¨‹ï¼‰æ‰€éœ€è¦æŒ‡ä»¤ä»£ç å’Œæ•°æ®æœ‰æ›´å¤§æ¦‚ç‡ä½äºæŒ‡å®š CPU æœ¬åœ°æ•°æ®å’ŒæŒ‡ä»¤ç¼“å­˜å†…ï¼Œè€Œä¸å¿…è¿›è¡Œæ–°çš„å†™ç¼“å­˜ï¼Œä»è€Œæé«˜ä¸­æ–­å“åº”ï¼ˆæˆ–è¿›ç¨‹ï¼‰çš„å¤„ç†é€Ÿåº¦ã€‚\nä¸­æ–­äº²å’Œæ€§çš„ä½¿ç”¨åœºæ™¯ å¯¹äºæ–‡ä»¶æœåŠ¡å™¨ã€Web æœåŠ¡å™¨ï¼ŒæŠŠä¸åŒçš„ç½‘å¡ IRQ å‡è¡¡ç»‘å®šåˆ°ä¸åŒçš„ CPU ä¸Šå°†ä¼šå‡è½»æŸ CP çš„è´Ÿè½½ï¼Œæé«˜å¤šä¸ª CPU æ•´ä½“å¤„ç†ä¸­æ–­çš„èƒ½åŠ›; å¯¹äºæ•°æ®åº“æœåŠ¡å™¨ï¼ŒæŠŠç£ç›˜æ§åˆ¶å™¨ç»‘åˆ°ä¸€ä¸ª CPUã€æŠŠç½‘å¡ç»‘å®šåˆ°å¦ä¸€ä¸ª CPU å°†ä¼šæé«˜æ•°æ®åº“çš„å“åº”æ—¶é—´ã€ä¼˜åŒ–æ€§èƒ½ã€‚\nåˆç†çš„æ ¹æ®è‡ªå·±çš„ç”Ÿäº§ç¯å¢ƒå’Œåº”ç”¨çš„ç‰¹ç‚¹æ¥å¹³è¡¡ IRQ ä¸­æ–­æœ‰åŠ©äºæé«˜ç³»ç»Ÿçš„æ•´ä½“ååèƒ½åŠ›å’Œæ€§èƒ½ã€‚\nä¸­æ–­ç»‘å®šæµç¨‹ å…³é—­ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹ ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹ï¼ˆirqbalance daemonï¼‰ä¼šå‘¨æœŸæ€§åœ°å°†ä¸­æ–­å¹³å‡åœ°å…¬å¹³åœ°åˆ†é…ç»™å„ä¸ª CPU æ ¸å¿ƒï¼Œé»˜è®¤å¼€å¯ã€‚ä¸ºäº†å®ç°ä¸­æ–­ç»‘å®šï¼Œé¦–å…ˆéœ€è¦å°†ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹å…³é—­ã€‚\nsystemctl status irqbalanceæŸ¥çœ‹å®ˆæŠ¤è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ âœ ~ systemctl status irqbalance â— irqbalance.service - irqbalance daemon Loaded: loaded (/lib/systemd/system/irqbalance.service; enabled; vendor preset: enable Active: active (running) since Thu 2022-05-19 14:46:20 CST; 1 weeks 1 days ago Main PID: 1062 (irqbalance) Tasks: 2 (limit: 4915) CGroup: /system.slice/irqbalance.service â””â”€1062 /usr/sbin/irqbalance --foreground 5æœˆ 19 14:46:20 zdd systemd[1]: Started irqbalance daemon. systemctl stop irqbalanceå…³é—­ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹ï¼Œä¸­æ–­å“åº”é»˜è®¤éƒ½ä¼šç”± CPU0 æ ¸å¿ƒå¤„ç†ã€‚æˆ–è€…systemctl disable irqbalanceå–æ¶ˆä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹å¼€æœºé‡å¯ã€‚å› ä¸ºå…³é—­ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹è¿‡äºå¼ºç¡¬ï¼Œå¯ä»¥åœ¨ä¸å…³é—­ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹æ¡ä»¶ä¸‹ï¼Œè®©æŸäº› CPU æ ¸å¿ƒè„±ç¦»ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹çš„ç®¡ç†ã€‚ ç»‘å®šä¸­æ–­ ä¸­æ–­ç»‘å®šæ—¶ï¼Œéœ€è¦å…³é—­ç³»ç»Ÿä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹systemctl stop irqbalanceè®¡ç®—æœºå½“å‰å„ç§ä¸­æ–­å“åº”æƒ…å†µåœ¨ /proc/interrupts æ–‡ä»¶ä¸­ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç¬¬ä¸€åˆ—æ˜¯ä¸­æ–­ ID å·ï¼ŒCPU N åˆ—æ˜¯ä¸­æ–­åœ¨ç¬¬ n ä¸ª CPU æ ¸å¿ƒä¸Šçš„å“åº”æ¬¡æ•°ï¼Œå€’æ•°ç¬¬äºŒåˆ—æ˜¯ä¸­æ–­ç±»å‹ï¼Œæœ€åä¸€åˆ—æ˜¯æè¿°ã€‚\nåˆ©ç”¨ echo å‘½ä»¤å°† CPU æ©ç å†™å…¥ /proc/irq/ä¸­æ–­ ID/smp_affinity æ–‡ä»¶ä¸­ï¼Œå³å¯å®ç°ä¿®æ”¹æŸä¸€ä¸­æ–­çš„ CPU äº²å’Œæ€§ã€‚ä¾‹å¦‚\necho 0x0004 \u0026gt; /proc/irq /50/smp_affinity å‚è€ƒèµ„æ–™ Linux ä¸­ CPU äº²å’Œæ€§ (affinity) - LubinLew - åšå®¢å›­ æ“ä½œç³»ç»Ÿåº•å±‚æŠ€æœ¯â€”â€”CPU äº²å’Œæ€§_mb60ed33cfc44fa çš„æŠ€æœ¯åšå®¢_51CTO åšå®¢ linux è¿›ç¨‹ã€çº¿ç¨‹ä¸ CPU çš„äº²å’Œæ€§ï¼ˆaffinityï¼‰_wx61d68abba262d çš„æŠ€æœ¯åšå®¢_51CTO åšå®¢ CPU æ˜æ˜ 8 ä¸ªæ ¸ï¼Œç½‘å¡ä¸ºå•¥æ‹¼å‘½æŠ˜è…¾ä¸€å·æ ¸ï¼Ÿ Processor affinity - Wikipedia ä»€ä¹ˆï¼Ÿä¸€ä¸ªæ ¸åŒæ—¶æ‰§è¡Œä¸¤ä¸ªçº¿ç¨‹ï¼Ÿ linux è¿›ç¨‹ã€çº¿ç¨‹ä¸ CPU çš„äº²å’Œæ€§ï¼ˆaffinityï¼‰ - zhangwju - åšå®¢å›­\n","permalink":"https://lifeislife.cn/posts/cpu%E4%BA%B2%E5%92%8C%E6%80%A7%E4%B8%8E%E4%B8%AD%E6%96%AD%E4%BA%B2%E5%92%8C%E6%80%A7/","summary":"\u003ch2 id=\"é¢„å¤‡çŸ¥è¯†\"\u003eé¢„å¤‡çŸ¥è¯†\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://mp.weixin.qq.com/s/HwDqCk8vtMdSEVSCLHAsbg\"\u003eè¶…çº¿ç¨‹æŠ€æœ¯ (Hyper-Threading)\u003c/a\u003eï¼šå°±æ˜¯åˆ©ç”¨ç‰¹æ®Šçš„ç¡¬ä»¶æŒ‡ä»¤ï¼ŒæŠŠä¸¤ä¸ªé€»è¾‘å†…æ ¸ (CPU core) æ¨¡æ‹Ÿæˆä¸¤ä¸ªç‰©ç†èŠ¯ç‰‡ï¼Œè®©å•ä¸ªå¤„ç†å™¨éƒ½èƒ½ä½¿ç”¨çº¿ç¨‹çº§å¹¶è¡Œè®¡ç®—ï¼Œè¿›è€Œå…¼å®¹å¤šçº¿ç¨‹æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶ï¼Œå‡å°‘äº† CPU çš„é—²ç½®æ—¶é—´ï¼Œæé«˜çš„ CPU çš„è¿è¡Œæ•ˆç‡ã€‚\u003c/p\u003e","title":"CPU äº²å’Œæ€§ä¸ä¸­æ–­äº²å’Œæ€§"},{"content":"å†…å­˜ ä¹Ÿå°±æ˜¯å†…éƒ¨å­˜å‚¨å™¨ï¼Œä¸»è¦ç”¨æ¥è¿è¡Œç¨‹åºçš„ï¼Œå…¸å‹çš„å°±æ˜¯ RAM éšæœºå­˜å‚¨å™¨ï¼ˆRandom Access Memoryï¼‰ï¼Œé‚£ä¹ˆéšæœºæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ‰€è°“éšæœºï¼ŒæŒ‡çš„æ˜¯å½“å­˜å‚¨å™¨ä¸­çš„æ•°æ®è¢«è¯»å–æˆ–å†™å…¥æ—¶ï¼Œæ‰€éœ€è¦çš„æ—¶é—´ä¸è¿™æ®µä¿¡æ¯æ‰€åœ¨çš„ä½ç½®æ— å…³ï¼ˆä»»ä½•ä½ç½®è¯»å†™é€Ÿåº¦ä¸€æ ·ï¼‰ã€‚\nDRAMï¼ˆDynamic Random Access Memoryï¼ŒåŠ¨æ€éšæœºå­˜å‚¨å™¨ï¼‰æ˜¯æœ€ä¸ºå¸¸è§çš„ç³»ç»Ÿå†…å­˜ã€‚æˆ‘ä»¬ä½¿ç”¨çš„ç”µè„‘å’Œæ‰‹æœºçš„è¿è¡Œå†…å­˜éƒ½æ˜¯ DRAMã€‚DRAM ä½¿ç”¨ç”µå®¹å­˜å‚¨ï¼ŒDRAM åªèƒ½å°†æ•°æ®ä¿æŒå¾ˆçŸ­çš„æ—¶é—´ã€‚ä¸ºäº†ä¿æŒæ•°æ®ï¼Œæ‰€ä»¥å¿…é¡»éš”ä¸€æ®µæ—¶é—´åˆ·æ–°ï¼ˆrefreshï¼‰ä¸€æ¬¡ï¼Œå¦‚æœå­˜å‚¨å•å…ƒæ²¡æœ‰è¢«åˆ·æ–°ï¼Œå­˜å‚¨çš„ä¿¡æ¯å°±ä¼šä¸¢å¤±ã€‚æ•°æ®çš„å­˜å‚¨ï¼Œè¯·å‚è€ƒæ•°æ®å­˜å‚¨æ¨¡å‹ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œç”µå®¹ä¸­çš„ç”µè·å¾ˆå®¹æ˜“å˜åŒ–ï¼Œæ‰€ä»¥éšç€æ—¶é—´æ¨ç§»ï¼Œç”µå®¹ä¸­çš„ç”µè·æ•°ä¼šå¢åŠ æˆ–å‡å°‘ï¼Œä¸ºäº†ç¡®ä¿æ•°æ®ä¸ä¼šä¸¢å¤±ï¼ŒDRAM æ¯éš”ä¸€æ®µæ—¶é—´ä¼šç»™ç”µå®¹åˆ·æ–°ï¼ˆå……ç”µæˆ–æ”¾ç”µï¼‰ã€‚åŠ¨æ€ï¼šå®šæ—¶åˆ·æ–°æ•°æ®\nSRAMï¼ˆStatic Random Access Memoryï¼Œé™æ€éšæœºå­˜å‚¨å™¨ï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§å…·æœ‰é™æ­¢å­˜å–åŠŸèƒ½çš„å†…å­˜ï¼Œå…¶å†…éƒ¨æœºæ„æ¯” DRAM å¤æ‚ï¼Œå¯ä»¥åšåˆ°ä¸åˆ·æ–°ç”µè·¯å³èƒ½ä¿å­˜å®ƒå†…éƒ¨å­˜å‚¨çš„æ•°æ®ã€‚é™æ€ï¼šä¸éœ€è¦åˆ·æ–°\nDDR SDRAMï¼ˆDouble Data Rate SDRAMï¼‰ï¼šä¸ºåŒä¿¡é“åŒæ­¥åŠ¨æ€éšæœºå­˜å–å†…å­˜ï¼Œæ˜¯æ–°ä¸€ä»£çš„ SDRAM æŠ€æœ¯ã€‚DDR å†…å­˜èŠ¯ç‰‡çš„æ•°æ®é¢„å–å®½åº¦ï¼ˆPrefetchï¼‰ä¸º 2 bitï¼ˆSDRAM çš„ä¸¤å€ï¼‰ã€‚\nDDR2 SDRAMï¼ˆDouble Data Rate Two SDRAMï¼‰ï¼šä¸ºåŒä¿¡é“ä¸¤æ¬¡åŒæ­¥åŠ¨æ€éšæœºå­˜å–å†…å­˜ã€‚DDR2 å†…å­˜ Prefetch åˆå†åº¦æå‡è‡³ 4 bitï¼ˆDDR çš„ä¸¤å€ï¼‰\nDDR3 SDRAMï¼ˆDouble Data Rate Three SDRAMï¼‰ï¼šä¸ºåŒä¿¡é“ä¸‰æ¬¡åŒæ­¥åŠ¨æ€éšæœºå­˜å–å†…å­˜ã€‚DDR3 å†…å­˜ Prefetch æå‡è‡³ 8 bitï¼Œå³æ¯æ¬¡ä¼šå­˜å– 8 bits ä¸ºä¸€ç»„çš„æ•°æ®ã€‚è¿ç®—é¢‘ç‡ä»‹äº 800MHz -1600MHz ä¹‹é—´ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¤–å­˜ å¤–éƒ¨å­˜å‚¨å™¨ï¼Œé€šå¸¸ç”¨æ¥å­˜å‚¨æ–‡ä»¶çš„ï¼Œä¸€èˆ¬ä¹Ÿå« ROMï¼ˆRead-only memoryï¼‰åªè¯»å­˜å‚¨å™¨ã€‚\nCPU è¿æ¥å†…å­˜å’Œå¤–å­˜çš„è¿æ¥æ–¹å¼ä¸åŒã€‚å†…å­˜éœ€è¦ç›´æ¥åœ°å€è®¿é—®ï¼Œæ‰€ä»¥æ˜¯é€šè¿‡åœ°å€æ€»çº¿\u0026amp;æ•°æ®æ€»çº¿çš„æ€»çº¿å¼è®¿é—®æ–¹å¼è¿æ¥çš„ï¼ˆå¥½å¤„æ˜¯ç›´æ¥è®¿é—®ï¼Œéšæœºè®¿é—®ï¼›åå¤„æ˜¯å ç”¨ CPU çš„åœ°å€ç©ºé—´ï¼Œå¤§å°å—é™ï¼‰ï¼›å¤–å­˜æ˜¯é€šè¿‡ CPU çš„å¤–å­˜æ¥å£æ¥è¿æ¥çš„ï¼ˆå¥½å¤„æ˜¯ä¸å ç”¨ CPU çš„åœ°å€ç©ºé—´ï¼Œåå¤„æ˜¯è®¿é—®é€Ÿåº¦æ²¡æœ‰æ€»çº¿å¼å¿«ï¼Œè®¿é—®æ—¶åºè¾ƒå¤æ‚ï¼‰\næˆ‘ä»¬å¹³æ—¶ç”¨çš„ç¡¬ç›˜ï¼ŒSD å¡éƒ½å±äº ROMï¼Œä½†æ˜¯ä»–ä»¬å´å¯ä»¥å†™å…¥ï¼ŸROM ä¸¥æ ¼æ„ä¹‰æ¥è®²ç¡®å®æ˜¯åªè¯»çš„ï¼Œä½†æ˜¯éšç€å‚¨å­˜å™¨çš„å‘å±•ï¼Œå‡ºç°äº†å¯æ“¦å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼ˆEPROMï¼‰ã€ç”µå¯æ“¦å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼ˆEEPROMï¼‰å½¢å¼çš„åŠå¯¼ä½“å­˜å‚¨å™¨ï¼Œä»¥åŠ flashã€‚ä»–ä»¬éƒ½æ˜¯å¯å†™çš„ã€‚ROM å°±ä¸å†å•å•åªè¡¨ç¤ºåªè¯»å­˜å‚¨å™¨äº†ï¼Œä¸€èˆ¬æ¥è¯´ä¸ RAM ç›¸å¯¹ï¼Œæ‰ç”µä¸æ˜“å¤±çš„å­˜å‚¨å™¨éƒ½è¢«å½“åš ROMã€‚\nROM ROMï¼ˆRead Only Memoryï¼‰åªè¯»å­˜å‚¨å™¨ï¼Œè¿™ç§å­˜å‚¨å™¨ï¼ˆMemoryï¼‰çš„å†…å®¹ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šæ”¹å˜ï¼Œç”µè„‘ä¸ç”¨æˆ·åªèƒ½è¯»å–ä¿å­˜åœ¨è¿™é‡Œçš„æŒ‡ä»¤ï¼Œå’Œä½¿ç”¨å­˜å‚¨åœ¨ ROM çš„èµ„æ–™ï¼Œä½†ä¸èƒ½å˜æ›´æˆ–å­˜å…¥èµ„æ–™ã€‚ROM è¢«å­˜å‚¨åœ¨ä¸€ä¸ªéæ˜“å¤±æ€§èŠ¯ç‰‡ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿åœ¨å…³æœºä¹‹åè®°å¿†çš„å†…å®¹ä»å¯ä»¥è¢«ä¿å­˜ï¼Œæ‰€ä»¥è¿™ç§å­˜å‚¨å™¨å¤šç”¨æ¥å­˜å‚¨ç‰¹å®šåŠŸèƒ½çš„ç¨‹åºï¼Œå¦‚å›ºä»¶ã€‚ROM å­˜å‚¨ç”¨æ¥å¯åŠ¨ç”µè„‘çš„ç¨‹åºï¼ˆå¦‚BIOSï¼‰ï¼Œç”µè„‘å¼•å¯¼çš„æ—¶å€™ BIOS æä¾›ä¸€è¿ä¸²çš„æŒ‡ä»¤å¯¹ä¸­å¤®å¤„ç†å™¨ï¼ˆCPUï¼‰ç­‰ç»„ä»¶è¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼ŒBIOS ç¨‹åºåˆå§‹åŒ–å¹¶æ£€æŸ¥RAMã€‚\nNorFlash æ€»çº¿å¼è®¿é—®ï¼Œæ¥åˆ° SROM bankï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥ç›´æ¥æ€»çº¿è®¿é—®ï¼Œä¸€èˆ¬ç”¨æ¥å¯åŠ¨ã€‚\nNandFlash SLCï¼šå®¹é‡å°ï¼Œä»·æ ¼é«˜ï¼Œç¨³å®šæ€§é«˜\nMLCï¼šå®¹é‡å¤§ï¼Œä»·æ ¼ä½ï¼Œç¨³å®šæ€§å·®ï¼Œæ˜“å‡ºåå—\niNand SanDisk å…¬å¸å‡ºäº§çš„ eMMC\nmoviNand ä¸‰æ˜Ÿå…¬å¸å‡ºäº§çš„ eMMC\noneNAND ä¸‰æ˜Ÿå…¬å¸å‡ºçš„ä¸€ç§ Nandï¼Œä»·æ ¼è´µï¼Œç”¨çš„å°‘\nSD å¡ï¼ˆSecure Digital Memory Cardï¼‰\n\u003c!DOCTYPE html\u003e Responsive Image TF å¡ï¼ˆTransFLash Card, MicroSDï¼‰\n\u003c!DOCTYPE html\u003e Responsive Image MMC å¡\n\u003c!DOCTYPE html\u003e Responsive Image eMMC å¡ï¼ˆembeded MMCï¼‰ åµŒå…¥å¼çš„ MMCï¼Œå¯ä»¥å½“æˆä¸€ç§èŠ¯ç‰‡ï¼Œå†…éƒ¨åšäº†åå—å¤„ç†\nSATA ç¡¬ç›˜\nç‰¹ç‚¹ï¼šæœºæ¢°å¼è®¿é—®ã€ç£å­˜å‚¨åŸç†ã€SATA æ˜¯æ¥å£ã€‚\n","permalink":"https://lifeislife.cn/posts/soc%E5%AD%98%E5%82%A8%E5%99%A8%E6%AF%94%E8%BE%83/","summary":"\u003ch2 id=\"å†…å­˜\"\u003eå†…å­˜\u003c/h2\u003e\n\u003cp\u003eä¹Ÿå°±æ˜¯å†…éƒ¨å­˜å‚¨å™¨ï¼Œä¸»è¦ç”¨æ¥è¿è¡Œç¨‹åºçš„ï¼Œå…¸å‹çš„å°±æ˜¯ RAM éšæœºå­˜å‚¨å™¨ï¼ˆRandom Access Memoryï¼‰ï¼Œé‚£ä¹ˆéšæœºæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ‰€è°“éšæœºï¼ŒæŒ‡çš„æ˜¯å½“å­˜å‚¨å™¨ä¸­çš„æ•°æ®è¢«è¯»å–æˆ–å†™å…¥æ—¶ï¼Œæ‰€éœ€è¦çš„æ—¶é—´ä¸è¿™æ®µä¿¡æ¯æ‰€åœ¨çš„ä½ç½®æ— å…³ï¼ˆä»»ä½•ä½ç½®è¯»å†™é€Ÿåº¦ä¸€æ ·ï¼‰ã€‚\u003c/p\u003e","title":"SoC å­˜å‚¨å™¨æ¯”è¾ƒ"},{"content":" å¯¹ Interlaken åè®®æ–‡æ¡£çš„ç¿»è¯‘åŠ äº†ä¸€äº›è‡ªå·±çš„ç†è§£ï¼›\n8b/10bç¼–ç ï¼šåœ¨ä¸²è¡Œé€šé“ä¸Šä¼ è¾“æ—¶ï¼Œå°† 8bits æ•°æ®ç¼–ç ä¸º 10bits æ•°æ®ï¼Œåšä¸€ä¸ªè½¬æ¢ï¼Œä½¿å„ä½æ•°æ®ä¹‹é—´æœ‰æ›´å¤šçš„ 1 åˆ° 0 å’Œ 0 åˆ° 1 çš„è·³å˜ï¼Œä»¥ä¾¿æ¥æ”¶è®¾å¤‡æ£€æµ‹è¿™äº›è·³å˜ï¼Œèƒ½æ›´å®¹æ˜“åœ°æ¢å¤æ—¶é’Ÿã€‚64B/67B ç¼–ç ç¼–ç çš„åŸå› ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚è¿™æ ·ï¼Œåœ¨ä¸²è¡Œé€šé“ä¸Šä¼ è¾“ 10 ä½æ•°æ®ï¼Œå®é™…ä¸Šåªä¼ è¾“äº† 8 ä½ã€‚\nåè®®å±‚ï¼ˆProtocol Layerï¼‰ ä¼ è¾“æ ¼å¼ æ•°æ®é€šè¿‡å¯é…ç½®æ•°é‡çš„ SerDes é€šé“ï¼ˆLaneï¼‰ï¼Œå†ç”± Interlaken æ¥å£ä¼ è¾“ã€‚åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œé€šé“è¢«å®šä¹‰ä¸ºä¸¤ä¸ª IC ä¹‹é—´çš„å•å·¥ä¸²è¡Œé“¾è·¯ï¼ˆsimplex serial linkï¼‰ã€‚è¯¥åè®®æ—¨åœ¨ä¸ä»»æ„æ•°é‡çš„é€šé“ä¸€èµ·è¿è¡Œï¼ˆ1 ä¸ªæˆ–å¤šä¸ªï¼Œæ²¡æœ‰ä¸Šé™ï¼‰ã€‚å®é™…å®ç°æ—¶ä¼šå›ºå®šä¸€ä¸ªæ•°å€¼ï¼Œä¸ä¼šè®¾è®¡ä¸ºå¯å˜å€¼ã€‚\næ¥å£å‘é€æ•°æ®çš„åŸºæœ¬å•ä½æ˜¯ä¸€ä¸ª 8 å­—èŠ‚çš„å­—ï¼ˆWordï¼‰ã€‚ç”¨ 8 å­—èŠ‚æ˜¯ä¸ºäº†ç¬¦åˆ64B/67B ç¼–ç ï¼Œç”¨äºæè¿°çªå‘ï¼ˆBurstï¼‰çš„æ§åˆ¶å­—çš„å¤§å°ä¹Ÿæ˜¯ 8 å­—èŠ‚ã€‚é€šè¿‡ä½¿åŸºæœ¬ä¼ è¾“å•å…ƒä¸æ§åˆ¶å­—å¤§å°ç›¸ç­‰ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è°ƒæ•´æ¥å£çš„å®½åº¦ã€‚\næ•°æ®å’Œæ§åˆ¶å­—æŒ‰é¡ºåºåœ¨é€šé“ä¸Šä¼ è¾“ï¼Œä»é€šé“ 0 å¼€å§‹ï¼Œåˆ°é€šé“ M ç»“æŸï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªæ•°æ®å—ä¸­é‡å¤ã€‚å›¾ 4 è¯´æ˜äº†è¯¥è¿‡ç¨‹\n\u003c!DOCTYPE html\u003e Responsive Image 64B/67Bç¼–ç åœ¨æ¯ä¸ªé€šé“ä¸Šç‹¬ç«‹è¿›è¡Œã€‚ä¼ è¾“é€šè¿‡ä¸¤ç§åŸºæœ¬æ•°æ®ç±»å‹å®ç°ï¼šæ•°æ®å­—å’Œæ§åˆ¶å­—ï¼Œä»–ä»¬é€šè¿‡64B/67B å¸§ä½ï¼ˆframing bitsï¼‰è¿›è¡ŒåŒºåˆ†ã€‚è¿™ä¸¤ç§æ•°æ®å­—ç±»å‹çš„æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æ•°æ®å’Œæ§åˆ¶ä¿¡æ¯éƒ½æ˜¯ä»¥ä½ 66ï½0 çš„é¡ºåºä¼ è¾“çš„ï¼Œæ¡†æ¶å±‚å¼•å…¥äº† 4 ä¸ªé™„åŠ æ§åˆ¶å­—ï¼Œè¯¦ç»†ä¿¡æ¯åé¢å°†æè¿°ã€‚\nBurst ç»“æ„ï¼ˆBurst Structureï¼‰ æ•°æ®ä¼ è¾“æµç¨‹ Interlaken æ¥å£çš„å¸¦å®½åœ¨æ”¯æŒçš„é€šé“ä¸Šè¢«åˆ’åˆ†ä¸º Burstsã€‚æ•°æ®åŒ…é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ª Burst åœ¨æ¥å£ä¸Šä¼ è¾“ã€‚Burst é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªæ§åˆ¶å­—æ¥æè¿°ã€‚ä¸ºäº†å°†ä»»æ„å¤§å°çš„æ•°æ®åŒ…åˆ†å‰²æˆ Burstï¼Œå®šä¹‰ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°ï¼š\nBurstMaxï¼šBurst çš„æœ€å¤§å¤§å°ï¼ˆ64Bytes çš„å€æ•°ï¼‰ BurstShortï¼šBurst çš„æœ€å°å¤§å°ï¼ˆæœ€å° 32Bytesï¼Œå¢é‡ä¸º 8Bytesï¼‰ è¯¥æ¥å£é€šå¸¸é€šè¿‡å‘é€ä¸€ä¸ª BurstMax é•¿åº¦çš„æ•°æ®çªå‘æ¥è¿è¡Œï¼Œç„¶åæ˜¯ä¸€ä¸ªæ§åˆ¶å­—ã€‚å‘é€è®¾å¤‡ä¸­çš„è°ƒåº¦é€»è¾‘å¯ä»¥è‡ªç”±é€‰æ‹©ä¿¡é“æœåŠ¡çš„é¡ºåºï¼Œå—æµæ§çŠ¶æ€çš„çº¦æŸã€‚Burst åœ¨æ¯ä¸ªé€šé“ä¸Šä¼ è¾“ï¼Œç›´åˆ°æ•°æ®åŒ…å®Œå…¨ä¼ è¾“ï¼Œæ­¤æ—¶è¯¥é€šé“ä¸Šçš„æ–°æ•°æ®åŒ…ä¼ è¾“æ‰å¼€å§‹ã€‚\nå› ä¸ºæ¥å£æ˜¯ä¿¡é“åŒ–çš„ï¼Œæ•°æ®åŒ…çš„ç»“æŸå¯èƒ½ä¼šåœ¨å‡ ä¸ªä¿¡é“ä¸Šè¿ç»­åœ°å‡ºç°ï¼Œæ¯ä¸ªä¿¡é“ä¸Šçš„å‰©ä½™æ•°æ®é‡éå¸¸å°ã€‚ç”±äºå‘å°„å™¨å’Œæ¥æ”¶å™¨çš„å­˜å‚¨å™¨å¯èƒ½è¢«ç†æƒ³åœ°è®¾è®¡æˆå®½æ•°æ®é€šè·¯ï¼Œå®ƒä»¬éœ€è¦ä»¥éå¸¸é«˜çš„é€Ÿç‡æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚ä¸ºäº†å‡å°‘æ¥æ”¶å™¨å’Œå‘å°„å™¨çš„è´Ÿæ‹…ï¼ŒBurstShort å‚æ•°ä¿è¯äº†è¿ç»­çš„ Burst æ§åˆ¶å­—ä¹‹é—´çš„æœ€å°é—´éš”ã€‚æœ€å°çš„ BurstShort é—´éš”æ˜¯ 32 å­—èŠ‚ï¼Œæ›´å¤§çš„å€¼å¯ä»¥ä»¥ 8 å­—èŠ‚ä¸ºå¢é‡ã€‚\nå¦‚æœæ²¡æœ‰æœ€å° Burst çš„é™åˆ¶ï¼Œé‚£ä¹ˆæ•°æ®åŒ…å¤ªå°çš„è¯ï¼Œå‘é€å™¨æˆ–è€…æ¥æ”¶å™¨å°±ä¼šé¢‘ç¹æ”¶åˆ° end-of-packetï¼Œè¿™å°±å¢åŠ äº†å¤„ç†è´Ÿæ‹…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ§åˆ¶å­—æ ¼å¼ çªå‘é€šè¿‡ä¸€ä¸ª 8 å­—èŠ‚çš„æ§åˆ¶å­—æ¥æè¿°ã€‚æ§åˆ¶å­—åœ¨æ•°æ®æµä¸­é€šè¿‡ä½¿ç”¨ä½ [66:64] çš„â€œ0x10â€æ§åˆ¶ä»£ç å’Œä½ [63] = \u0026lsquo;1\u0026rsquo; æ¥æ ‡è¯†çªå‘å’Œç©ºé—²æ§åˆ¶å­—æ ¼å¼å¦‚ç¬¬ 16 é¡µçš„å›¾ 7 æ‰€ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æµæ§ï¼ˆFlow Controlï¼‰ Interlaken çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯èƒ½å¤Ÿä¼ è¾¾æ¯ä¸ªé€šé“èƒŒå‹ï¼ˆbackpressureï¼‰ã€‚ä¸ºäº†æä¾›æ­¤åŠŸèƒ½ï¼ŒæŒ‡å®šäº†ä¸¤ä¸ªé€‰é¡¹ï¼šå¸¦å¤–æµæ§æ¥å£å’Œå¸¦å†…é€šé“ã€‚ä»è¯­ä¹‰ä¸Šè®²ï¼Œæµæ§åˆ¶ä¿¡æ¯ä½¿ç”¨ç®€å•çš„å¼€å…³æœºåˆ¶æ¥è¡¨ç¤ºå…è®¸åœ¨ç‰¹å®šé€šé“ä¸Šä¼ è¾“ã€‚\nå¼€å…³æµæ§åˆ¶çŠ¶æ€ä¸æ¯ä¸ªé€šé“çš„å•ä¸ªçŠ¶æ€ä½è¿›è¡Œé€šä¿¡ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œâ€œ1â€æ ‡è¯†â€œXONâ€çŠ¶æ€ï¼Œè¡¨ç¤ºå…è®¸å‘é€å™¨åœ¨è¯¥é€šé“ä¸Šå‘é€æ•°æ®ã€‚ â€œ0â€æ ‡è¯†â€œXOFFâ€çŠ¶æ€ï¼Œè¡¨ç¤ºå‘é€å™¨ä¸å…è®¸åœ¨è¯¥é€šé“ä¸Šå‘é€æ•°æ®ã€‚\nè¯¥åè®®æ²¡æœ‰ Credits çš„æ¦‚å¿µï¼›ä¸€æ—¦é€šé“è¢«æŒ‡ç¤ºä¸º XONï¼Œå‘é€å™¨å¯ä»¥åœ¨è¯¥é€šé“ä¸Šå‘é€å°½å¯èƒ½å¤šçš„æ•°æ®ï¼Œç›´åˆ°æµæ§åˆ¶çŠ¶æ€æ›´æ”¹ä¸º XOFFã€‚æ¥æ”¶å™¨é€‰æ‹©åœ¨ XON å’Œ XOFF çŠ¶æ€ä¹‹é—´åˆ‡æ¢çš„é˜ˆå€¼æ˜¯ç•™ç»™ç”¨æˆ·çš„å¯ç¼–ç¨‹é€‰é¡¹ï¼Œå–å†³äºæ”¯æŒçš„é€šé“æ•°é‡ã€æ¥æ”¶ç¼“å†²åŒºçš„æ·±åº¦å’Œç»™å®šç¯å¢ƒçš„æµæ§åˆ¶å»¶è¿Ÿã€‚\næµæ§åˆ¶é€šé“å¯ä»¥é€‰æ‹©æ˜ å°„åˆ° calendarï¼Œä»è€Œæµæ§åˆ¶å¯ä»¥æ˜ å°„åˆ°ä»»ä½•ä¸€ç»„ calendar entryã€‚ä¾‹å¦‚ï¼Œè¿™äº›å¯ä»¥åŒ…æ‹¬é€šé“åˆ° calendar entry çš„ä¸€å¯¹ä¸€æ˜ å°„ã€ä¸€å¯¹å¤šæ˜ å°„æˆ–æ’å…¥ç©ºå­—æ®µä»¥åŒ¹é…å…·æœ‰ä¸åŒé€šé“å®šä¹‰çš„è®¾å¤‡ã€‚\nChannel Calendar å°†é€šé“æ˜ å°„åˆ°æµæ§çŠ¶æ€æ§½\nè¿™ä¸ª Calendar ç»“æ„ä¹Ÿå¯ä»¥ç”¨æ¥æä¾›é“¾è·¯çº§çš„æµæ§åˆ¶ï¼ŒCalendar ä¸­çš„ä¸€ä¸ª bit ä»£è¡¨äº†åœ¨æ•´ä¸ªæ¥å£ä¸Šä¼ è¾“æ•°æ®çš„æƒé™ã€‚é“¾è·¯çŠ¶æ€çš„ææ€§å°†ä¸é€šé“çŠ¶æ€çš„ææ€§ç›¸åŒï¼šâ€œ1â€è¡¨ç¤ºå…è®¸ä¼ è¾“ï¼Œâ€œ0â€è¡¨ç¤ºç«‹å³åœæ­¢ä¼ è¾“ã€‚è¦å¯ç”¨æ­¤åŠŸèƒ½ï¼Œå¯ä»¥ä¸ºæ¯ä¸ª Calendar entry é…ç½®é€šé“ä¿¡æ¯æˆ–é“¾æ¥ä¿¡æ¯ã€‚ä¸ºäº†ä¿ƒè¿›ä½å»¶è¿Ÿé“¾è·¯çŠ¶æ€ï¼Œæ¥å£éœ€è¦æä¾›è¶³å¤Ÿçš„ Calendar entryï¼Œä»¥ä¾¿åœ¨æ¯ä¸ªçªå‘/ç©ºé—²æ§åˆ¶å­—çš„ç›¸åŒä½ä½ç½®ç¼–ç¨‹é“¾è·¯çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨è¶…è¿‡ 16 ä¸ªé€šé“ï¼Œè¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹è®¾ç½®æ‰§è¡Œï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œlink statuså°†å§‹ç»ˆå‡ºç°åœ¨çªå‘/ç©ºé—²æ§åˆ¶å­—çš„ä½[55]ä¸­ã€‚\nå¸¦å¤–æµæ§ ä¸ºäº†æ”¯æŒéœ€è¦å•å·¥æ“ä½œçš„ç³»ç»Ÿï¼Œå®šä¹‰äº†å¸¦å¤–æµé‡æ§åˆ¶é€‰é¡¹ã€‚è¿™æ˜¯ä½œä¸ºä¸€ä¸ªæºåŒæ­¥æ¥å£å®ç°çš„ï¼Œå¹¶ç”±ä»¥ä¸‹ä¿¡å·æŒ‡å®šï¼š\nå‹å·åç§° åŠŸèƒ½ FC_CLK ä¸æµæ§æ•°æ®åŒæ­¥çš„æ—¶é’Ÿ FC_DATA æµé‡æ§åˆ¶çŠ¶æ€ä¿¡æ¯ (å•æ¯”ç‰¹) FC_SYNC ä¸€ç§åŒæ­¥ä¿¡å·ï¼Œç”¨äºæ ‡è¯†æµæ§åˆ¶ calendar çš„å¼€å¤´ æ¯ä¸ªä¿¡å·çš„ pad æŠ€æœ¯å¯ä»¥æ˜¯ LVDS æˆ– LVCMOSã€‚è¿™äº›ä¿¡å·çš„é€»è¾‘æ—¶åºå…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¸¦å¤–æµæ§åˆ¶é€šé“ç”± 4 ä½ CRC è®¡ç®—ä¿æŠ¤ï¼Œè¯¥ CRC è®¡ç®—è¦†ç›–äº†å¤šè¾¾ 64 ä½çš„æµæ§åˆ¶æ•°æ®ã€‚æ ¹æ®^[P. Koopman and T. Chakravarty, Cyclic Redundancy Code (CRC) Polynomial Selection for Embedded Networks, The International Conference on Dependable Networks and Systems, DSN-2004.] ä¸­çš„å»ºè®®ï¼ŒCRC4 å¤šé¡¹å¼ä¸ºï¼š\n$$ x^4+x+1 $$\nå¸¦å†…æµæ§ å½“ä½¿ç”¨æ­¤é€‰é¡¹æ—¶ï¼Œæ¥æ”¶å™¨åˆ©ç”¨é€šè¿‡æ¥å£å‘é€çš„æ§åˆ¶å­—ä¸­çš„æµæ§åˆ¶çŠ¶æ€ï¼Œä½œä¸ºæ­£å¸¸æ•°æ®ä¼ è¾“çš„ä¸€éƒ¨åˆ†ã€‚æä¾›æ­¤é€‰é¡¹çš„ç›®çš„æ˜¯ï¼Œéœ€è¦æœ€å°‘æ•°é‡çš„å¤–éƒ¨ä¿¡å·å¼•è„šçš„å…¨åŒå·¥å®ç°ã€‚\nå¦‚ Figure 7 æ‰€ç¤ºï¼Œæ§åˆ¶å­—çš„æµæ§åˆ¶å­—æ®µä¸º 16 ä½ï¼Œä½äº bit[55:40]ã€‚æ§åˆ¶å­—çš„ä½ [31:24] ä¹Ÿå¯ä»¥ç”¨äºæµæ§åˆ¶çš„å¦å¤– 8 ä½ï¼Œæ€»å…± 24 ä½ã€‚è¿™äº›çŠ¶æ€ä½è¡¨ç¤ºæ¯ä¸ª Interlaken Calendar é€šé“çš„ ON-OFF æµæ§åˆ¶çŠ¶æ€ï¼Œå½“å‰ Calendar Entry X åœ¨ä½ [55]ï¼ŒCalendar Entry X + 1 åœ¨ä½ [54]ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¸ºäº†åŒæ­¥ calendar çš„å¼€å§‹ï¼Œåœ¨ç©ºé—²/çªå‘æ§åˆ¶å­—ä¸­æä¾›äº†â€œreset calendarâ€ä½ã€‚å½“è¯¥ä½ä¸ºâ€œ1â€æ—¶ï¼Œcalendar entry 0 çš„çŠ¶æ€å°†å‡ºç°åœ¨ä½ [55] ä¸­ã€‚å½“â€œreset calendarâ€ä¸ºâ€œ0â€æ—¶ï¼Œcalendar å°†ä»ä¸Šä¸€ä¸ªæ§åˆ¶å­—ä¸­ä¿ç•™çš„ä½ç½®å¼€å§‹ç»§ç»­ã€‚å½“æ‰€æœ‰é€šé“çš„æµæ§çŠ¶æ€è¢«ä¼ è¾“å®Œï¼Œå‘é€å™¨å°†é‡ç½®å¤ä½ calendarï¼Œç„¶åé‡å¤ä¸Šä¸€è½®é¡ºåºæ“ä½œã€‚Calendar æœ€åä¸€ä¸ªæ§åˆ¶å­—ä¸­ä¸éœ€è¦çš„ bitï¼ˆå³ï¼Œå½“é€šé“æ•°ç›®ä¸æ˜¯çŠ¶æ€æ•°ç›®çš„å€æ•°æ—¶ï¼‰è¢«å‘é€ç«¯ç½® 0ï¼Œæ¥æ”¶ç«¯å¿½ç•¥ã€‚\nå‚è€ƒèµ„æ–™ ","permalink":"https://lifeislife.cn/posts/interlaken%E5%8D%8F%E8%AE%AE/","summary":"\u003cblockquote\u003e\n\u003cp\u003eå¯¹ Interlaken åè®®æ–‡æ¡£çš„ç¿»è¯‘åŠ äº†ä¸€äº›è‡ªå·±çš„ç†è§£ï¼›\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003e8b/10bç¼–ç \u003c/strong\u003eï¼šåœ¨ä¸²è¡Œé€šé“ä¸Šä¼ è¾“æ—¶ï¼Œå°† 8bits æ•°æ®ç¼–ç ä¸º 10bits æ•°æ®ï¼Œåšä¸€ä¸ªè½¬æ¢ï¼Œä½¿å„ä½æ•°æ®ä¹‹é—´æœ‰æ›´å¤šçš„ 1 åˆ° 0 å’Œ 0 åˆ° 1 çš„è·³å˜ï¼Œä»¥ä¾¿æ¥æ”¶è®¾å¤‡æ£€æµ‹è¿™äº›è·³å˜ï¼Œèƒ½æ›´å®¹æ˜“åœ°æ¢å¤æ—¶é’Ÿã€‚\u003cstrong\u003e64B/67B ç¼–ç \u003c/strong\u003eç¼–ç çš„åŸå› ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚è¿™æ ·ï¼Œåœ¨ä¸²è¡Œé€šé“ä¸Šä¼ è¾“ 10 ä½æ•°æ®ï¼Œå®é™…ä¸Šåªä¼ è¾“äº† 8 ä½ã€‚\u003c/p\u003e","title":"Interlaken åè®®"},{"content":"AXI ç»„æˆéƒ¨åˆ†ï¼š\nAXI4 åè®®ä¸­åŒ…å«äº”ç§ä¿¡é“ï¼Œé€šé“ä¹‹é—´ç›¸äº’ç‹¬ç«‹ä¸”å­˜åœ¨å·®åˆ«ï¼Œé€šè¿‡é€šé“è¿›è¡Œé€šä¿¡ä¹‹å‰éœ€è¦ä½¿ç”¨ VALID/READY è¿›è¡Œæ¡æ‰‹ï¼ŒRead å’Œ Write æ ¹æ® Master å®šä¹‰ï¼š\nè¯»åœ°å€ä¿¡é“ï¼ˆRead Address Channelï¼‰ å†™åœ°å€ä¿¡é“ï¼ˆWrite Address Channelï¼‰ è¯»æ•°æ®ä¿¡é“ï¼ˆRead Data Channelï¼‰ å†™æ•°æ®ä¿¡é“ï¼ˆWrite Data Channelï¼‰ å†™å“åº”ä¿¡é“ï¼ˆWrite Response Channelï¼‰ è¿˜æœ‰ä¸¤ç§ Component\nMaster component Slave component é€šä¿¡ç”± Master å‘èµ·ï¼ŒMaster å¯ä»¥å¯¹ Slave è¿›è¡Œè¯»æ•°æ®ï¼ˆreadï¼‰æˆ–å†™ï¼ˆwriteï¼‰æ•°æ®ã€‚æ¯æ¬¡è¯»å†™æ“ä½œéƒ½éœ€è¦ä¸€ä¸ªåœ°å€ï¼Œè¯»åœ°å€ä¿¡é“ï¼ˆRead Address Channelï¼‰å’Œå†™åœ°å€ä¿¡é“ï¼ˆWrite Address Channelï¼‰ç”¨äºä¼ è¾“åœ°å€ã€‚åœ¨å†™å®Œæ•°æ®åï¼ŒMaster éœ€è¦ç¡®è®¤ Slave æœ‰æ²¡æœ‰æ”¶å®Œæ•°æ®ï¼ŒSlave æ”¶åˆ°å®Œæ•´æ•°æ®åï¼Œä¼šé€šè¿‡å†™å“åº”ä¿¡é“ï¼ˆWrite Response Channelï¼‰ç»™ Master ä¸€ä¸ªåé¦ˆï¼ˆcompletionï¼‰ï¼Œè¡¨ç¤ºå†™æ“ä½œå·²ç»å®Œæˆã€‚\nVALID/READY æ¡æ‰‹æœºåˆ¶ AXI äº”ä¸ªä¿¡é“ç›¸äº’ç‹¬ç«‹ï¼Œä½†æ˜¯ä½¿ç”¨åŒä¸€ä¸ªæ¡æ‰‹æœºåˆ¶æ¥å®ç°ä¿¡æ¯ä¼ é€’ã€‚\nåœ¨æ¡æ‰‹æœºåˆ¶ä¸­ï¼Œé€šä¿¡åŒæ–¹åˆ†åˆ«æ‰®æ¼”å‘é€æ–¹(Source) å’Œæ¥æ”¶æ–¹ï¼ˆDestinationï¼‰ï¼Œä¸¤è€…çš„æ“ä½œï¼ˆæŠ€èƒ½ï¼‰å¹¶ä¸ç›¸åŒã€‚\nå‘é€æ–¹ç½®é«˜ VALID ä¿¡å·è¡¨ç¤ºå‘é€æ–¹å·²ç»å°†æ•°æ®ï¼Œåœ°å€æˆ–è€…æ§åˆ¶ä¿¡æ¯å·²ç»å°±ç»ªï¼Œå¹¶ä¿æŒäºæ¶ˆæ¯æ€»çº¿ä¸Šã€‚\næ¥æ”¶æ–¹ç½®é«˜ READY ä¿¡å·è¡¨ç¤ºæ¥æ”¶æ–¹å·²ç»åšå¥½æ¥æ”¶çš„å‡†å¤‡ã€‚\nå½“åŒæ–¹çš„ VALID/READY ä¿¡å·åŒæ—¶ä¸ºé«˜ï¼Œåœ¨æ—¶é’Ÿ ACLK ä¸Šå‡æ²¿ï¼Œå®Œæˆä¸€æ¬¡æ•°æ®ä¼ è¾“ã€‚æ‰€æœ‰æ•°æ®ä¼ è¾“å®Œæ¯•åï¼ŒåŒæ–¹åŒæ—¶ç½®ä½è‡ªå·±çš„ä¿¡å·ã€‚\næ¯ä¸ªé€šé“éƒ½æœ‰è‡ªå·±çš„ VALID /READY æ¡æ‰‹ä¿¡å·å¯¹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šç”¨åˆ° LAST ä¿¡å·ã€‚LAST ä¿¡å·å­˜åœ¨ Write Data Channel å’Œ Read Data Channel ä¸­ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸º WLAST å’Œ RLASTï¼Œç”¨äºæ ‡è®° burst çš„æœ€åä¸€æ¬¡æ•°æ®ä¼ è¾“ï¼Œå½“ slave æ¥æ”¶åˆ° LAST ä¿¡å·åï¼Œè¯´æ˜æœ¬æ¬¡æ•°æ®ä¼ è¾“å®Œæˆã€‚\nåŒå‘æµæ§ æ‰€è°“çš„åŒå‘æµæ§æœºåˆ¶ï¼ŒæŒ‡çš„æ˜¯å‘é€æ–¹é€šè¿‡ç½®èµ· VALID ä¿¡å·æ§åˆ¶å‘é€çš„æ—¶æœºä¸é€Ÿåº¦ï¼Œæ¥æ”¶æ–¹ä¹Ÿå¯ä»¥é€šè¿‡ READY ä¿¡å·çš„ç½®èµ·ä¸å¦æ§åˆ¶æ¥æ”¶é€Ÿåº¦ã€‚\nå‘é€æ–¹æ‹¥æœ‰ä¼ è¾“çš„ä¸»åŠ¨æƒï¼Œä½†æ¥æ”¶æ–¹åœ¨ä¸å…·å¤‡æ¥æ”¶èƒ½åŠ›æ—¶ï¼Œä¹Ÿèƒ½å¤Ÿç½®ä½ä¿¡å·åœæ­¢ä¼ è¾“ï¼Œåå‹å‘é€æ–¹ã€‚\næ¡æ‰‹è¿‡ç¨‹åˆ†æ å›¾ä¸­ INFORMATION ä¿¡å·æ— åº•è‰²åŒºåŸŸè¡¨ç¤ºæ­¤æ—¶æ•°æ®å·²ç»å‡†å¤‡å¥½ï¼Œå·²ç»æœ‰æ–°çš„æ•°æ®åˆ°è¾¾ã€‚\nVALID ä¿¡å·å…ˆåˆ°\nå‘é€æ–¹ VALID ä¿¡å·æ—©æ—©å°±åˆ°äº†ï¼Œä½†æ˜¯æ¥æ”¶æ–¹çš„ READY ä¿¡å·åœ¨ T2 ä¹‹å‰éƒ½æ²¡æœ‰å‘é€ã€‚å¯èƒ½æ¥æ”¶æ–¹åœ¨æ¥æ”¶å…¶ä»–æ•°æ®ï¼Œæˆ–è€…è¢«å µåœ¨æ•°æ®é€šè·¯ä¸Šã€‚\nè¿‡äº† T2 åï¼ŒREADY ä¿¡å·åˆ°æ¥ï¼Œæ­¤æ—¶å¼€å§‹ä¼ è¾“ï¼Œç›´åˆ° T3 ç»“æŸï¼Œä¼ è¾“å®Œæˆã€‚\nè¿™é‡Œä¹Ÿä½“ç°äº†åŒå‘æµæ§æœºåˆ¶ï¼Œå‘é€æ–¹çš„ VALID ä¿¡å·åªè¦ç½®é«˜ï¼Œå†æ¡æ‰‹å®Œæˆä¹‹å‰éƒ½ä¸èƒ½ç½®ä½ï¼Œå¿…é¡»ç­‰åˆ°æ¥æ”¶æ–¹ READY ä¿¡å·ç½®é«˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image READY ä¿¡å·å…ˆåˆ°\nREADY ä¿¡å·å¾ˆè‡ªç”±ï¼Œå¯ä»¥ç­‰å¾… VALID ä¿¡å·åˆ°æ¥å†åšå“åº”ï¼Œä½†ä¹Ÿå®Œå…¨å¯ä»¥åœ¨ VALID ä¿¡å·åˆ°æ¥å‰å°±ç½®é«˜ï¼Œè¡¨ç¤ºæ¥æ”¶ç«¯å·²ç»åšå¥½å‡†å¤‡äº†ã€‚\nè€Œä¸”ï¼ŒREADY ä¿¡å·ä¸ VALID ä¸åŒï¼Œæ¥æ”¶æ–¹å¯ä»¥ç½®èµ· READY ä¹‹ååœ¨ VALID ç½®é«˜ä¹‹å‰éƒ½å¯ä»¥éšæ—¶å†ç½®ä½ READY ä¿¡å·ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¿¡å·åŒæ—¶åŒæ—¶åˆ°è¾¾\nè¿™ä¸ªæœ€ç®€å•ï¼Œä¸¤ä¸ªä¿¡å·éƒ½ç­‰ç€ä¸€ä¸ªæ—¶é’Ÿä¸Šå‡æ²¿å°±å®Œæˆä¼ è¾“äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ¡æ‰‹ä¿¡å·ä¹‹é—´çš„ä¾èµ–å…³ç³» ä¸ºäº†é˜²æ­¢æ­»é”å‘ç”Ÿï¼Œä¿¡å·ä¹‹é—´è¦éµå¾ªä¸€äº›è§„çŸ©ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚ä¸Šé¢æåˆ°çš„ READY ä¿¡å·ä¾èµ– VALID ä¿¡å·ï¼Œä½†æ˜¯ VALID ä¿¡å·ä¸èƒ½æ ¹æ® READY ä¿¡å·æ¥åˆ¤æ–­æ˜¯å¦æ•°æ®å·²å‡†å¤‡å¥½ï¼Œå¦åˆ™å°†ä¼šé€ æˆæ­»é”ã€‚ä¸‹é¢è¯¦ç»†è§£é‡Šè¯»å†™è¿‡ç¨‹ä¸­éœ€è¦éµå¾ªçš„ä¾èµ–å…³ç³»ã€‚\nå•ç®­å¤´æŒ‡å‘çš„ä¸¤ä¸ªä¿¡å·ï¼Œä¿¡å·çš„ç½®é«˜ï¼Œä½æ²¡æœ‰é¡ºåºè¦æ±‚ã€‚ åŒç®­å¤´è¡¨ç¤ºç®­å¤´æ‰€æŒ‡å¯¹è±¡åº”è¿Ÿäºç®­å¤´å‡ºå‘ä¿¡å·å‘é€ã€‚ Read transaction dependencies\n\u003c!DOCTYPE html\u003e Responsive Image Master ä¸å¾—ç­‰å¾… Slave ç½®é«˜ ARREADY Slave å¯ä»¥åœ¨ç½®é«˜ ARREADY ä¹‹å‰ç­‰å¾… ARVALID ç½®é«˜ Slave èƒ½å¤Ÿåœ¨ ARVALID ç½®é«˜ä¹‹å‰å…ˆç½®é«˜ ARREADY Slave å¿…é¡»ç­‰å¾… ARVALID å’Œ ARREADY éƒ½è¢«ç½®é«˜ï¼Œç„¶åæ‰ç½®é«˜ RVALID ä»¥è¡¨ç¤ºæœ‰æ•ˆæ•°æ®å¯ç”¨ åœ¨ç½®é«˜ RVALID ä¹‹å‰ï¼ŒSlave ä¸å¾—ç­‰å¾… Master ç½®é«˜ RREADY Master å¯ä»¥åœ¨ç½®é«˜ RREADY ä¹‹å‰ç­‰å¾… RVALID è¢«ç½®é«˜ Master å¯ä»¥åœ¨ RVALID è¢«ç½®é«˜ä¹‹å‰ç½®é«˜ RREADY Write transaction dependencies\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨ç½®é«˜ AWVALID æˆ– WVALID ä¹‹å‰ï¼ŒMaster ä¸å¾—ç­‰å¾… Slave ç½®é«˜ AWREADY æˆ– WREADY Slave å¯ä»¥åœ¨ç½®é«˜ AWREADY ä¹‹å‰ç­‰å¾… AWVALID æˆ– WVALIDï¼Œæˆ–ä¸¤è€…éƒ½ç­‰å¾… Slave å¯ä»¥åœ¨ AWVALID æˆ– WVALID æˆ–ä¸¤è€…éƒ½è¢«ç½®é«˜ä¹‹å‰ç½®é«˜ AWREADY åœ¨ç½®é«˜ WREADY ä¹‹å‰ï¼ŒSlave å¯ä»¥ç­‰å¾… AWVALID æˆ– WVALIDï¼Œæˆ–ä¸¤è€…éƒ½ç­‰å¾… Slave å¯ä»¥åœ¨ AWVALID æˆ– WVALID æˆ–ä¸¤è€…éƒ½è¢«ç½®é«˜ä¹‹å‰ç½®é«˜ WREADY åœ¨ç½®é«˜ BVALID ä¹‹å‰ï¼ŒSlave å¿…é¡»ç­‰å¾… WVALID å’Œ WREADY éƒ½è¢«ç½®é«˜ Slaveè¿˜å¿…é¡»åœ¨ç½®é«˜ BVALID ä¹‹å‰ç­‰å¾… WLAST è¢«ç½®é«˜ï¼Œå› ä¸ºå†™å…¥å“åº” BRESP å¿…é¡»åœ¨å†™å…¥äº‹åŠ¡çš„æœ€åä¸€æ¬¡æ•°æ®ä¼ è¾“ä¹‹åæ‰å‘å‡ºä¿¡å· åœ¨ç½®é«˜ BVALID ä¹‹å‰ï¼ŒSlave ä¸å¾—ç­‰å¾… Master ç½®é«˜ BREADY Master å¯ä»¥åœ¨ç½®é«˜ BREADY ä¹‹å‰ç­‰å¾… BVALID Master å¯ä»¥åœ¨ BVALID è¢«ç½®é«˜ä¹‹å‰ç½®é«˜ BREADY åœ°å€ç»“æ„ï¼ˆAddress structureï¼‰ AXI åè®®æ˜¯åŸºäº Burst çš„ï¼Œåœ°å€ç»“æ„é‡Œå£°æ˜äº†ä¸€äº›ä¼ è¾“è¿‡ç¨‹ä¸­éœ€è¦çš„ä¿¡å·ï¼Œå¦‚èµ·å§‹åœ°å€ï¼Œburst ä¼ è¾“é•¿åº¦ï¼Œä¼ è¾“æ¨¡å¼ç­‰ç­‰ã€‚\nBurst åœ¨ä»‹ç» Burst transfer ä¹‹å‰ï¼Œéœ€è¦è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ Burstã€‚åœ¨æ‰‹å†Œçš„æœ¯è¯­è¡¨ä¸­ï¼Œä¸ AXI ä¼ è¾“ç›¸å…³çš„æœ‰ä¸‰ä¸ªæ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯ transfer(beat)ã€burstã€transactionã€‚\nAXI Transactionï¼šthe complete set of required operations on the AXI bus form the AXI Transaction.è¡¨ç¤ºä¼ è¾“ä¸€æ®µæ•°æ® (AXI burst) æ‰€éœ€çš„ä¸€æ•´å¥—æ“ä½œï¼› AXI Burstï¼šany required payload data is transferred as an AXI Burst.è¡¨ç¤º AXI å¾…ä¼ æ•°æ®ï¼› AXI Beatsï¼ša burst can comprise multiple data transfers, or AXI Beats.è¡¨ç¤º AXI burst çš„ç»„æˆï¼Œä¸€ä¸ª Beat å°±æ˜¯ä¸€ä¸ª transferã€‚ ä¸‰è€…çš„å…³ç³»ï¼šåœ¨ AXI ä¼ è¾“äº‹åŠ¡ï¼ˆTransactionï¼‰ä¸­ï¼Œæ•°æ®ä»¥çªå‘ä¼ è¾“ï¼ˆBurstï¼‰çš„å½¢å¼ç»„ç»‡ã€‚ä¸€æ¬¡çªå‘ä¼ è¾“ä¸­å¯ä»¥åŒ…å«ä¸€è‡³å¤šä¸ªæ•°æ®ï¼ˆTransferï¼‰ã€‚æ¯ä¸ª transfer å› ä¸ºä½¿ç”¨ä¸€ä¸ªå‘¨æœŸï¼Œåˆè¢«ç§°ä¸ºä¸€æ‹æ•°æ®ï¼ˆBeatï¼‰ã€‚\n$$ \\text{Transaction} = M \\text{Burst} ,M \\geq 1 \\ \\text{Burst} = N \\text{Transfer( or Beat)} ,N \\geq 1 $$\nåœ¨åœ°å€é€šé“ä¸­æœ‰ä¸‰ä¸ªä¿¡å·æ§åˆ¶è¿›è¡Œæ§åˆ¶ï¼ŒåŒ…æ‹¬ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ARLEN(Burst Length)\næŒ‡ä¸€æ¬¡çªå‘ä¼ è¾“ä¸­åŒ…å«çš„æ•°æ®ä¼ è¾“ (transfer) æ•°é‡ï¼Œåœ¨åè®®ä¸­ä½¿ç”¨ AxLen ä¿¡å·æ§åˆ¶ã€‚åœ¨ AXI4 ä¸­ï¼ŒINCR ç±»å‹æœ€å¤§æ”¯æŒé•¿åº¦ä¸º 256ï¼Œå…¶ä»–ç±»å‹æœ€å¤§é•¿åº¦ä¸º 16ã€‚è€Œ AXI3 ä¸­è¿™ä¸€æ•°å­—æ— è®ºä½•ç§æ¨¡å¼å‡ä¸º 16ã€‚å› æ­¤ AXI4 ä¸­ AxLen ä¿¡å·ä½å®½ä¸º 8bitï¼ŒAXI3 ä¸­çš„ AxLen åˆ™ä»…éœ€è¦ 4bitã€‚\nARSIZE(Burst Size)\næŒ‡ä¼ è¾“ä¸­çš„æ•°æ®ä½å®½ï¼Œå…·ä½“åœ°ï¼Œæ˜¯æ¯å‘¨æœŸä¼ è¾“æ•°æ®çš„å­—èŠ‚æ•°é‡ï¼Œåœ¨åè®®ä¸­ä½¿ç”¨ AXSIZE ä¿¡å·æ§åˆ¶ã€‚çªå‘ä¼ è¾“æ•°æ®å®½åº¦ä¸èƒ½è¶…è¿‡æ•°æ®æ€»çº¿æœ¬èº«çš„ä½å®½ã€‚è€Œå½“æ•°æ®æ€»çº¿ä½å®½å¤§äºçªå‘ä¼ è¾“å®½åº¦æ—¶ï¼Œå°†æ ¹æ®åè®®çš„ç›¸å…³è§„å®šï¼Œå°†æ•°æ®åœ¨éƒ¨åˆ†æ•°æ®çº¿ä¸Šä¼ è¾“ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ARBURST(Burst Type)\nBurst Typeï¼šAXI åè®®ä¸­æ”¯æŒä¸åŒçš„ Burst ä¼ è¾“ç±»å‹ï¼Œä¸»è¦åˆ† FIXEDã€INCRã€WRAPã€‚\n\u003c!DOCTYPE html\u003e Responsive Image FIXED ä¼ è¾“ä¸ºåœ°å€å›ºå®šä¼ è¾“ï¼Œæ‰€æœ‰ä¼ è¾“éƒ½ä¼šå†™åœ¨åŒä¸€ä¸ªåœ°å€ä¸­ã€‚ä¸»è¦åº”ç”¨åœ¨ FIFO çš„ä¼ è¾“ä¸­ï¼Œå› ä¸º FIFO ä¸ºå…ˆå…¥å…ˆå‡ºï¼Œåªéœ€è¦å¾€åŒä¸€ä¸ªåœ°å€å†™æ•°æ®å³å¯ã€‚ INCR ä¼ è¾“ä¸ºåœ°å€é€’å¢ä¼ è¾“ï¼Œå¯æ ¹æ®å…·ä½“çš„é…ç½®æœ‰å›ºå®šé•¿åº¦é€’å¢å’Œéå®šé•¿é€’å¢ã€‚å¤§éƒ¨åˆ†çš„æ•°æ®ä¼ è¾“éƒ½æ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå°¤å…¶æ˜¯åœ¨å†…å­˜è®¿é—®ä¸­ï¼Œå¯ä»¥å¤§å¤§æé«˜æ•ˆç‡ã€‚ WRAP ä¼ è¾“ä¸ºåœ°å€å›ç¯ä¼ è¾“ï¼Œåœ¨ä¸€å®šé•¿åº¦åä¼šå›ç¯åˆ°èµ·å§‹åœ°å€ã€‚ä¸»è¦åº”ç”¨åœ¨ Cache æ“ä½œä¸­ï¼Œå› ä¸º cache æ˜¯æŒ‰ç…§ cache line è¿›è¡Œæ“ä½œï¼Œé‡‡ç”¨ wrap ä¼ è¾“å¯ä»¥æ–¹ä¾¿çš„å®ç°ä»å†…å­˜ä¸­å–å›æ•´ä¸ª cache lineã€‚ AXI burst è¯»æ“ä½œï¼šmaster åªéœ€è¦å‘é€ burst çš„èµ·å§‹åœ°å€ï¼Œslave ä¼šæ ¹æ® burst çš„èµ·å§‹åœ°å€ä¸ burst åœºåœ°è‡ªåŠ¨è¿›è¡Œåœ°å€è®¡ç®—ï¼Œå°†å¯¹åº”çš„æ•°æ®ä¸å“åº”å‘é€åˆ° master ä¾§ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image AXI burst å†™æ“ä½œä¸­ï¼Œä¹Ÿåªéœ€è¦å‘é€ burst å†™çš„èµ·å§‹åœ°å€ï¼Œslave åªéœ€è¦æ¥å—èµ·å§‹åœ°å€ï¼Œç„¶åæ ¹æ®ä¼ è¾“çš„é•¿åº¦å°†æ•°æ®ä¼ è¾“åˆ°å¯¹åº”çš„åœ°å€ç¼“å­˜ä¸­ã€‚åªéœ€è¦è¿›è¡Œä¸€æ¬¡æ¡æ‰‹å°±å¯ä»¥å®ç°åœ°å€é€šé“çš„è¯·æ±‚ä¼ è¾“ï¼Œé¿å…ç³»ç»Ÿæ€»çº¿çš„å ç”¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ•°æ®ç»“æ„ï¼ˆData read and write structureï¼‰ è¯»å†™æ•°æ®ç»“æ„ä¸­å£°æ˜äº†å‡ ç§æ•°æ®ä¼ è¾“æ–¹å¼ã€‚\nåœ¨ä»‹ç»è¿™äº›ä¼ è¾“æ–¹å¼ä¹‹å‰ï¼Œéœ€è¦äº†è§£WSTRB(Write strobes) å†™é€‰é€šä¿¡å·ã€‚å†™é€‰é€šä¿¡å· WSTRB å…è®¸åœ¨å†™æ•°æ®æ€»çº¿ä¸Šè¿›è¡Œ ç¨€ç–æ•°æ® ä¼ è¾“ã€‚æ¯ä¸ªå†™é€‰é€šä¿¡å·å¯¹åº”å†™æ•°æ®æ€»çº¿ä¸Šçš„ä¸€ä¸ªå­—èŠ‚ã€‚å½“å†™é€‰é€šæ–­è¨€æ—¶ï¼Œè¡¨ç¤ºå†™æ•°æ®æ€»çº¿ä¸Šå¯¹åº”çš„å­—èŠ‚é€šé“ä¸­åŒ…å«å°†è¢«æ›´æ–°åˆ° memory çš„æœ‰æ•ˆä¿¡æ¯ã€‚\nå†™æ•°æ®æ€»çº¿ä¸Šæ¯ 8 ä½å…·æœ‰ä¸€ä¸ªå†™é€‰é€šä½ï¼Œå› æ­¤ WSTRB[n] å¯¹åº” WDATA[(8 x n) + 7 : (8 x n)]ã€‚é»˜è®¤æƒ…å†µä¸‹ WSTRB = 0xFFFFã€‚ä¹Ÿå°±æ˜¯æ‰€æœ‰é€šè·¯éƒ½æ˜¯é€šçš„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image Narrow Transfer å½“æœ¬æ¬¡ä¼ è¾“ä¸­æ•°æ®ä½å®½å°äºé€šé“æœ¬èº«çš„æ•°æ®ä½å®½æ—¶ï¼Œç§°ä¸ºçª„ä½å®½æ•°æ®ä¼ è¾“ï¼Œæˆ–è€…ç›´æ¥ç¿»è¯‘æˆçª„ä¼ è¾“ã€‚å¦‚ä¸‹å›¾ï¼Œä¼ è¾“æ€»çº¿ä¸º 32bitï¼Œä½†æ˜¯æ¯æ¬¡åªä¼ äº† 8 bitã€‚\nçª„ä¼ è¾“å°±æ˜¯é€šè¿‡ STRB ä¿¡å·æŒ‡å®šæœ‰æ•ˆä¼ è¾“æ•°æ®çš„ä½å®½æ¥å®ç°ã€‚é’ˆå¯¹ä¸€äº›ç‰¹å®šçš„å¯„å­˜å™¨è¯»å†™ï¼Œæˆ–è€…åœ¨ä¸åŒæ•°æ®ä½å®½çš„æ€»çº¿ä¼ è¾“ä¸­ä¼šä½¿ç”¨çª„ä¼ è¾“æ“ä½œã€‚å¦‚å›¾ï¼Œç¬¬ä¸€æ¬¡ä¼ è¾“æ—¶ï¼ŒWSTRB ä¿¡å·ä¸º 0x01ï¼ŒWSTRB = b'001ï¼Œè¡¨ç¤º WDATA[7:0] æ•°æ®æœ‰æ•ˆã€‚\néœ€è¦æ³¨æ„åœ¨å¤šç¬”è¿ç»­çš„çª„ä¼ è¾“æ“ä½œä¸­ï¼ŒSTRB ä¼šéšç€åœ°å€é€’å¢è¿›è¡Œå“åº”çš„å˜åŒ–ï¼Œè¿™æ ·æ–¹ä¾¿åœ¨ç³»ç»Ÿè®¾è®¡ä½¿ç”¨ä¸­å¯ä»¥æ–¹ä¾¿çš„å°†çª„ä¼ è¾“åˆå¹¶ï¼Œä»è€Œæå‡ç³»ç»Ÿä¼ è¾“æ•ˆç‡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image Unaligned Transfer AXI åè®®è§„å®šå•æ¬¡ burst ä¼ è¾“ä¸­çš„æ•°æ®ï¼Œå…¶åœ°å€ä¸èƒ½è·¨è¶Š 4KB è¾¹ç•Œã€‚ä¹Ÿå°±æ˜¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œ 4K å¯¹é½ã€‚ä½†æ˜¯åœ¨æŸäº›æ—¶å€™ï¼Œä¼šæœŸæœ›åœ¨éå¯¹é½çš„åœ°å€å¼€å§‹ä¸€ä¸ªçªå‘ï¼Œå³éå¯¹é½ä¼ è¾“ã€‚\nåè®®ä¸­ä¹‹æ‰€ä»¥è§„å®šä¸€ä¸ª burst ä¸èƒ½è·¨è¶Š 4K è¾¹ç•Œæ˜¯ä¸ºäº†é¿å…ä¸€æ¬¡ burst è®¿é—®ä¸¤ä¸ª slaveï¼ˆæ¯ä¸ª slave çš„åœ°å€ç©ºé—´æ˜¯ 4K/1K å¯¹é½çš„ï¼‰ã€‚4K å¯¹é½æœ€å¤§åŸå› æ˜¯ç³»ç»Ÿä¸­å®šä¹‰ä¸€ä¸ª page å¤§å°æ˜¯ 4Kï¼Œè€Œæ‰€è°“çš„ 4K è¾¹ç•Œæ˜¯æŒ‡ä½ 12bit ä¸º 0 çš„åœ°å€ã€‚\néå¯¹é½ä¼ è¾“æ˜¯æŒ‡æœ‰äº›ä¼ è¾“æŒ‡ä»¤ä¸æ˜¯æŒ‰ç…§ word å¯¹é½ï¼Œè€Œæ˜¯æŒ‰ç…§ Byte å¯¹é½è¿›è¡Œä¼ è¾“ã€‚èµ·å§‹åœ°å€å¯èƒ½æ˜¯ä»»æ„çš„åœ°å€ã€‚å¦‚ä¸‹å›¾ä¸­ï¼Œèµ·å§‹åœ°å€ä¸º 0x1ï¼Œåˆ™åœ¨ç³»ç»Ÿä¸Šéœ€è¦æŒ‰ç…§éå¯¹é½çš„æ–¹å¼è¿›è¡Œä¼ è¾“ã€‚ç¬¬ä¸€æ¬¡ä¼ è¾“é‡‡ç”¨ strb ä¿¡å·æŒ‡å®šå¯¹åº”çš„ Byte æœ‰æ•ˆï¼Œåé¢çš„ä¼ è¾“å¯ä»¥æŒ‰ç…§æ­£å¸¸çš„ä¼ è¾“è¿›è¡Œã€‚\nä¸‹å›¾æ˜¯ä¸€äº›ä¼ è¾“ç¤ºä¾‹ï¼Œæœ‰é˜´å½±çš„æ ¼å­è¡¨ç¤ºå½“å‰å­—èŠ‚ä¸ä¼šè¢«ä¼ è¾“ã€‚\nå›¾ä¸€ä¸ºæ­£å¸¸çš„å¯¹é½ä¼ è¾“ï¼Œä¼ è¾“èµ·å§‹åœ°å€ä¸º 0x00ã€‚\nå›¾äºŒä¸ºéå¯¹é½ä¼ è¾“ï¼Œèµ·å§‹åœ°å€ä¸º 0x01ï¼Œç¬¬ä¸€ä¸ªæ ¼å­å¯¹åº”çš„ WSTRB = b'1110ã€‚\nå›¾ä¸‰åŒä¸Šï¼Œåªæ˜¯ Burst length ä¸º 5ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å›¾å››ä¹Ÿä¸ºéå¯¹é½ä¼ è¾“ï¼Œèµ·å§‹åœ°å€ä¸º 0x07ã€‚å¯¹åº”çš„ WSTRB = b'1000ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/amba%E6%80%BB%E7%BA%BF%E5%8D%8F%E8%AE%AE-axi%E5%8D%8F%E8%AE%AE/","summary":"\u003ch2 id=\"axi\"\u003eAXI\u003c/h2\u003e\n\u003cp\u003eç»„æˆéƒ¨åˆ†ï¼š\u003c/p\u003e\n\u003cp\u003eAXI4 åè®®ä¸­åŒ…å«äº”ç§ä¿¡é“ï¼Œé€šé“ä¹‹é—´ç›¸äº’ç‹¬ç«‹ä¸”å­˜åœ¨å·®åˆ«ï¼Œé€šè¿‡é€šé“è¿›è¡Œé€šä¿¡ä¹‹å‰éœ€è¦ä½¿ç”¨ VALID/READY è¿›è¡Œæ¡æ‰‹ï¼ŒRead å’Œ Write æ ¹æ® Master å®šä¹‰ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè¯»åœ°å€ä¿¡é“ï¼ˆRead Address Channelï¼‰\u003c/li\u003e\n\u003cli\u003eå†™åœ°å€ä¿¡é“ï¼ˆWrite Address Channelï¼‰\u003c/li\u003e\n\u003cli\u003eè¯»æ•°æ®ä¿¡é“ï¼ˆRead Data Channelï¼‰\u003c/li\u003e\n\u003cli\u003eå†™æ•°æ®ä¿¡é“ï¼ˆWrite Data Channelï¼‰\u003c/li\u003e\n\u003cli\u003eå†™å“åº”ä¿¡é“ï¼ˆWrite Response Channelï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿˜æœ‰ä¸¤ç§ Component\u003c/p\u003e","title":"AMBA æ€»çº¿åè®®-AXI åè®®"},{"content":"ç®€ä»‹ å¸¸è¯´çš„çŠ¶æ€æœºæ˜¯æœ‰é™çŠ¶æ€æœº FSMï¼Œæ˜¯è¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦è®¡ç®—æ¨¡å‹ã€‚ ä¸‰ä¸ªç‰¹å¾ï¼š\nçŠ¶æ€æ€»æ•°ï¼ˆstateï¼‰æ˜¯æœ‰é™çš„ã€‚ ä»»ä¸€æ—¶åˆ»ï¼Œåªå¤„åœ¨ä¸€ç§çŠ¶æ€ä¹‹ä¸­ã€‚ æŸç§æ¡ä»¶ä¸‹ï¼Œä¼šä»ä¸€ç§çŠ¶æ€è½¬å˜ï¼ˆtransitionï¼‰åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚ è®¾è®¡çŠ¶æ€æœºçš„å…³é”®ç‚¹ï¼šå½“å‰çŠ¶æ€ã€å¤–éƒ¨è¾“å…¥ã€ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚\nçŠ¶æ€æœºåˆ†ç±» Moore å‹çŠ¶æ€æœº Moore å‹çŠ¶æ€æœºç‰¹ç‚¹æ˜¯ï¼šè¾“å‡ºåªä¸å½“å‰çŠ¶æ€æœ‰å…³ï¼ˆä¸è¾“å…¥ä¿¡å·æ— å…³ï¼‰ã€‚ç›¸å¯¹ç®€å•ï¼Œè€ƒè™‘çŠ¶æ€æœºçš„ä¸‹ä¸€ä¸ªçŠ¶æ€æ—¶åªéœ€è¦è€ƒè™‘å®ƒçš„å½“å‰çŠ¶æ€å°±è¡Œäº†ã€‚\nMealy å‹çŠ¶æ€æœº Mealy å‹çŠ¶æ€æœºçš„ç‰¹ç‚¹æ˜¯ï¼šè¾“å‡ºä¸åªå’Œå½“å‰çŠ¶æ€æœ‰å…³ï¼Œè¿˜ä¸è¾“å…¥ä¿¡å·æœ‰å…³ã€‚çŠ¶æ€æœºæ¥æ”¶åˆ°ä¸€ä¸ªè¾“å…¥ä¿¡å·éœ€è¦è·³è½¬åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€æ—¶ï¼ŒçŠ¶æ€æœºç»¼åˆè€ƒè™‘ 2 ä¸ªæ¡ä»¶ï¼ˆå½“å‰çŠ¶æ€ã€è¾“å…¥å€¼ï¼‰åæ‰å†³å®šè·³è½¬åˆ°å“ªä¸ªçŠ¶æ€ã€‚\nå®ç°ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœº ä»£ç å‚è€ƒAstarLight/FSM-frameworkã€‚\nä»¥å°æ˜çš„ä¸€å¤©è®¾è®¡å‡ºä¸€ä¸ªçŠ¶æ€æœºï¼Œä¸‹å›¾ä¸ºçŠ¶æ€è½¬ç§»å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image é¦–å…ˆï¼Œæœ‰é™çŠ¶æ€æœºçš„çŠ¶æ€æ˜¯æœ‰é™çš„ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€å¤©ä¸­çš„çŠ¶æ€ï¼š\nenum { GET_UP, GO_TO_SCHOOL, HAVE_LUNCH, DO_HOMEWORK, SLEEP, }; çŠ¶æ€æœºåœ¨æ²¡æœ‰äº‹ä»¶çš„é©±åŠ¨ä¸‹å°±æ˜¯ä¸€æ½­æ­»æ°´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰å‡ºä¸€äº›ä¼šå‘ç”Ÿçš„äº‹ä»¶ï¼Œå»é©±åŠ¨çŠ¶æ€æœºçš„è¿è½¬ï¼š\nenum { EVENT1 = 1, EVENT2, EVENT3, }; å†å®šä¹‰ä¸€äº›åœ¨æŸä¸ªçŠ¶æ€ä¸‹éœ€è¦å¤„ç†çš„åŠ¨ä½œï¼Œä¹Ÿå°±æ˜¯å‡½æ•°ï¼š\nvoid GetUp() { // do something printf(\u0026#34;xiao ming gets up!\\n\u0026#34;); } void Go2School() { // do something printf(\u0026#34;xiao ming goes to school!\\n\u0026#34;); } void HaveLunch() { // do something printf(\u0026#34;xiao ming has lunch!\\n\u0026#34;); } void DoHomework() { // do something printf(\u0026#34;xiao ming does homework!\\n\u0026#34;); } void Go2Bed() { // do something printf(\u0026#34;xiao ming goes to bed!\\n\u0026#34;); } å®šä¹‰ä¸€ä¸ªçŠ¶æ€è¡¨ç»“æ„ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€æœºçš„çŠ¶æ€ï¼š\ntypedef struct FsmTable_s { int event; //äº‹ä»¶ int CurState; //å½“å‰çŠ¶æ€ void (*eventActFun)(); //å‡½æ•°æŒ‡é’ˆ int NextState; //ä¸‹ä¸€ä¸ªçŠ¶æ€ }FsmTable_t; æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™ä¸ªç»“æ„å®šä¹‰ä¸€ä¸ªçŠ¶æ€è¡¨ï¼ŒçŠ¶æ€æœºæ ¹æ®è¿™ä¸ªè¡¨è¿›è¡ŒçŠ¶æ€çš„æµè½¬ï¼š\nFsmTable_t XiaoMingTable[] = { //{åˆ°æ¥çš„äº‹ä»¶ï¼Œå½“å‰çš„çŠ¶æ€ï¼Œå°†è¦è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œä¸‹ä¸€ä¸ªçŠ¶æ€} { EVENT1, SLEEP, GetUp, GET_UP }, { EVENT2, GET_UP, Go2School, GO_TO_SCHOOL }, { EVENT3, GO_TO_SCHOOL, HaveLunch, HAVE_LUNCH }, { EVENT1, HAVE_LUNCH, DoHomework, DO_HOMEWORK }, { EVENT2, DO_HOMEWORK, Go2Bed, SLEEP }, }; å®šä¹‰ä¸€ä¸ªçŠ¶æ€æœºç»“æ„ï¼Œè¡¨ç¤ºä¸€ä¸ªçŠ¶æ€æœºï¼š\ntypedef struct FSM_s { FsmTable_t* FsmTable; //æŒ‡å‘çš„çŠ¶æ€è¡¨ int curState; //FSMå½“å‰æ‰€å¤„çš„çŠ¶æ€ }FSM_t; æœ‰äº†è¿™äº›åŸºæœ¬çš„ç»“æ„ï¼Œå°±å¯ä»¥å†™ä¸»å‡½æ•°äº†ï¼š\nint main() { FSM_t fsm; // å®ä¾‹åŒ–ä¸€ä¸ªçŠ¶æ€æœº InitFsm(\u0026amp;fsm); // åˆå§‹åŒ–çŠ¶æ€æœº int event = EVENT1; // åˆå§‹åŒ–äº‹ä»¶ï¼Œä¸ºäº†å¯åŠ¨çŠ¶æ€æœºæµè½¬ï¼Œ // å› ä¸ºçŠ¶æ€æœºåªæœ‰åœ¨æœ‰æ—¶é—´å‘ç”Ÿæ—¶æ‰ä¼šæ”¹å˜çŠ¶æ€ //å°æ˜çš„ä¸€å¤©,å‘¨è€Œå¤å§‹çš„ä¸€å¤©åˆä¸€å¤©ï¼Œè¿›è¡Œç€ç›¸åŒçš„æ´»åŠ¨ while (1) { printf(\u0026#34;event %d is coming...\\n\u0026#34;, event); FSM_EventHandle(\u0026amp;fsm, event); // æœ‰äº†åˆå§‹äº‹ä»¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œ // å†å†™ä¸€ä¸ªå¤„ç†äº‹ä»¶çš„å‡½æ•° printf(\u0026#34;fsm current state %d\\n\u0026#34;, fsm.curState); test(\u0026amp;event); Sleep(1); //ä¼‘çœ 1ç§’ï¼Œæ–¹ä¾¿è§‚å¯Ÿ } return 0; } // æµ‹è¯•ç”¨çš„ï¼Œæ¨¡æ‹Ÿäº‹ä»¶çš„å‘ç”Ÿ void test(int *event) { if (*event == 3) { *event = 1; } else { (*event)++; } } ç¼–å†™åˆå§‹åŒ–çŠ¶æ€æœºçš„å‡½æ•°ï¼š\nint g_state_max_num = 0; // çŠ¶æ€æœºçš„çŠ¶æ€æœ€å¤§æ•°é‡ï¼Œæ ¹æ®çŠ¶æ€è¡¨çš„å¤§å°æ¥è®¡ç®— // åˆå§‹åŒ–FSM void InitFsm(FSM_t* pFsm) { g_state_max_num = sizeof(XiaoMingTable) / sizeof(FsmTable_t); pFsm-\u0026gt;curState = SLEEP; // åˆå§‹çŠ¶æ€ä¸ºç¡è§‰ pFsm-\u0026gt;FsmTable = XiaoMingTable; } ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ï¼š\n/* äº‹ä»¶å¤„ç† */ void FSM_EventHandle(FSM_t* pFsm, int event) { FsmTable_t* pActTable = pFsm-\u0026gt;FsmTable; void (*eventActFun)() = NULL; //å‡½æ•°æŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©º int NextState; int CurState = pFsm-\u0026gt;curState; /* è·å–å½“å‰åŠ¨ä½œå‡½æ•° */ for (int i = 0; i\u0026lt;g_max_num; i++) { //å½“ä¸”ä»…å½“å½“å‰çŠ¶æ€ä¸‹æ¥ä¸ªæŒ‡å®šçš„äº‹ä»¶ï¼Œæˆ‘æ‰æ‰§è¡Œå®ƒ if (event == pActTable[i].event \u0026amp;\u0026amp; CurState == pActTable[i].CurState) { pActTable[i].eventActFun(); // æ‰§è¡ŒåŠ¨ä½œå‡½æ•° FSM_StateTransfer(pFsm, pActTable[i].NextState); // æ‰§è¡ŒçŠ¶æ€è½¬ç§» break; } else { // do nothing } } } /* çŠ¶æ€è¿ç§» */ void FSM_StateTransfer(FSM_t* pFsm, int state) { pFsm-\u0026gt;curState = state; } å‚è€ƒèµ„æ–™ Linux ç¼–ç¨‹ä¹‹æœ‰é™çŠ¶æ€æœº FSM çš„ç†è§£ä¸å®ç° - Madcola - åšå®¢å›­ JavaScript ä¸æœ‰é™çŠ¶æ€æœº - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— æœ‰é™çŠ¶æ€æœº - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦\n","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA/","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eå¸¸è¯´çš„çŠ¶æ€æœºæ˜¯æœ‰é™çŠ¶æ€æœº FSMï¼Œæ˜¯è¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦è®¡ç®—æ¨¡å‹ã€‚\nä¸‰ä¸ªç‰¹å¾ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eçŠ¶æ€æ€»æ•°ï¼ˆstateï¼‰æ˜¯æœ‰é™çš„ã€‚\u003c/li\u003e\n\u003cli\u003eä»»ä¸€æ—¶åˆ»ï¼Œåªå¤„åœ¨ä¸€ç§çŠ¶æ€ä¹‹ä¸­ã€‚\u003c/li\u003e\n\u003cli\u003eæŸç§æ¡ä»¶ä¸‹ï¼Œä¼šä»ä¸€ç§çŠ¶æ€è½¬å˜ï¼ˆtransitionï¼‰åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè®¾è®¡çŠ¶æ€æœºçš„å…³é”®ç‚¹ï¼šå½“å‰çŠ¶æ€ã€å¤–éƒ¨è¾“å…¥ã€ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚\u003c/p\u003e","title":"C è¯­è¨€å®ç°ç®€å•æœ‰é™çŠ¶æ€æœº"},{"content":"é‡å®šä½ ä½ç½®æ— å…³ç¼–ç  (PICï¼Œposition independent code)ï¼šæ±‡ç¼–æºæ–‡ä»¶è¢«ç¼–ç æˆäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæ—¶ç¼–ç æ–¹å¼ä¸ä½ç½®ï¼ˆå†…å­˜åœ°å€ï¼‰æ— å…³ã€‚\nä½ç½®æœ‰å…³ç¼–ç ï¼šæ±‡ç¼–æºç ç¼–ç æˆäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºåå’Œå†…å­˜åœ°å€æ˜¯æœ‰å…³çš„ã€‚\næˆ‘ä»¬åœ¨è®¾è®¡ä¸€ä¸ªç¨‹åºæ—¶ï¼Œä¼šç»™è¿™ä¸ªç¨‹åºæŒ‡å®šä¸€ä¸ªè¿è¡Œåœ°å€ï¼ˆé“¾æ¥åœ°å€ï¼‰ã€‚å°±æ˜¯è¯´æˆ‘ä»¬åœ¨ç¼–è¯‘ç¨‹åºæ—¶å…¶å®å¿ƒé‡Œæ˜¯çŸ¥é“æˆ‘ä»¬ç¨‹åºå°†æ¥è¢«è¿è¡Œæ—¶çš„åœ°å€ï¼ˆè¿è¡Œåœ°å€ï¼‰çš„ï¼Œè€Œä¸”å¿…é¡»ç»™ç¼–è¯‘å™¨é“¾æ¥å™¨æŒ‡å®šè¿™ä¸ªåœ°å€ï¼ˆé“¾æ¥åœ°å€ï¼‰æ‰è¡Œã€‚\næœ€åå¾—åˆ°çš„äºŒè¿›åˆ¶ç¨‹åºç†è®ºä¸Šæ˜¯å’Œä½ æŒ‡å®šçš„è¿è¡Œåœ°å€æœ‰å…³çš„ï¼Œå°†æ¥è¿™ä¸ªç¨‹åºè¢«æ‰§è¡Œæ—¶å¿…é¡»æ”¾åœ¨å½“æ—¶ç¼–è¯‘é“¾æ¥æ—¶ç»™å®šçš„é‚£ä¸ªåœ°å€ï¼ˆé“¾æ¥åœ°å€ï¼‰ä¸‹æ‰è¡Œï¼Œå¦åˆ™ä¸èƒ½è¿è¡Œï¼ˆå°±å«ä½ç½®æœ‰å…³ä»£ç ï¼‰ã€‚ä½†æ˜¯æœ‰ä¸ªåˆ«ç‰¹åˆ«çš„æŒ‡ä»¤ä»–å¯ä»¥è·ŸæŒ‡å®šçš„åœ°å€ï¼ˆé“¾æ¥åœ°å€ï¼‰æ²¡æœ‰å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›ä»£ç å®é™…è¿è¡Œæ—¶ä¸ç®¡æ”¾åœ¨å“ªé‡Œéƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚\nè¿è¡Œåœ°å€ï¼šç”±è¿è¡Œæ—¶å†³å®šçš„ï¼ˆç¼–è¯‘é“¾æ¥æ—¶æ˜¯æ— æ³•ç»å¯¹ç¡®å®šè¿è¡Œæ—¶åœ°å€çš„ï¼‰ã€‚\né“¾æ¥åœ°å€ï¼šç”±ç¨‹åºå‘˜åœ¨ç¼–è¯‘é“¾æ¥çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Makefileä¸­-Ttext xxxæˆ–è€…åœ¨é“¾æ¥è„šæœ¬ä¸­æŒ‡å®šçš„ã€‚ç¨‹åºå‘˜äº‹å…ˆä¼šé¢„çŸ¥è‡ªå·±çš„ç¨‹åºçš„æ‰§è¡Œè¦æ±‚ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæœŸæœ›çš„æ‰§è¡Œåœ°å€ï¼Œå¹¶ä¸”ä¼šç”¨è¿™ä¸ªåœ°å€æ¥åšé“¾æ¥åœ°å€ã€‚\nä¸¾ä¾‹ï¼šLinux ä¸­çš„åº”ç”¨ç¨‹åºã€‚gcc hello.c -o helloï¼Œè¿™æ—¶ä½¿ç”¨é»˜è®¤çš„é“¾æ¥åœ°å€å°±æ˜¯0x0ï¼Œæ‰€ä»¥åº”ç”¨ç¨‹åºéƒ½æ˜¯é“¾æ¥åœ¨0x0åœ°å€çš„ã€‚å› ä¸ºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œåœ¨è¿™ä¸ªè¿›ç¨‹ä¸­è¿™ä¸ªåº”ç”¨ç¨‹åºç‹¬äº« 4G çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚æ‰€ä»¥åº”ç”¨ç¨‹åºéƒ½å¯ä»¥é“¾æ¥åˆ° 0 åœ°å€ï¼Œå› ä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½æ˜¯ä» 0 åœ°å€å¼€å§‹çš„ã€‚ï¼ˆç¼–è¯‘æ—¶å¯ä»¥ä¸ç»™å®šé“¾æ¥åœ°å€è€Œéƒ½ä½¿ç”¨0x0ï¼‰\nç¼–è¯‘é“¾æ¥è¿‡ç¨‹ æ¯ä¸ªè¿‡ç¨‹çš„ä½œç”¨ é¢„ç¼–è¯‘ï¼šé¢„ç¼–è¯‘å™¨æ‰§è¡Œã€‚æ›¿æ¢å®å®šä¹‰ï¼Œåˆ é™¤æ³¨é‡Šç­‰å·¥ä½œã€‚ ç¼–è¯‘ï¼šç¼–è¯‘å™¨æ¥æ‰§è¡Œã€‚æŠŠæºç .c .Sç¼–ç¨‹æœºå™¨ç .oæ–‡ä»¶ã€‚ é“¾æ¥ï¼šé“¾æ¥å™¨æ¥æ‰§è¡Œã€‚æŠŠ.oæ–‡ä»¶ä¸­çš„å„å‡½æ•°ï¼ˆæ®µï¼‰æŒ‰ç…§ä¸€å®šè§„åˆ™ï¼ˆé“¾æ¥è„šæœ¬æ¥æŒ‡å®šï¼‰ç´¯ç§¯åœ¨ä¸€èµ·ï¼Œå½¢æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ stripï¼šstrip æ˜¯æŠŠå¯æ‰§è¡Œç¨‹åºä¸­çš„ç¬¦å·ä¿¡æ¯ç»™æ‹¿æ‰ï¼Œä»¥èŠ‚çœç©ºé—´ã€‚ï¼ˆDebug ç‰ˆæœ¬å’Œ Release ç‰ˆæœ¬ï¼‰ objcopyï¼šç”±å¯æ‰§è¡Œç¨‹åºç”Ÿæˆå¯çƒ§å½•çš„é•œåƒbinæ–‡ä»¶ã€‚ ç¼–è¯‘åç”Ÿæˆçš„æ®µ æ®µå°±æ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æŠŠæ•´ä¸ªç¨‹åºçš„æ‰€æœ‰ä¸œè¥¿åˆ†æˆäº†ä¸€ä¸ªä¸€ä¸ªçš„æ®µï¼Œç»™æ¯ä¸ªæ®µèµ·ä¸ªåå­—ï¼Œç„¶ååœ¨é“¾æ¥æ—¶å°±å¯ä»¥ç”¨è¿™ä¸ªåå­—æ¥æŒ‡ç¤ºè¿™äº›æ®µã€‚ä¹Ÿå°±æ˜¯è¯´ç»™æ®µå‘½åå°±æ˜¯ä¸ºäº†åœ¨é“¾æ¥è„šæœ¬ä¸­ç”¨æ®µåæ¥è®©æ®µæ”¾åœ¨åˆé€‚çš„ä½ç½®ã€‚\næ®µååˆ†ä¸º 2 ç§ï¼šä¸€ç§æ˜¯ç¼–è¯‘å™¨é“¾æ¥å™¨å†…éƒ¨å®šå¥½çš„ï¼Œä¸€ç§æ˜¯ç¨‹åºå‘˜è‡ªå·±æŒ‡å®šçš„ã€è‡ªå®šä¹‰çš„æ®µåã€‚ å·²æœ‰æ®µåï¼š\nä»£ç æ®µï¼šï¼ˆ.textï¼‰ï¼Œåˆå«æ–‡æœ¬æ®µï¼Œä»£ç æ®µå…¶å®å°±æ˜¯å‡½æ•°ç¼–è¯‘åç”Ÿæˆçš„ä¸œè¥¿ æ•°æ®æ®µï¼šï¼ˆ.dataï¼‰ï¼Œæ•°æ®æ®µå°±æ˜¯ C è¯­è¨€ä¸­æœ‰æ˜¾å¼åˆå§‹åŒ–ä¸ºé 0 çš„å…¨å±€å˜é‡ bss æ®µï¼šï¼ˆ.bssï¼‰ï¼Œåˆå« ZIï¼ˆzero initialï¼‰æ®µï¼Œå°±æ˜¯é›¶åˆå§‹åŒ–æ®µï¼Œå¯¹åº” C è¯­è¨€ä¸­åˆå§‹åŒ–ä¸º 0 çš„å…¨å±€å˜é‡ã€‚ è‡ªå®šä¹‰æ®µåï¼šæ®µåç”±ç¨‹åºå‘˜è‡ªå·±å®šä¹‰ï¼Œæ®µçš„å±æ€§å’Œç‰¹å¾ä¹Ÿç”±ç¨‹åºå‘˜è‡ªå·±å®šä¹‰ã€‚ C è¯­è¨€ä¸­å…¨å±€å˜é‡å¦‚æœæœªæ˜¾å¼åˆå§‹åŒ–ï¼Œå€¼æ˜¯ 0ã€‚æœ¬è´¨å°±æ˜¯ C è¯­è¨€æŠŠè¿™ç±»å…¨å±€å˜é‡æ”¾åœ¨äº† bss æ®µï¼Œä»è€Œä¿è¯äº†ä¸º 0ã€‚ C è¿è¡Œæ—¶ç¯å¢ƒå¦‚ä½•ä¿è¯æ˜¾å¼åˆå§‹åŒ–ä¸ºé 0 çš„å…¨å±€å˜é‡çš„å€¼åœ¨ main ä¹‹å‰å°±è¢«èµ‹å€¼äº†ï¼Ÿå°±æ˜¯å› ä¸ºå®ƒæŠŠè¿™ç±»å˜é‡æ”¾åœ¨äº†.data æ®µä¸­ï¼Œè€Œ.data æ®µä¼šåœ¨ main æ‰§è¡Œä¹‹å‰è¢«å¤„ç†ï¼ˆåˆå§‹åŒ–ï¼‰ã€‚\né“¾æ¥è„šæœ¬ é“¾æ¥è„šæœ¬åšä»€ä¹ˆäº‹ï¼Ÿ é“¾æ¥è„šæœ¬å…¶å®æ˜¯ä¸ªè§„åˆ™æ–‡ä»¶ï¼Œä»–æ˜¯ç¨‹åºå‘˜ç”¨æ¥æŒ‡æŒ¥é“¾æ¥å™¨å·¥ä½œçš„ã€‚é“¾æ¥å™¨ä¼šå‚è€ƒé“¾æ¥è„šæœ¬ï¼Œå¹¶ä¸”ä½¿ç”¨å…¶ä¸­è§„å®šçš„è§„åˆ™æ¥å¤„ç†.oæ–‡ä»¶ä¸­é‚£äº›æ®µï¼Œå°†å…¶é“¾æ¥æˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºã€‚\né“¾æ¥è„šæœ¬çš„å…³é”®å†…å®¹æœ‰ 2 éƒ¨åˆ†ï¼šæ®µå + åœ°å€ï¼ˆä½œä¸ºé“¾æ¥åœ°å€çš„å†…å­˜åœ°å€ï¼‰ã€‚æŠŠæ®µï¼Œæ”¾åˆ°ä¸€ä¸ªåœ°å€çš„æ„æ€ã€‚\né“¾æ¥è„šæœ¬å°±åƒæ˜¯ä¸€ä¸ªä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œçš„ä¸€ä¸ªä»£ç \n. è¡¨ç¤ºå½“å‰ä½ç½® = è¡¨ç¤ºèµ‹å€¼ * è¡¨ç¤ºé€šé…ç¬¦ é“¾æ¥è„šæœ¬é‡Œçš„ç¬¦å·ï¼Œå¯ä»¥åœ¨æ±‡ç¼–æºç é‡Œå¼•ç”¨ã€‚\nä¸€ä¸ªç®€æ˜“ç¤ºä¾‹ï¼š\nSECTIONS { . = 0xd0024000; # å½“å‰åœ°å€ä¸º0xd0024000 .text : { start.o * (.text) # æ‰€æœ‰çš„textæ®µ } .data : { * (.data) } bss_start = .; # bss_startçš„å€¼ä¸ºå½“å‰åœ°å€ï¼Œæ˜¯æ‰§è¡Œåˆ°è¿™é‡Œçš„åœ°å€ï¼Œä¸æ˜¯æœ€ä¸Šé¢. = 0xd0024000çš„åœ°å€ .bss : { * (.bss) } bss_end = .; } æ€ä¹ˆåšï¼Ÿ ä»»åŠ¡ï¼šåœ¨ SRAM ä¸­å°†ä»£ç ä» 0xd0020010 é‡å®šä½åˆ° 0xd0024000ã€‚\nç¬¬ä¸€ç‚¹ï¼šé€šè¿‡é“¾æ¥è„šæœ¬å°†ä»£ç é“¾æ¥åˆ° 0xd0024000 é‡å®šä½ä»£ç çš„ä½œç”¨å°±æ˜¯ï¼šåœ¨PICæ‰§è¡Œå®Œä¹‹å‰ï¼ˆåœ¨ä»£ç ä¸­ç¬¬ä¸€å¥ä½ç½®æœ‰å…³ç æ‰§è¡Œä¹‹å‰ï¼‰å¿…é¡»å°†æ•´ä¸ªä»£ç æ¬ç§»åˆ°0xd0024000ä½ç½®å»æ‰§è¡Œï¼Œè¿™å°±æ˜¯é‡å®šä½ã€‚\nç¬¬äºŒç‚¹ï¼šdnw ä¸‹è½½æ—¶å°† bin æ–‡ä»¶ä¸‹è½½åˆ° 0xd0020010 è¿™æ ·å°±èƒ½å®Œæˆï¼Œä¸‹è½½ä»£ç ä¸è¿è¡Œä»£ç ä½ç½®ä¸åŒã€‚\nç¬¬ä¸‰ç‚¹ï¼šä»£ç æ‰§è¡Œæ—¶é€šè¿‡ä»£ç å‰æ®µçš„å°‘é‡ä½ç½®æ— å…³ç å°†æ•´ä¸ªä»£ç æ¬ç§»åˆ° 0xd0024000ã€‚\nç¬¬å››ç‚¹ï¼šä½¿ç”¨ä¸€ä¸ªé•¿è·³è½¬è·³è½¬åˆ° 0xd0024000 å¤„çš„ä»£ç ç»§ç»­æ‰§è¡Œï¼Œé‡å®šä½å®Œæˆã€‚\né•¿è·³è½¬ï¼šä¸€ç§è·³è½¬æŒ‡ä»¤ï¼Œç±»ä¼¼äºåˆ†æ”¯æŒ‡ä»¤ Bï¼ŒBL ç­‰ä½œç”¨çš„æŒ‡ä»¤ï¼Œè·³è½¬æŒ‡ä»¤é€šè¿‡ç»™ PCï¼ˆr15ï¼‰èµ‹ä¸€ä¸ªæ–°å€¼æ¥å®Œæˆä»£ç è·³è½¬ã€‚å½“æˆ‘ä»¬æ‰§è¡Œå®Œé‡å®šä½åï¼Œå®é™…ä¸Š SRAM ä¸­æœ‰ä¸¤ä»½ä»£ç çš„é•œåƒï¼ˆä¸€ä»½æ˜¯æˆ‘ä»¬ä¸‹è½½åˆ° 0xd0020010 å¤„çš„ï¼Œä¸€ä»½æ˜¯é‡å®šä½åˆ° 0xd0024000 å¤„çš„ï¼‰ï¼Œè¿™ä¸¤ä»½ä»£ç å†…å®¹å®Œå…¨ç›¸åŒã€‚\nçŸ­è·³è½¬ï¼šçŸ­è·³è½¬æŒ‡ä»¤å¯ä»¥å®ç°å‘å‰æˆ–å‘å 32MB çš„åœ°å€ç©ºé—´è·³è½¬ã€‚\nå½“é“¾æ¥åœ°å€å’Œè¿è¡Œåœ°å€ç›¸åŒæ˜¯ï¼ŒçŸ­è·³è½¬å’Œé•¿è·³è½¬å®é™…æ•ˆæœä¸€æ ·ã€‚ä½†æ˜¯å½“é“¾æ¥åœ°å€å’Œè¿è¡Œåœ°å€ä¸åŒæ—¶ï¼ŒçŸ­è·³è½¬å’Œé•¿è·³è½¬å°±æœ‰å·®å¼‚äº†ï¼Œè¿™æ—¶å€™æ®µè·³è½¬æ‰§è¡Œçš„æ˜¯è¿è¡Œåœ°å€å¤„çš„é‚£ä¸€ä»½ï¼Œè€Œé•¿è·³è½¬æ‰§è¡Œçš„æ˜¯é“¾æ¥åœ°å€çš„é‚£ä¸€ä»½ã€‚\né‡å®šä½å®é™…å°±æ˜¯åœ¨è¿è¡Œåœ°å€å¤„æ‰§è¡Œä¸€æ®µä½ç½®æ— å…³ç  PICï¼Œè®©è¿™æ®µ PICï¼ˆä¹Ÿå°±æ˜¯é‡å®šä½ä»£ç ï¼‰ä»è¿è¡Œåœ°å€å¤„æŠŠæ•´ä¸ªç¨‹åºé•œåƒæ‹·è´ä¸€ä»½åˆ°é“¾æ¥åœ°å€å¤„ï¼Œå®Œäº†ä¹‹åä½¿ç”¨ä¸€å¥é•¿è·³è½¬æŒ‡ä»¤ä»è¿è¡Œåœ°å€å¤„ç›´æ¥è·³è½¬åˆ°é“¾æ¥åœ°å€å¤„å»æ‰§è¡ŒåŒä¸€ä¸ªå‡½æ•°ï¼ˆled_blinkï¼‰ï¼Œè¿™æ ·å°±å®ç°äº†é‡å®šä½ä¹‹åçš„æ— ç¼è¿æ¥ã€‚\næ±‡ç¼–ä»£ç ï¼š\n/* * æ–‡ä»¶åï¼š led.s * ä½œè€…ï¼š æœ±è€å¸ˆï¼ˆæœ±å‹é¹ï¼‰ * æè¿°ï¼š æ¼”ç¤ºé‡å®šä½ï¼ˆåœ¨SRAMå†…éƒ¨é‡å®šä½ï¼‰ */ #define WTCON 0xE2700000 #define SVC_STACK 0xd0037d80 .global _start // æŠŠ_starté“¾æ¥å±æ€§æ”¹ä¸ºå¤–éƒ¨ï¼Œè¿™æ ·å…¶ä»–æ–‡ä»¶å°±å¯ä»¥çœ‹è§_startäº† _start: // ç¬¬1æ­¥ï¼šå…³çœ‹é—¨ç‹—ï¼ˆå‘WTCONçš„bit5å†™å…¥0å³å¯ï¼‰ ldr r0, =WTCON ldr r1, =0x0 str r1, [r0] // ç¬¬2æ­¥ï¼šè®¾ç½®SVCæ ˆ ldr sp, =SVC_STACK // ç¬¬3æ­¥ï¼šå¼€/å…³icache mrc p15,0,r0,c1,c0,0; // è¯»å‡ºcp15çš„c1åˆ°r0ä¸­ //bic r0, r0, #(1\u0026lt;\u0026lt;12) // bit12 ç½®0 å…³icache orr r0, r0, #(1\u0026lt;\u0026lt;12) // bit12 ç½®1 å¼€icache mcr p15,0,r0,c1,c0,0; // ç¬¬4æ­¥ï¼šé‡å®šä½ adr r0, _start // adråŠ è½½æ—¶å°±å«çŸ­åŠ è½½ï¼Œæ­¤å¤„adræŒ‡ä»¤ç”¨äºåŠ è½½_startå½“å‰è¿è¡Œåœ°å€ï¼Œè¯¦è§£è§æ­£æ–‡ ldr r1, =_start // ldråŠ è½½æ—¶å¦‚æœç›®æ ‡å¯„å­˜å™¨æ˜¯pcå°±å«é•¿è·³è½¬ï¼Œå¦‚æœç›®æ ‡å¯„å­˜å™¨æ˜¯r1ç­‰å°±å«é•¿åŠ è½½ // æ­¤å¤„ldræŒ‡ä»¤ç”¨äºåŠ è½½_startçš„é“¾æ¥åœ°å€:0xd0024000 // bssæ®µçš„èµ·å§‹åœ°å€ ldr r2, =bss_start // å°±æ˜¯æˆ‘ä»¬é‡å®šä½ä»£ç çš„ç»“æŸåœ°å€ï¼Œé‡å®šä½åªéœ€é‡å®šä½ä»£ç æ®µå’Œæ•°æ®æ®µå³å¯ // è¯¥ç¬¦å·åœ¨é“¾æ¥è„šæœ¬é‡Œå®šä¹‰ cmp r0, r1 // æ¯”è¾ƒ_startçš„è¿è¡Œæ—¶åœ°å€å’Œé“¾æ¥åœ°å€æ˜¯å¦ç›¸ç­‰ beq clean_bss // å¦‚æœç›¸ç­‰è¯´æ˜ä¸éœ€è¦é‡å®šä½ï¼Œæ‰€ä»¥è·³è¿‡copy_loopï¼Œç›´æ¥åˆ°clean_bss // å¦‚æœä¸ç›¸ç­‰è¯´æ˜éœ€è¦é‡å®šä½ï¼Œé‚£ä¹ˆä¼šé¡ºåºæ‰§è¡Œä¸‹é¢çš„copy_loopè¿›è¡Œé‡å®šä½ // é‡å®šä½å®Œæˆåç»§ç»­æ‰§è¡Œclean_bssã€‚ // ç”¨æ±‡ç¼–æ¥å®ç°çš„ä¸€ä¸ªwhileå¾ªç¯ copy_loop: ldr r3, [r0], #4 // æº r0å†…å®¹å†™å…¥r3ï¼Œç„¶år0è‡ªå¢4 str r3, [r1], #4 // ç›®çš„ r3å†…å®¹å†™å…¥r1ï¼Œç„¶år1è‡ªå¢4 // è¿™ä¸¤å¥ä»£ç å°±å®Œæˆäº†4ä¸ªå­—èŠ‚å†…å®¹çš„æ‹·è´ cmp r1, r2 // r1å’Œr2éƒ½æ˜¯ç”¨ldråŠ è½½çš„ï¼Œéƒ½æ˜¯é“¾æ¥åœ°å€ï¼Œæ‰€ä»¥r1ä¸æ–­+4æ€»èƒ½ç­‰äºr2 bne copy_loop // æ¸…bssæ®µï¼Œå…¶å®å°±æ˜¯åœ¨é“¾æ¥åœ°å€å¤„æŠŠbssæ®µå…¨éƒ¨æ¸…é›¶ clean_bss: ldr r0, =bss_start ldr r1, =bss_end cmp r0, r1 // å¦‚æœr0ç­‰äºr1ï¼Œè¯´æ˜bssæ®µä¸ºç©ºï¼Œç›´æ¥ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç  beq run_on_dram // æ¸…é™¤bsså®Œä¹‹åçš„åœ°å€ mov r2, #0 clear_loop: str r2, [r0], #4 // å…ˆå°†r2ä¸­çš„å€¼æ”¾å…¥r0æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€ï¼ˆr0ä¸­çš„å€¼ä½œä¸ºå†…å­˜åœ°å€ï¼‰ï¼Œ cmp r0, r1 // ç„¶år0 = r0 + 4 bne clear_loop // æ¸…ç†å®Œbssæ®µåé‡å®šä½å°±ç»“æŸäº†ã€‚ç„¶åå½“å‰çš„çŠ¶å†µæ˜¯ï¼š // 1ã€å½“å‰è¿è¡Œåœ°å€è¿˜åœ¨0xd0020010å¼€å¤´çš„ï¼ˆé‡å®šä½å‰çš„ï¼‰é‚£ä¸€ä»½ä»£ç ä¸­è¿è¡Œç€ã€‚ // 2ã€æ­¤æ—¶SRAMä¸­å·²ç»æœ‰äº†2ä»½ä»£ç ï¼Œ1ä»½åœ¨d0020010å¼€å¤´ï¼Œå¦ä¸€ä»½åœ¨d0024000å¼€å¤´çš„ä½ç½®ã€‚ // ç„¶åå°±è¦é•¿è·³è½¬äº†ã€‚ run_on_dram: // é•¿è·³è½¬åˆ°led_blinkå¼€å§‹ç¬¬äºŒé˜¶æ®µ ldr pc, =led_blink // ldræŒ‡ä»¤å®ç°é•¿è·³è½¬ï¼ŒæŠŠled_blinkçš„å€¼ï¼Œå†™å…¥pcå¯„å­˜å™¨ // ä»è¿™é‡Œä¹‹åå°±å¯ä»¥å¼€å§‹è°ƒç”¨Cç¨‹åºäº† //bl led_blink // blæŒ‡ä»¤å®ç°çŸ­è·³è½¬ // æ±‡ç¼–æœ€åçš„è¿™ä¸ªæ­»å¾ªç¯ä¸èƒ½ä¸¢ b . adrä¸ ldr ä¼ªæŒ‡ä»¤çš„åŒºåˆ«ï¼šldrå’Œadréƒ½æ˜¯ä¼ªæŒ‡ä»¤\nadrçŸ­åŠ è½½ï¼ŒæŒ‡ä»¤åŠ è½½ç¬¦å·åœ°å€ï¼ŒåŠ è½½çš„æ˜¯è¿è¡Œæ—¶åœ°å€ï¼› ldré•¿åŠ è½½ï¼ŒæŒ‡ä»¤åœ¨åŠ è½½ç¬¦å·åœ°å€æ—¶ï¼ŒåŠ è½½çš„æ˜¯é“¾æ¥åœ°å€ï¼› é‡å®šä½å°±æ˜¯æ±‡ç¼–ä»£ç ä¸­çš„copy_loopå‡½æ•°ï¼Œä»£ç çš„ä½œç”¨æ˜¯ä½¿ç”¨å¾ªç¯ç»“æ„æ¥é€å¥å¤åˆ¶ä»£ç åˆ°é“¾æ¥åœ°å€ã€‚ å¤åˆ¶çš„æºåœ°å€æ˜¯ SRAM çš„0xd0020010ï¼Œå¤åˆ¶ç›®æ ‡åœ°å€æ˜¯ SRAM çš„0xd0024000ï¼Œå¤åˆ¶é•¿åº¦æ˜¯bss_startå‡å»_startï¼Œæ‰€ä»¥å¤åˆ¶çš„é•¿åº¦å°±æ˜¯æ•´ä¸ªé‡å®šä½éœ€è¦é‡å®šä½çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªç¨‹åºä¸­ä»£ç æ®µ + æ•°æ®æ®µçš„é•¿åº¦ã€‚bssæ®µï¼ˆbss æ®µä¸­å°±æ˜¯ 0 åˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼‰ä¸éœ€è¦é‡å®šä½ã€‚\næ¸…é™¤bssæ®µæ˜¯ä¸ºäº†æ»¡è¶³ C è¯­è¨€çš„è¿è¡Œæ—¶è¦æ±‚ï¼ˆC è¯­è¨€è¦æ±‚æ˜¾å¼åˆå§‹åŒ–ä¸º 0 çš„å…¨å±€å˜é‡ï¼Œæˆ–è€…æœªæ˜¾å¼åˆå§‹åŒ–çš„å…¨å±€å˜é‡çš„å€¼ä¸º 0ï¼Œå®é™…ä¸Š C è¯­è¨€ç¼–è¯‘å™¨å°±æ˜¯é€šè¿‡æ¸…bssæ®µæ¥å®ç° C è¯­è¨€çš„è¿™ä¸ªç‰¹æ€§çš„ï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬çš„ç¨‹åºæ˜¯ä¸éœ€è¦è´Ÿè´£æ¸…é›¶bssæ®µçš„ï¼ˆC è¯­è¨€ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨ä¼šå¸®æˆ‘ä»¬çš„ç¨‹åºè‡ªåŠ¨æ·»åŠ ä¸€æ®µå¤´ç¨‹åºï¼Œè¿™æ®µç¨‹åºä¼šåœ¨æˆ‘ä»¬çš„ main å‡½æ•°ä¹‹å‰è¿è¡Œï¼Œè¿™æ®µä»£ç å°±è´Ÿè´£æ¸…é™¤bssï¼‰ã€‚ä½†æ˜¯åœ¨æˆ‘ä»¬ä»£ç é‡å®šä½äº†ä¹‹åï¼Œå› ä¸ºç¼–è¯‘å™¨å¸®æˆ‘ä»¬é™„åŠ çš„ä»£ç åªæ˜¯å¸®æˆ‘ä»¬æ¸…é™¤äº†è¿è¡Œåœ°å€é‚£ä¸€ä»½ä»£ç ä¸­çš„bssï¼Œè€Œæœªæ¸…é™¤é‡å®šä½åœ°å€å¤„å¼€å¤´çš„é‚£ä¸€ä»½ä»£ç çš„bssï¼Œæ‰€ä»¥é‡å®šä½ä¹‹åéœ€è¦è‡ªå·±å»æ¸…é™¤bssã€‚\n","permalink":"https://lifeislife.cn/posts/%E9%93%BE%E6%8E%A5%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8/","summary":"\u003ch2 id=\"é‡å®šä½\"\u003eé‡å®šä½\u003c/h2\u003e\n\u003cp\u003eä½ç½®æ— å…³ç¼–ç  (PICï¼Œposition independent code)ï¼šæ±‡ç¼–æºæ–‡ä»¶è¢«ç¼–ç æˆäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæ—¶ç¼–ç æ–¹å¼ä¸ä½ç½®ï¼ˆå†…å­˜åœ°å€ï¼‰æ— å…³ã€‚\u003c/p\u003e\n\u003cp\u003eä½ç½®æœ‰å…³ç¼–ç ï¼šæ±‡ç¼–æºç ç¼–ç æˆäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºåå’Œå†…å­˜åœ°å€æ˜¯æœ‰å…³çš„ã€‚\u003c/p\u003e","title":"é“¾æ¥è„šæœ¬å…¥é—¨"},{"content":"å­˜å‚¨å™¨ å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„ SRAMï¼ˆStatic Random-Access Memoryï¼Œé™æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼‰ CPU å¦‚æœå½¢å®¹æˆäººçš„å¤§è„‘çš„è¯ï¼Œé‚£ä¹ˆ CPU Cache (é«˜é€Ÿç¼“å­˜) å°±å¥½æ¯”äººçš„è®°å¿†ã€‚å®ƒç”¨çš„æ˜¯ SRAM èŠ¯ç‰‡ã€‚\nSRAM çš„â€œé™æ€â€çš„æ„æ€æ˜¯ï¼Œåªè¦å¤„äºé€šç”µçŠ¶æ€ï¼Œé‡Œé¢çš„æ•°æ®å°±ä¿æŒå­˜åœ¨ï¼Œä¸€æ—¦æ–­ç”µï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ã€‚SRAM é‡Œ 1bit æ•°æ®éœ€è¦ 6-8 ä¸ªæ™¶ä½“ç®¡ï¼Œæ‰€ä»¥ SRAM çš„å­˜å‚¨å¯†åº¦ä¸é«˜ï¼ŒåŒæ ·çš„ç‰©ç†ç©ºé—´ï¼Œèƒ½å¤Ÿå­˜çš„æ•°æ®æœ‰é™ã€‚å› ä¸ºå…¶ç”µè·¯ç®€å•ï¼Œè®¿é—®é€Ÿåº¦éå¸¸å¿«ã€‚\nåœ¨ CPU é‡Œï¼Œé€šå¸¸ä¼šæœ‰ L1ã€L2ã€L3 è¿™æ ·ä¸‰å±‚é«˜é€Ÿç¼“å­˜ã€‚æ¯ä¸ª CPU æ ¸å¿ƒéƒ½æœ‰ä¸€å—å±äºè‡ªå·±çš„ L1 é«˜é€Ÿç¼“å­˜ï¼Œé€šå¸¸åˆ†æˆæŒ‡ä»¤ç¼“å­˜å’Œæ•°æ®ç¼“å­˜ï¼Œåˆ†å¼€å­˜æ”¾ CPU ä½¿ç”¨çš„æŒ‡ä»¤å’Œæ•°æ®ã€‚\nL2 çš„ Cache åŒæ ·æ˜¯æ¯ä¸ª CPU æ ¸å¿ƒéƒ½æœ‰çš„ï¼Œä¸è¿‡å®ƒå¾€å¾€ä¸åœ¨ CPU æ ¸å¿ƒçš„å†…éƒ¨ã€‚æ‰€ä»¥ï¼ŒL2 Cache çš„è®¿é—®é€Ÿåº¦ä¼šæ¯” L1 ç¨å¾®æ…¢ä¸€äº›ã€‚è€Œ L3Cacheï¼Œåˆ™é€šå¸¸æ˜¯å¤šä¸ª CPU æ ¸å¿ƒå…±ç”¨çš„ï¼Œå°ºå¯¸ä¼šæ›´å¤§ä¸€äº›ï¼Œè®¿é—®é€Ÿåº¦è‡ªç„¶ä¹Ÿå°±æ›´æ…¢ä¸€äº›ã€‚\nä½ å¯ä»¥æŠŠ CPU ä¸­çš„ L1Cache ç†è§£ä¸ºæˆ‘ä»¬çš„çŸ­æœŸè®°å¿†ï¼ŒæŠŠ L2/L3Cache ç†è§£æˆé•¿æœŸè®°å¿†ï¼ŒæŠŠå†…å­˜å½“æˆæˆ‘ä»¬æ‹¥æœ‰çš„ä¹¦æ¶æˆ–è€…ä¹¦æ¡Œã€‚å½“æˆ‘ä»¬è‡ªå·±è®°å¿†ä¸­æ²¡æœ‰èµ„æ–™çš„æ—¶å€™ï¼Œå¯ä»¥ä»ä¹¦æ¡Œæˆ–è€…ä¹¦æ¶ä¸Šæ‹¿ä¹¦æ¥ç¿»é˜…ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­å°±ç›¸å½“äºï¼Œæ•°æ®ä»å†…å­˜ä¸­åŠ è½½åˆ° CPU çš„å¯„å­˜å™¨å’Œ Cache ä¸­ï¼Œç„¶åé€šè¿‡â€œå¤§è„‘â€ï¼Œä¹Ÿå°±æ˜¯ CPUï¼Œè¿›è¡Œå¤„ç†å’Œè¿ç®—ã€‚\nDRAMï¼ˆDynamic Random Access Memoryï¼ŒåŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼‰ å†…å­˜ç”¨çš„èŠ¯ç‰‡å’Œ Cache æœ‰æ‰€ä¸åŒï¼Œå®ƒç”¨çš„æ˜¯ä¸€ç§å«ä½œ DRAM çš„èŠ¯ç‰‡ï¼Œæ¯”èµ· SRAM æ¥è¯´ï¼Œå®ƒçš„å¯†åº¦æ›´é«˜ï¼Œæœ‰æ›´å¤§çš„å®¹é‡ï¼Œè€Œä¸”å®ƒä¹Ÿæ¯” SRAM èŠ¯ç‰‡ä¾¿å®œä¸å°‘ã€‚\nDRAM è¢«ç§°ä¸ºâ€œåŠ¨æ€â€å­˜å‚¨å™¨ï¼Œæ˜¯å› ä¸º DRAM éœ€è¦é ä¸æ–­åœ°â€œåˆ·æ–°â€ï¼Œæ‰èƒ½ä¿æŒæ•°æ®è¢«å­˜å‚¨èµ·æ¥ã€‚DRAM çš„ä¸€ä¸ªæ¯”ç‰¹ï¼Œåªéœ€è¦ä¸€ä¸ªæ™¶ä½“ç®¡å’Œä¸€ä¸ªç”µå®¹å°±èƒ½å­˜å‚¨ã€‚æ‰€ä»¥ï¼ŒDRAM åœ¨åŒæ ·çš„ç‰©ç†ç©ºé—´ä¸‹ï¼Œèƒ½å¤Ÿå­˜å‚¨çš„æ•°æ®ä¹Ÿå°±æ›´å¤šï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨çš„â€œå¯†åº¦â€æ›´å¤§ã€‚ä½†æ˜¯ï¼Œå› ä¸ºæ•°æ®æ˜¯å­˜å‚¨åœ¨ç”µå®¹é‡Œçš„ï¼Œç”µå®¹ä¼šä¸æ–­æ¼ç”µï¼Œæ‰€ä»¥éœ€è¦å®šæ—¶åˆ·æ–°å……ç”µï¼Œæ‰èƒ½ä¿æŒæ•°æ®ä¸ä¸¢å¤±ã€‚DRAM çš„æ•°æ®è®¿é—®ç”µè·¯å’Œåˆ·æ–°ç”µè·¯éƒ½æ¯” SRAM æ›´å¤æ‚ï¼Œæ‰€ä»¥è®¿é—®å»¶æ—¶ä¹Ÿå°±æ›´é•¿ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä» Cacheã€å†…å­˜ï¼Œåˆ° SSD å’Œ HDD ç¡¬ç›˜ï¼Œä¸€å°ç°ä»£è®¡ç®—æœºä¸­ï¼Œå°±ç”¨ä¸Šäº†æ‰€æœ‰è¿™äº›å­˜å‚¨å™¨è®¾å¤‡ã€‚å…¶ä¸­ï¼Œå®¹é‡è¶Šå°çš„è®¾å¤‡é€Ÿåº¦è¶Šå¿«ï¼Œè€Œä¸”ï¼ŒCPU å¹¶ä¸æ˜¯ç›´æ¥å’Œæ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡æ‰“äº¤é“ï¼Œè€Œæ˜¯æ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡ï¼Œåªå’Œå®ƒç›¸é‚»çš„å­˜å‚¨è®¾å¤‡æ‰“äº¤é“ã€‚æ¯”å¦‚ï¼ŒCPUCache æ˜¯ä»å†…å­˜é‡ŒåŠ è½½è€Œæ¥çš„ï¼Œæˆ–è€…éœ€è¦å†™å›å†…å­˜ï¼Œå¹¶ä¸ä¼šç›´æ¥å†™å›æ•°æ®åˆ°ç¡¬ç›˜ï¼Œä¹Ÿä¸ä¼šç›´æ¥ä»ç¡¬ç›˜åŠ è½½æ•°æ®åˆ° CPUCache ä¸­ï¼Œè€Œæ˜¯å…ˆåŠ è½½åˆ°å†…å­˜ï¼Œå†ä»å†…å­˜åŠ è½½åˆ° Cache ä¸­ã€‚\nè¿™æ ·ï¼Œå„ä¸ªå­˜å‚¨å™¨åªå’Œç›¸é‚»çš„ä¸€å±‚å­˜å‚¨å™¨æ‰“äº¤é“ï¼Œå¹¶ä¸”éšç€ä¸€å±‚å±‚å‘ä¸‹ï¼Œå­˜å‚¨å™¨çš„å®¹é‡é€å±‚å¢å¤§ï¼Œè®¿é—®é€Ÿåº¦é€å±‚å˜æ…¢ï¼Œè€Œå•ä½å­˜å‚¨æˆæœ¬ä¹Ÿé€å±‚ä¸‹é™ï¼Œä¹Ÿå°±æ„æˆäº†æˆ‘ä»¬æ—¥å¸¸æ‰€è¯´çš„å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ã€‚\nç¼“å­˜ CPU cache é«˜é€Ÿç¼“å­˜ ç¼“å­˜ä¸æ˜¯ CPU çš„ä¸“å±åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå®ƒå½“æˆä¸€ç§ç­–ç•¥ï¼Œä»»ä½•æ—¶å€™æƒ³è¦å¢åŠ æ•°æ®ä¼ è¾“æ€§èƒ½ï¼Œéƒ½å¯ä»¥é€šè¿‡åŠ ä¸€å±‚ç¼“å­˜è¯•è¯•ã€‚\nå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„çš„ä¸­å¿ƒæ€æƒ³æ˜¯ï¼Œå¯¹äºæ¯ä¸ª$k$ï¼Œä½äº$k$å±‚çš„æ›´å¿«æ›´å°çš„å­˜å‚¨è®¾å¤‡ä½œä¸ºä½äº$k+1$å±‚çš„æ›´å¤§æ›´æ…¢çš„å­˜å‚¨è®¾å¤‡çš„ç¼“å­˜ã€‚ä¸‹å›¾å±•ç¤ºäº†å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ä¸­ç¼“å­˜çš„ä¸€èˆ¬æ€§æ¦‚å¿µã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ•°æ®æ€»æ˜¯ä»¥å—blockä¸ºå•ä½ï¼Œåœ¨å±‚ä¸å±‚ä¹‹é—´æ¥å›å¤åˆ¶ã€‚\nè¯´å›é«˜é€Ÿç¼“å­˜ï¼ŒæŒ‰ç…§æ‘©å°”å®šå¾‹ï¼ŒCPU çš„è®¿é—®é€Ÿåº¦æ¯ 18 ä¸ªæœˆä¾¿ä¼šç¿»ä¸€ç¿»ï¼Œç›¸å½“äºæ¯å¹´å¢é•¿ 60%ã€‚å†…å­˜çš„è®¿é—®é€Ÿåº¦è™½ç„¶ä¸æ–­å¢é•¿ï¼Œå´è¿œæ²¡æœ‰é‚£ä¹ˆå¿«ï¼Œæ¯å¹´åªå¢é•¿ 7% å·¦å³ã€‚è¿™æ ·å°±å¯¼è‡´ CPU æ€§èƒ½å’Œå†…å­˜è®¿é—®çš„å·®è·ä¸æ–­æ‹‰å¤§ã€‚ä¸ºäº†å¼¥è¡¥ä¸¤è€…ä¹‹é—´å·®å¼‚ï¼Œç°ä»£ CPU å¼•å…¥äº†é«˜é€Ÿç¼“å­˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image CPU çš„è¯»ï¼ˆloadï¼‰å®è´¨ä¸Šå°±æ˜¯ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®åˆ°å¯„å­˜å™¨ï¼ˆregisterï¼‰é‡Œï¼Œåœ¨å¤šçº§ç¼“å­˜çš„æ¶æ„ä¸­ï¼Œå¦‚æœç¼“å­˜ä¸­æ‰¾ä¸åˆ°æ•°æ®ï¼ˆCache missï¼‰ï¼Œå°±ä¼šå±‚å±‚è¯»å–äºŒçº§ç¼“å­˜ä¸‰çº§ç¼“å­˜ï¼Œä¸€æ—¦æ‰€æœ‰çš„ç¼“å­˜é‡Œéƒ½æ‰¾ä¸åˆ°å¯¹åº”çš„æ•°æ®ï¼Œå°±è¦å»å†…å­˜é‡Œå¯»å€äº†ã€‚å¯»å€åˆ°çš„æ•°æ®é¦–å…ˆæ”¾åˆ°å¯„å­˜å™¨é‡Œï¼Œå…¶å‰¯æœ¬ä¼šé©»ç•™åˆ° CPU çš„ç¼“å­˜ä¸­ã€‚\nCPU çš„å†™ï¼ˆstoreï¼‰ä¹Ÿæ˜¯é’ˆå¯¹ç¼“å­˜ä½œå†™å…¥ã€‚å¹¶ä¸ä¼šç›´æ¥å’Œå†…å­˜æ‰“äº¤é“ï¼Œè€Œæ˜¯é€šè¿‡æŸç§æœºåˆ¶å®ç°æ•°æ®ä»ç¼“å­˜åˆ°å†…å­˜çš„å†™å›ï¼ˆwrite backï¼‰ã€‚\nç¼“å­˜åˆ°åº•å¦‚ä½•ä¸ CPU å’Œä¸»å­˜æ•°æ®äº¤æ¢çš„ï¼ŸCPU å¦‚ä½•ä»ç¼“å­˜ä¸­è¯»å†™æ•°æ®çš„ï¼Ÿç¼“å­˜ä¸­æ²¡æœ‰è¯»çš„æ•°æ®ï¼Œæˆ–è€…ç¼“å­˜å†™æ»¡äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å…ˆä» CPU å¦‚ä½•è¯»å–æ•°æ®è¯´èµ·ã€‚\nç¼“å­˜è¯»å– CPU å‘èµ·ä¸€ä¸ªè¯»å–è¯·æ±‚åï¼Œè¿”å›çš„ç»“æœä¼šæœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š\nç¼“å­˜å‘½ä¸­ (cache hit) è¦è¯»å–çš„æ•°æ®åˆšå¥½åœ¨ç¼“å­˜ä¸­ï¼Œå«åšç¼“å­˜å‘½ä¸­ã€‚ ç¼“å­˜ä¸å‘½ä¸­ (cache miss) å‘é€ç¼“å­˜ä¸å‘½ä¸­ï¼Œç¼“å­˜å°±å¾—æ‰§è¡Œä¸€ç›´æ”¾ç½®ç­–ç•¥(placement policy)ï¼Œæ¯”å¦‚ LRUã€‚æ¥å†³å®šä»ä¸»å­˜ä¸­å–å‡ºçš„æ•°æ®æ”¾åˆ°å“ªé‡Œã€‚ å¼ºåˆ¶æ€§ä¸å‘½ä¸­(compulsory miss)/å†·ä¸å‘½ä¸­(cold miss)ï¼šç¼“å­˜ä¸­æ²¡æœ‰è¦è¯»å–çš„æ•°æ®ï¼Œéœ€è¦ä»ä¸»å­˜è¯»å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®æ”¾å…¥ç¼“å­˜ã€‚ å†²çªä¸å‘½ä¸­(conflict miss)ï¼šç¼“å­˜ä¸­æœ‰è¦è¯»çš„æ•°æ®ï¼Œåœ¨é‡‡å–æ”¾ç½®ç­–ç•¥æ—¶ï¼Œä»ä¸»å­˜ä¸­å–æ•°æ®æ”¾åˆ°ç¼“å­˜æ—¶å‘ç”Ÿäº†å†²çªï¼Œè¿™å«åšå†²çªä¸å‘½ä¸­ã€‚ é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨ç»„ç»‡ç»“æ„ æ•´ä¸ª Cache è¢«åˆ’åˆ†ä¸º 1 ä¸ªæˆ–å¤šä¸ªç»„ (Set)ï¼Œ$S$ è¡¨ç¤ºç»„çš„ä¸ªæ•°ã€‚æ¯ä¸ªç»„åŒ…å« 1 ä¸ªæˆ–å¤šä¸ªç¼“å­˜è¡Œ(Cache line)ï¼Œ$E$ è¡¨ç¤ºä¸€ä¸ªç»„ä¸­ç¼“å­˜è¡Œçš„è¡Œæ•°ã€‚æ¯ä¸ªç¼“å­˜è¡Œç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šæœ‰æ•ˆä½(valid)ï¼Œæ ‡è®°ä½ï¼ˆtagï¼‰ï¼Œæ•°æ®å—ï¼ˆcache blockï¼‰ã€‚\næœ‰æ•ˆä½ï¼šè¯¥ä½ç­‰äº 1ï¼Œè¡¨ç¤ºè¿™ä¸ªè¡Œæ•°æ®æœ‰æ•ˆã€‚ æ ‡è®°ä½ï¼šå”¯ä¸€çš„æ ‡è¯†äº†å­˜å‚¨åœ¨é«˜é€Ÿç¼“å­˜ä¸­çš„å—ï¼Œæ ‡è¯†ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ã€‚ æ•°æ®å—ï¼šä¸€éƒ¨åˆ†å†…å­˜æ•°æ®çš„å‰¯æœ¬ã€‚ \u003c!DOCTYPE html\u003e Responsive Image Cache çš„ç»“æ„å¯ä»¥ç”±å…ƒç»„$(S,E,B,m)$è¡¨ç¤ºã€‚ä¸åŒ…æ‹¬æœ‰æ•ˆä½å’Œæ ‡è®°ä½ã€‚Cache çš„å¤§å°ä¸º $C=S \\times E \\times B$.\næ¥ä¸‹æ¥çœ‹çœ‹ Cache æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå½“ CPU æ‰§è¡Œæ•°æ®åŠ è½½æŒ‡ä»¤ï¼Œä»å†…å­˜åœ°å€ A è¯»å–æ•°æ®æ—¶ï¼Œæ ¹æ®å­˜å‚¨å™¨å±‚æ¬¡åŸç†ï¼Œå¦‚æœ Cache ä¸­ä¿å­˜ç€ç›®æ ‡æ•°æ®çš„å‰¯æœ¬ï¼Œé‚£ä¹ˆå°±ç«‹å³å°†æ•°æ®è¿”å›ç»™ CPUã€‚é‚£ä¹ˆ Cache å¦‚ä½•çŸ¥é“è‡ªå·±ä¿å­˜äº†ç›®æ ‡æ•°æ®çš„å‰¯æœ¬å‘¢ï¼Ÿ\nå‡è®¾ç›®æ ‡åœ°å€çš„æ•°æ®é•¿åº¦ä¸º$m$ä½ï¼Œè¿™ä¸ªåœ°å€è¢«å‚æ•° $S$ å’Œ $B$ åˆ†æˆäº†ä¸‰ä¸ªå­—æ®µï¼š\n\u003c!DOCTYPE html\u003e Responsive Image é¦–å…ˆé€šè¿‡é•¿åº¦ä¸º$s$çš„ç»„ç´¢å¼•ï¼Œç¡®å®šç›®æ ‡æ•°æ®ä¿å­˜åœ¨å“ªä¸€ä¸ªç»„ (Set) ä¸­ï¼Œå…¶æ¬¡é€šè¿‡é•¿åº¦ä¸º$t$çš„æ ‡è®°ï¼Œç¡®å®šåœ¨å“ªä¸€è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶æœ‰æ•ˆä½å¿…é¡»ç­‰äº 1ï¼Œæœ€åæ ¹æ®é•¿åº¦ä¸º$b$çš„å—åç§»ï¼Œæ¥ç¡®å®šç›®æ ‡æ•°æ®åœ¨æ•°æ®å—ä¸­çš„ç¡®åˆ‡ä½ç½®ã€‚\nQï¼šæ—¢ç„¶è¯»å– Cache ç¬¬ä¸€æ­¥æ˜¯ç»„é€‰æ‹©ï¼Œä¸ºä»€ä¹ˆä¸ç”¨é«˜ä½ä½œä¸ºç»„ç´¢å¼•ï¼Œè€Œä½¿ç”¨ä¸­é—´çš„ä¸ºä½œä¸ºç»„ç´¢å¼•ï¼Ÿ Aï¼šå¦‚æœä½¿ç”¨äº†é«˜ä½ä½œç´¢å¼•ï¼Œé‚£ä¹ˆä¸€äº›è¿ç»­çš„å†…å­˜å—å°±ä¼šæ˜ å°„åˆ°ç›¸åŒçš„é«˜é€Ÿç¼“å­˜å—ã€‚å¦‚å›¾å‰å››ä¸ªå—æ˜ å°„åˆ°ç¬¬ä¸€ä¸ªç¼“å­˜ç»„ï¼Œç¬¬äºŒä¸ªå››ä¸ªå—æ˜ å°„åˆ°ç¬¬äºŒä¸ªç»„ï¼Œä¾æ¬¡ç±»æ¨ã€‚å¦‚æœä¸€ä¸ªç¨‹åºæœ‰è‰¯å¥½çš„ç©ºé—´å±€éƒ¨æ€§ï¼Œé¡ºåºæ‰«æä¸€ä¸ªæ•°ç»„çš„å…ƒç´ ï¼Œé‚£ä¹ˆåœ¨ä»»ä½•æ—¶å€™ï¼Œç¼“å­˜ä¸­éƒ½åªä¿å­˜åœ¨ä¸€ä¸ªå—å¤§å°çš„æ•°ç»„å†…å®¹ã€‚è¿™æ ·å¯¹ç¼“å­˜çš„ä½¿ç”¨ç‡å¾ˆä½ã€‚ç›¸æ¯”è€Œè¨€ï¼Œå¦‚æœä½¿ç”¨ä¸­é—´çš„ä½ä½œä¸ºç»„ç´¢å¼•ï¼Œé‚£ä¹ˆç›¸é‚»çš„å—æ€»æ˜¯æ˜ å°„åˆ°ä¸åŒçš„ç»„ï¼Œå›¾ä¸­çš„æƒ…å†µèƒ½å¤Ÿå­˜æ”¾æ•´ä¸ªå¤§å°çš„æ•°ç»„ç‰‡ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ Direct Mapped Cache æ ¹æ®æ¯ä¸ªç»„çš„ç¼“å­˜è¡Œæ•° $E$ çš„ä¸åŒï¼ŒCache è¢«åˆ†ä¸ºä¸åŒçš„ç±»ã€‚æ¯ä¸ªç»„åªæœ‰ä¸€è¡Œ$E=1$çš„é«˜é€Ÿç¼“å­˜è¢«ç§°ä¸ºç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜(direct-mapped cache)ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å½“ä¸€æ¡åŠ è½½æŒ‡ä»¤æŒ‡ç¤º CPU ä»ä¸»å­˜åœ°å€ A ä¸­è¯»å–ä¸€ä¸ªå­— w æ—¶ï¼Œä¼šå°†è¯¥ä¸»å­˜åœ°å€ A å‘é€åˆ°é«˜é€Ÿç¼“å­˜ä¸­ï¼Œåˆ™é«˜é€Ÿç¼“å­˜ä¼šæ ¹æ®ç»„é€‰æ‹©ï¼Œè¡ŒåŒ¹é…å’Œå­—æŠ½å–ä¸‰æ­¥æ¥åˆ¤æ–­åœ°å€ A æ˜¯å¦å‘½ä¸­ã€‚\nç»„é€‰æ‹©(set selection)ï¼šæ ¹æ®ç»„ç´¢å¼•å€¼æ¥ç¡®å®šå±äºå“ªä¸€ä¸ªç»„ï¼Œå¦‚å›¾ä¸­ç´¢å¼•é•¿åº¦ä¸º 5 ä½ï¼Œå¯ä»¥æ£€ç´¢ 32 ä¸ªç»„ ($2^5=32$)ã€‚å½“$s=0$æ—¶ï¼Œæ­¤æ—¶ç»„é€‰æ‹©çš„ç»“æœä¸ºset 0ï¼Œå½“$s=1$æ—¶ï¼Œæ­¤æ—¶ç»„é€‰æ‹©çš„ç»“æœä¸ºset 1ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¡ŒåŒ¹é… (line match)ï¼šé¦–å…ˆçœ‹ç¼“å­˜è¡Œçš„æœ‰æ•ˆä½ï¼Œæ­¤æ—¶æœ‰æ•ˆä½ä¸º 1ï¼Œè¡¨ç¤ºå½“å‰æ•°æ®æœ‰æ•ˆã€‚ç„¶åå¯¹æ¯”ç¼“å­˜è¡Œçš„æ ‡è®°0110ä¸åœ°å€ä¸­çš„æ ‡è®°0110æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡æ•°æ®åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰ã€‚å¦‚æœä¸ä¸€è‡´æˆ–è€…æœ‰æ•ˆä½ä¸º 0ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡æ•°æ®ä¸åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ï¼ˆç¼“å­˜ä¸å‘½ä¸­ï¼‰ã€‚å¦‚æœå‘½ä¸­ï¼Œå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥å­—æŠ½å–ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å­—æŠ½å– (word extraction)ï¼šæ ¹æ®åç§»é‡$b$ç¡®å®šç›®æ ‡æ•°æ®çš„ç¡®åˆ‡ä½ç½®ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä»æ•°æ®å—çš„ä»€ä¹ˆä½ç½®å¼€å§‹æŠ½å–ä½ç½®ã€‚å¦‚å½“åç§»å—ç­‰äº100æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡æ•°æ®èµ·å§‹åœ°å€ä½äºå­—èŠ‚ 4 å¤„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šæ¸…é™¤è¿™ä¸ªè¿‡ç¨‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ï¼Œæè¿°ä¸º$(S,E,B,m) = (4,1,2,4)$ã€‚æ¢å¥è¯è¯´ï¼Œé«˜é€Ÿç¼“å­˜æœ‰ 4 ä¸ªç»„ï¼Œæ¯ä¸ªç»„ 1 è¡Œï¼Œæ¯ä¸ªæ•°æ®å— 2 ä¸ªå­—èŠ‚ï¼Œåœ°å€é•¿åº¦ä¸º 4 ä½ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œ8 ä¸ªå†…å­˜å—ï¼Œä½†åªæœ‰ 4 ä¸ªé«˜é€Ÿç¼“å­˜ç»„ï¼Œæ‰€ä»¥ä¼šæœ‰å¤šä¸ªå—æ˜ å°„åˆ°åŒä¸€ä¸ªé«˜é€Ÿç¼“å­˜ç»„ä¸­ã€‚ä¾‹å¦‚ï¼Œå— 0 å’Œå— 4 éƒ½ä¼šè¢«æ˜ å°„åˆ°ç»„ 0ã€‚\nä¸‹é¢æˆ‘ä»¬æ¥æ¨¡æ‹Ÿå½“ CPU æ‰§è¡Œä¸€ç³»åˆ—è¯»çš„æ—¶å€™ï¼Œé«˜é€Ÿç¼“å­˜çš„æ‰§è¡Œæƒ…å†µï¼Œæˆ‘ä»¬å‡è®¾æ¯æ¬¡ CPU è¯» 1 ä¸ªå­—èŠ‚çš„å­—ã€‚\nè¯»åœ°å€ 0(0000) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¯»åœ°å€ 1(0001) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¯»åœ°å€ 13(1101) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¯»åœ°å€ 8(1000) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image è¯»åœ°å€ 0(0000) çš„å­—ï¼š \u003c!DOCTYPE html\u003e Responsive Image ç»„ç›¸è”é«˜é€Ÿç¼“å­˜ Set Associative Cache ç”±äºç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜çš„ç»„ä¸­åªæœ‰ä¸€è¡Œï¼Œæ‰€ä»¥å®¹æ˜“å‘ç”Ÿå†²çªä¸å‘½ä¸­ã€‚ç»„ç›¸è”é«˜é€Ÿç¼“å­˜ (Set associative cache) è¿è¡Œæœ‰å¤šè¡Œç¼“å­˜è¡Œã€‚ä½†æ˜¯ç¼“å­˜è¡Œæœ€å¤§ä¸èƒ½è¶…è¿‡ $C/B$ã€‚\nå¦‚å›¾ä¸€ä¸ªç»„ä¸­åŒ…å«äº†ä¸¤è¡Œç¼“å­˜è¡Œï¼Œè¿™ç§æˆ‘ä»¬ç§°ä¸º 2 è·¯ç›¸è”é«˜é€Ÿç¼“å­˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç»„é€‰æ‹©ï¼šä¸ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜çš„ç»„é€‰æ‹©è¿‡ç¨‹ä¸€æ ·ã€‚\nè¡ŒåŒ¹é…ï¼šå› ä¸ºä¸€ä¸ªç»„æœ‰å¤šè¡Œï¼Œæ‰€ä»¥éœ€è¦éå†æ‰€æœ‰è¡Œï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆä½ä¸º 1ï¼Œå¹¶ä¸”æ ‡è®°ä¸ºä¸åœ°å€ä¸­çš„æ ‡è®°ä½ç›¸åŒ¹é…çš„ä¸€è¡Œã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œè¡¨ç¤ºç¼“å­˜å‘½ä¸­ã€‚\nå­—æŠ½å–ï¼šæ ¹æ®åç§»é‡$b$ç¡®å®šç›®æ ‡æ•°æ®çš„ç¡®åˆ‡ä½ç½®ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä»æ•°æ®å—çš„ä»€ä¹ˆä½ç½®å¼€å§‹æŠ½å–ä½ç½®ã€‚å¦‚å½“åç§»å—ç­‰äº100æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡æ•°æ®èµ·å§‹åœ°å€ä½äºå­—èŠ‚ 4 å¤„ã€‚\nå¦‚æœä¸å‘½ä¸­ï¼Œé‚£ä¹ˆå°±éœ€è¦ä»ä¸»å­˜ä¸­å–å‡ºéœ€è¦çš„æ•°æ®å—ï¼Œä½†æ˜¯å°†æ•°æ®å—æ”¾åœ¨å“ªä¸€è¡Œç¼“å­˜è¡Œå‘¢ï¼Ÿå¦‚æœå­˜åœ¨ç©ºè¡Œ ($valid=0$)ï¼Œé‚£å°±æ”¾åˆ°ç©ºè¡Œé‡Œã€‚å¦‚æœæ²¡æœ‰ç©ºè¡Œï¼Œå°±å¾—é€‰æ‹©ä¸€ä¸ªéç©ºè¡Œæ¥æ›¿æ¢ï¼ŒåŒæ—¶å¸Œæœ› CPU ä¸ä¼šå¾ˆå¿«å¼•ç”¨è¿™ä¸ªè¢«æ›¿æ¢çš„è¡Œã€‚è¿™é‡Œä»‹ç»å‡ ä¸ªæ›¿æ¢ç­–ç•¥ã€‚\næœ€ç®€å•çš„æ–¹å¼å°±æ˜¯éšæœºé€‰æ‹©ä¸€è¡Œæ¥æ›¿æ¢ï¼Œå…¶ä»–å¤æ‚çš„æ–¹å¼å°±æ˜¯åˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œä½¿å¾—æ¥ä¸‹æ¥ CPU å¼•ç”¨æ›¿æ¢çš„è¡Œæ¦‚ç‡æœ€å°ã€‚å¦‚\nç¼“å­˜ä¸€è‡´æ€§åè®® MESI ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ä¸€è‡´ ç›®å‰ä¸»æµç”µè„‘çš„ CPU éƒ½æ˜¯å¤šæ ¸å¿ƒçš„ï¼Œå¤šæ ¸å¿ƒçš„æœ‰ç‚¹å°±æ˜¯åœ¨ä¸èƒ½æå‡ CPU ä¸»é¢‘åï¼Œé€šè¿‡å¢åŠ æ ¸å¿ƒæ¥æå‡ CPU ååé‡ã€‚æ¯ä¸ªæ ¸å¿ƒéƒ½æœ‰è‡ªå·±çš„ L1 Cache å’Œ L2 Cacheï¼Œåªæ˜¯å…±ç”¨ L3 Cache å’Œä¸»å†…å­˜ã€‚æ¯ä¸ªæ ¸å¿ƒæ“ä½œæ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªæ ¸å¿ƒçš„ Cache å°±ä¸æ˜¯åŒæ­¥æ›´æ–°çš„ï¼Œè¿™æ ·å°±ä¼šå¸¦æ¥ç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰çš„é—®é¢˜ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå¦‚å›¾ï¼š \u003c!DOCTYPE html\u003e Responsive Image æœ‰ 2 ä¸ª CPUï¼Œä¸»å†…å­˜é‡Œæœ‰ä¸ªå˜é‡x=0ã€‚CPU A ä¸­æœ‰ä¸ªéœ€è¦å°†å˜é‡xåŠ 1ã€‚CPU A å°±å°†å˜é‡xåŠ è½½åˆ°è‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œç„¶åå°†å˜é‡xåŠ 1ã€‚å› ä¸ºæ­¤æ—¶ CPU A è¿˜æœªå°†ç¼“å­˜æ•°æ®å†™å›ä¸»å†…å­˜ï¼ŒCPU B å†è¯»å–å˜é‡xæ—¶ï¼Œå˜é‡xçš„å€¼ä¾ç„¶æ˜¯0ã€‚\nè¿™é‡Œçš„é—®é¢˜å°±æ˜¯æ‰€è°“çš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œå› ä¸º CPU A çš„ç¼“å­˜ä¸ CPU B çš„ç¼“å­˜æ˜¯ä¸ä¸€è‡´çš„ã€‚\nå¦‚ä½•è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ é€šè¿‡åœ¨æ€»çº¿åŠ  LOCK é”çš„æ–¹å¼ åœ¨é”ä½æ€»çº¿ä¸ŠåŠ ä¸€ä¸ª LOCK æ ‡è¯†ï¼ŒCPU A è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œé”ä½æ€»çº¿ï¼Œå…¶ä»– CPU æ­¤æ—¶æ— æ³•è¿›è¡Œå†…å­˜è¯»å†™æ“ä½œï¼Œåªæœ‰ç­‰è§£é”äº†æ‰èƒ½è¿›è¡Œæ“ä½œã€‚\nè¯¥æ–¹å¼å› ä¸ºé”ä½äº†æ•´ä¸ªæ€»çº¿ï¼Œæ‰€ä»¥æ•ˆç‡ä½ã€‚\nç¼“å­˜ä¸€è‡´æ€§åè®® MESI è¯¥æ–¹å¼å¯¹å•ä¸ªç¼“å­˜è¡Œçš„æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä¸ä¼šå½±å“åˆ°å†…å­˜å…¶ä»–æ•°æ®çš„è¯»å†™ã€‚\nåœ¨å­¦ä¹  MESI åè®®ä¹‹å‰ï¼Œç®€å•äº†è§£ä¸€ä¸‹æ€»çº¿å—…æ¢æœºåˆ¶ï¼ˆBus Snoopingï¼‰ã€‚è¦å¯¹è‡ªå·±çš„ç¼“å­˜åŠ é”ï¼Œéœ€è¦é€šçŸ¥å…¶ä»– CPUï¼Œå¤šä¸ª CPU æ ¸å¿ƒä¹‹é—´çš„æ•°æ®ä¼ æ’­é—®é¢˜ã€‚æœ€å¸¸è§çš„ä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯æ€»çº¿å—…æ¢ã€‚\nè¿™ä¸ªç­–ç•¥ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æŠŠæ‰€æœ‰çš„è¯»å†™è¯·æ±‚éƒ½é€šè¿‡æ€»çº¿å¹¿æ’­ç»™æ‰€æœ‰çš„ CPU æ ¸å¿ƒï¼Œç„¶åè®©å„ä¸ªæ ¸å¿ƒå»â€œå—…æ¢â€è¿™äº›è¯·æ±‚ï¼Œå†æ ¹æ®æœ¬åœ°çš„æƒ…å†µè¿›è¡Œå“åº”ã€‚MESI å°±æ˜¯åŸºäºæ€»çº¿å—…æ¢æœºåˆ¶çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚\nMESI åè®®çš„ç”±æ¥æ˜¯å¯¹ Cache Line çš„å››ä¸ªä¸åŒçš„æ ‡è®°ï¼Œåˆ†åˆ«æ˜¯ï¼š\nçŠ¶æ€ çŠ¶æ€ æè¿° ç›‘å¬ä»»åŠ¡ Modified å·²ä¿®æ”¹ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®è¢«ä¿®æ”¹äº†ï¼Œå’Œå†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬ Cache ä¸­ Cache Line å¿…é¡»æ—¶åˆ»ç›‘å¬æ‰€æœ‰è¯•å›¾è¯»è¯¥ Cache Line ç›¸å¯¹äºä¸»å­˜çš„æ“ä½œï¼Œè¿™ç§æ“ä½œå¿…é¡»åœ¨ç¼“å­˜å°†è¯¥ Cache Line å†™å›ä¸»å­˜å¹¶å°†çŠ¶æ€æ”¹ä¸º S çŠ¶æ€ä¹‹å‰ï¼Œè¢«å»¶è¿Ÿæ‰§è¡Œ Exclusive ç‹¬äº«ï¼Œäº’æ–¥ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬ Cache Cache Line å¿…é¡»ç›‘å¬å…¶ä»–ç¼“å­˜è¯»ä¸»å­˜ä¸­è¯¥ Cache Line çš„æ“ä½œï¼Œä¸€æ—¦æœ‰è¿™ç§æ“ä½œï¼Œè¯¥ Cache Line éœ€è¦æ”¹ä¸º S çŠ¶æ€ Shared å…±äº«çš„ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œæ•°æ®å­˜åœ¨äºå¾ˆå¤šä¸ª Cache ä¸­ Cache Line å¿…é¡»ç›‘å¬å…¶ä»– Cache Line ä½¿è¯¥ Cache Line æ— æ•ˆæˆ–è€…ç‹¬äº«è¯¥ Cache Line çš„è¯·æ±‚ï¼Œå¹¶å°† Cache Line æ”¹ä¸º I çŠ¶æ€ Invalid æ— æ•ˆçš„ è¯¥ Cache Line æ— æ•ˆ æ—  æ•´ä¸ª MESI çš„çŠ¶æ€ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºæ¥è¡¨ç¤ºå®ƒçš„çŠ¶æ€æµè½¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸åŒçŠ¶æ€è§¦å‘çš„äº‹ä»¶æ“ä½œï¼Œå¯èƒ½æ¥è‡ªäºå½“å‰ CPU æ ¸å¿ƒï¼Œä¹Ÿå¯èƒ½æ¥è‡ªæ€»çº¿é‡Œå…¶ä»– CPU æ ¸å¿ƒå¹¿æ’­å‡ºæ¥çš„ä¿¡å·ã€‚æˆ‘æŠŠå„ä¸ªçŠ¶æ€ä¹‹é—´çš„æµè½¬ç”¨è¡¨æ ¼æ€»ç»“äº†ä¸€ä¸‹ï¼š\nå½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ M Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ M M Local Write ä¿®æ”¹ cache æ•°æ®ï¼ŒçŠ¶æ€ä¸å˜ M M Remote Read è¿™è¡Œæ•°æ®è¢«å†™åˆ°å†…å­˜ä¸­ï¼Œä½¿å…¶ä»–æ ¸èƒ½ä½¿ç”¨åˆ°æœ€æ–°æ•°æ®ï¼ŒçŠ¶æ€å˜ä¸º S S M Remote Write è¿™è¡Œæ•°æ®è¢«å†™å…¥å†…å­˜ä¸­ï¼Œå…¶ä»–æ ¸å¯ä»¥è·å–åˆ°æœ€æ–°æ•°æ®ï¼Œç”±äºå…¶ä»– CPU ä¿®æ”¹è¯¥æ¡æ•°æ®ï¼Œåˆ™æœ¬åœ° Cache å˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ E Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ E E Local Write ä¿®æ”¹æ•°æ®ï¼ŒçŠ¶æ€æ”¹ä¸º M M E Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼Œå˜ä¸º S S E Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ S Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ S S Local Write ä¿®æ”¹æ•°æ®ï¼ŒçŠ¶æ€æ”¹ä¸º Mï¼Œå…¶ä»– CPU çš„ Cache Line çŠ¶æ€æ”¹ä¸º I M S Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼ŒçŠ¶æ€ä¸å˜ S S Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ I Local Read 1. å¦‚æœå…¶ä»– CPU æ²¡æœ‰è¿™ä»½æ•°æ®ï¼Œç›´æ¥ä»å†…å­˜ä¸­åŠ è½½æ•°æ®ï¼ŒçŠ¶æ€å˜ä¸º Eï¼›\n2. å¦‚æœå…¶ä»– CPU æœ‰è¿™ä¸ªæ•°æ®ï¼Œä¸” Cache Line çŠ¶æ€ä¸º Mï¼Œåˆ™å…ˆæŠŠ Cache Line ä¸­çš„å†…å®¹å†™å›åˆ°ä¸»å­˜ã€‚æœ¬åœ° Cache å†ä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œè¿™æ—¶ä¸¤ä¸ª Cache Line çš„çŠ¶æ€éƒ½å˜ä¸º Sï¼›\n3. å¦‚æœå…¶ä»– Cache Line æœ‰è¿™ä»½æ•°æ®ï¼Œå¹¶ä¸”çŠ¶æ€ä¸º S æˆ–è€… Eï¼Œåˆ™æœ¬åœ° Cache Line ä»ä¸»å­˜è¯»å–æ•°æ®ï¼Œå¹¶å°†è¿™äº› Cache Line çŠ¶æ€æ”¹ä¸º S E æˆ–è€… S I Local Write 1. å…ˆä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œå¦‚æœå…¶ä»– Cache Line ä¸­æœ‰è¿™ä»½æ•°æ®ï¼Œä¸”çŠ¶æ€ä¸º Mï¼Œåˆ™ç°å°†æ•°æ®æ›´æ–°åˆ°ä¸»å­˜å†è¯»å–ï¼Œå°† Cache Line çŠ¶æ€æ”¹ä¸º Mï¼›\n2. å¦‚æœå…¶ä»– Cache Line æœ‰è¿™ä»½æ•°æ®ï¼Œä¸”çŠ¶æ€ä¸º E æˆ–è€… Sï¼Œåˆ™å…¶ä»– Cache Line çŠ¶æ€æ”¹ä¸º I M I Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼ŒçŠ¶æ€ä¸å˜ S I Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å†…å­˜ è®¡ç®—æœºæœ‰äº”å¤§ç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ï¼šè¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥è®¾å¤‡å’Œè¾“å‡ºè®¾å¤‡ã€‚è€Œå†…å­˜å°±æ˜¯å…¶ä¸­çš„å­˜å‚¨å™¨ã€‚æˆ‘ä»¬çš„æ•°æ®å’ŒæŒ‡ä»¤éƒ½éœ€è¦å…ˆæ”¾åˆ°å†…å­˜ä¸­ï¼Œç„¶åå†è¢« CPU æ‰§è¡Œã€‚\næ“ä½œç³»ç»Ÿä¸­ç¨‹åºå¹¶ä¸èƒ½ç›´æ¥è®¿é—®ç‰©ç†å†…å­˜ï¼Œæˆ‘ä»¬çš„å†…å­˜éœ€è¦è¢«åˆ†æˆå›ºå®šå¤§å°çš„é¡µï¼ˆPageï¼‰ï¼Œç„¶åå†é€šè¿‡è™šæ‹Ÿå†…å­˜åœ°å€ï¼ˆVirtual Addressï¼‰åˆ°ç‰©ç†å†…å­˜åœ°å€ï¼ˆPhysical Addressï¼‰çš„åœ°å€è½¬æ¢ï¼ˆAddress Translationï¼‰ï¼Œæ‰èƒ½åˆ°è¾¾å®é™…å­˜æ”¾æ•°æ®çš„ç‰©ç†å†…å­˜ä½ç½®ã€‚è€Œæˆ‘ä»¬çš„ç¨‹åºçœ‹åˆ°çš„å†…å­˜åœ°å€ï¼Œéƒ½æ˜¯è™šæ‹Ÿå†…å­˜åœ°å€ã€‚é‚£ä¹ˆå¦‚ä½•è¿›è¡Œè½¬æ¢çš„å‘¢ï¼Ÿ\nç®€å•é¡µè¡¨ æœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯å»ºç«‹ä¸€å¼ è™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜çš„æ˜ å°„è¡¨ï¼Œåœ¨è®¡ç®—æœºé‡Œå«åšé¡µè¡¨ï¼ˆPage Tableï¼‰ã€‚é¡µè¡¨è¿™ä¸ªåœ°å€è½¬æ¢çš„åŠæ³•ï¼Œä¼šæŠŠä¸€ä¸ªå†…å­˜åœ°å€åˆ†æˆé¡µå·ï¼ˆDirectoryï¼‰å’Œåç§»é‡ï¼ˆOffsetï¼‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ˜¯ä¸æ˜¯ä¼¼æ›¾ç›¸è¯†ï¼Œå› ä¸ºåœ¨å‰é¢çš„é«˜é€Ÿç¼“å­˜é‡Œï¼Œç¼“å­˜çš„ç»“æ„ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚\nä»¥ä¸€ä¸ª 32 ä½åœ°å€ä¸¾ä¾‹ï¼Œé«˜ 20 ä½æ˜¯è™šæ‹Ÿé¡µå·ï¼Œå¯ä»¥ä»è™šæ‹Ÿé¡µè¡¨ä¸­æ‰¾åˆ°ç‰©ç†é¡µå·çš„ä¿¡æ¯ï¼Œä½ 12 ä½æ˜¯åç§»é‡ï¼Œå¯ä»¥å‡†ç¡®è·å¾—ç‰©ç†åœ°å€ã€‚ \u003c!DOCTYPE html\u003e Responsive Image æ€»ç»“ä¸€ä¸‹ï¼Œå¯¹äºä¸€ä¸ªå†…å­˜åœ°å€è½¬æ¢ï¼Œå…¶å®å°±æ˜¯è¿™æ ·ä¸‰ä¸ªæ­¥éª¤ï¼š\næŠŠè™šæ‹Ÿå†…å­˜åœ°å€ï¼Œåˆ‡åˆ†æˆé¡µå·å’Œåç§»é‡çš„ç»„åˆï¼› ä»é¡µè¡¨é‡Œé¢ï¼ŒæŸ¥è¯¢å‡ºè™šæ‹Ÿé¡µå·ï¼Œå¯¹åº”çš„ç‰©ç†é¡µå·ï¼› ç›´æ¥æ‹¿ç‰©ç†é¡µå·ï¼ŒåŠ ä¸Šå‰é¢çš„åç§»é‡ï¼Œå°±å¾—åˆ°äº†ç‰©ç†å†…å­˜åœ°å€ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ä½†æ˜¯è¿™æ ·çš„é¡µè¡¨æœ‰ä¸ªé—®é¢˜ï¼Œå®ƒéœ€è¦è®°å½•$2^{20}$ä¸ªç‰©ç†é¡µè¡¨ï¼Œè¿™ä¸ªå­˜å‚¨å…³ç³»ï¼Œå°±å¥½æ¯”ä¸€ä¸ª $2^{20}$å¤§å°çš„æ•°ç»„ã€‚ä¸€ä¸ªé¡µå·æ˜¯å®Œæ•´çš„ 32 ä½çš„ 4 å­—èŠ‚ï¼ˆByteï¼‰ï¼Œè¿™æ ·ä¸€ä¸ªé¡µè¡¨å°±éœ€è¦ 4MB çš„ç©ºé—´ã€‚å¹¶ä¸”æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰è¿™æ ·ä¸€ä¸ªé¡µè¡¨ï¼Œç°ä»£ç”µè„‘æ­£å¸¸éƒ½æœ‰æˆç™¾ä¸Šåƒä¸ªè¿›ç¨‹ï¼Œå¦‚æœç”¨è¿™æ ·çš„é¡µè¡¨è‚¯å®šè¡Œä¸é€šçš„ã€‚\nå¤šçº§é¡µè¡¨ æ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªå®é™…çš„ç¨‹åºè¿›ç¨‹é‡Œé¢ï¼Œè™šæ‹Ÿå†…å­˜å ç”¨çš„åœ°å€ç©ºé—´ï¼Œé€šå¸¸æ˜¯ä¸¤æ®µè¿ç»­çš„ç©ºé—´ã€‚è€Œä¸æ˜¯å®Œå…¨æ•£è½çš„éšæœºçš„å†…å­˜åœ°å€ã€‚è€Œå¤šçº§é¡µè¡¨ï¼Œå°±ç‰¹åˆ«é€‚åˆè¿™æ ·çš„å†…å­˜åœ°å€åˆ†å¸ƒã€‚\nè°ˆä¸€è°ˆå†…å­˜ç®¡ç†ï¼Œè™šæ‹Ÿå†…å­˜ï¼Œå¤šçº§é¡µè¡¨ - çŸ¥ä¹\nTLB å†…å­˜ä¿æŠ¤ - å¯æ‰§è¡Œç©ºé—´ä¿æŠ¤ å†…å­˜ä¿æŠ¤ - åœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ– Address Space Layout Randomization\næ€»çº¿ï¼šè®¡ç®—æœºå†…éƒ¨çš„é«˜é€Ÿå…¬è·¯ è®¡ç®—æœºç”±æ§åˆ¶å™¨ã€è¿ç®—å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥è®¾å¤‡ä»¥åŠè¾“å‡ºè®¾å¤‡äº”å¤§éƒ¨åˆ†ç»„æˆã€‚CPU æ‰€ä»£è¡¨çš„æ§åˆ¶å™¨å’Œè¿ç®—å™¨ï¼Œè¦å’Œå­˜å‚¨å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ä¸»å†…å­˜ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºè®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚é‚£ä¹ˆè®¡ç®—æœºæ˜¯ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼æ¥å®Œæˆï¼ŒCPU å’Œå†…å­˜ã€ä»¥åŠå¤–éƒ¨è¾“å…¥è¾“å‡ºè®¾å¤‡çš„é€šä¿¡å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯é€šè¿‡æ€»çº¿æ¥é€šä¿¡ã€‚\nè®¡ç®—æœºé‡Œæœ‰ä¸åŒçš„ç¡¬ä»¶è®¾å¤‡ï¼Œå¦‚æœè®¾å¤‡ä¸è®¾å¤‡ä¹‹é—´éƒ½å•ç‹¬è¿æ¥ï¼Œé‚£ä¹ˆå°±éœ€è¦ N*N çš„è¿çº¿ã€‚é‚£ä¹ˆæ€ä¹ˆé™ä½å¤æ‚åº¦å‘¢ï¼Ÿä¸å…¶è®©å„ä¸ªè®¾å¤‡ä¹‹é—´äº’ç›¸å•ç‹¬é€šä¿¡ï¼Œä¸å¦‚æˆ‘ä»¬å»è®¾è®¡ä¸€ä¸ªå…¬ç”¨çš„çº¿è·¯ã€‚CPU æƒ³è¦å’Œä»€ä¹ˆè®¾å¤‡é€šä¿¡ï¼Œé€šä¿¡çš„æŒ‡ä»¤æ˜¯ä»€ä¹ˆï¼Œå¯¹åº”çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼Œéƒ½å‘é€åˆ°è¿™ä¸ªçº¿è·¯ä¸Šï¼›è®¾å¤‡è¦å‘ CPU å‘é€ä»€ä¹ˆä¿¡æ¯å‘¢ï¼Œä¹Ÿå‘é€åˆ°è¿™ä¸ªçº¿è·¯ä¸Šã€‚è¿™ä¸ªçº¿è·¯å°±å¥½åƒä¸€ä¸ªé«˜é€Ÿå…¬è·¯ï¼Œå„ä¸ªè®¾å¤‡å’Œå…¶ä»–è®¾å¤‡ä¹‹é—´ï¼Œä¸éœ€è¦å•ç‹¬å»ºå…¬è·¯ï¼Œåªå»ºä¸€æ¡å°è·¯é€šå‘è¿™æ¡é«˜é€Ÿå…¬è·¯å°±å¥½äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ä¸‰ç§çº¿è·¯å’Œå¤šæ€»çº¿æ¶æ„ é¦–å…ˆï¼ŒCPU å’Œå†…å­˜ä»¥åŠé«˜é€Ÿç¼“å­˜é€šä¿¡çš„æ€»çº¿ï¼Œè¿™é‡Œé¢é€šå¸¸æœ‰ä¸¤ç§æ€»çº¿ã€‚è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåŒç‹¬ç«‹æ€»çº¿ï¼ˆDual Independent Busï¼Œç¼©å†™ä¸º DIBï¼‰ã€‚CPU é‡Œï¼Œæœ‰ä¸€ä¸ªå¿«é€Ÿçš„æœ¬åœ°æ€»çº¿ï¼ˆLocal Busï¼‰ï¼Œä»¥åŠä¸€ä¸ªé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢çš„å‰ç«¯æ€»çº¿ï¼ˆFront-side Busï¼‰ã€‚\nç°ä»£çš„ CPU é‡Œï¼Œé€šå¸¸æœ‰ä¸“é—¨çš„é«˜é€Ÿç¼“å­˜èŠ¯ç‰‡ã€‚è¿™é‡Œçš„é«˜é€Ÿæœ¬åœ°æ€»çº¿ï¼Œå°±æ˜¯ç”¨æ¥å’Œé«˜é€Ÿç¼“å­˜é€šä¿¡çš„ã€‚è€Œå‰ç«¯æ€»çº¿ï¼Œåˆ™æ˜¯ç”¨æ¥å’Œä¸»å†…å­˜ä»¥åŠè¾“å…¥è¾“å‡ºè®¾å¤‡é€šä¿¡çš„ã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæŠŠæœ¬åœ°æ€»çº¿ä¹Ÿå«ä½œåç«¯æ€»çº¿ï¼ˆBack-sideBusï¼‰ï¼Œå’Œå‰é¢çš„å‰ç«¯æ€»çº¿å¯¹åº”èµ·æ¥ã€‚\né™¤äº†å‰ç«¯æ€»çº¿å‘¢ï¼Œæˆ‘ä»¬å¸¸å¸¸è¿˜ä¼šå¬åˆ° PCI æ€»çº¿ã€I/O æ€»çº¿æˆ–è€…ç³»ç»Ÿæ€»çº¿ï¼ˆSystem Busï¼‰ã€‚çœ‹åˆ°è¿™ä¹ˆå¤šæ€»çº¿çš„åå­—ï¼Œä½ æ˜¯ä¸æ˜¯å·²ç»æœ‰ç‚¹æ™•äº†ã€‚è¿™äº›åè¯ç¡®å®å®¹æ˜“æ··ä¸ºä¸€è°ˆã€‚å…¶å®å„ç§æ€»çº¿çš„å‘½åä¸€ç›´éƒ½å¾ˆæ··ä¹±ï¼Œæˆ‘ä»¬ä¸å¦‚ç›´æ¥æ¥çœ‹ä¸€çœ‹ CPU çš„ç¡¬ä»¶æ¶æ„å›¾ã€‚å¯¹ç…§å›¾æ¥çœ‹ï¼Œä¸€åˆ‡é—®é¢˜å°±éƒ½æ¸…æ¥šäº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image CPU é‡Œé¢çš„åŒ—æ¡¥èŠ¯ç‰‡ï¼ŒæŠŠæˆ‘ä»¬ä¸Šé¢è¯´çš„å‰ç«¯æ€»çº¿ï¼Œä¸€åˆ†ä¸ºäºŒï¼Œå˜æˆäº†ä¸‰ä¸ªæ€»çº¿ã€‚æˆ‘ä»¬çš„å‰ç«¯æ€»çº¿ï¼Œå…¶å®å°±æ˜¯ç³»ç»Ÿæ€»çº¿ã€‚CPU é‡Œé¢çš„å†…å­˜æ¥å£ï¼Œç›´æ¥å’Œç³»ç»Ÿæ€»çº¿é€šä¿¡ï¼Œç„¶åç³»ç»Ÿæ€»çº¿å†æ¥å…¥ä¸€ä¸ª I/O æ¡¥æ¥å™¨ï¼ˆI/OBridgeï¼‰ã€‚è¿™ä¸ª I/O æ¡¥æ¥å™¨ï¼Œä¸€è¾¹æ¥å…¥äº†æˆ‘ä»¬çš„å†…å­˜æ€»çº¿ï¼Œä½¿å¾—æˆ‘ä»¬çš„ CPU å’Œå†…å­˜é€šä¿¡ï¼›å¦ä¸€è¾¹å‘¢ï¼Œåˆæ¥å…¥äº†ä¸€ä¸ª I/O æ€»çº¿ï¼Œç”¨æ¥è¿æ¥ I/O è®¾å¤‡ã€‚\näº‹å®ä¸Šï¼ŒçœŸå®çš„è®¡ç®—æœºé‡Œï¼Œè¿™ä¸ªæ€»çº¿å±‚é¢æ‹†åˆ†å¾—æ›´ç»†ã€‚æ ¹æ®ä¸åŒçš„è®¾å¤‡ï¼Œè¿˜ä¼šåˆ†æˆç‹¬ç«‹çš„ PCI æ€»çº¿ã€ISA æ€»çº¿ç­‰ç­‰ã€‚ \u003c!DOCTYPE html\u003e Responsive Image åœ¨ç‰©ç†å±‚é¢ï¼Œå…¶å®æˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠæ€»çº¿çœ‹ä½œä¸€ç»„â€œç”µçº¿â€ã€‚ä¸è¿‡å‘¢ï¼Œè¿™äº›ç”µçº¿ä¹‹é—´ä¹Ÿæ˜¯æœ‰åˆ†å·¥çš„ï¼Œæˆ‘ä»¬é€šå¸¸æœ‰ä¸‰ç±»çº¿è·¯ã€‚\næ•°æ®çº¿ï¼ˆData Busï¼‰ï¼Œç”¨æ¥ä¼ è¾“å®é™…çš„æ•°æ®ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯å®é™…ä¸Šäº†å…¬äº¤è½¦çš„â€œäººâ€ã€‚ åœ°å€çº¿ï¼ˆAddress Busï¼‰ï¼Œç”¨æ¥ç¡®å®šåˆ°åº•æŠŠæ•°æ®ä¼ è¾“åˆ°å“ªé‡Œå»ï¼Œæ˜¯å†…å­˜çš„æŸä¸ªä½ç½®ï¼Œè¿˜æ˜¯æŸä¸€ä¸ª I/O è®¾å¤‡ã€‚è¿™ä¸ªå…¶å®å°±ç›¸å½“äºæ‹¿äº†ä¸ªçº¸æ¡ï¼Œå†™ä¸‹äº†ä¸Šé¢çš„äººè¦ä¸‹è½¦çš„ç«™ç‚¹ã€‚ æ§åˆ¶çº¿ï¼ˆControlBusï¼‰ï¼Œç”¨æ¥æ§åˆ¶å¯¹äºæ€»çº¿çš„è®¿é—®ã€‚è™½ç„¶æˆ‘ä»¬æŠŠæ€»çº¿æ¯”å–»æˆäº†ä¸€è¾†å…¬äº¤è½¦ã€‚é‚£ä¹ˆæœ‰äººæƒ³è¦åšå…¬äº¤è½¦çš„æ—¶å€™ï¼Œéœ€è¦å‘Šè¯‰å…¬äº¤è½¦å¸æœºï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„æ§åˆ¶ä¿¡å·ã€‚ å°½ç®¡æ€»çº¿å‡å°‘äº†è®¾å¤‡ä¹‹é—´çš„è€¦åˆï¼Œä¹Ÿé™ä½äº†ç³»ç»Ÿè®¾è®¡çš„å¤æ‚åº¦ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªæ–°é—®é¢˜ï¼Œé‚£å°±æ˜¯æ€»çº¿ä¸èƒ½åŒæ—¶ç»™å¤šä¸ªè®¾å¤‡æä¾›é€šä¿¡åŠŸèƒ½ã€‚\næˆ‘ä»¬çš„æ€»çº¿æ˜¯å¾ˆå¤šä¸ªè®¾å¤‡å…¬ç”¨çš„ï¼Œé‚£å¤šä¸ªè®¾å¤‡éƒ½æƒ³è¦ç”¨æ€»çº¿ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œå»å†³å®šè¿™ç§æƒ…å†µä¸‹ï¼Œåˆ°åº•æŠŠæ€»çº¿ç»™å“ªä¸€ä¸ªè®¾å¤‡ç”¨ã€‚è¿™ä¸ªæœºåˆ¶ï¼Œå°±å«ä½œæ€»çº¿è£å†³ï¼ˆBus Arbitractionï¼‰\nç¡¬ç›˜ DMA è¿‡å»å‡ å¹´ï¼Œè®¡ç®—æœºäº§ä¸šä¸€ç›´åœ¨ä¸ºæå‡ I/O è®¾å¤‡çš„é€Ÿåº¦è€ŒåŠªåŠ›ï¼Œä»æœºæ¢°ç¡¬ç›˜ HDD åˆ°å›ºæ€ç¡¬ç›˜ SSDï¼Œä» SATA åè®®åˆ° PCIE åè®®ï¼Œè™½ç„¶é€Ÿåº¦éƒ½å‡ åä¸Šç™¾å€çš„å¢åŠ ï¼Œä½†æ˜¯ä»ç„¶ä¸å¤Ÿå¿«ã€‚å› ä¸ºç›¸æ¯”äº CPU åŸºæœ¬éƒ½æ˜¯ 2GHz çš„é¢‘ç‡ï¼ˆæ¯ç§’ä¼šæœ‰ 20 äº¿æ¬¡çš„æ“ä½œï¼‰ï¼ŒSSD ç¡¬ç›˜çš„ IOPS çš„ 2 ä¸‡æ¬¡æ“ä½œå°±æ˜¾å¾—å¾®ä¸è¶³é“ã€‚\nå¦‚æœæˆ‘ä»¬å¯¹äº I/O çš„æ“ä½œï¼Œéƒ½æ˜¯ç”± CPU å‘å‡ºå¯¹åº”çš„æŒ‡ä»¤ï¼Œç„¶åç­‰å¾… I/O è®¾å¤‡å®Œæˆæ“ä½œä¹‹åè¿”å›ï¼Œé‚£ CPU æœ‰å¤§é‡çš„æ—¶é—´å…¶å®éƒ½æ˜¯åœ¨ç­‰å¾… I/O è®¾å¤‡å®Œæˆæ“ä½œã€‚ç‰¹åˆ«æ˜¯å½“ä¼ è¾“çš„æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œæ¯”å¦‚è¿›è¡Œå¤§æ–‡ä»¶å¤åˆ¶ï¼Œå¦‚æœæ‰€æœ‰æ•°æ®éƒ½è¦ç»è¿‡ CPUï¼Œå®åœ¨æ˜¯æœ‰ç‚¹å„¿å¤ªæµªè´¹æ—¶é—´äº†ã€‚\nå› æ­¤ï¼Œè®¡ç®—æœºå·¥ç¨‹å¸ˆä»¬ï¼Œå°±å‘æ˜äº†DMA æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å†…å­˜è®¿é—®ï¼ˆDirect Memory Accessï¼‰æŠ€æœ¯ï¼Œæ¥å‡å°‘ CPU ç­‰å¾…çš„æ—¶é—´ã€‚\nä»€ä¹ˆæ˜¯ DMA æœ¬è´¨ä¸Šï¼ŒDMA æŠ€æœ¯å°±æ˜¯æˆ‘ä»¬åœ¨ä¸»æ¿ä¸Šæ”¾ä¸€å—ç‹¬ç«‹çš„èŠ¯ç‰‡ã€‚åœ¨è¿›è¡Œå†…å­˜å’Œ I/O è®¾å¤‡çš„æ•°æ®ä¼ è¾“çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å†é€šè¿‡ CPU æ¥æ§åˆ¶æ•°æ®ä¼ è¾“ï¼Œè€Œç›´æ¥é€šè¿‡ DMA æ§åˆ¶å™¨ï¼ˆDMA Controllerï¼Œç®€ç§° DMACï¼‰ã€‚è¿™å—èŠ¯ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªåå¤„ç†å™¨ï¼ˆCo-Processorï¼‰ã€‚\nDMAC æœ€æœ‰ä»·å€¼çš„åœ°æ–¹ä½“ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¦ä¼ è¾“çš„æ•°æ®ç‰¹åˆ«å¤§ã€é€Ÿåº¦ç‰¹åˆ«å¿«ï¼Œæˆ–è€…ä¼ è¾“çš„æ•°æ®ç‰¹åˆ«å°ã€é€Ÿåº¦ç‰¹åˆ«æ…¢çš„æ—¶å€™ã€‚\næ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ç”¨åƒå…†ç½‘å¡æˆ–è€…ç¡¬ç›˜ä¼ è¾“å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœéƒ½ç”¨ CPU æ¥æ¬è¿çš„è¯ï¼Œè‚¯å®šå¿™ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹© DMACã€‚è€Œå½“æ•°æ®ä¼ è¾“å¾ˆæ…¢çš„æ—¶å€™ï¼ŒDMAC å¯ä»¥ç­‰æ•°æ®åˆ°é½äº†ï¼Œå†å‘ CPU å‘èµ·ä¸­æ–­ï¼Œè®© CPU å»å¤„ç†ï¼Œè€Œä¸æ˜¯è®© CPU åœ¨é‚£é‡Œå¿™ç­‰å¾…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é¦–å…ˆï¼ŒCPU è¿˜æ˜¯ä½œä¸ºä¸€ä¸ªä¸»è®¾å¤‡ï¼Œå‘ DMAC è®¾å¤‡å‘èµ·è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚ï¼Œå…¶å®å°±æ˜¯åœ¨ DMAC é‡Œé¢ä¿®æ”¹é…ç½®å¯„å­˜å™¨ã€‚ CPU ä¿®æ”¹ DMAC çš„é…ç½®çš„æ—¶å€™ï¼Œä¼šå‘Šè¯‰ DMAC è¿™æ ·å‡ ä¸ªä¿¡æ¯ï¼š æºåœ°å€çš„åˆå§‹å€¼ï¼šæ•°æ®è¦ä»å“ªé‡Œä¼ è¾“è¿‡æ¥ã€‚å¦‚æœæˆ‘ä»¬è¦ä»å†…å­˜é‡Œé¢å†™å…¥æ•°æ®åˆ°ç¡¬ç›˜ä¸Šï¼Œé‚£ä¹ˆå°±æ˜¯è¦è¯»å–çš„æ•°æ®åœ¨å†…å­˜é‡Œé¢çš„åœ°å€ ä¼ è¾“æ—¶å€™çš„åœ°å€å¢å‡æ–¹å¼ï¼šæ•°æ®æ˜¯ä»å¤§çš„åœ°å€å‘å°çš„åœ°å€ä¼ è¾“ï¼Œè¿˜æ˜¯ä»å°çš„åœ°å€å¾€å¤§çš„åœ°å€ä¼ è¾“ ä¼ è¾“çš„æ•°æ®é•¿åº¦ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸€å…±è¦ä¼ è¾“å¤šå°‘æ•°æ® è®¾ç½®å®Œè¿™äº›ä¿¡æ¯ä¹‹åï¼ŒDMAC å°±ä¼šå˜æˆä¸€ä¸ªç©ºé—²çš„çŠ¶æ€ï¼ˆIdleï¼‰ã€‚ å¦‚æœæˆ‘ä»¬è¦ä»ç¡¬ç›˜ä¸Šå¾€å†…å­˜é‡Œé¢åŠ è½½æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç¡¬ç›˜å°±ä¼šå‘ DMAC å‘èµ·ä¸€ä¸ªæ•°æ®ä¼ è¾“è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚å¹¶ä¸æ˜¯é€šè¿‡æ€»çº¿ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªé¢å¤–çš„è¿çº¿ã€‚ ç„¶åï¼Œæˆ‘ä»¬çš„ DMAC éœ€è¦å†é€šè¿‡ä¸€ä¸ªé¢å¤–çš„è¿çº¿å“åº”è¿™ä¸ªç”³è¯·ã€‚ DMAC è¿™ä¸ªèŠ¯ç‰‡ï¼Œå°±å‘ç¡¬ç›˜çš„æ¥å£å‘èµ·è¦æ€»çº¿è¯»çš„ä¼ è¾“è¯·æ±‚ã€‚æ•°æ®å°±ä»ç¡¬ç›˜é‡Œé¢ï¼Œè¯»åˆ°äº† DMAC çš„æ§åˆ¶å™¨é‡Œé¢ã€‚ DMAC å†å‘æˆ‘ä»¬çš„å†…å­˜å‘èµ·æ€»çº¿å†™çš„æ•°æ®ä¼ è¾“è¯·æ±‚ï¼ŒæŠŠæ•°æ®å†™å…¥åˆ°å†…å­˜é‡Œé¢ã€‚ DMAC ä¼šåå¤è¿›è¡Œä¸Šé¢ç¬¬ 6ã€7 æ­¥çš„æ“ä½œï¼Œç›´åˆ° DMAC çš„å¯„å­˜å™¨é‡Œé¢è®¾ç½®çš„æ•°æ®é•¿åº¦ä¼ è¾“å®Œæˆã€‚ æ•°æ®ä¼ è¾“å®Œæˆä¹‹åï¼ŒDMAC é‡æ–°å›åˆ°ç¬¬ 3 æ­¥çš„ç©ºé—²çŠ¶æ€ã€‚ æ‰€ä»¥ï¼Œæ•´ä¸ªæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸æ˜¯é€šè¿‡ CPU æ¥æ¬è¿æ•°æ®ï¼Œè€Œæ˜¯ç”± DMAC è¿™ä¸ªèŠ¯ç‰‡æ¥æ¬è¿æ•°æ®ã€‚ä½†æ˜¯ CPU åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚å› ä¸ºä¼ è¾“ä»€ä¹ˆæ•°æ®ï¼Œä»å“ªé‡Œä¼ è¾“åˆ°å“ªé‡Œï¼Œå…¶å®è¿˜æ˜¯ç”± CPU æ¥è®¾ç½®çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼ŒDMAC è¢«å«ä½œ åå¤„ç†å™¨ã€‚\nå‚è€ƒèµ„æ–™ ã€ç¡¬ä»¶ç§‘æ™®ã€‘ç”µè„‘ä¸»æ¿å³ä¸‹è§’çš„æ•£çƒ­ç‰‡ä¸‹é¢ç©¶ç«Ÿéšè—ç€ä»€ä¹ˆï¼Ÿè¯¦è§£ä¸»æ¿å—æ¡¥èŠ¯ç‰‡ç»„çš„åŠŸèƒ½å’Œä½œç”¨_å“”å“©å“”å“©_bilibili\n","permalink":"https://lifeislife.cn/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AD%98%E5%82%A8%E4%B8%8Eio%E7%B3%BB%E7%BB%9F/","summary":"\u003ch2 id=\"å­˜å‚¨å™¨\"\u003eå­˜å‚¨å™¨\u003c/h2\u003e\n\u003ch3 id=\"å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„\"\u003eå­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„\u003c/h3\u003e\n\u003ch4 id=\"sramstatic-random-access-memoryé™æ€éšæœºå­˜å–å­˜å‚¨å™¨\"\u003eSRAMï¼ˆStatic Random-Access Memoryï¼Œé™æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼‰\u003c/h4\u003e\n\u003cp\u003eCPU å¦‚æœå½¢å®¹æˆäººçš„å¤§è„‘çš„è¯ï¼Œé‚£ä¹ˆ CPU Cache (é«˜é€Ÿç¼“å­˜) å°±å¥½æ¯”äººçš„è®°å¿†ã€‚å®ƒç”¨çš„æ˜¯ SRAM èŠ¯ç‰‡ã€‚\u003c/p\u003e\n\u003cp\u003eSRAM çš„â€œé™æ€â€çš„æ„æ€æ˜¯ï¼Œåªè¦å¤„äºé€šç”µçŠ¶æ€ï¼Œé‡Œé¢çš„æ•°æ®å°±ä¿æŒå­˜åœ¨ï¼Œä¸€æ—¦æ–­ç”µï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ã€‚SRAM é‡Œ 1bit æ•°æ®éœ€è¦ 6-8 ä¸ªæ™¶ä½“ç®¡ï¼Œæ‰€ä»¥ SRAM çš„å­˜å‚¨å¯†åº¦ä¸é«˜ï¼ŒåŒæ ·çš„ç‰©ç†ç©ºé—´ï¼Œèƒ½å¤Ÿå­˜çš„æ•°æ®æœ‰é™ã€‚å› ä¸ºå…¶ç”µè·¯ç®€å•ï¼Œè®¿é—®é€Ÿåº¦éå¸¸å¿«ã€‚\u003c/p\u003e","title":"è®¡ç®—æœºç»„æˆåŸç†-å­˜å‚¨ä¸ IO ç³»ç»Ÿ"},{"content":"å»ºç«‹æ•°æ®é€šè·¯ï¼šæŒ‡ä»¤ + è¿ç®—=CPU æŒ‡ä»¤å‘¨æœŸ\nFetchï¼ˆå–å¾—æŒ‡ä»¤ï¼‰ï¼šä»å†…å­˜é‡ŒæŠŠæŒ‡ä»¤åŠ è½½åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­ã€‚ Decodeï¼ˆæŒ‡ä»¤è¯‘ç ï¼‰ Executeï¼ˆæ‰§è¡ŒæŒ‡ä»¤ï¼‰ é‡å¤æ“ä½œè¿™ä¸‰æ­¥ï¼Œè¿™ä¸ªå¾ªç¯ç§°ä¸ºæŒ‡ä»¤å‘¨æœŸã€‚ ä¸åŒçš„æ­¥éª¤åœ¨ä¸åŒç»„ä»¶å†…å®Œæˆ \u003c!DOCTYPE html\u003e Responsive Image æœºå™¨å‘¨æœŸ/CPUå‘¨æœŸï¼šä»å†…å­˜é‡Œè¯»å–ä¸€æ¡æŒ‡ä»¤çš„æœ€çŸ­æ—¶é—´ã€‚ æ—¶é’Ÿå‘¨æœŸï¼šå°±æ˜¯æœºå™¨çš„ä¸»é¢‘ï¼Œä¸€ä¸ª CPU å‘¨æœŸç”±å¤šä¸ªæ—¶é’Ÿå‘¨æœŸç»„æˆã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ“ä½œå…ƒä»¶ï¼šç»„åˆé€»è¾‘å…ƒä»¶ï¼ŒALUï¼ŒåŠŸèƒ½æ˜¯åœ¨ç‰¹å®šçš„è¾“å…¥ä¸‹ï¼Œç”Ÿæˆç‰¹å®šçš„è¾“å‡ºã€‚ å­˜å‚¨å…ƒä»¶ï¼šçŠ¶æ€å…ƒä»¶ï¼Œå¯„å­˜å™¨ã€‚\nå°†æ“ä½œå…ƒä»¶ï¼Œæ“ä½œåŸä»¶é€šè¿‡æ•°æ®æ€»çº¿çš„æ–¹å¼è¿æ¥èµ·æ¥ï¼Œå°±å»ºç«‹äº†æ•°æ®é€šè·¯äº†ã€‚\næ§åˆ¶å™¨ï¼šå¾ªç¯æ‰§è¡Œå–å€-è¯‘ç ï¼Œäº§ç”Ÿæ§åˆ¶ä¿¡å·äº¤ç»™ ALU å¤„ç†ã€‚ç”µè·¯ç‰¹åˆ«å¤æ‚ï¼ŒCPU å¦‚æœæ”¯æŒ 2000 ä¸ªæŒ‡ä»¤ï¼Œæ„å‘³ç€æ§åˆ¶å™¨è¾“å‡ºçš„ä¿¡å·æœ‰ 2000 ä¸ªä¸åŒçš„ç»„åˆã€‚\nCPU éœ€è¦çš„ç”µè·¯\næ ¹æ®è¾“å…¥è®¡ç®—å‡ºç»“æœçš„ä¸€ä¸ªç”µè·¯ï¼ŒALU èƒ½å¤Ÿè¿›è¡ŒçŠ¶æ€è¯»å†™çš„ç”µè·¯å…ƒä»¶ï¼Œå¯„å­˜å™¨ æŒ‰ç…§å›ºå®šå‘¨æœŸï¼Œä¸åœå®ç° PC å¯„å­˜å™¨è‡ªå¢çš„ç”µè·¯ è¯‘ç ç”µè·¯ï¼Œèƒ½å¤Ÿå¯¹äºæ‹¿åˆ°çš„å†…å­˜åœ°å€è·å–å¯¹åº”çš„æ•°æ®æˆ–è€…æŒ‡ä»¤ Q : CPU å¥½åƒä¸€ä¸ªæ°¸ä¸åœæ­‡çš„æœºå™¨ï¼Œä¸€ç›´åœ¨ä¸åœåœ°è¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤å»è¿è¡Œã€‚é‚£ ä¸ºä»€ä¹ˆ CPU è¿˜ä¼šæœ‰æ»¡è½½è¿è¡Œå’Œ Idle é—²ç½®çš„çŠ¶æ€å‘¢ï¼Ÿ Aï¼šCPU è¿˜ä¼šæœ‰æ»¡è½½è¿è¡Œå’Œ Idle é—²ç½®çš„çŠ¶æ€ï¼ŒæŒ‡çš„ç³»ç»Ÿå±‚é¢çš„çŠ¶æ€ã€‚å³ä½¿æ˜¯ Idle ç©ºé—²çŠ¶æ€ï¼ŒCPU ä¹Ÿåœ¨æ‰§è¡Œå¾ªç¯æŒ‡ä»¤ã€‚ æ“ä½œç³»ç»Ÿå†…æ ¸æœ‰ idle è¿›ç¨‹ï¼Œä¼˜å…ˆçº§æœ€ä½ï¼Œä»…å½“å…¶ä»–è¿›ç¨‹éƒ½é˜»å¡æ—¶è¢«è°ƒåº¦å™¨é€‰ä¸­ã€‚idle è¿›ç¨‹å¾ªç¯æ‰§è¡Œ HLT æŒ‡ä»¤ï¼Œå…³é—­ CPU å¤§éƒ¨åˆ†åŠŸèƒ½ä»¥é™ä½åŠŸè€—ï¼Œæ”¶åˆ°ä¸­æ–­ä¿¡å·æ—¶ CPU æ¢å¤æ­£å¸¸çŠ¶æ€ã€‚CPU åœ¨ç©ºé—²çŠ¶æ€å°±ä¼šåœæ­¢æ‰§è¡Œï¼Œå³åˆ‡æ–­æ—¶é’Ÿä¿¡å·ï¼ŒCPU ä¸»é¢‘ä¼šç¬é—´é™ä½ä¸º 0ï¼ŒåŠŸè€—ä¹Ÿä¼šç¬é—´é™ä¸º 0ã€‚ç”±äºè¿™ä¸ªç©ºé—²çŠ¶æ€æ˜¯ååˆ†çŸ­æš‚çš„ï¼Œæ‰€ä»¥ä½ åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¹Ÿåªä¼šçœ‹åˆ° CPU é¢‘ç‡ä¸‹é™ï¼Œä¸ä¼šçœ‹åˆ°é™ä¸º 0ã€‚å½“ CPU ä»ç©ºé—²çŠ¶æ€ä¸­æ¢å¤æ—¶ï¼Œå°±ä¼šæ¥é€šæ—¶é’Ÿä¿¡å·ï¼ŒCPU é¢‘ç‡å°±ä¼šä¸Šå‡ã€‚æ‰€ä»¥ä½ ä¼šåœ¨ä»»åŠ¡ç®¡ç†å™¨é‡Œé¢çœ‹åˆ° CPU çš„é¢‘ç‡èµ·ä¼å˜åŒ–ã€‚\nå®ç°ä¸€ä¸ªå®Œæ•´çš„ CPUï¼Œé™¤äº†ç»„åˆé€»è¾‘ç”µè·¯ï¼Œè¿˜éœ€è¦æ—¶åºé€»è¾‘ç”µè·¯ã€‚å› ä¸ºç»„åˆé€»è¾‘ç”µè·¯åªæ˜¯å¤„ç†å›ºå®šè¾“å…¥ï¼Œå¾—åˆ°å›ºå®šè¾“å‡ºï¼Œè¿™ç§ç”µè·¯åªèƒ½ååŠ©æˆ‘ä»¬å®Œæˆä¸€äº›è®¡ç®—å·¥ä½œï¼Œå¹²ä¸äº†å¤ªå¤æ‚çš„å·¥ä½œã€‚\næ—¶åºé€»è¾‘ç”µè·¯å¯ä»¥è§£å†³è¿™å‡ ä¸ªé—®é¢˜ï¼š\nè‡ªåŠ¨è¿è¡Œé—®é¢˜ æ—¶åºç”µè·¯æ¥é€šä¹‹åå¯ä»¥ä¸åœåœ°å¼€å¯å’Œå…³é—­å¼€å…³ï¼Œè¿›å…¥ä¸€ä¸ªè‡ªåŠ¨è¿è¡Œçš„çŠ¶æ€ã€‚è¿™ä¸ªä½¿å¾—æˆ‘ä»¬ä¸Šä¸€è®²è¯´çš„ï¼Œæ§åˆ¶å™¨ä¸åœåœ°è®© PC å¯„å­˜å™¨è‡ªå¢è¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤æˆä¸ºå¯èƒ½ã€‚ å­˜å‚¨é—®é¢˜ é€šè¿‡æ—¶åºç”µè·¯å®ç°çš„è§¦å‘å™¨ï¼Œèƒ½æŠŠè®¡ç®—ç»“æœå­˜å‚¨åœ¨ç‰¹å®šçš„ç”µè·¯é‡Œé¢ï¼Œ è€Œä¸æ˜¯åƒç»„åˆé€»è¾‘ç”µè·¯é‚£æ ·ï¼Œä¸€æ—¦è¾“å…¥æœ‰ä»»ä½•æ”¹å˜ï¼Œå¯¹åº”çš„è¾“å‡ºä¹Ÿä¼šæ”¹å˜ã€‚ æ—¶åºåè°ƒé—®é¢˜ æ— è®ºæ˜¯ç¨‹åºå®ç°çš„è½¯ä»¶æŒ‡ä»¤ï¼Œè¿˜æ˜¯åˆ°ç¡¬ä»¶å±‚é¢ï¼Œå„ç§æŒ‡ä»¤çš„æ“ä½œéƒ½æœ‰å…ˆåçš„é¡ºåºè¦æ±‚ã€‚æ—¶åºç”µè·¯ä½¿å¾—ä¸åŒçš„äº‹ä»¶æŒ‰ç…§æ—¶é—´é¡ºåºå‘ç”Ÿã€‚ è§£å†³è‡ªåŠ¨è¿è¡Œé—®é¢˜ å®ç°æ—¶åºé€»è¾‘ç”µè·¯çš„ç¬¬ä¸€æ­¥å°±éœ€è¦ä¸€ä¸ªæ—¶é’Ÿã€‚CPU çš„ä¸»é¢‘æ˜¯ä¸€ä¸ªæ™¶æŒ¯æ¥å®ç°çš„ï¼Œæ™¶æŒ¯ç”Ÿæˆçš„ç”µè·¯ä¿¡å·å°±æ˜¯æˆ‘ä»¬çš„æ—¶é’Ÿä¿¡å·ã€‚\nå®ç°å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨åŸå…ˆä¸€èˆ¬åªæ”¾ä¸€ä¸ªå¼€å…³çš„ä¿¡å·è¾“å…¥ç«¯ï¼Œæ”¾ä¸Šäº†ä¸¤ä¸ªå¼€ å…³ã€‚ä¸€ä¸ªå¼€å…³ Aï¼Œä¸€å¼€å§‹æ˜¯æ–­å¼€çš„ï¼Œç”±æˆ‘ä»¬æ‰‹å·¥æ§åˆ¶ï¼›å¦å¤–ä¸€ä¸ªå¼€å…³ Bï¼Œä¸€å¼€å§‹æ˜¯åˆä¸Šçš„ï¼Œ ç£æ€§çº¿åœˆå¯¹å‡†ä¸€å¼€å§‹å°±åˆä¸Šçš„å¼€å…³ Bã€‚\näºæ˜¯ï¼Œä¸€æ—¦æˆ‘ä»¬åˆä¸Šå¼€å…³ Aï¼Œç£æ€§çº¿åœˆå°±ä¼šé€šç”µï¼Œäº§ç”Ÿç£æ€§ï¼Œå¼€å…³ B å°±ä¼šä»åˆä¸Šå˜æˆæ–­ å¼€ã€‚ä¸€æ—¦è¿™ä¸ªå¼€å…³æ–­å¼€äº†ï¼Œç”µè·¯å°±ä¸­æ–­äº†ï¼Œç£æ€§çº¿åœˆå°±å¤±å»äº†ç£æ€§ã€‚äºæ˜¯ï¼Œå¼€å…³ B åˆä¼šå¼¹ å›åˆ°åˆä¸Šçš„çŠ¶æ€ã€‚è¿™æ ·ä¸€æ¥ï¼Œç”µè·¯æ¥é€šï¼Œçº¿åœˆåˆæœ‰äº†ç£æ€§ã€‚æˆ‘ä»¬çš„ç”µè·¯å°±ä¼šæ¥å›ä¸æ–­åœ°åœ¨å¼€ å¯ã€å…³é—­è¿™ä¸¤ä¸ªçŠ¶æ€ä¸­åˆ‡æ¢ã€‚\nè¿™ä¸ªä¸æ–­åˆ‡æ¢çš„è¿‡ç¨‹ï¼Œå¯¹äºä¸‹æ¸¸ç”µè·¯æ¥è¯´ï¼Œå°±æ˜¯ä¸æ–­åœ°äº§ç”Ÿæ–°çš„ 0 å’Œ 1 è¿™æ ·çš„ä¿¡å·ã€‚å¦‚æœ ä½ åœ¨ä¸‹æ¸¸çš„ç”µè·¯ä¸Šæ¥ä¸Šä¸€ä¸ªç¯æ³¡ï¼Œå°±ä¼šå‘ç°è¿™ä¸ªç¯æ³¡åœ¨äº®å’Œæš—ä¹‹é—´ä¸åœåˆ‡æ¢ã€‚è¿™ä¸ªæŒ‰ç…§å›ºå®šçš„å‘¨æœŸä¸æ–­åœ¨ 0 å’Œ 1 ä¹‹é—´åˆ‡æ¢çš„ä¿¡å·ï¼Œå°±æ˜¯æˆ‘ä»¬çš„æ—¶é’Ÿä¿¡å·ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸€èˆ¬è¿™æ ·äº§ç”Ÿçš„æ—¶é’Ÿä¿¡å·ï¼Œå°±åƒä½ åœ¨å„ç§æ•™ç§‘ä¹¦å›¾ä¾‹ä¸­çœ‹åˆ°çš„ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªæŒ¯è¡äº§ç”Ÿçš„ 0ã€1 ä¿¡å·ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿™ç§ç”µè·¯ï¼Œå…¶å®å°±ç›¸å½“äºæŠŠç”µè·¯çš„è¾“å‡ºä¿¡å·ä½œä¸ºè¾“å…¥ä¿¡å·ï¼Œå†å›åˆ°å½“å‰ç”µè·¯ã€‚è¿™æ ·çš„ç”µè·¯æ„ é€ æ–¹å¼å‘¢ï¼Œæˆ‘ä»¬å«ä½œåé¦ˆç”µè·¯ï¼ˆFeedback Circuitï¼‰ã€‚\nä¸Šé¢è¿™ä¸ªåé¦ˆç”µè·¯ä¸€èˆ¬å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªç¤ºæ„å›¾æ¥è¡¨ ç¤ºï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªè¾“å‡ºç»“æœæ¥å›è¾“å…¥çš„åç›¸å™¨ï¼ˆInverterï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„éé—¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è§£å†³å­˜å‚¨é—®é¢˜\næœ‰äº†æ—¶é’Ÿä¿¡å·ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿé‡Œå°±æœ‰äº†ä¸€ä¸ªåƒâ€œè‡ªåŠ¨é—¨â€ä¸€æ ·çš„å¼€å…³ã€‚åˆ©ç”¨è¿™ä¸ªå¼€å…³å’Œç›¸åŒçš„ åé¦ˆç”µè·¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„é€ å‡ºä¸€ä¸ªæœ‰â€œè®°å¿†â€åŠŸèƒ½çš„ç”µè·¯ã€‚\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™ä¸ª RS è§¦å‘å™¨ç”µè·¯ã€‚è¿™ä¸ªç”µè·¯ç”±ä¸¤ä¸ªæˆ–éé—¨ç”µè·¯ç»„æˆã€‚æˆ‘åœ¨å›¾é‡Œé¢ï¼ŒæŠŠå®ƒ æ ‡æˆäº† A å’Œ Bã€‚\næˆ–éé—¨çœŸå€¼è¡¨ï¼š\nNOR 0 1 0 1 0 1 0 0 \u003c!DOCTYPE html\u003e Responsive Image åœ¨è¿™ä¸ªç”µè·¯ä¸€å¼€å§‹ï¼Œè¾“å…¥å¼€å…³éƒ½æ˜¯å…³é—­çš„ï¼Œæ‰€ä»¥æˆ–éé—¨ï¼ˆNORï¼‰A çš„è¾“å…¥æ˜¯ 0 å’Œ 0ã€‚å¯¹ åº”åˆ°æˆ‘åˆ—çš„è¿™ä¸ªçœŸå€¼è¡¨ï¼Œè¾“å‡ºå°±æ˜¯ 1ã€‚è€Œæˆ–éé—¨ B çš„è¾“å…¥æ˜¯ 0 å’Œ A çš„è¾“å‡º 1ï¼Œå¯¹åº”è¾“å‡º å°±æ˜¯ 0ã€‚B çš„è¾“å‡º 0 åé¦ˆåˆ° Aï¼Œå’Œä¹‹å‰çš„è¾“å…¥æ²¡æœ‰å˜åŒ–ï¼ŒA çš„è¾“å‡ºä»ç„¶æ˜¯ 1ã€‚è€Œæ•´ä¸ªç”µ è·¯çš„è¾“å‡º Qï¼Œä¹Ÿå°±æ˜¯ 0ã€‚ å½“æˆ‘ä»¬æŠŠ A å‰é¢çš„å¼€å…³ R åˆä¸Šçš„æ—¶å€™ï¼ŒA çš„è¾“å…¥å˜æˆäº† 1 å’Œ 0ï¼Œè¾“å‡ºå°±å˜æˆäº† 0ï¼Œå¯¹åº” B çš„è¾“å…¥å˜æˆ 0 å’Œ 0ï¼Œè¾“å‡ºå°±å˜æˆäº† 1ã€‚B çš„è¾“å‡º 1 åé¦ˆç»™åˆ°äº† Aï¼ŒA çš„è¾“å…¥å˜æˆäº† 1 å’Œ 1ï¼Œè¾“å‡ºä»ç„¶æ˜¯ 0ã€‚æ‰€ä»¥æŠŠ A çš„å¼€å…³åˆä¸Šä¹‹åï¼Œç”µè·¯ä»ç„¶æ˜¯ç¨³å®šçš„ï¼Œä¸ä¼šåƒæ™¶æŒ¯é‚£æ · æŒ¯è¡ï¼Œä½†æ˜¯æ•´ä¸ªç”µè·¯çš„è¾“å‡º Q å˜æˆäº† 1ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬å†æŠŠ A å‰é¢çš„å¼€å…³ R æ‰“å¼€ï¼ŒA çš„è¾“å…¥å˜æˆå’Œ 1 å’Œ 0ï¼Œè¾“å‡ºè¿˜æ˜¯ 0ï¼Œå¯¹åº”çš„ B çš„è¾“å…¥æ²¡æœ‰å˜åŒ–ï¼Œè¾“å‡ºä¹Ÿè¿˜æ˜¯ 1ã€‚B çš„è¾“å‡º 1 åé¦ˆç»™åˆ°äº† Aï¼ŒA çš„è¾“å…¥å˜æˆäº† 1 å’Œ 0ï¼Œè¾“å‡ºä»ç„¶æ˜¯ 0ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç”µè·¯ä»ç„¶ç¨³å®šã€‚å¼€å…³ R å’Œ S çš„çŠ¶æ€å’Œä¸Šé¢çš„ç¬¬ä¸€æ­¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ€ç»ˆçš„è¾“å‡º Q ä»ç„¶æ˜¯ 1ï¼Œå’Œç¬¬ 1 æ­¥é‡Œ Q çŠ¶æ€æ˜¯ç›¸åçš„ã€‚æˆ‘ä»¬çš„è¾“å…¥å’Œåˆšæ‰ç¬¬äºŒæ­¥çš„å¼€å…³çŠ¶æ€ä¸ä¸€æ ·ï¼Œä½†æ˜¯è¾“å‡ºç»“æœä»ç„¶ä¿ç•™åœ¨äº†ç¬¬ 2 æ­¥æ—¶çš„è¾“å‡ºæ²¡æœ‰å‘ç”Ÿå˜ åŒ–ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œåªæœ‰æˆ‘ä»¬å†å»å…³é—­ä¸‹é¢çš„å¼€å…³ Sï¼Œæ‰å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒB æœ‰ä¸€ä¸ªè¾“å…¥å¿…ç„¶æ˜¯ 1ï¼Œæ‰€ä»¥ B çš„è¾“å‡ºå¿…ç„¶æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯ç”µè·¯çš„æœ€ç»ˆè¾“å‡º Q å¿…ç„¶æ˜¯ 0ã€‚ è¿™æ ·ä¸€ä¸ªç”µè·¯ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè§¦å‘å™¨ï¼ˆFlip-Flopï¼‰ã€‚æ¥é€šå¼€å…³ Rï¼Œè¾“å‡ºå˜ä¸º 1ï¼Œå³ä½¿æ–­å¼€å¼€ å…³ï¼Œè¾“å‡ºè¿˜æ˜¯ 1 ä¸å˜ã€‚æ¥é€šå¼€å…³ Sï¼Œè¾“å‡ºå˜ä¸º 0ï¼Œå³ä½¿æ–­å¼€å¼€å…³ï¼Œè¾“å‡ºä¹Ÿè¿˜æ˜¯ 0ã€‚ä¹Ÿå°±æ˜¯ï¼Œ å½“ä¸¤ä¸ªå¼€å…³éƒ½æ–­å¼€çš„æ—¶å€™ï¼Œæœ€ç»ˆçš„è¾“å‡ºç»“æœï¼Œå–å†³äºä¹‹å‰åŠ¨ä½œçš„è¾“å‡ºç»“æœï¼Œè¿™ä¸ªä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„è®°å¿†åŠŸèƒ½ã€‚\né¢å‘æµæ°´çº¿çš„æŒ‡ä»¤è®¾è®¡ å•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨ ä¸€æ¡ CPU æŒ‡ä»¤çš„æ‰§è¡Œï¼Œæœ‰ä¸‰æ­¥ï¼šå–å¾—æŒ‡ä»¤ï¼Œè¯‘ç ï¼Œæ‰§è¡Œã€‚éœ€è¦ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚è‡ªç„¶è®¾è®¡æŒ‡ä»¤æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›ä¸€æ•´æ¡æŒ‡ä»¤èƒ½åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆã€‚è¿™å°±æ˜¯å•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨ã€‚\nä¸è¿‡ï¼Œæ—¶é’Ÿå‘¨æœŸæ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯æŒ‡ä»¤çš„ç”µè·¯å¤æ‚ç¨‹åº¦æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥å®é™…ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´æ˜¯ä¸åŒçš„ã€‚ä»å‰é¢çš„å­¦ä¹ ä¸­ä¹ŸçŸ¥é“ï¼Œéšç€é—¨ç”µè·¯å±‚æ•°çš„å¢åŠ ï¼Œé—¨å»¶è¿Ÿçš„å­˜åœ¨ï¼Œè®¡ç®—å¤æ‚çš„æŒ‡ä»¤éœ€è¦çš„æ—¶é—´æ›´é•¿ã€‚\nä¸åŒæŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´ä¸åŒï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è®©æ‰€æœ‰æŒ‡ä»¤éƒ½åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆï¼Œé‚£å°±åªå¥½æŠŠæ‰§è¡Œæ—¶é—´æœ€é•¿çš„é‚£ä¸ªæŒ‡ä»¤å’Œæ—¶é’Ÿå‘¨æœŸè®¾æˆä¸€æ ·ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰€ä»¥ï¼Œåœ¨å•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨é‡Œé¢ï¼Œæ— è®ºæ˜¯æ‰§è¡Œä¸€æ¡ç”¨ä¸åˆ° ALU çš„æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼Œè¿˜æ˜¯ä¸€æ¡è®¡ç®—èµ·æ¥ç”µè·¯ç‰¹åˆ«å¤æ‚çš„æµ®ç‚¹æ•°ä¹˜æ³•è¿ç®—ï¼Œæˆ‘ä»¬éƒ½ç­‰è¦ç­‰æ»¡ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚è¿™æ ·æ—¶é’Ÿé¢‘ç‡å°±æ— æ³•æé«˜ï¼Œå› ä¸ºå¤ªé«˜äº†ï¼Œæœ‰äº›å¤æ‚æŒ‡ä»¤æ— æ³•åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…è¿è¡Œå®Œã€‚\nåˆ°è¿™å¯èƒ½å°±æœ‰äººå‘é—®äº†ï¼Œä¹‹å‰ä¸æ˜¯è¯´ä¸€ä¸ª CPU æ—¶é’Ÿå‘¨æœŸï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å®Œæˆä¸€æ¡ç®€å•æŒ‡ä»¤çš„æ—¶é—´ã€‚ä¸ºä»€ä¹ˆå•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨ä¸Šï¼Œå´æˆäº†æ‰§è¡Œä¸€æ¡æœ€å¤æ‚çš„æŒ‡ä»¤çš„æ—¶é—´ï¼Ÿ\nè¿™æ˜¯å› ä¸ºï¼Œæ— è®ºæ˜¯ PC ä¸Šä½¿ç”¨çš„ Intel CPUï¼Œè¿˜æ˜¯æ‰‹æœºä¸Šä½¿ç”¨çš„ ARM CPUï¼Œéƒ½ä¸æ˜¯å•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¸€ç§å«ä½œæŒ‡ä»¤æµæ°´çº¿ï¼ˆInstruction Pipelineï¼‰çš„æŠ€æœ¯ã€‚\næµæ°´çº¿è®¾è®¡ CPU æ‰§è¡ŒæŒ‡ä»¤çš„è¿‡ç¨‹å’Œæˆ‘ä»¬åšé¥­ä¸€æ ·ï¼Œæˆ‘ä»¬ä¸ä¼šç­‰ç±³é¥­è’¸å¥½å†æ´—èœï¼Œä¸ä¼šç­‰è‚‰è…Œå¥½å†åˆ‡èœï¼Œè€Œæ˜¯è’¸é¥­æ—¶ï¼Œå¯ä»¥æ´—èœï¼Œè…Œè‚‰æ—¶å¯ä»¥åˆ‡èœã€‚\nCPU çš„æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œå…¶å®ä¹Ÿæ˜¯ç”±å„ä¸ªç”µè·¯æ¨¡å—ç»„æˆçš„ã€‚æˆ‘ä»¬åœ¨å–æŒ‡ä»¤çš„æ—¶å€™ï¼Œéœ€è¦ä¸€ä¸ªè¯‘ç å™¨æŠŠæ•°æ®ä»å†…å­˜é‡Œé¢å–å‡ºæ¥ï¼Œå†™å…¥åˆ°å¯„å­˜å™¨ä¸­ï¼›åœ¨æŒ‡ä»¤è¯‘ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¦å¤–ä¸€ä¸ªè¯‘ç å™¨ï¼ŒæŠŠæŒ‡ä»¤è§£ææˆå¯¹åº”çš„æ§åˆ¶ä¿¡å·ã€å†…å­˜åœ°å€å’Œæ•°æ®ï¼›åˆ°äº†æŒ‡ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦çš„åˆ™æ˜¯ä¸€ä¸ªå®Œæˆè®¡ç®—å·¥ä½œçš„ ALUã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±ä¸ç”¨æŠŠæ—¶é’Ÿå‘¨æœŸè®¾ç½®æˆæ•´æ¡æŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´ï¼Œè€Œæ˜¯æ‹†åˆ†æˆå®Œæˆè¿™æ ·çš„ä¸€ä¸ªä¸€ä¸ªå°æ­¥éª¤éœ€è¦çš„æ—¶é—´ã€‚åŒæ—¶ï¼Œæ¯ä¸€ä¸ªé˜¶æ®µçš„ç”µè·¯åœ¨å®Œæˆå¯¹åº”çš„ä»»åŠ¡ä¹‹åï¼Œä¹Ÿä¸éœ€è¦ç­‰å¾…æ•´ä¸ªæŒ‡ä»¤æ‰§è¡Œå®Œæˆï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤çš„å¯¹åº”é˜¶æ®µã€‚\nå¦‚æœæˆ‘ä»¬æŠŠä¸€ä¸ªæŒ‡ä»¤æ‹†åˆ†æˆâ€œå–æŒ‡ä»¤ - æŒ‡ä»¤è¯‘ç  - æ‰§è¡ŒæŒ‡ä»¤â€è¿™æ ·ä¸‰ä¸ªéƒ¨åˆ†ï¼Œé‚£è¿™å°±æ˜¯ä¸€ä¸ªä¸‰çº§çš„æµæ°´çº¿ã€‚å¦‚æœæˆ‘ä»¬è¿›ä¸€æ­¥æŠŠâ€œæ‰§è¡ŒæŒ‡ä»¤â€æ‹†åˆ†æˆâ€œALU è®¡ç®—ï¼ˆæŒ‡ä»¤æ‰§è¡Œï¼‰- å†…å­˜è®¿é—® - æ•°æ®å†™å›â€ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå˜æˆä¸€ä¸ªäº”çº§çš„æµæ°´çº¿ã€‚\näº”çº§çš„æµæ°´çº¿ï¼Œå°±è¡¨ç¤ºæˆ‘ä»¬åœ¨åŒä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸé‡Œé¢ï¼ŒåŒæ—¶è¿è¡Œäº”æ¡æŒ‡ä»¤çš„ä¸åŒé˜¶æ®µã€‚è¿™ä¸ªæ—¶å€™ï¼Œè™½ç„¶æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„æ—¶é’Ÿå‘¨æœŸå˜æˆäº† 5ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠ CPU çš„ä¸»é¢‘æå¾—æ›´é«˜äº†ã€‚æˆ‘ä»¬ä¸éœ€è¦ç¡®ä¿æœ€å¤æ‚çš„é‚£æ¡æŒ‡ä»¤åœ¨æ—¶é’Ÿå‘¨æœŸé‡Œé¢æ‰§è¡Œå®Œæˆï¼Œè€Œåªè¦ä¿éšœä¸€ä¸ªæœ€å¤æ‚çš„æµæ°´çº¿çº§çš„æ“ä½œï¼Œåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆå°±å¥½äº†ã€‚\nå¦‚æœæŸä¸€ä¸ªæ“ä½œæ­¥éª¤çš„æ—¶é—´å¤ªé•¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘æŠŠè¿™ä¸ªæ­¥éª¤ï¼Œæ‹†åˆ†æˆæ›´å¤šçš„æ­¥éª¤ï¼Œè®©æ‰€æœ‰æ­¥éª¤éœ€è¦æ‰§è¡Œçš„æ—¶é—´å°½é‡éƒ½å·®ä¸å¤šé•¿ã€‚\næ—¢ç„¶æµæ°´çº¿å¯ä»¥å¢åŠ æˆ‘ä»¬çš„ååç‡ï¼Œä½ å¯èƒ½è¦é—®äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸æŠŠæµæ°´çº¿çº§æ•°åšå¾—æ›´æ·± å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸åšæˆ 20 çº§ï¼Œä¹ƒè‡³ 40 çº§å‘¢ï¼Ÿè¿™ä¸ªå…¶å®æœ‰å¾ˆå¤šåŸå› ï¼Œæˆ‘åœ¨ä¹‹åå‡ è®²é‡Œé¢ä¼šè¯¦ç»†è®²è§£ã€‚è¿™é‡Œï¼Œæˆ‘å…ˆè®²ä¸€ä¸ªæœ€åŸºæœ¬çš„åŸå› ï¼Œå°±æ˜¯å¢åŠ æµæ°´çº¿æ·±åº¦ï¼Œå…¶å®æ˜¯æœ‰æ€§èƒ½æˆæœ¬çš„ã€‚\næˆ‘ä»¬ç”¨æ¥åŒæ­¥æ—¶é’Ÿå‘¨æœŸçš„ï¼Œä¸å†æ˜¯æŒ‡ä»¤çº§åˆ«çš„ï¼Œè€Œæ˜¯æµæ°´çº¿é˜¶æ®µçº§åˆ«çš„ã€‚æ¯ä¸€çº§æµæ°´çº¿å¯¹åº” çš„è¾“å‡ºï¼Œéƒ½è¦æ”¾åˆ°æµæ°´çº¿å¯„å­˜å™¨ï¼ˆPipeline Registerï¼‰é‡Œé¢ï¼Œç„¶ååœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªæµæ°´çº¿çº§å»å¤„ç†ã€‚æ‰€ä»¥ï¼Œæ¯å¢åŠ ä¸€çº§çš„æµæ°´çº¿ï¼Œå°±è¦å¤šä¸€çº§å†™å…¥åˆ°æµæ°´çº¿å¯„å­˜å™¨çš„æ“ä½œã€‚è™½ç„¶æµæ°´çº¿å¯„å­˜å™¨éå¸¸å¿«ï¼Œæ¯”å¦‚åªæœ‰ 20 çš®ç§’ï¼ˆpsï¼Œ10âˆ’12 ç§’ï¼‰ã€‚\nä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ–­åŠ æ·±æµæ°´çº¿ï¼Œè¿™äº›æ“ä½œå æ•´ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´çš„æ¯”ä¾‹å°±ä¼šä¸æ–­å¢åŠ ã€‚æœ€åï¼Œæˆ‘ä»¬çš„æ€§èƒ½ç“¶é¢ˆå°±ä¼šå‡ºç°åœ¨è¿™äº› overhead ä¸Šã€‚å¦‚æœæˆ‘ä»¬æŒ‡ä»¤çš„æ‰§è¡Œæœ‰ 3 çº³ç§’ï¼Œä¹Ÿå°± æ˜¯ 3000 çš®ç§’ã€‚æˆ‘ä»¬éœ€è¦ 20 çº§çš„æµæ°´çº¿ï¼Œé‚£æµæ°´çº¿å¯„å­˜å™¨çš„å†™å…¥å°±éœ€è¦èŠ±è´¹ 400 çš®ç§’ï¼Œå äº†è¶…è¿‡ 10%ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦ 50 çº§æµæ°´çº¿ï¼Œå°±è¦å¤šèŠ±è´¹ 1 çº³ç§’åœ¨æµæ°´çº¿å¯„å­˜å™¨ä¸Šï¼Œå åˆ° 25%ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå•çº¯åœ°å¢åŠ æµæ°´çº¿çº§æ•°ï¼Œä¸ä»…ä¸èƒ½æå‡æ€§èƒ½ï¼Œåè€Œä¼šæœ‰æ›´å¤šçš„ overhead çš„å¼€é”€ã€‚æ‰€ä»¥ï¼Œè®¾è®¡åˆç†çš„æµæ°´çº¿çº§æ•°ä¹Ÿæ˜¯ç°ä»£ CPU ä¸­éå¸¸é‡è¦çš„ä¸€ç‚¹ã€‚\nFPGA/ASIC/TPU FPGA CPU æ˜¯ç”±ç®€å•çš„é—¨ç”µè·¯æ­ç§¯æœ¨ä¸€æ ·æ­å»ºå‡ºæ¥çš„ï¼Œé‚£ä¸€ä¸ª CPU é‡Œæœ‰å¤šå°‘ä¸ªæ™¶ä½“ç®¡è¿™æ ·çš„ç”µè·¯å¼€å…³å‘¢ï¼Ÿä¸€ä¸ªå››æ ¸ i7 çš„ Intel CPUï¼Œæœ‰ 20 äº¿ä¸ªæ™¶ä½“ç®¡ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ª CPUï¼Œå°±è¦æƒ³åŠæ³•è¿æ¥è¿™ 20 äº¿ä¸ªæ™¶ä½“ç®¡ã€‚\nè¿æ¥ä¸€æ¬¡å·²ç»å¾ˆéš¾äº†ï¼Œæˆ‘ä»¬è¿˜è¦æ ¹æ®é—®é¢˜é‡æ–°è°ƒæ•´è¿æ¥ã€‚è®¾è®¡æ›´ç®€å•çš„ç‰¹å®šåŠŸèƒ½çš„èŠ¯ç‰‡ï¼Œå°‘è¯´è¦å‡ ä¸ªæœˆã€‚è€Œè®¾è®¡ä¸€ä¸ª CPU å¾€å¾€ä»¥å¹´è®¡ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¡¬ä»¶å·¥ç¨‹å¸ˆè¦è®¾è®¡ã€éªŒè¯å„ç§å„æ ·çš„æ–¹æ¡ˆï¼Œå¯èƒ½ä¼šé‡åˆ°å„ç§ BUGã€‚å¦‚æœæ¯éªŒè¯ä¸€ä¸ªæ–¹æ¡ˆéƒ½è¦ç”Ÿäº§ä¸€å—èŠ¯ç‰‡ï¼Œè¿™ä»£ä»·å¤ªé«˜äº†ã€‚\næˆ‘ä»¬æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œä¸ç”¨å•ç‹¬åˆ¶é€ ä¸€å—ä¸“é—¨çš„èŠ¯ç‰‡æ¥éªŒè¯ ç¡¬ä»¶è®¾è®¡å‘¢ï¼Ÿèƒ½ä¸èƒ½è®¾è®¡ä¸€ä¸ªç¡¬ä»¶ï¼Œé€šè¿‡ä¸åŒçš„ç¨‹åºä»£ç ï¼Œæ¥æ“ä½œè¿™ä¸ªç¡¬ä»¶ä¹‹å‰çš„ç”µè·¯è¿çº¿ï¼Œé€šè¿‡â€œç¼–ç¨‹â€è®©è¿™ä¸ªç¡¬ä»¶ å˜æˆæˆ‘ä»¬è®¾è®¡çš„ç”µè·¯è¿çº¿çš„èŠ¯ç‰‡å‘¢ï¼Ÿ\nè¿™ä¸ªï¼Œå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦è¯´çš„ FPGAï¼Œä¹Ÿå°±æ˜¯ç°åœºå¯ç¼–ç¨‹é—¨é˜µåˆ—ï¼ˆField-Programmable Gate Arrayï¼‰ã€‚\nP ä»£è¡¨ Programmableï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡ç¼–ç¨‹æ¥æ§åˆ¶çš„ç¡¬ä»¶ã€‚ G ä»£è¡¨ Gateï¼Œå®ƒå°±ä»£è¡¨èŠ¯ç‰‡é‡Œé¢çš„é—¨ç”µè·¯ã€‚æˆ‘ä»¬èƒ½å¤Ÿå»è¿›è¡Œç¼–ç¨‹ç»„åˆçš„å°±æ˜¯è¿™æ ·ä¸€ä¸ªä¸€ä¸ªé—¨ç”µè·¯ã€‚ A ä»£è¡¨çš„ Arrayï¼Œå«ä½œé˜µåˆ—ï¼Œè¯´çš„æ˜¯åœ¨ä¸€å— FPGA ä¸Šï¼Œå¯†å¯†éº»éº»åˆ—äº†å¤§é‡ Gate è¿™æ ·çš„é—¨ç”µè·¯ã€‚ Fï¼Œä¸å¤ªå®¹æ˜“ç†è§£ã€‚å®ƒå…¶å®æ˜¯è¯´ï¼Œä¸€å— FPGA è¿™æ ·çš„æ¿å­ï¼Œå¯ä»¥è¿›è¡Œåœ¨â€œç°åœºâ€å¤šæ¬¡åœ°è¿›è¡Œç¼–ç¨‹ã€‚å®ƒä¸åƒ PALï¼ˆProgrammable Array Logicï¼Œå¯ç¼–ç¨‹é˜µåˆ—é€»è¾‘ï¼‰è¿™æ ·æ›´å¤è€çš„ç¡¬ä»¶è®¾å¤‡ï¼Œåªèƒ½â€œç¼–ç¨‹â€ä¸€æ¬¡ï¼ŒæŠŠé¢„å…ˆå†™å¥½çš„ç¨‹åºä¸€æ¬¡æ€§çƒ§å½•åˆ°ç¡¬ä»¶é‡Œé¢ï¼Œä¹‹åå°±ä¸èƒ½å†ä¿®æ”¹äº†ã€‚ æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼ŒCPU å…¶å®å°±æ˜¯é€šè¿‡æ™¶ä½“ç®¡ï¼Œæ¥å®ç°å„ ç§ç»„åˆé€»è¾‘æˆ–è€…æ—¶åºé€»è¾‘ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆå»â€œç¼–ç¨‹â€è¿æ¥è¿™äº›çº¿è·¯å‘¢ï¼Ÿ\nFPGA çš„è§£å†³æ–¹æ¡ˆåˆ†ä¸‰æ­¥ï¼š\nç¬¬ä¸€ï¼Œç”¨å­˜å‚¨æ¢åŠŸèƒ½å®ç°ç»„åˆé€»è¾‘ã€‚åœ¨å®ç° CPU çš„åŠŸèƒ½çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆå„ç§å„æ ·çš„ç”µè·¯é€»è¾‘ã€‚åœ¨ FPGA é‡Œï¼Œè¿™ äº›åŸºæœ¬çš„ç”µè·¯é€»è¾‘ï¼Œä¸æ˜¯é‡‡ç”¨å¸ƒçº¿è¿æ¥çš„æ–¹å¼è¿›è¡Œçš„ï¼Œè€Œæ˜¯ é¢„å…ˆæ ¹æ®æˆ‘ä»¬åœ¨è½¯ä»¶é‡Œé¢è®¾è®¡çš„é€»è¾‘ç”µè·¯ï¼Œç®—å‡ºå¯¹åº”çš„çœŸå€¼è¡¨ï¼Œç„¶åç›´æ¥å­˜åˆ°ä¸€ä¸ªå«ä½œ LUTï¼ˆLook-Up Tableï¼ŒæŸ¥æ‰¾ è¡¨ï¼‰çš„ç”µè·¯é‡Œé¢ã€‚è¿™ä¸ª LUT å‘¢ï¼Œå…¶å®å°±æ˜¯ä¸€å—å­˜å‚¨ç©ºé—´ï¼Œé‡Œé¢å­˜å‚¨äº†â€œç‰¹å®šçš„è¾“å…¥ä¿¡å·ä¸‹ï¼Œå¯¹åº”è¾“å‡º 0 è¿˜æ˜¯ 1â€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç¬¬äºŒï¼Œå¯¹äºéœ€è¦å®ç°çš„æ—¶åºé€»è¾‘ç”µè·¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ FPGA é‡Œé¢ç›´æ¥æ”¾ä¸Š D è§¦å‘å™¨ï¼Œä½œä¸ºå¯„å­˜å™¨ã€‚è¿™ä¸ªå’Œ CPU é‡Œçš„è§¦å‘å™¨æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨ä¸åŒã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬ä¼šæŠŠå¾ˆå¤šä¸ª LUT çš„ç”µè·¯å’Œå¯„å­˜å™¨ç»„åˆåœ¨ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªå«ä½œé€»è¾‘ç°‡ï¼ˆLogic Clusterï¼‰çš„ä¸œè¥¿ã€‚åœ¨ FPGA é‡Œï¼Œè¿™æ ·ç»„åˆäº†å¤šä¸ª LUT å’Œå¯„ å­˜å™¨çš„è®¾å¤‡ï¼Œä¹Ÿè¢«å«åš CLB Configurable Logic Blockï¼Œå¯é…ç½®é€»è¾‘å—ï¼‰ã€‚\nå¯ä»¥æŠŠ CLB æƒ³è±¡æˆå‡½æ•°æˆ–è€… APIï¼Œè®¾è®¡æ›´å¤æ‚çš„åŠŸèƒ½ï¼Œä¸ç”¨é‡æ–°é€ è½®å­ï¼Œåªéœ€è¦è°ƒç”¨å‡½æ•°æˆ–è€… API å³å¯ã€‚è®¾è®¡èŠ¯ç‰‡ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸ç”¨å†ä»é—¨ç”µè·¯å¼€å§‹æ­å»ºï¼Œå¯ä»¥é€šè¿‡ CLB ç»„åˆæ­å»ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç¬¬ä¸‰ï¼ŒFPGA æ˜¯é€šè¿‡å¯ç¼–ç¨‹é€»è¾‘å¸ƒçº¿ï¼Œæ¥è¿æ¥å„ä¸ªä¸åŒçš„ CLBï¼Œæœ€ç»ˆå®ç°æˆ‘ä»¬æƒ³è¦å®ç°çš„èŠ¯ç‰‡åŠŸèƒ½ã€‚è¿™ä¸ªå¯ç¼–ç¨‹é€»è¾‘å¸ƒçº¿ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“æˆæˆ‘ä»¬çš„é“è·¯ç½‘ã€‚æ•´ä¸ªé“è·¯ç³»ç»Ÿå·²ç»é“º å¥½äº†ï¼Œä½†æ˜¯æ•´ä¸ªé“è·¯ç½‘é‡Œé¢ï¼Œè®¾è®¡äº†å¾ˆå¤šä¸ªé“å²”ã€‚æˆ‘ä»¬å¯ä»¥ é€šè¿‡æ§åˆ¶é“å²”ï¼Œæ¥ç¡®å®šä¸åŒçš„åˆ—è½¦çº¿è·¯ã€‚åœ¨å¯ç¼–ç¨‹é€»è¾‘å¸ƒçº¿ é‡Œé¢ï¼Œâ€œç¼–ç¨‹â€åœ¨åšçš„ï¼Œå°±æ˜¯æ‹¨åŠ¨åƒé“å²”ä¸€æ ·çš„å„ä¸ªç”µè·¯å¼€ å…³ï¼Œæœ€ç»ˆå®ç°ä¸åŒ CLB ä¹‹é—´çš„è¿æ¥ï¼Œå®Œæˆæˆ‘ä»¬æƒ³è¦çš„èŠ¯ç‰‡ åŠŸèƒ½ã€‚\nASIC é™¤äº† CPUï¼ŒGPU ä»¥åŠ FPGAï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ°å¾ˆå¤šå…¶ä»–èŠ¯ç‰‡ï¼Œæ¯”å¦‚é™¤äº†éŸ³è§†é¢‘çš„èŠ¯ç‰‡ï¼Œæˆ–è€…ä¸“é—¨ç”¨æ¥æŒ–çŸ¿çš„èŠ¯ç‰‡ã€‚å°½ç®¡ CPU ä¹Ÿèƒ½å®ç°è¿™äº›åŠŸèƒ½ï¼Œä½†æ˜¯æœ‰ç‚¹å¤§ç‚®æ‰“èšŠå­çš„æ„Ÿè§‰ã€‚\näºæ˜¯é’ˆå¯¹ä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œå•ç‹¬è®¾è®¡ä¸€ä¸ªèŠ¯ç‰‡ï¼Œæˆ‘ä»¬ç§°è¿™äº›èŠ¯ç‰‡ä¸º ASICï¼ˆApplication-Specific Integrated Circuitï¼‰ï¼Œä¸“ç”¨é›†æˆç”µè·¯ã€‚è®¾è®¡ç²¾ç®€ï¼Œåˆ¶é€ æˆæœ¬ä½ã€‚\nå…¶å®æˆ‘ä»¬çš„ FPGA ä¹Ÿèƒ½åš ASIC çš„äº‹æƒ…ï¼Œæ¯æ¬¡å¯¹ FPGA è¿›è¡Œç¼–ç¨‹ï¼Œå°±æ˜¯æŠŠ FPGA ç”µè·¯ç¼–ç¨‹äº†ä¸€ä¸ª ASICã€‚ä½†æ˜¯å¦‚æœå…¨ç”¨ FPGAï¼ŒåŒæ ·ä¼šæµªè´¹ã€‚å› ä¸ºæ¯ä¸€ä¸ª LUT ç”µè·¯ï¼Œéƒ½å¯ä»¥å®ç°ä¸é—¨ä»¥åŠæˆ–é—¨ï¼Œè¿™æ¯”å•çº¯è¿æ­»çš„ä¸é—¨æˆ–è€…æˆ–é—¨ï¼Œç”¨åˆ°çš„æ™¶ä½“ç®¡æ•°é‡è¦å¤šçš„å¤šã€‚è‡ªç„¶åŠŸè€—ä¹Ÿè¦å¤§å¾—å¤šï¼Œå•ç‰‡ FPGA çš„ç”Ÿäº§åˆ¶é€ æˆæœ¬ä¹Ÿæ¯” ASIC è¦é«˜ã€‚\nFPAG ASIC ä¸€æ¬¡æ€§æˆæœ¬ æä½ï¼Œçº¦ç­‰äº 0 é«˜ é‡äº§æˆæœ¬ é«˜ ä½ å»¶è¿Ÿ ä½ ä½ å¼€å‘å‘¨æœŸ çŸ­ é•¿ å¸‚åœºé£é™© ä½ é«˜ å¼€å‘ç¯å¢ƒ è®¾ç½® FPGA éœ€è¦ç¡¬ä»¶çŸ¥è¯†ï¼Œç¼–ç¨‹å’Œé…ç½®é—¨æ§›å¾ˆé«˜ éœ€è¦åº•å±‚ç¡¬ä»¶å˜æˆï¼Œå¼€å‘éš¾åº¦å¾ˆé«˜ TPU TPUï¼ˆTensor Processing Unitï¼‰å¼ é‡å¤„ç†å™¨ï¼›\n","permalink":"https://lifeislife.cn/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%A4%84%E7%90%86%E5%99%A8/","summary":"\u003ch2 id=\"å»ºç«‹æ•°æ®é€šè·¯æŒ‡ä»¤--è¿ç®—cpu\"\u003eå»ºç«‹æ•°æ®é€šè·¯ï¼šæŒ‡ä»¤ + è¿ç®—=CPU\u003c/h2\u003e\n\u003cp\u003eæŒ‡ä»¤å‘¨æœŸ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFetchï¼ˆå–å¾—æŒ‡ä»¤ï¼‰ï¼šä»å†…å­˜é‡ŒæŠŠæŒ‡ä»¤åŠ è½½åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­ã€‚\u003c/li\u003e\n\u003cli\u003eDecodeï¼ˆæŒ‡ä»¤è¯‘ç ï¼‰\u003c/li\u003e\n\u003cli\u003eExecuteï¼ˆæ‰§è¡ŒæŒ‡ä»¤ï¼‰\né‡å¤æ“ä½œè¿™ä¸‰æ­¥ï¼Œè¿™ä¸ªå¾ªç¯ç§°ä¸ºæŒ‡ä»¤å‘¨æœŸã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸åŒçš„æ­¥éª¤åœ¨ä¸åŒç»„ä»¶å†…å®Œæˆ\n\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202205011556148.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202205011556148.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"è®¡ç®—æœºç»„æˆåŸç†-å¤„ç†å™¨"},{"content":"Gitee å›¾åºŠæŒ‚äº†ï¼Œä½†æ˜¯å„å¤§äº‘æœåŠ¡å‚å•†æä¾›çš„å¯¹è±¡å­˜å‚¨æœåŠ¡å…è´¹é¢åº¦ï¼Œå¯¹äºä¸ªäººå°åšå®¢æ¥è¯´ä¹Ÿå¤Ÿç”¨äº†ã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•å°†å›¾åºŠæ›´æ¢ä¸ºè…¾è®¯äº‘ COSã€‚\nä¸‹è½½åŸæœ‰å›¾ç‰‡ ä»giteeä¸‹è½½æ•´ä¸ªä»“åº“ã€‚ä¿æŒåŸæœ‰ç›®å½•ç»“æ„ã€‚\né…ç½®è…¾è®¯äº‘ COS æ³¨å†Œè…¾è®¯äº‘è´¦å·ï¼Œåˆ›å»º COS å­˜å‚¨æ¡¶ï¼Œé€‰æ‹©å…¬æœ‰è¯»ç§æœ‰å†™ã€‚åˆ›å»º COS å­˜å‚¨æ¡¶åœ°å€ï¼šhttps://console.cloud.tencent.com/cosï¼Œåˆ›å»ºå­˜å‚¨æ¡¶åå¯ä»¥åœ¨å­˜å‚¨æ¡¶é‡Œæ‰“å¼€é˜²ç›—é“¾è®¾ç½®ã€‚\nåˆ›å»ºæ¡¶\u0026ndash;é€‰æ‹©åœ°åŸŸ\u0026ndash;å¡«å†™åç§°\u0026ndash;é€‰æ‹©å…¬æœ‰è¯»ç§æœ‰å†™\u0026ndash;ç‚¹å‡»åˆ›å»ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœå¿˜äº†è®¾ç½®è¯»å†™æƒé™å¯ä»¥æŒ‰ä¸€ä¸‹æ–¹æ³•è®¾ç½®ï¼› \u003c!DOCTYPE html\u003e Responsive Image é€‰æ‹©èœå•\u0026ndash;æ–‡ä»¶åˆ—è¡¨ã€‚ä¸Šä¼ ä¸‹è½½å¥½çš„æ–‡ä»¶å¤¹ï¼ˆæ•´ä¸ªä»“åº“çš„æ–‡ä»¶å¤¹ï¼‰ã€‚é¼ æ ‡æ”¾åˆ°é€‰æ‹©æ–‡ä»¶å‡ºç°ä¸Šä¼ æ–‡ä»¶å¤¹é€‰é¡¹ï¼Œæˆ–è€…å°†æ–‡ä»¶å¤¹æ‹–å…¥æµè§ˆå™¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½® Picgo \u003c!DOCTYPE html\u003e Responsive Image COS ç‰ˆæœ¬ï¼šV5 è®¾å®š Secreidï¼Œè®¾å®š Secrekeyï¼Œè®¾å®š APPIDï¼š APPIDã€SecretID ä¸ SecretKey ç‚¹æ­¤ç›´è¾¾è·å–ã€‚ é€‰æ‹©ç»§ç»­ä½¿ç”¨\u0026ndash;åˆ›å»ºç§˜é’¥ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image è®¾å®šå­˜å‚¨ç©ºé—´åï¼Œè®¾å®šå­˜å‚¨åŒºåŸŸï¼š ç‚¹æ­¤è·å–å­˜å‚¨ç©ºé—´åä»¥åŠå­˜å‚¨åŒºåŸŸã€‚æ¡¶åç§°å³å­˜å‚¨ç©ºé—´åï¼Œæ‰€å±åŒºåŸŸï¼šap-shanghaiå³ç¡®è®¤å­˜å‚¨åŒºåŸŸã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æŒ‡å®šå­˜å‚¨åŒºåŸŸï¼š æŒ‡å®šä¸Šä¼ åˆ° COS çš„ç›®å½•ï¼Œæ¯”å¦‚æˆ‘åŸå…ˆä»giteeä¸‹è½½æ¥çš„å›¾åºŠçš„ä»“åº“åæ˜¯markdown_picbedï¼Œå›¾ç‰‡åˆä¿å­˜åœ¨markdown_picbed/imgç›®å½•ä¸‹ï¼Œé‚£ä¹ˆå°±æŒ‡å®šmarkdown_picbed/imgç›®å½•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ›¿æ¢æ—§å›¾åºŠ URL VSCode å…¨å±€æ›¿æ¢ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E6%9B%BF%E6%8D%A2gitee%E5%9B%BE%E5%BA%8A%E4%B8%BA%E8%85%BE%E8%AE%AF%E4%BA%91cos/","summary":"\u003cp\u003e\u003ca href=\"https://cloud.tencent.com/developer/article/1964208\"\u003eGitee å›¾åºŠæŒ‚äº†\u003c/a\u003eï¼Œä½†æ˜¯å„å¤§äº‘æœåŠ¡å‚å•†æä¾›çš„å¯¹è±¡å­˜å‚¨æœåŠ¡å…è´¹é¢åº¦ï¼Œå¯¹äºä¸ªäººå°åšå®¢æ¥è¯´ä¹Ÿå¤Ÿç”¨äº†ã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•å°†å›¾åºŠæ›´æ¢ä¸ºè…¾è®¯äº‘ COSã€‚\u003c/p\u003e\n\u003ch2 id=\"ä¸‹è½½åŸæœ‰å›¾ç‰‡\"\u003eä¸‹è½½åŸæœ‰å›¾ç‰‡\u003c/h2\u003e\n\u003cp\u003eä»\u003ccode\u003egitee\u003c/code\u003eä¸‹è½½æ•´ä¸ªä»“åº“ã€‚ä¿æŒåŸæœ‰ç›®å½•ç»“æ„ã€‚\u003c/p\u003e","title":"æ›¿æ¢ Gitee å›¾åºŠä¸ºè…¾è®¯äº‘ COS"},{"content":"é™æ€é“¾æ¥ åº“æ˜¯ä¸€ç»„ç›®æ ‡æ–‡ä»¶çš„åŒ…ï¼Œå°±æ˜¯ä¸€äº›å¸¸ç”¨çš„ä»£ç ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶åæ‰“åŒ…å­˜æ”¾ã€‚\nç¬¬ä¸‰ç«  ç›®æ ‡æ–‡ä»¶é‡Œæœ‰ä»€ä¹ˆ ç›®æ ‡æ–‡ä»¶çš„æ ¼å¼ ç›®æ ‡æ–‡ä»¶ä»ç»“æ„ä¸Šè®²ï¼Œå®ƒæ˜¯å·²ç»ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œåªæ˜¯è¿˜æ²¡æœ‰ç»è¿‡é“¾æ¥çš„è¿‡ç¨‹ï¼Œå…¶ä¸­å¯èƒ½æœ‰äº›ç¬¦å·æˆ–è€…æœ‰äº›åœ°å€è¿˜æ²¡æœ‰è¢«è°ƒæ•´ã€‚\nç°åœ¨ PC å¹³å°æµå½¢çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œä¸»è¦æ˜¯ Windows ä¸‹çš„ PEï¼ˆPortable Executableï¼‰å’Œ Linux ä¸‹çš„ ELFï¼ˆExecutable Linkable Formatï¼‰,å®ƒä»¬éƒ½æ˜¯ COFFï¼ˆCommon file formatï¼‰æ ¼å¼çš„å˜ç§ã€‚\næŒ‡ä»¤å’Œæ•°æ®åˆ†å¼€å­˜æ”¾çš„å¥½å¤„ï¼š\nä¸€æ–¹é¢å½“ç¨‹åºè¢«è£…è½½åï¼Œæ•°æ®å’ŒæŒ‡ä»¤åˆ†åˆ«è¢«æ˜ å°„åˆ°ä¸¤ä¸ªè™šå­˜åŒºåŸŸã€‚ç”±äºæ•°æ®åŒºåŸŸå¯¹äºè¿›ç¨‹æ¥è¯´æ˜¯å¯è¯»å†™çš„ï¼Œè€ŒæŒ‡ä»¤åŒºåŸŸå¯¹äºè¿›ç¨‹æ¥è¯´æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªè™šå­˜åŒºåŸŸçš„æƒé™å¯ä»¥è¢«è®¾ç½®æˆå¯è¯»å†™å’Œåªè¯»ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢ç¨‹åºçš„æŒ‡ä»¤è¢«æœ‰æ„æˆ–æ— æ„åœ°æ”¹å†™ã€‚\nå¦ä¸€æ–¹é¢æ˜¯ç°ä»£ CPU æœ‰å¼ºå¤§çš„ç¼“å­˜ä½“ç³»ï¼Œç”±äºç¼“å­˜å¾ˆé‡è¦ï¼Œæ‰€ä»¥ç¨‹åºå¿…é¡»å°½é‡æé«˜ç¼“å­˜å‘½ä¸­ç‡ã€‚æŒ‡ä»¤åŒºå’Œæ•°æ®åŒºåˆ†ç¦»æœ‰åˆ©äºæé«˜ç¨‹åºçš„å±€éƒ¨æ€§ã€‚ç°ä»£ CPU çš„ç¼“å­˜ä¸€èˆ¬éƒ½è¢«è®¾è®¡æˆæ•°æ®ç¼“å­˜å’ŒæŒ‡ä»¤ç¼“å­˜ï¼Œæ‰€ä»¥ç¨‹åºçš„æŒ‡ä»¤å’Œæ•°æ®åˆ†å¼€å­˜æ”¾å¯¹äº CPU çš„ç¼“å­˜å‘½ä¸­ç‡æé«˜æœ‰å¥½å¤„ã€‚\nç¬¬ä¸‰ä¸ªåŸå› ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„åŸå› ï¼Œå°±æ˜¯å½“ç³»ç»Ÿä¸­è¿è¡Œç€å¤šä¸ªè¯¥è¿›ç¨‹å‰¯æœ¬æ—¶ï¼Œä»–ä»¬çš„æŒ‡ä»¤éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å†…å­˜ä¸­åªéœ€è¦ä¿å­˜ä¸€ä»½ç¨‹åºçš„æŒ‡ä»¤éƒ¨åˆ†ã€‚\nçœŸæ­£äº†ç‰›é€¼çš„ç¨‹åºå‘˜å¯¹è‡ªå·±çš„ç¨‹åºæ¯ä¸€ä¸ªå­—èŠ‚éƒ½äº†å¦‚æŒ‡æŒã€‚\nobjdump -h SimpleSsection.o # æ‰“å°elfæ–‡ä»¶å„ä¸ªæ®µçš„ä¿¡æ¯ size SimpleSsection.o # æŸ¥çœ‹elfæ–‡ä»¶å„ä¸ªæ®µçš„é•¿åº¦ objdump -s -d SimpleSsection.o # -så°†æ‰€æœ‰æ®µå†…å®¹ä»¥åå…­è¿›åˆ¶æ‰“å°ï¼Œ-då°†æ‰€æœ‰åŒ…å«æŒ‡ä»¤çš„æ®µåæ±‡ç¼– æ®µåç§° å†…å®¹ .data - åˆå§‹åŒ–çš„å…¨å±€å˜é‡ - å±€éƒ¨é™æ€å˜é‡ .rodata åªè¯»æ•°æ®æ®µï¼Œå¯¹è¿™ä¸ªæ®µçš„ä»»ä½•ä¿®æ”¹éƒ½æ˜¯éæ³•çš„ï¼Œä¿è¯äº†ç¨‹åºçš„å®‰å…¨æ€§ã€‚ æœ‰æ—¶å€™ç¼–è¯‘å™¨ä¼šæŠŠå­—ç¬¦ä¸²æ”¾åˆ° data æ®µ\n- åªè¯»å˜é‡ const ä¿®é¥° - å­—ç¬¦ä¸²å¸¸é‡ .bss ä¸å ç£ç›˜ç©ºé—´ï¼Œ - æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ - æœªåˆå§‹åŒ–çš„å±€éƒ¨é™æ€å˜é‡ - åˆå§‹åŒ–ä¸º 0 çš„é™æ€å˜é‡ .comment å­˜æ”¾ç¼–è¯‘å™¨ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²â€œGCCï¼šï¼ˆGNUï¼‰4.2.0â€ .line è°ƒè¯•æ—¶çš„è¡Œå·è¡¨ï¼Œå³æºä»£ç è¡Œå·ä¸ç¼–è¯‘åæŒ‡ä»¤çš„å¯¹åº”è¡¨ .note é¢å¤–çš„ç¼–è¯‘å™¨ä¿¡æ¯ï¼Œå¦‚ç¨‹åºå…¬å¸åï¼Œç‰ˆæœ¬å· .symtab Symbol Table ç¬¦å·è¡¨ .plt åŠ¨æ€é“¾æ¥çš„è·³è½¬è¡¨ .got åŠ¨æ€é“¾æ¥çš„å…¨å±€å…¥å£è¡¨ æ®µåç§°éƒ½æ˜¯.å‰ç¼€ï¼Œè¡¨ç¤ºè¿™äº›è¡¨åå­—æ˜¯ç³»ç»Ÿä¿ç•™çš„ï¼Œåº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›éç³»ç»Ÿä¿ç•™çš„åå­—ä½œä¸ºæ®µåç§°ã€‚æ¯”å¦‚å¯ä»¥åŠ å…¥ä¸€ä¸ªmusicæ®µï¼Œé‡Œé¢å­˜ä¸€é¦– mp3 éŸ³ä¹ï¼Œè¿è¡Œèµ·æ¥åå°±ä¼šæ’­æ”¾éŸ³ä¹ï¼Œæ‰“ç®—è‡ªå®šä¹‰æ®µä¸èƒ½ä½¿ç”¨.ä½œä¸ºå‰ç¼€ï¼Œä»¥å…ä¸ç³»ç»Ÿä¿ç•™æ®µåå†²çªã€‚\nQ: å¦‚ä½•å°†ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ï¼ŒMP3 æ–‡ä»¶ä½œä¸ºç›®æ ‡æ–‡ä»¶çš„ä¸€ä¸ªæ®µï¼Ÿ A: å¯ä»¥ä½¿ç”¨ objcopy å·¥å…·ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªå›¾ç‰‡ image..jpgï¼Œå¤§å°ä¸º 0x2100 å­—èŠ‚ï¼š $ objcopy -I binary -O elf32-i388 -B i38 image.jpg image.o\næ­£å¸¸æƒ…å†µä¸‹ç¼–è¯‘å‡ºæ¥çš„ç›®æ ‡æ–‡ä»¶ï¼Œä»£ç ä¼šæ”¾åˆ°.textæ®µï¼Œä½†æ˜¯æœ‰æ—¶å€™ä½ å¸Œæœ›å˜é‡æˆ–è€…æŸäº›ä»£ç èƒ½æ”¾åˆ°ä½ æŒ‡å®šçš„æ®µä¸­å»ï¼Œä»¥å®ç°æŸäº›ç‰¹å®šçš„åŠŸèƒ½ã€‚æ¯”å¦‚ä¸ºäº†æ»¡è¶³æŸäº›ç¡¬ä»¶çš„å†…å­˜å’Œ IO åœ°å€å¸ƒå±€ã€‚GCC æä¾›äº†æ‰©å±•æœºåˆ¶ï¼Œä½¿å¾—ç¨‹åºå‘˜å¯ä»¥æŒ‡å®šå˜é‡æ‰€å¤„çš„æ®µï¼š\n__attribute__((section(\u0026#34;FOO\u0026#34;))) int global = 42; __attribute__((section(\u0026#34;BAR\u0026#34;))) void foo; ELF æ–‡ä»¶ç»“æ„ ä½¿ç”¨readelfå‘½ä»¤æŸ¥çœ‹ elf æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ã€‚\nELF é­”æ•°ï¼Œç¡®è®¤æ–‡ä»¶ç±»å‹ã€‚\næ–‡ä»¶ç±»å‹\nå¸¸é‡ å€¼ å«ä¹‰ ET_REL 1 å¯é‡å®šä½æ–‡ä»¶ï¼Œä¸€èˆ¬é—®.oæ–‡ä»¶ ET_EXEC 2 å¯æ‰§è¡Œæ–‡ä»¶ ET_DYN 3 å…±äº«ç›®æ ‡æ–‡ä»¶ï¼Œä¸€èˆ¬ä¸º.soæ–‡ä»¶ æœºå™¨ç±»å‹\nå¸¸é‡ å€¼ å«ä¹‰ EM_M32 1 AT\u0026amp;T WE 32100 EM_SPARC 2 SPARC EM_M386 3 Intel x86 EM_68K 4 Motorola 68000 EM_88K 5 Motorola 88000 EM_860 6 Intel 80860 æ®µè¡¨æ˜¯ä¿å­˜å„ä¸ªæ®µçš„åŸºæœ¬å±æ€§çš„ç»“æ„ã€‚æ®µè¡¨æ˜¯é™¤æ–‡ä»¶å¤´å¤–æœ€é‡è¦çš„ç»“æ„ã€‚ç¼–è¯‘å™¨ï¼Œé“¾æ¥å™¨å’Œè£…è½½å™¨éƒ½æ˜¯ä¾é æ®µè¡¨æ¥å®šä½å’Œè®¿é—®å„ä¸ªæ®µçš„å±æ€§ã€‚\né“¾æ¥çš„æ¥å£ - ç¬¦å· ç¬¦å·è¡¨ç»“æ„ é“¾æ¥è¿‡ç¨‹çš„æœ¬è´¨å°±æ˜¯è¦æŠŠå¤šä¸ªä¸åŒçš„ç›®æ ‡æ–‡ä»¶ä¹‹é—´ç›¸äº’ç²˜åˆ°ä¸€èµ·ã€‚\nç›®æ ‡æ–‡ä»¶ B è¦ç”¨åˆ°ç›®æ ‡æ–‡ä»¶ A çš„å‡½æ•°fooï¼Œæˆ‘ä»¬ç§°ç›®æ ‡æ–‡ä»¶ Aå®šä¹‰äº†å‡½æ•°fooï¼Œç›®æ ‡æ–‡ä»¶ Bå¼•ç”¨äº†ç›®æ ‡æ–‡ä»¶ A çš„å‡½æ•°fooã€‚\né“¾æ¥ä¸­ï¼Œæˆ‘ä»¬å°†å‡½æ•°å’Œå˜é‡ç»Ÿç§°ä¸ºç¬¦å·ï¼Œå‡½æ•°åæˆ–å˜é‡åå°±æ˜¯ç¬¦å·åã€‚ã€\næ¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªç›¸åº”çš„ç¬¦å·è¡¨ï¼Œè¡¨é‡Œè®°å½•äº†ç›®æ ‡æ–‡ä»¶ä¸­æ‰€ç”¨åˆ°çš„æ‰€æœ‰ç¬¦å·ã€‚æ¯ä¸ªç¬¦å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”å€¼ï¼Œå«ç¬¦å·å€¼ï¼Œå¯¹äºå˜é‡å’Œå‡½æ•°æ¥è¯´ï¼Œç¬¦å·å€¼å°±æ˜¯ä»–ä»¬çš„åœ°å€ã€‚\nç¬¦å·ç±»å‹ï¼š\nå®šä¹‰åœ¨æœ¬ç›®æ ‡æ–‡ä»¶çš„å…¨å±€ç¬¦å·ï¼Œå¯ä»¥è¢«å…¶ä»–ç›®æ ‡å¼•ç”¨ã€‚ åœ¨æœ¬ç›®æ ‡æ–‡ä»¶ä¸­åº”ç”¨çš„å…¨å±€ç¬¦å·ï¼Œå´æ²¡æœ‰å®šä¹‰åœ¨æœ¬ç›®æ ‡æ–‡ä»¶ã€‚ æ®µåç§°ï¼Œä¹Ÿå°±æ˜¯æ®µèµ·å§‹åœ°å€ã€‚ å±€éƒ¨ç¬¦å·ï¼Œä¸€äº›é™æ€å˜é‡ç­‰ã€‚ è¡Œå·ä¿¡æ¯ã€‚ æœ€é‡è¦çš„å°±æ˜¯ç¬¬ä¸€ç±»å’Œç¬¬äºŒç±»ã€‚é“¾æ¥åªå…³å¿ƒå…¨å±€ç¬¦å·çš„ç›¸äº’ç²˜åˆï¼Œå…¶ä»–éƒ½æ˜¯æ¬¡è¦çš„ã€‚\nå¯ä»¥ä½¿ç”¨ readelf objdump nmç­‰å‘½ä»¤æŸ¥çœ‹ç¬¦å·ä¿¡æ¯ã€‚\nç‰¹æ®Šç¬¦å· ä¸€äº›ç‰¹æ®Šç¬¦å·ï¼Œæ²¡æœ‰åœ¨ç¨‹åºä¸­å®šä¹‰ï¼Œä½†æ˜¯å¯ä»¥ç›´æ¥å£°æ˜å¹¶å¼•ç”¨å®ƒï¼š\n__executable_startï¼Œç¨‹åºèµ·å§‹åœ°å€ï¼Œä¸æ˜¯å…¥å£åœ°å€ï¼Œæ˜¯ç¨‹åºæœ€å¼€å§‹çš„åœ°å€ã€‚ __etext __etext etext ä»£ç æ®µç»“æŸåœ°å€ï¼Œä»£ç æ®µæœ€æœ«å°¾çš„åœ°å€ã€‚ _edata edata æ•°æ®æ®µç»“æŸåœ°å€ï¼Œæ•°æ®æ®µæœ€æœ«å°¾åœ°å€ã€‚ __end end ç¨‹åºç»“æŸåœ°å€ã€‚ ç¬¦å·ä¿®é¥° ç¬¦å·åº”ä¸å¯¹åº”çš„å‡½æ•°æˆ–è€…å˜é‡åŒåï¼Œä½†æ˜¯åœ¨ C è¯­è¨€å‘æ˜æ—¶ï¼Œå·²ç»å­˜åœ¨äº†å¾ˆå¤šåº“å’Œç›®æ ‡æ–‡ä»¶ï¼Œå¦‚æœå†ç”¨ä¸€æ ·çš„å‡½æ•°æˆ–å˜é‡å°±ä¼šå†²çªä¸ºäº†é¿å…å†²çªï¼ŒC è¯­è¨€ç¼–è¯‘åç¬¦å·åå‰ä¼šåŠ ä¸Šä¸‹åˆ’çº¿_ï¼Œå¦‚fooå˜æˆ_fooï¼ŒFortran è¯­è¨€ç¼–è¯‘åä¼šåœ¨ç¬¦å·å‰ååŠ ä¸Šä¸‹åˆ’çº¿_foo_ã€‚\nC++å…·æœ‰ç±»ï¼Œç»§æ‰¿ï¼Œé‡è½½ç­‰å¤æ‚æœºåˆ¶ï¼Œä¸ºäº†æ”¯æŒè¿™äº›å¤æ‚ç‰¹æ€§ï¼Œäººä»¬å‘æ˜äº†ç¬¦å·ä¿®é¥°å’Œç¬¦å·æ”¹ç¼–ã€‚\nå‡½æ•°ç­¾ååŒ…å«äº†ä¸€ä¸ªå‡½æ•°çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‡½æ•°åï¼Œå‚æ•°ç±»å‹ï¼Œæ‰€åœ¨ç±»å’Œåç§°ç©ºé—´ç­‰ä¿¡æ¯ã€‚å®ƒç”¨äºè¯†åˆ«ä¸åŒçš„å‡½æ•°ã€‚åœ¨ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨å¤„ç†ç¬¦å·æ—¶ï¼Œä½¿ç”¨æŸç§åç§°ä¿®é¥°çš„æ–¹æ³•ï¼Œæ˜¯çš„æ¯ä¸ªå‡½æ•°ç­¾åå¯¹åº”ä¸€ä¸ªä¿®é¥°ååç§°ã€‚\nç”±äºä¸åŒçš„ç¼–è¯‘å™¨é‡‡ç”¨ä¸åŒçš„åå­—ä¿®é¥°æ–¹å¼ï¼Œå¿…ç„¶å¯¼è‡´ç”±ä¸åŒç¼–è¯‘å™¨ç¼–è¯‘äº§ç”Ÿçš„ç›®æ ‡æ–‡ä»¶æ— æ³•æ­£å¸¸äº’ç›¸é“¾æ¥ï¼Œè¿™æ˜¯å¯¼è‡´ä¸åŒç¼–è¯‘å™¨ä¹‹é—´ä¸èƒ½äº’æ“ä½œçš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚\nextern C C++ä¸ºäº†å…¼å®¹ Cï¼ŒC++ç¼–è¯‘å™¨ä¼šå°†åœ¨extern C çš„å¤§æ‹¬å·å†…éƒ¨çš„ä»£ç å½“åš C è¯­è¨€ä»£ç å¤„ç†ï¼Œè¿™æ ·å°±ä¸ä¼šä½¿ç”¨ C++çš„åç§°ä¿®é¥°æœºåˆ¶ã€‚ï¼ˆä¹Ÿå°±ä¸ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Šä¸‹åˆ’çº¿ï¼‰\nä½†æ˜¯ C è¯­è¨€å¹¶ä¸æ”¯æŒextern Cå…³é”®å­—ï¼Œåˆä¸èƒ½ä¸ºåŒä¸€ä¸ªåº“å‡½æ•°å†™ä¸¤å¥—å¤´æ–‡ä»¶ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨ C++çš„å®ï¼Œ__cplusplusã€‚C++ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘ C++çš„ç¨‹åºæ—¶é»˜è®¤å®šä¹‰è¿™ä¸ªå®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¡ä»¶å®æ¥åˆ¤æ–­å½“å‰ç¼–è¯‘å•å…ƒæ˜¯ä¸æ˜¯ C++ä»£ç ã€‚\n#ifdef __cplusplus extern \u0026#34;C\u0026#34; { #endif void *memset(void *, int , size_t); #ifdef __cplusplus } #endif å¼±ç¬¦å·ä¸å¼ºç¬¦å· æˆ‘ä»¬ç»å¸¸ç¢°åˆ°ç¬¦å·é‡å®šä¹‰ï¼Œå¤šä¸ªç›®æ ‡æ–‡ä»¶ä¸­å«æœ‰ç›¸åŒåå­—å…¨å±€ç¬¦å·çš„å®šä¹‰ï¼Œé‚£ä¹ˆè¿™äº›ç›®æ ‡æ–‡ä»¶é“¾æ¥çš„æ—¶å€™å°±ä¼šå‡ºç°ç¬¦å·é‡å®šä¹‰çš„é”™è¯¯ã€‚æ¯”å¦‚åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­å®šä¹‰äº†ç›¸åŒçš„å…¨å±€å˜é‡ã€‚\nå¯¹äºC/C++æ¥è¯´ï¼Œç¼–è¯‘å™¨é»˜è®¤å‡½æ•°å’Œåˆå§‹åŒ–äº†çš„å…¨å±€å˜é‡ä¸ºå¼ºç¬¦å·ï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¸ºå¼±ç¬¦å·ã€‚\nä¹Ÿå¯ä»¥ä½¿ç”¨ GCC çš„__attribute__((weak))æ¥å®šä¹‰ä»»ä½•ä¸€ä¸ªå¼ºç¬¦å·ä¸ºå¼±ç¬¦å·ã€‚\nä¸å…è®¸å¼ºç¬¦å·è¢«å¤šæ¬¡å®šä¹‰ï¼Œå¦‚æœå¤šæ¬¡å®šä¹‰ï¼Œåˆ™é“¾æ¥å™¨æŠ¥é‡å¤å®šä¹‰é”™è¯¯ï¼› å¦‚æœä¸€ä¸ªç¬¦å·åœ¨æŸæ–‡ä»¶ä¸­æ˜¯å¼ºç¬¦å·ï¼Œåœ¨å…¶ä»–æ–‡ä»¶ä¸­éƒ½æ˜¯å¼±ç¬¦å·ï¼Œé‚£ä¹ˆé€‰æ‹©å¼ºç¬¦å·ã€‚ å¦‚æœä¸€ä¸ªç¬¦å·åœ¨æ‰€æœ‰ç›®æ ‡æ–‡ä»¶ä¸­éƒ½æ˜¯å¼±ç¬¦å·ï¼Œé‚£ä¹ˆé€‰æ‹©å…¶ä¸­å ç”¨ç©ºé—´æœ€å¤§çš„ä¸€ä¸ªã€‚ ç¬¬å››ç«  é™æ€é“¾æ¥ ç©ºé—´åœ°å€åˆ†é… å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ä»£ç æ®µå’Œæ•°æ®æ®µå°±æ˜¯å¤šä¸ªæ–‡ä»¶åˆå¹¶è€Œæ¥çš„ï¼Œå¯¹äºå¤šä¸ªæ–‡ä»¶é“¾æ¥å™¨å¦‚ä½•å°†å®ƒä»¬åˆå¹¶åˆ°è¾“å‡ºæ–‡ä»¶ï¼Ÿ\næŒ‰åºå åŠ ï¼šæœ€ç®€å•çš„æ–¹å¼ï¼ŒæŒ‰ç…§è¾“å…¥æ–‡ä»¶é¡ºåºä¾æ¬¡åˆå¹¶ã€‚è¿™ä¼šå¯¼è‡´å¤§é‡ç¢ç‰‡ï¼Œæ¯”å¦‚ x86 çš„ç¡¬ä»¶ï¼Œæ®µçš„è£…è½½åœ°å€å’Œç©ºé—´çš„å¯¹é½å•ä½æ˜¯é¡µï¼Œä¹Ÿå°±æ˜¯ 4096 å­—èŠ‚ï¼Œé‚£ä¹ˆå¦‚æœä¸€ä¸ªæ®µçš„é•¿åº¦åªæœ‰ 1 å­—èŠ‚ï¼Œå®ƒåœ¨å†…å­˜é‡Œä¹Ÿè¦å ç”¨ 4096 å­—èŠ‚ã€‚\nç›¸ä¼¼æ®µåˆå¹¶ï¼šå°†æ‰€æœ‰ç›¸åŒæ€§è´¨çš„æ®µåˆå¹¶åœ¨ä¸€èµ·ã€‚\nç°åœ¨çš„é“¾æ¥å™¨åŸºæœ¬ä¸Šé‡‡ç”¨ç¬¬äºŒç§ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•çš„é“¾æ¥å™¨éƒ½é‡‡ç”¨ä¸€ç§å«ä¸¤æ­¥é“¾æ¥çš„æ–¹æ³•ã€‚\nç¬¬ä¸€æ­¥ï¼Œç©ºé—´ä¸åœ°å€åˆ†é…ã€‚æ‰«ææ‰€æœ‰çš„è¾“å…¥ç›®æ ‡æ–‡ä»¶ï¼Œå¹¶ä¸”è·å¾—å„ä¸ªæ®µçš„é•¿åº¦ï¼Œå±æ€§å’Œä½ç½®ï¼Œå¹¶å°†è¾“å…¥ç›®æ ‡æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨æ‰€æœ‰çš„ç¬¦å·å®šä¹‰å’Œç¬¦å·å¼•ç”¨æ”¶é›†èµ·æ¥ï¼Œç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªå…¨å±€ç¬¦å·è¡¨ã€‚è¿™ä¸€æ­¥ï¼Œé“¾æ¥å™¨å°†èƒ½å¤Ÿè·å¾—æ‰€æœ‰è¾“å…¥ç›®æ ‡æ–‡ä»¶çš„æ®µé•¿åº¦ï¼Œå¹¶ä¸”å°†ä»–ä»¬åˆå¹¶ï¼Œè®¡ç®—å‡ºè¾“å‡ºæ–‡ä»¶ä¸­å„ä¸ªæ®µåˆå¹¶åçš„é•¿åº¦å’Œä½ç½®ï¼Œå¹¶å»ºç«‹æ˜ å°„å…³ç³»ã€‚\nç¬¬äºŒéƒ¨ï¼Œç¬¦å·è§£æä¸é‡å®šä½ã€‚ä½¿ç”¨ä¸Šé¢æ”¶é›†åˆ°çš„ä¿¡æ¯ï¼Œè¯»å–è¾“å…¥æ–‡ä»¶ä¸­æ®µçš„æ•°æ®ï¼Œé‡å®šä½ä¿¡æ¯ã€‚å¹¶ä¸”è¿›è¡Œç¬¦å·è§£æä¸é‡å®šä½ï¼Œè°ƒæ•´ä»£ç ä¸­çš„åœ°å€ã€‚\nVMAï¼ˆVirtual Memory Addressï¼‰è™šæ‹Ÿåœ°å€ï¼ŒLMAï¼ˆLoad Memory Addressï¼‰åŠ è½½åœ°å€ã€‚æ­£å¸¸æƒ…å†µè¿™ä¸¤ä¸ªå€¼æ˜¯ä¸€æ ·çš„ã€‚\né“¾æ¥ä¹‹å‰ç›®æ ‡æ–‡ä»¶çš„æ‰€æœ‰çŸ­ VMA éƒ½æ˜¯ 0ï¼Œå› ä¸ºè™šæ‹Ÿç©ºé—´è¿˜æ²¡æœ‰è¢«åˆ†é…ï¼Œé»˜è®¤ä¸º 0ï¼Œé“¾æ¥ä¹‹åå„ä¸ªæ®µå°±ä¼šè¢«åˆ†é…ç›¸åº”çš„è™šæ‹Ÿåœ°å€ã€‚\nLinux ä¸‹ï¼ŒELF å¯æ‰§è¡Œæ–‡ä»¶é»˜è®¤ä»åœ°å€0x8048000å¼€å§‹åˆ†é…ã€‚\nç¬¦å·è§£æä¸é‡å®šä½ objdump -d æŸ¥çœ‹ä»£ç æ®µåæ±‡ç¼–ç»“æœ æºä»£ç åœ¨ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶æ—¶å¹¶ä¸çŸ¥é“å‡½æ•°çš„è°ƒç”¨åœ°å€ã€‚éœ€è¦é€šè¿‡é“¾æ¥æ—¶é‡å®šä½ã€‚\né“¾æ¥å™¨å¦‚ä½•çŸ¥é“å“ªäº›æŒ‡ä»¤éœ€è¦è¢«è°ƒæ•´ï¼Ÿè¿™å°±ç”¨åˆ°äº†é‡å®šä½è¡¨ã€‚\né‡å®šä½è¡¨å°±æ˜¯ ELF æ–‡ä»¶çš„ä¸€ä¸ªæ®µï¼Œæ‰€ä»¥å…¶å®é‡å®šä½è¡¨ä¹Ÿå¯ä»¥å«é‡å®šä½æ®µã€‚\nobjdump -r æŸ¥çœ‹é‡å®šä½è¡¨ æ¯ä¸ªè¦è¢«é‡å®šä½çš„åœ°æ–¹å«ä¸€ä¸ªé‡å®šä½å…¥å£ï¼ˆRelocation Entryï¼‰ã€‚\né‡å®šä½è¿‡ç¨‹ä¹Ÿä¼´éšç€ç¬¦å·çš„è§£æè¿‡ç¨‹ï¼Œæ¯ä¸ªç›®æ ‡æ–‡ä»¶éƒ½å¯èƒ½å®šä¹‰ä¸€äº›ç¬¦å·ï¼Œæˆ–å¼•ç”¨åˆ°å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶çš„ç¬¦å·ã€‚é‡å®šä½è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªé‡å®šä½çš„å…¥å£éƒ½æ˜¯å¯¹ä¸€ä¸ªç¬¦å·çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå½“é“¾æ¥å™¨éœ€è¦å¯¹æŸä¸ªç¬¦å·çš„å¼•ç”¨è¿›è¡Œé‡å®šä½æ—¶ï¼Œä»–å°±è¦ç¡®å®šè¿™ä¸ªç¬¦å·çš„ç›®æ ‡åœ°å€ã€‚è¿™æ—¶å€™é“¾æ¥å™¨å°±ä¼šå–æŸ¥æ‰¾ç”±æ‰€æœ‰è¾“å…¥ç›®æ ‡æ–‡ä»¶çš„ç¬¦å·è¡¨ç»„æˆçš„å…¨å±€ç¬¦å·è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç¬¦å·è¿›è¡Œé‡å®šä½ã€‚\nreadelf -s æŸ¥çœ‹ç¬¦å·è¡¨ å¯¹äº 32 ä½ x86 å¹³å°ä¸‹çš„ ELF æ–‡ä»¶çš„é‡å®šä½å…¥å£æ‰€ä¿®æ­£çš„æŒ‡ä»¤å¯»å€æ–¹å¼åªæœ‰ä¸¤ç§ï¼š\nç»å¯¹è¿‘å€ 32 ä½å¯»å€ ç›¸å¯¹è¿‘å€ 32 ä½å¯»å€ x86 åŸºæœ¬é‡å®šä½ç±»å‹\nå®å®šä¹‰ å€¼ é‡å®šä½ä¿®æ­£æ–¹æ³• R_386_32 1 ç»å¯¹å¯»å€ä¿®æ­£ S+A R_386_PC32 2 ç›¸å¯¹å¯»å€ä¿®æ­£ S+A-P A = ä¿å­˜åœ¨è¢«ä¿®æ­£ä½ç½®çš„å€¼ P = è¢«ä¿®æ­£çš„ä½ç½® (ç›¸å¯¹äºæ®µå¼€å§‹çš„åç§»é‡æˆ–è€…è™šæ‹Ÿåœ°å€)ï¼Œæ³¨æ„ï¼Œè¯¥å€¼å¯é€šè¿‡ r_offset è®¡ç®—å¾—åˆ° S = ç¬¦å·çš„å®é™…åœ°å€ï¼Œå³ç”± r_infoçš„é«˜ 24 ä½æŒ‡å®šçš„ç¬¦å·çš„å®é™…åœ°å€\nç¬¬å…­ç«  å¯æ‰§è¡Œæ–‡ä»¶çš„è£…è½½ä¸è¿›ç¨‹ ç¨‹åºè¿è¡Œæ—¶æ˜¯æœ‰å±€éƒ¨æ€§åŸç†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ç¨‹åºæœ€å¸¸ç”¨çš„éƒ¨åˆ†é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œå°†ä¸å¸¸ç”¨çš„æ•°æ®å­˜æ”¾åœ¨ç£ç›˜é‡Œï¼Œè¿™å°±æ˜¯åŠ¨æ€è½½å…¥çš„åŸºæœ¬åŸç†ã€‚\nCOMMON å— Q:åœ¨ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘å™¨ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¹Ÿå½“åšæœªåˆå§‹åŒ–çš„å±€éƒ¨é™æ€å˜é‡ä¸€æ ·å¤„ç†ï¼Œä¸ºå®ƒåœ¨ BSS æ®µåˆ†é…ç©ºé—´ï¼Œè€Œæ˜¯å°†å…¶æ ‡è®°ä¸ºä¸€ä¸ª COMMON ç±»å‹çš„å˜é‡ï¼Ÿ A:å½“ç¼–è¯‘å™¨å°†ä¸€ä¸ªç¼–è¯‘å•å…ƒç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶æ—¶ï¼Œå¦‚æœè¯¥ç¼–è¯‘å•å…ƒåŒ…å«äº†å¼±ç¬¦å·ï¼ˆæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å°±æ˜¯å…¸å‹ï¼‰ï¼Œé‚£ä¹ˆè¯¥å¼±ç¬¦å·æœ€ç»ˆæ‰€å å¤§å°æœªçŸ¥ï¼Œå› ä¸ºæœ‰å¯èƒ½å…¶ä»–ç¼–è¯‘å•å…ƒä¸­è¯¥ç¬¦å·æ‰€å ç©ºé—´æ¯”å½“å‰çš„å¤§æ‰€ä»¥ç¼–è¯‘å™¨æ­¤æ—¶æ— æ³•ä¸ºè¯¥ç¬¦å·åœ¨ BSS æ®µåˆ†é…ç©ºé—´ã€‚ä½†é“¾æ¥å™¨åœ¨é“¾æ¥è¿‡ç¨‹ä¸­å¯ä»¥ç¡®å®šå¼±ç¬¦å·å¤§å°ï¼Œå› ä¸ºå½“é“¾æ¥å™¨è¯»å–æ‰€æœ‰è¾“å…¥ç›®æ ‡æ–‡ä»¶åï¼Œä»»ä½•ä¸€ä¸ªå¼±ç¬¦å·å¤§å°éƒ½å¯ä»¥ç¡®å®šï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨æœ€ç»ˆè¾“å‡ºæ–‡ä»¶çš„ BSS æ®µä¸ºå…¶åˆ†é…ç©ºé—´ã€‚æ€»ä½“æ¥çœ‹ï¼Œæœªåˆå§‹åŒ–å…¨å±€å˜é‡æœ€ç»ˆè¿˜æ˜¯è¢«æ”¾åœ¨ BSS æ®µã€‚\nGCC çš„-fno-commonå§æ‰€æœ‰æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¸ä»¥ COMMON å—å½¢å¼å¤„ç†ã€‚\n__attribute__æ‰©å±•ä¹Ÿå¯ä»¥å®ç°ï¼Œint global __attribute__((nocommon))ã€‚è¿™æ ·æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å°±æ˜¯å¼ºç¬¦å·ã€‚\nQ: ä¸ºä»€ä¹ˆé™æ€è¿è¡Œåº“é‡Œé¢ä¸€ä¸ªç›®æ ‡æ–‡ä»¶åªåŒ…å«ä¸€ä¸ªå‡½æ•°ï¼Ÿæ¯”å¦‚ libc.o é‡Œé¢ printf.o åªåŒ…å« printf() å‡½æ•°ï¼Œstrlen.o åªæœ‰ strlen å‡½æ•°ï¼Ÿ A:å› ä¸ºé“¾æ¥å™¨åœ¨é“¾æ¥é™æ€åº“æ—¶æ˜¯ä»¥ç›®æ ‡æ–‡ä»¶ä¸ºå•ä½çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬å¼•ç”¨äº†é™æ€åº“ä¸­çš„ printf å‡½æ•°ï¼Œé‚£ä¹ˆé“¾æ¥å™¨å°±ä¼šæŠŠåº“ä¸­åŒ…å« printf å‡½æ•°çš„é‚£ä¸ªç›®æ ‡æ–‡ä»¶é“¾æ¥è¿›æ¥ï¼Œå¦‚æœå¾ˆå¤šå‡½æ•°å†™åœ¨ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ä¸­ï¼Œå°±å°†æ²¡ç”¨åˆ°çš„å‡½æ•°ä¸€èµ·é“¾æ¥è¿›äº†è¾“å‡ºç»“æœä¸­ã€‚\né“¾æ¥çš„è¿‡ç¨‹æ§åˆ¶ ç¬¬ 6 ç«  å¯æ‰§è¡Œæ–‡ä»¶çš„è£…è½½ä¸è¿›ç¨‹ ç¨‹åºè¿è¡Œæ—¶æ˜¯æœ‰å±€éƒ¨æ€§åŸç†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ç¨‹åºæœ€å¸¸ç”¨çš„éƒ¨åˆ†é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œå°†ä¸å¸¸ç”¨çš„æ•°æ®å­˜æ”¾åœ¨ç£ç›˜é‡Œï¼Œè¿™å°±æ˜¯åŠ¨æ€è½½å…¥çš„åŸºæœ¬åŸç†ã€‚\nå¯æ‰§è¡Œæ–‡ä»¶åœ¨è£…è½½æ—¶å®é™…ä¸Šæ˜¯è¢«æ˜ å°„çš„è™šæ‹Ÿç©ºé—´ï¼Œæ‰€ä»¥å¯æ‰§è¡Œæ–‡ä»¶åˆè¢«å«åšæ˜ åƒæ–‡ä»¶ (Image)ã€‚\nSegment å’Œ Section å¾ˆéš¾ä»ä¸­æ–‡ç¿»è¯‘ä¸ŠåŒºåˆ†ï¼ŒELF æ–‡ä»¶æŒ‰ Section å­˜å‚¨çš„ï¼Œä»è£…è½½çš„è§’åº¦ ELF æ–‡ä»¶åˆå¯ä»¥æŒ‰ç…§ Segment åˆ’åˆ†ã€‚\næ®µåœ°å€å¯¹é½ å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦è¢«è£…è½½ï¼Œè£…è½½ä¸€èˆ¬é€šè¿‡è™šæ‹Ÿå†…å­˜é¡µæ˜ å°„æœºåˆ¶å®Œæˆï¼Œé¡µæ˜¯æ˜ å°„çš„æœ€å°å•ä½ï¼Œå¯¹äº x86 å¤„ç†å™¨æ¥è¯´ï¼Œé»˜è®¤é¡µå¤§å°ä¸º 4096 å­—èŠ‚ï¼Œæ‰€ä»¥å†…å­˜ç©ºé—´çš„é•¿åº¦å¿…é¡»æ˜¯ 4096 çš„æ•´æ•°å€ï¼Œå¹¶ä¸”è¿™æ®µç©ºé—´åœ¨ç‰©ç†å†…å­˜å’Œè¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 4096 çš„æ•´æ•°å€ã€‚\nç¬¬ 7 ç«  åŠ¨æ€é“¾æ¥ ç¬¬ä¸ƒç«  åŠ¨æ€é“¾æ¥ ä¸ºä»€ä¹ˆè¦åŠ¨æ€é“¾æ¥ï¼Ÿ å†…å­˜å’Œç£ç›˜ç©ºé—´ï¼šå¦‚æœä¸¤ä¸ªç¨‹åºéƒ½ç”¨åˆ°ä¸€ä¸ªé™æ€åº“ï¼Œé“¾æ¥æ—¶å°±ä¼šæœ‰é™æ€åº“çš„ä¸¤ä¸ªå‰¯æœ¬ï¼Œè¿è¡Œæ—¶å°±ä¼šå ç”¨ä¸¤ä»½å†…å­˜ã€‚ ç¨‹åºçš„å¼€å‘ä¸å‘å¸ƒï¼šä¸€ä¸ªç¨‹åºç”¨åˆ°çš„é™æ€åº“å¦‚æœæœ‰æ›´æ–°ï¼Œé‚£ä¹ˆç¨‹åºå°±éœ€è¦é‡æ–°é“¾æ¥ï¼Œå‘å¸ƒç»™ç”¨æˆ·ã€‚ è¦è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æŠŠç¨‹åºçš„æ¨¡å—ç›¸äº’åˆ†å‰²å¼€æ¥ï¼Œå½¢æˆç‹¬ç«‹çš„æ–‡ä»¶ï¼Œè€Œä¸å†å°†å®ƒä»¬é™æ€é“¾æ¥ã€‚å°±æ˜¯ä¸å¯¹ç›®æ ‡æ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œè€Œç­‰åˆ°ç¨‹åºè¿è¡Œæ—¶å†é“¾æ¥ã€‚è¿™å°±æ˜¯åŠ¨æ€é“¾æ¥çš„åŸºæœ¬æ€æƒ³ã€‚\nåŠ¨æ€é“¾æ¥æ¨¡å—çš„è£…è½½åœ°å€æ˜¯ä»0x00000000å¼€å§‹çš„ã€‚\nå…±äº«å¯¹è±¡çš„æœ€ç»ˆè£…è½½åœ°å€åœ¨ç¼–è¯‘æ—¶æ˜¯ä¸ç¡®å®šçš„ã€‚\nåœ°å€æ— å…³ä»£ç  é™æ€å…±äº«åº“ï¼šå°†ç¨‹åºçš„å„ä¸ªæ¨¡å—äº¤ç»™æ“ä½œç³»ç»Ÿç®¡ç†ï¼Œæ“ä½œç³»ç»Ÿåœ¨æŸä¸ªç‰¹å®šçš„åœ°å€åˆ’åˆ†å‡ºä¸€äº›åœ°å€å—ï¼Œä¸ºé‚£äº›å·²çŸ¥çš„æ¨¡å—é¢„ç•™è¶³å¤Ÿçš„ç©ºé—´ã€‚\nè£…è½½æ—¶é‡å®šä½ï¼šç¨‹åºåœ¨ç¼–è¯‘æ—¶è¢«è£…è½½çš„ç›®æ ‡åœ°å€ä¸º0x1000ï¼Œä½†æ˜¯åœ¨è£…è½½æ—¶æ“ä½œç³»ç»Ÿå‘ç°0x1000è¿™ä¸ªåœ°å€å·²ç»è¢«åˆ«çš„ç¨‹åºä½¿ç”¨äº†ï¼Œä»0x4000å¼€å§‹æœ‰ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´å¯ä»¥å®¹çº³ï¼Œé‚£ä¹ˆè¯¥ç¨‹åºå°±å¯ä»¥è¢«è£…è½½è‡³0x4000ï¼Œç¨‹åºæŒ‡ä»¤å’Œæ•°æ®æ‰€æœ‰å¼•ç”¨éƒ½åªéœ€è¦åŠ ä¸Š0x3000åç§»é‡å³å¯ã€‚å› ä¸ºä»–ä»¬åœ¨ç¨‹åºä¸­çš„ç›¸å¯¹ä½ç½®æ˜¯ä¸ä¼šæ”¹å˜çš„ã€‚\nåœ°å€æ— å…³ä»£ç ä¸ºäº†è§£å†³å…±äº«å¯¹è±¡æŒ‡ä»¤ä¸­å¯¹ç»å¯¹åœ°å€çš„é‡å®šä½é—®é¢˜ï¼ŒåŸºæœ¬æƒ³æ³•æ˜¯æŠŠæŒ‡ä»¤ä¸­é‚£äº›éœ€è¦è¢«ä¿®æ”¹çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥ï¼Œè·Ÿæ•°æ®éƒ¨åˆ†æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ ·æŒ‡ä»¤éƒ¨åˆ†å°±å¯ä»¥ä¿æŒä¸å˜ï¼Œè€Œæ•°æ®éƒ¨åˆ†å¯ä»¥åœ¨æ¯ä¸ªè¿›ç¨‹ä¸­æ‹¥æœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚\næ¨¡å—ä¸­å››ç±»åœ°å€å¼•ç”¨ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ¨¡å—å†…éƒ¨è°ƒç”¨æˆ–è€…è·³è½¬ ä¸éœ€è¦é‡å®šä½ï¼Œæœ¬èº«å°±æ˜¯åœ°å€æ— å…³çš„ã€‚\næ¨¡å—å†…éƒ¨æ•°æ®è®¿é—® æŒ‡ä»¤ä¸­ä¸èƒ½åŒ…å«æ•°æ®çš„ç»å¯¹åœ°å€ï¼Œæ‰€ä»¥ä½¿ç”¨ç›¸å¯¹å¯»å€çš„æ–¹å¼ã€‚\næ¨¡å—é—´æ•°æ®è®¿é—® æŠŠè·Ÿåœ°å€ç›¸å…³çš„éƒ¨åˆ†æ”¾åˆ°æ•°æ®æ®µé‡Œé¢ã€‚ELF çš„åšæ³•æ˜¯åœ¨æ•°æ®æ®µé‡Œé¢å»ºç«‹ä¸€ä¸ªæŒ‡å‘è¿™äº›æ•°æ®çš„æŒ‡é’ˆæ•°æ®ï¼Œç§°ä¸ºå…¨å±€åç§»è¡¨ï¼ˆGOTï¼‰ã€‚å½“ä»£ç éœ€è¦å¼•ç”¨å…¨å±€å˜é‡æ—¶ï¼Œå¯ä»¥é€šè¿‡ GOT é—´æ¥å¼•ç”¨ã€‚\né“¾æ¥å™¨åœ¨è£…è½½æ—¶ä¼šæŸ¥æ‰¾æ¯ä¸ªå˜é‡çš„åœ°å€ï¼Œå¡«å…… GOT æ¯ä¸ªé¡¹ï¼Œå½“æŒ‡ä»¤ä¸­éœ€è¦è®¿é—®å˜é‡æ—¶ï¼Œç¨‹åºä¼šå…ˆæ‰¾åˆ° GOTï¼Œæ ¹æ® GOT ä¸­å¯¹åº”çš„åœ°å€ï¼Œæ‰¾åˆ°å¯¹åº”çš„å˜é‡ã€‚GOT æœ¬èº«æ”¾åœ¨æ•°æ®æ®µï¼Œæ‰€ä»¥ä»–å¯ä»¥åœ¨æ¨¡å—è£…è½½æ—¶è¢«ä¿®æ”¹ï¼Œå¹¶ä¸”æ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹å‰¯æœ¬ï¼Œç›¸äº’ä¸å½±å“ã€‚\nä»¥è®¿é—®å˜é‡ b ä¸ºä¾‹ï¼Œç¨‹åºé¦–å…ˆè®¡ç®—å‡ºå˜é‡ b çš„åœ°å€åœ¨ GOT ä¸­çš„ä½ç½®ï¼Œå³\n0x10000000 + 0x454 + 0x118c + 0xfffffff8 = 0x100015d8\n0xfffffff8ä¸º-8çš„è¡¥ç è¡¨ç¤ºï¼Œç„¶åä½¿ç”¨å¯„å­˜å™¨é—´æ¥å¯»å€æ–¹å¼ç»™å˜é‡ b èµ‹å€¼ 2ã€‚\næ¨¡å—é—´è°ƒç”¨è·³è½¬ ç±»ä¼¼äºæ¨¡å—æœºæ•°æ®è®¿é—®ï¼Œä¸åŒçš„æ˜¯ GOT ä¸­ç›¸åº”é¡¹ä¿å­˜çš„æ˜¯ç›®æ ‡å‡½æ•°çš„åœ°å€ã€‚\nå„ç§åœ°å€å¼•ç”¨æ–¹å¼\næŒ‡ä»¤è·³è½¬ï¼Œè°ƒç”¨ æ•°æ®è®¿é—® æ¨¡å—å†…éƒ¨ ç›¸å¯¹è·³è½¬å’Œè°ƒç”¨ ç›¸å¯¹åœ°å€è®¿é—® æ¨¡å—å¤–éƒ¨ é—´æ¥è·³è½¬å’Œè°ƒç”¨ï¼ˆGOTï¼‰ é—´æ¥è®¿é—®ï¼ˆGOTï¼‰ Q : -fpic å’Œ-fPIC çš„åŒºåˆ«ï¼Ÿ A: éƒ½æ˜¯ GCC äº§ç”Ÿåœ°å€æ— å…³ä»£ç çš„å‚æ•°ã€‚-fpicäº§ç”Ÿçš„ä»£ç è¾ƒå°ï¼Œ-fPICäº§ç”Ÿçš„ä»£ç è¾ƒå¤§ã€‚å› ä¸ºåœ°å€æ— å…³ä»£ç å’Œç¡¬ä»¶å¹³å°ç›¸å…³ï¼Œåœ¨ä¸€äº›å¹³å°ä¸Š-fpicä¼šå—åˆ°é™åˆ¶ï¼Œæ¯”å¦‚å…¨å±€ç¬¦å·çš„æ•°é‡æˆ–è€…ä»£ç é•¿åº¦ç­‰ï¼Œè€Œåè€…æ²¡æœ‰è¿™æ ·çš„é™åˆ¶ã€‚\nQ: å¦‚æœä¸€ä¸ªå…±äº«å¯¹è±¡ lib.so ä¸­å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡ Gï¼Œè¿›ç¨‹ A å’Œè¿›ç¨‹ B éƒ½æ˜¯ç”¨äº† lib.soã€‚é‚£ä¹ˆå½“è¿›ç¨‹ A æ”¹å˜è¿™ä¸ªå…¨å±€å˜é‡æ—¶ï¼Œè¿›ç¨‹ B çš„ G æ˜¯å¦å—åˆ°å½±å“ï¼Ÿ A: ä¸ä¼šï¼Œåº”å½“ lib.so è¢«åŠ è½½æ—¶ï¼Œå®ƒçš„æ•°æ®æ®µéƒ¨åˆ†åœ¨æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„å‰¯æœ¬ã€‚å¦‚æœæ˜¯åŒä¸€ä¸ªè¿›ç¨‹é‡Œçš„çº¿ç¨‹ A å’Œçº¿ç¨‹ Bï¼Œé‚£ä¹ˆä»–ä»¬æ˜¯å…±äº«æ•°æ® G çš„ã€‚\nå¦‚æœä»£ç ä¸æ˜¯åœ°å€æ— å…³çš„ï¼Œå®ƒå°±ä¸èƒ½è¢«å¤šä¸ªè¿›ç¨‹å…±äº«ï¼Œå°±å¤±å»äº†èŠ‚çœå†…å­˜çš„ä¼˜ç‚¹ã€‚ä½†æ˜¯è£…è½½æ˜¯é‡å®šä½çš„å…±äº«å¯¹è±¡çš„è¿è¡Œé€Ÿåº¦è¦æ¯”ä½¿ç”¨åœ°å€æ— å…³ä»£ç çš„å…±äº«å¯¹è±¡å¿«ï¼Œå› ä¸ºå®ƒçœå»äº†åœ°å€æ— å…³ä»£ç ä¸­æ¯æ¬¡è®¿é—®å…¨å±€æ•°æ®å’Œå‡½æ•°æ˜¯éœ€è¦åšä¸€æ¬¡è®¡ç®—å½“å‰åœ°å€ä»¥åŠé—´æ¥åœ°å€å¯»å€çš„è¿‡ç¨‹ã€‚\nå»¶è¿Ÿç»‘å®š PLT åŠ¨æ€é“¾æ¥è¦æ¯”é™æ€é“¾æ¥æ…¢ï¼Œä¸€æ˜¯å› ä¸ºåŠ¨æ€é“¾æ¥ä¸‹ï¼Œå¯¹å…¨å±€å’Œé™æ€æ•°æ®çš„è®¿é—®éƒ½è¦è¿›è¡Œå¤æ‚çš„ GOT å®šä½ï¼Œç„¶åé—´æ¥å¯»å€ã€‚å¦å¤–ï¼Œç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨éƒ½è¦è¿›è¡Œä¸€æ¬¡é“¾æ¥å·¥ä½œã€‚\nè€Œåœ¨ä¸€ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å¾ˆå¤šå‡½æ•°åœ¨ç¨‹åºæ‰§è¡Œå®Œæ—¶éƒ½ä¸ä¼šç”¨åˆ°ï¼Œå¦‚æœä¸€å¼€å§‹å°±æŠŠæ‰€æœ‰å‡½æ•°é“¾æ¥å¥½å®é™…å°±æ˜¯ä¸€ç§æµªè´¹ï¼Œæ‰€æœ‰ ELF é‡‡ç”¨äº†ä¸€ç§å«åšå»¶è¿Ÿç»‘å®šçš„åšæ³•ï¼ŒåŸºæœ¬æ€æƒ³å°±æ˜¯å½“å‡½æ•°ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰è¿›è¡Œç»‘å®šï¼ˆç¬¦å·æŸ¥æ‰¾ï¼Œé‡å®šä½ç­‰ï¼‰ã€‚\nELF ä½¿ç”¨ PLTï¼ˆProcedure Linkage Tableï¼‰æ¥å®ç°å»¶è¿Ÿç»‘å®šã€‚ä»¥è°ƒç”¨bar()å‡½æ•°ä¸ºä¾‹ï¼Œä¹‹å‰çš„åšæ³•æ˜¯é€šè¿‡ GOT ä¸­çš„ç›¸åº”é¡¹è¿›è¡Œè·³è½¬ï¼Œè€Œå»¶è¿Ÿç»‘å®šä¸‹ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­é—´åŠ äº†ä¸€å±‚ PLT é—´æ¥è·³è½¬ã€‚æ¯ä¸ªå¤–éƒ¨å‡½æ•°åœ¨ PLT ä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”é¡¹ï¼Œæ¯”å¦‚bar()åœ¨ PLT ä¸­é¡¹çš„åœ°å€ä¸ºbar@pltã€‚\nbar@plt: jmp *(bar@GOT) push n push moduleID jump _dl_runtime_resolve ç¬¬ä¸€æ¡æ˜¯æŒ‡ä»¤é€šè¿‡ GOT é—´æ¥è·³è½¬çš„æŒ‡ä»¤ï¼Œå¦‚æœé“¾æ¥å™¨åœ¨åˆå§‹åŒ–é˜¶æ®µå·²ç»åˆå§‹åŒ–è¯¥é¡¹ï¼Œå¹¶å°†bar()åœ°å€å¡«å…¥è¯¥é¡¹ï¼Œé‚£ä¹ˆå°±èƒ½æ­£ç¡®è·³è½¬åˆ°bar()ã€‚ä½†æ˜¯ä¸ºäº†å»¶è¿Ÿç»‘å®šï¼Œé“¾æ¥å™¨åˆå§‹åŒ–æ—¶å¹¶æ²¡æœ‰å°†bar()åœ°å€å¡«å…¥ï¼Œè€Œæ˜¯å°†ç¬¬äºŒæ¡æŒ‡ä»¤push nçš„åœ°å€å¡«å…¥äº†bar@GOTä¸­ï¼Œè¿™ä¸€æ­¥ä¸éœ€è¦æŸ¥æ‰¾ç¬¦å·ï¼Œä»£ä»·å¾ˆä½ã€‚\nç¬¬ä¸€æ¡æŒ‡ä»¤çš„æ•ˆæœå°±æ˜¯è·³è½¬åˆ°ç¬¬äºŒæ¡æŒ‡ä»¤ï¼Œç¬¬äºŒæ¡æŒ‡ä»¤å°†æ•°å­—nå‹å…¥å †æ ˆï¼Œè¿™ä¸ªæ•°å­—æ˜¯barè¿™ä¸ªç¬¦å·å¼•ç”¨åœ¨é‡å®šä½è¡¨.rel.pltä¸­çš„ä¸‹æ ‡ã€‚ç¬¬ä¸‰æ¡æŒ‡ä»¤å°†æ¨¡å— ID å‹å…¥å †æ ˆï¼Œæœ€åè·³è½¬åˆ°_dl_runtime_resolveã€‚\n_dl_runtime_resolveè¿›è¡Œä¸€ç³»åˆ—å·¥ä½œåå°†bar()çœŸæ­£åœ°å€å¡«å…¥åˆ°bar@GOTã€‚\nä¸€æ—¦bar()è¿™ä¸ªå‡½æ•°è¢«è§£æå®Œï¼Œå½“é¢å†æ¬¡è°ƒç”¨bar@pltæ—¶ï¼Œç¬¬ä¸€æ¡jumpæŒ‡ä»¤å°±èƒ½è·³è½¬åˆ°bar()çš„çœŸæ­£åœ°å€ã€‚bar()å‡½æ•°è¿”å›æ—¶æ ¹æ®å †æ ˆé‡Œä¿å­˜çš„EIPç›´æ¥è¿”å›åˆ°è°ƒç”¨è€…ï¼Œè€Œä¸ä¼šæ‰§è¡Œbar@pltä¸­ç¬¬äºŒæ¡æŒ‡ä»¤ã€‚é‚£æ®µä»£ç åªä¼šåœ¨ç¬¦å·æœªè¢«è§£ææ—¶æ‰§è¡Œä¸€æ¬¡ã€‚\nPLT åœ¨ ELF æ–‡ä»¶ä¸­ä»¥ç‹¬ç«‹æ®µå­˜åœ¨ï¼Œæ®µåé€šå¸¸å«åš.pltï¼Œå› ä¸ºå®ƒæœ¬èº«æ˜¯ä¸€äº›åœ°å€æ— å…³çš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥è·Ÿä»£ç æ®µåˆå¹¶æˆåŒä¸€ä¸ªå¯è¯»å¯æ‰§è¡Œçš„ Segment è¢«è£…è½½å…¥å†…å­˜ã€‚\nåŠ¨æ€é“¾æ¥ç›¸å…³ç»“æ„ .interp æ®µ\nobjdump -s a.out Contents of section .interp: 804811 2f6c6962 2f6c696d 6c696e78 782e736f /lib/ld-linux.so.2 é‡Œé¢ä¿å­˜çš„å°±æ˜¯å¯æ‰§è¡Œæ–‡ä»¶æ‰€éœ€è¦çš„åŠ¨æ€é“¾æ¥å™¨çš„è·¯å¾„ï¼Œåœ¨ Linux ä¸‹ï¼Œå¯æ‰§è¡Œæ–‡ä»¶åŠ¨æ€é“¾æ¥å™¨å‡ ä¹éƒ½æ˜¯/lib/ld-linux.so.2ã€‚\nè¿™æ˜¯ä¸ªè½¯é“¾æ¥ï¼Œä¼šä»–ä¼šæŒ‡å‘ç³»ç»Ÿä¸­å®‰è£…çš„åŠ¨æ€é“¾æ¥å™¨ã€‚å½“ç³»ç»Ÿä¸­çš„ Glibc åº“æ›´æ–°æ—¶ï¼Œè½¯é“¾æ¥ä¹Ÿä¼šæŒ‡å‘æ–°çš„åŠ¨æ€é“¾æ¥å™¨ï¼Œæ‰€ä»¥.interpæ®µä¸éœ€è¦ä¿®æ”¹ã€‚\nå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦çš„åŠ¨æ€é“¾æ¥å™¨çš„è·¯å¾„ï¼š\n$ readelf -l a.out | grep interpreter [Requesting program interpreter: /lib/ld-linux.so.2] .dynamic æ®µ\nåŠ¨æ€é“¾æ¥ ELF ä¸­æœ€é‡è¦çš„ç»“æ„ï¼Œè¿™é‡Œä¿å­˜äº†åŠ¨æ€é“¾æ¥å™¨æ‰€éœ€è¦çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ä¾èµ–å“ªäº›å…±äº«å¯¹è±¡ï¼ŒåŠ¨æ€é“¾æ¥ç¬¦å·è¡¨çš„ä½ç½®ï¼ŒåŠ¨æ€é“¾æ¥é‡å®šä½è¡¨çš„ä½ç½®ï¼Œå…±äº«å¯¹è±¡åˆå§‹åŒ–ä»£ç çš„åœ°å€ç­‰ã€‚\nåŠ¨æ€ç¬¦å·è¡¨\nProgram1ç¨‹åºä¸€æ¥Lib.soï¼Œå¼•ç”¨åˆ°äº†é‡Œé¢çš„foobar()å‡½æ•°ï¼Œé‚£ä¹ˆå¯¹äºProgram1æ¥è¯´ï¼Œç§°Program1å¯¼å…¥ï¼ˆImportï¼‰äº†foobarå‡½æ•°ï¼Œfoobaræ˜¯Program1çš„å¯¼å…¥å‡½æ•°ã€‚\nè€Œç«™åœ¨Lib.soè§’åº¦æ¥è¯´ï¼Œå®ƒå®šä¹‰äº†foobarå‡½æ•°ï¼Œæˆ‘ä»¬ç§°Lib.soå¯¼å‡ºï¼ˆExportï¼‰äº†foobarå‡½æ•°ï¼Œfoobaræ˜¯Lib.soçš„å¯¼å‡ºå‡½æ•°ã€‚\nä¸ºäº†è¡¨ç¤ºåŠ¨æ€é“¾æ¥è¿™äº›æ¨¡å—ä¹‹é—´çš„ç¬¦å·å¯¼å…¥å¯¼å‡ºå…³ç³»ï¼ŒELF ä¸“é—¨æœ‰ä¸€ä¸ªå«åšåŠ¨æ€ç¬¦å·è¡¨çš„æ®µæ¥ä¿å­˜è¿™äº›ä¿¡æ¯ï¼Œæ®µåé€šå¸¸å«.dynsymã€‚\n.dynsymåªä¿å­˜ä¸åŠ¨æ€é“¾æ¥ç›¸å…³çš„ç¬¦å·ï¼Œå¯¹äºé‚£äº›æ¨¡å—å†…éƒ¨çš„ç¬¦å·ï¼Œæ¯”å¦‚æ¨¡å—ç§æœ‰å˜é‡åˆ™ä¸ä¿å­˜ã€‚\nåŠ¨æ€é“¾æ¥é‡å®šä½è¡¨\nPIC æ¨¡å¼çš„å…±äº«å¯¹è±¡ä¹Ÿéœ€è¦é‡å®šä½ã€‚\nå¯¹äºä½¿ç”¨ PIC æŠ€æœ¯çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«å¯¹è±¡æ¥è¯´ï¼Œè™½ç„¶ä»£ç æ®µä¸éœ€è¦é‡å®šä½ï¼Œä½†æ˜¯æ•°æ®æ®µè¿˜åŒ…å«äº†ç»å¯¹åœ°å€çš„å¼•ç”¨ï¼Œå› ä¸ºä»£ç æ®µä¸­ç»å¯¹åœ°å€ç›¸å…³çš„éƒ¨åˆ†è¢«åˆ†ç¦»å‡ºæ¥ï¼Œå˜æˆäº† GOTï¼Œè€Œ GOT å®é™…ä¸Šæ˜¯æ•°æ®æ®µçš„ä¸€éƒ¨åˆ†ã€‚\nç›®æ ‡æ–‡ä»¶çš„é‡å®šä½åœ¨é™æ€é“¾æ¥æ—¶å®Œæˆï¼Œå…±äº«å¯¹è±¡çš„é‡å®šä½åœ¨è£…è½½æ—¶å®Œæˆã€‚\nç›®æ ‡æ–‡ä»¶é‡ŒåŒ…å«ä¸“é—¨ç”¨äºé‡å®šä½ä¿¡æ¯çš„é‡å®šä½è¡¨ï¼Œæ¯”å¦‚.rel.textè¡¨ç¤ºæ˜¯ä»£ç æ®µé‡å®šä½è¡¨ï¼Œ.rel.dataè¡¨ç¤ºæ•°æ®æ®µé‡å®šä½è¡¨ã€‚\nå…±äº«å¯¹è±¡é‡Œç±»ä¼¼çš„é‡å®šä½è¡¨å«åš.rel.dynå’Œ.rel.pltã€‚.rel.dynå®é™…ä¸Šæ˜¯å¯¹æ•°æ®å¼•ç”¨çš„ä¿®æ­£ï¼Œå®ƒæ‰€ä¿®æ­£çš„ä½ç½®ä½äº.gotä»¥åŠæ•°æ®æ®µï¼›.rel.pltå®é™…ä¸Šæ˜¯å¯¹ä»£ç å¼•ç”¨çš„ä¿®æ­£ï¼Œå®ƒæ‰€ä¿®æ­£çš„ä½ç½®ä½äº.got.pltã€‚\nç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹é‡å®šä½è¡¨ï¼›\n\u003c!DOCTYPE html\u003e Responsive Image printfè¿™ä¸ªé‡å®šä½å…¥å£ï¼Œå®ƒçš„ç±»å‹ä¸ºR_386_JUMP_SLOTï¼Œå®ƒçš„åç§»ä¸º0x000015d8ã€‚å®ƒå®é™…ä½äº.got.pltä¸­ï¼Œå‰ä¸‰é¡¹æ˜¯è¢«ç³»ç»Ÿå ç”¨çš„ï¼Œç¬¬å››é¡¹å¼€å§‹æ‰æ˜¯çœŸæ­£å­˜æ”¾å¯¼å…¥å‡½æ•°åœ°å€çš„åœ°æ–¹ï¼Œåˆšå¥½æ˜¯0x000015c8 + 4 * 3 = 0x000015d4ï¼Œå³__gmon_start__ã€‚\nå½“åŠ¨æ€é“¾æ¥å™¨è¦è¿›è¡Œé‡å®šä½æ—¶ï¼Œå…ˆæŸ¥æ‰¾printfçš„åœ°å€ï¼Œå‡è®¾é“¾æ¥å™¨åœ¨å…¨å±€ç¬¦å·è¡¨ä¸­æ‰¾åˆ°printfçš„åœ°å€ä¸º0x08801234ï¼Œé‚£ä¹ˆé“¾æ¥å™¨å°±ä¼šå°†è¿™ä¸ªåœ°å€å¡«å…¥.got.pltä¸­åç§»ä¸º0x000015d8çš„ä½ç½®ã€‚ä»è€Œå®ç°äº†åœ°å€é‡å®šä½ï¼Œå³åŠ¨æ€é“¾æ¥æœ€å…³é”®çš„ä¸€æ­¥ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åŠ¨æ€é“¾æ¥æ—¶è¿›ç¨‹å †æ ˆåˆå§‹åŒ–ä¿¡æ¯ åŠ¨æ€é“¾æ¥çš„æ­¥éª¤å’Œå®ç° åŠ¨æ€é“¾æ¥åˆ†ä¸ºä¸‰æ­¥ï¼šå¯åŠ¨åŠ¨æ€é“¾æ¥æœ¬èº«ï¼Œè£…è½½æ‰€æœ‰çš„å…±äº«å¯¹è±¡ï¼Œé‡å®šä½å’Œåˆå§‹åŒ–ã€‚\nQï¼šåŠ¨æ€é“¾æ¥å™¨æœ¬èº«æ˜¯åŠ¨æ€é“¾æ¥è¿˜æ˜¯é™æ€é“¾æ¥ï¼Ÿ Aï¼šåŠ¨æ€é“¾æ¥å™¨æœ¬èº«åº”è¯¥æ˜¯é™æ€é“¾æ¥çš„ï¼Œå®ƒä¸èƒ½ä¾èµ–äºå…¶ä»–å…±äº«å¯¹è±¡ï¼ŒåŠ¨æ€é“¾æ¥å™¨æœ¬èº«ä½¿ç”¨æ¥å¸®åŠ©å…¶ä»– ELF æ–‡ä»¶è§£å†³å…±äº«å¯¹è±¡ä¾èµ–é—®é¢˜çš„ï¼Œå¦‚æœå®ƒä¹Ÿä¾èµ–å…¶ä»–å…±äº«å¯¹è±¡ï¼Œé‚£å°±é™·å…¥çŸ›ç›¾äº†ã€‚\nQï¼šåŠ¨æ€é“¾æ¥å™¨æœ¬èº«å¿…é¡»æ˜¯ PIC çš„å—ï¼Ÿ Aï¼šåŠ¨æ€é“¾æ¥å™¨å¯ä»¥æ˜¯ PIC çš„ä¹Ÿå¯ä»¥ä¸æ˜¯ï¼Œä½†æ˜¯å¾€å¾€ç”¨ PIC ä¼šç®€å•ä¸€äº›ã€‚\nQï¼šåŠ¨æ€é“¾æ¥å™¨å¯ä»¥è¢«å½“åšå¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œï¼Œé‚£ä¹ˆå®ƒçš„è£…è½½åœ°å€æ˜¯å¤šå°‘ï¼Ÿ Aï¼šld.so çš„è£…è½½åœ°å€è·Ÿä¸€èˆ¬çš„å…±äº«å¯¹è±¡ä¸€æ ·ï¼Œå³0x00000000ã€‚è¿™ä¸ªè£…è½½åœ°å€æ˜¯ä¸€ä¸ªæ— æ•ˆçš„è£…è½½åœ°å€ï¼Œä½œä¸ºä¸€ä¸ªå…±äº«åº“ï¼Œå†…æ ¸åœ¨è£…è½½å®ƒæ—¶ä¼šä¸ºå…¶é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„è£…è½½åœ°å€ã€‚\næ˜¾ç¤ºè¿è¡Œæ—¶é“¾æ¥ ç¬¬ 10 ç«  å†…å­˜ ç¨‹åºçš„å†…å­˜å¸ƒå±€ åœ¨ 32 ä½æ“ä½œç³»ç»Ÿé‡Œï¼Œæœ‰ 4GB çš„å¯»å€èƒ½åŠ›ï¼Œå¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿä¼šå°†ä¸€éƒ¨åˆ†æŒªç»™å†…æ ¸ä½¿ç”¨ï¼Œåº”ç”¨ç¨‹åºæ— æ³•ç›´æ¥è®¿é—®è¿™æ®µå†…å­˜ã€‚è¿™éƒ¨åˆ†ç§°ä¸ºå†…æ ¸ç©ºé—´ã€‚Windows é»˜è®¤å°†é«˜åœ°å€çš„ 2GB åˆ†ç»™å†…æ ¸ï¼ŒLinux é»˜è®¤åˆ† 1GB ç»™å†…æ ¸ã€‚\nå‰©ä¸‹çš„ç§°ä¸ºç”¨æˆ·ç©ºé—´ï¼Œåœ¨ç”¨æˆ·ç©ºé—´é‡Œä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šçš„åœ°å€åŒºé—´ï¼š\næ ˆï¼šç»´æŠ¤å‡½æ•°è°ƒç”¨ä¸Šä¸‹æ–‡ï¼Œé€šå¸¸åœ¨ç”¨æˆ·ç©ºé—´çš„æœ€é«˜åœ°å€å¤„åˆ†é…ã€‚ å †ï¼šç”¨æ¥å®¹çº³ç¨‹åºåŠ¨æ€åˆ†é…çš„å†…å­˜åŒºåŸŸï¼Œå½“ä½¿ç”¨ malloc æˆ–è€… new åˆ†é…å†…å­˜æ—¶ï¼Œå¾—åˆ°çš„å†…å­˜æ¥è‡ªäºå †ã€‚é€šå¸¸åœ¨æ ˆä¸‹æ–¹ã€‚ å¯æ‰§è¡Œæ–‡ä»¶æ˜ åƒï¼šå­˜å‚¨å¯æ‰§è¡Œæ–‡ä»¶å†å†…å­˜é‡Œçš„æ˜ åƒï¼Œç”±è£…è½½å™¨åœ¨è£…è½½æ—¶å°†å¯æ‰§è¡Œæ–‡ä»¶çš„å†…å­˜è¯»å–æ´»æ˜ å°„åˆ°è¿™é‡Œã€‚ ä¿ç•™åŒºï¼šä¿ç•™åŒºå¹¶ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„å†…å­˜åŒºåŸŸï¼Œè€Œæ˜¯å¯¹å†…å­˜ä¸­å—åˆ°ä¿æŠ¤è€Œç¦æ­¢è®¿é—®çš„å†…å­˜åŒºåŸŸçš„æ€»ç§°ã€‚æ¯”å¦‚NULLã€‚ \u003c!DOCTYPE html\u003e Responsive Image æ ˆä¸è°ƒç”¨æƒ¯ä¾‹ æ ˆä¿å­˜äº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ‰€éœ€è¦çš„ç»´æŠ¤ä¿¡æ¯ï¼Œé€šå¸¸è¿™è¢«ç§°ä¸ºæ ˆå¸§ã€‚ä¸€èˆ¬åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\nå‡½æ•°çš„è¿”å›åœ°å€å’Œå‚æ•° ä¸´æ—¶å˜é‡ ä¿å­˜çš„ä¸Šä¸‹æ–‡ ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨æµç¨‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image I386 æ ‡å‡†å‡½æ•°è¿›å…¥å’Œé€€å‡ºæŒ‡ä»¤åºåˆ—ï¼ŒåŸºæœ¬å½¢å¼ï¼š\npush ebp mov ebp, esp sub esp, x [push reg1] ... [push regn] å‡½æ•°å®é™…å†…å­˜ [pop regn] ... [pop reg1] mov esp, ebp pop ebp ret Hot Patch Prologue çƒ­è¡¥ä¸ åœ¨ Windows å‡½æ•°é‡Œï¼Œæœ‰äº›å‡½æ•°å°½ç®¡ä½¿ç”¨äº†æ ‡å‡†çš„è¿›å…¥æŒ‡ä»¤åºåˆ—ï¼Œä½†æ˜¯åœ¨è¿™äº›æŒ‡ä»¤ä¹‹å‰å´æ’å…¥äº†ä¸€äº›ç‰¹æ®Šå†…å®¹ï¼š\nmov edi,edi è¿™æ¡æŒ‡ä»¤æ²¡æœ‰ä»»ä½•ç”¨ï¼Œåœ¨æ±‡ç¼–ä¹‹åä¼šæˆä¸ºä¸€ä¸ªå ç”¨ 2 å­—èŠ‚çš„æœºå™¨ç ï¼Œçº¯ç²¹ä¸ºäº†å ä½ç¬¦è€Œå­˜åœ¨ï¼Œä½¿ç”¨è¿™æ¡æŒ‡ä»¤å¼€å¤´çš„å‡½æ•°æ•´ä½“çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š\nnop nop nop nop nop FUNCTION: mov edi,edi push ebp mov ebp, esp å…¶ä¸­ nop å  1 ä¸ªå­—èŠ‚ï¼Œä¹Ÿæ˜¯å ä½ç¬¦ï¼ŒFUNCTION ä¸ºä¸€ä¸ªæ ‡å·ï¼Œè¡¨ç¤ºå‡½æ•°å…¥å£ï¼Œæœ¬èº«ä¸å ç©ºé—´ã€‚\nè®¾è®¡æˆè¿™æ ·çš„å‡½æ•°åœ¨è¿è¡Œæ—¶å¯ä»¥å¾ˆå®¹æ˜“è¢«å…¶ä»–å‡½æ•°æ›¿æ¢æ‰ï¼Œåœ¨ä¸Šé¢çš„æŒ‡ä»¤åºåˆ—ä¸­è°ƒç”¨çš„å‡½æ•°æ˜¯ FUNCTIONï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åšä¸€äº›ä¿®æ”¹ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åˆ»æ„æ”¹æˆè°ƒç”¨å‡½æ•° REPLACEMENT_FUNCTIONã€‚é¦–å…ˆåœ¨è¿›ç¨‹å†…å­˜ç©ºé—´ä»»æ„å¤„å†™å…¥ REPLACEMENT_FUNCTION çš„å®šä¹‰ï¼š\nREPLACEMENT_FUNCTION: push ebp mov ebp, esp ... mov esp, ebp pop ebp ret ç„¶åä¿®æ”¹åŸå‡½æ•°çš„å†…å®¹ï¼š\nLABEL: # æ ‡å·ä¸å å­—èŠ‚ jmp REPLACEMENT_FUNCTION # å 5å­—èŠ‚ï¼Œåˆšå¥½äº”ä¸ªnop FUNCTION: # å‡½æ•°å…¥å£æ ‡å·ï¼Œä¸å å­—èŠ‚ jmp LABEL # è¿‘è·³æŒ‡ä»¤ï¼Œå 2å­—èŠ‚ï¼Œè·³è·ƒåˆ°ä¸Šæ–¹ï¼Œå³ä½¿æˆªè·å¤±è´¥ä¹Ÿä¸å½±å“åŸå‡½æ•°æ‰§è¡Œ push ebp mov ebp, esp ... å°† 5 ä¸ªnopæ¢æˆä¸€ä¸ªjmpæŒ‡ä»¤ï¼Œç„¶åå°†å ç”¨ä¸¤ä¸ªå­—èŠ‚çš„mov edi,ediæ¢æˆå¦ä¸€ä¸ªjmpæŒ‡ä»¤ã€‚å› ä¸ºè¿™ä¸ªjmpæŒ‡ä»¤è·³è½¬çš„è·ç¦»éå¸¸è¿‘ï¼Œå› æ­¤è¢«æ±‡ç¼–å™¨ç¿»è¯‘æˆäº†ä¸€ä¸ªâ€œè¿‘è·³â€æŒ‡ä»¤ï¼Œè¿™ç§æŒ‡ä»¤åªå ç”¨ä¸¤ä¸ªå­—èŠ‚ã€‚ä½†åªèƒ½è·³è·ƒåˆ°å½“å‰åœ°å€å‰å 127 ä¸ªå­—èŠ‚èŒƒå›´çš„ç›®æ ‡ä½ç½®ã€‚\nè¿™é‡Œçš„æ›¿æ¢æœºåˆ¶ï¼Œå¯ä»¥å®ç°ä¸€ç§å«åšé’©å­ï¼ˆHOOKï¼‰çš„æŠ€æœ¯ï¼Œå…è®¸ç”¨æˆ·åœ¨æŸæ—¶åˆ»æˆªè·ç‰¹å®šå‡½æ•°çš„è°ƒç”¨ã€‚\nå‡½æ•°ä¼ é€’å‚æ•°æ—¶å‹æ ˆé¡ºåºï¼Œä¼ é€’å‚æ•°æ˜¯å¯„å­˜å™¨ä¼ å‚è¿˜æ˜¯æ ˆä¼ å‚ç­‰ç­‰éƒ½éœ€è¦éµå®ˆä¸€å®šçš„çº¦å®šï¼Œå¦åˆ™å‡½æ•°å°†æ— æ³•æ­£ç¡®æ‰§è¡Œï¼Œè¿™æ ·çš„çº¦å®šç§°ä¸ºè°ƒç”¨æƒ¯ä¾‹ã€‚\nä¸€ä¸ªè°ƒç”¨æƒ¯ä¾‹ä¸€èˆ¬ä¼šè§„å®šå¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\nå‡½æ•°å‚æ•°çš„ä¼ é€’é¡ºåºå’Œæ–¹å¼ è°ƒç”¨æ–¹å‹æ ˆï¼Œå‡½æ•°è‡ªå·±ä»æ ˆç”¨å–å‚æ•° è°ƒç”¨æ–¹å‹æ ˆé¡ºåºï¼šä»å·¦è‡³å³ï¼Œè¿˜æ˜¯ä»å³è‡³å·¦ï¼Ÿ æ ˆçš„ç»´æŠ¤æ–¹å¼ å‚æ•°å‡ºæ ˆï¼Œå¯ä»¥ç”±è°ƒç”¨æ–¹å®Œæˆè¿˜æ˜¯ç”±å‡½æ•°è‡ªå·±å®Œæˆï¼Ÿ åå­—ä¿®é¥°çš„ç­–ç•¥ ä¸ºäº†é“¾æ¥çš„æ—¶å€™å¯¹è°ƒç”¨æƒ¯ä¾‹è¿›è¡ŒåŒºåˆ†ï¼Œè°ƒç”¨æƒ¯ä¾‹è¦å¯¹å‡½æ•°æœ¬èº«çš„åå­—è¿›è¡Œä¿®é¥°ï¼Œä¸åŒè°ƒç”¨æƒ¯ä¾‹æœ‰ä¸åŒçš„åå­—ä¿®é¥°ç­–ç•¥ æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šè°ƒç”¨æƒ¯ä¾‹çš„å‡½æ•°é»˜è®¤æ˜¯cdeclæƒ¯ä¾‹ int _cdecl foo(int n, float m) _cdel æ˜¯éæ ‡å‡†å…³é”®å­—ï¼Œåœ¨ä¸åŒç¼–è¯‘å™¨ä¸­å†™æ³•ä¸åŒï¼Œåœ¨ gcc ä¸­ä½¿ç”¨çš„æ˜¯__attribute__((cdecl))\né™„å½• æ–‡ä»¶å è‹±æ–‡å Linux æ‰©å±•å è‹±æ–‡å Windows æ‰©å±•å åŠŸèƒ½ DSO-Dynamic Shared Objects ELF åŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼ŒåŠ¨æ€å…±äº«å¯¹è±¡ï¼Œå…±äº«å¯¹è±¡ .so DLL-Dynamic Linking Library åŠ¨æ€é“¾æ¥åº“ .dll 1111 Static Shared Library é™æ€å…±äº«åº“ 2222 2222 2222 2222 2222 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 ","permalink":"https://lifeislife.cn/posts/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","summary":"\u003ch2 id=\"é™æ€é“¾æ¥\"\u003eé™æ€é“¾æ¥\u003c/h2\u003e\n\u003cp\u003eåº“æ˜¯ä¸€ç»„ç›®æ ‡æ–‡ä»¶çš„åŒ…ï¼Œå°±æ˜¯ä¸€äº›å¸¸ç”¨çš„ä»£ç ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶åæ‰“åŒ…å­˜æ”¾ã€‚\u003c/p\u003e\n\u003ch2 id=\"ç¬¬ä¸‰ç« -ç›®æ ‡æ–‡ä»¶é‡Œæœ‰ä»€ä¹ˆ\"\u003eç¬¬ä¸‰ç«  ç›®æ ‡æ–‡ä»¶é‡Œæœ‰ä»€ä¹ˆ\u003c/h2\u003e\n\u003ch3 id=\"ç›®æ ‡æ–‡ä»¶çš„æ ¼å¼\"\u003eç›®æ ‡æ–‡ä»¶çš„æ ¼å¼\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eç›®æ ‡æ–‡ä»¶\u003c/strong\u003eä»ç»“æ„ä¸Šè®²ï¼Œå®ƒæ˜¯å·²ç»ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œåªæ˜¯è¿˜æ²¡æœ‰ç»è¿‡é“¾æ¥çš„è¿‡ç¨‹ï¼Œå…¶ä¸­å¯èƒ½æœ‰äº›ç¬¦å·æˆ–è€…æœ‰äº›åœ°å€è¿˜æ²¡æœ‰è¢«è°ƒæ•´ã€‚\u003c/p\u003e","title":"ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ç¬”è®°"},{"content":"ä»€ä¹ˆæ˜¯ Die-to-Die æ¥å£ Authorï¼šSynopsys è¯‘ï¼šWhat is a Die-to-Die Interface? â€“ How it Works | Synopsys\nå®šä¹‰ è£¸ç‰‡åˆ°è£¸ç‰‡ï¼ˆDie2Dieï¼‰æ¥å£æ˜¯ä¸€ä¸ªåŠŸèƒ½å—ï¼Œå®ƒæä¾›ç»„è£…åœ¨åŒä¸€å°è£…ä¸­çš„ä¸¤ä¸ªç¡…ç®¡èŠ¯ä¹‹é—´çš„æ•°æ®æ¥å£ã€‚èŠ¯ç‰‡åˆ°èŠ¯ç‰‡æ¥å£åˆ©ç”¨éå¸¸çŸ­çš„é€šé“è¿æ¥å°è£…å†…çš„ä¸¤ä¸ªèŠ¯ç‰‡ï¼Œä»¥å®ç°åŠŸç‡æ•ˆç‡å’Œéå¸¸é«˜çš„å¸¦å®½æ•ˆç‡ï¼Œè¿™è¶…å‡ºäº†ä¼ ç»ŸèŠ¯ç‰‡åˆ°èŠ¯ç‰‡æ¥å£æ‰€èƒ½è¾¾åˆ°çš„æ•ˆæœã€‚\nDie2Die æ¥å£é€šå¸¸ç”± PHY å’Œæ§åˆ¶å™¨å—ç»„æˆï¼Œæ§åˆ¶å™¨å—åœ¨ä¸¤ä¸ª die ä¸Šçš„å†…éƒ¨äº’è¿ç»“æ„ä¹‹é—´æä¾›æ— ç¼è¿æ¥ã€‚Die2Die çš„ PHY ä½¿ç”¨é«˜é€Ÿ SerDes æ¶æ„æˆ–é«˜å¯†åº¦å¹¶è¡Œæ¶æ„å®ç°ï¼Œç»è¿‡ä¼˜åŒ–ä»¥æ”¯æŒå¤šç§å…ˆè¿›çš„ 2Dã€2.5D å’Œ 3D å°è£…æŠ€æœ¯ã€‚\nDie2Die æ¥å£æ˜¯æ¨åŠ¨è¡Œä¸šè¶‹åŠ¿ä»å•ç‰‡ SoC è®¾è®¡è½¬å‘åŒä¸€å°è£…ä¸­çš„å¤š Die SoC ç»„ä»¶çš„å…³é”®æ¨åŠ¨åŠ›ã€‚è¿™ç§æ–¹æ³•å‡è½»äº†äººä»¬å¯¹å°å‹å·¥è‰ºèŠ‚ç‚¹çš„é«˜æˆæœ¬/ä½äº§é‡æ—¥ç›Šå¢é•¿çš„æ‹…å¿§ï¼Œå¹¶æä¾›äº†é¢å¤–çš„äº§å“æ¨¡å—åŒ–å’Œçµæ´»æ€§ã€‚\nDie-to-Die æ¥å£å¦‚ä½•å·¥ä½œï¼Ÿ Die2Die çš„æ¥å£ï¼Œå°±åƒä»»ä½•å…¶ä»–èŠ¯ç‰‡åˆ°èŠ¯ç‰‡çš„æ¥å£ä¸€æ ·ï¼Œåœ¨ä¸¤ä¸ªèŠ¯ç‰‡ä¹‹é—´å»ºç«‹äº†å¯é çš„æ•°æ®é“¾è·¯ã€‚\næ¥å£åœ¨é€»è¾‘ä¸Šåˆ†ä¸ºç‰©ç†å±‚ã€é“¾è·¯å±‚å’Œäº‹åŠ¡å±‚ã€‚å®ƒåœ¨èŠ¯ç‰‡è¿è¡ŒæœŸé—´å»ºç«‹å’Œç»´æŠ¤é“¾è·¯ï¼ŒåŒæ—¶å‘åº”ç”¨ç¨‹åºæä¾›è¿æ¥åˆ°å†…éƒ¨äº’è¿ç»“æ„çš„æ ‡å‡†åŒ–å¹¶è¡Œæ¥å£ã€‚\né€šè¿‡æ·»åŠ è¯¸å¦‚å‰å‘çº é”™ (FEC) å’Œ/æˆ–å¾ªç¯å†—ä½™ç  (CRC) å’Œé‡è¯•ç­‰é”™è¯¯æ£€æµ‹å’Œçº æ­£æœºåˆ¶æ¥ä¿è¯é“¾è·¯å¯é æ€§ã€‚\nç‰©ç†å±‚æ¶æ„å¯ä»¥æ˜¯åŸºäº SerDes æˆ–åŸºäºå¹¶è¡Œçš„ã€‚\nåŸºäº SerDes çš„æ¶æ„åŒ…æ‹¬å¹¶è¡Œåˆ°ä¸²è¡Œï¼ˆä¸²è¡Œåˆ°å¹¶è¡Œï¼‰æ•°æ®è½¬æ¢ã€é˜»æŠ—åŒ¹é…ç”µè·¯å’Œæ—¶é’Ÿæ•°æ®æ¢å¤æˆ–æ—¶é’Ÿè½¬å‘åŠŸèƒ½ã€‚å®ƒå¯ä»¥æ”¯æŒæ›´é«˜å¸¦å®½çš„ NRZ ä¿¡ä»¤æˆ– PAM-4 ä¿¡ä»¤ï¼Œæœ€é«˜å¯è¾¾ 112 Gbpsã€‚SerDes æ¶æ„çš„ä¸»è¦ä½œç”¨æ˜¯å°½é‡å‡å°‘ç®€å• 2D ç±»å‹å°è£…ï¼ˆå¦‚æœ‰æœºåŸºæ¿ï¼‰ä¸­çš„ I/O äº’è¿æ•°é‡ã€‚\nåŸºäºå¹¶è¡Œçš„æ¶æ„åŒ…æ‹¬è®¸å¤šå¹¶è¡Œçš„ä½é€Ÿç®€å•æ”¶å‘å™¨ï¼Œæ¯ä¸ªæ”¶å‘å™¨éƒ½ç”±é©±åŠ¨å™¨å’Œå…·æœ‰è½¬å‘æ—¶é’ŸæŠ€æœ¯çš„æ¥æ”¶å™¨ç»„æˆï¼Œä»¥è¿›ä¸€æ­¥ç®€åŒ–æ¶æ„ã€‚å®ƒæ”¯æŒ DDR ç±»å‹çš„ä¿¡ä»¤ã€‚å¹¶è¡Œæ¶æ„çš„ä¸»è¦ä½œç”¨æ˜¯æœ€å¤§é™åº¦åœ°é™ä½å¯†é›† 2.5D å‹å°è£…ï¼ˆå¦‚ç¡…ä¸­ä»‹å±‚ï¼‰çš„åŠŸè€—ã€‚\nDie2Die çš„ä¼˜åŠ¿ ç°ä»£èŠ¯ç‰‡å®ç°è¶‹å‘äºåŸºäºåœ¨å°è£…ä¸­ç»„è£…å¤šä¸ªè£¸ç‰‡ä»¥æé«˜æ¨¡å—åŒ–å’Œçµæ´»æ€§çš„è§£å†³æ–¹æ¡ˆã€‚å½“ï¼ˆå•ç‰‡ï¼‰èŠ¯ç‰‡å°ºå¯¸æ¥è¿‘å…¨å…‰ç½©å°ºå¯¸æ—¶ï¼Œè¿™ç§å¤šç®¡èŠ¯æ–¹æ³•è¿˜é€šè¿‡å°†åŠŸèƒ½åˆ†æˆå‡ ä¸ªç®¡èŠ¯æ¥æé«˜äº§é‡ï¼Œä»è€Œä¿ƒè¿›æ›´å…·æˆæœ¬æ•ˆç›Šçš„è§£å†³æ–¹æ¡ˆã€‚\nDie ä¹‹é—´çš„æ¥å£å¿…é¡»æ»¡è¶³æ­¤ç±»ç³»ç»Ÿçš„æ‰€æœ‰å…³é”®è¦æ±‚ï¼š\nç”µæºæ•ˆç‡ã€‚å¤šèŠ¯ç‰‡ç³»ç»Ÿå®ç°åº”è¯¥ä¸ç­‰æ•ˆçš„å•ç‰‡å®ç°ä¸€æ ·èŠ‚èƒ½ã€‚Die2Die é“¾æ¥ä½¿ç”¨çŸ­è·ç¦»ã€ä½æŸè€—çš„ä¿¡é“ï¼Œæ²¡æœ‰æ˜æ˜¾çš„ä¸è¿ç»­æ€§ã€‚PHY æ¶æ„åˆ©ç”¨è‰¯å¥½çš„é€šé“ç‰¹æ€§æ¥é™ä½ PHY å¤æ‚æ€§å¹¶èŠ‚çœåŠŸè€—ã€‚\nä½å»¶è¿Ÿã€‚å°†æœåŠ¡å™¨æˆ–åŠ é€Ÿå™¨ SoC åˆ’åˆ†ä¸ºå¤šä¸ª Die ä¸åº”å¯¼è‡´å†…å­˜æ¶æ„ä¸ç»Ÿä¸€ï¼Œå› ä¸ºè®¿é—®ä¸åŒ Die ä¸­çš„å†…å­˜å…·æœ‰æ˜¾ç€ä¸åŒçš„å»¶è¿Ÿã€‚Die2Die æ¥å£å®ç°äº†ç®€åŒ–çš„åè®®ï¼Œå¹¶ç›´æ¥è¿æ¥åˆ°èŠ¯ç‰‡äº’è¿ç»“æ„ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å»¶è¿Ÿã€‚\né«˜å¸¦å®½æ•ˆç‡ã€‚é«˜çº§æœåŠ¡å™¨ã€åŠ é€Ÿå™¨å’Œç½‘ç»œäº¤æ¢æœºéœ€è¦åœ¨ Die ä¹‹é—´ä¼ è¾“å¤§é‡æ•°æ®ã€‚Die2Die æ¥å£å¿…é¡»èƒ½å¤Ÿæ”¯æŒæ‰€æœ‰éœ€è¦çš„å¸¦å®½ï¼ŒåŒæ—¶å‡å°‘ Die è¾¹ç¼˜çš„å ç”¨ã€‚é€šå¸¸ä½¿ç”¨ä¸¤ç§æ›¿ä»£æ–¹æ¡ˆæ¥å®ç°æ­¤ç›®æ ‡ï¼šé€šè¿‡ä»¥éå¸¸é«˜çš„æ¯é€šé“æ•°æ®é€Ÿç‡ï¼ˆé«˜è¾¾ 112 Gbpsï¼‰éƒ¨ç½² PHY æ¥æœ€å°åŒ–æ‰€éœ€é€šé“çš„æ•°é‡ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨æ›´ç²¾ç»†çš„å‡¸å—é—´è·ï¼ˆå¾®å‡¸å—ï¼‰æ¥å¢åŠ  PHY çš„å¯†åº¦) åœ¨å¤§é‡å¹¶è¡ŒåŒ–ä»¥å®ç°æ‰€éœ€å¸¦å®½çš„ä½æ•°æ®é€Ÿç‡é€šé“ï¼ˆé«˜è¾¾ 8 Gbps/é€šé“ï¼‰ä¸Šã€‚\nå¥å£®çš„é“¾æ¥ã€‚Die2Die é“¾æ¥å¿…é¡»æ²¡æœ‰é”™è¯¯ã€‚è¯¥æ¥å£å¿…é¡»å®ç°è¶³å¤Ÿå¼ºå¤§çš„ä½å»¶è¿Ÿé”™è¯¯æ£€æµ‹å’Œçº æ­£æœºåˆ¶ï¼Œä»¥æ£€æµ‹æ‰€æœ‰é”™è¯¯å¹¶ä»¥ä½å»¶è¿Ÿçº æ­£å®ƒä»¬ã€‚è¿™äº›æœºåˆ¶é€šå¸¸åŒ…æ‹¬ FEC å’Œé‡è¯•åè®®ã€‚\nDie-to-Die æ¥å£ç”¨ä¾‹ é€šè¿‡å°†å¤šä¸ª Die ç»„åˆåˆ°ä¸€ä¸ªå°è£…ä¸­ï¼Œå°èŠ¯ç‰‡æä¾›äº†å¦ä¸€ç§æ‰©å±•æ‘©å°”å®šå¾‹çš„æ–¹æ³•ï¼ŒåŒæ—¶å®ç°äº†äº§å“æ¨¡å—åŒ–å’Œå·¥è‰ºèŠ‚ç‚¹ä¼˜åŒ–ã€‚å°èŠ¯ç‰‡ç”¨äºè®¡ç®—å¯†é›†å‹ã€å·¥ä½œè´Ÿè½½ç¹é‡çš„åº”ç”¨ç¨‹åºï¼Œå¦‚é«˜æ€§èƒ½è®¡ç®— (HPC)ã€‚\né’ˆå¯¹ HPCã€ç½‘ç»œã€è¶…å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒå’Œäººå·¥æ™ºèƒ½ (AI) ç­‰åº”ç”¨ç¨‹åºçš„ die-to-die æ¥å£æœ‰å››ä¸ªä¸»è¦ç”¨ä¾‹ï¼š\nScale SoC ç›®æ ‡æ˜¯é€šè¿‡è™šæ‹Ÿï¼ˆè£¸ç‰‡åˆ°è£¸ç‰‡ï¼‰è¿æ¥æ¥è¿æ¥è£¸ç‰‡ï¼Œä»è€Œæé«˜è®¡ç®—èƒ½åŠ›å¹¶ä¸ºæœåŠ¡å™¨å’Œ AI åŠ é€Ÿå™¨åˆ›å»ºå¤šä¸ª SKUï¼Œä»è€Œå®ç°è£¸ç‰‡ä¹‹é—´çš„ç´§å¯†è€¦åˆæ€§èƒ½ã€‚\nSplit SoC ç›®æ ‡æ˜¯å¯ç”¨éå¸¸å¤§çš„ SoCã€‚å¤§å‹è®¡ç®—å’Œç½‘ç»œäº¤æ¢æœºèŠ¯ç‰‡æ­£åœ¨æ¥è¿‘å…‰ç½©é™åˆ¶ã€‚å°†å®ƒä»¬åˆ†æˆå‡ ä¸ªè£¸ç‰‡ä¼šå¸¦æ¥æŠ€æœ¯å¯è¡Œæ€§ã€æé«˜äº§é‡ã€é™ä½æˆæœ¬å¹¶æ‰©å±•æ‘©å°”å®šå¾‹ã€‚\nAggregate å…¶ç›®çš„æ˜¯èšåˆåœ¨ä¸åŒæ¨¡å…·ä¸­å®ç°çš„å¤šç§ä¸åŒçš„åŠŸèƒ½ï¼Œä»¥åˆ©ç”¨æ¯ä¸ªåŠŸèƒ½çš„æœ€ä½³å·¥è‰ºèŠ‚ç‚¹ï¼Œé™ä½åŠŸç‡ï¼Œå¹¶æ”¹å–„ FPGAã€æ±½è½¦å’Œ 5G åŸºç«™ç­‰åº”ç”¨çš„å¤–å½¢å°ºå¯¸ã€‚\nDisaggregate ç›®æ ‡æ˜¯å°†ä¸­å¤®èŠ¯ç‰‡ä¸ I/O èŠ¯ç‰‡åˆ†ç¦»ï¼Œä»¥ä¾¿å°†ä¸­å¤®èŠ¯ç‰‡è½»æ¾è¿ç§»åˆ°é«˜çº§å·¥è‰ºï¼ŒåŒæ—¶å°† I/O èŠ¯ç‰‡ä¿æŒåœ¨ä¿å®ˆèŠ‚ç‚¹ä¸­ï¼Œä»¥é™ä½äº§å“æ¼”è¿›çš„é£é™©/æˆæœ¬ï¼Œå®ç°é‡ç”¨å¹¶ç¼©çŸ­æ—¶é—´åœ¨æœåŠ¡å™¨ã€FPGAã€ç½‘ç»œäº¤æ¢æœºå’Œå…¶ä»–åº”ç”¨ç¨‹åºä¸­æŠ•æ”¾å¸‚åœºã€‚\nDie-to-Die æ¥å£å’Œ Synopsys Synopsys ç»“åˆäº†å¹¿æ³›çš„ Die2Die 112G USR/XSR å’Œ HBI PHY IPã€æ§åˆ¶å™¨ IP å’Œä¸­ä»‹å±‚ä¸“ä¸šçŸ¥è¯†äº§å“ç»„åˆï¼Œæä¾›å…¨é¢çš„ die-to-die IP è§£å†³æ–¹æ¡ˆï¼Œä»¥æ”¯æŒèŠ¯ç‰‡æ‹†åˆ†ã€èŠ¯ç‰‡åˆ†è§£ã€è®¡ç®—æ‰©å±•å’Œèšåˆçš„åŠŸèƒ½ã€‚åŸºäº SerDes çš„ 112G USR/XSR PHY å’ŒåŸºäºå¹¶è¡Œçš„ 8G OpenHBI PHY å¯ç”¨äºé«˜çº§ FinFET å·¥è‰ºã€‚å¯é…ç½®æ§åˆ¶å™¨ä½¿ç”¨å…·æœ‰é‡æ”¾å’Œå¯é€‰ (FEC) åŠŸèƒ½çš„çº é”™æœºåˆ¶ï¼Œä»¥æœ€å¤§é™åº¦åœ°é™ä½å¯é èŠ¯ç‰‡åˆ°èŠ¯ç‰‡é“¾æ¥çš„è¯¯ç ç‡ã€‚å®ƒæ”¯æŒç”¨äºè¿è´¯å’Œéè¿è´¯æ•°æ®é€šä¿¡çš„ ArmÂ® ç‰¹å®šæ¥å£ã€‚\nQ\u0026amp;A PHY æ¶æ„ SerDes æ¶æ„ reticle LCD å‚æ©è†œç‰ˆå« Mask,Fab é‡Œæ©è†œç‰ˆå« reticleï¼Œä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - çŸ¥ä¹ åŸæ–‡å‚è€ƒ What is a Die-to-Die Interface? â€“ How it Works | Synopsys\n","permalink":"https://lifeislife.cn/posts/zh-%E4%BB%80%E4%B9%88%E6%98%AFdie-to-die%E6%8E%A5%E5%8F%A3/","summary":"\u003ch1 id=\"ä»€ä¹ˆæ˜¯-die-to-die-æ¥å£\"\u003eä»€ä¹ˆæ˜¯ Die-to-Die æ¥å£\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAuthorï¼šSynopsys\nè¯‘ï¼š\u003ca href=\"https://www.synopsys.com/glossary/what-is-die-to-die-interface.html\"\u003eWhat is a Die-to-Die Interface? â€“ How it Works | Synopsys\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"å®šä¹‰\"\u003eå®šä¹‰\u003c/h2\u003e\n\u003cp\u003eè£¸ç‰‡åˆ°è£¸ç‰‡ï¼ˆDie2Dieï¼‰æ¥å£æ˜¯ä¸€ä¸ªåŠŸèƒ½å—ï¼Œå®ƒæä¾›ç»„è£…åœ¨åŒä¸€å°è£…ä¸­çš„ä¸¤ä¸ªç¡…ç®¡èŠ¯ä¹‹é—´çš„æ•°æ®æ¥å£ã€‚èŠ¯ç‰‡åˆ°èŠ¯ç‰‡æ¥å£åˆ©ç”¨éå¸¸çŸ­çš„é€šé“è¿æ¥å°è£…å†…çš„ä¸¤ä¸ªèŠ¯ç‰‡ï¼Œä»¥å®ç°åŠŸç‡æ•ˆç‡å’Œéå¸¸é«˜çš„å¸¦å®½æ•ˆç‡ï¼Œè¿™è¶…å‡ºäº†ä¼ ç»ŸèŠ¯ç‰‡åˆ°èŠ¯ç‰‡æ¥å£æ‰€èƒ½è¾¾åˆ°çš„æ•ˆæœã€‚\u003c/p\u003e","title":"ZH-ä»€ä¹ˆæ˜¯ Die-to-Die æ¥å£"},{"content":"å¯æ‰§è¡Œç¨‹åºæ”¾åˆ°æŒ‡å®šç›®å½• é»˜è®¤æƒ…å†µä¸‹ QtCreator ä¼šå°†ç¼–è¯‘é“¾æ¥åçš„å¯æ‰§è¡Œç¨‹åºä¸ä¸­é—´ç”Ÿæˆçš„æ–‡ä»¶é˜²ç›—build-***-æ–‡ä»¶ä¸­ï¼Œå¦‚ä½•èƒ½å°†å¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆåœ¨æŒ‡å®šç›®å½•ï¼Ÿ\nä¿®æ”¹.pro:\nCONFIG(debug ,debug|release){ DESTDIR = ../debug }else{ DESTDIR = ../release } debugç‰ˆæœ¬æ”¾åœ¨../debugç›®å½•ä¸­ï¼Œreleaseç‰ˆæœ¬æ”¾åœ¨../releaseç›®å½•ä¸­ã€‚\nå±è”½ qDebug è¾“å‡º CONFIG(debug ,debug|release){ DEFINES -= QT_NO_DEBUG_OUTPUT }else{ DEFINES += QT_NO_DEBUG_OUTPUT } QT_NO_DEBUG_OUTPUTå³ä¸ºå±è”½ qDebug è¾“å‡ºçš„å®å®šä¹‰ï¼Œå¯ä»¥åœ¨debugç‰ˆæœ¬ä¸­ä¸å±è”½ qDebug è¾“å‡ºï¼Œreleaseç‰ˆæœ¬ä¸­å±è”½ qDebug è¾“å‡ºã€‚\nå‚è€ƒ QT å±è”½ qDebug()ã€qWarning() æ‰“å°ä¿¡æ¯_qq_35173114 çš„åšå®¢-CSDN åšå®¢_qwarning QT çš„ QDebug æ— æ³•è¾“å‡ºæ—¥å¿—_amwha çš„ä¸“æ  - ç¨‹åºå‘˜å®…åŸºåœ°_qdebug æ‰“å°ä¸å‡ºæ¥ - ç¨‹åºå‘˜å®…åŸºåœ° Qt Creator ä¸­çš„.pro æ–‡ä»¶çš„è¯¦è§£_hebbely çš„åšå®¢-CSDN åšå®¢_qt çš„ pro æ–‡ä»¶\n","permalink":"https://lifeislife.cn/posts/qt%E7%BC%96%E8%AF%91%E5%90%8E%E7%9A%84%E7%A8%8B%E5%BA%8F%E6%94%BE%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E5%B1%8F%E8%94%BDqdebug%E8%BE%93%E5%87%BA/","summary":"\u003ch2 id=\"å¯æ‰§è¡Œç¨‹åºæ”¾åˆ°æŒ‡å®šç›®å½•\"\u003eå¯æ‰§è¡Œç¨‹åºæ”¾åˆ°æŒ‡å®šç›®å½•\u003c/h2\u003e\n\u003cp\u003eé»˜è®¤æƒ…å†µä¸‹ QtCreator ä¼šå°†ç¼–è¯‘é“¾æ¥åçš„å¯æ‰§è¡Œç¨‹åºä¸ä¸­é—´ç”Ÿæˆçš„æ–‡ä»¶é˜²ç›—\u003ccode\u003ebuild-***-\u003c/code\u003eæ–‡ä»¶ä¸­ï¼Œå¦‚ä½•èƒ½å°†å¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆåœ¨æŒ‡å®šç›®å½•ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eä¿®æ”¹\u003ccode\u003e.pro\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eCONFIG(debug ,debug|release){\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    DESTDIR = ../debug\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e}else{\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    DESTDIR = ../release\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003edebug\u003c/code\u003eç‰ˆæœ¬æ”¾åœ¨\u003ccode\u003e../debug\u003c/code\u003eç›®å½•ä¸­ï¼Œ\u003ccode\u003erelease\u003c/code\u003eç‰ˆæœ¬æ”¾åœ¨\u003ccode\u003e../release\u003c/code\u003eç›®å½•ä¸­ã€‚\u003c/p\u003e","title":"Qt ç¼–è¯‘åçš„ç¨‹åºæ”¾åˆ°æŒ‡å®šç›®å½•ï¼Œå±è”½ qDebug è¾“å‡º"},{"content":"QOM ç®€ä»‹ QOM(QEMU Object Model) æ˜¯ QEMU çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºæè¿°è™šæ‹Ÿæœºçš„ç»“æ„ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºçš„ CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œã€è¾“å…¥è¾“å‡ºè®¾å¤‡ç­‰ã€‚QEMU ä¸ºäº†æ–¹ä¾¿æ•´ä¸ªç³»ç»Ÿçš„æ„å»ºï¼Œå®ç°äº†è‡ªå·±çš„ä¸€å¥—çš„é¢å‘å¯¹è±¡æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ QOM(QEMU Object Model)ã€‚å®ƒèƒ½å¤Ÿæ–¹ä¾¿çš„è¡¨ç¤ºå„ä¸ªè®¾å¤‡ï¼ˆDeviceï¼‰ä¸æ€»çº¿ï¼ˆBusï¼‰ä¹‹é—´çš„å…³ç³»ã€‚\nè¿™ä¸ªæ¨¡å‹ä¸»è¦åŒ…å«å››ä¸ªç»“æ„ä½“ï¼š\nObject: æ˜¯æ‰€æœ‰å¯¹è±¡çš„ åŸºç±» Base Object ObjectClass: æ˜¯æ‰€æœ‰ç±»å¯¹è±¡çš„åŸºç±» TypeInfoï¼šæ˜¯ç”¨æˆ·ç”¨æ¥å®šä¹‰ä¸€ä¸ªÂ TypeÂ çš„å·¥å…·å‹çš„æ•°æ®ç»“æ„ TypeImplï¼šTypeInfo æŠ½è±¡æ•°æ®ç»“æ„ï¼ŒTypeInfo çš„å±æ€§ä¸ TypeImpl çš„å±æ€§å¯¹åº” åœ¨ QEMU é‡Œè¦åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡éœ€è¦å®Œæˆå››æ­¥ï¼š\nå°† TypeInfo æ³¨å†Œ TypeImpl å®ä¾‹åŒ– Classï¼ˆObjectClassï¼‰ å®ä¾‹åŒ– Object æ·»åŠ  Property \u003c!DOCTYPE html\u003e Responsive Image QOM ä¸­çš„é¢å‘å¯¹è±¡ ç»§æ‰¿ åœ¨ QEMU ä¸­é€šè¿‡ TypeInfo æ¥å®šä¹‰ä¸€ä¸ªç±»ã€‚\nä¾‹å¦‚ x86_base_cpu_type_info å°±æ˜¯ä¸€ä¸ª classï¼Œ\nstatic const TypeInfo x86_base_cpu_type_info = { .name = X86_CPU_TYPE_NAME(\u0026#34;base\u0026#34;), .parent = TYPE_X86_CPU, .class_init = x86_cpu_base_class_init, }; åˆ©ç”¨ç»“æ„ä½“åŒ…å«æ¥å®ç°ç»§æ‰¿ã€‚è¿™åº”è¯¥æ˜¯æ‰€æœ‰çš„è¯­è¨€å®ç°ç»§æ‰¿çš„æ–¹æ³•ï¼Œåœ¨ C++ ä¸­ï¼Œç»“æ„ä½“åŒ…å«çš„æ“ä½œè¢«è¯­è¨€å†…éƒ¨å®ç°äº†ï¼Œè€Œ C è¯­è¨€éœ€è¦è‡ªå·±å®ç°ã€‚\nä¾‹å¦‚ x86_cpu_type_info çš„ parent æ˜¯ cpu_type_info, ä»–ä»¬çš„ç»“æ„ä½“åˆ†åˆ«æ˜¯ X86CPU å’Œ CPUStateã€‚\nstatic const TypeInfo x86_cpu_type_info = { .name = TYPE_X86_CPU, .parent = TYPE_CPU, // ... .instance_size = sizeof(X86CPU), }; static const TypeInfo cpu_type_info = { .name = TYPE_CPU, .parent = TYPE_DEVICE, // ... .instance_size = sizeof(CPUState), }; åœ¨ X86CPU ä¸­åŒ…å«ä¸€ä¸ª CPUStateã€‚\nstruct X86CPU { /*\u0026lt; private \u0026gt;*/ CPUState parent_obj; /*\u0026lt; public \u0026gt;*/ CPUNegativeOffsetState neg; é™æ€æˆå‘˜ é™æ€æˆå‘˜å˜é‡å¯ä»¥åœ¨ç±»çš„å¤šä¸ªå¯¹è±¡ä¸­è®¿é—®ï¼Œä½†æ˜¯è¦åœ¨ç±»å¤–å£°æ˜ã€‚ä¸åŒå¯¹è±¡è®¿é—®çš„å…¶å®æ˜¯åŒä¸€ä¸ªå®ä½“ï¼Œé™æ€æˆå‘˜å˜é‡è¢«å¤šä¸ªå¯¹è±¡å…±äº«ã€‚\nstatic const TypeInfo x86_cpu_type_info = { .name = TYPE_X86_CPU, .parent = TYPE_CPU, .instance_size = sizeof(X86CPU), .instance_init = x86_cpu_initfn, .instance_post_init = x86_cpu_post_initfn, .abstract = true, .class_size = sizeof(X86CPUClass), .class_init = x86_cpu_common_class_init, }; å…¶ä¸­ X86CPU æè¿°çš„æ˜¯éé™æ€æˆå‘˜ï¼Œè€Œ X86CPUClass æè¿°çš„æ˜¯é™æ€çš„æˆå‘˜ã€‚ä¹Ÿå°±æ˜¯è¯´class_initåˆå§‹åŒ–é™æ€æˆå‘˜ï¼Œinstance_initåˆå§‹åŒ–éé™æ€æˆå‘˜ã€‚\né‚£ä¹ˆä½•æ—¶åˆå§‹åŒ–é™æ€æˆå‘˜å‘¢ï¼Ÿé¦–å…ˆå¾—å‘Šè¯‰ç³»ç»Ÿï¼Œå’±æœ‰class_initè¿™ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œç­‰éœ€è¦çš„æ—¶å€™éšæ—¶å¯ä»¥è°ƒç”¨å®ƒåˆå§‹åŒ–ï¼Œæ‰€æœ‰å…ˆè§£å†³å¦‚ä½•å°†è¿™ä¸ªåˆå§‹åŒ–å‡½æ•°æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼Ÿ\nåœ¨target/i386/cpu.cæœ€åä½¿ç”¨äº†type_initã€‚åœ¨qemu/include/qemu/module.hä¸­æœ‰ä¸€ä¸ªtype_initå®å®šä¹‰ï¼Œé™¤äº†type_initè¿˜æœ‰å…¶ä»–å®ï¼Œæ¯”å¦‚block_initï¼Œopts_initç­‰ã€‚æ¯ä¸ªå®éƒ½è¡¨ç¤ºä¸€ç±»moduleï¼Œé€šè¿‡module_initæ„é€ å‡ºæ¥ã€‚æˆ‘ä»¬å±•å¼€è¿™ä¸ªå®ï¼Œ\nstatic void __attribute__((constructor)) do_qemu_init_x86_cpu_register_types(void) { register_module_init(x86_cpu_register_types, MODULE_INIT_QOM); } é€šè¿‡ gcc æ‰©å±•å±æ€§__attribute__((constructor))å¯ä»¥è®© do_qemu_init_x86_cpu_register_types åœ¨è¿è¡Œ main å‡½æ•°ä¹‹å‰è¿è¡Œã€‚ register_module_init ä¼šè®© x86_cpu_register_types è¿™ä¸ªå‡½æ•°æŒ‚è½½åˆ° init_type_list[MODULE_INIT_QOM] è¿™ä¸ªé“¾è¡¨ä¸Šã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ°åº•ï¼Œæ‰€æœ‰çš„ TypeInfo é€šè¿‡ type_init éƒ½è¢«æ”¾åˆ° type_table ä¸Šäº†ï¼Œä¹‹åé€šè¿‡ Typeinfo çš„åç§°è°ƒç”¨ type_table_lookup è·å–åˆ° TypeImpl äº†ã€‚\nåˆ°è¿™é‡Œï¼Œå°†TYPE_X86_CPUæ³¨å†Œè¿›ç±»ç³»ç»Ÿï¼ŒåŒ…æ‹¬å…¶åˆå§‹åŒ–å‡½æ•°ï¼Œè¿™éƒ¨åˆ†ä¹Ÿå°±æ˜¯ QEMU ä¸­ç±»å‹çš„æ„é€ ã€‚é‚£ä¹ˆä½•æ—¶è°ƒç”¨é™æ€æˆå‘˜åˆå§‹åŒ–å‡½æ•°å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ç±»å‹çš„åˆå§‹åŒ–ã€‚\né™æ€æˆå‘˜æ˜¯æ‰€æœ‰çš„å¯¹è±¡å…¬ç”¨çš„ï¼Œå…¶åˆå§‹åŒ–æ˜¾ç„¶è¦å‘ç”Ÿåœ¨æ‰€æœ‰çš„å¯¹è±¡åˆå§‹åŒ–ä¹‹å‰ã€‚\nmain qemu_init select_machine object_class_get_list object_class_foreach g_hash_table_foreach object_class_foreach_tramp type_initialize type_initialize x86_cpu_common_class_init select_machine éœ€è¦è·å–æ‰€æœ‰çš„ TYPE_MACHINE çš„ class, å…¶é¦–å…ˆä¼šè°ƒç”¨æ‰€æœ‰çš„class_listï¼Œå…¶ä¼šéå† type_tableï¼Œéå†çš„è¿‡ç¨‹ä¸­ä¼šé¡ºå¸¦ type_initialize æ‰€æœ‰çš„ TypeImpl è¿›è€Œè°ƒç”¨çš„ class_initã€‚\nè¯´å®Œç±»å‹çš„åˆå§‹åŒ–ï¼Œå†è®²ä¸€ä¸‹å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–éé™æ€æˆå‘˜ï¼Œä¹Ÿå°±æ˜¯instance_initåœ¨ä½•æ—¶è¢«è°ƒç”¨ï¼Ÿ\nå¯¹è±¡åˆå§‹åŒ–ï¼Œé€šè¿‡è°ƒç”¨ object_new æ¥å®ç°åˆå§‹åŒ–ã€‚\nobject_initialize_with_type åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ :Object::properties object_init_with_type å¦‚æœ object æœ‰ parentï¼Œé‚£ä¹ˆè°ƒç”¨ object_init_with_type é¦–å…ˆåˆå§‹åŒ– parent çš„ è°ƒç”¨TypeImpl::instance_init main qemu_init qmp_x_exit_preconfig qemu_init_board machine_run_board_init pc_init_v6_1 pc_init1 x86_cpus_init x86_cpu_new object_new object_new_with_type object_initialize_with_type object_init_with_type x86_cpu_initfn å¤šæ€ å¤šæ€æ˜¯æŒ‡åŒä¸€æ“ä½œä½œç”¨äºä¸åŒçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è§£é‡Šï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœã€‚ä¸ºäº†å®ç°å¤šæ€ï¼ŒQOM å®ç°äº†ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œå°±æ˜¯åŠ¨æ€ç±»å‹è½¬æ¢ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸å…³çš„å‡½æ•°ï¼Œå°†ä¸€ä¸ªObjectçš„æŒ‡é’ˆåœ¨è¿è¡Œæ—¶è½¬æ¢ä¸ºå­ç±»å¯¹è±¡çš„æŒ‡é’ˆï¼Œå¯ä»¥å°†ä¸€ä¸ªObjectClassçš„æŒ‡é’ˆåœ¨è¿è¡Œæ—¶è½¬æ¢ä¸ºå­ç±»çš„æŒ‡é’ˆã€‚è¿™æ ·å°±å¯ä»¥è°ƒç”¨å­ç±»ä¸­å®šä¹‰çš„å‡½æ•°æŒ‡é’ˆæ¥å®Œæˆç›¸åº”çš„åŠŸèƒ½ã€‚\nQEMU å®šä¹‰äº†ä¸€äº›åˆ—çš„å®å°æ¥è¿›è¡ŒåŠ¨æ€ç±»å‹è½¬æ¢ï¼š\n//include/qom/object.h /** * DECLARE_INSTANCE_CHECKER: * @InstanceType: instance struct name * @OBJ_NAME: the object name in uppercase with underscore separators * @TYPENAME: type name * * Direct usage of this macro should be avoided, and the complete * OBJECT_DECLARE_TYPE macro is recommended instead. * * This macro will provide the instance type cast functions for a * QOM type. */ #define DECLARE_INSTANCE_CHECKER(InstanceType, OBJ_NAME, TYPENAME) \\ static inline G_GNUC_UNUSED InstanceType * \\ OBJ_NAME(const void *obj) \\ { return OBJECT_CHECK(InstanceType, obj, TYPENAME); } /** * DECLARE_CLASS_CHECKERS: * @ClassType: class struct name * @OBJ_NAME: the object name in uppercase with underscore separators * @TYPENAME: type name * * Direct usage of this macro should be avoided, and the complete * OBJECT_DECLARE_TYPE macro is recommended instead. * * This macro will provide the class type cast functions for a * QOM type. */ #define DECLARE_CLASS_CHECKERS(ClassType, OBJ_NAME, TYPENAME) \\ static inline G_GNUC_UNUSED ClassType * \\ OBJ_NAME##_GET_CLASS(const void *obj) \\ { return OBJECT_GET_CLASS(ClassType, obj, TYPENAME); } \\ \\ static inline G_GNUC_UNUSED ClassType * \\ OBJ_NAME##_CLASS(const void *klass) \\ { return OBJECT_CLASS_CHECK(ClassType, klass, TYPENAME); } /** * DECLARE_OBJ_CHECKERS: * @InstanceType: instance struct name * @ClassType: class struct name * @OBJ_NAME: the object name in uppercase with underscore separators * @TYPENAME: type name * * Direct usage of this macro should be avoided, and the complete * OBJECT_DECLARE_TYPE macro is recommended instead. * * This macro will provide the three standard type cast functions for a * QOM type. */ #define DECLARE_OBJ_CHECKERS(InstanceType, ClassType, OBJ_NAME, TYPENAME) \\ DECLARE_INSTANCE_CHECKER(InstanceType, OBJ_NAME, TYPENAME) \\ \\ DECLARE_CLASS_CHECKERS(ClassType, OBJ_NAME, TYPENAME) /** * OBJECT_DECLARE_TYPE: * @InstanceType: instance struct name * @ClassType: class struct name * @MODULE_OBJ_NAME: the object name in uppercase with underscore separators * * This macro is typically used in a header file, and will: * * - create the typedefs for the object and class structs * - register the type for use with g_autoptr * - provide three standard type cast functions * * The object struct and class struct need to be declared manually. */ #define OBJECT_DECLARE_TYPE(InstanceType, ClassType, MODULE_OBJ_NAME) \\ typedef struct InstanceType InstanceType; \\ typedef struct ClassType ClassType; \\ \\ G_DEFINE_AUTOPTR_CLEANUP_FUNC(InstanceType, object_unref) \\ \\ DECLARE_OBJ_CHECKERS(InstanceType, ClassType, \\ MODULE_OBJ_NAME, TYPE_##MODULE_OBJ_NAME) /** * OBJECT: * @obj: A derivative of #Object * * Converts an object to a #Object. Since all objects are #Objects, * this function will always succeed. */ #define OBJECT(obj) \\ ((Object *)(obj)) /** * OBJECT_CLASS: * @class: A derivative of #ObjectClass. * * Converts a class to an #ObjectClass. Since all objects are #Objects, * this function will always succeed. */ #define OBJECT_CLASS(class) \\ ((ObjectClass *)(class)) /** * OBJECT_CHECK: * @type: The C type to use for the return value. * @obj: A derivative of @type to cast. * @name: The QOM typename of @type * * A type safe version of @object_dynamic_cast_assert. Typically each class * will define a macro based on this type to perform type safe dynamic_casts to * this object type. * * If an invalid object is passed to this function, a run time assert will be * generated. */ #define OBJECT_CHECK(type, obj, name) \\ ((type *)object_dynamic_cast_assert(OBJECT(obj), (name), \\ __FILE__, __LINE__, __func__)) /** * OBJECT_CLASS_CHECK: * @class_type: The C type to use for the return value. * @class: A derivative class of @class_type to cast. * @name: the QOM typename of @class_type. * * A type safe version of @object_class_dynamic_cast_assert. This macro is * typically wrapped by each type to perform type safe casts of a class to a * specific class type. */ #define OBJECT_CLASS_CHECK(class_type, class, name) \\ ((class_type *)object_class_dynamic_cast_assert(OBJECT_CLASS(class), (name), \\ __FILE__, __LINE__, __func__)) /** * OBJECT_GET_CLASS: * @class: The C type to use for the return value. * @obj: The object to obtain the class for. * @name: The QOM typename of @obj. * * This function will return a specific class for a given object. Its generally * used by each type to provide a type safe macro to get a specific class type * from an object. */ #define OBJECT_GET_CLASS(class, obj, name) \\ OBJECT_CLASS_CHECK(class, object_get_class(OBJECT(obj)), name) ä»¥OBJECT_DECLARE_TYPE(X86CPU, X86CPUClass, X86_CPU)ä¸ºä¾‹ï¼Œå®å±•å¼€å¦‚ä¸‹ï¼š\ntypedef struct X86CPU X86CPU; typedef struct X86CPUClass X86CPUClass; G_DEFINE_AUTOPTR_CLEANUP_FUNC(X86CPU, object_unref) static inline G_GNUC_UNUSED X86CPU *X86_CPU(const void *obj) { return ((X86CPU *)object_dynamic_cast_assert( ((Object *)(obj)), (TYPE_X86_CPU), \u0026#34;~/core/vn/docs/qemu/res/qom-macros.c\u0026#34;, 64, __func__)); } static inline G_GNUC_UNUSED X86CPUClass *X86_CPU_GET_CLASS(const void *obj) { return ((X86CPUClass *)object_class_dynamic_cast_assert( ((ObjectClass *)(object_get_class(((Object *)(obj))))), (TYPE_X86_CPU), \u0026#34;~/core/vn/docs/qemu/res/qom-macros.c\u0026#34;, 64, __func__)); } static inline G_GNUC_UNUSED X86CPUClass *X86_CPU_CLASS(const void *klass) { return ((X86CPUClass *)object_class_dynamic_cast_assert( ((ObjectClass *)(klass)), (TYPE_X86_CPU), \u0026#34;~/core/vn/docs/qemu/res/qom-macros.c\u0026#34;, 64, __func__)); } OBJECT_DECLARE_TYPEé€šå¸¸åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œæ•ˆæœæ˜¯ï¼š\nåˆ›å»ºäº†X86CPUå’ŒX86CPUClassçš„typedef ç”¨G_DEFINE_AUTOPTR_CLEANUP_FUNCæ³¨å†Œç±»å‹ åˆ›å»ºäº†ä¸‰ä¸ªç±»å‹è½¬æ¢å‡½æ•° X86_CPU : å°†ä»»ä½•ä¸€ä¸ª object æŒ‡é’ˆ è½¬æ¢ä¸º X86CPUï¼ˆObject è½¬å­å¯¹è±¡ï¼‰ X86_CPU_GET_CLASS : æ ¹æ® object æŒ‡é’ˆè·å–åˆ° X86CPUClass X86_CPU_CLASS : æ ¹æ® ObjectClass æŒ‡é’ˆè½¬æ¢åˆ° X86CPUClassï¼ˆåŸºç±»è½¬å­ç±»ï¼‰ è¿™é‡Œçš„è½¬æ¢ä¾èµ–å†…å­˜å¸ƒå±€ï¼Œå­ç±»å‹çš„ç¬¬ä¸€ä¸ªæˆå‘˜æ€»æ˜¯åŸºç±»å‹ã€‚å­ç±»è½¬åŸºç±»å°±å¾ˆå®¹æ˜“ï¼Œåªéœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢å°±å¯ä»¥å®ç°ã€‚\nå‚è€ƒ QEMU ä¸­çš„é¢å‘å¯¹è±¡ : QOM | Deep Dark Fantasy æµ…è°ˆ QEMU çš„å¯¹è±¡ç³»ç»Ÿ - ç®€ä¹¦\n","permalink":"https://lifeislife.cn/posts/qemu%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-qom/","summary":"\u003ch2 id=\"qom-ç®€ä»‹\"\u003eQOM ç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eQOM(QEMU Object Model) æ˜¯ QEMU çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºæè¿°è™šæ‹Ÿæœºçš„ç»“æ„ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºçš„ CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œã€è¾“å…¥è¾“å‡ºè®¾å¤‡ç­‰ã€‚QEMU ä¸ºäº†æ–¹ä¾¿æ•´ä¸ªç³»ç»Ÿçš„æ„å»ºï¼Œå®ç°äº†è‡ªå·±çš„ä¸€å¥—çš„é¢å‘å¯¹è±¡æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ QOM(QEMU Object Model)ã€‚å®ƒèƒ½å¤Ÿæ–¹ä¾¿çš„è¡¨ç¤ºå„ä¸ªè®¾å¤‡ï¼ˆDeviceï¼‰ä¸æ€»çº¿ï¼ˆBusï¼‰ä¹‹é—´çš„å…³ç³»ã€‚\u003c/p\u003e","title":"QEMU æºç åˆ†æ-QOM"},{"content":"åŸºç¡€æ¦‚å¿µ RGB å’Œ YUV éƒ½å±äºä¸€ç§é¢œè‰²ç¼–ç æ–¹å¼ï¼Œæˆ–è€…è¯´é¢œè‰²ç©ºé—´ã€‚\nRGB è‰²å½©æ¨¡å¼æ˜¯å·¥ä¸šç•Œçš„ä¸€ç§é¢œè‰²æ ‡å‡†ï¼Œæ˜¯é€šè¿‡å¯¹çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé¢œè‰²é€šé“çš„å˜åŒ–ä»¥åŠå®ƒä»¬ç›¸äº’ä¹‹é—´çš„å åŠ æ¥å¾—åˆ°å„å¼å„æ ·çš„é¢œè‰²çš„ï¼ŒRGB å³æ˜¯ä»£è¡¨çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé€šé“çš„é¢œè‰²ï¼Œè¿™ä¸ªæ ‡å‡†å‡ ä¹åŒ…æ‹¬äº†äººç±»è§†åŠ›æ‰€èƒ½æ„ŸçŸ¥çš„æ‰€æœ‰é¢œè‰²ï¼Œæ˜¯ç›®å‰è¿ç”¨æœ€å¹¿çš„é¢œè‰²ç³»ç»Ÿä¹‹ä¸€ã€‚\nåœ¨ YUV ç©ºé—´ä¸­ï¼ŒY ä»£è¡¨äº®åº¦ï¼Œå…¶å® Y å°±æ˜¯å›¾åƒçš„ç°åº¦å€¼ï¼›UV ä»£è¡¨è‰²å·®ï¼ŒU å’Œ V æ˜¯æ„æˆå½©è‰²çš„ä¸¤ä¸ªåˆ†é‡ã€‚åœ¨ç°ä»£å½©è‰²ç”µè§†ç³»ç»Ÿä¸­ï¼Œé€šå¸¸é‡‡ç”¨ä¸‰ç®¡å½©è‰²æ‘„å½±æœºæˆ–å½©è‰² CCD æ‘„å½±æœºè¿›è¡Œå–åƒï¼Œç„¶åæŠŠå–å¾—çš„å½©è‰²å›¾åƒä¿¡å·ç»åˆ†è‰²ã€åˆ†åˆ«æ”¾å¤§æ ¡æ­£åå¾—åˆ° RGBï¼Œå†ç»è¿‡çŸ©é˜µå˜æ¢ç”µè·¯å¾—åˆ°äº®åº¦ä¿¡å· Y å’Œä¸¤ä¸ªè‰²å·®ä¿¡å· B\u0026ndash;Y(å³ U)ã€R\u0026ndash;Y(å³ V)ï¼Œæœ€åå‘é€ç«¯å°†äº®åº¦å’Œè‰²å·®ä¸‰ä¸ªä¿¡å·åˆ†åˆ«è¿›è¡Œç¼–ç ï¼Œç”¨åŒä¸€ä¿¡é“å‘é€å‡ºå»ã€‚è¿™ç§è‰²å½©çš„è¡¨ç¤ºæ–¹æ³•å°±æ˜¯æ‰€è°“çš„ YUV è‰²å½©ç©ºé—´è¡¨ç¤ºã€‚\nè§£æ RGB æ ¼å¼ RGB16 RGB16 æ•°æ®æ ¼å¼ä¸»è¦æœ‰äºŒç§ï¼šRGB565 å’Œ RGB555ã€‚\nRGB565ï¼Œæ¯ä¸ªåƒç´ ç”¨ 16 æ¯”ç‰¹ä½è¡¨ç¤ºï¼Œå  2 ä¸ªå­—èŠ‚ï¼ŒRGB åˆ†é‡åˆ†åˆ«ä½¿ç”¨ 5 ä½ã€6 ä½ã€5 ä½ã€‚\n//è·å–é«˜å­—èŠ‚çš„5ä¸ªbit R = color \u0026amp; 0xF800; //è·å–ä¸­é—´6ä¸ªbit G = color \u0026amp; 0x07E0; //è·å–ä½å­—èŠ‚5ä¸ªbit B = color \u0026amp; 0x001F; RGB555ï¼Œæ¯ä¸ªåƒç´ ç”¨ 16 æ¯”ç‰¹ä½è¡¨ç¤ºï¼Œå  2 ä¸ªå­—èŠ‚ï¼ŒRGB åˆ†é‡éƒ½ä½¿ç”¨ 5 ä½ (æœ€é«˜ä½ä¸ç”¨)ã€‚\n//è·å–é«˜å­—èŠ‚çš„5ä¸ªbit R = color \u0026amp; 0x7C00; //è·å–ä¸­é—´5ä¸ªbit G = color \u0026amp; 0x03E0; //è·å–ä½å­—èŠ‚5ä¸ªbit B = color \u0026amp; 0x001F; RGB24 RGB24 å›¾åƒæ¯ä¸ªåƒç´ ç”¨ 24 æ¯”ç‰¹ä½è¡¨ç¤ºï¼Œå  3 ä¸ªå­—èŠ‚ï¼Œæ³¨æ„ï¼šåœ¨å†…å­˜ä¸­ RGB å„åˆ†é‡çš„æ’åˆ—é¡ºåºä¸ºï¼šBGR BGR BGRã€‚\nRGB32 RGB32 å›¾åƒæ¯ä¸ªåƒç´ ç”¨ 32 æ¯”ç‰¹ä½è¡¨ç¤ºï¼Œå  4 ä¸ªå­—èŠ‚ï¼ŒRï¼ŒGï¼ŒB åˆ†é‡åˆ†åˆ«ç”¨ 8 ä¸ª bit è¡¨ç¤ºï¼Œå­˜å‚¨é¡ºåºä¸º Bï¼ŒGï¼ŒRï¼Œæœ€å 8 ä¸ªå­—èŠ‚ä¿ç•™ã€‚æ³¨æ„ï¼šåœ¨å†…å­˜ä¸­ RGB å„åˆ†é‡çš„æ’åˆ—é¡ºåºä¸ºï¼šBGRA BGRA BGRA \u0026hellip;\u0026hellip;ã€‚\næœ¬è´¨å°±æ˜¯å¸¦ alpha é€šé“çš„ RGB24ï¼Œä¸ RGB32 çš„åŒºåˆ«åœ¨ä¸ï¼Œä¿ç•™çš„ 8 ä¸ª bit ç”¨æ¥è¡¨ç¤ºé€æ˜ï¼Œä¹Ÿå°±æ˜¯ alpha çš„å€¼ã€‚\nR = color \u0026amp; 0x0000FF00; G = color \u0026amp; 0x00FF0000; B = color \u0026amp; 0xFF000000; A = color \u0026amp; 0x000000FF; YUV é‡‡æ · \u003c!DOCTYPE html\u003e Responsive Image YUV444ï¼šä¸€ä¸ªåƒç´ å°±æœ‰ YUV ä¸‰ä¸ªå€¼ï¼Œå’Œ RGB ç±»ä¼¼ï¼›ä¸€ä¸ª YUV å  8+8+8 = 24bits 3 ä¸ªå­—èŠ‚ã€‚ YUV422ï¼šç¬¬ä¸€ä¸ªåƒç´ æœ‰ YUV ä¸‰ä¸ªå€¼ï¼Œç¬¬äºŒä¸ªåƒç´ åªæœ‰ Yï¼Œä¸å‰ä¸€ä¸ªåƒç´ å…±ç”¨ UVï¼›ä¸€ä¸ª YUV å  8+4+4 = 16bits 2 ä¸ªå­—èŠ‚ã€‚ YUV420ï¼šä¸Šä¸‹å››ä¸ªåƒç´ å…±ç”¨ä¸€ä¸ª UVã€‚ä¸€ä¸ª YUV å  8+2+2 = 12bits 1.5 ä¸ªå­—èŠ‚ã€‚ è½¬æ¢ YUV2RGB $$ R = Y + 1.403 \\times (V-128)\\ G=Y-0.343 \\times (U-128) - 0.714 \\times (V-128)\\ B=Y + 1.770 \\times (U-128) $$\nRGB2YUV $$ Y = 0.299 \\times R + 0.587 \\times G + 0.114 \\times B\\ U = -0.169 \\times R - 0.331 \\times G + 0.500 \\times B + 128\\ V = 0.500 \\times R - 0.419 \\times G - 0.081 \\times B + 128\\ $$\næµ®ç‚¹å‹è¿ç®—æ¯”è¾ƒè€—æ—¶ï¼Œå°†æ‰€æœ‰è¿ç®—æ¢æˆä½è¿ç®—ï¼Œæé«˜æ•ˆç‡ã€‚å…·ä½“æ¨å€’è¿‡ç¨‹è§è‰²å½©è½¬æ¢ç³»åˆ—ä¹‹ RGB æ ¼å¼ä¸ YUV æ ¼å¼äº’è½¬åŸç†åŠå®ç°_å°æ­¦çš„åšå®¢-CSDN åšå®¢_rgb yuv\nY= ((R \u0026lt;\u0026lt; 6) + (R \u0026lt;\u0026lt; 3) + (R \u0026lt;\u0026lt; 2) + R + (G \u0026lt;\u0026lt; 7) + (G \u0026lt;\u0026lt; 4) + (G \u0026lt;\u0026lt; 2) + (G \u0026lt;\u0026lt; 1) + (B \u0026lt;\u0026lt; 4) + (B \u0026lt;\u0026lt; 3) + (B \u0026lt;\u0026lt; 2) + B) \u0026gt;\u0026gt; 8 U= (-((R \u0026lt;\u0026lt; 5) + (R \u0026lt;\u0026lt; 3) + (R \u0026lt;\u0026lt; 1)+ R) - ((G \u0026lt;\u0026lt; 6) + (G \u0026lt;\u0026lt; 4) + (G \u0026lt;\u0026lt; 2)+G) + (B \u0026lt;\u0026lt; 7) + 32768) \u0026gt;\u0026gt; 8 V= ((R \u0026lt;\u0026lt; 7) - ((G \u0026lt;\u0026lt; 6) + (G \u0026lt;\u0026lt; 5) + (G \u0026lt;\u0026lt; 3) + (G \u0026lt;\u0026lt; 3) + G) - ((B \u0026lt;\u0026lt; 4) + (B \u0026lt;\u0026lt; 2) + B) + 32768 )\u0026gt;\u0026gt; 8 å‚è€ƒ RGB å’Œ YUV - ç®€ä¹¦ é¢œè‰²ç©ºé—´ YUV ç®€ä»‹_ç½‘ç»œèµ„æºæ˜¯æ— é™çš„-CSDN åšå®¢_yuv é¢œè‰²ç©ºé—´ å›¾è§£ RGB565ã€RGB555ã€RGB16ã€RGB24ã€RGB32ã€ARGB32 ç­‰æ ¼å¼çš„åŒºåˆ«_handy å‘¨-CSDN åšå®¢_rgb565 å›¾è§£ YU12ã€I420ã€YV12ã€NV12ã€NV21ã€YUV420Pã€YUV420SPã€YUV422Pã€YUV444P çš„åŒºåˆ«_handy å‘¨-CSDN åšå®¢_yv12\n","permalink":"https://lifeislife.cn/posts/rgb%E4%B8%8Eyuv%E9%A2%9C%E8%89%B2%E7%A9%BA%E9%97%B4/","summary":"\u003ch2 id=\"åŸºç¡€æ¦‚å¿µ\"\u003eåŸºç¡€æ¦‚å¿µ\u003c/h2\u003e\n\u003cp\u003eRGB å’Œ YUV éƒ½å±äºä¸€ç§é¢œè‰²ç¼–ç æ–¹å¼ï¼Œæˆ–è€…è¯´é¢œè‰²ç©ºé—´ã€‚\u003c/p\u003e\n\u003cp\u003eRGB è‰²å½©æ¨¡å¼æ˜¯å·¥ä¸šç•Œçš„ä¸€ç§é¢œè‰²æ ‡å‡†ï¼Œæ˜¯é€šè¿‡å¯¹çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé¢œè‰²é€šé“çš„å˜åŒ–ä»¥åŠå®ƒä»¬ç›¸äº’ä¹‹é—´çš„å åŠ æ¥å¾—åˆ°å„å¼å„æ ·çš„é¢œè‰²çš„ï¼ŒRGB å³æ˜¯ä»£è¡¨çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé€šé“çš„é¢œè‰²ï¼Œè¿™ä¸ªæ ‡å‡†å‡ ä¹åŒ…æ‹¬äº†äººç±»è§†åŠ›æ‰€èƒ½æ„ŸçŸ¥çš„æ‰€æœ‰é¢œè‰²ï¼Œæ˜¯ç›®å‰è¿ç”¨æœ€å¹¿çš„é¢œè‰²ç³»ç»Ÿä¹‹ä¸€ã€‚\u003c/p\u003e","title":"RGB ä¸ YUV é¢œè‰²ç©ºé—´"},{"content":"è®¡ç®—æœºæŒ‡ä»¤ ä¸Šä¸–çºª 60 å¹´ä»£æ™šæœŸæˆ– 70 å¹´ä»£åˆæœŸï¼Œç¨‹åºéœ€è¦å…ˆå†™åœ¨çº¸ä¸Šï¼Œç„¶åè½¬æˆäºŒè¿›åˆ¶æœºå™¨ç ï¼Œå†æ‰“åˆ°æ‰“å­”å¡ä¸Šï¼ˆ0 è¡¨ç¤ºä¸æ‰“å­”ï¼Œ1 è¡¨ç¤ºæ‰“å­”ï¼‰ï¼Œé€å…¥ç‰¹æ®Šçš„è®¡ç®—æœºä¸­æ‰§è¡Œã€‚\nä»ç¡¬ä»¶çš„è§’åº¦æ¥çœ‹ï¼ŒCPU å°±æ˜¯ä¸€ä¸ªè¶…å¤§è§„æ¨¡é›†æˆç”µè·¯ï¼Œé€šè¿‡ç”µè·¯å®ç°äº†åŠ æ³•ã€ä¹˜æ³•ä¹ƒè‡³å„ç§å„æ ·çš„å¤„ç†é€»è¾‘ã€‚\nä»è½¯ä»¶çš„è§’åº¦æ¥çœ‹ï¼ŒCPU å°±æ˜¯ä¸€ä¸ªæ‰§è¡Œå„ç§è®¡ç®—æœºæŒ‡ä»¤ï¼ˆInstruction Codeï¼‰çš„é€»è¾‘æœºå™¨ã€‚è¿™é‡Œçš„è®¡ç®—æœºæŒ‡ä»¤ï¼Œå°±å¥½æ¯”ä¸€é—¨ CPU èƒ½å¤Ÿå¬å¾—æ‡‚çš„è¯­è¨€ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒå«ä½œæœºå™¨è¯­è¨€ï¼ˆMachine Languageï¼‰ã€‚\nä¸åŒçš„ CPU èƒ½å¤Ÿå¬æ‡‚çš„è¯­è¨€ä¸å¤ªä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯ CPU æ”¯æŒçš„è¯­è¨€ä¸ä¸€æ ·ï¼Œè¿™é‡Œçš„è¯­è¨€å«æŒ‡ä»¤é›†ï¼ˆInstruction Setï¼‰ã€‚\nä¸€ä¸ªè®¡ç®—æœºç¨‹åºç”±æˆåƒä¸Šä¸‡æ¡æŒ‡ä»¤ç»„æˆçš„ã€‚ä½†æ˜¯ CPU é‡Œä¸èƒ½ä¸€ç›´æ”¾ç€æ‰€æœ‰æŒ‡ä»¤ï¼Œæ‰€ä»¥è®¡ç®—æœºç¨‹åºå¹³æ—¶æ˜¯å­˜å‚¨åœ¨å­˜å‚¨å™¨ä¸­çš„ã€‚è¿™ç§ç¨‹åºæŒ‡ä»¤å­˜å‚¨åœ¨å­˜å‚¨å™¨é‡Œé¢çš„è®¡ç®—æœºï¼Œæˆ‘ä»¬å°±å«ä½œå­˜å‚¨ç¨‹åºå‹è®¡ç®—æœºï¼ˆStored-program Computerï¼‰ã€‚\näº†è§£äº†è®¡ç®—æœºæŒ‡ä»¤å’Œè®¡ç®—æœºæŒ‡ä»¤é›†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¹³æ—¶ç¼–å†™çš„ä»£ç ï¼Œåˆ°åº•æ˜¯æ€ä¹ˆå˜æˆä¸€æ¡æ¡è®¡ç®—æœºæŒ‡ä»¤ï¼Œæœ€åè¢« CPU æ‰§è¡Œçš„å‘¢ï¼Ÿæˆ‘ä»¬æ‹¿ä¸€å°æ®µçœŸå®çš„ C è¯­è¨€ç¨‹åºæ¥çœ‹çœ‹ã€‚\n// test.c int main() { int a = 1; int b = 2; a = a + b; } é€šè¿‡ç¼–è¯‘å™¨ï¼Œå¯ä»¥å°†ä¸Šè¿°ä»£ç ç¼–è¯‘æˆæ±‡ç¼–ä»£ç ï¼Œå†é€šè¿‡æ±‡ç¼–å™¨ï¼Œå°†æ±‡ç¼–ä»£ç ç¼–è¯‘æˆæœºå™¨ç ï¼Œæœ€åé€šè¿‡ CPU æ‰§è¡Œã€‚\nåœ¨ä¸€ä¸ª Linux æ“ä½œç³»ç»Ÿä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨ gcc å’Œ objdump è¿™æ ·ä¸¤æ¡å‘½ä»¤ï¼ŒæŠŠå¯¹åº”çš„æ±‡ç¼–ä»£ç å’Œæœºå™¨ç éƒ½æ‰“å°å‡ºæ¥ã€‚\n$ gcc -g -c test.c $ objdump -d -M intel -S test.o test.o: file format elf64-x86-64 Disassembly of section .text: 0000000000000000 \u0026lt;main\u0026gt;: int main() { 0: 55 push rbp 1: 48 89 e5 mov rbp,rsp int a = 1; 4: c7 45 fc 01 00 00 00 mov DWORD PTR [rbp-0x4],0x1 int b = 2; b: c7 45 f8 02 00 00 00 mov DWORD PTR [rbp-0x8],0x2 a = a + b; 12: 8b 45 f8 mov eax,DWORD PTR [rbp-0x8] 15: 01 45 fc add DWORD PTR [rbp-0x4],eax } 18: 5d pop rbp 19: c3 ret å·¦ä¾§æœ‰ä¸€å †æ•°å­—ï¼Œè¿™äº›å°±æ˜¯ä¸€æ¡æ¡æœºå™¨ç ï¼›å³è¾¹æœ‰ä¸€ç³»åˆ—çš„pushã€movã€addã€pop ç­‰ï¼Œè¿™äº›å°±æ˜¯å¯¹åº”çš„æ±‡ç¼–ä»£ç ã€‚\näº†è§£äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬æ”¾å¤§å±€éƒ¨ï¼Œæ¥çœ‹çœ‹è¿™ä¸€è¡Œè¡Œçš„æ±‡ç¼–ä»£ç å’Œæœºå™¨æŒ‡ä»¤ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚\nå¸¸è§çš„æŒ‡ä»¤å¯ä»¥åˆ†æˆäº”å¤§ç±»ã€‚\nç¬¬ä¸€ç±»æ˜¯ç®—æœ¯ç±»æŒ‡ä»¤ã€‚æˆ‘ä»¬çš„åŠ å‡ä¹˜é™¤ï¼Œåœ¨ CPU å±‚é¢ï¼Œéƒ½ä¼šå˜æˆä¸€æ¡æ¡ç®—æœ¯ç±»æŒ‡ä»¤ã€‚\nç¬¬äºŒç±»æ˜¯æ•°æ®ä¼ è¾“ç±»æŒ‡ä»¤ã€‚ç»™å˜é‡èµ‹å€¼ã€åœ¨å†…å­˜é‡Œè¯»å†™æ•°æ®ï¼Œç”¨çš„éƒ½æ˜¯æ•°æ®ä¼ è¾“ç±»æŒ‡ä»¤ã€‚\nç¬¬ä¸‰ç±»æ˜¯é€»è¾‘ç±»æŒ‡ä»¤ã€‚é€»è¾‘ä¸Šçš„ä¸æˆ–éï¼Œéƒ½æ˜¯è¿™ä¸€ç±»æŒ‡ä»¤ã€‚\nç¬¬å››ç±»æ˜¯æ¡ä»¶åˆ†æ”¯ç±»æŒ‡ä»¤ã€‚æ—¥å¸¸æˆ‘ä»¬å†™çš„â€œif/elseâ€ï¼Œå…¶å®éƒ½æ˜¯æ¡ä»¶åˆ†æ”¯ç±»æŒ‡ä»¤ã€‚\næœ€åä¸€ç±»æ˜¯æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚å†™ä¸€äº›å¤§ä¸€ç‚¹çš„ç¨‹åºï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å†™ä¸€äº›å‡½æ•°æˆ–è€…æ–¹æ³•ã€‚åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå…¶å®å°±æ˜¯å‘èµ·äº†ä¸€ä¸ªæ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚\næŒ‡ä»¤è·³è½¬ CPU å¦‚ä½•æ‰§è¡ŒæŒ‡ä»¤çš„ ä»£ç ç»è¿‡è½¯ä»¶å±‚é¢çš„ç¼–è¯‘åå°±æ˜¯ä¸€æ¡æ¡äºŒè¿›åˆ¶æŒ‡ä»¤ï¼ŒæŒ‡ä»¤äº¤ç”± CPU ä¸­å‡ ç™¾äº¿ä¸ªæ™¶ä½“ç®¡å»æ‰§è¡Œã€‚æˆ‘ä»¬å…ˆä¸ç®¡å‡ ç™¾äº¿çš„æ™¶ä½“ç®¡çš„èƒŒåæ˜¯æ€ä¹ˆé€šè¿‡ç”µè·¯è¿è½¬èµ·æ¥çš„ï¼Œé€»è¾‘ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼ŒCPU å…¶å®å°±æ˜¯ç”±ä¸€å †å¯„å­˜å™¨ç»„æˆçš„ã€‚è€Œå¯„å­˜å™¨å°±æ˜¯ CPU å†…éƒ¨ï¼Œç”±å¤šä¸ªè§¦å‘å™¨ï¼ˆFlip-Flopï¼‰æˆ–è€…é”å­˜å™¨ï¼ˆLatchesï¼‰ç»„æˆçš„ç®€å•ç”µè·¯ã€‚è§¦å‘å™¨å’Œé”å­˜å™¨ï¼Œå…¶å®å°±æ˜¯ä¸¤ç§ä¸åŒåŸç†çš„æ•°å­—ç”µè·¯ç»„æˆçš„é€»è¾‘é—¨ã€‚\nN ä¸ªè§¦å‘å™¨æˆ–è€…é”å­˜å™¨ï¼Œå°±å¯ä»¥ç»„æˆä¸€ä¸ªNä½ï¼ˆBitï¼‰çš„å¯„å­˜å™¨ï¼Œèƒ½å¤Ÿä¿å­˜ Nä½çš„æ•°æ®ã€‚æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬ç”¨çš„64ä½ IntelæœåŠ¡å™¨ï¼Œå¯„å­˜å™¨å°±æ˜¯64 ä½çš„ã€‚\nä¸€ä¸ª CPU é‡Œé¢ä¼šæœ‰å¾ˆå¤šç§ä¸åŒåŠŸèƒ½çš„å¯„å­˜å™¨ã€‚è¿™é‡Œä»‹ç»ä¸‰ç§æ¯”è¾ƒç‰¹æ®Šçš„ã€‚\nPC å¯„å­˜å™¨ï¼ˆProgram Counter Registerï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿå«æŒ‡ä»¤åœ°å€å¯„å­˜å™¨ï¼ˆInstruction Address Registerï¼‰ã€‚é¡¾åæ€ä¹‰ï¼Œå®ƒå°±æ˜¯ç”¨æ¥å­˜æ”¾ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„è®¡ç®—æœºæŒ‡ä»¤çš„å†…å­˜åœ°å€ã€‚\næŒ‡ä»¤å¯„å­˜å™¨ï¼ˆInstruction Registerï¼‰ï¼Œç”¨æ¥å­˜æ”¾å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ã€‚\næ¡ä»¶ç å¯„å­˜å™¨ï¼ˆStatus Registerï¼‰ï¼Œç”¨é‡Œé¢çš„ä¸€ä¸ªä¸€ä¸ªæ ‡è®°ä½ï¼ˆFlagï¼‰ï¼Œå­˜æ”¾ CPU è¿›è¡Œç®—æœ¯æˆ–è€…é€»è¾‘è®¡ç®—çš„ç»“æœã€‚\né™¤æ­¤ä¹‹å¤–è¿˜æœ‰æ•´æ•°å¯„å­˜å™¨ã€æµ®ç‚¹æ•°å¯„å­˜å™¨ã€å‘é‡å¯„å­˜å™¨å’Œåœ°å€å¯„å­˜å™¨ç­‰ç­‰ã€‚æœ‰äº›å¯„å­˜å™¨æ—¢å¯ä»¥å­˜æ”¾æ•°æ®ï¼Œåˆèƒ½å­˜æ”¾åœ°å€ï¼Œæˆ‘ä»¬å°±å«å®ƒé€šç”¨å¯„å­˜å™¨ã€‚\nå®é™…ä¸Šï¼Œä¸€ä¸ªç¨‹åºæ‰§è¡Œçš„æ—¶å€™ï¼ŒCPU ä¼šæ ¹æ® PC å¯„å­˜å™¨é‡Œçš„åœ°å€ï¼Œä»å†…å­˜é‡Œé¢æŠŠéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤è¯»å–åˆ°æŒ‡ä»¤å¯„å­˜å™¨é‡Œé¢æ‰§è¡Œï¼Œç„¶åæ ¹æ®æŒ‡ä»¤é•¿åº¦è‡ªå¢ï¼Œå¼€å§‹é¡ºåºè¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªç¨‹åºçš„ä¸€æ¡æ¡æŒ‡ä»¤ï¼Œåœ¨å†…å­˜é‡Œé¢æ˜¯è¿ç»­ä¿å­˜çš„ï¼Œä¹Ÿä¼šä¸€æ¡æ¡é¡ºåºåŠ è½½ã€‚\nè€Œæœ‰äº›ç‰¹æ®ŠæŒ‡ä»¤ï¼Œæ¯”å¦‚ä¸Šä¸€è®²æˆ‘ä»¬è®²åˆ° J ç±»æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯è·³è½¬æŒ‡ä»¤ï¼Œä¼šä¿®æ”¹ PC å¯„å­˜å™¨é‡Œé¢çš„åœ°å€å€¼ã€‚\nä» ifâ€¦else æ¥çœ‹ç¨‹åºçš„æ‰§è¡Œå’Œè·³è½¬ é¦–å…ˆçœ‹å¦‚ä¸‹çš„ä¾‹ç¨‹ï¼Œ\n// test.c #include \u0026lt;time.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; int main() { srand(time(NULL)); int r = rand() % 2; int a = 10; if (r == 0) { a = 1; } else { a = 2; } gcc -g -c test.c objdump -d -M intel -S test.o ç¼–è¯‘åæ‰“å°å‡ºæ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š\nif (r == 0) 3b: 83 7d fc 00 cmp DWORD PTR [rbp-0x4],0x0 3f: 75 09 jne 4a \u0026lt;main+0x4a\u0026gt; { a = 1; 41: c7 45 f8 01 00 00 00 mov DWORD PTR [rbp-0x8],0x1 48: eb 07 jmp 51 \u0026lt;main+0x51\u0026gt; } else { a = 2; 4a: c7 45 f8 02 00 00 00 mov DWORD PTR [rbp-0x8],0x2 51: b8 00 00 00 00 mov eax,0x0 } å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå¯¹äº r == 0çš„æ¡ä»¶åˆ¤æ–­ï¼Œè¢«ç¼–è¯‘æˆäº† cmp å’Œ jne è¿™ä¸¤æ¡æŒ‡ä»¤ã€‚\ncmp æŒ‡ä»¤æ¯”è¾ƒäº†å‰åä¸¤ä¸ªæ“ä½œæ•°çš„å€¼ï¼Œè¿™é‡Œçš„DWORD PTR ä»£è¡¨æ“ä½œçš„æ•°æ®ç±»å‹æ˜¯ 32ä½çš„æ•´æ•°ï¼Œè€Œ [rbp-0x4] åˆ™æ˜¯ä¸€ä¸ªå¯„å­˜å™¨çš„åœ°å€ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€ä¸ªæ“ä½œæ•°å°±æ˜¯ä»å¯„å­˜å™¨é‡Œæ‹¿åˆ°çš„å˜é‡ r çš„å€¼ã€‚ç¬¬äºŒä¸ªæ“ä½œæ•° 0x0 å°±æ˜¯æˆ‘ä»¬è®¾å®šçš„å¸¸é‡0çš„ 16 è¿›åˆ¶è¡¨ç¤ºã€‚cmp æŒ‡ä»¤çš„æ¯”è¾ƒç»“æœï¼Œä¼šå­˜å…¥åˆ°æ¡ä»¶ç å¯„å­˜å™¨å½“ä¸­å»ã€‚\nåœ¨è¿™é‡Œï¼Œå¦‚æœæ¯”è¾ƒçš„ç»“æœæ˜¯ Trueï¼Œä¹Ÿå°±æ˜¯ r == 0ï¼Œå°±æŠŠé›¶æ ‡å¿—æ¡ä»¶ç ï¼ˆå¯¹åº”çš„æ¡ä»¶ç æ˜¯ ZFï¼ŒZero Flagï¼‰è®¾ç½®ä¸º 1ã€‚é™¤äº†é›¶æ ‡å¿—ä¹‹å¤–ï¼ŒIntel çš„ CPU ä¸‹è¿˜æœ‰è¿›ä½æ ‡å¿—ï¼ˆCFï¼ŒCarry Flagï¼‰ã€ç¬¦å·æ ‡å¿—ï¼ˆSFï¼ŒSign Flagï¼‰ä»¥åŠæº¢å‡ºæ ‡å¿—ï¼ˆOFï¼ŒOverflow Flagï¼‰ï¼Œç”¨åœ¨ä¸åŒçš„åˆ¤æ–­æ¡ä»¶ä¸‹ã€‚\ncmp æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åï¼ŒPC å¯„å­˜å™¨ä¼šè‡ªåŠ¨è‡ªå¢ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€æ¡ jne çš„æŒ‡ä»¤ã€‚\nè·Ÿç€çš„ jne æŒ‡ä»¤ï¼Œæ˜¯ jump if not equal çš„æ„æ€ï¼Œå®ƒä¼šæŸ¥çœ‹å¯¹åº”çš„é›¶æ ‡å¿—ä½ã€‚å¦‚æœä¸º0ï¼Œä¼šè·³è½¬åˆ°åé¢è·Ÿç€çš„æ“ä½œæ•° 4a çš„ä½ç½®ã€‚è¿™ä¸ª 4aï¼Œå¯¹åº”è¿™é‡Œæ±‡ç¼–ä»£ç çš„è¡Œå·ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è®¾ç½®çš„ else æ¡ä»¶é‡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚å½“è·³è½¬å‘ç”Ÿçš„æ—¶å€™ï¼ŒPC å¯„å­˜å™¨å°±ä¸å†æ˜¯è‡ªå¢å˜æˆä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œè€Œæ˜¯è¢«ç›´æ¥è®¾ç½®æˆè¿™é‡Œçš„ 4a è¿™ä¸ªåœ°å€ã€‚è¿™ä¸ªæ—¶å€™ï¼ŒCPU å†æŠŠ 4a åœ°å€é‡Œçš„æŒ‡ä»¤åŠ è½½åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­æ¥æ‰§è¡Œã€‚\nè·³è½¬åˆ°æ‰§è¡Œåœ°å€ä¸º 4a çš„æŒ‡ä»¤ï¼Œå®é™…æ˜¯ä¸€æ¡ mov æŒ‡ä»¤ï¼Œç¬¬ä¸€ä¸ªæ“ä½œæ•°å’Œå‰é¢çš„ cmp æŒ‡ä»¤ä¸€æ ·ï¼Œæ˜¯å¦ä¸€ä¸ª 32 ä½æ•´å‹çš„å¯„å­˜å™¨åœ°å€ï¼Œä»¥åŠå¯¹åº”çš„ 2 çš„16 è¿›åˆ¶å€¼ 0x2ã€‚mov æŒ‡ä»¤æŠŠ 2 è®¾ç½®åˆ°å¯¹åº”çš„å¯„å­˜å™¨é‡Œå»ï¼Œç›¸å½“äºä¸€ä¸ªèµ‹å€¼æ“ä½œã€‚ç„¶åï¼ŒPCå¯„å­˜å™¨é‡Œçš„å€¼ç»§ç»­è‡ªå¢ï¼Œæ‰§è¡Œä¸‹ä¸€æ¡ mov æŒ‡ä»¤ã€‚\nè¿™æ¡ mov æŒ‡ä»¤çš„ç¬¬ä¸€ä¸ªæ“ä½œæ•°eaxï¼Œä»£è¡¨ç´¯åŠ å¯„å­˜å™¨ï¼Œç¬¬äºŒä¸ªæ“ä½œæ•°0x0åˆ™æ˜¯ 16 è¿›åˆ¶çš„0çš„è¡¨ç¤ºã€‚è¿™æ¡æŒ‡ä»¤å…¶å®æ²¡æœ‰å®é™…çš„ä½œç”¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸€ä¸ªå ä½ç¬¦ã€‚æˆ‘ä»¬å›è¿‡å¤´å»çœ‹å‰é¢çš„ if æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³çš„è¯ï¼Œåœ¨èµ‹å€¼çš„ mov æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åï¼Œæœ‰ä¸€ä¸ª jmp çš„æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚è·³è½¬çš„åœ°å€å°±æ˜¯è¿™ä¸€è¡Œçš„åœ°å€51ã€‚æˆ‘ä»¬çš„ main å‡½æ•°æ²¡æœ‰è®¾å®šè¿”å›å€¼ï¼Œè€Œmov eax, 0x0 å…¶å®å°±æ˜¯ç»™ main å‡½æ•°ç”Ÿæˆäº†ä¸€ä¸ªé»˜è®¤çš„ä¸º 0 çš„è¿”å›å€¼åˆ°ç´¯åŠ å™¨é‡Œé¢ã€‚if æ¡ä»¶é‡Œé¢çš„å†…å®¹æ‰§è¡Œå®Œæˆä¹‹åä¹Ÿä¼šè·³è½¬åˆ°è¿™é‡Œï¼Œå’Œ else é‡Œçš„å†…å®¹ç»“æŸä¹‹åçš„ä½ç½®æ˜¯ä¸€æ ·çš„ã€‚\nå‡½æ•°è°ƒç”¨ï¼šä¸ºä»€ä¹ˆä¼šå‘ç”Ÿ Stack Overflow é™æ€é“¾æ¥ æ—¢ç„¶æˆ‘ä»¬çš„ç¨‹åºæœ€ç»ˆéƒ½è¢«å˜æˆäº†ä¸€æ¡æ¡æœºå™¨ç å»æ‰§è¡Œï¼Œé‚£ä¸ºä»€ä¹ˆåŒä¸€ä¸ªç¨‹åºï¼Œåœ¨åŒä¸€å°è®¡ç®—æœºä¸Šï¼Œåœ¨ Linux ä¸‹å¯ä»¥è¿è¡Œï¼Œè€Œåœ¨ Windows ä¸‹å´ä¸è¡Œå‘¢ï¼Ÿåè¿‡æ¥ï¼ŒWindows ä¸Šçš„ç¨‹åºåœ¨ Linux ä¸Šä¹Ÿæ˜¯ä¸€æ ·ä¸èƒ½æ‰§è¡Œçš„ã€‚å¯æ˜¯æˆ‘ä»¬çš„ CPU å¹¶æ²¡æœ‰æ¢æ‰ï¼Œå®ƒåº”è¯¥å¯ä»¥è¯†åˆ«åŒæ ·çš„æŒ‡ä»¤å‘€ï¼Ÿ\nå°†ä»¥ä¸‹ä¸¤ä¸ªä¾‹ç¨‹ç¼–è¯‘ï¼Œç„¶åé€šè¿‡ objdump å‘½ä»¤çœ‹çœ‹å®ƒä»¬çš„æ±‡ç¼–ä»£ç ã€‚\n// add_lib.c int add(int a, int b) { return a+b; } // link_example.c #include \u0026lt;stdio.h\u0026gt; int main() { int a = 10; int b = 5; int c = add(a, b); printf(\u0026#34;c = %d\\n\u0026#34;, c); } gcc -g -c add_lib.c link_example.c objdump -d -M intel -S add_lib.o objdump -d -M intel -S link_example.o add_lib.o: file format elf64-x86-64 Disassembly of section .text: 0000000000000000 \u0026lt;add\u0026gt;: 0: 55 push rbp 1: 48 89 e5 mov rbp,rsp 4: 89 7d fc mov DWORD PTR [rbp-0x4],edi 7: 89 75 f8 mov DWORD PTR [rbp-0x8],esi a: 8b 55 fc mov edx,DWORD PTR [rbp-0x4] d: 8b 45 f8 mov eax,DWORD PTR [rbp-0x8] 10: 01 d0 add eax,edx 12: 5d pop rbp 13: c3 ret link_example.o: file format elf64-x86-64 Disassembly of section .text: 0000000000000000 \u0026lt;main\u0026gt;: 0: 55 push rbp 1: 48 89 e5 mov rbp,rsp 4: 48 83 ec 10 sub rsp,0x10 8: c7 45 fc 0a 00 00 00 mov DWORD PTR [rbp-0x4],0xa f: c7 45 f8 05 00 00 00 mov DWORD PTR [rbp-0x8],0x5 16: 8b 55 f8 mov edx,DWORD PTR [rbp-0x8] 19: 8b 45 fc mov eax,DWORD PTR [rbp-0x4] 1c: 89 d6 mov esi,edx 1e: 89 c7 mov edi,eax 20: b8 00 00 00 00 mov eax,0x0 25: e8 00 00 00 00 call 2a \u0026lt;main+0x2a\u0026gt; 2a: 89 45 f4 mov DWORD PTR [rbp-0xc],eax 2d: 8b 45 f4 mov eax,DWORD PTR [rbp-0xc] 30: 89 c6 mov esi,eax 32: 48 8d 3d 00 00 00 00 lea rdi,[rip+0x0] # 39 \u0026lt;main+0x39\u0026gt; 39: b8 00 00 00 00 mov eax,0x0 3e: e8 00 00 00 00 call 43 \u0026lt;main+0x43\u0026gt; 43: b8 00 00 00 00 mov eax,0x0 48: c9 leave 49: c3 ret æ—¢ç„¶ä»£ç å·²ç»è¢«æˆ‘ä»¬â€œç¼–è¯‘â€æˆäº†æŒ‡ä»¤ï¼Œæˆ‘ä»¬ä¸å¦¨å°è¯•è¿è¡Œä¸€ä¸‹ ./link_example.oã€‚\nç„¶è€Œæˆ‘ä»¬å¹¶ä¸èƒ½æˆåŠŸè¿è¡Œï¼Œä¼šå¾—åˆ°ä¸€æ¡cannot execute binary file: Exec format error çš„é”™è¯¯ã€‚\næˆ‘ä»¬å†ä»”ç»†çœ‹ä¸€ä¸‹ objdump å‡ºæ¥çš„ä¸¤ä¸ªæ–‡ä»¶çš„ä»£ç ï¼Œä¼šå‘ç°ä¸¤ä¸ªç¨‹åºçš„åœ°å€éƒ½æ˜¯ä» 0 å¼€å§‹çš„ã€‚å¦‚æœåœ°å€æ˜¯ä¸€æ ·çš„ï¼Œç¨‹åºå¦‚æœéœ€è¦é€šè¿‡ call æŒ‡ä»¤è°ƒç”¨å‡½æ•°çš„è¯ï¼Œå®ƒæ€ä¹ˆçŸ¥é“åº”è¯¥è·³è½¬åˆ°å“ªä¸€ä¸ªæ–‡ä»¶é‡Œå‘¢ï¼Ÿ\næ— è®ºæ˜¯è¿™é‡Œçš„è¿è¡ŒæŠ¥é”™ï¼Œè¿˜æ˜¯ objdump å‡ºæ¥çš„æ±‡ç¼–ä»£ç é‡Œé¢çš„é‡å¤åœ°å€ï¼Œéƒ½æ˜¯å› ä¸ºadd_lib.oä»¥åŠ link_example.o å¹¶ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆExecutable Programï¼‰ï¼Œè€Œæ˜¯ç›®æ ‡æ–‡ä»¶ï¼ˆObject Fileï¼‰ã€‚åªæœ‰é€šè¿‡é“¾æ¥å™¨ï¼ˆLinkerï¼‰æŠŠå¤šä¸ªç›®æ ‡æ–‡ä»¶ä»¥åŠè°ƒç”¨çš„å„ç§å‡½æ•°åº“é“¾æ¥èµ·æ¥ï¼Œæˆ‘ä»¬æ‰èƒ½å¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚\né€šè¿‡ gcc çš„-oå‚æ•°ï¼Œå¯ä»¥ç”Ÿæˆå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚\n$ gcc -o link-example add_lib.o link_example.o $ ./link_example c = 15 ELFï¼ˆExecuatable and Linkable File Formatï¼‰çš„æ–‡ä»¶æ ¼å¼ï¼Œä¸­æ–‡åå­—å«å¯æ‰§è¡Œä¸å¯é“¾æ¥æ–‡ä»¶æ ¼å¼ï¼Œè¿™é‡Œé¢ä¸ä»…å­˜æ”¾äº†ç¼–è¯‘æˆçš„æ±‡ç¼–æŒ‡ä»¤ï¼Œè¿˜ä¿ç•™äº†å¾ˆå¤šåˆ«çš„æ•°æ®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é“¾æ¥å™¨ä¼šæ‰«ææ‰€æœ‰è¾“å…¥çš„ç›®æ ‡æ–‡ä»¶ï¼Œç„¶åæŠŠæ‰€æœ‰ç¬¦å·è¡¨é‡Œçš„ä¿¡æ¯æ”¶é›†èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªå…¨å±€çš„ç¬¦å·è¡¨ã€‚ç„¶åå†æ ¹æ®é‡å®šä½è¡¨ï¼ŒæŠŠæ‰€æœ‰ä¸ç¡®å®šè¦è·³è½¬åœ°å€çš„ä»£ç ï¼Œæ ¹æ®ç¬¦å·è¡¨é‡Œé¢å­˜å‚¨çš„åœ°å€ï¼Œè¿›è¡Œä¸€æ¬¡ä¿®æ­£ã€‚æœ€åï¼ŒæŠŠæ‰€æœ‰çš„ç›®æ ‡æ–‡ä»¶çš„å¯¹åº”æ®µè¿›è¡Œä¸€æ¬¡åˆå¹¶ï¼Œå˜æˆäº†æœ€ç»ˆçš„å¯æ‰§è¡Œä»£ç ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œå¯æ‰§è¡Œæ–‡ä»¶é‡Œé¢çš„å‡½æ•°è°ƒç”¨çš„åœ°å€éƒ½æ˜¯æ­£ç¡®çš„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨é“¾æ¥å™¨æŠŠç¨‹åºå˜æˆå¯æ‰§è¡Œæ–‡ä»¶ä¹‹åï¼Œè¦è£…è½½å™¨å»æ‰§è¡Œç¨‹åºå°±å®¹æ˜“å¤šäº†ã€‚è£…è½½å™¨ä¸å†éœ€è¦è€ƒè™‘åœ°å€è·³è½¬çš„é—®é¢˜ï¼Œåªéœ€è¦è§£æ ELF æ–‡ä»¶ï¼ŒæŠŠå¯¹åº”çš„æŒ‡ä»¤å’Œæ•°æ®ï¼ŒåŠ è½½åˆ°å†…å­˜é‡Œé¢ä¾› CPU æ‰§è¡Œå°±å¯ä»¥äº†ã€‚\nä¸ºä»€ä¹ˆåŒæ ·ä¸€ä¸ªç¨‹åºï¼Œåœ¨ Linux ä¸‹å¯ä»¥æ‰§è¡Œè€Œåœ¨ Windows ä¸‹ä¸èƒ½æ‰§è¡Œäº†ã€‚å…¶ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„åŸå› å°±æ˜¯ï¼Œä¸¤ä¸ªæ“ä½œç³»ç»Ÿä¸‹å¯æ‰§è¡Œæ–‡ä»¶çš„æ ¼å¼ä¸ä¸€æ ·ã€‚\næˆ‘ä»¬ä»Šå¤©è®²çš„æ˜¯ Linux ä¸‹çš„ ELF æ–‡ä»¶æ ¼å¼ï¼Œè€Œ Windows çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼æ˜¯ä¸€ç§å«ä½œ PEï¼ˆPortable Executable Formatï¼‰çš„æ–‡ä»¶æ ¼å¼ã€‚Linux ä¸‹çš„è£…è½½å™¨åªèƒ½è§£æ ELF æ ¼å¼è€Œä¸èƒ½è§£æ PE æ ¼å¼ã€‚\nå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ä»¥èƒ½å¤Ÿè§£æ PE æ ¼å¼çš„è£…è½½å™¨ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½åœ¨ Linux ä¸‹è¿è¡Œ Windows ç¨‹åºäº†ã€‚è¿™æ ·çš„ç¨‹åºçœŸçš„å­˜åœ¨å—ï¼Ÿæ²¡é”™ï¼ŒLinux ä¸‹è‘—åçš„å¼€æºé¡¹ç›® Wineï¼Œå°±æ˜¯é€šè¿‡å…¼å®¹ PE æ ¼å¼çš„è£…è½½å™¨ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½ç›´æ¥åœ¨ Linux ä¸‹è¿è¡Œ Windows ç¨‹åºçš„ã€‚è€Œç°åœ¨å¾®è½¯çš„ Windows é‡Œé¢ä¹Ÿæä¾›äº† WSLï¼Œä¹Ÿå°±æ˜¯ Windows Subsystem for Linuxï¼Œå¯ä»¥è§£æå’ŒåŠ è½½ ELF æ ¼å¼çš„æ–‡ä»¶ã€‚\nç¨‹åºè£…è½½ ç¨‹åºè£…è½½é¢ä¸´çš„æŒ‘æˆ˜ å¯æ‰§è¡Œç¨‹åºåŠ è½½åå ç”¨çš„å†…å­˜ç©ºé—´åº”è¯¥æ˜¯è¿ç»­çš„ã€‚ è¿™ç‚¹å¾ˆå¥½ç†è§£ï¼ŒæŒ‡ä»¤æ­£å¸¸éƒ½æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚ æˆ‘ä»¬éœ€è¦åŒæ—¶åŠ è½½å¾ˆå¤šä¸ªç¨‹åºï¼Œå¹¶ä¸”ä¸èƒ½è®©ç¨‹åºè‡ªå·±è§„å®šåœ¨å†…å­˜ä¸­åŠ è½½çš„ä½ç½®ã€‚ è®¡ç®—æœºé€šå¸¸ä¼šåŒæ—¶è¿è¡Œå¾ˆå¤šä¸ªç¨‹åºï¼Œå¯èƒ½ä½ æƒ³è¦çš„å†…å­˜åœ°å€å·²ç»è¢«å…¶ä»–åŠ è½½äº†çš„ç¨‹åºå ç”¨äº†ã€‚ æˆ‘ä»¬æŠŠæŒ‡ä»¤é‡Œç”¨åˆ°çš„å†…å­˜åœ°å€å«ä½œè™šæ‹Ÿå†…å­˜åœ°å€ï¼ˆVirtual Memory Addressï¼‰ï¼Œå®é™…åœ¨å†…å­˜ç¡¬ä»¶é‡Œé¢çš„ç©ºé—´åœ°å€ï¼Œæˆ‘ä»¬å«ç‰©ç†å†…å­˜åœ°å€ï¼ˆPhysical Memory Addressï¼‰ã€‚\nç¨‹åºé‡Œæœ‰æŒ‡ä»¤å’Œå„ç§å†…å­˜åœ°å€ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒè™šæ‹Ÿå†…å­˜åœ°å€å°±è¡Œäº†ã€‚å¯¹äºä»»ä½•ä¸€ä¸ªç¨‹åºæ¥è¯´ï¼Œå®ƒçœ‹åˆ°çš„éƒ½æ˜¯åŒæ ·çš„å†…å­˜åœ°å€ã€‚æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªè™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜çš„æ˜ å°„è¡¨ï¼Œè¿™æ ·å®é™…ç¨‹åºæŒ‡ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šé€šè¿‡è™šæ‹Ÿå†…å­˜åœ°å€ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å†…å­˜åœ°å€ï¼Œç„¶åæ‰§è¡Œã€‚\nå†…å­˜åˆ†æ®µ è¿™ç§æ‰¾å‡ºä¸€æ®µè¿ç»­çš„ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜åœ°å€è¿›è¡Œæ˜ å°„çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å«åˆ†æ®µï¼ˆSegmentationï¼‰ã€‚è¿™é‡Œçš„æ®µï¼Œå°±æ˜¯æŒ‡ç³»ç»Ÿåˆ†é…å‡ºæ¥çš„é‚£ä¸ªè¿ç»­çš„å†…å­˜ç©ºé—´ã€‚\nåˆ†æ®µçš„åŠæ³•å¾ˆå¥½ï¼Œè§£å†³äº†ç¨‹åºæœ¬èº«ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„ç‰©ç†å†…å­˜åœ°å€çš„é—®é¢˜ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å†…å­˜ç¢ç‰‡ï¼ˆMemory Fragmentationï¼‰çš„é—®é¢˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬å¯ä»¥é€šè¿‡å†…å­˜äº¤æ¢ï¼ˆMemory Swappingï¼‰æŠ€æœ¯è§£å†³ã€‚\næˆ‘ä»¬å¯ä»¥æŠŠ Python ç¨‹åºå ç”¨çš„é‚£ 256MB å†…å­˜å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç„¶åå†ä»ç¡¬ç›˜ä¸Šè¯»å›æ¥åˆ°å†…å­˜é‡Œé¢ã€‚ä¸è¿‡è¯»å›æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å†æŠŠå®ƒåŠ è½½åˆ°åŸæ¥çš„ä½ç½®ï¼Œè€Œæ˜¯ç´§ç´§è·Ÿåœ¨é‚£å·²ç»è¢«å ç”¨äº†çš„ 512MB å†…å­˜åé¢ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†è¿ç»­çš„ 256MB å†…å­˜ç©ºé—´ï¼Œå°±å¯ä»¥å»åŠ è½½ä¸€ä¸ªæ–°çš„ 200MB çš„ç¨‹åºã€‚\nå¦‚æœä½ è‡ªå·±å®‰è£…è¿‡ Linux æ“ä½œç³»ç»Ÿï¼Œä½ åº”è¯¥é‡åˆ°è¿‡åˆ†é…ä¸€ä¸ª swap ç¡¬ç›˜åˆ†åŒºçš„é—®é¢˜ã€‚è¿™å—åˆ†å‡ºæ¥çš„ç£ç›˜ç©ºé—´ï¼Œå…¶å®å°±æ˜¯ä¸“é—¨ç»™ Linux æ“ä½œç³»ç»Ÿè¿›è¡Œå†…å­˜äº¤æ¢ç”¨çš„ã€‚\nç¡¬ç›˜çš„è®¿é—®é€Ÿåº¦è¦æ¯”å†…å­˜æ…¢å¾ˆå¤šï¼Œè€Œæ¯ä¸€æ¬¡å†…å­˜äº¤æ¢ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æŠŠä¸€å¤§æ®µè¿ç»­çš„å†…å­˜æ•°æ®å†™åˆ°ç¡¬ç›˜ä¸Šã€‚æ‰€ä»¥ï¼Œå¦‚æœå†…å­˜äº¤æ¢çš„æ—¶å€™ï¼Œäº¤æ¢çš„æ˜¯ä¸€ä¸ªå¾ˆå å†…å­˜ç©ºé—´çš„ç¨‹åºï¼Œè¿™æ ·æ•´ä¸ªæœºå™¨éƒ½ä¼šæ˜¾å¾—å¡é¡¿ã€‚\nå†…å­˜åˆ†é¡µ æ—¢ç„¶é—®é¢˜å‡ºåœ¨å†…å­˜ç¢ç‰‡å’Œå†…å­˜äº¤æ¢çš„ç©ºé—´å¤ªå¤§ä¸Šï¼Œé‚£ä¹ˆè§£å†³é—®é¢˜çš„åŠæ³•å°±æ˜¯ï¼Œå°‘å‡ºç°ä¸€äº›å†…å­˜ç¢ç‰‡ï¼Œå¹¶ä¸”è®©éœ€è¦äº¤æ¢å†™å…¥æˆ–è€…ä»ç£ç›˜è£…è½½çš„æ•°æ®æ›´å°‘ä¸€ç‚¹ã€‚äºæ˜¯å°±æœ‰äº†å†…å­˜åˆ†é¡µï¼ˆPagingï¼‰ã€‚\nå’Œåˆ†æ®µè¿™æ ·åˆ†é…ä¸€æ•´æ®µè¿ç»­çš„ç©ºé—´ç»™åˆ°ç¨‹åºç›¸æ¯”ï¼Œåˆ†é¡µæ˜¯æŠŠæ•´ä¸ªç‰©ç†å†…å­˜ç©ºé—´åˆ‡æˆä¸€æ®µæ®µå›ºå®šå°ºå¯¸çš„å¤§å°ã€‚è€Œå¯¹åº”çš„ç¨‹åºæ‰€éœ€è¦å ç”¨çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œä¹Ÿä¼šåŒæ ·åˆ‡æˆä¸€æ®µæ®µå›ºå®šå°ºå¯¸çš„å¤§å°ã€‚è¿™æ ·ä¸€ä¸ªè¿ç»­å¹¶ä¸”å°ºå¯¸å›ºå®šçš„å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å«é¡µï¼ˆPageï¼‰ã€‚\nä»è™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜çš„æ˜ å°„ï¼Œä¸å†æ˜¯æ‹¿æ•´æ®µè¿ç»­çš„å†…å­˜çš„ç‰©ç†åœ°å€ï¼Œè€Œæ˜¯æŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªé¡µæ¥çš„ã€‚é¡µçš„å°ºå¯¸ä¸€èˆ¬è¿œè¿œå°äºæ•´ä¸ªç¨‹åºçš„å¤§å°ã€‚åœ¨ Linux ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸åªè®¾ç½®æˆ 4KBã€‚\nç”±äºå†…å­˜ç©ºé—´éƒ½æ˜¯é¢„å…ˆåˆ’åˆ†å¥½çš„ï¼Œä¹Ÿå°±æ²¡æœ‰äº†ä¸èƒ½ä½¿ç”¨çš„ç¢ç‰‡ï¼Œè€Œåªæœ‰è¢«é‡Šæ”¾å‡ºæ¥çš„å¾ˆå¤š 4KB çš„é¡µã€‚å³ä½¿å†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œéœ€è¦è®©ç°æœ‰çš„ã€æ­£åœ¨è¿è¡Œçš„å…¶ä»–ç¨‹åºï¼Œé€šè¿‡å†…å­˜äº¤æ¢é‡Šæ”¾å‡ºä¸€äº›å†…å­˜çš„é¡µå‡ºæ¥ï¼Œä¸€æ¬¡æ€§å†™å…¥ç£ç›˜çš„ä¹Ÿåªæœ‰å°‘æ•°çš„ä¸€ä¸ªé¡µæˆ–è€…å‡ ä¸ªé¡µï¼Œä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´ï¼Œè®©æ•´ä¸ªæœºå™¨è¢«å†…å­˜äº¤æ¢çš„è¿‡ç¨‹ç»™å¡ä½ã€‚\nåˆ†é¡µçš„æ–¹å¼ä½¿å¾—æˆ‘ä»¬åœ¨åŠ è½½ç¨‹åºçš„æ—¶å€™ï¼Œä¸å†éœ€è¦ä¸€æ¬¡æ€§éƒ½æŠŠç¨‹åºåŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨è¿›è¡Œè™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„é¡µä¹‹é—´çš„æ˜ å°„ä¹‹åï¼Œå¹¶ä¸çœŸçš„æŠŠé¡µåŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œï¼Œè€Œæ˜¯åªåœ¨ç¨‹åºè¿è¡Œä¸­ï¼Œéœ€è¦ç”¨åˆ°å¯¹åº”è™šæ‹Ÿå†…å­˜é¡µé‡Œé¢çš„æŒ‡ä»¤å’Œæ•°æ®æ—¶ï¼Œå†åŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œé¢å»ã€‚\nå®é™…ä¸Šï¼Œæˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿï¼Œçš„ç¡®æ˜¯è¿™ä¹ˆåšçš„ã€‚å½“è¦è¯»å–ç‰¹å®šçš„é¡µï¼Œå´å‘ç°æ•°æ®å¹¶æ²¡æœ‰åŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œçš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ªæ¥è‡ªäº CPU çš„ç¼ºé¡µé”™è¯¯ï¼ˆPage Faultï¼‰ã€‚æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿä¼šæ•æ‰åˆ°è¿™ä¸ªé”™è¯¯ï¼Œç„¶åå°†å¯¹åº”çš„é¡µï¼Œä»å­˜æ”¾åœ¨ç¡¬ç›˜ä¸Šçš„è™šæ‹Ÿå†…å­˜é‡Œè¯»å–å‡ºæ¥ï¼ŒåŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œã€‚\nåŠ¨æ€é“¾æ¥ å¦‚æœæˆ‘ä»¬æœ‰å¾ˆå¤šä¸ªç¨‹åºéƒ½è¦é€šè¿‡è£…è½½å™¨è£…è½½åˆ°å†…å­˜é‡Œé¢ï¼Œé‚£é‡Œé¢é“¾æ¥å¥½çš„åŒæ ·çš„åŠŸèƒ½ä»£ç ï¼Œä¹Ÿéƒ½éœ€è¦å†è£…è½½ä¸€éï¼Œå†å ä¸€éå†…å­˜ç©ºé—´ã€‚åœ¨ä¸€ä¸ªè¿è¡Œä¸Šç™¾ä¸ªè¿›ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œè¿™å°†ä¼šé€ æˆæå¤§çš„èµ„æºæµªè´¹ã€‚\nå…±äº«åº“ï¼ˆshared libraryï¼‰æ˜¯è‡´åŠ›äºè§£å†³é™æ€åº“ç¼ºé™·çš„ä¸€ä¸ªç°ä»£åˆ›æ–°äº§ç‰©ã€‚å…±äº«åº“æ˜¯ä¸€ä¸ªç›®æ ‡æ¨¡å—ï¼Œåœ¨è¿è¡Œæˆ–åŠ è½½æ—¶ï¼Œå¯ä»¥åŠ è½½åˆ°ä»»æ„çš„å†…å­˜åœ°å€ï¼Œå¹¶å’Œä¸€ä¸ªåœ¨å†…å­˜ä¸­çš„ç¨‹åºé“¾æ¥èµ·æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåŠ¨æ€é“¾æ¥ï¼ˆdynamic linkingï¼‰æ˜¯ç”±ä¸€ä¸ªå«åšåŠ¨æ€é“¾æ¥å™¨ï¼ˆdynamic linkerï¼‰çš„ç¨‹åºæ¥æ‰§è¡Œçš„ã€‚Linux ä¸­ä¸º.soæ–‡ä»¶ï¼ŒWindows ä¸­ä¸º.dllæ–‡ä»¶ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image PIC ï¼ˆPosition-Independent Codeï¼‰ è¦æƒ³è¦åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™å…±äº«ä»£ç ï¼Œä¹Ÿæœ‰ä¸€å®šçš„è¦æ±‚ï¼Œå°±æ˜¯è¿™äº›æœºå™¨ç å¿…é¡»æ˜¯â€œåœ°å€æ— å…³â€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç¼–è¯‘å‡ºæ¥çš„å…±äº«åº“æ–‡ä»¶çš„æŒ‡ä»¤ä»£ç ï¼Œæ”¾åœ¨å“ªä¸ªå†…å­˜åœ°å€éƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¯¹äºæ‰€æœ‰åŠ¨æ€é“¾æ¥å…±äº«åº“çš„ç¨‹åºæ¥è®²ï¼Œè™½ç„¶æˆ‘ä»¬çš„å…±äº«åº“ç”¨çš„éƒ½æ˜¯åŒä¸€æ®µç‰©ç†å†…å­˜åœ°å€ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„åº”ç”¨ç¨‹åºé‡Œï¼Œå®ƒæ‰€åœ¨çš„è™šæ‹Ÿå†…å­˜åœ°å€æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬æ²¡åŠæ³•ã€ä¹Ÿä¸åº”è¯¥è¦æ±‚åŠ¨æ€é“¾æ¥åŒä¸€ä¸ªå…±äº«åº“çš„ä¸åŒç¨‹åºï¼Œå¿…é¡»æŠŠè¿™ä¸ªå…±äº«åº“æ‰€ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜åœ°å€å˜æˆä¸€è‡´ã€‚å¦‚æœè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å†™çš„ç¨‹åºå°±å¿…é¡»æ˜ç¡®åœ°çŸ¥é“å†…éƒ¨çš„å†…å­˜åœ°å€åˆ†é…ã€‚\nå¦‚ä½•æ‰èƒ½å®ç°åœ°å€æ— å…³ï¼Ÿ\nåŠ¨æ€ä»£ç åº“å†…éƒ¨çš„å˜é‡å’Œå‡½æ•°è°ƒç”¨éƒ½å¾ˆå®¹æ˜“è§£å†³ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ç›¸å¯¹åœ°å€ï¼ˆRelative Addressï¼‰å°±å¥½äº†ã€‚å„ç§æŒ‡ä»¤ä¸­ä½¿ç”¨åˆ°çš„å†…å­˜åœ°å€ï¼Œç»™å‡ºçš„ä¸æ˜¯ä¸€ä¸ªç»å¯¹çš„åœ°å€ç©ºé—´ï¼Œè€Œæ˜¯ä¸€ä¸ªç›¸å¯¹äºå½“å‰æŒ‡ä»¤åç§»é‡çš„å†…å­˜åœ°å€ã€‚å› ä¸ºæ•´ä¸ªå…±äº«åº“æ˜¯æ”¾åœ¨ä¸€æ®µè¿ç»­çš„è™šæ‹Ÿå†…å­˜åœ°å€ä¸­çš„ï¼Œæ— è®ºè£…è½½åˆ°å“ªä¸€æ®µåœ°å€ï¼Œä¸åŒæŒ‡ä»¤ä¹‹é—´çš„ç›¸å¯¹åœ°å€éƒ½æ˜¯ä¸å˜çš„ã€‚\nPLT å’Œ GOT // lib.h #ifndef LIB_H #define LIB_H void show_me_the_money(int money); #endif // lib.c #include \u0026lt;stdio.h\u0026gt; void show_me_the_money(int money) { printf(\u0026#34;Show me USD %d from lib.c \\n\u0026#34;, money); } // show_me_poor.c #include \u0026#34;lib.h\u0026#34; int main() { int money = 5; show_me_the_money(money); } gcc lib.c -fPIC -shared -o lib.so gcc -o show_me_poor show_me_poor.c ./lib.so -fpic é€‰é¡¹æŒ‡ç¤ºç¼–è¯‘å™¨ç”Ÿæˆä¸ä½ç½®æ— å…³çš„ä»£ç ã€‚-sharedé€‰é¡¹æŒ‡ç¤ºé“¾æ¥å™¨åˆ›å»ºä¸€ä¸ªå…±äº«çš„ç›®æ ‡æ–‡ä»¶ã€‚\nç„¶åï¼Œæˆ‘ä»¬å†é€šè¿‡ gcc ç¼–è¯‘ show_me_poor åŠ¨æ€é“¾æ¥äº† lib.so çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨è¿™äº›æ“ä½œéƒ½å®Œæˆäº†ä¹‹åï¼Œæˆ‘ä»¬æŠŠ show_me_poor è¿™ä¸ªæ–‡ä»¶é€šè¿‡ objdump å‡ºæ¥çœ‹ä¸€ä¸‹ã€‚\n$ objdump -d -M intel -S show_me_poor â€¦â€¦ 0000000000400540 \u0026lt;show_me_the_money@plt-0x10\u0026gt;: 400540: ff 35 12 05 20 00 push QWORD PTR [rip+0x200512] # 600a58 \u0026lt;_GLOBAL_OFFSET_TABLE_+0x8\u0026gt; 400546: ff 25 14 05 20 00 jmp QWORD PTR [rip+0x200514] # 600a60 \u0026lt;_GLOBAL_OFFSET_TABLE_+0x10\u0026gt; 40054c: 0f 1f 40 00 nop DWORD PTR [rax+0x0] 0000000000400550 \u0026lt;show_me_the_money@plt\u0026gt;: 400550: ff 25 12 05 20 00 jmp QWORD PTR [rip+0x200512] # 600a68 \u0026lt;_GLOBAL_OFFSET_TABLE_+0x18\u0026gt; 400556: 68 00 00 00 00 push 0x0 40055b: e9 e0 ff ff ff jmp 400540 \u0026lt;_init+0x28\u0026gt; â€¦â€¦ 0000000000400676 \u0026lt;main\u0026gt;: 400676: 55 push rbp 400677: 48 89 e5 mov rbp,rsp 40067a: 48 83 ec 10 sub rsp,0x10 40067e: c7 45 fc 05 00 00 00 mov DWORD PTR [rbp-0x4],0x5 400685: 8b 45 fc mov eax,DWORD PTR [rbp-0x4] 400688: 89 c7 mov edi,eax 40068a: e8 c1 fe ff ff call 400550 \u0026lt;show_me_the_money@plt\u0026gt; 40068f: c9 leave 400690: c3 ret 400691: 66 2e 0f 1f 84 00 00 nop WORD PTR cs:[rax+rax*1+0x0] 400698: 00 00 00 40069b: 0f 1f 44 00 00 nop DWORD PTR [rax+rax*1+0x0] â€¦â€¦ åœ¨ main å‡½æ•°è°ƒç”¨ show_me_the_money çš„å‡½æ•°çš„æ—¶å€™ï¼Œå¯¹åº”çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š\ncall 400550 \u0026lt;show_me_the_money@plt\u0026gt; è¿™é‡Œåé¢æœ‰ä¸€ä¸ª@plt çš„å…³é”®å­—ï¼Œä»£è¡¨äº†æˆ‘ä»¬éœ€è¦ä»PLTï¼Œä¹Ÿå°±æ˜¯è¿‡ç¨‹é“¾æ¥è¡¨ï¼ˆProcedure Link Tableï¼‰é‡Œé¢æ‰¾è¦è°ƒç”¨çš„å‡½æ•°ã€‚å¯¹åº”çš„åœ°å€å‘¢ï¼Œåˆ™æ˜¯ 400550 è¿™ä¸ªåœ°å€ã€‚\né‚£å½“æˆ‘ä»¬æŠŠç›®å…‰æŒªåˆ°ä¸Šé¢çš„ 400550 è¿™ä¸ªåœ°å€ï¼Œä½ åˆä¼šçœ‹åˆ°é‡Œé¢è¿›è¡Œäº†ä¸€æ¬¡è·³è½¬ï¼Œè¿™ä¸ªè·³è½¬æŒ‡å®šçš„è·³è½¬åœ°å€ï¼Œä½ å¯ä»¥åœ¨åé¢çš„æ³¨é‡Šé‡Œé¢å¯ä»¥çœ‹åˆ°ï¼ŒGLOBAL_OFFSET_TABLE+0x18ã€‚è¿™é‡Œçš„ GLOBAL_OFFSET_TABLEï¼Œå°±æ˜¯æˆ‘æ¥ä¸‹æ¥è¦è¯´çš„å…¨å±€åç§»è¡¨ã€‚\n400550: ff 25 12 05 20 00 jmp QWORD PTR [rip+0x200512] # 600a68 \u0026lt;_GLOBAL_OFFSET_TABLE_+0x18\u0026gt; åœ¨åŠ¨æ€é“¾æ¥å¯¹åº”çš„å…±äº«åº“ï¼Œæˆ‘ä»¬åœ¨å…±äº«åº“çš„ data section é‡Œé¢ï¼Œä¿å­˜äº†ä¸€å¼ å…¨å±€åç§»è¡¨ï¼ˆGOTï¼ŒGlobal Offset Tableï¼‰ã€‚è™½ç„¶å…±äº«åº“çš„ä»£ç éƒ¨åˆ†çš„ç‰©ç†å†…å­˜æ˜¯å…±äº«çš„ï¼Œä½†æ˜¯æ•°æ®éƒ¨åˆ†æ˜¯å„ä¸ªåŠ¨æ€é“¾æ¥å®ƒçš„åº”ç”¨ç¨‹åºé‡Œé¢å„åŠ è½½ä¸€ä»½çš„ã€‚æ‰€æœ‰éœ€è¦å¼•ç”¨å½“å‰å…±äº«åº“å¤–éƒ¨çš„åœ°å€çš„æŒ‡ä»¤ï¼Œéƒ½ä¼šæŸ¥è¯¢ GOTï¼Œæ¥æ‰¾åˆ°å½“å‰è¿è¡Œç¨‹åºçš„è™šæ‹Ÿå†…å­˜é‡Œçš„å¯¹åº”ä½ç½®ã€‚è€Œ GOT è¡¨é‡Œçš„æ•°æ®ï¼Œåˆ™æ˜¯åœ¨æˆ‘ä»¬åŠ è½½ä¸€ä¸ªä¸ªå…±äº«åº“çš„æ—¶å€™å†™è¿›å»çš„ã€‚\nè™½ç„¶ä¸åŒçš„ç¨‹åºè°ƒç”¨çš„åŒæ ·çš„åŠ¨æ€åº“ï¼Œå„è‡ªçš„å†…å­˜åœ°å€æ˜¯ç‹¬ç«‹çš„ï¼Œè°ƒç”¨çš„åˆéƒ½æ˜¯åŒä¸€ä¸ªåŠ¨æ€åº“ï¼Œä½†æ˜¯ä¸éœ€è¦å»ä¿®æ”¹åŠ¨æ€åº“é‡Œé¢çš„ä»£ç æ‰€ä½¿ç”¨çš„åœ°å€ï¼Œè€Œæ˜¯å„ä¸ªç¨‹åºå„è‡ªç»´æŠ¤å¥½è‡ªå·±çš„ GOTï¼Œèƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”çš„åŠ¨æ€åº“å°±å¥½äº†ã€‚\näºŒè¿›åˆ¶ç¼–ç  åŸç è¡¨ç¤ºæ³•ï¼Œå·¦ä¾§ç¬¬ä¸€ä½æ˜¯ç¬¦å·ä½ï¼Œç¬¦å·ä½ä¸º 1 æ—¶è¡¨ç¤ºè´Ÿæ•°ï¼Œä¸º 0 æ—¶è¡¨ç¤ºæ­£æ•°ã€‚ è¡¥ç è¡¨ç¤ºæ³•ï¼Œæˆ‘ä»¬ä¸å†æŠŠè¿™ä¸€ä½å½“æˆå•ç‹¬çš„ç¬¦å·ä½ï¼Œåœ¨å‰©ä¸‹å‡ ä½è®¡ç®—å‡ºçš„åè¿›åˆ¶å‰åŠ ä¸Šæ­£è´Ÿå·ï¼Œè€Œæ˜¯åœ¨è®¡ç®—æ•´ä¸ªäºŒè¿›åˆ¶å€¼çš„æ—¶å€™ï¼Œåœ¨å·¦ä¾§æœ€é«˜ä½å‰é¢åŠ ä¸ªè´Ÿå·ã€‚\næ¯”å¦‚ï¼Œä¸€ä¸ª 4 ä½çš„äºŒè¿›åˆ¶è¡¥ç æ•°å€¼ 1011ï¼Œè½¬æ¢æˆåè¿›åˆ¶ï¼Œå°±æ˜¯ $-1 \\times 2^3 + 0 \\times 2^2 + 1 \\times 2^1 + 1 \\times 2^0 = -5$\nä¸€ä¸ª 4 ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œå¯ä»¥è¡¨ç¤ºä» -8 åˆ° 7 è¿™ 16 ä¸ªæ•´æ•°ï¼Œä¸ä¼šç™½ç™½æµªè´¹ä¸€ä½ã€‚\nå­—ç¬¦é›†ï¼šè¡¨ç¤ºçš„å¯ä»¥æ˜¯å­—ç¬¦çš„ä¸€ä¸ªé›†åˆã€‚æ¯”å¦‚è¯´â€œç¬¬ä¸€ç‰ˆã€Šæ–°åå­—å…¸ã€‹é‡Œé¢å‡ºç°çš„æ‰€æœ‰æ±‰å­—â€ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸­æ–‡å­—ç¬¦é›†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æ—¥å¸¸è¯´çš„Unicodeï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼ŒåŒ…å«äº† 150 ç§è¯­è¨€çš„ 14 ä¸‡ä¸ªä¸åŒçš„å­—ç¬¦ã€‚\nå­—ç¬¦ç¼–ç ï¼šå¯¹äºå­—ç¬¦é›†é‡Œçš„è¿™äº›å­—ç¬¦ï¼Œæ€ä¹ˆä¸€ä¸€ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå‡ºæ¥çš„ä¸€ä¸ªå­—å…¸ã€‚æˆ‘ä»¬ä¸Šé¢è¯´çš„ Unicodeï¼Œå°±å¯ä»¥ç”¨UTF-8ã€UTF-16ï¼Œä¹ƒè‡³ UTF-32 æ¥è¿›è¡Œç¼–ç ï¼Œå­˜å‚¨æˆäºŒè¿›åˆ¶ã€‚\nåŒæ ·çš„æ–‡æœ¬ï¼Œé‡‡ç”¨ä¸åŒçš„ç¼–ç å­˜å‚¨ä¸‹æ¥ã€‚å¦‚æœå¦å¤–ä¸€ä¸ªç¨‹åºï¼Œç”¨ä¸€ç§ä¸åŒçš„ç¼–ç æ–¹å¼æ¥è¿›è¡Œè§£ç å’Œå±•ç¤ºï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚\né”Ÿæ–¤æ‹· çƒ«çƒ«çƒ« Unicode ç¼–ç ä¸€ç›´æŒç»­åœ¨æ”¶å½•å„ç§å­—å…ƒï¼Œè¿™å°±å¯èƒ½ä¼šå‡ºç°å„ç§ä½œä¸šç³»ç»Ÿæ”¯æ´çš„ Unicode å­—å…ƒä¸ä¸€æ ·ã€‚è¿™ä¹Ÿå°±ä¼šå¯¼è‡´ A ä¸Šçš„ä¸€ä¸ªç”¨ Unicode ç¼–ç çš„å­—å…ƒï¼Œåœ¨ B ä¸Šå°±ä¼šå‡ºç°æ— æ³•æ˜¾ç¤ºçš„æƒ…å†µã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåœ¨ Unicode ä¸­å®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šå­—å…ƒï¿½ï¼Œå®ƒçš„ Unicode ç¼–ç ä¸º 0xFFFDã€‚\nå‡å¦‚ A æ”¯æ´ç‰¹æ®Šå­—å…ƒâ¬†ï¼Œä½†æ˜¯ B å¹¶ä¸æ”¯æ´è¿™ä¸ªâ¬†ï¼Œé‚£ä¹ˆåœ¨ B ä¸­å°†ä¼šç”¨ï¿½æ¥ä»£æ›¿ã€‚\nè¿™ä¸ªå­—å…ƒç”¨ UTF-8 ç¼–ç åï¼Œåå…­è¿›ä½è¡¨ç¤ºä¸º0xEF 0XBF 0XBDã€‚å¦‚æœè¿ç»­å‡ºç°ä¸¤ä¸ªâ¬†ç¬¦å·ï¼Œé‚£ä¹ˆç”¨ UTF-8 ç¼–ç åçš„åå…­è¿›ä½åˆ™è¡¨ç¤ºä¸º0xEF 0XBF 0XBD 0xEF 0XBF 0XBDï¼Œè¿™æ—¶å€™å†è½¬ç æˆ GBKï¼Œå› ä¸º GBK ä¸­ç”¨ä¸¤ä¸ªä½å…ƒç»„è¡¨ç¤ºä¸€ä¸ªå­—å…ƒï¼Œé‚£ä¹ˆä¸Šè¿°çš„å­—å…ƒå°±æˆäº†é”Ÿï¼ˆ0xEFBFï¼‰ï¼Œæ–¤ï¼ˆ0xBDEFï¼‰ï¼Œæ‹·ï¼ˆ0xBFBDï¼‰ã€‚å‡ºç°é”Ÿæ–¤æ‹·çš„åŸå› å°±æ˜¯ UTF-8 è½¬ç  GBK çš„è¿‡ç¨‹ä¸­å‡ºç°äº†é—®é¢˜ã€‚å½“ç„¶å¦‚æœæƒ³è¦å‡ºç°é”Ÿæ–¤æ‹·ï¼Œåˆ™è‡³å°‘éœ€è¦ä¸¤ä¸ªå­—å…ƒå‡ºç°ä¹±ç ã€‚\nè€Œâ€œçƒ«çƒ«çƒ«â€ï¼Œåˆ™æ˜¯å› ä¸ºå¦‚æœä½ ç”¨äº† Visual Studio çš„è°ƒè¯•å™¨ï¼Œé»˜è®¤ä½¿ç”¨ MBCS å­—ç¬¦é›†ã€‚â€œçƒ«â€åœ¨é‡Œé¢æ˜¯ç”± 0xCCCC æ¥è¡¨ç¤ºçš„ï¼Œè€Œ 0xCC åˆæ°å¥½æ˜¯æœªåˆå§‹åŒ–çš„å†…å­˜çš„èµ‹å€¼ã€‚äºæ˜¯ï¼Œåœ¨è¯»åˆ°æ²¡æœ‰èµ‹å€¼çš„å†…å­˜åœ°å€æˆ–è€…å˜é‡çš„æ—¶å€™ï¼Œç”µè„‘å°±å¼€å§‹å¤§å«â€œçƒ«çƒ«çƒ«â€äº†ã€‚\nç†è§£ç”µè·¯ ä»ä»¥ä¸Šçš„å­¦ä¹ å¯ä»¥çŸ¥é“ï¼Œæœ€ç»ˆæ‰§è¡Œçš„ç¨‹åºéƒ½æ˜¯äºŒè¿›åˆ¶çš„æŒ‡ä»¤ã€‚é‚£ä¸ºä½•è®¡ç®—æœºæœ€ç»ˆé€‰æ‹©äº†äºŒè¿›åˆ¶å‘¢ï¼Ÿæ¥ä¸‹æ¥çœ‹çœ‹è®¡ç®—æœºåœ¨ç¡¬ä»¶å±‚é¢ç©¶ç«Ÿæ˜¯æ€ä¹ˆè¡¨ç¤ºäºŒè¿›åˆ¶çš„ï¼Œä»¥æ­¤ä½ å°±ä¼šæ˜ç™½ï¼Œä¸ºä»€ä¹ˆè®¡ç®—æœºä¼šé€‰æ‹©äºŒè¿›åˆ¶ã€‚\nåŠ æ³•å™¨ ä¹˜æ³•å™¨ æµ®ç‚¹æ•°å’Œå®šç‚¹æ•° ","permalink":"https://lifeislife.cn/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E6%8C%87%E4%BB%A4%E5%92%8C%E8%BF%90%E7%AE%97/","summary":"\u003ch2 id=\"è®¡ç®—æœºæŒ‡ä»¤\"\u003eè®¡ç®—æœºæŒ‡ä»¤\u003c/h2\u003e\n\u003cp\u003eä¸Šä¸–çºª 60 å¹´ä»£æ™šæœŸæˆ– 70 å¹´ä»£åˆæœŸï¼Œç¨‹åºéœ€è¦å…ˆå†™åœ¨çº¸ä¸Šï¼Œç„¶åè½¬æˆäºŒè¿›åˆ¶æœºå™¨ç ï¼Œå†æ‰“åˆ°æ‰“å­”å¡ä¸Šï¼ˆ0 è¡¨ç¤ºä¸æ‰“å­”ï¼Œ1 è¡¨ç¤ºæ‰“å­”ï¼‰ï¼Œé€å…¥ç‰¹æ®Šçš„è®¡ç®—æœºä¸­æ‰§è¡Œã€‚\u003c/p\u003e","title":"è®¡ç®—æœºç»„æˆåŸç†-æŒ‡ä»¤å’Œè¿ç®—"},{"content":"è§£å†³æ–¹æ³• æ–¹æ³•ä¸€ï¼š\ngit config --global http.sslVerify \u0026#34;false\u0026#34; æ–¹æ³•äºŒï¼š\ngit config --global https.sslVerify \u0026#34;false\u0026#34; æ–¹æ³•ä¸‰ï¼š è¿™å¯èƒ½æ˜¯å› ä¸ºç‰ˆæœ¬åº“çš„å¤§å°å’Œ git çš„é»˜è®¤ç¼“å†²åŒºå¤§å°ï¼Œæ‰€ä»¥é€šè¿‡ä¸‹è¿°æ“ä½œï¼ˆåœ¨ git bash ä¸Šï¼‰ï¼Œgit çš„ç¼“å†²åŒºå¤§å°ä¼šå¢åŠ ã€‚\n//åœ¨ä»“åº“initåï¼Œæ·»åŠ ä»¥ä¸‹é…ç½® git config http.postBuffer 524288000 //å¦‚æœä»“åº“ä¸æ˜¯è‡ªå·±çš„ï¼Œå¯ä»¥æ·»åŠ ä»¥ä¸‹é…ç½® git config --global http.postBuffer 524288000 æ–¹æ³•å››ï¼š ç½‘é€Ÿå¤ªæ…¢ï¼Œæ¢ä¸ªç½‘é€Ÿå¿«çš„ç¯å¢ƒã€‚\nReference windows - git clone error: RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 10054 - Stack Overflow è§£å†³ OpenSSL SSL_read: Connection was reset, errno 10054 å•é¡Œ\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3openssl-ssl-read-connection-was-reset-errno-10054/","summary":"\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cp\u003eæ–¹æ³•ä¸€ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit config --global http.sslVerify \u0026#34;false\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ–¹æ³•äºŒï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit config --global https.sslVerify \u0026#34;false\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ–¹æ³•ä¸‰ï¼š\nè¿™å¯èƒ½æ˜¯å› ä¸ºç‰ˆæœ¬åº“çš„å¤§å°å’Œ git çš„é»˜è®¤ç¼“å†²åŒºå¤§å°ï¼Œæ‰€ä»¥é€šè¿‡ä¸‹è¿°æ“ä½œï¼ˆåœ¨ git bash ä¸Šï¼‰ï¼Œgit çš„ç¼“å†²åŒºå¤§å°ä¼šå¢åŠ ã€‚\u003c/p\u003e","title":"è§£å†³ OpenSSL SSL_read: Connection was reset, errno 10054"},{"content":"å˜é•¿æ•°ç»„ æƒ³å¿…å¾ˆå¤šå­¦ä¹  C è¯­è¨€çš„äººéƒ½ä¼šåœ¨ä¹¦ä¸Šçœ‹åˆ°ï¼Œæ•°ç»„åœ¨åˆå§‹åŒ–æ—¶å¿…é¡»è¦ç¡®å®šé•¿åº¦ï¼ˆç»´åº¦ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´å®šä¹‰æ•°ç»„æ—¶ï¼Œç»´åº¦ä¸€å®šè¦ç”¨å¸¸é‡ã€‚ä½†æ˜¯åœ¨ç¼–ç¨‹ä¸­å¾ˆå¤šäººè‚¯å®šå‘ç°äº†ï¼ŒåŠæ—¶åƒä¸‹é¢è¿™æ ·å†™ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚\nint n; int array[n]; è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿéš¾é“ä»¥å‰æˆ‘å­¦çš„æ˜¯é”™çš„å—ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚æœ€å®˜æ–¹çš„è§£é‡Šåº”è¯¥æ˜¯ C è¯­è¨€çš„è§„èŒƒå’Œç¼–è¯‘å™¨çš„è§„èŒƒè¯´æ˜äº†ã€‚\nåœ¨ ISO/IEC9899 æ ‡å‡†çš„ 6.7.5.2 Array declarators ä¸­æ˜ç¡®è¯´æ˜äº†æ•°ç»„çš„é•¿åº¦å¯ä»¥ä¸ºå˜é‡çš„ï¼Œç§°ä¸ºå˜é•¿æ•°ç»„ï¼ˆVLAï¼Œvariable length arrayï¼‰ã€‚ï¼ˆæ³¨ï¼šè¿™é‡Œçš„å˜é•¿æŒ‡çš„æ˜¯æ•°ç»„çš„é•¿åº¦æ˜¯åœ¨è¿è¡Œæ—¶æ‰èƒ½å†³å®šï¼Œä½†ä¸€æ—¦å†³å®šåœ¨æ•°ç»„çš„ç”Ÿå‘½å‘¨æœŸå†…å°±ä¸ä¼šå†å˜ã€‚ï¼‰ åœ¨ GCC æ ‡å‡†è§„èŒƒçš„ 6.19 Arrays of Variable Length ä¸­æŒ‡å‡ºï¼Œä½œä¸ºç¼–è¯‘å™¨æ‰©å±•ï¼ŒGCC åœ¨ C90 æ¨¡å¼å’Œ C++ ç¼–è¯‘å™¨ä¸‹éµå®ˆ ISO C99 å…³äºå˜é•¿æ•°ç»„çš„è§„èŒƒã€‚ åŸæ¥è¿™ç§è¯­æ³•ç¡®å®æ˜¯ C è¯­è¨€è§„èŒƒï¼ŒGCC éå¸¸å®Œç¾çš„æ”¯æŒäº† ISO C99ã€‚ä½†æ˜¯åœ¨ C99 ä¹‹å‰çš„ C è¯­è¨€ä¸­ï¼Œå˜é•¿æ•°ç»„çš„è¯­æ³•æ˜¯ä¸å­˜åœ¨çš„ã€‚\nè¿™ç§å˜é•¿æ•°ç»„æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå®ƒå¯ä»¥å®ç°ä¸allocaå‡½æ•°ä¸€æ ·çš„æ•ˆæœï¼Œåœ¨æ ˆä¸Šè¿›è¡ŒåŠ¨æ€çš„ç©ºé—´åˆ†é…ï¼Œå¹¶ä¸”åœ¨å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜ï¼Œæ— éœ€æ‰‹åŠ¨é‡Šæ”¾ã€‚\nalloca å‡½æ•°ç”¨æ¥åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œå½“å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€æ‰‹åŠ¨å†å»é‡Šæ”¾ï¼›\nå¯å˜æ•°ç»„ç¤ºä¾‹ï¼š æ‰€æœ‰å¯å˜ä¿®æ”¹ (VM) ç±»å‹çš„å£°æ˜å¿…é¡»åœ¨å—èŒƒå›´æˆ–å‡½æ•°åŸå‹èŒƒå›´å†…ã€‚ä½¿ç”¨ static æˆ– extern å­˜å‚¨ç±»è¯´æ˜ç¬¦å£°æ˜çš„æ•°ç»„å¯¹è±¡ä¸èƒ½å…·æœ‰å¯å˜é•¿åº¦æ•°ç»„ (VLA) ç±»å‹ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨é™æ€å­˜å‚¨ç±»è¯´æ˜ç¬¦å£°æ˜çš„å¯¹è±¡å¯ä»¥å…·æœ‰ VM ç±»å‹ï¼ˆå³ï¼ŒæŒ‡å‘ VLA ç±»å‹çš„æŒ‡é’ˆï¼‰ã€‚æœ€åï¼Œä½¿ç”¨ VM ç±»å‹å£°æ˜çš„æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½å¿…é¡»æ˜¯æ™®é€šæ ‡è¯†ç¬¦ï¼Œå› æ­¤ä¸èƒ½æ˜¯ç»“æ„æˆ–è”åˆçš„æˆå‘˜ã€‚\nextern int n; int A[n]; // Error - file scope VLA. extern int (*p2)[n]; // Error - file scope VM. int B[100]; // OK - file scope but not VM. void fvla(int m, int C[m][m]) // OK - VLA with prototype scope. { typedef int VLA[m][m] // OK - block scope typedef VLA. struct tag { int (*y)[n]; // Error - y not ordinary identifier. int z[n]; // Error - z not ordinary identifier. }; int D[m]; // OK - auto VLA. static int E[m]; // Error - static block scope VLA. extern int F[m]; // Error - F has linkage and is VLA. int (*s)[m]; // OK - auto pointer to VLA. extern int (*r)[m]; // Error - r had linkage and is // a pointer to VLA. static int (*q)[m] = \u0026amp;B; // OK - q is a static block // pointer to VLA. } é›¶é•¿æ•°ç»„ GNU/GCC åœ¨æ ‡å‡†çš„ C/C++ åŸºç¡€ä¸Šåšäº†æœ‰å®ç”¨æ€§çš„æ‰©å±•ï¼Œé›¶é•¿åº¦æ•°ç»„ï¼ˆArrays of Length Zeroï¼‰å°±æ˜¯å…¶ä¸­ä¸€ä¸ªçŸ¥åçš„æ‰©å±•ã€‚ä½¿ç”¨é›¶é•¿æ•°ç»„ï¼ŒæŠŠå®ƒä½œä¸ºç»“æ„ä½“çš„æœ€åä¸€ä¸ªå…ƒç´ éå¸¸æœ‰ç”¨ï¼š\nstruct line { int length; char contents[0]; }; struct line *thisline = (struct line *) malloc (sizeof (struct line) + this_length); thisline-\u0026gt;length = this_length; ä»ä¸Šä¾‹å°±å¯ä»¥çœ‹å‡ºï¼Œé›¶é•¿æ•°ç»„åœ¨æœ‰å›ºå®šå¤´éƒ¨çš„å¯å˜å¯¹è±¡ä¸Šéå¸¸é€‚ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å¯¹è±¡çš„å¤§å°åŠ¨æ€åœ°å»åˆ†é…ç»“æ„ä½“çš„å¤§å°ã€‚\nåœ¨ Linux å†…æ ¸ä¸­ä¹Ÿæœ‰è¿™ç§åº”ç”¨ï¼Œä¾‹å¦‚ç”±äº PID å‘½åç©ºé—´çš„å­˜åœ¨ï¼Œæ¯ä¸ªè¿›ç¨‹ PID éœ€è¦æ˜ å°„åˆ°æ‰€æœ‰èƒ½çœ‹åˆ°å…¶çš„å‘½åç©ºé—´ä¸Šï¼Œä½†è¯¥è¿›ç¨‹æ‰€åœ¨çš„å‘½åç©ºé—´åœ¨å¼€å§‹å¹¶ä¸ç¡®å®šï¼ˆä½†è‡³å°‘ä¸º init å‘½åç©ºé—´ï¼‰ï¼Œéœ€è¦åœ¨è¿è¡Œæ˜¯æ ¹æ® level çš„å€¼æ¥ç¡®å®šï¼Œæ‰€ä»¥åœ¨è¯¥ç»“æ„ä½“åé¢å¢åŠ äº†ä¸€ä¸ªé•¿åº¦ä¸º 1 çš„æ•°ç»„ï¼ˆå› ä¸ºè‡³å°‘åœ¨ä¸€ä¸ªinitå‘½åç©ºé—´ä¸Šï¼‰ï¼Œä½¿å¾—è¯¥ç»“æ„ä½“ pid æ˜¯ä¸ªå¯å˜é•¿çš„ç»“æ„ä½“ï¼Œåœ¨è¿è¡Œæ—¶æ ¹æ®è¿›ç¨‹æ‰€å¤„çš„å‘½åç©ºé—´çš„ level æ¥å†³å®š numbers åˆ†é…å¤šå¤§ã€‚ï¼ˆæ³¨ï¼šè™½ç„¶ä¸æ˜¯é›¶é•¿åº¦çš„æ•°ç»„ï¼Œä½†ç”¨æ³•æ˜¯ä¸€æ ·çš„ï¼‰\nstruct pid { atomic_t count; unsigned int level; /* lists of tasks that use this pid */ struct hlist_head tasks[PIDTYPE_MAX]; struct rcu_head rcu; struct upid numbers[1]; }; ä»€ä¹ˆ 0 é•¿åº¦æ•°ç»„ä¸å ç”¨å­˜å‚¨ç©ºé—´ 0 é•¿åº¦æ•°ç»„ä¸æŒ‡é’ˆå®ç°æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Œä¸ºä»€ä¹ˆ 0 é•¿åº¦æ•°ç»„ä¸å ç”¨å­˜å‚¨ç©ºé—´å‘¢ï¼Ÿ\nå…¶å®æœ¬è´¨ä¸Šæ¶‰åŠåˆ°çš„æ˜¯ä¸€ä¸ª C è¯­è¨€é‡Œé¢çš„æ•°ç»„å’ŒæŒ‡é’ˆçš„åŒºåˆ«é—®é¢˜ã€‚char a[1] é‡Œé¢çš„ a å’Œ char *b çš„ b ç›¸åŒå—ï¼Ÿ\nã€ŠProgramming Abstractions in Cã€‹ï¼ˆRoberts, E. S.ï¼Œæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾ï¼Œ2004.6ï¼‰82 é¡µé‡Œé¢è¯´ã€‚\nâ€œarr is defined to be identical to \u0026amp;arr[0]â€.\nä¹Ÿå°±æ˜¯è¯´ï¼Œchar a[1]é‡Œé¢çš„aå®é™…æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œç­‰äº\u0026amp;a[0]ã€‚è€Œchar *bæ˜¯æœ‰ä¸€ä¸ªå®å®åœ¨åœ¨çš„æŒ‡é’ˆå˜é‡bå­˜åœ¨ã€‚æ‰€ä»¥ï¼Œa=bæ˜¯ä¸å…è®¸çš„ï¼Œè€Œb=aæ˜¯å…è®¸çš„ã€‚\næœ¬è´¨ä¸Šå› ä¸ºæ•°ç»„åå®ƒåªæ˜¯ä¸€ä¸ªåç§»é‡ï¼Œæ•°ç»„åè¿™ä¸ªç¬¦å·æœ¬èº«ä»£ è¡¨äº†ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„åœ°å€å¸¸é‡ ï¼ˆæ³¨æ„ï¼šæ•°ç»„åæ°¸è¿œéƒ½ä¸ä¼šæ˜¯æŒ‡é’ˆï¼ ï¼‰ï¼Œä½†å¯¹äºè¿™ä¸ªæ•°ç»„çš„å¤§å°ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œå¯¹äºç¼–è¯‘å™¨è€Œè¨€ï¼Œæ•°ç»„åä»…ä»…æ˜¯ä¸€ä¸ªç¬¦å·ï¼Œå®ƒä¸ä¼šå ç”¨ä»»ä½•ç©ºé—´ï¼Œå®ƒåœ¨ç»“æ„ä½“ä¸­ï¼Œåªæ˜¯ä»£è¡¨äº†ä¸€ä¸ªåç§»é‡ï¼Œä»£è¡¨ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„åœ°å€å¸¸é‡ï¼\nReferences alloca å‡½æ•°ç”¨æ¥åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œå½“å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€æ‰‹åŠ¨å†å»é‡Šæ”¾\nC è¯­è¨€ 0 é•¿åº¦æ•°ç»„ (å¯å˜æ•°ç»„/æŸ”æ€§æ•°ç»„) è¯¦è§£_OSKernelLAB(gatieme)-CSDN åšå®¢_æŸ”æ€§æ•°ç»„\né›¶é•¿æ•°ç»„ï¼ˆæŸ”æ€§æ•°ç»„ã€å¯å˜æ•°ç»„ï¼‰çš„ä½¿ç”¨_ç¦¾ä»”ä»”çš„åšå®¢-CSDN åšå®¢\nZero Length - Using the GNU Compiler Collection (GCC)\n","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%8F%98%E9%95%BF%E6%95%B0%E7%BB%84%E4%B8%8E%E9%9B%B6%E9%95%BF%E6%95%B0%E7%BB%84/","summary":"\u003ch2 id=\"å˜é•¿æ•°ç»„\"\u003eå˜é•¿æ•°ç»„\u003c/h2\u003e\n\u003cp\u003eæƒ³å¿…å¾ˆå¤šå­¦ä¹  C è¯­è¨€çš„äººéƒ½ä¼šåœ¨ä¹¦ä¸Šçœ‹åˆ°ï¼Œ\u003cstrong\u003eæ•°ç»„åœ¨åˆå§‹åŒ–æ—¶å¿…é¡»è¦ç¡®å®šé•¿åº¦ï¼ˆç»´åº¦ï¼‰\u003c/strong\u003eï¼Œä¹Ÿå°±æ˜¯è¯´å®šä¹‰æ•°ç»„æ—¶ï¼Œç»´åº¦ä¸€å®šè¦ç”¨å¸¸é‡ã€‚ä½†æ˜¯åœ¨ç¼–ç¨‹ä¸­å¾ˆå¤šäººè‚¯å®šå‘ç°äº†ï¼ŒåŠæ—¶åƒä¸‹é¢è¿™æ ·å†™ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚\u003c/p\u003e","title":"C è¯­è¨€ä¸­çš„å˜é•¿æ•°ç»„ä¸é›¶é•¿æ•°ç»„"},{"content":"","permalink":"https://lifeislife.cn/posts/ssh%E5%8E%9F%E7%90%86/","summary":"","title":"SSH åŸç†"},{"content":" 1.å¤§éƒ¨åˆ†è½¬è½½è‡ªQEMU å†…å­˜è™šæ‹ŸåŒ–æºç åˆ†æ | Keep Coding | è‹æ˜“åŒ— 2.åŸæ–‡æºç ä¸º QEMU1.2.0ï¼Œç‰ˆæœ¬è¾ƒæ—§ï¼Œéƒ¨åˆ†æºç å†…å®¹æ ¹æ® QEMU6.2 ç‰ˆæœ¬ä¿®æ”¹ 3.éƒ¨åˆ†å†…å®¹æ ¹æ®è‡ªå·±ç†è§£è¡¥å……æ·»åŠ \næ¦‚è¿° æˆ‘ä»¬çŸ¥é“æ“ä½œç³»ç»Ÿç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…è™šæ‹Ÿå†…å­˜ï¼Œé€šè¿‡é¡µè¡¨æ˜ å°„ï¼Œå˜æˆç‰©ç†å†…å­˜è¿›è¡Œè®¿é—®ã€‚å½“æœ‰äº†è™šæ‹Ÿæœºä¹‹åï¼Œæƒ…å†µä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚å› ä¸ºè™šæ‹Ÿæœºå¯¹äºç‰©ç†æœºæ¥è®²æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯è™šæ‹Ÿæœºé‡Œé¢ä¹Ÿæœ‰å†…æ ¸ï¼Œä¹Ÿæœ‰è™šæ‹Ÿæœºé‡Œé¢è·‘çš„è¿›ç¨‹ã€‚æ‰€ä»¥æœ‰äº†è™šæ‹Ÿæœºï¼Œå†…å­˜å°±å˜æˆäº†å››ç±»ï¼š\nè™šæ‹Ÿæœºé‡Œé¢çš„è™šæ‹Ÿå†…å­˜ï¼ˆGuest OS Virtual Memoryï¼ŒGVAï¼‰ï¼Œè¿™æ˜¯è™šæ‹Ÿæœºé‡Œé¢çš„è¿›ç¨‹çœ‹åˆ°çš„å†…å­˜ç©ºé—´ï¼› è™šæ‹Ÿæœºé‡Œé¢çš„ç‰©ç†å†…å­˜ï¼ˆGuest OS Physical Memoryï¼ŒGPAï¼‰ï¼Œè¿™æ˜¯è™šæ‹Ÿæœºé‡Œé¢çš„æ“ä½œç³»ç»Ÿçœ‹åˆ°çš„å†…å­˜ï¼Œå®ƒè®¤ä¸ºè¿™æ˜¯ç‰©ç†å†…å­˜ï¼› ç‰©ç†æœºçš„è™šæ‹Ÿå†…å­˜ï¼ˆHost Virtual Memoryï¼ŒHVAï¼‰ï¼Œè¿™æ˜¯ç‰©ç†æœºä¸Šçš„ qemu è¿›ç¨‹çœ‹åˆ°çš„å†…å­˜ç©ºé—´ï¼› ç‰©ç†æœºçš„ç‰©ç†å†…å­˜ï¼ˆHost Physical Memoryï¼ŒHPAï¼‰ï¼Œè¿™æ˜¯ç‰©ç†æœºä¸Šçš„æ“ä½œç³»ç»Ÿçœ‹åˆ°çš„å†…å­˜ã€‚ å†…å­˜è™šæ‹ŸåŒ–çš„å…³é”®åœ¨äºç»´æŠ¤ GPA åˆ° HVA çš„æ˜ å°„å…³ç³»ã€‚\né¡µé¢åˆ†é…å’Œæ˜ å°„çš„ä¸¤ç§æ–¹å¼ è¦ææ¸…æ¥š QEMU system emulation çš„ä»¿çœŸæ¶æ„ï¼Œé¦–å…ˆå¯¹äº Host OSï¼Œå°† QEMU ä½œä¸ºè¿›ç¨‹å¯åŠ¨ï¼Œç„¶åå¯¹äº QEMU è¿›ç¨‹ï¼Œä¼šä»¿çœŸå„ç§ç¡¬ä»¶å’Œè¿è¡Œ Guest OSï¼Œåœ¨è¿™å±‚ OS ä¸Šè¿è¡Œè¦å…¨ç³»ç»Ÿæ¨¡æ‹Ÿçš„åº”ç”¨ç¨‹åºï¼Œå› æ­¤å¯¹äº Guest OS ç®¡ç†çš„å†…å­˜è¦å®ç°åˆ° QEMU è¿›ç¨‹çš„è™šæ‹Ÿç©ºé—´çš„è½¬æ¢éœ€è¦ softMMUï¼ˆå³éœ€è¦å¯¹ GPA åˆ° HVA è¿›è¡Œè½¬æ¢ï¼‰ã€‚ä» GVA åˆ° GPA åˆ° HVA åˆ° HPAï¼Œæ€§èƒ½å¾ˆå·®ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„æ€è·¯ã€‚\nå½±å­é¡µè¡¨ Shadow Page Tableï¼ŒSPT ç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯è½¯ä»¶çš„æ–¹å¼ï¼Œå½±å­é¡µè¡¨ï¼ˆShadow Page Tableï¼‰ã€‚\nKVM é€šè¿‡ç»´æŠ¤è®°å½• GVA-\u0026gt;HPA çš„å½±å­é¡µè¡¨ SPTï¼Œå‡å°‘äº†åœ°å€è½¬æ¢å¸¦æ¥çš„å¼€é”€ï¼Œå¯ä»¥ç›´æ¥å°† GVA è½¬æ¢ä¸º HPAã€‚\nå†…å­˜æ˜ å°„è¦é€šè¿‡é¡µè¡¨æ¥ç®¡ç†ï¼Œé¡µè¡¨åœ°å€åº”è¯¥æ”¾åœ¨ CR3 å¯„å­˜å™¨é‡Œé¢ã€‚åœ¨è½¯ä»¶è™šæ‹ŸåŒ–çš„å†…å­˜è½¬æ¢ä¸­ï¼ŒGVA åˆ° GPA çš„è½¬æ¢é€šè¿‡æŸ¥è¯¢ CR3 å¯„å­˜å™¨æ¥å®Œæˆï¼ŒCR3 ä¸­ä¿å­˜äº† Guest çš„é¡µè¡¨åŸºåœ°å€ï¼Œç„¶åè½½å…¥ MMU ä¸­è¿›è¡Œåœ°å€è½¬æ¢ã€‚\nåœ¨åŠ å…¥äº† SPT æŠ€æœ¯åï¼Œå½“ Guest è®¿é—® CR3 æ—¶ï¼ŒKVM ä¼šæ•è·åˆ°è¿™ä¸ªæ“ä½œ EXIT_REASON_CR_ACCESSï¼Œä¹‹å KVM ä¼šè½½å…¥ç‰¹æ®Šçš„ CR3 å’Œå½±å­é¡µè¡¨ï¼Œæ¬ºéª— Guest è¿™å°±æ˜¯çœŸå®çš„ CR3ã€‚ä¹‹åå°±å’Œä¼ ç»Ÿçš„è®¿é—®å†…å­˜æ–¹å¼ä¸€è‡´ï¼Œå½“éœ€è¦è®¿é—®ç‰©ç†å†…å­˜çš„æ—¶å€™ï¼Œåªä¼šç»è¿‡ä¸€å±‚å½±å­é¡µè¡¨çš„è½¬æ¢ã€‚\næœ¬æ¥çš„è¿‡ç¨‹æ˜¯ï¼Œå®¢æˆ·æœºè¦é€šè¿‡ cr3 æ‰¾åˆ°å®¢æˆ·æœºçš„é¡µè¡¨ï¼Œå®ç°ä» GVA åˆ° GPA çš„è½¬æ¢ï¼Œç„¶ååœ¨å®¿ä¸»æœºä¸Šï¼Œè¦é€šè¿‡ cr3 æ‰¾åˆ°å®¿ä¸»æœºçš„é¡µè¡¨ï¼Œå®ç°ä» HVA åˆ° HPA çš„è½¬æ¢ã€‚ ä¸ºäº†å®ç°å®¢æˆ·æœºè™šæ‹Ÿåœ°å€ç©ºé—´åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€ç©ºé—´çš„ç›´æ¥æ˜ å°„ã€‚å®¢æˆ·æœºä¸­æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ‰€ä»¥ KVM éœ€è¦ä¸ºå®¢æˆ·æœºä¸­çš„æ¯ä¸ªè¿›ç¨‹é¡µè¡¨éƒ½è¦ç»´æŠ¤ä¸€å¥—ç›¸åº”çš„å½±å­é¡µè¡¨ã€‚ åœ¨å®¢æˆ·æœºè®¿é—®å†…å­˜æ—¶ï¼Œä½¿ç”¨çš„ä¸æ˜¯å®¢æˆ·æœºçš„åŸæ¥çš„é¡µè¡¨ï¼Œè€Œæ˜¯è¿™ä¸ªé¡µè¡¨å¯¹åº”çš„å½±å­é¡µè¡¨ï¼Œä»è€Œå®ç°äº†ä»å®¢æˆ·æœºè™šæ‹Ÿåœ°å€åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€çš„ç›´æ¥è½¬æ¢ã€‚è€Œä¸”ï¼Œåœ¨ TLB å’Œ CPU ç¼“å­˜ä¸Šç¼“å­˜çš„æ˜¯æ¥è‡ªå½±å­é¡µè¡¨ä¸­å®¢æˆ·æœºè™šæ‹Ÿåœ°å€å’Œå®¿ä¸»æœºç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„ï¼Œä¹Ÿå› æ­¤æé«˜äº†ç¼“å­˜çš„æ•ˆç‡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸ºäº†å¿«é€Ÿæ£€ç´¢ Guest é¡µè¡¨å¯¹åº”çš„å½±å­é¡µè¡¨ï¼ŒKVM ä¸ºæ¯ä¸ªå®¢æˆ·æœºç»´æŠ¤äº†ä¸€ä¸ª hash è¡¨æ¥è¿›è¡Œå®¢æˆ·æœºé¡µè¡¨åˆ°å½±å­é¡µè¡¨ä¹‹é—´çš„æ˜ å°„ã€‚å¯¹äºæ¯ä¸€ä¸ª Guest æ¥è¯´ï¼Œå…¶é¡µç›®å½•å’Œé¡µè¡¨éƒ½æœ‰å”¯ä¸€çš„ GPAï¼Œé€šè¿‡é¡µç›®å½•/é¡µè¡¨çš„ GPA å°±å¯ä»¥åœ¨å“ˆå¸Œé“¾è¡¨ä¸­å¿«é€Ÿåœ°æ‰¾åˆ°å¯¹åº”çš„å½±å­é¡µç›®å½•/é¡µè¡¨ã€‚\nå½“ Guest åˆ‡æ¢è¿›ç¨‹æ—¶ï¼ŒGuest ä¼šæŠŠå¾…åˆ‡æ¢è¿›ç¨‹çš„é¡µè¡¨åŸºå€è½½å…¥ CR3ï¼Œè€Œ KVM å°†ä¼šæˆªè·è¿™ä¸€ç‰¹æƒæŒ‡ä»¤ã€‚KVM åœ¨å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°ä¸æ­¤é¡µè¡¨åŸºå€å¯¹åº”çš„å½±å­é¡µè¡¨åŸºå€ï¼Œè½½å…¥ Guest CR3ï¼Œä½¿ Guest åœ¨æ¢å¤è¿è¡Œæ—¶ CR3 å®é™…æŒ‡å‘çš„æ˜¯æ–°åˆ‡æ¢è¿›ç¨‹å¯¹åº”çš„å½±å­é¡µè¡¨ã€‚\nå½±å­é¡µè¡¨çš„å¼•å…¥ï¼Œå‡å°‘äº† GVA-\u0026gt;HPA çš„è½¬æ¢å¼€é”€ï¼Œä½†æ˜¯ç¼ºç‚¹åœ¨äºéœ€è¦ä¸º Guest çš„æ¯ä¸ªè¿›ç¨‹éƒ½ç»´æŠ¤ä¸€ä¸ªå½±å­é¡µè¡¨ï¼Œè¿™å°†å¸¦æ¥å¾ˆå¤§çš„å†…å­˜å¼€é”€ã€‚åŒæ—¶å½±å­é¡µè¡¨çš„å»ºç«‹æ˜¯å¾ˆè€—æ—¶çš„ï¼Œå¦‚æœ Guest çš„è¿›ç¨‹è¿‡å¤šï¼Œå°†å¯¼è‡´å½±å­é¡µè¡¨é¢‘ç¹åˆ‡æ¢ã€‚\nå› æ­¤ Intel å’Œ AMD åœ¨æ­¤åŸºç¡€ä¸Šæä¾›äº†åŸºäºç¡¬ä»¶çš„è™šæ‹ŸåŒ–æŠ€æœ¯ EPTã€‚\næ‰©å±•é¡µè¡¨ Extent Page Tableï¼ŒEPT Intel çš„ EPTï¼ˆExtent Page Tableï¼‰æŠ€æœ¯å’Œ AMD çš„ NPTï¼ˆNest Page Tableï¼‰æŠ€æœ¯éƒ½å¯¹å†…å­˜è™šæ‹ŸåŒ–æä¾›äº†ç¡¬ä»¶æ”¯æŒã€‚è¿™ä¸¤ç§æŠ€æœ¯åŸç†ç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨ç¡¬ä»¶å±‚é¢ä¸Šå®ç° GVA åˆ° HPA ä¹‹é—´çš„è½¬æ¢ã€‚ä¸‹é¢å°±ä»¥ EPT ä¸ºä¾‹åˆ†æä¸€ä¸‹ KVM åŸºäºç¡¬ä»¶è¾…åŠ©çš„å†…å­˜è™šæ‹ŸåŒ–å®ç°ã€‚\nEPT åœ¨åŸæœ‰å®¢æˆ·æœºé¡µè¡¨å¯¹å®¢æˆ·æœºè™šæ‹Ÿåœ°å€ GVA åˆ°å®¢æˆ·æœºç‰©ç†åœ°å€ GPA æ˜ å°„çš„åŸºç¡€ä¸Šï¼Œåˆå¼•å…¥äº† EPT é¡µè¡¨æ¥å®ç°å®¢æˆ·æœºç‰©ç†åœ°å€ GPA åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€ HPA çš„å¦ä¸€æ¬¡æ˜ å°„ã€‚å®¢æˆ·æœºè¿è¡Œæ—¶ï¼Œå®¢æˆ·æœºé¡µè¡¨è¢«è½½å…¥ CR3ï¼Œè€Œ EPT é¡µè¡¨è¢«è½½å…¥ä¸“é—¨çš„ EPT é¡µè¡¨æŒ‡é’ˆå¯„å­˜å™¨ EPTPã€‚\nå³ EPT æŠ€æœ¯é‡‡ç”¨äº†åœ¨ä¸¤çº§é¡µè¡¨ç»“æ„ï¼Œå³åŸæœ‰ Guest OS é¡µè¡¨å¯¹ GVA-\u0026gt;GPA æ˜ å°„çš„åŸºç¡€ä¸Šï¼Œåˆå¼•å…¥äº† EPT é¡µè¡¨æ¥å®ç° GPA-\u0026gt;HPA çš„å¦ä¸€æ¬¡æ˜ å°„ï¼Œè¿™ä¸¤æ¬¡åœ°å€æ˜ å°„éƒ½æ˜¯ç”±ç¡¬ä»¶è‡ªåŠ¨å®Œæˆã€‚\næœ‰äº† EPTï¼Œåœ¨GPA-\u0026gt;HPAè½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œç¼ºé¡µä¼šäº§ç”Ÿ EPT ç¼ºé¡µå¼‚å¸¸ã€‚KVM é¦–å…ˆæ ¹æ®å¼•èµ·å¼‚å¸¸çš„å®¢æˆ·æœºç‰©ç†åœ°å€ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„å®¿ä¸»æœºè™šæ‹Ÿåœ°å€ï¼Œç„¶åä¸ºæ­¤è™šæ‹Ÿåœ°å€åˆ†é…æ–°çš„ç‰©ç†é¡µï¼Œæœ€å KVM å†æ›´æ–° EPT é¡µè¡¨ï¼Œå»ºç«‹èµ·å¼•èµ·å¼‚å¸¸çš„å®¢æˆ·æœºç‰©ç†åœ°å€åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„ã€‚\nKVM åªéœ€ä¸ºæ¯ä¸ªå®¢æˆ·æœºç»´æŠ¤ä¸€å¥— EPT é¡µè¡¨ï¼Œä¹Ÿå¤§å¤§å‡å°‘äº†å†…å­˜çš„å¼€é”€ã€‚\nè¿™é‡Œï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹ç¬¬äºŒç§æ–¹å¼ã€‚å› ä¸ºä½¿ç”¨äº† EPT ä¹‹åï¼Œå®¢æˆ·æœºé‡Œé¢çš„é¡µè¡¨æ˜ å°„ï¼Œä¹Ÿå³ä» GVA åˆ° GPA çš„è½¬æ¢ï¼Œè¿˜æ˜¯ç”¨ä¼ ç»Ÿçš„æ–¹å¼ï¼Œå’Œåœ¨å†…å­˜ç®¡ç†é‚£ä¸€ç« è®²çš„æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚è€Œ EPT é‡ç‚¹å¸®æˆ‘ä»¬è§£å†³çš„å°±æ˜¯ä» GPA åˆ° HPA çš„è½¬æ¢é—®é¢˜ã€‚å› ä¸ºè¦ç»è¿‡ä¸¤æ¬¡é¡µè¡¨ï¼Œæ‰€ä»¥ EPT åˆ tdp(two dimentional paging)ã€‚\nEPT çš„é¡µè¡¨ç»“æ„ä¹Ÿæ˜¯åˆ†ä¸ºå››å±‚ï¼ŒEPT Pointerï¼ˆEPTPï¼‰æŒ‡å‘ PML4 çš„é¦–åœ°å€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image QEMU çš„ä¸»è¦å·¥ä½œ å†…å­˜è™šæ‹ŸåŒ–çš„ç›®çš„å°±æ˜¯è®©è™šæ‹Ÿæœºèƒ½å¤Ÿæ— ç¼çš„è®¿é—®å†…å­˜ã€‚æœ‰äº† Intel EPT çš„æ”¯æŒåï¼ŒCPU åœ¨ VMX non-root çŠ¶æ€æ—¶è¿›è¡Œå†…å­˜è®¿é—®ä¼šå†åšä¸€æ¬¡ EPT è½¬æ¢ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒQEMU ä¼šè´Ÿè´£ä»¥ä¸‹å†…å®¹ï¼š\né¦–å…ˆéœ€è¦ä»è‡ªå·±çš„è¿›ç¨‹åœ°å€ç©ºé—´ä¸­ç”³è¯·å†…å­˜ç”¨äº Guest éœ€è¦å°†ä¸Šä¸€æ­¥ä¸­ç”³è¯·åˆ°çš„å†…å­˜çš„è™šæ‹Ÿåœ°å€ï¼ˆHVAï¼‰å’Œ Guest çš„ç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ä¼ é€’ç»™ KVMï¼ˆkernelï¼‰ï¼Œå³ GPA-\u0026gt;HVA éœ€è¦ç»„ç»‡ä¸€ç³»åˆ—çš„æ•°æ®ç»“æ„æ¥ç®¡ç†è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œå¹¶åœ¨å†…å­˜æ‹“æ‰‘ç»“æ„æ›´æ”¹æ—¶å°†æœ€æ–°çš„å†…å­˜ä¿¡æ¯åŒæ­¥è‡³ KVM ä¸­\nQEMU å’Œ KVM çš„å·¥ä½œåˆ†ç•Œ QEMU å’Œ KVM ä¹‹é—´æ˜¯é€šè¿‡ KVM æä¾›çš„ ioctl() æ¥å£è¿›è¡Œäº¤äº’çš„ã€‚åœ¨å†…æ ¸çš„ kvm_vm_ioctl() ä¸­ï¼Œè®¾ç½®è™šæ‹Ÿæœºå†…å­˜çš„ç³»ç»Ÿè°ƒç”¨ã€kernel å°±æ˜¯ä¸€ç³»åˆ—ç³»ç»Ÿè°ƒç”¨å‡½æ•°æ¥å£å’Œå¤„ç†é€»è¾‘ï¼Œå…¶ä¸­æœ‰ä¸ªå¤„ç†â€åˆ›å»º/è®¾ç½®è™šæ‹Ÿæœºå†…å­˜â€œçš„ç³»ç»Ÿè°ƒç”¨æ¥å£ã€‘ä¸º VM_SET_USER_MEMORY_REGIONï¼š\nstatic long kvm_vm_ioctl(struct file *filp, unsigned int ioctl, unsigned long arg) { /* ... */ case KVM_SET_USER_MEMORY_REGION: { // åœ¨ KVM ä¸­æ³¨å†Œç”¨æˆ·ç©ºé—´ä¼ å…¥çš„å†…å­˜ä¿¡æ¯ struct kvm_userspace_memory_region kvm_userspace_mem; r = -EFAULT; // å°†ä¼ å…¥çš„æ•°æ®ç»“æ„å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´ if (copy_from_user(\u0026amp;kvm_userspace_mem, argp, sizeof kvm_userspace_mem)) goto out; // å®é™…è¿›è¡Œå¤„ç†çš„å‡½æ•° r = kvm_vm_ioctl_set_memory_region(kvm, \u0026amp;kvm_userspace_mem, 1); if (r) goto out; break; } /* ... */ } å¯ä»¥çœ‹åˆ°è¿™é‡Œéœ€è¦ä¼ é€’çš„å‚æ•°ç±»å‹ä¸º kvm_userspace_memory_regionï¼š\n/* for KVM_SET_USER_MEMORY_REGION */ struct kvm_userspace_memory_region { __u32 slot; // slot ç¼–å· [å‚è€ƒï¼šhttps://www.cnblogs.com/LoyenWang/p/11922887.html] __u32 flags; // æ ‡å¿—ä½ï¼Œä¾‹å¦‚æ˜¯å¦è¿½è¸ªè„é¡µã€æ˜¯å¦å¯ç”¨ç­‰ __u64 guest_phys_addr; // Guest ç‰©ç†åœ°å€ï¼Œå³ GPA __u64 memory_size; // å†…å­˜å¤§å°ï¼Œå•ä½ bytes __u64 userspace_addr; // ä» QEMU è¿›ç¨‹åœ°å€ç©ºé—´ä¸­åˆ†é…å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå³ HVA }; KVM_SET_USER_MEMORY_REGIONè¿™ä¸ª ioctl ä¸»è¦ç›®çš„å°±æ˜¯è®¾ç½®GPA-\u0026gt;HVAçš„æ˜ å°„å…³ç³»ï¼ŒKVM ä¼šç»§ç»­è°ƒç”¨kvm_vm_ioctl_set_memory_region()ï¼Œåœ¨å†…æ ¸ç©ºé—´ç»´æŠ¤å¹¶ç®¡ç† Guest çš„å†…å­˜ã€‚\nç›¸å…³æ•°æ®ç»“æ„ AddressSpace ç»“æ„ä½“å®šä¹‰ QEMU ç”¨ AddressSpace ç»“æ„ä½“è¡¨ç¤º Guest ä¸­ CPU/è®¾å¤‡çœ‹åˆ°çš„å†…å­˜ã€ä¹Ÿå°±æ˜¯Guest OS å¯ä»¥åœ¨ QEMU è¿›ç¨‹è™šå­˜ä¸­ç”¨åˆ°çš„æ‰€æœ‰å†…å­˜ï¼Œæ˜¯ MemoryRegion çš„é›†åˆï¼Œå³ GPA çš„æ•´ä½“ã€‘ï¼Œç±»ä¼¼äºç‰©ç†æœºä¸­åœ°å€ç©ºé—´çš„æ¦‚å¿µï¼Œä½†åœ¨è¿™é‡Œè¡¨ç¤ºçš„æ˜¯ Guest çš„ä¸€æ®µåœ°å€ç©ºé—´ï¼Œå¦‚å†…å­˜åœ°å€ç©ºé—´ address_space_memory ã€I/O åœ°å€ç©ºé—´address_space_ioï¼Œå®ƒåœ¨ QEMU æºç memory.cä¸­å®šä¹‰ï¼š\n/** * struct AddressSpace: describes a mapping of addresses to #MemoryRegion objects */ struct AddressSpace { /* private: */ struct rcu_head rcu; char *name; MemoryRegion *root; /* Accessed via RCU. */ struct FlatView *current_map; int ioeventfd_nb; struct MemoryRegionIoeventfd *ioeventfds; QTAILQ_HEAD(, MemoryListener) listeners; QTAILQ_ENTRY(AddressSpace) address_spaces_link; }; æ¯ä¸ª AddressSpace ä¸€èˆ¬åŒ…å«ä¸€ç³»åˆ—çš„ MemoryRegionï¼šrootæŒ‡é’ˆæŒ‡å‘æ ¹çº§ MemoryRegionï¼Œè€Œ root å¯èƒ½æœ‰è‡ªå·±çš„è‹¥å¹²ä¸ª sub-regionsï¼ˆå­èŠ‚ç‚¹ï¼‰ï¼Œäºæ˜¯å½¢æˆæ ‘çŠ¶ç»“æ„ã€‚è¿™äº› MemoryRegion é€šè¿‡æ ‘è¿æ¥èµ·æ¥ï¼Œæ ‘çš„æ ¹å³ä¸º AddressSpace çš„ root åŸŸã€‚\nå…¨å±€å˜é‡ å¦å¤–ï¼ŒQEMU ä¸­æœ‰ä¸¤ä¸ªå…¨å±€çš„é™æ€ AddressSpaceï¼Œåœ¨ memory.c ä¸­å®šä¹‰ï¼š\nstatic AddressSpace address_space_memory; // å†…å­˜åœ°å€ç©ºé—´ static AddressSpace address_space_io; // I/O åœ°å€ç©ºé—´ å…¶ root åŸŸåˆ†åˆ«æŒ‡å‘ä¹‹åä¼šæåˆ°çš„ä¸¤ä¸ª MemoryRegion ç±»å‹å˜é‡ï¼šsystem_memoryã€system_ioã€‚\nMemoryRegion ç»“æ„ä½“å®šä¹‰ MemoryRegion è¡¨ç¤ºåœ¨ Guest Memory Layout ä¸­çš„ä¸€æ®µå†…å­˜åŒºåŸŸã€ä¹Ÿå°±æ˜¯å•å…ƒçº§ GPA çš„æ¦‚å¿µï¼ŒGuest OS å¯ä»¥ç®¡ç†åˆ°çš„é‚£äº› Guest ç‰©ç†å†…å­˜å•å…ƒã€‘ï¼Œå®ƒæ˜¯è”ç³» GPA å’Œ RAMBlocksï¼ˆæè¿°çœŸå®å†…å­˜ï¼‰ä¹‹é—´çš„æ¡¥æ¢ï¼Œåœ¨memory.hä¸­å®šä¹‰ï¼š\nstruct MemoryRegion { /* All fields are private - violators will be prosecuted */ const MemoryRegionOps *ops; // å›è°ƒå‡½æ•°é›†åˆ void *opaque; MemoryRegion *parent; // çˆ¶ MemoryRegion æŒ‡é’ˆ Int128 size; // è¯¥åŒºåŸŸå†…å­˜çš„å¤§å° target_phys_addr_t addr; // åœ¨ Address Space ä¸­çš„åœ°å€ï¼Œå³ HVA void (*destructor)(MemoryRegion *mr); ram_addr_t ram_addr; // MemoryRegion çš„èµ·å§‹åœ°å€ï¼Œå³ GPA bool subpage; bool terminates; bool readable; bool ram; // æ˜¯å¦è¡¨ç¤º RAM bool readonly; /* For RAM regions */ bool enabled; // æ˜¯å¦å·²ç»é€šçŸ¥ KVM ä½¿ç”¨è¿™æ®µå†…å­˜ bool rom_device; bool warning_printed; /* For reservations */ MemoryRegion *alias; // æ˜¯å¦ä¸º MemoryRegion alias target_phys_addr_t alias_offset; // è‹¥ä¸º aliasï¼Œåœ¨åŸ MemoryRegion ä¸­çš„ offset unsigned priority; bool may_overlap; QTAILQ_HEAD(subregions, MemoryRegion) subregions; // å­åŒºåŸŸé“¾è¡¨å¤´ QTAILQ_ENTRY(MemoryRegion) subregions_link; // å­åŒºåŸŸé“¾è¡¨èŠ‚ç‚¹ QTAILQ_HEAD(coalesced_ranges, CoalescedMemoryRange) coalesced; const char *name; // MemoryRegion çš„åå­—ï¼Œè°ƒè¯•æ—¶ä½¿ç”¨ uint8_t dirty_log_mask; // è¡¨ç¤ºå“ªä¸€ç§ dirty map è¢«ä½¿ç”¨ï¼Œå…±åˆ†ä¸‰ç§ unsigned ioeventfd_nb; MemoryRegionIoeventfd *ioeventfds; }; å…¨å±€å˜é‡ åœ¨ QEMU çš„ exec.c ä¸­ä¹Ÿå®šä¹‰äº†ä¸¤ä¸ªé™æ€çš„ MemoryRegion æŒ‡é’ˆå˜é‡ï¼š\nstatic MemoryRegion *system_memory; // å†…å­˜ MemoryRegionï¼Œå¯¹åº” address_space_memory static MemoryRegion *system_io; // I/O MemoryRegionï¼Œå¯¹åº” address_space_io ä¸ä¸¤ä¸ªå…¨å±€ AddressSpace å¯¹åº”ï¼Œå³ AddressSpace çš„ root åŸŸæŒ‡å‘è¿™ä¸¤ä¸ª MemoryRegionã€‚\nMemoryRegion çš„ç±»å‹ MemoryRegion æœ‰å¤šç§ç±»å‹ï¼Œå¯ä»¥è¡¨ç¤ºä¸€æ®µ RAMã€ROMã€MMIOã€alias(åˆ«å)ã€‚\nè‹¥ä¸º alias åˆ™è¡¨ç¤ºä¸€ä¸ª MemoryRegion çš„éƒ¨åˆ†åŒºåŸŸï¼Œä¾‹å¦‚ï¼ŒQEMU ä¼šä¸º pc.ram è¿™ä¸ªè¡¨ç¤º RAM çš„ MemoryRegion æ·»åŠ ä¸¤ä¸ª aliasï¼šram-below-4g å’Œ ram-above-4gï¼Œä¹‹åä¼šçœ‹åˆ°å…·ä½“çš„ä»£ç å®ä¾‹ã€‚\nå¦å¤–ï¼ŒMemoryRegion ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸€ä¸ª containerï¼Œè¿™å°±è¡¨ç¤ºå®ƒåªæ˜¯å…¶ä»–è‹¥å¹²ä¸ª MemoryRegion çš„å®¹å™¨ã€‚\né‚£ä¹ˆè¦å¦‚ä½•åˆ›å»ºä¸åŒç±»å‹çš„ MemoryRegion å‘¢ï¼Ÿ\nåœ¨ QEMU ä¸­å®é™…ä¸Šæ˜¯é€šè¿‡è°ƒç”¨ä¸åŒçš„åˆå§‹åŒ–å‡½æ•°åŒºåˆ†çš„ã€‚æ ¹æ®ä¸åŒçš„åˆå§‹åŒ–å‡½æ•°åŠå…¶åŠŸèƒ½ï¼Œå¯ä»¥å°† MemoryRegion åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ç±»å‹ï¼š\næ ¹çº§ MemoryRegionï¼šç›´æ¥é€šè¿‡ memory_region_init åˆå§‹åŒ–ï¼Œæ²¡æœ‰è‡ªå·±çš„å†…å­˜ï¼Œç”¨äºç®¡ç† subregionï¼Œä¾‹å¦‚ system_memoryï¼š void memory_region_init(MemoryRegion *mr, const char *name, uint64_t size) { mr-\u0026gt;ops = NULL; mr-\u0026gt;parent = NULL; mr-\u0026gt;size = int128_make64(size); if (size == UINT64_MAX) { mr-\u0026gt;size = int128_2_64(); } mr-\u0026gt;addr = 0; mr-\u0026gt;subpage = false; mr-\u0026gt;enabled = true; mr-\u0026gt;terminates = false; // éå®ä½“ MemoryRegionï¼Œæœç´¢æ—¶ä¼šç»§ç»­å‰å¾€å…¶ subregions mr-\u0026gt;ram = false; // æ ¹çº§ MemoryRegion ä¸åˆ†é…å†…å­˜ mr-\u0026gt;readable = true; mr-\u0026gt;readonly = false; mr-\u0026gt;rom_device = false; mr-\u0026gt;destructor = memory_region_destructor_none; mr-\u0026gt;priority = 0; mr-\u0026gt;may_overlap = false; mr-\u0026gt;alias = NULL; QTAILQ_INIT(\u0026amp;mr-\u0026gt;subregions); memset(\u0026amp;mr-\u0026gt;subregions_link, 0, sizeof mr-\u0026gt;subregions_link); QTAILQ_INIT(\u0026amp;mr-\u0026gt;coalesced); mr-\u0026gt;name = g_strdup(name); mr-\u0026gt;dirty_log_mask = 0; mr-\u0026gt;ioeventfd_nb = 0; mr-\u0026gt;ioeventfds = NULL; } å¯ä»¥çœ‹åˆ° mr-\u0026gt;addr è¢«è®¾ç½®ä¸º 0ï¼Œè€Œ mr-\u0026gt;ram_addr åˆ™å¹¶æ²¡æœ‰åˆå§‹åŒ–ã€‚\nå®ä½“ MemoryRegionï¼šé€šè¿‡memory_region_init_ram()åˆå§‹åŒ–ï¼Œæœ‰è‡ªå·±çš„å†…å­˜ï¼ˆä» QEMU è¿›ç¨‹åœ°å€ç©ºé—´ä¸­åˆ†é…ï¼‰ï¼Œå¤§å°ä¸ºsizeï¼Œä¾‹å¦‚ram_memoryã€ pci_memoryï¼š void *pc_memory_init(MemoryRegion *system_memory, const char *kernel_filename, const char *kernel_cmdline, const char *initrd_filename, ram_addr_t below_4g_mem_size, ram_addr_t above_4g_mem_size, MemoryRegion *rom_memory, MemoryRegion **ram_memory) { MemoryRegion *ram, *option_rom_mr; /* ...*/ /* Allocate RAM. We allocate it as a single memory region and use * aliases to address portions of it, mostly for backwards compatibility * with older qemus that used qemu_ram_alloc(). */ ram = g_malloc(sizeof(*ram)); // è°ƒç”¨ memory_region_init_ram å¯¹ ram_memory è¿›è¡Œåˆå§‹åŒ– memory_region_init_ram(ram, \u0026#34;pc.ram\u0026#34;, below_4g_mem_size + above_4g_mem_size); vmstate_register_ram_global(ram); *ram_memory = ram; /* ... */ } void memory_region_init_ram(MemoryRegion *mr, const char *name, uint64_t size) { memory_region_init(mr, name, size); mr-\u0026gt;ram = true; mr-\u0026gt;terminates = true; mr-\u0026gt;destructor = memory_region_destructor_ram; mr-\u0026gt;ram_addr = qemu_ram_alloc(size, mr); } å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯å…ˆè°ƒç”¨äº†memory_region_init()ï¼Œä¹‹åè®¾ç½® RAM å±æ€§ï¼Œå¹¶ç»§ç»­è°ƒç”¨qemu_ram_alloc()åˆ†é…å†…å­˜ã€‚\nåˆ«å MemoryRegionï¼šé€šè¿‡memory_region_init_alias() åˆå§‹åŒ–ï¼Œæ²¡æœ‰è‡ªå·±çš„å†…å­˜ï¼Œè¡¨ç¤ºå®ä½“ MemoryRegion çš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡ alias æˆå‘˜æŒ‡å‘å®ä½“ MemoryRegionï¼Œalias_offsetä¸ºåœ¨å®ä½“ MemoryRegion ä¸­çš„åç§»é‡ï¼Œä¾‹å¦‚ram_below_4gã€ram_above_4gï¼š void *pc_memory_init(MemoryRegion *system_memory, const char *kernel_filename, const char *kernel_cmdline, const char *initrd_filename, ram_addr_t below_4g_mem_size, ram_addr_t above_4g_mem_size, MemoryRegion *rom_memory, MemoryRegion **ram_memory) { MemoryRegion *ram_below_4g, *ram_above_4g; /* ... */ ram_below_4g = g_malloc(sizeof(*ram_below_4g)); // è°ƒç”¨ memory_region_init_alias å¯¹ ram_below_4g è¿›è¡Œåˆå§‹åŒ– memory_region_init_alias(ram_below_4g, \u0026#34;ram-below-4g\u0026#34;, ram, 0, below_4g_mem_size); /* .. void memory_region_init_alias(MemoryRegion *mr, const char *name, MemoryRegion *orig, target_phys_addr_t offset, uint64_t size) { memory_region_init(mr, name, size); mr-\u0026gt;alias = orig; // æŒ‡å‘å®ä½“ MemoryRegion mr-\u0026gt;alias_offset = offset; //é€šè¿‡ offset å¾—åˆ°å®ä½“çš„æŸä¸€ä¸ªéƒ¨åˆ† } RAMBlock ç»“æ„ä½“å®šä¹‰ MemoryRegion ç”¨æ¥æè¿°ä¸€æ®µé€»è¾‘å±‚é¢ä¸Šçš„å†…å­˜åŒºåŸŸï¼Œè€Œè®°å½•å®é™…åˆ†é…çš„å†…å­˜åœ°å€ä¿¡æ¯çš„ç»“æ„ä½“åˆ™æ˜¯ RAMBlockï¼Œåœ¨ramblock.hä¸­å®šä¹‰ï¼š\nstruct RAMBlock { struct rcu_head rcu; struct MemoryRegion *mr; uint8_t *host; uint8_t *colo_cache; /* For colo, VM\u0026#39;s ram cache */ ram_addr_t offset; ram_addr_t used_length; ram_addr_t max_length; void (*resized)(const char*, uint64_t length, void *host); uint32_t flags; /* Protected by iothread lock. */ char idstr[256]; /* RCU-enabled, writes protected by the ramlist lock */ QLIST_ENTRY(RAMBlock) next; QLIST_HEAD(, RAMBlockNotifier) ramblock_notifiers; int fd; size_t page_size; /* dirty bitmap used during migration */ unsigned long *bmap; /* bitmap of already received pages in postcopy */ unsigned long *receivedmap; /* * bitmap to track already cleared dirty bitmap. When the bit is * set, it means the corresponding memory chunk needs a log-clear. * Set this up to non-NULL to enable the capability to postpone * and split clearing of dirty bitmap on the remote node (e.g., * KVM). The bitmap will be set only when doing global sync. * * NOTE: this bitmap is different comparing to the other bitmaps * in that one bit can represent multiple guest pages (which is * decided by the `clear_bmap_shift\u0026#39; variable below). On * destination side, this should always be NULL, and the variable * `clear_bmap_shift\u0026#39; is meaningless. */ unsigned long *clear_bmap; uint8_t clear_bmap_shift; /* * RAM block length that corresponds to the used_length on the migration * source (after RAM block sizes were synchronized). Especially, after * starting to run the guest, used_length and postcopy_length can differ. * Used to register/unregister uffd handlers and as the size of the received * bitmap. Receiving any page beyond this length will bail out, as it * could not have been valid on the source. */ ram_addr_t postcopy_length; }; å¯ä»¥çœ‹åˆ°åœ¨ RAMBlock ä¸­ host å’Œ offset åŸŸåˆ†åˆ«å¯¹åº”äº† HVA å’ŒGPAï¼Œå› æ­¤ä¹Ÿå¯ä»¥è¯´ RAMBlock ä¸­å­˜å‚¨äº†GPA-\u0026gt;HVAçš„æ˜ å°„å…³ç³»ï¼Œå¦å¤–æ¯ä¸€ä¸ª RAMBlock éƒ½ä¼šæŒ‡å‘å…¶æ‰€å±çš„ MemoryRegionã€‚\nå…¨å±€å˜é‡ ram_list QEMU åœ¨ramlist.hä¸­å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡ram_listï¼Œä»¥é“¾è¡¨çš„å½¢å¼ç»´æŠ¤äº†æ‰€æœ‰çš„ RAMBlockï¼š\ntypedef struct RAMList { QemuMutex mutex; RAMBlock *mru_block; /* RCU-enabled, writes protected by the ramlist lock. */ QLIST_HEAD(, RAMBlock) blocks; DirtyMemoryBlocks *dirty_memory[DIRTY_MEMORY_NUM]; uint32_t version; QLIST_HEAD(, RAMBlockNotifier) ramblock_notifiers; } RAMList; extern RAMList ram_list; æ¯ä¸€ä¸ªæ–°åˆ†é…çš„ RAMBlock éƒ½ä¼šè¢«æ’å…¥åˆ°ram_listçš„å¤´éƒ¨ã€‚å¦‚éœ€æŸ¥æ‰¾åœ°å€æ‰€å¯¹åº”çš„ RAMBlockï¼Œåˆ™éœ€è¦éå†ram_listï¼Œå½“ç›®æ ‡åœ°å€è½åœ¨å½“å‰RAMBlockçš„åœ°å€åŒºé—´æ—¶ï¼Œè¯¥ RAMBlock å³ä¸ºæŸ¥æ‰¾ç›®æ ‡ã€‚\nASã€MRã€RAMBlock ä¹‹é—´çš„å…³ç³» \u003c!DOCTYPE html\u003e Responsive Image FlatView AddressSpace çš„ root åŸŸåŠå…¶å­æ ‘å…±åŒæ„æˆäº† Guest çš„ç‰©ç†åœ°å€ç©ºé—´ï¼Œä½†è¿™äº›éƒ½æ˜¯åœ¨ QEMU ä¾§å®šä¹‰çš„ã€‚è¦ä¼ å…¥ KVM è¿›è¡Œè®¾ç½®æ—¶ï¼Œå¤æ‚çš„æ ‘çŠ¶ç»“æ„æ˜¯ä¸åˆ©äºå†…æ ¸è¿›è¡Œå¤„ç†çš„ï¼Œå› æ­¤éœ€è¦å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªâ€œå¹³å¦â€çš„åœ°å€æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä»é›¶å¼€å§‹ã€åªåŒ…å«åœ°å€ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼Œè¿™åœ¨ QEMU ä¸­é€šè¿‡ FlatView æ¥è¡¨ç¤ºã€‚æ¯ä¸ª AddressSpace éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ FlatView æŒ‡é’ˆ current_mapï¼Œè¡¨ç¤ºå…¶å¯¹åº”çš„å¹³é¢å±•å¼€è§†å›¾ã€‚\nç»“æ„ä½“å®šä¹‰ FlatView åœ¨memory.cä¸­å®šä¹‰ï¼š\n/* Flattened global view of current active memory hierarchy. Kept in sorted * order. */ struct FlatView { struct rcu_head rcu; unsigned ref; FlatRange *ranges; // å¯¹åº”çš„ FlatRange æ•°ç»„ unsigned nr; // FlatRange çš„æ•°ç›® unsigned nr_allocated; // å½“å‰æ•°ç»„çš„é¡¹æ•° struct AddressSpaceDispatch *dispatch; MemoryRegion *root; }; å…¶ä¸­ï¼Œrangesæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè®°å½•äº† FlatView ä¸‹æ‰€æœ‰çš„ FlatRangeã€‚\nFlatRange åœ¨ FlatView ä¸­ï¼ŒFlatRange è¡¨ç¤ºåœ¨ FlatView ä¸­çš„ä¸€æ®µå†…å­˜èŒƒå›´ï¼ŒåŒæ ·åœ¨memory.cä¸­å®šä¹‰ï¼š\n/* Range of memory in the global map. Addresses are absolute. */ struct FlatRange { MemoryRegion *mr; // æŒ‡å‘æ‰€å±çš„ MemoryRegion hwaddr offset_in_region; // åœ¨å…¨å±€ MemoryRegion ä¸­çš„ offsetï¼Œå¯¹åº” GPA AddrRange addr; // ä»£è¡¨çš„åœ°å€åŒºé—´ï¼Œå¯¹åº” HVA uint8_t dirty_log_mask; bool romd_mode; bool readonly; bool nonvolatile; }; æ¯ä¸ª FlatRange å¯¹åº”ä¸€æ®µè™šæ‹Ÿæœºç‰©ç†åœ°å€åŒºé—´ï¼Œå„ä¸ª FlatRange ä¸ä¼šé‡å ï¼ŒæŒ‰ç…§åœ°å€çš„é¡ºåºä¿å­˜åœ¨æ•°ç»„ä¸­ï¼Œå…·ä½“çš„åœ°å€èŒƒå›´ç”±ä¸€ä¸ª AddrRange ç»“æ„æ¥æè¿°ï¼š\n/* * AddrRange ç”¨äºè¡¨ç¤º FlatRange çš„èµ·å§‹åœ°å€åŠå¤§å° */ struct AddrRange { Int128 start; Int128 size; }; MemoryRegionSection ç»“æ„ä½“å®šä¹‰ åœ¨ QEMU ä¸­ï¼Œè¿˜æœ‰å‡ ä¸ªèµ·åˆ°ä¸­ä»‹ä½œç”¨çš„ç»“æ„ä½“ï¼ŒMemoryRegionSection å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚\nä¹‹å‰ä»‹ç»çš„ FlatRange ä»£è¡¨ä¸€ä¸ªç‰©ç†åœ°å€ç©ºé—´çš„ç‰‡æ®µï¼Œåå‘äºæè¿°åœ¨ Host ä¾§å³ AddressSpace ä¸­çš„åˆ†å¸ƒã€Guest çš„ç‰©ç†ç©ºé—´ã€‘ï¼Œè€Œ MemoryRegionSection åˆ™ä»£è¡¨åœ¨ Guest ä¾§å³ MemoryRegion ä¸­çš„ç‰‡æ®µã€‚MemoryRegionSection åœ¨memory.hä¸­å®šä¹‰ï¼š\n/** * MemoryRegionSection: describes a fragment of a #MemoryRegion * * @mr: the region, or %NULL if empty * @address_space: the address space the region is mapped in * @offset_within_region: the beginning of the section, relative to @mr\u0026#39;s start * @size: the size of the section; will not exceed @mr\u0026#39;s boundaries * @offset_within_address_space: the address of the first byte of the section * relative to the region\u0026#39;s address space * @readonly: writes to this section are ignored */ //åªæ˜¯èµ·åˆ°æè¿°çš„ä½œç”¨ï¼Œæè¿°äº†æ˜¯å“ªä¸ª AddressSpace çš„ MemoryRegionï¼Œ //å¹¶ä¸”åœ¨ MemoryRegion ä¸­çš„ offsetï¼Œå’Œåœ¨ AddressSpace å±•å¼€ä¸ºå¹³å¦å†…å­˜çš„ offset struct MemoryRegionSection { MemoryRegion *mr; // æ‰€å±çš„ MemoryRegion MemoryRegion *address_space; // å…³è”çš„ AddressSpace target_phys_addr_t offset_within_region; // åœ¨ MemoryRegion å†…éƒ¨çš„ offset uint64_t size; // Section çš„å¤§å° target_phys_addr_t offset_within_address_space; // åœ¨ AddressSpace å†…éƒ¨çš„ offset bool readonly; // æ˜¯å¦ä¸ºåªè¯» }; offset_within_regionï¼šåœ¨æ‰€å± MemoryRegion ä¸­çš„offsetã€‚ä¸€ä¸ªAddressSpace å¯èƒ½ç”±å¤šä¸ª MemoryRegion ç»„æˆï¼Œå› æ­¤è¯¥ offset æ˜¯å±€éƒ¨çš„ offset_within_address_spaceï¼šåœ¨æ‰€å± AddressSpace ä¸­çš„ offsetï¼Œå®ƒæ˜¯å…¨å±€çš„ å’Œå…¶ä»–æ•°æ®ç»“æ„ä¹‹é—´çš„å…³ç³» \u003c!DOCTYPE html\u003e Responsive Image AddressSpace çš„rootæŒ‡å‘å¯¹åº”çš„æ ¹çº§MemoryRegionï¼Œcurrent_mapæŒ‡å‘AddressSpace çš„rooté€šè¿‡generate_memory_topology()ç”Ÿæˆçš„ FlatView FlatView ä¸­çš„rangesæ•°ç»„è¡¨ç¤ºè¯¥MemoryRegion æ‰€è¡¨ç¤ºçš„Gueståœ°å€åŒºé—´ã€GPA çš„æ•´ä¸ªå¹³å¦ç‰©ç†ç©ºé—´ã€‘ï¼Œå¹¶æŒ‰ç…§åœ°å€çš„é¡ºåºè¿›è¡Œæ’åˆ— MemoryRegionSection ç”±rangesæ•°ç»„ä¸­çš„ FlatRange å¯¹åº”ç”Ÿæˆï¼Œä½œä¸ºæ³¨å†Œåˆ° KVMä¸­çš„åŸºæœ¬å•ä½ QEMU åœ¨ç”¨æˆ·ç©ºé—´ç”³è¯·å†…å­˜åï¼Œéœ€è¦å°†å†…å­˜ä¿¡æ¯é€šè¿‡ä¸€ç³»åˆ—ç³»ç»Ÿè°ƒç”¨ä¼ å…¥å†…æ ¸ç©ºé—´çš„ KVMï¼Œç”± KVM ä¾§è¿›è¡Œç®¡ç†ï¼Œå› æ­¤ QEMU ä¾§ä¹Ÿå®šä¹‰äº†ä¸€äº›ç”¨äºå‘ KVM ä¼ é€’å‚æ•°çš„ç»“æ„ä½“ã€‚\nä»¥ä¸‹ä¸ºKVMç›¸å…³çš„æ•°æ®ç»“æ„ã€‚\nKVMSlot åœ¨ kvm_init.hä¸­å®šä¹‰ï¼Œæ˜¯ KVM ä¸­å†…å­˜ç®¡ç†çš„åŸºæœ¬å•ä½ï¼š\ntypedef struct KVMSlot { hwaddr start_addr; // Guest ç‰©ç†åœ°å€ï¼ŒGPA ram_addr_t memory_size; // å†…å­˜å¤§å° void *ram; // QEMU ç”¨æˆ·ç©ºé—´åœ°å€ï¼ŒHVA int slot; // Slot ç¼–å· int flags; // æ ‡å¿—ä½ï¼Œä¾‹å¦‚æ˜¯å¦è¿½è¸ªè„é¡µã€æ˜¯å¦å¯ç”¨ç­‰ /* Dirty bitmap cache for the slot */ unsigned long *dirty_bmap; unsigned long dirty_bmap_size; /* Cache of the address space ID */ int as_id; /* Cache of the offset in ram address space */ ram_addr_t ram_start_offset; } KVMSlot; KVMSlot ç±»ä¼¼äºå†…å­˜æ’æ§½çš„æ¦‚å¿µã€‚\nkvm_userspace_memory_region è°ƒç”¨ioctl(KVM_SET_USER_MEMORY_REGION)æ—¶éœ€è¦å‘ KVM ä¼ é€’çš„å‚æ•°ï¼Œåœ¨kvm.hä¸­å®šä¹‰\n/* for KVM_SET_USER_MEMORY_REGION */ struct kvm_userspace_memory_region { __u32 slot; // slot ç¼–å· __u32 flags; // æ ‡å¿—ä½ï¼Œä¾‹å¦‚æ˜¯å¦è¿½è¸ªè„é¡µã€æ˜¯å¦å¯ç”¨ç­‰ __u64 guest_phys_addr; // Guest ç‰©ç†åœ°å€ï¼ŒGPA __u64 memory_size; // å†…å­˜å¤§å°ï¼Œbytes __u64 userspace_addr; // ä» QEMU è¿›ç¨‹ç©ºé—´åˆ†é…çš„èµ·å§‹åœ°å€ï¼ŒHVA }; MemoryListener ç»“æ„ä½“å®šä¹‰ ä¸ºäº†ç›‘æ§è™šæ‹Ÿæœºçš„ç‰©ç†åœ°å€è®¿é—®ï¼Œå¯¹äºæ¯ä¸€ä¸ª AddressSpaceï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª MemoryListener ä¸ä¹‹å¯¹åº”ã€‚æ¯å½“ç‰©ç†æ˜ å°„GPA-\u0026gt;HVAå‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¼šå›è°ƒè¿™äº›å‡½æ•°ã€‚MemoryListener æ˜¯å¯¹ä¸€äº›äº‹ä»¶çš„å›è°ƒå‡½æ•°åˆé›†ï¼Œåœ¨memory.hä¸­å®šä¹‰ï¼š\n/** * MemoryListener: callbacks structure for updates to the physical memory map * * Allows a component to adjust to changes in the guest-visible memory map. * Use with memory_listener_register() and memory_listener_unregister(). */ struct MemoryListener { void (*begin)(MemoryListener *listener); void (*commit)(MemoryListener *listener); void (*region_add)(MemoryListener *listener, MemoryRegionSection *section); void (*region_del)(MemoryListener *listener, MemoryRegionSection *section); void (*region_nop)(MemoryListener *listener, MemoryRegionSection *section); void (*log_start)(MemoryListener *listener, MemoryRegionSection *section); void (*log_stop)(MemoryListener *listener, MemoryRegionSection *section); void (*log_sync)(MemoryListener *listener, MemoryRegionSection *section); void (*log_global_start)(MemoryListener *listener); void (*log_global_stop)(MemoryListener *listener); void (*eventfd_add)(MemoryListener *listener, MemoryRegionSection *section, bool match_data, uint64_t data, EventNotifier *e); void (*eventfd_del)(MemoryListener *listener, MemoryRegionSection *section, bool match_data, uint64_t data, EventNotifier *e); /* Lower = earlier (during add), later (during del) */ unsigned priority; MemoryRegion *address_space_filter; QTAILQ_ENTRY(MemoryListener) link; }; å…¨å±€å˜é‡ memory_listeners æ‰€æœ‰çš„ MemoryListener éƒ½ä¼šæŒ‚åœ¨å…¨å±€å˜é‡memory_listenersé“¾è¡¨ä¸Šï¼Œåœ¨memory.cä¸­å®šä¹‰ï¼š\nstatic QTAILQ_HEAD(, MemoryListener) memory_listeners = QTAILQ_HEAD_INITIALIZER(memory_listeners); åœ¨memory.cä¸­æšä¸¾äº†ListenerDirection:\nenum ListenerDirection { Forward, Reverse }; é‡è¦æ•°æ®ç»“æ„æ€»è§ˆ ç»“æ„ä½“å è¯´æ˜ AddressSpace VM èƒ½çœ‹åˆ°çš„ä¸€æ®µåœ°å€ç©ºé—´ï¼Œåå‘ Host ä¾§ã€æ³¨æ„æŒ‡çš„æ˜¯åå‘ã€‘ MemoryRegion åœ°å€ç©ºé—´ä¸­ä¸€æ®µé€»è¾‘å±‚é¢çš„å†…å­˜åŒºåŸŸï¼Œåå‘ Guest ä¾§ RAMBlock è®°å½•å®é™…åˆ†é…çš„å†…å­˜åœ°å€ä¿¡æ¯ï¼Œå­˜å‚¨äº† GPA-\u0026gt;HVA çš„æ˜ å°„å…³ç³» FlatView MemoryRegion å¯¹åº”çš„å¹³é¢å±•å¼€è§†å›¾ï¼ŒåŒ…å«ä¸€ä¸ª FlatRange ç±»å‹çš„ ranges æ•°ç»„ FlatRange å¯¹åº”ä¸€æ®µè™šæ‹Ÿæœºç‰©ç†åœ°å€åŒºé—´ï¼Œå„ä¸ª FlatRange ä¸ä¼šé‡å ï¼ŒæŒ‰ç…§åœ°å€çš„é¡ºåºä¿å­˜åœ¨æ•°ç»„ä¸­ MemoryRegionSection è¡¨ç¤º MemoryRegion ä¸­çš„ç‰‡æ®µ MemoryListener å›è°ƒå‡½æ•°é›†åˆ KVMSlot KVM ä¸­å†…å­˜ç®¡ç†çš„åŸºæœ¬å•ä½ï¼Œè¡¨ç¤ºä¸€ä¸ªå†…å­˜æ’æ§½ kvm_userspace_memory_region è°ƒç”¨ ioctl(KVM_SET_USER_MEMORY_REGION) æ—¶éœ€è¦å‘ KVM ä¼ é€’çš„å‚æ•° å…·ä½“å®ç°æœºåˆ¶ QEMU çš„å†…å­˜ç”³è¯·æµç¨‹å¤§è‡´å¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šå›è°ƒå‡½æ•°çš„æ³¨å†Œã€AddressSpace çš„åˆå§‹åŒ–ã€å®é™…å†…å­˜çš„åˆ†é…ã€‚ä¸‹é¢å°†æ ¹æ®åœ¨ vl.c çš„ main() å‡½æ•°ä¸­çš„è°ƒç”¨é¡ºåºåˆ†åˆ«ä»‹ç»ã€‚\nå›è°ƒå‡½æ•°çš„æ³¨å†Œ \u003c!DOCTYPE html\u003e Responsive Image int main() â””â”€ static int configure_accelerator() â””â”€ int kvm_init() // åˆå§‹åŒ– KVM â”œâ”€ int kvm_ioctl(KVM_CREATE_VM) // åˆ›å»º VM â”œâ”€ int kvm_arch_init() // é’ˆå¯¹ä¸åŒçš„æ¶æ„è¿›è¡Œåˆå§‹åŒ– â””â”€ void memory_listener_register() // æ³¨å†Œ kvm_memory_listener â””â”€ static void listener_add_address_space() // è°ƒç”¨ region_add å›è°ƒ â””â”€ static void kvm_region_add() // region_add å¯¹åº”çš„å›è°ƒå®ç° â””â”€ static void kvm_set_phys_mem() // æ ¹æ®ä¼ å…¥çš„ section å¡«å…… KVMSlot â””â”€ static int kvm_set_user_memory_region() â””â”€ int ioctl(KVM_SET_USER_MEMORY_REGION) è¿›å…¥configure_accelerator()åï¼ŒQEMUä¼šå…ˆè°ƒç”¨configure_accelerator()è®¾ç½® KVM çš„åŠ é€Ÿæ”¯æŒï¼Œä¹‹åè¿›å…¥kvm_init()ã€‚è¯¥å‡½æ•°ä¸»è¦å®Œæˆå¯¹ KVM çš„åˆå§‹åŒ–ï¼ŒåŒ…æ‹¬ä¸€äº›å¸¸è§„æ£€æŸ¥å¦‚ CPU ä¸ªæ•°ã€KVM ç‰ˆæœ¬ç­‰ï¼Œä¹‹åé€šè¿‡kvm_ioctl(KVM_CREATE_VM)ä¸å†…æ ¸äº¤äº’ï¼Œåˆ›å»º KVM è™šæ‹Ÿæœºã€‚åœ¨kvm_init()çš„æœ€åï¼Œä¼šè°ƒç”¨memory_listener_register()æ³¨å†Œkvm_memory_listenerï¼š\nstatic int kvm_init(MachineState *ms) { MachineClass *mc = MACHINE_GET_CLASS(ms); // æ‰“å¼€/dev/kvm s-\u0026gt;fd = qemu_open_old(\u0026#34;/dev/kvm\u0026#34;, O_RDWR); // åˆ›å»º VM do { ret = kvm_ioctl(s, KVM_CREATE_VM, type); } while (ret == -EINTR); /* ... */ ret = kvm_arch_init(s); // é’ˆå¯¹ä¸åŒçš„æ¶æ„è¿›è¡Œåˆå§‹åŒ– // å¯¹äºä»¥ä¸‹ AddressSpaceï¼Œè®¾ç½®å…¶å¯¹åº”çš„ listener kvm_memory_listener_register(s, \u0026amp;s-\u0026gt;memory_listener, \u0026amp;address_space_memory, 0, \u0026#34;kvm-memory\u0026#34;); memory_listener_register(\u0026amp;kvm_coalesced_pio_listener, \u0026amp;address_space_io); /* ... */ } void memory_listener_register(MemoryListener *listener, AddressSpace *as) { MemoryListener *other = NULL; /* Only one of them can be defined for a listener */ assert(!(listener-\u0026gt;log_sync \u0026amp;\u0026amp; listener-\u0026gt;log_sync_global)); listener-\u0026gt;address_space = as; if (QTAILQ_EMPTY(\u0026amp;memory_listeners) || listener-\u0026gt;priority \u0026gt;= QTAILQ_LAST(\u0026amp;memory_listeners)-\u0026gt;priority) { QTAILQ_INSERT_TAIL(\u0026amp;memory_listeners, listener, link); } else { QTAILQ_FOREACH(other, \u0026amp;memory_listeners, link) { if (listener-\u0026gt;priority \u0026lt; other-\u0026gt;priority) { break; } } QTAILQ_INSERT_BEFORE(other, listener, link); } if (QTAILQ_EMPTY(\u0026amp;as-\u0026gt;listeners) || listener-\u0026gt;priority \u0026gt;= QTAILQ_LAST(\u0026amp;as-\u0026gt;listeners)-\u0026gt;priority) { QTAILQ_INSERT_TAIL(\u0026amp;as-\u0026gt;listeners, listener, link_as); } else { QTAILQ_FOREACH(other, \u0026amp;as-\u0026gt;listeners, link_as) { if (listener-\u0026gt;priority \u0026lt; other-\u0026gt;priority) { break; } } QTAILQ_INSERT_BEFORE(other, listener, link_as); } listener_add_address_space(listener, as); } æœ€åçš„listener_add_address_space()ä¸»è¦æ˜¯å°† listener æ³¨å†Œåˆ°å…¶å¯¹åº”çš„ AddressSpace ä¸Šï¼Œå¹¶æ ¹æ® AddressSpace å¯¹åº”çš„ FlatRange æ•°ç»„ï¼Œç”Ÿæˆ MemoryRegionSectionã€MemoryRegionSectionå°±åƒæ˜¯ä¸ºFlatRangeæ•°ç»„è®¾ç½®çš„ä¸€ç§ä¸­ä»‹è¡¨ç¤ºï¼Œä¾¿äºä¼ å…¥KVMï¼Œå› ä¸ºä¼ å…¥KVMåº”è¯¥æ˜¯å¯¹å¹³å¦å†…å­˜çš„ä¸€ç§è¡¨ç¤ºã€‘ï¼Œå¹¶æ³¨å†Œåˆ° KVM ä¸­ï¼š\nstatic void listener_add_address_space(MemoryListener *listener, AddressSpace *as) { FlatView *view; FlatRange *fr; if (listener-\u0026gt;begin) { listener-\u0026gt;begin(listener); } /* å¼€å¯å†…å­˜è„é¡µè®°å½• */ if (global_dirty_tracking) { if (listener-\u0026gt;log_global_start) { listener-\u0026gt;log_global_start(listener); } } /* éå† AddressSpace å¯¹åº”çš„ FlatRange æ•°ç»„ï¼Œå¹¶å°†å…¶è½¬æ¢æˆ MemoryRegionSection */ view = address_space_get_flatview(as); FOR_EACH_FLAT_RANGE(fr, view) { MemoryRegionSection section = section_from_flat_range(fr, view); /* å°† section æ‰€ä»£è¡¨çš„å†…å­˜åŒºåŸŸæ³¨å†Œåˆ° KVM ä¸­ */ if (listener-\u0026gt;region_add) { listener-\u0026gt;region_add(listener, \u0026amp;section); } if (fr-\u0026gt;dirty_log_mask \u0026amp;\u0026amp; listener-\u0026gt;log_start) { listener-\u0026gt;log_start(listener, \u0026amp;section, 0, fr-\u0026gt;dirty_log_mask); } } if (listener-\u0026gt;commit) { listener-\u0026gt;commit(listener); } flatview_unref(view); } ç”±äºæ­¤æ—¶ AddressSapce å°šæœªåˆå§‹åŒ–ï¼Œæ‰€ä»¥æ­¤å¤„çš„å¾ªç¯ä¸ºç©ºï¼Œä»…æ˜¯åœ¨å…¨å±€æ³¨å†Œäº†kvm_memory_listenerã€‚æœ€åè°ƒç”¨äº†kvm_memory_listener-\u0026gt;region_add()ï¼Œå¯¹åº”çš„å®ç°æ˜¯kvm_region_add()ï¼Œè¯¥å‡½æ•°æœ€ç»ˆä¼šé€šè¿‡ioctl(KVM_SET_USER_MEMORY_REGION)ï¼Œå°† QEMU ä¾§ç”³è¯·çš„å†…å­˜ä¿¡æ¯ä¼ å…¥ KVM è¿›è¡Œæ³¨å†Œï¼Œè¿™é‡Œçš„æµç¨‹ä¼šåœ¨ä¸‹ä¸€éƒ¨åˆ†è¿›è¡Œåˆ†æã€‚\nAddressSpace çš„åˆå§‹åŒ– \u003c!DOCTYPE html\u003e Responsive Image int main() â””â”€ void cpu_exec_init_all() â”œâ”€ static void memory_map_init() | â”œâ”€ void memory_region_init() // åˆå§‹åŒ– system_memory/io è¿™ä¸¤ä¸ªå…¨å±€ MemoryRegion | â”œâ”€ void set_system_memory_map() // address_space_memory-\u0026gt;root = system_memory | | â””â”€ static void memory_region_update_topology() // ä¸º MemoryRegion ç”Ÿæˆ FlatView | | â””â”€ static void address_space_update_topology() // as-\u0026gt;current_map = new_view | | â””â”€ static void address_space_update_topology_pass() | | â””â”€ static void kvm_region_add() // region_add å¯¹åº”çš„å›è°ƒå®ç° | | â””â”€ static void kvm_set_phys_mem() // æ ¹æ®ä¼ å…¥çš„ section å¡«å…… KVMSlot | | â””â”€ static int kvm_set_user_memory_region() | | â””â”€ int ioctl(KVM_SET_USER_MEMORY_REGION) | | | â””â”€ void memory_listener_register() // æ³¨å†Œå¯¹åº”çš„ MemoryListener | â””â”€ static void listener_add_address_space() | â””â”€ static void io_mem_init() â””â”€ void memory_region_init_io() // ram/rom/unassigned/notdirty/subpage-ram/watch â””â”€ void memory_region_init() ç¬¬ä¸€éƒ¨åˆ†åœ¨å…¨å±€æ³¨å†Œäº†kvm_memory_listenerï¼Œä½†ç”±äºAddressSpace å°šæœªåˆå§‹åŒ–ï¼Œå®é™…ä¸Šå¹¶æœªå‘ KVM ä¸­æ³¨å†Œä»»ä½•å®é™…çš„å†…å­˜ä¿¡æ¯ã€‚QEMU åœ¨main()å‡½æ•°ä¸­ä¼šç»§ç»­è°ƒç”¨cpu_exec_init_all()å¯¹AddressSpaceè¿›è¡Œåˆå§‹åŒ–ï¼Œè¯¥å‡½æ•°å®é™…ä¸Šæ˜¯å¯¹ä¸¤ä¸ª init å‡½æ•°çš„å°è£…è°ƒç”¨ï¼š\nvoid cpu_exec_init_all(void) { qemu_mutex_init(\u0026amp;ram_list.mutex); /* The data structures we set up here depend on knowing the page size, * so no more changes can be made after this point. * In an ideal world, nothing we did before we had finished the * machine setup would care about the target page size, and we could * do this much later, rather than requiring board models to state * up front what their requirements are. */ finalize_target_page_bits(); io_mem_init(); // åˆå§‹åŒ–å…­ä¸ªI/O MemoryRegion memory_map_init(); // åˆå§‹åŒ–ä¸¤ä¸ªå…¨å±€ AddressSpaceï¼Œä»¥åŠå¯¹åº”çš„ MemoryRegionã€FlatView qemu_mutex_init(\u0026amp;map_client_list_lock); } å…ˆæ¥çœ‹memory_map_init()ï¼Œä¸»è¦ç”¨æ¥åˆå§‹åŒ–ä¸¤ä¸ªå…¨å±€çš„ç³»ç»Ÿåœ°å€ç©ºé—´system_memoryã€system_io\nstatic void memory_map_init(void) { system_memory = g_malloc(sizeof(*system_memory)); // 1. åˆå§‹åŒ– system_memory memory_region_init(system_memory, NULL, \u0026#34;system\u0026#34;, UINT64_MAX); // 2. è®¾ç½® address_space_memory å…³è” system_memory // è¿™ä¸¤ä¸ªéƒ½æ˜¯å…¨å±€å˜é‡ï¼Œä¹Ÿå°±æ˜¯æŠŠå†…å­˜åœ°å€ç©ºé—´å’Œ IO åœ°å€ç©ºé—´äºå¯¹åº”çš„ MemoryRegion è”ç³»èµ·æ¥ //åŠå…¶å¯¹åº”çš„ FlatView address_space_init(\u0026amp;address_space_memory, system_memory, \u0026#34;memory\u0026#34;); system_io = g_malloc(sizeof(*system_io)); // 1. åˆå§‹åŒ– system_io memory_region_init_io(system_io, NULL, \u0026amp;unassigned_io_ops, NULL, \u0026#34;io\u0026#34;, 65536); // 2. è®¾ç½® address_space_io å…³è” system_io // åŠå…¶å¯¹åº”çš„ FlatView address_space_init(\u0026amp;address_space_io, system_io, \u0026#34;I/O\u0026#34;); } è¿™é‡Œæ¯”è¾ƒé‡è¦çš„æ˜¯address_space_init()ï¼Œå…ˆè®¾ç½® AddressSpace å¯¹åº”çš„ MemoryRegionï¼Œä¹‹åæ ¹æ®system_memoryæ›´æ–°address_space_memoryå¯¹åº”çš„ FlatViewï¼š\nvoid address_space_init(AddressSpace *as, MemoryRegion *root, const char *name) { memory_region_ref(root); // å°† address_space_memory çš„ root åŸŸæŒ‡å‘ system_memory as-\u0026gt;root = root; as-\u0026gt;current_map = NULL; as-\u0026gt;ioeventfd_nb = 0; as-\u0026gt;ioeventfds = NULL; QTAILQ_INIT(\u0026amp;as-\u0026gt;listeners); QTAILQ_INSERT_TAIL(\u0026amp;address_spaces, as, address_spaces_link); as-\u0026gt;name = g_strdup(name ? name : \u0026#34;anonymous\u0026#34;); // æ ¹æ® system_memory æ›´æ–° address_space_memory å¯¹åº”çš„ FlatView address_space_update_topology(as); address_space_update_ioeventfds(as); } address_space_update_topology()ä¼šç»§ç»­è°ƒç”¨generate_memory_topology()ç”Ÿæˆ AddressSpace å¯¹åº”çš„ FlatViewè§†å›¾ï¼š\nstatic void address_space_update_topology(AddressSpace *as) { MemoryRegion *physmr = memory_region_get_flatview_root(as-\u0026gt;root); flatviews_init(); if (!g_hash_table_lookup(flat_views, physmr)) { generate_memory_topology(physmr); } address_space_set_flatview(as); } address_space_update_topology()ä¼šå…ˆè°ƒç”¨generate_memory_topology()ç”Ÿæˆsystem_memoryæ›´æ–°åçš„è§†å›¾new_viewï¼Œå†å°†address_space_memoryçš„current_mapæŒ‡å‘è¿™ä¸ªnew_viewï¼Œæœ€åé”€æ¯old_viewï¼š\nstatic void address_space_set_flatview(AddressSpace *as) { FlatView *old_view = address_space_to_flatview(as); MemoryRegion *physmr = memory_region_get_flatview_root(as-\u0026gt;root); FlatView *new_view = g_hash_table_lookup(flat_views, physmr); assert(new_view); if (old_view == new_view) { return; } if (old_view) { flatview_ref(old_view); } flatview_ref(new_view); if (!QTAILQ_EMPTY(\u0026amp;as-\u0026gt;listeners)) { FlatView tmpview = { .nr = 0 }, *old_view2 = old_view; if (!old_view2) { old_view2 = \u0026amp;tmpview; } address_space_update_topology_pass(as, old_view2, new_view, false); address_space_update_topology_pass(as, old_view2, new_view, true); } /* Writes are protected by the BQL. */ qatomic_rcu_set(\u0026amp;as-\u0026gt;current_map, new_view); if (old_view) { flatview_unref(old_view); } /* Note that all the old MemoryRegions are still alive up to this * point. This relieves most MemoryListeners from the need to * ref/unref the MemoryRegions they get---unless they use them * outside the iothread mutex, in which case precise reference * counting is necessary. */ if (old_view) { flatview_unref(old_view); } } åœ¨address_space_update_topology_pass()çš„æœ€åï¼Œä¼šè°ƒç”¨MEMORY_LISTENER_UPDATE_REGIONè¿™ä¸ªå®ï¼Œè§¦å‘region_addå¯¹åº”çš„å›è°ƒå‡½æ•°kvm_region_add()ã€‚\nè¿™ä¸ªå®åœ¨memory.cä¸­å®šä¹‰ï¼Œä¼šå°† FlatView ä¸­çš„ FlatRange è½¬æ¢ä¸º MemoryRegionSectionï¼Œä½œä¸ºå…¥å‚ä¼ é€’ç»™kvm_region_add()ï¼š\n/* No need to ref/unref .mr, the FlatRange keeps it alive. */ #define MEMORY_LISTENER_UPDATE_REGION(fr, as, dir, callback, _args...) \\ do { \\ MemoryRegionSection mrs = section_from_flat_range(fr, \\ address_space_to_flatview(as)); \\ MEMORY_LISTENER_CALL(as, callback, dir, \u0026amp;mrs, ##_args); \\ } while(0) è€Œkvm_region_add()å®é™…ä¸Šæ˜¯å¯¹kvm_set_phys_mem()çš„å°è£…è°ƒç”¨ã€‚è¯¥å‡½æ•°æ¯”è¾ƒå¤æ‚ï¼Œä¼šæ ¹æ®ä¼ å…¥çš„sectionå¡«å…… KVMSlotï¼Œå†ä¼ é€’ç»™kvm_set_user_memory_region()ï¼š\nstatic int kvm_set_user_memory_region(KVMMemoryListener *kml, KVMSlot *slot, bool new) { KVMState *s = kvm_state; struct kvm_userspace_memory_region mem; int ret; // æ ¹æ® KVMSlot å¡«å…… kvm_userspace_memory_region mem.slot = slot-\u0026gt;slot | (kml-\u0026gt;as_id \u0026lt;\u0026lt; 16); mem.guest_phys_addr = slot-\u0026gt;start_addr; mem.userspace_addr = (unsigned long)slot-\u0026gt;ram; mem.flags = slot-\u0026gt;flags; if (slot-\u0026gt;memory_size \u0026amp;\u0026amp; !new \u0026amp;\u0026amp; (mem.flags ^ slot-\u0026gt;old_flags) \u0026amp; KVM_MEM_READONLY) { /* Set the slot size to 0 before setting the slot to the desired * value. This is needed based on KVM commit 75d61fbc. */ mem.memory_size = 0; ret = kvm_vm_ioctl(s, KVM_SET_USER_MEMORY_REGION, \u0026amp;mem); if (ret \u0026lt; 0) { goto err; } } mem.memory_size = slot-\u0026gt;memory_size; ret = kvm_vm_ioctl(s, KVM_SET_USER_MEMORY_REGION, \u0026amp;mem); slot-\u0026gt;old_flags = mem.flags; return ret; } å¯ä»¥çœ‹åˆ°è¿™é‡Œåˆå°† KVMSlot è½¬æ¢ä¸º kvm_userspace_memory_regionï¼Œä½œä¸ºioctl()çš„å‚æ•°ï¼Œäº¤ç»™å†…æ ¸ä¸­çš„ KVM è¿›è¡Œå†…å­˜çš„æ³¨å†Œã€è®¾ç½®GPA-\u0026gt;HVAçš„æ˜ å°„å…³ç³»ï¼Œåœ¨å†…æ ¸ç©ºé—´ç»´æŠ¤å¹¶ç®¡ç† Guest çš„å†…å­˜ã€‘ã€‚\nè‡³æ­¤ QEMU ä¾§è´Ÿè´£ç®¡ç†å†…å­˜çš„æ•°æ®ç»“æ„å‡å·²å®Œæˆåˆå§‹åŒ–ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„å›¾ç‰‡äº†è§£å„æ•°æ®ç»“æ„ä¹‹é—´çš„å¯¹åº”å…³ç³»\n\u003c!DOCTYPE html\u003e Responsive Image å®é™…å†…å­˜çš„åˆ†é… \u003c!DOCTYPE html\u003e Responsive Image int main() â””â”€ void machine-\u0026gt;init(ram_size, ...) â””â”€ static void pc_init_pci(ram_size, ...) // åˆå§‹åŒ–è™šæ‹Ÿæœº â””â”€ static void pc_init1(system_memory, system_io, ram_size, ...) â”œâ”€ void memory_region_init(pci_memory, \u0026#34;pci\u0026#34;, ...) // pci_memory, rom_memory â””â”€ void pc_memory_init() // åˆå§‹åŒ–å†…å­˜ï¼Œåˆ†é…å®é™…çš„ç‰©ç†å†…å­˜åœ°å€ â”œâ”€ void memory_region_init_ram() // åˆ›å»º pc.ram, pc.rom å¹¶åˆ†é…å†…å­˜ | â”œâ”€ void memory_region_init() | â””â”€ ram_addr_t qemu_ram_alloc() | â””â”€ ram_addr_t qemu_ram_alloc_from_ptr() | â”œâ”€ void vmstate_register_ram_global() // å°† MR çš„ name å†™å…¥ RAMBlock çš„ idstr | â””â”€ void vmstate_register_ram() | â””â”€ void qemu_ram_set_idstr() | â”œâ”€ void memory_region_init_alias() // åˆå§‹åŒ– ram_below_4g, ram_above_4g â””â”€ void memory_region_add_subregion() // åœ¨ system_memory ä¸­æ·»åŠ  subregions â””â”€ static void memory_region_add_subregion_common() â””â”€ static void memory_region_update_topology() // ä¸º MemoryRegion ç”Ÿæˆ FlatView â””â”€ static void address_space_update_topology() // as-\u0026gt;current_map = new_view â””â”€ static void address_space_update_topology_pass() â””â”€ static void kvm_region_add() // region_add å¯¹åº”çš„å›è°ƒå®ç° â””â”€ static void kvm_set_phys_mem() // æ ¹æ®ä¼ å…¥çš„ section å¡«å…… KVMSlot â””â”€ static int kvm_set_user_memory_region() â””â”€ int ioctl(KVM_SET_USER_MEMORY_REGION) ä¹‹å‰çš„å›è°ƒå‡½æ•°æ³¨å†Œã€AddressSpace çš„åˆå§‹åŒ–ï¼Œå®é™…ä¸Šå‡æ²¡æœ‰å¯¹åº”çš„ç‰©ç†å†…å­˜ã€‚ã€å®é™…çš„å†…å­˜æ˜¯åœ¨ RAMBlock ä¸­ã€‘\næˆ‘ä»¬å†å›åˆ° qemu å¯åŠ¨çš„ main å‡½æ•°ä¸­ã€‚æ¥ä¸‹æ¥çš„åˆå§‹åŒ–è¿‡ç¨‹ä¼šè°ƒç”¨ pc_init1ã€‚åœ¨è¿™é‡Œé¢ï¼Œå¯¹äº CPU è™šæ‹ŸåŒ–ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨ pc_cpus_initã€‚å¦å¤–ï¼Œpc_init1 è¿˜ä¼šè°ƒç”¨pc_memory_initï¼Œè¿›è¡Œå†…å­˜çš„è™šæ‹ŸåŒ–ã€‚\nvoid *pc_memory_init(MemoryRegion *system_memory, const char *kernel_filename, const char *kernel_cmdline, const char *initrd_filename, ram_addr_t below_4g_mem_size, ram_addr_t above_4g_mem_size, MemoryRegion *rom_memory, MemoryRegion **ram_memory) { MemoryRegion *ram, *option_rom_mr; // ä¸¤ä¸ªå®ä½“ MR: pc.ram, pc.rom MemoryRegion *ram_below_4g, *ram_above_4g; // ä¸¤ä¸ªåˆ«å MR: ram_below_4g, ram_above_4g /* Allocate RAM. We allocate it as a single memory region and use * aliases to address portions of it, mostly for backwards compatibility * with older qemus that used qemu_ram_alloc(). */ ram = g_malloc(sizeof(*ram)); // åˆ›å»º ram // åˆ†é…å…·ä½“çš„å†…å­˜ï¼ˆå®é™…ä¸Šä¼šåˆ›å»ºä¸€ä¸ª RAMBlock å¹¶å°†å…¶ offset å€¼å†™å…¥ ram.ram_addrï¼Œå¯¹åº” GPAï¼‰ memory_region_init_ram(ram, \u0026#34;pc.ram\u0026#34;, below_4g_mem_size + above_4g_mem_size); // å°† MR çš„ name å†™å…¥ RAMBlock çš„ idstr vmstate_register_ram_global(ram); *ram_memory = ram; // åˆ›å»º ram_below_4g è¡¨ç¤º 4G ä»¥ä¸‹çš„å†…å­˜ ram_below_4g = g_malloc(sizeof(*ram_below_4g)); memory_region_init_alias(ram_below_4g, \u0026#34;ram-below-4g\u0026#34;, ram, 0, below_4g_mem_size); // å°† ram_below_4g æŒ‚åœ¨ system_memory ä¸‹ memory_region_add_subregion(system_memory, 0, ram_below_4g); if (above_4g_mem_size \u0026gt; 0) { ram_above_4g = g_malloc(sizeof(*ram_above_4g)); memory_region_init_alias(ram_above_4g, \u0026#34;ram-above-4g\u0026#34;, ram, below_4g_mem_size, above_4g_mem_size); memory_region_add_subregion(system_memory, 0x100000000ULL, ram_above_4g); } /* ... */ } è¿™é‡Œçš„é‡ç‚¹åœ¨äºmemory_region_init_ram()ï¼Œå®ƒé€šè¿‡qemu_ram_alloc()è·å– ram è¿™ä¸ª MemoryRegion å¯¹åº”çš„ RAMBlock çš„offsetï¼Œå¹¶å­˜å…¥ram.ram_addrï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ram_listä¸­æ ¹æ®è¯¥å­—æ®µæŸ¥æ‰¾ MR å¯¹åº”çš„ RAMBlockï¼š\nvoid memory_region_init_ram(MemoryRegion *mr, const char *name, uint64_t size) { memory_region_init(mr, name, size); // å¡«å……å­—æ®µï¼Œåˆå§‹åŒ–é»˜è®¤å€¼ mr-\u0026gt;ram = true; // è¡¨ç¤ºä¸º RAM mr-\u0026gt;terminates = true; // è¡¨ç¤ºä¸ºå®ä½“ MemoryRegion mr-\u0026gt;destructor = memory_region_destructor_ram; mr-\u0026gt;ram_addr = qemu_ram_alloc(size, mr); // è¿™é‡Œä¿å­˜ RAMBlock çš„ offsetï¼Œå³ GPA } è€Œ qemu_ram_alloc() æœ€ç»ˆä¼šè°ƒç”¨ qemu_ram_alloc_from_ptr()ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹åº”å¤§å° RAMBlock å¹¶åˆ†é…å†…å­˜ï¼Œè¿”å›å¯¹åº”çš„ GPA åœ°å€å­˜å…¥ mr-\u0026gt;ram_addr ä¸­ï¼š\nram_addr_t qemu_ram_alloc_from_ptr(ram_addr_t size, void *host, MemoryRegion *mr) { RAMBlock *new_block; // åˆ›å»ºä¸€ä¸ª RAMBlock size = TARGET_PAGE_ALIGN(size); // é¡µå¯¹é½ new_block = g_malloc0(sizeof(*new_block)); // åˆå§‹åŒ– new_block new_block-\u0026gt;mr = mr; // å°† new_block-\u0026gt; æŒ‡å‘å…¥å‚çš„ MemoryRegion new_block-\u0026gt;offset = find_ram_offset(size); // ä» ram_list ä¸­çš„ RAMBlock ä¹‹é—´æ‰¾åˆ°ä¸€æ®µå¯ä»¥æ»¡è¶³ size éœ€æ±‚çš„ gapï¼Œå¹¶è¿”å›èµ·å§‹åœ°å€çš„ offsetï¼Œå¯¹åº” GPA if (host) { // æ–°å»ºçš„ RAMBlock host å­—æ®µä¸ºç©ºï¼Œè·³è¿‡ new_block-\u0026gt;host = host; new_block-\u0026gt;flags |= RAM_PREALLOC_MASK; } else { if (mem_path) { // æœªæŒ‡å®š mem_path #if defined (__linux__) \u0026amp;\u0026amp; !defined(TARGET_S390X) new_block-\u0026gt;host = file_ram_alloc(new_block, size, mem_path); if (!new_block-\u0026gt;host) { new_block-\u0026gt;host = qemu_vmalloc(size); qemu_madvise(new_block-\u0026gt;host, size, QEMU_MADV_MERGEABLE); } #else fprintf(stderr, \u0026#34;-mem-path option unsupported\\n\u0026#34;); exit(1); #endif } else { if (xen_enabled()) { xen_ram_alloc(new_block-\u0026gt;offset, size, mr); } else if (kvm_enabled()) { // ä»è¿™é‡Œç»§ç»­ /* some s390/kvm configurations have special constraints */ new_block-\u0026gt;host = kvm_vmalloc(size); // å®é™…ä¸Šè¿˜æ˜¯è°ƒç”¨ qemu_vmalloc(size) } else { new_block-\u0026gt;host = qemu_vmalloc(size); // ä» QEMU çš„çº¿æ€§ç©ºé—´ä¸­åˆ†é… size å¤§å°çš„å†…å­˜ï¼Œè¿”å› HVA } qemu_madvise(new_block-\u0026gt;host, size, QEMU_MADV_MERGEABLE); } } new_block-\u0026gt;length = size; // å°† length è®¾ç½®ä¸º size QLIST_INSERT_HEAD(\u0026amp;ram_list.blocks, new_block, next); // å°†è¯¥ RAMBlock æ’å…¥ ram_list å¤´éƒ¨ ram_list.phys_dirty = g_realloc(ram_list.phys_dirty, // é‡æ–°åˆ†é… ram_list.phys_dirty çš„å†…å­˜ç©ºé—´ last_ram_offset() \u0026gt;\u0026gt; TARGET_PAGE_BITS); memset(ram_list.phys_dirty + (new_block-\u0026gt;offset \u0026gt;\u0026gt; TARGET_PAGE_BITS), 0, size \u0026gt;\u0026gt; TARGET_PAGE_BITS); cpu_physical_memory_set_dirty_range(new_block-\u0026gt;offset, size, 0xff); // å¯¹è¯¥ RAMBlock å¯¹åº”çš„å†…å­˜æ ‡è®°ä¸º dirty qemu_ram_setup_dump(new_block-\u0026gt;host, size); if (kvm_enabled()) kvm_setup_guest_memory(new_block-\u0026gt;host, size); return new_block-\u0026gt;offset; } è¿™æ ·ä¸€æ¥ramã€å…¶å®å°±æ˜¯system memoryï¼Œæ•´ä¸ªGuestç‰©ç†ç©ºé—´çš„å¤§å°ã€‘å¯¹åº”çš„ RAMBlock ä¸­å°±åˆ†é…å¥½äº† GPA å’Œ HVAï¼Œå°±å¯ä»¥å°†å†…å­˜ä¿¡æ¯åŒæ­¥è‡³ KVM ä¾§äº†ã€‚\næœ€åå›åˆ°pc_memory_init()ä¸­ï¼Œåœ¨åˆ†é…å®Œå®é™…å†…å­˜åï¼Œä¼šå…ˆè°ƒç”¨memory_region_init_alias()åˆå§‹åŒ–ram_below_4gã€ram_above_4gè¿™ä¸¤ä¸ªaliasï¼Œä¹‹åè°ƒç”¨memory_region_add_subregion()å°†è¿™ä¸¤ä¸ª alias æŒ‡å‘ramè¿™ä¸ªå®ä½“ MemoryRegionã€‚å¦‚ä¸‹å›¾ï¼Œè¯¥å‡½æ•°æœ€ç»ˆä¼šè§¦å‘kvm_region_add()å›è°ƒï¼Œå°†å®é™…çš„å†…å­˜ä¿¡æ¯ä¼ å…¥ KVM æ³¨å†Œã€‚è¯¥è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ä¹‹å‰åˆ†æçš„æµç¨‹ç›¸åŒï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ€»ç»“ è™šæ‹Ÿæœºçš„å†…å­˜ç®¡ç†ä¹Ÿæ˜¯éœ€è¦ç”¨æˆ·æ€çš„ qemu å’Œå†…æ ¸æ€çš„ KVM å…±åŒå®Œæˆã€‚ä¸ºäº†åŠ é€Ÿå†…å­˜æ˜ å°„ï¼Œéœ€è¦å€ŸåŠ©ç¡¬ä»¶çš„ EPT æŠ€æœ¯ã€‚\nQEMU ä¾§ åˆ›å»ºä¸€ç³»åˆ— MemoryRegionï¼Œåˆ†åˆ«è¡¨ç¤º Guest ä¸­çš„ RAMã€ROM ç­‰åŒºåŸŸã€‚MemoryRegionä¹‹é—´é€šè¿‡ alias æˆ– subregions çš„æ–¹å¼ç»´æŠ¤ç›¸äº’ä¹‹é—´çš„å…³ç³»ï¼Œä»è€Œè¿›ä¸€æ­¥ç»†åŒ–åŒºåŸŸçš„å®šä¹‰\nå¯¹äºä¸€ä¸ªå®ä½“ MemoryRegionï¼ˆé aliasï¼‰ï¼Œåœ¨åˆå§‹åŒ–å†…å­˜çš„è¿‡ç¨‹ä¸­ QEMU ä¼šåˆ›å»ºå®ƒæ‰€å¯¹åº”çš„ RAMBlockã€‚è¯¥ RAMBlock é€šè¿‡è°ƒç”¨qemu_ram_alloc_from_ptr()ä» QEMU çš„è¿›ç¨‹åœ°å€ç©ºé—´ä¸­ä»¥ mmap çš„æ–¹å¼åˆ†é…å†…å­˜ï¼Œå¹¶è´Ÿè´£ç»´æŠ¤è¯¥ MemoryRegion å¯¹åº”å†…å­˜çš„èµ·å§‹ GPA/HVA/size ç­‰ç›¸å…³ä¿¡æ¯ã€åœ¨qemu_ram_alloc_from_pträ¸­åˆ›å»ºçš„æ–°RAMBlockæœ‰offsetã€hostçš„èµ‹å€¼ï¼Œå³GPA-\u0026gt;HVAçš„å¯¹åº”å…³ç³»ã€‘\nAddressSpace è¡¨ç¤º Guest çš„ç‰©ç†åœ°å€ç©ºé—´ã€‚å¦‚æœ AddressSpace ä¸­çš„ MemoryRegion å‘ç”Ÿå˜åŒ–ï¼Œåˆ™æ³¨å†Œçš„ listener ä¼šè¢«è§¦å‘ï¼Œå°†æ‰€å±çš„ MemoryRegion æ ‘å±•å¼€ç”Ÿæˆä¸€ç»´çš„ FlatViewï¼Œæ¯”è¾ƒ FlatRange æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è°ƒç”¨ç›¸åº”çš„æ–¹æ³•å¯¹ MemoryRegionSection è¿›è¡Œæ£€æŸ¥ï¼Œæ›´æ–° QEMU ä¸­çš„ KVMSlotï¼ŒåŒæ—¶å¡«å……kvm_userspace_memory_regionç»“æ„ä½“ï¼Œä½œä¸ºioctl()çš„å‚æ•°æ›´æ–° KVM ä¸­çš„kvm_memory_slot\nKVM ä¾§ å½“ QEMU é€šè¿‡ioctl()åˆ›å»º vcpu æ—¶ï¼Œè°ƒç”¨kvm_mmu_create()åˆå§‹åŒ– MMU ç›¸å…³ä¿¡æ¯ã€‚ å½“ KVM è¦è¿›å…¥ Guest å‰ï¼Œvcpu_enter_guest()=\u0026gt;kvm_mmu_reload()ä¼šå°†æ ¹çº§é¡µè¡¨åœ°å€åŠ è½½åˆ° VMCSï¼Œè®© Guest ä½¿ç”¨è¯¥é¡µè¡¨\nå½“å‘ç”ŸEPT Violation æ—¶ï¼ŒVM-EXITåˆ° KVM ä¸­ã€‚å¦‚æœæ˜¯ç¼ºé¡µï¼Œåˆ™æ ¹æ® GPA ç®—å‡º gfnï¼Œå†æ ¹æ® gfn æ‰¾åˆ°å¯¹åº”çš„ KVMSlotï¼Œä»ä¸­å¾—åˆ°å¯¹åº”çš„ HVAã€‚ç„¶åæ ¹æ® HVA ç®—å‡ºå¯¹åº”çš„ pfnï¼Œç¡®ä¿è¯¥ Page ä½äºå†…å­˜ä¸­ã€‚å¡«å¥½ç¼ºå¤±çš„é¡µä¹‹åï¼Œéœ€è¦æ›´æ–° EPTï¼Œå®Œå–„å…¶ä¸­ç¼ºå°‘çš„é¡µè¡¨é¡¹ï¼Œé€å±‚è¡¥å…¨é¡µè¡¨\n\u003c!DOCTYPE html\u003e Responsive Image è™šæ‹Ÿæœºçš„ç‰©ç†å†…å­˜ç©ºé—´é‡Œé¢çš„é¡µé¢å½“ç„¶ä¸æ˜¯ä¸€å¼€å§‹å°±æ˜ å°„åˆ°ç‰©ç†é¡µé¢çš„ï¼Œåªæœ‰å½“è™šæ‹Ÿæœºçš„å†…å­˜è¢«è®¿é—®çš„æ—¶å€™ï¼Œä¹Ÿå³ mmap åˆ†é…çš„è™šæ‹Ÿå†…å­˜ç©ºé—´è¢«è®¿é—®çš„æ—¶å€™ï¼Œå…ˆæŸ¥çœ‹ EPT é¡µè¡¨ï¼Œæ˜¯å¦å·²ç»æ˜ å°„è¿‡ï¼Œå¦‚æœå·²ç»æ˜ å°„è¿‡ï¼Œåˆ™ç»è¿‡å››çº§é¡µè¡¨æ˜ å°„ï¼Œå°±èƒ½è®¿é—®åˆ°ç‰©ç†é¡µé¢ã€‚ å¦‚æœæ²¡æœ‰æ˜ å°„è¿‡ï¼Œåˆ™è™šæ‹Ÿæœºä¼šé€šè¿‡VM-ExitæŒ‡ä»¤å›åˆ°å®¿ä¸»æœºæ¨¡å¼ï¼Œé€šè¿‡ handle_ept_violation è¡¥å……é¡µè¡¨æ˜ å°„ã€‚å…ˆæ˜¯é€šè¿‡ handle_mm_faultä¸ºè™šæ‹Ÿæœºçš„ç‰©ç†å†…å­˜ç©ºé—´åˆ†é…çœŸæ­£çš„ç‰©ç†é¡µé¢ï¼Œç„¶åé€šè¿‡ __direct_map æ·»åŠ  EPT é¡µè¡¨æ˜ å°„ã€‚ \u003c!DOCTYPE html\u003e Responsive Image Reference â€œQEMU å†…å­˜ç©ºé—´è™šæ‹ŸåŒ–åŠå†…å­˜ç®¡ç†â€ - B10g | FÎ“om è®¸å¤§ä»™ ã€åŸåˆ›ã€‘Linux è™šæ‹ŸåŒ– KVM-Qemu åˆ†æï¼ˆäº”ï¼‰ä¹‹å†…å­˜è™šæ‹ŸåŒ– - LoyenWang - åšå®¢å›­ KVM/Qemu å·¥ä½œåŸç†ç³»åˆ—ç›®å½•_xiongwenwu çš„ä¸“æ -CSDN åšå®¢_qemu ç›®å½•ç»“æ„ QEMU å†…å­˜è™šæ‹ŸåŒ–æºç åˆ†æ | Keep Coding | è‹æ˜“åŒ—\n","permalink":"https://lifeislife.cn/posts/qemu%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E5%86%85%E5%AD%98%E8%99%9A%E6%8B%9F%E5%8C%96/","summary":"\u003cblockquote\u003e\n\u003cp\u003e1.å¤§éƒ¨åˆ†è½¬è½½è‡ª\u003ca href=\"https://abelsu7.top/2019/07/07/kvm-memory-virtualization/\"\u003eQEMU å†…å­˜è™šæ‹ŸåŒ–æºç åˆ†æ | Keep Coding | è‹æ˜“åŒ—\u003c/a\u003e\n2.åŸæ–‡æºç ä¸º QEMU1.2.0ï¼Œç‰ˆæœ¬è¾ƒæ—§ï¼Œéƒ¨åˆ†æºç å†…å®¹æ ¹æ® QEMU6.2 ç‰ˆæœ¬ä¿®æ”¹\n3.éƒ¨åˆ†å†…å®¹æ ¹æ®è‡ªå·±ç†è§£è¡¥å……æ·»åŠ \u003c/p\u003e","title":"QEMU æºç åˆ†æ-å†…å­˜è™šæ‹ŸåŒ–"},{"content":"ä¿ç•™ç°åœº \u003c!DOCTYPE html\u003e Responsive Image æ¢ç©¶åŸå›  æœ¬åœ°è®°å½•çš„æœåŠ¡å™¨ä¿¡æ¯å’Œç°æœ‰çš„äº§ç”Ÿäº†å†²çª\nè§£å†³æ–¹æ³• æ–¹æ³•ä¸€ å°†known_hostsæ–‡ä»¶çš„å†…å®¹å…¨éƒ¨åˆ é™¤ã€‚\nC:\\Users\\user name\\.ssh\\known_hosts\næ–¹æ³•äºŒ æœéå…¨ç½‘å‡ ä¹éƒ½æ˜¯ä¸Šè¿°æ–¹æ³•ï¼Œåº”è¯¥ç»å¤§éƒ¨åˆ†äººé€šè¿‡ä¸Šè¿°æ–¹æ³•éƒ½èƒ½è§£å†³ã€‚å¦‚æœä½ ä¹Ÿè·Ÿæˆ‘ä¸€æ ·ä¸èµ°è¿ï¼Œä¸ç®¡æ˜¯é‡æ–°ç”Ÿæˆå…¬ç§é’¥ï¼Œè¿˜æ˜¯åˆ é™¤hnow_hostséƒ½ä¸è¡Œï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•ä¿®æ”¹ VSCode ä½¿ç”¨çš„ssh.exeã€‚Windows ä¸‹é»˜è®¤ä½¿ç”¨çš„æ˜¯ç¯å¢ƒå˜é‡é‡Œé…ç½®çš„OpenSSHæä¾›çš„ssh.exeã€‚ä½ å¯ä»¥å°†ç¯å¢ƒå˜é‡é‡Œçš„OpenSSHåˆ é™¤ã€‚ç„¶ååœ¨VSCodeè®¾ç½®é‡Œæœç´¢remoteï¼Œä¹Ÿå°±æ˜¯è®¾ç½®æ’ä»¶remote sshã€‚\nå°† Path å¼ºåˆ¶è®¾ç½®æˆGitå®‰è£…åŒ…å†…çš„ssh.exe\n\u003c!DOCTYPE html\u003e Responsive Image æˆ–è€…mobaxtermå®‰è£…åŒ…å†…çš„ssh.exe\nå‚è€ƒ Debug | VSCode | è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨ - CodeAntenna\nVScode é€šè¿‡ remote ssh è¿æ¥è™šæ‹Ÿæœº \u0026amp; æŠ¥é”™ è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨ï¼ˆå·²è§£å†³ï¼‰_Tasdily çš„åšå®¢-CSDN åšå®¢_vscode è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3vscode%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B%E8%AF%95%E5%9B%BE%E5%86%99%E5%85%A5%E7%9A%84%E7%AE%A1%E9%81%93%E4%B8%8D%E5%AD%98%E5%9C%A8/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202201192309069.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202201192309069.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eæœ¬åœ°è®°å½•çš„æœåŠ¡å™¨ä¿¡æ¯å’Œç°æœ‰çš„äº§ç”Ÿäº†å†²çª\u003c/p\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003ch3 id=\"æ–¹æ³•ä¸€\"\u003eæ–¹æ³•ä¸€\u003c/h3\u003e\n\u003cp\u003eå°†\u003ccode\u003eknown_hosts\u003c/code\u003eæ–‡ä»¶çš„å†…å®¹å…¨éƒ¨åˆ é™¤ã€‚\u003c/p\u003e","title":"è§£å†³ VSCode é…ç½®è¿œç¨‹è¿æ¥ï¼Œè¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨"},{"content":"ç®€ä»‹ FrameBuffer æ˜¯å†…æ ¸å½“ä¸­çš„ä¸€ç§é©±åŠ¨ç¨‹åºæ¥å£ã€‚Linux æ˜¯å·¥ä½œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ‰€ä»¥ç”¨æˆ·æ€è¿›ç¨‹æ˜¯æ— æ³•è±¡ DOS é‚£æ ·ä½¿ç”¨æ˜¾å¡ BIOS é‡Œæä¾›çš„ä¸­æ–­è°ƒç”¨æ¥å®ç°ç›´æ¥å†™å±ï¼ŒLinux æŠ½è±¡å‡º FrameBuffer è¿™ä¸ªè®¾å¤‡æ¥ä¾›ç”¨æˆ·æ€è¿›ç¨‹å®ç°ç›´æ¥å†™å±ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¸§ç¼“å†²ä¸»è¦ç»“æ„ fb_info è¯¥ç»“æ„ä½“è®°å½•å½“å‰å¸§ç¼“å†²è®¾å¤‡çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æœç³»ç»Ÿä¸­æœ‰å¤šä¸ªå¸§ç¼“å†²è®¾å¤‡ï¼Œå°±éœ€è¦ä¸¤ä¸ªfb_infoç»“æ„ï¼Œè¿™ä¸ªç»“æ„åªåœ¨å†…æ ¸ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯¹ç”¨æˆ·ç©ºé—´ä¸å¯è§ã€‚\nfb_var_screeninfo è¯¥ç»“æ„ä½“è®°å½•æŒ‡å®šçš„å¸§ç¼“å†²è®¾å¤‡å’Œæ˜¾ç¤ºæ¨¡å¼ä¸­å¯ä»¥è¢«ä¿®æ”¹çš„ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡ç­‰ä¿¡æ¯ã€‚\nfb_fix_screeninfo è¯¥ç»“æ„ä½“è¡¨ç¤ºå¸§ç¼“å†²è®¾å¤‡ä¸­ä¸€äº›ä¸èƒ½ä¿®æ”¹çš„å‚æ•°ï¼ŒåŒ…æ‹¬ç‰¹å®šçš„æ˜¾ç¤ºæ¨¡å¼ï¼Œå±å¹•ç¼“å†²åŒºçš„ç‰©ç†åœ°å€ï¼Œæ˜¾ç¤ºç¼“å†²åŒºçš„é•¿åº¦ä¿¡æ¯ã€‚\nfb_ops LCDåº•å±‚ç¡¬ä»¶æ“ä½œæ¥å£é›†ã€‚æ¯”å¦‚fb_openã€fb_releaseã€fb_readã€fb_writeã€fb_ioctlã€fb_mmapç­‰ï¼š\nfb_cmap fb_cmapæŒ‡å®šé¢œè‰²æ˜ å°„ï¼Œç”¨äºä»¥å†…æ ¸å¯ä»¥ç†è§£çš„æ–¹å¼å­˜å‚¨ç”¨æˆ·çš„é¢œè‰²å®šä¹‰ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¸§ç¼“å†²æ˜¾ç¤ºåŸç† å¸§ç¼“å†²è®¾å¤‡æ˜¯ä¸€ç§æ˜¾ç¤ºæŠ½è±¡çš„è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥è¢«ç†è§£ä¸ºå®ƒæ˜¯ä¸€ä¸ªå†…å­˜åŒºåŸŸï¼Œä¸Šé¢çš„åº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥å¯¹æ˜¾ç¤ºç¼“å†²åŒºè¿›è¡Œè¯»å’Œå†™æ“ä½œï¼Œå°±åƒè®¿é—®æ–‡ä»¶çš„é€šç”¨æ¥å£ä¸€æ ·ï¼Œç”¨æˆ·å¯ä»¥è®¤ä¸ºå¸§ç¼“å†²æ˜¯ä¸€å—å†…å­˜ï¼Œèƒ½è¯»å–æ•°æ®çš„å†…å­˜å—ä¹Ÿå¯ä»¥å‘è¿™ä¸ªå†…å­˜å†™å…¥æ•°æ®ï¼Œå› æ­¤æ˜¾ç¤ºå™¨æ˜¾ç¤ºå›¾å½¢ç•Œé¢å®é™…ä¸Šæ ¹æ®æ ¹æ®çš„æ˜¯æŒ‡å®šçš„å†…å­˜æ•°æ®å—å†…çš„æ•°æ®ã€‚\nå¸§ç¼“å†²çš„æ˜¾ç¤ºç¼“å†²åŒºä½äº Linux å†…æ ¸åœ°å€ç©ºé—´ï¼Œåº”ç”¨ç¨‹åºä¸èƒ½ç›´æ¥è®¿é—®å†…æ ¸åœ°å€ç©ºé—´ï¼Œåœ¨ Linux ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå†…å­˜çš„å†…æ ¸åœ°å€ç©ºé—´æ˜ å°„åˆ°ç”¨æˆ·åœ°å€ç©ºé—´æ‰å¯ä»¥ç”±ç”¨æˆ·è®¿é—®ï¼Œå†…å­˜çš„æ˜ å°„æ˜¯é€šè¿‡MMAPå‡½æ•°å®ç°çš„åœ¨ Linux ä¸­ã€‚å¯¹äºå¸§ç¼“å†²ï¼Œè™šæ‹Ÿåœ°å€æ˜¯é€šè¿‡å†…å­˜æ˜ å°„çš„æ–¹æ³•å°†æ˜¾ç¤ºç¼“å†²åŒºå†…æ ¸åœ°å€æ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´çš„ï¼Œç„¶åç”¨æˆ·å¯ä»¥é€šè¿‡è¯»å’Œå†™è¿™éƒ¨åˆ†çš„è™šæ‹Ÿåœ°å€æ¥è®¿é—®æ˜¾ç¤ºç¼“å†²åŒºï¼Œåœ¨å±å¹•ä¸Šç»˜å›¾ã€‚\nä½¿ç”¨æµç¨‹ ä½¿ç”¨å¸§ç¼“å†²ä¹‹å‰åº”è¯¥é¦–å…ˆç¡®å®š Linux ç³»ç»Ÿä¸Šå·²å®‰è£…äº†å¸§ç¼“å†²é©±åŠ¨ï¼Œå¯ä»¥åœ¨ç›®å½•/dev/ä¸‹æŸ¥æ‰¾fb*å¦‚ï¼Œ/dev/fb0, /dev/fb1ç­‰è®¾å¤‡æ¥ç¡®å®šæ˜¯å¦å®‰è£…ã€‚å¦‚æœæ²¡æœ‰éœ€è¦å®‰è£…ä¸€ä¸ªå¸§ç¼“å†²é©±åŠ¨çš„æ¨¡å—åˆ°å†…æ ¸ï¼Œæˆ–è€…é‡æ–°ç¼–è¯‘å†…æ ¸ç”Ÿæˆä¸€ä¸ªå¸¦å¸§ç¼“å†²æ¨¡å—çš„é•œåƒã€‚\nä½¿ç”¨å¸§ç¼“å†²éœ€è¦è¿›å…¥æ§åˆ¶å°æ¨¡å¼ï¼Œå³çº¯å‘½ä»¤è¡Œçš„æ¨¡å¼è¿›è¡Œç¼–ç¨‹ã€‚ä¸€èˆ¬å¯ä»¥é€šè¿‡å¿«æ·é”®CTRL+ALT+F1è¿›å…¥æ§åˆ¶å°æ¨¡å¼ï¼ŒCTRL+ALT+F7åˆ‡å›å›¾å½¢çª—å£ã€‚å¦‚æœæ§åˆ¶å°æ¨¡å¼æ²¡æœ‰ç™»å½•ï¼Œå¯ä»¥CTRL+ALT+F6å°è¯•ç™»å½•ã€‚\nå› ç¡¬ä»¶æ˜¾ç¤ºè®¾å¤‡çš„ç‰©ç†æ˜¾ç¤ºåŒºæ˜¯é€šè¿‡å¸§ç¼“å­˜åŒºæ“ä½œï¼Œè€Œå¸§ç¼“å­˜åŒºæ˜¯å¤„äºå†…æ ¸ç©ºé—´ï¼Œåº”ç”¨ç¨‹åºä¸èƒ½éšæ„æ“ä½œï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨mmapæŠŠå¸§ç¼“å­˜æ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´ï¼Œåœ¨ç”¨æˆ·ç©ºé—´ä¸­åˆ›å»ºå‡ºå¸§ç¼“å­˜æ˜ å°„åŒºï¼ˆç”¨æˆ·å›¾åƒæ•°æ®ç¼“å­˜åŒºï¼‰ï¼Œä»¥ååªéœ€æŠŠç”¨æˆ·å›¾åƒæ•°æ®å†™å…¥åˆ°å¸§ç¼“å­˜æ˜ å°„åŒºå°±å¯åœ¨ç¡¬ä»¶è®¾å¤‡ä¸Šæ˜¾ç¤ºå›¾åƒã€‚\nå…·ä½“å®ç°æµç¨‹å¦‚ä¸‹ï¼š\næ‰“å¼€å¸§ç¼“å†²è®¾å¤‡/dev/f0 åœ¨Linuxçš„/devç›®å½•çš„å¯»æ‰¾b*è®¾å¤‡æ–‡ä»¶ç„¶åä½¿ç”¨è¯»å†™æ¨¡å¼æ‰“å¼€å®ƒï¼ŒLinux ç³»ç»Ÿå°†ä½¿ç”¨é€šç”¨çš„openç³»ç»Ÿè°ƒç”¨æ¥å®ŒæˆåŠŸèƒ½ï¼Œ opençš„åŠŸèƒ½åŸå‹å¦‚ä¸‹ï¼š\nint open(const char *path, int oflags); Pathæ˜¯å‡†å¤‡æ‰“å¼€çš„æ–‡ä»¶æˆ–è®¾å¤‡çš„è·¯å¾„å‚æ•°ï¼› oflagsæŒ‡å®šæ‰“å¼€æ–‡ä»¶æ—¶ä½¿ç”¨çš„å‚æ•°ï¼› flagså‚æ•°çš„æŒ‡å®šï¼Œæ˜¯é€šè¿‡ç»„åˆæ–‡ä»¶è®¿é—®æ¨¡å¼å’Œå…¶ä»–çš„å¯é€‰æ¨¡å¼ä¸€èµ·çš„ï¼Œå¯ä»¥æ”¯æŒå¤šä¸ªæ¨¡å¼æˆ–ï¼Œå‚æ•°å¿…é¡»æ˜¯æŒ‡å®šä¸‹åˆ—æ–‡ä»¶çš„è®¿é—®æ¨¡å¼ã€‚ åªè¯»ï¼šO_RDONLLY åªå†™ï¼šO_WRONLY è¯»å†™ï¼šO_RDWR ç®€è€Œè¨€ä¹‹ï¼Œ openå‡½æ•°å»ºç«‹è®¾å¤‡æ–‡ä»¶çš„è®¿é—®è·¯å¾„ã€‚å¦‚æœæ“ä½œæˆåŠŸï¼Œå®ƒè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œåªæ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå®ƒå°†ä¸ä½¿ç”¨å…¶ä»–ä»»ä½•æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å…±äº«ã€‚å¦‚æœä¸¤ä¸ªç¨‹åºåŒæ—¶æ‰“å¼€ç›¸åŒçš„æ–‡ä»¶ï¼Œå°†å¾—åˆ°ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ã€‚å¦‚æœä»–ä»¬æ‰§è¡Œæ–‡ä»¶å†™å…¥æ“ä½œï¼Œä»–ä»¬å°†æ“ä½œæ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä¸ä¼šå‘ç”Ÿå†²çªï¼Œå†™å®Œä¹‹åé€€å‡ºã€‚ä»–ä»¬çš„æ•°æ®ä¸ä¼šäº’ç›¸äº¤ç»‡åœ¨ä¸€èµ·çš„ï¼Œä½†ä¼šäº’ç›¸çš„å½¼æ­¤è¦†ç›– (åå†™å®Œçš„å†…å®¹è¦†ç›–å‰é¢å†™çš„å†…å®¹)ï¼Œä¸¤ä¸ªç¨‹åºæ¥è¯»å–å’Œå†™å…¥çš„æ–‡ä»¶ä½ç½®çœ‹ä¼¼ä¸€æ ·ä½†æ˜¯æœ‰å„è‡ªä¸åŒæ‹·è´æ‰€ä»¥ä¸ä¼šå‘ç”Ÿäº¤ç»‡ã€‚å¦‚æœopenè°ƒç”¨æœªèƒ½è¿”å›1ï¼Œåˆ™å°†å…¨å±€å˜é‡errnoè®¾ç½®ä¸ºæŒ‡ç¤ºå¤±è´¥çš„åŸå› ã€‚\né€šè¿‡ç³»ç»Ÿè°ƒç”¨ioctlå‡½æ•°è·å¾—å¸§è®¾å¤‡ç›¸å…³ä¿¡æ¯ é€šè¿‡é¡¿ç¼“å†²æ–‡ä»¶æè¿°ç¬¦ï¼Œå±å¹•çš„åˆ†è¾¨ç‡ã€é¢œè‰²æ·±åº¦ç­‰ä¿¡æ¯å¯ä»¥è¢«è·å¾—ï¼Œå¸§ç¼“å†²é©±åŠ¨ä¸­å­˜æ”¾äº†è¿™äº›å¯¹åº”çš„ä¿¡æ¯ï¼Œå¿…é¡»ä½¿ç”¨ Linux ç³»ç»Ÿè°ƒç”¨ioctlé¦–å…ˆå°†å¸§ç¼“å†²çš„æ–‡ä»¶æè¿°ç¬¦å’Œfb_var_screeninfo ç»“æ„ä½“å¯¹åº”èµ·æ¥ã€‚\nç»“æ„ä½“fb_var_screeninfoåŒ…å«ä»¥ä¸‹ä¸‰ä¸ªé‡è¦æ•°æ®ç»“æ„ï¼š\nå±å¹•çš„ x æ–¹å‘åˆ†è¾¨ç‡ï¼Œåƒç´ ä½œä¸ºå•ä½ã€‚ å±å¹•çš„ Y æ–¹å‘åˆ†è¾¨ç‡ï¼Œåƒç´ ä½œä¸ºå•ä½ã€‚ å±å¹•çš„åƒç´ é¢œè‰²æ·±åº¦ï¼Œæ¯ä¸ªåƒç´ ç”¨å¤šå°‘æ¯”ç‰¹æ•°è¡¨ç¤ºã€‚ ioctlå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\nextern int ioctl (int __fd, unsigned long int __request, ...) __THROW; ioctlè°ƒç”¨å®ç°è®¿é—®è®¾å¤‡é©±åŠ¨å„ç§å„æ ·çš„é…ç½®ä¿¡æ¯åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ§åˆ¶è®¾å¤‡çš„è¡Œä¸ºå’Œé…ç½®åº•å±‚æœåŠ¡æ¥å£çš„é©±åŠ¨å‡½æ•°ï¼Œå„ç§è®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œä¾‹å¦‚å¥—æ¥å­—å’Œç³»ç»Ÿç»ˆç«¯ï¼Œè¿˜æœ‰ç£å¸¦æœºéƒ½æœ‰ioctlå‘½ä»¤å¯ä»¥æ”¯æŒã€‚\n__fdï¼šioctlå‘½ä»¤ä¸­æ˜¯è¯¥å¸§ç¼“å†²çš„æ–‡ä»¶æè¿°ç¬¦ï¼› __requestï¼šioctlå‡½æ•°å°†è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå®ç°å‚æ•°ç»™å®šçš„å¯¹è±¡æè¿°ç¬¦ä¸­æŒ‡å®šçš„å‡½æ•°æ“ä½œï¼Œå„ç§è®¾å¤‡æ”¯æŒçš„åŠŸèƒ½æ˜¯æœ‰å·®å¼‚çš„ FBIOGET_VSCREENINFOå‘½ä»¤å­—è¿”å›ä¸Framebufferæœ‰å…³çš„å›ºå®šçš„ä¿¡æ¯ï¼› FBIOGET_VSCREENINFOå‘½ä»¤å­—è¿”å›ä¸ Framebuffer æœ‰å…³çš„å¯å˜çš„ä¿¡æ¯ï¼› ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆç”¨æ¥æŒ‡å‘ç»“æ„ä½“fb_var_screeninfoã€‚ æœ€åä½¿ç”¨è€…å¯ä»¥é€šè¿‡ç»“æ„ä½“fb_var_screeninfoæ¥è·å¾—å±å¹•çš„åˆ†è¾¨ç‡å’Œé¢œè‰²ä½æ·±å’Œå…¶ä»–é‡è¦çš„å±å¹•ä¿¡æ¯ã€‚æ ¹æ®è¿™äº›ä¿¡æ¯å¯ä»¥è®¡ç®—å±å¹•ç¼“å†²åŒºçš„å¤§å°ï¼šå±å¹•ç¼“å†²åŒºå¤§å° (ä»¥å­—èŠ‚ä¸ºå•ä½) = å±å¹•å®½åº¦xé«˜åº¦xå±å¹•é¢œè‰²æ·±åº¦/8\nå¸§ç¼“å†²æ˜ å°„ åœ¨è¿›è¡Œå¸§ç¼“å†²çš„MMAPæ˜ å°„ä¹‹å‰ï¼Œè¦å…ˆå¾—åˆ°å¸§ç¼“å†²æ–‡ä»¶æè¿°ç¬¦ï¼Œæ‰èƒ½åƒå±å¹•ä¸Šé¢æ˜¾ç¤ºï¼Œå¿…é¡»é¦–å…ˆå°†ç¼“å†²åŒºçš„å†…æ ¸åœ°å€æ˜ å°„æ˜ å°„åˆ°ç”¨æˆ·åœ°å€ç©ºé—´ã€‚Linux ç³»ç»Ÿå°†ä½¿ç”¨MMAPç³»ç»Ÿè°ƒç”¨å®ŒæˆåŠŸèƒ½ï¼ŒMMAPå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\nextern void *mmap (void *__addr, size_t __len, int __prot, int __flags, int __fd, __off_t __offset) __THROW; __addrï¼šè¿”å›ä¸€ä¸ªæŒ‡å‘mmapå‡½æ•°çš„å†…å­˜åŒºåŸŸçš„æŒ‡é’ˆï¼Œä¸å†…å®¹ç›¸å…³çš„æ–‡ä»¶æŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆå¯ä»¥è®¿é—®å¸§ç¼“å†²åŒºçš„å†…å­˜åŒºåŸŸã€‚\n__lenï¼šå¯ä»¥è¯·æ±‚ä½¿ç”¨ç‰¹å®šå†…å­˜åœ°å€ï¼Œé€šè¿‡è®¾ç½®åœ°å€å‚æ•°ï¼Œå¦‚æœå€¼ä¸º0ï¼Œå°†è‡ªåŠ¨åˆ†é…æŒ‡é’ˆï¼Œè¿™æ˜¯æ¨èçš„åšæ³•ï¼Œå¦åˆ™ä¼šé™ä½ç¨‹åºçš„å¯ç§»æ¤æ€§ï¼Œå› ä¸ºä¸åŒçš„ç³»ç»Ÿå¯ç”¨çš„åœ°å€èŒƒå›´æ˜¯ä¸ä¸€æ ·çš„ã€‚\n__protï¼šè®¾ç½®å†…å­˜è®¿é—®çš„æƒé™è®¾å®šï¼Œé€šè¿‡ç«¯å£ç›¸å…³çš„å‚æ•°å®šä¹‰ï¼Œä½çš„å®šä¹‰å€¼å¦‚ä¸‹ï¼š\nPORT_EXEC:å…è®¸å†…å­˜æ®µçš„æ‰§è¡Œã€‚ PORT_NONE:æ— æ³•è®¿é—®å†…å­˜æ®µã€‚ PORT_READ:å…è®¸è¯»å–å†…å­˜æ®µã€‚ PORT_WRITE:å…è®¸ç¼–å†™å†…å­˜æ®µã€‚ __flagsï¼šæ”¹å˜æ§åˆ¶å‚æ•°æ ‡å¿—ï¼Œèƒ½å¤Ÿå½±å“è¯¥å†…å­˜æ®µçš„ä½œç”¨åŸŸï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nMAP_FIXED:å†…å­˜æ®µå¿…é¡»ä½äºaddrä¸­æŒ‡å®šçš„åœ°å€ã€‚ MAP_SHARED:å†…å­˜çš„ä¿®æ”¹ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ MAP_PRIVATE:å†…å­˜æ®µæ˜¯ç§äººçš„ï¼Œå˜åŒ–ä»…åœ¨æœ¬åœ°èŒƒå›´å†…æœ‰æ•ˆã€‚ __fdï¼šæ˜¯é€šè¿‡ä¸€ä¸ªopenè°ƒç”¨å¾—åˆ°çš„è®¿é—®æ–‡ä»¶çš„æè¿°ç¬¦ã€‚\noffsetï¼šç”¨äºæŒ‡å®šè®¿é—®æ•°æ®çš„å¼€å§‹åç§»é‡åœ¨å†…å­˜æ®µä¸­ï¼Œå’Œè®¿é—®æ™®é€šæ–‡ä»¶ä½¿ç”¨æ–¹å¼æ˜¯ç›¸åŒçš„ï¼Œå†æŒ‡å®šæ–‡ä»¶æè¿°ç¬¦å‚æ•°ï¼Œä»¥åŠè®¿é—®çš„æ•°æ®é•¿åº¦å‚æ•°å³å¯ã€‚\nè¯»å†™å¸§ç¼“å†² MMAPè¿”å›çš„æŒ‡é’ˆï¼Œå¯ä»¥è®¿é—®åˆ°å¸§ç¼“å†²å†…å­˜åŒºï¼Œå¯ä»¥å®šä½åˆ°å±å¹•ç¼“å†²åŒºå…·ä½“ä¸ºæ¯ä¸ªæ˜¾ç¤ºåƒç´ çš„ä½ç½®ï¼Œé€šè¿‡è¯»å‡½æ•°è°ƒç”¨è¯»å–å¯¹åº”çš„ä½ç½®æ•°æ®åœ¨å¸§ç¼“å†²å†…å­˜ä¸­ï¼Œç›¸åå†™æ“ä½œå¯¹åº”äºå†…å­˜çš„å†™å…¥æ•°æ®å¯ä»¥æ˜¾ç¤ºå†…å®¹å†™åˆ°å±å¹•ä¸Šã€‚\nè§£é™¤å¸§ç¼“å†²æ˜ å°„ åœ¨ç»˜å›¾å®Œæˆåï¼Œå¸§ç¼“å†²æ–‡ä»¶æè¿°ç¬¦å¿…é¡»è¢«é‡Šæ”¾ä¹‹å‰ï¼Œè§£é™¤å¸§ç¼“å†²åŒºçš„åœ°å€æ˜ å°„ï¼Œä½¿ç”¨ Linux ç³»ç»Ÿè°ƒç”¨å®Œæˆmmapå‡½æ•°çš„é€†å‡½æ•°å®ç°ï¼Œå³æ˜¯munmapï¼Œå‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š\nextern int munmap (void *__addr, size_t __len) __THROW; addrå‚æ•°åº”è¯¥ä¸è°ƒç”¨MMAPæ—¶æŒ‡å®šçš„å‚æ•°å€¼ä¸€è‡´ï¼Œ lenå‚æ•°ä¹Ÿåº”è¯¥ä¸ä¹‹å‰è°ƒç”¨MMAPæ—¶æŒ‡å®šçš„lenå‚æ•°ä¿æŒä¸€è‡´ã€‚\nmmapè°ƒç”¨è¿”å›0æˆåŠŸï¼Œå¤±è´¥åˆ™è¿”å›1ï¼ŒåŒæ—¶å°†å…¨å±€å˜é‡ernoè®¾ç½®ä¸ºæŒ‡ç¤ºå¤±è´¥çš„åŸå› ã€‚\nè°ƒç”¨closeå…³é—­è®¾å¤‡ ä½¿ç”¨å¸§ç¼“å†²è®¾å¤‡åï¼Œåº”å…³é—­ç›¸åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä½¿ç”¨ Linux ç³»ç»Ÿæ ‡å‡†çš„å‡½æ•°å®Œæˆå…³é—­åŠŸèƒ½ï¼Œcloseå‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š\nextern int close (int __fd); closeçš„å‚æ•°å’Œåœ¨å¼€å§‹è°ƒç”¨openæ—¶æŒ‡å®šçš„å‚æ•°ä¸€è‡´ï¼Œæ–‡ä»¶æè¿°ç¬¦é‡Šæ”¾åå¯ä»¥é‡ç”¨ï¼Œç»“æŸè°ƒç”¨æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›1ã€‚\nå¸§ç¼“å†²å®ä¾‹ ä»¥ä¸‹ä»£ç æ‘˜è‡ªxianjimli/linux-framebuffer-tools: linux framebuffer toolï¼Œæ¼”ç¤ºäº†å¸§ç¼“å†²è®¾å¤‡çš„ä½¿ç”¨æµç¨‹ã€‚\nfb_info_t *linux_fb_open(const char *filename) { uint32_t size = 0; fb_info_t *fb = NULL; struct fb_fix_screeninfo fix; struct fb_var_screeninfo var; return_value_if_fail(filename != NULL, NULL); fb = (fb_info_t *)calloc(1, sizeof(fb_info_t)); return_value_if_fail(fb != NULL, NULL); // æ‰“å¼€å¸§ç¼“å†²è®¾å¤‡ï¼ŒO_RDWR è¯»å†™æ¨¡å¼ fb-\u0026gt;fd = open(filename, O_RDWR); if (fb-\u0026gt;fd \u0026lt; 0) { log_debug(\u0026#34;open %s failed(%d)\\n\u0026#34;, filename, errno); free(fb); return NULL; } // é€šè¿‡ç³»ç»Ÿè°ƒç”¨ ioctl å‡½æ•°è·å¾—å¸§è®¾å¤‡ç›¸å…³ä¿¡æ¯ // FBIOGET_FSCREENINFO å‘½ä»¤å­—è¿”å›ä¸ Framebuffer æœ‰å…³çš„å›ºå®šçš„ä¿¡æ¯ if (ioctl(fb-\u0026gt;fd, FBIOGET_FSCREENINFO, \u0026amp;fix) \u0026lt; 0) goto fail; //å‘½ä»¤å­—è¿”å›ä¸ Framebuffer æœ‰å…³çš„å¯å˜çš„ä¿¡æ¯ if (ioctl(fb-\u0026gt;fd, FBIOGET_VSCREENINFO, \u0026amp;var) \u0026lt; 0) goto fail; var.xoffset = 0; var.yoffset = 0; // æ˜¾ç¤º ioctl(fb-\u0026gt;fd, FBIOPAN_DISPLAY, \u0026amp;(var)); log_debug(\u0026#34;fb_info_t: %s\\n\u0026#34;, filename); log_debug(\u0026#34;fb_info_t: xres=%d yres=%d bits_per_pixel=%d mem_size=%d\\n\u0026#34;, var.xres, var.yres, var.bits_per_pixel, fb_size(fb)); log_debug(\u0026#34;fb_info_t: red(%d %d) green(%d %d) blue(%d %d)\\n\u0026#34;, var.red.offset, var.red.length, var.green.offset, var.green.length, var.blue.offset, var.blue.length); fb-\u0026gt;w = var.xres; fb-\u0026gt;h = var.yres; fb-\u0026gt;bpp = var.bits_per_pixel / 8; fb-\u0026gt;line_length = fix.line_length; size = fb_size(fb); // å¸§ç¼“å†²æ˜ å°„ // PROT_READ | PROT_WRITE:å¯è¯»å†™ // MAP_SHAREDï¼šå†…å­˜çš„ä¿®æ”¹ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ fb-\u0026gt;data = (uint8_t *)mmap(0, size, PROT_READ | PROT_WRITE, MAP_SHARED, fb-\u0026gt;fd, 0); if (fb-\u0026gt;data == MAP_FAILED) { log_debug(\u0026#34;map framebuffer failed.\\n\u0026#34;); goto fail; } log_debug(\u0026#34;line_length=%d mem_size=%d\\n\u0026#34;, fix.line_length, fb_size(fb)); log_debug(\u0026#34;xres_virtual =%d yres_virtual=%d xpanstep=%d ywrapstep=%d\\n\u0026#34;, var.xres_virtual, var.yres_virtual, fix.xpanstep, fix.ywrapstep); return fb; fail: log_debug(\u0026#34;%s is not a framebuffer.\\n\u0026#34;, filename); close(fb-\u0026gt;fd); free(fb); return NULL; } æ„Ÿå…´è¶£å¯ä»¥ä¸‹è½½æºç ç¼–è¯‘è¿è¡Œï¼Œå…¶ä¸­/bin/fbshowå¯ä»¥ä½¿ç”¨å¸§ç¼“å†²è®¾å¤‡æ˜¾ç¤ºå›¾ç‰‡ã€‚å›¾å½¢ç•Œé¢ä¸‹ç›´æ¥è¿è¡Œå¯èƒ½æç¤ºæ— æ³•è¿è¡Œï¼Œéœ€è¦Chrtl+Alt+F1åˆ‡æ¢åˆ°æ§åˆ¶å°æ¨¡å¼ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image LCD ä¸ Framebuffer çš„å…³ç³» \u003c!DOCTYPE html\u003e Responsive Image LCD æ§åˆ¶å™¨é¦–å…ˆé€šè¿‡ VDEN ä¿¡å·ï¼Œä½¿èƒ½ã€‚æ¥ä¸‹æ¥æ ¹æ® VCLK æ—¶é’Ÿä¿¡å·ï¼Œåœ¨åƒç´ ç‚¹ä¸Šâ€œå–·æ¶‚â€ä¸åŒçš„é¢œè‰²ï¼ˆæ‰“ä¸ªæ¯”æ–¹ï¼‰ï¼Œæ§åˆ¶å™¨æœ‰ VDï¼ˆvideo dataï¼‰ä¿¡å·ï¼Œä¼ é€ä¸åŒé¢œè‰²ä¿¡æ¯ã€‚æ¯æ¥ä¸€ä¸ªæ—¶é’Ÿä¿¡å·ï¼Œå°±å‘å³ç§»åŠ¨ä¸€ä¸ªåƒç´ ï¼Œæ ¹æ®è¡ŒåŒæ­¥ä¿¡å· HSYNCï¼Œå°±ä»æœ€å³è¾¹ç§»åŠ¨åˆ°æœ€å·¦è¾¹ã€‚å½“ç§»åŠ¨åˆ°å³ä¸‹è§’æ—¶æ ¹æ®å‚ç›´åŒæ­¥ä¿¡å· VSYNCã€‚\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸åŒé¢œè‰²çš„ä¿¡æ¯ä»å“ªé‡Œæ¥ï¼Ÿå°±æ˜¯ä»ä¸Šæ–‡ä»‹ç»çš„ Framebuffer ä¸­æ¥çš„ã€‚\nå¾ˆå¤šäººéƒ½ä¼šè¯´æ“çºµ LCD æ˜¾ç¤ºå°±æ˜¯æ“çºµ FrameBufferï¼Œè¡¨é¢ä¸Šæ¥çœ‹æ˜¯è¿™æ ·çš„ã€‚å®é™…ä¸Šæ˜¯ FrameBuffer å°±æ˜¯ Linux å†…æ ¸é©±åŠ¨ç”³è¯·çš„ä¸€ç‰‡å†…å­˜ç©ºé—´ï¼Œç„¶å LCD å†…æœ‰ä¸€ç‰‡ sramï¼ŒCPU å†…éƒ¨æœ‰ä¸ª LCD æ§åˆ¶å™¨ï¼Œå®ƒæœ‰ä¸ªå•ç‹¬çš„ dma ç”¨æ¥å°† FrameBuffer ä¸­çš„æ•°æ®æ‹·è´åˆ° LCD çš„ sram ä¸­å» æ‹·è´åˆ° LCD çš„ sram ä¸­çš„æ•°æ®å°±ä¼šæ˜¾ç¤ºåœ¨ LCD ä¸Šï¼ŒLCD é©±åŠ¨å’Œ FrameBuffer é©±åŠ¨æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œå®ƒåªæ˜¯é©±åŠ¨ LCD æ­£å¸¸å·¥ä½œçš„ï¼Œæ¯”å¦‚æœ‰ä¿¡å·ä¼ è¿‡æ¥ï¼Œé‚£ä¹ˆ LCD é©±åŠ¨è´Ÿè´£æŠŠä¿¡å·è½¬æˆæ˜¾ç¤ºå±ä¸Šçš„å†…å®¹ï¼Œè‡³äºä»€ä¹ˆå†…å®¹è¿™å°±æ˜¯åº”ç”¨å±‚è¦å¤„ç†çš„ã€‚\né™æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆStatic Random-Access Memoryï¼ŒSRAMï¼‰æ˜¯éšæœºå­˜å–å­˜å‚¨å™¨çš„ä¸€ç§ã€‚æ‰€è°“çš„â€œé™æ€â€ï¼Œæ˜¯æŒ‡è¿™ç§å­˜å‚¨å™¨åªè¦ä¿æŒé€šç”µï¼Œé‡Œé¢å‚¨å­˜çš„æ•°æ®å°±å¯ä»¥æ’å¸¸ä¿æŒã€‚ DMAï¼ˆDirect Memory Accessï¼‰ï¼Œç›´æ¥å†…å­˜è®¿é—®ã€‚ä½¿ç”¨ DMA çš„å¥½å¤„å°±æ˜¯å®ƒä¸éœ€è¦ CPU çš„å¹²é¢„è€Œç›´æ¥æœåŠ¡å¤–è®¾ï¼Œè¿™æ · CPU å°±å¯ä»¥å»å¤„ç†åˆ«çš„äº‹åŠ¡ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ•ˆç‡ã€‚\nReference Linux é©±åŠ¨ä¹‹ Framebuffer å­ç³»ç»Ÿ | é‡å­èŒƒå¼ Linux é©±åŠ¨å¼€å‘ï¼ˆ9ï¼‰â€”â€”- framebuffer é©±åŠ¨è¯¦è§£ | ç å†œå®¶å›­ åµŒå…¥å¼ç³»ç»Ÿä¸­å¸§ç¼“å†²æ˜¾ç¤ºæ¨¡å—çš„è®¾è®¡ä¸å®ç° - ä¸­å›½çŸ¥ç½‘ research/framebuffer/fivechess/fivechess-0.1 at master Â· tsuibin/research äº”å­æ£‹ framebuffer ç‰ˆ - å°šç å›­ FrameBuffer é©±åŠ¨ç¨‹åºåˆ†æ_æ·±å…¥å‰–æ Android ç³»ç»Ÿ-CSDN åšå®¢_framebuffer xianjimli/linux-framebuffer-tools: linux framebuffer tool éŸ¦ä¸œå±±_åµŒå…¥å¼ Linux_ç¬¬ 2 æœŸ_Linux é«˜çº§é©±åŠ¨è§†é¢‘æ•™ç¨‹_å…è´¹è¯•çœ‹ç‰ˆ_å“”å“©å“”å“©_bilibili Linux LCD Frambuffer åŸºç¡€ä»‹ç»å’Œä½¿ç”¨ï¼ˆ1ï¼‰ - çŸ¥ä¹\n","permalink":"https://lifeislife.cn/posts/linux%E5%B8%A7%E7%BC%93%E5%86%B2/","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eFrameBuffer æ˜¯å†…æ ¸å½“ä¸­çš„ä¸€ç§é©±åŠ¨ç¨‹åºæ¥å£ã€‚Linux æ˜¯å·¥ä½œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ‰€ä»¥ç”¨æˆ·æ€è¿›ç¨‹æ˜¯æ— æ³•è±¡ DOS é‚£æ ·ä½¿ç”¨æ˜¾å¡ BIOS é‡Œæä¾›çš„ä¸­æ–­è°ƒç”¨æ¥å®ç°ç›´æ¥å†™å±ï¼ŒLinux æŠ½è±¡å‡º FrameBuffer è¿™ä¸ªè®¾å¤‡æ¥ä¾›ç”¨æˆ·æ€è¿›ç¨‹å®ç°ç›´æ¥å†™å±ã€‚\u003c/p\u003e","title":"Linux å¸§ç¼“å†²"},{"content":"ä¿ç•™ç°åœº linux\u0026gt; ssh -p 2221 xxx@gerrit.com xxx@gerrit.com: Permission denied(publickey) æ¢ç©¶åŸå›  æœ¬æ¬¡å‡ºé”™æ˜¯åœ¨æµ‹è¯•æ˜¯å¦èƒ½è¿æ¥ gerrit æ—¶ã€‚è¿æ¥ GitHub ä¹Ÿå¯èƒ½ä¼šå‡ºç°ã€‚åªè¦ç”¨åˆ° ssh åŠŸèƒ½çš„éƒ½æœ‰å¯èƒ½ã€‚\nå‡ºé”™çš„åŸå› ï¼š\nç½‘é¡µï¼ˆå¦‚ gerrit,githubï¼‰æ²¡æœ‰è®¾ç½®å…¬é’¥ï¼Œä¸€èˆ¬ä¸ºid_rsa.pubå†…å®¹ï¼› æœ¬åœ°ç”Ÿæˆäº†å¤šä¸ªå…¬ç§é’¥ï¼Œé…å¯¹é…é”™äº†ï¼› æœ¬åœ°æ²¡æœ‰é…ç½®å¥½gitï¼Œæ¯”å¦‚git configæ—¶ç”¨æˆ·åæˆ–è€…é‚®ç®±å¡«é”™ï¼› éœ€è¦å¼€å¯ ssh ä»£ç†ï¼› è§£å†³æ–¹æ³• ç”Ÿæˆå¯†é’¥cd ~/.ssh \u0026amp;\u0026amp; ssh-keygen å¤åˆ¶å…¬é’¥å†…å®¹ï¼Œæ·»åŠ åˆ°ç½‘é¡µä¸­githubæˆ–è€…gerritçš„è®¾ç½®é‡Œã€‚cat id_rsa.pub | xclip é…ç½®gitè´¦æˆ· git config --global user.name \u0026quot;bob\u0026quot; git config --global user.email bob@... ä»¥ä¸Šæ£€æŸ¥æ— è¯¯ï¼Œä»ç„¶æŠ¥é”™\nå¼€å¯sshä»£ç† eval $(ssh-agent -s) å°†ç§é’¥åŠ å…¥ä»£ç† ssh-add ~/.ssh/id_rsa ç™»é™†ç”¨æˆ·æ—¶å¯åŠ¨ ssh-agent å¦‚æœä¸å¹¸ä½ çš„é—®é¢˜å°±æ˜¯éœ€è¦å¼€å¯ssh-agentï¼Œé‚£ä¹ˆæ¯æ¬¡é‡å¯ç”µè„‘éƒ½éœ€è¦å¼€å¯ä¸€æ¬¡ã€‚è¿™ä¹Ÿæ˜¯ç›¸å½“éº»çƒ¦çš„ï¼Œå¯ä»¥é€šè¿‡å°†ä»¥ä¸‹é…ç½®æ·»åŠ åˆ°~/.bashrcä¸­ï¼Œè®© Linux å¯åŠ¨æ—¶è‡ªåŠ¨å¼€å¯ssh-agentã€‚\n# Add following code at the end of ~/.bashrc # Check if ~/.pid_ssh_agent exists. if [ -f ~/.pid_ssh_agent ]; then source ~/.pid_ssh_agent # Check process of ssh-agent still exists. TEST=$(ssh-add -l) if [ -z \u0026#34;$TEST\u0026#34; ]; then # Reinit if not. NEED_INIT=1 fi else NEED_INIT=1 # PID file doesm\u0026#39;t exist, reinit it. fi # Try start ssh-agent. if [ ! -z \u0026#34;$NEED_INIT\u0026#34; ]; then echo $(ssh-agent -s) | sed -e \u0026#39;s/echo[ A-Za-z0-9]*;//g\u0026#39; \u0026gt; ~/.pid_ssh_agent # save the PID to file. source ~/.pid_ssh_agent fi å‚è€ƒ ssh - Git: How to solve Permission denied (publickey) error when using Git? - Stack Overflow\nLinux ç™»é™†ç”¨æˆ·æ—¶å¯åŠ¨ ssh-agent å¹¶å¤ç”¨ - Fenying\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3git-ssh-permission-deniedpublickey/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003elinux\u0026gt; ssh -p \u003cspan class=\"m\"\u003e2221\u003c/span\u003e xxx@gerrit.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003exxx@gerrit.com: Permission denied\u003cspan class=\"o\"\u003e(\u003c/span\u003epublickey\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eæœ¬æ¬¡å‡ºé”™æ˜¯åœ¨æµ‹è¯•æ˜¯å¦èƒ½è¿æ¥ gerrit æ—¶ã€‚è¿æ¥ GitHub ä¹Ÿå¯èƒ½ä¼šå‡ºç°ã€‚åªè¦ç”¨åˆ° ssh åŠŸèƒ½çš„éƒ½æœ‰å¯èƒ½ã€‚\u003c/p\u003e\n\u003cp\u003eå‡ºé”™çš„åŸå› ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eç½‘é¡µï¼ˆå¦‚ gerrit,githubï¼‰æ²¡æœ‰è®¾ç½®å…¬é’¥ï¼Œä¸€èˆ¬ä¸º\u003ccode\u003eid_rsa.pub\u003c/code\u003eå†…å®¹ï¼›\u003c/li\u003e\n\u003cli\u003eæœ¬åœ°ç”Ÿæˆäº†å¤šä¸ªå…¬ç§é’¥ï¼Œé…å¯¹é…é”™äº†ï¼›\u003c/li\u003e\n\u003cli\u003eæœ¬åœ°æ²¡æœ‰é…ç½®å¥½\u003ccode\u003egit\u003c/code\u003eï¼Œæ¯”å¦‚\u003ccode\u003egit config\u003c/code\u003eæ—¶ç”¨æˆ·åæˆ–è€…é‚®ç®±å¡«é”™ï¼›\u003c/li\u003e\n\u003cli\u003eéœ€è¦å¼€å¯ ssh ä»£ç†ï¼›\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eç”Ÿæˆå¯†é’¥\u003ccode\u003ecd ~/.ssh \u0026amp;\u0026amp; ssh-keygen\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eå¤åˆ¶å…¬é’¥å†…å®¹ï¼Œæ·»åŠ åˆ°ç½‘é¡µä¸­\u003ccode\u003egithub\u003c/code\u003eæˆ–è€…\u003ccode\u003egerrit\u003c/code\u003eçš„è®¾ç½®é‡Œã€‚\u003ccode\u003ecat id_rsa.pub | xclip\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eé…ç½®\u003ccode\u003egit\u003c/code\u003eè´¦æˆ·\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003egit config --global user.name \u0026quot;bob\u0026quot;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egit config --global user.email bob@...\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä»¥ä¸Šæ£€æŸ¥æ— è¯¯ï¼Œä»ç„¶æŠ¥é”™\u003c/p\u003e","title":"è§£å†³ ssh permission denied(publickey)"},{"content":"å®‰è£… Node.js è¿‡ç¨‹ è¿›å…¥è¯¥ç½‘ç«™ä¸‹è½½ | Node.js ä¹Ÿå¯ä»¥è¿›å…¥è¯¥ç½‘ç«™ä¸‹è½½å†å²ç‰ˆæœ¬ï¼ŒPrevious Releases | Node.js\nè¿›å…¥ download ç›®å½•ï¼Œ\ncd download wget https://nodejs.org/dist/v10.16.3/node-v10.16.3-linux-x64.tar.xz -O nodejs.tar.xz è§£å‹\ntar -xvf node-v10.16.3-linux-x64.tar.xz æ”¹å Node.js\nmv node-v10.16.3-linux-x64 nodejs å°† npmï¼Œnode ä¸¤ä¸ªç¨‹åºå»ºç«‹è½¯è¿æ¥ï¼Œèƒ½å¤Ÿå…¨å±€å¯ç”¨\nln -s /download/nodejs/bin/npm /usr/local/bin/ ln -s /download/nodejs/bin/node /usr/local/bin/ æ£€æŸ¥æ˜¯å¦å®‰è£…\nnode -v npm -v å®‰è£… hexo è¿‡ç¨‹ npm i hexo-cli -g hexo -v å¦‚æœå‡ºç°å‘½ä»¤æœªæ‰¾åˆ°åˆ°é”™è¯¯ï¼Œè¯´æ˜ hexo è¿˜æœªåŠ å…¥å…¨å±€å˜é‡ã€‚ å°†ä¸‹é¢å‘½ä»¤åŠ å…¥\nvim ~/.bashrc export PATH=/usr/local/nodejs/lib/node_modules/hexo-cli/bin/:$PATH Reference Previous Releases | Node.js Linux å®‰è£… Node.js | F2E å‰ç«¯æŠ€æœ¯è®ºå› Linux ä¸‹å®‰è£… node åŠ npm - SegmentFault æ€å¦ è¶…è¯¦ç»† Hexo+Github åšå®¢æ­å»ºå°ç™½æ•™ç¨‹ - çŸ¥ä¹\n","permalink":"https://lifeislife.cn/posts/linux%E5%AE%89%E8%A3%85nodejs/","summary":"\u003ch2 id=\"å®‰è£…-nodejs-è¿‡ç¨‹\"\u003eå®‰è£… Node.js è¿‡ç¨‹\u003c/h2\u003e\n\u003cp\u003eè¿›å…¥è¯¥ç½‘ç«™\u003ca href=\"https://nodejs.org/zh-cn/download/\"\u003eä¸‹è½½ | Node.js\u003c/a\u003e\nä¹Ÿå¯ä»¥è¿›å…¥è¯¥ç½‘ç«™ä¸‹è½½å†å²ç‰ˆæœ¬ï¼Œ\u003ca href=\"https://nodejs.org/en/download/releases/\"\u003ePrevious Releases | Node.js\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eè¿›å…¥ download ç›®å½•ï¼Œ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-gdscript3\" data-lang=\"gdscript3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003ecd\u003c/span\u003e \u003cspan class=\"n\"\u003edownload\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003ewget\u003c/span\u003e \u003cspan class=\"n\"\u003ehttps\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"o\"\u003e//\u003c/span\u003e\u003cspan class=\"n\"\u003enodejs\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eorg\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003edist\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003ev10\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mf\"\u003e16.3\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003enode\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ev10\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mf\"\u003e16.3\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003elinux\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ex64\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etar\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003exz\u003c/span\u003e  \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eO\u003c/span\u003e \u003cspan class=\"n\"\u003enodejs\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etar\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003exz\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè§£å‹\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etar -xvf node-v10.16.3-linux-x64.tar.xz\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ”¹å Node.js\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emv node-v10.16.3-linux-x64 nodejs\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå°† npmï¼Œnode ä¸¤ä¸ªç¨‹åºå»ºç«‹è½¯è¿æ¥ï¼Œèƒ½å¤Ÿå…¨å±€å¯ç”¨\u003c/p\u003e","title":"Linux å®‰è£… Node.js ä»¥åŠ hexo"},{"content":"ç®€ä»‹ __attribute__ å…¶å®æ˜¯ä¸ªç¼–è¯‘å™¨æŒ‡ä»¤ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨å£°æ˜çš„ç‰¹æ€§ï¼Œæˆ–è€…è®©ç¼–è¯‘å™¨è¿›è¡Œæ›´å¤šçš„é”™è¯¯æ£€æŸ¥å’Œé«˜çº§ä¼˜åŒ–ã€‚\n__attribute__ å¯ä»¥è®¾ç½®å‡½æ•°å±æ€§ï¼ˆFunction Attributeï¼‰ã€å˜é‡å±æ€§ï¼ˆVariable Attributeï¼‰å’Œç±»å‹å±æ€§ï¼ˆType Attributeï¼‰ã€‚æ¯ä¸€ç±»éƒ½åŒ…å«æ•°åç§å±æ€§ï¼Œæœ¬æ–‡ä¸ä¼šé€ä¸€è§£é‡Šï¼ŒåªæŠ›ç –å¼•ç‰ï¼Œå®Œæ•´å±æ€§å¯ä»¥æŸ¥çœ‹é“¾æ¥ä¸­çš„å®˜æ–¹æ–‡æ¡£ã€‚\nä¸€ä¸ªå±æ€§è¯´æ˜ç¬¦çš„å½¢å¼æ˜¯__attribute__ ((attribute-list))ã€‚ä¸€ä¸ªå±æ€§åˆ—è¡¨æ˜¯ä¸€ä¸ªå¯èƒ½ä¸ºç©ºçš„é€—å·åˆ†éš”çš„å±æ€§åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå±æ€§éƒ½æ˜¯ä»¥ä¸‹çš„ä¸€ä¸ªã€‚\nå±æ€§ä¸ºç©ºã€‚ç©ºå±æ€§ä¼šè¢«å¿½ç•¥ã€‚ ä¸€ä¸ªå•è¯ï¼ˆå¯èƒ½æ˜¯æœªä½¿ç”¨çš„æ ‡è¯†ç¬¦ï¼Œä¹Ÿå¯èƒ½æ˜¯ const ç­‰ä¿ç•™å­—ï¼‰ã€‚ ä¸€ä¸ªå•è¯ï¼Œåé¢è·Ÿç€æ‹¬å·ä¸­çš„å±æ€§å‚æ•°ã€‚è¿™äº›å‚æ•°é‡‡ç”¨ä»¥ä¸‹å½¢å¼ä¹‹ä¸€ï¼š ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚ä¾‹å¦‚ï¼Œmodeå±æ€§ä½¿ç”¨è¿™ç§å½¢å¼ã€‚ ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œåè·Ÿä¸€ä¸ªé€—å·å’Œä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„éç©ºè¡¨è¾¾å¼åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œformatå±æ€§ä½¿ç”¨è¿™ç§å½¢å¼ã€‚ ä¸€ä¸ªå¯èƒ½æ˜¯ç©ºçš„é€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œformat_argå±æ€§ä½¿ç”¨è¿™ç§å½¢å¼ï¼Œè¯¥åˆ—è¡¨æ˜¯ä¸€ä¸ªå•ä¸€çš„æ•´æ•°å¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œaliaså±æ€§ä¹Ÿä½¿ç”¨è¿™ç§å½¢å¼ï¼Œè¯¥åˆ—è¡¨æ˜¯ä¸€ä¸ªå•ä¸€çš„å­—ç¬¦ä¸²å¸¸é‡ã€‚ ä½¿ç”¨æ–¹æ³• å‡½æ•°å±æ€§ alias è¯¥å±æ€§å¯ä»¥è®¾ç½®å‡½æ•°çš„åˆ«åã€‚\nvoid __f() { printf(\u0026#34;__attribute__ test\\n\u0026#34;); }; void f() __attribute__((weak, alias(\u0026#34;__f\u0026#34;))); int main() { f(); return 0; } /*--- è¾“å‡º ---*/ //__attribute__ test å‡½æ•°f()çš„åˆ«åä¸º__f()ï¼Œè°ƒç”¨f()å³è°ƒç”¨__f()ã€‚\nalloc_size alloc_sizeå±æ€§ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå‡½æ•°çš„è¿”å›å€¼æŒ‡å‘å†…å­˜ï¼Œå…¶ä¸­çš„å¤§å°ç”±ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‡½æ•°å‚æ•°ç»™å‡ºã€‚GCC ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥æé«˜__builtin_object_sizeçš„æ­£ç¡®æ€§ã€‚\nalloc_sizeåé¢å¯ä»¥è·Ÿä¸€åˆ°äºŒä¸ªå‚æ•°ï¼Œalloc_size åé¢è·Ÿçš„å‚æ•°æ˜¯æŒ‡å®šä½¿ç”¨å‡½æ•°çš„ç¬¬å‡ ä¸ªå‚æ•°ã€‚\nå‡½æ•°çš„å‚æ•°çš„ä¸ªæ•°åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆ alloc_size çš„å‚æ•°åªèƒ½æ˜¯ 1ã€‚é€šè¿‡__builtin_object_size è·å–çš„å€¼ å°±æ˜¯ä¼ å…¥çš„å‚æ•°å€¼ã€‚å¦‚å›¾ï¼Œæˆ‘ä»¬ç»™å‡½æ•°my_malloc ä¼ å…¥çš„å€¼æ˜¯100 ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šè¿‡__builtin_object_size è·å–çš„å€¼å°±æ˜¯100ã€‚\nå‡½æ•°çš„å‚æ•°çš„ä¸ªæ•°å¤šä½™ä¸¤ä¸ªï¼Œé‚£ä¹ˆalloc_size çš„æœ€å¤šå¯ä»¥æŒ‡å®šä¸¤ä¸ªå‚æ•°ã€‚ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œ__builtin_object_sizeçš„å€¼æ˜¯è¿™ä¸¤ä¸ªå‚æ•°çš„ä¹˜ç§¯ã€‚ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œ__builtin_object_sizeçš„å€¼å°±æ˜¯è¿™ä¸ªå‚æ•°çš„å€¼ã€‚å¦‚å›¾ï¼Œmy_callocdå‡½æ•°æŒ‡å®šçš„å‚æ•°æ˜¯alloc_size(2,3)ï¼Œé€šè¿‡__builtin_object_sizeè·å–çš„å€¼å°±æ˜¯my_callocdä¼ å…¥çš„ç¬¬äºŒå’Œä¸‰ä¸ªå‚æ•°çš„ä¹˜ç§¯ï¼ˆ2*3=6ï¼‰ã€‚\nvoid *my_calloc(int a) __attribute__((alloc_size(1))); void *my_realloc(int a, int b, int c) __attribute__((alloc_size(2, 3))); void *my_calloc(int a) { return NULL; } void *my_realloc(int a, int b, int c) { return NULL; } int main() { void *const p = my_calloc(100); printf(\u0026#34;size : %ld\\n\u0026#34;, __builtin_object_size(p, 0)); void *const a = my_realloc(1, 2, 3); printf(\u0026#34;size : %ld\\n\u0026#34;, __builtin_object_size(a, 1)); return 0; } /*--- è¾“å‡º ---*/ //100 //6 constructor (priority) / destructor (priority) constructorå±æ€§ä½¿è¯¥å‡½æ•°åœ¨æ‰§è¡Œè¿›å…¥main()ä¹‹å‰è¢«è‡ªåŠ¨è°ƒç”¨ã€‚åŒæ ·åœ°ï¼Œdestructorå±æ€§ä½¿å‡½æ•°åœ¨main()å®Œæˆåæˆ–exit()è¢«è°ƒç”¨åè¢«è‡ªåŠ¨è°ƒç”¨ã€‚å…·æœ‰è¿™äº›å±æ€§çš„å‡½æ•°å¯¹äºåˆå§‹åŒ–å°†åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­éšå«ä½¿ç”¨çš„æ•°æ®éå¸¸æœ‰ç”¨ã€‚\nconstructor å’Œ +load éƒ½æ˜¯åœ¨ main å‡½æ•°æ‰§è¡Œå‰è°ƒç”¨ï¼Œä½† +load æ¯” constructor æ›´åŠ æ—©ä¸€ä¸¢ä¸¢ï¼Œå› ä¸º dyldï¼ˆåŠ¨æ€é“¾æ¥å™¨ï¼Œç¨‹åºçš„æœ€åˆèµ·ç‚¹ï¼‰åœ¨åŠ è½½ imageï¼ˆå¯ä»¥ç†è§£æˆ Mach-O æ–‡ä»¶ï¼‰æ—¶ä¼šå…ˆé€šçŸ¥ objc runtime å»åŠ è½½å…¶ä¸­æ‰€æœ‰çš„ç±»ï¼Œæ¯åŠ è½½ä¸€ä¸ªç±»æ—¶ï¼Œå®ƒçš„ +load éšä¹‹è°ƒç”¨ï¼Œå…¨éƒ¨åŠ è½½å®Œæˆåï¼Œdyld æ‰ä¼šè°ƒç”¨è¿™ä¸ª image ä¸­æ‰€æœ‰çš„ constructor æ–¹æ³•ã€‚\nè‹¥æœ‰å¤šä¸ª constructor ä¸”æƒ³æ§åˆ¶ä¼˜å…ˆçº§çš„è¯ï¼Œå¯ä»¥å†™æˆ attribute((constructor(101)))ï¼Œé‡Œé¢çš„æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œ1 ~ 100 ä¸ºç³»ç»Ÿä¿ç•™ã€‚\nå˜é‡å±æ€§ cleanup è¯¥å±æ€§åœ¨å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œè°ƒç”¨æŒ‡å®šçš„ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå±æ€§åªèƒ½åº”ç”¨äºè‡ªåŠ¨å‡½æ•°èŒƒå›´çš„å˜é‡ï¼›å®ƒä¸èƒ½åº”ç”¨äºå‚æ•°æˆ–å…·æœ‰é™æ€å­˜å‚¨æœŸé™çš„å˜é‡ã€‚è¯¥å‡½æ•°å¿…é¡»æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæŒ‡å‘ä¸å˜é‡å…¼å®¹çš„ç±»å‹çš„æŒ‡é’ˆã€‚å‡½æ•°çš„è¿”å›å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰è¢«å¿½ç•¥ã€‚\n#include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;string.h\u0026gt; void test_cleanup(char **str) { printf(\u0026#34;after cleanup: %s\\n\u0026#34;, *str); free(*str); } int main(int argc, char **argv) { char *str __attribute__((__cleanup__(test_cleanup))) = NULL; str = (char *)malloc((sizeof(char)) * 100); strcpy(str, \u0026#34;test\u0026#34;); printf(\u0026#34;before cleanup : %s\\n\u0026#34;, str); return 0; } /*--- è¾“å‡º ---*/ //before cleanup : test //after cleanup: test ä½œç”¨åŸŸç»“æŸåŒ…æ‹¬å¤§æ‹¬å·ç»“æŸã€returnã€gotoã€breakã€exceptionç­‰å„ç§æƒ…å†µã€‚åœ¨ä¸Šé¢çš„å®éªŒä¸­ï¼Œmainå‡½æ•°è¿”å›æ ‡å¿—å˜é‡strä½œç”¨åŸŸç»“æŸï¼Œæ‰€ä»¥æœ€åæ‰æ‰“å°after cleanup: testã€‚\nç±»å‹å±æ€§ aligned (alignment) è¿™ä¸ªå±æ€§æŒ‡å®šäº†å‡½æ•°çš„æœ€å°å¯¹é½æ–¹å¼ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚å¯¹é½çš„å¤§å°åªèƒ½å¢åŠ ï¼Œä¸èƒ½å‡å°ã€‚\n#include \u0026lt;stdio.h\u0026gt; struct stu { char sex; int length; char name[2]; char value[15]; } __attribute__((aligned(1))); struct stu my_stu; int main() { printf(\u0026#34;%d \\n\u0026#34;, sizeof(my_stu)); printf(\u0026#34;%p %p,%p,%p \\n\u0026#34;, \u0026amp;my_stu, \u0026amp;my_stu.length, \u0026amp;my_stu.name, \u0026amp;my_stu.value); return 0; } /*--- __attribute__((aligned(1)));è¾“å‡º ---*/ //28 //0x55af2ba25020 0x55af2ba25024,0x55af2ba25028,0x55af2ba2502a /*--- __attribute__((aligned(4)));è¾“å‡º ---*/ //28 //0x556fbce54020 0x556fbce54024,0x556fbce54028,0x556fbce5402a /*--- __attribute__((aligned(8)));è¾“å‡º ---*/ //32 //0x5646e130e040 0x5646e130e044,0x5646e130e048,0x5646e130e04a ç”±ä»¥ä¸Šä»£ç å®éªŒç»“æœå‘ç°ï¼Œé»˜è®¤å¯¹é½ä»£ä¸‹ä¸º 4 å­—èŠ‚ï¼Œå°äºè¿™ä¸ªå€¼å°±è¢«å¿½ç•¥ï¼Œå¤§äº 4 å­—èŠ‚æ‰ç”Ÿæ•ˆã€‚\nRefernece attribute æœºåˆ¶ä½¿ç”¨ - ç®€ä¹¦ C è¯­è¨€å¤æ‚å£°æ˜è§£æ_wangweixaut061 çš„ä¸“æ -CSDN åšå®¢_c è¯­è¨€å¤æ‚å£°æ˜ attribute ä½ çŸ¥å¤šå°‘ï¼Ÿ\n","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80-attribute-%E4%BD%BF%E7%94%A8/","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e__attribute__\u003c/code\u003e å…¶å®æ˜¯ä¸ªç¼–è¯‘å™¨æŒ‡ä»¤ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨å£°æ˜çš„ç‰¹æ€§ï¼Œæˆ–è€…è®©ç¼–è¯‘å™¨è¿›è¡Œæ›´å¤šçš„é”™è¯¯æ£€æŸ¥å’Œé«˜çº§ä¼˜åŒ–ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e__attribute__\u003c/code\u003e å¯ä»¥è®¾ç½®\u003ca href=\"https://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Function-Attributes.html#Function-Attributes\"\u003eå‡½æ•°å±æ€§ï¼ˆFunction Attributeï¼‰\u003c/a\u003eã€\u003ca href=\"https://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Variable-Attributes.html#Variable-Attributes\"\u003eå˜é‡å±æ€§ï¼ˆVariable Attributeï¼‰\u003c/a\u003eå’Œ\u003ca href=\"https://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Type-Attributes.html#Type-Attributes\"\u003eç±»å‹å±æ€§ï¼ˆType Attributeï¼‰\u003c/a\u003eã€‚æ¯ä¸€ç±»éƒ½åŒ…å«æ•°åç§å±æ€§ï¼Œæœ¬æ–‡ä¸ä¼šé€ä¸€è§£é‡Šï¼ŒåªæŠ›ç –å¼•ç‰ï¼Œå®Œæ•´å±æ€§å¯ä»¥æŸ¥çœ‹é“¾æ¥ä¸­çš„å®˜æ–¹æ–‡æ¡£ã€‚\u003c/p\u003e","title":"C è¯­è¨€__attribute__ä½¿ç”¨"},{"content":"ç®€ä»‹ typedefä¸º C è¯­è¨€çš„å…³é”®å­—ï¼Œä½œç”¨æ˜¯ä¸ºä¸€ç§æ•°æ®ç±»å‹å®šä¹‰ä¸€ä¸ªæ–°åå­—ã€‚è¿™é‡Œçš„æ•°æ®ç±»å‹åŒ…æ‹¬å†…éƒ¨æ•°æ®ç±»å‹ï¼ˆint,char ç­‰ï¼‰å’Œè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼ˆstruct ç­‰ï¼‰ã€‚åœ¨ä½¿ç”¨è¯­æ³•ä¸Šç±»ä¼¼ä¸staticï¼Œexternç­‰ã€‚ typedef è¡Œä¸ºæœ‰ç‚¹åƒ #define å®ï¼Œç”¨å…¶å®é™…ç±»å‹æ›¿ä»£åŒä¹‰å­—ã€‚ä¸åŒç‚¹æ˜¯ typedefåœ¨ç¼–è¯‘æ—¶è¢«è§£é‡Šï¼Œå› æ­¤è®©ç¼–è¯‘å™¨æ¥åº”ä»˜è¶…è¶Šé¢„å¤„ç†å™¨èƒ½åŠ›çš„æ–‡æœ¬æ›¿æ¢ã€‚\nåŸºæœ¬ä½¿ç”¨æ–¹æ³• ç¤ºä¾‹ 1ï¼š\nint a; â€”â€”â€”â€” ä¼ ç»Ÿå˜é‡å£°æ˜è¡¨è¾¾å¼ int myint_t; â€”â€”â€”â€” ä½¿ç”¨æ–°çš„ç±»å‹åmyint_tæ›¿æ¢å˜é‡åa typedef int myint_t; â€”â€”â€”â€” åœ¨è¯­å¥å¼€å¤´åŠ ä¸Štypedefå…³é”®å­—ï¼Œmyint_tå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„æ–°ç±»å‹ ç¤ºä¾‹ 2ï¼š\nvoid (*pfunA)(int a); â€”â€”â€”â€” ä¼ ç»Ÿå˜é‡ï¼ˆå‡½æ•°ï¼‰å£°æ˜è¡¨è¾¾å¼ void (*PFUNA)(int a); â€”â€”â€”â€” ä½¿ç”¨æ–°çš„ç±»å‹åPFUNAæ›¿æ¢å˜é‡åpfunA typedef void (*PFUNA)(int a); â€”â€”â€”â€” åœ¨è¯­å¥å¼€å¤´åŠ ä¸Štypedefå…³é”®å­—ï¼ŒPFUNAå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„æ–°ç±»å‹ ä¿ƒä½¿æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„åŸå› ä¸æ˜¯å¦‚ä½•å»ç”¨typedefï¼Œè€Œæ˜¯åœ¨ä»£ç ä¸­çœ‹ä¸æ‡‚å¦‚ä½•ç®€åŒ–äº†ä¸€ä¸ªå¤æ‚å£°æ˜ã€‚æ¯”å¦‚ä¸Šæ–‡çš„\ntypedef void (*PFUNA)(int a); æœ¬ä»¥ä¸ºæ˜¯å°†voidç±»å‹æ›¿æ¢æˆäº†(*PFUNA)(int a)ï¼Œä½†æ˜¯è¯­æ³•ä¸Šè¿™æ˜æ˜¾è®²ä¸é€šå•Šã€‚ç°åœ¨æ˜ç™½äº†ï¼Œè¿™å°±æ˜¯å°†void (*pfunA)(int a);ç±»å‹åæ¢æˆäº†PFUNAã€‚ä»¥åå°±å¯ä»¥ç”¨PFUNAæ¥å£°æ˜å˜é‡ã€‚æ¯”å¦‚\nPFUNA arr[10] è¡¨ç¤ºå£°æ˜äº†ä¸€ä¸ªå¤§å°ä¸º10çš„æ•°ç»„ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯PFUNAç±»å‹ã€‚å°†PFUNAç±»å‹å±•å¼€å°±æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå‡½æ•°å‚æ•°ä¸ºintç±»å‹ï¼Œè¿”å›å€¼ä¸ºvoidç±»å‹ã€‚å®Œæ•´çš„å«ä¹‰å°±æ˜¯ï¼Œå£°æ˜äº†ä¸€ä¸ªå¤§å°ä¸º10çš„æ•°ç»„ï¼Œæ•°ç»„å…ƒç´ æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œå‡½æ•°å‚æ•°ä¸ºintç±»å‹ï¼Œè¿”å›å€¼ä¸ºvoidç±»å‹ã€‚\nä»£ç ç®€åŒ– typedefå¯ä»¥ä¸ºå¤æ‚çš„å£°æ˜å®šä¹‰ä¸€ä¸ªæ–°çš„ç®€å•çš„åˆ«åã€‚å…³äºå¤æ‚å£°æ˜ï¼Œå¯ä»¥é˜…è¯»è¿™ç¯‡C è¯­è¨€å¤æ‚å£°æ˜ã€‚ æ–¹æ³•æ˜¯ï¼šåœ¨åŸæ¥çš„å£°æ˜é‡Œé€æ­¥ç”¨åˆ«åæ›¿æ¢ä¸€éƒ¨åˆ†å¤æ‚å£°æ˜ï¼Œé€’å½’æ“ä½œï¼ŒæŠŠå¸¦å˜é‡åçš„éƒ¨åˆ†ç•™åˆ°æœ€åæ›¿æ¢ï¼Œå¾—åˆ°çš„å°±æ˜¯åŸå£°æ˜çš„æœ€ç®€åŒ–ç‰ˆã€‚ä¸¾ä¾‹ï¼š\n//å¤æ‚å£°æ˜ void (*b[10]) (void (*)()); å˜é‡åä¸ºbï¼Œå…ˆæ›¿æ¢å³è¾¹éƒ¨åˆ†æ‹¬å·é‡Œçš„ï¼ŒpFunParamä¸ºåˆ«å\ntypedef void (*pFunParam)(); å†æ›¿æ¢å·¦è¾¹çš„å˜é‡bï¼ŒpFunxä¸ºåˆ«åäºŒï¼š\ntypedef void (*pFunx)(pFunParam); ç®€åŒ–åçš„å£°æ˜ï¼š\npFunx b[10]; å‡å°‘é”™è¯¯ å®šä¹‰ä¸€ç§ç±»å‹çš„åˆ«åï¼Œè€Œä¸åªæ˜¯ç®€å•çš„å®æ›¿æ¢ã€‚å¯ä»¥ç”¨ä½œåŒæ—¶å£°æ˜æŒ‡é’ˆå‹çš„å¤šä¸ªå¯¹è±¡ã€‚æ¯”å¦‚ï¼š\n// è¿™å¤šæ•°ä¸ç¬¦åˆæˆ‘ä»¬çš„æ„å›¾ï¼Œå®ƒåªå£°æ˜äº†ä¸€ä¸ªæŒ‡å‘å­—ç¬¦å˜é‡çš„æŒ‡é’ˆï¼Œ // å’Œä¸€ä¸ªå­—ç¬¦å˜é‡ï¼› char* pa, pb; ä»¥ä¸‹åˆ™å¯è¡Œï¼š\ntypedef char* PCHAR; PCHAR pa, pb; è¿™ç§ç”¨æ³•å¾ˆæœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯char* pa, pbçš„å®šä¹‰ï¼Œåˆå­¦è€…å¾€å¾€è®¤ä¸ºæ˜¯å®šä¹‰äº†ä¸¤ä¸ªå­—ç¬¦å‹æŒ‡é’ˆï¼Œå…¶å®ä¸æ˜¯ï¼Œè€Œç”¨typedef char* PCHARå°±ä¸ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œå‡å°‘äº†é”™è¯¯çš„å‘ç”Ÿã€‚\nç›´è§‚ç®€æ´ å£°æ˜structæ–°å¯¹è±¡æ—¶ï¼Œå¿…é¡»è¦å¸¦ä¸Šstruct\nstruct tagPOINT1 { int x; int y; }; struct tagPOINT1 p1; åœ¨ç»å¸¸ä½¿ç”¨è¿™ä¸ªç»“æ„ä½“æ—¶ï¼Œå°±æ˜¾å¾—éº»çƒ¦ï¼Œå¯ä»¥ç”¨typedefç®€åŒ–\ntypedef struct tagPOINT { int x; int y; }POINT; å®šä¹‰å¹³å°æ— å…³çš„ç±»å‹ å½“è·¨å¹³å°æ—¶ï¼Œåªè¦æ”¹ä¸‹ typedef æœ¬èº«å°±è¡Œï¼Œä¸ç”¨å¯¹å…¶ä»–æºç åšä»»ä½•ä¿®æ”¹ã€‚\ntypedef unsigned int u_32t; æ©é¥°å¤åˆç±»å‹ typedef è¿˜å¯ä»¥æ©é¥°å¤åˆç±»å‹ï¼Œå¦‚æŒ‡é’ˆå’Œæ•°ç»„ã€‚\nä¾‹å¦‚ï¼Œä½ ä¸ç”¨åƒä¸‹é¢è¿™æ ·é‡å¤å®šä¹‰æœ‰ 81 ä¸ªå­—ç¬¦å…ƒç´ çš„æ•°ç»„ï¼š\nchar line[81]; å®šä¹‰ä¸€ä¸ª typedefï¼Œæ¯å½“è¦ç”¨åˆ°ç›¸åŒç±»å‹å’Œå¤§å°çš„æ•°ç»„æ—¶ï¼Œå¯ä»¥è¿™æ ·ï¼š\ntypedef char Line[81]; æ­¤æ—¶ Line ç±»å‹å³ä»£è¡¨äº†å…·æœ‰ 81 ä¸ªå…ƒç´ çš„å­—ç¬¦æ•°ç»„ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\nLine text, secondline; åŒæ ·ï¼Œå¯ä»¥è±¡ä¸‹é¢è¿™æ ·éšè—æŒ‡é’ˆè¯­æ³•ï¼š\ntypedef char * pstr; è¿™é‡Œå°†å¸¦æˆ‘ä»¬åˆ°è¾¾ç¬¬ä¸€ä¸ª typedef é™·é˜±ã€‚æ ‡å‡†å‡½æ•° strcmp()æœ‰ä¸¤ä¸ªconst char *ç±»å‹çš„å‚æ•°ã€‚å› æ­¤ï¼Œå®ƒå¯èƒ½ä¼šè¯¯å¯¼äººä»¬è±¡ä¸‹é¢è¿™æ ·å£°æ˜ mystrcmp()ï¼š\nint mystrcmp(const pstr, const pstr); ç”¨ GNU çš„ gcc å’Œ g++ç¼–è¯‘å™¨ï¼Œæ˜¯ä¼šå‡ºç°è­¦å‘Šçš„ï¼ŒæŒ‰ç…§é¡ºåºï¼Œconst pstrè¢«è§£é‡Šä¸ºchar* constï¼ˆä¸€ä¸ªæŒ‡å‘ char çš„æŒ‡é’ˆå¸¸é‡ï¼‰ï¼Œä¸¤è€…è¡¨è¾¾çš„å¹¶éåŒä¸€æ„æ€ã€‚ä¸ºäº†å¾—åˆ°æ­£ç¡®çš„ç±»å‹ï¼Œåº”å½“å¦‚ä¸‹å£°æ˜ï¼š\ntypedef const char* pstr; typedef å’Œå­˜å‚¨ç±»å…³é”®å­— typedef å°±åƒ autoï¼Œexternï¼Œmutableï¼Œstaticï¼Œå’Œ register ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªå­˜å‚¨ç±»å…³é”®å­—ã€‚è¿™å¹¶ä¸æ˜¯è¯´ typedef ä¼šçœŸæ­£å½±å“å¯¹è±¡çš„å­˜å‚¨ç‰¹æ€§ï¼›å®ƒåªæ˜¯è¯´åœ¨è¯­å¥æ„æˆä¸Šï¼Œtypedef å£°æ˜çœ‹èµ·æ¥è±¡ staticï¼Œextern ç­‰ç±»å‹çš„å˜é‡å£°æ˜ã€‚ä¸‹é¢å°†å¸¦åˆ°ç¬¬äºŒä¸ªé™·é˜±ï¼š\ntypedef register int FAST_COUNTER; // é”™è¯¯ ç¼–è¯‘é€šä¸è¿‡ã€‚é—®é¢˜å‡ºåœ¨ä½ ä¸èƒ½åœ¨å£°æ˜ä¸­æœ‰å¤šä¸ªå­˜å‚¨ç±»å…³é”®å­—ã€‚å› ä¸ºç¬¦å· typedef å·²ç»å æ®äº†å­˜å‚¨ç±»å…³é”®å­—çš„ä½ç½®ï¼Œåœ¨ typedef å£°æ˜ä¸­ä¸èƒ½ç”¨ registerï¼ˆæˆ–ä»»ä½•å…¶å®ƒå­˜å‚¨ç±»å…³é”®å­—ï¼‰ã€‚\nReference typedef ä»‹ç»_liitdar çš„åšå®¢-CSDN åšå®¢_typedef\nå…³äº typedef çš„ç”¨æ³•æ€»ç»“_IT æ°‘å·¥-CSDN åšå®¢_typedef\n","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80typedef%E7%94%A8%E6%B3%95/","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003etypedef\u003c/code\u003eä¸º C è¯­è¨€çš„å…³é”®å­—ï¼Œä½œç”¨æ˜¯ä¸ºä¸€ç§æ•°æ®ç±»å‹å®šä¹‰ä¸€ä¸ªæ–°åå­—ã€‚è¿™é‡Œçš„æ•°æ®ç±»å‹åŒ…æ‹¬å†…éƒ¨æ•°æ®ç±»å‹ï¼ˆint,char ç­‰ï¼‰å’Œè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼ˆstruct ç­‰ï¼‰ã€‚åœ¨ä½¿ç”¨è¯­æ³•ä¸Šç±»ä¼¼ä¸\u003ccode\u003estatic\u003c/code\u003eï¼Œ\u003ccode\u003eextern\u003c/code\u003eç­‰ã€‚\n\u003ccode\u003etypedef\u003c/code\u003e è¡Œä¸ºæœ‰ç‚¹åƒ \u003ccode\u003e#define\u003c/code\u003e å®ï¼Œç”¨å…¶å®é™…ç±»å‹æ›¿ä»£åŒä¹‰å­—ã€‚ä¸åŒç‚¹æ˜¯ \u003ccode\u003etypedef\u003c/code\u003eåœ¨ç¼–è¯‘æ—¶è¢«è§£é‡Šï¼Œå› æ­¤è®©ç¼–è¯‘å™¨æ¥åº”ä»˜è¶…è¶Šé¢„å¤„ç†å™¨èƒ½åŠ›çš„æ–‡æœ¬æ›¿æ¢ã€‚\u003c/p\u003e","title":"C è¯­è¨€ typedef ç”¨æ³•"},{"content":"æŠ˜è…¾èƒŒæ™¯ ä¸€äº›å¸¸ç”¨çš„ç¦»çº¿è½¯ä»¶åœ¨é‡æ–°å®‰è£…ï¼Œé‡è£…ç”µè„‘æˆ–è€…æ›´å¥½ç¯å¢ƒæ—¶ï¼Œè°ƒæ•™å¥½çš„é…ç½®æ€»éœ€è¦é‡æ–°è®¾ç½®ä¸€éï¼Œç”šæ˜¯éº»çƒ¦ã€‚ä½†æ˜¯è¿™äº›è®¾ç½®é€šå¸¸éƒ½ä¿å­˜åœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œåªè¦èƒ½å¤‡ä»½å¥½è¿™äº›é…ç½®æ–‡ä»¶ï¼Œä¸‹æ¬¡é‡è£…åè¦†ç›–å°±å¯ä»¥æ¢å¤æ‰€éœ€è®¾ç½®ã€‚\nç°åœ¨çš„é—®é¢˜å°±æ˜¯å¦‚ä½•å¤‡ä»½è¿™äº›é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€‰æ‹©å„ç±»ç½‘ç›˜ï¼Œç¡¬ç›˜ç­‰ç­‰ã€‚ä½†æ˜¯è¿™äº›å¤šå°‘éƒ½æœ‰ç‚¹ç‚®æ‰“èšŠå­ï¼Œå°é¢˜å¤§åšã€‚è€Œä¸”å®šæ—¶å¤‡ä»½ä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚æ—¢ç„¶é…ç½®æ–‡ä»¶éƒ½å¾ˆå°ï¼Œå…¶å®å°±æ˜¯ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‚£æœ‰ä¸ªä¸‡èƒ½å…è´¹å­˜å‚¨åœ° GitHub å°±æ´¾ä¸Šç”¨åœºäº†ã€‚æˆ‘ä»¬åªè¦æŠŠé…ç½®æ–‡ä»¶å®šæ—¶ push åˆ° GitHub å³å¯ï¼Œä»¥åéšæ—¶å¯ä»¥ clone ä¸‹æ¥ã€‚\né¦–å…ˆå»ºç«‹ä¸€ä¸ªç§å¯†ä»“åº“ï¼Œç”¨æ¥ä¸“é—¨å­˜æ”¾é…ç½®æ–‡ä»¶ã€‚å…¶æ¬¡é€šè¿‡æ‰¹å¤„ç†å‘½ä»¤ï¼Œå°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°ä»“åº“çš„æ–‡ä»¶å¤¹ä¸‹ã€‚æœ€åè®¾ç½®å®šæ—¶ä»»åŠ¡ã€‚\næŠ˜è…¾è¿‡ç¨‹ æ–°å»ºä»“åº“ è¿™ä¸€æ­¥ä¸ç”¨èµ˜è¿°äº†ï¼Œä¸»è¦å°±æ˜¯è¦å‹¾é€‰ç§å¯†ä»“åº“ï¼Œä¿æŠ¤éšç§ï¼Œä¸€äº›é…ç½®æ–‡ä»¶å¯èƒ½ä¼šåŒ…å«ä¸ªäººä¿¡æ¯ã€‚\næ‰¹å¤„ç† å°†ä»“åº“å…‹éš†åˆ°æœ¬åœ°åå°±æ˜¯ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™ä¸€æ­¥ä¸»è¦å°±æ˜¯å¦‚ä½•èƒ½æŠŠå®‰è£…åœ¨ä¸åŒä½ç½®çš„è½¯ä»¶çš„é…ç½®æ–‡ä»¶ï¼Œéƒ½æ±‡é›†åˆ°è¿™ä¸ªä»“åº“ä¸‹ã€‚é€šè¿‡æ‰¹å¤„ç†å‘½ä»¤å¯ä»¥å¿«é€Ÿï¼Œæ–¹ä¾¿çš„å®Œæˆã€‚\necho Start backup config files! # æ‰“å°è¿™å¥è¯ copy D:\\Tools\\MouseInc\\MouseInc.json D:\\Develop\\fxxk-config\\mouseinc # å°†å‰è€…å¤åˆ¶åˆ°åè€… copy D:\\Tools\\JD\\Config.ini D:\\Develop\\fxxk-config\\jd cd /d D:\\Develop\\fxxk-config # åˆ‡æ¢ç›®å½• # gitæ¨é€çš„ä¸€äº›å‘½ä»¤ git add . git commit -m \u0026#34;update\u0026#34; git push # é˜²æ­¢çª—å£é—ªé€€ pause ä¸€äº›å¸¸ç”¨å‘½ä»¤å‚è€ƒWindowDos æ‰¹å¤„ç†æŒ‡å¯¼ã€‚\nå®šæ—¶ä»»åŠ¡ æ§åˆ¶é¢æ¿-ç®¡ç†å·¥å…· - ä»»åŠ¡è®¡åˆ’ç¨‹åº \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/windows%E6%89%B9%E5%A4%84%E7%90%86%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/","summary":"\u003ch2 id=\"æŠ˜è…¾èƒŒæ™¯\"\u003eæŠ˜è…¾èƒŒæ™¯\u003c/h2\u003e\n\u003cp\u003eä¸€äº›å¸¸ç”¨çš„ç¦»çº¿è½¯ä»¶åœ¨é‡æ–°å®‰è£…ï¼Œé‡è£…ç”µè„‘æˆ–è€…æ›´å¥½ç¯å¢ƒæ—¶ï¼Œè°ƒæ•™å¥½çš„é…ç½®æ€»éœ€è¦é‡æ–°è®¾ç½®ä¸€éï¼Œç”šæ˜¯éº»çƒ¦ã€‚ä½†æ˜¯è¿™äº›è®¾ç½®é€šå¸¸éƒ½ä¿å­˜åœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œåªè¦èƒ½å¤‡ä»½å¥½è¿™äº›é…ç½®æ–‡ä»¶ï¼Œä¸‹æ¬¡é‡è£…åè¦†ç›–å°±å¯ä»¥æ¢å¤æ‰€éœ€è®¾ç½®ã€‚\u003c/p\u003e","title":"Windows æ‰¹å¤„ç†å®šæ—¶ä»»åŠ¡"},{"content":"ä¿ç•™ç°åœº aptå·¥å…·æŸåäº†ï¼Œåœ¨ä¿®å¤æ—¶ä½¿ç”¨äº†sudo apt-get install -få‘½ä»¤ï¼Œä¸­é€”ä¼šæç¤ºéœ€è¦å®‰è£…libpng12-0ï¼Œä½†æ˜¯å§‹ç»ˆæ— æ³•å®‰è£…ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ã€‚\nUnpacking libpng12-0:amd64 (1.2.50-2+deb8u3) ... dpkg: error processing archive libpng12-0_1.2.50-2+deb8u3_amd64.deb (--install): unable to install new version of \u0026#39;/usr/lib/ x86_64-linux-gnu/libpng12.so.0\u0026#39;: No such file or directory Errors were encountered while processing: libpng12-0_1.2.50-2 +deb8u3_amd64.deb æ¢ç©¶åŸå›  å…·ä½“åŸå› æœªçŸ¥ï¼Œç½‘ä¸Šç­”æ¡ˆä¼—è¯´çº·çº­ã€‚\nè§£å†³æ–¹æ³• è¿™ä¸ªé—®é¢˜é‡åˆ°çš„äººè¿˜æŒºå¤šçš„ï¼Œè§£å†³æ–¹æ³•ä¹Ÿå„ä¸ç›¸åŒï¼Œæˆ‘å…ˆè¯´æˆ‘è‡ªå·±æœ€ç»ˆè§£å†³çš„æ–¹æ³•ã€‚\næ–¹æ³•ä¸€ å°†è½¯ä»¶æºæ›´æ¢æˆä¸­ç§‘é™¢çš„æºï¼Œä½¿ç”¨ Linux è‡ªå¸¦çš„è½¯ä»¶å’Œæ›´æ–°å·¥å…·ï¼Œå…·ä½“æ–¹æ³•å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚æ›´æ¢å®Œä¹‹åå¯ä»¥é‡æ–°å°è¯•å®‰è£…ï¼Œæœ‰äººæ¢æºåå³å¯æˆåŠŸå®‰è£…ã€‚\nå¦‚æœæœªèƒ½å®‰è£…æˆåŠŸï¼Œå¯èƒ½æ›¾ç»æ‰‹åŠ¨æ·»åŠ è¿‡è½¯ä»¶æºï¼Œå°†å…¶åˆ é™¤ã€‚\n# å°†æ‰€æœ‰å†…å®¹æ³¨é‡Š vim /etc/apt/sources.list æ–¹æ³•äºŒ ä¸‹è½½å·²å®‰è£…çš„åº“æ–‡ä»¶libpng12.so.0ï¼Œå¯ä»¥ä»è¯¥é“¾æ¥ä¸‹è½½ã€‚\nå°†è¯¥æ–‡ä»¶å¤åˆ¶åˆ°å®ƒæœ¬è¯¥å®‰è£…çš„ä½ç½®ã€‚\nsudo cp libpng12.so.0 /usr/lib/x86_64-linux-gnu/ æ–¹æ³•ä¸‰ sudo add-apt-repository ppa:linuxuprising/libpng12 sudo apt update sudo apt install libpng12-0 ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3unable-to-install-libpng12-so-0/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eapt\u003c/code\u003eå·¥å…·æŸåäº†ï¼Œåœ¨ä¿®å¤æ—¶ä½¿ç”¨äº†\u003ccode\u003esudo apt-get install -f\u003c/code\u003eå‘½ä»¤ï¼Œä¸­é€”ä¼šæç¤ºéœ€è¦å®‰è£…\u003ccode\u003elibpng12-0\u003c/code\u003eï¼Œä½†æ˜¯å§‹ç»ˆæ— æ³•å®‰è£…ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eUnpacking libpng12-0:amd64 \u003cspan class=\"o\"\u003e(\u003c/span\u003e1.2.50-2+deb8u3\u003cspan class=\"o\"\u003e)\u003c/span\u003e ... dpkg: error \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eprocessing archive libpng12-0_1.2.50-2+deb8u3_amd64.deb \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e--install\u003cspan class=\"o\"\u003e)\u003c/span\u003e: unable to install new version of \u003cspan class=\"s1\"\u003e\u0026#39;/usr/lib/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"s1\"\u003ex86_64-linux-gnu/libpng12.so.0\u0026#39;\u003c/span\u003e: No such file or directory \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eErrors were encountered \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e processing: libpng12-0_1.2.50-2\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+deb8u3_amd64.deb\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eå…·ä½“åŸå› æœªçŸ¥ï¼Œç½‘ä¸Šç­”æ¡ˆä¼—è¯´çº·çº­ã€‚\u003c/p\u003e","title":"è§£å†³ unable to install libpng12.so.0"},{"content":"Trap ç®€ä»‹ æ§åˆ¶æµï¼ˆControl Flowï¼‰å’Œ Trap æ§åˆ¶æµï¼ˆControl Flowï¼‰ ä»ç»™å¤„ç†å™¨åŠ ç”µå¼€å§‹ï¼Œç›´åˆ°ä½ æ–­ç”µä¸ºæ­¢ï¼Œç¨‹åºè®¡æ•°å™¨å‡è®¾ä¸€ä¸ªå€¼çš„åºåˆ— $$a_0,a_1,\\dotsb,a_{n-1}$$ æ¯ä¸ª$a_k$éƒ½æ˜¯æŒ‡ä»¤çš„åœ°å€ï¼Œæ¯æ¬¡ä»$a_{k}$åˆ°$a_{k+1}$çš„è¿‡æ¸¡ç§°ä¸ºæ§åˆ¶è½¬ç§»ï¼Œè€Œè¿™æ ·çš„æ§åˆ¶è½¬ç§»åºåˆ—å«åšå¤„ç†å™¨çš„æ§åˆ¶æµã€‚ å¼‚å¸¸æ§åˆ¶æµï¼ˆExceptional Control Flow, ECFï¼‰ ç³»ç»Ÿä¹Ÿå¿…é¡»èƒ½å¤Ÿå¯¹ç³»ç»ŸçŠ¶æ€çš„å˜åŒ–åšå‡ºååº”ï¼Œè¿™äº›ç³»ç»ŸçŠ¶æ€ä¸æ˜¯è¢«å†…éƒ¨ç¨‹åºå˜é‡æ•è·çš„ï¼Œè€Œä¸”ä¹Ÿä¸ä¸€å®šè¦å’Œç¨‹åºçš„æ‰§è¡Œç›¸å…³ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç¡¬ä»¶å®šæ—¶å™¨å®šæœŸäº§ç”Ÿä¿¡å·ï¼Œè¿™ä¸ªäº‹ä»¶å¿…é¡»å¾—åˆ°å¤„ç†ã€‚åŒ…åˆ°è¾¾ç½‘ç»œé€‚é…å™¨åï¼Œå¿…é¡»å­˜æ”¾åœ¨å†…å­˜ä¸­ã€‚ç¨‹åºå‘ç£ç›˜è¯·æ±‚æ•°æ®ï¼Œç„¶åä¼‘çœ ï¼Œç›´åˆ°è¢«é€šçŸ¥è¯´æ•°æ®å·²å°±ç»ªã€‚ç°ä»£ç³»ç»Ÿé€šè¿‡ä½¿æ§åˆ¶æµå‘ç”Ÿçªå˜æ¥å¯¹è¿™äº›æƒ…å†µåšå‡ºååº”ã€‚æˆ‘ä»¬æŠŠè¿™äº›çªå˜ç§°ä¸ºå¼‚å¸¸æ§åˆ¶æµã€‚ exception interrupt RISC-V æŠŠ ECF ç»Ÿç§°ä¸º Trapã€‚\nRISC-V Trap å¤„ç†ä¸­æ¶‰åŠçš„å¯„å­˜å™¨ å¯„å­˜å™¨ å…¨ç§° ç”¨é€”è¯´æ˜ mtvec Machine Trap-Vector Base-Address å®ƒä¿å­˜å‘ç”Ÿå¼‚å¸¸æ—¶å¤„ç†å™¨éœ€è¦è·³è½¬åˆ°çš„åœ°å€ã€‚ mepc Machine Exception Program Counter å½“ trap å‘ç”Ÿæ—¶ï¼Œhart ä¼šå°†å‘ç”Ÿ trap æ‰€å¯¹åº”çš„æŒ‡ä»¤çš„åœ°å€å€¼ï¼ˆpcï¼‰ä¿å­˜åœ¨ mepc ä¸­ã€‚ mcause Machine Cause å½“ trap å‘ç”Ÿæ—¶ï¼Œhart ä¼šè®¾ç½®è¯¥å¯„å­˜å™¨é€šçŸ¥æˆ‘ä»¬ trap å‘ç”Ÿçš„åŸå› ã€‚ mtval Machine Trap Value å®ƒä¿å­˜äº† exception å‘ç”Ÿæ—¶çš„é™„åŠ ä¿¡æ¯ï¼šè­¬å¦‚è®¿é—®åœ°å€å‡ºé”™æ—¶çš„åœ°å€ä¿¡æ¯ã€æˆ–è€…æ‰§è¡Œéæ³•æŒ‡ä»¤æ—¶çš„æŒ‡ä»¤æœ¬èº«ï¼Œå¯¹äºå…¶ä»–å¼‚å¸¸ï¼Œå®ƒçš„å€¼ä¸º 0ã€‚ mstatus Machine Status ç”¨äºè·Ÿè¸ªå’Œæ§åˆ¶ hart çš„å½“å‰æ“ä½œçŠ¶æ€ï¼ˆç‰¹åˆ«åœ°ï¼ŒåŒ…æ‹¬å…³é—­å’Œæ‰“å¼€å…¨å±€ä¸­æ–­ï¼‰ã€‚ mscratch Machine Scratch Machine æ¨¡å¼ä¸‹ä¸“ç”¨å¯„å­˜å™¨ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰å…¶ç”¨æ³•ï¼Œè­¬å¦‚ç”¨è¯¥å¯„å­˜å™¨ä¿å­˜å½“å‰åœ¨ hart ä¸Šè¿è¡Œçš„ task çš„ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰çš„åœ°å€ã€‚ mtvecï¼ˆMachine Trap-Vector Base-Addressï¼‰ \u003c!DOCTYPE html\u003e Responsive Image WARL: Write Any Values, Read Legal Values\nBASEï¼štrap å…¥å£å‡½æ•°çš„åŸºåœ°å€ï¼Œå¿…é¡»ä¿è¯å››å­—èŠ‚å¯¹é½ï¼›\nMODEï¼šè¿›ä¸€æ­¥ç”¨äºæ§åˆ¶å…¥å£å‡½æ•°çš„åœ°å€é…ç½®æ–¹å¼ï¼š\nDirectï¼Œæ‰€æœ‰å¼‚å¸¸å’Œä¸­æ–­å‘ç”Ÿåï¼ŒPCéƒ½è·³è½¬åˆ°BASEæŒ‡å®šçš„åœ°å€å¤„ï¼›\n\u003c!DOCTYPE html\u003e Responsive Image é€šå¸¸ä¸­æ–­å¤„ç†å‡½æ•°å†…éƒ¨ä¼šæœ‰switch caseæ¡ä»¶è¯­å¥ï¼Œé€šè¿‡ä¸åŒçš„ä¸­æ–­é‡‡ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚\nreg_t trap_handler(reg_t epc, reg_t cause) { reg_t return_pc = epc; reg_t cause_code = cause \u0026amp; 0xfff; if (cause \u0026amp; 0x80000000) { /* Asynchronous trap - interrupt */ switch (cause_code) { case 3: uart_puts(\u0026#34;software interruption!\\n\u0026#34;); break; case 7: uart_puts(\u0026#34;timer interruption!\\n\u0026#34;); break; case 11: uart_puts(\u0026#34;external interruption!\\n\u0026#34;); break; default: uart_puts(\u0026#34;unknown async exception!\\n\u0026#34;); break; } } else { /* Synchronous trap - exception */ printf(\u0026#34;Sync exceptions!, code = %d\\n\u0026#34;, cause_code); panic(\u0026#34;OOPS! What can I do!\u0026#34;); //return_pc += 4; } return return_pc; } Vectoredï¼Œå¼‚å¸¸çš„å¤„ç†æ–¹å¼åŒä¸Šï¼Œä½†æ˜¯ä¸­æ–­çš„å…¥å£åœ°å€ä»¥æ•°ç»„æ–¹å¼æ’åˆ—ï¼›\ntrap_vector: # save context(registers). csrrw t6, mscratch, t6 # swap t6 and mscratch reg_save t6 # Save the actual t6 register, which we swapped into # mscratch mv t5, t6 # t5 points to the context of current task csrr t6, mscratch # read t6 back from mscratch sw t6, 120(t5) # save t6 with t5 as base # Restore the context pointer into mscratch csrw mscratch, t5 # call the C trap handler in trap.c csrr a0, mepc csrr a1, mcause call trap_handler # trap_handler will return the return address via a0. csrw mepc, a0 # restore context(registers). csrr t6, mscratch reg_restore t6 # return to whatever we were doing before trap. mret MODEå¯å–å€¼å¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image é‡‡ç”¨Vectoredæ–¹å¼æ•ˆç‡æ›´é«˜ã€‚\nmepcï¼ˆMachine Exception Program Counterï¼‰ \u003c!DOCTYPE html\u003e Responsive Image å½“trapå‘ç”Ÿæ—¶ï¼Œpcä¼šè¢«æ›¿æ¢ä¸º mtvecè®¾å®šçš„åœ°å€ï¼ŒåŒæ—¶hart ä¼šè®¾ç½®mepcä¸ºå½“å‰æŒ‡ä»¤æˆ–è€…ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼ˆå¤„ç†å¼‚å¸¸æ—¶ï¼Œmepc ä¸ºå½“å‰æŒ‡ä»¤çš„åœ°å€ï¼Œå¤„ç†ä¸­æ–­æ—¶ï¼Œmepc ä¸ºä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼‰ã€‚\nå½“æˆ‘ä»¬éœ€è¦é€€å‡ºtrap æ—¶å¯ä»¥è°ƒç”¨ç‰¹æ®Šçš„ mret æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ä¼šå°†mepcä¸­çš„å€¼æ¢å¤åˆ°pcä¸­ï¼ˆå®ç°è¿”å›çš„æ•ˆæœï¼‰ï¼›\nåœ¨å¤„ç† trap çš„ç¨‹åºä¸­æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ mepc çš„å€¼è¾¾åˆ°æ”¹å˜mret è¿”å›åœ°å€çš„ç›®çš„ã€‚\nmcauseï¼ˆMachine Causeï¼‰ \u003c!DOCTYPE html\u003e Responsive Image å½“ trap å‘ç”Ÿæ—¶ï¼Œhart ä¼šè®¾ç½®è¯¥å¯„å­˜å™¨é€šçŸ¥æˆ‘ä»¬ trap å‘ç”Ÿçš„åŸå› ã€‚\næœ€é«˜ä½ Interrupt ä¸º 1 æ—¶æ ‡è¯†äº†å½“å‰ trap ä¸ºinterruptï¼Œå¦åˆ™æ˜¯exceptionã€‚\nå‰©ä½™çš„ Exception Code ç”¨äºæ ‡è¯†å…·ä½“çš„interruptæˆ–è€…exception çš„ç§ç±»ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image mtvalï¼ˆMachine Trap Valueï¼‰ \u003c!DOCTYPE html\u003e Responsive Image å½“ trap å‘ç”Ÿæ—¶ï¼Œé™¤äº†é€šè¿‡mcause å¯ä»¥è·å–exceptionçš„ç§ç±» code å€¼å¤–ï¼Œhart è¿˜æä¾›äº† mtval æ¥æä¾›exception çš„å…¶ä»–ä¿¡æ¯æ¥è¾…åŠ©æˆ‘ä»¬æ‰§è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œã€‚\nå…·ä½“çš„è¾…åŠ©ä¿¡æ¯ç”±ç‰¹å®šçš„ç¡¬ä»¶å®ç°å®šä¹‰ï¼ŒRISC-V è§„èŒƒæ²¡æœ‰å®šä¹‰å…·ä½“çš„å€¼ã€‚ä½†è§„èŒƒå®šä¹‰äº†ä¸€äº›è¡Œä¸ºï¼Œè­¬å¦‚è®¿é—®åœ°å€å‡ºé”™æ—¶çš„åœ°å€ä¿¡æ¯ã€æˆ–è€…æ‰§è¡Œéæ³•æŒ‡ä»¤æ—¶çš„æŒ‡ä»¤æœ¬èº«ç­‰ã€‚\nmstatusï¼ˆMachine Statusï¼‰ \u003c!DOCTYPE html\u003e Responsive Image å¯„å­˜å™¨å„ä¸ªä½å¯ä»¥å¤§è‡´åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼Œå…¶ä¸­xå¯ä»¥ä¸ºU,S,Mã€‚è¡¨ç¤ºç”¨æˆ·æ¨¡å¼ä»¥åŠä¸¤ç§ç‰¹æƒæ¨¡å¼ã€‚\nxIEï¼ˆx=M/S/Uï¼‰: åˆ†åˆ«ç”¨äºæ‰“å¼€ï¼ˆ1ï¼‰æˆ–è€…å…³é—­ï¼ˆ0ï¼‰M/S/U æ¨¡å¼ä¸‹çš„å…¨å±€ä¸­æ–­ã€‚å½“ trap å‘ç”Ÿæ—¶ï¼Œhartä¼šè‡ªåŠ¨å°† xIE è®¾ç½®ä¸º 0ã€‚\nxPIEï¼ˆx=M/S/Uï¼‰:å½“ trap å‘ç”Ÿæ—¶ç”¨äºä¿å­˜ trap å‘ç”Ÿä¹‹å‰çš„ xIE å€¼ã€‚\nxPPï¼ˆx=M/Sï¼‰:å½“ trap å‘ç”Ÿæ—¶ç”¨äºä¿å­˜ trap å‘ç”Ÿä¹‹å‰çš„æƒé™çº§åˆ«å€¼ã€‚æ³¨æ„æ²¡æœ‰ UPPã€‚å› ä¸ºå¼‚å¸¸åªä¼šä»ä½æƒé™å‘é«˜æƒé™è·³è½¬ï¼Œé€šå¸¸ä½æƒé™å¦‚useræ¨¡å¼ï¼Œä¼šè¢«ç½®äºä¸Šæ–¹ï¼Œé«˜æƒé™å¦‚å†…æ ¸ä¸€èˆ¬éƒ½ä¼šç”»åœ¨ä¸‹æ–¹ï¼Œè¿™ä¹Ÿè§£é‡Šäº†å¼‚å¸¸ï¼Œä¸­æ–­å¤„ç†ä¸ºä»€ä¹ˆå«trapï¼Œå› ä¸ºæ˜¯å‘ä¸‹é™·å…¥çš„è¿‡ç¨‹ã€‚\nå…¶ä»–æ ‡å¿—ä½æ¶‰åŠå†…å­˜è®¿é—®æƒé™ã€è™šæ‹Ÿå†…å­˜æ§åˆ¶ç­‰ï¼Œæš‚ä¸è€ƒè™‘ã€‚\nTrap å¤„ç†æµç¨‹ ä¸»è¦ä¸º Exceptionï¼Œä¸‹ä¸€ç« è¯¦è§£ Interruptã€‚\nåˆå§‹åŒ– å°†trapçš„åŸºåœ°å€å†™å…¥å¯„å­˜å™¨ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image Top Half æŠŠ mstatus çš„ MIE å€¼å¤åˆ¶åˆ° MPIE ä¸­ï¼Œæ¸…é™¤ mstatusä¸­çš„ MIE æ ‡å¿—ä½ï¼Œæ•ˆæœæ˜¯ä¸­æ–­è¢«ç¦æ­¢ã€‚ è®¾ç½®mepcï¼ŒåŒæ—¶PCè¢«è®¾ç½®ä¸º mtvecã€‚ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºexceptionï¼Œ mepcæŒ‡å‘å¯¼è‡´å¼‚å¸¸çš„æŒ‡ä»¤ï¼›å¯¹äº interruptï¼Œå®ƒæŒ‡å‘è¢«ä¸­æ–­çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„ä½ç½®ã€‚ï¼‰ æ ¹æ® trap çš„ç§ç±»è®¾ç½® mcauseï¼Œå¹¶æ ¹æ®éœ€è¦ä¸ºmtvalè®¾ç½®é™„åŠ ä¿¡æ¯ã€‚ å°† trap å‘ç”Ÿä¹‹å‰çš„æƒé™æ¨¡å¼ä¿å­˜åœ¨ mstatus çš„ MPP åŸŸä¸­ï¼Œå†æŠŠhart æƒé™æ¨¡å¼æ›´æ”¹ä¸º Mï¼ˆä¹Ÿå°±æ˜¯è¯´æ— è®ºåœ¨ä»»ä½• Level ä¸‹è§¦å‘trapï¼Œhart é¦–å…ˆåˆ‡æ¢åˆ° Machine æ¨¡å¼ï¼‰ã€‚ Bottom Half ä¿å­˜ï¼ˆsaveï¼‰å½“å‰æ§åˆ¶æµçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆåˆ©ç”¨ mscratchï¼‰ï¼› è°ƒç”¨ C è¯­è¨€çš„ trap handler; ä» trap handler å‡½æ•°è¿”å›ï¼Œmepcçš„å€¼æœ‰å¯èƒ½éœ€è¦è°ƒæ•´ï¼› æ¢å¤ï¼ˆrestoreï¼‰ä¸Šä¸‹æ–‡çš„ä¿¡æ¯ï¼› æ‰§è¡ŒMRETæŒ‡ä»¤è¿”å›åˆ° trapä¹‹å‰çš„çŠ¶æ€ã€‚ trap_vector: # save context(registers). csrrw t6, mscratch, t6 # swap t6 and mscratch reg_save t6 # Save the actual t6 register, which we swapped into # mscratch mv t5, t6 # t5 points to the context of current task csrr t6, mscratch # read t6 back from mscratch sw t6, 120(t5) # save t6 with t5 as base # Restore the context pointer into mscratch csrw mscratch, t5 # call the C trap handler in trap.c csrr a0, mepc csrr a1, mcause call trap_handler # trap_handler will return the return address via a0. csrw mepc, a0 # restore context(registers). csrr t6, mscratch reg_restore t6 # return to whatever we were doing before trap. mret é€€å‡º trapï¼šç¼–ç¨‹è°ƒç”¨ MRET æŒ‡ä»¤ é’ˆå¯¹ä¸åŒæƒé™çº§åˆ«ä¸‹å¦‚ä½•é€€å‡º trap æœ‰å„è‡ªçš„è¿”å›æŒ‡ä»¤xRETï¼ˆx = M/S/Uï¼‰ã€‚ä»¥åœ¨ M æ¨¡å¼ä¸‹æ‰§è¡Œmret æŒ‡ä»¤ä¸ºä¾‹ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š\nå½“å‰ Hart çš„æƒé™çº§åˆ« = mstatus.MPPï¼›mstatus.MPP = Uï¼ˆå¦‚æœ hart ä¸æ”¯æŒ U åˆ™ä¸º Mï¼‰ mstatus.MIE = mstatus.MPIE; mstatus.MPIE = 1 pc = mepc ä¸­æ–­ ä¸­æ–­åˆ†ç±» æœ¬åœ°ï¼ˆLocalï¼‰ä¸­æ–­\nè½¯ä¸­æ–­software interrupt å®šæ—¶å™¨ä¸­æ–­ timer interrupt å…¨å±€ï¼ˆGlobalï¼‰ä¸­æ–­\nå¤–éƒ¨ä¸­æ–­ externel interrupt RISC-V ä¸­æ–­ç¼–ç¨‹ä¸­æ¶‰åŠçš„å¯„å­˜å™¨ å¯„å­˜å™¨ å…¨ç§° ç”¨é€”è¯´æ˜ mie Machine Interrupt Enable ç”¨äºè¿›ä¸€æ­¥æ§åˆ¶ï¼ˆæ‰“å¼€å’Œå…³é—­ï¼‰software interrupt/timer interrupt/external interrupt mip Machine Interrupt Pending å®ƒåˆ—å‡ºç›®å‰å·²å‘ç”Ÿç­‰å¾…å¤„ç†çš„ä¸­æ–­ã€‚ mie(Machine Interrupt Enable) \u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€ï¼ˆ1ï¼‰æˆ–è€…å…³é—­ï¼ˆ0ï¼‰M/S/U æ¨¡å¼ä¸‹å¯¹åº”çš„ External/Timer/Software ä¸­æ–­ã€‚\nmip(Machine Interrupt Pending) \u003c!DOCTYPE html\u003e Responsive Image è·å–å½“å‰ M/S/U æ¨¡å¼ä¸‹å¯¹åº”çš„ External/Timer/Software ä¸­æ–­æ˜¯å¦å‘ç”Ÿã€‚\nä¸­æ–­å¤„ç†æµç¨‹ ä¸­æ–­å¤„ç† æŠŠ mstatus çš„ MIE å€¼å¤åˆ¶åˆ° MPIE ä¸­ï¼Œæ¸…é™¤ mstatus ä¸­çš„ MIE æ ‡å¿—ä½ï¼Œæ•ˆæœæ˜¯ä¸­æ–­è¢«ç¦æ­¢ã€‚ å½“å‰çš„ PC çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€è¢«å¤åˆ¶åˆ° mepc ä¸­ï¼ŒåŒæ—¶ PC è¢«è®¾ç½®ä¸ºmtvecã€‚æ³¨æ„å¦‚æœæˆ‘ä»¬è®¾ç½® mtvec.MODE = vetcoredï¼ŒPC =mtvec.BASE + 4 Ã— exception-codeã€‚ æ ¹æ® interrupt çš„ç§ç±»è®¾ç½® mcauseï¼Œå¹¶æ ¹æ®éœ€è¦ä¸º mtval è®¾ç½®é™„åŠ ä¿¡æ¯ã€‚ å°† trap å‘ç”Ÿä¹‹å‰çš„æƒé™æ¨¡å¼ä¿å­˜åœ¨ mstatus çš„ MPP åŸŸä¸­ï¼Œå†æŠŠhart æƒé™æ¨¡å¼æ›´æ”¹ä¸º Mã€‚ é€€å‡ºä¸­æ–­ ä»¥åœ¨ M æ¨¡å¼ä¸‹æ‰§è¡Œ mret æŒ‡ä»¤ä¸ºä¾‹ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š\nå½“å‰ Hart çš„æƒé™çº§åˆ« = mstatus.MPP; mstatus.MPP= Uï¼ˆå¦‚æœ hart ä¸æ”¯æŒ U åˆ™ä¸º Mï¼‰ mstatus.MIE = mstatus.MPIE; mstatus.MPIE = 1 pc = mepc PLICï¼ˆPlatform-Level Interrupt Controllerï¼‰ PLIC ç®€ä»‹ HART åªèƒ½å¤„ç†ä¸€ä¸ªä¸­æ–­ï¼ŒPLIC ç›¸å½“äºä¸€ä¸ªæ§åˆ¶ä¸­å¿ƒï¼Œå®ƒé€šè¿‡ä¸­æ–­ç±»å‹ï¼Œä¼˜å…ˆçº§ç­‰ç­‰æ¥é€‰å‡ºä¸€ä¸ªéœ€è¦å¤„ç†çš„ä¸­æ–­ã€‚åè°ƒå¤šä¸ªä¸­æ–­ï¼ŒæœåŠ¡ä¸€ä¸ª HARTã€‚\n\u003c!DOCTYPE html\u003e Responsive Image enum { UART0_IRQ = 10, //Interrupt Source ID RTC_IRQ = 11, VIRTIO_IRQ = 1, /* 1 to 8 */ VIRTIO_COUNT = 8, PCIE_IRQ = 0x20, /* 32 to 35 */ VIRTIO_NDEV = 0x35 /* Arbitrary maximum number of interrupts */ }; Interrupt Source ID èŒƒå›´ï¼š1 ~ 53ï¼ˆ0x35ï¼‰ 0 é¢„ç•™ä¸ç”¨ PLICæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¤–è®¾ï¼ŒRISC-V è§„èŒƒè§„å®šï¼ŒPLIC çš„å¯„å­˜å™¨ç¼–å€é‡‡ç”¨å†…å­˜æ˜ å°„ï¼ˆmemory mapï¼‰æ–¹å¼ã€‚æ¯ä¸ªå¯„å­˜å™¨çš„å®½åº¦ä¸º 32-bitã€‚\nå…·ä½“å¯„å­˜å™¨ç¼–å€é‡‡ç”¨ base + offset çš„æ ¼å¼ï¼Œä¸” base ç”±å„ä¸ªç‰¹å®šplatform è‡ªå·±å®šä¹‰ã€‚é’ˆå¯¹ QEMU-virtï¼Œå…¶ PLIC çš„è®¾è®¡å‚è€ƒäº†FU540-C000ï¼Œbase ä¸º 0x0c000000ã€‚\nstatic const MemMapEntry virt_memmap[] = { [VIRT_DEBUG] = { 0x0, 0x100 }, [VIRT_MROM] = { 0x1000, 0xf000 }, [VIRT_TEST] = { 0x100000, 0x1000 }, [VIRT_RTC] = { 0x101000, 0x1000 }, [VIRT_CLINT] = { 0x2000000, 0x10000 }, [VIRT_ACLINT_SSWI] = { 0x2F00000, 0x4000 }, [VIRT_PCIE_PIO] = { 0x3000000, 0x10000 }, [VIRT_PLIC] = { 0xc000000, VIRT_PLIC_SIZE(VIRT_CPUS_MAX * 2) }, [VIRT_UART0] = { 0x10000000, 0x100 }, [VIRT_VIRTIO] = { 0x10001000, 0x1000 }, [VIRT_FW_CFG] = { 0x10100000, 0x18 }, [VIRT_FLASH] = { 0x20000000, 0x4000000 }, [VIRT_PCIE_ECAM] = { 0x30000000, 0x10000000 }, [VIRT_PCIE_MMIO] = { 0x40000000, 0x40000000 }, [VIRT_DRAM] = { 0x80000000, 0x0 }, }; PLIC ç¼–ç¨‹æ¥å£ - å¯„å­˜å™¨ Priority åŠŸèƒ½ï¼šè®¾ç½®æŸä¸€è·¯ä¸­æ–­æºçš„ä¼˜å…ˆçº§ å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + (interrupt-id) * 4\næ¯ä¸ª PLIC ä¸­æ–­æºå¯¹åº”ä¸€ä¸ªå¯„å­˜å™¨ï¼Œç”¨äºé…ç½®è¯¥ä¸­æ–­æºçš„ä¼˜å…ˆçº§ã€‚ QEMU-virt æ”¯æŒ 7 ä¸ªä¼˜å…ˆçº§ã€‚0 è¡¨ç¤ºå¯¹è¯¥ä¸­æ–­æºç¦ç”¨ä¸­æ–­ã€‚å…¶ä½™ä¼˜å…ˆçº§ï¼Œ1 æœ€ä½ï¼Œ7 æœ€é«˜ã€‚ å¦‚æœä¸¤ä¸ªä¸­æ–­æºä¼˜å…ˆçº§ç›¸åŒï¼Œåˆ™æ ¹æ®ä¸­æ–­æºçš„ ID å€¼è¿›ä¸€æ­¥åŒºåˆ†ä¼˜å…ˆçº§ï¼ŒID å€¼è¶Šå°çš„ä¼˜å…ˆçº§è¶Šé«˜ã€‚ Pending åŠŸèƒ½ï¼šç”¨äºæŒ‡ç¤ºæŸä¸€è·¯ä¸­æ–­æºæ˜¯å¦å‘ç”Ÿ å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x1000 + ((interrupt-id) / 32) * 4\næ¯ä¸ª PLIC åŒ…å« 2 ä¸ª 32 ä½çš„ Pending å¯„å­˜å™¨ï¼Œå› ä¸ºæ€»å…±æœ‰ 54 ä¸ªä¸­æ–­æºï¼Œæ¯ä¸€ä¸ª bit å¯¹åº”ä¸€ä¸ªä¸­æ–­æºï¼Œå¦‚æœä¸º 1 è¡¨ç¤ºè¯¥ä¸­æ–­æºä¸Šå‘ç”Ÿäº†ä¸­æ–­ï¼ˆè¿›å…¥Pending çŠ¶æ€ï¼‰ï¼Œæœ‰å¾… hart å¤„ç†ï¼Œå¦åˆ™è¡¨ç¤ºè¯¥ä¸­æ–­æºä¸Šå½“å‰æ— ä¸­æ–­å‘ç”Ÿã€‚ Pending å¯„å­˜å™¨ä¸­æ–­çš„ Pending çŠ¶æ€å¯ä»¥é€šè¿‡claim æ–¹å¼æ¸…é™¤ã€‚ ç¬¬ä¸€ä¸ª Pending å¯„å­˜å™¨çš„ç¬¬ 0 ä½å¯¹åº”ä¸å­˜åœ¨çš„ 0 å·ä¸­æ–­æºï¼Œå…¶å€¼æ°¸è¿œä¸º 0ã€‚ Enable åŠŸèƒ½ï¼šé’ˆå¯¹æŸä¸ª hart å¼€å¯æˆ–è€…å…³é—­æŸä¸€è·¯ä¸­æ–­æº å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x2000 + (hart) * 0x80\næ¯ä¸ª Hart æœ‰ 2 ä¸ª Enable å¯„å­˜å™¨ï¼ˆEnable1 å’Œ Enable2ï¼‰ç”¨äºé’ˆå¯¹è¯¥Hart å¯åŠ¨æˆ–è€…å…³é—­æŸè·¯ä¸­æ–­æºã€‚ æ¯ä¸ªä¸­æ–­æºå¯¹åº” Enable å¯„å­˜å™¨çš„ä¸€ä¸ª bitï¼Œå…¶ä¸­Enable1 è´Ÿè´£æ§åˆ¶ 1 ~ 31 å·ä¸­æ–­æºï¼›Enable2 è´Ÿè´£æ§åˆ¶ 32 ~ 53 å·ä¸­æ–­æºã€‚å°†å¯¹åº”çš„ bit ä½è®¾ç½®ä¸º 1 è¡¨ç¤ºä½¿èƒ½è¯¥ä¸­æ–­æºï¼Œå¦åˆ™è¡¨ç¤ºå…³é—­è¯¥ä¸­æ–­æºã€‚ Threshold åŠŸèƒ½ï¼šé’ˆå¯¹æŸä¸ª hart è®¾ç½®ä¸­æ–­æºä¼˜å…ˆçº§çš„é˜ˆå€¼ å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x200000 + (hart) * 0x1000\næ¯ä¸ª Hart æœ‰ 1 ä¸ª Threshold å¯„å­˜å™¨ç”¨äºè®¾ç½®ä¸­æ–­ä¼˜å…ˆçº§çš„é˜ˆå€¼ã€‚ æ‰€æœ‰å°äºæˆ–è€…ç­‰äºï¼ˆ\u0026lt;=ï¼‰è¯¥é˜ˆå€¼çš„ä¸­æ–­æºå³ä½¿å‘ç”Ÿäº†ä¹Ÿä¼šè¢« PLIC ä¸¢å¼ƒã€‚ç‰¹åˆ«åœ°ï¼Œå½“é˜ˆå€¼ä¸º 0 æ—¶å…è®¸æ‰€æœ‰ä¸­æ–­æºä¸Šå‘ç”Ÿçš„ä¸­æ–­ï¼›å½“é˜ˆå€¼ä¸º 7 æ—¶ä¸¢å¼ƒæ‰€æœ‰ä¸­æ–­æºä¸Šå‘ç”Ÿçš„ä¸­æ–­ã€‚ Claim/Complete åŠŸèƒ½ï¼šå¦‚ä¸‹ å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x200004 + (hart) * 0x1000\nClaim å’Œ Complete æ˜¯åŒä¸€ä¸ªå¯„å­˜å™¨ï¼Œæ¯ä¸ª Hart ä¸€ä¸ªã€‚ å¯¹è¯¥å¯„å­˜å™¨æ‰§è¡Œè¯»æ“ä½œç§°ä¹‹ä¸º Claimï¼Œå³è·å–å½“å‰å‘ç”Ÿçš„æœ€é«˜ä¼˜å…ˆçº§çš„ä¸­æ–­æºIDã€‚Claim æˆåŠŸåä¼šæ¸…é™¤å¯¹åº”çš„ Pending ä½ã€‚ å¯¹è¯¥å¯„å­˜å™¨æ‰§è¡Œå†™æ“ä½œç§°ä¹‹ä¸º Completeã€‚æ‰€è°“ CompleteæŒ‡çš„æ˜¯é€šçŸ¥PLIC å¯¹è¯¥è·¯ä¸­æ–­çš„å¤„ç†å·²ç»ç»“æŸã€‚ void external_interrupt_handler() { int irq = plic_claim(); // if (irq == UART0_IRQ){ uart_isr(); } else if (irq) { printf(\u0026#34;unexpected interrupt irq = %d\\n\u0026#34;, irq); } if (irq) { plic_complete(irq); // } } \u003c!DOCTYPE html\u003e Responsive Image CLINT ï¼ˆCore Local INTerruptorï¼‰ å®šæ—¶å™¨ä¸­æ–­ï¼Œå±äºæœ¬åœ°ä¸­æ–­çš„ä¸€ç§ï¼Œç”±èŠ¯ç‰‡å†…éƒ¨CLINTè®¾å¤‡äº§ç”Ÿçš„ä¸­æ–­ã€‚\nRISC-V è§„èŒƒè§„å®šï¼ŒCLINT çš„å¯„å­˜å™¨ç¼–å€é‡‡ç”¨å†…å­˜æ˜ å°„ï¼ˆmemory mapï¼‰æ–¹å¼ã€‚ å…·ä½“å¯„å­˜å™¨ç¼–å€é‡‡ç”¨base + offsetçš„æ ¼å¼ï¼Œä¸” base ç”±å„ä¸ªç‰¹å®š platform è‡ªå·±å®šä¹‰ã€‚é’ˆå¯¹ QEMU-virtï¼Œå…¶ CLINT çš„è®¾è®¡å‚è€ƒäº† SFIVEï¼Œbase ä¸º 0x2000000ã€‚ CLINT ç¼–ç¨‹æ¥å£ - å¯„å­˜å™¨ (Timer éƒ¨åˆ†) mtime åŠŸèƒ½ï¼šreal-time è®¡æ•°å™¨ï¼ˆcounterï¼‰ å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0xbff8\nç”±æ™¶æŒ¯äº§ç”Ÿï¼Œç³»ç»Ÿå…¨å±€å”¯ä¸€ï¼Œåœ¨ RV32 å’Œ RV64 ä¸Šéƒ½æ˜¯ 64-bitã€‚ç³»ç»Ÿå¿…é¡»ä¿è¯è¯¥è®¡æ•°å™¨çš„å€¼å§‹ç»ˆæŒ‰ç…§ä¸€ä¸ªå›ºå®šçš„é¢‘ç‡é€’å¢ã€‚ ä¸Šç”µå¤ä½æ—¶ï¼Œç¡¬ä»¶è´Ÿè´£å°† mtime çš„å€¼æ¢å¤ä¸º 0ã€‚ mtimecmp åŠŸèƒ½ï¼šå®šæ—¶å™¨æ¯”è¾ƒå¯„å­˜å™¨ å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x4000 + (hart) * 8)\næ¯ä¸ª hart ä¸€ä¸ª mtimecmp å¯„å­˜å™¨ï¼Œ64-bitã€‚\nä¸Šç”µå¤ä½æ—¶ï¼Œç³»ç»Ÿä¸è´Ÿè´£è®¾ç½® mt`imecmp çš„åˆå€¼ã€‚\nå½“mtime \u0026gt;= mtimecmp æ—¶ï¼ŒCLINT ä¼šäº§ç”Ÿä¸€ä¸ª timer ä¸­æ–­ã€‚å¦‚æœè¦ä½¿èƒ½è¯¥ä¸­æ–­éœ€è¦ä¿è¯å…¨å±€ä¸­æ–­æ‰“å¼€å¹¶ä¸”mie.MTIE æ ‡å¿—ä½ç½® 1ã€‚\nå½“ timer ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œhart ä¼šè®¾ç½® mip.MTIPï¼Œç¨‹åºå¯ä»¥åœ¨ mtimecmp ä¸­å†™å…¥æ–°çš„å€¼æ¸…é™¤mip.MTIPã€‚\næ—¶é’ŸèŠ‚æ‹ tick æ“ä½œç³»ç»Ÿä¸­æœ€å°çš„æ—¶é—´å•ä½ï¼› Tick çš„å•ä½ï¼ˆå‘¨æœŸï¼‰ç”±ç¡¬ä»¶å®šæ—¶å™¨çš„å‘¨æœŸå†³å®š ï¼ˆé€šå¸¸ä¸º 1 ~ 100msï¼‰ï¼› Tick å‘¨æœŸè¶Šå°ï¼Œä¹Ÿå°±æ˜¯1så†…äº§ç”Ÿçš„ä¸­æ–­è¶Šå¤šï¼Œç³»ç»Ÿçš„ç²¾åº¦è¶Šé«˜ï¼Œä½†å¼€é”€è¶Šå¤§ã€‚ ","permalink":"https://lifeislife.cn/posts/risc-v%E5%85%A5%E9%97%A8-trap%E5%92%8Cexception/","summary":"\u003ch1 id=\"trap-ç®€ä»‹\"\u003eTrap ç®€ä»‹\u003c/h1\u003e\n\u003ch2 id=\"æ§åˆ¶æµcontrol-flowå’Œ-trap\"\u003eæ§åˆ¶æµï¼ˆControl Flowï¼‰å’Œ Trap\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eæ§åˆ¶æµï¼ˆControl Flowï¼‰\nä»ç»™å¤„ç†å™¨åŠ ç”µå¼€å§‹ï¼Œç›´åˆ°ä½ æ–­ç”µä¸ºæ­¢ï¼Œç¨‹åºè®¡æ•°å™¨å‡è®¾ä¸€ä¸ªå€¼çš„åºåˆ—\n$$a_0,a_1,\\dotsb,a_{n-1}$$\næ¯ä¸ª$a_k$éƒ½æ˜¯æŒ‡ä»¤çš„åœ°å€ï¼Œæ¯æ¬¡ä»$a_{k}$åˆ°$a_{k+1}$çš„è¿‡æ¸¡ç§°ä¸ºæ§åˆ¶è½¬ç§»ï¼Œè€Œè¿™æ ·çš„æ§åˆ¶è½¬ç§»åºåˆ—å«åšå¤„ç†å™¨çš„æ§åˆ¶æµã€‚\u003c/li\u003e\n\u003cli\u003eå¼‚å¸¸æ§åˆ¶æµï¼ˆExceptional Control Flow, ECFï¼‰\nç³»ç»Ÿä¹Ÿå¿…é¡»èƒ½å¤Ÿå¯¹ç³»ç»ŸçŠ¶æ€çš„å˜åŒ–åšå‡ºååº”ï¼Œè¿™äº›ç³»ç»ŸçŠ¶æ€ä¸æ˜¯è¢«å†…éƒ¨ç¨‹åºå˜é‡æ•è·çš„ï¼Œè€Œä¸”ä¹Ÿä¸ä¸€å®šè¦å’Œç¨‹åºçš„æ‰§è¡Œç›¸å…³ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç¡¬ä»¶å®šæ—¶å™¨å®šæœŸäº§ç”Ÿä¿¡å·ï¼Œè¿™ä¸ªäº‹ä»¶å¿…é¡»å¾—åˆ°å¤„ç†ã€‚åŒ…åˆ°è¾¾ç½‘ç»œé€‚é…å™¨åï¼Œå¿…é¡»å­˜æ”¾åœ¨å†…å­˜ä¸­ã€‚ç¨‹åºå‘ç£ç›˜è¯·æ±‚æ•°æ®ï¼Œç„¶åä¼‘çœ ï¼Œç›´åˆ°è¢«é€šçŸ¥è¯´æ•°æ®å·²å°±ç»ªã€‚ç°ä»£ç³»ç»Ÿé€šè¿‡ä½¿æ§åˆ¶æµå‘ç”Ÿçªå˜æ¥å¯¹è¿™äº›æƒ…å†µåšå‡ºååº”ã€‚æˆ‘ä»¬æŠŠè¿™äº›çªå˜ç§°ä¸ºå¼‚å¸¸æ§åˆ¶æµã€‚\n\u003cul\u003e\n\u003cli\u003eexception\u003c/li\u003e\n\u003cli\u003einterrupt\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eRISC-V æŠŠ \u003ccode\u003eECF\u003c/code\u003e ç»Ÿç§°ä¸º \u003ccode\u003eTrap\u003c/code\u003eã€‚\u003c/p\u003e","title":"RISC-V å…¥é—¨-Trap"},{"content":"æµ‹è¯•ä»£ç æ—¶ç»å¸¸éœ€è¦ä¸Šä¼ æ–‡ä»¶è‡³æœåŠ¡å™¨ç«¯è¿è¡Œï¼Œæ¯æ¬¡ä¸Šä¼ éƒ½éœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹ä¼ è¾“å·¥å…·å¦‚ FileZillaï¼Œæœ‰äº†SFTPæ’ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ VSCode ä¸Šç¼–è¯‘æˆåŠŸåï¼Œä¸€é”®ä¸Šä¼ æœ¬åœ°æ–‡ä»¶ã€‚\nå®‰è£…æ’ä»¶ æ‰“å¼€æ’ä»¶ä¸­å¿ƒï¼Œæœç´¢sftpï¼Œå®‰è£…é‡æœ€é«˜çš„å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ’ä»¶ï¼Œç‚¹å‡»å®‰è£…ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é…ç½®æ’ä»¶ æ’ä»¶å®‰è£…å®Œæˆåï¼Œè¾“å…¥å¿«æ·é”®Control + Shift + P å¼¹å‡ºå‘½ä»¤é¢æ¿ï¼Œç„¶åè¾“å…¥sftp:configï¼Œå›è½¦ï¼Œå½“å‰å·¥ç¨‹çš„.vscodeæ–‡ä»¶å¤¹ä¸‹å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªsftp.jsonæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé…ç½®çš„å†…å®¹å¯ä»¥æ˜¯ï¼š\n{ \u0026#34;host\u0026#34;: \u0026#34;192.168.xxx.xxx\u0026#34;, //æœåŠ¡å™¨ ip \u0026#34;port\u0026#34;: 22, //ç«¯å£ï¼Œsftp æ¨¡å¼æ˜¯ 22 \u0026#34;username\u0026#34;: \u0026#34;\u0026#34;, //ç”¨æˆ·å \u0026#34;password\u0026#34;: \u0026#34;\u0026#34;, //å¯†ç  \u0026#34;protocol\u0026#34;: \u0026#34;ftp\u0026#34;, //æ¨¡å¼ï¼Œsfpt æˆ–è€… ftp \u0026#34;agent\u0026#34;: null, \u0026#34;privateKeyPath\u0026#34;: null, //å­˜æ”¾åœ¨æœ¬åœ°çš„å·²é…ç½®å¥½çš„ç”¨äºç™»å½•å·¥ä½œç«™çš„å¯†é’¥æ–‡ä»¶ï¼ˆä¹Ÿå¯ä»¥æ˜¯ ppk æ–‡ä»¶ï¼‰ \u0026#34;passphrase\u0026#34;: null, \u0026#34;passive\u0026#34;: false, \u0026#34;interactiveAuth\u0026#34;: false, \u0026#34;remotePath\u0026#34;: \u0026#34;/root/node/build/\u0026#34;, //æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶åœ°å€ \u0026#34;context\u0026#34;: \u0026#34;./server/build\u0026#34;, //æœ¬åœ°çš„æ–‡ä»¶åœ°å€ \u0026#34;uploadOnSave\u0026#34;: true, //ç›‘å¬ä¿å­˜å¹¶ä¸Šä¼  \u0026#34;syncMode\u0026#34;: \u0026#34;update\u0026#34;, \u0026#34;watcher\u0026#34;: { //ç›‘å¬å¤–éƒ¨æ–‡ä»¶ \u0026#34;files\u0026#34;: false, //å¤–éƒ¨æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ \u0026#34;autoUpload\u0026#34;: false, \u0026#34;autoDelete\u0026#34;: false }, \u0026#34;ignore\u0026#34;: [ //æŒ‡å®šåœ¨ä½¿ç”¨ sftp: sync to remote çš„æ—¶å€™å¿½ç•¥çš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹ //æ³¨æ„æ¯ä¸€è¡Œåé¢æœ‰é€—å·ï¼Œæœ€åä¸€è¡Œæ²¡æœ‰é€—å· //å¿½ç•¥é¡¹ \u0026#34;**/.vscode/**\u0026#34;, \u0026#34;**/.git/**\u0026#34;, \u0026#34;**/.DS_Store\u0026#34; ] } æ’ä»¶ä½¿ç”¨ å¯ä»¥ç›´æ¥å³å‡»æ–‡ä»¶ï¼Œé€‰æ‹©Uploadï¼Œä¼šå°†æ–‡ä»¶ä¸Šä¼ è‡³é…ç½®å¥½çš„remotePathã€‚\nå¯ä»¥Control + Shift + Pè¾“å…¥sftpï¼Œé€‰æ‹©æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå‘½ä»¤éƒ½æ˜¯å­—é¢æ„æ€ï¼Œä¸å¤šåšè§£é‡Šã€‚ \u003c!DOCTYPE html\u003e Responsive Image å¦‚æœæœ‰å¤šä¸ª IP éœ€è¦é…ç½®ï¼Œå¯ä»¥åœ¨sftp.jsonæ–‡ä»¶ä¸­ï¼Œé€šè¿‡æ–¹æ‹¬å·[]æ·»åŠ ã€‚æ¯”å¦‚\n[ { \u0026#34;host\u0026#34;: \u0026#34;192.168.xxx.01\u0026#34;, //æœåŠ¡å™¨ ip \u0026#34;port\u0026#34;: 22, //ç«¯å£ï¼Œsftpæ¨¡å¼æ˜¯22 \u0026#34;username\u0026#34;: \u0026#34;\u0026#34;, //ç”¨æˆ·å \u0026#34;password\u0026#34;: \u0026#34;\u0026#34;, //å¯†ç  \u0026#34;protocol\u0026#34;: \u0026#34;sftp\u0026#34;, //æ¨¡å¼ï¼Œsfpt æˆ–è€… ftp \u0026#34;agent\u0026#34;: null, }, { \u0026#34;host\u0026#34;: \u0026#34;192.168.xxx.02\u0026#34;, //æœåŠ¡å™¨ ip \u0026#34;port\u0026#34;: 22, //ç«¯å£ï¼Œsftpæ¨¡å¼æ˜¯22 \u0026#34;username\u0026#34;: \u0026#34;\u0026#34;, //ç”¨æˆ·å \u0026#34;password\u0026#34;: \u0026#34;\u0026#34;, //å¯†ç  \u0026#34;protocol\u0026#34;: \u0026#34;sftp\u0026#34;, //æ¨¡å¼ï¼Œsfpt æˆ–è€… ftp \u0026#34;agent\u0026#34;: null, }, { \u0026#34;host\u0026#34;: \u0026#34;192.168.xxx.03\u0026#34;, //æœåŠ¡å™¨ ip \u0026#34;port\u0026#34;: 22, //ç«¯å£ï¼Œsftpæ¨¡å¼æ˜¯22 \u0026#34;username\u0026#34;: \u0026#34;\u0026#34;, //ç”¨æˆ·å \u0026#34;password\u0026#34;: \u0026#34;\u0026#34;, //å¯†ç  \u0026#34;protocol\u0026#34;: \u0026#34;sftp\u0026#34;, //æ¨¡å¼ï¼Œsfpt æˆ–è€… ftp \u0026#34;agent\u0026#34;: null, } ] ","permalink":"https://lifeislife.cn/posts/vscode%E4%BD%BF%E7%94%A8sftp%E6%8F%92%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E8%87%B3%E5%B1%80%E5%9F%9F%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/","summary":"\u003cp\u003eæµ‹è¯•ä»£ç æ—¶ç»å¸¸éœ€è¦ä¸Šä¼ æ–‡ä»¶è‡³æœåŠ¡å™¨ç«¯è¿è¡Œï¼Œæ¯æ¬¡ä¸Šä¼ éƒ½éœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹ä¼ è¾“å·¥å…·å¦‚ FileZillaï¼Œæœ‰äº†\u003ccode\u003eSFTP\u003c/code\u003eæ’ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ VSCode ä¸Šç¼–è¯‘æˆåŠŸåï¼Œä¸€é”®ä¸Šä¼ æœ¬åœ°æ–‡ä»¶ã€‚\u003c/p\u003e","title":"VSCode ä½¿ç”¨ sftp æ’ä»¶ä¸Šä¼ æœ¬åœ°æ–‡ä»¶è‡³å±€åŸŸç½‘æœåŠ¡å™¨"},{"content":"","permalink":"https://lifeislife.cn/posts/c%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E5%88%86%E9%85%8D/","summary":"","title":"C ç¨‹åºå†…å­˜åŒºåŸŸåˆ†é…"},{"content":"å†…å®¹æ€»ç»“è‡ª B ç«™ Upã€è›‹é¥¼åµŒå…¥å¼ã€‘æˆ‘æç€é‹å¸¦æ‹è‡ªå·±ï¼ŸåµŒå…¥å¼èŠ¯ç‰‡å¯åŠ¨è¿‡ç¨‹å…¨è§£æï¼Œå½»åº•ç†è§£ bootloader\nå½“ä½ æŒ‰ä¸‹ç”µæºå¼€å…³çš„é‚£ä¸€ç¬é—´ï¼Œç¬¬ä¸€è¡Œä»£ç å¦‚ä½•åœ¨èŠ¯ç‰‡ä¸Šè¿è¡Œèµ·æ¥çš„å‘¢ï¼ŸåµŒå…¥å¼è½¯ä»¶ä»£ç éœ€è¦ä¸€å®šçš„æ–¹å¼çƒ§å½•åˆ°èŠ¯ç‰‡ä¸­æ‰èƒ½è¿è¡Œï¼Œé™¤äº†ç‰©ç†åˆ»èš€ï¼Œæ— è®ºæ˜¯é€šè®¯ç«¯å£çš„ä¼ è¾“æˆ–è€…è°ƒè¯•ç«¯å£çš„çƒ§å½•ï¼Œéƒ½éœ€è¦é©±åŠ¨ç¨‹åºçš„æ”¯æŒã€‚æ‰€ä»¥è¯´æ˜¯ç¨‹åºçƒ§å½•äº†ç¨‹åºï¼Œè½¯ä»¶å¯åŠ¨äº†è½¯ä»¶ã€‚\nè¿™å°±åƒè‡ªå·±æç€è‡ªå·±çš„é‹å¸¦ï¼ŒæŠŠè‡ªå·±æ‹èµ·æ¥ã€‚é´å­ï¼ˆBootï¼‰,é‹å¸¦ï¼ˆStrapï¼‰ï¼Œæé‹å¸¦ï¼ˆLoaderï¼‰ã€‚è¿™å°±æ˜¯Boot Strap Loaderçš„å‘½åæ¥æºã€‚é€šå¸¸ç§°BootLoaderï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºè‡ªä¸¾ã€‚\nBootLoaderæ˜¯èŠ¯ç‰‡æœ€åˆè¿è¡Œçš„ä»£ç å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œå…¶å®æ¯ä¸€å—èŠ¯ç‰‡åœ¨å‡ºå‚æ—¶éƒ½åœ¨å…¶å†…éƒ¨çš„ROMä¸­ï¼Œçƒ§å½•äº†å®ƒæœ€åŸºç¡€çš„è½¯ä»¶ã€‚CPU æ¬è¿å¹¶è¿è¡Œçš„ç¬¬ä¸€æ¡ä»£ç çš„é»˜è®¤ä½ç½®ï¼Œå°±åœ¨ROMçš„åœ°å€ç©ºé—´ã€‚æ‰€ä»¥ä¸€åˆ‡çš„èµ·å§‹éƒ½åœ¨ç¡¬ä»¶ä¸Šã€‚\nä»¥ X86 æ¶æ„çš„é¼»ç¥– 8086 èŠ¯ç‰‡ä¸ºä¾‹ï¼ŒæŒ‰ä¸‹å¼€å…³çš„ä¸€ç¬é—´ï¼ŒèŠ¯ç‰‡ Reset å¼•è„šæ¥æ”¶åˆ°äº†ç”µå¹³è·³å˜ï¼Œåœ¨ä¸€è¿ä¸²ç”µè·¯çš„ä½œç”¨ä¸‹ï¼Œä»£ç æ®µå¯„å­˜å™¨CSæ¢å¤æˆ0XFFFFï¼ŒæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨IPæ¢å¤æˆ0X0000ï¼Œä»–ä»¬ç»„åˆæˆ 20 ä½çš„åœ°å€æ­£å¥½ç­‰äº ROM ä¸­å­˜æ”¾ç¬¬ä¸€æ¡ä»£ç çš„ä½ç½®ã€‚ä¹‹åå–å‡ºè¿™é‡Œçš„æŒ‡ä»¤åœ¨è·³è½¬åˆ°åˆ«å¤„ã€‚\nARM æ¶æ„çš„èŠ¯ç‰‡ä¹Ÿæ˜¯ç±»ä¼¼çš„è¿‡ç¨‹ï¼Œå¯¹äº 32 ä½çš„èŠ¯ç‰‡ï¼Œé€šç”µåï¼ŒPCæŒ‡é’ˆå¯„å­˜å™¨å¤ä½è‡³é›¶åœ°å€ï¼Œéšåä»ä¸­æ–­å‘é‡è¡¨è¡¨å¤´çš„ reset å‘é‡å¤„è·å–ä¸‹ä¸€ä¸ªè·³è½¬çš„åœ°å€ã€‚è¿™æ—¶å€™çš„ä»£ç å·²ç»ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨ï¼Œå¤„ç†å™¨å¯ä»¥ç›´æ¥æ¬åˆ°è‡ªèº«ç¼“å­˜ä¸­è¿è¡Œã€‚æœ‰äº†è¿™éƒ¨åˆ†ä»£ç ï¼Œå°±èƒ½è·³è½¬åˆ°å­˜æ”¾æœ‰æ›´å¤šæ›´å¤æ‚çš„ä»£ç çš„åœ°å€ã€‚æ‰§è¡Œç¡¬ä»¶è‡ªæ£€ï¼ŒåŸºæœ¬çš„åˆå§‹åŒ–æ“ä½œï¼Œæä¾›åŸºç¡€çš„è¾“å…¥è¾“å‡ºæ”¯æŒã€‚ä¹‹åå¯ä»¥å°†æ“ä½œç³»ç»Ÿä»å¤–éƒ¨çš„å­˜å‚¨ç©ºé—´åŠ è½½åˆ°å†…éƒ¨ã€‚ä»£ç å°±è¿™æ ·æ¥åŠ›å¼çš„æµè½¬èµ·æ¥ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰€ä»¥æˆ‘ä»¬æŠŠå‡ºå‚å°±å†™åœ¨ROMé‡Œï¼Œè´Ÿè´£å¯åŠ¨åç»­ç”¨æˆ·è½¯ä»¶çš„è½¯ä»¶ï¼Œç§°ä¸ºBoot ROMæˆ–è€…ROM Codeã€‚ç°åœ¨ä¸ä¸€å®šæ˜¯ç”¨åªè¯»å­˜å‚¨å™¨ï¼ˆRead Only Memoryï¼‰ï¼Œä½†æ˜¯è‡³å°‘æ˜¯ä¸€å—æ‰ç”µä¸æ˜“å¤±çš„å­˜å‚¨å™¨ï¼Œç°åœ¨ä¸»è¦ç”¨EEPROMï¼ŒNOR Flashã€‚æˆ‘ä»¬ä¸€èˆ¬æ²¡æœ‰æƒé™ä¿®æ”¹å®ƒï¼Œä½†æ˜¯å®ƒä¹Ÿä¸å®Œå…¨æ˜¯é»‘ç›’ï¼Œå¤§éƒ¨åˆ†èŠ¯ç‰‡éƒ½ä¼šæœ‰å¤–éƒ¨å¯åŠ¨é…ç½®å¼•è„šï¼Œé€šå¸¸æ˜¯ä»¥æ‹¨ç å¿«å…³çš„å½¢å¼ã€‚å¯¹äº PC æœºæ¥è¯´ï¼ŒBoot ROMå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„BIOSï¼Œå®ƒä¹Ÿæœ‰å¯åŠ¨é…ç½®é€”å¾„ã€‚è€Œä¸”æä¾›äº†äº¤äº’ç•Œé¢ï¼Œç”¨äºé…ç½®éƒ¨åˆ†åŠŸèƒ½å’Œé€‰æ‹©åç»­çš„å¼•å¯¼è®¾å¤‡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é™¤äº†èŠ¯ç‰‡è‡ªå¸¦çš„Boot ROMï¼Œè¿˜éœ€è¦å†ç»™è‡ªå·±å®é™…çš„åº”ç”¨ç¨‹åºï¼Œå†™ä¸€ä¸ªäºŒæ¬¡å¼•å¯¼ä»£ç æˆ–è€… N æ¬¡å¼•å¯¼ä»£ç ï¼Œç”¨ä½œæ“ä½œç³»ç»Ÿï¼Œæ–‡ä»¶ç³»ç»ŸåŠ è½½ç­‰ç­‰ã€‚æˆ‘ä»¬æ‰€è¯´çš„Bootloaderæ—¶ï¼Œå…¶å®å¤§å¤šæ•°å°±æ˜¯è¿™æ ·çš„äºŒæ¬¡å¼•å¯¼ä»£ç ã€‚\nè¿™äº›äº‹å…¶å®Boot ROMå®ƒä¹Ÿèƒ½åšï¼Œä½†æ˜¯Boot ROMå®ç°çš„åŠŸèƒ½å’Œé…ç½®æ–¹æ³•ä¸çµæ´»ï¼Œä½†æ˜¯Bootloaderæ˜¯å¼€å‘äººå‘˜å¯ä»¥è€Œå®Œå…¨æ§åˆ¶çš„å¼•å¯¼ä»£ç ã€‚\nåœ¨è®¾è®¡Bootloaderæ—¶ï¼ŒMCUçš„å¼•å¯¼æ­¥éª¤å°±å¼€å§‹å’ŒåµŒå…¥å¼ Linux æˆ–è€… PC æœ‰æ‰€ä¸åŒã€‚è¿™ä¸€å®šç¨‹åº¦ä¸èŠ¯ç‰‡æ¶æ„æ‰€é‡‡ç”¨çš„çš„å­˜å‚¨æ–¹æ¡ˆæœ‰å…³ã€‚\nå…ˆæ¥è¯´MCUï¼Œä¸SOCç›¸æ¯”MCUçš„ä¸»è¦ç‰¹å¾æ˜¯å•æ ¸å’Œæˆ–å¤šæ ¸åŒæ„çš„å¾®å¤„ç†å™¨ï¼Œå•æ ¸æˆ–å¤šæ ¸åŒæ„ï¼Œä¸»é¢‘ \u0026lt; 1GHzï¼Œæ²¡æœ‰MMUå†…å­˜ç®¡ç†å•å…ƒï¼Œåªèƒ½è¿è¡Œå®æ—¶æ“ä½œç³»ç»Ÿã€‚å¸¸è§MCUå†…æ ¸ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç¨‹åºçš„ä¸»è¦è¿è¡Œä»‹è´¨ä¸ºNOR Flashï¼Œå› ä¸ºå’ŒRAMä¸€æ ·æœ‰åˆ†ç¦»çš„åœ°å€çº¿å’Œæ•°æ®çº¿ã€‚å¹¶ä¸”å¯ä»¥ä»¥å­—èŠ‚é•¿åº¦ç²¾ç¡®å¯»å€ï¼Œæ‰€ä»¥ç¨‹åºä¸éœ€è¦æ‹·è´åˆ°RAMä¸­è¿è¡Œçš„ã€‚\nä»¥è‹±é£å‡Œå®¶çš„ TC27x ç³»åˆ— MCU ä¸ºä¾‹ï¼Œä¸Šç”µåçš„é»˜è®¤å–å€ä½ç½®æ˜¯0x8FFF 8000ï¼Œè¿™å°±æ˜¯ä»–çš„Boot ROMåœ¨NorFlashä¸­çš„åœ°å€ã€‚å¹¶ä¸”è¿™å—Boot Romåˆ†ä¸ºSSWï¼ŒBSLï¼ŒTFã€‚\n\u003c!DOCTYPE html\u003e Responsive Image SSW æ¯æ¬¡ä¸Šç”µå¿…é¡»è¿è¡Œï¼Œä»–ä¼šæ ¹æ®å†™åœ¨program flashï¼ŒPFOåœ°å€çš„å‰ 32byte ä¸­çš„é…ç½®å­—ï¼Œæ¥å†³å®šSSWæ‰§è¡Œå®Œçš„è·³è½¬åœ°å€ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„è·³è½¬åœ°å€ï¼Œæ¯”å¦‚0x80000020ï¼Œæ”¾ä¸Šè‡ªå·±å†™çš„Bootloaderã€‚ä¹Ÿå¯ä»¥é€‰æ‹©ä¸è·³è½¬ï¼Œè¿è¡Œå‚å®¶æä¾›çš„Bootloaderï¼ˆBSLï¼‰ã€‚\nMCUä¸‹çš„Bootloaderä¸»è¦å®Œæˆçš„äº‹æƒ…æœ‰ä»¥ä¸‹ï¼š\nå…³é—­çœ‹é—¨ç‹—ï¼Œåˆå§‹åŒ–ä¸­æ–­å’Œ trap å‘é‡è¡¨ï¼Œè¿›è¡Œæ—¶é’Ÿå’Œå¤–è®¾åˆå§‹åŒ–ï¼Œè®©èŠ¯ç‰‡æ­£å¸¸è¿è¡Œèµ·æ¥ã€‚ æä¾›CAN,UART, ETHç­‰ç”¨äºé€šè®¯åŠŸèƒ½çš„é©±åŠ¨ï¼Œèƒ½å¤Ÿæ¥æ”¶å¤–éƒ¨æ•°æ®ä¼ è¾“è¯·æ±‚ã€‚ æä¾›FLASHçš„è¯»å†™ä¸æ“¦é™¤é©±åŠ¨ï¼Œè®¾è®¡æœåŠ¡æ¥å¯¹é€šè®¯ç«¯å£æ¥æ”¶åˆ°çš„æ›´æ–°ä»£ç è¿›è¡Œæ ¡éªŒã€å­˜å‚¨ï¼Œä»¥åŠè·³è½¬æ“ä½œç³»ç»Ÿæˆ–åç»­åº”ç”¨ç¨‹åºä»£ç ã€‚ å¦‚æœ‰å¿…è¦ï¼Œè¿˜ä¼šå¼€å‘ä¸€äº›åŸºç¡€è¯Šæ–­æœåŠ¡ï¼Œä¸²å£äº¤äº’ç¨‹åºç­‰ç­‰ã€‚ é‚£ä¹ˆè¿è¡Œ Linux çš„SOCå’Œ PC çš„è¿™ä¸€è¿‡ç¨‹æœ‰ä½•ä¸åŒå‘¢ã€‚è¿˜æ˜¯å…ˆçœ‹å­˜å‚¨æ–¹æ¡ˆï¼Œè¿è¡ŒåµŒå…¥å¼ Linux çš„ SoCã€‚ä¸€èˆ¬å°†å®ƒçš„æ“ä½œç³»ç»Ÿï¼Œæ–‡ä»¶ç³»ç»Ÿå’Œä»–çš„åº”ç”¨ç¨‹åºæ”¾åœ¨nand flashä¸­ã€‚è¿è¡Œä»£ç å‰ï¼Œç°å°†ä»£ç æ¬è¿åˆ°SRAMä¸­ï¼Œç›¸æ¯”MCUå¤šäº†ä¸€é“æ­¥éª¤ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¯¹äºSOCçš„Boot ROM å’Œ PC çš„BIOSè€Œè¨€ï¼Œä»–ä»¬ç»“æŸè¿è¡Œå‰çš„æœ€ç»ˆä»»åŠ¡ï¼Œæ˜¯å°†æŸäº›ä»£ç ä»nand flashæ¬è¿åˆ°SRAMä¸­ï¼Œå…¶ä¸­æœ€é‡è¦çš„å†…å®¹å°±æ˜¯Boot Loaderã€‚\nè€Œä¸€èˆ¬SOCçš„Bootloaderï¼Œåˆåˆ†ä¸ºSPLï¼ˆSecondary Program Loaderï¼‰å’ŒuBOOTä¸¤ä¸ªé˜¶æ®µã€‚SPLçš„ Secondary å°±æ˜¯ç›¸å¯¹äºBootROMè€Œè¨€ï¼Œä»–å°±åƒæ˜¯æ¥åŠ›èµ›ä¸­çš„ç¬¬äºŒæ£’é€‰æ‰‹ã€‚SPLä¼šåˆå§‹åŒ–æ›´å¤§ç©ºé—´çš„å¤–éƒ¨DRAMï¼Œå†æŠŠuBootæ¬è¿åˆ°å¤–éƒ¨DRAMä¸­å»è¿è¡Œã€‚uBootä½œä¸ºç¬¬ä¸‰æ£’é€‰æ‰‹ï¼Œå¼€å§‹è¿è¡Œå®ƒçš„åˆå§‹åŒ–ç¨‹åºã€‚ä¹‹åå†æ ¹æ®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œå°† OS å†…æ ¸æ¬è¿åˆ°å¤–éƒ¨DRAMä¸­å»è¿è¡Œã€‚OS å†å®Œæˆæ ¹æ–‡ä»¶ç³»ç»Ÿçš„åŠ è½½ç­‰ç­‰ç­‰ç­‰ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E8%8A%AF%E7%89%87%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%E5%85%A8%E8%A7%A3%E6%9E%90/","summary":"\u003cp\u003eå†…å®¹æ€»ç»“è‡ª B ç«™ Up\u003ca href=\"https://www.bilibili.com/video/BV1AN411R7Be/?spm_id_from=333.788.recommend_more_video.1\"\u003eã€è›‹é¥¼åµŒå…¥å¼ã€‘æˆ‘æç€é‹å¸¦æ‹è‡ªå·±ï¼ŸåµŒå…¥å¼èŠ¯ç‰‡å¯åŠ¨è¿‡ç¨‹å…¨è§£æï¼Œå½»åº•ç†è§£ bootloader\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eå½“ä½ æŒ‰ä¸‹ç”µæºå¼€å…³çš„é‚£ä¸€ç¬é—´ï¼Œç¬¬ä¸€è¡Œä»£ç å¦‚ä½•åœ¨èŠ¯ç‰‡ä¸Šè¿è¡Œèµ·æ¥çš„å‘¢ï¼ŸåµŒå…¥å¼è½¯ä»¶ä»£ç éœ€è¦ä¸€å®šçš„æ–¹å¼çƒ§å½•åˆ°èŠ¯ç‰‡ä¸­æ‰èƒ½è¿è¡Œï¼Œé™¤äº†ç‰©ç†åˆ»èš€ï¼Œæ— è®ºæ˜¯é€šè®¯ç«¯å£çš„ä¼ è¾“æˆ–è€…è°ƒè¯•ç«¯å£çš„çƒ§å½•ï¼Œéƒ½éœ€è¦é©±åŠ¨ç¨‹åºçš„æ”¯æŒã€‚æ‰€ä»¥è¯´æ˜¯\u003cstrong\u003eç¨‹åºçƒ§å½•äº†ç¨‹åºï¼Œè½¯ä»¶å¯åŠ¨äº†è½¯ä»¶\u003c/strong\u003eã€‚\u003c/p\u003e","title":"èŠ¯ç‰‡å¯åŠ¨è¿‡ç¨‹å…¨è§£æ"},{"content":"æ¦‚å¿µ å®šæ—¶å™¨ï¼ˆTimerï¼‰ï¼Œåˆå«è®¡æ—¶å™¨ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯è®¡æ—¶ã€‚å› ä¸º CPU è®¡æ—¶ä¼šå ç”¨å¤§é‡èµ„æºï¼Œè€Œå®šæ—¶å™¨ç‹¬ç«‹äº CPUï¼Œä¸“é—¨ç”¨æ¥è®¡æ—¶ã€‚å•æ ¸ CPU å¥½æ¯”äººçš„å¤§è„‘ï¼Œä¸€å¿ƒä¸å¯äºŒç”¨ï¼Œå®ƒåªèƒ½çŸ¥é“è‡ªå·±å½“å‰è¦å¹²ä»€ä¹ˆã€‚äººå¯ä»¥ç”¨é—¹é’Ÿæ¥æé†’è‡ªå·±æŸä¸ªæ—¶é—´éœ€è¦åšæŸä»¶äº‹ï¼Œè€Œ CPU å°±éœ€è¦å®šæ—¶å™¨æ¥å®Œæˆè¿™æ ·çš„å·¥ä½œã€‚\nå½“å®šæ—¶å™¨è¢«å¼€å¯åï¼Œé‡Œé¢çš„è®¡æ•°å™¨å°±ä»¥è®¡æ•°å™¨æ—¶é’Ÿçš„é¢‘ç‡å¼€å§‹è¿è¡Œï¼Œå†…éƒ¨çš„è®¡æ•°å€¼ä¸æ–­å¢åŠ ã€‚ä¾‹å¦‚ä¸€ä¸ªæ—¶é’Ÿä¸º1MHzçš„å®šæ—¶å™¨ï¼Œè¢«å¼€å¯åæ¯éš”1usè®¡æ•°å€¼å°±ä¼šåŠ  1ã€‚ä½†è®¡æ•°å€¼ä¸å¯èƒ½æ— é™å¢åŠ ï¼Œæœ€å¤§å€¼æ¯”å¦‚65535ã€‚å°†è¿™ä¸ªåè¿›åˆ¶æ•°è½¬ä¸ºäºŒè¿›åˆ¶æ•°ååº”è¯¥æ˜¯ä¸€ä¸ª 16 ä½çš„äºŒè¿›åˆ¶æ•°1111 1111 1111 1111ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ª 16 ä½å¤§å°çš„å­˜å‚¨ç©ºé—´æ¥å­˜å‚¨å®ƒã€‚é‚£è¿™å°±æ˜¯ä¸€ä¸ª 16 ä½å®šæ—¶å™¨ã€‚\nåŠŸèƒ½ å®šæ—¶å™¨å¯ä»¥è®© SoC åœ¨æ‰§è¡Œä¸»ç¨‹åºçš„åŒæ—¶ï¼Œå¯ä»¥ (é€šè¿‡å®šæ—¶å™¨) å…·æœ‰è®¡æ—¶åŠŸèƒ½ï¼Œåˆ°äº†ä¸€å®šæ—¶é—´ (è®¡æ—¶ç»“æŸ) åï¼Œå®šæ—¶å™¨ä¼šäº§ç”Ÿä¸­æ–­æé†’ CPUï¼ŒCPU ä¼šå»å¤„ç†ä¸­æ–­å¹¶æ‰§è¡Œå®šæ—¶å™¨ä¸­æ–­çš„ ISRï¼Œä»è€Œå»æ‰§è¡Œé¢„å…ˆè®¾å®šå¥½çš„äº‹ä»¶ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œå®šæ—¶å™¨å°±åƒä¸€ä¸ªç§˜ä¹¦ï¼ŒCPU å°±æ˜¯è€æ¿ã€‚è€æ¿æ¯å¤©éƒ½æœ‰å¾ˆå¤šäº‹è¦åšï¼Œå…·ä½“æ—¶é—´å®‰æ’ä¸æƒ³æ“å¿ƒï¼Œå°±å®‰æ’ç»™ç§˜ä¹¦ã€‚ç§˜ä¹¦æ¯å¤©å°±æ˜¯ç›¯ç€è¡¨ï¼Œåˆ°ç‚¹å°±æé†’è€æ¿è¦åšæŸäº‹ã€‚\nåŸç† å¤–è®¾çš„å·¥ä½œé¢‘ç‡æ˜¯ä¸å®ƒæ‰€æŒ‚è½½åœ¨çš„å¤–è®¾æ€»çº¿çš„æ—¶é’Ÿé¢‘ç‡ç›¸åŒçš„ã€‚ä½†å·¥ä½œé¢‘ç‡ä¸æ˜¯æ—¶é’Ÿé¢‘ç‡ï¼Œå·¥ä½œé¢‘ç‡åˆ°æ—¶é’Ÿé¢‘ç‡éœ€è¦è¿›è¡Œä¸€æ¬¡åˆ†é¢‘ã€‚è¿™ä¸ªå¯è°ƒèŠ‚çš„åˆ†é¢‘å€¼ä½¿å¾—å®šæ—¶å™¨çš„è®¡æ—¶æ›´åŠ çµæ´»ã€‚è¿™ä¸ªåˆ†é¢‘å€¼å°±æ˜¯éœ€è¦è®¾ç½®çš„ç¬¬ä¸€ä¸ªå‚æ•°é¢„åˆ†é¢‘ç³»æ•°ã€‚\n$$ è®¡æ•°å™¨æ—¶é’Ÿé¢‘ç‡ = å·¥ä½œé¢‘ç‡/(é¢„åˆ†é¢‘ç³»æ•°+1) $$\n$$ å®šæ—¶é¢‘ç‡ = è®¡æ—¶å™¨æ—¶é’Ÿé¢‘ç‡/(è‡ªåŠ¨é‡è½½å€¼+1) $$\nå‡è®¾å®šæ—¶å™¨æ—¶é’Ÿé¢‘ç‡ä¸º1MHzï¼Œé‚£å®šæ—¶1msè¯¥å¦‚ä½•åšï¼Ÿè®¡æ•° 1000 æ¬¡å³å¯ã€‚æœ€å¤§çš„è®¡æ•°å€¼å°±æ˜¯è‡ªåŠ¨é‡è½½å€¼ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦è®¾ç½®çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚å®šæ—¶å™¨è¢«æ‰“å¼€åï¼Œè®¡æ•°å€¼å°±å¢åŠ ï¼Œä¸€æ—¦è¾¾åˆ°è‡ªåŠ¨é‡è½½å€¼å°±ä¼šå‡ºå‘å®šæ—¶å™¨æº¢å‡ºä¸­æ–­ï¼Œå°±å®ç°äº†å®šæ—¶1msã€‚\nè®¡æ•°æ¨¡å¼ \u003c!DOCTYPE html\u003e Responsive Image ä¸­å¿ƒè®¡æ•°ï¼šè®¡æ•°å™¨ä» 0 å¼€å§‹è®¡æ•°åˆ°è‡ªåŠ¨è£…å…¥çš„å€¼ -1ï¼Œäº§ç”Ÿä¸€ä¸ªè®¡æ•°å™¨æº¢å‡ºäº‹ä»¶ï¼Œ0 ç„¶åå‘ä¸‹è®¡æ•°åˆ° 1 å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªè®¡æ•°å™¨æº¢å‡ºäº‹ä»¶ï¼Œç„¶åå†ä» 0 å¼€å§‹é‡æ–°è®¡æ•°ã€‚\nå‘ä¸Šè®¡æ•°ï¼šè®¡æ•°å™¨ä» 0 è®¡æ•°åˆ°è‡ªåŠ¨åŠ è½½å€¼ (TIMx_ARR) ï¼Œç„¶åé‡æ–°ä» 0 å¼€å§‹è®¡æ•°å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªè®¡æ•°å™¨æº¢å‡ºäº‹ä»¶ã€‚\nå‘ä¸‹è®¡æ•°ï¼šè®¡æ•°å™¨ä»è‡ªåŠ¨è£…å…¥çš„å€¼ (TIMx_ARR) å¼€å§‹å‘ä¸‹è®¡æ•°åˆ° 0ï¼Œç„¶åä»è‡ªåŠ¨è£…å…¥çš„å€¼é‡æ–°å¼€å§‹ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªè®¡æ•°å™¨å‘ä¸‹æº¢å‡ºäº‹ä»¶ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E5%AE%9A%E6%97%B6%E5%99%A8timer%E5%9F%BA%E7%A1%80/","summary":"\u003ch2 id=\"æ¦‚å¿µ\"\u003eæ¦‚å¿µ\u003c/h2\u003e\n\u003cp\u003eå®šæ—¶å™¨ï¼ˆTimerï¼‰ï¼Œåˆå«è®¡æ—¶å™¨ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯è®¡æ—¶ã€‚å› ä¸º CPU è®¡æ—¶ä¼šå ç”¨å¤§é‡èµ„æºï¼Œè€Œå®šæ—¶å™¨ç‹¬ç«‹äº CPUï¼Œä¸“é—¨ç”¨æ¥è®¡æ—¶ã€‚å•æ ¸ CPU å¥½æ¯”äººçš„å¤§è„‘ï¼Œä¸€å¿ƒä¸å¯äºŒç”¨ï¼Œå®ƒåªèƒ½çŸ¥é“è‡ªå·±å½“å‰è¦å¹²ä»€ä¹ˆã€‚äººå¯ä»¥ç”¨é—¹é’Ÿæ¥æé†’è‡ªå·±æŸä¸ªæ—¶é—´éœ€è¦åšæŸä»¶äº‹ï¼Œè€Œ CPU å°±éœ€è¦å®šæ—¶å™¨æ¥å®Œæˆè¿™æ ·çš„å·¥ä½œã€‚\u003c/p\u003e","title":"å®šæ—¶å™¨ Timer åŸºç¡€"},{"content":"ä¿ç•™ç°åœº æˆ‘åœ¨çº¿ç¨‹ä¸­ç›´æ¥è°ƒç”¨äº† QTextEdit çš„ append å‡½æ•°æ—¶ï¼Œå€™å°±ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š\nQObject::connect: Cannot queue arguments of type \u0026#39;QTextCursor\u0026#39; (Make sure \u0026#39;QTextCursor\u0026#39; is registered using qRegisterMetaType().) æ¢ç©¶åŸå›  åŸå› æ˜¯æˆ‘ä»¬ä¸èƒ½é€šè¿‡çº¿ç¨‹æ¥ä¿®æ”¹ UIï¼Œè¾ƒä¸ºå®‰å…¨çš„ä¿®æ”¹ç”¨æˆ·ç•Œé¢çš„æ–¹å¼æ˜¯å‘ UI çª—å£å‘é€ä¿¡å· (signal)ï¼Œè¾ƒä¸ºç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ Qt threading ç±»ã€‚\nè§£å†³æ–¹æ³• åœ¨çª—å£ç±»ä¸­å®šä¹‰ä¿¡å·å’Œæ§½ï¼Œå¹¶å£°æ˜å’Œå®ç°ä¸€ä¸ªæ¥å£å‡½æ•°ï¼Œè¿™ä¸ªæ¥å£å‡½æ•°ç”±çº¿ç¨‹è°ƒç”¨ï¼Œåœ¨æ¥å£å‡½æ•°ä¸­ emit ä¸€ä¸ªä¿¡å·ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\n//mainwindow.h signals: void AppendText(const QString \u0026amp;text); private slots: void SlotAppendText(const QString \u0026amp;text); public: void Append(const QString \u0026amp;text); //mainwindow.cpp connect(this,SIGNAL(AppendText(QString)),this,SLOT(SlotAppendText(QString))); void ClassName::Append(const QString \u0026amp;text) { emit AppendText(\u0026#34;ok: string1\u0026#34;); } //thread.cpp void ThreadClassName::SlotAppendText(const QString \u0026amp;text) { mText.append(text); } ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3qt-qobject-connect-cannot-queue-arguments-of-type-qtextcursor%E9%94%99%E8%AF%AF/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eæˆ‘åœ¨çº¿ç¨‹ä¸­ç›´æ¥è°ƒç”¨äº† QTextEdit çš„ append å‡½æ•°æ—¶ï¼Œå€™å°±ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eQObject::connect: Cannot queue arguments of \u003cspan class=\"nb\"\u003etype\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;QTextCursor\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003eMake sure \u003cspan class=\"s1\"\u003e\u0026#39;QTextCursor\u0026#39;\u003c/span\u003e is registered using qRegisterMetaType\u003cspan class=\"o\"\u003e()\u003c/span\u003e.\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eåŸå› æ˜¯\u003cstrong\u003eæˆ‘ä»¬ä¸èƒ½é€šè¿‡çº¿ç¨‹æ¥ä¿®æ”¹ UIï¼Œè¾ƒä¸ºå®‰å…¨çš„ä¿®æ”¹ç”¨æˆ·ç•Œé¢çš„æ–¹å¼æ˜¯å‘ UI çª—å£å‘é€ä¿¡å· (signal)\u003c/strong\u003eï¼Œè¾ƒä¸ºç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ Qt threading ç±»ã€‚\u003c/p\u003e","title":"è§£å†³ Qt-QObject::connect: Cannot queue arguments of typeâ€˜QTextCursorâ€™é”™è¯¯"},{"content":"ä¿ç•™ç°åœº \u003c!DOCTYPE html\u003e Responsive Image æ¢ç©¶åŸå›  ç£ç›˜æ£€æµ‹ä¸èƒ½é€šè¿‡ï¼Œå¯èƒ½æ˜¯å› ä¸ºç³»ç»Ÿçªç„¶æ–­ç”µæˆ–å…¶å®ƒæœªæ­£å¸¸å…³é—­ç³»ç»Ÿå¯¼è‡´ã€‚\nè§£å†³æ–¹æ³• æ ¹æ®æç¤ºå¯ä»¥çœ‹åˆ°æ˜¯dev/sda5è¿™ä¸ªæ‰‡åŒºå‡ºç°äº†å¼‚å¸¸ï¼Œæ‰€ä»¥é€šè¿‡fsckå‘½ä»¤ä¿®å¤æ–‡ä»¶ç³»ç»Ÿã€‚è¯¦ç»†å‘½ä»¤è§£é‡Šã€‚\nå°†sda5æ”¹ä¸ºè‡ªå·±æŸåçš„æ‰‡åŒºå³å¯ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ä¿®å¤å®Œæˆåï¼Œè¾“å…¥exitå³å¯é‡å¯ã€‚\nfsck -y /dev/sda5 ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3linux%E5%90%AF%E5%8A%A8%E5%87%BA%E7%8E%B0fsck-exited-with-status-code-4/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202112041102634.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202112041102634.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eç£ç›˜æ£€æµ‹ä¸èƒ½é€šè¿‡ï¼Œå¯èƒ½æ˜¯å› ä¸ºç³»ç»Ÿçªç„¶æ–­ç”µæˆ–å…¶å®ƒæœªæ­£å¸¸å…³é—­ç³»ç»Ÿå¯¼è‡´ã€‚\u003c/p\u003e","title":"è§£å†³ Linux å¯åŠ¨å‡ºç° fsck exited with status code 4"},{"content":"é—®é¢˜ç®€ä»‹ æœ¬æ–‡åŸºäºã€Qtã€‘çª—ä½“é—´ä¼ é€’æ•°æ®ï¼ˆè·¨æ§ä»¶è·¨ç±»ï¼‰ï¼Œä¸‰ç§æƒ…å†µä¸å¤„ç†æ–¹æ³•\nå·²çŸ¥ä¸‰ä¸ªçª—ä½“ï¼ŒA ä¸º B C çš„çˆ¶æ§ä»¶ï¼ŒB ä¸ C äº’ä¸ºå…„å¼Ÿæ§ä»¶ é‚£ä¹ˆå‚æ•°ä¼ é€’åˆ†ä¸‰ç§æƒ…å†µï¼š\nB å‘ Aï¼ˆC å‘ Aï¼‰ä¼ é€’å‚æ•° B å‘ Cï¼ˆC å‘ Bï¼‰ä¼ é€’å‚æ•° A å‘ Bï¼ˆA å‘ Cï¼‰ä¼ é€’å‚æ•° ä¸‰ä¸ªç©ºé—´å…³ç³»æ¨¡å‹å‚è€ƒå¦‚ä¸‹ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image B å‘ Aï¼ˆC å‘ Aï¼‰ä¼ é€’å‚æ•° //B.h class B { signals: void toA([ParamList]); } //B.cpp B::B() { emit toA([ParamList]); } //A.h class A { private: B *b; private slots: void fromB([ParamList]); } //A.cpp A::A() { b = new B; connect(b, SIGNAL(toA([ParamList])), this, SLOT(fromB([ParamList]))); } void A::fromB([ParamList]) { //get[ParamList] } B å‘ Cï¼ˆC å‘ Bï¼‰ä¼ é€’å‚æ•° //A.h { private: B *b; C *c; } //A.cpp A::A() { b = new B; c = new C; connect(b, SIGNAL(toC([ParamList]), c, SLOT(fromB([ParamList]))); } //B.h class B { signals: void toC([ParamList]); } //B.cpp B::B() { emit toC([ParamList]); } //C.h class C { private slots: void fromB([ParamList]); } //C.cpp void C::fromB([ParamList]) { //get[ParamList] } A å‘ Bï¼ˆA å‘ Cï¼‰ä¼ é€’å‚æ•° //B.h class B { public: void fromA([ParamList]); } //B.cpp void B::fromA([ParamList]) { //get[ParamList] } //A.h class A { private: B *b; } //A.cpp A:A() { b = new B; b-\u0026gt;fromA([ParamList]); } ","permalink":"https://lifeislife.cn/posts/qt%E8%B7%A8%E7%AA%97%E5%8F%A3%E6%8E%A7%E4%BB%B6%E7%B1%BB%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE/","summary":"\u003ch2 id=\"é—®é¢˜ç®€ä»‹\"\u003eé—®é¢˜ç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eæœ¬æ–‡åŸºäº\u003ca href=\"https://blog.csdn.net/shihoongbo/article/details/48681979\"\u003eã€Qtã€‘çª—ä½“é—´ä¼ é€’æ•°æ®ï¼ˆè·¨æ§ä»¶è·¨ç±»ï¼‰ï¼Œä¸‰ç§æƒ…å†µä¸å¤„ç†æ–¹æ³•\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eå·²çŸ¥ä¸‰ä¸ªçª—ä½“ï¼ŒA ä¸º B C çš„çˆ¶æ§ä»¶ï¼ŒB ä¸ C äº’ä¸ºå…„å¼Ÿæ§ä»¶\né‚£ä¹ˆå‚æ•°ä¼ é€’åˆ†ä¸‰ç§æƒ…å†µï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eB å‘ Aï¼ˆC å‘ Aï¼‰ä¼ é€’å‚æ•°\u003c/li\u003e\n\u003cli\u003eB å‘ Cï¼ˆC å‘ Bï¼‰ä¼ é€’å‚æ•°\u003c/li\u003e\n\u003cli\u003eA å‘ Bï¼ˆA å‘ Cï¼‰ä¼ é€’å‚æ•°\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eä¸‰ä¸ªç©ºé—´å…³ç³»æ¨¡å‹å‚è€ƒå¦‚ä¸‹ï¼Œ\u003c/p\u003e","title":"Qt è·¨çª—å£ï¼Œæ§ä»¶ç±»ä¼ é€’æ•°æ®"},{"content":"å®‰è£… Linux sudo apt-get install clang-format windows æ¯æ¯åˆ°è¿™æ—¶å€™å°±è¶Šèƒ½æ„Ÿå—åˆ°ç”¨ Linux ä½œä¸ºå¼€å‘ç¯å¢ƒçš„ä¼˜åŠ¿ï¼ŒWindows å®‰è£…å°±ç¨æ˜¾å¤æ‚äº†ã€‚\nä½ å¯ä»¥é€‰æ‹©å®‰è£…å®Œæ•´çš„ LLVMï¼Œåœ¨binç›®å½•å¯ä»¥çœ‹åˆ°clang-format.exeã€‚å®‰è£…å®Œåï¼Œå°† bin ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚\nä½ ä¹Ÿå¯ä»¥åªä¸‹è½½clang-format.exeï¼Œä»LLVM Snapshot Buildsä¸‹è½½å®‰è£…åŒ…ã€‚åœ¨ä¸‹è½½é¡µé¢çš„åº•éƒ¨ã€‚åŒæ ·ä½ éœ€è¦å°†å•ç‹¬ä¸‹è½½çš„æ–‡ä»¶åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä½¿ç”¨ å…¥é—¨ä½¿ç”¨ Linux å¯ä»¥ç›´æ¥å‘½ä»¤è¡Œï¼Œä½¿ç”¨ä»¥ LLVM ä»£ç é£æ ¼æ ¼å¼åŒ–main.cpp, ç»“æœç›´æ¥å†™åˆ°main.cpp\nclang g-format -i main.cpp -style=LLVM è¿›é˜¶é…ç½® å¦‚æœæ¯æ¬¡ç¼–ç éƒ½å‘½ä»¤è¡Œæ‰§è¡Œä¸€éé‚£ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œè€Œä¸”æ¯æ¬¡ä¿®æ”¹ä¹Ÿä¸æ­¢ä¸€ä¸ªæ–‡ä»¶ã€‚æœ€å¥½çš„æ–¹å¼å°±æ˜¯æ¯æ¬¡ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ã€‚æ¯”å¦‚ VSCode å·²ç»å†…ç½®äº†Clang-Formatç¨ä½œé…ç½®å³å¯å®ç°ï¼Œæ¥ä¸‹æ¥ä»‹ç»å‡ ç§å¸¸è§ IDE å¦‚ä½•é…ç½®Clang-Formatã€‚\nVSCode VSCode æœ€å¸¸ç”¨ï¼Œå› ä¸ºå†…ç½®äº†Clang-Formatä¹Ÿæœ€å®¹æ˜“é…ç½®ã€‚\nå®‰è£…C/C++æ’ä»¶ï¼ŒCtrl+Shift+Xæ‰“å¼€åº”ç”¨å•†åº—ï¼Œæœç´¢C/C++æ‰¾åˆ°ä¸‹å›¾æ’ä»¶ï¼Œå®‰è£…åä¼šè‡ªåŠ¨å®‰è£…Clang-Formatç¨‹åºï¼Œæ— éœ€å•ç‹¬ä¸‹è½½ã€‚é»˜è®¤å®‰è£…è·¯å¾„ä¸ºï¼š C:\\Users\\(ä½ çš„ç”¨æˆ·å)\\.vscode\\extensions\\ms-vscode.cpptools-1.7.1\\LLVM\\bin\\clang-format.exeã€‚ \u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€è®¾ç½®é¡µé¢ï¼ˆå·¦ä¸‹è§’é½¿è½® - è®¾ç½®ï¼‰ï¼Œæœç´¢formatï¼Œå‹¾é€‰Format On Saveï¼Œæ¯æ¬¡ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ ¼å¼åŒ–æ–‡æ¡£ã€‚ä¸‹æ–¹çš„è®¾ç½®æ˜¯å†³å®šæ¯æ¬¡æ ¼å¼åŒ–æ˜¯æ•´ä¸ªæ–‡æ¡£ï¼Œè¿˜æ˜¯åšè¿‡ä¿®æ”¹çš„å†…å®¹ã€‚é»˜è®¤æ˜¯fileï¼Œå¯¹æ•´ä¸ªæ–‡æ¡£è¿›è¡Œæ ¼å¼åŒ–ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ä»åœ¨è®¾ç½®é¡µé¢æœç´¢Clangï¼Œé…ç½®å¦‚ä¸‹ã€‚.clang-formatæ–‡ä»¶æœ€åè¯¦è§£ã€‚ \u003c!DOCTYPE html\u003e Responsive Image æ•ˆæœå›¾ \u003c!DOCTYPE html\u003e Responsive Image QtCreator å®‰è£…Beautifieræ’ä»¶ï¼šå¸®åŠ©ï¼ˆHelpï¼‰-å…³äºæ’ä»¶ï¼ˆAbout Pluginsï¼‰- Beautifierå‹¾é€‰ï¼Œé‡å¯ QtCreatorã€‚ \u003c!DOCTYPE html\u003e Responsive Image å·¥å…·ï¼ˆToolï¼‰- Beautifierï¼Œé…ç½®å¦‚å›¾ã€‚è¯¥é…ç½®ï¼Œä¿å­˜æ–‡æ¡£æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œå¹¶é€‰æ‹©Clang-Formatä½œä¸ºæ ¼å¼åŒ–å·¥å…·ã€‚ \u003c!DOCTYPE html\u003e Responsive Image é…ç½®Clang-Formatç¨‹åºè·¯å¾„ï¼Œå¦‚æœå¼€å¤´å·²ç»apt installå®‰è£…è¿‡ï¼Œè¿™é‡Œä¼šè‡ªåŠ¨è¡¥å…¨ã€‚ \u003c!DOCTYPE html\u003e Responsive Image Use predefined styleå¯ä»¥é€‰æ‹©å†…ç½®çš„ä¸€äº›ä»£ç é£æ ¼ï¼Œå¦‚LLVMï¼ŒGoogleç­‰ã€‚ Use customized styleä½¿ç”¨è‡ªå®šä¹‰çš„ä¸€äº›ä»£ç é£æ ¼ã€‚ç‚¹å‡»æ·»åŠ ï¼ˆAddï¼‰å°†é…ç½®æ–‡ä»¶ç²˜è´´è¿›å»å³å¯ï¼Œå…·ä½“é…ç½®æ–‡ä»¶è§æœ€åã€‚ åˆ«å¿˜äº†ç‚¹å‡»OKä¿å­˜ã€‚ Eclipse å®‰è£…cppstyleæ’ä»¶ï¼šHelp - Eclipse Marketplace - æœç´¢cppstyleã€‚\nä¸‹è½½cpplintã€‚ å¯ä»¥å»githubä¸Šä¸‹è½½cpplintçš„æºç ï¼Œä¸‹è½½å®Œä¹‹åè§£å‹æ”¾åˆ°æŸä¸ªç›®å½•ä¸‹ã€‚\nåœ¨Window - Preferences - C/C++ - CppStyleé¡µé¢æŠŠclang-formatçš„è·¯å¾„æ·»åŠ è¿›å»ï¼Œç„¶åæŠŠcpplintçš„ç›®å½•æŒ‡å‘åˆšæ‰ä¸‹è½½çš„styleguideç›®å½•ä¸‹çš„cpplint/cpplint.pyå°±å¯ä»¥äº†ã€‚å‹¾é€‰ä¸‹é¢çš„Enable cpplintï¼ŒRun clang-format on file saveï¼Œç„¶åç‚¹å‡»Apply and Closeä¿å­˜ä¿®æ”¹å¹¶é€€å‡ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ \u003c!DOCTYPE html\u003e Responsive Image æ­¤æ—¶å†ä¿å­˜ä»£ç ï¼Œå°†ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æœªç»™å½“å‰é¡¹ç›®ç¼–å†™é…ç½®æ–‡ä»¶.clang-formatã€‚å°†æœ€åä¸€ç« æåˆ°çš„é…ç½®æ–‡ä»¶æ”¾åˆ°å½“å‰é¡¹ç›®çš„ä¸‹å³å¯ï¼Œç¨‹åºä¼šè‡ªåŠ¨æœç´¢ã€‚\nCannot find .clang-format or _clang-format configuration file under any level parent directories of path. Clang-format will default to Google style. é…ç½®ç®€ä»‹ ä¸Šæ–‡å¤šæ¬¡æåˆ°äº†.clang-formaté…ç½®æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å†³å®šäº†ä»£ç å¦‚ä½•æ ¼å¼åŒ–ï¼Œç°åœ¨æ¥ä»‹ç»å¦‚ä½•ä½¿ç”¨è¯¥æ–‡ä»¶ã€‚\nå¯¼å‡º.clang-formatæ–‡ä»¶ å¦‚æœé‡æ–°ç¼–å†™ä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œéœ€è¦è€ƒè™‘çš„ä¸œè¥¿å¤ªå¤šï¼Œclang-formatå†…ç½®äº†ä¸€äº›å¸¸è§é£æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å·²æœ‰çš„é…ç½®æ–‡ä»¶ç¨ä½œä¿®æ”¹ï¼Œå½¢æˆè‡ªå·±çš„ä»£ç é£æ ¼ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆå¯¼å‡ºä¸€ä»½å†…ç½®çš„é…ç½®æ–‡ä»¶ã€‚\nclang-format -style=å¯é€‰æ ¼å¼å -dump-config \u0026gt; .clang-format # å¯é€‰æ ¼å¼æœ€å¥½å†™é¢„è®¾é‚£é‚£å‡ ä¸ªå†™æœ€æ¥è¿‘ä½ æƒ³è¦çš„æ ¼å¼ã€‚æ¯”å¦‚æˆ‘æƒ³è¦æ¥è¿‘ Google C++ style çš„ã€‚æˆ‘å°±å†™-style=google å„ä¸ªé€‰é¡¹çš„å«ä¹‰ è¿™é‡Œç»™å‡ºäº†é…ç½®çš„å«ä¹‰ï¼Œæ„Ÿå…´è¶£ä¹Ÿå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œè¿˜æä¾›äº†ä¸€äº›æœ‰æ¡ˆä¾‹ï¼Œæè¿°æ›´æ¸…æ™°ã€‚\nä¸€äº›æ¯”è¾ƒæ˜æ˜¾çš„ä»£ç åˆ†æ ¼åŒºåˆ«\n# æ‹¬å·æ˜¯åˆ†è¡Œï¼Œè¿˜æ˜¯ä¸åˆ†è¡Œï¼Œåªæœ‰å½“ BreakBeforeBraces è®¾ç½®ä¸º Custom æ—¶æ‰æœ‰æ•ˆ BraceWrapping: AfterCaseLabel: true # class å®šä¹‰åé¢ AfterClass: true # æ§åˆ¶è¯­å¥åé¢ AfterControlStatement: true AfterEnum: true AfterFunction: true AfterNamespace: true AfterObjCDeclaration: true AfterStruct: true AfterUnion: true AfterExternBlock: true BeforeCatch: true BeforeElse: true # ç¼©è¿›å¤§æ‹¬å·ï¼Œif else è¯­å¥åé¢çš„æ‹¬å·ç¼©è¿› IndentBraces: false SplitEmptyFunction: true SplitEmptyRecord: true SplitEmptyNamespace: true BreakBeforeBinaryOperators: None BreakBeforeBraces: Custom # tab å®½åº¦ TabWidth: 4 # æ¢è¡Œç¼©è¿›å­—ç¬¦æ•° IndentWidth: 4 # å®å®šä¹‰å¯¹é½ AlignConsecutiveMacros: AcrossEmptyLinesAndComments åŸºäºLLVMä»£ç é£æ ¼ä¿®æ”¹çš„ä¸ªäººä½¿ç”¨ç‰ˆæœ¬ï¼š\n--- Language: Cpp # BasedOnStyle: LLVM AccessModifierOffset: -2 AlignAfterOpenBracket: Align # å®å®šä¹‰å¯¹é½ AlignConsecutiveMacros: AcrossEmptyLinesAndComments AlignConsecutiveAssignments: true AlignConsecutiveDeclarations: true AlignConsecutiveBitFields: true AlignEscapedNewlines: Right AlignOperands: true AlignTrailingComments: true AllowAllArgumentsOnNextLine: true AllowAllConstructorInitializersOnNextLine: true AllowAllParametersOfDeclarationOnNextLine: true AllowShortBlocksOnASingleLine: Never AllowShortCaseLabelsOnASingleLine: false # æ˜¯å¦å…è®¸çŸ­æ–¹æ³•å•è¡Œï¼Œåªæœ‰ä¸€è¡Œçš„å‡½æ•°å°†ä¸ä¼šåˆ†è¡Œï¼Œç›´æ¥å†™åœ¨å‡½æ•°åå AllowShortFunctionsOnASingleLine: false AllowShortLambdasOnASingleLine: All AllowShortIfStatementsOnASingleLine: Never AllowShortLoopsOnASingleLine: false AlwaysBreakAfterDefinitionReturnType: None AlwaysBreakAfterReturnType: None AlwaysBreakBeforeMultilineStrings: false AlwaysBreakTemplateDeclarations: MultiLine BinPackArguments: true BinPackParameters: true # æ‹¬å·æ˜¯åˆ†è¡Œï¼Œè¿˜æ˜¯ä¸åˆ†è¡Œï¼Œåªæœ‰å½“ BreakBeforeBraces è®¾ç½®ä¸º Custom æ—¶æ‰æœ‰æ•ˆ BraceWrapping: AfterCaseLabel: true # class å®šä¹‰åé¢ AfterClass: true # æ§åˆ¶è¯­å¥åé¢ AfterControlStatement: true AfterEnum: true AfterFunction: true AfterNamespace: true AfterObjCDeclaration: true AfterStruct: true AfterUnion: true AfterExternBlock: false BeforeCatch: true BeforeElse: true # ç¼©è¿›å¤§æ‹¬å· IndentBraces: false SplitEmptyFunction: true SplitEmptyRecord: true SplitEmptyNamespace: true BreakBeforeBinaryOperators: None BreakBeforeBraces: Custom BreakBeforeInheritanceComma: false BreakInheritanceList: BeforeColon BreakBeforeTernaryOperators: true BreakConstructorInitializersBeforeComma: false BreakConstructorInitializers: BeforeColon BreakAfterJavaFieldAnnotations: false BreakStringLiterals: true ColumnLimit: 100 CommentPragmas: \u0026#39;^ IWYU pragma:\u0026#39; CompactNamespaces: false ConstructorInitializerAllOnOneLineOrOnePerLine: false ConstructorInitializerIndentWidth: 4 ContinuationIndentWidth: 4 Cpp11BracedListStyle: true DeriveLineEnding: true DerivePointerAlignment: false DisableFormat: false ExperimentalAutoDetectBinPacking: false FixNamespaceComments: true ForEachMacros: - foreach - Q_FOREACH - BOOST_FOREACH IncludeBlocks: Preserve IncludeCategories: - Regex: \u0026#39;^\u0026#34;(llvm|llvm-c|clang|clang-c)/\u0026#39; Priority: 2 SortPriority: 0 - Regex: \u0026#39;^(\u0026lt;|\u0026#34;(gtest|gmock|isl|json)/)\u0026#39; Priority: 3 SortPriority: 0 - Regex: \u0026#39;.*\u0026#39; Priority: 1 SortPriority: 0 IncludeIsMainRegex: \u0026#39;(Test)?$\u0026#39; IncludeIsMainSourceRegex: \u0026#39;\u0026#39; IndentCaseLabels: false IndentGotoLabels: true IndentPPDirectives: None # æ¢è¡Œç¼©è¿›å­—ç¬¦æ•° IndentWidth: 4 IndentWrappedFunctionNames: false JavaScriptQuotes: Leave JavaScriptWrapImports: true KeepEmptyLinesAtTheStartOfBlocks: true MacroBlockBegin: \u0026#39;\u0026#39; MacroBlockEnd: \u0026#39;\u0026#39; MaxEmptyLinesToKeep: 1 NamespaceIndentation: None ObjCBinPackProtocolList: Auto ObjCBlockIndentWidth: 0 ObjCSpaceAfterProperty: false ObjCSpaceBeforeProtocolList: true PenaltyBreakAssignment: 2 PenaltyBreakBeforeFirstCallParameter: 19 PenaltyBreakComment: 300 PenaltyBreakFirstLessLess: 120 PenaltyBreakString: 1000 PenaltyBreakTemplateDeclaration: 10 PenaltyExcessCharacter: 1000000 PenaltyReturnTypeOnItsOwnLine: 60 PointerAlignment: Right ReflowComments: true SortIncludes: true SortUsingDeclarations: true SpaceAfterCStyleCast: false SpaceAfterLogicalNot: false SpaceAfterTemplateKeyword: true SpaceBeforeAssignmentOperators: true SpaceBeforeCpp11BracedList: false SpaceBeforeCtorInitializerColon: true SpaceBeforeInheritanceColon: true SpaceBeforeParens: ControlStatements SpaceBeforeRangeBasedForLoopColon: true SpaceInEmptyBlock: false SpaceInEmptyParentheses: false SpacesBeforeTrailingComments: 1 SpacesInAngles: false SpacesInConditionalStatement: false SpacesInContainerLiterals: true SpacesInCStyleCastParentheses: false SpacesInParentheses: false SpacesInSquareBrackets: false SpaceBeforeSquareBrackets: false Standard: Latest StatementMacros: - Q_UNUSED - QT_REQUIRE_VERSION TabWidth: 8 UseCRLF: false UseTab: Never ... æ ¼å¼åŒ–æœ€æ–°çš„commitä»£ç  clang-formatè¿˜æä¾›ä¸€ä¸ªclang-format-diff.pyè„šæœ¬ï¼Œç”¨æ¥æ ¼å¼åŒ–patchï¼Œcode reviewæäº¤ä»£ç å‰ï¼Œè·‘ä¸€éä¸‹é¢çš„ä»£ç ã€‚\n// æ ¼å¼åŒ–æœ€æ–°çš„ commitï¼Œå¹¶ç›´æ¥åœ¨åŸæ–‡ä»¶ä¸Šä¿®æ”¹ git diff -U0 HEAD^ | clang-format-diff.py -i -p1 å¸¸è§é—®é¢˜ å¦‚ä½•çœ‹æ‡‚å®˜æ–¹æ–‡æ¡£å¹¶ç¼–å†™é…ç½®æ–‡ä»¶ å®˜æ–¹æ–‡æ¡£é‡Œæœ‰å„ç§è®¾ç½®çš„ç¤ºä¾‹ä»£ç ï¼Œå³ä½¿ä¸çŸ¥é“æƒ³è¦çš„æ ¼å¼åŒ–æ˜¯å“ªä¸ªé…ç½®å‚æ•°ï¼Œç¿»ä¸€ç¿»å®˜æ–¹æ–‡æ¡£æ˜¯ç¤ºä¾‹å¤§æ¦‚ç‡èƒ½æ‰¾åˆ°ã€‚é‚£ä¹ˆæ‰¾åˆ°äº†æƒ³è¦çš„é…ç½®å‚æ•°ï¼Œå¦‚ä½•åœ¨æ–‡ä»¶é‡Œé…ç½®å‘¢ï¼Ÿ\nä»¥å®å®šä¹‰å¯¹é½ä¸ºä¾‹ã€‚æˆ‘ä»¬æƒ³è¦å®å®šä¹‰çš„å€¼ä¿æŒå¯¹é½çš„çŠ¶æ€ï¼Œå¦‚ä¸‹ä¸€èŠ‚å›¾ç‰‡æ‰€ç¤ºã€‚å¯ä»¥ç¿»ä¸€éå®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥å‘ç°è¿™ä¸ªç¤ºä¾‹ä»£ç å¯¹åº”çš„å‚æ•°å¯èƒ½æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼ŒAlignConsecutiveMacrosç¿»è¯‘ä¸ºå¯¹é½è¿ç»­çš„å®å®šä¹‰ã€‚é‚£åº”è¯¥å…«ä¹ä¸ç¦»åäº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰¾åˆ°äº†å‚æ•°å¦‚ä½•ç¼–å†™é…ç½®æ–‡ä»¶å‘¢ï¼Ÿå¯ä»¥ç»§ç»­çœ‹è¿™ä¸ªå‚æ•°ä¸‹é¢çš„æ›´å¤šç¤ºä¾‹ï¼Œæ¯ä¸€ä¸ªç¤ºä¾‹éƒ½å¯¹åº”ä¸€ä¸ªé…ç½®å¯èƒ½å€¼Possible valuesã€‚\nACS_None (in configuration: None) Do not align macro definitions on consecutive lines. ACS_Noneä¸ºè¿™ä¸ªé…ç½®çš„ç¼©å†™ï¼ŒNoneè¡¨ç¤ºåœ¨é…ç½®æ–‡ä»¶é‡Œçš„å€¼ã€‚è¯¥é…ç½®è¡¨ç¤ºä¸å¯¹å®å®šä¹‰è¿›è¡Œå¯¹é½æ“ä½œï¼Œåœ¨é…ç½®æ–‡ä»¶é‡Œå¯ä»¥æ·»åŠ å¦‚ä¸‹ï¼š\nAlignConsecutiveMacros: None ACS_Consecutive (in configuration: Consecutive) Align macro definitions on consecutive lines. This will result in formattings like:\n#define SHORT_NAME 42 #define LONGER_NAME 0x007f #define EVEN_LONGER_NAME (2) #define foo(x) (x * x) /* some comment */ #define bar(y, z) (y + z) ACS_Consecutiveä¸ºè¿™ä¸ªé…ç½®çš„ç¼©å†™ï¼ŒConsecutiveè¡¨ç¤ºåœ¨é…ç½®æ–‡ä»¶é‡Œçš„å€¼ã€‚è¯¥é…ç½®è¡¨ç¤ºå¯¹è¿ç»­çš„å®å®šä¹‰è¿›è¡Œå¯¹é½ï¼Œåœ¨é…ç½®æ–‡ä»¶é‡Œå¯ä»¥æ·»åŠ å¦‚ä¸‹ï¼š\nAlignConsecutiveMacros: Consecutive å®å®šä¹‰å¯¹é½å¤±æ•ˆ # å®å®šä¹‰å¯¹é½ AlignConsecutiveMacros: AcrossEmptyLinesAndComments ä½¿ç”¨å®å®šä¹‰å¯¹é½æ›´è¯¦ç»†çš„é…ç½®ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ä½¿ç”¨è¯¥é…ç½®ä¸€å®šè¦ä½¿ç”¨ç­‰å®½çš„å­—ä½“ï¼Œå¦åˆ™é…ç½®ç”Ÿæ•ˆä½†æ˜¯æ˜¾ç¤ºä¸æ­£ç¡®ã€‚ æ¯”å¦‚æˆ‘æ˜¯ç”¨å¾®è½¯é›…é»‘å­—ä½“ä½œä¸ºç¼–ç å­—ä½“ï¼Œå› ä¸ºè¯¥å­—ä½“æ¯ä¸ªå­—ç¬¦ä¸ç­‰å®½ï¼Œå¯¼è‡´æ ¼å¼åŒ–æ­£ç¡®ï¼Œä½†æ˜¯æ˜¾ç¤ºä¸æ­£ç¡®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœå°†å­—ä½“æ¢ä½ç­‰å®½å­—ä½“å¦‚å¸¸ç”¨çš„Consolasï¼Œå°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/clang-format%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BB%A3%E7%A0%81/","summary":"\u003ch2 id=\"å®‰è£…\"\u003eå®‰è£…\u003c/h2\u003e\n\u003ch3 id=\"linux\"\u003eLinux\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt-get install clang-format\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"windows\"\u003ewindows\u003c/h3\u003e\n\u003cp\u003eæ¯æ¯åˆ°è¿™æ—¶å€™å°±è¶Šèƒ½æ„Ÿå—åˆ°ç”¨ Linux ä½œä¸ºå¼€å‘ç¯å¢ƒçš„ä¼˜åŠ¿ï¼ŒWindows å®‰è£…å°±ç¨æ˜¾å¤æ‚äº†ã€‚\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eä½ å¯ä»¥é€‰æ‹©å®‰è£…å®Œæ•´çš„ LLVMï¼Œåœ¨\u003ccode\u003ebin\u003c/code\u003eç›®å½•å¯ä»¥çœ‹åˆ°\u003ccode\u003eclang-format.exe\u003c/code\u003eã€‚å®‰è£…å®Œåï¼Œå°† \u003ccode\u003ebin\u003c/code\u003e ç›®å½•\u003cstrong\u003eæ·»åŠ åˆ°ç¯å¢ƒå˜é‡\u003c/strong\u003eä¸­ã€‚\u003c/p\u003e","title":"Clang-Format æ ¼å¼åŒ–ä»£ç "},{"content":"ä»£ç æ•´æ´ä¹‹é“ æ•´æ´ä»£ç  æ•´æ´ä¹‹é“ ä»£ç æ˜¯æˆ‘ä»¬æœ€ç»ˆç”¨æ¥è¡¨è¾¾éœ€æ±‚çš„é‚£ç§è¯­è¨€ï¼Œä»£ç æ°¸å­˜ï¼›\næ—¶æ—¶ä¿æŒä»£ç æ•´æ´ï¼Œç¨åç­‰äºæ°¸ä¸ï¼ˆLater equals neverï¼‰ï¼›\næ•´æ´ä»£ç åŠ›æ±‚é›†ä¸­ï¼Œæ¯ä¸ªå‡½æ•°ã€æ¯ä¸ªç±»å’Œæ¯ä¸ªæ¨¡å—éƒ½å…¨ç¥è´¯æ³¨äºä¸€ä»¶äº‹ï¼›\næ•´æ´ä»£ç ç®€å•ç›´æ¥ï¼Œä»ä¸éšè—è®¾è®¡è€…çš„æ„å›¾ï¼›\næ•´æ´ä»£ç åº”å½“æœ‰å•å…ƒæµ‹è¯•å’ŒéªŒæ”¶æµ‹è¯•ã€‚å®ƒä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½åï¼Œä»£ç é€šè¿‡å…¶å­—é¢è¡¨è¾¾å«ä¹‰ï¼›\næ¶ˆé™¤é‡å¤ä»£ç ï¼Œæé«˜ä»£ç è¡¨è¾¾åŠ›ã€‚\næœ‰æ„ä¹‰çš„å‘½å é¿å…è¯¯å¯¼ \u0026ldquo;ä¸€ç»„è´¦å·\u0026quot;åˆ«ç”¨accountListè¡¨ç¤ºï¼ŒListå¯¹ç¨‹åºå‘˜æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¯ä»¥ç”¨ accountGroupã€bunchOfAccountsã€ç”šè‡³æ˜¯accountsï¼›\nä¸ä½¿ç”¨åŒºåˆ«è¾ƒå°çš„åç§°ï¼ŒZYXControllerForEfficientHandlingOfStringså’Œ ZYXControllerForEfficientStorageOfStringséš¾ä»¥è¾¨åˆ«ï¼›\nä¸ä½¿ç”¨å°å†™ lã€å¤§å†™ O ä½œå˜é‡åï¼Œçœ‹èµ·æ¥åƒå¸¸é‡ 1ã€0ã€‚\nåšæœ‰æ„ä¹‰çš„åŒºåˆ† ä¸ä»¥æ•°å­—ç³»åˆ—å‘½å(a1ã€a2ã€a3)ï¼ŒæŒ‰ç…§çœŸå®å«ä¹‰å‘½åï¼›\nProduct/ProductInfo/ProductData æ„æ€æ— åŒºåˆ«ï¼Œåªç»Ÿä¸€ç”¨ä¸€ä¸ªï¼›\nåˆ«å†™å†—ä½™çš„åå­—ï¼Œå˜é‡ååˆ«å¸¦variableã€è¡¨ååˆ«å¸¦tableã€‚\nä½¿ç”¨è¯»å¾—å‡ºæ¥çš„åç§° genymdhmsï¼ˆç”Ÿæˆæ—¥æœŸï¼Œå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ï¼‰è‚¯å®šä¸å¦‚generation timestampï¼ˆç”Ÿæˆæ—¶é—´æˆ³ï¼‰æ–¹ä¾¿äº¤æµã€‚ ä½¿ç”¨å¯æœç´¢çš„åç§° å•å­—æ¯åç§°å’Œæ•°å­—å¸¸é‡å¾ˆéš¾åœ¨ä¸Šä¸‹æ–‡ä¸­æ‰¾å‡ºã€‚åç§°é•¿çŸ­åº”ä¸å…¶ä½œç”¨åŸŸå¤§å°ç›¸å¯¹åº”ï¼Œè¶Šæ˜¯é¢‘ç¹å‡ºç°çš„å˜é‡åç§°å¾—è¶Šå®¹æ˜“æœç´¢ (è¶Šé•¿)ã€‚ å‘½åæ—¶é¿å…ä½¿ç”¨ç¼–ç  æŠŠç±»å‹å’Œä½œç”¨åŸŸç¼–ç è¿›åç§°é‡Œå¢åŠ äº†è§£ç è´Ÿæ‹…ã€‚æ„å‘³ç€æ–°äººé™¤äº†äº†è§£ä»£ç é€»è¾‘ä¹‹å¤–ï¼Œè¿˜éœ€è¦å­¦ä¹ è¿™ç§ç¼–ç è¯­è¨€ï¼›\nåˆ«ä½¿ç”¨åŒˆç‰™åˆ©è¯­æ ‡è®°æ³•(æ ¼å¼ï¼š[Prefix]-BaseTag-Name å…¶ä¸­ BaseTag æ˜¯æ•°æ®ç±»å‹çš„ç¼©å†™ï¼ŒName æ˜¯å˜é‡åå­—)ï¼Œçº¯å±å¤šä½™ã€‚ä¾‹å¦‚ï¼ŒszCmdLineçš„å‰ç¼€szè¡¨ç¤ºâ€œä»¥é›¶ç»“æŸçš„å­—ç¬¦ä¸²â€ï¼›\nä¸å¿…ç”¨m_å‰ç¼€æ¥è¡¨æ˜æˆå‘˜å˜é‡ï¼›\næ¥å£å’Œå®ç°åˆ«åœ¨åç§°ä¸­ç¼–ç ã€‚æ¥å£åIShapeFactoryçš„å‰å¯¼\u0026quot;I\u0026quot;æ˜¯åºŸè¯ã€‚å¦‚æœæ¥å£å’Œå®ç°å¿…é¡»é€‰ä¸€ä¸ªç¼–ç ï¼Œå®å¯é€‰å®ç°ï¼ŒShapeFactoryImpéƒ½æ¯”å¯¹æ¥å£åç§°ç¼–ç æ¥çš„å¥½ã€‚\né¿å…æ€ç»´æ˜ å°„ ä¸åº”å½“è®©è¯»è€…åœ¨è„‘ä¸­æŠŠä½ çš„åç§°ç¿»è¯‘ä¸ºä»–ä»¬ç†ŸçŸ¥çš„åç§°ã€‚ä¾‹å¦‚ï¼Œå¾ªç¯è®¡æ•°å™¨è‡ªç„¶æœ‰å¯èƒ½è¢«å‘½åä¸ºiæˆ–jæˆ–kï¼Œä½†åƒä¸‡åˆ«ç”¨å­—æ¯lï¼›\nä¸“ä¸šç¨‹åºå‘˜äº†è§£ï¼Œæ˜ç¡®æ˜¯ç‹é“ï¼Œç¼–å†™èƒ½æ–¹ä¾¿ä»–äººç†è§£çš„ä»£ç ã€‚\nç±»åã€æ–¹æ³•å ç±»ååº”å½“æ˜¯åè¯æˆ–åè¯çŸ­è¯­ï¼Œæ–¹æ³•ååº”å½“æ˜¯åŠ¨è¯æˆ–åŠ¨è¯çŸ­è¯­ã€‚ å‘½åä¸è¦è€å®å¹½é»˜ è¨€åˆ°æ„åˆ°ï¼Œæ„åˆ°è¨€åˆ°ï¼Œä¸è¦åœ¨å‘½åä¸Šå±•ç¤ºå¹½é»˜æ„Ÿã€‚ æ¯ä¸ªæ¦‚å¿µç”¨ä¸€ä¸ªè¯ fetchã€retrieveã€getçº¦å®šä¸€ä¸ªä¸€ç›´ç”¨å³å¯ã€‚ å°½ç®¡ä½¿ç”¨è®¡ç®—æœºç§‘å­¦æœ¯è¯­ åªæœ‰ç¨‹åºå‘˜æ‰ä¼šè¯»ä½ çš„ä»£ç ï¼Œä¸éœ€è¦æŒ‰ç…§é—®é¢˜æ‰€åœ¨é‚»åŸŸå–åç§°ã€‚ åˆ«ç”¨åŒå…³è¯­ addæ–¹æ³•ä¸€èˆ¬è¯­ä¹‰æ˜¯ï¼šæ ¹æ®ä¸¤ä¸ªå€¼è·å¾—ä¸€ä¸ªæ–°çš„å€¼ã€‚å¦‚æœè¦æŠŠå•ä¸ªå€¼åŠ å…¥åˆ°æŸä¸ªé›†åˆï¼Œç”¨insertæˆ–appendå‘½åæ›´å¥½ï¼Œè¿™é‡Œç”¨addå°±æ˜¯åŒå…³è¯­äº†ã€‚ æ·»åŠ æœ‰æ„ä¹‰çš„è¯­å¢ƒ å¾ˆå°‘æœ‰åç§°èƒ½è‡ªæˆ‘è¯´æ˜ï¼Œéœ€è¦ç”¨è‰¯å¥½å‘½åçš„ç±»ã€å‡½æ•°ã€æˆ–è€…å‘½åç©ºé—´æ¥æ”¾ç½®åç§°ï¼Œç»™è¯»è€…æä¾›è¯­å¢ƒï¼Œå¦‚æœåšä¸åˆ°çš„è¯ï¼Œç»™åç§°æ·»åŠ å‰ç¼€å°±æ˜¯æœ€åä¸€æ‹›äº†ã€‚ å‡½æ•° è¶ŠçŸ­è¶Šå¥½ çŸ­å°ï¼Œ20 è¡Œå°é¡¶ï¼›\nif/else/whileè¯­å¥çš„ä»£ç å—åº”è¯¥åªæœ‰ä¸€è¡Œï¼Œè¯¥è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨è¯­å¥ï¼›\nå‡½æ•°çš„ç¼©è¿›å±‚çº§ä¸åº”è¯¥å¤šäºä¸€å±‚æˆ–ä¸¤å±‚ã€‚\nä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ å¦‚æœå‡½æ•°åªæ˜¯åšäº†è¯¥å‡½æ•°åä¸‹åŒä¸€æŠ½è±¡å±‚ä¸Šçš„æ­¥éª¤ï¼Œåˆ™å‡½æ•°åªåšäº†ä¸€ä»¶äº‹ï¼›\nè¦åˆ¤æ–­å‡½æ•°æ˜¯å¦ä¸æ­¢åšäº†ä¸€ä»¶äº‹ï¼Œå°±æ˜¯è¦çœ‹æ˜¯å¦èƒ½å†æ‹†å‡ºä¸€ä¸ªå‡½æ•°ï¼›\næ¯ä¸ªå‡½æ•°ä¸€ä¸ªæŠ½è±¡å±‚çº§ å‘ä¸‹è§„åˆ™ï¼šè®©ä»£ç æ‹¥æœ‰è‡ªé¡¶å‘ä¸‹çš„é˜…è¯»é¡ºåºã€‚æ¯ä¸ªå‡½æ•°åé¢éƒ½è·Ÿç€ä½äºä¸‹ä¸€æŠ½è±¡å±‚çº§çš„å‡½æ•°ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåœ¨æŸ¥çœ‹å‡½æ•°åˆ—è¡¨æ—¶ï¼Œå°±èƒ½å¾ªæŠ½è±¡å±‚çº§å‘ä¸‹é˜…è¯»äº†ã€‚ switch è¯­å¥ æŠŠ switch åŸ‹åœ¨è¾ƒä½çš„æŠ½è±¡å±‚çº§ï¼Œä¸€èˆ¬å¯ä»¥æ”¾åœ¨æŠ½è±¡å·¥å‚åº•ä¸‹ï¼Œç”¨äºåˆ›å»ºå¤šæ€å¯¹è±¡ã€‚ ä½¿ç”¨æè¿°æ€§çš„åç§° å‡½æ•°è¶ŠçŸ­å°ã€åŠŸèƒ½è¶Šé›†ä¸­ï¼Œå°±è¶Šä¾¿äºå–ä¸ªå¥½åå­—ï¼›\nåˆ«å®³æ€•é•¿åç§°ï¼Œé•¿è€Œå…·æœ‰æè¿°æ€§çš„åç§°ï¼Œè¦æ¯”çŸ­è€Œä»¤äººè´¹è§£çš„åç§°å¥½ï¼Œè¦æ¯”æè¿°æ€§çš„é•¿æ³¨é‡Šå¥½ï¼›\nåˆ«å®³æ€•èŠ±æ—¶é—´å–åå­—ã€‚\nå‡½æ•°å‚æ•° å‚æ•°è¶Šå°‘è¶Šå¥½ï¼Œ0 å‚æ•°æœ€å¥½ï¼Œå°½é‡é¿å…ç”¨ä¸‰ä¸ªä»¥ä¸Šå‚æ•°ï¼›\nå‚æ•°è¶Šå¤šï¼Œç¼–å†™ç»„åˆå‚æ•°çš„æµ‹è¯•ç”¨ä¾‹å°±è¶Šå›°éš¾ï¼›\nåˆ«ç”¨æ ‡è¯†å‚æ•°ï¼Œå‘å‡½æ•°ä¼ å…¥boolå€¼æ˜¯ä¸å¥½çš„ï¼Œè¿™æ„å‘³ç€å‡½æ•°ä¸æ­¢åšä¸€ä»¶äº‹ã€‚å¯ä»¥å°†æ­¤å‡½æ•°æ‹†æˆä¸¤ä¸ªï¼›\nå¦‚æœå‡½æ•°éœ€è¦ä¸¤ä¸ªã€ä¸‰ä¸ªæˆ–è€…ä¸‰ä¸ªä»¥ä¸Šå‚æ•°ï¼Œå°±è¯´æ˜å…¶ä¸­ä¸€äº›å‚æ•°åº”è¯¥å°è£…æˆç±»äº†ï¼›\nå°†å‚æ•°çš„é¡ºåºç¼–ç è¿›å‡½æ•°åï¼Œå‡è½»è®°å¿†å‚æ•°é¡ºåºçš„è´Ÿæ‹…ï¼Œä¾‹å¦‚ assertExpectedEqualsActual(expected, actual)ã€‚\nå‰¯ä½œç”¨ (å‡½æ•°åœ¨æ­£å¸¸å·¥ä½œä»»åŠ¡ä¹‹å¤–å¯¹å¤–éƒ¨ç¯å¢ƒæ‰€æ–½åŠ çš„å½±å“) æ£€æŸ¥å¯†ç å¹¶ä¸”åˆå§‹åŒ–sessionçš„æ–¹æ³•å‘½åä¸ºcheckPasswordAndInitializeSessionè€Œé checkPasswordï¼Œå³ä½¿è¿åå•ä¸€èŒè´£åŸåˆ™ä¹Ÿä¸è¦æœ‰å‰¯ä½œç”¨ï¼›\né¿å…ä½¿ç”¨\u0026quot;è¾“å‡ºå‚æ•°\u0026rdquo;ï¼Œå¦‚æœå‡½æ•°å¿…é¡»ä¿®æ”¹æŸç§çŠ¶æ€ï¼Œå°±ä¿®æ”¹æ‰€å±å¯¹è±¡çš„çŠ¶æ€å§ã€‚\nè®¾ç½® (å†™) å’ŒæŸ¥è¯¢ (è¯») åˆ†ç¦» ```C if(set(\u0026quot;username\u0026quot;, \u0026quot;unclebob\u0026quot;)) { ... } ``` å«ä¹‰æ¨¡ç³Šä¸æ¸…ã€‚åº”è¯¥æ”¹ä¸º: ```c if (attributeExists(\u0026quot;username\u0026quot;)) { setAttribute(\u0026quot;username\u0026quot;, \u0026quot;unclebob\u0026quot;); } ``` ä½¿ç”¨å¼‚å¸¸ä»£æ›¿è¿”å›é”™è¯¯ç  è¿”å›é”™è¯¯ç ä¼šè¦æ±‚è°ƒç”¨è€…ç«‹åˆ»å¤„ç†é”™è¯¯ï¼Œä»è€Œå¼•èµ·æ·±å±‚æ¬¡çš„åµŒå¥—ç»“æ„ï¼›\nif (deletePate(page) == E_OK) { if (xxx() == E_OK) { if (yyy() == E_OK) { log(); } else { log(); } } else { log(); } } else { log(); } æ‰€ä»¥éœ€è¦ç”¨try catchå¼‚å¸¸æœºåˆ¶ï¼›\ntry { deletePage(); xxx(); yyy(); zzz(); } catch (Exception e) { log(e-\u0026gt;getMessage()); } try/catchä»£ç å—ä¸‘é™‹ä¸å ªï¼Œæ‰€ä»¥æœ€å¥½æŠŠtryå’Œ catchä»£ç å—çš„ä¸»ä½“æŠ½ç¦»å‡ºæ¥ï¼Œå•ç‹¬å½¢æˆå‡½æ•°ã€‚\ntry { do(); } catch (Exception e) { handle(); } ä¸è¦å†™é‡å¤ä»£ç  é‡å¤æ˜¯è½¯ä»¶ä¸­ä¸€åˆ‡é‚ªæ¶çš„æ ¹æºã€‚å½“ç®—æ³•æ”¹å˜æ—¶éœ€è¦ä¿®æ”¹å¤šå¤„åœ°æ–¹ã€‚ ç»“æ„åŒ–ç¼–ç¨‹ åªè¦å‡½æ•°ä¿æŒçŸ­å°ï¼Œå¶å°”å‡ºç°çš„returnã€breakã€continueè¯­å¥æ²¡æœ‰åå¤„ï¼Œç”šè‡³è¿˜æ¯”å•å…¥å•å‡ºåŸåˆ™æ›´å…·æœ‰è¡¨è¾¾åŠ›ã€‚gotoåªæœ‰åœ¨å¤§å‡½æ•°é‡Œæ‰æœ‰é“ç†ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨ã€‚\nå¹¶ä¸éœ€è¦ä¸€å¼€å§‹å°±æŒ‰ç…§è¿™äº›è§„åˆ™å†™å‡½æ•°ï¼Œæ²¡äººåšå¾—åˆ°ã€‚æƒ³äº›ä»€ä¹ˆå°±å†™ä»€ä¹ˆï¼Œç„¶åå†æ‰“ç£¨è¿™äº›ä»£ç ï¼ŒæŒ‰ç…§è¿™äº›è§„åˆ™ç»„è£…å‡½æ•°ã€‚\næ³¨é‡Š è‹¥ç¼–ç¨‹è¯­è¨€è¶³å¤Ÿæœ‰è¡¨ç°åŠ›ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦æ³¨é‡Šï¼›\næ³¨é‡Šæ€»æ˜¯ä¸€ç§å¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•æ‰¾åˆ°ä¸ç”¨æ³¨é‡Šå°±èƒ½è¡¨è¾¾è‡ªæˆ‘çš„æ–¹æ³•ï¼›\nä»£ç åœ¨æ¼”åŒ–ï¼Œæ³¨é‡Šå´ä¸æ€»æ˜¯éšä¹‹å˜åŠ¨ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šä¸å‡†ç¡®ã€‚\nç”¨ä»£ç æ¥é˜è¿° åˆ›å»ºä¸€ä¸ªä¸æ³¨é‡Šæ‰€è¨€åŒä¸€äº‹ç‰©çš„å‡½æ•°å³å¯ï¼Œ\n// check to see if the employee is eligible for full benefits if ((employee.falgs \u0026amp; HOURLY_FLAG) \u0026amp;\u0026amp; (employee.age \u0026gt; 65)) åº”æ›¿æ¢ä¸º\nif (employee.isEligibleForFullBenefits()) å¥½æ³¨é‡Š æ³•å¾‹ä¿¡æ¯ï¼Œå¹¶ä¸”åªè¦æœ‰å¯èƒ½å°±æŒ‡å‘æ ‡å‡†è®¸å¯æˆ–è€…å¤–éƒ¨æ–‡æ¡£ï¼Œè€Œä¸æ˜¯æ”¾å…¨æ–‡ï¼›\næä¾›åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚è§£é‡ŠæŸä¸ªæŠ½è±¡æ–¹æ³•çš„è¿”å›å€¼ï¼›\nå¯¹æ„å›¾çš„è§£é‡Šï¼Œååº”äº†ä½œè€…æŸä¸ªå†³å®šåé¢çš„æ„å›¾ï¼›\né˜é‡Šã€‚æŠŠæŸäº›æ™¦æ¶©çš„å‚æ•°æˆ–è€…è¿”å›å€¼çš„æ„ä¹‰ç¿»è¯‘æˆå¯è¯»çš„å½¢å¼(æ›´å¥½çš„æ–¹æ³•æ˜¯è®©å®ƒä»¬è‡ªèº«å˜å¾—è¶³å¤Ÿæ¸…æ™°ï¼Œä½†æ˜¯ç±»ä¼¼æ ‡å‡†åº“çš„ä»£ç æˆ‘ä»¬æ— æ³•ä¿®æ”¹)ï¼›\nif (b.compareTo(a) == 1) //b \u0026gt; a è­¦ç¤ºã€‚// don't run unless you have some time to killï¼›\nTODOæ³¨é‡Šï¼›\næ”¾å¤§ ä¸€äº›çœ‹ä¼¼ä¸åˆç†ä¹‹ç‰©çš„é‡è¦æ€§ã€‚\nåæ³¨é‡Š è‡ªè¨€è‡ªè¯­ï¼›\nå¤šä½™çš„æ³¨é‡Šã€‚æŠŠé€»è¾‘åœ¨æ³¨é‡Šé‡Œå†™ä¸€éä¸èƒ½æ¯”ä»£ç æä¾›æ›´å¤šä¿¡æ¯ï¼Œè¯»å®ƒä¸æ¯”è¯»ä»£ç ç®€å•ã€‚ä¸€ç›®äº†ç„¶çš„æˆå‘˜å˜é‡åˆ«åŠ æ³¨é‡Šï¼Œæ˜¾å¾—å¾ˆå¤šä½™ï¼›\nè¯¯å¯¼æ€§æ³¨é‡Šï¼›\néµå¾ªè§„çŸ©çš„æ³¨é‡Šã€‚æ¯ä¸ªå‡½æ•°éƒ½åŠ æ³¨é‡Šã€æ¯ä¸ªå˜é‡éƒ½åŠ æ³¨é‡Šæ˜¯æ„šè ¢çš„ï¼›\næ—¥å¿—å¼æ³¨é‡Šã€‚æœ‰äº†ä»£ç ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œä¸å¿…åœ¨æ–‡ä»¶å¼€å¤´ç»´æŠ¤ä¿®æ”¹æ—¶é—´ã€ä¿®æ”¹äººè¿™ç±»æ—¥å¿—å¼çš„æ³¨é‡Šï¼›\nèƒ½ç”¨å‡½æ•°æˆ–è€…å˜é‡è¡¨ç¤ºå°±åˆ«ç”¨æ³¨é‡Šï¼›\n// does the module from the global list \u0026lt;mod\u0026gt; // depend on the subsystem we are part of? if (smodule.getDependSubsystems().contains(subSysMod.getSubSystem()) å¯ä»¥æ”¹ä¸ºï¼š\nArrayList moduleDependees = smodule.getDependSubsystems(); String ourSubSystem = subSysMod.getSubSystem(); if (moduleDependees.contains(ourSubSystem)) ä½ç½®æ ‡è®°ã€‚æ ‡è®°å¤šäº†ä¼šè¢«æˆ‘ä»¬å¿½ç•¥æ‰ï¼›\n///////////////////// Actions //////////////////////////\nå³æ‹¬å·æ³¨é‡Šï¼›\ntry { while () { if () { ... } // if ... } // while ... } // try å¦‚æœä½ æƒ³æ ‡è®°å³æ‹¬å·ï¼Œå…¶å®åº”è¯¥åšçš„æ˜¯ç¼©çŸ­å‡½æ•°\nç½²å /* add by rick */ æºä»£ç æ§åˆ¶å·¥å…·ä¼šè®°ä½ä½ ï¼Œç½²åæ³¨é‡Šè·Ÿä¸ä¸Šä»£ç çš„æ¼”å˜ï¼›\næ³¨é‡Šæ‰çš„ä»£ç ã€‚ä¼šå¯¼è‡´çœ‹åˆ°è¿™æ®µä»£ç å…¶ä»–äººä¸æ•¢åˆ é™¤ï¼Œä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥å¤§èƒ†åˆ é™¤éœ€è¦æ³¨é‡Šçš„ä»£ç ï¼›\nä¿¡æ¯è¿‡å¤šã€‚åˆ«åœ¨æ³¨é‡Šä¸­æ·»åŠ æœ‰è¶£çš„å†å²è¯é¢˜æˆ–è€…æ— å…³çš„ç»†èŠ‚ï¼›\næ²¡è§£é‡Šæ¸…æ¥šçš„æ³¨é‡Šã€‚æ³¨é‡Šçš„ä½œç”¨æ˜¯è§£é‡Šæœªèƒ½è‡ªè¡Œè§£é‡Šçš„ä»£ç ï¼Œå¦‚æœæ³¨é‡Šæœ¬èº«è¿˜éœ€è¦è§£é‡Šå°±å¤ªé—æ†¾äº†ï¼›\nçŸ­å‡½æ•°çš„å‡½æ•°å¤´æ³¨é‡Šã€‚ä¸ºçŸ­å‡½æ•°é€‰ä¸ªå¥½åå­—æ¯”å‡½æ•°å¤´æ³¨é‡Šè¦å¥½ï¼›\néå…¬å…±APIå‡½æ•°çš„javadoc/phpdocæ³¨é‡Šã€‚\næ ¼å¼ å‚ç›´æ ¼å¼ çŸ­æ–‡ä»¶æ¯”é•¿æ–‡ä»¶æ›´æ˜“äºç†è§£ã€‚å¹³å‡200è¡Œï¼Œæœ€å¤šä¸è¶…è¿‡500è¡Œçš„å•ä¸ªæ–‡ä»¶å¯ä»¥æ„é€ å‡ºè‰²çš„ç³»ç»Ÿï¼›\nåƒæŠ¥çº¸ä¸€æ ·æ’ç‰ˆï¼Œç”±ç•¥åŠè¯¦ï¼Œå±‚å±‚é€’è¿›ï¼›\nåŒºéš”: å°åŒ…å£°æ˜ã€å¯¼å…¥å£°æ˜ã€æ¯ä¸ªå‡½æ•°ä¹‹é—´ï¼Œéƒ½ç”¨ç©ºç™½è¡Œåˆ†éš”å¼€ï¼Œç©ºç™½è¡Œä¸‹é¢æ ‡è¯†ç€æ–°çš„ç‹¬ç«‹æ¦‚å¿µï¼Œè¡¨ç¤ºä¸€ä¸ªæ€è·¯çš„å¼€å§‹\né è¿‘: ç´§å¯†ç›¸å…³çš„ä»£ç åº”è¯¥äº’ç›¸é è¿‘ï¼Œä¾‹å¦‚ä¸€ä¸ªç±»é‡Œçš„å±æ€§ä¹‹é—´åˆ«ç”¨ç©ºç™½è¡Œéš”å¼€ï¼›\npublic class ReporterConfig { //The class name of the reporter listener private String m_className; //The properties of the reporter listener private List\u0026lt;Property\u0026gt; m_properties = new ArrayList\u0026lt;Property\u0026gt;(); public void addProperty(Property property) { m_properties.add(property); } } ///////////////////////å¯¹æ¯”//////////////////////////////////// public class ReporterConfig { private String m_className; private List\u0026lt;Property\u0026gt; m_properties = new ArrayList\u0026lt;Property\u0026gt;(); public void addProperty(Property property) { m_properties.add(property); } } å˜é‡å£°æ˜åº”å°½å¯èƒ½é è¿‘å…¶ä½¿ç”¨ä½ç½®ï¼šå¾ªç¯ä¸­çš„æ§åˆ¶å˜é‡åº”è¯¥æ€»æ˜¯åœ¨å¾ªç¯è¯­å¥ä¸­å£°æ˜ï¼›\næˆå‘˜å˜é‡åº”è¯¥æ”¾åœ¨ç±»çš„é¡¶éƒ¨å£°æ˜ï¼Œä¸è¦å››å¤„æ”¾ç½®ï¼›\nå¦‚æœæŸä¸ªå‡½æ•°è°ƒç”¨äº†å¦å¤–ä¸€ä¸ªï¼Œå°±åº”è¯¥æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬å¸Œæœ›åº•å±‚ç»†èŠ‚æœ€åå±•ç°å‡ºæ¥ï¼Œä¸ç”¨æ²‰æººäºç»†èŠ‚ï¼Œæ‰€ä»¥è°ƒç”¨è€…å°½å¯èƒ½æ”¾åœ¨è¢«è°ƒç”¨è€…ä¹‹ä¸Šï¼›\næ‰§è¡ŒåŒä¸€åŸºç¡€ä»»åŠ¡çš„å‡ ä¸ªå‡½æ•°åº”è¯¥æ”¾åœ¨ä¸€èµ·ã€‚\næ°´å¹³æ ¼å¼ ä¸€è¡Œä»£ç ä¸å¿…æ­»å®ˆ80å­—ç¬¦çš„ä¸Šé™ï¼Œå¶å°”åˆ°è¾¾100å­—ç¬¦ä¸è¶…è¿‡120å­—ç¬¦å³å¯ï¼›\nåŒºéš”ä¸é è¿‘: ç©ºæ ¼å¼ºè°ƒå·¦å³ä¸¤è¾¹çš„åˆ†å‰²ã€‚èµ‹å€¼è¿ç®—ç¬¦ä¸¤è¾¹åŠ ç©ºæ ¼ï¼Œå‡½æ•°åä¸å·¦åœ†æ‹¬å·ä¹‹é—´ä¸åŠ ç©ºæ ¼ï¼Œä¹˜æ³•è¿ç®—ç¬¦åœ¨ä¸åŠ å‡æ³•è¿ç®—ç¬¦ç»„åˆæ—¶ä¸ç”¨åŠ ç©ºæ ¼(a*b - c)ï¼›\nä¸å¿…æ°´å¹³å¯¹é½ã€‚ä¾‹å¦‚å£°æ˜ä¸€å †æˆå‘˜å˜é‡æ—¶ï¼Œå„è¡Œä¸ç”¨æ¯ä¸€ä¸ªå•è¯éƒ½å¯¹é½ï¼Œä»£ç è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·é€šå¸¸ä¼šæŠŠè¿™ç±»å¯¹é½æ¶ˆé™¤æ‰ï¼›\npublic classã€€FitNesseExpediter implements ResponseSender { privateã€€Socketã€€socket; privateã€€InputStreamã€€input; privateã€€OutputStreamã€€output; privateã€€Requestã€€request; }ã€€çŸ­å°çš„ifã€whileã€å‡½æ•°é‡Œæœ€å¥½ä¹Ÿä¸è¦è¿åç¼©è¿›è§„åˆ™ï¼Œä¸è¦è¿™æ ·:if (xx == yy) z = 1ï¼›\nwhileè¯­å¥ä¸ºç©ºï¼Œæœ€å¥½åˆ†è¡Œå†™åˆ†å·ï¼›\nwhile(1) ; å›¢é˜Ÿè§„åˆ™ å›¢é˜Ÿç»å¯¹ä¸è¦ç”¨å„ç§ä¸åŒçš„é£æ ¼æ¥ç¼–å†™æºä»£ç ï¼Œè¿™æ ·ä¼šå¢åŠ å…¶å¤æ‚åº¦ã€‚ å¯¹è±¡å’Œæ•°æ®ç»“æ„ æ•°æ®æŠ½è±¡ å¯¹è±¡ï¼šæš´éœ²è¡Œä¸º (æ¥å£),éšè—æ•°æ® (ç§æœ‰å˜é‡) ï¼› æ•°æ®ç»“æ„ï¼šæ²¡æœ‰æ˜æ˜¾çš„è¡Œä¸º (æ¥å£),æš´éœ²æ•°æ®ã€‚å¦‚DTO(Data Transfer Objects)ã€Entityï¼› æ•°æ®ï¼Œå¯¹è±¡çš„åå¯¹ç§°æ€§ ä½¿ç”¨æ•°æ®ç»“æ„ä¾¿äºåœ¨ä¸æ”¹åŠ¨ç°åœ¨æ•°æ®ç»“æ„çš„å‰æä¸‹æ·»åŠ æ–°å‡½æ•°ï¼›ä½¿ç”¨å¯¹è±¡ä¾¿äºåœ¨ä¸æ”¹åŠ¨æ—¢æœ‰å‡½æ•°çš„å‰æä¸‹æ·»åŠ æ–°ç±»ï¼›\nä½¿ç”¨æ•°æ®ç»“æ„éš¾ä»¥æ·»åŠ æ–°æ•°æ®ç»“æ„ï¼Œå› ä¸ºå¿…é¡»ä¿®æ”¹æ‰€æœ‰å‡½æ•°ï¼›ä½¿ç”¨å¯¹è±¡éš¾ä»¥æ·»åŠ æ–°å‡½æ•°ï¼Œå› ä¸ºå¿…é¡»ä¿®æ”¹æ‰€æœ‰ç±»ï¼›\nä¸‡ç‰©çš†å¯¹è±¡åªæ˜¯ä¸ªä¼ è¯´ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šåœ¨ç®€å•æ•°æ®ç»“æ„ä¸Šåšä¸€äº›è¿‡ç¨‹å¼çš„æ“ä½œã€‚\nLaw of Demeter æ¨¡å—ä¸åº”è¯¥äº†è§£å®ƒæ‰€æ“ä½œå¯¹è±¡çš„å†…éƒ¨æƒ…å½¢ï¼›\nclass Cçš„æ–¹æ³•fåªåº”è¯¥è°ƒç”¨ä»¥ä¸‹å¯¹è±¡çš„æ–¹æ³•ï¼š\nC\nåœ¨æ–¹æ³•fé‡Œåˆ›å»ºçš„å¯¹è±¡\nä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•fçš„å¯¹è±¡\nCæŒæœ‰çš„å¯¹è±¡\næ–¹æ³•ä¸åº”è°ƒç”¨ ç”±ä»»ä½•å‡½æ•°è¿”å›çš„å¯¹è±¡ çš„æ–¹æ³•ã€‚ä¸‹é¢çš„ä»£ç è¿åäº† demeter å®šå¾‹ï¼š\nfinal String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath(); ä¸€ä¸ªç®€å•ä¾‹å­æ˜¯ï¼Œäººå¯ä»¥å‘½ä»¤ä¸€æ¡ç‹—è¡Œèµ°ï¼ˆwalkï¼‰ï¼Œä½†æ˜¯ä¸åº”è¯¥ç›´æ¥æŒ‡æŒ¥ç‹—çš„è…¿è¡Œèµ°ï¼Œåº”è¯¥ç”±ç‹—å»æŒ‡æŒ¥æ§åˆ¶å®ƒçš„è…¿å¦‚ä½•è¡Œèµ°ã€‚\né”™è¯¯å¤„ç† é”™è¯¯å¤„ç†å¾ˆé‡è¦ï¼Œä½†æ˜¯ä¸èƒ½å‡Œä¹±åˆ°æ‰“ä¹±ä»£ç é€»è¾‘ã€‚ ä½¿ç”¨å¼‚å¸¸è€Œä¸æ˜¯è¿”å›é”™è¯¯ç  å¦‚æœä½¿ç”¨é”™è¯¯ç ï¼Œè°ƒç”¨è€…å¿…é¡»åœ¨å‡½æ•°è¿”å›æ—¶ç«‹åˆ»å¤„ç†é”™è¯¯ï¼Œä½†è¿™å¾ˆå®¹æ˜“è¢«æˆ‘ä»¬å¿˜è®°ï¼›\né”™è¯¯ç é€šå¸¸ä¼šå¯¼è‡´åµŒå¥—if elseã€‚\nå…ˆå†™ try-catch è¯­å¥ å½“ç¼–å†™å¯èƒ½ä¼šæŠ›å¼‚å¸¸çš„ä»£ç æ—¶ï¼Œå…ˆå†™å¥½try-catchå†å¾€é‡Œå †é€»è¾‘ã€‚ åœ¨ catch é‡Œå°½å¯èƒ½çš„è®°å½• åœ¨catché‡Œå°½å¯èƒ½çš„è®°å½•é”™è¯¯ä¿¡æ¯ï¼Œè®°å½•å¤±è´¥çš„æ“ä½œä»¥åŠå¤±è´¥çš„ç±»å‹ ä¾è°ƒç”¨è€…å®šä¹‰å¼‚å¸¸ç±» å¯¹é”™è¯¯åˆ†ç±»æœ‰å¾ˆå¤šæ–¹å¼ã€‚å¯ä»¥ä¾å…¶æ¥æºåˆ†ç±»ï¼šæ˜¯æ¥è‡ªç»„ä»¶è¿˜æ˜¯å…¶ä»–åœ°æ–¹ï¼Ÿæˆ–ä¾å…¶ç±»å‹åˆ†ç±»ï¼šæ˜¯è®¾å¤‡é”™è¯¯ã€ç½‘ç»œé”™è¯¯è¿˜æ˜¯ç¼–ç¨‹é”™è¯¯ï¼Ÿ åˆ«è¿”å› null å€¼ è¿”å›nullå€¼åªè¦ä¸€å¤„æ²¡æ£€æŸ¥nullï¼Œåº”ç”¨ç¨‹åºå°±ä¼šå¤±è´¥ï¼›\nå½“æƒ³è¿”å›nullå€¼çš„æ—¶å€™ï¼Œå¯ä»¥è¯•è¯•æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–è€…è¿”å›ç‰¹ä¾‹æ¨¡å¼çš„å¯¹è±¡ã€‚\nåˆ«ä¼ é€’ null å€¼ åœ¨æ–¹æ³•ä¸­ä¼ é€’nullå€¼æ˜¯ä¸€ç§ç³Ÿç³•çš„åšæ³•ï¼Œåº”è¯¥å°½é‡é¿å…ï¼›\nåœ¨æ–¹æ³•é‡Œç”¨ifæˆ–assertè¿‡æ»¤nullå€¼å‚æ•°ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šå‡ºç°è¿è¡Œæ—¶é”™è¯¯ï¼Œæ²¡æœ‰è‰¯å¥½çš„åŠæ³•å¯¹ä»˜è°ƒåŠ¨è€…æ„å¤–ä¼ å…¥çš„nullå€¼ï¼Œæ°å½“çš„åšæ³•å°±æ˜¯ç¦æ­¢ä¼ å…¥nullå€¼ã€‚\nè¾¹ç•Œ å°†ç¬¬ä¸‰æ–¹ä»£ç å¹²å‡€åˆ©è½åœ°æ•´åˆè¿›è‡ªå·±çš„ä»£ç ä¸­ é¿å…å…¬å…± API è¿”å›è¾¹ç•Œæ¥å£ï¼Œæˆ–è€…å°†è¾¹ç•Œæ¥å£ä½œä¸ºå‚æ•°ä¼ é€’ç»™ APIã€‚å°†è¾¹ç•Œä¿ç•™åœ¨è¿‘äº²ç±»ä¸­ï¼›\nä¸è¦åœ¨ç”Ÿäº§ä»£ç ä¸­è¯•éªŒæ–°ä¸œè¥¿ï¼Œè€Œæ˜¯ç¼–å†™æµ‹è¯•æ¥ç†è§£ç¬¬ä¸‰æ–¹ä»£ç ï¼›\né¿å…æˆ‘ä»¬çš„ä»£ç è¿‡å¤šåœ°äº†è§£ç¬¬ä¸‰æ–¹ä»£ç ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚\nå­¦ä¹ æ€§æµ‹è¯•æ˜¯ä¸€ç§ç²¾ç¡®è¯•éªŒï¼Œå¸®åŠ©æˆ‘ä»¬å¢è¿›å¯¹ API çš„ç†è§£ã€‚\nå•å…ƒæµ‹è¯• TDD(Test-driven development) ä¸‰å®šå¾‹ First Law: You may not write production code until you have written a failing unit test.\nSecond Law: You may not write more of a unit test than is sufficient to fail, and not compiling is failing.\nThird Law: You may not write more production code than is sufficient to pass the currently failing test.\nä¿æŒæµ‹è¯•æ•´æ´ è„æµ‹è¯•ç­‰åŒäºæ²¡æµ‹è¯•ï¼Œæµ‹è¯•ä»£ç è¶Šè„ç”Ÿäº§ä»£ç è¶Šéš¾ä¿®æ”¹ï¼›\næµ‹è¯•ä»£ç å’Œç”Ÿäº§ä»£ç ä¸€æ ·é‡è¦ï¼›\næ•´æ´çš„æµ‹è¯•ä»£ç æœ€åº”å…·æœ‰çš„è¦ç´ æ˜¯ï¼šæ•´æ´æ€§ã€‚æµ‹è¯•ä»£ç ä¸­ä¸è¦æœ‰å¤§é‡é‡å¤ä»£ç çš„è°ƒç”¨ã€‚\næ¯ä¸ªæµ‹è¯•ä¸€ä¸ªæ–­è¨€ æ¯ä¸ªæµ‹è¯•å‡½æ•°æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ–­è¨€è¯­å¥ï¼›\næ¯ä¸ªæµ‹è¯•å‡½æ•°ä¸­åªæµ‹è¯•ä¸€ä¸ªæ¦‚å¿µã€‚\næ•´æ´çš„æµ‹è¯•ä¾èµ–äº FIRST è§„åˆ™ fast: æµ‹è¯•ä»£ç åº”è¯¥èƒ½å¤Ÿå¿«é€Ÿè¿è¡Œï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é¢‘ç¹è¿è¡Œå®ƒï¼›\nindependent: æµ‹è¯•åº”è¯¥ç›¸äº’ç‹¬ç«‹ï¼ŒæŸä¸ªæµ‹è¯•ä¸åº”è¯¥ä¾èµ–ä¸Šä¸€ä¸ªæµ‹è¯•çš„ç»“æœï¼Œæµ‹è¯•å¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿›è¡Œï¼›\nrepeatable: æµ‹è¯•åº”å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸­é€šè¿‡ï¼›\nself-validating: æµ‹è¯•åº”è¯¥æœ‰boolå€¼è¾“å‡ºï¼Œä¸åº”é€šè¿‡æŸ¥çœ‹æ—¥å¿—æ¥ç¡®è®¤æµ‹è¯•ç»“æœï¼Œä¸åº”æ‰‹å·¥å¯¹æ¯”ä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶ç¡®è®¤æµ‹è¯•ç»“æœï¼›\ntimely: åŠæ—¶ç¼–å†™æµ‹è¯•ä»£ç ã€‚å•å…ƒæµ‹è¯•åº”è¯¥åœ¨ç”Ÿäº§ä»£ç ä¹‹å‰ç¼–å†™ï¼Œå¦åˆ™ç”Ÿäº§ä»£ç ä¼šå˜å¾—éš¾ä»¥æµ‹è¯•ã€‚\nç±» ç±»çš„ç»„ç»‡ ä»¥ä¸‹é’ˆå¯¹ JAVA è¯­è¨€ï¼Œå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼Œå˜é‡åœ¨å‰ï¼Œæ–¹æ³•åœ¨åï¼Œå…¬æœ‰åœ¨å‰ï¼Œç§æœ‰åœ¨åã€‚\nå…¬å…±é™æ€å¸¸é‡\nç§æœ‰é™æ€å˜é‡\nç§æœ‰å®ä½“å˜é‡\nå…¬å…±å‡½æ•°\nç§æœ‰å·¥å…·å‡½æ•°\nå¦‚æœæµ‹è¯•éœ€è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°æˆ–å˜é‡ï¼Œå¯ä»¥è®¾ä¸ºä¿æŠ¤ç±»å‹ã€‚\nç±»åº”è¯¥çŸ­å° å¯¹äºå‡½æ•°æˆ‘ä»¬è®¡ç®—ä»£ç è¡Œæ•°è¡¡é‡å¤§å°ï¼Œå¯¹äºç±»æˆ‘ä»¬ä½¿ç”¨æƒè´£æ¥è¡¡é‡ï¼›\nç±»çš„åç§°åº”å½“æè¿°å…¶æƒè´£ã€‚ç±»çš„å‘½åæ˜¯åˆ¤æ–­ç±»é•¿åº¦çš„ç¬¬ä¸€ä¸ªæ‰‹æ®µï¼Œå¦‚æœæ— æ³•ä¸ºæŸä¸ªç±»å‘½ä»¥å‡†ç¡®çš„åç§°ï¼Œè¿™ä¸ªç±»å°±å¤ªé•¿äº†ã€‚ç±»ååŒ…å«æ¨¡ç³Šçš„è¯æ±‡ï¼Œå¦‚Processorã€Managerã€Superï¼Œè¿™ç§ç°è±¡å°±è¯´æ˜æœ‰ä¸æ°å½“çš„æƒè´£èšé›†æƒ…å†µï¼›\nå•ä¸€æƒè´£åŸåˆ™ï¼ˆSingle Responsibility Principleï¼ŒSRPï¼‰: ç±»æˆ–è€…æ¨¡å—åº”è¯¥æœ‰ä¸€ä¸ªæƒè´£â€”â€”åªæœ‰ä¸€æ¡ä¿®æ”¹çš„ç†ç”± (A class should have only one reason to change.)ï¼›\nç³»ç»Ÿåº”è¯¥ç”±è®¸å¤šçŸ­å°çš„ç±»è€Œä¸æ˜¯å°‘é‡å·¨å¤§çš„ç±»ç»„æˆï¼›\nç±»åº”è¯¥åªæœ‰å°‘é‡çš„å®ä½“å˜é‡ï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­æ¯ä¸ªå®ä½“å˜é‡éƒ½è¢«æ¯ä¸ªæ–¹æ³•æ‰€ä½¿ç”¨ï¼Œåˆ™è¯´æ˜è¯¥ç±»å…·æœ‰æœ€å¤§çš„å†…èšæ€§ã€‚åˆ›å»ºæœ€å¤§åŒ–çš„å†…èšç±»ä¸å¤ªç°å®ï¼Œä½†æ˜¯åº”è¯¥ä»¥é«˜å†…èšä¸ºç›®æ ‡ï¼Œå†…èšæ€§è¶Šé«˜è¯´æ˜ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡äº’ç›¸ä¾èµ–ã€äº’ç›¸ç»“åˆå½¢æˆä¸€ä¸ªé€»è¾‘æ•´ä½“ï¼›\nä¿æŒå†…èšæ€§å°±ä¼šå¾—åˆ°è®¸å¤šçŸ­å°çš„ç±»ã€‚å¦‚æœä½ æƒ³æŠŠä¸€ä¸ªå¤§å‡½æ•°çš„æŸä¸€å°éƒ¨åˆ†æ‹†è§£æˆå•ç‹¬çš„å‡½æ•°ï¼Œæ‹†è§£å‡ºçš„å‡½æ•°ä½¿ç”¨äº†å¤§å‡½æ•°ä¸­çš„ 4 ä¸ªå˜é‡ï¼Œä¸å¿…å°† 4 ä¸ªå˜é‡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°æ–°å‡½æ•°é‡Œï¼Œä»…éœ€å°†è¿™ 4 ä¸ªå˜é‡æå‡ä¸ºå¤§å‡½æ•°æ‰€åœ¨ç±»çš„å®ä½“å˜é‡ï¼Œä½†æ˜¯è¿™ä¹ˆåšå´å› ä¸ºå®ä½“å˜é‡çš„å¢å¤šè€Œä¸§å¤±äº†ç±»çš„å†…èšæ€§ï¼Œæ›´å¥½å¤šåšæ³•æ˜¯è®©è¿™ 4 ä¸ªå˜é‡æ‹†å‡ºæ¥ï¼Œæ‹¥æœ‰è‡ªå·±çš„ç±»ã€‚å°†å¤§å‡½æ•°æ‹†è§£æˆå°å‡½æ•°å¾€å¾€æ˜¯å°†ç±»æ‹†åˆ†ä¸ºå°ç±»çš„æ—¶æœºã€‚\nä¸ºäº†ä¿®æ”¹è€Œç»„ç»‡ ç±»åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ (å¼€æ”¾é—­åˆåŸåˆ™)ï¼›\nåœ¨ç†æƒ³ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ‰©å±•ç³»ç»Ÿè€Œéä¿®æ”¹ç°æœ‰ä»£ç æ¥æ·»åŠ æ–°ç‰¹æ€§ã€‚\nç³»ç»Ÿ å°†ç³»ç»Ÿçš„æ„é€ ä¸ä½¿ç”¨åˆ†å¼€ è½¯ä»¶ç³»ç»Ÿåº”å°†èµ·å§‹è¿‡ç¨‹å’Œä¹‹åçš„è¿è¡Œé€»è¾‘åˆ†å¼€ã€‚ åˆ†è§£ main å°†å…¨éƒ¨æ„é€ è¿‡ç¨‹æ¬è¿åˆ° mainæˆ–è€…è¢«ç§°ä¹‹ä¸ºmainçš„æ¨¡å—ä¸­ï¼Œæ¶‰åŠç³»ç»Ÿå…¶ä½™éƒ¨åˆ†æ—¶ï¼Œå‡è®¾æ‰€æœ‰å¯¹è±¡éƒ½å·²ç»æ­£ç¡®æ„é€ ï¼›\nä¾èµ–æ³¨å…¥ (DI)ï¼Œæ§åˆ¶åè½¬ (IoC) æ˜¯åˆ†ç¦»æ„é€ ä¸ä½¿ç”¨çš„å¼ºå¤§æœºåˆ¶ã€‚\nè¿­ä»£ è¡¨è¾¾åŠ› ä½œè€…æŠŠä»£ç å†™çš„è¶Šæ¸…æ™°ï¼Œå…¶ä»–äººç†è§£ä»£ç å°±è¶Šå¿«ï¼›\nå¤ªå¤šæ—¶å€™æˆ‘ä»¬æ·±å…¥äºè¦è§£å†³çš„é—®é¢˜ä¸­ï¼Œå†™å‡ºèƒ½å·¥ä½œçš„ä»£ç ä¹‹åï¼Œå°±è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªé—®é¢˜ä¸Šï¼Œæ²¡æœ‰ä¸‹è¶³åŠŸå¤«è°ƒæ•´ä»£ç è®©åæ¥è€…æ˜“äºé˜…è¯»ã€‚å¤šå°‘å°Šé‡ä¸€ä¸‹æˆ‘ä»¬çš„æ‰‹è‰ºï¼ŒèŠ±ä¸€ç‚¹ç‚¹æ—¶é—´åœ¨æ¯ä¸ªå‡½æ•°å’Œç±»ä¸Šã€‚\nå°½å¯èƒ½å°‘çš„ç±»å’Œæ–¹æ³• ä¸ºäº†ä¿æŒç±»å’Œå‡½æ•°çš„çŸ­å°ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ—©å‡ºå¤ªå¤šç»†å°çš„ç±»å’Œæ–¹æ³•ï¼›\nç±»å’Œæ–¹æ³•æ•°é‡å¤ªå¤šï¼Œæœ‰æ—¶æ˜¯ç”±æ¯«æ— æ„ä¹‰çš„æ•™æ¡ä¸»ä¹‰å¯¼è‡´çš„ã€‚\nä»¥ä¸Š 4 æ¡è§„åˆ™ä¼˜å…ˆçº§ä¾æ¬¡é€’å‡ã€‚é‡è¦çš„æ˜¯æµ‹è¯•ã€æ¶ˆé™¤é‡å¤ã€è¡¨è¾¾æ„å›¾ å¹¶å‘ç¼–ç¨‹ ä¸ºä»€ä¹ˆè¦å¹¶å‘ç¼–ç¨‹ å¹¶å‘æ€»èƒ½æ”¹è¿›æ€§èƒ½ï¼›\nç¼–å†™å¹¶å‘ç¨‹åºæ— éœ€ä¿®æ”¹è®¾è®¡ï¼›\nåœ¨é‡‡ç”¨Webæˆ–EJBå®¹å™¨çš„æ—¶å€™ï¼Œç†è§£å¹¶å‘é—®é¢˜å¹¶ä¸é‡è¦ã€‚\né˜²å¾¡å¹¶å‘ä»£ç é—®é¢˜çš„åŸåˆ™ä¸æŠ€å·§ éµå¾ªå•ä¸€èŒè´£åŸåˆ™ã€‚åˆ†ç¦»å¹¶å‘ä»£ç ä¸éå¹¶å‘ä»£ç ï¼›\né™åˆ¶ä¸´ç•ŒåŒºæ•°é‡ã€é™åˆ¶å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼›\né¿å…ä½¿ç”¨å…±äº«æ•°æ®ï¼Œä½¿ç”¨å¯¹è±¡çš„å‰¯æœ¬ï¼›\nçº¿ç¨‹å°½å¯èƒ½åœ°ç‹¬ç«‹ï¼Œä¸ä¸å…¶ä»–çº¿ç¨‹å…±äº«æ•°æ®ã€‚\n","permalink":"https://lifeislife.cn/posts/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","summary":"\u003ch1 id=\"ä»£ç æ•´æ´ä¹‹é“\"\u003eä»£ç æ•´æ´ä¹‹é“\u003c/h1\u003e\n\u003ch2 id=\"æ•´æ´ä»£ç \"\u003eæ•´æ´ä»£ç \u003c/h2\u003e\n\u003ch3 id=\"æ•´æ´ä¹‹é“\"\u003eæ•´æ´ä¹‹é“\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eä»£ç æ˜¯æˆ‘ä»¬æœ€ç»ˆç”¨æ¥è¡¨è¾¾éœ€æ±‚çš„é‚£ç§è¯­è¨€ï¼Œä»£ç æ°¸å­˜ï¼›\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ—¶æ—¶ä¿æŒä»£ç æ•´æ´ï¼Œç¨åç­‰äºæ°¸ä¸ï¼ˆ\u003cstrong\u003eLater equals never\u003c/strong\u003eï¼‰ï¼›\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ•´æ´ä»£ç åŠ›æ±‚é›†ä¸­ï¼Œæ¯ä¸ªå‡½æ•°ã€æ¯ä¸ªç±»å’Œæ¯ä¸ªæ¨¡å—éƒ½å…¨ç¥è´¯æ³¨äºä¸€ä»¶äº‹ï¼›\u003c/p\u003e","title":"ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹è¯»ä¹¦ç¬”è®°"},{"content":"git pull == git fetch + git merge git pull --rebase == git fetch + git rebase æ‹†è§£æ¥çœ‹è¿™ä¸¤ä¸ªå‘½ä»¤å°±æ˜¯åœ¨æ‹‰å–è¿œç«¯ä»£ç åï¼Œæ˜¯åˆå¹¶è¿˜æ˜¯è¿›è¡Œå˜åŸºæ“ä½œã€‚\nå‡è®¾å½“å‰æœ‰ä¸‰ä¸ªæäº¤A,B,Cï¼Œå¹¶ä¸”åˆ†æ”¯featureéƒ½ä¸è¿œç¨‹ä»£ç åŒæ­¥ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬åœ¨featureä¸Šåšäº†ä¸€äº›ä¿®æ”¹ï¼Œå¹¶äº§ç”Ÿäº†Eæäº¤ï¼Œè¿œç¨‹ä¹Ÿæœ‰ç”¨æˆ·è¿›è¡Œäº†æ›´æ–°åˆ°äº†Dæäº¤ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ­¤æ—¶æˆ‘ä»¬éœ€è¦git fetchè·å–æœ€æ–°çš„ä»£ç ï¼Œç„¶ågit mergeè§£å†³å†²çªåé‡æ–°git add git commitï¼Œå¾—åˆ°Fæäº¤ã€‚æœ€ågit pushå³å¯æˆåŠŸæ¨é€ï¼Œå¾—åˆ°å¦‚ä¸‹çš„å…³ç³»\n\u003c!DOCTYPE html\u003e Responsive Image è€Œä½¿ç”¨git rebaseå°†ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤Fï¼ŒFçš„æ–‡ä»¶å†…å®¹å’Œä¸Šé¢Fçš„ä¸€æ ·ï¼Œä½†æˆ‘ä»¬å°† E æäº¤åºŸé™¤ï¼Œå½“å®ƒä¸å­˜åœ¨ï¼ˆå›¾ä¸­ç”¨è™šçº¿è¡¨ç¤ºï¼‰ã€‚ç”±äºè¿™ç§åˆ é™¤ï¼Œé¿å…äº†è±å½¢çš„äº§ç”Ÿï¼Œä¿æŒæäº¤æ›²çº¿ä¸ºç›´çº¿ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨rebaseçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶ä¹Ÿä¼šæœ‰å†²çªï¼Œè¿™æ—¶ Git ä¼šåœæ­¢rebaseå¹¶è®©ç”¨æˆ·å»è§£å†³å†²çªï¼Œè§£å†³å®Œå†²çªåï¼Œç”¨git addæ·»åŠ ä¿®æ”¹çš„æ–‡ä»¶ï¼Œç„¶åä¸ç”¨æ‰§è¡Œgit commitï¼Œç›´æ¥æ‰§è¡Œgit rebase --continueï¼Œè¿™æ · git ä¼šç»§ç»­ apply ä½™ä¸‹çš„è¡¥ä¸ã€‚\n","permalink":"https://lifeislife.cn/posts/git-git-pull%E4%B8%8Egit-pull-rebase%E7%9A%84%E5%8C%BA%E5%88%AB/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit \u003cspan class=\"nv\"\u003epull\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e git fetch + git merge\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit pull --rebase \u003cspan class=\"o\"\u003e==\u003c/span\u003e git fetch + git rebase\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ‹†è§£æ¥çœ‹è¿™ä¸¤ä¸ªå‘½ä»¤å°±æ˜¯åœ¨æ‹‰å–è¿œç«¯ä»£ç åï¼Œæ˜¯åˆå¹¶è¿˜æ˜¯è¿›è¡Œå˜åŸºæ“ä½œã€‚\u003c/p\u003e\n\u003cp\u003eå‡è®¾å½“å‰æœ‰ä¸‰ä¸ªæäº¤\u003ccode\u003eA,B,C\u003c/code\u003eï¼Œå¹¶ä¸”åˆ†æ”¯\u003ccode\u003efeature\u003c/code\u003eéƒ½ä¸è¿œç¨‹ä»£ç åŒæ­¥ã€‚\u003c/p\u003e","title":"Git-git pull ä¸ git pull --rebase çš„åŒºåˆ«"},{"content":"ç”¨æˆ·ä¸€ä¿®æ”¹äº†æ–‡ä»¶åï¼Œå¹¶æ¨é€åˆ°äº†è¿œç«¯ã€‚ç”¨æˆ·äºŒä¹Ÿä¿®æ”¹äº†æ–‡ä»¶åï¼Œåœ¨è¿›è¡Œæ¨é€æ—¶ï¼Œå°±ä¼šè¢«æ‹’ç»ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‹‰å–æœ€æ–°ä»£ç åå‘ç°æœ‰ç›¸åŒçš„æ–‡ä»¶ï¼Œåªæ˜¯æ–‡ä»¶åä¸åŒã€‚index1.htmå’Œindex2.htmä¸¤ä¸ªæ–‡ä»¶å†…å®¹æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æŸ¥çœ‹å½“å‰çŠ¶æ€ï¼Œå¯çŸ¥æœ‰å…¶ä»–æƒ³æŠŠæ–‡ä»¶åä¿®æ”¹ä¸ºindex2.htmã€‚æ­¤æ—¶åªéœ€è¦æ ¹æ®æç¤ºï¼Œåˆ é™¤index.htmã€‚åå•†åå†³å®šä¿ç•™å“ªä¸€ä¸ªæ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬å†³å®šä¿ç•™index1.htmã€‚é‚£ä¹ˆåˆ é™¤index2.htmã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æœ€ååœ¨commitä¸€æ¬¡ï¼Œå³å¯é¡ºåˆ©æ¨é€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/git%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E8%A2%AB%E5%A4%9A%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E6%96%87%E4%BB%B6%E5%90%8D%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","summary":"\u003cp\u003eç”¨æˆ·ä¸€ä¿®æ”¹äº†æ–‡ä»¶åï¼Œå¹¶æ¨é€åˆ°äº†è¿œç«¯ã€‚ç”¨æˆ·äºŒä¹Ÿä¿®æ”¹äº†æ–‡ä»¶åï¼Œåœ¨è¿›è¡Œæ¨é€æ—¶ï¼Œå°±ä¼šè¢«æ‹’ç»ã€‚\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111282158733.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111282158733.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Git åŒä¸€æ–‡ä»¶è¢«å¤šäººä¿®æ”¹äº†æ–‡ä»¶åè¯¥å¦‚ä½•å¤„ç†"},{"content":"ç”¨æˆ·ä¸€ä¿®æ”¹äº†æ–‡ä»¶åï¼Œå¹¶æäº¤è¿œç«¯ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ç”¨æˆ·äºŒä¿®æ”¹äº†æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿè¿›è¡Œäº†æ¨é€ï¼Œ \u003c!DOCTYPE html\u003e Responsive Image å½“ç„¶ä¼šè¢«æ— æƒ…æ‹’ç»ï¼Œ \u003c!DOCTYPE html\u003e Responsive Image è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿååˆ†ç®€å•ï¼ŒGit å¯ä»¥æ™ºèƒ½çš„æ„ŸçŸ¥åˆ°åªæ˜¯æ–‡ä»¶åè¢«ä¿®æ”¹ï¼Œåªéœ€è¦ä¸€ä¸ªgit pullå‘½ä»¤å°±å¯ä»¥è§£å†³ã€‚å¼¹å‡ºå¼¹çª—å¯ä»¥ç›´æ¥ä¿å­˜é€€å‡ºï¼Œé»˜è®¤ä¸å˜å°±è¡Œã€‚\n","permalink":"https://lifeislife.cn/posts/git%E4%BB%96%E4%BA%BA%E5%90%8C%E6%97%B6%E4%BF%AE%E6%94%B9%E4%BA%86%E6%96%87%E4%BB%B6%E5%90%8D%E5%92%8C%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","summary":"\u003cp\u003eç”¨æˆ·ä¸€ä¿®æ”¹äº†æ–‡ä»¶åï¼Œå¹¶æäº¤è¿œç«¯ã€‚\n\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111272319842.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111272319842.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eç”¨æˆ·äºŒä¿®æ”¹äº†æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿè¿›è¡Œäº†æ¨é€ï¼Œ\n\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111272320474.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111272320474.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Git ä»–äººåŒæ—¶ä¿®æ”¹äº†æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹è¯¥å¦‚ä½•å¤„ç†"},{"content":"ä¸åŒäººä¿®æ”¹äº†æ–‡ä»¶çš„ç›¸åŒåŒºåŸŸï¼Œå¦‚æœå‘è¿œç«¯æ¨é€ï¼Œè‚¯å®šä¼šè¢«æ‹’ç»ã€‚è¿™æ—¶å€™å°±éœ€è¦è§£å†³å†²çªï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image é¦–å…ˆæ‹‰å–è¿œç«¯æœ€æ–°çš„ä»£ç ï¼Œä¼šæç¤ºæœ‰å†²çªçš„æ–‡ä»¶ï¼Œ \u003c!DOCTYPE html\u003e Responsive Image æ‰“å¼€å†²çªçš„æ–‡ä»¶ï¼Œgit ä¼šå¯¹å†²çªåŒºåŸŸè¿›è¡Œæ ‡è®°ï¼Œ\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;åˆ°======åŒºåŸŸè¡¨ç¤ºè¿œç«¯çš„ä»£ç ã€‚======åˆ°\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;è¡¨ç¤ºæœ¬åœ°çš„ä»£ç ã€‚è¿™æ—¶å€™å°±éœ€è¦è‡ªå·±æ¥åˆ¤æ–­éœ€è¦å“ªäº›ä»£ç ï¼Œä¹Ÿå¯ä»¥å¢åˆ ä¸€äº›å†…å®¹ï¼Œä¿®æ”¹å®Œæˆåå°†è¿™äº›æ ‡è¯†ç¬¦å·åˆ é™¤ï¼Œç„¶åä¿å­˜é€€å‡ºã€‚ \u003c!DOCTYPE html\u003e Responsive Image git statusæŸ¥çœ‹å½“å‰çŠ¶æ€ï¼Œæç¤ºè¿˜æœ‰æœªåˆå¹¶çš„è·¯å¾„ï¼Œéœ€è¦è¿›è¡Œcommitæ“ä½œã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image åŠæ—¶git pushå½“å‰ä»£ç ã€‚\n","permalink":"https://lifeislife.cn/posts/git%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E7%9B%B8%E5%90%8C%E6%96%87%E4%BB%B6%E7%9A%84%E7%9B%B8%E5%90%8C%E5%8C%BA%E5%9F%9F/","summary":"\u003cp\u003eä¸åŒäººä¿®æ”¹äº†æ–‡ä»¶çš„ç›¸åŒåŒºåŸŸï¼Œå¦‚æœå‘è¿œç«¯æ¨é€ï¼Œè‚¯å®šä¼šè¢«æ‹’ç»ã€‚è¿™æ—¶å€™å°±éœ€è¦è§£å†³å†²çªï¼Œ\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111272217729.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111272217729.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Git ä¸åŒäººä¿®æ”¹äº†ç›¸åŒæ–‡ä»¶çš„ç›¸åŒåŒºåŸŸ"},{"content":"ä¿ç•™ç°åœº æ¢ç©¶åŸå›  æŸ¥é˜…äº†ä¸€ä¸ªç½‘ä¸Šçš„ç­”æ¡ˆï¼Œå¤§æ„å°±æ˜¯ï¼Œä½ åˆ é™¤äº†å±äºä½ çš„æ–‡ä»¶å¤¹ï¼Œä½†å…¶ä¸­åŒ…å«å±äºå¦ä¸€ä¸ªç”¨æˆ·çš„æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å¯èƒ½ä¼šå¡ä½ï¼Œå°±ä¼šåœ¨ Trash ç›®å½•é‡Œä¸ä¼šè¢«å½»åº•åˆ é™¤ã€‚\nè§£å†³æ–¹æ³• sudo rm -rv /home/\u0026lt;your_username\u0026gt;/.local/share/Trash/expunged/* PSï¼šå‘ç°ä¸€ä¸ªå¥½ç”¨çš„ç£ç›˜åˆ†æå·¥å…·ï¼ŒLinux å†…ç½®åº”ç”¨Disk Usage Analyzerã€‚æŒ‰Winé”®åæœç´¢æ¡†æœç´¢å³å¯æ‰“å¼€ã€‚\nå›¾å½¢åŒ–çš„æ–¹å¼å¿«é€Ÿæ‰¾åˆ°å ç”¨ç©ºé—´è¾ƒå¤§çš„ç›®å½•ï¼Œæ–‡ä»¶ã€‚å¯ä»¥å³å‡»ç›´æ¥åˆ é™¤ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/linux%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4%E4%BB%8D%E7%84%B6%E5%9C%A8trash%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%8D%A0%E7%94%A8%E7%A9%BA%E9%97%B4%E8%AF%A5%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4trash%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eæŸ¥é˜…äº†ä¸€ä¸ª\u003ca href=\"https://askubuntu.com/questions/351400/deleting-contents-of-local-share-trash-expunged\"\u003eç½‘ä¸Šçš„ç­”æ¡ˆ\u003c/a\u003eï¼Œå¤§æ„å°±æ˜¯ï¼Œä½ åˆ é™¤äº†å±äºä½ çš„æ–‡ä»¶å¤¹ï¼Œä½†å…¶ä¸­åŒ…å«å±äºå¦ä¸€ä¸ªç”¨æˆ·çš„æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å¯èƒ½ä¼šå¡ä½ï¼Œå°±ä¼šåœ¨ Trash ç›®å½•é‡Œä¸ä¼šè¢«å½»åº•åˆ é™¤ã€‚\u003c/p\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo rm -rv /home/\u0026lt;your_username\u0026gt;/.local/share/Trash/expunged/*\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ePSï¼šå‘ç°ä¸€ä¸ªå¥½ç”¨çš„ç£ç›˜åˆ†æå·¥å…·ï¼ŒLinux å†…ç½®åº”ç”¨\u003ccode\u003eDisk Usage Analyzer\u003c/code\u003eã€‚æŒ‰\u003ccode\u003eWin\u003c/code\u003eé”®åæœç´¢æ¡†æœç´¢å³å¯æ‰“å¼€ã€‚\u003c/p\u003e","title":"Linux æ–‡ä»¶åˆ é™¤ä»ç„¶åœ¨ Trash ç›®å½•ä¸‹å ç”¨ç©ºé—´ï¼Œè¯¥å¦‚ä½•åˆ é™¤ Trash ä¸‹çš„æ–‡ä»¶"},{"content":" ç¡®å®šéœ€è¦åˆå¹¶çš„commit \u003c!DOCTYPE html\u003e Responsive Image å˜åŸºæ“ä½œï¼Œä»¥éœ€è¦åˆå¹¶çš„commitä¸‹æ–¹çš„ç»“ç‚¹ä¸ºåŸºå‡†ã€‚ \u003c!DOCTYPE html\u003e Responsive Image äº¤äº’å¼å˜åŸºï¼Œsquashè¡¨ç¤ºåˆå¹¶åˆ°ä¸Šæ–¹commit \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç¼–å†™åˆå¹¶commitçš„messageï¼Œä¿ç•™åŸå…ˆçš„ä¸å˜ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/git%E5%A6%82%E4%BD%95%E5%90%88%E5%B9%B6%E8%BF%9E%E7%BB%AD%E7%9A%84%E5%A4%9A%E4%B8%AAcommit/","summary":"\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eç¡®å®šéœ€è¦åˆå¹¶çš„\u003ccode\u003ecommit\u003c/code\u003e\n\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111242323497.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111242323497.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå˜åŸºæ“ä½œï¼Œä»¥éœ€è¦åˆå¹¶çš„\u003ccode\u003ecommit\u003c/code\u003eä¸‹æ–¹çš„ç»“ç‚¹ä¸ºåŸºå‡†ã€‚\n\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111242324125.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111242324125.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Git å¦‚ä½•åˆå¹¶è¿ç»­çš„å¤šä¸ª commit"},{"content":" git fetch git merge æˆ–è€… git pull ","permalink":"https://lifeislife.cn/posts/git%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8D%E5%90%8C%E5%8C%BA%E5%9F%9F%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ccode\u003egit fetch\u003c/code\u003e \u003ccode\u003egit merge\u003c/code\u003e\næˆ–è€…\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egit pull\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e","title":"Git ä¸åŒäººä¿®æ”¹äº†åŒä¸€æ–‡ä»¶çš„ä¸åŒåŒºåŸŸè¯¥å¦‚ä½•å¤„ç†"},{"content":"ä»¥ä¸‹æ“ä½œä»…é™äºç»´æŠ¤è‡ªå·±çš„åˆ†æ”¯ï¼Œä¸å»ºè®®å¯¹å›¢é˜Ÿå…±äº«çš„ä»£ç è¿›è¡Œä¿®æ”¹ã€‚\nä»¥æœ€è¿‘ä¸‰æ¬¡æäº¤ä¸ºä¾‹ï¼Œå‡è®¾æƒ³è¦ä¿®æ”¹ç¬¬äºŒä¸ªæäº¤çš„messageã€‚å¯ä»¥ä½¿ç”¨git rebaseå‘½ä»¤ \u003c!DOCTYPE html\u003e Responsive Image git rebase -i 27d2f -iäº¤äº’å¼å˜åŸº 27d2féœ€è¦æ”¹å˜messageçš„æäº¤çš„çˆ¶èŠ‚ç‚¹ \u003c!DOCTYPE html\u003e Responsive Image å¼¹å‡ºé¡µé¢å¯ä»¥ä½¿ç”¨æä¾›çš„å‘½ä»¤è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚pickæ„æ€å°±æ˜¯æŒ‘é€‰éœ€è¦çš„commitã€‚æœ¬æ¬¡ä»»åŠ¡éœ€è¦ä¿®æ”¹messageï¼Œä»ä¸‹æ–¹å¸®åŠ©æ–‡æ¡£é‡Œå¯ä»¥æ‰¾åˆ°rewordå‘½ä»¤ï¼Œå¯ä»¥ä¿ç•™commitï¼Œåªä¿®æ”¹messageã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¿å­˜é€€å‡ºåï¼Œä¼šå¼¹å‡ºå¦å¤–ä¸€ä¸ªç•Œé¢ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨è¿™é‡Œå°±å¯ä»¥çœŸæ­£ä¿®æ”¹éœ€è¦æ›´æ–°çš„messageã€‚ä¿å­˜é€€å‡ºå³å¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/git%E4%BF%AE%E6%94%B9%E8%80%81%E6%97%A7commit%E7%9A%84message/","summary":"\u003cp\u003e\u003cstrong\u003eä»¥ä¸‹æ“ä½œä»…é™äºç»´æŠ¤è‡ªå·±çš„åˆ†æ”¯ï¼Œä¸å»ºè®®å¯¹å›¢é˜Ÿå…±äº«çš„ä»£ç è¿›è¡Œä¿®æ”¹ã€‚\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eä»¥æœ€è¿‘ä¸‰æ¬¡æäº¤ä¸ºä¾‹ï¼Œå‡è®¾æƒ³è¦ä¿®æ”¹ç¬¬äºŒä¸ªæäº¤çš„\u003ccode\u003emessage\u003c/code\u003eã€‚å¯ä»¥ä½¿ç”¨\u003ccode\u003egit rebase\u003c/code\u003eå‘½ä»¤\n\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111222255230.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111222255230.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Git ä¿®æ”¹è€æ—§ commit çš„ message"},{"content":"commitæäº¤åè§‰å¾—æè¿°ä¿¡æ¯ä¸å‡†ç¡®ï¼Œæƒ³é‡æ–°ä¿®æ”¹messageå†…å®¹ï¼Œè¯¥å¦‚ä½•æ“ä½œï¼Ÿ\ngit commit --amend å¼¹å‡ºé¡µé¢å°±å’Œgit commitæ“ä½œæ—¶çš„ä¸€æ ·ï¼Œå°†å…¶æ”¹ä¸ºæ–°å†…å®¹å³å¯ã€‚\n","permalink":"https://lifeislife.cn/posts/git%E4%BF%AE%E6%94%B9%E6%9C%80%E6%96%B0commit%E7%9A%84message/","summary":"\u003cp\u003e\u003ccode\u003ecommit\u003c/code\u003eæäº¤åè§‰å¾—æè¿°ä¿¡æ¯ä¸å‡†ç¡®ï¼Œæƒ³é‡æ–°ä¿®æ”¹\u003ccode\u003emessage\u003c/code\u003eå†…å®¹ï¼Œè¯¥å¦‚ä½•æ“ä½œï¼Ÿ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit commit --amend\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå¼¹å‡ºé¡µé¢å°±å’Œ\u003ccode\u003egit commit\u003c/code\u003eæ“ä½œæ—¶çš„ä¸€æ ·ï¼Œå°†å…¶æ”¹ä¸ºæ–°å†…å®¹å³å¯ã€‚\u003c/p\u003e","title":"Git ä¿®æ”¹æœ€æ–° commit çš„ message"},{"content":"ä¿ç•™ç°åœº undefined reference to sleepåŒæ ·çš„é—®é¢˜ã€‚ åœ¨ä½¿ç”¨ C è¯­è¨€çº¿ç¨‹å‡½æ•°æ—¶ï¼Œéœ€è¦åŒ…å«#include \u0026lt;pthread\u0026gt;ï¼Œç¼–è¯‘æ—¶å°±ä¼šæŠ¥è¿™ç§é”™è¯¯ã€‚\næ¢ç©¶åŸå›  pthread åº“ä¸æ˜¯ Linux ç³»ç»Ÿé»˜è®¤çš„åº“ï¼Œè¿æ¥æ—¶éœ€è¦ä½¿ç”¨é™æ€åº“ libpthread.aï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨pthread_create()åˆ›å»ºçº¿ç¨‹ï¼Œä»¥åŠè°ƒç”¨pthread_atfork()å‡½æ•°å»ºç«‹forkå¤„ç†ç¨‹åºæ—¶ï¼Œéœ€è¦é“¾æ¥è¯¥åº“ã€‚\nè§£å†³æ–¹æ³• gcc thread.c -o thread -lpthread å¦‚æœæ˜¯Makefileé…ç½®çš„ç¼–è¯‘æ¡ä»¶ï¼Œåœ¨Makefileæ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹ï¼š\nCFLAGS += -lpthread ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3c%E8%AF%AD%E8%A8%80undefined-reference-to-pthread-join/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eundefined reference to sleep\u003c/code\u003eåŒæ ·çš„é—®é¢˜ã€‚\nåœ¨ä½¿ç”¨ C è¯­è¨€çº¿ç¨‹å‡½æ•°æ—¶ï¼Œéœ€è¦åŒ…å«\u003ccode\u003e#include \u0026lt;pthread\u0026gt;\u003c/code\u003eï¼Œç¼–è¯‘æ—¶å°±ä¼šæŠ¥è¿™ç§é”™è¯¯ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003epthread\u003c/code\u003e åº“ä¸æ˜¯ \u003ccode\u003eLinux\u003c/code\u003e ç³»ç»Ÿé»˜è®¤çš„åº“ï¼Œè¿æ¥æ—¶éœ€è¦ä½¿ç”¨é™æ€åº“ \u003ccode\u003elibpthread.a\u003c/code\u003eï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨\u003ccode\u003epthread_create()\u003c/code\u003eåˆ›å»ºçº¿ç¨‹ï¼Œä»¥åŠè°ƒç”¨\u003ccode\u003epthread_atfork()\u003c/code\u003eå‡½æ•°å»ºç«‹\u003ccode\u003efork\u003c/code\u003eå¤„ç†ç¨‹åºæ—¶ï¼Œéœ€è¦é“¾æ¥è¯¥åº“ã€‚\u003c/p\u003e","title":"è§£å†³ C è¯­è¨€ undefined reference to pthread_join"},{"content":"ä¿ç•™ç°åœº åœ¨è¿è¡Œä¸­çš„ç•Œé¢ä¸Šç‚¹å‡»æŒ‰é’®æ²¡æœ‰æ•ˆæœï¼Œåƒæ˜¯æŒ‰é’®ä¸Šå±‚æœ‰å…¶ä»–é®ç›–å±‚ã€‚\næ¢ç©¶åŸå›  widgetçš„çˆ¶æ§ä»¶ä¸Šåˆæ·»åŠ äº†å…¶ä»–Widgetï¼Œè¦†ç›–åœ¨äº†æŒ‰é’®ä¸Šï¼Œå› æ­¤æ— æ³•ç‚¹å‡»ã€‚é€šè¿‡newå¾—åˆ°çš„æ§ä»¶ï¼Œé»˜è®¤æ˜¾ç¤ºåœ¨æ¯”å®ƒnewçš„æ—©çš„æ§ä»¶ä¸Šé¢ã€‚\nè§£å†³æ–¹æ³• // å°†æœ‰æŒ‰é’®çš„é‚£ä¸€å±‚widgetç½®äºä¸Šå±‚ widget-\u0026gt;raise(); ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3qt%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%E6%97%A0%E5%93%8D%E5%BA%94/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eåœ¨è¿è¡Œä¸­çš„ç•Œé¢ä¸Šç‚¹å‡»æŒ‰é’®æ²¡æœ‰æ•ˆæœï¼Œåƒæ˜¯æŒ‰é’®ä¸Šå±‚æœ‰å…¶ä»–é®ç›–å±‚ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003ewidget\u003c/code\u003eçš„çˆ¶æ§ä»¶ä¸Šåˆæ·»åŠ äº†å…¶ä»–\u003ccode\u003eWidget\u003c/code\u003eï¼Œè¦†ç›–åœ¨äº†æŒ‰é’®ä¸Šï¼Œå› æ­¤æ— æ³•ç‚¹å‡»ã€‚é€šè¿‡\u003ccode\u003enew\u003c/code\u003eå¾—åˆ°çš„æ§ä»¶ï¼Œé»˜è®¤æ˜¾ç¤ºåœ¨æ¯”å®ƒ\u003ccode\u003enew\u003c/code\u003eçš„æ—©çš„æ§ä»¶ä¸Šé¢ã€‚\u003c/p\u003e","title":"è§£å†³ QT ç‚¹å‡»æŒ‰é’®æ— å“åº”"},{"content":"ä¿ç•™ç°åœº åœ¨æ–°çª—å£ä¸­çš„æ„é€ å‡½æ•°ä¸­æ·»åŠ æ§ä»¶è¿è¡Œåå´æ²¡æœ‰æ˜¾ç¤º\næ¢ç©¶åŸå›  æ–°å»ºçš„å·¥ç¨‹å¸ˆ MainWindow å­ç±»å·¥ç¨‹ï¼Œæ²¡æœ‰è®¾ç½®çˆ¶çª—å£ã€‚\næ²¡æœ‰å°†æ§ä»¶çš„çˆ¶çª—å£è®¾ç½®æˆè‡ªå·±å®šä¹‰çš„ widgetã€‚\n#include\u0026lt;QMainWindow\u0026gt; QMainWindow::QMainWindow(QMainWindow*parent) : QMainWindow(parent), ui(new Ui::QMainWindow) { ui-\u0026gt;setupUi(this); QPushButton* button_1 = new QPushButton(\u0026#34;add\u0026#34;); QPushButton* button_1 = new QPushButton(\u0026#34;del\u0026#34;); } è§£å†³æ–¹æ³• æ–¹æ³• 1ï¼šç»™æŒ‰é’®æ§ä»¶è®¾ç½®çˆ¶çª—å£ï¼šQWidgetï¼Œå¹¶ä¸”æŠŠæŒ‰é’®æ·»åŠ åˆ°çˆ¶çª—å£ä¸­ã€‚\n#include\u0026lt;QMainWindow\u0026gt; #include\u0026lt;QPushButton\u0026gt; #include\u0026lt;QHBoxLayout\u0026gt; QMainWindow::QMainWindow(QMainWindow*parent) : QMainWindow(parent), ui(new Ui::QMainWindow) { ui-\u0026gt;setupUi(this); QWidget* w = new QWidget(); this-\u0026gt;setCentralWidget(w); QHBoxLayout* hLayout = new QHBoxLayout(); QPushButton* button_1 = new QPushButton(\u0026#34;add\u0026#34;); QPushButton* button_1 = new QPushButton(\u0026#34;del\u0026#34;); hLayout-\u0026gt;addWidget(button_1); hLayout-\u0026gt;addWidget(button_2); w-\u0026gt;setLayout(hLayout); } æ–¹æ³• 2ï¼šæ‰‹åŠ¨æŒ‡å®šçˆ¶çª—å£\n#include\u0026lt;QMainWindow\u0026gt; #include\u0026lt;QPushButton\u0026gt; #include\u0026lt;QHBoxLayout\u0026gt; QMainWindow::QMainWindow(QMainWindow*parent) : QMainWindow(parent), ui(new Ui::QMainWindow) { ui-\u0026gt;setupUi(this); QPushButton* button_1 = new QPushButton(\u0026#34;add\u0026#34;); QPushButton* button_1 = new QPushButton(\u0026#34;del\u0026#34;); button_1-\u0026gt;setParent(this); button_2-\u0026gt;setParent(this); button_2-\u0026gt;move(300,100); } ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3qt%E5%9C%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E5%86%99%E7%9A%84%E6%8E%A7%E4%BB%B6%E4%B8%8D%E6%98%BE%E7%A4%BA%E7%9A%84%E9%97%AE%E9%A2%98/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eåœ¨æ–°çª—å£ä¸­çš„æ„é€ å‡½æ•°ä¸­æ·»åŠ æ§ä»¶è¿è¡Œåå´æ²¡æœ‰æ˜¾ç¤º\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eæ–°å»ºçš„å·¥ç¨‹å¸ˆ MainWindow å­ç±»å·¥ç¨‹ï¼Œæ²¡æœ‰è®¾ç½®çˆ¶çª—å£ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ²¡æœ‰å°†æ§ä»¶çš„çˆ¶çª—å£è®¾ç½®æˆè‡ªå·±å®šä¹‰çš„ widgetã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-C++\" data-lang=\"C++\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u0026lt;QMainWindow\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eQMainWindow\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eQMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eQMainWindow\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eparent\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eQMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparent\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eui\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eUi\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eQMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e     \u003cspan class=\"n\"\u003eui\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003esetupUi\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e     \u003cspan class=\"n\"\u003eQPushButton\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ebutton_1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eQPushButton\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;add\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e     \u003cspan class=\"n\"\u003eQPushButton\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ebutton_1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eQPushButton\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;del\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cp\u003eæ–¹æ³• 1ï¼šç»™æŒ‰é’®æ§ä»¶è®¾ç½®çˆ¶çª—å£ï¼šQWidgetï¼Œå¹¶ä¸”æŠŠæŒ‰é’®æ·»åŠ åˆ°çˆ¶çª—å£ä¸­ã€‚\u003c/p\u003e","title":"è§£å†³ QT åœ¨æ„é€ å‡½æ•°ä¸­å†™çš„æ§ä»¶ä¸æ˜¾ç¤ºçš„é—®é¢˜"},{"content":"ä¿ç•™ç°åœº æ‰‹åŠ¨æ‰§è¡Œupdate()æˆ–è€…repaint()éƒ½ä¸èƒ½æ‰§è¡ŒpaintEventå‡½æ•°ã€‚\næ¢ç©¶åŸå›  å¦‚æœæ˜¯ä»£ç newå‡ºæ¥çš„æ§ä»¶ï¼Œæ£€æŸ¥æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºï¼Œæ¯”å¦‚æœ‰æ²¡æœ‰åŠ å…¥åˆ°layoutä¸­ã€‚æˆ–è€…æœ‰æ²¡æœ‰è®¾ç½®çˆ¶çª—å£ï¼ˆå¯èƒ½è¢«å…¶ä»–ç©ºé—´é®æŒ¡ï¼‰ã€‚\næ£€æŸ¥æ§ä»¶widthæˆ–è€…heightå¤§å°æ˜¯å¦ä¸ä¸º 0ã€‚å¦‚æœä¸º 0ï¼Œä¹Ÿä¸ä¼šå‡ºå‡ºå‘paintEventã€‚\nè§£å†³æ–¹æ³• å‚è€ƒ QT åœ¨æ„é€ å‡½æ•°ä¸­å†™çš„æ§ä»¶ä¸æ˜¾ç¤º\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3qwidget%E4%B8%ADupdate%E4%B8%8D%E6%89%A7%E8%A1%8Cpaintevent/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eæ‰‹åŠ¨æ‰§è¡Œ\u003ccode\u003eupdate()\u003c/code\u003eæˆ–è€…\u003ccode\u003erepaint()\u003c/code\u003eéƒ½ä¸èƒ½æ‰§è¡Œ\u003ccode\u003epaintEvent\u003c/code\u003eå‡½æ•°ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eå¦‚æœæ˜¯ä»£ç \u003ccode\u003enew\u003c/code\u003eå‡ºæ¥çš„æ§ä»¶ï¼Œæ£€æŸ¥æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºï¼Œæ¯”å¦‚æœ‰æ²¡æœ‰åŠ å…¥åˆ°\u003ccode\u003elayout\u003c/code\u003eä¸­ã€‚æˆ–è€…æœ‰æ²¡æœ‰è®¾ç½®çˆ¶çª—å£ï¼ˆå¯èƒ½è¢«å…¶ä»–ç©ºé—´é®æŒ¡ï¼‰ã€‚\u003c/p\u003e","title":"QWidget ä¸­ update ä¸æ‰§è¡Œ paintEvent"},{"content":"ä¿ç•™ç°åœº QVector\u0026lt;uint32_t\u0026gt; buttonPins(3); å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º 3 çš„vectoræ•°ç»„ï¼Œç¼–è¯‘æ˜¯ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚\næ¢ç©¶åŸå›  ç¼–è¯‘å™¨å¯èƒ½æ— æ³•åŒºåˆ†è¿™æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°å£°æ˜è¿˜æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡å£°æ˜ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿæ­§ä¹‰ã€‚\nè§£å†³æ–¹æ³• æ–¹æ³• 1ï¼š\nQVector\u0026lt;uint32_t\u0026gt; buttonPins = QVector\u0026lt;uint32_t\u0026gt;(3);//æ˜ç¡®è¿™æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡ æ–¹æ³• 2ï¼šé»˜è®¤æ„é€ å‡½æ•°é‡Œé¢è¿›è¡Œæˆå‘˜å˜é‡çš„åˆå§‹åŒ–\nMainWindow::MainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::MainWindow),buttonPins(3){} æ–¹æ³• 3ï¼šåˆ—è¡¨åˆå§‹åŒ–\nQVector\u0026lt;uint32_t\u0026gt; buttonPins{0, 0, 0}; ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3c-%E4%B8%ADvector%E5%A3%B0%E6%98%8E%E9%94%99%E8%AF%AFexpected-parameter-declarator/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-C++\" data-lang=\"C++\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eQVector\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003euint32_t\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ebuttonPins\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º 3 çš„\u003ccode\u003evector\u003c/code\u003eæ•°ç»„ï¼Œç¼–è¯‘æ˜¯ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eç¼–è¯‘å™¨å¯èƒ½æ— æ³•åŒºåˆ†è¿™æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°å£°æ˜è¿˜æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡å£°æ˜ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿæ­§ä¹‰ã€‚\u003c/p\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cp\u003eæ–¹æ³• 1ï¼š\u003c/p\u003e","title":"è§£å†³ C++ä¸­ vector å£°æ˜é”™è¯¯ expected parameter declarator"},{"content":"ä¿ç•™ç°åœº æ¯”å¦‚åœ¨ä¸€ä¸ªæšä¸¾ç±»å‹ä¸­ï¼Œä¼šå‘Šè¯‰ä½ æŸè¡Œæœ‰è¿™ç§é”™è¯¯ã€‚åˆæˆ–è€…ï¼Œåœ¨ä¸€ä¸ªå®å®šä¹‰è¯­å¥ä¸­å‡ºç°è¿™ç§é”™è¯¯ã€‚\næ¢ç©¶åŸå›  ä¸€èˆ¬æ¥è¯´ï¼Œå‡ºç°è¿™ç§æƒ…å†µï¼Œæ˜¯è¯­å¥ä¸­æœ‰äº›å®šä¹‰çš„åå­—å‘ç”Ÿäº†å†²çªã€‚\nè§£å†³æ–¹æ³• å®šä½é”™è¯¯ä½ç½®ï¼Œæœç´¢æ˜¯å¦æœ‰åŒåçš„å‡½æ•°ï¼Œå˜é‡ç­‰ç­‰ã€‚æ”¹ä¸ªåå­—ã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3expected-identifier-before---token/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eæ¯”å¦‚åœ¨ä¸€ä¸ªæšä¸¾ç±»å‹ä¸­ï¼Œä¼šå‘Šè¯‰ä½ æŸè¡Œæœ‰è¿™ç§é”™è¯¯ã€‚åˆæˆ–è€…ï¼Œåœ¨ä¸€ä¸ªå®å®šä¹‰è¯­å¥ä¸­å‡ºç°è¿™ç§é”™è¯¯ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eä¸€èˆ¬æ¥è¯´ï¼Œå‡ºç°è¿™ç§æƒ…å†µï¼Œæ˜¯è¯­å¥ä¸­æœ‰äº›å®šä¹‰çš„åå­—å‘ç”Ÿäº†å†²çªã€‚\u003c/p\u003e","title":"è§£å†³ expected identifier beforeâ€˜(â€™token"},{"content":"QEMU æ¨¡æ‹Ÿå¤–è®¾çš„åŸç† QEMU ä¸»è¦æ˜¯å®ç°äº† CPU æ ¸çš„æ¨¡æ‹Ÿï¼Œå¯ä»¥è¯»å†™æŸä¸ªåœ°å€ã€‚ QEMU çš„æ¨¡æ‹Ÿå¤–è®¾çš„åŸç†å¾ˆç®€å•ï¼šç¡¬ä»¶å³å†…å­˜ã€‚ è¦åœ¨ QEMU ä¸Šæ¨¡æ‹ŸæŸä¸ªå¤–è®¾ï¼Œæ€è·¯å°±æ˜¯ï¼š\nCPU è¯»æŸä¸ªåœ°å€æ—¶ï¼ŒQEMU æ¨¡æ‹Ÿå¤–è®¾çš„è¡Œä¸ºï¼ŒæŠŠæ•°æ®è¿”å›ç»™ CPU CPU å†™æŸä¸ªåœ°å€æ—¶ï¼ŒQEMU è·å¾—æ•°æ®ï¼Œç”¨æ¥æ¨¡æ‹Ÿå¤–è®¾çš„è¡Œä¸ºã€‚ å³ï¼šè¦æ¨¡æ‹Ÿå¤–è®¾å¤‡ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹å¤–è®¾çš„åœ°å€æä¾›å¯¹åº”çš„è¯»å†™å‡½æ•°å³å¯ã€‚ ä»¥ GPIO ä¸ºä¾‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image QEMU ä¸ºGPIOå†…å­˜åœ°å€æä¾›è¯»å†™å›è°ƒå‡½æ•°ï¼Œ\nstatic void sifive_gpio_write(void *opaque, hwaddr offset, uint64_t value, unsigned int size) static uint64_t sifive_gpio_read(void *opaque, hwaddr offset, unsigned int size) ç»™å¤–è®¾åœ°å€æä¾›è¯»å†™å‡½æ•° æ€ä¹ˆæè¿°æŸæ®µåœ°å€ï¼šåŸºåœ°å€ã€å¤§å°ï¼Ÿå¦‚ä½•ç»™è¿™æ®µåœ°å€æä¾›è¯»å†™å‡½æ•°å‘¢ï¼Ÿè¿™æ®µåœ°å€è®¾ç½®å¥½åï¼Œå¦‚ä½•æ·»åŠ è¿›system_memoryå»ï¼Ÿæœ‰ 2 ç§æ–¹æ³•ã€‚\næ³• 1ï¼šmemory_region_init_io/memory_region_add_subregion ä»¥SIFIVE_UARTä¸ºä¾‹ï¼Œ\nmemory_region_init_io(\u0026amp;s-\u0026gt;mmio, NULL, \u0026amp;uart_ops, s, TYPE_SIFIVE_UART, 0x2000); memory_region_add_subregion(address_space, base, \u0026amp;s-\u0026gt;mmio); memory_region_init_ioå‡½æ•°åˆå§‹åŒ–iomemï¼Œè¯»å†™å‡½æ•°ï¼Œå¤§å°ã€‚ memory_region_add_subregionå‡½æ•°s-\u0026gt;iomemæŒ‡å®šäº†åŸºåœ°å€ï¼Œå¹¶æ·»åŠ è¿›system_memoryä¸­ã€‚ ä»¥åï¼Œå®¢æˆ·æœºä¸Šçš„ç¨‹åºè¯»å†™è¿™å—åœ°å€æ—¶ï¼Œå°±ä¼šå¯¼è‡´å¯¹åº”çš„è¯»å†™å‡½æ•°è¢«è°ƒç”¨ã€‚\næ³• 2ï¼šmemory_region_init_io/sysbus_init_mmio/sysbus_mmio_map ä»¥SIFIVE_GPIOä¸ºä¾‹ï¼Œ\nmemory_region_init_io(\u0026amp;s-\u0026gt;mmio, OBJECT(dev), \u0026amp;gpio_ops, s, TYPE_SIFIVE_GPIO, SIFIVE_GPIO_SIZE); sysbus_init_mmio(SYS_BUS_DEVICE(dev), \u0026amp;s-\u0026gt;mmio); memory_region_init_ioå‡½æ•°åˆå§‹åŒ–iomemï¼Œè¯»å†™å‡½æ•°ï¼Œå¤§å°ã€‚ sysbus_init_mmioå°†mminä¼ ç»™è®¾å¤‡ï¼›\nsysbus_mmio_map(SYS_BUS_DEVICE(\u0026amp;s-\u0026gt;gpio), 0, memmap[SIFIVE_E_DEV_GPIO0].base); sysbus_mmio_mapä»è®¾å¤‡ä¸­å§mmioæ·»åŠ è¿›system_memoryå¹¶æŒ‡å®šåŸºåœ°å€ã€‚\n","permalink":"https://lifeislife.cn/posts/qemu%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E5%A4%96%E8%AE%BE%E6%A8%A1%E6%8B%9F%E4%BB%A5gpio%E4%B8%BA%E4%BE%8B/","summary":"\u003ch2 id=\"qemu-æ¨¡æ‹Ÿå¤–è®¾çš„åŸç†\"\u003eQEMU æ¨¡æ‹Ÿå¤–è®¾çš„åŸç†\u003c/h2\u003e\n\u003cp\u003eQEMU ä¸»è¦æ˜¯å®ç°äº† CPU æ ¸çš„æ¨¡æ‹Ÿï¼Œå¯ä»¥è¯»å†™æŸä¸ªåœ°å€ã€‚\nQEMU çš„æ¨¡æ‹Ÿå¤–è®¾çš„åŸç†å¾ˆç®€å•ï¼š\u003cstrong\u003eç¡¬ä»¶å³å†…å­˜\u003c/strong\u003eã€‚\nè¦åœ¨ QEMU ä¸Šæ¨¡æ‹ŸæŸä¸ªå¤–è®¾ï¼Œæ€è·¯å°±æ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCPU è¯»æŸä¸ªåœ°å€æ—¶ï¼ŒQEMU æ¨¡æ‹Ÿå¤–è®¾çš„è¡Œä¸ºï¼ŒæŠŠæ•°æ®è¿”å›ç»™ CPU\u003c/li\u003e\n\u003cli\u003eCPU å†™æŸä¸ªåœ°å€æ—¶ï¼ŒQEMU è·å¾—æ•°æ®ï¼Œç”¨æ¥æ¨¡æ‹Ÿå¤–è®¾çš„è¡Œä¸ºã€‚\nå³ï¼šè¦æ¨¡æ‹Ÿå¤–è®¾å¤‡ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹å¤–è®¾çš„åœ°å€æä¾›å¯¹åº”çš„è¯»å†™å‡½æ•°å³å¯ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä»¥ GPIO ä¸ºä¾‹ï¼š\u003c/p\u003e","title":"QEMU æºç åˆ†æ-å¤–è®¾æ¨¡æ‹Ÿï¼ˆä»¥ GPIO ä¸ºä¾‹ï¼‰"},{"content":"QOM ç®€ä»‹ QOM(QEMU Object Model) æ˜¯ QEMU çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºæè¿°è™šæ‹Ÿæœºçš„ç»“æ„ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºçš„ CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œã€è¾“å…¥è¾“å‡ºè®¾å¤‡ç­‰ã€‚QEMU ä¸ºäº†æ–¹ä¾¿æ•´ä¸ªç³»ç»Ÿçš„æ„å»ºï¼Œå®ç°äº†è‡ªå·±çš„ä¸€å¥—çš„é¢å‘å¯¹è±¡æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ QOM(QEMU Object Model)ã€‚å®ƒèƒ½å¤Ÿæ–¹ä¾¿çš„è¡¨ç¤ºå„ä¸ªè®¾å¤‡ï¼ˆDeviceï¼‰ä¸æ€»çº¿ï¼ˆBusï¼‰ä¹‹é—´çš„å…³ç³»ã€‚\nè¿™ä¸ªæ¨¡å‹ä¸»è¦åŒ…å«å››ä¸ªç»“æ„ä½“ï¼š\nObject: æ˜¯æ‰€æœ‰å¯¹è±¡çš„ åŸºç±» Base Object ObjectClass: æ˜¯æ‰€æœ‰ç±»å¯¹è±¡çš„åŸºç±» TypeInfoï¼šæ˜¯ç”¨æˆ·ç”¨æ¥å®šä¹‰ä¸€ä¸ª Type çš„å·¥å…·å‹çš„æ•°æ®ç»“æ„ TypeImplï¼šTypeInfo æŠ½è±¡æ•°æ®ç»“æ„ï¼ŒTypeInfo çš„å±æ€§ä¸ TypeImpl çš„å±æ€§å¯¹åº” åœ¨ QEMU é‡Œè¦åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡éœ€è¦å®Œæˆå››æ­¥ï¼š\nå°† TypeInfo æ³¨å†Œ TypeImpl å®ä¾‹åŒ– Classï¼ˆObjectClassï¼‰ å®ä¾‹åŒ– Object æ·»åŠ  Property \u003c!DOCTYPE html\u003e Responsive Image å¦‚ä½•æè¿°ç¡¬ä»¶ ä¸€ä¸ªæ¿å­ä¸Šæœ‰å¾ˆå¤šç¡¬ä»¶ï¼šèŠ¯ç‰‡ï¼ŒLEDã€æŒ‰é”®ã€LCDã€è§¦æ‘¸å±ã€ç½‘å¡ç­‰ç­‰ã€‚èŠ¯ç‰‡é‡Œé¢ä¹Ÿæœ‰å¾ˆå¤šéƒ¨ä»¶ï¼Œæ¯”å¦‚ CPUã€GPIOã€SD æ§åˆ¶å™¨ã€ä¸­æ–­æ§åˆ¶å™¨ç­‰ç­‰ã€‚\nè¿™äº›ç¡¬ä»¶ï¼Œæˆ–æ˜¯éƒ¨ä»¶ï¼Œå„æœ‰ä¸åŒã€‚æ€ä¹ˆæè¿°å®ƒä»¬ï¼Ÿ\næ¯ä¸€ä¸ªéƒ½ä½¿ç”¨ä¸€ä¸ª TypeInfo ç»“æ„ä½“æ¥æè¿°ï¼ŒTypeInfo æ˜¯ç”¨æˆ·ç”¨æ¥å®šä¹‰ä¸€ä¸ªÂ TypeÂ çš„å·¥å…·å‹çš„æ•°æ®ç»“æ„ã€‚å®ƒåŒ…å«äº†å¾ˆå¤šæˆå‘˜å˜é‡ï¼Œè¿™äº›æˆå‘˜åˆåœ¨ä¸€èµ·æè¿°äº†ä¸€ä¸ªè®¾å¤‡ç±»å‹ã€‚\n// include/qom/object.h struct TypeInfo { const char *name; const char *parent; size_t instance_size; size_t instance_align; void (*instance_init)(Object *obj); void (*instance_post_init)(Object *obj); void (*instance_finalize)(Object *obj); bool abstract; size_t class_size;\u000bvoid (*class_init)(ObjectClass *klass, void *data); void (*class_base_init)(ObjectClass *klass, void *data); void *class_data;\u000bInterfaceInfo *interfaces; }; è¿™ä¸ªç»“æ„ä½“æˆ‘ä»¬åœ¨åˆšåˆšä¹Ÿæåˆ°ï¼Œä»–åœ¨å›¾é‡Œæ˜¯ç‹¬ç«‹çš„ï¼Œåœ¨æ³¨å†Œçš„æ—¶å€™ä¼šå°†å®ƒçš„ä¿¡æ¯éƒ½ä¼ ç»™ Typeimpl ç»“æ„ä½“ã€‚\næˆ‘ä»¬ä»¥ Timer ä¸ºä¾‹ï¼Œæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ª Timer å¤–è®¾ï¼Œé¦–å…ˆå°±è¦å®šä¹‰ä¸€ä¸ª Typeinfo ç»“æ„ä½“ã€‚ä»–åœ¨ä»£ç ä¸­åƒè¿™æ ·ã€‚æˆ‘ä»¬åªçœ‹ nameï¼Œè¿™é‡Œç”¨ä¸€ä¸ªå®èµ‹å€¼ï¼Œè¿™ä¸ªå®æ˜¯ä¸ªæˆ‘ä»¬å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œå®ƒå”¯ä¸€æ ‡è¯†äº†è¿™ä¸ªç¡¬ä»¶ã€‚è¿™äº›ç»“æ„ä½“åœ¨è¿è¡Œæ—¶ä¼šè¢«æ³¨å†Œè¿›ç¨‹åºé‡Œï¼Œä¿å­˜åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­å¤‡ç”¨ï¼Œä¸ºä»€ä¹ˆæ˜¯å¤‡ç”¨ï¼Œå› ä¸ºä¸æ˜¯æ¯ä¸€ä¸ªç¡¬ä»¶éƒ½ä¼šè¢«ç”¨åˆ°ã€‚\n// hw/timer/dw_timer.c static const TypeInfo dw_timer_info = { .name = TYPE_DW_TIMER, .parent = TYPE_SYS_BUS_DEVICE, .instance_size = sizeof(DWTimerState), .instance_init = dw_timer_init, .class_init = dw_timer_class_init, }; è¿™äº›ç»“æ„ä½“åœ¨è¿è¡Œæ—¶ä¼šè¢«æ³¨å†Œè¿›ç¨‹åºé‡Œï¼Œä¿å­˜åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­å¤‡ç”¨ï¼Œä¸ºä»€ä¹ˆæ˜¯å¤‡ç”¨ï¼Œå› ä¸ºä¸æ˜¯æ¯ä¸€ä¸ªç¡¬ä»¶éƒ½ä¼šè¢«ç”¨åˆ°ã€‚\nå¦‚ä½•æ³¨å†Œç¡¬ä»¶ ä»€ä¹ˆæ˜¯æ³¨å†Œï¼Œè¯´ç™½äº†å°±æ˜¯å°†ä¸€äº›å¯èƒ½éœ€è¦çš„ä¿¡æ¯æ·»åŠ åˆ°ç³»ç»Ÿä¸­ï¼Œåœ¨ç³»ç»Ÿè¿è¡Œæ—¶èƒ½å¤Ÿéšæ—¶è°ƒç”¨åˆ°ã€‚å°±æ‹¿ Timer æ¥è¯´ï¼Œç°åœ¨å°†ä¸€äº›ä¿¡æ¯æ·»åŠ åˆ°äº†åˆ—è¡¨ï¼Œç³»ç»Ÿè¿è¡Œèµ·æ¥æ—¶æˆ‘å¯ä»¥éšæ—¶ä»é“¾è¡¨ä¸­å–å‡º Timer è¿™ä¸ªè®¾å¤‡çš„ä¿¡æ¯ï¼Œç”¨æ¥å®ä¾‹åŒ–ä¸€ä¸ª Timerï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰æ³¨å†Œ Timerï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å°†å…¶åŠ å…¥åˆ°é“¾è¡¨ï¼Œé‚£æˆ‘åæœŸå°±æ— æ³•æ‰¾åˆ°å®ƒã€‚\næ€ä¹ˆæ³¨å†Œè¿™äº›TypeInfoç»“æ„ä½“å‘¢ï¼Ÿåœ¨å®ç°çš„æºç ä¸­æœ‰è¿™ä¸ªå‡½æ•° dw_timer_register_types()ï¼Œä»–æ˜¯ç”¨æ¥æ³¨å†Œ Timer è¿™ä¸ªè®¾å¤‡çš„ã€‚\næˆ‘ä»¬è¿½æ ¹æº¯æºï¼Œè°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image åˆ†é…ä¸€ä¸ª TypeImpl ç»“æ„ä½“ï¼Œä½¿ç”¨ Typeinfo æ¥è®¾ç½®å®ƒ æŠŠ TypeImpl åŠ å…¥é“¾è¡¨ï¼štype_table åœ¨ QEMU é‡Œé¢ï¼Œæœ‰ä¸€ä¸ªå…¨å±€çš„å“ˆå¸Œè¡¨ type_tableï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰å®šä¹‰çš„ç±»ã€‚åœ¨ type_new é‡Œé¢ï¼Œæˆ‘ä»¬å…ˆä»å…¨å±€è¡¨é‡Œé¢æ ¹æ®åå­— type_table_lookup æŸ¥æ‰¾æ‰¾è¿™ä¸ªç±»ã€‚\nå¦‚æœæ‰¾åˆ°ï¼Œè¯´æ˜è¿™ä¸ªç±»æ›¾ç»è¢«æ³¨å†Œè¿‡ï¼Œå°±æŠ¥é”™ï¼› å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ–°çš„ç±»ï¼Œåˆ™å°† Typeinfo é‡Œé¢ä¿¡æ¯å¡«åˆ° TypeImpl é‡Œé¢ã€‚type_table_add ä¼šå°†è¿™ä¸ªç±»æ³¨å†Œåˆ°å…¨å±€çš„è¡¨é‡Œé¢ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ä»¥ä¸Šçš„è¿‡ç¨‹å¯ä»¥ç”¨ä¸Šå›¾æ¥è¡¨ç¤ºã€‚Typeinfo é€šè¿‡ type_new() ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ TypeImpl ç±»å‹ï¼Œå¹¶ä»¥ name ä¸ºå…³é”®å­—æ·»åŠ åˆ°åä¸º type_table çš„ä¸€ä¸ª hash table ä¸­ã€‚\nä»€ä¹ˆæ—¶å€™æ³¨å†Œè¿™äº›è®¾å¤‡å‘¢ï¼Ÿä¸éœ€è¦æˆ‘ä»¬å»è°ƒç”¨æ³¨å†Œå‡½æ•°ï¼Œä»¥ Timer ä¸ºä¾‹ï¼Œåœ¨ hw/timer/dw_timer.c ä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼Œä¸€èˆ¬åœ¨æœ€åä¸€è¡Œï¼š\ntype_init(dw_timer_register_types) F12æ‰¾åˆ°è¿™ä¸ªå®å®šä¹‰ï¼Œæˆ‘ä»¬è¿½æ ¹æº¯æºï¼Œè°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹\ntype_init() -\u0026gt; module_init() -\u0026gt; register_module_init() type_init(dw_timer_register_types) #define type_init(function) module_init(function, MODULE_INIT_QOM) #define module_init(function, type) \\ static void __attribute__((constructor)) do_qemu_init_ ## function(void) \\ { \\ register_module_init(function, type); \\ } void register_module_init(void (*fn)(void), module_init_type type) { ModuleEntry *e; //æ„é€  ModuleEntry ModuleTypeList *l; //æ„é€ é“¾è¡¨ e = g_malloc0(sizeof(*e)); e-\u0026gt;init = fn; //è®¾ç½®åˆå§‹åŒ–å‡½æ•°ï¼Œfn å³ sifive_gpio_register_types e-\u0026gt;type = type; l = find_type(type); QTAILQ_INSERT_TAIL(l, e, node);//å°† ModuleEntry æ’å…¥é“¾è¡¨å°¾ } type_initæ˜¯ä¸ªå®å®šä¹‰ï¼Œè°ƒç”¨äº†__attribute__((constructor))å‡½æ•°ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ª C è¯­è¨€ä¸­ä½æ•°ä¸å¤šçš„åœ¨mainå‡½æ•°æ‰§è¡Œå‰ï¼Œæ‰§è¡Œçš„å‡½æ•°ã€‚å‡½æ•°ä¸­è°ƒç”¨äº†register_module_initæ³¨å†Œå‡½æ•°ï¼Œè¯´æ˜åœ¨mainå‡½æ•°æ‰§è¡Œå‰ï¼Œå·²ç»æ³¨å†Œå¥½ç¡¬ä»¶äº†ã€‚è¯¥å‡½æ•°å°†ä¸€ä¸ªæ–°çš„ModuleEntryåŠ åˆ°é“¾è¡¨é‡Œã€‚\næ³¨æ„ï¼Œæ³¨å†Œçš„åªæ˜¯ä¸ªå‡½æ•°ï¼Œå¹¶ä¸æ˜¯æ³¨å†Œäº†è®¾å¤‡ã€‚ä¹Ÿå°±æ˜¯å·²ä¸Šè¿‡ç¨‹ï¼Œåªæ˜¯æŠŠä¸€ä¸ª ModuleEntry æ”¾åˆ°äº†ä¸€ä¸ªé“¾è¡¨é‡Œï¼Œè¿™ä¸ª ModuleEntry å¸¦äº†ä¸¤ä¸ªä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯ç±»å‹ã€‚è¿™ä¸ªå‡½æ•°å°±æ˜¯æˆ‘ä»¬çœŸæ­£çš„æ³¨å†Œæ³¨å†Œå‡½æ•°ã€‚\nå·²ä¸Šè¿‡ç¨‹å¤§æ¦‚æ˜¯å¦‚ä¸‹æ‰€ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image é‚£ä»€ä¹ˆæ—¶å€™è¿˜çœŸæ­£æ³¨å†Œè®¾å¤‡å‘¢ï¼Œæˆ‘ä»¬å°±å¾—å›åˆ°ä¸»å‡½æ•°ï¼Œå®ƒæœ‰ä»¥ä¸‹è°ƒç”¨æµç¨‹ï¼Œåœ¨ module_call_init ä¸­ï¼Œæˆ‘ä»¬ä¼šæ‰¾åˆ° MODULE_INIT_QOM è¿™ç§ç±»å‹å¯¹åº”çš„ ModuleTypeList æ‰¾å‡ºåˆ—è¡¨ä¸­æ‰€æœ‰çš„ ModuleEntryï¼Œç„¶åè°ƒç”¨æ¯ä¸ª ModuleEntry çš„ init å‡½æ•°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image // softmmu/runstate.c module_call_init(MODULE_INIT_QOM); // utils/module.csoftmmu/runstate.c void module_call_init(module_init_type type) { ModuleTypeList *l; ModuleEntry *e; // æ‰¾åˆ° MODULE_INIT_QOM è¿™ç§ç±»å‹å¯¹åº”çš„ ModuleTypeList l = find_type(type); QTAILQ_FOREACH(e, l, node) { e-\u0026gt;init(); } } åˆå§‹åŒ–è®¾å¤‡ åˆ°è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨æ³¨å†Œè®¾å¤‡çš„æ—¶å€™è™½ç„¶å°†è®¾å¤‡ä» Typeinfo å˜æˆäº† TypeImplï¼ŒæŠŠ Typeinfo é‡Œçš„ä¿¡æ¯éƒ½å¤åˆ¶åˆ°äº† TypeImplï¼Œä½†æ˜¯ class_init è¿˜æ²¡æœ‰è¢«è°ƒç”¨ï¼Œä¹Ÿå³è¿™ä¸ªç±»ç°åœ¨è¿˜å¤„äºçº¸é¢çš„çŠ¶æ€ã€‚\nä»€ä¹ˆæ—¶å€™æ‰çœŸæ­£åˆå§‹åŒ–è¿™ä¸ªç±»å‘¢ï¼Œè¿™å¾—ç­‰åœ¨ç”¨åˆ°å®ƒçš„æ—¶å€™ã€‚æˆ‘ä»¬åœ¨ä¸€å—æ¿å­ä¸Šæ‰ä¼šç”¨åˆ°ä¸€ä¸ªè®¾å¤‡ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Sifive-e è¿™ä¸ªæ¿å­ï¼Œå‡†ç¡®æ¥è¯´æˆ‘ä»¬ç”¨çš„ä¸æ˜¯è¿™ä¸ªæ¿å­ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨åŸå…ˆçš„ä»£ç ä¸Šåšäº†ä¿®æ”¹ã€‚\nä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œå°±å½“æ˜¯ç”¨çš„ sifive-e è¿™ä¸ªæ¿å­ã€‚åœ¨å®ç°çš„æºç é‡Œï¼Œæœ‰ object_initialize_childå‡½æ•°ï¼Œè·Ÿè¸ªä¸€ä¸‹è°ƒç”¨æµç¨‹å¯ä»¥çœ‹åˆ°æœ€ååœ¨ type_initialize å‡½æ•°ä¸­åˆå§‹åŒ–äº†ç±»ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿçœ‹åˆ°åœ¨ object_init_with_type å‡½æ•°ä¸­å®ä¾‹åŒ–äº†ç±»ã€‚è¿™ä¸ªç¨åå†è®²ã€‚\n// hw/riscv/sifive_e.c\u000bstatic void sifive_e_soc_init(Object *obj) { MachineState *ms = MACHINE(qdev_get_machine()); SiFiveESoCState *s = RISCV_E_SOC(obj); . . .Â object_initialize_child(obj, \u0026#34;timer\u0026#34;, \u0026amp;s-\u0026gt;timer, TYPE_DW_TIMER); } object_initialize_child(obj, name, \u0026amp;s-\u0026gt;timer, TYPE_DW_TIMER); object_initialize_child_internal() object_initialize_child_with_props() object_initialize_child_with_propsv() object_initialize() object_initialize_with_type() type_initialize() { if (ti-\u0026gt;class_init) { ti-\u0026gt;class_init(ti-\u0026gt;class, ti-\u0026gt;class_data); } } object_init_with_type() { if (ti-\u0026gt;instance_init) { ti-\u0026gt;instance_init(obj); } } åœ¨è°ƒç”¨ class_init å‡½æ•°æ—¶ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨çš„è®¾å¤‡æ¨¡å—ä¸‹çš„ dw_timer_class_initï¼Œè¿™ä¸ªå‡½æ•°ä¸­åˆæ˜¯ä¸€äº›é…ç½®ï¼Œå°¤å…¶æ˜¯ realize å‡½æ•°çš„é…ç½®ã€‚è¿˜æœ‰ä¸€äº›å±æ€§çš„é…ç½®ï¼Œå¦‚ Timer çš„é¢‘ç‡ã€‚\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ‰æœ‰æœ‰äº†ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„è®¾å¤‡ç±»ã€‚\nhw/timer/dw_timer.c static void dw_timer_class_init(ObjectClass *klass, void *data) { // è¿™é‡Œåˆæ˜¯ä¸€äº›é…ç½®ï¼Œå°¤å…¶æ˜¯å›è°ƒå‡½æ•°çš„é…ç½® DeviceClass *dc = DEVICE_CLASS(klass); dc-\u0026gt;reset = dw_timer_reset; // è®¾ç½® Timer åŸºæœ¬å±æ€§å¦‚é¢‘ç‡ç­‰ device_class_set_props(dc, dw_timer_properties); dc-\u0026gt;vmsd = \u0026amp;vmstate_dw_timer; dc-\u0026gt;realize = dw_timer_realize; } å®ä¾‹åŒ–è®¾å¤‡ è¯´ç™½äº†åˆå§‹åŒ–è¿‡ç¨‹å°±æ˜¯åœ¨é…ç½®å„ç§ç»“æ„ä½“æˆå‘˜çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚åˆšåˆšçš„åˆå§‹åŒ–è¿‡ç¨‹å°±æ˜¯åœ¨é…ç½® DeviceClass è¿™ä¸ªç±»çš„å„ä¸ªæˆå‘˜ã€‚å®é™…ä¸Šæˆ‘ä»¬è¿˜æ²¡æœ‰çœŸæ­£å®ä¾‹åŒ– Timerï¼Œæˆ‘ä»¬è¿˜ä¸èƒ½ä½¿ç”¨å®ƒã€‚\næˆ‘ä»¬åªæœ‰åœ¨å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨å®ƒï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰æåˆ°çš„ instance_init()ã€‚ä½†æ˜¯åœ¨ QEMU ä¸­è¦å®ä¾‹åŒ–ä¸€ä¸ªè®¾å¤‡ï¼Œä¸ä»…ä»…éœ€è¦è°ƒç”¨ instance_initï¼Œè¿˜éœ€è¦è°ƒç”¨åˆšåˆšåˆå§‹åŒ–æ—¶è®¾ç½®çš„ realize å‡½æ•°ã€‚\nstatic const TypeInfo dw_timer_info = { .name = TYPE_DW_TIMER, .parent = TYPE_SYS_BUS_DEVICE, .instance_size = sizeof(DWTimerState), .instance_init = dw_timer_init, .class_init = dw_timer_class_init, }; // hw/timer/dw_timer.c static void dw_timer_init(Object *obj) { DWTimerState *s = DWTIMER(obj); // ä¸ºè¿™æ®µå†…å­˜æ³¨å†Œå›è°ƒå‡½æ•° memory_region_init_io(\u0026amp;s-\u0026gt;iomem, obj, \u0026amp;dw_timer_ops, s, \u0026#34;dw_timer\u0026#34;, 0x2000); sysbus_init_mmio(SYS_BUS_DEVICE(obj), \u0026amp;s-\u0026gt;iomem); } è¿™ä¸¤ä¸ªå‡½æ•°çš„åŠŸèƒ½å¾ˆåƒï¼Œå…·ä½“ç»†èŠ‚å·®å¼‚æˆ‘ä¹Ÿè¿˜æ²¡å¼„æ˜ç™½ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ instance_init ä¸€å®šè¦åœ¨ realize ä¹‹å‰å®Œæˆï¼Œå¹¶ä¸”æ²¡æœ‰é”™è¯¯ã€‚å¦åˆ™å°†æ— æ³•å®Œæˆå®ä¾‹åŒ–ã€‚\n// hw/timer/dw_timer.c static void dw_timer_realize(DeviceState *dev, Error **errp) { DWTimerState *s = DWTIMER(dev); sysbus_init_irq(SYS_BUS_DEVICE(dev), \u0026amp;s-\u0026gt;irq); for (int i = 0; i \u0026lt; n; i++) { s-\u0026gt;timer[i] = timer_new_ns(QEMU_CLOCK_VIRTUAL, dw_timer_interrupt, s); } } instance_init è¿™ä¸ªå‡½æ•°ä¸»è¦å®Œæˆçš„å·¥ä½œå°±æ˜¯ä¸ºä¸€æ®µå†…å­˜ç»‘å®šäº†è¯»å†™å‡½æ•°ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œæˆ‘ä»¬å†å¾€ä¸‹çœ‹ã€‚\nå¦‚ä½•æ“ä½œè®¾å¤‡ è®¾å¤‡åˆ›å»ºå®Œæˆäº†ï¼Œé‚£ QEMU æ˜¯å¦‚ä½•æ¨¡æ‹Ÿè®¾å¤‡çš„è¡Œä¸ºçš„ï¼Ÿè¿™ä¹Ÿæ˜¯ QEMU é©±åŠ¨å¼€å‘æœ€é‡è¦çš„ä¸€æ­¥ï¼Œå› ä¸ºä»¥ä¸Šçš„éƒ¨åˆ†æ˜¯å®ç°è®¾å¤‡æ‰€å¿…é¡»çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å‚è€ƒå…¶ä»–å·²ç»å®ç°çš„æ¨¡å—ï¼Œä¿®æ”¹æˆæˆ‘ä»¬çš„ä¿¡æ¯å³å¯ã€‚\nä½†æ˜¯æ¯ä¸ª IP çš„å¯„å­˜å™¨ä¸åŒï¼Œä»–ä»¬çš„åŠŸèƒ½ä¹Ÿå°±ä¸åŒï¼Œè¿™æ˜¯æˆ‘ä»¬çœŸæ­£éœ€è¦å®ç°çš„å†…å®¹ã€‚æˆ‘ä»¬çŸ¥é“å†™é©±åŠ¨å…¶å®å°±æ˜¯æ“ä½œå„ä¸ª IP çš„å¯„å­˜å™¨ï¼Œä»¥å®ç°æƒ³è¦çš„åŠŸèƒ½ã€‚å¯¹åº”åˆ° QEMU ä¸­ï¼Œå°±æˆäº†åœ¨æ“ä½œå„ä¸ªå¯„å­˜å™¨æ—¶ï¼Œæˆ‘ä»¬è¦åœ¨ QEMU ä¸­å°†é©±åŠ¨å¯„å­˜å™¨çš„åŠŸèƒ½å…ˆæ¨¡æ‹Ÿå‡ºæ¥ï¼Œå†è¿”å›ç»™é©±åŠ¨ç¨‹åºã€‚\nä»¥ Timer ä¸ºä¾‹æˆ‘æƒ³è¦è·å– TimerNLoadCount çš„å€¼ï¼ŒçœŸå®ç¡¬ä»¶æœ‰è¿™ä¸ªå¯„å­˜å™¨ä¿å­˜äº†å€¼ï¼Œä½†æ˜¯ QEMU ä¸Šæˆ‘ä»¬å°±å¾—ç»´æŠ¤ä¸€ä¸ªå˜é‡å»ä¿å­˜è¿™ä¸ªå€¼ã€‚åœ¨éœ€è¦çš„æ—¶å€™èƒ½è¯»å–åˆ°ã€‚æ¯”å¦‚ä»£ç é‡Œæ¯”è¾ƒé‡è¦çš„å‚æ•°æ˜¯ offsetï¼Œè¿™ä¸ªå‚æ•°æ˜¯åŸºäºå¤–è®¾åŸºåœ°å€çš„åç§»ï¼Œå…¶å®å°±æ˜¯å¯„å­˜å™¨çš„åç§»é‡ã€‚æ¯”å¦‚æˆ‘ä»¬æŸ¥çœ‹ Timer çš„æ‰‹å†Œï¼ŒTimerNLoadCount åç§»é‡ä¸º 0ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åœ¨é©±åŠ¨ä¸­è¯»å–åœ°å€ä¸º 0x2000000 æ—¶ï¼Œä»£ç å°±ä¼šèµ°åˆ°è¿™é‡Œï¼Œå› ä¸ºæˆ‘ä»¬ç»´æŠ¤äº†ä¸€ä¸ª timer_n_load_count å˜é‡ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥å°†è¿™ä¸ªå˜é‡å½“å‰å€¼è¿”å›å³å¯ï¼Œè¿™å°±æ˜¯è¿™ä¸ªå¯„å­˜å™¨çš„å€¼ã€‚æˆ‘ä»¬è¦å†™è¿™ä¸ªå¯„å­˜å™¨ä¹ŸåŒç†ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° timer_n_load_count è¿™ä¸ªå˜é‡ã€‚\n// hw/timer/dw_timer.c static uint64_t dw_timer_read(void *opaque, hwaddr offset, unsigned size) { DWTimerState *s = opaque; int index = 0; switch (offset) { case TimerNLoadCount: case 1*0x14: case 2*0x14: index = offset / 0x14; return s-\u0026gt;timer_n_load_count[index]; . . . } static void dw_timer_write(void *opaque, hwaddr offset, uint64_t val64, unsigned size) { DWTimerState *s = opaque; uint32_t value = val64; int index = 0; int change = 0;\u000bswitch (offset) { case TimerNLoadCount: case 1*0x14: case 2*0x14: index = (offset) / 0x14; s-\u0026gt;timer_n_load_count[index] = value; set_alarm_time(s,index); return; . . . } è¯»å†™å‡½æ•°å†™å¥½äº†ï¼Œéœ€è¦ç»™è°è°ƒç”¨å‘¢ã€‚æˆ‘ä»¬åˆšåˆšæåˆ°äº†ï¼Œè¿™æ˜¯ä¸ªå›è°ƒå‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ç»™ä¸€æ®µå†…å­˜æ³¨å†Œè¿™ä¸ªå›è°ƒå‡½æ•°ã€‚å¦‚ä»£ç æ‰€ç¤ºã€‚æˆ‘ä»¬ç»™ Timer iomem ç»‘å®šäº†è¯»å†™å‡½æ•°ã€‚å…·ä½“å“ªä¸€æ®µåœ°å€è¿˜æ²¡å®šï¼Œä½†æ˜¯æˆ‘ä»¬å®šäº† 0x2000 è¿™ä¹ˆé•¿ä¸€æ®µã€‚æˆ‘è§‰å¾—è¿™é‡Œåº”è¯¥æ˜¯æœ€é«˜ä½çš„ä¸€ä¸ªå¯„å­˜å™¨åç§»é‡ã€‚å› ä¸ºå†é«˜å°±æ²¡å•¥ç”¨äº†ï¼Œæˆ–è€…å°±æ˜¯ SoC é‡Œå®šçš„å¯„å­˜å™¨ç©ºé—´å¤§å° 0x1000ã€‚è¿™é‡Œåº”è¯¥æ˜¯ä¸ºäº†å›¾çœäº‹å†™çš„ä¸€ä¸ªå€¼ã€‚\n// hw/timer/dw_timer.c static const MemoryRegionOps dw_timer_ops = { .read = dw_timer_read, .write = dw_timer_write, .endianness = DEVICE_NATIVE_ENDIAN, }; static void dw_timer_init(Object *obj) { DWTimerState *s = DWTIMER(obj); // ä¸ºè¿™æ®µå†…å­˜æ³¨å†Œå›è°ƒå‡½æ•° memory_region_init_io(\u0026amp;s-\u0026gt;iomem, obj, \u0026amp;dw_timer_ops, s, \u0026#34;dw_timer\u0026#34;, 0x2000); sysbus_init_mmio(SYS_BUS_DEVICE(obj), \u0026amp;s-\u0026gt;iomem); } ä¸‹é¢åœ¨hw/riscv/sifive_e.cé‡Œä¼šæ˜ å°„å¯„å­˜å™¨ç©ºé—´åˆ° QEMU çš„å†…å­˜ç©ºé—´ã€‚\n// hw/riscv/sifive_e.c sysbus_mmio_map(SYS_BUS_DEVICE(\u0026amp;s-\u0026gt;timer), 0, memmap[SIFIVE_E_DEV_TIMER].base); å‚è€ƒ QEMU ä¸­åŸºäº QOM çš„ VFIO ç±»çš„å®šä¹‰ - EwanHai - åšå®¢å›­ ","permalink":"https://lifeislife.cn/posts/qemu%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E8%99%9A%E6%8B%9F%E5%A4%96%E8%AE%BE%E5%88%9B%E5%BB%BA/","summary":"\u003ch1 id=\"qom-ç®€ä»‹\"\u003eQOM ç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eQOM(QEMU Object Model) æ˜¯ QEMU çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºæè¿°è™šæ‹Ÿæœºçš„ç»“æ„ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºçš„ CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œã€è¾“å…¥è¾“å‡ºè®¾å¤‡ç­‰ã€‚QEMU ä¸ºäº†æ–¹ä¾¿æ•´ä¸ªç³»ç»Ÿçš„æ„å»ºï¼Œå®ç°äº†è‡ªå·±çš„ä¸€å¥—çš„é¢å‘å¯¹è±¡æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ QOM(QEMU Object Model)ã€‚å®ƒèƒ½å¤Ÿæ–¹ä¾¿çš„è¡¨ç¤ºå„ä¸ªè®¾å¤‡ï¼ˆDeviceï¼‰ä¸æ€»çº¿ï¼ˆBusï¼‰ä¹‹é—´çš„å…³ç³»ã€‚\u003c/p\u003e","title":"QEMU æºç åˆ†æ - è™šæ‹Ÿå¤–è®¾åˆ›å»º"},{"content":"å…¬å¸çš„ä¹Ÿåœ¨ç”¨ gitï¼Œä½†æ˜¯è´¦å·å’Œåœ°å€è‚¯å®šéƒ½ä¸åŒï¼Œéœ€è¦é…ç½®ä¸¤ä¸ªä¸åŒçš„æäº¤ç¯å¢ƒã€‚\nç”Ÿæˆä¸¤ä¸ª Key ç”Ÿæˆç¬¬ä¸€ä¸ª Key å¦‚æœç”µè„‘ä¸Šå·²ç»åœ¨ç”¨ Git äº†å°±æ— éœ€é‡æ–°ç”Ÿæˆ keyï¼Œç”¨å½“å‰çš„å°±å¯ä»¥ã€‚key ä¿å­˜åœ¨~/.sshæ–‡ä»¶å¤¹å†…ã€‚\nå¦‚æœç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå°±ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡æ–°ç”Ÿæˆï¼š\nâœ .ssh ssh-keygen -t rsa -C home_pc Generating public/private rsa key pair. Enter file in which to save the key (/home/dominic/.ssh/id_rsa): id_rsa_pc home_pcå°±æ˜¯ä¸ªå¤‡æ³¨åï¼Œå‡è®¾æˆ‘ä»¬è¿™ä¸ª key æ˜¯å¹³æ—¶æ£è…¾ GitHub ç©ï¼Œç”¨æ¥å’Œ GitHub åŒæ­¥ç”¨çš„ï¼Œid_rsa_pcæ˜¯ç”Ÿæˆçš„æ–‡ä»¶åï¼Œæ‰“å¼€id_rsa_pc.pubå¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„ key æœ€åå°±æ˜¯å¤‡æ³¨åï¼ˆå¦‚ä¸‹ï¼‰ã€‚\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABR/Fyj7Pz+e+/////////////////ZbdPGtHB86fLQYh/uR+TKcCERedrDKzGPdVt8= home_pc é…ç½® GitHub SSH è·¯å¾„ä¸ºï¼š\nGithub-å¤´åƒ-settings-SSH and GPG keys-New SSH key æµ‹è¯•è¿é€š ssh -T git@github.com ç”Ÿæˆç¬¬äºŒ Key è¿™ä¸ª key å°±æ‰“ç®—ç”¨æ¥å’Œå…¬å¸ä»£ç åŒæ­¥ç”¨ï¼Œæ‰€ä»¥å¤‡æ³¨åæ¢æˆäº†work_ubuntuï¼Œæ–‡ä»¶åä¹Ÿæ¢æˆäº†id_rsa_workã€‚\nâœ .ssh ssh-keygen -t rsa -C work_ubuntu Generating public/private rsa key pair. Enter file in which to save the key (/home/dominic/.ssh/id_rsa): id_rsa_work é…ç½®å…¬å¸ SSH å’Œ GitHub ç±»ä¼¼ï¼Œæ ¹æ®è‡ªå·±å…¬å¸ä½¿ç”¨çš„å¹³å°è®¾ç½®ã€‚\né…ç½®æœ¬åœ°è´¦æˆ· å› ä¸ºæœ¬åœ°çš„ä»£ç ä»“åº“å¯èƒ½æ˜¯ä» GitHub ä¸‹è½½çš„ï¼Œä¹Ÿæœ‰ä»å…¬å¸ä»“åº“ä¸‹è½½çš„ã€‚é‚£ä¹ˆæäº¤ä»£ç æ—¶å°±éœ€è¦ä¸ºä»“åº“é…ç½®æŒ‡å®šçš„ç”¨æˆ·åå’Œé‚®ç®±ã€‚ä»¥å‰åªæœ‰ä¸€ä¸ª GitHubï¼Œæ‰€ä»¥é…ç½®æ—¶ä½¿ç”¨çš„æ˜¯-globalå‚æ•°ï¼Œä»»ä½•ä¸€ä¸ªä»“åº“éƒ½æ˜¯é…ç½®çš„ç›¸åŒçš„ç”¨æˆ·åä¸é‚®ç®±ï¼Œè€Œç°åœ¨éœ€è¦åŒºåˆ†ã€‚\nå–æ¶ˆå…¨å±€é…ç½® # å–æ¶ˆå…¨å±€ ç”¨æˆ·å/é‚®ç®± é…ç½® git config --global --unset user.name git config --global --unset user.email å•ç‹¬é…ç½®ä»£ç ä»“ è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œæœ‰.gitç›®å½•çš„é‚£ä¸€çº§ã€‚\n# å•ç‹¬è®¾ç½®æ¯ä¸ªrepo ç”¨æˆ·å/é‚®ç®± git config user.email â€œxxxx@xx.comâ€ git config user.name â€œxxxxâ€ ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E9%85%8D%E7%BD%AE%E4%B8%A4%E4%B8%AAgit%E8%B4%A6%E6%88%B7/","summary":"\u003cp\u003eå…¬å¸çš„ä¹Ÿåœ¨ç”¨ gitï¼Œä½†æ˜¯è´¦å·å’Œåœ°å€è‚¯å®šéƒ½ä¸åŒï¼Œéœ€è¦é…ç½®ä¸¤ä¸ªä¸åŒçš„æäº¤ç¯å¢ƒã€‚\u003c/p\u003e\n\u003ch2 id=\"ç”Ÿæˆä¸¤ä¸ª-key\"\u003eç”Ÿæˆä¸¤ä¸ª Key\u003c/h2\u003e\n\u003ch3 id=\"ç”Ÿæˆç¬¬ä¸€ä¸ª-key\"\u003eç”Ÿæˆç¬¬ä¸€ä¸ª Key\u003c/h3\u003e\n\u003cp\u003eå¦‚æœç”µè„‘ä¸Šå·²ç»åœ¨ç”¨ Git äº†å°±æ— éœ€é‡æ–°ç”Ÿæˆ keyï¼Œç”¨å½“å‰çš„å°±å¯ä»¥ã€‚key ä¿å­˜åœ¨\u003ccode\u003e~/.ssh\u003c/code\u003eæ–‡ä»¶å¤¹å†…ã€‚\u003c/p\u003e","title":"è§£å†³ä¸€å°ç”µè„‘é…ç½®ä¸¤ä¸ª GIT è´¦æˆ·"},{"content":"C è¯­è¨€å¸¸å¸¸å› ä¸ºå£°æ˜çš„è¯­æ³•é—®é¢˜è€Œå—åˆ°äººä»¬çš„æ‰¹è¯„ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠåˆ°å‡½æ•°æŒ‡é’ˆçš„è¯­æ³•ã€‚C è¯­è¨€çš„è¯­æ³•åŠ›å›¾ä½¿å£°æ˜å’Œä½¿ç”¨ç›¸ä¸€è‡´ã€‚å¯¹äºç®€å•çš„æƒ…å†µï¼ŒC è¯­è¨€çš„åšæ³•æ˜¯å¾ˆæœ‰æ•ˆçš„ï¼Œä½†æ˜¯ï¼Œå¦‚æœæƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œåˆ™å®¹æ˜“è®©äººæ··æ·†ï¼ŒåŸå› åœ¨äºï¼ŒC è¯­è¨€çš„å£°æ˜ä¸èƒ½ä»å·¦è‡³å³é˜…è¯»ï¼Œè€Œä¸”ä½¿ç”¨äº†å¤ªå¤šçš„åœ†æ‹¬å·ã€‚ åœ¨ C ä¸­ï¼Œå£°æ˜çš„å½¢å¼ä¸ºï¼ˆdcl æ˜¯ declaration çš„ç®€å†™ï¼‰ï¼š\ndcl: optional *\u0026#39;s direct-dclï¼ˆå«æœ‰å¯é€‰\u0026#34;*\u0026#34;çš„direct-dclï¼‰ direct-dcl name (dcl) direct-dcl() direct-dcl[optional size] ç®€è€Œè¨€ä¹‹ï¼Œå£°æ˜ç¬¦dc1(å¯ä»¥ç†è§£æˆé—´æ¥å£°æ˜) å°±æ˜¯å‰é¢å¯èƒ½å¸¦æœ‰å¤šä¸ª*çš„direcr-dcloã€‚direct-dclå¯ä»¥æ˜¯nameã€ç”±ä¸€å¯¹åœ†æ‹¬å·æ‹¬èµ·æ¥çš„dclã€åé¢è·Ÿæœ‰ä¸€å¯¹åœ†æ‹¬å·çš„direct-dclã€åé¢è·Ÿæœ‰ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„è¡¨ç¤ºå¯é€‰é•¿åº¦çš„direc-dclã€‚\næ ¹æ®è¯¥è§„åˆ™è¿›è¡Œé€†å‘è§£æï¼Œå°±å¯ä»¥å¾—åˆ°æ­£ç¡®çš„å£°æ˜ã€‚ç®€åŒ–ä¸€ä¸‹ï¼šTypeName Declarator;å…¶ä¸­ï¼ŒDeclaratorå°±æ˜¯å£°æ˜ä¸­çš„é‚£ä¸ªnameã€‚å½“ä½ é‡åˆ°ä»»ä½•ä½ ä¸èƒ½ç†è§£çš„å£°æ˜æ—¶ï¼Œè¿™ä¸ªæ³•åˆ™å°±æ˜¯æ•‘å‘½ç¨»è‰ã€‚æœ€ç®€å•çš„ä¾‹å­ï¼š\nint aInt; è¿™é‡Œï¼Œintæ˜¯TypeNameï¼ŒaIntæ˜¯Declaratorã€‚\nå†è¯´æ˜ä¸€ä¸‹ç»“åˆç´§å¯†åº¦ã€‚åœ¨å£°æˆ–å®šä¹‰å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›ä¿®é¥°æ¯”å¦‚*ï¼Œ[]ï¼Œ()ç­‰ã€‚()ï¼ˆéå‡½æ•°å£°æ˜ä¸­çš„()ï¼‰å…·æœ‰æœ€é«˜çš„ç´§å¯†åº¦ï¼Œå…¶æ¬¡æ‰æ˜¯å‡½æ•°å’Œæ•°ç»„çš„()å’Œ[]ã€‚\næ²¡æœ‰*çš„å£°æ˜ç§°ä¸ºç›´æ¥å£°æ˜ï¼ˆdirect-dclï¼‰ï¼Œè€Œæœ‰*ç§°ä¸ºå£°æ˜ï¼ˆdclï¼‰ã€‚ç›´æ¥å£°æ˜è¦æ¯”å£°æ˜ç»“åˆçš„ç´§ã€‚åˆ†è§£å£°æ˜æ—¶ï¼Œå…ˆè¯»å‡ºç»“åˆç´§çš„ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æŠŠdirect-dclç§°ä¸ºæ›´ç´§çš„ç»“åˆï¼Œå®ƒæ¯”dclç»“åˆå¾—ç´§ã€‚\næœ€åï¼Œéœ€è¦ä½ ç”¨è‹±è¯­æ¥è¯»å‡ºè¿™ä¸ªå£°æ˜ã€‚å¯¹äº[]ï¼Œåº”è¯¥è¯»æˆarray ofã€‚\nå¯¹äºå¤æ‚çš„å®šä¹‰ï¼Œå¯ä»¥å°†å…¶åˆ†è§£ã€‚æ¯”å¦‚T (*p)()å¯ä»¥åˆ†è§£æˆT D1()ï¼ŒD1è¯»ä½œï¼šfunction returning Tã€‚å…¶ä¸­D1æ˜¯*pã€‚é‚£ä¹ˆè¯¥å£°æ˜åº”è¯¥è¯»æˆï¼šp is a poniter toã€‚äºŒè€…åˆåœ¨ä¸€èµ·ï¼Œå°±å˜æˆäº† p is a pointer to function returning Tï¼Œå³ï¼špæ˜¯æŒ‡å‘è¿”å›Tç±»å¯¹è±¡çš„å‡½æ•°çš„æŒ‡é’ˆã€‚\nå†çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚çš„ç¤ºä¾‹ï¼š\nT (*pfa[])(); æ ¹æ®dclå’Œdirect-dclï¼Œå¯ä»¥åˆ†è§£æˆT1 D1ï¼ˆå› ä¸ºç»“åˆç´§å¯†åº¦ï¼‰ï¼ŒT1ä¹Ÿå°±æ˜¯T ()ï¼Œé‚£ä¹ˆåº”è¯¥è¯»ä½œï¼š D1 is function returning Tã€‚\nD1åˆå¯ä»¥å†™æˆT2 D2ï¼Œå…¶ä¸­T2æ˜¯T1 []ï¼Œå¯ä»¥åˆ†è§£æˆT1 D2[]ï¼Œè¯»ä½œï¼šarray of D2 function returning Tã€‚\nD2æ˜¯æŒ‡é’ˆï¼Œè¯»ä½œï¼špointers toã€‚é‚£ä¹ˆæ•´ä¸ª T (*pfa[])() åº”è¯¥è¯»ä½œï¼špfa is an array of pointers to function returning Tï¼Œå³ï¼špfaæ˜¯ä¸ªå­˜æ”¾æŒ‡å‘è¿”å› T ç±»å¯¹è±¡å‡½æ•°çš„æŒ‡é’ˆçš„æ•°ç»„ã€‚\næ¢ç§æ–¹å¼çœ‹ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œpfaæ˜¯åå­—ï¼ŒT(*[])()æ˜¯ç±»å‹ã€‚å°†(*pfa[])è§†ä¸ºä¸€ä½“ï¼ˆdirect-dclï¼‰ï¼Œç§°ä¸ºD1ï¼Œé‚£ä¹ˆå¯ä»¥å†™æˆT D1()ï¼Œfunction returning object of Tã€‚åœ¨D1ä¸­ï¼Œå°†*pfaè§†ä¸ºä¸€ä½“ï¼ˆdclï¼‰ï¼Œç§°ä¸ºD2ï¼Œé‚£ä¹ˆ*pfa[]åº”è¯¥æ˜¯D2[]ï¼ˆdirect-dclï¼‰ï¼Œarray of D2ã€‚åˆèµ·æ¥å°±æ˜¯ array of D2 function returning object of Tã€‚D2æ˜¯*pfaï¼ˆdclï¼‰ï¼Œæ›¿æ¢åˆ°å‰é¢è¿™å¥è¯ï¼Œç»“æœå°±æ˜¯ array of pointers to function returning object of Tã€‚\næœ‰äº†è¿™äº›è¯´æ˜ï¼Œå¯ä»¥è¯•ç€åšä¸€ä¸‹ä¸‹é¢çš„é¢˜ï¼Œçœ‹çœ‹è‡ªå·±æ˜¯å¦çœŸçš„ç†è§£äº†ï¼š\nchar **argv // argv: pointer to pointer to char // æŒ‡å‘ char å‹æŒ‡é’ˆçš„æŒ‡é’ˆ int (*daytab)[13] // daytab: pointer to array[13] of int // æŒ‡å‘ int å‹æ•°ç»„çš„æŒ‡é’ˆ int *daytab[13] // daytab: array[13] of pointer to int // å­˜æ”¾ int å‹æŒ‡é’ˆçš„æ•°ç»„ void *comp() // comp: function returning pointer to void // è¿”å›å€¼ä¸ºæŒ‡å‘ void å‹æŒ‡é’ˆçš„å‡½æ•° void (*comp)() // comp: pointer to function returning void // æŒ‡å‘è¿”å›å€¼ä¸º void å‹å‡½æ•°çš„æŒ‡é’ˆ char (*(*x())[])() // x: function returning pointer to array[] of // pointer to function returning char // è¿”å›å€¼ä¸º char å‹çš„å‡½æ•° char (*(*x[3])())[5] // x: array[3] of pointer to function returning // pointer to array[5] of char ç†è§£å¤æ‚å£°æ˜å¯ç”¨çš„â€œå³å·¦æ³•åˆ™â€ï¼šä»å˜é‡åçœ‹èµ·ï¼Œå…ˆå¾€å³ï¼Œå†å¾€å·¦ï¼Œç¢°åˆ°ä¸€ä¸ªåœ†æ‹¬å·å°±è°ƒè½¬é˜…è¯»çš„æ–¹å‘ï¼›æ‹¬å·å†…åˆ†æå®Œå°±è·³å‡ºæ‹¬å·ï¼Œè¿˜æ˜¯æŒ‰å…ˆå³åå·¦çš„é¡ºåºï¼Œå¦‚æ­¤å¾ªç¯ï¼Œç›´åˆ°æ•´ä¸ªå£°æ˜åˆ†æå®Œã€‚ä¸¾ä¾‹ï¼š\nint (*func)(int *p); é¦–å…ˆæ‰¾åˆ°å˜é‡åfuncï¼Œå¤–é¢æœ‰ä¸€å¯¹åœ†æ‹¬å·ï¼Œè€Œä¸”å·¦è¾¹æ˜¯ä¸€ä¸ª*å·ï¼Œè¿™è¯´æ˜funcæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼›ç„¶åè·³å‡ºè¿™ä¸ªåœ†æ‹¬å·ï¼Œå…ˆçœ‹å³è¾¹ï¼Œåˆé‡åˆ°åœ†æ‹¬å·ï¼Œè¿™è¯´æ˜(*func)æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥funcæ˜¯ä¸€ä¸ªæŒ‡å‘è¿™ç±»å‡½æ•°çš„æŒ‡é’ˆï¼Œå³å‡½æ•°æŒ‡é’ˆï¼Œè¿™ç±»å‡½æ•°å…·æœ‰int*ç±»å‹çš„å½¢å‚ï¼Œè¿”å›å€¼ç±»å‹æ˜¯intã€‚\nint (*func[5])(int *); funcå³è¾¹æ˜¯ä¸€ä¸ª[]è¿ç®—ç¬¦ï¼Œè¯´æ˜funcæ˜¯å…·æœ‰5ä¸ªå…ƒç´ çš„æ•°ç»„ï¼›funcçš„å·¦è¾¹æœ‰ä¸€ä¸ª*ï¼Œè¯´æ˜funcçš„å…ƒç´ æ˜¯æŒ‡é’ˆï¼ˆæ³¨æ„è¿™é‡Œçš„*ä¸æ˜¯ä¿®é¥°funcï¼Œè€Œæ˜¯ä¿®é¥°func[5]çš„ï¼ŒåŸå› æ˜¯[]è¿ç®—ç¬¦ä¼˜å…ˆçº§æ¯”*é«˜ï¼Œfuncå…ˆè·Ÿ[]ç»“åˆï¼‰ã€‚è·³å‡ºè¿™ä¸ªæ‹¬å·ï¼Œçœ‹å³è¾¹ï¼Œåˆé‡åˆ°åœ†æ‹¬å·ï¼Œè¯´æ˜funcæ•°ç»„çš„å…ƒç´ æ˜¯å‡½æ•°ç±»å‹çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘çš„å‡½æ•°å…·æœ‰int*ç±»å‹çš„å½¢å‚ï¼Œè¿”å›å€¼ç±»å‹ä¸ºintã€‚\nåœ¨ C++ä¸­ï¼Œè§„åˆ™æ¯” C è¦å¤æ‚ä¸€äº›ã€‚ä¸è¿‡ï¼ŒåŸºæœ¬æ€æƒ³ä¿æŒä¸å˜ï¼ŒæŒ‰ç…§ C çš„åŸåˆ™æ¥ç†è§£å¤æ‚çš„å£°æ˜ï¼ŒåŸºæœ¬ä¸Šå°±èƒ½æ»¡è¶³è¦æ±‚äº†ã€‚æ²¡æœ‰åœ¨è¿™é‡Œåˆ—å‡º C++çš„è§„åˆ™ä¸€æ–¹é¢æ˜¯å› ä¸ºå¤ªå¹¿ï¼Œä¸èƒ½è¦†ç›–å…¨ï¼›å¦ä¸€ä¸ªåŸå› å°±æ˜¯ï¼ŒæŒ‰ç…§ C çš„è§„åˆ™æ¥å°±è¶³å¤Ÿäº†ï¼Œæ¯•ç«Ÿ C++è¦ä¸ C å…¼å®¹ã€‚\n","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80%E5%A4%8D%E6%9D%82%E5%A3%B0%E6%98%8E/","summary":"\u003cp\u003eC è¯­è¨€å¸¸å¸¸å› ä¸ºå£°æ˜çš„è¯­æ³•é—®é¢˜è€Œå—åˆ°äººä»¬çš„æ‰¹è¯„ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠåˆ°å‡½æ•°æŒ‡é’ˆçš„è¯­æ³•ã€‚C è¯­è¨€çš„è¯­æ³•åŠ›å›¾ä½¿å£°æ˜å’Œä½¿ç”¨ç›¸ä¸€è‡´ã€‚å¯¹äºç®€å•çš„æƒ…å†µï¼ŒC è¯­è¨€çš„åšæ³•æ˜¯å¾ˆæœ‰æ•ˆçš„ï¼Œä½†æ˜¯ï¼Œå¦‚æœæƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œåˆ™å®¹æ˜“è®©äººæ··æ·†ï¼ŒåŸå› åœ¨äºï¼ŒC è¯­è¨€çš„å£°æ˜ä¸èƒ½ä»å·¦è‡³å³é˜…è¯»ï¼Œè€Œä¸”ä½¿ç”¨äº†å¤ªå¤šçš„åœ†æ‹¬å·ã€‚\nåœ¨ C ä¸­ï¼Œå£°æ˜çš„å½¢å¼ä¸ºï¼ˆdcl æ˜¯ declaration çš„ç®€å†™ï¼‰ï¼š\u003c/p\u003e","title":"C è¯­è¨€å¤æ‚å£°æ˜"},{"content":"å®Œæ•´ä»£ç è¯¦è§GitHub CyclicBufferã€‚\nä»€ä¹ˆæ˜¯å¾ªç¯ç¼“å†²åŒº \u003c!DOCTYPE html\u003e Responsive Image å¾ªç¯ç¼“å†²åŒºé€šå¸¸åº”ç”¨åœ¨æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„é€šä¿¡ï¼Œå¯ä»¥å‡å°‘ç¨‹åºæŒ‚èµ·çš„æ—¶é—´ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´ã€‚\nå¦‚å›¾æ‰€ç¤ºï¼Œè“è‰²ç®­å¤´è¡¨ç¤ºè¯»å–æŒ‡é’ˆï¼Œçº¢è‰²è¡¨ç¤ºå†™å…¥æŒ‡é’ˆã€‚å†™å…¥æŒ‡é’ˆå¯ä»¥åœ¨ç¼“å†²åŒºæœ‰å‰©ä½™ç©ºé—´æ—¶ä¸ä¸­æ–­åœ°å†™å…¥æ•°æ®ï¼Œè¯»å–æŒ‡é’ˆå¯ä»¥åœ¨å¾ªç¯ç¼“å†²åŒºæœ‰æ•°æ®æ—¶ä¸åœè¯»å–ã€‚\nå¦‚ä½•è®¾è®¡å¾ªç¯ç¼“å†²åŒº ä¸ºäº†æ–¹ä¾¿ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œæˆ‘ä»¬åœ¨å…±äº«å†…å­˜ä¸­åˆ›å»ºå¾ªç¯ç¼“å†²åŒºã€‚åŸºæœ¬åŸç†å¦‚å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç»“æ„ä½“å®šä¹‰ typedef struct CyclicBuffer { uint8_t buf[CYCBUFFSIZ]; //ç¼“å†²åŒº uint8_t read; //è¯»æŒ‡é’ˆ uint8_t write; //å†™æŒ‡é’ˆ uint32_t valid_size; //å·²å†™å…¥æ•°æ®æ•° } CyCBuf; å†™å…¥æ•°æ® void cycbuff_write(CyCBuf *cycbuff, uint8_t ch) { while (cycbuff_isfull(cycbuff)) ; cycbuff-\u0026gt;buf[cycbuff-\u0026gt;write] = ch; cycbuff-\u0026gt;write++; cycbuff-\u0026gt;write %= CYCBUFFSIZ; cycbuff-\u0026gt;valid_size++; } å†™å…¥æ•°æ®å‰ï¼Œè¦æ£€æŸ¥ç¼“å†²åŒºæ˜¯å¦å·²æ»¡ï¼Œå¦‚æœå·²æ»¡å°±å¾—æŒ‚èµ·ç­‰å¾…ã€‚ç›´åˆ°ç¼“å†²åŒºæœ‰ç©ºé—´å†è¿›è¡Œå†™å…¥ã€‚\nå†™å…¥æŒ‡é’ˆæ¯æ¬¡å†™å®Œå‘ååç§»ä¸€ä½ï¼Œvalid_sizeè®°å½•å½“å‰ç¼“å†²åŒºä¸­æœ‰æ•ˆæ•°æ®ä¸ªæ•°ã€‚\nè¯»å–æ•°æ® uint8_t cycbuff_read(CyCBuf *cycbuff) { uint8_t ch; while (cycbuff_isempty(cycbuff)) ; ch = cycbuff-\u0026gt;buf[cycbuff-\u0026gt;read]; cycbuff-\u0026gt;read++; cycbuff-\u0026gt;read %= CYCBUFFSIZ; cycbuff-\u0026gt;valid_size--; return ch; } è¯»å–æ•°æ®å‰ï¼Œè¦æ£€æŸ¥ç¼“å†²åŒºæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºå°±è¦æŒ‚èµ·ç­‰å¾…ã€‚\nåˆ¤æ–­ç©º bool cycbuff_isempty(CyCBuf *cycbuff) { if (cycbuff-\u0026gt;valid_size == 0) return true; return false; } åˆ¤æ–­æ»¡ bool cycbuff_isfull(CyCBuf *cycbuff) { if (cycbuff-\u0026gt;valid_size == CYCBUFFSIZ) return true; return false; } æœ¬æ¬¡å®éªŒä¸­ï¼Œä¸ºäº†æ–¹ä¾¿æœŸé—´ï¼Œç”¨valid_sizeä¿å­˜æœ‰æ•ˆæ•°æ®ä¸ªæ•°ï¼Œæ²¡æœ‰ç”¨è¯»å†™æŒ‡é’ˆæ˜¯å¦é‡åˆæ¥åˆ¤æ–­ï¼Œè¿™å°±æ— éœ€å†è€ƒè™‘è¯»å†™æŒ‡é’ˆé‡åˆæ—¶ï¼Œæ˜¯ç©ºè¿˜æ˜¯æ»¡ã€‚\næ•°æ®æ”¶å‘æµç¨‹ æœåŠ¡ç«¯ - å†™å…¥ void server(CyCBuf *cycbuff, SHMS *shms) { cycbuff_init(cycbuff); while (1) { puts(\u0026#34;Enter Message: \u0026#34;); uint8_t ch[BUFFERSIZE]; fgets(ch, BUFFERSIZE, stdin); for (size_t i = 0; ch[i] != \u0026#39;\\n\u0026#39; \u0026amp;\u0026amp; i \u0026lt; BUFFERSIZE; i++) { cycbuff_write(cycbuff, ch[i]); } cycbuff_write(cycbuff, \u0026#39;\\n\u0026#39;); } exit(0); } SHMS *shmsä¸ºå…±äº«å†…å­˜ç›¸å…³æ•°æ®ï¼Œæœ‰å…³å…±äº«å†…å­˜çš„ä½¿ç”¨å¯ä»¥å‚è€ƒè¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹å…±äº«å†…å­˜ï¼ˆSharedMemoryï¼‰ã€‚\nå®¢æˆ·ç«¯ - è¯»å– void client(CyCBuf *cycbuff, SHMS *shms) { printf(\u0026#34;Server operational: shm id is %d\\n\u0026#34;, shms-\u0026gt;shmid); while (1) { uint8_t ch; puts(\u0026#34;Recv Message: \u0026#34;); while (1) { ch = cycbuff_read(cycbuff); if (ch == \u0026#39;\\n\u0026#39;) { printf(\u0026#34;\\n\u0026#34;); break; } fflush(stdout); printf(\u0026#34;%c\u0026#34;, ch); } } } è¯»å–æ•°æ®ä»¥å›è½¦ç¬¦ä¸ºåˆ†ç•Œï¼Œå½“è¯»åˆ°å›è½¦ç¬¦æ—¶è¿›è¡Œæ¢è¡Œå¤„ç†ï¼Œå¹¶ç­‰å¾…æ¥æ”¶ä¸‹ä¸€æ³¢æ•°æ®ã€‚\nå®éªŒç»“æœ \u003c!DOCTYPE html\u003e Responsive Image Reference Circular buffer\n","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E5%AE%9E%E7%8E%B0cyclicbuffer%E5%BE%AA%E7%8E%AF%E7%BC%93%E5%86%B2%E5%8C%BA/","summary":"\u003cp\u003eå®Œæ•´ä»£ç è¯¦è§\u003ca href=\"https://github.com/Dunky-Z/learning-linux/tree/main/helloworld/c/CyclicBuffer\"\u003eGitHub CyclicBuffer\u003c/a\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"ä»€ä¹ˆæ˜¯å¾ªç¯ç¼“å†²åŒº\"\u003eä»€ä¹ˆæ˜¯å¾ªç¯ç¼“å†²åŒº\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20211021171456.gif\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20211021171456.gif\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eå¾ªç¯ç¼“å†²åŒºé€šå¸¸åº”ç”¨åœ¨æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„é€šä¿¡ï¼Œå¯ä»¥å‡å°‘ç¨‹åºæŒ‚èµ·çš„æ—¶é—´ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´ã€‚\u003c/p\u003e","title":"C è¯­è¨€å…±äº«å†…å­˜å®ç° CyclicBuffer å¾ªç¯ç¼“å†²åŒº"},{"content":"ä¿ç•™ç°åœº ä½¿ç”¨scanf()è·å–è¾“å…¥æ—¶ï¼Œå› ä¸ºæ¶‰åŠé”®ç›˜ç¼“å†²åŒºçš„é—®é¢˜ï¼Œæ¯æ¬¡è¾“å…¥åæƒ³è¦æŠŠç¼“å†²æ¸…ç©ºï¼Œä½†æ˜¯åœ¨ gcc ç¼–è¯‘åï¼Œä½¿ç”¨fflushæ— æ³•æ¸…ç©ºç¼“å†²åŒºã€‚\næ¢ç©¶åŸå›  C æ ‡å‡† (ISO/IEC 9899:1999 standard) è§„å®šfflush(stdin)æ“ä½œæ˜¯æœªå®šä¹‰çš„\u0026lt;å‚çœ‹ã€ŠISO/IEC 9899:1999 standardã€‹p270\u0026gt;;ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ä¸€å®šèƒ½å®ç°åˆ·æ–°åŠŸèƒ½ï¼Œä½†æœ‰çš„ç¼–è¯‘å™¨å¯èƒ½ä¸éµå¾ªæ ‡å‡†ï¼Œå¯¹fflush(stdin)æ“ä½œä¸äºˆè­¦å‘Šï¼Œå¹¶ä¸”æœ‰æ—¶å¯èƒ½äº§ç”Ÿæ­£ç¡®çš„ç»“æœï¼Œä½†æœ€å¥½ä¸è¦è¿™æ ·ä½¿ç”¨ã€‚\nè§£å†³æ–¹æ³• é€šè¿‡ while å¾ªç¯æŠŠè¾“å…¥æµä¸­çš„ä½™ç•™æ•°æ®â€œåƒâ€æ‰ï¼š\nint c; while ((c=getchar()) != â€˜\\nâ€™ \u0026amp;\u0026amp; c != EOF); ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3gcc%E7%BC%96%E8%AF%91%E5%90%8Efflush%E5%A4%B1%E6%95%88/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eä½¿ç”¨\u003ccode\u003escanf()\u003c/code\u003eè·å–è¾“å…¥æ—¶ï¼Œå› ä¸ºæ¶‰åŠé”®ç›˜ç¼“å†²åŒºçš„é—®é¢˜ï¼Œæ¯æ¬¡è¾“å…¥åæƒ³è¦æŠŠç¼“å†²æ¸…ç©ºï¼Œä½†æ˜¯åœ¨ gcc ç¼–è¯‘åï¼Œä½¿ç”¨\u003ccode\u003efflush\u003c/code\u003eæ— æ³•æ¸…ç©ºç¼“å†²åŒºã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eC æ ‡å‡† (ISO/IEC 9899:1999 standard) è§„å®š\u003ccode\u003efflush(stdin)\u003c/code\u003eæ“ä½œæ˜¯æœªå®šä¹‰çš„\u0026lt;å‚çœ‹ã€ŠISO/IEC 9899:1999 standardã€‹p270\u0026gt;;ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ä¸€å®šèƒ½å®ç°åˆ·æ–°åŠŸèƒ½ï¼Œä½†æœ‰çš„ç¼–è¯‘å™¨å¯èƒ½ä¸éµå¾ªæ ‡å‡†ï¼Œå¯¹\u003ccode\u003efflush(stdin)\u003c/code\u003eæ“ä½œä¸äºˆè­¦å‘Šï¼Œå¹¶ä¸”æœ‰æ—¶å¯èƒ½äº§ç”Ÿæ­£ç¡®çš„ç»“æœï¼Œä½†æœ€å¥½ä¸è¦è¿™æ ·ä½¿ç”¨ã€‚\u003c/p\u003e","title":"è§£å†³ gcc ç¼–è¯‘å fflush å¤±æ•ˆ"},{"content":"æ“ä½œç³»ç»Ÿå®šä¹‰ä¸åˆ†ç±» æ“ä½œç³»ç»Ÿï¼ˆè‹±è¯­ï¼šOperating Systemï¼Œç¼©å†™ï¼šOSï¼‰æ˜¯ä¸€ç»„ç³»ç»Ÿè½¯ä»¶ç¨‹åºï¼Œç‹­ä¹‰ä¸Šå°±æ˜¯å†…æ ¸å¦‚ Linuxï¼Œå¹¿ä¹‰ä¸Šå°±æ˜¯å†…æ ¸åŠ ä¸€ç»„è½¯ä»¶ç»„æˆçš„å‘è¡ŒåŒ…ï¼Œå¦‚ Ubuntuï¼ŒDebianï¼š\nâ€¢ ä¸»ç®¡å¹¶æ§åˆ¶è®¡ç®—æœºæ“ä½œã€è¿ç”¨å’Œè¿è¡Œç¡¬ä»¶ã€è½¯ä»¶èµ„æº\nâ€¢ æä¾›å…¬å…±æœåŠ¡æ¥ç»„ç»‡ç”¨æˆ·äº¤äº’ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ç¡¬ä»¶çš„åŸºæœ¬æ¦‚å¿µ \u003c!DOCTYPE html\u003e Responsive Image Hart Platform ä¸èƒ½è¯´æ˜¯ä¸ªæ¿å­ï¼Œåº”è¯¥ç†è§£ä¸ºèŠ¯ç‰‡ã€‚æ—©æœŸçš„æ¿å­å°±æ˜¯ä¸€å—èŠ¯ç‰‡åŠ ä¸Šå„ç§å¤–è®¾ï¼Œä½†æ˜¯éšç€æŠ€æœ¯å‘å±•ï¼Œæ¿å­è¶Šæ¥è¶Šå°ï¼Œå¤–è®¾å´å¹¶æ²¡æœ‰å˜å°‘ï¼Œæ˜¯å› ä¸ºå¤–è®¾éƒ½è¢«é›†æˆåˆ°äº†èŠ¯ç‰‡ä¸­ã€‚å½“æ‰€æœ‰å¤–è®¾éƒ½è¢«é›†æˆï¼Œé‚£ä¹ˆèŠ¯ç‰‡å°±æ˜¯ platformã€‚ SoC(System on Chip) ç‰‡ä¸Šç³»ç»Ÿ \u003c!DOCTYPE html\u003e Responsive Image QEMU æ¨¡æ‹Ÿ virt è¿™ä¸ªå¹³å°ï¼Œè¿™ä¸ªå¹³å°æœ‰å…«ä¸ª Hartã€‚\nåœ°å€æ˜ å°„ \u003c!DOCTYPE html\u003e Responsive Image ä¸ºäº†æ–¹ä¾¿è®¿é—®å¤–è®¾ï¼Œç°åœ¨ä¸»æµçš„ platform ä¼šå¯¹å¤–è®¾çš„å†…å­˜åœ°å€åšä¸€ä¸ªæ˜ å°„ã€‚æ˜ å°„åˆ° platform çš„çœŸå®ç‰©ç†åœ°å€ã€‚å¯¹çœŸå®ç‰©ç†åœ°å€è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±æ˜¯å¯¹å¤–è®¾çš„åœ°å€è¿›è¡Œæ“ä½œã€‚\nç‰©ç†åœ°å€ä»æœ€ä½ä½åˆ°æœ€é«˜ä½éƒ½è¢«åˆ†é…ç»™äº†å„ç§å¤–è®¾ã€‚\nå¼•å¯¼è¿‡ç¨‹ä»‹ç» \u003c!DOCTYPE html\u003e Responsive Image é€šç”µåï¼Œä¼šå…ˆåˆ°ç®­å¤´æ‰€æŒ‡çš„åœ°å€ï¼Œè¿™ä¸ªåœ°å€å°±æ˜¯å¯¹åº”çš„ ROM å¤–è®¾é¦–åœ°å€ã€‚ROM ç›¸å½“äºä¸€ä¸ªå°ç¡¬ç›˜ï¼Œæ–­ç”µåä¸ä¼šä¸¢å¤±æ•°æ®ã€‚è¿™é‡Œé¢å›ºåŒ–äº†ä¸€äº›æŒ‡ä»¤ã€‚\nä¸»è¦å°±æ˜¯è·³è½¬æŒ‡ä»¤ï¼Œè¿è¡Œåˆ° kernel æ®µç»§ç»­æ‰§è¡Œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å…«æ ¸åŒæ—¶ä¼šæ‰§è¡Œè¿™ä¸ªè¿‡ç¨‹ã€‚\nä»¥ä¸Šæ˜¯ç¡¬ä»¶çš„éƒ¨åˆ†è¿‡ç¨‹ï¼Œè½¯ä»¶è¯¥å¦‚ä½•å†™ï¼Ÿ\n\u003c!DOCTYPE html\u003e Responsive Image ä¸ºäº†ç®€åŒ–å­¦ä¹ æµç¨‹å’Œé™ä½è°ƒè¯•éš¾åº¦ï¼Œç›®å‰åªæ”¯æŒå•æ ¸ï¼Œå…¶ä½™ä¸ƒä¸ªæ ¸å¤„äºç©ºè½¬çŠ¶æ€ã€‚\nå¦‚ä½•åˆ¤æ–­å½“å‰ Hart æ˜¯ä¸æ˜¯ç¬¬ä¸€ä¸ªï¼Ÿ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image è¿™äº›å¯„å­˜å™¨å¿…é¡»ä½¿ç”¨ä»¥ä¸‹çš„æŒ‡ä»¤è¯»å†™ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ä»¥ä¸ŠæŒ‡ä»¤å°±æ˜¯å°†å¯„å­˜å™¨å€¼è¿›è¡Œä¸€æ¬¡äº¤æ¢ï¼Œåªä¸è¿‡è¿™ä¸ªè¿‡ç¨‹æ˜¯åŸå­æ€§çš„ï¼Œä¸èƒ½è¢«æ‰“æ–­ã€‚\nCSRRWç»å¸¸ä¼šç”¨åœ¨ä¼ªæŒ‡ä»¤CSRWä¸­ï¼Œå®Œæ•´æŒ‡ä»¤ä¸­ï¼Œç¬¬ä¸€æ­¥å‘x0å†™å…¥æ•°æ®ï¼Œå°±æ˜¯ç©ºæ“ä½œï¼Œç¬¬äºŒæ­¥å°†rså†™å…¥csrã€‚è¿™ä¸ªä¼ªæŒ‡ä»¤å°±æ˜¯å®Œæˆäº†ä¸€ä¸ªå†™å…¥csrçš„æ“ä½œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image mhartidå°±æ˜¯machine hart idã€‚\nå­¦ä¹ ä»¥ä¸Šå‡ ä¸ªæŒ‡ä»¤ï¼Œå°±å¯ä»¥å®Œæˆåˆ¤æ–­ hart æ˜¯å¦ä¸ºç¬¬ä¸€ä¸ªçš„å·¥ä½œäº†ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image csrr t0, mhartid #è¯»å¯„å­˜å™¨å€¼ mv tp, t0 # bnez t0, park # è·³è½¬æŒ‡ä»¤ï¼Œä¸ç­‰äº 0 å°±è·³è½¬åˆ° park æ ‡ç­¾ wfi ä¼‘çœ æŒ‡ä»¤ å¦‚ä½•åˆå§‹åŒ–æ ˆç©ºé—´ å¦‚ä½•è·³è½¬åˆ° C è¯­è¨€ç¯å¢ƒ # start.S #include \u0026#34;platform.h\u0026#34; # size of each hart\u0026#39;s stack is 1024 bytes .equ STACK_SIZE, 1024 .global _start .text _start: # park harts with id != 0 csrr t0, mhartid # read current hart id mv tp, t0 # keep CPU\u0026#39;s hartid in its tp for later usage. bnez t0, park # if we\u0026#39;re not on the hart 0 # we park the hart # Setup stacks, the stack grows from bottom to top, so we put the # stack pointer to the very end of the stack range. slli t0, t0, 10 # shift left the hart id by 1024 ###### åˆå§‹åŒ–æ ˆç©ºé—´ ###### # set the initial stack pointer to the end of the first stack space la sp, stacks + STACK_SIZE # move the current hart stack pointer to its place in the stack space add sp, sp, t0 ###### åˆå§‹åŒ–æ ˆç©ºé—´ ###### ###### è·³è½¬åˆ°Cè¯­è¨€ç¯å¢ƒ ###### j start_kernel # hart 0 jump to c, start_kernel is the entry point of the kernel ###### è·³è½¬åˆ°Cè¯­è¨€ç¯å¢ƒ ###### park: wfi j park stacks: # allocate space for all the harts stacks .skip STACK_SIZE * MAXNUM_CPU .end # End of file // kernel.c void start_kernel(void) { while (1) {}; // stop here! } é€šè¿‡ UART æ‰“å°ä¿¡æ¯ è¿æ¥æ–¹å¼ \u003c!DOCTYPE html\u003e Responsive Image çœŸå®çš„ç¡¬ä»¶å¼€å‘æ˜¯æœ‰ä¸€ä¸ªå¿«å¼€å‘æ¿ï¼Œä½†æ˜¯è¿™ä¸ªè¯¾ç¨‹é‡Œä½¿ç”¨çš„æ˜¯ QEMU æ¥æ¨¡æ‹Ÿå¼€å‘æ¿çš„ç¡¬ä»¶ç¯å¢ƒã€‚å¦‚æœè¦åœ¨ç¨‹åºé‡Œæ‰“å°ä¸€æ®µä¿¡æ¯ï¼Œæ­£å¸¸çš„æƒ…å†µæ˜¯åœ¨å¼€å‘æ¿ä¸Šè¿æ¥æ˜¾ç¤ºå™¨ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯é€šè¿‡å°†ä¿¡æ¯ç”¨ä¸²å£ä¼ åˆ°ä¸»æœºä¸Šï¼Œç„¶åç”¨ä¸»æœºçš„å±å¹•æ˜¾ç¤ºä¿¡æ¯ã€‚\nä¸²å£çº¿é‡Œæ˜¯æœ‰ä¸¤æ ¹çº¿ï¼Œè´Ÿè´£æ”¶ä¿¡æ¯å’Œå‘ä¿¡æ¯ã€‚\nUART ç‰¹ç‚¹ \u003c!DOCTYPE html\u003e Responsive Image å¹¶è¡Œå°±æ˜¯éœ€è¦å¤šæ ¹çº¿ï¼Œæ¯”å¦‚æœ‰ä¸¤æ ¹çº¿ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¸€æ¬¡å‘é€ä¸¤ä½ã€‚ä½†æ˜¯ä¸²è¡ŒèŠ‚çœææ–™ã€‚ æ•°æ®é€šä¿¡å°±ä¼šæ¶‰åŠåŒæ­¥çš„é—®é¢˜ï¼ŒåŒæ­¥çš„è¯éœ€è¦ä¸€æ ¹æ—¶é’Ÿçº¿æ¥åå•†å¥½å‘é€æ—¶é—´å’Œæ¥æ”¶æ—¶é—´ã€‚è€Œ UART ä½¿ç”¨å¼‚æ­¥ï¼Œå‘é€çš„æ•°æ®ä¸ä»…ä»…æ˜¯çœŸå®çš„æ•°æ®ï¼Œè¿˜ä¼šå¸¦æœ‰ä¸€äº›æ ‡è¯†ä¿¡æ¯ã€‚è¿™äº›æ ‡è¯†å¯ä»¥åˆ¤æ–­å‡ºæ˜¯æ”¶è¿˜æ˜¯å‘ã€‚ ç‰©ç†æ¥å£ \u003c!DOCTYPE html\u003e Responsive Image UART é€šè®¯åè®® \u003c!DOCTYPE html\u003e Responsive Image å›¾ç¤ºä¸­æ¨ªè½´å¯ä»¥è¡¨ç¤ºæ—¶é—´ï¼Œçºµè½´è¡¨ç¤ºé«˜ä½ç”µå¹³ã€‚\nåœ¨éœ€è¦å‘é€æ•°æ®æ—¶ï¼Œä¼šè¿›è¡Œâ€œä¸‹æ‹‰â€1bitï¼Œ1bit æŒç»­çš„æ—¶é—´å°±æ˜¯æ³¢ç‰¹ç‡åˆ†ä¹‹ä¸€ç§’ã€‚\næ•°æ®åœ¨å‘é€è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå—åˆ°å¹²æ‰°ï¼Œä¼šäº§ç”Ÿç•¸å˜ï¼Œæ‰€ä»¥éœ€è¦æ£€éªŒä½æ¥åˆ¤æ–­æ˜¯å¦å‘ç”Ÿç•¸å˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆå§‹åŒ– \u003c!DOCTYPE html\u003e Responsive Image åœ¨è½¯ä»¶ä¸­ï¼Œé…ç½® UART å°±æ˜¯é…ç½®å¯„å­˜å™¨çš„ä¿¡æ¯ã€‚\nåœ¨æ¿å­ä¸Šæœ‰ä¸ªå…ƒå™¨ä»¶å«æ™¶æŒ¯ï¼ˆcrystalï¼‰ï¼Œä»–ä¼šäº§ç”Ÿå›ºå®šé¢‘ç‡çš„æ—¶é’Ÿã€‚ä¸€ç§æ˜¯ 1.8432MHZï¼Œä¸€ç§æ˜¯ 7.3728MHZã€‚æƒ³è¦è·å¾—æŒ‡å®šçš„è¾“å‡ºé¢‘ç‡å°±éœ€è¦å¯¹å¯„å­˜å™¨è¿›è¡Œé…ç½®ã€‚æŸ¥è¡¨å¯ä»¥å¾—åˆ°é…ç½®ä¿¡æ¯ã€‚æ¯”å¦‚è·å¾— 38.4K é¢‘ç‡çš„è¾“å‡ºï¼Œå°±è¦é…ç½®å¯„å­˜å™¨å€¼ä¸º 3ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image LCR å¯„å­˜å™¨åŠŸèƒ½æ¯”è¾ƒå¤šï¼Œå°†ç¬¬ 7 ä½è®¾ç½®ä¸º 1 å°±æ˜¯ç”¨æ¥è®¾ç½®æ³¢ç‰¹ç‡ã€‚\nå›¾ä¸­DLLå’ŒDLMå¯„å­˜å™¨å°±æ˜¯éœ€è¦é…ç½®çš„å¯„å­˜å™¨ã€‚å› ä¸º UART å¯„å­˜å™¨éƒ½æ˜¯ 8 ä½çš„ï¼Œå°†å€¼0x0003é«˜ä½0x00å­˜åœ¨DLMä¸­ï¼Œå°†ä½ä½0x03å­˜å…¥DLLã€‚\n","permalink":"https://lifeislife.cn/posts/risc-v%E5%85%A5%E9%97%A8-rvos%E7%B3%BB%E7%BB%9F%E5%BC%95%E5%AF%BC/","summary":"\u003ch2 id=\"æ“ä½œç³»ç»Ÿå®šä¹‰ä¸åˆ†ç±»\"\u003eæ“ä½œç³»ç»Ÿå®šä¹‰ä¸åˆ†ç±»\u003c/h2\u003e\n\u003cp\u003eæ“ä½œç³»ç»Ÿï¼ˆè‹±è¯­ï¼šOperating Systemï¼Œç¼©å†™ï¼šOSï¼‰æ˜¯ä¸€ç»„ç³»ç»Ÿè½¯ä»¶ç¨‹åºï¼Œç‹­ä¹‰ä¸Šå°±æ˜¯å†…æ ¸å¦‚ Linuxï¼Œå¹¿ä¹‰ä¸Šå°±æ˜¯å†…æ ¸åŠ ä¸€ç»„è½¯ä»¶ç»„æˆçš„å‘è¡ŒåŒ…ï¼Œå¦‚ Ubuntuï¼ŒDebianï¼š\u003c/p\u003e","title":"RISC-V å…¥é—¨-RVOS ç³»ç»Ÿå¼•å¯¼"},{"content":"ç›¸å…³æ¦‚å¿µ Core åœ¨ä½¿ç”¨åŠå¯¼ä½“ä½œä¸ºå†…å­˜çš„ææ–™å‰ï¼Œäººç±»æ˜¯åˆ©ç”¨çº¿åœˆå½“ä½œå†…å­˜çš„ææ–™ï¼ˆå‘æ˜è€…ä¸ºç‹å®‰ï¼‰ï¼Œçº¿åœˆå°±å«ä½œ core ï¼Œç”¨çº¿åœˆåšçš„å†…å­˜å°±å«ä½œ core memoryã€‚å¦‚ä»Šï¼ŒåŠå¯¼ä½“å·¥ä¸šæ¾å‹ƒå‘å±•ï¼Œå·²ç»æ²¡æœ‰äººç”¨core memory äº†ï¼Œä¸è¿‡ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œäººä»¬è¿˜æ˜¯æŠŠè®°å¿†ä½“å«ä½œ core ã€‚\nCore dump æˆ‘ä»¬åœ¨å¼€å‘ï¼ˆæˆ–ä½¿ç”¨ï¼‰ä¸€ä¸ªç¨‹åºæ—¶ï¼Œæœ€æ€•çš„å°±æ˜¯ç¨‹åºè«æ˜å…¶å¦™åœ°å®•æ‰ã€‚è™½ç„¶ç³»ç»Ÿæ²¡äº‹ï¼Œä½†æˆ‘ä»¬ä¸‹æ¬¡ä»å¯èƒ½é‡åˆ°ç›¸åŒçš„é—®é¢˜ã€‚äºæ˜¯è¿™æ—¶æ“ä½œç³»ç»Ÿå°±ä¼šæŠŠç¨‹åºå®•æ‰æ—¶çš„å†…å­˜å†…å®¹ dump å‡ºæ¥ï¼ˆç°åœ¨é€šå¸¸æ˜¯å†™åœ¨ä¸€ä¸ªå« core çš„ file é‡Œé¢ï¼‰ï¼Œè®©æˆ‘ä»¬åšä¸ºå‚è€ƒã€‚è¿™ä¸ªåŠ¨ä½œå°±å«ä½œ core dumpã€‚\nå¦‚ä½•è·å– Core æ–‡ä»¶ 1ã€åœ¨ä¸€äº› Linux ç‰ˆæœ¬ä¸‹ï¼Œé»˜è®¤æ˜¯ä¸äº§ç”Ÿcoreæ–‡ä»¶çš„ï¼Œé¦–å…ˆå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿcoreæ–‡ä»¶çš„å¤§å°é™åˆ¶ï¼š\n$:~/segfault$ ulimit -c 0 2ã€å¯ä»¥çœ‹åˆ°é»˜è®¤è®¾ç½®æƒ…å†µä¸‹ï¼Œæœ¬æœº Linux ç¯å¢ƒä¸‹å‘ç”Ÿæ®µé”™è¯¯æ—¶ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆcoreæ–‡ä»¶ï¼Œä¸‹é¢è®¾ç½®ä¸‹coreæ–‡ä»¶çš„å¤§å°é™åˆ¶ï¼ˆå•ä½ä¸º KBï¼‰ï¼š\n$:~/segfault$ ulimit -c 1024 $:~/segfault$ ulimit -c 1024 3ã€é‡æ–°è¿è¡Œç¨‹åºï¼Œå¦‚æœå‘ç”Ÿæ®µé”™è¯¯ï¼Œå°±ä¼šç”Ÿæˆcoreæ–‡ä»¶ã€‚\nå‡ºç°æ®µé”™è¯¯çš„å¯èƒ½åŸå›  è®¿é—®ä¸å­˜åœ¨çš„å†…å­˜åœ°å€ #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; void main() { int *ptr = NULL; *ptr = 0; } è®¿é—®ç³»ç»Ÿä¿æŠ¤çš„å†…å­˜åœ°å€ #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; void main() { int *ptr = (int *)0; *ptr = 100; } è®¿é—®åªè¯»çš„å†…å­˜åœ°å€ #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; #include\u0026lt;string.h\u0026gt; void main() { char *ptr = \u0026#34;test\u0026#34;; strcpy(ptr, \u0026#34;TEST\u0026#34;); } æ ˆæº¢å‡º #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; void main() { main(); } æ®µé”™è¯¯ä¿¡æ¯è·å– ç¨‹åºå‘ç”Ÿæ®µé”™è¯¯æ—¶ï¼Œæç¤ºä¿¡æ¯å¾ˆå°‘ï¼Œä¸‹é¢æœ‰å‡ ç§æŸ¥çœ‹æ®µé”™è¯¯çš„å‘ç”Ÿä¿¡æ¯çš„é€”å¾„ã€‚\ndmesg dmesg å¯ä»¥åœ¨åº”ç”¨ç¨‹åº crash æ‰æ—¶ï¼Œæ˜¾ç¤ºå†…æ ¸ä¸­ä¿å­˜çš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œé€šè¿‡dmesgå‘½ä»¤å¯ä»¥æŸ¥çœ‹å‘ç”Ÿæ®µé”™è¯¯çš„ç¨‹åºåç§°ã€å¼•èµ·æ®µé”™è¯¯å‘ç”Ÿçš„å†…å­˜åœ°å€ã€æŒ‡ä»¤æŒ‡é’ˆåœ°å€ã€å †æ ˆæŒ‡é’ˆåœ°å€ã€é”™è¯¯ä»£ç ã€é”™è¯¯åŸå› ç­‰ã€‚\n$:~/segfault$ dmesg [ 2329.479037] segfault3[2700]: segfault at 80484e0 ip 00d2906a sp bfbbec3c error 7 in libc-2.10.1.so[cb4000+13e000] -g ä½¿ç”¨ gcc ç¼–è¯‘ç¨‹åºçš„æºç æ—¶ï¼ŒåŠ ä¸Š-gå‚æ•°ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­åŠ å…¥å¯ä»¥ç”¨äº gdb è°ƒè¯•çš„æœ‰ç”¨ä¿¡æ¯ã€‚\n$:~/segfault$ gcc -g -o segfault3 segfault3.c nm ä½¿ç”¨ nm å‘½ä»¤åˆ—å‡ºäºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ï¼ŒåŒ…æ‹¬ç¬¦å·åœ°å€ã€ç¬¦å·ç±»å‹ã€ç¬¦å·åç­‰ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©å®šä½åœ¨å“ªé‡Œå‘ç”Ÿäº†æ®µé”™è¯¯ã€‚\npanfeng@ubuntu:~/segfault$ nm segfault3 08049f20 d _DYNAMIC 08049ff4 d _GLOBAL_OFFSET_TABLE_ 080484dc R _IO_stdin_used w _Jv_RegisterClasses 08049f10 d __CTOR_END__ 08049f0c d __CTOR_LIST__ 08049f18 D __DTOR_END__ 08049f14 d __DTOR_LIST__ 080484ec r __FRAME_END__ 08049f1c d __JCR_END__ 08049f1c d __JCR_LIST__ 0804a014 A __bss_start 0804a00c D __data_start 08048490 t __do_global_ctors_aux 08048360 t __do_global_dtors_aux 0804a010 D __dso_handle w __gmon_start__ 0804848a T __i686.get_pc_thunk.bx 08049f0c d __init_array_end 08049f0c d __init_array_start 08048420 T __libc_csu_fini 08048430 T __libc_csu_init U __libc_start_main@@GLIBC_2.0 0804a014 A _edata 0804a01c A _end 080484bc T _fini 080484d8 R _fp_hw 080482bc T _init 08048330 T _start 0804a014 b completed.6990 0804a00c W data_start 0804a018 b dtor_idx.6992 080483c0 t frame_dummy 080483e4 T main U memcpy@@GLIBC_2.0 ldd ä½¿ç”¨ ldd å‘½ä»¤æŸ¥çœ‹äºŒè¿›åˆ¶ç¨‹åºçš„å…±äº«é“¾æ¥åº“ä¾èµ–ï¼ŒåŒ…æ‹¬åº“çš„åç§°ã€èµ·å§‹åœ°å€ï¼Œè¿™æ ·å¯ä»¥ç¡®å®šæ®µé”™è¯¯åˆ°åº•æ˜¯å‘ç”Ÿåœ¨äº†è‡ªå·±çš„ç¨‹åºä¸­è¿˜æ˜¯ä¾èµ–çš„å…±äº«åº“ä¸­ã€‚\n$:~/segfault$ ldd ./segfault3 linux-gate.so.1 =\u0026gt; (0x00e08000) libc.so.6 =\u0026gt; /lib/tls/i686/cmov/libc.so.6 (0x00675000) /lib/ld-linux.so.2 (0x00482000) è°ƒè¯•æ–¹æ³•å’ŒæŠ€å·§ ä½¿ç”¨ gcc å’Œ gdb è°ƒè¯•æµç¨‹ ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ gdb è°ƒè¯•ç¨‹åºï¼Œåœ¨ç¼–è¯‘é˜¶æ®µåŠ ä¸Š-g å‚æ•°ï¼Œ $:~/segfault$ gcc -g -o segfault3 segfault3.c ä½¿ç”¨ gdb å‘½ä»¤è°ƒè¯•ç¨‹åºï¼š $:~/segfault$ gdb -q ./segfault3 Reading symbols from ./segfault3...done. (gdb) è¿›å…¥ gdb åï¼Œè¿è¡Œç¨‹åºï¼š (gdb) run Starting program: ./segfault3 Program received signal SIGSEGV, Segmentation fault. 0x001a306a in memcpy () from /lib/tls/i686/cmov/libc.so.6 (gdb) ä»è¾“å‡ºçœ‹å‡ºï¼Œç¨‹åºæ”¶åˆ°SIGSEGVä¿¡å·ï¼Œè§¦å‘æ®µé”™è¯¯ï¼Œå¹¶æç¤ºåœ°å€0x001a306aã€è°ƒç”¨ memcpy æŠ¥çš„é”™ï¼Œä½äº/lib/tls/i686/cmov/libc.so.6åº“ä¸­ã€‚\nå®Œæˆè°ƒè¯•åï¼Œè¾“å…¥quitå‘½ä»¤é€€å‡º gdbï¼š é€‚ç”¨åœºæ™¯ ä»…å½“èƒ½ç¡®å®šç¨‹åºä¸€å®šä¼šå‘ç”Ÿæ®µé”™è¯¯çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚\nå½“ç¨‹åºçš„æºç å¯ä»¥è·å¾—çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨-gå‚æ•°ç¼–è¯‘ç¨‹åºã€‚\nä¸€èˆ¬ç”¨äºæµ‹è¯•é˜¶æ®µï¼Œç”Ÿäº§ç¯å¢ƒä¸‹ gdb ä¼šæœ‰å‰¯ä½œç”¨ï¼šä½¿ç¨‹åºè¿è¡Œå‡æ…¢ï¼Œè¿è¡Œä¸å¤Ÿç¨³å®šï¼Œç­‰ç­‰ã€‚\nå³ä½¿åœ¨æµ‹è¯•é˜¶æ®µï¼Œå¦‚æœç¨‹åºè¿‡äºå¤æ‚ï¼Œgdb ä¹Ÿä¸èƒ½å¤„ç†ã€‚\nä½¿ç”¨ core æ–‡ä»¶å’Œ gdb åœ¨ä¸ŠèŠ‚ä¸­æåˆ°æ®µé”™è¯¯ä¼šè§¦å‘SIGSEGVä¿¡å·ï¼Œé€šè¿‡man 7 signalï¼Œå¯ä»¥çœ‹åˆ°SIGSEGVé»˜è®¤çš„handlerä¼šæ‰“å°æ®µé”™è¯¯å‡ºé”™ä¿¡æ¯ï¼Œå¹¶äº§ç”Ÿcoreæ–‡ä»¶ï¼Œç”±æ­¤æˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºç¨‹åºå¼‚å¸¸é€€å‡ºæ—¶ç”Ÿæˆçš„coreæ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯ï¼Œä½¿ç”¨ gdb å·¥å…·æ¥è°ƒè¯•ç¨‹åºä¸­çš„æ®µé”™è¯¯ã€‚\nè°ƒè¯•æµç¨‹ è¿è¡Œæœ‰æ®µé”™è¯¯çš„ç¨‹åºï¼Œç”Ÿæˆ core æ–‡ä»¶ã€‚ gdb åŠ è½½ core æ–‡ä»¶ $:~/segfault$ gdb ./segfault3 ./core Reading symbols from /home/panfeng/segfault/segfault3...done. warning: Can\u0026#39;t read pathname for load map: è¾“å…¥/è¾“å‡ºé”™è¯¯. Reading symbols from /lib/tls/i686/cmov/libc.so.6...(no debugging symbols found)...done. Loaded symbols for /lib/tls/i686/cmov/libc.so.6 Reading symbols from /lib/ld-linux.so.2...(no debugging symbols found)...done. Loaded symbols for /lib/ld-linux.so.2 Core was generated by `./segfault3\u0026#39;. Program terminated with signal 11, Segmentation fault. #0 0x0018506a in memcpy () from /lib/tls/i686/cmov/libc.6 ä»è¾“å‡ºçœ‹å‡ºï¼ŒåŒä¸ŠèŠ‚ä¸­ä¸€æ ·çš„æ®µé”™è¯¯ä¿¡æ¯ã€‚\né€‚ç”¨åœºæ™¯ é€‚åˆäºåœ¨å®é™…ç”Ÿæˆç¯å¢ƒä¸‹è°ƒè¯•ç¨‹åºçš„æ®µé”™è¯¯ï¼ˆå³åœ¨ä¸ç”¨é‡æ–°å‘ç”Ÿæ®µé”™è¯¯çš„æƒ…å†µä¸‹é‡ç°æ®µé”™è¯¯ï¼‰ã€‚\nå½“ç¨‹åºå¾ˆå¤æ‚ï¼Œcore æ–‡ä»¶ç›¸å½“å¤§æ—¶ï¼Œè¯¥æ–¹æ³•ä¸å¯ç”¨ã€‚\nä½¿ç”¨ objdump è°ƒè¯•æµç¨‹ ä½¿ç”¨ dmesg å‘½ä»¤ï¼Œæ‰¾åˆ°æœ€è¿‘å‘ç”Ÿçš„æ®µé”™è¯¯è¾“å‡ºä¿¡æ¯ï¼š $:~/segfault$ dmesg ... ... [17257.502808] segfault3[3320]: segfault at 80484e0 ip 0018506a sp bfc1cd6c error 7 in libc-2.10.1.so[110000+13e000] å…¶ä¸­ï¼Œå¯¹æˆ‘ä»¬æ¥ä¸‹æ¥çš„è°ƒè¯•è¿‡ç¨‹æœ‰ç”¨çš„æ˜¯å‘ç”Ÿæ®µé”™è¯¯çš„åœ°å€ï¼š80484e0å’ŒæŒ‡ä»¤æŒ‡é’ˆåœ°å€ï¼š0018506aã€‚\nä½¿ç”¨objdumpç”ŸæˆäºŒè¿›åˆ¶çš„ç›¸å…³ä¿¡æ¯ï¼Œé‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼š $:~/segfault$ objdump -d ./segfault3 \u0026gt; segfault3Dump å…¶ä¸­ï¼Œç”Ÿæˆçš„segfault3Dumpæ–‡ä»¶ä¸­åŒ…å«äº†äºŒè¿›åˆ¶æ–‡ä»¶çš„segfault3çš„æ±‡ç¼–ä»£ç ã€‚\nåœ¨segfault3Dumpæ–‡ä»¶ä¸­æŸ¥æ‰¾å‘ç”Ÿæ®µé”™è¯¯çš„åœ°å€ï¼š panfeng@ubuntu:~/segfault$ grep -n -A 10 -B 10 \u0026#34;80484e0\u0026#34; ./segfault3Dump 121- 80483df: ff d0 call *%eax 122- 80483e1: c9 leave 123- 80483e2: c3 ret 124- 80483e3: 90 nop 125- 126-080483e4 \u0026lt;main\u0026gt;: 127- 80483e4: 55 push %ebp 128- 80483e5: 89 e5 mov %esp,%ebp 129- 80483e7: 83 e4 f0 and $0xfffffff0,%esp 130- 80483ea: 83 ec 20 sub $0x20,%esp 131: 80483ed: c7 44 24 1c e0 84 04 movl $0x80484e0,0x1c(%esp) 132- 80483f4: 08 133- 80483f5: b8 e5 84 04 08 mov $0x80484e5,%eax 134- 80483fa: c7 44 24 08 05 00 00 movl $0x5,0x8(%esp) 135- 8048401: 00 136- 8048402: 89 44 24 04 mov %eax,0x4(%esp) 137- 8048406: 8b 44 24 1c mov 0x1c(%esp),%eax 138- 804840a: 89 04 24 mov %eax,(%esp) 139- 804840d: e8 0a ff ff ff call 804831c \u0026lt;memcpy@plt\u0026gt; 140- 8048412: c9 leave 141- 8048413: c3 ret é€šè¿‡å¯¹ä»¥ä¸Šæ±‡ç¼–ä»£ç åˆ†æï¼Œå¾—çŸ¥æ®µé”™è¯¯å‘ç”Ÿmainå‡½æ•°ï¼Œå¯¹åº”çš„æ±‡ç¼–æŒ‡ä»¤æ˜¯movl $0x80484e0,0x1c(%esp)ï¼Œæ¥ä¸‹æ¥æ‰“å¼€ç¨‹åºçš„æºç ï¼Œæ‰¾åˆ°æ±‡ç¼–æŒ‡ä»¤å¯¹åº”çš„æºç ï¼Œä¹Ÿå°±å®šä½åˆ°æ®µé”™è¯¯äº†ã€‚\né€‚ç”¨åœºæ™¯ ä¸éœ€è¦-gå‚æ•°ç¼–è¯‘ï¼Œä¸éœ€è¦å€ŸåŠ©äºcoreæ–‡ä»¶ï¼Œä½†éœ€è¦æœ‰ä¸€å®šçš„æ±‡ç¼–è¯­è¨€åŸºç¡€ã€‚ 2ã€å¦‚æœä½¿ç”¨äº† gcc ç¼–è¯‘ä¼˜åŒ–å‚æ•°ï¼ˆ-O1ï¼Œ-O2ï¼Œ-O3ï¼‰çš„è¯ï¼Œç”Ÿæˆçš„æ±‡ç¼–æŒ‡ä»¤å°†ä¼šè¢«ä¼˜åŒ–ï¼Œä½¿å¾—è°ƒè¯•è¿‡ç¨‹æœ‰äº›éš¾åº¦ã€‚\nä½¿ç”¨ catchsegv catchsegvå‘½ä»¤ä¸“é—¨ç”¨æ¥æ‰‘è·æ®µé”™è¯¯ï¼Œå®ƒé€šè¿‡åŠ¨æ€åŠ è½½å™¨ï¼ˆld-linux.soï¼‰çš„é¢„åŠ è½½æœºåˆ¶ï¼ˆPRELOADï¼‰æŠŠä¸€ä¸ªäº‹å…ˆå†™å¥½çš„åº“ï¼ˆ/lib/libSegFault.soï¼‰åŠ è½½ä¸Šï¼Œç”¨äºæ•æ‰æ–­é”™è¯¯çš„å‡ºé”™ä¿¡æ¯ã€‚\n$:~/segfault$ catchsegv ./segfault3 Segmentation fault (core dumped) *** Segmentation fault Register dump: EAX: 00000000 EBX: 00fb3ff4 ECX: 00000002 EDX: 00000000 ESI: 080484e5 EDI: 080484e0 EBP: bfb7ad38 ESP: bfb7ad0c EIP: 00ee806a EFLAGS: 00010203 CS: 0073 DS: 007b ES: 007b FS: 0000 GS: 0033 SS: 007b Trap: 0000000e Error: 00000007 OldMask: 00000000 ESP/signal: bfb7ad0c CR2: 080484e0 Backtrace: /lib/libSegFault.so[0x3b606f] ??:0(??)[0xc76400] /lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0xe89b56] /build/buildd/eglibc-2.10.1/csu/../sysdeps/i386/elf/start.S:122(_start)[0x8048351] Memory map: 00258000-00273000 r-xp 00000000 08:01 157 /lib/ld-2.10.1.so 00273000-00274000 r--p 0001a000 08:01 157 /lib/ld-2.10.1.so 00274000-00275000 rw-p 0001b000 08:01 157 /lib/ld-2.10.1.so 003b4000-003b7000 r-xp 00000000 08:01 13105 /lib/libSegFault.so 003b7000-003b8000 r--p 00002000 08:01 13105 /lib/libSegFault.so 003b8000-003b9000 rw-p 00003000 08:01 13105 /lib/libSegFault.so 00c76000-00c77000 r-xp 00000000 00:00 0 [vdso] 00e0d000-00e29000 r-xp 00000000 08:01 4817 /lib/libgcc_s.so.1 00e29000-00e2a000 r--p 0001b000 08:01 4817 /lib/libgcc_s.so.1 00e2a000-00e2b000 rw-p 0001c000 08:01 4817 /lib/libgcc_s.so.1 00e73000-00fb1000 r-xp 00000000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so 00fb1000-00fb2000 ---p 0013e000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so 00fb2000-00fb4000 r--p 0013e000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so 00fb4000-00fb5000 rw-p 00140000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so 00fb5000-00fb8000 rw-p 00000000 00:00 0 08048000-08049000 r-xp 00000000 08:01 303895 /home/segfault/segfault3 08049000-0804a000 r--p 00000000 08:01 303895 /home/segfault/segfault3 0804a000-0804b000 rw-p 00001000 08:01 303895 /home/segfault/segfault3 09432000-09457000 rw-p 00000000 00:00 0 [heap] b78cf000-b78d1000 rw-p 00000000 00:00 0 b78df000-b78e1000 rw-p 00000000 00:00 0 bfb67000-bfb7c000 rw-p 00000000 00:00 0 [stack] å¦‚ä½•é¿å…æ®µé”™è¯¯ å‡ºç°æ®µé”™è¯¯æ—¶ï¼Œé¦–å…ˆåº”è¯¥æƒ³åˆ°æ®µé”™è¯¯çš„å®šä¹‰ï¼Œä»å®ƒå‡ºå‘è€ƒè™‘å¼•å‘é”™è¯¯çš„åŸå› ã€‚\nåœ¨ä½¿ç”¨æŒ‡é’ˆæ—¶ï¼Œå®šä¹‰äº†æŒ‡é’ˆåè®°å¾—åˆå§‹åŒ–æŒ‡é’ˆï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™è®°å¾—åˆ¤æ–­æ˜¯å¦ä¸º NULLã€‚\nåœ¨ä½¿ç”¨æ•°ç»„æ—¶ï¼Œæ³¨æ„æ•°ç»„æ˜¯å¦è¢«åˆå§‹åŒ–ï¼Œæ•°ç»„ä¸‹æ ‡æ˜¯å¦è¶Šç•Œï¼Œæ•°ç»„å…ƒç´ æ˜¯å¦å­˜åœ¨ç­‰ã€‚\nåœ¨è®¿é—®å˜é‡æ—¶ï¼Œæ³¨æ„å˜é‡æ‰€å åœ°å€ç©ºé—´æ˜¯å¦å·²ç»è¢«ç¨‹åºé‡Šæ”¾æ‰ã€‚\nåœ¨å¤„ç†å˜é‡æ—¶ï¼Œæ³¨æ„å˜é‡çš„æ ¼å¼æ§åˆ¶æ˜¯å¦åˆç†ç­‰ã€‚\nReference ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3segmentation-fault-core-dumped/","summary":"\u003ch2 id=\"ç›¸å…³æ¦‚å¿µ\"\u003eç›¸å…³æ¦‚å¿µ\u003c/h2\u003e\n\u003ch3 id=\"core\"\u003eCore\u003c/h3\u003e\n\u003cp\u003eåœ¨ä½¿ç”¨åŠå¯¼ä½“ä½œä¸ºå†…å­˜çš„ææ–™å‰ï¼Œäººç±»æ˜¯åˆ©ç”¨çº¿åœˆå½“ä½œå†…å­˜çš„ææ–™ï¼ˆå‘æ˜è€…ä¸ºç‹å®‰ï¼‰ï¼Œçº¿åœˆå°±å«ä½œ \u003ccode\u003ecore\u003c/code\u003e ï¼Œç”¨çº¿åœˆåšçš„å†…å­˜å°±å«ä½œ \u003ccode\u003ecore memory\u003c/code\u003eã€‚å¦‚ä»Šï¼ŒåŠå¯¼ä½“å·¥ä¸šæ¾å‹ƒå‘å±•ï¼Œå·²ç»æ²¡æœ‰äººç”¨\u003ccode\u003ecore memory\u003c/code\u003e äº†ï¼Œä¸è¿‡ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œäººä»¬è¿˜æ˜¯æŠŠè®°å¿†ä½“å«ä½œ \u003ccode\u003ecore\u003c/code\u003e ã€‚\u003c/p\u003e","title":"è§£å†³ Segmentation fault (core dumped)"},{"content":"æ±‡ç¼–è¯­æ³•ä»‹ç» ä¸€æ¡å…¸å‹çš„ RISC-V æ±‡ç¼–è¯­å¥ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆ[label:][operation][comment]ã€‚ åç¼€.så’Œ.SåŒºåˆ«ï¼šåè€…çº¯æ±‡ç¼–ã€‚\nlabel(æ ‡å·) operation å¯ä»¥æœ‰ä»¥ä¸‹å¤šç§ç±»å‹ï¼š instruction (æŒ‡ä»¤) ï¼šç›´æ¥å¯¹åº”äºŒè¿›åˆ¶æœºå™¨æŒ‡ä»¤çš„å®‡ç¬¦ä¸² pseudo-instruction (ä¼ªæŒ‡ä»¤) ï¼šä¸ºäº†æé«˜ç¼–å†™ä»£ç çš„æ•ˆç‡ï¼Œå¯ä»¥ç”¨ä¸€æ¡ä¼ªæŒ‡ä»¤æŒ‡ç¤ºæ±‡ç¼–å™¨äº§ç”Ÿå¤šæ¡å®é™…çš„æŒ‡ä»¤ (instructions)ã€‚ directive (æŒ‡ç¤º/ä¼ªæ“ä½œ) ï¼šé€šè¿‡ç±»ä¼¼æŒ‡ä»¤çš„å½¢å¼(ä»¥\u0026quot;.\u0026ldquo;å¼€å¤´),é€šçŸ¥æ±‡ç¼–å™¨å¦‚ä½•æ§åˆ¶ä»£ç çš„äº§ç”Ÿç­‰ï¼Œä¸å¯¹åº”å…·ä½“çš„æŒ‡ä»¤ã€‚ macroï¼šé‡‡ç”¨.macro/.endm è‡ªå®šä¹‰çš„å® ä¾‹å­ .macro do_nothing # directive nop # pseudo-instruction nop # pseudo-instruction .endm # directive .text # directive .global _start # directive _start: # Label li x6, 5 # pseudo-instruction li x7, 4 # pseudo-instruction add x5, x6, x7 # instruction do_nothing # Calling macro stop: j stop # statement in one line .end # End of file commentï¼ˆæ³¨é‡Šï¼‰ä»¥#å¼€å¤´åˆ°è¡Œå°¾ RISC-V æ±‡ç¼–æŒ‡ä»¤æ€»è§ˆ æ“ä½œå¯¹è±¡ å¯„å­˜å™¨ 32ä¸ªé€šç”¨å¯„å­˜å™¨,x0 ~ x31ï¼ˆæ³¨æ„ï¼šæœ¬ç« èŠ‚è¯¾ç¨‹ä»…æ¶‰åŠRV32Içš„é€šç”¨å¯„å­˜å™¨ç»„ï¼‰ï¼› åœ¨ RISC-V ä¸­ï¼ŒHart åœ¨æ‰§è¡Œç®—æœ¯é€»è¾‘è¿ç®—æ—¶æ‰€æ“ä½œçš„æ•°æ®å¿…é¡»ç›´æ¥æ¥è‡ªå¯„å­˜å™¨ã€‚ å†…å­˜ Hartå¯ä»¥æ‰§è¡Œåœ¨å¯„å­˜å™¨å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®è¯»å†™æ“ä½œï¼› è¯»å†™æ“ä½œä½¿ç”¨å­—èŠ‚ (Byte) ä¸ºåŸºæœ¬å•ä½è¿›è¡Œå¯»å€ï¼› RV32å¯ä»¥è®¿é—®æœ€å¤š2^32ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ã€‚ ç¼–ç æ ¼å¼ \u003c!DOCTYPE html\u003e Responsive Image æŒ‡ä»¤é•¿åº¦ï¼š32bitï¼Œæœ¬æ–‡è®¨è®ºçš„éƒ½æ˜¯ RV32 æŒ‡ä»¤é›†\næŒ‡ä»¤å¯¹é½ï¼šæŒ‡ä»¤åŠ è½½åˆ°å†…å­˜æ˜¯ä»¥ 32bit å¯¹é½\nfunct3ã€funct7å’Œopcodeä¸€èµ·å†³å®šæŒ‡ä»¤ç±»å‹ï¼Œfunct3è¡¨ç¤ºå  3bitï¼Œfunct7å  7bitã€‚\nopcodeæ˜ å°„å…³ç³»ï¼š\n[1:0] æ°¸è¿œä¸º 11 [4:2] ä¸ºä¸‹å›¾æ¨ªè½´ [6:5] ä¸ºä¸‹å›¾çºµè½´ï¼Œä¸‰éƒ¨åˆ†å†³å®šæŒ‡ä»¤çš„ç±»å‹ã€‚ ä»¥BEQæŒ‡ä»¤ä¸ºä¾‹opcode=1100011ã€‚[4:2]=000ï¼Œ[6:5]=11æŸ¥è¡¨å¯å¾—BEQæŒ‡ä»¤ç±»å‹ä¸ºBRANCHã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å°ç«¯åº ä¸»æœºå­—èŠ‚åº (HBO-Host Byte Order) ä¸€ä¸ªå¤šå­—èŠ‚æ•´æ•°åœ¨è®¡ç®—æœºå†…å­˜ä¸­å­˜å‚¨çš„å­—èŠ‚é¡ºåºç§°ä¸»æœºå­—èŠ‚åº (HBO- Host Byte Orderï¼Œæˆ–è€…å«æœ¬åœ°å­—èŠ‚åº) ä¸åŒç±»å‹ CPU çš„ HBO ä¸åŒï¼Œè¿™ä¸ CPU çš„è®¾è®¡æœ‰å…³ã€‚åˆ†ä¸ºå¤§ç«¯åº (Big-Endian) å’Œå°ç«¯åº (Little-Endian) \u003c!DOCTYPE html\u003e Responsive Image æŒ‡ä»¤åˆ†ç±» \u003c!DOCTYPE html\u003e Responsive Image rdï¼ˆregister destinationï¼‰ç›®æ ‡å¯„å­˜å™¨ï¼Œrsï¼ˆregister sourceï¼‰æºå¯„å­˜å™¨ï¼Œå¤§å°éƒ½æ˜¯ 5bitï¼Œå› ä¸ºå¯ä»¥è¡¨ç¤º2^5=32å¯„å­˜å™¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æŒ‡ä»¤è¯¦è§£ ç®—æœ¯è¿ç®—æŒ‡ä»¤ ADD ç®—æ•°æŒ‡ä»¤åªåŒ…å«åŠ å‡ï¼Œä¸åŒ…å«ä¹˜é™¤ï¼Œä¹˜é™¤è¿ç®—æœ‰ä¸“é—¨çš„æ‰©å±•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ•°æ®ä¼ é€é¡ºåºæ˜¯ç”±åå‘å‰ï¼Œå’Œæ­£å¸¸çš„ç¼–ç ä¹ æƒ¯ç±»ä¼¼ã€‚\nSUB Substract ç»ƒä¹ \nç°çŸ¥é“æŸæ¡ RISC-V çš„æœºå™¨æŒ‡ä»¤åœ¨å†…å­˜ä¸­çš„å€¼ä¸ºb3 05 95 00,ä»å·¦å¾€å³ä¸ºä»ä½åœ°å€åˆ°é«˜åœ°å€ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œè¯·å°†å…¶ç¿»è¯‘ä¸ºå¯¹åº”çš„æ±‡ç¼–æŒ‡ä»¤ã€‚\nç¡®å®šå­—èŠ‚åº åœ¨ RISC-V ä¸­å­˜æ”¾æ˜¯å°ç«¯åºï¼Œæ ¹æ®é¢˜æ„çœŸæ­£æŒ‡ä»¤åº”è¯¥æ˜¯00 95 05 b3 è½¬æ¢äºŒè¿›åˆ¶ æœºå™¨ç æ˜¯äºŒè¿›åˆ¶ï¼Œæ‰€ä»¥éœ€è¦å°†ä¸Šè¿°æŒ‡ä»¤å€¼è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œå¯å¾—0000000 01001 01010 000 01011 0110011 æŸ¥é˜…æ‰‹å†Œ æŸ¥é˜…The RISC-V Instruction Set Manual Volume I: Unprivileged ISAæ‰¾åˆ°RV32/64G Instruction Set ListingsæŒ‡ä»¤è¡¨æ ¼ï¼Œä½ 7 ä½æ˜¯opcodeï¼ŒæŸ¥è¡¨å¯å¾—0110011å¯¹åº”æ“ä½œç æœ‰å¤šä¸ªSLLI SRAI SUBç­‰ç­‰ï¼Œæ­¤æ—¶å†çœ‹æœ€é«˜ä½00000000,å¯ä»¥ç¡®å®šæ˜¯ADDæŒ‡ä»¤ å°†åˆ†å‰²çš„äºŒè¿›åˆ¶è½¬æˆåè¿›åˆ¶ 0000000 9 10 000 11 010011-\u0026gt;ADD x11 x10 x9 ADDI ADD Immediate \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image LUI Load Upper Immediate \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image LI \u003c!DOCTYPE html\u003e Responsive Image AUIPC \u003c!DOCTYPE html\u003e Responsive Image ç»å¸¸ç”¨äºæ„é€ ä¸€ä¸ªç›¸å¯¹åœ°å€ã€‚\nLA \u003c!DOCTYPE html\u003e Responsive Image åŸºäºç®—æœ¯è¿ç®—æŒ‡ä»¤å®ç°çš„å…¶ä»–ä¼ªæŒ‡ä»¤ x0å¯„å­˜å™¨å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¾€é‡Œå†™æ•°æ®æ²¡æœ‰æ„ä¹‰ NOPæŒ‡ä»¤ä¸»è¦ä¸ºäº†å ä½ï¼Œç©ºè½¬\n\u003c!DOCTYPE html\u003e Responsive Image é€»è¾‘è¿ç®—æŒ‡ä»¤ \u003c!DOCTYPE html\u003e Responsive Image NOT 10101010 11111111(-1) -------- XOR 01010101 ç§»ä½è¿ç®—æŒ‡ä»¤ \u003c!DOCTYPE html\u003e Responsive Image ç®—æ•°ç§»ä½ åªæœ‰å³ç§»ï¼Œæ²¡æœ‰å·¦ç§»ã€‚å·¦ç§»ä¼šæŠŠæœ€é«˜ä½è¦†ç›–ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image 10001000 \u0026gt;\u0026gt; 2 = 11100001 å†…å­˜è¯»å†™æŒ‡ä»¤ åŠ è½½ï¼Œå†…å­˜è¯»ï¼Œå°†æ•°æ®ä»å†…å­˜è¯»å…¥å¯„å­˜å™¨\nStoreï¼Œå†…å­˜å†™ï¼Œå°†æ•°æ®ä»å¯„å­˜å™¨å†™å‡ºåˆ°å†…å­˜\n\u003c!DOCTYPE html\u003e Responsive Image ä¸ºä½•å¯¹ word çš„ åŠ è½½ ä¸åŒºåˆ†æ— ç¬¦å·å’Œæœ‰ç¬¦å·æ–¹å¼ (RV32)ï¼ŸRV32 ä¸‹å¯„å­˜å™¨æ˜¯ 4 å­—èŠ‚ï¼ŒåŠ è½½ word ä¹Ÿæ˜¯ 4 å­—èŠ‚ï¼Œè‡ªç„¶ä¸éœ€è¦æ‰©å±•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¸ºä½• store ä¸åŒºåˆ†æœ‰ç¬¦å·è¿˜æ˜¯æ— ç¬¦å·ï¼Ÿå› ä¸ºä»ç›®çš„åœ°å€åªæœ‰ 1 å­—èŠ‚ï¼Œä¸ç®¡æ˜¯å†™ 1 å­—èŠ‚ï¼Œ2 å­—èŠ‚ï¼Œè¿˜æ˜¯ 4 å­—èŠ‚ï¼Œéƒ½åªç”¨åˆ°æœ€ä½çš„ 1 å­—èŠ‚ã€‚ä¸éœ€è¦è€ƒè™‘ç¬¦å·\nç«‹å³æ•°åˆ†ä¸¤ä¸ªåœ°æ–¹å­˜ï¼Œä¸ºäº†è§£ç æ•ˆç‡\næ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ \u003c!DOCTYPE html\u003e Responsive Image æŒ‡ä»¤æ ¼å¼ä¸­çš„ç«‹å³æ•° (imm) å­˜æ”¾æœ‰äº›å¥‡æ€ªï¼Œç¬¬ [1-4] ä½å’Œç¬¬ [11] ä½æ”¾åœ¨ä¸€èµ·ï¼Œç¬¬ [5-10] ä½å’Œç¬¬ [12] ä½æ”¾åœ¨ä¸€èµ·ã€‚è¿™æ˜¯ä¸ºäº†è¿åˆç¡¬ä»¶å¤„ç†æ•ˆç‡ï¼Œç¼–ç¨‹æ—¶ä¸éœ€è¦è€ƒè™‘ç«‹å³æ•°å­˜å‚¨æ–¹å¼ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image int a = 1; int b = 1; void sum() { a = a+b; return; // jalr x0 0(x5) å½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤å­˜åˆ°x0ä¸­ï¼Œå¹¶è·³è½¬åˆ°ï¼ˆ0 + x5)ï¼Œä¹Ÿå°±æ˜¯sumçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ } void _start() { sum(); // jal x5 sum æŠŠsumçš„ä¸‹ä¸€æ¡æŒ‡ä»¤å­˜åˆ°x5ï¼Œç„¶åè·³è½¬åˆ°sum ... } å¦‚ä½•è§£å†³é•¿è·ç¦»è·³è½¬ï¼Ÿä½¿ç”¨ AUIPC æ¥æ„å»ºä¸€ä¸ªå¤§æ•°ï¼Œé…åˆ JALR ä½¿ç”¨ã€‚å¦‚ auipc x6,imm-20 jalr x1,x6,imm-12\n\u003c!DOCTYPE html\u003e Responsive Image RISC-V æŒ‡ä»¤å¯»å€æ¨¡å¼æ€»ç»“ \u003c!DOCTYPE html\u003e Responsive Image æ±‡ç¼–å‡½æ•°è°ƒç”¨çº¦å®š å‡½æ•°è°ƒç”¨è¿‡ç¨‹æ¦‚è¿° æ ˆï¼ˆstackï¼‰æ•°æ®ç»“æ„ï¼Œåœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ä¼šç”¨æ¥ä¿å­˜å˜é‡ï¼Œå‡½æ•°åœ°å€ç­‰ç­‰ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ ˆå¸§é‡Œä¿å­˜çš„å˜é‡æ˜¯è‡ªåŠ¨å˜é‡ï¼Œä¼šè¢«å†…å­˜è‡ªåŠ¨é‡Šæ”¾ã€‚\nä¸ºä½•è¦æœ‰è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…ä¿å­˜çš„æ¦‚å¿µ\n\u003c!DOCTYPE html\u003e Responsive Image å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å°±ä¼šæœ‰å‚æ•°å’Œè¿”å›å€¼çš„ä¼ é€’ï¼Œè‡ªå·±å†™çš„å‡½æ•°å¯èƒ½ç”±åˆ«äººæ¥è°ƒç”¨ï¼Œå¦‚æœæ²¡æœ‰çº¦å®šå¥½æŸä¸ªå‚æ•°å­˜æ”¾ä½ç½®ï¼Œå°±ä¸èƒ½å¤Ÿé¡ºåˆ©æ‰§è¡Œå‡½æ•°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å› ä¸ºå¯„å­˜å™¨éœ€è¦ç»å¸¸åœ¨ç¼–ç¨‹ä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥ ABI åå°±æ˜¯å¯„å­˜å™¨çš„åˆ«åã€‚\nè¿™äº›å¯„å­˜å™¨å…¶å®éƒ½å¯ä»¥è®¾ç½®æˆè¢«è°ƒç”¨è€…ä¿å­˜ï¼Œä¹Ÿå°±æ˜¯åœ¨è¢«è°ƒç”¨å‡½æ•°ä¸­ä¿å­˜ä¸€éä¸ºå•¥è¿˜è¦åˆ†è¿™ä¹ˆå¤š ç­”ï¼šå› ä¸ºä¿å­˜ä¸€éæ•ˆç‡ä½\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å°¾è°ƒç”¨å®ä¾‹ # Calling Convention # Demo to create a leaf routine # # void _start() # { # // calling leaf routine # square(3); # } # # int square(int num) # { # return num * num; # } .text # Define beginning of text section .global _start # Define entry _start _start: la sp, stack_end # prepare stack for calling functions li a0, 3 # pass 3 to square call square # call square # the time return here, a0 should stores the result stop: j stop # Infinite loop to stop execution # int square(int num) square: # prologue addi sp, sp, -8 # reserve space for local variables sw s0, 0(sp) # save s0 sw s1, 4(sp) # save s1 # `mul a0, a0, a0` should be fine, # programing as below just to demo we can contine use the stack mv s0, a0 # s0 = a0 mul s1, s0, s0 # s1 = s0 * s0 mv a0, s1 # a0 = s1 # epilogue lw s0, 0(sp) # restore s0 lw s1, 4(sp) # restore s1 addi sp, sp, 8 # release space for local variables ret # return from function # add nop here just for demo in gdb nop # allocate stack space stack_start: .rept 10 # reserve 10 words for stack .word 0 # fill with 0 .endr # end of repeat stack_end: .end # End of file éå°¾è°ƒç”¨å®ä¾‹ # Calling Convention # Demo how to write nested routines # # void _start() # { # // calling nested routine # aa_bb(3, 4); # } # # int aa_bb(int a, int b) # { # return square(a) + square(b); # } # # int square(int num) # { # return num * num; # } .text # Define beginning of text section .global _start # Define entry _start _start: la sp, stack_end # prepare stack for calling functions # aa_bb(3, 4); li a0, 3 # load argument a li a1, 4 # load argument b call aa_bb # call aa_bb stop: j stop # Infinite loop to stop execution # int aa_bb(int a, int b) # return a^2 + b^2 aa_bb: # prologue addi sp, sp, -16 # decrement stack pointer by 16 bytes sw s0, 0(sp) # save s0 sw s1, 4(sp) # save s1 sw s2, 8(sp) # save s2 sw ra, 12(sp) # save ra # cp and store the input params mv s0, a0 # copy a to s0 mv s1, a1 # copy b to s1 # sum will be stored in s2 and is initialized as zero li s2, 0 # initialize s2 to zero mv a0, s0 # copy s0 to a0 jal square # call square add s2, s2, a0 # add a0 to s2 mv a0, s1 # copy s1 to a0 jal square # call square add s2, s2, a0 # add a0 to s2 mv a0, s2 # copy s2 to a0 # epilogue lw s0, 0(sp) # restore s0 lw s1, 4(sp) # restore s1 lw s2, 8(sp) # restore s2 lw ra, 12(sp) # restore ra addi sp, sp, 16 # increment stack pointer by 16 bytes ret # return from aa_bb # int square(int num) square: # prologue addi sp, sp, -8 # decrement stack pointer by 8 bytes sw s0, 0(sp) # save s0 sw s1, 4(sp) # save s1 # `mul a0, a0, a0` should be fine, # programing as below just to demo we can contine use the stack mv s0, a0 # copy a to s0 mul s1, s0, s0 # s1 = a * a mv a0, s1 # copy s1 to a0 # epilogue lw s0, 0(sp) # restore s0 lw s1, 4(sp) # restore s1 addi sp, sp, 8 # increment stack pointer by 8 bytes ret # return from square # add nop here just for demo in gdb nop # allocate stack space stack_start: .rept 10 # allocate 10 words of stack space .word 0 # initialize stack space to 0 .endr # end of stack allocation stack_end: .end # End of file æ±‡ç¼–ä¸ C æ··åˆç¼–ç¨‹ å‰æ éµå®ˆ ABIï¼ˆAbstract Binary Interfaceï¼‰çš„è§„å®š\næ•°æ®ç±»å‹å¤§å°ï¼Œå¸ƒå±€ï¼Œå¯¹é½ å‡½æ•°è°ƒç”¨çº¦å®š ç³»ç»Ÿè°ƒç”¨çº¦å®š ç­‰ç­‰ RISC-V å‡½æ•°è°ƒç”¨çº¦å®šè§„å®š\nå‡½æ•°å‚æ•°é‡‡ç”¨å¯„å­˜å™¨a0-a7 å‡½æ•°è¿”å›å€¼é‡‡ç”¨å¯„å­˜å™¨a0,a1 æ±‡ç¼–åµŒå…¥ C è¯­è¨€ # ASM call C .text # Define beginning of text section .global _start # Define entry _start .global foo # foo is a C function defined in test.c _start: la sp, stack_end # prepare stack for calling functions # RISC-V uses a0 ~ a7 to transfer parameters li a0, 1 li a1, 2 call foo #è°ƒç”¨äº†Cè¯­è¨€å‡½æ•° # RISC-V uses a0 \u0026amp; a1 to transfer return value # check value of a0 stop: j stop # Infinite loop to stop execution nop # just for demo effect stack_start: .rept 10 .word 0 .endr stack_end: .end # End of file call fooå°±æ˜¯åœ¨è°ƒç”¨ C è¯­è¨€å‡½æ•°ï¼Œfooã€‚ .global fooå‘Šè¯‰ç¼–è¯‘å™¨fooå‡½æ•°å®šä¹‰åœ¨å¤–é¢ã€‚\nC è¯­è¨€åµŒå…¥æ±‡ç¼– ä¸‹å›¾ä¸­ä¸ºç®€åŒ–å†™æ³•\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/risc-v%E5%85%A5%E9%97%A8-risc-v%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B/","summary":"\u003ch2 id=\"æ±‡ç¼–è¯­æ³•ä»‹ç»\"\u003eæ±‡ç¼–è¯­æ³•ä»‹ç»\u003c/h2\u003e\n\u003cp\u003eä¸€æ¡å…¸å‹çš„ RISC-V æ±‡ç¼–è¯­å¥ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆ\u003ccode\u003e[label:][operation][comment]\u003c/code\u003eã€‚\nåç¼€\u003ccode\u003e.s\u003c/code\u003eå’Œ\u003ccode\u003e.S\u003c/code\u003eåŒºåˆ«ï¼šåè€…çº¯æ±‡ç¼–ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003elabel(æ ‡å·)\u003c/li\u003e\n\u003cli\u003eoperation å¯ä»¥æœ‰ä»¥ä¸‹å¤šç§ç±»å‹ï¼š\n\u003cul\u003e\n\u003cli\u003einstruction (æŒ‡ä»¤) ï¼šç›´æ¥å¯¹åº”äºŒè¿›åˆ¶æœºå™¨æŒ‡ä»¤çš„å®‡ç¬¦ä¸²\u003c/li\u003e\n\u003cli\u003epseudo-instruction (ä¼ªæŒ‡ä»¤) ï¼šä¸ºäº†æé«˜ç¼–å†™ä»£ç çš„æ•ˆç‡ï¼Œå¯ä»¥ç”¨ä¸€æ¡ä¼ªæŒ‡ä»¤æŒ‡ç¤ºæ±‡ç¼–å™¨äº§ç”Ÿå¤šæ¡å®é™…çš„æŒ‡ä»¤ (instructions)ã€‚\u003c/li\u003e\n\u003cli\u003edirective (æŒ‡ç¤º/ä¼ªæ“ä½œ) ï¼šé€šè¿‡ç±»ä¼¼æŒ‡ä»¤çš„å½¢å¼(ä»¥\u0026quot;.\u0026ldquo;å¼€å¤´),é€šçŸ¥æ±‡ç¼–å™¨å¦‚ä½•æ§åˆ¶ä»£ç çš„äº§ç”Ÿç­‰ï¼Œä¸å¯¹åº”å…·ä½“çš„æŒ‡ä»¤ã€‚\u003c/li\u003e\n\u003cli\u003emacroï¼šé‡‡ç”¨.macro/.endm è‡ªå®šä¹‰çš„å®\nä¾‹å­\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-text\" data-lang=\"text\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e.macro do_nothing  # directive\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  nop    # pseudo-instruction\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  nop    # pseudo-instruction\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e.endm      # directive\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  .text    # directive\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  .global _start  # directive\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e_start:     # Label\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  li x6, 5  # pseudo-instruction\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  li x7, 4  # pseudo-instruction\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  add x5, x6, x7  # instruction\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  do_nothing  # Calling macro\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003estop:  j stop    # statement in one line\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  .end    # End of file\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ecommentï¼ˆæ³¨é‡Šï¼‰ä»¥\u003ccode\u003e#\u003c/code\u003eå¼€å¤´åˆ°è¡Œå°¾\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"risc-v-æ±‡ç¼–æŒ‡ä»¤æ€»è§ˆ\"\u003eRISC-V æ±‡ç¼–æŒ‡ä»¤æ€»è§ˆ\u003c/h2\u003e\n\u003ch3 id=\"æ“ä½œå¯¹è±¡\"\u003eæ“ä½œå¯¹è±¡\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eå¯„å­˜å™¨\n\u003cul\u003e\n\u003cli\u003e32ä¸ªé€šç”¨å¯„å­˜å™¨,\u003ccode\u003ex0 ~ x31\u003c/code\u003eï¼ˆæ³¨æ„ï¼šæœ¬ç« èŠ‚è¯¾ç¨‹ä»…æ¶‰åŠRV32Içš„é€šç”¨å¯„å­˜å™¨ç»„ï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eåœ¨ RISC-V ä¸­ï¼ŒHart åœ¨æ‰§è¡Œç®—æœ¯é€»è¾‘è¿ç®—æ—¶æ‰€æ“ä½œçš„æ•°æ®å¿…é¡»ç›´æ¥æ¥è‡ªå¯„å­˜å™¨ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå†…å­˜\n\u003cul\u003e\n\u003cli\u003eHartå¯ä»¥æ‰§è¡Œåœ¨å¯„å­˜å™¨å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®è¯»å†™æ“ä½œï¼›\u003c/li\u003e\n\u003cli\u003eè¯»å†™æ“ä½œä½¿ç”¨å­—èŠ‚ (Byte) ä¸ºåŸºæœ¬å•ä½è¿›è¡Œå¯»å€ï¼›\u003c/li\u003e\n\u003cli\u003eRV32å¯ä»¥è®¿é—®æœ€å¤š\u003ccode\u003e2^32\u003c/code\u003eä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ç¼–ç æ ¼å¼\"\u003eç¼–ç æ ¼å¼\u003c/h3\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210826142737.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210826142737.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"RISC-V å…¥é—¨-RISC-V æ±‡ç¼–è¯­è¨€ç¼–ç¨‹"},{"content":"å­¦ä¹ è¿‡ç¨‹ä¸­æŸ¥çœ‹äº†printf()æºç ï¼Œé‡åˆ°äº†è¿™æ ·çš„å‡½æ•°å®šä¹‰ï¼Œ\nvoid printf(char *fmt, ...){ char buf[256]; va_list args; memset(buf, 0, sizeof(buf)); va_start(args, fmt); vsprint(buf, fmt, args); va_end(args); puts(buf); } å‚æ•°ä¸­çš„ä¸‰ä¸ªç‚¹å·ï¼Œå°±æ˜¯ C è¯­è¨€ä¸­å¯å˜å‚æ•°çš„æ ‡è¯†ã€‚è¿™æ ·çš„å‡½æ•°ç§°ä¸ºå¯å˜å‚æ•°å‡½æ•°ã€‚è¿™ç§å‡½æ•°éœ€è¦å›ºå®šæ•°é‡çš„å¼ºåˆ¶å‚æ•°ï¼ˆmandatory argumentï¼‰ï¼Œåé¢æ˜¯æ•°é‡å¯å˜çš„å¯é€‰å‚æ•°ï¼ˆoptional argumentï¼‰ã€‚\nè¿™ç§å‡½æ•°å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªå¼ºåˆ¶å‚æ•°ã€‚å¯é€‰å‚æ•°çš„ç±»å‹å¯ä»¥å˜åŒ–ã€‚å¯é€‰å‚æ•°çš„æ•°é‡ç”±å¼ºåˆ¶å‚æ•°çš„å€¼å†³å®šï¼Œæˆ–ç”±ç”¨æ¥å®šä¹‰å¯é€‰å‚æ•°åˆ—è¡¨çš„ç‰¹æ®Šå€¼å†³å®šã€‚\nC è¯­è¨€ä¸­æœ€å¸¸ç”¨çš„å¯å˜å‚æ•°å‡½æ•°ä¾‹å­æ˜¯printfï¼ˆï¼‰å’Œ scanfï¼ˆï¼‰ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå¼ºåˆ¶å‚æ•°ï¼Œå³æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„è½¬æ¢ä¿®é¥°ç¬¦å†³å®šäº†å¯é€‰å‚æ•°çš„æ•°é‡å’Œç±»å‹ã€‚\nå¯å˜å‚æ•°å‡½æ•°è¦è·å–å¯é€‰å‚æ•°æ—¶ï¼Œå¿…é¡»é€šè¿‡ä¸€ä¸ªç±»å‹ä¸º va_list çš„å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†å‚æ•°ä¿¡æ¯ã€‚è¿™ç§ç±»å‹çš„å¯¹è±¡ä¹Ÿç§°ä¸ºå‚æ•°æŒ‡é’ˆï¼ˆargument pointerï¼‰ï¼Œå®ƒåŒ…å«äº†æ ˆä¸­è‡³å°‘ä¸€ä¸ªå‚æ•°çš„ä½ç½®ã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‚æ•°æŒ‡é’ˆä»ä¸€ä¸ªå¯é€‰å‚æ•°ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”±æ­¤ï¼Œå‡½æ•°å°±å¯ä»¥è·å–æ‰€æœ‰çš„å¯é€‰å‚æ•°ã€‚va_list ç±»å‹è¢«å®šä¹‰åœ¨å¤´æ–‡ä»¶ stdarg.h ä¸­ã€‚\nå½“ç¼–å†™æ”¯æŒå‚æ•°æ•°é‡å¯å˜çš„å‡½æ•°æ—¶ï¼Œå¿…é¡»ç”¨ va_list ç±»å‹å®šä¹‰å‚æ•°æŒ‡é’ˆï¼Œä»¥è·å–å¯é€‰å‚æ•°ã€‚åœ¨ä¸‹é¢çš„è®¨è®ºä¸­ï¼Œva_list å¯¹è±¡è¢«å‘½åä¸º argptrã€‚å¯ä»¥ç”¨ 4ä¸ªå®æ¥å¤„ç†è¯¥å‚æ•°æŒ‡é’ˆï¼Œè¿™äº›å®éƒ½å®šä¹‰åœ¨å¤´æ–‡ä»¶ stdarg.h ä¸­ï¼š\nå® va_start ä½¿ç”¨ç¬¬ä¸€ä¸ªå¯é€‰å‚æ•°çš„ä½ç½®æ¥åˆå§‹åŒ– argptr å‚æ•°æŒ‡é’ˆã€‚è¯¥å®çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯è¯¥å‡½æ•°æœ€åä¸€ä¸ªæœ‰åç§°å‚æ•°çš„åç§°ã€‚å¿…é¡»å…ˆè°ƒç”¨è¯¥å®ï¼Œæ‰å¯ä»¥å¼€å§‹ä½¿ç”¨å¯é€‰å‚æ•°ã€‚\nvoid va_start(va_list argptr, lastparam); å±•å¼€å® va_arg ä¼šå¾—åˆ°å½“å‰ argptr æ‰€å¼•ç”¨çš„å¯é€‰å‚æ•°ï¼Œä¹Ÿä¼šå°† argptr ç§»åŠ¨åˆ°åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå‚æ•°ã€‚å® va_arg çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯åˆšåˆšè¢«è¯»å…¥çš„å‚æ•°çš„ç±»å‹ã€‚\ntype va_arg(va_list argptr, type); å½“ä¸å†éœ€è¦ä½¿ç”¨å‚æ•°æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»è°ƒç”¨å® va_endã€‚å¦‚æœæƒ³ä½¿ç”¨å® va_start æˆ–è€…å® va_copy æ¥é‡æ–°åˆå§‹åŒ–ä¸€ä¸ªä¹‹å‰ç”¨è¿‡çš„å‚æ•°æŒ‡é’ˆï¼Œä¹Ÿå¿…é¡»å…ˆè°ƒç”¨å® va_endã€‚va_endè¢«å®šä¹‰ä¸ºç©ºã€‚å®ƒåªæ˜¯ä¸ºå®ç°ä¸ va_start é…å¯¹ (å®ç°ä»£ç å¯¹ç§°å’Œ\u0026quot;ä»£ç è‡ªæ³¨é‡Š\u0026quot;(æ ¹æ®ä»£ç å°±èƒ½çŸ¥é“åŠŸèƒ½ï¼Œä¸éœ€è¦é¢å¤–æ³¨é‡Š) åŠŸèƒ½)\nvoid va_end(va_list argptr); å® va_copy ä½¿ç”¨å½“å‰çš„srcå€¼æ¥åˆå§‹åŒ–å‚æ•°æŒ‡é’ˆ destã€‚ç„¶åå°±å¯ä»¥ä½¿ç”¨ destä¸­çš„å¤‡ä»½è·å–å¯é€‰å‚æ•°åˆ—è¡¨ï¼Œä»src æ‰€å¼•ç”¨çš„ä½ç½®å¼€å§‹ã€‚\nvoid va_copy(va_list dest, va_list src); // å‡½æ•° add() è®¡ç®—å¯é€‰å‚æ•°ä¹‹å’Œ // å‚æ•°ï¼šç¬¬ä¸€ä¸ªå¼ºåˆ¶å‚æ•°æŒ‡å®šäº†å¯é€‰å‚æ•°çš„æ•°é‡ï¼Œå¯é€‰å‚æ•°ä¸º double ç±»å‹ // è¿”å›å€¼ï¼šå’Œå€¼ï¼Œdouble ç±»å‹ double add( int n, ... ) { int i = 0; double sum = 0.0; va_list argptr; va_start( argptr, n ); // åˆå§‹åŒ– argptr for ( i = 0; i \u0026lt; n; ++i ) // å¯¹æ¯ä¸ªå¯é€‰å‚æ•°ï¼Œè¯»å–ç±»å‹ä¸º double çš„å‚æ•°ï¼Œ sum += va_arg( argptr, double ); // ç„¶åç´¯åŠ åˆ° sum ä¸­ va_end( argptr ); return sum; } ç®€æ˜“printfå‡½æ•°\n#include \u0026lt;stdarg.h\u0026gt; /* minprintf: minimal printf with variable arqument list */ void minprintf(char *fmt, ...) { GPIO va_list ap; /* points to each unnamed arq in turn */ char *p, *sval; int ival; double dval; va_start(ap, fmt); /* make ap point to 1st unnamed arg */ for (p = fmt; *p; p++) { if (*p != \u0026#39;%\u0026#39;) { putchar(*p); continue; } } switch (*++p) { case \u0026#39;d\u0026#39;: ival = va_arg(ap, int); printf(\u0026#34;%d\u0026#34;, ival); break; case \u0026#39;f\u0026#39;: dval = va_arg(ap, double); printf(\u0026#34;%f\u0026#34;, dval); break; case \u0026#39;s\u0026#39;: for (sval = va_arq(ap, char *); *sval; sval++) putchar(*sval); break; default: putchar(*p); break; } va_end(ap); /* clean up when done */ } ","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0/","summary":"\u003cp\u003eå­¦ä¹ è¿‡ç¨‹ä¸­æŸ¥çœ‹äº†\u003ccode\u003eprintf()\u003c/code\u003eæºç ï¼Œé‡åˆ°äº†è¿™æ ·çš„å‡½æ•°å®šä¹‰ï¼Œ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e...){\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"n\"\u003ebuf\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e256\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eva_list\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nf\"\u003ememset\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebuf\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003esizeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebuf\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nf\"\u003eva_start\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nf\"\u003evsprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebuf\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nf\"\u003eva_end\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nf\"\u003eputs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebuf\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå‚æ•°ä¸­çš„ä¸‰ä¸ªç‚¹å·ï¼Œå°±æ˜¯ C è¯­è¨€ä¸­å¯å˜å‚æ•°çš„æ ‡è¯†ã€‚è¿™æ ·çš„å‡½æ•°ç§°ä¸ºå¯å˜å‚æ•°å‡½æ•°ã€‚è¿™ç§å‡½æ•°éœ€è¦å›ºå®šæ•°é‡çš„\u003cstrong\u003eå¼ºåˆ¶å‚æ•°\u003c/strong\u003eï¼ˆmandatory argumentï¼‰ï¼Œåé¢æ˜¯\u003cstrong\u003eæ•°é‡å¯å˜çš„å¯é€‰å‚æ•°\u003c/strong\u003eï¼ˆoptional argumentï¼‰ã€‚\u003c/p\u003e","title":"C è¯­è¨€å¯å˜å‚æ•°"},{"content":"åœ¨å‘½ä»¤è¡Œç¼–è¯‘é¡¹ç›®æ—¶ï¼Œç»å¸¸é‡åˆ°ç¼–è¯‘ç»“æœå¤ªé•¿ï¼Œè¦†ç›–äº†æœ€å…ˆè¾“å‡ºçš„ç»“æœï¼Œæ­¤æ—¶å°±éœ€è¦å°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶å†æŸ¥çœ‹ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š\nmake \u0026gt; make.log 2\u0026gt;\u0026amp;1 # make ç¼–è¯‘å‘½ä»¤ # make.log è¾“å‡ºæ–‡ä»¶å # 2 æ–‡ä»¶æè¿°ç¬¦ï¼Œæ ‡å‡†é”™è¯¯ # \u0026gt; é‡å®šå‘ç¬¦ï¼Œè¾“å‡º # \u0026amp;1 æ–‡ä»¶æè¿°ç¬¦\u0026amp;ï¼Œæ–‡ä»¶æè¿°ç¬¦1 æ ‡å‡†è¾“å…¥ è¯¥å‘½ä»¤åŠŸèƒ½å³å°†makeç¼–è¯‘æ—¶è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯é‡å®šå‘ä¸ºæ ‡å‡†è¾“å…¥ï¼Œå†™å…¥åˆ°make.logæ–‡ä»¶ä¸­ã€‚ç¬¦å·çš„å«ä¹‰å¯ä»¥å‚è€ƒLinux æ–‡ä»¶æè¿°ç¬¦\n","permalink":"https://lifeislife.cn/posts/linux%E4%B8%8B%E5%B0%86%E7%BC%96%E8%AF%91%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%E5%88%B0%E6%96%87%E4%BB%B6/","summary":"\u003cp\u003eåœ¨å‘½ä»¤è¡Œç¼–è¯‘é¡¹ç›®æ—¶ï¼Œç»å¸¸é‡åˆ°ç¼–è¯‘ç»“æœå¤ªé•¿ï¼Œè¦†ç›–äº†æœ€å…ˆè¾“å‡ºçš„ç»“æœï¼Œæ­¤æ—¶å°±éœ€è¦å°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶å†æŸ¥çœ‹ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emake \u0026gt; make.log 2\u0026gt;\u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# make ç¼–è¯‘å‘½ä»¤\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# make.log è¾“å‡ºæ–‡ä»¶å\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 2 æ–‡ä»¶æè¿°ç¬¦ï¼Œæ ‡å‡†é”™è¯¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# \u0026gt; é‡å®šå‘ç¬¦ï¼Œè¾“å‡º\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# \u0026amp;1 æ–‡ä»¶æè¿°ç¬¦\u0026amp;ï¼Œæ–‡ä»¶æè¿°ç¬¦1 æ ‡å‡†è¾“å…¥\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¯¥å‘½ä»¤åŠŸèƒ½å³å°†\u003ccode\u003emake\u003c/code\u003eç¼–è¯‘æ—¶è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯é‡å®šå‘ä¸ºæ ‡å‡†è¾“å…¥ï¼Œå†™å…¥åˆ°\u003ccode\u003emake.log\u003c/code\u003eæ–‡ä»¶ä¸­ã€‚ç¬¦å·çš„å«ä¹‰å¯ä»¥å‚è€ƒ\u003ca href=\"\"\u003eLinux æ–‡ä»¶æè¿°ç¬¦\u003c/a\u003e\u003c/p\u003e","title":"Linux ä¸‹å°†ç¼–è¯‘ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶"},{"content":"å‰è¨€ Linux ä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œæ¯”å¦‚ C++ æºæ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ã€Shell è„šæœ¬ã€å¯æ‰§è¡Œæ–‡ä»¶ç­‰ï¼Œå°±è¿é”®ç›˜ã€æ˜¾ç¤ºå™¨ã€é¼ æ ‡ç­‰ç¡¬ä»¶è®¾å¤‡ä¹Ÿéƒ½æ˜¯æ–‡ä»¶ã€‚\nä¸€ä¸ª Linux è¿›ç¨‹å¯ä»¥æ‰“å¼€æˆç™¾ä¸Šåƒä¸ªæ–‡ä»¶ï¼Œä¸ºäº†è¡¨ç¤ºå’ŒåŒºåˆ†å·²ç»æ‰“å¼€çš„æ–‡ä»¶ï¼ŒLinux ä¼šç»™æ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€ä¸ªç¼–å·ï¼ˆä¸€ä¸ª IDï¼‰ï¼Œè¿™ä¸ªç¼–å·å°±æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¢«ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptorï¼‰ã€‚\næ–‡ä»¶æè¿°ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ ä¸€ä¸ª Linux è¿›ç¨‹å¯åŠ¨åï¼Œä¼šåœ¨å†…æ ¸ç©ºé—´ä¸­åˆ›å»ºä¸€ä¸ª PCB æ§åˆ¶å—ï¼ŒPCB å†…éƒ¨æœ‰ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è¡¨ï¼ˆFile descriptor tableï¼‰ï¼Œè®°å½•ç€å½“å‰è¿›ç¨‹æ‰€æœ‰å¯ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¹Ÿå³å½“å‰è¿›ç¨‹æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶ã€‚\né™¤äº†æ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œç³»ç»Ÿè¿˜éœ€è¦ç»´æŠ¤å¦å¤–ä¸¤å¼ è¡¨ï¼š\næ‰“å¼€æ–‡ä»¶è¡¨ï¼ˆOpen file tableï¼‰ i-node è¡¨ï¼ˆi-node tableï¼‰ æ–‡ä»¶æè¿°ç¬¦è¡¨æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªï¼Œæ‰“å¼€æ–‡ä»¶è¡¨å’Œ i-node è¡¨æ•´ä¸ªç³»ç»Ÿåªæœ‰ä¸€ä¸ªï¼Œå®ƒä»¬ä¸‰è€…ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å¯¹ä¸Šå›¾çš„è¯´æ˜ï¼š\nåœ¨è¿›ç¨‹A ä¸­ï¼Œæ–‡ä»¶æè¿°ç¬¦ 1 å’Œ20 éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªæ‰“å¼€æ–‡ä»¶è¡¨é¡¹ï¼Œæ ‡å·ä¸º 23ï¼ˆæŒ‡å‘äº†æ‰“å¼€æ–‡ä»¶è¡¨ä¸­ä¸‹æ ‡ä¸º 23 çš„æ•°ç»„å…ƒç´ ï¼‰ï¼Œè¿™å¯èƒ½æ˜¯é€šè¿‡è°ƒç”¨ dup()ã€dup2()ã€fcntl() æˆ–è€…å¯¹åŒä¸€ä¸ªæ–‡ä»¶å¤šæ¬¡è°ƒç”¨äº† open() å‡½æ•°å½¢æˆçš„ã€‚ è¿›ç¨‹ A çš„æ–‡ä»¶æè¿°ç¬¦ 2å’Œè¿›ç¨‹B çš„æ–‡ä»¶æè¿°ç¬¦2 éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™å¯èƒ½æ˜¯åœ¨è°ƒç”¨ fork() åå‡ºç°çš„ï¼ˆå³è¿›ç¨‹ Aã€Bæ˜¯çˆ¶å­è¿›ç¨‹å…³ç³»ï¼‰ï¼Œæˆ–è€…æ˜¯ä¸åŒçš„è¿›ç¨‹ç‹¬è‡ªå»è°ƒç”¨open() å‡½æ•°æ‰“å¼€äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ­¤æ—¶è¿›ç¨‹å†…éƒ¨çš„æè¿°ç¬¦æ­£å¥½åˆ†é…åˆ°ä¸å…¶ä»–è¿›ç¨‹æ‰“å¼€è¯¥æ–‡ä»¶çš„æè¿°ç¬¦ä¸€æ ·ã€‚ è¿›ç¨‹ A çš„æè¿°ç¬¦0å’Œè¿›ç¨‹Bçš„æè¿°ç¬¦3åˆ†åˆ«æŒ‡å‘ä¸åŒçš„æ‰“å¼€æ–‡ä»¶è¡¨é¡¹ï¼Œä½†è¿™äº›è¡¨é¡¹å‡æŒ‡å‘ i-node è¡¨çš„åŒä¸€ä¸ªæ¡ç›®ï¼ˆæ ‡å·ä¸º 1976ï¼‰ï¼›æ¢è¨€ä¹‹ï¼Œå®ƒä»¬æŒ‡å‘äº†åŒä¸€ä¸ªæ–‡ä»¶ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸ºæ¯ä¸ªè¿›ç¨‹å„è‡ªå¯¹åŒä¸€ä¸ªæ–‡ä»¶å‘èµ·äº† open() è°ƒç”¨ã€‚åŒä¸€ä¸ªè¿›ç¨‹ä¸¤æ¬¡æ‰“å¼€åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿä¼šå‘ç”Ÿç±»ä¼¼æƒ…å†µã€‚ é€šè¿‡æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥æ‰¾åˆ°æ–‡ä»¶æŒ‡é’ˆï¼Œä»è€Œè¿›å…¥æ‰“å¼€æ–‡ä»¶è¡¨ã€‚è¯¥è¡¨å­˜å‚¨äº†ä»¥ä¸‹ä¿¡æ¯ï¼š\næ–‡ä»¶åç§»é‡ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶å†…éƒ¨æŒ‡é’ˆåç§»é‡ã€‚è°ƒç”¨read()æˆ–è€…write() å‡½æ•°æ—¶ï¼Œæ–‡ä»¶åç§»é‡ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ lseek() ç›´æ¥ä¿®æ”¹ã€‚ çŠ¶æ€æ ‡å¿—ï¼Œæ¯”å¦‚åªè¯»æ¨¡å¼ã€è¯»å†™æ¨¡å¼ã€è¿½åŠ æ¨¡å¼ã€è¦†ç›–æ¨¡å¼ç­‰ã€‚ i-node è¡¨æŒ‡é’ˆã€‚ ç„¶è€Œï¼Œè¦æƒ³çœŸæ­£è¯»å†™æ–‡ä»¶ï¼Œè¿˜å¾—é€šè¿‡æ‰“å¼€æ–‡ä»¶è¡¨çš„ i-node æŒ‡é’ˆè¿›å…¥\ni-node è¡¨ï¼Œè¯¥è¡¨åŒ…å«äº†è¯¸å¦‚ä»¥ä¸‹çš„ä¿¡æ¯ï¼š æ–‡ä»¶ç±»å‹ï¼Œä¾‹å¦‚å¸¸è§„æ–‡ä»¶ã€å¥—æ¥å­—æˆ– FIFOã€‚ æ–‡ä»¶å¤§å°ã€‚ æ—¶é—´æˆ³ï¼Œæ¯”å¦‚åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ã€‚ æ–‡ä»¶é”ã€‚ æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦ æ–‡ä»¶æè¿°ç¬¦ ç”¨é€” POSIX åç§° stdio æµ 0 æ ‡å‡†è¾“å…¥ STDIN FILENO stdin 1 æ ‡å‡†è¾“å‡º STDOUT FILENO stdout 2 æ ‡å‡†é”™è¯¯ STDERR FILENO stderr æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦é€šå¸¸ä¼šå’Œé‡å®šå‘ç¬¦\u0026lt;,\u0026gt;,\u0026lt;\u0026lt;,\u0026gt;\u0026gt;ç»“åˆä½¿ç”¨ã€‚ç®­å¤´å‘å·¦è¡¨ç¤ºè¾“å…¥é‡å®šå‘ï¼Œå‘å³è¡¨ç¤ºè¾“å‡ºé‡å®šå‘ã€‚æ–‡ä»¶æè¿°ç¬¦ä¸­çš„0é€šå¸¸çœç•¥ã€‚å¦‚0\u0026lt; ~ \u0026lt;ï¼Œ0\u0026lt;\u0026lt; ~ \u0026lt;\u0026lt;ã€‚\næ ‡å‡†è¾“å…¥ ä½¿ç”¨wcå‘½ä»¤ç»Ÿè®¡æ–‡æ¡£ä¸­æœ‰å¤šå°‘è¡Œå­—ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼Œè¯¦ç»†ä»‹ç»å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚\nwc [é€‰é¡¹] [æ–‡ä»¶å] $ cat test.txt This is a test file. Hello world! $ wc -l \u0026lt;test.txt 2 è¿™é‡Œçš„é‡å®šå‘ç¬¦å·\u0026lt;ä½œç”¨å°±æ˜¯å°†test.txtçš„å†…å®¹ä½œä¸ºæ ‡å‡†è¾“å…¥ï¼Œä¼ é€’ç»™wcå‘½ä»¤ã€‚\næ ‡å‡†è¾“å‡ºä¸æ ‡å‡†é”™è¯¯ è¿™ä¸ªæˆ‘ä»¬æ¯å¤©éƒ½åœ¨æ¥è§¦ï¼Œä½†æ˜¯å¯èƒ½æ²¡æœ‰ç•™æ„ã€‚å‡è®¾æˆ‘å½“å‰ç›®å½•ä¸‹åªæœ‰ä¸€ä¸ªtest.txtæ–‡ä»¶ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\n$ cat text.txt This is a test file. Hello world! #æ ‡å‡†è¾“å‡º1 $ cat text.md cat: test.md: No such file or directory #æ ‡å‡†é”™è¯¯2 $ ls text.txt text.md 1\u0026gt;file.out 2\u0026gt;file.err # æ‰§è¡Œå,æ²¡æœ‰ä»»ä½•è¿”å›å€¼. åŸå› æ˜¯, è¿”å›å€¼éƒ½é‡å®šå‘åˆ°ç›¸åº”çš„æ–‡ä»¶ä¸­äº†,è€Œä¸å†å‰ç«¯æ˜¾ç¤º $ cat file.out text.txt $ cat file.err cat: test.md: No such file or directory \u0026amp;æè¿°ç¬¦ \u0026amp; æ˜¯ä¸€ä¸ªæè¿°ç¬¦ï¼Œå¦‚æœ1æˆ–2å‰ä¸åŠ \u0026amp;ï¼Œä¼šè¢«å½“æˆä¸€ä¸ªæ™®é€šæ–‡ä»¶ã€‚\n1\u0026gt;\u0026amp;2 æ„æ€æ˜¯æŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†é”™è¯¯ã€‚ 2\u0026gt;\u0026amp;1 æ„æ€æ˜¯æŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºã€‚ \u0026amp;\u0026gt;filename æ„æ€æ˜¯æŠŠæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºéƒ½é‡å®šå‘åˆ°æ–‡ä»¶ filename ä¸­\nå‚è€ƒ Linux Shell é‡å®šå‘ï¼ˆè¾“å…¥è¾“å‡ºé‡å®šå‘ï¼‰ç²¾è®²\n","permalink":"https://lifeislife.cn/posts/linux%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6/","summary":"\u003ch2 id=\"å‰è¨€\"\u003eå‰è¨€\u003c/h2\u003e\n\u003cp\u003eLinux ä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œæ¯”å¦‚ C++ æºæ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ã€Shell è„šæœ¬ã€å¯æ‰§è¡Œæ–‡ä»¶ç­‰ï¼Œå°±è¿é”®ç›˜ã€æ˜¾ç¤ºå™¨ã€é¼ æ ‡ç­‰ç¡¬ä»¶è®¾å¤‡ä¹Ÿéƒ½æ˜¯æ–‡ä»¶ã€‚\u003c/p\u003e\n\u003cp\u003eä¸€ä¸ª Linux è¿›ç¨‹å¯ä»¥æ‰“å¼€æˆç™¾ä¸Šåƒä¸ªæ–‡ä»¶ï¼Œä¸ºäº†è¡¨ç¤ºå’ŒåŒºåˆ†å·²ç»æ‰“å¼€çš„æ–‡ä»¶ï¼ŒLinux ä¼šç»™æ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€ä¸ªç¼–å·ï¼ˆä¸€ä¸ª IDï¼‰ï¼Œè¿™ä¸ªç¼–å·å°±æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¢«ç§°ä¸º\u003cstrong\u003eæ–‡ä»¶æè¿°ç¬¦\u003c/strong\u003eï¼ˆFile Descriptorï¼‰ã€‚\u003c/p\u003e","title":"Linux æ–‡ä»¶æè¿°ç¬¦"},{"content":"éœ€æ±‚ é€šå¸¸å‡½æ•°çš„æ³¨é‡Šä¸€èˆ¬éƒ½æ¯”è¾ƒé•¿ï¼Œè€Œä¸”æ¯ä¸ªå‡½æ•°æ³¨é‡Šéƒ½æ ¼å¼ä¸€è‡´ï¼Œä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°æ³¨é‡Šæ¨¡æ¿ã€‚å¦‚æœæ¯æ¬¡å†™æ³¨é‡Šéƒ½è¦å¤åˆ¶ä¸€éæ¯”è¾ƒéº»çƒ¦ï¼Œå¤åˆ¶å®Œè¿˜è¦åˆ é™¤å¤šä½™çš„å­—ç¬¦ã€‚ä½†æ˜¯ç°æœ‰çš„ç¼–è¾‘å™¨ä¸€èˆ¬éƒ½æ”¯æŒå¿«æ·è¾“å…¥ã€‚ä¸‹é¢ä»‹ç»åœ¨ VSCode ä¸­å¦‚ä½•å¿«æ·è¾“å…¥æ³¨é‡Šæ¨¡æ¿ã€‚\næ–¹æ³• Ctrl+Shift+Pæ‰“å¼€ç¼–è¾‘å™¨å‘½ä»¤çª—å£ - è¾“å…¥snippets-é€‰æ‹©Preferences:Configure User Snippets-é€‰æ‹©Â·c.jsonÂ· \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image æ›´æ”¹å¦‚ä¸‹ï¼š\n{ // Place your snippets for c here. Each snippet is defined under a snippet name and has a prefix, body and // description. The prefix is what is used to trigger the snippet and the body will be expanded and inserted. Possible variables are: // $1, $2 for tab stops, $0 for the final cursor position, and ${1:label}, ${2:another} for placeholders. Placeholders with the // same ids are connected. // Example: // \u0026ldquo;Print to console\u0026rdquo;: { // \u0026ldquo;prefix\u0026rdquo;: \u0026ldquo;log\u0026rdquo;, // \u0026ldquo;body\u0026rdquo;: [ // \u0026ldquo;console.log(\u0026rsquo;$1\u0026rsquo;);\u0026rdquo;, // \u0026ldquo;$2\u0026rdquo; // ], // \u0026ldquo;description\u0026rdquo;: \u0026ldquo;Log output to console\u0026rdquo; // } \u0026ldquo;Function comment\u0026rdquo;: { \u0026ldquo;prefix\u0026rdquo;: \u0026ldquo;funcom\u0026rdquo;, \u0026ldquo;body\u0026rdquo;: [ \u0026ldquo;/\u0026rdquo; \u0026ldquo; Description: \u0026quot; \u0026ldquo;Input Parameter: \u0026quot; \u0026ldquo; Output Parameter: \u0026quot; \u0026ldquo;Return: \u0026quot; \u0026ldquo;/ \u0026quot; ], \u0026ldquo;description\u0026rdquo;: \u0026ldquo;function comment\u0026rdquo; } ```\nprefix:è¾“å…¥æ—¶çš„ç¼©å†™ï¼Œè§¦å‘å™¨ body:å†…å®¹ description:æè¿° å‚è€ƒèµ„æ–™ VSCode åˆ©ç”¨ Snippets è®¾ç½®è¶…å®ç”¨çš„ä»£ç å— - æ˜é‡‘\n","permalink":"https://lifeislife.cn/posts/vscode%E5%BF%AB%E9%80%9F%E6%B7%BB%E5%8A%A0%E6%B3%A8%E9%87%8A%E6%A8%A1%E6%9D%BF/","summary":"\u003ch2 id=\"éœ€æ±‚\"\u003eéœ€æ±‚\u003c/h2\u003e\n\u003cp\u003eé€šå¸¸å‡½æ•°çš„æ³¨é‡Šä¸€èˆ¬éƒ½æ¯”è¾ƒé•¿ï¼Œè€Œä¸”æ¯ä¸ªå‡½æ•°æ³¨é‡Šéƒ½æ ¼å¼ä¸€è‡´ï¼Œä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°æ³¨é‡Šæ¨¡æ¿ã€‚å¦‚æœæ¯æ¬¡å†™æ³¨é‡Šéƒ½è¦å¤åˆ¶ä¸€éæ¯”è¾ƒéº»çƒ¦ï¼Œå¤åˆ¶å®Œè¿˜è¦åˆ é™¤å¤šä½™çš„å­—ç¬¦ã€‚ä½†æ˜¯ç°æœ‰çš„ç¼–è¾‘å™¨ä¸€èˆ¬éƒ½æ”¯æŒå¿«æ·è¾“å…¥ã€‚ä¸‹é¢ä»‹ç»åœ¨ VSCode ä¸­å¦‚ä½•å¿«æ·è¾“å…¥æ³¨é‡Šæ¨¡æ¿ã€‚\u003c/p\u003e","title":"VScode å¿«é€Ÿæ·»åŠ æ³¨é‡Šæ¨¡æ¿"},{"content":"éœ€æ±‚ é€šå¸¸å‡½æ•°çš„æ³¨é‡Šä¸€èˆ¬éƒ½æ¯”è¾ƒé•¿ï¼Œè€Œä¸”æ¯ä¸ªå‡½æ•°æ³¨é‡Šéƒ½æ ¼å¼ä¸€è‡´ï¼Œä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°æ³¨é‡Šæ¨¡æ¿ã€‚å¦‚æœæ¯æ¬¡å†™æ³¨é‡Šéƒ½è¦å¤åˆ¶ä¸€éæ¯”è¾ƒéº»çƒ¦ï¼Œå¤åˆ¶å®Œè¿˜è¦åˆ é™¤å¤šä½™çš„å­—ç¬¦ã€‚ä½†æ˜¯ç°æœ‰çš„ç¼–è¾‘å™¨ä¸€èˆ¬éƒ½æ”¯æŒå¿«æ·è¾“å…¥ã€‚ä¸‹é¢ä»‹ç»åœ¨ QtCreator ä¸­å¦‚ä½•å¿«æ·è¾“å…¥æ³¨é‡Šæ¨¡æ¿ã€‚\n/* * Description: // å‡½æ•°åŠŸèƒ½ã€æ€§èƒ½ç­‰çš„æè¿° * Input Parameter: // è¾“å…¥å‚æ•°è¯´æ˜ï¼ŒåŒ…æ‹¬æ¯ä¸ªå‚æ•°çš„ä½œ * Output Parameter: // å¯¹è¾“å‡ºå‚æ•°çš„è¯´æ˜ã€‚ * Return: // å‡½æ•°è¿”å›å€¼çš„è¯´æ˜ */ æ–¹æ³• QtCreator-èœå•æ å·¥å…·ï¼ˆToolï¼‰- é€‰é¡¹ï¼ˆOptionsï¼‰- æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆText Editorï¼‰- ç‰‡æ®µï¼ˆSnippetsï¼‰ ç»„ï¼ˆGroupï¼‰é€‰æ‹©C++-æ·»åŠ ï¼ˆAddï¼‰ \u003c!DOCTYPE html\u003e Responsive Image ç°åœ¨è¦ä¸ºæˆ‘ä»¬çš„è§¦å‘ï¼ˆTriggerï¼‰èµ·ä¸ªåå­—ï¼Œå› ä¸ºæ˜¯å‡½æ•°æ³¨é‡Šï¼Œæˆ‘èµ·äº†ä¸ªfuncomï¼Œç„¶ååœ¨ä¸‹æ–¹ç©ºç™½æ¡†é‡Œå¡«å…¥æ³¨é‡Šæ¨¡æ¿ã€‚Apply ä¿å­˜ã€‚å¦‚å›¾ \u003c!DOCTYPE html\u003e Responsive Image åœ¨éœ€è¦æ·»åŠ æ³¨é‡Šæ¨¡æ¿çš„åœ°æ–¹è¾“å…¥funcomå³å¯æç¤ºå¿«æ·è¾“å…¥ï¼Œå›è½¦å³å¯æ·»åŠ æ³¨é‡Šæ¨¡æ¿ã€‚ \u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç‰‡æ®µé‡Œæœ‰å¾ˆå¤šç†Ÿæ‚‰çš„å†…å®¹ï¼Œæ¯”å¦‚if elseï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶è¾“å…¥if elseè‡ªåŠ¨è¡¥å…¨èŠ±æ‹¬å·å…¶å®å°±æ˜¯åœ¨è¿™é‡Œè®¾ç½®çš„ã€‚åŒç†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ä¸€äº›å…¶ä»–éœ€è¦çš„å¿«æ·è¾“å…¥å†…å®¹ã€‚æ¯”å¦‚è¡Œæ³¨é‡Šï¼Œæ–‡ä»¶æ³¨é‡Šï¼Œç»å¸¸ä½¿ç”¨çš„ä»£ç æ¡†æ¶ç­‰ç­‰ã€‚\n","permalink":"https://lifeislife.cn/posts/qtcreator%E5%BF%AB%E9%80%9F%E6%B7%BB%E5%8A%A0%E6%B3%A8%E9%87%8A%E6%A8%A1%E6%9D%BF/","summary":"\u003ch2 id=\"éœ€æ±‚\"\u003eéœ€æ±‚\u003c/h2\u003e\n\u003cp\u003eé€šå¸¸å‡½æ•°çš„æ³¨é‡Šä¸€èˆ¬éƒ½æ¯”è¾ƒé•¿ï¼Œè€Œä¸”æ¯ä¸ªå‡½æ•°æ³¨é‡Šéƒ½æ ¼å¼ä¸€è‡´ï¼Œä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°æ³¨é‡Šæ¨¡æ¿ã€‚å¦‚æœæ¯æ¬¡å†™æ³¨é‡Šéƒ½è¦å¤åˆ¶ä¸€éæ¯”è¾ƒéº»çƒ¦ï¼Œå¤åˆ¶å®Œè¿˜è¦åˆ é™¤å¤šä½™çš„å­—ç¬¦ã€‚ä½†æ˜¯ç°æœ‰çš„ç¼–è¾‘å™¨ä¸€èˆ¬éƒ½æ”¯æŒå¿«æ·è¾“å…¥ã€‚ä¸‹é¢ä»‹ç»åœ¨ QtCreator ä¸­å¦‚ä½•å¿«æ·è¾“å…¥æ³¨é‡Šæ¨¡æ¿ã€‚\u003c/p\u003e","title":"QtCreator å¿«é€Ÿæ·»åŠ æ³¨é‡Šæ¨¡æ¿"},{"content":"ä¿ç•™ç°åœº ä¿®æ”¹äº† UI æ–‡ä»¶åï¼Œåœ¨ä»£ç ä¸­æ— æ³•è°ƒç”¨æ–°å¢çš„å†…å®¹ã€‚\næ¢ç©¶åŸå›  å¯¼è‡´ui_*.hæ–‡ä»¶æ²¡æœ‰æ›´æ–°çš„åŸå› æ˜¯æºä»£ç ä¸­#include ui_*.hçš„ä½ç½®å’Œå®é™…ç”Ÿæˆçš„ä½ç½®ä¸åŒï¼Œå¼•ç”¨çš„æ˜¯è€çš„ui_*.h\nè§£å†³æ–¹æ³• æ–¹æ³•ä¸€ï¼š\né¡¹ç›®è®¾ç½®æ–‡ä»¶.proå†…å¢åŠ  UI_DIR=./UIï¼ŒåŒæ—¶åˆ é™¤æ‰æºä»£ç ç›®å½•ä¸­ui_*.hï¼Œclear all,-\u0026gt;qmake-\u0026gt;rebuilt all æ–¹æ³•äºŒï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/qt%E4%BF%AE%E6%94%B9ui%E6%96%87%E4%BB%B6%E4%B8%8D%E7%94%9F%E6%95%88/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eä¿®æ”¹äº† UI æ–‡ä»¶åï¼Œåœ¨ä»£ç ä¸­æ— æ³•è°ƒç”¨æ–°å¢çš„å†…å®¹ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¢ç©¶åŸå› \"\u003eæ¢ç©¶åŸå› \u003c/h2\u003e\n\u003cp\u003eå¯¼è‡´\u003ccode\u003eui_*.h\u003c/code\u003eæ–‡ä»¶æ²¡æœ‰æ›´æ–°çš„åŸå› æ˜¯æºä»£ç ä¸­\u003ccode\u003e#include ui_*.h\u003c/code\u003eçš„ä½ç½®å’Œå®é™…ç”Ÿæˆçš„ä½ç½®ä¸åŒï¼Œå¼•ç”¨çš„æ˜¯è€çš„\u003ccode\u003eui_*.h\u003c/code\u003e\u003c/p\u003e","title":"Qt ä¿®æ”¹ UI æ–‡ä»¶ä¸ç”Ÿæ•ˆ"},{"content":"ä¿ç•™ç°åœº QtCreator æ„å»ºé¡¹ç›®æ—¶ï¼Œä¼šåœ¨ç»Ÿè®¡ç›®å½•æ–°å»ºä¸€ä¸ªbuild-xxx-debugçš„ç›®å½•ï¼Œå¦‚æœæƒ³è¦è‡ªå·±ä¿®æ”¹è¿™ä¸ªç›®å½•çš„ä½ç½®ï¼Œåç§°ï¼Œè¯¥æ€ä¹ˆåŠã€‚\nè§£å†³æ–¹æ³• ä»…ä¿®æ”¹å·¥å…·ï¼ˆToolï¼‰â€“\u0026gt;é€‰é¡¹ (Options)â€“\u0026gt;æ„å»ºå’Œè¿è¡Œ (Build\u0026amp;Run) ä¸­Default build directoryï¼š./%{CurrentBuild:Name}æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚\nå°†å·¥å…·â€“\u0026gt;é€‰é¡¹â€“\u0026gt;æ„å»ºå’Œè¿è¡Œä¸­Default build directoryä¿®æ”¹ä¸º./%{CurrentBuild:Name}ï¼ˆæ”¹ä¸ºä½ æƒ³è¦çš„ç›®æ ‡ç›®å½•éƒ½è¡Œï¼‰ï¼›\næŠŠ QtCreator å…³é—­ï¼ŒæŠŠå·¥ç¨‹ç›®å½•ä¸‹åç¼€åä¸º.pro.userçš„æ–‡ä»¶åˆ æ‰ï¼›\nç”¨ QtCreator æ‰“å¼€å·¥ç¨‹ï¼Œä¼šæç¤ºä½ åˆ›å»ºæ„å»ºç›®å½•ï¼Œæ­¤æ—¶æç¤ºçš„å°±æ˜¯ä½ ä¿®æ”¹åçš„Default build directoryä¸­å¡«å†™çš„ç›®å½•ï¼›\nå…¶ä¸­.pro.useræ–‡ä»¶è®°å½•äº†ç¼–è¯‘å™¨ã€æ„å»ºå·¥å…·é“¾ã€æ„å»ºç›®å½•ã€ç‰ˆæœ¬â€¦..ç­‰å·¥ç¨‹ç¼–è¯‘ç›¸å…³ä¿¡æ¯ï¼Œæƒ³è¦æ›´æ¢é¡¹ç›®çš„ç¼–è¯‘ç¯å¢ƒï¼Œå¾—åˆ é™¤è¿™ä¸ªæ–‡ä»¶ï¼Œç”± QtCreator è‡ªåŠ¨é‡æ–°åˆ›å»ºã€‚\n","permalink":"https://lifeislife.cn/posts/qtcreator%E4%BF%AE%E6%94%B9%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E7%9B%AE%E5%BD%95/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eQtCreator æ„å»ºé¡¹ç›®æ—¶ï¼Œä¼šåœ¨ç»Ÿè®¡ç›®å½•æ–°å»ºä¸€ä¸ª\u003ccode\u003ebuild-xxx-debug\u003c/code\u003eçš„ç›®å½•ï¼Œå¦‚æœæƒ³è¦è‡ªå·±ä¿®æ”¹è¿™ä¸ªç›®å½•çš„ä½ç½®ï¼Œåç§°ï¼Œè¯¥æ€ä¹ˆåŠã€‚\u003c/p\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\u003c/h2\u003e\n\u003cp\u003eä»…ä¿®æ”¹å·¥å…·ï¼ˆToolï¼‰â€“\u0026gt;é€‰é¡¹ (Options)â€“\u0026gt;æ„å»ºå’Œè¿è¡Œ (Build\u0026amp;Run) ä¸­\u003ccode\u003eDefault build directoryï¼š./%{CurrentBuild:Name}\u003c/code\u003eæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚\u003c/p\u003e","title":"QtCreator ä¿®æ”¹é¡¹ç›®æ„å»ºç›®å½•"},{"content":"éœ€æ±‚ å› ä¸ºç°åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯å…ˆä»è¿œç¨‹ Clone ä¸‹æ¥ä»£ç ï¼Œæ‰€ä»¥è¿™ä¸€åŠŸèƒ½ç”¨çš„ä¸å¤šã€‚ä½†æ˜¯å¦‚æœè‡ªå·±æƒ³æŠŠæœ¬åœ°å·²æœ‰çš„ä»£ç åŒæ­¥åˆ°è¿œç¨‹ï¼Œæœ¬æ–‡å°±å¯ä»¥è§£å†³è¿™ä¸€çš„éœ€æ±‚ã€‚\næ–¹æ³• GitHub æ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå¹¶å¤åˆ¶ SSH åœ°å€\ngit@github.com:git201901/git_learning.git git remote add åç§°\npc:git-learning suling$ git remote add github git@github.com:git201901/git_learning.git è¿™é‡Œçš„githubå°±æ˜¯è‡ªå®šä¹‰çš„ä¸€ä¸ªåç§°ï¼Œç”¨äºæ›¿æ¢åé¢çš„è¿œç¨‹åœ°å€ã€‚æ–¹ä¾¿åç»­git push githubä»¥åŠgit fetch githubã€‚\n","permalink":"https://lifeislife.cn/posts/git%E6%8A%8A%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E5%90%8C%E6%AD%A5%E5%88%B0github/","summary":"\u003ch2 id=\"éœ€æ±‚\"\u003eéœ€æ±‚\u003c/h2\u003e\n\u003cp\u003eå› ä¸ºç°åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯å…ˆä»è¿œç¨‹ Clone ä¸‹æ¥ä»£ç ï¼Œæ‰€ä»¥è¿™ä¸€åŠŸèƒ½ç”¨çš„ä¸å¤šã€‚ä½†æ˜¯å¦‚æœè‡ªå·±æƒ³æŠŠæœ¬åœ°å·²æœ‰çš„ä»£ç åŒæ­¥åˆ°è¿œç¨‹ï¼Œæœ¬æ–‡å°±å¯ä»¥è§£å†³è¿™ä¸€çš„éœ€æ±‚ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ–¹æ³•\"\u003eæ–¹æ³•\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGitHub æ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå¹¶å¤åˆ¶ SSH åœ°å€\u003c/p\u003e","title":"Git-æŠŠæœ¬åœ°ä»“åº“åŒæ­¥åˆ° GitHub"},{"content":"é“¾æ¥æ—¶ç¼ºå¤±äº†ç›¸å…³ç›®æ ‡æ–‡ä»¶ è¿™æ˜¯æœ€å…¸å‹æœ€å¸¸è§çš„æƒ…å†µã€‚æ¯”å¦‚æ–°æ·»åŠ äº†ä¸€ä¸ªæ¨¡å—fun.hÂ fun.cä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨äº†è¿™ä¸ªæ¨¡å—é‡Œçš„å‡½æ•°ï¼Œå¦‚æœç¼–è¯‘æ—¶å¿˜è®°åŠ ä¸Šè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œè°ƒç”¨funæ¨¡å—å‡½æ•°çš„åœ°æ–¹ï¼Œå°±ä¼šæŠ¥undefinedÂ referenceé”™è¯¯ã€‚\nè¿™ä¸ªé—®é¢˜åœ¨ç¼–è¾‘å™¨ä¸­ä¸€èˆ¬ä¸å®¹æ˜“å‘ç°ï¼Œå› ä¸ºå¤´æ–‡ä»¶åŒ…å«æ˜¯æ­£ç¡®çš„ï¼Œç¼–è¾‘å™¨èƒ½å¤Ÿæ‰¾åˆ°ç›¸å…³çš„å‡½æ•°åŠå…¶å®ç°ï¼Œæ‰€ä»¥åœ¨ç¼–å†™ä»£ç æ—¶ä¸ä¼šæŠ¥é”™ã€‚\né“¾æ¥æ—¶ç¼ºå°‘ç›¸å…³çš„åº“æ–‡ä»¶ è¿™ä¸ªåŸå› å’Œä¸Šä¸€æ¡ç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨é™æ€åº“ä¸­çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘æ—¶å¦‚æœæ²¡æœ‰å°†é™æ€åº“ä¸€èµ·ç¼–è¯‘ï¼Œå°±ä¼šæŠ¥åŒæ ·çš„é”™è¯¯ã€‚\né“¾æ¥çš„åº“æ–‡ä»¶ä¸­åˆä½¿ç”¨äº†å¦ä¸€ä¸ªåº“æ–‡ä»¶ åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¸€å®šè¦åœ¨ç¼–è¯‘ä¸­åŠ å…¥ç¬¬ä¸‰æ–¹åº“çš„è·¯å¾„ã€‚\nå¤šä¸ªåº“æ–‡ä»¶é“¾æ¥é¡ºåºé—®é¢˜ åœ¨é“¾æ¥å‘½ä»¤ä¸­ç»™å‡ºæ‰€ä¾èµ–çš„åº“æ—¶ï¼Œéœ€è¦æ³¨æ„åº“ä¹‹é—´çš„ä¾èµ–é¡ºåºï¼Œä¾èµ–å…¶ä»–åº“çš„åº“ä¸€å®šè¦æ”¾åˆ°è¢«ä¾èµ–åº“çš„å‰é¢ï¼Œè¿™æ ·æ‰èƒ½çœŸæ­£é¿å… undefined reference çš„é”™è¯¯ï¼Œå®Œæˆç¼–è¯‘é“¾æ¥ã€‚\nå£°æ˜ä¸å®ç°ä¸ä¸€è‡´ è¿™ä¸ªåŸå› ä¹Ÿæ¯”è¾ƒå…¸å‹ï¼Œæ³¨æ„æ’æŸ¥å£°æ˜ä¸å®ç°çš„å‚æ•°æ˜¯å¦ä¸€è‡´ï¼Œè¿”å›å€¼æ˜¯å¦ä¸€è‡´ã€‚\nåœ¨ c++ä»£ç ä¸­é“¾æ¥ c è¯­è¨€çš„åº“ åœ¨C++ä»£ç ä¸­ï¼Œè°ƒç”¨äº†Cè¯­è¨€åº“çš„å‡½æ•°ï¼Œå› æ­¤é“¾æ¥çš„æ—¶å€™æ‰¾ä¸åˆ°ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨ç›¸å…³æ–‡ä»¶æ·»åŠ ä¸€ä¸ªextern \u0026quot;C\u0026quot;çš„å£°æ˜å³å¯ã€‚\næ€»ç»“ é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªé”™è¯¯å°±æ˜¯æœªå®šä¹‰ä½ ä½¿ç”¨çš„å†…å®¹å¯¼è‡´çš„ã€‚æ‰€ä»¥è¦æ’æŸ¥ä½¿ç”¨çš„å†…å®¹æ˜¯å¦èƒ½å¤Ÿè¢«æ­£ç¡®â€œæ‰¾åˆ°â€ã€‚ä½¿ç”¨çš„æ—¶å€™æœ‰æ²¡æœ‰å£°æ˜ï¼Œæœ‰æ²¡æœ‰å®šä¹‰ï¼Œå£°æ˜ä¸å®šä¹‰æ˜¯å¦ä¸€è‡´ï¼Œç¼–è¯‘æ—¶èƒ½å¦æ­£ç¡®é“¾æ¥ç­‰ç­‰ã€‚\nç›¸å…³å‚è€ƒ \u0026ldquo;undefined reference to\u0026rdquo; é—®é¢˜æ±‡æ€»åŠè§£å†³æ–¹æ³•\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3undefined-reference-to%E9%97%AE%E9%A2%98/","summary":"\u003ch2 id=\"é“¾æ¥æ—¶ç¼ºå¤±äº†ç›¸å…³ç›®æ ‡æ–‡ä»¶\"\u003eé“¾æ¥æ—¶ç¼ºå¤±äº†ç›¸å…³ç›®æ ‡æ–‡ä»¶\u003c/h2\u003e\n\u003cp\u003eè¿™æ˜¯æœ€å…¸å‹æœ€å¸¸è§çš„æƒ…å†µã€‚æ¯”å¦‚æ–°æ·»åŠ äº†ä¸€ä¸ªæ¨¡å—\u003ccode\u003efun.hÂ fun.c\u003c/code\u003eä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨äº†è¿™ä¸ªæ¨¡å—é‡Œçš„å‡½æ•°ï¼Œå¦‚æœç¼–è¯‘æ—¶å¿˜è®°åŠ ä¸Šè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œè°ƒç”¨\u003ccode\u003efun\u003c/code\u003eæ¨¡å—å‡½æ•°çš„åœ°æ–¹ï¼Œå°±ä¼šæŠ¥\u003ccode\u003eundefinedÂ reference\u003c/code\u003eé”™è¯¯ã€‚\u003c/p\u003e","title":"è§£å†³ Undefined reference to é—®é¢˜"},{"content":"â€˜\nå…·ä½“å®ä¾‹å¯ä»¥å‚è€ƒMarc Pony\næŒ‡é’ˆä¼ å‚ C è¯­è¨€ä¸­ï¼Œå…¨å±€å˜é‡ç”¨ç»“æ„ä½“å°è£…ï¼Œè®¾è®¡å‡½æ•°æ—¶ï¼Œå°†å‚æ•°ä»¥ç»“æ„ä½“æŒ‡é’ˆå½¢å¼ä¼ å…¥ã€‚\nå®šä¹‰è·å–å˜é‡çš„æ–¹æ³•/å‡½æ•° å®šä¹‰ä¸€ä¸ªå‡½æ•°ä»¥get/setå…¨å±€å˜é‡ï¼Œåˆ©ç”¨staticå˜é‡ï¼Œå°†å…¨å±€å˜é‡ä½œç”¨åŸŸé™å®šäºè¯¥å‡½æ•°ï¼Œå°†å…¨å±€å˜é‡éšè—èµ·æ¥ã€‚\nå–„ç”¨static æŠŠå…¨å±€å˜é‡å®šä¹‰åœ¨æŸä¸€ä¸ª .c æ–‡ä»¶ä¸­ï¼Œå¹¶å®šä¹‰ä¸º static ç±»å‹ï¼Œç„¶åå®šä¹‰ä¸€ç³»åˆ—æ“ä½œè¿™ä¸ªå˜é‡çš„å‡½æ•°ï¼Œå¤´æ–‡ä»¶é‡Œé¢åªæœ‰æ“ä½œå‡½æ•°ï¼Œæ²¡æœ‰å˜é‡çš„å£°æ˜\n","permalink":"https://lifeislife.cn/posts/c-c-%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E8%BF%87%E5%A4%9A%E4%BD%BF%E7%94%A8%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/","summary":"\u003cp\u003eâ€˜\u003c/p\u003e\n\u003cp\u003eå…·ä½“å®ä¾‹å¯ä»¥å‚è€ƒ\u003ca href=\"https://blog.csdn.net/maple_2014/article/details/109541104\"\u003eMarc Pony\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"æŒ‡é’ˆä¼ å‚\"\u003eæŒ‡é’ˆä¼ å‚\u003c/h2\u003e\n\u003cp\u003eC è¯­è¨€ä¸­ï¼Œå…¨å±€å˜é‡ç”¨ç»“æ„ä½“å°è£…ï¼Œè®¾è®¡å‡½æ•°æ—¶ï¼Œå°†å‚æ•°ä»¥ç»“æ„ä½“æŒ‡é’ˆå½¢å¼ä¼ å…¥ã€‚\u003c/p\u003e\n\u003ch2 id=\"å®šä¹‰è·å–å˜é‡çš„æ–¹æ³•å‡½æ•°\"\u003eå®šä¹‰è·å–å˜é‡çš„æ–¹æ³•/å‡½æ•°\u003c/h2\u003e\n\u003cp\u003eå®šä¹‰ä¸€ä¸ªå‡½æ•°ä»¥\u003ccode\u003eget/set\u003c/code\u003eå…¨å±€å˜é‡ï¼Œåˆ©ç”¨\u003ccode\u003estatic\u003c/code\u003eå˜é‡ï¼Œå°†å…¨å±€å˜é‡ä½œç”¨åŸŸé™å®šäºè¯¥å‡½æ•°ï¼Œå°†å…¨å±€å˜é‡éšè—èµ·æ¥ã€‚\u003c/p\u003e","title":"C/C++å¦‚ä½•é¿å…è¿‡å¤šä½¿ç”¨å…¨å±€å˜é‡"},{"content":"C è¯­è¨€ä¸­å„ä¸ªæ•°æ®ç±»å‹çš„å¤§å° ç±»å‹ å¤§å° èŒƒå›´ char 1 å­—èŠ‚ -128 åˆ° 127 æˆ– 0 åˆ° 255 unsigned char 1 å­—èŠ‚ 0 åˆ° 255 signed char 1 å­—èŠ‚ -128 åˆ° 127 int 2 æˆ– 4 å­—èŠ‚ -32,768 åˆ° 32,767 æˆ– -2,147,483,648 åˆ° 2,147,483,647 unsigned int 2 æˆ– 4 å­—èŠ‚ 0 åˆ° 65,535 æˆ– 0 åˆ° 4,294,967,295 short 2 å­—èŠ‚ -32,768 åˆ° 32,767 unsigned short 2 å­—èŠ‚ 0 åˆ° 65,535 long 4 å­—èŠ‚ -2,147,483,648 åˆ° 2,147,483,647 unsigned long 4 å­—èŠ‚ 0 åˆ° 4,294,967,295 ç»“æ„ä½“ (struct) å¾…åˆ†æï¼Œéœ€è¦è€ƒè™‘å­—èŠ‚å¯¹é½ è”åˆ (union) æ‰€æœ‰æˆå‘˜ä¸­æœ€é•¿çš„ æšä¸¾ (enum) æ ¹æ®æ•°æ®ç±»å‹ å•å±‚ç»“æ„ä½“å¤§å° å¦‚æœç»“æ„ä½“ä¸­çš„æˆå‘˜æ•°æ®ç±»å‹ç›¸åŒï¼Œè¿™æ ·çš„æƒ…å†µæœ€ç®€å•ï¼Œç»“æ„ä½“å¤§å°=æ•°æ®ç±»å‹*æ•°æ®ä¸ªæ•°ã€‚\n#include \u0026lt;stdio.h\u0026gt; typedef struct Test1 { int a; int b; } T1; typedef struct Test2 { char a; char b; } T2; int main() { T1 t1; int siz01 = sizeof(t1); printf(\u0026#34;%d\\n\u0026#34;, siz01); //8 T2 t2; int siz02 = sizeof(t2); printf(\u0026#34;%d\\n\u0026#34;, siz02); //2 return 0; } ä½†æ˜¯ç»“æ„ä½“ä¸­é€šå¸¸æ•°æ®ç±»å‹éƒ½å„ä¸ç›¸åŒï¼Œæˆå‘˜æŒ‰ç…§å®šä¹‰æ—¶çš„é¡ºåºä¾æ¬¡å­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚å’Œæ•°ç»„ä¸ä¸€æ ·çš„æ˜¯ï¼Œç»“æ„ä½“çš„å¤§å°ä¸æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°ç®€å•çš„ç›¸åŠ ï¼Œéœ€è¦è€ƒè™‘åˆ°åœ°å€å¯¹é½é—®é¢˜ã€‚çœ‹ä¸‹é¢è¿™æ ·çš„ä¸€ä¸ªç»“æ„ä½“ï¼š\n#include \u0026lt;stdio.h\u0026gt; typedef struct Test3 { int a; char b; int c; } T3; int main() { T3 t3; int siz03 = sizeof(t3); printf(\u0026#34;t3: %d\\n\u0026#34;, siz03); //t3: 12 return 0; } ç”¨sizeofæ±‚è¯¥ç»“æ„ä½“çš„å¤§å°ï¼Œå‘ç°å€¼ä¸º12ã€‚intå 4ä¸ªå­—èŠ‚ï¼Œcharå 1ä¸ªå­—èŠ‚ï¼Œç»“æœåº”è¯¥æ˜¯9ä¸ªå­—èŠ‚æ‰å¯¹å•Šï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nå…ˆä»‹ç»ä¸€ä¸ªç›¸å…³çš„æ¦‚å¿µâ€”â€”åç§»é‡ã€‚åç§»é‡æŒ‡çš„æ˜¯ç»“æ„ä½“å˜é‡ä¸­æˆå‘˜çš„åœ°å€å’Œç»“æ„ä½“å˜é‡åœ°å€çš„å·®ã€‚ç»“æ„ä½“å¤§å°ç­‰äºæœ€åä¸€ä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šæœ€åä¸€ä¸ªæˆå‘˜çš„å¤§å°ã€‚æ˜¾ç„¶ï¼Œç»“æ„ä½“å˜é‡ä¸­ç¬¬ä¸€ä¸ªæˆå‘˜çš„åœ°å€å°±æ˜¯ç»“æ„ä½“å˜é‡çš„é¦–åœ°å€ã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜int açš„åç§»é‡ä¸º0ã€‚ç¬¬äºŒä¸ªæˆå‘˜char bçš„åç§»é‡æ˜¯ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šç¬¬ä¸€ä¸ªæˆå‘˜çš„å¤§å°0+4,å…¶å€¼ä¸º4ï¼›ç¬¬ä¸‰ä¸ªæˆå‘˜int cçš„åç§»é‡æ˜¯ç¬¬äºŒä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šç¬¬äºŒä¸ªæˆå‘˜çš„å¤§å°4+1,å…¶å€¼ä¸º5ã€‚\nå³ç»“æ„ä½“çš„å¤§å°ç­‰äºæœ€åä¸€ä¸ªæˆå‘˜å˜é‡çš„åœ°å€ä¸ç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡çš„åœ°å€ä¹‹å·®ï¼Œå†åŠ ä¸Šæœ€åä¸€ä¸ªæˆå‘˜å˜é‡çš„å¤§å°ã€‚\nå¦‚æœä¸è€ƒè™‘å¯¹é½çš„æƒ…å†µï¼Œå˜é‡åœ¨å†…å­˜ä¸­çš„å­˜æ”¾å¦‚ä¸‹ï¼Œ\n//t3 ________ 0 |aaaabccc| 7 8 |c | 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ å½“æˆ‘ä»¬å‡­ç›´è§‰å»ç”¨4+1+4=9æ¥è®¡ç®—ç»“æ„ä½“å¤§å°æ—¶å¹¶ä¸ä¼šè§‰å¾—æœ‰ä»€ä¹ˆé”™ï¼Œä½†æ˜¯é€šè¿‡å†…å­˜çš„æ’æ”¾å¯ä»¥ç›´è§‚çš„çœ‹åˆ°ï¼Œç¬¬ä¸‰ä¸ªå˜é‡çš„å­˜æ”¾æœ‰ç‚¹å¥‡æ€ªã€‚CPU ä»å†…å­˜ä¸­è¯»å–è‚¯å®šä¹Ÿæ˜¯æä¸ºä¸ä¾¿çš„ã€‚å®é™…å­˜å‚¨å˜é‡æ—¶ï¼Œåœ°å€è¦æ±‚å¯¹é½çš„ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ç¨‹åºæ—¶ä¼šéµå¾ªä¸¤æ¡åŸåˆ™ï¼š\nç»“æ„ä½“å˜é‡ä¸­æˆå‘˜çš„åç§»é‡å¿…é¡»æ˜¯æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼ˆ0è¢«è®¤ä¸ºæ˜¯ä»»ä½•æ•°çš„æ•´æ•°å€ï¼‰ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œä¹Ÿå³æ‰€æœ‰æˆå‘˜å¤§å°çš„å…¬å€æ•°ã€‚ æˆ‘ä»¬åœ¨å›å¤´åˆ†æä¸Šè¿°çš„ä¾‹å­ï¼Œå‰ä¸¤ä¸ªæˆå‘˜çš„åç§»é‡0 4éƒ½æ»¡è¶³è¦æ±‚ï¼Œä½†ç¬¬ä¸‰ä¸ªæˆå‘˜çš„åç§»é‡ä¸º5ï¼Œå¹¶ä¸æ˜¯è‡ªèº«intå¤§å°çš„æ•´æ•°å€ã€‚ç¼–è¯‘å™¨åœ¨å¤„ç†æ—¶ä¼šåœ¨ç¬¬äºŒä¸ªæˆå‘˜åé¢è¡¥ä¸Š3ä¸ªç©ºå­—èŠ‚ï¼Œä½¿å¾—ç¬¬ä¸‰ä¸ªæˆå‘˜çš„åç§»é‡å˜æˆ8ã€‚ç»“æ„ä½“å¤§å°ç­‰äºæœ€åä¸€ä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šå…¶å¤§å°ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­è®¡ç®—å‡ºæ¥çš„å¤§å°ä¸º12ï¼Œæ»¡è¶³å…¬å€æ•°è¦æ±‚ã€‚\nç›´è§‚æè¿°è¿™ä¸ªç»“æ„ä½“åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å¦‚ä¸‹ï¼Œæ˜Ÿå·*è¡¨ç¤ºè¯¥æ®µå†…å­˜å› ä¸ºå†…å­˜å¯¹é½è¢«å ç”¨ï¼Œä¹Ÿå°±æ˜¯å…¶å®é™…å¤§å°ã€‚å­—æ¯ä¸ªæ•°è¡¨ç¤ºå…¶å•ç‹¬æ‹¿å‡ºæ¥çš„å¤§å°\n//t3 ________ 0 |aaaab***| 7 8 |cccc | 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ å†çœ‹ä¸€ä¾‹ï¼Œ\n#include \u0026lt;stdio.h\u0026gt; typedef struct Test4 { int a; short b; } T4; int main() { T4 t4; int siz04 = sizeof(t4); printf(\u0026#34;t4: %d\\n\u0026#34;, siz04); //t4: 8 return 0; } æˆå‘˜int açš„åç§»é‡ä¸º 0ï¼›æˆå‘˜short bçš„åç§»é‡ä¸º 4ï¼Œéƒ½ä¸éœ€è¦è°ƒæ•´ã€‚ä½†è®¡ç®—å‡ºæ¥çš„å¤§å°ä¸º6ï¼Œæ˜¾ç„¶ä¸æ˜¯æˆå‘˜int aå¤§å°çš„æ•´æ•°å€ã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨ä¼šåœ¨æˆå‘˜int båé¢è¡¥ä¸Š2ä¸ªå­—èŠ‚ï¼Œä½¿å¾—ç»“æ„ä½“çš„å¤§å°å˜æˆ8ä»è€Œæ»¡è¶³ç¬¬äºŒä¸ªå…¬å€æ•°è¦æ±‚ã€‚\nç”±æ­¤å¯è§ï¼Œç»“æ„ä½“ç±»å‹éœ€è¦è€ƒè™‘åˆ°å­—èŠ‚å¯¹é½çš„æƒ…å†µï¼Œä¸åŒçš„é¡ºåºä¼šå½±å“ç»“æ„ä½“çš„å¤§å°ã€‚\n#include \u0026lt;stdio.h\u0026gt; typedef struct Test5 { char a; int b; char c; } T5; typedef struct Test6 { char a; char b; int c; } T6; int main() { T5 t5; int siz05 = sizeof(t5); printf(\u0026#34;t5: %d\\n\u0026#34;, siz05); //t5: 12 T4 t6; int siz06 = sizeof(t6); printf(\u0026#34;t6: %d\\n\u0026#34;, siz06); //t6: 8 return 0; } ä¸¤ä¸ªç»“æ„ä½“æˆå‘˜éƒ½ä¸€æ ·ï¼Œä½†æ˜¯ä¸€ä¸ªå¤§å°ä¸º12ä¸€ä¸ªå¤§å°ä¸º8ã€‚æˆ‘ä»¬å°†å…¶åœ¨å†…å­˜çš„å­˜å‚¨ç”»å‡ºæ¥å°±å¯ä»¥æ˜ç™½ï¼Œ\n//t5 ________ 0 |a***bbbb| 7 8 |c*** | 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ //t6 ________ 0 |ab**cccc| 7 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ æ€»ç»“ï¼š\nç»“æ„ä½“å¤§å°ç­‰äºæœ€åä¸€ä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šæœ€åä¸€ä¸ªæˆå‘˜çš„å¤§å° ç»“æ„ä½“å˜é‡ä¸­æˆå‘˜çš„åç§»é‡å¿…é¡»æ˜¯æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼ˆ0è¢«è®¤ä¸ºæ˜¯ä»»ä½•æ•°çš„æ•´æ•°å€ï¼‰ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œä¹Ÿå³æ‰€æœ‰æˆå‘˜å¤§å°çš„å…¬å€æ•° ä¸åŒçš„é¡ºåºä¼šå½±å“ç»“æ„ä½“çš„å¤§å° åµŒå¥—ç»“æ„ä½“å¤§å° å¯¹äºåµŒå¥—çš„ç»“æ„ä½“ï¼Œéœ€è¦å°†å…¶å±•å¼€ã€‚å¯¹ç»“æ„ä½“æ±‚sizeofæ—¶ï¼Œä¸Šè¿°ä¸¤ç§åŸåˆ™å˜ä¸ºï¼š\nå±•å¼€åçš„ç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡åº”å½“æ˜¯è¢«å±•å¼€çš„ç»“æ„ä½“ä¸­æœ€å¤§çš„æˆå‘˜çš„æ•´æ•°å€ã€‚ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œè¿™é‡Œæ‰€æœ‰æˆå‘˜è®¡ç®—çš„æ˜¯å±•å¼€åçš„æˆå‘˜ï¼Œè€Œä¸æ˜¯å°†åµŒå¥—çš„ç»“æ„ä½“å½“åšä¸€ä¸ªæ•´ä½“ã€‚ #include \u0026lt;stdio.h\u0026gt; typedef struct Test7 { short a; struct { char b; int c; } tt; int d; } T7; int main() { T7 t7; int siz07 = sizeof(t7); printf(\u0026#34;t7: %d\\n\u0026#34;, siz07); //t7: 16 return 0; } æ ¹æ®åŸåˆ™ä¸€ï¼Œttçš„åç§»é‡åº”è¯¥æ˜¯4ï¼Œè€Œä¸æ˜¯2ã€‚\nåœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œ\n//t7 ________ 0 |aa**b***| 7 8 |ccccdddd| 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ #include \u0026lt;stdio.h\u0026gt; typedef struct Test8 { char a; struct { char b; int c; } tt; char d; char e; char f; char g; char h; } T8; int main() { T8 t8; int siz08 = sizeof(t8); printf(\u0026#34;t8: %d\\n\u0026#34;, siz08); //t8: 20 return 0; } ç»“æ„ä½“ttå•ç‹¬è®¡ç®—å ç”¨ç©ºé—´ä¸º8ï¼Œè€Œt8åˆ™æ˜¯20ï¼Œä¸æ˜¯8çš„æ•´æ•°å€ï¼Œè¿™è¯´æ˜åœ¨è®¡ç®—sizeof(t8)æ—¶ï¼Œå°†åµŒå¥—çš„ç»“æ„ä½“ttå±•å¼€äº†ï¼Œè¿™æ ·t8ä¸­æœ€å¤§çš„æˆå‘˜ä¸ºtt.cï¼Œå ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œ20ä¸º 4 çš„æ•´æ•°å€ã€‚å¦‚æœå°†ttå½“åšä¸€ä¸ªæ•´ä½“ï¼Œç»“æœåº”è¯¥æ˜¯24äº†ã€‚\nåœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œ\n//t8 ________ 0 |a***b***| 7 8 |ccccdefg| 15 16 |h*** | 31 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ å¦ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­æ˜¯ç»“æ„ä½“ä¸­åŒ…å«æ•°ç»„ï¼Œå…¶å¤§å°è®¡ç®—åº”å½“å’Œå¤„ç†åµŒå¥—ç»“æ„ä½“ä¸€æ ·ï¼Œå°†å…¶å±•å¼€ï¼Œå¦‚ä¸‹ä¾‹å­ï¼š\n#include \u0026lt;stdio.h\u0026gt; typedef struct Test9 { char a; float b; int c[2]; } T9; int main() { T9 t9; int siz09 = sizeof(t9); printf(\u0026#34;t9: %d\\n\u0026#34;, siz09); //t9: 16 return 0; } char aå ä¸€ä¸ªå­—èŠ‚ï¼Œåç§»é‡ä¸º0ï¼Œshort bå å››å­—èŠ‚ï¼Œåç§»é‡ä¸º2ï¼Œä¸æ˜¯æœ€å¤§æˆå‘˜çš„æ•´æ•°å€ï¼Œè¿™é‡Œå–æœ€å¤§æˆå‘˜æ˜¯intæˆ–è€…shortçš„å¤§å°çš„å€æ•°ã€‚è€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„int c[2]çš„å€æ•°ã€‚æ‰€ä»¥short båç§»é‡æ‰©å±•ä¸º4ã€‚\nå†…å­˜ä¸­å­˜å‚¨ï¼Œ\n//t9 ________ 0 |a***bbbb| 7 8 |cccccccc| 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ æ€»ç»“ï¼š\nå±•å¼€åçš„ç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡åº”å½“æ˜¯è¢«å±•å¼€çš„ç»“æ„ä½“ä¸­æœ€å¤§çš„æˆå‘˜çš„æ•´æ•°å€ã€‚ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œè¿™é‡Œæ‰€æœ‰æˆå‘˜è®¡ç®—çš„æ˜¯å±•å¼€åçš„æˆå‘˜ï¼Œè€Œä¸æ˜¯å°†åµŒå¥—çš„ç»“æ„ä½“å½“åšä¸€ä¸ªæ•´ä½“ã€‚ æƒ³è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œä¿è¯å¯¹é½è¦æ±‚ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ¯”è¾ƒå‡†ç¡®çš„ç®—å‡ºæ¥ ","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80sizeof-%E7%BB%93%E6%9E%84%E4%BD%93-%E5%88%B0%E5%BA%95%E6%9C%89%E5%A4%9A%E5%A4%A7/","summary":"\u003ch2 id=\"c-è¯­è¨€ä¸­å„ä¸ªæ•°æ®ç±»å‹çš„å¤§å°\"\u003eC è¯­è¨€ä¸­å„ä¸ªæ•°æ®ç±»å‹çš„å¤§å°\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003eç±»å‹\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003eå¤§å°\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003eèŒƒå›´\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003echar\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e1 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e-128 åˆ° 127 æˆ– 0 åˆ° 255\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eunsigned char\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e1 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e0 åˆ° 255\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003esigned char\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e1 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e-128 åˆ° 127\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eint\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e2 æˆ– 4 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e-32,768 åˆ° 32,767 æˆ– -2,147,483,648 åˆ° 2,147,483,647\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eunsigned int\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e2 æˆ– 4 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e0 åˆ° 65,535 æˆ– 0 åˆ° 4,294,967,295\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eshort\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e2 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e-32,768 åˆ° 32,767\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eunsigned short\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e2 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e0 åˆ° 65,535\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003elong\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e4 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e-2,147,483,648 åˆ° 2,147,483,647\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eunsigned long\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e4 å­—èŠ‚\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e0 åˆ° 4,294,967,295\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eç»“æ„ä½“ (struct)\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003eå¾…åˆ†æï¼Œéœ€è¦è€ƒè™‘å­—èŠ‚å¯¹é½\u003c/td\u003e\n          \u003ctd\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eè”åˆ (union)\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003eæ‰€æœ‰æˆå‘˜ä¸­æœ€é•¿çš„\u003c/td\u003e\n          \u003ctd\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003eæšä¸¾ (enum)\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003eæ ¹æ®æ•°æ®ç±»å‹\u003c/td\u003e\n          \u003ctd\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"å•å±‚ç»“æ„ä½“å¤§å°\"\u003eå•å±‚ç»“æ„ä½“å¤§å°\u003c/h2\u003e\n\u003cp\u003eå¦‚æœç»“æ„ä½“ä¸­çš„æˆå‘˜æ•°æ®ç±»å‹ç›¸åŒï¼Œè¿™æ ·çš„æƒ…å†µæœ€ç®€å•ï¼Œ\u003ccode\u003eç»“æ„ä½“å¤§å°=æ•°æ®ç±»å‹*æ•°æ®ä¸ªæ•°\u003c/code\u003eã€‚\u003c/p\u003e","title":"C è¯­è¨€ sizeof(ç»“æ„ä½“) åˆ°åº•æœ‰å¤šå¤§"},{"content":"ç®€ä»‹ æˆ‘ä»¬ç»å¸¸ç”¨åˆ°å‘½ä»¤è¡Œå‚æ•°ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ Linux å‘½ä»¤ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ls -a,lså…¶å®å°±æ˜¯ä¸€ä¸ªç¨‹åºï¼Œ-aå°±æ˜¯è¯¥ç¨‹åºéœ€è¦è§£æçš„ä¸€ä¸ªå‚æ•°ã€‚é‚£ä¹ˆå¦‚ä½•èƒ½è®© Qt ç¨‹åºä¹Ÿèƒ½è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œä»å‘½ä»¤è¡Œå¯åŠ¨å‘¢ï¼Ÿ\nQt ä» 5.2 ç‰ˆå¼€å§‹æä¾›äº†ä¸¤ä¸ªç±»QCommandLineOptionå’ŒQCommandLineParseræ¥è§£æåº”ç”¨çš„å‘½ä»¤è¡Œå‚æ•°ã€‚\næ·»åŠ ç¨‹åºå±æ€§ä¿¡æ¯ï¼Œå¸®åŠ©ï¼Œç‰ˆæœ¬ ä¸€ä¸ªç¨‹åºå¯åŠ¨åï¼Œæˆ‘ä»¬ä¼šåœ¨å‘½ä»¤è¡Œçœ‹åˆ°ç¨‹åºçš„ä¸€äº›ç®€è¦ä¿¡æ¯ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨-vå‘½ä»¤æ˜¾ç¤ºå…¶ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™äº›é€šç”¨çš„å‚æ•°ä»¥åŠè¢« Qt åˆ†è£…å¥½ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚\n#include \u0026#34;mainwindow.h\u0026#34; #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QCommandLineParser\u0026gt; int main(int argc, char *argv[]) { QApplication a(argc, argv); QCommandLineParser parser; // å®šä¹‰è§£æå®ä¾‹ parser.setApplicationDescription(\u0026#34;TestCommandLine\u0026#34;); // æè¿°å¯æ‰§è¡Œç¨‹åºçš„å±æ€§ parser.addHelpOption(); // æ·»åŠ å¸®åŠ©å‘½ä»¤ parser.addVersionOption(); // æ·»åŠ ç‰ˆæœ¬é€‰æ‹©å‘½ä»¤ parser.process(a); // æŠŠç”¨æˆ·çš„å‘½ä»¤è¡Œçš„æ”¾å…¥è§£æå®ä¾‹ MainWindow w; w.show(); return a.exec(); } è¿è¡Œç»“æœï¼š\nâœ ./CommandLine -h Usage: ./CommandLine [options] TestCommandLine Options: -h, --help Displays help on commandline options. --help-all Displays help including Qt specific options. -v, --version Displays version information. è‡ªå®šä¹‰å‚æ•° #include \u0026#34;mainwindow.h\u0026#34; #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QCommandLineParser\u0026gt; #include \u0026lt;QCommandLineOption\u0026gt; int main(int argc, char *argv[]) { QApplication a(argc, argv); QCommandLineParser parser; // å®šä¹‰è§£æå®ä¾‹ parser.setApplicationDescription(\u0026#34;TestCommandLine\u0026#34;); // æè¿°å¯æ‰§è¡Œç¨‹åºçš„å±æ€§ parser.addHelpOption(); // æ·»åŠ å¸®åŠ©å‘½ä»¤ parser.addVersionOption(); // æ·»åŠ ç‰ˆæœ¬é€‰æ‹©å‘½ä»¤ QCommandLineOption CommandExe(\u0026#34;c\u0026#34;, QGuiApplication::translate(\u0026#34;main\u0026#34;,\u0026#34;Take the first argument as a command to execute, \u0026#34; \u0026#34;rather than reading commands from a script or standard input. \u0026#34; \u0026#34;If any furâ€\\ther arguments are given, \u0026#34; \u0026#34;the first one is assigned to $0,\u0026#34; \u0026#34; rather than being used as a positional parameter.\u0026#34;)); parser.addOption(CommandExe); parser.process(a); // æŠŠç”¨æˆ·çš„å‘½ä»¤è¡Œçš„æ”¾å…¥è§£æå®ä¾‹ MainWindow w; w.show(); return a.exec(); } è¿è¡Œç»“æœï¼š\nâœ ./CommandLine -h Usage: ./CommandLine [options] TestCommandLine Options: -h, --help Displays help on commandline options. --help-all Displays help including Qt specific options. -v, --version Displays version information. -c Take the first argument as a command to execute, rather than reading commands from a script or standard input. If any furâ€ her arguments are given, the first one is assigned to $0, rather than being used as a positional parameter. è·å–å‚æ•°å€¼ å¦‚æœéœ€è¦ä»å‘½ä»¤è¡Œè·å–å‚æ•°å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¦ç»™å‚æ•°å€¼ï¼ŒæŒ‡å®šä¸€ä¸ªåå­—ã€‚å¦‚ï¼Œå‚æ•°æ¥æ”¶çš„æ˜¯è·¯å¾„ï¼Œå¯ä»¥setValueName(\u0026quot;path\u0026quot;)ï¼Œå¦‚ï¼Œå‚æ•°æ¥æ”¶çš„æ˜¯ä¸ªæ•°å€¼ï¼Œå¯ä»¥setValueName(\u0026quot;value\u0026quot;)ã€‚\nå¦‚æœä¸è®¾ç½®å‚æ•°å€¼åç§°ï¼Œé‚£ä¹ˆå°†æ— æ³•è·å–å…¶å€¼ã€‚\n","permalink":"https://lifeislife.cn/posts/qt%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%A6%E5%8F%82%E6%95%B0%E5%90%AF%E5%8A%A8qt%E7%A8%8B%E5%BA%8F/","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eæˆ‘ä»¬ç»å¸¸ç”¨åˆ°å‘½ä»¤è¡Œå‚æ•°ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ Linux å‘½ä»¤ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶\u003ccode\u003els -a\u003c/code\u003e,\u003ccode\u003els\u003c/code\u003eå…¶å®å°±æ˜¯ä¸€ä¸ªç¨‹åºï¼Œ\u003ccode\u003e-a\u003c/code\u003eå°±æ˜¯è¯¥ç¨‹åºéœ€è¦è§£æçš„ä¸€ä¸ªå‚æ•°ã€‚é‚£ä¹ˆå¦‚ä½•èƒ½è®© Qt ç¨‹åºä¹Ÿèƒ½è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œä»å‘½ä»¤è¡Œå¯åŠ¨å‘¢ï¼Ÿ\u003c/p\u003e","title":"Qt å‘½ä»¤è¡Œå¸¦å‚æ•°å¯åŠ¨ Qt ç¨‹åº"},{"content":"éœ€æ±‚ åŒä¸€ä¸ªé¡¹ç›®ï¼Œä¸åŒçš„å¼€å‘è€…ä¿®æ”¹äº†ä¸åŒçš„æ–‡ä»¶ï¼Œå¦‚ä½•è§£å†³åŒæ­¥å†²çªã€‚\næ¨¡æ‹Ÿ ç”¨æˆ·ä¸€ä¿®æ”¹ ç¬¬ä¸€ä¸ªç”¨æˆ·æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œ \u003c!DOCTYPE html\u003e Responsive Image ä»¥ä¸Šå‘½ä»¤å°±æ˜¯æ–°å»ºä¸€ä¸ªåˆ†æ”¯feature/add_git_commands å°†å…¶ä¸è¿œç«¯åˆ†æ”¯origin/feature/add_git_commandsç›¸å…³è”ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹ readme æ–‡ä»¶ï¼Œå¹¶æ¨é€åˆ°è¿œç«¯ã€‚å› ä¸ºæ–°å»ºåˆ†æ”¯æ—¶å·²ç»åšäº†ä¸è¿œç«¯å…³è”ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥git pushã€‚\nç”¨æˆ·äºŒä¿®æ”¹ ç¬¬äºŒä¸ªç”¨æˆ·ï¼Œé¦–å…ˆæ‹‰å–è¿œç«¯åˆ†æ”¯ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image git branch -væŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ï¼Œä¿æŒä¸å˜ï¼Œä½†æ˜¯git branch -avæŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼Œå¯ä»¥å‘ç°å¤šäº†ä¸¤ä¸ªè¿œç«¯åˆ†æ”¯ã€‚ \u003c!DOCTYPE html\u003e Responsive Image æ–°å»ºæœ¬åœ°åˆ†æ”¯ï¼Œä¿æŒä¸è¿œç«¯åˆ†æ”¯åç›¸åŒã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ­¤æ—¶å†å¯¹ä¸ readme ä¸åŒçš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œæäº¤ï¼Œæ¨é€éƒ½ä¼šæ¯”è¾ƒé¡ºåˆ©ã€‚å› ä¸ºå½“å‰åˆ†æ”¯ä¿æŒfast forwardã€‚\nç”¨æˆ·äºŒç»§ç»­åšå¼€å‘ï¼Œä½†æ˜¯æ²¡å†å¾€è¿œç«¯æ¨é€ä»£ç ã€‚åœ¨æ­¤æœŸé—´ï¼Œç”¨æˆ·ä¸€å¯¹è¿œç«¯ä»£ç è¿›è¡Œäº†æ›´æ–°ã€‚ç”¨æˆ·äºŒæƒ³å†æ¬¡æ¨é€ä»£ç ï¼Œå°†ä¼šæŠ¥é”™ï¼Œæç¤ºå½“å‰æäº¤ä¸å†fast forwardã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è§£å†³æ–¹æ³• git fetchè¿œç«¯åˆ†æ”¯ \u003c!DOCTYPE html\u003e Responsive Image git mergeåˆå¹¶è¿œç«¯åˆ†æ”¯ \u003c!DOCTYPE html\u003e Responsive Image å› ä¸ºä¸¤ä¸ªç”¨æˆ·ä¿®æ”¹çš„ä¸åŒæ–‡ä»¶ï¼Œæ‰€ä»¥åˆå¹¶ä¸ä¼šäº§ç”Ÿå†²çªã€‚\n","permalink":"https://lifeislife.cn/posts/git%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E4%B8%8D%E5%90%8C%E7%9A%84%E6%96%87%E4%BB%B6%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","summary":"\u003ch2 id=\"éœ€æ±‚\"\u003eéœ€æ±‚\u003c/h2\u003e\n\u003cp\u003eåŒä¸€ä¸ªé¡¹ç›®ï¼Œ\u003cstrong\u003eä¸åŒçš„å¼€å‘è€…ä¿®æ”¹äº†ä¸åŒçš„æ–‡ä»¶\u003c/strong\u003eï¼Œå¦‚ä½•è§£å†³åŒæ­¥å†²çªã€‚\u003c/p\u003e\n\u003ch2 id=\"æ¨¡æ‹Ÿ\"\u003eæ¨¡æ‹Ÿ\u003c/h2\u003e\n\u003ch3 id=\"ç”¨æˆ·ä¸€ä¿®æ”¹\"\u003eç”¨æˆ·ä¸€ä¿®æ”¹\u003c/h3\u003e\n\u003cp\u003eç¬¬ä¸€ä¸ªç”¨æˆ·æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œ\n\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111222312698.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202111222312698.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Git ä¸åŒäººä¿®æ”¹äº†ä¸åŒçš„æ–‡ä»¶è¯¥å¦‚ä½•å¤„ç†"},{"content":"å®‰è£… GitBook æ—¶å‡ºç°è¿™ä¸ªé”™è¯¯ï¼Œå°†nodeç‰ˆæœ¬é™çº§å³å¯\nMINGW64 ~/Desktop/dir1/dir11 $ gitbook init warn: no summary file in this book info: create SUMMARY.md TypeError [ERR_INVALID_ARG_TYPE]: The \u0026#34;data\u0026#34; argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received an instance of Promise ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3typeerror-err-invalid-arg-type-the-data-argument-must-be-of-type-string-or-an-instance-of-buffe/","summary":"\u003cp\u003eå®‰è£… GitBook æ—¶å‡ºç°è¿™ä¸ªé”™è¯¯ï¼Œå°†\u003ccode\u003enode\u003c/code\u003eç‰ˆæœ¬é™çº§å³å¯\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eMINGW64 ~/Desktop/dir1/dir11\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ gitbook init\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewarn: no summary file in this book\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003einfo: create SUMMARY.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eTypeError [ERR_INVALID_ARG_TYPE]: The \u0026#34;data\u0026#34; argument must be of type string\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e or an instance of Buffer, TypedArray, or DataView. Received an instance of\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ePromise\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"è§£å†³ TypeError [ERR_INVALID_ARG_TYPE]: The data argument must be of type string or an instance of Buffe"},{"content":"ä»€ä¹ˆæ˜¯é¢„å¤„ç† C è¯­è¨€é€šè¿‡é¢„å¤„ç†å™¨æä¾›äº†ä¸€äº›è¯­è¨€åŠŸèƒ½ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œé¢„å¤„ç†å™¨æ˜¯ç¼–è¯‘è¿‡ç¨‹ä¸­å•ç‹¬æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ­¥éª¤ã€‚ä¸¤ä¸ªæœ€å¸¸ç”¨çš„é¢„å¤„ç†å™¨æŒ‡ä»¤æ˜¯ï¼š#include æŒ‡ä»¤ (ç”¨äºåœ¨ç¼–è¯‘æœŸé—´æŠŠæŒ‡å®šæ–‡ä»¶çš„å†…å®¹åŒ…å«è¿›å½“å‰æ–‡ä»¶ä¸­) å’Œ #define æŒ‡ä»¤ (ç”¨ä»»æ„å­—ç¬¦åºåˆ—æ›¿ä»£ä¸€ä¸ªæ ‡è®°)ã€‚\nä¸ºå•¥è¦è¿›è¡Œé¢„å…ˆå¤„ç†å‘¢ï¼Ÿå¦‚æœè¦æ·±å…¥çš„äº†è§£çš„è¯å¯ä»¥å‚è€ƒã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ï¼šé“¾æ¥ã€è£…è½½ä¸åº“ã€‹è¿™æœ¬ä¹¦ã€‚è¿™é‡Œä¸¾ä¸€ä¸ªéå¸¸å¸¸è§çš„ä¾‹å­ï¼Œå‡å¦‚æˆ‘ä»¬ç¼–å†™è·¨å¹³å°çš„ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘ä¸åŒå¹³å°çš„ç³»ç»Ÿåº“æ˜¯ä¸åŒçš„ï¼Œå¦‚æœåªåŒ…å«äº†ä¸€ä¸ªå¹³å°ä¸‹çš„åº“æ–‡ä»¶ï¼Œæ¢ä¸ªå¹³å°ç¼–è¯‘å°±å¯èƒ½å‡ºé”™ã€‚è¿™æ—¶å€™å°±éœ€è¦åœ¨ç¼–è¯‘å‰è¿›è¡Œé¢„å¤„ç†ã€‚\næœ‰é‡è¦çš„é¢„å¤„ç†å™¨æŒ‡ä»¤ï¼š\næŒ‡ä»¤ æè¿° #define å®šä¹‰å® #include åŒ…å«ä¸€ä¸ªæºä»£ç æ–‡ä»¶ #undef å–æ¶ˆå·²å®šä¹‰çš„å® #ifdef å¦‚æœå®å·²ç»å®šä¹‰ï¼Œåˆ™è¿”å›çœŸ #ifndef å¦‚æœå®æ²¡æœ‰å®šä¹‰ï¼Œåˆ™è¿”å›çœŸ #if å¦‚æœç»™å®šæ¡ä»¶ä¸ºçœŸï¼Œåˆ™ç¼–è¯‘ä¸‹é¢ä»£ç  #else #if çš„æ›¿ä»£æ–¹æ¡ˆ #elif å¦‚æœå‰é¢çš„ #if ç»™å®šæ¡ä»¶ä¸ä¸ºçœŸï¼Œå½“å‰æ¡ä»¶ä¸ºçœŸï¼Œåˆ™ç¼–è¯‘ä¸‹é¢ä»£ç  #endif ç»“æŸä¸€ä¸ª #ifâ€¦â€¦#else æ¡ä»¶ç¼–è¯‘å— #error å½“é‡åˆ°æ ‡å‡†é”™è¯¯æ—¶ï¼Œè¾“å‡ºé”™è¯¯æ¶ˆæ¯ #pragma ä½¿ç”¨æ ‡å‡†åŒ–æ–¹æ³•ï¼Œå‘ç¼–è¯‘å™¨å‘å¸ƒç‰¹æ®Šçš„å‘½ä»¤åˆ°ç¼–è¯‘å™¨ä¸­ æ¡ä»¶ç¼–è¯‘ #if #if æ•´å‹å¸¸é‡è¡¨è¾¾å¼1 ç¨‹åºæ®µ1 #elif æ•´å‹å¸¸é‡è¡¨è¾¾å¼2 ç¨‹åºæ®µ2 #elif æ•´å‹å¸¸é‡è¡¨è¾¾å¼3 ç¨‹åºæ®µ3 #else ç¨‹åºæ®µ4 #endif å®ƒçš„æ„æ€æ˜¯ï¼šå¦‚å¸¸â€œè¡¨è¾¾å¼ 1â€çš„å€¼ä¸ºçœŸï¼ˆé 0ï¼‰ï¼Œå°±å¯¹â€œç¨‹åºæ®µ 1â€è¿›è¡Œç¼–è¯‘ï¼Œå¦åˆ™å°±è®¡ç®—â€œè¡¨è¾¾å¼ 2â€ï¼Œç»“æœä¸ºçœŸçš„è¯å°±å¯¹â€œç¨‹åºæ®µ 2â€è¿›è¡Œç¼–è¯‘ï¼Œä¸ºå‡çš„è¯å°±ç»§ç»­å¾€ä¸‹åŒ¹é…ï¼Œç›´åˆ°é‡åˆ°å€¼ä¸ºçœŸçš„è¡¨è¾¾å¼ï¼Œæˆ–è€…é‡åˆ° #else ã€‚è¿™ä¸€ç‚¹å’Œ if else éå¸¸ç±»ä¼¼ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ #if å‘½ä»¤è¦æ±‚åˆ¤æ–­æ¡ä»¶ä¸ºæ•´å‹å¸¸é‡è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¡¨è¾¾å¼ä¸­ä¸èƒ½åŒ…å«å˜é‡ï¼Œè€Œä¸”ç»“æœå¿…é¡»æ˜¯æ•´æ•°ï¼›è€Œ if åé¢çš„è¡¨è¾¾å¼æ²¡æœ‰é™åˆ¶ï¼Œåªè¦ç¬¦åˆè¯­æ³•å°±è¡Œã€‚è¿™æ˜¯ #if å’Œ if çš„ä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚\n#include \u0026lt;stdio.h\u0026gt; //ä¸åŒçš„å¹³å°ä¸‹å¼•å…¥ä¸åŒçš„å¤´æ–‡ä»¶ #if _WIN32 //è¯†åˆ« Windows å¹³å° #include \u0026lt;windows.h\u0026gt; #elif __linux__ //è¯†åˆ« Linux å¹³å° #include \u0026lt;unistd.h\u0026gt; #endif int main() { //ä¸åŒçš„å¹³å°ä¸‹è°ƒç”¨ä¸åŒçš„å‡½æ•° #if _WIN32 //è¯†åˆ« Windows å¹³å° Sleep(5000); #elif __linux__ //è¯†åˆ« Linux å¹³å° sleep(5); #endif puts(\u0026#34;http://c.biancheng.net/\u0026#34;); return 0; } #ifedf #ifdef å®å ç¨‹åºæ®µ1 #else ç¨‹åºæ®µ2 #endif #ifndef #ifndef å®å ç¨‹åºæ®µ1 #else ç¨‹åºæ®µ2 #endif ä¸#ifdefç›¸æ¯”ï¼Œä»…ä»…æ˜¯å°† #ifdef æ”¹ä¸ºäº† #ifndefã€‚å®ƒçš„æ„æ€æ˜¯ï¼Œå¦‚æœå½“å‰çš„å®æœªè¢«å®šä¹‰ï¼Œåˆ™å¯¹â€œç¨‹åºæ®µ 1â€è¿›è¡Œç¼–è¯‘ï¼Œå¦åˆ™å¯¹â€œç¨‹åºæ®µ 2â€è¿›è¡Œç¼–è¯‘ï¼Œè¿™ä¸#ifdef çš„åŠŸèƒ½æ­£å¥½ç›¸åã€‚\næ–‡ä»¶åŒ…å«#include #include å«åšæ–‡ä»¶åŒ…å«å‘½ä»¤ï¼Œç”¨æ¥å¼•å…¥å¯¹åº”çš„å¤´æ–‡ä»¶ï¼ˆ.h æ–‡ä»¶ï¼‰ã€‚ #include çš„å¤„ç†è¿‡ç¨‹å¾ˆç®€å•ï¼Œå°±æ˜¯å°†å¤´æ–‡ä»¶çš„å†…å®¹æ’å…¥åˆ°è¯¥å‘½ä»¤æ‰€åœ¨çš„ä½ç½®ï¼Œä»è€ŒæŠŠå¤´æ–‡ä»¶å’Œå½“å‰æºæ–‡ä»¶è¿æ¥æˆä¸€ä¸ªæºæ–‡ä»¶ï¼Œè¿™ä¸å¤åˆ¶ç²˜è´´çš„æ•ˆæœç›¸åŒã€‚\n#include çš„ç”¨æ³•æœ‰ä¸¤ç§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n#include \u0026lt;stdHeader.h\u0026gt; #include \u0026#34;myHeader.h\u0026#34; ä½¿ç”¨å°–æ‹¬å· \u0026lt; \u0026gt; å’ŒåŒå¼•å· \u0026quot; \u0026quot; çš„åŒºåˆ«åœ¨äºå¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„ä¸åŒï¼š\nä½¿ç”¨å°–æ‹¬å·\u0026lt; \u0026gt;ï¼Œç¼–è¯‘å™¨ä¼šåˆ°ç¯å¢ƒå˜é‡ä¸‹æŸ¥æ‰¾å¤´æ–‡ä»¶ï¼› ä½¿ç”¨åŒå¼•å·\u0026quot; \u0026quot;ï¼Œç¼–è¯‘å™¨é¦–å…ˆåœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾å¤´æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå†åˆ°ç¯å¢ƒå˜é‡ä¸‹æŸ¥æ‰¾ã€‚ æ³¨æ„äº‹é¡¹ï¼š\nåœ¨å¤´æ–‡ä»¶ä¸­å°½é‡ä¸è¦è¿›è¡Œå‡½æ•°çš„å®šä¹‰ï¼Œåªå¯¹å…¶è¿›è¡Œå£°æ˜ã€‚å¦åˆ™å¦‚æœæœ‰å¤šä¸ªæºæ–‡ä»¶é“¾æ¥æ—¶ä¼šæŠ¥é”™ æŸä¸€ä¸ªå¤´æ–‡ä»¶çš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰åŒ…å«è¯¥æ–‡ä»¶çš„æºæ–‡ä»¶éƒ½éœ€è¦é‡æ–°ç¼–è¯‘ ä¸€ä¸ª#includeå‘½ä»¤æŒ‡å®šä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œå¤šä¸ªå¤´æ–‡ä»¶éœ€è¦å¤šä¸ª#include åŒ…å«å¯ä»¥åµŒå¥— æ–‡ä»¶ 1 åŒ…å«æ–‡ä»¶ 2ï¼Œæ–‡ä»¶ 2 ç”¨åˆ°æ–‡ä»¶ 3ï¼Œåˆ™æ–‡ä»¶ 3 çš„åŒ…å«å‘½ä»¤#include åº”æ”¾åœ¨æ–‡ä»¶ 1 çš„å¤´éƒ¨ç¬¬ä¸€è¡Œï¼› è¢«åŒ…å«æ–‡ä»¶ä¸­çš„é™æ€å…¨å±€å˜é‡ä¸ç”¨åœ¨åŒ…å«æ–‡ä»¶ä¸­å£°æ˜ å®å®šä¹‰ what #define å«åšå®å®šä¹‰å‘½ä»¤ï¼Œå®ƒä¹Ÿæ˜¯ C è¯­è¨€é¢„å¤„ç†å‘½ä»¤çš„ä¸€ç§ã€‚æ‰€è°“å®å®šä¹‰ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªæ ‡è¯†ç¬¦æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨åé¢çš„ä»£ç ä¸­å‡ºç°äº†è¯¥æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆå°±å…¨éƒ¨æ›¿æ¢æˆæŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚\n#define å®å å­—ç¬¦ä¸² //åŸºæœ¬æ ¼å¼ #define N 100 //å°†æ‰€æœ‰Néƒ½æ›¿æ¢æˆæ•´æ•°100 #define forever for (;;) //è¯¥è¯­å¥ä¸ºæ— é™å¾ªç¯å®šä¹‰äº†ä¸€ä¸ªæ–°åå­—forever #define max(A, B) ((A)\u0026gt; (B) ? (A) : (B) ) why å¯¹äºå‡½æ•°ï¼Œå…¶è°ƒç”¨å¿…é¡»è¦å°†ç¨‹åºæ‰§è¡Œçš„é¡ºåºè·³è½¬åˆ°å‡½æ•°æ‰€åœ¨å†…å­˜çš„æŸä¸ªåœ°å€ï¼Œåœ¨å°†å‡½æ•°ç¨‹åºæ‰§è¡Œå®Œæˆåï¼Œå†è·³è½¬å›å»æ‰§è¡Œå‡½æ•°è°ƒç”¨å‰çš„åœ°æ–¹ã€‚è¿™ç§è·³è½¬æ“ä½œè¦æ±‚åœ¨å‡½æ•°æ‰§è¡Œå‰ä¿å­˜ç°åœºå¹¶è®°å½•å½“å‰æ‰§è¡Œåœ°å€ï¼Œå‡½æ•°è°ƒç”¨è¿”å›åè¦æ¢å¤ç°åœºï¼Œå¹¶æŒ‰åŸæ¥ä¿å­˜åœ°å€ç»§ç»­æ‰§è¡Œã€‚å› æ­¤ï¼Œå‡½æ•°è°ƒç”¨ä¼šæœ‰ä¸€å®šçš„æ—¶é—´å’Œç©ºé—´æ–¹é¢çš„å¼€é”€ï¼Œå¿…å°†å½±å“ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚\nå¯¹äºå®ï¼Œå®ƒåªæ˜¯åœ¨é¢„å¤„ç†çš„åœ°æ–¹æŠŠä»£ç å±•å¼€ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´å’Œæ—¶é—´æ–¹é¢çš„å¼€é”€ï¼Œå› æ­¤è°ƒç”¨å®æ¯”è°ƒç”¨å‡½æ•°æ›´æœ‰æ•ˆç‡ã€‚\nä½†æ˜¯ï¼Œå®ä¹Ÿæœ‰å¾ˆå¤šçš„é—®é¢˜å’Œç¼ºé™·ï¼š\nåœ¨ C è¯­è¨€ä¸­ï¼Œå®å®¹æ˜“å‡ºç°ä¸€äº›è¾¹ç•Œæ€§çš„é—®é¢˜ï¼Œå®¹æ˜“äº§ç”Ÿæ­§ä¹‰ã€‚(ä¼˜å…ˆçº§çš„é—®é¢˜ï¼Œèƒ½åŠ æ‹¬å·éƒ½åŠ æ‹¬å·) åœ¨ C++è¯­è¨€ä¸­ï¼Œå®ä¸å¯ä»¥è°ƒç”¨ C++ç±»ä¸­çš„ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜ã€‚ Tips èƒ½ç”¨æ‹¬å·çš„åœ°æ–¹éƒ½ç”¨æ‹¬å·ï¼Œä¸è¦å·æ‡’çœç•¥ï¼Œä»¥å…æ­§ä¹‰ï¼Œç‰¹åˆ«æ˜¯äºå¸¦å‚å®å®šä¹‰ä¸ä»…è¦åœ¨å‚æ•°ä¸¤ä¾§åŠ æ‹¬å·ï¼Œè¿˜åº”è¯¥åœ¨æ•´ä¸ªå­—ç¬¦ä¸²å¤–åŠ æ‹¬å· å®å®šä¹‰ä¸æ˜¯è¯´æ˜æˆ–è¯­å¥ï¼Œåœ¨è¡Œæœ«ä¸å¿…åŠ åˆ†å·ï¼Œå¦‚åŠ ä¸Šåˆ†å·åˆ™è¿åˆ†å·ä¹Ÿä¸€èµ·æ›¿æ¢ å®å®šä¹‰å¿…é¡»å†™åœ¨å‡½æ•°ä¹‹å¤–ï¼Œå…¶ä½œç”¨åŸŸä¸ºå®å®šä¹‰å‘½ä»¤èµ·åˆ°æºç¨‹åºç»“æŸã€‚å¦‚è¦ç»ˆæ­¢å…¶ä½œç”¨åŸŸå¯ä½¿ç”¨#undefå‘½ä»¤ ä»£ç ä¸­çš„å®åå¦‚æœè¢«å¼•å·åŒ…å›´ï¼Œé‚£ä¹ˆé¢„å¤„ç†ç¨‹åºä¸å¯¹å…¶ä½œå®ä»£æ›¿ å®å®šä¹‰å…è®¸åµŒå¥—ï¼Œåœ¨å®å®šä¹‰çš„å­—ç¬¦ä¸²ä¸­å¯ä»¥ä½¿ç”¨å·²ç»å®šä¹‰çš„å®åï¼Œåœ¨å®å±•å¼€æ—¶ç”±é¢„å¤„ç†ç¨‹åºå±‚å±‚ä»£æ¢ ä¹ æƒ¯ä¸Šå®åç”¨å¤§å†™å­—æ¯è¡¨ç¤ºï¼Œä»¥ä¾¿äºä¸å˜é‡åŒºåˆ« å¯ç”¨å®å®šä¹‰è¡¨ç¤ºæ•°æ®ç±»å‹ï¼Œä½¿ä¹¦å†™æ–¹ä¾¿ å¸¦å‚æ•°çš„å®å’Œå‡½æ•°å¾ˆç›¸ä¼¼ï¼Œä½†æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼šå®å±•å¼€ä»…ä»…æ˜¯å­—ç¬¦ä¸²çš„æ›¿æ¢ï¼Œä¸ä¼šå¯¹è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ï¼›å®åœ¨ç¼–è¯‘ä¹‹å‰å°±è¢«å¤„ç†æ‰äº†ï¼Œå®ƒæ²¡æœ‰æœºä¼šå‚ä¸ç¼–è¯‘ï¼Œä¹Ÿä¸ä¼šå ç”¨å†…å­˜ã€‚è€Œå‡½æ•°æ˜¯ä¸€æ®µå¯ä»¥é‡å¤ä½¿ç”¨çš„ä»£ç ï¼Œä¼šè¢«ç¼–è¯‘ï¼Œä¼šç»™å®ƒåˆ†é…å†…å­˜ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°ï¼Œå°±æ˜¯æ‰§è¡Œè¿™å—å†…å­˜ä¸­çš„ä»£ç ã€‚ å†…è”å‡½æ•° ä»ä¸Šæ–‡å¯çŸ¥ï¼Œå¯ä»¥çœ‹åˆ°å®æœ‰ä¸€äº›éš¾ä»¥é¿å…çš„é—®é¢˜ï¼Œå¯¹äºä¸èƒ½è®¿é—® C++ç±»ä¸­ç§æœ‰æˆ–è€…å—ä¿æŠ¤çš„æˆå‘˜ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ\nwhat å…³é”®å­— inline å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œä»»ä½•åœ°æ–¹åªè¦è°ƒç”¨å†…è”å‡½æ•°ï¼Œå°±ç›´æ¥æŠŠè¯¥å‡½æ•°çš„æœºå™¨ç æ’å…¥åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹ã€‚è¿™æ ·ç¨‹åºæ‰§è¡Œæ›´æœ‰æ•ˆç‡ï¼Œå°±å¥½åƒå°†å†…è”å‡½æ•°ä¸­çš„è¯­å¥ç›´æ¥æ’å…¥åˆ°äº†æºä»£ç æ–‡ä»¶ä¸­éœ€è¦è°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹ä¸€æ ·ã€‚\nwhy å†…è”å‡½æ•°æ˜¯ä»£ç è¢«æ’å…¥åˆ°è°ƒç”¨è€…ä»£ç å¤„çš„å‡½æ•°ã€‚å¦‚åŒ #define å®ï¼Œå†…è”å‡½æ•°é€šè¿‡é¿å…è¢«è°ƒç”¨çš„å¼€é”€æ¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå°¤å…¶æ˜¯å®ƒèƒ½å¤Ÿé€šè¿‡è°ƒç”¨ï¼ˆè¿‡ç¨‹åŒ–é›†æˆï¼‰è¢«ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚\nå†…è”å‡½æ•°å’Œå®å¾ˆç±»ä¼¼ï¼Œè€ŒåŒºåˆ«åœ¨äºï¼Œå®æ˜¯ç”±é¢„å¤„ç†å™¨å¯¹å®è¿›è¡Œæ›¿ä»£ï¼Œè€Œå†…è”å‡½æ•°æ˜¯é€šè¿‡ç¼–è¯‘å™¨æ§åˆ¶æ¥å®ç°çš„ã€‚è€Œä¸”å†…è”å‡½æ•°æ˜¯çœŸæ­£çš„å‡½æ•°ï¼Œåªæ˜¯åœ¨éœ€è¦ç”¨åˆ°çš„æ—¶å€™ï¼Œå†…è”å‡½æ•°åƒå®ä¸€æ ·çš„å±•å¼€ï¼Œæ‰€ä»¥å–æ¶ˆäº†å‡½æ•°çš„å‚æ•°å‹æ ˆï¼Œå‡å°‘äº†è°ƒç”¨çš„å¼€é”€ã€‚ä½ å¯ä»¥åƒè°ƒç”¨å‡½æ•°ä¸€æ ·æ¥è°ƒç”¨å†…è”å‡½æ•°ï¼Œè€Œä¸å¿…æ‹…å¿ƒä¼šäº§ç”Ÿäºå¤„ç†å®çš„ä¸€äº›é—®é¢˜ã€‚\nHow å¯¹äºå†…è”å‡½æ•°ï¼Œå…¶å·¥ä½œåŸç†æ˜¯ï¼š\nå¯¹äºä»»ä½•å†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨åœ¨ç¬¦å·è¡¨é‡Œæ”¾å…¥å‡½æ•°çš„å£°æ˜ï¼ˆåŒ…æ‹¬åå­—ã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ï¼‰ã€‚å¦‚æœç¼–è¯‘å™¨æ²¡æœ‰å‘ç°å†…è”å‡½æ•°å­˜åœ¨é”™è¯¯ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°çš„ä»£ç ä¹Ÿè¢«æ”¾å…¥ç¬¦å·è¡¨é‡Œã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå†…è”å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨é¦–å…ˆæ£€æŸ¥è°ƒç”¨æ˜¯å¦æ­£ç¡®ï¼ˆè¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œæˆ–è€…è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œå½“ç„¶å¯¹æ‰€æœ‰çš„å‡½æ•°éƒ½ä¸€æ ·ï¼‰ã€‚å¦‚æœæ­£ç¡®ï¼Œå†…è”å‡½æ•°çš„ä»£ç å°±ä¼šç›´æ¥æ›¿æ¢å‡½æ•°è°ƒç”¨ï¼Œäºæ˜¯çœå»äº†å‡½æ•°è°ƒç”¨çš„å¼€é”€ã€‚\nè¿™ä¸ªè¿‡ç¨‹ä¸é¢„å¤„ç†æœ‰æ˜¾è‘—çš„ä¸åŒï¼Œå› ä¸ºé¢„å¤„ç†å™¨ä¸èƒ½è¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œæˆ–è€…è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ã€‚å‡å¦‚å†…è”å‡½æ•°æ˜¯æˆå‘˜å‡½æ•°ï¼Œå¯¹è±¡çš„åœ°å€ï¼ˆthisï¼‰ä¼šè¢«æ”¾åœ¨åˆé€‚çš„åœ°æ–¹ï¼Œè¿™ä¹Ÿæ˜¯é¢„å¤„ç†å™¨åŠä¸åˆ°çš„ã€‚\nTips å½“ä½ å®šä¹‰ä¸€ä¸ªå†…è”å‡½æ•°æ—¶ï¼Œåœ¨å‡½æ•°å®šä¹‰å‰åŠ ä¸Š inline å…³é”®å­—ï¼Œå¹¶ä¸”å°†å®šä¹‰æ”¾å…¥å¤´æ–‡ä»¶ã€‚ å†…è”å‡½æ•°å¿…é¡»æ˜¯å’Œå‡½æ•°ä½“å£°æ˜åœ¨ä¸€èµ·æ‰æœ‰æ•ˆ å†…è”å‡½æ•°ä¸å®œè¿‡å¤§ï¼Œæ¯”å¦‚å¾ªç¯ä½“ï¼Œé€’å½’ä½“å°±ä¸é€‚åˆå†…è”ã€‚å¦‚æœè¿‡å¤§ï¼Œç¼–è¯‘å™¨ä¼šæ”¾å¼ƒå†…è”ï¼Œé‡‡ç”¨æ™®é€šæ–¹å¼è°ƒç”¨å‡½æ•°ã€‚ ç›¸å…³å‚è€ƒ C é¢„å¤„ç†å™¨ C è¯­è¨€é¢„å¤„ç†å‘½ä»¤æ˜¯ä»€ä¹ˆï¼Ÿ C è¯­è¨€ä¸­å®ä¸å†…è”å‡½æ•°è§£æ C è¯­è¨€å†…è”å‡½æ•° å†…è”å‡½æ•°\n","permalink":"https://lifeislife.cn/posts/c%E8%AF%AD%E8%A8%80%E9%A2%84%E5%A4%84%E7%90%86/","summary":"\u003ch2 id=\"ä»€ä¹ˆæ˜¯é¢„å¤„ç†\"\u003eä»€ä¹ˆæ˜¯é¢„å¤„ç†\u003c/h2\u003e\n\u003cp\u003eC è¯­è¨€é€šè¿‡é¢„å¤„ç†å™¨æä¾›äº†ä¸€äº›è¯­è¨€åŠŸèƒ½ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œé¢„å¤„ç†å™¨æ˜¯ç¼–è¯‘è¿‡ç¨‹ä¸­å•ç‹¬æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ­¥éª¤ã€‚ä¸¤ä¸ªæœ€å¸¸ç”¨çš„é¢„å¤„ç†å™¨æŒ‡ä»¤æ˜¯ï¼š\u003ccode\u003e#include\u003c/code\u003e æŒ‡ä»¤ (ç”¨äºåœ¨ç¼–è¯‘æœŸé—´æŠŠæŒ‡å®šæ–‡ä»¶çš„å†…å®¹åŒ…å«è¿›å½“å‰æ–‡ä»¶ä¸­) å’Œ \u003ccode\u003e#define\u003c/code\u003e æŒ‡ä»¤ (ç”¨ä»»æ„å­—ç¬¦åºåˆ—æ›¿ä»£ä¸€ä¸ªæ ‡è®°)ã€‚\u003c/p\u003e","title":"C è¯­è¨€é¢„å¤„ç†"},{"content":"åœ¨ä½¿ç”¨execç³»åˆ—å‡½æ•°æ—¶ï¼Œexecleï¼Œexecvï¼Œexecvpä¸‰ä¸ªå‡½æ•°ï¼Œéƒ½å¯ä»¥ä½¿ç”¨char *arg[]ä¼ å…¥å¯åŠ¨å‚æ•°ã€‚ä»¥ä¸‹é¢çš„ç¨‹åºä¸ºä¾‹ï¼Œ\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; int main(void) { int ret; char *argv[] = {\u0026#34;ls\u0026#34;,\u0026#34;-l\u0026#34;,NULL}; ret = execvp(\u0026#34;ls\u0026#34;,argv); if(ret == -1) perror(\u0026#34;execl error\u0026#34;); return 0; } ç¼–è¯‘æ—¶å°±ä¼šå‡ºç°ä¸€ä¸‹ï¼Œè­¦å‘Šï¼Œ\nexpected \u0026#39;char * const*\u0026#39; but argument is of type \u0026#39;const char **\u0026#39; å› ä¸ºé¡¹ç›®ä¸­ä¸å…è®¸è­¦å‘Šäº§ç”Ÿï¼Œæ‰€ä»¥ç¼–è¯‘é€‰é¡¹æ˜¯-Werrorï¼Œæ‰€æœ‰è­¦å‘Šéƒ½ä¼šè¢«å‡çº§æˆé”™è¯¯ã€‚ç¼–è¯‘æ—¶å°±ä¼šäº§ç”Ÿå¦‚ä¸‹æç¤ºï¼Œ\nccl : all warnings being treated as errors å¦‚æœæ˜¯å¹³æ—¶ç»ƒä¹ ï¼Œæ”¹ä¸€ä¸‹ç¼–è¯‘é€‰é¡¹ï¼ŒæŠŠè¿™ä¸ªè­¦å‘Šå¿½ç•¥å°±è¡Œï¼Œä½†æ˜¯ç°åœ¨åªèƒ½è§£å†³ã€‚\nå‡ºç°è¿™ä¸ªé—®é¢˜å°±æ˜¯å› ä¸ºå®šä¹‰æ•°ç»„æ—¶char *argv[]ç±»å‹æ˜¯char **ã€‚ä½†æ˜¯execvp()å‡½æ•°ç­¾åæ˜¯execvp(const char *file, char *const argv[]);ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹æ˜¯char * const *ã€‚\næœ¬ä»¥ä¸ºç›´æ¥å°†å˜é‡å®šä¹‰æ›´æ”¹æˆchar * const argv[]å°±è¡Œäº†ï¼Œä½†æ˜¯å®ƒç­‰ä»·äºconst char **ï¼Œæ‰€ä»¥ä»ç„¶ä¸èƒ½å’Œå‡½æ•°ç­¾ååŒ¹é…ã€‚\nå®åœ¨æ²¡åŠæ³•åªèƒ½æ”¹æˆå¦‚ä¸‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; int main(void) { printf(\u0026#34;entering main process---\\n\u0026#34;); int ret; char str1[] = \u0026#34;ls\u0026#34;; char str2[] = \u0026#34;-l\u0026#34;; char * const argv[] = {str1, str2, NULL}; ret = execvp(\u0026#34;ls\u0026#34;,argv); if(ret == -1) perror(\u0026#34;execl error\u0026#34;); printf(\u0026#34;exiting main process ----\\n\u0026#34;); return 0; } æˆ–è€…åœ¨å°†å½¢å‚argvè¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; int main(void) { printf(\u0026#34;entering main process---\\n\u0026#34;); int ret; char const *argv[] = {\u0026#34;ls\u0026#34;, \u0026#34;-l\u0026#34;, NULL}; ret = execvp(\u0026#34;ls\u0026#34;,(char * const *)argv); if(ret == -1) perror(\u0026#34;execl error\u0026#34;); printf(\u0026#34;exiting main process ----\\n\u0026#34;); return 0; } ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3expected-char-const-but-argument-is-of-type-char/","summary":"\u003cp\u003eåœ¨ä½¿ç”¨\u003ccode\u003eexec\u003c/code\u003eç³»åˆ—å‡½æ•°æ—¶ï¼Œ\u003ccode\u003eexecle\u003c/code\u003eï¼Œ\u003ccode\u003eexecv\u003c/code\u003eï¼Œ\u003ccode\u003eexecvp\u003c/code\u003eä¸‰ä¸ªå‡½æ•°ï¼Œéƒ½å¯ä»¥ä½¿ç”¨\u003ccode\u003echar *arg[]\u003c/code\u003eä¼ å…¥å¯åŠ¨å‚æ•°ã€‚ä»¥ä¸‹é¢çš„ç¨‹åºä¸ºä¾‹ï¼Œ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;stdio.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;stdlib.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;unistd.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eret\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eargv\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;ls\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;-l\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"nb\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eret\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eexecvp\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;ls\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eargv\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eret\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nf\"\u003eperror\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;execl error\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eç¼–è¯‘æ—¶å°±ä¼šå‡ºç°ä¸€ä¸‹ï¼Œè­¦å‘Šï¼Œ\u003c/p\u003e","title":"è§£å†³ expected 'char * const*' but argument is of type 'char **'"},{"content":"åœ¨è°ƒè¯• QEMU æ—¶ï¼Œè‡ªå·±éœ€è¦ä¿®æ”¹æºæ–‡ä»¶ï¼Œä½†æ˜¯æ¯æ¬¡ä¿®æ”¹éƒ½éœ€è¦åœ¨å‘½ä»¤è¡Œé‡æ–°makeç¼–è¯‘ä¸€éï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæƒ³åˆ°ä¹‹å‰åˆšåˆšé…ç½®è¿‡tasks.jsonæ–‡ä»¶ï¼Œå¯ä»¥æŠŠå‘½ä»¤è¡Œä»»åŠ¡é…ç½®åˆ°æ–‡ä»¶é‡Œï¼Œmakeå‘½ä»¤ä¸ä¹Ÿä¸€æ ·å¯ä»¥åŠ å…¥å—ï¼Ÿä¿®æ”¹tasks.jsonæ–‡ä»¶å¦‚ä¸‹ï¼š\n{ \u0026#34;version\u0026#34;: \u0026#34;2.0.0\u0026#34;, \u0026#34;tasks\u0026#34;: [ { //ä»»åŠ¡çš„åå­—æ–¹ä¾¿æ‰§è¡Œ \u0026#34;label\u0026#34;: \u0026#34;make qemu\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;make\u0026#34;, \u0026#34;args\u0026#34;:[ //8 çº¿ç¨‹ç¼–è¯‘ \u0026#34;-j8\u0026#34;, ], \u0026#34;options\u0026#34;: { //åˆ‡æ¢åˆ° build æ–‡ä»¶å¤¹ä¸‹ \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceFolder}/build\u0026#34; }, }, { // å¯åŠ¨ qemu ä¾›è°ƒè¯•å™¨è¿æ¥ \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;Run Qemu Server(RISCV)\u0026#34;, //åœ¨æ‰§è¡Œè¿™ä¸ªä»»åŠ¡å‰ï¼Œå…ˆæ‰§è¡Œ make qemu ä»»åŠ¡ã€ //è¿™æ ·å°±å¯ä»¥åœ¨æ‰§è¡Œè°ƒè¯•æ—¶ï¼Œè‡ªåŠ¨å…ˆç¼–è¯‘ä¸€é \u0026#34;dependsOn\u0026#34;: \u0026#34;make qemu\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;qemu-system-riscv64\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-g\u0026#34;, \u0026#34;${workspaceFolder}/debug/${fileBasenameNoExtension}\u0026#34; ], }, ] } ","permalink":"https://lifeislife.cn/posts/vscode%E4%B8%AD%E8%B0%83%E8%AF%95%E5%B8%A6makefile%E6%96%87%E4%BB%B6%E7%9A%84%E9%A1%B9%E7%9B%AE/","summary":"\u003cp\u003eåœ¨è°ƒè¯• QEMU æ—¶ï¼Œè‡ªå·±éœ€è¦ä¿®æ”¹æºæ–‡ä»¶ï¼Œä½†æ˜¯æ¯æ¬¡ä¿®æ”¹éƒ½éœ€è¦åœ¨å‘½ä»¤è¡Œé‡æ–°\u003ccode\u003emake\u003c/code\u003eç¼–è¯‘ä¸€éï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæƒ³åˆ°ä¹‹å‰åˆšåˆšé…ç½®è¿‡\u003ccode\u003etasks.json\u003c/code\u003eæ–‡ä»¶ï¼Œå¯ä»¥æŠŠå‘½ä»¤è¡Œä»»åŠ¡é…ç½®åˆ°æ–‡ä»¶é‡Œï¼Œ\u003ccode\u003emake\u003c/code\u003eå‘½ä»¤ä¸ä¹Ÿä¸€æ ·å¯ä»¥åŠ å…¥å—ï¼Ÿä¿®æ”¹\u003ccode\u003etasks.json\u003c/code\u003eæ–‡ä»¶å¦‚ä¸‹ï¼š\u003c/p\u003e","title":"VSCode ä¸­è°ƒè¯•å¸¦ Makefile æ–‡ä»¶çš„é¡¹ç›®"},{"content":"é—®é¢˜ è¿™æ˜¯ä¸€ç±»é—®é¢˜ï¼Œä¸ä»…é™äºå®‰è£… gccï¼Œè¿™ç±»é—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºï¼ŒUbuntu å·²å®‰è£…çš„è½¯ä»¶åŒ…ç‰ˆæœ¬é«˜ï¼Œè€Œæ‰€å®‰è£…è½¯ä»¶çš„ä¾èµ–åŒ…ç‰ˆæœ¬ä½ï¼Œè¿™æ ·åœ¨å®‰è£…é«˜ç‰ˆè½¯ä»¶æ—¶ï¼Œå·²æœ‰çš„è½¯ä»¶åŒ…ä¾èµ–ä½ è¦å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œä½ æŠŠè½¯ä»¶åŒ…å‡çº§äº†ï¼Œå¯èƒ½å°±ä¼šç ´åè¿™ä¸ªä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥apt-getä¸è®©ä½ å®‰è£…ã€‚\nè¿™æ—¶å°±è¦è¯·åˆ°å¤§æ€å™¨-aptitudeï¼Œå®ƒä¸ apt-getä¸€æ ·ï¼Œæ˜¯ Debian åŠå…¶è¡ç”Ÿç³»ç»Ÿä¸­åŠŸèƒ½æå…¶å¼ºå¤§çš„åŒ…ç®¡ç†å·¥å…·ã€‚ä¸ apt-get ä¸åŒçš„æ˜¯ï¼Œaptitudeåœ¨å¤„ç†ä¾èµ–é—®é¢˜ä¸Šæ›´ä½³ä¸€äº›ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œaptitudeåœ¨åˆ é™¤ä¸€ä¸ªåŒ…æ—¶ï¼Œä¼šåŒæ—¶åˆ é™¤æœ¬èº«æ‰€ä¾èµ–çš„åŒ…ã€‚è¿™æ ·ï¼Œç³»ç»Ÿä¸­ä¸ä¼šæ®‹ç•™æ— ç”¨çš„åŒ…ï¼Œæ•´ä¸ªç³»ç»Ÿæ›´ä¸ºå¹²å‡€ã€‚\næ–¹æ³• $sudo apt-get install aptitude //å®‰è£…aptitudeåŒ…ç®¡ç†å™¨ $sudo aptitude install gcc-multilib //ç”¨æ–°çš„åŒ…ç®¡ç†å™¨å®‰è£…ä½ è¦å®‰è£…çš„è½¯ä»¶ å®‰è£…gcc-multilibæ—¶ä¼šæŠŠæ‰€æœ‰ä¾èµ–åŒ…ä¸€å¹¶å®‰è£…ï¼Œæ­¤æ—¶ä¼šè®©ä½ åŒæ„ï¼Œé€‰æ‹©nå°±è¡Œã€‚\næ¥ä¸‹æ¥å°±ä¼šè§£å†³å·²ç»å®‰è£…çš„åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»–ä¼šé™çº§æˆ–å‡çº§ä¸€äº›è½¯ä»¶åŒ…æ¥åŒ¹é…å½“å‰å®‰è£…çš„è½¯ä»¶ç‰ˆæœ¬ï¼Œæ­¤æ—¶é€‰æ‹©yã€‚\nå®Œæˆä»¥ä¸Šæ“ä½œï¼Œå†æ¬¡æ­£å¸¸å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…å³å¯æˆåŠŸå®‰è£…ã€‚\nå¦‚æœæ— æ³•æ­£å¸¸å®‰è£…ï¼Œé‡å¤ä»¥ä¸Šæ“ä½œï¼Œæ¯æ¬¡éƒ½é€‰æ‹©nã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3gcc-multilib-%E4%BE%9D%E8%B5%96-gcc-4-8-multilib-4-8-2-5-%E4%BD%86%E6%98%AF%E5%AE%83%E5%B0%86%E4%B8%8D%E4%BC%9A%E8%A2%AB%E5%AE%89%E8%A3%85/","summary":"\u003ch2 id=\"é—®é¢˜\"\u003eé—®é¢˜\u003c/h2\u003e\n\u003cp\u003eè¿™æ˜¯ä¸€ç±»é—®é¢˜ï¼Œä¸ä»…é™äºå®‰è£… gccï¼Œè¿™ç±»é—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºï¼Œ\u003cstrong\u003eUbuntu å·²å®‰è£…çš„è½¯ä»¶åŒ…ç‰ˆæœ¬é«˜ï¼Œè€Œæ‰€å®‰è£…è½¯ä»¶çš„ä¾èµ–åŒ…ç‰ˆæœ¬ä½\u003c/strong\u003eï¼Œè¿™æ ·åœ¨å®‰è£…é«˜ç‰ˆè½¯ä»¶æ—¶ï¼Œå·²æœ‰çš„è½¯ä»¶åŒ…ä¾èµ–ä½ è¦å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œä½ æŠŠè½¯ä»¶åŒ…å‡çº§äº†ï¼Œå¯èƒ½å°±ä¼šç ´åè¿™ä¸ªä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥\u003ccode\u003eapt-get\u003c/code\u003eä¸è®©ä½ å®‰è£…ã€‚\u003c/p\u003e","title":"è§£å†³ gcc-multilib : ä¾èµ–ï¼šgcc-4.8-multilib (\u003e= 4.8.2-5~) ä½†æ˜¯å®ƒå°†ä¸ä¼šè¢«å®‰è£…"},{"content":"ä¿ç•™ç°åœº æƒ³è¦åˆ†åˆ«ç¼–è¯‘ 32 ä½å’Œ 64 ä½çš„ç¨‹åºæ—¶ï¼Œgcc å‡ºç°äº†é”™è¯¯ï¼Œ\nIn file included from func_call.c:1: /usr/include/stdio.h:27:10: fatal error: bits/libc-header-start.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½• 27 | #include \u0026lt;bits/libc-header-start.h\u0026gt; | ^~~~~~~~~~~~~~~~~~~~~~~~~~ compilation terminated. é—®é¢˜è§£å†³ é—®é¢˜åŸå› çŒœæµ‹æ˜¯é»˜è®¤ gcc åªæä¾›å½“å‰æœºå™¨çš„ç‰ˆæœ¬ï¼Œè§£å†³å¦‚ä¸‹\napt install gcc-multilib ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3fatal-error-bits-libc-header-start-hno-such-file/","summary":"\u003ch2 id=\"ä¿ç•™ç°åœº\"\u003eä¿ç•™ç°åœº\u003c/h2\u003e\n\u003cp\u003eæƒ³è¦åˆ†åˆ«ç¼–è¯‘ 32 ä½å’Œ 64 ä½çš„ç¨‹åºæ—¶ï¼Œgcc å‡ºç°äº†é”™è¯¯ï¼Œ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eIn file included from func_call.c:1:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e/usr/include/stdio.h:27:10: fatal error: bits/libc-header-start.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e   27 | #include \u0026lt;bits/libc-header-start.h\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecompilation terminated.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"é—®é¢˜è§£å†³\"\u003eé—®é¢˜è§£å†³\u003c/h2\u003e\n\u003cp\u003eé—®é¢˜åŸå› çŒœæµ‹æ˜¯é»˜è®¤ gcc åªæä¾›å½“å‰æœºå™¨çš„ç‰ˆæœ¬ï¼Œè§£å†³å¦‚ä¸‹\u003c/p\u003e","title":"è§£å†³ fatal error: bits/libc-header-start.hï¼šno such file"},{"content":"æµç¨‹å›¾ å…ˆå¼€ä¸ªå¤´å§ï¼ŒæŠŠåˆ›å»ºæµç¨‹ç¨å¾®æ‹ä¸€ä¸‹ï¼Œæ‰¾åˆ°åˆ›å»ºè™šæ‹Ÿ CPU çš„æ¨¡å—ã€‚è‡³äºä¸­é—´çš„æµç¨‹è¿˜æ²¡æœ‰è¯¦ç»†åˆ†æï¼Œä¸‡äº‹å¼€å¤´éš¾ï¼Œå…ˆä¸Šæ‰‹å†è¯´å§ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image qemu_add_optsè§£æ qemu çš„å‘½ä»¤è¡Œ qemu_initå‡½æ•°ä¸­ä¸‹é¢è¿™ä¸€é•¿ä¸²å†…å®¹ï¼Œå°±æ˜¯åœ¨è§£æå‘½ä»¤è¡Œçš„å‚æ•°ã€‚\nqemu add opts (\u0026amp;qemu drive opts); qemu add drive opts(\u0026amp;qemu Legacy drive opts); qemu add drive opts (\u0026amp;qemu common drive opts); qemu add drive opts (\u0026amp;qemu drive opts); qemu add drive opts (sbdry runtime opts); qemu add opts (qemu chardev opts); qemu add opts (\u0026amp;qemu device opts); qemu add opts (\u0026amp;qemu netdev opts); qemu add opts (\u0026amp;qemu nic opts); qemu add opts (sqemu net opts qemu add opts (\u0026amp;qemu rtc opts) qemu add opts (\u0026amp;qemu global_opts); qemu add opts (\u0026amp;qemu mon opts); qemu add opts (sqemu trace opts); . . . ä¸ºä»€ä¹ˆæœ‰è¿™ä¹ˆå¤šçš„ optså‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œå®é™…è¿è¡Œä¸­åˆ›å»ºçš„kvmå‚æ•°ä¼šå¤æ‚Nå€ã€‚è¿™é‡Œæˆ‘ä»¬è´´ä¸€ä¸ªå¼€æºäº‘å¹³å°è½¯ä»¶ OpenStack åˆ›å»ºå‡ºæ¥çš„KVMçš„å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\nqemu-system-x86_64 -enable-kvm -name instance-00000024 -machine pc-i440fx-trusty,accel=kvm,usb=off -cpu SandyBridge,+erms,+smep,+fsgsbase,+pdpe1gb,+rdrand,+f16c,+osxsave,+dca,+pcid,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vme -m 2048 -smp 1,sockets=1,cores=1,threads=1 ...... -rtc base=utc,driftfix=slew -drive file=/var/lib/nova/instances/1f8e6f7e-5a70-4780-89c1-464dc0e7f308/disk,if=none,id=drive-virtio-disk0,format=qcow2,cache=none -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x4,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -netdev tap,fd=32,id=hostnet0,vhost=on,vhostfd=37 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=fa:16:3e:d1:2d:99,bus=pci.0,addr=0x3 -chardev file,id=charserial0,path=/var/lib/nova/instances/1f8e6f7e-5a70-4780-89c1-464dc0e7f308/console.log -vnc 0.0.0.0:12 -device cirrus-vga,id=video0,bus=pci.0,addr=0x2 -enable-kvmï¼šè¡¨ç¤ºå¯ç”¨ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ã€‚\n-name instance-00000024ï¼šè¡¨ç¤ºè™šæ‹Ÿæœºçš„åç§°ã€‚\n-machine pc-i440fx-trusty,accel=kvm,usb=offï¼šmachine æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å°±æ˜¯è®¡ç®—æœºä½“ç³»ç»“æ„ã€‚ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ä½“ç³»ç»“æ„çš„è¯ï¼Œå¯ä»¥è®¢é˜…æå®¢æ—¶é—´çš„å¦ä¸€ä¸ªä¸“æ ã€Šæ·±å…¥æµ…å‡ºè®¡ç®—æœºç»„æˆåŸç†ã€‹ã€‚ qemu ä¼šæ¨¡æ‹Ÿå¤šç§ä½“ç³»ç»“æ„ï¼Œå¸¸ç”¨çš„æœ‰æ™®é€š PC æœºï¼Œä¹Ÿå³ x86 çš„ 32 ä½æˆ–è€… 64 ä½çš„ä½“ç³»ç»“æ„ã€Mac ç”µè„‘ PowerPC çš„ä½“ç³»ç»“æ„ã€Sun çš„ä½“ç³»ç»“æ„ã€MIPS çš„ä½“ç³»ç»“æ„ï¼Œç²¾ç®€æŒ‡ä»¤é›†ã€‚å¦‚æœä½¿ç”¨ KVM hardware-assisted virtualizationï¼Œä¹Ÿå³ BIOS ä¸­ VD-T æ˜¯æ‰“å¼€çš„ï¼Œåˆ™å‚æ•°ä¸­ accel=kvmã€‚å¦‚æœä¸ä½¿ç”¨ hardware-assisted virtualizationï¼Œç”¨çš„æ˜¯çº¯æ¨¡æ‹Ÿï¼Œåˆ™æœ‰å‚æ•° accel = tcgï¼Œ-no-kvmã€‚\n-cpu SandyBridge,+erms,+smep,+fsgsbase,+pdpe1gb,+rdrand,+f16c,+osxsave,+dca,+pcid,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vmeï¼šè¡¨ç¤ºè®¾ç½® CPUï¼ŒSandyBridge æ˜¯ Intel å¤„ç†å™¨ï¼Œåé¢çš„åŠ å·éƒ½æ˜¯æ·»åŠ çš„ CPU çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šæ˜¾ç¤ºåœ¨ /proc/cpuinfo é‡Œé¢ã€‚\n-m 2048ï¼šè¡¨ç¤ºå†…å­˜ã€‚\n-smp 1,sockets=1,cores=1,threads=1ï¼šSMP æˆ‘ä»¬è§£æè¿‡ï¼Œå«å¯¹ç§°å¤šå¤„ç†å™¨ï¼Œå’ŒNUMA å¯¹åº”ã€‚qemu ä»¿çœŸäº†ä¸€ä¸ªå…·æœ‰ 1 ä¸ª vcpuï¼Œä¸€ä¸ª socketï¼Œä¸€ä¸ª coreï¼Œä¸€ä¸ª threads çš„å¤„ç†å™¨ã€‚ socketã€coreã€threads æ˜¯ä»€ä¹ˆæ¦‚å¿µå‘¢ï¼Ÿsocket å°±æ˜¯ä¸»æ¿ä¸Šæ’ CPU çš„æ§½çš„æ•°ç›®ï¼Œä¹Ÿå³å¸¸è¯´çš„â€œè·¯â€ï¼Œcore å°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¯´çš„â€œæ ¸â€ï¼Œå³åŒæ ¸ã€4 æ ¸ç­‰ã€‚thread å°±æ˜¯æ¯ä¸ª core çš„ç¡¬ä»¶çº¿ç¨‹æ•°ï¼Œå³è¶…çº¿ç¨‹ã€‚ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼ŒæŸä¸ªæœåŠ¡å™¨æ˜¯ï¼š2 è·¯ 4 æ ¸è¶…çº¿ç¨‹ï¼ˆä¸€èˆ¬é»˜è®¤ä¸º 2 ä¸ªçº¿ç¨‹ï¼‰ï¼Œé€šè¿‡ cat /proc/cpuinfoï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ 242=16 ä¸ªprocessorï¼Œå¾ˆå¤šäººä¹Ÿä¹ æƒ¯æˆä¸º 16 æ ¸äº†ã€‚\n-rtc base=utc,driftfix=slewï¼šè¡¨ç¤ºç³»ç»Ÿæ—¶é—´ç”±å‚æ•° -rtc æŒ‡å®šã€‚\n-device cirrus-vga,id=video0,bus=pci.0,addr=0x2ï¼šè¡¨ç¤ºæ˜¾ç¤ºå™¨ç”¨å‚æ•° -vga è®¾ç½®ï¼Œé»˜è®¤ä¸º cirrusï¼Œå®ƒæ¨¡æ‹Ÿäº† CL-GD5446PCI VGA cardã€‚\næœ‰å…³ç½‘å¡ï¼Œä½¿ç”¨ -net å‚æ•°å’Œ -deviceã€‚\nä» HOST è§’åº¦ï¼š-netdev tap,fd=32,id=hostnet0,vhost=on,vhostfd=37ã€‚\nä» GUEST è§’åº¦ï¼š-device virtio-net-pci,netdev=hostnet0,id=net0,mac=fa:16:3e:d1:2d:99,bus=pci.0,addr=0x3ã€‚\næœ‰å…³ç¡¬ç›˜ï¼Œä½¿ç”¨ -hda -hdbï¼Œæˆ–è€…ä½¿ç”¨ -drive å’Œ -deviceã€‚\nä» HOST è§’åº¦ï¼š-drive file=/var/lib/nova/instances/1f8e6f7e-5a70-4780-89c1-464dc0e7f308/disk,if=none,id=drive-virtio-disk0,format=qcow2,cache=none\nä» GUEST è§’åº¦ï¼š-device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x4,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1\n-vnc 0.0.0.0:12ï¼šè®¾ç½® VNCã€‚\nmodule_call_initåˆå§‹åŒ–æ‰€æœ‰æ¨¡å— int main() --\u0026gt; qemu_init() --\u0026gt; qemu_init_subsystems() --\u0026gt; module_call_init() å½“è™šæ‹ŸæœºçœŸçš„è¦ä½¿ç”¨ç‰©ç†èµ„æºçš„æ—¶å€™ï¼Œå¯¹ä¸‹é¢çš„ç‰©ç†æœºä¸Šçš„èµ„æºè¦è¿›è¡Œè¯·æ±‚ï¼Œæ‰€ä»¥å®ƒçš„å·¥ä½œæ¨¡å¼æœ‰ç‚¹å„¿ç±»ä¼¼æ“ä½œç³»ç»Ÿå¯¹æ¥é©±åŠ¨ã€‚é©±åŠ¨è¦ç¬¦åˆä¸€å®šçš„æ ¼å¼ï¼Œæ‰èƒ½ç®—æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªæ¨¡å—ã€‚åŒç†ï¼Œqemu ä¸ºäº†æ¨¡æ‹Ÿå„ç§å„æ ·çš„è®¾å¤‡ï¼Œä¹Ÿéœ€è¦ç®¡ç†å„ç§å„æ ·çš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—ä¹Ÿéœ€è¦ç¬¦åˆä¸€å®šçš„æ ¼å¼ã€‚\nå®šä¹‰ä¸€ä¸ª qemu æ¨¡å—ä¼šè°ƒç”¨ type_initã€‚ä¾‹å¦‚ï¼Œkvm çš„æ¨¡å—è¦åœ¨ accel/kvm/kvm-all.c æ–‡ä»¶é‡Œé¢å®ç°ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œæœ‰ä¸€è¡Œä¸‹é¢çš„ä»£ç ï¼š\nstatic const TypeInfo kvm_accel_type = { .name = TYPE_KVM_ACCEL, .parent = TYPE_ACCEL, .instance_init = kvm_accel_instance_init, .class_init = kvm_accel_class_init, .instance_size = sizeof(KVMState), }; static void kvm_type_init(void) { type_register_static(\u0026amp;kvm_accel_type); } type_init(kvm_type_init); æ‰¾åˆ°type_initçš„å®šä¹‰\n#define type_init(function) module_init(function, MODULE_INIT_QOM) ä»ä»£ç é‡Œé¢çš„å®šä¹‰æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œtype_init åé¢çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨ type_init å°±ç›¸å½“äºè°ƒç”¨ module_initï¼Œåœ¨è¿™é‡Œå‡½æ•°å°±æ˜¯ kvm_type_initï¼Œç±»å‹å°±æ˜¯ MODULE_INIT_QOMã€‚\nå†æŸ¥çœ‹ä¸€ä¸‹module_initçš„å®šä¹‰\n//include/qemu/module.h #define module_init(function, type) \\ static void __attribute__((constructor)) do_qemu_init_ ## function(void) \\ { \\ register_module_init(function, type); \\ } module_init æœ€ç»ˆè¦è°ƒç”¨ register_module_initã€‚å±äº MODULE_INIT_QOM è¿™ç§ç±»å‹çš„ï¼Œæœ‰ä¸€ä¸ª Module åˆ—è¡¨ ModuleTypeListï¼Œåˆ—è¡¨é‡Œé¢æ˜¯ä¸€é¡¹ä¸€é¡¹çš„ ModuleEntryã€‚KVM å°±æ˜¯å…¶ä¸­ä¸€é¡¹ï¼Œå¹¶ä¸”ä¼šåˆå§‹åŒ–æ¯ä¸€é¡¹çš„ init å‡½æ•°ä¸ºå‚æ•°è¡¨ç¤ºçš„å‡½æ•° fnï¼Œä¹Ÿå³ KVM è¿™ä¸ª module çš„ init å‡½æ•°å°±æ˜¯ kvm_type_initã€‚\nå½“ç„¶ï¼ŒMODULE_INIT_QOM è¿™ç§ç±»å‹ä¼šæœ‰å¾ˆå¤šå¾ˆå¤šçš„ moduleï¼Œä»åé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰è°ƒç”¨ type_init çš„åœ°æ–¹éƒ½æ³¨å†Œäº†ä¸€ä¸ª MODULE_INIT_QOM ç±»å‹çš„ Moduleã€‚\näº†è§£äº† Module çš„æ³¨å†Œæœºåˆ¶ï¼Œæˆ‘ä»¬ç»§ç»­å›åˆ° qemu_init_subsystems å‡½æ•°ä¸­ module_call_init çš„è°ƒç”¨ã€‚\nvoid qemu_init_subsystems(void) { Error *err; os_set_line_buffering(); module_call_init(MODULE_INIT_TRACE); qemu_init_cpu_list(); qemu_init_cpu_loop(); qemu_mutex_lock_iothread(); atexit(qemu_run_exit_notifiers); module_call_init(MODULE_INIT_QOM); module_call_init(MODULE_INIT_MIGRATION); . . . } // utils/module.c void module_call_init(module_init_type type) { ModuleTypeList *l; ModuleEntry *e; l = find_type(type); QTAILQ_FOREACH(e, l, node) { e-\u0026gt;init(); } } åœ¨ module_call_init ä¸­ï¼Œæˆ‘ä»¬ä¼šæ‰¾åˆ° MODULE_INIT_QOM è¿™ç§ç±»å‹å¯¹åº”çš„ ModuleTypeListï¼Œæ‰¾å‡ºåˆ—è¡¨ä¸­æ‰€æœ‰çš„ ModuleEntryï¼Œç„¶åè°ƒç”¨æ¯ä¸ª ModuleEntry çš„ init å‡½æ•°ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ module_call_init è°ƒç”¨çš„è¿™ä¸€æ­¥ï¼Œæ‰€æœ‰ Module çš„ init å‡½æ•°éƒ½å·²ç»è¢«è°ƒç”¨è¿‡äº†ã€‚\nåé¢æˆ‘ä»¬ä¼šçœ‹åˆ°å¾ˆå¤šçš„ Moduleï¼Œå½“æˆ‘ä»¬åé¢å†æ¬¡é‡åˆ°æ—¶ï¼Œéœ€è¦æ„è¯†åˆ°ï¼Œå®ƒçš„ init å‡½æ•°åœ¨è¿™é‡Œä¹Ÿè¢«è°ƒç”¨è¿‡äº†ã€‚è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä»¥å¯¹äº kvm è¿™ä¸ª module ä¸ºä¾‹å­ï¼Œçœ‹çœ‹å®ƒçš„ init å‡½æ•°éƒ½åšäº†å“ªäº›äº‹æƒ…ã€‚æˆ‘ä»¬ä¼šå‘ç°ï¼Œå…¶å®å®ƒè°ƒç”¨çš„æ˜¯ kvm_type_initã€‚\nstatic void kvm_type_init(void) { type_register_static(\u0026amp;kvm_accel_type); } TypeImpl *type_register_static(const TypeInfo *info) { return type_register(info); } TypeImpl *type_register(const TypeInfo *info) { assert(info-\u0026gt;parent); return type_register_internal(info); } static TypeImpl *type_register_internal(const TypeInfo *info) { TypeImpl *ti; ti = type_new(info); type_table_add(ti); return ti; } static TypeImpl *type_new(const TypeInfo *info) { TypeImpl *ti = g_malloc0(sizeof(*ti)); int i; if (type_table_lookup(info-\u0026gt;name) != NULL) { } ti-\u0026gt;name = g_strdup(info-\u0026gt;name); ti-\u0026gt;parent = g_strdup(info-\u0026gt;parent); ti-\u0026gt;class_size = info-\u0026gt;class_size; ti-\u0026gt;instance_size = info-\u0026gt;instance_size; ti-\u0026gt;class_init = info-\u0026gt;class_init; ti-\u0026gt;class_base_init = info-\u0026gt;class_base_init; ti-\u0026gt;class_data = info-\u0026gt;class_data; ti-\u0026gt;instance_init = info-\u0026gt;instance_init; ti-\u0026gt;instance_post_init = info-\u0026gt;instance_post_init; ti-\u0026gt;instance_finalize = info-\u0026gt;instance_finalize; ti-\u0026gt;abstract = info-\u0026gt;abstract; for (i = 0; info-\u0026gt;interfaces \u0026amp;\u0026amp; info-\u0026gt;interfaces[i].type; i++) { ti-\u0026gt;interfaces[i].typename = g_strdup(info-\u0026gt;interfaces[i].type); } ti-\u0026gt;num_interfaces = i; return ti; } static void type_table_add(TypeImpl *ti) { assert(!enumerating_types); g_hash_table_insert(type_table_get(), (void *)ti-\u0026gt;name, ti); } static GHashTable *type_table_get(void) { static GHashTable *type_table; if (type_table == NULL) { type_table = g_hash_table_new(g_str_hash, g_str_equal); } return type_table; } static const TypeInfo kvm_accel_type = { .name = TYPE_KVM_ACCEL, .parent = TYPE_ACCEL, .class_init = kvm_accel_class_init, .instance_size = sizeof(KVMState), }; è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼šè™šçº¿è¡¨ç¤ºè¿”å›\n\u003c!DOCTYPE html\u003e Responsive Image æ¯ä¸€ä¸ª Module æ—¢ç„¶è¦æ¨¡æ‹ŸæŸç§è®¾å¤‡ï¼Œé‚£åº”è¯¥å®šä¹‰ä¸€ç§ç±»å‹ TypeImpl æ¥è¡¨ç¤ºè¿™äº›è®¾å¤‡ï¼Œè¿™å…¶å®æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€è·¯ï¼Œåªä¸è¿‡è¿™é‡Œç”¨çš„æ˜¯çº¯ C è¯­è¨€çš„å®ç°ï¼Œæ‰€ä»¥éœ€è¦å˜ç›¸å®ç°ä¸€ä¸‹ç±»å’Œå¯¹è±¡ã€‚\nkvm_type_init ä¼šæ³¨å†Œ kvm_accel_typeï¼Œå®šä¹‰ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™æ ·åŠ¨æ€å®šä¹‰äº†ä¸€ä¸ªç±»ã€‚è¿™ä¸ªç±»çš„åå­—æ˜¯ TYPE_KVM_ACCELï¼Œè¿™ä¸ªç±»æœ‰çˆ¶ç±» TYPE_ACCELï¼Œè¿™ä¸ªç±»çš„åˆå§‹åŒ–åº”è¯¥è°ƒç”¨å‡½æ•° kvm_accel_class_initã€‚å¦‚æœç”¨è¿™ä¸ªç±»å£°æ˜ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å¤§å°åº”è¯¥æ˜¯ instance_sizeã€‚\nåœ¨ type_register_internal ä¸­ï¼Œæˆ‘ä»¬ä¼šæ ¹æ® kvm_accel_type è¿™ä¸ª TypeInfoï¼Œåˆ›å»ºä¸€ä¸ªTypeImpl æ¥è¡¨ç¤ºè¿™ä¸ªæ–°æ³¨å†Œçš„ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒTypeImpl æ‰æ˜¯æˆ‘ä»¬æƒ³è¦å£°æ˜çš„é‚£ä¸ª classã€‚åœ¨ qemu é‡Œé¢ï¼Œæœ‰ä¸€ä¸ªå…¨å±€çš„å“ˆå¸Œè¡¨ type_tableï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰å®šä¹‰çš„ç±»ã€‚åœ¨ type_new é‡Œé¢ï¼Œæˆ‘ä»¬å…ˆä»å…¨å±€è¡¨é‡Œé¢æ ¹æ®åå­—type_table_lookupæŸ¥æ‰¾æ‰¾è¿™ä¸ªç±»ã€‚å¦‚æœæ‰¾åˆ°ï¼Œè¯´æ˜è¿™ä¸ªç±»æ›¾ç»è¢«æ³¨å†Œè¿‡ï¼Œå°±æŠ¥é”™ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ–°çš„ç±»ï¼Œåˆ™å°† TypeInfo é‡Œé¢ä¿¡æ¯å¡«åˆ° TypeImpl é‡Œé¢ã€‚type_table_add ä¼šå°†è¿™ä¸ªç±»æ³¨å†Œåˆ°å…¨å±€çš„è¡¨é‡Œé¢ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ³¨æ„ï¼Œclass_init è¿˜æ²¡æœ‰è¢«è°ƒç”¨ï¼Œä¹Ÿå³è¿™ä¸ªç±»ç°åœ¨è¿˜å¤„äºçº¸é¢çš„çŠ¶æ€ã€‚\nè¿™ç‚¹æ›´åŠ åƒ Java çš„åå°„æœºåˆ¶äº†ã€‚åœ¨ Java é‡Œé¢ï¼Œå¯¹äºä¸€ä¸ªç±»ï¼Œé¦–å…ˆæˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™è¦å†™ä¸€ä¸ª class xxx çš„å®šä¹‰ï¼Œç¼–è¯‘å¥½å°±æ”¾åœ¨.class æ–‡ä»¶ä¸­ï¼Œè¿™ä¹Ÿæ˜¯å‡ºäºçº¸é¢çš„çŠ¶æ€ã€‚ç„¶åï¼ŒJava ä¼šæœ‰ä¸€ä¸ª Class å¯¹è±¡ï¼Œç”¨äºè¯»å–å’Œè¡¨ç¤ºè¿™ä¸ªçº¸é¢ä¸Šçš„ class xxxï¼Œå¯ä»¥ç”ŸæˆçœŸæ­£çš„å¯¹è±¡ã€‚\nç›¸åŒçš„è¿‡ç¨‹åœ¨åé¢çš„ä»£ç ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œclass_init ä¼šç”ŸæˆXXXClassï¼Œå°±ç›¸å½“äº Java é‡Œé¢çš„ Classå¯¹è±¡ï¼ŒTypeImpl è¿˜ä¼šæœ‰ä¸€ä¸ª instance_init å‡½æ•°ï¼Œç›¸å½“äºæ„é€ å‡½æ•°ï¼Œç”¨äºæ ¹æ® XXXClass ç”Ÿæˆ Objectï¼Œè¿™å°±ç›¸å½“äº Java åå°„é‡Œé¢æœ€ç»ˆåˆ›å»ºçš„å¯¹è±¡ã€‚å’Œæ„é€ å‡½æ•°å¯¹åº”çš„è¿˜æœ‰ instance_finalizeï¼Œç›¸å½“äºææ„å‡½æ•°ã€‚\nè¿™ä¸€å¥—åå°„æœºåˆ¶æ”¾åœ¨ qom æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå…¨ç§° QEMU Object Modelï¼Œä¹Ÿå³ç”¨ C å®ç°äº†ä¸€å¥—é¢å‘å¯¹è±¡çš„åå°„æœºåˆ¶ã€‚\nåˆå§‹åŒ– machine \u003c!DOCTYPE html\u003e Responsive Image //vl.c qemu_create_machine (select_machine()); åœ¨åˆ›å»º machine ä¹‹å‰ï¼Œå…ˆè¦é€šè¿‡select_machineç¡®å®šä¸€ä¸ªmachineã€‚select_machineåˆæ˜¯æ€ä¹ˆç¡®å®šçš„å‘¢ï¼Œè¿™å°±å’Œæˆ‘ä»¬å‘½ä»¤è¡Œçš„è¾“å…¥æœ‰å…³ï¼Œæ¯”å¦‚æˆ‘ä»¬-m spikeï¼Œé‚£ä¹ˆè¿™é‡Œå°±ä¼šé€‰æ‹©spikeä½œä¸ºmachineã€‚å®ƒçš„å®šä¹‰åœ¨hw/riscv/spike.cä¸­ã€‚\nåœ¨æºç æœ€åæœ‰è¿™ä¹ˆä¸€å¥ï¼Œä¼šå’Œæˆ‘ä»¬ä¸Šé¢è§£æçš„type_init æ˜¯ä¸€æ ·çš„ï¼Œåœ¨å…¨å±€çš„è¡¨é‡Œé¢æ³¨å†Œäº†ä¸€ä¸ªå…¨å±€çš„åå­—æ˜¯spikeçš„çº¸é¢ä¸Šçš„ classï¼Œä¹Ÿå³ TypeImplã€‚\ntype_init(spike_machine_init_reqister_types) ç°åœ¨å…¨å±€è¡¨ä¸­æœ‰è¿™ä¸ªçº¸é¢ä¸Šçš„ class äº†ã€‚æˆ‘ä»¬å›åˆ° select_machineã€‚\nåœ¨ select_machine ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ç”Ÿæˆ MachineClassã€‚ä¸€ç§æ–¹å¼æ˜¯ find_default_machineï¼Œæ‰¾ä¸€ä¸ªé»˜è®¤çš„ï¼›å¦ä¸€ç§æ–¹å¼æ˜¯ machine_parseï¼Œé€šè¿‡è§£æå‚æ•°ç”Ÿæˆ MachineClassã€‚æ— è®ºå“ªç§æ–¹å¼ï¼Œéƒ½ä¼šè°ƒç”¨ object_class_get_list è·å¾—ä¸€ä¸ª MachineClass çš„åˆ—è¡¨ï¼Œç„¶ååœ¨é‡Œé¢æ‰¾ã€‚\nstatic MachineClass *select_machine(void) { GSList *machines = object_class_get_list(TYPE_MACHINE, false); MachineClass *machine_class = find_default_machine(machines); const char *optarg; QemuOpts *opts; Location loc; loc_push_none(\u0026amp;loc); opts = qemu_get_machine_opts(); qemu_opts_loc_restore(opts); optarg = qemu_opt_get(opts, \u0026#34;type\u0026#34;); if (optarg) { machine_class = machine_parse(optarg, machines); } if (!machine_class) { error_report(\u0026#34;No machine specified, and there is no default\u0026#34;); error_printf(\u0026#34;Use -machine help to list supported machines\\n\u0026#34;); exit(1); } loc_pop(\u0026amp;loc); g_slist_free(machines); return machine_class; } static MachineClass *find_default_machine(GSList *machines) { GSList *el; MachineClass *default_machineclass = NULL; for (el = machines; el; el = el-\u0026gt;next) { MachineClass *mc = el-\u0026gt;data; if (mc-\u0026gt;is_default) { assert(default_machineclass == NULL \u0026amp;\u0026amp; \u0026#34;Multiple default machines\u0026#34;); default_machineclass = mc; } } return default_machineclass; } static MachineClass *machine_parse(const char *name, GSList *machines) { MachineClass *mc; GSList *el; if (is_help_option(name)) { printf(\u0026#34;Supported machines are:\\n\u0026#34;); machines = g_slist_sort(machines, machine_class_cmp); for (el = machines; el; el = el-\u0026gt;next) { MachineClass *mc = el-\u0026gt;data; if (mc-\u0026gt;alias) { printf(\u0026#34;%-20s %s (alias of %s)\\n\u0026#34;, mc-\u0026gt;alias, mc-\u0026gt;desc, mc-\u0026gt;name); } printf(\u0026#34;%-20s %s%s%s\\n\u0026#34;, mc-\u0026gt;name, mc-\u0026gt;desc, mc-\u0026gt;is_default ? \u0026#34; (default)\u0026#34; : \u0026#34;\u0026#34;, mc-\u0026gt;deprecation_reason ? \u0026#34; (deprecated)\u0026#34; : \u0026#34;\u0026#34;); } exit(0); } mc = find_machine(name, machines); if (!mc) { error_report(\u0026#34;unsupported machine type\u0026#34;); error_printf(\u0026#34;Use -machine help to list supported machines\\n\u0026#34;); exit(1); } return mc; } object_class_get_list å®šä¹‰å¦‚ä¸‹ï¼š\nGSList *object_class_get_list(const char *implements_type,bool include_abstract) { GSList *list = NULL; object_class_foreach(object_class_get_list_tramp, implements_type, include_abstract, \u0026amp;list); return list; } void object_class_foreach(void (*fn)(ObjectClass *klass, void *opaque), const char *implements_type, bool include_abstract, void *opaque) { OCFData data = { fn, implements_type, include_abstract, opaque }; enumerating_types = true; g_hash_table_foreach(type_table_get(), object_class_foreach_tramp, \u0026amp;data); enumerating_types = false; } åœ¨å…¨å±€è¡¨ type_table_get() ä¸­ï¼Œå¯¹äºæ¯ä¸€é¡¹ TypeImplï¼Œæˆ‘ä»¬éƒ½æ‰§è¡Œ object_class_foreach_trampã€‚\nstatic void object_class_foreach_tramp(gpointer key, gpointer value, gpointer opaque) { OCFData *data = opaque; TypeImpl *type = value; ObjectClass *k; type_initialize(type); k = type-\u0026gt;class; if (!data-\u0026gt;include_abstract \u0026amp;\u0026amp; type-\u0026gt;abstract) { return; } if (data-\u0026gt;implements_type \u0026amp;\u0026amp; !object_class_dynamic_cast(k, data-\u0026gt;implements_type)) { return; } data-\u0026gt;fn(k, data-\u0026gt;opaque); } åœ¨ object_class_foreach_tramp ä¸­ï¼Œä¼šè°ƒç”¨å°† type_initializeï¼Œè¿™é‡Œé¢ä¼šè°ƒç”¨ class_init å°†çº¸é¢ä¸Šçš„ class ä¹Ÿå³ TypeImpl å˜ä¸º ObjectClassï¼ŒObjectClass æ˜¯æ‰€æœ‰Class ç±»çš„ç¥–å…ˆï¼ŒMachineClass æ˜¯å®ƒçš„å­ç±»ã€‚\nå› ä¸ºåœ¨ machine çš„å‘½ä»¤è¡Œé‡Œé¢ï¼Œæˆ‘ä»¬æŒ‡å®šäº†åå­—ä¸ºspikeï¼Œå°±è‚¯å®šèƒ½å¤Ÿæ‰¾åˆ°æˆ‘ä»¬æ³¨å†Œè¿‡äº†çš„ TypeImplï¼Œå¹¶è°ƒç”¨å®ƒçš„ class_init å‡½æ•°ã€‚\næ‰€ä»¥ï¼Œå½“ select_machine æ‰§è¡Œå®Œæ¯•åï¼Œå°±æœ‰ä¸€ä¸ª MachineClass äº†ã€‚\næ¥ç€ï¼Œæˆ‘ä»¬å›åˆ° qemu_create_machine ä¸­çš„object_new_with_classã€‚è¿™å°±å¾ˆå¥½ç†è§£äº†ï¼ŒMachineClass æ˜¯ä¸€ä¸ª Class ç±»ï¼Œæ¥ä¸‹æ¥åº”è¯¥é€šè¿‡å®ƒç”Ÿæˆä¸€ä¸ª Instanceï¼Œä¹Ÿå³å¯¹è±¡ï¼Œè¿™å°±æ˜¯ object_new_with_class çš„ä½œç”¨ã€‚\nobject_new_with_class ä¸­ï¼ŒTypeImpl çš„ instance_init ä¼šè¢«è°ƒç”¨ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚current_machine å°±æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œå®ƒçš„ç±»å‹æ˜¯MachineStateã€‚\nObject *object_new_with_class(ObjectClass *klass) { return object_new_with_type(klass-\u0026gt;type); } static Object *object_new_with_type(Type type) { Object *obj; type_initialize(type); obj = g_malloc(type-\u0026gt;instance_size); object_initialize_with_type(obj, type-\u0026gt;instance_size, type); obj-\u0026gt;free = g_free; return obj; } è‡³æ­¤ï¼Œç»•äº†è¿™ä¹ˆå¤§ä¸€åœˆï¼Œæœ‰å…³ä½“ç³»ç»“æ„çš„å¯¹è±¡æ‰åˆ›å»ºå®Œæ¯•ï¼Œæ¥ä¸‹æ¥å¾ˆå¤šçš„è®¾å¤‡çš„åˆå§‹åŒ–ï¼ŒåŒ…æ‹¬ CPU å’Œå†…å­˜çš„åˆå§‹åŒ–ï¼Œéƒ½æ˜¯å›´ç»•ç€ä½“ç³»ç»“æ„çš„å¯¹è±¡æ¥çš„ï¼Œåé¢æˆ‘ä»¬ä¼šå¸¸å¸¸çœ‹åˆ°current_machineã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å‚è€ƒ Qemu CPU è™šæ‹ŸåŒ– - äººç”Ÿä¸€ä¸–ï¼Œè‰æœ¨ä¸€ç§‹ã€‚ - åšå®¢å›­ ã€åŸåˆ›ã€‘Linux è™šæ‹ŸåŒ– KVM-Qemu åˆ†æï¼ˆå››ï¼‰ä¹‹ CPU è™šæ‹ŸåŒ–ï¼ˆ2ï¼‰ - LoyenWang - åšå®¢å›­\n","permalink":"https://lifeislife.cn/posts/qemu%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E8%99%9A%E6%8B%9Fcpu%E5%88%9B%E5%BB%BA/","summary":"\u003ch2 id=\"æµç¨‹å›¾\"\u003eæµç¨‹å›¾\u003c/h2\u003e\n\u003cp\u003eå…ˆå¼€ä¸ªå¤´å§ï¼ŒæŠŠåˆ›å»ºæµç¨‹ç¨å¾®æ‹ä¸€ä¸‹ï¼Œæ‰¾åˆ°åˆ›å»ºè™šæ‹Ÿ CPU çš„æ¨¡å—ã€‚è‡³äºä¸­é—´çš„æµç¨‹è¿˜æ²¡æœ‰è¯¦ç»†åˆ†æï¼Œä¸‡äº‹å¼€å¤´éš¾ï¼Œå…ˆä¸Šæ‰‹å†è¯´å§ã€‚\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210901182329.svg\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210901182329.svg\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"QEMU æºç åˆ†æ-è™šæ‹Ÿ CPU åˆ›å»º"},{"content":"Qt é€šè¿‡QIODeviceæä¾›äº†å¯¹ I/O è®¾å¤‡çš„æŠ½è±¡ï¼Œè¿™äº›è®¾å¤‡å…·æœ‰è¯»å†™å­—èŠ‚å—çš„èƒ½åŠ›ã€‚ä¸‹é¢æ˜¯ I/O è®¾å¤‡çš„ç±»å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å›¾ä¸­æ‰€æ¶‰åŠçš„ç±»åŠå…¶ç”¨é€”ç®€è¦è¯´æ˜å¦‚ä¸‹ï¼š\nQIODeviceï¼šæ‰€æœ‰I/Oè®¾å¤‡ç±»çš„çˆ¶ç±»ï¼Œæä¾›äº†å­—èŠ‚å—è¯»å†™çš„é€šç”¨æ“ä½œä»¥åŠåŸºæœ¬æ¥å£ï¼› QFlieï¼šè®¿é—®æœ¬åœ°æ–‡ä»¶æˆ–è€…åµŒå…¥èµ„æºï¼› QTemporaryFileï¼šåˆ›å»ºå’Œè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼› QBufferï¼šè¯»å†™QByteArrayï¼› QProcessï¼šè¿è¡Œå¤–éƒ¨ç¨‹åºï¼Œå¤„ç†è¿›ç¨‹é—´é€šè®¯ï¼› QAbstractSocketï¼šæ‰€æœ‰å¥—æ¥å­—ç±»çš„çˆ¶ç±»ï¼› QTcpSocketï¼šTCPåè®®ç½‘ç»œæ•°æ®ä¼ è¾“ï¼› QUdpSocketï¼šä¼ è¾“ UDP æŠ¥æ–‡ï¼› QSslSocketï¼šä½¿ç”¨ SSL/TLS ä¼ è¾“æ•°æ®ï¼› QFileDeviceï¼šQt5 æ–°å¢åŠ çš„ç±»ï¼Œæä¾›äº†æœ‰å…³æ–‡ä»¶æ“ä½œçš„é€šç”¨å®ç°ã€‚\nQFile åŠå…¶ç›¸å…³ç±» æˆ‘ä»¬é€šå¸¸ä¼šå°†æ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ä¼ ç»™QFileçš„æ„é€ å‡½æ•°ã€‚ä¸è¿‡ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå¥½å¯¹è±¡æœ€åï¼Œä½¿ç”¨setFileName()æ¥ä¿®æ”¹ã€‚QFileéœ€è¦ä½¿ç”¨/ä½œä¸ºæ–‡ä»¶åˆ†éš”ç¬¦ï¼Œä¸è¿‡ï¼Œå®ƒä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢æˆæ“ä½œç³»ç»Ÿæ‰€éœ€è¦çš„å½¢å¼ã€‚ä¾‹å¦‚C:/windowsè¿™æ ·çš„è·¯å¾„åœ¨ Windows å¹³å°ä¸‹åŒæ ·æ˜¯å¯ä»¥çš„ã€‚\nQFileä¸»è¦æä¾›äº†æœ‰å…³æ–‡ä»¶çš„å„ç§æ“ä½œï¼Œæ¯”å¦‚æ‰“å¼€æ–‡ä»¶ã€å…³é—­æ–‡ä»¶ã€åˆ·æ–°æ–‡ä»¶ç­‰ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨QDataStreamæˆ–QTextStreamç±»æ¥è¯»å†™æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨QIODeviceç±»æä¾›çš„read()ã€readLine()ã€readAll()ä»¥åŠwrite()è¿™æ ·çš„å‡½æ•°ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ‰å…³æ–‡ä»¶æœ¬èº«çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶åã€æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„åå­—ç­‰ï¼Œåˆ™æ˜¯é€šè¿‡QFileInfoè·å–ï¼Œè€Œä¸æ˜¯è‡ªå·±åˆ†ææ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²ã€‚\nåœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨QFileåˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ã€‚è¿™ä¸ªæ–‡ä»¶åå­—æ˜¯ test.txtã€‚åªè¦å°†è¿™ä¸ªæ–‡ä»¶æ”¾åœ¨åŒæ‰§è¡Œè·¯å¾„ä¸€è‡´çš„ç›®å½•ä¸‹å³å¯ã€‚å¯ä»¥ä½¿ç”¨QDir::currentPath()æ¥è·å¾—åº”ç”¨ç¨‹åºæ‰§è¡Œæ—¶çš„å½“å‰è·¯å¾„ã€‚åªè¦å°†è¿™ä¸ªæ–‡ä»¶æ”¾åœ¨ä¸å½“å‰è·¯å¾„ä¸€è‡´çš„ç›®å½•ä¸‹å³å¯ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨open()å‡½æ•°æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰“å¼€å½¢å¼æ˜¯åªè¯»æ–¹å¼ï¼Œæ–‡æœ¬æ ¼å¼ã€‚è¿™ä¸ªç±»ä¼¼äºfopen()çš„ r è¿™æ ·çš„å‚æ•°ã€‚open()å‡½æ•°è¿”å›ä¸€ä¸ª bool ç±»å‹ï¼Œå¦‚æœæ‰“å¼€å¤±è´¥ï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°è¾“å‡ºä¸€æ®µæç¤ºç„¶åç¨‹åºé€€å‡ºã€‚å¦åˆ™ï¼Œæˆ‘ä»¬åˆ©ç”¨ while å¾ªç¯ï¼Œå°†æ¯ä¸€è¡Œè¯»åˆ°çš„å†…å®¹è¾“å‡ºã€‚\n#include \u0026lt;QWidget\u0026gt; #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QDebug\u0026gt; #include \u0026lt;QFile\u0026gt; #include \u0026lt;QFileInfo\u0026gt; #include \u0026lt;QMainWindow\u0026gt; int main(int argc, char *argv[]) { QApplication app(argc, argv); QFile file(\u0026#34;test.txt\u0026#34;); if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) { qDebug() \u0026lt;\u0026lt; \u0026#34;Open file failed.\u0026#34;; return -1; } else { while (!file.atEnd()) { qDebug() \u0026lt;\u0026lt; file.readLine(); } } QFileInfo info(file); qDebug() \u0026lt;\u0026lt; info.isDir(); //false qDebug() \u0026lt;\u0026lt; info.isExecutable(); //false qDebug() \u0026lt;\u0026lt; info.baseName(); //test qDebug() \u0026lt;\u0026lt; info.completeBaseName(); //test.txt qDebug() \u0026lt;\u0026lt; info.suffix(); //txt qDebug() \u0026lt;\u0026lt; info.completeSuffix(); //txt QFileInfo fi(\u0026#34;/tmp/archive.tar.gz\u0026#34;); QString base = fi.baseName(); // base = \u0026#34;archive\u0026#34; QString cbase = fi.completeBaseName(); // base = \u0026#34;archive.tar\u0026#34; QString ext = fi.suffix(); // ext = \u0026#34;gz\u0026#34; QString ext = fi.completeSuffix(); // ext = \u0026#34;tar.gz\u0026#34; return app.exec(); } äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™ æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†å­¦ä¹ QDataStreamçš„ä½¿ç”¨ä»¥åŠä¸€äº›æŠ€å·§ã€‚\nQDataStreamæä¾›äº†åŸºäºQIODeviceçš„äºŒè¿›åˆ¶æ•°æ®çš„åºåˆ—åŒ–ã€‚æ•°æ®æµæ˜¯ä¸€ç§äºŒè¿›åˆ¶æµï¼Œè¿™ç§æµå®Œå…¨ä¸ä¾èµ–äºåº•å±‚æ“ä½œç³»ç»Ÿã€CPU æˆ–è€…å­—èŠ‚é¡ºåºï¼ˆå¤§ç«¯æˆ–å°ç«¯ï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨å®‰è£…äº† Windows å¹³å°çš„ PC ä¸Šé¢å†™å…¥çš„ä¸€ä¸ªæ•°æ®æµï¼Œå¯ä»¥ä¸ç»è¿‡ä»»ä½•å¤„ç†ï¼Œç›´æ¥æ‹¿åˆ°è¿è¡Œäº† Solaris çš„ SPARC æœºå™¨ä¸Šè¯»å–ã€‚ç”±äºæ•°æ®æµå°±æ˜¯äºŒè¿›åˆ¶æµï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è¯»å†™æ²¡æœ‰ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰ã€‚\nQDataStreamæ—¢èƒ½å¤Ÿå­˜å– C++ åŸºæœ¬ç±»å‹ï¼Œå¦‚ intã€charã€short ç­‰ï¼Œä¹Ÿå¯ä»¥å­˜å–å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚è‡ªå®šä¹‰çš„ç±»ã€‚å®é™…ä¸Šï¼ŒQDataStreamå¯¹äºç±»çš„å­˜å‚¨ï¼Œæ˜¯å°†å¤æ‚çš„ç±»åˆ†å‰²ä¸ºå¾ˆå¤šåŸºæœ¬å•å…ƒå®ç°çš„ã€‚\nç»“åˆQIODeviceï¼ŒQDataStreamå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æ–‡ä»¶ã€ç½‘ç»œå¥—æ¥å­—ç­‰è¿›è¡Œè¯»å†™æ“ä½œã€‚\nQFile file(\u0026#34;file.dat\u0026#34;); file.open(QIODevice::WriteOnly); QDataStream out(\u0026amp;file); out \u0026lt;\u0026lt; QString(\u0026#34;the answer is\u0026#34;); out \u0026lt;\u0026lt; (qint32)42; åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ‰“å¼€ä¸€ä¸ªåä¸º file.dat çš„æ–‡ä»¶ï¼ˆæ³¨æ„ï¼Œæˆ‘ä»¬ä¸ºç®€å•èµ·è§ï¼Œå¹¶æ²¡æœ‰æ£€æŸ¥æ–‡ä»¶æ‰“å¼€æ˜¯å¦æˆåŠŸï¼Œè¿™åœ¨æ­£å¼ç¨‹åºä¸­æ˜¯ä¸å…è®¸çš„ï¼‰ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†åˆšåˆšåˆ›å»ºçš„fileå¯¹è±¡çš„æŒ‡é’ˆä¼ é€’ç»™ä¸€ä¸ªQDataStreamå®ä¾‹outã€‚ç±»ä¼¼äºstd::coutæ ‡å‡†è¾“å‡ºæµï¼ŒQDataStreamä¹Ÿé‡è½½äº†è¾“å‡ºé‡å®šå‘\u0026laquo;è¿ç®—ç¬¦ã€‚åé¢çš„ä»£ç å°±å¾ˆç®€å•äº†ï¼šå°†â€œthe answer isâ€å’Œæ•°å­—42è¾“å‡ºåˆ°æ•°æ®æµï¼ˆå¦‚æœä½ ä¸æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œè¿™å¯æ˜¯å®‡å®™ç»ˆæé—®é¢˜çš„ç­”æ¡ˆï¼Œè¯·è‡ªè¡Œæœç´¢ã€Šé“¶æ²³ç³»æ¼«æ¸¸æŒ‡å—ã€‹ï¼‰ã€‚ç”±äºæˆ‘ä»¬çš„ out å¯¹è±¡å»ºç«‹åœ¨fileä¹‹ä¸Šï¼Œå› æ­¤ç›¸å½“äºå°†å®‡å®™ç»ˆæé—®é¢˜çš„ç­”æ¡ˆå†™å…¥fileã€‚\néœ€è¦æŒ‡å‡ºä¸€ç‚¹ï¼šæœ€å¥½ä½¿ç”¨Qtæ•´å‹æ¥è¿›è¡Œè¯»å†™ï¼Œæ¯”å¦‚ç¨‹åºä¸­çš„qint32ã€‚è¿™ä¿è¯äº†åœ¨ä»»æ„å¹³å°å’Œä»»æ„ç¼–è¯‘å™¨éƒ½èƒ½å¤Ÿæœ‰ç›¸åŒçš„è¡Œä¸ºã€‚\næˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹ Qt æ˜¯å¦‚ä½•å­˜å‚¨æ•°æ®çš„ã€‚ä¾‹å¦‚char *å­—ç¬¦ä¸²ï¼Œåœ¨å­˜å‚¨æ—¶ï¼Œä¼šé¦–å…ˆå­˜å‚¨è¯¥å­—ç¬¦ä¸²åŒ…æ‹¬\\0ç»“æŸç¬¦çš„é•¿åº¦ï¼ˆ32ä½æ•´å‹ï¼‰ï¼Œç„¶åæ˜¯å­—ç¬¦ä¸²çš„å†…å®¹ä»¥åŠç»“æŸç¬¦\\0ã€‚åœ¨è¯»å–æ—¶ï¼Œå…ˆä»¥32ä½æ•´å‹è¯»å‡ºæ•´ä¸ªçš„é•¿åº¦ï¼Œç„¶åæŒ‰ç…§è¿™ä¸ªé•¿åº¦å–å‡ºæ•´ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹ã€‚\nä½†æ˜¯ï¼Œå¦‚æœä½ ç›´æ¥è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªç©ºç™½çš„ file.datï¼Œå¹¶æ²¡æœ‰å†™å…¥ä»»ä½•æ•°æ®ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„fileæ²¡æœ‰æ­£å¸¸å…³é—­ã€‚ä¸ºæ€§èƒ½èµ·è§ï¼Œæ•°æ®åªæœ‰åœ¨æ–‡ä»¶å…³é—­æ—¶æ‰ä¼šçœŸæ­£å†™å…¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æœ€åæ·»åŠ ä¸€è¡Œä»£ç ï¼š\nfile.close(); // å¦‚æœä¸æƒ³å…³é—­æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ file.flush(); é‡æ–°è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œä½ å°±å¾—åˆ°å®‡å®™ç»ˆæé—®é¢˜çš„ç­”æ¡ˆäº†ã€‚\næˆ‘ä»¬å·²ç»è·å¾—å®‡å®™ç»ˆæé—®é¢˜çš„ç­”æ¡ˆäº†ï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬è¦å°†è¿™ä¸ªç­”æ¡ˆè¯»å–å‡ºæ¥ï¼š\nQFile file(\u0026#34;file.dat\u0026#34;); file.open(QIODevice::ReadOnly); QDataStream in(\u0026amp;file); QString str; qint32 a; in \u0026gt;\u0026gt; str \u0026gt;\u0026gt; a; è¿™æ®µä»£ç æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ å¿…é¡»æŒ‰ç…§å†™å…¥çš„é¡ºåºï¼Œå°†æ•°æ®è¯»å–å‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºæ•°æ®å†™å…¥çš„é¡ºåºå¿…é¡»é¢„å…ˆå®šä¹‰å¥½ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå†™å…¥å­—ç¬¦ä¸²ï¼Œç„¶åå†™å…¥æ•°å­—ï¼Œé‚£ä¹ˆå°±é¦–å…ˆè¯»å‡ºæ¥çš„å°±æ˜¯å­—ç¬¦ä¸²ï¼Œç„¶åæ‰æ˜¯æ•°å­—ã€‚é¡ºåºé¢ å€’çš„è¯ï¼Œç¨‹åºè¡Œä¸ºæ˜¯ä¸ç¡®å®šçš„ï¼Œä¸¥é‡æ—¶ä¼šç›´æ¥é€ æˆç¨‹åºå´©æºƒã€‚\nç”±äºäºŒè¿›åˆ¶æµæ˜¯çº¯ç²¹çš„å­—èŠ‚æ•°æ®ï¼Œå¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœç¨‹åºä¸åŒç‰ˆæœ¬ä¹‹é—´æŒ‰ç…§ä¸åŒçš„æ–¹å¼è¯»å–ï¼ˆå‰é¢è¯´è¿‡ï¼ŒQt ä¿è¯è¯»å†™å†…å®¹çš„ä¸€è‡´ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯ä¸åŒ Qt ç‰ˆæœ¬ä¹‹é—´çš„ä¸€è‡´ï¼‰ï¼Œæ•°æ®å°±ä¼šå‡ºç°é”™è¯¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»æä¾›ä¸€ç§æœºåˆ¶æ¥ç¡®ä¿ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å¦‚ä¸‹çš„ä»£ç å†™å…¥ï¼š\nQFile file(\u0026#34;file.dat\u0026#34;); file.open(QIODevice::WriteOnly); QDataStream out(\u0026amp;file); // å†™å…¥é­”æœ¯æ•°å­—å’Œç‰ˆæœ¬ out \u0026lt;\u0026lt; (quint32)0xA0B0C0D0; out \u0026lt;\u0026lt; (qint32)123; out.setVersion(QDataStream::Qt_4_0); // å†™å…¥æ•°æ® out \u0026lt;\u0026lt; lots_of_interesting_data; æ‰€è°“é­”æœ¯æ•°å­—ï¼Œæ˜¯äºŒè¿›åˆ¶è¾“å‡ºä¸­ç»å¸¸ä½¿ç”¨çš„ä¸€ç§æŠ€æœ¯ã€‚äºŒè¿›åˆ¶æ ¼å¼æ˜¯äººä¸å¯è¯»çš„ï¼Œå¹¶ä¸”é€šå¸¸å…·æœ‰ç›¸åŒçš„åç¼€åï¼ˆæ¯”å¦‚ dat ä¹‹ç±»ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰åŠæ³•åŒºåˆ†ä¸¤ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å“ªä¸ªæ˜¯åˆæ³•çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å®šä¹‰çš„äºŒè¿›åˆ¶æ ¼å¼é€šå¸¸å…·æœ‰ä¸€ä¸ªé­”æœ¯æ•°å­—ï¼Œç”¨äºæ ‡è¯†æ–‡ä»¶çš„åˆæ³•æ€§ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶æœ€å¼€å§‹å†™å…¥ 0xA0B0C0D0ï¼Œåœ¨è¯»å–çš„æ—¶å€™é¦–å…ˆæ£€æŸ¥è¿™ä¸ªæ•°å­—æ˜¯ä¸æ˜¯ 0xA0B0C0D0ã€‚å¦‚æœä¸æ˜¯çš„è¯ï¼Œè¯´æ˜è¿™ä¸ªæ–‡ä»¶ä¸æ˜¯å¯è¯†åˆ«æ ¼å¼ï¼Œå› æ­¤æ ¹æœ¬ä¸éœ€è¦å»ç»§ç»­è¯»å–ã€‚ä¸€èˆ¬äºŒè¿›åˆ¶æ–‡ä»¶éƒ½ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªé­”æœ¯æ•°å­—ï¼Œä¾‹å¦‚ Java çš„ class æ–‡ä»¶çš„é­”æœ¯æ•°å­—å°±æ˜¯ 0xCAFEBABEï¼Œä½¿ç”¨äºŒè¿›åˆ¶æŸ¥çœ‹å™¨å°±å¯ä»¥æŸ¥çœ‹ã€‚é­”æœ¯æ•°å­—æ˜¯ä¸€ä¸ª 32 ä½çš„æ— ç¬¦å·æ•´å‹ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨quint32æ¥å¾—åˆ°ä¸€ä¸ªå¹³å°æ— å…³çš„ 32 ä½æ— ç¬¦å·æ•´å‹ã€‚\nout \u0026lt;\u0026lt; (qint32)123æ˜¯æ ‡è¯†æ–‡ä»¶çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬ç”¨é­”æœ¯æ•°å­—æ ‡è¯†æ–‡ä»¶çš„ç±»å‹ï¼Œä»è€Œåˆ¤æ–­æ–‡ä»¶æ˜¯ä¸æ˜¯åˆæ³•çš„ã€‚ä½†æ˜¯ï¼Œæ–‡ä»¶çš„ä¸åŒç‰ˆæœ¬ä¹‹é—´ä¹Ÿå¯èƒ½å­˜åœ¨å·®å¼‚ï¼šæˆ‘ä»¬å¯èƒ½åœ¨ç¬¬ä¸€ç‰ˆä¿å­˜æ•´å‹ï¼Œç¬¬äºŒç‰ˆå¯èƒ½ä¿å­˜å­—ç¬¦ä¸²ã€‚ä¸ºäº†æ ‡è¯†ä¸åŒçš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åªèƒ½å°†ç‰ˆæœ¬å†™å…¥æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œç°åœ¨æˆ‘ä»¬çš„ç‰ˆæœ¬æ˜¯ 123ã€‚\nout.setVersion(QDataStream::Qt_4_0)ä¸Šé¢ä¸€å¥æ˜¯æ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œä½†æ˜¯ï¼ŒQtä¸åŒç‰ˆæœ¬ä¹‹é—´çš„è¯»å–æ–¹å¼å¯èƒ½ä¹Ÿä¸ä¸€æ ·ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—æŒ‡å®šQt æŒ‰ç…§å“ªä¸ªç‰ˆæœ¬å»è¯»ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡å®šä»¥Qt 4.0 æ ¼å¼å»è¯»å–å†…å®¹ã€‚\nå½“æˆ‘ä»¬è¿™æ ·å†™å…¥æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬åœ¨è¯»å–çš„æ—¶å€™å°±éœ€è¦å¢åŠ ä¸€ç³»åˆ—çš„åˆ¤æ–­ï¼š\nQFile file(\u0026#34;file.dat\u0026#34;); file.open(QIODevice::ReadOnly); QDataStream in(\u0026amp;file); // æ£€æŸ¥é­”æœ¯æ•°å­— quint32 magic; in \u0026gt;\u0026gt; magic; if (magic != 0xA0B0C0D0) { return BAD_FILE_FORMAT; } // æ£€æŸ¥ç‰ˆæœ¬ qint32 version; in \u0026gt;\u0026gt; version; if (version \u0026lt; 100) { return BAD_FILE_TOO_OLD; } if (version \u0026gt; 123) { return BAD_FILE_TOO_NEW; } if (version \u0026lt;= 110) { in.setVersion(QDataStream::Qt_3_2); } else { in.setVersion(QDataStream::Qt_4_0); } // è¯»å–æ•°æ® in \u0026gt;\u0026gt; lots_of_interesting_data; if (version \u0026gt;= 120) { in \u0026gt;\u0026gt; data_new_in_version_1_2; } in \u0026gt;\u0026gt; other_interesting_data; æˆ‘ä»¬é€šè¿‡ä¸‹é¢ä¸€æ®µä»£ç çœ‹çœ‹ä»€ä¹ˆæ˜¯æµçš„å½¢å¼ï¼š\nQFile file(\u0026#34;file.dat\u0026#34;); file.open(QIODevice::ReadWrite); QDataStream stream(\u0026amp;file); QString str = \u0026#34;the answer is 42\u0026#34;; QString strout; stream \u0026lt;\u0026lt; str; file.flush(); stream \u0026gt;\u0026gt; strout; åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ï¼Œç´§æ¥ç€æŠŠæ•°æ®è¯»å‡ºæ¥ã€‚æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿè¿è¡Œä¹‹åä½ ä¼šå‘ç°ï¼Œstroutå®é™…æ˜¯ç©ºçš„ã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰è¯»å–å‡ºæ¥ï¼Ÿæˆ‘ä»¬ä¸æ˜¯å·²ç»æ·»åŠ äº†file.flush();è¯­å¥å—ï¼ŸåŸå› å¹¶ä¸åœ¨äºæ–‡ä»¶æœ‰æ²¡æœ‰å†™å…¥ï¼Œè€Œæ˜¯åœ¨äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯â€œæµâ€ã€‚æ‰€è°“æµï¼Œå°±åƒæ°´æµä¸€æ ·ï¼Œå®ƒçš„æ¸¸æ ‡ä¼šéšç€è¾“å‡ºå‘åç§»åŠ¨ã€‚å½“ä½¿ç”¨\u0026lt;\u0026lt;æ“ä½œç¬¦è¾“å‡ºä¹‹åï¼Œæµçš„æ¸¸æ ‡å·²ç»åˆ°äº†æœ€åï¼Œæ­¤æ—¶ä½ å†å»è¯»ï¼Œå½“ç„¶ä»€ä¹ˆä¹Ÿè¯»ä¸åˆ°äº†ã€‚æ‰€ä»¥ä½ éœ€è¦åœ¨è¾“å‡ºä¹‹åé‡æ–°æŠŠæ¸¸æ ‡è®¾ç½®ä¸º0çš„ä½ç½®æ‰èƒ½å¤Ÿç»§ç»­è¯»å–ã€‚å…·ä½“ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\nstream \u0026lt;\u0026lt; str; stream.device()-\u0026gt;seek(0); stream \u0026gt;\u0026gt; strout; æ–‡æœ¬æ–‡ä»¶è¯»å†™ ","permalink":"https://lifeislife.cn/posts/qt%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/","summary":"\u003cp\u003eQt é€šè¿‡\u003ccode\u003eQIODevice\u003c/code\u003eæä¾›äº†å¯¹ \u003ccode\u003eI/O\u003c/code\u003e è®¾å¤‡çš„æŠ½è±¡ï¼Œè¿™äº›è®¾å¤‡å…·æœ‰è¯»å†™å­—èŠ‚å—çš„èƒ½åŠ›ã€‚ä¸‹é¢æ˜¯ \u003ccode\u003eI/O\u003c/code\u003e è®¾å¤‡çš„ç±»å›¾ï¼š\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210831200940.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210831200940.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Qt æ–‡ä»¶ç³»ç»Ÿ"},{"content":"è™šæ‹ŸåŒ– è™šæ‹Ÿæœº QEMU å·¥ä½œåŸç† \u003c!DOCTYPE html\u003e Responsive Image å•çº¯ä½¿ç”¨ qemuï¼Œé‡‡ç”¨çš„æ˜¯å®Œå…¨è™šæ‹ŸåŒ–çš„æ¨¡å¼ã€‚qemu å‘ Guest OS æ¨¡æ‹Ÿ CPUï¼Œä¹Ÿæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼ŒGuestOS è®¤ä¸ºè‡ªå·±å’Œç¡¬ä»¶ç›´æ¥æ‰“äº¤é“ï¼Œå…¶å®æ˜¯åŒ qemu æ¨¡æ‹Ÿå‡ºæ¥çš„ç¡¬ä»¶æ‰“äº¤é“ï¼Œqemu ä¼šå°†è¿™äº›æŒ‡ä»¤è½¬è¯‘ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚ç”±äºæ‰€æœ‰çš„æŒ‡ä»¤éƒ½è¦ä» qemu é‡Œé¢è¿‡ä¸€æ‰‹ï¼Œå› è€Œæ€§èƒ½å°±ä¼šæ¯”è¾ƒå·®ã€‚\nå®Œå…¨è™šæ‹ŸåŒ–æ˜¯éå¸¸æ…¢çš„ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ Intel-VTï¼ŒAMD-Vï¼Œæ‰€ä»¥éœ€è¦ CPU ç¡¬ä»¶å¼€å¯è¿™ä¸ªæ ‡å¿—ä½ï¼Œä¸€èˆ¬åœ¨ BIOS é‡Œé¢è®¾ç½®ã€‚å½“ç¡®è®¤å¼€å§‹äº†æ ‡å¿—ä½ä¹‹åï¼Œé€šè¿‡ KVMï¼ŒGuestOS çš„ CPU æŒ‡ä»¤ä¸ç”¨ç»è¿‡ Qemu è½¬è¯‘ï¼Œç›´æ¥è¿è¡Œï¼Œå¤§å¤§æé«˜äº†é€Ÿåº¦ã€‚æ‰€ä»¥ï¼ŒKVM åœ¨å†…æ ¸é‡Œé¢éœ€è¦æœ‰ä¸€ä¸ªæ¨¡å—ï¼Œæ¥è®¾ç½®å½“å‰ CPU æ˜¯ Guest OS åœ¨ç”¨ï¼Œè¿˜æ˜¯ Host OS åœ¨ç”¨ã€‚\nå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å†…æ ¸æ¨¡å—ä¸­æ˜¯å¦æœ‰ KVM\nlsmod | grep kvm KVM å†…æ ¸æ¨¡å—é€šè¿‡ /dev/kvm æš´éœ²æ¥å£ï¼Œç”¨æˆ·æ€ç¨‹åºå¯ä»¥é€šè¿‡ ioctlæ¥è®¿é—®è¿™ä¸ªæ¥å£ã€‚Qemu å°† KVM æ•´åˆè¿›æ¥ï¼Œå°†æœ‰å…³ CPU æŒ‡ä»¤çš„éƒ¨åˆ†äº¤ç”±å†…æ ¸æ¨¡å—æ¥åšï¼Œå°±æ˜¯ qemu-kvm (qemu-system-XXX)ã€‚\nqemu å’Œ kvm æ•´åˆä¹‹åï¼ŒCPU çš„æ€§èƒ½é—®é¢˜è§£å†³äº†ã€‚å¦å¤– Qemu è¿˜ä¼šæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼Œå¦‚ç½‘ç»œå’Œç¡¬ç›˜ã€‚åŒæ ·ï¼Œå…¨è™šæ‹ŸåŒ–çš„æ–¹å¼ä¹Ÿä¼šå½±å“è¿™äº›è®¾å¤‡çš„æ€§èƒ½ã€‚\näºæ˜¯ï¼Œqemu é‡‡å–åŠè™šæ‹ŸåŒ–çš„æ–¹å¼ï¼Œè®© Guest OS åŠ è½½ç‰¹æ®Šçš„é©±åŠ¨æ¥åšè¿™ä»¶äº‹æƒ…ã€‚\nä¾‹å¦‚ï¼Œç½‘ç»œéœ€è¦åŠ è½½ virtio_netï¼Œå­˜å‚¨éœ€è¦åŠ è½½ virtio_blkï¼ŒGuest éœ€è¦å®‰è£…è¿™äº›åŠè™šæ‹ŸåŒ–é©±åŠ¨ï¼ŒGuestOS çŸ¥é“è‡ªå·±æ˜¯è™šæ‹Ÿæœºï¼Œæ‰€ä»¥æ•°æ®ä¼šç›´æ¥å‘é€ç»™åŠè™šæ‹ŸåŒ–è®¾å¤‡ï¼Œç»è¿‡ç‰¹æ®Šå¤„ç†ï¼ˆä¾‹å¦‚æ’é˜Ÿã€ç¼“å­˜ã€æ‰¹é‡å¤„ç†ç­‰æ€§èƒ½ä¼˜åŒ–æ–¹å¼ï¼‰ï¼Œæœ€ç»ˆå‘é€ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†æ€§èƒ½ã€‚\nè®¡ç®—è™šæ‹ŸåŒ–ä¹‹ CPU è®¡ç®—è™šæ‹ŸåŒ–ä¹‹å†…å­˜ ","permalink":"https://lifeislife.cn/posts/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%99%9A%E6%8B%9F%E5%8C%96/","summary":"\u003ch2 id=\"è™šæ‹ŸåŒ–\"\u003eè™šæ‹ŸåŒ–\u003c/h2\u003e\n\u003ch3 id=\"è™šæ‹Ÿæœº\"\u003eè™šæ‹Ÿæœº\u003c/h3\u003e\n\u003ch4 id=\"qemu-å·¥ä½œåŸç†\"\u003eQEMU å·¥ä½œåŸç†\u003c/h4\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210721140349.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210721140349.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eå•çº¯ä½¿ç”¨ qemuï¼Œé‡‡ç”¨çš„æ˜¯å®Œå…¨è™šæ‹ŸåŒ–çš„æ¨¡å¼ã€‚qemu å‘ Guest OS æ¨¡æ‹Ÿ CPUï¼Œä¹Ÿæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼ŒGuestOS è®¤ä¸ºè‡ªå·±å’Œç¡¬ä»¶ç›´æ¥æ‰“äº¤é“ï¼Œå…¶å®æ˜¯åŒ qemu æ¨¡æ‹Ÿå‡ºæ¥çš„ç¡¬ä»¶æ‰“äº¤é“ï¼Œqemu ä¼šå°†è¿™äº›æŒ‡ä»¤è½¬è¯‘ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚ç”±äºæ‰€æœ‰çš„æŒ‡ä»¤éƒ½è¦ä» qemu é‡Œé¢è¿‡ä¸€æ‰‹ï¼Œå› è€Œæ€§èƒ½å°±ä¼šæ¯”è¾ƒå·®ã€‚\u003c/p\u003e","title":"Linux æ“ä½œç³»ç»Ÿ-è™šæ‹ŸåŒ–"},{"content":"è¿›ç¨‹ æºç  //process.c #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;sys/types.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; extern int create_process (char* program, char** arg_list); int create_process (char* program, char** arg_list) { pid_t child_pid; child_pid = fork (); if (child_pid != 0) { return child_pid; } else { execvp (program, arg_list); abort (); } } åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºçš„å­ç¨‹åºè¿è¡Œäº†ä¸€ä¸ªæœ€æœ€ç®€å•çš„å‘½ä»¤ lsã€‚\n//createprocess.c #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;sys/types.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; extern int create_process (char* program, char** arg_list); int main () { char* arg_list[] = { \u0026#34;ls\u0026#34;, \u0026#34;-l\u0026#34;, \u0026#34;/etc/yum.repos.d/\u0026#34;, NULL }; create_process (\u0026#34;ls\u0026#34;, arg_list); return 0; } ç¼–è¯‘ CPU çœ‹ä¸æ‡‚æºç é‡Œçš„å‡½æ•°ï¼Œå‘½ä»¤ï¼ŒCPU åªè®¤äºŒè¿›åˆ¶æ•°æ®ï¼Œæ‰€ä»¥æºç éœ€è¦ç¿»è¯‘æˆ01äºŒè¿›åˆ¶æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯**ç¼–è¯‘ï¼ˆCompileï¼‰**çš„è¿‡ç¨‹ã€‚\nç¼–è¯‘å‡ºçš„æ–‡ä»¶å¥½æ¯”ä¸€ä¸ªå…¬å¸çš„é¡¹ç›®æ‰§è¡Œè®¡åˆ’ä¹¦ï¼Œä½ è¦æŠŠä¸€ä¸ªé¡¹ç›®æ‰§è¡Œå¥½ï¼Œè®¡åˆ’ä¹¦å¾—æœ‰ç« æ³•ï¼Œæœ‰ä¸€å®šæ ¼å¼ã€‚åœ¨ Linux ä¸‹ï¼ŒäºŒè¿›åˆ¶ç¨‹åºä¹Ÿæœ‰è¿™æ ·çš„æ ¼å¼ï¼Œå«ELFï¼ˆExecuteable and Linkable Formatï¼Œå¯æ‰§è¡Œä¸å¯é“¾æ¥æ ¼å¼ï¼‰ï¼Œè¿™ä¸ªæ ¼å¼å¯ä»¥æ ¹æ®ç¼–è¯‘çš„ç»“æœä¸åŒï¼Œåˆ†ä¸ºä¸åŒçš„æ ¼å¼ã€‚\nELF-å¯é‡å®šä½æ–‡ä»¶ ä¸‹å›¾å±•ç¤ºäº†å¦‚ä½•ä»æºç åˆ°äºŒè¿›åˆ¶æ–‡ä»¶çš„è½¬åŒ–\n\u003c!DOCTYPE html\u003e Responsive Image gcc -c -fPIC process.c gcc -c -fPIC createprocess.c -fPICä½œç”¨äºç¼–è¯‘é˜¶æ®µï¼Œå‘Šè¯‰ç¼–è¯‘å™¨äº§ç”Ÿä¸ä½ç½®æ— å…³ä»£ç  (Position-Independent Code)ã€‚äº§ç”Ÿçš„ä»£ç ä¸­ï¼Œæ²¡æœ‰ç»å¯¹åœ°å€ï¼Œå…¨éƒ¨ä½¿ç”¨ç›¸å¯¹åœ°å€ï¼Œæ•…è€Œä»£ç å¯ä»¥è¢«åŠ è½½å™¨åŠ è½½åˆ°å†…å­˜çš„ä»»æ„ä½ç½®ï¼Œéƒ½å¯ä»¥æ­£ç¡®çš„æ‰§è¡Œã€‚\nåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå…ˆåšé¢„å¤„ç†å·¥ä½œï¼Œä¾‹å¦‚å°†å¤´æ–‡ä»¶åµŒå…¥åˆ°æ­£æ–‡ä¸­ï¼Œå°†å®šä¹‰çš„å®å±•å¼€ï¼Œç„¶åå°±æ˜¯çœŸæ­£çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œæœ€ç»ˆç¼–è¯‘æˆä¸º.oæ–‡ä»¶ï¼Œè¿™å°±æ˜¯ELFçš„ç¬¬ä¸€ç§ç±»å‹ï¼Œå¯é‡å®šä½æ–‡ä»¶ï¼ˆRelocatable Fileï¼‰ã€‚æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image ELF æ–‡ä»¶çš„å¤´æ˜¯ç”¨äºæè¿°æ•´ä¸ªæ–‡ä»¶çš„ã€‚è¿™ä¸ªæ–‡ä»¶æ ¼å¼åœ¨å†…æ ¸ä¸­æœ‰å®šä¹‰ï¼Œåˆ†åˆ«ä¸º struct elf32_hdr å’Œ struct elf64_hdrã€‚\nsection å†…å®¹ .text æ”¾ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œä»£ç  .data å·²ç»åˆå§‹åŒ–å¥½çš„å…¨å±€å˜é‡ï¼ˆä¸´æ—¶å˜é‡æ”¾åœ¨æ ˆé‡Œï¼‰ .rodata åªè¯»æ•°æ®ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²å¸¸é‡ã€const çš„å˜é‡ .bss æœªåˆå§‹åŒ–å…¨å±€å˜é‡ï¼Œè¿è¡Œæ—¶ä¼šç½® 0 .symtab ç¬¦å·è¡¨ï¼Œè®°å½•çš„åˆ™æ˜¯å‡½æ•°å’Œå˜é‡ .strtab å­—ç¬¦ä¸²è¡¨ã€å­—ç¬¦ä¸²å¸¸é‡å’Œå˜é‡å ç¬¬ä¸€ç§ ELF æ–‡ä»¶å«å¯é‡å®šä½æ–‡ä»¶ï¼Œä¸ºå•¥å¯é‡å®šä½ï¼Ÿæˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™ä¸ªç¼–è¯‘å¥½çš„ä»£ç å’Œå˜é‡ï¼Œå°†æ¥åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„æ—¶å€™ï¼Œéƒ½æ˜¯è¦åŠ è½½åˆ°ä¸€å®šä½ç½®çš„ã€‚æ¯”å¦‚è¯´ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå…¶å®å°±æ˜¯è·³åˆ°è¿™ä¸ªå‡½æ•°æ‰€åœ¨çš„ä»£ç ä½ç½®æ‰§è¡Œï¼›å†æ¯”å¦‚ä¿®æ”¹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¹Ÿæ˜¯è¦åˆ°å˜é‡çš„ä½ç½®é‚£é‡Œå»ä¿®æ”¹ã€‚ä½†æ˜¯ç°åœ¨è¿™ä¸ªæ—¶å€™ï¼Œè¿˜æ˜¯.oæ–‡ä»¶ï¼Œä¸æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥è¿è¡Œçš„ç¨‹åºï¼Œè¿™é‡Œé¢åªæ˜¯éƒ¨åˆ†ä»£ç ç‰‡æ®µã€‚\nä¾‹å¦‚è¿™é‡Œçš„ create_processå‡½æ•°ï¼Œå°†æ¥è¢«è°è°ƒç”¨ï¼Œåœ¨å“ªé‡Œè°ƒç”¨éƒ½ä¸æ¸…æ¥šï¼Œå°±æ›´åˆ«æç¡®å®šä½ç½®äº†ã€‚æ‰€ä»¥ï¼Œ.oé‡Œé¢çš„ä½ç½®æ˜¯ä¸ç¡®å®šçš„ï¼Œä½†æ˜¯å¿…é¡»æ˜¯å¯é‡æ–°å®šä½çš„ï¼Œå› ä¸ºå®ƒå°†æ¥æ˜¯è¦åšå‡½æ•°åº“çš„å˜›ï¼Œå°±æ˜¯ä¸€å—ç –ï¼Œå“ªé‡Œéœ€è¦å“ªé‡Œæ¬ï¼Œæ¬åˆ°å“ªé‡Œå°±é‡æ–°å®šä½è¿™äº›ä»£ç ã€å˜é‡çš„ä½ç½®ã€‚\nELF-å¯æ‰§è¡Œæ–‡ä»¶ è¦è®©create_processè¿™ä¸ªå‡½æ•°ä½œä¸ºåº“æ–‡ä»¶é‡ç”¨ï¼Œéœ€è¦å°†å…¶å½¢æˆåº“æ–‡ä»¶ï¼Œæœ€ç®€å•çš„ç±»å‹æ˜¯é™æ€é“¾æ¥åº“.aæ–‡ä»¶ï¼Œå®ƒå°†ä¸€ç³»åˆ—.oæ–‡ä»¶å½’æ¡£ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚ä½¿ç”¨arå‘½ä»¤åˆ›å»º.aæ–‡ä»¶ã€‚ä½¿ç”¨æ–¹æ³•çœ‹è¿™é‡Œã€‚\nar cr libstaticprocess.a process.o è™½ç„¶è¿™é‡Œ libstaticprocess.a é‡Œé¢åªæœ‰ä¸€ä¸ª.oï¼Œä½†æ˜¯å®é™…æƒ…å†µå¯ä»¥æœ‰å¤šä¸ª.oã€‚å½“æœ‰ç¨‹åºè¦ä½¿ç”¨è¿™ä¸ªé™æ€è¿æ¥åº“çš„æ—¶å€™ï¼Œä¼šå°†.o æ–‡ä»¶æå–å‡ºæ¥ï¼Œé“¾æ¥åˆ°ç¨‹åºä¸­ã€‚\ngcc -o staticcreateprocess createprocess.o -L. -lstaticprocess -Lè¡¨ç¤ºåœ¨å½“å‰ç›®å½•ä¸‹æ‰¾.aæ–‡ä»¶ï¼Œ-lstaticprocess ä¼šè‡ªåŠ¨è¡¥å…¨æ–‡ä»¶åï¼Œæ¯”å¦‚åŠ å‰ç¼€ libï¼Œåç¼€.aï¼Œå˜æˆ libstaticprocess.aï¼Œæ‰¾åˆ°è¿™ä¸ª.aæ–‡ä»¶åï¼Œå°†é‡Œé¢çš„ process.o å–å‡ºæ¥ï¼Œå’Œ createprocess.o åšä¸€ä¸ªé“¾æ¥ï¼Œå½¢æˆäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ staticcreateprocessã€‚\nåœ¨é“¾æ¥è¿‡ç¨‹ä¸­ï¼Œé‡å®šä½å°±èµ·ä½œç”¨äº†ï¼Œåœ¨createprocess.oé‡Œè°ƒç”¨äº†create_processå‡½æ•°ï¼Œä½†æ˜¯ä¸èƒ½ç¡®å®šä½ç½®ï¼Œç°åœ¨å°†process.oåˆå¹¶è¿›æ¥ï¼Œå°±çŸ¥é“ä½ç½®äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿™ä¸ªæ ¼å¼å’Œ.o æ–‡ä»¶å¤§è‡´ç›¸ä¼¼ï¼Œè¿˜æ˜¯åˆ†æˆä¸€ä¸ªä¸ªçš„ sectionï¼Œå¹¶ä¸”è¢«èŠ‚å¤´è¡¨æè¿°ã€‚åªä¸è¿‡è¿™äº›section æ˜¯å¤šä¸ª.o æ–‡ä»¶åˆå¹¶è¿‡çš„ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶å·²ç»æ˜¯é©¬ä¸Šå°±å¯ä»¥åŠ è½½åˆ°å†…å­˜é‡Œé¢æ‰§è¡Œçš„æ–‡ä»¶äº†ï¼Œå› è€Œè¿™äº› section è¢«åˆ†æˆäº†éœ€è¦åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„ä»£ç æ®µã€æ•°æ®æ®µå’Œä¸éœ€è¦åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„éƒ¨åˆ†ï¼Œå°†å°çš„ section åˆæˆäº†å¤§çš„æ®µ segmentï¼Œå¹¶ä¸”åœ¨æœ€å‰é¢åŠ ä¸€ä¸ªæ®µå¤´è¡¨ï¼ˆSegment Header Tableï¼‰ã€‚\nåœ¨ä»£ç é‡Œé¢çš„å®šä¹‰ä¸º struct elf32_phdrå’Œ struct elf64_phdrï¼Œè¿™é‡Œé¢é™¤äº†æœ‰å¯¹äºæ®µçš„æè¿°ä¹‹å¤–ï¼Œæœ€é‡è¦çš„æ˜¯ p_vaddrï¼Œè¿™ä¸ªæ˜¯è¿™ä¸ªæ®µåŠ è½½åˆ°å†…å­˜çš„è™šæ‹Ÿåœ°å€ã€‚\nåœ¨ ELF å¤´é‡Œé¢ï¼Œæœ‰ä¸€é¡¹ e_entryï¼Œä¹Ÿæ˜¯ä¸ªè™šæ‹Ÿåœ°å€ï¼Œæ˜¯è¿™ä¸ªç¨‹åºè¿è¡Œçš„å…¥å£ã€‚\nELF-å…±äº«å¯¹è±¡æ–‡ä»¶ é™æ€åº“ä¸€æ—¦è¢«é“¾æ¥ï¼Œä»£ç å’Œå˜é‡çš„sectionä¼šè¢«åˆå¹¶ï¼Œæ‰€ä»¥è¿è¡Œæ—¶ä¸ä¾èµ–é™æ€åº“æ–‡ä»¶ï¼Œä½†æ˜¯ç¼ºç‚¹å°±æ˜¯ï¼Œç›¸åŒä»£ç æ®µè¢«å¤šä¸ªç¨‹åºä½¿ç”¨ï¼Œåœ¨å†…å­˜é‡Œä¼šæœ‰å¤šä»½ï¼Œè€Œä¸”é™æ€åº“æ›´æ–°éœ€è¦é‡æ–°ç¼–è¯‘ã€‚\nå› è€Œå°±å‡ºç°äº†å¦ä¸€ç§ï¼ŒåŠ¨æ€é“¾æ¥åº“ï¼ˆShared Librariesï¼‰ï¼Œä¸ä»…ä»…æ˜¯ä¸€ç»„å¯¹è±¡æ–‡ä»¶çš„ç®€å•å½’æ¡£ï¼Œè€Œæ˜¯å¤šä¸ªå¯¹è±¡æ–‡ä»¶çš„é‡æ–°ç»„åˆï¼Œå¯è¢«å¤šä¸ªç¨‹åºå…±äº«ã€‚\ngcc -shared -fPIC -o libdynamicprocess.so process.o å½“ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“è¢«é“¾æ¥åˆ°ä¸€ä¸ªç¨‹åºæ–‡ä»¶ä¸­çš„æ—¶å€™ï¼Œæœ€åçš„ç¨‹åºæ–‡ä»¶å¹¶ä¸åŒ…æ‹¬åŠ¨æ€é“¾æ¥åº“ä¸­çš„ä»£ç ï¼Œè€Œä»…ä»…åŒ…æ‹¬å¯¹åŠ¨æ€é“¾æ¥åº“çš„å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¿å­˜åŠ¨æ€é“¾æ¥åº“çš„å…¨è·¯å¾„ï¼Œä»…ä»…ä¿å­˜åŠ¨æ€é“¾æ¥åº“çš„åç§°ã€‚\ngcc -o dynamiccreateprocess createprocess.o -L. -ldynamicprocess å½“è¿è¡Œè¿™ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œé¦–å…ˆå¯»æ‰¾åŠ¨æ€é“¾æ¥åº“ï¼Œç„¶ååŠ è½½å®ƒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿåœ¨ /lib å’Œ/usr/lib æ–‡ä»¶å¤¹ä¸‹å¯»æ‰¾åŠ¨æ€é“¾æ¥åº“ã€‚å¦‚æœæ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥è®¾å®š LD_LIBRARY_PATHç¯å¢ƒå˜é‡ï¼Œç¨‹åºè¿è¡Œæ—¶ä¼šåœ¨æ­¤ç¯å¢ƒå˜é‡æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸‹å¯»æ‰¾åŠ¨æ€é“¾æ¥åº“ã€‚\n# export LD_LIBRARY_PATH=. # ./dynamiccreateprocess # total 40 -rw-r--r--. 1 root root 1572 Oct 24 18:38 CentOS-Base.repo ...... åŠ¨æ€é“¾æ¥åº“ï¼Œå°±æ˜¯ELFçš„ç¬¬ä¸‰ç§ç±»å‹ï¼Œå…±äº«å¯¹è±¡æ–‡ä»¶ï¼ˆShared Objectï¼‰ã€‚\næ–‡ä»¶æ ¼å¼å’Œä¸Šä¸¤ç§æ–‡ä»¶ç¨æœ‰ä¸åŒï¼Œé¦–å…ˆï¼Œå¤šäº†ä¸€ä¸ª.interpçš„ Segmentï¼Œè¿™é‡Œé¢æ˜¯ ld-linux.soï¼Œè¿™æ˜¯åŠ¨æ€é“¾æ¥å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿è¡Œæ—¶çš„é“¾æ¥åŠ¨ä½œéƒ½æ˜¯å®ƒåšçš„ã€‚\nå¦å¤–ï¼ŒELFæ–‡ä»¶ä¸­è¿˜å¤šäº†ä¸¤ä¸ªsectionï¼Œä¸€ä¸ªæ˜¯.pltï¼Œè¿‡ç¨‹é“¾æ¥è¡¨ï¼ˆProcedure Linkage Tableï¼ŒPLTï¼‰ï¼Œä¸€ä¸ªæ˜¯ã€‚got.pltï¼Œå…¨å±€åç§»é‡è¡¨ï¼ˆGlobal Offset Tableï¼ŒGOTï¼‰ã€‚\nè¿è¡Œ åœ¨å†…æ ¸ä¸­ï¼Œæœ‰linux_binfmt elf_formatæ•°æ®ç»“æ„å®šä¹‰äº†åŠ è½½ ELF çš„æ–¹æ³•ï¼Œä½¿ç”¨load_elf_binaryåŠ è½½äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¯¥å‡½æ•°ç”±do_execveè°ƒç”¨ï¼Œå­¦è¿‡ç³»ç»Ÿè°ƒç”¨çŸ¥é“execè°ƒç”¨äº†do_execveå‡½æ•°ã€‚æ‰€ä»¥æµç¨‹ä¸º\nexec-\u0026gt;do_execve-\u0026gt;load_elf_binary è¿›ç¨‹æ ‘ æ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯ä»çˆ¶è¿›ç¨‹ fork æ¥çš„ï¼Œç¥–å®—è¿›ç¨‹å°±æ˜¯init è¿›ç¨‹ã€‚\nç³»ç»Ÿå¯åŠ¨ä¹‹åï¼Œinit è¿›ç¨‹ä¼šå¯åŠ¨å¾ˆå¤šçš„daemon è¿›ç¨‹ï¼Œä¸ºç³»ç»Ÿè¿è¡Œæä¾›æœåŠ¡ï¼Œç„¶åå°±æ˜¯å¯åŠ¨ gettyï¼Œè®©ç”¨æˆ·ç™»å½•ï¼Œç™»å½•åè¿è¡Œ shellï¼Œç”¨æˆ·å¯åŠ¨çš„è¿›ç¨‹éƒ½æ˜¯é€šè¿‡ shellè¿è¡Œçš„ï¼Œä»è€Œå½¢æˆäº†ä¸€æ£µè¿›ç¨‹æ ‘ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡ ps -efå‘½ä»¤æŸ¥çœ‹å½“å‰ç³»ç»Ÿå¯åŠ¨çš„è¿›ç¨‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ‰ä¸‰ç±»è¿›ç¨‹ã€‚PID 1 çš„è¿›ç¨‹å°±æ˜¯æˆ‘ä»¬çš„initè¿›ç¨‹ systemdï¼ŒPID 2 çš„è¿›ç¨‹æ˜¯å†…æ ¸çº¿ç¨‹ kthreaddã€‚\nå†…æ ¸æ€è¿›ç¨‹çš„PPIDç¥–å…ˆè¿›ç¨‹éƒ½æ˜¯ 2 å·è¿›ç¨‹ï¼Œç”¨æˆ·æ€è¿›ç¨‹ç¥–å…ˆè¿›ç¨‹éƒ½æ˜¯ 1 å·è¿›ç¨‹ï¼Œttyåˆ—æ˜¯é—®å·çš„ï¼Œè¯´æ˜æ˜¯åå°æœåŠ¡è¿›ç¨‹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿›ç¨‹æ•°æ®ç»“æ„ åœ¨ Linux é‡Œé¢ï¼Œæ— è®ºæ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹ï¼Œåˆ°äº†å†…æ ¸é‡Œé¢ï¼Œæˆ‘ä»¬ç»Ÿä¸€éƒ½å«ä»»åŠ¡ï¼ˆTaskï¼‰ï¼Œç”±ä¸€ä¸ªç»Ÿä¸€çš„ç»“æ„task_structè¿›è¡Œç®¡ç†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ¯ä¸ªä»»åŠ¡åº”è¯¥åŒ…å«çš„å­—æ®µï¼š\nä»»åŠ¡ ID pid_t pid; #process id pid_t tgid; #thread group ID struct task_struct *group_leader; ä¸ºä½•è¦æœ‰è¿™ä¹ˆå¤š IDï¼Œä¸€ä¸ªä¸å¤Ÿå—ï¼Ÿ\nå¯ä»¥æ–¹ä¾¿ä»»åŠ¡å±•ç¤ºï¼Œæ¯”å¦‚åœ¨å‘½ä»¤è¡Œä¸­ ps æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œåªæ˜¾ç¤ºpid_t pidï¼Œè€Œä¸ä¼šæŠŠæ‰€æœ‰å†…éƒ¨çº¿ç¨‹æ‘Šå¼€å±•ç¤ºï¼Œè¿™æ ·å¤ªç¢çœ¼ã€‚ æ–¹ä¾¿ä¸‹è¾¾å‘½ä»¤ï¼Œå½“æˆ‘ kill ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¯¹æ•´ä¸ªè¿›ç¨‹å‘é€ä¿¡å·ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸€äº›å‘½ä»¤åªéœ€è¦å¯¹æŸä¸ªçº¿ç¨‹å‘é€ä¿¡å·ã€‚ ä¿¡å·å¤„ç† /* Signal handlers: */ struct signal_struct *signal; struct sighand_struct *sighand; sigset_t blocked; sigset_t real_blocked; sigset_t saved_sigmask; struct sigpending pending; unsigned long sas_ss_sp; size_t sas_ss_size; unsigned int sas_ss_flags; è¿™é‡Œå®šä¹‰äº†å“ªäº›ä¿¡å·è¢«é˜»å¡æš‚ä¸å¤„ç†ï¼ˆblockedï¼‰ï¼Œå“ªäº›ä¿¡å·å°šç­‰å¾…å¤„ç†ï¼ˆpendingï¼‰ï¼Œå“ªäº›ä¿¡å·æ­£åœ¨é€šè¿‡ä¿¡å·å¤„ç†å‡½æ•°è¿›è¡Œå¤„ç†ï¼ˆsighandï¼‰ã€‚å¤„ç†çš„ç»“æœå¯ä»¥æ˜¯å¿½ç•¥ï¼Œå¯ä»¥æ˜¯ç»“æŸè¿›ç¨‹ç­‰ç­‰ã€‚\nä»»åŠ¡çŠ¶æ€ volatile long state; /* -1 unrunnable, 0 runnable, \u0026gt;0 stopped */ int exit_state; unsigned int flags; stateå¯å–å€¼å®šä¹‰å¦‚ä¸‹\n/* Used in tsk-\u0026gt;state: */ #define TASK_RUNNING 0 #define TASK_INTERRUPTIBLE 1 #define TASK_UNINTERRUPTIBLE 2 #define __TASK_STOPPED 4 #define __TASK_TRACED 8 /* Used in tsk-\u0026gt;exit_state: */ #define EXIT_DEAD 16 #define EXIT_ZOMBIE 32 #define EXIT_TRACE (EXIT_ZOMBIE | EXIT_DEAD) /* Used in tsk-\u0026gt;state again: */ #define TASK_DEAD 64 #define TASK_WAKEKILL 128 #define TASK_WAKING 256 #define TASK_PARKED 512 #define TASK_NOLOAD 1024 #define TASK_NEW 2048 #define TASK_STATE_MAX 4096 å¯ä»¥å‘ç° Linux é€šè¿‡ bitset æ–¹å¼è®¾ç½®çŠ¶æ€ï¼Œå½“å‰ä»€ä¹ˆçŠ¶æ€ï¼Œå“ªä¸€ä½å°±ç½® 1ã€‚\nè¿›ç¨‹è°ƒåº¦ è¿›ç¨‹çš„çŠ¶æ€åˆ‡æ¢å¾€å¾€æ¶‰åŠè°ƒåº¦ï¼Œä¸‹é¢è¿™äº›å­—æ®µéƒ½æ˜¯ç”¨äºè°ƒåº¦çš„ã€‚\n// æ˜¯å¦åœ¨è¿è¡Œé˜Ÿåˆ—ä¸Š int on_rq; // ä¼˜å…ˆçº§ int prio; int static_prio; int normal_prio; unsigned int rt_priority; // è°ƒåº¦å™¨ç±» const struct sched_class *sched_class; // è°ƒåº¦å®ä½“ struct sched_entity se; struct sched_rt_entity rt; struct sched_dl_entity dl; // è°ƒåº¦ç­–ç•¥ unsigned int policy; // å¯ä»¥ä½¿ç”¨å“ªäº› CPU int nr_cpus_allowed; cpumask_t cpus_allowed; struct sched_info sched_info; è¿è¡Œç»Ÿè®¡ä¿¡æ¯ u64 utime;// ç”¨æˆ·æ€æ¶ˆè€—çš„ CPU æ—¶é—´ u64 stime;// å†…æ ¸æ€æ¶ˆè€—çš„ CPU æ—¶é—´ unsigned long nvcsw;// è‡ªæ„¿ (voluntary) ä¸Šä¸‹æ–‡åˆ‡æ¢è®¡æ•° unsigned long nivcsw;// éè‡ªæ„¿ (involuntary) ä¸Šä¸‹æ–‡åˆ‡æ¢è®¡æ•° u64 start_time;// è¿›ç¨‹å¯åŠ¨æ—¶é—´ï¼Œä¸åŒ…å«ç¡çœ æ—¶é—´ u64 real_start_time;// è¿›ç¨‹å¯åŠ¨æ—¶é—´ï¼ŒåŒ…å«ç¡çœ æ—¶é—´ è¿›ç¨‹äº²ç¼˜å…³ç³» è¿›ç¨‹æœ‰æ£µè¿›ç¨‹æ ‘ï¼Œæ‰€ä»¥æœ‰äº²ç¼˜å…³ç³»ã€‚\nstruct task_struct __rcu *real_parent; /* real parent process */ struct task_struct __rcu *parent; /* recipient of SIGCHLD, wait4() reports */ struct list_head children; /* list of my children */ struct list_head sibling; /* linkage in my parent\u0026#39;s children list */ é€šå¸¸æƒ…å†µä¸‹ï¼Œreal_parent å’Œ parent æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¹Ÿä¼šæœ‰å¦å¤–çš„æƒ…å†µå­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œbash åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£è¿›ç¨‹çš„ parent å’Œ real_parent å°±éƒ½æ˜¯ bashã€‚å¦‚æœåœ¨ bash ä¸Šä½¿ç”¨ GDB æ¥ debug ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªæ—¶å€™ GDB æ˜¯ real_parentï¼Œbash æ˜¯è¿™ä¸ªè¿›ç¨‹çš„ parentã€‚\nè¿›ç¨‹æƒé™ /* Objective and real subjective task credentials (COW): */ const struct cred __rcu *real_cred; /* Effective (overridable) subjective task credentials (COW): */ const struct cred __rcu real_cred å°±æ˜¯è¯´æ˜è°èƒ½æ“ä½œæˆ‘è¿™ä¸ªè¿›ç¨‹ï¼Œè€Œ cred å°±æ˜¯è¯´æ˜æˆ‘è¿™ä¸ªè¿›ç¨‹èƒ½å¤Ÿæ“ä½œè°ã€‚\næ€»ç»“åˆ°ä¸€èµ·ï¼Œtask_structç»“æ„å›¾å¦‚ä¸‹ï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/","summary":"\u003ch2 id=\"è¿›ç¨‹\"\u003eè¿›ç¨‹\u003c/h2\u003e\n\u003ch3 id=\"æºç \"\u003eæºç \u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-C++\" data-lang=\"C++\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e//process.c\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;stdio.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;stdlib.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;sys/types.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;unistd.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eextern\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_process\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eprogram\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e \u003cspan class=\"n\"\u003earg_list\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_process\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eprogram\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e \u003cspan class=\"n\"\u003earg_list\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003epid_t\u003c/span\u003e \u003cspan class=\"n\"\u003echild_pid\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003echild_pid\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efork\u003c/span\u003e \u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003echild_pid\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003echild_pid\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003eexecvp\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eprogram\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003earg_list\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003eabort\u003c/span\u003e \u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºçš„å­ç¨‹åºè¿è¡Œäº†ä¸€ä¸ªæœ€æœ€ç®€å•çš„å‘½ä»¤ \u003ccode\u003els\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-C++\" data-lang=\"C++\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e//createprocess.c\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;stdio.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;stdlib.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;sys/types.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;unistd.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eextern\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_process\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eprogram\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e \u003cspan class=\"n\"\u003earg_list\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003earg_list\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"s\"\u003e\u0026#34;ls\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"s\"\u003e\u0026#34;-l\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"s\"\u003e\u0026#34;/etc/yum.repos.d/\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eNULL\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003ecreate_process\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;ls\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003earg_list\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"ç¼–è¯‘\"\u003eç¼–è¯‘\u003c/h3\u003e\n\u003cp\u003eCPU çœ‹ä¸æ‡‚æºç é‡Œçš„å‡½æ•°ï¼Œå‘½ä»¤ï¼ŒCPU åªè®¤äºŒè¿›åˆ¶æ•°æ®ï¼Œæ‰€ä»¥æºç éœ€è¦ç¿»è¯‘æˆ\u003ccode\u003e01\u003c/code\u003eäºŒè¿›åˆ¶æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯**ç¼–è¯‘ï¼ˆCompileï¼‰**çš„è¿‡ç¨‹ã€‚\u003c/p\u003e","title":"Linux æ“ä½œç³»ç»Ÿ-è¿›ç¨‹ç®¡ç†"},{"content":"Tips ç¼©å†™æ³¨é‡Š CSAPPï¼šComputer Systems A Programmerâ€™s Perspectiveï¼ˆæ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼‰ã€‚CSAPPï¼ˆCï¼šP166ï¼ŒOï¼šP278ï¼‰è¡¨ç¤ºä¹¦æœ¬çš„ä¸­æ–‡ç‰ˆç¬¬ 166 é¡µï¼Œè‹±æ–‡åŸç‰ˆç¬¬ 278 é¡µã€‚\nå¯„å­˜å™¨ä¿¡æ¯ äº†è§£å¯„å­˜å™¨çš„åŸºæœ¬ç”¨é€”ï¼Œçœ‹åˆ°ä¸€ä¸ªæ±‡ç¼–ä»£ç ï¼Œå¯ä»¥å¤§æ¦‚äº†è§£è¿™ä¸ªå¯„å­˜å™¨æ˜¯åœ¨æ ˆä¸­ä½¿ç”¨çš„ï¼Œè¿˜æ˜¯ä¿å­˜å‚æ•°çš„ï¼Œæ˜¯è°ƒç”¨è€…ä¿å­˜ï¼Œè¿˜æ˜¯è¢«è°ƒç”¨è€…ä¿å­˜ã€‚ \u003c!DOCTYPE html\u003e Responsive Image GDB è°ƒè¯•è¿‡ç¨‹ç”¨åˆ°çš„ GDB å‘½ä»¤å¯ä»¥å…ˆå‚è€ƒGDB è°ƒè¯•å…¥é—¨è¿™ç¯‡æ–‡ç« ã€‚æ–‡ä¸­æ‰€ç”¨ä¾‹å­ä¹Ÿæ˜¯æ‘˜è‡ªä¸ BombLab çš„æºç ï¼Œæ›´å®¹æ˜“ç†è§£å¦‚ä½•ä½¿ç”¨ã€‚è¿˜æœ‰ä¸€å®šæ¯”è¾ƒé‡è¦çš„æ˜¯ï¼Œå¦‚ä½•ä½¿ç”¨ gdb å¸¦å‚æ•°è°ƒè¯•ã€‚ä¸ºäº†ä¸ç”¨æ¯æ¬¡è¿è¡Œbombç¨‹åºéƒ½éœ€è¦é‡æ–°è¾“å…¥ç­”æ¡ˆï¼Œbombç¨‹åºå¯ä»¥è¯»å–æ–‡æœ¬ä¿¡æ¯ï¼Œåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­å†™å…¥ç­”æ¡ˆå³å¯å…å»æ‰‹åŠ¨è¾“å…¥ã€‚\nphase_1 æ‹†å¼¹ä¸“å®¶å·²ä¸Šçº¿ï¼Œå¼€å¹²ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼\n(gdb) b phase_1 (gdb) b explode_bomb (gdb) disas phase_1 Dump of assembler code for function phase_1:\u0026#39; 0x0000000000400ee0 \u0026lt;+0\u0026gt;: sub $0x8,%rsp 0x0000000000400ee4 \u0026lt;+4\u0026gt;: mov $0x402400,%esi 0x0000000000400ee9 \u0026lt;+9\u0026gt;: callq 0x401338 \u0026lt;strings_not_equal\u0026gt; 0x0000000000400eee \u0026lt;+14\u0026gt;: test %eax,%eax 0x0000000000400ef0 \u0026lt;+16\u0026gt;: je 0x400ef7 \u0026lt;phase_1+23\u0026gt; 0x0000000000400ef2 \u0026lt;+18\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x0000000000400ef7 \u0026lt;+23\u0026gt;: add $0x8,%rsp 0x0000000000400efb \u0026lt;+27\u0026gt;: retq End of assembler dump. 3ï¼šå°†æ ˆæŒ‡é’ˆrspå‡å» 8 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯ç”³è¯· 8 ä¸ªå­—èŠ‚çš„æ ˆç©ºé—´ 4ï¼šå°†ä¸€ä¸ªç«‹å³æ•°å­˜åˆ°å¯„å­˜å™¨esiä¸­ 5ï¼šè°ƒç”¨å‡½æ•°strings_not_equalï¼Œè¯¥å‡½æ•°ç¬¬ä¸€æ¡è¯­å¥çš„åœ°å€ä¸º0x401338ã€‚callqæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹å¯å‚è€ƒä¹¦æœ¬ CSAPPï¼ˆCï¼šP166ï¼ŒOï¼šP278ï¼‰ 6ï¼šä½¿ç”¨testå‘½ä»¤ï¼ˆåŒandå‘½ä»¤ï¼Œä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„å€¼ï¼‰æ¥æµ‹è¯•eaxä¸­çš„å€¼æ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸º0åˆ™è·³è¿‡å¼•çˆ†ç‚¸å¼¹çš„å‡½æ•° 7ï¼šè¿™ä¸€å¥å’Œä¸Šä¸€å¥æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå¦‚æœeax==0,å°±è·³è½¬åˆ°0x400ef7ï¼Œè¿™ä¸ªåœ°å€ä¹Ÿå°±æ˜¯ç¬¬ 9 è¡Œçš„åœ°å€ï¼ŒæˆåŠŸè·³è¿‡äº†å¼•çˆ†ç‚¸å¼¹å‡½æ•°ã€‚æ„æ€å°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„æŸä¸ªå­—ç¬¦ä¸²æˆåŠŸåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯strings_not_equalå‡½æ•°è¿”å›å€¼ä¸º 0ã€‚ 8ï¼šè°ƒç”¨å‡½æ•°explode_bombï¼Œå¼•çˆ†ç‚¸å¼¹ 9ï¼šå°†æ ˆæŒ‡é’ˆrspåŠ ä¸Š 8 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯æ¢å¤ 8 ä¸ªå­—èŠ‚çš„æ ˆç©ºé—´ (gdb) disas strings_not_equal Dump of assembler code for function strings_not_equal: =\u0026gt; 0x0000000000401338 \u0026lt;+0\u0026gt;: push %r12 0x000000000040133a \u0026lt;+2\u0026gt;: push %rbp 0x000000000040133b \u0026lt;+3\u0026gt;: push %rbx 0x000000000040133c \u0026lt;+4\u0026gt;: mov %rdi,%rbx 0x000000000040133f \u0026lt;+7\u0026gt;: mov %rsi,%rbp 0x0000000000401342 \u0026lt;+10\u0026gt;: callq 0x40131b \u0026lt;string_length\u0026gt; 0x0000000000401347 \u0026lt;+15\u0026gt;: mov %eax,%r12d 0x000000000040134a \u0026lt;+18\u0026gt;: mov %rbp,%rdi 0x000000000040134d \u0026lt;+21\u0026gt;: callq 0x40131b \u0026lt;string_length\u0026gt; 0x0000000000401352 \u0026lt;+26\u0026gt;: mov $0x1,%edx 0x0000000000401357 \u0026lt;+31\u0026gt;: cmp %eax,%r12d 0x000000000040135a \u0026lt;+34\u0026gt;: jne 0x40139b \u0026lt;strings_not_equal+99\u0026gt; 0x000000000040135c \u0026lt;+36\u0026gt;: movzbl (%rbx),%eax 0x000000000040135f \u0026lt;+39\u0026gt;: test %al,%al 0x0000000000401361 \u0026lt;+41\u0026gt;: je 0x401388 \u0026lt;strings_not_equal+80\u0026gt; 0x0000000000401363 \u0026lt;+43\u0026gt;: cmp 0x0(%rbp),%al 0x0000000000401366 \u0026lt;+46\u0026gt;: je 0x401372 \u0026lt;strings_not_equal+58\u0026gt; 0x0000000000401368 \u0026lt;+48\u0026gt;: jmp 0x40138f \u0026lt;strings_not_equal+87\u0026gt; 0x000000000040136a \u0026lt;+50\u0026gt;: cmp 0x0(%rbp),%al 0x000000000040136d \u0026lt;+53\u0026gt;: nopl (%rax) 0x0000000000401370 \u0026lt;+56\u0026gt;: jne 0x401396 \u0026lt;strings_not_equal+94\u0026gt; 0x0000000000401372 \u0026lt;+58\u0026gt;: add $0x1,%rbx 0x0000000000401376 \u0026lt;+62\u0026gt;: add $0x1,%rbp 0x000000000040137a \u0026lt;+66\u0026gt;: movzbl (%rbx),%eax 0x000000000040137d \u0026lt;+69\u0026gt;: test %al,%al 0x000000000040137f \u0026lt;+71\u0026gt;: jne 0x40136a \u0026lt;strings_not_equal+50\u0026gt; 0x0000000000401381 \u0026lt;+73\u0026gt;: mov $0x0,%edx 0x0000000000401386 \u0026lt;+78\u0026gt;: jmp 0x40139b \u0026lt;strings_not_equal+99\u0026gt; 0x0000000000401388 \u0026lt;+80\u0026gt;: mov $0x0,%edx 0x000000000040138d \u0026lt;+85\u0026gt;: jmp 0x40139b \u0026lt;strings_not_equal+99\u0026gt; 0x000000000040138f \u0026lt;+87\u0026gt;: mov $0x1,%edx 0x0000000000401394 \u0026lt;+92\u0026gt;: jmp 0x40139b \u0026lt;strings_not_equal+99\u0026gt; 0x0000000000401396 \u0026lt;+94\u0026gt;: mov $0x1,%edx 0x000000000040139b \u0026lt;+99\u0026gt;: mov %edx,%eax 0x000000000040139d \u0026lt;+101\u0026gt;: pop %rbx 0x000000000040139e \u0026lt;+102\u0026gt;: pop %rbp 0x000000000040139f \u0026lt;+103\u0026gt;: pop %r12 0x00000000004013a1 \u0026lt;+105\u0026gt;: retq End of assembler dump. 3-5ï¼šåœ¨å‡½æ•°è°ƒç”¨æ—¶å…ˆä¿å­˜ç›¸å…³å¯„å­˜å™¨å€¼ï¼Œrbpå’Œrbxå°±æ˜¯ç”¨æ¥ä¿å­˜ä¸¤ä¸ªå‚æ•°çš„å¯„å­˜å™¨ 6ï¼šå°†å¯„å­˜å™¨rdiçš„å€¼å¤åˆ¶åˆ°å¯„å­˜å™¨rbp 7ï¼šå°†å¯„å­˜å™¨rsiçš„å€¼å¤åˆ¶åˆ°å¯„å­˜å™¨rbx å…¶å®çœ‹åˆ°è¿™é‡Œå°±ä¸€ç›´èƒ½å¤ŸçŒœåˆ°ç­”æ¡ˆæ˜¯ä»€ä¹ˆäº†ã€‚æˆ‘ä»¬é€šè¿‡ä¹‹å‰çš„phase_1å‡½æ•°èƒ½å¤Ÿå¤§æ¦‚çŸ¥é“éœ€è¦è¾“å…¥ä¸€ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ¯”è¾ƒæ­£ç¡®å°±èƒ½è§£é™¤ç‚¸å¼¹ã€‚ç°åœ¨æˆ‘ä»¬åˆè¿›å…¥åˆ°äº†è¿™ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œæ¯”è¾ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¿å­˜åœ¨ä¸¤ä¸ªå¯„å­˜å™¨é‡Œã€‚æˆ‘ä»¬æ­£å¸¸çš„æ€ç»´å¦‚æœå†™ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œè‚¯å®šä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¾“å…¥çš„å€¼ï¼Œä¸€ä¸ªå‚æ•°æ˜¯æ­£ç¡®çš„å€¼ã€‚\nè¿™é‡Œçœ‹åˆ°äº†rsiå¯„å­˜å™¨ï¼Œæˆ‘ä»¬è¿˜è®°å¾—åœ¨phase_1å‡½æ•°ä¸­ç¬¬ 4 è¡Œçš„esiå¯„å­˜å™¨å—ï¼Ÿè¿™ä¸¤ä¸ªå¯„å­˜å™¨æ˜¯åŒä¸€ä¸ªå¯„å­˜å™¨ï¼Œåªä¸è¿‡esiæ˜¯å¯„å­˜å™¨çš„ä½ 32 ä½ï¼Œæ—¢ç„¶esiå·²ç»èµ‹å€¼äº†ï¼Œé‚£å‰©ä¸‹çš„ä¸€ä¸ªå‚æ•°ä¿å­˜æˆ‘ä»¬è¾“å…¥çš„å†…å®¹ã€‚æ‰€ä»¥esiå†…å­˜çš„å†…å®¹å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ­£ç¡®ç­”æ¡ˆã€‚æˆ‘ä»¬åªè¦æŠŠå¯„å­˜å™¨esiä¸­çš„å€¼æ‰“å°å‡ºæ¥ï¼Œæˆ–è€…å†…å­˜åœ°å€ä¸º0x402400çš„å†…å®¹æ‰“å°å‡ºæ¥å³å¯ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰æ¡å‘½ä»¤æŸ¥çœ‹ã€‚\n(gdb) p (char*)($esi) $5 = 0x402400 \u0026#34;Border relations with Canada have never been better.\u0026#34; (gdb) x/s 0x402400 0x402400: \u0026#34;Border relations with Canada have never been better.\u0026#34; (gdb) x/s $esi 0x402400: \u0026#34;Border relations with Canada have never been better.\u0026#34; å°†ç­”æ¡ˆå¤åˆ¶ï¼Œç„¶åç»§ç»­è¿è¡Œ\nThe program being debugged has been started already. Start it from the beginning? (y or n) y Starting program: /home/dominic/learning-linux/bomb/bomb Welcome to my fiendish little bomb. You have 6 phases with which to blow yourself up. Have a nice day! Border relations with Canada have never been better. Breakpoint 2, 0x0000000000400ee0 in phase_1 () (gdb) s Single stepping until exit from function phase_1, which has no line number information. main (argc=\u0026lt;optimized out\u0026gt;, argv=\u0026lt;optimized out\u0026gt;) at bomb.c:75 75 phase_defused(); /* Drat! They figured it out! (gdb) s 77 printf(\u0026#34;Phase 1 defused. How about the next one?\\n\u0026#34;); ä» 13 è¡Œphase_defused()å¯ä»¥çŸ¥é“æˆ‘ä»¬å·²ç»è§£é™¤äº†ç‚¸å¼¹ï¼Œä» 15 è¡Œprintfå‡½æ•°ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œéœ€è¦è¿›è¡Œä¸‹ä¸€ä¸ªç‚¸å¼¹çš„æ‹†é™¤ã€‚è¿‡æ¥äººçš„å»ºè®®ï¼Œåœ¨è¿™é‡Œå°±å¼€å§‹åˆ†æphase_2ï¼Œå¯»æ‰¾ç­”æ¡ˆï¼Œå› ä¸ºç»§ç»­æ‰§è¡Œå°±è¦å¼€å§‹è¾“å…¥å†…å®¹äº†ï¼Œå°†æ— æ³•è°ƒè¯•ã€‚\nphase_2 ç»§ç»­åˆ†æç¬¬äºŒä¸ªç‚¸å¼¹ï¼Œ\n(gdb) disas phase_2 Dump of assembler code for function phase_2: 0x0000000000400efc \u0026lt;+0\u0026gt;: push %rbp 0x0000000000400efd \u0026lt;+1\u0026gt;: push %rbx 0x0000000000400efe \u0026lt;+2\u0026gt;: sub $0x28,%rsp 0x0000000000400f02 \u0026lt;+6\u0026gt;: mov %rsp,%rsi 0x0000000000400f05 \u0026lt;+9\u0026gt;: callq 0x40145c \u0026lt;read_six_numbers\u0026gt; 0x0000000000400f0a \u0026lt;+14\u0026gt;: cmpl $0x1,(%rsp) 0x0000000000400f0e \u0026lt;+18\u0026gt;: je 0x400f30 \u0026lt;phase_2+52\u0026gt; 0x0000000000400f10 \u0026lt;+20\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x0000000000400f15 \u0026lt;+25\u0026gt;: jmp 0x400f30 \u0026lt;phase_2+52\u0026gt; 0x0000000000400f17 \u0026lt;+27\u0026gt;: mov -0x4(%rbx),%eax 0x0000000000400f1a \u0026lt;+30\u0026gt;: add %eax,%eax 0x0000000000400f1c \u0026lt;+32\u0026gt;: cmp %eax,(%rbx) 0x0000000000400f1e \u0026lt;+34\u0026gt;: je 0x400f25 \u0026lt;phase_2+41\u0026gt; 0x0000000000400f20 \u0026lt;+36\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x0000000000400f25 \u0026lt;+41\u0026gt;: add $0x4,%rbx 0x0000000000400f29 \u0026lt;+45\u0026gt;: cmp %rbp,%rbx 0x0000000000400f2c \u0026lt;+48\u0026gt;: jne 0x400f17 \u0026lt;phase_2+27\u0026gt; 0x0000000000400f2e \u0026lt;+50\u0026gt;: jmp 0x400f3c \u0026lt;phase_2+64\u0026gt; 0x0000000000400f30 \u0026lt;+52\u0026gt;: lea 0x4(%rsp),%rbx 0x0000000000400f35 \u0026lt;+57\u0026gt;: lea 0x18(%rsp),%rbp 0x0000000000400f3a \u0026lt;+62\u0026gt;: jmp 0x400f17 \u0026lt;phase_2+27\u0026gt; 0x0000000000400f3c \u0026lt;+64\u0026gt;: add $0x28,%rsp 0x0000000000400f40 \u0026lt;+68\u0026gt;: pop %rbx 0x0000000000400f41 \u0026lt;+69\u0026gt;: pop %rbp 0x0000000000400f42 \u0026lt;+70\u0026gt;: retq End of assembler dump. 3-6ï¼šä¿å­˜ç¨‹åºå…¥å£åœ°å€ï¼Œå˜é‡ç­‰å†…å®¹ï¼Œå°±ä¸å†èµ˜è¿°äº† 7: è°ƒç”¨read_six_numberså‡½æ•°ï¼Œæ ¹æ®å‡½æ•°åæˆ‘ä»¬å¯ä»¥çŒœæµ‹è¿™ä¸ªå‡½æ•°éœ€è¦è¯»å…¥å…­ä¸ªæ•°å­— 8-9ï¼šæ¯”è¾ƒå¯„å­˜å™¨rspå­˜çš„ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯å¦ç­‰äº0x1ï¼Œå¦‚æœç­‰äºå°±è·³è½¬åˆ°phase_2+52å¤„ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœä¸ç­‰äºå°±æ‰§è¡Œexplode_bombã€‚æ ˆä¸­ä¿å­˜äº†å…­ä¸ªè¾“å…¥çš„æ•°å­—ï¼Œä¿å­˜é¡ºåºæ˜¯ä»å³å¾€å·¦ï¼Œå‡å¦‚è¾“å…¥1,2,3,4,5,6ã€‚é‚£ä¹ˆå…¥æ ˆçš„é¡ºåºå°±æ˜¯6,5,4,3,2,1ï¼Œå¯„å­˜å™¨rspæŒ‡å‘æ ˆé¡¶ï¼Œä¹Ÿå°±æ˜¯æ•°å­—1çš„åœ°å€ã€‚ 21:å‡è®¾ç¬¬ä¸€ä¸ªæ•°å­—æ­£ç¡®ï¼Œæˆ‘ä»¬è·³è½¬åˆ°\u0026lt;+52\u0026gt;ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ç¬¬ 21 è¡Œï¼Œå°†rsp+0x4å†™å…¥å¯„å­˜å™¨rbxï¼Œæ ˆæŒ‡é’ˆå‘ä¸Šç§»åŠ¨å››ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯å–ç¬¬äºŒä¸ªè¾“å…¥çš„å‚æ•°ï¼Œå°†å®ƒèµ‹ç»™å¯„å­˜å™¨rbx 22ï¼šå°†rsp+0x18å†™å…¥å¯„å­˜å™¨rbpï¼Œåå…­è¿›åˆ¶0x18=24ï¼Œ4 ä¸ªå­—èŠ‚ä¸€ä¸ªæ•°ï¼Œåˆšå¥½ 6 ä¸ªæ•°ï¼Œå°±æ˜¯å°†è¾“å…¥å‚æ•°çš„æœ€åä¸€ä¸ªä½ç½®èµ‹ç»™å¯„å­˜å™¨rbp 23ï¼šè·³åˆ°phase_2+27ç»§ç»­æ‰§è¡Œ 12ï¼šrbx-0x4èµ‹ç»™å¯„å­˜å™¨eaxã€‚ç¬¬ 21 è¡Œæˆ‘ä»¬çŸ¥é“ï¼Œrbxæ­¤æ—¶å·²ç»åˆ°ç¬¬äºŒä¸ªå‚æ•°äº†ï¼Œè¿™ä¸€å¥å°±æ˜¯è¯´æŠŠç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼å†™å…¥å¯„å­˜å™¨eax 13ï¼šå°†eaxç¿»ä¸€å€ï¼Œç¬¬ 8 è¡ŒçŸ¥é“ç¬¬ä¸€ä¸ªå‚æ•°å€¼ä¸º1ï¼Œæ‰€ä»¥æ­¤æ—¶eaxå€¼ä¸º2 14-15ï¼šæ¯”è¾ƒeaxæ˜¯å¦ç­‰äºrbxã€‚rbxæ­¤æ—¶ä¿å­˜çš„æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯æ¯”è¾ƒç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦ç­‰äº2ã€‚å¦‚æœç­‰äºè·³è½¬åˆ°phase_2+41ä½ç½®ï¼Œå¦‚æœä¸ç­‰äºå°±è°ƒç”¨çˆ†ç‚¸å‡½æ•° 17-18ï¼šå‡è®¾ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ 2ï¼Œæˆ‘ä»¬è·³è¿‡äº†ç‚¸å¼¹æ¥åˆ°ç¬¬ 17 è¡Œï¼Œå°†rbxç»§ç»­ä¸Šç§»ï¼Œç„¶åæ¯”è¾ƒrbpæ˜¯å¦ç­‰äºrbxï¼Œæˆ‘ä»¬çŸ¥é“rbpä¿å­˜äº†æœ€åä¸€ä¸ªå‚æ•°çš„åœ°å€ï¼Œæ‰€ä»¥è¿™é‡Œçš„æ„æ€å°±æ˜¯çœ‹çœ‹å‚æ•°æœ‰æ²¡æœ‰åˆ°æœ€åä¸€ä¸ªå‚æ•°ã€‚ 19ï¼šå¦‚æœrbx\u0026lt;rbpï¼Œæ„æ€å°±æ˜¯è¿˜æ²¡åˆ°æœ€åä¸€ä¸ªå‚æ•°ï¼Œå°±è·³è½¬åˆ°phase_2+27 12ï¼šå†æ¬¡å›åˆ°ç¬¬ 12 è¡Œï¼Œè¿™é‡Œå°±æ˜¯ç›¸å½“äºä¸€ä¸ªå¾ªç¯äº†ï¼Œè®©rbxä¸€ç›´å‘ä¸Šç§»åŠ¨ï¼Œåˆ†åˆ«å­˜å…¥ç¬¬ 2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6 ä¸ªå‚æ•°ï¼Œåœ¨ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå‚æ•°æ—¶å…ˆä¿å­˜å½“å‰å‚æ•°åˆ°å¯„å­˜å™¨eaxè®©å…¶ç¿»ä¸€å€ï¼Œç„¶årbxå†ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå‚æ•°ï¼Œæ¯”è¾ƒeax==rbxã€‚ç›´åˆ°rbxè¶Šè¿‡äº†rbpã€‚ç¨‹åºè·³è½¬åˆ°phase_2+64ï¼Œå°†æ ˆç©ºé—´æ¢å¤ã€‚ ä»¥ä¸Šåˆ†æä¹Ÿå¯ä»¥å¾—å‡ºç­”æ¡ˆäº†ï¼Œæˆ‘ä»¬åªè¦è¾“å…¥ä¸€ä¸ªä»¥1ä¸ºåˆå€¼ï¼Œå…¬æ¯”ä¸º2ï¼Œä¸ªæ•°ä¸º6çš„ç­‰æ¯”æ•°åˆ—å°±æ˜¯ç­”æ¡ˆï¼Œä¹Ÿå°±æ˜¯1 2 4 8 16 32ã€‚\n(gdb) c Continuing. Phase 1 defused. How about the next one? 1 2 4 8 16 32 Breakpoint 6, 0x00000000004015c4 in phase_defused () (gdb) s Single stepping until exit from function phase_defused, which has no line number information. main (argc=\u0026lt;optimized out\u0026gt;, argv=\u0026lt;optimized out\u0026gt;) at bomb.c:84 84 printf(\u0026#34;That\u0026#39;s number 2. Keep going!\\n\u0026#34;); (gdb) s è¿™ä¸ªç‚¸å¼¹çš„ä½œè€…åº”è¯¥å†å¿ƒç‹ æ‰‹è¾£ä¸€ç‚¹ï¼ŒæŠŠå‡½æ•°åæ¢æˆread_some_numbersï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¾—ä¸çœ‹è¿™ä¸ªå‡½æ•°çš„å†…å®¹äº†ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°é‡Œè¿˜æœ‰ä¸€ä¸ªå‘ï¼Œè¿™ä¸ªå‘åœ¨å‡½æ•°åå­—ä¸Šä¸€å¥è¢«å¡«äº†ã€‚é‚£å°±æ˜¯è¿™ä¸ªå‡½æ•°ä¼šå¯¹å‚æ•°ä¸ªæ•°åšåˆ¤æ–­ï¼Œå¦‚æœå°äº 5 å°±çˆ†ç‚¸ã€‚\n(gdb) disas read_six_numbers Dump of assembler code for function read_six_numbers: 0x000000000040145c \u0026lt;+0\u0026gt;: sub $0x18,%rsp 0x0000000000401460 \u0026lt;+4\u0026gt;: mov %rsi,%rdx 0x0000000000401463 \u0026lt;+7\u0026gt;: lea 0x4(%rsi),%rcx 0x0000000000401467 \u0026lt;+11\u0026gt;: lea 0x14(%rsi),%rax 0x000000000040146b \u0026lt;+15\u0026gt;: mov %rax,0x8(%rsp) 0x0000000000401470 \u0026lt;+20\u0026gt;: lea 0x10(%rsi),%rax 0x0000000000401474 \u0026lt;+24\u0026gt;: mov %rax,(%rsp) 0x0000000000401478 \u0026lt;+28\u0026gt;: lea 0xc(%rsi),%r9 0x000000000040147c \u0026lt;+32\u0026gt;: lea 0x8(%rsi),%r8 0x0000000000401480 \u0026lt;+36\u0026gt;: mov $0x4025c3,%esi 0x0000000000401485 \u0026lt;+41\u0026gt;: mov $0x0,%eax 0x000000000040148a \u0026lt;+46\u0026gt;: callq 0x400bf0 \u0026lt;__isoc99_sscanf@plt\u0026gt; 0x000000000040148f \u0026lt;+51\u0026gt;: cmp $0x5,%eax 0x0000000000401492 \u0026lt;+54\u0026gt;: jg 0x401499 \u0026lt;read_six_numbers+61\u0026gt; 0x0000000000401494 \u0026lt;+56\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x0000000000401499 \u0026lt;+61\u0026gt;: add $0x18,%rsp 0x000000000040149d \u0026lt;+65\u0026gt;: retq End of assembler dump. 3ï¼šç”³è¯· 24 ä¸ªå­—èŠ‚æ ˆç©ºé—´ 4ï¼šrdx=rsiï¼Œå°†è¾“å…¥å‚æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ”¾åˆ°å¯„å­˜å™¨rdxä¸­ï¼Œä¸ºå•¥æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå› ä¸ºrsiç°åœ¨ä¿å­˜çš„åœ°å€æ˜¯æ ˆé¡¶ä½ç½®ï¼Œæ ˆé¡¶ç›®å‰ä¿å­˜å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ 5ï¼šrcx = rsi + 4ï¼ŒæŠŠç¬¬äºŒä¸ªå‚æ•°çš„åœ°å€ä¼ ç»™å¯„å­˜å™¨rcx 6ï¼šrax = rsi + 20ï¼ŒæŠŠç¬¬å…­ä¸ªå‚æ•°çš„åœ°å€ä¼ ç»™å¯„å­˜å™¨rax 7ï¼šrsp + 8 = raxç¬¬å…«ä¸ªå‚æ•° 8ï¼šrax = rsi + 16ï¼ŒæŠŠç¬¬äº”ä¸ªå‚æ•°ä¼ ç»™ 9ï¼šrsp = raxç¬¬ä¸ƒä¸ªå‚æ•° 10ï¼šr9 = rsi + 12æŠŠç¬¬å››ä¸ªå‚æ•°ä¼ ç»™å¯„å­˜å™¨r9 11ï¼šr8 = rsi + 8æŠŠç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ç»™å¯„å­˜å™¨r8 12ï¼š 13ï¼šeax = 0 14ï¼šè°ƒç”¨è¾“å…¥å‡½æ•°sscanf 15-17ï¼šå‡½æ•°è¿”å›å€¼ä¸ªæ•°ä¸ 5 æ¯”è¾ƒï¼Œå¦‚æœå°äº 5 å°±çˆ†ç‚¸ï¼Œå¦åˆ™è¿”å› phase_3 0x0000000000400f43 \u0026lt;+0\u0026gt;: sub $0x18,%rsp 0x0000000000400f47 \u0026lt;+4\u0026gt;: lea 0xc(%rsp),%rcx 0x0000000000400f4c \u0026lt;+9\u0026gt;: lea 0x8(%rsp),%rdx 0x0000000000400f51 \u0026lt;+14\u0026gt;: mov $0x4025cf,%esi 0x0000000000400f56 \u0026lt;+19\u0026gt;: mov $0x0,%eax 0x0000000000400f5b \u0026lt;+24\u0026gt;: callq 0x400bf0 \u0026lt;__isoc99_sscanf@plt\u0026gt; 0x0000000000400f60 \u0026lt;+29\u0026gt;: cmp $0x1,%eax 0x0000000000400f63 \u0026lt;+32\u0026gt;: jg 0x400f6a \u0026lt;phase_3+39\u0026gt; 0x0000000000400f65 \u0026lt;+34\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x0000000000400f6a \u0026lt;+39\u0026gt;: cmpl $0x7,0x8(%rsp) 0x0000000000400f6f \u0026lt;+44\u0026gt;: ja 0x400fad \u0026lt;phase_3+106\u0026gt; 0x0000000000400f71 \u0026lt;+46\u0026gt;: mov 0x8(%rsp),%eax 0x0000000000400f75 \u0026lt;+50\u0026gt;: jmpq *0x402470(,%rax,8) 0x0000000000400f7c \u0026lt;+57\u0026gt;: mov $0xcf,%eax 0x0000000000400f81 \u0026lt;+62\u0026gt;: jmp 0x400fbe \u0026lt;phase_3+123\u0026gt; 0x0000000000400f83 \u0026lt;+64\u0026gt;: mov $0x2c3,%eax 0x0000000000400f88 \u0026lt;+69\u0026gt;: jmp 0x400fbe \u0026lt;phase_3+123\u0026gt; 0x0000000000400f8a \u0026lt;+71\u0026gt;: mov $0x100,%eax 0x0000000000400f8f \u0026lt;+76\u0026gt;: jmp 0x400fbe \u0026lt;phase_3+123\u0026gt; 0x0000000000400f91 \u0026lt;+78\u0026gt;: mov $0x185,%eax 0x0000000000400f96 \u0026lt;+83\u0026gt;: jmp 0x400fbe \u0026lt;phase_3+123\u0026gt; 0x0000000000400f98 \u0026lt;+85\u0026gt;: mov $0xce,%eax 0x0000000000400f9d \u0026lt;+90\u0026gt;: jmp 0x400fbe \u0026lt;phase_3+123\u0026gt; 0x0000000000400f9f \u0026lt;+92\u0026gt;: mov $0x2aa,%eax 0x0000000000400fa4 \u0026lt;+97\u0026gt;: jmp 0x400fbe \u0026lt;phase_3+123\u0026gt; 0x0000000000400fa6 \u0026lt;+99\u0026gt;: mov $0x147,%eax 0x0000000000400fab \u0026lt;+104\u0026gt;: jmp 0x400fbe \u0026lt;phase_3+123\u0026gt; 0x0000000000400fad \u0026lt;+106\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x0000000000400fb2 \u0026lt;+111\u0026gt;: mov $0x0,%eax 0x0000000000400fb7 \u0026lt;+116\u0026gt;: jmp 0x400fbe \u0026lt;phase_3+123\u0026gt; 0x0000000000400fb9 \u0026lt;+118\u0026gt;: mov $0x137,%eax 0x0000000000400fbe \u0026lt;+123\u0026gt;: cmp 0xc(%rsp),%eax 0x0000000000400fc2 \u0026lt;+127\u0026gt;: je 0x400fc9 \u0026lt;phase_3+134\u0026gt; 0x0000000000400fc4 \u0026lt;+129\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x0000000000400fc9 \u0026lt;+134\u0026gt;: add $0x18,%rsp 0x0000000000400fcd \u0026lt;+138\u0026gt;: retq 1ï¼šå¼€è¾Ÿ 24 å­—èŠ‚çš„æ ˆç©ºé—´ 2ï¼šrcx = rsp + 12ç¬¬äºŒä¸ªå‚æ•° 3ï¼šrdx = rsp + 8ç¬¬ä¸€ä¸ªå‚æ•° 4-8ï¼šå’Œphase_2é‡Œread_six_numberså‡½æ•°ä¸­çš„ç¬¬ 13 è¡Œå¼€å§‹ä¸€æ ·ï¼Œè¾“å…¥æ•°æ®ï¼Œåˆ¤æ–­ä¸€ä¸‹è¾“å…¥å‚æ•°çš„ä¸ªæ•°ï¼Œåªä¸è¿‡è¿™é‡Œæ˜¯è¿”å›å€¼ä¸ªæ•°å¤§äº 1ï¼Œå¦‚æœå‚æ•°ä¸ªæ•°æ­£ç¡®å°±è·³åˆ°phase_3+39ä¹Ÿå°±æ˜¯ç¬¬ 10 è¡Œï¼Œå¦åˆ™å¼•çˆ†ç‚¸å¼¹ã€‚ 10-11ï¼šå¦‚æœ7 \u0026lt; rsp + 8 ç­‰ä»·äº 7 \u0026lt; rdx ç­‰ä»·äº 7 \u0026lt; ç¬¬ä¸€ä¸ªå‚æ•°å°±è·³è½¬åˆ°phase_3+106ï¼Œçˆ†ç‚¸ã€‚è¿™é‡Œç¡®å®šç¬¬ä¸€ä¸ªæ•°å¿…é¡»å°äº 7 12ï¼šeax = rsp + 8 ç­‰ä»·äº eax = ç¬¬ä¸€ä¸ªå‚æ•° 13ï¼šè·³è½¬è‡³0x402470 + 8 * raxå¤„ï¼Œå…·ä½“è·³è½¬åˆ°å“ªé‡Œæ ¹æ®ç¬¬ä¸€ä¸ªå€¼åšåˆ¤æ–­ 14ï¼šeax = 207 15ï¼šè·³è½¬è‡³phase_3+123,å³ 32 è¡Œ 16ï¼šeax = 707 17ï¼šè·³è½¬åˆ° 32 è¡Œ 18ï¼šeax = 256 19ï¼šè·³è½¬åˆ° 32 è¡Œ 20ï¼šeax = 389 21-27ï¼šä»¥æ­¤ç±»æ¨ 29ï¼šeax = 0 30ï¼š 31ï¼šeax = 311 32-34ï¼šæ¯”è¾ƒeaxå’Œrsp + 12 ç­‰ä»·äº æ¯”è¾ƒ ç¬¬äºŒä¸ªå‚æ•°å’Œeaxã€‚å¦‚æœç›¸ç­‰å°±è¿”å›ï¼Œå¦‚æœä¸ç­‰å°±å¼•çˆ†ã€‚ åˆ†æè‡³æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå°±çŸ¥é“äº†ç¨‹åºçš„å¤§æ¦‚æµç¨‹ï¼Œè¾“å…¥ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªå€¼å¿…é¡»å°äºç­‰äº 7ï¼Œç¬¬äºŒä¸ªå€¼æ ¹æ®ç¬¬ä¸€ä¸ªå€¼æ¥ç¡®å®šï¼Œå…·ä½“ç­‰äºå¤šå°‘ï¼Œæ ¹æ®è·³è½¬è¡¨ç¡®å®šï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå€¼æœ‰å…«ä¸ªæ•°ï¼Œä¹Ÿå°±å¯¹åº”ç€æ±‡ç¼–ä¸­å…«æ®µå¯„å­˜å™¨eaxèµ‹å€¼çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬åªè¦è¾“å…¥ç¬¬ä¸€ä¸ªåˆæ³•çš„æ•°å€¼ï¼Œç„¶åå†æ‰“å°å‡ºå¯„å­˜å™¨eaxçš„å€¼ï¼Œå³å¯ç¡®å®šç­”æ¡ˆã€‚\næ¯”å¦‚æˆ‘ä»¬å…ˆæµ‹è¯•ä¸€ä¸‹ç¬¬ä¸€ä¸ªå€¼ä¸º 0 æ—¶ï¼Œå¯¹åº”çš„ç¬¬äºŒä¸ªå€¼ä¸ºå¤šå°‘ï¼Œæˆ‘ä»¬è¾“å…¥0 10ï¼Œå› ä¸ºåªæ˜¯æµ‹è¯•ï¼Œç¬¬äºŒä¸ªå€¼ä»»æ„ã€‚\nThat\u0026#39;s number 2. Keep going! //æ¥ä¸Šä¸ªç‚¸å¼¹åé¢ 88 input = read_line(); (gdb) n 0 10 //è¾“å…¥æµ‹è¯•ç­”æ¡ˆ 89 phase_3(input); (gdb) n Breakpoint 4, 0x0000000000400f43 in phase_3 () (gdb) n Single stepping until exit from function phase_3, which has no line number information. Breakpoint 2, 0x000000000040143a in explode_bomb () (gdb) p $eax $14 = 207 //207å³æ˜¯ç­”æ¡ˆ è¾“å…¥çœŸæ­£ç­”æ¡ˆæµ‹è¯•ï¼Œ\n(gdb) n 0 207 //è¾“å…¥ç­”æ¡ˆ 89 phase_3(input); (gdb) n Breakpoint 4, 0x0000000000400f43 in phase_3 () (gdb) n Single stepping until exit from function phase_3, which has no line number information. main (argc=\u0026lt;optimized out\u0026gt;, argv=\u0026lt;optimized out\u0026gt;) at bomb.c:90 90 phase_defused(); //ç‚¸å¼¹æ‹†é™¤ (gdb) 91 printf(\u0026#34;Halfway there!\\n\u0026#34;); æˆ‘ä»¬ä¸Šé¢è¯´è¿‡ï¼Œç¬¬ä¸€ä¸ªå€¼æœ‰å…«ç§å¯èƒ½ï¼Œæ‰€ä»¥è¿™é¢˜ç­”æ¡ˆä¹Ÿæœ‰å…«ä¸ªï¼Œæˆ‘ä»¬åªè¦æŒ¨ä¸ªæµ‹è¯•0-7ï¼Œåˆ†åˆ«æ‰“å°å‡ºå¯„å­˜å™¨eaxçš„å€¼å°±å¯ä»¥å¾—åˆ°æ‰€æœ‰ç­”æ¡ˆã€‚ä»–ä»¬åˆ†åˆ«æ˜¯\n0 207 1 311 2 707 3 256 4 389 5 206 6 682 7 327 phase_4 è¡Œç™¾é‡Œè€…åŠä¹åï¼ŒNO\n(gdb) disas phase_4 Dump of assembler code for function phase_4: 0x000000000040100c \u0026lt;+0\u0026gt;: sub $0x18,%rsp 0x0000000000401010 \u0026lt;+4\u0026gt;: lea 0xc(%rsp),%rcx 0x0000000000401015 \u0026lt;+9\u0026gt;: lea 0x8(%rsp),%rdx 0x000000000040101a \u0026lt;+14\u0026gt;: mov $0x4025cf,%esi 0x000000000040101f \u0026lt;+19\u0026gt;: mov $0x0,%eax 0x0000000000401024 \u0026lt;+24\u0026gt;: callq 0x400bf0 \u0026lt;__isoc99_sscanf@plt\u0026gt; 0x0000000000401029 \u0026lt;+29\u0026gt;: cmp $0x2,%eax 0x000000000040102c \u0026lt;+32\u0026gt;: jne 0x401035 \u0026lt;phase_4+41\u0026gt; 0x000000000040102e \u0026lt;+34\u0026gt;: cmpl $0xe,0x8(%rsp) 0x0000000000401033 \u0026lt;+39\u0026gt;: jbe 0x40103a \u0026lt;phase_4+46\u0026gt; 0x0000000000401035 \u0026lt;+41\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x000000000040103a \u0026lt;+46\u0026gt;: mov $0xe,%edx 0x000000000040103f \u0026lt;+51\u0026gt;: mov $0x0,%esi 0x0000000000401044 \u0026lt;+56\u0026gt;: mov 0x8(%rsp),%edi 0x0000000000401048 \u0026lt;+60\u0026gt;: callq 0x400fce \u0026lt;func4\u0026gt; 0x000000000040104d \u0026lt;+65\u0026gt;: test %eax,%eax 0x000000000040104f \u0026lt;+67\u0026gt;: jne 0x401058 \u0026lt;phase_4+76\u0026gt; 0x0000000000401051 \u0026lt;+69\u0026gt;: cmpl $0x0,0xc(%rsp) 0x0000000000401056 \u0026lt;+74\u0026gt;: je 0x40105d \u0026lt;phase_4+81\u0026gt; 0x0000000000401058 \u0026lt;+76\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x000000000040105d \u0026lt;+81\u0026gt;: add $0x18,%rsp 0x0000000000401061 \u0026lt;+85\u0026gt;: retq 1-8ï¼šå¼€è¾Ÿç©ºé—´ï¼Œä¿å­˜å‚æ•°ä¿¡æ¯ï¼Œè°ƒç”¨è¾“å…¥å‡½æ•°ï¼Œå’Œä¸Šé¢çš„åˆ†æé‡å¤ï¼Œä¸å†èµ˜è¿°ã€‚æ³¨æ„çš„æ˜¯ç¬¬ 6 è¡Œï¼Œx/s 0x4025cfå¯çŸ¥ä¸¤ä¸ªå‚æ•°æ˜¯æ•´å‹æ•°å€¼ã€‚ 9-10ï¼šå‚æ•°ä¸ªæ•°å¿…é¡»ç­‰äº 2ï¼Œå¦åˆ™å¼•çˆ† 11-12ï¼š14ä¸rsp + 8æ¯”è¾ƒï¼Œç­‰ä»·äº14ä¸ç¬¬ä¸€ä¸ªå‚æ•°æ¯”è¾ƒã€‚è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»å°äºç­‰äº 14ï¼Œå¦åˆ™å¼•çˆ†ã€‚ 14ï¼šedx = 14 15ï¼šesi = 0 16ï¼šedi = rsp + 8å³edi = ç¬¬ä¸€ä¸ªå‚æ•° 17ï¼šè°ƒç”¨å‡½æ•°fun4ï¼Œå‚æ•°åˆ†åˆ«ä¸ºedi 0 14 18ï¼šæµ‹è¯•è¿”å›å€¼æ˜¯å¦ä¸º 0ï¼Œå¦‚æœä¸ä¸º 0ï¼Œå¼•çˆ† 20-22ï¼šæ¯”è¾ƒ0å’Œrsp + 12ï¼Œå¦‚æœä¸ç­‰ï¼Œå¼•çˆ†ï¼Œå¦åˆ™è¿”å› (gdb) disas func4 Dump of assembler code for function func4: 0x0000000000400fce \u0026lt;+0\u0026gt;: sub $0x8,%rsp 0x0000000000400fd2 \u0026lt;+4\u0026gt;: mov %edx,%eax 0x0000000000400fd4 \u0026lt;+6\u0026gt;: sub %esi,%eax 0x0000000000400fd6 \u0026lt;+8\u0026gt;: mov %eax,%ecx 0x0000000000400fd8 \u0026lt;+10\u0026gt;: shr $0x1f,%ecx 0x0000000000400fdb \u0026lt;+13\u0026gt;: add %ecx,%eax 0x0000000000400fdd \u0026lt;+15\u0026gt;: sar %eax 0x0000000000400fdf \u0026lt;+17\u0026gt;: lea (%rax,%rsi,1),%ecx 0x0000000000400fe2 \u0026lt;+20\u0026gt;: cmp %edi,%ecx 0x0000000000400fe4 \u0026lt;+22\u0026gt;: jle 0x400ff2 \u0026lt;func4+36\u0026gt; 0x0000000000400fe6 \u0026lt;+24\u0026gt;: lea -0x1(%rcx),%edx 0x0000000000400fe9 \u0026lt;+27\u0026gt;: callq 0x400fce \u0026lt;func4\u0026gt; 0x0000000000400fee \u0026lt;+32\u0026gt;: add %eax,%eax 0x0000000000400ff0 \u0026lt;+34\u0026gt;: jmp 0x401007 \u0026lt;func4+57\u0026gt; 0x0000000000400ff2 \u0026lt;+36\u0026gt;: mov $0x0,%eax 0x0000000000400ff7 \u0026lt;+41\u0026gt;: cmp %edi,%ecx 0x0000000000400ff9 \u0026lt;+43\u0026gt;: jge 0x401007 \u0026lt;func4+57\u0026gt; 0x0000000000400ffb \u0026lt;+45\u0026gt;: lea 0x1(%rcx),%esi 0x0000000000400ffe \u0026lt;+48\u0026gt;: callq 0x400fce \u0026lt;func4\u0026gt; 0x0000000000401003 \u0026lt;+53\u0026gt;: lea 0x1(%rax,%rax,1),%eax 0x0000000000401007 \u0026lt;+57\u0026gt;: add $0x8,%rsp 0x000000000040100b \u0026lt;+61\u0026gt;: retq func (edi, esi, edx) { // edi = ç¬¬ä¸€ä¸ªå‚æ•°, esi = 0, edx = 14 eax = edx // 4:mov %edx, %eax eax = eax -esi // 5:sub esi, %eax eax = edx -esi ecx = eax // 6:mov %eax, %ecx ecx = edx - esi eÑx = ecx \u0026gt;\u0026gt; 31 // 7:shr $0x1f, %ecx ecx = (edx - esi) \u0026gt;\u0026gt; 31 eax = eax + ecx // 8:add %ecx, %eax eax = (edx - esi) + ((edx - esi) \u0026gt;\u0026gt; 31)//æ›¿æ¢eaxå’Œecx eax = eax \u0026gt; 1; // 9:sar %eax eax = ((edx - esi) +((edx -esi) \u0026gt;\u0026gt; 31)) / 2 ecx = eax + esi * 1 // 10:lea (rax,ersi,1), %ecx ecx = ((edx - esi) +((edx -esi) \u0026gt;\u0026gt; 31)) / 2 + esi * 1 ecx = ((14 - 0) + ((14 - 0) \u0026gt;\u0026gt; 31)) / 2 + 0 ecx = 7 // 11:cmp %edi, %ecx if (ecx \u0026lt;= edi) { // 12:jle 400ff2 eax = 0 // mov $0x0,%eax // 18:cmp %edi, %ecx if(ecx \u0026gt;= edi) { // 19:jge 0x401007 \u0026lt;func4+57\u0026gt; return; //ç”±æ­¤å¯ä»¥å¾—çŸ¥é“ edx == edi } } } phase_5 0x0000000000401062 \u0026lt;+0\u0026gt;: push %rbx 0x0000000000401063 \u0026lt;+1\u0026gt;: sub $0x20,%rsp 0x0000000000401067 \u0026lt;+5\u0026gt;: mov %rdi,%rbx 0x000000000040106a \u0026lt;+8\u0026gt;: mov %fs:0x28,%rax 0x0000000000401073 \u0026lt;+17\u0026gt;: mov %rax,0x18(%rsp) 0x0000000000401078 \u0026lt;+22\u0026gt;: xor %eax,%eax 0x000000000040107a \u0026lt;+24\u0026gt;: callq 0x40131b \u0026lt;string_length\u0026gt; 0x000000000040107f \u0026lt;+29\u0026gt;: cmp $0x6,%eax 0x0000000000401082 \u0026lt;+32\u0026gt;: je 0x4010d2 \u0026lt;phase_5+112\u0026gt; 0x0000000000401084 \u0026lt;+34\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x0000000000401089 \u0026lt;+39\u0026gt;: jmp 0x4010d2 \u0026lt;phase_5+112\u0026gt; 0x000000000040108b \u0026lt;+41\u0026gt;: movzbl (%rbx,%rax,1),%ecx 0x000000000040108f \u0026lt;+45\u0026gt;: mov %cl,(%rsp) 0x0000000000401092 \u0026lt;+48\u0026gt;: mov (%rsp),%rdx 0x0000000000401096 \u0026lt;+52\u0026gt;: and $0xf,%edx 0x0000000000401099 \u0026lt;+55\u0026gt;: movzbl 0x4024b0(%rdx),%edx 0x00000000004010a0 \u0026lt;+62\u0026gt;: mov %dl,0x10(%rsp,%rax,1) 0x00000000004010a4 \u0026lt;+66\u0026gt;: add $0x1,%rax 0x00000000004010a8 \u0026lt;+70\u0026gt;: cmp $0x6,%rax 0x00000000004010ac \u0026lt;+74\u0026gt;: jne 0x40108b \u0026lt;phase_5+41\u0026gt; 0x00000000004010ae \u0026lt;+76\u0026gt;: movb $0x0,0x16(%rsp) 0x00000000004010b3 \u0026lt;+81\u0026gt;: mov $0x40245e,%esi 0x00000000004010b8 \u0026lt;+86\u0026gt;: lea 0x10(%rsp),%rdi 0x00000000004010bd \u0026lt;+91\u0026gt;: callq 0x401338 \u0026lt;strings_not_equal\u0026gt; 0x00000000004010c2 \u0026lt;+96\u0026gt;: test %eax,%eax 0x00000000004010c4 \u0026lt;+98\u0026gt;: je 0x4010d9 \u0026lt;phase_5+119\u0026gt; 0x00000000004010c6 \u0026lt;+100\u0026gt;: callq 0x40143a \u0026lt;explode_bomb\u0026gt; 0x00000000004010cb \u0026lt;+105\u0026gt;: nopl 0x0(%rax,%rax,1) 0x00000000004010d0 \u0026lt;+110\u0026gt;: jmp 0x4010d9 \u0026lt;phase_5+119\u0026gt; 0x00000000004010d2 \u0026lt;+112\u0026gt;: mov $0x0,%eax 0x00000000004010d7 \u0026lt;+117\u0026gt;: jmp 0x40108b \u0026lt;phase_5+41\u0026gt; 0x00000000004010d9 \u0026lt;+119\u0026gt;: mov 0x18(%rsp),%rax 0x00000000004010de \u0026lt;+124\u0026gt;: xor %fs:0x28,%rax 0x00000000004010e7 \u0026lt;+133\u0026gt;: je 0x4010ee \u0026lt;phase_5+140\u0026gt; 0x00000000004010e9 \u0026lt;+135\u0026gt;: callq 0x400b30 \u0026lt;__stack_chk_fail@plt\u0026gt; 0x00000000004010ee \u0026lt;+140\u0026gt;: add $0x20,%rsp 0x00000000004010f2 \u0026lt;+144\u0026gt;: pop %rbx 0x00000000004010f3 \u0026lt;+145\u0026gt;: retq ","permalink":"https://lifeislife.cn/posts/csapp-lab-bomb-lab/","summary":"\u003ch2 id=\"tips\"\u003eTips\u003c/h2\u003e\n\u003ch3 id=\"ç¼©å†™æ³¨é‡Š\"\u003eç¼©å†™æ³¨é‡Š\u003c/h3\u003e\n\u003cp\u003eCSAPPï¼šComputer Systems A Programmerâ€™s Perspectiveï¼ˆæ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼‰ã€‚CSAPPï¼ˆCï¼šP166ï¼ŒOï¼šP278ï¼‰è¡¨ç¤ºä¹¦æœ¬çš„ä¸­æ–‡ç‰ˆç¬¬ 166 é¡µï¼Œè‹±æ–‡åŸç‰ˆç¬¬ 278 é¡µã€‚\u003c/p\u003e","title":"CSAPPLAB-Bomb Lab"},{"content":"file åŠ è½½ç¨‹åº (gdb) file bomb Reading symbols from bomb... set args å¸¦å‚æ•°è°ƒè¯• æœ‰æ—¶å€™ç¨‹åºä¸æ˜¯ç›´æ¥å¯ä»¥è¿è¡Œçš„ï¼Œéœ€è¦åŠ ä¸Šä¸€äº›å¿…è¦çš„å‚æ•°ã€‚å¸¦ä¸Šå‚æ•°è¿è¡Œå¾ˆå®¹æ˜“ï¼Œåªè¦åœ¨ç¨‹åºåååŠ ä¸Šç›¸åº”å‚æ•°å³å¯ï¼Œä½†æ˜¯å¦‚ä½•å¸¦ä¸Šå‚æ•°è¿›è¡Œè°ƒè¯•å‘¢ï¼Ÿè¿™å°±éœ€è¦set argså‘½ä»¤ã€‚\næ¯”å¦‚åœ¨BombLabå®éªŒä¸­ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€æ¬¡è§£å†³æ‰€æœ‰phaseï¼Œä½†æ˜¯æ¯æ¬¡é‡æ–°è°ƒè¯•ï¼Œå·²ç»è§£å†³çš„phaseè¿˜è¦é‡æ–°è¾“å…¥ä¸€æ¬¡ç­”æ¡ˆï¼Œè¿™å°±å¾ˆéº»çƒ¦ï¼Œå¥½åœ¨è¿™ä¸ªå®éªŒçš„ä½œè€…ä¹Ÿè€ƒè™‘åˆ°äº†ï¼Œä»–æ”¯æŒè¯»å–æ–‡æœ¬ã€‚æˆ‘ä»¬å¯ä»¥æŠŠç­”æ¡ˆé¢„å…ˆå†™å…¥ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œç¨‹åºè¯»å–å·²ç»ä¿å­˜çš„ç­”æ¡ˆå³å¯è·³è¿‡ç›¸åº”çš„phaseã€‚\nå‡è®¾æˆ‘ä»¬æŠŠç­”æ¡ˆå†™å…¥äº†solutions.txtæ–‡ä»¶ä¸­ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬åŠ è½½ç¨‹åºï¼Œç„¶åé€šè¿‡set args solutions.txtè®¾ç½®è¿è¡Œå‚æ•°ã€‚\n(gdb) file bomb Reading symbols from bomb... (gdb) set args solutions.txt (gdb) r Starting program: /home/dominic/learning-linux/bomb/bomb solutions.txt Welcome to my fiendish little bomb. You have 6 phases with which to blow yourself up. Have a nice day! Phase 1 defused. How about the next one? That\u0026#39;s number 2. Keep going! list æŸ¥çœ‹æºç  æŸ¥çœ‹ 10 è¡Œæºç  æ¯æ¡å‘½ä»¤æ˜¾ç¤º 10 è¡Œä»£ç \n(gdb) l 23 #include \u0026lt;stdio.h\u0026gt; 24 #include \u0026lt;stdlib.h\u0026gt; 25 #include \u0026#34;support.h\u0026#34; 26 #include \u0026#34;phases.h\u0026#34; 27 28 /* 29 * Note to self: Remember to erase this file so my victims will have no 30 * idea what is going on, and so they will all blow up in a 31 * spectaculary fiendish explosion. -- Dr. Evil 32 */ (gdb) l 33 34 FILE *infile; 35 36 int main(int argc, char *argv[]) 37 { 38 char *input; 39 40 /* Note to self: remember to port this bomb to Windows and put a 41 * fantastic GUI on it. */ 42 set list num è®¾ç½®é»˜è®¤æ˜¾ç¤ºä»£ç è¡Œæ•° (gdb) set list 20 //é»˜è®¤æ˜¾ç¤º20è¡Œä»£ç  list linenumber æŸ¥çœ‹æŒ‡å®šè¡Œä»£ç  (gdb) l 10 (gdb) l main.h : 10 //æŒ‡å®šmain.cæ–‡ä»¶ä¸­çš„ç¬¬åè¡Œ list function æŸ¥çœ‹æŒ‡å®šå‡½æ•°çš„ä»£ç  break æ‰“æ–­ç‚¹ break linenum å¯¹æŒ‡å®šè¡Œæ‰“æ–­ç‚¹ (gdb) b 36 Note: breakpoint 1 also set at pc 0x400da0. Breakpoint 2 at 0x400da0: file bomb.c, line 37. break function å¯¹æŒ‡å®šå‡½æ•°æ‰“æ–­ç‚¹ (gdb) b main Breakpoint 3 at 0x400da0: file bomb.c, line 37. (gdb) b phase_1 Breakpoint 4 at 0x400ee0 åˆ é™¤æ–­ç‚¹åŒ…æ‹¬ç¦ç”¨æ–­ç‚¹ delete åˆ é™¤æ‰€æœ‰æ–­ç‚¹ (gdb) delete Delete all breakpoints? (y or n) y disable breakpoint ç¦ç”¨æ–­ç‚¹ (gdb) info b #å…ˆçœ‹æœ‰å“ªäº›æ–­ç‚¹ Num Type Disp Enb Address What 3 breakpoint keep y 0x0000000000400da0 in main at bomb.c:37 4 breakpoint keep y 0x0000000000400ee0 \u0026lt;phase_1\u0026gt; (gdb) d 3 #ç¦ç”¨ç¬¬ä¸‰å·æ–­ç‚¹ (gdb) info b #å†æ¬¡æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯å‘ç°å·²ç»æ²¡æœ‰ç¬¬ä¸‰å·æ–­ç‚¹ Num Type Disp Enb Address What 4 breakpoint keep y 0x0000000000400ee0 \u0026lt;phase_1\u0026gt; clear function åˆ é™¤ä¸€ä¸ªå‡½æ•°ä¸­æ‰€æœ‰çš„æ–­ç‚¹ (gdb) info b Num Type Disp Enb Address What 4 breakpoint keep y 0x0000000000400ee0 \u0026lt;phase_1\u0026gt; (gdb) clear phase_1 (gdb) info b Deleted breakpoint 4 No breakpoints or watchpoints. å¯åŠ¨ä¸é€€å‡º run å¯åŠ¨ç¨‹åºç›´åˆ°é‡åˆ°æ–­ç‚¹ (gdb) run start å¯åŠ¨ç¨‹åºå¹¶åœ¨ç¬¬ä¸€æ¡ä»£ç å¤„åœä¸‹ (gdb) start x é…ç½® gdb å¸¸ç”¨å‘½ä»¤ gdb -q -x gdbinit //gdbinit display/z $xs display/z $x6 display/z $x7 set disassemble-next-line on b _start target remote: 34 æœ‰äº†é…ç½®æ–‡ä»¶ï¼Œå°±ä¸ç”¨æ¯æ¬¡å¯åŠ¨ gdb æ—¶éƒ½è¦é‡æ–°è¾“å…¥ä¸€éè°ƒè¯•å‘½ä»¤ã€‚\nquit é€€å‡ºè°ƒè¯• (gdb) quit è°ƒè¯•å‘½ä»¤ print æ‰“å°å˜é‡å€¼ æ ¼å¼åŒ–å­—ç¬¦ (/fmt) è¯´æ˜ /x ä»¥åå…­è¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /d ä»¥æœ‰ç¬¦å·ã€åè¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /u ä»¥æ— ç¬¦å·ã€åè¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /o ä»¥å…«è¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /t ä»¥äºŒè¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /f ä»¥æµ®ç‚¹æ•°çš„å½¢å¼æ‰“å°å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼ã€‚ /c ä»¥å­—ç¬¦å½¢å¼æ‰“å°å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼ã€‚ (gdb) p i # 10è¿›åˆ¶ $5 = 3 (gdb) p/x i # 16è¿›åˆ¶ $6 = 0x3 (gdb) p/o i # 8è¿›åˆ¶ $7 = 03 æ‰“å°åœ°å€å€¼ è¡¨ç¤ºä»å†…å­˜åœ°å€ 0x54320 è¯»å–å†…å®¹ï¼Œh è¡¨ç¤ºä»¥åŒå­—èŠ‚ä¸ºå•ä½ï¼Œ3 è¡¨ç¤ºè¾“å‡º 3 ä¸ªå•ä½ï¼Œu è¡¨ç¤ºæŒ‰ç…§åå…­è¿›åˆ¶æ˜¾ç¤ºã€‚\n(gdb) x/3uh 0x54320 æŸ¥çœ‹å½“å‰ç¨‹åºæ ˆçš„å†…å®¹ï¼šx/10x $spâ€“\u0026gt;æ‰“å° stack çš„å‰ 10 ä¸ªå…ƒç´  æŸ¥çœ‹å½“å‰ç¨‹åºæ ˆçš„ä¿¡æ¯ï¼šinfo frame\u0026mdash;-list general info about the frame æŸ¥çœ‹å½“å‰ç¨‹åºæ ˆçš„å‚æ•°ï¼šinfo argsâ€”lists arguments to the function æŸ¥çœ‹å½“å‰ç¨‹åºæ ˆçš„å±€éƒ¨å˜é‡ï¼šinfo localsâ€”list variables stored in the frame æŸ¥çœ‹å½“å‰å¯„å­˜å™¨çš„å€¼ï¼šinfo registers(ä¸åŒ…æ‹¬æµ®ç‚¹å¯„å­˜å™¨)\nptype æ‰“å°å˜é‡ç±»å‹ (gdb) ptype i type = int (gdb) ptype array[i] type = int (gdb) ptype array type = int [12] display è·Ÿè¸ªæ˜¾ç¤ºå˜é‡ printå‘½ä»¤å¯ä»¥æ‰“å°å‡ºå˜é‡çš„å€¼ï¼Œä½†æ˜¯åªæ˜¯ä¸€æ¬¡æ€§çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è·Ÿè¸ªæŸä¸ªå˜é‡çš„å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨displayå‘½ä»¤ï¼Œæ¯å½“ç¨‹åºåœ¨æ–­ç‚¹å¤„åœä¸‹ï¼Œéƒ½ä¼šæ‰“å°å‡ºè·Ÿè¸ªçš„å˜é‡å€¼ã€‚\n(gdb) display info displayæŸ¥çœ‹å·²è·Ÿè¸ªçš„å˜é‡ï¼Œdelete displayå–æ¶ˆè·Ÿè¸ªæ˜¾ç¤ºå˜é‡ã€‚\nstep æ‰§è¡Œä¸€è¡Œä»£ç  æ‰§è¡Œä¸€è¡Œä»£ç ï¼Œå¦‚æœæ”¹è¡Œä»£ç æ˜¯å‡½æ•°ï¼Œå°†è¿›å…¥å‡½æ•°å†…éƒ¨ã€‚\n(gdb) s finish è·³å‡ºå‡½æ•° å¦‚æœé€šè¿‡så•æ­¥è°ƒè¯•è¿›å…¥åˆ°å‡½æ•°å†…éƒ¨ï¼Œæƒ³è¦è·³å‡ºè¿™ä¸ªå‡½æ•°ä½“ï¼Œå¯ä»¥æ‰§è¡Œ finishå‘½ä»¤ã€‚å¦‚æœæƒ³è¦è·³å‡ºå‡½æ•°ä½“å¿…é¡»è¦ä¿è¯å‡½æ•°ä½“å†…ä¸èƒ½æœ‰æœ‰æ•ˆæ–­ç‚¹ï¼Œå¦åˆ™æ— æ³•è·³å‡ºã€‚\nnext æ‰§è¡Œä¸€è¡Œä»£ç  next å‘½ä»¤å’Œ step å‘½ä»¤åŠŸèƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯åœ¨ä½¿ç”¨ next è°ƒè¯•ç¨‹åºçš„æ—¶å€™ä¸ä¼šè¿›å…¥åˆ°å‡½æ•°ä½“å†…éƒ¨ï¼Œnext å¯ä»¥ç¼©å†™ä¸º nã€‚\nuntil è·³å‡ºå¾ªç¯ä½“ é€šè¿‡ until å‘½ä»¤å¯ä»¥ç›´æ¥è·³å‡ºæŸä¸ªå¾ªç¯ä½“ï¼Œè¿™æ ·å°±èƒ½æé«˜è°ƒè¯•æ•ˆç‡äº†ã€‚å¦‚æœæƒ³ç›´æ¥ä»å¾ªç¯ä½“ä¸­è·³å‡ºï¼Œå¿…é¡»è¦ä¿è¯ï¼Œè¦è·³å‡ºçš„å¾ªç¯ä½“å†…éƒ¨ä¸èƒ½æœ‰æœ‰æ•ˆçš„æ–­ç‚¹ï¼Œå¿…é¡»è¦åœ¨å¾ªç¯ä½“çš„å¼€å§‹ / ç»“æŸè¡Œæ‰§è¡Œè¯¥å‘½ä»¤ã€‚\nlayout åˆ†å‰²çª—å£ï¼Œè¾¹è°ƒè¯•è¾¹çœ‹æºç  layout src \u003c!DOCTYPE html\u003e Responsive Image layout asm \u003c!DOCTYPE html\u003e Responsive Image layout split \u003c!DOCTYPE html\u003e Responsive Image è¿œç¨‹è°ƒè¯• -s -S -så¯åŠ¨gdb serverï¼Œé»˜è®¤ç«¯å£å·ä¸º 1234 -Sè®©ç¨‹åºåœ¨_startå¤„åœä¸‹ã€‚\n","permalink":"https://lifeislife.cn/posts/gdb%E8%B0%83%E8%AF%95%E5%85%A5%E9%97%A8/","summary":"\u003ch2 id=\"file-åŠ è½½ç¨‹åº\"\u003efile åŠ è½½ç¨‹åº\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003egdb\u003cspan class=\"o\"\u003e)\u003c/span\u003e file bomb\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eReading symbols from bomb...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"set-args-å¸¦å‚æ•°è°ƒè¯•\"\u003eset args å¸¦å‚æ•°è°ƒè¯•\u003c/h2\u003e\n\u003cp\u003eæœ‰æ—¶å€™ç¨‹åºä¸æ˜¯ç›´æ¥å¯ä»¥è¿è¡Œçš„ï¼Œéœ€è¦åŠ ä¸Šä¸€äº›å¿…è¦çš„å‚æ•°ã€‚å¸¦ä¸Šå‚æ•°è¿è¡Œå¾ˆå®¹æ˜“ï¼Œåªè¦åœ¨ç¨‹åºåååŠ ä¸Šç›¸åº”å‚æ•°å³å¯ï¼Œä½†æ˜¯å¦‚ä½•å¸¦ä¸Šå‚æ•°è¿›è¡Œè°ƒè¯•å‘¢ï¼Ÿè¿™å°±éœ€è¦\u003ccode\u003eset args\u003c/code\u003eå‘½ä»¤ã€‚\u003c/p\u003e","title":"GDB è°ƒè¯•å…¥é—¨"},{"content":"æ•ˆæœ ä¸»é¢˜ï¼ševan\n\u003c!DOCTYPE html\u003e Responsive Image ä¸»é¢˜ï¼šdallas\n\u003c!DOCTYPE html\u003e Responsive Image ä¸»é¢˜ï¼šrobbyrussell\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœåŸå…ˆå…¶ä»–ç”µè„‘å®‰è£…è¿‡ æŠŠ.oh-my-zshæ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œ.zshrcï¼Œ.zsh_historyå¤åˆ¶åˆ°/home/user/ç›®å½•ï¼›\nå®‰è£…zsh\nsudo apt install zsh åˆ‡æ¢shell\nchsh -s /bin/zsh source ~/.zshrc å³å¯ä½¿ç”¨ã€‚æ‰€æœ‰é…ç½®éƒ½ä¼šå’ŒåŸå…ˆä¸€æ ·ã€‚\nå¦‚æœæ˜¯æ–°å®‰è£… å®˜æ–¹æ–¹æ³•ï¼Œcurlå’ŒwgetäºŒé€‰ä¸€å³å¯\ncurl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh åº”è¯¥ä¹Ÿæœ‰äººå’Œæˆ‘ä¸€æ ·ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿æ¥ GitHub å¤±è´¥çš„é—®é¢˜ï¼Œè¦ä¸å°±æ˜¯ SSL éªŒè¯å¤±è´¥ï¼Œè¦ä¸å°±æ˜¯è¿æ¥æ— å“åº”ã€‚å¯ä»¥æ›´æ¢ä¸‹é¢çš„æ–¹æ³•ã€‚\n# å…ˆä¸‹è½½ git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh ## å†æ›¿æ¢ cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc é‡å¯ç»ˆç«¯å³å¯æˆåŠŸã€‚\nå¦‚æœæ— æ³•è®¿é—® GitHubï¼Œå…¶å®oh-my-zshå¹¶ä¸éœ€è¦å®‰è£…ï¼Œå®Œæ•´çš„å·¥ç¨‹å°±æ˜¯oh-my-zshæœ¬ä½“ï¼Œåªè¦æƒ³åŠæ³•æŠŠæ•´ä¸ªå·¥ç¨‹ä¸‹è½½ä¸‹æ¥ï¼Œå¹¶é‡å‘½åä¸ºoh-my-zshå³å¯ã€‚æ‰€ä»¥æ‰¾æ‰¾ gitee æœ‰æ²¡æœ‰ç›¸å…³å·¥ç¨‹ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä»æ—§ç”µè„‘é‡Œç›´æ¥å¤åˆ¶.oh-my-zshå°±èƒ½ç”¨çš„åŸå› ã€‚\næ’ä»¶å®‰è£… è‡ªåŠ¨è¡¥å…¨å‘½ä»¤ git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions plugins=( zsh-autosuggestions ) å½©è‰²ls \u003c!DOCTYPE html\u003e Responsive Image sudo apt install lsd å¦‚æœæ²¡æœ‰è½¯ä»¶åŒ…ï¼Œè¯´æ˜ç³»ç»Ÿç‰ˆæœ¬è€æ—§ï¼Œå¯ä»¥ç›´æ¥å‰å¾€https://github.com/lsd-rs/lsd/releasesä¸‹è½½äºŒè¿›åˆ¶åŒ…å®‰è£…ï¼š\nsudo dpkg -i lsd-musl_1.1.5_amd64.deb æ·»åŠ åˆ«åï¼š\nalias ls=\u0026#39;lsd\u0026#39; alias l=\u0026#34;ls -l\u0026#34; alias ll=\u0026#39;ls -al\u0026#39; alias la=\u0026#39;ls -a\u0026#39; alias lt=\u0026#39;ls --tree\u0026#39; å‘½ä»¤è¡Œå‘½ä»¤é«˜äº® git clone https://github.com/zdharma-continuum/fast-syntax-highlighting.git ~/.oh-my-zsh/custom/plugins/fast-syntax-highlighting plugins=( fast-syntax-highlighting ) åˆ«åæç¤ºçº æ­£ å¦‚æœå‘½ä»¤æœ‰ç¼©å†™åˆ«åï¼Œæç¤ºä¸‹æ¬¡ä½¿ç”¨å»ºè®®çš„åˆ«åã€‚\ngit clone https://github.com/MichaelAquilina/zsh-you-should-use.git ~/.oh-my-zsh/custom/plugins/you-should-use plugins=( git extract sudo z thefuck zsh-autosuggestions you-should-use fast-syntax-highlighting ) é—®é¢˜ oh-my-zsh.sh parse error near `\u0026laquo;\u0026lt;' ä¸€èˆ¬æ˜¯åœ¨æ›´æ–°oh-my-zshæ—¶å‡ºç°ï¼Œå› ä¸ºæ›´æ–°ç›¸å½“äºå°±æ˜¯ä»è¿œç¨‹æ‹‰å–äº†å†…å®¹ï¼Œå¯èƒ½æœ¬åœ°çš„oh-my-zsh.shè„šæœ¬è‡ªå·±åšäº†ä¿®æ”¹ä¸è¿œç¨‹å†²çªäº†ã€‚åªè¦é€€å›ä¸Šä¸ªç‰ˆæœ¬ï¼Œé‡æ–°æ‹‰å–å°±å¯ä»¥äº†ã€‚\ncd $ZSH git reset --hard HEAD^ git pull --rebase å¦‚æœæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›å†…å®¹éœ€è¦ä¿ç•™ï¼Œå¯ä»¥æ‰“å¼€oh-my-zsh.shçœ‹çœ‹å†²çªåœ¨å“ªï¼Œè‡ªå·±åšä¸ªå¤‡ä»½ï¼Œä¿å­˜ä¸€ä¸‹ã€‚\n","permalink":"https://lifeislife.cn/posts/oh-my-zsh%E8%AE%A9%E4%BD%A0%E7%9A%84%E7%BB%88%E7%AB%AF%E6%9B%B4%E5%8A%A0%E9%A1%BA%E6%89%8B%E7%9C%BC/","summary":"\u003ch2 id=\"æ•ˆæœ\"\u003eæ•ˆæœ\u003c/h2\u003e\n\u003cp\u003eä¸»é¢˜ï¼ševan\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/11/12-36-00-26c3a41581cb4dc000d8c78d6ca8a8ce-20220911123600-4f3a26.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/11/12-36-00-26c3a41581cb4dc000d8c78d6ca8a8ce-20220911123600-4f3a26.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eä¸»é¢˜ï¼šdallas\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/11/12-36-51-167fdec4a32cab8991e86880c5f8ca19-20220911123650-efd6fd.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/11/12-36-51-167fdec4a32cab8991e86880c5f8ca19-20220911123650-efd6fd.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"oh-my-zsh è®©ä½ çš„ç»ˆç«¯æ›´åŠ é¡ºæ‰‹ï¼ˆçœ¼ï¼‰"},{"content":"æœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç å¯åœ¨æ­¤å¤„æŸ¥çœ‹ã€‚\nç»˜åˆ¶ç³»ç»Ÿç®€ä»‹ Qt çš„ç»˜å›¾ç³»ç»Ÿå…è®¸ä½¿ç”¨ç›¸åŒçš„ API åœ¨å±å¹•å’Œå…¶å®ƒæ‰“å°è®¾å¤‡ä¸Šè¿›è¡Œç»˜åˆ¶ã€‚æ•´ä¸ªç»˜å›¾ç³»ç»ŸåŸºäºQPainter,QPainterDeviceå’ŒQPaintEngineä¸‰ä¸ªç±»ã€‚\nQPainterç”¨æ¥æ‰§è¡Œç»˜åˆ¶çš„æ“ä½œï¼›QPaintDeviceæ˜¯ä¸€ä¸ªäºŒç»´ç©ºé—´çš„æŠ½è±¡ï¼Œè¿™ä¸ªäºŒç»´ç©ºé—´å…è®¸QPainteråœ¨å…¶ä¸Šé¢è¿›è¡Œç»˜åˆ¶ï¼Œä¹Ÿå°±æ˜¯QPainterå·¥ä½œçš„ç©ºé—´ï¼›QPaintEngineæä¾›äº†ç”»ç¬”ï¼ˆQPainterï¼‰åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šè¿›è¡Œç»˜åˆ¶çš„ç»Ÿä¸€çš„æ¥å£ã€‚QPaintEngineç±»åº”ç”¨äºQPainterå’ŒQPaintDeviceä¹‹é—´ï¼Œé€šå¸¸å¯¹å¼€å‘äººå‘˜æ˜¯é€æ˜çš„ã€‚\nä¸‰ä¸ªç±»çš„å…³ç³»ï¼šQPainter-\u0026gt;QPaintEngine-\u0026gt;QPaintDeviceã€‚é€šè¿‡è¿™ä¸ªå…³ç³»æˆ‘ä»¬ä¹Ÿå¯ä»¥çŸ¥é“ï¼ŒQPainteré€šè¿‡QPaintEngineç¿»è¯‘æŒ‡ä»¤åœ¨QPaintDeviceä¸Šç»˜åˆ¶ã€‚\né€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥äº†è§£ä¸€ä¸‹ç»˜åˆ¶ç³»ç»Ÿçš„ï¼Œ\n//main.h #include \u0026lt;QPainter\u0026gt; #include \u0026lt;QWidget\u0026gt; #include \u0026lt;QPaintEvent\u0026gt; #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QMainWindow\u0026gt; class PaintedWidget : public QWidget { Q_OBJECT public: PaintedWidget(QWidget *parent = 0); protected: void paintEvent(QPaintEvent *); }; //main.cpp #include \u0026#34;paintwidget.h\u0026#34; PaintedWidget::PaintedWidget(QWidget *parent) : QWidget(parent) { resize(800, 600); setWindowTitle(tr(\u0026#34;Paint Demo\u0026#34;)); } void PaintedWidget::paintEvent(QPaintEvent *) { QPainter painter(this); painter.drawLine(20, 20, 700, 20); painter.setPen(Qt::red); painter.drawRect(10, 10, 100, 400); painter.setPen(QPen(Qt::green, 5)); painter.setBrush(Qt::blue); painter.drawEllipse(0, 0, 300, 40); // painter.drawRect(120, 50, 50, 400); } int main(int argc, char *argv[]) { QApplication app(argc, argv); PaintedWidget paintMap; paintMap.show(); return app.exec(); } \u003c!DOCTYPE html\u003e Responsive Image åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä»…ä»…è®¾ç½®äº†çª—å£çš„å¤§å°å’Œæ ‡é¢˜ã€‚è€ŒpaintEvent()å‡½æ•°åˆ™æ˜¯ç»˜åˆ¶çš„ä»£ç ã€‚\né¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æ ˆä¸Šåˆ›å»ºäº†ä¸€ä¸ªQPainterå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è¿è¡ŒpaintEvent()å‡½æ•°çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡å»ºè¿™ä¸ªQPainterå¯¹è±¡ã€‚æ³¨æ„ï¼Œè¿™ä¸€ç‚¹å¯èƒ½ä¼šå¼•å‘æŸäº›ç»†èŠ‚é—®é¢˜ï¼šç”±äºæˆ‘ä»¬æ¯æ¬¡é‡å»ºQPainterï¼Œå› æ­¤ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶æ‰€è®¾ç½®çš„ç”»ç¬”é¢œè‰²ã€çŠ¶æ€ç­‰ï¼Œç¬¬äºŒæ¬¡å†è¿›å…¥è¿™ä¸ªå‡½æ•°æ—¶å°±ä¼šå…¨éƒ¨ä¸¢å¤±ã€‚æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä¿å­˜ç”»ç¬”çŠ¶æ€ï¼Œå°±å¿…é¡»è‡ªå·±ä¿å­˜æ•°æ®ï¼Œå¦åˆ™çš„è¯åˆ™éœ€è¦å°†QPainterä½œä¸ºç±»çš„æˆå‘˜å˜é‡ã€‚\npaintEvent()ä½œä¸ºé‡ç»˜å‡½æ•°ï¼Œä¼šåœ¨éœ€è¦é‡ç»˜æ—¶ç”± Qt è‡ªåŠ¨è°ƒç”¨ã€‚â€œéœ€è¦é‡ç»˜â€å¯èƒ½å‘ç”Ÿåœ¨å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”å¦‚ç»„ä»¶åˆšåˆšåˆ›å»ºå‡ºæ¥çš„æ—¶å€™å°±éœ€è¦é‡ç»˜ï¼›ç»„ä»¶æœ€å¤§åŒ–ã€æœ€å°åŒ–çš„æ—¶å€™ä¹Ÿéœ€è¦é‡æ–°ç»˜åˆ¶ï¼›ç»„ä»¶ç”±é®æŒ¡å˜æˆå®Œå…¨æ˜¾ç¤ºçš„æ—¶å€™ä¹Ÿéœ€è¦ç­‰ç­‰ã€‚\nQPainteræ¥æ”¶ä¸€ä¸ªQPaintDeviceæŒ‡é’ˆä½œä¸ºå‚æ•°ã€‚QPaintDeviceæœ‰å¾ˆå¤šå­ç±»ï¼Œæ¯”å¦‚QImageï¼Œä»¥åŠQWidgetã€‚æ³¨æ„å›å¿†ä¸€ä¸‹ï¼ŒQPaintDeviceå¯ä»¥ç†è§£æˆè¦åœ¨å“ªé‡Œå»ç»˜åˆ¶ï¼Œè€Œç°åœ¨æˆ‘ä»¬å¸Œæœ›ç”»åœ¨è¿™ä¸ªç»„ä»¶ï¼Œå› æ­¤ä¼ å…¥çš„æ˜¯ this æŒ‡é’ˆã€‚\næˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ç»˜åˆ¶çš„é¡ºåºï¼Œç›´çº¿-çŸ©å½¢ - æ¤­åœ†ï¼Œæ‰€ä»¥ç›´çº¿ä½äºæœ€ä¸‹æ–¹ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nå¦‚æœäº†è§£ OpenGLï¼Œè‚¯å®šå¬è¯´è¿‡è¿™ä¹ˆä¸€å¥è¯ï¼šOpenGL æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚æ‰€è°“çŠ¶æ€æœºï¼Œå°±æ˜¯è¯´ï¼ŒOpenGL ä¿å­˜çš„åªæ˜¯å„ç§çŠ¶æ€ã€‚æ¯”å¦‚ï¼Œå°†ç”»ç¬”é¢œè‰²è®¾ç½®æˆçº¢è‰²ï¼Œé‚£ä¹ˆï¼Œé™¤éä½ é‡æ–°è®¾ç½®å¦å¤–çš„é¢œè‰²ï¼Œå®ƒçš„é¢œè‰²ä¼šä¸€ç›´æ˜¯çº¢è‰²ã€‚QPainterä¹Ÿæ˜¯è¿™æ ·ï¼Œå®ƒçš„çŠ¶æ€ä¸ä¼šè‡ªå·±æ¢å¤ï¼Œé™¤éä½ ä½¿ç”¨äº†å„ç§è®¾ç½®å‡½æ•°ã€‚å› æ­¤ï¼Œå¦‚æœåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨æ¤­åœ†ç»˜åˆ¶ä¹‹åå†ç”»ä¸€ä¸ªçŸ©å½¢ï¼Œå®ƒçš„æ ·å¼è¿˜ä¼šæ˜¯ç»¿è‰²5åƒç´ çš„è½®å»“çº¿ä»¥åŠè“è‰²çš„å¡«å……ï¼Œé™¤éä½ æ˜¾å¼åœ°è°ƒç”¨äº†è®¾ç½®å‡½æ•°è¿›è¡ŒçŠ¶æ€çš„æ›´æ–°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿™æ˜¯å¤§å¤šæ•°ç»˜å›¾ç³»ç»Ÿçš„å®ç°æ–¹å¼ï¼ŒåŒ…æ‹¬ OpenGLã€QPainterä»¥åŠ Java2Dã€‚æ­£å› ä¸ºQPainteræ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ‰ä¼šå¼•å‡ºæˆ‘ä»¬å‰é¢æ›¾ç»ä»‹ç»è¿‡çš„ä¸€ä¸ªç»†èŠ‚é—®é¢˜ï¼šç”±äºpaintEvent()æ˜¯éœ€è¦é‡å¤è¿›å…¥çš„ï¼Œå› æ­¤ï¼Œéœ€è¦æ³¨æ„ç¬¬äºŒæ¬¡è¿›å…¥æ—¶ï¼ŒQPainterçš„çŠ¶æ€æ˜¯ä¸æ˜¯å’Œç¬¬ä¸€æ¬¡ä¸€è‡´ï¼Œå¦åˆ™çš„è¯å¯èƒ½ä¼šé€ æˆé—ªçƒçš„ç°è±¡ã€‚è¿™ä¸ªé—ªçƒå¹¶ä¸æ˜¯ç”±äºåŒç¼“å†²çš„é—®é¢˜ï¼Œè€Œæ˜¯ç”±äºç»˜åˆ¶çŠ¶æ€çš„å¿«é€Ÿåˆ‡æ¢ã€‚\nç”»åˆ·å’Œç”»ç¬” ç”»åˆ·å’Œç”»ç¬”ã€‚å‰è€…ä½¿ç”¨QBrushæè¿°ï¼Œå¤§å¤šç”¨äºå¡«å……ï¼›åè€…ä½¿ç”¨QPenæè¿°ï¼Œå¤§å¤šç”¨äºç»˜åˆ¶è½®å»“çº¿ã€‚\n//main.cpp void PaintedWidget::paintEvent(QPaintEvent *) { QPainter painter(this); painter.drawLine(20, 20, 700, 20); painter.setPen(Qt::red); painter.drawRect(10, 10, 100, 400); painter.setPen(QPen(Qt::green, 5)); painter.setBrush(Qt::blue); painter.drawEllipse(0, 0, 300, 40); painter.drawRect(120, 50, 50, 400); ///////////////////ç”»ç¬”ä¸ç¬”åˆ· QLinearGradient gradient(QPointF(180, 50), QPointF(230, 400)); gradient.setColorAt(0, Qt::black); gradient.setColorAt(1, Qt::red); gradient.setSpread(QGradient::PadSpread); QBrush brush(gradient); QPen pen(Qt::green, 3, Qt::DashDotLine, Qt::RoundCap, Qt::RoundJoin); // painter.setPen(pen); painter.setBrush(brush); painter.drawRect(180, 50, 50, 400); } \u003c!DOCTYPE html\u003e Responsive Image ç”»åˆ·çš„style()å®šä¹‰äº†å¡«å……çš„æ ·å¼ï¼Œä½¿ç”¨Qt::BrushStyleæšä¸¾ï¼Œé»˜è®¤å€¼æ˜¯Qt::NoBrushï¼Œä¹Ÿå°±æ˜¯ä¸è¿›è¡Œä»»ä½•å¡«å……ã€‚æˆ‘ä»¬å¯ä»¥ä»ä¸‹é¢çš„å›¾ç¤ºä¸­çœ‹åˆ°å„ç§å¡«å……æ ·å¼çš„åŒºåˆ«ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ç”»åˆ·çš„gradient()å®šä¹‰äº†æ¸å˜å¡«å……ã€‚è¿™ä¸ªå±æ€§åªæœ‰åœ¨æ ·å¼æ˜¯Qt::LinearGradientPatternã€Qt::RadialGradientPatternæˆ–è€…Qt::ConicalGradientPatternä¹‹ä¸€æ—¶æ‰æœ‰æ•ˆã€‚æ¸å˜å¯ä»¥ç”±QGradientå¯¹è±¡è¡¨ç¤ºã€‚Qt æä¾›äº†ä¸‰ç§æ¸å˜ï¼šQLinearGradientã€QConicalGradientå’ŒQRadialGradientï¼Œå®ƒä»¬éƒ½æ˜¯QGradientçš„å­ç±»ã€‚\næœ¬æ–‡ä»¥QLinearGradientä¸ºä¾‹ï¼Œä¸¤ä¸ªåæ ‡åˆ†åˆ«ä¸ºèµ·ç‚¹ä¸é‡ç‚¹åæ ‡ã€‚setColorAtè®¾ç½®æ¸å˜é¢œè‰²ï¼Œ0è¡¨ç¤ºå¼€å§‹ï¼Œ1è¡¨ç¤ºç»“æŸã€‚æ„æ€å°±æ˜¯ä»é»‘è‰²æ¸å˜åˆ°çº¢è‰²ã€‚setSpreadè®¾ç½®æ˜¾ç¤ºæ–¹å¼ä¸ºå¹³é“ºã€‚\nQLinearGradient gradient(QPointF(180, 50), QPointF(230, 400)); gradient.setColorAt(0, Qt::black); gradient.setColorAt(1, Qt::red); gradient.setSpread(QGradient::PadSpread); é»˜è®¤çš„ç”»ç¬”å±æ€§æ˜¯çº¯é»‘è‰²ï¼Œ0 åƒç´ ï¼Œæ–¹å½¢ç¬”å¸½ï¼ˆQt::SquareCapï¼‰ï¼Œæ–œé¢å‹è¿æ¥ï¼ˆQt::BevelJoinï¼‰ã€‚\nç”»ç¬”æ ·å¼æœ‰ä¸€ä¸‹å‡ ç§ï¼Œ \u003c!DOCTYPE html\u003e Responsive Image ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨setDashPattern()å‡½æ•°è‡ªå®šä¹‰æ ·å¼ï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š\nQVector\u0026lt;qreal\u0026gt; dashes; qreal space = 4; dashes \u0026lt;\u0026lt; 1 \u0026lt;\u0026lt; space \u0026lt;\u0026lt; 3 \u0026lt;\u0026lt; space \u0026lt;\u0026lt; 9 \u0026lt;\u0026lt; space \u0026lt;\u0026lt; 27 \u0026lt;\u0026lt; space \u0026lt;\u0026lt; 9 \u0026lt;\u0026lt; space; pen.setColor(Qt::black); pen.setDashPattern(dashes); painter.setPen(pen); painter.drawLine(30, 300, 600, 30); \u003c!DOCTYPE html\u003e Responsive Image pen.setCapStyle(Qt::RoundCap)ç¬”å¸½å®šä¹‰äº†ç”»ç¬”æœ«ç«¯çš„æ ·å¼ï¼Œä¾‹å¦‚ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image pen.setJoinStyle(Qt::RoundJoin)è¿æ¥æ ·å¼å®šä¹‰äº†ä¸¤æ¡çº¿è¿æ¥æ—¶çš„æ ·å¼ï¼Œä¾‹å¦‚ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image åèµ°æ · æˆ‘ä»¬åœ¨å…‰æ …å›¾å½¢æ˜¾ç¤ºå™¨ä¸Šç»˜åˆ¶éæ°´å¹³ã€éå‚ç›´çš„ç›´çº¿æˆ–å¤šè¾¹å½¢è¾¹ç•Œæ—¶ï¼Œæˆ–å¤šæˆ–å°‘ä¼šå‘ˆç°é”¯é½¿çŠ¶å¤–è§‚ã€‚è¿™æ˜¯å› ä¸ºç›´çº¿å’Œå¤šè¾¹å½¢çš„è¾¹ç•Œæ˜¯è¿ç»­çš„ï¼Œè€Œå…‰æ …åˆ™æ˜¯ç”±ç¦»æ•£çš„ç‚¹ç»„æˆã€‚åœ¨å…‰æ …æ˜¾ç¤ºè®¾å¤‡ä¸Šè¡¨ç°ç›´çº¿ã€å¤šè¾¹å½¢ç­‰ï¼Œå¿…é¡»åœ¨ç¦»æ•£ä½ç½®é‡‡æ ·ã€‚ç”±äºé‡‡æ ·ä¸å……åˆ†é‡å»ºåé€ æˆçš„ä¿¡æ¯å¤±çœŸï¼Œå°±å«èµ°æ ·ï¼›ç”¨äºå‡å°‘æˆ–æ¶ˆé™¤è¿™ç§æ•ˆæœçš„æŠ€æœ¯ï¼Œå°±ç§°ä¸ºåèµ°æ ·ã€‚ä¹Ÿå°±æ˜¯å¸¸è¯´çš„é˜²é”¯é½¿ç°è±¡ã€‚å› ä¸ºæ€§èƒ½æ–¹é¢çš„è€ƒè™‘ï¼ŒQt é»˜è®¤å…³é—­åèµ°æ ·ã€‚\nvoid paintEvent(QPaintEvent *) { ///////////////////å¯¹æ¯”åèµ°æ ·æ•ˆæœ QPainter painter(this); painter.setPen(QPen(Qt::black, 5, Qt::DashDotLine, Qt::RoundCap)); painter.setBrush(Qt::yellow); painter.drawEllipse(550, 150, 200, 150); painter.setRenderHint(QPainter::Antialiasing, true); painter.setPen(QPen(Qt::black, 5, Qt::DashDotLine, Qt::RoundCap)); painter.setBrush(Qt::yellow); painter.drawEllipse(300, 150, 200, 150); } \u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬å¯ä»¥æ˜æ˜¾è§‚å¯Ÿåˆ°å³è¾¹çš„æ¤­åœ†è½®å»“æ˜¯æœ‰é”¯é½¿ç°è±¡çš„ï¼Œè¿™ä¸¤ä¸ªæ¤­åœ†é™¤äº†ä½ç½®ä½ç½®ä¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å³è¾¹çš„å¼€å¯äº†åé”¯é½¿ã€‚\npainter.setRenderHint(QPainter::Antialiasing, true); è™½ç„¶åèµ°æ ·æ¯”ä¸åèµ°æ ·çš„å›¾åƒè´¨é‡é«˜å¾ˆå¤šï¼Œä½†æ˜¯ï¼Œæ²¡æœ‰åèµ°æ ·çš„å›¾å½¢ç»˜åˆ¶è¿˜æ˜¯æœ‰å¾ˆå¤§ç”¨å¤„çš„ã€‚é¦–å…ˆï¼Œå°±åƒå‰é¢è¯´çš„ä¸€æ ·ï¼Œåœ¨ä¸€äº›å¯¹å›¾åƒè´¨é‡è¦æ±‚ä¸é«˜çš„ç¯å¢ƒä¸‹ï¼Œæˆ–è€…è¯´æ€§èƒ½å—é™çš„ç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚åµŒå…¥å¼å’Œæ‰‹æœºç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯ä¸è¿›è¡Œåèµ°æ ·çš„ã€‚å¦å¤–ï¼Œåœ¨ä¸€äº›å¿…é¡»ç²¾ç¡®æ“ä½œåƒç´ çš„åº”ç”¨ä¸­ï¼Œä¹Ÿæ˜¯ä¸èƒ½è¿›è¡Œåèµ°æ ·çš„ã€‚\nåæ ‡ç³»ç»Ÿ åœ¨ Qt çš„åæ ‡ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªåƒç´ å æ® 1x1 çš„ç©ºé—´ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€å¼ æ–¹æ ¼çº¸ï¼Œæ¯ä¸ªå°æ ¼éƒ½æ˜¯ 1 ä¸ªåƒç´ ã€‚æ–¹æ ¼çš„ç„¦ç‚¹å®šä¹‰äº†åæ ‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåƒç´  (x, y) çš„ä¸­å¿ƒä½ç½®å…¶å®æ˜¯åœ¨(x + 0.5, y + 0.5)çš„ä½ç½®ä¸Šã€‚è¿™ä¸ªåæ ‡ç³»ç»Ÿå®é™…ä¸Šæ˜¯ä¸€ä¸ªâ€œåŠåƒç´ åæ ‡ç³»â€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„ç¤ºæ„å›¾æ¥ç†è§£è¿™ç§åæ ‡ç³»ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåƒç´ çš„ç”»ç¬”è¿›è¡Œç»˜åˆ¶ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ªç»˜åˆ¶åƒç´ éƒ½æ˜¯ä»¥åæ ‡ç‚¹ä¸ºä¸­å¿ƒçš„çŸ©å½¢ã€‚æ³¨æ„ï¼Œè¿™æ˜¯åæ ‡çš„é€»è¾‘è¡¨ç¤ºï¼Œå®é™…ç»˜åˆ¶åˆ™ä¸æ­¤ä¸åŒã€‚å› ä¸ºåœ¨å®é™…è®¾å¤‡ä¸Šï¼Œåƒç´ æ˜¯æœ€å°å•ä½ï¼Œæˆ‘ä»¬ä¸èƒ½åƒä¸Šé¢ä¸€æ ·ï¼Œåœ¨ä¸¤ä¸ªåƒç´ ä¹‹é—´è¿›è¡Œç»˜åˆ¶ã€‚æ‰€ä»¥åœ¨å®é™…ç»˜åˆ¶æ—¶ï¼ŒQt çš„å®šä¹‰æ˜¯ï¼Œç»˜åˆ¶ç‚¹æ‰€åœ¨åƒç´ æ˜¯é€»è¾‘å®šä¹‰ç‚¹çš„å³ä¸‹æ–¹çš„åƒç´ ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¢ç©¶ Qt ç»˜åˆ¶å›¾åƒçš„åæ ‡æƒ…å†µï¼Œ å¯¹äºç”»ç¬”å¤§å°ä¸ºä¸€ä¸ªåƒç´ çš„æƒ…å†µæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œå½“æˆ‘ä»¬ç»˜åˆ¶çŸ©å½¢å·¦ä¸Šè§’ (1, 2) æ—¶ï¼Œå®é™…ç»˜åˆ¶çš„åƒç´ æ˜¯åœ¨å³ä¸‹æ–¹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å½“ç”»ç¬”å¤§å°è¶…è¿‡ 1 ä¸ªåƒç´ æ—¶ï¼Œå°±ç•¥æ˜¾å¤æ‚äº†ã€‚å¦‚æœç»˜åˆ¶åƒç´ æ˜¯å¶æ•°ï¼Œåˆ™å®é™…ç»˜åˆ¶ä¼šåŒ…è£¹ä½é€»è¾‘åæ ‡å€¼ï¼›å¦‚æœæ˜¯å¥‡æ•°ï¼Œåˆ™æ˜¯åŒ…è£¹ä½é€»è¾‘åæ ‡å€¼ï¼Œå†åŠ ä¸Šå³ä¸‹è§’ä¸€ä¸ªåƒç´ çš„åç§»ã€‚å…·ä½“è¯·çœ‹ä¸‹é¢çš„å›¾ç¤ºï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœå®é™…ç»˜åˆ¶æ˜¯å¶æ•°åƒç´ ï¼Œåˆ™ä¼šå°†é€»è¾‘åæ ‡å€¼å¤¹åœ¨ç›¸ç­‰çš„ä¸¤éƒ¨åˆ†åƒç´ ä¹‹é—´ï¼›å¦‚æœæ˜¯å¥‡æ•°ï¼Œåˆ™ä¼šåœ¨å³ä¸‹æ–¹å¤šå‡ºä¸€ä¸ªåƒç´ ã€‚\nQt çš„è¿™ç§å¤„ç†ï¼Œå¸¦æ¥çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½è·å–ä¸åˆ°çœŸå®çš„åæ ‡å€¼ã€‚ç”±äºå†å²åŸå› ï¼ŒQRect::right()å’ŒQRect::bottom()çš„è¿”å›å€¼å¹¶ä¸æ˜¯çŸ©å½¢å³ä¸‹è§’ç‚¹çš„çœŸå®åæ ‡å€¼ï¼šQRect::right()è¿”å›çš„æ˜¯left() + width() - 1ï¼›QRect::bottom()åˆ™è¿”å› top() + height() - 1ï¼Œä¸Šå›¾çš„ç»¿è‰²ç‚¹æŒ‡å‡ºäº†è¿™ä¸¤ä¸ªå‡½æ•°çš„è¿”å›ç‚¹çš„åæ ‡ã€‚\nä¸ºé¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å»ºè®®æ˜¯ä½¿ç”¨QRectFã€‚QRectFä½¿ç”¨æµ®ç‚¹å€¼ï¼Œè€Œä¸æ˜¯æ•´æ•°å€¼ï¼Œæ¥æè¿°åæ ‡ã€‚è¿™ä¸ªç±»çš„ä¸¤ä¸ªå‡½æ•°QRectF::right()å’ŒQRectF::bottom()æ˜¯æ­£ç¡®çš„ã€‚å¦‚æœä½ ä¸å¾—ä¸ä½¿ç”¨QRectï¼Œé‚£ä¹ˆå¯ä»¥åˆ©ç”¨ x() + width() å’Œ y() + height()æ¥æ›¿ä»£ right()å’Œbottom()å‡½æ•°ã€‚\nå¯¹äºåèµ°æ ·ï¼Œå®é™…ç»˜åˆ¶ä¼šåŒ…è£¹ä½é€»è¾‘åæ ‡å€¼ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å‰é¢è¯´è¿‡ï¼ŒQPainteræ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚é‚£ä¹ˆï¼Œæœ‰æ—¶æˆ‘æƒ³ä¿å­˜ä¸‹å½“å‰çš„çŠ¶æ€ï¼šå½“æˆ‘ä¸´æ—¶ç»˜åˆ¶æŸäº›å›¾åƒæ—¶ï¼Œå°±å¯èƒ½æƒ³è¿™ä¹ˆåšã€‚å½“ç„¶ï¼Œæˆ‘ä»¬æœ‰æœ€åŸå§‹çš„åŠæ³•ï¼šå°†å¯èƒ½æ”¹å˜çš„çŠ¶æ€ï¼Œæ¯”å¦‚ç”»ç¬”é¢œè‰²ã€ç²—ç»†ç­‰ï¼Œåœ¨ä¸´æ—¶ç»˜åˆ¶ç»“æŸä¹‹åå†å…¨éƒ¨æ¢å¤ã€‚å¯¹æ­¤ï¼ŒQPainteræä¾›äº†å†…ç½®çš„å‡½æ•°ï¼šsave()å’Œrestore()ã€‚save()å°±æ˜¯ä¿å­˜ä¸‹å½“å‰çŠ¶æ€ï¼›restore()åˆ™æ¢å¤ä¸Šä¸€æ¬¡ä¿å­˜çš„ç»“æœã€‚è¿™ä¸¤ä¸ªå‡½æ•°å¿…é¡»æˆå¯¹å‡ºç°ï¼šQPainterä½¿ç”¨æ ˆæ¥ä¿å­˜æ•°æ®ï¼Œæ¯ä¸€æ¬¡save()ï¼Œå°†å½“å‰çŠ¶æ€å‹å…¥æ ˆé¡¶ï¼Œrestore()åˆ™å¼¹å‡ºæ ˆé¡¶è¿›è¡Œæ¢å¤ã€‚\nåœ¨äº†è§£äº†è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œç¤ºä¾‹ä»£ç äº†ï¼š\n//ç»˜åˆ¶ä¸€ä¸ªç½‘æ ¼èƒŒæ™¯ void CoordinateWidget::paintGrid() { size_t win_width = this-\u0026gt;geometry().width(); size_t win_height = this-\u0026gt;geometry().height(); QPainter painter(this); for (size_t x = 0; x \u0026lt; win_width; x += 25) { painter.drawLine(QPoint(x, 1), QPoint(x, win_height)); } for (size_t y = 0; y \u0026lt; win_height; y += 25) { painter.drawLine(QPoint(1, y), QPoint(win_width, y)); } } void CoordinateWidget::paintEvent(QPaintEvent *) { paintGrid(); QPainter painter(this); painter.fillRect(10, 10, 50, 100, Qt::red); painter.save(); painter.translate(100, 0); // å‘å³å¹³ç§» 100px painter.fillRect(10, 10, 50, 100, Qt::yellow); painter.restore(); painter.save(); painter.translate(300, 0); // å‘å³å¹³ç§» 300px painter.rotate(30); // é¡ºæ—¶é’ˆæ—‹è½¬ 30 åº¦ painter.fillRect(10, 10, 50, 100, Qt::green); painter.restore(); painter.save(); painter.translate(400, 0); // å‘å³å¹³ç§» 400px painter.scale(2, 3); // æ¨ªåæ ‡å•ä½æ”¾å¤§ 2 å€ï¼Œçºµåæ ‡æ”¾å¤§ 3 å€ painter.fillRect(10, 10, 50, 100, Qt::blue); painter.restore(); painter.save(); painter.translate(600, 0); // å‘å³å¹³ç§» 600px painter.shear(0, 1); // æ¨ªå‘ä¸å˜ï¼Œçºµå‘æ‰­æ›² 1 å€ painter.fillRect(10, 10, 50, 100, Qt::cyan); painter.restore(); } Qt æä¾›äº†å››ç§åæ ‡å˜æ¢ï¼šå¹³ç§» translateï¼Œæ—‹è½¬ rotateï¼Œç¼©æ”¾ scale å’Œæ‰­æ›² shearã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨ (10, 10) ç‚¹ç»˜åˆ¶ä¸€ä¸ªçº¢è‰²çš„ 50x100 çŸ©å½¢ã€‚ä¿å­˜å½“å‰çŠ¶æ€ï¼Œå°†åæ ‡ç³»å¹³ç§»åˆ° (100, 0)ï¼Œç»˜åˆ¶ä¸€ä¸ªé»„è‰²çš„çŸ©å½¢ã€‚æ³¨æ„ï¼Œtranslate()æ“ä½œå¹³ç§»çš„æ˜¯åæ ‡ç³»ï¼Œä¸æ˜¯çŸ©å½¢ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯åœ¨(10, 10) ç‚¹ç»˜åˆ¶ä¸€ä¸ª 50x100 çŸ©å½¢ï¼Œç°åœ¨ï¼Œå®ƒè·‘åˆ°äº†å³ä¾§çš„ä½ç½®ã€‚ç„¶åæ¢å¤å…ˆå‰çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æŠŠåæ ‡ç³»é‡æ–°è®¾ä¸ºé»˜è®¤åæ ‡ç³»ï¼ˆç›¸å½“äºè¿›è¡Œtranslate(-100, 0)ï¼‰ï¼Œå†è¿›è¡Œä¸‹é¢çš„æ“ä½œã€‚ä¹‹åä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚ç”±äºæˆ‘ä»¬åªæ˜¯ä¿å­˜äº†é»˜è®¤åæ ‡ç³»çš„çŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬ä¹‹åçš„translate()æ¨ªåæ ‡å€¼å¿…é¡»å¢åŠ ï¼Œå¦åˆ™å°±ä¼šè¦†ç›–æ‰å‰é¢çš„å›¾å½¢ã€‚æ‰€æœ‰è¿™äº›æ“ä½œéƒ½æ˜¯é’ˆå¯¹åæ ‡ç³»çš„ï¼Œå› æ­¤åœ¨ç»˜åˆ¶æ—¶ï¼Œæˆ‘ä»¬æä¾›çš„çŸ©å½¢çš„åæ ‡å‚æ•°éƒ½æ˜¯ä¸å˜çš„ã€‚\nä¸ºäº†æ›´ç›´è§‚çš„æŸ¥çœ‹ç»˜åˆ¶åæ ‡ï¼Œå…ˆåœ¨èƒŒæ™¯ç”»äº†ä¸€ä¸ªç½‘æ ¼ã€‚\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/qt%E7%BB%98%E5%88%B6%E7%B3%BB%E7%BB%9F/","summary":"\u003cp\u003eæœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç å¯åœ¨\u003ca href=\"https://github.com/Dunky-Z/learning-qt/tree/main/QtRoad2\"\u003eæ­¤å¤„æŸ¥çœ‹\u003c/a\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"ç»˜åˆ¶ç³»ç»Ÿç®€ä»‹\"\u003eç»˜åˆ¶ç³»ç»Ÿç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eQt çš„ç»˜å›¾ç³»ç»Ÿå…è®¸ä½¿ç”¨ç›¸åŒçš„ API åœ¨å±å¹•å’Œå…¶å®ƒæ‰“å°è®¾å¤‡ä¸Šè¿›è¡Œç»˜åˆ¶ã€‚æ•´ä¸ªç»˜å›¾ç³»ç»ŸåŸºäº\u003ccode\u003eQPainter\u003c/code\u003e,\u003ccode\u003eQPainterDevice\u003c/code\u003eå’Œ\u003ccode\u003eQPaintEngine\u003c/code\u003eä¸‰ä¸ªç±»ã€‚\u003c/p\u003e","title":"Qt ç»˜åˆ¶ç³»ç»Ÿ"},{"content":"è®¡ç®—æœºåŸºç¡€ è®¡ç®—æœºç¡¬ä»¶åŸºç¡€ ä¸¤å¤§ç¡¬ä»¶æ¶æ„\nå†¯è¯ºä¾æ›¼æ¶æ„\nä¸€æ ¹æ€»çº¿ï¼Œå¼€é”€å°ï¼Œæ§åˆ¶é€»è¾‘å®ç°ç®€å•\næ‰§è¡Œæ•ˆç‡ä½\n\u003c!DOCTYPE html\u003e Responsive Image å“ˆä½›æ¶æ„\nä¸ä¸Šä¸€æ¶æ„ç›¸å \u003c!DOCTYPE html\u003e Responsive Image ç¨‹åºçš„å­˜å‚¨ä¸æ‰§è¡Œ .cæ–‡ä»¶ç»è¿‡ç¼–è¯‘é“¾æ¥ï¼Œç”Ÿæˆ.outæ–‡ä»¶ã€‚åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåˆ°æ§åˆ¶å•å…ƒè¿è¡Œã€‚è¿›è¡Œå–å€¼ï¼Œè¯‘ç ï¼Œæ‰§è¡Œã€‚\næ™¶æŒ¯å‘å‡ºè„‰å†²ã€‚ \u003c!DOCTYPE html\u003e Responsive Image è¯­è¨€çš„è®¾è®¡ä¸è¿›åŒ– \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ä¸Šå›¾æ˜¯å†¯è¯ºä¾æ›¼æ¶æ„ï¼Œç‰¹ç‚¹å°±æ˜¯æŒ‡ä»¤ä¸æ•°æ®æ”¾åœ¨ä¸€èµ·ã€‚é»„è‰²éƒ¨åˆ†è¡¨ç¤ºæŒ‡ä»¤ï¼Œç»¿è‰²éƒ¨åˆ†è¡¨ç¤ºæ•°æ®ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹æŒ‡ä»¤æ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚ ProgramCounteræŒ‡åˆ°å³å›¾å†…å­˜çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œç¨‹åºå¼€å§‹æ‰§è¡Œã€‚å°†ç¬¬ä¸€æ¡ æŒ‡ä»¤è¯»å…¥æŒ‡ä»¤å¯„å­˜å™¨ã€‚ç„¶åå°†æŒ‡ä»¤è§£ç ï¼Œæ ¹æ®ä¹‹å‰çš„è§„å®šï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“è¿™æ¡æŒ‡ä»¤æ˜¯å°†0100(äºŒè¿›åˆ¶å³ 5)ä½ç½®çš„æ•°æ®ï¼Œ00(load)åˆ°00(Register 0)ä¸­ã€‚ä¸‹é¢çš„æŒ‡ä»¤ä¸€æ¬¡ç±»æ¨ï¼Œæ¯æ¬¡å–æŒ‡ï¼ŒProgram Counterç§»åŠ¨ä¸€æ¬¡ã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/risc-v%E5%85%A5%E9%97%A8-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/","summary":"\u003ch2 id=\"è®¡ç®—æœºåŸºç¡€\"\u003eè®¡ç®—æœºåŸºç¡€\u003c/h2\u003e\n\u003ch3 id=\"è®¡ç®—æœºç¡¬ä»¶åŸºç¡€\"\u003eè®¡ç®—æœºç¡¬ä»¶åŸºç¡€\u003c/h3\u003e\n\u003cp\u003eä¸¤å¤§ç¡¬ä»¶æ¶æ„\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå†¯è¯ºä¾æ›¼æ¶æ„\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eä¸€æ ¹æ€»çº¿ï¼Œå¼€é”€å°ï¼Œæ§åˆ¶é€»è¾‘å®ç°ç®€å•\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ‰§è¡Œæ•ˆç‡ä½\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202108211529332.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/202108211529332.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"RISC-V å…¥é—¨ - è®¡ç®—æœºåŸºç¡€"},{"content":"äº†è§£äº†å¦‚ä½•åœ¨VSCode ä¸­è°ƒè¯•ç¨‹åºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ VSCode ä¸­æ­å»ºè°ƒè¯• QEMU çš„ç¯å¢ƒã€‚\né…ç½® é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸‹è½½å’Œç¼–è¯‘ QEMU æºç \n./configure --enable-debug --target-list=riscv32-softmmu,riscv32-linux-user --enable-kvm ä¸€å®šè¦åŠ ä¸Š--enable-debugï¼Œç¼–è¯‘å‡ºçš„ç¨‹åºæ‰å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œä¸ç”¨è®¾ç½®å®‰è£…è·¯å¾„ï¼Œç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨åœ¨ qemu æ–‡ä»¶å¤¹ä¸‹è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªbuildæ–‡ä»¶å¤¹ï¼Œç¼–è¯‘åçš„ç¨‹åºä¹Ÿåœ¨buildæ–‡ä»¶å¤¹ä¸‹ã€‚\nç”¨ VSCode æ‰“å¼€qemu-6.X.Xæ–‡ä»¶å¤¹ï¼ŒCtrl+Shift+Dæ‰“å¼€è°ƒè¯•é…ç½®ã€‚å¦‚æœå‚è€ƒè¿‡VSCode ä¸­è°ƒè¯•ç¨‹åºè¿™ç¯‡æ–‡ç« ï¼Œæ¥ä¸‹æ¥å°±å¾ˆå®¹æ˜“ã€‚æˆ‘ä»¬åªéœ€è¦å°†launch.jasonæ–‡ä»¶ä¸­çš„programå±æ€§æ”¹ä¸º${workspaceFolder}/build/qemu-system-riscv32å³å¯ã€‚\nè°ƒè¯• æ‰“å¼€qemu-6.X.X/softmmu/main.cæ–‡ä»¶ï¼Œåœ¨mainå‡½æ•°å…¥å£å¤„æ‰“ä¸Šæ–­ç‚¹ï¼Œå³å¯å¼€å§‹è°ƒè¯•ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç°åœ¨åªéœ€è¦ç‚¹å‡»å±å¹•ä¸Šçš„å›¾æ ‡ï¼Œå°±å¯ä»¥å¿«é€Ÿçš„è¿›è¡Œå•æ­¥è°ƒè¯•ã€‚\nå¦‚æœéœ€è¦è¿›è¡Œå‘½ä»¤è¡Œæ“ä½œï¼Œåœ¨å±å¹•ä¸‹æ–¹æ‰“å¼€DEBUG CONSOLEï¼Œè¾“å…¥-exec+æ­£å¸¸å‘½ä»¤è¡Œä¸‹çš„å‘½ä»¤å³å¯åœ¨å‘½ä»¤è¡Œä¸­è¿›è¡Œæ›´å¤šçš„è°ƒè¯•ã€‚å¦‚æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯-exec info breakpoints\n\u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/vscode%E5%8D%95%E6%AD%A5%E8%B0%83%E8%AF%95qemu/","summary":"\u003cp\u003eäº†è§£äº†å¦‚ä½•åœ¨\u003ca href=\"https://dunky-z.github.io/2021/08/23/VSCode%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F/\"\u003eVSCode ä¸­è°ƒè¯•ç¨‹åº\u003c/a\u003eï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ VSCode ä¸­æ­å»ºè°ƒè¯• QEMU çš„ç¯å¢ƒã€‚\u003c/p\u003e\n\u003ch2 id=\"é…ç½®\"\u003eé…ç½®\u003c/h2\u003e\n\u003cp\u003eé¦–å…ˆæˆ‘ä»¬éœ€è¦\u003ca href=\"https://dunky-z.github.io/2021/07/23/QEMU%E5%88%9D%E8%AF%86/\"\u003eä¸‹è½½å’Œç¼–è¯‘ QEMU æºç \u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e./configure --enable-debug --target-list=riscv32-softmmu,riscv32-linux-user --enable-kvm\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¸€å®šè¦åŠ ä¸Š\u003ccode\u003e--enable-debug\u003c/code\u003eï¼Œç¼–è¯‘å‡ºçš„ç¨‹åºæ‰å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œä¸ç”¨è®¾ç½®å®‰è£…è·¯å¾„ï¼Œç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨åœ¨ qemu æ–‡ä»¶å¤¹ä¸‹è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª\u003ccode\u003ebuild\u003c/code\u003eæ–‡ä»¶å¤¹ï¼Œç¼–è¯‘åçš„ç¨‹åºä¹Ÿåœ¨\u003ccode\u003ebuild\u003c/code\u003eæ–‡ä»¶å¤¹ä¸‹ã€‚\u003c/p\u003e","title":"VSCode å•æ­¥è°ƒè¯• QEMU"},{"content":"è®¾ç½®ä¸€ä¸ªæ—‹è½¬æ•ˆæœï¼Œå°†ç™»å½•ç•Œé¢æ—‹è½¬ç¿»ä¸ªé¢ï¼Œè®¾ç½®ä¸€äº›ç½‘ç»œå‚æ•°ã€‚\næ•ˆæœ \u003c!DOCTYPE html\u003e Responsive Image ç½‘ç»œå‚æ•°è®¾ç½®ç•Œé¢å¸ƒå±€ \u003c!DOCTYPE html\u003e Responsive Image ç½‘ç»œå‚æ•°è®¾ç½®ç•Œé¢ //loginnetsetwindow.cpp //åˆå§‹åŒ–æ ‡é¢˜ void LoginNetSetWindow::initMyTitle() { m_titleBar-\u0026gt;move(0, 0); m_titleBar-\u0026gt;raise(); m_titleBar-\u0026gt;setBackgroundColor(0, 0, 0, true); m_titleBar-\u0026gt;setButtonType(MIN_BUTTON); m_titleBar-\u0026gt;setTitleWidth(this-\u0026gt;width()); m_titleBar-\u0026gt;setMoveParentWindowFlag(false); } void LoginNetSetWindow::initWindow() { QLabel* pBack = new QLabel(this); QMovie *movie = new QMovie(); movie-\u0026gt;setFileName(\u0026#34;:/Resources/NetSetWindow/headBack.gif\u0026#34;); pBack-\u0026gt;setMovie(movie); movie-\u0026gt;start(); pBack-\u0026gt;move(0, 0); connect(ui.pButtonOk, SIGNAL(clicked()), this, SIGNAL(rotateWindow())); connect(ui.pButtonCancel, SIGNAL(clicked()), this, SIGNAL(rotateWindow())); ui.comboBoxNetType-\u0026gt;addItem(QStringLiteral(\u0026#34;ä¸ä½¿ç”¨ä»£ç†\u0026#34;)); ui.comboBoxServerType-\u0026gt;addItem(QStringLiteral(\u0026#34;ä¸ä½¿ç”¨é«˜çº§é€‰é¡¹\u0026#34;)); } void LoginNetSetWindow::paintEvent(QPaintEvent *event) { // ç»˜åˆ¶èƒŒæ™¯å›¾; QPainter painter(this); QPainterPath pathBack; pathBack.setFillRule(Qt::WindingFill); pathBack.addRoundedRect(QRect(0, 0, this-\u0026gt;width(), this-\u0026gt;height()), 3, 3); painter.setRenderHint(QPainter::Antialiasing, true); painter.fillPath(pathBack, QBrush(QColor(235, 242, 249))); QPainterPath pathBottom; pathBottom.setFillRule(Qt::WindingFill); pathBottom.addRoundedRect(QRect(0, 300, this-\u0026gt;width(), this-\u0026gt;height() - 300), 3, 3); painter.setRenderHint(QPainter::Antialiasing, true); painter.fillPath(pathBottom, QBrush(QColor(205, 226, 242))); painter.setPen(QPen(QColor(160 , 175 , 189))); painter.drawRoundedRect(QRect(0, 0, this-\u0026gt;width(), this-\u0026gt;height()), 3, 3); } initMyTitle()å°±ä¸å¤šè¯´äº†ï¼Œå’Œæ­£é¢ç™»å½•ç•Œé¢å·®ä¸å¤šã€‚\nQPainterPathç±» å®ƒæ˜¯ç”±ä¸€äº›å›¾å½¢å¦‚æ›²çº¿ã€çŸ©å½¢ã€æ¤­åœ†ç»„æˆçš„å¯¹è±¡ã€‚ä¸»è¦çš„ç”¨é€”æ˜¯ï¼Œèƒ½ä¿å­˜å·²ç»ç»˜åˆ¶å¥½çš„å›¾å½¢ã€‚å®ç°å›¾å½¢å…ƒç´ çš„æ„é€ å’Œå¤ç”¨ï¼›å›¾å½¢çŠ¶åªéœ€åˆ›å»ºä¸€æ¬¡ï¼Œç„¶åè°ƒç”¨QPainter::drawPath() å‡½æ•°å¤šæ¬¡ç»˜åˆ¶ã€‚painterpathå¯ä»¥åŠ å…¥é—­åˆæˆ–ä¸é—­åˆçš„å›¾å½¢ ( å¦‚ï¼šçŸ©å½¢ã€æ¤­åœ†å’Œæ›²çº¿) ã€‚QPainterPath å¯ç”¨äºå¡«å……ï¼Œæè¾¹ï¼Œclippingã€‚\nsetFillRule()è®¾ç½®å¡«å……æ¨¡å¼ ä¸æ˜¯å¾ˆç†è§£ https://doc.qt.io/qt-5/qt.html#FillRule-enum\naddRoundedRect(QRect(0, 0, this-\u0026gt;width(), this-\u0026gt;height()), 3, 3)åœ†è§’çŸ©å½¢ QRect(0, 300, this-\u0026gt;width(), this-\u0026gt;height() - 300)è®¾ç½®äº†çŸ©å½¢çš„ä½ç½®åŠå¤§å° (3,3)è¡¨ç¤ºå€’åœ†è§’çš„å¤§å° setRenderHint()å¼€å¯åèµ°æ · QPainter::Antialiasing å‘Šè¯‰ç»˜å›¾å¼•æ“åº”è¯¥åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¿›è¡Œè¾¹çš„åé”¯é½¿ç»˜åˆ¶ QPainter::TextAntialiasing å°½å¯èƒ½çš„æƒ…å†µä¸‹æ–‡å­—çš„åé”¯é½¿ç»˜åˆ¶ QPainter::SmoothPixmapTransform ä½¿ç”¨å¹³æ»‘çš„ pixmap å˜æ¢ç®—æ³• (åŒçº¿æ€§æ’å€¼ç®—æ³•),è€Œä¸æ˜¯è¿‘é‚»æ’å€¼ç®— åˆå§‹åŒ–æ—‹è½¬çª—å£ // åˆå§‹åŒ–æ—‹è½¬çš„çª—å£; void RotateWidget::initRotateWindow() { m_loginWindow = new LoginWindow(this); // è¿™é‡Œå®šä¹‰äº†ä¸¤ä¸ªä¿¡å·ï¼Œéœ€è¦è‡ªå·±å»å‘é€ä¿¡å·; connect(m_loginWindow, SIGNAL(rotateWindow()), this, SLOT(onRotateWindow())); connect(m_loginWindow, SIGNAL(closeWindow()), this, SLOT(close())); connect(m_loginWindow, SIGNAL(hideWindow()), this, SLOT(onHideWindow())); m_loginNetSetWindow = new LoginNetSetWindow(this); connect(m_loginNetSetWindow, SIGNAL(rotateWindow()), this, SLOT(onRotateWindow())); connect(m_loginNetSetWindow, SIGNAL(closeWindow()), this, SLOT(close())); connect(m_loginNetSetWindow, SIGNAL(hideWindow()), this, SLOT(onHideWindow())); this-\u0026gt;addWidget(m_loginWindow); this-\u0026gt;addWidget(m_loginNetSetWindow); // è¿™é‡Œå®½å’Œé«˜éƒ½å¢åŠ ï¼Œæ˜¯å› ä¸ºåœ¨æ—‹è½¬è¿‡ç¨‹ä¸­çª—å£å®½å’Œé«˜éƒ½ä¼šå˜åŒ–; this-\u0026gt;setFixedSize(QSize(m_loginWindow-\u0026gt;width() + 20, m_loginWindow-\u0026gt;height() + 100)); } å¯¹æ­£é¢å’Œåé¢åˆ†åˆ«å®šä¹‰äº†ä¿¡å·æ§½ï¼Œå½“å¯¹åº”çš„é¢æ¥æ”¶åˆ°ä¿¡å·æ—¶ï¼Œæ‰§è¡Œå¯¹åº”çš„åŠ¨ä½œã€‚å› ä¸ºæ˜¯æ—‹è½¬ä¸€ç™¾å…«ååº¦ï¼Œæ‰€ä»¥é€‰æ‹©å‡½æ•°å¯ä»¥å…¬ç”¨ã€‚\næ—‹è½¬çª—å£ \u003c!DOCTYPE html\u003e Responsive Image // å¼€å§‹æ—‹è½¬çª—å£; void RotateWidget::onRotateWindow() { // å¦‚æœçª—å£æ­£åœ¨æ—‹è½¬ï¼Œç›´æ¥è¿”å›; if (m_isRoratingWindow) { return; } m_isRoratingWindow = true; m_nextPageIndex = (currentIndex() + 1) \u0026gt;= count() ? 0 : (currentIndex() + 1); QPropertyAnimation *rotateAnimation = new QPropertyAnimation(this, \u0026#34;rotateValue\u0026#34;); // è®¾ç½®æ—‹è½¬æŒç»­æ—¶é—´; rotateAnimation-\u0026gt;setDuration(1500); // è®¾ç½®æ—‹è½¬è§’åº¦å˜åŒ–è¶‹åŠ¿; rotateAnimation-\u0026gt;setEasingCurve(QEasingCurve::InCubic); // è®¾ç½®æ—‹è½¬è§’åº¦èŒƒå›´; rotateAnimation-\u0026gt;setStartValue(0); rotateAnimation-\u0026gt;setEndValue(180); connect(rotateAnimation, SIGNAL(valueChanged(QVariant)), this, SLOT(repaint())); connect(rotateAnimation, SIGNAL(finished()), this, SLOT(onRotateFinished())); // éšè—å½“å‰çª—å£ï¼Œé€šè¿‡ä¸åŒè§’åº¦çš„ç»˜åˆ¶æ¥è¾¾åˆ°æ—‹è½¬çš„æ•ˆæœ; currentWidget()-\u0026gt;hide(); rotateAnimation-\u0026gt;start(); } // æ—‹è½¬ç»“æŸ; void RotateWidget::onRotateFinished() { m_isRoratingWindow = false; setCurrentWidget(widget(m_nextPageIndex)); repaint(); } / ç»˜åˆ¶æ—‹è½¬æ•ˆæœ; void RotateWidget::paintEvent(QPaintEvent *event) { if (m_isRoratingWindow) { // å°äº 90 åº¦æ—¶; int rotateValue = this-\u0026gt;property(\u0026#34;rotateValue\u0026#34;).toInt(); if (rotateValue \u0026lt;= 90) { QPixmap rotatePixmap(currentWidget()-\u0026gt;size()); currentWidget()-\u0026gt;render(\u0026amp;rotatePixmap); QPainter painter(this); painter.setRenderHint(QPainter::Antialiasing); QTransform transform; transform.translate(width() / 2, 0); transform.rotate(rotateValue, Qt::YAxis); painter.setTransform(transform); painter.drawPixmap(-1 * width() / 2, 0, rotatePixmap); } // å¤§äº 90 åº¦æ—¶ else { QPixmap rotatePixmap(widget(m_nextPageIndex)-\u0026gt;size()); widget(m_nextPageIndex)-\u0026gt;render(\u0026amp;rotatePixmap); QPainter painter(this); painter.setRenderHint(QPainter::Antialiasing); QTransform transform; transform.translate(width() / 2, 0); transform.rotate(rotateValue + 180, Qt::YAxis); painter.setTransform(transform); painter.drawPixmap(-1 * width() / 2, 0, rotatePixmap); } } else { return QStackedWidget::paintEvent(event); } } QPropertyAnimationåŠ¨ç”»ç±» QPropertyAnimation *rotateAnimation = new QPropertyAnimation(this, \u0026quot;rotateValue\u0026quot;)\nrotateValueå°±æ˜¯è¿™ä¸ªåŠ¨ç”»çš„å±æ€§ï¼Œæˆ‘ä»¬è¿™ä¸ªåŠ¨ç”»ä¸­å˜åŒ–çš„å°±æ˜¯æ—‹è½¬å€¼ï¼Œä¹Ÿå°±æ˜¯æ—‹è½¬è§’åº¦ã€‚è¿™ä¸ªå±æ€§åå®Œå…¨è‡ªå·±èµ·ï¼Œä¹Ÿå¯ä»¥æ”¹æˆrotateAngleç­‰ç­‰ï¼Œæˆ–è€…è¯´æƒ³åšä¸€ä¸ªå¹³ç§»çš„åŠ¨ç”»ï¼Œä¹Ÿå¯ä»¥å–ä¸€ä¸ªmoveDistç­‰åå­—ã€‚ ä¸‹é¢è¿™ä¸€ä¸²å°±æ˜¯æ ‡å‡†çš„ä¸€å¥—åŠ¨ç”»æµç¨‹\n// è®¾ç½®æ—‹è½¬æŒç»­æ—¶é—´; rotateAnimation-\u0026gt;setDuration(1000); // è®¾ç½®æ—‹è½¬è§’åº¦å˜åŒ–è¶‹åŠ¿; rotateAnimation-\u0026gt;setEasingCurve(QEasingCurve::InCubic); // è®¾ç½®æ—‹è½¬è§’åº¦èŒƒå›´; rotateAnimation-\u0026gt;setStartValue(0); rotateAnimation-\u0026gt;setEndValue(180); //å¼€å§‹åŠ¨ç”» rotateAnimation-\u0026gt;start(); paintEventç»˜å›¾äº‹ä»¶ #include \u0026lt;QtWidgets/QApplication\u0026gt; #include \u0026#34;rotatewidget.h\u0026#34; int main(int argc, char *argv[]) { QApplication a(argc, argv); RotateWidget w; w.show(); return a.exec(); } æˆ‘ä»¬mainå‡½æ•°å¾—çŸ¥ï¼Œæœ€å¼€å§‹æ˜¾ç¤ºçš„çª—å£å°±æ˜¯RotateWidgetã€‚åœ¨å®ä¾‹åŒ–ä¸€ä¸ªRotateWidgetç±»åï¼Œè¿›è¡Œäº†æ ‡é¢˜æ çš„åˆå§‹åŒ–å·¥ä½œï¼Œç„¶åå¼€å§‹æ‰§è¡Œw.show()æ˜¾ç¤ºï¼Œä½†æ˜¯æ­¤æ—¶çª—å£æ˜¯ä¸æ˜¾ç¤ºçš„ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨RotateWidgetçš„æ„é€ å‡½æ•°ä¸­è¿›è¡Œäº†è®¾ç½®ä¸æ˜¾ç¤ºçª—å£ã€‚\nthis-\u0026gt;setWindowFlags(Qt::FramelessWindowHint | Qt::WindowStaysOnTopHint | Qt::WindowMinimizeButtonHint); å½“è¿è¡Œåˆ°return a.exec()æ—¶ï¼ŒQt ä¼šè‡ªåŠ¨è°ƒç”¨void RotateWidget::paintEvent()ã€‚æ­¤æ—¶å¼€å§‹æ­£å¼ç»˜åˆ¶çª—å£ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡å“Ÿç‚¹å‡»ç™»å½•é¡µé¢çš„ç½‘ç»œè®¾ç½®æŒ‰é’®ï¼Œæ‰€ä»¥m_isRoratingWindow=0ã€‚ä¼šè°ƒç”¨çˆ¶ç±»çš„ç»˜å›¾äº‹ä»¶ï¼ŒQStackedWidget::paintEvent()ï¼Œæœ€åä¹Ÿå°±æ˜¯BaseWindow::paintEvent()ã€‚ä¼šå°†ç™»å½•é¡µé¢å…ˆç»˜åˆ¶å‡ºæ¥ã€‚\nå½“æˆ‘ä»¬ç‚¹å‡»ç½‘ç»œè®¾ç½®æŒ‰é’®æ—¶ï¼Œm_isRoratingWindow=1å¼€å§‹ç»˜åˆ¶æ—‹è½¬ç”»é¢ã€‚\n","permalink":"https://lifeislife.cn/posts/qt%E6%A8%A1%E4%BB%BF%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-%E9%A1%B5%E9%9D%A2%E5%8F%8D%E8%BD%AC%E6%95%88%E6%9E%9C/","summary":"\u003cp\u003eè®¾ç½®ä¸€ä¸ªæ—‹è½¬æ•ˆæœï¼Œå°†ç™»å½•ç•Œé¢æ—‹è½¬ç¿»ä¸ªé¢ï¼Œè®¾ç½®ä¸€äº›ç½‘ç»œå‚æ•°ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ•ˆæœ\"\u003eæ•ˆæœ\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210826100416.gif\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210826100416.gif\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Qt æ¨¡ä»¿ç™»å½•ç•Œé¢-é¡µé¢åè½¬æ•ˆæœ"},{"content":"ç³»ç»Ÿåˆå§‹åŒ– x86 æ¶æ„æ¦‚è¿° CPUï¼ˆCentral Processing Unitï¼‰ï¼šä¸­å¤®å¤„ç†å™¨ï¼Œè®¡ç®—æœºæ‰€æœ‰è®¾å¤‡éƒ½å›´ç»•å®ƒå±•å¼€å·¥ä½œã€‚\nè¿ç®—å•å…ƒï¼šåªç®¡ç®—ï¼Œä¾‹å¦‚åšåŠ æ³•ã€åšä½ç§»ç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œå®ƒä¸çŸ¥é“åº”è¯¥ç®—å“ªäº›æ•°æ®ï¼Œè¿ç®—ç»“æœåº”è¯¥æ”¾åœ¨å“ªé‡Œã€‚ æ•°æ®å•å…ƒï¼šè¿ç®—å•å…ƒè®¡ç®—çš„æ•°æ®å¦‚æœæ¯æ¬¡éƒ½è¦ç»è¿‡æ€»çº¿ï¼Œåˆ°å†…å­˜é‡Œé¢ç°æ‹¿ï¼Œè¿™æ ·å°±å¤ªæ…¢äº†ï¼Œæ‰€ä»¥å°±æœ‰äº†æ•°æ®å•å…ƒã€‚æ•°æ®å•å…ƒåŒ…æ‹¬ CPU å†…éƒ¨çš„ç¼“å­˜å’Œå¯„å­˜å™¨ç»„ï¼Œç©ºé—´å¾ˆå°ï¼Œä½†æ˜¯é€Ÿåº¦é£å¿«ï¼Œå¯ä»¥æš‚æ—¶å­˜æ”¾æ•°æ®å’Œè¿ç®—ç»“æœã€‚ æ§åˆ¶å•å…ƒï¼šæœ‰äº†æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œä¹Ÿæœ‰äº†ç®—çš„åœ°æ–¹ï¼Œè¿˜éœ€è¦æœ‰ä¸ªæŒ‡æŒ¥åˆ°åº•åšä»€ä¹ˆè¿ç®—çš„åœ°æ–¹ï¼Œè¿™å°±æ˜¯æ§åˆ¶å•å…ƒã€‚æ§åˆ¶å•å…ƒæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æŒ‡æŒ¥ä¸­å¿ƒï¼Œå®ƒå¯ä»¥è·å¾—ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œè¿™æ¡æŒ‡ä»¤ã€‚è¿™ä¸ªæŒ‡ä»¤ä¼šæŒ‡å¯¼è¿ç®—å•å…ƒå–å‡ºæ•°æ®å•å…ƒä¸­çš„æŸå‡ ä¸ªæ•°æ®ï¼Œè®¡ç®—å‡ºä¸ªç»“æœï¼Œç„¶åæ”¾åœ¨æ•°æ®å•å…ƒçš„æŸä¸ªåœ°æ–¹ã€‚ å†…å­˜ï¼ˆMemoryï¼‰ï¼šCPU æœ¬èº«ä¸èƒ½ä¿å­˜å¤§é‡æ•°æ®ï¼Œè®¸å¤šå¤æ‚çš„è®¡ç®—éœ€è¦å°†ä¸­é—´ç»“æœä¿å­˜ä¸‹æ¥å°±å¿…é¡»ç”¨åˆ°å†…å­˜ã€‚\næ€»çº¿ï¼ˆBusï¼‰ï¼šCPU å’Œå…¶ä»–è®¾å¤‡è¿æ¥ï¼Œå°±é æ€»çº¿ï¼Œå…¶å®å°±æ˜¯ä¸»æ¿ä¸Šå¯†å¯†éº»éº»çš„é›†æˆç”µè·¯ï¼Œè¿™äº›ä¸œè¥¿ç»„æˆäº† CPU å’Œå…¶ä»–è®¾å¤‡çš„é«˜é€Ÿé€šé“ã€‚\nåœ°å€æ€»çº¿ï¼šä¼ è¾“åœ°å€æ•°æ®ï¼ˆæˆ‘æƒ³æ‹¿å†…å­˜ä¸­å“ªä¸ªä½ç½®çš„æ•°æ®ï¼‰ æ•°æ®æ€»çº¿ï¼šä¼ è¾“çœŸæ­£çš„æ•°æ® æ€»çº¿å°±åƒ CPU å’Œå†…å­˜ä¹‹é—´çš„é«˜é€Ÿå…¬è·¯ï¼Œæ€»çº¿å¤šå°‘ä½å°±ç±»ä¼¼é«˜é€Ÿå…¬è·¯å¤šå°‘ä¸ªè½¦é“ï¼Œä½†ä¸¤ç§æ€»çº¿çš„ä½æ•°æ„ä¹‰ä¸åŒã€‚\nåœ°å€æ€»çº¿çš„ä½æ•°å†³å®šäº†è®¿é—®åœ°å€èŒƒå›´æœ‰å¤šå¹¿ï¼Œæ•°æ®æ€»çº¿ä½æ•°å†³å®šäº†ä¸€æ¬¡èƒ½æ‹¿å¤šå°‘æ•°æ®è¿›æ¥ã€‚é‚£ä¹ˆ CPU ä¸­æ€»çº¿çš„ä½æ•°æœ‰æ²¡æœ‰æ ‡å‡†å‘¢ï¼Ÿå¦‚æœæ²¡æœ‰æ ‡å‡†ï¼Œé‚£æ“ä½œç³»ç»Ÿä½œä¸ºè½¯ä»¶å°±å¾ˆéš¾åŠäº†ï¼Œå› ä¸ºè½¯ä»¶å±‚æ²¡åŠæ³•å®ç°é€šç”¨çš„è¿ç®—é€»è¾‘ã€‚æ—©æœŸæ¯å®¶å…¬å¸çš„ CPU æ¶æ„éƒ½ä¸åŒï¼Œåæ¥å†å²å°† x86 å¹³å°æ¨åˆ°äº†å¼€æ”¾ï¼Œç»Ÿä¸€ï¼Œå…¼å®¹çš„ä½ç½®ã€‚\n8086 æ¶æ„å›¾ \u003c!DOCTYPE html\u003e Responsive Image æ•°æ®å•å…ƒï¼š 8086 å¤„ç†å™¨å†…éƒ¨å…±æœ‰ 8 ä¸ª 16 ä½çš„é€šç”¨å¯„å­˜å™¨ï¼Œåˆ†åˆ«æ˜¯ æ•°æ®å¯„å­˜å™¨ï¼ˆAXã€BXã€CXã€DXï¼‰ã€æŒ‡é’ˆå¯„å­˜å™¨ï¼ˆSPã€BPï¼‰ã€å˜å€å¯„å­˜å™¨ï¼ˆSIã€DIï¼‰ã€‚å…¶ä¸­ AXã€BXã€CXã€DX å¯ä»¥åˆ†æˆä¸¤ä¸ª 8 ä½çš„å¯„å­˜å™¨æ¥ä½¿ç”¨ï¼Œåˆ†åˆ«æ˜¯ AHã€ALã€BHã€BLã€CHã€CLã€DHã€DLï¼Œå…¶ä¸­ H å°±æ˜¯ Highï¼ˆé«˜ä½ï¼‰ï¼ŒL å°±æ˜¯ Lowï¼ˆä½ä½ï¼‰çš„æ„æ€ã€‚\næ§åˆ¶å•å…ƒï¼š IP å¯„å­˜å™¨ï¼ˆInstruction Pointer Registerï¼‰å°±æ˜¯æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼Œå®ƒæŒ‡å‘ä»£ç æ®µä¸­ä¸‹ä¸€æ¡æŒ‡ä»¤çš„ä½ç½®ã€‚CPU ä¼šæ ¹æ®å®ƒæ¥ä¸æ–­åœ°å°†æŒ‡ä»¤ä»å†…å­˜çš„ä»£ç æ®µä¸­ï¼ŒåŠ è½½åˆ° CPU çš„æŒ‡ä»¤é˜Ÿåˆ—ä¸­ï¼Œç„¶åäº¤ç»™è¿ç®—å•å…ƒå»æ‰§è¡Œã€‚\nå¦‚æœéœ€è¦åˆ‡æ¢è¿›ç¨‹å‘¢ï¼Ÿæ¯ä¸ªè¿›ç¨‹éƒ½åˆ†ä»£ç æ®µå’Œæ•°æ®æ®µï¼Œä¸ºäº†æŒ‡å‘ä¸åŒè¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œæœ‰å››ä¸ª 16 ä½çš„æ®µå¯„å­˜å™¨ï¼Œåˆ†åˆ«æ˜¯ CSã€DSã€SSã€ESã€‚\nå…¶ä¸­ï¼ŒCS å°±æ˜¯ä»£ç æ®µå¯„å­˜å™¨ï¼ˆCode Segment Registerï¼‰ï¼Œé€šè¿‡å®ƒå¯ä»¥æ‰¾åˆ°ä»£ç åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼›DS æ˜¯æ•°æ®æ®µçš„å¯„å­˜å™¨ï¼ˆData Segment Registerï¼‰ï¼Œé€šè¿‡å®ƒå¯ä»¥æ‰¾åˆ°æ•°æ®åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚SS æ˜¯æ ˆå¯„å­˜å™¨ï¼ˆStack Registerï¼‰ã€‚æ ˆæ˜¯ç¨‹åºè¿è¡Œä¸­ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œæ•°æ®çš„å­˜å–åªèƒ½ä»ä¸€ç«¯è¿›è¡Œï¼Œç§‰æ‰¿åè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚ESæ˜¯æ‰©å±•æ®µå¯„å­˜å™¨ï¼ˆExtra Segment Registerï¼‰é¡¾åæ€ä¹‰ã€‚\nå¦‚æœ CPU è¿ç®—ä¸­éœ€è¦åŠ è½½å†…å­˜ä¸­çš„æ•°æ®ï¼Œéœ€è¦é€šè¿‡ DS æ‰¾åˆ°å†…å­˜ä¸­çš„æ•°æ®ï¼ŒåŠ è½½åˆ°é€šç”¨å¯„å­˜å™¨ä¸­ï¼Œåº”è¯¥å¦‚ä½•åŠ è½½å‘¢ï¼Ÿå¯¹äºä¸€ä¸ªæ®µï¼Œæœ‰ä¸€ä¸ªèµ·å§‹çš„åœ°å€ï¼Œè€Œæ®µå†…çš„å…·ä½“ä½ç½®ï¼Œæˆ‘ä»¬ç§°ä¸ºåç§»é‡ï¼ˆOffsetï¼‰ã€‚åœ¨ CS å’Œ DS ä¸­éƒ½å­˜æ”¾ç€ä¸€ä¸ªæ®µçš„èµ·å§‹åœ°å€ã€‚ä»£ç æ®µçš„åç§»é‡åœ¨ IP å¯„å­˜å™¨ä¸­ï¼Œæ•°æ®æ®µçš„åç§»é‡ä¼šæ”¾åœ¨é€šç”¨å¯„å­˜å™¨ä¸­ã€‚å› ä¸ºæ®µå¯„å­˜å™¨éƒ½æ˜¯ 16 ä½çš„ï¼Œè€Œåœ°å€æ€»çº¿æ˜¯ 20 ä½çš„ï¼Œæ‰€ä»¥é€šè¿‡ *èµ·å§‹åœ°å€ 16+ åç§»é‡ çš„æ–¹å¼ï¼Œå°†å¯»å€ä½æ•°éƒ½å˜æˆ 20 ä½ï¼Œä¹Ÿå°±æ˜¯å°† CS å’Œ DS çš„å€¼å·¦ç§» 4 ä½ã€‚\nå¯¹äºåªæœ‰ 20 ä½åœ°å€æ€»çº¿çš„ 8086 æ¥è¯´ï¼Œå¯»å€ç©ºé—´æœ€å¤§ä¹Ÿå°±æ˜¯$2^{20}=1\\text{M}$ï¼Œè¶…è¿‡è¿™ä¸ªä½ç½®å°±è®¿é—®ä¸åˆ°äº†ï¼Œä¸€ä¸ªæ®µå› ä¸ºåç§»é‡åªæœ‰ 16 ä½ï¼Œæ‰€ä»¥ä¸€ä¸ªæ®µæœ€å¤§æ˜¯$2^{16}=64\\text{k}$ã€‚\n32 ä½å¤„ç†å™¨ éšç€è®¡ç®—æœºå‘å±•ï¼Œå†…å­˜è¶Šæ¥è¶Šå¤§ï¼Œæ€»çº¿ä¹Ÿè¶Šæ¥è¶Šå®½ã€‚åœ¨ 32 ä½å¤„ç†å™¨ä¸­ï¼Œæœ‰ 32 æ ¹åœ°å€æ€»çº¿ï¼Œå¯ä»¥è®¿é—® $2^{32}=4\\text{G}$ çš„å†…å­˜ã€‚ä½¿ç”¨åŸæ¥çš„æ¨¡å¼è‚¯å®šä¸è¡Œäº†ï¼Œä½†æ˜¯åˆä¸èƒ½å®Œå…¨æŠ›å¼ƒåŸæ¥çš„æ¨¡å¼ï¼Œå› ä¸ºè¿™ä¸ªæ¶æ„æ˜¯å¼€æ”¾çš„ã€‚é‚£ä¹ˆåœ¨å¼€å‘æ¶æ„çš„åŸºç¡€ä¸Šå¦‚ä½•ä¿æŒå…¼å®¹å‘¢ï¼Ÿ\né¦–å…ˆï¼Œé€šç”¨å¯„å­˜å™¨æœ‰æ‰©å±•ï¼Œå¯ä»¥å°† 8 ä¸ª 16 ä½çš„æ‰©å±•åˆ° 8 ä¸ª 32 ä½çš„ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ä¿ç•™ 16 ä½çš„å’Œ 8 ä½çš„ä½¿ç”¨æ–¹å¼ã€‚å…¶ä¸­ï¼ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤çš„æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ IPï¼Œå°±ä¼šæ‰©å±•æˆ 32 ä½çš„ï¼ŒåŒæ ·ä¹Ÿå…¼å®¹ 16 ä½çš„ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ®µå¯„å­˜å™¨æ”¹åŠ¨è¾ƒå¤§ï¼Œæ–°çš„æ®µå¯„å­˜å™¨éƒ½æ”¹æˆäº† 32 ä½çš„ï¼Œæ¯ä¸ªå¯„å­˜å™¨åˆåˆ†ä¸ºæ®µæè¿°ç¬¦ç¼“å­˜å™¨ï¼ˆSegment Descriptorï¼‰ï¼Œå’Œæ®µé€‰æ‹©å­å¯„å­˜å™¨ï¼ˆSelectorï¼‰ ,ç°åœ¨çš„æ®µå¯„å­˜å™¨ä¸åœ¨æ˜¯æ®µçš„èµ·å§‹åœ°å€ï¼Œæ®µçš„èµ·å§‹åœ°å€ä¿å­˜åœ¨è¡¨æ ¼ä¸€æ ·çš„æ®µæè¿°ç¬¦ç¼“å†²å™¨ä¸­ï¼Œæ®µé€‰æ‹©å­å¯„å­˜å™¨ä¿å­˜åœ°å€åœ¨æ®µæè¿°ç¬¦ç¼“å­˜å™¨ä¸­çš„å“ªä¸€é¡¹ã€‚è¿™æ ·ï¼Œå°†ä¸€ä¸ªä»æ®µå¯„å­˜å™¨ç›´æ¥æ‹¿åˆ°çš„æ®µèµ·å§‹åœ°å€ï¼Œå°±å˜æˆäº†å…ˆé—´æ¥åœ°ä»æ®µå¯„å­˜å™¨æ‰¾åˆ°è¡¨æ ¼ä¸­çš„ä¸€é¡¹ï¼Œå†ä»è¡¨æ ¼ä¸­çš„ä¸€é¡¹ä¸­æ‹¿åˆ°æ®µèµ·å§‹åœ°å€ã€‚\nè™½ç„¶ç°åœ¨çš„è¿™ç§æ¨¡å¼å’Œä¹‹å‰çš„æ¨¡å¼ä¸å…¼å®¹ï¼Œä½†æ˜¯åé¢è¿™ç§æ¨¡å¼çµæ´»çš„éå¸¸é«˜ï¼Œå¯ä»¥ä¿æŒä¸€ç›´å…¼å®¹ä¸‹å»ã€‚åœ¨ 32 ä½çš„ç³»ç»Ÿæ¶æ„ä¸‹ï¼Œå°†å‰ä¸€ç§æ¨¡å¼ç§°ä¸ºå®æ¨¡å¼ï¼ˆReal Patternï¼‰ï¼Œåä¸€ç§æ¨¡å¼ç§°ä¸ºä¿æŠ¤æ¨¡å¼ï¼ˆProtected Patternï¼‰ ã€‚å½“ç³»ç»Ÿåˆšåˆšå¯åŠ¨çš„æ—¶å€™ï¼ŒCPU æ˜¯å¤„äºå®æ¨¡å¼çš„ï¼Œè¿™ä¸ªæ—¶å€™å’ŒåŸæ¥çš„æ¨¡å¼æ˜¯å…¼å®¹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå“ªæ€•ä½ ä¹°äº† 32 ä½çš„ CPUï¼Œä¹Ÿæ”¯æŒåœ¨åŸæ¥çš„æ¨¡å¼ä¸‹è¿è¡Œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ±‡ç¼–å‘½ä»¤å­¦ä¹  mov, call, jmp, int, ret, add, or, xor, shl, shr, push, pop, inc, dec, sub, cmpã€‚\nBIOS ä¸ BootLoader BIOSï¼šåŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ\nROMï¼šåªè¯»å­˜å‚¨å™¨\nRAMï¼šéšæœºå­˜å–å­˜å‚¨å™¨\nåœ¨æˆ‘ä»¬æŒ‰ä¸‹ç”µè„‘ç”µæºé”®çš„é‚£ä¸€åˆ»ï¼Œä¸»æ¿å°±åŠ ç”µäº†ï¼ŒCPU å°±è¦å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤äº†ï¼Œä½†æ˜¯åˆšå¼€å§‹æ“ä½œç³»ç»Ÿéƒ½æ²¡ï¼ŒCPU æ‰§è¡Œä»€ä¹ˆæŒ‡ä»¤å‘¢ï¼Ÿè¿™å°±æœ‰äº†BIOSï¼Œå®ƒç›¸å½“äºä¸€ä¸ªæŒ‡å¯¼æ‰‹å†Œï¼Œå‘Šè¯‰ CPU æ¥ä¸‹æ¥è¦å¹²å•¥ã€‚\nåˆšå¼€æœºæ—¶ï¼Œç³»ç»Ÿåˆå§‹åŒ–ä»£ç ä» ROM è¯»å–ï¼Œå°† CS è®¾ç½®ä¸º 0xFFFFï¼Œå°† IP è®¾ç½®ä¸º 0x0000ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¡æŒ‡ä»¤å°±ä¼šæŒ‡å‘ 0xFFFF0ï¼Œåˆå§‹åŒ–å®Œæˆåç¡®å®šè®¿é—®æŒ‡ä»¤ä½ç½®ã€‚\næ¥ä¸‹æ¥ BIOS ä¼šæ£€æŸ¥å„ä¸ªç¡¬ä»¶æ˜¯å¦æ­£å¸¸ï¼Œæ£€æµ‹å†…å®¹æ˜¾å¡ç­‰å…³é”®éƒ¨ä»¶çš„å­˜åœ¨äºå·¥ä½œçŠ¶æ€ï¼Œè®¾å¤‡åˆå§‹åŒ–ï¼Œæ‰§è¡Œç³»ç»Ÿ BIOS è¿›è¡Œç³»ç»Ÿæ£€æµ‹ï¼Œæ›´æ–° CMOS ä¸­çš„æ‰©å±•ç³»ç»Ÿé…ç½®æ•°æ® ESCDã€‚è¿™æœŸé—´ä¹Ÿä¼šå»ºç«‹ä¸­æ–­å‘é‡è¡¨å’Œä¸­æ–­æœåŠ¡ç¨‹åºï¼Œå› ä¸ºè¦ä½¿ç”¨é”®ç›˜é¼ æ ‡éƒ½éœ€è¦ä¸­æ–­è¿›è¡Œã€‚\nä¸‹ä¸€æ­¥ BIOS å°±å¾—è¦æ‰¾æ“ä½œç³»ç»Ÿäº†ï¼Œæ“ä½œç³»ç»Ÿä¸€èˆ¬å®‰è£…åœ¨ç¡¬ç›˜ä¸Šï¼Œä½†æ˜¯ BIOS å¾—å…ˆæ‰¾åˆ°å¯åŠ¨ç›˜ï¼Œå¯åŠ¨ç›˜ä¸€èˆ¬å®‰è£…åœ¨ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå  512 å­—èŠ‚ï¼Œä¼šåŒ…å«å¯åŠ¨çš„ç›¸å…³ä»£ç ã€‚åœ¨ Linux ä¸­ï¼Œå¯ä»¥é€šè¿‡Grub2é…ç½®è¿™äº›ä»£ç ã€‚\ngrub2-mkconfig -o /boot/grub2/grub.cfg grub2ç¬¬ä¸€ä¸ªè¦å®‰è£…çš„å°±æ˜¯boot.imgã€‚å®ƒç”± boot.Sç¼–è¯‘è€Œæˆï¼Œä¸€å…± 512 å­—èŠ‚ï¼Œæ­£å¼å®‰è£…åˆ°å¯åŠ¨ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºã€‚è¿™ä¸ªæ‰‡åŒºé€šå¸¸ç§°ä¸ºMBRï¼ˆMaster Boot Recordï¼Œä¸»å¼•å¯¼è®°å½• / æ‰‡åŒºï¼‰ã€‚\nBIOS å®Œæˆä»»åŠ¡åï¼Œä¼šå°† boot.img ä»ç¡¬ç›˜åŠ è½½åˆ°å†…å­˜ä¸­çš„ 0x7c00æ¥è¿è¡Œã€‚\nç”±äº 512 ä¸ªå­—èŠ‚å®åœ¨æœ‰é™ï¼Œboot.img åšä¸äº†å¤ªå¤šçš„äº‹æƒ…ã€‚å®ƒèƒ½åšçš„æœ€é‡è¦çš„ä¸€ä¸ªäº‹æƒ…å°±æ˜¯åŠ è½½grub2 çš„å¦ä¸€ä¸ªé•œåƒ core.imgã€‚\ncore.img ç”±lzma_decompress.imgã€diskboot.imgã€kernel.img å’Œä¸€ç³»åˆ—çš„æ¨¡å—ç»„æˆï¼ŒåŠŸèƒ½æ¯”è¾ƒä¸°å¯Œï¼Œèƒ½åšå¾ˆå¤šäº‹æƒ…ã€‚\nboot.img å…ˆåŠ è½½çš„æ˜¯ core.img çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºã€‚å¦‚æœä»ç¡¬ç›˜å¯åŠ¨çš„è¯ï¼Œè¿™ä¸ªæ‰‡åŒºé‡Œé¢æ˜¯diskboot.imgï¼Œå¯¹åº”çš„ä»£ç æ˜¯ diskboot.Sã€‚\nboot.img å°†æ§åˆ¶æƒäº¤ç»™ diskboot.img åï¼Œdiskboot.img çš„ä»»åŠ¡å°±æ˜¯å°†core.img çš„å…¶ä»–éƒ¨åˆ†åŠ è½½è¿›æ¥ï¼Œå…ˆæ˜¯è§£å‹ç¼©ç¨‹åº lzma_decompress.imgï¼Œå†å¾€ä¸‹æ˜¯ kernel.imgï¼Œæœ€åæ˜¯å„ä¸ªæ¨¡å—moduleå¯¹åº”çš„æ˜ åƒã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå®ƒä¸æ˜¯ Linux çš„å†…æ ¸ï¼Œè€Œæ˜¯grub çš„å†…æ ¸ã€‚\nåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬æ‰€æœ‰é‡åˆ°è¿‡çš„ç¨‹åºéƒ½éå¸¸éå¸¸å°ï¼Œå®Œå…¨å¯ä»¥åœ¨å®æ¨¡å¼ä¸‹è¿è¡Œï¼Œä½†æ˜¯éšç€æˆ‘ä»¬åŠ è½½çš„ä¸œè¥¿è¶Šæ¥è¶Šå¤§ï¼Œå®æ¨¡å¼è¿™1M çš„åœ°å€ç©ºé—´å®åœ¨æ”¾ä¸ä¸‹äº†ï¼Œæ‰€ä»¥åœ¨çœŸæ­£çš„è§£å‹ç¼©ä¹‹å‰ï¼Œlzma_decompress.img åšäº†ä¸€ä¸ªé‡è¦çš„å†³å®šï¼Œå°±æ˜¯è°ƒç”¨ real_to_protï¼Œåˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ï¼Œè¿™æ ·å°±èƒ½åœ¨æ›´å¤§çš„å¯»å€ç©ºé—´é‡Œé¢ï¼ŒåŠ è½½æ›´å¤šçš„ä¸œè¥¿ã€‚\nBIOSå°†åŠ è½½ç¨‹åºä»ç¡¬ç›˜çš„å¼•å¯¼æ‰‡åŒºåŠ è½½åˆ°æŒ‡å®šä½ç½®ï¼Œå†è·³è½¬åˆ°æŒ‡å®šä½ç½®ï¼Œå°†æ§åˆ¶æƒè½¬äº¤ç»™åŠ è½½ç¨‹åºã€‚åŠ è½½ç¨‹åºå°†æ“ä½œç³»ç»Ÿä»£ç è¯»å–åˆ°å†…å­˜ï¼Œå¹¶å°†æ§åˆ¶æƒè½¬åˆ°æ“ä½œç³»ç»Ÿã€‚\nQï¼šBIOS-æ“ä½œç³»ç»Ÿï¼Œä¸­é—´ç»è¿‡åŠ è½½ç¨‹åºã€‚ä¸ºä½•ä¸ç›´æ¥è¯»å–ï¼Ÿ Aï¼šç£ç›˜æ–‡ä»¶ç³»ç»Ÿå¤šç§å¤šæ ·ï¼Œç¡¬ç›˜å‡ºå‚æ—¶ä¸èƒ½é™åˆ¶åªèƒ½ç”¨ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œ BIOS ä¹Ÿä¸èƒ½åŠ ä¸Šè¯†åˆ«æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿçš„ä»£ç ã€‚æ‰€æœ‰ä¸ºäº†çµæ´»æ€§åªè¯»å–ç£ç›˜çš„ä¸€å—ï¼Œç”±åŠ è½½ç¨‹åºæ¥è¯†åˆ«ç£ç›˜çš„æ–‡ä»¶ç³»ç»Ÿã€‚\nåˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼åï¼Œå°†ä¼šåšä»¥ä¸‹è¿™äº›äº‹ï¼Œå¤§å¤šæ•°éƒ½ä¸å†…å­˜è®¿é—®æ–¹å¼æœ‰å…³ã€‚\né¦–å…ˆå¯åŠ¨åˆ†æ®µï¼Œå°±æ˜¯åœ¨å†…å­˜é‡Œé¢å»ºç«‹æ®µæè¿°ç¬¦è¡¨ï¼Œå°†å¯„å­˜å™¨é‡Œé¢çš„æ®µå¯„å­˜å™¨å˜æˆæ®µé€‰æ‹©å­ï¼ŒæŒ‡å‘æŸä¸ªæ®µæè¿°ç¬¦ï¼Œè¿™æ ·å°±èƒ½å®ç°ä¸åŒè¿›ç¨‹çš„åˆ‡æ¢äº†ã€‚\næ¥ç€æ˜¯å¯åŠ¨åˆ†é¡µã€‚èƒ½å¤Ÿç®¡ç†çš„å†…å­˜å˜å¤§äº†ï¼Œå°±éœ€è¦å°†å†…å­˜åˆ†æˆç›¸ç­‰å¤§å°çš„å—ã€‚\næ‰“å¼€ Gate20ï¼Œä¹Ÿå°±æ˜¯ç¬¬ 21 æ ¹åœ°å€çº¿çš„æ§åˆ¶çº¿ã€‚å› ä¸ºåœ¨å®æ¨¡å¼ 8086 ä¸‹ï¼Œä¸€å…±å°± 20 æ ¹åœ°å€çº¿ï¼Œæœ€å¤§è®¿é—®1Mçš„åœ°å€ç©ºé—´ã€‚åˆ‡æ¢ä¿æŠ¤æ¨¡å¼çš„å‡½æ•°DATA32 call real_to_protä¼šæ‰“å¼€Gate A20ã€‚\nç°åœ¨å¥½äº†ï¼Œæœ‰çš„æ˜¯ç©ºé—´äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦å¯¹å‹ç¼©è¿‡çš„ kernel.img è¿›è¡Œè§£å‹ç¼©ï¼Œç„¶åè·³è½¬åˆ° kernel.img å¼€å§‹è¿è¡Œã€‚\nå†…æ ¸åˆå§‹åŒ– start_kernel() INIT_TASK(init_task) trap_init() mm_init() sched_init() rest_init() kernel_thread(kernel_init, NULL,CLONE_FS) kernel_thread(kthreadd, NULL, CLONE_FS | CLONE_FILES) å†…æ ¸çš„å¯åŠ¨ä»å…¥å£å‡½æ•°start_kernel() å¼€å§‹ã€‚åœ¨ init/main.c æ–‡ä»¶ä¸­ï¼Œstart_kernel ç›¸å½“äºå†…æ ¸çš„ main å‡½æ•°ã€‚æ‰“å¼€è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œé‡Œé¢æ˜¯å„ç§å„æ ·åˆå§‹åŒ–å‡½æ•° XXXX_initã€‚\nåœ¨æ“ä½œç³»ç»Ÿé‡Œé¢ï¼Œå…ˆè¦æœ‰ä¸ªåˆ›å§‹è¿›ç¨‹ï¼Œæœ‰ä¸€è¡ŒæŒ‡ä»¤ set_task_stack_end_magic(\u0026amp;init_task)ã€‚è¿™é‡Œé¢æœ‰ä¸€ä¸ªå‚æ•° init_taskï¼Œå®ƒçš„å®šä¹‰æ˜¯ struct task_struct init_task = INIT_TASK(init_task)ã€‚å®ƒæ˜¯ç³»ç»Ÿåˆ›å»ºçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸º0å·è¿›ç¨‹ã€‚è¿™æ˜¯å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰é€šè¿‡fork æˆ–è€…kernel_thread äº§ç”Ÿçš„è¿›ç¨‹ï¼Œæ˜¯è¿›ç¨‹åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªã€‚\ntrap_init()é‡Œè®¾ç½®äº†å¾ˆå¤š**ä¸­æ–­é—¨ (Interrupt Gate)**å¤„ç†å„ç§ä¸­æ–­ã€‚\nmm_init()åˆå§‹åŒ–å†…å­˜ç®¡ç†æ¨¡å—ï¼Œsched_init()åˆå§‹åŒ–è°ƒåº¦æ¨¡å—ã€‚\nvfs_caches_init() ä¼šç”¨æ¥åˆå§‹åŒ–åŸºäºå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿ rootfsã€‚åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œä¼šè°ƒç”¨ mnt_init()-\u0026gt;init_rootfs()ã€‚è¿™é‡Œé¢æœ‰ä¸€è¡Œä»£ç ï¼Œregister_filesystem(\u0026amp;rootfs_fs_type)ã€‚åœ¨ VFS è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿé‡Œé¢æ³¨å†Œäº†ä¸€ç§ç±»å‹ï¼Œæˆ‘ä»¬å®šä¹‰ä¸º struct file_system_type rootfs_fs_typeã€‚ä¸ºäº†å…¼å®¹å„ç§å„æ ·çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦å°†æ–‡ä»¶çš„ç›¸å…³æ•°æ®ç»“æ„å’Œæ“ä½œæŠ½è±¡å‡ºæ¥ï¼Œå½¢æˆä¸€ä¸ªæŠ½è±¡å±‚å¯¹ä¸Šæä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œè¿™ä¸ªæŠ½è±¡å±‚å°±æ˜¯ VFSï¼ˆVirtual File Systemï¼‰ï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚\næœ€åstart_kernel()è°ƒç”¨rest_init()æ¥åšå…¶ä»–æ–¹é¢çš„åˆå§‹åŒ–ï¼Œå¦‚åˆå§‹åŒ– 1 å·è¿›ç¨‹ï¼Œå†…æ ¸æ€ä¸ç”¨æˆ·æ€è½¬åŒ–ç­‰ã€‚\nrest_init çš„ç¬¬ä¸€å¤§å·¥ä½œæ˜¯ï¼Œç”¨ kernel_thread(kernel_init, NULL, CLONE_FS)åˆ›å»ºç¬¬äºŒä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªæ˜¯1 å·è¿›ç¨‹ã€‚è¿™å¯¹æ“ä½œç³»ç»Ÿæ„ä¹‰éå‡¡ï¼Œå› ä¸ºä»–å°†è¿è¡Œç¬¬ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ï¼Œä¸€æ—¦æœ‰äº†ç”¨æˆ·è¿›ç¨‹ï¼Œè¿è¡Œæ¨¡å¼ä¹Ÿå°†å‘ç”Ÿæ”¹å˜ï¼Œä¹‹å‰æ‰€æœ‰èµ„æºéƒ½æ˜¯ç»™ä¸€ä¸ªè¿›ç¨‹ç”¨ï¼Œç°åœ¨æœ‰äº†ç”¨æˆ·è¿›ç¨‹ï¼Œå°±ä¼šå‡ºç°æŠ¢å¤ºèµ„æºçš„ç°è±¡ã€‚èµ„æºä¹Ÿåˆ†æ ¸å¿ƒå’Œéæ ¸å¿ƒèµ„æºï¼Œå…·æœ‰ä¸åŒæƒé™çš„è¿›ç¨‹å¯ä»¥è·å–ä¸åŒçš„èµ„æºã€‚x86æä¾›äº†åˆ†å±‚çš„æƒé™æœºåˆ¶ï¼Œåˆ†æˆå››ä¸ªRingï¼Œè¶Šå¾€é‡Œæƒé™è¶Šé«˜ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ“ä½œç³»ç»Ÿå¾ˆå¥½åœ°åˆ©ç”¨äº†è¿™ä¸ªæœºåˆ¶ï¼Œå°†èƒ½å¤Ÿè®¿é—®å…³é”®èµ„æºçš„ä»£ç æ”¾åœ¨ Ring0ï¼Œæˆ‘ä»¬ç§°ä¸ºå†…æ ¸æ€ï¼ˆKernel Modeï¼‰ï¼›å°†æ™®é€šçš„ç¨‹åºä»£ç æ”¾åœ¨ Ring3ï¼Œæˆ‘ä»¬ç§°ä¸ºç”¨æˆ·æ€ï¼ˆUser Modeï¼‰ã€‚\nç»§ç»­æ¢ç©¶kernel_thread()è¿™ä¸ªå‡½æ•°ï¼Œå®ƒçš„ä¸€ä¸ªå‚æ•°æœ‰ä¸€ä¸ªå‡½æ•°kernel_initï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œä¼šè°ƒç”¨kernel_init_freeable()ï¼Œé‡Œé¢æœ‰è¿™æ ·ä¸€æ®µä»£ç \nif (!ramdisk_execute_command) ramdisk_execute_command = \u0026#34;/init\u0026#34;; å…ˆä¸ç®¡ramdisk æ˜¯å•¥ï¼Œæˆ‘ä»¬å›åˆ° kernel_init é‡Œé¢ã€‚è¿™é‡Œé¢æœ‰è¿™æ ·çš„ä»£ç å—ï¼š\nif (ramdisk_execute_command) { ret = run_init_process(ramdisk_execute_command); .... } .... if (!try_to_run_init_process(\u0026#34;/sbin/init\u0026#34;) || !try_to_run_init_process(\u0026#34;/etc/init\u0026#34;) || !try_to_run_init_process(\u0026#34;/bin/init\u0026#34;) || !try_to_run_init_process(\u0026#34;/bin/sh\u0026#34;)) return 0; æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ1 å·è¿›ç¨‹è¿è¡Œçš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬æ‰“å¼€run_init_processå‡½æ•°ï¼Œä¼šå‘ç°å®ƒè°ƒç”¨çš„æ˜¯do_execveã€‚\nå‰é¢è®²ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œexecve æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯è¿è¡Œä¸€ä¸ªæ‰§è¡Œæ–‡ä»¶ã€‚åŠ ä¸€ä¸ª do_ çš„å¾€å¾€æ˜¯å†…æ ¸ç³»ç»Ÿè°ƒç”¨çš„å®ç°ã€‚æ²¡é”™ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒä¼šå°è¯•è¿è¡Œ ramdisk çš„â€œ/initâ€ï¼Œæˆ–è€…æ™®é€šæ–‡ä»¶ç³»ç»Ÿä¸Šçš„â€œ/sbin/initâ€â€œ/etc/initâ€â€œ/bin/initâ€â€œ/bin/shâ€ã€‚ä¸åŒç‰ˆæœ¬çš„ Linux ä¼šé€‰æ‹©ä¸åŒçš„æ–‡ä»¶å¯åŠ¨ï¼Œä½†æ˜¯åªè¦æœ‰ä¸€ä¸ªèµ·æ¥äº†å°±å¯ä»¥ã€‚\nstatic int run_init_process(const char *init_filename) { argv_init[0] = init_filename; return do_execve(getname_kernel(init_filename), (const char __user *const __user *)argv_init, (const char __user *const __user *)envp_init); } å¦‚ä½•åˆ©ç”¨æ‰§è¡Œ init æ–‡ä»¶çš„æœºä¼šï¼Œä»å†…æ ¸æ€å›åˆ°ç”¨æˆ·æ€å‘¢ï¼Ÿ\næˆ‘ä»¬ä»ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹å¯ä»¥å¾—åˆ°å¯å‘ï¼Œâ€œç”¨æˆ·æ€ - ç³»ç»Ÿè°ƒç”¨ - ä¿å­˜å¯„å­˜å™¨ - å†…æ ¸æ€æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ - æ¢å¤å¯„å­˜å™¨ - è¿”å›ç”¨æˆ·æ€â€ï¼Œç„¶åæ¥ç€è¿è¡Œã€‚è€Œå’±ä»¬åˆšæ‰è¿è¡Œinitï¼Œæ˜¯è°ƒç”¨ do_execveï¼Œæ­£æ˜¯ä¸Šé¢çš„è¿‡ç¨‹çš„ååŠéƒ¨åˆ†ï¼Œä»å†…æ ¸æ€æ‰§è¡Œç³»ç»Ÿè°ƒç”¨å¼€å§‹ã€‚\ndo_execve-\u0026gt;do_execveat_common-\u0026gt;exec_binprm-\u0026gt;search_binary_handlerï¼Œè¿™é‡Œé¢ä¼šè°ƒç”¨è¿™æ®µå†…å®¹ï¼š\nint search_binary_handler(struct linux_binprm *bprm) { ...... struct linux_binfmt *fmt; ...... retval = fmt-\u0026gt;load_binary(bprm); ...... } ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘è¦è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œéœ€è¦åŠ è½½è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„é¡¹ç›®æ‰§è¡Œè®¡åˆ’ä¹¦ã€‚å®ƒæ˜¯æœ‰ä¸€å®šæ ¼å¼çš„ã€‚Linux ä¸‹ä¸€ä¸ªå¸¸ç”¨çš„æ ¼å¼æ˜¯ ELFï¼ˆExecutable and Linkable Formatï¼Œå¯æ‰§è¡Œä¸å¯é“¾æ¥æ ¼å¼ï¼‰ã€‚äºæ˜¯æˆ‘ä»¬å°±æœ‰äº†ä¸‹é¢è¿™ä¸ªå®šä¹‰ï¼š\nstatic struct linux_binfmt elf_format = { .module = THIS_MODULE, .load_binary = load_elf_binary, .load_shlib = load_elf_library, .core_dump = elf_core_dump, .min_coredump = ELF_EXEC_PAGESIZE, }; è¿™å…¶å®å°±æ˜¯å…ˆè°ƒç”¨ load_elf_binaryï¼Œæœ€åè°ƒç”¨ start_threadã€‚\nvoid start_thread(struct pt_regs *regs, unsigned long new_ip, unsigned long new_sp) { set_user_gs(regs, 0); regs-\u0026gt;fs = 0; regs-\u0026gt;ds = __USER_DS; regs-\u0026gt;es = __USER_DS; regs-\u0026gt;ss = __USER_DS; regs-\u0026gt;cs = __USER_CS; regs-\u0026gt;ip = new_ip; regs-\u0026gt;sp = new_sp; regs-\u0026gt;flags = X86_EFLAGS_IF; force_iret(); } EXPORT_SYMBOL_GPL(start_thread); struct pt_regsï¼Œçœ‹åå­—é‡Œçš„ registerï¼Œå°±æ˜¯å¯„å­˜å™¨å•Šï¼è¿™ä¸ªç»“æ„å°±æ˜¯åœ¨ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œå†…æ ¸ä¸­ä¿å­˜ç”¨æˆ·æ€è¿è¡Œä¸Šä¸‹æ–‡çš„ï¼Œé‡Œé¢å°†ç”¨æˆ·æ€çš„ä»£ç æ®µ CSè®¾ç½®ä¸º __USER_CSï¼Œå°†ç”¨æˆ·æ€çš„æ•°æ®æ®µ DS è®¾ç½®ä¸º __USER_DSï¼Œä»¥åŠæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ IPã€æ ˆæŒ‡é’ˆå¯„å­˜å™¨ SPã€‚è¿™é‡Œç›¸å½“äºè¡¥ä¸Šäº†åŸæ¥ç³»ç»Ÿè°ƒç”¨é‡Œï¼Œä¿å­˜å¯„å­˜å™¨çš„ä¸€ä¸ªæ­¥éª¤ã€‚\næœ€åçš„ iret æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿå®ƒæ˜¯ç”¨äºä»ç³»ç»Ÿè°ƒç”¨ä¸­è¿”å›ã€‚è¿™ä¸ªæ—¶å€™ä¼šæ¢å¤å¯„å­˜å™¨ã€‚ä»å“ªé‡Œæ¢å¤å‘¢ï¼ŸæŒ‰è¯´æ˜¯ä»è¿›å…¥ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œä¿å­˜çš„å¯„å­˜å™¨é‡Œé¢æ‹¿å‡ºã€‚å¥½åœ¨ä¸Šé¢çš„å‡½æ•°è¡¥ä¸Šäº†å¯„å­˜å™¨ã€‚CS å’ŒæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ IP æ¢å¤äº†ï¼ŒæŒ‡å‘ç”¨æˆ·æ€ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„è¯­å¥ã€‚DS å’Œå‡½æ•°æ ˆæŒ‡é’ˆ SP ä¹Ÿè¢«æ¢å¤äº†ï¼ŒæŒ‡å‘ç”¨æˆ·æ€å‡½æ•°æ ˆçš„æ ˆé¡¶ã€‚æ‰€ä»¥ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œå°±ä»ç”¨æˆ·æ€å¼€å§‹è¿è¡Œäº†ã€‚\ninit ç»ˆäºä»å†…æ ¸åˆ°ç”¨æˆ·æ€äº†ã€‚ä¸€å¼€å§‹åˆ°ç”¨æˆ·æ€çš„æ˜¯ ramdisk çš„ initï¼Œåæ¥ä¼šå¯åŠ¨çœŸæ­£æ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ initï¼Œæˆä¸ºæ‰€æœ‰ç”¨æˆ·æ€è¿›ç¨‹çš„ç¥–å…ˆã€‚\nä¸ºä»€ä¹ˆä¼šæœ‰ ramdisk è¿™ä¸ªä¸œè¥¿å‘¢ï¼Ÿè¿˜è®°å¾—ä¸Šä¸€èŠ‚å’±ä»¬å†…æ ¸å¯åŠ¨çš„æ—¶å€™ï¼Œé…ç½®è¿‡è¿™ä¸ªå‚æ•°ï¼š\ninitrd16 /boot/initramfs-3.10.0-862.el7.x86_64.img å°±æ˜¯è¿™ä¸ªä¸œè¥¿ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿã€‚ä¸ºå•¥ä¼šæœ‰è¿™ä¸ªå‘¢ï¼Ÿ\næ˜¯å› ä¸ºåˆšæ‰é‚£ä¸ª init ç¨‹åºæ˜¯åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ï¼Œæ–‡ä»¶ç³»ç»Ÿä¸€å®šæ˜¯åœ¨ä¸€ä¸ªå­˜å‚¨è®¾å¤‡ä¸Šçš„ï¼Œä¾‹å¦‚ç¡¬ç›˜ã€‚Linux è®¿é—®å­˜å‚¨è®¾å¤‡ï¼Œè¦æœ‰é©±åŠ¨æ‰èƒ½è®¿é—®ã€‚å¦‚æœå­˜å‚¨ç³»ç»Ÿæ•°ç›®å¾ˆæœ‰é™ï¼Œé‚£é©±åŠ¨å¯ä»¥ç›´æ¥æ”¾åˆ°å†…æ ¸é‡Œé¢ï¼Œåæ­£å‰é¢æˆ‘ä»¬åŠ è½½è¿‡å†…æ ¸åˆ°å†…å­˜é‡Œäº†ï¼Œç°åœ¨å¯ä»¥ç›´æ¥å¯¹å­˜å‚¨ç³»ç»Ÿè¿›è¡Œè®¿é—®ã€‚\nä½†æ˜¯å­˜å‚¨ç³»ç»Ÿè¶Šæ¥è¶Šå¤šäº†ï¼Œå¦‚æœæ‰€æœ‰å¸‚é¢ä¸Šçš„å­˜å‚¨ç³»ç»Ÿçš„é©±åŠ¨éƒ½é»˜è®¤æ”¾è¿›å†…æ ¸ï¼Œå†…æ ¸å°±å¤ªå¤§äº†ã€‚è¿™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\næˆ‘ä»¬åªå¥½å…ˆå¼„ä¸€ä¸ªåŸºäºå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿã€‚å†…å­˜è®¿é—®æ˜¯ä¸éœ€è¦é©±åŠ¨çš„ï¼Œè¿™ä¸ªå°±æ˜¯ ramdiskã€‚è¿™ä¸ªæ—¶å€™ï¼Œramdisk æ˜¯æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚\nç„¶åï¼Œæˆ‘ä»¬å¼€å§‹è¿è¡Œ ramdisk ä¸Šçš„ /initã€‚ç­‰å®ƒè¿è¡Œå®Œäº†å°±å·²ç»åœ¨ç”¨æˆ·æ€äº†ã€‚/init è¿™ä¸ªç¨‹åºä¼šå…ˆæ ¹æ®å­˜å‚¨ç³»ç»Ÿçš„ç±»å‹åŠ è½½é©±åŠ¨ï¼Œæœ‰äº†é©±åŠ¨å°±å¯ä»¥è®¾ç½®çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿäº†ã€‚æœ‰äº†çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œramdiskä¸Šçš„ /init ä¼šå¯åŠ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ initã€‚\næ¥ä¸‹æ¥å°±æ˜¯å„ç§ç³»ç»Ÿçš„åˆå§‹åŒ–ã€‚å¯åŠ¨ç³»ç»Ÿçš„æœåŠ¡ï¼Œå¯åŠ¨æ§åˆ¶å°ï¼Œç”¨æˆ·å°±å¯ä»¥ç™»å½•è¿›æ¥äº†ã€‚\nè‡³æ­¤ï¼Œç”¨æˆ·æ€è¿›ç¨‹æœ‰äº†ä¸€ä¸ªç¥–å®—ï¼Œé‚£å†…æ ¸æ€çš„è¿›ç¨‹å‘¢ï¼Ÿè¿™å°±æ˜¯rest_initæ¥ä¸‹æ¥è¦åšçš„æ˜¯ï¼Œåˆ›å»º 2 å·çº¿ç¨‹ã€‚\nkernel_thread(kthreadd, NULL, CLONE_FS | CLONE_FILES)åˆä¸€æ¬¡ä½¿ç”¨ kernel_thread å‡½æ•°åˆ›å»ºè¿›ç¨‹ã€‚è¿™é‡Œçš„å‡½æ•° kthreaddï¼Œè´Ÿè´£æ‰€æœ‰å†…æ ¸æ€çš„çº¿ç¨‹çš„è°ƒåº¦å’Œç®¡ç†ï¼Œæ˜¯å†…æ ¸æ€æ‰€æœ‰çº¿ç¨‹è¿è¡Œçš„ç¥–å…ˆã€‚\nç³»ç»Ÿè°ƒç”¨ Linux æä¾›äº†glibcè¿™ä¸ªåº“å°è£…äº†ç³»ç»Ÿè°ƒç”¨ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚é‚£ä¹ˆåœ¨æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œglibcæ˜¯å¦‚ä½•è°ƒç”¨å†…æ ¸çš„opençš„å‘¢ï¼Ÿ\nåœ¨ glibc çš„æºä»£ç ä¸­ï¼Œæœ‰ä¸ªæ–‡ä»¶syscalls.listï¼Œé‡Œé¢åˆ—ç€æ‰€æœ‰ glibc çš„å‡½æ•°å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå°±åƒä¸‹é¢è¿™ä¸ªæ ·å­ï¼š\n# File name Caller Syscall name Args Strong name Weak names open - open Ci:siv __libc_open __open open å¦å¤–ï¼Œglibc è¿˜æœ‰ä¸€ä¸ªè„šæœ¬ make-syscall.shï¼Œå¯ä»¥æ ¹æ®ä¸Šé¢çš„é…ç½®æ–‡ä»¶ï¼Œå¯¹äºæ¯ä¸€ä¸ªå°è£…å¥½çš„ç³»ç»Ÿè°ƒç”¨ï¼Œç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰äº†ä¸€äº›å®ï¼Œä¾‹å¦‚ #define SYSCALL_NAME openã€‚\nglibc è¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶ syscall-template.Sï¼Œä½¿ç”¨ä¸Šé¢è¿™ä¸ªå®ï¼Œå®šä¹‰äº†è¿™ä¸ªç³»ç»Ÿè°ƒç”¨çš„è°ƒç”¨æ–¹å¼ã€‚\nå¯¹äºä»»ä½•ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œä¼šè°ƒç”¨DO_CALLã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå®ï¼Œè¿™ä¸ªå® 32 ä½å’Œ 64 ä½çš„å®šä¹‰æ˜¯ä¸ä¸€æ ·çš„ã€‚\n32 ä½ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ i386 ç›®å½•ä¸‹çš„sysdep.h æ–‡ä»¶\n/* Linux takes system call arguments in registers: syscall number %eax call-clobbered arg 1 %ebx call-saved arg 2 %ecx call-clobbered arg 3 %edx call-clobbered arg 4 %esi call-saved arg 5 %edi call-saved arg 6 %ebp call-saved ...... */ #define DO_CALL(syscall_name, args) PUSHARGS_##args DOARGS_##args movl $SYS_ify (syscall_name), %eax; ENTER_KERNEL POPARGS_##args è¿™é‡Œï¼Œæˆ‘ä»¬å°†è¯·æ±‚å‚æ•°æ”¾åœ¨å¯„å­˜å™¨é‡Œé¢ï¼Œæ ¹æ®ç³»ç»Ÿè°ƒç”¨çš„åç§°ï¼Œå¾—åˆ°ç³»ç»Ÿè°ƒç”¨å·ï¼Œæ”¾åœ¨å¯„å­˜å™¨ eax é‡Œé¢ï¼Œç„¶åæ‰§è¡Œ ENTER_KERNELã€‚\n# define ENTER_KERNEL int $0x80 ENTER_KERNELå°±æ˜¯ä¸€ä¸ªè½¯ä¸­æ–­ï¼Œé€šè¿‡å®ƒå¯ä»¥é™·å…¥ (trap) å†…æ ¸ã€‚\nåœ¨å†…æ ¸å¯åŠ¨çš„æ—¶å€™ï¼Œè¿˜è®°å¾—æœ‰ä¸€ä¸ª trap_init()ï¼Œè¿™æ˜¯ä¸€ä¸ªè½¯ä¸­æ–­çš„é™·å…¥é—¨ã€‚å½“æ¥åˆ°ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œtrap_init()å°±ä¼šè°ƒç”¨entry_INT80_32ã€‚\né€šè¿‡ push å’Œ SAVE_ALL å°†å½“å‰ç”¨æˆ·æ€çš„å¯„å­˜å™¨ï¼Œä¿å­˜åœ¨ pt_regs ç»“æ„é‡Œé¢ï¼Œç„¶åè°ƒç”¨ do_syscall_32_irqs_onã€‚\n\u003c!DOCTYPE html\u003e Responsive Image 64 ä½ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/","summary":"\u003ch2 id=\"ç³»ç»Ÿåˆå§‹åŒ–\"\u003eç³»ç»Ÿåˆå§‹åŒ–\u003c/h2\u003e\n\u003ch3 id=\"x86-æ¶æ„æ¦‚è¿°\"\u003ex86 æ¶æ„æ¦‚è¿°\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eCPUï¼ˆCentral Processing Unitï¼‰\u003c/strong\u003eï¼šä¸­å¤®å¤„ç†å™¨ï¼Œè®¡ç®—æœºæ‰€æœ‰è®¾å¤‡éƒ½å›´ç»•å®ƒå±•å¼€å·¥ä½œã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè¿ç®—å•å…ƒï¼šåªç®¡ç®—ï¼Œä¾‹å¦‚åšåŠ æ³•ã€åšä½ç§»ç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œå®ƒä¸çŸ¥é“åº”è¯¥ç®—å“ªäº›æ•°æ®ï¼Œè¿ç®—ç»“æœåº”è¯¥æ”¾åœ¨å“ªé‡Œã€‚\u003c/li\u003e\n\u003cli\u003eæ•°æ®å•å…ƒï¼šè¿ç®—å•å…ƒè®¡ç®—çš„æ•°æ®å¦‚æœæ¯æ¬¡éƒ½è¦ç»è¿‡æ€»çº¿ï¼Œåˆ°å†…å­˜é‡Œé¢ç°æ‹¿ï¼Œè¿™æ ·å°±å¤ªæ…¢äº†ï¼Œæ‰€ä»¥å°±æœ‰äº†æ•°æ®å•å…ƒã€‚æ•°æ®å•å…ƒåŒ…æ‹¬ CPU å†…éƒ¨çš„ç¼“å­˜å’Œå¯„å­˜å™¨ç»„ï¼Œç©ºé—´å¾ˆå°ï¼Œä½†æ˜¯é€Ÿåº¦é£å¿«ï¼Œå¯ä»¥æš‚æ—¶å­˜æ”¾æ•°æ®å’Œè¿ç®—ç»“æœã€‚\u003c/li\u003e\n\u003cli\u003eæ§åˆ¶å•å…ƒï¼šæœ‰äº†æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œä¹Ÿæœ‰äº†ç®—çš„åœ°æ–¹ï¼Œè¿˜éœ€è¦æœ‰ä¸ªæŒ‡æŒ¥åˆ°åº•åšä»€ä¹ˆè¿ç®—çš„åœ°æ–¹ï¼Œè¿™å°±æ˜¯æ§åˆ¶å•å…ƒã€‚æ§åˆ¶å•å…ƒæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æŒ‡æŒ¥ä¸­å¿ƒï¼Œå®ƒå¯ä»¥è·å¾—ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œè¿™æ¡æŒ‡ä»¤ã€‚è¿™ä¸ªæŒ‡ä»¤ä¼šæŒ‡å¯¼è¿ç®—å•å…ƒå–å‡ºæ•°æ®å•å…ƒä¸­çš„æŸå‡ ä¸ªæ•°æ®ï¼Œè®¡ç®—å‡ºä¸ªç»“æœï¼Œç„¶åæ”¾åœ¨æ•°æ®å•å…ƒçš„æŸä¸ªåœ°æ–¹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eå†…å­˜ï¼ˆMemoryï¼‰\u003c/strong\u003eï¼šCPU æœ¬èº«ä¸èƒ½ä¿å­˜å¤§é‡æ•°æ®ï¼Œè®¸å¤šå¤æ‚çš„è®¡ç®—éœ€è¦å°†ä¸­é—´ç»“æœä¿å­˜ä¸‹æ¥å°±å¿…é¡»ç”¨åˆ°å†…å­˜ã€‚\u003c/p\u003e","title":"Linux æ“ä½œç³»ç»Ÿ-ç³»ç»Ÿåˆå§‹åŒ–"},{"content":"å‰æ æœ¬æ–‡ä¸»è¦æ¶‰åŠ VSCode çš„ç›¸å…³é…ç½®ï¼Œç¼–è¯‘åŠè°ƒè¯•å·¥å…·éœ€è¦æå‰å®‰è£…å¥½ã€‚\nå·²ç»å®‰è£…å¥½riscv-toolchainï¼ŒåŒ…æ‹¬riscv64-unknown-elf-gccï¼Œriscv64-unknown-elf-gdb å·²ç»å®‰è£…å¥½qemuï¼ŒåŒ…æ‹¬riscv32-softmmu,riscv32-linux-user,riscv64-softmmu,riscv64-linux-user å·²ç»å®‰è£…å¥½g++,gdb è°ƒè¯•æµç¨‹ç®€ä»‹ å¯¹äºæˆ‘è¿™æ ·çš„æ–°æ‰‹ï¼Œè¦è°ƒè¯•ä¸€ä¸ªé¡¹ç›®æºç æœ€æ€•çš„å°±æ˜¯å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯æ€ä¹ˆèƒ½æŠŠé¡¹ç›®è·‘èµ·æ¥ã€‚\næˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„testé¡¹ç›®ï¼Œçœ‹çœ‹åœ¨ VSCode é‡Œæ€ä¹ˆè·‘èµ·æ¥ã€‚\næ‹¿åˆ°æºç åï¼Œå°†å…¶ä»¥æ–‡ä»¶å¤¹å½¢å¼ï¼ŒåŠ å…¥åˆ° VSCode ä¸­ï¼Œæ–‡ä»¶ - æ‰“å¼€æ–‡ä»¶å¤¹ - é€‰æ‹© test é¡¹ç›®æ–‡ä»¶å¤¹ã€‚é¡¹ç›®å°±ä¼šåœ¨ VSCode ä¸­æ‰“å¼€ï¼Œä½†æ˜¯æ­¤æ—¶æˆ‘ä»¬è¿˜æ— æ³•ç¼–è¯‘è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨ VSCode ä¸Š æ„å»ºå‡ºä¸€ä¸ª C è¯­è¨€çš„ç¼–è¯‘ä¸è°ƒè¯•ç¯å¢ƒã€‚\né¦–å…ˆå¾—å®‰è£…ä¸€ä¸ªæ’ä»¶C/C++ï¼Œæ‰“å¼€æ’ä»¶ä¸­å¿ƒCtrl+Shit+Xï¼Œæœç´¢ï¼Œå®‰è£…ã€‚\nç„¶åè¾“å…¥F5ï¼Œä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼Œé€‰æ‹©C++(GDB)ï¼Œç»§ç»­é€‰æ‹©g++ã€‚VSCode ä¼šè‡ªåŠ¨åˆ›å»º.vscodeæ–‡ä»¶å¤¹ï¼Œå·²ç»ä¸¤ä¸ªæ–‡ä»¶launch.jsonå’Œtasks.jsonã€‚ \u003c!DOCTYPE html\u003e Responsive Image launch.jsonç”¨æ¥é…ç½®è°ƒè¯•ç¯å¢ƒï¼Œtasks.jsonä¸»è¦ç”¨æ¥é…ç½®ç¼–è¯‘ç¯å¢ƒï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é…ç½®å…¶ä»–ä»»åŠ¡ã€‚task.jsoné‡Œé…ç½®çš„æ¯ä¸ªä»»åŠ¡å…¶å®å°±ç›¸å½“äºå¤šå¼€ä¸€ä¸ªæ§åˆ¶å°ã€‚\né…ç½®tasks.json å› ä¸ºæˆ‘ä»¬å…ˆè¦ç¼–è¯‘æºç ï¼Œç”Ÿæˆ.outæˆ–è€….exeæ–‡ä»¶ï¼Œæ‰èƒ½è°ƒè¯•ï¼Œæ‰€ä»¥å…ˆè¿›è¡Œç¼–è¯‘ä»»åŠ¡é…ç½®ã€‚\nè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶æ˜¯ä¸ªé…ç½®æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè¿›è¡Œé…ç½®ï¼Œä¹Ÿæœ‰ä¸€éƒ¨åˆ†å¯ä»¥ä¿æŒé»˜è®¤ã€‚\n// tasks.json { // https://code.visualstudio.com/docs/editor/tasks \u0026#34;version\u0026#34;: \u0026#34;2.0.0\u0026#34;, \u0026#34;tasks\u0026#34;: [ { // ä»»åŠ¡çš„åå­—ï¼Œæ³¨æ„æ˜¯å¤§å°å†™åŒºåˆ†çš„ //ä¼šåœ¨launchä¸­è°ƒç”¨è¿™ä¸ªåå­— \u0026#34;label\u0026#34;: \u0026#34;C/C++: g++ build active file\u0026#34;, // ä»»åŠ¡æ‰§è¡Œçš„æ˜¯shell \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, // å‘½ä»¤æ˜¯g++ \u0026#34;command\u0026#34;: \u0026#34;g++\u0026#34;, //g++ åé¢å¸¦çš„å‚æ•° \u0026#34;args\u0026#34;: [ \u0026#34;\u0026#39;-Wall\u0026#39;\u0026#34;, \u0026#34;-g\u0026#34;, // ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼Œå¦åˆ™æ— æ³•è¿›å…¥æ–­ç‚¹ \u0026#34;\u0026#39;-std=c++17\u0026#39;\u0026#34;, //ä½¿ç”¨c++17æ ‡å‡†ç¼–è¯‘ \u0026#34;\u0026#39;${file}\u0026#39;\u0026#34;, //å½“å‰æ–‡ä»¶å \u0026#34;-o\u0026#34;, //å¯¹è±¡åï¼Œä¸è¿›è¡Œç¼–è¯‘ä¼˜åŒ– \u0026#34;\u0026#39;${fileBasenameNoExtension}.exe\u0026#39;\u0026#34;, //å½“å‰æ–‡ä»¶åï¼ˆå»æ‰æ‰©å±•åï¼‰ ], } ] } å¦‚æœé¡¹ç›®æ˜¯é€šè¿‡ Makefile ç¼–è¯‘çš„ï¼Œé‚£å°±æ›´åŠ ç®€å•ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸ªä»»åŠ¡å³å¯ã€‚\n{ \u0026#34;version\u0026#34;: \u0026#34;2.0.0\u0026#34;, \u0026#34;tasks\u0026#34;: [ { //ä»»åŠ¡çš„åå­—æ–¹ä¾¿æ‰§è¡Œ \u0026#34;label\u0026#34;: \u0026#34;Make Project\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;make\u0026#34;, \u0026#34;args\u0026#34;:[ //8çº¿ç¨‹ç¼–è¯‘ \u0026#34;-j8\u0026#34;, ], }, ] } è¿è¡Œè¯¥ä»»åŠ¡æ—¶å°±ä¼šæ‰§è¡Œmakeå‘½ä»¤è¿›è¡Œç¼–è¯‘ã€‚\né…ç½®launch.json // launch.json { \u0026#34;version\u0026#34;: \u0026#34;0.2.0\u0026#34;, \u0026#34;configurations\u0026#34;: [ { //è°ƒè¯•ä»»åŠ¡çš„åå­— \u0026#34;name\u0026#34;: \u0026#34;g++ - Build and debug active file\u0026#34;, //åœ¨launchä¹‹å‰è¿è¡Œçš„ä»»åŠ¡åï¼Œè¿™ä¸ªåå­—ä¸€å®šè¦è·Ÿtasks.jsonä¸­çš„ä»»åŠ¡åå­—å¤§å°å†™ä¸€è‡´ \u0026#34;preLaunchTask\u0026#34;: \u0026#34;C/C++: g++ build active file\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;cppdbg\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, //éœ€è¦è¿è¡Œçš„æ˜¯å½“å‰æ‰“å¼€æ–‡ä»¶çš„ç›®å½•ä¸­ï¼Œ //åå­—å’Œå½“å‰æ–‡ä»¶ç›¸åŒï¼Œä½†æ‰©å±•åä¸ºexeçš„ç¨‹åº \u0026#34;program\u0026#34;: \u0026#34;${fileDirname}/${fileBasenameNoExtension}.exe\u0026#34;, \u0026#34;args\u0026#34;: [], // é€‰ä¸ºtrueåˆ™ä¼šåœ¨æ‰“å¼€æ§åˆ¶å°ååœæ»ï¼Œæš‚æ—¶ä¸æ‰§è¡Œç¨‹åº \u0026#34;stopAtEntry\u0026#34;: false, // å½“å‰å·¥ä½œè·¯å¾„ï¼šå½“å‰æ–‡ä»¶æ‰€åœ¨çš„å·¥ä½œç©ºé—´ \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34;, \u0026#34;environment\u0026#34;: [], // æ˜¯å¦ä½¿ç”¨å¤–éƒ¨æ§åˆ¶å° \u0026#34;externalConsole\u0026#34;: false, \u0026#34;MIMode\u0026#34;: \u0026#34;gdb\u0026#34;, \u0026#34;setupCommands\u0026#34;: [ { \u0026#34;description\u0026#34;: \u0026#34;Enable pretty-printing for gdb\u0026#34;, \u0026#34;text\u0026#34;: \u0026#34;-enable-pretty-printing\u0026#34;, \u0026#34;ignoreFailures\u0026#34;: true } ] }] } è¿è¡Œ ç»è¿‡ä»¥ä¸Šé…ç½®åï¼Œæˆ‘ä»¬æ‰“å¼€main.cppæ–‡ä»¶ï¼Œåœ¨coutå¤„æ‰“ä¸€ä¸ªæ–­ç‚¹ï¼ŒæŒ‰F5ï¼Œå³å¯ç¼–è¯‘ï¼Œè¿è¡Œï¼Œè°ƒè¯•ã€‚ä¸€å®šè¦æ‰“å¼€main.cppæ–‡ä»¶ï¼Œä¸èƒ½éšä¾¿æ‰“å¼€æ–‡ä»¶å°±å¼€å§‹å“¦ã€‚å› ä¸ºæˆ‘ä»¬åœ¨é…ç½®æ—¶ä½¿ç”¨äº†ä¸€äº›é¢„å®šä¹‰ï¼Œæ¯”å¦‚${file}è¡¨ç¤ºå½“å‰æ–‡ä»¶ï¼Œæ‰€ä»¥åªæœ‰æ‰“å¼€éœ€è¦è°ƒè¯•çš„æ–‡ä»¶æ‰èƒ½å¼€å§‹ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç¨‹åºå°†ä¼šåœ¨coutè¯­å¥åœä¸‹æ¥ã€‚\næˆ‘ä»¬å¯ä»¥æ³¨æ„ä¸€ä¸‹ç•Œé¢ä¸‹æ–¹çš„æ§åˆ¶å°ï¼Œå¯ä»¥æ›´ç›´è§‚äº†è§£launch.jasonå’Œtasks.jasonã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å³è¾¹çš„æ¡†ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨tasks.jasonä¸­é…ç½®çš„ä»»åŠ¡ï¼Œå·¦è¾¹çš„æ¡†å°±æ˜¯æˆ‘ä»¬åœ¨tasks.jasonä¸­commandä»¥åŠargsçš„å†…å®¹ï¼Œä»–å°±æ˜¯å¸®æˆ‘ä»¬æå‰å†™å¥½ç¼–è¯‘çš„é€‰é¡¹ã€‚ç„¶ååœ¨ shell ä¸­è¿è¡Œã€‚\nç¼–è¯‘è°ƒè¯• RISC-V ç¨‹åº äº†è§£ä»¥ä¸Šè¿™äº›ï¼Œå°±å¯ä»¥æŒ‰éœ€é…ç½®æ‰€éœ€çš„ç¯å¢ƒäº†ã€‚æˆ‘ä»¬è¿˜æ˜¯ä»tasks.jasonå¼€å§‹ã€‚å› ä¸ºå¼€å‘ç”¨çš„ç”µè„‘æ˜¯x86çš„ï¼Œæ‰€ä»¥å…ˆè¦ç¼–è¯‘å‡ºriscvçš„ç¨‹åºï¼Œå†ç”¨æ¨¡æ‹Ÿå™¨æ¨¡æ‹Ÿå‡ºrsicvçš„ç¯å¢ƒï¼Œç„¶ååœ¨æ¨¡æ‹Ÿçš„ç¯å¢ƒä¸­è¿è¡Œç¨‹åºï¼Œæœ€åæ‰èƒ½å¼€å§‹è°ƒè¯•ã€‚\nå‡è®¾å·²ç»å®‰è£…å¥½å¼€å¤´æ‰€æåˆ°çš„å·¥å…·ã€‚é¦–å…ˆé…ç½®tasks.jasonï¼š\n{ \u0026#34;version\u0026#34;: \u0026#34;2.0.0\u0026#34;, \u0026#34;tasks\u0026#34;: [ { // ç¼–è¯‘å½“å‰ä»£ç  \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;C/C++(RISCV): Build active file\u0026#34;, // ç¼–è¯‘å™¨çš„ä½ç½® \u0026#34;command\u0026#34;: \u0026#34;/opt/riscv/bin/riscv64-unknown-elf-g++\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-Wall\u0026#34;, // å¼€å¯æ‰€æœ‰è­¦å‘Š \u0026#34;-g\u0026#34;, // ç”Ÿæˆè°ƒè¯•ä¿¡æ¯s \u0026#34;${file}\u0026#34;, \u0026#34;-o\u0026#34;, \u0026#34;${workspaceFolder}/debug/${fileBasenameNoExtension}\u0026#34; // æˆ‘é€‰æ‹©å°†å¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨debugç›®å½•ä¸‹ ], // å½“å‰å·¥ä½œè·¯å¾„ï¼šæ‰§è¡Œå½“å‰å‘½ä»¤æ—¶æ‰€åœ¨çš„è·¯å¾„ \u0026#34;options\u0026#34;: { \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34; }, \u0026#34;problemMatcher\u0026#34;: [ \u0026#34;$gcc\u0026#34; ] }, { // å¯åŠ¨qemuä¾›è°ƒè¯•å™¨è¿æ¥ \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;Run Qemu Server(RISCV)\u0026#34;, \u0026#34;dependsOn\u0026#34;: \u0026#34;C/C++(RISCV): Build active file\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;qemu-system-riscv64\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-g\u0026#34;, \u0026#34;65500\u0026#34;, // gdbç«¯å£ï¼Œè‡ªå·±å®šä¹‰ \u0026#34;${workspaceFolder}/debug/${fileBasenameNoExtension}\u0026#34; ], }, { // æœ‰æ—¶å€™qemuæœ‰å¯èƒ½æ²¡æ³•é€€å‡ºï¼Œæ•…ç¼–å†™ä¸€ä¸ªä»»åŠ¡ç”¨äºå¼ºè¡Œç»“æŸqemuè¿›ç¨‹ \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;Kill Qemu Server(RISCV)\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;ps -C qemu-riscv64 --no-headers | cut -d \\\\ -f 1 | xargs kill -9\u0026#34;, } ] } tasks.jasonæ˜¯å¯ä»¥é…ç½®å¤šä¸ªä»»åŠ¡çš„ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡ç”¨æ¥ç¼–è¯‘æˆriscvæ¶æ„ä¸‹çš„ç¨‹åºï¼Œç¬¬äºŒä¸ªä»»åŠ¡ç”¨æ¥å¯åŠ¨ qemuï¼Œè®©ç¨‹åºåœ¨ qemu ä¸Šè¿è¡Œèµ·æ¥ã€‚\nç¬¬ä¸€ä¸ªä»»åŠ¡ä¸­ï¼Œcommandå°±æ˜¯é…ç½®ç¼–è¯‘å™¨riscv64-unkonown-elf-gccçš„å±æ€§ï¼Œç¬¬äºŒä¸ªä»»åŠ¡ä¸­ï¼Œcommandæ˜¯é…ç½® qemu æ¨¡æ‹Ÿå™¨qemu-system-riscv32çš„å±æ€§ã€‚ç¬¬ä¸‰ä¸ªä»»åŠ¡ä¸­ï¼Œç”¨æ¥é…ç½®ç»“æŸ qemu æ¨¡æ‹Ÿå™¨çš„å‘½ä»¤ã€‚\næ¥ä¸‹æ¥é…ç½®launch.jasonï¼š\n{ \u0026#34;version\u0026#34;: \u0026#34;0.2.0\u0026#34;, \u0026#34;configurations\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;C/C++(RISCV) - Debug Active File\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;cppdbg\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, \u0026#34;program\u0026#34;: \u0026#34;${workspaceFolder}/debug/${fileBasenameNoExtension}\u0026#34;, \u0026#34;args\u0026#34;: [], \u0026#34;stopAtEntry\u0026#34;: false, \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34;, \u0026#34;environment\u0026#34;: [], \u0026#34;externalConsole\u0026#34;: false, \u0026#34;MIMode\u0026#34;: \u0026#34;gdb\u0026#34;, \u0026#34;setupCommands\u0026#34;: [ { \u0026#34;description\u0026#34;: \u0026#34;ä¸º gdb å¯ç”¨æ•´é½æ‰“å°\u0026#34;, \u0026#34;text\u0026#34;: \u0026#34;-enable-pretty-printing\u0026#34;, \u0026#34;ignoreFailures\u0026#34;: true } ], // RISC-Vå·¥å…·é“¾ä¸­çš„gdb \u0026#34;miDebuggerPath\u0026#34;: \u0026#34;/opt/riscv/bin/riscv64-unknown-elf-gdb\u0026#34;, // è¿™é‡Œéœ€è¦ä¸task.jsonä¸­å®šä¹‰çš„ç«¯å£ä¸€è‡´ \u0026#34;miDebuggerServerAddress\u0026#34;: \u0026#34;localhost:65500\u0026#34; } ] } æˆ‘ä»¬åœ¨é…ç½®x86ä¸‹çš„è°ƒè¯•ç¯å¢ƒæ—¶ï¼Œlaunch.jasonä¸­æœ‰ä¸ª\u0026quot;preLaunchTask\u0026quot;: \u0026quot;C/C++: g++ build active file\u0026quot;ï¼Œå±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„ç›®çš„æ˜¯åœ¨å¯åŠ¨è°ƒè¯•ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œä»»åŠ¡åå­—ä¸º\u0026quot;C/C++: g++ build active file\u0026quot;ä»»åŠ¡ï¼Œä¹Ÿæ˜¯å°±ç¼–è¯‘çš„ä»»åŠ¡ã€‚\nå› ä¸ºå¯åŠ¨ qemu ä¼šå¯¼è‡´é˜»å¡ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰åŠ preLaunchTaskï¼Œåœ¨å¯åŠ¨è°ƒè¯•ä¹‹å‰ï¼Œå…ˆæŠŠ qemu è¿è¡Œèµ·æ¥ã€‚è¾“å…¥Ctrl+Shift+Pï¼Œæ‰“å¼€ VSCode å‘½ä»¤è¡Œã€‚è¾“å…¥Run Taskï¼Œ\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»ç¬¬ä¸€ä¸ªï¼Œé€‰æ‹©ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡ºç°çš„ä¸‰ä¸ªä»»åŠ¡å°±æ˜¯æˆ‘ä»¬åœ¨tasks.jasonä¸­é…ç½®çš„ä¸‰ä¸ªä»»åŠ¡ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ª Buildï¼Œç¼–è¯‘å‡ºç¨‹åºï¼Œå†é‡å¤æ“ä½œï¼Œé€‰æ‹©ç¬¬ä¸‰ä¸ªæ‰§è¡Œ QEMU ä»»åŠ¡ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image é¢„å®šä¹‰å˜é‡ å®˜ç½‘\n","permalink":"https://lifeislife.cn/posts/vscode%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F/","summary":"\u003ch2 id=\"å‰æ\"\u003eå‰æ\u003c/h2\u003e\n\u003cp\u003eæœ¬æ–‡ä¸»è¦æ¶‰åŠ VSCode çš„ç›¸å…³é…ç½®ï¼Œç¼–è¯‘åŠè°ƒè¯•å·¥å…·éœ€è¦æå‰å®‰è£…å¥½ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå·²ç»å®‰è£…å¥½\u003ccode\u003eriscv-toolchain\u003c/code\u003eï¼ŒåŒ…æ‹¬\u003ccode\u003eriscv64-unknown-elf-gcc\u003c/code\u003eï¼Œ\u003ccode\u003eriscv64-unknown-elf-gdb\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eå·²ç»å®‰è£…å¥½\u003ccode\u003eqemu\u003c/code\u003eï¼ŒåŒ…æ‹¬\u003ccode\u003eriscv32-softmmu,riscv32-linux-user,riscv64-softmmu,riscv64-linux-user\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eå·²ç»å®‰è£…å¥½\u003ccode\u003eg++\u003c/code\u003e,\u003ccode\u003egdb\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è°ƒè¯•æµç¨‹ç®€ä»‹\"\u003eè°ƒè¯•æµç¨‹ç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eå¯¹äºæˆ‘è¿™æ ·çš„æ–°æ‰‹ï¼Œè¦è°ƒè¯•ä¸€ä¸ªé¡¹ç›®æºç æœ€æ€•çš„å°±æ˜¯å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯æ€ä¹ˆèƒ½æŠŠé¡¹ç›®è·‘èµ·æ¥ã€‚\u003c/p\u003e","title":"VSCode è°ƒè¯• RISC-V ç¨‹åº"},{"content":"ç®€ä»‹ ä¸ºäº†é˜²æ­¢å‡ºç°å› å¤šä¸ªç¨‹åºåŒæ—¶è®¿é—®ä¸€ä¸ªå…±äº«èµ„æºè€Œå¼•å‘çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œå®ƒå¯ä»¥é€šè¿‡ç”Ÿæˆå¹¶ä½¿ç”¨ä»¤ç‰Œæ¥æˆæƒï¼Œåœ¨ä»»ä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹è®¿é—®ä»£ç çš„ä¸´ç•ŒåŒºåŸŸã€‚ä¸´ç•ŒåŒºåŸŸæ˜¯æŒ‡æ‰§è¡Œæ•°æ®æ›´æ–°çš„ä»£ç éœ€è¦ç‹¬å å¼åœ°æ‰§è¡Œã€‚è€Œä¿¡å·é‡å°±å¯ä»¥æä¾›è¿™æ ·çš„ä¸€ç§è®¿é—®æœºåˆ¶ï¼Œè®©ä¸€ä¸ªä¸´ç•ŒåŒºåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å®ƒï¼Œä¹Ÿå°±æ˜¯è¯´ä¿¡å·é‡æ˜¯ç”¨æ¥è°ƒåè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®çš„ã€‚\nä¿¡å·é‡æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œç¨‹åºå¯¹å…¶è®¿é—®éƒ½æ˜¯åŸå­æ“ä½œï¼Œä¸”åªå…è®¸å¯¹å®ƒè¿›è¡Œç­‰å¾…ï¼ˆå³P) å’Œå‘é€ï¼ˆå³V) ä¿¡æ¯æ“ä½œã€‚æœ€ç®€å•çš„ä¿¡å·é‡æ˜¯åªèƒ½å– 0 å’Œ 1 çš„å˜é‡ï¼Œè¿™ä¹Ÿæ˜¯ä¿¡å·é‡æœ€å¸¸è§çš„ä¸€ç§å½¢å¼ï¼Œå«åšäºŒè¿›åˆ¶ä¿¡å·é‡ã€‚è€Œå¯ä»¥å–å¤šä¸ªæ­£æ•´æ•°çš„ä¿¡å·é‡è¢«ç§°ä¸ºé€šç”¨ä¿¡å·é‡ã€‚è¿™é‡Œä¸»è¦è®¨è®ºäºŒè¿›åˆ¶ä¿¡å·é‡ã€‚\nç”±äºä¿¡å·é‡åªèƒ½è¿›è¡Œä¸¤ç§æ“ä½œç­‰å¾…å’Œå‘é€ä¿¡å·ï¼Œå³ P(sv) å’Œ V(sv),ä»–ä»¬çš„è¡Œä¸ºæ˜¯è¿™æ ·çš„ï¼š\nP(sv)ï¼šå¦‚æœsvçš„å€¼å¤§äºé›¶ï¼Œå°±ç»™å®ƒå‡ 1ï¼›å¦‚æœå®ƒçš„å€¼ä¸ºé›¶ï¼Œå°±æŒ‚èµ·è¯¥è¿›ç¨‹çš„æ‰§è¡Œ\nV(sv)ï¼šå¦‚æœæœ‰å…¶ä»–è¿›ç¨‹å› ç­‰å¾…svè€Œè¢«æŒ‚èµ·ï¼Œå°±è®©å®ƒæ¢å¤è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰è¿›ç¨‹å› ç­‰å¾…svè€ŒæŒ‚èµ·ï¼Œå°±ç»™å®ƒåŠ  1.\nä¸¾ä¸ªä¾‹å­ï¼Œå°±æ˜¯ä¸¤ä¸ªè¿›ç¨‹å…±äº«ä¿¡å·é‡svï¼Œä¸€æ—¦å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œäº†P(sv)æ“ä½œï¼Œå®ƒå°†å¾—åˆ°ä¿¡å·é‡ï¼Œå¹¶å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºï¼Œä½¿svå‡ 1ã€‚è€Œç¬¬äºŒä¸ªè¿›ç¨‹å°†è¢«é˜»æ­¢è¿›å…¥ä¸´ç•ŒåŒºï¼Œå› ä¸ºå½“å®ƒè¯•å›¾æ‰§è¡ŒP(sv)æ—¶ï¼Œsvä¸º 0ï¼Œå®ƒä¼šè¢«æŒ‚èµ·ä»¥ç­‰å¾…ç¬¬ä¸€ä¸ªè¿›ç¨‹ç¦»å¼€ä¸´ç•ŒåŒºåŸŸå¹¶æ‰§è¡ŒV(sv)é‡Šæ”¾ä¿¡å·é‡ï¼Œè¿™æ—¶ç¬¬äºŒä¸ªè¿›ç¨‹å°±å¯ä»¥æ¢å¤æ‰§è¡Œã€‚\næœ¬æ–‡ä»£ç åŒæ­¥åœ¨è¿™é‡Œã€‚\nç›¸å…³å‡½æ•° Linux æä¾›äº†ä¸€ç»„ç²¾å¿ƒè®¾è®¡çš„ä¿¡å·é‡æ¥å£æ¥å¯¹ä¿¡å·è¿›è¡Œæ“ä½œï¼Œå®ƒä»¬ä¸åªæ˜¯é’ˆå¯¹äºŒè¿›åˆ¶ä¿¡å·é‡ï¼Œä¸‹é¢å°†ä¼šå¯¹è¿™äº›å‡½æ•°è¿›è¡Œä»‹ç»ï¼Œä½†è¯·æ³¨æ„ï¼Œè¿™äº›å‡½æ•°éƒ½æ˜¯ç”¨æ¥å¯¹æˆç»„çš„ä¿¡å·é‡å€¼è¿›è¡Œæ“ä½œçš„ã€‚å®ƒä»¬å£°æ˜åœ¨å¤´æ–‡ä»¶ sys/sem.h ä¸­ã€‚\nsemget() å®ƒçš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæ–°ä¿¡å·é‡æˆ–å–å¾—ä¸€ä¸ªå·²æœ‰ä¿¡å·é‡ï¼ŒåŸå‹ä¸ºï¼š\nint semget(key_t key, int num_sems, int sem_flags); keyæ˜¯æ•´æ•°å€¼ï¼ˆå”¯ä¸€éé›¶ï¼‰ï¼Œä¸ç›¸å…³çš„è¿›ç¨‹å¯ä»¥é€šè¿‡å®ƒè®¿é—®ä¸€ä¸ªä¿¡å·é‡ï¼Œå®ƒä»£è¡¨ç¨‹åºå¯èƒ½è¦ä½¿ç”¨çš„æŸä¸ªèµ„æºï¼Œç¨‹åºå¯¹æ‰€æœ‰ä¿¡å·é‡çš„è®¿é—®éƒ½æ˜¯é—´æ¥çš„ï¼Œç¨‹åºå…ˆé€šè¿‡è°ƒç”¨semget()å‡½æ•°å¹¶æä¾›ä¸€ä¸ªé”®ï¼Œå†ç”±ç³»ç»Ÿç”Ÿæˆä¸€ä¸ªç›¸åº”çš„ä¿¡å·æ ‡è¯†ç¬¦ï¼ˆsemget()å‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œåªæœ‰semget()å‡½æ•°æ‰ç›´æ¥ä½¿ç”¨ä¿¡å·é‡é”®ï¼Œæ‰€æœ‰å…¶ä»–çš„ä¿¡å·é‡å‡½æ•°ä½¿ç”¨ç”±semget()å‡½æ•°è¿”å›çš„ä¿¡å·é‡æ ‡è¯†ç¬¦ã€‚å¦‚æœå¤šä¸ªç¨‹åºä½¿ç”¨ç›¸åŒçš„keyå€¼ï¼Œkeyå°†è´Ÿè´£åè°ƒå·¥ä½œã€‚\nnum_semsæŒ‡å®šéœ€è¦çš„ä¿¡å·é‡æ•°ç›®ï¼Œå®ƒçš„å€¼å‡ ä¹æ€»æ˜¯ 1ã€‚\nsem_flagsæ˜¯ä¸€ç»„æ ‡å¿—ï¼Œå½“æƒ³è¦å½“ä¿¡å·é‡ä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡å·é‡ï¼Œå¯ä»¥å’Œå€¼IPC_CREATåšæŒ‰ä½æˆ–æ“ä½œã€‚è®¾ç½®äº†IPC_CREATæ ‡å¿—åï¼Œå³ä½¿ç»™å‡ºçš„é”®æ˜¯ä¸€ä¸ªå·²æœ‰ä¿¡å·é‡çš„é”®ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿé”™è¯¯ã€‚è€ŒIPC_CREAT | IPC_EXCLåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œå”¯ä¸€çš„ä¿¡å·é‡ï¼Œå¦‚æœä¿¡å·é‡å·²å­˜åœ¨ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚\nsemget()å‡½æ•°æˆåŠŸè¿”å›ä¸€ä¸ªç›¸åº”ä¿¡å·æ ‡è¯†ç¬¦ï¼ˆéé›¶ï¼‰ï¼Œå¤±è´¥è¿”å›-1.\nsemop() å®ƒçš„ä½œç”¨æ˜¯æ”¹å˜ä¿¡å·é‡çš„å€¼ï¼ŒåŸå‹ä¸ºï¼š\nint semop(int sem_id, struct sembuf *sem_opa, size_t num_sem_ops); sem_idæ˜¯ç”±semget()è¿”å›çš„ä¿¡å·é‡æ ‡è¯†ç¬¦ï¼Œsembufç»“æ„çš„å®šä¹‰å¦‚ä¸‹ï¼š\nstruct sembuf{ short sem_num; // é™¤éä½¿ç”¨ä¸€ç»„ä¿¡å·é‡ï¼Œå¦åˆ™å®ƒä¸º0 short sem_op; // ä¿¡å·é‡åœ¨ä¸€æ¬¡æ“ä½œä¸­éœ€è¦æ”¹å˜çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸¤ä¸ªæ•°ï¼Œä¸€ä¸ªæ˜¯-1ï¼Œå³ Pï¼ˆç­‰å¾…ï¼‰æ“ä½œï¼Œ // ä¸€ä¸ªæ˜¯+1ï¼Œå³Vï¼ˆå‘é€ä¿¡å·ï¼‰æ“ä½œã€‚ short sem_flg; // é€šå¸¸ä¸º SEM_UNDOï¼Œä½¿æ“ä½œç³»ç»Ÿè·Ÿè¸ªä¿¡å·ï¼Œ // å¹¶åœ¨è¿›ç¨‹æ²¡æœ‰é‡Šæ”¾è¯¥ä¿¡å·é‡è€Œç»ˆæ­¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿé‡Šæ”¾ä¿¡å·é‡ }; num_sem_opsï¼šæ“ä½œsopsä¸­çš„æ“ä½œä¸ªæ•°ï¼Œé€šå¸¸å–å€¼ä¸º 1\nsemctl() è¯¥å‡½æ•°ç”¨æ¥ç›´æ¥æ§åˆ¶ä¿¡å·é‡ä¿¡æ¯ï¼Œå®ƒçš„åŸå‹ä¸ºï¼š\nint semctl(int sem_id, int sem_num, int command, ...); å¦‚æœæœ‰ç¬¬å››ä¸ªå‚æ•°ï¼Œå®ƒé€šå¸¸æ˜¯ä¸€ä¸ªunion semumç»“æ„ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š\nunion semun { int val; struct semid_ds *buf; unsigned short *arry; }; å‰ä¸¤ä¸ªå‚æ•°ä¸å‰é¢ä¸€ä¸ªå‡½æ•°ä¸­çš„ä¸€æ ·ï¼Œcommandé€šå¸¸æ˜¯ä¸‹é¢ä¸¤ä¸ªå€¼ä¸­çš„å…¶ä¸­ä¸€ä¸ª\nSETVALï¼šç”¨æ¥æŠŠä¿¡å·é‡åˆå§‹åŒ–ä¸ºä¸€ä¸ªå·²çŸ¥çš„å€¼ã€‚p è¿™ä¸ªå€¼é€šè¿‡ union semun ä¸­çš„ val æˆå‘˜è®¾ç½®ï¼Œå…¶ä½œç”¨æ˜¯åœ¨ä¿¡å·é‡ç¬¬ä¸€æ¬¡ä½¿ç”¨å‰å¯¹å®ƒè¿›è¡Œè®¾ç½®ã€‚\nIPC_RMIDï¼šç”¨äºåˆ é™¤ä¸€ä¸ªå·²ç»æ— éœ€ç»§ç»­ä½¿ç”¨çš„ä¿¡å·é‡æ ‡è¯†ç¬¦ã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1ipc%E4%B9%8B%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eä¸ºäº†é˜²æ­¢å‡ºç°å› å¤šä¸ªç¨‹åºåŒæ—¶è®¿é—®ä¸€ä¸ªå…±äº«èµ„æºè€Œå¼•å‘çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œå®ƒå¯ä»¥é€šè¿‡ç”Ÿæˆå¹¶ä½¿ç”¨ä»¤ç‰Œæ¥æˆæƒï¼Œåœ¨ä»»ä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹è®¿é—®ä»£ç çš„ä¸´ç•ŒåŒºåŸŸã€‚ä¸´ç•ŒåŒºåŸŸæ˜¯æŒ‡æ‰§è¡Œæ•°æ®æ›´æ–°çš„ä»£ç éœ€è¦ç‹¬å å¼åœ°æ‰§è¡Œã€‚è€Œä¿¡å·é‡å°±å¯ä»¥æä¾›è¿™æ ·çš„ä¸€ç§è®¿é—®æœºåˆ¶ï¼Œè®©ä¸€ä¸ªä¸´ç•ŒåŒºåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å®ƒï¼Œä¹Ÿå°±æ˜¯è¯´ä¿¡å·é‡æ˜¯ç”¨æ¥è°ƒåè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®çš„ã€‚\u003c/p\u003e","title":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹ä¿¡å·é‡ï¼ˆSemaphoreï¼‰"},{"content":"ç®€ä»‹ æ¶ˆæ¯é˜Ÿåˆ—æä¾›äº†ä¸€ç§ä»ä¸€ä¸ªè¿›ç¨‹å‘å¦ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ä¸ªæ•°æ®å—çš„æ–¹æ³•ã€‚\næ¯ä¸ªæ•°æ®å—éƒ½è¢«è®¤ä¸ºå«æœ‰ä¸€ä¸ªç±»å‹ï¼Œæ¥æ”¶è¿›ç¨‹å¯ä»¥ç‹¬ç«‹åœ°æ¥æ”¶å«æœ‰ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘é€æ¶ˆæ¯æ¥é¿å…å‘½åç®¡é“çš„åŒæ­¥å’Œé˜»å¡é—®é¢˜ã€‚ä½†æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä¸å‘½åç®¡é“ä¸€æ ·ï¼Œæ¯ä¸ªæ•°æ®å—éƒ½æœ‰ä¸€ä¸ªæœ€å¤§é•¿åº¦çš„é™åˆ¶ã€‚\næœ¬æ–‡ä»£ç åŒæ­¥åœ¨è¿™é‡Œã€‚\nç›¸å…³å‡½æ•° msgget() è¯¥å‡½æ•°ç”¨æ¥åˆ›å»ºå’Œè®¿é—®ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ã€‚å®ƒçš„åŸå‹ä¸ºï¼š\nint msgget(key_t, key, int msgflg); keyï¼šä¸å…¶ä»–çš„ IPC æœºåˆ¶ä¸€æ ·ï¼Œç¨‹åºå¿…é¡»æä¾›ä¸€ä¸ªé”®æ¥å‘½åæŸä¸ªç‰¹å®šçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚ msgflgæ˜¯ä¸€ä¸ªæƒé™æ ‡å¿—ï¼Œè¡¨ç¤ºæ¶ˆæ¯é˜Ÿåˆ—çš„è®¿é—®æƒé™ï¼Œå®ƒä¸æ–‡ä»¶çš„è®¿é—®æƒé™ä¸€æ ·ã€‚msgflgå¯ä»¥ä¸IPC_CREATåšæˆ–æ“ä½œï¼Œè¡¨ç¤ºå½“ key æ‰€å‘½åçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚æœ key æ‰€å‘½åçš„æ¶ˆæ¯é˜Ÿåˆ—å­˜åœ¨æ—¶ï¼ŒIPC_CREATæ ‡å¿—ä¼šè¢«å¿½ç•¥ï¼Œè€Œåªè¿”å›ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚ å®ƒè¿”å›ä¸€ä¸ªä»¥keyå‘½åçš„æ¶ˆæ¯é˜Ÿåˆ—çš„æ ‡è¯†ç¬¦ï¼ˆéé›¶æ•´æ•°ï¼‰ï¼Œå¤±è´¥æ—¶è¿”å›-1.\nmsgsnd() è¯¥å‡½æ•°ç”¨æ¥æŠŠæ¶ˆæ¯æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚å®ƒçš„åŸå‹ä¸ºï¼š\nint msgsend(int msgid, const void *msg_ptr, size_t msg_sz, int msgflg); msgidæ˜¯ç”±msggetå‡½æ•°è¿”å›çš„æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦ã€‚\nmsg_ptræ˜¯ä¸€ä¸ªæŒ‡å‘å‡†å¤‡å‘é€æ¶ˆæ¯çš„æŒ‡é’ˆï¼Œä½†æ˜¯æ¶ˆæ¯çš„æ•°æ®ç»“æ„å´æœ‰ä¸€å®šçš„è¦æ±‚ï¼ŒæŒ‡é’ˆmsg_ptræ‰€æŒ‡å‘çš„æ¶ˆæ¯ç»“æ„ä¸€å®šè¦æ˜¯ä»¥ä¸€ä¸ªé•¿æ•´å‹æˆå‘˜å˜é‡å¼€å§‹çš„ç»“æ„ä½“ï¼Œæ¥æ”¶å‡½æ•°å°†ç”¨è¿™ä¸ªæˆå‘˜æ¥ç¡®å®šæ¶ˆæ¯çš„ç±»å‹ã€‚æ‰€ä»¥æ¶ˆæ¯ç»“æ„è¦å®šä¹‰æˆè¿™æ ·ï¼š\nstruct my_message { long int message_type; /* The data you wish to transfer */ }; msg_sz æ˜¯msg_ptræŒ‡å‘çš„æ¶ˆæ¯çš„é•¿åº¦\nmsgflg ç”¨äºæ§åˆ¶å½“å‰æ¶ˆæ¯é˜Ÿåˆ—æ»¡æˆ–é˜Ÿåˆ—æ¶ˆæ¯åˆ°è¾¾ç³»ç»ŸèŒƒå›´çš„é™åˆ¶æ—¶å°†è¦å‘ç”Ÿçš„äº‹æƒ…\nå¦‚æœè°ƒç”¨æˆåŠŸï¼Œæ¶ˆæ¯æ•°æ®çš„å‰¯æœ¬å°†è¢«æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¹¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›-1.\nmsgrcv() è¯¥å‡½æ•°ç”¨æ¥ä»ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—è·å–æ¶ˆæ¯ï¼Œå®ƒçš„åŸå‹ä¸º\nint msgrcv(int msgid, void *msg_ptr, size_t msg_st, long int msgtype, int msgflg); å‰ä¸‰ä¸ªå‚æ•°å‚ç…§å‰é¢çš„è§£é‡Š msgtype å¯ä»¥å®ç°ä¸€ç§ç®€å•çš„æ¥æ”¶ä¼˜å…ˆçº§ã€‚å¦‚æœmsgtypeä¸º0ï¼Œå°±è·å–é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯ã€‚å¦‚æœå®ƒçš„å€¼å¤§äºé›¶ï¼Œå°†è·å–å…·æœ‰ç›¸åŒæ¶ˆæ¯ç±»å‹çš„ç¬¬ä¸€ä¸ªä¿¡æ¯ã€‚å¦‚æœå®ƒå°äºé›¶ï¼Œå°±è·å–ç±»å‹ç­‰äºæˆ–å°äºmsgtypeçš„ç»å¯¹å€¼çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯ã€‚ msgflg ç”¨äºæ§åˆ¶å½“é˜Ÿåˆ—ä¸­æ²¡æœ‰ç›¸åº”ç±»å‹çš„æ¶ˆæ¯å¯ä»¥æ¥æ”¶æ—¶å°†å‘ç”Ÿçš„äº‹æƒ…ã€‚ è°ƒç”¨æˆåŠŸæ—¶ï¼Œè¯¥å‡½æ•°è¿”å›æ”¾åˆ°æ¥æ”¶ç¼“å­˜åŒºä¸­çš„å­—èŠ‚æ•°ï¼Œæ¶ˆæ¯è¢«å¤åˆ¶åˆ°ç”±msg_ptræŒ‡å‘çš„ç”¨æˆ·åˆ†é…çš„ç¼“å­˜åŒºä¸­ï¼Œç„¶ååˆ é™¤æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„å¯¹åº”æ¶ˆæ¯ã€‚å¤±è´¥æ—¶è¿”å›-1ã€‚ msgctl() è¯¥å‡½æ•°ç”¨æ¥æ§åˆ¶æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®ƒä¸å…±äº«å†…å­˜çš„shmctlå‡½æ•°ç›¸ä¼¼ï¼Œå®ƒçš„åŸå‹ä¸ºï¼š\nint msgctl(int msgid, int command, struct msgid_ds *buf); msgidåŒä¸Š\ncommandæ˜¯å°†è¦é‡‡å–çš„åŠ¨ä½œï¼Œå®ƒå¯ä»¥å–3ä¸ªå€¼:\nIPC_STATï¼šæŠŠmsgid_dsç»“æ„ä¸­çš„æ•°æ®è®¾ç½®ä¸ºæ¶ˆæ¯é˜Ÿåˆ—çš„å½“å‰å…³è”å€¼ï¼Œå³ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„å½“å‰å…³è”å€¼è¦†ç›–msgid_dsçš„å€¼ã€‚ IPC_SETï¼šå¦‚æœè¿›ç¨‹æœ‰è¶³å¤Ÿçš„æƒé™ï¼Œå°±æŠŠæ¶ˆæ¯åˆ—é˜Ÿçš„å½“å‰å…³è”å€¼è®¾ç½®ä¸ºmsgid_dsç»“æ„ä¸­ç»™å‡ºçš„å€¼ IPC_RMIDï¼šåˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— bufæ˜¯æŒ‡å‘msgid_dsç»“æ„çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å¼å’Œè®¿é—®æƒé™çš„ç»“æ„ã€‚msgid_dsç»“æ„è‡³å°‘åŒ…æ‹¬ä»¥ä¸‹æˆå‘˜ï¼š\nstruct msgid_ds { uid_t shm_perm.uid; uid_t shm_perm.gid; mode_t shm_perm.mode; }; æˆåŠŸæ—¶è¿”å› 0ï¼Œå¤±è´¥æ—¶è¿”å› -1.\nDemo //msgsnd #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;errno.h\u0026gt; #include \u0026lt;string.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;sys/msg.h\u0026gt; #define MAX_TXT 512 struct msg_st { long int msg_type; char msg[MAX_TXT]; }; int main() { struct msg_st message; int msgid = 1; char buffer[BUFSIZ]; key_t msgKey = ftok(\u0026#34;./msgsnd.c\u0026#34;, 0); msgid = msgget(msgKey, 0666 | IPC_CREAT); if (msgid == -1) { fprintf(stderr, \u0026#34;masget failed error: %d\\n\u0026#34;, errno); exit(EXIT_FAILURE); } while (1) { printf(\u0026#34;Enter some text: \\n\u0026#34;); fgets(buffer, BUFSIZ, stdin); message.msg_type = 1; // æ³¨æ„ 2 strcpy(message.msg, buffer); // å‘é˜Ÿåˆ—é‡Œå‘é€æ•°æ® if (msgsnd(msgid, (void *)\u0026amp;message, MAX_TXT, 0) == -1) { fprintf(stderr, \u0026#34;msgsnd failed\\n\u0026#34;); exit(EXIT_FAILURE); } // è¾“å…¥ end ç»“æŸè¾“å…¥ if (strncmp(buffer, \u0026#34;end\u0026#34;, 3) == 0) { break; } sleep(1); } exit(EXIT_SUCCESS); } //msgrcv #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;errno.h\u0026gt; #include \u0026lt;string.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;sys/msg.h\u0026gt; #define MAX_TXT 512 struct msg_st { long int msg_type; char msg[MAX_TXT]; }; int main() { struct msg_st message; int msgid = 1; long int msgtype = 0; key_t msgKey = ftok(\u0026#34;./msgsnd.c\u0026#34;, 0); msgid = msgget(msgKey, 0666 | IPC_CREAT); if (msgid == -1) { fprintf(stderr, \u0026#34;masget failed error: %d\\n\u0026#34;, errno); exit(EXIT_FAILURE); } while (1) { if (msgrcv(msgid, (void *)\u0026amp;message, BUFSIZ, msgtype, 0) == -1) { fprintf(stderr, \u0026#34;msgsnd failed\\n\u0026#34;); exit(EXIT_FAILURE); } printf(\u0026#34;You wrote: %s\\n\u0026#34;, message.msg); if (strncmp(message.msg, \u0026#34;end\u0026#34;, 3) == 0) { break; } } exit(EXIT_SUCCESS); } è¿è¡Œç»“æœ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1ipc%E4%B9%8B%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97messagequeue/","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eæ¶ˆæ¯é˜Ÿåˆ—æä¾›äº†ä¸€ç§ä»ä¸€ä¸ªè¿›ç¨‹å‘å¦ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ä¸ªæ•°æ®å—çš„æ–¹æ³•ã€‚\u003c/p\u003e\n\u003cp\u003eæ¯ä¸ªæ•°æ®å—éƒ½è¢«è®¤ä¸ºå«æœ‰ä¸€ä¸ªç±»å‹ï¼Œæ¥æ”¶è¿›ç¨‹å¯ä»¥ç‹¬ç«‹åœ°æ¥æ”¶å«æœ‰ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘é€æ¶ˆæ¯æ¥é¿å…å‘½åç®¡é“çš„åŒæ­¥å’Œé˜»å¡é—®é¢˜ã€‚ä½†æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä¸å‘½åç®¡é“ä¸€æ ·ï¼Œæ¯ä¸ªæ•°æ®å—éƒ½æœ‰ä¸€ä¸ªæœ€å¤§é•¿åº¦çš„é™åˆ¶ã€‚\u003c/p\u003e","title":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰"},{"content":"æœ¬æ¥ä¸æƒ³å†™è¿™ä¸€ç¯‡çš„ï¼Œå®‰è£… VSCode æ—¶éšä¾¿æœä¸€ä¸‹å°± OK äº†ï¼Œä½†æ˜¯å› ä¸º APT æºä¸­æ²¡æœ‰ VSCodeï¼Œæ‰€ä»¥éœ€è¦æ‰¾ä¸‹è½½ç½‘å€ï¼Œå‡ æ¬¡çš„å®‰è£…ç»å†ä¸‹æ¥ï¼Œæ‰¾ä¸‹è½½ç½‘å€ä¹Ÿç»å†äº†ä¸€ç•ªæŠ˜è…¾ã€‚ä»Šå¤©åˆè¦å®‰è£…ä¸€éï¼Œå°±é¡ºæ‰‹è®°å½•ä¸€ä¸‹å§ã€‚ä»¥åç¿»è‡ªå·±è®°å½•æ€»æ¯”ç¿»å…¨ç½‘è®°å½•æ–¹ä¾¿ã€‚\nå®˜æ–¹æ–‡æ¡£ å…¶å®æœ€å®Œå¤‡å®‰è£…æ•™ç¨‹åœ¨å®˜æ–¹æ–‡æ¡£é‡Œã€‚æœ¬æ–‡ä¹Ÿç®—æ˜¯å¯¹å®˜æ–¹æ–‡æ¡£çš„ä¸€ä¸ªç¿»è¯‘ç‰ˆå§ã€‚\nåŸºäº Debian å’Œ Ubuntu çš„å‘è¡Œç‰ˆ å¦‚æœä¸‹è½½äº†.deb å®‰è£…åŒ…ï¼Œé‚£ä¹ˆåªéœ€è¦ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥å®Œæˆå®‰è£…äº†ã€‚\nsudo apt install ./\u0026lt;file\u0026gt;.deb æ— å¥ˆçš„æ˜¯ï¼Œæˆ‘éœ€è¦åœ¨å¼€å‘æœºå®‰è£…ï¼Œæ— æ³•ä¸‹è½½å®‰è£…åŒ…ï¼Œä½†æ˜¯æˆ‘åˆä¸æƒ³ç”¨ftpä¼ æ¥ä¼ å»ï¼Œè¦æ˜¯aptèƒ½å®Œæˆï¼Œç»ä¸å•ç‹¬ä¸‹è½½å®‰è£…åŒ…ã€‚\nå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬æ‰‹åŠ¨å®‰è£…å­˜å‚¨åº“å’Œå¯†é’¥\nwget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor \u0026gt; packages.microsoft.gpg sudo install -o root -g root -m 644 packages.microsoft.gpg /etc/apt/trusted.gpg.d/ sudo sh -c \u0026#39;echo \u0026#34;deb [arch=amd64,arm64,armhf signed-by=/etc/apt/trusted.gpg.d/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main\u0026#34; \u0026gt; /etc/apt/sources.list.d/vscode.list\u0026#39; rm -f packages.microsoft.gpg æ›´æ–°ä¸å®‰è£…\nsudo apt install apt-transport-https sudo apt update sudo apt install code # or code-insiders ","permalink":"https://lifeislife.cn/posts/linux-ubuntu-%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85vscode/","summary":"\u003cp\u003eæœ¬æ¥ä¸æƒ³å†™è¿™ä¸€ç¯‡çš„ï¼Œå®‰è£… VSCode æ—¶éšä¾¿æœä¸€ä¸‹å°± OK äº†ï¼Œä½†æ˜¯å› ä¸º APT æºä¸­æ²¡æœ‰ VSCodeï¼Œæ‰€ä»¥éœ€è¦æ‰¾ä¸‹è½½ç½‘å€ï¼Œå‡ æ¬¡çš„å®‰è£…ç»å†ä¸‹æ¥ï¼Œæ‰¾ä¸‹è½½ç½‘å€ä¹Ÿç»å†äº†ä¸€ç•ªæŠ˜è…¾ã€‚ä»Šå¤©åˆè¦å®‰è£…ä¸€éï¼Œå°±é¡ºæ‰‹è®°å½•ä¸€ä¸‹å§ã€‚ä»¥åç¿»è‡ªå·±è®°å½•æ€»æ¯”ç¿»å…¨ç½‘è®°å½•æ–¹ä¾¿ã€‚\u003c/p\u003e","title":"Linux(Ubuntu) ç¯å¢ƒä¸‹å®‰è£… VSCode"},{"content":"å†…å­˜ç®¡ç†æ¦‚è¿° è®¡ç®—æœºæ‰€è°“çš„â€œè®¡ç®—â€æŒ‡çš„æ˜¯ï¼š\nè¿›ç¨‹å’Œçº¿ç¨‹å¯¹äº CPU çš„ä½¿ç”¨ å¯¹å†…å­˜çš„ç®¡ç† ç‹¬äº«å†…å­˜ç©ºé—´çš„åŸç† æ¯ä¸ªè¿›ç¨‹éƒ½ç‹¬äº«ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”çœŸå®ç‰©ç†å†…å­˜åœ°å€å¯¹è¿›ç¨‹ä¸å¯è§ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™è¿›ç¨‹åˆ†é…ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œæ¯ä¸ªè¿›ç¨‹çœ‹åˆ°çš„å†…å­˜åœ°å€éƒ½æ˜¯ä» 0 å¼€å§‹ã€‚æ“ä½œç³»ç»Ÿä¼šå°†ä¸åŒè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€å’Œä¸åŒå†…å­˜çš„ç‰©ç†åœ°å€åšæ˜ å°„ã€‚å½“ç¨‹åºè®¿é—®è™šæ‹Ÿåœ°å€æ—¶ï¼Œç”±å†…æ ¸çš„æ•°æ®ç»“æ„è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆä¸åŒçš„ç‰©ç†åœ°å€ï¼Œè¿™æ ·ä¸åŒçš„è¿›ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œå†™å…¥çš„æ˜¯ä¸åŒçš„ç‰©ç†åœ°å€ã€‚\nè§„åˆ’è™šæ‹Ÿåœ°å€ç©ºé—´ é€šè¿‡ä»¥ä¸Šçš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ–¹é¢ã€‚\nç‰©ç†å†…å­˜çš„ç®¡ç†ï¼› è™šæ‹Ÿåœ°å€çš„ç®¡ç†ï¼› è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€å¦‚ä½•æ˜ å°„ï¼› è¿›ç¨‹è·å–äº†ä¸€æ®µç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´åï¼Œå¯ä»¥ä¸ç”¨ç®¡å…¶ä»–è¿›ç¨‹ï¼Œâ€œä»»æ„â€ä½¿ç”¨è¿™ç‰‡å†…å­˜ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ç‚¹è§„åˆ™ã€‚è¿™ç¯‡å†…å­˜éœ€è¦å­˜æ”¾å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„å†…å®¹ã€‚é«˜åœ°å€å­˜æ”¾å†…æ ¸æ€çš„å†…å®¹ï¼Œä½åœ°å€å­˜æ”¾ç”¨æˆ·æ€çš„å†…å®¹ã€‚å…·ä½“åˆ†ç•Œçº¿ 64 ä½ä¸ 32 ä½ä¸åŒï¼Œæš‚ä¸æ·±ç©¶ã€‚\næˆ‘ä»¬ä»æœ€ä½ä½å¼€å§‹æ’èµ·ï¼Œå…ˆæ˜¯Text Segmentã€Data Segment å’Œ BSS Segmentã€‚Text Segment æ˜¯å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œä»£ç çš„ä½ç½®ï¼ŒData Segment å­˜æ”¾é™æ€å¸¸é‡ï¼ŒBSS Segment å­˜æ”¾æœªåˆå§‹åŒ–çš„é™æ€å˜é‡ã€‚æ˜¯ä¸æ˜¯è§‰å¾—è¿™å‡ ä¸ªåå­—å¾ˆç†Ÿæ‚‰ï¼Ÿæ²¡é”™ï¼Œå’±ä»¬å‰é¢è®² ELF æ ¼å¼çš„æ—¶å€™æåˆ°è¿‡ï¼Œåœ¨äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶é‡Œé¢ï¼Œå°±æœ‰è¿™ä¸‰ä¸ªéƒ¨åˆ†ã€‚è¿™é‡Œå°±æ˜¯æŠŠäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶çš„ä¸‰ä¸ªéƒ¨åˆ†åŠ è½½åˆ°å†…å­˜é‡Œé¢ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ¥ä¸‹æ¥æ˜¯å †ï¼ˆHeapï¼‰æ®µã€‚å †æ˜¯å¾€é«˜åœ°å€å¢é•¿çš„ï¼Œæ˜¯ç”¨æ¥åŠ¨æ€åˆ†é…å†…å­˜çš„åŒºåŸŸï¼Œmalloc å°±æ˜¯åœ¨è¿™é‡Œé¢åˆ†é…çš„ã€‚ æ¥ä¸‹æ¥çš„åŒºåŸŸæ˜¯Memory Mapping Segmentã€‚è¿™å—åœ°å€å¯ä»¥ç”¨æ¥æŠŠæ–‡ä»¶æ˜ å°„è¿›å†…å­˜ç”¨çš„ï¼Œå¦‚æœäºŒè¿›åˆ¶çš„æ‰§è¡Œæ–‡ä»¶ä¾èµ–äºæŸä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œå°±æ˜¯åœ¨è¿™ä¸ªåŒºåŸŸé‡Œé¢å°† so æ–‡ä»¶æ˜ å°„åˆ°äº†å†…å­˜ä¸­ã€‚ å†ä¸‹é¢å°±æ˜¯æ ˆï¼ˆStackï¼‰åœ°å€æ®µã€‚ä¸»çº¿ç¨‹çš„å‡½æ•°è°ƒç”¨çš„å‡½æ•°æ ˆå°±æ˜¯ç”¨è¿™é‡Œçš„ã€‚\næ™®é€šè¿›ç¨‹ä¸èƒ½è®¿é—®å†…æ ¸ç©ºé—´ï¼Œå¦‚æœéœ€è¦è¿›è¡Œæ›´é«˜æƒé™çš„å·¥ä½œï¼Œå°±éœ€è¦ç³»ç»Ÿè°ƒç”¨è¿›å…¥å†…æ ¸ã€‚æ¯ä¸€æ®µè¿›ç¨‹çš„å†…å­˜ç©ºé—´å­˜æ”¾çš„å†…å®¹å„ä¸ç›¸åŒï¼Œä½†æ˜¯è¿›å…¥å†…æ ¸åçœ‹åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå†…æ ¸ç©ºé—´ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹åˆ—è¡¨ã€‚\nå†…æ ¸çš„ä»£ç è®¿é—®å†…æ ¸çš„æ•°æ®ç»“æ„ï¼Œå¤§éƒ¨åˆ†çš„æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨è™šæ‹Ÿåœ°å€çš„ï¼Œè™½ç„¶å†…æ ¸ä»£ç æƒé™å¾ˆå¤§ï¼Œä½†æ˜¯èƒ½å¤Ÿä½¿ç”¨çš„è™šæ‹Ÿåœ°å€èŒƒå›´ä¹Ÿåªèƒ½åœ¨å†…æ ¸ç©ºé—´ï¼Œä¹Ÿå³å†…æ ¸ä»£ç è®¿é—®å†…æ ¸æ•°æ®ç»“æ„ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œå¦‚ä½•å°†å…¶æ˜ å°„æˆä¸ºç‰©ç†åœ°å€å‘¢ï¼Ÿ\nå’±ä»¬å‰é¢è®² x86 CPU çš„æ—¶å€™ï¼Œè®²è¿‡åˆ†æ®µæœºåˆ¶ï¼Œå’±ä»¬è§„åˆ’è™šæ‹Ÿç©ºé—´çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å°†ç©ºé—´åˆ†æˆå¤šä¸ªæ®µè¿›è¡Œä¿å­˜ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹åˆ†æ®µæœºåˆ¶çš„åŸç†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åˆ†æ®µæœºåˆ¶ä¸‹çš„è™šæ‹Ÿåœ°å€ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ®µé€‰æ‹©å­å’Œæ®µå†…åç§»é‡ã€‚æ®µé€‰æ‹©å­å°±ä¿å­˜åœ¨å’±ä»¬å‰é¢è®²è¿‡çš„æ®µå¯„å­˜å™¨é‡Œé¢ã€‚æ®µé€‰æ‹©å­é‡Œé¢æœ€é‡è¦çš„æ˜¯æ®µå·ï¼Œç”¨ä½œæ®µè¡¨çš„ç´¢å¼•ã€‚æ®µè¡¨é‡Œé¢ä¿å­˜çš„æ˜¯è¿™ä¸ªæ®µçš„åŸºåœ°å€ã€æ®µçš„ç•Œé™å’Œç‰¹æƒç­‰çº§ç­‰ã€‚è™šæ‹Ÿåœ°å€ä¸­çš„æ®µå†…åç§»é‡åº”è¯¥ä½äº 0 å’Œæ®µç•Œé™ä¹‹é—´ã€‚å¦‚æœæ®µå†…åç§»é‡æ˜¯åˆæ³•çš„ï¼Œå°±å°†æ®µåŸºåœ°å€åŠ ä¸Šæ®µå†…åç§»é‡å¾—åˆ°ç‰©ç†å†…å­˜åœ°å€ã€‚\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„è™šæ‹Ÿç©ºé—´åˆ†æˆä»¥ä¸‹ 4 ä¸ªæ®µï¼Œç”¨ 0ï½3 æ¥ç¼–å·ã€‚æ¯ä¸ªæ®µåœ¨æ®µè¡¨ä¸­æœ‰ä¸€ä¸ªé¡¹ï¼Œåœ¨ç‰©ç†ç©ºé—´ä¸­ï¼Œæ®µçš„æ’åˆ—å¦‚ä¸‹å›¾çš„å³è¾¹æ‰€ç¤ºã€‚å¦‚æœè¦è®¿é—®æ®µ 2 ä¸­åç§»é‡ 600 çš„è™šæ‹Ÿåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºç‰©ç†åœ°å€ä¸ºï¼Œæ®µ 2 åŸºåœ°å€ 2000 + åç§»é‡ 600 = 2600ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨ Linux é‡Œé¢ï¼Œæ®µè¡¨å…¨ç§°æ®µæè¿°ç¬¦è¡¨ï¼ˆsegment descriptorsï¼‰ï¼Œæ”¾åœ¨å…¨å±€æè¿°ç¬¦è¡¨ GDTï¼ˆGlobal Descriptor Tableï¼‰é‡Œé¢ï¼Œä¼šæœ‰ä¸‹é¢çš„å®æ¥åˆå§‹åŒ–æ®µæè¿°ç¬¦è¡¨é‡Œé¢çš„è¡¨é¡¹ã€‚\n#define GDT_ENTRY_INIT(flags, base, limit) { { { \\ .a = ((limit) \u0026amp; 0xffff) | (((base) \u0026amp; 0xffff) \u0026lt;\u0026lt; 16), \\ .b = (((base) \u0026amp; 0xff0000) \u0026gt;\u0026gt; 16) | (((flags) \u0026amp; 0xf0ff) \u0026lt;\u0026lt; 8) | \\ ((limit) \u0026amp; 0xf0000) | ((base) \u0026amp; 0xff000000), \\ } } } ä¸€ä¸ªæ®µè¡¨é¡¹ç”±æ®µåŸºåœ°å€ baseã€æ®µç•Œé™ limitï¼Œè¿˜æœ‰ä¸€äº›æ ‡è¯†ç¬¦ç»„æˆã€‚\nDEFINE_PER_CPU_PAGE_ALIGNED(struct gdt_page, gdt_page) = { .gdt = { #ifdef CONFIG_X86_64 [GDT_ENTRY_KERNEL32_CS] = GDT_ENTRY_INIT(0xc09b, 0, 0xfffff), [GDT_ENTRY_KERNEL_CS] = GDT_ENTRY_INIT(0xa09b, 0, 0xfffff), [GDT_ENTRY_KERNEL_DS] = GDT_ENTRY_INIT(0xc093, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER32_CS] = GDT_ENTRY_INIT(0xc0fb, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER_DS] = GDT_ENTRY_INIT(0xc0f3, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER_CS] = GDT_ENTRY_INIT(0xa0fb, 0, 0xfffff), #else [GDT_ENTRY_KERNEL_CS] = GDT_ENTRY_INIT(0xc09a, 0, 0xfffff), [GDT_ENTRY_KERNEL_DS] = GDT_ENTRY_INIT(0xc092, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER_CS] = GDT_ENTRY_INIT(0xc0fa, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER_DS] = GDT_ENTRY_INIT(0xc0f2, 0, 0xfffff), ...... #endif } }; EXPORT_PER_CPU_SYMBOL_GPL(gdt_page); è¿™é‡Œé¢å¯¹äº 64 ä½çš„å’Œ 32 ä½çš„ï¼Œéƒ½å®šä¹‰äº†å†…æ ¸ä»£ç æ®µã€å†…æ ¸æ•°æ®æ®µã€ç”¨æˆ·ä»£ç æ®µå’Œç”¨æˆ·æ•°æ®æ®µã€‚å¦å¤–ï¼Œè¿˜ä¼šå®šä¹‰ä¸‹é¢å››ä¸ªæ®µé€‰æ‹©å­ï¼ŒæŒ‡å‘ä¸Šé¢çš„æ®µæè¿°ç¬¦è¡¨é¡¹ã€‚\n#define __KERNEL_CS (GDT_ENTRY_KERNEL_CS*8) #define __KERNEL_DS (GDT_ENTRY_KERNEL_DS*8) #define __USER_DS (GDT_ENTRY_DEFAULT_USER_DS*8 + 3) #define __USER_CS (GDT_ENTRY_DEFAULT_USER_CS*8 + 3) é€šè¿‡åˆ†æï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ‰€æœ‰çš„æ®µçš„èµ·å§‹åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ 0ã€‚æ‰€ä»¥ï¼Œåœ¨ Linux æ“ä½œç³»ç»Ÿä¸­ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ°å…¨éƒ¨çš„åˆ†æ®µåŠŸèƒ½ã€‚é‚£åˆ†æ®µæ˜¯ä¸æ˜¯å®Œå…¨æ²¡æœ‰ç”¨å¤„å‘¢ï¼Ÿåˆ†æ®µå¯ä»¥åšæƒé™å®¡æ ¸ï¼Œä¾‹å¦‚ç”¨æˆ·æ€ DPL æ˜¯ 3ï¼Œå†…æ ¸æ€ DPL æ˜¯ 0ã€‚å½“ç”¨æˆ·æ€è¯•å›¾è®¿é—®å†…æ ¸æ€çš„æ—¶å€™ï¼Œä¼šå› ä¸ºæƒé™ä¸è¶³è€ŒæŠ¥é”™ã€‚ å…¶å® Linux å€¾å‘äºå¦å¤–ä¸€ç§ä»è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢æ–¹å¼ï¼Œç§°ä¸ºåˆ†é¡µï¼ˆPagingï¼‰ã€‚å¯¹äºç‰©ç†å†…å­˜ï¼Œæ“ä½œç³»ç»ŸæŠŠå®ƒåˆ†æˆä¸€å—ä¸€å—å¤§å°ç›¸åŒçš„é¡µï¼Œè¿™æ ·æ›´æ–¹ä¾¿ç®¡ç†ï¼Œä¾‹å¦‚æœ‰çš„å†…å­˜é¡µé¢é•¿æ—¶é—´ä¸ç”¨äº†ï¼Œå¯ä»¥æš‚æ—¶å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç§°ä¸ºæ¢å‡ºã€‚ä¸€æ—¦éœ€è¦çš„æ—¶å€™ï¼Œå†åŠ è½½è¿›æ¥ï¼Œå«ä½œæ¢å…¥ã€‚è¿™æ ·å¯ä»¥æ‰©å¤§å¯ç”¨ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œæé«˜ç‰©ç†å†…å­˜çš„åˆ©ç”¨ç‡ã€‚\nè¿™ä¸ªæ¢å…¥å’Œæ¢å‡ºéƒ½æ˜¯ä»¥é¡µä¸ºå•ä½çš„ã€‚é¡µé¢çš„å¤§å°ä¸€èˆ¬ä¸º 4KBã€‚ä¸ºäº†èƒ½å¤Ÿå®šä½å’Œè®¿é—®æ¯ä¸ªé¡µï¼Œéœ€è¦æœ‰ä¸ªé¡µè¡¨ï¼Œä¿å­˜æ¯ä¸ªé¡µçš„èµ·å§‹åœ°å€ï¼Œå†åŠ ä¸Šåœ¨é¡µå†…çš„åç§»é‡ï¼Œç»„æˆçº¿æ€§åœ°å€ï¼Œå°±èƒ½å¯¹äºå†…å­˜ä¸­çš„æ¯ä¸ªä½ç½®è¿›è¡Œè®¿é—®äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è™šæ‹Ÿåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œé¡µå·å’Œé¡µå†…åç§»ã€‚é¡µå·ä½œä¸ºé¡µè¡¨çš„ç´¢å¼•ï¼Œé¡µè¡¨åŒ…å«ç‰©ç†é¡µæ¯é¡µæ‰€åœ¨ç‰©ç†å†…å­˜çš„åŸºåœ°å€ã€‚è¿™ä¸ªåŸºåœ°å€ä¸é¡µå†…åç§»çš„ç»„åˆå°±å½¢æˆäº†ç‰©ç†å†…å­˜åœ°å€ã€‚\n32 ä½ç¯å¢ƒä¸‹ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´å…± 4GBã€‚å¦‚æœåˆ†æˆ 4KB ä¸€ä¸ªé¡µï¼Œé‚£å°±æ˜¯ 1M ä¸ªé¡µã€‚æ¯ä¸ªé¡µè¡¨é¡¹éœ€è¦ 4 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œé‚£ä¹ˆæ•´ä¸ª 4GB ç©ºé—´çš„æ˜ å°„å°±éœ€è¦ 4MB çš„å†…å­˜æ¥å­˜å‚¨æ˜ å°„è¡¨ã€‚å¦‚æœæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„æ˜ å°„è¡¨ï¼Œ100 ä¸ªè¿›ç¨‹å°±éœ€è¦ 400MB çš„å†…å­˜ã€‚å¯¹äºå†…æ ¸æ¥è®²ï¼Œæœ‰ç‚¹å¤§äº†ã€‚\né¡µè¡¨ä¸­æ‰€æœ‰é¡µè¡¨é¡¹å¿…é¡»æå‰å»ºå¥½ï¼Œå¹¶ä¸”è¦æ±‚æ˜¯è¿ç»­çš„ã€‚å¦‚æœä¸è¿ç»­ï¼Œå°±æ²¡æœ‰åŠæ³•é€šè¿‡è™šæ‹Ÿåœ°å€é‡Œé¢çš„é¡µå·æ‰¾åˆ°å¯¹åº”çš„é¡µè¡¨é¡¹äº†ã€‚\né‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¯•ç€å°†é¡µè¡¨å†åˆ†é¡µï¼Œ4G çš„ç©ºé—´éœ€è¦ 4M çš„é¡µè¡¨æ¥å­˜å‚¨æ˜ å°„ã€‚æˆ‘ä»¬æŠŠè¿™ 4M åˆ†æˆ 1Kï¼ˆ1024ï¼‰ä¸ª 4Kï¼Œæ¯ä¸ª 4K åˆèƒ½æ”¾åœ¨ä¸€é¡µé‡Œé¢ï¼Œè¿™æ · 1K ä¸ª 4K å°±æ˜¯ 1K ä¸ªé¡µï¼Œè¿™ 1K ä¸ªé¡µä¹Ÿéœ€è¦ä¸€ä¸ªè¡¨è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬ç§°ä¸ºé¡µç›®å½•è¡¨ï¼Œè¿™ä¸ªé¡µç›®å½•è¡¨é‡Œé¢æœ‰ 1K é¡¹ï¼Œæ¯é¡¹ 4 ä¸ªå­—èŠ‚ï¼Œé¡µç›®å½•è¡¨å¤§å°ä¹Ÿæ˜¯ 4Kã€‚\né¡µç›®å½•æœ‰ 1K é¡¹ï¼Œç”¨ 10 ä½å°±å¯ä»¥è¡¨ç¤ºè®¿é—®é¡µç›®å½•çš„å“ªä¸€é¡¹ã€‚è¿™ä¸€é¡¹å…¶å®å¯¹åº”çš„æ˜¯ä¸€æ•´é¡µçš„é¡µè¡¨é¡¹ï¼Œä¹Ÿå³ 4K çš„é¡µè¡¨é¡¹ã€‚æ¯ä¸ªé¡µè¡¨é¡¹ä¹Ÿæ˜¯ 4 ä¸ªå­—èŠ‚ï¼Œå› è€Œä¸€æ•´é¡µçš„é¡µè¡¨é¡¹æ˜¯ 1K ä¸ªã€‚å†ç”¨ 10 ä½å°±å¯ä»¥è¡¨ç¤ºè®¿é—®é¡µè¡¨é¡¹çš„å“ªä¸€é¡¹ï¼Œé¡µè¡¨é¡¹ä¸­çš„ä¸€é¡¹å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªé¡µï¼Œæ˜¯å­˜æ”¾æ•°æ®çš„é¡µï¼Œè¿™ä¸ªé¡µçš„å¤§å°æ˜¯ 4Kï¼Œç”¨ 12 ä½å¯ä»¥å®šä½è¿™ä¸ªé¡µå†…çš„ä»»ä½•ä¸€ä¸ªä½ç½®ã€‚\nè¿™æ ·åŠ èµ·æ¥æ­£å¥½ 32 ä½ï¼Œä¹Ÿå°±æ˜¯ç”¨å‰ 10 ä½å®šä½åˆ°é¡µç›®å½•è¡¨ä¸­çš„ä¸€é¡¹ã€‚å°†è¿™ä¸€é¡¹å¯¹åº”çš„é¡µè¡¨å–å‡ºæ¥å…± 1k é¡¹ï¼Œå†ç”¨ä¸­é—´ 10 ä½å®šä½åˆ°é¡µè¡¨ä¸­çš„ä¸€é¡¹ï¼Œå°†è¿™ä¸€é¡¹å¯¹åº”çš„å­˜æ”¾æ•°æ®çš„é¡µå–å‡ºæ¥ï¼Œå†ç”¨æœ€å 12 ä½å®šä½åˆ°é¡µä¸­çš„å…·ä½“ä½ç½®è®¿é—®æ•°æ®ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œæ˜ å°„ 4GB åœ°å€ç©ºé—´å°±éœ€è¦ 4MB+4KB çš„å†…å­˜ï¼Œè¿™æ ·ä¸æ˜¯æ›´å¤§äº†å—ï¼Ÿå½“ç„¶å¦‚æœé¡µæ˜¯æ»¡çš„ï¼Œå½“æ—¶æ˜¯æ›´å¤§äº†ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¾€å¾€ä¸ä¼šä¸ºä¸€ä¸ªè¿›ç¨‹åˆ†é…é‚£ä¹ˆå¤šå†…å­˜ã€‚\næ¯”å¦‚è¯´ï¼Œä¸Šé¢å›¾ä¸­ï¼Œæˆ‘ä»¬å‡è®¾åªç»™è¿™ä¸ªè¿›ç¨‹åˆ†é…äº†ä¸€ä¸ªæ•°æ®é¡µã€‚å¦‚æœåªä½¿ç”¨é¡µè¡¨ï¼Œä¹Ÿéœ€è¦å®Œæ•´çš„ 1M ä¸ªé¡µè¡¨é¡¹å…± 4M çš„å†…å­˜ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº†é¡µç›®å½•ï¼Œé¡µç›®å½•éœ€è¦ 1K ä¸ªå…¨éƒ¨åˆ†é…ï¼Œå ç”¨å†…å­˜ 4Kï¼Œä½†æ˜¯é‡Œé¢åªæœ‰ä¸€é¡¹ä½¿ç”¨äº†ã€‚åˆ°äº†é¡µè¡¨é¡¹ï¼Œåªéœ€è¦åˆ†é…èƒ½å¤Ÿç®¡ç†é‚£ä¸ªæ•°æ®é¡µçš„é¡µè¡¨é¡¹é¡µå°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤š 4Kï¼Œè¿™æ ·å†…å­˜å°±èŠ‚çœå¤šäº†ã€‚\nå½“ç„¶å¯¹äº 64 ä½çš„ç³»ç»Ÿï¼Œä¸¤çº§è‚¯å®šä¸å¤Ÿäº†ï¼Œå°±å˜æˆäº†å››çº§ç›®å½•ï¼Œåˆ†åˆ«æ˜¯å…¨å±€é¡µç›®å½•é¡¹ PGDï¼ˆPage Global Directoryï¼‰ã€ä¸Šå±‚é¡µç›®å½•é¡¹ PUDï¼ˆPage Upper Directoryï¼‰ã€ä¸­é—´é¡µç›®å½•é¡¹ PMDï¼ˆPage Middle Directoryï¼‰å’Œé¡µè¡¨é¡¹ PTEï¼ˆPage Table Entryï¼‰ã€‚\nè¿›ç¨‹ç©ºé—´ç®¡ç† ç‰©ç†å†…å­˜ç®¡ç† ç”¨æˆ·æ€å†…å­˜æ˜ å°„ #define GDT_ENTRY_INIT(flags, base, limit) { { { \\ .a = ((limit) \u0026amp; 0xffff) | (((base) \u0026amp; 0xffff) \u0026lt;\u0026lt; 16), \\ .b = (((base) \u0026amp; 0xff0000) \u0026gt;\u0026gt; 16) | (((flags) \u0026amp; 0xf0ff) \u0026lt;\u0026lt; 8) | \\ ((limit) \u0026amp; 0xf0000) | ((base) \u0026amp; 0xff000000), \\ } } } é€šè¿‡åˆ†æï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ‰€æœ‰çš„æ®µçš„èµ·å§‹åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ 0ã€‚è¿™ç®—å“ªé—¨å­åˆ†æ®µå˜›ï¼æ‰€ä»¥ï¼Œåœ¨ Linux æ“ä½œç³»ç»Ÿä¸­ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ°å…¨éƒ¨çš„åˆ†æ®µåŠŸèƒ½ã€‚é‚£åˆ†æ®µæ˜¯ä¸æ˜¯å®Œå…¨æ²¡æœ‰ç”¨å¤„å‘¢ï¼Ÿåˆ†æ®µå¯ä»¥åšæƒé™å®¡æ ¸ï¼Œä¾‹å¦‚ç”¨æˆ·æ€ DPL æ˜¯ 3ï¼Œå†…æ ¸æ€ DPL æ˜¯ 0ã€‚å½“ç”¨æˆ·æ€è¯•å›¾è®¿é—®å†…æ ¸æ€çš„æ—¶å€™ï¼Œä¼šå› ä¸ºæƒé™ä¸è¶³è€ŒæŠ¥é”™ã€‚\nå…¶å® Linux å€¾å‘äºå¦å¤–ä¸€ç§ä»è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢æ–¹å¼ï¼Œç§°ä¸ºåˆ†é¡µï¼ˆPagingï¼‰ã€‚\nå¯¹äºç‰©ç†å†…å­˜ï¼Œæ“ä½œç³»ç»ŸæŠŠå®ƒåˆ†æˆä¸€å—ä¸€å—å¤§å°ç›¸åŒçš„é¡µï¼Œè¿™æ ·æ›´æ–¹ä¾¿ç®¡ç†ï¼Œä¾‹å¦‚æœ‰çš„å†…å­˜é¡µé¢é•¿æ—¶é—´ä¸ç”¨äº†ï¼Œå¯ä»¥æš‚æ—¶å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç§°ä¸ºæ¢å‡ºã€‚ä¸€æ—¦éœ€è¦çš„æ—¶å€™ï¼Œå†åŠ è½½è¿›æ¥ï¼Œå«ä½œæ¢å…¥ã€‚è¿™æ ·å¯ä»¥æ‰©å¤§å¯ç”¨ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œæé«˜ç‰©ç†å†…å­˜çš„åˆ©ç”¨ç‡ã€‚\n","permalink":"https://lifeislife.cn/posts/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","summary":"\u003ch2 id=\"å†…å­˜ç®¡ç†æ¦‚è¿°\"\u003eå†…å­˜ç®¡ç†æ¦‚è¿°\u003c/h2\u003e\n\u003cp\u003eè®¡ç®—æœºæ‰€è°“çš„â€œè®¡ç®—â€æŒ‡çš„æ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè¿›ç¨‹å’Œçº¿ç¨‹å¯¹äº CPU çš„ä½¿ç”¨\u003c/li\u003e\n\u003cli\u003eå¯¹å†…å­˜çš„ç®¡ç†\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ç‹¬äº«å†…å­˜ç©ºé—´çš„åŸç†\"\u003eç‹¬äº«å†…å­˜ç©ºé—´çš„åŸç†\u003c/h3\u003e\n\u003cp\u003eæ¯ä¸ªè¿›ç¨‹éƒ½ç‹¬äº«ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”çœŸå®ç‰©ç†å†…å­˜åœ°å€å¯¹è¿›ç¨‹ä¸å¯è§ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™è¿›ç¨‹åˆ†é…ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œæ¯ä¸ªè¿›ç¨‹çœ‹åˆ°çš„å†…å­˜åœ°å€éƒ½æ˜¯ä» 0 å¼€å§‹ã€‚æ“ä½œç³»ç»Ÿä¼šå°†ä¸åŒè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€å’Œä¸åŒå†…å­˜çš„ç‰©ç†åœ°å€åšæ˜ å°„ã€‚å½“ç¨‹åºè®¿é—®è™šæ‹Ÿåœ°å€æ—¶ï¼Œç”±å†…æ ¸çš„æ•°æ®ç»“æ„è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆä¸åŒçš„ç‰©ç†åœ°å€ï¼Œè¿™æ ·ä¸åŒçš„è¿›ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œå†™å…¥çš„æ˜¯ä¸åŒçš„ç‰©ç†åœ°å€ã€‚\u003c/p\u003e","title":"Linux æ“ä½œç³»ç»Ÿ-å†…å­˜ç®¡ç†"},{"content":"æ•ˆæœé¢„è§ˆ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image è®¾ç½®çª—å£æ‹–åŠ¨ å› ä¸ºè¿™ä¸ªé¡¹ç›®ä¸­æ²¡æœ‰å°†ç™»å½•ç•Œé¢ç›´æ¥ç»§æ‰¿MainWindowï¼Œè€Œæ˜¯ç»§æ‰¿çš„Dialogç±»ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸èƒ½ç›´æ¥ç§»åŠ¨çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ·»åŠ ç›¸åº”çš„æ–¹æ³•ã€‚è¿™é‡Œå®ç°äº†ä¸‰ç§æ–¹æ³•ï¼Œç‚¹å‡»ï¼Œæ‹–åŠ¨ï¼Œé‡Šæ”¾ã€‚\n//mytitlebar.cpp // ä»¥ä¸‹é€šè¿‡ mousePressEventã€mouseMoveEventã€mouseReleaseEvent ä¸‰ä¸ªäº‹ä»¶å®ç°äº†é¼ æ ‡æ‹–åŠ¨æ ‡é¢˜æ ç§»åŠ¨çª—å£çš„æ•ˆæœ; void MyTitleBar::mousePressEvent(QMouseEvent *event) { if (m_buttonType == MIN_MAX_BUTTON) { // åœ¨çª—å£æœ€å¤§åŒ–æ—¶ç¦æ­¢æ‹–åŠ¨çª—å£; if (m_pButtonMax-\u0026gt;isVisible()) { m_isPressed = true; m_startMovePos = event-\u0026gt;globalPos(); } } else { m_isPressed = true; m_startMovePos = event-\u0026gt;globalPos(); } return QWidget::mousePressEvent(event); } void MyTitleBar::mouseMoveEvent(QMouseEvent *event) { if (m_isPressed \u0026amp;\u0026amp; m_isMoveParentWindow) { QPoint movePoint = event-\u0026gt;globalPos() - m_startMovePos; QPoint widgetPos = this-\u0026gt;parentWidget()-\u0026gt;pos() + movePoint; m_startMovePos = event-\u0026gt;globalPos(); this-\u0026gt;parentWidget()-\u0026gt;move(widgetPos.x(), widgetPos.y()); } return QWidget::mouseMoveEvent(event); } void MyTitleBar::mouseReleaseEvent(QMouseEvent *event) { m_isPressed = false; return QWidget::mouseReleaseEvent(event); } globalPos()è·å–å…¨å±€çš„åæ ‡ event-\u0026gt;globalPos()æ˜¯è·å–å…¨å±€çš„åæ ‡ï¼Œå…¨å±€æ˜¯ç›¸å¯¹äºæ•´ä¸ªå±å¹•è€Œè¨€çš„ã€‚è¿˜æœ‰ä¸€ä¸ªå‡½æ•°pos()è·å–çš„æ˜¯å±€éƒ¨åæ ‡ï¼Œç›¸å¯¹äºä¸€ä¸ªwidgetçª—å£è€Œè¨€ã€‚\nmove()ç§»åŠ¨çª—å£ void move(int x, int y); void move(const QPoint \u0026amp;); å…¶ä¸­moveçš„åŸç‚¹æ˜¯çˆ¶çª—å£çš„å·¦ä¸Šè§’ï¼Œå¦‚æœæ²¡æœ‰çˆ¶çª—å£ï¼Œåˆ™æ¡Œé¢å³ä¸ºçˆ¶çª—å£ã€‚x å¾€å³é€’å¢ï¼Œy å¾€ä¸‹é€’å¢\nmouseMoveEvent()è¿™ä¸ªå‡½æ•°é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œm_startMovePos = event-\u0026gt;globalPos()è¿™æ¡è¯­å¥ã€‚æ¯æ¬¡ç§»åŠ¨çª—å£ä¹‹å‰ï¼Œå…ˆæŠŠé¼ æ ‡ç§»åŠ¨åçš„ä½ç½®è®°å½•ä¸‹æ¥ï¼Œä½œä¸ºä¸‹ä¸€æ¬¡ç§»åŠ¨çš„èµ·ç‚¹ã€‚\nè®¾ç½®æœ€å°åŒ–ï¼Œå…³é—­ //mytitlebar.cpp // ä¿¡å·æ§½çš„ç»‘å®š; void MyTitleBar::initConnections() { connect(m_pButtonMin, SIGNAL(clicked()), this, SLOT(onButtonMinClicked())); connect(m_pButtonClose, SIGNAL(clicked()), this, SLOT(onButtonCloseClicked())); } void MyTitleBar::onButtonMinClicked() { emit signalButtonMinClicked(); } void MyTitleBar::onButtonCloseClicked() { emit signalButtonCloseClicked(); } æ ‡é¢˜æ æ˜¯åœ¨basewindowä¸­ new å‡ºæ¥çš„ï¼Œmytitlebarç±»åªè´Ÿè´£å‘é€ä¿¡å·ï¼ŒçœŸæ­£å¤„ç†ä¿¡å·çš„æ˜¯åœ¨basewindowç±»ä¸­ã€‚\n//basewindow.cpp void BaseWindow::initTitleBar() { createMyTitle(this); m_titleBar-\u0026gt;move(0, 0); connect(m_titleBar, SIGNAL(signalButtonMinClicked()), this, SLOT(onButtonMinClicked())); connect(m_titleBar, SIGNAL(signalButtonCloseClicked()), this, SLOT(onButtonCloseClicked())); } void BaseWindow::onButtonMinClicked() { if (Qt::Tool == (windowFlags() \u0026amp; Qt::Tool)) { hide(); } else { showMinimized(); } } void BaseWindow::onButtonCloseClicked() { close(); } åœ¨åˆå§‹åŒ–æ ‡é¢˜æ æ—¶ï¼Œå°±æŠŠç‚¹å‡»ä¿¡å·ä¸ç›¸å…³çš„æ§½å‡½æ•°ç»‘å®šã€‚å½“æœ‰æœ€å°åŒ–ç‚¹å‡»ä¿¡å·å‘ç”Ÿæ—¶ï¼Œå°±ä¼šè°ƒç”¨æœ€å°åŒ–æ“ä½œã€‚\nå’Œçª—å£ç›¸å…³çš„å‡ ä¸ªå‡½æ•° showMinimized() //æœ€å°åŒ– showNormal() //ä»æœ€å°åŒ–æˆ–è€…æœ€å¤§åŒ–çª—å£æ¢å¤åˆ°æ­£å¸¸çª—å£ showMaximized() //æœ€å¤§åŒ– show() //æ˜¾ç¤ºçª—å£ï¼Œå¯ä»¥æ˜¾ç¤ºæ¨¡æ€çª—å£ä¹Ÿå¯ä»¥æ˜¾ç¤ºéæ¨¡æ€ hide() //éšè—çª—å£ isVisible() //åˆ¤æ–­æ˜¯å¦å¯è§ isMinimized() //åˆ¤æ–­æ˜¯å¦å¤„äºæœ€å°åŒ–çŠ¶æ€ close() //å…³é—­çª—å£ åˆ‡æ¢ç”¨æˆ·åŠåˆ é™¤ç”¨æˆ· //loginwindow.cpp // åˆå§‹åŒ–ç”¨æˆ·ç™»å½•ä¿¡æ¯; void LoginWindow::initAccountList() { // è®¾ç½®ä»£ç†; m_Accountlist = new QListWidget(this); ui-\u0026gt;accountComboBox-\u0026gt;setModel(m_Accountlist-\u0026gt;model()); ui-\u0026gt;accountComboBox-\u0026gt;setView(m_Accountlist); for (int i = 0; i \u0026lt; 3; i++) { AccountItem *account_item = new AccountItem(); account_item-\u0026gt;setAccountInfo(i, QStringLiteral(\u0026#34;Dominic%1å·\u0026#34;).arg(i), QString(\u0026#34;:/Resources/LoginWindow/headImage/head_%1.png\u0026#34;).arg(i)); connect(account_item, SIGNAL(signalShowAccountInfo(int, QString)), this, SLOT(onShowAccountInfo(int, QString))); connect(account_item, SIGNAL(signalRemoveAccount(int)), this, SLOT(onRemoveAccount(int))); QListWidgetItem *list_item = new QListWidgetItem(m_Accountlist); m_Accountlist-\u0026gt;setItemWidget(list_item, account_item); } } //å°†é€‰é¡¹æ–‡æœ¬æ˜¾ç¤ºåœ¨ QComboBox å½“ä¸­ void LoginWindow::onShowAccountInfo(int index, QString accountName) { ui-\u0026gt;accountComboBox-\u0026gt;setEditText(accountName); ui-\u0026gt;accountComboBox-\u0026gt;hidePopup(); // æ›´æ¢ç”¨æˆ·å¤´åƒ; QString fileName = QString(\u0026#34;:/Resources/LoginWindow/headImage/head_%1.png\u0026#34;).arg(index); ui-\u0026gt;userHead-\u0026gt;setPixmap(QPixmap(fileName).scaled(ui-\u0026gt;userHead-\u0026gt;width(), ui-\u0026gt;userHead-\u0026gt;height())); } // ç§»é™¤å½“å‰ç™»å½•åˆ—è¡¨ä¸­æŸä¸€é¡¹; void LoginWindow::onRemoveAccount(int index) { for (int row = 0; row \u0026lt; m_Accountlist-\u0026gt;count(); row++) { AccountItem* itemWidget = (AccountItem*)m_Accountlist-\u0026gt;itemWidget(m_Accountlist-\u0026gt;item(row)); if (itemWidget != NULL \u0026amp;\u0026amp; itemWidget-\u0026gt;getItemWidgetIndex() == index) { m_Accountlist-\u0026gt;takeItem(row); itemWidget-\u0026gt;deleteLater(); } } } åœ¨initAccountList()ä¸­ï¼Œåˆå§‹åŒ–å¥½äº†ä¸‰ä¸ªè´¦æˆ·ä¿¡æ¯ï¼Œå½“æ¥æ”¶åˆ°æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯çš„ä¿¡å·signalShowAccountInfoåï¼Œå°±ä¼šè°ƒç”¨onShowAccountInfoæ§½å‡½æ•°æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå°†ä¸‹æ‹‰æ¡†çš„å†…å®¹è®¾ç½®æˆåˆ‡æ¢åçš„ç”¨æˆ·åï¼Œç„¶åéšè—ä¸‹æ‹‰æ¡†hidPopupã€‚æ›´æ”¹å¤´åƒã€‚\nå½“æ¥æ”¶åˆ°åˆ é™¤ä¿¡å·æ—¶ï¼Œè°ƒç”¨onRemoveAccountæ§½å‡½æ•°ï¼Œåˆ é™¤æŒ‡å®šçš„ç”¨æˆ·ä¿¡æ¯ã€‚\nhidPopup()éšè—ä¸‹æ‹‰æ¡† æ–‡ç« å¼€å¤´çš„æ•ˆæœå›¾æ˜¯éšè—ä¸‹æ‹‰æ¡†çš„æ•ˆæœï¼Œæ¯æ¬¡åˆ‡æ¢ç”¨æˆ·ä¸‹æ‹‰æ¡†éšè—ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ä¸éšè—ä»€ä¹ˆæ•ˆæœå°±å®¹æ˜“ç†è§£äº†ã€‚ \u003c!DOCTYPE html\u003e Responsive Image takeItem()åˆ é™¤éƒ¨ä»¶ QListWidgetItem *QListWidget::takeItem(int row) ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ä¸€è¡Œéƒ¨ä»¶åˆ é™¤ã€‚\ndeleteLater()ç¨ååˆ é™¤å¯¹è±¡ deletelaterçš„åŸç†æ˜¯ QObject::deleteLater()å¹¶æ²¡æœ‰å°†å¯¹è±¡ç«‹å³é”€æ¯ï¼Œè€Œæ˜¯å‘ä¸»æ¶ˆæ¯å¾ªç¯å‘é€äº†ä¸€ä¸ªeventï¼Œä¸‹ä¸€æ¬¡ä¸»æ¶ˆæ¯å¾ªç¯æ”¶åˆ°è¿™ä¸ªeventä¹‹åæ‰ä¼šé”€æ¯å¯¹è±¡ã€‚\nåˆ‡æ¢ç™»å½•çŠ¶æ€ //loginwindow.cpp // é€‰æ‹©äº†æ–°çš„ç”¨æˆ·ç™»å½•çŠ¶æ€; void LoginWindow::onLoginStateClicked() { m_loginStateMemu = new QMenu(); QAction *pActionOnline = m_loginStateMemu-\u0026gt;addAction(QIcon(\u0026#34;:/Resources/LoginWindow/LoginState/state_online.png\u0026#34;), QStringLiteral(\u0026#34;æˆ‘åœ¨çº¿ä¸Š\u0026#34;)); QAction *pActionActive = m_loginStateMemu-\u0026gt;addAction(QIcon(\u0026#34;:/Resources/LoginWindow/LoginState/state_Qme.png\u0026#34;), QStringLiteral(\u0026#34;Q æˆ‘å§\u0026#34;)); m_loginStateMemu-\u0026gt;addSeparator(); QAction *pActionAway = m_loginStateMemu-\u0026gt;addAction(QIcon(\u0026#34;:/Resources/LoginWindow/LoginState/state_away.png\u0026#34;), QStringLiteral(\u0026#34;ç¦»å¼€\u0026#34;)); QAction *pActionBusy = m_loginStateMemu-\u0026gt;addAction(QIcon(\u0026#34;:/Resources/LoginWindow/LoginState/state_busy.png\u0026#34;), QStringLiteral(\u0026#34;å¿™ç¢Œ\u0026#34;)); QAction *pActionNoDisturb = m_loginStateMemu-\u0026gt;addAction(QIcon(\u0026#34;:/Resources/LoginWindow/LoginState/state_notdisturb.png\u0026#34;), QStringLiteral(\u0026#34;è¯·å‹¿æ‰“æ‰°\u0026#34;)); m_loginStateMemu-\u0026gt;addSeparator(); QAction *pActionHide = m_loginStateMemu-\u0026gt;addAction(QIcon(\u0026#34;:/Resources/LoginWindow/LoginState/state_hide.png\u0026#34;), QStringLiteral(\u0026#34;éšèº«\u0026#34;)); // è®¾ç½®çŠ¶æ€å€¼; pActionOnline-\u0026gt;setData(ONLINE); pActionActive-\u0026gt;setData(ACTIVE); pActionAway-\u0026gt;setData(AWAY); pActionBusy-\u0026gt;setData(BUSY); pActionNoDisturb-\u0026gt;setData(NOT_DISTURB); pActionHide-\u0026gt;setData(HIDE); connect(m_loginStateMemu, SIGNAL(triggered(QAction *)), this, SLOT(onMenuClicked(QAction*))); QPoint pos = ui-\u0026gt;loginState-\u0026gt;mapToGlobal(QPoint(0, 0)) + QPoint(0, 20); m_loginStateMemu-\u0026gt;exec(pos); } // ç”¨æˆ·çŠ¶æ€èœå•ç‚¹å‡»; void LoginWindow::onMenuClicked(QAction * action) { ui-\u0026gt;loginState-\u0026gt;setIcon(action-\u0026gt;icon()); // è·å–çŠ¶æ€å€¼; m_loginState = (LoginState)action-\u0026gt;data().toInt(); qDebug() \u0026lt;\u0026lt; \u0026#34;onMenuClicked\u0026#34; \u0026lt;\u0026lt; m_loginState; } åœ¨æ¥æ”¶åˆ°ç‚¹å‡»çŠ¶æ€æŒ‰é’®ä¿¡å·æ—¶ï¼Œè°ƒç”¨onLoginStateClickedæ§½å‡½æ•°ï¼Œæ”¹å˜ç”¨æˆ·ç™»å½•çŠ¶æ€ã€‚åˆ‡æ¢çš„ä¸‹æ‹‰èœå•ç”¨çš„æ˜¯QMenuã€‚\naddSeparator()æ·»åŠ åˆ†å‰²çº¿ Q æˆ‘å§å’Œç¦»å¼€çŠ¶æ€ä¹‹é—´çš„åˆ†å‰²çº¿ã€‚ \u003c!DOCTYPE html\u003e Responsive Image mapToGlobal()æ˜ å°„æˆå…¨å±€åæ ‡ å¼¹å‡ºç™»å½•çŠ¶æ€èœå•m_loginStateMemuæ˜¯æˆ‘ä»¬è‡ªå·± new å‡ºæ¥çš„ï¼Œé»˜è®¤æ˜¾ç¤ºæ˜¯ä»å·¦ä¸Šè§’å¼€å§‹æ˜¾ç¤ºï¼Œè¿™æ ·å½“ç„¶ä¸è¡Œã€‚\n\u003c!DOCTYPE html\u003e Responsive Image mapToGlobal()çš„ä½œç”¨å°±æ˜¯å°†æ§ä»¶çš„åæ ‡æ˜ å°„æˆå…¨å±€åæ ‡ã€‚ä»£ç é‡Œçš„æ„æ€å°±æ˜¯å°†loginStateæ§ä»¶é‡Œé¢çš„åæ ‡ç”¨å…¨å±€åæ ‡è¡¨ç¤ºã€‚ç„¶åå†å‘ä¸‹åç§»20ä¸ªå•ä½ã€‚å†æŠŠå¾—åˆ°çš„å…¨å±€åæ ‡ä½œä¸ºm_loginStateMemuæ˜¾ç¤ºèµ·å§‹åæ ‡ã€‚\nä¸‹å›¾æ˜¯æœªåç§»çš„ç»“æœï¼Œ \u003c!DOCTYPE html\u003e Responsive Image å‘ä¸‹åç§»20ä¸ªå•ä½çš„æ•ˆæœï¼Œå› ä¸ºæˆ‘ä»¬mapToGlobal(QPoint(0, 0))çš„å‚æ•°æ˜¯(0,0)ä¸ºèµ·ç‚¹ã€‚å¦‚æœæˆ‘ä»¬mapToGlobal(QPoint(0, 20))çš„å‚æ•°æ˜¯(0,20)ï¼Œå°±ä¸ç”¨å†åŠ ä¸Šåç§»äº†ã€‚ \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/qt%E6%A8%A1%E4%BB%BF%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-%E4%BA%A4%E4%BA%92%E5%93%8D%E5%BA%94/","summary":"\u003ch2 id=\"æ•ˆæœé¢„è§ˆ\"\u003eæ•ˆæœé¢„è§ˆ\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210820152215.gif\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210820152215.gif\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210820152316.gif\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210820152316.gif\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"Qt æ¨¡ä»¿ç™»å½•ç•Œé¢-äº¤äº’å“åº”"},{"content":"æ¡†æ¶ç±»å›¾ \u003c!DOCTYPE html\u003e Responsive Image æ•ˆæœé¢„è§ˆ \u003c!DOCTYPE html\u003e Responsive Image å®Œæ•´é¡¹ç›®åŠèµ„æºæ–‡ä»¶è¯·åœ¨GithubæŸ¥çœ‹ã€‚\né¡µé¢å¸ƒå±€ \u003c!DOCTYPE html\u003e Responsive Image åˆå§‹åŒ–æ ‡é¢˜æ  // åˆå§‹åŒ–æ ‡é¢˜æ ; void LoginWindow::initMyTitle() { // å› ä¸ºè¿™é‡Œæœ‰æ§ä»¶å±‚å äº†ï¼Œæ‰€ä»¥è¦æ³¨æ„æ§ä»¶ raise() æ–¹æ³•çš„è°ƒç”¨é¡ºåº; m_titleBar-\u0026gt;move(0, 0); m_titleBar-\u0026gt;raise(); m_titleBar-\u0026gt;setBackgroundColor(100, 0, 0, true); m_titleBar-\u0026gt;setButtonType(MIN_BUTTON); m_titleBar-\u0026gt;setTitleWidth(this-\u0026gt;width()); // è¿™é‡Œéœ€è¦è®¾ç½®æˆ falseï¼Œä¸å…è®¸é€šè¿‡æ ‡é¢˜æ æ‹–åŠ¨æ¥ç§»åŠ¨çª—å£ä½ç½®ï¼Œå¦åˆ™ä¼šé€ æˆçª—å£ä½ç½®é”™è¯¯; m_titleBar-\u0026gt;setMoveParentWindowFlag(false); ui-\u0026gt;pButtonArrow-\u0026gt;raise(); } raise()å°†æ§ä»¶ç½®äºé¡¶å±‚ ç¨‹åºåœ¨æ‰“å¼€åä¸€èˆ¬éƒ½åœ¨æ‰€æœ‰çª—ä½“çš„é¡¶å±‚ï¼Œæ‰“å¼€å…¶ä»–ç¨‹åºåä¹‹å‰çš„ç¨‹åºå°±ä¼šè¢«æ”¾åˆ°ä¸‹ä¸€å±‚ï¼Œåœ¨è¿™é‡Œï¼Œå½“è®¾ç½®å®Œmy_titleBaråå¯¹å…¶ä»–æ§ä»¶æ“ä½œå°±ä¼šæŠŠmy_titleBaræ§ä»¶è¦†ç›–ã€‚æ‰€æœ‰è¦ç”¨raise()æ–¹æ³•å°†å…¶ç½®äºé¡¶å±‚ã€‚\nåˆå§‹åŒ–çª—å£ // åˆå§‹åŒ–çª—å£; void LoginWindow::initWindow() { //èƒŒæ™¯ GIG å›¾; QLabel* pBack = new QLabel(this); QMovie *movie = new QMovie(); movie-\u0026gt;setFileName(\u0026#34;:/Resources/LoginWindow/back.gif\u0026#34;); pBack-\u0026gt;setMovie(movie); movie-\u0026gt;start(); pBack-\u0026gt;move(0, 0); //æ–‡æœ¬æ¡†å†…æç¤º ui-\u0026gt;accountComboBox-\u0026gt;setEditable(true); QLineEdit* lineEdit = ui-\u0026gt;accountComboBox-\u0026gt;lineEdit(); lineEdit-\u0026gt;setPlaceholderText(QStringLiteral(\u0026#34;QQ å·ç /æ‰‹æœº/é‚®ç®±\u0026#34;)); QRegExp regExp(\u0026#34;[A-Za-z0-9_]{6,30}\u0026#34;); //æ­£åˆ™è¡¨è¾¾å¼é™åˆ¶ç”¨æˆ·åè¾“å…¥ä¸èƒ½è¾“å…¥æ±‰å­— lineEdit-\u0026gt;setValidator(new QRegExpValidator(regExp,this)); ui-\u0026gt;passwordEdit-\u0026gt;setPlaceholderText(QStringLiteral(\u0026#34;å¯†ç \u0026#34;)); //å¯†ç æ¡†ä¸­çš„å°é”®ç›˜æŒ‰é’®; m_keyboardButton = new QPushButton(); m_keyboardButton-\u0026gt;setObjectName(\u0026#34;pButtonKeyboard\u0026#34;); m_keyboardButton-\u0026gt;setFixedSize(QSize(16, 16)); m_keyboardButton-\u0026gt;setCursor(QCursor(Qt::PointingHandCursor));//é¼ æ ‡æ”¾ä¸Šå»å˜æˆæ‰‹å½¢ QHBoxLayout* passwordEditLayout = new QHBoxLayout(); passwordEditLayout-\u0026gt;addStretch(); passwordEditLayout-\u0026gt;addWidget(m_keyboardButton); passwordEditLayout-\u0026gt;setSpacing(0); passwordEditLayout-\u0026gt;setContentsMargins(0, 0, 8, 0); ui-\u0026gt;passwordEdit-\u0026gt;setLayout(passwordEditLayout); //è®¾ç½®å¯†ç è¾¾åˆ°æœ€é•¿æ—¶æœ€åä¸€ä¸ªå­—ç¬¦ç¦»å°é”®ç›˜å›¾æ ‡çš„è·ç¦»ï¼ˆ12ï¼‰ ui-\u0026gt;passwordEdit-\u0026gt;setTextMargins(0, 0, m_keyboardButton-\u0026gt;width() + 12, 0); //è®¾ç½®å¤´åƒä»¥åŠçŠ¶æ€å›¾æ ‡ ui-\u0026gt;userHead-\u0026gt;setPixmap(QPixmap(\u0026#34;:/Resources/LoginWindow/HeadImage.png\u0026#34;)); ui-\u0026gt;loginState-\u0026gt;setIcon(QIcon(\u0026#34;:/Resources/LoginWindow/LoginState/state_online.png\u0026#34;)); ui-\u0026gt;loginState-\u0026gt;setIconSize(QSize(13, 13)); } lineEdit-\u0026gt;setPlaceholderText QStringLiteral:å¦‚æœè¯¥ QString ä¸ä¼šä¿®æ”¹çš„è¯ï¼Œé‚£ä½¿ç”¨ QStringLiteral\nsetPlaceholderText()è®¾ç½®æ–‡æœ¬æç¤º è¯¥æ–¹æ³•å¯ä»¥è®¾ç½®æ–‡æœ¬æ¡†ä¸­çš„é»˜è®¤æ–‡å­—æç¤ºï¼Œå¦‚å›¾ç‰‡ä¸­çš„ QQ å·ç /æ‰‹æœº/é‚®ç®±ã€‚\nsetCursor()è®¾ç½®é¼ æ ‡å½¢æ€ å…±æœ‰ä»¥ä¸‹ 19 ç§é¼ æ ‡å½¢æ€ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å›¾ç‰‡æ¥è‡ªè¿™é‡Œ\naddStretch()å¸ƒå±€åŠ å…¥å¼¹ç°§ QHBoxLayout* passwordEditLayout = new QHBoxLayout(); passwordEditLayout-\u0026gt;addStretch(); passwordEditLayout-\u0026gt;addWidget(m_keyboardButton); addStretch()ç”¨æ¥åœ¨å¸ƒå±€ä¸­å¹³åˆ†å¸ƒå±€ï¼Œä»–å°±æ˜¯ä¸ªå¼¹ç°§çš„ä½œç”¨ã€‚å¦‚æœä¸åŠ å‚æ•°ï¼Œå°±æ˜¯ç­‰äºåŠ ä¸ªå¼¹ç°§ï¼Œä¼šæŠŠå°é”®ç›˜å›¾æ ‡æŒ¤åˆ°è¾¹ä¸Šã€‚å¦‚å›¾ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image å¦‚æœå°†ä»£ç æ”¹ä¸€ä¸‹ï¼š\nQHBoxLayout* passwordEditLayout = new QHBoxLayout(); passwordEditLayout-\u0026gt;addStretch(1); passwordEditLayout-\u0026gt;addWidget(m_keyboardButton); passwordEditLayout-\u0026gt;addStretch(1); æ„æ€å°±æ˜¯å°†é™¤äº†å°é”®ç›˜å›¾æ ‡ä»¥å¤–çš„ç©ºé—´åˆ†æˆä¸¤ä»½ï¼Œé‚£ä¹ˆåˆšå¥½å°é”®ç›˜å›¾æ ‡å°±æ˜¯åœ¨ä¸­é—´ä½ç½®ï¼Œå°±åƒä¸¤éå„é˜²æ­¢äº†ä¸€ä¸ªå¼¹ç°§ã€‚æ•ˆæœå¦‚ä¸‹ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image setSpacing()è®¾ç½®ç©ºé—´ä¹‹é—´ä¸Šä¸‹è·ç¦»ï¼Œè¿˜æœ‰ä¸€ä¸ªå®¹æ˜“æ··æ·†çš„è®¾ç½®setMargin()è¡¨ç¤ºè®¾ç½®ç©ºé—´ä¸çª—å£è¾¹ç¼˜çš„å·¦å³è·ç¦»ã€‚\nsetContentsMarginsè®¾ç½®å·¦ä¾§ã€é¡¶éƒ¨ã€å³ä¾§å’Œåº•éƒ¨è¾¹è·ï¼Œä»¥ä¾¿åœ¨å¸ƒå±€å‘¨å›´ä½¿ç”¨ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ç°åœ¨æˆ‘ä»¬è®¾ç½®çš„æ˜¯setContentsMargins(0, 0, 8, 0)ï¼Œç°åœ¨æˆ‘ä»¬è®¾ç½®å¤§ä¸€ç‚¹çœ‹çœ‹æ•ˆæœã€‚\n\u003c!DOCTYPE html\u003e Responsive Image QLineEdit.setTextMargins(left=,top=,right=,bottom=)è®¾ç½®æ–‡æœ¬è¾¹è·ï¼Œè¿™é‡Œä¸»è¦ä¸ºäº†è®¾ç½®å¯†ç è¾“å…¥è¿‡é•¿æ—¶ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦è·ç¦»å°é”®ç›˜å›¾æ ‡æœ‰ä¸€å®šé—´éš™ã€‚\nåˆå§‹åŒ–ç”¨æˆ·ç™»å½•ä¿¡æ¯ //accountitem.cpp void LoginWindow::initAccountList() { for (int i = 0; i \u0026lt; 3; i++) { AccountItem *account_item = new AccountItem(); account_item-\u0026gt;setAccountInfo(i, QStringLiteral(\u0026#34;Dominic_%1å·\u0026#34;).arg(i), QString(\u0026#34;:/Resources/LoginWindow/headImage/head_%1.png\u0026#34;).arg(i)); QListWidgetItem *list_item = new QListWidgetItem(m_Accountlist); m_Accountlist-\u0026gt;setItemWidget(list_item, account_item); } } ","permalink":"https://lifeislife.cn/posts/qt%E6%A8%A1%E4%BB%BF%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-%E7%AA%97%E5%8F%A3%E5%B8%83%E5%B1%80%E5%8F%8A%E6%A0%B7%E5%BC%8F/","summary":"\u003ch2 id=\"æ¡†æ¶ç±»å›¾\"\u003eæ¡†æ¶ç±»å›¾\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210827120419.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210827120419.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003ch2 id=\"æ•ˆæœé¢„è§ˆ\"\u003eæ•ˆæœé¢„è§ˆ\u003c/h2\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210818130510.gif\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210818130510.gif\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\nå®Œæ•´é¡¹ç›®åŠèµ„æºæ–‡ä»¶è¯·åœ¨\u003ca href=\"https://github.com/Dunky-Z/learning-qt/tree/main/Demo/login\"\u003eGithub\u003c/a\u003eæŸ¥çœ‹ã€‚\u003c/p\u003e","title":"Qt æ¨¡ä»¿ç™»å½•ç•Œé¢-çª—å£å¸ƒå±€åŠæ ·å¼"},{"content":"Linux ç¯å¢ƒä¸‹ï¼Œè¿›ç¨‹åœ°å€ç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼Œæ¯ä¸ªè¿›ç¨‹å„è‡ªæœ‰ä¸åŒçš„ç”¨æˆ·åœ°å€ç©ºé—´ã€‚ä»»ä½•ä¸€ä¸ªè¿›ç¨‹çš„å…¨å±€å˜é‡åœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­éƒ½çœ‹ä¸åˆ°ï¼Œæ‰€ä»¥è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´ä¸èƒ½ç›¸äº’è®¿é—®ï¼Œè¦äº¤æ¢æ•°æ®å¿…é¡»é€šè¿‡å†…æ ¸ï¼Œåœ¨å†…æ ¸ä¸­å¼€è¾Ÿä¸€å—ç¼“å†²åŒºï¼Œè¿›ç¨‹ 1 æŠŠæ•°æ®ä»ç”¨æˆ·ç©ºé—´æ‹·åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œè¿›ç¨‹ 2 å†ä»å†…æ ¸ç¼“å†²åŒºæŠŠæ•°æ®è¯»èµ°ï¼Œå†…æ ¸æä¾›çš„è¿™ç§æœºåˆ¶ç§°ä¸ºè¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼ŒInterProcess Communicationï¼‰ã€‚\nè¿›ç¨‹é—´é€šä¿¡æ¦‚è¿° ç®¡é“ åœ¨å­¦ Linux å‘½ä»¤æ—¶å°±æœ‰ç®¡é“åœ¨è¿™ä¸ªæ¦‚å¿µï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªå‘½ä»¤\nps -ef | -grep root | xargs kill -9 å°†ä¸Šä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ï¼Œæ•°æ®åªèƒ½å‘ä¸€ä¸ªæ–¹å‘æµåŠ¨ï¼›åŒæ–¹éœ€è¦äº’ç›¸é€šä¿¡æ—¶ï¼Œéœ€è¦å»ºç«‹èµ·ä¸¤ä¸ªç®¡é“ã€‚\nç®¡é“æœ‰ä¸¤ç§ç±»å‹ï¼šåŒ¿åç®¡é“å’Œå‘½åç®¡é“ã€‚ä¸Šé¢æåˆ°çš„å‘½ä»¤ä¸­|è¡¨ç¤ºçš„ç®¡é“å³åŒ¿åç®¡é“ pipeã€‚ç”¨å®Œå³é”€æ¯ï¼Œè‡ªåŠ¨åˆ›å»ºï¼Œè‡ªåŠ¨é”€æ¯ã€‚\nä½¿ç”¨mkfifoæ˜¾ç¤ºåˆ›å»ºçš„æ˜¯å‘½åç®¡é“ fifoï¼Œ\nmkfifo hello helloå³æ˜¯ç®¡é“åç§°ï¼Œç±»å‹ä¸ºpï¼Œå°±æ˜¯pipeï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ç®¡é“é‡Œå†™å…¥ä¸œè¥¿ï¼Œ\n# echo \u0026#34;hello world\u0026#34; \u0026gt; hello å…‰å†™å…¥è¿˜ä¸è¡Œï¼Œåªæœ‰æœ‰å¦ä¸€ä¸ªè¿›ç¨‹è¯»å–äº†å†…å®¹æ‰å®Œæˆä¸€æ¬¡ä¿¡æ¯äº¤æ¢ï¼Œæ‰å®Œæˆä¸€æ¬¡é€šä¿¡ï¼Œ\n# cat \u0026lt; hello hello world è¿™ç§æ–¹å¼é€šä¿¡æ•ˆç‡ä½ï¼Œæ— æ³•é¢‘ç¹é€šä¿¡ã€‚\næ¶ˆæ¯é˜Ÿåˆ— ç±»ä¼¼äºæ—¥å¸¸æ²Ÿé€šä½¿ç”¨çš„é‚®ä»¶ï¼Œæœ‰ä¸€å®šæ ¼å¼ï¼Œæœ‰ä¸ªæ”¶ä»¶åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸Šçš„ç”¨æˆ·éƒ½å¯ä»¥åå¤åœ¨åŸé‚®ä»¶åŸºç¡€ä¸Šå›å¤ï¼Œè¾¾åˆ°é¢‘ç¹äº¤æµçš„ç›®çš„ã€‚è¿™ç§æ¨¡å‹å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹ã€‚\nå…±äº«å†…å­˜ å…±äº«å†…å­˜å…è®¸ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒºï¼Œè¿™ä¸€æ®µå­˜å‚¨åŒºå¯ä»¥è¢«ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æ˜ å°„è‡³è‡ªèº«çš„åœ°å€ç©ºé—´ä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å†™å…¥å…±äº«å†…å­˜çš„ä¿¡æ¯ï¼Œå¯ä»¥è¢«å…¶ä»–ä½¿ç”¨è¿™ä¸ªå…±äº«å†…å­˜çš„è¿›ç¨‹ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„å†…å­˜è¯»å–é”™åšè¯»å‡ºï¼Œä»è€Œå®ç°äº†è¿›ç¨‹é—´çš„é€šä¿¡ã€‚\næ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´æ˜ å°„åˆ°ä¸åŒçš„ç‰©ç†å†…å­˜ä¸­å»ã€‚è¿™ä¸ªè¿›ç¨‹è®¿é—® A åœ°å€å’Œå¦ä¸€ä¸ªè¿›ç¨‹è®¿é—® A åœ°å€ï¼Œå…¶å®è®¿é—®çš„æ˜¯ä¸åŒçš„ç‰©ç†å†…å­˜åœ°å€ï¼Œå¯¹äºæ•°æ®çš„å¢åˆ æŸ¥æ”¹äº’ä¸å½±å“ã€‚\nä½†æ˜¯ï¼Œå’±ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å˜é€šä¸€ä¸‹ï¼Œæ‹¿å‡ºä¸€å—è™šæ‹Ÿåœ°å€ç©ºé—´æ¥ï¼Œæ˜ å°„åˆ°ç›¸åŒçš„ç‰©ç†å†…å­˜ä¸­ã€‚è¿™æ ·è¿™ä¸ªè¿›ç¨‹å†™å…¥çš„ä¸œè¥¿ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹é©¬ä¸Šå°±èƒ½çœ‹åˆ°äº†ï¼Œéƒ½ä¸éœ€è¦æ‹·è´æ¥æ‹·è´å»ï¼Œä¼ æ¥ä¼ å»ã€‚\nä½¿ç”¨shmgetå‡½æ•°åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜ï¼Œ\n//key_t key: å”¯ä¸€å®šä½ä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡ //size_t size: å…±äº«å†…å­˜å¤§å° //int flag: å¦‚æœæ˜¯ IPC_CREAT è¡¨ç¤ºåˆ›å»ºæ–°çš„å…±äº«å†…å­˜ç©ºé—´ int shmget(key_t key, size_t size, int flag); åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ipcs å‘½ä»¤æŸ¥çœ‹è¿™ä¸ªå…±äº«å†…å­˜ã€‚\n#ipcs Â­Â­--shmems ------ Shared Memory Segments ------ Â­Â­Â­Â­Â­Â­Â­Â­ key shmid owner perms bytes nattch status 0x00000000 19398656 marc 600 1048576 2 dest è¿›ç¨‹é€šè¿‡shmatï¼Œå°±æ˜¯attachçš„æ„æ€ï¼Œå°†å†…å­˜åŠ è½½åˆ°è‡ªå·±è™šæ‹Ÿåœ°å€ç©ºé—´æŸä¸ªä½ç½®ã€‚\n//int shm_id: //const void *addr: åŠ è½½çš„åœ°å€ï¼Œé€šå¸¸è®¾ä¸º NULLï¼Œè®©å†…æ ¸é€‰ä¸€ä¸ªåˆé€‚åœ°å€ //int flag: void *shmat(int shm_id, const void *addr, int flag); å¦‚æœå…±äº«å†…å­˜ä½¿ç”¨å®Œæ¯•ï¼Œå¯ä»¥é€šè¿‡ shmdt è§£é™¤ç»‘å®šï¼Œç„¶åé€šè¿‡ shmctlï¼Œå°† cmd è®¾ç½®ä¸º IPC_RMIDï¼Œä»è€Œåˆ é™¤è¿™ä¸ªå…±äº«å†…å­˜å¯¹è±¡ã€‚\nint shmdt(void *addr); int shmctl(int shm_id, int cmd, struct shmid_ds *buf); å…±äº«å†…å­˜çš„æœ€å¤§ä¸è¶³ä¹‹å¤„åœ¨äºï¼Œç”±äºå¤šä¸ªè¿›ç¨‹å¯¹åŒä¸€å—å†…å­˜åŒºå…·æœ‰è®¿é—®çš„æƒé™ï¼Œå„ä¸ªè¿›ç¨‹ä¹‹é—´çš„åŒæ­¥é—®é¢˜æ˜¾å¾—å°¤ä¸ºçªå‡ºã€‚å¿…é¡»æ§åˆ¶åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯¹å…±äº«å†…å­˜åŒºåŸŸå†™å…¥æ•°æ®ï¼Œå¦åˆ™å°†é€ æˆæ•°æ®çš„æ··ä¹±ã€‚\nä¿¡å·é‡ å¦‚æœä¸¤ä¸ªè¿›ç¨‹åŒæ—¶å‘ä¸€ä¸ªå…±äº«å†…å­˜è¯»å†™æ•°æ®ï¼Œå¾ˆå¯èƒ½å°±ä¼šå¯¼è‡´å†²çªã€‚æ‰€ä»¥éœ€è¦æœ‰ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œä½¿å¾—åŒä¸€ä¸ªå…±äº«èµ„æºåŒæ—¶åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹è®¿é—®ã€‚åœ¨è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ä¸­ï¼Œä¿¡å·é‡ï¼ˆSemaphoreï¼‰å°±æ˜¯ç”¨æ¥å®ç°è¿›ç¨‹é—´äº’æ–¥ä¸åŒæ­¥çš„ã€‚å®ƒå…¶å®æ˜¯ä¸ªè®¡æ•°å™¨ï¼Œåªä¸è¿‡ä¸æ˜¯ç”¨æ¥è®°å½•è¿›ç¨‹é—´é€šä¿¡æ•°æ®çš„ã€‚\næˆ‘ä»¬å¯ä»¥å°†ä¿¡å·é‡åˆå§‹åŒ–ä¸ºä¸€ä¸ªæ•°å€¼ï¼Œæ¥ä»£è¡¨æŸç§èµ„æºçš„æ€»ä½“æ•°é‡ã€‚å¯¹äºä¿¡å·é‡æ¥è®²ï¼Œä¼šå®šä¹‰ä¸¤ç§åŸå­æ“ä½œï¼Œä¸€ä¸ªæ˜¯P æ“ä½œï¼Œæˆ‘ä»¬ç§°ä¸ºç”³è¯·èµ„æºæ“ä½œã€‚è¿™ä¸ªæ“ä½œä¼šç”³è¯·å°†ä¿¡å·é‡çš„æ•°å€¼å‡å» Nï¼Œè¡¨ç¤ºè¿™äº›æ•°é‡è¢«ä»–ç”³è¯·ä½¿ç”¨äº†ï¼Œå…¶ä»–äººä¸èƒ½ç”¨äº†ã€‚å¦ä¸€ä¸ªæ˜¯Væ“ä½œï¼Œæˆ‘ä»¬ç§°ä¸ºå½’è¿˜èµ„æºæ“ä½œï¼Œè¿™ä¸ªæ“ä½œä¼šç”³è¯·å°†ä¿¡å·é‡åŠ ä¸Š Mï¼Œè¡¨ç¤ºè¿™äº›æ•°é‡å·²ç»è¿˜ç»™ä¿¡å·é‡äº†ï¼Œå…¶ä»–äººå¯ä»¥ä½¿ç”¨äº†ã€‚\næ‰€è°“åŸå­æ“ä½œï¼ˆAtom Operationï¼‰å°±æ˜¯ä¸å¯è¢«ä¸­æ–­çš„ä¸€ä¸ªæˆ–ä¸€ç³»åˆ—æ“ä½œã€‚\nä½¿ç”¨semgetåˆ›å»ºä¿¡å·é‡ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå”¯ä¸€æ ‡è¯†ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªä¿¡å·é‡ã€‚\nint semget(key_t key, int num_sems, int sem_flags); æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¿¡å·é‡çš„æ€»çš„èµ„æºæ•°é‡ã€‚é€šè¿‡semctl å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•° semidæ˜¯è¿™ä¸ªä¿¡å·é‡ç»„çš„idï¼Œç¬¬äºŒä¸ªå‚æ•° semnum æ‰æ˜¯åœ¨è¿™ä¸ªä¿¡å·é‡ç»„ä¸­æŸä¸ªä¿¡å·é‡çš„idï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å‘½ä»¤ï¼Œå¦‚æœæ˜¯åˆå§‹åŒ–ï¼Œåˆ™ç”¨ SETVALï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª unionã€‚å¦‚æœåˆå§‹åŒ–ï¼Œåº”è¯¥ç”¨é‡Œé¢çš„valè®¾ç½®èµ„æºæ€»é‡ã€‚\nint semctl(int semid, int semnum, int cmd, union semun args); union semun { int val; struct semid_ds *buf; unsigned short int *array; struct seminfo *__buf; }; æ— è®ºæ˜¯ P æ“ä½œè¿˜æ˜¯ V æ“ä½œï¼Œæˆ‘ä»¬ç»Ÿä¸€ç”¨ semop å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°è¿˜æ˜¯ä¿¡å·é‡ç»„çš„ idï¼Œä¸€æ¬¡å¯ä»¥æ“ä½œå¤šä¸ªä¿¡å·é‡ã€‚ç¬¬ä¸‰ä¸ªå‚æ•° numops å°±æ˜¯æœ‰å¤šå°‘ä¸ªæ“ä½œï¼Œç¬¬äºŒä¸ªå‚æ•°å°†è¿™äº›æ“ä½œæ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ã€‚\næ•°ç»„çš„æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª struct sembufï¼Œé‡Œé¢çš„ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯è¿™ä¸ªæ“ä½œçš„å¯¹è±¡æ˜¯å“ªä¸ªä¿¡å·é‡ã€‚ç¬¬äºŒä¸ªæˆå‘˜å°±æ˜¯è¦å¯¹è¿™ä¸ªä¿¡å·é‡åšå¤šå°‘æ”¹å˜ã€‚å¦‚æœ sem_op \u0026lt; 0ï¼Œå°±è¯·æ±‚ sem_op çš„ç»å¯¹å€¼çš„èµ„æºã€‚å¦‚æœç›¸åº”çš„èµ„æºæ•°å¯ä»¥æ»¡è¶³è¯·æ±‚ï¼Œåˆ™å°†è¯¥ä¿¡å·é‡çš„å€¼å‡å» sem_op çš„ç»å¯¹å€¼ï¼Œå‡½æ•°æˆåŠŸè¿”å›ã€‚\nå½“ç›¸åº”çš„èµ„æºæ•°ä¸èƒ½æ»¡è¶³è¯·æ±‚æ—¶ï¼Œå°±è¦çœ‹sem_flg äº†ã€‚å¦‚æœæŠŠ sem_flg è®¾ç½®ä¸ºIPC_NOWAITï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰èµ„æºä¹Ÿä¸ç­‰å¾…ï¼Œåˆ™ semop å‡½æ•°å‡ºé”™è¿”å› EAGAINã€‚å¦‚æœ sem_flg æ²¡æœ‰æŒ‡å®šIPC_NOWAITï¼Œåˆ™è¿›ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°å½“ç›¸åº”çš„èµ„æºæ•°å¯ä»¥æ»¡è¶³è¯·æ±‚ã€‚è‹¥ sem_op \u0026gt; 0ï¼Œè¡¨ç¤ºè¿›ç¨‹å½’è¿˜ç›¸åº”çš„èµ„æºæ•°ï¼Œå°† sem_op çš„å€¼åŠ åˆ°ä¿¡å·é‡çš„å€¼ä¸Šã€‚å¦‚æœæœ‰è¿›ç¨‹æ­£åœ¨ä¼‘çœ ç­‰å¾…æ­¤ä¿¡å·é‡ï¼Œåˆ™å”¤é†’å®ƒä»¬ã€‚\nint semop(int semid, struct sembuf semoparray[], size_t numops); struct sembuf { short sem_num; // ä¿¡å·é‡ç»„ä¸­å¯¹åº”çš„åºå·ï¼Œ0ï½sem_nums-1 short sem_op; // ä¿¡å·é‡å€¼åœ¨ä¸€æ¬¡æ“ä½œä¸­çš„æ”¹å˜é‡ short sem_flg; // IPC_NOWAIT, SEM_UNDO } ä¿¡å· ä»¥ä¸Šæåˆ°çš„é€šä¿¡æ–¹å¼ï¼Œéƒ½æ˜¯å¸¸è§„çŠ¶æ€ä¸‹çš„å·¥ä½œæ¨¡å¼ï¼Œè€Œä¿¡å·ä¸€èˆ¬æ˜¯ç”±é”™è¯¯äº§ç”Ÿçš„ã€‚\nä¿¡å·æ²¡æœ‰ç‰¹åˆ«å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªä»£å·ä¸€æ ·çš„æ•°å­—ã€‚Linux æä¾›äº†å‡ åç§ä¿¡å·ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçš„æ„ä¹‰ã€‚ä¿¡å·ä¹‹é—´ä¾é å®ƒä»¬çš„å€¼æ¥åŒºåˆ†ã€‚\n","permalink":"https://lifeislife.cn/posts/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/","summary":"\u003cp\u003eLinux ç¯å¢ƒä¸‹ï¼Œè¿›ç¨‹åœ°å€ç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼Œæ¯ä¸ªè¿›ç¨‹å„è‡ªæœ‰ä¸åŒçš„ç”¨æˆ·åœ°å€ç©ºé—´ã€‚ä»»ä½•ä¸€ä¸ªè¿›ç¨‹çš„å…¨å±€å˜é‡åœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­éƒ½çœ‹ä¸åˆ°ï¼Œæ‰€ä»¥è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´ä¸èƒ½ç›¸äº’è®¿é—®ï¼Œè¦äº¤æ¢æ•°æ®å¿…é¡»é€šè¿‡å†…æ ¸ï¼Œåœ¨å†…æ ¸ä¸­å¼€è¾Ÿä¸€å—ç¼“å†²åŒºï¼Œè¿›ç¨‹ 1 æŠŠæ•°æ®ä»ç”¨æˆ·ç©ºé—´æ‹·åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œè¿›ç¨‹ 2 å†ä»å†…æ ¸ç¼“å†²åŒºæŠŠæ•°æ®è¯»èµ°ï¼Œå†…æ ¸æä¾›çš„è¿™ç§æœºåˆ¶ç§°ä¸º\u003cstrong\u003eè¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼ŒInterProcess Communicationï¼‰\u003c/strong\u003eã€‚\u003c/p\u003e","title":"Linux æ“ä½œç³»ç»Ÿ-è¿›ç¨‹é—´é€šä¿¡"},{"content":"Commands rename [options] \u0026#34;s/oldname/newname/\u0026#34; file æ ¼å¼å°±å¾ˆå®¹æ˜“çœ‹å‡ºæ¥æ€ä¹ˆç”¨çš„ï¼Œå°±æ˜¯/ä¸èƒ½ä¸¢ã€‚\n-v å°†é‡å‘½åçš„å†…å®¹éƒ½æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼Œv å¯ä»¥çœ‹æˆ verbose -n æµ‹è¯•ä¼šé‡å‘½åçš„å†…å®¹ï¼Œå°†ç»“æœéƒ½æ‰“å°ï¼Œä½†æ˜¯å¹¶ä¸çœŸæ­£æ‰§è¡Œé‡å‘½åçš„è¿‡ç¨‹ -f force ä¼šè¦†ç›–æœ¬åœ°å·²ç»å­˜åœ¨çš„æ–‡ä»¶ -h -m -V åˆ†åˆ«ä¸ºå¸®åŠ©ï¼Œå¸®åŠ©ï¼Œç‰ˆæœ¬ -e æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥é€šè¿‡è¯¥é€‰é¡¹ï¼Œå†™ä¸€äº›è„šæœ¬æ¥åšä¸€äº›å¤æ‚çš„äº‹æƒ… Examples æ›¿æ¢æ–‡ä»¶åä¸­çš„ç‰¹å®šå­—æ®µ rename \u0026#34;s/AA/aa/\u0026#34; * # æŠŠæ–‡ä»¶åä¸­çš„AAæ›¿æ¢æˆaa ä¿®æ”¹æ–‡ä»¶åç¼€ rename \u0026#34;s/.html/.php/\u0026#34; * # æŠŠ.html åç¼€çš„æ”¹æˆ .phpåç¼€ rename \u0026#34;s/.png/.jpg/\u0026#34; * # å°† png æ”¹ä¸º jpg æ·»åŠ åç¼€ rename \u0026#34;s/$/.txt/\u0026#34; * # æŠŠæ‰€æœ‰çš„æ–‡ä»¶åéƒ½ä»¥txtç»“å°¾ $æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºç»“å°¾ã€‚\nä¿ç•™éƒ¨åˆ†æ–‡ä»¶å å‡å¦‚éœ€è¦åœ¨æ‰¹é‡ä¿®æ”¹çš„æ—¶å€™ä¿ç•™éƒ¨åˆ†æ–‡ä»¶åï¼Œå¯ä»¥ä½¿ç”¨å¼•ç”¨\\1 ï¼Œæ¯”å¦‚æœ‰ä¸‹é¢æ ¼å¼çš„æ–‡ä»¶ï¼Œåªæƒ³ä¿ç•™æ—¥æœŸéƒ¨åˆ†ã€‚\nScreenshot from 2019-01-02 15-56-49.jpg rename -n \u0026#34;s/Screenshot from ([0-9\\\\- ]+).jpg/\\1.jpg/\u0026#34; * å°†() åŒ¹é…çš„å†…å®¹å–å‡ºæ¥æ”¾åˆ°æ›¿æ¢éƒ¨åˆ†ã€‚\n","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-rename%E6%89%B9%E9%87%8F%E9%87%8D%E5%91%BD%E5%90%8D/","summary":"\u003ch2 id=\"commands\"\u003eCommands\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003erename [options] \u0026#34;s/oldname/newname/\u0026#34; file\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ ¼å¼å°±å¾ˆå®¹æ˜“çœ‹å‡ºæ¥æ€ä¹ˆç”¨çš„ï¼Œå°±æ˜¯\u003ccode\u003e/\u003c/code\u003eä¸èƒ½ä¸¢ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-v å°†é‡å‘½åçš„å†…å®¹éƒ½æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼Œv å¯ä»¥çœ‹æˆ verbose\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-n æµ‹è¯•ä¼šé‡å‘½åçš„å†…å®¹ï¼Œå°†ç»“æœéƒ½æ‰“å°ï¼Œä½†æ˜¯å¹¶ä¸çœŸæ­£æ‰§è¡Œé‡å‘½åçš„è¿‡ç¨‹\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-f force ä¼šè¦†ç›–æœ¬åœ°å·²ç»å­˜åœ¨çš„æ–‡ä»¶\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-h -m -V åˆ†åˆ«ä¸ºå¸®åŠ©ï¼Œå¸®åŠ©ï¼Œç‰ˆæœ¬\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-e æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥é€šè¿‡è¯¥é€‰é¡¹ï¼Œå†™ä¸€äº›è„šæœ¬æ¥åšä¸€äº›å¤æ‚çš„äº‹æƒ…\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"examples\"\u003eExamples\u003c/h2\u003e\n\u003ch3 id=\"æ›¿æ¢æ–‡ä»¶åä¸­çš„ç‰¹å®šå­—æ®µ\"\u003eæ›¿æ¢æ–‡ä»¶åä¸­çš„ç‰¹å®šå­—æ®µ\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003erename \u0026#34;s/AA/aa/\u0026#34; *  # æŠŠæ–‡ä»¶åä¸­çš„AAæ›¿æ¢æˆaa\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"ä¿®æ”¹æ–‡ä»¶åç¼€\"\u003eä¿®æ”¹æ–‡ä»¶åç¼€\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003erename \u0026#34;s/.html/.php/\u0026#34; *     # æŠŠ.html åç¼€çš„æ”¹æˆ .phpåç¼€\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003erename \u0026#34;s/.png/.jpg/\u0026#34; *      # å°† png æ”¹ä¸º jpg\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"æ·»åŠ åç¼€\"\u003eæ·»åŠ åç¼€\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003erename \u0026#34;s/$/.txt/\u0026#34; *     # æŠŠæ‰€æœ‰çš„æ–‡ä»¶åéƒ½ä»¥txtç»“å°¾\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003e$\u003c/code\u003eæ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºç»“å°¾ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-rename æ‰¹é‡é‡å‘½å"},{"content":"è¿™ä¸ªå‘½ä»¤åº”è¯¥æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€å¤šçš„å‘½ä»¤ä¹‹ä¸€äº†ï¼Œåº”è¯¥æ—©å°±æ‹¿å‡ºæ¥è®²ä¸€ä¸‹çš„ã€‚ä½†æ˜¯å¹³æ—¶ç”¨çš„å¤ªå¤šï¼Œæ€»æ„Ÿè§‰è‡ªå·±éƒ½ä¼šç”¨äº†ï¼Œä½†æ˜¯ä»”ç»†çœ‹äº†æ‰€æœ‰å‘½ä»¤ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æ¯”è¾ƒå®ç”¨ä½†æ˜¯æ²¡è®°ä½çš„å‘½ä»¤ã€‚\naptçš„å…¨ç§°æ˜¯Advanced Packaging Toolæ˜¯ Linux ç³»ç»Ÿä¸‹çš„ä¸€æ¬¾å®‰è£…åŒ…ç®¡ç†å·¥å…·ã€‚APT å¯ä»¥è‡ªåŠ¨ä¸‹è½½ã€é…ç½®å’Œå®‰è£…äºŒè¿›åˆ¶æˆ–æºä»£ç æ ¼å¼è½¯ä»¶åŒ…ï¼Œç®€åŒ–äº† Unix ç³»ç»Ÿä¸Šç®¡ç†è½¯ä»¶çš„è¿‡ç¨‹ã€‚\nAPT ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªå‘½ä»¤ç»„æˆï¼š\napt-get apt-cache apt-file Commands æœç´¢è½¯ä»¶åŒ… apt search python3 å®‰è£…è½¯ä»¶åŒ… apt install python3 æ›´æ–°æº sudo apt install update æ›´æ–°è½¯ä»¶ æ‰§è¡Œå®Œ update å‘½ä»¤åï¼Œå°±å¯ä»¥ä½¿ç”¨ apt upgrade æ¥å‡çº§è½¯ä»¶åŒ…äº†ã€‚æ‰§è¡Œå‘½ä»¤åç³»ç»Ÿä¼šæç¤ºæœ‰å‡ ä¸ªè½¯ä»¶éœ€è¦å‡çº§ã€‚åœ¨å¾—åˆ°ä½ çš„åŒæ„åï¼Œç³»ç»Ÿå³å¼€å§‹è‡ªåŠ¨ä¸‹è½½å®‰è£…è½¯ä»¶åŒ…ã€‚\nsudo apt install upgrade å¸è½½è½¯ä»¶ apt remove python3 # ç§»é™¤è½¯ä»¶åŒ…ï¼Œä½†æ˜¯ä¿ç•™é…ç½®æ–‡ä»¶ apt purge python3 #ç§»é™¤è½¯ä»¶åŒ…å¹¶ç§»é™¤é…ç½® apt autoremove # ç§»é™¤å­¤ç«‹çš„å¹¶ä¸è¢«ä¾èµ–çš„è½¯ä»¶åŒ… åˆ—å‡ºè½¯ä»¶æ¸…å• apt list ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-apt%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6/","summary":"\u003cp\u003eè¿™ä¸ªå‘½ä»¤åº”è¯¥æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€å¤šçš„å‘½ä»¤ä¹‹ä¸€äº†ï¼Œåº”è¯¥æ—©å°±æ‹¿å‡ºæ¥è®²ä¸€ä¸‹çš„ã€‚ä½†æ˜¯å¹³æ—¶ç”¨çš„å¤ªå¤šï¼Œæ€»æ„Ÿè§‰è‡ªå·±éƒ½ä¼šç”¨äº†ï¼Œä½†æ˜¯ä»”ç»†çœ‹äº†æ‰€æœ‰å‘½ä»¤ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æ¯”è¾ƒå®ç”¨ä½†æ˜¯æ²¡è®°ä½çš„å‘½ä»¤ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-apt å®‰è£…å¸è½½è½¯ä»¶"},{"content":"QtCreatorâœæ–°å»ºæ–‡ä»¶æˆ–é¡¹ç›®âœQtâœQt Resource File\n\u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»Chooseï¼Œè®¾ç½®èµ„æºæ–‡ä»¶åå’Œè·¯å¾„ã€‚èµ„æºæ–‡ä»¶æ˜¯ä¸€ç³»åˆ—æ–‡ä»¶çš„é›†åˆï¼Œæ¯”å¦‚æˆ‘è¦å»ºç«‹ä¸€ä¸ªå›¾ç‰‡çš„èµ„æºæ–‡ä»¶ï¼Œæˆ‘å¯ä»¥è®¾ç½®imgä¸ºèµ„æºæ–‡ä»¶åï¼Œå°†æ¥æ‰€æœ‰å›¾ç‰‡ç±»èµ„æºï¼Œéƒ½æ”¾åˆ°è¿™ä¸ªèµ„æºæ–‡ä»¶é‡Œï¼ŒåŠ å…¥è¿˜æœ‰éŸ³é¢‘ç±»çš„æ–‡ä»¶ï¼Œæˆ‘å¯ä»¥æ–°å»ºä¸€ä¸ªaudioçš„èµ„æºæ–‡ä»¶ï¼Œä»¥åæ‰€æœ‰éŸ³é¢‘ç±»çš„æ–‡ä»¶éƒ½æ”¾åˆ°è¿™ä¸ªèµ„æºæ–‡ä»¶ä¸‹ã€‚\nè€Œä¸æ˜¯æˆ‘æƒ³è¦æ·»åŠ çš„æ–‡ä»¶åã€‚\n\u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å³ä¾§ç¼–è¾‘å™¨ä¸‹æ–¹æœ‰ä¸ªAdd Prefix(æ·»åŠ å‰ç¼€)ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ·»åŠ æ–‡ä»¶å‰ç¼€ï¼Œå‰ç¼€å°±æ˜¯å­˜æ”¾æ–‡ä»¶çš„æ–‡ä»¶å¤¹åï¼Œç„¶åæ·»åŠ éœ€è¦çš„æ–‡ä»¶ã€‚æ·»åŠ å®Œä»¥åçœ‹æ•ˆæœå°±çŸ¥é“å•¥æ„æ€äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿™ä¹ˆåšå¸¦æ¥çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœä»¥åæˆ‘ä»¬è¦æ›´æ”¹æ–‡ä»¶åï¼Œæ¯”å¦‚å°† xbl.png æ”¹æˆ xiabanle.pngï¼Œé‚£ä¹ˆï¼Œæ‰€æœ‰ä½¿ç”¨äº†è¿™ä¸ªåå­—çš„è·¯å¾„éƒ½éœ€è¦ä¿®æ”¹ã€‚æ‰€ä»¥ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯ï¼Œæˆ‘ä»¬ç»™è¿™ä¸ªæ–‡ä»¶å»ä¸€ä¸ªâ€œåˆ«åâ€ï¼Œä»¥åå°±ä»¥è¿™ä¸ªåˆ«åæ¥å¼•ç”¨è¿™ä¸ªæ–‡ä»¶ã€‚å…·ä½“åšæ³•æ˜¯ï¼Œé€‰ä¸­è¿™ä¸ªæ–‡ä»¶ï¼Œæ·»åŠ åˆ«åä¿¡æ¯ï¼š\nè¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨:/images/avatarç”¨åˆ°è¿™ä¸ªèµ„æºï¼Œæ— éœ€å…³å¿ƒå›¾ç‰‡çš„çœŸå®æ–‡ä»¶åã€‚\n","permalink":"https://lifeislife.cn/posts/qt%E6%B7%BB%E5%8A%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6qtcreator/","summary":"\u003cp\u003eQtCreatorâœæ–°å»ºæ–‡ä»¶æˆ–é¡¹ç›®âœQtâœQt Resource File\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210812102544.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210812102544.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e\n\u003cp\u003eç‚¹å‡»\u003ccode\u003eChoose\u003c/code\u003eï¼Œè®¾ç½®èµ„æºæ–‡ä»¶åå’Œè·¯å¾„ã€‚èµ„æºæ–‡ä»¶æ˜¯ä¸€ç³»åˆ—æ–‡ä»¶çš„é›†åˆï¼Œæ¯”å¦‚æˆ‘è¦å»ºç«‹ä¸€ä¸ªå›¾ç‰‡çš„èµ„æºæ–‡ä»¶ï¼Œæˆ‘å¯ä»¥è®¾ç½®\u003ccode\u003eimg\u003c/code\u003eä¸ºèµ„æºæ–‡ä»¶åï¼Œå°†æ¥æ‰€æœ‰å›¾ç‰‡ç±»èµ„æºï¼Œéƒ½æ”¾åˆ°è¿™ä¸ªèµ„æºæ–‡ä»¶é‡Œï¼ŒåŠ å…¥è¿˜æœ‰éŸ³é¢‘ç±»çš„æ–‡ä»¶ï¼Œæˆ‘å¯ä»¥æ–°å»ºä¸€ä¸ª\u003ccode\u003eaudio\u003c/code\u003eçš„èµ„æºæ–‡ä»¶ï¼Œä»¥åæ‰€æœ‰éŸ³é¢‘ç±»çš„æ–‡ä»¶éƒ½æ”¾åˆ°è¿™ä¸ªèµ„æºæ–‡ä»¶ä¸‹ã€‚\u003c/p\u003e","title":"Qt æ·»åŠ èµ„æºæ–‡ä»¶ï¼ˆQtCreatorï¼‰"},{"content":"å¯¹äºåœ¨å‰å°è¿è¡Œçš„ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Ctrl+Cæ¥ç»ˆæ­¢è¿è¡Œï¼Œä½†æ˜¯åœ¨åå°çš„ç¨‹åºå°±å¿…é¡»ç”¨killå‘½ä»¤æ¥ç»ˆæ­¢äº†ã€‚\nCommand -l ä¿¡å·ï¼Œè‹¥æœä¸åŠ ä¿¡å·çš„ç¼–å·å‚æ•°ï¼Œåˆ™ä½¿ç”¨â€œ-lâ€å‚æ•°ä¼šåˆ—å‡ºå…¨éƒ¨çš„ä¿¡å·åç§° -a å½“å¤„ç†å½“å‰è¿›ç¨‹æ—¶ï¼Œä¸é™åˆ¶å‘½ä»¤åå’Œè¿›ç¨‹å·çš„å¯¹åº”å…³ç³» -p æŒ‡å®š kill å‘½ä»¤åªæ‰“å°ç›¸å…³è¿›ç¨‹çš„è¿›ç¨‹å·ï¼Œè€Œä¸å‘é€ä»»ä½•ä¿¡å· -s æŒ‡å®šå‘é€ä¿¡å· -u æŒ‡å®šç”¨æˆ· Examples æŸ¥çœ‹æ‰€æœ‰ä¿¡å· âœ kill -l HUP INT QUIT ILL TRAP ABRT BUS FPE KILL USR1 SEGV USR2 PIPE ALRM TERM STKFLT CHLD CONT STOP TSTP TTIN TTOU URG XCPU XFSZ VTALRM PROF WINCH POLL PWR SYS å¸¸ç”¨ä¿¡å·\nHUP 1 ç»ˆç«¯æ–­çº¿ INT 2 ä¸­æ–­ï¼ˆåŒ Ctrl + Cï¼‰ QUIT 3 é€€å‡ºï¼ˆåŒ Ctrl + \\ï¼‰ TERM 15 ç»ˆæ­¢ KILL 9 å¼ºåˆ¶ç»ˆæ­¢ CONT 18 ç»§ç»­ï¼ˆä¸ STOP ç›¸åï¼Œ fg/bg å‘½ä»¤ï¼‰ STOP 19 æš‚åœï¼ˆåŒ Ctrl + Zï¼‰ ç”¨ ps æŸ¥æ‰¾è¿›ç¨‹ï¼Œç„¶åç”¨ kill æ€æ‰ ps -ef | grep \u0026#39;program\u0026#39; kill PID æ— æ¡ä»¶å½»åº•æ€æ­»è¿›ç¨‹ kill â€“9 PID æ€æ­»æŒ‡å®šç”¨æˆ·æ‰€æœ‰è¿›ç¨‹ kill -9 $(ps -ef | grep username) kill -u username ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-kill%E8%BF%99%E4%B8%AA%E8%BF%9B%E7%A8%8B/","summary":"\u003cp\u003eå¯¹äºåœ¨å‰å°è¿è¡Œçš„ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨\u003ccode\u003eCtrl+C\u003c/code\u003eæ¥ç»ˆæ­¢è¿è¡Œï¼Œä½†æ˜¯åœ¨åå°çš„ç¨‹åºå°±å¿…é¡»ç”¨\u003ccode\u003ekill\u003c/code\u003eå‘½ä»¤æ¥ç»ˆæ­¢äº†ã€‚\u003c/p\u003e\n\u003ch2 id=\"command\"\u003eCommand\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-l  ä¿¡å·ï¼Œè‹¥æœä¸åŠ ä¿¡å·çš„ç¼–å·å‚æ•°ï¼Œåˆ™ä½¿ç”¨â€œ-lâ€å‚æ•°ä¼šåˆ—å‡ºå…¨éƒ¨çš„ä¿¡å·åç§°\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-a  å½“å¤„ç†å½“å‰è¿›ç¨‹æ—¶ï¼Œä¸é™åˆ¶å‘½ä»¤åå’Œè¿›ç¨‹å·çš„å¯¹åº”å…³ç³»\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-p  æŒ‡å®š kill å‘½ä»¤åªæ‰“å°ç›¸å…³è¿›ç¨‹çš„è¿›ç¨‹å·ï¼Œè€Œä¸å‘é€ä»»ä½•ä¿¡å·\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-s  æŒ‡å®šå‘é€ä¿¡å·\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-u  æŒ‡å®šç”¨æˆ·\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"examples\"\u003eExamples\u003c/h2\u003e\n\u003ch3 id=\"æŸ¥çœ‹æ‰€æœ‰ä¿¡å·\"\u003eæŸ¥çœ‹æ‰€æœ‰ä¿¡å·\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâœ   kill -l\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eHUP INT QUIT ILL TRAP ABRT BUS FPE KILL USR1 \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eSEGV USR2 PIPE ALRM TERM STKFLT CHLD CONT STOP \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eTSTP TTIN TTOU URG XCPU XFSZ VTALRM PROF WINCH POLL PWR SYS\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå¸¸ç”¨ä¿¡å·\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-kill è¿™ä¸ªè¿›ç¨‹"},{"content":"å…³äºè¿›ç¨‹é—´é€šä¿¡çš„æ¦‚è¿°å¯ä»¥æŸ¥çœ‹Linux æ“ä½œç³»ç»Ÿ - è¿›ç¨‹é—´é€šä¿¡ï¼Œä»£ç åŒæ­¥åœ¨è¿™é‡Œã€‚\næœ¬æ–‡é€šè¿‡å®ä¾‹ä»‹ç»é€šè¿‡å…±äº«å†…å­˜å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚\nç®€ä»‹ ä¿¡å·å°±åƒå®é™…ç”Ÿäº§è¿‡ç¨‹ä¸­çš„åº”æ€¥é¢„æ¡ˆï¼Œå‘ç”Ÿäº†æŸä¸ªå¼‚å¸¸å°±ä¼šå¯åŠ¨ç‰¹å®šçš„åº”æ€¥é¢„æ¡ˆï¼Œä¸ºäº†å“åº”å„ç±»å¼‚å¸¸æƒ…å†µï¼Œæ‰€ä»¥å°±å®šä¹‰äº†å¾ˆå¤šä¸ªä¿¡å·ï¼Œä¿¡å·çš„åç§°æ˜¯åœ¨å¤´æ–‡ä»¶signal.hä¸­å®šä¹‰çš„ï¼Œä¿¡å·éƒ½ä»¥SIGå¼€å¤´ï¼Œå¸¸ç”¨çš„ä¿¡å·å¹¶ä¸å¤šï¼Œå¸¸ç”¨çš„ä¿¡å·å¦‚ä¸‹ï¼š\nSIGALRM #æ—¶é’Ÿå®šæ—¶ä¿¡å·, è®¡ç®—çš„æ˜¯å®é™…çš„æ—¶é—´æˆ–æ—¶é’Ÿæ—¶é—´ SIGHUP #ç»ˆç«¯çš„æŒ‚æ–­æˆ–è¿›ç¨‹æ­»äº¡ SIGINT #æ¥è‡ªé”®ç›˜çš„ä¸­æ–­ä¿¡å· SIGKILL #ç”¨æ¥ç«‹å³ç»“æŸç¨‹åºçš„è¿è¡Œ. æœ¬ä¿¡å·ä¸èƒ½è¢«é˜»å¡ã€å¤„ç†å’Œå¿½ç•¥ã€‚ SIGPIPE #ç®¡é“ç ´è£‚ SIGTERM #ç¨‹åºç»“æŸ(terminate)ä¿¡å·, ä¸SIGKILLä¸åŒçš„æ˜¯è¯¥ä¿¡å·å¯ä»¥è¢«é˜»å¡å’Œå¤„ç† SIGUSR1,SIGUSR2 #ç•™ç»™ç”¨æˆ·ä½¿ç”¨ å®ä¾‹ #include \u0026lt;signal.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; void signalHandler(int sig) { printf(\u0026#34;\\nOps! - I got signal %d\\n\u0026#34;, sig); // æ¢å¤ç»ˆç«¯ä¸­æ–­ä¿¡å· SIGINT çš„é»˜è®¤è¡Œä¸º (void)signal(SIGINT, SIG_DFL); } int main() { // æ”¹å˜ç»ˆç«¯ä¸­æ–­ä¿¡å· SIGINT çš„é»˜è®¤è¡Œä¸ºï¼Œä½¿ä¹‹æ‰§è¡Œ ouch å‡½æ•° // è€Œä¸æ˜¯ç»ˆæ­¢ç¨‹åºçš„æ‰§è¡Œ (void)signal(SIGINT, signalHandler); while (1) { printf(\u0026#34;Hello World!\\n\u0026#34;); sleep(1); } return 0; } æˆ‘ä»¬å¯ä»¥ç”¨signal()å‡½æ•°å¤„ç†æŒ‡å®šçš„ä¿¡å·ï¼Œä¸»è¦é€šè¿‡å¿½ç•¥å’Œæ¢å¤å…¶é»˜è®¤è¡Œä¸ºæ¥å·¥ä½œã€‚signal() å‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š\nvoid (*signal(int sig, void (*func)(int)))(int); è¿™æ˜¯ä¸€ä¸ªç›¸å½“å¤æ‚çš„å£°æ˜ï¼Œè€å¿ƒç‚¹çœ‹å¯ä»¥çŸ¥é“ signal æ˜¯ä¸€ä¸ªå¸¦æœ‰sigå’Œfuncä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œfuncæ˜¯ä¸€ä¸ªç±»å‹ä¸ºvoid (*)(int)çš„å‡½æ•°æŒ‡é’ˆã€‚è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªä¸funcç›¸åŒç±»å‹çš„æŒ‡é’ˆï¼ŒæŒ‡å‘å…ˆå‰æŒ‡å®šä¿¡å·å¤„ç†å‡½æ•°çš„å‡½æ•°æŒ‡é’ˆã€‚å‡†å¤‡æ•è·çš„ä¿¡å·çš„å‚æ•°ç”±sigç»™å‡ºï¼Œæ¥æ”¶åˆ°çš„æŒ‡å®šä¿¡å·åè¦è°ƒç”¨çš„å‡½æ•°ç”±å‚æ•°funcç»™å‡ºã€‚å…¶å®è¿™ä¸ªå‡½æ•°çš„ä½¿ç”¨æ˜¯ç›¸å½“ç®€å•çš„ï¼Œé€šè¿‡ä¸‹é¢çš„ä¾‹å­å°±å¯ä»¥çŸ¥é“ã€‚æ³¨æ„ä¿¡å·å¤„ç†å‡½æ•°çš„åŸå‹å¿…é¡»ä¸ºvoid funcï¼ˆintï¼‰ï¼Œæˆ–è€…æ˜¯ä¸‹é¢çš„ç‰¹æ®Šå€¼ï¼š\nSIG_IGN : å¿½ç•¥ä¿¡å· SIG_DFL : æ¢å¤ä¿¡å·çš„é»˜è®¤è¡Œä¸º æˆ‘ä»¬ç¨‹åºçš„ç›®çš„æ˜¯æƒ³è¦æ•è·é”®ç›˜è¾“å…¥Ctrl+Cï¼Œè¿™ä¸ªä¸­æ–­ã€‚é€šè¿‡è¡¨é‡Œå¯ä»¥æŸ¥åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨SIGINTè¿™ä¸ªä¿¡å·ï¼Œå½“æˆ‘ä»¬çš„ç¨‹åºå‡ºç°SIGINTä¿¡å·æ—¶ï¼Œè®©ç¨‹åºæ¥ä¸‹æ¥å¹²å•¥å‘¢ï¼Ÿæ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„Ctrl+Cä¼šä¸­æ–­å½“å‰è¿è¡Œçš„ç¨‹åºï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬åšäº†ä¸€äº›æ›´æ”¹ï¼Œæ›´æ”¹çš„å†…å®¹åœ¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„signalHandlerä¸­ã€‚æˆ‘ä»¬è®©ç¨‹åºè¾“å‡ºä¸€è¡Œå­—ç¬¦ä¸²åŠ ä¸Šä¿¡å·å€¼ã€‚ç„¶åå†æŠŠä¿¡å·çš„è¡Œä¸ºæ¢å¤åŸæ ·ã€‚æ­¤æ—¶æˆ‘ä»¬è¿è¡Œç¨‹åºå¯ä»¥å¾—åˆ°å¦‚ä¸‹\n\u003c!DOCTYPE html\u003e Responsive Image åœ¨æˆ‘ä»¬ç¬¬ä¸€è¾“å…¥Ctrl+Cæ—¶ï¼Œç¨‹åºæ²¡æœ‰ä¸­æ–­ï¼Œè€Œæ˜¯è°ƒç”¨äº†signalHanlderå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬æ›´æ”¹äº†ä¿¡å·çš„è¡Œä¸ºã€‚ä½†æ˜¯ç¬¬äºŒæ¬¡è¾“å…¥Ctrl+Cæ—¶ï¼Œç¨‹åºä¸­æ–­äº†ã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1ipc%E4%B9%8B%E4%BF%A1%E5%8F%B7signal/","summary":"\u003cp\u003eå…³äºè¿›ç¨‹é—´é€šä¿¡çš„æ¦‚è¿°å¯ä»¥æŸ¥çœ‹\u003ca href=\"https://dunky-z.github.io/2021/08/10/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/\"\u003eLinux æ“ä½œç³»ç»Ÿ - è¿›ç¨‹é—´é€šä¿¡\u003c/a\u003eï¼Œ\u003ca href=\"https://github.com/Dunky-Z/learning-linux/tree/main/IPC/SharedMemory\"\u003eä»£ç åŒæ­¥åœ¨è¿™é‡Œ\u003c/a\u003eã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬æ–‡é€šè¿‡å®ä¾‹ä»‹ç»é€šè¿‡å…±äº«å†…å­˜å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚\u003c/p\u003e\n\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eä¿¡å·å°±åƒå®é™…ç”Ÿäº§è¿‡ç¨‹ä¸­çš„åº”æ€¥é¢„æ¡ˆï¼Œå‘ç”Ÿäº†æŸä¸ªå¼‚å¸¸å°±ä¼šå¯åŠ¨ç‰¹å®šçš„åº”æ€¥é¢„æ¡ˆï¼Œä¸ºäº†å“åº”å„ç±»å¼‚å¸¸æƒ…å†µï¼Œæ‰€ä»¥å°±å®šä¹‰äº†å¾ˆå¤šä¸ªä¿¡å·ï¼Œä¿¡å·çš„åç§°æ˜¯åœ¨å¤´æ–‡ä»¶\u003ccode\u003esignal.h\u003c/code\u003eä¸­å®šä¹‰çš„ï¼Œä¿¡å·éƒ½ä»¥\u003ccode\u003eSIG\u003c/code\u003eå¼€å¤´ï¼Œå¸¸ç”¨çš„ä¿¡å·å¹¶ä¸å¤šï¼Œå¸¸ç”¨çš„ä¿¡å·å¦‚ä¸‹ï¼š\u003c/p\u003e","title":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹ä¿¡å·ï¼ˆSignalï¼‰"},{"content":"å…³äºè¿›ç¨‹é—´é€šä¿¡çš„æ¦‚è¿°å¯ä»¥æŸ¥çœ‹Linux æ“ä½œç³»ç»Ÿ - è¿›ç¨‹é—´é€šä¿¡ï¼Œä»£ç åŒæ­¥åœ¨è¿™é‡Œã€‚\næœ¬æ–‡é€šè¿‡å®ä¾‹ä»‹ç»é€šè¿‡å…±äº«å†…å­˜å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚\nshmget(å¾—åˆ°ä¸€ä¸ªå…±äº«å†…å­˜æ ‡è¯†ç¬¦æˆ–åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡) æˆ‘ä»¬å¯ä»¥é€šè¿‡shmgetå‡½æ•°åˆ›å»ºæˆ–æ‰“å¼€å…±äº«å†…å­˜ï¼Œé€šè¿‡å‡½æ•°ç­¾å\n//key_t key: å”¯ä¸€å®šä½ä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡ //size_t size: å…±äº«å†…å­˜å¤§å° //int flag: å¦‚æœæ˜¯ IPC_CREAT è¡¨ç¤ºåˆ›å»ºæ–°çš„å…±äº«å†…å­˜ç©ºé—´ int shmget(key_t key, size_t size, int flag); ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…±äº«å†…å­˜çš„å”¯ä¸€æ ‡è¯†ï¼Œæ˜¯éœ€è¦æˆ‘ä»¬æŒ‡å®šçš„ã€‚é‚£ä¹ˆå¦‚ä½•æŒ‡å®škeyå‘¢ï¼Ÿå¦‚ä½•ä¿è¯å”¯ä¸€æ€§å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ï¼Œftokä¼šæ ¹æ®è¿™ä¸ªæ–‡ä»¶çš„ inodeï¼Œç”Ÿæˆä¸€ä¸ªè¿‘ä¹å”¯ä¸€çš„ keyã€‚åªè¦åœ¨è¿™ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸è¦è¢«åˆ é™¤å°±å¯ä»¥äº†ã€‚åªè¦ä¸åˆ é™¤ï¼Œæ— è®ºä»€ä¹ˆæ—¶åˆ»ï¼Œå†è°ƒç”¨ ftokï¼Œä¹Ÿä¼šå¾—åˆ°åŒæ ·çš„keyã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”³è¯·çš„ç©ºé—´å¤§å°ï¼Œæˆ‘ä»¬å°±ç”³è¯· 1024Bã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æƒé™æ ‡è¯†ï¼ŒIPC_CREATè¡¨ç¤ºåˆ›å»ºå…±äº«å†…å­˜ï¼Œ0644è¡¨ç¤ºå…è®¸ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºçš„å…±äº«å†…å­˜è¢«å†…å­˜åˆ›å»ºè€…æ‰€æ‹¥æœ‰çš„è¿›ç¨‹å‘å…±äº«å†…å­˜è¯»å–å’Œå†™å…¥æ•°æ®ï¼ŒåŒæ—¶å…¶ä»–ç”¨æˆ·åˆ›å»ºçš„è¿›ç¨‹åªèƒ½è¯»å–å…±äº«å†…å­˜ã€‚ shmat(æŠŠå…±äº«å†…å­˜åŒºå¯¹è±¡æ˜ å°„åˆ°è°ƒç”¨è¿›ç¨‹çš„åœ°å€ç©ºé—´) ç¬¬ä¸€æ¬¡åˆ›å»ºå®Œå…±äº«å†…å­˜æ—¶ï¼Œå®ƒè¿˜ä¸èƒ½è¢«ä»»ä½•è¿›ç¨‹è®¿é—®ï¼Œshmat()å‡½æ•°çš„ä½œç”¨å°±æ˜¯ç”¨æ¥å¯åŠ¨å¯¹è¯¥å…±äº«å†…å­˜çš„è®¿é—®ï¼Œå¹¶æŠŠå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚å®ƒçš„ç­¾åå¦‚ä¸‹ï¼š\nvoid *shmat(int shm_id, const void *shm_addr, int shmflg); ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ä¸Šæ–‡äº§ç”Ÿçš„å”¯ä¸€æ ‡è¯†ã€‚ ç¬¬äºŒä¸ªå‚æ•°ï¼Œshm_addræŒ‡å®šå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹ä¸­çš„åœ°å€ä½ç½®ï¼Œé€šå¸¸ä¸ºç©ºï¼Œè¡¨ç¤ºè®©ç³»ç»Ÿæ¥é€‰æ‹©å…±äº«å†…å­˜çš„åœ°å€ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œshm_flgæ˜¯ä¸€ç»„æ ‡å¿—ä½ï¼Œé€šå¸¸ä¸º 0ã€‚ è°ƒç”¨æˆåŠŸæ—¶è¿”å›ä¸€ä¸ªæŒ‡å‘å…±äº«å†…å­˜ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æŒ‡é’ˆï¼Œå¦‚æœè°ƒç”¨å¤±è´¥è¿”å›-1. (void *) - 1æŠŠ-1è½¬æ¢ä¸ºæŒ‡é’ˆ0xFFFFFFFFï¼Œæœ‰æ—¶ä¹Ÿä¼šç”¨åˆ°(void*)0ï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºæŒ‡é’ˆã€‚\nshmdt(æ–­å¼€å…±äº«å†…å­˜è¿æ¥) ä¸ shmat å‡½æ•°ç›¸åï¼Œæ˜¯ç”¨æ¥æ–­å¼€ä¸å…±äº«å†…å­˜é™„åŠ ç‚¹çš„åœ°å€ï¼Œç¦æ­¢æœ¬è¿›ç¨‹è®¿é—®æ­¤ç‰‡å…±äº«å†…å­˜\nå‡½æ•°ç­¾åå¦‚ä¸‹ï¼š\nint shmdt(const void *shmaddr) å‚æ•°ä¸€shmaddrä¸ºè¿æ¥å…±äº«å†…å­˜çš„èµ·å§‹åœ°å€ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬å‡½æ•°è°ƒç”¨å¹¶ä¸åˆ é™¤æ‰€æŒ‡å®šçš„å…±äº«å†…å­˜åŒºï¼Œè€Œåªæ˜¯å°†å…ˆå‰ç”¨ shmat å‡½æ•°è¿æ¥ï¼ˆattachï¼‰å¥½çš„å…±äº«å†…å­˜è„±ç¦»ï¼ˆdetachï¼‰ç›®å‰çš„è¿›ç¨‹ã€‚åˆ é™¤å…±äº«å†…å­˜å°±éœ€è¦ä¸‹é¢çš„è¿™ä¸ªå‡½æ•°ã€‚\nshmctl(å…±äº«å†…å­˜ç®¡ç†) å®Œæˆå¯¹å…±äº«å†…å­˜çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬æ”¹å˜çŠ¶æ€ï¼Œåˆ é™¤å…±äº«å†…å­˜ç­‰ã€‚\nå‡½æ•°ç­¾åå¦‚ä¸‹ï¼š\nint shmctl(int shmid, int cmd, struct shmid_ds *buf) shmidå…±äº«å†…å­˜å”¯ä¸€æ ‡è¯†ç¬¦ cmdæ‰§è¡Œçš„æ“ä½œï¼ŒåŒ…æ‹¬å¦‚ä¸‹ IPC_STATï¼šå¾—åˆ°å…±äº«å†…å­˜çš„çŠ¶æ€ï¼ŒæŠŠå…±äº«å†…å­˜çš„shmid_dsç»“æ„å¤åˆ¶åˆ°bufä¸­ IPC_SETï¼šæ”¹å˜å…±äº«å†…å­˜çš„çŠ¶æ€ï¼ŒæŠŠbufæ‰€æŒ‡çš„shmid_dsç»“æ„ä¸­çš„uidã€gidã€modeå¤åˆ¶åˆ°å…±äº«å†…å­˜çš„shmid_dsç»“æ„å†… IPC_RMIDï¼šåˆ é™¤è¿™ç‰‡å…±äº«å†…å­˜ bufå…±äº«å†…å­˜ç®¡ç†ç»“æ„ä½“ã€‚å…·ä½“è¯´æ˜å‚è§å…±äº«å†…å­˜å†…æ ¸ç»“æ„å®šä¹‰éƒ¨åˆ† //server.c #include \u0026lt;sys/types.h\u0026gt; #include \u0026lt;sys/ipc.h\u0026gt; #include \u0026lt;sys/shm.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; int main(void) { int shmid; key_t shmkey; char *shmptr; shmkey = ftok(\u0026#34;./client.c\u0026#34;, 0); // åˆ›å»ºæˆ–æ‰“å¼€å†…å­˜å…±äº«åŒºåŸŸ shmid = shmget(shmkey, 1024, 0666 | IPC_CREAT); if (shmid == -1) { printf(\u0026#34;shmget error!\\n\u0026#34;); exit(1); } //å°†å…±äº«å†…å­˜æ˜ å°„åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ä¸­ï¼Œ //ä¹‹åç›´æ¥å¯¹è¿›ç¨‹ä¸­çš„åœ°å€ addr æ“ä½œå°±æ˜¯å¯¹å…±äº«å†…å­˜æ“ä½œ shmptr = (char *)shmat(shmid, NULL, 0); if (shmptr == (void *)-1) { printf(\u0026#34;shmat error!\\n\u0026#34;); exit(1); } while (1) { // æŠŠç”¨æˆ·çš„è¾“å…¥å­˜åˆ°å…±äº«å†…å­˜åŒºåŸŸä¸­ printf(\u0026#34;input:\u0026#34;); scanf(\u0026#34;%s\u0026#34;, shmptr); } exit(0); } //client.c #include \u0026lt;sys/types.h\u0026gt; #include \u0026lt;sys/ipc.h\u0026gt; #include \u0026lt;sys/shm.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; int main(void) { int shmid; char *shmptr; key_t shmkey; shmkey = ftok(\u0026#34;./client.c\u0026#34;, 0); // åˆ›å»ºæˆ–æ‰“å¼€å†…å­˜å…±äº«åŒºåŸŸ shmid = shmget(shmkey, 1024, 0666 | IPC_CREAT); if (shmid == -1) { printf(\u0026#34;shmget error!\\n\u0026#34;); exit(1); } //å°†å…±äº«å†…å­˜æ˜ å°„åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ä¸­ï¼Œ //ä¹‹åç›´æ¥å¯¹è¿›ç¨‹ä¸­çš„åœ°å€ addr æ“ä½œå°±æ˜¯å¯¹å…±äº«å†…å­˜æ“ä½œ shmptr = (char *)shmat(shmid, NULL, 0); if (shmptr == (void *)-1) { fprintf(stderr, \u0026#34;shmat error!\\n\u0026#34;); exit(1); } while (1) { // æ¯éš” 3 ç§’ä»å…±äº«å†…å­˜ä¸­å–ä¸€æ¬¡æ•°æ®å¹¶æ‰“å°åˆ°æ§åˆ¶å° printf(\u0026#34;string:%s\\n\u0026#34;, shmptr); sleep(3); } exit(0); } åœ¨ä¸¤ä¸ªç»ˆç«¯åˆ†åˆ«è¿è¡Œclientå’Œserverï¼Œclientä¼šæ¯ä¸‰ç§’åœ¨ç»ˆç«¯æ‰“å°å‡ºserverè¾“å…¥çš„å†…å®¹ã€‚ \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image å¦‚ä½•æ‰‹åŠ¨åˆ é™¤å…±äº«å†…å­˜ï¼Ÿ åˆ—å‡ºæ‰€æœ‰çš„å…±äº«å†…å­˜æ®µï¼š\nipcs -m ------------ å…±äº«å†…å­˜æ®µ -------------- é”® shmid æ‹¥æœ‰è€… æƒé™ å­—èŠ‚ è¿æ¥æ•° çŠ¶æ€ 0x00000000 2 dominic 600 16384 1 ç›®æ ‡ 0x00000000 753668 dominic 606 10089696 2 ç›®æ ‡ 0x00000000 622597 dominic 600 4194304 2 ç›®æ ‡ 0x00000000 753670 dominic 606 10089696 2 ç›®æ ‡ 0x00000000 688135 dominic 600 899976 2 ç›®æ ‡ 0x00000000 8 dominic 600 524288 2 ç›®æ ‡ 0x00000000 9 dominic 600 524288 2 ç›®æ ‡ 0x00000000 753674 dominic 600 7127040 2 ç›®æ ‡ 0x0000006f 720918 dominic 666 1024 0 æˆ‘ä»¬å‘ç°æœ€åä¸€ä¸ªé”®å€¼ä¸º0x0000006f = 111çš„å…±äº«å†…å­˜æ®µï¼Œå°±æ˜¯æˆ‘ä»¬åˆ›å»ºçš„å…±äº«å†…å­˜æ®µã€‚ åˆ é™¤æŒ‡å®šå…±äº«å†…å­˜æ®µï¼š\nipcrm -m 720918 æˆ–è€… ipcrm -M 0x0000006f ä¿¡å·é‡å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„æ“ä½œï¼Œå‘½ä»¤ç±»ä¼¼ï¼Œåªæ˜¯å‚æ•°ä¸åŒã€‚ æŸ¥çœ‹å‘½ä»¤ï¼š\nipcs [-m|-q|-s] -m è¾“å‡ºæœ‰å…³å…±äº«å†…å­˜ (shared memory) çš„ä¿¡æ¯ -q è¾“å‡ºæœ‰å…³ä¿¡æ¯é˜Ÿåˆ— (message queue) çš„ä¿¡æ¯ -s è¾“å‡ºæœ‰å…³â€œä¿¡å·é‡â€(semaphore) çš„ä¿¡æ¯ åˆ é™¤å‘½ä»¤\nipcrm [ -M key | -m id | -Q key | -q id | -S key | -s id ] -Mç”¨ shmkey åˆ é™¤å…±äº«å†…å­˜ -mç”¨ shmid åˆ é™¤å…±äº«å†…å­˜ -Qç”¨ msgkey åˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— -qç”¨ msgid åˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— -Sç”¨ semkey åˆ é™¤ä¿¡å·é‡ -sç”¨ semid åˆ é™¤ä¿¡å·é‡ è¶…è¿‡å…±äº«å†…å­˜çš„å¤§å°é™åˆ¶ å…±äº«å†…å­˜çš„æ€»ä½“å¤§å°æ˜¯æœ‰é™åˆ¶çš„ï¼Œè¿™ä¸ªå¤§å°é€šè¿‡ SHMMAX å‚æ•°æ¥å®šä¹‰ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®å®š SHMMAX çš„å€¼ï¼š\ncat /proc/sys/kernel/shmmax å¦‚æœæœºå™¨ä¸Šåˆ›å»ºçš„å…±äº«å†…å­˜çš„æ€»å…±å¤§å°è¶…å‡ºäº†è¿™ä¸ªé™åˆ¶ï¼Œåœ¨ç¨‹åºä¸­ä½¿ç”¨æ ‡å‡†é”™è¯¯perrorå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹çš„ä¿¡æ¯ï¼š\nunable to attach to shared memory 1ã€è®¾ç½® SHMMAX\nSHMMAX çš„é»˜è®¤å€¼æ˜¯ 32MB ã€‚ä¸€èˆ¬ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¹‹ä¸€ç§å°† SHMMAX å‚æ•°è®¾ä¸º 2GB ï¼š é€šè¿‡ç›´æ¥æ›´æ”¹ /proc æ–‡ä»¶ç³»ç»Ÿï¼Œä½ ä¸éœ€é‡æ–°å¯åŠ¨æœºå™¨å°±å¯ä»¥æ”¹å˜ SHMMAX çš„é»˜è®¤è®¾ç½®ã€‚æˆ‘ä½¿ç”¨çš„æ–¹æ³•æ˜¯å°†ä»¥ä¸‹å‘½ä»¤æ”¾å…¥ /\u0026gt;etc/rc.local å¯åŠ¨æ–‡ä»¶ä¸­ï¼š\necho \u0026#34;2147483648\u0026#34; \u0026gt; /proc/sys/kernel/shmmax æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ sysctl å‘½ä»¤æ¥æ›´æ”¹ SHMMAX çš„å€¼ï¼š\nsysctl -w kernel.shmmax=2147483648 æœ€åï¼Œé€šè¿‡å°†è¯¥å†…æ ¸å‚æ•°æ’å…¥åˆ°/etc/sysctl.conf å¯åŠ¨æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿è¿™ç§æ›´æ”¹æ°¸ä¹…æœ‰æ•ˆï¼š\necho \u0026#34;kernel.shmmax=2147483648\u0026#34; \u0026gt;\u0026gt; /etc/sysctl.conf 2ã€è®¾ç½® SHMMNI\næˆ‘ä»¬ç°åœ¨æ¥çœ‹ SHMMNI å‚æ•°ã€‚è¿™ä¸ªå†…æ ¸å‚æ•°ç”¨äºè®¾ç½®ç³»ç»ŸèŒƒå›´å†…å…±äº«å†…å­˜æ®µçš„æœ€å¤§æ•°é‡ã€‚è¯¥å‚æ•°çš„é»˜è®¤å€¼æ˜¯ 4096 ã€‚è¿™ä¸€æ•°å€¼å·²ç»è¶³å¤Ÿï¼Œé€šå¸¸ä¸éœ€è¦æ›´æ”¹ã€‚æ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®å®š SHMMNI çš„å€¼ï¼š\ncat /proc/sys/kernel/shmmni 3ã€è®¾ç½® SHMALL\næœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ SHMALL å…±äº«å†…å­˜å†…æ ¸å‚æ•°ã€‚è¯¥å‚æ•°æ§åˆ¶ç€ç³»ç»Ÿä¸€æ¬¡å¯ä»¥ä½¿ç”¨çš„å…±äº«å†…å­˜æ€»é‡ï¼ˆä»¥é¡µä¸ºå•ä½ï¼‰ã€‚ç®€è¨€ä¹‹ï¼Œè¯¥å‚æ•°çš„å€¼å§‹ç»ˆåº”è¯¥è‡³å°‘ä¸ºï¼šceil(SHMMAX/PAGE_SIZE)\nSHMALL çš„é»˜è®¤å¤§å°ä¸º 2097152 ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒæŸ¥è¯¢ï¼š\ncat /proc/sys/kernel/shmall SHMALL çš„é»˜è®¤è®¾ç½®å¯¹äºæˆ‘ä»¬æ¥è¯´åº”è¯¥è¶³å¤Ÿä½¿ç”¨ã€‚æ³¨æ„ï¼šåœ¨ i386 å¹³å°ä¸Š Red Hat Linux çš„ é¡µé¢å¤§å° ä¸º 4096 å­—èŠ‚ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ bigpages ï¼Œå®ƒæ”¯æŒé…ç½®æ›´å¤§çš„å†…å­˜é¡µé¢å°ºå¯¸ã€‚\nå¤šæ¬¡è¿›è¡Œ shmat æ“ä½œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ ä¸€ä¸ªè¿›ç¨‹æ˜¯å¯ä»¥å¯¹åŒä¸€ä¸ªå…±äº«å†…å­˜å¤šæ¬¡ shmat è¿›è¡ŒæŒ‚è½½çš„ï¼Œç‰©ç†å†…å­˜æ˜¯æŒ‡å‘åŒä¸€å—ï¼Œå¦‚æœ shmaddr ä¸º NULLï¼Œåˆ™æ¯æ¬¡è¿”å›çš„çº¿æ€§åœ°å€ç©ºé—´éƒ½ä¸åŒã€‚è€Œä¸”æŒ‡å‘è¿™å—å…±äº«å†…å­˜çš„å¼•ç”¨è®¡æ•°ä¼šå¢åŠ ã€‚ä¹Ÿå°±æ˜¯è¿›ç¨‹å¤šå—çº¿æ€§ç©ºé—´ä¼šæŒ‡å‘åŒä¸€å—ç‰©ç†åœ°å€ã€‚è¿™æ ·ï¼Œå¦‚æœä¹‹å‰æŒ‚è½½è¿‡è¿™å—å…±äº«å†…å­˜çš„è¿›ç¨‹çš„çº¿æ€§åœ°å€æ²¡æœ‰è¢«shmdtæ‰ï¼Œå³ç”³è¯·çš„çº¿æ€§åœ°å€éƒ½æ²¡æœ‰é‡Šæ”¾ï¼Œå°±ä¼šä¸€ç›´æ¶ˆè€—è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šæœ€åå¯¼è‡´è¿›ç¨‹çº¿æ€§ç©ºé—´è¢«ä½¿ç”¨å®Œè€Œå¯¼è‡´ä¸‹æ¬¡ shmat æˆ–è€…å…¶ä»–æ“ä½œå¤±è´¥ã€‚\nshmget åˆ›å»ºå…±äº«å†…å­˜ï¼Œå½“ key ç›¸åŒæ—¶ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºé”™ï¼Ÿ å½“åˆ›å»ºä¸€ä¸ªæ–°çš„å…±äº«å†…å­˜åŒºæ—¶ï¼Œsize çš„å€¼å¿…é¡»å¤§äº 0ï¼›å¦‚æœæ˜¯è®¿é—®ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å†…å­˜å…±äº«åŒºï¼Œåˆ™ç½® size ä¸º 0ã€‚\nå·²ç»åˆ›å»ºçš„å…±äº«å†…å­˜çš„å¤§å°æ˜¯å¯ä»¥è°ƒæ•´çš„ï¼Œä½†æ˜¯å·²ç»åˆ›å»ºçš„å…±äº«å†…å­˜çš„å¤§å°åªèƒ½è°ƒå°ï¼Œä¸èƒ½è°ƒå¤§\nå½“å¤šä¸ªè¿›ç¨‹éƒ½èƒ½åˆ›å»ºå…±äº«å†…å­˜çš„æ—¶å€™ï¼Œå¦‚æœ key å‡ºç°ç›¸åŒçš„æƒ…å†µï¼Œå¹¶ä¸”ä¸€ä¸ªè¿›ç¨‹éœ€è¦åˆ›å»ºçš„å…±äº«å†…å­˜çš„å¤§å°è¦æ¯”å¦å¤–ä¸€ä¸ªè¿›ç¨‹è¦åˆ›å»ºçš„å…±äº«å†…å­˜å°ï¼Œå…±äº«å†…å­˜å¤§çš„è¿›ç¨‹å…ˆåˆ›å»ºå…±äº«å†…å­˜ï¼Œå…±äº«å†…å­˜å°çš„è¿›ç¨‹ååˆ›å»ºå…±äº«å†…å­˜ï¼Œå°å…±äº«å†…å­˜çš„è¿›ç¨‹å°±ä¼šè·å–åˆ°å¤§çš„å…±äº«å†…å­˜è¿›ç¨‹çš„å…±äº«å†…å­˜ï¼Œå¹¶ä¿®æ”¹å…¶å…±äº«å†…å­˜çš„å¤§å°å’Œå†…å®¹ï¼Œä»è€Œå¯èƒ½å¯¼è‡´å¤§çš„å…±äº«å†…å­˜è¿›ç¨‹å´©æºƒã€‚\nftok æ˜¯å¦ä¸€å®šä¼šäº§ç”Ÿå”¯ä¸€çš„ key å€¼ï¼Ÿ ftok åŸå‹å¦‚ä¸‹ï¼š\nkey_t ftok(char * pathname, int proj_id) pathnameå°±æ—¶ä½ æŒ‡å®šçš„æ–‡ä»¶åï¼Œproj_idæ˜¯å­åºå·ã€‚åœ¨ä¸€èˆ¬çš„ UNIX å®ç°ä¸­ï¼Œæ˜¯å°†æ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹å·å–å‡ºï¼Œå‰é¢åŠ ä¸Šå­åºå·å¾—åˆ°key_tçš„è¿”å›å€¼ã€‚å¦‚æŒ‡å®šæ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹å·ä¸º 65538ï¼Œæ¢ç®—æˆ 16 è¿›åˆ¶ä¸º0Ã—010002ï¼Œè€Œä½ æŒ‡å®šçš„proj_idå€¼ä¸º38ï¼Œæ¢ç®—æˆ 16 è¿›åˆ¶ä¸º0Ã—26ï¼Œåˆ™æœ€åçš„key_tè¿”å›å€¼ä¸º0Ã—26010002ã€‚\n","permalink":"https://lifeislife.cn/posts/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1ipc%E4%B9%8B%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98sharedmemory/","summary":"\u003cp\u003eå…³äºè¿›ç¨‹é—´é€šä¿¡çš„æ¦‚è¿°å¯ä»¥æŸ¥çœ‹\u003ca href=\"https://dunky-z.github.io/2021/08/10/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/\"\u003eLinux æ“ä½œç³»ç»Ÿ - è¿›ç¨‹é—´é€šä¿¡\u003c/a\u003eï¼Œ\u003ca href=\"https://github.com/Dunky-Z/learning-linux/tree/main/IPC/SharedMemory\"\u003eä»£ç åŒæ­¥åœ¨è¿™é‡Œ\u003c/a\u003eã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬æ–‡é€šè¿‡å®ä¾‹ä»‹ç»é€šè¿‡å…±äº«å†…å­˜å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚\u003c/p\u003e\n\u003ch2 id=\"shmgetå¾—åˆ°ä¸€ä¸ªå…±äº«å†…å­˜æ ‡è¯†ç¬¦æˆ–åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡\"\u003eshmget(å¾—åˆ°ä¸€ä¸ªå…±äº«å†…å­˜æ ‡è¯†ç¬¦æˆ–åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡)\u003c/h2\u003e\n\u003cp\u003eæˆ‘ä»¬å¯ä»¥é€šè¿‡\u003ccode\u003eshmget\u003c/code\u003eå‡½æ•°åˆ›å»ºæˆ–æ‰“å¼€å…±äº«å†…å­˜ï¼Œé€šè¿‡å‡½æ•°ç­¾å\u003c/p\u003e","title":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹å…±äº«å†…å­˜ (SharedMemory)"},{"content":"ç°åœ¨æˆ‘ä»¬æœ‰solution.c,solution.hä¸¤ä¸ªæ–‡ä»¶ï¼Œä»–ä»¬å®ç°äº†æŸä¸€ä¸ªåŠŸèƒ½ï¼Œè‡ªæˆä¸€ä¸ªæ¨¡å—ã€‚åœ¨å…¶ä»–é¡¹ç›®ä¸­ä¹Ÿå¯å¤ç”¨ã€‚æˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒåšæˆåº“æ–‡ä»¶ã€‚arå‘½ä»¤å°±å¯ä»¥å°†é”å“¥æ–‡ä»¶æ•´åˆæˆä¸€ä¸ªåº“æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä»ä¸€ä¸ªåº“ä¸­å•ç‹¬æå–å‡ºæŸä¸€ä¸ªæ–‡ä»¶ã€‚\nCommands -d åˆ é™¤å¤‡å­˜æ–‡ä»¶ä¸­çš„æˆå‘˜æ–‡ä»¶ã€‚ -m å˜æ›´æˆå‘˜æ–‡ä»¶åœ¨å¤‡å­˜æ–‡ä»¶ä¸­çš„æ¬¡åºã€‚ -p æ˜¾ç¤ºå¤‡å­˜æ–‡ä»¶ä¸­çš„æˆå‘˜æ–‡ä»¶å†…å®¹ã€‚ -q å°†æ–‡ä»¶é™„åŠ åœ¨å¤‡å­˜æ–‡ä»¶æœ«ç«¯ã€‚ -r å°†æ–‡ä»¶æ’å…¥å¤‡å­˜æ–‡ä»¶ä¸­ã€‚ -t æ˜¾ç¤ºå¤‡å­˜æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ–‡ä»¶ã€‚ -x è‡ªå¤‡å­˜æ–‡ä»¶ä¸­å–å‡ºæˆå‘˜æ–‡ä»¶ã€‚ Examples æ‰“åŒ…æ–‡ä»¶ å°†solution.c solution.hä¸¤ä¸ªæ–‡ä»¶æ‰“åŒ…æˆsolution.bakï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯\nâœ ar rv solution.bak solution.c solution.h ar: æ­£åœ¨åˆ›å»º solution.bak a - solution.c a - solution.h æ˜¾ç¤ºæ‰“åŒ…æ–‡ä»¶å†…å®¹ âœ ar t solution.bak solution.c solution.h ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-ar%E5%A4%9A%E6%96%87%E4%BB%B6%E5%BD%92%E6%A1%A3%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6/","summary":"\u003cp\u003eç°åœ¨æˆ‘ä»¬æœ‰\u003ccode\u003esolution.c\u003c/code\u003e,\u003ccode\u003esolution.h\u003c/code\u003eä¸¤ä¸ªæ–‡ä»¶ï¼Œä»–ä»¬å®ç°äº†æŸä¸€ä¸ªåŠŸèƒ½ï¼Œè‡ªæˆä¸€ä¸ªæ¨¡å—ã€‚åœ¨å…¶ä»–é¡¹ç›®ä¸­ä¹Ÿå¯å¤ç”¨ã€‚æˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒåšæˆåº“æ–‡ä»¶ã€‚\u003ccode\u003ear\u003c/code\u003eå‘½ä»¤å°±å¯ä»¥å°†é”å“¥æ–‡ä»¶æ•´åˆæˆä¸€ä¸ªåº“æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä»ä¸€ä¸ªåº“ä¸­å•ç‹¬æå–å‡ºæŸä¸€ä¸ªæ–‡ä»¶ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-ar å¤šæ–‡ä»¶å½’æ¡£ä¸ºä¸€ä¸ªæ–‡ä»¶"},{"content":"pså‘½ä»¤æ˜¾ç¤ºçš„ä¿¡æ¯ç±»ä¼¼äº Windows çš„ä»»åŠ¡ç®¡ç†å™¨ã€‚ä¹Ÿæ˜¯å‚æ•°è¶…çº§å¤šçš„ä¸€ä¸ªå‘½ä»¤ï¼Œæ‰€ä»¥å°±ä¸åˆ—å‚æ•°äº†ï¼Œéœ€è¦æŸ¥çœ‹æ—¶ç›´æ¥æœç´¢ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹å®ä¾‹ã€‚\nä½¿ç”¨å®ä¾‹ æ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„æ‰€æœ‰ç¨‹åº\nâœ ~ ps -a PID TTY TIME CMD 879 tty2 00:03:43 Xorg 990 tty2 00:00:00 gnome-session-b 2653 pts/0 00:00:00 zsh 12365 pts/0 00:00:00 ps æ˜¾ç¤ºæ‰€æœ‰ç¨‹åº\nâœ ~ ps -A PID TTY TIME CMD 1 ? 00:00:01 systemd 2 ? 00:00:00 kthreadd 3 ? 00:00:00 rcu_gp 4 ? 00:00:00 rcu_par_gp 6 ? 00:00:00 kworker/0:0H-kblockd 9 ? 00:00:00 mm_percpu_wq 10 ? 00:00:00 ksoftirqd/0 11 ? 00:00:02 rcu_sched 12 ? 00:00:00 migration/0 13 ? 00:00:00 idle_inject/0 14 ? 00:00:00 cpuhp/0 15 ? 00:00:00 kdevtmpfs . . . æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯\nâœ ~ ps -u root aæ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„ç¨‹åºï¼Œuä»¥ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µï¼Œxæ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä¸ä»¥ç»ˆç«¯æœºæ¥åŒºåˆ† USERï¼è¿è¡Œè¯¥æµç¨‹çš„ç”¨æˆ·ã€‚\n%CPUï¼è¿›ç¨‹ CPU åˆ©ç”¨ç‡ã€‚\n%MEMï¼è¿›ç¨‹é©»ç•™é›†å¤§å°å è®¡ç®—æœºç‰©ç†å†…å­˜çš„ç™¾åˆ†æ¯”ã€‚\nVSZï¼KiB ä¸­è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜å¤§å°ã€‚\nRSSï¼è¿›ç¨‹æ­£åœ¨ä½¿ç”¨çš„ç‰©ç†å†…å­˜çš„å¤§å°ã€‚\nSTATï¼è¿›ç¨‹çŠ¶æ€ä»£ç ï¼Œå¯ä»¥æ˜¯ Zï¼ˆzombieï¼‰ï¼ŒSï¼ˆä¼‘çœ ï¼‰ï¼ŒRï¼ˆè¿è¡Œï¼‰..ç­‰ç­‰ã€‚\nSTARTï¼å‘½ä»¤å¯åŠ¨çš„æ—¶é—´ã€‚\nâœ ~ ps aux USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.2 102084 11540 ? Ss 09:09 0:01 /sbin/init splash root 2 0.0 0.0 0 0 ? S 09:09 0:00 [kthreadd] root 3 0.0 0.0 0 0 ? I\u0026lt; 09:09 0:00 [rcu_gp] æŒ‰ CPU èµ„æºçš„ä½¿ç”¨é‡å¯¹è¿›ç¨‹è¿›è¡Œæ’åºï¼š\nâœ ~ ps aux | sort -nk 3 avahi 492 0.0 0.0 8536 3260 ? Ss 09:09 0:00 avahi-daemon: running [hanhan.local] avahi 552 0.0 0.0 8352 332 ? S 09:09 0:00 avahi-daemon: chroot helper colord 1442 0.0 0.3 255144 14408 ? Ssl 09:09 0:00 /usr/libexec/colord dominic 1068 0.0 0.0 31244 364 ? S 09:09 0:00 /usr/bin/VBoxClient --clipboard dominic 1069 0.0 0.9 163512 39088 ? Sl 09:09 0:00 /usr/bin/VBoxClient --clipboard dominic 1080 0.0 0.0 31244 364 ? S 09:09 0:00 /usr/bin/VBoxClient --seamless # å…¶ä¸­`sort`å‘½ä»¤ä¸­`-n`ä¸ºæŒ‰æ•°å€¼è¿›è¡Œæ’åºï¼Œ`-k 3` è¡¨ç¤ºä»¥è¾“å‡ºç»“æœçš„ç¬¬ä¸‰åˆ—æ¥è¿›è¡Œæ’åºï¼Œ # ä»ä¸Šä¸€ä¸ªå®ä¾‹ä¸­çœ‹åˆ°ï¼Œç¬¬ä¸‰åˆ—ä¸ºCPUä½¿ç”¨ç‡`%CPU`ã€‚ # åŒç†ps aux | sort -rnk 4 å³æŒ‰å†…å­˜ä½¿ç”¨é™åºæ’åº æ˜¾ç¤ºå‰ 5 åæœ€è€— CPU çš„è¿›ç¨‹\nâœ ~ ps aux --sort=-pcpu | head -5 USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 2.6 0.7 51396 7644 ? Ss 02:02 0:03 /usr/lib/systemd/systemd --switched-root --system --deserialize 23 root 1249 2.6 3.0 355800 30896 tty1 Rsl+ 02:02 0:02 /usr/bin/X -background none :0 vt01 -nolisten tcp root 508 2.4 1.6 248488 16776 ? Ss 02:02 0:03 /usr/bin/python /usr/sbin/firewalld --nofor ä¸‹é¢çš„å‘½ä»¤ä¼šæ˜¾ç¤ºè¿›ç¨‹ id ä¸º 3150 çš„è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹\nâœ ~ ps -p 3150 -L ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E6%97%A5%E5%AD%A6%E5%91%BD%E4%BB%A4-ps%E6%98%BE%E7%A4%BA%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81/","summary":"\u003cp\u003e\u003ccode\u003eps\u003c/code\u003eå‘½ä»¤æ˜¾ç¤ºçš„ä¿¡æ¯ç±»ä¼¼äº Windows çš„ä»»åŠ¡ç®¡ç†å™¨ã€‚ä¹Ÿæ˜¯å‚æ•°è¶…çº§å¤šçš„ä¸€ä¸ªå‘½ä»¤ï¼Œæ‰€ä»¥å°±ä¸åˆ—å‚æ•°äº†ï¼Œéœ€è¦æŸ¥çœ‹æ—¶ç›´æ¥æœç´¢ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹å®ä¾‹ã€‚\u003c/p\u003e\n\u003ch2 id=\"ä½¿ç”¨å®ä¾‹\"\u003eä½¿ç”¨å®ä¾‹\u003c/h2\u003e\n\u003cp\u003eæ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„æ‰€æœ‰ç¨‹åº\u003c/p\u003e","title":"æ¯æ—¥å­¦å‘½ä»¤-ps æ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€"},{"content":"åœ¨å‘ GitHub æ¨é€åšå®¢æ—¶ï¼Œæ¨é€å¤±è´¥æŠ¥äº†è¿™ä¸ªé”™ã€‚ä¹Ÿä¸çŸ¥é“æ˜¯æ”¹äº†ä»€ä¹ˆè®¾ç½®çªç„¶æŠ¥é”™ã€‚SSL çš„é”™ä¹‹å‰é‡åˆ°ä¸€æ¬¡ï¼Œå°±æ˜¯åˆšå¼€å§‹é…ç½® Git æ—¶ç”¨çš„httpsåè®®ï¼Œæ¯æ¬¡pushéƒ½éœ€è¦é‡æ–°è¾“å…¥ä¸€æ¬¡å¯†ç ã€‚æ”¹æˆsslåè®®å°± OK äº†ã€‚å½“æ—¶æŠŠ Linux ç¯å¢ƒçš„ Git æ”¹äº†ï¼Œä½†æ˜¯ç°åœ¨çš„ Windows ä¸‹æ²¡æ”¹ï¼ŒçŒœæµ‹å¯èƒ½å’Œè¿™ä¹Ÿæœ‰å…³ï¼Œäºæ˜¯å°±æŠŠ URL æ”¹äº†ä¸€ä¸‹ï¼Œç»“æœè¿˜çœŸå¥½äº†ã€‚ åœ¨æœ¬åœ°ä»“åº“çš„.gitæ–‡ä»¶é‡Œæ‰¾åˆ°configæ–‡ä»¶ï¼Œæ‰“å¼€åå°†urlæ”¹ä¸ºsslåè®®ï¼Œgit@github.com:XXXæ ¼å¼çš„ã€‚\nå°† Hexo çš„é…ç½®ä¹Ÿæ”¹äº†ï¼Œæ‰¾åˆ°ä»“åº“ä¸‹çš„_config.yml\ndeploy: type: git repository: æ”¹æˆsslåè®®åœ°å€ branch: master ","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3openssl-ssl-connect-connection-was-reset-in-connection-to-github-com-443/","summary":"\u003cp\u003eåœ¨å‘ GitHub æ¨é€åšå®¢æ—¶ï¼Œæ¨é€å¤±è´¥æŠ¥äº†è¿™ä¸ªé”™ã€‚ä¹Ÿä¸çŸ¥é“æ˜¯æ”¹äº†ä»€ä¹ˆè®¾ç½®çªç„¶æŠ¥é”™ã€‚SSL çš„é”™ä¹‹å‰é‡åˆ°ä¸€æ¬¡ï¼Œå°±æ˜¯åˆšå¼€å§‹é…ç½® Git æ—¶ç”¨çš„\u003ccode\u003ehttps\u003c/code\u003eåè®®ï¼Œæ¯æ¬¡\u003ccode\u003epush\u003c/code\u003eéƒ½éœ€è¦é‡æ–°è¾“å…¥ä¸€æ¬¡å¯†ç ã€‚æ”¹æˆ\u003ccode\u003essl\u003c/code\u003eåè®®å°± OK äº†ã€‚å½“æ—¶æŠŠ Linux ç¯å¢ƒçš„ Git æ”¹äº†ï¼Œä½†æ˜¯ç°åœ¨çš„ Windows ä¸‹æ²¡æ”¹ï¼ŒçŒœæµ‹å¯èƒ½å’Œè¿™ä¹Ÿæœ‰å…³ï¼Œäºæ˜¯å°±æŠŠ URL æ”¹äº†ä¸€ä¸‹ï¼Œç»“æœè¿˜çœŸå¥½äº†ã€‚\nåœ¨æœ¬åœ°ä»“åº“çš„\u003ccode\u003e.git\u003c/code\u003eæ–‡ä»¶é‡Œæ‰¾åˆ°\u003ccode\u003econfig\u003c/code\u003eæ–‡ä»¶ï¼Œæ‰“å¼€åå°†\u003ccode\u003eurl\u003c/code\u003eæ”¹ä¸º\u003ccode\u003essl\u003c/code\u003eåè®®ï¼Œ\u003ccode\u003egit@github.com:XXX\u003c/code\u003eæ ¼å¼çš„ã€‚\u003c/p\u003e","title":"è§£å†³ OpenSSL SSL_connect: Connection was reset in connection to github.com:443"},{"content":"æœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç å¯åœ¨æ­¤å¤„æŸ¥çœ‹\näº‹ä»¶ä»¥åŠä¸ä¿¡å·çš„åŒºåˆ« äº‹ä»¶ï¼ˆeventï¼‰æ˜¯ç”±ç³»ç»Ÿæˆ–è€… Qt æœ¬èº«åœ¨ä¸åŒçš„æ—¶åˆ»å‘å‡ºçš„ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹é¼ æ ‡ã€æ•²ä¸‹é”®ç›˜ï¼Œæˆ–è€…æ˜¯çª—å£éœ€è¦é‡æ–°ç»˜åˆ¶çš„æ—¶å€™ï¼Œéƒ½ä¼šå‘å‡ºä¸€ä¸ªç›¸åº”çš„äº‹ä»¶ã€‚ä¸€äº›äº‹ä»¶åœ¨å¯¹ç”¨æˆ·æ“ä½œåšå‡ºå“åº”æ—¶å‘å‡ºï¼Œå¦‚é”®ç›˜äº‹ä»¶ç­‰ï¼›å¦ä¸€äº›äº‹ä»¶åˆ™æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨å‘å‡ºï¼Œå¦‚è®¡æ—¶å™¨äº‹ä»¶ã€‚\näº‹ä»¶å’Œä¿¡å·æ§½çš„åŒºåˆ«\nä¿¡å·æ˜¯ç”±å…·ä½“å¯¹è±¡å‘å‡ºï¼Œç„¶åé©¬ä¸Šäº¤ç»™connectå‡½æ•°è¿æ¥çš„æ§½è¿›è¡Œå¤„ç†ï¼Œå¦‚æœå¤„ç†è¿‡ç¨‹ä¸­äº§ç”Ÿäº†æ–°çš„ä¿¡å·ï¼Œå°†ä¼šç»§ç»­æ‰§è¡Œæ–°çš„ä¿¡å·ï¼Œä¸€ç›´è¿™æ ·é€’å½’è¿›è¡Œä¸‹å»ã€‚è€Œäº‹ä»¶ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—å¯¹å‘å‡ºçš„æ‰€æœ‰äº‹ä»¶è¿›è¡Œç»´æŠ¤ï¼Œå½“æ–°çš„äº‹ä»¶äº§ç”Ÿæ—¶ä¼šè¢«åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚ åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç°ï¼Œåˆšå¯åŠ¨æ—¶å¹¶ä¸ä¼šæ˜¾ç¤ºä»»ä½•å†…å®¹ï¼Œåªæœ‰åœ¨ç‚¹å‡»ä¸€æ¬¡åï¼Œå¹³é¢æ‰ä¼šæ˜¾ç¤ºä¿¡æ¯ã€‚è¿™æ˜¯å› ä¸ºQWidgetä¸­æœ‰ä¸€ä¸ªmouseTrackingå±æ€§ï¼Œè¯¥å±æ€§ç”¨äºè®¾ç½®æ˜¯å¦è¿½è¸ªé¼ æ ‡ã€‚åªæœ‰é¼ æ ‡è¢«è¿½è¸ªæ—¶ï¼ŒmouseMoveEvent()æ‰ä¼šå‘å‡ºã€‚å¦‚æœmouseTrackingæ˜¯ falseï¼ˆé»˜è®¤å³æ˜¯ï¼‰ï¼Œç»„ä»¶åœ¨è‡³å°‘ä¸€æ¬¡é¼ æ ‡ç‚¹å‡»ä¹‹åï¼Œæ‰èƒ½å¤Ÿè¢«è¿½è¸ªï¼Œä¹Ÿå°±æ˜¯èƒ½å¤Ÿå‘å‡ºmouseMoveEvent()äº‹ä»¶ã€‚å¦‚æœmouseTrackingä¸º trueï¼Œåˆ™mouseMoveEvent()ç›´æ¥å¯ä»¥è¢«å‘å‡ºã€‚çŸ¥é“äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨main()å‡½æ•°ä¸­ç›´æ¥è®¾ç½®ä¸‹ï¼š\nEventLabel *label = new EventLabel; label-\u0026gt;setWindowTitle(\u0026#34;MouseEvent Demo\u0026#34;); label-\u0026gt;resize(300, 200); label-\u0026gt;setMouseTracking(true); label-\u0026gt;show(); æ˜¾ç¤ºæ•ˆæœ \u003c!DOCTYPE html\u003e Responsive Image äº‹ä»¶çš„æ¥å—ä¸å¿½ç•¥ //custombutton.h #include \u0026lt;QDebug\u0026gt; #include \u0026lt;QMouseEvent\u0026gt; #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QPushButton\u0026gt; class CustomButton : public QPushButton { Q_OBJECT private: void onButtonClicked(); public: CustomButton(QWidget *parent = 0); }; //custombutton.cpp #include \u0026#34;custombutton.h\u0026#34; CustomButton::CustomButton(QWidget *parent) : QPushButton(parent) { connect(this, \u0026amp;CustomButton::clicked, this, \u0026amp;CustomButton::onButtonClicked); } void CustomButton::onButtonClicked() { qDebug() \u0026lt;\u0026lt; \u0026#34;You clicked this!\u0026#34;; } //main02.cpp #include \u0026#34;custombutton.h\u0026#34; int main(int argc, char *argv[]) { QApplication a(argc, argv); CustomButton btn; btn.setText(\u0026#34;This is a Button!\u0026#34;); btn.show(); return a.exec(); } ä»¥ä¸Šä»£ç è¿è¡Œç»“æœå°±æ˜¯ç‚¹å‡»æŒ‰é’®ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºï¼š\u0026ldquo;You clicked this!\u0026quot;ã€‚\nç°åœ¨ï¼Œæˆ‘ä»¬åœ¨CustomButtonç±»ä¸­å†æ·»åŠ ä¸€ä¸ªäº‹ä»¶å‡½æ•°ï¼š\n//custombutton.h protected: void mousePressEvent(QMouseEvent *event); //custombutton.cpp void CustomButton::mousePressEvent(QMouseEvent *event) { if (event-\u0026gt;button() == Qt::LeftButton) { qDebug() \u0026lt;\u0026lt; \u0026#34;Left\u0026#34;; } else { QPushButton::mousePressEvent(event); } } è¿™æ—¶è¿è¡Œç»“æœä¸ºç‚¹å‡»æŒ‰é”®è¾“å‡º\u0026quot;Left\u0026rdquo;ã€‚è€Œæ²¡æœ‰å†è¾“å‡º\u0026quot;You clicked this!\u0026quot;ã€‚è¯´æ˜æˆ‘ä»¬æŠŠçˆ¶ç±»çš„å®ç°è¦†ç›–äº†ã€‚å½“é‡å†™äº‹ä»¶å›è°ƒå‡½æ•°æ—¶ï¼Œæ—¶åˆ»æ³¨æ„æ˜¯å¦éœ€è¦é€šè¿‡è°ƒç”¨çˆ¶ç±»çš„åŒåå‡½æ•°æ¥ç¡®ä¿åŸæœ‰å®ç°ä»èƒ½è¿›è¡Œï¼ã€‚è¿™ä¸€å®šç¨‹åº¦ä¸Šè¯´ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¿½ç•¥äº†çˆ¶ç±»çš„äº‹ä»¶ã€‚\né€šè¿‡è°ƒç”¨çˆ¶ç±»çš„åŒåå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Qt çš„äº‹ä»¶ä¼ é€’çœ‹æˆé“¾çŠ¶ï¼šå¦‚æœå­ç±»æ²¡æœ‰å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä¼šç»§ç»­å‘å…¶çˆ¶ç±»ä¼ é€’ã€‚Qt çš„äº‹ä»¶å¯¹è±¡æœ‰ä¸¤ä¸ªå‡½æ•°ï¼šaccept()å’Œignore()ã€‚æ­£å¦‚å®ƒä»¬çš„åå­—ä¸€æ ·ï¼Œå‰è€…ç”¨æ¥å‘Šè¯‰ Qtï¼Œè¿™ä¸ªç±»çš„äº‹ä»¶å¤„ç†å‡½æ•°æƒ³è¦å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼›åè€…åˆ™å‘Šè¯‰ Qtï¼Œè¿™ä¸ªç±»çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸æƒ³è¦å¤„ç†è¿™ä¸ªäº‹ä»¶ã€‚åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨isAccepted()æ¥æŸ¥è¯¢è¿™ä¸ªäº‹ä»¶æ˜¯ä¸æ˜¯å·²ç»è¢«æ¥æ”¶äº†ã€‚å…·ä½“æ¥è¯´ï¼šå¦‚æœä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°è°ƒç”¨äº†ä¸€ä¸ªäº‹ä»¶å¯¹è±¡çš„accept()å‡½æ•°ï¼Œè¿™ä¸ªäº‹ä»¶å°±ä¸ä¼šè¢«ç»§ç»­ä¼ æ’­ç»™å…¶çˆ¶ç»„ä»¶ï¼›å¦‚æœå®ƒè°ƒç”¨äº†äº‹ä»¶çš„ignore()å‡½æ•°ï¼ŒQt ä¼šä»å…¶çˆ¶ç»„ä»¶ä¸­å¯»æ‰¾å¦å¤–çš„æ¥å—è€…ã€‚\n//custombutton01.h #include \u0026lt;QDebug\u0026gt; #include \u0026lt;QVBoxLayout\u0026gt; #include \u0026lt;QMainWindow\u0026gt; #include \u0026lt;QMouseEvent\u0026gt; #include \u0026lt;QPushButton\u0026gt; #include \u0026lt;QApplication\u0026gt; class CustomButton : public QPushButton { Q_OBJECT public: CustomButton(QWidget *parent) : QPushButton(parent) { } protected: void mousePressEvent(QMouseEvent *event) { qDebug() \u0026lt;\u0026lt; \u0026#34;CustomButton\u0026#34;; } }; class CustomButtonEx : public CustomButton { Q_OBJECT public: CustomButtonEx(QWidget *parent) : CustomButton(parent) { } protected: void mousePressEvent(QMouseEvent *event) { qDebug() \u0026lt;\u0026lt; \u0026#34;CustomButtonEx\u0026#34;; } }; class CustomWidget : public QWidget { Q_OBJECT public: CustomWidget(QWidget *parent) : QWidget(parent) { } protected: void mousePressEvent(QMouseEvent *event) { qDebug() \u0026lt;\u0026lt; \u0026#34;CustomWidget\u0026#34;; } }; class MainWindow : public QMainWindow { Q_OBJECT public: MainWindow(QWidget *parent = 0) : QMainWindow(parent) { CustomWidget *widget = new CustomWidget(this); CustomButton *cbex = new CustomButton(widget); cbex-\u0026gt;setText(tr(\u0026#34;CustomButton\u0026#34;)); CustomButtonEx *cb = new CustomButtonEx(widget); cb-\u0026gt;setText(tr(\u0026#34;CustomButtonEx\u0026#34;)); QVBoxLayout *widgetLayout = new QVBoxLayout(widget); widgetLayout-\u0026gt;addWidget(cbex); widgetLayout-\u0026gt;addWidget(cb); this-\u0026gt;setCentralWidget(widget); } protected: void mousePressEvent(QMouseEvent *event) { qDebug() \u0026lt;\u0026lt; \u0026#34;MainWindow\u0026#34;; } }; //mai03.cpp #include \u0026#34;custombutton01.h\u0026#34; int main(int argc, char *argv[]) { QApplication app(argc, argv); MainWindow win; win.show(); return app.exec(); } è¿™æ®µä»£ç åœ¨ä¸€ä¸ªMainWindowä¸­æ·»åŠ äº†ä¸€ä¸ªCustomWidgetï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªæŒ‰é’®å¯¹è±¡ï¼šCustomButtonå’ŒCustomButtonExã€‚æ¯ä¸€ä¸ªç±»éƒ½é‡å†™äº†mousePressEvent()å‡½æ•°ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image è¿è¡Œç¨‹åºç‚¹å‡» CustomButtonExï¼Œç»“æœæ˜¯\nCustomButtonEx å› ä¸ºæˆ‘ä»¬é‡å†™äº†mousePressEvent()ï¼Œæ‰€ä»¥è°ƒç”¨å­ç±»è‡ªå·±çš„å‡½æ•°ï¼Œå¦‚æœåœ¨CustomButtonExçš„mousePressEvent()ç¬¬ä¸€è¡Œå¢åŠ ä¸€å¥event-\u0026gt;accept()ï¼Œé‡æ–°è¿è¡Œï¼Œå‘ç°ç»“æœä¸å˜ã€‚æ­£å¦‚æˆ‘ä»¬å‰é¢æ‰€è¯´ï¼ŒQEvent é»˜è®¤æ˜¯acceptçš„ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ç„¶åæˆ‘ä»¬å°†CustomButtonExçš„event-\u0026gt;accept()æ”¹æˆevent-\u0026gt;ignore()ã€‚è¿™æ¬¡è¿è¡Œç»“æœæ˜¯\nCustomButtonEx CustomWidget ignore()è¯´æ˜æˆ‘ä»¬æƒ³è®©äº‹ä»¶ç»§ç»­ä¼ æ’­ï¼Œäºæ˜¯CustomButtonExçš„çˆ¶ç»„ä»¶CustomWidgetä¹Ÿæ”¶åˆ°äº†è¿™ä¸ªäº‹ä»¶ï¼Œæ‰€ä»¥è¾“å‡ºäº†è‡ªå·±çš„ç»“æœã€‚\nåŒç†ï¼ŒCustomWidgetåˆæ²¡æœ‰è°ƒç”¨çˆ¶ç±»å‡½æ•°æˆ–è€…æ˜¾å¼è®¾ç½®accept()æˆ–ignore()ï¼Œæ‰€ä»¥äº‹ä»¶ä¼ æ’­å°±æ­¤æ‰“ä½ã€‚\nè¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒCustomButtonExçš„äº‹ä»¶ä¼ æ’­ç»™äº†çˆ¶ç»„ä»¶CustomWidgetï¼Œè€Œä¸æ˜¯å®ƒçš„çˆ¶ç±»CustomButtonã€‚äº‹ä»¶çš„ä¼ æ’­æ˜¯åœ¨ç»„ä»¶å±‚æ¬¡ä¸Šé¢çš„ï¼Œè€Œä¸æ˜¯ä¾é ç±»ç»§æ‰¿æœºåˆ¶ã€‚\nåœ¨ä¸€ä¸ªç‰¹æ®Šçš„æƒ…å½¢ä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨accept()å’Œignore()å‡½æ•°ï¼Œé‚£å°±æ˜¯çª—å£å…³é—­çš„äº‹ä»¶ã€‚å¯¹äºçª—å£å…³é—­QCloseEventäº‹ä»¶ï¼Œè°ƒç”¨accept()æ„å‘³ç€ Qt ä¼šåœæ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œçª—å£å…³é—­ï¼›è°ƒç”¨ignore()åˆ™æ„å‘³ç€äº‹ä»¶ç»§ç»­ä¼ æ’­ï¼Œå³é˜»æ­¢çª—å£å…³é—­ã€‚å›åˆ°æˆ‘ä»¬å‰é¢å†™çš„ç®€å•çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚\nevent() å‡½æ•° äº‹ä»¶å¯¹è±¡åˆ›å»ºå®Œæ¯•åï¼ŒQt å°†è¿™ä¸ªäº‹ä»¶å¯¹è±¡ä¼ é€’ç»™QObjectçš„event()å‡½æ•°ã€‚event()å‡½æ•°å¹¶ä¸ç›´æ¥å¤„ç†äº‹ä»¶ï¼Œè€Œæ˜¯å°†è¿™äº›äº‹ä»¶å¯¹è±¡æŒ‰ç…§å®ƒä»¬ä¸åŒçš„ç±»å‹ï¼Œåˆ†å‘ç»™ä¸åŒçš„äº‹ä»¶å¤„ç†å™¨ï¼ˆevent handlerï¼‰ã€‚\nå¦‚ä¸Šæ‰€è¿°ï¼Œevent()å‡½æ•°ä¸»è¦ç”¨äºäº‹ä»¶çš„åˆ†å‘ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ å¸Œæœ›åœ¨äº‹ä»¶åˆ†å‘ä¹‹å‰åšä¸€äº›æ“ä½œï¼Œå°±å¯ä»¥é‡å†™è¿™ä¸ªevent()å‡½æ•°äº†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸€ä¸ª QWidget ç»„ä»¶ä¸­ç›‘å¬ tab é”®çš„æŒ‰ä¸‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç»§æ‰¿ QWidgetï¼Œå¹¶é‡å†™å®ƒçš„event()å‡½æ•°ï¼Œæ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼š\nbool CustomWidget::event(QEvent *e) { if (e-\u0026gt;type() == QEvent::KeyPress) { QKeyEvent *keyEvent = static_cast\u0026lt;QKeyEvent *\u0026gt;(e); if (keyEvent-\u0026gt;key() == Qt::Key_Tab) { qDebug() \u0026lt;\u0026lt; \u0026#34;You press tab.\u0026#34;; return true; } } return QWidget::event(e); } CustomWidgetæ˜¯ä¸€ä¸ªæ™®é€šçš„QWidgetå­ç±»ã€‚æˆ‘ä»¬é‡å†™äº†å®ƒçš„event()å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªQEventå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œä¹Ÿå°±æ˜¯éœ€è¦è½¬å‘çš„äº‹ä»¶å¯¹è±¡ã€‚å‡½æ•°è¿”å›å€¼æ˜¯ bool ç±»å‹ã€‚å¦‚æœä¼ å…¥çš„äº‹ä»¶å·²è¢«è¯†åˆ«å¹¶ä¸”å¤„ç†ï¼Œåˆ™éœ€è¦è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚å¦‚æœè¿”å›å€¼æ˜¯ trueï¼Œå¹¶ä¸”ï¼Œè¯¥äº‹ä»¶å¯¹è±¡è®¾ç½®äº†accept()ï¼Œé‚£ä¹ˆ Qt ä¼šè®¤ä¸ºè¿™ä¸ªäº‹ä»¶å·²ç»å¤„ç†å®Œæ¯•ï¼Œä¸ä¼šå†å°†è¿™ä¸ªäº‹ä»¶å‘é€ç»™å…¶å®ƒå¯¹è±¡ï¼Œè€Œæ˜¯ä¼šç»§ç»­å¤„ç†äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€äº‹ä»¶ã€‚æ³¨æ„ï¼Œåœ¨event()å‡½æ•°ä¸­ï¼Œè°ƒç”¨äº‹ä»¶å¯¹è±¡çš„accept()å’Œignore()å‡½æ•°æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼Œä¸ä¼šå½±å“åˆ°äº‹ä»¶çš„ä¼ æ’­ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨QEvent::type()å‡½æ•°å¯ä»¥æ£€æŸ¥äº‹ä»¶çš„å®é™…ç±»å‹ï¼Œå…¶è¿”å›å€¼æ˜¯QEvent::Typeç±»å‹çš„æšä¸¾ã€‚æˆ‘ä»¬å¤„ç†è¿‡è‡ªå·±æ„Ÿå…´è¶£çš„äº‹ä»¶ä¹‹åï¼Œå¯ä»¥ç›´æ¥è¿”å› trueï¼Œè¡¨ç¤ºæˆ‘ä»¬å·²ç»å¯¹æ­¤äº‹ä»¶è¿›è¡Œäº†å¤„ç†ï¼›å¯¹äºå…¶å®ƒæˆ‘ä»¬ä¸å…³å¿ƒçš„äº‹ä»¶ï¼Œåˆ™éœ€è¦è°ƒç”¨çˆ¶ç±»çš„event()å‡½æ•°ç»§ç»­è½¬å‘ï¼Œå¦åˆ™è¿™ä¸ªç»„ä»¶å°±åªèƒ½å¤„ç†æˆ‘ä»¬å®šä¹‰çš„äº‹ä»¶äº†ã€‚ä¸ºäº†æµ‹è¯•è¿™ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä¸‹é¢çš„ä»£ç ï¼š\nbool CustomTextEdit::event(QEvent *e) { if (e-\u0026gt;type() == QEvent::KeyPress) { QKeyEvent *keyEvent = static_cast\u0026lt;QKeyEvent *\u0026gt;(e); if (keyEvent-\u0026gt;key() == Qt::Key_Tab) { qDebug() \u0026lt;\u0026lt; \u0026#34;You press tab.\u0026#34;; return true; } } return false; } CustomTextEditæ˜¯QTextEditçš„ä¸€ä¸ªå­ç±»ã€‚æˆ‘ä»¬é‡å†™äº†å…¶event()å‡½æ•°ï¼Œå´æ²¡æœ‰è°ƒç”¨çˆ¶ç±»çš„åŒåå‡½æ•°ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å°±åªèƒ½å¤„ç† Tab é”®ï¼Œå†ä¹Ÿæ— æ³•è¾“å…¥ä»»ä½•æ–‡æœ¬ï¼Œä¹Ÿä¸èƒ½å“åº”å…¶å®ƒäº‹ä»¶ï¼Œæ¯”å¦‚é¼ æ ‡ç‚¹å‡»ä¹‹åä¹Ÿä¸ä¼šæœ‰å…‰æ ‡å‡ºç°ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åªå¤„ç†çš„KeyPressç±»å‹çš„äº‹ä»¶ï¼Œå¹¶ä¸”å¦‚æœä¸æ˜¯KeyPressäº‹ä»¶ï¼Œåˆ™ç›´æ¥è¿”å› falseï¼Œé¼ æ ‡äº‹ä»¶æ ¹æœ¬ä¸ä¼šè¢«è½¬å‘ï¼Œä¹Ÿå°±æ²¡æœ‰äº†é¼ æ ‡äº‹ä»¶ã€‚\näº‹ä»¶è¿‡æ»¤å™¨ æœ‰æ—¶å€™ï¼Œå¯¹è±¡éœ€è¦æŸ¥çœ‹ã€ç”šè‡³è¦æ‹¦æˆªå‘é€åˆ°å¦å¤–å¯¹è±¡çš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œå¯¹è¯æ¡†å¯èƒ½æƒ³è¦æ‹¦æˆªæŒ‰é”®äº‹ä»¶ï¼Œä¸è®©åˆ«çš„ç»„ä»¶æ¥æ”¶åˆ°ï¼›æˆ–è€…è¦ä¿®æ”¹å›è½¦é”®çš„é»˜è®¤å¤„ç†ã€‚\né€šè¿‡å‰é¢çš„ç« èŠ‚ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼ŒQt åˆ›å»ºäº†QEventäº‹ä»¶å¯¹è±¡ä¹‹åï¼Œä¼šè°ƒç”¨QObjectçš„event()å‡½æ•°å¤„ç†äº‹ä»¶çš„åˆ†å‘ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨event()å‡½æ•°ä¸­å®ç°æ‹¦æˆªçš„æ“ä½œã€‚ç”±äºevent()å‡½æ•°æ˜¯ protected çš„ï¼Œå› æ­¤ï¼Œéœ€è¦ç»§æ‰¿å·²æœ‰ç±»ã€‚å¦‚æœç»„ä»¶å¾ˆå¤šï¼Œå°±éœ€è¦é‡å†™å¾ˆå¤šä¸ªevent()å‡½æ•°ã€‚è¿™å½“ç„¶ç›¸å½“éº»çƒ¦ï¼Œæ›´ä¸ç”¨è¯´é‡å†™event()å‡½æ•°è¿˜å¾—å°å¿ƒä¸€å †é—®é¢˜ã€‚å¥½åœ¨ Qt æä¾›äº†å¦å¤–ä¸€ç§æœºåˆ¶æ¥è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼šäº‹ä»¶è¿‡æ»¤å™¨ã€‚\nQObjectæœ‰ä¸€ä¸ªeventFilter()å‡½æ•°ï¼Œç”¨äºå»ºç«‹äº‹ä»¶è¿‡æ»¤å™¨ã€‚è¿™ä¸ªå‡½æ•°çš„ç­¾åå¦‚ä¸‹ï¼š\nè¿™ä¸ªå‡½æ•°æ­£å¦‚å…¶åå­—æ˜¾ç¤ºçš„é‚£æ ·ï¼Œæ˜¯ä¸€ä¸ªâ€œäº‹ä»¶è¿‡æ»¤å™¨â€ã€‚æ‰€è°“äº‹ä»¶è¿‡æ»¤å™¨ï¼Œå¯ä»¥ç†è§£æˆä¸€ç§è¿‡æ»¤ä»£ç ã€‚æƒ³æƒ³åšåŒ–å­¦å®éªŒæ—¶ç”¨åˆ°çš„è¿‡æ»¤å™¨ï¼Œå¯ä»¥å°†æ‚è´¨ç•™åˆ°æ»¤çº¸ä¸Šï¼Œè®©è¿‡æ»¤åçš„æ¶²ä½“æºœèµ°ã€‚äº‹ä»¶è¿‡æ»¤å™¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼šå®ƒä¼šæ£€æŸ¥æ¥æ”¶åˆ°çš„äº‹ä»¶ã€‚å¦‚æœè¿™ä¸ªäº‹ä»¶æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç±»å‹ï¼Œå°±è¿›è¡Œæˆ‘ä»¬è‡ªå·±çš„å¤„ç†ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±ç»§ç»­è½¬å‘ã€‚è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª bool ç±»å‹ï¼Œå¦‚æœä½ æƒ³å°†å‚æ•° event è¿‡æ»¤å‡ºæ¥ï¼Œæ¯”å¦‚ï¼Œä¸æƒ³è®©å®ƒç»§ç»­è½¬å‘ï¼Œå°±è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚äº‹ä»¶è¿‡æ»¤å™¨çš„è°ƒç”¨æ—¶é—´æ˜¯ç›®æ ‡å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å‚æ•°é‡Œé¢çš„watchedå¯¹è±¡ï¼‰æ¥æ”¶åˆ°äº‹ä»¶å¯¹è±¡ä¹‹å‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ åœ¨äº‹ä»¶è¿‡æ»¤å™¨ä¸­åœæ­¢äº†æŸä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆï¼Œwatchedå¯¹è±¡ä»¥åŠä»¥åæ‰€æœ‰çš„äº‹ä»¶è¿‡æ»¤å™¨æ ¹æœ¬ä¸ä¼šçŸ¥é“è¿™ä¹ˆä¸€ä¸ªäº‹ä»¶ã€‚\nclass MainWindow : public QMainWindow { public: MainWindow(); protected: bool eventFilter(QObject *obj, QEvent *event); private: QTextEdit *textEdit; }; MainWindow::MainWindow() { textEdit = new QTextEdit; setCentralWidget(textEdit); textEdit-\u0026gt;installEventFilter(this); } bool MainWindow::eventFilter(QObject *obj, QEvent *event) { if (obj == textEdit) { if (event-\u0026gt;type() == QEvent::KeyPress) { QKeyEvent *keyEvent = static_cast\u0026lt;QKeyEvent *\u0026gt;(event); qDebug() \u0026lt;\u0026lt; \u0026#34;Ate key press\u0026#34; \u0026lt;\u0026lt; keyEvent-\u0026gt;key(); return true; } else { return false; } } else { // pass the event on to the parent class return QMainWindow::eventFilter(obj, event); } } MainWindowæ˜¯æˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªç±»ã€‚æˆ‘ä»¬é‡å†™äº†å®ƒçš„eventFilter()å‡½æ•°ã€‚ä¸ºäº†è¿‡æ»¤ç‰¹å®šç»„ä»¶ä¸Šçš„äº‹ä»¶ï¼Œé¦–å…ˆéœ€è¦åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç»„ä»¶ï¼Œç„¶ååˆ¤æ–­è¿™ä¸ªäº‹ä»¶çš„ç±»å‹ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸æƒ³è®©textEditç»„ä»¶å¤„ç†é”®ç›˜æŒ‰ä¸‹çš„äº‹ä»¶ã€‚æ‰€ä»¥ï¼Œé¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°è¿™ä¸ªç»„ä»¶ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶æ˜¯é”®ç›˜äº‹ä»¶ï¼Œåˆ™ç›´æ¥è¿”å› trueï¼Œä¹Ÿå°±æ˜¯è¿‡æ»¤æ‰äº†è¿™ä¸ªäº‹ä»¶ï¼Œå…¶ä»–äº‹ä»¶è¿˜æ˜¯è¦ç»§ç»­å¤„ç†ï¼Œæ‰€ä»¥è¿”å› falseã€‚å¯¹äºå…¶å®ƒçš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¹¶ä¸ä¿è¯æ˜¯ä¸æ˜¯è¿˜æœ‰è¿‡æ»¤å™¨ï¼Œäºæ˜¯æœ€ä¿é™©çš„åŠæ³•æ˜¯è°ƒç”¨çˆ¶ç±»çš„å‡½æ•°ã€‚\neventFilter()å‡½æ•°ç›¸å½“äºåˆ›å»ºäº†è¿‡æ»¤å™¨ï¼Œç„¶åæˆ‘ä»¬éœ€è¦å®‰è£…è¿™ä¸ªè¿‡æ»¤å™¨ã€‚å®‰è£…è¿‡æ»¤å™¨éœ€è¦è°ƒç”¨QObject::installEventFilter()å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„ç­¾åå¦‚ä¸‹ï¼š\nvoid QObject::installEventFilter ( QObject * filterObj ) è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªQObject *ç±»å‹çš„å‚æ•°ã€‚è®°å¾—åˆšåˆšæˆ‘ä»¬è¯´çš„ï¼ŒeventFilter()å‡½æ•°æ˜¯QObjectçš„ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œå› æ­¤ï¼Œä»»æ„QObjectéƒ½å¯ä»¥ä½œä¸ºäº‹ä»¶è¿‡æ»¤å™¨ï¼ˆé—®é¢˜åœ¨äºï¼Œå¦‚æœä½ æ²¡æœ‰é‡å†™eventFilter()å‡½æ•°ï¼Œè¿™ä¸ªäº‹ä»¶è¿‡æ»¤å™¨æ˜¯æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ï¼Œå› ä¸ºé»˜è®¤ä»€ä¹ˆéƒ½ä¸ä¼šè¿‡æ»¤ï¼‰ã€‚å·²ç»å­˜åœ¨çš„è¿‡æ»¤å™¨åˆ™å¯ä»¥é€šè¿‡QObject::removeEventFilter()å‡½æ•°ç§»é™¤ã€‚\næˆ‘ä»¬å¯ä»¥å‘ä¸€ä¸ªå¯¹è±¡ä¸Šé¢å®‰è£…å¤šä¸ªäº‹ä»¶å¤„ç†å™¨ï¼Œåªè¦è°ƒç”¨å¤šæ¬¡installEventFilter()å‡½æ•°ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å­˜åœ¨å¤šä¸ªäº‹ä»¶è¿‡æ»¤å™¨ï¼Œé‚£ä¹ˆï¼Œæœ€åä¸€ä¸ªå®‰è£…çš„ä¼šç¬¬ä¸€ä¸ªæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åè¿›å…ˆæ‰§è¡Œçš„é¡ºåºã€‚\nè¿˜è®°å¾—æˆ‘ä»¬å‰é¢çš„é‚£ä¸ªä¾‹å­å—ï¼Ÿæˆ‘ä»¬ä½¿ç”¨event()å‡½æ•°å¤„ç†äº† Tab é”®ï¼š\nbool CustomWidget::event(QEvent *e) { if (e-\u0026gt;type() == QEvent::KeyPress) { QKeyEvent *keyEvent = static_cast\u0026lt;QKeyEvent *\u0026gt;(e); if (keyEvent-\u0026gt;key() == Qt::Key_Tab) { qDebug() \u0026lt;\u0026lt; \u0026#34;You press tab.\u0026#34;; return true; } } return QWidget::event(e); } bool FilterObject::eventFilter(QObject *object, QEvent *event) { if (object == target \u0026amp;\u0026amp; event-\u0026gt;type() == QEvent::KeyPress) { QKeyEvent *keyEvent = static_cast\u0026lt;QKeyEvent *\u0026gt;(event); if (keyEvent-\u0026gt;key() == Qt::Key_Tab) { qDebug() \u0026lt;\u0026lt; \u0026#34;You press tab.\u0026#34;; return true; } else { return false; } } return false; } äº‹ä»¶è¿‡æ»¤å™¨çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ•´ä¸ªåº”ç”¨ç¨‹åºæ·»åŠ ä¸€ä¸ªäº‹ä»¶è¿‡æ»¤å™¨ã€‚è®°å¾—ï¼ŒinstallEventFilter()å‡½æ•°æ˜¯QObjectçš„å‡½æ•°ï¼ŒQApplicationæˆ–è€…QCoreApplicationå¯¹è±¡éƒ½æ˜¯QObjectçš„å­ç±»ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å‘QApplicationæˆ–è€…QCoreApplicationæ·»åŠ äº‹ä»¶è¿‡æ»¤å™¨ã€‚è¿™ç§å…¨å±€çš„äº‹ä»¶è¿‡æ»¤å™¨å°†ä¼šåœ¨æ‰€æœ‰å…¶å®ƒç‰¹æ€§å¯¹è±¡çš„äº‹ä»¶è¿‡æ»¤å™¨ä¹‹å‰è°ƒç”¨ã€‚å°½ç®¡å¾ˆå¼ºå¤§ï¼Œä½†è¿™ç§è¡Œä¸ºä¼šä¸¥é‡é™ä½æ•´ä¸ªåº”ç”¨ç¨‹åºçš„äº‹ä»¶åˆ†å‘æ•ˆç‡ã€‚å› æ­¤ï¼Œé™¤éæ˜¯ä¸å¾—ä¸ä½¿ç”¨çš„æƒ…å†µï¼Œå¦åˆ™çš„è¯æˆ‘ä»¬ä¸åº”è¯¥è¿™ä¹ˆåšã€‚\næ³¨æ„ï¼Œå¦‚æœä½ åœ¨äº‹ä»¶è¿‡æ»¤å™¨ä¸­ delete äº†æŸä¸ªæ¥æ”¶ç»„ä»¶ï¼ŒåŠ¡å¿…å°†å‡½æ•°è¿”å›å€¼è®¾ä¸º trueã€‚å¦åˆ™ï¼ŒQt è¿˜æ˜¯ä¼šå°†äº‹ä»¶åˆ†å‘ç»™è¿™ä¸ªæ¥æ”¶ç»„ä»¶ï¼Œä»è€Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚\näº‹ä»¶è¿‡æ»¤å™¨å’Œè¢«å®‰è£…è¿‡æ»¤å™¨çš„ç»„ä»¶å¿…é¡»åœ¨åŒä¸€çº¿ç¨‹ï¼Œå¦åˆ™ï¼Œè¿‡æ»¤å™¨å°†ä¸èµ·ä½œç”¨ã€‚å¦å¤–ï¼Œå¦‚æœåœ¨å®‰è£…è¿‡æ»¤å™¨ä¹‹åï¼Œè¿™ä¸¤ä¸ªç»„ä»¶åˆ°äº†ä¸åŒçš„çº¿ç¨‹ï¼Œé‚£ä¹ˆï¼Œåªæœ‰ç­‰åˆ°äºŒè€…é‡æ–°å›åˆ°åŒä¸€çº¿ç¨‹çš„æ—¶å€™è¿‡æ»¤å™¨æ‰ä¼šæœ‰æ•ˆã€‚\näº‹ä»¶è¿‡æ»¤å™¨å’Œå®‰è£…è¿‡æ»¤å™¨çš„ç»„ä»¶å¿…é¡»åœ¨åŒä¸€çº¿ç¨‹ã€‚Qt é‡Œé¢ï¼Œå¯¹è±¡åˆ›å»ºä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ moveToThread() å‡½æ•°å°†ä¸€ä¸ªå¯¹è±¡ç§»åŠ¨åˆ°å¦å¤–çš„çº¿ç¨‹ã€‚åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼ˆå½“ç„¶ï¼Œäº‹ä»¶è¿‡æ»¤å™¨å¿…é¡»åœ¨åŒä¸€çº¿ç¨‹æ—¶æ‰èƒ½è¢«æ­£ç¡®å®‰è£…ï¼Œè¿™æ˜¯ç¬¬ä¸€å¥è¯è¯´æ˜çš„ï¼‰ï¼Œåœ¨å®ƒä»¬åˆ†å±åœ¨ä¸åŒçº¿ç¨‹æ—¶ï¼Œäº‹ä»¶è¿‡æ»¤å™¨ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œåªç”¨å½“å®ƒä»¬é‡æ–°å›åˆ°åŒä¸€çº¿ç¨‹ï¼ˆä½¿ç”¨ moveToThread() æˆ–è€…æ˜¯çº¿ç¨‹è‡ªç„¶ç»“æŸï¼‰æ—¶ï¼Œè¿‡æ»¤å™¨æ‰èƒ½é‡æ–°å·¥ä½œ\n","permalink":"https://lifeislife.cn/posts/qt%E4%BA%8B%E4%BB%B6/","summary":"\u003cp\u003eæœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç å¯åœ¨\u003ca href=\"https://github.com/Dunky-Z/learning-qt/tree/main/Event\"\u003eæ­¤å¤„æŸ¥çœ‹\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"äº‹ä»¶ä»¥åŠä¸ä¿¡å·çš„åŒºåˆ«\"\u003eäº‹ä»¶ä»¥åŠä¸ä¿¡å·çš„åŒºåˆ«\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eäº‹ä»¶\u003c/strong\u003eï¼ˆeventï¼‰æ˜¯ç”±ç³»ç»Ÿæˆ–è€… Qt æœ¬èº«åœ¨ä¸åŒçš„æ—¶åˆ»å‘å‡ºçš„ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹é¼ æ ‡ã€æ•²ä¸‹é”®ç›˜ï¼Œæˆ–è€…æ˜¯çª—å£éœ€è¦é‡æ–°ç»˜åˆ¶çš„æ—¶å€™ï¼Œéƒ½ä¼šå‘å‡ºä¸€ä¸ªç›¸åº”çš„äº‹ä»¶ã€‚ä¸€äº›äº‹ä»¶åœ¨å¯¹ç”¨æˆ·æ“ä½œåšå‡ºå“åº”æ—¶å‘å‡ºï¼Œå¦‚é”®ç›˜äº‹ä»¶ç­‰ï¼›å¦ä¸€äº›äº‹ä»¶åˆ™æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨å‘å‡ºï¼Œå¦‚è®¡æ—¶å™¨äº‹ä»¶ã€‚\u003c/p\u003e","title":"Qt äº‹ä»¶"},{"content":"çœ‹åˆ°åŒäº‹è¦å®‰è£…è‡ªå·±ç¼–è¯‘ä¸€å¤©çš„åº“ï¼Œæœ¬æƒ³ä¼ æˆä¸€ä¸‹â€œè¸©å‘ç»éªŒâ€ï¼Œç»“æœä»–ç”¨scpå‘½ä»¤ç›´æ¥ä»å·²ç»å®‰è£…å¥½çš„ç”µè„‘é‡Œå¤åˆ¶äº†ä¸€ä»½ã€‚å¿ƒé‡Œä¸€ä¸‡åª XXX åœ¨å¥”è…¾ã€‚\næ—©çŸ¥é“å…ˆå­¦å­¦è¿™ä¸ªå‘½ä»¤äº†ã€‚\nå¯é€‰å‚æ•° å‚æ•° åŠŸèƒ½ -1 å¼ºåˆ¶ scp å‘½ä»¤ä½¿ç”¨åè®® ssh1 -2 å¼ºåˆ¶ scp å‘½ä»¤ä½¿ç”¨åè®® ssh2 -4 å¼ºåˆ¶ scp å‘½ä»¤ä½¿ç”¨åè®® ssh2 -6 å¼ºåˆ¶ scp å‘½ä»¤åªä½¿ç”¨ IPv6 å¯»å€ -B ä½¿ç”¨æ‰¹å¤„ç†æ¨¡å¼ï¼ˆä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¯¢é—®ä¼ è¾“å£ä»¤æˆ–çŸ­è¯­ï¼‰ -C å…è®¸å‹ç¼© -p ä¿ç•™åŸæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼Œè®¿é—®æ—¶é—´å’Œè®¿é—®æƒé™ã€‚ -q ä¸æ˜¾ç¤ºä¼ è¾“è¿›åº¦æ¡ -r é€’å½’å¤åˆ¶æ•´ä¸ªç›®å½• -v è¯¦ç»†æ–¹å¼æ˜¾ç¤ºè¾“å‡º -P æ³¨æ„æ˜¯å¤§å†™çš„ P, port æ˜¯æŒ‡å®šæ•°æ®ä¼ è¾“ç”¨åˆ°çš„ç«¯å£å· ä½¿ç”¨å®ä¾‹ å¤åˆ¶æ–‡ä»¶\nscp local_file rmot_usr@rmot_ip:rmot_folder scp /opt/soft/ root@192.168.120.204:/opt/soft/nginx-0.5.38.tar.gz ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-scp%E8%BF%9C%E7%A8%8B%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6/","summary":"\u003cp\u003eçœ‹åˆ°åŒäº‹è¦å®‰è£…è‡ªå·±ç¼–è¯‘ä¸€å¤©çš„åº“ï¼Œæœ¬æƒ³ä¼ æˆä¸€ä¸‹â€œè¸©å‘ç»éªŒâ€ï¼Œç»“æœä»–ç”¨\u003ccode\u003escp\u003c/code\u003eå‘½ä»¤ç›´æ¥ä»å·²ç»å®‰è£…å¥½çš„ç”µè„‘é‡Œå¤åˆ¶äº†ä¸€ä»½ã€‚å¿ƒé‡Œä¸€ä¸‡åª XXX åœ¨å¥”è…¾ã€‚\u003c/p\u003e\n\u003cp\u003eæ—©çŸ¥é“å…ˆå­¦å­¦è¿™ä¸ªå‘½ä»¤äº†ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-scp è¿œç¨‹æ‹·è´æ–‡ä»¶"},{"content":"grepå…¨ç§°global search regular expression(RE) and print out the lineï¼Œå…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥ã€‚è¿™åå­—å°±æ€ªå“äººï¼Œå¦‚æœç†Ÿç»ƒæŒæ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œé…ä¸Šè¿™å‘½ä»¤ Linux é‡Œå¯ä»¥æ¨ªç€èµ°äº†ã€‚\nè¿™ä¸ªå‘½ä»¤å‚æ•°å®åœ¨å¤ªå¤šï¼ŒåŠ ä¸Šæ­£åˆ™è¡¨è¾¾å¼ä¼°è®¡ä¸€å¼ çº¸ä¸å¤Ÿã€‚é‚£å°±ç›´æ¥ä¸Šå®ä¾‹å§ã€‚\nä½¿ç”¨å®ä¾‹ åœ¨å½“å‰ç›®å½•ä¸­ï¼ŒæŸ¥æ‰¾åç¼€å¸¦æœ‰cppå­—æ ·çš„æ–‡ä¸­åŒ…å«testå­—ç¬¦ä¸²çš„æ–‡ä»¶ï¼Œå¹¶æ‰“å°æ‰€åœ¨è¡Œ\ngrep test *cpp grep --colorauto test *cpp # ç”¨é¢œè‰²æ ‡è®° é€šè¿‡\u0026quot;-v\u0026quot;å‚æ•°å¯ä»¥æ‰“å°å‡ºä¸ç¬¦åˆæ¡ä»¶è¡Œçš„å†…å®¹ã€‚\ngrep -v test *cpp ç³»ç»ŸæŠ¥è­¦æ˜¾ç¤ºäº†æ—¶é—´ï¼Œä½†æ˜¯æ—¥å¿—æ–‡ä»¶å¤ªå¤§æ— æ³•ç›´æ¥ cat æŸ¥çœ‹ã€‚(æŸ¥è¯¢å«æœ‰ç‰¹å®šæ–‡æœ¬çš„æ–‡ä»¶ï¼Œå¹¶æ‹¿åˆ°è¿™äº›æ–‡æœ¬æ‰€åœ¨çš„è¡Œ)ã€‚-n æˆ– --line-number å¯ä»¥æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å‰ï¼Œæ ‡ç¤ºå‡ºè¯¥è¡Œçš„åˆ—æ•°ç¼–å·ã€‚\ngrep -n \u0026#39;2019-10-24 00:01:11\u0026#39; *.log grep é™é»˜è¾“å‡ºï¼Œä¸ä¼šè¾“å‡ºä»»ä½•ä¿¡æ¯ï¼Œå¦‚æœå‘½ä»¤è¿è¡ŒæˆåŠŸè¿”å› 0ï¼Œå¤±è´¥åˆ™è¿”å›é 0 å€¼ã€‚ä¸€èˆ¬ç”¨äºæ¡ä»¶æµ‹è¯•ã€‚\ngrep -q \u0026#34;test\u0026#34; filename åœ¨å¤šçº§ç›®å½•ä¸­å¯¹æ–‡æœ¬è¿›è¡Œé€’å½’æœç´¢\ngrep \u0026#34;text\u0026#34; . -r -n é…åˆç®¡é“ï¼ŒæŸ¥æ‰¾æŒ‡å®šçš„è¿›ç¨‹ä¿¡æ¯\nps -ef | grep svn æŸ¥æ‰¾æŒ‡å®šçš„è¿›ç¨‹ä¸ªæ•°ï¼Œ-cè®¡æ•°\nps -ef | grep svn -c å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼é€šé…ç¬¦\né€šé…ç¬¦ åŠŸèƒ½ c* å°†åŒ¹é… 0 ä¸ªï¼ˆå³ç©ºç™½ï¼‰æˆ–å¤šä¸ªå­—ç¬¦ cï¼ˆc ä¸ºä»»ä¸€å­—ç¬¦ï¼‰ . å°†åŒ¹é…ä»»ä½•ä¸€ä¸ªå­—ç¬¦ï¼Œä¸”åªèƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ [xyz] åŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ [^xyz] åŒ¹é…é™¤æ–¹æ‹¬å·ä¸­å­—ç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦ ^ é”å®šè¡Œçš„å¼€å¤´ $ é”å®šè¡Œçš„ç»“å°¾ åœ¨id.txtä¸­æ‰¾åˆ°æ‰€æœ‰ä»¥ 3207 å¼€å¤´çš„æ•°æ®\ngrep ^3207 id.txt ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-grep%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/","summary":"\u003cp\u003e\u003ccode\u003egrep\u003c/code\u003eå…¨ç§°\u003ccode\u003eglobal search regular expression(RE) and print out the line\u003c/code\u003eï¼Œå…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥ã€‚è¿™åå­—å°±æ€ªå“äººï¼Œå¦‚æœç†Ÿç»ƒæŒæ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œé…ä¸Šè¿™å‘½ä»¤ Linux é‡Œå¯ä»¥æ¨ªç€èµ°äº†ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-grep æ–‡æœ¬æœç´¢"},{"content":"æœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç ï¼Œå¯åœ¨æ­¤å¤„æŸ¥çœ‹\nQt ä¸­ä½¿ç”¨ QDialog ç±»å®ç°å¯¹è¯æ¡†ã€‚å°±åƒä¸»çª—å£ä¸€æ ·ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè®¾è®¡ä¸€ä¸ªç±»ç»§æ‰¿ QDialogã€‚QDialogï¼ˆåŠå…¶å­ç±»ï¼Œä»¥åŠæ‰€æœ‰ Qt::Dialog ç±»å‹çš„ç±»ï¼‰çš„å¯¹äºå…¶ parent æŒ‡é’ˆéƒ½æœ‰é¢å¤–çš„è§£é‡Šï¼š\nå¦‚æœ parent ä¸º NULLï¼Œåˆ™è¯¥å¯¹è¯æ¡†ä¼šä½œä¸ºä¸€ä¸ªé¡¶å±‚çª—å£ï¼Œå¦åˆ™åˆ™ä½œä¸ºå…¶çˆ¶ç»„ä»¶çš„å­å¯¹è¯æ¡†ï¼ˆæ­¤æ—¶ï¼Œå…¶é»˜è®¤å‡ºç°çš„ä½ç½®æ˜¯ parent çš„ä¸­å¿ƒï¼‰ã€‚\né¡¶å±‚çª—å£ä¸éé¡¶å±‚çª—å£çš„åŒºåˆ«åœ¨äºï¼Œé¡¶å±‚çª—å£åœ¨ä»»åŠ¡æ ä¼šæœ‰è‡ªå·±çš„ä½ç½®ï¼Œè€Œéé¡¶å±‚çª—å£åˆ™ä¼šå…±äº«å…¶çˆ¶ç»„ä»¶çš„ä½ç½®ã€‚\nå¯¹è¯æ¡†åˆ†ä¸ºæ¨¡æ€å¯¹è¯æ¡†å’Œéæ¨¡æ€å¯¹è¯æ¡†ã€‚æ‰€è°“æ¨¡æ€å¯¹è¯æ¡†ï¼Œå°±æ˜¯ä¼šé˜»å¡åŒä¸€åº”ç”¨ç¨‹åºä¸­å…¶å®ƒçª—å£çš„è¾“å…¥ã€‚æ¨¡æ€å¯¹è¯æ¡†å¾ˆå¸¸è§ï¼Œæ¯”å¦‚â€œæ‰“å¼€æ–‡ä»¶â€åŠŸèƒ½ã€‚ä½ å¯ä»¥å°è¯•ä¸€ä¸‹è®°äº‹æœ¬çš„æ‰“å¼€æ–‡ä»¶ï¼Œå½“æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†å‡ºç°æ—¶ï¼Œæˆ‘ä»¬æ˜¯ä¸èƒ½å¯¹é™¤æ­¤å¯¹è¯æ¡†ä¹‹å¤–çš„çª—å£éƒ¨åˆ†è¿›è¡Œæ“ä½œçš„ã€‚\nä¸æ­¤ç›¸åçš„æ˜¯éæ¨¡æ€å¯¹è¯æ¡†ï¼Œä¾‹å¦‚æŸ¥æ‰¾å¯¹è¯æ¡†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ˜¾ç¤ºç€æŸ¥æ‰¾å¯¹è¯æ¡†çš„åŒæ—¶ï¼Œç»§ç»­å¯¹è®°äº‹æœ¬çš„å†…å®¹è¿›è¡Œç¼–è¾‘ã€‚\nQt æ”¯æŒæ¨¡æ€å¯¹è¯æ¡†å’Œéæ¨¡æ€å¯¹è¯æ¡†ã€‚å…¶ä¸­ï¼ŒQt æœ‰ä¸¤ç§çº§åˆ«çš„æ¨¡æ€å¯¹è¯æ¡†ï¼šåº”ç”¨ç¨‹åºçº§åˆ«çš„æ¨¡æ€å’Œçª—å£çº§åˆ«çš„æ¨¡æ€ï¼Œé»˜è®¤æ˜¯åº”ç”¨ç¨‹åºçº§åˆ«çš„æ¨¡æ€ã€‚åº”ç”¨ç¨‹åºçº§åˆ«çš„æ¨¡æ€æ˜¯æŒ‡ï¼Œå½“è¯¥ç§æ¨¡æ€çš„å¯¹è¯æ¡†å‡ºç°æ—¶ï¼Œç”¨æˆ·å¿…é¡»é¦–å…ˆå¯¹å¯¹è¯æ¡†è¿›è¡Œäº¤äº’ï¼Œç›´åˆ°å…³é—­å¯¹è¯æ¡†ï¼Œç„¶åæ‰èƒ½è®¿é—®ç¨‹åºä¸­å…¶ä»–çš„çª—å£ã€‚çª—å£çº§åˆ«çš„æ¨¡æ€æ˜¯æŒ‡ï¼Œè¯¥æ¨¡æ€ä»…ä»…é˜»å¡ä¸å¯¹è¯æ¡†å…³è”çš„çª—å£ï¼Œä½†æ˜¯ä¾ç„¶å…è®¸ç”¨æˆ·ä¸ç¨‹åºä¸­å…¶å®ƒçª—å£äº¤äº’ã€‚\næ¶ˆæ¯å¯¹è¯æ¡† QMessageBox æ–‡ä»¶å¯¹è¯æ¡† QFileDialog \u0026lsquo;QTextEdit\u0026rsquo; Does not name a type éœ€è¦åŒ…å«å¤´æ–‡ä»¶\n#include \u0026lt;QTextEdit\u0026gt; Qt éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶å®åœ¨å¤ªå¤šäº†ã€‚\nå¯èƒ½æ·»åŠ äº†å¤´æ–‡ä»¶ä»ç„¶æŠ¥åŒæ ·çš„é”™ï¼Œæ²¡æœ‰æœç´¢åˆ°ç›¸å…³çš„è§£ç­”ã€‚\næˆ‘çš„åšæ³•æ˜¯ï¼š\nç¡®ä¿åœ¨.proæ–‡ä»¶ä¸­åŠ å…¥QT += widgetså’ŒCONFIG += c++11 å°†åŒ…å«åº“æ–‡ä»¶è¯­å¥éƒ½æ”¾åˆ°å¤´æ–‡ä»¶.hä¸­ ","permalink":"https://lifeislife.cn/posts/qt%E5%AF%B9%E8%AF%9D%E6%A1%86/","summary":"\u003cp\u003eæœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç ï¼Œå¯åœ¨\u003ca href=\"https://github.com/Dunky-Z/learning-qt/tree/main/Dialog\"\u003eæ­¤å¤„æŸ¥çœ‹\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eQt ä¸­ä½¿ç”¨ QDialog ç±»å®ç°å¯¹è¯æ¡†ã€‚å°±åƒä¸»çª—å£ä¸€æ ·ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè®¾è®¡ä¸€ä¸ªç±»ç»§æ‰¿ QDialogã€‚QDialogï¼ˆåŠå…¶å­ç±»ï¼Œä»¥åŠæ‰€æœ‰ Qt::Dialog ç±»å‹çš„ç±»ï¼‰çš„å¯¹äºå…¶ parent æŒ‡é’ˆéƒ½æœ‰é¢å¤–çš„è§£é‡Šï¼š\u003c/p\u003e","title":"Qt å¯¹è¯æ¡†"},{"content":"gitignore çš„ä½œç”¨ åœ¨ä½¿ç”¨Gitç‰ˆæœ¬æ§åˆ¶æ—¶ï¼Œå¿…é¡»è¦ç”¨.gitignoreè¿™ä¸ªæ–‡ä»¶æ¥å‘Šè¯‰Gité‚£äº›æ–‡ä»¶æˆ–ç›®å½•ä¸éœ€è¦æ·»åŠ åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­ã€‚é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯ä¸éœ€è¦git pushåˆ°è¿œç¨‹ä»“åº“ã€‚\nåœ¨å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¼€å‘ç›®å½•ä¸‹ä¼šæœ‰å„ç§æ ¼å¼çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ C è¯­è¨€é™¤äº†.cæºç ï¼Œè¿˜ä¼šæœ‰.oç›®æ ‡æ–‡ä»¶ï¼Œæ²¡æœ‰åç¼€çš„å¯æ‰§è¡Œç¨‹åºç­‰ç­‰ï¼Œå‡å¦‚ä½ è¦è¿›è¡Œæ·±åº¦å­¦ä¹ ç±»çš„å¼€å‘ï¼Œå¦‚å›¾åƒè¯†åˆ«ï¼Œéœ€è¦è®­ç»ƒå¤§é‡æ•°æ®ï¼Œå¦‚æœè¿™äº›è®­ç»ƒæ•°æ®ä¹Ÿåˆ°è·Ÿè¸ªç®¡ç†ï¼Œé‚£pushä¸€æ¬¡å°±å¯ä»¥ä¸‹ç­å›å®¶äº†ã€‚\nä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆè®©GitçŸ¥é“å“ªäº›æ–‡ä»¶éœ€è¦è·Ÿè¸ªï¼Œå“ªäº›æ–‡ä»¶ä¸éœ€è¦å‘¢ï¼Œè¿™æ—¶å€™.gitignoreæ–‡ä»¶å°±èµ·ä½œç”¨äº†ã€‚\nå¸¸ç”¨è§„åˆ™ ç®€å•ä»‹ç»ä¸€ä¸‹å¸¸ç”¨çš„è§„åˆ™ï¼Œè™½ç„¶åé¢æœ‰ç°æˆçš„æ¨¡æ¿ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯äº†è§£ä¸€ä¸‹å¸¸ç”¨è§„åˆ™ï¼Œèƒ½çœ‹å¾—æ‡‚.gitignoreé‡Œå†™äº†å•¥ã€‚ä¹Ÿæ–¹ä¾¿è‡ªå·±ç¼–å†™ä¸€äº›è§„åˆ™é€‚åº”è‡ªå·±çš„å·¥ä½œã€‚\n/test/ # è¿‡æ»¤æ•´ä¸ªtestæ–‡ä»¶å¤¹ *.o # è¿‡æ»¤æ‰€æœ‰.oæ–‡ä»¶ /test/hello.o # è¿‡æ»¤testæ–‡ä»¶å¤¹ä¸‹hello.oè¿™ä¸ªæ–‡ä»¶ !src/ # ä¸è¿‡æ»¤srcè¿™ä¸ªæ–‡ä»¶å¤¹ !*.c # ä¸è¿‡æ»¤.cæ–‡ä»¶ é€šè¿‡ gitignore æ–‡ä»¶æ›´æ–°è¿œç¨‹ä»“åº“ ä¸Šé¢è¯´åˆ°æˆ‘ä»¬åœ¨ä¸åŒç¯å¢ƒä¸‹éœ€è¦åˆ¶å®šä¸åŒçš„è§„åˆ™ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦é‡æ–°å†™ä¸€éï¼Œåˆæˆ–è€…ä¸çŸ¥é“åˆ¶å®šä»€ä¹ˆæ ·çš„è§„åˆ™ï¼Œè¿˜æ˜¯æŒºéº»çƒ¦çš„ã€‚\né¦–å…ˆæ¨èä¸€ä¸ª.gitignoreæ¨¡æ¿ä»“åº“ï¼Œåœ¨å¹³æ—¶å·¥ä½œå­¦ä¹ ä¸­é‡åˆ°çš„å„ç§è¯­è¨€ç¯å¢ƒä¸‹çš„æ¨¡æ¿éƒ½èƒ½æ‰¾åˆ°ã€‚è¿™æ˜¯å¹¿å¤§å¼€å‘äººå‘˜æ€»ç»“çš„ä¸€äº›è§„åˆ™ã€‚\næœ€è¿‘åœ¨å­¦ä¹ Qtï¼Œåœ¨æ‰€æœ‰æ¨¡æ¿ä¸­æœç´¢å…³é”®å­—ï¼Œæ‰¾åˆ°äº†Qt.gitignoreè¿™ä¸ªæ¨¡æ¿æ‰“å¼€å¹¶å¤åˆ¶ï¼Œåœ¨è‡ªå·±æœ¬åœ°ä»“åº“é‡Œæ–°å»ºä¸€ä¸ª.gitignoreæ–‡ä»¶ï¼Œå°†å¤åˆ¶çš„å†…å®¹ç²˜è´´è¿›å»ã€‚\nç°åœ¨å°±è¦è§£å†³å¦‚ä½•æ›´æ–°è¿œç¨‹ä»“åº“çš„å†…å®¹ï¼Œå› ä¸ºæˆ‘åœ¨ä½¿ç”¨.gitignoreæ–‡ä»¶ä¹‹å‰å·²ç»å‘è¿œç¨‹pushè¿‡äº†ï¼Œç°åœ¨éœ€è¦åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ã€‚\ngit rm -r --cached . rmå°±æ˜¯Linuxä¸‹å¸¸ç”¨çš„åˆ é™¤å‘½ä»¤ï¼Œ-rè¡¨ç¤ºé€’å½’åˆ é™¤ï¼Œ--cachedè¡¨ç¤ºéœ€è¦åœ¨æœ¬åœ°ç«¯ï¼ˆå·¥ä½œåŒºï¼‰ä¿ç•™æ–‡ä»¶ï¼Œ.è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶ã€‚\ngit add . # é‡æ–°æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œç„¶åæäº¤ï¼Œæ¨é€ git commit -m \u0026#34;update\u0026#34; git push ","permalink":"https://lifeislife.cn/posts/git%E4%B8%AD%E6%B7%BB%E5%8A%A0gitignore%E5%B9%B6%E6%9B%B4%E6%96%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/","summary":"\u003ch2 id=\"gitignore-çš„ä½œç”¨\"\u003egitignore çš„ä½œç”¨\u003c/h2\u003e\n\u003cp\u003eåœ¨ä½¿ç”¨\u003ccode\u003eGit\u003c/code\u003eç‰ˆæœ¬æ§åˆ¶æ—¶ï¼Œå¿…é¡»è¦ç”¨\u003ccode\u003e.gitignore\u003c/code\u003eè¿™ä¸ªæ–‡ä»¶æ¥å‘Šè¯‰\u003ccode\u003eGit\u003c/code\u003eé‚£äº›æ–‡ä»¶æˆ–ç›®å½•ä¸éœ€è¦æ·»åŠ åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­ã€‚é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯ä¸éœ€è¦\u003ccode\u003egit push\u003c/code\u003eåˆ°è¿œç¨‹ä»“åº“ã€‚\u003c/p\u003e","title":"Git ä¸­æ·»åŠ  gitignore å¹¶æ›´æ–°è¿œç¨‹ä»“åº“"},{"content":" æœ¬æ–‡æ˜¯å­¦ä¹ ã€Qt å­¦ä¹ ä¹‹è·¯ã€‘çš„å­¦ä¹ ç¬”è®°ï¼Œæºç éåŸåˆ›ã€‚GithubåŒæ­¥æœ¬æ–‡æ›´æ”¹çš„ä»£ç ã€‚\nåœ¨å»ºç«‹ Qt å­¦ä¹ ä»£ç ä»“æ—¶ï¼Œæ¨é€åˆ°è¿œç¨‹çš„ä»£ç æ¯”è¾ƒä¹±ï¼Œæ‰€ä»¥ç”¨gitignoreæ–‡ä»¶å±è”½äº†ä¸€äº›ã€‚ç›¸å…³æ–¹æ³•åœ¨è¿™é‡Œã€‚\nèµ„æºæ–‡ä»¶ Qt èµ„æºç³»ç»Ÿæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„èµ„æºæœºåˆ¶ï¼Œç”¨äºå°†ç¨‹åºè¿è¡Œæ—¶æ‰€éœ€è¦çš„èµ„æºä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨äºå¯æ‰§è¡Œæ–‡ä»¶å†…éƒ¨ã€‚å¦‚æœä½ çš„ç¨‹åºéœ€è¦åŠ è½½ç‰¹å®šçš„èµ„æºï¼ˆå›¾æ ‡ã€æ–‡æœ¬ç¿»è¯‘ç­‰ï¼‰ï¼Œé‚£ä¹ˆï¼Œå°†å…¶æ”¾ç½®åœ¨èµ„æºæ–‡ä»¶ä¸­ï¼Œå°±å†ä¹Ÿä¸éœ€è¦æ‹…å¿ƒè¿™äº›æ–‡ä»¶çš„ä¸¢å¤±ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ å°†èµ„æºä»¥èµ„æºæ–‡ä»¶å½¢å¼å­˜å‚¨ï¼Œå®ƒæ˜¯ä¼šç¼–è¯‘åˆ°å¯æ‰§è¡Œæ–‡ä»¶å†…éƒ¨ã€‚\nä½¿ç”¨ QtCreator çš„ç›¸å…³æ–¹æ³•ï¼Œè®²å¾—ä¹Ÿå¾ˆæ¸…æ¥šäº†ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚\nä¸ä½¿ç”¨ QtCreator æ·»åŠ èµ„æºæ–‡ä»¶ åœ¨ä½¿ç”¨å‘½ä»¤è¡Œç¼–è¯‘è¿è¡Œæ—¶ï¼Œå¹¶ä¸èƒ½åƒåœ¨ QtCreator ä¸­ä¸€æ ·ï¼Œå¯ä»¥è‡ªåŠ¨çš„ç”Ÿæˆä¸€ä¸ª.qrcæ–‡ä»¶ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±å»ç¼–å†™ã€‚ä»åŸæ–‡çš„è®²è§£ä¸­æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªXMLæè¿°æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†æ–‡ä»¶ä½ç½®ç­‰ä¿¡æ¯ã€‚å¦‚åŸæ–‡ä¸­çš„.qrcæ–‡ä»¶ï¼š\n\u0026lt;RCC\u0026gt; \u0026lt;qresource prefix=\u0026#34;/images\u0026#34;\u0026gt; \u0026lt;file alias=\u0026#34;doc-open\u0026#34;\u0026gt;document-open.png\u0026lt;/file\u0026gt; \u0026lt;/qresource\u0026gt; \u0026lt;/RCC\u0026gt; å…¶ä¸­\n\u0026lt;RCC\u0026gt; \u0026lt;qresource\u0026gt; \u0026lt;/qresource\u0026gt; \u0026lt;/RCC\u0026gt; æ˜¯å›ºå®šçš„æ ‡è®°ï¼Œå†å¾€ä¸­é—´åŠ ä¸œè¥¿ã€‚å¦‚æœå­¦è¿‡htmlè¯­è¨€å°±å¾ˆå®¹æ˜“ç†è§£ã€‚å…¶ä¸­prefix=\u0026quot;/images\u0026quot;å°±æ˜¯è‡ªåŠ¨åŠ ä¸Šå‰ç¼€/imagesï¼Œå› ä¸ºå›¾ç‰‡åœ¨imagesç›®å½•ä¸‹ï¼Œæ¯æ¬¡éƒ½åŠ è¿™ä¸ªè·¯å¾„å¤ªéº»çƒ¦ï¼Œå¤ªé•¿ã€‚\nalias=\u0026quot;doc-open\u0026quot;æ„æ€æ˜¯å°†document-open.pngè¿™ä¸ªæ–‡ä»¶èµ·ä¸ªåˆ«åï¼ŒåŸæ¥çš„å¤ªé•¿äº†ã€‚ä¸‹æ¬¡å†ç”¨document-open.pngå°±åªéœ€è¦ç”¨doc-openå°±è¡Œäº†ã€‚\næˆ‘ä»¬çŸ¥é“äº†è¿™äº›ï¼Œå°±å¯ä»¥ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„.qrcæ–‡ä»¶äº†ã€‚æˆ‘ä¹Ÿè‡ªå·±ä¸‹è½½äº†ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„å›¾æ ‡open.pngï¼Œæ–‡ä»¶æ¯”è¾ƒå°‘ï¼Œå°±å’Œä»£ç æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹äº†ã€‚æˆ‘ä»¬å°†å…¶å‘½åä¸ºico.qrcï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ä»¥åéƒ½å­˜æ”¾æœ‰å…³å›¾æ ‡çš„èµ„æºï¼Œæˆ‘ä»¬å¼€å§‹ç¼–å†™ï¼š\n\u0026lt;RCC\u0026gt; \u0026lt;qresource\u0026gt; \u0026lt;file\u0026gt;open.png\u0026lt;/file\u0026gt; \u0026lt;/qresource\u0026gt; \u0026lt;/RCC\u0026gt; å› ä¸ºæ·»åŠ èµ„æºåéœ€è¦æ›´æ–°.proæ–‡ä»¶æ‰èƒ½æ­£å¸¸ç¼–è¯‘ï¼Œæ‰€ä»¥éœ€è¦åœ¨.proä¸­åŠ å…¥RESOURCES ä¿¡æ¯ï¼Œå°±åœ¨.proæ–‡ä»¶æœ€åä¸€è¡ŒåŠ å…¥ï¼š\nRESOURCES += ico.qrc ç„¶åè¾“å…¥å‘½ä»¤\nqmake MainWindow.pro make clean #å› ä¸ºä¹‹å‰å¯èƒ½makeè¿‡ï¼Œå…ˆæ¸…ç†ä¸€é make ./MainWindow å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œå°†ä¼šå¾—åˆ°ä¸‹é¢çš„çª—å£ï¼š \u003c!DOCTYPE html\u003e Responsive Image \u003c!DOCTYPE html\u003e Responsive Image Reference https://www.devbean.net/2012/08/qt-study-road-2-action/ ","permalink":"https://lifeislife.cn/posts/qt%E6%B7%BB%E5%8A%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/","summary":"\u003cblockquote\u003e\n\u003cp\u003eæœ¬æ–‡æ˜¯å­¦ä¹ ã€\u003ca href=\"https://www.devbean.net/2012/08/qt-study-road-2-catelog/\"\u003eQt å­¦ä¹ ä¹‹è·¯\u003c/a\u003eã€‘çš„å­¦ä¹ ç¬”è®°ï¼Œæºç éåŸåˆ›ã€‚\u003ca href=\"https://github.com/Dunky-Z/learning-qt/tree/main/MainWindow\"\u003eGithub\u003c/a\u003eåŒæ­¥æœ¬æ–‡æ›´æ”¹çš„ä»£ç ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eåœ¨å»ºç«‹ Qt å­¦ä¹ ä»£ç ä»“æ—¶ï¼Œæ¨é€åˆ°è¿œç¨‹çš„ä»£ç æ¯”è¾ƒä¹±ï¼Œæ‰€ä»¥ç”¨\u003ccode\u003egitignore\u003c/code\u003eæ–‡ä»¶å±è”½äº†ä¸€äº›ã€‚ç›¸å…³æ–¹æ³•åœ¨\u003ca href=\"https://dunky-z.github.io/2021/08/04/Git%E4%B8%AD%E6%B7%BB%E5%8A%A0gitignore%E5%B9%B6%E6%9B%B4%E6%96%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/\"\u003eè¿™é‡Œ\u003c/a\u003eã€‚\u003c/p\u003e","title":"Qt æ·»åŠ èµ„æºæ–‡ä»¶"},{"content":"cat å¯ä»¥å°†æ–‡ä»¶çš„å†…å®¹æ–¹ä¾¿åœ°è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚ä½†æ˜¯å®ƒçš„å…¨ç§°concatenateæ„ä¸ºâ€œè¿æ¥â€ï¼Œè¿æ¥æ–‡ä»¶ä¹Ÿæ˜¯å®ƒçš„é‡è¦åŠŸèƒ½ä¹‹ä¸€ï¼Œå¾ˆå¤šäººå¯èƒ½éƒ½ä¸å¸¸ç”¨ã€‚åªè®°å¾—è¾“å‡ºæ–‡ä»¶å†…å®¹äº†ã€‚\nå¯é€‰å‚æ•° -n æˆ– --number #ç”± 1 å¼€å§‹å¯¹æ‰€æœ‰è¾“å‡ºçš„è¡Œæ•°ç¼–å·ã€‚ -b æˆ– --number-nonblank #å’Œ -n ç›¸ä¼¼ï¼Œåªä¸è¿‡å¯¹äºç©ºç™½è¡Œä¸ç¼–å·ã€‚ -s æˆ– --squeeze-blank #å½“é‡åˆ°æœ‰è¿ç»­ä¸¤è¡Œä»¥ä¸Šçš„ç©ºç™½è¡Œï¼Œå°±ä»£æ¢ä¸ºä¸€è¡Œçš„ç©ºç™½è¡Œã€‚ -v æˆ– --show-nonprinting #ä½¿ç”¨ ^ å’Œ M- ç¬¦å·ï¼Œé™¤äº† LFD å’Œ TAB ä¹‹å¤–ã€‚ -E æˆ– --show-ends # åœ¨æ¯è¡Œç»“æŸå¤„æ˜¾ç¤º $ã€‚ -T æˆ– --show-tabs: #å°† TAB å­—ç¬¦æ˜¾ç¤ºä¸º ^Iã€‚ -A, --show-all #ç­‰ä»·äº -vETã€‚ -e #ç­‰ä»·äº\u0026#34;-vE\u0026#34;é€‰é¡¹ï¼› -t #ç­‰ä»·äº\u0026#34;-vT\u0026#34;é€‰é¡¹ï¼› ä½¿ç”¨å®ä¾‹ å°†æ–‡ä»¶å†…å®¹è¾“å‡ºåˆ°å±å¹•\nâœ ~ cat test.txt This is firt line! This is second line! This is third line! This is fourth line! å°†test.txtçš„å†…å®¹è¾“å…¥åˆ°test01.txtä¸­\nâœ ~ cat test.txt \u0026gt; test01.txt âœ ~ cat test01.txt This is firt line! This is second line! This is third line! This is fourth line! å¸¦è¡Œå·è¾“å‡º\nâœ ~ cat -n test.txt 1 This is firt line! 2 This is second line! 3 This is third line! 4 This is fourth line! å°†ä¸¤ä¸ªæ–‡ä»¶å†…å®¹åˆå¹¶ï¼Œå†å†™å…¥åˆ°ç¬¬ä¸‰ä¸ªæ–‡ä»¶ä¸­\nâœ ~ cat test.txt test01.txt \u0026gt;\u0026gt; test02.txt âœ ~ cat test02.txt This is firt line! This is second line! This is third line! This is fourth line! This is firt line! This is second line! This is third line! This is fourth line! æ¸…ç©ºæ–‡ä»¶ä¸­çš„å†…å®¹\nâœ ~ cat /dev/null \u0026gt; test.txt âœ ~ cat test.txt âœ ~ åœ¨ç±» Unix ç³»ç»Ÿä¸­ï¼Œ/dev/null ç§°ç©ºè®¾å¤‡ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è®¾å¤‡æ–‡ä»¶ï¼Œå®ƒä¸¢å¼ƒä¸€åˆ‡å†™å…¥å…¶ä¸­çš„æ•°æ®ï¼ˆä½†æŠ¥å‘Šå†™å…¥æ“ä½œæˆåŠŸï¼‰ï¼Œè¯»å–å®ƒåˆ™ä¼šç«‹å³å¾—åˆ°ä¸€ä¸ª EOFã€‚\nReference https://www.runoob.com/linux/linux-comm-cat.html ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-cat%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E7%9A%84%E5%B0%8F%E7%8C%AB%E5%92%AA/","summary":"\u003cp\u003e\u003ccode\u003ecat\u003c/code\u003e å¯ä»¥å°†æ–‡ä»¶çš„å†…å®¹æ–¹ä¾¿åœ°è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚ä½†æ˜¯å®ƒçš„å…¨ç§°\u003ccode\u003econcatenate\u003c/code\u003eæ„ä¸ºâ€œè¿æ¥â€ï¼Œè¿æ¥æ–‡ä»¶ä¹Ÿæ˜¯å®ƒçš„é‡è¦åŠŸèƒ½ä¹‹ä¸€ï¼Œå¾ˆå¤šäººå¯èƒ½éƒ½ä¸å¸¸ç”¨ã€‚åªè®°å¾—è¾“å‡ºæ–‡ä»¶å†…å®¹äº†ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-cat å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„å°çŒ«å’ª"},{"content":"åœ¨æ‰§è¡Œçš„ç¨‹åºæºç å¼€å¤´æœ‰è¿™ä¹ˆä¸€å¥!#/usr/bin/env pythonï¼Œ!#è¿™ç©æ„å«shebangä¹Ÿå«hashbangã€‚ä»–ç”¨æ¥æŒ‡å®šè„šæœ¬çš„è§£é‡Šå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç¨‹åºæŒ‡å®špythonè§£é‡Šå™¨ã€‚\nå†çœ‹è¿™ä¸ªé”™è¯¯æç¤ºï¼Œç½ªé­ç¥¸é¦–å°±æ˜¯è¿™å¥å‘½ä»¤ï¼Œå°±æ˜¯è¯´åœ¨ç¯å¢ƒå˜é‡æ‰¾ä¸åˆ°pythonï¼Œé€šä¿—ç‚¹è¯´ï¼Œå‡å¦‚æˆ‘è¦èƒ½ç›´æ¥ç”¨pythonæ¥è·‘è¿™ä¸ªç¨‹åºï¼Œæˆ‘åœ¨å‘½ä»¤è¡Œç›´æ¥è¾“å…¥pythonåº”è¯¥æ˜¯å¯ä»¥è¿›å…¥pythonç¯å¢ƒçš„ï¼Œä½†æ˜¯æ­¤æ—¶è‚¯å®šä¸èƒ½ã€‚æˆ‘ä»¬å¯ä»¥è¯•è¯•\ndominic@hanhan:~$ python Commond not found xxxxxxxxxxx è§£å†³æ–¹æ¡ˆä¸€ ç³»ç»Ÿé‡Œæ²¡æœ‰pythonè¿˜è·‘ä¸ªé”¤å­ï¼Œå…ˆè£…ä¸Šå†è¯´\napt-get install python3 è¿™æ—¶å€™å¯èƒ½å°±è§£å†³é—®é¢˜äº†\nè§£å†³æ–¹æ¡ˆäºŒ æœ‰çš„äººå¯èƒ½pythonæ—©å°±è£…äº†ï¼Œä½†æ˜¯ä»ç„¶æœ‰è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å‘½ä»¤è¾“å…¥pythonä»ç„¶æ²¡æ³•ç”¨ï¼Œä½†æ˜¯è¾“å…¥python3å°±å¯ä»¥\né‚£python3å¯ä»¥ï¼Œæˆ‘ç›´æ¥å°†pythonæ”¹æˆpython3ä¸å°±å®Œäº†ã€‚æ²¡é”™ï¼\næ‰“å¼€æ–‡ä»¶å°†!#/usr/bin/env pythonæ”¹æˆ!#/usr/bin/env python3\nè§£å†³æ–¹æ¡ˆä¸‰ å¦‚æœäº†è§£è½¯é“¾æ¥ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ä¸ç”¨å»æ”¹æºç äº†ï¼Œæºç æœ€å¥½è¿˜æ˜¯ä¿æŒåŸæ ·ã€‚\næ—¢ç„¶æ‰¾ä¸åˆ°pythonè¿™ç©æ„ï¼Œé‚£æˆ‘ä»¬ç»™ä»–å»ºä¸€ä¸ªä¸å°±å®Œäº†ã€‚\nä»–è¦pythonå°±æ˜¯ç”¨æ¥è§£é‡Šç¨‹åºçš„ï¼Œæˆ‘ä»¬æœ¬åœ°è£…çš„python3å°±æ˜¯ä»–éœ€è¦çš„ä¸œè¥¿\nå…ˆæ‰¾æ‰¾æˆ‘ä»¬çš„python3åœ¨å“ª\ndominic@hanhan:~$ whereis python3 python3: /usr/bin/python3.8 /usr/bin/python3.8-config /usr/bin/python3 ä¸€èˆ¬åœ¨/usr/binç›®å½•ä¸‹ï¼Œç„¶åæˆ‘ä»¬åœ¨è¿™ä¸ªç›®å½•ä¸‹ç»™ä»–åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥â€œå¿«æ·æ–¹å¼â€ï¼Œå…·ä½“å’‹ç”¨çš„å•¥æ„æ€ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚\nsudo ln -s /usr/bin/python3 /usr/bin/python è¿™æ ·ç¨‹åºå†æ‰¾pythonæ—¶å°±ä¼šé“¾æ¥åˆ°python3ï¼Œç„¶åç”¨python3å»å½“è§£é‡Šå™¨ã€‚\nè§£å†³æ–¹æ¡ˆå›› å¯èƒ½åœ¨rootç›®å½•ä¸‹ä½¿ç”¨è¿‡repoï¼Œå°†å…¶åˆ é™¤\n","permalink":"https://lifeislife.cn/posts/%E8%A7%A3%E5%86%B3-usr-bin-env-python-no-such-file-or-directory/","summary":"\u003cp\u003eåœ¨æ‰§è¡Œçš„ç¨‹åºæºç å¼€å¤´æœ‰è¿™ä¹ˆä¸€å¥\u003ccode\u003e!#/usr/bin/env python\u003c/code\u003eï¼Œ\u003ccode\u003e!#\u003c/code\u003eè¿™ç©æ„å«\u003ccode\u003eshebang\u003c/code\u003eä¹Ÿå«\u003ccode\u003ehashbang\u003c/code\u003eã€‚ä»–ç”¨æ¥æŒ‡å®šè„šæœ¬çš„è§£é‡Šå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç¨‹åºæŒ‡å®š\u003ccode\u003epython\u003c/code\u003eè§£é‡Šå™¨ã€‚\u003c/p\u003e","title":"è§£å†³/usr/bin/env:python:No such file or directory"},{"content":"Linux lnï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šlink filesï¼‰å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸é‡è¦å‘½ä»¤ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä¸ºæŸä¸€ä¸ªæ–‡ä»¶åœ¨å¦å¤–ä¸€ä¸ªä½ç½®å»ºç«‹ä¸€ä¸ªåŒæ­¥çš„é“¾æ¥ã€‚è¿™æœ‰ç‚¹åƒ Windows ç¯å¢ƒä¸‹çš„å¿«æ·æ–¹å¼ã€‚ä»‹ç»å‘½ä»¤å‰äº†è§£ä¸€ä¸‹è½¯é“¾æ¥ï¼Œç¡¬é“¾æ¥å…·ä½“æ˜¯ä»€ä¹ˆã€‚\nç¡¬é“¾æ¥ Hard Link åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª inodeï¼Œæ–‡ä»¶çš„å†…å®¹åœ¨å­˜å‚¨åœ¨ inode æŒ‡å‘çš„ data block ä¸­ã€‚è¦è¯»å–è¯¥æ–‡ä»¶çš„å†…å®¹ï¼Œéœ€è¦é€šè¿‡æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸­è®°å½•çš„æ–‡ä»¶åæ‰¾åˆ°æ–‡ä»¶çš„ inode å·ï¼Œç„¶åé€šè¿‡ inode æ‰¾åˆ°å­˜å‚¨æ–‡ä»¶å†…å®¹çš„ data blockã€‚å½“ç„¶å¤šä¸ªæ–‡ä»¶åå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªinodeã€‚\nä½¿ç”¨llå‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œ-iå‚æ•°æ˜¾ç¤ºå…¶ç»“ç‚¹ä¿¡æ¯ï¼Œå…¶ä¸­æœ€å‰é¢çš„ä¸€ä¸²æ•°å­—å°±æ˜¯inodeä¿¡æ¯ã€‚æˆ‘ä»¬ä»¥/opt/test.txtæ–‡ä»¶ä¸ºä¾‹ï¼ŒæŸ¥çœ‹å…¶ç»“ç‚¹ä¿¡æ¯ã€‚\ndominic@hanhan:/opt$ ll -i test.txt 2498138 -rw-r--r-- 1 root root 4 8æœˆ 3 12:16 test.txt ä½¿ç”¨ ln å‘½ä»¤åœ¨/opt/tempç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª test.txt æ–‡ä»¶çš„ç¡¬é“¾æ¥ï¼Œç„¶åè§‚å¯Ÿå…¶æ–‡ä»¶å±æ€§ï¼š\ndominic@hanhan:/opt/temp$ sudo ln ../test.txt . dominic@hanhan:/opt/temp$ ll -i ../test.txt test.txt 2498138 -rw-r--r-- 2 root root 4 8æœˆ 3 12:16 ../test.txt 2498138 -rw-r--r-- 2 root root 4 8æœˆ 3 12:16 test.txt æˆ‘ä»¬å†ç”¨ll -iå‘½ä»¤æŸ¥çœ‹ç»“ç‚¹ä¿¡æ¯ï¼Œå‘ç°è¿™ä¸¤ä¸ªæ–‡ä»¶åçš„ç»“ç‚¹ä¿¡æ¯æ˜¯ä¸€æ ·çš„ã€‚è¯´æ˜è¿™ä¸¤ä¸ªæ–‡ä»¶åæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ã€‚å…¶ä¸­ç¬¬ä¸‰ä¸ªå­—æ®µæ˜¯é“¾æ¥æ•°ï¼Œæ•°å­—2ï¼Œè¡¨ç¤ºæœ‰ä¸¤ä¸ªæ–‡ä»¶åé“¾æ¥åˆ°åŒä¸€ä¸ªinodeã€‚\nç¡¬é“¾æ¥çš„ç‰¹ç‚¹ ç¡¬é“¾æ¥ï¼Œä»¥æ–‡ä»¶å‰¯æœ¬çš„å½¢å¼å­˜åœ¨ã€‚ä½†ä¸å ç”¨å®é™…ç©ºé—´ã€‚ ç”±äºç¡¬é“¾æ¥åªæ˜¯åœ¨ç›®å½•ä¸­æ·»åŠ äº†ä¸€æ¡åŒ…å«æ–‡ä»¶åå’Œ å¯¹åº” inode çš„è®°å½•ï¼Œæ‰€ä»¥å®ƒå‡ ä¹ä¸ä¼šæ¶ˆè€—é¢å¤–çš„ç£ç›˜å®¹é‡ã€‚ ä¸å…è®¸ç»™ç›®å½•åˆ›å»ºç¡¬é“¾æ¥ ç¡¬é“¾æ¥åªæœ‰åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­æ‰èƒ½åˆ›å»º åªè¦è¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶åå¼•ç”¨ç€æ–‡ä»¶ï¼Œæ–‡ä»¶å°±ä¸ä¼šè¢«çœŸæ­£åˆ é™¤ åˆ é™¤ç¡¬é“¾æ¥æ‰€å…³è”çš„æ–‡ä»¶æ—¶ï¼Œå…¶å®åªæ˜¯åˆ é™¤äº†ä¸€æ¡ç›®å½•ä¸­çš„è®°å½•ï¼ŒçœŸæ­£çš„æ–‡ä»¶å¹¶ä¸å—å½±å“ã€‚åªæœ‰åœ¨åˆ é™¤æœ€åä¸€ä¸ªç¡¬é“¾æ¥æ—¶æ‰ä¼šçœŸæ­£åˆ é™¤æ–‡ä»¶çš„å†…å®¹æ•°æ®ã€‚ è½¯é“¾æ¥ Symbolic Link è½¯é“¾æ¥çš„å®ç°æ–¹å¼ä¸ç¡¬é“¾æ¥æœ‰æœ¬è´¨ä¸Šçš„ä¸åŒã€‚åˆ›å»ºè½¯é“¾æ¥æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ (åˆ†é…ä¸€ä¸ªinode å’Œå¯¹åº”çš„ data block)ï¼Œæ–°æ–‡ä»¶çš„ data block ä¸­å­˜å‚¨äº†ç›®æ ‡æ–‡ä»¶çš„è·¯å¾„ã€‚\næˆ‘ä»¬ä»¥/opt/test.txtä¸ºä¾‹ï¼Œåœ¨/opt/tempç›®å½•ä¸­ï¼Œä¸ºå…¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œç„¶åæŸ¥çœ‹å…¶inodeç»“ç‚¹ä¿¡æ¯ã€‚\ndominic@hanhan:/opt/temp$ sudo ln -s ../test.txt test2.txt dominic@hanhan:/opt/temp$ ll -i ../test.txt test2.txt 2498139 lrwxrwxrwx 1 root root 11 8æœˆ 3 14:01 test2.txt -\u0026gt; ../test.txt 2498138 -rw-r--r-- 2 root root 4 8æœˆ 3 12:16 ../test.txt ç¬¬ä¸€ä¸ªå­—æ®µä¸åŒï¼Œè¯´æ˜æ˜¯ä¸¤ä¸ªæ–‡ä»¶äº† ç¬¬äºŒä¸ªå­—æ®µè¡¨ç¤ºæƒé™ï¼Œç¬¬ä¸€ä¸ªå­—æ¯è¡¨ç¤ºæ–‡ä»¶ç±»å‹ï¼Œlè¯´æ˜ä¹¦è½¯é“¾æ¥æ–‡ä»¶ ç¬¬ä¸‰ä¸ªå­—æ®µè¡¨ç¤ºé“¾æ¥æ•°ï¼Œä»ç„¶æ˜¯2ï¼Œè¯´æ˜è½¯é“¾æ¥ä¸å¢åŠ æºæ–‡ä»¶é“¾æ¥æ•° ç¬¬å…­ä¸ªå­—æ®µæ˜¯æ–‡ä»¶å¤§å°ï¼Œæ–°å»ºçš„è½¯é“¾æ¥æ–‡ä»¶æ—¶ 11 å­—èŠ‚ï¼Œè¿™å°±æ˜¯/opt/test.txtçš„é•¿åº¦ã€‚ è½¯é“¾æ¥ç‰¹ç‚¹ è½¯é“¾æ¥ï¼Œä»¥è·¯å¾„çš„å½¢å¼å­˜åœ¨ã€‚ç±»ä¼¼äº Windows æ“ä½œç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ è½¯é“¾æ¥å¯ä»¥ è·¨æ–‡ä»¶ç³»ç»Ÿï¼Œç¡¬é“¾æ¥ä¸å¯ä»¥ è½¯é“¾æ¥å¯ä»¥å¯¹ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶åè¿›è¡Œé“¾æ¥ è½¯é“¾æ¥å¯ä»¥å¯¹ç›®å½•è¿›è¡Œé“¾æ¥ ä½¿ç”¨å®ä¾‹ ln [å‚æ•°][æºæ–‡ä»¶æˆ–ç›®å½•][ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•] ä¸ºæ–‡ä»¶test.txtåˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥\nsudo ln test.txt /etc/ åˆ é™¤test.txtçš„ç¡¬é“¾æ¥ï¼Œå› ä¸ºæ˜¯ä»¥å‰¯æœ¬å½¢å¼å­˜åœ¨çš„ï¼Œæ‰€ä»¥ç›´æ¥ç”¨rmå‘½ä»¤å°†å…¶åˆ é™¤å³å¯ã€‚\nsudo rm /etc/test.txt ä¸ºæ–‡ä»¶test.txtåˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥\nsudo ln -s test.txt /etc/test2.txt åˆ é™¤è½¯é“¾æ¥ä¹Ÿä¸€æ ·ï¼Œç›´æ¥ç”¨rmå‘½ä»¤åˆ é™¤è½¯é“¾æ¥çš„åç§°å³å¯ã€‚\nReference https://www.runoob.com/linux/linux-comm-ln.html https://www.cnblogs.com/lixuze/p/14248559.html ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-ln%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5/","summary":"\u003cp\u003eLinux lnï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šlink filesï¼‰å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸é‡è¦å‘½ä»¤ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä¸ºæŸä¸€ä¸ªæ–‡ä»¶åœ¨å¦å¤–ä¸€ä¸ªä½ç½®å»ºç«‹ä¸€ä¸ªåŒæ­¥çš„é“¾æ¥ã€‚è¿™æœ‰ç‚¹åƒ Windows ç¯å¢ƒä¸‹çš„å¿«æ·æ–¹å¼ã€‚ä»‹ç»å‘½ä»¤å‰äº†è§£ä¸€ä¸‹è½¯é“¾æ¥ï¼Œç¡¬é“¾æ¥å…·ä½“æ˜¯ä»€ä¹ˆã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-ln è½¯ç¡¬é“¾æ¥"},{"content":"edå‘½ä»¤æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç”¨äºæ–‡æœ¬ç¼–è¾‘ã€‚\nedæ˜¯ Linux ä¸­åŠŸèƒ½æœ€ç®€å•çš„æ–‡æœ¬ç¼–è¾‘ç¨‹åºï¼Œä¸€æ¬¡ä»…èƒ½ç¼–è¾‘ä¸€è¡Œè€Œéå…¨å±å¹•æ–¹å¼çš„æ“ä½œã€‚å¾ˆå¤šå‘½ä»¤å’Œvimç›¸ä¼¼ï¼Œå¹³æ—¶å¼€å‘ä¸­å¹¶ä¸å¸¸ç”¨ï¼Œä½†æ˜¯åœ¨ç¼–è¾‘å¤§æ–‡æœ¬æ—¶è¿˜æ˜¯ä¼šç”¨åˆ°ã€‚\nå­¦å­¦æ— å¦¨æ¯•ç«Ÿè¿™æ˜¯ Unix ç³»ç»Ÿä¸‰å¤§è¦ä»¶ï¼ˆç¼–è¾‘å™¨ï¼Œæ±‡ç¼–å™¨å’Œ shellï¼‰ä¹‹ä¸€ã€‚\nedç¼–è¾‘å™¨æœ‰ä¸¤ç§æ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼å’Œè¾“å…¥æ¨¡å¼ã€‚å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥a,i,c,då¯ä»¥è¿›å…¥å¯¹åº”çš„ç¼–è¾‘æ¨¡å¼ï¼Œæ¥ä¸‹æ¥å¯ä»¥è¾“å…¥ä»»ä½•æƒ³è¦è¾“å…¥çš„å†…å®¹ï¼Œè¾“å…¥å®Œæ¯•æˆ–è€…è¦åˆ‡æ¢å‘½ä»¤æ—¶ï¼Œå¯ä»¥è¾“å…¥.é€€å‡ºè¾“å…¥æ¨¡å¼ã€‚\nCommands a #æ·»åŠ åˆ°è¡Œ i #æ·»åŠ åˆ°è¡Œé¦– c #æ”¹å˜è¡Œ d #åˆ é™¤è¡Œ Line Address . #buffer ä¸­ å½“å‰è¡Œ $ #æœ€åä¸€è¡Œ n #ç¬¬ n è¡Œï¼Œè¡Œçš„èŒƒå›´æ˜¯ [0,$] - or ^ #å‰ä¸€è¡Œ -n or ^n #å‰ n è¡Œ + or +n #åä¸€è¡ŒåŠånè¡Œ , or % #å…¨éƒ¨è¡Œï¼Œç­‰åŒäº 1,$ ; #å½“å‰è¡Œåˆ°æœ€åä¸€è¡Œ .,$ /re/ #ä¸‹ä¸€ä¸ªåŒ…å«æ­£åˆ™ re çš„è¡Œ ?re? #ä¸Šä¸€ä¸ªåŒ…å«æ­£åˆ™ re çš„è¡Œ ä½¿ç”¨å®ä¾‹ dominic@hanhan:~$ ed # è¿›å…¥ç¼–è¾‘æ¨¡å¼ This is a test text! # è¾“å…¥æ–‡æœ¬ . # ç»“æŸè¾“å…¥å‘½ä»¤ This is a test text! # å›æ˜¾å½“å‰è¡Œ n # æ˜¾ç¤ºè¡Œå·å‘½ä»¤ 1 This is a test text! # å›æ˜¾å½“å‰è¡Œå¹¶æ˜¾ç¤ºè¡Œå· c # æ”¹å˜è¡Œå‘½ä»¤ This is changed text! # è¾“å…¥æ›´æ”¹åçš„å†…å®¹ . # ç»“æŸè¾“å…¥å‘½ä»¤ n # æ˜¾ç¤ºè¡Œå·å‘½ä»¤ 1 This is changed text! # å›æ˜¾å½“å‰è¡Œå¹¶æ˜¾ç¤ºè¡Œå· i # åœ¨é¦–è¡Œæ’å…¥å‘½ä»¤ This is first line! # è¾“å…¥æ’å…¥å†…å®¹ . # ç»“æŸè¾“å…¥å‘½ä»¤ + # åä¸€è¡Œå‘½ä»¤ This is changed text! # å›æ˜¾åä¸€è¡Œ d # åˆ é™¤å½“å‰è¡Œ . # å›æ˜¾å½“å‰è¡Œå‘½ä»¤ This is firt line! # å›æ˜¾å½“å‰è¡Œ a This is second line! This is third line! This is fourth line! w test.txt # å†™å…¥å¹¶ä¿å­˜æ–‡ä»¶ q # é€€å‡ºç¼–è¾‘å™¨ dominic@hanhan:~$ cat test.txt # æŸ¥çœ‹å†…å®¹ This is first line!s This is second line! This is third line! This is fourth line! ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-ed%E8%A1%8C%E7%BC%96%E8%BE%91%E5%99%A8/","summary":"\u003cp\u003e\u003ccode\u003eed\u003c/code\u003eå‘½ä»¤æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç”¨äºæ–‡æœ¬ç¼–è¾‘ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eed\u003c/code\u003eæ˜¯ Linux ä¸­åŠŸèƒ½æœ€ç®€å•çš„æ–‡æœ¬ç¼–è¾‘ç¨‹åºï¼Œä¸€æ¬¡ä»…èƒ½ç¼–è¾‘ä¸€è¡Œè€Œéå…¨å±å¹•æ–¹å¼çš„æ“ä½œã€‚å¾ˆå¤šå‘½ä»¤å’Œ\u003ccode\u003evim\u003c/code\u003eç›¸ä¼¼ï¼Œå¹³æ—¶å¼€å‘ä¸­å¹¶ä¸å¸¸ç”¨ï¼Œä½†æ˜¯åœ¨ç¼–è¾‘å¤§æ–‡æœ¬æ—¶è¿˜æ˜¯ä¼šç”¨åˆ°ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-ed è¡Œç¼–è¾‘å™¨"},{"content":"æƒ³çŸ¥é“è‡ªå·±ä»£ç å†™äº†å¤šå°‘è¡Œï¼Œå¯ä»¥ä¸€ä¸ªwcå‘½ä»¤æå®šã€‚\nå¯é€‰å‚æ•° -lï¼šä»…åˆ—å‡ºè¡Œï¼› -wï¼šä»…åˆ—å‡ºå¤šå°‘å­— (è‹±æ–‡å•å­—)ï¼› -mï¼šå¤šå°‘å­—ç¬¦ ä½¿ç”¨å®ä¾‹ ç»Ÿè®¡hello.cæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶æ€»å…±å¤šå°‘è¡Œ\n$ wc -l hello.c 14 hello.c ç»Ÿè®¡æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°\nls -l | grep \u0026#34;^-\u0026#34; | wc -l ç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ–‡ä»¶çš„ä¸ªæ•°ï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰\nls -lR| grep \u0026#34;^-\u0026#34; | wc -l æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶å¤¹ (ç›®å½•) çš„ä¸ªæ•°ï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰\nls -lR | grep \u0026#34;^d\u0026#34; | wc -l è¿‡æ»¤lsçš„è¾“å‡ºä¿¡æ¯ï¼Œåªä¿ç•™ä¸€èˆ¬æ–‡ä»¶ï¼Œåªä¿ç•™ç›®å½•æ˜¯grep \u0026quot;^d\u0026quot;ã€‚ ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-wc%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E6%9C%89%E5%A4%9A%E5%B0%91%E5%AD%97%E5%A4%9A%E5%B0%91%E8%A1%8C/","summary":"\u003cp\u003eæƒ³çŸ¥é“è‡ªå·±ä»£ç å†™äº†å¤šå°‘è¡Œï¼Œå¯ä»¥ä¸€ä¸ª\u003ccode\u003ewc\u003c/code\u003eå‘½ä»¤æå®šã€‚\u003c/p\u003e\n\u003ch2 id=\"å¯é€‰å‚æ•°\"\u003eå¯é€‰å‚æ•°\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-text\" data-lang=\"text\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-lï¼šä»…åˆ—å‡ºè¡Œï¼›\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-wï¼šä»…åˆ—å‡ºå¤šå°‘å­— (è‹±æ–‡å•å­—)ï¼›\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-mï¼šå¤šå°‘å­—ç¬¦\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"ä½¿ç”¨å®ä¾‹\"\u003eä½¿ç”¨å®ä¾‹\u003c/h2\u003e\n\u003cp\u003eç»Ÿè®¡\u003ccode\u003ehello.c\u003c/code\u003eæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶æ€»å…±å¤šå°‘è¡Œ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-Bash\" data-lang=\"Bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ wc -l  hello.c\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"m\"\u003e14\u003c/span\u003e hello.c\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eç»Ÿè®¡æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-wc ç»Ÿè®¡æ–‡ä»¶æœ‰å¤šå°‘å­—å¤šå°‘è¡Œ"},{"content":"Ubuntu é»˜è®¤æ˜¯å›½å¤–çš„æºï¼Œè½¯ä»¶ä¸‹è½½å’Œæ›´æ–°éƒ½æ¯”è¾ƒæ…¢ã€‚ä¸¤ç§æ–¹æ³•å°†ä¸‹è½½æºæ¢æˆå›½å†…çš„æºã€‚\nç”¨\u0026quot;è½¯ä»¶å’Œæ›´æ–°\u0026quot;å·¥å…· ä» Ubuntu èœå•ä¸­æ‰¾åˆ°è½¯ä»¶å’Œæ›´æ–°è¿™ä¸ªåº”ç”¨å¹¶æ‰“å¼€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image æ‰¾åˆ°ä¸‹è½½è‡ªï¼Œé€‰æ‹©å…¶ä»– - å›½å†…-aliyunï¼Œç„¶åå‹¾é€‰å‰å››ä¸ªé€‰é¡¹ã€‚å…³é—­æ—¶ä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼Œç‚¹å‡»æ›´æ–°ã€‚ç„¶åå°±èƒ½æ„‰å¿«çš„ä¸‹è½½è½¯ä»¶äº†ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image ä¿®æ”¹sourcelist å¤‡ä»½åŸæ–‡ä»¶ è¿™ä¹Ÿç®—æ˜¯ç³»ç»Ÿæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜æ˜¯ä¿é™©ä¸€ç‚¹ï¼Œå‡ºé”™äº†å†æ”¹å›æ¥ã€‚\nsudo cp /etc/apt/sources.list /etc/apt/sources.list.backup æ‰“å¼€å¹¶ä¿®æ”¹ sudo vi /etc/apt/sources.list vimç”¨çš„ä¸ä¹ æƒ¯çš„ä¼°è®¡ä¼šå’Œæˆ‘ä¸€æ ·æ‰¾å…¨é€‰å†…å®¹æ€ä¹ˆæ“ä½œã€‚æ•™ç»™ä½ äº† åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œå°±æ˜¯æŒ‰ä¸€ä¸‹escé”®ï¼Œç„¶åè¾“å…¥ggvGã€‚å…·ä½“ä»€ä¹ˆå«ä¹‰çœ‹VIM ç¬”è®°å§ï¼Œé€‰æ‹©åç›´æ¥deleteåˆ é™¤ï¼Œå†æŠŠé˜¿é‡Œäº‘æºç²˜è´´è¿›å»ã€‚ä¿å­˜é€€å‡ºã€‚\n#é˜¿é‡Œäº‘ deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse æ›´æ–° sudo apt-get update sudo apt-get dist-upgrade sudo apt-get upgrade ","permalink":"https://lifeislife.cn/posts/linux%E6%9B%B4%E6%8D%A2ubuntu%E8%BD%AF%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%BA%90/","summary":"\u003cp\u003eUbuntu é»˜è®¤æ˜¯å›½å¤–çš„æºï¼Œè½¯ä»¶ä¸‹è½½å’Œæ›´æ–°éƒ½æ¯”è¾ƒæ…¢ã€‚ä¸¤ç§æ–¹æ³•å°†ä¸‹è½½æºæ¢æˆå›½å†…çš„æºã€‚\u003c/p\u003e\n\u003ch2 id=\"ç”¨è½¯ä»¶å’Œæ›´æ–°å·¥å…·\"\u003eç”¨\u0026quot;è½¯ä»¶å’Œæ›´æ–°\u0026quot;å·¥å…·\u003c/h2\u003e\n\u003cp\u003eä» Ubuntu èœå•ä¸­æ‰¾åˆ°\u003cstrong\u003eè½¯ä»¶å’Œæ›´æ–°\u003c/strong\u003eè¿™ä¸ªåº”ç”¨å¹¶æ‰“å¼€ã€‚\u003c/p\u003e\n\u003cp\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eResponsive Image\u003c/title\u003e\n    \u003cstyle\u003e\n        .post-img-view {\n            text-align: center;\n        }\n        .responsive-image {\n            display: block;\n            margin: 0 auto;\n        }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \n    \u003cdiv class=\"post-img-view\"\u003e\n        \u003ca data-fancybox=\"gallery\" href=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210730112638.png\"\u003e\n            \u003cimg class=\"responsive-image\" src=\"https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img/20210730112638.png\" alt=\"\"  style=\"margin: 0 auto;\"/\u003e\n        \u003c/a\u003e\n    \u003c/div\u003e\n    \n\n    \u003cscript\u003e\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            var images = document.querySelectorAll(\".responsive-image\");\n            var maxHeight = window.innerHeight / 3;\n            images.forEach(function(image) {\n                image.style.maxHeight = maxHeight + \"px\";\n            });\n        });\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\u003c/p\u003e","title":"æ›´æ¢ Ubuntu è½¯ä»¶æ›´æ–°æº"},{"content":"å‘½ä»¤æ ¼å¼ find [path] [expression] åœ¨pathä¸‹æŸ¥æ‰¾expressionè¡¨ç¤ºçš„æ–‡ä»¶\nå¸¸ç”¨å‘½ä»¤ ä¸€èˆ¬å¸¸è§å°±æ˜¯è‡ªå·±ä¸çŸ¥é“å†™çš„æŸä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ”¾å“ªé‡Œäº†ï¼Œåˆæˆ–è€…åªè®°ä½éƒ¨åˆ†æ–‡ä»¶åã€‚ä»¥ä¸‹å‡ ä¸ªå‘½ä»¤å°±èƒ½å¸®åˆ°ä½ ã€‚\næŒ‰æ–‡ä»¶åæŸ¥æ‰¾ find -name filename(æŸ¥æ‰¾ç»“æœæ˜¾ç¤ºè·¯å¾„)æˆ–è€… find filename(æŸ¥æ‰¾ç»“æœä¸æ˜¾ç¤ºè·¯å¾„) find hello.cpp #å½“å‰ç›®å½•ä¸‹ç²¾ç¡®æŸ¥æ‰¾hello.cppæ–‡ä»¶ find hello #å½“å‰ç›®å½•ä¸‹ç²¾ç¡®æŸ¥æ‰¾helloæ–‡ä»¶ find hello* #å½“å‰ç›®å½•ä¸‹æ¨¡ç³ŠæŸ¥æ‰¾ä»¥helloä¸ºå‰ç¼€çš„æ–‡ä»¶ æŒ‰ç±»å‹æŸ¥æ‰¾ è¿™å°±æ˜¯ä¸ºæŸ¥æ‰¾æ–‡ä»¶å¤¹ç”¨çš„ã€‚\nfind -type [fdlcb] name [fdlcb]éƒ½æ˜¯ç±»å‹ï¼Œdå°±æ˜¯ç›®å½•ï¼Œæ–‡ä»¶å¤¹ç±»å‹ã€‚\nfind / -type d -name \u0026#34;helloworld\u0026#34; #æŸ¥æ‰¾åä¸ºhelloworldçš„æ–‡ä»¶å¤¹ æŒ‰æ–‡ä»¶åæŸ¥æ‰¾ ä»¥ä¸‹å°±è¯¦ç»†ä»‹ç»ä¸€äº›å‚æ•°\nfind -name \u0026#34;hello.cpp\u0026#34; # æœç´¢æ–‡ä»¶åï¼Œå¤§å°å†™æ•æ„Ÿ find -iname \u0026#34;hello.cpp\u0026#34; #å¤§å°å†™ä¸æ•æ„Ÿ æŒ‰æ–‡ä»¶å¤§å°æŸ¥æ‰¾ find [path] -size 50M find / -size 10M # æŸ¥æ‰¾ç³»ç»Ÿä¸­å¤§å°ç­‰äº10Mçš„æ–‡ä»¶ find / -size +50M # æŸ¥æ‰¾ç³»ç»Ÿä¸­å¤§å°å¤§äº50Mçš„æ–‡ä»¶ find / -size -30M # æŸ¥æ‰¾ç³»ç»Ÿä¸­å¤§å°å°äº30Mçš„æ–‡ä»¶ æŒ‰æ—¶é—´æ¥æŸ¥æ‰¾æ–‡ä»¶ Linux ä¼šå­˜å‚¨ä¸‹é¢çš„æ—¶é—´ï¼š\nAccess time ä¸Šä¸€æ¬¡æ–‡ä»¶è¯»æˆ–è€…å†™çš„æ—¶é—´ Modifica time ä¸Šä¸€æ¬¡æ–‡ä»¶è¢«ä¿®æ”¹çš„æ—¶é—´ Change time ä¸Šä¸€æ¬¡æ–‡ä»¶ inode meta ä¿¡æ¯è¢«ä¿®æ”¹çš„æ—¶é—´ åœ¨æŒ‰ç…§æ—¶é—´æŸ¥æ‰¾æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ -atimeï¼Œ -mtime æˆ–è€… -ctimeï¼Œå’Œä¹‹å‰ sizeå‚æ•°ä¸€æ ·å¯ä»¥ä½¿ç”¨ + æˆ–è€… -æ—¶é—´èŒƒå›´ï¼Œä¸‹å›¾è¡¨ç¤ºfindçš„æ—¶é—´è½´ã€‚+è¡¨ç¤ºè¶…è¿‡å¤šå°‘å¤©ï¼Œ-è¡¨ç¤ºå¤šå°‘å¤©ä»¥å†…ã€‚\næ­¤å¤–ï¼Œä¹Ÿå¯ä»¥æ¢æˆ-aminï¼Œ -mmin æˆ–è€… -cminå‚æ•°ï¼Œå•ä½æ˜¯åˆ†é’Ÿã€‚\n\u003c!DOCTYPE html\u003e Responsive Image find / -mtime 1 # å¯»æ‰¾ä¿®æ”¹æ—¶é—´è¶…è¿‡ä¸€å¤©çš„æ–‡ä»¶ find / -atime -1 # å¯»æ‰¾åœ¨ä¸€å¤©æ—¶é—´å†…è¢«è®¿é—®çš„æ–‡ä»¶ find / -ctime +3 # å¯»æ‰¾ meta ä¿¡æ¯è¢«ä¿®æ”¹çš„æ—¶é—´è¶…è¿‡ 3 å¤©çš„æ–‡ä»¶ Reference http://c.biancheng.net/view/779.html\nhttps://einverne.github.io/post/2018/02/find-command.html#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E6%97%B6%E9%97%B4%E8%B6%85%E8%BF%87-1-%E5%A4%A9%E7%9A%84%E6%96%87%E4%BB%B6\n","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-find%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6/","summary":"\u003ch2 id=\"å‘½ä»¤æ ¼å¼\"\u003eå‘½ä»¤æ ¼å¼\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003efind [path] [expression]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eåœ¨\u003ccode\u003epath\u003c/code\u003eä¸‹æŸ¥æ‰¾\u003ccode\u003eexpression\u003c/code\u003eè¡¨ç¤ºçš„æ–‡ä»¶\u003c/p\u003e\n\u003ch2 id=\"å¸¸ç”¨å‘½ä»¤\"\u003eå¸¸ç”¨å‘½ä»¤\u003c/h2\u003e\n\u003cp\u003eä¸€èˆ¬å¸¸è§å°±æ˜¯è‡ªå·±ä¸çŸ¥é“å†™çš„æŸä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ”¾å“ªé‡Œäº†ï¼Œåˆæˆ–è€…åªè®°ä½éƒ¨åˆ†æ–‡ä»¶åã€‚ä»¥ä¸‹å‡ ä¸ªå‘½ä»¤å°±èƒ½å¸®åˆ°ä½ ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-find æŸ¥æ‰¾æ–‡ä»¶"},{"content":"åœ¨git cloneæ—¶å€™ï¼Œå¦‚æœé‡åˆ°é¡¹ç›®é‡Œæœ‰å­æ¨¡å—é€šå¸¸ä¼šåœ¨ä¸‹è½½æ—¶åŠ ä¸Š--recursiveå‚æ•°ï¼Œä¸€èµ·ä¸‹è½½ã€‚ä½†æ˜¯å­æ¨¡å—è¾ƒå¤šï¼Œä½“ç§¯è¾ƒå¤§æ—¶å¤§æ¦‚ç‡éƒ½ä¼šä¸‹è½½å¤±è´¥ã€‚\nå¥½åœ¨å¯ä»¥é€šè¿‡ä¸€äº›å°æŠ€å·§ï¼Œä¸‹è½½å›½å†…é•œåƒï¼Œè¿›è¡ŒåŠ é€Ÿã€‚ä½†æ˜¯ä¸‹è½½é¡¹ç›®æ—¶ï¼Œåªæ˜¯ä¸»ä½“æ˜¯å›½å†…çš„é•œåƒï¼Œå­æ¨¡å—ä»ç„¶ä¸‹è½½å¾ˆæ…¢ã€‚é¦–å…ˆè§£å†³è·å–å›½å†…é•œåƒçš„é—®é¢˜ã€‚æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š\nåœ¨ç äº‘ Gitee ä¸Šæœç´¢ä¸‹è½½\nåœ¨ç äº‘ä¸Šæœç´¢åŒæ ·çš„é¡¹ç›®ï¼Œç„¶åç”¨ç äº‘git çš„åœ°å€ä¸‹è½½ã€‚\nåŠ ä¸Š.cnpmjs.orgåç¼€\nåœ¨åœ°å€åé¢åŠ ä¸Šåç¼€ï¼Œå¦‚git clone https://github.com.cnpmjs.org/riscv/riscv-binutils-gdb.gitã€‚\nä½¿ç”¨æ²¹çŒ´è„šæœ¬è·å–é•œåƒåœ°å€\nå¦‚æœä½ æœ‰æ²¹çŒ´æ’ä»¶å¯ä»¥å»greasyforkæœç´¢å®‰è£…GitHubé•œåƒè®¿é—®ï¼ŒåŠ é€Ÿä¸‹è½½è¿™ä¸ªè„šæœ¬ï¼Œåˆ·æ–°GitHubä»“åº“ç•Œé¢å°±ä¼šå¤šå‡ºå‡ ä¸ªé•œåƒåœ°å€ï¼Œä¸€èˆ¬ä¸‹è½½éƒ½ä¼šå¿«å¥½å‡ å€ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image å†æ¥è§£å†³å­æ¨¡å—ä¸‹è½½é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼Œä¸‹è½½é¡¹ç›®æ—¶ï¼Œå…ˆä¸åŠ --recursiveå‚æ•°ï¼Œåªä¸‹è½½é¡¹ç›®çš„æœ¬é¢˜ã€‚\nä¸‹è½½å®Œåæ‰¾åˆ°.gitmodulesæ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªéšè—æ–‡ä»¶ï¼Œéœ€è¦æ˜¾ç¤ºéšè—æ–‡ä»¶ï¼ŒLinux ä¸‹ä½¿ç”¨å¿«æ·é”®Ctrl+Hã€‚ç”¨vimæ‰“å¼€åå¯ä»¥å¾—åˆ°ï¼š\n\u003c!DOCTYPE html\u003e Responsive Image è¿™ä¸ªæ–‡ä»¶é‡Œå†™å…¥äº†å­æ¨¡å—çš„ä¸‹è½½ä¿¡æ¯ï¼Œurlå°±æ˜¯ä¸‹è½½åœ°å€ã€‚æˆ‘ä»¬æŠŠæ‰€æœ‰å­æ¨¡å—ä¸­çš„ URL åœ°å€åŒæ ·åŠ ä¸Š.cnpmjs.orgåç¼€ã€‚æˆ–è€…ä½¿ç”¨ä¸Šè¿°ä¸‰ç§æ–¹å¼å¾—åˆ°çš„é•œåƒåœ°å€ã€‚\nç„¶ååˆ©ç”¨git submodule syncæ›´æ–°å­é¡¹ç›®å¯¹åº”çš„url\næœ€åå†git submodule update --init --recursiveï¼Œå³å¯å¿«é€Ÿä¸‹è½½æ‰€æœ‰å­é¡¹ç›®ã€‚\n","permalink":"https://lifeislife.cn/posts/git-clone%E5%BF%AB%E9%80%9F%E4%B8%8B%E8%BD%BD%E5%AD%90%E6%A8%A1%E5%9D%97/","summary":"\u003cp\u003eåœ¨\u003ccode\u003egit clone\u003c/code\u003eæ—¶å€™ï¼Œå¦‚æœé‡åˆ°é¡¹ç›®é‡Œæœ‰å­æ¨¡å—é€šå¸¸ä¼šåœ¨ä¸‹è½½æ—¶åŠ ä¸Š\u003ccode\u003e--recursive\u003c/code\u003eå‚æ•°ï¼Œä¸€èµ·ä¸‹è½½ã€‚ä½†æ˜¯å­æ¨¡å—è¾ƒå¤šï¼Œä½“ç§¯è¾ƒå¤§æ—¶å¤§æ¦‚ç‡éƒ½ä¼šä¸‹è½½å¤±è´¥ã€‚\u003c/p\u003e","title":"git clone å¿«é€Ÿä¸‹è½½å­æ¨¡å—"},{"content":"åˆ¶ä½œäº¤å‰å·¥å…·é“¾ riscv-gnu-toolchain ä¸‹è½½æºç  è¿™ä¸ªä»“åº“æ˜¯æˆ‘é‡åˆ°çš„æœ€éš¾ä¸‹è½½çš„ä¸€ä¸ªä»“åº“äº†ï¼Œå…¬å¸ç½‘æ…¢å’Œè™šæ‹Ÿæœºæ€§èƒ½å·®éƒ½è„±ä¸äº†å¹²ç³»ã€‚ä¼°è®¡ä¸‹è½½äº†äº”å°æ—¶éƒ½ä¸æ­¢ï¼Œåˆšå¼€å§‹è¿˜æŒ‡æœ›ä¸€ä¸ªå‘½ä»¤æ‰€æœ‰å­æ¨¡å—éƒ½ä¸‹è½½å®Œçš„ï¼Œç»“æœæ„£æ˜¯ç­‰äº†åŠå¤©ä¸­æ–­äº†ã€‚è¯•äº†ä¸¤æ¬¡åæ”¾å¼ƒäº†ã€‚å¦‚æœå„ä½çœ‹å®˜èƒ½ä¸€æ¬¡å®Œæˆï¼Œé‚£æ‚¨æ˜¯ç¦å¤§ã€‚\nå›½å†…çš„ç äº‘å¹³å°æœ‰ä¸ªGitee æé€Ÿä¸‹è½½é¡¹ç›®ï¼Œä¸Šé¢æœ‰ GitHub çš„ä¸€äº›å¸¸ç”¨å¼€æºé¡¹ç›®çš„é•œåƒï¼Œå¯ä¾›åŠ é€Ÿä¸‹è½½ã€‚\n# riscv-gnu-toolchain https://gitee.com/mirrors/riscv-gnu-toolchain.git ä¸‹è½½æ—¶é—®é¢˜å‡ºç°äº†ï¼Œå¦‚æœä¸‹è½½å­æ¨¡å—ä»ç„¶ä¼šå¡ä½ï¼Œå¦‚æœä¸åŠ --recursiveå°±åªèƒ½ä¸‹è½½ä¸»ä½“å†…å®¹ï¼Œå­æ¨¡å—éƒ½æ²¡æœ‰ã€‚ï¼ˆä»¥ä¸‹å†…å®¹ä¸ºç¬¬ä¸€å®‰è£…æ—¶çš„æ–¹æ³•ï¼Œåç»­åˆæ‰¾åˆ°äº†git clone å¿«é€Ÿä¸‹è½½å­æ¨¡å—çš„æ–¹æ³•ï¼‰\nå¼€å§‹ä¸‹è½½æ—¶ä¸åŠ --recursiveå‚æ•°ï¼Œåªä¸‹è½½riscv-gnu-toolchainçš„ä¸»ä½“å†…å®¹ï¼Œç„¶åè¿›å…¥åˆ°riscv-gnu-toolchainæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰‹åŠ¨ä¸‹è½½å­æ¨¡å—çš„å†…å®¹ã€‚\nå½“ä¸‹å®Œriscv-binutilsç»§ç»­ä¸‹è½½riscv-gdbæ—¶å‘ç°è¿™ä¸¤ä¸ªé¡¹ç›®æ˜¯åŒä¸€ä¸ªé¡¹ç›®ï¼Œåªæ˜¯ä¸åŒçš„åˆ†æ”¯ã€‚ä½†æ˜¯ç äº‘ä¸Šå¹¶æ²¡æœ‰åŒºåˆ†ï¼Œä½†æ˜¯æˆ‘ä¹Ÿæ²¡æ‰¾åˆ°åœ¨ç äº‘ä¸Šçš„å¯¹åº”åˆ†æ”¯ã€‚åªèƒ½ç”¨æ²¹çŒ´è„šæœ¬äº†ã€‚\nå¦‚æœä½ æœ‰æ²¹çŒ´æ’ä»¶å¯ä»¥å»greasyforkæœç´¢å®‰è£…GitHub é•œåƒè®¿é—®ï¼ŒåŠ é€Ÿä¸‹è½½è¿™ä¸ªè„šæœ¬ï¼Œåˆ·æ–° GitHub ä»“åº“ç•Œé¢å°±ä¼šå¤šå‡ºå‡ ä¸ªé•œåƒåœ°å€ï¼Œä¸€èˆ¬ä¸‹è½½éƒ½ä¼šå¿«å¥½å‡ å€ã€‚å¦‚æœä¸ç”¨æ²¹çŒ´æ’ä»¶çš„å¯ä»¥ç”¨æˆ‘å¤åˆ¶å¥½çš„é“¾æ¥ã€‚\n\u003c!DOCTYPE html\u003e Responsive Image # riscv-binutils git clone https://gitee.com/mirrors/riscv-binutils-gdb.git # riscv-gcc git clone https://gitee.com/mirrors/riscv-gcc.git # riscv-dejagnu git clone https://gitee.com/mirrors/riscv-dejagnu.git # riscv-glibc git clone https://gitee.com/mirrors/riscv-glibc.git # riscv-newlib git clone https://gitee.com/mirrors/riscv-newlib.git # riscv-gdb git clone --depth=1 https://hub.fastgit.org/riscv/riscv-binutils-gdb.git ç¼–è¯‘ riscv-gnu-toolchain æå‰å®‰è£…å¦‚ä¸‹è½¯ä»¶ï¼š\nsudo apt-get install autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev ä¸å¬è€äººè¨€ï¼Œåƒäºåœ¨çœ¼å‰å‘€ï¼Œæœ¬ä»¥ä¸ºè¿™æ˜¯å¯é€‰é¡¹ï¼Œå¾ˆå¤šåº“éƒ½å®‰è£…äº†ï¼Œå°±æ²¡æœ‰æ“ä½œè¿™ä¸€æ­¥ï¼Œç»“æœå°±æ˜¯ç¼–è¯‘åŠå¤©ç»“æœè¿˜é”™äº†ã€‚å¦‚æœæŠ¥make é”™è¯¯ 127ï¼Œé‚£å°±è€è€å®å®æŠŠå‰ç½®çš„è¿™äº›åº“éƒ½è£…ä¸Šã€‚\nå»ºç«‹riscv-gnu-toolchainå®‰è£…ç›®å½•/opt/riscv64ã€‚\n./configure --prefix=/opt/riscv64 sudo make linux -j8 å¯¼å‡ºå®‰è£…è·¯å¾„ export PATH=\u0026#34;$PATH:/opt/riscv64/bin\u0026#34; å‡ºç°ä¸€ä¸‹ä¿¡æ¯è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚\nUsing built-in specs. COLLECT_GCC=riscv64-unknown-linux-gnu-gcc COLLECT_LTO_WRAPPER=/opt/riscv64/libexec/gcc/riscv64-unknown-linux-gnu/10.2.0/lto-wrapper Target: riscv64-unknown-linux-gnu Configured with: /home/dominic/riscv64-linux/riscv-gnu-toolchain/riscv-gcc/configure --target=riscv64-unknown-linux-gnu --prefix=/opt/riscv64 --with-sysroot=/opt/riscv64/sysroot --with-system-zlib --enable-shared --enable-tls --enable-languages=c,c++,fortran --disable-libmudflap --disable-libssp --disable-libquadmath --disable-libsanitizer --disable-nls --disable-bootstrap --src=.././riscv-gcc --disable-multilib --with-abi=lp64d --with-arch=rv64imafdc --with-tune=rocket \u0026#39;CFLAGS_FOR_TARGET=-O2 -mcmodel=medlow\u0026#39; \u0026#39;CXXFLAGS_FOR_TARGET=-O2 -mcmodel=medlow\u0026#39; Thread model: posix Supported LTO compression algorithms: zlib gcc version 10.2.0 (GCC) åˆ¶ä½œå†…æ ¸ ä¸‹è½½ Linux å†…æ ¸ makefile\n","permalink":"https://lifeislife.cn/posts/qemu%E4%B8%8A%E8%BF%90%E8%A1%8C64%E4%BD%8D%E5%92%8C32%E4%BD%8Drisc-v-linux/","summary":"\u003ch2 id=\"åˆ¶ä½œäº¤å‰å·¥å…·é“¾-riscv-gnu-toolchain\"\u003eåˆ¶ä½œäº¤å‰å·¥å…·é“¾ riscv-gnu-toolchain\u003c/h2\u003e\n\u003ch3 id=\"ä¸‹è½½æºç \"\u003eä¸‹è½½æºç \u003c/h3\u003e\n\u003cp\u003eè¿™ä¸ªä»“åº“æ˜¯æˆ‘é‡åˆ°çš„æœ€éš¾ä¸‹è½½çš„ä¸€ä¸ªä»“åº“äº†ï¼Œå…¬å¸ç½‘æ…¢å’Œè™šæ‹Ÿæœºæ€§èƒ½å·®éƒ½è„±ä¸äº†å¹²ç³»ã€‚ä¼°è®¡ä¸‹è½½äº†äº”å°æ—¶éƒ½ä¸æ­¢ï¼Œåˆšå¼€å§‹è¿˜æŒ‡æœ›ä¸€ä¸ªå‘½ä»¤æ‰€æœ‰å­æ¨¡å—éƒ½ä¸‹è½½å®Œçš„ï¼Œç»“æœæ„£æ˜¯ç­‰äº†åŠå¤©ä¸­æ–­äº†ã€‚è¯•äº†ä¸¤æ¬¡åæ”¾å¼ƒäº†ã€‚å¦‚æœå„ä½çœ‹å®˜èƒ½ä¸€æ¬¡å®Œæˆï¼Œé‚£æ‚¨æ˜¯ç¦å¤§ã€‚\u003c/p\u003e","title":"åœ¨ QEMU ä¸Šè¿è¡Œ 64 ä½å’Œ 32 ä½ RISC-V-Linux"},{"content":"dfå…¨ç§°disk filesystem ï¼Œä»¥ç£ç›˜åˆ†åŒºä¸ºå•ä½æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æŸ¥çœ‹ç£ç›˜æ–‡ä»¶å ç”¨ç©ºé—´ï¼Œç£ç›˜å‰©ä½™ç©ºé—´ç­‰ä¿¡æ¯ã€‚\nå‘½ä»¤æ ¼å¼ df [] [] å¯é€‰å‚æ•° -a å…¨éƒ¨æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨ -h æ–¹ä¾¿é˜…è¯»æ–¹å¼æ˜¾ç¤º -H ç­‰äºâ€œ-hâ€ï¼Œä½†æ˜¯è®¡ç®—å¼ï¼Œ1K=1000ï¼Œè€Œä¸æ˜¯ 1K=1024 -i æ˜¾ç¤º inode ä¿¡æ¯ -k åŒºå—ä¸º 1024 å­—èŠ‚ -l åªæ˜¾ç¤ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ -m åŒºå—ä¸º 1048576 å­—èŠ‚ --no-sync å¿½ç•¥ sync å‘½ä»¤ -P è¾“å‡ºæ ¼å¼ä¸º POSIX --sync åœ¨å–å¾—ç£ç›˜ä¿¡æ¯å‰ï¼Œå…ˆæ‰§è¡Œ sync å‘½ä»¤ -T æ–‡ä»¶ç³»ç»Ÿç±»å‹ ä½¿ç”¨å®ä¾‹ df -Tæ˜¾ç¤ºåŒ…å«æ–‡ä»¶ç³»ç»Ÿï¼Œç±»å‹ï¼Œå¯ç”¨å¤§å°ï¼Œå·²ç”¨å¤§å°ï¼ŒæŒ‚è½½ç‚¹ç­‰ä¿¡æ¯ã€‚\ndominic@hanhan:~$ df -T æ–‡ä»¶ç³»ç»Ÿ ç±»å‹ 1K-å— å·²ç”¨ å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹ udev devtmpfs 1985056 0 1985056 0% /dev tmpfs tmpfs 403036 1304 401732 1% /run /dev/sda5 ext4 50824704 20826256 27386992 44% / tmpfs tmpfs 2015172 0 2015172 0% /dev/shm tmpfs tmpfs 5120 4 5116 1% /run/lock tmpfs tmpfs 2015172 0 2015172 0% /sys/fs/cgroup /dev/loop0 squashfs 56832 56832 0 100% /snap/core18/1988 /dev/loop1 squashfs 56832 56832 0 100% /snap/core18/2074 duå…¨ç§°disk usageå¯ä»¥æŸ¥çœ‹æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹å ç”¨æƒ…å†µã€‚\nå‘½ä»¤æ ¼å¼ du [opt] [filename] å¯é€‰å‚æ•° -aæˆ–-all #æ˜¾ç¤ºç›®å½•ä¸­ä¸ªåˆ«æ–‡ä»¶çš„å¤§å°ã€‚ -bæˆ–-bytes #æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶å¤§å°æ—¶ï¼Œä»¥byteä¸ºå•ä½ã€‚ -cæˆ–--total #é™¤äº†æ˜¾ç¤ºä¸ªåˆ«ç›®å½•æˆ–æ–‡ä»¶çš„å¤§å°å¤–ï¼ŒåŒæ—¶ä¹Ÿæ˜¾ç¤ºæ‰€æœ‰ç›®å½•æˆ–æ–‡ä»¶çš„æ€»å’Œã€‚ -Dæˆ–--dereference-args #æ˜¾ç¤ºæŒ‡å®šç¬¦å·è¿æ¥çš„æºæ–‡ä»¶å¤§å°ã€‚ -hæˆ–--human-readable #ä»¥Kï¼ŒMï¼ŒGä¸ºå•ä½ï¼Œæé«˜ä¿¡æ¯çš„å¯è¯»æ€§ã€‚ -Hæˆ–--si #ä¸-hå‚æ•°ç›¸åŒï¼Œä½†æ˜¯Kï¼ŒMï¼ŒGæ˜¯ä»¥1000ä¸ºæ¢ç®—å•ä½ã€‚ -kæˆ–--kilobytes #ä»¥1024 bytesä¸ºå•ä½ã€‚ -læˆ–--count-links #é‡å¤è®¡ç®—ç¡¬ä»¶è¿æ¥çš„æ–‡ä»¶ã€‚ -L\u0026lt;ç¬¦å·è¿æ¥\u0026gt;æˆ–- -dereference\u0026lt;ç¬¦å·è¿æ¥\u0026gt; #æ˜¾ç¤ºé€‰é¡¹ä¸­æ‰€æŒ‡å®šç¬¦å·è¿æ¥çš„æºæ–‡ä»¶å¤§å°ã€‚ -mæˆ–--megabytes #ä»¥1MBä¸ºå•ä½ã€‚ -sæˆ–--summarize #ä»…æ˜¾ç¤ºæ€»è®¡ã€‚ -Sæˆ–--separate-dirs #æ˜¾ç¤ºä¸ªåˆ«ç›®å½•çš„å¤§å°æ—¶ï¼Œå¹¶ä¸å«å…¶å­ç›®å½•çš„å¤§å°ã€‚ -xæˆ–--one-file-xystem #ä»¥ä¸€å¼€å§‹å¤„ç†æ—¶çš„æ–‡ä»¶ç³»ç»Ÿä¸ºå‡†ï¼Œè‹¥é‡ä¸Šå…¶å®ƒä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç›®å½•åˆ™ç•¥è¿‡ã€‚ -X\u0026lt;æ–‡ä»¶\u0026gt;æˆ–--exclude-from=\u0026lt;æ–‡ä»¶\u0026gt; #åœ¨\u0026lt;æ–‡ä»¶\u0026gt;æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶ã€‚ --exclude=\u0026lt;ç›®å½•æˆ–æ–‡ä»¶\u0026gt; #ç•¥è¿‡æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶ã€‚ --max-depth=\u0026lt;ç›®å½•å±‚æ•°\u0026gt; #è¶…è¿‡æŒ‡å®šå±‚æ•°çš„ç›®å½•åï¼Œäºˆä»¥å¿½ç•¥ã€‚ --help #æ˜¾ç¤ºå¸®åŠ©ã€‚ --version #æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ ä½¿ç”¨å®ä¾‹ æŸ¥çœ‹å½“å‰ç›®å½•ä½¿ç”¨æƒ…å†µ\ndominic@hanhan:~/learning-linux$ du 56 ./.git/hooks 8 ./.git/logs/refs/heads 8 ./.git/logs/refs/remotes/origin 12 ./.git/logs/refs/remotes 24 ./.git/logs/refs 32 ./.git/logs 8 ./.git/info ä»¥æ˜“è¯»çš„æ–¹å¼æŸ¥çœ‹ä½¿ç”¨æƒ…å†µ\ndominic@hanhan:~/learning-linux$ du -h 56K ./.git/hooks 8.0K ./.git/logs/refs/heads 8.0K ./.git/logs/refs/remotes/origin 12K ./.git/logs/refs/remotes 24K ./.git/logs/refs 32K ./.git/logs 8.0K ./.git/info åªè¾“å‡ºå½“å‰ç›®å½•å ç”¨æ€»ç©ºé—´ï¼ŒåŒä¸Š-hå‘½ä»¤å°±æ˜¯ä»¥äººè¯»çš„æ–¹å¼ï¼ˆåŠ ä¸Šäº†æ•°æ®å•ä½ï¼‰\ndominic@hanhan:~/learning-linux$ du -hs 264K . æŸ¥çœ‹å½“å‰ç›®å½•åŠå…¶æŒ‡å®šæ·±åº¦ç›®å½•çš„å¤§å°\nä¸æ·±å…¥å­ç›®å½•ï¼Œå°±æ˜¯å½“å‰æ–‡ä»¶å¤¹æ‰€å ç”¨å¤§å° dominic@hanhan:~/learning-linux$ du -h --max-depth=0 264K . æ·±å…¥ä¸€å±‚ dominic@hanhan:~/learning-linux$ du -h --max-depth=2 56K ./.git/hooks 32K ./.git/logs 8.0K ./.git/info 28K ./.git/objects 4.0K ./.git/branches 28K ./.git/refs 180K ./.git 24K ./helloworld/c 44K ./helloworld/shell 72K ./helloworld 264K . å¿½ç•¥helloworldè¿™ä¸ªæ–‡ä»¶å¤¹\ndominic@hanhan:~/learning-linux$ du --exclude=helloworld 56 ./.git/hooks 8 ./.git/logs/refs/heads 8 ./.git/logs/refs/remotes/origin 12 ./.git/logs/refs/remotes 24 ./.git/logs/refs 32 ./.git/logs 8 ./.git/info 4 ./.git/objects/info 20 ./.git/objects/pack 28 ./.git/objects 4 ./.git/branches 8 ./.git/refs/heads 4 ./.git/refs/tags 8 ./.git/refs/remotes/origin 12 ./.git/refs/remotes 28 ./.git/refs 180 ./.git 192 . Refernece https://einverne.github.io/post/2018/03/du-find-out-which-fold-take-space.html https://www.runoob.com/linux/linux-comm-du.html ","permalink":"https://lifeislife.cn/posts/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-df-du%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E5%89%A9%E4%BD%99%E7%A9%BA%E9%97%B4/","summary":"\u003cp\u003e\u003ccode\u003edf\u003c/code\u003eå…¨ç§°\u003ccode\u003edisk filesystem\u003c/code\u003e ï¼Œä»¥ç£ç›˜åˆ†åŒºä¸ºå•ä½æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æŸ¥çœ‹ç£ç›˜æ–‡ä»¶å ç”¨ç©ºé—´ï¼Œç£ç›˜å‰©ä½™ç©ºé—´ç­‰ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003ch2 id=\"å‘½ä»¤æ ¼å¼\"\u003eå‘½ä»¤æ ¼å¼\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003edf [] []\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"å¯é€‰å‚æ•°\"\u003eå¯é€‰å‚æ•°\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-a      å…¨éƒ¨æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-h      æ–¹ä¾¿é˜…è¯»æ–¹å¼æ˜¾ç¤º\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-H      ç­‰äºâ€œ-hâ€ï¼Œä½†æ˜¯è®¡ç®—å¼ï¼Œ1K=1000ï¼Œè€Œä¸æ˜¯ 1K=1024\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-i      æ˜¾ç¤º inode ä¿¡æ¯\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-k      åŒºå—ä¸º 1024 å­—èŠ‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-l      åªæ˜¾ç¤ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-m      åŒºå—ä¸º 1048576 å­—èŠ‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e--no-sync å¿½ç•¥ sync å‘½ä»¤\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-P      è¾“å‡ºæ ¼å¼ä¸º POSIX\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e--sync  åœ¨å–å¾—ç£ç›˜ä¿¡æ¯å‰ï¼Œå…ˆæ‰§è¡Œ sync å‘½ä»¤\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e-T      æ–‡ä»¶ç³»ç»Ÿç±»å‹\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"ä½¿ç”¨å®ä¾‹\"\u003eä½¿ç”¨å®ä¾‹\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003edf -T\u003c/code\u003eæ˜¾ç¤ºåŒ…å«æ–‡ä»¶ç³»ç»Ÿï¼Œç±»å‹ï¼Œå¯ç”¨å¤§å°ï¼Œå·²ç”¨å¤§å°ï¼ŒæŒ‚è½½ç‚¹ç­‰ä¿¡æ¯ã€‚\u003c/p\u003e","title":"æ¯å¤©å­¦å‘½ä»¤-df/duæŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´"},{"content":"çœŸè ¢ï¼Œä¹‹å‰è´¹é‚£ä¹ˆå¤§åŠ²ï¼Œåªè¦ä¸€å¥å‘½ä»¤å°±å®Œäº‹äº†\nä¸‹è½½å®‰è£… sudo apt install qtcreator ä½†æ˜¯åœ¨ç”¨å‘½ä»¤è¡Œæ„å»º project æ—¶å¯èƒ½ä¼šæŠ¥é”™\nqmake -project could not find a Qt installation of \u0026#39;\u0026#39; è¿™æ—¶å€™éœ€è¦\nsudo apt-get install qt5-default å¥½äº†å¯ä»¥æ„‰å¿«ç©è€äº†ã€‚\nçæŠ˜è…¾\nä¸‹è½½ Qt ä» Qt5.15.0 èµ·ï¼Œå¯¹äºå¼€æºç”¨æˆ·ï¼ŒQt å®˜æ–¹ä¸å†æä¾›ç‹¬ç«‹å®‰è£…æ–‡ä»¶ï¼Œä¸”ä¸å†æœ‰ bug ä¿®å¤ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ Qt5.15.1ï¼‰ï¼Œå¦‚æœä»å®˜ç½‘ä¸‹è½½ï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘ã€‚è™½ç„¶æƒ³è¯•è¯•ç¼–è¯‘ï¼Œä½†æ˜¯è™šæ‹Ÿæœºåˆšå¼€å§‹å¼€çš„ç©ºé—´å¤ªå°äº†ï¼Œè¿˜æ˜¯å¦å¯»ä»–æ³•å§ã€‚ä»¥åæœ‰æœºä¼šå†æ¥ç¼–è¯‘è¯•è¯•æ–°åŠŸèƒ½ã€‚è‹¥è¯»è€…æœ‰å…´è¶£å¯ä»¥ä»å®˜ç½‘ä¸‹è½½æºç å¹¶ç¼–è¯‘ã€‚æˆ–è€…å‚è€ƒå®˜æ–¹çš„ç¼–è¯‘æ•™ç¨‹ï¼Œä» GitHub ä¸Šä¸‹è½½ã€‚\nå›½å†…æœ‰ä¸€äº›é•œåƒç«™ï¼Œæä¾› qt é•œåƒä¸‹è½½ï¼š æ¸…åå¤§å­¦ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/qt/archive/qt/ ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼šhttp://mirrors.ustc.edu.cn/qtproject/ åŒ—äº¬ç†å·¥å¤§å­¦ï¼šhttps://mirrors.cnnic.cn/qt/\nä»¥æ¸…åå¤§å­¦çš„é•œåƒä¸ºä¾‹ï¼Œæ‰¾åˆ°archive/qt/5.14/5.14.0/qt-opensource-linux-x64-5.14.0.runï¼Œç‚¹å‡»å³å¯å¼€å§‹ä¸‹è½½ã€‚\nqt 5.15 å·²ç»ä¸æä¾›å®‰è£…åŒ…ï¼Œæƒ³è¦æœ€æ–°ç‰ˆæœ¬ï¼Œåªèƒ½ä¸‹ 5.14ï¼Œä½†æ˜¯ 5.14.2 ä¸‹è½½æ²¡èµ„æºï¼Œä¸‹ä¸åŠ¨ï¼Œå¦‚æœé‡åˆ°ä¸‹ä¸åŠ¨çš„æƒ…å†µæ¢ä¸€ä¸ªç‰ˆæœ¬å§\nå®‰è£… Qt ä¸‹è½½çš„.runæ–‡ä»¶åŒå‡»æ˜¯æ— æ³•å®‰è£…çš„ï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰å¯æ‰§è¡Œçš„æƒé™ï¼Œéœ€è¦æˆ‘ä»¬èµ‹ç»™å®ƒæ‰§è¡Œæƒé™ï¼Œæ‰“å¼€ç»ˆç«¯è¿›å…¥å®‰è£…åŒ…çš„ç›®å½•ã€‚\nchmod +x filename.run chmodå‘½ä»¤æ˜¯æ§åˆ¶ç”¨æˆ·å¯¹æ–‡ä»¶çš„æƒé™ä¿®æ”¹çš„å‘½ä»¤ï¼Œxæ˜¯å¯æ‰§è¡Œæƒé™çš„å‚æ•°ã€‚ æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åå°±å¯ä»¥ç›´æ¥åŒå‡»å®‰è£…äº†ã€‚\nç½‘ä¸Šä¸€äº›æ•™ç¨‹å¯ä»¥è·³è¿‡ç™»å½•ï¼Œæˆ‘æ²¡æ‰¾åˆ°è·³è¿‡æŒ‰é’®ï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ªè´¦å·æ‰èƒ½ç»§ç»­å®‰è£…ã€‚ \u003c!DOCTYPE html\u003e Responsive Image å®‰è£…ç›®å½•ä¸€èˆ¬é€‰æ‹©åœ¨/optç›®å½•ä¸‹ \u003c!DOCTYPE html\u003e Responsive Image å®‰è£…çš„é™„åŠ ç»„ä»¶æœ€å¥½éƒ½é€‰æ‹©ï¼Œä»¥å…åæœŸä½¿ç”¨å†å®‰è£…éº»çƒ¦ã€‚Qt Creator è‚¯å®šè¦è£…çš„ã€‚ \u003c!DOCTYPE html\u003e Responsive Image å®‰è£…ä¾èµ–åº“ apt-get install g++ apt-get install libgl1-mesa-dev apt-get install libqt4-dev apt-get install build-essential # Build Essentialï¼Œå®ƒæ˜¯ä¸€ä¸ªå…ƒè½¯ä»¶åŒ…ï¼Œå¯è®©æ‚¨åœ¨Ubuntuä¸­å®‰è£…å’Œä½¿ç”¨c ++å·¥å…·ã€‚ sudo apt install qt5-default # å¦‚æœè¦å°†Qt 5ç”¨ä½œé»˜è®¤çš„Qt Creatorç‰ˆæœ¬éœ€è¦å®‰è£…ï¼Œå¦åˆ™ä¼šæŠ¥ qmake: could not find a Qt installation of \u0026#39;\u0026#39;çš„é”™è¯¯ ä½¿ç”¨ Qt Creator åˆ›å»ºç¬¬ä¸€ä¸ªç¨‹åº ä½¿ç”¨ Qt Creator åˆ›å»º é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªä¸å¸¦çª—å£çš„ HelloWorld ç¨‹åºï¼Œæµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸï¼Œæ‰“å¼€ Qt Creator-æ–‡ä»¶ - æ–°å»ºæ–‡ä»¶æˆ–é¡¹ç›®ï¼Œé€‰æ‹© Non-Qt Project-Plain C++ Applicationã€‚ \u003c!DOCTYPE html\u003e Responsive Image æ¥ä¸‹æ¥å°±è®¾ç½®é¡¹ç›®åç­‰ï¼Œä¸€ç›´ä¸‹ä¸€æ­¥ã€‚å®Œæˆåå°±å¯ä»¥åœ¨ç¼–è¾‘å™¨çœ‹åˆ°å¦‚ä¸‹ \u003c!DOCTYPE html\u003e Responsive Image ç‚¹å‡»å·¦ä¸‹è§’è¿è¡ŒæŒ‰é’®å°±å¯ä»¥å¾—åˆ°å¦‚ä¸‹ï¼š \u003c!DOCTYPE html\u003e Responsive Image å†åˆ›å»ºä¸€ä¸ªå¸¦çª—å£çš„ HelloWorldï¼Œåœ¨é€‰æ‹©æ¨¡æ¿æ—¶é€‰æ‹© Application-Qt Widgets Applicationã€‚ä¸€è·¯ç‚¹ä¸‹ä¸€æ­¥å°±å¯ä»¥å®Œæˆåˆ›å»ºï¼Œè¿è¡Œåå°±å¯å¾—åˆ°ä¸€ä¸ªç°ç™½çš„ HelloWorld çª—å£ã€‚\nå‘½ä»¤è¡Œç¼–è¯‘ç¬¬ä¸€ä¸ª Qt ç¨‹åº é¦–å…ˆåˆ›å»ºå·¥ä½œç›®å½•HelloWorldQt\nmkdir HelloWorld è¿›å…¥é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªmain.cppæ–‡ä»¶\ncd HelloWorldQt vim main.cpp ç¼–è¾‘ä»¥ä¸‹å†…å®¹ï¼š\n#include \u0026lt;QApplication\u0026gt; #include \u0026lt;QLabel\u0026gt; #include \u0026lt;QWidget\u0026gt; int main(int argc, char *argv[ ]) { QApplication app(argc, argv); QLabel hello(\u0026#34;\u0026lt;center\u0026gt;Welcome to my first Qt program\u0026lt;/center\u0026gt;\u0026#34;); hello.setWindowTitle(\u0026#34;My First Qt Program\u0026#34;); hello.resize(400, 400); hello.show(); return app.exec(); } å»ºç«‹ QtProject æ–‡ä»¶\nqmake -project ç”¨vimæ‰“å¼€HelloWorldQt.proæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹\nQT += gui widgets \u003c!DOCTYPE html\u003e Responsive Image è¿è¡Œqmakeï¼Œä½¿é¡¹ç›® platform-specificï¼Œä¼šå¾—åˆ°ä¸€ä¸ªMakefileæ–‡ä»¶\nqmake HelloWorldQt.pro ä½¿ç”¨makeå‘½ä»¤å°†Makefileç¼–è¯‘ä¸ºå¯æ‰§è¡Œç¨‹åº\nâœ HelloWorldQt make g++ -c -pipe -O2 -Wall -W -D_REENTRANT -fPIC -DQT_DEPRECATED_WARNINGS / -DQT_NO_DEBUG -DQT_WIDGETS_LIB / -DQT_GUI_LIB -DQT_CORE_LIB -I. / -I. -isystem / /usr/include/x86_64-linux-gnu/qt5 -isystem / /usr/include/x86_64-linux-gnu/qt5/QtWidgets / -isystem /usr/include/x86_64-linux-gnu/qt5/QtGui / -isystem /usr/include/x86_64-linux-gnu/qt5/QtCore -I. / -I/usr/lib/x86_64-linux-gnu/qt5/mkspecs/linux-g++ -o main.o main.cpp g++ -Wl,-O1 -o HelloWorldQt main.o / /usr/lib/x86_64-linux-gnu/libQt5Widgets.so / /usr/lib/x86_64-linux-gnu/libQt5Gui.so / /usr/lib/x86_64-linux-gnu/libQt5Core.so / /usr/lib/x86_64-linux-gnu/libGL.so -lpthread å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‰§è¡Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹\n./HelloWorldQt \u003c!DOCTYPE html\u003e Responsive Image ","permalink":"https://lifeislife.cn/posts/linux-ubuntu-%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85qt/","summary":"\u003cp\u003eçœŸè ¢ï¼Œä¹‹å‰è´¹é‚£ä¹ˆå¤§åŠ²ï¼Œåªè¦ä¸€å¥å‘½ä»¤å°±å®Œäº‹äº†\u003c/p\u003e\n\u003ch2 id=\"ä¸‹è½½å®‰è£…\"\u003eä¸‹è½½å®‰è£…\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install qtcreator\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä½†æ˜¯åœ¨ç”¨å‘½ä»¤è¡Œæ„å»º project æ—¶å¯èƒ½ä¼šæŠ¥é”™\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eqmake -project\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecould not find a Qt installation of \u0026#39;\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™æ—¶å€™éœ€è¦\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt-get install qt5-default \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå¥½äº†å¯ä»¥æ„‰å¿«ç©è€äº†ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eçæŠ˜è…¾\u003c/p\u003e\n\u003ch2 id=\"ä¸‹è½½-qt\"\u003eä¸‹è½½ Qt\u003c/h2\u003e\n\u003cp\u003eä» Qt5.15.0 èµ·ï¼Œå¯¹äºå¼€æºç”¨æˆ·ï¼ŒQt å®˜æ–¹ä¸å†æä¾›ç‹¬ç«‹å®‰è£…æ–‡ä»¶ï¼Œä¸”ä¸å†æœ‰ bug ä¿®å¤ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ Qt5.15.1ï¼‰ï¼Œå¦‚æœä»å®˜ç½‘ä¸‹è½½ï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘ã€‚è™½ç„¶æƒ³è¯•è¯•ç¼–è¯‘ï¼Œä½†æ˜¯è™šæ‹Ÿæœºåˆšå¼€å§‹å¼€çš„ç©ºé—´å¤ªå°äº†ï¼Œè¿˜æ˜¯å¦å¯»ä»–æ³•å§ã€‚ä»¥åæœ‰æœºä¼šå†æ¥ç¼–è¯‘è¯•è¯•æ–°åŠŸèƒ½ã€‚è‹¥è¯»è€…æœ‰å…´è¶£å¯ä»¥ä»\u003ca href=\"https://download.qt.io/archive/qt/\"\u003eå®˜ç½‘\u003c/a\u003eä¸‹è½½æºç å¹¶ç¼–è¯‘ã€‚æˆ–è€…å‚è€ƒ\u003ca href=\"https://wiki.qt.io/Building_Qt_5_from_Git#Getting_the_source_code\"\u003eå®˜æ–¹çš„ç¼–è¯‘æ•™ç¨‹\u003c/a\u003eï¼Œä» GitHub ä¸Šä¸‹è½½ã€‚\u003c/p\u003e","title":"Linux(Ubuntu) ç¯å¢ƒä¸‹å®‰è£… Qt"},{"content":"è°ƒç”¨æ–‡æ¡£ qemu-system-x86_64 [options] [disk_image] disk_imageæ˜¯ IDE ç¡¬ç›˜ 0 çš„åŸå§‹ç¡¬ç›˜æ˜ åƒã€‚æŸäº›ç›®æ ‡ä¸éœ€è¦ç£ç›˜æ˜ åƒã€‚\næ ‡å‡†å‚æ•° Standard options -h åŠŸèƒ½ æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º\nå­å‚æ•°\nè°ƒç”¨å®ä¾‹\nqemu-system-riscv32 -h -version åŠŸèƒ½ æ˜¾ç¤º qemu ç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º\nå­å‚æ•°\nè°ƒç”¨å®ä¾‹\nqemu-system-riscv32 -version -machine [type=]name[,prop=value[,...]] åŠŸèƒ½ é€šè¿‡åç§°é€‰æ‹©æ¨¡æ‹Ÿå™¨ã€‚ä½¿ç”¨ -machine help å¯ä»¥æŸ¥çœ‹å¯ç”¨çš„æ¨¡æ‹Ÿå™¨ã€‚ å¯¹äºæ”¯æŒè·¨ç‰ˆæœ¬å®æ—¶è¿ç§»å…¼å®¹æ€§çš„æ¶æ„ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½ä¼šå¼•å…¥ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬åŒ–æ¨¡æ‹Ÿå™¨ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ2.8.0 ç‰ˆæœ¬ä¸º x86_64/i686 æ¶æ„å¼•å…¥äº†â€œpc-i440fx-2.8â€å’Œâ€œpc-q35-2.8â€ã€‚\nå­å‚æ•° ä¸ºäº†å…è®¸ç”¨æˆ·ä» QEMU 2.8.0 ç‰ˆå®æ—¶è¿ç§»åˆ° QEMU 2.9.0 ç‰ˆï¼Œ2.9.0 ç‰ˆä¹Ÿå¿…é¡»æ”¯æŒâ€œpc-i440fx-2.8â€å’Œâ€œpc-q35-2.8â€æœºå™¨ã€‚ä¸ºäº†å…è®¸ç”¨æˆ·åœ¨å‡çº§æ—¶å®æ—¶è¿ç§» VMs è·³è¿‡å¤šä¸ªä¸­é—´ç‰ˆæœ¬ï¼ŒQEMU çš„æ–°ç‰ˆæœ¬å°†æ”¯æŒå¤šä¸ªä»¥å‰ç‰ˆæœ¬çš„æœºå™¨ç±»å‹ã€‚ æ”¯æŒçš„æœºå™¨å±æ€§æœ‰ï¼š\naccel=accels1[:accels2[:...]] This is used to enable an accelerator. Depending on the target architecture, kvm, xen, hax, hvf, nvmm, whpx or tcg can be available. By default, tcg is used. If there is more than one accelerator specified, the next one is used if the previous one fails to initialize. vmport=on|off|auto Enables emulation of VMWare IO port, for vmmouse etc. auto says to select the value based on accel. For accel=xen the default is off otherwise the default is on. dump-guest-core=on|off Include guest memory in a core dump. The default is on. mem-merge=on|off Enables or disables memory merge support. This feature, when supported by the host, de-duplicates identical memory pages among VMs instances (enabled by default). aes-key-wrap=on|off Enables or disables AES key wrapping support on s390-ccw hosts. This feature controls whether AES wrapping keys will be created to allow execution of AES cryptographic functions. The default is on. dea-key-wrap=on|off Enables or disables DEA key wrapping support on s390-ccw hosts. This feature controls whether DEA wrapping keys will be created to allow execution of DEA cryptographic functions. The default is on. nvdimm=on|off Enables or disables NVDIMM support. The default is off. memory-encryption= Memory encryption object to use. The default is none. hmat=on|off Enables or disables ACPI Heterogeneous Memory Attribute Table (HMAT) support. The default is off. memory-backend='id' An alternative to legacy -mem-path and mem-prealloc options. Allows to use a memory backend as main RAM. For example: :: -object memory-backend-file,id=pc.ram,size=512M,mem-path=/hugetlbfs,prealloc=on,share=on -machine memory-backend=pc.ram -m 512M Migration compatibility note: a) as backend id one shall use value of â€˜default-ram-idâ€™, advertised by machine type (available via query-machines QMP command), if migration to/from old QEMU (\u0026lt;5.0) is expected. b) for machine types 4.0 and older, user shall use x-use-canonical-path-for-ramblock-id=off backend option if migration to/from old QEMU (\u0026lt;5.0) is expected. For example: :: -object memory-backend-ram,id=pc.ram,size=512M,x-use-canonical-path-for-ramblock-id=off -machine memory-backend=pc.ram -m 512M è°ƒç”¨å®ä¾‹ï¼š\nqemu-system-riscv32 -machine virt,mem-merge=on -cpu model åŠŸèƒ½ é€‰æ‹© CPU å‹å·ï¼ˆ-cpu helpæ˜¾ç¤ºå¸®åŠ©åˆ—è¡¨å’Œé™„åŠ åŠŸèƒ½çš„é€‰é¡¹ï¼‰ é»˜è®¤æƒ…å†µä¼šç»™å®¢æˆ·æœºæä¾› qemu64 æˆ– qemu32 çš„åŸºæœ¬ CPU æ¨¡å‹ã€‚è¿™æ ·åšå¯ä»¥å¯¹ CPU ç‰¹æ€§æä¾›ä¸€äº›é«˜çº§çš„è¿‡æ»¤åŠŸèƒ½ï¼Œè®©å®¢æˆ·æœºåœ¨åŒä¸€ç»„ç¡¬ä»¶å¹³å°ä¸Šçš„åŠ¨æ€è¿ç§»ä¼šæ›´åŠ å¹³æ»‘å’Œå®‰å…¨ã€‚ åœ¨å®¢æˆ·æœºä¸­æŸ¥çœ‹ CPU ä¿¡æ¯ (cat /proc/cpuinfo)ï¼Œmodel name å°±æ˜¯å½“å‰ CPU æ¨¡å‹çš„åç§°ã€‚\nè°ƒç”¨å®ä¾‹\nqemu-system-riscv32 -cpu rv32 accel name[,prop=value[,...]] åŠŸèƒ½ This is used to enable an accelerator. Depending on the target architecture, kvm, xen, hax, hvf, nvmm, whpx or tcg can be available. By default, tcg is used. If there is more than one accelerator specified, the next one is used if the previous one fails to initialize. å­å‚æ•° igd-passthru=on|off When Xen is in use, this option controls whether Intel integrated graphics devices can be passed through to the guest (default=off) kernel-irqchip=on|off|split Controls KVM in-kernel irqchip support. The default is full acceleration of the interrupt controllers. On x86, split irqchip reduces the kernel attack surface, at a performance cost for non-MSI interrupts. Disabling the in-kernel irqchip completely is not recommended except for debugging purposes. kvm-shadow-mem=size Defines the size of the KVM shadow MMU. split-wx=on|off Controls the use of split w^x mapping for the TCG code generation buffer. Some operating systems require this to be enabled, and in such a case this will default on. On other operating systems, this will default off, but one may enable this for testing or debugging. tb-size=n Controls the size (in MiB) of the TCG translation block cache. thread=single|multi Controls number of TCG threads. When the TCG is multi-threaded there will be one thread per vCPU therefore taking advantage of additional host cores. The default is to enable multi-threading where both the back-end and front-ends support it and no incompatible TCG features have been enabled (e.g. icount/replay). dirty-ring-size=n When the KVM accelerator is used, it controls the size of the per-vCPU dirty page ring buffer (number of entries for each vCPU). It should be a value that is power of two, and it should be 1024 or bigger (but still less than the maximum value that the kernel supports). 4096 could be a good initial value if you have no idea which is the best. Set this value to 0 to disable the feature. By default, this feature is disabled (dirty-ring-size=0). When enabled, KVM will instead record dirty pages in a bitmap. smp [[cpus=]n][,maxcpus=maxcpus][,sockets=sockets][,dies=dies][,cores=cores][,threads=threads] åŠŸèƒ½ é…ç½®å®¢æˆ·æœºçš„ SMPï¼ˆSymmetric Multi-Processingï¼‰ï¼Œå¯¹ç§°å¤šå¤„ç†æœº\nå­å‚æ•°\n[cpus=]n è®¾ç½®å®¢æˆ·æœºä¸­ä½¿ç”¨é€»è¾‘çš„ CPU æ•°é‡ï¼ˆé»˜è®¤å€¼æ˜¯ 1ï¼‰ã€‚ [,maxcpus=cpus] è®¾ç½®å®¢æˆ·æœºæœ€å¤§å¯èƒ½è¢«ä½¿ç”¨çš„ CPU æ•°é‡ï¼ˆå¯ä»¥ç”¨çƒ­æ’æ‹” hot-plug æ·»åŠ  CPUï¼Œä¸èƒ½è¶…è¿‡ maxcpus ä¸Šé™ï¼‰ã€‚ [,cores=cores] è®¾ç½®æ¯ä¸ª CPU socket ä¸Šçš„ core æ•°é‡ï¼ˆé»˜è®¤å€¼æ˜¯ 1ï¼‰ã€‚ [,threads=threads] è®¾ç½®æ¯ä¸ª CPU core ä¸Šçš„çº¿ç¨‹æ•°ï¼ˆé»˜è®¤å€¼æ˜¯ 1ï¼‰ã€‚ [,sockets=sockets] è®¾ç½®å®¢æˆ·æœºä¸­æ€»çš„ CPU socket æ•°é‡ã€‚ è°ƒç”¨å®ä¾‹\nqemu-system-x86_64 -smp 1,sockets=1,cores=2,threads=2 -numa node[,mem=size][,cpus=firstcpu[-lastcpu]][,nodeid=node][,initiator=initiator] -numa node[,memdev=id][,cpus=firstcpu[-lastcpu]][,nodeid=node][,initiator=initiator] -numa dist,src=source,dst=destination,val=distance -numa cpu,node-id=node[,socket-id=x][,core-id=y][,thread-id=z] -numa hmat-lb,initiator=node,target=node,hierarchy=hierarchy,data-type=tpye[,latency=lat][,bandwidth=bw] -numa hmat-cache,node-id=node,size=size,level=level[,associativity=str][,policy=str][,line=size] åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -add-fd fd=fd,set=set[,opaque=opaque] åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -set group.id.arg=value åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -global driver.prop=value åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -global driver=driver,property=property,value=value åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -boot [order=drives][,once=drives][,menu=on|off][,splash=sp_name][,splash-time=sp_time][,reboot-timeout=rb_timeout][,strict=on|off] åŠŸèƒ½ è®¾ç½®å®¢æˆ·æœºå¯åŠ¨é¡ºåº åœ¨ qemu æ¨¡æ‹Ÿçš„ x86 å¹³å°ä¸­ï¼Œç”¨\u0026quot;a\u0026quot;ã€\u0026ldquo;b\u0026quot;åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€å’Œç¬¬äºŒè½¯é©±ï¼Œç”¨\u0026quot;c\u0026quot;è¡¨ç¤ºç¬¬ä¸€ä¸ªç¡¬ç›˜ï¼Œç”¨\u0026quot;d\u0026quot;è¡¨ç¤º CD-ROM å…‰é©±ï¼Œç”¨\u0026quot;n\u0026quot;è¡¨ç¤ºä»ç½‘ç»œå¯åŠ¨ã€‚ é»˜è®¤ä»ç¡¬ç›˜å¯åŠ¨ã€‚\nå­å‚æ•°\n[order=drives] è®¾ç½®å¯åŠ¨é¡ºåºã€‚ [,once=drives] åªè®¾ç½®ä¸‹ä¸€æ¬¡å¯åŠ¨çš„é¡ºåºï¼Œå†é‡å¯åæ— æ•ˆã€‚ [,menu=on|off] åªè¦å›ºä»¶/BIOS æ”¯æŒï¼Œå°±å¯ä»¥å¯ç”¨äº¤äº’å¼å¼•å¯¼èœå•/æç¤ºã€‚é»˜è®¤ä¸ºéäº¤äº’å¼å¼•å¯¼ã€‚ [,splash=sp_name] å¦‚æœå›ºä»¶/BIOS æ”¯æŒé€‰é¡¹ splash=sp_name å’Œ menu=onï¼Œåˆ™å¯ä»¥å°†å¯åŠ¨ç”»é¢ä¼ é€’ç»™ biosï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå°†å…¶æ˜¾ç¤ºä¸ºå¾½æ ‡ã€‚ç›®å‰ Seabios for X86 ç³»ç»Ÿæ”¯æŒå®ƒã€‚é™åˆ¶ï¼šå¯åŠ¨æ–‡ä»¶å¯ä»¥æ˜¯ 24 BPP æ ¼å¼ï¼ˆçœŸå½©è‰²ï¼‰çš„ jpeg æ–‡ä»¶æˆ– BMP æ–‡ä»¶ã€‚åˆ†è¾¨ç‡åº”è¯¥æ˜¯ SVGA æ¨¡å¼æ”¯æŒçš„ï¼Œæ¨è 320x240ã€640x480ã€800x640ã€‚ [,splash-time=sp_time] [,reboot-timeout=rb_timeout] å¼•å¯¼å¤±è´¥æ—¶ï¼Œå®¢æˆ·æœºå°†æš‚åœ rb_timeout æ¯«ç§’ï¼Œç„¶åé‡æ–°å¯åŠ¨ã€‚å¦‚æœ rb_timeout ä¸º \u0026lsquo;-1\u0026rsquo;ï¼Œå®¢æˆ·æœºä¸ä¼šé‡å¯ï¼Œqemu é»˜è®¤å°† \u0026lsquo;-1\u0026rsquo; ä¼ é€’ç»™ biosã€‚ç›®å‰ Seabios for X86 ç³»ç»Ÿæ”¯æŒå®ƒã€‚ [,strict=on|off] åªè¦å›ºä»¶/BIOS æ”¯æŒï¼Œå°±é€šè¿‡ä¸¥æ ¼å¯åŠ¨ã€‚è¿™ä»…åœ¨ bootindex é€‰é¡¹æ›´æ”¹å¼•å¯¼ä¼˜å…ˆçº§æ—¶æœ‰æ•ˆã€‚é»˜è®¤ä¸ºéä¸¥æ ¼å¼•å¯¼ã€‚ è°ƒç”¨å®ä¾‹\n# å°è¯•å…ˆä»ç½‘ç»œå¯åŠ¨ï¼Œç„¶åä»ç¡¬ç›˜å¯åŠ¨ qemu-system-x86_64 -boot order=nc # å…ˆä»å…‰é©±å¯åŠ¨ï¼Œé‡å¯ååˆ‡æ¢å›é»˜è®¤é¡ºåº qemu-system-x86_64 -boot once=d # 5 ç§’é’Ÿçš„å¯åŠ¨ç”»é¢ã€‚ qemu-system-x86_64 -boot menu=on,splash=/root/boot.bmp,splash-time=5000 -m [size=]megs[,slots=n,maxmem=size] åŠŸèƒ½ å°†å®¢æˆ·æœºå†…å­˜è®¾ç½®ä¸º megs Må­—èŠ‚ã€‚é»˜è®¤å€¼ä¸º 128 MiBã€‚æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨â€œMâ€æˆ–â€œGâ€çš„åç¼€ã€‚é½ã€‚\nå­å‚æ•°\n[size=]megs å°†å®¢æˆ·æœºå†…å­˜è®¾ç½®ä¸º megs Må­—èŠ‚ [,slots=n,maxmem=size] å¯ç”¨äºè®¾ç½®å¯çƒ­æ’æ‹”å†…å­˜æ’æ§½çš„æ•°é‡å’Œæœ€å¤§å†…å­˜æ•°é‡ã€‚maxmem å¿…é¡»ä¸é¡µé¢å¤§å°å¯¹ è°ƒç”¨å®ä¾‹ ä»¥ä¸‹å‘½ä»¤è¡Œå°†å®¢æˆ·æœºå¯åŠ¨ RAM å¤§å°è®¾ç½®ä¸º 1GBï¼Œåˆ›å»º 3 ä¸ªæ’æ§½ä»¥çƒ­æ’æ‹”é¢å¤–å†…å­˜ï¼Œå¹¶å°†å®¢æˆ·æœºå¯ä»¥è¾¾åˆ°çš„æœ€å¤§å†…å­˜è®¾ç½®ä¸º 4GBï¼š\nqemu-system-x86_64 -m 1G,slots=3,maxmem=4G å¦‚æœæœªæŒ‡å®š slot å’Œ maxmemï¼Œåˆ™ä¸ä¼šå¯ç”¨å†…å­˜çƒ­æ’æ‹”ï¼Œå¹¶ä¸”å®¢æˆ·æœºå†…å­˜æ°¸è¿œä¸ä¼šå¢åŠ ã€‚\n-mem-path path åŠŸèƒ½ ä½¿ç”¨huge pageã€‚å¯¹äºå†…å­˜è®¿é—®å¯†é›†å‹çš„åº”ç”¨ï¼Œä½¿ç”¨huge pageæ˜¯å¯ä»¥æ¯”è¾ƒæ˜æ˜¾åœ°æé«˜å®¢æˆ·æœºæ€§èƒ½ã€‚ ä½¿ç”¨huge pageçš„å†…å­˜ä¸èƒ½è¢«æ¢å‡ºï¼ˆswap outï¼‰ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ballooningæ–¹å¼è‡ªåŠ¨å¢é•¿ã€‚ å­å‚æ•° è°ƒç”¨å®ä¾‹ -mem-prealloc åŠŸèƒ½ ä½¿å®¿ä¸»æœºåœ¨å®¢æˆ·æœºå¯åŠ¨æ—¶å°±å…¨éƒ¨åˆ†é…å¥½å®¢æˆ·æœºçš„å†…å­˜ å­å‚æ•° è°ƒç”¨å®ä¾‹ -k language åŠŸèƒ½ è®¾ç½®é”®ç›˜å¸ƒå±€è¯­è¨€ï¼Œé»˜è®¤ä¸ºen-us\nå­å‚æ•° å¯ç”¨å¸ƒå±€ï¼š\nar de-ch es fo fr-ca hu ja mk no pt-br sv da en-gb et fr fr-ch is lt nl pl ru th de en-us fi fr-be hr it lv nl-be pt sl tr è°ƒç”¨å®ä¾‹\nå—è®¾å¤‡å‚æ•° Block device options fda file åŠŸèƒ½ ä¸ºå®¢æˆ·æœºæŒ‡å®šè½¯ç›˜è®¾å¤‡ï¼ŒæŒ‡å®šå®¢æˆ·æœºçš„ç¬¬ä¸€ä¸ªè½¯ç›˜è®¾å¤‡ï¼Œåœ¨å®¢æˆ·æœºä¸­æ˜¾ç¤ºä¸º/dev/fd0 å­å‚æ•° è°ƒç”¨å®ä¾‹ fdb file åŠŸèƒ½ ä¸ºå®¢æˆ·æœºæŒ‡å®šè½¯ç›˜è®¾å¤‡ï¼ŒæŒ‡å®šå®¢æˆ·æœºçš„ç¬¬ä¸€ä¸ªè½¯ç›˜è®¾å¤‡ï¼Œåœ¨å®¢æˆ·æœºä¸­æ˜¾ç¤ºä¸º/dev/fd1 å­å‚æ•° è°ƒç”¨å®ä¾‹ hda file hdb file hdc file hdd file åŠŸèƒ½ ä¸ºå®¢æˆ·æœºæŒ‡å®šå—å­˜å‚¨è®¾å¤‡ï¼ŒæŒ‡å®šå®¢æˆ·æœºç§çš„ç¬¬ä¸€ä¸ª IDE è®¾å¤‡ å­å‚æ•° è‹¥å®¢æˆ·æœºä½¿ç”¨PIIX_IDEé©±åŠ¨ï¼Œæ˜¾ç¤ºä¸º/dev/hdaè®¾å¤‡ï¼› è‹¥å®¢æˆ·æœºä½¿ç”¨ata_piixé©±åŠ¨ï¼Œæ˜¾ç¤ºä¸º/dev/sdaè®¾å¤‡ã€‚ è‹¥æ²¡æœ‰ä½¿ç”¨-hdxçš„å‚æ•°ï¼Œåˆ™é»˜è®¤ä½¿ç”¨-hdaå‚æ•°ï¼› å¯ä»¥å°†å®¿ä¸»æœºçš„ä¸€å—ç¡¬ç›˜ä½œä¸º-hdaçš„å‚æ•°ä½¿ç”¨ï¼› è‹¥æ–‡ä»¶ååŒ…å«é€—å·ï¼Œåº”ä½¿ç”¨ä¸¤ä¸ªè¿ç»­çš„é€—å·è¿›è¡Œè½¬ä¹‰ã€‚ è°ƒç”¨å®ä¾‹ -cdrom file åŠŸèƒ½ ä¸ºå®¢æˆ·æœºæŒ‡å®šå…‰ç›˜ CD-ROMã€‚å¯ä»¥å°†å®¿ä¸»æœºçš„å…‰é©±/dev/cdromè®¾å¤‡ä½œä¸º-cdromå‚æ•°ä½¿ç”¨ã€‚-cdromå‚æ•°ä¸èƒ½ä¸-hdcå‚æ•°åŒæ—¶ä½¿ç”¨ï¼Œå› ä¸º-cdromå°±æ˜¯å®¢æˆ·æœºé‡Œçš„ç¬¬ä¸‰ä¸ª IDE è®¾å¤‡ å­å‚æ•° è°ƒç”¨å®ä¾‹ -blockdev option[,option[,option[,...]]] åŠŸèƒ½\nå­å‚æ•°\nè°ƒç”¨å®ä¾‹\n-drive option[,option[,option[,...]]] åŠŸèƒ½ å®šä¹‰ä¸€ä¸ªå­˜å‚¨é©±åŠ¨å™¨ å­å‚æ•° [file=file] åŠ è½½fileé•œåƒæ–‡ä»¶åˆ°å®¢æˆ·æœºçš„é©±åŠ¨å™¨ä¸­ã€‚ [,if=type] æŒ‡å®šé©±åŠ¨å™¨ä½¿ç”¨çš„æ¥å£ç±»å‹ï¼šå¯ç”¨çš„ç±»ç±»å‹æœ‰ï¼šideã€scsiã€virtioã€sdã€floopyã€pflashç­‰ã€‚ [,bus=n] è®¾ç½®é©±åŠ¨å™¨åœ¨å®¢æˆ·æœºä¸­çš„æ€»çº¿ç¼–å·ã€‚ [,unit=m] è®¾ç½®é©±åŠ¨å™¨åœ¨å®¢æˆ·æœºä¸­çš„å•å…ƒç¼–å·ã€‚ [,media=d] è®¾ç½®é©±åŠ¨å™¨ä¸­åª’ä»‹çš„ç±»å‹ï¼Œå€¼ä¸º disk æˆ– cdromã€‚ [,index=i] è®¾ç½®åœ¨é€šä¸€ç§æ¥å£çš„é©±åŠ¨å™¨ä¸­çš„ç´¢å¼•ç¼–å·ã€‚ [,snapshot=on|off] å½“å€¼ä¸º on æ—¶ï¼Œqemu ä¸ä¼šå°†ç£ç›˜æ•°æ®çš„æ›´æ”¹å†™å›åˆ°é•œåƒæ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å†™åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¯ä»¥åœ¨ qemu moinitor ä¸­ä½¿ç”¨ commit å‘½ä»¤å¼ºåˆ¶å°†ç£ç›˜æ•°æ®ä¿å­˜å›é•œåƒæ–‡ä»¶ä¸­ã€‚ [,cache=writethrough|writeback|none|directsync|unsafe] è®¾ç½®å®¿ä¸»æœºå¯¹å—è®¾å¤‡æ•°æ®è®¿é—®çš„ cache æ¨¡å¼ã€‚ï¼Œ writethroughï¼ˆç›´å†™æ¨¡å¼ï¼‰ï¼šè°ƒç”¨ write å†™å…¥æ•°æ®çš„åŒæ—¶å°†æ•°æ®å†™å…¥ç£ç›˜ç¼“å­˜å’Œåç«¯å—è®¾å¤‡ä¸­ã€‚ writebackï¼ˆå›å†™æ¨¡å¼ï¼‰ï¼šè°ƒç”¨ write å†™å…¥æ•°æ®æ—¶åªå°†æ•°æ®å†™å…¥åˆ°ç£ç›˜ç¼“å­˜ä¸­ï¼Œå½“æ•°æ®è¢«æ¢å‡ºç¼“å­˜æ—¶æ‰å†™å…¥åˆ°åç«¯å­˜å‚¨ä¸­ã€‚ä¼˜ç‚¹å†™å…¥æ•°æ®å—ï¼Œç¼ºç‚¹ç³»ç»Ÿæ‰ç”µæ•°æ®æ— æ³•æ¢å¤ã€‚ [,aio=threads|native] é€‰æ‹©å¼‚æ­¥ IO çš„æ–¹å¼ threads ä¸º aio å‚æ•°çš„é»˜è®¤å€¼ï¼Œè®©ä¸€ä¸ªçº¿ç¨‹æ± å»å¤„ç†å¼‚æ­¥ IOï¼› native åªé€‚ç”¨äº cache=none çš„æƒ…å†µï¼Œä½¿ç”¨çš„æ˜¯ Linux åŸç”Ÿçš„ AIOã€‚ [,format=f] æŒ‡å®šä½¿ç”¨çš„ç£ç›˜æ ¼å¼ï¼Œé»˜è®¤æ˜¯ QEMU è‡ªåŠ¨æ£€æµ‹ç£ç›˜æ ¼å¼çš„ã€‚ [,serial=s] æŒ‡å®šåˆ†é…ç»™è®¾å¤‡çš„åºåˆ—å·ã€‚ [,addr=A] åˆ†é…ç»™é©±åŠ¨å™¨æ§åˆ¶å™¨çš„ PCI åœ°å€ï¼Œåªåœ¨ä½¿ç”¨ virtio æ¥å£æ—¶é€‚ç”¨ã€‚ [,id=name] è®¾ç½®é©±åŠ¨å™¨çš„ IDï¼Œå¯ä»¥åœ¨ QEMU monitor ä¸­ç”¨ info block çœ‹åˆ°ã€‚ [,readonly=on|off] è®¾ç½®é©±åŠ¨å™¨æ˜¯å¦åªè¯»ã€‚ è°ƒç”¨å®ä¾‹ USB å‚æ•° USB convenience options æ˜¾ç¤ºå‚æ•° Display options ä»…é™ i386 æ¶æ„çš„å‚æ•° i386 target only ç½‘ç»œå‚æ•° Network options å­—ç¬¦è®¾å¤‡å‚æ•° Character device options TPM è®¾å¤‡ TPM device options æŒ‡å®šå¯åŠ¨æŒ‡å¼• Linux/Multiboot boot specific å½“ä½¿ç”¨è¯¥è°ƒç”¨å‚æ•°æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ç»™å®šçš„ Linux æˆ–è€…å¤šé‡å¼•å¯¼å†…æ ¸ï¼Œè€Œä¸éœ€è¦å®‰è£…å†…æ ¸åˆ°ä¸€ä¸ªå…‰ç›˜ä¸­ã€‚è¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿åœ°æµ‹è¯•ä¸åŒå†…æ ¸ã€‚\n-kernel bzImage\nåŠŸèƒ½ ç”¨ bzImage ä½œä¸ºå†…æ ¸é•œåƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å¯åŠ¨æ ¼å¼ã€‚ -append cmdline\nåŠŸèƒ½ ç”¨cmdå‘½ä»¤è¡Œï¼Œä½œä¸ºå†…æ ¸çš„å‘½ä»¤è¡Œ -initrd file\nåŠŸèƒ½ ç”¨æ–‡ä»¶ä½œä¸ºåˆå§‹åŒ– ram -initrd \u0026quot;file1 arg=foo,file2\u0026quot;\nåŠŸèƒ½ æ­¤è¯­æ³•ä»…é€‚ç”¨äºå¤šé‡å¼•å¯¼ ä½¿ç”¨ file1 å’Œ file2 ä½œä¸ºæ¨¡å—å¹¶å°† arg=foo ä½œä¸ºå‚æ•°ä¼ é€’ç»™ç¬¬ä¸€ä¸ªæ¨¡å— -dtb file\nåŠŸèƒ½ å°†æ–‡ä»¶ç”¨ä½œè®¾å¤‡æ ‘äºŒè¿›åˆ¶ (dtb) æ˜ åƒå¹¶åœ¨å¯åŠ¨æ—¶å°†å…¶ä¼ é€’ç»™å†…æ ¸ ","permalink":"https://lifeislife.cn/posts/qemu%E6%96%87%E6%A1%A3/","summary":"\u003ch1 id=\"è°ƒç”¨æ–‡æ¡£\"\u003eè°ƒç”¨æ–‡æ¡£\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003eqemu-system-x86_64 [options] [disk_image] \u003c/code\u003e\n\u003ccode\u003edisk_image\u003c/code\u003eæ˜¯ IDE ç¡¬ç›˜ 0 çš„åŸå§‹ç¡¬ç›˜æ˜ åƒã€‚æŸäº›ç›®æ ‡ä¸éœ€è¦ç£ç›˜æ˜ åƒã€‚\u003c/p\u003e\n\u003ch2 id=\"æ ‡å‡†å‚æ•°-standard-options\"\u003eæ ‡å‡†å‚æ•° Standard options\u003c/h2\u003e\n\u003ch3 id=\"-h\"\u003e\u003ccode\u003e-h\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eåŠŸèƒ½\næ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå­å‚æ•°\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eè°ƒç”¨å®ä¾‹\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eqemu-system-riscv32 -h\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"-version\"\u003e\u003ccode\u003e-version\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eåŠŸèƒ½\næ˜¾ç¤º qemu ç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º\u003c/p\u003e","title":"QEMU æ–‡æ¡£"},{"content":"åˆ›å»ºä»“åº“æ—¶æ²¡æœ‰åŠ å…¥ gitignore æ–‡ä»¶ï¼Œä¸Šä¼ äº†ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œåæ·»åŠ äº† gitignore æ–‡ä»¶å¦‚ä½•åŒæ­¥è¿œç¨‹ä¸æœ¬åœ°çš„æ–‡ä»¶ï¼ˆè‡ªåŠ¨åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ï¼‰ # æ³¨æ„æœ‰ä¸ªç‚¹â€œ.â€ å–æ¶ˆç‰ˆæœ¬æ§åˆ¶ git rm -r --cached . é‡æ–°æ·»åŠ  git add -A é‡æ–°æäº¤ git commit -m \u0026#34;update .gitignore\u0026#34; Git rm å’Œ rm \u0026ndash;cached åŒºåˆ« rm ï¼šå½“éœ€è¦åˆ é™¤æš‚å­˜åŒºæˆ–åˆ†æ”¯ä¸Šçš„æ–‡ä»¶ï¼ŒåŒæ—¶å·¥ä½œåŒºä¸éœ€è¦è¿™ä¸ªæ–‡ä»¶\nrm --cachedï¼šå½“éœ€è¦åˆ é™¤æš‚å­˜åŒºæˆ–åˆ†æ”¯ä¸Šçš„æ–‡ä»¶ï¼ŒåŒæ—¶å·¥ä½œåŒºéœ€è¦è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ä¸éœ€è¦è¢«ç‰ˆæœ¬æ§åˆ¶ã€‚å°±æ˜¯æœ¬åœ°éœ€è¦ä¿ç•™ï¼Œä½†æ˜¯è¿œç¨‹ä¸ä¿ç•™\næ¨é€ç©ºæ–‡ä»¶å¤¹åˆ°è¿œç¨‹ä»“åº“ åœ¨éœ€è¦æ¨é€çš„ç©ºæ–‡ä»¶ä¸‹åˆ›å»º\u0026quot;.gitkeep\u0026quot;æ–‡ä»¶ åœ¨\u0026quot;.gitignore\u0026quot;æ–‡ä»¶ä¸­ç¼–å†™è§„åˆ™ !.gitkeep\nå…‹éš†æŒ‡å®šåˆ†æ”¯ä»£ç  git clone -b master https://github.com/Dunky-Z/Dunky-Z.github.io.git masterå°±æ˜¯åˆ†æ”¯å\n","permalink":"https://lifeislife.cn/posts/git%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/","summary":"\u003ch2 id=\"åˆ›å»ºä»“åº“æ—¶æ²¡æœ‰åŠ å…¥-gitignore-æ–‡ä»¶ä¸Šä¼ äº†ä¸éœ€è¦çš„æ–‡ä»¶åæ·»åŠ äº†-gitignore-æ–‡ä»¶å¦‚ä½•åŒæ­¥è¿œç¨‹ä¸æœ¬åœ°çš„æ–‡ä»¶è‡ªåŠ¨åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶\"\u003eåˆ›å»ºä»“åº“æ—¶æ²¡æœ‰åŠ å…¥ gitignore æ–‡ä»¶ï¼Œä¸Šä¼ äº†ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œåæ·»åŠ äº† gitignore æ–‡ä»¶å¦‚ä½•åŒæ­¥è¿œç¨‹ä¸æœ¬åœ°çš„æ–‡ä»¶ï¼ˆè‡ªåŠ¨åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ï¼‰\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ³¨æ„æœ‰ä¸ªç‚¹â€œ.â€\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eå–æ¶ˆç‰ˆæœ¬æ§åˆ¶\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit rm -r --cached .\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eé‡æ–°æ·»åŠ \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit add -A\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eé‡æ–°æäº¤\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit commit -m \u003cspan class=\"s2\"\u003e\u0026#34;update .gitignore\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"git-rm-å’Œ-rm-cached-åŒºåˆ«\"\u003eGit rm å’Œ rm \u0026ndash;cached åŒºåˆ«\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003erm\u003c/code\u003e ï¼šå½“éœ€è¦åˆ é™¤æš‚å­˜åŒºæˆ–åˆ†æ”¯ä¸Šçš„æ–‡ä»¶ï¼ŒåŒæ—¶å·¥ä½œåŒºä¸éœ€è¦è¿™ä¸ªæ–‡ä»¶\u003c/p\u003e","title":"Git è¸©å‘è®°å½•"},{"content":"ç®€ä»‹ QEMU æ˜¯ä¸€æ¬¾å¼€æºçš„æ¨¡æ‹Ÿå™¨åŠè™šæ‹Ÿæœºç›‘ç®¡å™¨ (Virtual Machine Monitor, VMM)ã€‚QEMU ä¸»è¦æä¾›ä¸¤ç§åŠŸèƒ½ç»™ç”¨æˆ·ä½¿ç”¨ã€‚ä¸€æ˜¯ä½œä¸ºç”¨æˆ·æ€æ¨¡æ‹Ÿå™¨ï¼Œåˆ©ç”¨åŠ¨æ€ä»£ç ç¿»è¯‘æœºåˆ¶æ¥æ‰§è¡Œä¸åŒäºä¸»æœºæ¶æ„çš„ä»£ç ã€‚äºŒæ˜¯ä½œä¸ºè™šæ‹Ÿæœºç›‘ç®¡å™¨ï¼Œæ¨¡æ‹Ÿå…¨ç³»ç»Ÿï¼Œåˆ©ç”¨å…¶ä»– VMM(Xen, KVM, etc) æ¥ä½¿ç”¨ç¡¬ä»¶æä¾›çš„è™šæ‹ŸåŒ–æ”¯æŒï¼Œåˆ›å»ºæ¥è¿‘äºä¸»æœºæ€§èƒ½çš„è™šæ‹Ÿæœºã€‚\nå®‰è£… ä½¿ç”¨åŒ…ç®¡ç†å®‰è£… sudo apt-get install qemu ä½¿ç”¨æºç å®‰è£… wget wget https://download.qemu.org/qemu-6.1.0-rc3.tar.xz tar xvJf qemu-6.1.0-rc3.tar.xz cd qemu-6.1.0-rc3 å®‰è£…ç›¸å…³åº“ apt-getÂ install libglib2.0-dev apt-get install ninja-build apt install g++ apt install libpixman-1-dev apt install libsdl2-dev -y é…ç½® é€šè¿‡./configure --help çš„æŸ¥çœ‹ç¼–è¯‘æ—¶çš„é€‰é¡¹ï¼Œ--target-listé€‰é¡¹ä¸ºå¯é€‰çš„æ¨¡æ‹Ÿå™¨ï¼Œé»˜è®¤å…¨é€‰ã€‚ --target-list ä¸­çš„ xxx-soft å’Œ xxx-linux-user åˆ†åˆ«æŒ‡ç³»ç»Ÿæ¨¡æ‹Ÿå™¨å’Œåº”ç”¨ç¨‹åºæ¨¡æ‹Ÿå™¨ï¼Œç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶åå­—ä¸ºqemu-system-xxxå’Œ qemu-xxx æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼š\n./configure --prefix=XXX --enable-debug --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu --enable-kvm # --prefix é€‰é¡¹è®¾ç½®qemuçš„å®‰è£…ä½ç½®ç»å¯¹è·¯å¾„ï¼Œä¹‹åè‹¥è¦å¸è½½åˆ é™¤qemuåªè¦åˆ é™¤è¯¥æ–‡ä»¶å¤¹å³å¯ï¼Œ--enable-kvmå¼€å¯kvm # configå®Œï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„qemuå®‰è£…æ–‡ä»¶å¤¹ä¸‹é¢æ‰¾åˆ°config-host.makæ–‡ä»¶ï¼Œ # è¯¥æ–‡ä»¶è®°å½•ç€qemué…ç½®çš„é€‰é¡¹ï¼Œå¯ä»¥å’Œè‡ªå·±è®¾ç½®çš„è¿›è¡Œå¯¹æ¯”ï¼Œç¡®ä¿é…ç½®å’Œè‡ªå·±å·²çŸ¥ æ¥ç€è¿›è¡Œç¼–è¯‘\nmake -j8 ç›´æ¥makeä¼šå¾ˆæ…¢ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘æ—¶é»˜è®¤å®‰è£…è¯´æœ‰æ¨¡æ‹Ÿå™¨ï¼Œç¼–è¯‘äº†ä¸‰å››ä¸ªå°æ—¶ã€‚åŠ ä¸Š-j8å¯ä»¥è¿›è¡Œå¤šçº¿ç¨‹ç¼–è¯‘\nåˆ›å»ºä¸ä½¿ç”¨ åˆ›å»ºè™šæ‹Ÿé•œåƒ ä½¿ç”¨è™šæ‹Ÿé•œåƒæ¥æ¨¡æ‹Ÿè™šæ‹Ÿæœºçš„ç¡¬ç›˜ï¼Œåœ¨å¯åŠ¨è™šæ‹Ÿæœºä¹‹å‰éœ€è¦åˆ›å»ºä¸€ä¸ªé•œåƒæ–‡ä»¶\nroot@hanhan:/home/dominic/qemu/# qemu-img create -f qcow2 qmtest.img 10G Formatting \u0026#39;qmtest.img\u0026#39;, fmt=qcow2 size=10737418240 encryption=off cluster_size=65536 lazy_refcounts=off root@hanhan:/home/dominic/qemu/# ls qmtest.img -fé€‰é¡¹ç”¨äºæŒ‡å®šé•œåƒçš„æ ¼å¼ï¼Œqcow2æ ¼å¼æ˜¯ QEMU æœ€å¸¸ç”¨çš„é•œåƒæ ¼å¼ï¼Œé‡‡ç”¨å†™æ—¶å¤åˆ¶æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½ã€‚qmtest.imgæ˜¯é•œåƒæ–‡ä»¶çš„åå­—ï¼Œ10Gæ˜¯é•œåƒæ–‡ä»¶å¤§å°ã€‚\né•œåƒæ–‡ä»¶åˆ›å»ºå®Œæˆåï¼Œå¯ä½¿ç”¨qemu-system-x86æ¥å¯åŠ¨x86æ¶æ„çš„è™šæ‹Ÿæœºï¼š\nqemu-system-x86_64 qmtest.img qmtest.img ä¸­è¿˜æœªå®‰è£…æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥ä¼šæç¤ºâ€œNo bootable deviceâ€çš„é”™è¯¯ã€‚\nå‡†å¤‡æ“ä½œç³»ç»Ÿé•œåƒ ä¸‹è½½éœ€è¦çš„ Linux å‘è¡Œç‰ˆé•œåƒæ–‡ä»¶ï¼Œhttps://launchpad.net/ubuntu/+cdmirrorsï¼Œæ‰¾åˆ°æƒ³è¦ä¸‹è½½çš„é•œåƒï¼Œè¿™é‡Œä»¥äº¤é€šå¤§å­¦çš„é•œåƒä¸ºä¾‹ å³å‡»é“¾æ¥å¤åˆ¶åœ°å€ï¼šhttps://ftp.sjtu.edu.cn/ubuntu-cd/20.10/ubuntu-20.10-live-server-amd64.iso\nroot@hanhan:/home/dominic/qemu/# wget https://ftp.sjtu.edu.cn/ubuntu-cd/20.10/ubuntu-20.10-live-server-amd64.iso æ£€æŸ¥ KVM æ˜¯å¦å¯ç”¨ QEMU ä½¿ç”¨ KVM æ¥æå‡è™šæ‹Ÿæœºæ€§èƒ½ï¼Œå¦‚æœä¸å¯ç”¨ KVM ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ã€‚è¦ä½¿ç”¨ KVMï¼Œé¦–å…ˆè¦æ£€æŸ¥ç¡¬ä»¶æ˜¯å¦æœ‰è™šæ‹ŸåŒ–æ”¯æŒï¼š\nroot@hanhan:/home/dominic/qemu/# grep -E \u0026#39;vmx|svm\u0026#39; /proc/cpuinfo å¦‚æœæœ‰è¾“å‡ºåˆ™è¡¨ç¤ºç¡¬ä»¶æœ‰è™šæ‹ŸåŒ–æ”¯æŒã€‚å…¶æ¬¡è¦æ£€æŸ¥ kvm æ¨¡å—æ˜¯å¦å·²ç»åŠ è½½ï¼š\nroot@hanhan:/home/dominic/qemu/# lsmod | grep kvm kvm_intel 142999 0 kvm 444314 1 kvm_intel å¦‚æœkvm_intel/kvm_amdã€kvmæ¨¡å—è¢«æ˜¾ç¤ºå‡ºæ¥ï¼Œåˆ™kvmæ¨¡å—å·²ç»åŠ è½½ã€‚æœ€åè¦ç¡®ä¿ qemu åœ¨ç¼–è¯‘çš„æ—¶å€™ä½¿èƒ½äº†KVMï¼Œå³åœ¨æ‰§è¡Œconfigureè„šæœ¬çš„æ—¶å€™åŠ å…¥äº†â€“enable-kvmé€‰é¡¹ã€‚\nå¯åŠ¨è™šæ‹Ÿæœºå®‰è£…æ“ä½œç³»ç»Ÿ root@hanhan:/home/dominic/qemu/# qemu-system-x86_64 -m 2048 -enable-kvm qmtest.img -cdrom ./Fedora-Live-Desktop-x86_64-20-1.iso -mæŒ‡å®šè™šæ‹Ÿæœºå†…å­˜å¤§å°ï¼Œé»˜è®¤å•ä½æ˜¯ MBï¼Œ-enable-kvmä½¿ç”¨ KVM è¿›è¡ŒåŠ é€Ÿï¼Œ-cdromæ·»åŠ  fedora çš„å®‰è£…é•œåƒã€‚å¯åœ¨å¼¹å‡ºçš„çª—å£ä¸­æ“ä½œè™šæ‹Ÿæœºï¼Œå®‰è£…æ“ä½œç³»ç»Ÿï¼Œå®‰è£…å®Œæˆåé‡èµ·è™šæ‹Ÿæœºä¾¿ä¼šä»ç¡¬ç›˜ (qmtest.img) å¯åŠ¨ã€‚ä¹‹åå†å¯åŠ¨è™šæ‹Ÿæœºåªéœ€è¦æ‰§è¡Œï¼š\nroot@hanhan:/home/dominic/qemu/# qemu-system-x86_64 -m 2048 -enable-kvm qmtest.img é€€å‡º qemu åœ¨è¿è¡Œ qemu åï¼Œå…³é—­å›¾å½¢ç•Œé¢ä½†æ˜¯ç»ˆç«¯ä»ç„¶æ˜¯å¤„äº qemu ç¯å¢ƒä¸­ï¼Œå¯ä»¥ç›´æ¥å…³é—­ç»ˆç«¯é€€å‡ºã€‚å¦‚æœä¸æƒ³å…³é—­ç»ˆç«¯ï¼Œå¯ä»¥å¦å¤–æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ kill è¿›ç¨‹\nkillall qemu-system-riscv32 å¦‚æœè®°ä¸æ¸…å…¨ç§°ï¼Œå¯ä»¥è¾“å…¥å¤§æ¦‚åç§°å›è½¦åä¼šåˆ—å‡ºç›¸å…³çš„è¿›ç¨‹\n","permalink":"https://lifeislife.cn/posts/qemu%E5%88%9D%E8%AF%86/","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eQEMU æ˜¯ä¸€æ¬¾å¼€æºçš„æ¨¡æ‹Ÿå™¨åŠè™šæ‹Ÿæœºç›‘ç®¡å™¨ (Virtual Machine Monitor, VMM)ã€‚QEMU ä¸»è¦æä¾›ä¸¤ç§åŠŸèƒ½ç»™ç”¨æˆ·ä½¿ç”¨ã€‚ä¸€æ˜¯ä½œä¸ºç”¨æˆ·æ€æ¨¡æ‹Ÿå™¨ï¼Œåˆ©ç”¨åŠ¨æ€ä»£ç ç¿»è¯‘æœºåˆ¶æ¥æ‰§è¡Œä¸åŒäºä¸»æœºæ¶æ„çš„ä»£ç ã€‚äºŒæ˜¯ä½œä¸ºè™šæ‹Ÿæœºç›‘ç®¡å™¨ï¼Œæ¨¡æ‹Ÿå…¨ç³»ç»Ÿï¼Œåˆ©ç”¨å…¶ä»– VMM(Xen, KVM, etc) æ¥ä½¿ç”¨ç¡¬ä»¶æä¾›çš„è™šæ‹ŸåŒ–æ”¯æŒï¼Œåˆ›å»ºæ¥è¿‘äºä¸»æœºæ€§èƒ½çš„è™šæ‹Ÿæœºã€‚\u003c/p\u003e","title":"QEMU åˆè¯†"},{"content":" ä»»ä½•ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œéƒ½æ˜¯ç³»ç»Ÿä¸­è½¯ç¡¬ä»¶åä½œçš„ç»“æœï¼Œæ²¡æœ‰ç¡¬ä»¶çš„è½¯ä»¶æ˜¯ç©ºä¸­æ¥¼é˜ï¼Œè€Œæ²¡æœ‰è½¯ä»¶çš„ç¡¬ä»¶åˆ™åªæ˜¯ä¸€å †åºŸé“ã€‚\u0026ndash;å¤©æœ— - æ˜Ÿç©º\nç¡¬ä»¶æ˜¯åº•å±‚åŸºç¡€ï¼Œæ‰€æœ‰è½¯ä»¶ä»£ç çš„è¿è¡Œå¹³å°ï¼Œç›¸å¯¹å›ºå®šä¸æ˜“æ”¹å˜ï¼Œè€Œè½¯ä»¶æ˜¯å…·ä½“çš„åº”ç”¨ï¼Œå®ƒçµæ´»å¤šå˜ï¼Œå¯ä»¥åº”å¯¹ç”¨æˆ·çš„ä¸åŒéœ€æ±‚ã€‚\nä¸ºå°½å¯èƒ½å¿«é€Ÿåœ°å®Œæˆè®¾è®¡ï¼Œåº”ç”¨è½¯ä»¶å·¥ç¨‹å¸ˆä¸æƒ³ä¹Ÿä¸å¿…å…³å¿ƒç¡¬ä»¶ï¼Œè€Œç¡¬ä»¶å·¥ç¨‹å¸ˆä¹Ÿéš¾æœ‰è¶³å¤Ÿçš„é—²æš‡å’Œèƒ½åŠ›æ¥é¡¾å¿Œè½¯ä»¶ã€‚è­¬å¦‚ï¼Œåº”ç”¨è½¯ä»¶å·¥ç¨‹å¸ˆåœ¨è°ƒç”¨å¥—æ¥å­—å‘é€å’Œæ¥æ”¶æ•°æ®åŒ…çš„æ—¶å€™ï¼Œä¸å¿…å…³å¿ƒç½‘å¡ä¸Šçš„å¯„å­˜å™¨ã€å­˜å‚¨ç©ºé—´ã€I/O ç«¯å£ã€ç‰‡é€‰ä»¥åŠå…¶ä»–ä»»ä½•ç¡¬ä»¶å±‚é¢çš„æ“ä½œè°ƒåº¦ï¼›åœ¨ä½¿ç”¨printf()å‡½æ•°è¾“å‡ºä¿¡æ¯çš„æ—¶å€™ï¼Œä»–ä¸ç”¨çŸ¥é“åº•å±‚ç©¶ç«Ÿæ˜¯æ€æ ·æŠŠç›¸åº”çš„ä¿¡æ¯è¾“å‡ºåˆ°å±å¹•æˆ–è€…ä¸²å£çš„å…·ä½“ç¡¬ä»¶è¿‡ç¨‹ï¼Œéœ€è¦çš„åªæ˜¯å‡ºç°ç›¸åº”çš„æ˜¾ç¤ºæ•ˆæœã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨è½¯ä»¶å·¥ç¨‹å¸ˆéœ€è¦çœ‹åˆ°ä¸€ä¸ªæ²¡æœ‰ç¡¬ä»¶çš„çº¯ç²¹çš„è½¯ä»¶ä¸–ç•Œï¼Œç¡¬ä»¶å¿…é¡»è¢«é€æ˜åœ°å‘ˆç°ç»™ä»–ä»¬ã€‚è°æ¥å®ç°ç¡¬ä»¶å¯¹åº”ç”¨è½¯ä»¶å·¥ç¨‹å¸ˆçš„éšå½¢ï¼Ÿè¿™ä¸ªè‰°å·¨çš„ä»»åŠ¡å°±è½åœ¨äº†é©±åŠ¨å·¥ç¨‹å¸ˆçš„å¤´ä¸Šã€‚\nå¯¹è®¾å¤‡é©±åŠ¨æœ€é€šä¿—çš„è§£é‡Šå°±æ˜¯â€œé©±ä½¿ç¡¬ä»¶è®¾å¤‡è¡ŒåŠ¨â€ ã€‚è®¾å¤‡é©±åŠ¨ä¸åº•å±‚ç¡¬ä»¶ç›´æ¥æ‰“äº¤é“ï¼ŒæŒ‰ç…§ç¡¬ä»¶è®¾å¤‡çš„å…·ä½“å·¥ä½œæ–¹å¼è¯»å†™è®¾å¤‡å¯„å­˜å™¨ï¼Œå®Œæˆè®¾å¤‡çš„è½®è¯¢ã€ä¸­æ–­å¤„ç†ã€DMA é€šä¿¡ï¼Œè¿›è¡Œç‰©ç†å†…å­˜å‘è™šæ‹Ÿå†…å­˜çš„æ˜ å°„ï¼Œæœ€ç»ˆä½¿é€šä¿¡è®¾å¤‡èƒ½å¤Ÿæ”¶å‘æ•°æ®ï¼Œä½¿æ˜¾ç¤ºè®¾å¤‡èƒ½å¤Ÿæ˜¾ç¤ºæ–‡å­—å’Œç”»é¢ï¼Œä½¿å­˜å‚¨è®¾å¤‡èƒ½å¤Ÿè®°å½•æ–‡ä»¶å’Œæ•°æ®ã€‚\n","permalink":"https://lifeislife.cn/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%A9%B1%E5%8A%A8%E9%A9%B1%E5%8A%A8%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8F%88%E6%98%AF%E4%BB%80%E4%B9%88/","summary":"\u003cblockquote\u003e\n\u003cp\u003eä»»ä½•ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œéƒ½æ˜¯ç³»ç»Ÿä¸­è½¯ç¡¬ä»¶åä½œçš„ç»“æœï¼Œæ²¡æœ‰ç¡¬ä»¶çš„è½¯ä»¶æ˜¯ç©ºä¸­æ¥¼é˜ï¼Œè€Œæ²¡æœ‰è½¯ä»¶çš„ç¡¬ä»¶åˆ™åªæ˜¯ä¸€å †åºŸé“ã€‚\u0026ndash;\u003ca href=\"https://blog.csdn.net/yunfenglw/article/details/39337343\"\u003eå¤©æœ— - æ˜Ÿç©º\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eç¡¬ä»¶æ˜¯åº•å±‚åŸºç¡€ï¼Œæ‰€æœ‰è½¯ä»¶ä»£ç çš„è¿è¡Œå¹³å°ï¼Œç›¸å¯¹å›ºå®šä¸æ˜“æ”¹å˜ï¼Œè€Œè½¯ä»¶æ˜¯å…·ä½“çš„åº”ç”¨ï¼Œå®ƒçµæ´»å¤šå˜ï¼Œå¯ä»¥åº”å¯¹ç”¨æˆ·çš„ä¸åŒéœ€æ±‚ã€‚\u003c/p\u003e","title":"ä»€ä¹ˆæ˜¯é©±åŠ¨ï¼Œé©±åŠ¨çš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ"},{"content":"åˆšå¼€å§‹æ­å»ºçš„æ—¶å€™å¹¶æ²¡æœ‰ä¸ºä»“åº“æ·»åŠ  Readme æ–‡ä»¶ï¼Œä½†æ˜¯åæœŸæ·»åŠ ä¹Ÿä¸èƒ½ç›´æ¥åœ¨ä»“åº“é‡Œç›´æ¥æ·»åŠ ï¼Œå› ä¸ºæ¯æ¬¡éƒ¨ç½²éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚ æ·»åŠ æ–¹æ³•ï¼š\nåœ¨åšå®¢æ ¹ç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹æ–°å»ºREADME.mdæ–‡ä»¶ åœ¨æ ¹ç›®å½•çš„_config.ymlæ–‡ä»¶ä¸­æœç´¢skip_renderï¼Œå¹¶åšå¦‚ä¸‹æ›´æ”¹ skip_render: README.md å› ä¸ºåœ¨æ¯æ¬¡hexo gæ—¶å€™ï¼ŒREADME æ–‡ä»¶éƒ½ä¼šè¢«è‡ªåŠ¨æ¸²æŸ“ä¸º HTML æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰æ¸²æŸ“å™¨è·³è¿‡è¿™ä¸ªæ–‡ä»¶ä¸è¦æ¸²æŸ“å®ƒã€‚\n","permalink":"https://lifeislife.cn/posts/hexo%E6%90%AD%E5%BB%BAgithub%E5%8D%9A%E5%AE%A2%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0readme%E6%96%87%E4%BB%B6/","summary":"\u003cp\u003eåˆšå¼€å§‹æ­å»ºçš„æ—¶å€™å¹¶æ²¡æœ‰ä¸ºä»“åº“æ·»åŠ  Readme æ–‡ä»¶ï¼Œä½†æ˜¯åæœŸæ·»åŠ ä¹Ÿä¸èƒ½ç›´æ¥åœ¨ä»“åº“é‡Œç›´æ¥æ·»åŠ ï¼Œå› ä¸ºæ¯æ¬¡éƒ¨ç½²éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚\næ·»åŠ æ–¹æ³•ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨åšå®¢æ ¹ç›®å½•çš„\u003ccode\u003esource\u003c/code\u003eæ–‡ä»¶å¤¹ä¸‹æ–°å»º\u003ccode\u003eREADME.md\u003c/code\u003eæ–‡ä»¶\u003c/li\u003e\n\u003cli\u003eåœ¨æ ¹ç›®å½•çš„\u003ccode\u003e_config.yml\u003c/code\u003eæ–‡ä»¶ä¸­æœç´¢\u003ccode\u003eskip_render\u003c/code\u003eï¼Œå¹¶åšå¦‚ä¸‹æ›´æ”¹\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yml\" data-lang=\"yml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003eskip_render\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"l\"\u003eREADME.md\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå› ä¸ºåœ¨æ¯æ¬¡\u003ccode\u003ehexo g\u003c/code\u003eæ—¶å€™ï¼ŒREADME æ–‡ä»¶éƒ½ä¼šè¢«è‡ªåŠ¨æ¸²æŸ“ä¸º HTML æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰æ¸²æŸ“å™¨è·³è¿‡è¿™ä¸ªæ–‡ä»¶ä¸è¦æ¸²æŸ“å®ƒã€‚\u003c/p\u003e","title":"Hexo æ­å»º GitHub åšå®¢å¦‚ä½•æ·»åŠ  README æ–‡ä»¶"},{"content":"QEMU å­¦ä¹ è®°å½• ä»€ä¹ˆæ˜¯ KVMï¼Ÿ åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœº Kernel-based Virtual Machineï¼ˆKVMï¼‰æ˜¯ä¸€ç§å†…å»ºäº Linux ä¸­çš„å¼€æºè™šæ‹ŸåŒ–æŠ€æœ¯ã€‚å…·ä½“è€Œè¨€ï¼ŒKVM å¯å¸®åŠ©ç”¨æˆ·å°† Linux è½¬å˜ä¸ºè™šæ‹Ÿæœºç›‘æ§ç¨‹åºï¼Œä½¿ä¸»æœºè®¡ç®—æœºèƒ½å¤Ÿè¿è¡Œå¤šä¸ªéš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒï¼Œå³è™šæ‹Ÿå®¢æˆ·æœºæˆ–è™šæ‹Ÿæœºï¼ˆVMï¼‰ã€‚\nä»€ä¹ˆæ˜¯ QEMUï¼Ÿ Qemu æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯ä»¥å•ç‹¬è¿è¡Œçš„è½¯ä»¶ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿä¸åŒæ¶æ„çš„æœºå™¨ï¼Œéå¸¸çµæ´»å’Œå¯ç§»æ¤ã€‚å®ƒä¸»è¦é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„\u0026rsquo;é‡ç¼–è¯‘å™¨\u0026rsquo;å°†ä¸ºç‰¹å®šå¤„ç†å™¨ç¼–å†™äºŒè¿›åˆ¶ä»£ç è½¬æ¢ä¸ºå¦ä¸€ç§ã€‚\nKVM ä¸ QEMU çš„å…³ç³» KVM æ˜¯ Linux çš„ä¸€ä¸ªæ¨¡å—ã€‚å¯ä»¥ç”¨modprobeå»åŠ è½½ KVM æ¨¡å—ã€‚åŠ è½½äº†æ¨¡å—åï¼Œæ‰èƒ½è¿›ä¸€æ­¥é€šè¿‡å…¶ä»–å·¥å…·åˆ›å»ºè™šæ‹Ÿæœºã€‚ä½†ä»…æœ‰ KVM æ¨¡å—æ˜¯ è¿œè¿œä¸å¤Ÿçš„ï¼Œå› ä¸ºç”¨æˆ·æ— æ³•ç›´æ¥æ§åˆ¶å†…æ ¸æ¨¡å—å»ä½œäº‹æƒ…ï¼šè¿˜å¿…é¡»æœ‰ä¸€ä¸ªç”¨æˆ·ç©ºé—´çš„å·¥å…·æ‰è¡Œã€‚è¿™ä¸ªç”¨æˆ·ç©ºé—´çš„å·¥å…·ï¼Œå¼€å‘è€…é€‰æ‹©äº†å·²ç»æˆå‹çš„å¼€æºè™šæ‹ŸåŒ–è½¯ä»¶ QEMUã€‚KVM ä½¿ç”¨äº† QEMU çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ç¨åŠ æ”¹é€ ï¼Œå°±æˆäº†å¯æ§åˆ¶ KVM çš„ç”¨æˆ·ç©ºé—´å·¥å…·äº†ã€‚æ‰€ä»¥ä½ ä¼šçœ‹åˆ°ï¼Œå®˜æ–¹æä¾›çš„ KVM ä¸‹è½½æœ‰ä¸¤ å¤§éƒ¨åˆ†ä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ KVM æ¨¡å—ã€QEMU å·¥å…·ä»¥åŠäºŒè€…çš„åˆé›†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥åªå‡çº§ KVM æ¨¡å—ï¼Œä¹Ÿå¯ä»¥åªå‡çº§ QEMU å·¥å…·ã€‚\nQEMU ç”¨æˆ·æ¨¡å¼ä¸ç³»ç»Ÿæ¨¡å¼ QEMU å±äºåº”ç”¨å±‚çš„ä»¿çœŸç¨‹åºï¼Œå®ƒæ”¯æŒä¸¤ç§æ“ä½œæ¨¡å¼ï¼šç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿå’Œç³»ç»Ÿæ¨¡å¼æ¨¡æ‹Ÿã€‚\nç”¨æˆ·æ¨¡å¼ä»¿çœŸ åˆ©ç”¨åŠ¨æ€ä»£ç ç¿»è¯‘æœºåˆ¶ï¼Œå¯ä»¥åœ¨å½“å‰ CPU ä¸Šæ‰§è¡Œè¢«ç¼–è¯‘ä¸ºæ”¯æŒå…¶ä»– CPU çš„ç¨‹åºï¼Œå¦‚å¯ä»¥åœ¨ x86 æœºå™¨ä¸Šæ‰§è¡Œä¸€ä¸ª ARM äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºã€‚ï¼ˆæ‰§è¡Œä¸»æœº CPU æŒ‡ä»¤çš„åŠ¨æ€ç¿»è¯‘å¹¶ç›¸åº”åœ°è½¬æ¢ Linux ç³»ç»Ÿè°ƒç”¨ï¼‰ã€‚ ç³»ç»Ÿæ¨¡å¼ä»¿çœŸ åˆ©ç”¨å…¶å®ƒ VMM(Xen, KVM) æ¥ä½¿ç”¨ç¡¬ä»¶æä¾›çš„è™šæ‹ŸåŒ–æ”¯æŒï¼Œåˆ›å»ºæ¥è¿‘äºä¸»æœºæ€§èƒ½çš„å…¨åŠŸèƒ½è™šæ‹Ÿæœºï¼ŒåŒ…æ‹¬å¤„ç†å™¨å’Œé…å¥—çš„å¤–å›´è®¾å¤‡ï¼ˆç£ç›˜ï¼Œä»¥å¤ªç½‘ç­‰ï¼‰ã€‚ ç”¨æˆ·æ¨¡å¼ æ”¯æŒçš„ CPUï¼šx86 (32 and 64 bit), PowerPC (32 and 64 bit), ARM, MIPS (32 bit only), Sparc (32 and 64 bit), Alpha, ColdFire(m68k), CRISv32 å’Œ MicroBlaze ä¸‹åˆ—æ“ä½œç³»ç»Ÿæ”¯æŒ QEMU çš„ç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿï¼š\nLinux (referred as qemu-linux-user) BSD (referred as qemu-bsd-user) è°ƒç”¨ï¼ˆå…·ä½“å‚æ•°å«ä¹‰ï¼‰\nqemu-i386 [-h] [-d] [-L path] [-s size] [-cpu model] [-g port] [-B offset] [-R size] program [arguments...] ç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿç¯å¢ƒä¸‹è¿è¡Œé€Ÿåº¦è¦æ¯”ç³»ç»Ÿæ¨¡å¼æ¨¡æ‹Ÿç¯å¢ƒä¸‹å¿«ï¼Œä½†å¹¶ä¸æ˜¯å®Œç¾æ¨¡æ‹Ÿï¼Œæ¯”å¦‚ç¨‹åºè¯»å–/proc/cpuinfoå†…å®¹æ—¶ï¼Œç”±ä¸»æœºå†…æ ¸è¿”å›ï¼Œå› æ­¤è¿”å›çš„ä¿¡æ¯æ˜¯æè¿°ä¸»æœº CPU çš„ï¼Œè€Œä¸æ˜¯æ¨¡æ‹Ÿçš„ CPUã€‚\nç³»ç»Ÿæ¨¡å¼ é¦–å…ˆåˆ›å»ºè™šæ‹Ÿé•œåƒï¼Œæ¨¡æ‹Ÿç¡¬ç›˜ç©ºé—´ï¼š\nroot@hanhan:/home/dominic/qemu/# qemu-img create -f qcow2 qmtest.img 10G Formatting \u0026#39;qmtest.img\u0026#39;, fmt=qcow2 size=10737418240 encryption=off cluster_size=65536 lazy_refcounts=off root@hanhan:/home/dominic/qemu/# ls qmtest.img -fé€‰é¡¹ç”¨äºæŒ‡å®šé•œåƒçš„æ ¼å¼ï¼Œqcow2æ ¼å¼æ˜¯ QEMU æœ€å¸¸ç”¨çš„é•œåƒæ ¼å¼ï¼Œé‡‡ç”¨å†™æ—¶å¤åˆ¶æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½ã€‚qmtest.imgæ˜¯é•œåƒæ–‡ä»¶çš„åå­—ï¼Œ10Gæ˜¯é•œåƒæ–‡ä»¶å¤§å°ã€‚\né•œåƒæ–‡ä»¶åˆ›å»ºå®Œæˆåï¼Œå¯ä½¿ç”¨qemu-system-x86æ¥å¯åŠ¨x86æ¶æ„çš„è™šæ‹Ÿæœºï¼š\nqemu-system-x86_64 qmtest.img qmtest.img ä¸­è¿˜æœªå®‰è£…æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥ä¼šæç¤ºâ€œNo bootable deviceâ€çš„é”™è¯¯ã€‚\nå…¶æ¬¡ï¼Œå‡†å¤‡æ“ä½œç³»ç»Ÿé•œåƒ ä¸‹è½½éœ€è¦çš„ Linux å‘è¡Œç‰ˆé•œåƒæ–‡ä»¶ï¼Œhttps://launchpad.net/ubuntu/+cdmirrorsï¼Œæ‰¾åˆ°æƒ³è¦ä¸‹è½½çš„é•œåƒï¼Œè¿™é‡Œä»¥äº¤é€šå¤§å­¦çš„é•œåƒä¸ºä¾‹ å³å‡»é“¾æ¥å¤åˆ¶åœ°å€ï¼šhttps://ftp.sjtu.edu.cn/ubuntu-cd/20.10/ubuntu-20.10-live-server-amd64.iso\nroot@hanhan:/home/dominic/qemu/# wget https://ftp.sjtu.edu.cn/ubuntu-cd/20.10/ubuntu-20.10-live-server-amd64.iso æœ€åï¼Œå¯åŠ¨è™šæ‹Ÿæœºå®‰è£…æ“ä½œç³»ç»Ÿ\nroot@hanhan:/home/dominic/qemu/# qemu-system-x86_64 -m 2048 -enable-kvm qmtest.img -cdrom ./Fedora-Live-Desktop-x86_64-20-1.iso -mæŒ‡å®šè™šæ‹Ÿæœºå†…å­˜å¤§å°ï¼Œé»˜è®¤å•ä½æ˜¯ MBï¼Œ-enable-kvmä½¿ç”¨ KVM è¿›è¡ŒåŠ é€Ÿï¼Œ-cdromæ·»åŠ  fedora çš„å®‰è£…é•œåƒã€‚\nè¯¥æ¨¡å¼ä¸‹ï¼Œè¦æ¯”ç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿæ…¢å¾—å¤šï¼Œå› ä¸ºæ¨¡æ‹Ÿäº†ç›®æ ‡å†…æ ¸ï¼Œä»¥åŠè®¾å¤‡è¾“å…¥/è¾“å‡ºã€ä¸­æ–­ç­‰ã€‚\nQEMU å·¥ä½œåŸç† \u003c!DOCTYPE html\u003e Responsive Image å•çº¯ä½¿ç”¨ qemuï¼Œé‡‡ç”¨çš„æ˜¯å®Œå…¨è™šæ‹ŸåŒ–çš„æ¨¡å¼ã€‚qemu å‘ Guest OS æ¨¡æ‹Ÿ CPUï¼Œä¹Ÿæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼ŒGuestOS è®¤ä¸ºè‡ªå·±å’Œç¡¬ä»¶ç›´æ¥æ‰“äº¤é“ï¼Œå…¶å®æ˜¯åŒ qemu æ¨¡æ‹Ÿå‡ºæ¥çš„ç¡¬ä»¶æ‰“äº¤é“ï¼Œqemu ä¼šå°†è¿™äº›æŒ‡ä»¤è½¬è¯‘ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚ç”±äºæ‰€æœ‰çš„æŒ‡ä»¤éƒ½è¦ä» qemu é‡Œé¢è¿‡ä¸€æ‰‹ï¼Œå› è€Œæ€§èƒ½å°±ä¼šæ¯”è¾ƒå·®ã€‚\nå®Œå…¨è™šæ‹ŸåŒ–æ˜¯éå¸¸æ…¢çš„ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ Intel-VTï¼ŒAMD-Vï¼Œæ‰€ä»¥éœ€è¦ CPU ç¡¬ä»¶å¼€å¯è¿™ä¸ªæ ‡å¿—ä½ï¼Œä¸€èˆ¬åœ¨ BIOS é‡Œé¢è®¾ç½®ã€‚å½“ç¡®è®¤å¼€å§‹äº†æ ‡å¿—ä½ä¹‹åï¼Œé€šè¿‡KVMï¼ŒGuestOS çš„ CPU æŒ‡ä»¤ä¸ç”¨ç»è¿‡ Qemu è½¬è¯‘ï¼Œç›´æ¥è¿è¡Œï¼Œå¤§å¤§æé«˜äº†é€Ÿåº¦ã€‚æ‰€ä»¥ï¼ŒKVM åœ¨å†…æ ¸é‡Œé¢éœ€è¦æœ‰ä¸€ä¸ªæ¨¡å—ï¼Œæ¥è®¾ç½®å½“å‰ CPU æ˜¯ Guest OS åœ¨ç”¨ï¼Œè¿˜æ˜¯ Host OS åœ¨ç”¨ã€‚\nå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å†…æ ¸æ¨¡å—ä¸­æ˜¯å¦æœ‰ KVM\nlsmod | grep kvm KVM å†…æ ¸æ¨¡å—é€šè¿‡ /dev/kvm æš´éœ²æ¥å£ï¼Œç”¨æˆ·æ€ç¨‹åºå¯ä»¥é€šè¿‡ ioctlæ¥è®¿é—®è¿™ä¸ªæ¥å£ã€‚Qemu å°† KVM æ•´åˆè¿›æ¥ï¼Œå°†æœ‰å…³ CPU æŒ‡ä»¤çš„éƒ¨åˆ†äº¤ç”±å†…æ ¸æ¨¡å—æ¥åšï¼Œå°±æ˜¯ qemu-kvm (qemu-system-XXX)ã€‚\nqemu å’Œ kvm æ•´åˆä¹‹åï¼ŒCPU çš„æ€§èƒ½é—®é¢˜è§£å†³äº†ã€‚å¦å¤– Qemu è¿˜ä¼šæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼Œå¦‚ç½‘ç»œå’Œç¡¬ç›˜ã€‚åŒæ ·ï¼Œå…¨è™šæ‹ŸåŒ–çš„æ–¹å¼ä¹Ÿä¼šå½±å“è¿™äº›è®¾å¤‡çš„æ€§èƒ½ã€‚\näºæ˜¯ï¼Œqemu é‡‡å–åŠè™šæ‹ŸåŒ–çš„æ–¹å¼ï¼Œè®© Guest OS åŠ è½½ç‰¹æ®Šçš„é©±åŠ¨æ¥åšè¿™ä»¶äº‹æƒ…ã€‚\nä¾‹å¦‚ï¼Œç½‘ç»œéœ€è¦åŠ è½½ virtio_netï¼Œå­˜å‚¨éœ€è¦åŠ è½½ virtio_blkï¼ŒGuest éœ€è¦å®‰è£…è¿™äº›åŠè™šæ‹ŸåŒ–é©±åŠ¨ï¼ŒGuestOS çŸ¥é“è‡ªå·±æ˜¯è™šæ‹Ÿæœºï¼Œæ‰€ä»¥æ•°æ®ä¼šç›´æ¥å‘é€ç»™åŠè™šæ‹ŸåŒ–è®¾å¤‡ï¼Œç»è¿‡ç‰¹æ®Šå¤„ç†ï¼ˆä¾‹å¦‚æ’é˜Ÿã€ç¼“å­˜ã€æ‰¹é‡å¤„ç†ç­‰æ€§èƒ½ä¼˜åŒ–æ–¹å¼ï¼‰ï¼Œæœ€ç»ˆå‘é€ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†æ€§èƒ½ã€‚\nQ : ç³»ç»Ÿæ¨¡å¼å’Œç”¨æˆ·æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ ç³»ç»Ÿæ¨¡å¼ æ˜¯ qemu è™šæ‹Ÿå‡ºä¸€å¥—å®Œæ•´çš„ç¡¬ä»¶ç¯å¢ƒï¼ŒåŒ…å« CPUï¼Œå†…å­˜ï¼Œç½‘å¡ï¼Œç¡¬ç›˜ï¼Œå¯¹äºè™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ OS çœ‹åˆ°çš„å’Œç¡¬ä»¶å’ŒçœŸå®çš„æ˜¯ä¸€æ ·çš„ã€‚ ç”¨æˆ·æ¨¡å¼æ˜¯ç›´æ¥å°†å¯æ‰§è¡Œçš„æ–‡ä»¶è¿›è¡ŒæŒ‡ä»¤ç¿»è¯‘ï¼Œåªè™šæ‹Ÿå‡º CPUã€‚ å‡è®¾æœ‰ KVMï¼šhost æ˜¯ x86ï¼ŒQEMU è™šæ‹Ÿå‡º x86 çš„ç³»ç»Ÿæ¨¡å¼ è¿è¡Œ Windows ç³»ç»Ÿã€‚QEMU ä¼šå°† Windows æŒ‡ä»¤ç›´æ¥äº¤ç»™ host CPU ç›´æ¥è¿è¡Œï¼ˆè¿™ä¸ªåŠŸèƒ½æ˜¯ç”± KVM å®ç°çš„ï¼Œç›¸å½“äºç›´æ¥è°ƒç”¨ host CPUï¼‰ï¼Œæ€§èƒ½æŸå¤±å°ã€‚å†…å­˜ï¼Œç¡¬ç›˜ï¼Œç½‘ç»œç­‰å¤–è®¾æ˜¯ç”± qemu è™šæ‹Ÿå‡ºæ¥çš„ã€‚ å‡è®¾æ—  KVMï¼šhost æ˜¯ x86ï¼ŒQEMU è™šæ‹Ÿå‡º x86 çš„ç³»ç»Ÿæ¨¡å¼è¿è¡Œ Windows ç³»ç»Ÿã€‚QEMU ä¼šå°† Windows æŒ‡ä»¤ç¿»è¯‘æˆä¸­é—´ç ï¼Œä¸­é—´ç å†è½¬æˆ host CPU æŒ‡ä»¤ï¼ˆè¿™ä¸ªåŠŸèƒ½æ˜¯ç”± qemu TCG å®ç°çš„ï¼‰ï¼Œæ€§èƒ½æŸå¤±å¤§ã€‚å†…å­˜ï¼Œç¡¬ç›˜ï¼Œç½‘æ´›ç­‰å¤–è®¾æ˜¯ç”± qemu è™šæ‹Ÿå‡ºæ¥çš„ã€‚ å‡è®¾æœ‰ KVMï¼šhost æ˜¯ x86ï¼ŒQEMU è™šæ‹Ÿå‡º RISC-V çš„ç³»ç»Ÿæ¨¡å¼ è¿è¡Œ Linux ç³»ç»Ÿã€‚QEMU ä¼šå°† Linux æŒ‡ä»¤ç¿»è¯‘æˆä¸­é—´ç ï¼Œä¸­é—´ç å†è½¬æˆ host CPU æŒ‡ä»¤ï¼ˆè¿™ä¸ªåŠŸèƒ½æ˜¯ç”± qemu TCG å®ç°çš„ï¼‰ï¼Œæ€§èƒ½æŸå¤±å¤§ã€‚å†…å­˜ï¼Œç¡¬ç›˜ï¼Œç½‘æ´›ç­‰å¤–è®¾æ˜¯ç”± qemu è™šæ‹Ÿå‡ºæ¥çš„ã€‚ KVM éœ€è¦åœ¨è™šæ‹Ÿæœºä¸å®¿ä¸»æœºæ¶æ„ç›¸åŒæ—¶æ‰ç”Ÿæ•ˆã€‚ æ­¤å¤–ï¼Œç”¨æˆ·æ¨¡å¼ä¸‹è°ƒç”¨ IO ç¡¬ä»¶ä¼šæŠ¥é”™ã€‚qemu ç³»ç»Ÿæ¨¡å¼ä¸‹ä¼šæ¨¡æ‹Ÿå‡ºæ‰€æœ‰è®¾å¤‡ï¼Œä½†æ˜¯æ¨¡æ‹Ÿçš„ IO è®¾å¤‡æ•ˆç‡ä½ï¼Œæ‰€ä»¥åæ¥æœ‰äº†åŠè™šæ‹ŸåŒ–ã€‚\n","permalink":"https://lifeislife.cn/posts/qemu%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","summary":"\u003ch1 id=\"qemu-å­¦ä¹ è®°å½•\"\u003eQEMU å­¦ä¹ è®°å½•\u003c/h1\u003e\n\u003ch2 id=\"ä»€ä¹ˆæ˜¯-kvm\"\u003eä»€ä¹ˆæ˜¯ KVMï¼Ÿ\u003c/h2\u003e\n\u003cp\u003eåŸºäºå†…æ ¸çš„è™šæ‹Ÿæœº \u003ccode\u003eKernel-based Virtual Machineï¼ˆKVMï¼‰\u003c/code\u003eæ˜¯ä¸€ç§å†…å»ºäº Linux ä¸­çš„å¼€æºè™šæ‹ŸåŒ–æŠ€æœ¯ã€‚å…·ä½“è€Œè¨€ï¼Œ\u003ccode\u003eKVM\u003c/code\u003e å¯å¸®åŠ©ç”¨æˆ·å°† Linux è½¬å˜ä¸ºè™šæ‹Ÿæœºç›‘æ§ç¨‹åºï¼Œä½¿ä¸»æœºè®¡ç®—æœºèƒ½å¤Ÿè¿è¡Œå¤šä¸ªéš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒï¼Œå³è™šæ‹Ÿå®¢æˆ·æœºæˆ–è™šæ‹Ÿæœºï¼ˆVMï¼‰ã€‚\u003c/p\u003e","title":"QEMU å­¦ä¹ è®°å½•"},{"content":"Unix æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ Authorï¼šCHRIS HOFFMAN è¯‘ï¼šWhat Is Unix, and Why Does It Matter?\nå¤§å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ã€‚é™¤äº†å¾®è½¯åŸºäº Windows NT çš„æ“ä½œç³»ç»Ÿä¹‹å¤–ï¼Œå‡ ä¹æ‰€æœ‰å…¶ä»–ç³»ç»Ÿçš„ç¥–å®—éƒ½æ˜¯ Unixã€‚\nLinuxã€Mac OS Xã€Androidã€iOSã€Chrome OSã€PlayStation 4 ä¸Šä½¿ç”¨çš„ Orbis æ“ä½œç³»ç»Ÿï¼Œæ— è®ºè·¯ç”±å™¨ä¸Šè¿è¡Œçš„æ˜¯ä»€ä¹ˆå›ºä»¶â€”â€”æ‰€æœ‰è¿™äº›æ“ä½œç³»ç»Ÿé€šå¸¸éƒ½è¢«ç§°ä¸ºâ€œç±» Unixâ€æ“ä½œç³»ç»Ÿã€‚\nUnix çš„è®¾è®¡å»¶ç»­è‡³ä»Š 19 ä¸–çºªä¸­åæœŸ Unix åœ¨è´å°”å®éªŒå®¤ä¸­è¢«å¼€å‘å‡ºæ¥ã€‚æœ€åˆç‰ˆçš„ Unix æœ‰è®¸å¤šé‡è¦çš„è®¾è®¡ç‰¹æ€§è‡³ä»Šä»ç„¶åœ¨ä½¿ç”¨ã€‚\nâ€œUnix å“²å­¦â€ä¹‹ä¸€å°±æ˜¯ï¼Œåˆ›å»ºå°å‹ã€æ¨¡å—åŒ–çš„ç¨‹åºï¼Œä¸€ä¸ªç¨‹åºåªåšä¸€ä»¶äº‹å¹¶æŠŠå®ƒåšå¥½ã€‚å¦‚æœä½ ç»å¸¸ä½¿ç”¨ Linux ç»ˆç«¯ï¼Œé‚£ä¹ˆä½ åº”è¯¥å¯¹æ­¤å¾ˆç†Ÿæ‚‰â€”â€”ç³»ç»Ÿæä¾›äº†è®¸å¤šå®ç”¨ç¨‹åºï¼Œè¿™äº›ç¨‹åºå¯ä»¥é€šè¿‡ç®¡é“å’Œå…¶ä»–åŠŸèƒ½ä»¥ä¸åŒæ–¹å¼ç»„åˆä»¥æ‰§è¡Œæ›´å¤æ‚çš„ä»»åŠ¡ã€‚ç”šè‡³å›¾å½¢ç¨‹åºä¹Ÿå¯èƒ½åœ¨åå°è°ƒç”¨æ›´ç®€å•çš„å®ç”¨ç¨‹åºæ¥å®Œæˆå¤æ‚çš„å·¥ä½œã€‚è¿™ä¹Ÿä½¿å¾—åˆ›å»º shell è„šæœ¬å˜å¾—å®¹æ˜“ï¼Œå°†ç®€å•çš„å·¥å…·ä¸²åœ¨ä¸€èµ·æ¥å®Œæˆå¤æ‚çš„äº‹æƒ…ã€‚\nUnix æœ‰ä¸€ä¸ªç¨‹åºä¹‹é—´é€šä¿¡ç”¨çš„å•ä¸€æ–‡ä»¶ç³»ç»Ÿã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ Linux ä¸Šâ€œä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶â€ â€”â€”åŒ…æ‹¬ç¡¬ä»¶è®¾å¤‡å’Œæä¾›ç³»ç»Ÿä¿¡æ¯æˆ–å…¶ä»–æ•°æ®çš„ç‰¹æ®Šæ–‡ä»¶ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåªæœ‰ Windows æœ‰é©±åŠ¨å™¨å·ï¼ˆCã€Dã€E ç›˜ï¼‰çš„åŸå› ï¼Œå®ƒæ˜¯ä» DOS ç»§æ‰¿çš„â€”â€”åœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šï¼Œç³»ç»Ÿä¸Šçš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯å•ä¸ªç›®å½•å±‚æ¬¡ç»“æ„çš„ä¸€éƒ¨åˆ†ã€‚\nè¿½å¯» Unix çš„åä»£ Unix åŠå…¶åä»£çš„å†å²é”™ç»¼å¤æ‚ï¼Œç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬å¤§è‡´å°† Unix çš„åä»£åˆ†ä¸ºä¸¤ç±»ã€‚\nä¸€ç±» Unix åä»£æ˜¯åœ¨å­¦æœ¯ç•Œå‘å±•èµ·æ¥çš„ã€‚ç¬¬ä¸€ä¸ªæ˜¯ BSDï¼ˆBerkeleySoftwareDistributionï¼‰ï¼Œä¸€ä¸ªå¼€æºã€ç±» Unix æ“ä½œç³»ç»Ÿã€‚BSD é€šè¿‡ FreeBSDã€NetBSD å’Œ OpenBSD å»¶ç»­è‡³ä»Šã€‚NeXTStep ä¹Ÿæ˜¯åŸºäºæœ€åˆçš„ BSD å¼€å‘çš„ï¼ŒApple çš„ Mac OS X æ˜¯åŸºäº NeXTStep å¼€å‘å‡ºæ¥çš„ï¼Œè€Œ iOS åˆ™åŸºäº Mac OS Xã€‚è¿˜æœ‰ä¸€äº›æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ PlayStation 4 ä¸Šä½¿ç”¨çš„ Orbis OSï¼Œéƒ½æ˜¯ä» BSD æ“ä½œç³»ç»Ÿè¡ç”Ÿè€Œæ¥çš„ã€‚\nRichard Stallman çš„ GNU é¡¹ç›®ä¹Ÿæ˜¯ä¸ºäº†åº”å¯¹ AT\u0026amp;T æ—¥ç›Šä¸¥æ ¼çš„ Unix è½¯ä»¶è®¸å¯æ¡æ¬¾è€Œå¯åŠ¨çš„ã€‚MINIX æ˜¯ä¸€ä¸ªä¸ºæ•™è‚²ç›®çš„è€Œåˆ›å»ºçš„ç±» Unix æ“ä½œç³»ç»Ÿï¼ŒLinux çš„çµæ„Ÿæ¥è‡ªäº MINIXã€‚æˆ‘ä»¬ä»Šå¤©æ‰€çŸ¥é“çš„ Linux å®é™…ä¸Šæ˜¯ GNU/Linuxï¼Œå› ä¸ºå®ƒç”± Linux å†…æ ¸å’Œè®¸å¤š GNU å®ç”¨ç¨‹åºç»„æˆã€‚GNU/Linux å¹¶éç›´æ¥ç»§æ‰¿è‡ª BSDï¼Œä½†å®ƒç»§æ‰¿äº† Unix çš„è®¾è®¡å¹¶æ¤æ ¹äºå­¦æœ¯ç•Œã€‚å½“ä»Šçš„è®¸å¤šæ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ Androidã€ChromeOSã€SteamOS ä»¥åŠå¤§é‡è®¾å¤‡çš„åµŒå…¥å¼æ“ä½œç³»ç»Ÿï¼Œéƒ½åŸºäº Linuxã€‚\nå¦ä¸€ç±»å°±æ˜¯å•†ä¸š Unix æ“ä½œç³»ç»Ÿã€‚AT\u0026amp;T UNIXã€SCO UnixWareã€Sun Microsystems Solarisã€HP-UXã€IBM AIXã€SGI IRIXâ€”â€”è®¸å¤šå¤§å…¬å¸æƒ³è¦åˆ›å»ºä»–ä»¬è‡ªå·±çš„ Unix ç‰ˆæœ¬ã€‚è¿™äº›åœ¨ä»Šå¤©å¹¶ä¸å¸¸è§ï¼Œä½†å…¶ä¸­ä¸€äº›ä»ç„¶å­˜åœ¨ã€‚\nDOS å’Œ Windows NT çš„å´›èµ· è®¸å¤šäººæœŸæœ› Unix æˆä¸ºè¡Œä¸šæ ‡å‡†æ“ä½œç³»ç»Ÿï¼Œä½† DOS ç³»ç»Ÿå’Œâ€œIBM PC å…¼å®¹â€çš„è®¡ç®—æœºæœ€ç»ˆæµè¡Œèµ·æ¥ã€‚Microsoft çš„ DOS æˆä¸ºå…¶ä¸­æœ€æˆåŠŸçš„ DOS ç³»ç»Ÿã€‚DOS ç³»ç»Ÿå®Œå…¨ä¸åŒäº Unixï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Windows ä½¿ç”¨åæ–œæ ä½œä¸ºæ–‡ä»¶è·¯å¾„ï¼Œè€Œå…¶ä»–ä¸€åˆ‡éƒ½ä½¿ç”¨æ­£æ–œæ ã€‚è¿™ä¸ªå†³å®šæ˜¯åœ¨ DOS ç³»ç»Ÿæ—©æœŸåšå‡ºçš„ï¼Œåæ¥çš„ Windows ç‰ˆæœ¬ç»§æ‰¿äº†å®ƒï¼Œå°±åƒ BSDã€Linuxã€Mac OS X å’Œå…¶ä»–ç±» Unix æ“ä½œç³»ç»Ÿç»§æ‰¿äº†è®¸å¤š Unix çš„è®¾è®¡ä¸€æ ·ã€‚\nWindows 3.1ã€Windows 95ã€Windows 98 å’Œ Windows ME éƒ½åŸºäºåº•å±‚çš„ DOSã€‚å½“æ—¶ï¼Œå¾®è½¯æ­£åœ¨å¼€å‘ä¸€ç§æ›´ç°ä»£ã€æ›´ç¨³å®šçš„æ“ä½œç³»ç»Ÿï¼Œä»–ä»¬å°†å…¶å‘½åä¸º Windows NTâ€”â€”å³â€œWindows New Technologyâ€ã€‚Windows NT æœ€ç»ˆä»¥ Windows XP çš„å½¢å¼å‡ºç°åœ¨æ™®é€šç”¨æˆ·çš„è®¡ç®—æœºä¸­ï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œå®ƒä»¥ Windows 2000 å’Œ Windows NT çš„å½¢å¼ä¾›å…¬å¸ä½¿ç”¨ã€‚\nä»Šå¤©ï¼Œå¾®è½¯çš„æ‰€æœ‰æ“ä½œç³»ç»Ÿéƒ½åŸºäº Windows NT å†…æ ¸ã€‚Windows 7ã€Windows 8ã€Windows RTã€Windows Phone 8ã€Windows Server å’Œ Xbox One çš„æ“ä½œç³»ç»Ÿéƒ½ä½¿ç”¨ Windows NT å†…æ ¸ã€‚ä¸å¤§å¤šæ•°å…¶ä»–æ“ä½œç³»ç»Ÿä¸åŒï¼ŒWindows NT å¹¶ä¸æ˜¯ä½œä¸ºç±» Unix æ“ä½œç³»ç»Ÿå¼€å‘çš„ã€‚\nå½“ç„¶ï¼Œå¾®è½¯å¹¶ä¸æ˜¯å®Œå…¨é‡æ–°å¼€å§‹ã€‚ä¸ºäº†ä¿æŒä¸ DOS å’Œæ—§çš„ Windows è½¯ä»¶çš„å…¼å®¹æ€§ï¼ŒWindows NT ç»§æ‰¿äº†è®¸å¤š DOS çº¦å®šï¼Œå¦‚é©±åŠ¨å™¨å·ã€æ–‡ä»¶è·¯å¾„çš„åæ–œæ å’Œå‘½ä»¤è¡Œçš„æ­£æ–œæ ã€‚\nâ€œåœ¨ç»å¤§å¤šæ•°åœ°æ–¹ï¼Œç”¨çš„éƒ½æ˜¯/ï¼ˆslashï¼‰ï¼ŒåŒ…æ‹¬ Mac/Linuxï¼Œä¹ŸåŒ…æ‹¬ URLã€‚ä½ å”¯ä¸€éœ€è¦è®°ä½çš„æ˜¯ï¼ŒMicrosoft è¿™ä¸ªæ€ªé¸¡åœ¨è‡ªå·±çš„æ“ä½œç³»ç»Ÿé‡Œé¢åè¦ç”¨\\ï¼ˆbackslashï¼‰ï¼Œä½¿å¾—è‡ªå·±ä¸ä¼—ä¸åŒã€‚ åœ¨ Windows ä¸­ï¼Œæ­£æ–œæ /è¡¨ç¤ºé™¤æ³•ï¼Œç”¨æ¥è¿›è¡Œæ•´é™¤è¿ç®—ï¼›åæ–œæ \\ç”¨æ¥è¡¨ç¤ºç›®å½•ã€‚ åœ¨ Unix ç³»ç»Ÿä¸­ï¼Œ/è¡¨ç¤ºç›®å½•ï¼›\\è¡¨ç¤ºè·³è„±å­—ç¬¦å°†ç‰¹æ®Šå­—ç¬¦å˜æˆä¸€èˆ¬å­—ç¬¦ Windowsç”±äºä½¿ç”¨æ–œæ /ä½œä¸ºDOSå‘½ä»¤æç¤ºç¬¦çš„å‚æ•°æ ‡å¿—äº†ï¼Œä¸ºäº†ä¸æ··æ·†ï¼Œæ‰€ä»¥é‡‡ç”¨åæ–œæ \\ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ã€‚æ‰€ä»¥ç›®å‰windowsç³»ç»Ÿä¸Šçš„æ–‡ä»¶æµè§ˆå™¨éƒ½æ˜¯ç”¨åæ–œæ \\ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ã€‚\nä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ ä½ æ˜¯å¦æ›¾ç»çœ‹è¿‡ Mac OS X ç»ˆç«¯æˆ–æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶æ³¨æ„åˆ°å®ƒä¸ Linux çš„ç›¸ä¼¼ä¹‹å¤„ï¼Œä»¥åŠå®ƒä»¬ä¸ Windows çš„ä¸åŒä¹‹å¤„ï¼Ÿå—¯ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆâ€”â€”Mac OSX å’Œ Linux éƒ½æ˜¯ç±» Unix æ“ä½œç³»ç»Ÿã€‚\näº†è§£è¿™æ®µå†å²æœ‰åŠ©äºæ‚¨äº†è§£ä»€ä¹ˆæ˜¯â€œç±» Unixâ€æ“ä½œç³»ç»Ÿï¼Œä»¥åŠä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šæ“ä½œç³»ç»Ÿçœ‹èµ·æ¥å½¼æ­¤å¦‚æ­¤ç›¸ä¼¼è€Œ Windows ä¼¼ä¹å¦‚æ­¤ä¸åŒã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆ Linux æå®¢ä¼šè§‰å¾— Mac OS X ä¸Šçš„ç»ˆç«¯å¦‚æ­¤ç†Ÿæ‚‰ï¼Œè€Œ Windows ä¸Šçš„å‘½ä»¤æç¤ºç¬¦å’Œ PowerShell ä¸å…¶ä»–å‘½ä»¤è¡Œç¯å¢ƒå¦‚æ­¤ä¸åŒã€‚\nè¿™åªæ˜¯ä¸€ä¸ªç®€çŸ­çš„å†å²ï¼Œå®ƒå°†å¸®åŠ©æ‚¨äº†è§£æˆ‘ä»¬å¦‚ä½•åˆ°è¾¾ä»Šå¤©çš„ä½ç½®ï¼Œè€Œä¸ä¼šé™·å…¥ç»†èŠ‚ä¸­ã€‚å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥æ‰¾åˆ°æœ‰å…³ Unix å†å²çš„æ•´æœ¬ä¹¦ã€‚\n","permalink":"https://lifeislife.cn/posts/zh-unix%E6%98%AF%E4%BB%80%E4%B9%88%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%8D%E8%A6%81/","summary":"\u003ch1 id=\"unix-æ˜¯ä»€ä¹ˆä¸ºä»€ä¹ˆé‡è¦\"\u003eUnix æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAuthorï¼šCHRIS HOFFMAN\nè¯‘ï¼š\u003ca href=\"https://www.howtogeek.com/182649/htg-explains-what-is-unix/\"\u003eWhat Is Unix, and Why Does It Matter?\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå¤§å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ã€‚é™¤äº†å¾®è½¯åŸºäº Windows NT çš„æ“ä½œç³»ç»Ÿä¹‹å¤–ï¼Œå‡ ä¹æ‰€æœ‰å…¶ä»–ç³»ç»Ÿçš„ç¥–å®—éƒ½æ˜¯ Unixã€‚\u003c/p\u003e","title":"ZH-Unix æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ"},{"content":"åœ¨é¡¹ç›®ç›®å½•ä¸‹å®‰è£… hexo-browsersync æ’ä»¶\nnpm install hexo-browsersync --save hexo så¯åŠ¨æœåŠ¡åï¼Œæ¯æ¬¡ä¿å­˜ Markdown æ–‡ä»¶éƒ½ä¼šå®æ—¶æ›´æ–°é¡µé¢ã€‚\n","permalink":"https://lifeislife.cn/posts/hexo%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0%E9%A2%84%E8%A7%88/","summary":"\u003cp\u003eåœ¨é¡¹ç›®ç›®å½•ä¸‹å®‰è£… \u003ccode\u003ehexo-browsersync\u003c/code\u003e æ’ä»¶\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enpm install hexo-browsersync --save\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003ehexo s\u003c/code\u003eå¯åŠ¨æœåŠ¡åï¼Œæ¯æ¬¡ä¿å­˜ Markdown æ–‡ä»¶éƒ½ä¼šå®æ—¶æ›´æ–°é¡µé¢ã€‚\u003c/p\u003e","title":"Hexo å®æ—¶æ›´æ–°é¢„è§ˆ"},{"content":"åªè¦æœ‰sourceæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æºæ–‡ä»¶å°±å¯ä»¥é‡æ–°éƒ¨ç½²ï¼ŒæŒ‰ç…§æ­£å¸¸çš„æ­å»º Hexo ç¯å¢ƒå¼€å§‹æ­å»ºï¼Œæ­å»ºå¥½ä»¥åå°†sourceæ–‡ä»¶å¤¹æ›¿æ¢å³å¯ï¼Œéœ€è¦åº”ç”¨ä¸»é¢˜å°±ä¸‹è½½ä¸»é¢˜ç„¶åæ›¿æ¢ã€‚\næ³¨æ„ï¼š\nä¸»é¢˜æ›´æ¢éœ€è¦æ›´æ”¹_config_ymlæ–‡ä»¶ _config_ymlæ–‡ä»¶ä¸­çš„éƒ¨ç½²é…ç½®ï¼Œbranch:masterå°±æ˜¯æ¯æ¬¡hexo dæ“ä½œæ¨é€çš„åˆ†æ”¯ã€‚è€Œåœ¨å‘½ä»¤è¡Œæ¯æ¬¡git pushæ¨é€çš„åˆ†æ”¯æ˜¯è®¾ç½®çš„é»˜è®¤åˆ†æ”¯hexo deploy: type: git repository: https://github.com/Dunky-Z/Dunky-Z.github.io.git branch: master åˆ©ç”¨ Hexo åœ¨å¤šå°ç”µè„‘ä¸Šæäº¤å’Œæ›´æ–° GitHub pages åšå®¢ ","permalink":"https://lifeislife.cn/posts/hexo%E5%92%8Cgithub%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E4%BB%A5%E5%8F%8A%E6%9B%B4%E6%8D%A2%E7%94%B5%E8%84%91%E5%90%8C%E6%AD%A5%E5%8D%9A%E5%AE%A2/","summary":"\u003cp\u003eåªè¦æœ‰\u003ccode\u003esource\u003c/code\u003eæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æºæ–‡ä»¶å°±å¯ä»¥é‡æ–°éƒ¨ç½²ï¼ŒæŒ‰ç…§æ­£å¸¸çš„æ­å»º Hexo ç¯å¢ƒå¼€å§‹æ­å»ºï¼Œæ­å»ºå¥½ä»¥åå°†\u003ccode\u003esource\u003c/code\u003eæ–‡ä»¶å¤¹æ›¿æ¢å³å¯ï¼Œéœ€è¦åº”ç”¨ä¸»é¢˜å°±ä¸‹è½½ä¸»é¢˜ç„¶åæ›¿æ¢ã€‚\u003c/p\u003e","title":"Hexo å’Œ GitHub æ­å»ºåšå®¢ä»¥åŠæ›´æ¢ç”µè„‘åŒæ­¥åšå®¢"},{"content":"è¿™æ˜¯åšå®¢çš„ç¬¬ä¸€ç¯‡æ–‡ç« \n","permalink":"https://lifeislife.cn/posts/helloworld/","summary":"\u003cp\u003eè¿™æ˜¯åšå®¢çš„ç¬¬ä¸€ç¯‡æ–‡ç« \u003c/p\u003e","title":"HelloWorld"}]