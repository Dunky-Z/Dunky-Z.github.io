---
title: 汇编入门-基础知识
date: 2021-08-02 20:06:09
tags: [汇编语言]
---
## 汇编语言的诞生
每一种微处理器，由于硬件设计和内部结构的不同，就需要用不同的电平脉冲来控制，使它工作。所以每一种微处理器都有自己的机器指令集，也就是**机器语言**。

早期的机器语言设计的程序，就是将0，1数字编的程序打在纸带上，1表示打孔，0表示不打孔。

简单的一句话就需要几十行机器码，不管是阅读还是查错都十分困难。极大地阻碍了计算机的发展。于是就产生了汇编语言。

汇编语言的主体是**汇编指令**，相对于机器指令来说就是用了方便记忆的书写格式。

例如:机器指令`1000100111011000`表示把寄存器`BX`的内容送到`AX`中。汇编指令则写成`mov ax，bx`。这样的写法与人类语言接近，便于阅读和记忆。

但是，计算机只认机器指令，怎么办？这就有了**编译器**，它可以将汇编代码编译成机器码，交给计算机去执行。

工作流程就是：`程序员➜汇编指令➜编译器➜机器码➜计算机`。

汇编语言由三类指令组成：
- 汇编指令：机器码的助记符，有对应的机器码
- 伪指令：没有对应的助记码，由编译器执行，计算机不执行
- 其他符号：+-*/等符号，由编译器识别，没有对应的机器码


## 常见概念

**指令和数据**是应用上的概念，在内存和磁盘上，指令和数据没有区别，都是二进制信息，就是一堆01组合。就像围棋的棋子，在棋盒里的时候没有任何区别，在对的时候就有了不同的意义。

**存储单元**是存储器的划分。从0编号，一个存储单元可以存`1Byte=8bit`。微机存储器的容量是以字节(Byte)为最小单位计算的。

**CPU对存储器的读写**是微机运行中最重要的一个活动，读写首先要知道存储器单元的地址，其次还要指明要对哪一个器件进行操作，进行什么操作。

CPU要想进行数据读写，必须要和芯片进行下面3类信息交互：
- 存储单元的地址(地址信息);
- 器件的选择，读或写的命令(控制信息);
- 读或写的数据(数据信息)。

那么CPU是如何传递信息的呢？在计算机中有专门连接CPU和其他芯片的导线，通常叫**总线**。物理上，就是一根根导线的集合，逻辑上分为3类，**地址总线**、**控制总线**和**数据总线**。

知道了CPU如何进行数据读写，但是如何命令计算机进行数据读写呢？要让计算机工作，就要向它输入能够驱动它进行工作的**电平信息**，也就是之前提到的**机器码**。

**地址总线**用来给CPU传输地址信息，一根总线传输的状态只有01两种，总线的数量就是它的宽度，假设有10根总线，那么宽度为10，它就能表示$2^{10}$种状态，就可以寻找$2^{10}$个内存单元。

CPU向内存发出地址信息11时10根地址线传输的信息：

![](https://gitee.com/dominic_z/markdown_picbed/raw/master/img/20210805173910.png)

**数据总线**是CPU与内存和其他原件之间数据传输的通道。它的宽度决定了CPU和外界数据传送速度。

**控制总线**是CPU向外部器件发送控制信息的通道。控制总线是个总称，是不同控制线的集合，有多少根总线意味着CPU提供对外部器件多少种控制。它的宽度决定了CPU对外部器件的控制能力。前面提到的读写命令，有专门的控制线，分别叫**读信号输出**和**写信号输出**。


**主板**上有核心器件和一些主要器件（CPU，存储器，外围芯片组，扩展插槽），这些器件通过总线相连。

**接口卡**相当于CPU与外设之间的中介，CPU无法直接控制外设，就先向接口卡发送命令，接口卡再向外设发送命令。

**随机存储器**
用于存放供CPU使用的绝大部分程序和数据，主随机存储器一般由两个位置上的RAM组成，装在主板上RAM和插在扩展插槽上的RAM。

**装有BIOS(Basic Input/Output System，基本输入/输出系统)的ROM**
BIOS是由主板和各类接口卡(如显卡、网卡等)厂商提供的软件系统，可以通过它利用该硬件设备进行最基本的输入输出。在主板和某些接口卡上插有存储相应BIOS的ROM。例如，主板上的ROM中存储着主板的BIOS(通常称为系统BIOS);显卡上的ROM中存储着显卡的BIOS;如果网卡上装有ROM，那其中就可以存储网卡的BIOS。

**接口卡上的RAM**
某些接口卡需要对大批量输入、输出数据进行暂时存储，在其上装有RAM。最典型的是显示卡上的RAM，一般称为显存。显示卡随时将显存中的数据向显示器上输出。换句话说，我们将需要显示的内容写入显存，就会出现在显示器上。

![](https://gitee.com/dominic_z/markdown_picbed/raw/master/img/20210805183732.png)

CPU在操作外设时都把它们当做内存来对待。

![](https://gitee.com/dominic_z/markdown_picbed/raw/master/img/20210805184819.png)

>图中第二个设备ROM（装有系统BIOS）被放在了靠上的位置，单独拖了一个很长的箭头，显得很奇怪。

>可能是它和RAM（主存储器）都属于直接装在主板上的，其余为通过扩展插槽的原因。

在图1.8中，所有的物理存储器被看作一个由若干存储单元组成的逻辑存储器，每个物理存储器在这个逻辑存储器中占有一个地址段，即一段地址空间。CPU在这段地址空间中读写数据，实际上就是在相对应的物理存储器中读写数据。

我们在基于一个计算机硬件系统编程的时候，必须知道这个系统中的内存地址空间分配情况。因为当我们想在某类存储器中读写数据的时候，必须知道它的第一个单元的地址和最后一个单元的地址，才能保证读写操作是在预期的存储器中进行。