---
title: QEMU源码分析-外设模拟（以GPIO为例）
date: 2021-11-11 10:11:32
tags: [QEMU, GPIO]
---

## QEMU模拟外设的原理
QEMU主要是实现了CPU核的模拟，可以读写某个地址。
QEMU的模拟外设的原理很简单：**硬件即内存**。
要在QEMU上模拟某个外设，思路就是：
- CPU读某个地址时，QEMU模拟外设的行为，把数据返回给CPU
- CPU写某个地址时，QEMU获得数据，用来模拟外设的行为。
即：要模拟外设备，我们只需要针对外设的地址提供对应的读写函数即可。

以GPIO为例：