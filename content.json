{"meta":{"title":"å¦‚äº‘æ³Š","subtitle":"","description":"","author":"Dominic","url":"http://example.com","root":"/"},"pages":[{"title":"about","date":"2020-08-23T01:09:13.000Z","updated":"2022-10-15T02:44:41.723Z","comments":true,"path":"about/index.html","permalink":"http://example.com/about/index.html","excerpt":"","text":"ğ‘¯ğ’Š, ğ‘°'ğ’ ğ‘«ğ’ğ’ğ’Šğ’ğ’Šğ’„ :wave: ğ™„'ğ™¢ ğ™˜ğ™ªğ™§ğ™§ğ™šğ™£ğ™©ğ™¡ğ™® ğ™¡ğ™šğ™–ğ™§ğ™£ğ™ğ™£ğ™œ ğ˜¾++ ğ™–ğ™£ğ™™ ğ™‹ğ™®ğ™©ğ™ğ™¤ğ™£; âŒ¨ï¸ğ˜¿ğ™–ğ™—ğ™—ğ™¡ğ™šğ™§ ğ™ğ™£ ğ™‚ğ™§ğ™–ğ™¥ğ™ğ™ğ™˜ğ™¨ ğ˜¼ğ™¡ğ™œğ™¤ğ™§ğ™ğ™©ğ™ğ™¢ ğŸ“¸ğ˜¼ğ™¢ğ™–ğ™©ğ™šğ™ªğ™§ ğ™‹ğ™ğ™¤ğ™©ğ™¤ğ™œğ™§ğ™–ğ™¥ğ™ğ™šğ™§ ğ‘°ğ’ğ’ğ’–ğ’ğ’Šğ’ğ’‚ğ’•ğ’Šğ’ğ’ ğ’Šğ’” ğ’…ğ’†ğ’”ğ’Šğ’ˆğ’ğ’†ğ’… ğ’ƒğ’š Dominic"},{"title":"categories","date":"2021-11-17T08:28:11.000Z","updated":"2022-10-15T02:44:41.724Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2021-08-11T07:30:30.000Z","updated":"2022-10-15T02:44:42.194Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"å¦‚ä½•ç¦»çº¿å®‰è£… VSCode æ’ä»¶","slug":"å¦‚ä½•ç¦»çº¿å®‰è£…VSCodeæ’ä»¶","date":"2023-08-29T12:59:19.000Z","updated":"2023-08-29T14:23:50.299Z","comments":true,"path":"2023/08/29/å¦‚ä½•ç¦»çº¿å®‰è£…VSCodeæ’ä»¶/","link":"","permalink":"http://example.com/2023/08/29/%E5%A6%82%E4%BD%95%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85VSCode%E6%8F%92%E4%BB%B6/","excerpt":"","text":"èƒŒæ™¯ç®€ä»‹åœ¨ä½¿ç”¨ VSCode çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå®‰è£…ä¸€äº›æ’ä»¶æ¥æé«˜å¼€å‘æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œç”±äºæŸäº›åŸå› ï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•ç›´æ¥è®¿é—® VSCode çš„æ’ä»¶å¸‚åœºï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç¦»çº¿å®‰è£…æ’ä»¶äº†ã€‚ è¿™é‡Œå­˜åœ¨ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ä¸ºæœ¬åœ°çš„ VSCode å®‰è£…æ’ä»¶ï¼Œå¦ä¸€ç§æ˜¯ä¸ºè¿œç¨‹çš„ VSCode å®‰è£…æ’ä»¶ã€‚æœ¬æ–‡å°†åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æƒ…å†µä¸‹çš„ç¦»çº¿å®‰è£…æ–¹æ³•ã€‚ è¿œç¨‹ VSCode ä¹Ÿå°±æ˜¯ VSCode çš„Remote DevelopmentåŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ SSHã€Dockerã€WSL ç­‰æ–¹å¼è¿œç¨‹è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„ VSCodeã€‚ æ–¹æ³•ä¸€ï¼šä½¿ç”¨å·²å®‰è£…çš„æ’ä»¶ç›®å½• ä»å·²ç»å®‰è£…æ’ä»¶çš„ç”µè„‘ä¸Šæ‹·è´æ‰€æœ‰æ’ä»¶ï¼Œè·¯å¾„ä¸€èˆ¬ä¸º C:\\ç”¨æˆ·\\ç”¨æˆ·å\\.vscode\\extensions æ‹·è´åˆ°ç¦»çº¿å®‰è£…çš„ç”µè„‘ä¸Šçš„ .vscode/extensions æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼Œé‡å¯ VScode å³å¯å®‰è£…æˆåŠŸã€‚ å¯¹äºè¿œç¨‹ VSCode æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œæ’ä»¶ä¸åŒºåˆ†æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°çš„ Windows ä¸Šçš„ VSCode ä¸Šå®‰è£…æ’ä»¶ï¼Œç„¶åå°†æ’ä»¶ç›®å½•å‹ç¼©åæ•´ä¸ªæ‹·è´åˆ°è¿œç¨‹ä¸»æœºä¸Šå³å¯ã€‚ è¿œç¨‹ä¸»æœºä¸Šçš„æ’ä»¶ç›®å½•ä¸€èˆ¬åœ¨ ~/.vscode-server/extensions ä¸‹ã€‚å°†å‹ç¼©çš„æ–‡ä»¶è§£è¯åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œé‡å¯ VSCode å³å¯ã€‚ æ–¹æ³•äºŒï¼šä¸‹è½½ç¦»çº¿å®‰è£…åŒ… vslx å®‰è£… åˆ° VScode æ’ä»¶ä¸­å¿ƒ æœç´¢éœ€è¦ä½¿ç”¨çš„æ’ä»¶åç§° ä¸‹è½½å¯¹åº”çš„æ‹“å±•ç¨‹åºæ–‡ä»¶ï¼Œä¸‹è½½çš„æ–‡ä»¶çš„åç¼€æ˜¯.vslx VSCode ä¸­å®‰è£…","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7/"}]},{"title":"Windows ç«¯å£æ˜ å°„","slug":"Windowsç«¯å£æ˜ å°„","date":"2023-08-28T15:24:53.000Z","updated":"2023-08-28T15:29:20.195Z","comments":true,"path":"2023/08/28/Windowsç«¯å£æ˜ å°„/","link":"","permalink":"http://example.com/2023/08/28/Windows%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/","excerpt":"","text":"å‘½ä»¤è¡Œåœ¨ Windows ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ netsh å‘½ä»¤æ¥æ·»åŠ ã€æŸ¥çœ‹å’Œåˆ é™¤ç«¯å£è½¬å‘è§„åˆ™ã€‚ è¦æ·»åŠ ä¸€ä¸ªç«¯å£è½¬å‘è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1netsh interface portproxy add v4tov4 listenaddress=&lt;local_address&gt; listenport=&lt;local_port&gt; connectaddress=&lt;remote_address&gt; connectport=&lt;remote_port&gt; å…¶ä¸­ï¼š &lt;local_address&gt;æ˜¯æœ¬åœ°ç›‘å¬çš„åœ°å€ï¼ˆå¯ä»¥æ˜¯ IP åœ°å€æˆ– 0.0.0.0 è¡¨ç¤ºæ‰€æœ‰åœ°å€ï¼‰ã€‚ &lt;local_port&gt;æ˜¯æœ¬åœ°ç›‘å¬çš„ç«¯å£ã€‚ &lt;remote_address&gt;æ˜¯è½¬å‘è¿æ¥åˆ°çš„è¿œç¨‹åœ°å€ã€‚ &lt;remote_port&gt;æ˜¯è½¬å‘è¿æ¥åˆ°çš„è¿œç¨‹ç«¯å£ã€‚ ä¾‹å¦‚ï¼Œè¦å°†æœ¬åœ°çš„ 8080 ç«¯å£è½¬å‘åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ 80 ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1netsh interface portproxy add v4tov4 listenaddress=127.0.0.1 listenport=8080 connectaddress=192.168.0.100 connectport=80 è¦æŸ¥çœ‹å½“å‰çš„ç«¯å£è½¬å‘è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1netsh interface portproxy show v4tov4 è¦åˆ é™¤ç‰¹å®šçš„ç«¯å£è½¬å‘è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1netsh interface portproxy delete v4tov4 listenaddress=&lt;local_address&gt; listenport=&lt;local_port&gt; å…¶ä¸­çš„&lt;local_address&gt;å’Œ&lt;local_port&gt;åº”è¯¥ä¸ä½ æƒ³åˆ é™¤çš„è§„åˆ™åŒ¹é…ã€‚ è¯·æ³¨æ„ï¼Œæ‰§è¡Œè¿™äº›æ“ä½œé€šå¸¸éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚ GUIä½¿ç”¨å¼€æºå·¥å…·PortProxyGUIå¯ä»¥åœ¨ UI ç•Œé¢å¿«é€Ÿå¢åˆ æ”¹æŸ¥ç«¯å£æ˜ å°„ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"å·¥å…·ï¼ŒEfficiencyï¼Œå†…ç½‘ç©¿é€","slug":"å·¥å…·ï¼ŒEfficiencyï¼Œå†…ç½‘ç©¿é€","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7%EF%BC%8CEfficiency%EF%BC%8C%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"}]},{"title":"å†…ç½‘ç©¿é€è¿œç¨‹è®¿é—®å®¶é‡Œçš„ WSL2","slug":"å†…ç½‘ç©¿é€è¿œç¨‹è®¿é—®å®¶é‡Œçš„WSL2","date":"2023-08-28T14:45:01.000Z","updated":"2023-08-29T12:35:19.161Z","comments":true,"path":"2023/08/28/å†…ç½‘ç©¿é€è¿œç¨‹è®¿é—®å®¶é‡Œçš„WSL2/","link":"","permalink":"http://example.com/2023/08/28/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E5%AE%B6%E9%87%8C%E7%9A%84WSL2/","excerpt":"","text":"èƒŒæ™¯ç®€ä»‹WSL2 æ˜¯ Windows çš„å­ç³»ç»Ÿï¼Œå¯ä»¥åœ¨ Windows ä¸Šè¿è¡Œ Linuxï¼Œä½†æ˜¯ WSL2 æ˜¯è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥è®¿é—® WSL2 ä¸­çš„æœåŠ¡ï¼Œæ¯”å¦‚ SSH æœåŠ¡ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨å†…ç½‘ç©¿é€å·¥å…·èŠ±ç”Ÿå£³æ¥å®ç°è¿œç¨‹è®¿é—® WSL2 ä¸­çš„æœåŠ¡ã€‚ å®ç°è¿™ä¸€éœ€æ±‚éœ€è¦å®Œæˆä¸¤ä¸ªåŠŸèƒ½ã€‚ WSL2 ä¸­çš„æœåŠ¡æ˜¯è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„ï¼Œå¦‚ä½•å°†å…¬ç½‘çš„è®¿é—®è½¬å‘åˆ° WSL2 ä¸­ã€‚ Windows æ²¡æœ‰å…¬ç½‘ IPï¼Œå¦‚ä½•é€šè¿‡å…¬ç½‘æ¥è®¿é—®ã€‚ WSL2 ç«¯å£è½¬å‘è·å– WSL2 çš„ IP åœ°å€ï¼š 12hostname -I | awk &#x27;&#123;print $1&#125;&#x27;172.26.13.98 Windows è‡ªå¸¦çš„netsh interface portproxyå¯ä»¥å®ç°ç«¯å£è½¬å‘ã€‚ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ cmdï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=2222 connectaddress=172.26.13.98 connectport=22 listenportï¼šå…¬ç½‘è®¿é—®çš„ç«¯å£ï¼ˆæ”¹ä¸€ä¸ªä¸å†²çªçš„å°±è¡Œï¼‰ connectaddressï¼šWSL2 çš„ IP åœ°å€ connectportï¼šWSL2 ä¸­ SSH æœåŠ¡çš„ç«¯å£ (é»˜è®¤ä¸º 22ï¼Œä¸éœ€è¦æ›´æ”¹) å¼€å¯ Windows é˜²ç«å¢™å…¥ç«™è§„åˆ™ï¼Œç®¡ç†å‘˜èº«ä»½æ‰“å¼€ cmdï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1netsh advfirewall firewall add rule name=WSL2 dir=in action=allow protocol=TCP localport=2222 è¿™ä¸ªå‘½ä»¤æ˜¯ç”¨äºåœ¨ Windows é«˜çº§é˜²ç«å¢™ä¸­æ·»åŠ ä¸€æ¡è§„åˆ™ã€‚ä¸‹é¢æ˜¯å¯¹æ¯ä¸ªå‚æ•°çš„è§£é‡Šï¼š name=WSL2ï¼šå°†è§„åˆ™å‘½åä¸º â€œWSL2â€ã€‚ dir=inï¼šæŒ‡å®šè§„åˆ™é€‚ç”¨äºä¼ å…¥çš„ç½‘ç»œæµé‡ã€‚ action=allowï¼šå…è®¸é€šè¿‡è¯¥è§„åˆ™çš„æµé‡é€šè¿‡é˜²ç«å¢™ã€‚ protocol=TCPï¼šæŒ‡å®šè§„åˆ™é€‚ç”¨äº TCP åè®®çš„æµé‡ã€‚ localport=2222ï¼šæŒ‡å®šæœ¬åœ°ç«¯å£å·ä¸º 2222ã€‚ éªŒè¯ç«¯å£è½¬å‘æ˜¯å¦æˆåŠŸï¼š 1ssh -p 2222 user@localhost user ä¿®æ”¹æˆ WSL2 çš„ç”¨æˆ·å å¦‚æœé…ç½®æˆåŠŸï¼Œåˆ™ä¼šæˆåŠŸç™»å½• WSL2ã€‚ å®‰è£…é…ç½®èŠ±ç”Ÿå£³è¿›å…¥å®˜ç½‘ä¸‹è½½èŠ±ç”Ÿå£³å®¢æˆ·ç«¯ï¼Œå®‰è£…åæ‰“å¼€ï¼Œæ³¨å†Œè´¦å·ï¼Œç™»å½•ã€‚éœ€è¦å®åè®¤è¯ å…è´¹è´¦æˆ·å¯ä»¥ç»‘å®š2 ä¸ªæ˜ å°„ï¼Œå¯¹æˆ‘æ¥è¯´æš‚æ—¶å¤Ÿç”¨äº†ï¼Œå…è´¹æµé‡ 1G/æœˆã€‚å®æµ‹é˜…è¯»ä»£ç ä¸ç¼–è¯‘çš„è¯å¤§æ¦‚æ¯å¤© 50Må·¦å³ã€‚ æ‰“å¼€å®¢æˆ·ç«¯ï¼Œæ·»åŠ æ˜ å°„ï¼Œé…ç½®å¦‚ä¸‹ï¼š ä¿å­˜å³å¯ã€‚ éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸï¼Œæ‰¾ä¸€å°ä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘çš„ç”µè„‘ï¼Œä½¿ç”¨ SSH è¿æ¥ WSL2ï¼š å¦‚æœå¤åˆ¶å‡ºæ¥çš„è®¿é—®åœ°å€ä¸ºabcdjsj.goho.co:33445ï¼Œé‚£ä¹ˆ SSH å‘½ä»¤ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š 1ssh -p 33445 user@abcdjsj.goho.co user ä¿®æ”¹æˆ WSL2 çš„ç”¨æˆ·å å¦‚æœé…ç½®æˆåŠŸï¼Œåˆ™ä¼šæˆåŠŸç™»å½• WSL2ã€‚ é¢˜å¤–è¯ WSL2 çš„ IP ä¼šç»å¸¸å˜åŒ–ï¼Œå¦‚æœè¿ä¸ä¸Šäº†ï¼Œå¯ä»¥é‡æ–°è·å–ä¸€ä¸‹ IPï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹å„ä¸ªé…ç½®ã€‚æˆ–è€…æƒ³åŠæ³•å°† WSL2 çš„ IP å›ºå®šä¸‹æ¥ã€‚ å¸¦å®½æœ‰é™ï¼Œç™»å½•æ—¶æ¯”è¾ƒæ…¢ï¼Œè€å¿ƒç­‰å¾…ã€‚åç»­å‡†å¤‡ä½¿ç”¨ frp è‡ªå»ºä¸€ä¸ªç©¿é€æœåŠ¡ã€‚ PC è€—ç”µä¼¤ä¸èµ·å•Šï¼Œä¸€ç™¾å¤šç“¦èµ¶ä¸Šä¸‰å››å° NAS äº†ã€‚è¿™ç©æ„åªèƒ½åº”æ€¥ï¼Œé•¿æ—¶é—´æŒ‚æœºç”µè´¹éƒ½å¤Ÿä¹°ä¸ªäº‘æœåŠ¡å™¨äº†ã€‚ å¸¸è§é—®é¢˜â€œSystem is booting up. Unprivileged users are not permitted to log in yetâ€ç™»å½•æœåŠ¡ç«¯ï¼Œä¹Ÿå°±æ˜¯ WSL2ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 1sudo rm /run/nologin","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"å·¥å…·ï¼ŒEfficiencyï¼Œå†…ç½‘ç©¿é€","slug":"å·¥å…·ï¼ŒEfficiencyï¼Œå†…ç½‘ç©¿é€","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7%EF%BC%8CEfficiency%EF%BC%8C%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"}]},{"title":"PhotoPrism éƒ¨ç½²ç§äººç›¸å†Œ","slug":"PhotoPrisméƒ¨ç½²ç§äººç›¸å†Œ","date":"2023-08-20T01:48:13.000Z","updated":"2023-08-20T02:42:00.214Z","comments":true,"path":"2023/08/20/PhotoPrisméƒ¨ç½²ç§äººç›¸å†Œ/","link":"","permalink":"http://example.com/2023/08/20/PhotoPrism%E9%83%A8%E7%BD%B2%E7%A7%81%E4%BA%BA%E7%9B%B8%E5%86%8C/","excerpt":"","text":"Docker-compose å¯åŠ¨ä¸‹è½½å®˜æ–¹çš„ docker-compose.yml æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹ç«¯å£å’ŒæŒ‚è½½è·¯å¾„ï¼Œç„¶åå¯åŠ¨å³å¯ã€‚ 1wget https://dl.photoprism.app/docker/docker-compose.yml å¦‚æœæ— æ³•ä¸‹è½½ä¸‹è½½åœ°å€å¯ä»¥å‰å¾€ Docker Compose - PhotoPrism æŸ¥çœ‹æœ€æ–°ã€‚ æ ¹æ®è‡ªå·±éœ€è¦ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š 12345678910111213141516171819202122version: &#x27;3.5&#x27;services: photoprism: ## Use photoprism/photoprism:preview for testing preview builds: image: dockerproxy.com/photoprism/photoprism:latest # é…ç½®äº†é•œåƒåŠ é€Ÿ ports: - &quot;2342:2342&quot; # HTTP port (host:container) environment: PHOTOPRISM_ADMIN_USER: &quot;admin&quot; # ç®¡ç†å‘˜ç”¨æˆ·å PHOTOPRISM_ADMIN_PASSWORD: &quot;12345678&quot; # ç®¡ç†å‘˜å¯†ç  PHOTOPRISM_DETECT_NSFW: &quot;true&quot; # è‡ªåŠ¨æ£€æµ‹ NSFW å›¾ç‰‡å¹¶æ ‡è®°éšç§å›¾ç‰‡ PHOTOPRISM_UPLOAD_NSFW: &quot;true&quot; # è¿è¡Œä¸Šä¼  NSFW å›¾ç‰‡ ## Share hardware devices with FFmpeg and TensorFlow (optional): devices: - &quot;/dev/dri:/dev/dri&quot; # å¦‚æœæœ‰æ ¸æ˜¾æˆ–è€…ç‹¬æ˜¾å¯ä»¥é…ç½®ç¡¬ä»¶åŠ é€Ÿ volumes: - &quot;/root/sharedfolder/syncthing/Photo_Album:/photoprism/originals/Photo_Album&quot; # ç…§ç‰‡å­˜æ”¾è·¯å¾„ - &quot;/root/sharedfolder/syncthing/daily:/photoprism/originals/daily&quot; # ç…§ç‰‡å­˜æ”¾è·¯å¾„ - &quot;/root/sharedfolder/syncthing/baby:/photoprism/originals/baby&quot; # ç…§ç‰‡å­˜æ”¾è·¯å¾„ - &quot;./storage:/photoprism/storage&quot; # ä¸è¦åˆ é™¤ (DO NOT REMOVE) ç„¶åå¯åŠ¨å³å¯ï¼š 1docker-compose up -d åˆå§‹åŒ–éœ€è¦æ—¶é—´ï¼Œç­‰å¾…ä¸€åˆ†é’Ÿå·¦å³ï¼Œç„¶åè®¿é—® http://&#123;hostip&#125;:2342 å³å¯çœ‹åˆ°ç™»å½•ç•Œé¢ã€‚ é…ç½®é…ç½®ä¸­æ–‡ç•Œé¢ ç´¢å¼•ç…§ç‰‡è¿™ä¸ªè¿‡ç¨‹ä¼šè°ƒç”¨ TensorFlow è¿›è¡Œç…§ç‰‡çš„ AI è¯†åˆ«ï¼Œç„¶åè‡ªåŠ¨è¿›è¡Œåˆ†ç±»ï¼Œç…§ç‰‡å¦‚æœå¾ˆå¤šä¼šå¾ˆæ…¢ã€‚å¦‚æœåªæƒ³ç´¢å¼•æŸä¸€ä¸ªç›®å½•å°±ç‚¹å‡»å›¾ç‰‡ä¸­çš„åŒºåŸŸé€‰æ‹©æŒ‡å®šç›®å½•ï¼Œé€‰æ‹©ç›®å½•çš„è¿‡ç¨‹ä¼šåŠ è½½æ¯”è¾ƒæ…¢ï¼Œéœ€è¦ç­‰å¾…ã€‚ ä½¿ç”¨ç›¸å†Œç´¢å¼•å®Œæˆå°±å¯ä»¥ç‚¹å‡»æœç´¢è¿›è¡ŒæŸ¥çœ‹æ‰€æœ‰ç…§ç‰‡äº†ï¼š ç´¢å¼•è¿‡ç¨‹ä¼šæ ¹æ®ç…§ç‰‡çš„ Exif ä¿¡æ¯è‡ªåŠ¨åˆ†ç±»ï¼ŒåŒ…æ‹¬æ—¶é—´ä¸åœ°ç‚¹ã€‚åæ‚”ä»ç›¸æœºå¯¼å‡ºç…§ç‰‡æ—¶æŠŠåœ°ç‚¹æŠ¹å»äº†ã€‚ ç…§ç‰‡è¿˜æ˜¯å¾—åŠæ—¶æ•´ç†å‘€ï¼Œè¿™æˆåƒä¸Šä¸‡å¼ ç…§ç‰‡æŒ¨ä¸ªæ ‡è®°è¿˜æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå°±è¿™æ ·å§ï¼Œåšä¸ªå›¾ç‰‡å¢™ä¹Ÿä¸é”™ã€‚","categories":[],"tags":[]},{"title":"Docker éƒ¨ç½² Radarr åˆ®å‰Šç”µå½±","slug":"Dockeréƒ¨ç½²Radarråˆ®å‰Šç”µå½±","date":"2023-08-17T14:46:26.000Z","updated":"2023-08-29T14:25:28.986Z","comments":true,"path":"2023/08/17/Dockeréƒ¨ç½²Radarråˆ®å‰Šç”µå½±/","link":"","permalink":"http://example.com/2023/08/17/Docker%E9%83%A8%E7%BD%B2Radarr%E5%88%AE%E5%89%8A%E7%94%B5%E5%BD%B1/","excerpt":"","text":"docker-compose.yml1234567891011121314151617version: &quot;3.7&quot;services: radarr: container_name: radarr image: dockerproxy.com/linuxserver/radarr:latest ports: - &quot;7878:7878&quot; environment: - PUID=1000 - PGID=1000 - UMASK=002 - TZ=Asia/Shanghai volumes: - /root/sharedfolder/appdata/radarr:/config - /root/sharedfolder/media:/movies - /root/sharedfolder/downloads/qbittorrent:/downloads é…ç½®ä¸­æ–‡ç•Œé¢ï¼š å¯¼å…¥è§†é¢‘ï¼š","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"NAS","slug":"NAS","permalink":"http://example.com/tags/NAS/"},{"name":"Docker","slug":"Docker","permalink":"http://example.com/tags/Docker/"},{"name":"Radarr","slug":"Radarr","permalink":"http://example.com/tags/Radarr/"},{"name":"Docker-Compose","slug":"Docker-Compose","permalink":"http://example.com/tags/Docker-Compose/"}]},{"title":"SSH å…å¯†ç™»å½•","slug":"SSHå…å¯†ç™»å½•","date":"2023-08-12T01:22:56.000Z","updated":"2023-08-12T02:35:00.968Z","comments":true,"path":"2023/08/12/SSHå…å¯†ç™»å½•/","link":"","permalink":"http://example.com/2023/08/12/SSH%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/","excerpt":"","text":"ç”Ÿæˆå¯†é’¥å¯¹å®¿ä¸»æœºä»»æ„ä¸‹ç›®å½•æ‰§è¡Œï¼š 123456789101112131415161718192021$ ssh-keygen -t rsaGenerating public/private rsa key pair.Enter file in which to save the key (/home/user/.ssh/id_rsa): host2servera_id_rsaEnter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in host2servera_id_rsa.Your public key has been saved in host2servera_id_rsa.pub.The key fingerprint is:SHA256:OkWcw+R3x6Z2mzeYQuG033H3N9qIeym3TZKzz6YD8tQ user@ubuntu18The key&#x27;s randomart image is:+---[RSA 2048]----+| . || = . . || B .o. + || . oo.o+ || S ++ ..o|| o ..+.A=o=|| o +..B+=+|| . oo=@o+|| o=ss= |+----[SHA256]-----+ ä¸€ç›´å›è½¦ç¡®å®šï¼Œç”Ÿæˆå…¬ç§é’¥ï¼Œä¿å­˜åœ¨~/.sshç›®å½•ä¸‹ã€‚ æˆ‘åœ¨å®¿ä¸»æœºä¸Šç”Ÿæˆçš„å…¬ç§é’¥åç§°ä¸ºï¼Œåˆ†åˆ«æ˜¯host2servera_id_rsa,host2servera_id_rsa.pubæ–¹ä¾¿æˆ‘è®°å¿†ã€‚å¦‚æœä¸€ç›´å›è½¦ï¼Œé‚£ä¹ˆç”Ÿæˆçš„å…¬ç§é’¥åç§°ä¸ºid_rsaï¼Œid_rsa.pubã€‚ å‘é€å…¬é’¥å°†å…¬é’¥å¤åˆ¶åˆ°æœåŠ¡å™¨ ServerA ä¸Šï¼Œä»¥ IPï¼š10.12.193.53 ä¸ºä¾‹ã€‚ 12345678910$ ssh-copy-id 10.12.193.53# è¾“å…¥å¯†ç /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keysuser@10.12.193.53&#x27;s password: Number of key(s) added: 1Now try logging into the machine, with: &quot;ssh &#x27;10.12.193.53&#x27;&quot;and check to make sure that only the key(s) you wanted were added. é»˜è®¤æ˜¯æŠŠ ServerA çš„ç”¨æˆ·å½“åš user è¿›è¡Œç™»å½•ã€‚å¦‚æœæœ‰ç¡®å®šçš„ç”¨æˆ·å¦‚userAï¼Œå°±ä½¿ç”¨ssh-copy-id userA@10.12.193.53 ç„¶åå°±å¯ä»¥ç›´æ¥å…å¯†ç ç™»å½•äº†ï¼š 123ssh user@10.12.193.53# æˆ–è€…ssh userA@10.12.193.53 å¦‚æœè¿˜æ˜¯éœ€è¦è¾“å…¥å¯†ç ï¼Œå¯èƒ½ssh-agentæ²¡æœ‰å¯åŠ¨ï¼Œæ‰§è¡Œeval $(ssh-agent)å¯åŠ¨ssh-agentï¼Œç„¶åå†æ¬¡ç™»å½•å³å¯ã€‚ç„¶åå°†ç§é’¥æ·»åŠ åˆ°ssh-agentä¸­ï¼Œæ‰§è¡Œssh-add ~/.ssh/host2servera_id_rsaï¼Œç„¶åå†æ¬¡ç™»å½•å³å¯ã€‚ é…ç½®å¿«æ·ç™»å½•å³ä½¿å…å¯†ç™»å½•ï¼Œè¾“å…¥ä¸€é•¿ä¸² IP ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œèƒ½ä¸èƒ½é…ç½®æ›´ç®€å•çš„ç™»å½•æ–¹å¼ï¼Œæ¯”å¦‚ç»™æœåŠ¡å™¨èµ·ä¸ªåå­—å¦‚ServerAç›´æ¥ä½¿ç”¨ssh ServerAå°±ç™»å½•æœåŠ¡å™¨ï¼Œèƒ½ã€‚ æ‰“å¼€~/.ssh/configé…ç½®å¦‚ä¸‹å†…å®¹ï¼š 12345Host ServerA HostName 10.12.193.53 Port 22 User userA IdentityFile ~/.ssh/host2servera_id_rsa ç„¶åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ssh ServerAç™»å½•äº†ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"SSH,Linux","slug":"SSH-Linux","permalink":"http://example.com/tags/SSH-Linux/"}]},{"title":"QEMUå¸¸ç”¨å‘½ä»¤","slug":"QEMUå¸¸ç”¨å‘½ä»¤","date":"2023-08-06T09:22:12.000Z","updated":"2023-08-06T09:22:28.595Z","comments":true,"path":"2023/08/06/QEMUå¸¸ç”¨å‘½ä»¤/","link":"","permalink":"http://example.com/2023/08/06/QEMU%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"","text":"QEMU å¸¸ç”¨å‘½ä»¤æ€»ç»“QEMU æ˜¯ä¸€ä¸ªå¼€æºçš„è™šæ‹ŸåŒ–è½¯ä»¶ï¼Œå®ƒèƒ½å¤Ÿæ¨¡æ‹Ÿä¸åŒçš„ç¡¬ä»¶å¹³å°ï¼Œè®©ç”¨æˆ·åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¹‹é—´è¿›è¡Œåˆ‡æ¢å’Œæµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ QEMU å¸¸ç”¨å‘½ä»¤çš„æ€»ç»“æ–‡æ¡£ï¼ŒåŒ…å«æ¯ä¸ªå‘½ä»¤çš„åŠŸèƒ½è¯´æ˜ã€‚ å¯åŠ¨è™šæ‹Ÿæœºä»¥ä¸‹å‘½ä»¤ç”¨äºå¯åŠ¨è™šæ‹Ÿæœºï¼š 1qemu-system-x86_64 -boot d -cdrom /path/to/iso -m 1024 -hda /path/to/hda.img -boot dï¼šä» CD/DVD å¯åŠ¨ -cdrom /path/to/isoï¼šæŒ‡å®š ISO æ–‡ä»¶çš„è·¯å¾„ -m 1024ï¼šè®¾ç½®è™šæ‹Ÿæœºçš„å†…å­˜å¤§å°ä¸º 1024MB -hda /path/to/hda.imgï¼šæŒ‡å®šè™šæ‹Ÿç¡¬ç›˜çš„è·¯å¾„ å®‰è£…ç³»ç»Ÿè‡³ç£ç›˜123456789qemu-system-x86_64 \\ -cdrom ~/Downloads/ubuntu.iso \\ -drive file=ubuntu.qcow2 \\ -enable-kvm \\ -cpu host \\ -smp cores=2,threads=2 \\ -m 2G \\ -vga virtio \\ -display sdl,gl=on ç½‘ç»œé…ç½®ä»¥ä¸‹å‘½ä»¤ç”¨äºé…ç½®è™šæ‹Ÿæœºçš„ç½‘ç»œï¼š 1qemu-system-x86_64 -net nic -net user,hostfwd=tcp::2222-:22 -net nicï¼šå¯ç”¨è™šæ‹Ÿç½‘å¡ -net userï¼šä½¿ç”¨ç”¨æˆ·æ¨¡å¼ç½‘ç»œå †æ ˆ hostfwd=tcp::2222-:22ï¼šå°†ä¸»æœºçš„ 2222 ç«¯å£è½¬å‘åˆ°è™šæ‹Ÿæœºçš„ 22 ç«¯å£ è°ƒè¯•ä»¥ä¸‹å‘½ä»¤ç”¨äºå¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š 1qemu-system-x86_64 -s -S -sï¼šå¯ç”¨ GDB è°ƒè¯• -Sï¼šåœ¨å¯åŠ¨æ—¶æš‚åœè™šæ‹Ÿæœºï¼Œç­‰å¾…è°ƒè¯•å™¨è¿æ¥ å¿«ç…§ç®¡ç†123456# æ‹å¿«ç…§qemu-img snapshot -c oe-rv-snapshot1 openEuler-22.09-riscv64-qemu.qcow2# åˆ—ä¸¾å¿«ç…§qemu-img snapshot-l openEuler-22.09-riscv64-qemu.qcow2# æ¢å¤å¿«ç…§qemu-img snapshot -a my_snapshot mydisk.qcow2 æŸ¥çœ‹è™šæ‹Ÿç¡¬ç›˜ä¿¡æ¯1qemu-img info /path/to/image å°†è™šæ‹Ÿç¡¬ç›˜è½¬æ¢ä¸º QCOW2 æ ¼å¼1qemu-img convert -O qcow2 /path/to/image /path/to/new/image è°ƒæ•´ç£ç›˜å¤§å°1qemu-img resize ubuntu.qcow2 +5G æ˜¾ç¤ºå™¨é€‰é¡¹123qemu-system-x86_64 -vga stdqemu-system-x86_64 -display sdlqemu-system-x86_64 -display gtk -vga stdï¼šä½¿ç”¨æ ‡å‡† VGA æ˜¾ç¤ºå™¨ -display sdlï¼šä½¿ç”¨ SDL æ˜¾ç¤ºå™¨ -display gtkï¼šä½¿ç”¨ GTK æ˜¾ç¤ºå™¨ è¾“å…¥é€‰é¡¹123qemu-system-x86_64 -k en-usqemu-system-x86_64 -usbqemu-system-x86_64 -device usb-mouse -k en-usï¼šä½¿ç”¨è‹±æ–‡é”®ç›˜å¸ƒå±€ -usbï¼šå¯ç”¨ USB æ”¯æŒ -device usb-mouseï¼šä½¿ç”¨ USB é¼ æ ‡è®¾å¤‡ å£°éŸ³é€‰é¡¹ä»¥ä¸‹å‘½ä»¤ç”¨äºé…ç½®è™šæ‹Ÿæœºçš„å£°éŸ³ï¼š 123qemu-system-x86_64 -soundhw allqemu-system-x86_64 -soundhw sb16qemu-system-x86_64 -audiodev pa,id=pa1,out.mixing-engine=off -soundhw allï¼šå¯ç”¨æ‰€æœ‰å£°å¡ -soundhw sb16ï¼šå¯ç”¨ SoundBlaster 16 å£°å¡ -audiodev pa,id=pa1,out.mixing-engine=offï¼šä½¿ç”¨ PulseAudio å£°éŸ³è®¾å¤‡ USB è®¾å¤‡ç®¡ç†ä»¥ä¸‹å‘½ä»¤ç”¨äºç®¡ç†è™šæ‹Ÿæœºçš„ USB è®¾å¤‡ï¼š 123qemu-system-x86_64 -usbdevice host:1234:5678qemu-system-x86_64 -usbdevice tabletqemu-system-x86_64 -usbdevice keyboard -usbdevice host:1234:5678ï¼šå°†ä¸»æœºçš„ USB è®¾å¤‡ 1234:5678 åˆ†é…ç»™è™šæ‹Ÿæœº -usbdevice tabletï¼šä½¿ç”¨ USB è§¦æ‘¸æ¿ -usbdevice keyboardï¼šä½¿ç”¨ USB é”®ç›˜","categories":[],"tags":[{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"Linux ç½‘ç»œé…ç½®å¸¸ç”¨å‘½ä»¤","slug":"Linuxç½‘ç»œé…ç½®å¸¸ç”¨å‘½ä»¤","date":"2023-08-05T07:29:58.000Z","updated":"2023-08-29T14:22:37.953Z","comments":true,"path":"2023/08/05/Linuxç½‘ç»œé…ç½®å¸¸ç”¨å‘½ä»¤/","link":"","permalink":"http://example.com/2023/08/05/Linux%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"","text":"é…ç½®ç½‘æ¡¥ brctl123456789101112131415161718192021222324# åˆ›å»ºä¸€ä¸ªåä¸º br0 çš„ç½‘æ¡¥sudo brctl addbr br0# åˆ é™¤ç½‘æ¡¥ br0sudo brctl delbr br0# åˆ—å‡ºæ‰€æœ‰çš„ç½‘æ¡¥åŠå…¶æ¥å£ä¿¡æ¯sudo brctl show# å°†ç½‘ç»œæ¥å£ `eth0` æ·»åŠ åˆ°ç½‘æ¡¥ `br0` ä¸­sudo brctl addif br0 eth0# ä»ç½‘æ¡¥ `br0` ä¸­åˆ é™¤ç½‘ç»œæ¥å£ `eth0`sudo brctl delif br0 eth0### æ˜¾ç¤ºç½‘æ¡¥ `br0` çš„ Spanning Tree Protocol (STP)é…ç½®sudo brctl showstp br0# ç¦ç”¨ Linux å†…æ ¸ä¸­æ¡¥æ¥å™¨å¯¹æ•°æ®åŒ…è¿›è¡Œå¤„ç†æ—¶è°ƒç”¨ iptables çš„åŠŸèƒ½ã€‚è¿™ç§é…ç½®é€šå¸¸ç”¨äºæé«˜æ¡¥æ¥é€Ÿåº¦ï¼Œå‡å°‘æ¡¥æ¥è¿‡ç¨‹ä¸­çš„ CPU å¼€é”€ã€‚sudo sysctl net.bridge.bridge-nf-call-iptables=0sudo sysctl net.bridge.bridge-nf-call-iptables=0# ä¸ºè™šæ‹Ÿç½‘å¡è®¾ç½®IPå¹¶å¯åŠ¨sudo ifconfig tap0 192.168.2.1 up è™šæ‹Ÿç½‘ç»œè®¾å¤‡ tunctl1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162# åˆ›å»ºä¸€ä¸ªåä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡sudo tunctl -t tun0 # å°†è™šæ‹Ÿç½‘å¡è®¾ç½®ä¸ºä»»ä½•äººéƒ½æœ‰æƒé™ä½¿ç”¨ï¼šsudo chmod 0666 /dev/net/tun# åˆ é™¤åä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡sudo tunctl -d tun0# åˆ›å»ºåä¸ºtun0çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¹¶æŒ‡å®šå…¶æ‹¥æœ‰è€…å’Œç»„sudo tunctl -u user -g group -t tun0# åˆ—å‡ºæ‰€æœ‰æ´»è·ƒçš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡åŠå…¶æ¥å£ä¿¡æ¯sudo tunctl -s # æŒ‡å®šè™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€sudo tunctl -m [mac_address] -t tun0# åˆ—å‡ºå…·æœ‰ç»™å®šè®¾å¤‡åç§°å‰ç¼€çš„æ‰€æœ‰å·²åˆ†é…çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡sudo tunctl -g [device_name_prefix]# åˆ†é…è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå°†ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºsudo tunctl -p -t tun0# å°†è™šæ‹Ÿç½‘ç»œè®¾å¤‡å…³è”åˆ°ç°æœ‰çš„æ¡¥æ¥è®¾å¤‡sudo tunctl -b -t tun0 -g br0# ä»ç°æœ‰è™šæ‹Ÿç½‘ç»œè®¾å¤‡è§£é™¤å…³è”sudo tunctl -B -t tun0# æŒ‡å®šè™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„æœ€å¤§ä¼ è¾“å•å…ƒ(MTU)sudo ip link set tun0 mtu [value]# å¯ç”¨è™šæ‹Ÿç½‘ç»œè®¾å¤‡sudo ip link set tun0 up# ç¦ç”¨è™šæ‹Ÿç½‘ç»œè®¾å¤‡sudo ip link set tun0 down# æ˜¾ç¤ºç”±Linuxå†…æ ¸ç®¡ç†çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„çŠ¶æ€ä¿¡æ¯sudo ip link show tun0# ä¿®æ”¹è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€sudo ip link set dev tun0 address [mac_address]# ä¸ºè™šæ‹Ÿç½‘ç»œè®¾å¤‡åˆ†é…ä¸€ä¸ªIPv4åœ°å€sudo ip addr add [ip_address/cidr] dev tun0# ä»è™šæ‹Ÿç½‘ç»œè®¾å¤‡ä¸­åˆ é™¤ä¸€ä¸ªIPv4åœ°å€sudo ip addr del [ip_address/cidr] dev tun0# æ£€æŸ¥è™šæ‹Ÿç½‘ç»œè®¾å¤‡æ˜¯å¦å·²åˆ†é…IPv4åœ°å€ip addr show tun0 | grep inet# ä½¿ç”¨DLADDRå‘½ä»¤è·å–è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„MACåœ°å€sudo ethtool -P tun0 # åˆ—å‡ºå½“å‰æ‰€æœ‰æ´»åŠ¨çš„ç½‘ç»œæ¥å£ip a # æ£€æŸ¥è™šæ‹Ÿç½‘ç»œè®¾å¤‡æ˜¯å¦å·²åˆ†é…IPv6åœ°å€ip addr show tun0 | grep inet6 ç½‘ç»œæ¥å£ç®¡ç†ï¼ˆifconfigï¼‰123456789101112131415161718192021222324# æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£ä¿¡æ¯ifconfig -a# æ¿€æ´»æŒ‡å®šæ¥å£(å¦‚ eth0)ifconfig eth0 up# å…³é—­æŒ‡å®šæ¥å£(å¦‚ eth0)ifconfig eth0 down# æ·»åŠ  IP åœ°å€ï¼Œä¾‹å¦‚æ·»åŠ  IP åœ°å€ä¸º 192.168.2.100 çš„ç½‘å¡ eth0ifconfig eth0 192.168.2.100 netmask 255.255.255.0 up# åˆ é™¤ IP åœ°å€ï¼Œä¾‹å¦‚åˆ é™¤ç½‘å¡ eth0 ä¸Šçš„ IP åœ°å€ifconfig eth0 0.0.0.0# å¯ç”¨æˆ–ç¦ç”¨å¹¿æ’­åœ°å€ifconfig eth0 broadcast 192.168.2.255 upifconfig eth0 -broadcast# è®¾ç½®ç½‘å¡ mtu å¤§å°ä¸º 9000ifconfig eth0 mtu 9000# å¢åŠ ä¸€ä¸ªè™šæ‹Ÿç½‘ç»œæ¥å£ eth0:1ï¼Œå¹¶é…ç½® IP åœ°å€ä¸º 192.168.2.100ifconfig eth0:1 192.168.2.100 netmask 255.255.255.0 up è·¯ç”±ç®¡ç†ï¼ˆrouteï¼‰1234567891011121314151617181920# æ˜¾ç¤ºå½“å‰è·¯ç”±è¡¨route -n# æ·»åŠ é»˜è®¤è·¯ç”±route add default gw 192.168.2.1# åˆ é™¤é»˜è®¤è·¯ç”±route del default# å¢åŠ ä¸€ä¸ªåˆ°ç›®æ ‡ç½‘ç»œçš„é™æ€è·¯ç”±route add -net 192.168.100.0 netmask 255.255.255.0 gw 192.168.2.1# åˆ é™¤é™æ€è·¯ç”±route del -net 192.168.100.0 netmask 255.255.255.0 gw 192.168.2.1# æ¸…é™¤æ‰€æœ‰è·¯ç”±ç¼“å­˜é¡¹route flush cache# æŸ¥çœ‹ IP åœ°å€å¯¹åº”ç½‘å¡æ¥å£çš„ MAC åœ°å€arping -I eth0 192.168.2.1 DNS è§£æï¼ˆnslookup å’Œ digï¼‰1234567891011121314# ä½¿ç”¨åŸŸåæœåŠ¡å™¨è§£æåŸŸånslookup www.example.com# æŒ‡å®šåŸŸåæœåŠ¡å™¨ï¼Œå¹¶è§£æåŸŸånslookup www.example.com 8.8.8.8# æŸ¥è¯¢DNSåœ°å€dig example.com +nssearch# æŸ¥è¯¢æ‰€æœ‰çš„ NS è®°å½•dig example.com NS# æŸ¥è¯¢æŸä¸ªåŸŸåçš„ MX è®°å½•dig example.com MX ç½‘ç»œè¯Šæ–­å·¥å…·ï¼ˆping å’Œ tracerouteï¼‰1234567891011# æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºä¹‹é—´çš„è¿é€šæ€§ï¼ŒæŸ¥çœ‹ç½‘ç»œæ˜¯å¦å¯è¾¾ping 192.168.2.1# ping å‘½ä»¤çš„é«˜çº§é€‰é¡¹ï¼Œæ§åˆ¶å‘é€çš„æ•°æ®åŒ…æ•°é‡ã€å¤§å°å’Œæ—¶é—´é—´éš”ç­‰å‚æ•°ping -c 5 -s 100 -i 1 192.168.2.1# æ˜¾ç¤ºæ•°æ®åŒ…åœ¨ç½‘ç»œä¸Šçš„ä¼ è¾“è·¯å¾„ï¼Œæ£€æµ‹ç½‘ç»œæ•…éšœtraceroute www.google.com# æ˜¾ç¤ºæ¯ä¸€è·³æ‰€ç»è¿‡çš„è·¯ç”±å™¨åç§°å’Œ IP åœ°å€traceroute -n www.google.com ç½‘ç»œæµé‡åˆ†æå·¥å…·ï¼ˆtcpdump å’Œ wiresharkï¼‰1234567891011121314# ç›‘å¬æŒ‡å®šçš„ç½‘ç»œæ¥å£ä¸Šçš„æ•°æ®åŒ…ï¼Œæ˜¾ç¤ºæ¯ä¸ªæ•°æ®åŒ…çš„è¯¦ç»†ä¿¡æ¯tcpdump -i eth0# ç›‘å¬æŒ‡å®šç«¯å£ä¸Šçš„æ•°æ®åŒ…tcpdump port 80# æ˜¾ç¤ºä»æŒ‡å®šæºåœ°å€åˆ°ç›®æ ‡åœ°å€çš„æ‰€æœ‰ç½‘ç»œæµé‡tcpdump src 192.168.2.100 and dst 192.168.2.200# æ˜¾ç¤ºæ‰€æœ‰ IP æµé‡ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°æ–‡ä»¶ tcp.pcap ä¸­ï¼Œä»¥ä¾¿ä½¿ç”¨ Wireshark åˆ†ætcpdump -i eth0 -w tcp.pcap ip# å›¾å½¢åŒ–çš„ç½‘ç»œåè®®åˆ†æå·¥å…·ï¼Œç”¨äºåˆ†æç½‘ç»œæµé‡wireshark å…¶ä»–å‘½ä»¤123456789101112131415161718# æ˜¾ç¤ºç½‘ç»œè¿æ¥çŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯netstat -an# æ˜¾ç¤º TCP/IP é…ç½®å‚æ•°sysctl net.ipv4.tcp_*# è®¾ç½® TCP/IP å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½® SYN æ”»å‡»ä¿æŠ¤sysctl -w net.ipv4.tcp_syncookies=1# é‡æ–°åŠ è½½ /etc/resolv.conf æ–‡ä»¶systemd-resolve --flush-caches# æ˜¾ç¤ºå½“å‰ DNS æœåŠ¡å™¨systemd-resolve --status | grep &#x27;DNS Servers&#x27;# é‡å¯ç½‘ç»œsystemctl restart NetworkManager","categories":[],"tags":[{"name":"Linux,ç½‘ç»œé…ç½®","slug":"Linux-ç½‘ç»œé…ç½®","permalink":"http://example.com/tags/Linux-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/"}]},{"title":"QEMU è™šæ‹Ÿæœºç½‘ç»œé…ç½®","slug":"QEMUè™šæ‹Ÿæœºç½‘ç»œé…ç½®","date":"2023-08-05T06:47:54.000Z","updated":"2023-08-29T14:23:32.012Z","comments":true,"path":"2023/08/05/QEMUè™šæ‹Ÿæœºç½‘ç»œé…ç½®/","link":"","permalink":"http://example.com/2023/08/05/QEMU%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/","excerpt":"","text":"Quick Setupå®‰è£…å·¥å…·å®‰è£…ä¸¤ä¸ªç½‘ç»œç®¡ç†å·¥å…·ç”¨äºå»ºç«‹ç½‘æ¡¥ä»¥åŠè™šæ‹Ÿç½‘å¡ï¼š 1234# å®‰è£…è™šæ‹Ÿç½‘æ¡¥å·¥å…·sudo apt install bridge-utils -y# UMLï¼ˆUser-mode linuxï¼‰å·¥å…· sudo apt install uml-utilities -y é…ç½®è„šæœ¬qemu-ifupå°†ä¸‹é¢çš„è„šæœ¬ä¿å­˜ä¸ºæ–‡ä»¶ qemu-ifupï¼Œå¹¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼š ä¸ºäº†æ–¹ä¾¿å¤åˆ¶è„šæœ¬ï¼Œåœ¨ confluence é¡µé¢æä¾›äº†è„šæœ¬å†…å®¹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ã€‚ 1234mkdir -p /etc/qemumv qemu-ifup /etc/qemu &amp;&amp; mv qemu-ifdown /etc/qemu sudo chmod +x qemu-ifupsudo chmod +x qemu-ifdown å› ä¸ºç½‘å¡ä¿¡æ¯ä¸å®¹æ˜“å®šä½ï¼Œå¯èƒ½ä¸€å°æœºå™¨æœ‰å¤šä¸ªç½‘å¡ï¼Œæ‰€ä»¥ä¸æ–¹ä¾¿ç”¨è„šæœ¬è·å–ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹ã€‚å°†ä¸‹é¢çš„NICå€¼ä¿®æ”¹ä¸ºå®¿ä¸»æœºå¯ä»¥ä¸Šç½‘çš„ç½‘å¡åç§°ã€‚å¯ä»¥é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576#!/bin/bash# è®¾ç½®é»˜è®¤ç½‘å¡ä¿¡æ¯NIC=enp2s0# è®¾ç½®ç”¨æˆ·åUSER_NAME=user# è®¾ç½®ç½‘æ¡¥åç§°BRIDGE=br0# è®¾ç½®ç½‘ç»œä¿¡æ¯NIC_IP=$(ifconfig $NIC | grep &quot;inet\\b&quot; | awk &#x27;&#123;print $2&#125;&#x27;)NIC_NETMAST=$(ifconfig $NIC | grep &quot;inet\\b&quot; | awk &#x27;&#123;print $4&#125;&#x27;)NIC_BROADCAST=$(ifconfig $NIC | grep &quot;inet\\b&quot; | awk &#x27;&#123;print $6&#125;&#x27;)NETMASK=255.255.240.0# è®¾ç½®é»˜è®¤ç½‘å…³åœ°å€GATEWAY=10.12.192.1# è·å–å®¿ä¸»æœºç½‘å¡MACåœ°å€ï¼Œå› ä¸ºåˆ›å»ºçš„ç½‘æ¡¥MACåœ°å€æ˜¯éšæœºçš„ï¼Œ# æ— æ³•æ¥å…¥å…¬å¸ï¼Œéœ€è¦ä»å¼€å‘æœºç½‘å¡å°†å…¶MACåœ°å€èµ‹å€¼ç»™ç½‘æ¡¥MAC=$(ifconfig $NIC | grep &quot;ether\\b&quot; | awk &#x27;&#123;print $2&#125;&#x27;)# æ£€æŸ¥ç½‘æ¡¥æ˜¯å¦å·²åˆ›å»ºï¼Œå·²åˆ›å»ºå°±å¿½ç•¥function check_bridge() &#123; echO &quot;Check bridge...&quot; if brctl show | grep &quot;^$BRIDGE&quot; &amp;&gt; /dev/null; then return 1 else return 0 fi&#125;# åˆ›å»ºç½‘æ¡¥function create_bridge() &#123; echo &quot;Start Create bridge...&quot; brctl addbr &quot;$BRIDGE&quot; brctl addif &quot;$BRIDGE&quot; &quot;$NIC&quot; ifconfig br0 0.0.0.0 promisc up dhclient $BRIDGE&#125;# ifconfig &quot;$BRIDGE&quot; &quot;$NIC_IP&quot; netmask &quot;$NIC_NETMAST&quot; broadcast &quot;$NIC_BROADCAST&quot; hw ether &quot;$MAC&quot; promisc up# å¯ç”¨IPè½¬å‘function enable_ip_forward() &#123; echo 1 &gt; /proc/sys/net/ipv4/ip_forward&#125;# è®¾ç½®ç½‘æ¡¥function setup_bridge()&#123; check_bridge &quot;$BRIDGE&quot; if [ $? -eq 0 ]; then create_bridge fi enable_ip_forward&#125;if [ -n &quot;$1&quot; ]; then setup_bridge echo &quot;Creating $1...&quot; tunctl -t &quot;$1&quot; -u &quot;$USER_NAME&quot; ifconfig &quot;$1&quot; 0.0.0.0 up echo &quot;Adding $1 to $BRIDGE...&quot; brctl addif &quot;$BRIDGE&quot; &quot;$1&quot; sleep 5 ifconfig &quot;$BRIDGE&quot; hw ether &quot;$MAC&quot; promisc up exit 0else echo &quot;Error: no interface specified.&quot; exit 1fi qemu-ifdownä»¥ä¸‹æ˜¯qemu-ifdownè„šæœ¬ï¼Œç”¨äºåœ¨å…³é—­ QEMU æ—¶å…³é—­è™šæ‹Ÿç½‘å¡ï¼Œå°†å…¶ä»ç½‘æ¡¥ä¸­ç§»é™¤ï¼Œåˆ é™¤è™šæ‹Ÿç½‘å¡ã€‚ 1234567891011121314151617#!/bin/bash# è®¾ç½®ç½‘æ¡¥åç§°BRIDGE=br0if [ -n &quot;$1&quot; ]; then # å°†tapè®¾å¤‡ä»ç½‘æ¡¥ä¸­ç§»é™¤ brctl delif $&#123;BRIDGE&#125; $1 # å…³é—­tapè®¾å¤‡ ip link link $1 down # åˆ é™¤tapè®¾å¤‡ ip link del &quot;$1&quot; tunctl -d &quot;$1&quot; exit 0else echo &quot;Error: no interface specified&quot; exit 1fi å°†ç³»ç»Ÿé•œåƒå¤åˆ¶ä¸€ä»½å¹¶ä¿®æ”¹æ–‡ä»¶åï¼ŒQEMU ä¸èƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªé•œåƒå¯åŠ¨ä¸¤ä¸ªè™šæ‹Ÿæœºã€‚ 1cp openEuler-22.09-riscv64-qemu.qcow2 openEuler-22.09-riscv64-qemu-vm1.qcow2 éœ€è¦ä¿®æ”¹å¯åŠ¨è„šæœ¬ä¸­çš„é•œåƒæ–‡ä»¶åï¼Œä»¥åŠå¯åŠ¨å‚æ•°ï¼Œå°†driveä»¥åŠcmdå˜é‡çš„å†…å®¹è¦†ç›–ä¸ºä¸‹é¢çš„å†…å®¹ï¼Œä¿®æ”¹macä¸ºåˆ†é…ç»™è‡ªå·±çš„è™šæ‹Ÿæœºçš„ MAC åœ°å€ï¼Œscriptä¸ºä¸Šé¢çš„è„šæœ¬qemu-ifupçš„è·¯å¾„ã€‚ 123456789101112131415# è¯¥è„šæœ¬ç”¨äºå¯åŠ¨VM0drive=&quot;openEuler-22.09-riscv64-qemu.qcow2&quot;....cmd=&quot;qemu-system-riscv64 \\ -nographic -machine virt \\ -smp &quot;$vcpu&quot; -m &quot;$memory&quot;G \\ -bios &quot;$fw&quot; \\ -drive file=&quot;$drive&quot;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,script=/etc/qemu/qemu-ifup,downscript=/etc/qemu/qemu-ifdown \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet&quot; ä»¥sudoæƒé™å¯åŠ¨è„šæœ¬ï¼š 1sudo ./preview_start_vm0.sh ä»¥ä¸‹ä¸ºé…ç½® VM1 è¿‡ç¨‹ï¼ŒVM1 çš„å¯åŠ¨è„šæœ¬ä¸ VM0 çš„å¯åŠ¨è„šæœ¬ç±»ä¼¼ï¼Œåªéœ€è¦ä¿®æ”¹driveä»¥åŠMACï¼Œå¿…é¡»ä¿è¯MACä¸ VM0 çš„MACä¸åŒã€‚ 123456789101112131415# è¯¥è„šæœ¬ç”¨äºå¯åŠ¨VM1drive=&quot;openEuler-22.09-riscv64-qemu.qcow2&quot;....cmd=&quot;qemu-system-riscv64 \\ -nographic -machine virt \\ -smp &quot;$vcpu&quot; -m &quot;$memory&quot;G \\ -bios &quot;$fw&quot; \\ -drive file=&quot;$drive&quot;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet,mac=80:d4:09:62:cd:3c \\ -netdev tap,id=tapnet,script=/etc/qemu/qemu-ifup,downscript=/etc/qemu/qemu-ifdown \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet&quot; ç½‘ç»œé€šä¿¡æµ‹è¯•å½“å‰ç½‘ç»œçŠ¶æ€å¦‚ä¸‹ï¼š 123HOST:10.12.192.177VM0:10.12.193.53VM1:10.12.193.101 HOST â€“&gt; VM012345678910# user @ ubuntu18 in ~/openeuler/openEuler2209 [18:41:54] $ ping -c 3 10.12.193.101PING 10.12.193.101 (10.12.193.101) 56(84) bytes of data.64 bytes from 10.12.193.101: icmp_seq=1 ttl=64 time=1.37 ms64 bytes from 10.12.193.101: icmp_seq=2 ttl=64 time=0.897 ms64 bytes from 10.12.193.101: icmp_seq=3 ttl=64 time=0.890 ms--- 10.12.193.101 ping statistics ---3 packets transmitted, 3 received, 0% packet loss, time 2002msrtt min/avg/max/mdev = 0.890/1.055/1.378/0.228 ms Host â€“&gt; VM1 çš„æµ‹è¯•ç»“æœä¸ Host â€“&gt; VM0 çš„æµ‹è¯•ç»“æœç›¸åŒã€‚ VM0 â€“&gt; HOST123456789[root@openEuler-riscv64 ~]# ping -c 3 10.12.193.53 PING 10.12.193.53 (10.12.193.53) 56(84) bytes of data.64 bytes from 10.12.193.53: icmp_seq=1 ttl=64 time=0.716 ms64 bytes from 10.12.193.53: icmp_seq=2 ttl=64 time=1.74 ms64 bytes from 10.12.193.53: icmp_seq=3 ttl=64 time=1.81 ms--- 10.12.193.53 ping statistics ---3 packets transmitted, 3 received, 0% packet loss, time 2009msrtt min/avg/max/mdev = 0.716/1.424/1.812/0.501 ms VM1 â€“&gt; Host çš„æµ‹è¯•ç»“æœä¸ Host â€“&gt; VM0 çš„æµ‹è¯•ç»“æœç›¸åŒã€‚ VM1 â€“&gt; VM0123456789[root@openEuler-riscv64 ~]# ping -c 3 10.12.193.53 PING 10.12.193.53 (10.12.193.53) 56(84) bytes of data.64 bytes from 10.12.193.53: icmp_seq=1 ttl=64 time=0.716 ms64 bytes from 10.12.193.53: icmp_seq=2 ttl=64 time=1.74 ms64 bytes from 10.12.193.53: icmp_seq=3 ttl=64 time=1.81 ms--- 10.12.193.53 ping statistics ---3 packets transmitted, 3 received, 0% packet loss, time 2009msrtt min/avg/max/mdev = 0.716/1.424/1.812/0.501 ms VM0 â€“&gt; VM1 ä¸ VM1 â€“&gt; VM0 çš„æµ‹è¯•ç»“æœç›¸åŒã€‚ VM0 â€“&gt; github12345678910[root@openEuler-riscv64 ~]# ping -c 4 github.comPING github.com (192.30.255.113) 56(84) bytes of data.64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=1 ttl=46 time=221 ms64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=2 ttl=46 time=277 ms64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=3 ttl=46 time=216 ms64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=4 ttl=46 time=218 ms--- github.com ping statistics ---4 packets transmitted, 4 received, 0% packet loss, time 3014msrtt min/avg/max/mdev = 215.984/232.733/276.593/25.374 ms HOST â€“&gt; github12345678910# user @ ubuntu18 in ~/openeuler/openEuler2209 [17:59:40] $ ping -c 3 github.comPING github.com (192.30.255.113) 56(84) bytes of data.64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=1 ttl=46 time=218 ms64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=2 ttl=46 time=216 ms64 bytes from lb-192-30-255-113-sea.github.com (192.30.255.113): icmp_seq=3 ttl=46 time=216 ms--- github.com ping statistics ---3 packets transmitted, 3 received, 0% packet loss, time 2002msrtt min/avg/max/mdev = 216.252/217.087/218.409/0.945 ms åŸç†æ¢ç©¶ (Ongoing)Step by Step è§£ææŸ¥çœ‹ä¸€ä¸‹ç½‘ç»œæ¥å£ä¿¡æ¯ï¼š 1234567891011121314151617ifconfigenp3s0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 10.12.192.173 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::a00:27ff:fe32:e709 prefixlen 64 scopeid 0x20&lt;link&gt; ether 08:00:27:32:e7:09 txqueuelen 1000 (Ethernet) RX packets 6017 bytes 5412928 (5.4 MB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 1979 bytes 179467 (179.4 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10&lt;host&gt; loop txqueuelen 1000 (Local Loopback) RX packets 125 bytes 10142 (10.1 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 125 bytes 10142 (10.1 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 åˆ›å»ºä¸€ä¸ªåä¸ºbr0çš„ç½‘æ¡¥ 1sudo brctl addbr br0 å°†ç½‘æ¡¥ä¸å®¿ä¸»æœºçš„ç½‘å¡ç»‘å®š 1sudo brctl addif br0 enp3s0 å¯ç”¨ br0 æ¥å£ï¼Œå¹¶ä» DHCP æœåŠ¡å™¨è·å¾— IP åœ°å€ 12sudo ifconfig br0 0.0.0.0 promisc upsudo dhclient br0 æŸ¥çœ‹è™šæ‹Ÿç½‘æ¡¥åˆ—è¡¨ 1234sudo brctl show br0bridge name bridge id STP enabled interfacesbr0 8000.e0be0388eec9 no enp3s0 æŸ¥çœ‹ br0 çš„å„æ¥å£ä¿¡æ¯ 123456789101112131415161718192021222324sudo brctl showstp br0br0 bridge id 8000.e0be0388eec9 designated root 8000.e0be0388eec9 root port 0 path cost 0 max age 20.00s forward delay 15.00s hello time 2.00s ageing time 300.00s hello timer 0.00s &lt;tbd&gt; forward timer 0.00s &lt;tbd&gt; ageing timer 0.00s &lt;tbd&gt; enp3s0 (1) port id 8001 local state forwarding designated root 8000.08002732e709 path cost 100 designated bridge 8000.08002732e709 designated port 8001 forward delay 15.00s hello time 2.00s max age 20.00s ageing time 300.00s priority 128 å½“å‰ç½‘ç»œæ‹“æ‰‘ï¼š 12345678910111213141516 +-----------------------------------+ | Internet | +-----------------------------------+ | | v+---------------------------------------------------------+| enp3s0 (Host Interface) || IP: 10.12.192.173 |+---------------------------------------------------------+ | v+---------------------------------------------------------+| br0 (Bridge) || IP: 10.12.192.173 |+---------------------------------------------------------+ åˆ›å»ºä¸€ä¸ª tap0 æ¥å£ç”¨äºVM0ä½¿ç”¨ï¼Œå…è®¸ user ç”¨æˆ·è®¿é—® 1sudo tunctl -t tap0 -u user åœ¨è™šæ‹Ÿç½‘æ¡¥ä¸­å¢åŠ  tap0 æ¥å£ 1234567sudo brctl addif br0 tap0``` å¯ç”¨ tap0 æ¥å£ï¼Œæ··æ‚æ¨¡å¼```bashsudo ifconfig tap0 0.0.0.0 promisc up å°†ç½‘æ¡¥çš„ MAC åœ°å€ä¿®æ”¹ä¸ºå®¿ä¸»æœºçš„ MAC åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥æ¥å…¥å…¬å¸ç½‘ç»œäº†ã€‚å¦åˆ™å› ä¸ºå†…ç½‘çš„ MAC åœ°å€è¿‡æ»¤ï¼Œæ— æ³•æ¥å…¥å…¬å¸ç½‘ç»œã€‚ 1ifconfig br0 hw ether 08:00:27:32:e7:09 promisc up æŸ¥çœ‹è™šæ‹Ÿç½‘æ¡¥åˆ—è¡¨ 12345$ sudo brctl show br0bridge name bridge id STP enabled interfacesbr0 8000.08002732e709 no enp3s0 tap0 æŸ¥çœ‹å½“å‰çš„ç½‘æ¡¥çŠ¶æ€ï¼š 1234567891011121314151617181920212223242526272829$ sudo brctl showstp br0 br0 bridge id 8000.08002732e709 designated root 8000.08002732e709 root port 0 path cost 0 max age 20.00 bridge max age 20.00 hello time 2.00 bridge hello time 2.00 forward delay 15.00 bridge forward delay 15.00 ageing time 300.00 hello timer 0.00 tcn timer 0.00 topology change timer 0.00 gc timer 7.75 flags enp2s0 (1) port id 8001 state forwarding designated root 8000.08002732e709 path cost 4 designated bridge 8000.08002732e709 message age timer 0.00 designated port 8001 forward delay timer 0.00 designated cost 0 hold timer 0.00 flags tap0 (2) port id 8002 state disabled designated root 8000.08002732e709 path cost 100 designated bridge 8000.08002732e709 message age timer 0.00 designated port 8002 forward delay timer 0.00 designated cost 0 hold timer 0.00 flags tap0å¯èƒ½å¤„äºdisabledçŠ¶æ€ï¼Œå› ä¸ºè¿˜æ²¡æœ‰è™šæ‹Ÿæœºä½¿ç”¨å®ƒã€‚å¯åŠ¨è™šæ‹Ÿæœºä¹‹åä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°forwardingçŠ¶æ€ã€‚ å½“å‰ç½‘ç»œæ‹“æ‰‘ï¼š 12345678910111213141516171819 +-----------------------------------+ | Internet | +-----------------------------------+ | | v+---------------------------------------------------------+| enp3s0 (Host Interface) || IP: 10.12.192.173 |+---------------------------------------------------------+ | v+---------------------------------------------------------+| br0 (Bridge) || IP: 10.12.192.173 || +---------------------+ || | tap0 | || | IP: 0.0.0.0 | |+---------------------------------------------------------+ å¯åŠ¨ QEMU 123456789101112cmd=&quot;qemu-system-riscv64 \\ -nographic -machine virt \\ -smp &quot;$vcpu&quot; -m &quot;$memory&quot;G \\ -bios &quot;$fw&quot; \\ -drive file=&quot;$drive&quot;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,ifname=tap0,script=no,downscript=no \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet&quot; å…³æ³¨è¿™æ®µè„šæœ¬çš„ç½‘ç»œé…ç½®éƒ¨åˆ†ï¼š 12-device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\-netdev tap,id=tapnet,ifname=tap0,script=no,downscript=no \\ è¯¦ç»†è§£é‡Šå¯ä»¥æŸ¥çœ‹â€œQEMU ç½‘ç»œè™šæ‹ŸåŒ–ç« èŠ‚â€ï¼Œç¬¬ä¸€ä¸ªå‚æ•° -device virtio-net-device å®šä¹‰äº†åä¸º virtio-net-device çš„ç½‘ç»œè®¾å¤‡ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ä¸€ä¸ªåä¸º tapnet çš„ç½‘ç»œè®¾å¤‡ä¸Šï¼ŒæŒ‡å®šå®ƒçš„ MAC åœ°å€ä¸º e0:be:03:88:54:e8ã€‚ç¬¬äºŒä¸ªå‚æ•° -netdev tap ç”¨äºæŒ‡å®šåç«¯å®ç°ï¼Œä½¿ç”¨tapæ–¹å¼ï¼Œå¹¶ä¸”æŒ‡å®šå”¯ä¸€ ID ä¸ºtapnetç”±-deviceå‚æ•°ä¸­çš„å­å‚æ•°netdevä½¿ç”¨ï¼ŒæŒ‡å®šifname=tap0ï¼Œè¡¨ç¤ºä½¿ç”¨tap0æ¥å£ä½œä¸ºè™šæ‹ŸåŒ–çš„åç«¯ã€‚script=noå’Œdownscript=noè¡¨ç¤ºä¸ä½¿ç”¨è„šæœ¬æ¥å¯åŠ¨å’Œå…³é—­tap0æ¥å£ã€‚ æŸ¥çœ‹å½“å‰çš„ç½‘ç»œæ¥å£ä¿¡æ¯ifconfigï¼š 12345678910111213141516171819202122232425262728293031323334br0: flags=4419&lt;UP,BROADCAST,RUNNING,PROMISC,MULTICAST&gt; mtu 1500 inet 10.12.192.173 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::e2be:3ff:fe88:eec9 prefixlen 64 scopeid 0x20&lt;link&gt; ether 08:00:27:32:e7:09 txqueuelen 1000 (Ethernet) RX packets 861148 bytes 310707296 (310.7 MB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 17556062 bytes 1516515693 (1.5 GB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0enp2s0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 10.12.192.173 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::4964:61f8:420d:6781 prefixlen 64 scopeid 0x20&lt;link&gt; ether 08:00:27:32:e7:09 txqueuelen 1000 (Ethernet) RX packets 894523 bytes 325547917 (325.5 MB) RX errors 0 dropped 1926 overruns 0 frame 0 TX packets 17563568 bytes 1516947572 (1.5 GB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10&lt;host&gt; loop txqueuelen 1000 (Local Loopback) RX packets 1654925876 bytes 134933568498 (134.9 GB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 1654925876 bytes 134933568498 (134.9 GB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0tap0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet6 fe80::f8ae:85ff:fed7:f9cd prefixlen 64 scopeid 0x20&lt;link&gt; ether fa:ae:85:d7:f9:cd txqueuelen 1000 (Ethernet) RX packets 557 bytes 44913 (44.9 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 7165 bytes 832171 (832.1 KB) TX errors 0 dropped 55942 overruns 0 carrier 0 collisions 0 å½“å‰ç½‘ç»œæ‹“æ‰‘ï¼š 123456789101112131415161718192021222324252627 +-----------------------------------+ | Internet | +-----------------------------------+ | | v+---------------------------------------------------------+| enp3s0 (Host Interface) || IP: 10.12.192.173 |+---------------------------------------------------------+ | v+---------------------------------------------------------+| br0 (Bridge) || IP: 10.12.192.173 || +---------------------+ || | tap0 | || | IP: 0.0.0.0 | |+---------------------------|-----------------------------+ | v+---------------------------|-----------------------------+| | eth0 | || | IP:10.12.193.53 | || +---------------------+ || VM0 (QEMU) |+---------------------------------------------------------+ æŸ¥çœ‹å½“å‰çš„ç½‘æ¡¥çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ° tap0 å·²ç»å¤„äº forwarding çŠ¶æ€ï¼š 123456789101112131415$ sudo brctl showstp br0 br0 bridge id 8000.08002732e709 designated root 8000.08002732e709enp2s0 (1) port id 8001 state forwarding designated root 8000.08002732e709 path cost 4 designated bridge 8000.08002732e709 message age tap0 (2) port id 8002 state forwarding designated root 8000.08002732e709 path cost 100 designated bridge 8000.08002732e709 message age æ·»åŠ  VM1 è¿‡ç¨‹å°±å¿½ç•¥äº†ï¼Œæ·»åŠ åçš„ç½‘ç»œæ‹“æ‰‘å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627 +-----------------------------------+ | Internet | +-----------------------------------+ | | v+---------------------------------------------------------+| enp3s0 (Host Interface) || IP: 10.12.192.173 |+---------------------------------------------------------+ | v+---------------------------------------------------------+| br0 (Bridge) || IP: 10.12.192.173 || +---------------------+ +-------------------+ || | tap0 | | tap1 | || | IP: 0.0.0.0 | | IP: 0.0.0.0 | |+---------------|-------------------------|---------------+ | | v v+---------------|----------+ +-----------|---------------+| | eth0 | | | | eth0 | || | IP:10.12.193.53 | | | | IP:10.12.193.101 | || +---------------------+| | +-------------------+ || VM0 (QEMU) | | VM1 (QEMU) |+--------------------------+ +---------------------------+ QEMU ç½‘ç»œè™šæ‹ŸåŒ–QEMU å¯¹äºç½‘ç»œçš„è™šæ‹ŸåŒ–éœ€è¦ä¸¤ä¸ªå‚æ•°æ¥æŒ‡å®šï¼š å…¶ä¸­ä¸€ä¸ªç”¨äºæŒ‡å®šç½‘ç»œçš„å‰ç«¯é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Guest ä¸­çš„å®ç° å¦ä¸€ä¸ªç”¨äºæŒ‡å®šç½‘ç»œçš„åç«¯å®ç°ï¼Œä¹Ÿå°±æ˜¯åœ¨ Host ä¸­çš„å®ç°ã€‚ QEMU æ”¯æŒä¸¤ç§æ–¹å¼æ¥å®ç°ç½‘ç»œè™šæ‹ŸåŒ–ï¼Œä¸€ç§æ˜¯æ—§ç‰ˆæœ¬ä¸Šä½¿ç”¨çš„å‚æ•°ä¸º -net é…åˆ -net ï¼Œå¦ä¸€ç§æ˜¯åœ¨æ–°ç‰ˆæœ¬ä¸Šæ”¯æŒçš„ -device é…åˆ -netdev ã€‚QEMU çš„å‘å±•è¶‹åŠ¿æ˜¯å€¾å‘äºç”¨ -device ä¸€ç§å‘½ä»¤æ ¼å¼æ¥è™šæ‹Ÿå‡ºä¸åŒçš„è®¾å¤‡ï¼Œå…¶ä¸­åŒ…æ‹¬ç½‘å¡è®¾å¤‡ã€‚ -net &amp; -net (legacy)è™½ç„¶ä»ç„¶æ”¯æŒï¼Œä½†æ˜¯é€æ­¥è¢«åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨ã€‚ æˆ‘ä»¬ä»¥ä»¥ä¸‹å‘½ä»¤ä¸ºä¾‹ï¼Œæ¥è¯´æ˜ -net å’Œ -net çš„ä½¿ç”¨æ–¹æ³•ï¼š 12345678910111213141516171819vcpu=8memory=8drive=&quot;openEuler-22.09-V1-riscv64-qemu.qcow2&quot;fw=&quot;fw_payload_oe_qemuvirt.elf&quot;cmd=&quot;qemu-system-riscv64 \\ -nographic -machine virt \\ -smp &quot;$vcpu&quot; -m &quot;$memory&quot;G \\ -kernel &quot;$fw&quot; \\ -bios none \\ -drive file=&quot;$drive&quot;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -net nic,mac=52:54:00:12:34:56 \\ -net tap,ifname=tap0,script=no,downscript=no \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet \\ -append &#x27;root=/dev/vda1 rw console=ttyS0 swiotlb=1 loglevel=3 systemd.default_timeout_start_sec=600 selinux=0 highres=off mem=&quot;$memory_append&quot;M earlycon&#x27; &quot; å…¶ä¸­è¿™ä¸¤ä¸ªå‚æ•°å³å®ç°äº†è™šæ‹ŸåŒ–ç½‘ç»œï¼š 12-net nic,mac=52:54:00:12:34:56 \\-net tap,ifname=tap0,script=no,downscript=no \\ ç¬¬ä¸€ä¸ªå‚æ•° -net nic ç”¨äºæŒ‡å®šä¸Šè¿°æ‰€è¯´çš„å‰ç«¯é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Guest ä¸­çš„å®ç°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ é»˜è®¤çš„é©±åŠ¨ï¼Œè¿™ä¸ªé©±åŠ¨æ˜¯ QEMU ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿç½‘å¡è®¾å¤‡ï¼ŒæŒ‡å®šå®ƒçš„ MAC åœ°å€ä¸º 52:54:00:12:34:56ã€‚ ç¬¬äºŒä¸ªå‚æ•° -net tap ç”¨äºæŒ‡å®šåç«¯å®ç°ï¼Œä¹Ÿå°±æ˜¯ Host ä¸­çš„å®ç°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ tap é©±åŠ¨ï¼Œå®ƒçš„ç½‘å¡åç§°ä¸º tap0ï¼Œå¹¶ä¸”ä¸æ‰§è¡Œä»»ä½•è„šæœ¬ã€‚è¿™ä¸¤ä¸ªå‚æ•°çš„ç»„åˆå°±å®ç°äº†è™šæ‹ŸåŒ–ç½‘ç»œã€‚ æ›´å¤šç¤ºä¾‹ï¼š 12-net nic,model=virtio \\-net tap,ifname=tap3,script=/ect/qemu/qemu-ifup,downscript=no \\ ç¬¬ä¸€ä¸ªå‚æ•° -net nic ç”¨äºæŒ‡å®šä¸Šè¿°æ‰€è¯´çš„å‰ç«¯é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Guest ä¸­çš„å®ç°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ virtio é©±åŠ¨ï¼Œè¿™ä¸ªé©±åŠ¨æ˜¯ QEMU ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿç½‘å¡è®¾å¤‡ã€‚ç¬¬äºŒä¸ªå‚æ•° -net tap ç”¨äºæŒ‡å®šåç«¯å®ç°ï¼Œä¹Ÿå°±æ˜¯ Host ä¸­çš„å®ç°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ tap é©±åŠ¨ï¼Œå®ƒçš„ç½‘å¡åç§°ä¸º tap3ï¼Œå¹¶ä¸”æ‰§è¡Œè„šæœ¬ /ect/qemu/qemu-ifupã€‚ è§£é‡Š/ect/qemu/qemu-ifupè¯¥è„šæœ¬ç”¨äºåˆ›å»ºç½‘æ¡¥ï¼Œå°†ç½‘æ¡¥ä¸å®¿ä¸»æœºçš„ç½‘å¡ç»‘å®šï¼Œç„¶åå°†è™šæ‹Ÿç½‘å¡ç»‘å®šåˆ°ç½‘æ¡¥ä¸Šï¼Œè¿™æ ·è™šæ‹Ÿæœºå°±å¯ä»¥é€šè¿‡ç½‘æ¡¥ä¸å®¿ä¸»æœºé€šä¿¡ï¼Œå®¿ä¸»æœºä¹Ÿå¯ä»¥é€šè¿‡ç½‘æ¡¥ä¸è™šæ‹Ÿæœºé€šä¿¡ã€‚ -device &amp; -netdev ï¼ˆRecommendedï¼‰è¿™æ˜¯æ–°ç‰ˆæœ¬çš„ QEMU æ”¯æŒçš„å‘½ä»¤æ ¼å¼ï¼Œä¹Ÿæ˜¯ QEMU æœªæ¥çš„å‘å±•è¶‹åŠ¿ï¼Œæˆ‘ä»¬ä»¥ä»¥ä¸‹å‘½ä»¤ä¸ºä¾‹ï¼Œæ¥è¯´æ˜ -device å’Œ -netdev çš„ä½¿ç”¨æ–¹æ³•ï¼š 123456789101112qemu-system-riscv64 \\ -nographic -machine virt \\ -smp &quot;$vcpu&quot; -m &quot;$memory&quot;G \\ -bios &quot;$fw&quot; \\ -drive file=&quot;$drive&quot;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet,ifname=tap0,script=~/qemu-script/qemu-ifup,downscript=no \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet å…¶ä¸­è¿™ä¸¤ä¸ªå‚æ•°å³å®ç°äº†è™šæ‹ŸåŒ–ç½‘ç»œï¼š 12-device virtio-net-device,netdev=tapnet,mac=e0:be:03:88:54:e8 \\-netdev tap,id=tapnet,ifname=tap0,script=~/qemu-script/qemu-ifup,downscript=no \\ ç¬¬ä¸€ä¸ªå‚æ•° -device virtio-net-device ç”¨äºæŒ‡å®šä¸Šè¿°æ‰€è¯´çš„å‰ç«¯é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Guest ä¸­çš„å®ç°ï¼Œå®šä¹‰äº†åä¸º virtio-net-device çš„ç½‘ç»œè®¾å¤‡ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ä¸€ä¸ªåä¸º tapnet çš„ç½‘ç»œè®¾å¤‡ä¸Šï¼ŒæŒ‡å®šå®ƒçš„ MAC åœ°å€ä¸º e0:be:03:88:54:e8ã€‚ ç¬¬äºŒä¸ªå‚æ•° -netdev tap ç”¨äºæŒ‡å®šåç«¯å®ç°ï¼Œä½¿ç”¨tapæ–¹å¼ï¼Œå¹¶ä¸”æŒ‡å®šå”¯ä¸€ ID ä¸ºtapnetç”±-deviceå‚æ•°ä¸­çš„å­å‚æ•°netdevä½¿ç”¨ã€‚ç½‘å¡åç§°ä¸ºtap0å¹¶ä¸”æ‰§è¡Œè„šæœ¬ ~/qemu-script/qemu-ifupã€‚ -netdev å‚æ•°ä¸­ id çš„ä½¿ç”¨-netdev å‚æ•°ä¸­çš„ id ç”¨äºæŒ‡å®šå”¯ä¸€çš„ IDï¼Œè¿™ä¸ª ID ä¼šè¢« -device å‚æ•°ä¸­çš„å­å‚æ•° netdev ä½¿ç”¨ï¼Œè¿™æ · -device å‚æ•°å°±çŸ¥é“è¦å°†å‰ç«¯é©±åŠ¨è¿æ¥åˆ°å“ªä¸ªåç«¯å®ç°ä¸Šäº†ã€‚id å¯ä»¥è‡ªå®šä¹‰ä»»æ„å”¯ä¸€å­—ç¬¦ä¸²å¦‚-netdev tap,id=testå¯¹åº”-device virtio-net-device,netdev=test æ›´å¤šç¤ºä¾‹ï¼š 12-device virtio-net-pci,netdev=tapnet,mac=e0:be:03:88:54:e8 \\-netdev tap,id=tapnet,script=no,downscript=no \\ ç¬¬ä¸€ä¸ªå‚æ•° -device virtio-net-pci å®šä¹‰äº†åä¸º virtio-net-pci çš„ç½‘ç»œè®¾å¤‡ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ä¸€ä¸ªåä¸º tapnet çš„ç½‘ç»œè®¾å¤‡ä¸Šï¼ŒæŒ‡å®šå®ƒçš„ MAC åœ°å€ä¸º e0:be:03:88:54:e8ã€‚ ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»”ç»†è§‚å¯Ÿä¼šå‘ç°ï¼Œæˆ‘ä»¬æ²¡æœ‰å®šä¹‰é“¾æ¥åˆ°åç«¯ç½‘å¡çš„åç§°ifnameï¼Œè¿™æ˜¯å› ä¸ºä»¥tapæ¨¡å¼å¯åŠ¨ QEMU æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºtapè®¾å¤‡ï¼Œå…·ä½“ç½‘å¡åç§°æ ¹æ®å½“å‰å®¿ä¸»æœºçš„ç½‘å¡æƒ…å†µè€Œå®šï¼Œé»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªåä¸ºtap0çš„ç½‘å¡ï¼Œå¦‚æœå¯åŠ¨äº†ä¸¤ä¸ªè™šæ‹Ÿæœºï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªè™šæ‹Ÿæœºçš„ç½‘å¡åç§°å°±æ˜¯tap1ï¼Œä»¥æ­¤ç±»æ¨ã€‚ åŒºåˆ† tap æ¨¡å¼ä¸ bridge æ¨¡å¼æˆ‘ä»¬æœ‰æ—¶å€™ä¼šç”¨ä»¥ä¸‹çš„å‘½ä»¤è¿›è¡Œ QEMU è™šæ‹Ÿæœºæ¡¥æ¥ç½‘ç»œçš„é…ç½®ï¼š 12-device virtio-net-device,netdev=bridgenet,mac=52:54:00:12:34:57 \\-netdev bridge,ifname=br0,id=bridgenet è¿™ä¹Ÿèƒ½ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¡¥æ¥ç½‘ç»œï¼Œè¿™æ˜¯å› ä¸ºå®ƒå’Œ -netdev tap çš„å·¥ä½œæ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ -netdev bridge çš„ç®€åŒ–å†™æ³•ï¼Œqemu-bridge-helper åœ¨èƒŒåæ›¿æˆ‘ä»¬åšäº† tap è®¾å¤‡åˆ›å»ºä»¥åŠå°† tap è®¾å¤‡åŠ å…¥æ¡¥æ¥å£çš„æ‰€æœ‰äº‹æƒ…ã€‚ æ·»åŠ å¤šå¼ ç½‘å¡å¦‚æœäº†è§£ä¸Šè¿°å†…å®¹ï¼Œæ·»åŠ å¤šå¼ ç½‘å¡å°±ååˆ†å®¹æ˜“å®ç°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å†æ·»åŠ ä¸€å¯¹ -device å’Œ -netdev å‚æ•°å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314qemu-system-riscv64 \\ -nographic -machine virt \\ -smp &quot;$vcpu&quot; -m &quot;$memory&quot;G \\ -bios &quot;$fw&quot; \\ -drive file=&quot;$drive&quot;,format=qcow2,id=hd0 \\ -object rng-random,filename=/dev/urandom,id=rng0 \\ -device virtio-vga \\ -device virtio-rng-device,rng=rng0 \\ -device virtio-blk-device,drive=hd0 \\ -device virtio-net-device,netdev=tapnet0,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet0,script=/etc/qemu/qemu-ifup,downscript=/etc/qemu/qemu-ifdown \\ -device virtio-net-device,netdev=tapnet1,mac=e0:be:03:88:54:e8 \\ -netdev tap,id=tapnet1,script=/etc/qemu/qemu-ifup,downscript=/etc/qemu/qemu-ifdown \\ -device qemu-xhci -usb -device usb-kbd -device usb-tablet éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ª -device å‚æ•°æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„ IDï¼Œè¿™ä¸ª ID ä¼šè¢« -netdev å‚æ•°ä¸­çš„å­å‚æ•° netdev ä½¿ç”¨ï¼Œè¿™æ · -device å‚æ•°å°±çŸ¥é“è¦å°†å‰ç«¯é©±åŠ¨è¿æ¥åˆ°å“ªä¸ªåç«¯å®ç°ä¸Šäº†ã€‚å¹¶ä¸”æ¯ä¸ª tap è®¾å¤‡åªèƒ½è¢«ä¸€ä¸ªè™šæ‹Ÿæœºä½¿ç”¨ï¼Œæ‰€ä»¥æ¯ä¸ªè™šæ‹Ÿæœºçš„ tap è®¾å¤‡åç§°ä¸èƒ½ç›¸åŒã€‚ ç™»å½•è™šæ‹ŸæœºæŸ¥çœ‹ç½‘å¡ä¿¡æ¯ï¼š 123456789101112131415161718192021222324252627[root@openEuler-riscv64 ~]# ifconfig eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 10.12.193.53 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::9e6:287b:30a2:574d prefixlen 64 scopeid 0x20&lt;link&gt; ether e0:be:03:88:54:e8 txqueuelen 1000 (Ethernet) RX packets 81 bytes 9871 (9.6 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 19 bytes 1735 (1.6 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0eth1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 10.12.193.101 netmask 255.255.240.0 broadcast 10.12.207.255 inet6 fe80::4fe0:9e1e:4681:52b7 prefixlen 64 scopeid 0x20&lt;link&gt; ether 80:d4:09:62:cd:3c txqueuelen 1000 (Ethernet) RX packets 76 bytes 9471 (9.2 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 15 bytes 1708 (1.6 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10&lt;host&gt; loop txqueuelen 1000 (Local Loopback) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 ä¸åŒç½‘ç»œç­–ç•¥å·¥ä½œæ–¹å¼ NAT ç½‘ç»œæ¨¡å¼ NAT ç½‘ç»œä»¥è·¯ç”±å™¨çš„ NAT åŠŸèƒ½ä¸ºåŸç†ï¼Œå…è®¸è™šæ‹Ÿæœºé€šè¿‡å…±äº«ä¸»æœºçš„ IP åœ°å€è®¿é—®äº’è”ç½‘ï¼Œä½†è™šæ‹Ÿæœºä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ã€‚é€šè¿‡ç«¯å£è½¬å‘å¯ä»¥å®ç°è™šæ‹Ÿæœºä¹‹é—´çš„è¿æ¥ã€‚ æ¡¥æ¥ç½‘ç»œæ¨¡å¼ æ¡¥æ¥ç½‘ç»œæ¨¡å¼é€šè¿‡è™šæ‹Ÿäº¤æ¢æœºè¿æ¥è™šæ‹Ÿæœºå’Œä¸»æœºï¼Œä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥é€šè¿‡å±€åŸŸç½‘è®¿é—®äº’è”ç½‘ï¼Œå¹¶å…è®¸è™šæ‹Ÿæœºä¹‹é—´ç›´æ¥é€šä¿¡ã€‚ å†…éƒ¨ç½‘ç»œæ¨¡å¼ å†…éƒ¨ç½‘ç»œæ¨¡å¼ä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥åˆ›å»ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„ç½‘ç»œï¼Œè™šæ‹Ÿæœºä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚ ä»…ä¸»æœºç½‘ç»œæ¨¡å¼ ä»…ä¸»æœºç½‘ç»œæ¨¡å¼å…è®¸è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥é€šä¿¡ï¼Œå¹¶ä¸”ä¸ä¸»æœºä¹‹é—´ä¹Ÿå¯ä»¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚ VM &lt;&gt; VM VM â†’ HOST HOST â†’ VM VM â†’ Internet Internet â†’ VM ç½‘ç»œåœ°å€è½¬æ¢ NAT Ã— âˆš Ã— âˆš Ã— NAT ç½‘ç»œ âˆš âˆš Ã— âˆš Ã— Bridged Adapter æ¡¥æ¥ç½‘å¡ âˆš âˆš âˆš âˆš âˆš TUN/TAP ç½‘ç»œè®¾å¤‡TAP å±äº Linux å†…æ ¸æ”¯æŒçš„ä¸€ç§è™šæ‹ŸåŒ–ç½‘ç»œè®¾å¤‡ï¼Œè¿˜æœ‰ TUN ä¹Ÿå±äºè¿™ç§è®¾å¤‡ï¼Œå®ƒä»¬å®Œå…¨ç”±è½¯ä»¶æ¨¡æ‹Ÿå®ç°ï¼ŒTUN/TAP è´Ÿè´£åœ¨å†…æ ¸åè®®æ ˆå’Œç”¨æˆ·è¿›ç¨‹ä¹‹é—´ä¼ é€åè®®æ•°æ®å•å…ƒã€‚TUN å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œè€Œ TAP å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ŒTUN è´Ÿè´£ä¸åº”ç”¨ç¨‹åºäº¤æ¢ IP æ•°æ®åŒ…ï¼Œè€Œ TAP ä¸åº”ç”¨ç¨‹åºäº¤æ¢ä»¥å¤ªç½‘å¸§ã€‚æ‰€ä»¥ TUN ç»å¸¸æ¶‰åŠè·¯ç”±ï¼Œè€Œ TAP å¸¸ç”¨äºç½‘ç»œæ¡¥æ¥ã€‚ SSH è¿œç¨‹ç™»å½•è™šæ‹Ÿæœºå®¿ä¸»æœºä»»æ„ä¸‹ç›®å½•æ‰§è¡Œï¼š 123456789101112131415161718192021$ ssh-keygen -t rsaGenerating public/private rsa key pair.Enter file in which to save the key (/home/user/.ssh/id_rsa): host2vm0_id_irsaEnter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in host2vm0_id_irsa.Your public key has been saved in host2vm0_id_irsa.pub.The key fingerprint is:SHA256:OkWcw+R3x6Z2mzeYQuG033H3N9qIeym3TZKzz6YD8tQ user@ubuntu18The key&#x27;s randomart image is:+---[RSA 2048]----+| . || = . . || B .o. + || . oo.o+ || S ++ ..o|| o ..+.E=o=|| o +..B+=+|| . oo=@o+|| o=**= |+----[SHA256]-----+ ä¸€ç›´å›è½¦ç¡®å®šï¼Œç”Ÿæˆå…¬ç§é’¥ï¼Œä¿å­˜åœ¨~/.sshç›®å½•ä¸‹ã€‚ æˆ‘åœ¨å®¿ä¸»æœºä¸Šç”Ÿæˆçš„å…¬ç§é’¥åç§°ä¸ºï¼Œåˆ†åˆ«æ˜¯host2vm0_id_rsa,host2vm0_id_rsa.pubæ–¹ä¾¿æˆ‘è®°å¿†ã€‚å¦‚æœä¸€ç›´å›è½¦ï¼Œé‚£ä¹ˆç”Ÿæˆçš„å…¬ç§é’¥åç§°ä¸ºid_rsaï¼Œid_rsa.pubã€‚ å°†å…¬é’¥å¤åˆ¶åˆ°è™šæ‹Ÿæœº VM0 ä¸Šï¼Œä»¥å½“å‰è™šæ‹Ÿæœº VM0 çš„ IPï¼š10.12.193.53 ä¸ºä¾‹ã€‚ 12345678910$ ssh-copy-id 10.12.193.53# è¾“å…¥å¯†ç /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keysuser@10.12.193.53&#x27;s password: Number of key(s) added: 1Now try logging into the machine, with: &quot;ssh &#x27;10.12.193.53&#x27;&quot;and check to make sure that only the key(s) you wanted were added. ç„¶åå°±å¯ä»¥ç›´æ¥å…å¯†ç ç™»å½•äº†ï¼š 1ssh user@10.12.193.53 Fixed Problems (Ongoing)cannot ioctl tunsetiff tap0 device or resource busy (errno=16)failed to initialize tap device: Operation not permittedåŒç±»å‹é”™è¯¯ï¼šfailed to create TAP device: Operation not permittedã€‚å› ä¸ºåˆ›å»ºè™šæ‹Ÿè®¾å¤‡ tap éœ€è¦ root æƒé™ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ sudo å‘½ä»¤ã€‚æ‰§è¡Œ QEMU å¯åŠ¨æ˜¯éœ€è¦æ·»åŠ  sudoã€‚ QEMU è™šæ‹Ÿæœºå¯åŠ¨åç½‘å¡å¤„äº DOWN çŠ¶æ€ï¼Œæ— æ³•è·å– IPæŸ¥çœ‹æ˜¯å¦æ˜¯ MAC åœ°å€é…ç½®é”™è¯¯ï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤æ£€æŸ¥ï¼š 12sudo ifconfig eth0 upSIOCSIFFLAGS: Cannot assign requested address å¦‚æœæŠ¥é”™ï¼Œå‚è€ƒä¸‹é¢ç« èŠ‚SIOCSIFFLAGS: Cannot assign requested addressè§£å†³æ–¹æ³•è¿›è¡Œè§£å†³ã€‚ è™šæ‹Ÿæœºå¯ä»¥ ping é€šå¤–ç½‘ï¼Œå®¿ä¸»æœºæ— æ³• ping å¤–ç½‘è¿™ç§æƒ…å†µè¯´æ˜åŸºæœ¬ç½‘ç»œæ²¡æœ‰é—®é¢˜ï¼Œåªæ˜¯ DNS è§£ææœ‰é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹/etc/resolv.confæ–‡ä»¶è§£å†³ã€‚ æµ·å® DNS æœåŠ¡å™¨åœ°å€ï¼š10.12.2.21 å’Œ 10.12.2.22ï¼Œæˆ‘çš„æƒ…å†µæ˜¯åªèƒ½ ping 10.12.2.21ï¼Œå¯ä»¥é€‰æ‹©è‡ªå·±èƒ½ ping é€šçš„ DNS æœåŠ¡å™¨åœ°å€ã€‚å¦‚æœæ— æ³• ping é€šï¼Œè¯´æ˜é—®é¢˜ä¸åœ¨è¿™ï¼Œéœ€è¦è‡ªè¡Œè§£å†³ã€‚ 12345# ä¿®æ”¹ DNS æœåŠ¡å™¨åœ°å€sudo vim /etc/resolv.conf# æ·»åŠ ä»¥ä¸‹å†…å®¹nameserver 10.12.2.21nameserver 10.12.2.22 ç½‘ç»œé…ç½®é”™è¯¯ï¼Œå¦‚ä½•æ¢å¤é…ç½®ä¹‹å‰çš„çŠ¶æ€æœ€ç®€å•çš„æ–¹å¼ - é‡å¯ï¼Œå› ä¸ºæ‰€æœ‰æ“ä½œéƒ½æ˜¯å‘½ä»¤è¡Œé…ç½®ï¼Œéƒ½æ˜¯ä¸´æ—¶é…ç½®ï¼Œå¯ä»¥ç›´æ¥é‡å¯è§£å†³ã€‚ æ—¢ç„¶æœ‰è¿™ä¸€å°èŠ‚ï¼Œè¯´æ˜è‚¯å®šæœ‰æ—¶å€™ä¸æ–¹ä¾¿ç›´æ¥é‡å¯ï¼Œé‚£ä¹ˆå°±éœ€è¦æ‰‹åŠ¨æ¢å¤é…ç½®ä¹‹å‰çš„çŠ¶æ€ã€‚ä½†æ˜¯èƒ½å¤Ÿæ¢å¤çš„å‰ææ˜¯éœ€è¦è®°å¾—ä¹‹å‰çš„ç½‘å¡ IP åœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³ã€å¹¿æ’­åœ°å€ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åœ¨å±€åŸŸç½‘é‡Œï¼Œå¯èƒ½åªæœ‰ IP ä¸åŒï¼Œå…¶ä»–ä¿¡æ¯å¦‚æœæ²¡è®°ä½å¯ä»¥æŸ¥çœ‹å…¶ä»–åŒäº‹çš„ç½‘å¡é…ç½®å³å¯ã€‚ 123456789# å°†ç½‘æ¡¥ç»‘å®šçš„ç½‘å¡ä»ç½‘æ¡¥ä¸Šç§»é™¤sudo brctl delif br0 enp2s0sudo brctl delif br0 tap0# é…ç½®å®¿ä¸»æœºç½‘å¡ä¿¡æ¯ï¼Œå¿…é¡»ä¸€å­—ä¸å·®ï¼Œä¿æŒå’Œä¹‹å‰ä¸€æ¨¡ä¸€æ ·æ‰èƒ½æ¢å¤sudo ip addr add 10.12.192.173/20 broadcast 10.12.207.255 dev enp2s0# å¿…é¡»è®¾ç½®ç½‘å…³sudo ip route add default via 10.12.192.1 dev enp2s0# é‡å¯ç½‘ç»œç®¡ç†å™¨systemctl restart NetworkManager -netdev tap,id=tapnet,script=/qemu-script/qemu-ifup,:network script /qemu-script/qemu-ifup failed with status 256å¯èƒ½åŸå›  1: qemu-ifup è„šæœ¬æ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œéœ€è¦æ·»åŠ æ‰§è¡Œæƒé™ã€‚ 1chmod +x qemu-ifup å¯èƒ½åŸå›  2: qemu-ifup è·¯å¾„ä¸å¯¹ï¼Œå¿…é¡»æ”¾åˆ°/etc/qemu/ç›®å½•ä¸‹ã€‚ 1234mkdir -p /etc/qemumv qemu-ifup /etc/qemu &amp;&amp; mv qemu-ifdown /etc/qemu sudo chmod +x qemu-ifupsudo chmod +x qemu-ifdown SIOCSIFFLAGS: Cannot assign requested address12sudo ifconfig eth0 upSIOCSIFFLAGS: Cannot assign requested address ä¸€èˆ¬ç”±äº MAC åœ°å€é…ç½®é”™è¯¯å¯¼è‡´ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ MAC åœ°å€ä¸ºå¤šæ’­åœ°å€è§£å†³ã€‚ 1sudo ifconfig enp2s0 hw ether 00:11:22:33:44:55 é‡å¯ç½‘å¡ 12sudo ifconfig enp2s0 downsudo ifconfig enp2s0 up MAC åœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸­çš„æœ€åä¸€ä½ï¼ˆå³ç¬¬ 7 ä½ï¼‰ç”¨äºæ ‡è¯†è¯¥åœ°å€æ˜¯å•æ’­ï¼Œå¤šæ’­è¿˜æ˜¯å¹¿æ’­åœ°å€ã€‚å¦‚æœè¿™ä¸ªä½è®¾ç½®ä¸º 0ï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå•æ’­åœ°å€ï¼›å¦‚æœè®¾ç½®ä¸º 1ï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¤šæ’­æˆ–å¹¿æ’­åœ°å€ã€‚ ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šä¸Šè¿°æ¯ä¸ª MAC åœ°å€æ˜¯å¦æ˜¯å•æ’­åœ°å€ï¼š cd:c2:05:84:c8:2c - å•æ’­åœ°å€ 13:7b:49:fc:a6:aa - å•æ’­åœ°å€ 8f:aa:42:29:e8:68 - å•æ’­åœ°å€ 00:11:22:33:44:55 æ˜¯å¤šæ’­åœ°å€ã€‚ qemu -device drive with 0 bus=0 unit=0 existsè¿™ä¸ªé”™è¯¯é€šå¸¸æ„å‘³ç€æ‚¨å°è¯•åœ¨ QEMU VM ä¸­æ·»åŠ ä¸€ä¸ªé‡å¤çš„è®¾å¤‡ã€‚ å¦‚æœæ‚¨å·²ç»åœ¨ VM ä¸­æ·»åŠ äº†é©±åŠ¨å™¨ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°æ­¤é—®é¢˜ã€‚æ‚¨å¯ä»¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸¤ä¸ªå…·æœ‰ç›¸åŒ bus å’Œ unit çš„è®¾å¤‡ï¼ˆåœ¨æ­¤æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ 0ï¼‰ã€‚è§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•æ˜¯åˆ é™¤é‡å¤è®¾å¤‡æˆ–æ›´æ”¹å…¶é…ç½®ä»¥åŒ…æ‹¬å”¯ä¸€çš„ bus å’Œ unitã€‚ å¦‚æœæ‚¨æ²¡æœ‰æ„å›¾æ·»åŠ é‡å¤çš„è®¾å¤‡ï¼Œåœ¨è¿è¡Œ QEMU ä¹‹å‰ï¼Œæ‚¨å¯èƒ½éœ€è¦æ£€æŸ¥æ‚¨çš„å‘½ä»¤è¡Œï¼Œä»¥ç¡®ä¿æ­£ç¡®è®¾ç½®äº† -drive é€‰é¡¹ã€‚è¯·æ³¨æ„ï¼Œå½“ä½¿ç”¨ -device æ·»åŠ è®¾å¤‡æ—¶ï¼Œæ‚¨è¿˜åº”è¯¥é¿å…ä½¿ç”¨ -drive é€‰é¡¹ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½å¼•èµ·å†²çªã€‚ å¦‚æœæ‚¨éœ€è¦è¿›ä¸€æ­¥å¸®åŠ©ï¼Œå»ºè®®æä¾›å®Œæ•´çš„ QEMU å‘½ä»¤å’Œå‚æ•°åˆ—è¡¨ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£é—®é¢˜å¹¶æä¾›æ›´è¯¦ç»†çš„å»ºè®®ã€‚ å‚è€ƒèµ„æ–™ QEMU ç½‘ç»œé…ç½® // å›´åŸ ç†è§£ Linux è™šæ‹Ÿç½‘å¡è®¾å¤‡ tun/tap çš„ä¸€åˆ‡ | éªé©¬é‡‘é¾™ QEMU ç½‘ç»œé…ç½®ä¸€æŠŠæ¢­ | CataLpaâ€™s Site qemu è™šæ‹Ÿæœºä¸å¤–éƒ¨ç½‘ç»œçš„é€šä¿¡ li_Jiejun çš„åšå®¢-CSDN åšå®¢ å®‰è£… qemu-kvm ä»¥åŠé…ç½®æ¡¥æ¥ç½‘ç»œ QEMU ä¸­çš„ç½‘ç»œè™šæ‹ŸåŒ–é…ç½®_ç¨‹åºçŒ¿ Ricky çš„æ—¥å¸¸å¹²è´§çš„åšå®¢-CSDN åšå®¢ Nginx Directory QEMU ç½‘ç»œé…ç½® - æµ™æ—é¾™å“¥ - åšå®¢å›­ ã€qemuã€‘qemu ç½‘ç»œé…ç½® - çŸ¥ä¹ QEMU ç½‘ç»œé…ç½® // å›´åŸ å®‰è£… qemu-kvm ä»¥åŠé…ç½®æ¡¥æ¥ç½‘ç»œ åœ¨ qemu ä¸­ä½¿ç”¨æ¡¥æ¥ç½‘ç»œ - T^3 Blog ä¸º QEMU é…ç½®ç½‘æ¡¥ä¸Šç½‘ | Yanickâ€™s Wiki ç†è§£ Linux è™šæ‹Ÿç½‘å¡è®¾å¤‡ tun/tap çš„ä¸€åˆ‡ | éªé©¬é‡‘é¾™ QEMU ç½‘ç»œé…ç½®ä¸€æŠŠæ¢­ | CataLpaâ€™s Site é™„å½•","categories":[{"name":"QEMU æºç åˆ†æ","slug":"QEMU-æºç åˆ†æ","permalink":"http://example.com/categories/QEMU-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}],"tags":[{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"},{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"http://example.com/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"},{"name":"ç½‘ç»œé…ç½®","slug":"ç½‘ç»œé…ç½®","permalink":"http://example.com/tags/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/"}]},{"title":"ä½¿ç”¨ Yadm ç®¡ç†å¹¶åŒæ­¥é…ç½®æ–‡ä»¶ Dotfile","slug":"ä½¿ç”¨Yadmç®¡ç†å¹¶åŒæ­¥é…ç½®æ–‡ä»¶Dotfile","date":"2023-07-30T05:39:04.000Z","updated":"2023-07-31T12:44:28.878Z","comments":true,"path":"2023/07/30/ä½¿ç”¨Yadmç®¡ç†å¹¶åŒæ­¥é…ç½®æ–‡ä»¶Dotfile/","link":"","permalink":"http://example.com/2023/07/30/%E4%BD%BF%E7%94%A8Yadm%E7%AE%A1%E7%90%86%E5%B9%B6%E5%90%8C%E6%AD%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6Dotfile/","excerpt":"","text":"Dotfiles å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨è½¯ä»¶çš„æ—¶å€™ï¼Œè½¯ä»¶ä¸ºäº†å­˜å‚¨æˆ‘ä»¬ä¸ªäººåå¥½è®¾ç½®è€Œå»ºç«‹çš„ä¸€ä¸ªä»¥ . å¼€å¤´çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œvim çš„é…ç½®æ–‡ä»¶å°±æ˜¯ .vimrcï¼Œzsh çš„é…ç½®æ–‡ä»¶å°±æ˜¯ .zshrcã€‚è¿™äº›æ–‡ä»¶é€šå¸¸å­˜å‚¨åœ¨ç”¨æˆ·çš„ home ç›®å½•ä¸­ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸åŒçš„ç”µè„‘ä¸Šå·¥ä½œæ—¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç›¸åŒçš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·æ¥ç®¡ç†è¿™äº›æ–‡ä»¶ã€‚æˆ–è€…åœ¨ä¸€å°æ–°ç”µè„‘ä¸Šæƒ³å¿«é€Ÿé…ç½®å¥½ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·æ¥ç®¡ç†è¿™äº›æ–‡ä»¶ã€‚Yadm å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™äº›éœ€æ±‚ã€‚ å®‰è£… yadmå®‰è£…å®‰è£… yadm éå¸¸ç®€å•ï¼Œåªéœ€åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 1sudo apt-get install yadm åˆå§‹åŒ– yadm ä»“åº“åˆ›å»ºä¸€ä¸ªæ–°çš„ yadm ä»“åº“å¾ˆå®¹æ˜“ï¼Œåªéœ€åœ¨ home ç›®å½•ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1yadm init ç°åœ¨ï¼Œyadm å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½çš„ git ä»“åº“ã€‚ æ·»åŠ  dotfile æ–‡ä»¶è¦å°†ç°æœ‰çš„ dotfile æ·»åŠ åˆ° yadm ä»“åº“ä¸­ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1yadm add ~/.zshrc ä¸€æ—¦æ‚¨å®Œæˆäº†å¯¹è¦æ·»åŠ çš„æ–‡ä»¶çš„æ›´æ”¹å¹¶å°†å®ƒä»¬æ·»åŠ åˆ° yadm ä»“åº“ä¸­ï¼Œæ‚¨éœ€è¦æäº¤å®ƒä»¬ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1yadm commit -m &quot;Add .zshrc file to yadm repository&quot; å»ºç«‹è¿œç¨‹ä»“åº“ä½¿ç”¨ yadm è¿˜å¯ä»¥å°† dotfile æ–‡ä»¶åŒæ­¥åˆ° GitHub ç­‰ Git æ‰˜ç®¡æœåŠ¡ä¸­ã€‚ ç™»å½• Githubï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º dotfile çš„ä»“åº“ã€‚ç°åœ¨ï¼Œæ‚¨éœ€è¦å°†æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“è¿æ¥èµ·æ¥ã€‚è¦å°†æœ¬åœ°ä»“åº“è¿æ¥åˆ°è¿œç¨‹ä»“åº“ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1yadm remote add origin https://github.com/[ç”¨æˆ·å]/dotfile.git ç°åœ¨ yadm å·²ç»è¿æ¥åˆ°æ‚¨åœ¨ Github ä¸Šåˆ›å»ºçš„ä»“åº“ã€‚è¦å°†æœ¬åœ°ä»£ç ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1yadm push ä½¿ç”¨å¤šå°ç”µè„‘æ—¶å¦‚ä½•åŒæ­¥é…ç½®å‡è®¾éœ€è¦åœ¨å¤šä¸ªè®¡ç®—æœºä¹‹é—´å…±äº« dotfile æ–‡ä»¶ã€‚åªéœ€æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å³å¯ï¼š åœ¨å¦ä¸€å°è®¡ç®—æœºä¸Šå®‰è£… yadm å¹¶åˆå§‹åŒ– yadm ä»“åº“ã€‚ å°†è¿œç¨‹ä»“åº“å…‹éš†åˆ°è¯¥è®¡ç®—æœºçš„ yadm ä»“åº“ä¸­ï¼š1yadm clone https://github.com/[ç”¨æˆ·å]/dotfile.git æ­¤æ—¶ï¼Œæ‚¨çš„ dotfile æ–‡ä»¶åº”åœ¨è®¡ç®—æœºä¸Šè‡ªåŠ¨æ›´æ–°ã€‚ æ‰§è¡Œå®Œ clone å‘½ä»¤åå®é™…ä¸Šå°±æ˜¯ yadm ä¼šæŠŠè¿œç¨‹ä»“åº“çš„æ–‡ä»¶éƒ½æ‹·è´åˆ°æœ¬åœ°ã€‚ å¦‚æœæœ¬åœ°æœ‰ä¿®æ”¹å’Œè¿œç¨‹æœ‰å†²çªæ€ä¹ˆåŠå¦‚æœæœ¬åœ°æœ‰ä¿®æ”¹ï¼Œè¿œç¨‹ä¹Ÿæœ‰ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå†²çªã€‚è¿™æ—¶å€™éœ€è¦å…ˆè§£å†³å†²çªï¼Œç„¶åå†æäº¤ã€‚ æ¯å°ç”µè„‘çš„é…ç½®ä¸ä¸€æ ·æ€ä¹ˆåŠæ¯”å¦‚æˆ‘ä»¬ä¼šåœ¨.zshrcä¸­é…ç½®ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œä½†æ˜¯æ¯å°ç”µè„‘çš„ç¯å¢ƒå˜é‡å¯èƒ½ä¸ä¸€æ ·ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨.zshrcä¸­æ·»åŠ ä¸€äº›åˆ¤æ–­ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç®€å•çš„åˆ¤æ–­ä¸€ä¸‹ä¸»æœºåï¼Œç„¶åæ ¹æ®ä¸»æœºåæ¥åŠ è½½ä¸åŒçš„é…ç½®ã€‚ 12345if [ $HOSTNAME = &quot;xxx&quot; ]; then # xxxçš„é…ç½®elif [ $HOSTNAME = &quot;yyy&quot; ]; then # yyyçš„é…ç½®fi ä½†æœ‰ä¸€äº›é…ç½®æ–‡ä»¶å¯èƒ½ä¸æ”¯æŒè¿™æ ·çš„æ·»åŠ è¯­å¥ï¼Œæ¯”å¦‚.gitconfigï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ yadm çš„ Alternate Files åŠŸèƒ½è§£å†³ã€‚ Alternate Files æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†åŒä¸€æ–‡ä»¶ä¸åŒç‰ˆæœ¬çš„åŠŸèƒ½ï¼Œæœ‰æ—¶åœ¨ä¸åŒçš„ä¸»æœºã€æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·éœ€è¦ä¸åŒçš„æ–‡ä»¶ã€‚Alternate Files å…è®¸ä½¿ç”¨åŒä¸€ä¸ªæ–‡ä»¶åå­—ï¼Œåœ¨æ–‡ä»¶ååæ·»åŠ ä¸€ä¸ªå¸¦æœ‰æ¡ä»¶çš„åç¼€ï¼Œä¾‹å¦‚##os.Linux,hostname.host1ï¼Œclass.workï¼Œyadm ä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„ç‰¹å®šæ¡ä»¶è‡ªåŠ¨é€‰æ‹©é€‚å½“çš„ç‰ˆæœ¬ï¼Œå¹¶åˆ›å»ºç¬¦å·é“¾æ¥ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„ç‰ˆæœ¬ï¼Œå®ƒå°†é€‰æ‹©é»˜è®¤ç‰ˆæœ¬ã€‚ å°±ä»¥.gitconfigé…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨å…¬å¸çš„ç”µè„‘å’Œå®¶é‡Œçš„ç”µè„‘é…ç½®ä¸å¤ªä¸€æ ·ï¼Œæ¯”å¦‚å…¬å¸ä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼š 123[user] email = å…¬å¸é‚®ç®± name = å…¬å¸ç”¨æˆ·å åœ¨å®¶é‡Œä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼š 123[user] email = æ—¥å¸¸ä½¿ç”¨é‚®ç®± name = æ—¥å¸¸ä½¿ç”¨ç”¨æˆ·å é…ç½®æ–‡ä»¶ä¸æ”¯æŒæ¡ä»¶è¯­å¥ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡ç›´æ¥åœ¨åŒä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œå®Œæˆä¸åŒç¯å¢ƒçš„é…ç½®ã€‚è¿™å°±ç”¨åˆ°äº† Alternate Files åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å¤åˆ¶ä¸¤ä¸ª.gitconfigæ–‡ä»¶åé¢æ·»åŠ ä¸€ä¸ªæ¡ä»¶åç¼€ï¼Œæ¯”å¦‚.gitconfig##class.workï¼Œç„¶ååœ¨.gitconfig##class.workæ–‡ä»¶ä¸­æ·»åŠ å…¬å¸çš„é…ç½®ï¼Œ.gitconfigæ–‡ä»¶ä¸­æ·»åŠ å®¶é‡Œçš„é…ç½®ã€‚è¿™æ · yadm å°±ä¼šæ ¹æ®å½“å‰çš„ä¸»æœºåè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„é…ç½®æ–‡ä»¶ã€‚å¹¶æŠŠè¿™ä¸‰ä¸ªæ–‡ä»¶éƒ½åŠ å…¥åˆ° yadm ä»“åº“ä¸­ã€‚ 123yadm add ~/.gitconfigyadm add ~/.gitconfig##class.workyadm add ~/.gitconfig##class.home é‚£ä¹ˆ yadm æ˜¯å¦‚ä½•å®ç°ä¸åŒç¯å¢ƒçš„åˆ‡æ¢å‘¢ï¼Ÿæˆ‘ä»¬è¿˜éœ€è¦è¿›ä¸€æ­¥é…ç½®ï¼Œæœ‰æ³¨æ„åˆ°æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶åä¸­çš„classå±æ€§å—ï¼Œè¿™æ˜¯ yadm æ”¯æŒçš„æ¡ä»¶å±æ€§ä¹‹ä¸€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡yadm configå‘½ä»¤æ¥é…ç½®å½“å‰ç”µè„‘çš„å±æ€§ã€‚æ¯”å¦‚æˆ‘ä»¬é…ç½®å…¬å¸ç”µè„‘çš„classå±æ€§ä¸ºworkï¼Œå®¶é‡Œçš„ç”µè„‘çš„classå±æ€§ä¸ºhomeã€‚ 1yadm config local.class work æˆ‘ä»¬æ‰§è¡Œå®Œæ­¤å‘½ä»¤åï¼Œyadm ä¼šè‡ªåŠ¨ä¸º.gitconfigæ–‡ä»¶æ·»åŠ ä¸€ä¸ªè½¯é“¾æ¥ï¼Œé“¾æ¥åˆ°.gitconfig##class.workæ–‡ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å…¬å¸ç”µè„‘ä¸Šä½¿ç”¨å…¬å¸çš„é…ç½®äº†ã€‚å¦‚æœæˆ‘ä»¬åœ¨å®¶é‡Œçš„ç”µè„‘ä¸Šæ‰§è¡Œyadm config local.class homeï¼Œé‚£ä¹ˆ yadm ä¼šè‡ªåŠ¨ä¸º.gitconfigæ–‡ä»¶æ·»åŠ ä¸€ä¸ªè½¯é“¾æ¥ï¼Œé“¾æ¥åˆ°.gitconfig##class.homeæ–‡ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å®¶é‡Œçš„ç”µè„‘ä¸Šä½¿ç”¨å®¶é‡Œçš„é…ç½®äº†ã€‚ yadm æ”¯æŒä»¥ä¸‹è¿™äº›æ¡ä»¶ï¼š å±æ€§ æ„ä¹‰ arch, a å¦‚æœå€¼åŒ¹é…æ¶æ„åˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ uname -m è®¡ç®—æ¶æ„ã€‚ class, c å¦‚æœå€¼åŒ¹é… local.class é…ç½®ï¼Œåˆ™æœ‰æ•ˆã€‚å¿…é¡»ä½¿ç”¨â€œyadm config local.class â€æ‰‹åŠ¨è®¾ç½® Classã€‚ default å½“æ²¡æœ‰å…¶ä»–å¤‡é€‰é¡¹æœ‰æ•ˆæ—¶æœ‰æ•ˆã€‚ distro, d å¦‚æœå€¼ä¸å‘è¡Œç‰ˆåŒ¹é…ï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ lsb_release -siæˆ–æ£€æŸ¥/etc/os-releaseæ¥è®¡ç®—åˆ†å¸ƒã€‚ distro_family, f å¦‚æœå€¼åŒ¹é…å‘è¡Œç‰ˆç³»åˆ—ï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡æ£€æŸ¥/etc/os-release ä¸­çš„ ID_LIKE è¡Œè®¡ç®—å‘è¡Œç‰ˆç³»åˆ—ã€‚ extension, e ä¸€ç§ç‰¹æ®Šçš„â€œæ¡ä»¶â€ï¼Œä¸å½±å“é€‰æ‹©è¿‡ç¨‹ã€‚å®ƒçš„ç›®çš„æ˜¯å…è®¸å¤‡é€‰æ–‡ä»¶ä»¥ç‰¹å®šæ‰©å±•åç»“å°¾ï¼Œä¾‹å¦‚ä½¿ç¼–è¾‘å™¨æ­£ç¡®çªå‡ºæ˜¾ç¤ºå†…å®¹ã€‚ hostname, h å¦‚æœå€¼åŒ¹é…çŸ­ä¸»æœºåï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ uname -nï¼Œå¹¶å»é™¤ä»»ä½•åŸŸæ¥è®¡ç®—ä¸»æœºåã€‚ osï¼Œo å¦‚æœå€¼ä¸æ“ä½œç³»ç»ŸåŒ¹é…ï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ uname -s è®¡ç®— OSã€‚* template, t å½“å€¼ä¸æ”¯æŒçš„æ¨¡æ¿å¤„ç†å™¨åŒ¹é…æ—¶æœ‰æ•ˆã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æ¨¡æ¿éƒ¨åˆ†ã€‚ user, u å¦‚æœå€¼åŒ¹é…å½“å‰ç”¨æˆ·ï¼Œåˆ™æœ‰æ•ˆã€‚é€šè¿‡è¿è¡Œ id -u -n è®¡ç®—å½“å‰ç”¨æˆ·ã€‚ å†ä¸¾ä¸ªä¾‹å­ï¼Œä¸Šé¢ç”¨çš„ class æ¡ä»¶æ˜¯å¿…é¡»é€šè¿‡yadm config local.class &lt;class&gt;æ‰‹åŠ¨è®¾ç½®çš„ã€‚ä½†æ˜¯æœ‰ä¸€äº›æ¡ä»¶ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½® yadm å¯ä»¥è‡ªåŠ¨è¯†åˆ«ã€‚æ¯”å¦‚ os å±æ€§ã€‚æˆ‘ä»¬å°†.zshrcæ–‡ä»¶å¤åˆ¶ä¸¤ä»½ä»½ï¼Œå‘½åä¸º.zshrc##os.Linuxå’Œ.zshrc##os.Darwinï¼Œç„¶ååœ¨.zshrc##os.Linuxæ–‡ä»¶ä¸­æ·»åŠ ä¸€äº› Linux ç³»ç»Ÿçš„é…ç½®ï¼Œ.zshrc##os.Darwinæ–‡ä»¶ä¸­æ·»åŠ ä¸€äº› Mac ç³»ç»Ÿçš„é…ç½®ã€‚å¹¶æŠŠè¿™ä¸‰ä¸ªæ–‡ä»¶éƒ½åŠ å…¥åˆ° yadm ä»“åº“ä¸­ã€‚è¿™æ · yadm å°±ä¼šæ ¹æ®å½“å‰çš„ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„é…ç½®æ–‡ä»¶ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"å·¥å…·æ¨è","slug":"å·¥å…·æ¨è","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/"}]},{"title":"QEMUå¯åŠ¨RISC-Væ¶æ„OpenEulerå¹¶é…ç½®OSCç¯å¢ƒ","slug":"QEMUå¯åŠ¨RISC-Væ¶æ„OpenEulerå¹¶é…ç½®OSCç¯å¢ƒ","date":"2023-07-23T11:28:29.000Z","updated":"2023-07-23T11:29:42.680Z","comments":true,"path":"2023/07/23/QEMUå¯åŠ¨RISC-Væ¶æ„OpenEulerå¹¶é…ç½®OSCç¯å¢ƒ/","link":"","permalink":"http://example.com/2023/07/23/QEMU%E5%90%AF%E5%8A%A8RISC-V%E6%9E%B6%E6%9E%84OpenEuler%E5%B9%B6%E9%85%8D%E7%BD%AEOSC%E7%8E%AF%E5%A2%83/","excerpt":"","text":"åŸºäºUbuntu 18.04ï¼ŒQEMU 8.0.2ï¼ŒOpenEuler 22.09 å®‰è£…QEMUå®‰è£…åŸºç¡€ç¼–è¯‘å·¥å…·12345sudo apt install build-essential autoconf automake autotools-dev pkg-config bc curl \\ gawk git bison flex texinfo gperf libtool patchutils mingw-w64 libmpc-dev \\ libmpfr-dev libgmp-dev libexpat-dev libfdt-dev zlib1g-dev libglib2.0-dev \\ libpixman-1-dev libncurses5-dev libncursesw5-dev meson libvirglrenderer-dev libsdl2-dev -y 1234sudo add-apt-repository ppa:deadsnakes/ppasudo apt install python3.8 python3-pip -ysudo apt install -fpip3 install meson ä¸‹è½½QEMUå»ºç«‹æ–‡ä»¶å¤¹ç”¨äºç¼–è¯‘ï¼š 1cd &amp;&amp; mkdir -p qemu-build å»ºç«‹æ–‡ä»¶å¤¹ç”¨äºå®‰è£…ï¼š 1cd &amp;&amp; mkdir -p /home/user/program/riscv64-qemu å¯ç™»å½•å®˜ç½‘å°†ç‰ˆæœ¬å·æ¢æˆæœ€æ–°ç‰ˆæœ¬å³å¯ï¼š 1cd qemu-build &amp;&amp; wget &quot;https://download.qemu.org/qemu-8.0.2.tar.xz&quot; 1tar -xf qemu-8.0.2.tar.xz --strip-components=1 å®‰è£…QEMU123cd qemu-build &amp;&amp; ./configure --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu \\ --enable-kvm --enable-sdl \\ --prefix=/home/user/program/riscv64-qemu 1make install -j $(nproc) é…ç½®ç¯å¢ƒå˜é‡ 12echo &#x27;export QEMU_HOME=/home/user/program/riscv64-qemu&#x27; &gt;&gt; ~/.bashrc &amp;&amp; echo &#x27;export PATH=$QEMU_HOME/bin:$PATH&#x27; &gt;&gt; ~/.bashrc 1source ~/.bashrc ä¸‹è½½ OpenEuler RISC-V ç³»ç»Ÿé•œåƒå»ºç«‹ç›®å½•ï¼š 1cd &amp;&amp; mkdir -p /home/user/openeuler æ ¹æ®è‡ªå·±çš„ç”¨æˆ·åä¿®æ”¹user ä¸‹è½½OpenEuler 22.09ç‰ˆæœ¬ï¼Œä¸‹è½½ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶/home/user/openeulerã€‚å¦‚éœ€ä¸‹è½½å…¶ä»–ç‰ˆæœ¬è¯·è¿›å…¥å…¶ä»–ç›®å½•é€‰æ‹©ä¸‹è½½å³å¯ã€‚ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µè¿›å…¥é•œåƒç«™åˆ—è¡¨é€‰æ‹©ä¸‹è½½é€Ÿåº¦æ›´å¿«çš„é•œåƒç«™ä¸‹è½½ æœ€æ–°çš„23.03ç‰ˆæœ¬éœ€è¦åœ¨ä¸­ç§‘é™¢é•œåƒç«™ä¸‹è½½ æ–‡ä»¶è¯´æ˜ï¼š fw_payload_oe_qemuvirt.elf: åˆ©ç”¨ openSBI å°† kernel-5.10 çš„ image ä½œä¸º payload æ‰€åˆ¶ä½œçš„ QEMU å¯åŠ¨æ‰€éœ€æ–‡ä»¶ openEuler-22.09-qemu-xfce.qcow2.tar.zst: openEuler RISC-V QEMU GUI é•œåƒå‹ç¼©åŒ… preview_start_vm_xfce.sh: GUI è™šæ‹Ÿæœºå¯åŠ¨è„šæœ¬ openeuler-22.09-qemu.qcow2.tar.zst: openEuler RISC-V QEMU headless é•œåƒå‹ç¼©åŒ… preview_start_vm.sh: headless è™šæ‹Ÿæœºå¯åŠ¨è„šæœ¬ è§£å‹ï¼š 1sudo apt-get install zstd 1tar -I &#x27;zstdmt&#x27; -xvf openEuler-22.09-riscv64-qemu.qcow2.tar.zst æ‰§è¡Œå¯åŠ¨è„šæœ¬ 1chmod +x preview_start_vm.sh 1bash preview_start_vm.sh ç™»å½•ç³»ç»Ÿ ç”¨æˆ·å: root é»˜è®¤å¯†ç : openEuler12#$ 1234567891011121314151617181920212223242526openEuler 22.09Kernel 5.10.0 on an riscv644penEuler-riscv6 login: openEuler 22.09Kernel 5.10.0 on an riscv64openEuler-riscv64 login: rootPassword: Welcome to 5.10.0System information as of time: Mon Jul 3 07:52:19 PM CST 2023System load: 0.17Processes: 117Memory used: .6%Swap used: 0.0%Usage On: 6%Users online: 1[root@openEuler-riscv64 ~]# ls[root@openEuler-riscv64 ~]# pwd è¿œç¨‹ç™»å½•ç³»ç»Ÿ1ssh -p 12055 root@localhost é…ç½®ç³»ç»Ÿ ä»¥ä¸‹æ“ä½œå‡åœ¨rootç”¨æˆ·ä¸‹æ‰§è¡Œï¼Œå¦‚æœåˆ‡æ¢äº†ç”¨æˆ·ä¼šæœ‰æç¤ºã€‚å› ä¸ºç³»ç»Ÿåˆå§‹çŠ¶æ€æ²¡æœ‰æ™®é€šç”¨æˆ·ï¼Œä¹Ÿæ²¡æœ‰sudoï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨rootå®Œæˆä¸€äº›åŸºç¡€é…ç½®ã€‚ ä¿®æ”¹rootå¯†ç åŸå¯†ç å¤ªå¤æ‚ï¼Œä¿®æ”¹ç®€å•å¯†ç  12passwd root# è¾“å…¥ä¸¤æ¬¡å¯†ç  æ·»åŠ æ™®é€šç”¨æˆ·123# æ·»åŠ ç”¨æˆ· useruseradd -s /bin/bash -d /home/user -m user 12passwd user# è¾“å…¥ä¸¤æ¬¡å¯†ç  12# æ·»åŠ ç®¡ç†å‘˜æƒé™usermod -aG wheel user ä¿®æ”¹æ—¶é—´12echo &quot;NTP=ntp.aliyun.com&quot; &gt;&gt; /etc/systemd/timesyncd.conf 12systemctl restart systemd-timesyncd.service æŸ¥çœ‹timesyncdè¿è¡ŒçŠ¶æ€ï¼š 1systemctl status systemd-timesyncd.service dateå‘½ä»¤å¯æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ—¶é—´ã€‚éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸã€‚ æ—¶é—´åŠ¡å¿…æ­£ç¡®è®¾ç½®ï¼Œé”™è¯¯çš„æ—¶é—´ä¼šå½±å“è¯¸å¦‚httpsçš„TLSè®¤è¯ç­‰è¿‡ç¨‹ã€‚ é…ç½®DNS12vim /etc/resolv.confnameserver 119.29.29.29 é…ç½®è½¯ä»¶åŒ…æºé…ç½®æ–‡ä»¶ä¸º /etc/yum.repos.d/openEuler.repo ä¸‹ 12345678910111213141516171819mv /etc/yum.repos.d/openEuler.repo /etc/yum.repos.d/openEuler.repo.bk &amp;&amp; sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/yum.repos.d/openEuler.repo# just for test[mainline]name=mainlinebaseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/22.09/enabled=1gpgcheck=0# just for test[epol]name=epolbaseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/22.09/enabled=1gpgcheck=0[extra]name=extrabaseurl=https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-22.09-V1-riscv64/repo/extra/enabled=1gpgcheck=0EOF&quot; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºOpenEulerè¿˜åœ¨å¿«é€Ÿå‘å±•ä¸­ï¼Œé•œåƒåœ°å€å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥éœ€ç¡®è®¤åœ°å€æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œå¦‚æ— æ³•è®¿é—®ä¼šå¯¼è‡´404é”™è¯¯ [repoid]ä¸­çš„repoidä¸ºè½¯ä»¶ä»“åº“ï¼ˆrepositoryï¼‰çš„IDå·ï¼Œæ‰€æœ‰.repoé…ç½®æ–‡ä»¶ä¸­çš„å„repoidä¸èƒ½é‡å¤ï¼Œå¿…é¡»å”¯ä¸€ã€‚ç¤ºä¾‹ä¸­repoidè®¾ç½®ä¸ºbaseã€‚nameä¸ºè½¯ä»¶ä»“åº“æè¿°çš„å­—ç¬¦ä¸²ã€‚baseurlä¸ºè½¯ä»¶ä»“åº“çš„åœ°å€ã€‚enabledä¸ºæ˜¯å¦å¯ç”¨è¯¥è½¯ä»¶æºä»“åº“ï¼Œå¯é€‰å€¼ä¸º1å’Œ0ã€‚é»˜è®¤å€¼ä¸º1ï¼Œè¡¨ç¤ºå¯ç”¨è¯¥è½¯ä»¶æºä»“åº“ã€‚gpgcheckå¯è®¾ç½®ä¸º1æˆ–0ï¼Œ1è¡¨ç¤ºè¿›è¡Œgpgï¼ˆGNU Private Guardï¼‰æ ¡éªŒï¼Œ0è¡¨ç¤ºä¸è¿›è¡Œgpgæ ¡éªŒï¼Œgpgcheckå¯ä»¥ç¡®å®šrpmåŒ…çš„æ¥æºæ˜¯æœ‰æ•ˆå’Œå®‰å…¨çš„ã€‚gpgkeyä¸ºéªŒè¯ç­¾åç”¨çš„å…¬é’¥ã€‚ ç£ç›˜æ‰©å®¹ åœ¨å®¿ä¸»æœºä¸Šå®‰è£… qemu-img å·¥å…·: 1apt install qemu-utils åœ¨ openEuler RISC-V è™šæ‹Ÿæœºä¸Šå®‰è£… growpart å·¥å…·: 1dnf install cloud-utils-growpart å…³é—­QEMUè™šæ‹Ÿæœº æŠŠ qcow2 æ–‡ä»¶çš„å®¹é‡åŠ 200GBï¼š 123456789101112131415$ qemu-img resize *.qcow2 +200GImage resized.$ qemu-img info *.qcow2image: openEuler-preview.riscv64.qcow2file format: qcow2virtual size: 220 GiB disk size: 9.58 GiBcluster_size: 65536Format specific information: compat: 1.1 compression type: zlib lazy refcounts: false refcount bits: 16 corrupt: false extended l2: false QEMU å¯åŠ¨ openEuler RISC-Vã€‚ å¯åŠ¨ä»¥åï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹åˆ†åŒºæƒ…å†µï¼šå¯ä»¥çœ‹åˆ°æ ¹ç›®å½•å¯¹åº”çš„åˆ†åŒºåªä½¿ç”¨äº† 10Gã€‚ 1234[root@openEuler-RISCV-rare ~]# lsblkNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTvda 254:0 0 220G 0 diskâ””â”€vda1 254:1 0 10G 0 part / æ‰©å±•åˆ†åŒº vda1ï¼Œæ‰§è¡Œ 1growpart /dev/vda1 æ‰§è¡Œ lsblk å¯ä»¥çœ‹åˆ° / æ‰€åœ¨çš„ vda1 åˆ†åŒºå·²ç»æ‰©å±•åˆ°äº†é¢„æœŸå¤§å° 123456[root@openEuler-RISCV-rare ~]# growpart /dev/vda 1CHANGED: partition=1 start=2048 old: size=20969472 end=20971520 new: size=419428319 end=419430367[root@openEuler-RISCV-rare ~]# lsblkNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTvda 254:0 0 220G 0 diskâ””â”€vda1 254:1 0 220G 0 part / æ‰©å±•æ–‡ä»¶ç³»ç»Ÿï¼š 12resize2fs /dev/vda1 BUGnetwork backend â€˜userâ€˜ is not compiled into this binarygit clone https://gitlab.freedesktop.org/slirp/libslirp.git http://security.ubuntu.com/ubuntu/pool/main/libs/libslirp/libslirp-dev_4.1.0-2ubuntu2.2_amd64.deb 1sudo apt-get install libslirp-dev é‡æ–°ç¼–è¯‘QEMUï¼š 12cd qemu-build &amp;&amp; rm -rf build 1234cd qemu-build &amp;&amp; ./configure --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu \\ --enable-kvm --enable-sdl --enable-slirp\\ --prefix=/home/user/program/riscv64-qemu 1make install -j $(nproc) å‚è€ƒæ–‡æ¡£RISC-V/doc/tutorials/vm-qemu-oErv.md at master Â· openeuler-mirror/RISC-V Â· GitHub openEuler 22.09æŠ€æœ¯ç™½çš®ä¹¦","categories":[],"tags":[{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"},{"name":"RISC-V","slug":"RISC-V","permalink":"http://example.com/tags/RISC-V/"},{"name":"OpenEuler","slug":"OpenEuler","permalink":"http://example.com/tags/OpenEuler/"}]},{"title":"SSH ç™»å½• OpenStack å®ä¾‹","slug":"SSH-ç™»å½•-OpenStack-å®ä¾‹","date":"2023-06-28T14:20:05.000Z","updated":"2023-06-28T14:21:29.291Z","comments":true,"path":"2023/06/28/SSH-ç™»å½•-OpenStack-å®ä¾‹/","link":"","permalink":"http://example.com/2023/06/28/SSH-%E7%99%BB%E5%BD%95-OpenStack-%E5%AE%9E%E4%BE%8B/","excerpt":"","text":"åŸºç¡€é…ç½®æ·»åŠ å®‰å…¨ç»„è§„åˆ™ï¼Œå…è®¸ Ping å’Œ SSH è®¿é—®è™šæ‹Ÿæœºï¼š 1openstack security group rule create --proto icmp default 12345678910111213141516171819202122root@allone:~# openstack security group rule create --proto icmp default+-------------------+---------------------------+| Field | Value |+-------------------+-------------------------+| created_at | 2023-06-28T06:26:10Z || description | || direction | ingress || ether_type | IPv4 || id | fe9adfc3-dc42-4680-8ecd-ed5a667e1215 || location | cloud=&#x27;&#x27;, project.domain_id=, project.domain_name=&#x27;Default&#x27;, project.id=&#x27;6396365541a74b6b8ea8812d1af05e70&#x27;, project.name=&#x27;admin&#x27;, region_name=&#x27;&#x27;, zone= || name | None || port_range_max | None || port_range_min | None || project_id | 6396365541a74b6b8ea8812d1af05e70 || protocol | icmp || remote_group_id | None || remote_ip_prefix | 0.0.0.0/0 || revision_number | 0 || security_group_id | f10a3927-5e76-47b4-8691-4169348845ae || tags | [] || updated_at | 2023-06-28T06:26:10Z |+-------------------+--------------------------------+ 1openstack security group rule create --proto tcp --dst-port 22 default 12345678910111213141516171819202122root@allone:~# openstack security group rule create --proto tcp --dst-port 22 default+-------------------+--------------------------------------+| Field | Value |+-------------------+--------------------------------------------+| created_at | 2023-06-28T06:26:15Z || description | || direction | ingress || ether_type | IPv4 || id | af699cf9-5fc0-45e2-a009-0bb7828e2d1a || location | cloud=&#x27;&#x27;, project.domain_id=, project.domain_name=&#x27;Default&#x27;, project.id=&#x27;6396365541a74b6b8ea8812d1af05e70&#x27;, project.name=&#x27;admin&#x27;, region_name=&#x27;&#x27;, zone= || name | None || port_range_max | 22 || port_range_min | 22 || project_id | 6396365541a74b6b8ea8812d1af05e70 || protocol | tcp || remote_group_id | None || remote_ip_prefix | 0.0.0.0/0 || revision_number | 0 || security_group_id | f10a3927-5e76-47b4-8691-4169348845ae || tags | [] || updated_at | 2023-06-28T06:26:15Z |+-------------------+-----------------+ å‘½ä»¤è¡Œæ–¹å¼ç”Ÿæˆç§˜é’¥1ssh-keygen -q -N â€œâ€ -q é€‰é¡¹è¡¨ç¤ºé™é»˜æ¨¡å¼ï¼Œå³åœ¨ç”Ÿæˆå¯†é’¥å¯¹çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¾“å‡ºä»»ä½•æç¤ºä¿¡æ¯æˆ–è­¦å‘Šã€‚ -N é€‰é¡¹åé¢å¯ä»¥è·Ÿä¸€ä¸ªå¯†ç ä½œä¸ºå‚æ•°ã€‚è¯¥å¯†ç å°†ç”¨äºä¿æŠ¤ç”Ÿæˆçš„ç§é’¥æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®š -N å‚æ•°ï¼Œåˆ™ç§é’¥æ–‡ä»¶å°†ä¸å—å¯†ç ä¿æŠ¤ã€‚ è¯¥å‘½ä»¤ä¼šåœ¨~/.ssh/ç›®å½•ä¸­è‡ªåŠ¨ç”Ÿæˆä¸€å¯¹å…¬ç§é’¥ã€‚é»˜è®¤ç§é’¥åç§°ï¼šid_rsaï¼Œé»˜è®¤å…¬é’¥åç§°ï¼šid_rsa.pub 1openstack keypair create --public-key ~/.ssh/id_rsa.pub mykey å‘ OpenStack æ·»åŠ å…¬é’¥ï¼Œç”¨äºåˆ›å»ºå®ä¾‹æ—¶é€‰æ‹©ï¼š 12345678root@allone:~# openstack keypair create --public-key ~/.ssh/id_rsa.pub mykey+-------------+-------------------------------------------------+| Field | Value |+-------------+-------------------------------------------------+| fingerprint | 11:36:75:e0:c3:98:4c:97:90:30:f5:69:e1:17:a9:4b || name | mykey || user_id | 9027da91a2134825a421d78db11011d0 |+-------------+-------------------------------------------------+ 1openstack keypair list 1234567root@allone:~# openstack keypair list+---------------------+-------------------------------------------------+| Name | Fingerprint |+---------------------+-------------------------------------------------+| mykey | 11:36:75:e0:c3:98:4c:97:90:30:f5:69:e1:17:a9:4b || ubuntu cloud server | 67:b4:8a:64:83:4e:47:d0:7c:87:46:34:3b:03:e6:17 |+---------------------+-------------------------------------------------+ 1ssh ubuntu@10.0.2.111 å…¶ä¸­ï¼Œubuntunæ˜¯å®ä¾‹çš„ç”¨æˆ·åï¼Œ10.0.2.111æ˜¯å®ä¾‹çš„ IP åœ°å€ã€‚ WEB ç•Œé¢æ–¹å¼åˆ›å»ºå¯†é’¥å¯¹Project-Key Pairs-Create Keypairs ä¸ºå¯†é’¥å¯¹èµ·ä¸ªåå­—ï¼šsshkeyï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªç±»å‹ï¼šSSH Key ç‚¹å‡»åˆ›å»ºåä¼šå¼¹å‡ºä¸‹è½½ç§é’¥çš„çª—å£ï¼Œè¿™æ—¶å€™éœ€è¦å°†ç§é’¥ä¸‹è½½åˆ°æœ¬åœ°ã€‚å¹¶å°†ä»–ç§»åŠ¨åˆ° ssh ç›®å½•ä¸‹æ–¹ä¾¿ç®¡ç†ã€‚ 123# åˆ‡æ¢rootç”¨æˆ·ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€ç›´éƒ½æ˜¯ç”¨rootç”¨æˆ·æ“ä½œçš„OpenStacksudo sumv sshkey.pem ~/.ssh ä½¿ç”¨å…¬é’¥åˆ›å»ºå®ä¾‹Project-Instances-Launch Instance åœ¨ Key Pair ä¸­é€‰æ‹©åˆšåˆšåˆ›å»ºçš„ sshkeyã€‚è¿™é‡Œå®é™…å°±æ˜¯å°†åˆ›å»ºçš„å¯†é’¥å¯¹ä¸­çš„å…¬é’¥æ”¾åˆ°äº†æˆ‘ä»¬çš„å®ä¾‹ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ‹¿ç€æœ¬åœ°çš„ç§é’¥å»è®¿é—®å®ä¾‹ã€‚ ç™»å½•å®ä¾‹1ssh -i ~/.ssh/sshkey.pem ubuntun@10.0.2.111 å…¶ä¸­~/.ssh/sshkey.pemæ˜¯æˆ‘ä»¬ä¸‹è½½çš„ç§é’¥æ–‡ä»¶ï¼Œubuntunæ˜¯å®ä¾‹çš„ç”¨æˆ·åï¼Œ10.0.2.111æ˜¯å®ä¾‹çš„ IP åœ°å€ã€‚","categories":[{"name":"OpenStack","slug":"OpenStack","permalink":"http://example.com/categories/OpenStack/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"OpenStack","slug":"OpenStack","permalink":"http://example.com/tags/OpenStack/"}]},{"title":"VirtualBox Ubuntu æ— æ³•è”ç½‘","slug":"VirtualBox-Ubuntuæ— æ³•è”ç½‘","date":"2023-06-26T14:38:02.000Z","updated":"2023-06-26T14:39:54.687Z","comments":true,"path":"2023/06/26/VirtualBox-Ubuntuæ— æ³•è”ç½‘/","link":"","permalink":"http://example.com/2023/06/26/VirtualBox-Ubuntu%E6%97%A0%E6%B3%95%E8%81%94%E7%BD%91/","excerpt":"","text":"è§£å†³æ–¹æ¡ˆVirtualBox Ubuntu æ— æ³•è”ç½‘ï¼Œé‡å¯åå¯ä»¥è”ç½‘ä½†æ˜¯å‡ åˆ†é’Ÿåæ–­å¼€ç½‘ç»œã€‚ç¬”è€…çš„æƒ…å†µæ˜¯å› ä¸º NetworkManager è‡ªåŠ¨ä¿®æ”¹äº†ç½‘ç»œé…ç½®å¯¼è‡´æ— æ³•è”ç½‘ï¼Œå…·ä½“ç°è±¡æ˜¯å¼€æœºåç½‘å¡ä¿¡æ¯å¦‚ä¸‹ï¼š 1234567891011121314151617user@allone:~$ ifconfigbrq64ff9b38-fa: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 ether ce:29:de:12:35:06 txqueuelen 1000 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0enp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 10.0.2.15 netmask 255.255.255.0 broadcast 10.0.2.255 inet6 fe80::2e8f:2be6:3752:dec4 prefixlen 64 scopeid 0x20&lt;link&gt; ether 08:00:27:18:31:21 txqueuelen 1000 (Ethernet) RX packets 947 bytes 584483 (584.4 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 800 bytes 116611 (116.6 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 æ­¤æ—¶ç½‘ç»œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œç»è¿‡ä¸€ä¸¤åˆ†é’Ÿåç½‘ç»œä¿¡æ¯å¦‚ä¸‹ï¼š 123456789101112131415161718user@allone:~$ ifconfigbrq64ff9b38-fa: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 10.0.2.15 netmask 255.255.255.0 broadcast 10.0.2.255 ether ce:29:de:12:35:06 txqueuelen 1000 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0enp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet6 fe80::2e8f:2be6:3752:dec4 prefixlen 64 scopeid 0x20&lt;link&gt; ether 08:00:27:18:31:21 txqueuelen 1000 (Ethernet) RX packets 947 bytes 584483 (584.4 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 800 bytes 116611 (116.6 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 ä¹Ÿå°±æ˜¯é»˜è®¤è™šæ‹Ÿç½‘å¡çš„ IP åœ°å€ä¸¢å¤±ï¼Œè€Œä¸çŸ¥åç½‘å¡ brq64ff9b38-fa å´æ‹¥æœ‰äº† IPï¼Œæ­¤æ—¶ç½‘ç»œä¸å¯ç”¨ã€‚å¦‚æœæœ‰ç±»ä¼¼æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å°è¯•è§£å†³ï¼Œå¦‚æœæ˜¯å…¶ä»–é—®é¢˜ã€‚è¯·é…Œæƒ…å‚è€ƒã€‚ å…³é—­ NetworkManager 12sudo systemctl stop NetworkManager 1sudo systemctl disable NetworkManager 1sudo systemctl mask NetworkManager å¼€å¯ systemd-networkd 1sudo systemctl unmask systemd-networkd.service 12sudo systemctl enable systemd-networkd.service 12sudo systemctl start systemd-networkd.service é…ç½® Netplan ç¼–è¾‘/etc/netplan/01-network-manager-all.yaml 1234567891011network: version: 2 renderer: networkd ethernets: enp0s3: dhcp4: yes dhcp6: yes addresses: [10.0.2.15/23] nameservers: addresses: [8.8.8.8, 8.8.4.4] optional: true å…¶ä¸­ enp0s3 ä¸ºç½‘å¡åç§°ï¼Œaddresses ä¸ºç½‘å¡å¯¹åº”çš„ IPï¼Œå‡å¯ä»¥é€šè¿‡ ifconfig æŸ¥è¯¢ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼Œä»¥åŠé—®é¢˜å›æº¯æœ‰å…´è¶£å¯ä»¥ç»§ç»­é˜…è¯»ã€‚ èƒŒæ™¯çŸ¥è¯†NetworkManager ä¸ systemd-networkedNetworkManager æ˜¯ä¸€é¡¹åç«¯æœåŠ¡ï¼Œç”¨äºæ§åˆ¶ Ubuntu æ“ä½œç³»ç»Ÿä¸Šçš„ç½‘ç»œæ¥å£ã€‚NetworkManager çš„æ›¿ä»£æ–¹æ³•æ˜¯ systemd-networkedï¼Œè¿™ä¸¤è€…åªèƒ½ä½¿ç”¨ä¸€ä¸ªã€‚åœ¨ Ubuntu æ¡Œé¢ä¸Šï¼ŒNetworkManager æ˜¯é€šè¿‡å›¾å½¢ç”¨æˆ·ç•Œé¢ç®¡ç†ç½‘ç»œç•Œé¢çš„é»˜è®¤æœåŠ¡ã€‚å› æ­¤ï¼Œå¦‚æœè¦é€šè¿‡ GUI é…ç½® IP åœ°å€ï¼Œåˆ™åº”å¯ç”¨ NetworkManagerã€‚å¦‚æœç”¨çš„æ˜¯æ— æ¡Œé¢çš„ Server ç‰ˆï¼Œå°±å¯ä»¥ä½¿ç”¨ systemd-networked æ¥ç®¡ç†ç½‘ç»œã€‚ è¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥é€šè¿‡é…ç½® netplanï¼Œå³/etc/netplan/01-network-manager-all.yaml æ¥ç®¡ç†ç½‘ç»œï¼Œä½†æ˜¯åœ¨ renderer å±æ€§ä¸­é…ç½®æœ‰æ‰€ä¸åŒï¼Œä½¿ç”¨ NetworkManager æ—¶é…ç½®å¦‚ä¸‹ï¼š 123network: version: 2 renderer: NetworkManager è€Œä½¿ç”¨ systemd-networked æ—¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š 123network: version: 2 renderer: networkd æœ‰æ—¶æ— æ³•è”ç½‘å¯èƒ½æ˜¯å› ä¸ºé…ç½®ä¸å®é™…ä½¿ç”¨çš„ç½‘ç»œç®¡ç†æ–¹å¼ä¸åŒ¹é…å¯¼è‡´çš„ã€‚","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Virtual Box çš„ä¸åŒè™šæ‹Ÿæœºç½‘ç»œæ¨¡å¼","slug":"Virtual-Boxçš„ä¸åŒè™šæ‹Ÿæœºç½‘ç»œæ¨¡å¼","date":"2023-06-17T08:48:02.000Z","updated":"2023-06-17T09:03:41.765Z","comments":true,"path":"2023/06/17/Virtual-Boxçš„ä¸åŒè™šæ‹Ÿæœºç½‘ç»œæ¨¡å¼/","link":"","permalink":"http://example.com/2023/06/17/Virtual-Box%E7%9A%84%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ğŸ’» NAT ç½‘ç»œæ¨¡å¼ NAT ç½‘ç»œä»¥è·¯ç”±å™¨çš„ NAT åŠŸèƒ½ä¸ºåŸç†ï¼Œå…è®¸è™šæ‹Ÿæœºé€šè¿‡å…±äº«ä¸»æœºçš„ IP åœ°å€è®¿é—®äº’è”ç½‘ï¼Œä½†è™šæ‹Ÿæœºä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ã€‚é€šè¿‡ç«¯å£è½¬å‘å¯ä»¥å®ç°è™šæ‹Ÿæœºä¹‹é—´çš„è¿æ¥ã€‚ ğŸ”— æ¡¥æ¥ç½‘ç»œæ¨¡å¼ æ¡¥æ¥ç½‘ç»œæ¨¡å¼é€šè¿‡è™šæ‹Ÿäº¤æ¢æœºè¿æ¥è™šæ‹Ÿæœºå’Œä¸»æœºï¼Œä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥é€šè¿‡å±€åŸŸç½‘è®¿é—®äº’è”ç½‘ï¼Œå¹¶å…è®¸è™šæ‹Ÿæœºä¹‹é—´ç›´æ¥é€šä¿¡ã€‚ ğŸ”’ å†…éƒ¨ç½‘ç»œæ¨¡å¼ å†…éƒ¨ç½‘ç»œæ¨¡å¼ä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥åˆ›å»ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„ç½‘ç»œï¼Œè™šæ‹Ÿæœºä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚ ğŸ  ä»…ä¸»æœºç½‘ç»œæ¨¡å¼ ä»…ä¸»æœºç½‘ç»œæ¨¡å¼å…è®¸è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥é€šä¿¡ï¼Œå¹¶ä¸”ä¸ä¸»æœºä¹‹é—´ä¹Ÿå¯ä»¥é€šä¿¡ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘æˆ–å¤–éƒ¨ç½‘ç»œã€‚ è™šæ‹Ÿæœº â†” è™šæ‹Ÿæœº è™šæ‹Ÿæœº â†’ å®¿ä¸»æœº å®¿ä¸»æœº â†’ è™šæ‹Ÿæœº è™šæ‹Ÿæœº â†’ äº’è”ç½‘ äº’è”ç½‘ â†’ è™šæ‹Ÿæœº ç½‘ç»œåœ°å€è½¬æ¢ NAT Ã— âˆš Ã— âˆš Ã— NAT ç½‘ç»œ âˆš âˆš Ã— âˆš Ã— Bridged Adapter æ¡¥æ¥ç½‘å¡ âˆš âˆš âˆš âˆš âˆš","categories":[],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}]},{"title":"è®¡ç®—æœºç½‘ç»œ - æ•°æ®é“¾è·¯å±‚","slug":"è®¡ç®—æœºç½‘ç»œ-æ•°æ®é“¾è·¯å±‚","date":"2023-06-11T02:26:10.000Z","updated":"2023-06-11T02:31:56.063Z","comments":true,"path":"2023/06/11/è®¡ç®—æœºç½‘ç»œ-æ•°æ®é“¾è·¯å±‚/","link":"","permalink":"http://example.com/2023/06/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/","excerpt":"","text":"æ•°æ®é“¾è·¯å±‚åŸºæœ¬æ¦‚å¿µç»“ç‚¹ï¼šä¸»æœºï¼Œè·¯ç”±å™¨é“¾è·¯ï¼šç½‘ç»œä¸­ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„ç‰©ç†é€šé“ï¼Œé“¾è·¯çš„ä¼ è¾“ä»‹è´¨ä¸»è¦æœ‰åŒç»çº¿ã€å…‰çº¤å’Œå¾®æ³¢ã€‚åˆ†ä¸ºæœ‰çº¿é“¾è·¯ã€æ— çº¿é“¾è·¯ã€‚æ•°æ®é“¾è·¯ï¼šç½‘ç»œä¸­ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„é€»è¾‘é€šé“ï¼ŒæŠŠå®ç°æ§åˆ¶æ•°æ®ä¼ è¾“åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šå°±æ„æˆæ•°æ®é“¾è·¯ã€‚å¸§ï¼šé“¾è·¯å±‚çš„åè®®æ•°æ®å•å…ƒï¼Œå°è£…ç½‘ç»œå±‚æ•°æ®æŠ¥ã€‚ æ•°æ®é“¾è·¯å±‚è´Ÿè´£é€šè¿‡ä¸€æ¡é“¾è·¯ä»ä¸€ä¸ªç»“ç‚¹å‘å¦ä¸€ä¸ªç‰©ç†é“¾è·¯ç›´æ¥ç›¸è¿çš„ç›¸é‚»ç»“ç‚¹ä¼ é€æ•°æ®æŠ¥ã€‚ æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½åŠŸèƒ½æ¦‚è¿°æ•°æ®é“¾è·¯å±‚åœ¨ç‰©ç†å±‚æä¾›æœåŠ¡çš„åŸºç¡€ä¸Šå‘ç½‘ç»œå±‚æä¾›æœåŠ¡ï¼Œå…¶æœ€åŸºæœ¬çš„æœåŠ¡æ˜¯å°†æºè‡ªç½‘ç»œå±‚æ¥çš„æ•°æ®å¯é åœ°ä¼ è¾“åˆ°ç›¸é‚»èŠ‚ç‚¹çš„ç›®æ ‡æœºç½‘ç»œå±‚ã€‚å…¶ä¸»è¦ä½œç”¨æ˜¯åŠ å¼ºç‰©ç†å±‚ä¼ è¾“åŸå§‹æ¯”ç‰¹æµçš„åŠŸèƒ½ï¼Œå°†ç‰©ç†å±‚æä¾›çš„å¯èƒ½å‡ºé”™çš„ç‰©ç†è¿ æ¥æ”¹é€ æˆä¸ºé€»è¾‘ä¸Šæ— å·®é”™çš„æ•°æ®é“¾è·¯ï¼Œä½¿ä¹‹å¯¹ç½‘ç»œå±‚è¡¨ç°ä¸ºä¸€æ¡æ— å·®é”™çš„é“¾è·¯ã€‚ ä¸ºç½‘ç»œå±‚æä¾›æœåŠ¡ æ— ç¡®è®¤æ— è¿æ¥æœåŠ¡ æœ‰ç¡®è®¤æ— è¿æ¥æœåŠ¡ æœ‰ç¡®è®¤é¢å‘è¿æ¥æœåŠ¡ é“¾è·¯ç®¡ç† è¿æ¥çš„å»ºç«‹ï¼Œç»´æŒï¼Œé‡Šæ”¾ ç»„å¸§ å·®é”™æ§åˆ¶ å°è£…æˆå¸§å°è£…æˆå¸§å°±æ˜¯åœ¨ä¸€æ®µæ•°æ®çš„å‰åéƒ¨åˆ†æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œè¿™æ ·å°±æ„æˆäº†ä¸€ä¸ªå¸§ã€‚æ¥æ”¶ç«¯åœ¨æ”¶åˆ°ç‰©ç†å±‚ä¸Šäº¤çš„æ¯”ç‰¹æµåï¼Œå°±èƒ½æ ¹æ®é¦–éƒ¨å’Œå°¾éƒ¨çš„æ ‡è®°(å¸§å®šç•Œç¬¦)ï¼Œä»æ”¶åˆ°çš„æ¯”ç‰¹æµä¸­è¯†åˆ«å¸§çš„å¼€å§‹å’Œç»“æŸã€‚ é¦–éƒ¨å’Œå°¾éƒ¨åŒ…å«è®¸å¤šçš„æ§åˆ¶ä¿¡æ¯ï¼Œä»–ä»¬çš„ä¸€ä¸ªé‡è¦ä½œç”¨ï¼šå¸§å®šç•Œï¼ˆç¡®å®šå¸§çš„ç•Œé™ï¼‰ã€‚ å¸§åŒæ­¥ï¼šæ¥æ”¶æ–¹åº”å½“èƒ½ä»æ¥æ”¶åˆ°çš„äºŒè¿›åˆ¶æ¯”ç‰¹æµä¸­åŒºåˆ†å‡ºå¸§çš„èµ·å§‹å’Œç»ˆæ­¢ã€‚ é€æ˜ä¼ è¾“ å·®é”™æ§åˆ¶ä¼ è¾“ä¸­çš„å·®é”™éƒ½æ˜¯ç”±å™ªå£°å¼•èµ·çš„ã€‚ å…¨å±€æ€§ï¼Œç”±äºçº¿è·¯æœ¬èº«ç”µæ°”ç‰¹æ€§æ‰€äº§ç”Ÿçš„éšæœºå™ªå£° å±€éƒ¨æ€§ï¼Œç”±äºå¤–ç•ŒçŸ­æš‚çš„åŸå› é€ æˆçš„å†²å‡»å™ªå£° å·®é”™åˆåˆ†ä¸ºä½é”™å’Œå¸§é”™ ä½é”™ï¼Œæ¯”ç‰¹ä½å‡ºé”™ï¼Œ1 å˜ 0,0 å˜ 1 å¸§é”™ï¼ŒåŒ…æ‹¬ä¸¢å¤±ï¼Œé‡å¤ï¼Œå¤±åº å‘ç°å·®é”™çš„å¸§åå°±å°†é”™è¯¯å€¼ä¸¢å¼ƒï¼Œå¦‚æœæ²¡æœ‰å·®é”™æ§åˆ¶ï¼Œå°†ä¼šæµªè´¹å¤§é‡èµ„æºï¼Œå› ä¸ºä¼ è¾“è¿‡ç¨‹ä¸­ä¸€ç›´ä¼ è¾“äº†é”™è¯¯çš„ä¿¡æ¯ã€‚ å·®é”™æ§åˆ¶ æ£€é”™ç¼–ç  å¥‡å¶æ ¡éªŒç  å¾ªç¯å†—ä½™ CRC çº é”™ç¼–ç  æµ·æ˜ç  è¿™é‡Œæåˆ°çš„ç¼–ç å’Œç‰©ç†å±‚çš„ç¼–ç ä¸è°ƒåˆ¶ä¸åŒï¼Œç‰©ç†å±‚çš„ç¼–ç é’ˆå¯¹å•ä¸ªæ¯”ç‰¹ï¼Œè§£å†³ä¼ è¾“åŒæ­¥é—®é¢˜ã€‚è¿™é‡Œçš„ç¼–ç é’ˆå¯¹çš„æ˜¯ä¸€ç»„æ¯”ç‰¹ï¼Œé€šè¿‡å†—ä½™ç çš„æŠ€æœ¯æ£€æµ‹ä¼ è¾“ä¸­æ˜¯å¦å‡ºé”™ã€‚ å¥‡å¶æ ¡éªŒç å¥‡æ ¡éªŒç ï¼šåœ¨ä¿¡æ¯å…ƒå‰åŠ ä¸Š 1 ä½åä½¿å¾— 1 çš„ä¸ªæ•°ä¸ºå¥‡æ•°ä¸ªå¶æ£€éªŒç ï¼šåœ¨ä¿¡æ¯å…ƒå‰åŠ ä¸Š 1 ä½åä½¿å¾— 1 çš„ä¸ªæ•°ä¸ºå¶æ•°ä¸ª è¯¥æ£€æµ‹æ–¹å¼åªèƒ½æ£€æµ‹å‡ºå¥‡æ•°ä¸ªçš„ä½é”™ï¼Œæ£€é”™èƒ½åŠ›ä¸º 50% 12345å¦‚æœä¸€ä¸ªå­—ç¬¦Sçš„ASCIç¼–ç ä»ä½åˆ°é«˜ä¾æ¬¡ä¸º1100101ï¼Œé‡‡ç”¨å¥‡æ ¡éªŒï¼Œåœ¨ä¸‹è¿°æ”¶åˆ°çš„ä¼ è¾“åå­—ç¬¦ä¸­ï¼Œå“ªç§é”™è¯¯ä¸èƒ½æ£€æµ‹ï¼ŸA.11000011B.11001010 C.11001100 D.11010011ç­”ï¼šå› ä¸ºé‡‡ç”¨å¥‡æ ¡éªŒï¼Œæ‰€ä»¥åœ¨é¦–ä½åŠ ä¸Šä¸€ä¸ª1ä½¿å¾—æ‰€æœ‰1ä¸ªæ•°ä¸ºå¥‡æ•°å˜æˆ11100101ï¼ŒABCé€‰é¡¹ä¸­1çš„ä¸ªæ•°éƒ½æ˜¯å¶æ•°ä¸ªï¼Œæ˜æ˜¾å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥èƒ½æ£€æµ‹å‡ºé”™è¯¯ï¼Œä½†æ˜¯Dé€‰é¡¹çš„1ä¹Ÿæ˜¯å¥‡æ•°ä¸ªï¼Œå°†æ— æ³•åˆ¤æ–­æ˜¯å¦å‡ºç°å·®é”™ã€‚ CRC å¾ªç¯å†—ä½™ç  é“¾è·¯å±‚çš„ä¸¤ç§ä¿¡é“å±€åŸŸç½‘ã€å¹¿åŸŸç½‘æ•°æ®é“¾è·¯å±‚çš„è®¾å¤‡æµé‡æ§åˆ¶ä¸å¯é ä¼ è¾“å•å¸§æ»‘åŠ¨çª—å£ä¸åœæ­¢ç­‰å¾…åè®® SR é€‰æ‹©é‡ä¼ åè®® æ»‘åŠ¨çª—å£æœ€å¤§å€¼","categories":[],"tags":[]},{"title":"Ubuntu 22.04 ç³»ç»Ÿå®‰è£…æ°´æ˜Ÿ wifi é©±åŠ¨ Mercury MW310UH","slug":"ubuntu-22-04-ç³»ç»Ÿå®‰è£…æ°´æ˜Ÿ-wifi-é©±åŠ¨Mercury-MW310UH","date":"2023-06-11T02:00:02.000Z","updated":"2023-06-11T02:06:56.420Z","comments":true,"path":"2023/06/11/ubuntu-22-04-ç³»ç»Ÿå®‰è£…æ°´æ˜Ÿ-wifi-é©±åŠ¨Mercury-MW310UH/","link":"","permalink":"http://example.com/2023/06/11/ubuntu-22-04-%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%B0%B4%E6%98%9F-wifi-%E9%A9%B1%E5%8A%A8Mercury-MW310UH/","excerpt":"","text":"ç¡®è®¤ç½‘å¡ä¿¡æ¯1lsusb å¾—åˆ° USB è®¾å¤‡ä¿¡æ¯ 1Bus 001 Device 013: ID 0bda:a192 Realtek Semiconductor Corp. Disk å®‰è£…ç½‘å¡é©±åŠ¨æ ¹æ®è®¾å¤‡ IDï¼Œç”¨å…³é”®è¯ç½‘ä¸Šæœç´ ä¸€ä¸‹ç›¸å…³é©±åŠ¨ï¼Œå¾—åˆ°æœ‰è¿™ä¸ªé©±åŠ¨å¯ç”¨ï¼š 1234567sudo apt updatesudo apt install build-essential git dkmsgit clone https://gitee.com/BrightXu/rtl8192fu.gitcd rtl8192fumake -j$(nproc)sudo make installsudo modprobe 8192fu æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ 1usb-devices å¦‚æœæœ‰ Driver=rtl8192fu å­—æ®µè¯´æ˜å®‰è£…æˆåŠŸã€‚å¦‚æœæ¡Œé¢å³ä¸Šè§’æ— çº¿è¿æ¥å›¾æ ‡å¯ç”¨ï¼Œè¯´æ˜å¯ä»¥ä½¿ç”¨æ— çº¿ç½‘ç»œäº†ã€‚å¦‚æœä¸å¯ç”¨ç»§ç»­å¾€ä¸‹çœ‹ã€‚ ä¿®æ”¹è®¾å¤‡æ¨¡å¼å¦‚æœä½¿ç”¨lsusbå‘½ä»¤æŸ¥çœ‹è®¾å¤‡ï¼Œå‘ç°è®¾å¤‡æœ«å°¾ä¾ç„¶æ˜¯ Disk æ¨¡å¼ï¼Œè¯´æ˜è¿™ä¸ªè®¾å¤‡æ˜¯ç£ç›˜è®¾å¤‡ï¼Œè¿˜ä¸èƒ½å½“åšç½‘ç»œé€‚é…å™¨ä½¿ç”¨ï¼Œéœ€è¦ä¿®æ”¹å…¶æ¨¡å¼ã€‚ 12sudo apt-get install -y usb-modeswitchsudo vim /lib/udev/rules.d/40-usb_modeswitch.rules åœ¨æœ€å LABEL ä¹‹å‰åŠ ä¸Š 123# Realtek 8192F Wifi AC USBATTR&#123;idVendor&#125;==&quot;0bda&quot;, ATTR&#123;idProduct&#125;==&quot;a192&quot;, RUN+=&quot;/usr/sbin/usb_modeswitch -K -v 0bda -p a192&quot;LABEL=&quot;modeswitch_rules_end&quot; 1sudo usb_modeswitch -KW -v 0bda -p a192 å…³é—­å®‰å…¨å¯åŠ¨å®‰å…¨å¯åŠ¨æ¨¡å¼ä¸‹æ— æ³•ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„é©±åŠ¨ï¼Œæ‰€ä»¥éœ€è¦åœ¨å¼€æœºæ—¶è¿›å…¥ BIOS å°†å®‰å…¨å¯åŠ¨å…³é—­ï¼Œæ¯ä¸ªä¸»æ¿ä¸ä¸€æ ·ï¼Œè‡ªè¡Œæœç´¢ã€‚ å‚è€ƒlinux ç³»ç»Ÿä¸‹ usb ç½‘å¡çš„é©±åŠ¨å®‰è£…_linux usb ç½‘å¡-CSDN åšå®¢ ä¸º ubuntu 22.04 ç³»ç»Ÿå®‰è£…æ°´æ˜Ÿ realtek 5g wifi é©±åŠ¨ - éƒ­åä¼Ÿçš„åšå®¢ ubuntu 18.04 usb æ— çº¿ç½‘å¡æ— æ³•ä½¿ç”¨â€“ID 0bda:a192 Realtek Semiconductor Corp._æ”¾ç¾Š Wa çš„åšå®¢-CSDN åšå®¢","categories":[],"tags":[]},{"title":"äº‘è®¡ç®—åŸºç¡€æŠ€æœ¯æ±‡æ€»","slug":"äº‘è®¡ç®—åŸºç¡€æŠ€æœ¯æ±‡æ€»","date":"2023-06-09T13:42:59.000Z","updated":"2023-06-09T13:43:13.243Z","comments":true,"path":"2023/06/09/äº‘è®¡ç®—åŸºç¡€æŠ€æœ¯æ±‡æ€»/","link":"","permalink":"http://example.com/2023/06/09/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF%E6%B1%87%E6%80%BB/","excerpt":"","text":"äº‘è®¡ç®—æœåŠ¡ç±»å‹ä¼ ç»Ÿæ¶æ„=&gt;Iaas=&gt;Paas=&gt;Saas è‡ªå·±çƒ§é¥­=&gt; å®å’šä¹°èœ=&gt; ç¾å›¢å¤–å–=&gt; é¤å…åƒé¥­ äº‘è®¡ç®—éƒ¨ç½²å½¢å¼ä»¥åŠåº”ç”¨ ç±»å‹ æè¿° ä¼˜ç‚¹ ç¼ºç‚¹ ç§æœ‰äº‘ åˆ©ç”¨å·²æœ‰è®¾å¤‡è‡ªæˆ‘æ„å»ºï¼Œäº‘ç«¯èµ„æºåªç»™å†…éƒ¨äººå‘˜ä½¿ç”¨ã€‚ å®‰å…¨æ€§é«˜ ç»´æŠ¤æˆæœ¬é«˜ ç¤¾åŒºäº‘ã€è¡Œä¸šäº‘ ä¸ºç‰¹å®šè¡Œä¸šæ„å»ºå…±äº«åŸºç¡€è®¾æ–½çš„äº‘ã€‚ æœ‰ä¸€å¥—ç”¨æˆ·ä½“ç³» ç»´æŠ¤æˆæœ¬é«˜ å…¬æœ‰äº‘ æ„å»ºå¤§å‹åŸºç¡€è®¾æ–½äº‘å‡ºç§Ÿç»™å…¬ä¼—ã€‚ ç”¨æˆ·æ¥è¯´æˆæœ¬ä½ï¼ŒæœåŠ¡å¤š å®‰å…¨æ€§ä½ æ··åˆäº‘ ä¸¤ç§æˆ–è€…ä¸¤ç§ä»¥ä¸Šçš„äº‘ç»„æˆçš„äº‘æœåŠ¡ æ•æ·ï¼Œçµæ´»ï¼Œé™ä½æˆæœ¬ å…¼å®¹æ€§é—®é¢˜ åº”ç”¨å­˜å‚¨äº‘ã€åŒ»ç–—äº‘ã€æ•™è‚²äº‘ã€ä¼ä¸šäº‘ã€é‡‘èäº‘ã€æ¸¸æˆäº‘ã€æ¡Œé¢äº‘ å…³é”®æŠ€æœ¯è™šæ‹ŸåŒ– åˆ†å¸ƒå¼å­˜å‚¨å°†æ•°æ®å­˜å‚¨åœ¨ä¸åŒçš„ç‰©ç†è®¾å¤‡ä¸­ã€‚è¿™ç§æ¨¡å¼ä¸ä»…æ‘†è„±äº†ç¡¬ä»¶è®¾å¤‡çš„é™åˆ¶ï¼ŒåŒæ—¶æ‰©å±•æ€§æ›´å¥½ï¼Œèƒ½å¤Ÿå¿«é€Ÿå“åº”ç”¨æˆ·éœ€æ±‚çš„å˜åŒ–ï¼ˆæ•´åˆå­˜å‚¨èµ„æºæä¾›åŠ¨æ€å¯ä¼¸ç¼©èµ„æºæ± çš„åˆ†å¸ƒå¼å­˜å‚¨æŠ€æœ¯) æ•°æ®ä¸­å¿ƒè”ç½‘è™šæ‹Ÿæœºä¹‹é—´éœ€è¦å®æ—¶åŒæ­¥å¤§é‡çš„æ•°æ®ï¼Œäº§ç”Ÿå¤§é‡ä¸œè¥¿æµé‡ã€‚ å¹¶è¡Œç¼–ç¨‹åœ¨å¹¶è¡Œç¼–ç¨‹æ¨¡å¼ä¸‹ï¼Œå¹¶å‘å¤„ç†ã€å®¹é”™ã€æ•°æ®åˆ†å¸ƒã€è´Ÿè½½å‡è¡¡ç­‰ç»†èŠ‚éƒ½è¢«æŠ½è±¡åˆ°ä¸€ä¸ªå‡½æ•°åº“ä¸­ï¼Œé€šè¿‡ç»Ÿä¸€æ¥å£ï¼Œç”¨æˆ·å¤§å°ºåº¦çš„è®¡ç®—ä»»åŠ¡è¢«è‡ªåŠ¨å¹¶å‘å’Œåˆ†å¸ƒæ‰§è¡Œï¼Œå³å°†ä¸€ä¸ªä»»åŠ¡è‡ªåŠ¨åˆ†æˆå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶è¡Œåœ°å¤„ç†æµ·é‡æ•°æ®ã€‚ ä½“ç³»ç»“æ„äº‘è®¡ç®—å¹³å°ä½“ç³»ç»“æ„ç”±ç”¨æˆ·ç•Œé¢ã€æœåŠ¡ç›®å½•ã€ç®¡ç†ç³»ç»Ÿã€éƒ¨ç½²å·¥å…·ã€ç›‘æ§å’ŒæœåŠ¡å™¨é›†ç¾¤ç»„æˆã€‚ è‡ªåŠ¨åŒ–éƒ¨ç½²å¯¹äº‘èµ„æºè¿›è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²æŒ‡çš„æ˜¯åŸºäºè„šæœ¬è°ƒèŠ‚çš„åŸºç¡€ä¸Šå®ç°ä¸åŒå‚å•†å¯¹äºè®¾å¤‡å·¥å…·çš„è‡ªåŠ¨é…ç½®ï¼Œç”¨ä»¥å‡å°‘äººæœºäº¤äº’æ¯”ä¾‹ã€æé«˜åº”å˜æ•ˆç‡ï¼Œé¿å…è¶…è´Ÿè·äººå·¥æ“ä½œç­‰ç°è±¡çš„å‘ç”Ÿï¼Œæœ€ç»ˆæ¨è¿›æ™ºèƒ½éƒ¨ç½²è¿›ç¨‹ã€‚ äº‘æœåŠ¡æä¾›å•†äºšé©¬é€Šäº‘ã€è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ã€ç™¾åº¦äº‘ã€åä¸ºäº‘ æŠ€æœ¯æ¶æ„ï¼šå¼€æºï¼ˆXen,KVMï¼‰ï¼ŒVmwareï¼Œå¾®è½¯ hyper-vï¼Œé˜¿é‡Œé£å¤© Apsara å¼€æºäº‘ç®¡ç†å¹³å°ï¼šOpenStack è™šæ‹ŸåŒ–ç®€ä»‹è™šæ‹ŸåŒ–ï¼šä¸€ç§è®¡ç®—æœºèµ„æºç®¡ç†æŠ€æœ¯ï¼Œå°†å„ç§ T å®ä½“èµ„æºæŠ½è±¡ã€è½¬æ¢æˆå¦ä¸€ç§å½¢å¼çš„æŠ€æœ¯éƒ½æ˜¯è™šæ‹ŸåŒ–ã€‚ä½œç”¨ï¼šé€šè¿‡è¯¥æŠ€æœ¯å°†ä¸€å°è®¡ç®—æœºè™šæ‹Ÿä¸ºå¤šå°é€»è¾‘è®¡ç®—æœºã€‚åœ¨ä¸€å°è®¡ç®—æœºä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªé€»è¾‘è®¡ç®—æœºï¼Œæ¯ä¸ªé€»è¾‘è®¡ç®—æœºå¯è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºéƒ½å¯ä»¥åœ¨ç›¸äº’ç‹¬ç«‹çš„ç©ºé—´å†…è¿è¡Œè€Œäº’ä¸å½±å“ï¼Œä»è€Œæ˜¾è‘—æé«˜è®¡ç®—æœºçš„å·¥ä½œæ•ˆç‡ã€‚ ä»è¡Œä¸šæ•°æ®äº’ç›¸å…³è”çš„è§’åº¦æ¥è¯´ï¼Œäº‘è®¡ç®—æ˜¯æåº¦ä¾èµ–è™šæ‹ŸåŒ–çš„ã€‚ä½†è™šæ‹ŸåŒ–å¹¶éäº‘è®¡ç®—ï¼Œäº‘è®¡ç®—ä¹Ÿå¹¶éè™šæ‹ŸåŒ–ã€‚è™šæ‹ŸåŒ–åªæ˜¯äº‘è®¡ç®—çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä½†å¹¶éäº‘è®¡ç®—çš„æ ¸å¿ƒå…³æ³¨ç‚¹ã€‚ äº‘è®¡ç®—æ˜¯ä¸€ç§æœåŠ¡ã€‚è™šæ‹ŸåŒ–æ˜¯äº‘è®¡ç®—çš„æŠ€æœ¯åŸºç¡€ã€‚ è™šæ‹ŸåŒ–ç›¸å…³çš„å‡ ä¸ªæ¦‚å¿µGuest OS:è¿è¡Œåœ¨è™šæ‹Ÿæœºä¹‹ä¸Šçš„ OSGuest Machine:è™šæ‹Ÿå‡ºæ¥çš„è™šæ‹ŸæœºVMM:è™šæ‹Ÿæœºç›‘æ§å™¨ï¼Œå³è™šæ‹ŸåŒ–å±‚ (Virtual Machine Monitor,VMM)Host OS:è¿è¡Œåœ¨ç‰©ç†æœºä¹‹ä¸Šçš„ OSHost Machine:ç‰©ç†æœº è™šæ‹ŸåŒ–ç±»å‹ è™šæ‹ŸåŒ–ç±»å‹ æè¿° ç‰¹ç‚¹ æ¡ˆä¾‹ å¯„å±…è™šæ‹ŸåŒ–ï¼ˆType2ï¼‰ åœ¨ä¸»æœºï¼ˆå®¿ä¸»ï¼‰æ“ä½œç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè™šæ‹ŸåŒ–ç¨‹åº - ç®€å•ã€æ˜“äºå®ç°ã€‚- å®‰è£…å’Œè¿è¡Œåº”ç”¨ç¨‹åºä¾èµ–äºä¸»æœºæ“ä½œç³»ç»Ÿå¯¹è®¾å¤‡çš„æ”¯æŒã€‚- æœ‰ä¸¤å±‚ OSï¼Œç®¡ç†å¼€é”€è¾ƒå¤§ï¼Œæ€§èƒ½æŸè€—å¤§ã€‚- è™šæ‹Ÿæœºå¯¹å„ç§ç‰©ç†è®¾å¤‡ (cpuã€å†…å­˜ã€ç¡¬ç›˜ç­‰) çš„è°ƒç”¨ï¼Œéƒ½é€šè¿‡è™šæ‹ŸåŒ–å±‚å’Œå®¿ä¸»æœºçš„ OS ä¸€èµ·åè°ƒæ‰èƒ½å®Œæˆã€‚ - Vmware- VirturalBox è£¸é‡‘å±è™šæ‹ŸåŒ– (Type1) ç›´æ¥å°† VMM å®‰è£…åœ¨ç¡¬ä»¶è®¾å¤‡ä¸Šï¼ŒVMM åœ¨è¿™ç§æ¨¡å¼ä¸‹åˆå«åš Hypervisorï¼Œè™šæ‹Ÿæœºæœ‰æŒ‡ä»¤è¦æ‰§è¡Œæ—¶ï¼ŒHypervisors ä¼šæ¥ç®¡è¯¥æŒ‡ä»¤ï¼Œæ¨¡æ‹Ÿç›¸åº”çš„æ“ä½œã€‚ - ä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿã€‚- æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼Œå¤šç§åº”ç”¨ã€‚- ä¾èµ–è™šæ‹Ÿå±‚å†…æ ¸å’ŒæœåŠ¡å™¨æ§åˆ¶å°è¿›è¡Œç®¡ç†ã€‚- éœ€è¦å¯¹è™šæ‹Ÿå±‚çš„å†…æ ¸è¿›è¡Œå¼€å‘ï¼ˆéš¾åº¦å¤§ï¼‰ã€‚ - VMware ESX- Xen- åä¸º FusionSphere æ··åˆè™šæ‹ŸåŒ– åœ¨ä¸€ä¸ªç°æœ‰çš„æ­£å¸¸æ“ä½œç³»ç»Ÿä¸‹å®‰è£…ä¸€ä¸ªå†…æ ¸æ¨¡å—ï¼Œå†…æ ¸æ‹¥æœ‰è™šæ‹ŸåŒ–èƒ½åŠ›ã€‚(ç›¸å½“äºå¯„å±…ä¸è£¸é‡‘å±çš„æ··åˆ) - ç›¸å¯¹äºå¯„å±…è™šæ‹ŸåŒ–æ¶æ„ï¼Œæ€§èƒ½é«˜ã€‚- ç›¸å¯¹äºè£¸é‡‘å±è™šæ‹ŸåŒ–æ¶æ„ï¼Œä¸éœ€è¦å¼€å‘å†…æ ¸ã€‚- å¯æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿã€‚- éœ€åº•å±‚ç¡¬ä»¶æ”¯æŒè™šæ‹ŸåŒ–æ‰©å±•åŠŸèƒ½ã€‚ - KVM å¯„å±…è™šæ‹ŸåŒ–ï¼ˆType2ï¼‰ è£¸é‡‘å±è™šæ‹ŸåŒ– (Type1) æ··åˆè™šæ‹ŸåŒ– è™šæ‹ŸåŒ–å±‚æ¶æ„ æ¶æ„ æè¿° ç‰¹ç‚¹ å…¸å‹ å…¨è™šæ‹ŸåŒ– å³æ‰€æŠ½è±¡çš„ VM å…·æœ‰å®Œå…¨çš„ç‰©ç†ç‰¹æ€§ï¼Œè™šæ‹ŸåŒ–å±‚è´Ÿè´£æ•è· CPU æŒ‡ä»¤ï¼Œä¸ºæŒ‡ä»¤è®¿é—®ç¡¬ä»¶å……å½“åª’ä»‹ã€‚ - OS æ— éœ€ä¿®æ”¹ã€‚- é€Ÿåº¦å’ŒåŠŸèƒ½éƒ½éå¸¸ä¸é”™ï¼Œä½¿ç”¨éå¸¸ç®€å•ã€‚- ç§»æ¤æ€§å¥½ã€‚ - VMware- KVM- Virtualbox- Virtual PC åŠè™šæ‹ŸåŒ– èµ·åˆæ˜¯ä¸ºäº†è§£å†³å…¨è™šæ‹ŸåŒ–æ•ˆç‡ä¸é«˜çš„å›°éš¾ï¼Œå®ƒéœ€è¦ä¿®æ”¹ OSï¼Œå·¥ä½œæ•ˆç‡ç›¸å¯¹å…¨è™šæ‹ŸåŒ–è¦é«˜å¾ˆå¤šã€‚Hypervisor ç›´æ¥å®‰è£…åœ¨ç‰©ç†æœºä¸Šï¼Œå¤šä¸ªè™šæ‹Ÿæœºåœ¨ Hypervisor ä¸Šè¿è¡Œã€‚Hypervisor å®ç°æ–¹å¼ä¸€èˆ¬æ˜¯ä¸€ä¸ªç‰¹æ®Šå®šåˆ¶çš„ Linux ç³»ç»Ÿã€‚ - æ¶æ„æ›´ç²¾ç®€ã€‚- åœ¨æ•´ä½“é€Ÿåº¦ä¸Šæœ‰ä¸€å®šçš„ä¼˜åŠ¿ã€‚- éœ€è¦å¯¹ OS è¿›è¡Œä¿®æ”¹ï¼Œåœ¨ç”¨æˆ·ä½“éªŒæ–¹é¢æ¯”è¾ƒéº»çƒ¦ã€‚ - Xen- VMWare ESXi- å¾®è½¯ Hyper-V ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æ˜¯éšç€è™šæ‹ŸåŒ–æŠ€æœ¯çš„åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³› lntlã€AMD ç­‰ç¡¬ä»¶å‚å•†é€šè¿‡å¯¹ç¡¬ä»¶çš„æ”¹é€ æ¥æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯ã€‚å¸¸ç”¨äºä¼˜åŒ–å…¨è™šæ‹ŸåŒ–å’ŒåŠè™šæ‹ŸåŒ–äº§å“ï¼Œåƒ VMware Workstationï¼Œå®ƒè™½ç„¶å±äºå…¨è™šæ‹ŸåŒ–ï¼Œä½†å®ƒåœ¨ 6.0 ç‰ˆæœ¬ä¸­å¼•å…¥äº†ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œæ¯”å¦‚ Intel çš„ VT-x å’Œ AMD çš„ AMD-Vã€‚ä¸»æµå…¨è™šæ‹ŸåŒ–å’ŒåŠè™šæ‹ŸåŒ–äº§å“éƒ½æ”¯æŒç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ã€‚(VirtualBox,KVM,Xen ç­‰) è¾…åŠ©äº§å“ - VT-x- AMD-V å…¨è™šæ‹ŸåŒ– åŠè™šæ‹ŸåŒ– å…¨è™šæ‹ŸåŒ–ä»£è¡¨ KVM å’ŒåŠè™šæ‹ŸåŒ–ä»£è¡¨ Xen æ¶æ„å¯¹æ¯” æ¶æ„ æè¿° å¯¹æ¯” ç¤ºæ„å›¾ å…¨è™šæ‹ŸåŒ–ï¼šKVM KVM(Kernelâ€“Based Virtual Machines) æ˜¯ä¸€ä¸ªåŸºäº Linux å†…æ ¸çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥å°† Linux å†…æ ¸è½¬æ¢ä¸º Hypervisorã€‚.ä»è€Œä½¿å¾— Linuxp å†…æ ¸èƒ½å¤Ÿç›´æ¥ç®¡ç†è™šæ‹Ÿæœºï¼Œç›´æ¥è°ƒç”¨ Linux å†…æ ¸ä¸­çš„å†…å­˜ç®¡ç†ã€è¿›ç¨‹ç®¡ç†å­ç³»ç»Ÿæ¥ç®¡ç†è™šæ‹Ÿæœºã€‚ - æ”¯æŒå…¨è™šæ‹ŸåŒ–- å†…ç½®åœ¨å†…æ ¸ä¸­- ä¾¿äºç‰ˆæœ¬å®‰è£…ã€å‡çº§ã€ç»´æŠ¤ï¼Œæ€§èƒ½é«˜æ€»ç»“ï¼šKVM å¹³å°æ¶æ„ä¾§é‡æ€§èƒ½ åŠè™šæ‹ŸåŒ–ï¼šXen Xen:ç›´æ¥æŠŠæ“ä½œç³»ç»Ÿå†…æ ¸æ”¹äº†ï¼ŒæŠŠ OS æ”¹æˆä¸€ä¸ªè½»é‡çº§ Hypervisor1 åœ¨é‡Œé¢è¿è¡Œäº†ä¸€ä¸ªç®¡ç†æ‰€æœ‰èµ„æºä½œèµ„æºè°ƒåº¦çš„ Domain0ã€‚ç»„æˆï¼šç”± Xen Hypervisor(è™šæ‹ŸåŒ–å±‚)ã€Domin0(ç®¡ç†ä¸»æœº)ã€Domin U(ç”¨æˆ·è™šæ‹Ÿæœº) - æ”¯æŒå…¨è™šæ‹ŸåŒ–ã€åŠè™šæ‹ŸåŒ–- éœ€è¦å¯¹å†…æ ¸ä¿®æ”¹- æ›´æ–°ç‰ˆæœ¬ï¼ŒXen éœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ªå†…æ ¸éš”ç¦»æ€§å¥½æ€»ç»“ï¼šXen å¹³å°æ¶æ„ä¾§é‡å®‰å…¨æ€§ å®¹å™¨å®¹å™¨ï¼šåŒ…è£…æˆ–è£…è½½ç‰©å“çš„è´®å­˜å™¨ï¼Œåˆ©ç”¨ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä¸€ Liux æˆ– Windows æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼Œå®ç° App ä¸æ“ä½œç³»ç»Ÿçš„è§£è€¦ã€‚ ä¸»æµå®¹å™¨æŠ€æœ¯å®šä¹‰ï¼šDocker) å±äº Liux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ï¼Œä»–æ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux å®¹å™¨è§£å†³æ–¹æ¡ˆã€‚ä½œç”¨ï¼šå°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚æœ‰äº† Dockerï¼Œå°±ä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚ ç»„æˆï¼šå®¢æˆ·ç«¯ (Docker Client)ã€å®ˆæŠ¤è¿›ç¨‹ (Docker Daemon)ã€é•œåƒï¼ˆDocker Image)ã€å®¹å™¨ (DockerContainer)ã€ä»“åº“ï¼ˆDocker Registry) å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ« è™šæ‹ŸåŒ– å®¹å™¨ éš”ç¦»æ€§å¼ºï¼Œæœ‰ç‹¬ç«‹çš„ GUEST OS å…±äº«å†…æ ¸å’Œ OSï¼Œéš”ç¦»æ€§å¼± è™šæ‹ŸåŒ–æ€§èƒ½å·® (&gt;15%) è®¡ç®—/å­˜å‚¨æ— æŸè€—ï¼Œæ—  Guest0S å†…å­˜å¼€é”€ï¼ˆ200M) è™šæ‹Ÿæœºé•œåƒåºå¤§ï¼ˆåå‡  G å‡ å G),ä¸”å®ä¾‹åŒ–æ—¶ä¸èƒ½å…±äº« Docker å®¹å™¨é•œè±¡ 200300Mï¼Œä¸”å…¬å…±åŸºç¡€é•œè±¡å®ä¾‹åŒ–æ—¶å¯ä»¥å…±äº« è™šæ‹Ÿæœºé•œè±¡ç¼ºä¹ç»Ÿä¸€æ ‡å‡† Docker æä¾›äº†å®¹å™¨åº”ç”¨é•œè±¡äº‹å®æ ‡å‡†ï¼ŒOCI æ¨åŠ¨è¿›ä¸€æ­¥æ ‡å‡†åŒ– è™šæ‹Ÿæœºåˆ›å»ºæ…¢ (&gt;2 åˆ†é’Ÿ) ç§’çº§åˆ›å»º (&lt;10s)ç›¸å½“äºå»ºç«‹ç´¢å¼• è™šæ‹Ÿæœºå¯åŠ¨æ…¢ (&gt;30s) è¯»æ–‡ä»¶é€ä¸ªåŠ è½½ ç§’çº§ (&lt;1sï¼Œä¸å«åº”ç”¨æœ¬èº«å¯åŠ¨) èµ„æºè™šæ‹ŸåŒ–ç²’åº¦ä½ï¼Œå•æœº 10~100 è™šæ‹Ÿæœº å•æœºæ”¯æŒ 1000+ å®¹å™¨å¯†åº¦å¾ˆé«˜ï¼Œé€‚åˆå¤§è§„æ¨¡çš„éƒ¨ç½² è®¡ç®—è™šæ‹ŸåŒ–ä»æœåŠ¡å™¨ç»„å»ºè§’åº¦æ¥çœ‹ï¼Œè®¡ç®—è™šæ‹ŸåŒ–å¯åˆ†ä¸ºï¼š CPU è™šæ‹ŸåŒ–ï¼šä¿éšœ CPU èµ„æºçš„åˆç†è°ƒåº¦ä»¥åŠ VM ä¸Šçš„æŒ‡ä»¤èƒ½å¤Ÿæ­£å¸¸é«˜æ•ˆçš„æ‰§è¡Œã€‚ å†…å­˜è™šæ‹ŸåŒ–ï¼šä¿éšœå†…å­˜ç©ºé—´çš„åˆç†åˆ†é…ã€ç®¡ç†ï¼Œéš”ç¦»ï¼Œä»¥åŠé«˜æ•ˆå¯é åœ°ä½¿ç”¨ã€‚ I/O è™šæ‹ŸåŒ–ï¼šä¿éšœ VM çš„ 1O éš”ç¦»ä¸æ­£å¸¸é«˜æ•ˆçš„æ‰§è¡Œã€‚ å¸¸è§çš„è®¡ç®—æœåŠ¡æ¶æ„æœ‰ï¼š OpenStack Nova é˜¿é‡Œäº‘ ECS è…¾è®¯äº‘ CVM NovaOpenStack æ˜¯å¼€æºçš„äº‘å¹³å°ï¼Œé€šè¿‡ä¸åŒçš„ç»„ä»¶æä¾›è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œã€æ•°æ®åº“ç­‰å¤šç§äº‘æœåŠ¡ã€‚å…¶ä¸­è®¡ç®—æœåŠ¡ç”± Nova ç»„ä»¶æä¾›ï¼Œé€šè¿‡ nova-API ä¸å…¶ä»–ç»„ä»¶é€šä¿¡ï¼Œé€šè¿‡ nova-computex å¯¹æ¥ä¸åŒçš„è™šæ‹Ÿå±‚æä¾›è®¡ç®—è™šæ‹ŸåŒ–æœåŠ¡ã€‚ åˆ›å»ºå®ä¾‹æµç¨‹ï¼šåˆ›å»ºå®ä¾‹è¯·æ±‚ nova-apiï¼Œä¼šå”¤é†’ nova-databaseï¼Œè¯·æ±‚åˆ·æ–°æ•°æ®åº“ã€‚å°†è¯·æ±‚ç»™é˜Ÿåˆ—ç»„ä»¶ï¼Œnova-scheduler ä»é˜Ÿåˆ—ä¸­å–å‡ºè¯·æ±‚ï¼Œè¯·æ±‚è¿è¡Œç›¸å¯¹åº”çš„è™šæ‹Ÿæœºã€‚è¦è¿è¡Œä¸åŒçš„è™šæ‹Ÿæœºï¼Œéœ€è¦ä¸åŒçš„å¹³å°æ”¯æŒï¼ˆKVMï¼ŒXen,VMwareï¼‰ã€‚è™šæ‹Ÿæœºä¸èƒ½ç›´æ¥ä¸æ•°æ®åº“ç›´æ¥äº¤äº’ï¼Œéœ€è¦é€šè¿‡ nova-conductor è½¬å‘ã€‚ ECSäº‘æœåŠ¡å™¨ ECS(Elastic Compute Service) æ˜¯é˜¿é‡Œäº‘æä¾›çš„åŸºäº KVM è™šæ‹ŸåŒ–çš„å¼¹æ€§è®¡ç®—æœåŠ¡ï¼Œå»ºç«‹åœ¨é˜¿é‡Œäº‘é£å¤© (Apsara) åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿä¸Šã€‚è¯·æ±‚çš„ä¸»è¦è°ƒç”¨æµç¨‹ä¸ºï¼šOpenAPIã€.ä¸šåŠ¡å±‚ã€æ§åˆ¶ç³»ç»Ÿã€å®¿ä¸»æœºæœåŠ¡ã€‚ CVMäº‘æœåŠ¡å™¨ CVM(Cloud Virtual Machine)) æ˜¯è…¾è®¯æä¾›çš„åŸºäº KVM è™šæ‹ŸåŒ–çš„å¼¹æ€§è®¡ç®—æœåŠ¡ï¼Œå»ºç«‹åœ¨è…¾è®¯äº‘åˆ†å¸ƒå¼èµ„æºç®¡ç†è°ƒåº¦ç³»ç»Ÿ VStation.ä¸Šã€‚è¯·æ±‚çš„ä¸»è¦è°ƒç”¨æµç¨‹ä¸ºï¼šAPI Serverã€.VStationã€æœåŠ¡å™¨é›†ç¾¤ã€‚ CPU è™šæ‹ŸåŒ–åœ¨ç‰©ç†æœºï¼ˆå®¿ä¸»æœºï¼‰ä¸­é€šè¿‡çº¿ç¨‹æˆ–è¿›ç¨‹è¿™ç§çº¯è½¯ä»¶æ–¹å¼æ¨¡æ‹Ÿå‡ºå‡çš„ CPUï¼Œé€šè¿‡ CPU è™šæ‹ŸåŒ–å°±å¯ä»¥å°†ä¸€ä¸ªç‰©ç† CPU å‘ç»™ä¸åŒçš„è™šæ‹Ÿæœºä½¿ç”¨ã€‚ è™šæ‹Ÿå‡ºæ¥çš„æ¯é¢— CPU å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹ï¼Œå› æ­¤ç‰©ç† CPU æ ¸æ•°è¦å¤§äºè™šæ‹Ÿ CPU æ€»æ ¸æ•°ã€‚ CPU QoS(Quality of Service) æœåŠ¡è´¨é‡QoS ç”¨æ¥æ§åˆ¶è™šæ‹Ÿæœºä½¿ç”¨ CPU èµ„æºé‡çš„å¤§å°ã€‚CPU èµ„æºé™é¢ï¼šæ§åˆ¶è™šæ‹Ÿæœºå ç”¨ç‰©ç†èµ„æºä½¿ç”¨çš„ä¸Šé™ã€‚CPU èµ„æºä»½é¢ï¼šå®šä¹‰äº†å¤šå°è™šæ‹Ÿæœºåœ¨ç«äº‰ç‰©ç† CPU èµ„æºæ—¶ï¼Œéœ€æŒ‰æ¯”ä¾‹åˆ†é…è®¡ç®—èµ„æºã€‚CPU é¢„ç•™èµ„æºï¼šå®šä¹‰äº†å¤šå°è™šæ‹Ÿæœºåœ¨ç«äº‰ç‰©ç† CPU æ—¶ï¼Œæ¯å°è™šæ‹Ÿæœºæœ€ä½åˆ†é…çš„è®¡ç®—èµ„æºã€‚ NUMANUMA(Non Uniform Memory Access Architecture) éç»Ÿä¸€å†…å­˜è®¿é—®ä½“ç³»ç»“æ„ï¼Œæé«˜ç‰©ç†æœåŠ¡å™¨æ€§èƒ½çš„ä¸€ç§æŠ€æœ¯ã€‚ å°†ç‰©ç†æœåŠ¡å™¨çš„ CPU å’Œå†…å­˜èµ„æºåˆ†åˆ°å¤šä¸ª node ä¸Šï¼Œnode å†…çš„å†…å­˜è®¿é—®æ•ˆç‡æœ€é«˜ã€‚ NUMA ä¿è¯äº†ä¸€ä¸ª VM ä¸Šçš„ VCPU å°½é‡åˆ†é…åˆ°åŒä¸€ä¸ª node ä¸­çš„ç‰©ç† CPU ä¸Šï¼Œå¦‚æœä¸€å° VM çš„ VCPU è·¨ node è®¿é—®å†…å­˜çš„è¯ï¼Œè®¿é—®çš„å»¶æ—¶è‚¯å®šå¢åŠ ã€‚ å†…å­˜è™šæ‹ŸåŒ– è™šæ‹ŸåŒ–ç±»å‹ å…¨è™šæ‹ŸåŒ– åŠè™šæ‹ŸåŒ– ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– ä¸ºæ¯ä¸ª VM ç»´æŠ¤ä¸€ä¸ªå½±å­é¡µè¡¨è®°å½•è™šæ‹ŸåŒ–å†…å­˜ä¸ç‰©ç†å†…å­˜çš„æ˜ å°„å…³ç³»ï¼ŒVMM å°†å½±å­é¡µè¡¨æäº¤ç»™ CPU çš„å†…å­˜ç®¡ç†å•å…ƒ MMU è¿›è¡Œåœ°å€è½¬æ¢ï¼ŒVM çš„é¡µè¡¨æ— éœ€æ”¹åŠ¨ã€‚ é‡‡ç”¨é¡µè¡¨å†™å…¥æ³•ï¼Œä¸ºæ¯ä¸ª VM åˆ›å»ºä¸€ä¸ªé¡µè¡¨å¹¶å‘è™šæ‹ŸåŒ–å±‚æ³¨å†Œã€‚VMè¿è¡Œè¿‡ç¨‹ä¸­ VMM ä¸æ–­ç®¡ç†å’Œç»´æŠ¤è¯¥é¡µè¡¨ï¼Œç¡®ä¿ VM èƒ½ç›´æ¥è®¿é—®åˆ°åˆé€‚çš„åœ°å€ã€‚ EPT/NPT æ˜¯å†…å­˜ç®¡ç†å•å…ƒ MMU çš„æ‰©å±•ï¼ŒCPU ç¡¬ä»¶ä¸€ä¸ªç‰¹æ€§ï¼Œé€šè¿‡ç¡¬ä»¶æ–¹å¼å®ç° GuestOS ç‰©ç†å†…å­˜åœ°å€åˆ°ä¸»æœºç‰©ç†å†…å­˜åœ°å€çš„è½¬æ¢ï¼Œç³»ç»Ÿå¼€é”€æ›´ä½ï¼Œæ€§èƒ½æ›´é«˜ã€‚ å†…å­˜å¤ç”¨æŠ€æœ¯å†…å­˜å¤ç”¨æ˜¯æŒ‡åœ¨æœåŠ¡å™¨ç‰©ç†å†…å­˜ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç»¼åˆè¿ç”¨å†…å­˜å¤ç”¨æŠ€æœ¯å¯¹å†…å­˜è¿›è¡Œåˆ†æ—¶å¤ç”¨ã€‚å†…å­˜å¤ç”¨æŠ€æœ¯æœ‰ï¼š å†…å­˜æ°”æ³¡ï¼šè™šæ‹ŸåŒ–å±‚å°†è¾ƒç©ºé—² VM å†…å­˜ï¼Œåˆ†é…ç»™å†…å­˜ä½¿ç”¨è¾ƒé«˜çš„è™šæ‹Ÿæœºã€‚å†…å­˜çš„å›æ”¶å’Œåˆ†é…ç”±è™šæ‹ŸåŒ–å±‚å®ç°ï¼Œè™šæ‹Ÿæœºä¸Šçš„åº”ç”¨æ— æ„ŸçŸ¥ï¼Œæé«˜ç‰©ç†å†…å­˜åˆ©ç”¨ç‡ã€‚ï¼ˆè™šæ‹Ÿæœºåˆ†é…çš„å†…å­˜ä¸è¶…è¿‡ç‰©ç†æœºæ€»å†…å­˜ï¼‰ å†…å­˜äº¤æ¢ï¼šå°†å¤–éƒ¨å­˜å‚¨è™šæ‹Ÿæˆå†…å­˜ç»™ VM ä½¿ç”¨ï¼Œå°† VM ä¸Šé•¿æ—¶é—´æœªè®¿é—®çš„æ•°æ®å­˜æ”¾åˆ°å¤–éƒ¨å­˜å‚¨ä¸Šï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚VM å†æ¬¡è®¿é—®è¿™äº›æ•°æ®æ˜¯é€šè¿‡æ˜ å°„åœ¨ä¸å†…å­˜ä¸Šçš„æ•°æ®è¿›è¡Œäº¤æ¢ã€‚ å†…å­˜å…±äº«ï¼šVM åªå¯¹å…±ç”¨çš„å†…å­˜ï¼ˆå…±äº«æ•°æ®å†…å®¹ä¸ºé›¶çš„å†…å­˜é¡µï¼‰åšåªè¯»æ“ä½œï¼Œæœ‰å†™æ“ä½œæ—¶è¿ç”¨å†™æ—¶å¤åˆ¶ (VM æœ‰å†™æ“ä½œæ—¶ï¼Œå¼€è¾Ÿå¦ä¸€ç©ºé—´ï¼Œå¹¶ä¿®æ”¹æ˜ å°„) IO è™šæ‹ŸåŒ– å…¨è™šæ‹ŸåŒ– åŠè™šæ‹ŸåŒ– Pass-Thorughï¼ˆç›´é€šï¼‰ ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– é€šè¿‡è½¯ä»¶æ¨¡æ‹Ÿçš„å½¢å¼æ¨¡æ‹Ÿ O è®¾å¤‡ï¼Œä¸éœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œå¯¹è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿä¹Ÿä¸éœ€è¦ä¿®æ”¹ï¼ˆå› ä¸ºæ¨¡æ‹Ÿçš„éƒ½æ˜¯ä¸€ä¸ªå¸¸è§çš„ç¡¬ä»¶ç½‘å¡ï¼Œå¦‚ IntelE1000ï¼Œä¸»æµæ“ä½œç³»ç»Ÿä¸€èˆ¬éƒ½è‡ªå¸¦è¿™äº›é©±åŠ¨ï¼Œå› æ­¤é»˜è®¤æƒ…ä¸‹è™šæ‹Ÿæœºä¸éœ€è¦å†å®‰è£…é©±åŠ¨ã€‚ç¼ºç‚¹å°±æ˜¯æ€§èƒ½å·®ã€‚ ç”± Hypervisor æä¾›èµ„æºè°ƒç”¨æ¥å£ã€‚VM é€šè¿‡ç‰¹å®šçš„è°ƒç”¨æ¥å£ä¸ Hypervisor é€šä¿¡ï¼Œå®Œæˆè·å–å®Œæ•´/O èµ„æºæ§åˆ¶æ“ä½œã€‚(éœ€ä¿®æ”¹å†…æ ¸åŠé©±åŠ¨ç¨‹åºï¼Œå­˜åœ¨ç§»æ¤æ€§å’Œé€‚ç”¨æ€§é—®é¢˜ï¼Œå¯¼è‡´å…¶ä½¿ç”¨å—é™ã€‚) Hypervisor] ç›´æ¥æŠŠç¡¬ä»¶ PCI è®¾å¤‡åˆ†é…ç»™è™šæ‹Ÿç‹¬å ä½¿ç”¨ï¼Œæ€§èƒ½æŒ¡å½“ç„¶å¥½å•¦ã€‚ä½†æ˜¯æµªé—ç¡¬ä»¶è®¾å¤‡ï¼Œä¸”é…ç½®å¤æ‚ï¼Œé¦–å…ˆéœ€è¦åœ¨ hypervisor æŒ‡å®šé€šè¿‡ PClid æ–¹å¼åˆ†é…ç»™æŒ‡å®šçš„è™šæ‹Ÿæœºï¼Œç„¶åè™šæ‹Ÿæœºå†è¯†åˆ«åˆ°è®¾å¤‡å†å®‰è£…é©±åŠ¨æ¥ä½¿ç”¨ã€‚ é€šè¿‡ç¡¬ä»¶çš„è¾…åŠ©å¯ä»¥è®©è™šæ‹Ÿæœºç›´æ¥è®¿é—®ç‰©ç†è®¾å¤‡ï¼Œè€Œä¸éœ€è¦é€šè¿‡ VMMã€‚æœ€å¸¸ç”¨çš„å°±æ˜¯ SR-lOV(Single Root I/OVirtualizmion)å•æ ¹ I/O è™šæ‹ŸåŒ–æ ‡å‡†ï¼Œè¯¥æŠ€æœ¯å¯ä»¥ç›´æ¥è™šæ‹Ÿå‡º 128-512 ç½‘å¡ï¼Œå¯ä»¥è®©è™šæ‹Ÿæœºéƒ½æ‹¿åˆ°ä¸€å—ç‹¬ç«‹çš„ç½‘å¡ï¼Œç›´æ¥ä½¿ç”¨/O èµ„æºã€‚ å¸¸è§é›†ç¾¤ç­–ç•¥é›†ç¾¤ç®€ä»‹é›†ç¾¤æ˜¯ä¸€ç§è®¡ç®—æœºç³»ç»Ÿï¼Œé€šè¿‡ä¸€ç»„è®¡ç®—æœºæˆ–æœåŠ¡å™¨çš„è½¯ç¡¬ä»¶è¿æ¥èµ·æ¥é«˜åº¦ç´§å¯†åœ°åä½œå®Œæˆè®¡ç®—å·¥ä½œã€‚åœ¨å®¢æˆ·ç«¯çœ‹æ¥ä¸ºå…¶æä¾›æœåŠ¡çš„åªæœ‰ä¸€å°è®¾å¤‡ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä¸€ç¾¤è®¾å¤‡çš„é›†åˆï¼Œåªä¸è¿‡è¿™äº›è®¾å¤‡æä¾›çš„æœåŠ¡ä¸€æ ·ã€‚ é›†ç¾¤ç³»ç»Ÿä¸­å•ä¸ªè®¡ç®—æœºé€šå¸¸ç§°ä¸ºèŠ‚ç‚¹ï¼Œé€šè¿‡å±€åŸŸç½‘è¿æ¥ï¼Œåˆ©ç”¨å¤šä¸ªè®¡ç®—æœºè¿›è¡Œå¹¶è¡Œè®¡ç®—è·å¾—å¾ˆé«˜è®¡ç®—é€Ÿåº¦ï¼Œä¹Ÿå¯ä»¥ç”¨å¤šä¸ªè®¡ç®—æœºåšå¤‡ä»½æé«˜å¯é æ€§ã€‚ï¼ˆå¹¶è¡Œè®¡ç®—æŠ€æœ¯ï¼‰ HA ç­–ç•¥HA(High Availability) é«˜å¯ç”¨æ€§ï¼Œä¸€ç§è®©æœåŠ¡ä¸­æ–­å°½å¯èƒ½å°‘çš„æŠ€æœ¯ã€‚å°†å¤šå°ä¸»æœºç»„å»ºæˆä¸€ä¸ªæ•…éšœè½¬ç§»é›†ç¾¤ï¼Œè¿è¡Œåœ¨é›†ç¾¤ä¸Šçš„æœåŠ¡ï¼ˆæˆ– VM) ä¸ä¼šå› ä¸ºå•å°ä¸»æœºçš„æ•…éšœè€Œåœæ­¢ã€‚ æå‡æ•…éšœæ¢å¤é€Ÿåº¦ï¼Œé™ä½ä¸šåŠ¡ä¸­æ–­æ—¶é—´ã€ä¿éšœä¸šåŠ¡è¿ç»­æ€§ã€å®ç°ä¸€å®šçš„ç³»ç»Ÿè‡ªç»´æŠ¤ã€‚ DRS ç­–ç•¥DRS(Dynamic resource scheduling) åŠ¨æ€èµ„æºè°ƒåº¦ï¼Œæ ¹æ®å¯¹èµ„æºæ± èµ„æºè´Ÿè½½çš„åŠ¨æ€ç›‘æ§ï¼Œåˆç†è§¦å‘å‡åŒ€åˆ†é…è§„ä¾§ï¼Œå®ç°èµ„æºæ± ä¸­çš„ç‰©ç†æœåŠ¡å™¨ä¹‹é—´é‡æ–°åˆ†é…èµ„æºï¼Œè¾¾åˆ°è´Ÿè½½å‡è¡¡ã€æ¶ˆå³°å¡«è°·ã€‚ å½“ç‰©ç†æœåŠ¡å™¨ä¸Šè´Ÿè½½è¿‡å¤§æ—¶ï¼Œé€šè¿‡ DRS å°†è™šæ‹Ÿæœºè¿ç§»åˆ°å…¶ä»–è´Ÿè½½è¾ƒè½»çš„ç‰©ç†æœåŠ¡å™¨ä¸Šã€‚å½“è™šæ‹Ÿæœºé‡åˆ°è´Ÿè½½å¢å¤§æ—¶ï¼ŒDRS å°†ä¸ºèµ„æºæ± ä¸­çš„ç‰©ç†æœåŠ¡å™¨é‡æ–°åˆ†é…è™šæ‹Ÿæœºå¯ä½¿ç”¨èµ„æºï¼Œåœ¨å¤šä¸ªè™šæ‹Ÿæœºä¹‹é—´æ™ºèƒ½åœ°åˆ†é…å¯ç”¨èµ„æºã€‚ DPM ç­–ç•¥DPMï¼ˆDistributed power management) åˆ†å¸ƒå¼ç”µæºç®¡ç†ï¼Œç”¨äºä¸šåŠ¡è¾ƒè½»æ—¶ï¼ŒæŠŠè™šæ‹ŸæœºåŠ¨æ€â€œé›†ä¸­â€åˆ°é›†ç¾¤ä¸­çš„å°‘éƒ¨åˆ†ä¸»æœºä¸Šï¼Œå°†å…¶ä»–ä¸»æœºå¾…æœºï¼ŒèŠ‚çœç”µåŠ›æ¶ˆè€—ï¼Œç­‰ä¸šåŠ¡é‡è¾ƒå¤§æ—¶ï¼Œå†é‡æ–°å”¤é†’ä¹‹å‰å¾…æœºçš„ä¸»æœºã€‚ æ‰§è¡Œ DPM ç­–ç•¥çš„å‰ææ˜¯å¼€å¯ DRS ç­–ç•¥ï¼Œå³é›†ç¾¤å¿…é¡»å…ˆè®¾ç½®å¥½ DRS ç­–ç•¥ï¼Œæ‰èƒ½è®¾ç½® DPM ç­–ç•¥ã€‚ å­˜å‚¨è™šæ‹ŸåŒ–å­˜å‚¨ç±»å‹å¸¸ç”¨çš„å­˜å‚¨ç±»å‹æœ‰ï¼š æœ¬åœ°ç£ç›˜ DAS ç®€ä»‹ äº‘è®¡ç®—è™šæ‹ŸåŒ–åœºæ™¯ä¸‹çš„æœ¬åœ°ç£ç›˜æ˜¯æŒ‡ä½¿ç”¨æœåŠ¡å™¨æœ¬åœ°çš„ç£ç›˜èµ„æºï¼Œç»è¿‡ RAD(ç£ç›˜é˜µåˆ—) åŒ–åæä¾›ç»™è™šæ‹ŸåŒ–å¹³å°è¿›è¡Œä½¿ç”¨ã€‚ DAS(Direct-Attached Storage) ç›´è¿å¼å­˜å‚¨ï¼šä¸€ä¸ªå­˜å‚¨è®¾å¤‡ä¸ä½¿ç”¨å­˜å‚¨ç©ºé—´çš„æœåŠ¡å™¨ç›´æ¥ç›¸è¿çš„æ¶æ„ã€‚DAS ä¸ºæœåŠ¡å™¨æä¾›å—çº§çš„å­˜å‚¨æœåŠ¡ã€‚ ä¼˜ç‚¹ - ä½¿ç”¨æ–¹ä¾¿- æ— å…±äº«æ¡†æ¶ - å¤šä¸ªç£ç›˜åˆå¹¶æˆä¸€ä¸ªé€»è¾‘ç£ç›˜ï¼Œæ»¡è¶³æµ·é‡å­˜å‚¨çš„éœ€æ±‚- å¯å®ç°åº”ç”¨æ•°æ®å’Œæ“ä½œç³»ç»Ÿçš„åˆ†ç¦»- èƒ½æé«˜å­˜å–æ€§èƒ½- å®æ–½ç®€å• ç¼ºç‚¹ - å¯¹è·¨æœåŠ¡å™¨æ¥è¯´æ²¡æœ‰å¤‡ä»½ã€å†—ä½™æœºåˆ¶ - æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œæ•°æ®ä¸å¯è®¿é—®- ä¼ è¾“è·ç¦»çŸ­ NAS SAN ç®€ä»‹ NAS(Network Attached Storage) ç½‘ç»œé™„åŠ å­˜å‚¨ï¼šå°†åˆ†å¸ƒã€ç‹¬ç«‹çš„æ•°æ®è¿›è¡Œæ•´åˆï¼Œé›†ä¸­åŒ–ç®¡ç†ï¼Œä»¥ä¾¿å¯¹ä¸åŒä¸»æœºå’Œåº”ç”¨æœåŠ¡å™¨è¿›è¡Œè®¿é—®çš„æŠ€æœ¯ã€‚NAS å°†å­˜å‚¨è®¾å¤‡è¿æ¥åˆ°ç°æœ‰çš„ç½‘ç»œä¸Šæ¥æä¾›æ•°æ®å’Œæ–‡ä»¶æœåŠ¡ã€‚ SAN(Storage Area Networks) å­˜å‚¨åŒºåŸŸç½‘ç»œï¼šæ˜¯ä¸€ç§é«˜é€Ÿçš„ã€ä¸“é—¨ç”¨äºå­˜å‚¨æ“ä½œçš„ç½‘ç»œï¼Œé€šå¸¸ç‹¬ç«‹äºè®¡ç®—æœºå±€åŸŸç½‘ã€‚æä¾›åœ¨ä¸»æœºå’Œå­˜å‚¨ç³»ç»Ÿä¹‹é—´æ•°æ®ä¼ è¾“ï¼Œç½‘ç»œå†…éƒ¨æ•°æ®ä¼ è¾“çš„é€Ÿç‡å¿«ã€‚å¸¸è§æ¶æ„æœ‰ FC SANã€IP SANã€‚ ä¼˜ç‚¹ - æ”¯æŒå¿«ç…§ç­‰é«˜çº§ç‰¹æ€§- é›†ä¸­å­˜å‚¨- æä¾›å®‰å…¨é›†æˆç¯å¢ƒï¼ˆç”¨æˆ·è®¤è¯å’Œæˆæƒ) - å­˜å‚¨å®¹é‡åˆ©ç”¨ç‡é«˜- å…¼å®¹æ€§é«˜- ä¼ è¾“è·ç¦»è¿œ- é«˜å¸¦å®½- ä¸»æœºã€å­˜å‚¨è®¾å¤‡å¯ä»¥ç‹¬ç«‹æ‰©å±• ç¼ºç‚¹ - ä¼ è¾“é€Ÿç‡ä½- å‰æœŸå®‰è£…å’Œè®¾å¤‡æˆæœ¬é«˜ - æˆæœ¬é«˜ã€å¤æ‚ äº‘å­˜å‚¨åŸºæœ¬æ¦‚å¿µå­˜å‚¨èµ„æºï¼šè¡¨ç¤ºå®é™…çš„ç‰©ç†å­˜å‚¨è®¾å¤‡ï¼Œä¾‹å¦‚ DAS(ç›´è¿å­˜å‚¨)ã€NAS(ç½‘ç»œé™„åŠ å­˜å‚¨)ã€SA(å­˜å‚¨åŒºåŸŸç½‘ç»œ) ç­‰ã€‚ å­˜å‚¨è®¾å¤‡ï¼šè¡¨ç¤ºå­˜å‚¨èµ„æºä¸­çš„ç®¡ç†å•å…ƒï¼Œä¾‹å¦‚æœ¬åœ°ç£ç›˜ã€LUN(é€»è¾‘å•å…ƒå·)ã€Storage å­˜å‚¨æ± ã€NAS å…±äº«ç›®å½•ç­‰ã€‚ æ•°æ®å­˜å‚¨ï¼šè¡¨ç¤ºè™šæ‹ŸåŒ–å¹³å°ä¸­å¯ç®¡ç†çš„å­˜å‚¨é€»è¾‘å•å…ƒï¼Œæ‰¿è½½äº†è™šæ‹Ÿæœºä¸šåŠ¡ï¼Œåˆ›å»ºç£ç›˜ã€‚ åˆ›å»ºè™šæ‹Ÿå­˜å‚¨çš„æµç¨‹ åœ¨ä¸»æœºè½¯ä»¶ç•Œé¢æ·»åŠ å­˜å‚¨èµ„æº (SANã€DAS ç­‰)ï¼Œå¯¹ä¸»æœºçš„å¯åŠ¨è¿›è¡Œé…ç½®ã€‚ ä¸»æœºå…³è”å­˜å‚¨èµ„æºåï¼Œè¿›è¡Œæ‰«æå­˜å‚¨è®¾å¤‡ï¼ˆæœ¬åœ°ç£ç›˜ã€LUN ç­‰ï¼‰ï¼Œå°†å…·ä½“çš„è®¾å¤‡æ‰«æåˆ°ä¸»æœºä¸Šã€‚ ä¸»æœºåœ¨é€‰æ‹©å­˜å‚¨è®¾å¤‡ï¼Œè¿›è¡Œæ•°æ®å­˜å‚¨çš„æ·»åŠ ï¼Œå¹¶è¿›è¡Œè™šæ‹ŸåŒ–ã€‚ æœ€åå¯¹è™šæ‹ŸåŒ–å¥½çš„æ•°æ®å­˜å‚¨è¿›è¡Œåˆ›å»ºå·ç­‰æ“ä½œã€‚ å­˜å‚¨æ¨¡å¼ éè™šæ‹ŸåŒ–å­˜å‚¨ è™šæ‹ŸåŒ–å­˜å‚¨ è£¸è®¾å¤‡æ˜ å°„ ä¼ ç»Ÿçš„å­˜å‚¨æ¨¡å¼ï¼Œå°±æ˜¯æŠŠç£ç›˜è¿›è¡Œåˆ†åŒºï¼Œåˆ†å‰²æˆä¸åŒçš„é€»è¾‘å·ï¼Œæ¯ä¸€ä¸ªé€»è¾‘å·å¯ä»¥ç»™åˆ°è™šæ‹Ÿæœºè¿›è¡Œä½¿ç”¨ã€‚ å°†ä¸åŒçš„å­˜å‚¨è®¾å¤‡ã€ç£ç›˜è¿›è¡Œæ ¼å¼åŒ–ï¼Œæ ¼å¼åŒ–çš„ç›®çš„æ˜¯å±è”½åº•å±‚å­˜å‚¨è®¾å¤‡çš„èƒ½åŠ›ã€æ¥å£åè®®ç­‰å·®å¼‚æ€§ï¼Œå°†å„ç§å­˜å‚¨èµ„æºè½¬åŒ–ä¸ºç»Ÿä¸€ç®¡ç†çš„æ•°æ®å­˜å‚¨èµ„æºã€‚ å°†ç£ç›˜ç›´æ¥ç»™åˆ°è™šæ‹Ÿæœºä½¿ç”¨ï¼Œè®©è™šæ‹Ÿæœºç›´æ¥å¤„ç†è°ƒç”¨å­˜å‚¨çš„å‘½ä»¤ï¼ˆç›´æ¥è®¿é—®ç£ç›˜ï¼‰ä¸­é—´è™šæ‹ŸåŒ–å±‚ä¸å†å¯¹å…¶è¿›è¡Œä»»ä½•å¹²é¢„ï¼ˆå·éƒ½ä¸éœ€è¦åˆ›å»ºï¼‰ ç‰¹ç‚¹ - æ€§èƒ½å¥½ (ä¸å†æœ‰ä¸­é—´çš„è™šæ‹ŸåŒ–å±‚ï¼ŒVM è¯»å†™ç›´æ¥åœ¨ç£ç›˜ä¸Š)ã€é€Ÿåº¦å¿«ã€æ•ˆç‡é«˜ã€‚- æ”¯æŒçš„å­˜å‚¨åŠŸèƒ½å°‘ï¼ˆä¸æ”¯æŒå¿«ç…§ã€ç²¾ç®€é…ç½®ç­‰ï¼‰ - æ”¯æŒå¤šç§å­˜å‚¨åŠŸèƒ½ï¼ˆå¿«ç…§ã€ç²¾ç®€ç£ç›˜ã€ç£ç›˜æ‰©å®¹ã€å­˜å‚¨çƒ­è¿ç§»ç­‰)ã€‚- æ€§èƒ½ä¸é«˜ï¼ˆæ²¡æœ‰éè™šæ‹ŸåŒ–å­˜å‚¨å¥½ï¼‰ é€Ÿåº¦å¿«ï¼ˆä¸‰ç§æ¨¡å¼ä¸­æœ€å¿«ï¼‰ã€æ€§èƒ½å¥½ã€‚æ”¯æŒçš„å­˜å‚¨åŠŸèƒ½å°‘ï¼ˆä¸æ”¯æŒå¿«ç…§ã€ç²¾ç®€é…ç½®ç­‰ï¼‰ï¼Œä»…æ”¯æŒéƒ¨åˆ†æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿæœºä½¿ç”¨ã€æ•°æ®å­˜å‚¨åªèƒ½æ•´å—å½“åšè£¸è®¾å¤‡æ˜ å°„çš„ç£ç›˜ä½¿ç”¨ï¼Œä¸å¯åˆ†å‰²ã€‚ å­˜å‚¨è™šæ‹ŸåŒ–æ–¹æ³•åŸºäºä¸»æœºçš„å­˜å‚¨è™šæ‹ŸåŒ–è‹¥ä»…æ˜¯å•ä¸ªä¸»æœºæœåŠ¡å™¨ï¼ˆæˆ–å•ä¸ªé›†ç¾¤ï¼‰è®¿é—®å¤šä¸ªç£ç›˜é˜µåˆ—ï¼Œå¯é‡‡ç”¨åŸºäºä¸»æœºçš„å­˜å‚¨è™šæ‹ŸåŒ–ï¼šè™šæ‹ŸåŒ–çš„å·¥ä½œé€šè¿‡ç‰¹å®šçš„è½¯ä»¶åœ¨ä¸»æœºæœåŠ¡å™¨ä¸Šå®Œæˆï¼Œç»è¿‡è™šæ‹ŸåŒ–çš„å­˜å‚¨ç©ºé—´å¯ä»¥è·¨è¶Šå¤šä¸ªå¼‚æ„çš„ç£ç›˜é˜µåˆ—ã€‚ ç‰¹ç‚¹ï¼š ä¼˜ç‚¹æ˜¯ç¨³å®šæ€§ï¼Œä»¥åŠå¯¹å¼‚æ„å­˜å‚¨ç³»ç»Ÿçš„å¼€æ”¾æ€§ã€‚ è½¯ä»¶è¿è¡Œäºä¸»æœºä¸Šã€‚ ä»ä¸ä¸»æœºè¿æ¥çš„å­˜å‚¨ä¸Šåˆ›å»ºè™šæ‹Ÿå·ã€‚ åŸºäºå­˜å‚¨è®¾å¤‡çš„è™šæ‹ŸåŒ–è‹¥å¤šä¸ªä¸»æœºæœåŠ¡å™¨éœ€è¦è®¿é—®åŒä¸€ä¸ªç£ç›˜é˜µåˆ—æ—¶ï¼Œå¯é‡‡ç”¨åŸºäºå­˜å‚¨è®¾å¤‡è™šæ‹ŸåŒ–ã€‚è™šæ‹ŸåŒ–çš„å·¥ä½œåœ¨é˜µåˆ—æ§åˆ¶å™¨ä¸Šå®Œæˆï¼Œå°†ä¸€ä¸ªé˜µåˆ—ä¸Šçš„å­˜å‚¨å®¹é‡åˆ’åˆ†å¤šä¸ªå­˜å‚¨ç©ºé—´ (LUN),ä¾›ä¸åŒçš„ä¸»æœºç³»ç»Ÿè®¿é—®ã€‚ä¸»è¦ç”¨åœ¨åŒä¸€å­˜å‚¨è®¾å¤‡å†…éƒ¨ï¼Œè¿›è¡Œæ•°æ®ä¿æŠ¤å’Œæ•°æ®è¿ç§»ã€‚ ä¼˜ç‚¹æ˜¯ä¸ä¸»æœºæ— å…³ï¼Œä¸å ç”¨ä¸»æœºèµ„æºï¼Œæ•°æ®ç®¡ç†åŠŸèƒ½ä¸°å¯Œã€‚ è½¯ä»¶è¿è¡Œäºå­˜å‚¨è®¾å¤‡ä¸­ä¸“é—¨çš„åµŒå…¥å¼ç³»ç»Ÿä¸Šã€‚ ä»ä¸ SAN è¿æ¥çš„å­˜å‚¨ä¸Šåˆ›å»ºè™šæ‹Ÿå·ã€‚ åŸºäºç½‘ç»œçš„å­˜å‚¨è™šæ‹ŸåŒ–é€šè¿‡åœ¨å­˜å‚¨åŒºåŸŸç½‘ (SAN) ä¸­æ·»åŠ è™šä¼¼åŒ–å¼•æ“å®ç°çš„ï¼Œä¸»è¦ç”¨äºå¼‚æ„å­˜å‚¨ç³»ç»Ÿçš„æ•´åˆå’Œç»Ÿæ•°æ®ç®¡ç†ã€‚ ç‰¹ç‚¹ï¼š ä¼˜ç‚¹æ˜¯ä¸ä¸»æœºæ— å…³ï¼Œä¸å ç”¨ä¸»æœºèµ„æºï¼› æ”¯æŒå¼‚æ„ä¸»æœºã€å¼‚æ„å­˜å‚¨è®¾å¤‡ï¼› èƒ½ä½¿ä¸åŒå­˜å‚¨è®¾å¤‡çš„æ•°æ®ç®¡ç†åŠŸèƒ½ç»Ÿä¸€ï¼Œç»Ÿä¸€ç®¡ç†å¹³å°ï¼Œå¯æ‰©å±•æ€§å¥½ã€‚ å­˜å‚¨è™šæ‹ŸåŒ–çš„åŠŸèƒ½å­˜å‚¨è™šæ‹ŸåŒ–å¯ä»¥æé«˜ç¡¬ä»¶èµ„æºçš„ä½¿ç”¨æ•ˆç‡ï¼Œç®€åŒ–ç³»ç»Ÿç®¡ç†çš„å¤æ‚åº¦ï¼Œå¢å¼ºäº‘å­˜å‚¨å¹³å°çš„å¯é æ€§ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æŠ€æœ¯å®ç°ï¼š ç²¾ç®€ç£ç›˜å’Œç©ºé—´å›æ”¶ç²¾ç®€ç£ç›˜å’Œç©ºé—´å›æ”¶ç”¨äºæé«˜å­˜å‚¨èµ„æºçš„ä½¿ç”¨æ•ˆç‡ã€å‡å°è™šæ‹Ÿæœºæœªä½¿ç”¨ç©ºé—´åœ¨ä¸»æœºä¸Šå ç”¨ç‡è¿‡å¤§çš„é—®é¢˜ã€‚ ç”¨æˆ·ç”¨å¤šå°‘åˆ†é…å¤šå°‘ç©ºé—´ï¼ˆè‡ªåŠ¨åˆ†é…ï¼‰ç©ºé—´å›æ”¶å¯ä»¥å°†ç”¨æˆ·åˆ é™¤çš„æ•°æ®ç©ºé—´é‡Šæ”¾åˆ°æ•°æ®å­˜å‚¨ã€‚ å¿«ç…§ æŒ‡å®šæ•°æ®é›†åˆçš„ä¸€ä¸ªå®Œå…¨å¯ç”¨æ‹·è´ï¼Œè¯¥æ‹·è´åŒ…æ‹¬ç›¸åº”æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼ˆæ‹·è´å¼€å§‹çš„æ—¶é—´ç‚¹) çš„æ˜ åƒã€‚ å¿«ç…§å¯ä»¥æ˜¯å…¶æ‰€è¡¨ç¤ºçš„æ•°æ®çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå¯ä»¥æ˜¯æ•°æ®çš„ä¸€ä¸ªå¤åˆ¶å“ã€‚ å¿«ç…§çš„ä½œç”¨ä¸»è¦æ˜¯èƒ½å¤Ÿè¿›è¡Œåœ¨çº¿æ•°æ®å¤‡ä»½æ¢å¤ã€‚ ä¸ºç”¨æˆ·æä¾›äº†æ•°æ®è®¿é—®é€šé“ ç‰¹ç‚¹ è®°å½•äº†è™šæ‹Ÿæœºåœ¨æŸä¸€æ—¶é—´ç‚¹çš„å†…å®¹å’ŒçŠ¶ã€‚ æ¢å¤è™šæ‹Ÿæœºå¿«ç…§å¯ä»¥ä½¿è™šæ‹Ÿæœºå¤šæ¬¡å¿«é€Ÿæ¢å¤åˆ°æŸä¸€æ—¶é—´ç‚¹ã€‚ å¿«ç…§åŒ…å«ç£ç›˜å†…å®¹ã€è™šæ‹Ÿæœºé…ç½®ä¿¡æ¯ã€å†…å­˜æ•°æ®ã€‚ å¤šæ¬¡å¿«ç…§ä¹‹é—´ä¿å­˜å·®é‡æ•°æ®ï¼ŒèŠ‚çº¦å­˜å‚¨ç©ºé—´ã€‚ å¿«ç…§æ–¹å¼ä»‹ç»åˆ›å»ºå¿«ç…§æ—¶ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å·®åˆ†å·ï¼Œè™šæ‹Ÿæœºä¼šæŒ‚è½½è¿™ä¸ªå·®åˆ†å·ä½œä¸ºç£ç›˜æ–‡ä»¶ã€‚ ROW å†™æ—¶é‡å®šå‘ COW å†™æ—¶æ‹·è´ å¿«ç…§é“¾ä»‹ç»å¯¹è™šæ‹Ÿæœºè¿›è¡Œå¤šæ¬¡çš„å¿«ç…§æ“ä½œï¼Œè¿™äº›å¤šæ¬¡çš„å¿«ç…§æ“ä½œå½¢æˆå¿«ç…§é“¾ã€‚ è™šæ‹Ÿæœºå·å§‹ç»ˆæŒ‚è½½åœ¨å¿«ç…§é“¾çš„æœ€æœ«ç«¯ã€‚ é“¾æ¥å…‹éš† å°†æºå·å’Œå·®åˆ†å·ç»„åˆæ˜ å°„ä¸ºä¸€ä¸ªé“¾æ¥å…‹éš†å·ï¼Œç»™è™šæ‹Ÿæœºä½¿ç”¨ã€‚ä¸€ä¸ªé“¾æ¥å…‹éš†éœ€è¦å’ŒåŸå§‹è™šæ‹Ÿæœºå…±äº«åŒä¸€è™šæ‹Ÿç£ç›˜æ–‡ä»¶ã€‚ é‡‡ç”¨å…±äº«ç£ç›˜æ–‡ä»¶ç¼©çŸ­äº†åˆ›å»ºå…‹éš†è™šæ‹Ÿæœºçš„æ—¶é—´ï¼Œè¿˜èŠ‚çœäº†ç‰©ç†ç£ç›˜ç©ºé—´ã€‚ é€šè¿‡é“¾æ¥å…‹éš†ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä¸åŒçš„ä»»åŠ¡åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºã€‚ è™šæ‹Ÿç£ç›˜æ–‡ä»¶è¿ç§»åŠŸèƒ½ï¼š å°†è™šæ‹Ÿæœºçš„ç£ç›˜ä»ä¸€ä¸ªæ•°æ®å­˜å‚¨è¿ç§»åˆ°å¦ä¸€ä¸ªæ•°æ®å­˜å‚¨ã€‚å¯ä»¥å°†è™šæ‹Ÿæœºçš„æ‰€æœ‰ç£ç›˜æ•´ä½“è¿ç§»ï¼Œä¹Ÿå¯ä»¥å•ä¸ªç£ç›˜åˆ†åˆ«è¿ç§»ã€‚ è™šæ‹Ÿæœºçš„å¿«ç…§å¯ä»¥ä¸€èµ·è¿ç§»ï¼Œè™šæ‹Ÿæœºå¼€å¯æˆ–è€…å…³é—­æ—¶éƒ½å¯ä»¥è¿ç§»ã€‚ ç‰¹ç‚¹ï¼š ç½‘ç»œè™šæ‹ŸåŒ–è™šæ‹ŸåŒ–æ˜¯å¯¹æ‰€æœ‰ T èµ„æºçš„è™šæ‹ŸåŒ–ï¼Œæé«˜ç‰©ç†ç¡¬ä»¶çš„çµæ´»æ€§åŠåˆ©ç”¨æ•ˆç‡ã€‚äº‘è®¡ç®—ä¸­çš„è®¡ç®—å’Œå­˜å‚¨èµ„æºåˆ†åˆ«ç”±è®¡ç®—è™šæ‹ŸåŒ–å’Œå­˜å‚¨è™šæ‹ŸåŒ–æä¾›ï¼Œè€Œç½‘ç»œä½œä¸º T çš„é‡è¦èµ„æºä¹Ÿæœ‰ç›¸åº”çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œç½‘ç»œèµ„æºç”±ç½‘ç»œè™šæ‹ŸåŒ–æä¾›ã€‚ ç½‘ç»œæ˜¯ç”±å„ç§è®¾å¤‡ç»„æˆï¼Œæœ‰ä¼ ç»Ÿçš„ç‰©ç†ç½‘ç»œï¼Œè¿˜æœ‰è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçœ‹ä¸åˆ°çš„è™šæ‹Ÿç½‘ç»œã€‚å¦‚ä½•å‘ˆç°å’Œç®¡ç†å®ƒä»¬å°†æ˜¯ç½‘ç»œè™šæ‹ŸåŒ–çš„é¦–è¦ç›®æ ‡ã€‚ å°†ç‰©ç†ç½‘ç»œè™šæ‹Ÿå‡ºå¤šä¸ªç›¸äº’éš”ç¦»çš„è™šæ‹Ÿç½‘ç»œï¼ˆé€»è¾‘ç½‘ç»œï¼‰ï¼Œä»è€Œä½¿å¾—ä¸åŒç”¨æˆ·ä¹‹é—´ä½¿ç”¨ç‹¬ç«‹çš„ç½‘ç»œèµ„æºï¼Œä»è€Œæé«˜ç½‘ç»œèµ„æºåˆ©ç”¨ç‡ï¼Œå®ç°å¼¹æ€§çš„ç½‘ç»œã€‚ VLAN å°±æ˜¯ä¸€ç§ç½‘ç»œè™šæ‹ŸåŒ–ï¼Œåœ¨åŸæœ‰ç½‘ç»œåŸºç¡€ä¸Šé€šè¿‡ VLAN Tag:åˆ’åˆ†å‡ºå¤šä¸ªå¹¿æ’­åŸŸã€‚ ç½‘ç»œè™šæ‹ŸåŒ–ä¿éšœæˆ‘ä»¬åˆ›å»ºå‡ºæ¥çš„è™šæ‹Ÿæœºå¯ä»¥æ­£å¸¸ é€šä¿¡ã€è®¿é—®ç½‘ç»œã€‚ èŠ‚çœç‰©ç†ä¸»æœºçš„ç½‘å¡è®¾å¤‡èµ„æºï¼Œå¹¶ä¸”å¯ä»¥æä¾›åº”ç”¨çš„è™šæ‹Ÿç½‘ç»œæ‰€éœ€çš„ L2 ä¸€ L7 å±‚ç½‘ç»œæœåŠ¡ã€‚ ç½‘ç»œè™šæ‹ŸåŒ–è½¯ä»¶æä¾›é€»è¾‘ä¸Šçš„äº¤æ¢æœºå’Œè·¯ç”±å™¨ (L2-L3),é€»è¾‘è´Ÿè½½å‡è¡¡å™¨ï¼Œé€»è¾‘é˜²ç«å¢™ (L4-L7) ç­‰ï¼Œä¸”å¯ä»¥ä»¥ä»»ä½•å½¢å¼è¿›è¡Œç»„è£…ï¼Œä»è€Œä¸ºè™šæ‹Ÿæœºæä¾›ä¸€ä¸ªå®Œæ•´çš„ L2-L7 å±‚çš„è™šæ‹Ÿç½‘ç»œæ‹“æ‰‘ã€‚ ç‰©ç†ç½‘ç»œåŒ…å«çš„è®¾å¤‡è·¯ç”±å™¨ï¼šå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œè¿æ¥ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œã€‚ äºŒå±‚äº¤æ¢æœºï¼šå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œè½¬å‘æ•°æ®ã€‚ ä¸‰å±‚äº¤æ¢æœºï¼šå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œç»“åˆäº†éƒ¨åˆ†è·¯ç”±å’Œäº¤æ¢æœºçš„åŠŸèƒ½ã€‚ æœåŠ¡å™¨ç½‘å¡ï¼šæä¾›é€šä¿¡æœåŠ¡ã€‚ è™šæ‹ŸåŒ–ä¸­çš„ç½‘ç»œæ¶æ„ç½‘å¡è™šæ‹ŸåŒ–æ–¹æ³•æœ‰ï¼š è½¯ä»¶ç½‘å¡è™šæ‹ŸåŒ– ä¸»è¦é€šè¿‡è½¯ä»¶æ§åˆ¶å„ä¸ªè™šæ‹Ÿæœºå…±äº«åŒä¸€å—ç‰©ç†ç½‘å¡å®ç°ã€‚è½¯ä»¶è™šæ‹Ÿå‡ºæ¥çš„ç½‘å¡å¯ä»¥æœ‰å•ç‹¬çš„ MAC åœ°å€ã€IP åœ°å€ã€‚ æ‰€æœ‰è™šæ‹Ÿæœºçš„è™šæ‹Ÿç½‘å¡é€šè¿‡è™šæ‹Ÿäº¤æ¢æœºä»¥åŠç‰©ç†ç½‘å¡è¿æ¥è‡³ç‰©ç†äº¤æ¢æœºã€‚è™šæ‹Ÿäº¤æ¢æœºè´Ÿè´£å°†è™šæ‹Ÿæœºä¸Šçš„æ•°æ®æŠ¥æ–‡ä»ç‰©ç†ç½‘å£è½¬å‘å‡ºå»ã€‚ ç¡¬ä»¶ç½‘å¡è™šæ‹ŸåŒ– ä¸»è¦ç”¨åˆ°çš„æŠ€æœ¯æ˜¯å•æ ¹ I/O è™šæ‹ŸåŒ– (Single Root/O Virtulization,SR-lOV),å°±æ˜¯ I/O ç›´é€šæŠ€æœ¯ï¼Œé€šè¿‡ç¡¬ä»¶çš„è¾…åŠ©å¯ä»¥è®©è™šæ‹Ÿæœºç›´æ¥è®¿é—®ç‰©ç†è®¾å¤‡ï¼Œè€Œä¸éœ€è¦é€šè¿‡ VMMã€‚è¯¥æŠ€æœ¯å¯ä»¥ç›´æ¥è™šæ‹Ÿå‡º 128-512 ç½‘å¡ï¼Œå¯ä»¥è®©è™šæ‹Ÿæœºéƒ½æ‹¿åˆ°ä¸€å—ç‹¬ç«‹çš„ç½‘å¡ï¼Œç›´æ¥ä½¿ç”¨/O èµ„æºã€‚SR-OV èƒ½å¤Ÿè®©ç½‘ç»œä¼ è¾“ç»•è¿‡è½¯ä»¶æ¨¡æ‹Ÿå±‚ï¼Œç›´æ¥åˆ†é…åˆ°è™šæ‹Ÿæœºï¼Œè¿™æ ·å°±é™ä½äº†è½¯ä»¶æ¨¡æ‹Ÿå±‚ä¸­çš„/â—‹ å¼€é”€ã€‚ äº¤æ¢æœºè™šæ‹ŸåŒ–ï¼š OVS(Open vSwitch) å¼€æ”¾è™šæ‹ŸåŒ–è½¯ä»¶äº¤æ¢æœºï¼Œæ˜¯ä¸€æ¬¾åŸºäºè½¯ä»¶å®ç°çš„å¼€æºè™šæ‹Ÿä»¥å¤ªç½‘äº¤æ¢æœºï¼Œä½¿ç”¨å¼€æº Apache2.0 è®¸å¯åè®®ï¼Œä¸»è¦ç”¨äºè™šæ‹Ÿæœº VM ç¯å¢ƒã€‚ä¸ä¼—å¤šå¼€æºçš„è™šæ‹ŸåŒ–å¹³å°ç›¸æ•´åˆï¼ˆæ”¯æŒ Xenã€KVM åŠ VirtualBox å¤šç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼‰ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼šä¼ é€’è™šæ‹Ÿæœºä¹‹é—´çš„æµé‡ï¼Œå®ç°è™šæ‹Ÿæœºå’Œå¤–ç•Œç½‘ç»œçš„é€šä¿¡ã€‚ è™šæ‹ŸåŒ–ä¸­æ•°æ®çš„è½¬å‘è·¯å¾„ ç›¸åŒç«¯å£ç»„ä¸åŒæœåŠ¡å™¨å†…çš„è™šæ‹Ÿæœºé€šè®¯éœ€è¦ç»è¿‡ç‰©ç†ç½‘ç»œã€‚ï¼ˆé»‘çº¿ï¼‰ ç›¸åŒç«¯å£ç»„ç›¸åŒæœåŠ¡å™¨å†…çš„è™šæ‹Ÿæœºé€šè®¯ä¸éœ€è¦ç»è¿‡ç‰©ç†ç½‘ç»œã€‚ï¼ˆçº¢çº¿ï¼‰ ä¸åŒç«¯å£ç»„ç›¸åŒæœåŠ¡å™¨çš„è™šæ‹Ÿæœºé€šè®¯éœ€è¦ç»è¿‡ç‰©ç†ç½‘ç»œã€‚ï¼ˆé»„è‰²ï¼‰ é“¾è·¯è™šæ‹ŸåŒ–VPC(Virtual Port Channel) è™šé“¾è·¯èšåˆï¼Œæ˜¯æœ€å¸¸è§çš„äºŒå±‚è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚ é“¾è·¯èšåˆå°†å¤šä¸ªç‰©ç†ç«¯å£æ†ç»‘åœ¨ä¸€èµ·ï¼Œè™šæ‹Ÿæˆä¸ºä¸€ä¸ªé€»è¾‘ç«¯å£ã€‚ä½†ä¼ ç»Ÿé“¾è·¯èšåˆä¸èƒ½è·¨è®¾å¤‡ï¼ŒVPC å¾ˆå¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ—¢å¯ä»¥è·¨è®¾å¤‡ï¼Œåˆå¯ä»¥å¢åŠ é“¾è·¯å¸¦å®½ã€å®ç°é“¾è·¯å±‚çš„é«˜å¯ç”¨æ€§ã€‚ éš§é“åè®® (Tunneling Protocol)ï¼šæŒ‡é€šè¿‡éš§é“åè®®ä½¿å¤šä¸ªä¸åŒåè®®çš„ç½‘ç»œå®ç°äº’è”ã€‚ä½¿ç”¨éš§é“ä¼ é€’çš„æ•°æ®å¯ä»¥æ˜¯ä¸åŒåè®®çš„æ•°æ®å¸§æˆ–åŒ…ã€‚éš§é“å¯ä»¥å°†æ•°æ®æµå¼ºåˆ¶é€åˆ°ç‰¹å®šçš„åœ°å€ï¼Œå¹¶éšè—ä¸­é—´èŠ‚ç‚¹çš„ç½‘ç»œåœ°å€ï¼Œè¿˜å¯æ ¹æ®éœ€è¦ï¼Œæä¾›å¯¹æ•°æ®åŠ å¯†çš„åŠŸèƒ½ã€‚ GRE(Generic Routing Encapsulation) é€šç”¨è·¯ç”±å°è£…ã€‚ IPsec(Internet Protocol Security)Internett åè®®å®‰å…¨ã€‚ è™šæ‹Ÿç½‘ç»œè™šæ‹Ÿç½‘ç»œ (Virtual Network):æ˜¯ç”±è™šæ‹Ÿé“¾è·¯ç»„æˆçš„ç½‘ç»œã€‚ è™šæ‹Ÿç½‘ç»œèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å¹¶ä¸ä½¿ç”¨ç‰©ç†çº¿ç¼†è¿æ¥ï¼Œè€Œæ˜¯ä¾é ç‰¹å®šçš„è™šæ‹ŸåŒ–é“¾è·¯ç›¸è¿ã€‚ å…¸å‹çš„è™šæ‹Ÿç½‘ç»œåŒ…æ‹¬ï¼š å±‚å ç½‘ç»œï¼ˆè™šæ‹ŸäºŒå±‚å»¶ä¼¸ç½‘ç»œï¼‰ å±‚å ç½‘ç»œ (Overlay Network)ï¼šåœ¨ç°æœ‰ç½‘ç»œçš„åŸºç¡€ä¸Šæ­å»ºå¦å¤–ä¸€ç§ç½‘ç»œ å±‚å ç½‘ç»œå…è®¸å¯¹æ²¡æœ‰å¼• P åœ°å€æ ‡è¯†çš„ç›®çš„ä¸»æœºè·¯ç”±ä¿¡æ¯ã€‚ å±‚å ç½‘ç»œå¯ä»¥å……åˆ†åˆ©ç”¨ç°æœ‰èµ„æºï¼Œåœ¨ä¸å¢åŠ æˆæœ¬çš„å‰æä¸‹ï¼Œæä¾›æ›´å¤šçš„æœåŠ¡ã€‚ï¼ˆæ¯”å¦‚ ADSL Internet æ¥å…¥çº¿è·¯å°±æ˜¯åŸºäºå·²ç»å­˜åœ¨çš„ PSTN ç½‘ç»œå®ç°) å…¸å‹æŠ€æœ¯ï¼š VXLAN(Virtual eXtensible Local Area Network) è™šæ‹Ÿæ‰©å±•å±€åŸŸç½‘ï¼šå¾ˆå¥½åœ°è§£å†³äº†ç°æœ‰ VLAN æŠ€æœ¯æ— æ³•æ»¡è¶³å¤§äºŒå±‚ç½‘ç»œéœ€æ±‚çš„é—®é¢˜ã€‚ VXLAN æŠ€æœ¯æ˜¯ä¸€ç§å¤§äºŒå±‚çš„è™šæ‹Ÿç½‘ç»œæŠ€æœ¯ã€‚ åŸç†æ˜¯å¼•å…¥ä¸€ä¸ª UDP æ ¼å¼çš„å¤–å±‚éš§é“ä½œä¸ºæ•°æ®é“¾è·¯å±‚ï¼Œè€ŒåŸæœ‰æ•°æ®æŠ¥æ–‡å†…å®¹ä½œä¸ºéš§é“å‡€è·åŠ ä»¥ä¼ è¾“ã€‚ VPN ç½‘ç»œ VPN(Virtual Private Network) è™šæ‹Ÿä¸“ç”¨ç½‘ï¼šæ˜¯ä¸€ç§å¸¸ç”¨äºè¿æ¥ä¸­ã€å¤§å‹ä¼ä¸šæˆ–å›¢ä½“ä¸å›¢ä½“é—´çš„ç§äººç½‘ç»œçš„é€šä¿¡æ–¹æ³•ã€‚ é€šè¿‡å…¬ç”¨çš„ç½‘ç»œæ¶æ„ï¼ˆæ¯”å¦‚äº’è”ç½‘ï¼‰æ¥ä¼ é€å†…è”ç½‘çš„ä¿¡æ¯ã€‚ åˆ©ç”¨å·²åŠ å¯†çš„éš§é“åè®®æ¥è¾¾åˆ°ä¿å¯†ã€ç»ˆç«¯è®¤è¯ã€ä¿¡æ¯å‡†ç¡®æ€§ç­‰å®‰å…¨æ•ˆæœã€‚è¿™ç§æŠ€æœ¯å¯ä»¥ åœ¨ä¸å®‰å…¨çš„ç½‘ç»œä¸Šä¼ é€å¯é çš„ã€å®‰å…¨çš„ä¿¡æ¯ã€‚","categories":[],"tags":[{"name":"äº‘è®¡ç®—","slug":"äº‘è®¡ç®—","permalink":"http://example.com/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"}]},{"title":"Devstack éƒ¨ç½² OpenStack","slug":"Devstackéƒ¨ç½²OpenStack","date":"2023-06-09T13:38:34.000Z","updated":"2023-08-12T02:38:01.064Z","comments":true,"path":"2023/06/09/Devstackéƒ¨ç½²OpenStack/","link":"","permalink":"http://example.com/2023/06/09/Devstack%E9%83%A8%E7%BD%B2OpenStack/","excerpt":"","text":"Devstack éƒ¨ç½² OpenStackè¯•éªŒå‘ç°åœ¨ Host ä¸º Ubuntu20.04 å’Œ 22.04 ä¸Šæ— æ³•é¡ºåˆ©å®‰è£… VirtualBoxï¼Œè¯·åœ¨ Ubuntu18.04 ä¸Šå®‰è£… VirtualBoxã€‚è™šæ‹Ÿæœºé•œåƒç‰ˆæœ¬ä¸º Ubuntu20.04ï¼Œä»¥ä¸‹æ­¥éª¤å¯ä»¥ç¨³å®šå¤ç°ï¼ŒOpenStack masterï¼ˆc424a7a299e37004d318107648bb18e157344985ï¼‰ç‰ˆæœ¬ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œåœ¨ 18.04 ç‰ˆæœ¬ä¸Šå®‰è£… VirtualBoxï¼Œåœ¨ 20.04 ç‰ˆæœ¬ä¸Šå®‰è£… OpenStackã€‚ å› ä¸ºå®‰è£… OpenStack å®¹æ˜“ç ´è¯ç³»ç»ŸåŒ…ä¾èµ–ï¼Œå¦‚æœä¸ºäº†å­¦ä¹ å»ºè®®åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…ã€‚ å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦ä¸‹è½½é•œåƒï¼Œè¯·ç¡®è®¤æœºå™¨å¯ä»¥è®¿é—®å¤–ç½‘ã€‚ å®‰è£… VirtualBox12sudo apt updatesudo apt install virtualbox virtualbox-ext-pack ç¡®è®¤ VirtualBox é…ç½®è¯·ç¡®è®¤ VirtualBox é…ç½®å¦‚ä¸‹ï¼ŒVirtualBox é»˜è®¤é…ç½®ç¡¬ç›˜ä¸º 10Gï¼Œè¿œè¿œä¸å¤Ÿç”¨ï¼Œä¸ºäº†é¿å…åç»­çš„éº»çƒ¦ï¼Œè¯·ç¡®è®¤å¦‚ä¸‹é…ç½®ï¼š ç£ç›˜å¤§äº 100G å†…å­˜å¤§äº 16G CPU å¤§äº 4 ä¸ª ä¸‹è½½é•œåƒå¹¶å®‰è£…é•œåƒå¯ä»¥å»æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ | Tsinghua Open Source Mirrorä¸‹è½½ã€‚ æ›´æ–°æº123456789101112sudo mv /etc/apt/sources.list /etc/apt/sources.list.bk &amp;&amp; sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/apt/sources.listdeb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restrcdicted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restrcd &amp;&amp; mkdir .pip &amp;&amp; cd .pipicted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverseEOF&quot; å¤‡ç”¨æº (ä»¥å¤‡ä¸æ—¶ä¹‹éœ€)123456789101112sudo mv /etc/apt/sources.list /etc/apt/sources.list.bk &amp;&amp; sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/apt/sources.listdeb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restrcdicted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restrcd &amp;&amp; mkdir .pip &amp;&amp; cd .pipicted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverseEOF&quot; 123456789101112sudo mv /etc/apt/sources.list /etc/apt/sources.list.bk &amp;&amp; sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/apt/sources.listdeb https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiversedeb https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiversedeb https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiversedeb https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverseEOF&quot; 12345678910111213sudo mv /etc/apt/sources.list /etc/apt/sources.list.bk &amp;&amp; sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/apt/sources.listdeb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverseEOF&quot; å®‰è£…åŸºç¡€åŒ…123sudo apt updatesudo apt install gitsudo apt install aptitude aptitude ç”¨äºè§£å†³åŒ…ä¾èµ–å†²çªã€‚ æ·»åŠ ç”¨æˆ·æ·»åŠ  stack ç”¨æˆ· 1sudo useradd -s /bin/bash -d /opt/stack -m stack æˆäºˆ sudo æƒé™ 1echo &quot;stack ALL=(ALL) NOPASSWD: ALL&quot; | sudo tee /etc/sudoers.d/stack åˆ‡æ¢åˆ° stack ç”¨æˆ· 1sudo su - stack PIP é…ç½®123456cd &amp;&amp; mkdir -p .pip &amp;&amp; cd .pip &amp;&amp; bash -c &quot;cat &lt;&lt; EOF &gt; ~/.pip/pip.conf[global]timeout = 6000index-url = http://mirrors.aliyun.com/pypi/simple/trusted-host = mirrors.aliyun.comEOF&quot; ä»“åº“ä¸‹è½½1git clone https://github.com/openstack/devstack --depth 1 é…ç½® local.confåªéœ€è¦ä¿®æ”¹ HOST_IPï¼Œå…¶ä»–çš„å¯ä»¥ä¸ç”¨ä¿®æ”¹ï¼ŒHOST_IP ä¸ºæœ¬æœº IP åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨ ifconfig æŸ¥çœ‹ã€‚å¦‚æœæ˜¯è™šæ‹Ÿæœºå°±æ˜¯è™šæ‹Ÿæœºçš„ IPï¼Œvirtualbox åˆ›å»ºçš„è™šæ‹Ÿæœºé»˜è®¤ä¸º 10.0.2.15ã€‚ 12345678910cd devstack &amp;&amp; touch local.conf &amp;&amp; bash -c &quot;cat &lt;&lt; EOF &gt; /opt/stack/devstack/local.conf[[local|localrc]]HOST_IP=10.0.2.15GIT_BASE=http://git.trystack.cnADMIN_PASSWORD=userDATABASE_PASSWORD=$ADMIN_PASSWORDRABBIT_PASSWORD=$ADMIN_PASSWORDSERVICE_PASSWORD=$ADMIN_PASSWORDEOF&quot; å®‰è£…1FORCE=yes ./stack.sh BUG è§£å†³systemd åŒ…ä¾èµ–å†²çª123sudo aptitude install systemdé€‰æ‹©Nå†é€‰æ‹©Y ModuleNotFoundError: No module named â€˜distutils.cmdâ€™12sudo apt-get install python3.10-distutils# æ ¹æ®è‡ªå·±çš„ Python ç‰ˆæœ¬å†³å®šï¼Œå¯ä»¥ python3.7-distutils python3.8-distutils ....éƒ½è¯•ä¸€é apparmor invalid capability bpf1sudo apt install apparmor No tenant network is available for allocation123456789vim /etc/neutron/plugins/ml2/ml2_conf.ini[ml2]type_drivers = flat,vlan,vxlantenant_network_types = vxlan[ml2_type_vxlan]vni_ranges = 1:1000 unix:/var/run/openvswitch/db.sock: database connection failed (Connection refused)123456cd /opt/stack/devstack/lib/neutron_plugin vi ovn_agent 116G è·³è½¬åˆ°116è¡ŒOVS_RUNDIR=$OVS_PREFIX/var/run/openvswitch ä¿®æ”¹ä¸ºOVS_RUNDIR=$OVS_PREFIX/var/run/ovn sudo rm -rf /var/run/ovn VirtualBox å¯åŠ¨æŠ¥é”™ : Failed to send host log message12Ctrl+F2è¿›å…¥å¦ä¸€ä¸ªç»ˆç«¯è¾“å…¥ï¼šstartxè¿›å…¥æ¡Œé¢ AttributeError: module â€˜collectionsâ€˜ has no attribute â€˜MutableMappingâ€˜12collections.MutableMappingcollections.abc.MutableMapping ModuleNotFoundError: No module named â€˜distutils.coreâ€™1sudo apt install python3-pip ERROR: Cannot uninstall â€˜simplejsonâ€™. It is a distutils installed project and thus we cannot1sudo pip install --ignore-installed wrapt enum34 simplejson netaddr server certificate verification failed. CAfile: none CRLfile: none12git config --global http.sslverify falsegit config --global https.sslverify false Ubuntu:ç™»å½•é¡µé¢éªŒè¯å‡ºé”™1sudo loginctl unlock-sessions Ubuntu:é‡è£…æ¡Œé¢1sudo apt install ubuntu-desktop Ubuntu ç™»å½•ç•Œé¢ Authentication Error123sudo loginctl unlock-sessionssudo echo &quot;fs.inotify.max_user_watches=524288&quot; &gt;&gt; /etc/sysctl.conf Ubuntu æ— æ³•è¿›å…¥æ¡Œé¢ç³»ç»Ÿï¼Œä½†æ˜¯å¯ä»¥ SSH é“¾æ¥1234sudo rm -rf /var/lib/apt/lists/*sudo apt-get cleansudo apt-get updatesudo apt-get install --reinstall appstream gsettings-desktop-schemas : ç ´åï¼šmutter (ï¼œ 3.31.4) ä½†æ˜¯ 3.28.4-0ubuntu18.04.2 æ­£è¦è¢«å®‰è£…è§£å†³æ–¹æ¡ˆ12sudo apt install gsettings-desktop-schemassudo apt-get install build-essential","categories":[{"name":"OpenStack","slug":"OpenStack","permalink":"http://example.com/categories/OpenStack/"}],"tags":[{"name":"äº‘è®¡ç®—","slug":"äº‘è®¡ç®—","permalink":"http://example.com/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"},{"name":"OpenStack","slug":"OpenStack","permalink":"http://example.com/tags/OpenStack/"},{"name":"Devstack","slug":"Devstack","permalink":"http://example.com/tags/Devstack/"}]},{"title":"è®¡ç®—æœºç½‘ç»œ - ç‰©ç†å±‚","slug":"è®¡ç®—æœºç½‘ç»œ-ç‰©ç†å±‚","date":"2023-04-10T13:14:41.000Z","updated":"2023-06-11T01:55:35.223Z","comments":true,"path":"2023/04/10/è®¡ç®—æœºç½‘ç»œ-ç‰©ç†å±‚/","link":"","permalink":"http://example.com/2023/04/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E7%89%A9%E7%90%86%E5%B1%82/","excerpt":"","text":"ç‰©ç†å±‚åŸºæœ¬æ¦‚å¿µç‰©ç†å±‚è§£å†³å¦‚ä½•åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµï¼Œè€Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚ç‰©ç†å±‚ä¸»è¦ä»»åŠ¡ï¼šç¡®å®šä¸ä¼ è¾“åª’ä½“æ¥å£æœ‰å…³çš„ä¸€äº›ç‰¹æ€§ æœºæ¢°ç‰¹æ€§ï¼šå®šä¹‰ç‰©ç†è¿æ¥çš„ç‰¹æ€§ï¼Œè§„å®šç‰©ç†è¿æ¥æ—¶æ‰€é‡‡ç”¨çš„è§„æ ¼ã€æ¥å£å½¢çŠ¶ã€å¼•çº¿æ•°ç›®ã€å¼•è„šæ•°é‡å’Œæ’åˆ—æƒ…å†µã€‚ ç”µæ°”ç‰¹æ€§ï¼šè§„å®šä¼ è¾“äºŒè¿›åˆ¶ä½æ—¶ï¼Œçº¿è·¯ä¸Šä¿¡å·çš„ç”µå‹èŒƒå›´ã€é˜»æŠ—åŒ¹é…ã€ä¼ è¾“é€Ÿç‡å’Œè·ç¦»é™åˆ¶ç­‰ã€‚ åŠŸèƒ½ç‰¹æ€§ï¼šæŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³è¡¨ç¤ºä½•ç§æ„ä¹‰ï¼Œæ¥å£éƒ¨ä»¶çš„ä¿¡å·çº¿çš„ç”¨é€”ã€‚ è§„ç¨‹ç‰¹æ€§ï¼ˆè¿‡ç¨‹ç‰¹æ€§ï¼‰ï¼šå®šä¹‰å„æ¡ç‰©ç†çº¿è·¯çš„å·¥ä½œè§„ç¨‹å’Œæ—¶åºå…³ç³» æ•°æ®é€šä¿¡åŸºç¡€æ¦‚å¿µå…¸å‹çš„æ•°æ®é€šä¿¡æ¨¡å‹ é€šä¿¡çš„ç›®çš„æ˜¯ä¼ é€æ¶ˆæ¯ã€‚æ•°æ®ï¼šä¼ é€ä¿¡æ¯çš„å®ä½“ï¼Œé€šå¸¸æ˜¯æœ‰æ„ä¹‰çš„ç¬¦å·åºåˆ—ã€‚ä¿¡å·ï¼šæ•°æ®çš„ç”µæ°”/ç”µç£çš„è¡¨ç°ï¼Œæ˜¯æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å­˜åœ¨å½¢å¼ã€‚ æ•°å­—ä¿¡å·ï¼šä»£è¡¨æ¶ˆæ¯çš„å‚æ•°å–å€¼æ˜¯ç¦»æ•£çš„ã€‚ - æ¨¡æ‹Ÿä¿¡å·ï¼šä»£è¡¨æ¶ˆæ¯çš„å‚æ•°å–å€¼æ˜¯è¿ç»­çš„ã€‚ ä¿¡æºï¼šäº§ç”Ÿå’Œå‘é€æ•°æ®çš„æºå¤´ã€‚ä¿¡é“ï¼šä¿¡å·çš„ä¼ è¾“åª’ä»‹ã€‚ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºå‘æŸä¸€ä¸ªæ–¹å‘ä¼ é€ä¿¡æ¯çš„ä»‹è´¨ï¼Œå› æ­¤ä¸€æ¡é€šä¿¡çº¿è·¯å¾€å¾€åŒ…å«ä¸€æ¡å‘é€ä¿¡é“å’Œä¸€æ¡æ¥æ”¶ä¿¡é“ã€‚ é€šä¿¡æ–¹å¼ä»é€šä¿¡åŒæ–¹ä¿¡æ¯çš„äº¤äº’æ–¹å¼çœ‹ï¼Œå¯ä»¥æœ‰ä¸‰ç§åŸºæœ¬æ–¹å¼ï¼š å•å·¥é€šä¿¡åªæœ‰ä¸€ä¸ªæ–¹å‘çš„é€šä¿¡è€Œæ²¡æœ‰åæ–¹å‘çš„äº¤äº’ï¼Œä»…éœ€è¦ä¸€ä¸€æ¡ä¿¡é“ã€‚ åŠåŒå·¥é€šä¿¡é€šä¿¡çš„åŒæ–¹éƒ½å¯ä»¥å‘é€æˆ–æ¥æ”¶ä¿¡æ¯ï¼Œä½†ä»»ä½•ä¸€æ–¹éƒ½ä¸èƒ½åŒæ—¶å‘é€å’Œæ¥æ”¶ï¼Œéœ€è¦ä¸¤æ¡ä¿¡é“ã€‚ å…¨åŒå·¥é€šä¿¡é€šä¿¡åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥å—ä¿¡æ¯ï¼Œä¹Ÿéœ€è¦ä¸¤æ¡ä¿¡é“ã€‚ ä¼ è¾“æ–¹å¼ ä¸²è¡Œä¼ è¾“ é€Ÿåº¦æ…¢ï¼Œè´¹ç”¨ä½ï¼Œé€‚åˆè¿œè·ç¦» å¹¶è¡Œä¼ è¾“ é€Ÿåº¦å¿«ï¼Œè´¹ç”¨é«˜ï¼Œé€‚åˆè¿‘è·ç¦» ç å…ƒç å…ƒæ˜¯æŒ‡ç”¨ä¸€ä¸ªå›ºå®šæ—¶é•¿çš„ä¿¡å·æ³¢å½¢ï¼ˆæ•°å­—è„‰å†²ï¼‰ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ï¼Œæ˜¯æ•°å­—é€šä¿¡ä¸­æ•°å­—ä¿¡å·çš„è®¡é‡å•ä½ï¼Œè¿™ä¸ªæ—¶é•¿å†…çš„ä¿¡å·ç§°ä¸ºkè¿›åˆ¶ç å…ƒï¼Œè€Œè¯¥æ—¶é•¿ç§°ä¸ºç å…ƒå®½åº¦ã€‚å½“ç å…ƒçš„ç¦»æ•£çŠ¶æ€æœ‰ M ä¸ªæ—¶ï¼ˆM å¤§äº 2ï¼‰ï¼Œæ­¤æ—¶ç å…ƒä¸º M è¿›åˆ¶ç å…ƒã€‚1ç å…ƒå¯ä»¥æºå¸¦å¤šä¸ªæ¯”ç‰¹çš„ä¿¡æ¯é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç æ—¶ï¼Œåªæœ‰ä¸¤ç§ä¸åŒçš„ç å…ƒï¼Œä¸€ç§ä»£è¡¨ 0 çŠ¶æ€ï¼Œå¦ - ä¸€ç§ä»£è¡¨ 1 çŠ¶æ€ã€‚åœ¨å››è¿›åˆ¶ç å…ƒä¸­ï¼Œä¸€ä¸ªç å…ƒå°±ç”± 2 æ¯”ç‰¹ç»„æˆã€‚ é€Ÿç‡ï¼Œæ³¢ç‰¹ï¼Œå¸¦å®½é€Ÿç‡ä¹Ÿå«æ•°æ®ç‡ï¼Œæ˜¯æŒ‡æ•°æ®çš„ä¼ è¾“é€Ÿç‡ï¼Œè¡¨ç¤ºå•ä½æ—¶é—´å†…ä¼ è¾“çš„æ•°æ®é‡ã€‚å¯ä»¥ç”¨ç å…ƒä¼ è¾“é€Ÿç‡å’Œä¿¡æ¯ä¼ è¾“é€Ÿç‡è¡¨ç¤ºã€‚ä¼ è¾“é€Ÿç‡æ˜¯ä¸»æœºä¸Šå‘å‡ºçš„é€Ÿç‡ï¼Œè€Œä¼ æ’­é€Ÿç‡æ˜¯åœ¨ä¿¡é“ä¸Šçš„ä¼ æ’­é€Ÿç‡ã€‚ä¸¤è€…æ˜¯ä¸åŒçš„æ¦‚å¿µ ç å…ƒä¼ è¾“é€Ÿç‡1sä¼ è¾“å¤šå°‘ä¸ªç å…ƒï¼šåˆ«åç å…ƒé€Ÿç‡ã€æ³¢å½¢é€Ÿç‡ã€è°ƒåˆ¶é€Ÿç‡ã€ç¬¦å·é€Ÿç‡ç­‰ï¼Œå®ƒè¡¨ç¤ºå•ä½æ—¶é—´å†…æ•°å­—é€šä¿¡ç³»ç»Ÿæ‰€ä¼ è¾“çš„ç å…ƒä¸ªæ•°ï¼ˆä¹Ÿå¯ç§°ä¸ºè„‰å†²ä¸ªæ•°æˆ–ä¿¡å·å˜åŒ–çš„æ¬¡æ•°ï¼‰ï¼Œå•ä½æ˜¯æ³¢ç‰¹ï¼ˆBaudï¼‰ã€‚1 æ³¢ç‰¹è¡¨ç¤ºæ•°å­—é€šä¿¡ç³»ç»Ÿæ¯ç§’ä¼ è¾“ä¸€ä¸ªç å…ƒã€‚è¿™é‡Œçš„ç å…ƒå¯ä»¥æ˜¯å¤šè¿›åˆ¶çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯äºŒè¿›åˆ¶çš„ï¼Œä½†ç å…ƒé€Ÿç‡ä¸è¿›åˆ¶æ•°æ— å…³ã€‚ ä¿¡æ¯ä¼ è¾“é€Ÿç‡1sä¼ è¾“å¤šå°‘ä¸ªæ¯”ç‰¹ï¼šåˆ«åä¿¡æ¯é€Ÿç‡ã€æ¯”ç‰¹ç‡ç­‰ï¼Œè¡¨ç¤ºå•ä½æ—¶é—´å†…æ•°å­—é€šä¿¡ç³»ç»Ÿä¼ è¾“çš„äºŒè¿›åˆ¶ç å…ƒä¸ªæ•°ï¼ˆå³æ¯”ç‰¹æ•°ï¼‰ï¼Œå•ä½æ˜¯æ¯”ç‰¹/ç§’ï¼ˆb/sï¼‰ã€‚ å…³ç³»ï¼šè‹¥ä¸€ä¸ªç å…ƒæºå¸¦n bitçš„ä¿¡æ¯é‡ï¼Œåˆ™M Baudçš„ç å…ƒä¼ è¾“é€Ÿç‡æ‰€å¯¹åº”çš„ä¿¡æ¯ä¼ è¾“é€Ÿç‡ä¸ºM * n bit/sã€‚ å¸¦å®½ (æ˜¯ä¸ªç†æƒ³å€¼)ï¼šè¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ è¾“æ•°æ®çš„èƒ½åŠ›ã€‚å•ä½æ˜¯ b/sã€‚ 4 è¿›åˆ¶è¡¨ç¤ºç å…ƒæœ‰ 4 ç§æ³¢å½¢ï¼Œåªéœ€è¦ 2 ä½å°±å¯ä»¥è¡¨ç¤º 4 ç§æ³¢å½¢ï¼ŒåŒç† 16 è¿›åˆ¶éœ€è¦ 4 ä½è¡¨ç¤ºã€‚ å¥ˆæ°å‡†åˆ™å¤±çœŸ å½±å“å¤±çœŸç¨‹åº¦çš„å› ç´ ï¼š ç å…ƒä¼ è¾“é€Ÿç‡ ä¿¡å·ä¼ è¾“è·ç¦» å™ªå£°å¹²æ‰° ä¼ è¾“åª’ä½“è´¨é‡ ç é—´ä¸²æ‰° é¢‘ç‡å¤ªä½ï¼Œä¼šå®¹æ˜“å—åˆ°ä¼ è¾“è·ç¦»ï¼Œå™ªå£°çš„å¹²æ‰°ï¼Œä»è€Œæ›´å®¹æ˜“å¤±çœŸï¼Œæ‰€ä»¥ä¸å…è®¸é€šè¿‡é¢‘ç‡å¤ªé«˜ï¼Œä¸å®¹æ˜“åŒºåˆ†ç å…ƒä¹‹é—´çš„åŒºåˆ« ç é—´ä¸²æ‰°ï¼šæ¥æ”¶ç«¯æ”¶åˆ°çš„ä¿¡å·æ³¢å½¢å¤±å»äº†ç å…ƒä¹‹é—´æ¸…æ™°ç•Œé™çš„ç°è±¡ã€‚ å¥ˆæ°å‡†åˆ™å¥ˆæ°å‡†åˆ™ï¼šåœ¨ç†æƒ³ä½é€šï¼ˆæ— å™ªå£°ï¼Œå¸¦å®½å—é™ï¼‰æ¡ä»¶ä¸‹ï¼Œä¸ºäº†é¿å…ç é—´ä¸²æ‰°ï¼Œæé™ç å…ƒä¼ è¾“é€Ÿç‡ä¸º2W Baudï¼ŒW æ˜¯ä¿¡é“å¸¦å®½ï¼Œå•ä½æ˜¯Hzã€‚(åªæœ‰åœ¨å¥ˆæ°å‡†åˆ™å’Œé¦™å†œå®šç†ä¸­çš„å¸¦å®½é‡‡ç”¨Hz) ç†æƒ³ä½é€šä¿¡é“ä¸‹çš„æé™æ•°æ®ä¼ è¾“ç‡ =$2Wlog_2V$(b/s)W:å¸¦å®½ï¼ŒVï¼šç å…ƒçš„ç¦»æ•£ç”µå¹³æ•°ç›®ï¼ˆå‡ ç§ç å…ƒï¼‰ 1.åœ¨ä»»ä½•ä¿¡é“ä¸­ï¼Œç å…ƒä¼ è¾“çš„é€Ÿç‡æ˜¯æœ‰ä¸Šé™çš„ã€‚è‹¥ä¼ è¾“é€Ÿç‡è¶…è¿‡æ­¤ä¸Šé™ï¼Œå°±ä¼šå‡ºç°ä¸¥é‡çš„ç é—´ä¸²æ‰°é—®é¢˜ï¼Œä½¿æ¥æ”¶ç«¯å¯¹ç å…ƒçš„å®Œå…¨æ­£ç¡®è¯†åˆ«æˆä¸ºä¸å¯èƒ½ã€‚2.ä¿¡é“çš„é¢‘å¸¦è¶Šå®½ï¼ˆå³èƒ½é€šè¿‡çš„ä¿¡å·é«˜é¢‘åˆ†é‡è¶Šå¤šï¼‰ï¼Œå°±å¯ä»¥ç”¨æ›´é«˜çš„é€Ÿç‡è¿›è¡Œç å…ƒçš„æœ‰æ•ˆä¼ è¾“ã€‚3.å¥ˆæ°å‡†åˆ™ç»™å‡ºäº†ç å…ƒä¼ è¾“é€Ÿç‡çš„é™åˆ¶ï¼Œä½†å¹¶æ²¡æœ‰å¯¹ä¿¡æ¯ä¼ è¾“é€Ÿç‡ç»™å‡ºé™åˆ¶ã€‚4.ç”±äºç å…ƒçš„ä¼ è¾“é€Ÿç‡å—å¥ˆæ°å‡†åˆ™çš„åˆ¶çº¦ï¼Œæ‰€ä»¥è¦æé«˜æ•°æ®çš„ä¼ è¾“é€Ÿç‡ï¼Œå°±å¿…é¡»è®¾æ³•ä½¿æ¯ä¸ªç å…ƒèƒ½æºå¸¦æ›´å¤šä¸ªæ¯”ç‰¹çš„ä¿¡æ¯é‡ï¼Œè¿™å°±éœ€è¦é‡‡ç”¨å¤šå…ƒåˆ¶çš„è°ƒåˆ¶æ–¹æ³•ã€‚ 123ç»ƒä¹ ï¼šåœ¨æ— å™ªå£°çš„æƒ…å†µä¸‹ï¼Œè‹¥æŸé€šä¿¡é“¾è·¯çš„å¸¦å®½ä¸º3kHzï¼Œé‡‡ç”¨4ä¸ªç›¸ä½ï¼Œæ¯ä¸ªç›¸ä½å…·æœ‰4ç§æŒ¯å¹…çš„QAMè°ƒåˆ¶æŠ€æœ¯ï¼Œåˆ™è¯¥é€šä¿¡é“¾è·¯çš„æœ€å¤§æ•°æ®ä¼ è¾“ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼šä¿¡å·æœ‰4 x 4=16ç§å˜åŒ–æœ€å¤§æ•°æ®ä¼ è¾“ç‡=2 x 3k x4=24kb/s é¦™å†œå®šç†å™ªå£°å­˜åœ¨äºæ‰€æœ‰çš„ç”µå­è®¾å¤‡å’Œé€šä¿¡ä¿¡é“ä¸­ã€‚ç”±äºå™ªå£°éšæœºäº§ç”Ÿï¼Œå®ƒçš„ç¬æ—¶å€¼æœ‰æ—¶ä¼šå¾ˆå¤§ï¼Œå› æ­¤å™ªå£°ä¼šä½¿æ¥æ”¶ç«¯å¯¹ç å…ƒçš„åˆ¤å†³äº§ç”Ÿé”™è¯¯ã€‚ä½†æ˜¯å™ªå£°çš„å½±å“æ˜¯ç›¸å¯¹çš„ï¼Œè‹¥ä¿¡å·è¾ƒå¼ºï¼Œé‚£ä¹ˆå™ªå£°å½±å“ç›¸å¯¹è¾ƒå°ã€‚å› æ­¤ï¼Œä¿¡å™ªæ¯”å°±å¾ˆé‡è¦ã€‚ ä¿¡å™ªæ¯” = ä¿¡å·çš„å¹³å‡åŠŸç‡ / å™ªå£°çš„å¹³å‡åŠŸç‡ï¼Œå¸¸è®°ä¸º S/Nï¼Œå¹¶ç”¨åˆ†è´ï¼ˆdBï¼‰ä½œä¸ºåº¦é‡å•ä½ï¼Œå³ï¼š$$dB = 10log_{10}(S/N)$$ é¦™å†œå®šç†ï¼šåœ¨å¸¦å®½å—é™ä¸”æœ‰å™ªå£°çš„ä¿¡é“ä¸­ï¼Œä¸ºäº†ä¸äº§ç”Ÿè¯¯å·®ï¼Œä¿¡æ¯çš„æ•°æ®ä¼ è¾“é€Ÿç‡æœ‰ä¸Šé™å€¼ã€‚ ä¿¡é“çš„æé™ä¼ è¾“é€Ÿç‡ = $Wlog_2(1+S/N)$(b/s) 1.ä¿¡é“çš„å¸¦å®½æˆ–ä¿¡é“ä¸­çš„ä¿¡å™ªæ¯”è¶Šå¤§ï¼Œåˆ™ä¿¡æ¯çš„æé™ä¼ è¾“é€Ÿç‡å°±è¶Šé«˜ã€‚ 2.å¯¹ä¸€å®šçš„ä¼ è¾“å¸¦å®½å’Œä¸€ - å®šçš„ä¿¡å™ªæ¯”ï¼Œä¿¡æ¯ä¼ è¾“é€Ÿç‡çš„ä¸Šé™å°±ç¡®å®šäº†ã€‚ 3.åªè¦ä¿¡æ¯çš„ä¼ è¾“é€Ÿç‡ä½äºä¿¡é“çš„æé™ä¼ è¾“é€Ÿç‡ï¼Œå°±ä¸€å®šèƒ½æ‰¾åˆ°æŸç§æ–¹æ³•æ¥å®ç°æ— å·®é”™çš„ä¼ è¾“ã€‚ 4.é¦™å†œå®šç†å¾—å‡ºçš„ä¸ºæé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡ï¼Œå®é™…ä¿¡é“èƒ½è¾¾åˆ°çš„ä¼ è¾“é€Ÿç‡è¦æ¯”å®ƒä½ä¸å°‘ã€‚5.ä»é¦™å†œå®šç†å¯ä»¥çœ‹å‡ºï¼Œè‹¥ä¿¡é“å¸¦å®½ W æˆ–ä¿¡å™ªæ¯” S/N æ²¡æœ‰ä¸Šé™ï¼ˆä¸å¯èƒ½ï¼‰ï¼Œé‚£ä¹ˆä¿¡é“çš„æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡ä¹Ÿå°±æ²¡æœ‰ä¸Šé™ã€‚ 1234ç»ƒä¹ ï¼šç”µè¯ç³»ç»Ÿçš„å…¸å‹å‚æ•°æ˜¯ä¿¡é“å¸¦å®½ä¸º3000Hzï¼Œä¿¡å™ªæ¯”ä¸º30dBï¼Œåˆ™è¯¥ç³»ç»Ÿæœ€å¤§æ•°æ®ä¼ è¾“é€Ÿç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š30dB=10log1oï¼ˆS/Nï¼‰åˆ™S/N=1000ä¿¡é“çš„æé™æ•°æ®ä¼ è¾“é€Ÿç‡=Wlog2ï¼ˆ1+S/Nï¼‰=3000 x log2ï¼ˆ1+1000ï¼‰&gt;30kb/s å½“é¢˜ç›®ä¸­æ—¢ç»™å‡ºäº†ç å…ƒä¿¡æ¯ï¼Œåˆç»™äº†ä¿¡å™ªæ¯”ä¿¡æ¯ï¼Œå°±éœ€è¦ç”¨ä¸¤ä¸ªå…¬å¼éƒ½ç®—ä¸€ä¸‹ï¼Œå–æœ€å°å€¼ 1234é¢˜ç›®ï¼šäºŒè¿›åˆ¶ä¿¡å·åœ¨ä¿¡å™ªæ¯”ä¸º127ï¼š1çš„4kHzä¿¡é“ä¸Šä¼ è¾“ï¼Œæœ€å¤§çš„æ•°æ®é€Ÿç‡å¯è¾¾åˆ°å¤šå°‘ï¼Ÿç­”ï¼šNiceï¼š2 X 4000X log2=8000b/sé¦™æµ“ï¼š4000 log2ï¼ˆ1+127ï¼‰=28000b/s ç¼–ç ä¸è°ƒåˆ¶åŸºå¸¦ä¿¡å·ä¸å®½å¸¦ä¿¡å·ä¿¡é“ï¼šä¿¡å·çš„ä¼ è¾“åª’ä»‹ã€‚ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºå‘æŸä¸€ä¸ªæ–¹å‘ä¼ é€ä¿¡æ¯çš„ä»‹è´¨ï¼Œå› æ­¤ä¸€æ¡é€šä¿¡çº¿è·¯å¾€å¾€åŒ…å«ä¸€æ¡å‘é€ä¿¡é“å’Œä¸€æ¡æ¥æ”¶ä¿¡é“ã€‚ ä¿¡é“ä¸Šä¼ è¾“çš„ä¿¡å· åŸºå¸¦ä¿¡å·å°†æ•°å­—ä¿¡å· 1 å’Œ 0 ç›´æ¥ç”¨ä¸¤ç§ä¸åŒçš„ç”µå‹è¡¨ç¤ºï¼Œå†é€åˆ°æ•°å­—ä¿¡é“ä¸Šå»ä¼ è¾“ï¼ˆåŸºå¸¦ä¼ è¾“ï¼‰æ¥è‡ªä¿¡æºçš„ä¿¡å·ï¼Œåƒè®¡ç®—æœºè¾“å‡ºçš„ä»£è¡¨å„ç§æ–‡å­—æˆ–å›¾åƒæ–‡ä»¶çš„æ•°æ®ä¿¡å·éƒ½å±äºåŸºå¸¦ä¿¡å·ã€‚åŸºå¸¦ä¿¡å·å°±æ˜¯å‘å‡ºçš„ç›´æ¥è¡¨è¾¾äº†è¦ä¼ è¾“çš„ä¿¡æ¯çš„ä¿¡å·ï¼Œæ¯”å¦‚æˆ‘ä»¬è¯´è¯çš„å£°æ³¢å°±æ˜¯åŸºå¸¦ä¿¡å·ã€‚ å®½å¸¦ä¿¡å·å°†åŸºå¸¦ä¿¡å·è¿›è¡Œè°ƒåˆ¶åå½¢æˆçš„é¢‘åˆ†å¤ç”¨æ¨¡æ‹Ÿä¿¡å·ï¼Œå†ä¼ é€åˆ°æ¨¡æ‹Ÿä¿¡é“ä¸Šå»ä¼ è¾“ï¼ˆå®½å¸¦ä¼ è¾“ï¼‰ã€‚æŠŠåŸºå¸¦ä¿¡å·ç»è¿‡è½½æ³¢è°ƒåˆ¶åï¼ŒæŠŠä¿¡å·çš„é¢‘ç‡èŒƒå›´æ¬ç§»åˆ°è¾ƒé«˜çš„é¢‘æ®µä»¥ä¾¿åœ¨ä¿¡é“ä¸­ä¼ è¾“ï¼ˆå³ä»…åœ¨ä¸€æ®µé¢‘ç‡èŒƒå›´å†…èƒ½å¤Ÿé€šè¿‡ä¿¡é“ï¼‰ åœ¨ä¼ è¾“è·ç¦»è¾ƒè¿‘æ—¶ï¼Œè®¡ç®—æœºç½‘ç»œé‡‡ç”¨åŸºå¸¦ä¼ è¾“æ–¹å¼ï¼ˆè¿‘è·ç¦»è¡°å‡å°ï¼Œä»è€Œä¿¡å·å†…å®¹ä¸æ˜“å‘ç”Ÿå˜åŒ–ï¼‰åœ¨ä¼ è¾“è·ç¦»è¾ƒè¿œæ—¶ï¼Œè®¡ç®—æœºç½‘ç»œé‡‡ç”¨å®½å¸¦ä¼ è¾“æ–¹å¼ï¼ˆè¿œè·ç¦»è¡°å‡å¤§ï¼Œå³ä½¿ä¿¡å·å˜åŒ–å¤§ä¹Ÿèƒ½æœ€åè¿‡æ»¤å‡ºæ¥åŸºå¸¦ä¿¡å·ï¼‰ ç¼–ç ä¸è°ƒåˆ¶ç¼–ç ï¼šæ•°å­—æ•°æ®-ã€‹æ•°å­—ä¿¡å·ï¼ˆæ•°å­—å‘é€å™¨ï¼‰è°ƒåˆ¶ï¼šæ•°å­—æ•°æ®-ã€‹æ¨¡æ‹Ÿä¿¡å·ï¼ˆè°ƒåˆ¶å™¨ï¼‰ ç¼–ç ï¼šæ¨¡æ‹Ÿæ•°æ®-ã€‹æ•°å­—ä¿¡å·ï¼ˆPCM ç¼–ç å™¨ï¼‰è°ƒåˆ¶ï¼šæ¨¡æ‹Ÿæ•°æ®-ã€‹æ¨¡æ‹Ÿä¿¡å·ï¼ˆæ”¾å¤§å™¨è°ƒåˆ¶å™¨ï¼‰ æ•°å­—æ•°æ®-ã€‹æ•°å­—ä¿¡å· éå½’é›¶ç¼–ç ï¼ˆNRZï¼‰ï¼ˆé«˜1ä½0ï¼‰ç¼–ç å®¹æ˜“å®ç°ï¼Œä½†æ²¡æœ‰æ£€é”™åŠŸèƒ½ï¼Œä¸”æ— æ³•åˆ¤æ–­ä¸€-ä¸ªç å…ƒçš„å¼€å§‹å’Œç»“æŸï¼Œä»¥è‡³äºæ”¶å‘åŒæ–¹éš¾ä»¥ä¿æŒåŒæ­¥ã€‚ä¸€ä¸ªç å…ƒå†…ç”µå¹³ä¸ä¼šè·³å˜ã€‚ å½’é›¶ç¼–ç ï¼ˆRZï¼‰ä¿¡å·ç”µå¹³åœ¨ä¸€ä¸€ä¸ªç å…ƒä¹‹å†…éƒ½è¦æ¢å¤åˆ°é›¶çš„è¿™ç§ç¼–ç æˆç¼–ç æ–¹å¼ã€‚ åå‘ä¸å½’é›¶ç¼–ç ï¼ˆNRZIï¼‰ä¿¡å·ç”µå¹³ç¿»è½¬è¡¨ç¤º 0ï¼Œä¿¡å·ç”µå¹³ä¸ã€‚å˜è¡¨ç¤º 1ã€‚ä¸€ä¸ªç å…ƒå†…ç”µå¹³ä¸ä¼šè·³å˜ã€‚ æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆå‰é«˜åä½1ï¼Œå‰ä½åé«˜ä¸º0ï¼‰å°†ä¸€ä¸ªç å…ƒåˆ†æˆä¸¤ä¸ªç›¸ç­‰çš„é—´éš”ï¼Œå‰ä¸€ä¸ªé—´éš”ä¸ºä½ç”µå¹³å - ä¸€ä¸ªé—´éš”ä¸ºé«˜ç”µå¹³è¡¨ç¤ºç å…ƒ 1ï¼›ç å…ƒ 0 åˆ™æ­£å¥½ç›¸åã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨ç›¸åçš„è§„å®šã€‚è¯¥ç¼–ç çš„ç‰¹ç‚¹æ˜¯åœ¨æ¯â€“ä¸ªç å…ƒçš„ä¸­é—´å‡ºç°ç”µå¹³è·³å˜ï¼Œä½ä¸­é—´çš„è·³å˜æ—¢ä½œæ—¶é’Ÿä¿¡å·ï¼ˆå¯ç”¨äºåŒæ­¥ï¼‰ï¼Œåˆä½œæ•°æ®ä¿¡å·ï¼Œä½†å®ƒæ‰€å çš„é¢‘å¸¦å®½åº¦æ˜¯åŸå§‹çš„åŸºå¸¦å®½åº¦çš„ä¸¤å€ã€‚æ¯ä¸€ä¸ªç å…ƒéƒ½è¢«è°ƒæˆä¸¤ä¸ªç”µå¹³ï¼Œæ‰€ä»¥æ•°æ®ä¼ è¾“é€Ÿç‡åªæœ‰è°ƒåˆ¶é€Ÿç‡çš„1/2ã€‚ å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆåŒ1å¼‚0ï¼‰å¸¸ç”¨äºå±€åŸŸç½‘ä¼ è¾“ï¼Œå…¶è§„åˆ™æ˜¯ï¼šè‹¥ç å…ƒä¸º 1ï¼Œåˆ™å‰åŠä¸ªç å…ƒçš„ç”µå¹³ä¸ä¸Šä¸€ä¸ªç å…ƒçš„ååŠä¸ªç å…ƒçš„ç”µå¹³ç›¸åŒï¼Œè‹¥ä¸º 0ï¼Œåˆ™ç›¸åã€‚è¯¥ç¼–ç çš„ç‰¹ç‚¹æ˜¯ï¼Œåœ¨æ¯ä¸ªç å…ƒçš„ä¸­é—´ï¼Œéƒ½æœ‰ä¸€æ¬¡ç”µå¹³çš„è·³è½¬ï¼Œå¯ä»¥å®ç°è‡ªåŒæ­¥ï¼Œä¸”æŠ—å¹²æ‰°æ€§å¼ºäºæ›¼å½»æ–¯ç‰¹ç¼–ç ã€‚ 4B/5Bç¼–ç æ¯”ç‰¹æµä¸­æ’å…¥é¢å¤–çš„æ¯”ç‰¹ä»¥æ‰“ç ´è¿ä¸²çš„ 0 æˆ– 1ï¼Œå°±æ˜¯ç”¨ 5 ä¸ªæ¯”ç‰¹æ¥ç¼–ç  4 ä¸ªæ¯”ç‰¹çš„æ•°æ®ï¼Œä¹‹åå†ä¼ ç»™æ¥æ”¶æ–¹ï¼Œå› æ­¤ç§°ä¸º 4B/5Bã€‚ç¼–ç æ•ˆç‡ä¸º 80%ã€‚ æ•°å­—æ•°æ®-ã€‹æ¨¡æ‹Ÿä¿¡å·æ•°å­—æ•°æ®è°ƒåˆ¶æŠ€æœ¯åœ¨å‘é€ç«¯å°†æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œè€Œåœ¨æ¥æ”¶ç«¯å°†æ¨¡æ‹Ÿä¿¡å·è¿˜åŸä¸ºæ•°å­—ä¿¡å·ï¼Œåˆ†åˆ«å¯¹åº”äºè°ƒåˆ¶è§£è°ƒå™¨çš„è°ƒåˆ¶å’Œè§£è°ƒè¿‡ç¨‹ã€‚ 12ä¾‹ï¼šæŸé€šä¿¡é“¾è·¯çš„æ³¢ç‰¹ç‡æ˜¯1200Baudï¼Œé‡‡ç”¨4ä¸ªç›¸ä½ï¼Œæ¯ä¸ªç›¸ä½æœ‰4ç§æŒ¯å¹…çš„QAMè°ƒåˆ¶æŠ€æœ¯ï¼Œåˆ™è¯¥é“¾è·¯çš„ä¿¡æ¯ä¼ è¾“é€Ÿç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š4ä¸ªç›¸ä½4ç§æŒ¯å¹…ä¹Ÿå°±æ˜¯è¯´æœ‰16ä¸ªç å…ƒã€‚16ä¸ªç å…ƒä¹Ÿå°±æ˜¯16ä¸ªçŠ¶æ€ï¼Œéœ€è¦4ä½æ¥è¡¨ç¤ºã€‚ä¹Ÿå°±æ˜¯1ç å…ƒå¯¹åº”4bitã€‚é¢˜ç›®ä¸­æ³¢ç‰¹ç‡æ˜¯1200ï¼Œä¹Ÿå°±è¯´æ˜1200*4=4800bit/sã€‚ æ¨¡æ‹Ÿæ•°æ®-ã€‹æ•°å­—ä¿¡å·è®¡ç®—æœºå†…éƒ¨å¤„ç†çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå¤„ç†çš„éƒ½æ˜¯æ•°å­—éŸ³é¢‘ï¼Œæ‰€ä»¥éœ€è¦å°†æ¨¡æ‹ŸéŸ³é¢‘é€šè¿‡é‡‡æ ·ã€é‡åŒ–è½¬æ¢æˆæœ‰é™ä¸ªæ•°å­—è¡¨ç¤ºçš„ç¦»æ•£åºåˆ—ï¼ˆå³å®ç°éŸ³é¢‘æ•°å­—åŒ–ï¼‰ã€‚æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯å¯¹éŸ³é¢‘ä¿¡å·è¿›è¡Œç¼–ç çš„è„‰ç è°ƒåˆ¶ï¼ˆPCMï¼‰ï¼Œåœ¨è®¡ç®—æœºåº”ç”¨ä¸­ï¼Œèƒ½å¤Ÿè¾¾åˆ°æœ€é«˜ä¿çœŸæ°´å¹³çš„å°±æ˜¯ PCM ç¼–ç ï¼Œè¢«å¹¿æ³›ç”¨äºç´ æä¿å­˜åŠéŸ³ä¹æ¬£èµï¼ŒCDã€DVD ä»¥åŠæˆ‘ä»¬å¸¸è§çš„WAVæ–‡ä»¶ä¸­å‡æœ‰åº”ç”¨ã€‚å®ƒä¸»è¦åŒ…æ‹¬ä¸‰æ­¥ï¼šæŠ½æ ·ã€é‡åŒ–ã€ç¼–ç ã€‚ æŠ½æ ·å¯¹æ¨¡æ‹Ÿä¿¡å·å‘¨æœŸæ€§æ‰«æï¼ŒæŠŠæ—¶é—´ä¸Šè¿ç»­çš„ä¿¡å·å˜æˆæ—¶é—´ä¸Šç¦»æ•£çš„ä¿¡å·ã€‚ä¸ºäº†ä½¿æ‰€å¾—çš„ç¦»æ•£ä¿¡å·èƒ½æ— å¤±çœŸåœ°ä»£è¡¨è¢«æŠ½æ ·çš„æ¨¡æ‹Ÿæ•°æ®ï¼Œè¦ä½¿ç”¨é‡‡æ ·å®šç†é‡‡æ ·ï¼šé‡‡æ ·é¢‘ç‡ &gt;= 2*ä¿¡å·æœ€é«˜é¢‘ç‡ é‡åŒ–æŠŠæŠ½æ ·å–å¾—çš„ç”µå¹³å¹…å€¼æŒ‰ç…§ä¸€å®šçš„åˆ†çº§æ ‡åº¦è½¬åŒ–ä¸ºå¯¹åº”çš„æ•°å­—å€¼ï¼Œå¹¶å–æ•´æ•°ï¼Œè¿™å°±æŠŠè¿ç»­çš„ç”µå¹³å¹…å€¼è½¬æ¢ä¸ºç¦»æ•£çš„æ•°å­—é‡ã€‚ ç¼–ç æŠŠé‡åŒ–çš„ç»“æœè½¬æ¢ä¸ºä¸ä¹‹å¯¹åº”çš„äºŒè¿›åˆ¶ç¼–ç ã€‚ æ¨¡æ‹Ÿæ•°æ®-ã€‹æ¨¡æ‹Ÿä¿¡å·ä¸ºäº†å®ç°ä¼ è¾“çš„æœ‰æ•ˆæ€§ï¼Œå¯èƒ½éœ€è¦è¾ƒé«˜çš„é¢‘ç‡ã€‚è¿™ç§è°ƒåˆ¶æ–¹å¼è¿˜å¯ä»¥ä½¿ç”¨é¢‘åˆ†å¤ç”¨æŠ€æœ¯ï¼Œå……åˆ†åˆ©ç”¨å¸¦å®½èµ„æºã€‚åœ¨ç”µè¯æœºå’Œæœ¬åœ°äº¤æ¢æœºæ‰€ä¼ è¾“çš„ä¿¡å·æ˜¯é‡‡ç”¨æ¨¡æ‹Ÿä¿¡å·ä¼ è¾“æ¨¡æ‹Ÿæ•°æ®çš„æ–¹å¼ï¼›æ¨¡æ‹Ÿçš„å£°éŸ³æ•°æ®æ˜¯åŠ è½½åˆ°æ¨¡æ‹Ÿçš„è½½æ³¢ä¿¡å·ä¸­ä¼ è¾“çš„ã€‚ ä¼ è¾“ä»‹è´¨åŠåˆ†ç±»ä¼ è¾“ä»‹è´¨ä¹Ÿç§°ä¼ è¾“åª’ä½“/ä¼ è¾“åª’ä»‹ï¼Œå®ƒå°±æ˜¯æ•°æ®ä¼ è¾“ç³»ç»Ÿä¸­åœ¨å‘é€è®¾å¤‡å’Œæ¥æ”¶è®¾å¤‡ä¹‹é—´çš„ç‰©ç†é€šè·¯ã€‚ä¼ è¾“åª’ä½“å¹¶ä¸æ˜¯ç‰©ç†å±‚ã€‚ä¼ è¾“åª’ä½“åœ¨ç‰©ç†å±‚çš„ä¸‹é¢ï¼Œå› ä¸ºç‰©ç†å±‚æ˜¯ä½“ç³»ç»“æ„çš„ç¬¬ä¸€å±‚ï¼Œå› æ­¤æœ‰æ—¶ç§°ä¼ è¾“åª’ä½“ä¸º 0 å±‚ã€‚åœ¨ä¼ è¾“åª’ä½“ä¸­ä¼ è¾“çš„æ˜¯ä¿¡å·ï¼Œä½†ä¼ è¾“åª’ä½“å¹¶ä¸çŸ¥é“æ‰€ä¼ è¾“çš„ä¿¡å·ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚ä½†ç‰©ç†å±‚è§„å®šäº†ç”µæ°”ç‰¹æ€§ï¼Œå› æ­¤èƒ½å¤Ÿè¯†åˆ«æ‰€ä¼ é€çš„æ¯”ç‰¹æµã€‚ ä¼ è¾“ä»‹è´¨ å¯¼å‘æ€§ï¼šç”µç£æ³¢è¢«å¯¼å‘æ²¿ç€å›ºä½“åª’ä»‹ä¼ æ’­ éå¯¼å‘æ€§ï¼šç©ºæ°”ï¼Œæµ·æ°´ç­‰ åŒç»çº¿åŒç»çº¿æ˜¯å¤è€ã€åˆæœ€å¸¸ç”¨çš„ä¼ è¾“ä»‹è´¨ï¼Œå®ƒç”±ä¸¤æ ¹é‡‡ç”¨ä¸€å®šè§„åˆ™å¹¶æ’ç»åˆçš„ã€ç›¸äº’ç»ç¼˜çš„é“œå¯¼çº¿ç»„æˆã€‚ç»åˆå¯ä»¥å‡å°‘å¯¹ç›¸é‚»å¯¼çº¿çš„ç”µç£å¹²æ‰°ã€‚ åŒç»çº¿ä»·æ ¼ä¾¿å®œï¼Œæ˜¯æœ€å¸¸ç”¨çš„ä¼ è¾“ä»‹è´¨ä¹‹ä¸€ï¼Œåœ¨å±€åŸŸç½‘å’Œä¼ ç»Ÿç”µè¯ç½‘ä¸­æ™®éä½¿ç”¨ã€‚æ¨¡æ‹Ÿä¼ è¾“å’Œæ•°å­—ä¼ è¾“éƒ½å¯ä»¥ä½¿ç”¨åŒç»çº¿ï¼Œå…¶é€šä¿¡è·ç¦»ä¸€èˆ¬ä¸ºå‡ å…¬é‡Œåˆ°æ•°åå…¬é‡Œã€‚è·ç¦»å¤ªè¿œæ—¶ï¼Œå¯¹äºæ¨¡æ‹Ÿä¼ è¾“ï¼Œè¦ç”¨æ”¾å¤§å™¨æ”¾å¤§è¡°å‡çš„ä¿¡å·ï¼›å¯¹äºæ•°å­—ä¼ è¾“ï¼Œè¦ç”¨ä¸­ç»§å™¨å°†å¤±çœŸçš„ä¿¡å·æ•´å½¢ã€‚ åŒè½´ç”µç¼†åŒè½´ç”µç¼†ç”±å¯¼ä½“é“œè´¨èŠ¯çº¿ã€ç»ç¼˜å±‚ã€ç½‘çŠ¶ç¼–ç»‡å±è”½å±‚å’Œå¡‘æ–™å¤–å±‚æ„æˆã€‚æŒ‰ç‰¹æ€§é˜»æŠ—æ•°å€¼çš„ä¸åŒï¼Œé€šå¸¸å°†åŒè½´ç”µç¼†åˆ†ä¸ºä¸¤ç±»ï¼š50$\\Omega$åŒè½´ ç”µç¼†å’Œ 75$\\Omega$åŒè½´ç”µç¼†ã€‚å…¶ä¸­ï¼Œ50$\\Omega$åŒè½´ç”µç¼†ä¸»è¦ç”¨äºä¼ é€åŸºå¸¦æ•°å­—ä¿¡å·ï¼Œåˆç§°ä¸ºåŸºå¸¦åŒè½´ç”µç¼†ï¼Œå®ƒåœ¨å±€åŸŸç½‘ä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼›75$\\Omega$åŒè½´ç”µç¼†ä¸»è¦ç”¨äºä¼ é€å®½å¸¦ä¿¡å·ï¼Œåˆç§°ä¸ºå®½å¸¦åŒè½´ç”µç¼†ï¼Œå®ƒä¸»è¦ç”¨äºæœ‰çº¿ç”µè§†ç³»ç»Ÿã€‚ ç”±äºå¤–å¯¼ä½“å±è”½å±‚çš„ä½œç”¨ï¼ŒåŒè½´ç”µç¼†æŠ—å¹²æ‰°ç‰¹æ€§æ¯”åŒç»çº¿å¥½ï¼Œè¢«å‚æ³›ç”¨äºä¼ è¾“è¾ƒé«˜é€Ÿç‡çš„æ•°æ®ï¼Œå…¶ä¼ è¾“è·ç¦»æ›´è¿œï¼Œä½†ä»·æ ¼è¾ƒåŒç»çº¿è´µ å…‰çº¤å…‰çº¤é€šä¿¡å°±æ˜¯åˆ©ç”¨å…‰å¯¼çº¤ç»´ï¼ˆç®€ç§°å…‰çº¤ï¼‰ä¼ é€’å…‰è„‰å†²æ¥è¿›è¡Œé€šä¿¡ã€‚æœ‰å…‰è„‰å†²è¡¨ç¤º 1ï¼Œæ— å…‰è„‰å†²è¡¨ç¤º 0ã€‚è€Œå¯è§å…‰çš„é¢‘ç‡å¤§çº¦æ˜¯ 108MHzï¼Œå› æ­¤å…‰çº¤é€šä¿¡ç³»ç»Ÿçš„å¸¦å®½è¿œè¿œå¤§äºç›®å‰å…¶ä»–å„ç§ä¼ è¾“åª’ä½“çš„å¸¦å®½ã€‚ å…‰çº¤ä¸»è¦ç”±çº¤èŠ¯ï¼ˆå®å¿ƒçš„ï¼ï¼‰å’ŒåŒ…å±‚æ„æˆï¼Œå…‰æ³¢é€šè¿‡çº¤èŠ¯è¿›è¡Œä¼ å¯¼ï¼ŒåŒ…å±‚è¾ƒçº¤èŠ¯æœ‰è¾ƒä½çš„æŠ˜å°„ç‡ã€‚å½“å…‰çº¿ä»é«˜æŠ˜å°„ç‡çš„ä»‹è´¨å°„å‘ä½æŠ˜å°„ç‡çš„ä»‹è´¨æ—¶ï¼Œå…¶æŠ˜å°„è§’å°†å¤§äºå…¥å°„è§’ã€‚å› æ­¤ï¼Œå¦‚æœå…¥å°„è§’è¶³å¤Ÿå¤§ï¼Œå°±ä¼šå‡ºç°å…¨åå°„ï¼Œå³å…‰çº¿ç¢°åˆ°åŒ…å±‚æ—¶å€™å°±ä¼šæŠ˜å°„å›çº¤èŠ¯ã€è¿™ä¸ªè¿‡ç¨‹ä¸æ–­é‡å¤ï¼Œå…‰ä¹Ÿå°±æ²¿ç€å…‰çº¤ä¼ è¾“ä¸‹å»ã€‚ å…‰çº¤ç‰¹ç‚¹ï¼š ä¼ è¾“æŸè€—å°ï¼Œä¸­ç»§è·ç¦»é•¿ï¼Œå¯¹è¿œè·ç¦»ä¼ è¾“ç‰¹åˆ«ç»æµã€‚ æŠ—é›·ç”µå’Œç”µç£å¹²æ‰°æ€§èƒ½å¥½ã€‚ æ— ä¸²éŸ³å¹²æ‰°ï¼Œä¿å¯†æ€§å¥½ï¼Œä¹Ÿä¸æ˜“è¢«çªƒå¬æˆ–æˆªå–æ•°æ®ã€‚ æ— çº¿ç”µæ³¢ä¿¡å·æ‰€æœ‰æ–¹å‘éƒ½èƒ½ä¼ æ’­ è¾ƒå¼ºç©¿é€èƒ½åŠ›ï¼Œå¯ä¼ è¿œè·ç¦»ï¼Œå¹¿æ³›ç”¨äºé€šä¿¡é¢†åŸŸï¼ˆå¦‚æ‰‹æœºé€šä¿¡ï¼‰ã€‚ å¾®æ³¢ä¿¡å·å›ºå®šæ–¹å‘ä¼ æ’­ å¾®æ³¢é€šä¿¡é¢‘ç‡è¾ƒé«˜ã€é¢‘æ®µèŒƒå›´å®½ï¼Œå› æ­¤æ•°æ®ç‡å¾ˆé«˜ ä¼˜ç‚¹ï¼š é€šä¿¡å®¹é‡å¤§ è·ç¦»è¿œ è¦†ç›–å¹¿ å¹¿æ’­é€šä¿¡å’Œå¤šå€é€šä¿¡ ç¼ºç‚¹ï¼š ä¼ æ’­æ—¶å»¶é•¿ï¼ˆ250-270msï¼‰ å—æ°”å€™å½±å“å¤§ï¼ˆegï¼šå¼ºé£å¤ªé˜³é»‘å­çˆ†å‘ã€æ—¥å‡Œï¼‰X ä¿¡ è¯¯ç ç‡è¾ƒé«˜ æˆæœ¬é«˜ çº¢å¤–çº¿ï¼Œæ¿€å…‰ä¿¡å·å›ºå®šæ–¹å‘ä¼ æ’­ è¦æŠŠè¦ä¼ è¾“çš„ä¿¡å·åˆ†åˆ«è½¬æ¢ä¸ºå„è‡ªçš„ä¿¡å·æ ¼å¼ï¼Œå³çº¢å¤–å…‰ä¿¡å·å’Œæ¿€å…‰ä¿¡å·ï¼Œå†åœ¨ç©ºé—´ä¸­ä¼ æ’­ã€‚ ç‰©ç†å±‚è®¾å¤‡ä¸­ç»§å™¨è¯ç”ŸåŸå› ï¼šç”±äºå­˜åœ¨æŸè€—ï¼Œåœ¨çº¿è·¯ä¸Šä¼ è¾“çš„ä¿¡å·åŠŸç‡ä¼šé€æ¸è¡°å‡ï¼Œè¡°å‡åˆ°â€“å®šç¨‹åº¦æ—¶å°†é€ æˆä¿¡å·å¤±çœŸï¼Œå› æ­¤ä¼šå¯¼è‡´æ¥æ”¶é”™è¯¯ã€‚ä¸­ç»§å™¨çš„åŠŸèƒ½(å†ç”Ÿæ•°å­—ä¿¡å·)ï¼šå¯¹ä¿¡å·è¿›è¡Œå†ç”Ÿå’Œè¿˜åŸï¼Œå¯¹è¡°å‡çš„ä¿¡å·è¿›è¡Œæ”¾å¤§ï¼Œä¿æŒä¸åŸæ•°æ®ç›¸åŒï¼Œä»¥å¢åŠ ä¿¡å·ä¼ è¾“çš„è·ç¦»ï¼Œå»¶é•¿ç½‘ç»œçš„é•¿åº¦ã€‚ä¸­ç»§å™¨ä¸¤ç«¯ï¼šé€‚ç”¨äºå®Œå…¨ç›¸åŒçš„ä¸¤ç±»ç½‘ç»œçš„äº’è¿ï¼Œé€Ÿç‡è¦ç›¸åŒï¼Œåªåšè½¬å‘ä¸åšæ£€æµ‹ï¼Œå¯ä»¥è¿æ¥ä¸åŒè®¾å¤‡ï¼Œä¸¤ç«¯æ˜¯åŒä¸€ä¸ªåè®®5-4-3è§„åˆ™ï¼šç½‘ç»œæ ‡å‡†ä¸­éƒ½å¯¹ä¿¡å·çš„å»¶è¿ŸèŒƒå›´ä½œäº†å…·ä½“çš„è§„å®šï¼Œå› è€Œä¸­ç»§å™¨åªèƒ½åœ¨è§„å®šçš„èŒƒå›´å†…è¿›è¡Œï¼Œå¦åˆ™ä¼šç½‘ç»œæ•…éšœã€‚5ä¸ªç½‘æ®µ-4ä¸ªä¸­ç»§å™¨-3ä¸ªè®¾å¤‡ é›†çº¿å™¨ï¼ˆå¤šå£ä¸­ç»§å™¨ï¼‰ åŠŸèƒ½ï¼šå†ç”Ÿä¸æ”¾å¤§ä¿¡å·ä¸èƒ½åˆ†å‰²å†²çªåŸŸï¼Œè¿æ¥åœ¨é›†çº¿å™¨ä¸Šçš„å·¥ä½œä¸»æœºå¹³åˆ†å¸¦å®½","categories":[],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}]},{"title":"VSCode æ’ä»¶ REST Client ä½¿ç”¨æ–‡æ¡£","slug":"VSCode æ’ä»¶ REST Clientä½¿ç”¨æ–‡æ¡£","date":"2023-03-24T11:59:35.000Z","updated":"2023-08-17T14:52:54.949Z","comments":true,"path":"2023/03/24/VSCode æ’ä»¶ REST Clientä½¿ç”¨æ–‡æ¡£/","link":"","permalink":"http://example.com/2023/03/24/VSCode%20%E6%8F%92%E4%BB%B6%20REST%20Client%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/","excerpt":"","text":"REST Client æ˜¯ VSCode ä¸­ä¸€æ¬¾éå¸¸å¥½ç”¨çš„æ’ä»¶ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿã€æ–¹ä¾¿åœ°å‘é€ HTTP è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šè¯¦ç»†ä»‹ç» REST Client çš„ä½¿ç”¨æ–¹æ³•ã€‚ å®‰è£… REST Client æ’ä»¶åœ¨ VSCode ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®‰è£… REST Client æ’ä»¶ï¼š æ‰“å¼€ VSCodeï¼› ç‚¹å‡»å·¦ä¾§çš„æ’ä»¶å›¾æ ‡ï¼ˆCtrl+Shift+Xï¼‰ï¼› æœç´¢â€œREST Clientâ€æ’ä»¶ï¼› ç‚¹å‡»â€œå®‰è£…â€æŒ‰é’®ã€‚ å‘é€ HTTP è¯·æ±‚ ä½¿ç”¨ REST Client æ’ä»¶å‘é€ HTTP è¯·æ±‚éå¸¸ç®€å•ã€‚ä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„.restæ–‡æœ¬æ–‡ä»¶ï¼Œå°†è¯·æ±‚ä¿¡æ¯æ”¾å…¥å…¶ä¸­ï¼Œç„¶åä½¿ç”¨å¿«æ·é”®Ctrl + Alt + R æˆ–è€…å³é”®èœå•çš„ Send Request é€‰é¡¹å‘é€è¯·æ±‚ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ GET è¯·æ±‚çš„ä¾‹å­ï¼š 1GET https://jsonplaceholder.typicode.com/posts/1 HTTP/1.1 è¿™ä¸ªè¯·æ±‚ä¼šè·å– JSONPlaceholder API ä¸­çš„ä¸€ç¯‡åšå®¢æ–‡ç« ã€‚ å¦‚æœä½ æƒ³æ·»åŠ è¯·æ±‚å¤´æˆ–è¯·æ±‚ä½“ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š 12345678GET https://jsonplaceholder.typicode.com/posts/1 HTTP/1.1Content-Type: application/json&#123; &quot;title&quot;: &quot;foo&quot;, &quot;body&quot;: &quot;bar&quot;, &quot;userId&quot;: 1&#125; è¿™ä¸ªè¯·æ±‚ä¼šåœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  Content-Type å¤´ï¼Œè¯·æ±‚ä½“ä¸­åŒ…å« JSON æ•°æ®ã€‚ æŸ¥çœ‹å“åº”å‘é€è¯·æ±‚åï¼Œä½ å¯ä»¥åœ¨ç¼–è¾‘å™¨åº•éƒ¨çœ‹åˆ°å“åº”ä¿¡æ¯ã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹å“åº”å¤´ã€å“åº”ä½“æˆ–çŠ¶æ€ç ç­‰è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š 1234567891011###HTTP/1.1 200 OKContent-Type: application/json; charset=utf-8...&#123; &quot;userId&quot;: 1, &quot;id&quot;: 1, &quot;title&quot;: &quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;, &quot;body&quot;: &quot;quia et suscipit\\nsuscipit...&quot;&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ###ç”¨æ¥åˆ†éš”è¯·æ±‚å’Œå“åº”ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŸ¥çœ‹è¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯äº†ã€‚ å˜é‡REST Client æ’ä»¶è¿˜æ”¯æŒå˜é‡çš„ä½¿ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨${variable}è¯­æ³•æ¥å®šä¹‰å˜é‡ï¼Œç„¶ååœ¨è¯·æ±‚ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼š 123@host = https://jsonplaceholder.typicode.comGET $&#123;host&#125;/posts/1 HTTP/1.1 åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º host çš„å˜é‡ï¼Œå¹¶åœ¨è¯·æ±‚ä¸­ä½¿ç”¨å®ƒæ¥æŒ‡å®š API çš„åŸºç¡€ URLã€‚ å¾ªç¯å¦‚æœä½ éœ€è¦å‘é€å¤šä¸ªè¯·æ±‚ï¼ŒREST Client æ’ä»¶æ”¯æŒå¾ªç¯è¯­æ³•ã€‚ä¾‹å¦‚ï¼š 12345@host = https://jsonplaceholder.typicode.com@for(i,1,10)&#123; GET $&#123;host&#125;/posts/$&#123;i&#125; HTTP/1.1&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@for è¯­æ³•æ¥å‘é€ 10 ä¸ª GET è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚ URL ä¸­çš„ i å˜é‡ä» 1 åˆ° 10 ä¾æ¬¡é€’å¢ã€‚ æ¡ä»¶è¯­å¥å¦‚æœä½ éœ€è¦æ ¹æ®æ¡ä»¶å‘é€è¯·æ±‚ï¼ŒREST Client æ’ä»¶ä¹Ÿæ”¯æŒæ¡ä»¶è¯­å¥ã€‚ä¾‹å¦‚ï¼š 1234567@host = https://jsonplaceholder.typicode.com@if(isDebug)&#123; GET $&#123;host&#125;/posts/1 HTTP/1.1&#125;else&#123; GET $&#123;host&#125;/posts/2 HTTP/1.1&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@if è¯­æ³•æ¥åˆ¤æ–­æ˜¯å¦ä¸ºè°ƒè¯•æ¨¡å¼ï¼Œå¦‚æœæ˜¯å°±å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¦åˆ™å‘é€å¦ä¸€ä¸ªè¯·æ±‚ã€‚ å¯¼å…¥ç¯å¢ƒå˜é‡REST Client æ’ä»¶æ”¯æŒä»å¤–éƒ¨æ–‡ä»¶ä¸­å¯¼å…¥ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨.env æ–‡ä»¶ä¸­å®šä¹‰å˜é‡ï¼š 12host=https://jsonplaceholder.typicode.comisDebug=true ç„¶ååœ¨è¯·æ±‚æ–‡ä»¶ä¸­ä½¿ç”¨@environment è¯­æ³•æ¥å¯¼å…¥è¿™äº›å˜é‡ï¼š 1234567@environment .env@if(isDebug)&#123; GET $&#123;host&#125;/posts/1 HTTP/1.1&#125;else&#123; GET $&#123;host&#125;/posts/2 HTTP/1.1&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@environment è¯­æ³•ä».env æ–‡ä»¶ä¸­å¯¼å…¥ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨è¯·æ±‚æ–‡ä»¶ä¸­ä½¿ç”¨è¿™äº›å˜é‡ã€‚ ç»“è®ºREST Client æ’ä»¶æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿã€æ–¹ä¾¿åœ°å‘é€ HTTP è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† REST Client çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å‘é€è¯·æ±‚ã€æŸ¥çœ‹å“åº”ã€ä½¿ç”¨å˜é‡ã€å¾ªç¯ã€æ¡ä»¶è¯­å¥å’Œå¯¼å…¥ç¯å¢ƒå˜é‡ç­‰ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨ REST Client æ’ä»¶ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"åç«¯å¼€å‘","slug":"åç«¯å¼€å‘","permalink":"http://example.com/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"}]},{"title":"WSL2 å®‰è£… Docker","slug":"WSL2å®‰è£…Docker","date":"2023-03-16T14:19:00.000Z","updated":"2023-03-16T14:19:45.140Z","comments":true,"path":"2023/03/16/WSL2å®‰è£…Docker/","link":"","permalink":"http://example.com/2023/03/16/WSL2%E5%AE%89%E8%A3%85Docker/","excerpt":"","text":"åœ¨ WSL2 ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸ Docker æœåŠ¡ç›¸å…³çš„é—®é¢˜ï¼Œå› ä¸º WSL2 ä¸ä¼ ç»Ÿ Linux ç³»ç»Ÿåœ¨æŸäº›æ–¹é¢æœ‰æ‰€ä¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹æ­¥éª¤æ¥è§£å†³é—®é¢˜ï¼š é¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† WSL2 çš„æœ€æ–°ç‰ˆæœ¬ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–° WSL2ï¼š 1wsl --update ç¡®ä¿ Docker Desktop for Windows å·²å®‰è£…å¹¶å¯ç”¨ WSL2 é›†æˆã€‚ä½ å¯ä»¥åœ¨ Docker Desktop è®¾ç½®ä¸­æ‰¾åˆ°è¿™ä¸ªé€‰é¡¹ã€‚ç¡®ä¿ä½ çš„ WSL2 å‘è¡Œç‰ˆå·²è¢«æ·»åŠ åˆ° Docker Desktop çš„ WSL é›†æˆåˆ—è¡¨ä¸­ã€‚ç‚¹å‡»é“¾æ¥ä¸‹è½½å®‰è£…åœ¨ Windows ä¸Šå®‰è£… Docker æ¡Œé¢ã€‚ åœ¨ WSL2 ä¸­ï¼Œå°è¯•æ‰‹åŠ¨åœæ­¢ Docker æœåŠ¡ï¼š 1sudo /etc/init.d/docker stop å¦‚æœè¿™ä¸ªå‘½ä»¤æ— æ³•åœæ­¢ Docker æœåŠ¡ï¼Œè¯·å°è¯•ä»¥ä¸‹å‘½ä»¤ï¼š 1sudo killall dockerd å¸è½½ Dockerï¼š 1sudo apt-get purge docker-ce åˆ é™¤ Docker ç›¸å…³çš„æ–‡ä»¶å’Œç›®å½•ï¼š 1sudo rm -rf /var/lib/docker é‡æ–°å¯åŠ¨ WSL2ï¼š 1wsl --shutdown ç„¶åé‡æ–°æ‰“å¼€ WSL2ã€‚ åœ¨ WSL2 ä¸­ï¼Œä¸è¦ç›´æ¥å®‰è£… Docker CEã€‚è€Œæ˜¯ä½¿ç”¨ Docker Desktop for Windows æä¾›çš„ Docker æœåŠ¡ã€‚è¿™æ„å‘³ç€ä½ ä¸éœ€è¦åœ¨ WSL2 ä¸­å®‰è£… Docker CEï¼Œå› ä¸º Docker Desktop å·²ç»æä¾›äº† Docker æœåŠ¡ã€‚ ç¡®ä¿ä½ çš„ WSL2 å‘è¡Œç‰ˆå¯ä»¥è®¿é—® Docker Desktop æä¾›çš„ Docker æœåŠ¡ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ï¼š 123docker --versiondocker info","categories":[],"tags":[{"name":"WSL2","slug":"WSL2","permalink":"http://example.com/tags/WSL2/"},{"name":"Docker","slug":"Docker","permalink":"http://example.com/tags/Docker/"}]},{"title":"ä¸€ç”Ÿä¸€èŠ¯ç¬”è®°","slug":"ä¸€ç”Ÿä¸€èŠ¯ç¬”è®°","date":"2023-03-12T04:58:15.000Z","updated":"2023-04-02T09:32:19.691Z","comments":true,"path":"2023/03/12/ä¸€ç”Ÿä¸€èŠ¯ç¬”è®°/","link":"","permalink":"http://example.com/2023/03/12/%E4%B8%80%E7%94%9F%E4%B8%80%E8%8A%AF%E7%AC%94%E8%AE%B0/","excerpt":"","text":"ä¸€ç”Ÿä¸€èŠ¯æ¦‚è¿°â€œä¸€ç”Ÿä¸€èŠ¯â€æ¦‚è¿° _å“”å“©å“”å“©_bilibili ç¨‹åºçš„æ‰§è¡Œå’Œæ¨¡æ‹Ÿå™¨freestanding è¿è¡Œæ—¶ç¯å¢ƒç¨‹åºå¦‚ä½•ç»“æŸè¿è¡Œåœ¨æ­£å¸¸çš„ç¯å¢ƒä¸­ï¼Œå†™äº†ä¸€æ®µä»£ç returnä¹‹åï¼Œå®é™…ä¸Šè°ƒç”¨äº†ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨exitã€‚ä½†æ˜¯åœ¨ freestanding ç¯å¢ƒä¸­ï¼Œæ²¡æœ‰æ“ä½œç³»ç»Ÿæ”¯æŒï¼Œæ ¹æ® C99 æ‰‹å†Œè§„å®šï¼Œåœ¨ freestanding ç¯å¢ƒä¸­ç»“æŸè¿è¡Œæ˜¯ç”±ç”¨æˆ·å®ç°å†³å®šçš„ã€‚ 12345.1.2.1 Freestanding environment2 The effect of program termination in a freestanding environment isimplementation-defined. åœ¨ qemu-system-riscv64 ä¸­çš„ virt æœºå™¨æ¨¡å‹ä¸­ï¼Œå¾€ä¸€ä¸ªç‰¹æ®Šçš„åœ°å€å†™å…¥ä¸€ä¸ªç‰¹æ®Šçš„â€œæš—å·â€å³å¯ç»“æŸ QEMU 12345678#include &lt;stdint.h&gt;void _start() &#123; volatile uint8_t *p = (uint8_t *)(uintptr_t)0x10000000; *p = &#x27;A&#x27;; volatile uint32_t *exit = (uint32_t *)(uintptr_t)0x100000; *exit = 0x5555; // magic number _start(); // é€’å½’è°ƒç”¨ï¼Œå¦‚æœæ­£å¸¸é€€å‡ºå°†ä¸ä¼šå†æ¬¡æ‰“å°A&#125; åœ¨è‡ªåˆ¶ freestanding è¿è¡Œæ—¶ç¯å¢ƒä¸Šè¿è¡Œ Hello ç¨‹åºQEMU è™½ç„¶æ˜¯ä¸ªå¼€æºé¡¹ç›®ï¼Œä½†è¿˜æŒºå¤æ‚ï¼Œä¸åˆ©äºæˆ‘ä»¬ç†è§£ç»†èŠ‚ã€‚è®©æˆ‘ä»¬æ¥è®¾è®¡ä¸€ä¸ªé¢å‘ RISC-V ç¨‹åºçš„ç®€å• freestanding è¿è¡Œæ—¶ç¯å¢ƒï¼Œæˆ‘åšä»¥ä¸‹çº¦å®šã€‚ ç¨‹åºä»åœ°å€ 0 å¼€å§‹æ‰§è¡Œ åªæ”¯æŒä¸¤æ¡æŒ‡ä»¤ addi æŒ‡ä»¤ ebreak æŒ‡ä»¤ å¯„å­˜å™¨ a0=0 æ—¶ï¼Œè¾“å‡ºå¯„å­˜å™¨ a1 ä½ 8 ä½çš„å­—ç¬¦ å¯„å­˜å™¨ a0=1 æ—¶ï¼Œç»“æŸè¿è¡Œ ABI Mnemonicï¼ˆRISC-V å®˜æ–¹ä¸ºæ¯ä¸ªå¯„å­˜å™¨èµ·ä¸ªåå­—ï¼‰ 12345678910111213141516171819202122232425static void ebreak(long arg0, long arg1) &#123; asm volatile(&quot;addi a0, x0, %0;&quot; &quot;addi a1, x0, %1;&quot; &quot;ebreak&quot; : : &quot;i&quot;(arg0), &quot;i&quot;(arg1));&#125;static void putch(char ch) &#123; ebreak(0, ch); &#125;static void halt(int code) &#123; ebreak(1, code); while (1); &#125;void _start() &#123; putch(&#x27;A&#x27;); halt(0);&#125;/** * è¿™æ®µä»£ç å®šä¹‰äº†ä¸‰ä¸ªå‡½æ•°ï¼šebreakã€putch å’Œ haltã€‚ * ebreak å‡½æ•°æ˜¯ä¸€ä¸ªå†…è”æ±‡ç¼–å‡½æ•°ï¼Œå®ƒæ‰§è¡Œ ebreak æŒ‡ä»¤ã€‚ * è¯¥æŒ‡ä»¤æ˜¯ RISC-V æ¶æ„ä¸­çš„ä¸€æ¡è°ƒè¯•æŒ‡ä»¤ï¼Œå¯ä»¥åœ¨è°ƒè¯•å™¨çš„æ§åˆ¶ä¸‹æ‰§è¡Œã€‚ * è¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° arg0 å’Œ arg1ï¼Œå®ƒä»¬å°†è¢«å­˜å‚¨åœ¨å¯„å­˜å™¨ a0 å’Œ a1 ä¸­ã€‚ * putch å‡½æ•°è°ƒç”¨äº† ebreak å‡½æ•°ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸º 0ï¼Œ * ç¬¬äºŒä¸ªå‚æ•°è®¾ä¸ºå‡½æ•°å‚æ•° chã€‚è¿™æ ·åšçš„ç›®çš„å¯èƒ½æ˜¯ä¸ºäº†åœ¨è°ƒè¯•å™¨çš„æ§åˆ¶ä¸‹è¾“å‡ºä¸€ä¸ªå­—ç¬¦ã€‚ * halt å‡½æ•°è°ƒç”¨äº† ebreak å‡½æ•°ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸º 1ï¼Œ * ç¬¬äºŒä¸ªå‚æ•°è®¾ä¸ºå‡½æ•°å‚æ•° codeã€‚è¿™æ ·åšçš„ç›®çš„å¯èƒ½æ˜¯ä¸ºäº†é€šçŸ¥è°ƒè¯•å™¨ç¨‹åºå·²ç»ç»“æŸï¼Œ * å¹¶ä½¿ç”¨ code ä½œä¸ºç»“æŸçŠ¶æ€ã€‚ç„¶åï¼Œhalt å‡½æ•°è¿›å…¥ä¸€ä¸ªæ­»å¾ªç¯ï¼Œç­‰å¾…è°ƒè¯•å™¨çš„æ“ä½œã€‚ * æœ€åï¼Œ_start å‡½æ•°è°ƒç”¨äº† putch å‡½æ•°è¾“å‡ºå­—ç¬¦ &#x27;A&#x27;ï¼Œç„¶åè°ƒç”¨ halt å‡½æ•°ç»“æŸç¨‹åº */ 12riscv64-linux-gnu-gcc -march=rv64g -ffreestanding -nostdlib -static -Wl,-Ttext=0 \\ -O2 -o prog a.c riscv64-linux-gnu-gcc: è¿™æ˜¯ GCC çš„å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ï¼Œè¡¨ç¤ºä½¿ç”¨çš„æ˜¯ GCC ç¼–è¯‘å™¨ã€‚riscv64-linux-gnu æ˜¯ç¼–è¯‘å™¨çš„ç›®æ ‡å¹³å°ï¼Œè¡¨ç¤ºç”Ÿæˆçš„ä»£ç æ˜¯é’ˆå¯¹ RISC-V æ¶æ„ï¼Œè¿è¡Œåœ¨ Linux ç³»ç»Ÿä¸Šçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ -march=rv64g: è¿™ä¸ªå‚æ•°æŒ‡å®šäº†ç¼–è¯‘å™¨ä½¿ç”¨çš„æŒ‡ä»¤é›†ã€‚rv64g è¡¨ç¤ºä½¿ç”¨ RISC-V æ¶æ„çš„ 64 ä½æŒ‡ä»¤é›†ã€‚ -ffreestanding: è¿™ä¸ªå‚æ•°æŒ‡ç¤ºç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç å°†åœ¨ freestanding è¿è¡Œç¯å¢ƒä¸­è¿è¡Œã€‚åœ¨ freestanding è¿è¡Œç¯å¢ƒä¸­ï¼Œç¨‹åºä¸ä¼šè‡ªåŠ¨é“¾æ¥æ ‡å‡† C åº“ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨è°ƒç”¨ main å‡½æ•°ã€‚ -nostdlib: è¿™ä¸ªå‚æ•°è¡¨ç¤ºç¼–è¯‘å™¨ä¸éœ€è¦é“¾æ¥æ ‡å‡† C åº“ã€‚ -static: è¿™ä¸ªå‚æ•°è¡¨ç¤ºç”Ÿæˆçš„ä»£ç æ˜¯é™æ€é“¾æ¥çš„ã€‚ -Wl,-Ttext=0: è¿™ä¸ªå‚æ•°æ˜¯ä¼ é€’ç»™é“¾æ¥å™¨çš„ï¼Œè¡¨ç¤ºè®¾ç½®ä»£ç æ®µçš„èµ·å§‹åœ°å€ä¸º 0ã€‚ -O2: è¿™ä¸ªå‚æ•°æŒ‡ç¤ºç¼–è¯‘å™¨ä½¿ç”¨ä¼˜åŒ–çº§åˆ«ä¸º 2 çš„ä¼˜åŒ–é€‰é¡¹ã€‚ -o prog: è¿™ä¸ªå‚æ•°æŒ‡å®šç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ä¸º progã€‚ a.c: è¿™æ˜¯è¦ç¼–è¯‘çš„ C æºæ–‡ä»¶çš„åç§°ã€‚ 1llvm-objdump -d prog åæ±‡ç¼–ç»“æœå¦‚ä¸‹ï¼š 123456789101112prog: file format elf64-littleriscvDisassembly of section .text:0000000000000000 &lt;_start&gt;: 0: 13 05 00 00 li a0, 0 4: 93 05 10 04 li a1, 65 8: 73 00 10 00 ebreak c: 13 05 10 00 li a0, 1 10: 93 05 00 00 li a1, 0 14: 73 00 10 00 ebreak 18: 6f 00 00 00 j 0x18 &lt;_start+0x18&gt; æˆ‘ä»¬çº¦å®šä¸­æ²¡æœ‰liæŒ‡ä»¤ï¼Œä½†æ˜¯æ±‡ç¼–ä¸­å´å‡ºç°äº†ï¼Œè¿™æ˜¯å› ä¸ºliæ˜¯ä¸€æ¡ä¼ªæŒ‡ä»¤ï¼Œå®ƒçš„å®é™…å®ç°ä¾ç„¶æ˜¯addiã€‚å¦‚æœä¸ä½¿ç”¨ä¼ªæŒ‡ä»¤å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åæ±‡ç¼–ï¼š 1llvm-objdump -M no-aliases -d prog ç»“æœå¦‚ä¸‹ï¼Œæ²¡æœ‰ä¼ªæŒ‡ä»¤ï¼Œåªæœ‰æˆ‘ä»¬çº¦å®šçš„å‡ æ¡æŒ‡ä»¤ã€‚ 123456789101112prog: file format elf64-littleriscvDisassembly of section .text:0000000000000000 &lt;_start&gt;: 0: 13 05 00 00 addi a0, zero, 0 4: 93 05 10 04 addi a1, zero, 65 8: 73 00 10 00 ebreak c: 13 05 10 00 addi a0, zero, 1 10: 93 05 00 00 addi a1, zero, 0 14: 73 00 10 00 ebreak 18: 6f 00 00 00 jal zero, 0x18 &lt;_start+0x18&gt; YEMU æŒ‡ä»¤å¦‚ä½•æ‰§è¡ŒISA æ‰‹å†Œå®šä¹‰äº†ä¸€ä¸ªçŠ¶æ€æœºã€‚ çŠ¶æ€é›†åˆ S = {&lt;R, M&gt;} R = {PC, x0, x1, x2, â€¦} RISC-V æ‰‹å†Œ -&gt; 2.1 Programmersâ€™Model for Base Integer ISA PC = ç¨‹åºè®¡æ•°å™¨ = å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤ä½ç½® M = å†…å­˜ RISC-V æ‰‹å†Œ -&gt; 1.4 Memory æ¿€åŠ±äº‹ä»¶ï¼šæ‰§è¡Œ PC æŒ‡å‘çš„æŒ‡ä»¤çŠ¶æ€è½¬ç§»è§„åˆ™ï¼šæŒ‡ä»¤çš„è¯­ä¹‰ (semantics)åˆå§‹çŠ¶æ€ S0 = &lt;R0, M0&gt; æˆ‘ä»¬åªè¦æŠŠè¿™ä¸ªçŠ¶æ€æœºå®ç°å‡ºæ¥ï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥æ‰§è¡ŒæŒ‡ä»¤äº†ï¼ ç”¨å˜é‡å®ç°å†…å­˜123#include &lt;stdint.h&gt;uint64_t R[32], PC; // according to the RISC-V manualuint8_t M[64]; // 64-Byte memory Q: ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ int64_t å’Œ int8_t? A: Cè¯­è¨€æ ‡å‡†è§„å®š, æœ‰ç¬¦å·æ•°æº¢å‡ºæ˜¯undefined behavior, ä½†æ— ç¬¦å·æ•°ä¸ä¼šæº¢å‡º 6.5 Expressions5 If an exceptional condition occurs during the evaluation of an expression (that is,if the result is not mathematically defined or not in the range of representablevalues for its type), the behavior is undefined.6.2.5 Types9 A computation involving unsigned operands can never overflow, because a result thatcannot be represented by the resulting unsigned integer type is reduced modulo thenumber that is one greater than the largest value that can be represented by theresulting type. ç”¨è¯­å¥å®ç°æŒ‡ä»¤çš„è¯­ä¹‰æŒ‡ä»¤å‘¨æœŸ (instruction cycle): æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„æ­¥éª¤ å–æŒ‡ (fetch): ä» PC æ‰€æŒ‡ç¤ºçš„å†…å­˜ä½ç½®è¯»å–ä¸€æ¡æŒ‡ä»¤ è¯‘ç  (decode): æŒ‰ç…§æ‰‹å†Œè§£ææŒ‡ä»¤çš„æ“ä½œç  (opcode) å’Œæ“ä½œæ•° (operand) æ‰§è¡Œ (execute): æŒ‰è§£æå‡ºçš„æ“ä½œç ï¼Œå¯¹æ“ä½œæ•°è¿›è¡Œå¤„ç† æ›´æ–° PC: è®© PC æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ çŠ¶æ€æœºä¸æ–­æ‰§è¡ŒæŒ‡ä»¤ï¼Œç›´åˆ°ç»“æŸè¿è¡Œï¼š 123456#include &lt;stdbool.h&gt;bool halt = false;while (!halt) &#123; inst_cycle();&#125; 1234567 31 20 19 15 14 12 11 7 6 0+---------------+-----+-----+-----+---------+| imm[11:0] | rs1 | 000 | rd | 0010011 | ADDI+---------------+-----+-----+-----+---------++---------------+-----+-----+-----+---------+| 000000000001 |00000| 000 |00000| 1110011 | EBREAK+---------------+-----+-----+-----+---------+ ä¸€ä¸ªç®€å•çš„å®ç°ï¼š 1234567891011121314void inst_cycle() &#123; uint32_t inst = *(uint32_t *)&amp;M[PC]; if (((inst &amp; 0x7f) == 0x13) &amp;&amp; ((inst &gt;&gt; 12) &amp; 0x7) == 0) &#123; // addi if (((inst &gt;&gt; 7) &amp; 0x1f) != 0) &#123; R[(inst &gt;&gt; 7) &amp; 0x1f] = R[(inst &gt;&gt; 15) &amp; 0x1f] + (((inst &gt;&gt; 20) &amp; 0x7ff) - ((inst &amp; 0x80000000) ? 4096 : 0)); &#125; &#125; else if (inst == 0x00100073) &#123; // ebreak if (R[10] == 0) &#123; putchar(R[11] &amp; 0xff); &#125; else if (R[10] == 1) &#123; halt = true; &#125; else &#123; printf(&quot;Unsupported ebreak command\\n&quot;); &#125; &#125; else &#123; printf(&quot;Unsupported instuction\\n&quot;); &#125; PC += 4;&#125; NEMU ä»£ç å¯¼è¯»make é¡¹ç›®æ„123456# æ˜¾ç¤ºmakeè¸ªè¿¹strace make# æ˜¾ç¤ºæ„å»ºè¿‡ç¨‹make -d# æ˜¾ç¤ºæ›´è¯¦ç»†çš„æ„å»ºæ„è¿‡ç¨‹make --debug=v 1234567891011121314151617181920212223242526272829303132Reading makefiles...Reading makefile `Makefile&#x27;...Updating goal targets.... File `all&#x27; does not exist. File `all&#x27; does not exist. Looking for an implicit rule for `all&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.c&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.cc&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.C&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.cpp&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.CPP&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.cxx&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.CXX&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.c++&#x27;. Trying pattern rule with stem `all&#x27;. Trying implicit prerequisite `all.C++&#x27;. No implicit rule found for `all&#x27;. Finished prerequisites of target file `all&#x27;. Must remake target `all&#x27;.gcc -o all all.oFinished prerequisites of target file `all&#x27;.Must remake target `all&#x27;.gcc -o all all.oSuccessfully remade target file `all&#x27;. 1234# åªæ‰“å°å‘½ä»¤ä¸æ‰§è¡Œmake -n# è¾“å‡ºç›®æ ‡è¢«æ„å»ºçš„åŸå› å’Œæ‰§è¡Œçš„å‘½ä»¤make --trace ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ª makefileï¼Œå…¶ç›®æ ‡ all ä¾èµ–äºç›®æ ‡ foo å’Œ barï¼Œå¹¶ä¸”æ‚¨è¿è¡Œ make --trace allï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š 123456789make[1]: Entering directory &#x27;/path/to/project&#x27;gcc -o foo foo.cmake[1]: Leaving directory &#x27;/path/to/project&#x27;make[1]: Entering directory &#x27;/path/to/project&#x27;gcc -o bar bar.cmake[1]: Leaving directory &#x27;/path/to/project&#x27;make[1]: Entering directory &#x27;/path/to/project&#x27;gcc -o all foo.o bar.omake[1]: Leaving directory &#x27;/path/to/project&#x27; 12make -nB # -B å¯ä»¥å¼ºåˆ¶ make æ„å»ºæ‰€æœ‰ç›®æ ‡ï¼Œå³ä½¿å®ƒä»¬å·²ç»æ˜¯æœ€æ–°çš„make -nB | vim - åœ¨ vim ç¼–è¾‘å™¨ä¸­è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œè¿‡æ»¤ä¸éœ€è¦çš„ä¿¡æ¯ã€‚ 1234567891011121314# åªä¿ç•™ gcc æˆ– g++å¼€å¤´çš„è¡Œ:%!grep &quot;^\\(gcc\\|g++\\)&quot;# å°†ç¯å¢ƒå˜é‡$NEMU_HOME æ‰€æŒ‡ç¤ºå­—ç¬¦ä¸²æ›¿æ¢ä¸º$NEMU_HOME:%!sed -e &quot;s+$NEMU_HOME+\\$NEMU_HOME+g&quot;# å°†$NEMU_HOME/build/obj-riscv64-nemu-interpreter æ›¿æ¢ä¸º$OBJ_DIR:%s+\\$NEMU_HOME/build/obj-riscv64-nemu-interpreter+$OBJ_DIR+g# å°†-c ä¹‹å‰çš„å†…å®¹æ›¿æ¢ä¸º$CFLAGS:%s/-O2.*=riscv64/$CFLAGS/g# å°†æœ€åä¸€è¡Œçš„ç©ºæ ¼æ›¿æ¢æˆæ¢è¡Œå¹¶ç¼©è¿›ä¸¤æ ¼:$s/ */\\r /g è°ƒè¯•æŠ€å·§é€‰å°†æ–­è¨€åœ¨ C ç¨‹åºä¸­ä½¿ç”¨æ–­è¨€ï¼ˆassertï¼‰ä¸ä¼šå¢åŠ é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿä¸ä¼šå¢åŠ æ•°æ®æ®µç©ºé—´ã€‚æ–­è¨€æ˜¯ä¸€ç§åœ¨è¿è¡Œæ—¶æ£€æŸ¥ç¨‹åºå‡è®¾æ˜¯å¦ä¸ºçœŸçš„æ–¹æ³•ï¼Œå½“æ–­è¨€å¤±è´¥æ—¶ï¼Œç¨‹åºä¼šç»ˆæ­¢æ‰§è¡Œå¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚ åœ¨ C è¯­è¨€ä¸­ï¼Œæ–­è¨€é€šå¸¸ä½¿ç”¨å®æ¥å®ç°ã€‚å®ƒåœ¨ç¼–è¯‘æ—¶è¢«è§£é‡Šä¸ºä¸€ä¸ªç®€å•çš„æ¡ä»¶è¯­å¥ï¼Œå› æ­¤å®ƒä¸ä¼šå¢åŠ ç¨‹åºçš„å†…å­˜ç©ºé—´æˆ–æ•°æ®æ®µç©ºé—´ã€‚æ–­è¨€å®çš„å®šä¹‰é€šå¸¸ç±»ä¼¼äºä»¥ä¸‹ä»£ç ï¼š 123#include &lt;assert.h&gt;#define assert(expression) ((void)0) è¿™é‡Œçš„ expression æ˜¯è¦æ£€æŸ¥çš„æ¡ä»¶ã€‚å¦‚æœ expression ä¸ºå‡ï¼Œåˆ™ assert() å‡½æ•°ä¼šå‘å‡ºé”™è¯¯æ¶ˆæ¯å¹¶ç»ˆæ­¢ç¨‹åºçš„æ‰§è¡Œã€‚å¦‚æœ expression ä¸ºçœŸï¼Œåˆ™ assert() å‡½æ•°ä¸ä¼šäº§ç”Ÿä»»ä½•æ“ä½œï¼Œå¹¶ä¸”è¢«è§£é‡Šä¸º ((void)0)ã€‚è¿™ä¸ªè¯­å¥ä¸ä¼šå¢åŠ ä»»ä½•å†…å­˜æˆ–æ•°æ®æ®µç©ºé—´ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä¸€ä¸ªç¨‹åºä½¿ç”¨å¤§é‡çš„æ–­è¨€æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¯¹ç¨‹åºçš„æ€§èƒ½äº§ç”Ÿä¸€äº›å½±å“ï¼Œå› ä¸ºæ¯ä¸ªæ–­è¨€éƒ½éœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œæ£€æŸ¥ã€‚å› æ­¤ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåº”è¯¥å°½å¯èƒ½å‡å°‘ä½¿ç”¨æ–­è¨€ï¼Œå¹¶åœ¨æµ‹è¯•å’Œè°ƒè¯•é˜¶æ®µä½¿ç”¨å®ƒä»¬æ¥ç¡®ä¿ä»£ç çš„æ­£ç¡®æ€§ã€‚ 12345// nemu/src/isa/riscv64/local-include/reg.hstatic inline int check_reg_idx(int idx) &#123; IFDEF(CONFIG_RT_CHECK, assert(idx &gt;= 0 &amp;&amp; idx &lt; 32)); return idx;&#125; ç¼–è¯‘å™¨å·¥å…· sanitizerè®©ç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥ assert, æ‹¦æˆªå¸¸è§çš„éé¢„æœŸè¡Œä¸º AddressSanitizer - æ£€æŸ¥æŒ‡é’ˆè¶Šç•Œï¼Œuse-after-free ThreadSanitizer - æ£€æŸ¥å¤šçº¿ç¨‹æ•°æ®ç«äº‰ LeakSanitizer - æ£€æŸ¥å†…å­˜æ³„æ¼ UndefinedBehaviorSanitizer - æ£€æŸ¥ UB è¿˜èƒ½æ£€æŸ¥æŒ‡é’ˆçš„æ¯”è¾ƒå’Œç›¸å‡ æ‰“å¼€åç¨‹åºè¿è¡Œæ•ˆç‡æœ‰æ‰€ä¸‹é™ ä½†è°ƒè¯•çš„æ—¶å€™éå¸¸å€¼å¾—ï¼Œèººç€å°±èƒ½è®©å·¥å…·å¸®ä½ æ‰¾ bug man gcc æŸ¥çœ‹å…·ä½“ç”¨æ³• ä½¿ç”¨æ–¹æ³•GCC æä¾›äº†å¤šç§ Sanitizer å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…åœ¨ç¼–è¯‘æ—¶æ£€æµ‹å’Œä¿®å¤å¸¸è§çš„ç¼–ç¨‹é”™è¯¯ï¼Œä¾‹å¦‚å†…å­˜æ³„æ¼ã€ç¼“å†²åŒºæº¢å‡ºã€ä½¿ç”¨æœªåˆå§‹åŒ–çš„å˜é‡ç­‰ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ª Sanitizer å·¥å…·çš„ç¤ºä¾‹ç”¨æ³•ï¼š Address Sanitizerï¼ˆASANï¼‰ï¼šæ£€æµ‹å†…å­˜é”™è¯¯ï¼Œä¾‹å¦‚ä½¿ç”¨å·²ç»é‡Šæ”¾çš„å†…å­˜ã€å †æ ˆå’Œå…¨å±€ç¼“å†²åŒºçš„æº¢å‡ºå’Œä¸‹æº¢ç­‰ã€‚ 1gcc -fsanitize=address -g &lt;source files&gt; -o &lt;output file&gt; Undefined Behavior Sanitizerï¼ˆUBSANï¼‰ï¼šæ£€æµ‹æœªå®šä¹‰è¡Œä¸ºï¼Œä¾‹å¦‚é™¤ä»¥é›¶ã€ä½¿ç”¨æœªåˆå§‹åŒ–çš„å˜é‡ã€æŒ‡é’ˆæº¢å‡ºç­‰ã€‚ 1gcc -fsanitize=undefined -g &lt;source files&gt; -o &lt;output file&gt; Thread Sanitizerï¼ˆTSANï¼‰ï¼šæ£€æµ‹å¹¶å‘é—®é¢˜ï¼Œä¾‹å¦‚ç«äº‰æ¡ä»¶ã€æ­»é”ç­‰ã€‚ 1gcc -fsanitize=thread -g &lt;source files&gt; -o &lt;output file&gt; Memory Sanitizerï¼ˆMSANï¼‰ï¼šæ£€æµ‹ä½¿ç”¨æœªåˆå§‹åŒ–çš„å†…å­˜ï¼Œä¾‹å¦‚è¯»å–æœªåˆå§‹åŒ–çš„å†…å­˜ã€ä½¿ç”¨å·²é‡Šæ”¾çš„å†…å­˜ç­‰ã€‚ 1gcc -fsanitize=memory -g &lt;source files&gt; -o &lt;output file&gt; éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSanitizer å·¥å…·å¯èƒ½ä¼šå¢åŠ ç¨‹åºçš„æ‰§è¡Œæ—¶é—´å’Œå†…å­˜æ¶ˆè€—ï¼Œå¹¶ä¸”å¯èƒ½ä¼šäº§ç”Ÿè¯¯æŠ¥ï¼Œå› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥ç¦ç”¨ Sanitizer å·¥å…·ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å¼€å‘å’Œæµ‹è¯•é˜¶æ®µå¯ç”¨ Sanitizer å·¥å…·ï¼Œä»¥å¸®åŠ©ä»–ä»¬å‘ç°å’Œä¿®å¤ä»£ç ä¸­çš„é—®é¢˜ã€‚ è‡ªé¡¶å‘ä¸‹ç†è§£ç¨‹åºè¡Œä¸ºftrace - å‡½æ•°è°ƒç”¨å±‚æ¬¡ï¼Œç†è§£ç¨‹åºçš„å¤§ä½“è¡Œä¸º itrace - æŒ‡ä»¤æ‰§è¡Œå±‚æ¬¡ï¼Œç†è§£æŒ‡ä»¤çº§åˆ«çš„è¡Œä¸º mtrace - è®¿å­˜çš„è¸ªè¿¹ dtrace - è®¾å¤‡è®¿é—®çš„è¸ªè¿¹ sdb - çµæ´»ç»†è‡´åœ°æ£€æŸ¥å®¢æˆ·ç¨‹åºçš„çŠ¶æ€ si - ç»†ç²’åº¦çš„çŠ¶æ€è½¬ç§» info r/x - æ£€æŸ¥R/M ç›‘è§†ç‚¹ - æ•æ‰æŸçŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶åˆ» sdb ä¸ gdb ç»“åˆä½¿ç”¨ å…ˆç”¨ sdb å®šä½åˆ°å‡ºé”™ç‚¹é™„è¿‘ å†ç”¨ gdb è§‚å¯Ÿ NEMU çš„ç»†èŠ‚è¡Œä¸º ç¨‹åºçš„è¿è¡Œæ—¶é—´éƒ½èŠ±åœ¨äº†å“ªé‡ŒLinux çš„æ€§èƒ½åˆ†æå·¥å…· perf æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå®ƒå¯ä»¥é€šè¿‡ç¡¬ä»¶è®¡æ•°å™¨ï¼ˆHardware counterï¼‰æˆ–è€…æ€§èƒ½äº‹ä»¶ï¼ˆPerformance eventï¼‰æ¥å¯¹ Linux ç³»ç»Ÿçš„æ€§èƒ½è¿›è¡Œåˆ†æã€‚ä»¥ä¸‹æ˜¯ perf å·¥å…·çš„å®‰è£…å’Œä½¿ç”¨æ–¹æ³•ã€‚ å®‰è£… perf å·¥å…·åœ¨å¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆä¸­ï¼Œperf å·¥å…·å·²ç»é¢„å…ˆå®‰è£…ï¼Œå¦‚æœæ²¡æœ‰é¢„å…ˆå®‰è£…ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚ Debian/Ubuntu ç³»ç»Ÿï¼šsudo apt-get install linux-tools-common linux-tools-generic Fedora ç³»ç»Ÿï¼šsudo dnf install perf CentOS/RHEL ç³»ç»Ÿï¼šsudo yum install perf å®‰è£…å®Œæ¯•ä¹‹åï¼Œå¯ä»¥é€šè¿‡ perf version å‘½ä»¤æ¥æ£€æŸ¥ perf ç‰ˆæœ¬ä¿¡æ¯ã€‚ ç¼–å†™ä¸€ä¸ªç®€å•çš„ C ä»£ç è¿™é‡Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç®€å•çš„ C ä»£ç ï¼Œç”¨äºæµ‹è¯• perf å·¥å…·çš„ä½¿ç”¨ã€‚ä»£ç å¦‚ä¸‹ï¼š 12345678910111213#include &lt;stdio.h&gt;int main()&#123; int i, sum = 0; for (i = 1; i &lt;= 1000000; i++) sum += i; printf(&quot;sum = %d\\n&quot;, sum); return 0;&#125; ä»£ç çš„ä½œç”¨æ˜¯è®¡ç®— 1 åˆ° 1000000 çš„å’Œã€‚ ä½¿ç”¨ perf å·¥å…·ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ perf å·¥å…·æ¥å¯¹ä¸Šè¿°ä»£ç è¿›è¡Œæ€§èƒ½åˆ†æã€‚å‡è®¾ä»£ç ä¿å­˜åœ¨æ–‡ä»¶ test.c ä¸­ã€‚ ç»Ÿè®¡ CPU å‘¨æœŸæ•°ä»¥ä¸‹å‘½ä»¤ç”¨äºç»Ÿè®¡ç¨‹åºçš„ CPU å‘¨æœŸæ•°ï¼š 1perf stat ./test è¾“å‡ºç»“æœç±»ä¼¼äºï¼š 123456789101112131415Performance counter stats for &#x27;./test&#x27;: 19,23 msec task-clock:u # 0.988 CPUs utilized 0 context-switches:u # 0.000 K/sec 0 cpu-migrations:u # 0.000 K/sec 575 page-faults:u # 0.030 M/sec 64,013,620,231 cycles:u # 3.324 GHz (49.80%) 40,010,335,480 instructions:u # 0.62 insn per cycle (62.34%) 9,998,469,566 branches:u # 518.693 M/sec (62.27%) 763,176 branch-misses:u # 0.01% of all branches (62.32%) 0.019438122 seconds time elapsed 0.019411000 seconds user 0.000007000 seconds sys è¾“å‡ºç»“æœä¸­çš„ cycles è¡¨ç¤º CPU å‘¨æœŸæ•°ï¼Œinstructions è¡¨ç¤ºæŒ‡ä»¤æ•°ï¼Œbranches è¡¨ç¤ºåˆ†æ”¯æŒ‡ä»¤æ•°ã€‚å…¶ä¸­ï¼Œcycles å’Œ instructions çš„æ¯”ä¾‹ä»£è¡¨äº† CPU çš„æ•ˆç‡ï¼Œå³ IPCï¼ˆInstructions Per Cycleï¼‰ã€‚ ç»Ÿè®¡å‡½æ•°è°ƒç”¨æ¬¡æ•°ä»¥ä¸‹å‘½ä»¤ç”¨äºç»Ÿè®¡ç¨‹åºä¸­å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°ï¼š 1perf record -e cycles -g ./test è¿™ä¸ªå‘½ä»¤å°†å¯åŠ¨ perf å·¥å…·ï¼Œå¹¶ä½¿ç”¨ -g é€‰é¡¹è®°å½•è°ƒç”¨å…³ç³»å›¾ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ sudo æƒé™è¿è¡Œè¯¥å‘½ä»¤ï¼Œä»¥ä¾¿ perf å·¥å…·å¯ä»¥è®¿é—®ç³»ç»Ÿçš„ç¡¬ä»¶è®¡æ•°å™¨ã€‚ æˆä¸ºä¸“ä¸šç å†œ è¦ç†Ÿæ‚‰é¡¹ç›®äº† -&gt; STFW/RTFM/RTFSC, å°è¯•ç†è§£ä¸€åˆ‡ç»†èŠ‚ è¦å†™ä»£ç äº† ä»”ç»† RTFM, æ­£ç¡®ç†è§£éœ€æ±‚ ç¼–å†™å¯è¯»ï¼Œå¯ç»´æŠ¤ï¼Œæ˜“éªŒè¯çš„ä»£ç  (ä¸è¨€è‡ªæ˜ï¼Œä¸è¨€è‡ªè¯) ç”¨ lint å·¥å…·æ£€æŸ¥ä»£ç  è¿›è¡Œå……åˆ†çš„æµ‹è¯• æ·»åŠ å……åˆ†çš„æ–­è¨€ è¦è°ƒè¯•äº† é»˜å¿µâ€œæœºå™¨æ°¸è¿œæ˜¯å¯¹çš„/æœªæµ‹è¯•ä»£ç æ°¸è¿œæ˜¯é”™çš„â€ sanitizer, trace, printf, gdb, â€¦ å¹³æ—¶ -&gt; ç”¨æ­£ç¡®çš„å·¥å…·/æ–¹æ³•åšäº‹æƒ… æ„Ÿåˆ°ä¸çˆ½äº† -&gt; æ‰¾æ­£ç¡®çš„å·¥å…·/æ­åŸºç¡€è®¾æ–½ æ€»çº¿é€‰è®²å®šä¹‰å¹¿ä¹‰ä¸Šè®²æ€»çº¿å°±æ˜¯ä¸€ä¸ªé€šä¿¡ç³»ç»Ÿï¼Œä»¥ä¸‹è¿™äº›éƒ½å±äºå¹¿ä¹‰çš„æ€»çº¿æ¦‚å¿µ:TCP/IP, ä»¥å¤ªç½‘ï¼Œç½‘çº¿ï¼ŒRTL ä¿¡å·ï¼Œç³»ç»Ÿè°ƒç”¨ã€‚ ä¸»åŠ¨å‘èµ·é€šä¿¡çš„å« masterï¼Œå“åº”é€šä¿¡çš„å« slaveã€‚","categories":[],"tags":[]},{"title":"JAVA å°ç™½ç¬”è®°","slug":"JAVAå°ç™½ç¬”è®°","date":"2023-03-12T01:55:55.000Z","updated":"2023-03-12T04:25:57.691Z","comments":true,"path":"2023/03/12/JAVAå°ç™½ç¬”è®°/","link":"","permalink":"http://example.com/2023/03/12/JAVA%E5%B0%8F%E7%99%BD%E7%AC%94%E8%AE%B0/","excerpt":"","text":"åŸºç¡€è®¾æ–½ æœ¬ç« è®°å½•ä¸€äº›é…ç½®ç¬”è®°ï¼Œä¸æ˜¯ step by step æ•™ç¨‹ å®‰è£… JAVA1234# å…ç™»é™†ä¸‹è½½javahttps://xiandan.io/posts/jdk-download.html# é«˜é€Ÿé•œåƒhttps://github.com/LilithBristol/javajdkforwinx64 Linux ç¯å¢ƒå˜é‡ PATH 12%JAVA_HOME%\\bin%JAVA_HOME%\\jre\\bin Windows ç¯å¢ƒå˜é‡ 1234# JAVA_HOMEC:\\Program Files\\Java\\jdk1.8.0_212# CLASSPATH.;%JAVA_HOME%\\bin;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar VSCode å¼€å‘ç¯å¢ƒåŸºç¡€æ’ä»¶å®‰è£… Extension Pack for Java å³å¯ï¼Œä¼šæŠŠç”¨åˆ°çš„å¼€å‘æ’ä»¶éƒ½å®‰è£…ã€‚ä¸éœ€è¦å®‰è£… Java Language Support ä¼šå’Œ Extension Pack for Java ä¸­çš„ Language Support for Java by Red Hat å†²çªã€‚ç›®å‰ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿæ²¡æœ‰é‡åˆ°å¿…é¡»ä½¿ç”¨ Java Language Support çš„æƒ…å†µã€‚ åŸºæœ¬ä½¿ç”¨ä½¿ç”¨ CTRL+SHIFT+P è¾“å…¥ Java: create Projectï¼Œè¾“å…¥é¡¹ç›®åï¼Œåœ¨ src æ–‡ä»¶å¤¹ä¸­ï¼Œé€‰æ‹© Run è¿è¡Œ Java ä»£ç ã€‚ å¸¸ç”¨å¿«æ·é”®12# å¯¼åŒ… shift + alt + o IDEA å¼€å‘ç¯å¢ƒä¸‹è½½å®‰è£… IDEAJava é›†æˆå¼€å‘ç¯å¢ƒ IntelliJ IDEA 2022.3 Ultimate æ°¸ä¹…æ¿€æ´»ç‰ˆ - é£è½¯èµ„æºç«™ é…ç½® MAVEN,IDEA ä¸­ä¸‹è½½é€Ÿåº¦æ…¢123456789101112131415161718192021222324252627282930# IDEAä¸­ç¼–è¾‘åŒºå³é”®--maven--create xml&lt;mirrors&gt; &lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; &lt;mirror&gt; &lt;id&gt;uk&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt; &lt;url&gt;http://uk.maven.org/maven2/&lt;/url&gt; &lt;/mirror&gt; &lt;mirror&gt; &lt;id&gt;CN&lt;/id&gt; &lt;name&gt;OSChina Central&lt;/name&gt; &lt;url&gt;http://maven.oschina.net/content/groups/public/&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; &lt;mirror&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;internal nexus repository&lt;/name&gt; &lt;url&gt;http://repo.maven.apache.org/maven2&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt;&lt;/mirrors&gt; å®‰è£… MYSQL123sudo apt install mysqlsudo mysql -u root -psource /home/user/oa_system/VBlog/blogserver/src/main/resources/vueblog.sql å¸¸ç”¨å‘½ä»¤12345678910111213141516171819202122# åˆ›å»ºæ•°æ®åº“CREATE DATABASE ryvue;# åˆ‡æ¢å½“å‰æ•°æ®åº“use ryvue;set character set utf8;# æ‰§è¡Œsqlè„šæœ¬source /home/user/oa_system/RuoYi-Vue/sql/ry_20220822.sqlsource /home/user/oa_system/RuoYi-Vue/sql/quartz.sql# åˆ é™¤æ•°æ®åº“drop database æ•°æ®åº“å;# æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“show databases;# åˆ›å»ºæ•°æ®åº“create database æ•°æ®åº“å;# æ˜¾ç¤ºæ•°æ®åº“ç¼–ç æ ¼å¼ SHOW VARIABLES LIKE &#x27;character_set_%&#x27;;# åˆ é™¤ mysql å¯†ç SET PASSWORD FOR root@localhost=PASSWORD(&#x27;&#x27;);# é‡å»ºæ•°æ®åº“drop database ryvue;create database ryvue;use ryvue; å®‰è£…æ•°æ®åº“å¯è§†åŒ–å·¥å…·mysql-workbench12345678echo &quot;deb http://security.ubuntu.com/ubuntu focal-security main&quot; | sudo tee /etc/apt/sources.list.d/focal-security.listsudo apt-get updatesudo apt-get install libssl1.1wget https://downloads.mysql.com/archives/get/p/8/file/mysql-workbench-community_8.0.12-1ubuntu18.04_amd64.debsudo dpkg -i mysql*.deb sudo apt-get install -f sudo dpkg -i mysql*.deb VSCode æ’ä»¶-MySQL by weijan Chenvscode-database-client å®˜æ–¹æ–‡æ¡£ å®‰è£… NPM1sudo apt install npm -y 12345678npm set progress=false npm config set registry http://registry.npmjs.org/npm install --legacy-peer-depsreify:abbrev: sill audit bulk requeståˆ é™¤ package-lock.json æ–‡ä»¶ å®‰è£… nvmæ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä»¥åœ¨ Ubuntu ä¸Šä¸‹è½½ nvmï¼š 1curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash è¯¥å‘½ä»¤å°†ä» nvm GitHub å­˜å‚¨åº“ä¸‹è½½å®‰è£…è„šæœ¬ï¼Œå¹¶ä½¿ç”¨ bash åœ¨æ‚¨çš„ Ubuntu ç³»ç»Ÿä¸Šè¿è¡Œå®ƒã€‚è¿è¡Œæ­¤å‘½ä»¤åï¼Œnvm å°†è¢«å®‰è£…åœ¨æ‚¨çš„å®¶ç›®å½•ä¸­ã€‚ å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä»¥ä½¿ nvm ç”Ÿæ•ˆï¼š 1source ~/.bashrc ç¡®è®¤ nvm æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š 1nvm --version å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å°†çœ‹åˆ° nvm çš„ç‰ˆæœ¬å·ã€‚ å®‰è£… node.js å’Œ npmä½¿ç”¨ nvm å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ Node.jsï¼š 1nvm install &lt;node-version&gt; ä¾‹å¦‚ï¼š 1nvm install 14.17.6 è¿™å°†å®‰è£… Node.js ç‰ˆæœ¬ 14.17.6ã€‚ å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å·²å®‰è£…çš„ Node.js ç‰ˆæœ¬è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬ï¼š 1nvm alias default &lt;node-version&gt; ä¾‹å¦‚ï¼š 1nvm alias default 14.17.6 è¿™å°†è®¾ç½® Node.js ç‰ˆæœ¬ 14.17.6 ä¸ºé»˜è®¤ç‰ˆæœ¬ã€‚ ç¡®è®¤ Node.js å’Œ npm æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š 12node -vnpm -v å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å°†çœ‹åˆ° Node.js å’Œ npm çš„ç‰ˆæœ¬å·ã€‚ ä½¿ç”¨ nvm åˆ‡æ¢ Node.js ç‰ˆæœ¬ï¼š ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯ç”¨çš„ Node.js ç‰ˆæœ¬ï¼š 1nvm ls-remote è¯¥å‘½ä»¤å°†æ˜¾ç¤ºå¯ç”¨çš„ Node.js ç‰ˆæœ¬åˆ—è¡¨ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ Node.jsï¼š 1nvm install &lt;node-version&gt; ä¾‹å¦‚ï¼š 1nvm install 12.22.6 è¿™å°†å®‰è£… Node.js ç‰ˆæœ¬ 12.22.6ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ‡æ¢åˆ°ç‰¹å®šç‰ˆæœ¬çš„ Node.jsï¼š 1nvm use &lt;node-version&gt; ä¾‹å¦‚ï¼š 1nvm use 12.22.6 è¿™å°†åˆ‡æ¢åˆ° Node.js ç‰ˆæœ¬ 12.22.6ã€‚ ç¡®è®¤å½“å‰ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬ï¼š 1node -v å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å°†çœ‹åˆ°å½“å‰ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬å·ã€‚ ERROR åˆé›†JavaError: Could not find or load main class org.apache.maven.wrapper.MavenWrapperMain1maven ç›¸å…³ä¾èµ–è¿˜æ²¡ä¸‹è½½å®Œ JSON parse error: Cannot construct instance ofç¡®è®¤è¯·æ±‚æ–¹å¼æ˜¯ get è¿˜æ˜¯ postï¼Œå¦‚æœæ˜¯ post æ˜¯ä¸æ˜¯å‰ç«¯å‘äº†ä¸€ä¸ªç©ºä¸²ã€‚ç©ºä¸²è¦ç”¨{}åŒ…è£¹ Error: JAVA_HOME is not defined correctly1234# ç¼ºå°‘.mavenrc é…ç½®æ–‡ä»¶vim ~/.mavenrc# å°† JAVA é…ç½®æ”¾è¿›å»export JAVA_HOME=/usr/lib/jvm/jdk1dot8 é…ç½®æ•°æ®è¡¨ä¸­ä¸å­˜åœ¨çš„å­—æ®µ1@TableField(exist = false) Error creating bean with name â€˜minioControllerâ€™ endpoint must not be nullæ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦é…ç½®äº† endpoint è§£å†³ MyBatis æŠ¥é”™ org.apache.ibatis.binding.BindingException: Invalid bound statement (not found)1ã€æ£€æŸ¥ xml æ–‡ä»¶çš„ namespace æ˜¯å¦å¯¹åº”æ¥å£ï¼Œè¦æ˜¯å…¨è·¯å¾„ã€‚ 2ã€xml ä¸­çš„å‡½æ•° id å’Œæ¥å£ä¸­çš„å‡½æ•°åæ˜¯å¦å¯¹å¾—ä¸Šï¼Œå‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹æ˜¯å¦å¯¹å¾—ä¸Š 3ã€å»çœ‹è¾“å‡ºç›®å½•ä¸­æœ‰æ²¡æœ‰ xml æ˜ å°„æ–‡ä»¶ï¼Œmaven é¡¹ç›®é»˜è®¤æŠŠèµ„æºæ–‡ä»¶æ”¾åœ¨ src/main/resources ä¸‹ï¼Œé»˜è®¤åªè¯†åˆ« src/main/resources ä¸‹çš„èµ„æºæ–‡ä»¶ã€‚ Unable to obtain LocalDateTime from TemporalAccessorYou canâ€™t parse a date string into LocalDateTime without a time. LocalDateTime.parse(â€œ2019-10-25â€, DateTimeFormatter.ofPattern(â€œyyyy-MM-ddâ€)) You should parse the string into LocalDate and call LocalDate.atStartOfDay() to return LocalDateTime with time 00:00:00. LocalDate.parse(â€œ2019-10-25â€, DateTimeFormatter.ofPattern(â€œyyyy-MM-ddâ€)).atStartOfDay() 12345678910111213141516171819// ä¼ å…¥çš„æ—¶é—´æ ¼å¼è¦å’Œè§£æçš„æ—¶é—´æ ¼å¼ä¿æŒä¸€è‡´ï¼Œå¦‚ä»¥ä¸‹è§£ææ–¹å¼ï¼Œä¼ å…¥å‚æ•° 2023-03-08 11:11:11LocalDateTime startDateTime = LocalDateTime.parse(startTime, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;));LocalDateTime endDateTime = LocalDateTime.parse(endTime, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;)); DateTimeFormatter localDateFmt = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;); DateTimeFormatter localDateFmt = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;); if (!&quot;&quot;.equals(startTime) &amp;&amp; !&quot;&quot;.equals(endTime)) &#123; LocalDate startDate = LocalDate.parse(startTime, localDateFmt); LocalDate endDate = LocalDate.parse(endTime, localDateFmt); LocalDateTime startDateTime = LocalDateTime.of(startDate, LocalTime.MIN); LocalDateTime endDateTime = LocalDateTime.of(endDate, LocalTime.MAX); log.debug(&quot;startDateTime: &quot; + startDateTime); log.debug(&quot;endDateTime: &quot; + endDateTime); queryWrapper.between(&quot;create_time&quot;, startDateTime, endDateTime); &#125; mybatisplus æäº¤æ•°æ®åæ— æ³•ç«‹å³è¢«æŸ¥è¯¢åˆ°123æå‡äº‹åŠ¡éš”ç¦»çº§åˆ«@Transactional(isolation = Isolation.READ_UNCOMMITTED) One record is expected, but the query result is multiple records12è§£å†³æ–¹æ¡ˆï¼šå¦‚æœæƒ³å–ä¸€æ¡å¹¶ä¸æƒ³æŠ¥é”™æ—¶ä½¿ç”¨ getOne(queryWrapper,false) æ³¨æ„ mybatisplus çš„ sql è¿”å›å€¼java.lang.NumberFormatException: nullæ£€æŸ¥ä½¿ç”¨ Integer.parseInt è½¬æ¢æ—¶ï¼Œæ˜¯å¦è½¬æ¢çš„æ•°å¯èƒ½ä¸º null Unexpected error occurred in scheduled taskjava.lang.NullPointerException: nullæœåŠ¡ç±»æ²¡æœ‰æ­£ç¡®æ³¨å…¥ï¼Œæ¯ä¸€ä¸ªéœ€è¦æ³¨å…¥ç±»éƒ½éœ€è¦æ·»åŠ  Autowire æ³¨è§£ Unhandled exception typeåŸå› ï¼šè¢«å¼ºåˆ¶å¼‚å¸¸å¤„ç†çš„ä»£ç å—ï¼Œå¿…é¡»è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæç¤ºâ€œUnhandled exception type Exceptionâ€é”™è¯¯è­¦å‘Šã€‚ éœ€è¦å°†ä»£ç å†™åˆ° try catch é‡Œï¼ MySQLæ•°æ®åº“ä¹±ç ï¼Œå‰ç«¯ä¹±ç 12345678910111213sudo vim /etc/mysql/my.cnf# å¡«å†™å¦‚ä¸‹é…ç½®[client]default-character-set=utf8mb4[mysqld]character-set-server = utf8mb4collation-server = utf8mb4_unicode_ciinit_connect=&#x27;SET NAMES utf8mb4&#x27;skip-character-set-client-handshake = true[mysql]default-character-set = utf8mb4 nested exception is java.lang.NullPointerException] with root cause Error attempting to get column â€˜motion_idâ€™ from result setæ•°æ®åº“å­—æ®µç±»å‹ä¸åç«¯ç±»å‹ä¸ä¸€è‡´ å‰ç«¯digital envelope routines::unsupported1export NODE_OPTIONS=--openssl-legacy-provider ç¦æ­¢è·¨åŸŸç­–ç•¥ (CORS policy)node: â€“openssl-legacy-provider is not allowed in NODE_OPTIONS12unset NODE_OPTIONS Unexpected character (â€˜}â€™è¯·æ±‚çš„æ—¶å€™æœ€åä¸€ä¸ªå­—æ®µåé¢ä¸è¦åŠ é€—å· The value of the â€˜Access-Control-Allow-Originâ€™ header in the response must not be the wildcard â€˜*â€™ when the requestâ€™s credentials mode is â€˜includeâ€™. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attributeè¿™ä¸ªé”™è¯¯é€šå¸¸æ˜¯å› ä¸ºåœ¨ä½¿ç”¨ XMLHttpRequest å¯¹è±¡è¿›è¡Œè·¨åŸŸè¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”å¤´ä¸­çš„ Access-Control-Allow-Origin çš„å€¼ä¸º*ï¼Œä½†è¯·æ±‚çš„ withCredentials å±æ€§è¢«è®¾ç½®ä¸º trueï¼Œè¿™ä¸¤è€…ä¹‹é—´æ˜¯ç›¸äº’å†²çªçš„ã€‚ XMLHttpRequest å¯¹è±¡å…·æœ‰ withCredentials å±æ€§ï¼Œå¦‚æœè®¾ç½®ä¸º trueï¼Œå®ƒå°†åœ¨è¯·æ±‚ä¸­åŒ…æ‹¬æ¥è‡ªå…¶ä»–åŸŸçš„ cookie ç­‰å‡­æ®ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨åœ¨å“åº”å¤´ä¸­å°† Access-Control-Allow-Origin è®¾ç½®ä¸º*ï¼Œæµè§ˆå™¨ä¼šç¦æ­¢è®¿é—®è¿™äº›å‡­æ®ä¿¡æ¯ã€‚è¿™æ˜¯ä¸€é¡¹å®‰å…¨ä¿æŠ¤æªæ–½ï¼Œé˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œå°† Access-Control-Allow-Origin è®¾ç½®ä¸ºè¯·æ±‚æ¥æºçš„åŸŸåï¼Œè€Œä¸æ˜¯ä½¿ç”¨é€šé…ç¬¦*ã€‚è¿™å¯ä»¥è®©æµè§ˆå™¨å®‰å…¨åœ°å‘é€å‡­æ®ä¿¡æ¯ã€‚ åœ¨å‰ç«¯ï¼Œéœ€è¦å°† withCredentials å±æ€§è®¾ç½®ä¸º trueï¼Œä»¥ä¾¿åœ¨è¯·æ±‚ä¸­åŒ…å«å‡­æ®ä¿¡æ¯ã€‚åŒæ—¶ï¼Œéœ€è¦ç¡®ä¿è¯·æ±‚çš„æ¥æºåŸŸåä¸æœåŠ¡å™¨ç«¯è®¾ç½®çš„ Access-Control-Allow-Origin ä¸€è‡´ã€‚ å¦‚æœä½ æ— æ³•æ›´æ”¹æœåŠ¡å™¨ç«¯çš„è®¾ç½®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ä»£ç†æˆ–è€… JSONP ç­‰è·¨åŸŸè§£å†³æ–¹æ¡ˆã€‚ VUE é¡¹ç›®ç«¯å£ä¸å›ºå®šApplication run failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name â€˜communityInfoControllerâ€™æ£€æŸ¥target/classes/mapper/DepartmentMapper.xmlä¸­çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæ£€æŸ¥å¼•å·æ˜¯å¦å¤šäº†ï¼Œå°‘äº† 123&lt;select id=&quot;findIdByOrgId&quot; resultType=&quot;resultType=&quot;java.lang.Integer&quot;&gt;SELECT CAST(id AS UNSIGNED) AS id FROM department WHERE organization_id = #&#123;orgId&#125;&lt;/select&gt; é”™è¯¯ç  400-å‰åç«¯å‚æ•°å¯¹ä¸ä¸Š {POST/GET} there is already xx bean method NPM å¯åŠ¨:digital envelope routines::unsupported12export NODE_OPTIONS=--openssl-legacy-providernpm run serve The field file exceeds its maximum permitted size of 1048576 bytesspring boot ä¸Šä¼ æ–‡ä»¶æ—¶æ¥å£æŠ¥é”™ The field file exceeds its maximum permitted size of 1048576 bytes.ç»æ’æŸ¥å®˜æ–¹è®¾ç½®æ¯ä¸ªæ–‡ä»¶çš„é…ç½®æœ€å¤§ä¸º 1Mbï¼Œå•æ¬¡è¯·æ±‚çš„æ–‡ä»¶çš„æ€»æ•°ä¸èƒ½å¤§äº 10Mbï¼Œä¸Šä¼ å¤§äº 1Mb çš„æ–‡ä»¶éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆapplication.propertiesï¼‰1.Spring Boot 1.3.x æˆ–è€…ä¹‹å‰ 12multipart.maxFileSize=100Mbmultipart.maxRequestSize=1000Mb 2.Spring Boot 1.4.x ä»¥å 12spring.http.multipart.maxFileSize=100Mbspring.http.multipart.maxRequestSize=1000Mb 3.Spring Boot 2.0 ä¹‹å 12spring.servlet.multipart.max-file-size=100MBspring.servlet.multipart.max-request-size=1000MB å­—æ®µä¸å­˜åœ¨è¯·æ±‚çš„æ—¶å€™å­—æ®µåå­—å’Œ java ä¸­å‘½åä¿æŒä¸€ç›´ï¼Œè€Œä¸æ˜¯å’Œæ•°æ®åº“åå­—ä¿æŒä¸€æ · æ•°æ®åº“ communications link failureé…ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´src/utils/request.js Request method GET not supportedå‰ç«¯è¯·æ±‚äº‹ä»¶æ²¡æœ‰è®¾ç½®è¯·æ±‚æ–¹å¼ post è¿˜æ˜¯ get Invalid cros requestè·¨åŸŸ å¤„ç†æœªæ¥æ•°æ®https://www.bilibili.com/video/BV1U44y1W77D?t=1655.5&amp;p=23 TIPSå‰ç«¯ä¿å­˜ä»£ç éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ç”Ÿæ•ˆè·å–ç”¨æˆ· IP1String userIp = request.getRemoteAddr(); è§£å†³æ–¹æ¡ˆï¼šJava å®ä½“ç±»å­—æ®µ ä¸è¿”å›ç»™å‰ç«¯1234@JsonIgnore@ApiModelProperty(value = &quot;ä¸é‡è¦&quot;)@TableField(exist = false)private String unimportant; Dateutil åŒ…1234import java.text.SimpleDateFormat;import java.util.Calendar;import java.util.Date; è·å–è¯·æ±‚å‚æ•°123456public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; //è·å–è¯·æ±‚å‚æ•° String queryString = request.getQueryString(); log.info(&quot;è¯·æ±‚å‚æ•°:&#123;&#125;&quot;, queryString); &#125; åç«¯è®¾ç½® header å‰ç«¯è·å–ä¸åˆ°1234# å¿…é¡»è¦åŠ è¿™æ¡å­—æ®µæ§åˆ¶èƒ½å¤Ÿè·å–çš„ header response.addHeader(&quot;Access-Control-Expose-Headers&quot;,&quot;test&quot;); response.addHeader(&quot;test&quot;, &quot;sdfdsfdsf&quot;); axios è¯·æ±‚1234567axios.get(&#x27;http://opm.eswincomputing.com:9090/user/page&#x27;) .then(function (response) &#123; console.log(response.headers); &#125;) .catch(function (error) &#123; console.log(error.headers); &#125;); æŸ¥è¯¢ç«¯å£å ç”¨12lsof -ilsof -i:8080ï¼šæŸ¥çœ‹ 8080 ç«¯å£å ç”¨ æ‰“å°è¾“å‡º1234567891011121314# Application.ymllogging: level: com.eswincomputing.springboot: debug# ä½¿ç”¨@Slf4j@RestController@RequestMapping(&quot;/patch-record&quot;)public class PatchRecordController &#123; @Resource private IPatchRecordService patchRecordServic log.info(version);&#125; æ ¡éªŒå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º1StrUtil.isBlank() æŸ¥è¯¢ä¸»é”®12SELECT id FROM department WHERE organization_id = #&#123;orgId&#125; å­—ç¬¦æ•´å‹äº’è½¬1Integer.parseInt(user.getDelFlag()) è§£æ json å­—ç¬¦ä¸²123456789101112 &lt;!-- json è§£æ --&gt;&lt;dependency&gt;&lt;groupId&gt;com.alibaba&lt;/groupId&gt;&lt;artifactId&gt;fastjson&lt;/artifactId&gt;&lt;version&gt;2.0.21&lt;/version&gt;&lt;/dependency&gt; JSONObject object = JSONObject.parseObject(patchRecord.getAttachmentList()); String fileUID = object.getString(&quot;file_uid&quot;); String fileName = object.getString(&quot;file_name&quot;); é€—å·åˆ†å‰²å­—ç¬¦ä¸²1234567String string = &quot;å¼ ä¸‰ï¼Œæå››ï¼Œç‹äº”ï¼Œé©¬å…­ï¼Œå°æ°”&quot;; String substring = string.substring(0, string.length() - 1); System.out.println(substring); String[] split = substring.split(&quot;,&quot;);//ä»¥é€—å·åˆ†å‰² for (String string2 : split) &#123; System.out.println(&quot;æ•°æ®--&gt;&gt;&gt;&quot; + string2); &#125;","categories":[{"name":"JAVA å¼€å‘","slug":"JAVA-å¼€å‘","permalink":"http://example.com/categories/JAVA-%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"JAVA","slug":"JAVA","permalink":"http://example.com/tags/JAVA/"}]},{"title":"å¦‚ä½•ä½¿ç”¨ Gitlab CI Pipeline","slug":"å¦‚ä½•ä½¿ç”¨Gitlab-CI-Pipeline","date":"2023-01-07T03:08:19.000Z","updated":"2023-03-25T04:13:10.820Z","comments":true,"path":"2023/01/07/å¦‚ä½•ä½¿ç”¨Gitlab-CI-Pipeline/","link":"","permalink":"http://example.com/2023/01/07/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Gitlab-CI-Pipeline/","excerpt":"","text":"GitLab CI/CD æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿå®ç°è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ GitLab CI/CD çš„ Pipeline åŠŸèƒ½ï¼Œä»¥å®ç°å°† Markdown æ–‡ä»¶è‡ªåŠ¨ç¼–è¯‘ä¸º PDF å¹¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢çš„åŠŸèƒ½ã€‚ å‡†å¤‡å·¥ä½œåœ¨å¼€å§‹ä½¿ç”¨ GitLab CI/CD çš„ Pipeline åŠŸèƒ½ä¹‹å‰ï¼Œéœ€è¦è¿›è¡Œä¸€äº›å‡†å¤‡å·¥ä½œã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š åˆ›å»º GitLab é¡¹ç›®ï¼šåœ¨ GitLab ä¸Šåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¹¶å°† Markdown æ–‡ä»¶ä¸Šä¼ è‡³é¡¹ç›®çš„æŸä¸ªç›®å½•ä¸‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°† Markdown æ–‡ä»¶ä¸Šä¼ è‡³é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå¹¶å‘½åä¸º example.mdã€‚ å®‰è£… Pandocï¼šPandoc æ˜¯ä¸€ä¸ªç”¨äºæ–‡æ¡£è½¬æ¢çš„å·¥å…·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒå°† Markdown æ–‡ä»¶è½¬æ¢ä¸º PDFã€‚åœ¨å®‰è£… Pandoc ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£… LaTeXï¼Œå› ä¸º Pandoc ä½¿ç”¨ LaTeX è¿›è¡Œ PDF æ¸²æŸ“ã€‚å…·ä½“å®‰è£…æ­¥éª¤è¯·å‚è€ƒ Pandoc å’Œ LaTeX çš„å®˜æ–¹æ–‡æ¡£ã€‚ åˆ›å»º Releaseï¼šåœ¨ GitLab ä¸Šåˆ›å»ºä¸€ä¸ª Releaseï¼Œç”¨äºå­˜å‚¨ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶ã€‚å…·ä½“æ“ä½œæ–¹æ³•è¯·å‚è€ƒ GitLab çš„å®˜æ–¹æ–‡æ¡£ã€‚ åˆ›å»º CI/CD é…ç½®æ–‡ä»¶ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.gitlab-ci.yml æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰ Pipeline çš„æµç¨‹ã€‚ ç¼–å†™ CI/CD é…ç½®æ–‡ä»¶ä¸‹é¢æ˜¯ä¸€ä¸ªæ ·ä¾‹çš„.gitlab-ci.yml æ–‡ä»¶ï¼Œç”¨äºå®ç°å°† Markdown æ–‡ä»¶ç¼–è¯‘ä¸º PDF å¹¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢çš„åŠŸèƒ½ã€‚ 12345678910111213image: pandoc/core:lateststages: - buildpdf: stage: build script: - pandoc example.md -o example.pdf - curl --header &quot;PRIVATE-TOKEN: $&#123;CI_PRIVATE_TOKEN&#125;&quot; --upload-file example.pdf &quot;$&#123;CI_API_V4_URL&#125;/projects/$&#123;CI_PROJECT_ID&#125;/uploads&quot; artifacts: paths: - example.pdf ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† pandoc/core:latest ä½œä¸º Docker é•œåƒï¼Œè¯¥é•œåƒå·²ç»é¢„å®‰è£…äº† Pandoc å·¥å…·ã€‚ è¯¥æ–‡ä»¶ä¸­åŒ…å«äº†ä¸€ä¸ª build é˜¶æ®µï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ª pdf ä»»åŠ¡ã€‚åœ¨ pdf ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Pandoc å·¥å…·å°† Markdown æ–‡ä»¶è½¬æ¢ä¸º PDF æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ cURL å·¥å…·å°†ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç¯å¢ƒå˜é‡$&#123;CI_PRIVATE_TOKEN&#125;å’Œ$&#123;CI_API_V4_URL&#125;ï¼Œè¿™äº›å˜é‡æ˜¯ GitLab è‡ªåŠ¨æ³¨å…¥çš„ï¼Œç”¨äºè¿›è¡Œèº«ä»½éªŒè¯å’Œä¸Šä¼ æ–‡ä»¶ã€‚ æœ€åï¼Œæˆ‘ä»¬å°†ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶å®šä¹‰ä¸º Pipeline çš„ artifactsï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ–‡ä»¶èƒ½å¤Ÿè¢«ä¿ç•™å¹¶å¯ç”¨äºåç»­çš„éƒ¨ç½²ã€‚ è¿è¡Œ Pipelineå®Œæˆ CI/CD é…ç½®æ–‡ä»¶çš„ç¼–å†™åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ GitLab ä¸Šå¯åŠ¨ Pipelineï¼Œå°† Markdown æ–‡ä»¶è‡ªåŠ¨ç¼–è¯‘ä¸º PDF å¹¶ä¸Šä¼ è‡³ GitLab Release ç•Œé¢ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š æäº¤ä»£ç ï¼šå°†.gitlab-ci.yml æ–‡ä»¶æäº¤åˆ° GitLab å¯åŠ¨ Pipelineï¼šåœ¨ GitLab ä¸Šæ‰“å¼€é¡¹ç›®ï¼Œå¹¶ç‚¹å‡»â€œCI/CDâ€-&gt;â€œPipelinesâ€é€‰é¡¹å¡ã€‚ç‚¹å‡»â€œRun Pipelineâ€æŒ‰é’®ï¼Œå¯åŠ¨ Pipeline æµç¨‹ã€‚ ç­‰å¾… Pipeline å®Œæˆï¼šåœ¨ Pipeline å¯åŠ¨åï¼ŒGitLab ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª Runner å¹¶åˆ†é…ä»»åŠ¡ã€‚Pipeline çš„çŠ¶æ€ä¼šåœ¨é¡µé¢ä¸Šå®æ—¶æ›´æ–°ï¼Œç›´åˆ° Pipeline æ‰§è¡Œå®Œæˆã€‚ æŸ¥çœ‹ Releaseï¼šPipeline æ‰§è¡Œå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ GitLab Release ç•Œé¢ä¸­æ‰¾åˆ°ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶ã€‚ç‚¹å‡» PDF æ–‡ä»¶é“¾æ¥ï¼Œå³å¯ä¸‹è½½å¹¶æŸ¥çœ‹ç¼–è¯‘å¥½çš„ PDF æ–‡ä»¶ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[]},{"title":"Markdown åµŒå…¥ Draw.io","slug":"MarkdownåµŒå…¥Draw-io","date":"2023-01-07T02:42:06.000Z","updated":"2023-01-07T02:42:34.820Z","comments":true,"path":"2023/01/07/MarkdownåµŒå…¥Draw-io/","link":"","permalink":"http://example.com/2023/01/07/Markdown%E5%B5%8C%E5%85%A5Draw-io/","excerpt":"","text":"Markdown æ˜¯æ”¯æŒåµŒå…¥ HTML çš„ï¼Œå¤§éƒ¨åˆ†é˜…è¯»å™¨ä¹Ÿéƒ½æ”¯æŒè§£æã€‚Draw.io å¯ä»¥å¯¼å‡ºä¸º HTML æ ¼å¼ã€‚ æ–‡ä»¶â€”å¯¼å‡ºä¸º HTMLâ€”å¯¼å‡ºâ€”æ–°çª—å£æ‰“å¼€â€”å¤åˆ¶ HTML ä»£ç â€”åªä¿ç•™&lt;body&gt;æ ‡ç­¾ä¹‹é—´çš„å†…å®¹ï¼Œä¸åŒ…å«&lt;body&gt;å’Œ&lt;/body&gt;ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[]},{"title":"Ubuntu 18.04 å®‰è£…Clang/LLVM 11","slug":"Ubuntu-18-04-å®‰è£…Clang-LLVM-11","date":"2022-12-24T07:53:22.000Z","updated":"2022-12-24T07:53:55.923Z","comments":true,"path":"2022/12/24/Ubuntu-18-04-å®‰è£…Clang-LLVM-11/","link":"","permalink":"http://example.com/2022/12/24/Ubuntu-18-04-%E5%AE%89%E8%A3%85Clang-LLVM-11/","excerpt":"","text":"ä» APT å®‰è£…Install the GPG Key for https://apt.llvm.org/ 1wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add - Add the repo for Clang 11 stable-old for Ubuntu 18.04 Bionic 12echo &quot;deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-11 main&quot; | sudo tee -a /etc/apt/sources.listsudo apt-get update Install practically everything (except python-clang-11 which for some reason doesnâ€™t work) 123sudo apt-get install libllvm-11-ocaml-dev libllvm11 llvm-11 llvm-11-dev llvm-11-doc llvm-11-examples llvm-11-runtime \\clang-11 clang-tools-11 clang-11-doc libclang-common-11-dev libclang-11-dev libclang1-11 clang-format-11 clangd-11 \\libfuzzer-11-dev lldb-11 lld-11 libc++-11-dev libc++abi-11-dev libomp-11-dev -y Make Clang 11 and everything related to it defaults 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051sudo update-alternatives \\ --install /usr/lib/llvm llvm /usr/lib/llvm-11 50 \\ --slave /usr/bin/llvm-config llvm-config /usr/bin/llvm-config-11 \\ --slave /usr/bin/llvm-ar llvm-ar /usr/bin/llvm-ar-11 \\ --slave /usr/bin/llvm-as llvm-as /usr/bin/llvm-as-11 \\ --slave /usr/bin/llvm-bcanalyzer llvm-bcanalyzer /usr/bin/llvm-bcanalyzer-11 \\ --slave /usr/bin/llvm-cov llvm-cov /usr/bin/llvm-cov-11 \\ --slave /usr/bin/llvm-diff llvm-diff /usr/bin/llvm-diff-11 \\ --slave /usr/bin/llvm-dis llvm-dis /usr/bin/llvm-dis-11 \\ --slave /usr/bin/llvm-dwarfdump llvm-dwarfdump /usr/bin/llvm-dwarfdump-11 \\ --slave /usr/bin/llvm-extract llvm-extract /usr/bin/llvm-extract-11 \\ --slave /usr/bin/llvm-link llvm-link /usr/bin/llvm-link-11 \\ --slave /usr/bin/llvm-mc llvm-mc /usr/bin/llvm-mc-11 \\ --slave /usr/bin/llvm-mcmarkup llvm-mcmarkup /usr/bin/llvm-mcmarkup-11 \\ --slave /usr/bin/llvm-nm llvm-nm /usr/bin/llvm-nm-11 \\ --slave /usr/bin/llvm-objdump llvm-objdump /usr/bin/llvm-objdump-11 \\ --slave /usr/bin/llvm-ranlib llvm-ranlib /usr/bin/llvm-ranlib-11 \\ --slave /usr/bin/llvm-readobj llvm-readobj /usr/bin/llvm-readobj-11 \\ --slave /usr/bin/llvm-rtdyld llvm-rtdyld /usr/bin/llvm-rtdyld-11 \\ --slave /usr/bin/llvm-size llvm-size /usr/bin/llvm-size-11 \\ --slave /usr/bin/llvm-stress llvm-stress /usr/bin/llvm-stress-11 \\ --slave /usr/bin/llvm-symbolizer llvm-symbolizer /usr/bin/llvm-symbolizer-11 \\ --slave /usr/bin/llvm-tblgen llvm-tblgen /usr/bin/llvm-tblgen-11sudo update-alternatives \\ --install /usr/bin/clang clang /usr/bin/clang-11 50 \\ --slave /usr/bin/clang++ clang++ /usr/bin/clang++-11 \\ --slave /usr/bin/lld lld /usr/bin/lld-11 \\ --slave /usr/bin/clang-format clang-format /usr/bin/clang-format-11 \\ --slave /usr/bin/clang-tidy clang-tidy /usr/bin/clang-tidy-11 \\ --slave /usr/bin/clang-tidy-diff.py clang-tidy-diff.py /usr/bin/clang-tidy-diff-11.py \\ --slave /usr/bin/clang-include-fixer clang-include-fixer /usr/bin/clang-include-fixer-11 \\ --slave /usr/bin/clang-offload-bundler clang-offload-bundler /usr/bin/clang-offload-bundler-11 \\ --slave /usr/bin/clangd clangd /usr/bin/clangd-11 \\ --slave /usr/bin/clang-check clang-check /usr/bin/clang-check-11 \\ --slave /usr/bin/scan-view scan-view /usr/bin/scan-view-11 \\ --slave /usr/bin/clang-apply-replacements clang-apply-replacements /usr/bin/clang-apply-replacements-11 \\ --slave /usr/bin/clang-query clang-query /usr/bin/clang-query-11 \\ --slave /usr/bin/modularize modularize /usr/bin/modularize-11 \\ --slave /usr/bin/sancov sancov /usr/bin/sancov-11 \\ --slave /usr/bin/c-index-test c-index-test /usr/bin/c-index-test-11 \\ --slave /usr/bin/clang-reorder-fields clang-reorder-fields /usr/bin/clang-reorder-fields-11 \\ --slave /usr/bin/clang-change-namespace clang-change-namespace /usr/bin/clang-change-namespace-11 \\ --slave /usr/bin/clang-import-test clang-import-test /usr/bin/clang-import-test-11 \\ --slave /usr/bin/scan-build scan-build /usr/bin/scan-build-11 \\ --slave /usr/bin/scan-build-py scan-build-py /usr/bin/scan-build-py-11 \\ --slave /usr/bin/clang-cl clang-cl /usr/bin/clang-cl-11 \\ --slave /usr/bin/clang-rename clang-rename /usr/bin/clang-rename-11 \\ --slave /usr/bin/find-all-symbols find-all-symbols /usr/bin/find-all-symbols-11 \\ --slave /usr/bin/lldb lldb /usr/bin/lldb-11 \\ --slave /usr/bin/lldb-server lldb-server /usr/bin/lldb-server-11 Installing CMakeInstall Kitwareâ€™s GPG Key 1wget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2&gt;/dev/null | gpg --dearmor - | sudo tee /etc/apt/trusted.gpg.d/kitware.gpg &gt;/dev/null Add repository 12echo &quot;deb https://apt.kitware.com/ubuntu/ bionic main&quot; | sudo tee -a /etc/apt/sources.listsudo apt-get update Install this optional package so you donâ€™t have to mess with GPG keys anymore 12sudo apt-get install kitware-archive-keyringsudo rm /etc/apt/trusted.gpg.d/kitware.gpg Now upgrade cmake if you already have it installed with sudo apt-get upgrade -y or just install it using sudo apt-get install cmake -y ä½¿ç”¨æºç å®‰è£…12345678910111213141516171819202122232425262728# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨sudo apt update# å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…sudo apt install build-essential cmake python3-dev# ä¸‹è½½ Clang/LLVM 11 çš„æºä»£ç wget https://github.com/llvm/llvm-project/releases/download/llvmorg-11.0.0/llvm-11.0.0.src.tar.xz# è§£å‹æºä»£ç æ–‡ä»¶tar xvf llvm-11.0.0.src.tar.xz# è¿›å…¥è§£å‹åçš„ç›®å½•cd llvm-11.0.0.src# åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œç”¨äºå­˜æ”¾ Clang/LLVM ç¼–è¯‘çš„ç»“æœmkdir buildcd build# ä½¿ç”¨ cmake ç¼–è¯‘ Clang/LLVMcmake ..# ç¼–è¯‘ Clang/LLVMmake# å®‰è£… Clang/LLVMsudo make install","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"å®‰è£…æ•™ç¨‹","slug":"å®‰è£…æ•™ç¨‹","permalink":"http://example.com/tags/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-chown ä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…","slug":"æ¯å¤©å­¦å‘½ä»¤-chownä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…","date":"2022-12-04T08:32:59.000Z","updated":"2022-12-04T08:33:15.742Z","comments":true,"path":"2022/12/04/æ¯å¤©å­¦å‘½ä»¤-chownä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…/","link":"","permalink":"http://example.com/2022/12/04/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-chown%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%8B%A5%E6%9C%89%E8%80%85/","excerpt":"","text":"chown å‘½ä»¤ç”¨æ¥å˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…æˆ–æ‰€å±ç¾¤ç»„ï¼Œé€šè¿‡ chown æ”¹å˜æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œç¾¤ç»„ã€‚ç”¨æˆ·å¯ä»¥æ˜¯ç”¨æˆ·åæˆ–è€…ç”¨æˆ· IDï¼›ç»„å¯ä»¥æ˜¯ç»„åæˆ–è€…ç»„ IDï¼›æ–‡ä»¶æ˜¯ä»¥ç©ºæ ¼åˆ†å¼€çš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ–‡ä»¶åä¹Ÿæ”¯æŒé€šé…ç¬¦ã€‚ å‘½ä»¤æ ¼å¼12345678910chown [é€‰é¡¹] [ç”¨æˆ·æˆ–ç»„] [æ–‡ä»¶æˆ–ç›®å½•]-cæˆ–--changes #æ•ˆæœç±»ä¼¼â€œ-vâ€å‚æ•°ï¼Œä½†ä»…å›æŠ¥æ›´æ”¹çš„éƒ¨åˆ†ï¼›-fæˆ–--quiteæˆ–â€”-silent #ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼›-hæˆ–--no-dereference #åªå¯¹ç¬¦å·è¿æ¥çš„æ–‡ä»¶ä½œä¿®æ”¹ï¼Œè€Œä¸æ›´æ”¹å…¶ä»–ä»»ä½•ç›¸å…³æ–‡ä»¶ï¼›-Ræˆ–--recursive #é€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†ï¼›-væˆ–--version #æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼›--dereference #æ•ˆæœå’Œâ€œ-hâ€å‚æ•°ç›¸åŒï¼›--help #åœ¨çº¿å¸®åŠ©--reference=&lt;å‚è€ƒæ–‡ä»¶æˆ–ç›®å½•&gt; #æŠŠæŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…ä¸æ‰€å±ç¾¤ç»„å…¨éƒ¨è®¾æˆå’Œå‚è€ƒæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…ä¸æ‰€å±ç¾¤ç»„ç›¸åŒï¼›--version #æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ å®ä¾‹å°†æ–‡ä»¶test.mdæ‹¥æœ‰è€…æ”¹ä¸ºnic 1chown nic test.md å°†ç›®å½•/home/nic/developåŠå…¶ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶ã€å­ç›®å½•çš„æ–‡ä»¶æ‹¥æœ‰è€…æ”¹ä¸ºnic 12chown -R nic /home/nic/develop","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-tree æ˜¾ç¤ºç›®å½•ç»“æ„","slug":"æ¯å¤©å­¦å‘½ä»¤-treeæ˜¾ç¤ºç›®å½•ç»“æ„","date":"2022-12-04T08:31:54.000Z","updated":"2022-12-04T08:32:12.420Z","comments":true,"path":"2022/12/04/æ¯å¤©å­¦å‘½ä»¤-treeæ˜¾ç¤ºç›®å½•ç»“æ„/","link":"","permalink":"http://example.com/2022/12/04/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-tree%E6%98%BE%E7%A4%BA%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/","excerpt":"","text":"1234567891011121314151617181920-a #æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶-d #åªæ˜¾ç¤ºç›®å½•ï¼ˆåç§°ï¼‰-l #æ˜¾ç¤ºé“¾æ¥æ–‡ä»¶çš„åŸå§‹æ–‡ä»¶-f #æ˜¾ç¤ºæ‰€åˆ—å‡ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„å®Œæ•´ç›®å½•è·¯å¾„-i #ä¸ä»¥é˜¶æ¢¯çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•åç§°-q #å°†æ§åˆ¶å­—ç¬¦ä»¥?å­—ç¬¦ä»£æ›¿ï¼Œæ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•åç§°-N #ç›´æ¥æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•çš„åç§°-p #æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„æƒé™ä¿¡æ¯-u #æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰è€…æˆ–è€…uid-g #æ˜¾ç¤ºæ–‡ä»¶æ‰€å±ç»„æˆ–è€…gid-s #æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„å¤§å°ä¿¡æ¯-h #ä»¥å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ä¿¡æ¯-D #æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¥æœŸ-v #æŒ‰å­—æ¯æ•°å­—æ­£åºæ˜¾ç¤ºæ–‡ä»¶-r #æŒ‰å­—æ¯æ•°å­—å€’åºæ˜¾ç¤ºæ–‡ä»¶-t #æŒ‰æœ€åæ—¶é—´æ’åºæ˜¾ç¤ºæ–‡ä»¶-C #åœ¨æ–‡ä»¶å’Œç›®å½•åˆ—è¡¨ä¸ŠåŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†æ–‡ä»¶ç±»å‹-P pattern #åªæ˜¾ç¤ºåŒ¹é…æ­£åˆ™è¡¨å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°-I pattern #ä¸ä¸Šç»“æœç›¸å å®ä¾‹æ˜¾ç¤ºå½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ–‡ä»¶åŠç›®å½•åç§° 12345678910111213141516171819$ tree .â”œâ”€â”€ CODE_OF_CONDUCT.mdâ”œâ”€â”€ CONTRIBUTING.mdâ”œâ”€â”€ Fedora-35â”‚ â”œâ”€â”€ Dockerfileâ”‚ â””â”€â”€ Readme.mdâ”œâ”€â”€ LICENSEâ”œâ”€â”€ README.mdâ”œâ”€â”€ Ubuntu-20â”‚ â”œâ”€â”€ Dockerfileâ”‚ â”œâ”€â”€ Readme.mdâ”‚ â”œâ”€â”€ init_edkrepo_conf.shâ”‚ â””â”€â”€ ubuntu20_dev_entrypoint.shâ””â”€â”€ Windows-2022 â”œâ”€â”€ Dockerfile â””â”€â”€ Readme.md3 directories, 12 files åªæ˜¾ç¤ºä¸€å±‚ç›®å½•ç»“æ„ 1234567891011$ tree -L 1 .â”œâ”€â”€ CODE_OF_CONDUCT.mdâ”œâ”€â”€ CONTRIBUTING.mdâ”œâ”€â”€ Fedora-35â”œâ”€â”€ LICENSEâ”œâ”€â”€ README.mdâ”œâ”€â”€ Ubuntu-20â””â”€â”€ Windows-20223 directories, 4 files åªæ˜¾ç¤ºç›®å½•ä¸æ˜¾ç¤ºæ–‡ä»¶ 1234567$ tree -d .â”œâ”€â”€ Fedora-35â”œâ”€â”€ Ubuntu-20â””â”€â”€ Windows-20223 directories","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"CodeReview ä¸­å¸¸è§ç¼©å†™","slug":"CodeReviewä¸­å¸¸è§ç¼©å†™","date":"2022-12-03T11:55:07.000Z","updated":"2022-12-03T12:16:19.013Z","comments":true,"path":"2022/12/03/CodeReviewä¸­å¸¸è§ç¼©å†™/","link":"","permalink":"http://example.com/2022/12/03/CodeReview%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%BC%A9%E5%86%99/","excerpt":"","text":"ASAP: As Soon As Possible. è¯·å°½å¿«å®Œæˆ ACK: Acknowledgement. æ‰¿è®¤ï¼ŒåŒæ„ã€‚è¡¨ç¤ºæ¥å—ä»£ç çš„æ”¹åŠ¨ CR: Code Review. è¯·æ±‚ä»£ç å®¡æŸ¥ CCN: Code Comments Needed.éœ€è¦çš„ä»£ç æ³¨é‡Šï¼šåœ¨è¿™é‡Œæœ‰ä¸€äº›ç®€çŸ­çš„æ³¨é‡Šåœ¨é«˜å±‚æ¬¡ä¸Šæè¿°æ¯ä¸ªä¸»è¦ä»£ç å—çš„ä½œç”¨ï¼ˆä¾‹å¦‚ï¼Œâ€œå¤„ç† HTTP è¯·æ±‚ä¸­çš„æ ‡å¤´â€ï¼‰ä¼šå¾ˆæœ‰å¸®åŠ© DOODOO: Documentation Out Of Date Or Obsolete.æ–‡æ¡£è¿‡æ—¶æˆ–è¿‡æ—¶ï¼šæ­¤æ–‡æ¡£ä¼¼ä¹ä¸æ­£ç¡®ï¼šæ˜¯å¦è¿‡æ—¶ï¼Ÿ DNM: Do not merge. ä¸è¦åˆå¹¶ ditto: å¤šä¸ªé‡å¤çš„è¡¨è¿°ï¼Œä¸‹ä¸€æ¬¡å¯ä»¥ç”¨ ditto è¡¨ç¤ºåŒä¸Š IMO: In My Opinion åœ¨æˆ‘çœ‹æ¥ã€ä¾æˆ‘çœ‹ã€ä¾æˆ‘æ‰€è§ LGT1: Looks Good To 1. å¦‚æœæœ‰ä¸€ä¸ªå›å¤ LGTM åˆ™å¯ä»¥æ·»åŠ ä¸º LGT1ï¼Œ1 ä»£è¡¨ç›®å‰æœ‰ 1 ä¸ªèµ LGT2: Looks Good To 2. å¦‚æœæœ‰ä¸¤ä¸ªå›å¤ LGTM åˆ™å¯ä»¥æ·»åŠ ä¸º LGT2ï¼Œ2 ä»£è¡¨ç›®å‰æœ‰ 2 ä¸ªèµ LGTM: Looks Good To Me. ä»£ç å·²ç»è¿‡ reviewï¼Œå¯ä»¥åˆå¹¶ MCE: Must Check for Errors.å¿…é¡»æ£€æŸ¥é”™è¯¯ï¼šè¿™é‡Œå¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯æˆ–å¼‚å¸¸æƒ…å†µï¼Œä½†æ‚¨æ²¡æœ‰ä»»ä½•ä»£ç æ¥å¤„ç†æ­¤ç±»äº‹ä»¶ MRï¼šmerge request. åˆå¹¶è¯·æ±‚ NACK/NAK: Negative acknowledgement. ä¸åŒæ„ï¼Œä¸æ¥å—è¿™æ¬¡çš„æ”¹åŠ¨ IMHO: In My Humble Opinion IMO è°¦è™šçš„è¯´æ³• IMO: In My Opinion. åœ¨æˆ‘çœ‹æ¥ IIRC: If I Recall Correctly. å¦‚æœæˆ‘æ²¡æœ‰è®°é”™çš„è¯ PRï¼šPull Request. æ‹‰å–è¯·æ±‚ï¼Œç»™å…¶ä»–é¡¹ç›®æäº¤ä»£ç  PTAL: Please Take A Look. æç¤ºé¡¹ç›® Owner/contributor review RFC: Request For Comment. è¯·æ±‚è¿›è¡Œè®¨è®ºï¼Œè¡¨ç¤ºè®¤ä¸ºæŸä¸ªæƒ³æ³•å¾ˆå¥½ï¼Œé‚€è¯·å¤§å®¶ä¸€èµ·è®¨è®ºä¸€ä¸‹ RCP: Repeated Code Pattern.é‡å¤ä»£ç æ¨¡å¼ï¼šä¸ä¸Šé¢å‡ è¡Œéå¸¸ç›¸ä¼¼çš„ä»£ç åœ¨è®¸å¤šä¸åŒçš„åœ°æ–¹é‡å¤å‡ºç°ã€‚æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥ç®€åŒ–å®ƒï¼ˆä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªéšè—ç»†èŠ‚çš„æ›´é«˜çº§åˆ«çš„ APIï¼Œæˆ–è€…æ‰¾åˆ°ä¸€ä¸ªæ›´é›†ä¸­çš„åœ°æ–¹æ¥æ‰§è¡Œè¿™äº›æ“ä½œï¼Œè¿™æ ·è¿™é‡Œå°±ä¸éœ€è¦è¿™æ®µä»£ç äº†ï¼‰ã€‚ SGTM: Sounds Good To Me. å’Œä¸Šé¢é‚£å¥æ„æ€å·®ä¸å¤šï¼Œä¹Ÿæ˜¯å·²ç»é€šè¿‡äº† review çš„æ„æ€ TBD: To Be Done. æœªå®Œæˆï¼Œå¾…ç»­ TL;DR: Too Long; Donâ€™t Read. PR å†…å®¹å¤ªå¤šï¼Œæ²¡åŠæ³•çœ‹ TMLI: Too Many Levels of Indentation.Too Many Levels of Indentationï¼šç¼©è¿›å¤ªæ·±çš„ä»£ç å¾ˆéš¾é˜…è¯»ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥é‡æ„ä»£ç ä»¥å‡å°‘åµŒå¥—çº§åˆ«ã€‚ WIP: Work In Progress. å‘Šè¯‰é¡¹ç›®ç»´æŠ¤è€…è¿™ä¸ªåŠŸèƒ½è¿˜æœªå®Œæˆï¼Œæ–¹ä¾¿ç»´æŠ¤è€… review å·²æäº¤çš„ä»£ç  TBR: To Be Reviewed. æç¤ºç»´æŠ¤è€…è¿›è¡Œ review TBD: To Be Done (or Defined/Discussed/Decided/Determined). æ ¹æ®è¯­å¢ƒä¸åŒæ„ä¹‰æœ‰æ‰€åŒºåˆ«ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯è¿˜æ²¡æå®šçš„æ„æ€","categories":[],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"},{"name":"CodeReview","slug":"CodeReview","permalink":"http://example.com/tags/CodeReview/"}]},{"title":"OFFICE-è§£å†³ Word ç¼–è¾‘å¡é¡¿","slug":"OFFICE-è§£å†³Wordç¼–è¾‘å¡é¡¿","date":"2022-12-03T11:01:27.000Z","updated":"2022-12-03T12:16:36.658Z","comments":true,"path":"2022/12/03/OFFICE-è§£å†³Wordç¼–è¾‘å¡é¡¿/","link":"","permalink":"http://example.com/2022/12/03/OFFICE-%E8%A7%A3%E5%86%B3Word%E7%BC%96%E8%BE%91%E5%8D%A1%E9%A1%BF/","excerpt":"","text":"æ‰“å¼€ Word å¾ˆå¿«ï¼Œä½†æ˜¯ä¸€ç¼–è¾‘å°±ç‰¹åˆ«å¡ï¼Œå°¤å…¶æ—¶æ‹–åŠ¨è¡¨æ ¼æ—¶å‡ ä¹æ˜¯é€å¸§ç§»åŠ¨ã€‚è¿™æ˜¯ç¡¬ä»¶å›¾å½¢åŠ é€Ÿé—®é¢˜ã€‚è§£å†³æ–¹å¼å¦‚ä¸‹ã€‚ æ‰“å¼€ Wordï¼Œç‚¹å‡»å·¦ä¸Šè§’â€”&gt;æ–‡ä»¶â€”&gt;é€‰é¡¹â€”&gt;é«˜çº§ï¼Œä¸€ç›´æ‹‰åˆ°â€œæ˜¾ç¤ºâ€ï¼› å‹¾é€‰ç¦ç”¨ç¡¬ä»¶å›¾å½¢åŠ é€Ÿï¼› å–æ¶ˆå‹¾é€‰å­åƒç´ å®šä½å¹³æ»‘å±å¹•ä¸Šçš„å­—ä½“ã€‚","categories":[],"tags":[{"name":"Office","slug":"Office","permalink":"http://example.com/tags/Office/"}]},{"title":"Git cloneä¸‹æ¥çš„åˆ†æ”¯ä¸å®Œæ•´","slug":"Git-cloneä¸‹æ¥çš„åˆ†æ”¯ä¸å®Œæ•´","date":"2022-12-03T10:52:10.000Z","updated":"2022-12-03T10:52:41.955Z","comments":true,"path":"2022/12/03/Git-cloneä¸‹æ¥çš„åˆ†æ”¯ä¸å®Œæ•´/","link":"","permalink":"http://example.com/2022/12/03/Git-clone%E4%B8%8B%E6%9D%A5%E7%9A%84%E5%88%86%E6%94%AF%E4%B8%8D%E5%AE%8C%E6%95%B4/","excerpt":"","text":"å°†ä»“åº“git cloneåˆ°æœ¬åœ°åå‘ç°æœ¬åœ°ç¼ºå¤±äº†ä¸€äº›è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ã€‚ä¸€èˆ¬å‘ç”Ÿåœ¨git clone â€”depth 1è®¾ç½®å…‹éš†æ·±åº¦æ—¶å‘ç”Ÿã€‚å› ä¸ºæœ‰äº›å¤§å‹é¡¹ç›®ä¸€æ¬¡æ€§å…‹éš†å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥åªå…‹éš†ä¸€å±‚æ·±åº¦ã€‚ å¦‚è¿œç¨‹æœ‰åˆ†æ”¯branch_aï¼Œå…‹éš†ä¸‹æ¥åä½¿ç”¨git branch -avå‘½ä»¤æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯æ²¡æœ‰æ˜¾ç¤ºè¯¥åˆ†æ”¯ï¼Œè¯¥å¦‚ä½•è§£å†³ï¼Ÿ 12git remote set-branches origin &#x27;branch_a&#x27;git fetch -v","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"æ‰‹æŠŠæ‰‹æ•™ä½ å‘å¼€æºç¤¾åŒºæ Patch","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ å‘å¼€æºç¤¾åŒºæPatch","date":"2022-11-20T07:11:57.000Z","updated":"2022-11-20T08:16:56.657Z","comments":true,"path":"2022/11/20/æ‰‹æŠŠæ‰‹æ•™ä½ å‘å¼€æºç¤¾åŒºæPatch/","link":"","permalink":"http://example.com/2022/11/20/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%90%91%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E6%8F%90Patch/","excerpt":"","text":"æäº¤è¡¥ä¸çš„æœ€ä½³å®è·µ æœ¬æ–‡ç¿»è¯‘è‡ªå®˜æ–¹æ•™ç¨‹Git - MyFirstContributionï¼ŒåŸæ–‡åŒ…å«å¼€å‘åˆ°æäº¤çš„æ•´ä¸ªå‘¨æœŸã€‚ä½†æ˜¯æƒ³è¦æäº¤çš„äººåº”è¯¥éƒ½å·²ç»å¼€å‘å®Œä»£ç äº†ï¼Œæ‰€ä»¥æœ¬æ–‡ç”¨è‡ªå·±çš„å®é™…ä¾‹å­é‡æ–°å†™äº†ä¸€éï¼Œçœå»äº†å¼€å‘ä»£ç ç­‰æµç¨‹ï¼Œé‡ç‚¹ä»‹ç»å¦‚ä½•ä½¿ç”¨ git send-emailã€‚ ç¯å¢ƒå‡†å¤‡ä¸‹è½½ OpenSBI ä»“åº“12git clone https://github.com/riscv-software-src/opensbi.gitcd opensbi å®‰è£…ä¾èµ–è¦ä»æºä»£ç æ„å»º OpenSBIï¼š 1make æ³¨ï¼šOpenSBI çš„æ„å»ºæ˜¯å¯å¹¶è¡Œçš„ã€‚ä¸Šé¢çš„å‘½ä»¤å¯ä»¥æ·»åŠ -j#å‚æ•°ï¼Œå¦‚-j12ã€‚ ç¡®è®¤è¦è§£å†³çš„é—®é¢˜åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å°†æ¨¡æ‹Ÿæäº¤ä¸€ä¸ªç®€å•çš„ Patchï¼Œ.gitignoreæ–‡ä»¶å¯ä»¥è¿‡æ»¤ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œç°åœ¨ä½¿ç”¨ VSCode çš„ç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œä½¿ç”¨ VSCode å¼€å‘æ—¶å¸¸å¸¸ä¼šç”Ÿæˆ.vscodeç›®å½•ï¼Œä½†æ˜¯è¿™äº›æ–‡ä»¶ä¸è¯¥è¢«æ¨é€è‡³è¿œç¨‹ï¼ŒåŸä»“åº“ä¸­çš„.gitignoreæ–‡ä»¶ä¸­æ²¡æœ‰è¿‡æ»¤è¯¥æ–‡ä»¶ï¼Œæˆ‘ä»¬ç»™ä»–åŠ ä¸Šã€‚ ä¸ºäº†èƒ½å¤Ÿæ¨¡æ‹Ÿä¸€æ¬¡å‘é€å¤šä¸ªcommitçš„åœºæ™¯ï¼Œæˆ‘ä»¬å°†å†æ·»åŠ ä¸€ä¸ª.soç”¨æ¥è¿‡æ»¤ç¼–è¯‘è¿‡ç¨‹ä¸­ç”Ÿæˆçš„.soæ–‡ä»¶ã€‚ å»ºç«‹å·¥ä½œç©ºé—´è®©æˆ‘ä»¬å…ˆå»ºç«‹ä¸€ä¸ªå¼€å‘åˆ†æ”¯æ¥è¿›è¡Œæˆ‘ä»¬çš„ä¿®æ”¹ã€‚ 1git checkout -b update_gitignore origin/master æˆ‘ä»¬å°†åœ¨è¿™é‡Œåšä¸€äº›æäº¤ï¼Œä»¥æ¼”ç¤ºå¦‚ä½•å°†ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªè¡¥ä¸çš„ä¸»é¢˜åŒæ—¶é€å®¡ã€‚ å®ç°ä»£ç è¿‡æ»¤ .vscodeæ‰“å¼€æ–‡ä»¶.gitignoreï¼Œä¸ºè¯¥æ–‡ä»¶æ·»åŠ /.vscode/ï¼š 1234567891011121314# Object files*.o*.a*.dep#Build &amp; install directoriesbuild/install/# Development friendly filestagscscope*/.vscode/ ä¸ºä»¥ä¸Šä¿®æ”¹åšä¸€æ¬¡æäº¤ï¼š 1234567891011$ git statusOn branch update_gitignoreYour branch is up to date with &#x27;origin/master&#x27;.Changes not staged for commit: (use &quot;git add &lt;file&gt;...&quot; to update what will be committed) (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory) modified: .gitignore$ git add .gitignore$ git commit -s æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åå°†ä¼šå¼¹å‡ºç¼–è¾‘æ¡†ç”¨æ¥ç¼–å†™æäº¤ä¿¡æ¯ã€‚ä¸»é¢˜è¡Œè¦å°‘äº 50 ä¸ªå­—ç¬¦ï¼Œç„¶åæ˜¯ä¸€ä¸ªç©ºè¡Œï¼ˆå¿…é¡»ï¼‰ï¼Œç„¶åæ˜¯æ‚¨çš„æäº¤æ¶ˆæ¯çš„æ­£æ–‡ã€‚è¯·è®°ä½è¦æ˜ç¡®å¹¶æä¾›æ›´æ”¹çš„åŸå› ï¼ˆç†ç”±ï¼‰ï¼Œç‰¹åˆ«æ˜¯å¦‚æœæ— æ³•ä»æ‚¨çš„å·®å¼‚ä¸­è½»æ¾ç†è§£ä½ çš„æäº¤å†…å®¹æ—¶ã€‚ç¼–è¾‘æäº¤æ¶ˆæ¯æ—¶ï¼Œä¸è¦åˆ é™¤ä¸Šé¢ Signed-off-by æ·»åŠ çš„ trailerã€‚ï¼ˆç”±ä¸Šé¢å‘½ä»¤-så‚æ•°ç”Ÿæˆï¼‰ã€‚ å…¶ä»–è§„èŒƒè¯·è¯¦ç»†æŸ¥é˜…ç›®æ ‡ç¤¾åŒºçš„æäº¤è§„èŒƒï¼Œå¦‚OpenSBIè¦æ±‚ä¸»é¢˜è¡Œéœ€è¦ä»¥ lib:ï¼Œ platform:, firmware:, docs:, utils: æˆ–è€… top:ä¸ºå‰ç¼€ï¼Œä¿®æ”¹.gitignoreå±äºtopèŒƒç•´ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å…¶åŠ åœ¨ä¸»é¢˜è¡Œä¸Šã€‚ 12345top: filter .vscode folderFilter the workspace&#x27;s &#x27;.vscode&#x27; directory by adding &#x27;/.vscode/&#x27; to the.gitignore file.Signed-off-by: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt; ç»§ç»­ç”¨ git show æ£€æŸ¥æ‚¨çš„æ–°æäº¤ã€‚å°¤å…¶ä¸è¦å‡ºç°ä¸éœ€è¦åœ¨æœ¬æ¬¡æäº¤çš„å†…å®¹ã€‚é€šå¸¸ä½¿ç”¨ä¸åŒçš„ IDE éƒ½å¯èƒ½ä¼šæ— æ„é—´ç”Ÿæˆä¸€äº›é…ç½®æ–‡ä»¶ç­‰ï¼Œè¯·æ³¨æ„å°†å…¶å‰”é™¤ã€‚ 1234567891011121314151617181920commit 5dc340c29979d4c5d8c4d5a6e881348239714434 (HEAD -&gt; update_gitignore)Author: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;Date: Fri Nov 18 16:06:21 2022 +0800 top: filter .vscode folder Filter the workspace&#x27;s &#x27;.vscode&#x27; directory by adding &#x27;/.vscode/&#x27; to the.gitignore file. Signed-off-by: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;diff --git a/.gitignore b/.gitignoreindex 95692bb..90cf552 100644--- a/.gitignore+++ b/.gitignore@@ -10,3 +10,5 @@ install/ # Development friendly files tags cscope*++/.vscode/ è¿‡æ»¤ .cacheä¸ä¸Šä¸€èŠ‚æ­¥éª¤ç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨.gitignoreæ–‡ä»¶ä¸­å†æ·»åŠ ä¸€ä¸ª/.cache/å­—æ®µç”¨æ¥è¿‡æ»¤.cacheæ–‡ä»¶å¤¹ã€‚ 123456789101112131415# Object files*.o*.a*.dep#Build &amp; install directoriesbuild/install/# Development friendly filestagscscope*/.vscode//.cache/ æ·»åŠ å®Œæˆ‘ä»¬å°±å³ä½¿ä¿å­˜å·¥ä½œè¿›åº¦ï¼Œæ–°ç”Ÿæˆä¸€ä¸ªcommitã€‚ 12git add .gitignoregit commit -s 12345top: filter .cache folderFilter the workspace&#x27;s &#x27;.cache&#x27; directory by adding &#x27;/.cache/&#x27; to the.gitignore file.Signed-off-by: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt; ä»¥ä¸Šæˆ‘ä»¬å°±å·²ç»å‡†å¤‡å¥½æ‰€æœ‰çš„ä»£ç äº†ï¼Œåœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹å¯èƒ½ä¿®æ”¹çš„æ˜¯.cæˆ–è€….hç­‰æºæ–‡ä»¶ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬èƒ½å¤Ÿä½¿ä»£ç ç¼–è¯‘ã€è¿è¡Œå¹¶ä¸”æµ‹è¯•é€šè¿‡åå†æäº¤ã€‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæäº¤æµç¨‹ï¼Œå°±æ²¡æœ‰æ¶‰åŠè¿™äº›æ­¥éª¤ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦å‡†å¤‡æäº¤çš„è¡¥ä¸æ–‡ä»¶äº†ã€‚ å‡†å¤‡æäº¤è¡¥ä¸OpenSBI é¡¹ç›®æ˜¯é€šè¿‡ç”µå­é‚®ä»¶å‘é€è¡¥ä¸æ¥è¿›è¡Œä»£ç å®¡æŸ¥çš„ï¼Œå½“è¡¥ä¸å‡†å¤‡å¥½å¹¶å¾—åˆ°ç¤¾åŒºè®¤å¯åï¼Œç»´æŠ¤è€…å°±ä¼šåº”ç”¨ï¼ˆApplyï¼‰è¿™äº›è¡¥ä¸ã€‚OpenSBI é¡¹ç›®ä¸æ¥å—æ¥è‡ª Pull Request çš„è´¡çŒ®ï¼Œè€Œä¸”é€šè¿‡ç”µå­é‚®ä»¶å‘é€çš„è¡¥ä¸éœ€è¦ä»¥æŒ‡å®šçš„æ–¹å¼è¿›è¡Œå®¡æ ¸ã€‚ åœ¨ç ”ç©¶å¦‚ä½•å°†ä½ çš„æäº¤è½¬åŒ–ä¸ºç”µå­é‚®ä»¶çš„è¡¥ä¸ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹æœ€ç»ˆçš„ç»“æœï¼Œå³è¡¥ä¸ç³»åˆ—ï¼ˆPatch Seriesï¼‰æ˜¯ä»€ä¹ˆæ ·å­ã€‚ä¸‹é¢æ˜¯ OpenSBI é‚®ä»¶åˆ—è¡¨å­˜æ¡£çš„ç½‘é¡µç•Œé¢ä¸Šçš„è¡¥ä¸ç³»åˆ—çš„æ‘˜è¦è§†å›¾çš„ä¸€ä¸ªä¾‹å­ã€‚ æˆ‘ä»¬å¯ä»¥æ³¨æ„å‡ ç‚¹ï¼š æ¯æ¬¡æäº¤éƒ½æ˜¯ä»¥å•ç‹¬çš„é‚®ä»¶å½¢å¼å‘é€ï¼Œæäº¤ä¿¡æ¯çš„æ ‡é¢˜ä¸ºä¸»é¢˜ï¼Œå‰ç¼€ä¸º[PATCH i/n]ï¼Œä»£è¡¨nä¸ªæäº¤ç³»åˆ—ä¸­çš„ç¬¬ i ä¸ªæäº¤ã€‚ æ¯ä¸ªè¡¥ä¸éƒ½æ˜¯ä½œä¸ºå¯¹cover letterçš„å›å¤ï¼Œcover letterçš„å‰ç¼€ä¸º[PATCH 0/n]ï¼Œåºå·ä¸º 0 çš„æ ‡é¢˜ã€‚ è¡¥ä¸ç³»åˆ—çš„åç»­è¿­ä»£è¢«æ ‡è®°ä¸º PATCH v2ã€PATCH v3ï¼Œç­‰ç­‰ï¼Œä»¥ä»£æ›¿ PATCHã€‚ä¾‹å¦‚ï¼Œ[PATCH v2 1/3]å°†æ˜¯ç¬¬äºŒæ¬¡è¿­ä»£ä¸­ä¸‰ä¸ªè¡¥ä¸çš„ç¬¬ä¸€ä¸ªè¡¥ä¸ã€‚æ¯æ¬¡è¿­ä»£éƒ½æœ‰ä¸€ä¸ªæ–°çš„cover letterï¼ˆå¦‚ä¸Šé¢çš„[PATCH v2 0/3]ï¼‰ï¼Œæœ¬èº«å°±æ˜¯å¯¹å‰ä¸€æ¬¡è¿­ä»£çš„cover letterçš„å›å¤ï¼ˆä¸‹é¢ä¼šæœ‰æ›´å¤šä»‹ç»ï¼‰ã€‚ æ³¨ï¼šå•ä¸€è¡¥ä¸çš„ä¸»é¢˜æ˜¯ä»¥[PATCH]ã€[PATCH v2]ç­‰å‘é€çš„ï¼Œæ²¡æœ‰ i/n ç¼–å·ã€‚å¦‚ä¸Šå›¾ä¸­çš„ç¬¬å››ä¸ª Patchï¼Œå°±æ˜¯ä¸€ä¸ªå•ä¸€è¡¥ä¸ã€‚ ä»€ä¹ˆæ˜¯ cover letteré™¤äº†ç»™æ¯ä¸ªè¡¥ä¸å‘ä¸€å°é‚®ä»¶å¤–ï¼ŒOpenSBI ç¤¾åŒºè¿˜å¸Œæœ›ä½ çš„è¡¥ä¸èƒ½é™„å¸¦ä¸€å° cover letterã€‚è¿™æ˜¯ä¿®æ”¹æäº¤çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå› ä¸ºå®ƒæ¦‚æ‹¬äº†ä½ æƒ³è¦åšä»€ä¹ˆï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Œæ¯”ä»…ä»…çœ‹ä½ çš„è¡¥ä¸æ›´æ˜æ˜¾ã€‚ ä½ çš„ cover letter çš„æ ‡é¢˜åº”è¯¥æ˜¯èƒ½ç®€æ´åœ°æ¶µç›–ä½ æ•´ä¸ªä¸»é¢˜åˆ†æ”¯çš„ç›®çš„ã€‚å°±åƒæˆ‘ä»¬çš„æäº¤ä¿¡æ¯æ ‡é¢˜ä¸€æ ·ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ç³»åˆ—æ ‡é¢˜ã€‚ 1Update gitignore --- cover letter çš„æ­£æ–‡æ˜¯ç”¨æ¥ç»™è¯„å®¡å‘˜æä¾›é¢å¤–çš„èƒŒæ™¯ã€‚ä¸€å®šè¦è§£é‡Šä»»ä½•ä½ çš„è¡¥ä¸è‡ªå·±æ²¡æœ‰è¯´æ¸…æ¥šçš„ä¸œè¥¿ï¼Œä½†è¦è®°ä½ï¼Œç”±äº cover letter æ²¡æœ‰è®°å½•åœ¨æäº¤å†å²ä¸­ï¼Œä»»ä½•å¯èƒ½å¯¹æœªæ¥ç‰ˆæœ¬åº“å†å²çš„è¯»è€…æœ‰ç”¨çš„ä¸œè¥¿ä¹Ÿåº”è¯¥åœ¨ä½ çš„æäº¤ä¿¡æ¯ä¸­å‡ºç°ã€‚ ä¸‹æ–‡æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ç”Ÿæˆ cover letter ä»¥åŠå¦‚ä½•å¡«å†™ cover letterã€‚ ç”¨ git send-email å‘é€è¡¥ä¸å‰ææ¡ä»¶ - è®¾ç½® git send-emailå¯¹ send-email çš„é…ç½®ä¼šæ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿå’Œç”µå­é‚®ä»¶ä¾›åº”å•†è€Œæœ‰æ‰€ä¸åŒï¼Œé…ç½®å¯ä»¥å‚è€ƒæ–‡æ¡£å¦‚ä½•ä½¿ç”¨ git-send-mail ç»™å¼€æºç¤¾åŒºæäº¤ Patch - å¦‚äº‘æ³Šã€‚ å‡†å¤‡åˆå§‹è¡¥ä¸é›†åœ¨å‡†å¤‡é‚®ä»¶æœ¬èº«ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡è¡¥ä¸ã€‚ 1git format-patch --cover-letter -o update_gitignore/ --base=auto update_gitignore@&#123;u&#125;..update_gitignore --cover-letter é€‰é¡¹å‘Šè¯‰ format-patch ä¸ºä½ åˆ›å»ºä¸€ä¸ª cover letter æ¨¡æ¿ã€‚åœ¨ä½ å‡†å¤‡å‘é€ä¹‹å‰ï¼Œä½ å°†éœ€è¦å¡«å†™è¯¥æ¨¡æ¿ã€‚ -o update_gitignore/ é€‰é¡¹å‘Šè¯‰ format-patch æŠŠè¡¥ä¸æ–‡ä»¶æ”¾åˆ°ç›®å½•update_gitignoreä¸­ã€‚è¿™æ ·å‘é€å¤šä¸ªcommitæ—¶å°±å¯ä»¥ä½¿ç”¨å‘½ä»¤ä¸€æ¬¡æ€§å‘é€ï¼Œå› ä¸º git send-email å¯ä»¥æ¥æ”¶ä¸€ä¸ªç›®å½•å¹¶ä»é‚£é‡Œå‘é€æ‰€æœ‰è¡¥ä¸ã€‚ --base=auto é€‰é¡¹å‘Šè¯‰å‘½ä»¤è®°å½•â€åŸºæœ¬æäº¤â€ï¼Œæ¥æ”¶è€…å°†åœ¨æ­¤åŸºç¡€ä¸Šåº”ç”¨è¡¥ä¸ç³»åˆ—ã€‚è‡ªåŠ¨å€¼å°†ä½¿ format-patch è‡ªåŠ¨è®¡ç®—åŸºæœ¬æäº¤ï¼Œå³è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯çš„æœ€æ–°æäº¤å’ŒæŒ‡å®šä¿®è®¢èŒƒå›´çš„åˆå¹¶åŸºæ•°ã€‚ update_gitignore@&#123;u&#125;..update_gitignore é€‰é¡¹å‘Šè¯‰ format-patch ä¸ºä½ åœ¨ update_gitignore åˆ†æ”¯ä¸Šåˆ›å»ºçš„æäº¤ç”Ÿæˆè¡¥ä¸ï¼Œå› ä¸ºå®ƒæ˜¯ä»ä¸Šæ¸¸åˆ†å‰å‡ºæ¥çš„ã€‚@&#123;u&#125;çš„æ„æ€å°±æ˜¯ä»åˆ†å‰å¼€å§‹åˆ°æœ€æ–°çš„æäº¤ã€‚ æ‰§è¡Œå®Œè¯¥å‘½ä»¤æˆ‘ä»¬çœ‹çœ‹ç”Ÿæˆäº†å“ªäº›å†…å®¹ã€‚ 123456789101112$ git statusOn branch update_gitignoreYour branch is ahead of &#x27;origin/master&#x27; by 2 commits. (use &quot;git push&quot; to publish your local commits)Untracked files: (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed) update_gitignore/$ ls update_gitignore 0000-cover-letter.patch 0001-top-filter-.vscode-folder.patch 0002-top-filter-.cache-folder.patch è¯¥å‘½ä»¤å°†ä¸ºæ¯æ¬¡æäº¤åˆ¶ä½œä¸€ä¸ªè¡¥ä¸æ–‡ä»¶ã€‚è¿è¡Œåï¼Œæ‚¨å¯ä»¥ç”¨æ‚¨å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨çœ‹ä¸€ä¸‹æ¯ä¸ªè¡¥ä¸ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ã€‚å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†ä¸€ä¸ª-oå‚æ•°ä¸­çš„update_gitignoreæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ cover letter å’Œä¸Šæ–‡æˆ‘ä»¬åšçš„ä¸¤æ¬¡æäº¤å¯¹åº”çš„è¡¥ä¸æ–‡ä»¶ã€‚ åˆ†åˆ«æ‰“å¼€ä»–ä»¬ï¼Œç»“æœå¦‚ä¸‹ï¼š 123456789101112131415161718From 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001From: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;Date: Fri, 18 Nov 2022 16:41:32 +0800Subject: [PATCH 0/2] *** SUBJECT HERE ****** BLURB HERE ***Dominic Zhang (2): top: filter .vscode folder top: filter .cache folder .gitignore | 3 +++ 1 file changed, 3 insertions(+)base-commit: 880685586dcee950d209088a461443449a1693ce-- 2.17.1 12345678910111213141516171819202122232425From 5dc340c29979d4c5d8c4d5a6e881348239714434 Mon Sep 17 00:00:00 2001From: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;Date: Fri, 18 Nov 2022 16:06:21 +0800Subject: [PATCH 1/2] top: filter .vscode folderFilter the workspace&#x27;s &#x27;.vscode&#x27; directory by adding &#x27;/.vscode/&#x27; to the.gitignore file.Signed-off-by: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;--- .gitignore | 2 ++ 1 file changed, 2 insertions(+)diff --git a/.gitignore b/.gitignoreindex 95692bb..90cf552 100644--- a/.gitignore+++ b/.gitignore@@ -10,3 +10,5 @@ install/ # Development friendly files tags cscope*++/.vscode/\\ No newline at end of file-- 2.17.1 123456789101112131415161718192021222324252627From 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001From: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;Date: Fri, 18 Nov 2022 16:20:37 +0800Subject: [PATCH 2/2] top: filter .cache folderFilter the workspace&#x27;s &#x27;.cache&#x27; directory by adding &#x27;/.cache/&#x27; to the.gitignore file.Signed-off-by: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;--- .gitignore | 3 ++- 1 file changed, 2 insertions(+), 1 deletion(-)diff --git a/.gitignore b/.gitignoreindex 90cf552..bf9d716 100644--- a/.gitignore+++ b/.gitignore@@ -11,4 +11,5 @@ install/ tags cscope* -/.vscode/\\ No newline at end of file+/.vscode/+/.cache/\\ No newline at end of file-- 2.17.1 æ³¨ï¼šå¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ --rfc å‚æ•°ï¼Œåœ¨ä½ çš„è¡¥ä¸ä¸»é¢˜å‰åŠ ä¸Š[RFC PATCH]ï¼Œè€Œä¸æ˜¯[PATCH]ã€‚RFC æ˜¯â€è¯·æ±‚è¯„è®ºâ€çš„æ„æ€ï¼Œè¡¨ç¤ºè™½ç„¶ä½ çš„ä»£ç è¿˜æ²¡æœ‰å‡†å¤‡å¥½æäº¤ï¼Œä½†ä½ æƒ³å¼€å§‹ä»£ç å®¡æŸ¥è¿‡ç¨‹ã€‚ä½ ä¹Ÿå¯èƒ½åœ¨åˆ—è¡¨ä¸­çœ‹åˆ°æ ‡æœ‰â€WIPâ€çš„è¡¥ä¸ï¼Œè¿™æ„å‘³ç€ä»–ä»¬è¿˜æ²¡æœ‰å®Œæˆï¼Œä½†å¸Œæœ›å®¡æŸ¥è€…èƒ½çœ‹çœ‹ä»–ä»¬ç›®å‰çš„æˆæœã€‚ä½ å¯ä»¥ç”¨--subject-prefix=WIPæ¥æ·»åŠ è¿™ä¸ªæ ‡å¿—ã€‚ æ£€æŸ¥å¹¶ç¡®ä¿ä½ çš„è¡¥ä¸å’Œ cover letter æ¨¡æ¿å­˜åœ¨äºä½ æŒ‡å®šçš„ç›®å½•ä¸­ï¼Œè¿™å°±å®Œæˆæ‰€æœ‰å‡†å¤‡äº†ã€‚ å‡†å¤‡é‚®ä»¶ç”±äºä½ åœ¨è°ƒç”¨ format-patch æ—¶ä½¿ç”¨äº†--cover-letterï¼Œä½ å·²ç»å‡†å¤‡å¥½äº†ä¸€ä¸ª cover letter æ¨¡æ¿ã€‚åœ¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€å®ƒã€‚ ä½ åº”è¯¥çœ‹åˆ°å·²ç»æœ‰ä¸€äº›æ ‡é¢˜å­˜åœ¨ã€‚æ£€æŸ¥ä½ çš„From:æ ‡é¢˜æ˜¯å¦æ­£ç¡®ã€‚ç„¶åä¿®æ”¹ä½ çš„Subject:ã€‚ ç¡®ä¿ä¿ç•™[PATCH 0/X]çš„éƒ¨åˆ†ï¼›è¿™æ˜¯å‘ Git ç¤¾åŒºè¡¨æ˜è¿™å°é‚®ä»¶æ˜¯ä¸€ä¸ªè¡¥ä¸ç³»åˆ—çš„å¼€å§‹ï¼Œè®¸å¤šå®¡æŸ¥è€…ä¼šæ ¹æ®è¿™ç§ç±»å‹çš„æ ‡è®°è¿‡æ»¤ä»–ä»¬çš„é‚®ä»¶ã€‚ æ¥ä¸‹æ¥ï¼Œä½ å¿…é¡»å¡«å†™ä½ çš„ cover letter çš„æ­£æ–‡ã€‚åŒæ ·ï¼Œå…³äºåº”åŒ…æ‹¬å“ªäº›å†…å®¹ï¼Œè§ä¸Šæ–‡ã€‚ æœ€åï¼Œä¿¡ä¸­ä¼šåŒ…æ‹¬ç”¨äºç”Ÿæˆè¡¥ä¸çš„ Git çš„ç‰ˆæœ¬ã€‚ä½ å¯ä»¥ä¸ç”¨ç®¡è¿™ä¸ªå­—ç¬¦ä¸²ã€‚ å®Œå–„åçš„ cover letter å¦‚ä¸‹ï¼š 123456789101112131415161718From 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001From: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;Date: Fri, 18 Nov 2022 16:41:32 +0800Subject: [PATCH 0/2] Update gitignorevscode is a very popular IDE, and it often needs to generate a.vscode. cache directory to hold workspace configuration files that should not be committed to a remote repository, so we made some modifications to the gitignore file to filter such directories.Dominic Zhang (2): top: filter .vscode folder top: filter .cache folder .gitignore | 3 +++ 1 file changed, 3 insertions(+)base-commit: 880685586dcee950d209088a461443449a1693ce-- 2.17.1 å‘é€é‚®ä»¶åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥æœ‰ä¸€ä¸ªç›®å½• update_gitignore/ï¼Œé‡Œé¢åŒ…å«ä½ çš„è¡¥ä¸å’Œä¸€å° cover letterã€‚æ˜¯æ—¶å€™æŠŠå®ƒå‘å‡ºå»äº†ï¼ä½ å¯ä»¥åƒè¿™æ ·å‘é€ã€‚ 1git send-email --to=target@example.com update_gitignore/*.patch æ³¨ï¼šè¯·æŸ¥çœ‹ git help send-email ä¸­çš„ä¸€äº›å…¶ä»–é€‰é¡¹ï¼Œä½ å¯èƒ½ä¼šå‘ç°è¿™äº›é€‰é¡¹å¾ˆæœ‰ä»·å€¼ï¼Œæ¯”å¦‚æ”¹å˜å›å¤åœ°å€æˆ–æ·»åŠ æ›´å¤šçš„æŠ„é€åœ°å€æˆ–å¯†é€åœ°å€ã€‚ æ³¨ï¼šå½“ä½ å‘é€ä¸€ä¸ªçœŸæ­£çš„è¡¥ä¸æ—¶ï¼Œå®ƒå°†è¢«å‘é€åˆ° opensbi@lists.infradead.org - ä½†è¯·ä¸è¦æŠŠä½ çš„è¡¥ä¸é›†ä»æ•™ç¨‹ä¸­å‘é€åˆ°çœŸæ­£çš„é‚®ä»¶åˆ—è¡¨ä¸­ï¼ç°åœ¨ä½ å¯ä»¥æŠŠå®ƒå‘é€ç»™ä½ è‡ªå·±ï¼Œä»¥ç¡®ä¿ä½ äº†è§£å®ƒçš„å½¢å¼ã€‚ åœ¨ä½ è¿è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œä½ ä¼šä¸ºæ¯ä¸ªå³å°†å‘å‡ºçš„è¡¥ä¸çœ‹åˆ°ä¸€ä¸ªäº¤äº’æç¤ºã€‚è¿™ç»™äº†ä½ æœ€åä¸€æ¬¡æœºä¼šæ¥ç¼–è¾‘æˆ–æ”¾å¼ƒå‘é€ä¸€äº›ä¸œè¥¿ï¼ˆä½†è¿˜æ˜¯é‚£å¥è¯ï¼Œä¸è¦ç”¨è¿™ç§æ–¹å¼ç¼–è¾‘ä»£ç ï¼‰ã€‚ä¸€æ—¦ä½ åœ¨è¿™äº›æç¤ºä¸‹æŒ‰ä¸‹ y æˆ– aï¼Œä½ çš„é‚®ä»¶å°±ä¼šè¢«å‘é€å‡ºå»ï¼Congratulation! å‘é€è¡¥ä¸çš„æ›´æ–°ç‰ˆæœ¬æœ¬èŠ‚å°†é‡ç‚¹ä»‹ç»å¦‚ä½•å‘é€ä½ çš„è¡¥ä¸é›†çš„ v2 ç‰ˆã€‚æˆ‘ä»¬å°†åœ¨ v2 ç‰ˆä¸­é‡æ–°ä½¿ç”¨æˆ‘ä»¬çš„ update_gitignore åˆ†æ”¯ã€‚åœ¨æˆ‘ä»¬åšä»»ä½•æ”¹åŠ¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªåä¸ºupdate_gitignore-v1çš„åˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯æ˜¯æˆ‘ä»¬æ²¡æœ‰åšæ–°çš„æ”¹åŠ¨çš„åˆ†æ”¯ã€‚è¿™æ ·åœ¨åé¢æˆ‘ä»¬å°±å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œå¯¹æ¯”å·®å¼‚ã€‚ 12git checkout update_gitignoregit branch update_gitignore-v1 åœ¨æ›´æ–°è¡¥ä¸æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ç¤¾åŒºçš„æ„è§åªè®©ä¿®æ”¹æœ€æ–°çš„ä¸€ä¸ªæäº¤ï¼Œä¸€ç§æ˜¯ä¿®æ”¹å†å²è®°å½•ä¸­çš„ commitã€‚æˆ‘ä»¬åˆ†åˆ«æ¥å¤„ç†è¿™ä¸¤ç§æƒ…å†µã€‚ å¦‚ä½•ä¿®æ”¹æœ€æ–°çš„æäº¤æ¯”å¦‚åªéœ€è¦ä¿®æ”¹top: filter .cache folderè¿™ä¸ª commitã€‚å› ä¸ºå®ƒåœ¨æˆ‘ä»¬çš„ä¿®æ”¹ä¸­æ˜¯æœ€æ–°çš„ commitï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹ä»£ç ä¿®æ”¹ã€‚æ¯”å¦‚æˆ‘ä»¬åšä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼Œç»™ä¿®æ”¹çš„å†…å®¹/.cacheåŠ ä¸ªæ³¨é‡Šã€‚ 1234567891011121314151617# Object files*.o*.a*.dep#Build &amp; install directoriesbuild/install/# Development friendly filestagscscope*/.vscode/# Cache file/.cache/ 12git add .gitignoregit commit --amend æ³¨æ„ï¼æˆ‘ä»¬ä¸éœ€è¦ç”Ÿæˆæ–°çš„commitï¼Œæ‰€ä»¥ä½¿ç”¨ --amendå‚æ•°ä¿®æ”¹æœ€æ–°çš„commit messageå³å¯ã€‚æ‰§è¡Œè¿™æ¡å‘½ä»¤ä¼šå¼¹å‡ºç¼–è¾‘çª—å£ï¼Œå› ä¸ºä¿®æ”¹å†…å®¹å·²ç»å¾ˆæ˜ç¡®ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨commit messageé‡Œå†åšé¢å¤–è¯´æ˜ï¼Œç›´æ¥ä¿å­˜é€€å‡ºå³å¯ã€‚å¦‚æœä¿®æ”¹å†…å®¹æ¯”è¾ƒå¤§ï¼Œéœ€è¦é‡æ–°ç¼–å†™commit messageã€‚ ä»¥ä¸Šæˆ‘ä»¬å°±å®Œæˆäº†ä¸€æ¬¡æ›´æ–°ã€‚ å¦‚ä½•ä¿®æ”¹å†å²è®°å½•ä¸­çš„æäº¤å¦‚æœå¾ˆä¸å·§ï¼Œç¤¾åŒºè¦æ±‚ä¿®æ”¹çš„æ˜¯top: filter .vscode folderè¿™ä¸ªæäº¤çš„å†…å®¹ï¼Œé‚£æ€ä¹ˆåŠï¼Œå› ä¸ºå®ƒä¸æ˜¯æœ€æ–°çš„æäº¤ï¼Œè€Œæ˜¯ä¸Šä¸€ä¸ªæäº¤ï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨git commit --amendæ¥ç›´æ¥å¯¹ä»–ä¿®æ”¹ï¼Œå¥½åœ¨ Git ååˆ†å¼ºå¤§ï¼Œä¸éœ€è¦æˆ‘ä»¬resetå°±å¯ä»¥å®Œæˆè¿™æ ·çš„å·¥ä½œã€‚ åŒæ ·æˆ‘ä»¬ä¹Ÿåšä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼Œä¸º/.vscode/ä¹Ÿæ·»åŠ ä¸€ä¸ªæ³¨é‡Šã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°git rebaseè¿™ä¸ªå¼ºå¤§çš„å‘½ä»¤ã€‚æœ¬æ–‡åªä»‹ç»ä½¿ç”¨åˆ°çš„åŠŸèƒ½ï¼Œå…¶ä»–åŠŸèƒ½éœ€è¦å¤§å®¶è‡ªè¡Œæ‘¸ç´¢ã€‚ 1git rebase -i è¿™æ¡å‘½ä»¤ä¼šå¼¹å‡ºç¼–è¾‘çª—å£ï¼Œ-iå‚æ•°è¡¨ç¤ºä»¥äº¤äº’å¼æ–¹å¼è¿›è¡Œå˜åŸºï¼ˆrebaseï¼‰æ“ä½œã€‚å¼¹å‡ºçª—å£å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718192021pick 7175772 top: filter .vscode folderpick 52b63f3 top: filter .cache folder# Rebase 8806855..52b63f3 onto 8806855 (2 commands)## Commands:# p, pick = use commit# r, reword = use commit, but edit the commit message# e, edit = use commit, but stop for amending# s, squash = use commit, but meld into previous commit# f, fixup = like &quot;squash&quot;, but discard this commit&#x27;s log message# x, exec = run command (the rest of the line) using shell# d, drop = remove commit## These lines can be re-ordered; they are executed from top to bottom.## If you remove a line here THAT COMMIT WILL BE LOST.## However, if you remove everything, the rebase will be aborted.## Note that empty commits are commented out çª—å£ä¼šæ˜¾ç¤ºæ‰€æœ‰æœªæäº¤åˆ°è¿œç¨‹çš„ commitï¼Œä¸‹é¢çš„æ³¨é‡Šä¹Ÿå‘Šè¯‰äº†æˆ‘ä»¬è¯¥å¦‚ä½•ä½¿ç”¨ã€‚æˆ‘ä»¬æ‰¾åˆ°editçš„è¡Œï¼Œå¯ä»¥çœ‹åˆ°è§£é‡Šä¸ºä½¿ç”¨å½“å‰çš„ commitï¼Œä½†æ˜¯åœ¨å˜åŸºè¿‡ç¨‹ä¸­ä¼šåœä¸‹æ¥è®©æˆ‘ä»¬ä¿®æ”¹ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬ç¼–è¾‘å½“å‰çš„å†…å®¹å¦‚ä¸‹ï¼š 12edit 7175772 top: filter .vscode folderpick 52b63f3 top: filter .cache folder è¡¨ç¤ºæˆ‘ä»¬éœ€è¦ç¼–è¾‘å†å²è®°å½•ä¸­çš„top: filter .vscode folderæäº¤ï¼Œä½†æ˜¯å¦ä¸€ä¸ª commit æˆ‘ä»¬ä¸åšæ”¹å˜ã€‚ä¿å­˜å¹¶é€€å‡ºå½“å‰çª—å£åï¼Œä¼šæœ‰å¦‚ä¸‹æç¤ºã€‚ 12345678Stopped at 7175772... top: filter .vscode folderYou can amend the commit now, with git commit --amend Once you are satisfied with your changes, run git rebase --continue æ ¹æ®æç¤ºï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€ç³»åˆ—ä¿®æ”¹äº†ï¼Œä¿®æ”¹å®Œä½¿ç”¨git commit --amendä¿å­˜ï¼Œå¦‚æœä¸€åˆ‡ç¬¦åˆè‡ªå·±è¦æ±‚äº†ï¼Œå†ä½¿ç”¨git rebase --continueå®Œæˆå˜åŸºæ“ä½œã€‚ æˆ‘ä»¬å…ˆä¿®æ”¹ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å·²ç»å›åˆ°äº†æ²¡æœ‰/.cache/çš„çŠ¶æ€ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€è¡Œæ³¨é‡Šï¼š 123456789101112131415# Object files*.o*.a*.dep#Build &amp; install directoriesbuild/install/# Development friendly filestagscscope*# VSCode config file/.vscode/ 12git add .gitignoregit commit --amend åŒæ ·å¼¹å‡ºçª—å£åæˆ‘ä»¬ç›´æ¥ä¿å­˜é€€å‡ºï¼Œå¦‚æœä¿®æ”¹å¹…åº¦è¾ƒå¤§ï¼Œå¯ä»¥è¿›ä¸€æ­¥è¡¥å……è¯´æ˜ã€‚ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç»§ç»­å®Œæˆå˜åŸºã€‚ 1git rebase --continue æ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸ä»…ä¿®æ”¹äº†å†å²è®°å½•ä¸­çš„ commitï¼Œè¿˜ä¿è¯äº†æœ€æ–°çš„ commit æ²¡æœ‰ä¸¢å¤±æˆ–è€…æ›´æ”¹ã€‚ å‡†å¤‡æ›´æ–°ç‰ˆæœ¬çš„è¡¥ä¸é›†1234 $ git format-patch -v2 --cover-letter -o update_gitignore/ master..update_gitignore-v1update_gitignore/v2-0000-cover-letter.patchupdate_gitignore/v2-0001-top-filter-.vscode-folder.patchupdate_gitignore/v2-0002-top-filter-.cache-folder.patch --range-diff master..update_gitignore-v1 å‚æ•°å‘Šè¯‰ format-patch åœ¨ cover letter ä¸­åŒ…æ‹¬ update_gitignore-v1 å’Œ update_gitignore ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚ã€‚è¿™æœ‰åŠ©äºå‘Šè¯‰è¯„å®¡äººä½ çš„ v1 å’Œ v2 è¡¥ä¸ä¹‹é—´çš„å·®å¼‚ã€‚ -v2 å‚æ•°å‘Šè¯‰ format-patch å°†ä½ çš„è¡¥ä¸è¾“å‡ºä¸º v2 ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°ä½ çš„ v2 ç‰ˆè¡¥ä¸éƒ½è¢«å‘½åä¸º v2-000n-my-commit-subject.patchã€‚-v2 ä¹Ÿä¼šå°†ä½ çš„è¡¥ä¸æ ¼å¼åŒ–ï¼Œåœ¨å‰é¢åŠ ä¸Š[PATCH v2]ï¼Œè€Œä¸æ˜¯[PATCH]ã€‚ è¿è¡Œæ­¤å‘½ä»¤åï¼Œformat-patch ä¼šå°†è¡¥ä¸è¾“å‡ºåˆ° update_gitignore/ ç›®å½•ï¼Œä¸ v1 ç‰ˆçš„è¡¥ä¸ä¸€èµ·ã€‚ä½¿ç”¨ä¸€ä¸ªç›®å½•å¯ä»¥æ–¹ä¾¿åœ¨æ ¡å¯¹ v2 è¡¥ä¸æ—¶å‚è€ƒæ—§çš„ v1 è¡¥ä¸ï¼Œä½†ä½ éœ€è¦æ³¨æ„åªå‘é€ v2 è¡¥ä¸ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ update_gitignore/v2-.patchè¿™æ ·çš„æ¨¡å¼ï¼ˆè€Œä¸æ˜¯ update_gitignore/.patchï¼Œè¿™å°†åŒ¹é… v1 å’Œ v2 è¡¥ä¸ï¼‰ã€‚ å†æ¬¡ç¼–è¾‘ä½ çš„ cover letterã€‚ç°åœ¨æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ—¶é—´æ¥æåŠä½ çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬å’Œç°åœ¨æœ‰ä»€ä¹ˆä¸åŒï¼Œå¦‚æœå®ƒæ˜¯é‡è¦çš„ä¸œè¥¿ã€‚ä½ ä¸éœ€è¦åœ¨ä½ çš„ç¬¬äºŒå° cover letter ä¸­ä½¿ç”¨å®Œå…¨ç›¸åŒçš„å†…å®¹ï¼›é‡ç‚¹æ˜¯å‘å®¡æŸ¥äººå‘˜è§£é‡Šä½ æ‰€åšçš„å¯èƒ½ä¸é‚£ä¹ˆæ˜æ˜¾çš„å˜åŒ–ã€‚ æˆ‘ä»¬å°±ç®€å•çš„å†™ä¸€ä¸‹æ·»åŠ äº†æ³¨é‡Šã€‚ 12345678910111213141516From 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001From: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;Date: Fri, 18 Nov 2022 19:35:06 +0800Subject: [PATCH v2 0/2] Update gitignoreAdd a comment for the folder name.Dominic Zhang (2): top: filter .vscode folder top: filter .cache folder .gitignore | 3 +++ 1 file changed, 3 insertions(+)-- 2.17.1 å‘é€æ›´æ–°ç‰ˆæœ¬æ—¶ä½ éœ€è¦å°†æ–°ç‰ˆæœ¬æŠ„é€ç»™æå‡ºå»ºè®®çš„äººï¼Œä½ å¯ä»¥åœ¨ä½ çš„ cover letter ä¸­ç›´æ¥æ·»åŠ è¿™äº›æŠ„é€è¡Œï¼Œåœ¨ Subject è¡Œä¸Šé¢å†™ä¸Šè¿™æ ·ä¸€è¡Œã€‚ 1CC: Name &lt;name@example.com&gt; ä¾‹å¦‚ï¼ŒæŠŠæ›´æ–°çš„é‚®ä»¶æŠ„é€ç»™æˆ‘è‡ªå·±ï¼š 1234567891011121314151617From 30614e5469be4a2f930cca570836627a4e91f1d1 Mon Sep 17 00:00:00 2001From: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;CC: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;Date: Fri, 18 Nov 2022 19:35:06 +0800Subject: [PATCH v2 0/2] Update gitignoreAdd a comment for the folder name.Dominic Zhang (2): top: filter .vscode folder top: filter .cache folder .gitignore | 3 +++ 1 file changed, 3 insertions(+)-- 2.17.1 ç°åœ¨å†æ¬¡å‘é€ç”µå­é‚®ä»¶ï¼Œæ³¨æ„ä½ ä¼ å…¥çš„å‚æ•°ã€‚ 1git send-email --to target@example.com update_gitignore/v2-*.patch æ­å–œä½ å®Œæˆäº†ä¸€æ¬¡è¡¥ä¸ç‰ˆæœ¬æ›´æ–°ã€‚ å¯¹äºä¸€äº›ç¤¾åŒºï¼Œè¦æ±‚æ›´æ–°çš„ç‰ˆæœ¬éœ€è¦åœ¨åŒä¸€ä¸ª thread ä¸Šè¿›è¡Œã€‚å¦‚ä¸‹ç¤ºä¾‹è¿™æ ·ï¼š 1234567[PATCH 0/2] Here is what I did... [PATCH 1/2] Clean up and tests [PATCH 2/2] Implementation [PATCH v2 0/3] Here is a reroll [PATCH v2 1/3] Clean up [PATCH v2 2/3] New tests [PATCH v2 3/3] Implementation å°±æ˜¯æ›´æ–°çš„ç‰ˆæœ¬éœ€è¦å…³è”åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè€Œä¸èƒ½ä½œä¸ºå•ç‹¬çš„ä¸€ä¸ªåˆ—è¡¨ã€‚ ä½ è¿˜éœ€è¦å»æ‰¾åˆ°ä½ ä¹‹å‰çš„ cover letter çš„ Message-Idã€‚ä½ å¯ä»¥åœ¨å‘é€ç¬¬ä¸€ä¸ªè¡¥ä¸ç³»åˆ—æ—¶ï¼Œä» git send-email çš„è¾“å‡ºä¸­è®°ä¸‹å®ƒã€‚ä¾‹å¦‚ï¼š 123456789101112131415$ git send-email --to Dominic Zhang@gmail.com update_gitignore/v2-*.patch update_gitignore/v2-0000-cover-letter.patchupdate_gitignore/v2-0001-top-filter-.vscode-folder.patchupdate_gitignore/v2-0002-top-filter-.cache-folder.patch(mbox) Adding cc: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt; from line &#x27;From: Dominic Zhang &lt;Dominic Zhang@gmail.com&gt;&#x27;(mbox) Adding cc: Dominic Zhang &lt;254758318@qq.com&gt; from line &#x27;CC: Dominic Zhang &lt;254758318@qq.com&gt;&#x27;From: Dominic Zhang@gmail.comTo: Dominic Zhang@gmail.comCc: Dominic Zhang &lt;254758318@qq.com&gt;Subject: [PATCH v2 0/2] Update gitignoreDate: Fri, 18 Nov 2022 19:54:54 +0800Message-Id: &lt;20221118115456.2242-1-Dominic Zhang@gmail.com&gt;X-Mailer: git-send-email 2.17.1 ä½ ä¹Ÿå¯ä»¥ä»ç¤¾åŒºçš„é‚®ç®±åˆ—è¡¨ä¸­æ‰¾åˆ° Message IDï¼Œå› ä¸º OpenSBI ä¸è¦æ±‚åœ¨åŒä¸€ä¸ª thread å›å¤ï¼Œæ‰€ä»¥æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¿™é‡Œä»¥Git ç¤¾åŒºçš„é‚®ç®±åˆ—è¡¨ä¸ºä¾‹ã€‚éšä¾¿ç‚¹å‡»ä¸€ä¸ªè¡¥ä¸ä¸»é¢˜ï¼Œåœ¨é¡µé¢ä¸­æ‰¾åˆ°permalinkæˆ–è€…rawï¼Œç‚¹å‡»æ‰“å¼€å³å¯æ‰¾åˆ° Message ID ä¿¡æ¯ã€‚ å®ƒçš„æ ¼å¼ä¸€èˆ¬å¦‚ä¸‹ï¼š 1Message-Id: &lt;foo.12345.author@example.com&gt; å¦‚æœè¦å‘é€æ›´æ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æ‰¾åˆ°ä¸Šä¸€ç‰ˆæœ¬çš„ Message IDã€‚å¦‚å‘é€çš„æ˜¯ V3 ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ° V2 ç‰ˆæœ¬çš„ Message IDã€‚å¹¶ä¸”åœ¨å‘é€é‚®ä»¶æ—¶æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š 123$ git send-email --to Dominic Zhang@gmail.com --in-reply-to=&quot;&lt;foo.12345.author@example.com&gt;&quot; update_gitignore/v2-*.patch åªæœ‰ä¸€ä¸ª Patch çš„æ›´æ”¹åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ çš„éå¸¸å°çš„å˜åŒ–å¯èƒ½åªåŒ…æ‹¬ä¸€ä¸ªè¡¥ä¸ã€‚è¿™æ—¶ï¼Œä½ åªéœ€è¦å‘é€ä¸€å°é‚®ä»¶ã€‚ä½ çš„æäº¤ä¿¡æ¯åº”è¯¥å·²ç»å¾ˆæœ‰æ„ä¹‰äº†ï¼Œä½ åªéœ€è¦ç”Ÿæˆè¡¥ä¸æ–‡ä»¶å°±å¯ä»¥å‘é€äº†ã€‚ 1git format-patch -o update_gitignore/ HEAD^ HEAD^å‚æ•°è¡¨ç¤ºç”Ÿæˆä¸ä¸Šä¸€ä¸ªæäº¤ä¹‹é—´çš„å·®å¼‚ã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"},{"name":"OpenSBI","slug":"OpenSBI","permalink":"http://example.com/tags/OpenSBI/"}]},{"title":"æ›´æ¢ Debian è½¯ä»¶æ›´æ–°æº","slug":"Linuxæ›´æ¢Debianè½¯ä»¶æ›´æ–°æº","date":"2022-11-05T01:27:52.000Z","updated":"2022-11-20T07:03:29.732Z","comments":true,"path":"2022/11/05/Linuxæ›´æ¢Debianè½¯ä»¶æ›´æ–°æº/","link":"","permalink":"http://example.com/2022/11/05/Linux%E6%9B%B4%E6%8D%A2Debian%E8%BD%AF%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%BA%90/","excerpt":"","text":"ç¡®è®¤ Debian ç‰ˆæœ¬12345678910$ cat /etc/os-release PRETTY_NAME=&quot;Debian GNU/Linux 10 (buster)&quot;NAME=&quot;Debian GNU/Linux&quot;VERSION_ID=&quot;10&quot;VERSION=&quot;10 (buster)&quot;VERSION_CODENAME=busterID=debianHOME_URL=&quot;https://www.debian.org/&quot;SUPPORT_URL=&quot;https://www.debian.org/support&quot;BUG_REPORT_URL=&quot;https://bugs.debian.org/&quot; æ‹¬å·é‡Œçš„busterå°±æ˜¯ç‰ˆæœ¬ä¿¡æ¯ã€‚ è·å–é•œåƒåœ°å€æ‰“å¼€debian | æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼Œé€‰æ‹©busterç‰ˆæœ¬ï¼Œå¤åˆ¶æ‰€æœ‰é•œåƒåœ°å€ã€‚ 1234567891011# é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Šdeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-freedeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-freedeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-freedeb https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free å¤‡ä»½åŸæ–‡ä»¶è¿™ä¹Ÿç®—æ˜¯ç³»ç»Ÿæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜æ˜¯ä¿é™©ä¸€ç‚¹ï¼Œå‡ºé”™äº†å†æ”¹å›æ¥ã€‚ 1sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup æ‰“å¼€å¹¶ä¿®æ”¹1sudo vim /etc/apt/sources.list vimç”¨çš„ä¸ä¹ æƒ¯çš„ä¼°è®¡ä¼šå’Œæˆ‘ä¸€æ ·æ‰¾å…¨é€‰å†…å®¹æ€ä¹ˆæ“ä½œã€‚æ•™ç»™ä½ äº†åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œå°±æ˜¯æŒ‰ä¸€ä¸‹escé”®ï¼Œç„¶åè¾“å…¥ggvGã€‚å…·ä½“ä»€ä¹ˆå«ä¹‰çœ‹VIM ç¬”è®°å§ï¼Œé€‰æ‹©åç›´æ¥deleteåˆ é™¤ï¼Œé•œåƒåœ°å€ç²˜è´´è¿›å»ã€‚ä¿å­˜é€€å‡ºã€‚ æ›´æ–°123sudo apt-get updatesudo apt-get dist-upgradesudo apt-get upgrade","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Debian","slug":"Debian","permalink":"http://example.com/tags/Debian/"}]},{"title":"QEMU's instance_init() vs. realize()","slug":"QEMU-s-instance-init-vs-realize","date":"2022-11-01T01:51:28.000Z","updated":"2022-11-20T07:03:29.699Z","comments":true,"path":"2022/11/01/QEMU-s-instance-init-vs-realize/","link":"","permalink":"http://example.com/2022/11/01/QEMU-s-instance-init-vs-realize/","excerpt":"","text":"è½¬è½½è‡ªhuth (Thomas Huth)çš„ä¸€ç¯‡æ–‡ç« ï¼ŒåŸæ–‡å·²ç» 404ï¼Œä»ç½‘é¡µå¿«ç…§ä¸­æ‰¾å›çš„æ–‡ç« ã€‚ Note that this is a blog post for (new) QEMU developers. If you are just interested in using QEMU, you can certainly skip this text. Otherwise, in case you have ever been in touch with the QEMU device model (â€œqdevâ€), you are likely aware of the basic qdev code boilerplate already: 12345678910111213141516171819202122232425262728293031323334353637383940static void mydev_realize(DeviceState *dev, Error **errp)&#123; &#125;static void mydev_instance_init(Object *obj)&#123; &#125;static Property mydev_properties[] = &#123; DEFINE_PROP_xxx(&quot;myprop&quot;, MyDevState, field, ...), DEFINE_PROP_END_OF_LIST(),&#125;;static void mydev_class_init(ObjectClass *oc, void *data)&#123; DeviceClass *dc = DEVICE_CLASS(oc); dc-&gt;realize = mydev_realize; dc-&gt;desc = &quot;My cool device&quot;; dc-&gt;props = mydev_properties; &#125;static const TypeInfo mydev_info = &#123; .name = TYPE_MYDEV, .parent = TYPE_SYS_BUS_DEVICE, .instance_size = sizeof(mydev_state), .instance_init = mydev_instance_init, .class_init = mydev_class_init,&#125;;static void mydev_register_types(void)&#123; type_register_static(&amp;mydev_info);&#125;type_init(mydev_register_types) There are three different initialization functions involved here, the class_init, the instance_init and the realize function. While it is quite obvious to distinguish the class_init function from the two others (it is used for initializing the class data, not the data that is used for an instance â€¦ this is similar to the object model with classes and instances in C++), I initially always wondered about the difference between the instance_init() and the realize() functions. Having fixed quite a lot of related bugs in the past months in the QEMU code base, I now know that a lot of other people are also not properly aware of the difference here, so I think it is now time to write down some information that Iâ€™m now aware of, to make sure that I donâ€™t forget about this again, and maybe help others to avoid related bugs in the future ;-) First it is of course always a good idea to have a look at the documentation. While the documentation of TypeInfo (where instance_init() is defined) is not very helpful to understand the differences, the documentation of DeviceClass (where realize() is defined) has some more useful information: You can learn here that the object instantiation is done first, before the device is realized, i.e. the instance_init() function is called first, and the realize() function is called afterwards. The former must not fail, while the latter can return an error to its caller via a pointer to an â€œErrorâ€ object pointer. So the basic idea here is that device objects are first instantiated, then these objects can be inspected for their interfaces and their creators can set up their properties to configure their settings and wire them up with other devices, before the device finally becomes â€œactiveâ€ by being realized. It is important here to notice that devices can be instantiated (and also finalized) without being realized! This happens for example if the device is introspected: If you enter for example device_add xyz,help at the HMP monitor, or if you send the device-list-properties QOM command to QEMU to retrieve the deviceâ€™s properties, QEMU creates a temporary instance of the device to query the properties of the object, without realizing it. The object gets destroyed (â€œfinalizedâ€) immediately afterwards. Knowing this, you can avoid a set of bugs which could be found with a couple of devices in the past: If you want your device to provide properties for other parts of the QEMU code or for the users, and you want to add those properties via one of the many object_property_add*() functions of QEMU (instead of using the â€œpropsâ€ field of the DeviceClass), then you should do this in the instance_init() and not in the realize() function. Otherwise the properties wonâ€™t show up when the user runs --device xyz,help or the device-list-properties QOM command to get some information about your device. instance_init() functions must really never fail, i.e. also not call abort() or exit(). Otherwise QEMU can terminate unexpectedly when a user simply wanted to have a look at the list of device properties with device_add xyz,help or the device-list-properties QOM command. If your device cannot work in certain circumstances, check for the error condition in the realize() function instead and return with an appropriate error there. Never assume that your device is always instantiated only with the machine that it was designed for. Itâ€™s of course a good idea to set the â€œuser_creatable = falseâ€ flag in the DeviceClass of your device if your device cannot be plugged in arbitrary machines. But device introspection can still happen at any time, with any machine. So if you wrote a device called â€œmydev-aâ€ that only works with --machine A, the user still can start QEMU with the option --machine B instead and then run device_add mydev-a,help or the device-list-properties QOM command. The instance_init() function of your device will be called to create a temporary instance of your device, even though the base machine is B and not A here. So you especially should take care to not depend on the availability of certain buses or other devices in the instance_init() function, nor use things like serial_hd() or nd_table[] in your instance_init() function, since these might (and should) have been used by the machine init function already. If your device needs to be wired up, provide properties as interfaces to the outside and let the creator of your device (e.g. the machine init code) wire your device between the device instantiation and the realize phase instead. Make sure that your device leaves a clean state after a temporary instance is destroyed again, i.e. donâ€™t assume that there will be only one instance of your device which is created at the beginning right after QEMU has been started and is destroyed at the very end before QEMU terminates. Thus do not assume that the things that you do in your instance_init() donâ€™t need explicit clean-up since the device instance will only be destroyed when QEMU terminates. Device instances can be created and destroyed at any time, so when the device is finalized, you must not leave any dangling pointers or references to your device behind you, e.g. in the QOM tree. When you create other objects in your instance_init() function, make sure to set proper parents of these objects or use an instance_finalize() function, so that the created objects get cleaned up correctly again when your device is destroyed. All in all, if you write code for a new QEMU device, it is likely a good idea to use the instance_init() function only for e.g. creating properties and other things that are required before device realization, and then do the main work in the realize() function instead.","categories":[{"name":"QEMU æºç åˆ†æ","slug":"QEMU-æºç åˆ†æ","permalink":"http://example.com/categories/QEMU-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}],"tags":[{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"ZH-UEFI è§„èŒƒ -1-å¼•è¨€","slug":"ZH-UEFIè§„èŒƒ-1-å¼•è¨€","date":"2022-10-18T12:07:10.000Z","updated":"2022-10-18T12:11:04.112Z","comments":true,"path":"2022/10/18/ZH-UEFIè§„èŒƒ-1-å¼•è¨€/","link":"","permalink":"http://example.com/2022/10/18/ZH-UEFI%E8%A7%84%E8%8C%83-1-%E5%BC%95%E8%A8%80/","excerpt":"","text":"å¼•è¨€ç»Ÿä¸€å¯æ‰©å±•å›ºä»¶æ¥å£ (UEFI) è§„èŒƒæè¿°äº†æ“ä½œç³»ç»Ÿå’Œå¹³å°å›ºä»¶ä¹‹é—´çš„æ¥å£ã€‚UEFI ä¹‹å‰æ˜¯å¯æ‰©å±•å›ºä»¶æ¥å£è§„èŒƒ 1.10 (EFI)ã€‚å› æ­¤ï¼Œä¸€äº›ä»£ç å’ŒæŸäº›åè®®åç§°ä¿ç•™äº† EFI åç§°ã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œæœ¬è§„èŒƒä¸­çš„ EFI åç§°å¯å‡å®šä¸º UEFI çš„ä¸€éƒ¨åˆ†ã€‚ è¯¥æ¥å£é‡‡ç”¨æ•°æ®è¡¨çš„å½¢å¼ï¼Œå…¶ä¸­åŒ…å«ä¸å¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä»¥åŠå¯ä¾› OS åŠ è½½ç¨‹åºå’Œ OS ä½¿ç”¨çš„å¼•å¯¼å’Œè¿è¡Œæ—¶æœåŠ¡è°ƒç”¨ã€‚å®ƒä»¬å…±åŒæä¾›äº†ä¸€ä¸ªå¼•å¯¼æ“ä½œç³»ç»Ÿçš„æ ‡å‡†ç¯å¢ƒã€‚æœ¬è§„èŒƒæ˜¯ä½œä¸ºä¸€ä¸ªçº¯ç²¹çš„æ¥å£è§„èŒƒè®¾è®¡çš„ã€‚å› æ­¤ï¼Œè¯¥è§„èŒƒå®šä¹‰äº†å¹³å°å›ºä»¶å¿…é¡»å®ç°çš„æ¥å£å’Œç»“æ„é›†ã€‚ç±»ä¼¼åœ°ï¼Œè¯¥è§„èŒƒå®šä¹‰äº†æ“ä½œç³»ç»Ÿåœ¨å¼•å¯¼æ—¶å¯èƒ½ä½¿ç”¨çš„ä¸€ç»„æ¥å£å’Œç»“æ„ã€‚æ— è®ºæ˜¯å›ºä»¶å¼€å‘è€…é€‰æ‹©å¦‚ä½•å®ç°æ‰€éœ€çš„å…ƒç´ ï¼Œè¿˜æ˜¯æ“ä½œç³»ç»Ÿå¼€å‘è€…é€‰æ‹©å¦‚ä½•åˆ©ç”¨è¿™äº›æ¥å£å’Œç»“æ„ï¼Œéƒ½ç”±å¼€å‘è€…è‡ªå·±å†³å®šã€‚ è¯¥è§„èŒƒçš„ç›®çš„æ˜¯å®šä¹‰ä¸€ç§æ–¹æ³•ï¼Œä½¿æ“ä½œç³»ç»Ÿå’Œå¹³å°å›ºä»¶ä»…é€šä¿¡æ”¯æŒæ“ä½œç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹æ‰€å¿…éœ€çš„ä¿¡æ¯ã€‚è¿™æ˜¯é€šè¿‡å¹³å°å’Œå›ºä»¶æä¾›ç»™æ“ä½œç³»ç»Ÿçš„è½¯ä»¶å¯è§æ¥å£çš„æ­£å¼å’Œå®Œæ•´çš„æŠ½è±¡è§„èŒƒæ¥å®ç°çš„ã€‚ æœ¬è§„èŒƒçš„ç›®çš„æ˜¯ä¸ºæ“ä½œç³»ç»Ÿå’Œå¹³å°å›ºä»¶å®šä¹‰ä¸€ç§æ–¹å¼ï¼Œä»¥ä»…ä¼ é€’æ”¯æŒæ“ä½œç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹æ‰€éœ€çš„ä¿¡æ¯ã€‚è¿™æ˜¯é€šè¿‡å¹³å°å’Œå›ºä»¶å‘ˆç°ç»™æ“ä½œç³»ç»Ÿçš„è½¯ä»¶å¯è§æ¥å£çš„æŠ½è±¡è§„èŒƒæ¥å®ç°çš„ã€‚ ä½¿ç”¨è¿™ä¸€æ­£å¼å®šä¹‰ï¼Œæ—¨åœ¨è¿è¡Œåœ¨ä¸å—æ”¯æŒçš„å¤„ç†å™¨è§„èŒƒå…¼å®¹çš„å¹³å°ä¸Šçš„æ”¶ç¼©åŒ…è£…æ“ä½œç³»ç»Ÿå°†èƒ½å¤Ÿåœ¨å„ç§ç³»ç»Ÿè®¾è®¡ä¸Šå¯åŠ¨ï¼Œè€Œæ— éœ€è¿›ä¸€æ­¥çš„å¹³å°æˆ–æ“ä½œç³»ç»Ÿå®šåˆ¶ã€‚è¯¥å®šä¹‰è¿˜å…è®¸å¹³å°åˆ›æ–°å¼•å…¥æ–°ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œä»¥å¢å¼ºå¹³å°çš„èƒ½åŠ›ï¼Œè€Œä¸éœ€è¦æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„å¼•å¯¼é¡ºåºç¼–å†™æ–°ä»£ç ã€‚ æ­¤å¤–ï¼ŒæŠ½è±¡è§„èŒƒå¼€è¾Ÿäº†ä¸€æ¡æ›¿ä»£é—ç•™è®¾å¤‡å’Œå›ºä»¶ä»£ç çš„è·¯å¾„ã€‚æ–°çš„è®¾å¤‡ç±»å‹å’Œç›¸å…³ä»£ç å¯ä»¥é€šè¿‡ç›¸åŒå®šä¹‰çš„æŠ½è±¡æ¥å£æä¾›åŒç­‰çš„åŠŸèƒ½ï¼ŒåŒæ ·ä¸ä¼šå½±å“ OS å¼•å¯¼æ”¯æŒä»£ç ã€‚ è¯¥è§„èŒƒé€‚ç”¨äºä»ç§»åŠ¨ç³»ç»Ÿåˆ°æœåŠ¡å™¨çš„æ‰€æœ‰ç¡¬ä»¶å¹³å°ã€‚è¯¥è§„èŒƒæä¾›äº†ä¸€ç»„æ ¸å¿ƒæœåŠ¡ä»¥åŠä¸€ç»„åè®®æ¥å£ã€‚åè®®æ¥å£çš„é€‰æ‹©å¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»è€Œå‘å±•ï¼Œå¹¶é’ˆå¯¹ä¸åŒçš„å¹³å°å¸‚åœºç»†åˆ†è¿›è¡Œä¼˜åŒ–ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¯¥è§„èŒƒå…è®¸ oem æä¾›æœ€å¤§é™åº¦çš„å¯æ‰©å±•æ€§å’Œå®šåˆ¶èƒ½åŠ›ï¼Œä»¥å®ç°å·®å¼‚åŒ–ã€‚åœ¨è¿™æ–¹é¢ï¼ŒUEFI çš„ç›®çš„æ˜¯å®šä¹‰ä¸€ä¸ªä»ä¼ ç»Ÿçš„â€œPC-ATâ€é£æ ¼çš„å¼•å¯¼ä¸–ç•Œåˆ°ä¸€ä¸ªæ²¡æœ‰é—ç•™ API çš„ç¯å¢ƒçš„è¿›åŒ–è·¯å¾„ã€‚ UEFI é©±åŠ¨æ¨¡å‹æ‰©å±•å¯¹å¯åŠ¨è®¾å¤‡çš„è®¿é—®æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„åè®®æ¥å£æä¾›çš„ã€‚UEFI é©±åŠ¨æ¨¡å‹çš„ä¸€ä¸ªç›®çš„æ˜¯ä¸º â€œPC-ATâ€å¼çš„ Option ROMï¼ˆTODOï¼‰æä¾›ä¸€ä¸ªæ›¿ä»£å“ã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œå†™åœ¨ UEFI é©±åŠ¨æ¨¡å‹ä¸Šçš„é©±åŠ¨ï¼Œè¢«è®¾è®¡ä¸ºåœ¨é¢„å¯åŠ¨ç¯å¢ƒä¸­è®¿é—®å¯åŠ¨è®¾å¤‡ã€‚å®ƒä»¬å¹¶ä¸æ˜¯ä¸ºäº†å–ä»£é«˜æ€§èƒ½çš„ã€é’ˆå¯¹æ“ä½œç³»ç»Ÿçš„é©±åŠ¨ç¨‹åºã€‚ UEFI é©±åŠ¨æ¨¡å‹è¢«è®¾è®¡ä¸ºæ”¯æŒæ‰§è¡Œæ¨¡å—åŒ–çš„ä»£ç ï¼Œä¹Ÿè¢«ç§°ä¸ºé©±åŠ¨ï¼Œåœ¨é¢„å¯åŠ¨ç¯å¢ƒä¸­è¿è¡Œã€‚è¿™äº›é©±åŠ¨ç¨‹åºå¯ä»¥ç®¡ç†æˆ–æ§åˆ¶å¹³å°ä¸Šçš„ç¡¬ä»¶æ€»çº¿å’Œè®¾å¤‡ï¼Œä¹Ÿå¯ä»¥æä¾›ä¸€äº›è½¯ä»¶è¡ç”Ÿçš„ã€å¹³å°ç‰¹å®šçš„æœåŠ¡ã€‚ UEFI é©±åŠ¨æ¨¡å‹è¿˜åŒ…å«äº† UEFI é©±åŠ¨ç¼–å†™è€…æ‰€éœ€çš„ä¿¡æ¯ï¼Œä»¥è®¾è®¡å’Œå®ç°å¹³å°å¯åŠ¨ UEFI å…¼å®¹çš„æ“ä½œç³»ç»Ÿå¯èƒ½éœ€è¦çš„ä»»ä½•æ€»çº¿é©±åŠ¨å’Œè®¾å¤‡é©±åŠ¨çš„ç»„åˆã€‚ UEFI é©±åŠ¨æ¨¡å‹è¢«è®¾è®¡ä¸ºé€šç”¨çš„ï¼Œå¯ä»¥é€‚åº”ä»»ä½•ç±»å‹çš„æ€»çº¿æˆ–è®¾å¤‡ã€‚UEFI è§„èŒƒæè¿°äº†å¦‚ä½•ç¼–å†™ PCI æ€»çº¿é©±åŠ¨ç¨‹åºã€PCI è®¾å¤‡é©±åŠ¨ç¨‹åºã€USB æ€»çº¿é©±åŠ¨ç¨‹åºã€USB è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œ SCSI é©±åŠ¨ç¨‹åºã€‚æä¾›äº†å…è®¸å°† UEFI é©±åŠ¨ç¨‹åºå­˜å‚¨åœ¨ PCI Option ROM ä¸­çš„å…¶ä»–è¯¦ç»†ä¿¡æ¯ï¼ŒåŒæ—¶ä¿æŒäº†ä¸æ—§ Option ROM é•œåƒçš„å…¼å®¹æ€§ã€‚ UEFI è§„èŒƒçš„ä¸€ä¸ªè®¾è®¡ç›®æ ‡æ˜¯ä½¿é©±åŠ¨é•œåƒå°½å¯èƒ½çš„å°ã€‚ç„¶è€Œï¼Œå¦‚æœä¸€ä¸ªé©±åŠ¨ç¨‹åºéœ€è¦æ”¯æŒå¤šä¸ªå¤„ç†å™¨æ¶æ„ï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦ä¸ºæ¯ä¸ªæ”¯æŒçš„å¤„ç†å™¨æ¶æ„æä¾›ä¸€ä¸ªé©±åŠ¨ç¨‹åºå¯¹è±¡æ–‡ä»¶ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªç©ºé—´é—®é¢˜ï¼Œæœ¬è§„èŒƒè¿˜å®šä¹‰äº† EFI å­—èŠ‚ä»£ç è™šæ‹Ÿæœºï¼ˆEFI Byte Code Virtual Machineï¼‰ã€‚ä¸€ä¸ª UEFI é©±åŠ¨å¯ä»¥è¢«ç¼–è¯‘æˆä¸€ä¸ª EFI å­—èŠ‚ä»£ç å¯¹è±¡æ–‡ä»¶ã€‚UEFI Specification-complaintï¼ˆTODOï¼‰çš„å›ºä»¶å¿…é¡»åŒ…å«ä¸€ä¸ª EFI å­—èŠ‚ä»£ç è§£é‡Šå™¨ã€‚è¿™ä½¿å¾—æ”¯æŒå¤šç§å¤„ç†å™¨æ¶æ„çš„å•ä¸€ EFI å­—èŠ‚ä»£ç å¯¹è±¡æ–‡ä»¶å¯ä»¥è¢«è¿å‡ºã€‚å¦ä¸€ç§èŠ‚çœç©ºé—´çš„æŠ€æœ¯æ˜¯ä½¿ç”¨å‹ç¼©ã€‚è¯¥è§„èŒƒå®šä¹‰äº†å‹ç¼©å’Œè§£å‹ç®—æ³•ï¼Œå¯ç”¨äºå‡å°‘ UEFI é©±åŠ¨ç¨‹åºçš„å¤§å°ï¼Œä»è€Œå‡å°‘ UEFI é©±åŠ¨ç¨‹åºå­˜å‚¨åœ¨ ROM è®¾å¤‡ä¸­æ—¶çš„å¼€é”€ã€‚ OSVã€IHVã€OEM å’Œå›ºä»¶ä¾›åº”å•†å¯ä»¥ä½¿ç”¨ UEFI è§„èŒƒä¸­åŒ…å«çš„ä¿¡æ¯æ¥è®¾è®¡å’Œå®ç°ç¬¦åˆæœ¬è§„èŒƒçš„å›ºä»¶ã€ç”Ÿæˆæ ‡å‡†åè®®æ¥å£çš„é©±åŠ¨ç¨‹åºä»¥åŠå¯ç”¨äºå¼•å¯¼ UEFI å…¼å®¹çš„æ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºæ“ä½œç³»ç»Ÿã€‚ ç« èŠ‚å®‰æ’æœ¬è§„èŒƒçš„ç« èŠ‚ç»„ç»‡å¦‚ä¸‹ï¼š ç« èŠ‚å å†…å®¹ å¼•è¨€/æ¦‚è¿° ä»‹ç» UEFI è§„èŒƒï¼Œå¹¶æè¿° UEFI çš„ä¸»è¦ç»„ä»¶ã€‚ å¯åŠ¨ç®¡ç†å™¨ ç®¡ç†å™¨ç”¨äºåŠ è½½å†™å…¥æ­¤è§„èŒƒçš„é©±åŠ¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºã€‚ EFI ç³»ç»Ÿè¡¨å’Œåˆ†åŒº æè¿°äº†ä¸€ä¸ª EFI ç³»ç»Ÿè¡¨ï¼Œå®ƒè¢«ä¼ é€’ç»™æ¯ä¸ªå…¼å®¹çš„é©±åŠ¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªåŸºäº GUID çš„åˆ†åŒºæ–¹æ¡ˆã€‚ å—è½¬æ¢è¡¨ ç”¨äºæ‰§è¡Œå— I/O çš„å¸ƒå±€å’Œè§„åˆ™é›†ï¼Œå¯æä¾›å•ä¸ªå—çš„æ–­ç”µå†™å…¥åŸå­æ€§ã€‚ å¼•å¯¼æœåŠ¡ åŒ…å«åœ¨å¼•å¯¼æ“ä½œç³»ç»Ÿä¹‹å‰å­˜åœ¨äº UEFI å…¼å®¹ç³»ç»Ÿä¸­çš„åŸºæœ¬æœåŠ¡çš„å®šä¹‰ã€‚ è¿è¡Œæ—¶æœåŠ¡ åŒ…å«åœ¨æ“ä½œç³»ç»Ÿå¯åŠ¨ä¹‹å‰å’Œä¹‹åå­˜åœ¨äºå…¼å®¹ç³»ç»Ÿä¸­çš„åŸºæœ¬æœåŠ¡çš„å®šä¹‰ã€‚ åè®® EFI åŠ è½½å›¾åƒåè®®æè¿°å·²åŠ è½½åˆ°å†…å­˜çš„ UEFI é•œåƒã€‚ è®¾å¤‡è·¯å¾„åè®®æä¾›äº†åœ¨ UEFI ç¯å¢ƒä¸­æ„å»ºå’Œç®¡ç†è®¾å¤‡è·¯å¾„æ‰€éœ€çš„ä¿¡æ¯ã€‚ UEFI é©±åŠ¨æ¨¡å‹æè¿°äº†ä¸€ç»„æœåŠ¡å’Œåè®®ï¼Œé€‚ç”¨äºæ¯ä¸ªæ€»çº¿å’Œè®¾å¤‡ç±»å‹ã€‚ æ§åˆ¶å°æ”¯æŒåè®®å®šä¹‰äº†I/Oåè®®ï¼Œå¤„ç†ç³»ç»Ÿç”¨æˆ·åœ¨å¯åŠ¨æœåŠ¡ç¯å¢ƒä¸­æ‰§è¡Œçš„åŸºäºæ–‡æœ¬çš„ä¿¡æ¯çš„è¾“å…¥å’Œè¾“å‡ºã€‚ åª’ä»‹è®¿é—®åè®®å®šä¹‰äº†åŠ è½½æ–‡ä»¶åè®®ï¼Œæ–‡ä»¶ç³»ç»Ÿæ ¼å¼å’Œåª’ä»‹æ ¼å¼å¤„ç†å¯ç§»åŠ¨åª’ä»‹ã€‚ PCI æ€»çº¿æ”¯æŒåè®®å®šä¹‰ PCI æ€»çº¿é©±åŠ¨ç¨‹åºï¼ŒPCI è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œ PCI Option ROM å¸ƒå±€ã€‚æ‰€æè¿°çš„åè®®åŒ…æ‹¬ PCI æ ¹æ¡¥ I/O åè®®å’Œ PCI I/Oåè®®ã€‚ SCSI é©±åŠ¨ç¨‹åºæ¨¡å‹å’Œæ€»çº¿æ”¯æŒå®šä¹‰äº† SCSI I/Oåè®®å’Œæ‰©å±•SCSI Pass Thru åè®®ï¼Œç”¨äºæŠ½è±¡è®¿é—®ç”± SCSI ä¸»æœºæ§åˆ¶å™¨äº§ç”Ÿçš„ SCSI é€šé“ã€‚ iSCSIåè®®å®šä¹‰äº†é€šè¿‡TCP/IPä¼ è¾“SCSIæ•°æ®ã€‚ USB æ”¯æŒåè®®å®šä¹‰äº† USB æ€»çº¿é©±åŠ¨ç¨‹åºå’Œ USB è®¾å¤‡é©±åŠ¨ç¨‹åºã€‚ è°ƒè¯•å™¨æ”¯æŒåè®®æè¿°äº†ä¸€ç»„å¯é€‰çš„åè®®ï¼Œæä¾›æ‰€éœ€çš„æœåŠ¡ï¼Œä»¥å®ç°ä¸€ä¸ªæºçº§è°ƒè¯•å™¨çš„ UEFI ç¯å¢ƒã€‚ å‹ç¼©ç®—æ³•è§„èŒƒè¯¦ç»†æè¿°äº†å‹ç¼©/è§£å‹ç¼©ç®—æ³•ï¼Œå¤–åŠ ä¸€ä¸ªæ ‡å‡†çš„EFIè§£å‹ç¼©æ¥å£ï¼Œç”¨äºå¯åŠ¨æ—¶ä½¿ç”¨ã€‚ ACPI åè®®å¯ç”¨äºä»å¹³å°ä¸Šå®‰è£…æˆ–åˆ é™¤ ACPI è¡¨ã€‚ å­—ç¬¦ä¸²æœåŠ¡ï¼šUnicode æ’åºåè®®å…è®¸åœ¨å¯åŠ¨æœåŠ¡ç¯å¢ƒä¸­è¿è¡Œçš„ä»£ç å¯¹ç»™å®šè¯­è¨€çš„ Unicode å­—ç¬¦ä¸²æ‰§è¡Œè¯æ³•æ¯”è¾ƒå‡½æ•°;æ­£åˆ™è¡¨è¾¾å¼åè®®ç”¨äºæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é… Unicode å­—ç¬¦ä¸²ã€‚ EFI å­—èŠ‚ç è™šæ‹Ÿæœº å®šä¹‰ EFI å­—èŠ‚ç è™šæ‹Ÿå¤„ç†å™¨åŠå…¶æŒ‡ä»¤é›†ã€‚å®ƒè¿˜å®šä¹‰äº†å¦‚ä½•å°† EBC å¯¹è±¡æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä»¥åŠä»æœ¬æœºä»£ç åˆ° EBC ä»£ç å†è½¬æ¢åˆ°æœ¬æœºä»£ç çš„æœºåˆ¶ã€‚ å›ºä»¶æ›´æ–°å’ŒæŠ¥å‘Š ä¸ºè®¾å¤‡æä¾›ä¸€ä¸ªæŠ½è±¡ï¼Œä»¥æä¾›å›ºä»¶ç®¡ç†æ”¯æŒã€‚ ç½‘ç»œåè®® SNPã€PXEã€BIS å’Œ HTTP å¯åŠ¨åè®®å®šä¹‰äº†åœ¨ UEFI å¯åŠ¨æœåŠ¡ç¯å¢ƒä¸­æ‰§è¡Œæ—¶æä¾›å¯¹ç½‘ç»œè®¾å¤‡è®¿é—®çš„åè®®ã€‚ å—ç®¡ç½‘ç»œåè®®å®šä¹‰äº† EFI å—ç®¡ç½‘ç»œåè®®ï¼Œå®ƒæä¾›åŸå§‹ (æœªæ ¼å¼åŒ–) å¼‚æ­¥ç½‘ç»œæ•°æ®åŒ… I/O æœåŠ¡å’Œæ‰˜ç®¡ç½‘ç»œæœåŠ¡ç»‘å®šåè®®ï¼Œç”¨äºå®šä½ MNP é©±åŠ¨æ”¯æŒçš„é€šä¿¡è®¾å¤‡ã€‚ VLANã€EAPã€Wi-Fi å’Œ Supplicant åè®®å®šä¹‰äº†ä¸€ä¸ªåè®®ï¼Œä¸º VLAN é…ç½®æä¾›å¯ç®¡ç†æ€§æ¥å£ã€‚ è“ç‰™åè®®å®šä¹‰ã€‚ TCPã€IPã€PIPsecã€FTPã€GTLS å’Œ Configurations åè®®å®šä¹‰äº† EFI TCPv4 (Transmission Control Protocol version 4) åè®®å’Œ EFI IPv4 (Internet Protocol version 4) åè®®ã€‚ ARPã€DHCPã€DNSã€HTTP å’Œ REST åè®®å®šä¹‰äº† ARP (Address Resolution Protocol) åè®®æ¥å£å’Œ EFI DHCPv4 åè®®ã€‚ UDP å’Œ MTFTP åè®®å®šä¹‰äº† EFI UDPv4 (User Datagram Protocol version 4) åè®®ï¼Œè¯¥åè®®åœ¨ EFI IPv4 åè®®ä¸Šæ¥å£ï¼Œå¹¶å®šä¹‰äº† EFI MTFTPv4 åè®®æ¥å£ï¼Œè¯¥æ¥å£å»ºç«‹åœ¨ EFI UDPv4 åè®®ä¹‹ä¸Šã€‚ å®‰å…¨å¼•å¯¼å’Œé©±åŠ¨ç¨‹åºç­¾å ä»‹ç» Secure Boot å’Œç”Ÿæˆ UEFI æ•°å­—ç­¾åçš„æ–¹æ³•ã€‚ äººæœºç•Œé¢åŸºç¡€è®¾æ–½ (HII) å®šä¹‰å®ç°äººæœºæ¥å£åŸºç¡€è®¾æ–½ (HII) æ‰€éœ€çš„æ ¸å¿ƒä»£ç å’ŒæœåŠ¡ï¼ŒåŒ…æ‹¬ç®¡ç†ç”¨æˆ·è¾“å…¥å’Œç›¸å…³åè®®çš„ä»£ç å®šä¹‰çš„åŸºæœ¬æœºåˆ¶ã€‚ æè¿°ç”¨äºç®¡ç†ç³»ç»Ÿé…ç½®çš„æ•°æ®å’Œ api:æè¿°æ—‹é’®å’Œè®¾ç½®çš„å®é™…æ•°æ®ã€‚ ç”¨æˆ·æ ‡è¯† æè¿°æè¿°å¹³å°å½“å‰ç”¨æˆ·çš„æœåŠ¡ã€‚ å®‰å…¨æŠ€æœ¯ æè¿°ç”¨äºåˆ©ç”¨å®‰å…¨æŠ€æœ¯çš„åè®®ï¼ŒåŒ…æ‹¬åŠ å¯†æ•£åˆ—å’Œå¯†é’¥ç®¡ç†ã€‚ æ‚é¡¹åè®® Timestamp åè®®æä¾›äº†ä¸€ä¸ªç‹¬ç«‹äºå¹³å°çš„æ¥å£æ¥æ£€ç´¢é«˜åˆ†è¾¨ç‡çš„æ—¶é—´æˆ³è®¡æ•°å™¨ã€‚å½“è°ƒç”¨ ResetSystem æ—¶ï¼Œé‡ç½®é€šçŸ¥åè®®æä¾›æ³¨å†Œé€šçŸ¥çš„æœåŠ¡ã€‚ é™„å½• GUID å’Œæ—¶é—´æ ¼å¼ã€‚ åŸºäºåŸºæœ¬æ–‡æœ¬çš„æ§åˆ¶å°è¦æ±‚ï¼Œç¬¦åˆ efi ç³»ç»Ÿéœ€è¦æä¾›é€šä¿¡èƒ½åŠ›ã€‚ è®¾å¤‡è·¯å¾„ä½¿ç”¨æ•°æ®ç»“æ„çš„ä¾‹å­ï¼Œå®šä¹‰å„ç§ç¡¬ä»¶è®¾å¤‡çš„å¼•å¯¼æœåŠ¡ã€‚ çŠ¶æ€ä»£ç åˆ—å‡ºäº† UEFI æ¥å£è¿”å›çš„æˆåŠŸã€é”™è¯¯å’Œè­¦å‘Šä»£ç ã€‚ é€šç”¨ç½‘ç»œé©±åŠ¨ç¨‹åºæ¥å£å®šä¹‰äº†32/64ä½ç¡¬ä»¶å’Œè½¯ä»¶é€šç”¨ç½‘ç»œé©±åŠ¨ç¨‹åºæ¥å£(UNDIs)ã€‚ ä½¿ç”¨ç®€å•æŒ‡é’ˆåè®®ã€‚ ä½¿ç”¨ EFI æ‰©å±• SCISI ç›´é€šåè®®ã€‚ å‹ç¼©æºä»£ç çš„ä¸€ä¸ªå‹ç¼©ç®—æ³•çš„å®ç°ã€‚ ä¸€ä¸ª EFI è§£å‹ç¼©ç®—æ³•çš„å®ç°çš„è§£å‹æºä»£ç ã€‚ EFI å­—èŠ‚ç è™šæ‹Ÿæœºæ“ä½œç åˆ—è¡¨æä¾›äº†ç›¸åº”æŒ‡ä»¤é›†çš„æ‘˜è¦ã€‚ å­—æ¯åŠŸèƒ½åˆ—è¡¨æŒ‰å­—æ¯é¡ºåºæ ‡è¯†æ‰€æœ‰ UEFI æ¥å£åŠŸèƒ½ã€‚ EFI 1.10 åè®®å˜æ›´å’ŒæŠ˜æ—§æ¸…å•æ ‡è¯†äº†åè®®ã€GUIDã€ä¿®è®¢æ ‡è¯†ç¬¦åç§°å˜æ›´ä»¥åŠä¸ EFI 1.10 è§„èŒƒç›¸æ¯”å·²å¼ƒç”¨çš„åè®®ã€‚ å¹³å°é”™è¯¯è®°å½•æè¿°äº†ç”¨äºè¡¨ç¤ºå¹³å°ç¡¬ä»¶é”™è¯¯çš„å¸¸è§å¹³å°é”™è¯¯è®°å½•æ ¼å¼ã€‚ UEFI ACPI Data Table å®šä¹‰äº† UEFI ACPI è¡¨æ ¼å¼ã€‚ ç¡¬ä»¶é”™è¯¯è®°å½•æŒä¹…æ€§ä½¿ç”¨ã€‚ å¼•ç”¨ æœ¯è¯­è¡¨ ç´¢å¼• æä¾›è§„èŒƒä¸­å…³é”®æœ¯è¯­å’Œæ¦‚å¿µçš„ç´¢å¼•ã€‚ ç›®æ ‡â€œPC-ATâ€å¯åŠ¨ç¯å¢ƒå¯¹è¡Œä¸šå†…çš„åˆ›æ–°æå‡ºäº†é‡å¤§æŒ‘æˆ˜ã€‚æ¯ä¸€ä¸ªæ–°çš„å¹³å°åŠŸèƒ½æˆ–ç¡¬ä»¶åˆ›æ–°éƒ½è¦æ±‚å›ºä»¶å¼€å‘äººå‘˜è®¾è®¡è¶Šæ¥è¶Šå¤æ‚çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”é€šå¸¸è¦æ±‚æ“ä½œç³»ç»Ÿå¼€å‘äººå‘˜ä¿®æ”¹å¼•å¯¼ä»£ç ï¼Œç„¶åå®¢æˆ·æ‰èƒ½ä»åˆ›æ–°ä¸­å—ç›Šã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªè€—æ—¶çš„è¿‡ç¨‹ï¼Œéœ€è¦å¤§é‡çš„èµ„æºæŠ•èµ„ã€‚ UEFI è§„èŒƒçš„ä¸»è¦ç›®æ ‡æ˜¯å®šä¹‰ä¸€ä¸ªæ›¿ä»£å¼•å¯¼ç¯å¢ƒï¼Œå¯ä»¥å‡è½»è¿™äº›è€ƒè™‘ã€‚åœ¨è¿™ä¸ªç›®æ ‡ä¸­ï¼Œè¯¥è§„èŒƒç±»ä¼¼äºå…¶ä»–ç°æœ‰çš„å¼•å¯¼è§„èŒƒã€‚æœ¬è§„èŒƒçš„ä¸»è¦å±æ€§å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å±æ€§ï¼š ä¸€è‡´çš„ã€å¯æ‰©å±•çš„å¹³å°ç¯å¢ƒã€‚è¯¥è§„èŒƒä¸ºå›ºä»¶å®šä¹‰äº†ä¸€ä¸ªå®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥æè¿°æ‰€æœ‰å¹³å°ç‰¹æ€§å’Œ OS çš„ surface platform(TODO) åŠŸèƒ½åœ¨å¼•å¯¼è¿‡ç¨‹ä¸­ã€‚è¿™äº›å®šä¹‰éå¸¸ä¸°å¯Œï¼Œè¶³ä»¥æ¶µç›–ä¸€ç³»åˆ—å½“ä»£å¤„ç†å™¨è®¾è®¡ã€‚ ä»å›ºä»¶ä¸­æŠ½è±¡æ“ä½œç³»ç»Ÿã€‚è¯¥è§„èŒƒå®šä¹‰äº†å¹³å°åŠŸèƒ½çš„æ¥å£ã€‚é€šè¿‡ä½¿ç”¨æŠ½è±¡æ¥å£ï¼Œè¯¥è§„èŒƒå…è®¸åœ¨æ„å»º OS åŠ è½½å™¨æ—¶ï¼Œè€Œæ— éœ€äº†è§£ä½œä¸ºè¿™äº›æ¥å£åŸºç¡€çš„å¹³å°å’Œå›ºä»¶ã€‚è¿™äº›æ¥å£ä»£è¡¨äº†åº•å±‚å¹³å°å’Œå›ºä»¶å®ç°ä¸æ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºä¹‹é—´å®šä¹‰è‰¯å¥½çš„ç¨³å®šè¾¹ç•Œã€‚è¿™æ ·çš„è¾¹ç•Œå…è®¸åº•å±‚å›ºä»¶å’Œæ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºæ›´æ”¹ï¼Œå‰ææ˜¯ä¸¤è€…éƒ½å°†äº¤äº’é™åˆ¶åœ¨å®šä¹‰çš„æ¥å£ä¸Šã€‚ åˆç†çš„è®¾å¤‡æŠ½è±¡ï¼Œä¸éœ€è¦é—ç•™æ¥å£ã€‚â€œPC-ATâ€BIOS æ¥å£è¦æ±‚æ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºå¯¹æŸäº›ç¡¬ä»¶è®¾å¤‡çš„å·¥ä½œæœ‰ç‰¹å®šçš„äº†è§£ã€‚è¯¥è§„èŒƒä¸º OS åŠ è½½å™¨å¼€å‘äººå‘˜æä¾›äº†ä¸€äº›ä¸åŒçš„ä¸œè¥¿ï¼šæŠ½è±¡æ¥å£ä½¿å¾—å¯ä»¥æ„å»ºåœ¨ä¸€ç³»åˆ—åº•å±‚ç¡¬ä»¶è®¾å¤‡ä¸Šå·¥ä½œçš„ä»£ç ï¼Œè€Œæ— éœ€æ˜ç¡®äº†è§£è¯¥èŒƒå›´å†…æ¯ä¸ªè®¾å¤‡çš„ç»†èŠ‚ã€‚ ä»å›ºä»¶ä¸­æå– Option ROMã€‚è¯¥è§„èŒƒå®šä¹‰äº†å¹³å°åŠŸèƒ½çš„æ¥å£ï¼ŒåŒ…æ‹¬ PCIã€USB å’Œ SCSI ç­‰æ ‡å‡†æ€»çº¿ç±»å‹ã€‚æ”¯æŒçš„æ€»çº¿ç±»å‹å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå¢åŠ ï¼Œå› æ­¤åŒ…æ‹¬äº†ä¸€ç§æ‰©å±•åˆ°æœªæ¥æ€»çº¿ç±»å‹çš„æœºåˆ¶ã€‚è¿™äº›å®šä¹‰çš„æ¥å£ä»¥åŠæ‰©å±•åˆ°æœªæ¥æ€»çº¿ç±»å‹çš„èƒ½åŠ›æ˜¯ UEFI é©±åŠ¨ç¨‹åºæ¨¡å‹çš„ç»„ä»¶ã€‚UEFI é©±åŠ¨æ¨¡å‹çš„ä¸€ä¸ªç›®çš„æ˜¯è§£å†³ç°æœ‰â€œPC-ATâ€Option ROM ä¸­å­˜åœ¨çš„å¹¿æ³›é—®é¢˜ã€‚ä¸ OS åŠ è½½ç¨‹åºä¸€æ ·ï¼Œé©±åŠ¨ç¨‹åºä½¿ç”¨æŠ½è±¡æ¥å£ï¼Œå› æ­¤å¯ä»¥æ„å»ºè®¾å¤‡é©±åŠ¨ç¨‹åºå’Œæ€»çº¿é©±åŠ¨ç¨‹åºï¼Œè€Œæ— éœ€äº†è§£ä½œä¸ºè¿™äº›æ¥å£åŸºç¡€çš„å¹³å°å’Œå›ºä»¶ã€‚ æ¶æ„ä¸Šå¯å…±äº«çš„ç³»ç»Ÿåˆ†åŒºã€‚æ‰©å±•å¹³å°åŠŸèƒ½å’Œæ·»åŠ æ–°è®¾å¤‡çš„è®¡åˆ’é€šå¸¸éœ€è¦è½¯ä»¶æ”¯æŒã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå½“è¿™äº›å¹³å°åˆ›æ–°ï¼ˆTODOï¼‰åœ¨æ“ä½œç³»ç»Ÿæ§åˆ¶å¹³å°ä¹‹å‰è¢«æ¿€æ´»æ—¶ï¼Œå®ƒä»¬å¿…é¡»ç”±ç‰¹å®šäºå¹³å°è€Œä¸æ˜¯å®¢æˆ·é€‰æ‹©çš„æ“ä½œç³»ç»Ÿçš„ä»£ç æ”¯æŒã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯åœ¨åˆ¶é€ è¿‡ç¨‹ä¸­å°†ä»£ç åµŒå…¥å¹³å°ä¸­ï¼ˆä¾‹å¦‚ï¼Œåœ¨é—ªå­˜è®¾å¤‡ä¸­ï¼‰ã€‚å¯¹è¿™ç§æŒä¹…å­˜å‚¨çš„éœ€æ±‚æ­£åœ¨å¿«é€Ÿå¢é•¿ã€‚è¯¥è§„èŒƒå®šä¹‰äº†å¤§å‹æµ·é‡å­˜å‚¨åª’ä»‹ç±»å‹ä¸Šçš„æŒä¹…å­˜å‚¨ï¼Œä»¥ä¾›å¹³å°æ”¯æŒä»£ç æ‰©å±•ä½¿ç”¨ï¼Œä»¥è¡¥å……ä¼ ç»Ÿæ–¹æ³•ã€‚è§„èŒƒä¸­æ˜ç¡®äº†å…¶å·¥ä½œåŸç†çš„å®šä¹‰ï¼Œä»¥ç¡®ä¿å›ºä»¶å¼€å‘å•†ã€OEMã€æ“ä½œç³»ç»Ÿä¾›åº”å•†ç”šè‡³ç¬¬ä¸‰æ–¹å¯ä»¥å®‰å…¨åœ°å…±äº«ç©ºé—´ï¼ŒåŒæ—¶å¢åŠ å¹³å°åŠŸèƒ½ã€‚ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®šä¹‰æä¾›è¿™äº›å±æ€§çš„å¼•å¯¼ç¯å¢ƒã€‚å®é™…ä¸Šï¼Œåœ¨ç¼–å†™æœ¬è§„èŒƒæ—¶ï¼Œå·²ç»å­˜åœ¨å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼Œä»å­¦æœ¯è§’åº¦æ¥çœ‹å¯èƒ½æ˜¯å¯è¡Œçš„ã€‚ç„¶è€Œï¼Œè€ƒè™‘åˆ°å½“å‰å›´ç»•æ”¯æŒçš„å¤„ç†å™¨å¹³å°çš„åŸºç¡€è®¾æ–½èƒ½åŠ›ï¼Œè¿™äº›æ›¿ä»£æ–¹æ¡ˆé€šå¸¸ä¼šå¸¦æ¥å¾ˆé«˜çš„é—¨æ§›ã€‚æœ¬è§„èŒƒæ—¨åœ¨æä¾›ä¸Šé¢åˆ—å‡ºçš„å±æ€§ï¼ŒåŒæ—¶ä¹Ÿè®¤è¯†åˆ°è¡Œä¸šçš„ç‹¬ç‰¹éœ€æ±‚ï¼Œè¯¥è¡Œä¸šåœ¨å…¼å®¹æ€§æ–¹é¢è¿›è¡Œäº†å¤§é‡æŠ•èµ„ï¼Œå¹¶ä¸”æ‹¥æœ‰å¤§é‡æ— æ³•ç«‹å³æ”¾å¼ƒçš„ç³»ç»Ÿå®‰è£…åŸºç¡€ã€‚è¿™äº›éœ€æ±‚æ¨åŠ¨äº†å¯¹æœ¬è§„èŒƒä¸­ä½“ç°çš„é™„åŠ å±æ€§çš„è¦æ±‚ï¼š è¿›åŒ–æ€§çš„ï¼Œè€Œä¸æ˜¯é©å‘½æ€§çš„ã€‚è§„èŒƒä¸­çš„æ¥å£å’Œç»“æ„æ—¨åœ¨å°½å¯èƒ½åœ°å‡å°‘åˆå§‹å®ç°çš„è´Ÿæ‹…ã€‚è™½ç„¶å·²ç»å°æ³¨æ„ä¿åœ¨æ¥å£æœ¬èº«ä¸­ç»´æŠ¤é€‚å½“çš„æŠ½è±¡ï¼Œä½†è¯¥è®¾è®¡è¿˜ç¡®ä¿å¯ä»¥é‡ç”¨ BIOS ä»£ç æ¥å®ç°æ¥å£ï¼Œè€Œåªéœ€è¦æœ€å°‘çš„é¢å¤–ç¼–ç å·¥ä½œã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ PC-AT å¹³å°ä¸Šï¼Œè§„èŒƒæœ€åˆå¯ä»¥ä½œä¸ºåŸºäºç°æœ‰ä»£ç çš„åº•å±‚å®ç°ä¹‹ä¸Šçš„è–„æ¥å£ï¼ˆthin Interface TODOï¼‰å±‚æ¥å®ç°ã€‚åŒæ—¶ï¼ŒæŠ½è±¡æ¥å£çš„å¼•å…¥æä¾›äº†å°†æ¥ä»é—ç•™ä»£ç çš„è¿ç§»ã€‚ä¸€æ—¦æŠ½è±¡è¢«ç¡®ç«‹ä¸ºå›ºä»¶å’Œæ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºåœ¨å¼•å¯¼æœŸé—´äº¤äº’çš„æ‰‹æ®µï¼Œå¼€å‘äººå‘˜å°±å¯ä»¥éšæ„æ›¿æ¢æŠ½è±¡æ¥å£ä¸‹çš„é—ç•™ä»£ç ã€‚ç±»ä¼¼çš„ç¡¬ä»¶é—ç•™è¿ç§»ä¹Ÿæ˜¯å¯èƒ½çš„ã€‚ç”±äºæŠ½è±¡éšè—äº†è®¾å¤‡çš„ç»†èŠ‚ï¼Œå› æ­¤å¯ä»¥ç§»é™¤åº•å±‚ç¡¬ä»¶ï¼Œå¹¶ç”¨æä¾›æ”¹è¿›åŠŸèƒ½ã€é™ä½æˆæœ¬æˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹çš„æ–°ç¡¬ä»¶æ›¿æ¢å®ƒã€‚æ˜¾ç„¶ï¼Œè¿™éœ€è¦ç¼–å†™æ–°çš„å¹³å°å›ºä»¶æ¥æ”¯æŒè®¾å¤‡å¹¶é€šè¿‡æŠ½è±¡æ¥å£å°†å…¶å‘ˆç°ç»™ OS åŠ è½½å™¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰æ¥å£æŠ½è±¡ï¼Œåˆ™å¯èƒ½æ ¹æœ¬æ— æ³•ç§»é™¤æ—§è®¾å¤‡ã€‚ è®¾è®¡ä¸Šçš„å…¼å®¹æ€§ã€‚ç³»ç»Ÿåˆ†åŒºç»“æ„çš„è®¾è®¡è¿˜ä¿ç•™äº†å½“å‰åœ¨â€œPC-ATâ€å¼•å¯¼ç¯å¢ƒä¸­ä½¿ç”¨çš„æ‰€æœ‰ç»“æ„ã€‚å› æ­¤ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤Ÿä»åŒä¸€ç£ç›˜å¼•å¯¼ä¼ ç»Ÿæ“ä½œç³»ç»Ÿæˆ– EFI-aware æ“ä½œç³»ç»Ÿçš„å•ä¸€ç³»ç»Ÿæ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ã€‚ ç®€åŒ–äº†æ“ä½œç³»ç»Ÿä¸­ç«‹çš„å¹³å°å¢å€¼çš„æ·»åŠ ã€‚è¯¥è§„èŒƒå®šä¹‰äº†ä¸€ä¸ªå¼€æ”¾çš„ã€å¯æ‰©å±•çš„æ¥å£ï¼Œå®ƒæœ‰åŠ©äºåˆ›å»ºå¹³å°â€œé©±åŠ¨ç¨‹åºâ€ã€‚è¿™äº›å¯èƒ½ç±»ä¼¼äºæ“ä½œç³»ç»Ÿé©±åŠ¨ç¨‹åºï¼Œåœ¨å¼•å¯¼è¿‡ç¨‹ä¸­ä¸ºæ–°è®¾å¤‡ç±»å‹æä¾›æ”¯æŒï¼Œæˆ–è€…å®ƒä»¬å¯èƒ½ç”¨äºå®ç°å¢å¼ºçš„å¹³å°åŠŸèƒ½ï¼Œä¾‹å¦‚å®¹é”™æˆ–å®‰å…¨æ€§ã€‚æ­¤å¤–ï¼Œè¿™ç§æ‰©å±•å¹³å°èƒ½åŠ›çš„èƒ½åŠ›ä»ä¸€å¼€å§‹å°±è¢«è®¾è®¡åˆ°è§„èŒƒä¸­ã€‚è¿™æ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜é¿å…åœ¨å°è¯•å°†æ–°ä»£ç æŒ¤å…¥ä¼ ç»Ÿ BIOS ç¯å¢ƒæ—¶æ‰€å›ºæœ‰çš„è®¸å¤šæŒ«è´¥æ„Ÿã€‚ç”±äºåŒ…å«ç”¨äºæ·»åŠ æ–°åè®®çš„æ¥å£ï¼ŒOEM æˆ–å›ºä»¶å¼€å‘äººå‘˜æ‹¥æœ‰ä»¥æ¨¡å—åŒ–æ–¹å¼å‘å¹³å°æ·»åŠ åŠŸèƒ½çš„åŸºç¡€è®¾æ–½ã€‚ç”±äºè§„èŒƒä¸­å®šä¹‰çš„è°ƒç”¨çº¦å®šå’Œç¯å¢ƒï¼Œæ­¤ç±»é©±åŠ¨ç¨‹åºå¯èƒ½ä¼šä½¿ç”¨é«˜çº§ç¼–ç è¯­è¨€æ¥å®ç°ã€‚è¿™åè¿‡æ¥å¯èƒ½æœ‰åŠ©äºé™ä½åˆ›æ–°çš„éš¾åº¦å’Œæˆæœ¬ã€‚ç³»ç»Ÿåˆ†åŒºé€‰é¡¹ä¸ºæ­¤ç±»æ‰©å±•æä¾›äº†éæ˜“å¤±æ€§å­˜å‚¨å™¨å­˜å‚¨çš„æ›¿ä»£æ–¹æ¡ˆã€‚ å»ºç«‹åœ¨ç°æœ‰æŠ•å…¥çš„åŸºç¡€ä¸Šã€‚åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œè§„èŒƒé¿å…åœ¨ç°æœ‰è¡Œä¸šè§„èŒƒæä¾›è¶³å¤Ÿè¦†ç›–çš„é¢†åŸŸé‡æ–°å®šä¹‰æ¥å£å’Œç»“æ„ã€‚ä¾‹å¦‚ï¼ŒACPI è§„èŒƒä¸ºæ“ä½œç³»ç»Ÿæä¾›äº†å‘ç°å’Œé…ç½®å¹³å°èµ„æºæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚åŒæ ·ï¼Œè§„èŒƒè®¾è®¡çš„è¿™ç§å“²å­¦é€‰æ‹©æ—¨åœ¨å°½å¯èƒ½é™ä½é‡‡ç”¨è¯¥è§„èŒƒçš„éšœç¢ã€‚ ç›®æ ‡å—ä¼—æœ¬æ–‡æ¡£ä¸»è¦é€‚ç”¨äºä»¥ä¸‹è¯»è€…ï¼š å°†å®ç° UEFI é©±åŠ¨ç¨‹åºçš„ IHV å’Œ OEMã€‚ å°†åˆ›å»ºæ”¯æŒçš„å¤„ç†å™¨å¹³å°çš„ OEM å‚å•†ï¼Œæ—¨åœ¨å¯åŠ¨ shrink-wrapï¼ˆTODOï¼‰çš„æ“ä½œç³»ç»Ÿã€‚ BIOS å¼€å‘äººå‘˜ï¼Œæ— è®ºæ˜¯åˆ›å»ºé€šç”¨ BIOS å’Œå…¶ä»–å›ºä»¶äº§å“çš„äººå‘˜ï¼Œè¿˜æ˜¯ä¿®æ”¹è¿™äº›äº§å“çš„æ”¯æŒäººå‘˜ã€‚ æ“ä½œç³»ç»Ÿå¼€å‘äººå‘˜å°†è°ƒæ•´ä»–ä»¬çš„ shrink-wrapï¼ˆTODOï¼‰æ“ä½œç³»ç»Ÿäº§å“ï¼Œç”¨æ¥åœ¨æ”¯æŒçš„åŸºäºå¤„ç†å™¨çš„å¹³å°ä¸Šè¿è¡Œã€‚ UEFI è®¾è®¡æ¦‚è¿°UEFI çš„è®¾è®¡åŸºäºä»¥ä¸‹åŸºæœ¬è¦ç´ ï¼š é‡ç”¨ç°æœ‰çš„åŸºäºè¡¨æ ¼çš„æ¥å£ã€‚ä¸ºäº†ä¿æŒå¯¹ç°æœ‰åŸºç¡€æ”¯æŒä»£ç ï¼ˆåŒ…æ‹¬æ“ä½œç³»ç»Ÿå’Œå›ºä»¶ï¼‰çš„æŠ•èµ„ï¼Œå¿…é¡»åœ¨å¸Œæœ›ç¬¦åˆ UEFI è§„èŒƒçš„å¹³å°ä¸Šï¼Œå®ç°é€šå¸¸åœ¨ä¸æ”¯æŒçš„å¤„ç†å™¨è§„èŒƒå…¼å®¹çš„å¹³å°ä¸Šï¼Œå®ç°çš„è®¸å¤šç°æœ‰è§„èŒƒã€‚ ï¼ˆæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…é™„å½• Qï¼šå‚è€ƒèµ„æ–™ã€‚ï¼‰ ç³»ç»Ÿåˆ†åŒºã€‚ç³»ç»Ÿåˆ†åŒºå®šä¹‰äº†ä¸€ä¸ªåˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿï¼Œå¯å…è®¸å¤šä¸ªä¾›åº”å•†ä¹‹é—´å®‰å…¨å…±äº«ï¼Œå¹¶ç”¨äºä¸åŒç›®çš„ã€‚åŒ…å«å•ç‹¬çš„ã€å¯å…±äº«çš„ç³»ç»Ÿåˆ†åŒºçš„èƒ½åŠ›æä¾›äº†å¢åŠ å¹³å°é™„åŠ å€¼çš„æœºä¼šï¼Œè€Œä¸ä¼šæ˜¾è‘—å¢åŠ å¯¹éæ˜“å¤±æ€§å¹³å°å­˜å‚¨å™¨çš„éœ€æ±‚ã€‚ å¼•å¯¼æœåŠ¡ã€‚å¼•å¯¼æœåŠ¡ä¸ºå¯åœ¨å¼•å¯¼æœŸé—´ä½¿ç”¨çš„è®¾å¤‡å’Œç³»ç»ŸåŠŸèƒ½æä¾›æ¥å£ã€‚è®¾å¤‡è®¿é—®æ˜¯é€šè¿‡â€œå¥æŸ„â€ï¼ˆhandlesï¼‰å’Œâ€œåè®®â€(protocols) æŠ½è±¡å‡ºæ¥çš„ã€‚è¿™æœ‰åˆ©äºé‡ç”¨ç°æœ‰ BIOS ä»£ç ï¼Œå°†åŸºæœ¬å®ç°è¦æ±‚ä¿æŒåœ¨è§„èŒƒä¹‹å¤–ï¼Œè€Œä¸ä¼šç»™è®¿é—®è®¾å¤‡çš„æ¶ˆè´¹è€…å¸¦æ¥è´Ÿæ‹…ã€‚ è¿è¡Œæ—¶æœåŠ¡ã€‚æä¾›äº†ä¸€ç»„æœ€å°çš„è¿è¡Œæ—¶æœåŠ¡ï¼Œä»¥ç¡®ä¿å¯¹åŸºç¡€å¹³å°çš„ç¡¬ä»¶èµ„æºè¿›è¡Œé€‚å½“çš„æŠ½è±¡ï¼Œè¿™äº›èµ„æºå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿåœ¨æ­£å¸¸è¿è¡Œæ—¶éœ€è¦çš„ã€‚ å›¾ 1-1 æè¿°äº†ç”¨äºå®Œæˆå¹³å°å’Œæ“ä½œç³»ç»Ÿå¼•å¯¼çš„ç¬¦åˆ UEFI è§„èŒƒçš„ç³»ç»Ÿçš„å„ç§ç»„ä»¶çš„äº¤äº’ã€‚ å¹³å°å›ºä»¶èƒ½å¤Ÿä»ç³»ç»Ÿåˆ†åŒºä¸­æ£€ç´¢æ“ä½œç³»ç»ŸåŠ è½½å™¨é•œåƒã€‚è¯¥è§„èŒƒæä¾›äº†å„ç§å¤§å®¹é‡å­˜å‚¨è®¾å¤‡ç±»å‹ï¼ŒåŒ…æ‹¬ç£ç›˜ã€CD-ROM å’Œ DVDï¼Œä»¥åŠé€šè¿‡ç½‘ç»œçš„è¿œç¨‹å¯åŠ¨ã€‚é€šè¿‡å¯æ‰©å±•çš„åè®®æ¥å£ï¼Œæœ‰å¯èƒ½å¢åŠ å…¶ä»–çš„å¼•å¯¼åª’ä»‹ç±»å‹ï¼Œå°½ç®¡å¦‚æœè¿™äº›åª’ä»‹éœ€è¦ä½¿ç”¨æœ¬æ–‡ä»¶ä¸­å®šä¹‰çš„åè®®ä»¥å¤–çš„åè®®ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹æ“ä½œç³»ç»ŸåŠ è½½å™¨ã€‚ ä¸€æ—¦å¯åŠ¨ï¼Œæ“ä½œç³»ç»ŸåŠ è½½ç¨‹åºå°†ç»§ç»­å¼•å¯¼æ•´ä¸ªæ“ä½œç³»ç»Ÿã€‚ä¸ºæ­¤ï¼Œå®ƒå¯ä»¥ä½¿ç”¨æœ¬è§„èŒƒæˆ–å…¶ä»–æ‰€éœ€è§„èŒƒå®šä¹‰çš„ EFI å¼•å¯¼æœåŠ¡å’Œæ¥å£æ¥æ¢æµ‹ã€è§£æå’Œåˆå§‹åŒ–å„ç§å¹³å°ç»„ä»¶å’Œç®¡ç†å®ƒä»¬çš„æ“ä½œç³»ç»Ÿè½¯ä»¶ã€‚åœ¨å¼•å¯¼é˜¶æ®µï¼ŒEFI è¿è¡Œæ—¶æœåŠ¡ä¹Ÿå¯ä¾› OS åŠ è½½å™¨ä½¿ç”¨ã€‚ UEFI é©±åŠ¨æ¨¡å‹æœ¬èŠ‚æè¿°äº†ç¬¦åˆæœ¬è§„èŒƒçš„å›ºä»¶çš„é©±åŠ¨æ¨¡å‹çš„ç›®æ ‡ã€‚ç›®æ ‡æ˜¯è®©è¿™ä¸ªé©±åŠ¨æ¨¡å‹ä¸ºæ‰€æœ‰ç±»å‹çš„æ€»çº¿å’Œè®¾å¤‡æä¾›ä¸€ä¸ªå®ç°æ€»çº¿é©±åŠ¨å’Œè®¾å¤‡é©±åŠ¨çš„æœºåˆ¶ã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæ”¯æŒçš„æ€»çº¿ç±»å‹åŒ…æ‹¬ PCIã€USB ç­‰ã€‚ éšç€ç¡¬ä»¶æ¶æ„çš„ä¸æ–­å‘å±•ï¼Œå¹³å°ä¸­å­˜åœ¨çš„æ€»çº¿æ•°é‡å’Œç±»å‹ä¹Ÿåœ¨ä¸æ–­å¢åŠ ã€‚è¿™ç§è¶‹åŠ¿åœ¨é«˜ç«¯æœåŠ¡å™¨ä¸­å°¤ä¸ºæ˜æ˜¾ã€‚ç„¶è€Œï¼Œæ›´å¤šæ ·åŒ–çš„æ€»çº¿ç±»å‹è¢«è®¾è®¡åˆ°æ¡Œé¢å’Œç§»åŠ¨ç³»ç»Ÿï¼Œç”šè‡³ä¸€äº›åµŒå…¥å¼ç³»ç»Ÿä¸­ã€‚è¿™ç§æ—¥ç›Šå¢é•¿çš„å¤æ‚æ€§ï¼Œæ„å‘³ç€åœ¨é¢„å¯åŠ¨ç¯å¢ƒä¸­ï¼Œéœ€è¦ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥æè¿°å’Œç®¡ç†å¹³å°ä¸­çš„æ‰€æœ‰æ€»çº¿å’Œè®¾å¤‡ã€‚UEFI é©±åŠ¨æ¨¡å‹ä»¥åè®®ã€æœåŠ¡å’Œå¯åŠ¨æœåŠ¡çš„å½¢å¼æä¾›äº†è¿™ç§ç®€å•çš„æ–¹æ³•ã€‚ UEFI é©±åŠ¨ç¨‹åºæ¨¡å‹ç›®æ ‡UEFI é©±åŠ¨æ¨¡å‹æœ‰ä»¥ä¸‹ç›®æ ‡ï¼š å…¼å®¹ â€“ ç¬¦åˆæ­¤è§„èŒƒçš„é©±åŠ¨ç¨‹åºå¿…é¡»ä¿æŒä¸ EFI 1.10 è§„èŒƒå’Œ UEFI è§„èŒƒçš„å…¼å®¹æ€§ã€‚è¿™æ„å‘³ç€ UEFI é©±åŠ¨ç¨‹åºæ¨¡å‹åˆ©ç”¨ UEFI 2. 0 è§„èŒƒä¸­çš„å¯æ‰©å±•æ€§æœºåˆ¶æ¥æ·»åŠ æ‰€éœ€çš„åŠŸèƒ½ã€‚ ç®€å• - ç¬¦åˆæœ¬è§„èŒƒçš„é©±åŠ¨ç¨‹åºå¿…é¡»æ˜“äºå®ç°ï¼Œæ˜“äºç»´æŠ¤ã€‚UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»å…è®¸é©±åŠ¨ç¼–å†™è€…ä¸“æ³¨äºæ­£åœ¨å¼€å‘çš„ç‰¹å®šè®¾å¤‡çš„é©±åŠ¨ã€‚é©±åŠ¨ç¨‹åºä¸åº”å…³æ³¨å¹³å°ç­–ç•¥æˆ–å¹³å°ç®¡ç†é—®é¢˜ã€‚è¿™äº›è€ƒè™‘åº”è¯¥ç•™ç»™ç³»ç»Ÿå›ºä»¶ã€‚ å¯æ‰©å±•æ€§ - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»èƒ½å¤Ÿé€‚åº”æ‰€æœ‰ç±»å‹çš„å¹³å°ã€‚è¿™äº›å¹³å°åŒ…æ‹¬åµŒå…¥å¼ç³»ç»Ÿã€ç§»åŠ¨å’Œæ¡Œé¢ç³»ç»Ÿï¼Œä»¥åŠå·¥ä½œç«™å’ŒæœåŠ¡å™¨ã€‚ çµæ´» - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»æ”¯æŒæšä¸¾æ‰€æœ‰è®¾å¤‡çš„èƒ½åŠ›ï¼Œæˆ–è€…åªæšä¸¾å¯åŠ¨æ‰€éœ€æ“ä½œç³»ç»Ÿçš„é‚£äº›è®¾å¤‡ã€‚æœ€å°çš„è®¾å¤‡æšä¸¾æä¾›äº†å¯¹æ›´å¿«é€Ÿçš„å¯åŠ¨èƒ½åŠ›çš„æ”¯æŒï¼Œè€Œå®Œæ•´çš„è®¾å¤‡åª’ä½“æä¾›äº†åœ¨ç³»ç»Ÿä¸­å­˜åœ¨çš„ä»»ä½•å¯åŠ¨è®¾å¤‡ä¸Šæ‰§è¡Œæ“ä½œç³»ç»Ÿå®‰è£…ã€ç³»ç»Ÿç»´æŠ¤æˆ–ç³»ç»Ÿè¯Šæ–­çš„èƒ½åŠ›ã€‚ å¯æ‰©å±•æ€§ - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»èƒ½å¤Ÿæ‰©å±•åˆ°æœªæ¥å®šä¹‰çš„æ€»çº¿ç±»å‹ã€‚ å¯ç§»æ¤æ€§ - æ ¹æ® UEFI é©±åŠ¨æ¨¡å‹ç¼–å†™çš„é©±åŠ¨ï¼Œå¿…é¡»åœ¨ä¸åŒå¹³å°å’Œæ”¯æŒçš„å¤„ç†å™¨æ¶æ„ä¹‹é—´å¯ç§»æ¤ã€‚ å¯äº’æ“ä½œæ€§ - é©±åŠ¨ç¨‹åºå¿…é¡»ä¸å…¶ä»–é©±åŠ¨ç¨‹åºå’Œç³»ç»Ÿå›ºä»¶å…±å­˜ï¼Œå¹¶ä¸”å¿…é¡»åœ¨ä¸äº§ç”Ÿèµ„æºå†²çªçš„æƒ…å†µä¸‹è¿›è¡Œæ“ä½œã€‚ æè¿°å¤æ‚çš„æ€»çº¿å±‚æ¬¡ç»“æ„ - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»èƒ½å¤Ÿæè¿°å„ç§æ€»çº¿æ‹“æ‰‘ç»“æ„ï¼Œä»éå¸¸ç®€å•çš„å•æ€»çº¿å¹³å°åˆ°åŒ…å«è®¸å¤šä¸åŒç±»å‹æ€»çº¿çš„éå¸¸å¤æ‚çš„å¹³å°ã€‚ é©±åŠ¨å ç”¨ç©ºé—´å° - ç”± UEFI é©±åŠ¨ç¨‹åºæ¨¡å‹äº§ç”Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°å¿…é¡»æœ€å°åŒ–ï¼Œä»¥å‡å°‘æ•´ä½“å¹³å°æˆæœ¬ã€‚è™½ç„¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§æ˜¯ç›®æ ‡ï¼Œä½†æ”¯æŒè¿™äº›æ‰€éœ€çš„é¢å¤–å¼€é”€å¿…é¡»ä¿æŒåœ¨æœ€ä½æ°´å¹³ï¼Œä»¥é˜²æ­¢å›ºä»¶ç»„ä»¶çš„å¤§å°å˜å¾—æ— æ³•ç®¡ç†ã€‚ è§£å†³é—ç•™ Option ROM çš„é—®é¢˜ - UEFI é©±åŠ¨æ¨¡å‹å¿…é¡»ç›´æ¥è§£å†³é—ç•™ Option ROM çš„çº¦æŸå’Œé™åˆ¶ã€‚å…·ä½“æ¥è¯´ï¼Œå¿…é¡»èƒ½å¤Ÿå»ºç«‹åŒæ—¶æ”¯æŒ UEFI é©±åŠ¨å’Œä¼ ç»Ÿ Option ROM çš„æ’ä»¶å¡ï¼Œè¿™ç§å¡å¯ä»¥åœ¨ä¼ ç»Ÿ BIOS ç³»ç»Ÿå’Œç¬¦åˆ UEFI çš„å¹³å°ä¸Šæ‰§è¡Œï¼Œè€Œæ— éœ€ä¿®æ”¹å¡ä¸Šçš„ä»£ç ã€‚è¯¥è§£å†³æ–¹æ¡ˆå¿…é¡»æä¾›ä¸€ä¸ªä»ä¼ ç»Ÿ Option ROM é©±åŠ¨ç¨‹åºè¿ç§»åˆ° UEFI é©±åŠ¨ç¨‹åºçš„è¿›åŒ–è·¯å¾„ã€‚ é—ç•™ Option ROM é—®é¢˜è¿™ä¸ªæ”¯æŒé©±åŠ¨æ¨¡å‹çš„æƒ³æ³•æ¥è‡ªäºå¯¹ UEFI è§„èŒƒçš„åé¦ˆï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ˜ç¡®çš„ã€ç”±å¸‚åœºé©±åŠ¨çš„å¯¹ä¼ ç»Ÿé€‰é¡¹ ROMï¼ˆæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºæ‰©å±• ROMï¼‰çš„æ›¿ä»£è¦æ±‚ã€‚äººä»¬è®¤ä¸ºï¼ŒUEFI è§„èŒƒçš„å‡ºç°ä»£è¡¨äº†ä¸€ä¸ªæœºä¼šï¼Œé€šè¿‡ç”¨ä¸€ç§åœ¨ UEFI è§„èŒƒæ¡†æ¶å†…å·¥ä½œçš„æ›¿ä»£æœºåˆ¶æ¥å–ä»£ä¼ ç»Ÿé€‰é¡¹ ROM é•œåƒçš„æ„å»ºå’Œæ“ä½œï¼Œä»è€Œæ‘†è„±éšå«çš„é™åˆ¶ã€‚ è¿ç§»è¦æ±‚è¿ç§»è¦æ±‚æ¶µç›–äº†ä»æœ€åˆå®æ–½æœ¬è§„èŒƒåˆ°æœªæ¥æ‰€æœ‰å¹³å°å’Œæ“ä½œç³»ç»Ÿéƒ½å®æ–½æœ¬è§„èŒƒçš„è¿‡æ¸¡æ—¶æœŸã€‚åœ¨è¿™ä¸€æ—¶æœŸï¼Œæœ‰ä¸¤ä¸ªä¸»è¦çš„å…¼å®¹æ€§è€ƒè™‘æ˜¯å¾ˆé‡è¦çš„ã€‚ èƒ½å¤Ÿç»§ç»­å¯åŠ¨ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿï¼› èƒ½å¤Ÿåœ¨ç°æœ‰çš„å¹³å°ä¸Šå®ç° UEFIï¼Œå°½å¯èƒ½å¤šåœ°å¤ç”¨ç°æœ‰çš„å›ºä»¶ä»£ç ï¼Œå°†å¼€å‘èµ„æºå’Œæ—¶é—´è¦æ±‚é™åˆ°æœ€ä½ã€‚ æ—§ç‰ˆæ“ä½œç³»ç»Ÿæ”¯æŒUEFI è§„èŒƒä»£è¡¨äº†æ”¶ç¼©å¼æ“ä½œç³»ç»Ÿå’Œå›ºä»¶åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­è¿›è¡Œé€šä¿¡çš„é¦–é€‰æ–¹å¼ã€‚ç„¶è€Œï¼Œé€‰æ‹©åˆ¶ä½œä¸€ä¸ªç¬¦åˆè¯¥è§„èŒƒçš„å¹³å°ï¼Œå¹¶ä¸æ’é™¤è¯¥å¹³å°ï¼Œä¹Ÿæ”¯æŒä¸äº†è§£ UEFI è§„èŒƒçš„ï¼Œç°æœ‰ä¼ ç»Ÿæ“ä½œç³»ç»ŸäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ UEFI è§„èŒƒå¹¶ä¸é™åˆ¶å¹³å°è®¾è®¡è€…ï¼Œé€‰æ‹©åŒæ—¶æ”¯æŒ UEFI è§„èŒƒå’Œæ›´ä¼ ç»Ÿçš„ â€œPC-AT â€œå¯åŠ¨åŸºç¡€æ¶æ„ã€‚å¦‚æœè¦å®ç°è¿™æ ·çš„ä¼ ç»ŸåŸºç¡€æ¶æ„ï¼Œåº”è¯¥æŒ‰ç…§ç°æœ‰çš„è¡Œä¸šæƒ¯ä¾‹æ¥å¼€å‘ï¼Œè¿™äº›æƒ¯ä¾‹æ˜¯åœ¨æœ¬è§„èŒƒèŒƒå›´ä¹‹å¤–å®šä¹‰çš„ã€‚åœ¨ä»»ä½•ç»™å®šçš„å¹³å°ä¸Šï¼Œæ”¯æŒçš„ä¼ ç»Ÿæ“ä½œç³»ç»Ÿçš„é€‰é¡¹æ˜¯ç”±è¯¥å¹³å°çš„åˆ¶é€ å•†å†³å®šçš„ã€‚ åœ¨æ—§å¹³å°ä¸Šæ”¯æŒ UEFI è§„èŒƒUEFI è§„èŒƒç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œå…è®¸ä»¥æœ€å°‘çš„å¼€å‘å·¥ä½œæ‰©å±•ç°æœ‰ç³»ç»Ÿä»¥æ”¯æŒå®ƒã€‚ç‰¹åˆ«æ˜¯ UEFI è§„èŒƒä¸­å®šä¹‰çš„æŠ½è±¡ç»“æ„å’ŒæœåŠ¡ï¼Œéƒ½å¯ä»¥åœ¨é—ç•™å¹³å°ä¸Šå¾—åˆ°æ”¯æŒ ä¾‹å¦‚ï¼Œè¦åœ¨ç°æœ‰ä¸”å—æ”¯æŒçš„åŸºäº 32 ä½çš„å¹³å°ä¸Šå®ç°æ­¤ç±»æ”¯æŒï¼Œè¯¥å¹³å°ä½¿ç”¨ä¼ ç»Ÿ BIOS æ¥æ”¯æŒæ“ä½œç³»ç»Ÿå¯åŠ¨ï¼Œéœ€è¦æä¾›é¢å¤–çš„å›ºä»¶ä»£ç å±‚ã€‚éœ€è¦è¿™äº›é¢å¤–çš„ä»£ç æ¥å°†æœåŠ¡å’Œè®¾å¤‡çš„ç°æœ‰æ¥å£è½¬æ¢ä¸ºå¯¹æœ¬è§„èŒƒä¸­å®šä¹‰çš„æŠ½è±¡çš„æ”¯æŒã€‚ æœ¬æ–‡æ¡£ä¸­ä½¿ç”¨çš„çº¦å®šæ•°æ®ç»“æ„æè¿°æ”¯æŒçš„å¤„ç†å™¨æ˜¯â€œå°ç«¯â€æœºå™¨ã€‚è¿™ç§åŒºåˆ«æ„å‘³ç€å†…å­˜ä¸­å¤šå­—èŠ‚æ•°æ®é¡¹çš„ä½ä½å­—èŠ‚ä½äºæœ€ä½åœ°å€ï¼Œè€Œé«˜ä½å­—èŠ‚ä½äºæœ€é«˜åœ°å€ã€‚ä¸€äº›å—æ”¯æŒçš„ 64 ä½å¤„ç†å™¨å¯ä»¥é…ç½®ä¸ºâ€œå°ç«¯â€å’Œâ€œå¤§ç«¯â€æ“ä½œã€‚æ‰€æœ‰æ—¨åœ¨ç¬¦åˆæœ¬è§„èŒƒçš„å®ç°éƒ½ä½¿ç”¨â€œå°ç«¯â€æ“ä½œã€‚ åœ¨æŸäº›å†…å­˜å¸ƒå±€æè¿°ä¸­ï¼ŒæŸäº›å­—æ®µè¢«æ ‡è®°ä¸ºä¿ç•™ã€‚è½¯ä»¶å¿…é¡»å°†è¿™äº›å­—æ®µåˆå§‹åŒ–ä¸ºé›¶å¹¶åœ¨è¯»å–æ—¶å¿½ç•¥å®ƒä»¬ã€‚åœ¨æ›´æ–°æ“ä½œä¸­ï¼Œè½¯ä»¶å¿…é¡»ä¿ç•™ä»»ä½•ä¿ç•™å­—æ®µã€‚ åè®®æè¿°åè®®æè¿°ä¸€èˆ¬æœ‰ä»¥ä¸‹æ ¼å¼ï¼š åè®®åç§°ï¼šåè®®æ¥å£çš„æ­£å¼åç§°ã€‚ æ‘˜è¦ï¼šåè®®æ¥å£çš„ç®€è¦æè¿°ã€‚ GUIDï¼šåè®®æ¥å£çš„ 128 ä½ GUID (Globally Unique Identifier)ã€‚ åè®®æ¥å£ç»“æ„ï¼šä¸€ç§â€œc é£æ ¼â€çš„æ•°æ®ç»“æ„å®šä¹‰ï¼ŒåŒ…å«ç”±è¯¥åè®®æ¥å£äº§ç”Ÿçš„è¿‡ç¨‹å’Œæ•°æ®å­—æ®µã€‚ å‚æ•°ï¼šåè®®æ¥å£ç»“æ„ä¸­å„å­—æ®µçš„ç®€è¦è¯´æ˜ã€‚ æè¿°ï¼šå¯¹æ¥å£æä¾›çš„åŠŸèƒ½çš„æè¿°ï¼ŒåŒ…æ‹¬è°ƒç”¨è€…åº”è¯¥çŸ¥é“çš„ä»»ä½•é™åˆ¶å’Œè­¦å‘Šã€‚ ç›¸å…³å®šä¹‰ï¼šåè®®æ¥å£ç»“æ„æˆ–å…¶ä»»ä½•è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ç±»å‹å£°æ˜å’Œå¸¸é‡ã€‚ è¿‡ç¨‹æè¿°è¿‡ç¨‹æè¿°é€šå¸¸å…·æœ‰ä»¥ä¸‹æ ¼å¼ï¼š è¿‡ç¨‹åç§°ï¼šè¿‡ç¨‹çš„æ­£å¼åç§°ã€‚ æ‘˜è¦ï¼šè¿‡ç¨‹çš„ç®€è¦è¯´æ˜ã€‚ åŸå‹ï¼šå®šä¹‰è°ƒç”¨åºåˆ—çš„â€œC é£æ ¼â€è¿‡ç¨‹æ ‡å¤´ã€‚ å‚æ•°ï¼šå¯¹ç¨‹åºåŸå‹ä¸­æ¯ä¸ªå­—æ®µçš„ç®€è¦æè¿°ã€‚ æè¿°ï¼šå¯¹æ¥å£æ‰€æä¾›çš„åŠŸèƒ½çš„æè¿°ï¼ŒåŒ…æ‹¬è°ƒç”¨è€…åº”è¯¥æ³¨æ„çš„ä»»ä½•é™åˆ¶å’Œæ³¨æ„äº‹é¡¹ã€‚ ç›¸å…³å®šä¹‰ï¼šä»…ç”±è¯¥è¿‡ç¨‹ä½¿ç”¨çš„ç±»å‹å£°æ˜å’Œå¸¸é‡ã€‚ è¿”å›çš„çŠ¶æ€ä»£ç ï¼šå¯¹æ¥å£æ‰€è¿”å›çš„ä»»ä½•ä»£ç çš„æè¿°ã€‚è¯¥è¿‡ç¨‹éœ€è¦å®ç°æœ¬è¡¨ä¸­åˆ—å‡ºçš„ä»»ä½•çŠ¶æ€ä»£ç ã€‚å¯ä»¥è¿”å›æ›´å¤šçš„é”™è¯¯ä»£ç ï¼Œä½†æ˜¯å®ƒä»¬ä¸ä¼šè¢«æ ‡å‡†çš„ç¬¦åˆæ€§æµ‹è¯•æ‰€æµ‹è¯•ï¼Œè€Œä¸”ä»»ä½•ä½¿ç”¨è¯¥ç¨‹åºçš„è½¯ä»¶ï¼Œéƒ½ä¸èƒ½ä¾èµ–äºå®ç°å¯èƒ½æä¾›çš„ä»»ä½•æ‰©å±•é”™è¯¯ä»£ç ã€‚ æŒ‡ä»¤æè¿°EBC æŒ‡ä»¤çš„æŒ‡ä»¤æè¿°ä¸€èˆ¬æœ‰ä»¥ä¸‹æ ¼å¼ï¼š æŒ‡ä»¤åç§°ï¼šæŒ‡ä»¤çš„æ­£å¼åç§°ã€‚ è¯­æ³•ï¼šæŒ‡ä»¤çš„ç®€è¦æè¿°ã€‚ æè¿°ï¼šå¯¹æŒ‡ä»¤æ‰€æä¾›çš„åŠŸèƒ½çš„æè¿°ï¼Œå¹¶é™„æœ‰æŒ‡ä»¤ç¼–ç çš„è¯¦ç»†è¡¨æ ¼ã€‚ æ“ä½œï¼šè¯¦ç»†è¯´æ˜å¯¹æ“ä½œæ•°è¿›è¡Œçš„æ“ä½œã€‚ è¡Œä¸ºå’Œé™åˆ¶ï¼šé€é¡¹æè¿°æŒ‡ä»¤ä¸­æ¶‰åŠçš„æ¯ä¸ªæ“ä½œæ•°çš„è¡Œä¸ºï¼Œä»¥åŠé€‚ç”¨äºæ“ä½œæ•°æˆ–æŒ‡ä»¤çš„ä»»ä½•é™åˆ¶ã€‚ ä¼ªä»£ç çº¦å®šæå‡ºä¼ªä»£ç æ˜¯ä¸ºäº†ä»¥æ›´ç®€æ´çš„å½¢å¼æè¿°ç®—æ³•ã€‚æœ¬æ–‡ä»¶ä¸­çš„æ‰€æœ‰ç®—æ³•éƒ½ä¸æ‰“ç®—ç›´æ¥è¿›è¡Œç¼–è¯‘ã€‚ä»£ç æ˜¯åœ¨ä¸å‘¨å›´æ–‡æœ¬ç›¸å¯¹åº”çš„æ°´å¹³ä¸Šå‘ˆç°çš„ã€‚ åœ¨æè¿°å˜é‡æ—¶ï¼Œåˆ—è¡¨æ˜¯ä¸€ä¸ªæ— åºçš„åŒè´¨å¯¹è±¡çš„é›†åˆã€‚ä¸€ä¸ªé˜Ÿåˆ—æ˜¯ä¸€ä¸ªåŒè´¨å¯¹è±¡çš„æœ‰åºåˆ—è¡¨ã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™å‡è®¾æ’åºä¸ºå…ˆè¿›å…ˆå‡ºã€‚ ä¼ªä»£ç ä»¥ç±»ä¼¼äº C çš„æ ¼å¼å‘ˆç°ï¼Œåœ¨é€‚å½“çš„åœ°æ–¹ä½¿ç”¨ C çº¦å®šã€‚ç¼–ç é£æ ¼ï¼Œç‰¹åˆ«æ˜¯ç¼©è¿›é£æ ¼ï¼Œæ˜¯ä¸ºäº†å¯è¯»æ€§ï¼Œä¸ä¸€å®šç¬¦åˆ UEFI è§„èŒƒçš„å®ç°ã€‚ æ’ç‰ˆçº¦å®šæœ¬æ–‡ä»¶é‡‡ç”¨äº†ä»¥ä¸‹æè¿°çš„æ’ç‰ˆå’Œè¯´æ˜æ€§æƒ¯ä¾‹ã€‚ çº¯æ–‡æœ¬ï¼šè§„èŒƒä¸­çš„ç»å¤§éƒ¨åˆ†æè¿°æ€§æ–‡æœ¬éƒ½ä½¿ç”¨æ™®é€šæ–‡æœ¬å­—ä½“ã€‚ çº¯æ–‡æœ¬ï¼ˆè“è‰²ï¼‰ï¼šä»»ä½•æœ‰ä¸‹åˆ’çº¿å’Œè“è‰²çš„çº¯æ–‡æœ¬éƒ½è¡¨ç¤ºä¸äº¤å‰å‚è€ƒèµ„æ–™çš„æ´»åŠ¨é“¾æ¥ã€‚ç‚¹å‡»è¯¥è¯ï¼Œå°±å¯ä»¥è·Ÿè¸ªè¶…é“¾æ¥ã€‚ åŠ ç²—ï¼šåœ¨æ–‡æœ¬ä¸­ï¼Œç²—ä½“å­—æ ‡è¯†äº†ä¸€ä¸ªå¤„ç†å™¨å¯„å­˜å™¨çš„åç§°ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œé»‘ä½“å­—å¯ä»¥ä½œä¸ºæ®µè½ä¸­çš„æ ‡é¢˜ã€‚ æ–œä½“ï¼šåœ¨æ–‡æœ¬ä¸­ï¼Œæ–œä½“å­—å¯ä»¥ç”¨ä½œå¼ºè°ƒï¼Œä»¥å¼•å…¥ä¸€ä¸ªæ–°çš„æœ¯è¯­æˆ–è¡¨ç¤ºæ‰‹å†Œæˆ–è§„èŒƒçš„åç§°ã€‚ åŠ ç²—ç­‰å®½ï¼ˆæš—çº¢è‰²ï¼‰ï¼šè®¡ç®—æœºä»£ç ã€ç¤ºä¾‹ä»£ç æ®µå’Œæ‰€æœ‰åŸå‹ä»£ç æ®µä½¿ç”¨ BOLD Monospace å­—ä½“ï¼Œé¢œè‰²ä¸ºæš—çº¢è‰²ã€‚è¿™äº›ä»£ç åˆ—è¡¨é€šå¸¸å‡ºç°åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç‹¬ç«‹çš„æ®µè½ä¸­ï¼Œå°½ç®¡å•è¯æˆ–ç‰‡æ®µä¹Ÿå¯ä»¥åµŒå…¥åˆ°ä¸€ä¸ªæ­£å¸¸çš„æ–‡æœ¬æ®µè½ä¸­ã€‚ åŠ ç²—ç­‰å®½ï¼ˆè“è‰²ï¼‰ï¼šç”¨ç²—ä½“å•è‰²å­—ä½“çš„å­—ï¼Œä¸‹åˆ’çº¿å’Œè“è‰²çš„å­—ï¼Œè¡¨ç¤ºè¯¥åŠŸèƒ½æˆ–ç±»å‹å®šä¹‰çš„ä»£ç å®šä¹‰çš„æ´»åŠ¨è¶…é“¾æ¥ã€‚ç‚¹å‡»è¯¥è¯ï¼Œå³å¯è¿›å…¥è¶…é“¾æ¥ã€‚ æ³¨æ„ï¼šå‡ºäºç®¡ç†å’Œæ–‡ä»¶å¤§å°çš„è€ƒè™‘ï¼Œæ¯ä¸€é¡µä¸Šåªæœ‰ç¬¬ä¸€æ¬¡å‡ºç°çš„å‚è€ƒæ–‡çŒ®æ˜¯ä¸€ä¸ªä¸»åŠ¨é“¾æ¥ã€‚åŒä¸€é¡µä¸Šçš„åç»­å‚è€ƒæ–‡çŒ®ä¸ä¼šè¢«ä¸»åŠ¨é“¾æ¥åˆ°å®šä¹‰ä¸Šï¼Œè€Œæ˜¯ä½¿ç”¨æ ‡å‡†çš„ã€æ— ä¸‹åˆ’çº¿çš„ BOLD Monospace å­—ä½“ã€‚åœ¨é¡µé¢ä¸Šæ‰¾åˆ°è¯¥åç§°çš„ç¬¬ä¸€ä¸ªå®ä¾‹ï¼ˆä½¿ç”¨ä¸‹åˆ’çº¿çš„ BOLD Monospace å­—ä½“ï¼‰ï¼Œç‚¹å‡»è¯¥è¯å³å¯è·³è½¬åˆ°è¯¥åŠŸèƒ½æˆ–ç±»å‹çš„å®šä¹‰ã€‚ æ–œä½“ç­‰å®½ï¼šåœ¨ä»£ç æˆ–æ–‡æœ¬ä¸­ï¼Œæ–œä½“å­—è¡¨ç¤ºå¿…é¡»æä¾›çš„å˜é‡ä¿¡æ¯çš„å ä½ç¬¦åç§°ï¼ˆå³å‚æ•°ï¼‰ã€‚ æ•°å­—æ ¼å¼åœ¨æœ¬æ ‡å‡†ä¸­ï¼ŒäºŒè¿›åˆ¶æ•°å­—æ˜¯ç”±ä»…ç”±è¥¿æ–¹é˜¿æ‹‰ä¼¯æ•°å­— 0 å’Œ 1 ç»„æˆçš„ä»»ä½•æ•°å­—åºåˆ—è¡¨ç¤ºçš„ï¼Œåé¢ç´§è·Ÿä¸€ä¸ªå°å†™çš„ bï¼ˆä¾‹å¦‚ï¼Œ0101bï¼‰ã€‚åœ¨äºŒè¿›åˆ¶æ•°å­—è¡¨ç¤ºä¸­çš„å­—ç¬¦ä¹‹é—´å¯ä»¥åŒ…å«ä¸‹åˆ’çº¿æˆ–ç©ºæ ¼ï¼Œä»¥å¢åŠ å¯è¯»æ€§æˆ–åˆ’åˆ†é¢†åŸŸè¾¹ç•Œï¼ˆä¾‹å¦‚ï¼Œ0 0101 1010b æˆ– 0_0101_1010bï¼‰ã€‚ åå…­è¿›åˆ¶åå…­è¿›åˆ¶æ•°å­—åœ¨æœ¬æ ‡å‡†ä¸­ç”¨ 0x è¡¨ç¤ºï¼Œå‰é¢æ˜¯ä»…ç”±è¥¿é˜¿æ‹‰ä¼¯æ•°å­— 0 è‡³ 9 å’Œ/æˆ–å¤§å†™è‹±æ–‡å­—æ¯ A è‡³ F ç»„æˆçš„ä»»ä½•æ•°å­—åºåˆ—ï¼ˆä¾‹å¦‚ï¼Œ0xFA23ï¼‰ã€‚åå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºä¸­çš„å­—ç¬¦ä¹‹é—´å¯ä»¥åŒ…å«ä¸‹åˆ’çº¿æˆ–ç©ºæ ¼ï¼Œä»¥å¢åŠ å¯è¯»æ€§æˆ–åˆ’å®šå­—æ®µè¾¹ç•Œï¼ˆä¾‹å¦‚ï¼Œ0xB FD8C FA23 æˆ– 0xB_FD8C_FA23ï¼‰ã€‚ åè¿›åˆ¶åœ¨æœ¬æ ‡å‡†ä¸­ï¼Œå°æ•°æ˜¯ç”±ä»…ç”±é˜¿æ‹‰ä¼¯æ•°å­— 0 åˆ° 9 ç»„æˆçš„ä»»ä½•æ•°å­—åºåˆ—æ¥è¡¨ç¤ºçš„ï¼Œåé¢ä¸ç´§è·Ÿå°å†™çš„ b æˆ–å°å†™çš„ hï¼ˆä¾‹å¦‚ï¼Œ25ï¼‰ã€‚æœ¬æ ‡å‡†ä½¿ç”¨ä»¥ä¸‹æƒ¯ä¾‹æ¥è¡¨ç¤ºå°æ•°ï¼š å°æ•°ç‚¹åˆ†éš”ç¬¦ï¼ˆå³åˆ†éš”æ•°å­—çš„æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ï¼‰æ˜¯ä¸€ä¸ªå¥å·ï¼› åƒä½æ•°åˆ†éš”ç¬¦ï¼ˆå³åˆ†éš”æ•°å­—éƒ¨åˆ†çš„ä¸‰ä½æ•°ç»„ï¼‰æ˜¯ä¸€ä¸ªé€—å·ï¼› åƒä½æ•°åˆ†éš”ç¬¦ç”¨äºæ•°å­—çš„æ•´æ•°éƒ¨åˆ†ï¼Œä¸ç”¨äºæ•°å­—çš„å°æ•°éƒ¨åˆ†ã€‚ äºŒè¿›åˆ¶å‰ç¼€æœ¬æ ‡å‡†ä½¿ç”¨å›½é™…å•ä½åˆ¶ï¼ˆSIï¼‰ä¸­å®šä¹‰çš„å‰ç¼€æ¥è¡¨ç¤º 10 çš„å¹‚å€¼ã€‚è§ â€œSI äºŒè¿›åˆ¶å‰ç¼€ â€œæ ‡é¢˜ä¸‹çš„ â€œUEFI ç›¸å…³æ–‡ä»¶é“¾æ¥â€ï¼ˆhttp://uefi.org/uefiï¼‰ã€‚ æœ¬æ ‡å‡†ä½¿ç”¨ISO/IEC 80000-13ã€Šæ•°é‡å’Œå•ä½â€“ç¬¬ 13 éƒ¨åˆ†ï¼šä¿¡æ¯ç§‘å­¦å’ŒæŠ€æœ¯ã€‹å’Œ IEEE 1514ã€ŠäºŒè¿›åˆ¶å€æ•°å‰ç¼€æ ‡å‡†ã€‹ä¸­å®šä¹‰çš„äºŒè¿›åˆ¶å‰ç¼€ï¼Œç”¨äºè¡¨ç¤º 2 çš„å¹‚å€¼ã€‚ ä¾‹å¦‚ï¼Œ4 KB æ„å‘³ç€ 4000 ä¸ªå­—èŠ‚ï¼Œ4 KiB æ„å‘³ç€ 4096 ä¸ªå­—èŠ‚ã€‚ ä¿®è®¢å·å¯¹ UEFI è§„èŒƒçš„æ›´æ–°è¢«è®¤ä¸ºæ˜¯æ–°çš„ä¿®è®¢æˆ–å‹˜è¯¯è¡¨ï¼Œå¦‚ä¸‹æ‰€è¿°ï¼š å½“æœ‰å®è´¨æ€§çš„æ–°å†…å®¹æˆ–å¯èƒ½ä¿®æ”¹ç°æœ‰è¡Œä¸ºçš„å˜åŒ–æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ä¿®è®¢ã€‚æ–°çš„ä¿®è®¢ç‰ˆç”±ä¸€ä¸ªä¸»è¦çš„ã€‚æ¬¡è¦çš„ç‰ˆæœ¬å·æ¥æŒ‡å®šï¼ˆä¾‹å¦‚ï¼šxx.yyï¼‰ã€‚åœ¨å˜åŒ–ç‰¹åˆ«å°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰ä¸€ä¸ª major.minor.minor çš„å‘½åæƒ¯ä¾‹ï¼ˆä¾‹å¦‚ xx.yy.zzï¼‰ã€‚ å½“æ‰¹å‡†çš„è§„èŒƒæ›´æ–°ä¸åŒ…æ‹¬ä»»ä½•é‡è¦çš„æ–°ææ–™æˆ–ä¿®æ”¹ç°æœ‰è¡Œä¸ºæ—¶ï¼Œå°±ä¼šäº§ç”Ÿå‹˜è¯¯çš„ç‰ˆæœ¬ã€‚å‹˜è¯¯çš„æŒ‡å®šæ–¹æ³•æ˜¯åœ¨ç‰ˆæœ¬å·åé¢åŠ ä¸Šä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œå¦‚ xx.yy å‹˜è¯¯ Aã€‚","categories":[],"tags":[]},{"title":"è§£å†³ VSCode è¿œç¨‹ç™»å½•å¤±è´¥ Error: WebSocket close with status code 1006","slug":"è§£å†³VSCodeè¿œç¨‹ç™»å½•å¤±è´¥Error-WebSocket-close-with-status-code-1006","date":"2022-10-15T10:53:20.000Z","updated":"2022-10-15T10:58:17.924Z","comments":true,"path":"2022/10/15/è§£å†³VSCodeè¿œç¨‹ç™»å½•å¤±è´¥Error-WebSocket-close-with-status-code-1006/","link":"","permalink":"http://example.com/2022/10/15/%E8%A7%A3%E5%86%B3VSCode%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5Error-WebSocket-close-with-status-code-1006/","excerpt":"","text":"ä¿ç•™ç°åœºä½¿ç”¨ VSCode è¿œç¨‹ç™»å½•å¤±è´¥ï¼ŒæŠ¥é”™ï¼šFailed to connect to the remote extension host server (Error: WebSocket close with status code 1006)ã€‚ è§£å†³æ–¹æ³•1234567891011vim /etc/ssh/sshd_configAllowTcpForwarding noAllowAgentForwarding no# æ›¿æ¢ä¸ºAllowTcpForwarding yesAllowAgentForwarding yes ä¿å­˜åé‡å¯ sshd æœåŠ¡ï¼š 1systemctl restart sshd","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"å¦‚ä½•ä½¿ç”¨ GitHub Actions","slug":"å¦‚ä½•ä½¿ç”¨GitHub-Actions","date":"2022-10-14T14:08:54.000Z","updated":"2022-12-03T12:19:56.101Z","comments":true,"path":"2022/10/14/å¦‚ä½•ä½¿ç”¨GitHub-Actions/","link":"","permalink":"http://example.com/2022/10/14/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8GitHub-Actions/","excerpt":"","text":"ç®€ä»‹GitHub Actions æ˜¯ GitHub åœ¨ 2018 å¹´æ¨å‡ºçš„æŒç»­é›†æˆæœåŠ¡ã€‚å®ƒå¯ä»¥è‡ªåŠ¨å®Œæˆä¸€äº›å¼€å‘å‘¨æœŸå†…çš„ä»»åŠ¡ï¼Œå¦‚ Push ä»£ç æ—¶è‡ªåŠ¨ç¼–è¯‘ï¼ŒPull ä»£ç æ—¶è‡ªåŠ¨æ‰§è¡Œæµ‹è¯•è„šæœ¬ç­‰ç­‰ã€‚ æˆ‘äº†è§£ GitHub Actions çš„å¥‘æœºæ˜¯ï¼Œæˆ‘åœ¨ GitHub ä¸Šä¿å­˜äº†ä¸€äº› Markdown æ–‡æ¡£ï¼Œæˆ‘å¸Œæœ›æ¯æ¬¡æ›´æ–°æ–‡æ¡£åè‡ªåŠ¨ä½¿ç”¨ Pandoc è½¬æ¢æˆ PDF æ–‡æ¡£ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ å¦‚ä½•é€šè¿‡ GitHub Actions å®ç°è¿™æ ·çš„éœ€æ±‚ã€‚ é¦–å…ˆæˆ‘ä»¬å…ˆç›´è§‚çš„äº†è§£ä¸€ä¸‹å®ƒåœ¨ GitHub çš„ä½ç½®ï¼Œå¦‚æœæ‰“å¼€ä¸€ä¸ªä»“åº“ï¼Œå®ƒæœ‰å›¾ä¸­ç»¿è‰²å¯¹å·âˆšï¼Œæˆ–è€…çº¢è‰²å‰å·Ã—ï¼Œè¯´æ˜è¿™ä¸ªé¡¹ç›®é…ç½®äº† GitHub Actionsï¼Œç»¿è‰²è¡¨ç¤ºè‡ªåŠ¨åŒ–çš„æµç¨‹è¿è¡ŒæˆåŠŸäº†ï¼Œçº¢è‰²è¡¨ç¤ºå¤±è´¥äº†ã€‚ æˆ‘ä»¬ç‚¹å¼€ActionsæŒ‰é’®å°±å¯ä»¥æŸ¥çœ‹å…·ä½“çš„ä»»åŠ¡è¯¦æƒ…ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆå­¦ä¹ å¦‚ä½•é…ç½®ä¸€ä¸ªç®€å•çš„ GitHub Actionsã€‚ é…ç½® GitHub ActionsGitHub Actions å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€äº›è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œå·¥å…·ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å‡å°‘é‡å¤å·¥ä½œï¼Œæ‰€ä»¥è¿™äº›å·¥å…·éƒ½å¯ä»¥åšæˆæ™®é€‚æ€§çš„å·¥å…·ã€‚è€Œ GitHub å®˜æ–¹å°±å¼€æ”¾äº†ä¸€ä¸ªè¿™ç±»å·¥å…·çš„å¸‚åœºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢æœç´¢è‡ªå·±æƒ³è¦çš„å·¥å…·ã€‚å› ä¸ºåˆå­¦ GitHub Actions æ‰€ä»¥ä¹Ÿä¸çŸ¥é“æ€ä¹ˆå†™é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æœç´¢ä¸€ä¸ªå¹¶åº”ç”¨å®ƒï¼Œçœ‹çœ‹åˆ«äººæ˜¯æ€ä¹ˆå†™çš„ã€‚ æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªè‡ªå·±çš„ä»“åº“ï¼Œç‚¹å‡»Actionsï¼Œæœç´¢æ¡†ä¸­æœç´¢PDFï¼Œåœ¨æœç´¢ç»“æœä¸­æ‰¾åˆ°Create PDF Â· Actionsè¿™ä¸ªå·¥å…·ã€‚å¦‚æœæœç´¢åˆ°ç‚¹å‡»Configureã€‚å¦‚æœæ˜¾ç¤ºæœªæ‰¾åˆ°ï¼Œåˆ™ç‚¹å‡»set up a workflow yourselfï¼ŒåŒæ ·æœç´¢PDFã€‚ æ‰“å¼€è¯¦æƒ…é¡µé¢ï¼Œæ‹‰åˆ°åº•ï¼Œå°†Example usageã€‚é‡Œçš„å†…å®¹å¤åˆ¶åˆ°ç¼–è¾‘æ¡†ä¸­ã€‚ç‚¹å‡»å³ä¸Šè§’Start commitå°†ä¼šæŠŠæˆ‘ä»¬æ–°å»ºçš„main.ymlæäº¤åˆ°ä»“åº“ä¸­ã€‚è¿™å°±ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªç”Ÿæˆ PDF çš„ GitHub Actionsã€‚å½“ç„¶æ¯ä¸ª Actions éƒ½æœ‰ä¸€äº›ä½¿ç”¨è¦æ±‚ï¼Œæ¯”å¦‚è¿™é‡Œè¿˜è¦æ ¹æ®ä»‹ç»ï¼Œåˆ›å»ºå‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ä»å“ªä¸ªæ–‡ä»¶å¤¹è·å–æºæ–‡ä»¶ï¼Œç”Ÿæˆåçš„ PDF åˆä¼šæ”¾åˆ°å“ªä¸ªæ–‡ä»¶å¤¹ç­‰ã€‚è¿™é‡Œå°±ä¸å†ä»‹ç»ï¼Œæˆ‘ä»¬å…ˆäº†è§£å¦‚ä½•åˆ›å»ºä¸€ä¸ª Actionsã€‚ Workflow é…ç½®GitHub Actions çš„é…ç½®æ–‡ä»¶å«åš workflow æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨ä»£ç ä»“åº“çš„.github/workflows ç›®å½•ã€‚ workflow æ–‡ä»¶é‡‡ç”¨ YAML æ ¼å¼ï¼Œæ–‡ä»¶åå¯ä»¥ä»»æ„å–ï¼Œä½†æ˜¯åç¼€åç»Ÿä¸€ä¸º.yml or .yamlï¼Œæ¯”å¦‚ foo.yml or foo.yamlã€‚ä¸€ä¸ªåº“å¯ä»¥æœ‰å¤šä¸ª workflow æ–‡ä»¶ã€‚GitHub åªè¦å‘ç°.github/workflows ç›®å½•é‡Œé¢æœ‰.yml or .yaml æ–‡ä»¶ï¼Œå°±ä¼šè‡ªåŠ¨è¿è¡Œè¯¥æ–‡ä»¶ï¼ˆå¹¶è¡Œï¼‰ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸ªå‚æ•°æ¥è§£é‡Šéƒ½æœ‰å“ªäº›åŠŸèƒ½ã€‚ onè§¦å‘ workflow çš„ GitHub äº‹ä»¶çš„åç§°ã€‚æ¯”å¦‚pushä»£ç æ—¶è§¦å‘ï¼Œå…¶ä»–äººforkä»£ç ä»“æ—¶è§¦å‘ç­‰ç­‰ã€‚ å¯ä»¥åªæœ‰ä¸€ä¸ªäº‹ä»¶è§¦å‘ï¼Œ 1on: push ä¹Ÿå¯æœ‰å¤šä¸ªäº‹ä»¶è§¦å‘ï¼Œä½¿ç”¨åˆ—è¡¨åˆ—ä¸¾ï¼Œ 1on: [push, fork] æ‰€æœ‰æ”¯æŒçš„äº‹ä»¶åˆ—è¡¨ï¼Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ on.[push|fork].[tags|branches]æ³¨æ„ï¼šä»è¿™é‡Œå¼€å§‹å°±ä¼šå‡ºç°ä¸€ä¸ªå­—æ®µä¸‹æœ‰å­å­—æ®µï¼Œæ¯ä¸ªç‚¹å·.åˆ†å‰²ä¸€ä¸ªå­å­—æ®µã€‚å¦‚pushæˆ–è€…forkå¯ä»¥ä½œä¸ºonçš„å­å­—æ®µï¼Œtagsæˆ–è€…brancheså¯ä»¥ä½œä¸ºpushæˆ–è€…forkçš„å­å­—æ®µã€‚åœ¨yamlæ–‡ä»¶ä¸­ï¼Œç¼©è¿›å¾ˆé‡è¦ï¼Œæ¯ä¸ªç¼©è¿›éƒ½è¡¨ç¤ºæ˜¯ä»å±å…³ç³»ï¼Œè¡¨ç¤ºæ˜¯è¯¥å­—æ®µçš„å­å­—æ®µã€‚åƒä¸‡è¦æ³¨æ„ç¼©è¿›å…³ç³»ï¼Œå¦‚æœç¼©è¿›å‡ºé”™ï¼Œé‚£ä¹ˆå°†æ— æ³•è§£æyamlæ–‡ä»¶ã€‚ æŒ‡å®šè§¦å‘äº‹ä»¶æ—¶ï¼Œå¯ä»¥é™å®šåˆ†æ”¯æˆ–æ ‡ç­¾ã€‚ 1234on: push: branches: - master ä¸Šé¢ä»£ç æŒ‡å®šï¼Œåªæœ‰ master åˆ†æ”¯å‘ç”Ÿ push äº‹ä»¶æ—¶ï¼Œæ‰ä¼šè§¦å‘ workflowã€‚ nameå·¥ä½œæµç¨‹çš„åç§°ã€‚GitHub åœ¨ä»“åº“çš„æ“ä½œé¡µé¢ä¸Šæ˜¾ç¤ºå·¥ä½œæµç¨‹çš„åç§°ã€‚å¦‚æœçœç•¥ nameï¼ŒGitHub å°†å…¶è®¾ç½®ä¸ºç›¸å¯¹äºä»“åº“æ ¹ç›®å½•çš„å·¥ä½œæµç¨‹æ–‡ä»¶è·¯å¾„ã€‚ jobsworkflow è¿è¡ŒåŒ…æ‹¬ä¸€é¡¹æˆ–å¤šé¡¹ jobsã€‚jobs é»˜è®¤æ˜¯å¹¶è¡Œè¿è¡Œã€‚è¦æŒ‰é¡ºåºè¿è¡Œä½œä¸šï¼Œå¯ä»¥ä½¿ç”¨ [job_id].needs å…³é”®è¯åœ¨å…¶ä»– job ä¸Šå®šä¹‰ä¾èµ–é¡¹ã€‚ æ¯ä¸ªä½œä¸šåœ¨ runs-on æŒ‡å®šçš„è¿è¡Œå™¨ç¯å¢ƒä¸­è¿è¡Œã€‚ jobs.[job_id]jobs ä¸­çš„æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ª[job_id] ï¼Œä¸”å…¶å¿…é¡»ä¸º jobs å¯¹è±¡ä¸­å”¯ä¸€çš„å­—ç¬¦ä¸²é”®å€¼ã€‚[job_id]å¿…é¡»ä»¥å­—æ¯æˆ–_å¼€å¤´ï¼Œå¹¶ä¸”åªèƒ½åŒ…å«å­—æ¯æ•°å­—å­—ç¬¦ã€-æˆ–_ã€‚ 12345jobs: first_job: # [job_id]ï¼Œä»»åŠ¡ id name: My first job second_job: name: My second job jobs.[job_id].[runs-on]runs-on å­—æ®µæŒ‡å®šè¿è¡Œæ‰€éœ€è¦çš„è™šæ‹Ÿæœºç¯å¢ƒã€‚å®ƒæ˜¯å¿…å¡«å­—æ®µã€‚ç›®å‰å¯ç”¨çš„è™šæ‹Ÿæœºå¦‚ä¸‹ã€‚ 123- ubuntu-latestï¼Œubuntu-18.04æˆ–ubuntu-16.04- windows-latestï¼Œwindows-2019æˆ–windows-2016- macOS-latestæˆ–macOS-10.14 ä¸‹é¢ä»£ç æŒ‡å®šè™šæ‹Ÿæœºç¯å¢ƒä¸º ubuntu-18.04ã€‚ 1runs-on: ubuntu-18.04 jobs.[job_id].nameworkflow æ–‡ä»¶çš„ä¸»ä½“æ˜¯ jobs å­—æ®µï¼Œè¡¨ç¤ºè¦æ‰§è¡Œçš„ä¸€é¡¹æˆ–å¤šé¡¹ä»»åŠ¡ã€‚ job_id é‡Œé¢çš„ name å­—æ®µæ˜¯ä»»åŠ¡çš„è¯´æ˜ã€‚å®ƒå¯ä»¥åœ¨ç½‘é¡µç«¯çš„ UI ä¸Šæ˜¾ç¤ºã€‚ 12345jobs: first_job: name: My first job # [job_name]ï¼Œä»»åŠ¡åç§° second_job: name: My second job jobs.[job_id].needsneeds å­—æ®µæŒ‡å®šå½“å‰ä»»åŠ¡çš„ä¾èµ–å…³ç³»ï¼Œå³è¿è¡Œé¡ºåºã€‚ 123456jobs: job1: job2: needs: job1 job3: needs: [job1, job2] ä¸Šé¢ä»£ç ä¸­ï¼Œjob1 å¿…é¡»å…ˆäº job2 å®Œæˆï¼Œè€Œ job3 ç­‰å¾… job1 å’Œ job2 çš„å®Œæˆæ‰èƒ½è¿è¡Œã€‚å› æ­¤ï¼Œè¿™ä¸ª workflow çš„è¿è¡Œé¡ºåºä¾æ¬¡ä¸ºï¼šjob1ã€job2ã€job3ã€‚ jobs.[job_id].stepssteps å­—æ®µæŒ‡å®šæ¯ä¸ª Job çš„è¿è¡Œæ­¥éª¤ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤ã€‚æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥æŒ‡å®šä»¥ä¸‹ä¸‰ä¸ªå­—æ®µã€‚ 123- jobs.[job_id].steps.nameï¼šæ­¥éª¤åç§°ã€‚- jobs.[job_id].steps.runï¼šè¯¥æ­¥éª¤è¿è¡Œçš„å‘½ä»¤æˆ–è€… actionã€‚- jobs.[job_id].steps.envï¼šè¯¥æ­¥éª¤æ‰€éœ€çš„ç¯å¢ƒå˜é‡ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ workflow æ–‡ä»¶çš„èŒƒä¾‹ã€‚ 12345678910111213141516name: Greeting from Monaon: pushjobs: my-job: name: My Job runs-on: ubuntu-latest steps: - name: Print a greeting env: MY_VAR: Hi there! My name is FIRST_NAME: Mona MIDDLE_NAME: The LAST_NAME: Octocat run: | echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME. ä¸Šé¢ä»£ç ä¸­ï¼Œsteps å­—æ®µåªåŒ…æ‹¬ä¸€ä¸ªæ­¥éª¤ã€‚è¯¥æ­¥éª¤å…ˆæ³¨å…¥å››ä¸ªç¯å¢ƒå˜é‡ï¼Œç„¶åæ‰§è¡Œä¸€æ¡ Bash å‘½ä»¤ã€‚ jobs.[job_id].steps[*].usesé€‰æ‹©ä¸€ä¸ª actionï¼Œå¯ä»¥ç†è§£ä¸ºè‹¥å¹² steps.runï¼Œæœ‰åˆ©äºä»£ç å¤ç”¨ã€‚è¿™ä¹Ÿæ˜¯ github action æœ€ä¸»è¦çš„åŠŸèƒ½ã€‚ æ¯”å¦‚æœ€å¸¸ç”¨çš„ï¼Œä¸‹è½½æœ¬ä»“åº“çš„ä»£ç åˆ°å·¥ä½œåŒºï¼Œå°±æ˜¯ä½¿ç”¨çš„ä¸€ä¸ª action å®Œæˆçš„ï¼š 123steps: - name: Check out Git repository uses: actions/checkout@v2 æ³¨ï¼š@v2 ä»€ä¹ˆæ„æ€ï¼Ÿè¡¨ç¤º Action çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¦‚æœä¸å¸¦ç‰ˆæœ¬å·çš„è¯ï¼Œå°±æ˜¯é»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚Github å®˜æ–¹å¼ºçƒˆè¦æ±‚æˆ‘ä»¬å¸¦ä¸Šç‰ˆæœ¬å·ã€‚è¿™æ ·å­çš„è¯ï¼Œæˆ‘ä»¬å°±ä¸ä¼šå‡ºç°ï¼šå†™å¥½ä¸€ä¸ª Workflowï¼Œä½†æ˜¯ç”±äºæŸä¸ª Action çš„ä½œè€…ä¸€æ›´æ–°ï¼Œæˆ‘ä»¬çš„ Workflow å°±å´©äº†çš„é—®é¢˜ jobs.[job_id].steps.runåœ¨ shell ä¸­æ‰§è¡Œçš„å‘½ä»¤ï¼š 123456steps: - uses: actions/checkout@v2 - name: create dir id: dir run: | mkdir output # create output dir ä»¥ä¸Šé…ç½®æ˜¯åœ¨ä¸‹è½½å®Œæœ¬ä»“åº“çš„ä»£ç åï¼Œåœ¨ä»“åº“æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªoutputæ–‡ä»¶å¤¹ã€‚æ³¨æ„run:åçš„|è¡¨ç¤ºå¯ä»¥å¤šè¡Œå‘½ä»¤ã€‚å¦‚æœæ²¡æœ‰|è¡¨ç¤ºåªèƒ½æ‰§è¡Œä¸€æ¡å‘½ä»¤ã€‚ jobs.[job_id].steps.working-directoryç”¨æ¥æŒ‡å®šåœ¨runå‘½ä»¤åœ¨å“ªæ‰§è¡Œã€‚ 123- name: Create dir run: mkdir output working-directory: ./build jobs.[job_id].steps.shellç”¨æ¥æŒ‡å®š shell ç±»å‹ï¼Œå¦‚ Pythonï¼Œbashï¼Œpowershell ç­‰ã€‚ 1234steps: - name: Display the path run: echo $PATH shell: bash æ‰€æœ‰æ”¯æŒçš„ç±»å‹è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ å¦‚ä½•è·³è¿‡ GitHub Actionsåœ¨ commit message ä¸­åªè¦åŒ…å«äº†ä¸‹é¢å‡ ä¸ªå…³é”®è¯å°±ä¼šè·³è¿‡ Github Actionsã€‚ 12345[skip ci][ci skip][no ci][skip actions][actions skip] å®ä¾‹ï¼šè‡ªåŠ¨ä½¿ç”¨ Pandoc å°† Markdown æ–‡ä»¶è½¬æ¢ä¸º PDFä»¥Dunky-Z/uefi-spec-zhé¡¹ç›®ä¸­ä½¿ç”¨çš„ GitHub Actions ä¸ºä¾‹ï¼Œè§£é‡Šå¦‚ä½•å®ç°å°† Markdown æ–‡ä»¶è½¬æ¢ä¸º PDFã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253# CI åä¸º MPPLname: MPPL# åœ¨ Push ä»£ç æ—¶è§¦å‘ CIon: pushjobs: # ä»»åŠ¡åç§°ä¸º convert_via_pandoc convert_via_pandoc: # åœ¨ ubuntu-latest ç³»ç»Ÿä¸Šè¿è¡Œ runs-on: ubuntu-latest steps: # æ­¥éª¤ä¸€ï¼šä¸‹è½½æœ€æ–°ä»£ç  - uses: actions/checkout@v2 # æ­¥éª¤äºŒï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å»ºç«‹ output æ–‡ä»¶å¤¹æ”¾ç”Ÿæˆçš„ PDF æ–‡ä»¶ - name: create file list id: files_list run: | mkdir output # create output dir # æ­¥éª¤ä¸‰ï¼šæ›´æ–°é¡¹ç›®çš„å­æ¨¡å— - name: Git Sumbodule Update run: | git submodule update --init --remote --recursive # æ­¥éª¤å››ï¼šä¸ºè¿è¡Œçš„ç³»ç»Ÿä¸­å®‰è£…éœ€è¦çš„å­—ä½“ï¼Œå› ä¸ºåŸç³»ç»Ÿæ²¡æœ‰éœ€è¦çš„ä¸­æ–‡å­—ä½“ # å­—ä½“æ¥æºä¸ºé¡¹ç›®ç›®å½•çš„MPPL/fonts - name: add fonts run: | sudo apt-get install ttf-mscorefonts-installer sudo apt-get install fontconfig fc-list :lang=zh ls -lh /usr/share/fonts/ cp -rf ./MPPL/fonts/* /usr/share/fonts/ mkfontscale mkfontdir fc-cache fc-list # æ­¥éª¤äº”ï¼šå®‰è£… pandoc å’Œ texlive - name: install pandoc run: | sudo apt-get update sudo apt-get install texlive-full sudo apt-get install pandoc sudo apt-get clean # æ­¥éª¤å…­ï¼šä½¿ç”¨ pandoc å‘½ä»¤ç”Ÿæˆ pdf - name: build pdf run: | cd src pandoc -f markdown-auto_identifiers --listings --pdf-engine=xelatex --template=../MPPL/templates/mppl.tex --output=../output/UEFIè§„èŒƒ-ä¸­æ–‡.pdf *.md # æ­¥éª¤ä¸ƒï¼šå°†ç”Ÿæˆçš„ç»“æœä¸Šä¼ åˆ° GitHub - uses: actions/upload-artifact@master with: name: output path: output æ³¨æ„äº‹é¡¹every step must define a uses or run keyevery step must define a uses or run key Â· Issue #2 Â· einaregilsson/beanstalk-deploy å‚è€ƒGH actions: a step cannot have both the uses and run keys Â· Issue #318 Â· fhem/mod-Buienradar every step must define a uses or run key Â· Issue #2 Â· einaregilsson/beanstalk-deploy","categories":[],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"},{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"Github","slug":"Github","permalink":"http://example.com/tags/Github/"},{"name":"CI","slug":"CI","permalink":"http://example.com/tags/CI/"}]},{"title":"åŠ å¯†ç®—æ³•æ€»ç»“","slug":"åŠ å¯†ç®—æ³•æ€»ç»“","date":"2022-10-10T05:44:32.000Z","updated":"2022-10-15T03:14:29.678Z","comments":true,"path":"2022/10/10/åŠ å¯†ç®—æ³•æ€»ç»“/","link":"","permalink":"http://example.com/2022/10/10/%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/","excerpt":"","text":"åŸºæœ¬æ¦‚å¿µæ˜æ–‡ä¸å¯†æ–‡ Plaintextï¼Œæ˜æ–‡ï¼Œæœªç»åŠ å¯†çš„æ¶ˆæ¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¯» Ciphertextï¼Œå¯†æ–‡ï¼ŒåŠ å¯†åçš„æ¶ˆæ¯ï¼Œä¸å¯è¯» Keyï¼Œå¯†é’¥ï¼Œç”¨äºåŠ å¯†å’Œè§£å¯†ï¼ˆæ ¸å¿ƒæ˜¯ç®—æ³•ï¼‰ åŠ å¯†ä¸è§£å¯†æ¦‚å¿µåŠ å¯†æ•°æ®åŠ å¯† çš„åŸºæœ¬è¿‡ç¨‹ï¼Œå°±æ˜¯å¯¹åŸæ¥ä¸º æ˜æ–‡ çš„æ–‡ä»¶æˆ–æ•°æ®æŒ‰ æŸç§ç®—æ³• è¿›è¡Œå¤„ç†ï¼Œä½¿å…¶æˆä¸º ä¸å¯è¯» çš„ä¸€æ®µä»£ç ï¼Œé€šå¸¸ç§°ä¸ºâ€œå¯†æ–‡â€ã€‚é€šè¿‡è¿™æ ·çš„é€”å¾„ï¼Œæ¥è¾¾åˆ° ä¿æŠ¤æ•°æ® ä¸è¢« éæ³•äººçªƒå–ã€é˜…è¯»çš„ç›®çš„ã€‚ è§£å¯†åŠ å¯† çš„ é€†è¿‡ç¨‹ ä¸º è§£å¯†ï¼Œå³å°†è¯¥ ç¼–ç ä¿¡æ¯ è½¬åŒ–ä¸ºå…¶ åŸæ¥æ•°æ® çš„è¿‡ç¨‹ã€‚ å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†åŠ å¯†ç®—æ³•åˆ† å¯¹ç§°åŠ å¯† å’Œ éå¯¹ç§°åŠ å¯†ï¼Œå…¶ä¸­å¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†ä¸è§£å¯† å¯†é’¥ç›¸åŒï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†å¯†é’¥ä¸è§£å¯† å¯†é’¥ä¸åŒï¼Œæ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç±» ä¸éœ€è¦å¯†é’¥ çš„ æ•£åˆ—ç®—æ³•ã€‚ å¯¹ç§°åŠ å¯†å¯¹ç§°åŠ å¯†ç®—æ³• æ˜¯åº”ç”¨è¾ƒæ—©çš„åŠ å¯†ç®—æ³•ï¼Œåˆç§°ä¸º å…±äº«å¯†é’¥åŠ å¯†ç®—æ³•ã€‚åœ¨ å¯¹ç§°åŠ å¯†ç®—æ³• ä¸­ï¼Œä½¿ç”¨çš„å¯†é’¥åªæœ‰ä¸€ä¸ªï¼Œå‘é€ å’Œ æ¥æ”¶ åŒæ–¹éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥å¯¹æ•°æ®è¿›è¡Œ åŠ å¯† å’Œ è§£å¯†ã€‚è¿™å°±è¦æ±‚åŠ å¯†å’Œè§£å¯†æ–¹äº‹å…ˆéƒ½å¿…é¡»çŸ¥é“åŠ å¯†çš„å¯†é’¥ã€‚ æ•°æ®åŠ å¯†è¿‡ç¨‹ï¼šåœ¨å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œæ•°æ®å‘é€æ–¹ å°† æ˜æ–‡ (åŸå§‹æ•°æ®) å’Œ åŠ å¯†å¯†é’¥ ä¸€èµ·ç»è¿‡ç‰¹æ®Š åŠ å¯†å¤„ç†ï¼Œç”Ÿæˆå¤æ‚çš„ åŠ å¯†å¯†æ–‡ è¿›è¡Œå‘é€ã€‚ æ•°æ®è§£å¯†è¿‡ç¨‹ï¼šæ•°æ®æ¥æ”¶æ–¹ æ”¶åˆ°å¯†æ–‡åï¼Œè‹¥æƒ³è¯»å–åŸæ•°æ®ï¼Œåˆ™éœ€è¦ä½¿ç”¨ åŠ å¯†ä½¿ç”¨çš„å¯†é’¥ åŠç›¸åŒç®—æ³•çš„ é€†ç®—æ³• å¯¹åŠ å¯†çš„å¯†æ–‡è¿›è¡Œè§£å¯†ï¼Œæ‰èƒ½ä½¿å…¶æ¢å¤æˆ å¯è¯»æ˜æ–‡ã€‚ éå¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œåˆç§°ä¸º å…¬å¼€å¯†é’¥åŠ å¯†ç®—æ³•ã€‚å®ƒéœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼Œä¸€ä¸ªç§°ä¸º å…¬å¼€å¯†é’¥ (public key)ï¼Œå³ å…¬é’¥ï¼Œå¦ä¸€ä¸ªç§°ä¸º ç§æœ‰å¯†é’¥ (private key)ï¼Œå³ ç§é’¥ã€‚å› ä¸º åŠ å¯† å’Œ è§£å¯† ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯†é’¥ï¼Œæ‰€ä»¥è¿™ç§ç®—æ³•ç§°ä¸º éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚ å¦‚æœä½¿ç”¨ å…¬é’¥ å¯¹æ•°æ® è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ ç§é’¥ æ‰èƒ½ è¿›è¡Œè§£å¯†ã€‚ å¦‚æœä½¿ç”¨ ç§é’¥ å¯¹æ•°æ® è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ å…¬é’¥ æ‰èƒ½ è¿›è¡Œè§£å¯†ã€‚ æ•°å­—ç­¾åæ•°å­—ç­¾åï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ¥è¯æ˜è‡ªå·±èº«ä»½çš„ä¸€ç§æ–¹å¼ã€‚åœ¨ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•é€šä¿¡æ—¶ï¼Œå¦‚ä½•éªŒè¯å‘é€è€…æ˜¯çœŸå®çš„å‘é€è€…ï¼Œå‘é€çš„ä¿¡æ¯æ²¡æœ‰ç¯¡æ”¹ï¼Œå°±éœ€è¦æ•°å­—ç­¾åã€‚ä¸€å¥— æ•°å­—ç­¾å é€šå¸¸å®šä¹‰ä¸¤ç§ äº’è¡¥ çš„è¿ç®—ï¼Œä¸€ä¸ªç”¨äº ç­¾åï¼Œå¦ä¸€ä¸ªç”¨äº éªŒè¯ã€‚åˆ†åˆ«ç”± å‘é€è€… æŒæœ‰èƒ½å¤Ÿ ä»£è¡¨è‡ªå·±èº«ä»½ çš„ ç§é’¥ï¼ˆç§é’¥ä¸å¯æ³„éœ²ï¼‰ï¼Œç”± æ¥å—è€… æŒæœ‰ä¸ç§é’¥å¯¹åº”çš„ å…¬é’¥ï¼Œèƒ½å¤Ÿåœ¨ æ¥å— åˆ°æ¥è‡ªå‘é€è€…ä¿¡æ¯æ—¶ç”¨äº éªŒè¯ å…¶èº«ä»½ã€‚ åŠ å¯†ç®—æ³•è¯¦è§£é€šè¿‡ä»¥ä¸Šç®€ä»‹å¯ä»¥äº†è§£åˆ°ï¼ŒåŠ å¯†ç®—æ³•åˆ†ä¸ºéœ€è¦ç§˜é’¥çš„å’Œä¸éœ€è¦ç§˜é’¥çš„ï¼Œéœ€è¦ç§˜é’¥çš„æœ‰å¯ä»¥åˆ†ä¸ºå¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†ä¸¤å¤§ç±»ã€‚æ¥æ¥æ¥æˆ‘ä»¬å°±è¯¦ç»†æ¢ç©¶ä¸€ä¸‹å„ä¸ªåŠ å¯†ç®—æ³•ã€‚ å“ˆå¸Œç®—æ³•ï¼ˆä¸å¯é€†ï¼‰å“ˆå¸Œç®—æ³•å¯ä»¥å°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ï¼Œç”Ÿæˆå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼ˆå“ˆå¸Œå€¼ï¼‰ã€‚ å¸¸è§çš„å“ˆå¸Œç®—æ³•æœ‰å¦‚ä¸‹ï¼š ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ MD5 å’Œ SHA ç³»åˆ—ï¼ˆæ¯”å¦‚æ¯”ç‰¹å¸ç”¨çš„ SHA256 ç®—æ³•ï¼ŒGit ä¸­çš„ commit hash ç”¨çš„ SHA1ï¼‰ã€‚ MD5MD5ï¼ˆMessage-Digestï¼‰å…¸å‹åº”ç”¨æ˜¯å¯¹ä¸€æ®µä¿¡æ¯äº§ç”Ÿ ä¿¡æ¯æ‘˜è¦ï¼Œä»¥ é˜²æ­¢è¢«ç¯¡æ”¹ã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒMD5 ä¸æ˜¯ä¸€ç§ åŠ å¯†ç®—æ³• è€Œæ˜¯ æ‘˜è¦ç®—æ³•ã€‚æ— è®ºæ˜¯å¤šé•¿çš„è¾“å…¥ï¼ŒMD5 éƒ½ä¼šè¾“å‡ºé•¿åº¦ä¸º 128bits çš„ä¸€ä¸ªä¸² (é€šå¸¸ç”¨ 16 è¿›åˆ¶ è¡¨ç¤ºä¸º 32 ä¸ªå­—ç¬¦)ã€‚ SHA1SHA1(Secure Hash Algorithm) æ˜¯å’Œ MD5 ä¸€æ ·æµè¡Œçš„ æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼Œç„¶è€Œ SHA1 æ¯” MD5 çš„ å®‰å…¨æ€§æ›´å¼ºã€‚å¯¹äºé•¿åº¦å°äº $2 ^{64}$ ä½çš„æ¶ˆæ¯ï¼ŒSHA1 ä¼šäº§ç”Ÿä¸€ä¸ª 160 ä½çš„ æ¶ˆæ¯æ‘˜è¦ã€‚ å¯¹ç§°åŠ å¯†ï¼ˆå¯é€†ï¼‰å¯¹ç§°åŠ å¯†ç®—æ³•æ˜¯åº”ç”¨æ¯”è¾ƒæ—©çš„ç®—æ³•ï¼Œåœ¨æ•°æ®åŠ å¯†å’Œè§£å¯†çš„æ—¶ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯†é’¥ï¼Œè¿™å°±é€ æˆäº†å¯†é’¥ç®¡ç†å›°éš¾çš„é—®é¢˜ã€‚å¸¸è§çš„å¯¹ç§°åŠ å¯†ç®—æ³•æœ‰ DESã€3DESã€AES128ã€AES192ã€AES256ã€‚ A5/1ã€A5/2åŠRC4A5/1ã€A5/2åŠRC4ä»–ä»¬éƒ½å±äºå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå¹¶éƒ½å±äºæµåŠ å¯†ã€‚å…ˆäº†è§£ä»€ä¹ˆæ˜¯æµåŠ å¯†ã€‚ åœ¨å¯†ç å­¦ä¸­ï¼ŒæµåŠ å¯†ï¼ˆè‹±è¯­ï¼šStream cipherï¼‰ï¼Œæ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒåŠ å¯†å’Œè§£å¯†åŒæ–¹ä½¿ç”¨ç›¸åŒä¼ªéšæœºåŠ å¯†æ•°æ®æµï¼ˆpseudo-random streamï¼‰ä½œä¸ºå¯†é’¥ï¼Œæ˜æ–‡æ•°æ®æ¯æ¬¡ä¸å¯†é’¥æ•°æ®æµé¡ºæ¬¡å¯¹åº”åŠ å¯†ï¼Œå¾—åˆ°å¯†æ–‡æ•°æ®æµã€‚å®è·µä¸­é€šå¸¸æŠŠä¿¡æ¯ä¸­çš„æ¯ä¸€ä½è·Ÿå¯†é’¥æµçš„æ¯ä¸€ä½è¿›è¡Œå¼‚æˆ– (xor) è¿ç®—æ¥è·å¾—å¯†æ–‡ã€‚ DESDES(Data Encryption Standard) æ˜¯å¯¹ç§°åŠ å¯†ç®—æ³•é¢†åŸŸä¸­çš„å…¸å‹ç®—æ³•ï¼Œæ˜¯ä¸€ç§å—åŠ å¯†ç®—æ³•(Block cipher)ï¼Œå…¶å¯†é’¥é»˜è®¤é•¿åº¦ä¸º 56 ä½ã€‚å—åŠ å¯†æˆ–è€…å«åˆ†ç»„åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹æ³•æ˜¯æŠŠæ˜æ–‡åˆ†æˆå‡ ä¸ªå›ºå®šå¤§å°çš„ block å—ï¼Œç„¶ååˆ†åˆ«å¯¹å…¶è¿›è¡ŒåŠ å¯†ã€‚ DES åŠ å¯†ç®—æ³•æ˜¯å¯¹ å¯†é’¥è¿›è¡Œä¿å¯†ï¼Œè€Œ å…¬å¼€ç®—æ³•ï¼ŒåŒ…æ‹¬åŠ å¯†å’Œè§£å¯†ç®—æ³•ã€‚è¿™æ ·ï¼Œåªæœ‰æŒæ¡äº†å’Œå‘é€æ–¹ ç›¸åŒå¯†é’¥ çš„äººæ‰èƒ½è§£è¯»ç”± DES åŠ å¯†ç®—æ³•åŠ å¯†çš„å¯†æ–‡æ•°æ®ã€‚å› æ­¤ï¼Œç ´è¯‘ DES åŠ å¯†ç®—æ³•å®é™…ä¸Šå°±æ˜¯ æœç´¢å¯†é’¥çš„ç¼–ç ã€‚å¯¹äº 56 ä½é•¿åº¦çš„ å¯†é’¥ æ¥è¯´ï¼Œå¦‚æœç”¨ ç©·ä¸¾æ³• æ¥è¿›è¡Œæœç´¢çš„è¯ï¼Œå…¶è¿ç®—æ¬¡æ•°ä¸º $2 ^{56}$ æ¬¡ã€‚ AESAES æ˜¯ç¾å›½å›½å®¶æ ‡å‡†æŠ€æœ¯ç ”ç©¶æ‰€ NIST æ—¨åœ¨å–ä»£ DES çš„ 21 ä¸–çºªçš„åŠ å¯†æ ‡å‡†ã€‚AES æ˜¯å—åŠ å¯†ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡å¤„ç†çš„æ•°æ®æ˜¯ä¸€å—ï¼ˆ16 å­—èŠ‚ï¼‰ï¼Œå½“æ•°æ®ä¸æ˜¯ 16 å­—èŠ‚çš„å€æ•°æ—¶å¡«å……ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åˆ†ç»„å¯†ç ï¼ˆåŒºåˆ«äºåŸºäºæ¯”ç‰¹ä½çš„æµå¯†ç ï¼‰ï¼Œ16 å­—èŠ‚æ˜¯åˆ†ç»„é•¿åº¦ã€‚AES å…±æœ‰ ECBã€CBC ç­‰å¤šç§æ¨¡å¼ã€‚ SM4SM4 ç®—æ³•äº 2012 å¹´è¢«å›½å®¶å¯†ç ç®¡ç†å±€ç¡®å®šä¸ºå›½å®¶å¯†ç è¡Œä¸šæ ‡å‡†ï¼Œæœ€åˆä¸»è¦ç”¨äº WAPI (WLAN Authentication and Privacy Infrastructure) æ— çº¿ç½‘ç»œä¸­ã€‚SM4 ç®—æ³•çš„å‡ºç°ä¸ºå°†æˆ‘å›½å•†ç”¨äº§å“ä¸Šçš„å¯†ç ç®—æ³•ç”±å›½é™…æ ‡å‡†æ›¿æ¢ä¸ºå›½å®¶æ ‡å‡†æä¾›äº†å¼ºæœ‰åŠ›çš„æ”¯æ’‘ã€‚éšåï¼ŒSM4 ç®—æ³•è¢«å¹¿æ³›åº”ç”¨äºæ”¿åºœåŠå…¬ã€å…¬å®‰ã€é“¶è¡Œã€ç¨åŠ¡ã€ç”µåŠ›ç­‰ä¿¡æ¯ç³»ç»Ÿä¸­ï¼Œå…¶åœ¨æˆ‘å›½å¯†ç è¡Œä¸šä¸­å æ®ç€æå…¶é‡è¦çš„ä½ç½®ã€‚ç±»ä¼¼äº DESã€AES ç®—æ³•ï¼ŒSM4 ç®—æ³•ä¹Ÿæ˜¯ä¸€ç§åˆ†ç»„å¯†ç ç®—æ³•ã€‚ éå¯¹ç§°åŠ å¯†ï¼ˆå¯é€†ï¼‰å­¦ä¹ éå¯¹ç§°åŠ å¯†ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—äº†è§£å¦‚ä½•è¿›è¡Œå®‰å…¨é«˜æ•ˆåœ°ç§˜é’¥äº¤æ¢ã€‚æˆ‘ä»¬ä¸å¯èƒ½è¯´é€šä¿¡åŒæ–¹åœ¨é€šä¿¡ä¹‹å‰ï¼Œå…ˆè§ä¸ªé¢åå•†ä¸€ä¸‹ç§˜é’¥ keyï¼Œè¿™æ ·éå¸¸ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯åˆä¸èƒ½ç›´æ¥æŠŠ key ç§˜é’¥é€šè¿‡ä¸€ä¸ªä¸å®‰å…¨çš„ä¿¡é“å‘å‡ºå»ï¼Œè¿™æ ·å°±ä¼šè¢«æ”»å‡»è€…æˆªè·ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥è®©åŒæ–¹åœ¨å®Œå…¨æ²¡æœ‰å¯¹æ–¹ä»»ä½•é¢„å…ˆä¿¡æ¯çš„æ¡ä»¶ä¸‹é€šè¿‡ä¸å®‰å…¨ä¿¡é“åˆ›å»ºèµ·ä¸€ä¸ªå¯†é’¥ã€‚è¿™ä¸ªå¯†é’¥å¯ä»¥åœ¨åç»­çš„é€šè®¯ä¸­ä½œä¸ºå¯¹ç§°å¯†é’¥æ¥åŠ å¯†é€šè®¯å†…å®¹ï¼Œè¿™å°±æ˜¯ç§˜é’¥äº¤æ¢çš„æ¦‚å¿µï¼ˆkey exchangeï¼‰ã€‚ Diffieâ€“Hellman key exchangeè¿ªè²-èµ«å°”æ›¼å¯†é’¥äº¤æ¢ï¼ˆè‹±è¯­ï¼šDiffieâ€“Hellman key exchangeï¼Œç¼©å†™ä¸º D-Hï¼‰æ˜¯ä¸€ç§å®‰å…¨åè®®ã€‚å¯ä»¥å®Œæˆä¸Šè¿°ç§˜é’¥äº¤æ¢ã€‚ é€šä¿¡åŒæ–¹ Alice å’Œ Bob ä¸ªå‡†å¤‡ä¸€ä¸ªå¤§çš„è´¨æ•°ï¼ŒAlice å‡†å¤‡çš„è´¨æ•°æ˜¯n=11, Bob å‡†å¤‡çš„è´¨æ•°æ˜¯g=7ï¼Œnå’Œgæ˜¯å…¬å¼€çš„ï¼Œä»»ä½•ç¬¬ä¸‰æ–¹éƒ½å¯ä»¥è·å–åˆ°è¿™ä¸ªä¿¡æ¯ã€‚ Alice å‡†å¤‡ä¸€ä¸ªéšæœºè‡ªç„¶æ•°x=3, é™¤äº† Alice æ²¡æœ‰äººçŸ¥é“xæ˜¯å¤šå°‘ï¼ŒAlice é€šè¿‡è®¡ç®—gçš„xæ¬¡æ–¹å¹¶ä¸”å¯¹ n å–æ¨¡ï¼Œå¾—åˆ°ç»“æœå¤§ A Alice æŠŠè®¡ç®—å¾—åˆ°çš„ç»“æœ A=2 å‘é€ç»™ Bobï¼Œè¿™ä¸ªä¿¡æ¯æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººå¯ä»¥è·å–åˆ° A Bob åŒæ ·å‡†å¤‡ä¸€ä¸ªéšæœºè‡ªç„¶æ•° y=6ï¼Œé™¤äº† Bob æ²¡æœ‰äººçŸ¥é“ y æ˜¯å¤šå°‘ï¼ŒBob é€šè¿‡è®¡ç®— g çš„ y æ¬¡æ–¹å¹¶ä¸”å¯¹ n å–æ¨¡ï¼Œå¾—åˆ°ç»“æœå¤§ B Bob æŠŠè®¡ç®—ç»“æœ B=4ï¼Œå‘é€ç»™ Aliceï¼Œï¼Œè¿™ä¸ªä¿¡æ¯æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººå¯ä»¥è·å–åˆ° B Alice æ‹¿åˆ° B ä»¥åï¼Œå¯¹ B æ±‚ x æ¬¡æ–¹å¹¶å¯¹ n å–æ¨¡ï¼Œå¾—åˆ° K1=9 Bob æ‹¿åˆ° A ä»¥åï¼Œå¯¹ A å¯¹ y æ¬¡æ–¹å¹¶å¯¹ n å–æ¨¡ï¼Œå¾—åˆ° K2=9 K1 == K2ï¼ŒAlice å’Œ Bob å¯ä»¥ä½¿ç”¨ K1ï¼ŒK2 ä½œä¸º Key è¿›è¡Œé€šä¿¡åŠ å¯†ã€‚ åœ¨æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ä¸­ï¼Œæ”»å‡»è€…æ˜¯æ— æ³•çŸ¥é“ xï¼Œy ä»¥åŠ K1ï¼ŒK2 çš„ï¼Œæˆ–è€…è¯´è®¡ç®—çš„å›°éš¾å¾ˆå¤§ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°å…·ä½“çš„æ•°å­¦é—®é¢˜ï¼Œç¦»æ•£å¯¹æ•°é—®é¢˜çš„æ±‚è§£ã€‚ RSADiffieâ€“Hellman key exchange å‘æ˜åä¸ä¹…å‡ºç°äº† RSAï¼Œå¦ä¸€ä¸ªè¿›è¡Œå…¬é’¥äº¤æ¢çš„ç®—æ³•ã€‚å®ƒä½¿ç”¨äº†éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚ RSA åŠ å¯†ç®—æ³•æ˜¯ç›®å‰æœ€æœ‰å½±å“åŠ›çš„ å…¬é’¥åŠ å¯†ç®—æ³•ï¼Œå¹¶ä¸”è¢«æ™®éè®¤ä¸ºæ˜¯ç›®å‰ æœ€ä¼˜ç§€çš„å…¬é’¥æ–¹æ¡ˆ ä¹‹ä¸€ã€‚RSA æ˜¯ç¬¬ä¸€ä¸ªèƒ½åŒæ—¶ç”¨äº åŠ å¯† å’Œ æ•°å­—ç­¾å çš„ç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿ æŠµæŠ— åˆ°ç›®å‰ä¸ºæ­¢å·²çŸ¥çš„ æ‰€æœ‰å¯†ç æ”»å‡»ï¼Œå·²è¢« ISO æ¨èä¸ºå…¬é’¥æ•°æ®åŠ å¯†æ ‡å‡†ã€‚ RSA æ‰€ç”¨åˆ°çš„æ•°å­¦åŸç†å¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„æ–‡ç« RSA ç®—æ³•åŸç†ï¼ˆä¸€ï¼‰ï¼Œæ–‡ç« ä»‹ç»äº† RSA ç”¨åˆ°çš„ä¸€äº›æ•°å­¦å®šç†ï¼Œä¸æ¶‰åŠè¯æ˜ï¼Œè¿™å¯¹äºäº†è§£ RSA ä¹Ÿå°±è¶³å¤Ÿäº†ã€‚ ç®€å•ä»‹ç»ä¸€ä¸‹ç§˜é’¥æ˜¯ç”Ÿæˆè¿‡ç¨‹ï¼ˆæ‘˜è‡ªRSA ç®—æ³•åŸç†ï¼ˆäºŒï¼‰ï¼‰ï¼š éšæœºé€‰æ‹©ä¸¤ä¸ªä¸ç›¸ç­‰çš„è´¨æ•° $p$ å’Œ $q$ã€‚çˆ±ä¸½ä¸é€‰æ‹©äº†$61$å’Œ$53$ã€‚ï¼ˆå®é™…åº”ç”¨ä¸­ï¼Œè¿™ä¸¤ä¸ªè´¨æ•°è¶Šå¤§ï¼Œå°±è¶Šéš¾ç ´è§£ã€‚ï¼‰ è®¡ç®—$p$å’Œ$q$çš„ä¹˜ç§¯$n$ã€‚çˆ±ä¸½ä¸å°±æŠŠ $61$ å’Œ $53$ ç›¸ä¹˜ã€‚ $$n = 61Ã—53 = 3233$$ $n$ çš„é•¿åº¦å°±æ˜¯å¯†é’¥é•¿åº¦ã€‚$3233$ å†™æˆäºŒè¿›åˆ¶æ˜¯ $110010100001$ï¼Œä¸€å…±æœ‰ $12$ ä½ï¼Œæ‰€ä»¥è¿™ä¸ªå¯†é’¥å°±æ˜¯ $12$ ä½ã€‚å®é™…åº”ç”¨ä¸­ï¼ŒRSA å¯†é’¥ä¸€èˆ¬æ˜¯ $1024$ ä½ï¼Œé‡è¦åœºåˆåˆ™ä¸º $2048$ ä½ã€‚ è®¡ç®— $n$ çš„æ¬§æ‹‰å‡½æ•°$\\varphi(n)$ã€‚æ ¹æ®å…¬å¼ï¼š $$\\varphi(n) = (p-1)(q-1)$$ çˆ±ä¸½ä¸ç®—å‡º$\\varphi(3233)$ ç­‰äº $60Ã—52$ï¼Œå³ $3120$ã€‚ éšæœºé€‰æ‹©ä¸€ä¸ªæ•´æ•° $e$ï¼Œæ¡ä»¶æ˜¯ $1&lt; e &lt; \\varphi(n)$ï¼Œä¸” $e$ ä¸$\\varphi(n)$ äº’è´¨ã€‚ çˆ±ä¸½ä¸å°±åœ¨ $1$ åˆ° $3120$ ä¹‹é—´ï¼Œéšæœºé€‰æ‹©äº† $17$ã€‚ï¼ˆå®é™…åº”ç”¨ä¸­ï¼Œå¸¸å¸¸é€‰æ‹© $65537$ã€‚ï¼‰ è®¡ç®— $e$ å¯¹äº$\\varphi(n)$ çš„æ¨¡åå…ƒç´  $d$ã€‚ æ‰€è°“â€æ¨¡åå…ƒç´ â€å°±æ˜¯æŒ‡æœ‰ä¸€ä¸ªæ•´æ•° $d$ï¼Œå¯ä»¥ä½¿å¾— $ed$ è¢«$\\varphi(n)$ é™¤çš„ä½™æ•°ä¸º $1$ã€‚ $$ed â‰¡ 1 (mod \\varphi(n))$$ è¿™ä¸ªå¼å­ç­‰ä»·äº $$ed - 1 = k\\varphi(n)$$ äºæ˜¯ï¼Œæ‰¾åˆ°æ¨¡åå…ƒç´  $d$ï¼Œå®è´¨ä¸Šå°±æ˜¯å¯¹ä¸‹é¢è¿™ä¸ªäºŒå…ƒä¸€æ¬¡æ–¹ç¨‹æ±‚è§£ã€‚ $$ex + \\varphi(n)y = 1$$ å·²çŸ¥ $e=17$, $\\varphi(n)=3120$ï¼Œ $$17x + 3120y = 1$$ è¿™ä¸ªæ–¹ç¨‹å¯ä»¥ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚è§£ï¼Œæ­¤å¤„çœç•¥å…·ä½“è¿‡ç¨‹ã€‚æ€»ä¹‹ï¼Œçˆ±ä¸½ä¸ç®—å‡ºä¸€ç»„æ•´æ•°è§£ä¸º $(x,y)=(2753,-15)$ï¼Œå³ $d=2753$ã€‚ è‡³æ­¤æ‰€æœ‰è®¡ç®—å®Œæˆã€‚ å°† $n$ å’Œ $e$ å°è£…æˆå…¬é’¥ï¼Œ$n$ å’Œ $d$ å°è£…æˆç§é’¥ã€‚ åœ¨çˆ±ä¸½ä¸çš„ä¾‹å­ä¸­ï¼Œ$n=3233$ï¼Œ$e=17$ï¼Œ$d=2753$ï¼Œæ‰€ä»¥å…¬é’¥å°±æ˜¯ $(3233,17)$ï¼Œç§é’¥å°±æ˜¯$3233, 2753ï¼‰$ã€‚ å®é™…åº”ç”¨ä¸­ï¼Œå…¬é’¥å’Œç§é’¥çš„æ•°æ®éƒ½é‡‡ç”¨ ASN.1 æ ¼å¼è¡¨è¾¾ã€‚ RSA ç®—æ³•ä¸ºä½•æ˜¯å¯é çš„å‘¢ï¼Ÿå› ä¸ºè¯¥ç®—æ³•åŸºäºä¸€ä¸ªååˆ†ç®€å•çš„æ•°è®ºäº‹å®ï¼šå°†ä¸¤ä¸ªå¤§ç´ æ•°ç›¸ä¹˜ååˆ†å®¹æ˜“ï¼Œä½†æƒ³è¦å¯¹å…¶ä¹˜ç§¯è¿›è¡Œå› å¼åˆ†è§£å´æå…¶å›°éš¾ï¼Œå› æ­¤å¯ä»¥å°†ä¹˜ç§¯å…¬å¼€ä½œä¸ºåŠ å¯†å¯†é’¥ã€‚ å›é¡¾ä¸Šé¢çš„å¯†é’¥ç”Ÿæˆæ­¥éª¤ï¼Œä¸€å…±å‡ºç°å…­ä¸ªæ•°å­—ï¼š $$p,q,n,\\varphi(n),e,d$$ è¿™å…­ä¸ªæ•°å­—ä¹‹ä¸­ï¼Œå…¬é’¥ç”¨åˆ°äº†ä¸¤ä¸ªï¼ˆ$n$å’Œ$e$ï¼‰ï¼Œå…¶ä½™å››ä¸ªæ•°å­—éƒ½æ˜¯ä¸å…¬å¼€çš„ã€‚å…¶ä¸­æœ€å…³é”®çš„æ˜¯$d$ï¼Œå› ä¸º$n$å’Œ$d$ç»„æˆäº†ç§é’¥ï¼Œä¸€æ—¦$d$æ³„æ¼ï¼Œå°±ç­‰äºç§é’¥æ³„æ¼ã€‚ é‚£ä¹ˆï¼Œæœ‰æ— å¯èƒ½åœ¨å·²çŸ¥$n$å’Œ$e$çš„æƒ…å†µä¸‹ï¼Œæ¨å¯¼å‡º$d$ï¼Ÿ $edâ‰¡1 (mod Ï†(n))$ã€‚åªæœ‰çŸ¥é“$e$å’Œ$Ï†(n)$ï¼Œæ‰èƒ½ç®—å‡º$d$ã€‚ $Ï†(n)=(p-1)(q-1)$ã€‚åªæœ‰çŸ¥é“$p$å’Œ$q$ï¼Œæ‰èƒ½ç®—å‡º$Ï†(n)$ã€‚ $n=pq$ã€‚åªæœ‰å°†$n$å› æ•°åˆ†è§£ï¼Œæ‰èƒ½ç®—å‡º $p$ å’Œ $q$ã€‚ ç»“è®ºï¼šå¦‚æœ $n$ å¯ä»¥è¢«å› æ•°åˆ†è§£ï¼Œ$d$ å°±å¯ä»¥ç®—å‡ºï¼Œä¹Ÿå°±æ„å‘³ç€ç§é’¥è¢«ç ´è§£ã€‚ å¯æ˜¯ï¼Œå¤§æ•´æ•°çš„å› æ•°åˆ†è§£ï¼Œæ˜¯ä¸€ä»¶éå¸¸å›°éš¾çš„äº‹æƒ…ã€‚ç›®å‰ï¼Œé™¤äº†æš´åŠ›ç ´è§£ï¼Œè¿˜æ²¡æœ‰å‘ç°åˆ«çš„æœ‰æ•ˆæ–¹æ³•ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥å¯¹ 3233 è¿›è¡Œå› æ•°åˆ†è§£ï¼ˆ61Ã—53ï¼‰ï¼Œä½†æ˜¯ä½ æ²¡æ³•å¯¹ä¸‹é¢è¿™ä¸ªæ•´æ•°è¿›è¡Œå› æ•°åˆ†è§£ã€‚ 1234567891230186684530117755130494958384962720772853569595334792197322452151726400507263657518745202199786469389956474942774063845925192557326303453731548268507917026122142913461670429214311602221240479274737794080665351419597459856902143413 å®ƒç­‰äºè¿™æ ·ä¸¤ä¸ªè´¨æ•°çš„ä¹˜ç§¯ï¼š 123456789101133478071698956898786044169848212690817704794983713768568912431388982883793878002287614711652531743087737814467999489 Ã—36746043666799590428244633799627952632279158164343087642676032283815739666511279233373417143396810270092798736308917 äº‹å®ä¸Šï¼Œè¿™å¤§æ¦‚æ˜¯äººç±»å·²ç»åˆ†è§£çš„æœ€å¤§æ•´æ•°ï¼ˆ232 ä¸ªåè¿›åˆ¶ä½ï¼Œ768 ä¸ªäºŒè¿›åˆ¶ä½ï¼‰ã€‚æ¯”å®ƒæ›´å¤§çš„å› æ•°åˆ†è§£ï¼Œè¿˜æ²¡æœ‰è¢«æŠ¥é“è¿‡ï¼Œå› æ­¤ç›®å‰è¢«ç ´è§£çš„æœ€é•¿ RSA å¯†é’¥å°±æ˜¯ 768 ä½ã€‚ ç­¾åä¸è¯ä¹¦å‚è€ƒ Learn Cryptography æµ…è°ˆå¸¸è§çš„ä¸ƒç§åŠ å¯†ç®—æ³•åŠå®ç° - æ˜é‡‘ RSA ç®—æ³•åŸç†ï¼ˆä¸€ï¼‰ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— RSA ç®—æ³•åŸç†ï¼ˆäºŒï¼‰ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— åŠ å¯†è§£å¯† - é¢è¯•å®˜ï¼šè¯´ä¸€ä¸‹ä½ å¸¸ç”¨çš„åŠ å¯†ç®—æ³•_ä¸ªäººæ–‡ç«  - SegmentFault æ€å¦","categories":[],"tags":[{"name":"åŠ å¯†ç®—æ³•","slug":"åŠ å¯†ç®—æ³•","permalink":"http://example.com/tags/%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/"},{"name":"Cryptography","slug":"Cryptography","permalink":"http://example.com/tags/Cryptography/"}]},{"title":"å¦‚ä½•ä½¿ç”¨ git-send-mail ç»™å¼€æºç¤¾åŒºæäº¤ Patch","slug":"å¦‚ä½•ä½¿ç”¨git-send-mailç»™å¼€æºç¤¾åŒºæäº¤Patch","date":"2022-09-28T13:08:29.000Z","updated":"2022-10-15T03:14:29.687Z","comments":true,"path":"2022/09/28/å¦‚ä½•ä½¿ç”¨git-send-mailç»™å¼€æºç¤¾åŒºæäº¤Patch/","link":"","permalink":"http://example.com/2022/09/28/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8git-send-mail%E7%BB%99%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E6%8F%90%E4%BA%A4Patch/","excerpt":"","text":"éœ€æ±‚èƒŒæ™¯å¦‚æœå‚ä¸ Linuxã€QEMU æˆ–è€… OpenSBI ç­‰å¼€æºé¡¹ç›®ï¼Œä¸èƒ½é€šè¿‡åœ¨ GitHub æˆ–è€… Gitlab å¹³å°æäº¤pull requestã€‚è€Œæ˜¯éœ€è¦å°†ä¿®æ”¹çš„ä»£ç ï¼Œé€šè¿‡ Patch å½¢å¼æäº¤åˆ°å¯¹åº”çš„listservä¾› Maintainer å®¡æ ¸ã€‚é‚£ä¹ˆå¦‚ä½•åˆ›å»º Patch å¹¶å‘é€å‘¢ï¼Ÿ è¿™é‡Œä»¥å‘ OpenSBI æäº¤ä¸€ä¸ª Patch ä¸ºä¾‹ã€‚ åˆ›å»º Patché¦–å…ˆå°†å®˜æ–¹ Repositoryï¼ŒFork åˆ°è‡ªå·±çš„ GitHubï¼š å›åˆ°è‡ªå·±çš„ä¸»é¡µï¼Œæ‰¾åˆ°åˆšåˆš Fork çš„ Repositoryï¼Œå°†å…¶ Clone åˆ°æœ¬åœ°ï¼š ä¿®æ”¹ä»£ç ä¸æ­£å¸¸å¼€å‘æµç¨‹ä¸€ç›´ï¼Œä¿®æ”¹å®Œåœ¨git commitæ—¶éœ€è¦åŠ ä¸ŠSigned-off-byå­—æ®µï¼Œå› ä¸º Merge ä»£ç çš„äººé€šå¸¸ä¸æ˜¯æäº¤ä»£ç çš„äººï¼Œæœ‰è¯¥å­—æ®µæ‰èƒ½è¯æ˜æ˜¯ä½ ä¿®æ”¹äº†å¯¹åº”çš„ä»£ç ã€‚ -så‚æ•°ä¼šè‡ªåŠ¨åŠ ä¸ŠSigned-off-byå­—æ®µï¼š 12345678910111213141516171819$ git commit -sdoc:fix some typosSigned-off-by: dominic &lt;dominic@gmail.com&gt;# Please enter the commit message for your changes. Lines starting# with &#x27;#&#x27; will be ignored, and an empty message aborts the commit.## Date: Tue Sep 27 21:11:41 2022 +0800## On branch master# Your branch is up to date with &#x27;origin/master&#x27;.## Changes to be committed:# modified: docs/domain_support.md# modified: docs/library_usage.md# modified: docs/platform_requirements.md# modified: docs/pmu_support.md ç”Ÿæˆ.patchæ–‡ä»¶ï¼š 12$ git format-patch HEAD^0001-doc-fix-some-typos.patch åœ¨å½“å‰ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª0001-doc-fix-some-typos.patchæ–‡ä»¶ï¼š 123456789$ git status On branch masterYour branch is up to date with &#x27;origin/master&#x27;.Untracked files: (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed) 0001-doc-fix-some-typos.patchnothing added to commit but untracked files present (use &quot;git add&quot; to track) è¿™ä¸ªæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬è¦å‘é€çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å°±æ˜¯æˆ‘ä»¬çš„ä»£ç ä¿®æ”¹ï¼Œä»¥åŠä½œè€…ç­‰ä¿¡æ¯ï¼š 123456789101112131415161718192021$ cat 0001-doc-fix-some-typos.patch From d404cb82f4c4aca15dcd35855d0bc96c5b4431d5 Mon Sep 17 00:00:00 2001From: Dunky-Z &lt;xxxxxxxxx@qq.com&gt;Date: Tue, 27 Sep 2022 21:11:41 +0800Subject: [PATCH] doc:fix some typosSigned-off-by: dominic &lt;dominic@gmail.com&gt;--- docs/domain_support.md | 6 +++--- docs/library_usage.md | 2 +- docs/platform_requirements.md | 2 +- docs/pmu_support.md | 10 +++++----- 4 files changed, 10 insertions(+), 10 deletions(-)diff --git a/docs/domain_support.md b/docs/domain_support.mdindex 73931f1..8963b57 100644--- a/docs/domain_support.md+++ b/docs/domain_support.md@@ -2,7 +2,7 @@ OpenSBI Domain Support ======================... é…ç½® send-emailå®‰è£… git-emailé€šè¿‡gitç›´æ¥å‘é€ Patch éœ€è¦ä½¿ç”¨git-emailå·¥å…·ï¼Œå¾—æ‰‹åŠ¨å®‰è£…ï¼š 1sudo apt install git-email Windows å¹³å°åœ¨å®‰è£… Git æ—¶é»˜è®¤å·²å®‰è£… ç”Ÿæˆ smtp æˆæƒç ç™»å½•QQ é‚®ç®± - å¸æˆ·ï¼š å¼€å¯ IMAP/SMTP æœåŠ¡ï¼Œå¹¶ç”Ÿæˆæˆæƒç ï¼š æ ¹æ®æç¤ºå‘é€çŸ­ä¿¡ï¼š è®°å½•ä¸‹ç”Ÿæˆçš„æˆæƒç ï¼š é…ç½®.gitconfigUbuntu å¹³å°ï¼š~/.gitconfigWindows å¹³å°ï¼šC:\\Users\\ç”¨æˆ·å\\.gitconfig 123456789[sendemail] smtpencryption = tls smtpserver = smtp.qq.com smtpuser = dominic_riscx@qq.com smtpserverport = 587 from = dominic_riscx@qq.com smtppass = xxxxxx cc = dominic@gmail.com #to = opensbi@lists.infradead.org ä¸ºäº†æ–¹ä¾¿å¤åˆ¶ï¼Œå•ç‹¬æ³¨é‡Šï¼š 12345678910[sendemail] smtpencryption = # åŠ å¯†æ–¹å¼ï¼Œä¿æŒé»˜è®¤ smtpserver = # smtp æœåŠ¡å™¨åœ°å€ï¼Œä¿æŒé»˜è®¤ smtpuser = # é‚®ç®±åœ°å€ï¼Œæ”¹ä¸º QQ é‚®ç®±åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç”¨å“ªä¸ªé‚®ç®±å‘é€ï¼Œå°±å¡«å“ªä¸ª smtpserverport = # ç«¯å£å·ï¼Œä¿æŒé»˜è®¤ from = # åŒ smtpuser smtppass = # ä¸Šæ–‡ç”Ÿæˆçš„ smtp æˆæƒç  cc = # æŠ„é€çš„é‚®ç®±åœ°å€ #to = opensbi@lists.infradead.org # è¦å‘é€çš„åœ°å€ï¼Œè¿™ä¸ªå­—æ®µæˆ‘æ³¨é‡Šäº†ï¼Œå› ä¸ºæ€•ä»¥åå‘é‚®ä»¶é»˜è®¤å‘åˆ°è¿™ä¸ªåœ°å€ï¼Œè¿™ä¸ªå­—æ®µå¯ä»¥åœ¨å‘é€æ—¶å•ç‹¬å¡«å†™ å‘é€ Patch12345#$ git send-email patchæ–‡ä»¶å$ git send-email 0001-doc-fix-some-typos.patch0001-doc-fix-some-typos.patch# æç¤ºå¾€å“ªé‡Œå‘é€ï¼Œå¡«å†™è¦æ¥æ”¶çš„é‚®ç®±å³å¯ï¼Œæˆ‘è¿™é‡Œå¡«å†™çš„æ˜¯OpenSBIæ¥æ”¶Patchçš„åœ°å€To whom should the emails be sent (if anyone)? opensbi@lists.infradead.org 12Message-ID to be used as In-Reply-To for the first email (if any)? # å›è½¦ï¼Œä¿å­˜é»˜è®¤ï¼ˆæˆ‘è¿˜ä¸æ¸…æ¥šè¿™é‡Œçš„ä½œç”¨ï¼‰ 123456789101112131415161718192021222324252627(mbox) Adding cc: Dunky-Z &lt;xxxxxxxxx@qq.com&gt; from line &#x27;From: Dunky-Z &lt;xxxxxxxxx@qq.com&gt;&#x27;(body) Adding cc: dominic &lt;dominic@gmail.com&gt; from line &#x27;Signed-off-by: dominic &lt;dominic@gmail.com&gt;&#x27; From: dominic_riscx@qq.comTo: opensbi@lists.infradead.orgCc: dominic@gmail.com, Dunky-Z &lt;xxxxxxxxx@qq.com&gt;Subject: [PATCH] doc:fix some typosDate: Wed, 28 Sep 2022 10:35:30 +0800Message-Id: &lt;20220928023530.2344-1-dominic_riscx@qq.com&gt;X-Mailer: git-send-email 2.34.1.windows.1MIME-Version: 1.0Content-Transfer-Encoding: 8bit The Cc list above has been expanded by additional addresses found in the patch commit message. By default send-email prompts before sending whenever this occurs. This behavior is controlled by the sendemail.confirm configuration setting. For additional information, run &#x27;git send-email --help&#x27;. To retain the current behavior, but squelch this message, run &#x27;git config --global sendemail.confirm auto&#x27;.Send this email? ([y]es|[n]o|[e]dit|[q]uit|[a]ll): y# y ç¡®è®¤å‘é€ 1234567891011121314151617181920OK. Log says:Server: smtp.qq.comMAIL FROM:&lt;dominic_riscx@qq.com&gt;RCPT TO:&lt;opensbi@lists.infradead.org&gt;RCPT TO:&lt;dominic@gmail.com&gt;RCPT TO:&lt;xxxxxxxxx@qq.com&gt;From: dominic_riscx@qq.comTo: opensbi@lists.infradead.orgCc: dominic@gmail.com, Dunky-Z &lt;xxxxxxxxx@qq.com&gt;Subject: [PATCH] doc:fix some typosDate: Wed, 28 Sep 2022 10:35:30 +0800Message-Id: &lt;20220928023530.2344-1-dominic_riscx@qq.com&gt;X-Mailer: git-send-email 2.34.1.windows.1MIME-Version: 1.0Content-Transfer-Encoding: 8bitResult: 250# å‘é€æˆåŠŸ å‰å¾€The opensbi Archivesï¼Œæ‰¾åˆ°å¯¹åº”çš„æœˆä»½ï¼Œç‚¹å‡»Thereadï¼Œå³å¯æ‰¾åˆ°è‡ªå·±å‘é€çš„ Patchï¼Œæ¯ä¸ªå¼€æºç¤¾åŒºä¸€èˆ¬éƒ½ä¼šåœ¨å¦‚ä½•æäº¤ PR çš„æ–‡æ¡£é‡Œå…¬å¼€ Patch Archive ç½‘å€ï¼Œè¿™é‡Œæ˜¯ä»¥ OpenSBI çš„ç½‘å€ã€‚ å‰å¾€é‚®ç®±å‘é€è®°å½•ä¸­ä¹Ÿå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„ Patch ä¿¡æ¯ï¼š ä»¥ä¸Šå°±æ˜¯å®Œæ•´çš„æäº¤ Patch è¿‡ç¨‹ã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"Makefile åŸºç¡€","slug":"MakefileåŸºç¡€","date":"2022-09-26T13:36:18.000Z","updated":"2022-10-15T02:59:01.566Z","comments":true,"path":"2022/09/26/MakefileåŸºç¡€/","link":"","permalink":"http://example.com/2022/09/26/Makefile%E5%9F%BA%E7%A1%80/","excerpt":"","text":"ç›®æ ‡ã€ä¾èµ–ã€å‘½ä»¤ ç›®æ ‡å°±æ˜¯æˆ‘ä»¬è¦å» make xxx çš„é‚£ä¸ª xxxï¼Œå°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦ç”Ÿæˆçš„ä¸œè¥¿ã€‚ ä¾èµ–æ˜¯ç”¨æ¥ç”Ÿæˆç›®å½•çš„åŸææ–™ å‘½ä»¤å°±æ˜¯åŠ å·¥æ–¹æ³•ï¼Œæ‰€ä»¥ make xxx çš„è¿‡ç¨‹å…¶å®å°±æ˜¯ä½¿ç”¨å‘½ä»¤å°†ä¾èµ–åŠ å·¥æˆç›®æ ‡çš„è¿‡ç¨‹ã€‚ é€šé…ç¬¦ % å’Œ Makefile è‡ªåŠ¨æ¨å¯¼ % æ˜¯ Makefile ä¸­çš„é€šé…ç¬¦ï¼Œä»£è¡¨ä¸€ä¸ªæˆ–å‡ ä¸ªå­—æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´%.oå°±ä»£è¡¨æ‰€æœ‰ä»¥.oä¸ºç»“å°¾çš„æ–‡ä»¶ã€‚ æ‰€è°“è‡ªåŠ¨æ¨å¯¼å…¶å®å°±æ˜¯ Makefile çš„è§„åˆ™ã€‚å½“ Makefile éœ€è¦æŸä¸€ä¸ªç›®æ ‡æ—¶ï¼Œä»–ä¼šæŠŠè¿™ä¸ªç›®æ ‡å»å¥—è§„åˆ™è¯´æ˜ï¼Œä¸€æ—¦å¥—ä¸Šäº†æŸä¸ªè§„åˆ™è¯´æ˜ï¼Œåˆ™ Makefile ä¼šè¯•å›¾å¯»æ‰¾è¿™ä¸ªè§„åˆ™ä¸­çš„ä¾èµ–ï¼Œå¦‚æœèƒ½æ‰¾åˆ°åˆ™ä¼šæ‰§è¡Œè¿™ä¸ªè§„åˆ™ç”¨ä¾èµ–ç”Ÿæˆç›®æ ‡ã€‚ Makefile ä¸­å®šä¹‰å’Œä½¿ç”¨å˜é‡ Makefile ä¸­å®šä¹‰å’Œä½¿ç”¨å˜é‡ï¼Œå’Œ shell è„šæœ¬ä¸­éå¸¸ç›¸ä¼¼ã€‚ç›¸ä¼¼çš„æ˜¯éƒ½æ²¡æœ‰å˜é‡ç±»å‹ï¼Œç›´æ¥å®šä¹‰ä½¿ç”¨ï¼Œå¼•ç”¨å˜é‡æ—¶ç”¨$varã€‚ ä¼ªç›®æ ‡ï¼ˆ.PHONYï¼‰ ä¼ªç›®æ ‡æ„æ€æ˜¯è¿™ä¸ªç›®æ ‡æœ¬èº«ä¸ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰§è¡Œè¿™ä¸ªç›®æ ‡ä¸æ˜¯ä¸ºäº†å¾—åˆ°æŸä¸ªæ–‡ä»¶æˆ–ä¸œè¥¿ï¼Œè€Œæ˜¯å•çº¯ä¸ºäº†æ‰§è¡Œè¿™ä¸ªç›®æ ‡ä¸‹é¢çš„å‘½ä»¤ã€‚ ä¼ªç›®æ ‡ä¸€èˆ¬éƒ½æ²¡æœ‰ä¾èµ–ï¼Œå› ä¸ºæ‰§è¡Œä¼ªç›®æ ‡å°±æ˜¯ä¸ºäº†æ‰§è¡Œç›®æ ‡ä¸‹é¢çš„å‘½ä»¤ã€‚æ—¢ç„¶ä¸€å®šè¦æ‰§è¡Œå‘½ä»¤äº†é‚£å°±ä¸å¿…åŠ ä¾èµ–ï¼Œå› ä¸ºä¸åŠ ä¾èµ–æ„æ€å°±æ˜¯æ— æ¡ä»¶æ‰§è¡Œã€‚ ä¼ªç›®æ ‡å¯ä»¥ç›´æ¥å†™ï¼Œä¸å½±å“ä½¿ç”¨ï¼›ä½†æ˜¯æœ‰æ—¶å€™ä¸ºäº†æ˜ç¡®å£°æ˜è¿™ä¸ªç›®æ ‡æ˜¯ä¼ªç›®æ ‡ä¼šåœ¨ä¼ªç›®æ ‡çš„å‰é¢ç”¨.PHONYæ¥æ˜ç¡®å£°æ˜å®ƒæ˜¯ä¼ªç›®æ ‡ã€‚ Makfile ä¸­å¼•ç”¨å…¶ä»– Makefile æœ‰æ—¶å€™ Makefile æ€»ä½“æ¯”è¾ƒå¤æ‚ï¼Œå› æ­¤åˆ†æˆå¥½å‡ ä¸ª Makefile æ¥å†™ã€‚ç„¶ååœ¨ä¸» Makefile ä¸­å¼•ç”¨å…¶ä»–çš„ï¼Œç”¨ include æŒ‡ä»¤æ¥å¼•ç”¨ã€‚å¼•ç”¨çš„æ•ˆæœä¹Ÿæ˜¯åŸåœ°å±•å¼€ï¼Œå’Œ C è¯­è¨€ä¸­çš„å¤´æ–‡ä»¶åŒ…å«éå¸¸ç›¸ä¼¼ã€‚ èµ‹å€¼ =æœ€ç®€å•çš„èµ‹å€¼ :=ä¸€èˆ¬ä¹Ÿæ˜¯èµ‹å€¼ ä»¥ä¸Šè¿™ä¸¤ä¸ªå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸ä¸€æ ·ã€‚ç”¨=èµ‹å€¼çš„å˜é‡ï¼Œåœ¨è¢«è§£ææ—¶ä»–çš„å€¼å–å†³äºæœ€åä¸€æ¬¡èµ‹å€¼æ—¶çš„å€¼ï¼Œæ‰€ä»¥ä½ çœ‹å˜é‡å¼•ç”¨çš„å€¼æ—¶ä¸èƒ½åªå¾€å‰é¢çœ‹ï¼Œè¿˜è¦å¾€åé¢çœ‹ã€‚ç”¨:=æ¥èµ‹å€¼çš„ï¼Œåˆ™æ˜¯å°±åœ°ç›´æ¥è§£æï¼Œåªç”¨å¾€å‰çœ‹å³å¯ã€‚ ?=å¦‚æœå˜é‡å‰é¢å¹¶æ²¡æœ‰èµ‹å€¼è¿‡åˆ™æ‰§è¡Œè¿™æ¡èµ‹å€¼ï¼Œå¦‚æœå‰é¢å·²ç»èµ‹å€¼è¿‡äº†åˆ™æœ¬è¡Œè¢«å¿½ç•¥ã€‚ï¼ˆå®éªŒå¯ä»¥çœ‹å‡ºï¼šæ‰€è°“çš„æ²¡æœ‰èµ‹å€¼è¿‡å…¶å®å°±æ˜¯è¿™ä¸ªå˜é‡æ²¡æœ‰è¢«å®šä¹‰è¿‡ï¼‰ +=ç”¨æ¥ç»™ä¸€ä¸ªå·²ç»èµ‹å€¼çš„å˜é‡æ¥ç»­èµ‹å€¼ï¼Œæ„æ€å°±æ˜¯æŠŠè¿™æ¬¡çš„å€¼åŠ åˆ°åŸæ¥çš„å€¼çš„åé¢ï¼Œæœ‰ç‚¹ç±»ä¼¼äº strcatã€‚ï¼ˆæ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼Œ+=ç»­æ¥çš„å†…å®¹å’ŒåŸæ¥çš„å†…å®¹ä¹‹é—´ä¼šè‡ªåŠ¨åŠ ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼‰ æ³¨æ„ï¼šMakefile ä¸­å¹¶ä¸è¦æ±‚èµ‹å€¼è¿ç®—ç¬¦ä¸¤è¾¹ä¸€å®šè¦æœ‰ç©ºæ ¼æˆ–è€…æ— ç©ºæ ¼ï¼Œè¿™ä¸€ç‚¹æ¯” shell çš„æ ¼å¼è¦æ±‚è¦æ¾ä¸€äº›ã€‚ Makefile çš„ç¯å¢ƒå˜é‡ makefile ä¸­ç”¨ export å¯¼å‡ºçš„å°±æ˜¯ç¯å¢ƒå˜é‡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹è¦æ±‚ç¯å¢ƒå˜é‡åç”¨å¤§å†™ï¼Œæ™®é€šå˜é‡åç”¨å°å†™ã€‚ ç¯å¢ƒå˜é‡å’Œæ™®é€šå˜é‡ä¸åŒï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šç¯å¢ƒå˜é‡ç±»ä¼¼äºæ•´ä¸ªå·¥ç¨‹ä¸­æ‰€æœ‰ Makefile ä¹‹é—´å¯ä»¥å…±äº«çš„å…¨å±€å˜é‡ï¼Œè€Œæ™®é€šå˜é‡åªæ˜¯å½“å‰æœ¬ Makefile ä¸­ä½¿ç”¨çš„å±€éƒ¨å˜é‡ã€‚æ‰€ä»¥è¦æ³¨æ„ï¼šå®šä¹‰äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ä¼šå½±å“åˆ°å·¥ç¨‹ä¸­åˆ«çš„ Makefile æ–‡ä»¶ï¼Œå› æ­¤è¦å°å¿ƒã€‚ Makefile ä¸­å¯èƒ½æœ‰ä¸€äº›ç¯å¢ƒå˜é‡å¯èƒ½æ˜¯ makefile æœ¬èº«è‡ªå·±å®šä¹‰çš„å†…éƒ¨çš„ç¯å¢ƒå˜é‡æˆ–è€…æ˜¯å½“å‰çš„æ‰§è¡Œç¯å¢ƒæä¾›çš„ç¯å¢ƒå˜é‡ï¼ˆè­¬å¦‚æˆ‘ä»¬åœ¨ make æ‰§è¡Œæ—¶ç»™ makefile ä¼ å‚ã€‚make CC=arm-linux-gccï¼Œå…¶å®å°±æ˜¯ç»™å½“å‰ Makefile ä¼ äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ CCï¼Œå€¼æ˜¯ arm-linux-gccã€‚æˆ‘ä»¬åœ¨ make æ—¶ç»™ makefile ä¼ çš„ç¯å¢ƒå˜é‡å€¼ä¼˜å…ˆçº§æœ€é«˜çš„ï¼Œå¯ä»¥è¦†ç›– makefile ä¸­çš„èµ‹å€¼ï¼‰ã€‚è¿™å°±å¥½åƒ C è¯­è¨€ä¸­ç¼–è¯‘å™¨é¢„å®šä¹‰çš„å®__LINE__ __FUNCTION__ç­‰ä¸€æ ·ã€‚ Makefile ä¸­ä½¿ç”¨é€šé…ç¬¦ *ï¼šè‹¥å¹²ä¸ªä»»æ„å­—ç¬¦ ?ï¼š1 ä¸ªä»»æ„å­—ç¬¦ []ï¼šå°† [] ä¸­çš„å­—ç¬¦ä¾æ¬¡å»å’Œå¤–é¢çš„ç»“åˆåŒ¹é… è¿˜æœ‰ä¸ª%ï¼Œä¹Ÿæ˜¯é€šé…ç¬¦ï¼Œè¡¨ç¤ºä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œå’Œ*å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯%ä¸€èˆ¬åªç”¨äºè§„åˆ™æè¿°ä¸­ï¼Œåˆå«åšè§„åˆ™é€šé…ç¬¦ã€‚ Makefile çš„è‡ªåŠ¨å˜é‡ ä¸ºä»€ä¹ˆä½¿ç”¨è‡ªåŠ¨å˜é‡ã€‚åœ¨æœ‰äº›æƒ…å†µä¸‹æ–‡ä»¶é›†åˆä¸­æ–‡ä»¶éå¸¸å¤šï¼Œæè¿°çš„æ—¶å€™å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ Makefile å°±ç”¨ä¸€äº›ç‰¹æ®Šçš„ç¬¦å·æ¥æ›¿ä»£ç¬¦åˆæŸç§æ¡ä»¶çš„æ–‡ä»¶é›†ï¼Œè¿™å°±å½¢æˆäº†è‡ªåŠ¨å˜é‡ã€‚ è‡ªåŠ¨å˜é‡çš„å«ä¹‰ï¼šé¢„å®šä¹‰çš„ç‰¹æ®Šæ„ä¹‰çš„ç¬¦å·ã€‚å°±ç±»ä¼¼äº C è¯­è¨€ç¼–è¯‘å™¨ä¸­é¢„åˆ¶çš„é‚£äº›å®__FILE__ä¸€æ ·ã€‚ å¸¸è§è‡ªåŠ¨å˜é‡ï¼š $@ï¼šè§„åˆ™çš„ç›®æ ‡æ–‡ä»¶å $&lt;ï¼šè§„åˆ™çš„ä¾èµ–æ–‡ä»¶å $^ï¼šä¾èµ–çš„æ–‡ä»¶é›†åˆ å…¶ä»– Makefile ä¸­çš„æ³¨é‡Šç”¨# åœ¨ makefile çš„å‘½ä»¤è¡Œä¸­å‰é¢çš„@è¡¨ç¤ºé™é»˜æ‰§è¡Œ Makefile ä¸­é»˜è®¤æƒ…å†µä¸‹åœ¨æ‰§è¡Œä¸€è¡Œå‘½ä»¤å‰ä¼šå…ˆæŠŠè¿™è¡Œå‘½ä»¤ç»™æ‰“å°å‡ºæ¥ï¼Œç„¶åå†æ‰§è¡Œè¿™è¡Œå‘½ä»¤ å¦‚æœä½ ä¸æƒ³çœ‹åˆ°å‘½ä»¤æœ¬èº«ï¼Œåªæƒ³çœ‹åˆ°å‘½ä»¤æ‰§è¡Œå°±é™é»˜æ‰§è¡Œå³å¯","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Makefile","slug":"Makefile","permalink":"http://example.com/tags/Makefile/"}]},{"title":"åµŒå…¥å¼ Shell åŸºç¡€","slug":"åµŒå…¥å¼ShellåŸºç¡€","date":"2022-09-25T14:35:16.000Z","updated":"2023-08-19T06:19:22.087Z","comments":true,"path":"2022/09/25/åµŒå…¥å¼ShellåŸºç¡€/","link":"","permalink":"http://example.com/2022/09/25/%E5%B5%8C%E5%85%A5%E5%BC%8FShell%E5%9F%BA%E7%A1%80/","excerpt":"","text":"è„šæœ¬è¯­è¨€ å¸¸ç”¨çš„è„šæœ¬è¯­è¨€æœ‰ shã€bashã€cshã€kshã€perlã€pythonï¼› åœ¨ Linux ä¸‹å¸¸ç”¨çš„è„šæœ¬è¯­è¨€å…¶å®å°±æ˜¯ bashã€shï¼› è„šæœ¬è¯­è¨€ä¸€èˆ¬åœ¨åµŒå…¥å¼ä¸­åº”ç”¨ï¼Œä¸»è¦æ˜¯ç”¨æ¥åšé…ç½®ã€‚ï¼ˆä¸€ä¸ªå¤æ‚çš„åµŒå…¥å¼ç¨‹åºéƒ½æ˜¯å¯é…ç½®çš„ï¼Œé…ç½®è¿‡ç¨‹å°±æ˜¯ç”¨è„šæœ¬è¯­è¨€æ¥å®ç°çš„ï¼‰è‡ªç„¶ä¸ä¼šä½¿ç”¨è¿‡äºå¤æ‚çš„è„šæœ¬è¯­è¨€ç‰¹æ€§ï¼Œå› æ­¤åªéœ€è¦é’ˆå¯¹æ€§çš„å­¦ä¹ å³å¯ã€‚ shell è„šæœ¬çš„è¿è¡Œæœºåˆ¶ C/C++ è¯­è¨€è¿™ç§ç¼–å†™è¿‡ç¨‹æ˜¯ï¼šç¼–å†™å‡ºæºä»£ç ï¼ˆæºä»£ç æ˜¯ä¸èƒ½ç›´æ¥è¿è¡Œçš„ï¼‰ç„¶åç¼–è¯‘é“¾æ¥å½¢æˆå¯æ‰§è¡ŒäºŒè¿›åˆ¶ç¨‹åºï¼Œç„¶åæ‰èƒ½è¿è¡Œï¼›è€Œè„šæœ¬ç¨‹åºä¸åŒï¼Œè„šæœ¬ç¨‹åºç¼–å†™å¥½åæºä»£ç å³å¯ç›´æ¥è¿è¡Œï¼ˆæ²¡æœ‰ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ï¼‰ï¼› shell ç¨‹åºæ˜¯è§£é‡Šè¿è¡Œçš„ï¼Œæ‰€è°“è§£é‡Šè¿è¡Œå°±æ˜¯è¯´å½“æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª shell ç¨‹åºæ—¶ï¼Œshell è§£æå™¨ä¼šé€è¡Œçš„è§£é‡Š shell ç¨‹åºä»£ç ï¼Œç„¶åä¸€è¡Œä¸€è¡Œçš„å»è¿è¡Œã€‚ï¼ˆé¡ºåºç»“æ„ï¼‰ CPU å®é™…åªè®¤è¯†äºŒè¿›åˆ¶ä»£ç ï¼Œæ ¹æœ¬ä¸è®¤è¯†æºä»£ç ã€‚è„šæœ¬ç¨‹åºæºä»£ç å…¶å®ä¹Ÿä¸æ˜¯äºŒè¿›åˆ¶ä»£ç ï¼ŒCPU ä¹Ÿä¸è®¤è¯†ï¼Œä¹Ÿä¸èƒ½ç›´æ¥æ‰§è¡Œã€‚åªä¸è¿‡è„šæœ¬ç¨‹åºçš„ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ä¸æ˜¯ä»¥è„šæœ¬ç¨‹åºæºä»£ç ä¸ºå•ä½è¿›è¡Œçš„ï¼Œè€Œæ˜¯åœ¨è„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­é€è¡Œçš„è§£é‡Šæ‰§è¡Œæ—¶æ‰å»å®Œæˆè„šæœ¬ç¨‹åºæºä»£ç è½¬æˆäºŒè¿›åˆ¶çš„è¿‡ç¨‹ï¼ˆä¸ä¸€å®šæ˜¯ç¼–è¯‘é“¾æ¥ï¼Œå› ä¸ºè¿™è¡Œè„šæœ¬ç¨‹åºå¯èƒ½æ—©å°±ç¼–è¯‘è¿æ¥å¥½äº†ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯è°ƒç”¨å®ƒï¼‰ã€‚ åŠ¨æ‰‹å†™ç¬¬ä¸€ä¸ª shellç¼–è¾‘å™¨ä¸ç¼–è¯‘å™¨ shell ç¨‹åºæ˜¯æ–‡æœ¬æ ¼å¼çš„ï¼Œåªè¦æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬çš„ shell æ˜¯è¦åœ¨ Linux ç³»ç»Ÿä¸‹è¿è¡Œçš„ï¼Œæ‰€ä»¥æ¢è¡Œç¬¦å¿…é¡»æ˜¯\\nï¼Œè€Œ Windows ä¸‹çš„æ¢è¡Œç¬¦æ˜¯\\r\\nï¼Œå› æ­¤ Windows ä¸­çš„ç¼–è¾‘å™¨å†™çš„ shell ä¸èƒ½åœ¨ Linux ä¸‹è¿è¡Œã€‚ ç¼–è¯‘å™¨ä¸æ¶‰åŠï¼Œå› ä¸º shell æ˜¯è§£é‡Šæ€§è¯­è¨€ï¼Œç›´æ¥ç¼–è¾‘å®Œå°±å¯ä»¥è¿è¡Œã€‚ shell ç¨‹åºè¿è¡Œçš„è¿è¡Œçš„ä¸‰ç§æ–¹æ³• ./xx.shï¼Œå’Œè¿è¡ŒäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæ–¹æ³•ä¸€æ ·ã€‚è¿™æ ·è¿è¡Œ shell è¦æ±‚ shell ç¨‹åºå¿…é¡»å…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚chmod a+x xx.sh æ¥æ·»åŠ å¯æ‰§è¡Œæƒé™ã€‚ source xx.shï¼Œsource æ˜¯ Linux çš„ä¸€ä¸ªå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å°±æ˜¯ç”¨æ¥æ‰§è¡Œè„šæœ¬ç¨‹åºçš„ã€‚è¿™æ ·è¿è¡Œä¸éœ€è¦è„šæœ¬å…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚ bash xx.shï¼Œbash æ˜¯ä¸€ä¸ªè„šæœ¬ç¨‹åºè§£é‡Šå™¨ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºã€‚è¿™æ ·æ‰§è¡Œç›¸å½“äºæˆ‘ä»¬æ‰§è¡Œäº† bash ç¨‹åºï¼Œç„¶åæŠŠ xx.sh ä½œä¸º argv[1] ä¼ ç»™ä»–è¿è¡Œã€‚ hello world ç¨‹åºå’Œè§£é‡Š shell ç¨‹åºçš„ç¬¬ä¸€è¡Œä¸€èˆ¬éƒ½æ˜¯ä»¥#!/bin/shå¼€å§‹ï¼Œè¿™è¡Œè¯çš„æ„æ€å°±æ˜¯æŒ‡å®š shell ç¨‹åºæ‰§è¡Œæ—¶è¢«å“ªä¸ªè§£é‡Šå™¨è§£é‡Šæ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå†™ä¸Š/bin/shæ„æ€å°±æ˜¯è¿™ä¸ªshellå°†æ¥è¢«å½“å‰æœºå™¨ä¸­/binç›®å½•ä¸‹çš„shå¯æ‰§è¡Œç¨‹åºæ‰§è¡Œã€‚å¯ä»¥å°†ç¬¬ä¸€è¡Œå†™ä¸º#!/bin/bashæ¥æŒ‡å®šä½¿ç”¨bashæ‰§è¡Œè¯¥è„šæœ¬ã€‚ è„šæœ¬ä¸­çš„æ³¨é‡Šä½¿ç”¨#ï¼Œ#å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šè¡Œã€‚å¦‚æœæœ‰å¤šè¡Œéœ€è¦æ³¨é‡Šï¼Œæ¯è¡Œå‰é¢éƒ½è¦åŠ #ã€‚ï¼ˆ#å°±ç›¸å½“äºæ˜¯ C è¯­è¨€ä¸­çš„//ï¼‰; shell ç¨‹åºçš„æ­£æ–‡ï¼Œç”±å¾ˆå¤šè¡Œ shell è¯­å¥æ„æˆã€‚ shell è¯­æ³•shell å°±æ˜¯æŠŠä»¥å‰å‘½ä»¤è¡Œä¸­é”®å…¥æ‰§è¡Œçš„å‘½ä»¤å†™æˆäº†ç¨‹åºã€‚shell å…¶å®å°±æ˜¯ä¸ºäº†é¿å…åå¤çš„åœ¨å‘½ä»¤è¡Œä¸‹æ‰‹å·¥è¾“å…¥è€Œå‘æ˜çš„ä¸€ç§æŠŠæ‰‹å·¥è¾“å…¥æ­¥éª¤è®°å½•ä¸‹æ¥ï¼Œç„¶åé€šè¿‡æ‰§è¡Œ shell è„šæœ¬ç¨‹åºå°±èƒ½å†æ¬¡å¤è¿°åŸæ¥è®°å½•çš„æ‰‹å·¥è¾“å…¥è¿‡ç¨‹çš„ä¸€ç§æŠ€æœ¯ã€‚ shell ä¸­çš„å˜é‡å®šä¹‰å’Œå¼•ç”¨ å˜é‡å®šä¹‰å’Œåˆå§‹åŒ–ã€‚shell æ˜¯å¼±ç±»å‹è¯­è¨€ï¼ˆè¯­è¨€ä¸­çš„å˜é‡å¦‚æœæœ‰æ˜ç¡®çš„ç±»å‹åˆ™å±äºå¼ºç±»å‹è¯­è¨€ï¼›å˜é‡æ²¡æœ‰æ˜ç¡®ç±»å‹å°±æ˜¯å¼±ç±»å‹è¯­è¨€ï¼‰ï¼Œå’Œ C è¯­è¨€ä¸åŒã€‚åœ¨ shell ç¼–ç¨‹ä¸­å®šä¹‰å˜é‡ä¸éœ€è¦åˆ¶å®šç±»å‹ï¼Œä¹Ÿæ²¡æœ‰ç±»å‹è¿™ä¸ªæ¦‚å¿µã€‚ å˜é‡å®šä¹‰æ—¶å¯ä»¥åˆå§‹åŒ–ï¼Œä½¿ç”¨=è¿›è¡Œåˆå§‹åŒ–èµ‹å€¼ã€‚åœ¨ shell ä¸­èµ‹å€¼çš„=ä¸¤è¾¹æ˜¯ä¸èƒ½æœ‰ç©ºæ ¼çš„ã€‚æ³¨æ„ï¼šshell å¯¹è¯­æ³•éå¸¸åœ¨æ„ï¼Œéå¸¸ä¸¥æ ¼ã€‚å¾ˆå¤šåœ°æ–¹ç©ºæ ¼éƒ½æ˜¯å¿…é¡»æ²¡æœ‰æˆ–è€…å¿…é¡»æœ‰ï¼Œè€Œä¸”ä¸èƒ½éšæ„æœ‰æ²¡æœ‰ç©ºæ ¼ã€‚ å˜é‡èµ‹å€¼ï¼Œå˜é‡å®šä¹‰åå¯ä»¥å†æ¬¡èµ‹å€¼ï¼Œæ–°çš„èµ‹å€¼ä¼šè¦†ç›–è€çš„èµ‹å€¼ã€‚shell ä¸­å¹¶ä¸åˆ»æ„åŒºåˆ†å˜é‡çš„å®šä¹‰å’Œèµ‹å€¼ï¼Œåæ­£æ¯ä¸ªå˜é‡å°±æ˜¯ä¸€ä¸ªç¬¦å·ï¼Œè¿™ä¸ªç¬¦å·çš„å€¼å°±æ˜¯æœ€åä¸€ä¸ªç»™ä»–èµ‹å€¼æ—¶çš„å€¼ã€‚ å˜é‡å¼•ç”¨ã€‚shell ä¸­å¼•ç”¨ä¸€ä¸ªå˜é‡å¿…é¡»ä½¿ç”¨$ç¬¦å·ï¼Œ$ç¬¦å·å°±æ˜¯å˜é‡è§£å¼•ç”¨ç¬¦å·ã€‚ æ³¨æ„ï¼š$ç¬¦å·åé¢è·Ÿä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±ä¼šè¢«å½“ä½œå˜é‡å»è§£æã€‚å¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²æœ¬èº«æ²¡æœ‰å®šä¹‰ï¼Œæ‰§è¡Œæ—¶å¹¶ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªå˜é‡è§£æä¸ºç©ºã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ shell ä¸­æ²¡æœ‰è¢«å®šä¹‰çš„å˜é‡å…¶å®å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªå®šä¹‰å¹¶èµ‹å€¼ä¸ºç©ºçš„å˜é‡ã€‚ æ³¨æ„ï¼šå˜é‡å¼•ç”¨çš„æ—¶å€™å¯ä»¥$varï¼Œä¹Ÿå¯ä»¥$&#123;var&#125;ã€‚è¿™ä¸¤ç§çš„åŒºåˆ«æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹åªèƒ½ç”¨$&#123;var&#125;è€Œä¸èƒ½ç®€å•çš„$varã€‚ shell ä¸­æ— å¼•ç”¨ã€å•å¼•å·å’ŒåŒå¼•å·çš„åŒºåˆ« shell ä¸­ä½¿ç”¨å­—ç¬¦ä¸²å¯ä»¥ä¸åŠ åŒå¼•å·ï¼Œç›´æ¥ä½¿ç”¨ã€‚è€Œä¸”æœ‰ç©ºæ ¼æ—¶ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ç¼ºé™·æ˜¯ä¸èƒ½è¾“å‡º&quot;æˆ–è€…å…¶ä»–è½¬ä¹‰å­—ç¬¦ã€‚ shell ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨å•å¼•å·æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œä¹Ÿæ˜¯ç›´æ¥ä½¿ç”¨çš„ï¼Œä¸èƒ½è¾“å‡ºè½¬ä¹‰å­—ç¬¦ã€‚ å•å¼•å·ä¸­ï¼šå®Œå…¨å­—é¢æ›¿æ¢ï¼ˆä¸å¯åŒ…å«å•å¼•å·æœ¬èº«ï¼‰ åŒå¼•å·ä¸­ï¼š $åŠ å˜é‡åå¯ä»¥å–å˜é‡çš„å€¼ åå¼•å·ä»è¡¨ç¤ºå‘½ä»¤æ›¿æ¢ \\$è¡¨ç¤º$çš„å­—é¢å€¼ï¼ˆè¾“å‡º$ç¬¦å·ï¼‰ `è¡¨ç¤º`çš„å­—é¢å€¼ \\&quot;è¡¨ç¤º&quot;çš„å­—é¢å€¼ \\\\è¡¨ç¤º\\çš„å­—é¢å€¼ é™¤ä»¥ä¸Šæƒ…å†µä¹‹å¤–ï¼Œåœ¨å…¶å®ƒå­—ç¬¦å‰é¢çš„\\æ— ç‰¹æ®Šå«ä¹‰ï¼Œåªè¡¨ç¤ºå­—é¢å€¼ã€‚ å•å¼•å·ä¼šåŸæ ·è¾“å‡ºï¼ŒåŒå¼•å·å¯ä»¥è°ƒç”¨å‘½ä»¤ï¼š 123456PATH_A=&quot;`pwd`/include&quot;PATH_B=&#x27;`pwd`/include&#x27;echo $PATH_A# /home/a/b/includeecho $PATH_B# `pwd`/include shell ä¸­è°ƒç”¨ Linux å‘½ä»¤ ç›´æ¥æ‰§è¡Œ åå¼•å·æ‹¬èµ·æ¥æ‰§è¡Œã€‚æœ‰æ—¶å€™æˆ‘ä»¬åœ¨ shell ä¸­è°ƒç”¨ Linux å‘½ä»¤æ˜¯ä¸ºäº†å¾—åˆ°è¿™ä¸ªå‘½ä»¤çš„è¿”å›å€¼ï¼ˆç»“æœå€¼ï¼‰ï¼Œè¿™æ—¶å€™å°±é€‚åˆç”¨ä¸€å¯¹åå¼•å· (é”®ç›˜ä¸Š ESC æŒ‰é”®ä¸‹é¢çš„é‚£ä¸ªæŒ‰é”®ï¼Œå’Œ~åœ¨ä¸€ä¸ªæŒ‰é”®ä¸Š) æ¥è°ƒç”¨æ‰§è¡Œå‘½ä»¤ã€‚ shell ä¸­çš„é€‰æ‹©åˆ†æ”¯ç»“æ„ shell çš„ if è¯­è¨€ç”¨æ³•å¾ˆå¤šï¼Œåœ¨æ­¤åªä»‹ç»å¸¸ç”¨çš„ï¼Œå…¶ä»–æ„Ÿå…´è¶£å¯ä»¥è‡ªå·±å»å­¦ å…¸å‹ifè¯­è¨€æ ¼å¼ï¼š 123456789if [ è¡¨è¾¾å¼ ]; then xxx yyy zzzelse xxx ddd uuufi if çš„å…¸å‹åº”ç”¨ -fåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ³¨æ„[]é‡Œé¢å‰åéƒ½æœ‰ç©ºæ ¼ï¼Œä¸èƒ½çœç•¥ -dåˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨ &quot;str1&quot; = &quot;str2&quot;åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œæ³¨æ„ç”¨ä¸€ä¸ªç­‰å·è€Œä¸æ˜¯ä¸¤ä¸ª åˆ¤æ–­æ•°å­—æ˜¯å¦ç›¸ç­‰ -eqç­‰äº -gtå¤§äº -ltå°äº -geå¤§äºç­‰äº -leå°äºç­‰äº -zåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œæ³¨æ„-zåˆ¤æ–­æ—¶å¦‚æœå˜é‡æœ¬èº«æ²¡å®šä¹‰ä¹Ÿæ˜¯ä¸æˆç«‹ï¼ˆä¹Ÿå°±æ˜¯è¯´-z è®¤ä¸ºæ²¡å®šä¹‰ä¸ç­‰äºä¸ºç©ºï¼‰ -oè¡¨ç¤ºé€»è¾‘æˆ–ï¼Œè¿æ¥ä¸¤ä¸ªè¡¨è¾¾å¼ if [ 10 -eq 10 -o ]; then &amp;&amp; ||è¡¨ç¤ºé€»è¾‘ä¸å’Œé€»è¾‘æˆ– shell ä¸­çš„å¾ªç¯ç»“æ„for å¾ªç¯ï¼Œè¦æ±‚èƒ½çœ‹æ‡‚ã€èƒ½æ”¹å³å¯ã€‚ä¸è¦æ±‚èƒ½å¤Ÿå®Œå…¨ä¸å‚è€ƒå†™å‡ºæ¥ã€‚å› ä¸ºæ¯•ç«ŸåµŒå…¥å¼å¹¶ä¸éœ€è¦å®Œå…¨é‡æ–°æ‰‹å†™ã€‚ while å¾ªç¯ï¼Œå’Œ C è¯­è¨€çš„å¾ªç¯åœ¨é€»è¾‘ä¸Šæ— å·®åˆ«ï¼Œè¦æ³¨æ„å¾ˆå¤šæ ¼å¼è¦æ±‚ï¼Œè­¬å¦‚ï¼šwhile åé¢çš„ [] ä¸¤è¾¹éƒ½æœ‰ç©ºæ ¼ï¼Œ[] åé¢æœ‰åˆ†å·ï¼ˆå¦‚æœ do æ”¾åœ¨ä¸€è¡Œçš„è¯ï¼‰ï¼Œi++çš„å†™æ³•ä¸­æœ‰ä¸¤å±‚æ‹¬å·ã€‚ echo çš„åˆ›å»ºå’Œè¿½åŠ è¾“å…¥æ–‡ä»¶ åœ¨ shell ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ echo æŒ‡ä»¤æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å°†ä¸€äº›å†…å®¹ä¼ å…¥è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚åˆ›å»ºæ–‡ä»¶å¹¶è¾“å…¥å†…å®¹çš„å…³é”®å°±æ˜¯&gt;ã€‚ è¿˜å¯ä»¥ä½¿ç”¨ echo æŒ‡ä»¤é…åˆè¿½åŠ ç¬¦å·&gt;&gt; å‘ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶æœ«å°¾è¿½åŠ è¾“å…¥å†…å®¹ã€‚ shell ä¸­å…¶ä»–å€¼å¾—å…³æ³¨çš„çŸ¥è¯†ç‚¹case è¯­å¥ shell ä¸­çš„ case è¯­å¥å’Œ C è¯­è¨€ä¸­çš„ switch case è¯­å¥ä½œç”¨ä¸€æ ·ï¼Œæ ¼å¼æœ‰å·®å¼‚ shell ä¸­çš„ case è¯­å¥å¤©ç”Ÿæ²¡æœ‰ breakï¼Œä¹Ÿä¸éœ€è¦breakï¼Œå’Œ C è¯­è¨€ä¸­çš„ switch case ä¸åŒã€‚shell ä¸­çš„ case é»˜è®¤å°±æ˜¯åŒ¹é…ä¸Šå“ªä¸ªæ‰§è¡Œå“ªä¸ªï¼Œä¸ä¼šè¯´æ‰§è¡Œå®Œäº†è¿˜å»æ‰§è¡Œåé¢çš„å…¶ä»– case è°ƒç”¨ shell ç¨‹åºçš„ä¼ å‚ C è¯­è¨€ä¸­å¯ä»¥é€šè¿‡ main å‡½æ•°çš„ argc å’Œ argv ç»™ç¨‹åºä¼ å‚ shell ç¨‹åºæœ¬èº«ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨æ—¶ä¼ å‚ç»™ä»–ã€‚åœ¨ shell ç¨‹åºå†…éƒ¨ä½¿ç”¨ä¼ å‚ä¹Ÿæ˜¯ä½¿ç”¨çš„ä¸€äº›ç‰¹å®šç¬¦å·æ¥è¡¨ç¤ºçš„ï¼ŒåŒ…æ‹¬ï¼š $#è¡¨ç¤ºè°ƒç”¨è¯¥ shell æ—¶ä¼ å‚çš„ä¸ªæ•°ã€‚ï¼ˆ$#è®¡æ•°æ—¶åªè€ƒè™‘çœŸæ­£çš„å‚æ•°ä¸ªæ•°ï¼‰ $0ã€$1ã€$2Â·Â·Â·Â·Â·åˆ™ä¾æ¬¡è¡¨ç¤ºä¼ å‚çš„å„ä¸ªå‚æ•° 12345./a.out aa bb cc # argc = 4# argv[0] = ./a.out# argv[1] æ˜¯ç¬¬ä¸€ä¸ªæœ‰æ•ˆå‚æ•°Â·Â·Â·Â· 12345source a.sh aa bb cc # $# = 3# $0æ˜¯æ‰§è¡Œè¿™ä¸ª shell ç¨‹åºçš„è§£æç¨‹åºçš„åå­—# $1æ˜¯ç¬¬ä¸€ä¸ªæœ‰æ•ˆå‚æ•°çš„å€¼# $2æ˜¯ç¬¬ 2 ä¸ªæœ‰æ•ˆå‚æ•°çš„å€¼Â·Â·Â·Â·Â· while å¾ªç¯å’Œ case è¯­è¨€å’Œä¼ å‚ç»“åˆ shell ä¸­çš„ break å…³é”®å­—å’Œ C è¯­è¨€ä¸­æ„ä¹‰ç›¸åŒï¼ˆéƒ½æ˜¯è·³å‡ºï¼‰ä½†æ˜¯ç”¨æ³•ä¸åŒã€‚å› ä¸º shell ä¸­ case è¯­å¥é»˜è®¤ä¸ç”¨ break çš„ï¼Œå› æ­¤åœ¨ shell ä¸­ break åªç”¨äºå¾ªç¯è·³å‡ºã€‚æ‰€ä»¥å½“ while ä¸­å†…åµŒ case è¯­å¥æ—¶ï¼Œcase ä¸­çš„ break æ˜¯è·³å‡ºå¤–å±‚çš„ while å¾ªç¯çš„ï¼Œä¸æ˜¯ç”¨æ¥è·³å‡º case è¯­å¥çš„ã€‚ shell ä¸­çš„$# $1ç­‰å†…ç½®å˜é‡çš„å€¼æ˜¯å¯ä»¥è¢«æ”¹å˜ï¼Œè¢« shift æŒ‡ä»¤æ”¹å˜ã€‚shift æŒ‡ä»¤æœ‰ç‚¹åƒå·¦ç§»è¿ç®—ç¬¦ï¼ŒæŠŠæˆ‘ä»¬ç»™ shell ç¨‹åºçš„ä¼ å‚å·¦ç§»äº†ä¸€ä¸ªç§»å‡ºå»äº†ï¼ŒåŸæ¥çš„$2å˜æˆäº†æ–°çš„$1ï¼ŒåŸæ¥çš„$#å°‘äº† 1 ä¸ªã€‚","categories":[{"name":"Embedded Development","slug":"Embedded-Development","permalink":"http://example.com/categories/Embedded-Development/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"http://example.com/tags/Shell/"},{"name":"Embedded","slug":"Embedded","permalink":"http://example.com/tags/Embedded/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-chattr ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•å±æ€§é˜²æ­¢è¯¯åˆ é™¤","slug":"æ¯å¤©å­¦å‘½ä»¤-chatträ¿®æ”¹æ–‡ä»¶ä¸ç›®å½•å±æ€§é˜²æ­¢è¯¯åˆ é™¤","date":"2022-09-25T03:20:35.000Z","updated":"2022-10-15T03:03:19.401Z","comments":true,"path":"2022/09/25/æ¯å¤©å­¦å‘½ä»¤-chatträ¿®æ”¹æ–‡ä»¶ä¸ç›®å½•å±æ€§é˜²æ­¢è¯¯åˆ é™¤/","link":"","permalink":"http://example.com/2022/09/25/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-chattr%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E5%B1%9E%E6%80%A7%E9%98%B2%E6%AD%A2%E8%AF%AF%E5%88%A0%E9%99%A4/","excerpt":"","text":"ä½¿ç”¨èƒŒæ™¯chattrå‘½ä»¤å¯ä»¥ä¿®æ”¹ Linux çš„æ–‡ä»¶å±æ€§ï¼Œåœ¨ç±» Unix ç­‰å‘è¡Œç‰ˆä¸­ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿæœ‰æ•ˆé˜²æ­¢æ–‡ä»¶å’Œç›®å½•è¢«æ„å¤–çš„åˆ é™¤æˆ–ä¿®æ”¹ã€‚æ–‡ä»¶åœ¨ Linux ä¸­è¢«æè¿°ä¸ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œchattr å‘½ä»¤åœ¨å¤§å¤šæ•°ç°ä»£ Linux æ“ä½œç³»ç»Ÿä¸­æ˜¯å¯ç”¨çš„ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶å±æ€§ï¼Œä¸€æ—¦å®šä¹‰æ–‡ä»¶çš„éšè—å±æ€§ï¼Œé‚£ä¹ˆè¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œ root ç”¨æˆ·ä¹Ÿæ— æƒæ“ä½œè¯¥æ–‡ä»¶ï¼Œåªèƒ½è§£é™¤æ–‡ä»¶çš„éšè—å±æ€§ã€‚è¿™å°±å¯ä»¥æœ‰æ•ˆçš„é¿å…è¢«è¯¯åˆ é™¤ã€‚ å‘½ä»¤æ ¼å¼ä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤ä¸€èˆ¬ç”±å‘½ä»¤ (chattr)ï¼Œå¯é€‰é¡¹ (option)ï¼Œæ“ä½œç¬¦ (operator) ä¸å±æ€§ (attribute) ç»„æˆï¼š 1chattr [option] [operator] [attribute] file [option] å¯é€‰é¡¹ï¼š 123-Rï¼Œ é€’å½’æ›´æ”¹ç›®å½•åŠå…¶å†…å®¹çš„å±æ€§ã€‚-Vï¼Œ è¯¦ç»†è¯´æ˜chattrçš„è¾“å‡ºå¹¶æ‰“å°ç¨‹åºç‰ˆæœ¬ã€‚-fï¼Œ éšè—å¤§å¤šæ•°é”™è¯¯æ¶ˆæ¯ã€‚ [operator] æ“ä½œç¬¦ï¼š 123+ï¼Œè¿½åŠ æŒ‡å®šå±æ€§åˆ°æ–‡ä»¶å·²å­˜åœ¨å±æ€§ä¸­-ï¼Œ åˆ é™¤æŒ‡å®šå±æ€§=ï¼Œç›´æ¥è®¾ç½®æ–‡ä»¶å±æ€§ä¸ºæŒ‡å®šå±æ€§ [attribute] å±æ€§å¦‚ä¸‹ï¼š 123aï¼Œ åªèƒ½å‘æ–‡ä»¶ä¸­æ·»åŠ æ•°æ®Aï¼Œä¸æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•çš„æœ€åè®¿é—®æ—¶é—´iï¼Œ æ–‡ä»¶æˆ–ç›®å½•ä¸å¯æ”¹å˜ ä½¿ç”¨å®ä¾‹lsattr å‘½ä»¤æ£€æŸ¥æ–‡ä»¶å·²æœ‰å±æ€§12-dï¼šå¦‚æœç›®æ ‡æ˜¯ç›®å½•ï¼Œåªä¼šåˆ—å‡ºç›®å½•æœ¬èº«çš„éšè—å±æ€§ï¼Œè€Œä¸ä¼šåˆ—å‡ºæ‰€å«æ–‡ä»¶æˆ–å­ç›®å½•çš„éšè—å±æ€§ä¿¡æ¯-Rï¼šä½œç”¨äºç›®å½•æ—¶ï¼Œä¼šæ˜¾ç¤ºæ‰€æœ‰çš„å­ç›®å½•å’Œæ–‡ä»¶çš„éšè—ä¿¡æ¯ 12345678910111213141516171819202122232425262728293031$ lsattr clash--------------e------- clash/glados.yaml--------------e------- clash/clash-linux-386-v1.10.0--------------e------- clash/Country.mmdb--------------e------- clash/cache.db--------------e------- clash/clash-linux-amd64-v1.10.0--------------e------- clash/dashboard$ lsattr -d clash--------------e------- clash$ lsattr -R clash--------------e------- clash/glados.yaml--------------e------- clash/clash-linux-386-v1.10.0--------------e------- clash/Country.mmdb--------------e------- clash/cache.db--------------e------- clash/clash-linux-amd64-v1.10.0--------------e------- clash/dashboardclash/dashboard:--------------e------- clash/dashboard/manifest.webmanifest--------------e------- clash/dashboard/assetsclash/dashboard/assets:--------------e------- clash/dashboard/assets/logo.b453e72f.png--------------e------- clash/dashboard/assets/index.408383.js--------------e------- clash/dashboard/assets/index.966f8a.css--------------e------- clash/dashboard/assets/vendor.ca5569.js--------------e------- clash/dashboard/sw.js--------------e------- clash/dashboard/workbox-7ce28d.js--------------e------- clash/dashboard/index.html ç¦æ­¢å¯¹æ–‡ä»¶test.mdé‡å‘½åï¼Œç§»åŠ¨æˆ–åˆ é™¤ï¼Œä¹Ÿä¸èƒ½ä¿®æ”¹å…¶å†…å®¹1sudo chattr +i test.md å°è¯•ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œå°†ä¼šè¢«æ‹’ç»ï¼š 12345678$ rm -f ./test.mdrm: cannot remove &#x27;./test.md&#x27;: Operation not permitted$ echo &#x27;Hello World!&#x27; &gt; test.mdbash: ./test.md: Operation not permitted$ mv ./test.md ./fileDirmv: cannot move &#x27;./test.md&#x27; to &#x27;./fileDir/test.md&#x27;: Operation not permitted ç¦æ­¢ä¿®æ”¹æ–‡ä»¶å¤¹fileDiråŠæ–‡ä»¶å¤¹ä¸­çš„æ•°æ®12mkdir ./fileDir &amp;&amp; touch ./fileDir/test.mdsudo chattr +i -R ./fileDir å°è¯•ä¿®æ”¹æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼š 12$ rm -rf ./fileDirrm: cannot remove &#x27;./fileDir/test.md&#x27;: Operation not permitted å…è®¸å‘æ–‡ä»¶æ·»åŠ å†…å®¹ï¼Œç¦æ­¢ä¿®æ”¹æˆ–åˆ é™¤å†…å®¹ï¼Œç¦æ­¢ç§»åŠ¨æ–‡ä»¶1234567$ sudo chattr +a ./test.md$ lsattr ./test.md-----a--------e--- ./test.md$ echo &quot;Hello World!&quot; &gt;&gt; ./test.md # è¿½åŠ å†…å®¹ OK$ echo &quot;hello&quot;&gt; ./test.md # ä¿®æ”¹å†…å®¹ NObash: ./test.md: Operation not permitted åªå…è®¸åœ¨ç›®å½•fileDirä¸­å»ºç«‹å’Œä¿®æ”¹æ–‡ä»¶ï¼Œä½†æ˜¯ç¦æ­¢åˆ é™¤ã€ç§»åŠ¨æ–‡ä»¶1sudo chattr +a ./fileDir å–æ¶ˆæŸä¸ªå±æ€§ä½¿ç”¨-æ“ä½œç¬¦å³å¯ï¼š 123456789# å…ˆç»™æ–‡ä»¶æ·»åŠ å±æ€§a$ sudo chattr +a ./test.md$ lsattr ./test.md-----a--------e--- ./test.md# å–æ¶ˆå±æ€§a$ sudo chattr -a ./test.md$ lsattr ./test.md--------------e--- ./test.md","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"è§£å†³ Pandoc å°† MD è½¬æ¢ä¸º PDF æ—¶æŠ¥é”™ (error)\\tightlist","slug":"è§£å†³Pandocå°†MDè½¬æ¢ä¸ºPDFæ—¶æŠ¥é”™-error-tightlist","date":"2022-09-24T09:27:00.000Z","updated":"2022-10-15T02:59:01.840Z","comments":true,"path":"2022/09/24/è§£å†³Pandocå°†MDè½¬æ¢ä¸ºPDFæ—¶æŠ¥é”™-error-tightlist/","link":"","permalink":"http://example.com/2022/09/24/%E8%A7%A3%E5%86%B3Pandoc%E5%B0%86MD%E8%BD%AC%E6%8D%A2%E4%B8%BAPDF%E6%97%B6%E6%8A%A5%E9%94%99-error-tightlist/","excerpt":"","text":"ä½¿ç”¨ Pandoc å°†test.mdè½¬æ¢ä½ PDF æ—¶ï¼Œå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š 1234567! Undefined control sequence.&lt;recently read&gt; \\tightlist l.213 \\end&#123;frame&#125;pandoc: Error producing PDF from TeX sourcemake: *** [test.pdf] Error 43 è¿™æ˜¯å› ä¸ºåœ¨ Markdown æ–‡ä»¶ä¸­ä½¿ç”¨-è¡¨ç¤ºæ— åºåˆ—è¡¨ï¼Œè¢«è½¬åŒ–æˆäº†\\tightlistä½†æ˜¯ Pandoc ç‰ˆæœ¬å¤ªè€ï¼Œä¸æ”¯æŒè¿™ä¸ªå‘½ä»¤ã€‚ï¼ˆä¸¥æ ¼æ¥è¯´æ˜¯ Pandoc æ²¡æœ‰å¤„ç†è¿™ä¸ª LaTeX å‘½ä»¤ï¼Œä¸æ˜¯ä¸æ”¯æŒï¼Œå› ä¸ºè¿™æ˜¯ LaTeX å‘½ä»¤å’Œ Pandoc æ²¡å…³ç³»ï¼‰ã€‚ æœ‰ä¸¤ç§æ–¹å¼è§£å†³ï¼Œä¸€æ˜¯å‡çº§ Pandoc ç‰ˆæœ¬ï¼ŒäºŒæ˜¯å°†å¤„ç†\\tightlistçš„å‘½ä»¤åŠ åˆ°è‡ªå·±ä½¿ç”¨çš„æ¨¡æ¿ä¸­ã€‚ 12\\providecommand&#123;\\tightlist&#125;&#123;% \\setlength&#123;\\itemsep&#125;&#123;0pt&#125;\\setlength&#123;\\parskip&#125;&#123;0pt&#125;&#125; æˆ–è€… 1\\def\\tightlist&#123;&#125;","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"LaTeX","slug":"LaTeX","permalink":"http://example.com/tags/LaTeX/"},{"name":"Markdown","slug":"Markdown","permalink":"http://example.com/tags/Markdown/"},{"name":"Pandoc","slug":"Pandoc","permalink":"http://example.com/tags/Pandoc/"}]},{"title":"Markdown è¯­æ³•ç®€æ˜æ•™ç¨‹","slug":"Markdownè¯­æ³•ç®€æ˜æ•™ç¨‹","date":"2022-09-24T07:05:12.000Z","updated":"2022-10-15T03:14:29.363Z","comments":true,"path":"2022/09/24/Markdownè¯­æ³•ç®€æ˜æ•™ç¨‹/","link":"","permalink":"http://example.com/2022/09/24/Markdown%E8%AF%AD%E6%B3%95%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/","excerpt":"","text":"Markdown ç®€ä»‹Markdown æ˜¯ä»€ä¹ˆï¼ŸMarkdownæ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒä»¥çº¯æ–‡æœ¬å½¢å¼ (æ˜“è¯»ã€æ˜“å†™ã€æ˜“æ›´æ”¹) ç¼–å†™æ–‡æ¡£ï¼Œå¹¶æœ€ç»ˆä»¥ HTML æ ¼å¼å‘å¸ƒã€‚ Markdownä¹Ÿå¯ä»¥ç†è§£ä¸ºå°†ä»¥ Markdown è¯­æ³•ç¼–å†™çš„è¯­è¨€è½¬æ¢æˆ HTML å†…å®¹çš„å·¥å…·ã€‚ è°åˆ›é€ äº†å®ƒï¼Ÿå®ƒç”±Aaron Swartzå’ŒJohnå…±åŒè®¾è®¡ï¼ŒAaron Swartzå°±æ˜¯é‚£ä½äºå»å¹´ï¼ˆ2013 å¹´ 1 æœˆ 11 æ—¥ï¼‰è‡ªæ€ï¼Œæœ‰ç€å¼€æŒ‚ä¸€èˆ¬äººç”Ÿç»å†çš„ç¨‹åºå‘˜ã€‚ç»´åŸºç™¾ç§‘å¯¹ä»–çš„ä»‹ç»æ˜¯ï¼šè½¯ä»¶å·¥ç¨‹å¸ˆã€ä½œå®¶ã€æ”¿æ²»ç»„ç»‡è€…ã€äº’è”ç½‘æ´»åŠ¨å®¶ã€ç»´åŸºç™¾ç§‘äººã€‚ 14 å²å‚ä¸ RSS 1.0 è§„æ ¼æ ‡å‡†çš„åˆ¶è®¢ã€‚ 2004å¹´å…¥è¯»æ–¯å¦ç¦ï¼Œä¹‹åé€€å­¦ã€‚ 2005å¹´åˆ›å»ºInfogamiï¼Œä¹‹åä¸Redditåˆå¹¶æˆä¸ºå…¶åˆä¼™äººã€‚ 2010å¹´åˆ›ç«‹æ±‚è¿›ä¼šï¼ˆDemand Progressï¼‰ï¼Œç§¯æå‚ä¸ç¦æ­¢ç½‘ç»œç›—ç‰ˆæ³•æ¡ˆï¼ˆSOPAï¼‰æ´»åŠ¨ï¼Œæœ€ç»ˆè¯¥ææ¡ˆè¢«æ’¤å›ã€‚ 2011å¹´ 7 æœˆ 19 æ—¥ï¼Œå› è¢«æ§ä» MIT å’Œ JSTOR ä¸‹è½½ 480 ä¸‡ç¯‡å­¦æœ¯è®ºæ–‡å¹¶ä»¥å…è´¹å½¢å¼ä¸Šä¼ äºç½‘ç»œè¢«æ•ã€‚ 2013å¹´ 1 æœˆè‡ªæ€èº«äº¡ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ å®ƒæ˜¯æ˜“è¯»ï¼ˆçœ‹èµ·æ¥èˆ’æœï¼‰ã€æ˜“å†™ï¼ˆè¯­æ³•ç®€å•ï¼‰ã€æ˜“æ›´æ”¹çº¯æ–‡æœ¬ã€‚å¤„å¤„ä½“ç°ç€æç®€ä¸»ä¹‰çš„å½±å­ã€‚ å…¼å®¹ HTMLï¼Œå¯ä»¥è½¬æ¢ä¸º HTML æ ¼å¼å‘å¸ƒã€‚ è·¨å¹³å°ä½¿ç”¨ã€‚ è¶Šæ¥è¶Šå¤šçš„ç½‘ç«™æ”¯æŒ Markdownã€‚ æ›´æ–¹ä¾¿æ¸…æ™°åœ°ç»„ç»‡ä½ çš„ç”µå­é‚®ä»¶ã€‚ï¼ˆMarkdown-here, Airmailï¼‰ æ‘†è„± Word æ€ä¹ˆä½¿ç”¨ï¼Ÿå¦‚æœä¸ç®—æ‰©å±•ï¼ŒMarkdown çš„è¯­æ³•ç»å¯¹ç®€å•åˆ°è®©ä½ çˆ±ä¸é‡Šæ‰‹ã€‚ Markdown è¯­æ³•ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ å¤§éƒ¨åˆ†ï¼š æ ‡é¢˜ï¼Œæ®µè½ï¼ŒåŒºå—å¼•ç”¨ï¼Œä»£ç åŒºå—ï¼Œå¼ºè°ƒï¼Œåˆ—è¡¨ï¼Œåˆ†å‰²çº¿ï¼Œé“¾æ¥ï¼Œå›¾ç‰‡ï¼Œ**åæ–œæ  \\ï¼Œç¬¦å·â€™`â€™**ã€‚ è°åœ¨ç”¨ï¼ŸMarkdown çš„ä½¿ç”¨è€…ï¼š GitHub ç®€ä¹¦ Stack Overflow Apollo Moodle Reddit ç­‰ç­‰ è¯­æ³•ä»‹ç»æ ‡é¢˜ä¸¤ç§å½¢å¼ï¼š ä½¿ç”¨=å’Œ-æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜ã€‚ ä¸€çº§æ ‡é¢˜=========äºŒçº§æ ‡é¢˜--------- ä½¿ç”¨#ï¼Œå¯è¡¨ç¤º 1-6 çº§æ ‡é¢˜ã€‚ # ä¸€çº§æ ‡é¢˜## äºŒçº§æ ‡é¢˜### ä¸‰çº§æ ‡é¢˜#### å››çº§æ ‡é¢˜##### äº”çº§æ ‡é¢˜###### å…­çº§æ ‡é¢˜ æ®µè½æ®µè½çš„å‰åè¦æœ‰ç©ºè¡Œï¼Œæ‰€è°“çš„ç©ºè¡Œæ˜¯æŒ‡æ²¡æœ‰æ–‡å­—å†…å®¹ã€‚è‹¥æƒ³åœ¨æ®µå†…å¼ºåˆ¶æ¢è¡Œçš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šç©ºæ ¼åŠ ä¸Šå›è½¦ï¼ˆå¼•ç”¨ä¸­æ¢è¡Œçœç•¥å›è½¦ï¼‰ã€‚ åŒºå—å¼•ç”¨åŒºå—å¼•ç”¨éœ€è¦åœ¨è¢«å¼•ç”¨çš„æ–‡æœ¬å‰åŠ ä¸Š &gt; ç¬¦å·ã€‚ 123&gt; è¿™æ˜¯ä¸€ä¸ªåŒºå—å¼•ç”¨å®ä¾‹ï¼Œ&gt; Markdown. è¿™æ˜¯ä¸€ä¸ªåŒºå—å¼•ç”¨å®ä¾‹ï¼Œ Markdown. Markdown ä¹Ÿå…è®¸ä½ å·æ‡’åªåœ¨æ•´ä¸ªæ®µè½çš„ç¬¬ä¸€è¡Œæœ€å‰é¢åŠ ä¸Š &gt; : 123456&gt; å¹³ç”Ÿä¸ä¼šç›¸æ€ï¼Œæ‰ä¼šç›¸æ€ï¼Œä¾¿å®³ç›¸æ€ã€‚&gt; ç©ºä¸€ç¼•ä½™é¦™åœ¨æ­¤ï¼Œç›¼åƒé‡‘æ¸¸å­ä½•ä¹‹ã€‚ å¹³ç”Ÿä¸ä¼šç›¸æ€ï¼Œæ‰ä¼šç›¸æ€ï¼Œä¾¿å®³ç›¸æ€ã€‚ ç©ºä¸€ç¼•ä½™é¦™åœ¨æ­¤ï¼Œç›¼åƒé‡‘æ¸¸å­ä½•ä¹‹ã€‚ å¼•ç”¨çš„å¤šå±‚åµŒå¥—åŒºå—å¼•ç”¨å¯ä»¥åµŒå¥—ï¼ˆä¾‹å¦‚ï¼šå¼•ç”¨å†…çš„å¼•ç”¨ï¼‰, åªè¦æ ¹æ®å±‚æ¬¡åŠ ä¸Šä¸åŒæ•°é‡çš„ &gt; : 12345&gt;&gt;&gt; é”„ç¦¾æ—¥å½“åˆï¼Œæ±—æ»´ç¦¾ä¸‹åœŸã€‚ - æç»…&gt;&gt; å±±æœ‰æœ¨å…®æœ¨æœ‰æï¼Œå¿ƒæ‚¦å›å…®å›ä¸çŸ¥ã€‚ - è¶Šäººæ­Œ&gt; å»å¹´ä»Šæ—¥æ­¤é—¨ä¸­ï¼Œäººé¢æ¡ƒèŠ±ç›¸æ˜ çº¢ã€‚ - å´”æŠ¤ é”„ç¦¾æ—¥å½“åˆï¼Œæ±—æ»´ç¦¾ä¸‹åœŸã€‚ - æç»… å±±æœ‰æœ¨å…®æœ¨æœ‰æï¼Œå¿ƒæ‚¦å›å…®å›ä¸çŸ¥ã€‚ - è¶Šäººæ­Œ å»å¹´ä»Šæ—¥æ­¤é—¨ä¸­ï¼Œäººé¢æ¡ƒèŠ±ç›¸æ˜ çº¢ã€‚ - é¢˜éƒ½åŸå—åº„ é”šç‚¹ç½‘é¡µä¸­ï¼Œé”šç‚¹å…¶å®å°±æ˜¯é¡µå†…è¶…é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯é“¾æ¥æœ¬æ–‡æ¡£å†…éƒ¨çš„æŸäº›å…ƒç´ ï¼Œå®ç°å½“å‰é¡µé¢ä¸­çš„è·³è½¬ã€‚æ¯”å¦‚æˆ‘è¿™é‡Œå†™ä¸‹ä¸€ä¸ªé”šç‚¹ï¼Œç‚¹å‡»è·³è½¬åˆ°æŒ‡å®šç« èŠ‚ã€‚ 1[ç‚¹å‡»è·³è½¬è‡³åŒºå—å¼•ç”¨](#åŒºå—å¼•ç”¨) ç‚¹å‡»è·³è½¬è‡³åŒºå—å¼•ç”¨ ä»£ç åŒºå—ä»£ç åŒºå—çš„å»ºç«‹æ˜¯åœ¨æ¯è¡ŒåŠ ä¸Š 4 ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼ˆå¦‚åŒå†™ä»£ç ä¸€æ ·ï¼‰ã€‚å¦‚æ™®é€šæ®µè½ï¼š void main(){ printf(â€œHello, Markdown.â€);} ä»£ç åŒºå—ï¼š void main() &#123; printf(&quot;Hello, Markdown.&quot;); &#125; æ³¨æ„:éœ€è¦å’Œæ™®é€šæ®µè½ä¹‹é—´å­˜åœ¨ç©ºè¡Œã€‚ å¼ºè°ƒMarkdown ä½¿ç”¨æ˜Ÿå·*å’Œåº•çº¿_ä½œä¸ºæ ‡è®°å¼ºè°ƒå­—è¯çš„ç¬¦å·ã€‚ æ–œä½“1*èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ* èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ ç²—ä½“1**èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ** èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ åˆ é™¤çº¿1~~èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ~~ èŠ±è‡ªé£˜é›¶æ°´è‡ªæµ åˆ—è¡¨ä½¿ç”¨Â·ã€+ã€æˆ–-æ ‡è®°æ— åºåˆ—è¡¨ï¼Œå¦‚ï¼š -ï¼ˆ+*ï¼‰ç¬¬ä¸€é¡¹-ï¼ˆ+*ï¼‰ç¬¬äºŒé¡¹- ï¼ˆ+*ï¼‰ç¬¬ä¸‰é¡¹ æ³¨æ„ï¼šæ ‡è®°åé¢æœ€å°‘æœ‰ä¸€ä¸ª_ç©ºæ ¼_æˆ–_åˆ¶è¡¨ç¬¦_ã€‚è‹¥ä¸åœ¨å¼•ç”¨åŒºå—ä¸­ï¼Œå¿…é¡»å’Œå‰æ–¹æ®µè½ä¹‹é—´å­˜åœ¨ç©ºè¡Œã€‚ æ•ˆæœï¼š ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ æœ‰åºåˆ—è¡¨çš„æ ‡è®°æ–¹å¼æ˜¯å°†ä¸Šè¿°çš„ç¬¦å·æ¢æˆæ•°å­—ï¼Œå¹¶è¾…ä»¥.ï¼Œå¦‚ï¼š 1 . ç¬¬ä¸€é¡¹2 . ç¬¬äºŒé¡¹3 . ç¬¬ä¸‰é¡¹ æ•ˆæœï¼š ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ åˆ†å‰²çº¿åˆ†å‰²çº¿æœ€å¸¸ä½¿ç”¨å°±æ˜¯ä¸‰ä¸ªæˆ–ä»¥ä¸Š*ï¼Œè¿˜å¯ä»¥ä½¿ç”¨-å’Œ_ã€‚ é“¾æ¥Markdown æ”¯æŒä¸¤ç§å½¢å¼çš„é“¾æ¥è¯­æ³•ï¼šè¡Œå†…å¼å’Œå‚è€ƒå¼ä¸¤ç§å½¢å¼ï¼Œè¡Œå†…å¼ä¸€èˆ¬ä½¿ç”¨è¾ƒå¤šã€‚ è¡Œå†…å¼[]é‡Œå†™é“¾æ¥æ–‡å­—ï¼Œ()é‡Œå†™é“¾æ¥åœ°å€ï¼Œ()ä¸­çš„ &quot;&quot; ä¸­å¯ä»¥ä¸ºé“¾æ¥æŒ‡å®š title å±æ€§ï¼Œtitle å±æ€§å¯åŠ å¯ä¸åŠ ã€‚title å±æ€§çš„æ•ˆæœæ˜¯é¼ æ ‡æ‚¬åœåœ¨é“¾æ¥ä¸Šä¼šå‡ºç°æŒ‡å®šçš„ title æ–‡å­—ã€‚[é“¾æ¥æ–‡å­—](é“¾æ¥åœ°å€ &quot;é“¾æ¥æ ‡é¢˜&quot;) è¿™æ ·çš„å½¢å¼ã€‚é“¾æ¥åœ°å€ä¸é“¾æ¥æ ‡é¢˜å‰æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚ 12[MPPL: Markdown to PDF with Pandoc via Latex](https://github.com/Dunky-Z/MPPL)[MPPL: Markdown to PDF with Pandoc via Latex](https://github.com/Dunky-Z/MPPL &quot;MPPL&quot;) MPPL: Markdown to PDF with Pandoc via Latex MPPL: Markdown to PDF with Pandoc via Latex å‚è€ƒå¼å‚è€ƒå¼è¶…é“¾æ¥ä¸€èˆ¬ç”¨åœ¨å­¦æœ¯è®ºæ–‡ä¸Šé¢ï¼Œæˆ–è€…å¦ä¸€ç§æƒ…å†µï¼Œå¦‚æœæŸä¸€ä¸ªé“¾æ¥åœ¨æ–‡ç« ä¸­å¤šå¤„ä½¿ç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨å¼•ç”¨çš„æ–¹å¼åˆ›å»ºé“¾æ¥å°†éå¸¸å¥½ï¼Œå®ƒå¯ä»¥è®©ä½ å¯¹é“¾æ¥è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ã€‚ å‚è€ƒå¼é“¾æ¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ–‡ä¸­çš„å†™æ³• [é“¾æ¥æ–‡å­—][é“¾æ¥æ ‡è®°]ï¼Œåœ¨æ–‡æœ¬çš„ä»»æ„ä½ç½®æ·»åŠ  [é“¾æ¥æ ‡è®°]:é“¾æ¥åœ°å€ &quot;é“¾æ¥æ ‡é¢˜&quot;, é“¾æ¥åœ°å€ä¸é“¾æ¥æ ‡é¢˜å‰æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚ 123å…¨çƒæœ€å¤§çš„æœç´¢å¼•æ“ç½‘ç«™æ˜¯ [Google][1]ã€‚[1]:http://www.google.com &quot;Google&quot; å…¨çƒæœ€å¤§çš„æœç´¢å¼•æ“ç½‘ç«™æ˜¯ Googleã€‚ å›¾ç‰‡å›¾ç‰‡çš„åˆ›å»ºæ–¹å¼ä¸è¶…é“¾æ¥ç›¸ä¼¼ï¼Œè€Œä¸”å’Œè¶…é“¾æ¥ä¸€æ ·ä¹Ÿæœ‰ä¸¤ç§å†™æ³•ï¼Œè¡Œå†…å¼å’Œå‚è€ƒå¼å†™æ³•ã€‚ è¯­æ³•ä¸­å›¾ç‰‡ Alt çš„æ„æ€æ˜¯å¦‚æœå›¾ç‰‡å› ä¸ºæŸäº›åŸå› ä¸èƒ½æ˜¾ç¤ºï¼Œå°±ç”¨å®šä¹‰çš„å›¾ç‰‡ Alt æ–‡å­—æ¥ä»£æ›¿å›¾ç‰‡ã€‚å›¾ç‰‡ Title åˆ™å’Œé“¾æ¥ä¸­çš„ Title ä¸€æ ·ï¼Œè¡¨ç¤ºé¼ æ ‡æ‚¬åœä¸å›¾ç‰‡ä¸Šæ—¶å‡ºç°çš„æ–‡å­—ã€‚Alt å’Œ Title éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥çœç•¥ï¼Œä½†å»ºè®®å†™ä¸Šã€‚ å›¾ç‰‡è¡Œå†…å¼![å›¾ç‰‡ Alt](å›¾ç‰‡åœ°å€ &quot;å›¾ç‰‡Title&quot;) 1![](https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Markdown-mark.svg/2880px-Markdown-mark.svg.png) å›¾ç‰‡å‚è€ƒå¼åœ¨æ–‡æ¡£è¦æ’å…¥å›¾ç‰‡çš„åœ°æ–¹å†™ ![å›¾ç‰‡ Alt][æ ‡è®°]ã€‚ åœ¨æ–‡æ¡£çš„æœ€åå†™ä¸Š [æ ‡è®°]:å›¾ç‰‡åœ°å€ &quot;Title&quot;ã€‚ 123![MarkdownLogo][MarkdownLogo][MarkdownLogo]:../img/Markdown-mark.png &quot;MarkdownLogo&quot; åæ–œæ \\ç›¸å½“äºåè½¬ä¹‰ä½œç”¨ã€‚ä½¿ç¬¦å·æˆä¸ºæ™®é€šç¬¦å·ã€‚ ä»£ç å¯¹äºç¨‹åºå‘˜æ¥è¯´è¿™ä¸ªåŠŸèƒ½æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œæ’å…¥ç¨‹åºä»£ç çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åˆ©ç”¨ç¼©è¿› (Tab), å¦ä¸€ç§æ˜¯åˆ©ç”¨ â€œ`â€ ç¬¦å· (ä¸€èˆ¬åœ¨ ESC é”®ä¸‹æ–¹) åŒ…è£¹ä»£ç ã€‚ æ’å…¥è¡Œå†…ä»£ç ï¼Œå³æ’å…¥ä¸€ä¸ªå•è¯æˆ–è€…ä¸€å¥ä»£ç çš„æƒ…å†µï¼Œä½¿ç”¨ `code` è¿™æ ·çš„å½¢å¼æ’å…¥ã€‚ æ’å…¥å¤šè¡Œä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ç¼©è¿›æˆ–è€… ``` code ```, å…·ä½“çœ‹ç¤ºä¾‹ã€‚ ä»£ç è¡Œå†…å¼1PHP æ‰“å°å †æ ˆä¿¡æ¯ `debug_backtrace()`ã€‚ PHP æ‰“å°å †æ ˆä¿¡æ¯ debug_backtrace()ã€‚ ç¼©è¿›å¼å¤šè¡Œä»£ç ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦ã€‚ ä¸€ä¸ªä»£ç åŒºå—ä¼šä¸€ç›´æŒç»­åˆ°æ²¡æœ‰ç¼©è¿›çš„é‚£ä¸€è¡Œ (æˆ–æ˜¯æ–‡ä»¶ç»“å°¾)ã€‚ 123$closure = function () use($name) &#123; return $name;&#125; $closure = function () use($name) &#123; return $name; &#125; ç”¨å…­ä¸ª ` åŒ…è£¹å¤šè¡Œä»£ç 1234567&gt; ```c # ä¸ºäº†èƒ½å¤Ÿåœ¨ Markdown é‡Œæ¼”ç¤ºï¼Œæ‰€ä»¥åŠ äº†&gt;ç¬¦å·#include &lt;stdio.h&gt;int main()&#123; printf(&quot;Hello, World!\\n&quot;); return 0;&#125; 12345678```c#include &lt;stdio.h&gt;int main()&#123; printf(&quot;Hello, World!\\n&quot;); return 0;&#125; å†…å®¹ç›®å½•åœ¨æ®µè½ä¸­å¡«å†™ [TOC] ä»¥æ˜¾ç¤ºå…¨æ–‡å†…å®¹çš„ç›®å½•ç»“æ„ã€‚ è¡¨æ ¼ ä¸ç®¡æ˜¯å“ªç§æ–¹å¼, ç¬¬ä¸€è¡Œä¸ºè¡¨å¤´, ç¬¬äºŒè¡Œåˆ†éš”è¡¨å¤´å’Œä¸»ä½“éƒ¨åˆ†, ç¬¬ä¸‰è¡Œå¼€å§‹æ¯ä¸€è¡Œä¸ºä¸€ä¸ªè¡¨æ ¼è¡Œã€‚ åˆ—äºåˆ—ä¹‹é—´ç”¨ç®¡é“ç¬¦|éš”å¼€ã€‚åŸç”Ÿæ–¹å¼çš„è¡¨æ ¼æ¯ä¸€è¡Œçš„ä¸¤è¾¹ä¹Ÿè¦æœ‰ç®¡é“ç¬¦ã€‚ ç¬¬äºŒè¡Œè¿˜å¯ä»¥ä¸ºä¸åŒçš„åˆ—æŒ‡å®šå¯¹é½æ–¹å‘ã€‚é»˜è®¤ä¸ºå·¦å¯¹é½, åœ¨-å³è¾¹åŠ ä¸Š:å°±å³å¯¹é½ã€‚ ç®€å•æ–¹å¼: 12345è¯—å|ä½œè€…|æœä»£-|-|-ç™½å¤´åŸ|å“æ–‡å›|ä¸¤æ±‰é”¦ç‘Ÿ|æå•†éš|å”ä»£ç™»ç§‘å|å­ŸéƒŠ|å”ä»£ è¯—å ä½œè€… æœä»£ ç™½å¤´åŸ å“æ–‡å› ä¸¤æ±‰ é”¦ç‘Ÿ æå•†éš å”ä»£ ç™»ç§‘å å­ŸéƒŠ å”ä»£ åŸç”Ÿæ–¹å¼: 12345|è¯—å|ä½œè€…|æœä»£||-|-|-||ç™½å¤´åŸ|å“æ–‡å›|ä¸¤æ±‰||é”¦ç‘Ÿ|æå•†éš|å”ä»£||ç™»ç§‘å|å­ŸéƒŠ|å”ä»£| è¯—å ä½œè€… æœä»£ ç™½å¤´åŸ å“æ–‡å› ä¸¤æ±‰ é”¦ç‘Ÿ æå•†éš å”ä»£ ç™»ç§‘å å­ŸéƒŠ å”ä»£ ä¸ºè¡¨æ ¼ç¬¬äºŒåˆ—æŒ‡å®šæ–¹å‘: 1234è¯—å|åå¥-|-:æ¢¦å¾®ä¹‹|å›åŸ‹æ³‰ä¸‹æ³¥é”€éª¨ã€‚ä¸Šé‚ª|ä¸Šé‚ªï¼Œæˆ‘æ¬²ä¸å›ç›¸çŸ¥ï¼Œé•¿å‘½æ— ç»è¡°ã€‚ è¯—å åå¥ æ¢¦å¾®ä¹‹ å›åŸ‹æ³‰ä¸‹æ³¥é”€éª¨ã€‚ ä¸Šé‚ª ä¸Šé‚ªï¼Œæˆ‘æ¬²ä¸å›ç›¸çŸ¥ï¼Œé•¿å‘½æ— ç»è¡°ã€‚ æ³¨è„šåœ¨éœ€è¦æ·»åŠ æ³¨è„šçš„æ–‡å­—ååŠ ä¸Šè„šæ³¨åå­—[^æ³¨è„šåå­—], ç§°ä¸ºåŠ æ³¨ã€‚ ç„¶ååœ¨æ–‡æœ¬çš„ä»»æ„ä½ç½®(ä¸€èˆ¬åœ¨æœ€å)æ·»åŠ è„šæ³¨, è„šæ³¨å‰å¿…é¡»æœ‰å¯¹åº”çš„è„šæ³¨åå­—ã€‚ 12345ä½¿ç”¨ Markdown[^1] å¯ä»¥æ•ˆç‡çš„ä¹¦å†™æ–‡æ¡£ï¼Œç›´æ¥è½¬æ¢æˆ HTML[^2]ã€‚[^1]: Markdown æ˜¯ä¸€ç§çº¯æ–‡æœ¬æ ‡è®°è¯­è¨€[^2]: HyperText Markup Language è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ LaTeX å…¬å¼$ è¡¨ç¤ºè¡Œå†…å…¬å¼1è´¨èƒ½å®ˆæ’æ–¹ç¨‹å¯ä»¥ç”¨ä¸€ä¸ªå¾ˆç®€æ´çš„æ–¹ç¨‹å¼ $E=mc^2$ æ¥è¡¨è¾¾ã€‚ è´¨èƒ½å®ˆæ’æ–¹ç¨‹å¯ä»¥ç”¨ä¸€ä¸ªå¾ˆç®€æ´çš„æ–¹ç¨‹å¼$E=mc^2$æ¥è¡¨è¾¾ã€‚ $$ è¡¨ç¤ºæ•´è¡Œå…¬å¼123$$\\sum_&#123;i=1&#125;^n a_i=0$$$$f(x_1,x_x,\\ldots,x_n) = x_1^2 + x_2^2 + \\cdots + x_n^2 $$$$\\sum^&#123;j-1&#125;_&#123;k=0&#125;&#123;\\widehat&#123;\\gamma&#125;_&#123;kj&#125; z_k&#125;$$ $$\\sum_{i=1}^n a_i=0$$ å°è¯•ä¸€ä¸‹ Chromeä¸‹çš„æ’ä»¶è¯¸å¦‚stackeditä¸markdown-hereç­‰éå¸¸æ–¹ä¾¿ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå¹³å°å—é™ã€‚ åœ¨çº¿çš„Cmd Markdown ç¼–è¾‘é˜…è¯»å™¨ - ä½œä¸šéƒ¨è½å‡ºå“ã€‚ Windownsä¸‹çš„Typora â€” a markdown editor, markdown readerã€‚ Macä¸‹çš„ Mou æ˜¯å›½äººè´¡çŒ®çš„ï¼Œå£ç¢‘å¾ˆå¥½ã€‚ Linuxä¸‹çš„ ReText ä¸é”™ã€‚ å½“ç„¶ï¼Œæœ€ç»ˆå¢ƒç•Œæ°¸è¿œéƒ½æ˜¯ç¬”ä¸‹æ˜¯è¯­æ³•ï¼Œå¿ƒä¸­æ ¼å¼åŒ–ã€‚ æ³¨æ„ï¼šä¸åŒçš„ Markdown è§£é‡Šå™¨æˆ–å·¥å…·å¯¹ç›¸åº”è¯­æ³•ï¼ˆæ‰©å±•è¯­æ³•ï¼‰çš„è§£é‡Šæ•ˆæœä¸å°½ç›¸åŒï¼Œå…·ä½“å¯å‚è§å·¥å…·çš„ä½¿ç”¨è¯´æ˜ã€‚è™½ç„¶æœ‰äººæƒ³å‡ºé¢æä¸€ä¸ªæ‰€è°“çš„æ ‡å‡†åŒ–çš„ Markdownï¼Œæ²¡æƒ³åˆ°è¿˜æƒ¹æ€’äº†å¥åœ¨çš„åˆ›å§‹äºº John Gruberã€‚ ä»¥ä¸ŠåŸºæœ¬æ˜¯æ‰€æœ‰ traditonal Markdown çš„è¯­æ³•ã€‚ å…³äºå…¶å®ƒæ‰©å±•è¯­æ³•å¯å‚è§å…·ä½“å·¥å…·çš„ä½¿ç”¨è¯´æ˜ã€‚ å‚è€ƒèµ„æ–™ Markdown åŸºæœ¬è¯­æ³•ã€‚ cdoco/markdown-syntax: Markdown è¯­æ³•è¯¦è§£ã€‚","categories":[],"tags":[{"name":"Markdown","slug":"Markdown","permalink":"http://example.com/tags/Markdown/"}]},{"title":"Markdown è¡¨æ ¼ç«–çº¿è‡ªåŠ¨å¯¹é½","slug":"Markdownè¡¨æ ¼ç«–çº¿è‡ªåŠ¨å¯¹é½","date":"2022-09-24T07:01:41.000Z","updated":"2022-10-15T03:08:33.812Z","comments":true,"path":"2022/09/24/Markdownè¡¨æ ¼ç«–çº¿è‡ªåŠ¨å¯¹é½/","link":"","permalink":"http://example.com/2022/09/24/Markdown%E8%A1%A8%E6%A0%BC%E7%AB%96%E7%BA%BF%E8%87%AA%E5%8A%A8%E5%AF%B9%E9%BD%90/","excerpt":"","text":"éœ€æ±‚èƒŒæ™¯Markdown ä¸­çš„è¡¨æ ¼ï¼Œåªè¦ç¬¦åˆè¯­æ³•å°±èƒ½å¤Ÿæ­£å¸¸æ¸²æŸ“æ˜¾ç¤ºï¼Œä½†æ˜¯ç¬¦åˆè¯­æ³•ä½†æ˜¯ Markdown æºç å´ä¸ä¸€å®šæ˜“è¯»ã€‚å°±å¦‚ä»¥ä¸‹çš„è¿™ä¸ªè¡¨æ ¼ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œä½†æ˜¯æºç åœ¨æºæ–‡ä»¶ä¸­ç«–çº¿ä¸å¯¹é½ï¼Œå°±é˜…è¯»å›°éš¾ã€‚ æºç ï¼š 12345|è¯—å|ä½œè€…|æœä»£||-|-|-||ç™½å¤´åŸ|å“æ–‡å›|ä¸¤æ±‰||é”¦ç‘Ÿ|æå•†éš|å”ä»£||ç™»ç§‘å|å­ŸéƒŠ|å”ä»£| æ˜¾ç¤ºæ•ˆæœï¼š è¯—å ä½œè€… æœä»£ ç™½å¤´åŸ å“æ–‡å› ä¸¤æ±‰ é”¦ç‘Ÿ æå•†éš å”ä»£ ç™»ç§‘å å­ŸéƒŠ å”ä»£ æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°†å…¶ç«–çº¿å¯¹é½ï¼Œå¦‚ä¸‹è¿™æ ·å°±æ˜“è¯»è®¸å¤šï¼š 12345| è¯—å | ä½œè€… | æœä»£ || ------ | ------ | ---- || ç™½å¤´åŸ | å“æ–‡å› | ä¸¤æ±‰ || é”¦ç‘Ÿ | æå•†éš | å”ä»£ || ç™»ç§‘å | å­ŸéƒŠ | å”ä»£ | æ˜¾ç¤ºæ•ˆæœä¿æŒä¸€è‡´ã€‚ä½†æ˜¯å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦å»æ‰‹åŠ¨å¯¹é½æ•ˆç‡å¤ªä½ï¼Œä¹Ÿä¸ç¬¦åˆ Markdown è®¾è®¡åˆè¡·ã€‚è¿™å°±ç”¨åˆ°äº†é¢å¤–çš„æ’ä»¶ï¼Œèƒ½å¤Ÿè¾…åŠ©æˆ‘ä»¬å®Œæˆè¿™ä¸ªå·¥ä½œã€‚ Markdown All in OneVSCode æ’ä»¶ä¸­å¿ƒæœç´¢Markdown All in Oneå®‰è£…ã€‚ å®‰è£…å®Œæˆåï¼Œä½¿ç”¨æ—¶å³å‡»çª—å£é€‰æ‹©Format Document withï¼š é€‰æ‹©Markdown All in Oneå³å¯è‡ªåŠ¨å¯¹é½æ‰€æœ‰è¡¨æ ¼ç«–çº¿ï¼š å¸¸è§é—®é¢˜æ ¼å¼åŒ–æ–‡æ¡£åä»æœªå¯¹é½è¿™æ˜¯ç”±äºè¡¨æ ¼ä¸­åŒæ—¶æœ‰ä¸­è‹±æ–‡ï¼Œè€Œä¸­è‹±æ–‡å­—ä½“ä¸ç­‰å®½å¯¼è‡´çš„ã€‚å¦‚æœå¯¹é˜…è¯»è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥ä¸ç”¨ç®¡ï¼Œå®é™…ä¸Šå·²ç»æ ¼å¼åŒ–å®Œæˆäº†ã€‚å¦‚æœéœ€è¦å¯¹é½ï¼Œé‚£ä¹ˆå¯ä»¥æŸ¥çœ‹ç¼–ç å­—ä½“ä¸é˜…è¯»å­—ä½“æ¨èè¿™ç¯‡æ–‡ç« çš„ä¸­æ–‡ç­‰å®½å­—ä½“ä¸‹è½½å¹¶å®‰è£…ï¼Œå³å¯æ­£å¸¸å¯¹é½ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"Markdown","slug":"Markdown","permalink":"http://example.com/tags/Markdown/"}]},{"title":"ZH-The RISC-V Instruction Set Manual Volume 2-ç‰¹æƒçº§æ¶æ„","slug":"ZH-The-RISC-V-Instruction-Set-Manual-Volume-2-ç‰¹æƒçº§æ¶æ„","date":"2022-09-22T01:37:54.000Z","updated":"2022-10-15T03:14:29.627Z","comments":true,"path":"2022/09/22/ZH-The-RISC-V-Instruction-Set-Manual-Volume-2-ç‰¹æƒçº§æ¶æ„/","link":"","permalink":"http://example.com/2022/09/22/ZH-The-RISC-V-Instruction-Set-Manual-Volume-2-%E7%89%B9%E6%9D%83%E7%BA%A7%E6%9E%B6%E6%9E%84/","excerpt":"","text":"Introduction Document Version 20211203 Control and Status Registers (CSRs)Machine-Level ISA, Version 1.12æœ¬ç« ä»‹ç»äº†æœºå™¨æ¨¡å¼ï¼ˆM-modeï¼‰ä¸­å¯ç”¨çš„æœºå™¨çº§æ“ä½œï¼Œè¿™æ˜¯ RISC-V ç³»ç»Ÿä¸­æœ€é«˜æƒé™çš„æ¨¡å¼ã€‚M æ¨¡å¼ç”¨äºå¯¹ç¡¬ä»¶å¹³å°çš„ä½çº§è®¿é—®ï¼Œæ˜¯å¤ä½æ—¶è¿›å…¥çš„ç¬¬ä¸€ä¸ªæ¨¡å¼ã€‚M æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°é‚£äº›åœ¨ç¡¬ä»¶ä¸­ç›´æ¥å®ç°è¿‡äºå›°éš¾æˆ–æˆæœ¬é«˜æ˜‚çš„åŠŸèƒ½ã€‚RISC-V çš„æœºå™¨çº§ ISA åŒ…å«ä¸€ä¸ªå…±åŒçš„æ ¸å¿ƒï¼Œæ ¹æ®æ”¯æŒçš„å…¶ä»–æƒé™çº§åˆ«å’Œç¡¬ä»¶å®ç°çš„å…¶ä»–ç»†èŠ‚æ¥æ‰©å±•ã€‚ Machine-Level CSRsé™¤äº†æœ¬èŠ‚ä¸­æè¿°çš„æœºå™¨çº§ CSRs å¤–ï¼ŒM-mode ä»£ç è¿˜å¯ä»¥è®¿é—®è¾ƒä½ç‰¹æƒçº§åˆ«çš„æ‰€æœ‰ CSRsã€‚ Machine ISA Register misamisa CSR æ˜¯ WARL è¯»å†™å¯„å­˜å™¨ï¼ŒæŠ¥å‘Šç¡¬ä»¶ (hart) æ”¯æŒçš„ ISAã€‚è¯¥å¯„å­˜å™¨åœ¨ä»»ä½•å®ç°ä¸­éƒ½å¿…é¡»æ˜¯å¯è¯»çš„ï¼Œä½†æ˜¯å¯ä»¥è¿”å›é›¶å€¼ä»¥æŒ‡ç¤ºæœªå®ç° misa å¯„å­˜å™¨ï¼Œè¿™å°±éœ€è¦é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„éæ ‡å‡†æœºåˆ¶ç¡®å®š CPU åŠŸèƒ½ã€‚ MXLï¼ˆæœºå™¨ XLENï¼‰å­—æ®µç¼–ç æœ¬æœºåŸºæœ¬æ•´æ•° ISA å®½åº¦ï¼Œå¦‚è¡¨ 3.1 æ‰€ç¤ºã€‚MXL å­—æ®µåœ¨æ”¯æŒå¤šä¸ªåŸºæœ¬ ISA å®½åº¦çš„å®ç°ä¸­å¯èƒ½æ˜¯å¯å†™çš„ã€‚M-mode ä¸‹çš„æœ‰æ•ˆ XLEN, MXLENï¼Œç”± MXL çš„è®¾ç½®ç»™å‡ºï¼Œå¦‚æœ misa ä¸ºé›¶ï¼Œåˆ™æœ‰ä¸€ä¸ªå›ºå®šçš„å€¼ã€‚é‡ç½®æ—¶ï¼ŒMXL å­—æ®µå§‹ç»ˆè®¾ç½®ä¸ºæœ€å¹¿æ³›æ”¯æŒçš„ ISA å˜ç§ã€‚ misa CSR ä¸º MXLEN ä½å®½ã€‚å¦‚æœä» misa è¯»å–çš„å€¼ä¸ä¸ºé›¶ï¼Œè¯¥å€¼çš„ MXL å­—æ®µæ€»æ˜¯è¡¨ç¤ºå½“å‰çš„ MXLENã€‚å¦‚æœå¯¹ misa çš„å†™æ“ä½œå¯¼è‡´ MXLEN å‘ç”Ÿæ›´æ”¹ï¼Œåˆ™ MXL çš„ä½ç½®å°†ä»¥æ–°çš„å®½åº¦ç§»åŠ¨åˆ° misa çš„æœ€é«˜æœ‰æ•ˆä¸¤ä½ã€‚ å¯ä»¥ä½¿ç”¨è¿”å›çš„ misa å€¼çš„ç¬¦å·ä¸Šçš„åˆ†æ”¯ï¼Œä»¥åŠå¯èƒ½åœ¨ç¬¦å·ä¸Šå·¦ç§»ä¸€ä¸ªåˆ†æ”¯å’Œç¬¬äºŒä¸ªåˆ†æ”¯ï¼Œæ¥å¿«é€Ÿç¡®å®šåŸºæœ¬å®½åº¦ã€‚è¿™äº›æ£€æŸ¥å¯ä»¥ç”¨æ±‡ç¼–ä»£ç ç¼–å†™ï¼Œè€Œæ— éœ€çŸ¥é“æœºå™¨çš„å¯„å­˜å™¨å®½åº¦ï¼ˆXLENï¼‰ã€‚åŸºæœ¬å®½åº¦ç”± XLEN = 2^(MXL + 4) ç»™å‡ºã€‚å¦‚æœ misa ä¸ºé›¶ï¼Œåˆ™å¯ä»¥é€šè¿‡å°†ç«‹å³æ•° 4 æ”¾ç½®åœ¨ä¸€ä¸ªå¯„å­˜å™¨ä¸­ï¼Œç„¶åä¸€æ¬¡å°†å¯„å­˜å™¨å·¦ç§» 31 ä½æ¥æ‰¾åˆ°åŸºæœ¬å®½åº¦ã€‚å¦‚æœåœ¨ä¸€æ¬¡ç§»ä½åä¸ºé›¶ï¼Œåˆ™è¯¥æœºå™¨ä¸º RV32ã€‚å¦‚æœä¸¤æ¬¡ç§»ä½åä¸ºé›¶ï¼Œåˆ™æœºå™¨ä¸º RV64ï¼Œå¦åˆ™ä¸º RV128ã€‚ Extensions å­—æ®µç¼–ç äº†ç›®å‰å­˜æœ‰çš„æ ‡å‡†æ‰©å±•ï¼Œå…¶æ¯ä¸ª bit éƒ½å¯¹åº”äº†å­—æ¯è¡¨ä¸­çš„ä¸€ä¸ªå­—æ¯ï¼ˆbit 0 ç¼–ç æ‰©å±•â€œAâ€æ˜¯å¦å­˜åœ¨ï¼Œbit 1 ç¼–ç æ‰©å±•â€œBâ€æ˜¯å¦å­˜åœ¨â€¦ ç›´è‡³ bit 25 ç¼–ç â€œZâ€ï¼‰ã€‚å¦‚æœåŸºç¡€ ISA æ˜¯ RV32Iã€RV64I æˆ– RV128Iï¼Œåˆ™ç½®ä½â€œIâ€bitï¼Œå¦åˆ™å¦‚æœåŸºç¡€ ISA æ˜¯ RV32Eï¼Œåˆ™ç½®ä½â€œEâ€bitã€‚ Extensions å­—æ®µæ˜¯ä¸€ä¸ªèƒ½åŒ…å«å¯å†™ä½çš„ WARL å­—æ®µï¼ˆå¦‚æœå®ç°å…è®¸ä¿®æ”¹æ‰€æ”¯æŒçš„ ISAï¼‰ã€‚ å¤ä½ï¼ˆresetï¼‰æ—¶ï¼ŒExtensions åº”åŒ…å«æ‰€æ”¯æŒæ‰©å±•çš„æœ€å¤§é›†ï¼Œå¦‚æœ E å’Œ I éƒ½å¯ç”¨ï¼Œåˆ™ä¼˜å…ˆé€‰æ‹© Iã€‚ åœ¨é€šè¿‡æ¸…é™¤ misa ä¸­ç›¸åº” bit æ¥ç¦æ­¢ä¸€ä¸ªæ ‡å‡†æ‰©å±•æ—¶ï¼Œç”±è¯¥æ‰©å±•æ‰€å®šä¹‰æˆ–ä¿®æ”¹çš„æŒ‡ä»¤å’Œ CSR å°†æ¢å¤ä¸ºè¯¥æ‰©å±•æœªå®ç°æ—¶çš„å®šä¹‰ï¼Œæˆ–è€…ä¿ç•™è¡Œä¸ºï¼ˆrevert to their defined or reserved behaviors as if the extension is not implementedï¼‰ã€‚ RV128 base ISA çš„è®¾è®¡å°šæœªå®Œå·¥ï¼Œå°½ç®¡é¢„è®¡æœ¬ specification ä¸­å¤§éƒ¨åˆ†çš„å‰©ä½™éƒ¨åˆ†éƒ½å°†é€‚ç”¨äº RV128ï¼Œä½†æœ¬ç‰ˆæœ¬çš„æ–‡æ¡£ä»…å…³æ³¨ RV32 å’Œ RV64ã€‚ å¦‚æœæ”¯æŒç”¨æˆ·æ¨¡å¼ï¼ˆuser modeï¼‰ï¼Œåˆ™å°†â€œUâ€bit ç½®ä½ï¼›å¦‚æœæ”¯æŒä¸»ç®¡æ¨¡å¼ï¼ˆsupervisor modeï¼‰ï¼Œåˆ™å°†â€œSâ€bit ç½®ä½ã€‚ å¦‚æœå­˜åœ¨ä»»ä½•éæ ‡å‡†æ‰©å±•ï¼ˆnon-standard extensionsï¼‰ï¼Œåˆ™å°†â€œXâ€bit ç½®ä½ã€‚ â€œEâ€ä½æ˜¯åªè¯»çš„ã€‚é™¤éå°† misa ç¡¬è¿çº¿ä¸ºé›¶ï¼Œå¦åˆ™â€œEâ€ä½å§‹ç»ˆè¯»å–ä¸ºâ€œIâ€ä½çš„è¡¥ç ï¼ˆè¡¥é›†ï¼Ÿï¼‰ã€‚åŒæ—¶æ”¯æŒ RV32E å’Œ RV32I çš„å®ç°å¯ä»¥é€šè¿‡æ¸…é™¤â€œIâ€ä½æ¥é€‰æ‹© RV32Eã€‚ å¦‚æœ ISA åŠŸèƒ½ x ä¾èµ– ISA åŠŸèƒ½ yï¼Œåˆ™å°è¯•å¯ç”¨åŠŸèƒ½ x ä½†ç¦ç”¨åŠŸèƒ½ y ä¼šå¯¼è‡´ä¸¤ä¸ªåŠŸèƒ½éƒ½è¢«ç¦ç”¨ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®â€œFâ€ = 0 å’Œâ€œDâ€ = 1 ä¼šå¯¼è‡´åŒæ—¶æ¸…é™¤â€œFâ€å’Œâ€œDâ€ã€‚ å…·ä½“å®ç°å¯èƒ½ä¼šåœ¨ 2 æˆ–å¤šä¸ª misa å­—æ®µçš„é›†ä½“è®¾ç½®ä¸Šæ–½åŠ é¢å¤–çº¦æŸï¼Œæ­¤æ—¶å°†å®ƒä»¬çš„é›†ä½“çœ‹ä½œæ˜¯ä¸€ä¸ª WARL å­—æ®µã€‚è¯•å›¾å‘å…¶ä¸­å†™å…¥ä¸€ä¸ªä¸æ”¯æŒçš„ç»„åˆä¼šå¯¼è‡´è¿™äº› bits è¢«ç½®ä¸ºæŸä¸ªæ”¯æŒçš„ç»„åˆã€‚ å†™ misa å¯èƒ½ä¼šå¢åŠ  IALIGNï¼Œä¾‹å¦‚ï¼Œé€šè¿‡ç¦ç”¨ C æ‰©å±•ã€‚å¦‚æœè¦å†™å…¥ misa çš„æŒ‡ä»¤å¢åŠ äº† IALIGNï¼Œè€Œåä¸€æ¡æŒ‡ä»¤çš„åœ°å€æœªæŒ‰ IALIGN ä½å¯¹é½ï¼Œåˆ™å°†æŠ‘åˆ¶å¯¹ misa çš„å†™å…¥ï¼Œä»è€Œä½¿ misa ä¿æŒä¸å˜ã€‚ åœ¨è½¯ä»¶å¯ç”¨ä¸€ä¸ªä¹‹å‰è¢«ç¦ç”¨çš„æ‰©å±•æ—¶ï¼Œé™¤è¯¥æ‰©å±•å¦æœ‰è§„å®šï¼ˆspecifiedï¼‰ï¼Œå¦åˆ™æ‰€æœ‰å•ç‹¬ä¸è¯¥æ‰©å±•æœ‰å…³çš„çŠ¶æ€éƒ½å°†æ˜¯æœªæŒ‡å®šçš„ï¼ˆunspecifiedï¼‰ã€‚ Machine Vendor ID Register mvendoridmvendorid CSR æ˜¯ä¸€ä¸ª 32 ä½åªè¯»å¯„å­˜å™¨ï¼Œæä¾›å†…æ ¸ä¾›åº”å•†çš„ JEDEC åˆ¶é€ å•† IDã€‚æ­¤å¯„å­˜å™¨åœ¨ä»»ä½•å®ç°ä¸­éƒ½å¿…é¡»æ˜¯å¯è¯»çš„ï¼Œä½†å¯ä»¥è¿”å› 0ï¼Œè¡¨ç¤ºè¯¥å­—æ®µæœªå®ç°æˆ–è¿™æ˜¯éå•†ä¸šå®ç°ã€‚ JEDEC åˆ¶é€ å•† ID é€šå¸¸ç¼–ç ä¸ºå•å­—èŠ‚è¿ç»­çš„ 0x7f ä»£ç çš„åºåˆ—ï¼Œä»¥ä¸ç­‰äº 0x7f çš„å•å­—èŠ‚ ID ç»ˆæ­¢ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªå­—èŠ‚çš„æœ€é«˜æœ‰æ•ˆä½ä¸­å¸¦æœ‰å¥‡æ ¡éªŒä½ã€‚mvendorid åœ¨ Bank å­—æ®µä¸­ç¼–ç å•å­—èŠ‚çš„è¿ç»­ä»£ç ï¼Œå¹¶åœ¨ Offset å­—æ®µä¸­ç¼–ç æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œä¸¢å¼ƒå¥‡å¶æ ¡éªŒä½ã€‚ä¾‹å¦‚ï¼ŒJEDEC åˆ¶é€ å•† ID 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x7f 0x8aï¼ˆåäºŒä¸ªè¿ç»­ä»£ç ï¼Œåè·Ÿ 0x8aï¼‰å°†åœ¨ mvendorid å­—æ®µä¸­ç¼–ç ä¸º 0x60aã€‚ è¯‘è€…æ³¨ï¼šJEDEC å›ºæ€æŠ€æœ¯åä¼šï¼ˆJEDEC Solid State Technology Associationï¼‰æ˜¯å›ºæ€åŠåŠå¯¼ä½“å·¥ä¸šç•Œçš„ä¸€ä¸ªæ ‡å‡†åŒ–ç»„ç»‡ï¼Œå®ƒç”±çº¦ 300 å®¶å…¬å¸æˆå‘˜ç»„æˆï¼Œçº¦ 3300 åæŠ€æœ¯äººå‘˜é€šè¿‡ 50 ä¸ªä¸åŒçš„å§”å‘˜ä¼šè¿ä½œï¼Œåˆ¶å®šå›ºæ€ç”µå­æ–¹é¢çš„å·¥ä¸šæ ‡å‡†ã€‚JEDEC æ›¾ç»æ˜¯ç”µå­å·¥ä¸šè”ç›Ÿï¼ˆEIAï¼‰çš„ä¸€éƒ¨åˆ†ï¼šè”åˆç”µå­è®¾å¤‡å·¥ç¨‹å§”å‘˜ä¼šï¼ˆJoint Electron Device Engineering Councilï¼ŒJEDECï¼‰ã€‚è¯¥åä¼šåˆ¶å®šäº†ä¸€ä¸ªåˆ¶é€ å•†æ ‡è¯†ç çš„æ ‡å‡†ï¼šStandard Manufacturerâ€™s Identification Codeï¼Œé€šè¿‡è¯»å–mvendoridå¯„å­˜å™¨å€¼ï¼ŒæŸ¥é˜…è¯¥æ ‡å‡†å³å¯ç¡®å®šåˆ¶é€ å•†ã€‚ æ³¨ï¼šç”¨ JEDEC çš„è¯æ¥è¯´ï¼ŒBank ç¼–å·æ¯” Continuation çš„æ•°é‡å¤§ 1ï¼›å› æ­¤ï¼Œmvendorid Bank å­—æ®µç¼–ç çš„å€¼æ¯” JEDEC Bank ç¼–å·å°ä¸€ã€‚ æ³¨ï¼šä»¥å‰ï¼Œä¾›åº”å•† ID æ˜¯ RISC-V åŸºé‡‘ä¼šåˆ†é…çš„ç¼–å·ï¼Œä½†è¿™ä¸ JEDEC åœ¨ç»´æŠ¤åˆ¶é€ å•† ID æ ‡å‡†æ–¹é¢çš„å·¥ä½œé‡å¤ã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œå‘ JEDEC æ³¨å†Œåˆ¶é€ å•† ID çš„ä¸€æ¬¡æ€§è´¹ç”¨ä¸º 500 ç¾å…ƒã€‚ Machine-Mode Privileged InstructionsEnvironment Call and BreakpointTrap-Return InstructionsWait for Interruptç­‰å¾…ä¸­æ–­æŒ‡ä»¤ (WFI) ä¸ºå®ç°æä¾›äº†ä¸€ä¸ªæç¤ºï¼Œå³å½“å‰çš„ hart å¯ä»¥åœæ­¢ï¼Œç›´åˆ°éœ€è¦æœåŠ¡ä¸­æ–­ã€‚WFI æŒ‡ä»¤çš„æ‰§è¡Œä¹Ÿå¯ä»¥ç”¨æ¥é€šçŸ¥ç¡¬ä»¶å¹³å°åˆé€‚çš„ä¸­æ–­åº”è¯¥ä¼˜å…ˆè·¯ç”±åˆ°è¿™ä¸ª hartã€‚WFI åœ¨æ‰€æœ‰ç‰¹æƒæ¨¡å¼ä¸‹éƒ½å¯ç”¨ï¼Œå¹¶ä¸”å¯ç”¨äº U æ¨¡å¼ (å¯é€‰åœ°)ã€‚å½“ mstatus ä¸­çš„ TW = 1 æ—¶ï¼Œè¯¥æŒ‡ä»¤å¯èƒ½ä¼šå¼•å‘éæ³•æŒ‡ä»¤å¼‚å¸¸ï¼Œå¦‚ç¬¬ 3.1.6.5 èŠ‚æ‰€è¿°ã€‚ å¦‚æœåœ¨ hart åœæ­¢æ—¶å­˜åœ¨æˆ–ç¨åå‡ºç°å¯ç”¨çš„ä¸­æ–­ï¼Œåˆ™ä¸­æ–­ trap å°†åœ¨ä»¥ä¸‹æŒ‡ä»¤ä¸Šæ‰§è¡Œï¼Œå³åœ¨ trap å¤„ç†ç¨‹åºä¸­æ¢å¤æ‰§è¡Œå¹¶ä¸” mepc = pc + 4ã€‚","categories":[{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"RISC-V","slug":"RISC-V","permalink":"http://example.com/tags/RISC-V/"},{"name":"Translation","slug":"Translation","permalink":"http://example.com/tags/Translation/"}]},{"title":"ä½¿ç”¨ Markdownlint å¯¹ Markdown æ–‡æœ¬æ ¼å¼æ£€æŸ¥","slug":"ä½¿ç”¨Markdownlintå¯¹Markdownæ–‡æœ¬æ ¼å¼æ£€æŸ¥","date":"2022-09-17T03:07:10.000Z","updated":"2022-10-15T03:04:19.451Z","comments":true,"path":"2022/09/17/ä½¿ç”¨Markdownlintå¯¹Markdownæ–‡æœ¬æ ¼å¼æ£€æŸ¥/","link":"","permalink":"http://example.com/2022/09/17/%E4%BD%BF%E7%94%A8Markdownlint%E5%AF%B9Markdown%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F%E6%A3%80%E6%9F%A5/","excerpt":"","text":"Markdownlint ç®€ä»‹Markdown æ ‡è®°è¯­è¨€æ—¨åœ¨æ˜“äºé˜…è¯»ã€ç¼–å†™å’Œç†è§£ã€‚å®ƒçš„çµæ´»æ€§æ—¢æ˜¯ä¼˜ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ã€‚è¯­æ³•ä¼—å¤šï¼Œå› æ­¤æ ¼å¼å¯èƒ½ä¸ä¸€è‡´ã€‚æŸäº›æ„é€ åœ¨æ‰€æœ‰è§£æå™¨ä¸­éƒ½ä¸èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œåº”è¯¥é¿å…ã€‚CommonMark è§„èŒƒæ ‡å‡†åŒ–è§£æå™¨ã€‚ Markdownlint æ˜¯ä¸€ä¸ªç”¨äº Node.js çš„é™æ€åˆ†æå·¥å…·ï¼Œæœ‰ä¸€ä¸ªæ ‡å‡†è§„èŒƒï¼Œç”¨äºå¼ºåˆ¶æ‰§è¡Œ Markdown æ–‡ä»¶çš„æ ‡å‡†å’Œä¸€è‡´æ€§ã€‚ Markdownlint æ’ä»¶ä½¿ç”¨markdownlintæä¾›äº†å¤šç§ä½¿ç”¨åœºæ™¯ä¸‹çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚å‘½ä»¤è¡Œï¼Œç¼–è¾‘å™¨ç”šè‡³ GitHub Actionã€‚å› ä¸ºæˆ‘å¹³æ—¶å†™ Markdown æ–‡æ¡£éƒ½æ˜¯ä½¿ç”¨ VSCodeï¼Œæ‰€ä»¥ä»‹ç»ä¸€ä¸‹ VSCode ä¸‹çš„ä½¿ç”¨ã€‚å…¶ä»–ç¼–è¾‘å™¨åŒ…æ‹¬ VIMï¼ŒSublime ä¹Ÿéƒ½æ”¯æŒï¼Œå¯ä»¥å‰å¾€å®˜ç½‘æŸ¥é˜…æ–¹æ³•ã€‚ VSCode éœ€è¦ä¸‹è½½æ’ä»¶ï¼ŒCtrl+Shift+Xæ‰“å¼€æ’ä»¶ä¸­å¿ƒï¼Œæœç´¢Markdownlintå®‰è£…å³å¯ã€‚ å®‰è£…æ’ä»¶åæ‰“å¼€ Markdown æ–‡æ¡£ï¼Œå¦‚æœæœ‰ä¸ç¬¦åˆè§„èŒƒçš„è¯­æ³•å°†ä¼šè­¦å‘Šæ ‡è¯†ã€‚å¦‚ï¼Œæ ‡é¢˜å‰åæ²¡æœ‰ç©ºè¡Œï¼Œå°†ä¼šæ ‡è¯†ï¼š æç¤ºè¿åäº†ç¬¬ 22 æ¡è§„èŒƒï¼Œç¬¬ 22 æ¡è§„èŒƒçš„å°±æ˜¯æ ‡é¢˜å‰åéœ€è¦æœ‰ç©ºè¡Œéš”å¼€ã€‚ ç›®å‰æœ‰ 53 æ¡è§„èŒƒï¼Œå¯ä»¥åœ¨markdownlint/Rules.mdæŸ¥çœ‹æ‰€æœ‰è§„èŒƒçš„å†…å®¹ã€‚ å½“ç„¶è¿™äº›è§„èŒƒä¹Ÿéƒ½å¯ä»¥è‡ªå®šä¹‰æ˜¯å¦æ£€æŸ¥ï¼Œæ¯”å¦‚ç¬¬ 24 æ¡è§„å®šï¼Œæ–‡æ¡£å†…ä¸å¯ä»¥æœ‰é‡å¤çš„æ ‡é¢˜ï¼Œä½†æ˜¯æˆ‘å°±æœ‰é‡å¤æ ‡é¢˜çš„éœ€æ±‚ï¼Œé‚£è¯¥å¦‚ä½•å…³é—­è¿™ä¸ªæ£€æŸ¥å‘¢ï¼ŒMarkdownlint æä¾›äº†é…ç½®çš„æ–¹å¼ã€‚ Ctrl+Shift+Pæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥ Markdownlintï¼Œæ‰¾åˆ°Creat or open the markdownlint configuration fileã€‚ åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œè¡¨ç¤ºå…³é—­ç¬¬ 24 æ¡è§„èŒƒçš„æ£€æŸ¥ï¼š 123&#123; &quot;MD024&quot;: false,&#125; è¿™æ ·æ–‡æ¡£ä¸­å°†ä¸ä¼šæœ‰ç¬¬ 24 æ¡è§„èŒƒçš„æ£€æŸ¥è­¦å‘Šï¼Œå…¶ä»–æ£€æŸ¥åŒç†ã€‚ Markdownlint è‡ªå®šä¹‰è§„åˆ™MD001 - Heading levels should only increment by one level at a timeæ ‡é¢˜ç­‰çº§ä¸€æ¬¡åªèƒ½å¢åŠ ä¸€çº§ï¼Œä¸èƒ½è·¨çº§ã€‚ åŸç†ï¼šæ ‡é¢˜ä»£è¡¨æ–‡æ¡£çš„ç»“æ„ï¼Œè·³è¿‡æ—¶å¯èƒ½ä¼šé€ æˆæ··æ·† - ç‰¹åˆ«æ˜¯å¯¹äºå¯è®¿é—®æ€§åœºæ™¯ã€‚ MD002 - First heading should be a top-level headingæ–‡æ¡£çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜å¿…é¡»æ˜¯æœ€é«˜çº§çš„æ ‡é¢˜ï¼ˆæ ‡é¢˜ç­‰çº§ 1 çº§åˆ° 6 çº§é€æ¸é™ä½ï¼‰ MD003 - Heading styleæ•´ç¯‡æ–‡æ¡£éœ€è¦é‡‡ç”¨ä¸€è‡´çš„æ ‡é¢˜æ ¼å¼ã€‚ MD004 - Unordered list styleæ— åºåˆ—è¡¨æ ¼å¼éœ€è¦ä¸€è‡´ã€‚ MD005 - Inconsistent indentation for list items at the same level åŒä¸€çº§çš„åˆ—è¡¨ç¼©è¿›å¿…é¡»ä¸€è‡´ åœ¨æœ‰åºåˆ—è¡¨ä¸­ï¼Œå‰é¢çš„æ•°å­—åºå·å¯ä»¥å·¦å¯¹é½ï¼Œä¹Ÿå¯ä»¥å³å¯¹é½ MD006 - Consider starting bulleted lists at the beginning of the lineä¸€çº§åˆ—è¡¨ä¸èƒ½ç¼©è¿›ã€‚ å¦‚ä¸‹ä¸ºæŠ¥é”™ï¼š 1234Some text * List item * List item MD007 - Unordered list indentationæ— åºåˆ—è¡¨åµŒå¥—ç¼©è¿›æ—¶é»˜è®¤é‡‡ç”¨ä¸¤ä¸ªç©ºæ ¼ã€‚ MD009 - Trailing spacesè¡Œå°¾æœ€å¤šå¯ä»¥æ·»åŠ ä¸¤ä¸ªç©ºæ ¼ï¼Œè¶…è¿‡ä¼šç»™å‡ºè­¦å‘Šï¼Œä¸¤ä¸ªç©ºæ ¼æ­£å¥½å¯ä»¥ç”¨äºæ¢è¡Œã€‚ MD010 - Hard tabsä¸èƒ½ä½¿ç”¨ tab é”®ç¼©è¿›ï¼Œè¦ä½¿ç”¨ç©ºæ ¼ã€‚ åŸç†ï¼šç¡¬åˆ¶è¡¨ç¬¦é€šå¸¸ç”±ä¸åŒçš„ç¼–è¾‘å™¨ä»¥ä¸ä¸€è‡´çš„æ–¹å¼å‘ˆç°ï¼Œå¹¶ä¸”æ¯”ç©ºæ ¼æ›´éš¾å¤„ç†ã€‚ MD011 - Reversed link syntaxå½“é‡åˆ°çœ‹ä¼¼é“¾æ¥çš„æ–‡æœ¬ï¼Œä½†è¯­æ³•ä¼¼ä¹å·²åè½¬ï¼ˆ[] å’Œ () åè½¬ï¼‰æ—¶ï¼Œå°†è§¦å‘æ­¤è§„åˆ™ã€‚ MD012 - Multiple consecutive blank linesæ–‡æ¡£ä¸­ä¸èƒ½æœ‰è¿ç»­çš„ç©ºè¡Œï¼Œåœ¨ä»£ç å—ä¸­æ­¤è§„åˆ™ä¸ä¼šç”Ÿæ•ˆã€‚ MD013 - Line lengthé»˜è®¤è¡Œçš„æœ€å¤§é•¿åº¦æ˜¯ 80ï¼Œæ­¤è§„åˆ™å¯¹ä»£ç å—ã€è¡¨æ ¼ã€æ ‡é¢˜ä¹Ÿç”Ÿæ•ˆã€‚ MD014 - Dollar signs used before commands without showing outputåœ¨ä»£ç å—ä¸­ï¼Œç»ˆç«¯å‘½ä»¤å‰ä¸éœ€è¦æœ‰ç¾å…ƒç¬¦å· ($)å¦‚æœä»£ç å—ä¸­æ—¢æœ‰ç»ˆç«¯å‘½ä»¤ï¼Œä¹Ÿæœ‰å‘½ä»¤çš„è¾“å‡ºï¼Œåˆ™ç»ˆç«¯å‘½ä»¤å‰å¯ä»¥æœ‰ç¾å…ƒç¬¦å· ($)ã€‚ MD018 - No space after hash on atx style headingåœ¨â€atxâ€æ ¼å¼çš„æ ‡é¢˜ä¸­ï¼Œ#å·å’Œæ–‡å­—é—´éœ€ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚ MD019 - Multiple spaces after hash on atx style headingåœ¨â€atxâ€æ ¼å¼çš„æ ‡é¢˜ä¸­ï¼Œ#å·å’Œæ–‡å­—é—´åªèƒ½ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œä¸èƒ½æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚ MD020 - No space inside hashes on closed atx style headingåœ¨â€closed_atxâ€æ ¼å¼çš„æ ‡é¢˜ä¸­ï¼Œæ–‡å­—å’Œå‰åçš„#å·ä¹‹é—´éœ€ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚ MD021 - Multiple spaces inside hashes on closed atx style headingåœ¨â€closed_atxâ€æ ¼å¼çš„æ ‡é¢˜ä¸­ï¼Œæ–‡å­—å’Œå‰åçš„#å·ä¹‹é—´åªèƒ½ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œä¸èƒ½æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚ MD022 - Headings should be surrounded by blank linesæ ‡é¢˜è¡Œçš„ä¸Šä¸‹è¡Œå¿…é¡»éƒ½æ˜¯ç©ºè¡Œã€‚ MD023 - Headings must start at the beginning of the lineæ ‡é¢˜è¡Œä¸èƒ½ç¼©è¿›ã€‚ MD024 - Multiple headings with the same contentæ–‡æ¡£ä¸èƒ½æœ‰å†…å®¹é‡å¤çš„æ ‡é¢˜ã€‚ MD025 - Multiple top-level headings in the same documentåŒä¸€æ–‡æ¡£åªèƒ½æœ‰ä¸€ä¸ªæœ€é«˜çº§çš„æ ‡é¢˜ï¼Œé»˜è®¤æ˜¯åªèƒ½æœ‰ä¸€ä¸ª 1 çº§æ ‡é¢˜ã€‚ MD026 - Trailing punctuation in headingæ ‡é¢˜è¡Œæœ«å°¾ä¸èƒ½æœ‰ä»¥ä¸‹æ ‡ç‚¹ç¬¦å·ã€‚ MD027 - Multiple spaces after blockquote symbolåˆ›å»ºå¼•ç”¨åŒºå—æ—¶ï¼Œå³å°–æ‹¬å· ( &gt; ) å’Œæ–‡å­—ä¹‹é—´æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚ MD028 - Blank line inside blockquoteä¸¤ä¸ªå¼•ç”¨åŒºå—é—´ä¸èƒ½ä»…ç”¨ä¸€ä¸ªç©ºè¡Œéš”å¼€æˆ–è€…åŒä¸€å¼•ç”¨åŒºå—ä¸­ä¸èƒ½æœ‰ç©ºè¡Œï¼Œå¦‚æœä¸€è¡Œä¸­æ²¡æœ‰å†…å®¹ï¼Œåˆ™è¿™ä¸€è¡Œè¦ç”¨&gt;å¼€å¤´ã€‚ MD029 - Ordered list item prefixæœ‰åºåˆ—è¡¨çš„å‰ç¼€åºå·æ ¼å¼å¿…é¡»åªç”¨ 1 æˆ–è€…ä» 1 å¼€å§‹çš„åŠ  1 é€’å¢æ•°å­—ã€‚ MD030 - Spaces after list markersåˆ—è¡¨ï¼ˆæœ‰åºã€æ— åºï¼‰çš„å‰ç¼€ç¬¦å·å’Œæ–‡å­—ä¹‹é—´ç”¨ 1 ä¸ªç©ºæ ¼éš”å¼€åœ¨åˆ—è¡¨åµŒå¥—æˆ–è€…åŒä¸€åˆ—è¡¨é¡¹ä¸­æœ‰å¤šä¸ªæ®µè½æ—¶ï¼Œæ— åºåˆ—è¡¨ç¼©è¿›ä¸¤ä¸ªç©ºæ ¼ï¼Œæœ‰åºåˆ—è¡¨ç¼©è¿› 3 ä¸ªç©ºæ ¼ã€‚ MD031 - Fenced code blocks should be surrounded by blank lineså•ç‹¬çš„ä»£ç å—å‰åéœ€è¦ç”¨ç©ºè¡Œéš”å¼€ï¼ˆé™¤éæ˜¯åœ¨æ–‡æ¡£å¼€å¤´æˆ–æœ«å°¾ï¼‰ï¼Œå¦åˆ™æœ‰äº›è§£é‡Šå™¨ä¸ä¼šè§£é‡Šä¸ºä»£ç å— MD032 - Lists should be surrounded by blank linesåˆ—è¡¨ï¼ˆæœ‰åºã€æ— åºï¼‰å‰åéœ€è¦ç”¨ç©ºè¡Œéš”å¼€ï¼Œå¦åˆ™æœ‰äº›è§£é‡Šå™¨ä¸ä¼šè§£é‡Šä¸ºåˆ—è¡¨ã€‚ åˆ—è¡¨çš„ç¼©è¿›å¿…é¡»ä¸€è‡´ã€‚ MD033 - Inline HTMLæ–‡æ¡£ä¸­ä¸å…è®¸ä½¿ç”¨ HTML è¯­å¥ã€‚ MD034 - Bare URL usedå•çº¯çš„é“¾æ¥åœ°å€éœ€è¦ç”¨å°–æ‹¬å· (&lt;&gt;) åŒ…è£¹ï¼Œå¦åˆ™æœ‰äº›è§£é‡Šå™¨ä¸ä¼šè§£é‡Šä¸ºé“¾æ¥ã€‚ MD035 - Horizontal rule styleåˆ›å»ºæ°´å¹³çº¿æ—¶æ•´ç¯‡æ–‡æ¡£è¦ç»Ÿä¸€ (consistent)ï¼Œè¦å’Œæ–‡æ¡£ä¸­ç¬¬ä¸€æ¬¡åˆ›å»ºæ°´å¹³çº¿ä½¿ç”¨çš„ç¬¦å·ä¸€è‡´ã€‚ MD036 - Emphasis used instead of a headingä¸èƒ½ç”¨åŠ ç²—ä»£æ›¿æ ‡é¢˜ã€‚ MD037 - Spaces inside emphasis markersç”¨äºåˆ›å»ºå¼ºè°ƒçš„ç¬¦å·å’Œå¼ºè°ƒçš„çš„æ–‡å­—ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚ MD038 - Spaces inside code span elementså½“ç”¨å•åå¼•å·åˆ›å»ºä»£ç æ®µçš„æ—¶å€™ï¼Œå•åå¼•å·å’Œå®ƒä»¬ä¹‹é—´çš„ä»£ç ä¸èƒ½æœ‰ç©ºæ ¼å¦‚æœè¦æŠŠå•åå¼•å·åµŒå…¥åˆ°ä»£ç æ®µçš„é¦–å°¾ï¼Œåˆ›å»ºä»£ç æ®µçš„å•åå¼•å·å’ŒåµŒå…¥çš„å•åå¼•å·é—´è¦æœ‰ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚ MD039 - Spaces inside link texté“¾æ¥åå’ŒåŒ…å›´å®ƒçš„ä¸­æ‹¬å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä½†é“¾æ¥åä¸­é—´å¯ä»¥æœ‰ç©ºæ ¼ã€‚ MD040 - Fenced code blocks should have a language specifiedå•ç‹¬çš„ä»£ç å—ï¼ˆæ­¤å¤„æ˜¯æŒ‡ä¸Šä¸‹ç”¨ä¸‰ä¸ªåå¼•å·åŒ…å›´çš„ä»£ç å—ï¼‰åº”è¯¥æŒ‡å®šä»£ç å—çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä¸€ç‚¹æœ‰åŠ©äºè§£é‡Šå™¨å¯¹ä»£ç è¿›è¡Œä»£ç é«˜äº®ã€‚ MD041 - First line in a file should be a top-level headingæ–‡æ¡£çš„ç¬¬ä¸€ä¸ªéç©ºè¡Œåº”è¯¥æ˜¯æ–‡æ¡£æœ€é«˜çº§çš„æ ‡é¢˜ï¼Œé»˜è®¤æ˜¯ 1 çº§æ ‡é¢˜ã€‚ MD042 - No empty linksé“¾æ¥çš„åœ°å€ä¸èƒ½ä¸ºç©ºã€‚ MD043 - Required heading structureè¦æ±‚æ ‡é¢˜éµå¾ªä¸€å®šçš„ç»“æ„ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰è§„å®šçš„ç»“æ„ã€‚ MD044 - Proper names should have the correct capitalizationæŒ‡å®šä¸€äº›åç§°ï¼Œä¼šæ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ­£ç¡®çš„å¤§å†™ã€‚ MD045 - Images should have alternate text (alt text)å›¾ç‰‡é“¾æ¥å¿…é¡»åŒ…å«æè¿°æ–‡æœ¬ï¼ˆalt textï¼‰ã€‚ MD046 - Code block styleæ•´ç¯‡æ–‡æ¡£é‡‡ç”¨ä¸€è‡´çš„ä»£ç æ ¼å¼ã€‚ MD047 - Files should end with a single newline characteræ–‡æ¡£éœ€ç”¨ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚ MD048 - Code fence styleè¡¨ç¤ºä»£ç å—çš„æ ‡è®°éœ€è¦ä¸€ç›´ï¼Œå¯ä»¥æ˜¯æ³¢æµªå·ï¼Œä¹Ÿå¯ä»¥æ˜¯ç‚¹å·ã€‚ä½†æ˜¯éœ€è¦ä¿æŒä¸€è‡´ã€‚ MD049 - Emphasis style should be consistentå¼ºè°ƒç¬¦å·éœ€è¦ä¸€ç›´ï¼Œå¦‚æ–œä½“ã€‚ MD050 - Strong style should be consistentåŠ ç²—ç¬¦å·éœ€è¦ä¿æŒä¸€è‡´ã€‚ MD051 - Link fragments should be validé”šç‚¹éœ€è¦è¡¨ç¤ºæ­£ç¡®ã€‚","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"Markdown","slug":"Markdown","permalink":"http://example.com/tags/Markdown/"},{"name":"æ’ä»¶","slug":"æ’ä»¶","permalink":"http://example.com/tags/%E6%8F%92%E4%BB%B6/"},{"name":"æ¨è","slug":"æ¨è","permalink":"http://example.com/tags/%E6%8E%A8%E8%8D%90/"}]},{"title":"VSCode å­—ä½“å¿«é€Ÿåˆ‡æ¢","slug":"VSCodeå­—ä½“å¿«é€Ÿåˆ‡æ¢","date":"2022-09-12T07:05:16.000Z","updated":"2022-10-15T03:10:27.075Z","comments":true,"path":"2022/09/12/VSCodeå­—ä½“å¿«é€Ÿåˆ‡æ¢/","link":"","permalink":"http://example.com/2022/09/12/VSCode%E5%AD%97%E4%BD%93%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2/","excerpt":"","text":"éœ€æ±‚èƒŒæ™¯åœ¨å†™ MD æ–‡æ¡£æ—¶ä¸ºäº†è¿½æ±‚ç¾è§‚ï¼Œè¡¨æ ¼é€šå¸¸éƒ½æ˜¯å¯¹é½çš„ï¼Œè¿™å°±éœ€è¦å­—ä½“å¿…é¡»ç­‰å®½ï¼Œä½†æ˜¯å†™ä»£ç æ—¶ç­‰å®½å­—ä½“çš„å› ä¸ºå¾ˆç˜¦å°ï¼Œä¸å®¹æ˜“é˜…è¯»ï¼Œæ‰€ä»¥æƒ³è¦ä¸€ä¸ªæ’ä»¶èƒ½å¤Ÿåœ¨å¤šä¸ªå­—ä½“ç›´æ¥å¿«é€Ÿåˆ‡æ¢ã€‚ä¸‡èƒ½ VSCode å•¥éƒ½æœ‰ï¼Œæ’ä»¶ä¸­å¿ƒå°±æœ‰ä¸€æ¬¾ä¸“é—¨åˆ‡æ¢å­—ä½“çš„æ’ä»¶Font Switcherã€‚ç›´æ¥æœç´¢å®‰è£…ã€‚ é…ç½®ä¸ä½¿ç”¨æ‰“å¼€é…ç½®è„šæœ¬settings.jsonï¼Œå¦‚æœä»¥å‰ä¿®æ”¹è¿‡å­—ä½“ï¼Œæ‰¾åˆ°&quot;editor.fontFamily&quot;é…ç½®é¡¹ï¼Œå¦‚æœæ²¡æœ‰å°±ç›´æ¥æ·»åŠ ã€‚ è¿™æ˜¯æˆ‘çš„å­—ä½“ï¼Œæ·»åŠ ä½ ä»¬æœºå™¨ä¸Šå®‰è£…çš„å­—ä½“ï¼Œæ¯ä¸ªé€—å·é—´éš”éƒ½æ˜¯ä¸åŒçš„å­—ä½“ï¼Œå¯ä»¥ä½¿ç”¨Font Switcheråˆ‡æ¢ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­—ä½“åæ²¡æœ‰ç©ºæ ¼ä¸éœ€è¦åŠ å•å¼•å·ï¼ŒåŠ äº†ä¹Ÿæ— å¦¨ï¼Œå¦‚æœæœ‰ç©ºæ ¼ï¼Œä¸€å®šè¦åŠ å¼•å·ã€‚ 1&quot;editor.fontFamily&quot;: &quot;&#x27;Sarasa Mono SC&#x27;, å¾®è½¯é›…é»‘ï¼Œ&#x27;Noto Sans Mono CJK SC&#x27;, &#x27;JetBrains Mono&#x27;, Consolas, monospace&quot;, Ctrl+Shift+Pæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥Switch Fontï¼Œé€‰æ‹©åˆ‡æ¢çš„å­—ä½“ã€‚å¦‚å›¾ï¼š ![](https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/09/12/15-17-44-dd742307432154f630585e05a1f57956-GIF 2022-9-12 15-17-27-836285.gif)","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"}]},{"title":"è§£å†³ Linux ç»ˆç«¯å›è½¦é”®å˜æˆå­—ç¬¦ M","slug":"è§£å†³Linuxç»ˆç«¯å›è½¦é”®å˜æˆå­—ç¬¦M","date":"2022-09-12T06:52:12.000Z","updated":"2022-10-15T03:14:29.817Z","comments":true,"path":"2022/09/12/è§£å†³Linuxç»ˆç«¯å›è½¦é”®å˜æˆå­—ç¬¦M/","link":"","permalink":"http://example.com/2022/09/12/%E8%A7%A3%E5%86%B3Linux%E7%BB%88%E7%AB%AF%E5%9B%9E%E8%BD%A6%E9%94%AE%E5%8F%98%E6%88%90%E5%AD%97%E7%AC%A6M/","excerpt":"","text":"ä¿ç•™ç°åœº è§£å†³æ–¹æ³•å‘½ä»¤è¡Œæ‰§è¡Œ 1stty sane","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Linux ä¸‹åˆ‡æ¢ Python ç‰ˆæœ¬","slug":"è§£å†³Linuxä¸‹åˆ‡æ¢Pythonç‰ˆæœ¬","date":"2022-09-12T06:05:17.000Z","updated":"2022-10-15T03:14:29.813Z","comments":true,"path":"2022/09/12/è§£å†³Linuxä¸‹åˆ‡æ¢Pythonç‰ˆæœ¬/","link":"","permalink":"http://example.com/2022/09/12/%E8%A7%A3%E5%86%B3Linux%E4%B8%8B%E5%88%87%E6%8D%A2Python%E7%89%88%E6%9C%AC/","excerpt":"","text":"éœ€æ±‚èƒŒæ™¯ç”¨è¿‡ Python çš„éƒ½çŸ¥é“ï¼ŒPython æ˜¯ä¸å‘åå…¼å®¹çš„ï¼Œä¹Ÿå°±æ˜¯ Python3.X å¼€å‘çš„ç¨‹åºï¼Œä½¿ç”¨ Python2.X ç¯å¢ƒå°±æ— æ³•æ­£å¸¸è¿è¡Œã€‚å› ä¸ºå¾ˆå¤šè¯­æ³•éƒ½æ”¹å˜äº†ã€‚ç°åœ¨æ¥è§¦åˆ°çš„å¤§éƒ¨åˆ† Python ç¨‹åºéƒ½æ˜¯ Python3.X å¼€å‘çš„ï¼Œä½†æ˜¯å¶å°”ä¹Ÿä¼šé‡åˆ°ä½¿ç”¨ Python2.X çš„æ—¶å€™ã€‚è¿™å°±éœ€è¦çµæ´»åˆ‡æ¢ç‰ˆæœ¬ã€‚ ä¸€èˆ¬ Linux çš„å„ä¸ªå‘è¡Œç‰ˆéƒ½é¢„è£…äº† Python2.Xã€‚æˆ‘ä½¿ç”¨çš„ Debian å°±é¢„è£…äº† Python2.7ã€‚ 12$ python -VPython 2.7.16 ä½†æ˜¯æˆ‘åŒæ—¶ä¹Ÿå®‰è£…äº† Python3.7 123456789$ ls /usr/bin | grep &quot;python*&quot;dh_python2pythonpython2python2.7python3python3.7python3.7mpython3m alias ä¿®æ”¹åˆ«å123$ alias python=/usr/bin/python3$ python -VPython 3.7.3 ä¸Šé¢çš„åˆ«åä¿®æ”¹åªå¯¹å½“å‰ç»ˆç«¯æœ‰æ•ˆã€‚å¦‚æœè¦ä½¿æ¯ä¸ªçª—å£éƒ½ä½¿ç”¨è¿™ä¸ªåˆ«åï¼Œå°†åˆ«ååŠ å…¥~/.bashrcï¼Œå¦‚ zsh æ˜¯åˆ™æ˜¯~/.zshrcã€‚ è½¯é“¾æ¥å’Œä¿®æ”¹åˆ«åç±»ä¼¼ 1ln -s python /usr/bin/python3 update-alternativesupdate-alternativesæ˜¯ Debian ç³»ç»Ÿæä¾›çš„ä¸€ä¸ªå·¥å…·ï¼ŒUbuntu æ˜¯åŸºäº Debian çš„ï¼Œæ‰€ä»¥ Ubuntu ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œå…¶ä»–å‘è¡Œç‰ˆæ²¡æœ‰è¯¥å·¥å…·ã€‚å®ƒå¯ä»¥ç”¨æ¥æ–¹ä¾¿å¿«æ·åœ°åˆ‡æ¢åº”ç”¨ç‰ˆæœ¬ï¼Œä¸ä»…ä»…ç”¨æ¥åˆ‡æ¢ Pythonï¼Œå…¶ä»–åº”ç”¨ç¨‹åºæœ‰å¤šä¸ªç‰ˆæœ¬çš„ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥å·¥å…·ã€‚ update-alternativesæœ¬è´¨ä¹Ÿæ˜¯å»ºç«‹è½¯é“¾æ¥ï¼Œåªä¸è¿‡æœ‰äº†ç»Ÿä¸€çš„ç®¡ç†ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨--installå‚æ•°ï¼Œæ·»åŠ ä¸€äº›å€™é€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œpythonè¿™ä¸ªå‘½ä»¤æ—¶ï¼Œå®ƒå¯ä»¥æœ‰å“ªäº›é€‰æ‹©ï¼Œåœ¨è¿™é‡Œå°±æ˜¯python3.7.3å’Œpython2.7.16ä¸¤ä¸ªé€‰æ‹©ã€‚ 123# --install &lt;é“¾æ¥&gt; &lt;åç§°&gt; &lt;è·¯å¾„&gt; &lt;ä¼˜å…ˆçº§&gt;sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 2sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.7 1 æ³¨æ„ï¼Œè¿™é‡Œçš„/usr/bin/pythoné“¾æ¥æ–‡ä»¶ï¼Œä¸¤ä¸ªå¯é€‰é¡¹å¿…é¡»æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·è¿™ä¸ªé“¾æ¥æ–‡ä»¶æ‰å¯ä»¥é€‰æ‹©ä¸¤ä¸ªä¸åŒçš„å¯é€‰é¡¹å»é“¾æ¥ã€‚ pythonæ˜¯åœ¨å‘½ä»¤è¡Œæ‰§è¡Œçš„å‘½ä»¤ã€‚/usr/bin/python2.7æ˜¯æ‰§è¡Œpythonå‘½ä»¤åè°ƒç”¨å…·ä½“å“ªä¸ªç‰ˆæœ¬ã€‚æœ€åçš„æ•°å­—2æ˜¯ä¼˜å…ˆçº§ï¼Œä¹Ÿå°±æ˜¯python2.7æ¯”python3.7ä¼˜å…ˆçº§é«˜ï¼Œå¦‚æœä¸æŒ‡å®šç‰ˆæœ¬ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯ä½¿ç”¨python2ã€‚ æˆ‘ä»¬å†æŸ¥çœ‹ä¸€ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œå‘ç°æ˜¯python2.7.16ã€‚è¯´æ˜æ˜¯é»˜è®¤ç‰ˆæœ¬ã€‚å¹¶ä¸”pythonå·²è¢«é“¾æ¥åˆ°æˆ‘ä»¬ç®¡ç†çš„è½¯é“¾æ¥ä¸Šã€‚ 12345$ python -VPython 2.7.16$ ll /usr/bin | grep &quot;python&quot;lrwxrwxrwx 1 root python -&gt; /etc/alternatives/python æŸ¥çœ‹pythonçš„å¯é€‰é…ç½®ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªå¯é€‰é…ç½®ï¼Œé»˜è®¤æ˜¯python2ï¼Œç¬¬ä¸€åˆ—æ˜¯åºå·ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ‡æ¢åˆ°python3ï¼Œå¯¹åº”çš„æ•°å­—2å³å¯ã€‚ 123456789101112root at RISCX in ~$ update-alternatives --config pythonThere are 2 choices for the alternative python (providing /usr/bin/python). Selection Path Priority Status------------------------------------------------------------* 0 /usr/bin/python2.7 2 auto mode 1 /usr/bin/python2.7 2 manual mode 2 /usr/bin/python3.7 1 manual modePress &lt;enter&gt; to keep the current choice[*], or type selection number:2update-alternatives: using /usr/bin/python3.7 to provide /usr/bin/python (python) in manual mode å†æ¬¡æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œå‘ç°å·²ç»åˆ‡æ¢æˆåŠŸã€‚ 12$ python -VPython 3.7.3 æ‰§è¡Œupdate-alternativesç»å¸¸ä¼šå¯¼è‡´æˆ‘çš„ç»ˆç«¯å›è½¦å¤±æ•ˆï¼Œå¯ä»¥å‚è€ƒè§£å†³ Linux ç»ˆç«¯å›è½¦é”®å˜æˆå­—ç¬¦ M --removeï¼Œåˆ é™¤å¯é€‰é¡¹ï¼š 1sudo update-alternatives --remove python /usr/bin/python2.7","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Python","slug":"Python","permalink":"http://example.com/tags/Python/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://example.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"è§£å†³ Python No module named 'ConfigParser'","slug":"è§£å†³Python-No-module-named-ConfigParser","date":"2022-09-11T15:20:05.000Z","updated":"2022-10-15T03:14:29.825Z","comments":true,"path":"2022/09/11/è§£å†³Python-No-module-named-ConfigParser/","link":"","permalink":"http://example.com/2022/09/11/%E8%A7%A3%E5%86%B3Python-No-module-named-ConfigParser/","excerpt":"","text":"ä¿ç•™ç°åœº123ImportError: No module named &#x27;ConfigParser&#x27;Command &quot;python setup.py egg_info&quot; failed with error code 1 in è§£å†³æ–¹æ³•åœ¨ Python 3.x ç‰ˆæœ¬åï¼ŒConfigParser.py å·²ç»æ›´åä¸º configparser.py æ‰€ä»¥å‡ºé”™ï¼ å¯ä»¥åˆ‡æ¢ Python2 æ‰§è¡Œã€‚ ä¹Ÿå¯ä»¥å°è¯•å°†æ–‡ä»¶é‡å‘½åä¸ºConfigParser.pyã€‚ ä»¥ä¸‹ä¸ºå‚è€ƒï¼Œæ¯ä¸ªäººå®‰è£…è·¯å¾„å¯èƒ½ä¸ä¸€æ ·ï¼Œå¯ä»¥å…¨å±€æœç´¢configparser.pyã€‚ 1cp /usr/lib/python3.7/configparser.py /usr/lib/python3.7/ConfigParser.py","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://example.com/tags/Python/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"è§£å†³ LaTeX ç¼–è¯‘ Missing character There is no (U+00A0) in font","slug":"è§£å†³LaTexç¼–è¯‘Missing-character-There-is-no-U-00A0-U-00A0-in-font","date":"2022-09-11T14:20:02.000Z","updated":"2022-10-15T03:14:29.811Z","comments":true,"path":"2022/09/11/è§£å†³LaTexç¼–è¯‘Missing-character-There-is-no-U-00A0-U-00A0-in-font/","link":"","permalink":"http://example.com/2022/09/11/%E8%A7%A3%E5%86%B3LaTex%E7%BC%96%E8%AF%91Missing-character-There-is-no-U-00A0-U-00A0-in-font/","excerpt":"","text":"ä¿ç•™ç°åœºåœ¨ LaTeX ç¼–è¯‘ä¸­æŠ¥é”™ï¼šMissing character: There is no (U+00A0) (U+00A0) in font JetBrains Monoã€‚ æ¢ç©¶åŸå› å¦‚æœè¦ææ¸…æ¥šå…·ä½“åŸå› ï¼Œå°±å¾—ä»å­—ç¬¦ä¸å­—ç¬¦ç¼–ç è¯´èµ·äº†ã€‚è§£å†³åŠæ³•ç›´æ¥è·³åˆ°ä¸‹ä¸€èŠ‚å§ã€‚ å­—ç¬¦ï¼Œå°±æ˜¯â€œaâ€ï¼Œâ€œAâ€ï¼Œâ€œä½ â€ç­‰ä¹¦å†™ç¬¦å·ã€‚ å­—ç¬¦é›†ï¼Œé€šå¸¸å°±æ˜¯æŸç§è¯­è¨€å­—ç¬¦é›†åˆï¼Œæ¯”å¦‚è‹±è¯­å°±æ˜¯ASCII å­—ç¬¦é›†ï¼Œä¸­æ–‡æœ‰GBK å­—ç¬¦é›†ç­‰ æ³¨æ„ï¼Œä¸æ˜¯æ¯ç§è¯­è¨€åªå¯¹åº”ä¸€ç§å­—ç¬¦é›†ï¼ˆæ¯”å¦‚ GB2312ï¼ŒGBKï¼ŒGB18030 éƒ½åŒ…å«äº†å¸¸ç”¨æ±‰å­—ï¼Œåè€…æ˜¯å‰è€…çš„è¶…é›†ï¼‰ï¼Œè€Œä¸”å­—ç¬¦é›†ä¹Ÿä¸æ˜¯åªå¯¹åº”ä¸€ç§è¯­è¨€ï¼Œä¾‹å¦‚ Unicode å­—ç¬¦é›†å°±åŒ…å«æ‰€æœ‰è¯­è¨€å­—ç¬¦ï¼Œå­—ç¬¦é›†åªæ˜¯è®¾è®¡è€…ä¸ºäº†ç»™å­—ç¬¦ç¼–ç ï¼ˆCode Point/Numberingï¼‰è®¾è®¡ç¼–ç æ—¶ï¼Œä¸ºäº†æ”¶å½•åˆ°å‘½åçš„å­—ç¬¦é›†åˆï¼Œä½†æ˜¯é€šå¸¸è®¾è®¡è€…éƒ½ä¸ºå­—ç¬¦é›†è®¾è®¡äº†å¯¹åº”çš„ç¼–ç è§„èŒƒã€‚ å­—ç¬¦ç¼–ç ,ç»™å­—ç¬¦é›†é‡Œçš„å­—ç¬¦ç¼–å·ã€‚ ç¼–ç é¡µï¼Œåœ¨ unicode å‘æ˜ä¹‹å‰ï¼Œå„ä¸ªåœ°åŒºéƒ½ç”¨ 2 å­—èŠ‚ç¼–ç è‡ªå·±çš„å­—ç¬¦é›†ï¼Œç›¸åŒçš„ç¼–ç å¯¹åº”ä¸åŒçš„å­—ç¬¦ï¼Œä¸ºäº†æœ¬åœ°åŒ–ï¼ŒWindows å‘æ˜äº†ç¼–ç é¡µï¼Œæ¥å¯¹åº”ä¸åŒçš„å­—ç¬¦é›†ã€‚ å­—ç¬¦ç¼–ç ï¼Œå¯¹ç»™å®šçš„å­—ç¬¦ç¼–ç ç¼–ç æˆå­—èŠ‚è¡¨ç¤ºã€‚ æ—©æœŸï¼Œå­—ç¬¦è¢«ç¼–å·åï¼Œå­˜å‚¨æ—¶å°±æŒ‰ç…§ç¼–å·çš„æ–¹å¼å­˜å‚¨ï¼Œæ²¡æœ‰ encoding çš„è¿‡ç¨‹ï¼Œåæ¥å‘æ˜ Unicode åï¼Œå‘ç°å¦‚æœæŒ‰ç…§ Unicode çš„ç¼–å·ç›´æ¥å­˜å‚¨çš„è¯ï¼Œå¯¹äºè‹±æ–‡å­—ç¬¦å°±æœ‰å¾ˆå¤§å­˜å‚¨æµªè´¹ï¼Œå› ä¸ºä»»æ„å­—ç¬¦éƒ½éœ€è¦ 2 å­—èŠ‚å­˜å‚¨ï¼Œåæ¥äººä»¬å‘æ˜ UTF-8 è¿™ç§ç¼–ç æ–¹å¼ï¼Œè¿™æ · UTF-8 å°±å¯ä»¥ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºè‹±æ–‡å­—ç¬¦ï¼Œ2 ä¸ªä»¥ä¸Šå­—èŠ‚è¡¨ç¤ºæ±‰å­—å­—ç¬¦ã€‚ å­—ä½“ï¼Œå®šä¹‰äº†å­—ç¬¦çš„å›¾å½¢è¡¨ç¤ºï¼Œç°åœ¨çš„è½¯ä»¶å±•ç¤ºå­—ç¬¦æ—¶ç”¨ Unicode è¡¨ç¤ºï¼Œå­—ä½“æ˜¯ Unicode ç¼–ç å’Œå­—ç¬¦å›¾å½¢çš„æ˜ å°„ï¼Œè€Œä»¥å¾€æ¯”å¦‚ WindowsCMD æ§åˆ¶å°ï¼Œæ²¡æœ‰å¯¹åº” Unicodeï¼Œåˆ™ç”¨ç¼–ç é¡µæ¥åŒºåˆ†ï¼Œæ‰€ä»¥å­—ä½“å°±æ˜¯å­—ç¬¦ç¼–ç é‡‘å’Œä»£ç é¡µåˆ°å­—ç¬¦å›¾å½¢çš„æ˜ å°„ã€‚ æ–‡æœ¬æ–‡ä»¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œéƒ½æ˜¯ä¸€ç³»åˆ—çš„å­—èŠ‚æµï¼Œå¦‚æœä¸å‘Šè¯‰æ–‡æœ¬ç¼–è¾‘å™¨è¯¥æ–‡ä»¶çš„ç¼–ç æ–¹å¼ï¼Œç¼–è¾‘å™¨ä¼šå°è¯•ç”¨é»˜è®¤çš„ç¼–ç ï¼ˆä¾èµ–äºæ“ä½œç³»ç»Ÿè®¾ç½®ï¼‰åˆæˆ–è€…è‡ªå·±æ¢æµ‹ï¼ˆdetectï¼Œæ¯”å¦‚æ–‡ä»¶å¼€å¤´æœ‰ FFEF æˆ–è€… EFFF å­—èŠ‚å°±è¡¨æ˜ UTF-16 ç¼–ç ï¼Œæœ‰å¾ˆå¤š 10ï¼Œ110 å¼€å¤´çš„å­—èŠ‚ï¼Œå¾ˆå¯èƒ½æ˜¯ UTF-8 ç¼–ç ï¼‰å¹¶å°è¯•è§£ç ï¼Œå¦‚æœæ²¡æœ‰çŒœå¯¹ï¼Œé‚£å°±ä¼šæ˜¾ç¤ºä¹±ç ã€‚ å›åˆ°å‡ºé”™çš„é—®é¢˜ï¼Œæç¤ºæˆ‘ä»¬åœ¨å­—ä½“ JetBrains Monoä¸­æ²¡æœ‰U+00A0ï¼Œæˆ‘ä»¬æœç´¢ä¸€ä¸‹å°±çŸ¥é“è¿™æ˜¯ä¸€ä¸ª Unicode å­—ç¬¦NO-BREAK SPACEã€‚æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„äº†è§£ä¹ŸçŸ¥é“äº†ï¼Œå­—ä½“å°±æ˜¯å­—ç¬¦ç¼–ç åˆ°å­—ç¬¦å›¾åƒçš„æ˜ å°„ï¼Œä½†æ˜¯ä¸€ä¸ªå­—ä½“å°¤å…¶æ˜¯ä¸€äº›æœ‰ä¸“é—¨ç”¨é€”çš„å­—ä½“ï¼ˆæ¯”å¦‚ JetBrains Mono è®¾è®¡åˆè¡·æ˜¯ä¸ºè½¯ä»¶å·¥ç¨‹æ˜¾ç¤ºä»£ç ç”¨çš„ï¼‰ï¼Œå®ƒä¸ä¼šæ˜ å°„æ‰€æœ‰çš„å­—ç¬¦ï¼ŒJetBrains Mono è¿™ä¸ªå­—ä½“é‡Œå°±æ²¡æœ‰æ˜ å°„ U+00A0ã€‚è¿™å°±å¯¼è‡´åœ¨ LaTeX ç¼–è¯‘æ—¶æ— æ³•åœ¨å­—ä½“ä¸­æ‰¾åˆ°å¯¹åº”çš„å­—ç¬¦å›¾åƒæ˜¾ç¤ºã€‚ æ‰€æœ‰è§£å†³åŠæ³•å°±æ˜¯è¦ä¸æ›¿æ¢æ‰è¿™ä¸ªå­—ç¬¦ï¼Œè¦ä¸æ¢ä¸ªå­—ä½“ã€‚ è§£å†³æ–¹æ³•VSCode æ­£åˆ™æœç´¢\\U00A0å³å¯æœç´¢åˆ°ç›¸å…³å­—ç¬¦ï¼Œå°†å…¶æ›¿æ¢æˆç©ºæ ¼ã€‚ å‚è€ƒå­—ç¬¦ï¼Œå­—ç¬¦é›†ï¼Œå­—ç¬¦ç¼–ç ï¼Œç¼–ç é¡µï¼Œå­—ä½“ - ç®€ä¹¦","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"},{"name":"å­—ä½“","slug":"å­—ä½“","permalink":"http://example.com/tags/%E5%AD%97%E4%BD%93/"},{"name":"LaTex","slug":"LaTex","permalink":"http://example.com/tags/LaTex/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-nohup åå°è¿è¡Œ","slug":"æ¯å¤©å­¦å‘½ä»¤-nohupåå°è¿è¡Œ","date":"2022-09-10T09:14:58.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2022/09/10/æ¯å¤©å­¦å‘½ä»¤-nohupåå°è¿è¡Œ/","link":"","permalink":"http://example.com/2022/09/10/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-nohup%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C/","excerpt":"","text":"ä½¿ç”¨ MobaXertm è¿æ¥æœåŠ¡å™¨åï¼Œæƒ³è¦åœ¨è¿è¡Œä¸€ä¸ªä¸‹è½½ä»»åŠ¡ï¼Œä½¿ç”¨&amp;æŒ‚åœ¨åå°åï¼Œé€€å‡º MobaXtermï¼Œåå°çš„ä»»åŠ¡ä¹Ÿéšä¹‹ä¸­æ–­ï¼Œäºæ˜¯æœåˆ°è¿™ä¸ªnohupå‘½ä»¤ï¼Œå¯ä»¥å®Œæˆæˆ‘çš„éœ€æ±‚ã€‚ nohupæ„æ€æ˜¯ No Hang Upï¼Œä¸è¦æŒ‚èµ·çš„æ„æ€ï¼Œå³ä½¿é€€å‡ºç»ˆç«¯ä¹Ÿä¸ä¼šä¸­æ–­ä»»åŠ¡ã€‚ ä¸ºäº†æ–¹ä¾¿ä»¥åæŸ¥é˜…ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹å…³äºåå°è¿è¡Œç›¸å…³çš„å‘½ä»¤ã€‚é¦–å…ˆæ˜¯æœ€å¸¸ç”¨çš„&amp;ç¬¦å·ã€‚ &amp; åå°è¿è¡Œæ¯”å¦‚æ‰§è¡Œç¼–è¯‘ä»»åŠ¡æ—¶é€šå¸¸ä¼šå ç”¨ç»ˆç«¯å‰å°ï¼Œè¿™æ—¶å€™æ— æ³•å†æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œé™¤éå†å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå¯¹äºæœ‰ GUI ç•Œé¢æ—¶ï¼Œå†å¼€ä¸€ä¸ªç»ˆç«¯å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœæ˜¯æœåŠ¡å™¨å°±åªèƒ½å†æƒ³åŠæ³•äº†ã€‚ &amp;å¯ä»¥å°†å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹æ”¾åœ¨åå°è¿è¡Œï¼Œå¦‚ï¼š 12$ make &gt; make.log 2&gt;&amp;1 &amp; [1] 16586 2&gt;&amp;1 æ˜¯å°†æ ‡å‡†å‡ºé”™é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼Œè¿™é‡Œçš„æ ‡å‡†è¾“å‡ºå·²ç»é‡å®šå‘åˆ°äº†make.logæ–‡ä»¶ï¼Œå³å°†æ ‡å‡†å‡ºé”™ä¹Ÿè¾“å‡ºåˆ°make.logæ–‡ä»¶ä¸­ã€‚æœ€åä¸€ä¸ª&amp;ï¼Œæ˜¯è®©è¯¥å‘½ä»¤åœ¨åå°æ‰§è¡Œã€‚è¯•æƒ³2&gt;1ä»£è¡¨ä»€ä¹ˆï¼Œ2ä¸&gt;ç»“åˆä»£è¡¨é”™è¯¯é‡å®šå‘ï¼Œè€Œ1åˆ™ä»£è¡¨é”™è¯¯é‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶1ï¼Œè€Œä¸ä»£è¡¨æ ‡å‡†è¾“å‡ºï¼›æ¢æˆ2&gt;&amp;1ï¼Œ&amp;ä¸1ç»“åˆå°±ä»£è¡¨æ ‡å‡†è¾“å‡ºäº†ï¼Œå°±å˜æˆé”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºã€‚ åœ¨åå°è¿è¡Œmakeè¿›è¡Œç¼–è¯‘ï¼Œå¹¶å°†è¾“å‡ºç»“æœï¼ˆé”™è¯¯å’Œæ­£å¸¸è¾“å‡ºï¼‰éƒ½ä¿å­˜åˆ°make.logæ–‡ä»¶ä¸­ï¼Œæäº¤ä»»åŠ¡æˆåŠŸåï¼Œä¼šæ˜¾ç¤ºè¿›ç¨‹ IDï¼Œç¼–è¯‘çš„è¿›ç¨‹ ID ä¸º 16586ã€‚ æœ‰äº†è¿›ç¨‹ ID æˆ‘ä»¬å¯ä»¥ç›‘æ§ï¼Œä¹Ÿå¯ä»¥ä¸­æ–­è¿›ç¨‹ï¼š 1234# æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ps -ef | grep 16586# ä¸­æ–­è¿›ç¨‹kill -9 16586 ä½†æ˜¯ä½¿ç”¨ &amp;æ—¶å…³é—­ç»ˆç«¯åï¼Œè¿›ç¨‹ä¹Ÿä¼šéšä¹‹å…³é—­ã€‚å¦‚æœæƒ³è¦åœ¨åå°æŒç»­è¿è¡Œç¨‹åºï¼Œå°±éœ€è¦nohupå‘½ä»¤ã€‚ nohup ä½¿ç”¨12$ nohup make &gt; make.log 2&gt;&amp;1 &amp; [1] 112233 å‘½ä»¤åŠŸèƒ½åŒä¸Šï¼Œä½†æ˜¯ç»ˆç«¯å…³é—­ï¼Œåå°ç¨‹åºä¹Ÿä¼šç»§ç»­æ‰§è¡Œã€‚ NOTEï¼šç»ˆç«¯å…³é—­ï¼Œæ˜¯æŒ‡å¸¦ GUI çš„ç•Œé¢é‡Œç»ˆç«¯ï¼Œå¦‚æœä½¿ç”¨ SSH ç­‰ç™»é™†ï¼Œæ¯”å¦‚ä½¿ç”¨ MobaXtermï¼Œä¸€ä¸ª session ç›¸å½“äºä¸€ä¸ªç™»é™†è´¦æˆ·ï¼Œå¦‚æœå¼‚å¸¸é€€å‡ºäº†è¿™ä¸ªè´¦æˆ·ï¼Œé‚£ä¹ˆåå°æ‰§è¡Œçš„ç¨‹åºä¹Ÿä¼šä¸­æ–­ã€‚å¦‚æœéœ€è¦ç»§ç»­æ‰§è¡Œï¼Œéœ€è¦æ­£å¸¸é€€å‡ºè´¦æˆ·ï¼Œæ‰§è¡Œexitå‘½ä»¤ã€‚ æ±‡æ€»12345678910fg # å°†åå°ä¸­çš„å‘½ä»¤è°ƒè‡³å‰å°ç»§ç»­è¿è¡Œbg # å°†ä¸€ä¸ªåœ¨åå°æš‚åœçš„å‘½ä»¤ï¼Œå˜æˆç»§ç»­æ‰§è¡Œ (åœ¨åå°æ‰§è¡Œ)jobs # æŸ¥çœ‹å½“å‰æœ‰å¤šå°‘åœ¨åå°è¿è¡Œçš„å‘½ä»¤kill %num # ç»ˆæ­¢è¿›ç¨‹num&amp; # åŠ åœ¨å‘½ä»¤åå¯ä»¥å°†å…¶ç½®äºåå°è¿è¡Œctrl + z # ç½®äºåå°ï¼Œå¹¶ä¸”æš‚åœä¸å¯æ‰§è¡Œctrl + c # ç»ˆæ­¢å‰å°è¿›ç¨‹ctrl + \\ # é€€å‡ºctrl + d # ç»“æŸå½“å‰è¾“å…¥(å³ç”¨æˆ·ä¸å†ç»™å½“å‰ç¨‹åºå‘å‡ºæŒ‡ä»¤)ï¼Œé‚£ä¹ˆLinuxé€šå¸¸å°†ç»“æŸå½“å‰ç¨‹åº","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"ä»é›¶å¼€å§‹æ­å»ºä¸€å° NAS å­˜å‚¨æœåŠ¡å™¨","slug":"ä»é›¶å¼€å§‹æ­å»ºä¸€å°NASå­˜å‚¨æœåŠ¡å™¨","date":"2022-09-10T03:37:47.000Z","updated":"2023-08-29T14:25:08.653Z","comments":true,"path":"2022/09/10/ä»é›¶å¼€å§‹æ­å»ºä¸€å°NASå­˜å‚¨æœåŠ¡å™¨/","link":"","permalink":"http://example.com/2022/09/10/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E5%8F%B0NAS%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"","text":"æŠ€æœ¯æ²¡å­¦å¤šå°‘ï¼Œæ•™ç¨‹ä¸‹æ»¡äº†ç¡¬ç›˜ï¼Œä¸€ç›´æƒ³ä¸“é—¨éƒ¨ç½² NAS æ¥å­˜æ–‡ä»¶ï¼Œä½†æ˜¯ä¸€æ¥è¦èŠ±é’±ï¼ŒäºŒæ¥æ­å»º NAS æ²¡æœ‰ç»éªŒæ€•éƒ¨ç½²ä¸å¥½ï¼Œæ²¡æœ‰ç°åœ¨ç¡¬ç›˜ç›´è¿èˆ’é€‚ï¼Œæ‰€ä»¥å°†å°±ç”¨å§ã€‚ è‡ªä»æœ‰å¤©å¿˜äº†å¿˜äº†ä¼‘çœ ç”µè„‘ï¼Œä¸€ä¸ªè‡ªåŠ¨å¤‡ä»½ä»»åŠ¡å¼€å¯ï¼Œåœ¨ 40 åº¦çš„é«˜æ¸©å¤©ï¼Œæ»¡é€Ÿè·‘äº†ä¸€å¤©ï¼Œä¸‹ç­å›æ¥ç¡¬ç›˜ç›´æ¥æŠ¥åºŸã€‚è¿™å°±åŠ é€Ÿæˆ‘æŠ˜è…¾éƒ¨ç½² NAS çš„è¿›ç¨‹ã€‚ å‡†å¤‡é˜¶æ®µå¨è”é€šçš„å‡ æ¬¾ä¸­æ„çš„ NAS æ”¾è´­ç‰©è½¦å¾ˆä¹…äº†ï¼Œå¦‚æœç¡¬ç›˜æ²¡æœ‰è¿™ä¹ˆæ—©åæ‰ï¼Œå¯èƒ½åœ¨åŒåä¸€å°±ä¹°æ•´æœºäº†ï¼Œç°åœ¨ç¦»åŒåä¸€è¿˜æ—©ï¼Œç¡¬ä»¶ä»·æ ¼éƒ½ä¸ä¾¿å®œï¼Œæƒ³æ¥æƒ³å»è¿˜æ˜¯ä¹°äºŒæ‰‹ç¡¬ä»¶æ”’ä¸€å°æ›´åˆ’ç®—ã€‚å¦‚æœä¹°æ•´æœºï¼Œç¡¬ç›˜åŠ  NAS ä¸»æœºå°±å¾—äº”åƒå¤§æ´‹ï¼Œåªæ˜¯ç”¨æ¥å­˜æ–‡ä»¶ï¼Œéƒ¨ç½²ä¸ª Jellyfin çœ‹ç”µå½±ç”¨ï¼Œå±å®å¥¢ä¾ˆäº†ã€‚ ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ï¿¥ ä¹°äºŒæ‰‹å°±å¾—ä»é›¶å¼€å§‹å­¦ã€‚ç”Ÿå‘½ä¸ä¼‘ï¼ŒæŠ˜è…¾ä¸æ­¢ã€‚ç»è¿‡ä¸€æ¬¡å®Œæ•´çš„ NAS æ”’æœºè¿‡ç¨‹å‘ç°ï¼Œå…¶å® NAS å°±æ˜¯å®‰è£…äº†ä¸“ç”¨ç³»ç»Ÿçš„ä¸€å°ç”µè„‘è€Œå·²ã€‚è¿™ä¸ªä¸“ç”¨ç³»ç»Ÿå°±æ˜¯é¢å‘ç½‘ç»œå­˜å‚¨å¼€å‘çš„ï¼Œå¦‚ç¾¤æ™–ï¼Œå¨è”é€šï¼Œå¼€æºçš„ OMVï¼ŒFreeNAS ç­‰ç­‰ã€‚ æ—¢ç„¶æ˜¯ä¸€å°ç”µè„‘ï¼Œå…¶å®æ”’ NAS å°±å’Œæ”’ç”µè„‘ä¸€æ ·ï¼Œé€‰é…å¥½ä»¥ä¸‹å‡ å¤§ä»¶å³å¯ã€‚ CPU ä¸»æ¿ æ•£çƒ­å™¨ æœºç®± å†…å­˜ ç”µæº æœºç®±é£æ‰‡ ä¸‹é¢åˆ†åˆ«ä»‹ç»åœ¨æ”’æœºè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›æ¦‚å¿µï¼Œå‚æ•°åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚ CPUCPU å‹å·å­—æ¯æ•°å­—éƒ½æ˜¯ä»€ä¹ˆæ„æ€ Intel æ˜¯è‹±ç‰¹å°”çš„è‹±æ–‡åç§°ï¼Œä¹Ÿæ˜¯ç›®å‰çƒ­é—¨çš„ CPU å“ç‰Œï¼› â€œé…·ç¿â€ä»£è¡¨è‹±ç‰¹å°”å“ç‰Œä¸‹é¢å‘æ™®é€šæ¶ˆè´¹è€…çš„ä¸€ä¸ª CPU ç³»åˆ—ï¼Œä¸€èˆ¬åˆ’åˆ†ä¸º Coreï¼ˆé…·ç¿ï¼‰ã€Pentiumï¼ˆå¥”è…¾ï¼‰ã€Celeronï¼ˆèµ›æ‰¬ï¼‰ã€Xeonï¼ˆè‡³å¼ºï¼‰ã€Atomï¼ˆå‡ŒåŠ¨ï¼‰ç­‰ï¼› i5 ä»£è¡¨è¿™æ¬¾ CPU å®šä½ä¸­ç«¯ï¼Œåœ¨å…¶ä¸‹é¢è¿˜æœ‰ i3ï¼Œåœ¨å…¶ä¸Šé¢è¿˜æœ‰ i7 å’Œ i9ï¼ŒåŒä¸€ä»£ä¸­ï¼Œæ•°å­—è¶Šå¤§ï¼Œæ€§èƒ½è¶Šå¼ºï¼›ä½†æ˜¯ä¸åŒä»£ - æ•°ä¹‹é—´ï¼Œæ€§èƒ½ä¸èƒ½ç›´æ¥ç›¸æ¯”ï¼Œæ¯”å¦‚ 12 ä»£çš„ i5 åœ¨ç†è®ºæ€§èƒ½ä¸Šæ˜¯å¼ºäº 10 ä»£ i7 çš„ã€‚ 12 ä»£è¡¨è¿™æ¬¾ CPU çš„ä»£æ•°ï¼Œè¯´æ˜å…¶å·²ç»å‘å±•åˆ°ç¬¬åäºŒä»£äº†ï¼Œæ•°å­—è¶Šå¤§è¶Šæ–°ï¼› 600 è¿™ä¸‰ä½æ•°å­—ä»£è¡¨ Intel SKU å‹å·åˆ’åˆ†ï¼Œä¸€èˆ¬æ¥è¯´ Core i7 æœ‰å›ºå®šå‡ ä¸ª SKUï¼Œæ¯”æ–¹è¯´ 700ï¼›Core i5æœ‰600/500/400ï¼›Core i3æœ‰300/100ç­‰ç­‰ï¼Œä¸€èˆ¬æ¥è¯´æ•°å­—è¶Šå¤§è¯´æ˜éš¶å±çš„Coreç³»åˆ—è¶Šé«˜çº§ï¼ŒåŒçº§åˆ«ä¸‹æ¯”è¾ƒï¼Œæ•°å­—è¶Šå¤§é¢‘ç‡è¶Šé«˜ï¼Œæ¢å¥è¯è¯´æ€§èƒ½å°±è¶Šå¼ºï¼Œæ¯”æ–¹è¯´Core i5-8600 é»˜è®¤ 3.1GHzï¼Œç¿é¢‘ 4.3GHzï¼Œæ¯” Core i5-8500 é»˜è®¤ 3.0GHzï¼Œç¿é¢‘ 4.1GHz è¦å¼ºã€‚ K å¸¦ K çš„è¡¨ç¤ºä¸é”é¢‘ï¼Œå¯ä»¥é…åˆ Z ç³»åˆ—ä¸»æ¿è¿›è¡Œè¶…é¢‘æ“ä½œï¼Œé€‚åˆä¼šè¶…é¢‘ç©å®¶ä½¿ç”¨ï¼Œæ¯”æ–¹è¯´ i7-12700Kï¼Œi5-12600K ç­‰ F å¸¦ F çš„è¡¨ç¤ºä¸å¸¦é›†æˆæ˜¾å¡ï¼Œä½ å¿…é¡»é…åˆç‹¬ç«‹æ˜¾å¡ä½¿ç”¨ï¼› å½“ç„¶ï¼Œé™¤äº†ä¾‹å­ä¸­çš„è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¿˜ä¼šé‡åˆ°å…¶å®ƒ CPU å‹å·çš„åç¼€ï¼š Kï¼šè¡¨ç¤ºæ”¯æŒè¶…é¢‘ä¸”å†…ç½®æ ¸æ˜¾çš„ CPU å‹å·ï¼Œä¾‹å¦‚å‹å·ï¼ši5-12600Kã€i7-12700Kï¼› Fï¼šè¡¨ç¤ºæ— å†…ç½®æ ¸æ˜¾ï¼Œä¾‹å¦‚å‹å·ï¼ši5-12400Fã€i7-12700Fï¼› KFï¼šè¡¨ç¤ºæ”¯æŒè¶…é¢‘ä¸”æ— å†…ç½®æ ¸æ˜¾çš„ CPU å‹å·ï¼Œä¾‹å¦‚å‹å·ï¼ši5-12600KFï¼Œi7-12700KFã€‚ Tï¼šè¡¨ç¤ºä½åŠŸè€—ç‰ˆï¼Œç›¸åŒå‹å·ä¸‹åŠŸè€—æ›´ä½ï¼Œæ€§èƒ½ä¹Ÿå·®ä¸€äº›ï¼Œä¾‹å¦‚å‹å·ï¼ši7-10700Tï¼› X/XEï¼šè¡¨ç¤ºè‡³å°Šæ——èˆ°çº§ï¼Œä¾‹å¦‚å‹å·ï¼ši9-10980XEã€‚ KSï¼šå¯ä»¥ç†è§£ä¸ºå®˜æ–¹è¶…é¢‘ç‰ˆï¼Œæå‡äº†ä¸»é¢‘çš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚ i9-9900K å’Œ i9-9900KSï¼Œi9-9900KS å‡ºå‚çš„ä¸»é¢‘è¦é«˜äº Kï¼Œä¾‹å¦‚å‹å·ï¼ši9-9900KSã€‚ Uï¼šä½ç”µå‹ï¼Œæ€§èƒ½å¼±äº›ä½†åŠŸè€—ä½ï¼Œé€šå¸¸å‡ºç°åœ¨è½»è–„æœ¬ä¸­ï¼Œä¸¾ä¾‹å‹å·ï¼ši7 10510Uï¼› Hï¼šæ ‡å‹ï¼Œæ€§èƒ½å¼ºï¼Œé€šå¸¸å‡ºç°åœ¨æ¸¸æˆæœ¬ä¸­ï¼Œä¸¾ä¾‹å‹å·ï¼ši5-11300H Yï¼šè¶…ä½ç”µå‹ï¼Œæ€§èƒ½å¾ˆå¼±åŠŸè€—éå¸¸ä½ï¼Œé€šå¸¸å‡ºç°åœ¨è½»è–„æœ¬ä¸­ï¼Œä¸¾ä¾‹å‹å·ï¼ši3-10110Yï¼› HKï¼šä¸€èˆ¬ä½¿ç”¨åœ¨ Intel é«˜ç«¯å‘çƒ§çº§ CPU ä¸Šï¼Œå¯è¶…é¢‘ï¼Œä¸¾ä¾‹å‹å·ï¼ši9-11980HKï¼› Gï¼šG1ã€G4 ä»¥åŠ G7 ç­‰ï¼ŒG åé¢çš„æ•°å­—è¡¨ç¤ºæ ¸æ˜¾æ€§èƒ½å¼ºå¼±ï¼Œæ•°å­—è¶Šå¤§ä»£è¡¨æ ¸æ˜¾æ€§èƒ½è¶Šå¼ºï¼Œé€šå¸¸æ•°å­—å°äº 4 çš„æ˜¯é›†æˆçš„æ™®é€šè¶…é«˜æ¸… (UHD) æ ¸æ˜¾ï¼Œå¤§äºç­‰äº 4 çš„æ˜¯é›†æˆçš„é«˜æ€§èƒ½é”ç‚¬ (Iris) æ ¸æ˜¾ã€‚Intel ç§»åŠ¨ç‰ˆ CPU åç¼€ï¼Œä¸¾ä¾‹å‹å·ï¼ši5-1155G7ã€i3-1115G4ã€i3-1005G1ï¼› HQï¼šæ ‡å‡†ç”µå‹ï¼ŒQ æ¿è½½å››æ ¸ï¼Œæ—©æœŸçš„è€åç¼€ï¼Œä¸¾ä¾‹å‹å·ï¼ši7-7700HQï¼› MQï¼šæ ‡å‡†ç”µå‹ï¼ŒQ æ’æ‹”å››æ ¸ï¼Œæ—©æœŸçš„è€åç¼€ï¼Œä¸¾ä¾‹å‹å·ï¼ši7-4810MQï¼› Mï¼šæ—©æœŸåç¼€ M å°±æ˜¯ç§»åŠ¨ç«¯ CPUï¼Œåªæ˜¯ä¸ºäº†ä¸å°å¼æœºåŒºåˆ«å¼€ï¼Œä¸¾ä¾‹å‹å·ï¼ši7-2620Mã€‚ ä¸»æ¿ATXï¼ŒMicro-ATXï¼ŒMini-ITX åŒºåˆ«åœ¨äº†è§£ä¹°å•¥ä¸»æ¿æ—¶ï¼Œä¸å…ä¼šçœ‹åˆ°å„ç§ TXï¼Œæ¯”å¦‚æˆ‘ä¹°çš„è¿™å—ä¸ƒå½©è™¹ B460iTX ä¸»æ¿ï¼Œç®€ç§°å°±æ˜¯ä¸ƒå½©è™¹ B460iï¼Œè¿˜æœ‰ä¸å¸¦æœ€åå­—æ¯içš„ã€‚ä»–ä»¬æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿå…¶å®è¿™å°±æ˜¯è¡¨ç¤ºäº†ä¸»æ¿çš„å°ºå¯¸ã€‚ä¸»æ¿å°ºå¯¸å¸¸è§çš„æœ‰ä¸‰ç§å°ºå¯¸ï¼š æ ‡å‡†-ATXï¼š30.5 å˜ç±³ x 24.4 å˜ç±³ Micro-ATXï¼š24.4 cm x 24.4 cm Mini-ITXï¼š17 å˜ç±³ x 17 å˜ç±³ ä¸€èˆ¬æ”’æœºä¼šç”¨æ ‡å‡† ATXï¼Œæˆ–è€… MATX ä¹Ÿå¾ˆå¸¸ç”¨ï¼Œè€Œ ITX å°±å¸¸è¢«ç”¨æ¥æ­å»ºä½åŠŸè€—çš„æœåŠ¡å™¨ï¼Œå¦‚æˆ‘ä»¬è¦æ­å»ºçš„ NASã€‚å› ä¸ºå®ƒæ˜¯ 7*24 å°æ—¶ä¸é—´æ–­å·¥ä½œçš„ï¼ŒåŠŸè€—æ˜¯éœ€è¦å¤šè€ƒè™‘çš„ã€‚ æ•£çƒ­å™¨é£å†·ä¸æ°´å†· é£å†·å°±æ˜¯æ•£çƒ­é³ç‰‡åŠ é£æ‰‡ã€‚æ•£çƒ­é³ç‰‡ä¼šç©¿å…¥é“œç®¡ï¼Œé“œç®¡ä¸ä¸‹æ–¹åº•åº§ç›¸è¿ï¼Œåº•åº§ä¸ CPU ç›´æ¥æ¥è§¦ã€‚CPU çƒ­é‡é“œç®¡åº•åº§ä¼ å¯¼ç»™é“œç®¡ï¼Œé“œç®¡ä¼ å¯¼ç»™æ•£çƒ­é³ç‰‡ï¼Œæ•£çƒ­é³ç‰‡é“œç®¡é£æ‰‡æ•£çƒ­ã€‚ æ°´å†·å°±æ˜¯æ°´å†·å¤´åŠ é£æ‰‡ã€‚ç®€å•ç†è§£å°±æ˜¯é£å†·çš„é“œç®¡æ¢æˆäº†æ¶²ä½“ã€‚æ¶²ä½“æµåŠ¨ä¼ å¯¼æ¯”é“œç®¡æ›´å¿«ã€‚ å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé£å†·æ›´å®‰å…¨ï¼Œæ¯”è¾ƒç®€å•ï¼Œæ€§èƒ½ä¸Šé™æ¯”è¾ƒä½ï¼Œè€Œæ°´å†·åœ¨å¤–è§‚ã€æ€§èƒ½æ–¹é¢æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œç¼ºç‚¹å°±æ˜¯ç›¸å¯¹æ¯”è¾ƒè´µï¼Œè¿˜æœ‰æ¼æ¶²é£é™©ï¼Œä¸è¿‡ç°åœ¨çš„æ°´å†·æ¼æ¶²æ¦‚ç‡å¾ˆå°ã€‚ç»†åˆ†çš„è¯é£å†·è¿˜æœ‰ä¸‹å‹å¼ï¼Œä¸‹å‹å¼æ¯”è¾ƒé€‚åˆ itx å°æœºç®±ï¼Œè€Œå¡”å¼å°±é€‚åˆæ™®é€šæœºç®±ï¼Œæ°´å†·ä¹Ÿåˆ†ä¸€ä½“å¼æ°´å†·å’Œåˆ†ä½“å¼æ°´å†·ï¼Œå¸¸è§çš„éƒ½æ˜¯ä¸€ä½“å¼æ°´å†·ã€‚ æœºç®±å¡”å¼ï¼Œæœºæ¶ä¸åˆ€ç‰‡åŒºåˆ«å¡”å¼æœåŠ¡å™¨å¤–å½¢å’Œæ™®é€šå®¶ç”¨æœåŠ¡å™¨ç›¸å·®ä¸å¤šï¼Œå¡”å¼ä¸»æœºåœ¨ä¸»æ¿æ‰©å±•ä¸Šæœ‰ä¼˜åŠ¿ï¼Œä¸€èˆ¬é¢„ç•™æ¥å£è¾ƒå¤šï¼Œæ–¹ä¾¿æ‰©å±•ã€‚é€‚ç”¨äºå…¥é—¨å’Œå·¥ä½œç«™ã€‚ æœºæ¶æœåŠ¡å™¨çš„å¤–è§‚å®‰è£…å·¥ä¸šæ ‡å‡†ç»Ÿä¸€è®¾è®¡ï¼Œéœ€è¦é…åˆæœºæŸœç»Ÿä¸€ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºä¼ä¸šæœåŠ¡å™¨å¯†é›†éƒ¨ç½²ã€‚æœºæ¶æœåŠ¡å™¨å› ä¸ºéœ€è¦å¯†é›†ç´§å‡‘ï¼Œæ‰€ä»¥åœ¨è®¾è®¡æ—¶ä¼šéå¸¸ç´§å‡‘ï¼Œå……åˆ†åˆ©ç”¨æœ‰é™çš„ç©ºé—´ã€‚æœºæ¶æœåŠ¡å™¨å®½åº¦ 19 è‹±å¯¸ï¼Œé«˜åº¦ä»¥ U ä¸ºå•ä½ (1U=1.75 è‹±å¯¸ =44.45 æ¯«ç±³ï¼‰. åˆ€ç‰‡æœåŠ¡å™¨çš„ä¸»ä½“ç»“æ„æ˜¯ä¸»ä½“æœºç®±ä¸­å¯ä»¥æœ‰è®¸å¤šçƒ­æ‹”æ’çš„ä¸»æ¿ï¼Œæ¯ä¸€å—ä¸»æ¿éƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œè‡ªå·±çš„ç³»ç»Ÿï¼Œè¿™äº›ä¸»æ¿å¯ä»¥é›†åˆæˆä¸€ä¸ªæœåŠ¡å™¨é›†ç¾¤ï¼Œåœ¨é›†ç¾¤æ¨¡å¼ä¸‹å¯ä»¥è¿æ¥èµ·æ¥æä¾›æ›´å¥½çš„ç½‘ç»œä»¥åŠå…±äº«èµ„æºã€‚ å…¨å¡”ï¼Œä¸­å¡”ä¸å°å¡”åŒºåˆ«å½¢å®¹çš„æ˜¯æœºç®±çš„å¤§å°ã€‚ æ™®é€šæœºç®±ï¼Œåªèƒ½æ”¾ mATX ä¸»æ¿å’Œä¸€ä¸ªæ ‡å‡†ç”µæºï¼Œä»…æœ‰ 1-2 ä¸ªå…‰é©±ä½ï¼› ä¸­å¡”æœºç®± ATï¼ŒX ä¸»æ¿ç”šè‡³æ˜¯ EATX ä¸»æ¿å’Œä¸€ä¸ªæ ‡å‡†ç”µæºï¼Œæ‹¥æœ‰ 3-4 ä¸ªå…‰é©±ä½ï¼› å…¨å¡”æœºç®±ï¼Œå¯ä»¥åœ¨ä¸»æ¿ä¸Šä¸‹çš„ä½ç½®éƒ½å®‰æ”¾ä¸€ä¸ªç”µæºï¼Œä¸€å…±æ”¾ä¸¤ä¸ªç”µæºæ‹¥æœ‰ 4 ä¸ªä»¥ä¸Šçš„å…‰é©±ä½ã€‚ å†…å­˜ç”µæºå…¨æ¨¡ç»„ï¼ŒåŠæ¨¡ç»„ä¸éæ¨¡ç»„åŒºåˆ«æ€»ç»“ä¸€å¥è¯å°±æ˜¯èƒ½ä¸èƒ½æ‹”æ‰ä¸éœ€è¦çš„ä¾›ç”µçº¿ï¼Œèƒ½æ‹”å¤šå°‘ã€‚ éæ¨¡ç»„ä¸€ä¸ªéƒ½ä¸èƒ½æ‹”ï¼Œç”µæºçº¿ç›´æ¥ä»ç”µæºå†…éƒ¨å¼•å‡ºï¼Œè¾“å‡ºçº¿ç¼†å›ºå®šï¼Œæ— æ³•è¿›è¡Œæ‰©å±•ã€‚ åŠæ¨¡ç»„ èƒ½æ‹”ä¸€éƒ¨åˆ†ï¼Œè¾“å‡ºè®¾è®¡ä¸Šæ—¢æœ‰éæ¨¡ç»„ç”µæºçš„ç›´å‡ºçº¿ï¼Œåˆæœ‰å…¨æ¨¡ç»„ç”µæºçš„æ‰©å±•æ¥å£ã€‚ å…¨æ¨¡ç»„èƒ½å…¨æ‹”ï¼Œæ‰€æœ‰çº¿ç¼†éƒ½èƒ½æŒ‰éœ€æ’ä¸Šã€‚å› ä¸ºä¸€èˆ¬ä¸€å—ä¸»æ¿ä¸ä¼šæŠŠæ‰€æœ‰ç”µæºçº¿éƒ½ç”¨ä¸Šï¼Œè¿™æ ·åªéœ€è¦æ’ä¸Šè‡ªå·±éœ€è¦çš„çº¿ç¼†å³å¯ï¼Œå¯ä»¥ä¿è¯èµ°çº¿æ¸…æ¥šï¼Œæœºç®±æ¸…çˆ½ã€‚ é‡‘ç‰Œï¼Œé“¶ç‰Œå’Œé“œç‰Œå•¥åŒºåˆ«é‡‘ç‰Œï¼Œé“¶ç‰Œï¼Œé“œç‰ŒæŒ‡çš„æ˜¯ç”µæºçš„è½¬æ¢æ•ˆç‡ã€‚æœ‰é’›é‡‘ã€ç™½é‡‘ã€é‡‘ç‰Œã€é“¶ç‰Œã€é“œç‰Œã€ç™½ç‰Œç­‰æ¡£æ¬¡ï¼Œæ¡£æ¬¡è¶Šé«˜ï¼Œè½¬æ¢æ•ˆç‡ä¹Ÿè¶Šé«˜ï¼Œä½†æˆæœ¬ä¹Ÿè¶Šé«˜ï¼ŒåŠŸç‡è¶Šå°ï¼Œç›¸å¯¹æˆæœ¬ä¹Ÿè¶Šé«˜ã€‚æ¯ä¸ªâ€œç‰Œâ€å¯¹åº”çš„æ”»ç•¥è½¬æ¢æˆ–è€…å‚æ•°ä¹Ÿæ˜¯ä¸åŒçš„ã€‚ ç™½ç‰Œï¼šæœ€ä½è¦æ±‚æ˜¯ 20-100% è´Ÿè½½ä¸‹ï¼Œè½¬æ¢æ•ˆç‡å¿…é¡»è¾¾åˆ° 80%ï¼› é“œç‰Œï¼šä¸ä¸ŠåŒæ¡ä»¶å¤§äºç­‰äº 82%ï¼Œ85%@50% è´Ÿè½½ï¼› é“¶ç‰Œï¼šå¤§äºç­‰äº 85%ï¼Œ88%@50% è´Ÿè½½ï¼› é‡‘ç‰Œï¼šå¤§äºç­‰äº 87%ï¼Œ90%@50% è´Ÿè½½ï¼› ç™½é‡‘ç‰Œï¼š90%@20% è´Ÿè½½ã€92%@50% è´Ÿè½½ã€89%@100% è´Ÿè½½ã€‚ é’›é‡‘ç‰Œï¼šè¦æ±‚ 10%ã€20%ã€50%ã€100% è´Ÿè½½ä¸‹çš„æ•ˆç‡åˆ†åˆ«ä¸º 90%ã€94%ã€96%ã€92%ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š500w é‡‘ç‰Œå’Œ 500w é“œç‰Œï¼Œéƒ½èƒ½å¸¦åŠ¨ 500w åŠŸè€—çš„ç”µè„‘ã€‚é‡‘ç‰Œç”µæºåœ¨ 100% è´Ÿè½½æ—¶ï¼Œè½¬æ¢ç‡è¶…è¿‡ 87%ï¼Œå¯ä»¥ç®—ä¸€ä¸‹ï¼Œ500/0.87=575w è€—ç”µã€‚é“œç‰Œ 100% è´Ÿè½½è½¬æ¢ç‡è¶…è¿‡ 82% 500/0.82=610wè€—ç”µï¼Œç®€å•è¯´å°±æ˜¯å¥½ç”µæºçœç”µã€‚ ç¡¬ç›˜å›ºæ€ç¡¬ç›˜æœºæ¢°ç¡¬ç›˜å‚ç›´ç›˜ PMR ä¸å ç“¦ç›˜ SMR åŒºåˆ« ä½œè€…ï¼šä¸€èµ·å­¦ç‚¹ä»€ä¹ˆé“¾æ¥ï¼šhttps://www.zhihu.com/question/369882964/answer/2227127605 å‚ç›´ç£è®°å½•ï¼ˆPerpendicular magnetic recordingï¼ŒPMRï¼‰ï¼Œä¹Ÿç§°ä¸ºä¼ ç»Ÿç£æ€§è®°å½• (conventional magnetic recordingï¼ŒCMR)ï¼Œç”±äº SMR å…¶å®ä¹Ÿæ˜¯å‚ç›´å¼ç£è®°å½•çš„ä¸€ç§ï¼Œåªæ˜¯ç›¸è¾ƒäºå‚ç›´ç£è®°å½•æ–¹å¼ç£ç›˜ä¼˜åŒ–äº†å†™å…¥å¯†åº¦ï¼Œå› æ­¤ä¸ºäº†é¿å…è¢«è®¤ä¸ºæ‰€æœ‰å‚ç›´ç£è®°å½•çš„ç¡¬ç›˜éƒ½æ˜¯ SMR ç¡¬ç›˜ï¼Œå¤§å®¶ä¹Ÿä¹ æƒ¯æŠŠé SMR çš„å‚ç›´æœºæ¢°ç›˜ç§°ä¸º CMRã€‚ æœ€å¼€å§‹ç”±äºç¡¬ç›˜å®¹é‡æå‡çš„éœ€æ±‚ï¼Œç£æ€§è®°å½•é¢—ç²’çš„å°ºå¯¸éœ€è¦ä¸æ–­ä¸‹é™ï¼Œå¯¼è‡´å‡ºç°äº†ç”µç£å­¦ä¸Šçš„è¶…é¡ºç£æ•ˆåº”ï¼ˆè¶…é¡ºç£æ€§ï¼šå½“æŸäº›å…·æœ‰ç£æ€§çš„é¢—ç²’å°äºæŸä¸ªå°ºå¯¸æ—¶ï¼Œå¤–åœºäº§ç”Ÿçš„ç£å–å‘åŠ›å¤ªå°è€Œæ— æ³•æŠµæŠ—çƒ­æ‰°åŠ¨çš„å¹²æ‰°ï¼Œè€Œå¯¼è‡´å…¶ç£åŒ–æ€§è´¨ä¸é¡ºç£ä½“ï¼ˆé€šä¿—æ¥è¯´å°±æ˜¯æŒ‡ææ–™å¯¹ç£åœºå“åº”å¾ˆå¼±çš„ç£ï¼‰ç›¸ä¼¼ã€‚ï¼‰ï¼Œè¿™å°±é™åˆ¶äº†ç¡¬ç›˜å®¹é‡æå‡çš„æ½œåŠ›ã€‚ ä¹‹å‰ç¡¬ç›˜å‚å•†ä½¿ç”¨çºµå‘ï¼ˆå¹³è¡Œï¼ŒLongitudinal Magnetic Recordingï¼ŒLMRï¼‰è¯»å†™æŠ€æœ¯ï¼Œç£æ€§è®°å½•é¢—ç²’çš„æ˜“ç£åŒ–æ–¹å‘ç›¸å¯¹äºç¢Ÿç‰‡æ˜¯å¹³è¡Œçš„ï¼Œé¢—ç²’æ²¿ç€ç¢Ÿç‰‡åœ†å‘¨ä»¥ç«¯å¯¹ç«¯æ’åˆ—ï¼Œæ‰€ä»¥ä¾¿æœ‰æœºä¼šå‡ºç° SSï¼ˆå—ï¼‰å’Œ NNï¼ˆåŒ—ï¼‰çš„äº’æ–¥æ’åˆ—ã€‚å½“é¢—ç²’çš„å°ºå¯¸ä¸æ–­ä¸‹é™è€Œå¯†åº¦ä¸æ–­æå‡ï¼Œåœ¨å®¤æ¸©çš„æƒ…å†µä¸‹é¢—ç²’ä¾¿ä¼šå¯¹éšæœºçš„çƒ­è¿åŠ¨å¼‚å¸¸æ•æ„Ÿï¼Œå¤±å»ç¨³å®šæ€§ï¼Œå¯¼è‡´å‡ºç°æ¯”ç‰¹ï¼ˆ0 å’Œ 1ï¼‰ç¿»è½¬çš„ç°è±¡ï¼Œè®°å½•çš„æ•°æ®å› æ­¤è¢«ç ´åã€‚ è€Œä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œåæ¥å°±å¼€å‘å‡ºäº†å‚ç›´ç£è®°å½•æŠ€æœ¯ï¼ˆPerpendicular Recordingï¼‰çš„ç¡¬ç›˜ï¼Œè¿™ç§ç¡¬ç›˜ä¸­çš„ç£æ€§è®°å½•é¢—ç²’çš„æ˜“ç£åŒ–æ–¹å‘ç›¸å¯¹äºç¢Ÿç‰‡æ˜¯å‚ç›´çš„ï¼Œå…è®¸ä½¿ç”¨å•æç£å¤´é…åˆç£è®°å½•ä»‹è´¨ä¸‹çš„è½¯ç£å±‚å°†ä¿¡æ¯å†™å…¥ç£è®°å½•ä»‹è´¨ä¸­ï¼Œè¿™æ ·é‡‡ç”¨å…·æœ‰ç›¸åŒé¥±å’Œç£åŒ–å¼ºåº¦çš„ææ–™æ‰€åˆ¶å¤‡çš„å‚ç›´å†™å…¥ç£å¤´ï¼Œèƒ½äº§ç”Ÿè¿œå¤šäºä¼ ç»Ÿå†™å…¥ç£å¤´æ‰€èƒ½äº§ç”Ÿçš„ç£åœºã€‚æ›´å¤§çš„å†™å…¥ç£åœºå…è®¸æˆ‘ä»¬ä½¿ç”¨å…·æœ‰æ›´é«˜ç£å„å‘å¼‚æ€§çš„ææ–™æ¥åˆ¶å¤‡ç£è®°å½•ä»‹è´¨ï¼Œè€Œç£å„å‘å¼‚æ€§è¶Šå¼ºï¼Œå‡ºç°è¶…é¡ºç£æ€§æ•ˆåº”çš„ä¸´ç•Œä½“ç§¯å°±è¶Šå°ï¼Œå› æ­¤ï¼Œç¢Ÿç‰‡ä¸­çš„å­˜å‚¨å¯†åº¦å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦å†…å¾—åˆ°è¿›ä¸€æ­¥çš„æé«˜ã€‚ ä½†æ˜¯è¿™æ ·è™½ç„¶æé«˜äº†ç¡¬ç›˜çš„å­˜å‚¨å¯†åº¦ï¼Œä½†æ˜¯å¾ˆå¿«ä¹Ÿå°±è¾¾åˆ°äº†ç“¶é¢ˆï¼Œå·¥ç¨‹å¸ˆåˆå¼€å§‹æƒ³æ–°çš„æ–¹æ³•æ¥æé«˜ç¡¬ç›˜çš„å­˜å‚¨å¯†åº¦ï¼Œè¿™å°±è¯ç”Ÿäº†å¤§å®¶éƒ½çŸ¥é“çš„ SMR å ç“¦ç›˜ã€‚ å ç“¦å¼æœºæ¢°ç¡¬ç›˜ï¼ˆShingled magnetic recordingï¼ŒSMRï¼Œç›´è¯‘ä¸ºåˆ†å±‚ç£è®°å½•ï¼‰ï¼šä¹Ÿæ˜¯ä¸€ç§ç”¨äºç¡¬ç›˜é©±åŠ¨å™¨çš„ç£å­˜å‚¨æ•°æ®è®°å½•æŠ€æœ¯ï¼Œå¯æé«˜å­˜å‚¨å¯†åº¦å’Œæ¯ä¸ªé©±åŠ¨å™¨çš„æ•´ä½“å­˜å‚¨å®¹é‡ã€‚å¸¸è§„çš„ç¡¬ç›˜é©±åŠ¨å™¨é€šè¿‡å†™å…¥å½¼æ­¤å¹³è¡Œè€Œä¸é‡å çš„ç£é“æ¥è®°å½•æ•°æ®ï¼Œä¾‹å¦‚ PMRã€‚è€Œå ç“¦ç£è®°å½•æŠ€æœ¯çš„ç¡¬ç›˜å†™å…¥çš„æ–°ç£é“åˆ™ä¸å…ˆå‰å†™å…¥çš„ç£é“éƒ¨åˆ†é‡å ï¼Œä»è€Œä½¿å…ˆå‰çš„ç£é“æ›´çª„ï¼Œå› æ­¤èƒ½æ‹¥æœ‰æ›´é«˜çš„ç£é“å¯†åº¦ï¼Œè¿›è€Œæé«˜ç£ç›˜å®¹é‡ã€‚ä½¿ç”¨å ç“¦ç£æŠ€æœ¯çš„ç£é“ç›¸äº’é‡å ï¼Œä¸ç”¨ä½œå±‹é¡¶çš„ç“¦ç‰‡å †å æ–¹å¼ç±»ä¼¼ã€‚ä¹‹æ‰€ä»¥èƒ½è¿™æ ·åšæ˜¯å› ä¸ºç£ç›˜å†™å…¥ç£å¤´ç”±äºç‰©ç†ä¸Šçš„åŸå› æ¯”è¯»å–ç£å¤´å®½ä¸Šè®¸å¤šï¼Œå› è€Œç”±æ­£å¸¸æ–¹å¼å†™å…¥çš„ç£é“å®½åº¦è¿œæ¯”è¯»å–ç£å¤´æ‰€éœ€çš„ç£é“å®½åº¦æ¥å¾—å®½ï¼Œæ­¤å¤–ä¸ºäº†é¿å…ç£é“é—´ç›¸äº’å¹²æ‰°ï¼Œç£é“å’Œç£é“ä¹‹é—´å…¶å®è¿˜æœ‰ä¸€éƒ¨åˆ†ç©ºéš™ï¼Œå› æ­¤è¯»å–ä¿¡æ¯çš„ç£é“ä»…å æ‰€æœ‰ç£é“çš„å¾ˆå°ä¸€éƒ¨åˆ†ï¼Œå¾ˆå¤§çš„ç£ç›˜ç©ºé—´éƒ½è¢«æµªè´¹äº†ï¼Œåªæ˜¯å› ä¸ºæŠ€æœ¯åŸå› æˆ‘ä»¬ä¸èƒ½å°†å†™å…¥ç£å¤´åˆ¶ä½œçš„å’Œè¯»å–ç£å¤´ä¸€æ ·å°ã€‚ ç”±äºç£é“å­˜åœ¨é‡å ï¼Œå ç“¦å¼ç£ç›˜çš„å†™å…¥è¿‡ç¨‹è¾ƒä¸ºå¤æ‚ã€‚å¦‚æœæˆ‘ä»¬éšæœºå†™å…¥ä¸€ä¸ªç£é“ï¼Œç”±äºå†™å…¥ç£å¤´çš„å®½åº¦æ¯”ç£é“å®½ï¼Œå› æ­¤å†™å…¥ä¼šå½±å“åˆ°ä¸´è¿‘ç£é“ï¼Œå¦‚æœè¿™ä¸ªä¸´è¿‘ç£é“æœ‰æ•°æ®ï¼Œè¿™äº›æ•°æ®å°±ä¹Ÿéœ€è¦ä¾æ¬¡é‡å†™ä»¥å…æ•°æ®è¢«ç ´åï¼Œä¾æ­¤ç±»æ¨ã€‚å› æ­¤ï¼ŒSMR ç£ç›˜ä¸€èˆ¬åˆ†æˆå¾ˆå¤šå—åªèƒ½è¿½åŠ æ•°æ®ï¼ˆé¡ºåºå†™å…¥ï¼‰çš„åŒºåŸŸï¼ˆZoneï¼‰ï¼Œè¿™å’Œå›ºæ€ç¡¬ç›˜çš„é—ªå­˜é¡µç®¡ç†ç±»ä¼¼ã€‚ä½¿ç”¨â€œè®¾å¤‡ç®¡ç†â€ï¼ˆdevice-managedï¼‰æ–¹å¼çš„ SMR ç£ç›˜é€šè¿‡å†…éƒ¨å›ºä»¶å¤„ç†äº† SMR ç£ç›˜å¤æ‚çš„å†™å…¥é—®é¢˜ï¼Œä»è€Œå¯¹ç”¨æˆ·å°è£…äº† SMR ç£ç›˜çš„å¤æ‚æ€§ï¼Œä»¤ç”¨æˆ·å¯ä»¥åƒä½¿ç”¨ PMR ç¡¬ç›˜ä¸€æ ·éšæœºå†™å…¥ SMR ç¡¬ç›˜ã€‚å…¶ä»– SMR ç£ç›˜åˆ™ä½¿ç”¨â€œä¸»æœºç®¡ç†â€ï¼ˆhost-managedï¼‰æ–¹å¼ï¼Œéœ€è¦æ“ä½œç³»ç»Ÿè¯†åˆ« SMR ç£ç›˜å¹¶æ‹¥æœ‰èƒ½å¯¹ SMR ç£ç›˜è¿›è¡Œæ­£ç¡®é¡ºåºå†™å…¥çš„é©±åŠ¨ç¨‹åºæ‰èƒ½è¢«æ­£å¸¸ä½¿ç”¨ã€‚ å ç“¦ç›˜ç›¸è¾ƒäºå‚ç›´ç›˜æ€§èƒ½ä¹Ÿæœ‰ä¸€å®šä¸‹é™ï¼Œå› ä¸ºä¼ ç»Ÿçš„ CMR ç¡¬ç›˜ç£é“ä¹‹é—´ä¸ä¼šäº’ç›¸å¹²æ‰°ï¼Œå†™å…¥æ•°æ®æ—¶å¯ä»¥ä»»æ„è¿›è¡Œå†™å…¥ï¼Œè€Œå ç“¦ç›˜ç”±äºåœ¨ä¸€ä¸ªç£é“å†™å…¥æ•°æ®æ—¶ä¸å¯é¿å…ä¼šå½±å“ç›¸é‚»çš„ç£é“ï¼Œéœ€è¦å°†ä¸‹ä¸€ç£é“çš„æ•°æ®å…ˆæ‹¿å‡ºï¼ˆæš‚æ—¶æ”¾å…¥ç¡¬ç›˜ CMR ç¼“å†²åŒºï¼‰å†è¿›è¡Œå†™å…¥ï¼Œè€Œæ¢å¤ä¸‹ä¸€ç£é“çš„æ•°æ®åˆ™åˆä¼šå¯¹ä¸‹ä¸‹ç£é“çš„æ•°æ®è¿›è¡Œå½±å“ï¼Œåˆ™åˆéœ€è¦å…ˆå–å‡ºä¸‹ä¸‹ç£é“çš„æ•°æ®ï¼Œå› æ­¤å®Œæˆä¼ ç»Ÿå‚ç›´ç¡¬ç›˜ä¸€æ¬¡çš„å†™å…¥æ“ä½œï¼Œå ç“¦å¼ç¡¬ç›˜åˆ™éœ€è¦å¤šæ¬¡çš„å†™å…¥ï¼ŒåŒæ ·çš„æ•°æ®é‡éœ€è¦æ›´å¤šçš„å†™å…¥æ“ä½œï¼Œä¹Ÿä¼šå¢å¤§æŸåçš„æ¦‚ç‡ã€‚ é…ä»¶é€‰è´­ é…ä»¶ å‹å· ä»·æ ¼ ä¸»æ¿ ä¸ƒå½©è™¹ B460-ITX 300^1^ CPU I3-10100 600^1^ æœºç®± Invasion X5 330^1^ ç”µæº æŒ¯åå†°å±±é‡‘è¶ 550W 300^1^ ç¡¬ç›˜ è¥¿æ•° HC550 1390 SSD xxxxx æ—§ç”µè„‘æ‹†çš„ æ•£çƒ­å™¨ åˆ©æ°‘ AX120 RSE 74 å†…å­˜æ¡ é…·å…½ DDR4 16G 245 åˆè®¡ 3239 1.è¡¨ç¤ºäºŒæ‰‹ä»·æ ¼ ä¸»æ¿åˆšå…¥é—¨å…¶å®æœ€å¤´ç–¼çš„å°±æ˜¯åˆ°åº•ä¹°ä»€ä¹ˆå‹å·ï¼Œå› ä¸ºå„ä¸ªé…ä»¶ä¹‹é—´åˆæœ‰å…¼å®¹é—®é¢˜ï¼Œæ¯”å¦‚ç›¸ä¸­äº†ä¸€æ¬¾ ITX çš„æœºç®±ï¼Œä½†æ˜¯ä¸»æ¿å´æ˜¯ ATX çš„ï¼Œä¸»æ¿éƒ½æ”¾ä¸è¿›æœºç®±é‡Œï¼Œè¿™å°±å¾ˆéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦ç¡®å®šä¸€ä¸ªé…ä»¶ï¼Œå…¶ä½™é…ä»¶éƒ½å®‰è£…è¿™ä¸ªé…ä»¶çš„è§„æ ¼å»ä¹°ï¼Œå¹¶ä¸”éƒ½è¦é€‚é…è¿™ä¸ªé…ä»¶ã€‚é‚£ä¹ˆè¿™ä¸ªé…ä»¶æœ€å¥½çš„é€‰æ‹©å°±æ˜¯ä¸»æ¿ã€‚ æˆ‘ä»¬å…ˆç¡®å®šè‡ªå·±è¦ä¹°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ä¸»æ¿ï¼Œè®©æ‰€æœ‰å…¶ä»–çš„é…ä»¶éƒ½é€‚é…è¿™ä¸ªä¸»æ¿ã€‚é€‰æ‹©ä¸»æ¿çš„å¥½å¤„æ˜¯ï¼Œä¸»æ¿ä¸Šå„ä¸ªæ¥å£å°±èƒ½ä½“ç°å‡ºè¿™å° NAS çš„æ€§èƒ½ã€‚ä¸è‡³äºé…ä»¶ä¹°çš„å¤ªç¦»è°±ã€‚ æœºç®±å¾®å‹æœºç®±ä¹° ITX æ¿ï¼ŒMINI æœºç®±ä¹° M-ATX æ¿å’Œ ITX æ¿ï¼Œä¸­å¡”æœºç®±ä¹° ATX æ¿ã€‚å› ä¸º NAS æ˜¯ä¸ªæœåŠ¡å™¨ï¼Œå¯èƒ½ä¼šæ°¸è¿œè¢«æ”¾åœ¨å¢™è§’ï¼Œæ‰€ä»¥é¢œå€¼ä¸é‡è¦ï¼Œå®ç”¨æ‰æ˜¯ç‹é“ï¼Œä¹°ä¸€ä¸ªç›˜ä½å¤šå®ç”¨æ€§å¼ºçš„å°±è¡Œã€‚ åœ¨å‰æœŸå‡†å¤‡æ—¶çœ‹åˆ°å¾ˆå¤šæ¨èè¿å¹¿çš„æœºç®±ï¼Œæœ¬æ¥å†³å®šè¦ä¹°å®ƒï¼Œä½†æ˜¯äº†è§£åˆ° NAS çš„æœ¬è´¨å°±æ˜¯ä¸€å°ç”µè„‘ä¸»æœºæ—¶ï¼Œæ„è¯†åˆ°ä¸ºä½•ä¸ä¹°ä¸ªç”µè„‘æœºç®±ï¼Ÿä¸ºä½•è¦é€‰æ‹©æˆå“çš„æœºç®±ï¼Ÿè™½ç„¶æˆå“çš„ NAS æœºç®±æœ‰ç¡¬ç›˜ä½ï¼Œå¯çƒ­æ’æ‹”ã€‚ä½†æ˜¯æˆ‘ä¸ºå•¥è¦å»æ’æ‹”æœåŠ¡å™¨ä¸Šçš„ç¡¬ç›˜ï¼Ÿ å½“æˆ‘æœ‰è¿™ä¸ªæ„è¯†åï¼Œæˆ‘çš„é€‰æ‹©ä¸€ä¸‹å­å¤šäº†èµ·æ¥ï¼Œæˆ‘æœ€ç»ˆé€‰äº†é€›æ·˜å®å¶ç„¶çœ‹çš„ Invasion æœºç®±ã€‚ååˆ†ç®€çº¦çš„å¤–å½¢ï¼Œç”šè‡³è¿˜æœ‰ç»ç’ƒä¾§ç½©ï¼Œå››æ ¼é‡‘å±ç¡¬ç›˜æ¶ä¸“ä¸º NAS æ‰“é€ ã€‚åªè¦ä¸åˆ°ä¸‰ç™¾å—ã€‚äºæ˜¯ç«‹é©¬è½¬å¤´æ‰“å¼€å°é»„é±¼ï¼Œä¸€æœè¿˜çœŸæœ‰è½¬å–çš„ï¼Œå‡çº§ç‰ˆçš„ 8 æ ¼ç¡¬ç›˜æ¶åªè¦ 330ã€‚æ”¶åˆ°è´§åä¹Ÿå¾ˆæ»¡æ„ï¼Œå‡ ä¹æ˜¯å…¨æ–°çš„ï¼Œç»ç’ƒè†œéƒ½æ²¡æœ‰æ’•ï¼Œè¿˜é€äº†ä¿©é£æ‰‡ã€‚ CPUé€‰æ‹© CPU å¯¹äºå°ç™½æ¥è¯´æœ€é‡è¦çš„å°±æ˜¯è¦é€‰æ‹©å¸¦æ ¸æ˜¾çš„ CPUï¼Œå› ä¸º NAS ä¸Šæ˜¾å¡å…¶å®æ²¡å¿…è¦ï¼ŒCPU çš„æ ¸æ˜¾å°±ç»°ç»°æœ‰ä½™äº†ï¼Œå¦‚æœæ—¢æ²¡æœ‰æ˜¾å¡ä¹Ÿæ²¡æœ‰æ ¸æ˜¾å°±ä¼šæ— æ³•äº®æœºã€‚æ‰€ä»¥é€‰æ‹© CPU æ—¶è¦é€‰æ‹©å¸¦æ ¸æ˜¾çš„ï¼Œä¹Ÿå°±æ˜¯ Intel çš„ CPU å‹å·ä¸å¸¦Fçš„ï¼Œæ¯”å¦‚æˆ‘æœ€ç»ˆé€‰æ‹©çš„ I3-10100ã€‚AMD çš„ CPU å‹å·æ ‡è¯†æˆ‘ä¹Ÿæ²¡å¼„æ¸…æ¥šï¼Œå¯ä»¥è‡ªå·±æœç´¢ä¸€ä¸‹è‡ªå·±æƒ³è¦çš„ CPU æ˜¯å¦æœ‰æ ¸æ˜¾ã€‚ å…¶æ¬¡å°±æ˜¯åŠŸè€—ï¼Œå› ä¸º NAS è¦ 7*24 å°æ—¶è¿è¡Œï¼Œæ‰€ä»¥é€‰æ‹©æ€§èƒ½ä½ä¸€ç‚¹çš„ CPU å°±å¥½äº†ï¼Œå¦å¤–å°±æ˜¯éœ€è¦å…³æ³¨ CPU æ˜¯å¦æœ‰éŸ³è§†é¢‘è§£ç çš„èƒ½åŠ›ã€‚å› ä¸ºå¹³æ—¶çˆ±æŠ˜è…¾ï¼Œæƒ³ç€ä»¥åæŒ‡ä¸å®šåœ¨ NAS ä¸ŠæŠ˜è…¾äº›å•¥ï¼Œæ‰€ä»¥é€‰æ‹©äº†æ€§èƒ½ä¸ç®—ä½çš„ I3-10100ã€‚ä¸¤ä¸ªæœˆä½“éªŒä¸‹æ¥ï¼Œæ€§èƒ½è¿˜æ˜¯è¿‡å‰©äº†ï¼Œæ—¥å¸¸åŸºæœ¬ä¸Šéƒ½å¤„äºå¾…æœºçŠ¶æ€ï¼Œåªæœ‰å‘¨æœ«çœ‹ç”µå½±ä¼šç”¨ä¸€ä¸‹ï¼ŒCPU åˆ©ç”¨ç‡å¾ˆä½ï¼Œå¥½åœ¨æ—¥å¸¸åŠŸè€—åªæœ‰ 30Wã€‚- å®‰è£… OVM (OpenMediaVaultt)å‚è€ƒè§†é¢‘ï¼šèœ—ç‰›æ˜Ÿé™…å®‰è£…å¼€æº NAS ç³»ç»Ÿ Openmediavault åŠåˆå§‹åŒ–é…ç½®ï¼ˆå¸æ³¢å›¾ï¼‰â€”â€”OMV ç³»åˆ—æ•™ç¨‹ 01 ä¸ºä»€ä¹ˆé€‰æ‹©å®ƒOpenMediaVaultï¼ˆä»¥ä¸‹å‡ç®€ç§° OMVï¼‰æ˜¯é™¤ FreeNAS å¤–ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„å¼€æº NAS ç³»ç»Ÿã€‚ é¢„å¤‡è½¯ä»¶ä¸‹è½½ä¸‹è½½ OpenMediaVaultt ç³»ç»Ÿï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ ISO æ ¼å¼ Old Stable ç‰ˆæœ¬ï¼Œè™½ç„¶æƒ³ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡å®‰è£…æ²¡æœ‰æˆåŠŸï¼Œé€‰æ‹©äº†æ—§ç‰ˆæœ¬å®‰è£…æˆåŠŸäº†ã€‚ ä¸‹è½½ å¾® PE å·¥å…·ç®±ï¼Œç”¨æ¥æ ¼å¼åŒ–ç³»ç»Ÿç›˜ï¼Œå¦‚æœæ˜¯æ–°ä¹°çš„ç³»ç»Ÿç›˜å°±ä¸éœ€è¦ä¸‹è½½ã€‚ ä¸‹è½½ Rufus è½»æ¾åˆ›å»º USB å¯åŠ¨ç›˜ï¼Œè¿™ä¸ªå¿…é¡»è¦ç”¨çš„ã€‚ åˆ¶ä½œå¯åŠ¨ç›˜éœ€è¦ä¸€ä¸ªå®¹é‡å¤§äº 4G çš„ U ç›˜ï¼Œç”¨ Rufus å°† OMV å†™å…¥ U ç›˜å³å¯ã€‚å®‰è£…æ—¶ä¼šä» U ç›˜å¯åŠ¨ï¼Œç„¶åå°†ç³»ç»Ÿå®‰è£…åˆ°æ’åœ¨ä¸»æ¿ä¸Šçš„ç³»ç»Ÿç›˜å†…ã€‚ å¯åŠ¨ç›˜åˆ¶ä½œå°±ä¸è¯¦ç»†è¯´äº†ï¼Œéƒ½æ˜¯ä¸€é”®å¼æ“ä½œã€‚ åˆ¶ä½œå®Œåè¿›å…¥ U ç›˜å†…æŸ¥çœ‹æ˜¯å¦å†™å…¥æˆåŠŸï¼ŒU ç›˜å†…æ˜¯å¦æœ‰æ–‡ä»¶ï¼Œæˆ–è€…æŸ¥çœ‹ä¸€ä¸‹ U ç›˜ä½¿ç”¨å¤§å°ï¼Œå¦‚æœæ¯”ç³»ç»Ÿ ISO å¤§å°è¿˜å°ï¼Œé‚£è‚¯å®šæ²¡æœ‰å†™æˆåŠŸã€‚æˆ‘å°±åˆ¶ä½œäº†ä¸‰éæ‰å‘ç°æ²¡æœ‰å†™æˆåŠŸï¼Œè™½ç„¶èƒ½çœ‹åˆ°å¯åŠ¨é€‰é¡¹ï¼Œä½†æ˜¯è¿›å…¥å®‰è£…å°±é»‘å±ï¼Œå› ä¸ºæ ¹æœ¬æ²¡æœ‰å¯ä»¥å®‰è£…çš„æ–‡ä»¶ã€‚ å¦‚æœæ²¡æœ‰åˆ¶ä½œæˆåŠŸï¼Œå°è¯•æ ¼å¼åŒ–U ç›˜åé‡æ–°åˆ¶ä½œã€‚ å®‰è£…è¿‡ç¨‹å‚è€ƒè§†é¢‘å³å¯ï¼Œå¾ˆè¯¦ç»†ã€‚ è¸©å‘è®°å½•123456# gitsudo apt install git# pythonsudo apt install python# vimsudo apt install vim Docker é…ç½®å®‰è£… Portainer ç®¡ç†å®¹å™¨æ›´æ¢å›½å†…é•œåƒæº ç½‘æ˜“ http://hub-mirror.c.163.com ustc http://docker.mirrors.ustc.edu.cn é˜¿é‡Œäº‘ http://&lt;ä½ çš„ ID&gt;.mirror.aliyuncs.com æˆ–è€…ä½¿ç”¨ä¸€ä½ç½‘å‹æä¾›çš„ http://1nj0zren.mirror.aliyuncs.com å› ä¸ºå¯èƒ½æœ‰æœ‹å‹çœ‹äº†æ¯”è¾ƒè€çš„æ•™ç¨‹ï¼ˆæ¯”å¦‚æˆ‘ï¼Œ:( ï¼‰ï¼Œå¯èƒ½ä¼šç”¨åˆ°ä¸€äº›åœæ­¢æœåŠ¡çš„è¿›è¡Œï¼Œå¦‚ï¼š https://dockerhub.azk8s.cn https://reg-mirror.qiniu.com https://registry.docker-cn.com å¦‚æœæ— æ³•æ‹‰å–é•œåƒï¼Œæ£€æŸ¥æ˜¯å¦ç”¨äº†è¿™å‡ ä¸ªï¼Œå¦‚æœç”¨äº†è¯·æ¢é•œåƒæºã€‚ å®‰è£… Jellyfin éƒ¨ç½²å½±éŸ³æœåŠ¡å™¨å®‰è£… Transmission ä¸‹è½½å®‰è£… qBittorrent ä¸‹è½½ æ·»åŠ  tracker listngosang/trackerslist: Updated list of public BitTorrent trackers å®‰è£… Jackett æœç´¢ç§å­Docker ä¸­å®‰è£…ï¼Œé€‰æ‹©ç½‘æ˜“çš„é•œåƒï¼Œé˜¿é‡Œçš„é•œåƒå¤ªæ—§äº†ã€‚ é…ç½®ç«¯å£å·9117ï¼Œæ˜ å°„ä¸¤ä¸ªè·¯å¾„å³å¯ã€‚ å®‰è£…è¿‡ç¨‹å‚è€ƒHow to configure Jackett pluginã€‚ ç‚¹å‡»è¿™é‡Œä¸‹è½½æºç ï¼Œå¤åˆ¶å…¨æ–‡å¹¶ä¿å­˜ä¸ºjackett.pyæ–‡ä»¶ã€‚ å¦‚æœæŒ‰ç…§ä»¥ä¸Šå®‰è£… qBittorrent é‚£ä¹ˆä¿å­˜è·¯å¾„ä¸ºå…±äº«æ–‡ä»¶å¤¹ä¸‹appdata/qBittorrent/nova3/engines/ã€‚ å¦‚æœæ²¡æ‰¾åˆ°ï¼Œæ‰¾æ‰¾æ˜¯å¦æœ‰ä»¥ä¸‹è·¯å¾„ã€‚ 123~/.local/share/data/qBittorrent/nova3/engines/# æˆ–è€…~/.local/share/qBittorrent/nova3/engines/ å†åœ¨ç›¸åŒè·¯å¾„ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶jackett.jsonï¼Œå†™å…¥ä»¥ä¸‹é…ç½®ï¼š 123456&#123; &quot;api_key&quot;: &quot;YOUR_API_KEY_HERE&quot;, &quot;tracker_first&quot;: false, // å¦‚æœä½ ç™»å½• OMV çš„åœ°å€æ˜¯ 192.168.0.1 &quot;url&quot;: &quot;http://192.168.0.1:9117&quot;&#125; å®‰è£… Hlink ç¡¬é“¾æ¥æŒç»­åšç§ä¸‹è½½çš„æ–‡ä»¶åå¤ªè¿‡æ‚ä¹±ï¼Œå¯ä»¥ç”¨ TMM ç­‰åˆ®å‰Šå·¥å…·åˆ®å‰Šï¼Œé‡å‘½åï¼Œå»ºç«‹å½±éŸ³åº“ã€‚ä½†æ˜¯é‡å‘½ååå°±æ— æ³•åšç§ã€‚æƒ³èµ·äº† Linux æœ‰ç¡¬é“¾æ¥åŠŸèƒ½ï¼Œåœ¨æ¯å¤©å­¦å‘½ä»¤-ln è½¯ç¡¬é“¾æ¥è¿™ç¯‡æ–‡ç« ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚ç®€è¨€ä¹‹å°±æ˜¯åˆ›å»ºçš„ç¡¬é“¾æ¥å¯ä»¥ä»»æ„ä¿®æ”¹æ–‡ä»¶åï¼Œçœ‹ä¸Šå»æ˜¯ä¸€ä»½æ‹·è´ï¼Œä½†æ˜¯å®é™…ä¸å ç”¨ç¡¬ç›˜ç©ºé—´ã€‚ ä¸‹è½½çš„æ–‡ä»¶å¤ªå¤šï¼Œåˆæ˜¯æ–‡ä»¶å¤¹åµŒå¥—ï¼Œæ‰‹åŠ¨åˆ›å»ºæ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰äººä¸“é—¨ä¸ºè¿™ä¸ªéœ€æ±‚å¼€æºäº†ä¸€ä¸ªé¡¹ç›®hlinkï¼Œå¯ä»¥æ‰¹é‡åˆ›å»ºç¡¬é“¾æ¥ã€‚è¿™é‡Œè¿˜æ˜¯ä»¥ä½¿ç”¨ Docker ä¸ºä¾‹ã€‚ é…ç½® Dockeré•œåƒåï¼šlikun7981/hlinkç«¯å£å·ï¼š9090ç›®å½•æ˜ å°„ï¼š/media : /root/sharedfolderç¯å¢ƒå˜é‡ï¼šHLINK_HOMEï¼š/root/sharedfolder/appdata/hlink é€‰æ‹©è‡ªå·±æ”¾é…ç½®æ–‡ä»¶çš„ç›®å½•å³å¯ /root/sharedfolder æ˜¯æˆ‘æŒ‚è½½çš„ç¡¬ç›˜çš„æ ¹ç›®å½•ï¼Œå»ºè®®æ˜ å°„æ ¹ç›®å½•ï¼Œä¸è¦åˆ›å»ºå¤šä¸ªç›®å½•ï¼Œæ¯”å¦‚æ˜ å°„/root/sharedfolder/movie å’Œ/root/sharedfolder/musicã€‚å› ä¸ºç¡¬é“¾æ¥ä¸æ”¯æŒè·¨ç›˜ç¬¦åˆ›å»ºï¼Œè™½ç„¶æˆ‘ä»¬æœ¬åœ° music å’Œ movie æ˜¯åœ¨ä¸€ä¸ªç›˜ç¬¦ï¼Œä½†æ˜¯è¿™æ ·æ˜ å°„åœ¨å®¹å™¨ä¸­å°±æ˜¯ä¸¤ä¸ªç›˜ï¼Œå°±ä¼šæ— æ³•åˆ›å»ºç¡¬é“¾æ¥ï¼Œæ‰€ä»¥åªæ˜ å°„ä¸€ä¸ªæ ¹ç›®å½•ã€‚ é…ç½® Hlinkæµè§ˆå™¨è¾“å…¥ IP:9090ï¼Œæ‰“å¼€é…ç½®ç•Œé¢ã€‚ æ·»åŠ ä¸€ä¸ªæ–°é…ç½®ï¼Œæ³¨é‡Šååˆ†è¯¦ç»†ï¼Œå°±ä¸èµ˜è¿°äº†ï¼Œä½†æ˜¯è·¯å¾„ä¸€å®šè¦å†™å¯¹ï¼Œå¯ä»¥æ–°å»ºä¸¤ä¸ªæµ‹è¯•ç›®å½•ï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½å¤Ÿåˆ›å»ºæˆåŠŸã€‚ ä¸¤ä¸ªé‡è¦é…ç½®è§£é‡Šï¼š 1234567891011121314151617/** * /media æ˜¯å®¹å™¨é‡Œçš„ç›®å½•ï¼Œå› ä¸ºæˆ‘åªæ˜ å°„äº†ä¸€ä¸ªç›®å½•ï¼Œæ‰€ä»¥è¿™å°±æ˜¯å®¹å™¨çš„æ ¹ç›®å½• * å¯¹åº”åˆ°æˆ‘ä¸»æœºï¼Œå°±æ˜¯/root/sharedfolder è¿™ä¸ªç›®å½• * æ‰€ä»¥/media/downloads/qbittorrent/qbcomplete/movie * å°±æ˜¯/root/sharedfolder/downloads/qbittorrent/qbcomplete/movie * åä¸€ä¸ªè·¯å¾„/media/media/movieåŒç† * ç­‰ä»·äº/root/sharedfolder/media/movie */ /** * å‰ä¸€ä¸ªè·¯å¾„æ˜¯ä¸‹è½½çš„è·¯å¾„ï¼Œè¿™é‡Œçš„æ–‡ä»¶éƒ½æ˜¯ä¸èƒ½é‡å‘½åæ•´ç†çš„ * åä¸€ä¸ªè·¯å¾„æ˜¯å½±éŸ³åº“çš„è·¯å¾„ï¼Œhlink æ‰§è¡Œå®Œä¼šåœ¨è¿™é‡Œåˆ›å»ºç›¸åŒçš„æ–‡ä»¶é“¾æ¥ * è¿™ä¸ªé“¾æ¥å¯ä»¥ä»»æ„ä¿®æ”¹ï¼Œç§»åŠ¨ï¼Œåˆ é™¤ */ pathsMapping: &#123; &#x27;/media/downloads/qbittorrent/qbcomplete/movie&#x27;: &#x27;/media/media/movie&#x27;, &#125;, 12345/** * è®¾ç½® true æ‰“å¼€ç¼“å­˜ï¼Œè¿™æ ·å³ä½¿å½±éŸ³åº“é‡Œçš„æ–‡ä»¶è¢«åˆ é™¤ï¼Œç§»åŠ¨ * ä¹Ÿä¸ä¼šåˆ›å»ºæ–°çš„ç¡¬é“¾æ¥ */openCache: true, ç¼“å­˜çš„æ–‡ä»¶ä¿¡æ¯åœ¨å³ä¸Šè§’ç¼–è¾‘ç¼“å­˜å¯ä»¥æŸ¥çœ‹ï¼Œå¦‚æœå·²ç»æ‰§è¡Œè¿‡åˆ›å»ºç¡¬é“¾æ¥ä½†æ˜¯æ²¡æœ‰æ˜¾ç¤ºï¼ŒShfit+F5åˆ·æ–°ç•Œé¢é‡è¯•ã€‚ è¸©å‘è®°å½•ä¸»æ¿æ— æ³•è¯†åˆ«å›ºæ€ç¡¬ç›˜å› ä¸ºæƒ³åˆ©ç”¨ä¸Šä¸‰å¹´å‰ä»ç¬”è®°æœ¬ä¸Šæ‹†ä¸‹æ¥çš„å›ºæ€ï¼Œä½†æ²¡æ³¨æ„æ¥å£çš„åè®®ã€‚ä¸»æ¿ç°åœ¨å¤§å¤šé»˜è®¤æ”¯æŒ NEVe åè®®ï¼Œä½†æ˜¯æˆ‘çš„ç¡¬ç›˜æ˜¯å¾ˆä¹…ä¹‹å‰çš„ SATA åè®®ã€‚è¿™å— B460i ä¸»æ¿é»˜è®¤æ”¯æŒ NVMe åè®®çš„ï¼Œä½†æ˜¯ä¹Ÿæ”¯æŒ SATA åè®®ï¼Œéœ€è¦æ›´æ”¹è·³å¸½ã€‚ æ‰¾äº†åŠå¤©å›¾ç‰‡æ²¡æœ‰æ‰¾åˆ°ä¸€æ ·çš„ï¼Œå®˜ç½‘çš„å›¾ç‰‡æ˜¯å’Œè¯´æ˜ä¹¦ä¸Šçš„ä¸€æ ·æ˜¯æ‹¨åŠ¨å¼€å…³å½¢å¼çš„ï¼Œä½†æ˜¯æˆ‘ä¹°çš„äºŒæ‰‹çš„æ˜¯è·³å¸½ï¼ˆå“­ï¼‰ï¼Œä¸ä¼šæ˜¯ä¹°åˆ°å‡çš„äº†å§ã€‚å¼€å…³å…¨éƒ¨æ‹¨åˆ°å·¦è¾¹æ‰æ”¯æŒ SATA åè®®ã€‚ç”¨è·³å¸½ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¿…é¡»éƒ½è¿æ¥çš„æ˜¯å·¦è¾¹ä¸¤ä¸ªå¼•è„šã€‚ æ— æ³•è¯†åˆ« U ç›˜å¯åŠ¨ç›˜å¼•å¯¼æ¨¡å¼æœ‰ä¸¤ç§ UEFI å’Œ Legacyï¼Œè¿™ä¸ªåœ¨åšå¯åŠ¨ç›˜æ—¶å°±ç¡®å®šäº†ã€‚å¦‚æœä¸»æ¿ä½¿ç”¨çš„ UEFI æ¨¡å¼ï¼Œè€Œå¯åŠ¨ç›˜åˆ¶ä½œçš„æ˜¯ Legacy æ¨¡å¼ï¼Œå°±æ— æ³•è¯†åˆ«ï¼Œéœ€è¦åœ¨ Bios é‡Œæ‰¾åˆ°å¯åŠ¨æ¨¡å¼é€‰æ‹©çš„ç›¸å…³é€‰é¡¹ï¼Œé…ç½®å¯ä»¥ä½¿ç”¨ Legacy æ¨¡å¼æˆ–è€… UEFIã€‚ï¼ˆè®°å½•è¿™äº›æ—¶å·²ç»ä¸æƒ³å†è¿› Bios äº†æ‰€ä»¥ä¹Ÿæ²¡æœ‰å›¾ç‰‡ï¼Œæ€»ä¹‹è¦é…ç½®å¼•å¯¼æ–¹å¼ï¼Œé¿å…è¿‡æ»¤äº†ä¸€äº›å¼•å¯¼æ–¹å¼å¯¼è‡´ U ç›˜æ— æ³•è¯†åˆ«ï¼‰ ä¸åŒç½‘æ®µè®¾å¤‡æ— æ³•äº’é€šOVM æ— æ³•æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜æŠ¥é”™ï¼šThe filesystem label contains blanks. Please remove them by renaming the filesystem to be able to mount it. ç§»åŠ¨ç¡¬ç›˜åé‡Œæœ‰ç©ºæ ¼ï¼Œæ’åˆ° Windows ä¸Šé‡å‘½åä¸€ä¸‹å³å¯ã€‚ ifconfig not found12# ifconfigsudo apt install net-tools ll not found123vim ~/.bashrc# æ‰¾åˆ° #alias ll=â€™ls -lâ€™ï¼Œå»æ‰å‰é¢çš„#å°±å¯ä»¥äº†ã€‚source ~/.bashrc å‚è€ƒ CPU å‹å·è§£è¯»ï¼šæ•™ä½  CPU å‹å·åç¼€æ€ä¹ˆçœ‹ï¼ŸCPU å‹å·åé¢çš„å­—æ¯å’Œæ•°å­—åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ - çŸ¥ä¹ ä»é›¶å¼€å§‹æ­å»º NAS: ç¡¬ä»¶ç¯‡ | Verne in GitHub ä»é›¶æ­å»ºä¸€å° NASï¼šè½¯ä»¶ç¯‡ | Verne in GitHub Intel CPU å‹å·è§£è¯»ä»¥åŠå¦‚ä½•ç²—ç•¥åˆ¤æ–­ Intel CPU çš„æ€§èƒ½ (i3ã€i5ã€i7 ä»¥åŠ CPU çš„ä»£æ•°)_å®æŒ‡åŸå‘³å¼ çš„åšå®¢-CSDN åšå®¢_cpu ä»£æ•° NAS | ç¾¤æ™–å®‰è£… qBittorrent å¥—ä»¶å¹¶ä¼˜åŒ–è®¾ç½®ã€æ›¿æ¢ UIï¼ˆé docker å®‰è£…ï¼‰ | é†‰æ¸”å°ç«™ Docker ä¸­å›½æº - ç®€ä¹¦ é‡‘ç‰Œ é“œç‰Œ ä»€ä¹ˆåŒºåˆ«å‘€ï¼Ÿ - ç”µæº - Antec ç½‘ç«™ æœºÂ·ç§‘æ™®è´´ï¼šç”µè„‘ç”µæºé‡‘ã€é“¶ã€é“œç‰Œåˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ_é“œç‰Œç”µæºå’Œé‡‘ç‰Œç”µæºçš„åŒºåˆ« - è°ƒè‰²ç›˜ç½‘ç»œ ã€éæ¨¡ç»„ç”µæºï¼ŒåŠæ¨¡ç»„ç”µæºï¼Œå…¨æ¨¡ç»„ç”µæºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿã€‘ - çŸ¥ä¹ ç”µæºå…¨æ¨¡ç»„å’Œéæ¨¡ç»„ç©¶ç«Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ_ç”µè„‘ç”µæº_ä»€ä¹ˆå€¼å¾—ä¹° æµ…è°ˆç»„è£…æœºæœºç®±çš„é€‰æ‹©ï¼ˆç¯‡ä¸€ï¼šå¤§å°ï¼‰ - çŸ¥ä¹ å“ªç¨® PC æ©Ÿç®±å°ºå¯¸æœ€é©åˆæ‚¨çš„ä¸‹ä¸€å€‹ç‰ˆæœ¬ï¼Ÿ - HowThere 199 å…ƒé£å†·/æ°´å†·æ•£çƒ­å™¨ç®€å•å¯¹æ¯”ï¼šè°æ‰æ˜¯ä½ çš„çˆ± - è¶…èƒ½ç½‘ ã€æ•™ç¨‹ã€‘èœ—ç‰›æ˜Ÿé™…å®‰è£…å¼€æº NAS ç³»ç»Ÿ Openmediavault åŠåˆå§‹åŒ–é…ç½®ï¼ˆå¸æ³¢å›¾ï¼‰â€”â€”OMV ç³»åˆ—æ•™ç¨‹ 01_å“”å“©å“”å“©_bilibili How to configure Jackett plugin Â· qbittorrent/search-plugins Wiki å®‰è£… NAS Toolsï¼Œæ‰“é€ è‡ªåŠ¨åŒ–è§‚å½±ã€è¿½å‰§ç³»ç»Ÿï¼ŒNAS åª’ä½“åº“æ•´ç†å·¥å…·ï¼Œå¨è”é€š Docker ç‰ˆ NAS Tools å®‰è£…æ•™ç¨‹~feat.å¨è”é€š HS 264_å“”å“©å“”å“©_bilibili Home | hlink","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"NAS","slug":"NAS","permalink":"http://example.com/tags/NAS/"},{"name":"æ”’æœº","slug":"æ”’æœº","permalink":"http://example.com/tags/%E6%94%92%E6%9C%BA/"}]},{"title":"Linux ä¸‹ä½¿ç”¨ Clash ä½œä»£ç†å¹¶é…ç½®å¼€æœºå¯åŠ¨","slug":"Linuxä¸‹ä½¿ç”¨Clashä½œä»£ç†å¹¶é…ç½®å¼€æœºå¯åŠ¨","date":"2022-09-10T02:03:25.000Z","updated":"2022-10-15T03:08:16.455Z","comments":true,"path":"2022/09/10/Linuxä¸‹ä½¿ç”¨Clashä½œä»£ç†å¹¶é…ç½®å¼€æœºå¯åŠ¨/","link":"","permalink":"http://example.com/2022/09/10/Linux%E4%B8%8B%E4%BD%BF%E7%94%A8Clash%E4%BD%9C%E4%BB%A3%E7%90%86%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/","excerpt":"","text":"ä¸‹è½½å®‰è£…å‰å¾€ä¸‹è½½é¡µé¢ï¼Œé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ï¼ŒLinux ä¸€èˆ¬ä¸‹è½½linux-amd64ç‰ˆæœ¬ã€‚ 123gunzip clash-linux-amd64-v1.11.8.gzsudo mv clash-linux-amd64-v1.11.8 /usr/local/bin/clashsudo chmod +x /usr/local/bin/clash åˆæ­¥ä½¿ç”¨123clash-linux-amd64-v1.11.8 -f ä»è®¢é˜…å•†é‚£è·å–çš„é…ç½®æ–‡ä»¶.ymal -d .git clone https://github.com/twbs/bootstrap.git --config &quot;http.proxy=127.0.0.1:7890&quot; # å³å¯æ­£å¸¸ä¸‹è½½ å¼€æœºå¯åŠ¨123cd ~sudo cp /usr/local/bin/clash /etc/sudo vim /etc/systemd/system/clash.service æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå¹¶ä¿å­˜ï¼š 123456789[Unit]Description=Clash Daemon[Service]ExecStart=/usr/local/bin/clash -f /etc/clash/è®¢é˜…çš„é…ç½®æ–‡ä»¶.yaml -d /etc/clash/Restart=on-failure[Install]WantedBy=multi-user.target å¯ç”¨ clash æœåŠ¡ 12sudo systemctl enable clash.service å¯åŠ¨ clash æœåŠ¡ 12sudo systemctl start clash.service æ­¤å¤–ä¹Ÿå¯ä»¥åœæ­¢æˆ–è€…ç¦ç”¨ clash æœåŠ¡ 123sudo systemctl stop clash.servicesudo systemctl disable clash.service æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š 1sudo systemctl status clash æŸ¥çœ‹ clash æœåŠ¡æ—¥å¿— 1journalctl -e -u clash.service","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"Clash","slug":"Clash","permalink":"http://example.com/tags/Clash/"}]},{"title":"è§£å†³ No module named 'ConfigParser'","slug":"è§£å†³No-module-named-ConfigParser","date":"2022-09-05T07:43:20.000Z","updated":"2022-10-15T02:59:01.841Z","comments":true,"path":"2022/09/05/è§£å†³No-module-named-ConfigParser/","link":"","permalink":"http://example.com/2022/09/05/%E8%A7%A3%E5%86%B3No-module-named-ConfigParser/","excerpt":"","text":"","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"http://example.com/tags/Python/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Linux ç»ˆç«¯å›è½¦å˜æˆ^M","slug":"Linuxç»ˆç«¯å›è½¦å˜æˆ-M","date":"2022-09-05T07:37:58.000Z","updated":"2022-10-15T03:14:29.335Z","comments":true,"path":"2022/09/05/Linuxç»ˆç«¯å›è½¦å˜æˆ-M/","link":"","permalink":"http://example.com/2022/09/05/Linux%E7%BB%88%E7%AB%AF%E5%9B%9E%E8%BD%A6%E5%8F%98%E6%88%90-M/","excerpt":"","text":"è§£å†³æ–¹æ³•ç»ˆç«¯æ‰§è¡Œï¼š 1stty sane å‚è€ƒcommand line - Pressing enter produces ^M instead of a newline - Ask Ubuntu","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Linux åˆ‡æ¢ä¸åŒ Python ç‰ˆæœ¬","slug":"Linuxåˆ‡æ¢ä¸åŒPythonç‰ˆæœ¬","date":"2022-09-05T07:31:27.000Z","updated":"2022-10-15T02:59:01.461Z","comments":true,"path":"2022/09/05/Linuxåˆ‡æ¢ä¸åŒPythonç‰ˆæœ¬/","link":"","permalink":"http://example.com/2022/09/05/Linux%E5%88%87%E6%8D%A2%E4%B8%8D%E5%90%8CPython%E7%89%88%E6%9C%AC/","excerpt":"","text":"","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Python","slug":"Python","permalink":"http://example.com/tags/Python/"}]},{"title":"HEXO åšå®¢åµŒå…¥ PDF","slug":"HEXOåšå®¢åµŒå…¥PDF","date":"2022-09-03T09:01:48.000Z","updated":"2022-10-15T03:14:29.247Z","comments":true,"path":"2022/09/03/HEXOåšå®¢åµŒå…¥PDF/","link":"","permalink":"http://example.com/2022/09/03/HEXO%E5%8D%9A%E5%AE%A2%E5%B5%8C%E5%85%A5PDF/","excerpt":"","text":"æ•ˆæœ ä¸‹è½½ pdf.jså‰å¾€å®˜ç½‘ä¸‹è½½pdf.jsã€‚ ä¸ºäº†ä¿è¯å…¼å®¹æ€§ï¼Œå»ºè®®ä¸‹è½½æ—§ç‰ˆï¼š æ·»åŠ  pdfjs åˆ°ä¸»é¢˜ä¸­å°†ä¸‹è½½æ–‡ä»¶å¤¹å‘½åä¸º pdfjsï¼Œæ‹·è´åˆ° themes/fluid/source/myjs ä¸­ã€‚myjsç›®å½•ä¸ºè‡ªå·±æ–°å»ºç›®å½•ã€‚å¹¶å°†è¯¥ç›®å½•skip_renderã€‚ æ‰“å¼€ HEXO çš„é…ç½®æ–‡ä»¶ï¼ˆä¸æ˜¯ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼‰_config.ymlï¼Œæœç´¢skip_renderï¼Œé…ç½®å¦‚ä¸‹ï¼š 1skip_render: [myjs/**] å¦‚æœä¸é…ç½®è¯¥é€‰é¡¹ï¼ŒåµŒå…¥çš„ PDF å°†ä¼šå¸¦æœ‰åšå®¢ä¸»é¢˜è¾¹æ¡†ã€‚å¦‚å›¾ï¼š ä¿®æ”¹ viewer.jsç›´æ¥ä½¿ç”¨ä¸‹è½½çš„æ–‡ä»¶ä¼šæŠ¥é”™ï¼š 1Error: file origin does not match viewer&#x27;s æ³¨é‡Šweb/viewer.jsæ–‡ä»¶ä¸­çš„ç›¸åº”å†…å®¹ï¼š ä½¿ç”¨æ–¹æ³•åœ¨ Markdown æ–‡æ¡£ä¸­ä½¿ç”¨ &lt;iframe&gt; æ§ä»¶é…åˆpdf.js åº“å®Œæˆ pdf æ˜¾ç¤º 1&lt;iframe src=&#x27;/myjs/pdfjs/web/viewer.html?file=&lt;src-to-pdf&gt;&#x27; style=&#x27;width:100%;height:100%&#x27;&gt;&lt;/iframe&gt; &lt;src-to-pdf&gt;ï¼šéœ€è¦æ˜¾ç¤ºçš„ pdf æ–‡ä»¶çš„é“¾æ¥ /myjs/pdfjs/web/viewer.htmlï¼šæ”¹ä¸ºè‡ªå·±çš„ pdfjs ç›®å½• å‚è€ƒ Fluid -3- pdf.js PCï¼Œç§»åŠ¨ç«¯æŸ¥çœ‹ PDF - åˆè§è‹å²š","categories":[],"tags":[{"name":"HEXO","slug":"HEXO","permalink":"http://example.com/tags/HEXO/"}]},{"title":"RISC-V å…¥é—¨ - ç³»ç»Ÿè°ƒç”¨","slug":"RISC-Vå…¥é—¨-ç³»ç»Ÿè°ƒç”¨","date":"2022-08-29T05:16:03.000Z","updated":"2022-10-15T03:14:29.567Z","comments":true,"path":"2022/08/29/RISC-Vå…¥é—¨-ç³»ç»Ÿè°ƒç”¨/","link":"","permalink":"http://example.com/2022/08/29/RISC-V%E5%85%A5%E9%97%A8-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/","excerpt":"","text":"ç”¨æˆ·æ€ä¸å†…æ ¸æ€ç›®å‰ä¸ºæ­¢çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯è¿è¡Œåœ¨ Machine æ¨¡å¼ä¸‹ï¼Œä½†æ˜¯åœ¨å“ªå†³å®šç¨‹åºè¿è¡Œåœ¨ä»€ä¹ˆæ¨¡å¼ä¸‹çš„å‘¢ï¼Ÿ åœ¨å­¦ä¹ æŠ¢å å¼å¤šä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬æœ‰äº†åˆ›å»ºä»»åŠ¡çš„æ¦‚å¿µï¼Œåœ¨æ±‡ç¼–ä»£ç ä¸­æœ‰è¿™ä¹ˆä¸€æ®µï¼Œä½¿ç”¨åˆ°äº†mstatuså¯„å­˜å™¨ï¼š 123456789# Notice: default mstatus is 0# Set mstatus.MPP to 3, so we still run in Machine mode after MRET.# Set mstatus.MPIE to 1, so MRET will enable the interrupt.li t0, 3 &lt;&lt; 11 | 1 &lt;&lt; 7csrr a1, mstatus # a1 = mstatusor t0, t0, a1 # t0 = t0 | a1csrw mstatus, t0 # mstatus = t0j start_kernel # hart 0 jump to c mretè¿”å›åï¼Œæ˜¯æ ¹æ®å¯„å­˜å™¨mstatusçš„MPPæ¥å†³å®šæ¥æ¥æ¥æ˜¯å¤„äºä»€ä¹ˆæ¨¡å¼ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢å°†MPPé…ç½®ä¸º3ï¼Œ MPPçš„åŠŸèƒ½æ˜¯ è®°å½• Machine æ¨¡å¼ä¸‹ï¼Œå‰ä¸€ä¸ªï¼Œç‰¹æƒçº§ã€‚è¿™é‡Œè§£å®ç°äº†åœ¨mretä¹‹åå°†æ¨¡å¼è®¾ç½®ä¸º Machine æ¨¡å¼ï¼ˆ3ï¼‰ã€‚ å› ä¸ºmstatusä¸Šç”µåé»˜è®¤ä¸ºå…¨ 0ï¼Œæ‰€ä»¥å¦‚æœä¸å¯¹å…¶è®¾ç½®ï¼Œé‚£ä¹ˆåœ¨mretä¹‹åï¼Œå°±æ˜¯è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼ˆ0ï¼‰ã€‚ å¦‚æœæƒ³è®©ç¨‹åºè·‘åœ¨ç”¨æˆ·æ€ï¼Œåªè¦ä¸å¯¹é½è®¾ç½®ï¼Œä¿æŒé»˜è®¤å³å¯ï¼š 123456789# Notice: default mstatus is 0# Set mstatus.MPP to 3, so we still run in Machine mode after MRET.# Set mstatus.MPIE to 1, so MRET will enable the interrupt.li t0, 1 &lt;&lt; 7csrr a1, mstatus # a1 = mstatusor t0, t0, a1 # t0 = t0 | a1csrw mstatus, t0 # mstatus = t0j start_kernel # hart 0 jump to c ä¸ºä»€ä¹ˆéœ€è¦ç³»ç»Ÿè°ƒç”¨ï¼Ÿå› ä¸ºåœ¨ç”¨æˆ·æ€ä¸€äº›èµ„æºï¼ˆå¯„å­˜å™¨ï¼‰çš„è®¿é—®æ˜¯å—é™çš„ï¼Œæ‰€ä»¥éœ€è¦å°è£…ä¸€äº›å‡½æ•°ï¼Œè¿™äº›å‡½æ•°é‡Œä¼šè¿›è¡Œæ¨¡å¼åˆ‡æ¢ï¼Œç„¶åè®¿é—®éœ€è¦çš„èµ„æºã€‚ é‚£ä¹ˆå¦‚ä½•è¿›è¡Œæ¨¡å¼çš„åˆ‡æ¢å‘¢ï¼Ÿè¿™å°±éœ€è¦ecallæŒ‡ä»¤ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯è§¦å‘äº†å¼‚å¸¸ï¼Œå°±ä¼šè¿›å…¥åˆ° Machine æ¨¡å¼å¤„ç†å¼‚å¸¸ï¼Œåœ¨ Machine æ¨¡å¼ä¸‹å°±ç›¸å½“äºåœ¨å†…æ ¸æ€äº†ï¼Œå°±æ²¡æœ‰è®¿é—®èµ„æºçš„é™åˆ¶äº†ã€‚ ç³»ç»Ÿæ¨¡å¼çš„åˆ‡æ¢ ECALLæŒ‡ä»¤å®é™…å°±æ˜¯ä¸»åŠ¨è§¦å‘å¼‚å¸¸ï¼Œæ ¹æ®ECALLçš„æƒé™çº§åˆ«äº§ç”Ÿä¸åŒçš„å¼‚å¸¸ç ï¼Œå¦‚ä¸‹å›¾ï¼š ä» User æ¨¡å¼è°ƒç”¨ECALLå¼‚å¸¸ç ç­‰äº 8ï¼Œä» Supervisor æ¨¡å¼è°ƒç”¨å¼‚å¸¸ç ç­‰äº 9ï¼Œä» Machine æ¨¡å¼è°ƒç”¨å¼‚å¸¸ç ç­‰äº 11ã€‚ å¼‚å¸¸äº§ç”Ÿæ—¶epcå¯„å­˜å™¨çš„å€¼å­˜æ”¾çš„æ˜¯ECALLæŒ‡ä»¤æœ¬èº«çš„åœ°å€ã€‚ å¦‚æœæƒ³è§¦å‘å®Œå¼‚å¸¸æ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œéœ€è¦åœ¨å¼‚å¸¸å¤„ç†é€»è¾‘é‡ŒæŠŠ epc å¯„å­˜å™¨å€¼æ”¹ä¸ºä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼Œå¦åˆ™ä¼šè¿›å…¥æ­»å¾ªç¯ã€‚ ç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡Œæµç¨‹ ç³»ç»Ÿè°ƒç”¨çš„ä¼ å‚ç³»ç»Ÿè°ƒç”¨ä½œä¸ºæ“ä½œç³»ç»Ÿçš„å¯¹å¤–æ¥å£ï¼Œç”±æ“ä½œç³»ç»Ÿçš„å®ç°è´Ÿè´£å®šä¹‰ã€‚å‚è€ƒ Linux çš„ç³»ç»Ÿè°ƒç”¨ï¼ŒRVOS å®šä¹‰ç³»ç»Ÿè°ƒç”¨çš„ä¼ å‚è§„åˆ™å¦‚ä¸‹ï¼š ç³»ç»Ÿè°ƒç”¨å·æ”¾åœ¨a7ä¸­ ç³»ç»Ÿè°ƒç”¨å‚æ•°ä½¿ç”¨a0-a5 è¿”å›å€¼ä½¿ç”¨a0 ç³»ç»Ÿè°ƒç”¨çš„å°è£…","categories":[{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"}]},{"title":"æµè§ˆå™¨ä»»åŠ¡æ å¤šçª—å£å‘½å","slug":"æµè§ˆå™¨ä»»åŠ¡æ å¤šçª—å£å‘½å","date":"2022-08-28T00:56:28.000Z","updated":"2022-10-15T03:14:29.752Z","comments":true,"path":"2022/08/28/æµè§ˆå™¨ä»»åŠ¡æ å¤šçª—å£å‘½å/","link":"","permalink":"http://example.com/2022/08/28/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%BB%E5%8A%A1%E6%A0%8F%E5%A4%9A%E7%AA%97%E5%8F%A3%E5%91%BD%E5%90%8D/","excerpt":"","text":"éœ€æ±‚å·¥ä½œæ—¶éœ€è¦å¼€å¯å¤šä¸ªæ ‡ç­¾é¡µï¼Œåœ¨åŒä¸€ä¸ªçª—å£é‡Œæ‰“å¼€åˆæŸ¥æ‰¾ä¸å˜ï¼Œäºæ˜¯åˆ†ä¸ºå¤šä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£é‡Œçš„æ ‡ç­¾é¡µå·¥ä½œå†…å®¹ä¸€è‡´ã€‚å¦‚æ‰€æœ‰æ–‡æ¡£æ”¾åœ¨ä¸€ä¸ªçª—å£ï¼Œéœ€è¦ç™¾åº¦ï¼ŒGoogle æœç´¢æ—¶ç”¨å•ç‹¬çš„ä¸€ä¸ªé—®é¢˜æœç´¢çª—å£ã€‚è¿™æ ·å°±é¿å…æ¯æ¬¡æ‰“å¼€çª—å£éƒ½è¦æŒ¨ä¸ªç‚¹ä¸€éã€‚ Edge è®¾ç½®æ‰“å¼€è®¾ç½®-æ›´å¤šå·¥å…· - ä¸ºçª—å£å‘½åã€‚å³å¯é‡å‘½åçª—å£ Chrome è®¾ç½®åŒä¸Šï¼Œè·¯å¾„åŸºæœ¬ä¸€è‡´éƒ½æ˜¯åœ¨è®¾ç½®-æ›´å¤šå·¥å…·ä¸­ã€‚ å‡çº§ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°çª—å£å¤ªå¤šä»»åŠ¡æ å¤ªæŒ¤äº†ï¼ŒChrome è‡ªèº«æœ‰æ ‡ç­¾åˆ†ç»„çš„åŠŸèƒ½ï¼Œå…¶å®å®Œå…¨å¯ä»¥æ›¿ä»£çª—å£ã€‚ä¹Ÿå¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚å°‘æ•°æ´¾æœ‰ä»‹ç»ï¼Œå°±ä¸é€ è½®å­äº†ã€‚ä½“éªŒä¸€æ®µæ—¶é—´ç¡®å®å¾ˆå¥½ç”¨ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://example.com/tags/%E6%95%88%E7%8E%87/"},{"name":"æ¨è","slug":"æ¨è","permalink":"http://example.com/tags/%E6%8E%A8%E8%8D%90/"}]},{"title":"VSCode ä»»åŠ¡æ å¤šçª—å£å‘½å","slug":"VSCodeä»»åŠ¡æ å¤šçª—å£å‘½å","date":"2022-08-28T00:55:55.000Z","updated":"2022-10-15T03:14:29.579Z","comments":true,"path":"2022/08/28/VSCodeä»»åŠ¡æ å¤šçª—å£å‘½å/","link":"","permalink":"http://example.com/2022/08/28/VSCode%E4%BB%BB%E5%8A%A1%E6%A0%8F%E5%A4%9A%E7%AA%97%E5%8F%A3%E5%91%BD%E5%90%8D/","excerpt":"","text":"è°ƒæ•™èƒŒæ™¯å½“æœ‰å¤šä¸ªé¡¹ç›®åŒæ—¶æ‰“å¼€æ—¶ï¼ŒVSCode çª—å£å¼€å¾—å¤ªå¤šå°±æ‰¾ä¸åˆ°è‡ªå·±æƒ³è¦æ‰“å¼€çš„çª—å£ï¼Œå› ä¸ºçª—å£å‘½åé»˜è®¤æŒ‰ç…§å½“å‰æ‰“å¼€çš„æ–‡ä»¶å‘½åçš„ï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šã€‚å°±éœ€è¦æŒ¨ä¸ªæ‰“å¼€æ‰èƒ½ç¡®å®šè‡ªå·±æƒ³è¦æ‰“å¼€çš„çª—å£ã€‚ å¦‚æœèƒ½æŒ‰ç…§é¡¹ç›®åå‘½åçª—å£å°±ä¼šä¾¿æ·è®¸å¤šï¼Œå¥½åœ¨ VSCode æä¾›é‡å‘½åçš„æ–¹å¼ã€‚åŒæ ·çš„éœ€æ±‚å¯èƒ½åœ¨æµè§ˆå™¨ä¸­ä¹Ÿä¼šé‡åˆ°ï¼Œå¯ä»¥å‚è€ƒæµè§ˆå™¨ä»»åŠ¡æ å¤šçª—å£å‘½å - å¦‚äº‘æ³Šã€‚ ä¿®æ”¹æ–¹å¼File -&gt; Preferences -&gt; Setting æœç´¢ Window: Title æ”¹æˆï¼š 1$&#123;dirty&#125;$&#123;rootName&#125;$&#123;separator&#125;$&#123;activeEditorMedium&#125;$&#123;separator&#125;$&#123;appName&#125; å…¶ä»–å¯ç”¨é…ç½®è¯´æ˜ï¼š 1234567891011121314&quot;$&#123;activeEditorShort&#125;&quot;: æ–‡ä»¶å (ä¾‹å¦‚ myFile.txt)ã€‚&quot;$&#123;activeEditorMedium&#125;&quot;: ç›¸å¯¹äºå·¥ä½œåŒºæ–‡ä»¶å¤¹çš„æ–‡ä»¶è·¯å¾„ (ä¾‹å¦‚, myFolder/myFileFolder/myFile.txt)ã€‚&quot;$&#123;activeEditorLong&#125;&quot;: æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ (ä¾‹å¦‚ /Users/Development/myFolder/myFileFolder/myFile.txt)ã€‚&quot;$&#123;activeFolderShort&#125;&quot;: æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹åç§° (ä¾‹å¦‚, myFileFolder)ã€‚&quot;$&#123;activeFolderMedium&#125;&quot;: ç›¸å¯¹äºå·¥ä½œåŒºæ–‡ä»¶å¤¹çš„ã€åŒ…å«æ–‡ä»¶çš„æ–‡ä»¶å¤¹çš„è·¯å¾„, (ä¾‹å¦‚ myFolder/myFileFolder)ã€‚&quot;$&#123;activeFolderLong&#125;&quot;: æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„å®Œæ•´è·¯å¾„ (ä¾‹å¦‚ /Users/Development/myFolder/myFileFolder)ã€‚&quot;$&#123;folderName&#125;&quot;: æ–‡ä»¶æ‰€åœ¨å·¥ä½œåŒºæ–‡ä»¶å¤¹çš„åç§° (ä¾‹å¦‚ myFolder)ã€‚&quot;$&#123;folderpath&#125;&quot;: æ–‡ä»¶æ‰€åœ¨å·¥ä½œåŒºæ–‡ä»¶å¤¹çš„è·¯å¾„ (ä¾‹å¦‚ /Users/Development/myFolder)ã€‚&quot;$&#123;rootName&#125;&quot;: æ‰“å¼€çš„å·¥ä½œåŒºæˆ–æ–‡ä»¶å¤¹çš„åç§° (ä¾‹å¦‚ myFolder æˆ– myWorkspace)ã€‚&quot;$&#123;rootPath&#125;&quot;: æ‰“å¼€çš„å·¥ä½œåŒºæˆ–æ–‡ä»¶å¤¹çš„æ–‡ä»¶è·¯å¾„ (ä¾‹å¦‚ /Users/Development/myWorkspace)ã€‚&quot;$&#123;appName&#125;&quot;: ä¾‹å¦‚ VS Codeã€‚â€œ$&#123;remoteName&#125;â€: ä¾‹å¦‚ SSH$&#123;dirty&#125;: è¡¨æ˜æ´»åŠ¨ç¼–è¾‘å™¨å…·æœ‰æœªä¿å­˜æ›´æ”¹çš„æ—¶é—´çš„æŒ‡ç¤ºå™¨ã€‚&quot;$&#123;separator&#125;&quot;: ä¸€ç§æ¡ä»¶åˆ†éš”ç¬¦ (&quot;-&quot;), ä»…åœ¨è¢«åŒ…å«å€¼æˆ–é™æ€æ–‡æœ¬çš„å˜é‡åŒ…å›´æ—¶æ˜¾ç¤º","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"è§£å†³ ERROR Could not install packages due to an EnvironmentError æ‹’ç»è®¿é—®","slug":"è§£å†³ERROR-Could-not-install-packages-due-to-an-EnvironmentError-æ‹’ç»è®¿é—®","date":"2022-08-27T13:55:26.000Z","updated":"2022-10-15T03:00:30.004Z","comments":true,"path":"2022/08/27/è§£å†³ERROR-Could-not-install-packages-due-to-an-EnvironmentError-æ‹’ç»è®¿é—®/","link":"","permalink":"http://example.com/2022/08/27/%E8%A7%A3%E5%86%B3ERROR-Could-not-install-packages-due-to-an-EnvironmentError-%E6%8B%92%E7%BB%9D%E8%AE%BF%E9%97%AE/","excerpt":"","text":"ä¿ç•™ç°åœºå‡çº§pipæ—¶å‡ºç°æŠ¥é”™ï¼š è§£å†³æ–¹æ³•åŠ ä¸Š--user 1python -m pip install --upgrade pip --user","categories":[],"tags":[{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"ç¼–ç å­—ä½“ä¸é˜…è¯»å­—ä½“æ¨è","slug":"ç¼–ç å­—ä½“ä¸é˜…è¯»å­—ä½“æ¨è","date":"2022-08-27T11:59:58.000Z","updated":"2022-10-15T03:14:29.783Z","comments":true,"path":"2022/08/27/ç¼–ç å­—ä½“ä¸é˜…è¯»å­—ä½“æ¨è/","link":"","permalink":"http://example.com/2022/08/27/%E7%BC%96%E7%A0%81%E5%AD%97%E4%BD%93%E4%B8%8E%E9%98%85%E8%AF%BB%E5%AD%97%E4%BD%93%E6%8E%A8%E8%8D%90/","excerpt":"","text":"ç¼–ç å­—ä½“ç¼–ç å­—ä½“é¦–è¦åŸåˆ™ï¼šç­‰å®½ï¼Œç­‰å®½ï¼Œè¿˜æ˜¯ TMD ç­‰å®½ï¼ JetBrains Mono Hack Source Code Pro Fira Mono Consolasä¿åº•å­—ä½“ï¼ŒåŸºæœ¬ä¸Š Windows ç”µè„‘éƒ½æœ‰é¢„è£…ã€‚ é˜…è¯»å­—ä½“çœ‹å¤šäº†é»‘ä½“ï¼Œå…¶å®æœ‰è¡¬çº¿çš„å®‹ä½“æ‰èƒ½ä½“ç°ä¸­æ–‡æ–‡å­—ä¹‹ç¾ã€‚ æ€æºå®‹ä½“ åæ–‡ä¸­å®‹ ä¸­æ–‡ç­‰å®½å­—ä½“å¯¹äºæ—¢æƒ³è¦æ»¡è¶³ç¼–ç¨‹å­—ä½“åˆæƒ³è¦ä¸­æ–‡ä¹¦å†™çš„ï¼Œæœ‰å‡ æ¬¾ç­‰å®½ä¸­æ–‡å­—ä½“ä¹Ÿä¸é”™ã€‚ Sarasa Gothic / æ›´çº±é»‘ä½“ æ€æºé»‘ä½“/Source Han Sans","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"æ¨è","slug":"æ¨è","permalink":"http://example.com/tags/%E6%8E%A8%E8%8D%90/"},{"name":"å­—ä½“","slug":"å­—ä½“","permalink":"http://example.com/tags/%E5%AD%97%E4%BD%93/"}]},{"title":"å¤šç‰ˆæœ¬ Python ä½¿ç”¨ pip å®‰è£… package é—®é¢˜","slug":"å¤šç‰ˆæœ¬Pythonä½¿ç”¨pipå®‰è£…packageé—®é¢˜","date":"2022-08-27T07:30:58.000Z","updated":"2022-10-15T03:14:29.680Z","comments":true,"path":"2022/08/27/å¤šç‰ˆæœ¬Pythonä½¿ç”¨pipå®‰è£…packageé—®é¢˜/","link":"","permalink":"http://example.com/2022/08/27/%E5%A4%9A%E7%89%88%E6%9C%ACPython%E4%BD%BF%E7%94%A8pip%E5%AE%89%E8%A3%85package%E9%97%AE%E9%A2%98/","excerpt":"","text":"æœ€ç®€å•çš„æ–¹å¼ä½¿ç”¨å‚æ•°æŒ‡å®šå®‰è£…è·¯å¾„ï¼š 1pip install -t D:\\python3.5(32bit)\\Lib\\site-packages numpy å¨å¨å¨å¦‚æœç”µè„‘ä¸Šå®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„Pythonçš„è¯ï¼Œåœ¨éœ€è¦ä½¿ç”¨pipå®‰è£…æ–°packageæ—¶ï¼Œå°±ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼šæˆ‘æŠŠpackageå®‰è£…åˆ°å“ªäº†ï¼Ÿ å› ä¸ºæ¯ä¸ªç‰ˆæœ¬çš„ Python æ˜¯æœ‰è‡ªå·±ç‹¬ç«‹çš„pipï¼Œä¹Ÿæœ‰ç‹¬ç«‹çš„libç›®å½•çš„ï¼Œç®¡ç†çš„åŒ…ä¹Ÿå„ä¸åŒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨é»˜è®¤çš„pipå‘½ä»¤å®‰è£…çš„ä½ç½®ï¼Œå°±æ˜¯é»˜è®¤çš„pythonä½ç½®ã€‚ æ¯”å¦‚æˆ‘åœ¨ç»ˆç«¯æ•²ä¸‹pythonï¼Œä½¿ç”¨çš„æ˜¯python3.6é‚£ä¹ˆå®‰è£…çš„packageå°±ä¼šåœ¨C:\\Python36\\Lib\\site-packagesï¼ˆæ ¹æ®è‡ªå·±å®‰è£… Python çš„è·¯å¾„ç¨æœ‰åŒºåˆ«ï¼‰ã€‚ æƒ…æ™¯ä¸€ï¼šå®‰è£…çš„éƒ½æ˜¯ Python3.x ç‰ˆæœ¬æœ‰æ—¶å€™ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘å‡†å¤‡è·‘çš„é¡¹ç›®åªèƒ½ç”¨python3.8ï¼Œæˆ‘å¾—æŠŠpackageå®‰è£…åˆ°python38é‡Œï¼Œæ€ä¹ˆåŠï¼Ÿ æ–¹æ³• 1æŠŠå…¶ä¸­ä¸€ä¸ªpythonç¯å¢ƒå˜é‡åˆ æ‰ï¼Œç•™ä¸‹ï¼ˆå¦‚æœæ²¡æœ‰éœ€è¦æ·»åŠ ï¼‰python38çš„è·¯å¾„å’Œscriptæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š 1python -m pip install xxxxx å› ä¸ºé»˜è®¤Pythonå·²ç»è¢«ä¿®æ”¹ä¸ºpython38ã€‚ æ–¹æ³• 2ä½¿ç”¨æ–‡ç« å¼€å¤´çš„æ–¹å¼ï¼Œæœ€æ–¹ä¾¿ï¼Œç›´æ¥æŒ‡å®š python å…¨å±€è·¯å¾„ 1pip install -t D:\\python3.5(32bit)\\Lib\\site-packages numpy æƒ…æ™¯äºŒï¼šå®‰è£… Python2.x ä¸ Python3.xPython3.x ä½¿ç”¨ï¼š 1py -3 -m pip install numpy Python2.x ä½¿ç”¨ï¼š 1py -2 -m pip install numpy","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"http://example.com/tags/Python/"},{"name":"pip","slug":"pip","permalink":"http://example.com/tags/pip/"}]},{"title":"è§£å†³ Unable to åŠ è½½ picture or PDF file","slug":"è§£å†³Unable-to-load-picture-or-PDF-file","date":"2022-08-26T11:22:24.000Z","updated":"2022-10-15T03:14:29.844Z","comments":true,"path":"2022/08/26/è§£å†³Unable-to-load-picture-or-PDF-file/","link":"","permalink":"http://example.com/2022/08/26/%E8%A7%A3%E5%86%B3Unable-to-load-picture-or-PDF-file/","excerpt":"","text":"ä¿ç•™ç°åœº 1Unable to load picture or PDF file &#x27;xxxxxx&#x27; &lt;to be read again&gt; xxxx æ¢ç©¶åŸå› å›¾ç‰‡é“¾æ¥é”™è¯¯ï¼Œè½¬æ¢ PDF è¿‡ç¨‹ä¸­ä¼šå…ˆä¸‹è½½æ‰€æœ‰å›¾ç‰‡åˆ°AppData/Local/Temp/tex2pdf.****æ–‡ä»¶å¤¹é‡Œï¼Œå› ä¸ºæ— æ³•æ­£å¸¸ä¸‹è½½å›¾ç‰‡ï¼Œæ‰€æœ‰æŠ¥é”™ã€‚æ£€æŸ¥å›¾ç‰‡é“¾æ¥æ˜¯å¦æœ‰æ•ˆã€‚ è§£å†³æ–¹æ³•æ£€æŸ¥å›¾ç‰‡é“¾æ¥æ˜¯å¦æœ‰æ•ˆã€‚","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"},{"name":"Markdown","slug":"Markdown","permalink":"http://example.com/tags/Markdown/"},{"name":"Pandoc","slug":"Pandoc","permalink":"http://example.com/tags/Pandoc/"},{"name":"PDF","slug":"PDF","permalink":"http://example.com/tags/PDF/"}]},{"title":"VSCodeæœç´¢ç»“æœ/åŒ¹é…é«˜äº®","slug":"VSCodeæœç´¢ç»“æœ-åŒ¹é…é«˜äº®","date":"2022-08-26T08:42:50.000Z","updated":"2022-10-15T03:14:29.597Z","comments":true,"path":"2022/08/26/VSCodeæœç´¢ç»“æœ-åŒ¹é…é«˜äº®/","link":"","permalink":"http://example.com/2022/08/26/VSCode%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E5%8C%B9%E9%85%8D%E9%AB%98%E4%BA%AE/","excerpt":"","text":"è°ƒæ•™èƒŒæ™¯åœ¨VSCodeä½¿ç”¨æœç´¢/æ›¿æ¢æ—¶ï¼ŒåŒ¹é…çš„å­—ç¬¦ä¼šâ€œé«˜äº®â€ï¼ˆé«˜äº®ä¸ªå±ï¼‰ï¼ŒçŸ¥é“è‡ªå·±å½“å‰æœåˆ°åˆ°ä»€ä¹ˆä½ç½®ï¼Œå¦‚æœåŒ¹é…å­—ç¬¦è¾ƒå°‘è¿˜å¥½ï¼Œå¦‚æœåŒ¹é…å¤ªå¤šï¼Œé»˜è®¤çš„é«˜äº®å°±å¾ˆéš¾å‘ç°å½“å‰å·²ç»æœç´¢åˆ°ä»€ä¹ˆä½ç½®äº†ã€‚æ¯”å¦‚æˆ‘å½“å‰åœ¨æœç´¢â€œæœç´¢â€è¿™ä¸¤ä¸ªå­—ï¼š å¤§å®¶è¿˜èƒ½çœ‹åˆ°æˆ‘å½“å‰æœç´¢åˆ°å“ªäº†å—ï¼Ÿ ä½†æ˜¯å¦‚æœè®¾ç½®æˆè¿™æ ·å‘¢ï¼Ÿ é…ç½®æœç´¢åŒ¹é…æ—¶é«˜äº®é¢œè‰² æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š 123&quot;workbench.colorCustomizations&quot;: &#123; &quot;editor.findMatchBackground&quot;: &quot;#ff0000&quot;,&#125; è¡¨ç¤ºæœç´¢åŒ¹é…æ—¶é«˜äº®ï¼Œé«˜äº®é¢œè‰²ä¸ºçº¢è‰²ã€‚è‡ªå·±å¯ä»¥é€‰æ‹©åˆé€‚çš„é¢œè‰²ã€‚ æœç´¢ç»“æœé«˜äº®ä¸ä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œæœç´¢æ—¶ä¼šé«˜äº®æ‰€æœ‰çš„ç»“æœï¼Œä½†æ˜¯ç‚¹å‡»ç®­å¤´åŒ¹é…åˆ°å½“å‰ç»“æœæ—¶å°±æ˜¯ä¸Šé¢çš„é«˜äº®ï¼Œå…¶ä½™æœªåŒ¹é…çš„çŠ¶æ€å°±æ˜¯ä¸‹é¢çš„é«˜äº®ï¼š 123&quot;workbench.colorCustomizations&quot;: &#123; &quot;editor.findMatchHighlightBackground&quot;: &quot;#ff00ff&quot;,&#125; é€‰æ‹©æ—¶é¢œè‰² 123&quot;workbench.colorCustomizations&quot;: &#123; &quot;editor.selectionBackground&quot;: &quot;#2f00ff&quot;,&#125; èŒƒå›´æœç´¢æ—¶èƒŒæ™¯é¢œè‰²æœ‰æ—¶å€™æœç´¢ä¸æ˜¯å…¨å±€æœç´¢ï¼Œæ˜¯åœ¨è‡ªå·±é€‰ä¸­çš„èŒƒå›´å†…æœç´¢ï¼Œé‚£è¿™ä¸ªèŒƒå›´ä¹Ÿæ˜¯å¯ä»¥é«˜äº®çš„ï¼Œå¼€å¯èŒƒå›´æœç´¢éœ€è¦ç‚¹å‡»æœç´¢æ¡†çš„æŒ‰é’®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 1234&quot;workbench.colorCustomizations&quot;: &#123; &quot;editor.findMatchHighlightBackground&quot;: &quot;#ff00ff&quot;, &quot;editor.findRangeHighlightBackground&quot;: &quot;#ff9900&quot;&#125;","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"RISC-V å…¥é—¨ - ä»»åŠ¡åˆ‡æ¢ä¸é”","slug":"RISC-Vå…¥é—¨-ä»»åŠ¡åˆ‡æ¢ä¸é”","date":"2022-08-26T07:15:34.000Z","updated":"2022-10-15T03:14:29.560Z","comments":true,"path":"2022/08/26/RISC-Vå…¥é—¨-ä»»åŠ¡åˆ‡æ¢ä¸é”/","link":"","permalink":"http://example.com/2022/08/26/RISC-V%E5%85%A5%E9%97%A8-%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2%E4%B8%8E%E9%94%81/","excerpt":"","text":"ä»»åŠ¡åˆ‡æ¢ä»»åŠ¡ç®€ä»‹å¤šä»»åŠ¡ä¸ä¸Šä¸‹æ–‡ä»»åŠ¡å°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤æ‰§è¡Œæµã€‚ å¦‚æœæœ‰å¤šä¸ª HARTï¼Œé‚£å°±å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªæŒ‡ä»¤æ‰§è¡Œæµã€‚ åä½œå¼å¤šä»»åŠ¡ åä½œå¼ç¯å¢ƒä¸‹ï¼Œä¸‹ä¸€ä¸ªä»»åŠ¡è¢«è°ƒåº¦çš„å‰ææ˜¯å½“å‰ä»»åŠ¡ä¸»åŠ¨æ”¾å¼ƒå¤„ç†å™¨ã€‚ æŠ¢å å¼å¤šä»»åŠ¡ æŠ¢å å¼ç¯å¢ƒä¸‹ï¼Œæ“ä½œç³»ç»Ÿå®Œå…¨å†³å®šä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å‰¥å¤ºå½“å‰ä»»åŠ¡å¯¹å¤„ç†å™¨çš„ä½¿ç”¨ï¼Œå°†å¤„ç†å™¨æä¾›ç»™å…¶å®ƒä»»åŠ¡ã€‚ åä½œå¼å¤šä»»åŠ¡ä¸Šä¸‹æ–‡åˆ‡æ¢ åˆ‡æ¢è¿‡ç¨‹éœ€è¦å®Œæˆï¼š ä¿å­˜ä¸Šæ–‡ï¼ˆä¿å­˜ä¸Šä¸€ä¸ªä»»åŠ¡çš„å¯„å­˜å™¨ä¿¡æ¯ï¼‰ æ¢å¤ä¸‹æ–‡ï¼ˆæ¢å¤ä¸‹ä¸€ä¸ªä»»åŠ¡çš„å¯„å­˜å™¨ä¿¡æ¯ï¼‰ CPU ä¸­æœ‰ 32 ä¸ªå¯„å­˜å™¨ï¼Œä¿å­˜å„ç§çŠ¶æ€ï¼Œåœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¸»è¦å…³æ³¨ä¸¤ä¸ªå¯„å­˜å™¨ï¼šra(x1) å­˜æ”¾è¿”å›åœ°å€ï¼Œmscratch ä¸€ä¸ªç‰¹æƒå¯„å­˜å™¨ï¼ŒæŒ‡å‘å½“å‰å¤„ç†çš„ä»»åŠ¡ã€‚ åˆ‡æ¢è¿‡ç¨‹åˆå§‹åŒ–å¯„å­˜å™¨ï¼Œraéƒ½åˆå§‹åŒ–ä¸ºä»»åŠ¡çš„ç¬¬ä¸€æ¡æŒ‡ä»¤åœ°å€ã€‚mscratchå¼€å§‹æŒ‡å‘ Task Aã€‚ Task A ç¨³å®šæ‰§è¡Œï¼Œå½“ä»–æƒ³è¦æ”¾å¼ƒ CPU æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ call swithc_toæŒ‡ä»¤ã€‚æ‰§è¡Œcallçš„è¿‡ç¨‹ä¸­ï¼Œå°±ä¼šæŠŠå½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€æ”¾åˆ° CPU çš„raå¯„å­˜å™¨ã€‚ æ¥ä¸‹é‡Œè·³è½¬åˆ°swithc_toå‡½æ•°æ‰§è¡Œï¼Œè¯¥å‡½æ•°æ˜¯åˆ‡æ¢ä¸Šä¸‹æ–‡çš„æ ¸å¿ƒå‡½æ•°ã€‚é¦–å…ˆä¿å­˜ä¸Šæ–‡ï¼Œå°† CPU ä¸­çš„å¯„å­˜å™¨ä¿¡æ¯å…¨éƒ¨ä¿å­˜ï¼š åˆ‡æ¢mscratchæŒ‡é’ˆåˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡ Task Bï¼š æ¢å¤ä¸‹æ–‡ï¼š å½“swithc_toå‡½æ•°æ‰§è¡Œåˆ°returnæ—¶ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œçš„æŒ‡ä»¤å°±æ˜¯ CPU ä¸­raä¿å­˜çš„é‚£æ¡æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯åœ°å€ä¸ºjæŒ‡ä»¤ï¼Œè¿™å°±æ˜¯ Task B çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œè¿™æ ·å°±å®Œæˆäº†ä»»åŠ¡çš„åˆ‡æ¢ã€‚ æºç åˆ†æåˆ‡æ¢æ ¸å¿ƒå‡½æ•° switch_to1234567891011121314151617181920212223switch_to: csrrw t6, mscratch, t6 # swap t6 and mscratch beqz t6, 1f # Notice: previous task may be NULL reg_save t6 # save context of prev task # æŠŠCPUçš„ä¿¡æ¯ä¿å­˜åˆ°å†…å­˜ # Save the actual t6 register, which we swapped into # mscratch mv t5, t6 # t5 points to the context of current task csrr t6, mscratch # read t6 back from mscratch sw t6, 120(t5) # save t6 with t5 as base1: # switch mscratch to point to the context of the next task csrw mscratch, a0 # Restore all GP registers # Use t6 to point to the context of the new task mv t6, a0 reg_restore t6 # æŠŠå†…å­˜é‡Œçš„ä¿¡æ¯æ¢å¤åˆ°CPU # Do actual context switching. ret åˆ›å»ºå’Œåˆå§‹åŒ–ç¬¬ä¸€å·ä»»åŠ¡ä½¿ç”¨ç»“æ„ä½“contextä¿å­˜ä¸Šä¸‹æ–‡ä¸­å¯„å­˜å™¨çš„ä¿¡æ¯ï¼š 1234567891011121314151617181920212223242526272829303132333435363738struct context &#123; /* ignore x0 */ reg_t ra; reg_t sp; reg_t gp; reg_t tp; reg_t t0; reg_t t1; reg_t t2; reg_t s0; reg_t s1; reg_t a0; reg_t a1; reg_t a2; reg_t a3; reg_t a4; reg_t a5; reg_t a6; reg_t a7; reg_t s2; reg_t s3; reg_t s4; reg_t s5; reg_t s6; reg_t s7; reg_t s8; reg_t s9; reg_t s10; reg_t s11; reg_t t3; reg_t t4; reg_t t5; reg_t t6;&#125;;#define STACK_SIZE 1024uint8_t task_stack[STACK_SIZE];struct context ctx_task; å†™ä¸€ä¸ªä»»åŠ¡å‡½æ•°ï¼ŒåŠŸèƒ½å°±æ˜¯æ¯éš”1000 æ»´ç­”æ‰“å°ä¸€å¥è¯ã€‚ 12345678void user_task0(void)&#123; uart_puts(&quot;Task 0: Created!\\n&quot;); while (1) &#123; uart_puts(&quot;Task 0: Running...\\n&quot;); task_delay(1000); &#125;&#125; åˆå§‹åŒ–ä»»åŠ¡ï¼Œéœ€è¦åˆå§‹åŒ–æ ˆï¼Œå¹¶æŠŠä»»åŠ¡çš„é¦–åœ°å€ä¿å­˜åˆ°contextçš„raå¯„å­˜å™¨ã€‚ 1234567void sched_init()&#123; w_mscratch(0); ctx_task.sp = (reg_t) &amp;task_stack[STACK_SIZE - 1]; ctx_task.ra = (reg_t) user_task0;&#125; åˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªç”¨æˆ·ä»»åŠ¡switch_toå‡½æ•°çš„å‚æ•°å°±æ˜¯ä¸Šä¸‹æ–‡ï¼Œå½“æ‰§è¡Œåˆ°retæ—¶ä¹Ÿå°±åˆ‡æ¢åˆ°äº†user_task0ã€‚ 12345void schedule()&#123; struct context *next = &amp;ctx_task; switch_to(next);&#125; ä»¥ä¸Šæ˜¯å•ä»»åŠ¡çš„æƒ…å†µï¼Œå¦‚æœæ˜¯å¤šä»»åŠ¡æ—¶ï¼Œå°±ç”¨æ•°ç»„ä¿å­˜å¤šä¸ªcontextï¼Œæœ€å¤§æ”¯æŒ 10 ä¸ªä»»åŠ¡ã€‚ 1234#define MAX_TASKS 10#define STACK_SIZE 1024uint8_t task_stack[MAX_TASKS][STACK_SIZE];struct context ctx_tasks[MAX_TASKS]; ä½¿ç”¨ç®€å•çš„æ±‚æ¨¡å–ä½™çš„æ–¹å¼ç¡®å®šä¸‹ä¸€ä¸ªä»»åŠ¡æ˜¯å“ªä¸€ä¸ªï¼š 123456789101112131415161718192021/* * _top is used to mark the max available position of ctx_tasks * _current is used to point to the context of current task */static int _top = 0;static int _current = -1;/* * implment a simple cycle FIFO schedular */void schedule()&#123; if (_top &lt;= 0) &#123; panic(&quot;Num of task should be greater than zero!&quot;); return; &#125; _current = (_current + 1) % _top; struct context *next = &amp;(ctx_tasks[_current]); switch_to(next);&#125; å› ä¸ºå¤šä¸ªä»»åŠ¡åä½œï¼Œéœ€è¦ä¸€ä¸ªå‡½æ•°æ¥è¡¨ç¤ºä¸»åŠ¨æ”¾å¼ƒ CPUï¼š 123456789/* * DESCRIPTION * task_yield() causes the calling task to relinquish the CPU and a new * task gets to run. */void task_yield()&#123; schedule();&#125; è°ƒç”¨å…³ç³» æŠ¢å å¼å¤šä»»åŠ¡æŠ¢å å¼å¤šä»»åŠ¡ï¼šæŠ¢å å¼ç¯å¢ƒä¸‹ï¼Œæ“ä½œç³»ç»Ÿå®Œå…¨å†³å®šä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å‰¥å¤ºå½“å‰ä»»åŠ¡å¯¹å¤„ç†å™¨çš„ä½¿ç”¨ï¼Œå°†å¤„ç†å™¨æä¾›ç»™å…¶ä»–ä»»åŠ¡ã€‚ å¯„å­˜å™¨ å¯¹ MSIP å†™å…¥ 1 æ—¶è§¦å‘ è½¯ä¸­æ–­ï¼Œå†™å…¥ 0 æ—¶è¡¨ç¤ºå¯¹ä¸­æ–­è¿›è¡Œåº”ç­”ï¼Œä¹Ÿå°±æ˜¯å¤„ç†å®Œäº†è½¯ä¸­æ–­ã€‚ ä»»åŠ¡åŒæ­¥ä¸é”å¹¶å‘ä¸åŒæ­¥å¹¶å‘ï¼šå¤šä¸ªæ§åˆ¶æµåŒæ—¶æ‰§è¡Œ å¤šå¤„ç†å™¨å¤šä»»åŠ¡ å•å¤„ç†å™¨å¤šä»»åŠ¡ å•å¤„ç†å™¨ä»»åŠ¡ + ä¸­æ–­ åŒæ­¥ï¼šä¸ºäº†ä¿è¯åœ¨å¹¶å‘æ‰§è¡Œçš„ç¯å¢ƒä¸­å„ä¸ªæ§åˆ¶æµå¯ä»¥æœ‰æ•ˆæ‰§è¡Œè€Œé‡‡ç”¨çš„ä¸€ç§ç¼–ç¨‹æŠ€æœ¯ ä¸´ç•ŒåŒºã€é”ä¸æ­»é”ä¸´ç•ŒåŒºï¼šåœ¨å¹¶å‘çš„ç¨‹åºæ‰§è¡Œç¯å¢ƒä¸­ï¼Œæ‰€è°“ä¸´ç•ŒåŒºæŒ‡çš„æ˜¯ä¸€ä¸ªä¼šè®¿é—®å…±äº«èµ„æºçš„æŒ‡ä»¤ç‰‡æ®µï¼Œè€Œä¸”å½“è¿™æ ·çš„å¤šä¸ªæŒ‡ä»¤ç‰‡æ®µåŒæ—¶è®¿é—®æŸä¸ªå…±äº«èµ„æºæ—¶å¯èƒ½ä¼šå¼•å‘é—®é¢˜ã€‚ åœ¨å¹¶å‘ç¯å¢ƒä¸‹ä¸ºäº†æœ‰æ•ˆæ§åˆ¶ä¸´ç•ŒåŒºçš„æ‰§è¡Œï¼ˆåŒæ­¥ï¼‰ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯å½“æœ‰ä¸€ä¸ªæ§åˆ¶æµè¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå…¶ä»–ç›¸å…³æ§åˆ¶æµå¿…é¡»ç­‰å¾…ã€‚ é”ï¼šä¸€ç§å¸¸è§çš„ç”¨æ¥å®ç°åŒæ­¥çš„æŠ€æœ¯ ä¸å¯ç¡çœ é” å¯ç¡çœ é” å½“å‘ç”Ÿä¸­æ–­æ—¶ï¼Œå³è¾¹çš„ä»»åŠ¡è·å– CPU èµ„æºï¼Œå¼€å§‹æ‰§è¡Œï¼Œä½†æ˜¯è·å–é”æ—¶å‘ç°å½“å‰å·²ç»å¤„äºé”å®šçŠ¶æ€ï¼Œæ‰€ä»¥å°±å¤„äºç­‰å¾…çŠ¶æ€ã€‚ å½“ä¸‹ä¸€ä¸ªä¸­æ–­å‘ç”Ÿï¼Œå·¦ä¾§ä»»åŠ¡å›å» CPU åä¼šç»§ç»­æ‰§è¡Œï¼Œå®é™…ä¸Šå·¦ä¾§ä»»åŠ¡ä¹Ÿä¸å¿…ç­‰å¾…ï¼Œä»–å¯ä»¥ä¸€ç›´æ‰§è¡Œï¼Œå› ä¸ºå³ä¾§ä»»åŠ¡ä¸€ç›´æ— æ³•è·å–é”ã€‚ å½“ç„¶ï¼Œå³ä¾§ä»»åŠ¡ä¹Ÿå¯ä»¥ä¸€ç›´è§¦å‘ä¸­æ–­ï¼Œè®©å·¦ä¾§ä»»åŠ¡è®©å‡º CPUã€‚ä¹Ÿå°±æ˜¯å·¦ä¾§ä»»åŠ¡é€»è¾‘ä¸Šå¯ä»¥ä¸€ç›´è¿è¡Œï¼Œä½†æ˜¯å®é™…è¿˜æ˜¯ä¼šè¢«æ‰“æ–­ã€‚ å½“å·¦ä¾§ä»»åŠ¡æ‰§è¡Œå®Œé‡Šæ”¾é”ï¼Œå³ä¾§ä»»åŠ¡å°±å¯ä»¥è·å–é”ï¼Œå¹¶æ­£å¸¸æ‰§è¡Œä¸‹å»ã€‚ æ­»é”ï¼šå½“æ§åˆ¶æµæ‰§è¡Œè·¯å¾„ä¸­ä¼šæ¶‰åŠå¤šä¸ªé”ï¼Œå¹¶ä¸”è¿™äº›æ§åˆ¶æµæ‰§è¡Œè·¯å¾„è·å–çš„é¡ºåºä¸åŒæ—¶å°±å¯èƒ½å‘é€æ­»é”ã€‚ è§£å†³æ­»é”ï¼š è°ƒæ•´è·å–é”çš„é¡ºåºï¼Œæ¯”å¦‚ä¿æŒä¸€è‡´ å°½å¯èƒ½é˜²æ­¢ä»»åŠ¡åœ¨æŒæœ‰ä¸€æŠŠé”åŒæ—¶ç”³è¯·å…¶ä»–é” è‡ªæ—‹é” ä¸èƒ½ä» C è¯­è¨€çš„å±‚é¢å»ç†è§£é”ï¼Œåº”è¯¥è¦ä»æŒ‡ä»¤çº§åˆ«å»ç†è§£ã€‚ä¸Šé¢çš„è¿™ç§ä¸Šé”æ–¹å¼æ˜¯æœ‰é—®é¢˜çš„ã€‚ å¦‚æœä¸¤ä¸ªæ§åˆ¶æµåŒæ—¶åŠ é”ï¼Œå°±å¯èƒ½åŒæ—¶è·å–äº†é”ï¼Œå› ä¸ºåœ¨æ±‡ç¼–æŒ‡ä»¤çº§åˆ«ï¼Œæ¯æ¡æŒ‡ä»¤æ‰§è¡Œä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„ï¼š AMOSWAP loop: lw a4, -20(s0) # å‚æ•°1 li a5, 1 # å‚æ•° 2 amoswap.w.aq a5, a5, (a4) # å°†a5ä¸a4æŒ‡å‘çš„å†…å­˜çš„å€¼è¿›è¡Œäº¤æ¢ # å°† 1 ä¸ a4 äº¤æ¢ï¼Œè¡¨ç¤ºå¦‚æœåŸæ¥ä¸Šé”ï¼ˆ1ï¼‰é‚£å°±ä»€ä¹ˆéƒ½æ²¡åš # å¦‚æœåŸæ¥æ²¡ä¸Šé”ï¼ˆ0ï¼‰é‚£å°±ç«‹å³ä¸Šé” mv a3, a5 bnez a3,loop ![](https://picbed-1311007548.cos.ap-shanghai.myqcloud.com/markdown_picbed/img//2022/08/28/21-38-57-b7cece2166dba14bd128970cefdd2702-20220828213857-b116cd.png)","categories":[{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"}]},{"title":"RISC-V å…¥é—¨ - å†…å­˜ç®¡ç†","slug":"RISC-Vå…¥é—¨-å†…å­˜ç®¡ç†","date":"2022-08-23T14:33:11.000Z","updated":"2022-10-15T03:14:29.564Z","comments":true,"path":"2022/08/23/RISC-Vå…¥é—¨-å†…å­˜ç®¡ç†/","link":"","permalink":"http://example.com/2022/08/23/RISC-V%E5%85%A5%E9%97%A8-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","excerpt":"","text":"å¦‚ä½•è®¡ç®—å †çš„å¤§å°ï¼Œåªæœ‰ç®—å‡ºå¯ç”¨ç©ºé—´æ‰èƒ½å¯¹å…¶ç®¡ç†ã€‚ ENTRY åŠŸèƒ½ï¼šç”¨äºè®¾ç½®å…¥å£ç‚¹ï¼Œå³ç¨‹åºä¸­æ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤symbol å‚æ•°æ˜¯ä¸€ä¸ªç¬¦å·çš„åç§° OUTPUT_ARCH åŠŸèƒ½ï¼šæŒ‡å®šè¾“å‡ºæ–‡ä»¶æ‰€é€‚ç”¨çš„è®¡ç®—æœºä½“ç³»æ¶æ„ ä¸ºä»€ä¹ˆç”¨ riscv64-unknown-elf-gccï¼Œä½†æ˜¯ç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶æ˜¯ 32 ä½ç¨‹åºï¼Ÿriscv64 æ˜¯ host æ˜¯ 64 ä½ç³»ç»Ÿï¼Œç¼–è¯‘ target æ˜¯ç”± gcc çš„å‚æ•°å†³å®š MEMORY åŠŸèƒ½ï¼šç”¨äºæè¿°ç›®æ ‡æœºå™¨ä¸Šå†…å­˜åŒºåŸŸçš„ä½ç½®ï¼Œå¤§å°å’Œç›¸å…³ 1234567MEMORY&#123; /* å†…å­˜ç±»å‹ä¸ºROMï¼Œèµ·å§‹åœ°å€0ï¼Œé•¿åº¦256K */ rom(rx):ORIGIN = 0, LENGTH = 256K /* å†…å­˜ç±»å‹ä¸ºRAMï¼Œèµ·å§‹åœ°å€0x40000000ï¼Œé•¿åº¦4M */ ram(!rx):org = 0x40000000, l = 4M&#125; TODOï¼šæ‹¬å·é‡Œçš„ rx å«ä¹‰æ˜¯ï¼Ÿ SECTION åŠŸèƒ½ï¼šå‘Šè¯‰é“¾æ¥å™¨å¦‚ä½•å°† input sections æ˜ å°„åˆ° output sectionsï¼Œä»¥åŠå¦‚ä½•å°† output sections æ”¾ç½®åˆ°å†…å­˜ä¸­ã€‚ 12345678SECTION&#123; .=0x0000; .text:&#123;*(.text)&#125; .=0x8000000; .data:&#123;*(.data)&#125; .bss:&#123;*(.bss)&#125;&#125;&gt;ram PROVIDE åŠŸèƒ½ï¼š å¯ä»¥åœ¨ Linker Script ä¸­å®šä¹‰ç¬¦å·ï¼ˆSymbolsï¼‰ æ¯ä¸ªç¬¦å·åŒ…æ‹¬ä¸€ä¸ªåå­—ï¼ˆname) å’Œä¸€ä¸ªå¯¹åº”çš„åœ°å€å€¼ï¼ˆaddressï¼‰ åœ¨ä»£ç ä¸­å¯ä»¥è®¿é—®è¿™äº›ç¬¦å·ï¼Œç­‰åŒäºè®¿é—®ä¸€ä¸ªåœ°å€ã€‚ 123456789101112.bss :&#123; PROVIDE(_bss_start = .); /* å½“å‰åœ°å€èµ‹å€¼ç»™ç¬¦å·_bss_start */ *(.sbss .sbss.*) *(.bss .bss.*) *(COMMON) PROVIDE(_bss_end = .);&#125; &gt;ram PROVIDE(_memory_start = ORIGIN(ram));PROVIDE(_memory_end = ORIGIN(ram) + LENGTH(ram));PROVIDE(_heap_start = _bss_end); /* å †ç©ºé—´å°±æ˜¯æ¥åœ¨äº†bssæ®µä¹‹åï¼Œæ‰€ä»¥å †å¼€å§‹åœ°å€å°±æ˜¯bssç»“æŸåœ°å€ */ PROVIDE(_heap_size = _memory_end - _heap_start); /* è®¡ç®—å †å¤§å° */ .globalè¡¨ç¤ºå…¨å±€å˜é‡ï¼Œ.wordè¡¨ç¤ºå®šä¹‰å˜é‡ï¼Œä¸‹é¢çš„ä»£ç å°±æ˜¯å®šä¹‰ä¸€äº›å…¨å±€å˜é‡ï¼Œæ–¹ä¾¿åœ¨ C ä»£ç ä¸­ä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031/* mem.S */ .section .rodata.global HEAP_STARTHEAP_START: .word _heap_start.global HEAP_SIZEHEAP_SIZE: .word _heap_size.global TEXT_STARTTEXT_START: .word _text_start.global TEXT_ENDTEXT_END: .word _text_end.global DATA_STARTDATA_START: .word _data_start.global DATA_ENDDATA_END: .word _data_end.global RODATA_STARTRODATA_START: .word _rodata_start.global RODATA_ENDRODATA_END: .word _rodata_end.global BSS_STARTBSS_START: .word _bss_start.global BSS_ENDBSS_END: .word _bss_end 12345678910111213141516/* * Following global vars are defined in mem.S */extern uint32_t TEXT_START;extern uint32_t TEXT_END;extern uint32_t DATA_START;extern uint32_t DATA_END;extern uint32_t RODATA_START;extern uint32_t RODATA_END;extern uint32_t BSS_START;extern uint32_t BSS_END;extern uint32_t HEAP_START;extern uint32_t HEAP_SIZE;#define PAGE_SIZE 4096static uint32_t _num_pages = _num_pages = (HEAP_SIZE / PAGE_SIZE) - 8; å®ç° Page çº§åˆ«çš„å†…å­˜åˆ†é…ä¸é‡Šæ”¾ æ—¥å¸¸ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼Œéƒ½æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½åˆ†é…ç©ºé—´ï¼Œä½†æ˜¯ä¸ºäº†æ•™å­¦æ–¹ä¾¿ï¼ŒRVOS æ˜¯ä»¥ Page ä¸ºå•ä½åˆ†é…å†…å­˜ã€‚ æ•°æ®ç»“æ„è®¾è®¡ æ•°ç»„æ–¹å¼ç®¡ç†å°†å†…å­˜æ¨¡æ‹Ÿä¸ºä¸€ä¸ªè¿ç»­çš„æ•°ç»„ï¼Œæ•°ç»„çš„å‰éƒ¨é¢„ç•™ 8 ä¸ª Page æ¥ç®¡ç†å…¶ä½™çš„å†…å­˜ã€‚ç›®å‰è€ƒè™‘ç®¡ç†çš„çŠ¶æ€æœ‰ï¼š è¿™ Page æ˜¯å¦è¢«ä½¿ç”¨äº† è¿™ä¸ª Page æ˜¯ä¸æ˜¯æœ€åä¸€å—åˆ†é…çš„å†…å­˜ï¼Œæ–¹ä¾¿æˆ‘ä»¬é‡Šæ”¾å†…å­˜æ—¶æ‰¾åˆ°æœ€åä¸€å—åˆ†é…çš„å†…å­˜ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª 8 bit çš„flagæ¥è®°å½•è¿™äº›ä¿¡æ¯ï¼Œflag bit[0]è¡¨ç¤ºæ˜¯å¦å·²ä½¿ç”¨ï¼Œflag bit[1]è¡¨ç¤ºæ˜¯å¦æ˜¯æœ€åä¸€ä¸ªåˆ†é…çš„é¡µé¢ã€‚ 123456789/* * Page Descriptor * flags: * - bit 0: flag if this page is taken(allocated) * - bit 1: flag if this page is the last page of the memory block allocated */struct Page &#123; uint8_t flags;&#125;; ä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ª Page éƒ½ç”±ä¸€ä¸ª 8 bit çš„ç»“æ„ä½“struct Pageç®¡ç†ï¼Œæˆ‘ä»¬æ€»å…±åˆ†é…äº† 8 ä¸ª Page ç”¨æ¥ç®¡ç†ï¼Œä¸€ä¸ª Page å  4Kï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¸€ä¸ªç®¡ç†$8 \\times 4096 = 32768$ä¸ª Pageã€‚é‚£å°±åˆšå¥½å¯ä»¥ç®¡ç†$32768 \\times 4096 = 134217728 \\text{bit}$å†…å­˜=128Mã€‚ Page åˆ†é…ä¸é‡Šæ”¾æ¥å£è®¾è®¡ 123456789101112131415161718192021222324252627282930313233343536373839404142/* * åˆ†é…è¿ç»­nä¸ªå¯ç”¨ç‰©ç†é¡µ * - npages: éœ€è¦åˆ†é…çš„é¡µçš„ä¸ªæ•° */void *page_alloc(int npages)&#123; /* Note we are searching the page descriptor bitmaps. */ int found = 0; struct Page *page_i = (struct Page *)HEAP_START; for (int i = 0; i &lt; (_num_pages - npages); i++) &#123; if (_is_free(page_i)) &#123; found = 1; /* * æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨Pageï¼Œç»§ç»­åˆ¤æ–­æ˜¯å¦æœ‰Nä¸ªè¿ç»­å¯ç”¨page */ struct Page *page_j = page_i; for (int j = i; j &lt; (i + npages); j++) &#123; if (!_is_free(page_j)) &#123; found = 0; break; &#125; page_j++; &#125; /* * æ‰¾åˆ°äº†è¿ç»­çš„Nä¸ªå¯ç”¨pageï¼Œå°†Nä¸ªpageè®¾ç½®ä¸ºå·²åˆ†é…çŠ¶æ€ */ if (found) &#123; struct Page *page_k = page_i; for (int k = i; k &lt; (i + npages); k++) &#123; _set_flag(page_k, PAGE_TAKEN); page_k++; &#125; page_k--; _set_flag(page_k, PAGE_LAST); // è¿”å›å¯ç”¨pageé¦–åœ°å€ return (void *)(_alloc_start + i * PAGE_SIZE); &#125; &#125; page_i++; &#125; return NULL;&#125; 1234567891011121314151617181920212223242526/* * é‡Šæ”¾å·²åˆ†é…çš„ç‰©ç†é¡µ * - p: å¾…é‡Šæ”¾çš„é¦–åœ°å€ */void page_free(void *p)&#123; /* * åˆ¤æ–­éæ³•è¾“å…¥ï¼Œpä¸èƒ½ä¸ºç©ºæˆ–è€…è¶…å‡ºæœ€å¤§å¯åˆ†é…å¤§å° */ if (!p || (uint32_t)p &gt;= _alloc_end) &#123; return; &#125; /* è®¡ç®—å‡ºè¿™ä¸ªé¦–åœ°å€pæ‰€åœ¨çš„pageçš„æè¿°ç¬¦ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°ç¬¬å‡ ä¸ªæè¿°ç¬¦åœ¨ç®¡ç†è¿™å—å†…å­˜ */ struct Page *page = (struct Page *)HEAP_START; page += ((uint32_t)p - _alloc_start)/ PAGE_SIZE; /* å¾ªç¯æ¸…ç©ºæ ‡è¯† */ while (!_is_free(page)) &#123; if (_is_last(page)) &#123; _clear(page); break; &#125; else &#123; _clear(page); page++;; &#125; &#125;&#125;","categories":[{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"}]},{"title":"LaTex-listing ç¯å¢ƒè®¾ç½®","slug":"LaTex-listingç¯å¢ƒè®¾ç½®","date":"2022-08-21T06:28:42.000Z","updated":"2022-10-15T03:14:29.266Z","comments":true,"path":"2022/08/21/LaTex-listingç¯å¢ƒè®¾ç½®/","link":"","permalink":"http://example.com/2022/08/21/LaTex-listing%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE/","excerpt":"","text":"æ€»è§ˆ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950% ä»£ç å—listingè®¾ç½®\\lstdefinestyle&#123;mppl-listing-style&#125;&#123; language = java, % è¯­è¨€ç±»å‹ backgroundcolor = \\color&#123;&#123;HTML&#125;&#123;F7F7F7&#125;&#125;, % èƒŒæ™¯è‰² numbers = left, % è¡Œå·æ˜¾ç¤ºä½ç½® xleftmargin = 5em, % å·¦è¾¹è· xrightmargin = 0em, % å³è¾¹è· aboveskip = 2em, % ä¸Šæ–¹ç•™ç™½ belowskip = 0em, % ä¸‹æ–¹ç•™ç™½ frame = single, % ä»£ç å—è¾¹æ¡†æ˜¯å•çº¿æ¡ rulecolor = \\color&#123;black&#125;, % è¾¹æ¡†é¢œè‰² frameround = tttt, % è¾¹æ¡†åœ†è§’ framesep = 0.19em, % è¾¹æ¡†ä¸ä»£ç é—´è· rulesepcolor = \\color&#123;black&#125;, % é˜´å½±é¢œè‰² framexleftmargin = -2em, % å·¦è¾¹æ¡†ä¸ä»£ç è·ç¦» framexrightmargin = -5em, % å³è¾¹æ¡†ä¸ä»£ç è·ç¦» framexbottommargin = 2em, % ä¸‹è¾¹æ¡†ä¸ä»£ç è·ç¦» framextopmargin = 2em, % ä¸Šè¾¹æ¡†ä¸ä»£ç è·ç¦» breaklines = true, % ä»£ç è¶…å‡ºè¾¹ç•Œæ¢è¡Œ tabsize = 4, % tabç¼©è¿› numberstyle = \\color&#123;red&#125;, % è¡Œå·é¢œè‰² keywordstyle = \\color&#123;red&#125;, % å…³é”®å­—é¢œè‰² identifierstyle = \\color&#123;listing-identifier&#125;, % å˜é‡é¢œè‰² commentstyle = \\color&#123;listing-comment&#125;, % æ³¨é‡Šé¢œè‰² basicstyle = \\color&#123;listing-text-color&#125;\\small\\ttfamily&#123;&#125;\\linespread&#123;1.15&#125;, % print whole listing small abovecaptionskip = 0em, % ä¸Šæ ‡é¢˜è¾¹è· belowcaptionskip = 1.0em, % ä¸‹æ ‡é¢œè¾¹è· classoffset = 0, % ç±»ååç§»é‡ sensitive = true, % æ˜¯å¦åŒºåˆ†å¤§å°å†™ morecomment = [s][\\color&#123;listing-javadoc-comment&#125;]&#123;/**&#125;&#123;*/&#125;, stringstyle = \\color&#123;listing-string&#125;, showstringspaces = false, % æ˜¯å¦æ˜¾ç¤ºå­—ç¬¦ä¸²ç©ºæ ¼ escapeinside = &#123;/*@&#125;&#123;@*/&#125;, % Allow LaTeX inside these special comments literate = &#123;Ã¡&#125;&#123;&#123;\\&#x27;a&#125;&#125;1 &#123;Ã©&#125;&#123;&#123;\\&#x27;e&#125;&#125;1 &#123;Ã­&#125;&#123;&#123;\\&#x27;i&#125;&#125;1 &#123;Ã³&#125;&#123;&#123;\\&#x27;o&#125;&#125;1 &#123;Ãº&#125;&#123;&#123;\\&#x27;u&#125;&#125;1 &#123;Ã&#125;&#123;&#123;\\&#x27;A&#125;&#125;1 &#123;Ã‰&#125;&#123;&#123;\\&#x27;E&#125;&#125;1 &#123;Ã&#125;&#123;&#123;\\&#x27;I&#125;&#125;1 &#123;Ã“&#125;&#123;&#123;\\&#x27;O&#125;&#125;1 &#123;Ãš&#125;&#123;&#123;\\&#x27;U&#125;&#125;1 &#123;Ã &#125;&#123;&#123;\\`a&#125;&#125;1 &#123;Ã¨&#125;&#123;&#123;\\&#x27;e&#125;&#125;1 &#123;Ã¬&#125;&#123;&#123;\\`i&#125;&#125;1 &#123;Ã²&#125;&#123;&#123;\\`o&#125;&#125;1 &#123;Ã¹&#125;&#123;&#123;\\`u&#125;&#125;1 &#123;Ã€&#125;&#123;&#123;\\`A&#125;&#125;1 &#123;Ãˆ&#125;&#123;&#123;\\&#x27;E&#125;&#125;1 &#123;ÃŒ&#125;&#123;&#123;\\`I&#125;&#125;1 &#123;Ã’&#125;&#123;&#123;\\`O&#125;&#125;1 &#123;Ã™&#125;&#123;&#123;\\`U&#125;&#125;1 &#123;Ã¤&#125;&#123;&#123;\\&quot;a&#125;&#125;1 &#123;Ã«&#125;&#123;&#123;\\&quot;e&#125;&#125;1 &#123;Ã¯&#125;&#123;&#123;\\&quot;i&#125;&#125;1 &#123;Ã¶&#125;&#123;&#123;\\&quot;o&#125;&#125;1 &#123;Ã¼&#125;&#123;&#123;\\&quot;u&#125;&#125;1 &#123;Ã„&#125;&#123;&#123;\\&quot;A&#125;&#125;1 &#123;Ã‹&#125;&#123;&#123;\\&quot;E&#125;&#125;1 &#123;Ã&#125;&#123;&#123;\\&quot;I&#125;&#125;1 &#123;Ã–&#125;&#123;&#123;\\&quot;O&#125;&#125;1 &#123;Ãœ&#125;&#123;&#123;\\&quot;U&#125;&#125;1 &#123;Ã¢&#125;&#123;&#123;\\^a&#125;&#125;1 &#123;Ãª&#125;&#123;&#123;\\^e&#125;&#125;1 &#123;Ã®&#125;&#123;&#123;\\^i&#125;&#125;1 &#123;Ã´&#125;&#123;&#123;\\^o&#125;&#125;1 &#123;Ã»&#125;&#123;&#123;\\^u&#125;&#125;1 &#123;Ã‚&#125;&#123;&#123;\\^A&#125;&#125;1 &#123;ÃŠ&#125;&#123;&#123;\\^E&#125;&#125;1 &#123;Ã&#125;&#123;&#123;\\^I&#125;&#125;1 &#123;Ã”&#125;&#123;&#123;\\^O&#125;&#125;1 &#123;Ã›&#125;&#123;&#123;\\^U&#125;&#125;1 &#123;Å“&#125;&#123;&#123;\\oe&#125;&#125;1 &#123;Å’&#125;&#123;&#123;\\OE&#125;&#125;1 &#123;Ã¦&#125;&#123;&#123;\\ae&#125;&#125;1 &#123;Ã†&#125;&#123;&#123;\\AE&#125;&#125;1 &#123;ÃŸ&#125;&#123;&#123;\\ss&#125;&#125;1 &#123;Ã§&#125;&#123;&#123;\\c c&#125;&#125;1 &#123;Ã‡&#125;&#123;&#123;\\c C&#125;&#125;1 &#123;Ã¸&#125;&#123;&#123;\\o&#125;&#125;1 &#123;Ã¥&#125;&#123;&#123;\\r a&#125;&#125;1 &#123;Ã…&#125;&#123;&#123;\\r A&#125;&#125;1 &#123;â‚¬&#125;&#123;&#123;\\EUR&#125;&#125;1 &#123;Â£&#125;&#123;&#123;\\pounds&#125;&#125;1 &#123;Â«&#125;&#123;&#123;\\guillemotleft&#125;&#125;1 &#123;Â»&#125;&#123;&#123;\\guillemotright&#125;&#125;1 &#123;Ã±&#125;&#123;&#123;\\~n&#125;&#125;1 &#123;Ã‘&#125;&#123;&#123;\\~N&#125;&#125;1 &#123;Â¿&#125;&#123;&#123;?`&#125;&#125;1 &#123;â€¦&#125;&#123;&#123;\\ldots&#125;&#125;1 &#123;â‰¥&#125;&#123;&#123;&gt;=&#125;&#125;1 &#123;â‰¤&#125;&#123;&#123;&lt;=&#125;&#125;1 &#123;â€&#125;&#123;&#123;\\glqq&#125;&#125;1 &#123;â€œ&#125;&#123;&#123;\\grqq&#125;&#125;1 &#123;â€&#125;&#123;&#123;&#x27;&#x27;&#125;&#125;1 &#125; backgroundcolor èƒŒæ™¯é¢œè‰²numbers ä»£ç è¡Œå·123456789101112\\lstset&#123; numbers = left, % è¡Œå·é å·¦ basicstyle = \\ttfamily, % åŸºæœ¬ä»£ç é£æ ¼ keywordstyle = \\bfseries, % å…³é”®å­—é£æ ¼ commentstyle = \\ttfamily, % æ³¨é‡Šçš„é£æ ¼ frame = single, % é˜´å½±æ•ˆæœ escapeinside=``, % è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡ xleftmargin=2em,xrightmargin=2em, aboveskip=1em, breaklines = true, language = C, % è¯­è¨€é€‰C&#125; 123456789101112\\lstset&#123; numbers = right, % è¡Œå·é å·¦ basicstyle = \\ttfamily, % åŸºæœ¬ä»£ç é£æ ¼ keywordstyle = \\bfseries, % å…³é”®å­—é£æ ¼ commentstyle = \\ttfamily, % æ³¨é‡Šçš„é£æ ¼ frame = single, % é˜´å½±æ•ˆæœ escapeinside=``, % è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡ xleftmargin=2em,xrightmargin=2em, aboveskip=1em, breaklines = true, language = C, % è¯­è¨€é€‰C&#125; stepnumber é—´éš”æ˜¾ç¤ºè¡Œå·1234\\lstset&#123; numbers = right, % è¡Œå·é å·¦ stepnumber = 2, % æ¯ä¸¤è¡Œæ˜¾ç¤ºä¸€æ¬¡è¡Œå·&#125; firstnumber å¼€å§‹è¡Œå· firstnumber = 10 å¼€å§‹è¡Œå·ä¸º 10 firstnumber = last å¼€å§‹è¡Œå·ä¸ºä¸Šä¸€æ®µ listing çš„ç»“æŸè¡Œå· xleftmargin/xrightmargin/aboveskip/below è·ç¦»å¤–éƒ¨å…ƒç´ è·ç¦»è®¾ç½®ä»£ç å—ä¸Šä¸‹å·¦å³çš„è·ç¦»ï¼Œä¸å¤–éƒ¨å…ƒç´ çš„è·ç¦»ï¼Œè€Œä¸æ˜¯ä»£ç ä¸è¾¹æ¡†çš„è·ç¦»ã€‚ 1234567891011\\lstset&#123; basicstyle = \\ttfamily, % åŸºæœ¬ä»£ç é£æ ¼ numbers = left, % è¡Œå·é å·¦ keywordstyle = \\bfseries, % å…³é”®å­—é£æ ¼ commentstyle = \\ttfamily, % æ³¨é‡Šçš„é£æ ¼ frame = single, % é˜´å½±æ•ˆæœ escapeinside=``, % è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡ xleftmargin=0em,xrightmargin=0em, aboveskip=0em,belowskip=0em, breaklines = true, language = C, % è¯­è¨€é€‰C&#125; 1234567891011121314\\lstset&#123; basicstyle = \\ttfamily, % åŸºæœ¬ä»£ç é£æ ¼ numbers = left, % è¡Œå·é å·¦ keywordstyle = \\bfseries, % å…³é”®å­—é£æ ¼ commentstyle = \\ttfamily, % æ³¨é‡Šçš„é£æ ¼ frame = single, % çº¿æ¡† escapeinside =``, % è‹±æ–‡åˆ†å·ä¸­å¯å†™å…¥ä¸­æ–‡ xleftmargin =5em, xrightmargin =0em, aboveskip =2em, belowskip =0em, breaklines = true, language = C, % è¯­è¨€é€‰C&#125; frame è¾¹æ¡†æ ·å¼è®¾ç½®è¾¹æ¡†æ ·å¼ï¼š none:æ— æ¡† single:å•çº¿æ¡† leftline,topline,rightline,bottomline:ä¸Šä¸‹å·¦å³çš„çº¿ ltrb:ä¸Šé¢å‚æ•°çš„ç¼©å†™ï¼Œframe=lr è¡¨ç¤ºå·¦å³æœ‰çº¿ LTRB:å¤§å†™è¡¨ç¤ºåŒçº¿ 123\\lstset&#123; frame = single, % çº¿æ¡†&#125; 123\\lstset&#123; frame = shadowbox, % é˜´å½±&#125; 123\\lstset&#123; frame = LR, % å·¦å³è¾¹æ¡†åŒçº¿&#125; rulesepcolor é˜´å½±é¢œè‰²1234\\lstset&#123; frame = shadowbox, % é˜´å½± rulesepcolor= \\color&#123; red!20!green!20!blue!20&#125; , % é˜´å½±é¢œè‰²&#125; rulecolor è¾¹æ¡†é¢œè‰²123\\lstset&#123; rulecolor = \\color&#123;red&#125;, % è¾¹æ¡†é¢œè‰²&#125; frameround è¾¹æ¡†å€’è§’123\\lstset&#123; frameround = fftt, % è¾¹æ¡†å€’è§’ï¼Œfè¡¨ç¤ºå°–è§’ï¼Œtè¡¨ç¤ºå€’è§’ï¼Œé¡ºåºæ˜¯ç¬¬ä¸€ä¸ªå­—æ¯è¡¨ç¤ºå³ä¸Šè§’ï¼Œé¡ºæ—¶é’ˆ&#125; framesep è¾¹æ¡†ä¸ä»£ç çš„è·ç¦»ä»£ç ä¸ä¼šç§»åŠ¨ï¼ŒåŠ¨çš„æ˜¯è¾¹æ¡†ã€‚ 123\\lstset&#123; framesep = 6em, % è¾¹æ¡†ä¸ä»£ç çš„è·ç¦»&#125; 123\\lstset&#123; framesep = 6em, % è¾¹æ¡†ä¸ä»£ç çš„è·ç¦»&#125; framexleftmargin/framexrightmargin/frameytopmargin/frameybottommargin è¾¹æ¡†ä¸ä»£ç è·ç¦»123456\\lstset&#123; framexleftmargin = -2em, % å·¦è¾¹æ¡†ä¸ä»£ç è·ç¦» framexrightmargin = -5em, % å³è¾¹æ¡†ä¸ä»£ç è·ç¦» framexbottommargin = 2em, % ä¸‹è¾¹æ¡†ä¸ä»£ç è·ç¦» framextopmargin = 2em, % ä¸Šè¾¹æ¡†ä¸ä»£ç è·ç¦»&#125; 123456\\lstset&#123; framexleftmargin = 1em, % å·¦è¾¹æ¡†ä¸ä»£ç è·ç¦» framexrightmargin = 1em, % å³è¾¹æ¡†ä¸ä»£ç è·ç¦» framexbottommargin = 0em, % ä¸‹è¾¹æ¡†ä¸ä»£ç è·ç¦» framextopmargin = 0em, % ä¸Šè¾¹æ¡†ä¸ä»£ç è·ç¦»&#125; breaklines å¼ºåˆ¶æ¢è¡Œè®¾ç½®ä»£ç è¶…é•¿æ—¶è‡ªåŠ¨æ¢è¡Œï¼š 123\\lstset&#123; breaklines = false, % ä¸æ¢è¡Œ&#125; 123\\lstset&#123; breaklines = true, % ä¸æ¢è¡Œ&#125; numberstyle/keywordstyle/identifierstyle/commentstyle/commentstyle è¡Œå·ã€å…³é”®å­—ã€æ ‡è¯†ç¬¦ã€æ³¨é‡Šçš„æ ·å¼12345678910111213141516\\definecolor&#123;listing-background&#125;&#123;HTML&#125;&#123;F7F7F7&#125;\\definecolor&#123;listing-rule&#125;&#123;HTML&#125;&#123;B3B2B3&#125;\\definecolor&#123;listing-numbers&#125;&#123;HTML&#125;&#123;B3B2B3&#125;\\definecolor&#123;listing-text-color&#125;&#123;HTML&#125;&#123;000000&#125;\\definecolor&#123;listing-keyword&#125;&#123;HTML&#125;&#123;435489&#125;\\definecolor&#123;listing-identifier&#125;&#123;HTML&#125;&#123;435489&#125;\\definecolor&#123;listing-string&#125;&#123;HTML&#125;&#123;00999A&#125;\\definecolor&#123;listing-comment&#125;&#123;HTML&#125;&#123;8E8E8E&#125;\\definecolor&#123;listing-javadoc-comment&#125;&#123;HTML&#125;&#123;006CA9&#125;\\lstset&#123; numberstyle = \\color&#123;listing-numbers&#125;, % è¡Œå·é¢œè‰² keywordstyle = \\color&#123;listing-keyword&#125;, % å…³é”®å­—é¢œè‰² identifierstyle = \\color&#123;listing-identifier&#125;, % å˜é‡é¢œè‰² commentstyle = \\color&#123;listing-comment&#125;, % æ³¨é‡Šé¢œè‰²&#125;","categories":[{"name":"LaTeX","slug":"LaTeX","permalink":"http://example.com/categories/LaTeX/"}],"tags":[{"name":"LaTeX","slug":"LaTeX","permalink":"http://example.com/tags/LaTeX/"},{"name":"listing","slug":"listing","permalink":"http://example.com/tags/listing/"}]},{"title":"Markdown ä¹¦å†™ PDF è¾“å‡ºä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ","slug":"Markdownä¹¦å†™PDFè¾“å‡ºä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ","date":"2022-08-20T00:28:03.000Z","updated":"2022-10-15T03:14:29.347Z","comments":true,"path":"2022/08/20/Markdownä¹¦å†™PDFè¾“å‡ºä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ/","link":"","permalink":"http://example.com/2022/08/20/Markdown%E4%B9%A6%E5%86%99PDF%E8%BE%93%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","excerpt":"","text":"æŠ˜è…¾èƒŒæ™¯Markdown çš„ç®€ä¾¿æ€§æ˜¯ LaTeX æ— æ³•æ›¿ä»£çš„ï¼ŒLaTeX å¯¹æ’ç‰ˆçš„ç²¾å‡†æ§åˆ¶èƒ½åŠ›åˆæ˜¯ Markdown æ— æ³•æ¯”æ‹Ÿçš„ã€‚ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§èƒ½å¤Ÿå°† Markdown ä¼˜é›…åœ°è½¬æ¢æˆ PDF çš„è§£å†³æ–¹æ¡ˆï¼Œè™½ç„¶æ—©å°±å¬è¯´ä¹Ÿä½¿ç”¨è¿‡ Pandoc è¿™æŠŠç‘å£«å†›åˆ€ï¼Œä½†æ˜¯å®ƒå¤ªè¿‡å¼ºå¤§ï¼Œä»¥è‡´äºä¸€ç›´éƒ½æ²¡ç”¨æ˜ç™½ã€‚åªä¼šç®€å•çš„è½¬æ¢å‘½ä»¤ï¼Œä½†æ˜¯å®é™…æ•ˆæœå¹¶ä¸å¥½ï¼Œæœ€è¿‘å­¦ä¼šäº†ä½¿ç”¨ LaTeX æ¨¡æ¿çš„åŠŸèƒ½ï¼Œè¿™æ‰è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œè¿™æ‰æ˜¯æˆ‘æƒ³è¦çš„ç»“æœã€‚ æ•ˆæœæ¼”ç¤º åŸºç¡€ç¯å¢ƒé…ç½®Markdown ç”Ÿæˆ PDF ä¸»è¦éœ€è¦ä½¿ç”¨ Pandoc å’Œ LaTeX ä¸¤ä¸ªå·¥å…·ï¼Œå…·ä½“å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š Pandoc çš„å®‰è£…Pandoc æ˜¯ç”± John MacFarlane å¼€å‘çš„æ ‡è®°è¯­è¨€è½¬æ¢å·¥å…·ï¼Œå¯å®ç°ä¸åŒæ ‡è®°è¯­è¨€é—´çš„æ ¼å¼è½¬æ¢ã€‚ Windows ä¸‹çš„å®‰è£…ï¼š ä¸‹è½½å®‰è£…åŒ…ç›´æ¥å®‰è£…å³å¯ å¦‚æœå®‰è£…äº† Chocolateï¼šchoco install pandoc å¦‚æœå®‰è£…äº† wingetï¼šwinget install pandoc Linux/FreeBSDä¸‹çš„å®‰è£…ï¼š Pandoc å·²ç»åŒ…å«åœ¨å¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆçš„å®˜æ–¹ä»“åº“ä¸­ï¼Œç›´æ¥ä½¿ç”¨è¯¸å¦‚apt/dnf/yum/pacmanä¹‹ç±»çš„å®‰è£…å·¥å…·ç›´æ¥å®‰è£…å³å¯ macOS ä¸‹çš„å®‰è£…ï¼š brew install pandoc è¯¦ç»†çš„å®‰è£…è¯´æ˜å‚è§ï¼šå®˜æ–¹å®‰è£…æ–‡æ¡£ LaTeX çš„å®‰è£…LaTeX å·¥å…·ï¼Œå»ºè®®å®‰è£… texliveã€‚ Windows ä¸‹çš„å®‰è£…ï¼š å‚è€ƒè¯¥æ–‡ç« ä¸‹è½½å®Œæ•´ texliveï¼Œæ³¨æ„å®‰è£…åéœ€è¦å†å®‰è£… cjkï¼Œcjk-fonts ç­‰ç›¸å…³ package Linux/FreeBSDä¸‹çš„å®‰è£…ï¼š ä½¿ç”¨ apt/dnf/yum/pacman/pkg ç­‰å®‰è£…å·¥å…·å®‰è£… texliveã€texlive-latex ç­‰ç›¸å…³è½¯ä»¶åŒ… macOS ä¸‹çš„å®‰è£…ï¼š ä½¿ç”¨ HomeBrew å®‰è£… texlive å³å¯ æ¨¡æ¿é…ç½®é…ç½® Pandoc æ¨¡æ¿ä¸ºä¿è¯ç”Ÿæˆçš„ pdf æ ¼å¼ï¼ˆè‡ªåŠ¨æ’å…¥å°é¢ã€ç›®å½•é¡µã€é¡µçœ‰é¡µè„šç­‰ä¿¡æ¯ï¼‰ï¼Œåœ¨æœ¬åœ°ç¯å¢ƒä¸­å®‰è£…æ¨¡æ¿ï¼Œå…·ä½“æ­¥éª¤æ˜¯ï¼š ä¸‹è½½MPPL: Markdown to PDF with Pandoc via Latexä»“åº“ å°†template/mppl.latexæ‹·è´åˆ°*/pandoc/templatesç›®å½•ä¸‹ Window ä¸‹ï¼šC:/Users/USERNAME/AppData/Roaming/pandoc/templatesï¼Œå¦‚æœRoamingæ²¡æœ‰pandocç›®å½•ï¼Œè¯·æ‰‹åŠ¨åˆ›å»ºï¼ Linux/FreeBSD/MacOSï¼š~/.pandoc/templates/ é…ç½® LaTeX æ¨¡æ¿æ¨¡æ¿å®šåˆ¶ä¸»è¦ä¿®æ”¹æ¨¡æ¿æœ€å‰é¢çš„æ¨¡æ¿åŸºç¡€é…ç½®ç›¸å…³å†…å®¹ï¼Œä¸»è¦å¯ä¿®æ”¹çš„åŒ…æ‹¬ï¼š å…¬å¸å’Œç»„ç»‡ï¼Œç›®å‰é»˜è®¤æ˜¯â€MPPLâ€ æ­£æ–‡ç¼©è¿›ï¼Œç›®å‰é»˜è®¤æ˜¯ 2emï¼ˆ2 ä¸ªä¸­æ–‡å­—ç¬¦ï¼Œ4 ä¸ªè‹±æ–‡å­—ç¬¦ï¼‰ ä¸»è¦ä¸­æ–‡å­—ä½“å’Œè‹±æ–‡å­—ä½“ï¼šç›®å‰éƒ½æ˜¯å¾®è½¯é›…é»‘ é¡µçœ‰ã€é¡µè„šå±•ç¤ºå†…å®¹ï¼Œç›®å‰æ˜¯ï¼š å·¦é¡µçœ‰ï¼štitle å³é¡µçœ‰ï¼šâ€ä¼ä¸šæœºå¯† - ç¦æ­¢å¤–ä¼ â€ å·¦é¡µè„šï¼šcompany å³é¡µè„šï¼šé¡µç  å­—ä½“è®¾ç½®ç›®å‰é¡µé¢é»˜è®¤çš„å­—ä½“æ˜¯å¾®è½¯é›…é»‘ï¼Œå¯¹äºé Windows ç³»ç»Ÿï¼Œå¯èƒ½ä¸å­˜åœ¨è¯¥å­—ä½“ï¼Œåˆ™æœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š æ‰‹å·¥å®‰è£…å¾®è½¯é›…é»‘å­—ä½“ï¼ˆéœ€è¦ msyh,msyhbd ä¸¤ä¸ªæ–‡ä»¶ï¼‰ ä¿®æ”¹ä¸ºå…¶ä»–å­—ä½“ï¼Œå¦‚è‹¹æ–¹ã€æ–‡æ³‰é©¿ç­‰ è‹¥éœ€è¦å¤šä¸ªå›¢é˜Ÿå…±åŒä½¿ç”¨ï¼Œå»ºè®®é‡‡ç”¨æ–¹æ¡ˆä¸€ã€‚ å¦‚ä½•ç”Ÿæˆ PDFPDF æ–‡ä»¶æŒ‡å®š metadata ä¿¡æ¯åœ¨æ¯ä¸ª Markdown æœ€å‰é¢å¢åŠ ä»¥ä¸‹ä¸»è¦ metadata ä¿¡æ¯ï¼Œmetadata å†…å®¹å¼€å§‹è¡Œå†…å®¹ä¸ºä¸‰ä¸ªâ€œ-â€ï¼Œç»“æŸè¡Œä¸ºä¸‰ä¸ªâ€œ.â€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314title: &quot;MPPL&quot;version: &quot;0.1&quot;subtitle: &quot;Markdown to PDF with Pandoc via LaTeX&quot;date: &quot;2022-08&quot;author: &quot;Dominic&quot;company: COMPANYNAMEfile-code: COMPANY-DEPARTMENT-00000000logo: truelogo-url: ./img/logo.pnghistory: - version: V0.1 author: Dominic date: 2022-08-19 desc: åˆ›å»ºæ–‡æ¡£ å…¶ä»–å¯é€‰é…ç½®é¡¹ç›®å¦‚ä¸‹ï¼š header-left: å·¦é¡µçœ‰ header-right: å³é¡µçœ‰ footer-left: å·¦é¡µè„š footer-right: å³é¡µè„š CJKmainfont: ä¸»è¦ä¸­æ–‡å­—ä½“ mainfont: ä¸»è¦å­—ä½“ lot: æ˜¯å¦åˆ›å»ºè¡¨æ ¼ç›®å½• lof: æ˜¯å¦åˆ›å»ºå›¾ç‰‡ç›®å½• å¯é€‰é…ç½®é¡¹ä¸­ï¼Œå»ºè®®é™¤äº† subtitle å¤–ï¼Œå…¨éƒ¨åœ¨æ¨¡æ¿ä¸­å®šåˆ¶ï¼Œä¸åœ¨ Markdown æ–‡ä»¶ä¸­å®šåˆ¶ Markdown å…¶ä»–ç¼–å†™è¦æ±‚Pandoc é»˜è®¤ä½¿ç”¨çš„ pandoc_markdown æ ¼å¼ï¼Œä¸ºé¿å… Markdown è½¬ pdf æ ¼å¼å¼‚å¸¸ï¼Œåœ¨ç¼–å†™ Markdown çš„æ—¶å€™æœ‰å‡ ä¸ªåŸåˆ™è¦æ±‚ï¼š æ¯ä¸ªæ ‡é¢˜å‰åéƒ½å¿…é¡»æœ‰ç©ºè¡Œ æ¯ä¸ªè¡¨æ ¼å‰åéƒ½å¿…é¡»æœ‰ç©ºè¡Œ æ¯ä¸ªä»£ç å—å‰åæ”¶å¿…é¡»æœ‰ç©ºè¡Œ æ¯ä¸ªåˆ—è¡¨å‰åå¿…é¡»æœ‰ç©ºè¡Œ æ€»ä¹‹ï¼Œä¸åŒæ–‡æœ¬ç±»å‹ä¹‹é—´éƒ½è¦æœ‰ç©ºè¡Œã€‚ ç”Ÿæˆ PDF æ–‡ä»¶1pandoc --listings --pdf-engine=xelatex --template=mppl.latex README.md -o README.pdf æ‘†è„±å‘½ä»¤è¡Œï¼Œä¼˜é›…çš„ VSCode ä¹¦å†™è½¬æ¢æ–¹æ¡ˆVSCode ä¸æ’ä»¶å®‰è£…æ‰“å¼€ VSCode ç¼–è¾‘å™¨ï¼Œåœ¨æ’ä»¶é¡µæœç´¢ markdown-preview-enhancedï¼Œæ¥ç€ç‚¹å‡» Install æŒ‰é’®ã€‚è¯¦æƒ…å‚è€ƒVS Code å®‰è£… MPEã€‚ Markdown Preview Enhanced ä»¥ä¸‹ç®€ç§° MPE ä½¿ç”¨ VSCode ä¹¦å†™ Markdownæ–°å»ºæ–‡ä»¶ä»¥.mdä¸ºåç¼€å³å¯å¼€å§‹ç¼–è¾‘ Markdown æ–‡ä»¶ï¼Œä½¿ç”¨ MPE å®æ—¶é¢„è§ˆä¸å¯¼å‡ºã€‚ é…ç½® MPE ä½¿ç”¨ Pandoc å¯¼å‡ºå³å‡» MPE çš„é¢„è§ˆåŒºåŸŸï¼Œå¯ä»¥çœ‹åˆ° MPE æä¾›å¤šç§å¯¼å‡º PDF çš„æ–¹æ¡ˆï¼Œå¦‚ä½¿ç”¨ Chrome çš„ Puppeteer å¯¼å‡ºï¼ŒPrince å¯¼å‡ºï¼ŒPandoc å¯¼å‡ºç­‰ç­‰ã€‚ åœ¨æœªä½¿ç”¨ Pandoc å‰ï¼Œæˆ‘ä¹Ÿä¸€ç›´ä½¿ç”¨ MPE æä¾›çš„ Chrome æ–¹å¼å¯¼å‡ºï¼Œä½†æ˜¯å¯¼å‡ºçš„ PDF æ’ç‰ˆæ€»æ˜¯ä¸å°½å¦‚æ„ã€‚ç°åœ¨ä»‹ç»å¦‚ä½•ä½¿ç”¨ Pandoc æ–¹å¼å¯¼å‡ºã€‚ åˆ›å»º PDF æ–‡æ¡£ï¼Œä½ éœ€è¦åœ¨ markdown æ–‡ä»¶ä¸­çš„ front-matter é‡Œå£°æ˜ pdf_document çš„è¾“å‡ºç±»å‹ï¼š 123456---output: pdf_document: latex_engine: xelatex pandoc_args: [--template=mppl.latex,--listings]--- front-matterï¼šæ–‡ç« çš„æœ€å¼€å¤´ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡å…ƒæ•°æ®æ”¾çš„åœ°æ–¹ã€‚å’Œå…ƒæ•°æ®æ”¾åœ¨ä¸€èµ·å³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š latex_engineï¼šé»˜è®¤æƒ…å†µä¸‹ PDF æ–‡æ¡£ç”± pdflatex ç”Ÿæˆã€‚ä½ å¯ä»¥ç”¨ latex_engine é€‰é¡¹æ¥å®šä¹‰ä½ æƒ³ç”¨çš„å¼•æ“ã€‚æ”¯æŒçš„å¼•æ“æœ‰ pdflatexï¼Œxelatexï¼Œä»¥åŠ lualatexã€‚è¿™é‡Œéœ€è¦ä½¿ç”¨xelatexã€‚ pandoc_argsï¼šé…ç½® Pandoc æ¥å—çš„ä¸€äº›å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ --template=mppl.latex å’Œ --listings æ¥æŒ‡å®šæ¨¡æ¿å’Œä½¿ç”¨ listingsã€‚è¿™é‡Œé…ç½®çš„å‚æ•°å°±æ˜¯æ‰§è¡Œ Pandoc æ—¶ä½¿ç”¨çš„å‚æ•°ï¼Œä»¥åå°±ä¸éœ€è¦å‘½ä»¤è¡Œè¾“å…¥äº†ã€‚è¿™é‡Œä½¿ç”¨ä¸Šæ–‡çš„mppl.latexæ¨¡æ¿ã€‚ é…ç½®å®Œä¹‹åï¼Œå³å‡»é¢„è§ˆç•Œé¢ï¼Œé€‰æ‹© Pandoc å¯¼å‡ºï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œå³å¯ç”Ÿæˆ PDF æ–‡ä»¶ã€‚ å¸¸è§é—®é¢˜è§£å†³LaTeX ç›¸å…³é”™è¯¯VSCode å¯¼å‡ºå‡ºé”™æ—¶æŠ¥é”™ä¿¡æ¯è¾ƒçŸ­ï¼Œå¹¶ä¸”å¸¸å¸¸ä¸çŸ¥é“å…·ä½“æŠ¥é”™åŸå› åŠä½ç½®ï¼Œå› ä¸ºæ˜¯ LaTeX è½¬æ¢æˆ PDF çš„è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯ã€‚æŠ¥é”™ä½ç½®æ˜¯ LaTeX ä¸­é—´æºç çš„ä½ç½®ï¼Œè€Œä¸æ˜¯ VSCode ä¸­çš„ä½ç½®ã€‚è¿™æ—¶å€™æˆ‘å¸¸ç”¨çš„æ–¹æ³•æ˜¯å…ˆå°† Markdown è½¬ä¸º LaTeXï¼Œç„¶åå†è½¬ä¸º PDFï¼Œåœ¨ LaTeX ç¼–è¾‘å™¨é‡Œå°±å¯ä»¥çœ‹åˆ°é”™è¯¯ä½ç½®äº†ã€‚ æ¯”å¦‚ä¸‹é¢è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€äº›æŠ¥é”™ä¿¡æ¯cant use \\spacefactor in math modeï¼Œä½†æ˜¯å¹¶ä¸çŸ¥é“å…·ä½“å“ªé‡Œçš„é”™è¯¯ã€‚ä»ä¿¡æ¯é‡Œå¯ä»¥çœ‹å‡ºå’Œ\\LaTexæœ‰å…³ï¼Œå¤§æ¦‚èƒ½æ¨æµ‹å‡ºæ˜¯ä½¿ç”¨äº†è¿™ä¸ªå‘½ä»¤ï¼Œå› ä¸ºæ–‡ç« é‡Œä½¿ç”¨äº†è¿™ä¸ªå‘½ä»¤çš„åœ°æ–¹åªæœ‰ä¸€å¤„ã€‚ä½†æ˜¯å¦‚æœæœ‰å…¶ä»–çš„é”™è¯¯ï¼Œå°±å¾ˆéš¾ç¡®å®šäº†ã€‚ Markdown è½¬æ¢ LaTeXè¿™é‡Œè¿˜æ˜¯ä»¥æ¨¡æ¿ä»“åº“çš„README.mdä¸ºä¾‹ï¼Œå½“ç„¶è¿™ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥æ­£å¸¸è½¬æ¢ PDF çš„ï¼Œä¸ä¼šæŠ¥é”™ã€‚è¿™é‡Œåªæ˜¯æ‹¿README.mdåšä¸€ä¸ªå¦‚ä½•ä½¿ç”¨å‘½ä»¤çš„æ¼”ç¤ºã€‚ 1pandoc --listings --template=mppl.latex -s README.md -o README.tex LaTeX ç¼–è¾‘å™¨æ‰“å¼€ï¼Œä»¥ TexStudio ä¸ºä¾‹æ‰“å¼€README.texæ–‡ä»¶ï¼Œç¼–è¯‘ï¼š æˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ï¼Œåªè¦æœç´¢ç›¸å…³é—®é¢˜å³å¯ã€‚ \\LaTeX{} è¿™ä¸ªå®ä¸èƒ½ç”¨åœ¨æ•°å­¦æ¨¡å¼ä¸‹ã€‚ä½†æ˜¯å› ä¸ºæˆ‘åœ¨ Markdown é‡Œå¿…é¡»ä½¿ç”¨ç¾å…ƒç¬¦å·$$æ‰èƒ½è¡¨ç¤º LaTeX ç¯å¢ƒï¼Œæ‰èƒ½æ­£ç¡®è¾“å‡º LaTeX ç¬¦å·ï¼Œè€Œ Markdown è½¬æ¢æˆ LaTeX æºç æ—¶ï¼Œè¿™ä¸ªå®å°±ä¼šè¢«åŒ…è£¹åœ¨æ•°å­¦ç¯å¢ƒé‡Œï¼Œå°±ä¼šæŠ¥é”™ã€‚å¦‚æœæˆ‘æƒ³åœ¨ PDF é‡Œæ˜¾ç¤ºè¿™ä¸ªç¬¦å·ï¼Œé‚£å°±åœ¨ Markdown é‡Œä¸ä½¿ç”¨ç¾å…ƒç¬¦å·$$ï¼Œè€Œæ˜¯ç›´æ¥è¾“å…¥\\LaTeX&#123;&#125;å³å¯ï¼Œå†å¯¼å‡º PDF æ—¶å°±ä¸ä¼šæŠ¥é”™ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"LaTeX","slug":"LaTeX","permalink":"http://example.com/tags/LaTeX/"},{"name":"Markdown","slug":"Markdown","permalink":"http://example.com/tags/Markdown/"},{"name":"Pandoc","slug":"Pandoc","permalink":"http://example.com/tags/Pandoc/"},{"name":"PDF","slug":"PDF","permalink":"http://example.com/tags/PDF/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://example.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"IIC åè®®","slug":"IICåè®®","date":"2022-08-19T06:16:29.000Z","updated":"2022-08-19T06:16:29.000Z","comments":true,"path":"2022/08/19/IICåè®®/","link":"","permalink":"http://example.com/2022/08/19/IIC%E5%8D%8F%E8%AE%AE/","excerpt":"","text":"IIC æ¦‚è¿°IICï¼ˆInter-Integrated Circuitï¼‰ï¼Œä¹Ÿå« I2Cï¼ˆInter-IC Communicationï¼‰æ€»çº¿ï¼Œæ˜¯ä¸€ç§ä¸²è¡Œé€šä¿¡åè®®ï¼Œç”± Philips å…¬å¸åœ¨ 1980 å¹´ä»£åˆå¼€å‘ã€‚IIC æ€»çº¿ç”¨äºè¿æ¥å¾®æ§åˆ¶å™¨ã€ä¼ æ„Ÿå™¨å’Œå…¶ä»–é›†æˆç”µè·¯ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š åŒçº¿åˆ¶ç»“æ„ç®€å•ï¼šç”±ä¸€æ¡æ•°æ®çº¿ï¼ˆSDAï¼‰å’Œä¸€æ¡æ—¶é’Ÿçº¿ï¼ˆSCLï¼‰ç»„æˆã€‚ å¤šä¸»æœºå¹¶è¡Œé€šä¿¡ï¼šå¤šä¸ª Master è®¾å¤‡å¯åŒæ—¶æ¥å…¥åŒä¸€æ¡ IIC æ€»çº¿ä¸Šè¿›è¡Œæ•°æ®äº¤æ¢ã€‚ ç¡¬ä»¶èµ„æºå ç”¨å°‘ï¼šåªè¦ä¸¤æ ¹çº¿å°±å¯ä»¥è¿æ¥å¤šä¸ªå™¨ä»¶ã€‚ æ•°æ®ä¼ è¾“é€Ÿç‡å¿«ï¼šç°ä»£ IIC æ€»çº¿çš„æœ€é«˜ä¼ è¾“é€Ÿç‡å¯è¾¾åˆ° 400Kbpsã€‚ ä½åŠŸè€—è®¾è®¡ï¼šä½¿ç”¨è€…å¯ä»¥é€šè¿‡è½¯ä»¶æ§åˆ¶è®¾å¤‡è¿›å…¥ç¡çœ æ¨¡å¼ä»¥å‡å°‘åŠŸè€—ã€‚ ä¼ è¾“åè®®å†™æ“ä½œ ä¸»æœºè¦å‘å‡ºä¸€ä¸ªèµ·å§‹ä¿¡å· ä¸»æœºå‘å‡ºä¸€ä¸ªè®¾å¤‡åœ°å€ç”¨æ¥ç¡®å®šæ˜¯å¾€é‚£ä¸€ä¸ªèŠ¯ç‰‡å†™æ•°æ®ï¼Œä»¥åŠå†™æ ‡è®°ï¼ˆ0ï¼‰ ä»è®¾å¤‡å›åº”ï¼ˆç”¨æ¥ç¡®å®šè¿™ä¸ªè®¾å¤‡æ˜¯é¦™å­˜åœ¨ï¼Œç„¶åå°±å¯ä»¥ä¼ è¾“æ•°æ®ï¼‰ ä¸»è®¾å¤‡å‘é€ä¸€ä¸ªå­—èŠ‚æ•°æ®ç»™ä»è®¾å¤‡ï¼Œå¹¶ç­‰å¾…å›åº” æ¯ä¼ è¾“ä¸€å­—èŠ‚æ•…æ®ï¼Œæ¥æ”¶æ–¹è¦æœ‰ä¸€ä¸ªå›åº”ä¿¡å·ï¼ˆç¡®å®šæ•…æ®æ˜¯å¦æ¥å—å®Œæˆï¼‰ï¼Œç„¶åå†ä¼ è¾“ä¸‹ä¸€ä¸ªæ•…æ®ã€‚ æ•°æ®å‘é€å®Œä¹‹åï¼Œä¸»æœºå°±ä¼šå‘é€ä¸€ä¸ªåœæ­¢ä¿¡å·ã€‚ è¯»æ“ä½œ ä¸»æœºè¦å‘å‡ºä¸€ä¸ªèµ·å§‹ä¿¡å· ä¸»æœºå‘å‡ºä¸€ä¸ªè®¾å¤‡åœ°å€ç”¨æ¥ç¡®å®šæ˜¯å¾€é‚£ä¸€ä¸ªèŠ¯ç‰‡è¯»æ•°æ®ï¼Œä»¥åŠè¯»æ ‡è®°ï¼ˆ1ï¼‰ ä»è®¾å¤‡å›åº”ï¼ˆç”¨æ¥ç¡®å®šè¿™ä¸ªè®¾å¤‡æ˜¯å¦å­˜åœ¨ï¼‰ï¼Œç„¶åå°±å¯ä»¥ä¼ è¾“æ•°æ® ä»è®¾å¤‡å‘é€ä¸€ä¸ªå­—èŠ‚æ”¾æ®ç»™ä¸»è®¾å¤‡ï¼Œå¹¶ç­‰å¾…å›åº” æ¯ä¼ è¾“ä¸€å­—èŠ‚æ•°æ®ï¼Œæ¥æ”¶æ–¹è¦æœ‰ä¸€ä¸ªå›åº”ä¿¡å·ï¼ˆç¡®å®šæ•°æ®æ˜¯å¦æ¥å—å®Œæˆï¼‰ï¼Œç„¶åå†ä¼ è¾“ä¸‹ä¸€ä¸ªæ”¾æ®ã€‚ æ•°æ®å‘é€å®Œä¹‹åï¼Œä¸»èŠ¯ç‰‡å°±ä¼šå‘é€ä¸€ä¸ªåœæ­¢ä¿¡å·ã€‚ çŠ¶æ€ç©ºé—²çŠ¶æ€ SCL å’Œ SDA éƒ½ä¸ºé«˜ç”µå¹³ æ­¤æ—¶å„ä¸ªå™¨ä»¶çš„è¾“å‡ºçº§åœºæ•ˆåº”ç®¡å‡å¤„åœ¨æˆªæ­¢çŠ¶æ€ï¼Œå³é‡Šæ”¾æ€»çº¿ï¼Œç”±ä¸¤æ¡ä¿¡å·çº¿å„è‡ªçš„ä¸Šæ‹‰ç”µé˜»æŠŠç”µå¹³æ‹‰é«˜ã€‚ èµ·å§‹çŠ¶æ€ SCL ä¸ºé«˜ç”µå¹³ï¼ŒSDA ç”±é«˜ç”µå¹³å˜ä¸ºä½ç”µå¹³ æ ‡å¿—ç€ä¸€æ¬¡æ•°æ®ä¼ è¾“çš„å¼€å§‹ã€‚èµ·å§‹ä¿¡å·æ˜¯ç”±ä¸»æ§å™¨ä¸»åŠ¨å»ºç«‹çš„ï¼Œåœ¨å»ºç«‹è¯¥ä¿¡å·ä¹‹å‰ I2C æ€»çº¿å¿…é¡»å¤„äºç©ºé—²çŠ¶æ€ã€‚ ç»“æŸçŠ¶æ€ SCL ä¸ºé«˜ç”µå¹³ï¼ŒSDA ç”±ä½ç”µå¹³å˜ä¸ºé«˜ç”µå¹³ æ•°æ®ä¼ è¾“çŠ¶æ€ SCL é«˜ç”µå¹³æœŸé—´ï¼ŒSDL ä¿æŒç¨³å®š SDL ä¸ºé«˜ç”µå¹³è¡¨ç¤º 1ï¼Œä½ç”µå¹³è¡¨ç¤º 0 åœ¨ IIC æ€»çº¿ä¸Šä¼ é€çš„æ¯ä¸€ä½æ•°æ®éƒ½æœ‰ä¸€ä¸ªæ—¶é’Ÿè„‰å†²ç›¸å¯¹åº” (æˆ–åŒæ­¥æ§åˆ¶)ï¼Œå³åœ¨ SCL ä¸²è¡Œæ—¶é’Ÿçš„é…åˆä¸‹ï¼Œæ•°æ®åœ¨ SDA ä¸Šä»é«˜ä½å‘ä½ä½ä¾æ¬¡ä¸²è¡Œä¼ é€æ¯ä¸€ä½çš„æ•°æ®ã€‚è¿›è¡Œæ•°æ®ä¼ é€æ—¶ï¼Œåœ¨ SCL å‘ˆç°é«˜ç”µå¹³æœŸé—´ï¼ŒSDA ä¸Šçš„ç”µå¹³å¿…é¡»ä¿æŒç¨³å®šï¼Œä½ç”µå¹³ä¸ºæ•°æ® 0ï¼Œé«˜ç”µå¹³ä¸ºæ•°æ® 1ã€‚åªæœ‰åœ¨ SCL ä¸ºä½ç”µå¹³æœŸé—´ï¼Œæ‰å…è®¸ SDA ä¸Šçš„ç”µå¹³æ”¹å˜çŠ¶æ€ã€‚ä¸‹å›¾æ˜¯ 0xaa åœ¨ IIC æ€»çº¿ä¸Šæœ‰æ•ˆä¼ è¾“ (æœ‰æ•ˆä¼ è¾“æ˜¯æŒ‡ç¬¬ 9 ä¸ªæ—¶é’Ÿçš„é«˜ç”µå¹³æœŸé—´ï¼Œä»æœºç»™ä¸»æœºåé¦ˆäº†ä¸€ä¸ªæœ‰æ•ˆçš„åº”ç­”ä½ 0) çš„å›¾ç¤º åœ¨æ—¶åºå›¾ä¸­ï¼ŒMSB ä»£è¡¨çš„æ˜¯ Most Significant Bitï¼ˆæœ€é«˜ä½ï¼‰ã€‚å®ƒè¡¨ç¤ºäºŒè¿›åˆ¶æ•°ä¸­æœ€å·¦è¾¹çš„ä¸€ä½ï¼Œä¹Ÿå°±æ˜¯æœ€é«˜ä½ã€‚åœ¨ä¸€ä¸ª n ä½çš„äºŒè¿›åˆ¶æ•°ä¸­ï¼Œæœ€é«˜ä½çš„æƒå€¼ä¸º 2^(n-1)ã€‚å› æ­¤ï¼ŒMSB åœ¨æ—¶åºå›¾ä¸­é€šå¸¸ç”¨æ¥æŒ‡ç¤ºäºŒè¿›åˆ¶æ•°æˆ–æ•°æ®å­—çš„æœ€é«˜ä½ã€‚åŒç†ï¼ŒLSB ä»£è¡¨çš„æ˜¯ Least Significant Bitï¼ˆæœ€ä½ä½ï¼‰ã€‚å®ƒè¡¨ç¤ºäºŒè¿›åˆ¶æ•°ä¸­æœ€å³è¾¹çš„ä¸€ä½ï¼Œä¹Ÿå°±æ˜¯æœ€ä½ä½ã€‚ åº”ç­”çŠ¶æ€ SCL ä¸ºé«˜ç”µå¹³ï¼ŒSDA ç”±é«˜ç”µå¹³å˜ä¸ºä½ç”µå¹³ï¼ˆä¸Šå›¾æœ€åçš„ ACK æ ‡è®°ï¼‰ I2C æ€»çº¿ä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯ä»¥ 8 ä½å­—èŠ‚ä¼ é€çš„ï¼Œå‘é€å™¨ (ä¸»æœº) æ¯å‘é€ä¸€ä¸ªå­—èŠ‚ï¼Œå°±åœ¨ç¬¬ 9 ä¸ªæ—¶é’Ÿè„‰å†²æœŸé—´é‡Šæ”¾æ•°æ®çº¿ï¼Œç”±ä»è®¾å¤‡åé¦ˆä¸€ä¸ªåº”ç­”ä¿¡å·ã€‚åº”ç­”ä¿¡å·ä¸ºä½ç”µå¹³æ—¶ï¼Œè§„å®šä¸ºæœ‰æ•ˆåº”ç­”ä½ (ACK ç®€ç§°åº”ç­”ä½)ï¼Œè¡¨ç¤ºæ¥æ”¶å™¨å·²ç»æˆåŠŸåœ°æ¥æ”¶äº†è¯¥å­—èŠ‚ï¼›åº”ç­”ä¿¡å·ä¸ºé«˜ç”µå¹³æ—¶ï¼Œè§„å®šä¸ºéåº”ç­”ä½ (NACK)ï¼Œä¸€èˆ¬è¡¨ç¤ºæ¥æ”¶å™¨æ¥æ”¶è¯¥å­—èŠ‚æ²¡æœ‰æˆåŠŸã€‚å¯¹äºåé¦ˆæœ‰æ•ˆåº”ç­”ä½ ACK çš„è¦æ±‚æ˜¯ï¼Œæ¥æ”¶å™¨åœ¨ç¬¬ 9 ä¸ªæ—¶é’Ÿè„‰å†²ä¹‹å‰çš„ä½ç”µå¹³æœŸé—´å°† SDA çº¿æ‹‰ä½ï¼Œå¹¶ä¸”ç¡®ä¿åœ¨è¯¥æ—¶é’Ÿçš„é«˜ç”µå¹³æœŸé—´ä¸ºç¨³å®šçš„ä½ç”µå¹³ã€‚ ä»¥ä¸‹å››ç§æƒ…å†µ IIC é€šä¿¡è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿéåº”ç­”ä½ï¼ˆNACKï¼‰ï¼š ä»æœºæ­£åœ¨å¤„ç†æŸäº›å®æ—¶çš„æ“ä½œæ— æ³•ä¸ä¸»æœºå®ç° IIC é€šä¿¡çš„æ—¶å€™ï¼Œä»æœºä¼šç»™ä¸»æœºåé¦ˆä¸€ä¸ªéåº”ç­” (NACK) ä¸»æœºå‘é€æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œä»æœºæ— æ³•è§£æå‘é€çš„æ•°æ®ï¼Œä»æœºä¹Ÿä¼šç»™ä¸»æœºåé¦ˆä¸€ä¸ªéåº”ç­”ä½ (NACK) ä¸»æœºå‘é€æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œä»æœºæ— æ³•å†ç»§ç»­æ¥æ”¶æ•°æ®ï¼Œä»æœºä¹Ÿä¼šç»™ä¸»æœºåé¦ˆä¸€ä¸ªéåº”ç­”ä½ (NACK) ä¸»æœºä»ä»æœºä¸­è¯»å–æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œä¸»æœºä¸æƒ³å†æ¥æ”¶æ•°æ®ï¼Œä¸»æœºä¼šç»™ä»æœºåé¦ˆä¸€ä¸ªéåº”ç­”ä½ (NACK)ï¼Œæ³¨æ„ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸»æœºç»™ä»æœºåé¦ˆä¸€ä¸ªéåº”ç­”ä½ (NACK) å‚è€ƒèµ„æ–™ IICæ€»çº¿çš„åŸç†ä¸Verilogå®ç° - jgliu - åšå®¢å›­ IICæ—¶åºåˆ†æ - å¤å¤©å¸ˆå¦¹ - åšå®¢å›­","categories":[{"name":"Embedded Development","slug":"Embedded-Development","permalink":"http://example.com/categories/Embedded-Development/"}],"tags":[{"name":"SoC","slug":"SoC","permalink":"http://example.com/tags/SoC/"},{"name":"IIC","slug":"IIC","permalink":"http://example.com/tags/IIC/"},{"name":"MCU","slug":"MCU","permalink":"http://example.com/tags/MCU/"},{"name":"BootROM","slug":"BootROM","permalink":"http://example.com/tags/BootROM/"}]},{"title":"ç¼–è¯‘é”™è¯¯ä»¥è‹±æ–‡è¾“å‡º","slug":"ç¼–è¯‘é”™è¯¯ä»¥è‹±æ–‡è¾“å‡º","date":"2022-08-16T14:31:43.000Z","updated":"2022-08-16T14:35:43.000Z","comments":true,"path":"2022/08/16/ç¼–è¯‘é”™è¯¯ä»¥è‹±æ–‡è¾“å‡º/","link":"","permalink":"http://example.com/2022/08/16/%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%E4%BB%A5%E8%8B%B1%E6%96%87%E8%BE%93%E5%87%BA/","excerpt":"","text":"å› ä¸ºç»ˆç«¯é…ç½®çš„åŸå› ï¼Œç¼–è¯‘çš„ç»“æœè¾“å‡ºæ˜¯ä¸­æ–‡ï¼Œè¿™æ ·æœç´¢é—®é¢˜ä¸å¦‚è‹±æ–‡çš„è¡¨è¿°ç²¾ç¡®ã€‚é…ç½®ç»ˆç«¯çš„è¯­è¨€ä¸ºè‹±æ–‡ï¼Œå°±å¯ä»¥è¾“å‡ºè‹±æ–‡ã€‚ 1export LANG=en_US","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"è§£å†³ cast from pointer to integer of different size","slug":"è§£å†³cast-from-pointer-to-integer-of-different-size","date":"2022-08-16T03:42:24.000Z","updated":"2022-10-15T02:59:01.809Z","comments":true,"path":"2022/08/16/è§£å†³cast-from-pointer-to-integer-of-different-size/","link":"","permalink":"http://example.com/2022/08/16/%E8%A7%A3%E5%86%B3cast-from-pointer-to-integer-of-different-size/","excerpt":"","text":"ä¿ç•™ç°åœº12345void* foo(void *dst, ...) &#123; // some code unsigned int offset = (unsigned int) dst % 8; // warning here! // some code continue...&#125; å†™é©±åŠ¨ç¨‹åºæ—¶ç»å¸¸ä¼šç›´æ¥å¯¹åœ°å€è¿›è¡Œä¿®æ”¹ï¼Œé…ç½®å¯„å­˜å™¨çš„å€¼ï¼Œä¹Ÿä¼šå°†åœ°å€çš„å€¼ä½œä¸ºæ•°æ®è¿›è¡Œä¼ é€’ï¼Œè¿™å°±ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒæŒ‡é’ˆå¼ºè½¬æˆæ•´å‹ï¼Œç±»å‹ä¸åŒ¹é…æ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚ æ¢ç©¶åŸå› å‡ºç°è¿™ä¸ªè­¦å‘Šçš„åŸå› æ˜¯ï¼Œå°†void*ç±»å‹å¼ºè½¬æˆunsigned intæ˜¯ä¸å¯ç§»æ¤çš„ã€‚ä»€ä¹ˆå«ä¸å¯ç§»æ¤å‘¢ï¼Ÿ æˆ‘ä»¬çŸ¥é“æŒ‡é’ˆç±»å‹ï¼Œåœ¨ 32 ä½ç³»ç»Ÿä¸‹æ˜¯ 4 å­—èŠ‚ï¼Œåœ¨ 64 ä½ç³»ç»Ÿä¸‹æ˜¯ 8 å­—èŠ‚ï¼Œè€Œunsigned intä¸ç®¡åœ¨ä»€ä¹ˆç³»ç»Ÿä¸‹éƒ½æ˜¯æ˜¯ 4 å­—èŠ‚ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå°†void*ç±»å‹å¼ºè½¬æˆunsigned intï¼Œåœ¨ 64 ä½ç³»ç»Ÿä¸‹å°±æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ä¿å­˜çœŸæ­£çš„æ•°æ®ã€‚ è§£å†³æ–¹æ³•ç²—æš´åœ°ç”¨doubleæ¥æ¥æ”¶å…ˆæ¥æ”¶ï¼Œå†æˆªæ–­ï¼š 12345void* foo(void *dst, ...) &#123; // some code unsigned int offset = (unsigned int)(unsigned double) dst % 8; // warning here! // some code continue...&#125; uintptr_tuintptr_t ä¿è¯è¶³å¤Ÿå®½ï¼Œä»¥ä¾¿å°† void* è½¬æ¢ä¸º uintptr_t å¹¶å†æ¬¡è¿”å›å°†äº§ç”ŸåŸå§‹æŒ‡é’ˆå€¼ã€‚è¿˜æœ‰ä¸€ä¸ªç±»å‹ intptr_tï¼Œå®ƒæ˜¯æœ‰ç¬¦å·çš„ï¼› 1234567#include &lt;stdint.h&gt;// æˆ–è€… &lt;inttypes.h&gt;void* foo(void *dst, ...) &#123; // some code unsigned int offset = (uintptr_t) dst % 8; // warning here! // some code continue...&#125;","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"DEBUG åŸç†","slug":"DEBUGåŸç†","date":"2022-08-14T06:17:26.000Z","updated":"2022-10-15T03:14:29.194Z","comments":true,"path":"2022/08/14/DEBUGåŸç†/","link":"","permalink":"http://example.com/2022/08/14/DEBUG%E5%8E%9F%E7%90%86/","excerpt":"","text":"äº†è§£è°ƒè¯•åŸç†æ—¶çœ‹åˆ°äº†ä¸€ä¸ªè´¨é‡æ¯”è¾ƒé«˜çš„è§†é¢‘ï¼Œã€è›‹é¥¼åµŒå…¥å¼ã€‘ä¸€èµ·æ¢ç©¶è°ƒè¯•åŸç†ã€‚UP é€šä¿—ï¼Œå½¢è±¡åœ°è®²è§£äº† DEBUG çš„ä¸€äº›åŸç†ï¼Œå€¼å¾—åå¤è§‚çœ‹ï¼Œä½†æ˜¯è§†é¢‘ä¸å¦‚æ–‡å­—æŸ¥é˜…æ•ˆç‡é«˜ï¼Œé‚è®°å½•äº†ä»¥ä¸‹æ–‡ç¨¿å†…å®¹ã€‚ ä»€ä¹ˆæ˜¯ JTAG1985 å¹´ï¼Œå‡ å®¶åŠå¯¼ä½“å‚å•†ä¸ºäº†è§£å†³æ¿çº§æµ‹è¯•çš„é—®é¢˜ï¼Œæˆç«‹äº† Joint Test Action Groupï¼ˆJTAGï¼‰è”åˆæµ‹è¯•è¡ŒåŠ¨å°ç»„ï¼Œä»–ä»¬å¸Œæœ›å°†æµ‹è¯•ç‚¹å’Œæµ‹è¯•ç”µè·¯é›†æˆåœ¨èŠ¯ç‰‡å†…éƒ¨å¼•è„šå¤„ã€‚åŒæ—¶ï¼Œç•™å‡ºä¸€ä¸ªç»Ÿä¸€åè®®çš„æ¥å£ï¼Œå¤§å®¶éƒ½èƒ½é€šè¿‡è¿™ä¸ªæ¥å£æ¥è®¿é—®èŠ¯ç‰‡çš„è¾“å…¥ä¸è¾“å‡ºçŠ¶æ€ã€‚è¿™æ ·å°±çœå»äº†æ¿çº§æµ‹è¯•æ˜¯çš„ç‰©ç†æ¥è§¦ï¼ŒåŒæ—¶è¿˜èƒ½è¿›è¡Œé€»è¾‘æ€§è°ƒè¯•ã€‚åæ¥ IEEE ç»„ç»‡ï¼Œå°†è¿™ä¸ªæ–¹æ¡ˆåˆ¶å®šæˆäº†æ ‡å‡† IEEE 1149.1ï¼Œè¿™å°±æ˜¯ç°åœ¨æˆ‘ä»¬å¸¸å¬åˆ°çš„ JTAG è°ƒè¯•ã€‚ è¾¹ç•Œæ‰«ææŠ€æœ¯å®ç° JTAG è°ƒè¯•æœ€é‡è¦çš„ä¸€ä¸ªæŠ€æœ¯å°±æ˜¯è¾¹ç•Œæ‰«ææŠ€æœ¯ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ç»™èŠ¯ç‰‡çš„æ¯ä¸€ä¸ªè¾“å…¥è¾“å‡ºå¼•è„šï¼Œæ·»åŠ ä¸€ä¸ªç§»ä½å¯„å­˜å™¨å•å…ƒï¼Œä¹Ÿç§°ä¸ºè¾¹ç•Œæ‰«æå•å…ƒï¼ˆBoundary Scan Cellï¼ŒBSCï¼‰ã€‚é€šè¿‡å®ƒä¸€è¾¹å¯ä»¥å®ç°å¯¹èŠ¯ç‰‡è¾“å‡ºæ•°æ®çš„æˆªå–ï¼Œå¦ä¸€è¾¹å¯ä»¥å®Œæˆå¯¹è¾“å…¥æ•°æ®çš„æ›¿ä»£ã€‚æ­£å¸¸è¿è¡ŒçŠ¶æ€ä¸‹ï¼Œè¿™äº›å¯„å­˜å™¨åˆæ˜¯é€æ˜èˆ¬çš„å­˜åœ¨ã€‚ è¿™äº›ä½äºå¼•è„šè¾¹ç•Œçš„ç§»ä½å¯„å­˜å™¨ï¼Œè¿˜å¯ä»¥ä¸²åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€æ¡è¾¹ç•Œæ‰«æé“¾ï¼Œä»¥ä¸²è¡Œçš„æ–¹å¼ä»å¤–éƒ¨æ›´æ–°æ‰«æå•å…ƒä¸Šçš„æ•°æ®ï¼Œä»¥åŠå¯¹å¤–è¾“å‡ºè¾¹ç•Œæ‰«æå•å…ƒæ•è·çš„æ•°æ®ã€‚å¦‚æœæ¿ä¸Šæœ‰å¤šä¸ªè¿™æ ·çš„èŠ¯ç‰‡ï¼Œä»–ä»¬è¿˜èƒ½ä»¥èŠèŠ±é“¾çš„å½¢å¼ä¸²è”åœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±å¤§å¤§æ–¹ä¾¿äº†æµ‹è¯•çš„è¿‡ç¨‹ã€‚ è¦å®ç°å¯¹å†…éƒ¨ç§»ä½å¯„å­˜å™¨å•å…ƒæˆ–è€…è¯´å¯¹æ•´ä¸ªæ‰«æé“¾çš„è®¿é—®å’Œæ“ä½œï¼Œä¾¿ä¾èµ–äº JTAG è°ƒè¯•åè®®å’Œç›¸åº”çš„ç‰©ç†æ¥å£ã€‚JTAG æ ‡å‡†æ¥å£åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š TDI(Test Data In) TDO(Test Data Out) TCLK(Test Clock) TMS(Test Mode Select) TRST(Test Reset)ï¼šå¯é€‰ï¼Œç”¨äºå¤ä½ è°ƒè¯•é€»è¾‘çš„å®ç°ï¼Œæ˜¯é€šè¿‡èŠ¯ç‰‡å†…éƒ¨çš„ TAPï¼ˆTest Access Portï¼‰æ¥å®Œæˆçš„ã€‚æ¨¡å¼çŠ¶æ€ä¿¡å· TMS é…åˆæµ‹è¯•æ—¶é’Ÿä¿¡å· TCLKï¼Œä»¥ä¸€å®šçš„æ—¶åºè¿›å…¥åˆ° TAP æ§åˆ¶å™¨åï¼Œç”± TAP æ§åˆ¶å™¨å†…éƒ¨çš„çŠ¶æ€æœºè½¬åŒ–ä¸ºç›¸åº”çš„æ§åˆ¶åŠ¨ä½œã€‚ä»è€Œå®Œæˆæ•°æ®çš„ç§»ä½ï¼Œå¼•è„šçŠ¶æ€çš„æ•è·å’Œæ›´æ–°ã€‚ è®¾å¤‡ ID å¯„å­˜å™¨æ„æˆçš„æ‰«æé“¾ï¼Œæ¿å¡ä¸€è¿ä¸Šè°ƒè¯•å™¨ï¼Œé€šè¿‡å¯¹è¿™æ¡æ‰«æé“¾çš„è®¿é—®ï¼Œå°±èƒ½å¤Ÿè¯†åˆ«åˆ°è¢«è°ƒè¯•èŠ¯ç‰‡çš„ä¿¡å·ã€‚å­˜æ”¾è°ƒè¯•æœºåˆ¶ç›¸å…³é…ç½®çš„æ•°æ®å¯„å­˜å™¨ï¼Œæ‰€æ„æˆçš„æ‰«æé“¾ï¼Œåé¢æ–­ç‚¹å’Œå•æ­¥è°ƒè¯•æ—¶å°±ä¼šç”¨åˆ°ã€‚ä»¥åŠç§»ä½çš„ BYPASS å¯„å­˜å™¨ï¼Œå½“è°ƒè¯•é“¾è·¯ä¸Šæœ‰å¤šä¸ªèŠ¯ç‰‡è¿æ¥æ—¶ï¼Œæ¥å‡å°‘æ€»è°ƒè¯•é“¾è·¯çš„é•¿åº¦ã€‚ ä»¥ä¸Šéƒ½å±äºæ•°æ®å¯„å­˜å™¨æ„æˆæ‰«æé“¾ï¼Œå› ä¸ºæƒ³è¦åœ¨ä»–ä»¬ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œéœ€è¦å¼•å…¥å¦å¤–çš„æŒ‡ä»¤å¯„å­˜å™¨ï¼Œä»¥åŠå¯¹åº”çš„æ‰«æé“¾ï¼Œè¿™æ ·è°ƒè¯•ä¸»æœºå°†ä¸åŒçš„è°ƒè¯•å‘½ä»¤å†™åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­ï¼Œå°±å¯ä»¥é€‰é€šéœ€è¦è°ƒè¯•çš„æ•°æ®é“¾è·¯ã€‚æ•°æ®ä¸æŒ‡ä»¤å¯„å­˜å™¨ä¸¤ç§é“¾è·¯çš„åˆ‡æ¢ï¼Œå°±é€šè¿‡ TAP æ§åˆ¶å™¨å®Œæˆã€‚ è¡¥å……ï¼šå¦‚æœèŠ¯ç‰‡æ”¯æŒ JTAG è°ƒè¯•ï¼Œé‚£ä¹ˆèŠ¯ç‰‡ä¸Šå°±å¿…é¡»æœ‰ä¸Šè¿°çš„å››ä¸ªæ¥å£ï¼ŒTDIï¼ŒTDOï¼ŒTCLKï¼ŒTMSã€‚èŠ¯ç‰‡å¤–æœ‰ä¸ª Adapter ä¸ä¹‹ Pin to Pin è¿æ¥ï¼Œè´Ÿè´£åè®®è½¬æ¢ï¼ŒæŠŠ USB çš„ JTAG æ§åˆ¶ä¿¡æ¯æŒ‰ JTAG åè®®è½¬æ¢è¾“å‡ºï¼Œæ»¡è¶³åè®®å®šä¹‰çš„ç”µæ°”ç‰¹æ€§ã€‚Adapter ä¸ Host è¿æ¥ï¼ŒHost å¯ä»¥æ˜¯æˆ‘ä»¬çš„ PCï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªåµŒå…¥å¼è°ƒè¯•å™¨ã€‚Host ä¸Šé€šå¸¸éœ€è¦è¿è¡Œä¸€äº›è½¯ä»¶ï¼Œå¦‚ OpenOCDï¼Œè´Ÿè´£æŠŠ GDB çš„é«˜çº§åˆ«å‘½ä»¤è½¬æ¢æˆ JTAG å‘½ä»¤ï¼Œå¹¶é€šè¿‡ç‰¹å®š Adapter çš„è¦æ±‚è¿›è¡Œæ‰“åŒ…ï¼Œè°ƒç”¨ OS æä¾›çš„ USB/ETH/PCI é©±åŠ¨å‘é€å‡ºå»ã€‚GDB ä¸ OpenOCD é€šè¿‡ä¸€äº›è¿œç¨‹åè®®ï¼Œå¦‚ TCP/IPï¼Œè¿›è¡Œé€šä¿¡ã€‚è¿™æ ·å°±èƒ½å¤Ÿè°ƒè¯• Chipã€‚ æ–­ç‚¹æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿé€šè¿‡ä»¥ä¸Š JTAG è°ƒè¯•æ¥å£ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿæµ‹è¯•å¼•è„šçš„è¾“å…¥è¾“å‡ºäº†ï¼ŒåŒæ—¶ä¹Ÿè·å¾—äº†è§‚å¯Ÿå’Œæ”¹å˜èŠ¯ç‰‡å†…éƒ¨æ•°æ®çš„æœºä¼šï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å¦‚ä½•è¿›è¡Œè°ƒè¯•å‘¢ï¼Ÿæ¯”å¦‚æ‰“ä¸ªæ–­ç‚¹ï¼Ÿ æ–­ç‚¹ä½œä¸ºä¸€ç§å¹²é¢„æ€§è°ƒè¯•ï¼Œæ ¹æ®è°ƒè¯•è¡Œä¸ºçš„ä¸åŒï¼Œåˆ†ä¸ºç›‘æ§æ¨¡å¼å’Œä¸­æ­¢æ¨¡å¼ã€‚ ç›‘æ§æ¨¡å¼ï¼ˆè½¯ä»¶æ–­ç‚¹ï¼‰ï¼šä¼šè§¦å‘å¼‚å¸¸ï¼Œäº¤ç”±ç›¸åº”çš„è½¯ä»¶ç¨‹åºæ¥å¤„ç†ï¼Œå¤„ç†å™¨ä»ç„¶å¤„äºè¿è¡ŒçŠ¶æ€ã€‚ ä¸­æ­¢æ¨¡å¼ï¼ˆç¡¬ä»¶æ–­ç‚¹ï¼‰ï¼Œä½¿å¤„ç†å™¨è¿›å…¥éæ­£å¸¸è¿è¡Œçš„è°ƒè¯•çŠ¶æ€ã€‚ ä»¥ ARM æ¶æ„æ¥è¯´ï¼Œæœ€åˆå·¥ç¨‹å¸ˆæƒ³åˆ°çš„åŠæ³•æ˜¯æ’å…¥ä¸€æ¡æŒ‡ä»¤é›†ä¸­æ²¡æœ‰å®šä¹‰çš„æ— æ•ˆæŒ‡ä»¤ï¼Œæ¥æ›¿æ¢æ‰å¸Œæœ›æ‰“æ–­æŒ‡ä»¤å¤„çš„æºæŒ‡ä»¤ã€‚è¿™æ ·å†…æ ¸è¿è¡Œåˆ°è¿™æ¡æŒ‡ä»¤æ—¶ï¼Œå°±ä¼šè¿›å…¥åˆ°æ— æ•ˆæŒ‡ä»¤çš„æœåŠ¡ç¨‹åºï¼Œåœ¨è¿™ä¸ªå¼‚å¸¸çš„æœåŠ¡ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å†å»åšæƒ³è¦çš„è°ƒè¯•æ“ä½œï¼Œæ“ä½œå®Œæˆåï¼Œè¿˜åŸå½“æ—¶è¢«æ›¿æ¢çš„æŒ‡ä»¤ã€‚å¹¶ç»§ç»­æ‰§è¡Œã€‚ åæ¥ ARMv5 å¼€å§‹å¼•å…¥ä¸“é—¨ç”¨äºè°ƒè¯•çš„BKPTæŒ‡ä»¤ï¼Œç±»ä¼¼ä¸ X86 æŒ‡ä»¤é›†çš„INT3æŒ‡ä»¤ï¼Œä½†ä¸ç®¡æ˜¯ä¸æ˜¯ä¸“ç”¨æŒ‡ä»¤ï¼Œä»–ä»¬éƒ½å±äºè½¯ä»¶ä¸­æ–­ã€‚è¿™æ„å‘³ç€æˆ‘æƒ³è¦å®æ—¶åœ°æ·»åŠ è¿™ç§æ–­ç‚¹ï¼Œå°±è¦æ±‚èƒ½å¤Ÿéšæ—¶åœ°æ›´æ”¹ç¨‹åºï¼Œæ’å…¥æ–­ç‚¹æŒ‡ä»¤ï¼Œè€Œä¸€èˆ¬åªæœ‰ç¨‹åºè¿è¡Œåœ¨ RAM ä¸Šï¼Œæ‰æ–¹ä¾¿è¿™æ ·æ“ä½œã€‚é‚£å¦‚æœç›´æ¥ä» FLASH ä¸Šå–å€è¿è¡Œçš„ç¨‹åºï¼Œå› ä¸º FLASH å…ˆæ“¦åå†™çš„ç‰©ç†ç‰¹æ€§ï¼Œæ˜¯æ— æ³•é€šè¿‡éšæ„æ’å…¥æŒ‡ä»¤æ¥å®ç°æ–­ç‚¹çš„ã€‚æ›´ä¸è¦è¯´ä»åªè¯»å­˜å‚¨å™¨ä¸Šè¿è¡Œçš„ç¨‹åºï¼Œæ¯”å¦‚è¯´å›ºåŒ–åœ¨ BIOS ä¸­ä¸Šç”µè‡ªæ£€ POST ç¨‹åºï¼Œé¢å¯¹è¿™ç§æƒ…å†µï¼Œéœ€è¦çš„å°±æ˜¯ç¡¬ä»¶æ–­ç‚¹ã€‚ ç¡¬ä»¶æ–­ç‚¹é¡¾åæ€ä¹‰ï¼Œéœ€è¦é¢å¤–çš„ç¡¬ä»¶é€»è¾‘æ”¯æŒï¼Œä¸»è¦èµ·çš„ä½œç”¨å°±æ˜¯æš‚å­˜å’Œæ¯”è¾ƒï¼Œæˆ‘ä»¬æŠŠè¿™ç§å®ç°ç‰¹å®šé€»è¾‘çš„ç»„åˆç”µè·¯ï¼Œç§°ä¸ºå®å•å…ƒï¼ˆMacro Cellï¼‰ã€‚ è¿˜è®°å¾—æˆ‘ä»¬å‰é¢è¯´è¿‡ JTAG åè®®ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•æ‰«æé“¾å—ï¼Ÿç¡¬ä»¶æ–­ç‚¹å®å•å…ƒçš„æ§åˆ¶å’Œæ¯”è¾ƒä¸¤ç§æ•°æ®å¯„å­˜å™¨ï¼Œå°±å¯ä»¥ä½œä¸ºä¸¤æ¡æ‹“å±•æ‰«æé“¾ï¼ŒåŠ å…¥åˆ° JTAG è°ƒè¯•æ¡†æ¶ä¸­ã€‚ ä½ åœ¨è°ƒè¯•è½¯ä»¶ä¸­æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é’®ï¼Œå¯¹åº”çš„é‚£è¡Œä»£ç åœ°å€ï¼Œå°±ä¼šé€šè¿‡ä¸Šè¿°æ‰«æé“¾ï¼Œè¢«è®°å½•åˆ°æ–­ç‚¹å®å•å…ƒç›¸åº”çš„å¯„å­˜å™¨ä¸­ï¼Œå½“ç„¶ï¼Œè°ƒè¯•å™¨èƒ½å¤ŸçŸ¥é“æŸè¡Œä»£ç çš„åœ°å€ï¼Œæ˜¯ä¾èµ–äºç¼–è¯‘æ—¶ç”Ÿæˆçš„ ELF æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ä¿¡æ¯ã€‚è€Œå½“ç¨‹åºæ­£å¸¸è¿è¡Œå–å€æ—¶ï¼Œå¦‚æœå®å•å…ƒçš„å¯„å­˜å™¨ï¼Œå‘ç°äº†æ€»çº¿ä¸Šå‡ºç°äº†è®°å½•è¿‡çš„åœ°å€ï¼Œæ¯”è¾ƒå™¨å°±ä¼šå‘å‡ºè°ƒè¯•çŠ¶æ€ä¿¡å·ï¼ŒCPU æ¥æ”¶åˆ°è¿™ä¸ªä¿¡å·åæš‚åœè¿è¡Œï¼Œè¿›å…¥è°ƒè¯•æ¨¡å¼æˆ–è€…å¼‚å¸¸ã€‚ å› ä¸ºæ¯æ‰“ä¸€ä¸ªæ–­ç‚¹ï¼Œéƒ½éœ€è¦å®å•å…ƒç›¸åº”çš„å¯„å­˜å™¨æ¥ä¿å­˜åœ°å€ä¿¡æ¯ã€‚è€Œå¯„å­˜å™¨æ•°é‡æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥è°ƒè¯•è½¯ä»¶ä¸€æ—¦å’ŒèŠ¯ç‰‡å»ºç«‹èµ·äº†è¿æ¥ï¼Œå°±ä¼šé€šè¿‡ä¸Šè¿°çš„å¦å¤–ä¸€æ¡æ§åˆ¶å¯„å­˜å™¨è·å¾—è¯¥ç¡¬ä»¶æ–­ç‚¹å®å•å…ƒæ‰€æ”¯æŒçš„æœ€å¤§æ–­ç‚¹æ•°ï¼Œè¿™æ ·ä½ åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­å¦‚æœæ–­ç‚¹æ‰“å¤šäº†ï¼Œè°ƒè¯•å™¨å°±ä¼šæŠ¥é”™ã€‚ ä¸ºä»€ä¹ˆè°ƒè¯•å™¨èƒ½å¤Ÿçƒ§å½•ç¨‹åºå‘¢ï¼Ÿæ­£å¸¸æƒ…å†µä¸‹ï¼ŒCPU å†…æ ¸é€šè¿‡å†…éƒ¨çš„ç³»ç»Ÿæ€»çº¿ï¼Œä» FLASH æˆ–è€… RAM ä¸­è·å–è¿è¡Œçš„æŒ‡ä»¤ï¼Œäº¤æ¢æ•°æ®ï¼Œå¹¶åœ¨ä¸€å®šçš„é©±åŠ¨ç¨‹åºä¸‹ï¼Œå®ç°å¯¹ FLASH çš„æ“¦é™¤å’Œå†™å…¥æ“ä½œã€‚ä¸ºäº†æŠŠæŒ‡ä»¤å’Œæ•°æ®ç›´æ¥ç»™ CPU å†…æ ¸ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€æ¡æ‰«æé“¾ï¼Œè¿™æ¡æ‰«æé“¾ç›´æ¥åœ¨ç³»ç»Ÿæ€»çº¿ä¸Šå¼€äº†ä¸€ä¸ªå£å­ï¼Œé€šè¿‡ä¸Šä½æœºçš„è°ƒè¯•ä¿¡å·ï¼ŒæŠŠç›¸å…³çš„æ“ä½œæŒ‡ä»¤ç›´æ¥ä¼ åˆ°æ€»çº¿ä¸Šï¼Œä¾› CPU å†…æ ¸å–ç”¨ã€‚ é‚£ä¹ˆæ•´ä¸ªè°ƒè¯•å™¨çš„ä¸‹è½½è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š ç¬¬ä¸€ï¼Œé€šè¿‡è°ƒè¯•å™¨ä½¿å¾— CPU è¿›å…¥è°ƒè¯•æ¨¡å¼ï¼› ç¬¬äºŒï¼Œé€šè¿‡æ€»çº¿æ‰«æé“¾å°† FLASH ç¼–ç¨‹ç®—æ³•ä¸å³å°†è¢«ä¸‹è½½çš„ç”¨æˆ·ç¨‹åºæ”¾åˆ° RAM ä¸­ï¼› ç¬¬ä¸‰ï¼Œå°† CPU çš„ PC æŒ‡é’ˆæŒ‡å‘åˆšåˆšæ¬è¿å®Œæˆçš„ RAM åœ°å€èµ·å§‹å¤„ï¼Œå¹¶é€€å‡ºè°ƒè¯•çŠ¶æ€ï¼› ç¬¬å››ï¼ŒCPU å°†åœ¨æ­£å¸¸çŠ¶æ€ä¸‹è¿è¡Œ RAM ä¸­çš„ FLASH ç¼–ç¨‹ç®—æ³•ã€‚å°†ç”¨æˆ·ä»£ç çƒ§å½•åˆ°ç¡®å®šä½ç½®ä¸Šï¼Œæ‰§è¡Œå®Œæˆåå›åˆ°è°ƒè¯•çŠ¶æ€ã€‚ å¦‚æœ RAM ç©ºé—´ä¸å¤Ÿå¤§ï¼Œä»¥ä¸Šæ“ä½œè¿˜éœ€è¦é‡å¤å¤šæ¬¡æ‰§è¡Œã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç¬¬äºŒæ­¥æ“ä½œ RAM æ—¶ï¼Œæ˜¯å¤„äºè°ƒè¯•çŠ¶æ€ä¸‹ï¼Œè€Œè°ƒè¯•æ—¶é’Ÿçš„é€Ÿç‡æ˜¯æ— æ³•æ»¡è¶³ RAM æˆ–è€… FLASH çš„è®¿é—®é€Ÿç‡è¦æ±‚çš„ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼ŒCPU ä¼šé¢‘ç¹çš„åœ¨ç³»ç»Ÿæ—¶é’Ÿä¸è°ƒè¯•æ—¶é’Ÿä¹‹é—´åˆ‡æ¢ è°ƒè¯•æ—¶é’Ÿä¸‹ï¼Œæ€»çº¿æ‰«æé“¾å…ˆä¼ é€’æ¥è¦å†™å…¥çš„æ•°æ®å’Œ RAM åœ°å€ï¼ŒCPU å…ˆåˆ†åˆ«æš‚å­˜åœ¨å†…éƒ¨é€šç”¨å¯„å­˜å™¨ä¸­ï¼Œæ¥ç€æ‰«æé“¾ä¼ é€’å†™å…¥æŒ‡ä»¤ï¼Œå¹¶åˆ‡æ¢ä¸ºç³»ç»Ÿæ—¶é’Ÿã€‚CPU åœ¨æ­£å¸¸çŠ¶æ€ä¸‹æ‰§è¡Œæ¬è¿æŒ‡ä»¤ï¼Œå¾€ RAM é‡Œå†™å…¥æ•°æ®ï¼Œæ‰§è¡Œå®Œæˆåå›åˆ°è°ƒè¯•çŠ¶æ€ï¼Œç»§ç»­é€šè¿‡æ‰«æé“¾ä¼ é€’åé¢è¦å†™å…¥çš„å€¼ï¼Œ OpenOCD (Open On-Chip Debugger)OpenOCDï¼ˆOpen On-Chip Debuggerï¼‰å¼€æºç‰‡ä¸Šè°ƒè¯•å™¨ï¼Œæ˜¯ä¸€æ¬¾å¼€æºè½¯ä»¶ï¼Œæœ€åˆæ˜¯ç”± Dominic Rath åŒå­¦è¿˜åœ¨å¤§å­¦æœŸé—´å‘èµ·çš„ï¼ˆ2005 å¹´ï¼‰é¡¹ç›®ã€‚OpenOCD æ—¨åœ¨æä¾›é’ˆå¯¹åµŒå…¥å¼è®¾å¤‡çš„è°ƒè¯•ã€ç³»ç»Ÿç¼–ç¨‹å’Œè¾¹ç•Œæ‰«æåŠŸèƒ½ã€‚ å‚è€ƒèµ„æ–™ã€è›‹é¥¼åµŒå…¥å¼ã€‘é¥®èŒ¶å…ˆï¼ŸDEBUG å…ˆï¼ä¸€èµ·æ¢ç©¶è°ƒè¯•åŸç†_å“”å“©å“”å“©_bilibiliæµ…è°ˆ RISC-V çš„ DEBUG ç³»ç»ŸåŠå…¶ä»¿çœŸ - çŸ¥ä¹ESP32 JTAG Debug 01: JTAG æ¥å£ç®€ä»‹_å“”å“©å“”å“©_bilibili+","categories":[],"tags":[{"name":"GDB","slug":"GDB","permalink":"http://example.com/tags/GDB/"},{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"http://example.com/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"èŠ¯ç‰‡å¼€å‘","slug":"èŠ¯ç‰‡å¼€å‘","permalink":"http://example.com/tags/%E8%8A%AF%E7%89%87%E5%BC%80%E5%8F%91/"},{"name":"ç¡¬ä»¶","slug":"ç¡¬ä»¶","permalink":"http://example.com/tags/%E7%A1%AC%E4%BB%B6/"},{"name":"JTAG","slug":"JTAG","permalink":"http://example.com/tags/JTAG/"},{"name":"OpenOCD","slug":"OpenOCD","permalink":"http://example.com/tags/OpenOCD/"}]},{"title":"ä¿æŒ SSH è¿æ¥","slug":"ä¿æŒSSHè¿æ¥","date":"2022-08-13T12:28:57.000Z","updated":"2022-10-15T03:14:29.673Z","comments":true,"path":"2022/08/13/ä¿æŒSSHè¿æ¥/","link":"","permalink":"http://example.com/2022/08/13/%E4%BF%9D%E6%8C%81SSH%E8%BF%9E%E6%8E%A5/","excerpt":"","text":"SSH æ€»æ˜¯è¢«å¼ºè¡Œä¸­æ–­ï¼Œå°¤å…¶æ˜¯ç”¨ VSCode ä»£ç å†™çš„å¥½å¥½çš„ï¼Œçªç„¶åˆ·æ–°çª—å£ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œæ›´æƒ¹äººæ¼ç«ã€‚ å¯ä»¥é€šè¿‡é…ç½®æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯çš„ SSH æ¥ä¿æŒ SSH é“¾æ¥ï¼š æ–¹æ³•ä¸€ï¼šé…ç½®æœåŠ¡ç«¯å¯ä»¥åœ¨æœåŠ¡ç«¯é…ç½®ï¼Œè®© server æ¯éš” 30 ç§’å‘ client å‘é€ä¸€ä¸ª keep-alive åŒ…æ¥ä¿æŒè¿æ¥ï¼š 1vim /etc/ssh/sshd_config 12ClientAliveInterval 30ClientAliveCountMax 60 ç¬¬äºŒè¡Œé…ç½®è¡¨ç¤ºå¦‚æœå‘é€ keep-alive åŒ…æ•°é‡è¾¾åˆ° 60 æ¬¡ï¼Œå®¢æˆ·ç«¯ä¾ç„¶æ²¡æœ‰ååº”ï¼Œåˆ™æœåŠ¡ç«¯ sshd æ–­å¼€è¿æ¥ã€‚å¦‚æœä»€ä¹ˆéƒ½ä¸æ“ä½œï¼Œè¯¥é…ç½®å¯ä»¥è®©è¿æ¥ä¿æŒ 30s*60ï¼Œ30 min é‡å¯æœ¬åœ° ssh 1sudo service ssh restart å¦‚æœæ‰¾ä¸åˆ° ssh,â€Failed to restart ssh.service: Unit ssh.service not found.â€ ï¼Œéœ€è¦å®‰è£… 1sudo apt-get install openssh-server æ–¹æ³•äºŒï¼šé…ç½®å®¢æˆ·ç«¯å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰æƒé™é…ç½®ï¼Œæˆ–è€…æ— æ³•é…ç½®ï¼Œå¯ä»¥é…ç½®å®¢æˆ·ç«¯ sshï¼Œä½¿å®¢æˆ·ç«¯å‘èµ·çš„æ‰€æœ‰ä¼šè¯éƒ½ä¿æŒè¿æ¥ï¼š 1vim /etc/ssh/ssh_config 12ServerAliveInterval 30ServerAliveCountMax 60 æœ¬åœ° ssh æ¯éš” 30s å‘ server ç«¯ sshd å‘é€ keep-alive åŒ…ï¼Œå¦‚æœå‘é€ 60 æ¬¡ï¼Œserver æ— å›åº”æ–­å¼€è¿æ¥ã€‚ åœ¨ VSCode é‡Œå¯ä»¥ç›´æ¥æ·»åŠ é…ç½®ï¼Œæ•ˆæœä¸€æ ·ï¼š 123456Host 11.22.33.44 HostName 11.22.33.44 User user Port 112343 ServerAliveInterval 30 ServerAliveCountMax 60","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"SSH","slug":"SSH","permalink":"http://example.com/tags/SSH/"}]},{"title":"VSCode éšè—ç¼–è¾‘é¡µé¢å³ä¸Šè§’çš„æŒ‰é’®","slug":"VSCodeéšè—ç¼–è¾‘é¡µé¢å³ä¸Šè§’çš„æŒ‰é’®","date":"2022-08-02T14:10:55.000Z","updated":"2022-10-15T03:14:29.609Z","comments":true,"path":"2022/08/02/VSCodeéšè—ç¼–è¾‘é¡µé¢å³ä¸Šè§’çš„æŒ‰é’®/","link":"","permalink":"http://example.com/2022/08/02/VSCode%E9%9A%90%E8%97%8F%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2%E5%8F%B3%E4%B8%8A%E8%A7%92%E7%9A%84%E6%8C%89%E9%92%AE/","excerpt":"","text":"éšç€æ’ä»¶è¶Šè£…è¶Šå¤šï¼Œæ ‡ç­¾æ å³ä¾§çš„æŒ‰é’®ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œä¸¥é‡ç¼©å°äº†æ ‡é¢˜æ æ˜¾ç¤ºèŒƒå›´ã€‚è¿™ç‰‡æŒ‰é’®åŒºåŸŸåˆæœ‰æœ€å¤§é•¿åº¦çš„é™åˆ¶ï¼Œå½“æŒ‰é’®å¤ªå¤šï¼Œå°±ä¼šéšè—åˆ°ä¸‹æ‹‰èœå•é‡Œï¼ˆæœ€å³ä¾§çš„ä¸‰ä¸ªç‚¹ï¼‰ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´ä¸€äº›å¸¸ç”¨çš„æŒ‰é’®è¢«éšè—ï¼Œè€Œä¸å¸¸ç”¨çš„æŒ‰é’®åˆå åœ°æ–¹ã€‚é‚£ä¹ˆæ€æ ·æ‰èƒ½éšè—ä¸éœ€è¦çš„æŒ‰é’®å‘¢ï¼Ÿ 123456&quot;gitlens.menus&quot;: &#123; &quot;editorGroup&quot;: &#123; &quot;blame&quot;: false, &quot;compare&quot;: true &#125;,&#125;,","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"Jellyfin æ‰“é€ æœ¬åœ°å½±éŸ³åº“","slug":"Jellyfinæ‰“é€ æœ¬åœ°å½±éŸ³åº“","date":"2022-08-01T15:05:52.000Z","updated":"2023-08-19T12:46:18.311Z","comments":true,"path":"2022/08/01/Jellyfinæ‰“é€ æœ¬åœ°å½±éŸ³åº“/","link":"","permalink":"http://example.com/2022/08/01/Jellyfin%E6%89%93%E9%80%A0%E6%9C%AC%E5%9C%B0%E5%BD%B1%E9%9F%B3%E5%BA%93/","excerpt":"","text":"Docker å¯åŠ¨1234567891011121314151617181920212223242526version: &quot;3.7&quot;services: jellyfin: image: dockerproxy.com/linuxserver/jellyfin:latest container_name: jellyfin hostname: RISCX environment: - PUID=1000 - PGID=1000 - TZ=Asia/Shanghai - HTTP_PROXY:&#x27;http://192.168.1.9:7890&#x27; - HTTPS_PROXY:&#x27;http://192.168.1.9:7890&#x27; volumes: - /root/sharedfolder/appdata/jellyfin/config:/config - /root/sharedfolder/media:/media - /root/sharedfolder/appdata/jellyfin/cache:/cache devices: - /dev/dri:/dev/dri extra_hosts: - &quot;api.themoviedb.org:108.138.246.55&quot; - &quot;image.themoviedb.org:104.16.61.155&quot; - &quot;www.36dm.com:104.21.80.200&quot; network_mode: &quot;host&quot; restart: unless-stopped åˆå§‹åŒ–é…ç½®å°±ä¸æŒ¨ä¸ªè´´å›¾äº†ï¼Œå»ºè®®å°†é¡µé¢éƒ½è®¾ç½®ä¸ºä¸­æ–‡ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯é€‰æ‹©å›½å®¶çš„æ—¶å€™ï¼Œä¸­å›½çš„è‹±æ–‡å…¨ç§°æ˜¯ Peopleâ€™s Republic of Chinaï¼Œä¸æ˜¯ Chinaï¼Œéœ€è¦ä»”ç»†æ‰¾ä¸€ä¸‹ã€‚ è½¬ç é…ç½®ä¸»è¦é…ç½®ç¡¬è§£ç ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§é™ä½ CPU çš„ä½¿ç”¨ç‡ï¼Œæé«˜æ’­æ”¾çš„æµç•…åº¦ã€‚èƒ½å¤Ÿå¼€å¯ç¡¬è§£éœ€è¦ GPU æ”¯æŒï¼Œå¦‚æœ CPU æœ‰æ ¸æ˜¾ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¼€å¯ç¡¬è§£ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±ç®—äº†å§ï¼Œè·³è¿‡ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æ”¯æŒç¡¬è§£ã€‚ 1cat /proc/cpuinfo | grep &quot;flags&quot; è¯¥å‘½ä»¤å°†è¾“å‡º CPU çš„ç³»ç»Ÿä¿¡æ¯ï¼Œå¹¶åœ¨è¾“å‡ºç»“æœä¸­æœç´¢â€flagsâ€ï¼ˆæ ‡å¿—ï¼‰è¡Œã€‚å¦‚æœè¯¥è¡Œä¸­åŒ…å«â€vmeâ€ã€â€cmovâ€ã€â€cx8â€ã€â€mmxâ€ã€â€sseâ€ã€â€sse2â€ã€â€sse3â€ã€â€ssse3â€ã€â€sse4_1â€ã€â€sse4_2â€ã€â€avxâ€ç­‰å…³é”®è¯ï¼Œåˆ™è¯´æ˜è¯¥ CPU æ”¯æŒè§†é¢‘ç¡¬è§£ç ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"NAS","slug":"NAS","permalink":"http://example.com/tags/NAS/"},{"name":"Jellyfin","slug":"Jellyfin","permalink":"http://example.com/tags/Jellyfin/"}]},{"title":"ä½¿ç”¨ Syncthing å¤šç«¯ä¸æ»‘åŒæ­¥ä¸å¤‡ä»½","slug":"ä½¿ç”¨Syncthingå¤šç«¯ä¸æ»‘åŒæ­¥ä¸å¤‡ä»½","date":"2022-08-01T14:48:21.000Z","updated":"2022-10-15T03:14:29.670Z","comments":true,"path":"2022/08/01/ä½¿ç”¨Syncthingå¤šç«¯ä¸æ»‘åŒæ­¥ä¸å¤‡ä»½/","link":"","permalink":"http://example.com/2022/08/01/%E4%BD%BF%E7%94%A8Syncthing%E5%A4%9A%E7%AB%AF%E4%B8%9D%E6%BB%91%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%87%E4%BB%BD/","excerpt":"","text":"æŠ˜è…¾èƒŒæ™¯ä¸€ç›´æƒ³æ‰¾ä¸€ä¸ªèƒ½å¤Ÿå¿«é€ŸåŒæ­¥æ‰‹æœºä¸ç”µè„‘æ•°æ®çš„å·¥å…·ï¼Œå› ä¸ºæ‰‹æœºäº‘æœåŠ¡çš„ç©ºé—´å°‘çš„å¯æ€œï¼Œæ‰€ä»¥ä¹ æƒ¯éš”ä¸€æ®µæ—¶é—´å°†æ‰‹æœºé‡Œçš„ç…§ç‰‡ã€è§†é¢‘è¿˜æœ‰ä¸€äº›æ–‡ä»¶å¯¼å‡ºåˆ°ç”µè„‘ä¸Šã€‚ä½†æ˜¯æ¯æ¬¡å¤‡ä»½æ–‡ä»¶éƒ½å¾—è¿æ¥æ•°æ®çº¿ï¼Œå¹¶ä¸”æ²¡æ³•å¢é‡å¤‡ä»½ï¼Œå¾—æ‰‹åŠ¨æŒ‘é€‰ï¼Œä¹Ÿè¿˜æŒºéº»çƒ¦çš„ã€‚ é€› GitHub æ—¶ï¼Œæ— æ„é—´å‘ç°äº† Syncthingï¼Œå‡ ä¹ç¬¦åˆäº†æˆ‘æ‰€æœ‰çš„é¢„æœŸã€‚ å¼€æºï¼Œå…è´¹ï¼Œè‡ªå·±ç”µè„‘å°±å¯ä»¥å½“æœåŠ¡å™¨ï¼Œä»¥åå…¥äº† NASï¼Œå¯ä»¥è‡ªå·±æ­å»ºæœ¬åœ°æœåŠ¡å™¨ã€‚ åŒæ­¥é€Ÿåº¦å¿«ï¼Œå–å†³ WIFI çš„é€Ÿåº¦ï¼Œç›®å‰ä½¿ç”¨ 30M/sï¼ŒåŸºæœ¬æ»¡é€Ÿã€‚ å¤šç«¯æ”¯æŒï¼Œé™¤äº† IOSï¼ˆåæ­£æˆ‘ä¹Ÿæ²¡æœ‰ iOS è®¾å¤‡ï¼Œå˜¿å˜¿ï¼‰ï¼Œå‡ ä¹å…¨å¹³å°æ”¯æŒï¼ŒåŒ…æ‹¬ NAS åŠè·¯ç”±å™¨ã€‚ å¢é‡åŒæ­¥ï¼Œå†ä¹Ÿä¸ç”¨æŒ‘æ–‡ä»¶å¤‡ä»½äº†ã€‚ è¯ä¸å¤šè¯´ï¼Œå¼€æ•´ã€‚ ä¸‹è½½å®‰è£…ç›´æ¥è¿›å…¥Syncthingå®˜ç½‘ï¼Œä¸‹è½½å®‰è£…ã€‚åœ¨ Ubuntu ä¸‹å®‰è£…å‚è€ƒè¿™é‡Œã€‚Android ç‰ˆæœ¬ä¸‹è½½Syncthingã€‚ æ¥ä¸‹æ¥ä»¥ Windows ä¸ Android æ‰‹æœºåŒæ­¥ä¸ºä¾‹ï¼Œä¸‹è½½å®‰è£…åï¼Œæ‰“å¼€syncthing.exeï¼Œå³å¯æ‰“å¼€ç®¡ç†ç•Œé¢ï¼Œæˆ–è€…æµè§ˆå™¨è¾“å…¥http://127.0.0.1:8384ä¹Ÿå¯è¿›å…¥ç®¡ç†ç•Œé¢ã€‚ Windows ç•Œé¢ï¼š Android ç•Œé¢ï¼š è®¾å¤‡é…å¯¹Windows ç®¡ç†é¡µé¢-&gt;æ“ä½œ-&gt;æ˜¾ç¤º IDï¼Œä¼šæ˜¾ç¤ºæœ¬æœºçš„äºŒç»´ç ï¼š Android æ‰‹æœºæ‰“å¼€åº”ç”¨ï¼Œåˆ‡æ¢åˆ°è®¾å¤‡ç•Œé¢ï¼Œç‚¹å‡»å³ä¸Šè§’åŠ å·ï¼Œç‚¹å‡»äºŒç»´ç æ ‡è¯†ï¼Œå³å¯æ‰«æäºŒç»´ç ï¼Œå®Œæˆè®¾å¤‡æ·»åŠ ã€‚ å¦‚æœæ­£ç¡®æ·»åŠ ï¼ŒWindows ç®¡ç†ç•Œé¢ä¼šæ˜¾ç¤º Android è®¾å¤‡ï¼š Android åŒæ­¥è‡³ Windowsæ‰“å¼€ Android åº”ç”¨ï¼Œåˆ‡æ¢åˆ°æ–‡ä»¶å¤¹ç•Œé¢ï¼Œç‚¹å‡»å³ä¸Šè§’åŠ å·ï¼Œé…ç½®åŒæ­¥çš„æ–‡ä»¶å¤¹ï¼š æ ¹æ®ä¸‹å›¾æç¤ºï¼Œé…ç½®åº”ç”¨ï¼Œè®°å¾—ä¿å­˜ï¼šç›®å½•åˆ—è¡¨æ˜¾ç¤ºåˆšåˆšçš„é…ç½®ï¼š ç‚¹å‡»æ‰“å¼€ï¼Œå¼€å¯ä¸è¿œç¨‹è®¾å¤‡ Windows åŒæ­¥ï¼š å½“è¿”å›æ—¶ï¼ŒWindows ç«¯å°†ä¼šå¼¹å‡ºé€šçŸ¥ï¼Œæç¤ºæœ‰ Android è®¾å¤‡çš„æ–‡ä»¶è¦åˆ†äº«åˆ°ç”µè„‘ï¼Œç‚¹å‡»æ·»åŠ ï¼š è‡³æ­¤ï¼ŒAndroid åŒæ­¥è‡³ Windows å®Œæˆã€‚æ­¤æ—¶åœ¨ Android è®¾å¤‡çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä»»æ„æ–‡ä»¶ï¼Œéƒ½ä¼šåŒæ­¥åˆ° Windowsã€‚ Windows åŒæ­¥è‡³ AndroidWindows ç®¡ç†ç•Œé¢ï¼Œæ·»åŠ æ–‡ä»¶å¤¹ï¼š ç‚¹å‡»ä¿å­˜åï¼Œä¸ä¹‹å‰ç±»ä¼¼ï¼ŒAndroid ä¼šæç¤ºæœ‰ Windows è®¾å¤‡çš„æ–‡ä»¶è¦åˆ†äº«åˆ° Androidï¼Œç‚¹å‡»æ·»åŠ ï¼š å¦‚æœ Android è®¾å¤‡æ²¡æœ‰å¼¹å‡ºæç¤ºæ·»åŠ å…±äº«æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆæ‰“å¼€åº”ç”¨ä¾§è¾¹æ -&gt;ç½‘é¡µç®¡ç†é¡µé¢ï¼Œå°†ä¼šæœ‰å¼¹çª—ï¼Œå¦‚ä¸‹å›¾ ç‚¹å‡»æ·»åŠ ï¼Œé…ç½®æ–‡ä»¶å¤¹ç›®å½•ç­‰ä¸ä¹‹å‰ç±»ä¼¼ã€‚ è‡³æ­¤ï¼ŒWindows åŒæ­¥è‡³ Android å®Œæˆã€‚æ­¤æ—¶åœ¨ Windows è®¾å¤‡çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä»»æ„æ–‡ä»¶ï¼Œéƒ½ä¼šåŒæ­¥åˆ° Androidã€‚ ä½¿ç”¨æŠ€å·§Syncthing æ”¯æŒä¸‰ç§å·¥ä½œæ¨¡å¼ å‘é€å’Œæ¥æ”¶ï¼ŒSend &amp; Receive Folderï¼Œè¿™æ˜¯æ–‡ä»¶å¤¹çš„é»˜è®¤æ¨¡å¼ï¼Œå¯¹æ–‡ä»¶å¤¹çš„ä¿®æ”¹ä¼šå‘é€ï¼Œå…¶ä»–è®¾å¤‡çš„ä¿®æ”¹ä¹Ÿä¼šåŒæ­¥å›æ¥ã€‚ ä»…å‘é€ Send Onlyï¼Œè¿™ç§æ¨¡å¼è¡¨ç¤ºä»…ä»…å°†å½“å‰è®¾å¤‡ä¸Šçš„æ–‡ä»¶å¤¹çš„æ”¹åŠ¨å‘é€åˆ°å…¶ä»–è®¾å¤‡ï¼Œç”¨æ¥éšå¼åœ°è¡¨ç¤ºå…¶ä»–åŒæ­¥è®¾å¤‡ä¸Šçš„æ–‡ä»¶ä¸ä¼šè¢«ä¿®æ”¹ï¼Œæˆ–è€…å…¶ä»–è®¾å¤‡ä¸Šçš„ä¿®æ”¹å¯ä»¥è¢«å¿½ç•¥ã€‚è¿™ç§æ¨¡å¼éå¸¸é€‚åˆï¼Œå°†å½“å‰è®¾å¤‡è®¾å®šä¸ºå·¥ä½œè®¾å¤‡ï¼Œç„¶åè®¾å®šä¸€å°è®¾å¤‡ä½œä¸ºæ­¤è®¾å¤‡çš„å¤‡ä»½ã€‚ åœ¨ Send Only æ¨¡å¼ä¸‹ï¼Œé›†ç¾¤ä¸­å…¶ä»–è®¾å¤‡çš„ä¿®æ”¹éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä¿®æ”¹ä¾ç„¶ä¼šæ¥æ”¶ï¼Œæ–‡ä»¶å¤¹å¯èƒ½ä¼šå‡ºç° ã€Œout of syncã€ï¼Œä½†æ˜¯æ²¡æœ‰ä¿®æ”¹ä¼šè¢«åº”ç”¨åˆ°æœ¬åœ°ã€‚ å½“ Send Only æ–‡ä»¶å¤¹å‡ºç° out of syncï¼Œé‚£ä¹ˆä¸€ä¸ªçº¢è‰²çš„ Override Changes ä¼šå‡ºç°åœ¨æ–‡ä»¶å¤¹è¯¦æƒ…ä¸­ï¼Œç‚¹å‡»è¯¥æŒ‰é’®ä¼šå¼ºåˆ¶å°†å½“å‰ä¸»æœºçš„çŠ¶æ€åŒæ­¥åˆ°å…¶ä»–å‰©ä½™èŠ‚ç‚¹ã€‚ä»»ä½•å¯¹æ–‡ä»¶çš„ä¿®æ”¹ï¼Œéƒ½ä¼šè¢«å½“å‰ä¸»æœºä¸Šçš„ç‰ˆæœ¬æ‰€è¦†ç›–ï¼Œä»»ä½•ä¸å­˜åœ¨äºå½“å‰ä¸»æœºèŠ‚ç‚¹çš„æ–‡ä»¶éƒ½ä¼šè¢«åˆ é™¤ï¼Œå…¶ä»–ç±»ä¼¼ã€‚ ä»…æ¥æ”¶ Receive Onlyï¼Œè¿™ç§æ¨¡å¼ä¸‹æ‰€æœ‰çš„ä¿®æ”¹éƒ½ä¼šè¢«æ¥æ”¶å¹¶åº”ç”¨ï¼Œç„¶åé‡æ–°åˆ†å‘ç»™å…¶ä»–ä½¿ç”¨ send-receive æ¨¡å¼çš„è®¾å¤‡ã€‚ä½†æ˜¯æœ¬åœ°çš„ä¿®æ”¹ä¸ä¼šè¢«åˆ†å‘ç»™å…¶ä»–è®¾å¤‡ã€‚è¿™ç§æ¨¡å¼é€‚åˆäºå»ºç«‹å¤‡ä»½é•œåƒï¼ˆreplication mirrorsï¼‰ï¼Œæˆ–è€…å¤‡ä»½ç›®çš„ä¸»æœºçš„åœºæ™¯ï¼Œè¿™äº›æƒ…å†µä¸‹ä¸æœŸæœ›æœ‰æœ¬åœ°ä¿®æ”¹æˆ–è€…æœ¬åœ°çš„ä¿®æ”¹æ˜¯ä¸å…è®¸çš„ å½“æœ¬åœ°æ–‡ä»¶è¢«åˆ é™¤æ—¶ï¼ŒSyncthing ä¼šæ˜¾ç¤ºä¸€ä¸ª Revert Local Changes æŒ‰é’®ã€‚ä½¿ç”¨è¿™ä¸ªæŒ‰é’®ä¼šå°†æœ¬åœ°çš„ä¿®æ”¹å›æ’¤ï¼Œæ‰€æœ‰æ·»åŠ çš„æ–‡ä»¶ä¼šè¢«åˆ é™¤ï¼Œä¿®æ”¹æˆ–åˆ é™¤çš„æ–‡ä»¶ä¼šé‡æ–°ä»å…¶ä»–èŠ‚ç‚¹åŒæ­¥ï¼Œæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä½†æ˜¯å‡å¦‚ A è®¾å¤‡è®¾ç½®ä»…å‘é€ï¼ŒB è®¾å¤‡è®¾ç½®å‘é€å’Œæ¥æ”¶ï¼ŒA æ˜¯ä¸ä¼šåŒæ­¥ B çš„æ›´æ”¹çš„ï¼ å¿½ç•¥ç‰¹å®šæ–‡ä»¶ã€ç›®å½•å¿½ç•¥åˆ—è¡¨ï¼Œå’Œ gitignore ç±»ä¼¼ã€‚æ¯ä¸€å°è®¾å¤‡ä¸Šçš„ .stignore éƒ½æ˜¯åˆ†åˆ«è®¾ç½®çš„ï¼Œä¸ä¼šè¿›è¡ŒåŒæ­¥ã€‚ å¦‚æœ A çš„.stignoreå¿½ç•¥äº† test ï¼Œè€Œ B æ²¡æœ‰è¿™æ ·åšï¼Œå®é™…ä¸Šä¼šå‘ç”Ÿè¿™æ ·çš„äº‹æƒ…ï¼š A ä¸ä¼šæ‰«æå’Œé€šçŸ¥ Bï¼ˆå¹¿æ’­ï¼‰å…³äº test çš„å˜åŠ¨ï¼› B å¯¹å…³äº test çš„å˜åŠ¨æŒå¼€æ”¾çš„å§¿æ€ï¼Œä½†ä¸ä¼šæ”¶åˆ°ä»»ä½•å…³äº A ä¸Šé¢ test çš„å˜åŠ¨ä¿¡æ¯ï¼ˆå¯èƒ½æ¥æ”¶åˆ°å…¶å®ƒåŒæ­¥è®¾å¤‡çš„ï¼‰ï¼› B ä¼šæ‰«æ test ä»¥åŠæ¨é€å…¶å…³äº test å˜åŠ¨çš„ä¿¡æ¯ï¼Œä½†ä¼šè¢« A å¿½ç•¥ï¼ŒA ä¹Ÿä¼šå¿½ç•¥å…¶å®ƒåŒæ­¥è®¾å¤‡å…³äº test çš„ä¿¡æ¯ï¼› B ä¼šæ¥æ”¶æ¥è‡ªå…¶å®ƒåŒæ­¥è®¾å¤‡æ¨é€çš„å…³äº test çš„ä¿¡æ¯ï¼› å‚è€ƒèµ„æ–™Syncthing åˆä¸€æ¬¾åŒæ­¥å·¥å…· | Verne in GitHub Folder Types â€” Syncthing documentation","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7/"},{"name":"åŒæ­¥","slug":"åŒæ­¥","permalink":"http://example.com/tags/%E5%90%8C%E6%AD%A5/"},{"name":"å¤‡ä»½","slug":"å¤‡ä»½","permalink":"http://example.com/tags/%E5%A4%87%E4%BB%BD/"}]},{"title":"è§£å†³æäº¤ gerrit missing Change-Id","slug":"è§£å†³æäº¤gerrit-missing-Change-Id","date":"2022-07-30T07:05:48.000Z","updated":"2022-10-15T03:14:29.858Z","comments":true,"path":"2022/07/30/è§£å†³æäº¤gerrit-missing-Change-Id/","link":"","permalink":"http://example.com/2022/07/30/%E8%A7%A3%E5%86%B3%E6%8F%90%E4%BA%A4gerrit-missing-Change-Id/","excerpt":"","text":"ä¿ç•™ç°åœº12345678remote: Resolving deltas: 100% (114/114)remote: Processing changes: refs: 1,done remote: ERROR: missing Change-Idincommit message footerremote:remote: Hint: To automatically insert Change-Id,installthe hook:remote: gitdir=$(git rev-parse --git-dir);scp-p -P XX XX@gerrit.xxxxx.com:hooks/commit-msg$&#123;gitdir&#125;/hooks/remote: And then amend the commit:remote: git commit --amend æ¢ç©¶åŸå› ç†è§£ change-idä»£ç å®¡æ ¸æ˜¯è¦å¯¹ä¸€ä¸ªå®Œæ•´çš„å˜æ›´è¿›è¡Œå®¡æ ¸ï¼Œæ¯”å¦‚ä¸€æ¬¡ Bug ä¿®å¤ï¼Œæœ‰å¤šæ¬¡æäº¤ Commitï¼Œæ¯æ¬¡çš„ Commit Id éƒ½ä¸åŒï¼Œé‚£ä¹ˆå¦‚ä½•å°†å¤šä¸ªä¸åŒçš„ Commit ID å…³è”åˆ°åŒä¸€ä¸ª Chanege-Id å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦å°† Change-Id æ·»åŠ åˆ° Commit çš„ footerï¼ˆæœ€åä¸€è¡Œï¼‰ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å°†å¤šä¸ª Commit å…³è”åˆ°åŒä¸€ä¸ª Change-Id äº†ã€‚ Change-Id ä¸ºé¿å…ä¸æäº¤ Id å†²çªï¼Œé€šå¸¸ä»¥å¤§å†™å­—æ¯ I ä¸ºå‰ç¼€ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ï¼ŒChange-Id æ˜¯ Gerrit çš„æ¦‚å¿µï¼Œä¸æ˜¯ Git çš„æ¦‚å¿µã€‚ä½ åªæœ‰ç”¨ Gerrit æ‰ä¼šæœ‰ Change-Idï¼Œè€Œ Git åªæœ‰æäº¤ Idã€‚ é‚£ä¹ˆè¿™ä¸ª Change-Id æ˜¯æ€ä¹ˆç”Ÿæˆçš„å‘¢ï¼Ÿ ç†è§£ git hooksæˆ‘åœ¨Git hooks é’©å­çš„ä½¿ç”¨ä¸­æœ‰è¯¦ç»†è§£é‡Šã€‚åœ¨è¿™é‡Œç®€å•çš„ä»‹ç»ä¸€ä¸‹ï¼Œé’©å­ (hooks) æ˜¯ä¸€äº›åœ¨.git/hooksç›®å½•çš„è„šæœ¬ï¼Œåœ¨è¢«ç‰¹å®šçš„äº‹ä»¶è§¦å‘åè¢«è°ƒç”¨ã€‚æ¯”å¦‚æ‰§è¡Œgit commitï¼Œgit pushï¼Œgit pullç­‰å‘½ä»¤æ—¶ï¼Œè„šæœ¬ä¼šè¢«è°ƒç”¨ã€‚ Gerrit ä¹Ÿæä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„commit-msgé’©å­ï¼Œå½“æˆ‘ä»¬åœ¨æ‰§è¡Œgit commitæ—¶ï¼Œä¼šè¢«è°ƒç”¨ã€‚ä¼šè‡ªåŠ¨ç”ŸæˆChange-Idï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°commitçš„ footer ä¸­ã€‚ é€šå¸¸æˆ‘ä»¬ä»è¿œç¨‹ä¸‹è½½ä»£ç åï¼Œä¼šè‡ªåŠ¨ä¸‹è½½commit-msgé’©å­ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°.git/hooksç›®å½•ä¸­ã€‚æ­£å¸¸æ¥è¯´hooksæ˜¯ä¸ä¼šåŠ å…¥ä»£ç ä»“åº“çš„ï¼Œè¿™åº”è¯¥å–å†³äº Gerrit çš„é…ç½®ã€‚ è¿™æ¬¡é”™è¯¯åº”è¯¥æ˜¯æˆ‘åœ¨æµ‹è¯•é’©å­çš„æ—¶å€™ï¼Œå°† Gerrit æ ‡å‡†é’©å­åˆ é™¤äº†ï¼Œå¯¼è‡´æ— æ³•æ­£ç¡®ç”Ÿæˆ Change-Idã€‚ è§£å†³æ–¹æ³•æŠ¥é”™æ—¶å…¶å®å·²ç»æä¾›äº†è§£å†³æ–¹å¼ï¼š 12345678# æç¤ºè®©æˆ‘ä»¬å®‰è£…è¿œç¨‹çš„é’©å­remote: Hint: To automatically insert Change-Id,installthe hook:# åœ¨å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š# è¿™æ¡å‘½ä»¤å°†æ‰¾åˆ°è¯¥é¡¹ç›®çš„ git ç›®å½•,å¹¶å°†å…¶èµ‹å€¼ç»™ gitdir è¿™ä¸ªå˜é‡gitdir=$(git rev-parse --git-dir)# æ‰§è¡Œ scp å‘½ä»¤,ä» gerrit ä»£ç æœåŠ¡å™¨å°†é’©å­è„šæœ¬æ–‡ä»¶ commit-msg ä¸‹è½½åˆ°é¡¹ç›®çš„é’©å­ç›®å½•ä¸‹ (ä¸€èˆ¬æ˜¯ .git/hooks/)scp-p -P XX XX@gerrit.xxxxx.com:hooks/commit-msg$&#123;gitdir&#125;/hooks/ å®‰è£…å®Œä¹‹åé‡æ–°git commit --amendï¼Œå°±å¯ä»¥æ­£å¸¸ç”Ÿæˆ Change-Id äº†ã€‚","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Gerrit æ‰¹é‡æ·»åŠ æŠ„é€æé†’","slug":"Gerritæ‰¹é‡æ·»åŠ æŠ„é€æé†’","date":"2022-07-29T05:58:27.000Z","updated":"2022-10-15T03:14:29.204Z","comments":true,"path":"2022/07/29/Gerritæ‰¹é‡æ·»åŠ æŠ„é€æé†’/","link":"","permalink":"http://example.com/2022/07/29/Gerrit%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E6%8A%84%E9%80%81%E6%8F%90%E9%86%92/","excerpt":"","text":"èƒŒæ™¯å…¬å¸ä½¿ç”¨ Gerrit ä½œä¸º Review å¹³å°ï¼Œä½†æ˜¯æ¯æ¬¡æäº¤ä»£ç éƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ  Reviewerï¼Œè¿˜è¦æŠ„é€ç»„å†…æˆå‘˜ï¼Œè¿™ç§é‡å¤æ€§åŠ³åŠ¨ï¼Œç¨‹åºå‘˜æ˜¯ç»ä¸èƒ½å®¹å¿çš„ã€‚gerrit æä¾›äº†å‘é€é‚®ä»¶çš„åŠŸèƒ½ã€‚ è§£å†³æ–¹æ³•å®˜æ–¹ç¤ºä¾‹ï¼š 1git push ssh://john.doe@git.example.com:29418/kernel/common HEAD:refs/for/experimental%r=a@a.com,cc=b@o.com æœ€åçš„%æ˜¯ä¸ªåˆ†éš”ç¬¦ï¼Œr=&#39;a@a.comè¡¨ç¤º Reviewer æ˜¯a@a.comï¼Œcc=b@o.comè¡¨ç¤ºæŠ„é€ç»„å†…æˆå‘˜æ˜¯b@o.comã€‚ æ³¨æ„ï¼é‚®ç®±ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼ ä»¥ä¸€ä¸ªä»“åº“ä¸ºä¾‹ï¼š 1git push origin HEAD:refs/for/branch_dev_name%cc=zhangsan@qq.com,cc=lisi@qq.com,cc=wangerma@qq.com,cc=chenwu@qq.com ä½†æ˜¯è¦è¿™ä¹ˆå†™ï¼Œå²‚ä¸æ˜¯æŠŠæ“ä½œææ›´å¤æ‚äº†ã€‚ ç»ˆæåŠæ³•ï¼Œæ‰“å¼€é¡¹ç›®è·¯å¾„ä¸‹çš„.gitç›®å½•ã€‚ç¼–è¾‘configæ–‡ä»¶ï¼š åŸæ–‡ä»¶é‡Œæœ‰å¦‚ä¸‹å­—æ®µï¼š 123456789[core] repositoryformatversion = 0 filemode = false bare = false logallrefupdates = true ignorecase = true[remote &quot;origin&quot;] url = git@github.com:Dunky-Z/Dunky-Z.github.io.git fetch = +refs/heads/*:refs/remotes/origin/* æˆ‘ä»¬å¯ä»¥å°†è¿œç¨‹ä»“åº“åæ¢æˆå®¹æ˜“åŒºåˆ†çš„åå­—ï¼Œè‡ªå·±éšæ„ï¼š 1234567891011121314151617[core] repositoryformatversion = 0 filemode = false bare = false logallrefupdates = true ignorecase = true[remote &quot;origin&quot;] url = git@github.com:Dunky-Z/Dunky-Z.github.io.git fetch = +refs/heads/*:refs/remotes/origin/*# ä»¥ä¸‹ä¸ºæ–°å¢å†…å®¹[remote &quot;review&quot;] url = git@github.com:Dunky-Z/Dunky-Z.github.io.git fetch = +refs/heads/*:refs/remotes/origin/* push = HEAD:refs/for/%cc=zhangsan@qq.com, cc=lisi@qq.com, cc=wangerma@qq.com, cc=chenwu@qq.com ä¸‹æ¬¡æƒ³è¦æ¨é€éœ€è¦ review çš„ä»£ç ï¼Œå°±ç›´æ¥æ‰§è¡Œgit push reviewï¼Œå…¶ä¸­pushå°±ç›¸å½“äºï¼š 1push HEAD:refs/for/%cc=zhangsan@qq.com,cc=lisi@qq.com,cc=wangerma@qq.com,cc=chenwu@qq.com å‚è€ƒèµ„æ–™Gerrit Code Review - Uploading Changes","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"Gerrit","slug":"Gerrit","permalink":"http://example.com/tags/Gerrit/"}]},{"title":"Makefile ç¡®å®šå®å®šä¹‰","slug":"Makefileç¡®å®šå®å®šä¹‰","date":"2022-07-27T00:28:03.000Z","updated":"2022-10-15T03:14:29.341Z","comments":true,"path":"2022/07/27/Makefileç¡®å®šå®å®šä¹‰/","link":"","permalink":"http://example.com/2022/07/27/Makefile%E7%A1%AE%E5%AE%9A%E5%AE%8F%E5%AE%9A%E4%B9%89/","excerpt":"","text":"æœ‰æ—¶éœ€è¦é€šè¿‡makeç¼–è¯‘å‘½ä»¤æ—¶ç¡®å®šä»£ç ä¸­çš„å®å®šä¹‰ï¼Œå¦‚ç¼–è¯‘ä¸åŒçš„ç‰ˆæœ¬åªéœ€è¦ä½¿ç”¨ä¸åŒçš„ç¼–è¯‘å‘½ä»¤å³å¯ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å†…éƒ¨ä»£ç ã€‚ å½“å‰çš„éœ€æ±‚æ˜¯ä»£ç ä¸­æœ‰ä¸€éƒ¨åˆ†ä»£ç é€šè¿‡å®å®šä¹‰æ¥ç¡®å®šç¼–è¯‘çš„æ˜¯ DIE0 ç‰ˆæœ¬è¿˜æ˜¯ DIE1 ç‰ˆæœ¬ï¼Œå¦‚æœå®šä¹‰äº†DIE_ORDINAL_0 å°±ä½¿ç”¨ DIE0 çš„åŸºåœ°å€ï¼Œå¦‚æœæœªå®šä¹‰å°±ä½¿ç”¨ DIE1 çš„åŸºåœ°å€ã€‚ 123456#define DIE_ORDINAL_0#ifdef DIE_ORDINAL_0#define PERIPH_BASE (SYS_BASE_ADDR_DIE0)#else#define PERIPH_BASE (SYS_BASE_ADDR_DIE1)#endif gcc å‘½ä»¤æ”¯æŒ-Då®å®šä¹‰ï¼Œç›¸å½“äº C ä¸­çš„å…¨å±€#defineï¼Œåœ¨ Makefile ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å®å®šä¹‰æ¥æ§åˆ¶æºç¨‹åºçš„ç¼–è¯‘ã€‚åªè¦åœ¨ Makefile ä¸­çš„ CFLAGS ä¸­é€šè¿‡é€‰é¡¹-D æ¥æŒ‡å®šä½ äºå®šä¹‰çš„å®å³å¯ã€‚ 123CFLAGS += -D DIE_ORDINAL_0# åœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Šæ­¤é€‰é¡¹å°±å¯ä»¥äº†$(CC) $(CFLAGS) $^ -o $@ è¿™æ ·çš„è¯ï¼Œç›¸å½“äºè®¾ç½®äº†DIE_ORDINAL_0è¿™ä¸ªå®å®šä¹‰ã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³é€šè¿‡å‘½ä»¤è¡Œçš„å‚æ•°æ¥å†³å®šæ˜¯å¦ä½¿ç”¨è¿™ä¸ªå®å®šä¹‰ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›ç®€å•çš„æ–¹æ³•è·å–ï¼š 123456ifeq ($(DIE0), y) CFLAGS +=-DDIE_ORDINAL_0else CFLAGS +=-DDIE_ORDINAL_1endif$(CC) $(CFLAGS) $^ -o $@ ä»å‘½ä»¤è¡Œæ‰¾åˆ°DIE0è¿™ä¸ªå‚æ•°ï¼Œå¦‚æœå®ƒç­‰äºyè¡¨ç¤ºä½¿ç”¨DIE_ORDINAL_0ã€‚å¦‚æœä¸ç­‰äºyåˆ™ä½¿ç”¨DIE_ORDINAL_1ï¼Œå› ä¸ºæˆ‘ä»¬ä»£ç é‡Œæ²¡æœ‰DIE_ORDINAL_1ï¼Œæ‰€ä»¥å°±ç›¸å½“äºæ²¡æœ‰å®šä¹‰DIE_ORDINAL_0ã€‚ å‘½ä»¤è¡Œç¤ºä¾‹ï¼š 1234# ç¼–è¯‘DIE0make DIE0=&quot;y&quot;# ç¼–è¯‘DIE1make DIE0=&quot;n&quot;","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Makefile","slug":"Makefile","permalink":"http://example.com/tags/Makefile/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-ç”ŸæˆæŒ‡å®šå¤§å°æ–‡ä»¶","slug":"æ¯å¤©å­¦å‘½ä»¤-ç”ŸæˆæŒ‡å®šå¤§å°æ–‡ä»¶","date":"2022-07-23T08:14:38.000Z","updated":"2023-08-29T14:24:46.700Z","comments":true,"path":"2022/07/23/æ¯å¤©å­¦å‘½ä»¤-ç”ŸæˆæŒ‡å®šå¤§å°æ–‡ä»¶/","link":"","permalink":"http://example.com/2022/07/23/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-%E7%94%9F%E6%88%90%E6%8C%87%E5%AE%9A%E5%A4%A7%E5%B0%8F%E6%96%87%E4%BB%B6/","excerpt":"","text":"ä½¿ç”¨èƒŒæ™¯åœ¨æµ‹è¯•ä¸‹è½½é€Ÿåº¦ï¼Œæˆ–è€…æµ‹è¯•åŠ è§£å¯†æ–‡ä»¶ï¼Œäº¦æˆ–è€…åˆ¶ä½œæ–‡ä»¶ç³»ç»Ÿæ—¶éƒ½éœ€è¦ä¸€äº›æŒ‡å®šå¤§å°çš„æ–‡ä»¶ã€‚Linux æœ‰ä¸€äº›å‘½ä»¤å¯ä»¥å¿«é€Ÿå®Œæˆè¿™æ ·çš„ä»»åŠ¡ã€‚æ¥ä¸‹æ¥ä»‹ç»å‡ ä¸ªå¥½ç”¨çš„å‘½ä»¤ã€‚ ç©ºæ´æ–‡ä»¶åœ¨ Unix æ–‡ä»¶æ“ä½œä¸­ï¼Œæ“ä½œæ–‡ä»¶çš„ä½ç§»é‡å¯ä»¥å¤§äºæ–‡ä»¶çš„å½“å‰é•¿åº¦ï¼Œåœ¨ä¸‹ä¸€æ¬¡å†™æ“ä½œæ—¶ï¼Œå°±ä¼šæŠŠæ–‡ä»¶æ’‘å¤§ï¼ˆExtendï¼‰ï¼Œåœ¨æ–‡ä»¶é‡Œåˆ›å»ºç©ºæ´ï¼ˆHoleï¼‰ï¼Œæ²¡æœ‰è¢«å®é™…å†™å…¥çš„éƒ¨åˆ†éƒ½æ˜¯ 0ã€‚ç©ºæ´æ–‡ä»¶æ˜¯å¦å ç”¨å®é™…ç£ç›˜ç©ºé—´ç”±æ–‡ä»¶ç³»ç»Ÿè§‰å¾—ï¼ŒLinux ä¸­ç©ºæ´æ–‡ä»¶ä¸å ç”¨å®é™…ç£ç›˜ç©ºé—´ã€‚ fallocatefallocateç”¨äºå°†å—é¢„åˆ†é…ç»™æ–‡ä»¶ã€‚å¯¹äºæ”¯æŒfallocateç³»ç»Ÿè°ƒç”¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™å¯ä»¥é€šè¿‡åˆ†é…å—å¹¶å°†å…¶æ ‡è®°ä¸ºæœªåˆå§‹åŒ–æ¥å¿«é€Ÿå®Œæˆï¼Œå› æ­¤ä¸éœ€è¦å¯¹æ•°æ®å—è¿›è¡Œ I/O æ“ä½œã€‚è¿™æ˜¯åˆ›å»ºæ–‡ä»¶è€Œä¸æ˜¯ç”¨é›¶å¡«å……çš„æ›´å¿«çš„æ–¹æ³•ã€‚å¤§æ–‡ä»¶å‡ ä¹å¯ä»¥ç«‹å³åˆ›å»ºï¼Œè€Œä¸å¿…ç­‰å¾…ä»»ä½• I/O æ“ä½œå®Œæˆã€‚ è¯­æ³•ï¼š 1fallocate [-n] [-o offset] -l length filename d: æ£€æµ‹é›¶å¹¶æ›¿æ¢ä¸ºç©ºæ´ã€‚ -nï¼šæŒ‡å®šæ–‡ä»¶çš„å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚ -oï¼šæŒ‡å®šæ–‡ä»¶çš„åç§»é‡ï¼Œå¯ä»¥è·ŸäºŒè¿›åˆ¶$2^{N}$åç¼€KiBï¼ŒMiBï¼ŒGiBï¼ŒTiBï¼ŒPiBå’ŒEiBï¼ˆiBä¸ºå¯é€‰ï¼Œä¾‹å¦‚ï¼ŒKçš„å«ä¹‰ä¸KiBçš„å«ä¹‰ç›¸åŒæˆ–åç¼€KBï¼ŒMBï¼ŒGBï¼ŒPBå’ŒEBçš„åè¿›åˆ¶ï¼ˆ$10^{N}$ï¼‰ã€‚ -lï¼šæŒ‡å®šæ–‡ä»¶çš„å¤§å°ï¼Œå•ä½åŒä¸Šã€‚ -p, --punch-hole: å°†æŸä¸ªèŒƒå›´æ›¿æ¢ä¸ºç©ºæ´ (è¿å¸¦æ‰“å¼€ -n)ã€‚ filenameï¼šæŒ‡å®šæ–‡ä»¶åã€‚ ç¤ºä¾‹ï¼šåˆ†é…ä¸€ä¸ªå¤§å°ä¸º512MBçš„æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºefi.imgï¼š 1fallocate -l 512M efi.img å°†efi.imgæ–‡ä»¶ä¸­çš„0æ›¿æ¢ä¸ºç©ºæ´ï¼š 1fallocate -d efi.img ä»åç§» 128M çš„ä½ç½®æŒ–ä¸€ä¸ª 10M å¤§å°çš„æ´ 1fallocate -p -o 128M -l 10M efi.img ddLinux dd å‘½ä»¤ç”¨äºè¯»å–ã€è½¬æ¢å¹¶è¾“å‡ºæ•°æ®ã€‚dd å¯ä»æ ‡å‡†è¾“å…¥æˆ–æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œæ ¹æ®æŒ‡å®šçš„æ ¼å¼æ¥è½¬æ¢æ•°æ®ï¼Œå†è¾“å‡ºåˆ°æ–‡ä»¶ã€è®¾å¤‡æˆ–æ ‡å‡†è¾“å‡º dd çš„åŸæ„ä¸º data duplicatorï¼Œä½†ç”±äº dd å±äºè¾ƒä½é˜¶çš„èµ„æ–™å¤„ç†å·¥å…·ï¼Œé€šå¸¸éƒ½ä¼šä»¥ç®¡ç†è€…ï¼ˆrootï¼‰æƒé™æ¥æ‰§è¡Œï¼Œå¦‚æœç¨æœ‰ä¸æ…ï¼Œä¹Ÿå¾ˆå®¹æ˜“é€ æˆä¸¥é‡çš„åæœï¼ˆä¾‹å¦‚æ•´é¢—ç¡¬ç¢Ÿçš„èµ„æ–™ä¸è§ç­‰ç­‰ï¼‰ï¼Œæ‰€ä»¥æœ‰äº›äººä¹ŸæŠŠ dd å–åä¸º data destroyerã€‚dd æŒ‡ä»¤æ•™å­¦ä¸å®ç”¨èŒƒä¾‹ï¼Œå¤‡ä»½ä¸å›å¤èµ„æ–™çš„å°å·¥å…· - GT Wang if=FILE : æŒ‡å®šè¾“å…¥æ–‡ä»¶ï¼Œè‹¥ä¸æŒ‡å®šåˆ™ä»æ ‡æ³¨è¾“å…¥è¯»å–ã€‚è¿™é‡ŒæŒ‡å®šä¸º/dev/zero æ˜¯ Linux çš„ä¸€ä¸ªä¼ªæ–‡ä»¶ï¼Œå®ƒå¯ä»¥äº§ç”Ÿè¿ç»­ä¸æ–­çš„ null æµï¼ˆäºŒè¿›åˆ¶çš„ 0ï¼‰ã€‚ of=FILE : æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œè‹¥ä¸æŒ‡å®šåˆ™è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚ bs=BYTES : æ¯æ¬¡è¯»å†™çš„å­—èŠ‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨å•ä½ Kã€Mã€G ç­‰ç­‰ã€‚å¦å¤–è¾“å…¥è¾“å‡ºå¯ä»¥åˆ†åˆ«ç”¨ ibsã€obs æŒ‡å®šï¼Œè‹¥ä½¿ç”¨ bsï¼Œåˆ™è¡¨ç¤ºæ˜¯ ibs å’Œ obs éƒ½æ˜¯ç”¨è¯¥å‚æ•°ã€‚ count=BLOCKS : è¯»å–çš„ block æ•°ï¼Œblock çš„å¤§å°ç”± ibs æŒ‡å®šã€‚ ç¤ºä¾‹ï¼šç”Ÿæˆä¸€ä¸ª1gå¤§å°çš„æ–‡ä»¶ï¼Œå†…å®¹å…¨ä¸º0ï¼Œå—å¤§å°ä¸º1Mï¼Œæ–‡ä»¶åä¸ºefi.imgï¼š 1dd if=/dev/zero of=efi.img bs=1M count=1024 ç”Ÿæˆä¸€ä¸ª1gå¤§å°çš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºéšæœºæ•°ï¼Œå—å¤§å°ä¸º10Mï¼Œæ–‡ä»¶åä¸ºefi.imgï¼š 1dd if=/dev/urandom of=efi.img bs=10M count=1024 truncate -sï¼šæŒ‡å®šæ–‡ä»¶çš„å¤§å°ï¼Œå¯ä»¥è·ŸäºŒè¿›åˆ¶$2^{N}$åç¼€KiBï¼ŒMiBï¼ŒGiBï¼ŒTiBï¼ŒPiBå’ŒEiBï¼ˆiBä¸ºå¯é€‰ï¼Œä¾‹å¦‚ï¼ŒKçš„å«ä¹‰ä¸KiBçš„å«ä¹‰ç›¸åŒæˆ–åç¼€KBï¼ŒMBï¼ŒGBï¼ŒPBå’ŒEBçš„åè¿›åˆ¶ï¼ˆ$10^{N}$ï¼‰ã€‚ ç¤ºä¾‹ï¼šç”Ÿæˆä¸€ä¸ª 100M å¤§å°çš„æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºefi.imgï¼š 1truncate -s 100M efi.img å‚è€ƒLinux æ–‡ä»¶ç©ºæ´ä¸ç¨€ç–æ–‡ä»¶","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"SPI åè®®","slug":"SPIåè®®","date":"2022-07-19T06:23:40.000Z","updated":"2023-08-20T03:33:14.873Z","comments":true,"path":"2022/07/19/SPIåè®®/","link":"","permalink":"http://example.com/2022/07/19/SPI%E5%8D%8F%E8%AE%AE/","excerpt":"","text":"SPI æ¦‚è¿°SPI æ˜¯ä¸€ç§åŒæ­¥çš„ã€å…¨åŒå·¥çš„ã€é«˜é€Ÿçš„ä¸²è¡Œé€šä¿¡æ€»çº¿ã€‚ 4 çº¿åˆ¶ SPI å››ä¸ªä¿¡å·ï¼š SCLKï¼šä¸²è¡Œæ—¶é’Ÿä¿¡å·ï¼Œç”±ä¸»è®¾å¤‡äº§ç”Ÿï¼Œç”¨äºåŒæ­¥æ•°æ®ä¼ è¾“ã€‚ CSï¼šç‰‡é€‰ä¿¡å·ï¼Œç”±ä¸»è®¾å¤‡äº§ç”Ÿï¼Œç”¨äºé€‰æ‹©ä»è®¾å¤‡ã€‚ MOSIï¼šä¸»è®¾å¤‡è¾“å‡ºï¼Œä»è®¾å¤‡è¾“å…¥ï¼Œç”¨äºä¸»è®¾å¤‡å‘ä»è®¾å¤‡ä¼ è¾“æ•°æ®ã€‚ MISOï¼šä¸»è®¾å¤‡è¾“å…¥ï¼Œä»è®¾å¤‡è¾“å‡ºï¼Œç”¨äºä»è®¾å¤‡å‘ä¸»è®¾å¤‡ä¼ è¾“æ•°æ®ã€‚ é™¤äº†å››çº¿å¼ SPI æ€»çº¿ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸‰çº¿å¼ SPI æ€»çº¿å’ŒåŒçº¿å¼ SPI æ€»çº¿ã€‚ å››çº¿å¼ SPI æ€»çº¿ï¼Œä¹Ÿç§°ä¸ºæ ‡å‡† SPI æ€»çº¿ï¼Œç”± SCLKã€MOSIã€MISO å’Œ SSï¼ˆSlave Selectï¼‰å››ä¸ªä¿¡å·çº¿ç»„æˆã€‚å…¶ä¸­ï¼ŒSCLK æ˜¯æ—¶é’Ÿä¿¡å·çº¿ï¼›MOSI æ˜¯ä¸»è®¾å¤‡å‘ä»è®¾å¤‡å‘é€æ•°æ®çš„ä¿¡å·çº¿ï¼›MISO æ˜¯ä»è®¾å¤‡å‘ä¸»è®¾å¤‡å‘é€æ•°æ®çš„ä¿¡å·çº¿ï¼›SS æ˜¯ä»è®¾å¤‡çš„ç‰‡é€‰ä¿¡å·çº¿ï¼Œç”¨äºé€‰æ‹©è¦é€šä¿¡çš„ä»è®¾å¤‡ã€‚ ä¸‰çº¿å¼ SPI æ€»çº¿å°† MOSI å’Œ MISO åˆå¹¶ä¸ºå•ä¸€çš„ä¿¡å·çº¿ã€‚è¿™ç§ SPI æ€»çº¿æœ‰ä¸€ä¸ªä¸“é—¨çš„å«åš MOMI çš„ä¿¡å·çº¿ï¼Œæ—¢å¯ä»¥ä½œä¸ºä¸»è®¾å¤‡å‘ä»è®¾å¤‡å‘é€æ•°æ®çš„ä¿¡å·çº¿ï¼Œåˆå¯ä»¥ä½œä¸ºä»è®¾å¤‡å‘ä¸»è®¾å¤‡å‘é€æ•°æ®çš„ä¿¡å·çº¿ã€‚ åŒçº¿å¼ SPI æ€»çº¿ï¼ˆä¹Ÿç§°ä¸º MICROWIRE æˆ– uWireï¼‰ï¼Œç”±ä¸€ä¸ªä¸²è¡Œæ•°æ®çº¿å’Œä¸€ä¸ªæ—¶é’Ÿçº¿ç»„æˆã€‚åœ¨è¿™ç§ SPI æ€»çº¿ä¸Šï¼Œæ²¡æœ‰å•ç‹¬çš„ç‰‡é€‰ä¿¡å·çº¿ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªå¸§é€‰æ‹©æ§åˆ¶ä½æ¥é€‰æ‹©ç›¸åº”çš„ä»è®¾å¤‡ã€‚ ä»–ä»¬ä¼ è¾“é€Ÿç‡æœ‰å·®åˆ«å—ï¼Ÿæ˜¯çš„ï¼ŒSPI æ€»çº¿çš„ä¸åŒç±»å‹ä¹‹é—´å­˜åœ¨ä¼ è¾“é€Ÿç‡ä¸Šçš„å·®åˆ«ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå››çº¿å¼ SPI æ€»çº¿çš„ä¼ è¾“é€Ÿåº¦æœ€å¿«ï¼Œè€ŒåŒçº¿å¼ SPI æ€»çº¿çš„ä¼ è¾“é€Ÿåº¦æœ€æ…¢ã€‚ä½†å…·ä½“çš„ä¼ è¾“é€Ÿåº¦ä¼šå—åˆ°å¾ˆå¤šå› ç´ çš„å½±å“ï¼Œä¾‹å¦‚å·¥ä½œé¢‘ç‡ã€æ•°æ®çº¿é•¿åº¦ç­‰ç­‰ã€‚å¦‚æœè¦åœ¨å®é™…åº”ç”¨ä¸­é€‰æ‹©åˆé€‚çš„ SPI æ€»çº¿ç±»å‹ï¼Œéœ€è¦è€ƒè™‘è¯¸å¦‚è¿™äº›å› ç´ çš„å½±å“ï¼Œå¹¶æ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œæƒè¡¡å–èˆã€‚SPI æ€»çº¿çš„ä¼ è¾“é€Ÿåº¦å¿«æ…¢ä¸å…¶ä¿¡å·çº¿æ•°é‡æœ‰å…³ã€‚åŒçº¿å¼ SPI æ€»çº¿ä¸€å…±åªæœ‰ä¸¤æ¡ä¿¡å·çº¿ï¼šä¸€ä¸ªä¸»è®¾å¤‡ (Master) è¾“å‡ºæ—¶é’Ÿä¿¡å· (SCLK)ï¼Œä¸€ä¸ªä¸»è®¾å¤‡é€šè¿‡è¯¥ä¿¡å·çº¿è¯»å–ä»è®¾å¤‡ (Slave) çš„åº”ç­”ä¿¡å·ã€‚è€Œå››çº¿å¼ SPI æ€»çº¿é™¤äº†ä¸Šè¿°ä¸¤æ¡ä¿¡å·çº¿å¤–ï¼Œè¿˜æœ‰ä¸¤æ¡ç”¨äºæ•°æ®ä¼ è¾“çš„ä¿¡å·çº¿ï¼šä¸»è®¾å¤‡é€šè¿‡ MOSI ä¿¡å·çº¿å‘ä»è®¾å¤‡å‘é€æ•°æ®ï¼Œä»è®¾å¤‡åˆ™é€šè¿‡ MISO ä¿¡å·çº¿å°†æ•°æ®è¿”å›ç»™ä¸»è®¾å¤‡ã€‚ç”±äºå››çº¿å¼ SPI æ€»çº¿æœ‰ä¸“é—¨çš„æ•°æ®ä¼ è¾“ä¿¡å·çº¿ï¼Œæ•…å¯ä»¥é€šè¿‡åŒæ—¶åœ¨è¿™ä¸¤æ¡ä¿¡å·çº¿ä¸Šä¼ è¾“æ•°æ®æ¥å®ç°æ›´é«˜çš„ä¼ è¾“é€Ÿç‡ï¼Œä»è€Œæ¯”åŒçº¿å¼ SPI æ€»çº¿å¿«ä¸€äº›ã€‚ æ—¶é’Ÿææ€§å’Œæ—¶é’Ÿç›¸ä½åœ¨ SPI ä¸­ï¼Œä¸»æœºå¯ä»¥é€‰æ‹©æ—¶é’Ÿææ€§å’Œæ—¶é’Ÿç›¸ä½ã€‚åœ¨ç©ºé—²çŠ¶æ€æœŸé—´ï¼ŒCPOL ä½è®¾ç½®æ—¶é’Ÿä¿¡å·çš„ææ€§ã€‚ç©ºé—²çŠ¶æ€æ˜¯æŒ‡ä¼ è¾“å¼€å§‹æ—¶ CS ä¸ºé«˜ç”µå¹³ä¸”åœ¨å‘ä½ç”µå¹³è½¬å˜çš„æœŸé—´ï¼Œä»¥åŠä¼ è¾“ç»“æŸæ—¶ CS ä¸ºä½ç”µå¹³ä¸”åœ¨å‘é«˜ç”µå¹³è½¬å˜çš„æœŸé—´ã€‚CPHA ä½é€‰æ‹©æ—¶é’Ÿç›¸ä½ã€‚æ ¹æ® CPHA ä½çš„çŠ¶æ€ï¼Œä½¿ç”¨æ—¶é’Ÿä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿æ¥é‡‡æ ·å’Œ/æˆ–ç§»ä½æ•°æ®ã€‚ä¸»æœºå¿…é¡»æ ¹æ®ä»æœºçš„è¦æ±‚é€‰æ‹©æ—¶é’Ÿææ€§å’Œæ—¶é’Ÿç›¸ä½ã€‚æ ¹æ® CPOL å’Œ CPHA ä½çš„é€‰æ‹©ï¼Œæœ‰å››ç§ SPI æ¨¡å¼å¯ç”¨ã€‚è¡¨ 1 æ˜¾ç¤ºäº†è¿™ 4 ç§ SPI æ¨¡å¼ã€‚ SPI æ¨¡å¼ CPOL(Serial Clock Polarity) CPHA(Serial Clock Phase) ç©ºé—²çŠ¶æ€ä¸‹çš„æ—¶é’Ÿææ€§ é‡‡æ ·æ—¶çš„æ—¶é’Ÿç›¸ä½ ç§»ä½æ•°æ®çš„æ—¶é’Ÿç›¸ä½ 0 0 0 é€»è¾‘ä½ç”µå¹³ ä¸Šå‡æ²¿ ä¸‹é™æ²¿ 1 0 1 é€»è¾‘ä½ç”µå¹³ ä¸‹é™æ²¿ ä¸Šå‡æ²¿ 2 1 1 é«˜ç”µå¹³ ä¸‹é™æ²¿ ä¸Šå‡æ²¿ 3 1 0 é«˜ç”µå¹³ ä¸Šå‡æ²¿ ä¸‹é™æ²¿ CPOL å’Œ CPHA å¯ä»¥é€šè¿‡ SPI çš„çŠ¶æ€å¯„å­˜å™¨è®¾ç½®ã€‚ æ˜¾ç¤ºäº†å››ç§ SPI æ¨¡å¼ä¸‹çš„é€šä¿¡ç¤ºä¾‹ã€‚åœ¨è¿™äº›ç¤ºä¾‹ä¸­ï¼Œæ•°æ®æ˜¾ç¤ºåœ¨ MOSI å’Œ MISO çº¿ä¸Šã€‚ä¼ è¾“çš„å¼€å§‹å’Œç»“æŸç”¨ç»¿è‰²è™šçº¿è¡¨ç¤ºï¼Œé‡‡æ ·è¾¹æ²¿ç”¨æ©™è‰²è™šçº¿è¡¨ç¤ºï¼Œç§»ä½è¾¹æ²¿ç”¨è“è‰²è™šçº¿è¡¨ç¤ºã€‚ ä¸‹å›¾ç»™å‡ºäº† SPI æ¨¡å¼ 1 çš„æ—¶åºå›¾ã€‚åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œæ—¶é’Ÿææ€§ä¸º 0ï¼Œè¡¨ç¤ºæ—¶é’Ÿä¿¡å·çš„ç©ºé—²çŠ¶æ€ä¸ºä½ç”µå¹³ã€‚æ­¤æ¨¡å¼ä¸‹çš„æ—¶é’Ÿç›¸ä½ä¸º 1ï¼Œè¡¨ç¤ºæ•°æ®åœ¨ä¸‹é™æ²¿é‡‡æ ·ï¼ˆç”±æ©™è‰²è™šçº¿æ˜¾ç¤ºï¼‰ï¼Œå¹¶ä¸”æ•°æ®åœ¨æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿ç§»å‡ºï¼ˆç”±è“è‰²è™šçº¿æ˜¾ç¤ºï¼‰ã€‚ å¤šä»æœºé…ç½®æ ‡å‡† SPI æ¨¡å¼ åœ¨å¸¸è§„æ¨¡å¼ä¸‹ï¼Œä¸»æœºéœ€è¦ä¸ºæ¯ä¸ªä»æœºæä¾›å•ç‹¬çš„ç‰‡é€‰ä¿¡å·ã€‚ä¸€æ—¦ä¸»æœºä½¿èƒ½ï¼ˆæ‹‰ä½ï¼‰ç‰‡é€‰ä¿¡å·ï¼ŒMOSI/MISO çº¿ä¸Šçš„æ—¶é’Ÿå’Œæ•°æ®ä¾¿å¯ç”¨äºæ‰€é€‰çš„ä»æœºã€‚å¦‚æœä½¿èƒ½å¤šä¸ªç‰‡é€‰ä¿¡å·ï¼Œåˆ™ MISO çº¿ä¸Šçš„æ•°æ®ä¼šè¢«ç ´åï¼Œå› ä¸ºä¸»æœºæ— æ³•è¯†åˆ«å“ªä¸ªä»æœºæ­£åœ¨ä¼ è¾“æ•°æ®ã€‚ ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œéšç€ä»æœºæ•°é‡çš„å¢åŠ ï¼Œæ¥è‡ªä¸»æœºçš„ç‰‡é€‰çº¿çš„æ•°é‡ä¹Ÿå¢åŠ ã€‚è¿™ä¼šå¿«é€Ÿå¢åŠ ä¸»æœºéœ€è¦æä¾›çš„è¾“å…¥å’Œè¾“å‡ºæ•°é‡ï¼Œå¹¶é™åˆ¶å¯ä»¥ä½¿ç”¨çš„ä»æœºæ•°é‡ã€‚å¯ä»¥ä½¿ç”¨å…¶ä»–æŠ€æœ¯æ¥å¢åŠ å¸¸è§„æ¨¡å¼ä¸‹çš„ä»æœºæ•°é‡ï¼Œä¾‹å¦‚ä½¿ç”¨å¤šè·¯å¤ç”¨å™¨äº§ç”Ÿç‰‡é€‰ä¿¡å·ã€‚ èŠèŠ±é“¾æ¨¡å¼ åœ¨èŠèŠ±é“¾æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä»æœºçš„ç‰‡é€‰ä¿¡å·è¿æ¥åœ¨ä¸€èµ·ï¼Œæ•°æ®ä»ä¸€ä¸ªä»æœºä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªä»æœºã€‚åœ¨æ­¤é…ç½®ä¸­ï¼Œæ‰€æœ‰ä»æœºåŒæ—¶æ¥æ”¶åŒä¸€ SPI æ—¶é’Ÿã€‚æ¥è‡ªä¸»æœºçš„æ•°æ®ç›´æ¥é€åˆ°ç¬¬ä¸€ä¸ªä»æœºï¼Œè¯¥ä»æœºå°†æ•°æ®æä¾›ç»™ä¸‹ä¸€ä¸ªä»æœºï¼Œä¾æ­¤ç±»æ¨ã€‚ ä½¿ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œç”±äºæ•°æ®æ˜¯ä»ä¸€ä¸ªä»æœºä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªä»æœºï¼Œæ‰€ä»¥ä¼ è¾“æ•°æ®æ‰€éœ€çš„æ—¶é’Ÿå‘¨æœŸæ•°ä¸èŠèŠ±é“¾ä¸­çš„ä»æœºä½ç½®æˆæ¯”ä¾‹ã€‚ä¸ºä½¿ç¬¬ 3 ä¸ªä»æœºèƒ½å¤Ÿè·å¾—æ•°æ®ï¼Œéœ€è¦ 24 ä¸ªæ—¶é’Ÿè„‰å†²ï¼Œè€Œå¸¸è§„ SPI æ¨¡å¼ä¸‹åªéœ€ 8 ä¸ªæ—¶é’Ÿè„‰å†²ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†æ—¶é’Ÿå‘¨æœŸå’Œé€šè¿‡èŠèŠ±é“¾çš„æ•°æ®ä¼ æ’­ã€‚å¹¶éæ‰€æœ‰ SPI å™¨ä»¶éƒ½æ”¯æŒèŠèŠ±é“¾æ¨¡å¼ã€‚è¯·å‚é˜…äº§å“æ•°æ®æ‰‹å†Œä»¥ç¡®è®¤èŠèŠ±é“¾æ˜¯å¦å¯ç”¨ã€‚ SPI å®ç°å‚è€ƒèµ„æ–™SPI æ¥å£ç®€ä»‹ | äºšå¾·è¯ºåŠå¯¼ä½“ SPI åè®® - æ°å“¥çš„{è¿ç»´ï¼Œç¼–ç¨‹ï¼Œè°ƒæ¿å­}å°ç¬”è®°","categories":[{"name":"Embedded Development","slug":"Embedded-Development","permalink":"http://example.com/categories/Embedded-Development/"}],"tags":[{"name":"SoC","slug":"SoC","permalink":"http://example.com/tags/SoC/"},{"name":"MCU","slug":"MCU","permalink":"http://example.com/tags/MCU/"},{"name":"BootROM","slug":"BootROM","permalink":"http://example.com/tags/BootROM/"},{"name":"SPI","slug":"SPI","permalink":"http://example.com/tags/SPI/"}]},{"title":"ç†è§£è™šæ‹Ÿå†…å­˜","slug":"ç†è§£è™šæ‹Ÿå†…å­˜","date":"2022-07-17T13:45:20.000Z","updated":"2022-10-15T03:14:29.759Z","comments":true,"path":"2022/07/17/ç†è§£è™šæ‹Ÿå†…å­˜/","link":"","permalink":"http://example.com/2022/07/17/%E7%90%86%E8%A7%A3%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/","excerpt":"","text":"ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿå†…å­˜ï¼ŸCPU è®¿é—®å†…å­˜çš„æœ€è‡ªç„¶çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ç‰©ç†åœ°å€ï¼Œè¿™ç§æ–¹å¼ç§°ä¸ºç‰©ç†å¯»å€ã€‚1ï¼Œè®¡ç®—æœºä¸­å¹¶ä¸æ˜¯åªæœ‰ä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œï¼Œå¦‚æœå®ƒä»¬éƒ½æ˜¯ç”¨ç‰©ç†å¯»å€çš„æ–¹å¼ï¼Œé‚£ä¹ˆæ‰€æœ‰ç¨‹åºå¿…é¡»åœ¨é“¾æ¥ä¹‹å‰ç¡®å®šå¥½è‡ªå·±æ‰€ç”¨åˆ°çš„å†…å­˜èŒƒå›´ï¼Œå¦åˆ™ä¸¤ä¸ªç¨‹åºå°±å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚2ï¼Œç¨‹åºå¤§äºå†…å­˜çš„é—®é¢˜æ—©åœ¨ä¸Šä¸–çºªå…­åå¹´ä»£å°±å‡ºç°ï¼Œåæ¥å‡ºç°äº†è¦†ç›–æŠ€æœ¯ï¼ˆOverlayï¼‰ï¼ŒæŠŠç¨‹åºåˆ†å‰²æˆè®¸å¤šç‰‡æ®µã€‚ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶ï¼Œå°†è¦†ç›–ç®¡ç†æ¨¡å—è£…å…¥å†…å­˜ï¼Œè¯¥ç®¡ç†æ¨¡å—ç«‹å³è£…å…¥å¹¶è¿è¡Œè¦†ç›– 0ã€‚æ‰§è¡Œå®Œæˆåï¼Œè¦†ç›– 0 é€šçŸ¥ç®¡ç†æ¨¡å—è£…å…¥è¦†ç›– 1ï¼Œæˆ–è€…å ç”¨è¦†ç›– 0 çš„ä¸Šæ–¹ä½ç½®ï¼ˆå¦‚æœæœ‰ç©ºé—´ï¼‰ï¼Œæˆ–è€…å ç”¨è¦†ç›– 0ï¼ˆå¦‚æœæ²¡æœ‰ç©ºé—´ï¼‰ã€‚æŠŠä¸€ä¸ªå¤§ç¨‹åºåˆ†å‰²æˆå°çš„ã€æ¨¡å—åŒ–çš„ç‰‡æ®µæ˜¯éå¸¸è´¹æ—¶å’Œæ¯ç‡¥çš„ï¼Œå¹¶ä¸”æ˜“äºå‡ºé”™ã€‚å¾ˆå°‘ç¨‹åºå‘˜æ“…é•¿ä½¿ç”¨è¦†ç›–æŠ€æœ¯ã€‚ ä¸ºäº†æ›´åŠ æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜å¹¶ä¸”å°‘å‡ºé”™ï¼Œç°ä»£ç³»ç»Ÿæä¾›äº†ä¸€ç§å¯¹ä¸»å­˜çš„æŠ½è±¡æ¦‚å¿µï¼Œå«åšè™šæ‹Ÿå†…å­˜(VM)ã€‚ä¸»è¦æœ‰ä¸‰ä¸ªåŠŸèƒ½ï¼š å®ƒå°†ä¸»å­˜çœ‹æˆæ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„åœ°å€ç©ºé—´çš„é«˜é€Ÿç¼“å­˜ï¼Œåœ¨ä¸»å­˜ä¸­åªä¿å­˜æ´»åŠ¨åŒºåŸŸï¼Œå¹¶æ ¹æ®éœ€è¦åœ¨ç£ç›˜å’Œä¸»å­˜ä¹‹é—´æ¥å›ä¼ é€æ•°æ®ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®ƒé«˜æ•ˆåœ°ä½¿ç”¨äº†ä¸»å­˜ã€‚ å®ƒä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›äº†ä¸€è‡´çš„åœ°å€ç©ºé—´ï¼Œä»è€Œç®€åŒ–äº†å†…å­˜ç®¡ç†ã€‚ å®ƒä¿æŠ¤äº†æ¯ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸è¢«å…¶ä»–è¿›ç¨‹ç ´åã€‚ ä»€ä¹ˆæ˜¯è™šæ‹Ÿå¯»å€ï¼Ÿå¦‚æœä¸»å­˜è¢«åˆ†ä¸ºé•¿åº¦ä¸º$M$çš„å•å­—èŠ‚å¤§å°çš„æ•°ç»„ï¼Œæ¯ä¸ªå­—èŠ‚éƒ½å¯¹åº”ä¸€ä¸ªç‰©ç†åœ°å€ï¼ŒCPU é€šè¿‡è¿™ä¸ªå”¯ä¸€çš„åœ°å€è®¿é—®ä¸»å­˜ï¼Œè¿™æ ·çš„æ–¹å¼å°±æ˜¯ç‰©ç†å¯»å€ã€‚ç°ä»£å¤„ç†å™¨ä½¿ç”¨è™šæ‹Ÿå¯»å€çš„æ–¹å¼ã€‚CPU é€šè¿‡ç”Ÿæˆçš„è™šæ‹Ÿåœ°å€æ¥è®¿é—®å†…å­˜ï¼Œè¿™ä¸ªåœ°å€åœ¨é€åˆ°å†…å­˜ä¹‹å‰ä¼šè¢«è½¬æ¢æˆç‰©ç†åœ°å€ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåœ°å€ç¿»è¯‘ã€‚CPU èŠ¯ç‰‡ä¸Šå«åšå†…å­˜ç®¡ç†å•å…ƒï¼ˆMemory Management Unit, MMUï¼‰çš„ä¸“ç”¨ç¡¬ä»¶ï¼Œåˆ©ç”¨å­˜æ”¾åœ¨ä¸»å­˜ä¸­çš„æŸ¥è¯¢è¡¨æ¥åŠ¨æ€ç¿»è¯‘è™šæ‹Ÿåœ°å€ï¼Œè¯¥è¡¨çš„å†…å®¹ç”±æ“ä½œç³»ç»Ÿç®¡ç†ã€‚ è™šæ‹Ÿå†…å­˜ä½œä¸ºç¼“å­˜çš„å·¥å…·æ¦‚å¿µä¸Šè€Œè¨€ï¼Œè™šæ‹Ÿå†…å­˜è¢«ç»„ç»‡æˆä¸ºä¸€ä¸ªç”±å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„ N ä¸ªè¿ç»­çš„å­—èŠ‚å¤§å°çš„å•å…ƒç»„æˆçš„æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯å­—èŠ‚æ•°ç»„ã€‚æ¯ä¸ªå­—èŠ‚éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„è™šæ‹Ÿåœ°å€ä½œä¸ºæ•°ç»„çš„ç´¢å¼•ã€‚ç£ç›˜ä¸Šæ´»åŠ¨çš„æ•°ç»„å†…å®¹è¢«ç¼“å­˜åœ¨ä¸»å­˜ä¸­ã€‚åœ¨å­˜å‚¨å™¨ç»“æ„ä¸­ï¼Œè¾ƒä½å±‚æ¬¡ä¸Šçš„ç£ç›˜çš„æ•°æ®è¢«åˆ†å‰²æˆå—ï¼Œè¿™äº›å—ä½œä¸ºå’Œè¾ƒé«˜å±‚æ¬¡çš„ä¸»å­˜ä¹‹é—´çš„ä¼ è¾“å•å…ƒã€‚ä¸»å­˜ä½œä¸ºè™šæ‹Ÿå†…å­˜çš„ç¼“å­˜ã€‚ è™šæ‹Ÿå†…å­˜è¢«åˆ†å‰²ä¸ºå¤§å°å›ºå®šçš„å—ï¼Œè¿™äº›å—å«è™šæ‹Ÿé¡µï¼ˆVirtual Pageï¼ŒVPï¼‰ï¼Œç±»ä¼¼çš„ç‰©ç†å†…å­˜ä¹Ÿæœ‰ç‰©ç†é¡µ(Physical Page, PP)ã€‚è™šæ‹Ÿé¡µæœ‰ä¸‰ç§ä¸åŒçš„çŠ¶æ€ï¼š æœªåˆ†é…ï¼šVM ç³»ç»Ÿè¿˜æœªåˆ†é… (æˆ–è€…åˆ›å»ºï¼‰çš„é¡µã€‚æœªåˆ†é…çš„å—æ²¡æœ‰ä»»ä½•æ•°æ®å’Œå®ƒä»¬ç›¸å…³è”ï¼Œå› æ­¤ä¹Ÿå°±ä¸å ç”¨ä»»ä½•ç£ç›˜ç©ºé—´ã€‚ å·²ç¼“å­˜ï¼šå½“å‰å·²ç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­çš„å·²åˆ†é…é¡µã€‚ æœªç¼“å­˜ï¼šæœªç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­çš„å·²åˆ†é…é¡µã€‚ ä¸ºäº†æœ‰åŠ©äºæ¸…æ™°ç†è§£å­˜å‚¨å±‚æ¬¡ç»“æ„ä¸­ä¸åŒçš„ç¼“å­˜æ¦‚å¿µï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æœ¯è¯­SRAMç¼“å­˜æ¥è¡¨ç¤ºä½äº CPU å’Œä¸»å­˜ä¹‹é—´çš„ Llã€L2 å’Œ L3 é«˜é€Ÿç¼“å­˜ï¼Œå¹¶ä¸”ç”¨æœ¯è¯­ DRAM ç¼“å­˜æ¥è¡¨ç¤ºè™šæ‹Ÿå†…å­˜ç³»ç»Ÿçš„ç¼“å­˜ï¼Œå®ƒåœ¨ä¸»å­˜ä¸­ç¼“å­˜è™šæ‹Ÿé¡µã€‚ åœ¨å­˜å‚¨å±‚æ¬¡ç»“æ„ä¸­ï¼ŒDRAM ç¼“å­˜çš„ä½ç½®å¯¹å®ƒçš„ç»„ç»‡ç»“æ„æœ‰å¾ˆå¤§çš„å½±å“ã€‚å›æƒ³ä¸€ä¸‹ï¼ŒDRAM æ¯” SRAM è¦æ…¢å¤§çº¦ 10 å€ï¼Œè€Œç£ç›˜è¦æ¯” DRAM æ…¢å¤§çº¦ 100000 å¤šå€ã€‚å› æ­¤ï¼ŒDRAM ç¼“å­˜ä¸­çš„ä¸å‘½ä¸­æ¯”èµ· SRAM ç¼“å­˜ä¸­çš„ä¸å‘½ä¸­è¦æ˜‚è´µå¾—å¤šã€‚å› æ­¤ï¼Œä¸ç¡¬ä»¶å¯¹ SRAM ç¼“å­˜ç›¸æ¯”ï¼Œæ“ä½œç³»ç»Ÿå¯¹ DRAM ç¼“å­˜ä½¿ç”¨äº†æ›´å¤æ‚ç²¾å¯†çš„æ›¿æ¢ç®—æ³•ã€‚ï¼ˆè¿™äº›æ›¿æ¢ç®—æ³•è¶…å‡ºäº†æˆ‘ä»¬çš„è®¨è®ºèŒƒå›´ï¼‰ã€‚æœ€åï¼Œå› ä¸ºå¯¹ç£ç›˜çš„è®¿é—®æ—¶é—´å¾ˆé•¿ï¼ŒDRAM ç¼“å­˜æ€»æ˜¯ä½¿ç”¨å†™å›ï¼Œè€Œä¸æ˜¯ç›´å†™ã€‚ é¡µè¡¨è™šæ‹Ÿå†…å­˜ç³»ç»Ÿå¯ä»¥å®Œæˆä»¥ä¸‹è¿™äº›åŠŸèƒ½ï¼Œ åˆ¤å®šä¸€ä¸ªè™šæ‹Ÿé¡µæ˜¯å¦ç¼“å­˜åœ¨ DRAM ä¸­çš„æŸä¸ªåœ°æ–¹ï¼› å¯ä»¥ç¡®å®šè¿™ä¸ªè™šæ‹Ÿé¡µå­˜æ”¾åœ¨å“ªä¸ªç‰©ç†é¡µä¸­ï¼› å¦‚æœä¸å‘½ä¸­ï¼Œç³»ç»Ÿå¿…é¡»åˆ¤æ–­è¿™ä¸ªè™šæ‹Ÿé¡µå­˜æ”¾åœ¨ç£ç›˜çš„å“ªä¸ªä½ç½®ï¼Œåœ¨ç‰©ç†å†…å­˜ä¸­é€‰æ‹©ä¸€ä¸ªç‰ºç‰²é¡µï¼Œå¹¶å°†è™šæ‹Ÿé¡µä»ç£ç›˜å¤åˆ¶åˆ° DRAM ä¸­ï¼Œæ›¿æ¢è¿™ä¸ªç‰ºç‰²é¡µã€‚ è¿™äº›åŠŸèƒ½æ˜¯ç”±è½¯ç¡¬ä»¶è”åˆæä¾›çš„ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿè½¯ä»¶ã€MMUï¼ˆå†…å­˜ç®¡ç†å•å…ƒï¼‰ä¸­çš„åœ°å€ç¿»è¯‘ç¡¬ä»¶å’Œä¸€ä¸ªå­˜æ”¾åœ¨ç‰©ç†å†…å­˜ä¸­å«åšé¡µè¡¨ï¼ˆpage tableï¼‰çš„æ•°æ®ç»“æ„ã€‚é¡µè¡¨å°†è™šæ‹Ÿé¡µæ˜ å°„åˆ°ç‰©ç†é¡µã€‚æ¯æ¬¡åœ°å€ç¿»è¯‘ç¡¬ä»¶å°†ä¸€ä¸ªè™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€æ—¶ï¼Œéƒ½ä¼šè¯»å–é¡µè¡¨ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£ç»´æŠ¤é¡µè¡¨çš„å†…å®¹ï¼Œä»¥åŠåœ¨ç£ç›˜ä¸ DRAM ä¹‹é—´æ¥å›ä¼ é€é¡µã€‚ å›¾ 9-4 å±•ç¤ºäº†ä¸€ä¸ªé¡µè¡¨çš„åŸºæœ¬ç»„ç»‡ç»“æ„ã€‚é¡µè¡¨å°±æ˜¯ä¸€ä¸ªé¡µè¡¨æ¡ç›®ï¼ˆPage Table Entryï¼ŒPTEï¼‰çš„æ•°ç»„ã€‚è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„æ¯ä¸ªé¡µåœ¨é¡µè¡¨ä¸­ä¸€ä¸ªå›ºå®šåç§»é‡å¤„éƒ½æœ‰ä¸€ä¸ª PTEã€‚ PTE ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š æœ‰æ•ˆä½ï¼šè¡¨æ˜äº†è¯¥è™šæ‹Ÿé¡µå½“å‰æ˜¯å¦è¢«ç¼“å­˜åœ¨ DRAM ä¸­ï¼› åœ°å€ï¼šè¡¨ç¤º DRAM ä¸­ç›¸åº”çš„ç‰©ç†é¡µçš„èµ·å§‹ä½ç½®ï¼Œè¿™ä¸ªç‰©ç†é¡µä¸­ç¼“å­˜äº†è¯¥è™šæ‹Ÿé¡µã€‚ é¡µå‘½ä¸­ä¸ç¼ºé¡µl å½“ CPU è®¿é—®å·²è¢«ç¼“å­˜çš„åœ°å€æ—¶ï¼Œå°±å«åšé¡µå‘½ä¸­ã€‚å¦‚è®¿é—®ä¸Šå›¾ VP2ï¼Œè™šæ‹Ÿåœ°å€ç´¢å¼•åˆ° PTE2ï¼Œæ­¤æ—¶æœ‰æ•ˆä½ä¸º 1ï¼Œåœ°å€ç¿»è¯‘ç¡¬ä»¶å°±çŸ¥é“è¯¥åœ°å€è¢«ç¼“å­˜äº†ã€‚ å½“ CPU è®¿é—®æœªè¢«ç¼“å­˜çš„åœ°å€æ—¶ï¼Œä¼šå¯¼è‡´ç¼ºé¡µã€‚å¦‚è®¿é—®ä¸Šå›¾çš„ VP3ï¼Œè™šæ‹Ÿåœ°å€ç´¢å¼•åˆ° PTE3ï¼Œæ­¤æ—¶æœ‰æ•ˆä½ä¸º 0ï¼Œåœ°å€ç¿»è¯‘ç¡¬ä»¶å°±çŸ¥é“è¯¥åœ°å€æœªè¢«ç¼“å­˜ï¼Œéœ€è¦ä»ç£ç›˜ä¸­è¯»å–ã€‚ è¿™æ—¶ä¼šè§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ã€‚ç¼ºé¡µå¼‚å¸¸è°ƒç”¨å†…æ ¸ä¸­çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè¯¥ç¨‹åºä¼šé€‰æ‹©ä¸€ä¸ªç‰ºç‰²é¡µï¼Œåœ¨æ­¤ä¾‹ä¸­å°±æ˜¯å­˜æ”¾åœ¨ PP 3 ä¸­çš„ VP 4ã€‚å¦‚æœ VP 4 å·²ç»è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆå†…æ ¸å°±ä¼šå°†å®ƒå¤åˆ¶å›ç£ç›˜ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œå†…æ ¸éƒ½ä¼šä¿®æ”¹ VP 4 çš„é¡µè¡¨æ¡ç›®ï¼Œåæ˜ å‡º VP 4 ä¸å†ç¼“å­˜åœ¨ä¸»å­˜ä¸­è¿™ä¸€äº‹å®ã€‚ æ¥ä¸‹æ¥ï¼Œå†…æ ¸ä»ç£ç›˜å¤åˆ¶ VP 3 åˆ°å†…å­˜ä¸­çš„ PP 3ï¼Œæ›´æ–° PTE 3ï¼Œéšåè¿”å›ã€‚å½“å¼‚å¸¸å¤„ç†ç¨‹åºè¿”å›æ—¶ï¼Œå®ƒä¼šé‡æ–°å¯åŠ¨å¯¼è‡´ç¼ºé¡µçš„æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ä¼šæŠŠå¯¼è‡´ç¼ºé¡µçš„è™šæ‹Ÿåœ°å€é‡å‘é€åˆ°åœ°å€ç¿»è¯‘ç¡¬ä»¶ã€‚ä½†æ˜¯ç°åœ¨ï¼ŒVP 3 å·²ç»ç¼“å­˜åœ¨ä¸»å­˜ä¸­äº†ï¼Œé‚£ä¹ˆé¡µå‘½ä¸­ä¹Ÿèƒ½ç”±åœ°å€ç¿»è¯‘ç¡¬ä»¶æ­£å¸¸å¤„ç†äº†ã€‚å›¾ 9-7 å±•ç¤ºäº†åœ¨ç¼ºé¡µä¹‹åæˆ‘ä»¬çš„ç¤ºä¾‹é¡µè¡¨çš„çŠ¶æ€ã€‚ åœ¨è™šæ‹Ÿå†…å­˜çš„ä¹ æƒ¯è¯´æ³•ä¸­ï¼Œå—è¢«ç§°ä¸ºé¡µã€‚åœ¨ç£ç›˜å’Œå†…å­˜ä¹‹é—´ä¼ é€é¡µçš„æ´»åŠ¨å«åšäº¤æ¢ï¼ˆswappingï¼‰æˆ–è€…é¡µé¢è°ƒåº¦ï¼ˆpagingï¼‰ã€‚é¡µä»ç£ç›˜æ¢å…¥ï¼ˆæˆ–è€…é¡µé¢è°ƒå…¥ï¼‰DRAM å’Œä» DRAM æ¢å‡ºï¼ˆæˆ–è€…é¡µé¢è°ƒå‡ºï¼‰ç£ç›˜ã€‚ä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æœ€åæ—¶åˆ»ï¼Œä¹Ÿå°±æ˜¯å½“æœ‰ä¸å‘½ä¸­å‘ç”Ÿæ—¶ï¼Œæ‰æ¢å…¥é¡µé¢çš„è¿™ç§ç­–ç•¥ç§°ä¸ºæŒ‰éœ€é¡µé¢è°ƒåº¦ï¼ˆdemand pagingï¼‰ã€‚ è™šæ‹Ÿå†…å­˜ä½œä¸ºå†…å­˜ç®¡ç†çš„å·¥å…·ä¹‹å‰æˆ‘ä»¬åªè®¨è®ºäº†ä¸€ä¸ªé¡µè¡¨çš„æƒ…å†µï¼Œä½†æ˜¯å®é™…ä¸Šæ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½åˆ†é…äº†ä¸€ä¸ªç‹¬ç«‹çš„é¡µè¡¨ã€‚å¤šä¸ªè™šæ‹Ÿé¡µé¢å¯ä»¥æ˜ å°„åˆ°åŒä¸€ä¸ªå…±äº«ç‰©ç†é¡µé¢ä¸Šã€‚ æŒ‰éœ€é¡µé¢è°ƒåº¦å’Œç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„ç»“åˆï¼Œå¯¹ç³»ç»Ÿä¸­å†…å­˜çš„ä½¿ç”¨å’Œç®¡ç†é€ æˆäº†æ·±è¿œçš„å½±å“ã€‚ç‰¹åˆ«åœ°ï¼ŒVM ç®€åŒ–äº†é“¾æ¥å’ŒåŠ è½½ã€ä»£ç å’Œæ•°æ®å…±äº«ï¼Œä»¥åŠåº”ç”¨ç¨‹åºçš„å†…å­˜åˆ†é…ã€‚ ç®€åŒ–é“¾æ¥ã€‚ç‹¬ç«‹çš„åœ°å€ç©ºé—´å…è®¸æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜æ˜ åƒä½¿ç”¨ç›¸åŒçš„åŸºæœ¬æ ¼å¼ï¼Œè€Œä¸ç®¡ä»£ç å’Œæ•°æ®å®é™…å­˜æ”¾åœ¨ç‰©ç†å†…å­˜çš„ä½•å¤„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç»™å®šçš„ Linux ç³»ç»Ÿä¸Šçš„æ¯ä¸ªè¿›ç¨‹éƒ½ä½¿ç”¨ç±»ä¼¼çš„å†…å­˜æ ¼å¼ã€‚å¯¹äº 64 ä½åœ°å€ç©ºé—´ï¼Œä»£ç æ®µæ€»æ˜¯ä»è™šæ‹Ÿåœ°å€ 0x400000 å¼€å§‹ã€‚æ•°æ®æ®µè·Ÿåœ¨ä»£ç æ®µä¹‹åï¼Œä¸­é—´æœ‰ä¸€æ®µç¬¦åˆè¦æ±‚çš„å¯¹é½ç©ºç™½ã€‚æ ˆå æ®ç”¨æˆ·è¿›ç¨‹åœ°å€ç©ºé—´æœ€é«˜çš„éƒ¨åˆ†ï¼Œå¹¶å‘ä¸‹ç”Ÿé•¿ã€‚è¿™æ ·çš„ä¸€è‡´æ€§æå¤§åœ°ç®€åŒ–äº†é“¾æ¥å™¨çš„è®¾è®¡å’Œå®ç°ï¼Œå…è®¸é“¾æ¥å™¨ç”Ÿæˆå®Œå…¨é“¾æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™äº›å¯æ‰§è¡Œæ–‡ä»¶æ˜¯ç‹¬ç«‹äºç‰©ç†å†…å­˜ä¸­ä»£ç å’Œæ•°æ®çš„æœ€ç»ˆä½ç½®çš„ã€‚ ç®€åŒ–åŠ è½½ã€‚è™šæ‹Ÿå†…å­˜è¿˜ä½¿å¾—å®¹æ˜“å‘å†…å­˜ä¸­åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«å¯¹è±¡æ–‡ä»¶ã€‚è¦æŠŠç›®æ ‡æ–‡ä»¶ä¸­ .text å’Œ .data èŠ‚åŠ è½½åˆ°ä¸€ä¸ªæ–°åˆ›å»ºçš„è¿›ç¨‹ä¸­ï¼ŒLinux åŠ è½½å™¨ä¸ºä»£ç å’Œæ•°æ®æ®µåˆ†é…è™šæ‹Ÿé¡µï¼ŒæŠŠå®ƒä»¬æ ‡è®°ä¸ºæ— æ•ˆçš„ï¼ˆå³æœªè¢«ç¼“å­˜çš„ï¼‰ï¼Œå°†é¡µè¡¨æ¡ç›®æŒ‡å‘ç›®æ ‡æ–‡ä»¶ä¸­é€‚å½“çš„ä½ç½®ã€‚æœ‰è¶£çš„æ˜¯ï¼ŒåŠ è½½å™¨ä»ä¸ä»ç£ç›˜åˆ°å†…å­˜å®é™…å¤åˆ¶ä»»ä½•æ•°æ®ã€‚åœ¨æ¯ä¸ªé¡µåˆæ¬¡è¢«å¼•ç”¨æ—¶ï¼Œè¦ä¹ˆæ˜¯ CPU å–æŒ‡ä»¤æ—¶å¼•ç”¨çš„ï¼Œè¦ä¹ˆæ˜¯ä¸€æ¡æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤å¼•ç”¨ä¸€ä¸ªå†…å­˜ä½ç½®æ—¶å¼•ç”¨çš„ï¼Œè™šæ‹Ÿå†…å­˜ç³»ç»Ÿä¼šæŒ‰ç…§éœ€è¦è‡ªåŠ¨åœ°è°ƒå…¥æ•°æ®é¡µã€‚å°†ä¸€ç»„è¿ç»­çš„è™šæ‹Ÿé¡µæ˜ å°„åˆ°ä»»æ„ä¸€ä¸ªæ–‡ä»¶ä¸­çš„ä»»æ„ä½ç½®çš„è¡¨ç¤ºæ³•ç§°ä½œå†…å­˜æ˜ å°„ï¼ˆmemory mappingï¼‰ã€‚Linux æä¾›ä¸€ä¸ªç§°ä¸º mmap çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå…è®¸åº”ç”¨ç¨‹åºè‡ªå·±åšå†…å­˜æ˜ å°„ã€‚ ç®€åŒ–å…±äº«ã€‚ç‹¬ç«‹åœ°å€ç©ºé—´ä¸ºæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç®¡ç†ç”¨æˆ·è¿›ç¨‹å’Œæ“ä½œç³»ç»Ÿè‡ªèº«ä¹‹é—´å…±äº«çš„ä¸€è‡´æœºåˆ¶ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç§æœ‰çš„ä»£ç ã€æ•°æ®ã€å †ä»¥åŠæ ˆåŒºåŸŸï¼Œæ˜¯ä¸å’Œå…¶ä»–è¿›ç¨‹å…±äº«çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸­ï¼Œæ“ä½œç³»ç»Ÿåˆ›å»ºé¡µè¡¨ï¼Œå°†ç›¸åº”çš„è™šæ‹Ÿé¡µæ˜ å°„åˆ°ä¸è¿ç»­çš„ç‰©ç†é¡µé¢ã€‚ ç®€åŒ–å†…å­˜åˆ†é…ã€‚è™šæ‹Ÿå†…å­˜ä¸ºå‘ç”¨æˆ·è¿›ç¨‹æä¾›ä¸€ä¸ªç®€å•çš„åˆ†é…é¢å¤–å†…å­˜çš„æœºåˆ¶ã€‚å½“ä¸€ä¸ªè¿è¡Œåœ¨ç”¨æˆ·è¿›ç¨‹ä¸­çš„ç¨‹åºè¦æ±‚é¢å¤–çš„å †ç©ºé—´æ—¶ï¼ˆå¦‚è°ƒç”¨ malloc çš„ç»“æœï¼‰ï¼Œæ“ä½œç³»ç»Ÿåˆ†é…ä¸€ä¸ªé€‚å½“æ•°å­—ï¼ˆä¾‹å¦‚ kï¼‰ä¸ªè¿ç»­çš„è™šæ‹Ÿå†…å­˜é¡µé¢ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸­ä»»æ„ä½ç½®çš„ k ä¸ªä»»æ„çš„ç‰©ç†é¡µé¢ã€‚ç”±äºé¡µè¡¨å·¥ä½œçš„æ–¹å¼ï¼Œæ“ä½œç³»ç»Ÿæ²¡æœ‰å¿…è¦åˆ†é… k ä¸ªè¿ç»­çš„ç‰©ç†å†…å­˜é¡µé¢ã€‚é¡µé¢å¯ä»¥éšæœºåœ°åˆ†æ•£åœ¨ç‰©ç†å†…å­˜ä¸­ã€‚ è™šæ‹Ÿå†…å­˜ä½œä¸ºå†…å­˜ä¿æŠ¤çš„å·¥å…·æ“ä½œç³»ç»Ÿä¸­çš„ç”¨æˆ·ç¨‹åºä¸åº”è¯¥ä¿®æ”¹åªè¯»çš„ä»£ç æ®µï¼Œä¹Ÿä¸åº”è¯¥è¯»å–æˆ–è€…ä¿®æ”¹å†…æ ¸ä¸­çš„ä»£ç å’Œæ•°æ®ç»“æ„æˆ–è€…è®¿é—®ç§æœ‰çš„ä»¥åŠå…¶ä»–çš„è¿›ç¨‹çš„å†…å­˜ï¼Œå¦‚æœæ— æ³•å¯¹ç”¨æˆ·è¿›ç¨‹çš„å†…å­˜è®¿é—®è¿›è¡Œé™åˆ¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥è®¿é—®å’Œä¿®æ”¹å…¶ä»–è¿›ç¨‹çš„å†…å­˜å½±å“ç³»ç»Ÿçš„å®‰å…¨ã€‚ é€šè¿‡åœ¨é¡µè¡¨ä¸­æ·»åŠ é¡µé¢çš„ä¿æŠ¤å±æ€§ï¼Œå¯ä»¥è®©æ“ä½œç³»ç»Ÿåœ¨é¡µé¢è¢«è®¿é—®æ—¶è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœé¡µé¢è¢«ä¿æŠ¤ä¸ºåªè¯»ï¼Œåˆ™æ“ä½œç³»ç»Ÿä¼šæŠ¥é”™ã€‚ åœ¨å›¾ 9-10 è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ª PTE ä¸­å·²ç»æ·»åŠ äº†ä¸‰ä¸ªè®¸å¯ä½ã€‚SUP ä½è¡¨ç¤ºè¿›ç¨‹æ˜¯å¦å¿…é¡»è¿è¡Œåœ¨å†…æ ¸ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰æ¨¡å¼ä¸‹æ‰èƒ½è®¿é—®è¯¥é¡µã€‚è¿è¡Œåœ¨å†…æ ¸æ¨¡å¼ä¸­çš„è¿›ç¨‹å¯ä»¥è®¿é—®ä»»ä½•é¡µé¢ï¼Œä½†æ˜¯è¿è¡Œåœ¨ç”¨æˆ·æ¨¡å¼ä¸­çš„è¿›ç¨‹åªå…è®¸è®¿é—®é‚£äº› SUP ä¸º 0 çš„é¡µé¢ã€‚READ ä½å’Œ WRITE ä½æ§åˆ¶å¯¹é¡µé¢çš„è¯»å’Œå†™è®¿é—®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¿›ç¨‹ i è¿è¡Œåœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œé‚£ä¹ˆå®ƒæœ‰è¯» VP 0 å’Œè¯»å†™ VP 1 çš„æƒé™ã€‚ç„¶è€Œï¼Œä¸å…è®¸å®ƒè®¿é—® VP 2ã€‚ å¦‚æœä¸€æ¡æŒ‡ä»¤è¿åäº†è¿™äº›è®¸å¯æ¡ä»¶ï¼Œé‚£ä¹ˆ CPU å°±è§¦å‘ä¸€ä¸ªä¸€èˆ¬ä¿æŠ¤æ•…éšœï¼Œå°†æ§åˆ¶ä¼ é€’ç»™ä¸€ä¸ªå†…æ ¸ä¸­çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚Linux shell ä¸€èˆ¬å°†è¿™ç§å¼‚å¸¸æŠ¥å‘Šä¸ºæ®µé”™è¯¯ï¼ˆsegmentation faultï¼‰ã€‚ åœ°å€ç¿»è¯‘åŸºæœ¬å‚æ•° ç¬¦å· æè¿° $$\\small N=2^n$$ è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„åœ°å€æ•°é‡ $$\\small M=2^m$$ ç‰©ç†åœ°å€ç©ºé—´ä¸­çš„åœ°å€æ•°é‡ $$\\small P=2^p$$ é¡µçš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰ è™šæ‹Ÿåœ°å€ï¼ˆVAï¼‰çš„ç»„æˆéƒ¨åˆ† ç¬¦å· æè¿° VPO è™šæ‹Ÿé¡µé¢åç§»é‡ï¼ˆå­—èŠ‚ï¼‰ VPN è™šæ‹Ÿé¡µå· TLBI TLB ç´¢å¼• TLBT TLB æ ‡è®° ç‰©ç†åœ°å€ï¼ˆPAï¼‰çš„ç»„æˆéƒ¨åˆ† ç¬¦å· æè¿° PPO ç‰©ç†é¡µé¢åç§»é‡ï¼ˆå­—èŠ‚ï¼‰ PPN ç‰©ç†é¡µå· CO ç¼“å†²å—å†…çš„å­—èŠ‚åç§»é‡ CI é«˜é€Ÿç¼“å­˜ç´¢å¼• CT é«˜é€Ÿç¼“å­˜æ ‡è®° å›¾ 9-12 å±•ç¤ºäº† MMU å¦‚ä½•åˆ©ç”¨é¡µè¡¨æ¥å®ç°åœ°å€ç¿»è¯‘ã€‚CPU ä¸­çš„ä¸€ä¸ªæ§åˆ¶å¯„å­˜å™¨ï¼Œé¡µè¡¨åŸºå€å¯„å­˜å™¨ï¼ˆPage Table Base Registerï¼ŒPTBRï¼‰æŒ‡å‘å½“å‰é¡µè¡¨ã€‚$n$ ä½çš„è™šæ‹Ÿåœ°å€åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ª $p$ ä½çš„è™šæ‹Ÿé¡µé¢åç§»ï¼ˆVirtual Page Offsetï¼ŒVPOï¼‰å’Œä¸€ä¸ª$\\small (n-p)$ä½çš„è™šæ‹Ÿé¡µå·ï¼ˆVirtual Page Numberï¼ŒVPNï¼‰ã€‚MMU åˆ©ç”¨ VPN æ¥é€‰æ‹©é€‚å½“çš„ PTEã€‚ä¾‹å¦‚ï¼ŒVPN 0 é€‰æ‹© PTE 0ï¼ŒVPN 1 é€‰æ‹© PTE 1ï¼Œä»¥æ­¤ç±»æ¨ã€‚å°†é¡µè¡¨æ¡ç›®ä¸­ç‰©ç†é¡µå·ï¼ˆPhysical Page Numberï¼ŒPPNï¼‰å’Œè™šæ‹Ÿåœ°å€ä¸­çš„ VPã€‚ä¸²è”èµ·æ¥ï¼Œå°±å¾—åˆ°ç›¸åº”çš„ç‰©ç†åœ°å€ã€‚æ³¨æ„ï¼Œå› ä¸ºç‰©ç†å’Œè™šæ‹Ÿé¡µé¢éƒ½æ˜¯ P å­—èŠ‚çš„ï¼Œæ‰€ä»¥ç‰©ç†é¡µé¢åç§»ï¼ˆPhysical Page Offsetï¼ŒPPOï¼‰å’Œ VPO æ˜¯ç›¸åŒçš„ã€‚ å›¾ 9-13a å±•ç¤ºäº†å½“é¡µé¢å‘½ä¸­æ—¶ï¼ŒCPU ç¡¬ä»¶æ‰§è¡Œçš„æ­¥éª¤ã€‚ ç¬¬ 1 æ­¥ï¼šå¤„ç†å™¨ç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ é€ç»™ MMUã€‚ ç¬¬ 2 æ­¥ï¼šMMU ç”Ÿæˆ PTE åœ°å€ï¼Œå¹¶ä»é«˜é€Ÿç¼“å­˜/ä¸»å­˜è¯·æ±‚å¾—åˆ°å®ƒã€‚ ç¬¬ 3 æ­¥ï¼šé«˜é€Ÿç¼“å­˜/ä¸»å­˜å‘ MMU è¿”å› PTEã€‚ ç¬¬ 4 æ­¥ï¼šMMU æ„é€ ç‰©ç†åœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ é€ç»™é«˜é€Ÿç¼“å­˜/ä¸»å­˜ã€‚ ç¬¬ 5 æ­¥ï¼šé«˜é€Ÿç¼“å­˜/ä¸»å­˜è¿”å›æ‰€è¯·æ±‚çš„æ•°æ®å­—ç»™å¤„ç†å™¨ã€‚ é¡µé¢å‘½ä¸­å®Œå…¨æ˜¯ç”±ç¡¬ä»¶æ¥å¤„ç†çš„ï¼Œä¸ä¹‹ä¸åŒçš„æ˜¯ï¼Œå¤„ç†ç¼ºé¡µè¦æ±‚ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿå†…æ ¸åä½œå®Œæˆï¼Œå¦‚å›¾ 9-13b æ‰€ç¤ºã€‚ ç¬¬ 1 - 3 æ­¥ï¼šå’Œå›¾ 9-13a ä¸­çš„ç¬¬ 1 æ­¥åˆ°ç¬¬ 3 æ­¥ç›¸åŒã€‚ ç¬¬ 4 æ­¥ï¼šPTE ä¸­çš„æœ‰æ•ˆä½æ˜¯é›¶ï¼Œæ‰€ä»¥ MMU è§¦å‘äº†ä¸€æ¬¡å¼‚å¸¸ï¼Œä¼ é€’ CPU ä¸­çš„æ§åˆ¶åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºã€‚ ç¬¬ 5 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºç¡®å®šå‡ºç‰©ç†å†…å­˜ä¸­çš„ç‰ºç‰²é¡µï¼Œå¦‚æœè¿™ä¸ªé¡µé¢å·²ç»è¢«ä¿®æ”¹äº†ï¼Œåˆ™æŠŠå®ƒæ¢å‡ºåˆ°ç£ç›˜ã€‚ ç¬¬ 6 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºé¡µé¢è°ƒå…¥æ–°çš„é¡µé¢ï¼Œå¹¶æ›´æ–°å†…å­˜ä¸­çš„ PTEã€‚ ç¬¬ 7 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºè¿”å›åˆ°åŸæ¥çš„è¿›ç¨‹ï¼Œå†æ¬¡æ‰§è¡Œå¯¼è‡´ç¼ºé¡µçš„æŒ‡ä»¤ã€‚CPU å°†å¼•èµ·ç¼ºé¡µçš„è™šæ‹Ÿåœ°å€é‡æ–°å‘é€ç»™ MMUã€‚å› ä¸ºè™šæ‹Ÿé¡µé¢ç°åœ¨ç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œæ‰€ä»¥å°±ä¼šå‘½ä¸­ï¼Œåœ¨ MMU æ‰§è¡Œäº†å›¾ 9-13b ä¸­çš„æ­¥éª¤ä¹‹åï¼Œä¸»å­˜å°±ä¼šå°†æ‰€è¯·æ±‚å­—è¿”å›ç»™å¤„ç†å™¨ã€‚ åˆ©ç”¨ TLB åŠ é€Ÿåœ°å€ç¿»è¯‘æ¯æ¬¡ CPU è®¿é—®ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼ŒMMU å°±å¿…é¡»æŸ¥æ‰¾ PTEï¼Œä»¥ä¾¿å°†è™šæ‹Ÿåœ°å€ç¿»è¯‘ä¸ºç‰©ç†åœ°å€ã€‚åœ¨æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œè¿™ä¼šè¦æ±‚ä»å†…å­˜å¤šå–ä¸€æ¬¡æ•°æ®ï¼Œä»£ä»·æ˜¯å‡ ååˆ°å‡ ç™¾ä¸ªå‘¨æœŸã€‚å¦‚æœ PTE ç¢°å·§ç¼“å­˜åœ¨ L1 ä¸­ï¼Œé‚£ä¹ˆå¼€é”€å°±ä¸‹é™åˆ° 1 ä¸ªæˆ– 2 ä¸ªå‘¨æœŸã€‚ä¸ºäº†æ¶ˆé™¤è¿™æ ·çš„å¼€é”€ï¼Œåœ¨ MMU ä¸­åŒ…æ‹¬äº†ä¸€ä¸ªå…³äº PTE çš„å°çš„ç¼“å­˜ï¼Œç§°ä¸ºç¿»è¯‘åå¤‡ç¼“å†²å™¨ï¼ˆTranslation Lookaside Bufferï¼ŒTLBï¼‰ã€‚ TLB æ˜¯ä¸€ä¸ªå°çš„ã€è™šæ‹Ÿå¯»å€çš„ç¼“å­˜ï¼Œå…¶ä¸­æ¯ä¸€è¡Œéƒ½ä¿å­˜ç€ä¸€ä¸ªç”±å•ä¸ª PTE ç»„æˆçš„å—ã€‚TLB é€šå¸¸æœ‰é«˜åº¦çš„ç›¸è”åº¦ã€‚å¦‚å›¾ 9-15 æ‰€ç¤ºï¼Œç”¨äºç»„é€‰æ‹©å’Œè¡ŒåŒ¹é…çš„ç´¢å¼•å’Œæ ‡è®°å­—æ®µæ˜¯ä»è™šæ‹Ÿåœ°å€ä¸­çš„è™šæ‹Ÿé¡µå·ä¸­æå–å‡ºæ¥çš„ã€‚å¦‚æœ TLB æœ‰$\\small T = 2^t$ä¸ªç»„ï¼Œé‚£ä¹ˆ TLB ç´¢å¼•ï¼ˆTLBIï¼‰æ˜¯ç”± VPN çš„ $t$ ä¸ªæœ€ä½ä½ç»„æˆçš„ï¼Œè€Œ TLB æ ‡è®°ï¼ˆTLBTï¼‰æ˜¯ç”± VPN ä¸­å‰©ä½™çš„ä½ç»„æˆçš„ã€‚ å›¾ 9-16a å±•ç¤ºäº†å½“ TLB å‘½ä¸­æ—¶ï¼ˆé€šå¸¸æƒ…å†µï¼‰æ‰€åŒ…æ‹¬çš„æ­¥éª¤ã€‚è¿™é‡Œçš„å…³é”®ç‚¹æ˜¯ï¼Œæ‰€æœ‰çš„åœ°å€ç¿»è¯‘æ­¥éª¤éƒ½æ˜¯åœ¨èŠ¯ç‰‡ä¸Šçš„ MMU ä¸­æ‰§è¡Œçš„ï¼Œå› æ­¤éå¸¸å¿«ã€‚ ç¬¬ 1 æ­¥ï¼šCPU äº§ç”Ÿä¸€ä¸ªè™šæ‹Ÿåœ°å€ã€‚ ç¬¬ 2 - 3 æ­¥ï¼šMMU ä» TLB ä¸­å–å‡ºç›¸åº”çš„ PTEã€‚ ç¬¬ 4 æ­¥ï¼šMMU å°†è¿™ä¸ªè™šæ‹Ÿåœ°å€ç¿»è¯‘æˆä¸€ä¸ªç‰©ç†åœ°å€ï¼Œå¹¶ä¸”å°†å®ƒå‘é€åˆ°é«˜é€Ÿç¼“å­˜/ä¸»å­˜ã€‚ ç¬¬ 5 æ­¥ï¼šé«˜é€Ÿç¼“å­˜/ä¸»å­˜å°†æ‰€è¯·æ±‚çš„æ•°æ®å­—è¿”å›ç»™ CPUã€‚ å½“ TLB ä¸å‘½ä¸­æ—¶ï¼ŒMMU å¿…é¡»ä» L1 ç¼“å­˜ä¸­å–å‡ºç›¸åº”çš„ PTEï¼Œå¦‚å›¾ 9-16b æ‰€ç¤ºã€‚æ–°å–å‡ºçš„ PTE å­˜æ”¾åœ¨ TLB ä¸­ï¼Œå¯èƒ½ä¼šè¦†ç›–ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ¡ç›®ã€‚ å¤šçº§é¡µè¡¨32 ä½ç¯å¢ƒä¸‹ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´å…± 4GBã€‚å¦‚æœåˆ†æˆ 4KB ä¸€ä¸ªé¡µï¼Œé‚£å°±æ˜¯ 1M ä¸ªé¡µã€‚æ¯ä¸ªé¡µè¡¨é¡¹éœ€è¦ 4 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œé‚£ä¹ˆæ•´ä¸ª 4GB ç©ºé—´çš„æ˜ å°„å°±éœ€è¦ 4MB çš„å†…å­˜æ¥å­˜å‚¨æ˜ å°„è¡¨ã€‚å¦‚æœæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„æ˜ å°„è¡¨ï¼Œ100 ä¸ªè¿›ç¨‹å°±éœ€è¦ 400MB çš„å†…å­˜ã€‚å¯¹äºå†…æ ¸æ¥è®²ï¼Œæœ‰ç‚¹å¤§äº†ã€‚ é¡µè¡¨ä¸­æ‰€æœ‰é¡µè¡¨é¡¹å¿…é¡»æå‰å»ºå¥½ï¼Œå¹¶ä¸”è¦æ±‚æ˜¯è¿ç»­çš„ã€‚å¦‚æœä¸è¿ç»­ï¼Œå°±æ²¡æœ‰åŠæ³•é€šè¿‡è™šæ‹Ÿåœ°å€é‡Œé¢çš„é¡µå·æ‰¾åˆ°å¯¹åº”çš„é¡µè¡¨é¡¹äº†ã€‚ é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¯•ç€å°†é¡µè¡¨å†åˆ†é¡µï¼Œ4G çš„ç©ºé—´éœ€è¦ 4M çš„é¡µè¡¨æ¥å­˜å‚¨æ˜ å°„ã€‚æˆ‘ä»¬æŠŠè¿™ 4M åˆ†æˆ 1Kï¼ˆ1024ï¼‰ä¸ª 4Kï¼Œæ¯ä¸ª 4K åˆèƒ½æ”¾åœ¨ä¸€é¡µé‡Œé¢ï¼Œè¿™æ · 1K ä¸ª 4K å°±æ˜¯ 1K ä¸ªé¡µï¼Œè¿™ 1K ä¸ªé¡µä¹Ÿéœ€è¦ä¸€ä¸ªè¡¨è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬ç§°ä¸ºé¡µç›®å½•è¡¨ï¼Œè¿™ä¸ªé¡µç›®å½•è¡¨é‡Œé¢æœ‰ 1K é¡¹ï¼Œæ¯é¡¹ 4 ä¸ªå­—èŠ‚ï¼Œé¡µç›®å½•è¡¨å¤§å°ä¹Ÿæ˜¯ 4Kã€‚ é¡µç›®å½•æœ‰ 1K é¡¹ï¼Œç”¨ 10 ä½å°±å¯ä»¥è¡¨ç¤ºè®¿é—®é¡µç›®å½•çš„å“ªä¸€é¡¹ã€‚è¿™ä¸€é¡¹å…¶å®å¯¹åº”çš„æ˜¯ä¸€æ•´é¡µçš„é¡µè¡¨é¡¹ï¼Œä¹Ÿå³ 4K çš„é¡µè¡¨é¡¹ã€‚æ¯ä¸ªé¡µè¡¨é¡¹ä¹Ÿæ˜¯ 4 ä¸ªå­—èŠ‚ï¼Œå› è€Œä¸€æ•´é¡µçš„é¡µè¡¨é¡¹æ˜¯ 1K ä¸ªã€‚å†ç”¨ 10 ä½å°±å¯ä»¥è¡¨ç¤ºè®¿é—®é¡µè¡¨é¡¹çš„å“ªä¸€é¡¹ï¼Œé¡µè¡¨é¡¹ä¸­çš„ä¸€é¡¹å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªé¡µï¼Œæ˜¯å­˜æ”¾æ•°æ®çš„é¡µï¼Œè¿™ä¸ªé¡µçš„å¤§å°æ˜¯ 4Kï¼Œç”¨ 12 ä½å¯ä»¥å®šä½è¿™ä¸ªé¡µå†…çš„ä»»ä½•ä¸€ä¸ªä½ç½®ã€‚ è¿™æ ·åŠ èµ·æ¥æ­£å¥½ 32 ä½ï¼Œä¹Ÿå°±æ˜¯ç”¨å‰ 10 ä½å®šä½åˆ°é¡µç›®å½•è¡¨ä¸­çš„ä¸€é¡¹ã€‚å°†è¿™ä¸€é¡¹å¯¹åº”çš„é¡µè¡¨å–å‡ºæ¥å…± 1k é¡¹ï¼Œå†ç”¨ä¸­é—´ 10 ä½å®šä½åˆ°é¡µè¡¨ä¸­çš„ä¸€é¡¹ï¼Œå°†è¿™ä¸€é¡¹å¯¹åº”çš„å­˜æ”¾æ•°æ®çš„é¡µå–å‡ºæ¥ï¼Œå†ç”¨æœ€å 12 ä½å®šä½åˆ°é¡µä¸­çš„å…·ä½“ä½ç½®è®¿é—®æ•°æ®ã€‚ ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œæ˜ å°„ 4GB åœ°å€ç©ºé—´å°±éœ€è¦ 4MB+4KB çš„å†…å­˜ï¼Œè¿™æ ·ä¸æ˜¯æ›´å¤§ äº†å—ï¼Ÿå½“ç„¶å¦‚æœé¡µæ˜¯æ»¡çš„ï¼Œå½“æ—¶æ˜¯æ›´å¤§äº†ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¾€å¾€ä¸ä¼šä¸ºä¸€ä¸ªè¿›ç¨‹åˆ†é…é‚£ä¹ˆå¤šå†… å­˜ã€‚æ¯”å¦‚è¯´ï¼Œä¸Šé¢å›¾ä¸­ï¼Œæˆ‘ä»¬å‡è®¾åªç»™è¿™ä¸ªè¿›ç¨‹åˆ†é…äº†ä¸€ä¸ªæ•°æ®é¡µã€‚å¦‚æœåªä½¿ç”¨é¡µè¡¨ï¼Œä¹Ÿéœ€è¦å®Œ æ•´çš„ 1M ä¸ªé¡µè¡¨é¡¹å…± 4M çš„å†…å­˜ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº†é¡µç›®å½•ï¼Œé¡µç›®å½•éœ€è¦ 1K ä¸ªå…¨éƒ¨åˆ†é…ï¼Œå ç”¨å†…å­˜ 4Kï¼Œä½†æ˜¯é‡Œé¢åªæœ‰ä¸€é¡¹ä½¿ç”¨äº†ã€‚åˆ°äº†é¡µè¡¨é¡¹ï¼Œåªéœ€è¦åˆ†é…èƒ½å¤Ÿç®¡ç†é‚£ä¸ªæ•°æ®é¡µçš„é¡µè¡¨é¡¹é¡µå°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤š 4Kï¼Œè¿™æ ·å†…å­˜å°±èŠ‚çœå¤šäº† å½“ç„¶å¯¹äº 64 ä½çš„ç³»ç»Ÿï¼Œä¸¤çº§è‚¯å®šä¸å¤Ÿäº†ï¼Œå°±å˜æˆäº†å››çº§ç›®å½•ï¼Œåˆ†åˆ«æ˜¯å…¨å±€é¡µç›®å½•é¡¹ PGDï¼ˆPage Global Directoryï¼‰ã€ä¸Šå±‚é¡µç›®å½•é¡¹ PUDï¼ˆPage Upper Directoryï¼‰ã€ä¸­é—´é¡µç›®å½•é¡¹ PMDï¼ˆPage Middle Directoryï¼‰å’Œé¡µè¡¨é¡¹ PTEï¼ˆPage Table Entryï¼‰ã€‚ä¹Ÿå°±æ˜¯ä¸€çº§é¡µè¡¨ï¼ŒäºŒçº§é¡µè¡¨ï¼Œä¸‰çº§é¡µè¡¨ï¼Œå››çº§é¡µè¡¨ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Virtual Memory","slug":"Virtual-Memory","permalink":"http://example.com/tags/Virtual-Memory/"},{"name":"TLB","slug":"TLB","permalink":"http://example.com/tags/TLB/"},{"name":"å†…å­˜ç®¡ç†","slug":"å†…å­˜ç®¡ç†","permalink":"http://example.com/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"},{"name":"é¡µè¡¨","slug":"é¡µè¡¨","permalink":"http://example.com/tags/%E9%A1%B5%E8%A1%A8/"},{"name":"å¤šçº§é¡µè¡¨","slug":"å¤šçº§é¡µè¡¨","permalink":"http://example.com/tags/%E5%A4%9A%E7%BA%A7%E9%A1%B5%E8%A1%A8/"},{"name":"MMU","slug":"MMU","permalink":"http://example.com/tags/MMU/"}]},{"title":"C è¯­è¨€ getopt() å‡½æ•°çš„ç”¨æ³•","slug":"Cè¯­è¨€getopt-å‡½æ•°çš„ç”¨æ³•","date":"2022-07-16T14:42:03.000Z","updated":"2022-10-15T03:14:29.130Z","comments":true,"path":"2022/07/16/Cè¯­è¨€getopt-å‡½æ•°çš„ç”¨æ³•/","link":"","permalink":"http://example.com/2022/07/16/C%E8%AF%AD%E8%A8%80getopt-%E5%87%BD%E6%95%B0%E7%9A%84%E7%94%A8%E6%B3%95/","excerpt":"","text":"åœ¨åšCSAPP_LAB-Cache Labæ—¶ï¼Œå®éªŒè¦æ±‚å¯¹è¾“å…¥å‚æ•°è¿›è¡Œå¤„ç†ï¼Œå¦‚ç¨‹åºcsimæ‰§è¡Œéœ€è¦ 4 ä¸ªå‚æ•°ï¼š 1./csim -s 4 -E 6 -b 4 -t &lt;tracefile&gt; åŸå…ˆæƒ³é€šè¿‡å­—ç¬¦ä¸²è§£æï¼Œä¸€ä¸ªä¸ªå¤„ç†ï¼Œä½†æ˜¯çœ‹åˆ°äº†å…¶ä»–å‚è€ƒä»£ç åå‘ç°äº†ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡getopt()å‡½æ•°æ¥è§£æå‚æ•°ã€‚ å‡½æ•°çš„åŠŸèƒ½ï¼šè§£æå‘½ä»¤è¡Œå‚æ•°ã€‚å¤´æ–‡ä»¶ #include &lt;unistd.h&gt; åœ¨å­¦ä¹ å‡½æ•°å‰éœ€è¦äº†è§£ä¸è¯¥å‡½æ•°ç›¸å…³çš„å››ä¸ªå˜é‡ï¼š int opterrï¼šæ§åˆ¶æ˜¯å¦è¾“å‡ºé”™è¯¯ï¼›å¦‚æœæ­¤å˜é‡çš„å€¼éé›¶ï¼Œåˆ™ getopt åœ¨é‡åˆ°æœªçŸ¥é€‰é¡¹å­—ç¬¦æˆ–ç¼ºå°‘å¿…éœ€å‚æ•°çš„é€‰é¡¹æ—¶å°†é”™è¯¯æ¶ˆæ¯æ‰“å°åˆ°æ ‡å‡†é”™è¯¯æµ (ç»ˆç«¯)ã€‚è¯¥å€¼é»˜è®¤ä¸ºéé›¶ã€‚å¦‚æœå°†æ­¤å˜é‡è®¾ç½®ä¸ºé›¶ï¼Œgetopt ä¸ä¼šæ‰“å°ä»»ä½•æ¶ˆæ¯ï¼Œä½†ä»ä¼šè¿”å›é—®å·?æç¤ºé”™è¯¯ã€‚ int optoptï¼šä¿å­˜æœªçŸ¥çš„é€‰é¡¹ï¼›å½“ getopt é‡åˆ°æœªçŸ¥é€‰é¡¹å­—ç¬¦æˆ–ç¼ºå°‘å¿…éœ€å‚æ•°çš„é€‰é¡¹æ—¶ï¼Œå®ƒå°†è¯¥é€‰é¡¹å­—ç¬¦å­˜å‚¨åœ¨æ­¤å˜é‡ä¸­ã€‚ int optindï¼šæŒ‡å‘ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„å‚æ•°ï¼›æ­¤å˜é‡ç”± getopt è®¾ç½®ä¸ºè¦å¤„ç†çš„ argv æ•°ç»„çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚ä¸€æ—¦ getopt æ‰¾åˆ°æ‰€æœ‰é€‰é¡¹å‚æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨æ­¤å˜é‡æ¥ç¡®å®šå…¶ä½™éé€‰é¡¹å‚æ•°çš„å¼€å§‹ä½ç½®ã€‚è¯¥å˜é‡çš„åˆå§‹å€¼ä¸º 1ã€‚ char * optargï¼šä¿å­˜é€‰é¡¹å‚æ•°ï¼›å¯¹äºé‚£äº›æ¥å—å‚æ•°çš„é€‰é¡¹ï¼Œæ­¤å˜é‡ç”± getopt è®¾ç½®ä¸ºæŒ‡å‘é€‰é¡¹å‚æ•°çš„å€¼ã€‚ å‡½æ•°åŸå‹ï¼š 1int getopt(int argc, char * const argv[], const char * options); å‚æ•°è§£æï¼š å‚æ•°argc å’Œargv æ˜¯ç”±main()ä¼ é€’çš„å‚æ•°ä¸ªæ•°å’Œå†…å®¹ã€‚ options å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒæŒ‡å®šå¯¹è¯¥ç¨‹åºæœ‰æ•ˆçš„é€‰é¡¹å­—ç¬¦ã€‚æ­¤å­—ç¬¦ä¸²ä¸­çš„é€‰é¡¹å­—ç¬¦åé¢å¯ä»¥è·Ÿä¸€ä¸ªå†’å·ï¼ˆ:ï¼‰ï¼Œè¡¨ç¤ºå®ƒéœ€è¦ä¸€ä¸ªå¿…éœ€çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥ä¸é€‰é¡¹è¿å†™ä¹Ÿå¯ä»¥ç©ºæ ¼åˆ†å¼€ï¼Œå¦‚-a13 or -a 13ã€‚å¦‚æœé€‰é¡¹å­—ç¬¦åè·Ÿä¸¤ä¸ªå†’å·ï¼ˆ::ï¼‰ï¼Œåˆ™å…¶å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæœ‰å‚æ•°ï¼Œé‚£ä¹ˆå‚æ•°ä¸èƒ½ä¸é€‰é¡¹åˆ†å‰²ï¼Œå¦‚åªèƒ½å†™æˆ-a13è€Œä¸èƒ½å†™æˆ-a 13ï¼›è¿™æ˜¯ä¸€ä¸ª GNU æ‰©å±•ã€‚ å®ä¾‹ï¼š ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†é€šå¸¸å¦‚ä½•ä½¿ç”¨ getoptã€‚éœ€è¦æ³¨æ„çš„å…³é”®ç‚¹æ˜¯ï¼š é€šå¸¸ï¼Œgetopt åœ¨å¾ªç¯ä¸­è¢«è°ƒç”¨ã€‚å½“ getopt è¿”å› -1 è¡¨ç¤ºæ²¡æœ‰æ›´å¤šé€‰é¡¹å­˜åœ¨æ—¶ï¼Œå¾ªç¯ç»ˆæ­¢ã€‚ switch è¯­å¥ç”¨äºè°ƒåº¦ getopt çš„è¿”å›å€¼ã€‚åœ¨å…¸å‹ä½¿ç”¨ä¸­ï¼Œæ¯ç§æƒ…å†µåªè®¾ç½®ä¸€ä¸ªç¨ååœ¨ç¨‹åºä¸­ä½¿ç”¨çš„å˜é‡ã€‚ ç¬¬äºŒä¸ªå¾ªç¯ç”¨äºå¤„ç†å‰©ä½™çš„éé€‰é¡¹å‚æ•°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;ctype.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;intmain (int argc, char **argv)&#123; int aflag = 0; int bflag = 0; char *cvalue = NULL; int index; int c; opterr = 0; while ((c = getopt (argc, argv, &quot;abc:&quot;)) != -1) switch (c) &#123; case &#x27;a&#x27;: aflag = 1; break; case &#x27;b&#x27;: bflag = 1; break; case &#x27;c&#x27;: cvalue = optarg; break; case &#x27;?&#x27;: if (optopt == &#x27;c&#x27;) fprintf (stderr, &quot;Option -%c requires an argument.\\n&quot;, optopt); else if (isprint (optopt)) fprintf (stderr, &quot;Unknown option `-%c&#x27;.\\n&quot;, optopt); else fprintf (stderr, &quot;Unknown option character `\\\\x%x&#x27;.\\n&quot;, optopt); return 1; default: abort (); &#125; printf (&quot;aflag = %d, bflag = %d, cvalue = %s\\n&quot;, aflag, bflag, cvalue); for (index = optind; index &lt; argc; index++) printf (&quot;Non-option argument %s\\n&quot;, argv[index]); return 0;&#125; ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼Œå±•ç¤ºäº†è¯¥ç¨‹åºä½¿ç”¨ä¸åŒçš„å‚æ•°ç»„åˆæ‰“å°çš„å†…å®¹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940% testoptaflag = 0, bflag = 0, cvalue = (null)// é€‰é¡¹å¯ä»¥ç”¨ç©ºæ ¼åˆ†å‰²% testopt -a -baflag = 1, bflag = 1, cvalue = (null)// ä¹Ÿå¯ä»¥è¿å†™% testopt -abaflag = 1, bflag = 1, cvalue = (null)// å¿…é€‰å‚æ•°ï¼Œå¯ä»¥ç”¨ç©ºæ ¼åˆ†å‰²% testopt -c fooaflag = 0, bflag = 0, cvalue = foo// å¿…é€‰å‚æ•°ï¼Œå¯ä»¥è¿å†™% testopt -cfooaflag = 0, bflag = 0, cvalue = foo// æ²¡æœ‰å¯¹åº”çš„é€‰é¡¹% testopt arg1aflag = 0, bflag = 0, cvalue = (null)Non-option argument arg1// -aé€‰é¡¹æ²¡æœ‰éœ€è¦å¤„ç†çš„å‚æ•°ï¼Œæ‰€ä»¥arg1æ— æ³•å¤„ç†% testopt -a arg1aflag = 1, bflag = 0, cvalue = (null)Non-option argument arg1% testopt -c foo arg1aflag = 0, bflag = 0, cvalue = fooNon-option argument arg1% testopt -a -- -baflag = 1, bflag = 0, cvalue = (null)Non-option argument -b% testopt -a -aflag = 1, bflag = 0, cvalue = (null)Non-option argument - å‚è€ƒèµ„æ–™åŸæ¥å‘½ä»¤è¡Œå‚æ•°å¤„ç†å¯ä»¥è¿™ä¹ˆå†™-getoptï¼Ÿ_huangxiaohu_coder çš„åšå®¢-CSDN åšå®¢Linux ä¸‹ getopt() å‡½æ•°çš„ç®€å•ä½¿ç”¨ - é’å„¿å“¥å“¥ - åšå®¢å›­Using Getopt (The GNU C Library)","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"è§£å†³ VS Code ç»ˆç«¯ä½¿ç”¨ git bash æ—¶ä¸­æ–‡ä¹±ç ","slug":"è§£å†³VS-Codeç»ˆç«¯ä½¿ç”¨git-bashæ—¶ä¸­æ–‡ä¹±ç ","date":"2022-07-16T13:59:50.000Z","updated":"2022-10-15T03:14:29.850Z","comments":true,"path":"2022/07/16/è§£å†³VS-Codeç»ˆç«¯ä½¿ç”¨git-bashæ—¶ä¸­æ–‡ä¹±ç /","link":"","permalink":"http://example.com/2022/07/16/%E8%A7%A3%E5%86%B3VS-Code%E7%BB%88%E7%AB%AF%E4%BD%BF%E7%94%A8git-bash%E6%97%B6%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/","excerpt":"","text":"ä¿ç•™ç°åœºWindows ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ VSCode çš„ç»ˆç«¯æ—¶ï¼Œä¸­æ–‡æ˜¾ç¤ºä¸ºä¹±ç ï¼Œå¦‚ä½¿ç”¨git statuså‘½ä»¤æŸ¥çœ‹ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œä¸­æ–‡æ–‡ä»¶åå°±æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼š æ¢ç©¶åŸå› å› ä¸ºç»ˆç«¯è¢«æ›¿æ¢æˆäº† git bashï¼Œå®ƒå¯¹æ‰€æœ‰éè‹±æ–‡çš„å­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰ã€‚ å®˜æ–¹æ–‡æ¡£æåˆ°ï¼š è¾“å‡ºè·¯å¾„çš„å‘½ä»¤ï¼ˆä¾‹å¦‚ls-filesã€diffï¼‰å°†é€šè¿‡å°†è·¯å¾„åæ‹¬åœ¨åŒå¼•å·ä¸­å¹¶ä»¥ä¸ C è½¬ä¹‰æ§åˆ¶å­—ç¬¦ç›¸åŒçš„æ–¹å¼ç”¨åæ–œæ è½¬ä¹‰è¿™äº›å­—ç¬¦æ¥å¼•ç”¨è·¯å¾„åä¸­çš„å¼‚å¸¸å­—ç¬¦ï¼ˆä¾‹å¦‚\\tç”¨äº TAB, \\n è¡¨ç¤ºLFï¼Œ\\\\è¡¨ç¤ºåæ–œæ ï¼‰æˆ–å€¼å¤§äº 0x80 çš„å­—èŠ‚ï¼ˆä¾‹å¦‚ï¼Œå…«è¿›åˆ¶ \\302\\265 è¡¨ç¤º UTF-8 ä¸­çš„â€œmicroâ€ï¼‰ã€‚å¦‚æœæ­¤å˜é‡è®¾ç½®ä¸º falseï¼Œåˆ™é«˜äº 0x80 çš„å­—èŠ‚ä¸å†è¢«è§†ä¸ºå¼‚å¸¸ã€‚æ— è®ºæ­¤å˜é‡çš„è®¾ç½®å¦‚ä½•ï¼ŒåŒå¼•å·ã€åæ–œæ å’Œæ§åˆ¶å­—ç¬¦æ€»æ˜¯è¢«è½¬ä¹‰ã€‚ä¸€ä¸ªç®€å•çš„ç©ºæ ¼å­—ç¬¦ä¸è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸çš„ã€‚è®¸å¤šå‘½ä»¤å¯ä»¥ä½¿ç”¨ -z é€‰é¡¹å®Œå…¨é€å­—è¾“å‡ºè·¯å¾„åã€‚é»˜è®¤å€¼æ˜¯ trueã€‚ è§£å†³æ–¹æ³•å‘½ä»¤è¡Œè¾“å…¥ï¼Œå–æ¶ˆè½¬ä¹‰ï¼š 1git config --global core.quotepath false","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"NOC(net-on-chip) æ€»çº¿äº’è”æ„æ¶","slug":"NOC-net-on-chip-æ€»çº¿äº’è”æ„æ¶","date":"2022-07-12T15:13:51.000Z","updated":"2022-10-15T03:14:29.367Z","comments":true,"path":"2022/07/12/NOC-net-on-chip-æ€»çº¿äº’è”æ„æ¶/","link":"","permalink":"http://example.com/2022/07/12/NOC-net-on-chip-%E6%80%BB%E7%BA%BF%E4%BA%92%E8%81%94%E6%9E%84%E6%9E%B6/","excerpt":"","text":"æŠ€æœ¯èƒŒæ™¯ è½¬è½½è‡ª^[ç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰æŠ€æœ¯çš„èƒŒæ™¯ã€æ„ä¹‰ä»¥åŠå‘å±•_ç¢ç¢æ€çš„åšå®¢-CSDN åšå®¢] åœ¨è¿‡å»çš„å‡ åå¹´é‡Œï¼Œé›†æˆç”µè·¯åˆ¶é€ å·¥è‰ºæŠ€æœ¯ã€å°è£…ä¸æµ‹è¯•æŠ€æœ¯ã€è®¾è®¡æ–¹æ³•å­¦å’Œ EDA å·¥å…·ç­‰å¾®ç”µå­ç›¸å…³æŠ€æœ¯å§‹ç»ˆä¿æŒç€å¿«é€Ÿçš„å‘å±•ã€‚æ ¹æ®å›½é™…åŠå¯¼ä½“æŠ€æœ¯å‘å±•è·¯çº¿å›¾ï¼ˆInternational Technology Roadmap for Semiconductors, ITRSï¼‰é¢„æµ‹ï¼Œåˆ° 2024 å¹´ IC åˆ¶é€ æŠ€æœ¯å°†è¾¾åˆ° 2 nmã€‚ä½†æ˜¯ï¼Œå…¨å±€äº’è¿çº¿çš„æ€§èƒ½æå‡ç¨‹åº¦æ˜æ˜¾ä½äºæ™¶ä½“ç®¡æ€§èƒ½æå‡ç¨‹åº¦ã€‚å—åˆ°äºšé˜ˆå€¼æ¼ç”µæµåŠŸè€—ã€åŠ¨æ€åŠŸè€—ã€å™¨ä»¶å¯é æ€§ä»¥åŠå…¨å±€äº’è¿çº¿ç­‰å½±å“ï¼Œé€šè¿‡æå‡å•ä¸ªå¤„ç†å™¨æ ¸çš„æ€§èƒ½æ¥æå‡ç³»ç»Ÿæ•´ä½“æ€§èƒ½å·²å˜å¾—éå¸¸éš¾ä»¥å®ç°ï¼ŒåŒæ—¶èŠ¯ç‰‡è®¾è®¡çš„éš¾åº¦å’Œå¤æ‚åº¦ä¹Ÿåœ¨è¿›ä¸€æ­¥å¢åŠ ã€‚ç‰‡ä¸Šç³»ç»Ÿï¼ˆSystem on Chip, SoCï¼‰å…·æœ‰é›†æˆåº¦é«˜ã€åŠŸè€—ä½ã€æˆæœ¬ä½ã€ä½“ç§¯å°ç­‰ä¼˜ç‚¹ï¼Œå·²ç»æˆä¸ºè¶…å¤§è§„æ¨¡é›†æˆç”µè·¯ç³»ç»Ÿè®¾è®¡çš„ä¸»æµæ–¹å‘ã€‚éšç€ç‰‡ä¸Šç³»ç»Ÿ SoC çš„åº”ç”¨éœ€æ±‚è¶Šæ¥è¶Šä¸°å¯Œã€è¶Šæ¥è¶Šå¤æ‚ï¼Œç‰‡ä¸Šå¤šæ ¸ MPSoC (MultiprocessorSystem on Chip, MPSoC) å·²ç»æˆä¸ºå‘å±•çš„å¿…ç„¶è¶‹åŠ¿ï¼ŒåŒæ—¶ MPSoC ä¸Šé›†æˆçš„ IP æ ¸æ•°é‡ä¹Ÿå°†ä¼šæŒ‰ç…§æ‘©å°”å®šå¾‹ç»§ç»­å‘å±•ã€‚ç›®å‰ï¼ŒMPSoC å·²ç»é€æ¸åº”ç”¨äºç½‘ç»œé€šä¿¡ã€å¤šåª’ä½“ç­‰åµŒå…¥å¼ç”µå­è®¾å¤‡ä¸­ã€‚åŠå¯¼ä½“å·¥è‰ºæŠ€æœ¯çš„å¿«é€Ÿå‘å±•ä¸ºé›†æˆç”µè·¯è®¾è®¡æä¾›äº†å¾ˆå¤§çš„å‘å±•ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€ç³»åˆ—æ–°çš„é—®é¢˜å’ŒæŒ‘æˆ˜ï¼Œå¦‚èŠ¯ç‰‡çš„æ€§èƒ½ã€åŠŸè€—ã€å¯é æ€§ã€å¯æ‰©å±•æ€§ç­‰ç­‰ã€‚ éšç€ç³»ç»Ÿæ€§èƒ½éœ€æ±‚è¶Šæ¥è¶Šé«˜ï¼Œå¤„ç†å™¨æ ¸ä¹‹é—´çš„äº’è¿æ¶æ„å¿…é¡»èƒ½å¤Ÿæä¾›å…·æœ‰è¾ƒä½å»¶è¿Ÿå’Œé«˜ååç‡çš„æœåŠ¡ï¼Œå¹¶ä¸”å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚ä¼ ç»Ÿçš„åŸºäºæ€»çº¿çš„é›†ä¸­å¼äº’è¿æ¶æ„å·²ç»éš¾ä»¥æ»¡è¶³ç°ä»Šç³»ç»Ÿçš„æ€§èƒ½éœ€æ±‚ï¼Œè€ŒåŸºäºæŠ¥æ–‡äº¤æ¢çš„ç‰‡ä¸Šç½‘ç»œï¼ˆNetwork on Chip, NoCï¼‰é€æ¸æˆä¸ºç‰‡ä¸Šå¤šæ ¸é—´é€šè®¯çš„é¦–é€‰äº’è¿æ¶æ„ã€‚åœ¨ NoC ä¸­ï¼Œè·¯ç”±èŠ‚ç‚¹ä¹‹é—´é€šè¿‡å±€éƒ¨äº’è¿çº¿ç›¸è¿æ¥ï¼Œæ¯ä¸€ä¸ªè·¯ç”±èŠ‚ç‚¹é€šè¿‡ç½‘ç»œæ¥å£ NI ä¸ä¸€ä¸ªæœ¬åœ° IP æ ¸ç›¸è¿æ¥ï¼Œæºè·¯ç”±èŠ‚ç‚¹å’Œç›®çš„è·¯ç”±èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®é€šè®¯éœ€è¦ç»è¿‡å¤šä¸ªè·³æ­¥æ¥å®ç°ã€‚å› æ­¤ï¼ŒNoC æŠ€æœ¯çš„å‡ºç°ä½¿å¾—ç‰‡ä¸Šç³»ç»Ÿ SoC çš„è®¾è®¡ä¹Ÿå°†ä»ä»¥è®¡ç®—ä¸ºä¸­å¿ƒé€æ¸è¿‡æ¸¡åˆ°ä»¥é€šè®¯ä¸ºä¸­å¿ƒã€‚ ä¼ ç»Ÿçš„ SoC ç³»ç»Ÿé‡‡ç”¨æ€»çº¿äº’è¿ç»“æ„ï¼Œå¦‚ æ‰€ç¤ºã€‚è™½ç„¶äººä»¬å·²ç»æå‡ºäº†å¾ˆå¤šæ”¹è¿›çš„æ€»çº¿ç»“æ„ï¼Œä¾‹å¦‚å°†å…±äº«æ€»çº¿æ”¹è¿›ä¸ºæ¡¥æ¥å¤šæ€»çº¿ç»“æ„ã€å±‚æ¬¡åŒ–æ€»çº¿ç»“æ„ç­‰æ›´å¤æ‚çš„ç»“æ„ã€‚ä½†æ˜¯å½“è¿›å…¥ MPSoC æ—¶ä»£ï¼Œå•èŠ¯ç‰‡ä¸Šé›†æˆçš„å¤„ç†å™¨æ ¸æ•°è¶Šæ¥è¶Šå¤šæ—¶ï¼Œæ€»çº¿ç»“æ„åœ¨é€šè®¯æ€§èƒ½ã€åŠŸè€—ã€å…¨å±€æ—¶é’ŸåŒæ­¥ã€ä¿¡å·å®Œæ•´æ€§ä»¥åŠä¿¡å·å¯é æ€§ç­‰æ–¹é¢é¢ä¸´ç€å·¨å¤§çš„æŒ‘æˆ˜ï¼Œè¿™äº›å¤æ‚çš„æ”¹è¿›å‹æ€»çº¿ç»“æ„ä»æ— æ³•è§£å†³ç‰‡ä¸Šå¤šæ ¸é—´é€šä¿¡æ‰€é¢ä¸´çš„é—®é¢˜ã€‚å› æ­¤ï¼ŒMPSoC ä¸Šå¤šæ ¸é—´çš„é€šè®¯é—®é¢˜å·²ç»æˆä¸ºåˆ¶çº¦ç³»ç»Ÿæ€§èƒ½æå‡çš„ä¸»è¦ç“¶é¢ˆã€‚ NoC çš„æ¦‚å¿µæ˜¯ç”± Agarwalï¼ˆ1999 å¹´ï¼‰ã€Guerrier å’Œ Greinerï¼ˆ2000 å¹´ï¼‰ã€Dally å’Œ Towlesï¼ˆ2001 å¹´ï¼‰ã€Benini å’Œ Micheliï¼ˆ2002 å¹´ï¼‰ã€Jantsch å’Œ Tenhunenï¼ˆ2003 å¹´ï¼‰ç­‰äººé€æ­¥æå‡ºçš„ã€‚ç›®å‰ï¼Œå¯¹äº NoC è¿˜æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å®šä¹‰ï¼Œå¤§å¤šæ•° NoC ç ”ç©¶è€…è®¤ä¸º NoC æ˜¯ SoC ç³»ç»Ÿçš„é€šè®¯å­é›†ï¼Œå¹¶ä¸”åº”è¯¥å¼•å…¥äº’è”ç½‘ç»œæŠ€æœ¯æ¥è§£å†³ç‰‡ä¸Šå¤šæ ¸çš„é€šè®¯é—®é¢˜ã€‚ NoC çš„æ„ä¹‰ è½¬è½½è‡ª^[ç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰æŠ€æœ¯çš„èƒŒæ™¯ã€æ„ä¹‰ä»¥åŠå‘å±•_ç¢ç¢æ€çš„åšå®¢-CSDN åšå®¢] éšç€å•èŠ¯ç‰‡ä¸Šé›†æˆçš„å¤„ç†å™¨æ ¸æ•°è¶Šæ¥è¶Šå¤šï¼Œç‰‡ä¸Šäº’è¿æ¶æ„ç»å†äº†ä»ä¸“ç”¨äº’è¿çº¿ï¼ŒBusï¼ŒCrossbar åˆ° NoCã€‚NoC å€Ÿé‰´äº†åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿçš„é€šè®¯æ–¹å¼ï¼Œé‡‡ç”¨æ•°æ®è·¯ç”±å’Œåˆ†ç»„äº¤æ¢æŠ€æœ¯æ›¿ä»£ä¼ ç»Ÿçš„æ€»çº¿ç»“æ„ï¼Œä»ä½“ç³»ç»“æ„ä¸Šè§£å†³äº† SoC æ€»çº¿ç»“æ„ç”±äºåœ°å€ç©ºé—´æœ‰é™å¯¼è‡´çš„å¯æ‰©å±•æ€§å·®ï¼Œåˆ†æ—¶é€šè®¯å¼•èµ·çš„é€šè®¯æ•ˆç‡ä½ä¸‹ï¼Œä»¥åŠå…¨å±€æ—¶é’ŸåŒæ­¥å¼•èµ·çš„åŠŸè€—å’Œé¢ç§¯ç­‰é—®é¢˜ã€‚ä¸ä¼ ç»Ÿçš„æ€»çº¿äº’è¿æŠ€æœ¯ç›¸æ¯”ï¼Œç‰‡ä¸Šç½‘ç»œå…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š ç¬¬ä¸€ï¼Œç½‘ç»œå¸¦å®½ã€‚æ€»çº¿ç»“æ„äº’è¿å¤šä¸ª IP æ ¸ï¼Œå…±äº«ä¸€æ¡æ•°æ®æ€»çº¿ï¼Œå…¶ç¼ºç‚¹æ˜¯åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€å¯¹ IP è¿›è¡Œé€šä¿¡ã€‚éšç€ç³»ç»Ÿè§„æ¨¡çš„é€æ¸å¢å¤§ï¼Œæ€»çº¿ç»“æ„çš„é€šä¿¡æ•ˆç‡å¿…ç„¶æˆä¸ºé™åˆ¶ç³»ç»Ÿæ€§èƒ½æå‡çš„ç“¶é¢ˆã€‚ç‰‡ä¸Šç½‘ç»œå…·æœ‰éå¸¸ä¸°å¯Œçš„ä¿¡é“èµ„æºï¼Œä¸ºç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç½‘ç»œåŒ–çš„é€šä¿¡å¹³å°ã€‚ç½‘ç»œä¸­çš„å¤šä¸ªèŠ‚ç‚¹å¯ä»¥åŒæ—¶åˆ©ç”¨ç½‘ç»œä¸­çš„ä¸åŒç‰©ç†é“¾è·¯è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œæ”¯æŒå¤šä¸ª IP æ ¸å¹¶å‘åœ°è¿›è¡Œæ•°æ®é€šä¿¡ã€‚éšç€ç½‘ç»œè§„æ¨¡çš„å¢å¤§ï¼Œç½‘ç»œä¸Šçš„ä¿¡é“èµ„æºä¹Ÿç›¸åº”å¢å¤šã€‚å› æ­¤ï¼ŒNoC æŠ€æœ¯ç›¸å¯¹äº Bus äº’è¿æŠ€æœ¯å…·æœ‰è¾ƒé«˜çš„å¸¦å®½ï¼Œä»¥åŠæ›´é«˜çš„é€šä¿¡æ•ˆç‡ã€‚å½“å¹¶å‘è¿›è¡Œæ•°æ®é€šä¿¡æ—¶ç½‘ç»œä¼šäº§ç”Ÿç«äº‰ï¼Œå³ä¼šå­˜åœ¨è¯·æ±‚åŒä¸€æ¡ç‰©ç†é“¾è·¯çš„èŠ‚ç‚¹å¯¹ã€‚NoC çš„è·¯ç”±èŠ‚ç‚¹é€šè¿‡åˆ†æ—¶å¤ç”¨ç‰©ç†é“¾è·¯æ¥è§£å†³ç«äº‰ï¼Œä¸ Bus ç»“æ„ç›¸æ¯”ï¼ŒNoC èƒ½å¤Ÿé™ä½ç«äº‰å‘ç”Ÿçš„æ¦‚ç‡ã€‚ ç¬¬äºŒï¼Œå¯æ‰©å±•æ€§å’Œè®¾è®¡æˆæœ¬ã€‚æ€»çº¿ç»“æ„éœ€è¦é’ˆå¯¹ä¸åŒçš„ç³»ç»Ÿéœ€æ±‚å•ç‹¬è¿›è¡Œè®¾è®¡ï¼Œå½“ç³»ç»ŸåŠŸèƒ½æ‰©å±•æ—¶ï¼Œéœ€è¦å¯¹ç°æœ‰çš„è®¾è®¡æ–¹æ¡ˆé‡æ–°è®¾è®¡ï¼Œä»è€Œä¸¥é‡å½±å“è®¾è®¡çš„å‘¨æœŸå’Œèµ„æœ¬æŠ•å…¥ã€‚NoC ä¸­æ¯ä¸ªè·¯ç”±èŠ‚ç‚¹å’Œæœ¬åœ° IP æ ¸é€šè¿‡ç½‘ç»œæ¥å£ï¼ˆNetworkInterface, NIï¼‰ç›¸è¿ï¼Œå½“ç³»ç»Ÿéœ€è¦å‡çº§æ‰©å±•æ–°åŠŸèƒ½æ—¶ï¼Œåªéœ€è¦å°†æ–°å¢åŠ çš„å¤„ç†å™¨æ ¸é€šè¿‡ç½‘ç»œæ¥å£ NI æ¥å…¥åˆ°ç½‘ç»œä¸­çš„è·¯ç”±èŠ‚ç‚¹å³å¯ï¼Œæ— éœ€é‡æ–°è®¾è®¡ç½‘ç»œã€‚å› æ­¤ï¼Œç‰‡ä¸Šç½‘ç»œå…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚ç‰‡ä¸Šç½‘ç»œä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç‰‡ä¸Šäº’è¿ç»“æ„ï¼Œèƒ½å¤Ÿæ»¡è¶³ä¸åŒç³»ç»Ÿçš„åº”ç”¨éœ€æ±‚ï¼Œå½“ç½‘ç»œä¸­èŠ‚ç‚¹æ•°é‡å¢åŠ æ—¶ï¼Œä»…éœ€è¦æŒ‰ç…§ç›¸åº”çš„æ‹“æ‰‘ç»“æ„è§„åˆ™ç»§ç»­å¢å¤§ç½‘ç»œçš„è§„æ¨¡å³å¯ï¼Œç¼©çŸ­äº†äº§å“çš„è®¾è®¡å‘¨æœŸï¼ŒèŠ‚çº¦äº†è®¾è®¡æˆæœ¬ã€‚ ç¬¬ä¸‰ï¼ŒåŠŸè€—ã€‚éšç€ SoC è§„æ¨¡çš„ä¸æ–­å¢å¤§ï¼Œæ€»çº¿ä¸Šæ¯æ¬¡ä¿¡æ¯äº¤äº’éƒ½éœ€è¦é©±åŠ¨å…¨å±€äº’è¿çº¿ï¼Œå› æ­¤æ€»çº¿ç»“æ„æ‰€æ¶ˆè€—çš„åŠŸè€—å°†æ˜¾è‘—å¢åŠ ï¼Œå¹¶ä¸”éšç€é›†æˆç”µè·¯å·¥è‰ºçš„ä¸æ–­å‘å±•ï¼Œæƒ³è¦ä¿è¯å…¨å±€æ—¶é’ŸåŒæ­¥ä¹Ÿå°†å˜å¾—éš¾ä»¥å®ç°ã€‚è€Œåœ¨ NoC ä¸­ï¼Œä¿¡æ¯äº¤äº’æ¶ˆè€—çš„åŠŸè€—ä¸è¿›è¡Œé€šè®¯çš„è·¯ç”±èŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»å¯†åˆ‡ç›¸å…³ï¼Œè·ç¦»è¾ƒè¿‘çš„ä¸¤ä¸ªèŠ‚ç‚¹è¿›è¡Œé€šè®¯æ—¶æ¶ˆè€—çš„åŠŸè€—å°±æ¯”è¾ƒä½ã€‚ ç¬¬å››ï¼Œä¿¡å·å®Œæ•´æ€§å’Œä¿¡å·å»¶è¿Ÿã€‚éšç€é›†æˆç”µè·¯ç‰¹å¾å°ºå¯¸çš„ä¸æ–­å‡å°ï¼Œç”µè·¯è§„æ¨¡çš„ä¸æ–­å¢å¤§ï¼Œäº’è¿çº¿çš„å®½åº¦å’Œé—´è·ä¹Ÿåœ¨ä¸æ–­åœ°å‡å°ï¼Œçº¿é—´è€¦åˆç”µå®¹ç›¸åº”å¢å¤§ï¼Œé•¿çš„å…¨å±€å¹¶è¡Œæ€»çº¿ä¼šå¼•èµ·è¾ƒå¤§çš„ä¸²æ‰°å™ªå£°ï¼Œä»è€Œå½±å“ä¿¡å·çš„å®Œæ•´æ€§ä»¥åŠä¿¡å·ä¼ è¾“çš„æ­£ç¡®æ€§ã€‚åŒæ—¶ï¼Œäº’è¿çº¿ä¸Šçš„å»¶è¿Ÿå°†æˆä¸ºå½±å“ä¿¡å·å»¶è¿Ÿçš„ä¸»è¦å› ç´ ï¼Œæ€»çº¿ç»“æ„å…¨å±€äº’è¿çº¿ä¸Šçš„å»¶è¿Ÿå°†å¤§äºä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œä»è€Œä½¿å¾—æ—¶é’Ÿçš„åç§»å¾ˆéš¾ç®¡ç†ã€‚ ç¬¬äº”ï¼Œå…¨å±€åŒæ­¥ã€‚æ€»çº¿ç»“æ„é‡‡ç”¨å…¨å±€åŒæ­¥æ—¶é’Ÿï¼Œéšç€èŠ¯ç‰‡é›†æˆåº¦çš„æé«˜ï¼ŒèŠ¯ç‰‡çš„å·¥ä½œé¢‘ç‡ä¹Ÿåœ¨ä¸æ–­æé«˜ï¼Œåœ¨èŠ¯ç‰‡å†…ä¼šå½¢æˆå¾ˆåºå¤§çš„æ—¶é’Ÿæ ‘ï¼Œå› æ­¤å¾ˆéš¾å®ç°ç‰‡ä¸Šå„ä¸ªæ¨¡å—çš„å…¨å±€åŒæ­¥æ—¶é’Ÿã€‚é‡‡ç”¨æ—¶é’Ÿæ ‘ï¼ˆClock Treeï¼‰ä¼˜åŒ–çš„æ–¹æ³•å¯ä»¥æ”¹å–„ç”±æ—¶é’Ÿç¿»è½¬å¼•èµ·çš„æ—¶é’Ÿåå·®å’Œæ—¶é’ŸæŠ–åŠ¨ï¼Œä½†åŒæ­¥æ—¶é’Ÿç½‘ç»œæ‰€äº§ç”Ÿçš„åŠ¨æ€åŠŸè€—ç”šè‡³å¯è¾¾æ€»åŠŸè€—çš„ 40% ä»¥ä¸Šã€‚ä¸ºäº†æé«˜ç³»ç»Ÿçš„æ—¶é’Ÿé¢‘ç‡ï¼Œåªèƒ½å¯¹å…¨å±€äº’è¿çº¿é‡‡ç”¨åˆ†å¸ƒå¼æµæ°´çº¿ç»“æ„ï¼Œæˆ–è€…é‡‡ç”¨å…¨å±€å¼‚æ­¥å±€éƒ¨åŒæ­¥ï¼ˆGlobal Asynchronous Local Synchronous,GALSï¼‰çš„æ—¶é’Ÿç­–ç•¥ã€‚","categories":[],"tags":[{"name":"NOC","slug":"NOC","permalink":"http://example.com/tags/NOC/"},{"name":"SoC","slug":"SoC","permalink":"http://example.com/tags/SoC/"}]},{"title":"æ„å»ºå’Œæµ‹è¯• RISC-V æ¶æ„ä¸‹å¯ç”¨ ACPI çš„å†…æ ¸","slug":"æ„å»ºå’Œæµ‹è¯•RISC-Væ¶æ„ä¸‹å¯ç”¨ACPIçš„å†…æ ¸","date":"2022-07-12T07:06:51.000Z","updated":"2022-10-15T03:14:29.708Z","comments":true,"path":"2022/07/12/æ„å»ºå’Œæµ‹è¯•RISC-Væ¶æ„ä¸‹å¯ç”¨ACPIçš„å†…æ ¸/","link":"","permalink":"http://example.com/2022/07/12/%E6%9E%84%E5%BB%BA%E5%92%8C%E6%B5%8B%E8%AF%95RISC-V%E6%9E%B6%E6%9E%84%E4%B8%8B%E5%90%AF%E7%94%A8ACPI%E7%9A%84%E5%86%85%E6%A0%B8/","excerpt":"","text":"å‚è€ƒè‡ªPoC : How to build and test ACPI enabled kernel Â· riscv-non-isa/riscv-acpi Wiki å‡†å¤‡ç¯å¢ƒåŠå·¥å…·é“¾ å®‰è£… RISC-V å·¥å…·é“¾ï¼Œéœ€ä¸‹è½½åŸå‘è¡Œç‰ˆã€‚å¥½åœ¨ apt å¯ä»¥å®‰è£…ã€‚ å¦‚æœæŠ¥é”™ï¼šriscv64-linux-gnu-gcc: error: unrecognized command line option â€˜-mno-relaxâ€™; did you mean â€˜-Wno-vlaâ€™?ï¼Œå¤šåŠæ˜¯å·¥å…·é“¾åŸå› ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ–¹æ³•å®‰è£…ï¼ï¼ï¼ 12sudo apt remove gcc-riscv64-linux-gnusudo apt install gcc-8-riscv64-linux-gnu å®‰è£…å¿…è¦çš„ä¸‰æ–¹åº“ï¼Œä»¥ä¸‹ä¸ºUbuntuä¸‹çš„å‘½ä»¤ï¼Œå…¶ä»–å¹³å°å¯ä»¥å‚è€ƒè¿™ä¸ªæ–‡æ¡£ã€‚ 123sudo apt install autoconf automake autotools-dev curl libmpc-dev libmpfr-dev libgmp-dev \\ gawk build-essential bison flex texinfo gperf libtool patchutils bc \\ zlib1g-dev libexpat-dev git ä¸‹è½½æºç å¯èƒ½æ— æ³•ä¸€æ¬¡æ­å»ºæˆåŠŸï¼Œä¸€äº›ç¯å¢ƒå˜é‡ä¼šç»å¸¸ç”¨åˆ°ï¼Œæ‰€ä»¥å¹²è„†æŠŠæ‰€æœ‰ç¯å¢ƒå˜é‡æ”¾åˆ°.bashrcã€‚ 12345678vim ~/.bashrc# æ·»åŠ ä»¥ä¸‹å†…å®¹export WORK_DIR=~/riscv64-acpiexport GCC5_RISCV64_PREFIX=riscv64-unknown-elf-export MAINSPACE=~/riscv64-acpi/tianocoreexport PACKAGES_PATH=$MAINSPACE/edk2:$MAINSPACE/edk2-platformsexport EDK_TOOLS_PATH=$MAINSPACE/edk2/BaseTools é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­ä¸‹è½½å¹¶æ„å»ºæ‰€æœ‰æºä»£ç ã€‚ 1234source ~/.bashrcWORK_DIR=$PWD/riscv64-acpimkdir -p $WORK_DIRcd $WORK_DIR ç„¶åä¸‹è½½æ‰€æœ‰éœ€è¦çš„æºï¼Œå®ƒä»¬æ˜¯ï¼šqemuã€opensbiã€edk2ã€edk2-platformsã€linuxã€‚ ä¸‹è½½åœ°å€æ›´æ¢æˆäº†åŠ é€Ÿé•œåƒæºï¼ŒåŸæ¥åœ°å€ä¸‹è½½å¤ªæ…¢ï¼Œå®¹æ˜“ä¸­æ–­ã€‚ä¸‹è½½åœ°å€æ›´æ¢æˆäº†åŠ é€Ÿé•œåƒæºï¼ŒåŸæ¥åœ°å€ä¸‹è½½å¤ªæ…¢ï¼Œå®¹æ˜“ä¸­æ–­ã€‚æœ‰ä¸¤ä¸ªé¡¹ç›®åŒ…å«å­æ¨¡å—ï¼Œä¸‹è½½å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥--depth=1èˆå¼ƒäº†å¤šä½™çš„æäº¤è®°å½•ã€‚ 12345git clone --branch dev-upstream https://hub.fastgit.xyz/ventanamicro/qemu.git qemugit clone --branch dev-upstream https://hub.fastgit.xyz/ventanamicro/opensbi.git opensbigit clone --branch dev-upstream --recurse-submodules --depth=1 https://hub.fastgit.xyz/ventanamicro/edk2.git tianocore/edk2git clone --branch dev-upstream --recurse-submodules --depth=1 https://hub.fastgit.xyz/ventanamicro/edk2-platforms.git tianocore/edk2-platformsgit clone --branch dev-upstream https://hub.fastgit.xyz/ventanamicro/linux.git linux ç¼–è¯‘æ„å»ºQEMU123cd $WORK_DIR/qemu./configure --target-list=riscv64-softmmumake -j $(nproc) OPENSBI æ­¤å¤„æˆ‘ä»¬ä½¿ç”¨ä»¥riscv64-unknown-elf-ä¸ºå‰ç¼€çš„ç‰ˆæœ¬ï¼Œåˆ™è¡¨ç¤ºè¯¥ç‰ˆæœ¬GCCå·¥å…·é“¾ä¼šä½¿ç”¨newlibä½œä¸ºCè¿è¡Œåº“ã€‚åŸæ–‡ä½¿ç”¨riscv64-linux-gnu-ï¼Œè¡¨ç¤ºGCCå·¥å…·é“¾ä¼šä½¿ç”¨Linuxçš„Glibcä½œä¸ºCè¿è¡Œåº“ã€‚ä½†æ˜¯æœ¬äººæœªç¼–è¯‘æˆåŠŸã€‚æ•…åé¢ç¼–è¯‘å·¥å…·å‡ä½¿ç”¨riscv64-unknown-elf-ï¼Œä¸åŸæ–‡ä¸åŒã€‚ 12cd $WORK_DIR/opensbimake ARCH=riscv CROSS_COMPILE=riscv64-unknown-elf- make PLATFORM=generic EDK2 å›ºä»¶ æ­¤å¤„åŸæ–‡é‡Œè®¾ç½®äº†ä¸€äº›ç¯å¢ƒå˜é‡åœ¨å¼€å¤´æˆ‘ä»¬è®¾ç½®äº†ï¼Œè¯·ä¸è¦é‡æ–°è®¾ç½®ï¼Œå°¤å…¶ä¸èƒ½export WORKSPACE=pwdï¼Œå› ä¸ºä¸æºç è„šæœ¬çš„WORKSPACEå†²çªã€‚ 12345678cd $WORK_DIR/tianocoresource edk2/edksetup.shmake -C edk2/BaseTools cleanmake -C edk2/BaseToolsmake -C edk2/BaseTools/Source/Csource edk2/edksetup.sh BaseTools# åŸæ–‡ä½¿ç”¨ -buildtarget RELEASEã€‚ä½†æ˜¯æç¤º Not supported target RELEASEbuild -a RISCV64 -b DEBUG -D FW_BASE_ADDRESS=0x80200000 -D EDK2_PAYLOAD_OFFSET -p Platform/Qemu/RiscvVirt/RiscvVirt.dsc -t GCC5 ERROR StoreCurrentConfiguration:7: no such file or directory: /home/user/riscv64-acpi/tianocore/Conf/BuildEnv.sh ä¸è¦è®¾ç½®export WORKSPACE=pwdï¼ï¼ï¼å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½ä¸å¯è¡Œï¼Œç›´æ¥æŠŠè·¯å¾„å†™æ­»export CONF_PATH=$WORK_DIR/tianocore/edk2/Conf uuid/uuid.h: No such file or directory 1sudo apt install uuid-dev Not supported target RELEASE 12# å°†buildå‘½ä»¤æ”¹ä¸ºå¦‚ä¸‹ï¼Œä½¿ç”¨DEBUGç‰ˆæœ¬ã€‚build -a RISCV64 -b DEBUG -D FW_BASE_ADDRESS=0x80200000 -D EDK2_PAYLOAD_OFFSET -p Platform/Qemu/RiscvVirt/RiscvVirt.dsc -t GCC5 Linux123cd $WORK_DIR/linuxmake ARCH=riscv CROSS_COMPILE=riscv64-unknown-elf- defconfigmake ARCH=riscv CROSS_COMPILE=riscv64-unknown-elf- -j $(nproc) Rootfsæ‚¨å¯ä»¥ä½¿ç”¨æ‚¨é€‰æ‹©çš„ä»»ä½• rootfsã€‚æ­¤ç¤ºä¾‹ä½¿ç”¨ buildrootã€‚ æ­¤æ­¥è€—æ—¶è¾ƒä¹…ï¼Œä¸ç½‘ç»œç¯å¢ƒæœ‰å…³ï¼Œå¦‚æœç½‘ç»œä¸å¥½å¯èƒ½æŒ‰å°æ—¶ç®—ã€‚å®¹æ˜“ä¸­æ–­ï¼Œéœ€è¦é‡æ–°ä¸‹è½½ã€‚ 12345cd $WORK_DIR/git clone https://hub.fastgit.xyz/buildroot/buildroot.gitcd $WORK_DIR/buildrootmake qemu_riscv64_virt_defconfigmake rootfs-cpio åˆ›å»º EFI åˆ†åŒºå¹¶å¤åˆ¶æ–‡ä»¶1234567891011fallocate -l 512M efi.imgsgdisk -n 1:34: -t 1:EF00 $WORK_DIR/efi.imgsudo losetup -fP $WORK_DIR/efi.imgloopdev=`losetup -j $WORK_DIR/efi.img | awk -F: &#x27;&#123;print $1&#125;&#x27;`efi_part=&quot;$loopdev&quot;p1sudo mkfs.msdos $efi_partmkdir -p /tmp/mntsudo mount $efi_part /tmp/mnt/sudo cp $WORK_DIR/linux/arch/riscv/boot/Image /tmp/mnt/sudo umount /tmp/mntsudo losetup -D $loopdev è¿è¡Œä½¿ç”¨ virtio-blk ç£ç›˜ åŸæ–‡å‚æ•°-drive file=$WORK_DIR/buildroot/output/images/rootfs.ext2,format=raw,id=hd0éœ€è¦æ›´æ”¹å¦‚ä¸‹ã€‚å› ä¸ºåœ¨ç¼–è¯‘ Rootfs æ—¶çš„å‘½ä»¤æ˜¯make rootfs-cpioæ‰€ä»¥ç”Ÿæˆçš„æ˜¯rootfs.cpioã€‚æ— æ³•æ‰¾åˆ°rootfs.ext2 12345678910$WORK_DIR/qemu/build/qemu-system-riscv64 -nographic \\-machine virt,aclint=on,aia=aplic-imsic,acpi=on -cpu rv64,sscofpmf=true -smp 8 -m 2G \\-bios $WORK_DIR/opensbi/build/platform/generic/firmware/fw_jump.elf \\-kernel $WORK_DIR/tianocore/Build/RiscvVirt/DEBUG_GCC5/FV/RISCVVIRT.fd \\-drive file=$WORK_DIR/buildroot/output/images/rootfs.cpio,format=raw,id=hd0 \\-device virtio-blk-device,drive=hd0 \\-drive file=$WORK_DIR/efi.img,format=raw,id=hd1 \\-device virtio-blk-device,drive=hd1 \\-device virtio-net-device,netdev=usernet \\-netdev user,id=usernet,hostfwd=tcp::9990-:22 ERROR æ— æ³•æ‰¾åˆ°rootfs.ext2 12345# å› ä¸ºåœ¨ç¼–è¯‘ Rootfs æ—¶çš„å‘½ä»¤æ˜¯ make rootfs-cpio æ‰€ä»¥ç”Ÿæˆçš„æ˜¯ rootfs.cpio# åŸæ–‡å‚æ•°-drive file=$WORK_DIR/buildroot/output/images/rootfs.ext2,format=raw,id=hd0 \\# ä¿®æ”¹ä¸º-drive file=$WORK_DIR/buildroot/output/images/rootfs.cpio,format=raw,id=hd0 \\ æ— æ³•æ‰¾åˆ°RISCVVIRT.fd 12345# å› ä¸ºç¼–è¯‘ EDK2 å›ºä»¶æ—¶ï¼Œå‚æ•°æ˜¯-b DEBUG ç‰ˆæœ¬ï¼ŒåŸæ–‡æ˜¯ RELEASE ç‰ˆæœ¬ï¼Œè¿™ä¸¤ä¸ªç‰ˆæœ¬è·¯å¾„ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°# åŸæ–‡å‚æ•°-kernel $WORK_DIR/tianocore/Build/RiscvVirt/RELEASE_GCC5/FV/RISCVVIRT.fd \\# ä¿®æ”¹ä¸º-kernel $WORK_DIR/tianocore/Build/RiscvVirt/DEBUG_GCC5/FV/RISCVVIRT.fd \\ At EFI Shell: 1Shell&gt; fs0:\\Image root=/dev/vdb console=ttyS0 rootwait earlycon ä½¿ç”¨ virtio-scsi ç£ç›˜123456789101112$WORK_DIR/qemu/build/qemu-system-riscv64 -nographic \\-machine virt,aclint=on,aia=aplic-imsic,acpi=on -cpu rv64,ssofpmf=true -smp 8 -m 2G \\-bios $WORK_DIR/opensbi/build/platform/generic/firmware/fw_jump.elf \\-kernel $WORK_DIR/tianocore/Build/RiscvVirt/DEBUG_GCC5/FV/RISCVVIRT.fd \\-device virtio-scsi-pci,id=scsi0,num_queues=4 \\-device scsi-hd,drive=drive0,bus=scsi0.0,channel=0,scsi-id=0,lun=0 \\-drive file=$WORK_DIR/buildroot/output/images/rootfs.cpio,format=raw,if=none,id=drive0 \\-device virtio-scsi-pci,id=scsi1,num_queues=4 \\-device scsi-hd,drive=drive1,bus=scsi0.0,channel=0,scsi-id=1,lun=0 \\-drive file=$WORK_DIR/efi.img,format=raw,if=none,id=drive1 \\-device virtio-net-device,netdev=usernet \\-netdev user,id=usernet,hostfwd=tcp::9990-:22 At EFI Shell: 1Shell&gt; fs0:\\Image root=/dev/sda console=ttyS0 rootwait earlycon","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"RISC-V","slug":"RISC-V","permalink":"http://example.com/tags/RISC-V/"},{"name":"ACPI","slug":"ACPI","permalink":"http://example.com/tags/ACPI/"},{"name":"Kernel","slug":"Kernel","permalink":"http://example.com/tags/Kernel/"},{"name":"å†…æ ¸","slug":"å†…æ ¸","permalink":"http://example.com/tags/%E5%86%85%E6%A0%B8/"}]},{"title":"CSAPP-LAB-Cache Lab","slug":"CSAPP-LAB-Cache-Lab","date":"2022-07-11T01:55:39.000Z","updated":"2022-10-15T03:14:29.117Z","comments":true,"path":"2022/07/11/CSAPP-LAB-Cache-Lab/","link":"","permalink":"http://example.com/2022/07/11/CSAPP-LAB-Cache-Lab/","excerpt":"","text":"é¢„å¤‡çŸ¥è¯†å¼€å§‹è¿™ä¸ªå®éªŒå‰ï¼Œéœ€è¦å­¦ä¹ ã€ŠCSAPP ç¬¬å…­ç« -å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ã€‹çš„ç›¸å…³å†…å®¹ï¼Œä¸ç¼“å­˜ç›¸å…³çš„å†…å®¹ï¼Œæˆ‘ä¹Ÿåšäº†ç›¸å…³çš„CPU Cache é«˜é€Ÿç¼“å­˜å­¦ä¹ è®°å½•å¯ä»¥å‚è€ƒã€‚ å®éªŒç›¸å…³çš„æ–‡ä»¶å¯ä»¥ä»CS:APP3e, Bryant and Oâ€™Hallaronä¸‹è½½ã€‚ å…¶ä¸­ï¼Œ READMEï¼šä»‹ç»å®éªŒç›®çš„å’Œå®éªŒè¦æ±‚ï¼Œä»¥åŠå®éªŒçš„ç›¸å…³æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»åœ¨ 64-bit x86-64 system ä¸Šè¿è¡Œå®éªŒã€‚éœ€è¦å®‰è£… Valgrind å·¥å…·ã€‚ Writeupï¼šå®éªŒæŒ‡å¯¼ã€‚ Release Notesï¼šç‰ˆæœ¬å‘å¸ƒä¿¡æ¯ã€‚ Self-Study Handoutï¼šéœ€è¦ä¸‹è½½çš„å‹ç¼©åŒ…ï¼Œé‡Œé¢åŒ…å«äº†å¾…ä¿®æ”¹çš„æºç æ–‡ä»¶ç­‰ã€‚ ä¸‹è½½ Self-Study Handout å¹¶è§£å‹ï¼Œå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼š 1234567891011121314151617â”œâ”€â”€ cachelab.c # ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œå¦‚æ‰“å°è¾“å‡ºç­‰ï¼Œä¸éœ€è¦ä¿®æ”¹â”œâ”€â”€ cachelab.h # åŒä¸Šâ”œâ”€â”€ csim.c # éœ€è¦å®Œå–„çš„ä¸»æ–‡ä»¶ï¼Œéœ€è¦åœ¨è¿™é‡Œæ¨¡æ‹ŸCacheâ”œâ”€â”€ csim-ref # å·²ç»ç¼–è¯‘å¥½çš„ç¨‹åºï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿçš„Cacheéœ€è¦ä¸è¿™ä¸ªç¨‹åºè¿è¡Œçš„ç»“æœä¿æŒä¸€è‡´â”œâ”€â”€ driver.py # é©±åŠ¨ç¨‹åºï¼Œè¿è¡Œ test-csim å’Œ test-transâ”œâ”€â”€ Makefile # ç”¨æ¥ç¼–è¯‘csimç¨‹åºâ”œâ”€â”€ README # â”œâ”€â”€ test-csim # æµ‹è¯•ç¼“å­˜æ¨¡æ‹Ÿå™¨â”œâ”€â”€ test-trans.c # æµ‹è¯•è½¬ç½®åŠŸèƒ½â”œâ”€â”€ tracegen.c # test-trans è¾…åŠ©ç¨‹åºâ”œâ”€â”€ traces # test-csim.c ä½¿ç”¨çš„è·Ÿè¸ªæ–‡ä»¶â”‚ â”œâ”€â”€ dave.traceâ”‚ â”œâ”€â”€ long.traceâ”‚ â”œâ”€â”€ trans.traceâ”‚ â”œâ”€â”€ yi2.traceâ”‚ â””â”€â”€ yi.traceâ””â”€â”€ trans.c Part A â€”â€” Writing A Cache Simulatoråœ¨ Part Aï¼Œæˆ‘ä»¬å°†åœ¨ csim.c ä¸­ç¼–å†™ä¸€ä¸ªç¼“å­˜æ¨¡æ‹Ÿå™¨ï¼Œå®ƒå°† valgrind å†…å­˜è·Ÿè¸ªä½œä¸ºè¾“å…¥ï¼Œåœ¨æ­¤è·Ÿè¸ªä¸Šæ¨¡æ‹Ÿé«˜é€Ÿç¼“å­˜çš„å‘½ä¸­/æœªå‘½ä¸­è¡Œä¸ºï¼Œå¹¶è¾“å‡ºå‘½ä¸­ã€æœªå‘½ä¸­å’Œé©±é€çš„æ€»æ•°ã€‚ è¿™é‡Œçš„è¾“å…¥ç”±valgrindé€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆçš„ï¼š 1valgrind --log-fd=1 --tool=lackey -v --trace-mem=yes ls -l --log-fd=1è¡¨ç¤ºå°†è¾“å‡ºè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼›--tool=lackeyï¼šLackey æ˜¯ä¸€ä¸ªç®€å•çš„ Valgrind å·¥å…·ï¼Œå¯è¿›è¡Œå„ç§åŸºæœ¬ç¨‹åºæµ‹é‡ï¼›--trace-mem=yesï¼šLackey çš„ä¸€ä¸ªå‚æ•°ï¼Œå¯ç”¨åï¼ŒLackey ä¼šæ‰“å°ç¨‹åºå‡ ä¹æ‰€æœ‰å†…å­˜è®¿é—®çš„å¤§å°å’Œåœ°å€ï¼›ls -lï¼šæ˜¯ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ã€‚ä¹Ÿå°±æ˜¯æ£€æµ‹ls -lç¨‹åºåœ¨è¿è¡Œæ—¶è®¿é—®å†…å­˜çš„æƒ…å†µã€‚ æ‰§è¡Œç»“æœåƒä¸‹é¢çš„å½¢å¼ï¼š 1234567891011# [space]operation address,sizeI 0400639c,4 L 1ffeffec00,8I 040063a0,2 S 1ffeffea50,8I 040063a2,4 L 1ffeffebf0,8I 040063a6,3I 040063a9,3 L 1ffeffebf8,4I 040063ac,7 æ“ä½œå­—æ®µè¡¨ç¤ºå†…å­˜è®¿é—®çš„ç±»å‹ï¼šIè¡¨ç¤ºæŒ‡ä»¤åŠ è½½ï¼ŒLè¡¨ç¤ºæ•°æ®åŠ è½½ï¼ŒSè¡¨ç¤ºæ•°æ®å­˜å‚¨ï¼ŒMè¡¨ç¤ºæ•°æ®ä¿®æ”¹ï¼ˆå³ï¼Œæ•°æ®åŠ è½½åè·Ÿæ•°æ®å­˜å‚¨ï¼‰ ï¼‰ã€‚æ¯ä¸ªIä¹‹å‰éƒ½æ²¡æœ‰ç©ºæ ¼ã€‚æ¯ä¸ªMã€Lå’ŒSä¹‹å‰æ€»æ˜¯æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚åœ°å€å­—æ®µæŒ‡å®šä¸€ä¸ª 64 ä½çš„åå…­è¿›åˆ¶å†…å­˜åœ°å€ã€‚ size å­—æ®µæŒ‡å®šæ“ä½œè®¿é—®çš„å­—èŠ‚æ•°ã€‚ äº†è§£è¿™äº›åŸºç¡€åï¼Œæˆ‘ä»¬æœ€ä¸»è¦çš„æ˜¯è¦æ˜ç¡®ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºå…·ä½“æœ‰å“ªäº›å‚æ•°ï¼Œæ€ä¹ˆæ‰§è¡Œçš„ã€‚csim-refæ˜¯å·²ç»å®Œæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®ƒçš„ç”¨æ³•æ˜¯ 1./csim-ref [-hv] -s &lt;s&gt; -E &lt;E&gt; -b &lt;b&gt; -t &lt;tracefile&gt; -hï¼šæ‰“å°å¸®åŠ©ä¿¡æ¯ï¼› -vï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼Œå¦‚æ˜¯ Iï¼ŒL è¿˜æ˜¯ Mï¼› -s &lt;s&gt;ï¼šç»„ç´¢å¼•ä½æ•°ï¼ˆ$S=2^{s}$ç»„ä¸ªæ•°ï¼‰ï¼› -E &lt;E&gt;ï¼šå…³è”æ€§ï¼ˆæ¯ç»„çš„è¡Œæ•°ï¼‰ï¼› -b &lt;b&gt;ï¼šå—ä½æ•°ï¼ˆ$B=2^{b}$ æ˜¯å—å¤§å°ï¼‰ï¼› -t &lt;tracefile&gt;ï¼švalgrind ç”Ÿæˆçš„æ–‡ä»¶ï¼› å¦‚ï¼š 12./csim-ref -s 4 -E 1 -b 4 -t traces/yi.tracehits:4 misses:5 evictions:3 å¦‚æœæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯å¯ä»¥æ‰§è¡Œï¼š 123456789./csim-ref -v -s 4 -E 1 -b 4 -t traces/yi.traceL 10,1 missM 20,1 miss hitL 22,1 hitS 18,1 hitL 110,1 miss evictionL 210,1 miss evictionM 12,1 miss eviction hithits:4 misses:5 evictions:3 æˆ‘ä»¬çš„ç›®çš„å°±æ˜¯è¦å®Œå–„csim.cï¼Œä½¿å…¶èƒ½å¤Ÿä½¿ç”¨ä¸Šé¢ç›¸åŒçš„å‚æ•°ï¼Œå¾—åˆ°ä¸csim-refç›¸åŒçš„ç»“æœã€‚Cache Lab Implementa/on and Blockingè¿™ä»½ PPT é‡Œæœ‰ä¸€äº›å®éªŒæŒ‡å¯¼ï¼Œå¯ä»¥å‚è€ƒã€‚é¦–å…ˆéœ€è¦è§£å†³çš„å°±æ˜¯å¦‚ä½•å¤„ç†è¾“å…¥çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ PPT é‡Œæåˆ°çš„getoptåº“æ¥è§£å†³ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161#include &lt;stdbool.h&gt;#include &lt;string.h&gt;#include &quot;cachelab.h&quot;#include &quot;getopt.h&quot;static int S; // ç»„ä¸ªæ•°static int s; // ç»„å çš„ä½æ•°static int E;static int B;static int hits = 0;static int misses = 0;static int evictions = 0;typedef struct _CacheLine &#123; unsigned tag; struct _CacheLine *next; struct _CacheLine *prev;&#125; CacheLine;typedef struct _Cache &#123; CacheLine *head; CacheLine *tail; int *size;&#125; Cache;static Cache *cache;void parse_option(int argc, char **argv, char **fileName)&#123; int option; while ((option = getopt(argc, argv, &quot;s:E:b:t:&quot;)) != -1) &#123; switch (option) &#123; case &#x27;s&#x27;: s = atoi(optarg); // ä¼ å…¥çš„å‚æ•°ä¸ºå ç”¨çš„bitï¼Œéœ€è¦è½¬æ¢ä¸º10è¿›åˆ¶ S = 1 &lt;&lt; s; case &#x27;E&#x27;: E = atoi(optarg); case &#x27;b&#x27;: B = atoi(optarg); case &#x27;t&#x27;: strcpy(*fileName, optarg); &#125; &#125;&#125;void initialize_cache()&#123; cache = malloc(S * sizeof(*cache)); for (int i = 0; i &lt; S; i++) &#123; cache[i].head = malloc(sizeof(CacheLine)); cache[i].tail = malloc(sizeof(CacheLine)); cache[i].head-&gt;next = cache[i].tail; cache[i].tail-&gt;prev = cache[i].head; (cache[i].size) = (int *)malloc(sizeof(int)); *(cache[i].size) = 0; &#125;&#125;/*! * @breif Add a new CacheLine to the Cache first line * @param nodeToDel CacheLine to be deleted * @param curLru Current Cache */void insert_first_line(CacheLine *node, Cache *curLru)&#123; node-&gt;next = curLru-&gt;head-&gt;next; node-&gt;prev = curLru-&gt;head; curLru-&gt;head-&gt;next-&gt;prev = node; curLru-&gt;head-&gt;next = node; *(curLru-&gt;size) = *(curLru-&gt;size) + 1;&#125;void evict(CacheLine *nodeToDel, Cache *curLru)&#123; nodeToDel-&gt;next-&gt;prev = nodeToDel-&gt;prev; nodeToDel-&gt;prev-&gt;next = nodeToDel-&gt;next; *(curLru-&gt;size) = *(curLru-&gt;size) - 1;&#125;void update(unsigned address)&#123; unsigned int mask = 0xFFFFFFFF; unsigned int maskSet = mask &gt;&gt; (32 - s); // å–å‡ºç»„ç´¢å¼• unsigned int targetSet = ((maskSet) &amp; (address &gt;&gt; B)); // å–å‡ºæ ‡è®° unsigned int targetTag = address &gt;&gt; (s + B); Cache curLru = cache[targetSet]; // æŸ¥æ‰¾æ˜¯å¦å­˜ä¸å½“å‰æ ‡è®°ä½ç›¸åŒçš„ç¼“å­˜è¡Œ CacheLine *cur = curLru.head-&gt;next; bool found = 0; while (cur != curLru.tail) &#123; if (cur-&gt;tag == targetTag) &#123; found = true; break; &#125; cur = cur-&gt;next; &#125; if (found) &#123; hits++; evict(cur, &amp;curLru); insert_first_line(cur, &amp;curLru); printf(&quot;&gt; hit!, set: %d \\n&quot;, targetSet); &#125; else &#123; CacheLine *newNode = malloc(sizeof(CacheLine)); newNode-&gt;tag = targetTag; if (*(curLru.size) == E) &#123; // å¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ™åˆ é™¤æœ€åä¸€ä¸ªç¼“å­˜è¡Œ evict(curLru.tail-&gt;prev, &amp;curLru); insert_first_line(newNode, &amp;curLru); evictions++; misses++; printf(&quot;&gt; evic &amp;&amp; miss set:%d\\n&quot;, targetSet); &#125; else &#123; misses++; insert_first_line(newNode, &amp;curLru); printf(&quot;&gt; miss %d\\n&quot;, targetSet); &#125; &#125;&#125;void cache_simulate(char *fileName)&#123; // åˆ†é…å¹¶åˆå§‹åŒ–Sç»„ç¼“å­˜ initialize_cache(); FILE *file = fopen(fileName, &quot;r&quot;); char op; unsigned int address; int size; while (fscanf(file, &quot; %c %x,%d&quot;, &amp;op, &amp;address, &amp;size) &gt; 0) &#123; printf(&quot;%c, %x %d\\n&quot;, op, address, size); switch (op) &#123; case &#x27;L&#x27;: update(address); break; case &#x27;M&#x27;: update(address); case &#x27;S&#x27;: update(address); break; &#125; &#125;&#125;int main(int argc, char **argv)&#123; char *fileName = malloc(100 * sizeof(char)); parse_option(argc, argv, &amp;fileName); cache_simulate(fileName); printSummary(hits, misses, evictions); return 0;&#125;","categories":[{"name":"CSAPP-Lab","slug":"CSAPP-Lab","permalink":"http://example.com/categories/CSAPP-Lab/"}],"tags":[{"name":"Cache","slug":"Cache","permalink":"http://example.com/tags/Cache/"},{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"CSAPP","slug":"CSAPP","permalink":"http://example.com/tags/CSAPP/"}]},{"title":"CPU Cache é«˜é€Ÿç¼“å­˜","slug":"CPU-Cacheé«˜é€Ÿç¼“å­˜","date":"2022-07-10T02:43:17.000Z","updated":"2022-10-15T03:14:29.078Z","comments":true,"path":"2022/07/10/CPU-Cacheé«˜é€Ÿç¼“å­˜/","link":"","permalink":"http://example.com/2022/07/10/CPU-Cache%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/","excerpt":"","text":"å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„ ä» Cacheã€å†…å­˜ï¼Œåˆ° SSD å’Œ HDD ç¡¬ç›˜ï¼Œä¸€å°ç°ä»£è®¡ç®—æœºä¸­ï¼Œå°±ç”¨ä¸Šäº†æ‰€æœ‰è¿™äº›å­˜å‚¨å™¨è®¾å¤‡ã€‚å…¶ä¸­ï¼Œå®¹é‡è¶Šå°çš„è®¾å¤‡é€Ÿåº¦è¶Šå¿«ï¼Œè€Œä¸”ï¼ŒCPU å¹¶ä¸æ˜¯ç›´æ¥å’Œæ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡æ‰“äº¤é“ï¼Œè€Œæ˜¯æ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡ï¼Œåªå’Œå®ƒç›¸é‚»çš„å­˜å‚¨è®¾å¤‡æ‰“äº¤é“ã€‚æ¯”å¦‚ï¼ŒCPUCache æ˜¯ä»å†…å­˜é‡ŒåŠ è½½è€Œæ¥çš„ï¼Œæˆ–è€…éœ€è¦å†™å›å†…å­˜ï¼Œå¹¶ä¸ä¼šç›´æ¥å†™å›æ•°æ®åˆ°ç¡¬ç›˜ï¼Œä¹Ÿä¸ä¼šç›´æ¥ä»ç¡¬ç›˜åŠ è½½æ•°æ®åˆ° CPUCache ä¸­ï¼Œè€Œæ˜¯å…ˆåŠ è½½åˆ°å†…å­˜ï¼Œå†ä»å†…å­˜åŠ è½½åˆ° Cache ä¸­ã€‚ è¿™æ ·ï¼Œå„ä¸ªå­˜å‚¨å™¨åªå’Œç›¸é‚»çš„ä¸€å±‚å­˜å‚¨å™¨æ‰“äº¤é“ï¼Œå¹¶ä¸”éšç€ä¸€å±‚å±‚å‘ä¸‹ï¼Œå­˜å‚¨å™¨çš„å®¹é‡é€å±‚å¢å¤§ï¼Œè®¿é—®é€Ÿåº¦é€å±‚å˜æ…¢ï¼Œè€Œå•ä½å­˜å‚¨æˆæœ¬ä¹Ÿé€å±‚ä¸‹é™ï¼Œä¹Ÿå°±æ„æˆäº†æˆ‘ä»¬æ—¥å¸¸æ‰€è¯´çš„å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ã€‚ é«˜é€Ÿç¼“å­˜ç¼“å­˜ä¸æ˜¯ CPU çš„ä¸“å±åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå®ƒå½“æˆä¸€ç§ç­–ç•¥ï¼Œä»»ä½•æ—¶å€™æƒ³è¦å¢åŠ æ•°æ®ä¼ è¾“æ€§èƒ½ï¼Œéƒ½å¯ä»¥é€šè¿‡åŠ ä¸€å±‚ç¼“å­˜è¯•è¯•ã€‚ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„çš„ä¸­å¿ƒæ€æƒ³æ˜¯ï¼Œå¯¹äºæ¯ä¸ª$k$ï¼Œä½äº$k$å±‚çš„æ›´å¿«æ›´å°çš„å­˜å‚¨è®¾å¤‡ä½œä¸ºä½äº$k+1$å±‚çš„æ›´å¤§æ›´æ…¢çš„å­˜å‚¨è®¾å¤‡çš„ç¼“å­˜ã€‚ä¸‹å›¾å±•ç¤ºäº†å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ä¸­ç¼“å­˜çš„ä¸€èˆ¬æ€§æ¦‚å¿µã€‚ æ•°æ®æ€»æ˜¯ä»¥å—blockä¸ºå•ä½ï¼Œåœ¨å±‚ä¸å±‚ä¹‹é—´æ¥å›å¤åˆ¶ã€‚ è¯´å›é«˜é€Ÿç¼“å­˜ï¼ŒæŒ‰ç…§æ‘©å°”å®šå¾‹ï¼ŒCPU çš„è®¿é—®é€Ÿåº¦æ¯ 18 ä¸ªæœˆä¾¿ä¼šç¿»ä¸€ç¿»ï¼Œç›¸å½“äºæ¯å¹´å¢é•¿ 60%ã€‚å†…å­˜çš„è®¿é—®é€Ÿåº¦è™½ç„¶ä¸æ–­å¢é•¿ï¼Œå´è¿œæ²¡æœ‰é‚£ä¹ˆå¿«ï¼Œæ¯å¹´åªå¢é•¿ 7% å·¦å³ã€‚è¿™æ ·å°±å¯¼è‡´ CPU æ€§èƒ½å’Œå†…å­˜è®¿é—®çš„å·®è·ä¸æ–­æ‹‰å¤§ã€‚ä¸ºäº†å¼¥è¡¥ä¸¤è€…ä¹‹é—´å·®å¼‚ï¼Œç°ä»£ CPU å¼•å…¥äº†é«˜é€Ÿç¼“å­˜ã€‚ CPU çš„è¯»ï¼ˆloadï¼‰å®è´¨ä¸Šå°±æ˜¯ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®åˆ°å¯„å­˜å™¨ï¼ˆregisterï¼‰é‡Œï¼Œåœ¨å¤šçº§ç¼“å­˜çš„æ¶æ„ä¸­ï¼Œå¦‚æœç¼“å­˜ä¸­æ‰¾ä¸åˆ°æ•°æ®ï¼ˆCache missï¼‰ï¼Œå°±ä¼šå±‚å±‚è¯»å–äºŒçº§ç¼“å­˜ä¸‰çº§ç¼“å­˜ï¼Œä¸€æ—¦æ‰€æœ‰çš„ç¼“å­˜é‡Œéƒ½æ‰¾ä¸åˆ°å¯¹åº”çš„æ•°æ®ï¼Œå°±è¦å»å†…å­˜é‡Œå¯»å€äº†ã€‚å¯»å€åˆ°çš„æ•°æ®é¦–å…ˆæ”¾åˆ°å¯„å­˜å™¨é‡Œï¼Œå…¶å‰¯æœ¬ä¼šé©»ç•™åˆ° CPU çš„ç¼“å­˜ä¸­ã€‚ CPU çš„å†™ï¼ˆstoreï¼‰ä¹Ÿæ˜¯é’ˆå¯¹ç¼“å­˜ä½œå†™å…¥ã€‚å¹¶ä¸ä¼šç›´æ¥å’Œå†…å­˜æ‰“äº¤é“ï¼Œè€Œæ˜¯é€šè¿‡æŸç§æœºåˆ¶å®ç°æ•°æ®ä»ç¼“å­˜åˆ°å†…å­˜çš„å†™å›ï¼ˆwrite backï¼‰ã€‚ ç¼“å­˜åˆ°åº•å¦‚ä½•ä¸ CPU å’Œä¸»å­˜æ•°æ®äº¤æ¢çš„ï¼ŸCPU å¦‚ä½•ä»ç¼“å­˜ä¸­è¯»å†™æ•°æ®çš„ï¼Ÿç¼“å­˜ä¸­æ²¡æœ‰è¯»çš„æ•°æ®ï¼Œæˆ–è€…ç¼“å­˜å†™æ»¡äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å…ˆä» CPU å¦‚ä½•è¯»å–æ•°æ®è¯´èµ·ã€‚ ç¼“å­˜è¯»å–CPU å‘èµ·ä¸€ä¸ªè¯»å–è¯·æ±‚åï¼Œè¿”å›çš„ç»“æœä¼šæœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š ç¼“å­˜å‘½ä¸­ (cache hit)è¦è¯»å–çš„æ•°æ®åˆšå¥½åœ¨ç¼“å­˜ä¸­ï¼Œå«åšç¼“å­˜å‘½ä¸­ã€‚ ç¼“å­˜ä¸å‘½ä¸­ (cache miss)å‘é€ç¼“å­˜ä¸å‘½ä¸­ï¼Œç¼“å­˜å°±å¾—æ‰§è¡Œä¸€ç›´æ”¾ç½®ç­–ç•¥(placement policy)ï¼Œæ¯”å¦‚ LRUã€‚æ¥å†³å®šä»ä¸»å­˜ä¸­å–å‡ºçš„æ•°æ®æ”¾åˆ°å“ªé‡Œã€‚ å¼ºåˆ¶æ€§ä¸å‘½ä¸­(compulsory miss)/å†·ä¸å‘½ä¸­(cold miss)ï¼šç¼“å­˜ä¸­æ²¡æœ‰è¦è¯»å–çš„æ•°æ®ï¼Œéœ€è¦ä»ä¸»å­˜è¯»å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®æ”¾å…¥ç¼“å­˜ã€‚ å†²çªä¸å‘½ä¸­(conflict miss)ï¼šç¼“å­˜ä¸­æœ‰è¦è¯»çš„æ•°æ®ï¼Œåœ¨é‡‡å–æ”¾ç½®ç­–ç•¥æ—¶ï¼Œä»ä¸»å­˜ä¸­å–æ•°æ®æ”¾åˆ°ç¼“å­˜æ—¶å‘ç”Ÿäº†å†²çªï¼Œè¿™å«åšå†²çªä¸å‘½ä¸­ã€‚ é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨ç»„ç»‡ç»“æ„æ•´ä¸ª Cache è¢«åˆ’åˆ†ä¸º 1 ä¸ªæˆ–å¤šä¸ªç»„ (Set)ï¼Œ$S$ è¡¨ç¤ºç»„çš„ä¸ªæ•°ã€‚æ¯ä¸ªç»„åŒ…å« 1 ä¸ªæˆ–å¤šä¸ªç¼“å­˜è¡Œ(Cache line)ï¼Œ$E$ è¡¨ç¤ºä¸€ä¸ªç»„ä¸­ç¼“å­˜è¡Œçš„è¡Œæ•°ã€‚æ¯ä¸ªç¼“å­˜è¡Œç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šæœ‰æ•ˆä½(valid)ï¼Œæ ‡è®°ä½ï¼ˆtagï¼‰ï¼Œæ•°æ®å—ï¼ˆcache blockï¼‰ã€‚ æœ‰æ•ˆä½ï¼šè¯¥ä½ç­‰äº 1ï¼Œè¡¨ç¤ºè¿™ä¸ªè¡Œæ•°æ®æœ‰æ•ˆã€‚ æ ‡è®°ä½ï¼šå”¯ä¸€çš„æ ‡è¯†äº†å­˜å‚¨åœ¨é«˜é€Ÿç¼“å­˜ä¸­çš„å—ï¼Œæ ‡è¯†ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ã€‚ æ•°æ®å—ï¼šä¸€éƒ¨åˆ†å†…å­˜æ•°æ®çš„å‰¯æœ¬ã€‚ Cache çš„ç»“æ„å¯ä»¥ç”±å…ƒç»„$(S,E,B,m)$è¡¨ç¤ºã€‚ä¸åŒ…æ‹¬æœ‰æ•ˆä½å’Œæ ‡è®°ä½ã€‚Cache çš„å¤§å°ä¸º $C=S \\times E \\times B$. æ¥ä¸‹æ¥çœ‹çœ‹ Cache æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå½“ CPU æ‰§è¡Œæ•°æ®åŠ è½½æŒ‡ä»¤ï¼Œä»å†…å­˜åœ°å€ A è¯»å–æ•°æ®æ—¶ï¼Œæ ¹æ®å­˜å‚¨å™¨å±‚æ¬¡åŸç†ï¼Œå¦‚æœ Cache ä¸­ä¿å­˜ç€ç›®æ ‡æ•°æ®çš„å‰¯æœ¬ï¼Œé‚£ä¹ˆå°±ç«‹å³å°†æ•°æ®è¿”å›ç»™ CPUã€‚é‚£ä¹ˆ Cache å¦‚ä½•çŸ¥é“è‡ªå·±ä¿å­˜äº†ç›®æ ‡æ•°æ®çš„å‰¯æœ¬å‘¢ï¼Ÿ å‡è®¾ç›®æ ‡åœ°å€çš„æ•°æ®é•¿åº¦ä¸º$m$ä½ï¼Œè¿™ä¸ªåœ°å€è¢«å‚æ•° $S$ å’Œ $B$ åˆ†æˆäº†ä¸‰ä¸ªå­—æ®µï¼š é¦–å…ˆé€šè¿‡é•¿åº¦ä¸º$s$çš„ç»„ç´¢å¼•ï¼Œç¡®å®šç›®æ ‡æ•°æ®ä¿å­˜åœ¨å“ªä¸€ä¸ªç»„ (Set) ä¸­ï¼Œå…¶æ¬¡é€šè¿‡é•¿åº¦ä¸º$t$çš„æ ‡è®°ï¼Œç¡®å®šåœ¨å“ªä¸€è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶æœ‰æ•ˆä½å¿…é¡»ç­‰äº 1ï¼Œæœ€åæ ¹æ®é•¿åº¦ä¸º$b$çš„å—åç§»ï¼Œæ¥ç¡®å®šç›®æ ‡æ•°æ®åœ¨æ•°æ®å—ä¸­çš„ç¡®åˆ‡ä½ç½®ã€‚ Qï¼šæ—¢ç„¶è¯»å– Cache ç¬¬ä¸€æ­¥æ˜¯ç»„é€‰æ‹©ï¼Œä¸ºä»€ä¹ˆä¸ç”¨é«˜ä½ä½œä¸ºç»„ç´¢å¼•ï¼Œè€Œä½¿ç”¨ä¸­é—´çš„ä¸ºä½œä¸ºç»„ç´¢å¼•ï¼ŸAï¼šå¦‚æœä½¿ç”¨äº†é«˜ä½ä½œç´¢å¼•ï¼Œé‚£ä¹ˆä¸€äº›è¿ç»­çš„å†…å­˜å—å°±ä¼šæ˜ å°„åˆ°ç›¸åŒçš„é«˜é€Ÿç¼“å­˜å—ã€‚å¦‚å›¾å‰å››ä¸ªå—æ˜ å°„åˆ°ç¬¬ä¸€ä¸ªç¼“å­˜ç»„ï¼Œç¬¬äºŒä¸ªå››ä¸ªå—æ˜ å°„åˆ°ç¬¬äºŒä¸ªç»„ï¼Œä¾æ¬¡ç±»æ¨ã€‚å¦‚æœä¸€ä¸ªç¨‹åºæœ‰è‰¯å¥½çš„ç©ºé—´å±€éƒ¨æ€§ï¼Œé¡ºåºæ‰«æä¸€ä¸ªæ•°ç»„çš„å…ƒç´ ï¼Œé‚£ä¹ˆåœ¨ä»»ä½•æ—¶å€™ï¼Œç¼“å­˜ä¸­éƒ½åªä¿å­˜åœ¨ä¸€ä¸ªå—å¤§å°çš„æ•°ç»„å†…å®¹ã€‚è¿™æ ·å¯¹ç¼“å­˜çš„ä½¿ç”¨ç‡å¾ˆä½ã€‚ç›¸æ¯”è€Œè¨€ï¼Œå¦‚æœä½¿ç”¨ä¸­é—´çš„ä½ä½œä¸ºç»„ç´¢å¼•ï¼Œé‚£ä¹ˆç›¸é‚»çš„å—æ€»æ˜¯æ˜ å°„åˆ°ä¸åŒçš„ç»„ï¼Œå›¾ä¸­çš„æƒ…å†µèƒ½å¤Ÿå­˜æ”¾æ•´ä¸ªå¤§å°çš„æ•°ç»„ç‰‡ã€‚ ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ Direct Mapped Cacheæ ¹æ®æ¯ä¸ªç»„çš„ç¼“å­˜è¡Œæ•° $E$ çš„ä¸åŒï¼ŒCache è¢«åˆ†ä¸ºä¸åŒçš„ç±»ã€‚æ¯ä¸ªç»„åªæœ‰ä¸€è¡Œ$E=1$çš„é«˜é€Ÿç¼“å­˜è¢«ç§°ä¸ºç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜(direct-mapped cache)ã€‚ å½“ä¸€æ¡åŠ è½½æŒ‡ä»¤æŒ‡ç¤º CPU ä»ä¸»å­˜åœ°å€ A ä¸­è¯»å–ä¸€ä¸ªå­— w æ—¶ï¼Œä¼šå°†è¯¥ä¸»å­˜åœ°å€ A å‘é€åˆ°é«˜é€Ÿç¼“å­˜ä¸­ï¼Œåˆ™é«˜é€Ÿç¼“å­˜ä¼šæ ¹æ®ç»„é€‰æ‹©ï¼Œè¡ŒåŒ¹é…å’Œå­—æŠ½å–ä¸‰æ­¥æ¥åˆ¤æ–­åœ°å€ A æ˜¯å¦å‘½ä¸­ã€‚ ç»„é€‰æ‹©(set selection)ï¼šæ ¹æ®ç»„ç´¢å¼•å€¼æ¥ç¡®å®šå±äºå“ªä¸€ä¸ªç»„ï¼Œå¦‚å›¾ä¸­ç´¢å¼•é•¿åº¦ä¸º 5 ä½ï¼Œå¯ä»¥æ£€ç´¢ 32 ä¸ªç»„ ($2^5=32$)ã€‚å½“$s=0$æ—¶ï¼Œæ­¤æ—¶ç»„é€‰æ‹©çš„ç»“æœä¸ºset 0ï¼Œå½“$s=1$æ—¶ï¼Œæ­¤æ—¶ç»„é€‰æ‹©çš„ç»“æœä¸ºset 1ã€‚ **è¡ŒåŒ¹é… (line match)**ï¼šé¦–å…ˆçœ‹ç¼“å­˜è¡Œçš„æœ‰æ•ˆä½ï¼Œæ­¤æ—¶æœ‰æ•ˆä½ä¸º 1ï¼Œè¡¨ç¤ºå½“å‰æ•°æ®æœ‰æ•ˆã€‚ç„¶åå¯¹æ¯”ç¼“å­˜è¡Œçš„æ ‡è®°0110ä¸åœ°å€ä¸­çš„æ ‡è®°0110æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡æ•°æ®åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰ã€‚å¦‚æœä¸ä¸€è‡´æˆ–è€…æœ‰æ•ˆä½ä¸º 0ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡æ•°æ®ä¸åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ï¼ˆç¼“å­˜ä¸å‘½ä¸­ï¼‰ã€‚å¦‚æœå‘½ä¸­ï¼Œå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥å­—æŠ½å–ã€‚ **å­—æŠ½å– (word extraction)**ï¼šæ ¹æ®åç§»é‡$b$ç¡®å®šç›®æ ‡æ•°æ®çš„ç¡®åˆ‡ä½ç½®ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä»æ•°æ®å—çš„ä»€ä¹ˆä½ç½®å¼€å§‹æŠ½å–ä½ç½®ã€‚å¦‚å½“åç§»å—ç­‰äº100æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡æ•°æ®èµ·å§‹åœ°å€ä½äºå­—èŠ‚ 4 å¤„ã€‚ ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šæ¸…é™¤è¿™ä¸ªè¿‡ç¨‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ï¼Œæè¿°ä¸º$(S,E,B,m) = (4,1,2,4)$ã€‚æ¢å¥è¯è¯´ï¼Œé«˜é€Ÿç¼“å­˜æœ‰ 4 ä¸ªç»„ï¼Œæ¯ä¸ªç»„ 1 è¡Œï¼Œæ¯ä¸ªæ•°æ®å— 2 ä¸ªå­—èŠ‚ï¼Œåœ°å€é•¿åº¦ä¸º 4 ä½ã€‚ ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œ8 ä¸ªå†…å­˜å—ï¼Œä½†åªæœ‰ 4 ä¸ªé«˜é€Ÿç¼“å­˜ç»„ï¼Œæ‰€ä»¥ä¼šæœ‰å¤šä¸ªå—æ˜ å°„åˆ°åŒä¸€ä¸ªé«˜é€Ÿç¼“å­˜ç»„ä¸­ã€‚ä¾‹å¦‚ï¼Œå— 0 å’Œå— 4 éƒ½ä¼šè¢«æ˜ å°„åˆ°ç»„ 0ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥æ¨¡æ‹Ÿå½“ CPU æ‰§è¡Œä¸€ç³»åˆ—è¯»çš„æ—¶å€™ï¼Œé«˜é€Ÿç¼“å­˜çš„æ‰§è¡Œæƒ…å†µï¼Œæˆ‘ä»¬å‡è®¾æ¯æ¬¡ CPU è¯» 1 ä¸ªå­—èŠ‚çš„å­—ã€‚ è¯»åœ°å€ 0(0000) çš„å­—ï¼š è¯»åœ°å€ 1(0001) çš„å­—ï¼š è¯»åœ°å€ 13(1101) çš„å­—ï¼š è¯»åœ°å€ 8(1000) çš„å­—ï¼š è¯»åœ°å€ 0(0000) çš„å­—ï¼š ç»„ç›¸è”é«˜é€Ÿç¼“å­˜ Set Associative Cacheç”±äºç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜çš„ç»„ä¸­åªæœ‰ä¸€è¡Œï¼Œæ‰€ä»¥å®¹æ˜“å‘ç”Ÿå†²çªä¸å‘½ä¸­ã€‚ç»„ç›¸è”é«˜é€Ÿç¼“å­˜ (Set associative cache) è¿è¡Œæœ‰å¤šè¡Œç¼“å­˜è¡Œã€‚ä½†æ˜¯ç¼“å­˜è¡Œæœ€å¤§ä¸èƒ½è¶…è¿‡ $C/B$ã€‚ å¦‚å›¾ä¸€ä¸ªç»„ä¸­åŒ…å«äº†ä¸¤è¡Œç¼“å­˜è¡Œï¼Œè¿™ç§æˆ‘ä»¬ç§°ä¸º 2 è·¯ç›¸è”é«˜é€Ÿç¼“å­˜ã€‚ ç»„é€‰æ‹©ï¼šä¸ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜çš„ç»„é€‰æ‹©è¿‡ç¨‹ä¸€æ ·ã€‚ è¡ŒåŒ¹é…ï¼šå› ä¸ºä¸€ä¸ªç»„æœ‰å¤šè¡Œï¼Œæ‰€ä»¥éœ€è¦éå†æ‰€æœ‰è¡Œï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆä½ä¸º 1ï¼Œå¹¶ä¸”æ ‡è®°ä¸ºä¸åœ°å€ä¸­çš„æ ‡è®°ä½ç›¸åŒ¹é…çš„ä¸€è¡Œã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œè¡¨ç¤ºç¼“å­˜å‘½ä¸­ã€‚ å­—æŠ½å–ï¼šæ ¹æ®åç§»é‡$b$ç¡®å®šç›®æ ‡æ•°æ®çš„ç¡®åˆ‡ä½ç½®ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä»æ•°æ®å—çš„ä»€ä¹ˆä½ç½®å¼€å§‹æŠ½å–ä½ç½®ã€‚å¦‚å½“åç§»å—ç­‰äº100æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡æ•°æ®èµ·å§‹åœ°å€ä½äºå­—èŠ‚ 4 å¤„ã€‚ å¦‚æœä¸å‘½ä¸­ï¼Œé‚£ä¹ˆå°±éœ€è¦ä»ä¸»å­˜ä¸­å–å‡ºéœ€è¦çš„æ•°æ®å—ï¼Œä½†æ˜¯å°†æ•°æ®å—æ”¾åœ¨å“ªä¸€è¡Œç¼“å­˜è¡Œå‘¢ï¼Ÿå¦‚æœå­˜åœ¨ç©ºè¡Œ ($valid=0$)ï¼Œé‚£å°±æ”¾åˆ°ç©ºè¡Œé‡Œã€‚å¦‚æœæ²¡æœ‰ç©ºè¡Œï¼Œå°±å¾—é€‰æ‹©ä¸€ä¸ªéç©ºè¡Œæ¥æ›¿æ¢ï¼ŒåŒæ—¶å¸Œæœ› CPU ä¸ä¼šå¾ˆå¿«å¼•ç”¨è¿™ä¸ªè¢«æ›¿æ¢çš„è¡Œã€‚è¿™é‡Œä»‹ç»å‡ ä¸ªæ›¿æ¢ç­–ç•¥ã€‚ æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯éšæœºé€‰æ‹©ä¸€è¡Œæ¥æ›¿æ¢ï¼Œå…¶ä»–å¤æ‚çš„æ–¹å¼å°±æ˜¯åˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œä½¿å¾—æ¥ä¸‹æ¥ CPU å¼•ç”¨æ›¿æ¢çš„è¡Œæ¦‚ç‡æœ€å°ã€‚å¦‚ æœ€ä¸å¸¸ä½¿ç”¨ (LFU, Least Frequently Used)ï¼Œé€‰æ‹©ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„è¡Œã€‚ æœ€è¿‘æœ€å°‘ä½¿ç”¨ (LRU, Least Recently Used)ï¼Œé€‰æ‹©æœ€è¿‘ä½¿ç”¨æœ€å°‘çš„è¡Œã€‚ å…¨ç›¸è”é«˜é€Ÿç¼“å­˜ Fully Associative Cacheæ•´ä¸ª Cache åªæœ‰ä¸€ä¸ªç»„ï¼Œè¿™ä¸ªç»„åŒ…å«äº†æ‰€æœ‰çš„ç¼“å­˜è¡Œã€‚ ç»„é€‰æ‹©ï¼šå› ä¸ºåªæœ‰ä¸€ä¸ªç»„ï¼Œæ‰€æœ‰é»˜è®¤æ€»æ˜¯é€‰æ‹© set 0ã€‚å®é™…ä¸Šè¿™ä¸å°±ç›´æ¥å¯ä»¥å¿½ç•¥äº†ï¼Œè®¿é—®çš„åœ°å€ä¹Ÿå°±åªéœ€è¦åˆ’åˆ†ä¸ºæ ‡è®°å’Œåç§»ã€‚ è¡ŒåŒ¹é…ï¼šåŒç»„ç›¸è”é«˜é€Ÿç¼“å­˜ã€‚ å­—æŠ½å–ï¼šåŒç»„ç›¸è”é«˜é€Ÿç¼“å­˜ã€‚ ç”±äºç¡¬ä»¶å®ç°åŠæˆæœ¬ç­‰åŸå› ï¼Œå…¨ç›¸è”é«˜é€Ÿç¼“å­˜åªé€‚åˆåšå°è§„æ¨¡çš„ç¼“å­˜ã€‚ä¾‹å¦‚è™šæ‹Ÿå†…å­˜ä¸­çš„ TLBï¼ˆç¿»è¯‘å¤‡ç”¨ç¼“å­˜å™¨ï¼ŒTranslation Lookaside Bufferï¼‰ã€‚ ç¼“å­˜å†™å…¥å†™å…¥ Cache çš„æ€§èƒ½æ¯”å†™å…¥ä¸»å†…å­˜è¦å¿«ï¼Œé‚£ä¹ˆå†™å…¥æ•°æ®åˆ°åº•æ˜¯å†™å…¥ Cache è¿˜æ˜¯å†™å…¥ä¸»å†…å­˜å‘¢ï¼Ÿå¦‚æœç›´æ¥å†™å…¥ä¸»å†…å­˜é‡Œï¼ŒCache é‡Œé¢çš„æ•°æ®æ˜¯å¦ä¼šå¤±æ•ˆå‘¢ï¼Ÿ å†™ç›´è¾¾å†™ç›´è¾¾ç­–ç•¥ï¼ˆWrite-Throughï¼‰ï¼šå½“æ•°æ®è¦å†™å…¥ä¸»å†…å­˜é‡Œé¢ï¼Œå†™å…¥å‰ï¼Œä¼šå…ˆå»åˆ¤æ–­æ•°æ®æ˜¯å¦å·²ç»åœ¨ Cache é‡Œé¢äº†ã€‚å¦‚æœæ•°æ®å·²ç»åœ¨ Cache é‡Œäº†ï¼Œå…ˆæŠŠæ•°æ®å†™å…¥æ›´æ–°åˆ° Cache é‡Œé¢ï¼Œå†å†™å…¥åˆ°ä¸»å†…å­˜é‡Œé¢ï¼›å¦‚æœæ•°æ®ä¸åœ¨ Cache é‡Œï¼Œå°±åªæ›´æ–°ä¸»å†…å­˜ã€‚ å†™å›å†™å›ç­–ç•¥ï¼ˆWrite-Backï¼‰ï¼šå¦‚æœå‘ç°è¦å†™å…¥çš„æ•°æ®ï¼Œå°±åœ¨ CPU Cache é‡Œé¢ï¼Œé‚£ä¹ˆå°±åªæ˜¯æ›´æ–° CPU Cache é‡Œé¢çš„æ•°æ®ã€‚åŒæ—¶ï¼Œä¼šæ ‡è®° CPU Cache é‡Œçš„è¿™ä¸ª Block æ˜¯è„ï¼ˆDirtyï¼‰çš„ï¼Œè¡¨ç¤º CPU Cache é‡Œé¢çš„è¿™ä¸ª Block çš„æ•°æ®ï¼Œå’Œä¸»å†…å­˜æ˜¯ä¸ä¸€è‡´çš„ã€‚å¦‚æœå‘ç°ï¼Œè¦å†™å…¥çš„æ•°æ®æ‰€å¯¹åº”çš„ Cache Block é‡Œï¼Œæ”¾çš„æ˜¯åˆ«çš„å†…å­˜åœ°å€çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦çœ‹ä¸€çœ‹ï¼Œé‚£ä¸ª Cache Block é‡Œé¢çš„æ•°æ®æœ‰æ²¡æœ‰æ ‡è®°æˆè„çš„ã€‚å¦‚æœæ˜¯è„çš„è¯ï¼Œè¦å…ˆæŠŠè¿™ä¸ª Cache Block é‡Œé¢çš„æ•°æ®ï¼Œå†™å…¥åˆ°ä¸»å†…å­˜é‡Œé¢ã€‚ç„¶åï¼Œå†æŠŠå½“å‰è¦å†™å…¥çš„æ•°æ®ï¼Œå†™å…¥åˆ° Cache é‡Œï¼ŒåŒæ—¶æŠŠ Cache Block æ ‡è®°æˆè„çš„ã€‚å¦‚æœ Block é‡Œé¢çš„æ•°æ®æ²¡æœ‰è¢«æ ‡è®°æˆè„çš„è¯ï¼Œé‚£ä¹ˆç›´æ¥æŠŠæ•°æ®å†™å…¥åˆ° Cache é‡Œé¢ï¼Œç„¶åå†æŠŠ Cache Block æ ‡è®°æˆè„çš„å°±å¥½äº†ã€‚ åœ¨ç”¨äº†å†™å›è¿™ä¸ªç­–ç•¥ä¹‹åï¼Œåœ¨åŠ è½½å†…å­˜æ•°æ®åˆ° Cache é‡Œé¢çš„æ—¶å€™ï¼Œä¹Ÿè¦å¤šå‡ºä¸€æ­¥åŒæ­¥è„ Cache çš„åŠ¨ä½œã€‚å¦‚æœåŠ è½½å†…å­˜é‡Œé¢çš„æ•°æ®åˆ° Cache çš„æ—¶å€™ï¼Œå‘ç° Cache Block é‡Œé¢æœ‰è„æ ‡è®°ï¼Œä¹Ÿè¦å…ˆæŠŠ Cache Block é‡Œçš„æ•°æ®å†™å›åˆ°ä¸»å†…å­˜ï¼Œæ‰èƒ½åŠ è½½æ•°æ®è¦†ç›–æ‰ Cacheã€‚ ç¼“å­˜ä¸€è‡´æ€§CPU ç¼“å­˜ä¸€è‡´æ€§ MESI åè®® - å¦‚äº‘æ³Š å‚è€ƒèµ„æ–™C/C++ä¸­ volatile å…³é”®å­—è¯¦è§£ - chao_yu - åšå®¢å›­volatile èƒ½è§£å†³ cache çš„æ•°æ®ä¸€è‡´æ€§å—ï¼Ÿç­”æ¡ˆæ˜¯ä¸èƒ½_å¤©æ‰ 2012 çš„åšå®¢-CSDN åšå®¢_volatilewritecachecpu ç¼“å­˜å’Œ volatile - XuMinzhe - åšå®¢å›­ã€CSAPP-æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‘6-5. ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜_å“”å“©å“”å“©_bilibili24 å¼ å›¾ 7000 å­—è¯¦è§£è®¡ç®—æœºä¸­çš„é«˜é€Ÿç¼“å­˜ - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº - è…¾è®¯äº‘","categories":[],"tags":[{"name":"ç¼“å­˜ä¸€è‡´æ€§","slug":"ç¼“å­˜ä¸€è‡´æ€§","permalink":"http://example.com/tags/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/"},{"name":"Cache","slug":"Cache","permalink":"http://example.com/tags/Cache/"},{"name":"ç»„æˆåŸç†","slug":"ç»„æˆåŸç†","permalink":"http://example.com/tags/%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"}]},{"title":"å¯†ç ç®¡ç†å™¨-KeePass","slug":"å¯†ç ç®¡ç†å™¨-KeePass","date":"2022-07-09T11:11:40.000Z","updated":"2022-10-15T03:14:29.697Z","comments":true,"path":"2022/07/09/å¯†ç ç®¡ç†å™¨-KeePass/","link":"","permalink":"http://example.com/2022/07/09/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8-KeePass/","excerpt":"","text":"KeePass å®‰è£…ä¸‹è½½ä¸å®‰è£… å®˜ç½‘ï¼š https://keepass.info/download.html ä¸‹è½½å®Œæˆåè¿›è¡Œå®‰è£…ï¼Œé»˜è®¤å®‰è£…ä½ç½®æ˜¯ï¼šC:\\Program Files (x86)\\KeePass Password Safe 2æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©å®‰è£…è·¯å¾„ã€‚ æ›´æ”¹ä¸­æ–‡è¯­è¨€ ä¸­æ–‡è¯­è¨€åŒ…ï¼š KeePass-Chinese_Simplified å°†è¯­è¨€åŒ…ä¸‹è½½åå¤åˆ¶åˆ°å®‰è£…è·¯å¾„ä¸‹çš„Languagesæ–‡ä»¶å¤¹ä¸‹ï¼Œé»˜è®¤ä¸ºï¼šC:\\Program Files (x86)\\KeePass Password Safe 2\\Languagesã€‚é‡å¯è½¯ä»¶ã€‚ ç‚¹å‡» View-&gt;Change Language. é€‰æ‹©ä¸­æ–‡ç®€ä½“ï¼ˆChinese-Simplifiedï¼‰ã€‚é‡å¯è½¯ä»¶ï¼Œå³å¯å®Œæˆè¯­è¨€æ›´æ”¹ã€‚ ä¸­æ–‡ç•Œé¢ï¼š åŸºæœ¬ä½¿ç”¨1.åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ ç‚¹å‡» æ–‡ä»¶-ã€‹æ–°å»ºã€‚å¼¹å‡ºå¯¹è¯æ¡†ä¸ºæ•°æ®åº“åˆ›å»ºç®¡ç†å¯†ç ã€‚è¿™ä¸ªå¯†ç æ˜¯å”¯ä¸€éœ€è¦è®°å¿†çš„å¯†ç ã€‚å½“ç„¶å¦‚æœè¿½æ±‚æ›´é«˜çš„å®‰å…¨æ€§ï¼Œå¯ä»¥ç‚¹å‡»æ˜¾ç¤ºé«˜çº§é€‰é¡¹ï¼Œæä¾›æ›´å¤šçš„å¯†ç é€‰é¡¹ã€‚ 2.æ·»åŠ è®°å½• ç‚¹å‡»æ·»åŠ è®°å½•ï¼Œåœ¨å¼¹å‡ºçš„çª—å£å¡«å…¥ç›¸å…³ä¿¡æ¯ã€‚å³å¯å®Œæˆå¯†ç æ·»åŠ ã€‚ å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„ç½‘ç«™ï¼Œç¬¬ä¸€æ¬¡æ³¨å†Œå¯†ç ã€‚å¯ä»¥é€šè¿‡å¯†ç ç”Ÿæˆå™¨ï¼Œç”Ÿæˆä¸€ä¸ªé«˜å¼ºåº¦çš„å¯†ç æ¥æ·»åŠ è®°å½•ã€‚ 3.åˆ›å»ºä¸€ä¸ªå¯†ç ç”Ÿæˆæ¨¡æ¿ æ­£å¸¸å›½å†…çš„ç½‘ç«™å¯ä»¥ä½¿ç”¨çš„å¯†ç é•¿åº¦ 6-16 ä½ï¼Œå¯ä»¥ä½¿ç”¨å¤§å°å†™ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ã€‚æˆ‘ä»¬æŠŠè¿™äº›é€‰é¡¹å‹¾é€‰ï¼Œå¯†ç é•¿åº¦è®¾ç½® 16 ä½ã€‚ ç‚¹å‡»ä¿å­˜å¹¶ç»™æ¨¡æ¿è®¾ç½®ä¸ªåå­—æ–¹ä¾¿ä¸‹æ¬¡ä½¿ç”¨ å¦‚æœä¿å­˜åæƒ³æ›´æ”¹ä¸€ä¸‹ï¼Œæ¯”å¦‚å†åŠ ä¸ªå¯ä»¥ä½¿ç”¨ç©ºæ ¼ï¼Œå¯ä»¥é‡æ–°å‹¾é€‰åˆšåˆšçš„é€‰é¡¹ï¼Œä¿å­˜æ—¶ç‚¹å‡»å°ä¸‰è§’ï¼Œé€‰æ‹©åˆšåˆšä¿å­˜çš„æ–¹æ¡ˆå°±å¯ä»¥è¦†ç›–ã€‚ å¯¼å…¥ Chrome å·²ä¿å­˜çš„å¯†ç  å¾ˆå¤šå°ä¼™ä¼´åœ¨ä½¿ç”¨ KeePass ä¹‹å‰è‚¯å®šåœ¨ Chrome ç­‰æµè§ˆå™¨é‡Œä¹Ÿä¿å­˜äº†å¾ˆå¤šå¯†ç ã€‚æƒ³å°†å…¶å¯¼å…¥ KeePass æ–¹ä¾¿ç®¡ç†ã€‚Chrome æ˜¯å¯ä»¥å¯¼å‡ºå¯†ç çš„ï¼ŒKeePass ä¹Ÿå¯ä»¥å¯¼å…¥å¯†ç ã€‚ ç‚¹å‡»æµè§ˆå™¨å³ä¸Šè§’ï¼Œæ‰“å¼€è®¾ç½®ç•Œé¢ã€‚æ‰¾åˆ°å¯†ç  æ‰¾åˆ°å·²ä¿å­˜çš„å¯†ç -ã€‹å¯¼å‡ºå¯†ç ã€‚é€‰æ‹©æ–¹ä¾¿æ‰¾åˆ°çš„è·¯å¾„ï¼Œä¿å­˜å¯†ç è®°å½•ã€‚ æ‰“å¼€ KeePassï¼Œç‚¹å‡»æ–‡ä»¶-ã€‹å¯¼å…¥ï¼Œé€‰æ‹© Chrome æµè§ˆå™¨çš„æ ¼å¼ã€‚ç‚¹å‡»æ–‡ä»¶å¤¹å›¾æ ‡æ‰¾åˆ°åˆšåˆšå¯¼å‡ºçš„å¯†ç æ–‡ä»¶ã€‚ é«˜çº§é…ç½®KeePass æ­é…åšæœäº‘å®ç°äº‘åŒæ­¥ç™»å½•åšæœäº‘åˆ›å»ºä¸ªäººåŒæ­¥æ–‡ä»¶å¤¹ï¼Œè‹¥æ²¡æœ‰å…ˆæ³¨å†Œã€‚ æœ€å¥½å•ç‹¬å»ºä¸€ä¸ªä¸“é—¨çš„æ–‡ä»¶å¤¹ å°†å·²ç»ç”Ÿæˆçš„æ•°æ®åº“ä¸Šä¼ åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ ç‚¹å‡»å³ä¸Šè§’è¿›å…¥è´¦æˆ·ä¿¡æ¯ï¼Œç‚¹å‡»å®‰å…¨é€‰é¡¹ï¼š ç‚¹å‡»æ·»åŠ åº”ç”¨ è¾“å…¥åº”ç”¨åç§°ï¼Œåº”ç”¨åç§°åªæ˜¯æ–¹ä¾¿åŒºåˆ†ä½œç”¨ï¼Œæ‰€ä»¥å’Œè¦åŒæ­¥çš„åº”ç”¨åç§°ä¸€è‡´å°±å¥½ï¼š ç‚¹å‡»ç”Ÿæˆå¯†ç ï¼š æ­¤æ—¶äº‘ç›˜ç«¯é…ç½®å®Œæˆï¼Œåˆ‡å›åˆ° KeePass è¿›è¡Œå®¢æˆ·ç«¯é…ç½®ã€‚ç‚¹å‡»æ–‡ä»¶-ã€‹åŒæ­¥-ã€‹ä¸ç½‘å€ï¼ˆURLï¼‰åŒæ­¥ ç½‘å€ï¼š https://dav.jianguoyun.com/dav/KeePass/keepassData.kdbx æ³¨æ„ï¼šçº¢è‰²éƒ¨åˆ†æ˜¯ä¸ªäººåŒæ­¥æ–‡ä»¶å¤¹çš„åç§°ï¼Œç»¿è‰²éƒ¨åˆ†æ˜¯ä¸Šä¼ çš„æ•°æ®åº“å…¨ç§°ï¼Œä¸€å®šåˆ«å¿˜äº†åç¼€ ç”¨æˆ·åï¼šä½ çš„åšæœäº‘ç™»å½•åï¼ˆé‚®ç®±æˆ–è€…æ‰‹æœºå·ï¼‰ å¯†ç ï¼šç”Ÿæˆåº”ç”¨çš„å¯†ç ï¼Œï¼ˆä¸æ˜¯ç™»å½•åšæœäº‘çš„å¯†ç ï¼‰ ç‚¹å‡»ç¡®å®šï¼Œæ­¤æ—¶å·²ç»å¯ä»¥å®ŒæˆåŒæ­¥ï¼Œä½†æ˜¯æ¯æ¬¡åŒæ­¥ä»ç„¶éœ€è¦æ‰‹åŠ¨ç¡®å®šã€‚å‚è€ƒäº†ä»€ä¹ˆå€¼å¾—ä¹°ä¸Šå°ä¹ CSNçš„æ–¹æ³•ï¼Œé€šè¿‡è§¦å‘å™¨å®ç°è‡ªåŠ¨åŒæ­¥ã€‚ è§¦å‘å™¨ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;TriggerCollection xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt; &lt;Triggers&gt; &lt;Trigger&gt; &lt;Guid&gt;L2euC7Mr/EKh7nPjueuZvQ==&lt;/Guid&gt; &lt;Name&gt;SaveSync&lt;/Name&gt; &lt;Events&gt; &lt;Event&gt; &lt;TypeGuid&gt;s6j9/ngTSmqcXdW6hDqbjg==&lt;/TypeGuid&gt; &lt;Parameters&gt; &lt;Parameter&gt;1&lt;/Parameter&gt; &lt;Parameter&gt;kdbx&lt;/Parameter&gt; &lt;/Parameters&gt; &lt;/Event&gt; &lt;/Events&gt; &lt;Conditions /&gt; &lt;Actions&gt; &lt;Action&gt; &lt;TypeGuid&gt;tkamn96US7mbrjykfswQ6g==&lt;/TypeGuid&gt; &lt;Parameters&gt; &lt;Parameter&gt;SaveSync&lt;/Parameter&gt; &lt;Parameter&gt;0&lt;/Parameter&gt; &lt;/Parameters&gt; &lt;/Action&gt; &lt;Action&gt; &lt;TypeGuid&gt;Iq135Bd4Tu2ZtFcdArOtTQ==&lt;/TypeGuid&gt; &lt;Parameters&gt; &lt;Parameter&gt;https://dav.jianguoyun.com/dav/keePass/passwordSync.kdbx&lt;/Parameter&gt; &lt;Parameter&gt;123456&lt;/Parameter&gt; &lt;Parameter&gt;123456&lt;/Parameter&gt; &lt;/Parameters&gt; &lt;/Action&gt; &lt;Action&gt; &lt;TypeGuid&gt;tkamn96US7mbrjykfswQ6g==&lt;/TypeGuid&gt; &lt;Parameters&gt; &lt;Parameter&gt;SaveSync&lt;/Parameter&gt; &lt;Parameter&gt;1&lt;/Parameter&gt; &lt;/Parameters&gt; &lt;/Action&gt; &lt;/Actions&gt; &lt;/Trigger&gt; &lt;/Triggers&gt;&lt;/TriggerCollection&gt; å¤åˆ¶è§¦å‘å™¨ä»£ç ï¼Œç‚¹å‡»å·¥å…·-ã€‹è§¦å‘å™¨ï¼Œç‚¹å‡»å·¥å…·-ã€‹ä»å‰ªåˆ‡æ¿ç²˜è´´è§¦å‘å™¨ï¼š å¯¼å…¥æˆåŠŸåï¼Œåœ¨è§¦å‘å™¨é¡µé¢ä¼šå¤šä¸€ä¸ªè§¦å‘å™¨ï¼š åŒå‡»æ‰“å¼€SaveSync,æ‰“å¼€æœ€åä¸€ä¸ªåŠ¨ä½œçª—å£ï¼š åŒå‡»ä¸­é—´çš„æ¡ç›®ï¼š å°†ä¿¡æ¯æ¢æˆåŒæ­¥äº‘ç›˜çš„ä¿¡æ¯ï¼š æ–‡ä»¶/ç½‘å€ï¼š https://dav.jianguoyun.com/dav/KeePass/keepassData.kdbx æ³¨æ„ï¼šçº¢è‰²éƒ¨åˆ†æ˜¯ä¸ªäººåŒæ­¥æ–‡ä»¶å¤¹çš„åç§°ï¼Œç»¿è‰²éƒ¨åˆ†æ˜¯ä¸Šä¼ çš„æ•°æ®åº“å…¨ç§°ï¼Œä¸€å®šåˆ«å¿˜äº†åç¼€ IO è¿æ¥ - ç”¨æˆ·åï¼šä½ çš„åšæœäº‘ç™»å½•åï¼ˆé‚®ç®±æˆ–è€…æ‰‹æœºå·ï¼‰ IO è¿æ¥ - å¯†ç ï¼šç”Ÿæˆåº”ç”¨çš„å¯†ç ï¼Œï¼ˆä¸æ˜¯ç™»å½•åšæœäº‘çš„å¯†ç ï¼‰ ç‚¹å‡»ç¡®å®šï¼Œå›åˆ°ä¸»é¡µé¢ï¼Œç‚¹å‡»å·¥å…·-ã€‹é€‰é¡¹ æ‰¾åˆ° é«˜çº§ï¼Œå‘ä¸‹ç¿»ï¼Œåœ¨æ–‡ä»¶è¾“å…¥/è¾“å‡ºè¿æ¥ æ ç›®é‡Œæ‰¾åˆ° å†™å…¥æ•°æ®åº“æ—¶ä½¿ç”¨æ–‡ä»¶äº¤æ¢ æ­¤é¡¹ä¸å‹¾é€‰ ç‚¹å‡»ç¡®å®šï¼Œè¿”å›ä¸»é¡µé¢ã€‚æ­¤æ—¶ç‚¹å‡»ä¿å­˜æŒ‰é’®æˆ–è€… Ctrl+Sã€‚å³å¯ä¸äº‘ç›˜è¿›è¡ŒåŒæ­¥ã€‚ Chrome ä¸Šä½¿ç”¨æ’ä»¶å®ç°å¯†ç è‡ªåŠ¨å¡«å……ä¸åŒæ­¥åœ¨ KeePass å®¢æˆ·ç«¯å®‰è£…KeePassRPC æ’ä»¶ï¼š å°†å…¶æ”¾å…¥å®‰è£…ç›®å½•ï¼ˆ.\\KeePass\\Pluginsï¼‰æ–‡ä»¶å¤¹ä¸‹ï¼Œé€€å‡ºè½¯ä»¶ï¼Œé‡å¯å³å¯è‡ªåŠ¨å®‰è£…ã€‚ åœ¨æµè§ˆå™¨å®¢æˆ·ç«¯å®‰è£…æµè§ˆå™¨æ’ä»¶Keeï¼Œè‹¥æ— æ³•ç§‘å­¦ä¸Šç½‘ï¼Œå¯èƒ½éœ€è¦è‡ªè¡Œç™¾åº¦æœç´¢ Kee æ’ä»¶ å®‰è£…å®Œæˆåä¼šè·³å‡ºçª—å£æç¤ºæˆæƒï¼Œå°† KeePass å®¢æˆ·ç«¯è·³å‡ºçš„çª—å£ä¸­çš„çº¢è‰²æˆæƒç å¡«å…¥å³å¯è¿æ¥æµè§ˆå™¨ï¼š ä½¿ç”¨ Kee å†æ¬¡ä½¿ç”¨æµè§ˆå™¨å¡«å†™å¯†ç æ˜¯å¯ä»¥çœ‹åˆ°æ–‡æœ¬æ¡†ä¼šæœ‰ logoï¼ŒKee ä¼šè‡ªåŠ¨å¡«å†™å·²ä¿å­˜çš„å¯†ç ã€‚å¦‚æœç¬¬ä¸€æ¬¡ç™»é™†ï¼Œåœ¨ç™»å½•åå¯ä»¥ç‚¹å‡»æµè§ˆå™¨æ’ä»¶å›¾æ ‡ï¼Œæ‰¾åˆ° Save latest loginï¼Œä¿å­˜åˆšåˆšè¾“å…¥çš„å¯†ç ã€‚ å¯†ç ç®¡ç†å™¨çš„é‡è¦ä½œç”¨ä¹‹ä¸€å°±æ˜¯ç”Ÿæˆé«˜å¼ºåº¦å¯†ç ï¼Œå¯ä»¥ç”¨ KeePass å®¢æˆ·ç«¯æ¥ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥æ˜¯ Kee è¿™ä¸ªæ’ä»¶çš„ä¸€ä¸ªç”Ÿæˆå¯†ç åŠŸèƒ½ç”Ÿæˆã€‚è‹±æ–‡ç‰ˆçš„æ˜¯Generate new password","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"æ¨è","slug":"æ¨è","permalink":"http://example.com/tags/%E6%8E%A8%E8%8D%90/"},{"name":"KeePass","slug":"KeePass","permalink":"http://example.com/tags/KeePass/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7/"},{"name":"å¯†ç ç®¡ç†","slug":"å¯†ç ç®¡ç†","permalink":"http://example.com/tags/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86/"}]},{"title":"volatile èƒ½å¦è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜","slug":"volatileèƒ½å¦è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜","date":"2022-07-08T01:10:27.000Z","updated":"2022-10-15T03:14:29.576Z","comments":true,"path":"2022/07/08/volatileèƒ½å¦è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜/","link":"","permalink":"http://example.com/2022/07/08/volatile%E8%83%BD%E5%90%A6%E8%A7%A3%E5%86%B3%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/","excerpt":"","text":"volatile èƒ½å¦è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ä¸ºä½•ä¼šäº§ç”Ÿè¿™æ ·çš„ç–‘é—®ï¼Œè¿˜å¾—ä»ä¸€ä¸ªå·¥ä½œä¸­çš„ Bug è¯´èµ·ã€‚åœ¨ä½¿ç”¨ PMPï¼ˆPhysical Memory Protectï¼‰å¯¹ç‰©ç†å†…å­˜è¿›è¡Œä¿æŠ¤æ—¶ï¼Œæ— æ³•æˆåŠŸä¿æŠ¤ï¼Œç®€å•æ¥è¯´ PMP å¯ä»¥å¯¹ä¸€æ®µç‰©ç†å†…å­˜è®¾ç½®ä¿æŠ¤ï¼Œå¦‚ä¿æŠ¤è¿™æ®µå†…å­˜ä¸å¯å†™ã€‚æµ‹è¯•æ—¶ï¼Œå…ˆå¯¹è¿™æ®µå†…å­˜å†™å…¥0x1234ï¼Œå†è¯»å–è¿™æ®µå†…å­˜ã€‚å¦‚æœè¯»å–çš„å€¼ä¸º0x0è¡¨ç¤ºä¿æŠ¤æˆåŠŸï¼Œä½†å®é™…æ€»èƒ½æˆåŠŸè¯»å–0x1234ã€‚ 1234567volatile int test;test = read(0xFF740000);print(&quot;Before = %x\\n&quot;, test); // ä¿æŠ¤ä¹‹å‰æ•°æ® Before = 0x1111 PMP(0xFF740000, 0x400); // ä¿æŠ¤è¿™æ®µå†…å­˜ä¸å¯å†™write(0xFF740000, 0x1234); // å†™å…¥æ•°æ®test = read(0xFF740000);print(&quot;After = %x\\n&quot;, test); // é¢„æœŸè¯»å–ä¸º0x0ï¼Œå®é™…æ€»èƒ½æˆåŠŸè¯»å–0x1234 å› ä¸ºè¯»å–çš„å˜é‡testè®¾ç½®ä¸ºvolatileï¼Œæ‰€ä»¥æŒ‰ç…§ä»¥å¾€çš„ç†è§£ï¼Œç³»ç»Ÿæ€»æ˜¯é‡æ–°ä»å®ƒæ‰€åœ¨çš„å†…å­˜è¯»å–æ•°æ®ï¼Œè¿™é‡Œåº”è¯¥èƒ½æ­£ç¡®è¯»å–å‡ºæ•°æ®ã€‚ ä½†æ˜¯å¿½ç•¥äº†ä¸€ç‚¹ï¼Œå½“ä½¿ç”¨volatileå˜é‡æ—¶ï¼ŒCPU åªæ˜¯ä¸å†ä½¿ç”¨å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œç›´æ¥å»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œè¿™é‡Œçš„å†…å­˜å®é™…ä¸Šæ˜¯åŒ…æ‹¬ Cache çš„ã€‚ æ‰€ä»¥å½“æ•°æ®è¢« Cached ä¹‹åï¼Œå½“å†æ¬¡è¯»å–æ—¶ï¼ŒCPU å¯èƒ½ä¼šç›´æ¥è¯»å– Cached çš„æ•°æ®ï¼Œè€Œä¸æ˜¯å»è¯»å–çœŸæ­£å†…å­˜ä¸­çš„æ•°æ®ã€‚å› æ­¤ï¼Œvolatile ä¸èƒ½è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚ å…³äº Cache çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒCPU Cache é«˜é€Ÿç¼“å­˜ - å¦‚äº‘æ³Šã€‚","categories":[],"tags":[{"name":"ç¼“å­˜ä¸€è‡´æ€§","slug":"ç¼“å­˜ä¸€è‡´æ€§","permalink":"http://example.com/tags/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/"},{"name":"Cache","slug":"Cache","permalink":"http://example.com/tags/Cache/"}]},{"title":"ZH-CS å¯è§†åŒ– - å¸¸ç”¨çš„ Git å‘½ä»¤","slug":"ZH-CSå¯è§†åŒ–-å¸¸ç”¨çš„Gitå‘½ä»¤","date":"2022-07-07T08:20:48.000Z","updated":"2022-10-15T03:14:29.623Z","comments":true,"path":"2022/07/07/ZH-CSå¯è§†åŒ–-å¸¸ç”¨çš„Gitå‘½ä»¤/","link":"","permalink":"http://example.com/2022/07/07/ZH-CS%E5%8F%AF%E8%A7%86%E5%8C%96-%E5%B8%B8%E7%94%A8%E7%9A%84Git%E5%91%BD%E4%BB%A4/","excerpt":"","text":"CS å¯è§†åŒ– - å¸¸ç”¨çš„ Git å‘½ä»¤ Authorï¼šLydia Hallieè¯‘ï¼šğŸŒ³ğŸš€ CS Visualized: Useful Git Commands - DEV Community å°½ç®¡ Git æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œä½†æˆ‘æƒ³å¤§å¤šæ•°äººéƒ½ä¼šåŒæ„ï¼Œå½“æˆ‘è¯´å®ƒä¹Ÿå¯èƒ½æ˜¯â€¦â€¦ä¸€åœºå½»å¤´å½»å°¾çš„å™©æ¢¦å½“æˆ‘æ‰§è¡ŒæŸä¸ªå‘½ä»¤æ—¶åˆ†æ”¯äº¤äº’ï¼Œå®ƒå°†å¦‚ä½•å½±å“å†å²è®°å½•ï¼Ÿå½“æˆ‘åœ¨masteråˆ†æ”¯æ‰§è¡Œhard resetã€force pushåˆ° originã€åœ¨.gitæ–‡ä»¶å¤¹æ‰§è¡Œrimrafçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„åŒäº‹éƒ½å“­äº†ï¼Ÿ æˆ‘è®¤ä¸ºè¿™å°†æ˜¯åˆ›å»ºä¸€äº›æœ€å¸¸è§å’Œæœ€æœ‰ç”¨å‘½ä»¤çš„å¯è§†åŒ–ç¤ºä¾‹çš„å®Œç¾ç”¨ä¾‹ï¼æˆ‘ä»‹ç»çš„è®¸å¤šå‘½ä»¤éƒ½æœ‰å¯é€‰å‚æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›å‚æ•°æ¥æ›´æ”¹å®ƒä»¬çš„è¡Œä¸ºã€‚åœ¨æˆ‘çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘å°†ä»‹ç»å‘½ä»¤çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œä¸æ·»åŠ ï¼ˆå¤ªå¤šï¼‰é…ç½®é€‰é¡¹ï¼ Mergingæ‹¥æœ‰å¤šä¸ªåˆ†æ”¯éå¸¸æ–¹ä¾¿ï¼Œå¯ä»¥å°†æ–°æ›´æ”¹å½¼æ­¤åˆ†å¼€ï¼Œå¹¶ç¡®ä¿æ‚¨ä¸ä¼šæ„å¤–åœ°å°†æœªç»æ‰¹å‡†æˆ–æŸåçš„æ›´æ”¹æ¨é€åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ä¸€æ—¦æ›´æ”¹è·å¾—æ‰¹å‡†ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æˆ‘ä»¬çš„ç”Ÿäº§åˆ†æ”¯ä¸­è·å¾—è¿™äº›æ›´æ”¹ï¼ å°†æ›´æ”¹ä»ä¸€ä¸ªåˆ†æ”¯è½¬ç§»åˆ°å¦ä¸€ä¸ªåˆ†æ”¯çš„ä¸€ç§æ–¹æ³•æ˜¯æ‰§è¡Œ git mergeï¼Git å¯ä»¥æ‰§è¡Œä¸¤ç§ç±»å‹çš„åˆå¹¶ï¼šfast-forward æˆ–â€‹â€‹ no-fast-forwardã€‚ ç°åœ¨è¿™å¯èƒ½æ²¡æœ‰å¤šå¤§æ„ä¹‰ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹å·®å¼‚ï¼ Fast-forward (--ff)å¦‚æœå½“å‰åˆ†æ”¯ä¸å³å°†åˆå¹¶è¿‡æ¥çš„åˆ†æ”¯ç›¸æ¯”ï¼Œæ²¡æœ‰é¢å¤–çš„æäº¤ï¼Œè¿™ç§å°±æ˜¯fast-forwardåˆå¹¶ã€‚Git å¾ˆä¼šå·æ‡’ï¼Œå®ƒä¼šé¦–å…ˆå°è¯•æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œå³fast-forwardã€‚è¿™ç§åˆå¹¶æ–¹å¼ä¸ä¼šåˆ›å»ºæ–°çš„æäº¤ï¼Œåªæ˜¯æŠŠå¦ä¸€ä¸ªåˆ†æ”¯çš„æäº¤è®°å½•ç›´æ¥åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚ å®Œç¾çš„ï¼æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨ master åˆ†æ”¯ä¸Šä½¿ç”¨åœ¨ dev åˆ†æ”¯ä¸Šæ‰€åšçš„æ‰€æœ‰æ›´æ”¹ã€‚é‚£ä¹ˆï¼Œno-fast-forward åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ No-fast-foward (--no-ff)å¦‚æœä¸æ‚¨è¦åˆå¹¶çš„åˆ†æ”¯ç›¸æ¯”ï¼Œæ‚¨å½“å‰çš„åˆ†æ”¯æ²¡æœ‰ä»»ä½•é¢å¤–çš„æäº¤ï¼Œé‚£å°±å¤ªå¥½äº†ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘è§ï¼å¦‚æœæˆ‘ä»¬åœ¨å½“å‰åˆ†æ”¯ä¸Šæäº¤äº†æˆ‘ä»¬æƒ³è¦åˆå¹¶çš„åˆ†æ”¯æ²¡æœ‰çš„æ›´æ”¹ï¼ŒGit å°†æ‰§è¡Œ no-fast-forward åˆå¹¶ã€‚ ä½¿ç”¨ no-fast-forward åˆå¹¶ï¼ŒGit åœ¨æ´»åŠ¨åˆ†æ”¯ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤ã€‚æäº¤çš„çˆ¶æäº¤æŒ‡å‘æ´»åŠ¨åˆ†æ”¯å’Œæˆ‘ä»¬è¦åˆå¹¶çš„åˆ†æ”¯ï¼ æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œå®Œç¾çš„åˆå¹¶ï¼ master åˆ†æ”¯ç°åœ¨åŒ…å«æˆ‘ä»¬åœ¨ dev åˆ†æ”¯ä¸Šæ‰€åšçš„æ‰€æœ‰æ›´æ”¹ã€‚ Merge Conflictså°½ç®¡ Git æ“…é•¿å†³å®šå¦‚ä½•åˆå¹¶åˆ†æ”¯å’Œå‘æ–‡ä»¶æ·»åŠ æ›´æ”¹ï¼Œä½†å®ƒä¸èƒ½æ€»æ˜¯è‡ªå·±åšå‡ºè¿™ä¸ªå†³å®šã€‚å½“æˆ‘ä»¬å°è¯•åˆå¹¶çš„ä¸¤ä¸ªåˆ†æ”¯åœ¨åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€è¡Œä¸Šå‘ç”Ÿæ›´æ”¹æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæˆ–è€…å¦‚æœä¸€ä¸ªåˆ†æ”¯åˆ é™¤äº†å¦ä¸€ä¸ªåˆ†æ”¯ä¿®æ”¹çš„æ–‡ä»¶ï¼Œç­‰ç­‰ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒGit ä¼šè¦æ±‚æ‚¨å¸®åŠ©å†³å®šæˆ‘ä»¬è¦ä¿ç•™ä¸¤ä¸ªé€‰é¡¹ä¸­çš„å“ªä¸€ä¸ªï¼å‡è®¾åœ¨ä¸¤ä¸ªåˆ†æ”¯ä¸Šï¼Œæˆ‘ä»¬ç¼–è¾‘äº† README.md ä¸­çš„ç¬¬ä¸€è¡Œã€‚ å¦‚æœæˆ‘ä»¬æƒ³å°† dev åˆå¹¶åˆ° master ä¸­ï¼Œè¿™å°†å¯¼è‡´åˆå¹¶å†²çªï¼šæ‚¨å¸Œæœ›æ ‡é¢˜æ˜¯ Hello! è¿˜æ˜¯ Hey!ï¼Ÿ å½“è¯•å›¾åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒGit ä¼šå‘Šè¯‰ä½ å†²çªå‘ç”Ÿåœ¨å“ªé‡Œã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨åˆ é™¤ä¸æƒ³ä¿ç•™çš„æ›´æ”¹ï¼Œä¿å­˜æ›´æ”¹ï¼Œå†æ¬¡æ·»åŠ æ›´æ”¹çš„æ–‡ä»¶ï¼Œç„¶åæäº¤æ›´æ”¹ è€¶ï¼å°½ç®¡åˆå¹¶å†²çªé€šå¸¸å¾ˆçƒ¦äººï¼Œä½†å®ƒå®Œå…¨æœ‰é“ç†ï¼šGit ä¸åº”è¯¥è‡ªå·±å†³å®šé€‰æ‹©å“ªä¸€ä¸ªæ›´æ”¹ã€‚ Rebasingæˆ‘ä»¬åˆšåˆšçœ‹åˆ°äº†å¦‚ä½•é€šè¿‡æ‰§è¡Œ git merge å°†æ›´æ”¹ä»ä¸€ä¸ªåˆ†æ”¯åº”ç”¨åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚å¦ä¸€ç§å°†æ›´æ”¹ä»ä¸€ä¸ªåˆ†æ”¯æ·»åŠ åˆ°å¦ä¸€ä¸ªçš„æ–¹æ³•æ˜¯æ‰§è¡Œgit rebaseã€‚ git rebase å¤åˆ¶å½“å‰åˆ†æ”¯çš„æäº¤ï¼Œå¹¶å°†è¿™äº›å¤åˆ¶çš„æäº¤æ”¾åœ¨æŒ‡å®šåˆ†æ”¯çš„é¡¶éƒ¨ã€‚ å®Œç¾ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨ dev åˆ†æ”¯ä¸Šä½¿ç”¨åœ¨ master åˆ†æ”¯ä¸Šæ‰€åšçš„æ‰€æœ‰æ›´æ”¹ï¼ ä¸åˆå¹¶ç›¸æ¯”ï¼Œä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«æ˜¯ Git ä¸ä¼šå°è¯•æ‰¾å‡ºè¦ä¿ç•™å’Œä¸ä¿ç•™çš„æ–‡ä»¶ã€‚æˆ‘ä»¬æ­£åœ¨å˜åŸºçš„åˆ†æ”¯æ€»æ˜¯æœ‰æˆ‘ä»¬æƒ³è¦ä¿ç•™çš„æœ€æ–°æ›´æ”¹ï¼é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨ä¸ä¼šé‡åˆ°ä»»ä½•åˆå¹¶å†²çªï¼Œå¹¶ä¿æŒè‰¯å¥½çš„çº¿æ€§ Git å†å²è®°å½•ã€‚ è¿™ä¸ªä¾‹å­å±•ç¤ºäº†åŸºäº master åˆ†æ”¯çš„å˜åŸºã€‚ç„¶è€Œï¼Œåœ¨æ›´å¤§çš„é¡¹ç›®ä¸­ï¼Œæ‚¨é€šå¸¸ä¸æƒ³è¿™æ ·åšã€‚ git rebase æ”¹å˜äº†é¡¹ç›®çš„å†å²ï¼Œå› ä¸ºä¸ºå¤åˆ¶çš„æäº¤åˆ›å»ºäº†æ–°çš„å“ˆå¸Œï¼ æ¯å½“æ‚¨åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šå·¥ä½œå¹¶ä¸”ä¸»åˆ†æ”¯å·²æ›´æ–°æ—¶ï¼Œé‡æ–°å®šåŸºéƒ½å¾ˆæ£’ã€‚æ‚¨å¯ä»¥è·å¾—åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æ›´æ–°ï¼Œè¿™å°†é˜²æ­¢æœªæ¥çš„åˆå¹¶å†²çªï¼ Interactive Rebaseåœ¨é‡æ–°æäº¤æäº¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å®ƒä»¬ï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ interactive rebase æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚äº¤äº’å¼å˜åŸºå¯¹äºæ‚¨å½“å‰æ­£åœ¨å¤„ç†çš„åˆ†æ”¯ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”æƒ³è¦ä¿®æ”¹ä¸€äº›æäº¤ã€‚ æˆ‘ä»¬å¯ä»¥å¯¹æˆ‘ä»¬æ­£åœ¨å˜åŸºçš„æäº¤æ‰§è¡Œ 6 é¡¹æ“ä½œï¼š reword: Change the commit message edit: Amend this commit squash: Meld commit into the previous commit fixup: Meld commit into the previous commit, without keeping the commitâ€™s log message exec: Run a command on each commit we want to rebase drop: Remove the commit æƒŠäººçš„ï¼è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨æ§åˆ¶æˆ‘ä»¬çš„æäº¤ã€‚å¦‚æœæˆ‘ä»¬æƒ³åˆ é™¤ä¸€ä¸ªæäº¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ drop å®ƒã€‚ æˆ–è€…ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å°†å¤šä¸ªæäº¤å‹ç¼©åœ¨ä¸€èµ·ä»¥è·å¾—æ›´æ¸…æ™°çš„å†å²è®°å½•ï¼Œæ²¡é—®é¢˜ï¼ äº¤äº’å¼å˜åŸºä½¿æ‚¨å¯ä»¥å¯¹å°è¯•å˜åŸºçš„æäº¤è¿›è¡Œå¤§é‡æ§åˆ¶ï¼Œå³ä½¿åœ¨å½“å‰æ´»åŠ¨åˆ†æ”¯ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼ Resettingæˆ‘ä»¬å¯èƒ½ä¼šæäº¤æˆ‘ä»¬ä»¥åä¸æƒ³è¦çš„æ›´æ”¹ã€‚ä¹Ÿè®¸å®ƒæ˜¯ä¸€ä¸ªWIPæäº¤ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå¼•å…¥é”™è¯¯çš„æäº¤ï¼åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ git resetã€‚ git reset ä¼šåˆ é™¤æ‰€æœ‰å½“å‰æš‚å­˜çš„æ–‡ä»¶ï¼Œå¹¶è®©æˆ‘ä»¬æ§åˆ¶ HEAD åº”è¯¥æŒ‡å‘çš„ä½ç½®ã€‚ Soft resetè½¯é‡ç½®å°† HEAD ç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ï¼ˆæˆ–æäº¤çš„ç´¢å¼•ä¸ HEAD ç›¸æ¯”ï¼‰ï¼Œè€Œä¸ä¼šæ¶ˆé™¤éšååœ¨æäº¤ä¸­å¼•å…¥çš„æ›´æ”¹ï¼ å‡è®¾æˆ‘ä»¬ä¸æƒ³ä¿ç•™æ·»åŠ äº†style.cssæ–‡ä»¶çš„æäº¤9e78iï¼Œä¹Ÿä¸æƒ³ä¿ç•™æ·»åŠ äº†index.jsæ–‡ä»¶çš„æäº¤035ccã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ç¡®å®å¸Œæœ›ä¿ç•™æ–°æ·»åŠ çš„ style.css å’Œ index.js æ–‡ä»¶ï¼è½¯é‡ç½®çš„å®Œç¾ç”¨ä¾‹ã€‚ è¾“å…¥ git status æ—¶ï¼Œæ‚¨ä¼šçœ‹åˆ°æˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®å¯¹å…ˆå‰æäº¤æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ã€‚è¿™å¾ˆæ£’ï¼Œå› ä¸ºè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¿®å¤è¿™äº›æ–‡ä»¶çš„å†…å®¹å¹¶åœ¨ä»¥åå†æ¬¡æäº¤å®ƒä»¬ï¼ Hard resetæœ‰æ—¶ï¼Œæˆ‘ä»¬ä¸æƒ³ä¿ç•™æŸäº›æäº¤å¼•å…¥çš„æ›´æ”¹ã€‚ä¸è½¯é‡ç½®ä¸åŒï¼Œæˆ‘ä»¬ä¸å†éœ€è¦è®¿é—®å®ƒä»¬ã€‚Git åº”è¯¥ç®€å•åœ°å°†å…¶çŠ¶æ€é‡ç½®å›æŒ‡å®šæäº¤æ—¶çš„çŠ¶æ€ï¼šè¿™ç”šè‡³åŒ…æ‹¬å·¥ä½œç›®å½•å’Œæš‚å­˜æ–‡ä»¶ä¸­çš„æ›´æ”¹ï¼ Git ä¸¢å¼ƒäº†åœ¨ 9e78i å’Œ 035cc ä¸Šå¼•å…¥çš„æ›´æ”¹ï¼Œå¹¶å°†å…¶çŠ¶æ€é‡ç½®ä¸ºæäº¤ ec5be æ—¶çš„çŠ¶æ€ã€‚ Revertingæ’¤æ¶ˆæ›´æ”¹çš„å¦ä¸€ç§æ–¹æ³•æ˜¯æ‰§è¡Œgit revertã€‚é€šè¿‡æ¢å¤æŸä¸ªæäº¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«æ¢å¤çš„æ›´æ”¹çš„æ–°æäº¤ï¼ å‡è®¾ ec5be æ·»åŠ äº†ä¸€ä¸ª index.js æ–‡ä»¶ã€‚åæ¥ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ„è¯†åˆ°æˆ‘ä»¬ä¸å†å¸Œæœ›è¿™æ¬¡æäº¤å¼•å…¥çš„è¿™ç§å˜åŒ–ï¼è®©æˆ‘ä»¬æ¢å¤ ec5be æäº¤ã€‚ å®Œç¾çš„ï¼æäº¤9e78iæ¢å¤äº†ç”±ec5beæäº¤å¼•å…¥çš„æ›´æ”¹ã€‚æ‰§è¡Œ git revert éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥æ’¤æ¶ˆæŸä¸ªæäº¤ï¼Œè€Œæ— éœ€ä¿®æ”¹åˆ†æ”¯çš„å†å²è®°å½•ã€‚ Cherry-pickingå½“æŸä¸ªåˆ†æ”¯åŒ…å«åœ¨æ´»åŠ¨åˆ†æ”¯ä¸Šå¼•å…¥äº†æˆ‘ä»¬éœ€è¦çš„æ›´æ”¹çš„æäº¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ cherry-pick è¯¥å‘½ä»¤ï¼é€šè¿‡ cherry-pick æäº¤ï¼Œæˆ‘ä»¬åœ¨æ´»åŠ¨åˆ†æ”¯ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°æäº¤ï¼Œå…¶ä¸­åŒ…å«ç”± cherry-pick æäº¤æ‰€å¼•å…¥çš„æ›´æ”¹ã€‚ å‡è®¾ dev åˆ†æ”¯ä¸Šçš„æäº¤ 76d12 æ·»åŠ äº†æˆ‘ä»¬æƒ³è¦åœ¨ master åˆ†æ”¯ä¸­çš„ index.js æ–‡ä»¶çš„æ›´æ”¹ã€‚æˆ‘ä»¬ä¸æƒ³è¦æ•´ä¸ªï¼Œæˆ‘ä»¬åªå…³å¿ƒè¿™ä¸€æ¬¡æäº¤ï¼ å¾ˆé…·ï¼Œmaster åˆ†æ”¯ç°åœ¨åŒ…å«äº† 76d12 å¼•å…¥çš„æ›´æ”¹ï¼ Fetchingå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªè¿œç¨‹ Git åˆ†æ”¯ï¼Œä¾‹å¦‚ GitHub ä¸Šçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿè¿œç¨‹åˆ†æ”¯å…·æœ‰å½“å‰åˆ†æ”¯æ²¡æœ‰çš„æäº¤ï¼ä¹Ÿè®¸å¦ä¸€ä¸ªåˆ†æ”¯è¢«åˆå¹¶äº†ï¼Œä½ çš„åŒäº‹æ¨é€äº†ä¸€ä¸ªå¿«é€Ÿä¿®å¤ï¼Œç­‰ç­‰ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¿œç¨‹åˆ†æ”¯ä¸Šæ‰§è¡Œ git fetch åœ¨æœ¬åœ°è·å–è¿™äº›æ›´æ”¹ï¼å®ƒä¸ä¼šä»¥ä»»ä½•æ–¹å¼å½±å“æ‚¨çš„æœ¬åœ°åˆ†æ”¯ï¼šfetch åªæ˜¯ä¸‹è½½æ–°æ•°æ®ã€‚ æˆ‘ä»¬ç°åœ¨å¯ä»¥çœ‹åˆ°è‡ªä¸Šæ¬¡æ¨é€ä»¥æ¥æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ï¼æ—¢ç„¶æˆ‘ä»¬åœ¨æœ¬åœ°æ‹¥æœ‰æ–°æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†³å®šè¦å¦‚ä½•å¤„ç†è¿™äº›æ•°æ®ã€‚ Pullingè™½ç„¶ git fetch å¯¹äºè·å–åˆ†æ”¯çš„è¿œç¨‹ä¿¡æ¯éå¸¸æœ‰ç”¨ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œ git pullã€‚ git pull å®é™…ä¸Šæ˜¯ä¸¤ä¸ªå‘½ä»¤åˆäºŒä¸ºä¸€ï¼šgit fetch å’Œ git mergeã€‚å½“æˆ‘ä»¬ä»æºä¸­æå–æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆåƒä½¿ç”¨ git fetch ä¸€æ ·è·å–æ‰€æœ‰æ•°æ®ï¼Œä¹‹åæœ€æ–°çš„æ›´æ”¹ä¼šè‡ªåŠ¨åˆå¹¶åˆ°æœ¬åœ°åˆ†æ”¯ä¸­ã€‚ å¤ªæ£’äº†ï¼Œæˆ‘ä»¬ç°åœ¨ä¸è¿œç¨‹åˆ†æ”¯å®Œç¾åŒæ­¥ï¼Œå¹¶æ‹¥æœ‰æ‰€æœ‰æœ€æ–°æ›´æ”¹ï¼ Reflogæ¯ä¸ªäººéƒ½ä¼šçŠ¯é”™ï¼Œè¿™å®Œå…¨æ²¡å…³ç³»ï¼æœ‰æ—¶ä½ å¯èƒ½ä¼šè§‰å¾—ä½ æŠŠä½ çš„ git repo æç ¸äº†ï¼Œä»¥è‡³äºä½ åªæƒ³å®Œå…¨åˆ é™¤å®ƒã€‚ git reflog æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼Œç”¨äºæ˜¾ç¤ºæ‰€æœ‰å·²é‡‡å–çš„æ“ä½œçš„æ—¥å¿—ï¼è¿™åŒ…æ‹¬åˆå¹¶ã€é‡ç½®ã€æ¢å¤ï¼šåŸºæœ¬ä¸Šæ˜¯å¯¹åˆ†æ”¯çš„ä»»ä½•æ›´æ”¹ã€‚ å¦‚æœæ‚¨çŠ¯äº†é”™è¯¯ï¼Œæ‚¨å¯ä»¥æ ¹æ® reflog æä¾›ç»™æˆ‘ä»¬çš„ä¿¡æ¯é€šè¿‡é‡ç½® HEAD è½»æ¾åœ°é‡åšæ­¤æ“ä½œï¼ å‡è®¾æˆ‘ä»¬å®é™…ä¸Šå¹¶ä¸æƒ³åˆå¹¶ origin åˆ†æ”¯ã€‚å½“æˆ‘ä»¬æ‰§è¡Œ git reflog å‘½ä»¤æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°åˆå¹¶å‰ repo çš„çŠ¶æ€æ˜¯åœ¨ HEAD@&#123;1&#125;ã€‚è®©æˆ‘ä»¬æ‰§è¡Œ git reset å°† HEAD æŒ‡å‘å®ƒåœ¨ HEAD@&#123;1&#125; ä¸Šçš„ä½ç½®ï¼ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€æ–°çš„ action å·²ç»æ¨é€åˆ°reflogäº†ï¼","categories":[],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"},{"name":"Translation","slug":"Translation","permalink":"http://example.com/tags/Translation/"}]},{"title":"Cè¯­è¨€æ•°ç»„/ç»“æ„ä½“/ç»“æ„ä½“æ•°ç»„/è”åˆä½“åˆå§‹åŒ–","slug":"Cè¯­è¨€æ•°ç»„-ç»“æ„ä½“-ç»“æ„ä½“æ•°ç»„-è”åˆä½“åˆå§‹åŒ–","date":"2022-06-30T07:30:41.000Z","updated":"2022-10-15T03:14:29.176Z","comments":true,"path":"2022/06/30/Cè¯­è¨€æ•°ç»„-ç»“æ„ä½“-ç»“æ„ä½“æ•°ç»„-è”åˆä½“åˆå§‹åŒ–/","link":"","permalink":"http://example.com/2022/06/30/C%E8%AF%AD%E8%A8%80%E6%95%B0%E7%BB%84-%E7%BB%93%E6%9E%84%E4%BD%93-%E7%BB%93%E6%9E%84%E4%BD%93%E6%95%B0%E7%BB%84-%E8%81%94%E5%90%88%E4%BD%93%E5%88%9D%E5%A7%8B%E5%8C%96/","excerpt":"","text":"æ•°ç»„åˆå§‹åŒ–1234int arr[6] = &#123; [0]=5, [1]=6, [3] =10, [4]=11 &#125;; æˆ–int arr[6] = &#123; [0]=5, 6, [3] =10, 11 &#125;; æˆ–int arr[6] = &#123; [3] =10, 11, [0]=5, 6 &#125;; (æŒ‡å®šé¡ºåºå¯å˜)å‡ç­‰æ•ˆäºï¼šint arr[6] = &#123;5, 6, 0, 10, 11, 0&#125;; Note: è‹¥åœ¨æŸä¸ªæŒ‡å®šåˆå§‹åŒ–é¡¹ç›®åè·Ÿæœ‰ä¸è‡³ä¸€ä¸ªå€¼ï¼Œå¦‚[3]=10,11ã€‚åˆ™å¤šå‡ºçš„æ•°å€¼ç”¨äºå¯¹åç»­çš„æ•°ç»„å…ƒç´ è¿›è¡Œåˆå§‹åŒ–ï¼Œå³æ•°å€¼ 11 ç”¨æ¥åˆå§‹åŒ– arr[4]ã€‚ C æ•°ç»„åˆå§‹åŒ–ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åï¼Œæœªåˆå§‹åŒ–çš„å…ƒç´ å°†è¢«è‡ªåŠ¨åœ°åˆå§‹åŒ–ä¸º 0 æˆ– NULL(é’ˆå¯¹æŒ‡é’ˆå˜é‡)ã€‚æœªç»è¿‡ä»»ä½•åˆå§‹åŒ–çš„æ•°ç»„ï¼Œæ‰€æœ‰å…ƒç´ çš„å€¼éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚ GNU C è¿˜æ”¯æŒ[first â€¦ last]=value(â€¦ä¸¤ä¾§æœ‰ç©ºæ ¼) çš„å½¢å¼ï¼Œå°†è¯¥èŒƒå›´å†…çš„è‹¥å¹²å…ƒç´ åˆå§‹åŒ–ä¸ºç›¸åŒå€¼ã€‚å¦‚ï¼š 123int arr[]=&#123; [0 ... 3]=1, [4 ... 5]=2, [6 ... 9] =3&#125;; æˆ–int arr[]=&#123; [0 ... 3]=1, [4 ... 5]=2, [6 ... 8] =3, [9] =3&#125;;å‡ç­‰æ•ˆäºï¼šint arr[10] = &#123;1, 1, 1, 1, 2, 2, 3, 3, 3, 3&#125;; ç»“æ„ä½“åˆå§‹åŒ–å¯¹äºç»“æ„ä½“ 12struct Structure&#123; int a; int b; &#125;; æˆ–struct Structure&#123; int a, b; &#125;; æœ‰ä»¥ä¸‹å‡ ç§åˆå§‹åŒ–æ–¹å¼ï¼šç”¨.fieldname=æŒ‡å®šå¾…åˆå§‹åŒ–æˆå‘˜å(æˆå‘˜åˆå§‹åŒ–é¡ºåºå¯å˜)ï¼Œæ¨èä½¿ç”¨çš„æ–¹å¼ï¼Œè¯¥æ–¹å¼åˆå§‹åŒ–æ—¶ä¸å¿…ä¸¥æ ¼æŒ‰ç…§å®šä¹‰æ—¶çš„é¡ºåºï¼Œçµæ´»æ€§å¾ˆé«˜ã€‚ 1234struct Structure tStct = &#123; .a = 1, .b = 2&#125;; ç”¨fieldname:æŒ‡å®šå¾…åˆå§‹åŒ–æˆå‘˜å(æˆå‘˜åˆå§‹åŒ–é¡ºåºå¯å˜)ï¼ŒGCC 2.5 å·²åºŸé™¤ï¼Œä½†ä»æ¥å— 1234struct Structure tStct = &#123; a : 1, b : 2&#125;; ç”¨åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ– 1struct Structure tStct = &#123; 1, 2 &#125;; ç»“æ„ä½“æ•°ç»„åˆå§‹åŒ–æ–¹æ³•ä¸€ï¼š 123struct Structure ptStct[10] = &#123; [2].b = 0x2B, [2].a = 0x2A, [0].a = 0x0A &#125;; æ–¹æ³•äºŒï¼šè¯¥æ–¹æ³•å¯ä»¥ç”¨äºæ¸…é™¤ç»“æ„ä½“ã€‚ 1memset(ptStct, 0, sizeof(struct Structure) * 10); è”åˆä½“åˆå§‹åŒ–å¯ç”¨.fieldname(æˆ–å·²åºŸå¼ƒçš„fieldname:) æŒ‡ç¤ºç¬¦æ¥æŒ‡å®šä½¿ç”¨è”åˆä½“çš„å“ªä¸ªå…ƒç´ ï¼Œå¦‚ï¼š 12union UnionT &#123; int i; double d; &#125;;union UnionT tUnion = &#123; .d = 4 &#125;;","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-watch å‘¨æœŸæ‰§è¡Œå‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤-watchå‘¨æœŸæ‰§è¡Œå‘½ä»¤","date":"2022-06-09T14:50:54.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2022/06/09/æ¯å¤©å­¦å‘½ä»¤-watchå‘¨æœŸæ‰§è¡Œå‘½ä»¤/","link":"","permalink":"http://example.com/2022/06/09/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-watch%E5%91%A8%E6%9C%9F%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4/","excerpt":"","text":"åŠŸèƒ½watch å‘½ä»¤çš„åŠŸèƒ½å¦‚å…¶åï¼Œå¯ä»¥ç›‘è§†å‘½ä»¤çš„æ‰§è¡Œç»“æœã€‚å®ƒå®ç°çš„åŸç†å°±æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡å‘½ä»¤ï¼Œç„¶åæ˜¾ç¤ºç»“æœã€‚ä»–çš„ç”¨é€”å¾ˆå¹¿ï¼Œå…·ä½“æ€ä¹ˆç”¨å°±é æƒ³è±¡åŠ›äº†ã€‚ å‘½ä»¤å‚æ•°1234-n # æˆ–--interval watché»˜è®¤æ¯2ç§’è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œå¯ä»¥ç”¨-næˆ–-intervalæ¥æŒ‡å®šé—´éš”çš„æ—¶é—´ã€‚-d # æˆ–--differences ç”¨-dæˆ–--differences é€‰é¡¹watch ä¼šé«˜äº®æ˜¾ç¤ºå˜åŒ–çš„åŒºåŸŸã€‚ è€Œ-d=cumulativeé€‰é¡¹ä¼šæŠŠå˜åŠ¨è¿‡çš„åœ°æ–¹(ä¸ç®¡æœ€è¿‘çš„é‚£æ¬¡æœ‰æ²¡æœ‰å˜åŠ¨)éƒ½é«˜äº®æ˜¾ç¤ºå‡ºæ¥ã€‚-t # æˆ–-no-title ä¼šå…³é—­watchå‘½ä»¤åœ¨é¡¶éƒ¨çš„æ—¶é—´é—´éš”,å‘½ä»¤ï¼Œå½“å‰æ—¶é—´çš„è¾“å‡ºã€‚-h # æˆ–--help # æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ å®ä¾‹1watch -d &#x27;ls -l | grep tmp&#x27; # ç›‘æµ‹å½“å‰ç›®å½•ä¸­ scf&#x27; çš„æ–‡ä»¶çš„å˜åŒ–","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"Git hooks é’©å­çš„ä½¿ç”¨","slug":"Git-hooksé’©å­çš„ä½¿ç”¨","date":"2022-05-30T04:16:11.000Z","updated":"2022-10-15T03:14:29.215Z","comments":true,"path":"2022/05/30/Git-hooksé’©å­çš„ä½¿ç”¨/","link":"","permalink":"http://example.com/2022/05/30/Git-hooks%E9%92%A9%E5%AD%90%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"Git hooks ç®€ä»‹ Git èƒ½åœ¨ç‰¹å®šçš„é‡è¦åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘è‡ªå®šä¹‰è„šæœ¬ã€‚æ¯”å¦‚ï¼Œcommitä¹‹å‰æ£€æŸ¥commit messageæ˜¯å¦ç¬¦åˆçº¦å®šçš„æ ¼å¼ï¼Œpushä¹‹å‰æ£€æŸ¥ä»£ç æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦ç¼–è¯‘é€šè¿‡ç­‰ç­‰ã€‚Git å°±æä¾›äº†hooksè¿™æ ·çš„æœºåˆ¶ã€‚ æˆ‘ä»¬åœ¨å“ªèƒ½æ‰¾åˆ°hookså‘¢ï¼Ÿåœ¨åˆå§‹åŒ–ä»£ç ä»“åº“git initæ—¶ï¼ŒGit ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª.git/hooksç›®å½•ï¼Œé‡Œé¢å­˜æ”¾äº†æ‰€æœ‰çš„é’©å­ã€‚å› ä¸º.gitæ˜¯éšè—ç›®å½•ï¼Œæ˜¾ç¤ºéšè—ç›®å½•åå°±å¯ä»¥æ‰¾åˆ°hooksè¿™ä¸ªç›®å½•ã€‚ åœ¨ VSCode é‡Œä¸€èˆ¬é»˜è®¤æŠŠ.gitç›®å½•æ’é™¤æ˜¾ç¤ºï¼Œæ‰€ä»¥æ‰“å¼€é¡¹ç›®ç›®å½•æ—¶ä¸ä¼šæ˜¾ç¤ºè¯¥ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥æ”¶åˆ°åœ¨ VSCode æ˜¾ç¤º.gitç›®å½•ï¼šæ‰“å¼€è®¾ç½®ç•Œé¢ï¼Œæœç´¢excludeæ‰¾åˆ°å›¾ä¸­çš„è®¾ç½®ï¼Œå°†.gitç›®å½•ä»æ’é™¤åˆ—è¡¨ä¸­ç§»é™¤ï¼Œå³å¯åœ¨ VSCode ä¸­æ˜¾ç¤º.gitç›®å½•ã€‚ ç°åœ¨æˆ‘ä»¬æ‰¾åˆ°äº†hooksï¼Œè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿæ‰€æœ‰é»˜è®¤çš„hookséƒ½æ˜¯ä»¥.sampleä¸ºåç¼€ï¼Œåªéœ€è¦ç§»é™¤.sampleå³å¯æ¿€æ´»hooksã€‚ éšä¾¿æ‰“å¼€ä¸€ä¸ªhooksæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå®é™…æ˜¯hookså°±æ˜¯ä¸€ä¸ªä¸ªshellè„šæœ¬ã€‚è¿™äº›è„šæœ¬ä¼šåœ¨ç‰¹å®šçš„åŠ¨ä½œå‘ç”Ÿæ—¶è¢«æ‰§è¡Œã€‚ç¤ºèŒƒçš„è¿™äº›hookséƒ½æ˜¯shellè„šæœ¬ï¼Œå®é™…ä¸Šåªè¦æ˜¯æ–‡ä»¶åæ­£ç¡®çš„å¯æ‰§è¡Œè„šæœ¬éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¦‚å°†pre-pushå†…å®¹æ”¹ä¸ºpython, Rubyç­‰ç­‰è„šæœ¬éƒ½å¯ä»¥ã€‚ å¦‚ä½•ä½¿ç”¨ä¸€ä¸ª hooksä»¥pre-commitè¿™ä¸ªhooksä¸ºä¾‹ï¼Œæ¥ç¤ºèŒƒä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Git hooksã€‚ æ‰“å¼€.git/hooks/pre-commit.sampleï¼Œè¿™ä¸ªhooksçš„å¤§ä½“åŠŸèƒ½æ˜¯æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦åŒ…å«éASCIIå­—ç¬¦ï¼Œå¦‚æœåŒ…å«ï¼Œåˆ™æ— æ³•æ‰§è¡Œcommitæ“ä½œï¼Œå¹¶æç¤ºç”¨æˆ·ä¿®æ”¹æ–‡ä»¶åã€‚ åˆ é™¤pre-commit.sampleçš„åç¼€ 1âœ mv .git/hooks/pre-commit.sample .git/hooks/pre-commit æ·»åŠ ä¸€ä¸ªæœ‰æ±‰å­—çš„æ–‡ä»¶åï¼Œå¦‚æµ‹è¯•.md 1âœ touch æµ‹è¯•.md å°†æ–°æ–‡ä»¶æäº¤ 1234567891011âœ git add æµ‹è¯•.mdâœ git commit -m &quot;æµ‹è¯•&quot;Error: Attempt to add a non-ASCII file name.This can cause problems if you want to work with people on other platforms.To be portable it is advisable to rename the file.If you know what you are doing you can disable this check using:git config hooks.allownonascii true å¦‚æœæ— æ³•æ‰§è¡Œpre-commitå¯èƒ½æœªè¢«èµ‹äºˆæ‰§è¡Œæƒé™ï¼Œä¿®æ”¹ä¸€ä¸‹æƒé™å³å¯ï¼šchmod +x .git/hooks/pre-commit æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨è¿›è¡Œcommitæ“ä½œæ—¶è¢«ä¸­æ–­äº†ï¼Œä¼šæç¤ºç”¨æˆ·ä¿®æ”¹æ–‡ä»¶åã€‚å…¶ä»–çš„hooksç”¨æ³•ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰åœ¨ä»€ä¹ˆæ—¶å€™å¯ä»¥pushï¼Œä»€ä¹ˆæ—¶å€™å¯ä»¥rebaseç­‰ç­‰ã€‚ hooksé€šå¸¸ä¼šè¢«ç”¨æ¥åšæäº¤ä»£ç å‰çš„ä¸€ä¸ªæ£€æŸ¥ï¼Œæ¯”å¦‚é£æ ¼æ˜¯å¦ç»Ÿä¸€ï¼Œç¼–è¯‘æ˜¯å¦é€šè¿‡ç­‰ç­‰ã€‚å¦‚æœå›¢é˜Ÿåˆä½œæ—¶ï¼Œè¿™æ ·çš„æ£€æŸ¥æœ€å¥½èƒ½å¤Ÿä¸æˆå‘˜ä¿æŒä¸€è‡´ï¼Œä½†æ˜¯hooksæ‰€åœ¨çš„.gitç›®å½•æ˜¯ä¸ä¼šè¢«Gitè‡ªå·±ç‰ˆæœ¬ç®¡ç†çš„ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒä¸èƒ½æ¨é€åˆ°è¿œç«¯ä¸æˆå‘˜å…±äº«ã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ å¦‚ä½•åŒæ­¥hooksæ–‡ä»¶æ–¹æ¡ˆä¸€ï¼šä¸æºç æ”¾åœ¨ä¸€èµ·ä»£ç ä»“åº“ä¸­æ–°å»ºä¸€ä¸ªhooksç›®å½•ï¼Œå°†è¯¥ç›®å½•åŒæ­¥åˆ°è¿œç¨‹ã€‚å…¶ä»–æˆå‘˜ä¸‹è½½ä»£ç æ—¶ä¹Ÿä¼šä¸‹è½½hooksç›®å½•ï¼Œé€šè¿‡è„šæœ¬çš„æ–¹å¼å°†hooksç›®å½•è¦†ç›–æœ¬åœ°çš„.git/hooksç›®å½•ã€‚ 12345#!/bin/bashcp -r ./hooks/ .git/hooks/chmod +x -R .git/hooksecho &#x27;Hooks sync to remote success!&#x27;exit 0 æ–¹æ¡ˆäºŒï¼šä½¿ç”¨pre-commitæ¡†æ¶pre_commit æ˜¯ pre-commit åŒåçš„å¼€æºåº”ç”¨ï¼Œä½¿ç”¨pre-commitï¼Œä»£ç ä»“åº“é‡Œåªéœ€è¦æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨pre_commitç”Ÿæˆç»Ÿä¸€çš„hooksã€‚ pre-commitéšç€å‘å±•ï¼Œå·²ç»ä¸å•å•åªèƒ½ç”¨äºgit hooksçš„pre-commité˜¶æ®µï¼Œè€Œæ˜¯èƒ½ä½œç”¨äºæ‰€æœ‰git hooksçš„æ‰€æœ‰é˜¶æ®µï¼Œå¦‚ä¸Šé¢è¯´çš„prepare-commit-msg, commit-msg, post-commiç­‰ã€‚ å®‰è£…pre-commit 1pip install pre-commit åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶ .pre-commit-config.yaml 1touch .pre-commit-config.yaml é¦–å…ˆäº†è§£é…ç½®çš„æ ¼å¼ é¡¶å±‚æœ‰ä¸€ä¸ªå‚æ•°åä¸º repos repos ä¸­æ¯ä¸ªå…ƒç´ ä¸º repo ï¼Œä»£è¡¨ä¸€ä¸ªä»£ç åº“ï¼Œä¸€èˆ¬æ˜¯githubæˆ–gitlabé“¾æ¥ã€‚åœ¨ä½¿ç”¨æ—¶ä¼šä»å¯¹åº”åœ°å€ä¸‹è½½ï¼Œå¦‚æœå‡ºç°ä¸‹è½½æ…¢çš„æƒ…å†µï¼Œå¯ä»¥åœ¨giteeæœç´¢æ˜¯å¦æœ‰ç›¸å…³é•œåƒã€‚ æ¯ä¸ª repo ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª hook ï¼Œæ¯ä¸ª hook ä»£è¡¨ä¸€ä¸ªä»»åŠ¡ã€‚ æ¯ä¸ªä»»åŠ¡é‡Œå¯ç†è§£ä¸ºä¸€ä¸ªå‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œä¾‹å¦‚flake8/yapf/blackã€‚ pre_commitå®˜æ–¹æä¾›äº†å„ç§é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ã€‚æ¯”å¦‚æˆ‘éœ€è¦ä¸€ä¸ªæ ¼å¼åŒ–Cè¯­è¨€ä»£ç çš„é…ç½®ï¼Œé€‰æ‹©äº†mirrors-clang-formatï¼Œè¿˜é€‰äº†ä¸€ä¸ªç”¨æ¥åˆ é™¤è¡Œå°¾ç©ºæ ¼çš„ã€‚ 1234567891011repos:- repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.3.0 hooks: - id: trailing-whitespace- repo: https://github.com/pre-commit/mirrors-clang-format rev: v14.0.6 hooks: - id: clang-format types_or: [c] å‚æ•°çš„å«ä¹‰å¯ä»¥å‚è€ƒpre-commitçš„æ–‡æ¡£ã€‚æ¯ä¸ªidå¯¹åº”çš„å…¶å®éƒ½æ˜¯ä¸€ä¸ªç¨‹åºï¼Œä¸ºäº†ä¿è¯éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œè¿˜éœ€è¦å®‰è£…è¿™äº›ç¨‹åºã€‚ä¸€èˆ¬åœ¨ä»“åº“çš„READMEä¸­éƒ½ä¼šæœ‰æç¤ºå¦‚ä½•å®‰è£…ã€‚ æ ¹æ®é…ç½®æ–‡ä»¶å®‰è£…hooks åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š 1pre-commit install åœ¨æ‰§è¡Œgit commitå‘½ä»¤æ—¶å°†ä¼šè‡ªåŠ¨æ£€æŸ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œpre-commitä¼šä»ä»“åº“é‡Œä¸‹è½½ä»£ç ï¼Œç„¶åæ ¹æ®é‡Œé¢çš„é…ç½®æ‰§è¡Œç›¸åº”çš„è„šæœ¬ã€‚å®Œæˆå„ç§æ£€æŸ¥ã€‚ å¸¸ç”¨å‘½ä»¤12345678# æ‰‹åŠ¨å¯¹æ‰€æœ‰çš„æ–‡ä»¶æ‰§è¡Œ hooksï¼Œæ–°å¢ hook çš„æ—¶å€™å¯ä»¥æ‰§è¡Œï¼Œä½¿å¾—ä»£ç å‡ç¬¦åˆè§„èŒƒã€‚ç›´æ¥æ‰§è¡Œè¯¥æŒ‡ä»¤åˆ™æ— éœ€ç­‰åˆ° pre-commit é˜¶æ®µå†è§¦å‘ hookspre-commit run --all-files# æ‰§è¡Œç‰¹å®š hookspre-commit run &lt;hook_id&gt;# å°†æ‰€æœ‰çš„hookæ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬/tagpre-commit autoupdate# æŒ‡å®šæ›´æ–° repopre-commit autoupdate --repo https://github.com/pre-commit/mirrors-clang-format å‚è€ƒèµ„æ–™ C++ é¡¹ç›®ä¸­ä½¿ç”¨ Pre-commit ååŠ©å®ç°ä»£ç è§„èŒƒæ£€æŸ¥_æ¸…æ¬¢å®ˆæŠ¤è€…çš„åšå®¢-CSDN åšå®¢ git push ä¹‹å‰è‡ªåŠ¨ç¼–è¯‘éªŒè¯ - ç®€ä¹¦ ä½¿ç”¨ pre-commit å®ç°ä»£ç æ£€æŸ¥_æ¸…æ¬¢å®ˆæŠ¤è€…çš„åšå®¢-CSDN åšå®¢ pre-commit Git åŸºæœ¬åŸç†ä»‹ç» (32)â€”â€”git hook å’Œ python_å“”å“©å“”å“©_bilibili","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"CPU ç¼“å­˜ä¸€è‡´æ€§ MESI åè®®","slug":"CPUç¼“å­˜ä¸€è‡´æ€§MESIåè®®","date":"2022-05-29T07:04:59.000Z","updated":"2022-10-15T03:14:29.096Z","comments":true,"path":"2022/05/29/CPUç¼“å­˜ä¸€è‡´æ€§MESIåè®®/","link":"","permalink":"http://example.com/2022/05/29/CPU%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7MESI%E5%8D%8F%E8%AE%AE/","excerpt":"","text":"ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ä¸€è‡´ç›®å‰ä¸»æµç”µè„‘çš„ CPU éƒ½æ˜¯å¤šæ ¸å¿ƒçš„ï¼Œå¤šæ ¸å¿ƒçš„æœ‰ç‚¹å°±æ˜¯åœ¨ä¸èƒ½æå‡ CPU ä¸»é¢‘åï¼Œé€šè¿‡å¢åŠ æ ¸å¿ƒæ¥æå‡ CPU ååé‡ã€‚æ¯ä¸ªæ ¸å¿ƒéƒ½æœ‰è‡ªå·±çš„ L1 Cache å’Œ L2 Cacheï¼Œåªæ˜¯å…±ç”¨ L3 Cache å’Œä¸»å†…å­˜ã€‚æ¯ä¸ªæ ¸å¿ƒæ“ä½œæ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªæ ¸å¿ƒçš„ Cache å°±ä¸æ˜¯åŒæ­¥æ›´æ–°çš„ï¼Œè¿™æ ·å°±ä¼šå¸¦æ¥ç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰çš„é—®é¢˜ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚å›¾ï¼š æœ‰ 2 ä¸ª CPUï¼Œä¸»å†…å­˜é‡Œæœ‰ä¸ªå˜é‡x=0ã€‚CPU A ä¸­æœ‰ä¸ªéœ€è¦å°†å˜é‡xåŠ 1ã€‚CPU A å°±å°†å˜é‡xåŠ è½½åˆ°è‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œç„¶åå°†å˜é‡xåŠ 1ã€‚å› ä¸ºæ­¤æ—¶ CPU A è¿˜æœªå°†ç¼“å­˜æ•°æ®å†™å›ä¸»å†…å­˜ï¼ŒCPU B å†è¯»å–å˜é‡xæ—¶ï¼Œå˜é‡xçš„å€¼ä¾ç„¶æ˜¯0ã€‚ è¿™é‡Œçš„é—®é¢˜å°±æ˜¯æ‰€è°“çš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œå› ä¸º CPU A çš„ç¼“å­˜ä¸ CPU B çš„ç¼“å­˜æ˜¯ä¸ä¸€è‡´çš„ã€‚ å¦‚ä½•è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜é€šè¿‡åœ¨æ€»çº¿åŠ  LOCK é”çš„æ–¹å¼åœ¨é”ä½æ€»çº¿ä¸ŠåŠ ä¸€ä¸ª LOCK æ ‡è¯†ï¼ŒCPU A è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œé”ä½æ€»çº¿ï¼Œå…¶ä»– CPU æ­¤æ—¶æ— æ³•è¿›è¡Œå†…å­˜è¯»å†™æ“ä½œï¼Œåªæœ‰ç­‰è§£é”äº†æ‰èƒ½è¿›è¡Œæ“ä½œã€‚ è¯¥æ–¹å¼å› ä¸ºé”ä½äº†æ•´ä¸ªæ€»çº¿ï¼Œæ‰€ä»¥æ•ˆç‡ä½ã€‚ ç¼“å­˜ä¸€è‡´æ€§åè®® MESIè¯¥æ–¹å¼å¯¹å•ä¸ªç¼“å­˜è¡Œçš„æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä¸ä¼šå½±å“åˆ°å†…å­˜å…¶ä»–æ•°æ®çš„è¯»å†™ã€‚ åœ¨å­¦ä¹  MESI åè®®ä¹‹å‰ï¼Œç®€å•äº†è§£ä¸€ä¸‹æ€»çº¿å—…æ¢æœºåˆ¶ï¼ˆBus Snoopingï¼‰ã€‚è¦å¯¹è‡ªå·±çš„ç¼“å­˜åŠ é”ï¼Œéœ€è¦é€šçŸ¥å…¶ä»– CPUï¼Œå¤šä¸ª CPU æ ¸å¿ƒä¹‹é—´çš„æ•°æ®ä¼ æ’­é—®é¢˜ã€‚æœ€å¸¸è§çš„ä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯æ€»çº¿å—…æ¢ã€‚ è¿™ä¸ªç­–ç•¥ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æŠŠæ‰€æœ‰çš„è¯»å†™è¯·æ±‚éƒ½é€šè¿‡æ€»çº¿å¹¿æ’­ç»™æ‰€æœ‰çš„ CPU æ ¸å¿ƒï¼Œç„¶åè®©å„ä¸ªæ ¸å¿ƒå»â€œå—…æ¢â€è¿™äº›è¯·æ±‚ï¼Œå†æ ¹æ®æœ¬åœ°çš„æƒ…å†µè¿›è¡Œå“åº”ã€‚MESI å°±æ˜¯åŸºäºæ€»çº¿å—…æ¢æœºåˆ¶çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚ MESI åè®®çš„ç”±æ¥æ˜¯å¯¹ Cache Line çš„å››ä¸ªä¸åŒçš„æ ‡è®°ï¼Œåˆ†åˆ«æ˜¯ï¼š çŠ¶æ€ çŠ¶æ€ æè¿° ç›‘å¬ä»»åŠ¡ Modified å·²ä¿®æ”¹ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®è¢«ä¿®æ”¹äº†ï¼Œå’Œå†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬ Cache ä¸­ Cache Line å¿…é¡»æ—¶åˆ»ç›‘å¬æ‰€æœ‰è¯•å›¾è¯»è¯¥ Cache Line ç›¸å¯¹äºä¸»å­˜çš„æ“ä½œï¼Œè¿™ç§æ“ä½œå¿…é¡»åœ¨ç¼“å­˜å°†è¯¥ Cache Line å†™å›ä¸»å­˜å¹¶å°†çŠ¶æ€æ”¹ä¸º S çŠ¶æ€ä¹‹å‰ï¼Œè¢«å»¶è¿Ÿæ‰§è¡Œ Exclusive ç‹¬äº«ï¼Œäº’æ–¥ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬ Cache Cache Line å¿…é¡»ç›‘å¬å…¶ä»–ç¼“å­˜è¯»ä¸»å­˜ä¸­è¯¥ Cache Line çš„æ“ä½œï¼Œä¸€æ—¦æœ‰è¿™ç§æ“ä½œï¼Œè¯¥ Cache Line éœ€è¦æ”¹ä¸º S çŠ¶æ€ Shared å…±äº«çš„ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œæ•°æ®å­˜åœ¨äºå¾ˆå¤šä¸ª Cache ä¸­ Cache Line å¿…é¡»ç›‘å¬å…¶ä»– Cache Line ä½¿è¯¥ Cache Line æ— æ•ˆæˆ–è€…ç‹¬äº«è¯¥ Cache Line çš„è¯·æ±‚ï¼Œå¹¶å°† Cache Line æ”¹ä¸º I çŠ¶æ€ Invalid æ— æ•ˆçš„ è¯¥ Cache Line æ— æ•ˆ æ—  æ•´ä¸ª MESI çš„çŠ¶æ€ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºæ¥è¡¨ç¤ºå®ƒçš„çŠ¶æ€æµè½¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸åŒçŠ¶æ€è§¦å‘çš„äº‹ä»¶æ“ä½œï¼Œå¯èƒ½æ¥è‡ªäºå½“å‰ CPU æ ¸å¿ƒï¼Œä¹Ÿå¯èƒ½æ¥è‡ªæ€»çº¿é‡Œå…¶ä»– CPU æ ¸å¿ƒå¹¿æ’­å‡ºæ¥çš„ä¿¡å·ã€‚æˆ‘æŠŠå„ä¸ªçŠ¶æ€ä¹‹é—´çš„æµè½¬ç”¨è¡¨æ ¼æ€»ç»“äº†ä¸€ä¸‹ï¼š å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ M Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ M M Local Write ä¿®æ”¹ cache æ•°æ®ï¼ŒçŠ¶æ€ä¸å˜ M M Remote Read è¿™è¡Œæ•°æ®è¢«å†™åˆ°å†…å­˜ä¸­ï¼Œä½¿å…¶ä»–æ ¸èƒ½ä½¿ç”¨åˆ°æœ€æ–°æ•°æ®ï¼ŒçŠ¶æ€å˜ä¸º S S M Remote Write è¿™è¡Œæ•°æ®è¢«å†™å…¥å†…å­˜ä¸­ï¼Œå…¶ä»–æ ¸å¯ä»¥è·å–åˆ°æœ€æ–°æ•°æ®ï¼Œç”±äºå…¶ä»– CPU ä¿®æ”¹è¯¥æ¡æ•°æ®ï¼Œåˆ™æœ¬åœ° Cache å˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ E Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ E E Local Write ä¿®æ”¹æ•°æ®ï¼ŒçŠ¶æ€æ”¹ä¸º M M E Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼Œå˜ä¸º S S E Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ S Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ S S Local Write ä¿®æ”¹æ•°æ®ï¼ŒçŠ¶æ€æ”¹ä¸º Mï¼Œå…¶ä»– CPU çš„ Cache Line çŠ¶æ€æ”¹ä¸º I M S Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼ŒçŠ¶æ€ä¸å˜ S S Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ I Local Read 1. å¦‚æœå…¶ä»– CPU æ²¡æœ‰è¿™ä»½æ•°æ®ï¼Œç›´æ¥ä»å†…å­˜ä¸­åŠ è½½æ•°æ®ï¼ŒçŠ¶æ€å˜ä¸º Eï¼› 2. å¦‚æœå…¶ä»– CPU æœ‰è¿™ä¸ªæ•°æ®ï¼Œä¸” Cache Line çŠ¶æ€ä¸º Mï¼Œåˆ™å…ˆæŠŠ Cache Line ä¸­çš„å†…å®¹å†™å›åˆ°ä¸»å­˜ã€‚æœ¬åœ° Cache å†ä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œè¿™æ—¶ä¸¤ä¸ª Cache Line çš„çŠ¶æ€éƒ½å˜ä¸º Sï¼›3. å¦‚æœå…¶ä»– Cache Line æœ‰è¿™ä»½æ•°æ®ï¼Œå¹¶ä¸”çŠ¶æ€ä¸º S æˆ–è€… Eï¼Œåˆ™æœ¬åœ° Cache Line ä»ä¸»å­˜è¯»å–æ•°æ®ï¼Œå¹¶å°†è¿™äº› Cache Line çŠ¶æ€æ”¹ä¸º S E æˆ–è€… S I Local Write 1. å…ˆä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œå¦‚æœå…¶ä»– Cache Line ä¸­æœ‰è¿™ä»½æ•°æ®ï¼Œä¸”çŠ¶æ€ä¸º Mï¼Œåˆ™ç°å°†æ•°æ®æ›´æ–°åˆ°ä¸»å­˜å†è¯»å–ï¼Œå°† Cache Line çŠ¶æ€æ”¹ä¸º Mï¼› 2. å¦‚æœå…¶ä»– Cache Line æœ‰è¿™ä»½æ•°æ®ï¼Œä¸”çŠ¶æ€ä¸º E æˆ–è€… Sï¼Œåˆ™å…¶ä»– Cache Line çŠ¶æ€æ”¹ä¸º I M I Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼ŒçŠ¶æ€ä¸å˜ S I Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I","categories":[],"tags":[{"name":"é€šä¿¡åè®®","slug":"é€šä¿¡åè®®","permalink":"http://example.com/tags/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/"},{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"},{"name":"CPU","slug":"CPU","permalink":"http://example.com/tags/CPU/"},{"name":"MESI","slug":"MESI","permalink":"http://example.com/tags/MESI/"}]},{"title":"VSCode è®¾ç½®ç»ˆç«¯ä¸º Gitbash","slug":"VSCodeè®¾ç½®ç»ˆç«¯ä¸ºGitbash","date":"2022-05-24T06:42:48.000Z","updated":"2022-10-15T03:14:29.601Z","comments":true,"path":"2022/05/24/VSCodeè®¾ç½®ç»ˆç«¯ä¸ºGitbash/","link":"","permalink":"http://example.com/2022/05/24/VSCode%E8%AE%BE%E7%BD%AE%E7%BB%88%E7%AB%AF%E4%B8%BAGitbash/","excerpt":"","text":"è®¾ç½®ç»ˆç«¯ä¸º Gitbashç”¨æƒ¯äº† Linux ç»ˆç«¯çš„å‘½ä»¤ï¼ŒWindows çš„ shell çœŸçš„å¤ªä¸é¡ºæ‰‹äº†ï¼Œä½†æ˜¯ Gitbash å¾ˆå¤šå‘½ä»¤ç›¸ä¼¼ï¼Œå¯ä»¥å°†é»˜è®¤çš„ shell æ¢æˆ Gitbashã€‚ æ‰“å¼€settings.jsoné…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ 12345678910111213&quot;terminal.integrated.profiles.windows&quot;: &#123; &quot;PowerShell -NoProfile&quot;: &#123; &quot;source&quot;: &quot;PowerShell&quot;, &quot;args&quot;: [ &quot;-NoProfile&quot; ] &#125;, &quot;Git-Bash&quot;: &#123; &quot;path&quot;: &quot;D:\\\\Software\\\\Git\\\\bin\\\\bash.exe&quot;, //binè·¯å¾„ä¸‹çš„bashï¼Œä¸æ˜¯git-bash.exeã€‚å¦åˆ™ä¼šæ‰“å¼€å¤–éƒ¨çª—å£ &quot;args&quot;: [] &#125; &#125;,&quot;terminal.integrated.defaultProfile.windows&quot;: &quot;Git-Bash&quot;, ä¿®æ”¹ç»ˆç«¯é…è‰²æ‰“å¼€Base16 Terminal Colors for Visual Studio Codeï¼Œé€‰æ‹©ä¸€æ¬¾é…ç½®å¤åˆ¶ æ‰“å¼€ VScodesettings.jsonï¼Œæ›¿æ¢å¦‚ä¸‹ 12345678910111213141516171819202122&quot;workbench.colorCustomizations&quot;: &#123; &quot;terminal.background&quot;:&quot;#1C2023&quot;, &quot;terminal.foreground&quot;:&quot;#C7CCD1&quot;, &quot;terminalCursor.background&quot;:&quot;#C7CCD1&quot;, &quot;terminalCursor.foreground&quot;:&quot;#C7CCD1&quot;, &quot;terminal.ansiBlack&quot;:&quot;#1C2023&quot;, &quot;terminal.ansiBlue&quot;:&quot;#AE95C7&quot;, &quot;terminal.ansiBrightBlack&quot;:&quot;#747C84&quot;, &quot;terminal.ansiBrightBlue&quot;:&quot;#AE95C7&quot;, &quot;terminal.ansiBrightCyan&quot;:&quot;#95AEC7&quot;, &quot;terminal.ansiBrightGreen&quot;:&quot;#95C7AE&quot;, &quot;terminal.ansiBrightMagenta&quot;:&quot;#C795AE&quot;, &quot;terminal.ansiBrightRed&quot;:&quot;#C7AE95&quot;, &quot;terminal.ansiBrightWhite&quot;:&quot;#F3F4F5&quot;, &quot;terminal.ansiBrightYellow&quot;:&quot;#AEC795&quot;, &quot;terminal.ansiCyan&quot;:&quot;#95AEC7&quot;, &quot;terminal.ansiGreen&quot;:&quot;#95C7AE&quot;, &quot;terminal.ansiMagenta&quot;:&quot;#C795AE&quot;, &quot;terminal.ansiRed&quot;:&quot;#C7AE95&quot;, &quot;terminal.ansiWhite&quot;:&quot;#C7CCD1&quot;, &quot;terminal.ansiYellow&quot;:&quot;#AEC795&quot; &#125;, ä¿®æ”¹åæ•ˆæœ ä¿®æ”¹ç»ˆç«¯å­—ä½“æ–¹æ³•ä¸€ï¼šæ‰“å¼€ VScodesettings.jsonï¼ŒåŠ ä¸Šä¸‹é¢è¿™ä¸ªé…ç½®ï¼Œå­—ä½“æ”¹æˆè‡ªå·±ç”µè„‘ä¸Šçš„å­—ä½“ 12&quot;terminal.integrated.fontFamily&quot;: &quot;JetBrains Mono&quot;, æ–¹æ³•äºŒï¼šæ‰“å¼€è®¾ç½®é¡µé¢ï¼Œæœç´¢terminal font ä¿®æ”¹åçš„æ•ˆæœ è§£å†³ä¸­æ–‡ä¹±ç 1git config --global core.quotepath false","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"},{"name":"Gitbash","slug":"Gitbash","permalink":"http://example.com/tags/Gitbash/"}]},{"title":"CPU äº²å’Œæ€§ä¸ä¸­æ–­äº²å’Œæ€§","slug":"CPUäº²å’Œæ€§ä¸ä¸­æ–­äº²å’Œæ€§","date":"2022-05-23T14:38:14.000Z","updated":"2022-10-15T03:14:29.087Z","comments":true,"path":"2022/05/23/CPUäº²å’Œæ€§ä¸ä¸­æ–­äº²å’Œæ€§/","link":"","permalink":"http://example.com/2022/05/23/CPU%E4%BA%B2%E5%92%8C%E6%80%A7%E4%B8%8E%E4%B8%AD%E6%96%AD%E4%BA%B2%E5%92%8C%E6%80%A7/","excerpt":"","text":"é¢„å¤‡çŸ¥è¯†è¶…çº¿ç¨‹æŠ€æœ¯ (Hyper-Threading)ï¼šå°±æ˜¯åˆ©ç”¨ç‰¹æ®Šçš„ç¡¬ä»¶æŒ‡ä»¤ï¼ŒæŠŠä¸¤ä¸ªé€»è¾‘å†…æ ¸ (CPU core) æ¨¡æ‹Ÿæˆä¸¤ä¸ªç‰©ç†èŠ¯ç‰‡ï¼Œè®©å•ä¸ªå¤„ç†å™¨éƒ½èƒ½ä½¿ç”¨çº¿ç¨‹çº§å¹¶è¡Œè®¡ç®—ï¼Œè¿›è€Œå…¼å®¹å¤šçº¿ç¨‹æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶ï¼Œå‡å°‘äº† CPU çš„é—²ç½®æ—¶é—´ï¼Œæé«˜çš„ CPU çš„è¿è¡Œæ•ˆç‡ã€‚ æˆ‘ä»¬å¸¸å¬åˆ°çš„åŒæ ¸å››çº¿ç¨‹/å››æ ¸å…«çº¿ç¨‹æŒ‡çš„å°±æ˜¯æ”¯æŒè¶…çº¿ç¨‹æŠ€æœ¯çš„CPU. ç‰©ç† CPUï¼šæœºå™¨ä¸Šå®‰è£…çš„å®é™… CPU, æ¯”å¦‚è¯´ä½ çš„ä¸»æ¿ä¸Šå®‰è£…äº†ä¸€ä¸ª 8 æ ¸ CPUï¼Œé‚£ä¹ˆç‰©ç† CPU ä¸ªæ•°å°±æ˜¯ 1 ä¸ªï¼Œæ‰€ä»¥ç‰©ç† CPU ä¸ªæ•°å°±æ˜¯ä¸»æ¿ä¸Šå®‰è£…çš„ CPU ä¸ªæ•°ã€‚ é€»è¾‘ CPUï¼šä¸€èˆ¬æƒ…å†µï¼Œæˆ‘ä»¬è®¤ä¸ºä¸€é¢— CPU å¯ä»¥æœ‰å¤šæ ¸ï¼ŒåŠ ä¸Š Intel çš„è¶…çº¿ç¨‹æŠ€æœ¯ (HT), å¯ä»¥åœ¨é€»è¾‘ä¸Šå†åˆ†ä¸€å€æ•°é‡çš„ CPU core å‡ºæ¥ï¼› 12é€»è¾‘CPUæ•°é‡ = ç‰©ç†CPUæ•°é‡ x CPU cores x 2(å¦‚æœæ”¯æŒå¹¶å¼€å¯HT) //å‰ææ˜¯CPUçš„å‹å·ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´åªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„åŠ èµ·æ¥ï¼Œä¸ç”¨ç›´æ¥ä¹˜ä»¥ç‰©ç†CPUæ•°é‡//æ¯”å¦‚ä½ çš„ç”µè„‘å®‰è£…äº†ä¸€å—4æ ¸CPUï¼Œå¹¶ä¸”æ”¯æŒä¸”å¼€å¯äº†è¶…çº¿ç¨‹ï¼ˆHTï¼‰æŠ€æœ¯ï¼Œé‚£ä¹ˆé€»è¾‘CPUæ•°é‡ = 1 Ã— 4 Ã— 2 = 8 Linux ä¸‹æŸ¥çœ‹ CPU ç›¸å…³ä¿¡æ¯, CPU çš„ä¿¡æ¯ä¸»è¦éƒ½åœ¨/proc/cupinfoä¸­ã€‚ 123456789101112131415161718# æŸ¥çœ‹ç‰©ç†CPUä¸ªæ•°âœ ~ cat /proc/cpuinfo|grep &quot;physical id&quot;|sort -u|wc -l32# æŸ¥çœ‹æ¯ä¸ªç‰©ç†CPUä¸­coreçš„ä¸ªæ•°(å³æ ¸æ•°)âœ ~ cat /proc/cpuinfo|grep &quot;cpu cores&quot;|uniq1# æˆ–è€…âœ cat /proc/cpuinfo | grep &#x27;process&#x27; | sort | uniq | wc -l1# æŸ¥çœ‹é€»è¾‘CPUçš„ä¸ªæ•°âœ ~ cat /proc/cpuinfo|grep &quot;processor&quot;|wc -l32# æŸ¥çœ‹CPUçš„åç§°å‹å·âœ ~ cat /proc/cpuinfo|grep &quot;name&quot;|cut -f2 -d:|uniqIntel Xeon Processor (Skylake, IBRS) Linux æŸ¥çœ‹æŸä¸ªè¿›ç¨‹è¿è¡Œåœ¨å“ªä¸ªé€»è¾‘ CPU ä¸Š 1ps -eo pid,args,psr pidï¼šè¿›ç¨‹ ID argsï¼šè¯¥è¿›ç¨‹æ‰§è¡Œæ—¶ä¼ å…¥çš„å‘½ä»¤è¡Œå‚æ•° psrï¼šåˆ†é…ç»™è¿›ç¨‹çš„é€»è¾‘ CPU ä¾‹å­ï¼š 12345678910111213âœ ps -eo pid,args,psr | grep firefox20118 /usr/lib/firefox/firefox -n 1320208 /usr/lib/firefox/firefox -c 920266 /usr/lib/firefox/firefox -c 2920329 /usr/lib/firefox/firefox -c 2420499 /usr/lib/firefox/firefox -c 720565 /usr/lib/firefox/firefox -c 1520596 /usr/lib/firefox/firefox -c 2420760 /usr/lib/firefox/firefox -c 1822110 /usr/lib/firefox/firefox -c 2725857 /usr/lib/firefox/firefox -c 2826347 /usr/lib/firefox/firefox -c 1926899 /usr/lib/firefox/firefox -c 29 Linux æŸ¥çœ‹çº¿ç¨‹çš„ TID TID å°±æ˜¯ Thread IDï¼Œä»–å’Œ POSIX ä¸­pthread_tè¡¨ç¤ºçš„çº¿ç¨‹ ID å®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚ Linux ä¸­çš„ POSIX çº¿ç¨‹åº“å®ç°çš„çº¿ç¨‹å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªè½»é‡çº§è¿›ç¨‹ (LWP),è¿™ä¸ª TID å°±æ˜¯è¿™ä¸ªçº¿ç¨‹çš„çœŸå® PID. ä½†æ˜¯åˆä¸èƒ½é€šè¿‡getpid()å‡½æ•°è·å–ï¼ŒLinux ä¸­å®šä¹‰äº†gettid()è¿™ä¸ªæ¥å£ï¼Œä½†æ˜¯é€šå¸¸éƒ½æ˜¯æœªå®ç°çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼è·å– TIDã€‚ ä½¿ç”¨ API è·å–ï¼š 123#include &lt;sys/syscall.h&gt; pid_t tid;tid = syscall(__NR_gettid); // or syscall(SYS_gettid) å‘½ä»¤è¡Œæ–¹å¼è·å–ï¼š 1234# 3ç§æ–¹æ³•(æ¨èç¬¬ä¸‰ç§æ–¹æ³•)âœ ps -efL | grep prog_nameâœ ls /proc/pid/task //æ–‡ä»¶å¤¹åå³TIDâœ ps -To &#x27;pid,lwp,psr,cmd&#x27; -p PID ä»€ä¹ˆæ˜¯ CPU äº²å’Œæ€§CPU çš„äº²å’Œæ€§ (Affinity)ï¼Œå±äºä¸€ç§è°ƒåº¦å±æ€§ï¼Œå¯ä»¥ç»‘å®šè¿›ç¨‹åˆ°æŒ‡å®š CPU ä¸Šã€‚ æ¢å¥è¯è¯´ï¼Œå°±æ˜¯è¿›ç¨‹è¦åœ¨æŒ‡å®šçš„ CPU ä¸Šå°½é‡é•¿æ—¶é—´åœ°è¿è¡Œè€Œä¸è¢«è¿ç§»åˆ°å…¶ä»–å¤„ç†å™¨ã€‚ ä¸ºä½•ä¼šå‡ºç°è¿™ç§æŠ€æœ¯ï¼Ÿåœ¨ SMP(Symmetric Multi-Processing å¯¹ç§°å¤šå¤„ç†) æ¶æ„ä¸‹ï¼Œè°ƒåº¦å™¨ä¼šè¯•å›¾ä¿æŒè¿›ç¨‹åœ¨ç›¸åŒçš„ CPU ä¸Šè¿è¡Œï¼Œè¿™æ„å‘³ç€è¿›ç¨‹é€šå¸¸ä¸ä¼šåœ¨å¤„ç†å™¨ä¹‹é—´é¢‘ç¹è¿ç§»ï¼Œè¿›ç¨‹è¿ç§»çš„é¢‘ç‡å°å°±æ„å‘³ç€äº§ç”Ÿçš„è´Ÿè½½å°ã€‚ åˆå¦‚ï¼Œæ¯ä¸ª CPU æœ¬èº«è‡ªå·±ä¼šæœ‰ç¼“å­˜ï¼Œç¼“å­˜ç€è¿›ç¨‹ä½¿ç”¨çš„ä¿¡æ¯ï¼Œè€Œè¿›ç¨‹å¯èƒ½ä¼šè¢«æ“ä½œç³»ç»Ÿè°ƒåº¦åˆ°å…¶ä»– CPU ä¸Šï¼Œå¦‚æ­¤ï¼ŒCPU ç¼“å­˜å‘½ä¸­ç‡å°±ä½äº†ï¼Œå½“ç»‘å®š CPU åï¼Œç¨‹åºå°±ä¼šä¸€ç›´åœ¨æŒ‡å®šçš„ CPU è·‘ï¼Œä¸ä¼šç”±æ“ä½œç³»ç»Ÿè°ƒåº¦åˆ°å…¶ä»– CPU ä¸Šï¼Œæ€§èƒ½æœ‰ä¸€å®šçš„æé«˜ã€‚ è½¯äº²å’Œæ€§: å°±æ˜¯è¿›ç¨‹è¦åœ¨æŒ‡å®šçš„ CPU ä¸Šå°½é‡é•¿æ—¶é—´åœ°è¿è¡Œè€Œä¸è¢«è¿ç§»åˆ°å…¶ä»–å¤„ç†å™¨ï¼ŒLinux å†…æ ¸è¿›ç¨‹è°ƒåº¦å™¨å¤©ç”Ÿå°±å…·æœ‰è¢«ç§°ä¸º è½¯ CPU äº²å’Œæ€§ï¼ˆaffinityï¼‰çš„ç‰¹æ€§ï¼Œè¿™æ„å‘³ç€è¿›ç¨‹é€šå¸¸ä¸ä¼šåœ¨å¤„ç†å™¨ä¹‹é—´é¢‘ç¹è¿ç§»ã€‚è¿™ç§çŠ¶æ€æ­£æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ï¼Œå› ä¸ºè¿›ç¨‹è¿ç§»çš„é¢‘ç‡å°å°±æ„å‘³ç€äº§ç”Ÿçš„è´Ÿè½½å°ã€‚ ç¡¬äº²å’Œæ€§ï¼šç®€å•æ¥è¯´å°±æ˜¯åˆ©ç”¨ Linux å†…æ ¸æä¾›ç»™ç”¨æˆ·çš„ APIï¼Œå¼ºè¡Œå°†è¿›ç¨‹æˆ–è€…çº¿ç¨‹ç»‘å®šåˆ°æŸä¸€ä¸ªæŒ‡å®šçš„ CPU æ ¸è¿è¡Œã€‚ CPU affinity ä½¿ç”¨ä½æ©ç  (bitmask) è¡¨ç¤ºï¼Œæ¯ä¸€ä½éƒ½è¡¨ç¤ºä¸€ä¸ª CPU, ç½® 1 è¡¨ç¤ºâ€ç»‘å®šâ€ã€‚æœ€ä½ä½è¡¨ç¤ºç¬¬ä¸€ä¸ªé€»è¾‘ CPU, æœ€é«˜ä½è¡¨ç¤ºæœ€åä¸€ä¸ªé€»è¾‘ CPUã€‚ CPU affinity å…¸å‹çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ä½¿ç”¨ 16 è¿›åˆ¶ï¼Œå…·ä½“å¦‚ä¸‹ã€‚ 12345678910110b00000000000000000000000000000001= 0x00000001è¡¨ç¤º processor #00b00000000000000000000000001010101= 0x00000055è¡¨ç¤º processors #0, #2, #4, #60b11111111111111111111111111111111= 0xFFFFFFFFè¡¨ç¤ºæ‰€æœ‰ processors (#0 through #31) ä½¿ç”¨tasksetå‘½ä»¤è®¾ç½® CPU äº²å’Œæ€§å‘½ä»¤è¡Œå½¢å¼ 12taskset [options] mask command [arg]...taskset [options] -p [mask] pid å‚æ•°è§£æ[OPTIONS]taskset çš„å¯é€‰å‚æ•° -a, --all-tasks (æ—§ç‰ˆæœ¬ä¸­æ²¡æœ‰è¿™ä¸ªé€‰é¡¹) è¿™ä¸ªé€‰é¡¹æ¶‰åŠåˆ°äº†linuxä¸­TIDçš„æ¦‚å¿µ,ä»–ä¼šå°†ä¸€ä¸ªè¿›ç¨‹ä¸­æ‰€æœ‰çš„TIDéƒ½æ‰§è¡Œä¸€æ¬¡CPUäº²å’Œæ€§è®¾ç½®. TID å°±æ˜¯ Thread IDï¼Œä»–å’Œ POSIX ä¸­ pthread_t è¡¨ç¤ºçš„çº¿ç¨‹ ID å®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚ Linuxä¸­çš„POSIXçº¿ç¨‹åº“å®ç°çš„çº¿ç¨‹å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªè¿›ç¨‹(LWP),è¿™ä¸ªTIDå°±æ˜¯è¿™ä¸ªçº¿ç¨‹çš„çœŸå®PID. -p, --pid æ“ä½œå·²å­˜åœ¨çš„PID,è€Œä¸æ˜¯åŠ è½½ä¸€ä¸ªæ–°çš„ç¨‹åº -c, --cpu-list å£°æ˜CPUçš„äº²å’ŒåŠ›ä½¿ç”¨æ•°å­—è¡¨ç¤ºè€Œä¸æ˜¯ç”¨ä½æ©ç è¡¨ç¤º. ä¾‹å¦‚ 0,5,7,9-11. -h, --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ -V, --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ mask : cpu äº²å’Œæ€§ï¼Œå½“æ²¡æœ‰-cé€‰é¡¹æ—¶ï¼Œå…¶å€¼å‰æ— è®ºæœ‰æ²¡æœ‰0xæ ‡è®°éƒ½æ˜¯ 16 è¿›åˆ¶çš„ï¼Œå½“æœ‰-cé€‰é¡¹æ—¶ï¼Œå…¶å€¼æ˜¯åè¿›åˆ¶çš„ã€‚ command : å‘½ä»¤æˆ–è€…å¯æ‰§è¡Œç¨‹åº pid : è¿›ç¨‹ IDï¼Œå¯ä»¥é€šè¿‡ps/top/pidofç­‰å‘½ä»¤è·å– [arg] command çš„å‚æ•° å®ä¾‹ä½¿ç”¨æŒ‡å®šçš„ CPU äº²å’Œæ€§è¿è¡Œä¸€ä¸ªæ–°ç¨‹åº123taskset [-c] mask command [arg]...# ä¸¾ä¾‹: ä½¿ç”¨CPU0è¿è¡Œlså‘½ä»¤æ˜¾ç¤º/etc/init.dä¸‹çš„æ‰€æœ‰å†…å®¹taskset -c 0 ls -al /etc/init.d/ æ˜¾ç¤ºå·²ç»è¿è¡Œçš„è¿›ç¨‹çš„ CPU äº²å’Œæ€§123taskset -p pid# ä¸¾ä¾‹:æŸ¥çœ‹initè¿›ç¨‹(PID=1)çš„CPUäº²å’Œæ€§taskset -p 1 æ”¹å˜å·²ç»è¿è¡Œè¿›ç¨‹çš„ CPU äº²å’Œæ€§12345taskset -p[c] mask pidä¸¾ä¾‹:æ‰“å¼€2ä¸ªç»ˆç«¯,åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯è¿è¡Œtopå‘½ä»¤,ç¬¬äºŒä¸ªç»ˆç«¯ä¸­ é¦–å…ˆè¿è¡Œ:[~]# ps -eo pid,args,psr | grep top #è·å–topå‘½ä»¤çš„pidå’Œå…¶æ‰€è¿è¡Œçš„CPUå· å…¶æ¬¡è¿è¡Œ:[~]# taskset -cp æ–°çš„CPUå· pid #æ›´æ”¹topå‘½ä»¤è¿è¡Œçš„CPUå· æœ€åè¿è¡Œ:[~]# ps -eo pid,args,psr | grep top #æŸ¥çœ‹æ˜¯å¦æ›´æ”¹æˆåŠŸ 12345678910111213âœ ~ ps -eo pid,args,psr | grep top2501 nautilus-desktop 242634 /usr/libexec/xdg-desktop-po 182658 /usr/libexec/xdg-desktop-po 1123848 top 6âœ ~ taskset -cp 10 23848pid 23848&#x27;s current affinity list: 0-31pid 23848&#x27;s new affinity list: 10âœ ~ ps -eo pid,args,psr | grep top 2501 nautilus-desktop 24 2634 /usr/libexec/xdg-desktop-po 18 2658 /usr/libexec/xdg-desktop-po 1123848 top 10 ä¸€ä¸ªç”¨æˆ·è¦è®¾å®šä¸€ä¸ªè¿›ç¨‹çš„ CPU äº²å’Œæ€§ï¼Œå¦‚æœç›®æ ‡è¿›ç¨‹æ˜¯è¯¥ç”¨æˆ·çš„ï¼Œåˆ™å¯ä»¥è®¾ç½®ï¼Œå¦‚æœæ˜¯å…¶ä»–ç”¨æˆ·çš„ï¼Œåˆ™ä¼šè®¾ç½®å¤±è´¥ï¼Œæç¤º Operation not permitted.å½“ç„¶ root ç”¨æˆ·æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è·å–ä»»æ„ä¸€ä¸ªè¿›ç¨‹çš„ CPU äº²å’Œæ€§ã€‚ ç¨‹åº API å®ç°ç¡¬äº²å’Œæ€§ä»¥ä¸‹å®éªŒä½¿ç”¨çš„æºç å¯ä»¥ä»è¿™ä¸ªä»“åº“è·å–ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›è®¾ç½®äº²å’Œæ€§æ—¶ä¼šç”¨åˆ°çš„å®å®šä¹‰åŠå‡½æ•°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576#define _GNU_SOURCE#include &lt;sched.h&gt;#include &lt;pthread.h&gt; //æ³¨æ„&lt;pthread.h&gt;åŒ…å«&lt;sched.h&gt;/* MACRO */ // å¯¹ CPU é›†åˆå§‹åŒ–ï¼Œå°†å…¶è®¾ç½®ä¸ºç©ºé›† void CPU_ZERO(cpu_set_t *set); void CPU_ZERO_S(size_t setsize, cpu_set_t *set); // å°† CPU åŠ å…¥åˆ° CPU é›†ä¸­ void CPU_SET(int cpu, cpu_set_t *set); void CPU_SET_S(int cpu, size_t setsize, cpu_set_t *set); // å°† CPU ä» CPU é›†ä¸­ç§»é™¤ void CPU_CLR(int cpu, cpu_set_t *set); void CPU_CLR_S(int cpu, size_t setsize, cpu_set_t *set); // åˆ¤æ–­ CPU æ˜¯å¦åœ¨ CPU é›†ä¸­ int CPU_ISSET(int cpu, cpu_set_t *set); int CPU_ISSET_S(int cpu, size_t setsize, cpu_set_t *set); // è®¡ç®— CPU é›†çš„å¤§å° void CPU_COUNT(cpu_set_t *set); void CPU_COUNT_S(size_t setsize, cpu_set_t *set); // The following macros perform logical operations on CPU sets /* Store the logical AND of the sets srcset1 and srcset2 in destset (which may be one of the source sets). */ void CPU_AND(cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); void CPU_AND_S(size_t setsize, cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); /* Store the logical OR of the sets srcset1 and srcset2 in destset (which may be one of the source sets). */ void CPU_OR(cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); void CPU_OR_S(size_t setsize, cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); /* Store the logical XOR of the sets srcset1 and srcset2 in destset (which may be one of the source sets). */ void CPU_XOR(cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); void CPU_XOR_S(size_t setsize, cpu_set_t *destset, cpu_set_t *srcset1, cpu_set_t *srcset2); /* Test whether two CPU set contain exactly the same CPUs. */ int CPU_EQUAL(cpu_set_t *set1, cpu_set_t *set2); int CPU_EQUAL_S(size_t setsize, cpu_set_t *set1, cpu_set_t *set2); /* The following macros are used to allocate and deallocate CPU sets: */ /* Allocate a CPU set large enough to hold CPUs in the range 0 to num_cpus-1 */ cpu_set_t *CPU_ALLOC(int num_cpus); /* Return the size in bytes of the CPU set that would be needed to hold CPUs in the range 0 to num_cpus-1. This macro provides the value that can be used for the setsize argument in the CPU_*_S() macros */ size_t CPU_ALLOC_SIZE(int num_cpus); /* Free a CPU set previously allocated by CPU_ALLOC(). */ void CPU_FREE(cpu_set_t *set);/* API */ /*è¯¥å‡½æ•°è®¾ç½®è¿›ç¨‹ä¸º pid çš„è¿™ä¸ªè¿›ç¨‹ï¼Œè®©å®ƒè¿è¡Œåœ¨ mask æ‰€è®¾å®šçš„ CPU ä¸Šã€‚å¦‚æœ pid çš„å€¼ä¸º 0, *åˆ™è¡¨ç¤ºæŒ‡å®šçš„æ˜¯å½“å‰è¿›ç¨‹ï¼Œä½¿å½“å‰è¿›ç¨‹è¿è¡Œåœ¨ mask æ‰€è®¾å®šçš„é‚£äº› CPU ä¸Š. *ç¬¬äºŒä¸ªå‚æ•° cpusetsize æ˜¯ mask æ‰€æŒ‡å®šçš„æ•°çš„é•¿åº¦ã€‚é€šå¸¸è®¾å®šä¸º sizeof(cpu_set_t). *å¦‚æœå½“å‰ pid æ‰€æŒ‡å®šçš„è¿›ç¨‹æ­¤æ—¶æ²¡æœ‰è¿è¡Œåœ¨ mask æ‰€æŒ‡å®šçš„ä»»æ„ä¸€ä¸ª CPU ä¸Šï¼Œ *åˆ™è¯¥æŒ‡å®šçš„è¿›ç¨‹ä¼šä»å…¶å®ƒ CPU ä¸Šè¿ç§»åˆ° mask çš„æŒ‡å®šçš„ä¸€ä¸ª CPU ä¸Šè¿è¡Œ. */ int sched_setaffinity(pid_t pid, size_t cpusetsize, cpu_set_t *mask); /*è¯¥å‡½æ•°è·å¾— pid æ‰€æŒ‡ç¤ºçš„è¿›ç¨‹çš„ CPU ä½æ©ç ï¼Œå¹¶å°†è¯¥æ©ç è¿”å›åˆ° mask æ‰€æŒ‡å‘çš„ç»“æ„ä¸­. *å³è·å¾—æŒ‡å®š pid å½“å‰å¯ä»¥è¿è¡Œåœ¨å“ªäº› CPU ä¸Š. *åŒæ ·ï¼Œå¦‚æœ pid çš„å€¼ä¸º 0.ä¹Ÿè¡¨ç¤ºçš„æ˜¯å½“å‰è¿›ç¨‹ */ int sched_getaffinity(pid_t pid, size_t cpusetsize, cpu_set_t *mask); /* set CPU affinity attribute in thread attributes object */ int pthread_attr_setaffinity_np(pthread_attr_t *attr, size_t cpusetsize, const cpu_set_t *cpuset); /* get CPU affinity attribute in thread attributes object */ int pthread_attr_getaffinity_np(const pthread_attr_t *attr, size_t cpusetsize, cpu_set_t *cpuset); /* set CPU affinity of a thread */ int pthread_setaffinity_np(pthread_t thread, size_t cpusetsize, const cpu_set_t *cpuset); /* get CPU affinity of a thread */ int pthread_getaffinity_np(pthread_t thread, size_t cpusetsize, cpu_set_t *cpuset); ç¨‹åºä¸­ä¼šä½¿ç”¨syscallæ¥è·å–ä¸€äº›å†…æ ¸æ•°æ®ï¼Œsyscallæ˜¯æ‰§è¡Œä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œæ ¹æ®æŒ‡å®šçš„å‚æ•°numberå’Œæ‰€æœ‰ç³»ç»Ÿè°ƒç”¨çš„æ¥å£æ¥ç¡®å®šè°ƒç”¨å“ªä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œç”¨äºç”¨æˆ·ç©ºé—´è·Ÿå†…æ ¸ä¹‹é—´çš„æ•°æ®äº¤æ¢ï¼Œä¸‹é¢æ˜¯syscallå‡½æ•°åŸå‹åŠä¸€äº›å¸¸ç”¨çš„numberï¼š 12345678910111213141516171819202122232425262728//syscall - indirect system call#define _GNU_SOURCE /* See feature_test_macros(7) */#include &lt;unistd.h&gt;#include &lt;sys/syscall.h&gt; /* For SYS_xxx definitions */int syscall(int number, ...);// æŸ¥çœ‹ç¼“å­˜å†…å­˜é¡µé¢çš„å¤§å°ï¼›æ‰“å°ç”¨%ld é•¿æ•´å‹ã€‚sysconf(_SC_PAGESIZE); // æŸ¥çœ‹å†…å­˜çš„æ€»é¡µæ•°ï¼›æ‰“å°ç”¨%ld é•¿æ•´å‹ã€‚sysconf(_SC_PHYS_PAGES) // æŸ¥çœ‹å¯ä»¥åˆ©ç”¨çš„æ€»é¡µæ•°ï¼›æ‰“å°ç”¨%ld é•¿æ•´å‹ã€‚sysconf(_SC_AVPHYS_PAGES) // æŸ¥çœ‹ CPU çš„ä¸ªæ•°ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚sysconf(_SC_NPROCESSORS_CONF) // æŸ¥çœ‹åœ¨ä½¿ç”¨çš„ CPU ä¸ªæ•°ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚sysconf(_SC_NPROCESSORS_ONLN) // è®¡ç®—å†…å­˜å¤§å°ã€‚(long long)sysconf(_SC_PAGESIZE) * (long long)sysconf(_SC_PHYS_PAGES) // æŸ¥çœ‹æœ€å¤§ç™»å½•åé•¿åº¦ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚sysconf(_SC_LOGIN_NAME_MAX) // æŸ¥çœ‹æœ€å¤§ä¸»æœºé•¿åº¦ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚sysconf(_SC_HOST_NAME_MAX) // æ¯ä¸ªè¿›ç¨‹è¿è¡Œæ—¶æ‰“å¼€çš„æ–‡ä»¶æ•°ç›®ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚sysconf(_SC_OPEN_MAX) // æŸ¥çœ‹æ¯ç§’ä¸­è·‘è¿‡çš„è¿ç®—é€Ÿç‡ï¼›æ‰“å°ç”¨%ld é•¿æ•´ã€‚sysconf(_SC_CLK_TCK) ä½¿ç”¨ 2 ç§æ–¹å¼ (å¸¦å’Œä¸å¸¦_S åç¼€çš„å®) è·å–å½“å‰è¿›ç¨‹çš„ CPU äº²å’Œæ€§ç›¸å…³çš„å®é€šå¸¸éƒ½åˆ†ä¸º 2 ç§ï¼Œä¸€ç§æ˜¯å¸¦_Såç¼€çš„ï¼Œä¸€ç§ä¸æ˜¯ä¸å¸¦_Såç¼€çš„ï¼Œä»å£°æ˜ä¸Šçœ‹å¸¦_Såç¼€çš„å®éƒ½å¤šå‡ºä¸€ä¸ªå‚æ•° setsizeã€‚ ä»åŠŸèƒ½ä¸Šçœ‹ä»–ä»¬çš„åŒºåˆ«æ˜¯å¸¦_Såç¼€çš„å®æ˜¯ç”¨äºæ“ä½œåŠ¨æ€ç”³è¯·çš„CPU set(s)ï¼Œæ‰€è°“çš„åŠ¨æ€ç”³è¯·å…¶å®å°±æ˜¯ä½¿ç”¨å® CPU_ALLOC ç”³è¯·ï¼Œ å‚æ•° setsize å¯ä»¥æ˜¯é€šè¿‡å® CPU_ALLOC_SIZE è·å¾—ï¼Œä¸¤è€…çš„ç”¨æ³•è¯¦è§ä¸‹é¢çš„ä¾‹å­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970#define _GNU_SOURCE#include &lt;sched.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#undef WITH_S#ifdef WITH_Sint main(void)&#123; int i, nrcpus; cpu_set_t *pmask; size_t cpusize; unsigned long bitmask = 0; /* è·å–é€»è¾‘ CPU ä¸ªæ•° */ nrcpus = sysconf(_SC_NPROCESSORS_CONF); pmask = CPU_ALLOC(nrcpus); cpusize = CPU_ALLOC_SIZE(nrcpus); CPU_ZERO_S(cpusize, pmask); /* è·å– CPU äº²å’Œæ€§ */ if (sched_getaffinity(0, cpusize, pmask) == -1) &#123; perror(&quot;sched_getaffinity&quot;); CPU_FREE(pmask); exit(EXIT_FAILURE); &#125; for (i = 0; i &lt; nrcpus; i++) &#123; if (CPU_ISSET_S(i, cpusize, pmask)) &#123; bitmask |= (unsigned long)0x01 &lt;&lt; i; printf(&quot;processor #%d is set\\n&quot;, i); &#125; &#125; printf(&quot;bitmask = %#lx\\n&quot;, bitmask); CPU_FREE(pmask); exit(EXIT_SUCCESS);&#125;#elseint main(void)&#123; int i, nrcpus; cpu_set_t mask; unsigned long bitmask = 0; CPU_ZERO(&amp;mask); /* è·å– CPU äº²å’Œæ€§ */ if (sched_getaffinity(0, sizeof(cpu_set_t), &amp;mask) == -1) &#123; perror(&quot;sched_getaffinity&quot;); exit(EXIT_FAILURE); &#125; /* è·å–é€»è¾‘ CPU ä¸ªæ•° */ nrcpus = sysconf(_SC_NPROCESSORS_CONF); for (i = 0; i &lt; nrcpus; i++) &#123; if (CPU_ISSET(i, &amp;mask)) &#123; bitmask |= (unsigned long)0x01 &lt;&lt; i; printf(&quot;processor #%d is set\\n&quot;, i); &#125; &#125; printf(&quot;bitmask = %#lx\\n&quot;, bitmask); exit(EXIT_SUCCESS);&#125;#endif 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556# ç›´æ¥è¿è¡Œï¼Œä¸è®¾ç½®äº²å’Œæ€§ï¼Œè·å–CPUäº²å’Œæ€§ä¸ºæ‰€æœ‰CPUéƒ½ä¼šè¢«è®¾ç½®âœ Affinity git:(main) ./bin/main processor #0 is setprocessor #1 is setprocessor #2 is setprocessor #3 is setprocessor #4 is setprocessor #5 is setprocessor #6 is setprocessor #7 is setprocessor #8 is setprocessor #9 is setprocessor #10 is setprocessor #11 is setprocessor #12 is setprocessor #13 is setprocessor #14 is setprocessor #15 is setprocessor #16 is setprocessor #17 is setprocessor #18 is setprocessor #19 is setprocessor #20 is setprocessor #21 is setprocessor #22 is setprocessor #23 is setprocessor #24 is setprocessor #25 is setprocessor #26 is setprocessor #27 is setprocessor #28 is setprocessor #29 is setprocessor #30 is setprocessor #31 is setbitmask = 0xffffffff# ä½¿ç”¨tasksetè®¾ç½®äº²å’Œæ€§ï¼Œå°†mainç¨‹åºç»‘å®šåˆ°ç¬¬1ä¸ªCPUä¸Šï¼Œmaskè½¬åŒ–ä¸º16è¿›åˆ¶ä¸º0x1âœ Affinity git:(main) taskset 1 ./bin/mainprocessor #0 is setbitmask = 0x1# ä½¿ç”¨tasksetè®¾ç½®äº²å’Œæ€§ï¼Œå°†mainç¨‹åºç»‘å®šåˆ°ç¬¬1,3,5,7ä¸ªCPUä¸Šï¼Œmaskè½¬åŒ–ä¸º16è¿›åˆ¶ä¸º0x55âœ Affinity git:(main) taskset 55 ./bin/mainprocessor #0 is setprocessor #2 is setprocessor #4 is setprocessor #6 is setbitmask = 0x55# ä½¿ç”¨tasksetè®¾ç½®äº²å’Œæ€§ï¼Œå°†mainç¨‹åºç»‘å®šåˆ°ç¬¬1,2,3,4ä¸ªCPUä¸Šï¼Œmaskè½¬åŒ–ä¸º16è¿›åˆ¶ä¸º0xfâœ Affinity git:(main) taskset F ./bin/mainprocessor #0 is setprocessor #1 is setprocessor #2 is setprocessor #3 is setbitmask = 0xf è®¾ç½®è¿›ç¨‹çš„ CPU äº²å’Œæ€§åå†è·å–æ˜¾ç¤º CPU äº²å’Œæ€§123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#define _GNU_SOURCE#include &lt;sched.h&gt;#include &lt;unistd.h&gt; /* sysconf */#include &lt;stdlib.h&gt; /* exit */#include &lt;stdio.h&gt;int main(void)&#123; int i, nrcpus; cpu_set_t mask; unsigned long bitmask = 0; CPU_ZERO(&amp;mask); CPU_SET(0, &amp;mask); /* add CPU0 to cpu set */ CPU_SET(2, &amp;mask); /* add CPU2 to cpu set */ CPU_SET(3, &amp;mask); /* add CPU3 to cpu set */ /* è®¾ç½® CPU äº²å’Œæ€§ */ if (sched_setaffinity(0, sizeof(cpu_set_t), &amp;mask) == -1) &#123; perror(&quot;sched_setaffinity&quot;); exit(EXIT_FAILURE); &#125; CPU_ZERO(&amp;mask); if (sched_getaffinity(0, sizeof(cpu_set_t), &amp;mask) == -1) &#123; perror(&quot;sched_getaffinity&quot;); exit(EXIT_FAILURE); &#125; /* get logical cpu number */ nrcpus = sysconf(_SC_NPROCESSORS_CONF); for (i = 0; i &lt; nrcpus; i++) &#123; if (CPU_ISSET(i, &amp;mask)) &#123; bitmask |= (unsigned long)0x01 &lt;&lt; i; printf(&quot;processor #%d is set\\n&quot;, i); &#125; &#125; printf(&quot;bitmask = %#lx\\n&quot;, bitmask); exit(EXIT_SUCCESS);&#125; 12345âœ Affinity git:(main) âœ— ./bin/main processor #0 is setprocessor #2 is setprocessor #3 is setbitmask = 0xd è®¾ç½®çº¿ç¨‹çš„ CPU å±æ€§åå†è·å–æ˜¾ç¤º CPU äº²å’Œæ€§12345678910111213141516171819202122232425262728293031323334353637383940414243444546#define _GNU_SOURCE#include &lt;pthread.h&gt; //ä¸ç”¨å†åŒ…å«&lt;sched.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;errno.h&gt;#define handle_error_en(en, msg) \\ do &#123; errno = en; perror(msg); exit(EXIT_FAILURE); &#125; while (0)intmain(int argc, char *argv[])&#123; int s, j; cpu_set_t cpuset; pthread_t thread; thread = pthread_self(); /* Set affinity mask to include CPUs 0 to 7 */ CPU_ZERO(&amp;cpuset); for (j = 0; j &lt; 8; j++) CPU_SET(j, &amp;cpuset); s = pthread_setaffinity_np(thread, sizeof(cpu_set_t), &amp;cpuset); if (s != 0) &#123; handle_error_en(s, &quot;pthread_setaffinity_np&quot;); &#125; /* Check the actual affinity mask assigned to the thread */ s = pthread_getaffinity_np(thread, sizeof(cpu_set_t), &amp;cpuset); if (s != 0) &#123; handle_error_en(s, &quot;pthread_getaffinity_np&quot;); &#125; printf(&quot;Set returned by pthread_getaffinity_np() contained:\\n&quot;); for (j = 0; j &lt; CPU_SETSIZE; j++) //CPU_SETSIZE æ˜¯å®šä¹‰åœ¨&lt;sched.h&gt;ä¸­çš„å®ï¼Œé€šå¸¸æ˜¯ 1024 &#123; if (CPU_ISSET(j, &amp;cpuset)) &#123; printf(&quot; CPU %d\\n&quot;, j); &#125; &#125; exit(EXIT_SUCCESS);&#125; 12345678910âœ Affinity git:(main) ./bin/mainSet returned by pthread_getaffinity_np() contained: CPU 0 CPU 1 CPU 2 CPU 3 CPU 4 CPU 5 CPU 6 CPU 7 ä½¿ç”¨ seched_setaffinity è®¾ç½®çº¿ç¨‹çš„ CPU äº²å’Œæ€§123456789101112131415161718192021222324252627282930313233343536#define _GNU_SOURCE#include &lt;sched.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/syscall.h&gt; // syscallint main(void)&#123; pid_t tid; int i, nrcpus; cpu_set_t mask; unsigned long bitmask = 0; CPU_ZERO(&amp;mask); CPU_SET(0, &amp;mask); /* add CPU0 to cpu set */ CPU_SET(2, &amp;mask); /* add CPU2 to cpu set */ // è·å–çº¿ç¨‹ id tid = syscall(__NR_gettid); // or syscall(SYS_gettid); // å¯¹æŒ‡å®šçº¿ç¨‹ id è®¾ç½® CPU äº²å’Œæ€§ if (sched_setaffinity(tid, sizeof(cpu_set_t), &amp;mask) == -1) &#123; perror(&quot;sched_setaffinity&quot;); exit(EXIT_FAILURE); &#125; nrcpus = sysconf(_SC_NPROCESSORS_CONF); for (i = 0; i &lt; nrcpus; i++) &#123; if (CPU_ISSET(i, &amp;mask)) &#123; bitmask |= (unsigned long)0x01 &lt;&lt; i; printf(&quot;processor #%d is set\\n&quot;, i); &#125; &#125; exit(EXIT_SUCCESS);&#125; 123âœ Affinity git:(main) ./bin/mainprocessor #0 is setprocessor #2 is set ä»€ä¹ˆæ˜¯ä¸­æ–­äº²å’Œæ€§è®¡ç®—æœºä¸­ï¼Œä¸­æ–­æ˜¯ä¸€ç§ç”µä¿¡å·ï¼Œç”±ç¡¬ä»¶äº§ç”Ÿå¹¶ç›´æ¥é€åˆ°ä¸­æ–­æ§åˆ¶å™¨ä¸Šï¼Œå†ç”±ä¸­æ–­æ§åˆ¶å™¨å‘ CPU å‘é€ä¸­æ–­ä¿¡å·ï¼ŒCPU æ£€æµ‹åˆ°ä¿¡å·åï¼Œä¸­æ–­å½“å‰å·¥ä½œè½¬è€Œå¤„ç†ä¸­æ–­ä¿¡å·ã€‚CPU ä¼šé€šçŸ¥æ“ä½œç³»ç»Ÿå·²ç»äº§ç”Ÿä¸­æ–­ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šå¯¹ä¸­æ–­è¿›è¡Œå¤„ç†ã€‚è¿™é‡Œæœ‰ç¯‡æ¨æ–‡ï¼šCPU æ˜æ˜ 8 ä¸ªæ ¸ï¼Œç½‘å¡ä¸ºå•¥æ‹¼å‘½æŠ˜è…¾ä¸€å·æ ¸ï¼Ÿç”ŸåŠ¨çš„è§£é‡Šäº†ä¸­æ–­äº²å’Œæ€§ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒLinux ä¸­æ–­å“åº”ä¼šè¢«å¹³å‡åˆ†é…åˆ°æ‰€æœ‰ CPU æ ¸å¿ƒä¸Šï¼ŒåŠ¿å¿…ä¼šå‘ç”Ÿå†™æ–°çš„æ•°æ®å’ŒæŒ‡ä»¤ç¼“å­˜ï¼Œå¹¶ä¸ CPU æ ¸å¿ƒä¸ŠåŸæœ‰è¿›ç¨‹äº§ç”Ÿå†²çªï¼Œé€ æˆä¸­æ–­å“åº”å»¶è¿Ÿï¼Œå½±å“è¿›ç¨‹å¤„ç†æ—¶é—´ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†ä¸­æ–­ï¼ˆæˆ–è¿›ç¨‹ï¼‰ç»‘å®šåˆ°æŒ‡å®š CPU æ ¸å¿ƒä¸Šï¼Œä¸­æ–­ï¼ˆæˆ–è¿›ç¨‹ï¼‰æ‰€éœ€è¦æŒ‡ä»¤ä»£ç å’Œæ•°æ®æœ‰æ›´å¤§æ¦‚ç‡ä½äºæŒ‡å®š CPU æœ¬åœ°æ•°æ®å’ŒæŒ‡ä»¤ç¼“å­˜å†…ï¼Œè€Œä¸å¿…è¿›è¡Œæ–°çš„å†™ç¼“å­˜ï¼Œä»è€Œæé«˜ä¸­æ–­å“åº”ï¼ˆæˆ–è¿›ç¨‹ï¼‰çš„å¤„ç†é€Ÿåº¦ã€‚ ä¸­æ–­äº²å’Œæ€§çš„ä½¿ç”¨åœºæ™¯å¯¹äºæ–‡ä»¶æœåŠ¡å™¨ã€Web æœåŠ¡å™¨ï¼ŒæŠŠä¸åŒçš„ç½‘å¡ IRQ å‡è¡¡ç»‘å®šåˆ°ä¸åŒçš„ CPU ä¸Šå°†ä¼šå‡è½»æŸ CP çš„è´Ÿè½½ï¼Œæé«˜å¤šä¸ª CPU æ•´ä½“å¤„ç†ä¸­æ–­çš„èƒ½åŠ›; å¯¹äºæ•°æ®åº“æœåŠ¡å™¨ï¼ŒæŠŠç£ç›˜æ§åˆ¶å™¨ç»‘åˆ°ä¸€ä¸ª CPUã€æŠŠç½‘å¡ç»‘å®šåˆ°å¦ä¸€ä¸ª CPU å°†ä¼šæé«˜æ•°æ®åº“çš„å“åº”æ—¶é—´ã€ä¼˜åŒ–æ€§èƒ½ã€‚åˆç†çš„æ ¹æ®è‡ªå·±çš„ç”Ÿäº§ç¯å¢ƒå’Œåº”ç”¨çš„ç‰¹ç‚¹æ¥å¹³è¡¡ IRQ ä¸­æ–­æœ‰åŠ©äºæé«˜ç³»ç»Ÿçš„æ•´ä½“ååèƒ½åŠ›å’Œæ€§èƒ½ã€‚ ä¸­æ–­ç»‘å®šæµç¨‹ å…³é—­ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹ï¼ˆirqbalance daemonï¼‰ä¼šå‘¨æœŸæ€§åœ°å°†ä¸­æ–­å¹³å‡åœ°å…¬å¹³åœ°åˆ†é…ç»™å„ä¸ª CPU æ ¸å¿ƒï¼Œé»˜è®¤å¼€å¯ã€‚ä¸ºäº†å®ç°ä¸­æ–­ç»‘å®šï¼Œé¦–å…ˆéœ€è¦å°†ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹å…³é—­ã€‚ systemctl status irqbalanceæŸ¥çœ‹å®ˆæŠ¤è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ 1234567891011âœ ~ systemctl status irqbalanceâ— irqbalance.service - irqbalance daemonLoaded: loaded (/lib/systemd/system/irqbalance.service; enabled; vendor preset: enableActive: active (running) since Thu 2022-05-19 14:46:20 CST; 1 weeks 1 days agoMain PID: 1062 (irqbalance) Tasks: 2 (limit: 4915)CGroup: /system.slice/irqbalance.service â””â”€1062 /usr/sbin/irqbalance --foreground5æœˆ 19 14:46:20 zdd systemd[1]: Started irqbalance daemon. systemctl stop irqbalanceå…³é—­ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹ï¼Œä¸­æ–­å“åº”é»˜è®¤éƒ½ä¼šç”± CPU0 æ ¸å¿ƒå¤„ç†ã€‚æˆ–è€…systemctl disable irqbalanceå–æ¶ˆä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹å¼€æœºé‡å¯ã€‚å› ä¸ºå…³é—­ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹è¿‡äºå¼ºç¡¬ï¼Œå¯ä»¥åœ¨ä¸å…³é—­ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹æ¡ä»¶ä¸‹ï¼Œè®©æŸäº› CPU æ ¸å¿ƒè„±ç¦»ä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹çš„ç®¡ç†ã€‚ ç»‘å®šä¸­æ–­ä¸­æ–­ç»‘å®šæ—¶ï¼Œéœ€è¦å…³é—­ç³»ç»Ÿä¸­æ–­å¹³è¡¡å®ˆæŠ¤è¿›ç¨‹systemctl stop irqbalanceè®¡ç®—æœºå½“å‰å„ç§ä¸­æ–­å“åº”æƒ…å†µåœ¨ /proc/interrupts æ–‡ä»¶ä¸­ã€‚ ç¬¬ä¸€åˆ—æ˜¯ä¸­æ–­ ID å·ï¼ŒCPU N åˆ—æ˜¯ä¸­æ–­åœ¨ç¬¬ n ä¸ª CPU æ ¸å¿ƒä¸Šçš„å“åº”æ¬¡æ•°ï¼Œå€’æ•°ç¬¬äºŒåˆ—æ˜¯ä¸­æ–­ç±»å‹ï¼Œæœ€åä¸€åˆ—æ˜¯æè¿°ã€‚ åˆ©ç”¨ echo å‘½ä»¤å°† CPU æ©ç å†™å…¥ /proc/irq/ä¸­æ–­ ID/smp_affinity æ–‡ä»¶ä¸­ï¼Œå³å¯å®ç°ä¿®æ”¹æŸä¸€ä¸­æ–­çš„ CPU äº²å’Œæ€§ã€‚ä¾‹å¦‚ 1echo 0x0004 &gt; /proc/irq /50/smp_affinity å‚è€ƒèµ„æ–™Linux ä¸­ CPU äº²å’Œæ€§ (affinity) - LubinLew - åšå®¢å›­æ“ä½œç³»ç»Ÿåº•å±‚æŠ€æœ¯â€”â€”CPU äº²å’Œæ€§_mb60ed33cfc44fa çš„æŠ€æœ¯åšå®¢_51CTO åšå®¢linux è¿›ç¨‹ã€çº¿ç¨‹ä¸ CPU çš„äº²å’Œæ€§ï¼ˆaffinityï¼‰_wx61d68abba262d çš„æŠ€æœ¯åšå®¢_51CTO åšå®¢CPU æ˜æ˜ 8 ä¸ªæ ¸ï¼Œç½‘å¡ä¸ºå•¥æ‹¼å‘½æŠ˜è…¾ä¸€å·æ ¸ï¼ŸProcessor affinity - Wikipediaä»€ä¹ˆï¼Ÿä¸€ä¸ªæ ¸åŒæ—¶æ‰§è¡Œä¸¤ä¸ªçº¿ç¨‹ï¼Ÿlinux è¿›ç¨‹ã€çº¿ç¨‹ä¸ CPU çš„äº²å’Œæ€§ï¼ˆaffinityï¼‰ - zhangwju - åšå®¢å›­","categories":[],"tags":[{"name":"CPU","slug":"CPU","permalink":"http://example.com/tags/CPU/"},{"name":"äº²å’Œæ€§","slug":"äº²å’Œæ€§","permalink":"http://example.com/tags/%E4%BA%B2%E5%92%8C%E6%80%A7/"},{"name":"Affinity","slug":"Affinity","permalink":"http://example.com/tags/Affinity/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"http://example.com/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"SoC å­˜å‚¨å™¨æ¯”è¾ƒ","slug":"SoCå­˜å‚¨å™¨æ¯”è¾ƒ","date":"2022-05-21T09:13:33.000Z","updated":"2022-10-15T03:14:29.573Z","comments":true,"path":"2022/05/21/SoCå­˜å‚¨å™¨æ¯”è¾ƒ/","link":"","permalink":"http://example.com/2022/05/21/SoC%E5%AD%98%E5%82%A8%E5%99%A8%E6%AF%94%E8%BE%83/","excerpt":"","text":"å†…å­˜ä¹Ÿå°±æ˜¯å†…éƒ¨å­˜å‚¨å™¨ï¼Œä¸»è¦ç”¨æ¥è¿è¡Œç¨‹åºçš„ï¼Œå…¸å‹çš„å°±æ˜¯ RAM éšæœºå­˜å‚¨å™¨ï¼ˆRandom Access Memoryï¼‰ï¼Œé‚£ä¹ˆéšæœºæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ‰€è°“éšæœºï¼ŒæŒ‡çš„æ˜¯å½“å­˜å‚¨å™¨ä¸­çš„æ•°æ®è¢«è¯»å–æˆ–å†™å…¥æ—¶ï¼Œæ‰€éœ€è¦çš„æ—¶é—´ä¸è¿™æ®µä¿¡æ¯æ‰€åœ¨çš„ä½ç½®æ— å…³ï¼ˆä»»ä½•ä½ç½®è¯»å†™é€Ÿåº¦ä¸€æ ·ï¼‰ã€‚ DRAMï¼ˆDynamic Random Access Memoryï¼ŒåŠ¨æ€éšæœºå­˜å‚¨å™¨ï¼‰æ˜¯æœ€ä¸ºå¸¸è§çš„ç³»ç»Ÿå†…å­˜ã€‚æˆ‘ä»¬ä½¿ç”¨çš„ç”µè„‘å’Œæ‰‹æœºçš„è¿è¡Œå†…å­˜éƒ½æ˜¯ DRAMã€‚DRAM ä½¿ç”¨ç”µå®¹å­˜å‚¨ï¼ŒDRAM åªèƒ½å°†æ•°æ®ä¿æŒå¾ˆçŸ­çš„æ—¶é—´ã€‚ä¸ºäº†ä¿æŒæ•°æ®ï¼Œæ‰€ä»¥å¿…é¡»éš”ä¸€æ®µæ—¶é—´åˆ·æ–°ï¼ˆrefreshï¼‰ä¸€æ¬¡ï¼Œå¦‚æœå­˜å‚¨å•å…ƒæ²¡æœ‰è¢«åˆ·æ–°ï¼Œå­˜å‚¨çš„ä¿¡æ¯å°±ä¼šä¸¢å¤±ã€‚æ•°æ®çš„å­˜å‚¨ï¼Œè¯·å‚è€ƒæ•°æ®å­˜å‚¨æ¨¡å‹ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œç”µå®¹ä¸­çš„ç”µè·å¾ˆå®¹æ˜“å˜åŒ–ï¼Œæ‰€ä»¥éšç€æ—¶é—´æ¨ç§»ï¼Œç”µå®¹ä¸­çš„ç”µè·æ•°ä¼šå¢åŠ æˆ–å‡å°‘ï¼Œä¸ºäº†ç¡®ä¿æ•°æ®ä¸ä¼šä¸¢å¤±ï¼ŒDRAM æ¯éš”ä¸€æ®µæ—¶é—´ä¼šç»™ç”µå®¹åˆ·æ–°ï¼ˆå……ç”µæˆ–æ”¾ç”µï¼‰ã€‚åŠ¨æ€ï¼šå®šæ—¶åˆ·æ–°æ•°æ® SRAMï¼ˆStatic Random Access Memoryï¼Œé™æ€éšæœºå­˜å‚¨å™¨ï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§å…·æœ‰é™æ­¢å­˜å–åŠŸèƒ½çš„å†…å­˜ï¼Œå…¶å†…éƒ¨æœºæ„æ¯” DRAM å¤æ‚ï¼Œå¯ä»¥åšåˆ°ä¸åˆ·æ–°ç”µè·¯å³èƒ½ä¿å­˜å®ƒå†…éƒ¨å­˜å‚¨çš„æ•°æ®ã€‚é™æ€ï¼šä¸éœ€è¦åˆ·æ–° DDR SDRAMï¼ˆDouble Data Rate SDRAMï¼‰ï¼šä¸ºåŒä¿¡é“åŒæ­¥åŠ¨æ€éšæœºå­˜å–å†…å­˜ï¼Œæ˜¯æ–°ä¸€ä»£çš„ SDRAM æŠ€æœ¯ã€‚DDR å†…å­˜èŠ¯ç‰‡çš„æ•°æ®é¢„å–å®½åº¦ï¼ˆPrefetchï¼‰ä¸º 2 bitï¼ˆSDRAM çš„ä¸¤å€ï¼‰ã€‚ DDR2 SDRAMï¼ˆDouble Data Rate Two SDRAMï¼‰ï¼šä¸ºåŒä¿¡é“ä¸¤æ¬¡åŒæ­¥åŠ¨æ€éšæœºå­˜å–å†…å­˜ã€‚DDR2 å†…å­˜ Prefetch åˆå†åº¦æå‡è‡³ 4 bitï¼ˆDDR çš„ä¸¤å€ï¼‰ DDR3 SDRAMï¼ˆDouble Data Rate Three SDRAMï¼‰ï¼šä¸ºåŒä¿¡é“ä¸‰æ¬¡åŒæ­¥åŠ¨æ€éšæœºå­˜å–å†…å­˜ã€‚DDR3 å†…å­˜ Prefetch æå‡è‡³ 8 bitï¼Œå³æ¯æ¬¡ä¼šå­˜å– 8 bits ä¸ºä¸€ç»„çš„æ•°æ®ã€‚è¿ç®—é¢‘ç‡ä»‹äº 800MHz -1600MHz ä¹‹é—´ã€‚ å¤–å­˜å¤–éƒ¨å­˜å‚¨å™¨ï¼Œé€šå¸¸ç”¨æ¥å­˜å‚¨æ–‡ä»¶çš„ï¼Œä¸€èˆ¬ä¹Ÿå« ROMï¼ˆRead-only memoryï¼‰åªè¯»å­˜å‚¨å™¨ã€‚ CPU è¿æ¥å†…å­˜å’Œå¤–å­˜çš„è¿æ¥æ–¹å¼ä¸åŒã€‚å†…å­˜éœ€è¦ç›´æ¥åœ°å€è®¿é—®ï¼Œæ‰€ä»¥æ˜¯é€šè¿‡åœ°å€æ€»çº¿&amp;æ•°æ®æ€»çº¿çš„æ€»çº¿å¼è®¿é—®æ–¹å¼è¿æ¥çš„ï¼ˆå¥½å¤„æ˜¯ç›´æ¥è®¿é—®ï¼Œéšæœºè®¿é—®ï¼›åå¤„æ˜¯å ç”¨ CPU çš„åœ°å€ç©ºé—´ï¼Œå¤§å°å—é™ï¼‰ï¼›å¤–å­˜æ˜¯é€šè¿‡ CPU çš„å¤–å­˜æ¥å£æ¥è¿æ¥çš„ï¼ˆå¥½å¤„æ˜¯ä¸å ç”¨ CPU çš„åœ°å€ç©ºé—´ï¼Œåå¤„æ˜¯è®¿é—®é€Ÿåº¦æ²¡æœ‰æ€»çº¿å¼å¿«ï¼Œè®¿é—®æ—¶åºè¾ƒå¤æ‚ï¼‰ æˆ‘ä»¬å¹³æ—¶ç”¨çš„ç¡¬ç›˜ï¼ŒSD å¡éƒ½å±äº ROMï¼Œä½†æ˜¯ä»–ä»¬å´å¯ä»¥å†™å…¥ï¼ŸROM ä¸¥æ ¼æ„ä¹‰æ¥è®²ç¡®å®æ˜¯åªè¯»çš„ï¼Œä½†æ˜¯éšç€å‚¨å­˜å™¨çš„å‘å±•ï¼Œå‡ºç°äº†å¯æ“¦å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼ˆEPROMï¼‰ã€ç”µå¯æ“¦å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼ˆEEPROMï¼‰å½¢å¼çš„åŠå¯¼ä½“å­˜å‚¨å™¨ï¼Œä»¥åŠ flashã€‚ä»–ä»¬éƒ½æ˜¯å¯å†™çš„ã€‚ROM å°±ä¸å†å•å•åªè¡¨ç¤ºåªè¯»å­˜å‚¨å™¨äº†ï¼Œä¸€èˆ¬æ¥è¯´ä¸ RAM ç›¸å¯¹ï¼Œæ‰ç”µä¸æ˜“å¤±çš„å­˜å‚¨å™¨éƒ½è¢«å½“åš ROMã€‚ ROMROMï¼ˆRead Only Memoryï¼‰åªè¯»å­˜å‚¨å™¨ï¼Œè¿™ç§å­˜å‚¨å™¨ï¼ˆMemoryï¼‰çš„å†…å®¹ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šæ”¹å˜ï¼Œç”µè„‘ä¸ç”¨æˆ·åªèƒ½è¯»å–ä¿å­˜åœ¨è¿™é‡Œçš„æŒ‡ä»¤ï¼Œå’Œä½¿ç”¨å­˜å‚¨åœ¨ ROM çš„èµ„æ–™ï¼Œä½†ä¸èƒ½å˜æ›´æˆ–å­˜å…¥èµ„æ–™ã€‚ROM è¢«å­˜å‚¨åœ¨ä¸€ä¸ªéæ˜“å¤±æ€§èŠ¯ç‰‡ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿åœ¨å…³æœºä¹‹åè®°å¿†çš„å†…å®¹ä»å¯ä»¥è¢«ä¿å­˜ï¼Œæ‰€ä»¥è¿™ç§å­˜å‚¨å™¨å¤šç”¨æ¥å­˜å‚¨ç‰¹å®šåŠŸèƒ½çš„ç¨‹åºï¼Œå¦‚å›ºä»¶ã€‚ROM å­˜å‚¨ç”¨æ¥å¯åŠ¨ç”µè„‘çš„ç¨‹åºï¼ˆå¦‚BIOSï¼‰ï¼Œç”µè„‘å¼•å¯¼çš„æ—¶å€™ BIOS æä¾›ä¸€è¿ä¸²çš„æŒ‡ä»¤å¯¹ä¸­å¤®å¤„ç†å™¨ï¼ˆCPUï¼‰ç­‰ç»„ä»¶è¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼ŒBIOS ç¨‹åºåˆå§‹åŒ–å¹¶æ£€æŸ¥RAMã€‚ NorFlashæ€»çº¿å¼è®¿é—®ï¼Œæ¥åˆ° SROM bankï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥ç›´æ¥æ€»çº¿è®¿é—®ï¼Œä¸€èˆ¬ç”¨æ¥å¯åŠ¨ã€‚ NandFlashSLCï¼šå®¹é‡å°ï¼Œä»·æ ¼é«˜ï¼Œç¨³å®šæ€§é«˜ MLCï¼šå®¹é‡å¤§ï¼Œä»·æ ¼ä½ï¼Œç¨³å®šæ€§å·®ï¼Œæ˜“å‡ºåå— iNandSanDisk å…¬å¸å‡ºäº§çš„ eMMC moviNandä¸‰æ˜Ÿå…¬å¸å‡ºäº§çš„ eMMC oneNANDä¸‰æ˜Ÿå…¬å¸å‡ºçš„ä¸€ç§ Nandï¼Œä»·æ ¼è´µï¼Œç”¨çš„å°‘ SD å¡ï¼ˆSecure Digital Memory Cardï¼‰ TF å¡ï¼ˆTransFLash Card, MicroSDï¼‰ MMC å¡ eMMC å¡ï¼ˆembeded MMCï¼‰åµŒå…¥å¼çš„ MMCï¼Œå¯ä»¥å½“æˆä¸€ç§èŠ¯ç‰‡ï¼Œå†…éƒ¨åšäº†åå—å¤„ç† SATA ç¡¬ç›˜ ç‰¹ç‚¹ï¼šæœºæ¢°å¼è®¿é—®ã€ç£å­˜å‚¨åŸç†ã€SATA æ˜¯æ¥å£ã€‚","categories":[],"tags":[{"name":"èŠ¯ç‰‡å¼€å‘","slug":"èŠ¯ç‰‡å¼€å‘","permalink":"http://example.com/tags/%E8%8A%AF%E7%89%87%E5%BC%80%E5%8F%91/"},{"name":"SoC","slug":"SoC","permalink":"http://example.com/tags/SoC/"},{"name":"å›ºä»¶å¼€å‘","slug":"å›ºä»¶å¼€å‘","permalink":"http://example.com/tags/%E5%9B%BA%E4%BB%B6%E5%BC%80%E5%8F%91/"},{"name":"å­˜å‚¨å™¨","slug":"å­˜å‚¨å™¨","permalink":"http://example.com/tags/%E5%AD%98%E5%82%A8%E5%99%A8/"}]},{"title":"Interlaken åè®®","slug":"Interlakenåè®®","date":"2022-05-18T14:40:47.000Z","updated":"2022-10-15T03:14:29.259Z","comments":true,"path":"2022/05/18/Interlakenåè®®/","link":"","permalink":"http://example.com/2022/05/18/Interlaken%E5%8D%8F%E8%AE%AE/","excerpt":"","text":"å¯¹ Interlaken åè®®æ–‡æ¡£çš„ç¿»è¯‘åŠ äº†ä¸€äº›è‡ªå·±çš„ç†è§£ï¼› 8b/10bç¼–ç ï¼šåœ¨ä¸²è¡Œé€šé“ä¸Šä¼ è¾“æ—¶ï¼Œå°† 8bits æ•°æ®ç¼–ç ä¸º 10bits æ•°æ®ï¼Œåšä¸€ä¸ªè½¬æ¢ï¼Œä½¿å„ä½æ•°æ®ä¹‹é—´æœ‰æ›´å¤šçš„ 1 åˆ° 0 å’Œ 0 åˆ° 1 çš„è·³å˜ï¼Œä»¥ä¾¿æ¥æ”¶è®¾å¤‡æ£€æµ‹è¿™äº›è·³å˜ï¼Œèƒ½æ›´å®¹æ˜“åœ°æ¢å¤æ—¶é’Ÿã€‚64B/67B ç¼–ç ç¼–ç çš„åŸå› ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚è¿™æ ·ï¼Œåœ¨ä¸²è¡Œé€šé“ä¸Šä¼ è¾“ 10 ä½æ•°æ®ï¼Œå®é™…ä¸Šåªä¼ è¾“äº† 8 ä½ã€‚ åè®®å±‚ï¼ˆProtocol Layerï¼‰ä¼ è¾“æ ¼å¼æ•°æ®é€šè¿‡å¯é…ç½®æ•°é‡çš„ SerDes é€šé“ï¼ˆLaneï¼‰ï¼Œå†ç”± Interlaken æ¥å£ä¼ è¾“ã€‚åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œé€šé“è¢«å®šä¹‰ä¸ºä¸¤ä¸ª IC ä¹‹é—´çš„å•å·¥ä¸²è¡Œé“¾è·¯ï¼ˆsimplex serial linkï¼‰ã€‚è¯¥åè®®æ—¨åœ¨ä¸ä»»æ„æ•°é‡çš„é€šé“ä¸€èµ·è¿è¡Œï¼ˆ1 ä¸ªæˆ–å¤šä¸ªï¼Œæ²¡æœ‰ä¸Šé™ï¼‰ã€‚å®é™…å®ç°æ—¶ä¼šå›ºå®šä¸€ä¸ªæ•°å€¼ï¼Œä¸ä¼šè®¾è®¡ä¸ºå¯å˜å€¼ã€‚ æ¥å£å‘é€æ•°æ®çš„åŸºæœ¬å•ä½æ˜¯ä¸€ä¸ª 8 å­—èŠ‚çš„å­—ï¼ˆWordï¼‰ã€‚ç”¨ 8 å­—èŠ‚æ˜¯ä¸ºäº†ç¬¦åˆ64B/67B ç¼–ç ï¼Œç”¨äºæè¿°çªå‘ï¼ˆBurstï¼‰çš„æ§åˆ¶å­—çš„å¤§å°ä¹Ÿæ˜¯ 8 å­—èŠ‚ã€‚é€šè¿‡ä½¿åŸºæœ¬ä¼ è¾“å•å…ƒä¸æ§åˆ¶å­—å¤§å°ç›¸ç­‰ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è°ƒæ•´æ¥å£çš„å®½åº¦ã€‚ æ•°æ®å’Œæ§åˆ¶å­—æŒ‰é¡ºåºåœ¨é€šé“ä¸Šä¼ è¾“ï¼Œä»é€šé“ 0 å¼€å§‹ï¼Œåˆ°é€šé“ M ç»“æŸï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªæ•°æ®å—ä¸­é‡å¤ã€‚å›¾ 4 è¯´æ˜äº†è¯¥è¿‡ç¨‹ 64B/67Bç¼–ç åœ¨æ¯ä¸ªé€šé“ä¸Šç‹¬ç«‹è¿›è¡Œã€‚ä¼ è¾“é€šè¿‡ä¸¤ç§åŸºæœ¬æ•°æ®ç±»å‹å®ç°ï¼šæ•°æ®å­—å’Œæ§åˆ¶å­—ï¼Œä»–ä»¬é€šè¿‡64B/67B å¸§ä½ï¼ˆframing bitsï¼‰è¿›è¡ŒåŒºåˆ†ã€‚è¿™ä¸¤ç§æ•°æ®å­—ç±»å‹çš„æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ•°æ®å’Œæ§åˆ¶ä¿¡æ¯éƒ½æ˜¯ä»¥ä½ 66ï½0 çš„é¡ºåºä¼ è¾“çš„ï¼Œæ¡†æ¶å±‚å¼•å…¥äº† 4 ä¸ªé™„åŠ æ§åˆ¶å­—ï¼Œè¯¦ç»†ä¿¡æ¯åé¢å°†æè¿°ã€‚ Burst ç»“æ„ï¼ˆBurst Structureï¼‰æ•°æ®ä¼ è¾“æµç¨‹Interlaken æ¥å£çš„å¸¦å®½åœ¨æ”¯æŒçš„é€šé“ä¸Šè¢«åˆ’åˆ†ä¸º Burstsã€‚æ•°æ®åŒ…é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ª Burst åœ¨æ¥å£ä¸Šä¼ è¾“ã€‚Burst é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªæ§åˆ¶å­—æ¥æè¿°ã€‚ä¸ºäº†å°†ä»»æ„å¤§å°çš„æ•°æ®åŒ…åˆ†å‰²æˆ Burstï¼Œå®šä¹‰ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°ï¼š BurstMaxï¼šBurst çš„æœ€å¤§å¤§å°ï¼ˆ64Bytes çš„å€æ•°ï¼‰ BurstShortï¼šBurst çš„æœ€å°å¤§å°ï¼ˆæœ€å° 32Bytesï¼Œå¢é‡ä¸º 8Bytesï¼‰ è¯¥æ¥å£é€šå¸¸é€šè¿‡å‘é€ä¸€ä¸ª BurstMax é•¿åº¦çš„æ•°æ®çªå‘æ¥è¿è¡Œï¼Œç„¶åæ˜¯ä¸€ä¸ªæ§åˆ¶å­—ã€‚å‘é€è®¾å¤‡ä¸­çš„è°ƒåº¦é€»è¾‘å¯ä»¥è‡ªç”±é€‰æ‹©ä¿¡é“æœåŠ¡çš„é¡ºåºï¼Œå—æµæ§çŠ¶æ€çš„çº¦æŸã€‚Burst åœ¨æ¯ä¸ªé€šé“ä¸Šä¼ è¾“ï¼Œç›´åˆ°æ•°æ®åŒ…å®Œå…¨ä¼ è¾“ï¼Œæ­¤æ—¶è¯¥é€šé“ä¸Šçš„æ–°æ•°æ®åŒ…ä¼ è¾“æ‰å¼€å§‹ã€‚ å› ä¸ºæ¥å£æ˜¯ä¿¡é“åŒ–çš„ï¼Œæ•°æ®åŒ…çš„ç»“æŸå¯èƒ½ä¼šåœ¨å‡ ä¸ªä¿¡é“ä¸Šè¿ç»­åœ°å‡ºç°ï¼Œæ¯ä¸ªä¿¡é“ä¸Šçš„å‰©ä½™æ•°æ®é‡éå¸¸å°ã€‚ç”±äºå‘å°„å™¨å’Œæ¥æ”¶å™¨çš„å­˜å‚¨å™¨å¯èƒ½è¢«ç†æƒ³åœ°è®¾è®¡æˆå®½æ•°æ®é€šè·¯ï¼Œå®ƒä»¬éœ€è¦ä»¥éå¸¸é«˜çš„é€Ÿç‡æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚ä¸ºäº†å‡å°‘æ¥æ”¶å™¨å’Œå‘å°„å™¨çš„è´Ÿæ‹…ï¼ŒBurstShort å‚æ•°ä¿è¯äº†è¿ç»­çš„ Burst æ§åˆ¶å­—ä¹‹é—´çš„æœ€å°é—´éš”ã€‚æœ€å°çš„ BurstShort é—´éš”æ˜¯ 32 å­—èŠ‚ï¼Œæ›´å¤§çš„å€¼å¯ä»¥ä»¥ 8 å­—èŠ‚ä¸ºå¢é‡ã€‚ å¦‚æœæ²¡æœ‰æœ€å° Burst çš„é™åˆ¶ï¼Œé‚£ä¹ˆæ•°æ®åŒ…å¤ªå°çš„è¯ï¼Œå‘é€å™¨æˆ–è€…æ¥æ”¶å™¨å°±ä¼šé¢‘ç¹æ”¶åˆ° end-of-packetï¼Œè¿™å°±å¢åŠ äº†å¤„ç†è´Ÿæ‹…ã€‚ æ§åˆ¶å­—æ ¼å¼çªå‘é€šè¿‡ä¸€ä¸ª 8 å­—èŠ‚çš„æ§åˆ¶å­—æ¥æè¿°ã€‚æ§åˆ¶å­—åœ¨æ•°æ®æµä¸­é€šè¿‡ä½¿ç”¨ä½ [66:64] çš„â€œ0x10â€æ§åˆ¶ä»£ç å’Œä½ [63] = â€˜1â€™ æ¥æ ‡è¯†çªå‘å’Œç©ºé—²æ§åˆ¶å­—æ ¼å¼å¦‚ç¬¬ 16 é¡µçš„å›¾ 7 æ‰€ç¤ºï¼š æµæ§ï¼ˆFlow Controlï¼‰Interlaken çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯èƒ½å¤Ÿä¼ è¾¾æ¯ä¸ªé€šé“èƒŒå‹ï¼ˆbackpressureï¼‰ã€‚ä¸ºäº†æä¾›æ­¤åŠŸèƒ½ï¼ŒæŒ‡å®šäº†ä¸¤ä¸ªé€‰é¡¹ï¼šå¸¦å¤–æµæ§æ¥å£å’Œå¸¦å†…é€šé“ã€‚ä»è¯­ä¹‰ä¸Šè®²ï¼Œæµæ§åˆ¶ä¿¡æ¯ä½¿ç”¨ç®€å•çš„å¼€å…³æœºåˆ¶æ¥è¡¨ç¤ºå…è®¸åœ¨ç‰¹å®šé€šé“ä¸Šä¼ è¾“ã€‚ å¼€å…³æµæ§åˆ¶çŠ¶æ€ä¸æ¯ä¸ªé€šé“çš„å•ä¸ªçŠ¶æ€ä½è¿›è¡Œé€šä¿¡ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œâ€œ1â€æ ‡è¯†â€œXONâ€çŠ¶æ€ï¼Œè¡¨ç¤ºå…è®¸å‘é€å™¨åœ¨è¯¥é€šé“ä¸Šå‘é€æ•°æ®ã€‚ â€œ0â€æ ‡è¯†â€œXOFFâ€çŠ¶æ€ï¼Œè¡¨ç¤ºå‘é€å™¨ä¸å…è®¸åœ¨è¯¥é€šé“ä¸Šå‘é€æ•°æ®ã€‚ è¯¥åè®®æ²¡æœ‰ Credits çš„æ¦‚å¿µï¼›ä¸€æ—¦é€šé“è¢«æŒ‡ç¤ºä¸º XONï¼Œå‘é€å™¨å¯ä»¥åœ¨è¯¥é€šé“ä¸Šå‘é€å°½å¯èƒ½å¤šçš„æ•°æ®ï¼Œç›´åˆ°æµæ§åˆ¶çŠ¶æ€æ›´æ”¹ä¸º XOFFã€‚æ¥æ”¶å™¨é€‰æ‹©åœ¨ XON å’Œ XOFF çŠ¶æ€ä¹‹é—´åˆ‡æ¢çš„é˜ˆå€¼æ˜¯ç•™ç»™ç”¨æˆ·çš„å¯ç¼–ç¨‹é€‰é¡¹ï¼Œå–å†³äºæ”¯æŒçš„é€šé“æ•°é‡ã€æ¥æ”¶ç¼“å†²åŒºçš„æ·±åº¦å’Œç»™å®šç¯å¢ƒçš„æµæ§åˆ¶å»¶è¿Ÿã€‚ æµæ§åˆ¶é€šé“å¯ä»¥é€‰æ‹©æ˜ å°„åˆ° calendarï¼Œä»è€Œæµæ§åˆ¶å¯ä»¥æ˜ å°„åˆ°ä»»ä½•ä¸€ç»„ calendar entryã€‚ä¾‹å¦‚ï¼Œè¿™äº›å¯ä»¥åŒ…æ‹¬é€šé“åˆ° calendar entry çš„ä¸€å¯¹ä¸€æ˜ å°„ã€ä¸€å¯¹å¤šæ˜ å°„æˆ–æ’å…¥ç©ºå­—æ®µä»¥åŒ¹é…å…·æœ‰ä¸åŒé€šé“å®šä¹‰çš„è®¾å¤‡ã€‚ Channel Calendar å°†é€šé“æ˜ å°„åˆ°æµæ§çŠ¶æ€æ§½ è¿™ä¸ª Calendar ç»“æ„ä¹Ÿå¯ä»¥ç”¨æ¥æä¾›é“¾è·¯çº§çš„æµæ§åˆ¶ï¼ŒCalendar ä¸­çš„ä¸€ä¸ª bit ä»£è¡¨äº†åœ¨æ•´ä¸ªæ¥å£ä¸Šä¼ è¾“æ•°æ®çš„æƒé™ã€‚é“¾è·¯çŠ¶æ€çš„ææ€§å°†ä¸é€šé“çŠ¶æ€çš„ææ€§ç›¸åŒï¼šâ€œ1â€è¡¨ç¤ºå…è®¸ä¼ è¾“ï¼Œâ€œ0â€è¡¨ç¤ºç«‹å³åœæ­¢ä¼ è¾“ã€‚è¦å¯ç”¨æ­¤åŠŸèƒ½ï¼Œå¯ä»¥ä¸ºæ¯ä¸ª Calendar entry é…ç½®é€šé“ä¿¡æ¯æˆ–é“¾æ¥ä¿¡æ¯ã€‚ä¸ºäº†ä¿ƒè¿›ä½å»¶è¿Ÿé“¾è·¯çŠ¶æ€ï¼Œæ¥å£éœ€è¦æä¾›è¶³å¤Ÿçš„ Calendar entryï¼Œä»¥ä¾¿åœ¨æ¯ä¸ªçªå‘/ç©ºé—²æ§åˆ¶å­—çš„ç›¸åŒä½ä½ç½®ç¼–ç¨‹é“¾è·¯çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨è¶…è¿‡ 16 ä¸ªé€šé“ï¼Œè¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹è®¾ç½®æ‰§è¡Œï¼š ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œlink statuså°†å§‹ç»ˆå‡ºç°åœ¨çªå‘/ç©ºé—²æ§åˆ¶å­—çš„ä½[55]ä¸­ã€‚ å¸¦å¤–æµæ§ä¸ºäº†æ”¯æŒéœ€è¦å•å·¥æ“ä½œçš„ç³»ç»Ÿï¼Œå®šä¹‰äº†å¸¦å¤–æµé‡æ§åˆ¶é€‰é¡¹ã€‚è¿™æ˜¯ä½œä¸ºä¸€ä¸ªæºåŒæ­¥æ¥å£å®ç°çš„ï¼Œå¹¶ç”±ä»¥ä¸‹ä¿¡å·æŒ‡å®šï¼š å‹å·åç§° åŠŸèƒ½ FC_CLK ä¸æµæ§æ•°æ®åŒæ­¥çš„æ—¶é’Ÿ FC_DATA æµé‡æ§åˆ¶çŠ¶æ€ä¿¡æ¯ (å•æ¯”ç‰¹) FC_SYNC ä¸€ç§åŒæ­¥ä¿¡å·ï¼Œç”¨äºæ ‡è¯†æµæ§åˆ¶ calendar çš„å¼€å¤´ æ¯ä¸ªä¿¡å·çš„ pad æŠ€æœ¯å¯ä»¥æ˜¯ LVDS æˆ– LVCMOSã€‚è¿™äº›ä¿¡å·çš„é€»è¾‘æ—¶åºå…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¸¦å¤–æµæ§åˆ¶é€šé“ç”± 4 ä½ CRC è®¡ç®—ä¿æŠ¤ï¼Œè¯¥ CRC è®¡ç®—è¦†ç›–äº†å¤šè¾¾ 64 ä½çš„æµæ§åˆ¶æ•°æ®ã€‚æ ¹æ®^[P. Koopman and T. Chakravarty, Cyclic Redundancy Code (CRC) Polynomial Selectionfor Embedded Networks, The International Conference on Dependable Networks andSystems, DSN-2004.] ä¸­çš„å»ºè®®ï¼ŒCRC4 å¤šé¡¹å¼ä¸ºï¼š $$x^4+x+1$$ å¸¦å†…æµæ§å½“ä½¿ç”¨æ­¤é€‰é¡¹æ—¶ï¼Œæ¥æ”¶å™¨åˆ©ç”¨é€šè¿‡æ¥å£å‘é€çš„æ§åˆ¶å­—ä¸­çš„æµæ§åˆ¶çŠ¶æ€ï¼Œä½œä¸ºæ­£å¸¸æ•°æ®ä¼ è¾“çš„ä¸€éƒ¨åˆ†ã€‚æä¾›æ­¤é€‰é¡¹çš„ç›®çš„æ˜¯ï¼Œéœ€è¦æœ€å°‘æ•°é‡çš„å¤–éƒ¨ä¿¡å·å¼•è„šçš„å…¨åŒå·¥å®ç°ã€‚ å¦‚ Figure 7 æ‰€ç¤ºï¼Œæ§åˆ¶å­—çš„æµæ§åˆ¶å­—æ®µä¸º 16 ä½ï¼Œä½äº bit[55:40]ã€‚æ§åˆ¶å­—çš„ä½ [31:24] ä¹Ÿå¯ä»¥ç”¨äºæµæ§åˆ¶çš„å¦å¤– 8 ä½ï¼Œæ€»å…± 24 ä½ã€‚è¿™äº›çŠ¶æ€ä½è¡¨ç¤ºæ¯ä¸ª Interlaken Calendar é€šé“çš„ ON-OFF æµæ§åˆ¶çŠ¶æ€ï¼Œå½“å‰ Calendar Entry X åœ¨ä½ [55]ï¼ŒCalendar Entry X + 1 åœ¨ä½ [54]ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¸ºäº†åŒæ­¥ calendar çš„å¼€å§‹ï¼Œåœ¨ç©ºé—²/çªå‘æ§åˆ¶å­—ä¸­æä¾›äº†â€œreset calendarâ€ä½ã€‚å½“è¯¥ä½ä¸ºâ€œ1â€æ—¶ï¼Œcalendar entry 0 çš„çŠ¶æ€å°†å‡ºç°åœ¨ä½ [55] ä¸­ã€‚å½“â€œreset calendarâ€ä¸ºâ€œ0â€æ—¶ï¼Œcalendar å°†ä»ä¸Šä¸€ä¸ªæ§åˆ¶å­—ä¸­ä¿ç•™çš„ä½ç½®å¼€å§‹ç»§ç»­ã€‚å½“æ‰€æœ‰é€šé“çš„æµæ§çŠ¶æ€è¢«ä¼ è¾“å®Œï¼Œå‘é€å™¨å°†é‡ç½®å¤ä½ calendarï¼Œç„¶åé‡å¤ä¸Šä¸€è½®é¡ºåºæ“ä½œã€‚Calendar æœ€åä¸€ä¸ªæ§åˆ¶å­—ä¸­ä¸éœ€è¦çš„ bitï¼ˆå³ï¼Œå½“é€šé“æ•°ç›®ä¸æ˜¯çŠ¶æ€æ•°ç›®çš„å€æ•°æ—¶ï¼‰è¢«å‘é€ç«¯ç½® 0ï¼Œæ¥æ”¶ç«¯å¿½ç•¥ã€‚ å‚è€ƒèµ„æ–™","categories":[{"name":"é€šä¿¡åè®®","slug":"é€šä¿¡åè®®","permalink":"http://example.com/categories/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/"}],"tags":[{"name":"Interlaken","slug":"Interlaken","permalink":"http://example.com/tags/Interlaken/"}]},{"title":"AMBA æ€»çº¿åè®®-AXI åè®®","slug":"AMBAæ€»çº¿åè®®-AXIåè®®","date":"2022-05-17T13:16:45.000Z","updated":"2022-10-15T03:14:29.046Z","comments":true,"path":"2022/05/17/AMBAæ€»çº¿åè®®-AXIåè®®/","link":"","permalink":"http://example.com/2022/05/17/AMBA%E6%80%BB%E7%BA%BF%E5%8D%8F%E8%AE%AE-AXI%E5%8D%8F%E8%AE%AE/","excerpt":"","text":"AXIç»„æˆéƒ¨åˆ†ï¼š AXI4 åè®®ä¸­åŒ…å«äº”ç§ä¿¡é“ï¼Œé€šé“ä¹‹é—´ç›¸äº’ç‹¬ç«‹ä¸”å­˜åœ¨å·®åˆ«ï¼Œé€šè¿‡é€šé“è¿›è¡Œé€šä¿¡ä¹‹å‰éœ€è¦ä½¿ç”¨ VALID/READY è¿›è¡Œæ¡æ‰‹ï¼ŒRead å’Œ Write æ ¹æ® Master å®šä¹‰ï¼š è¯»åœ°å€ä¿¡é“ï¼ˆRead Address Channelï¼‰ å†™åœ°å€ä¿¡é“ï¼ˆWrite Address Channelï¼‰ è¯»æ•°æ®ä¿¡é“ï¼ˆRead Data Channelï¼‰ å†™æ•°æ®ä¿¡é“ï¼ˆWrite Data Channelï¼‰ å†™å“åº”ä¿¡é“ï¼ˆWrite Response Channelï¼‰ è¿˜æœ‰ä¸¤ç§ Component Master component Slave component é€šä¿¡ç”± Master å‘èµ·ï¼ŒMaster å¯ä»¥å¯¹ Slave è¿›è¡Œè¯»æ•°æ®ï¼ˆreadï¼‰æˆ–å†™ï¼ˆwriteï¼‰æ•°æ®ã€‚æ¯æ¬¡è¯»å†™æ“ä½œéƒ½éœ€è¦ä¸€ä¸ªåœ°å€ï¼Œè¯»åœ°å€ä¿¡é“ï¼ˆRead Address Channelï¼‰å’Œå†™åœ°å€ä¿¡é“ï¼ˆWrite Address Channelï¼‰ç”¨äºä¼ è¾“åœ°å€ã€‚åœ¨å†™å®Œæ•°æ®åï¼ŒMaster éœ€è¦ç¡®è®¤ Slave æœ‰æ²¡æœ‰æ”¶å®Œæ•°æ®ï¼ŒSlave æ”¶åˆ°å®Œæ•´æ•°æ®åï¼Œä¼šé€šè¿‡å†™å“åº”ä¿¡é“ï¼ˆWrite Response Channelï¼‰ç»™ Master ä¸€ä¸ªåé¦ˆï¼ˆcompletionï¼‰ï¼Œè¡¨ç¤ºå†™æ“ä½œå·²ç»å®Œæˆã€‚ VALID/READY æ¡æ‰‹æœºåˆ¶AXI äº”ä¸ªä¿¡é“ç›¸äº’ç‹¬ç«‹ï¼Œä½†æ˜¯ä½¿ç”¨åŒä¸€ä¸ªæ¡æ‰‹æœºåˆ¶æ¥å®ç°ä¿¡æ¯ä¼ é€’ã€‚ åœ¨æ¡æ‰‹æœºåˆ¶ä¸­ï¼Œé€šä¿¡åŒæ–¹åˆ†åˆ«æ‰®æ¼”å‘é€æ–¹(Source) å’Œæ¥æ”¶æ–¹ï¼ˆDestinationï¼‰ï¼Œä¸¤è€…çš„æ“ä½œï¼ˆæŠ€èƒ½ï¼‰å¹¶ä¸ç›¸åŒã€‚ å‘é€æ–¹ç½®é«˜ VALID ä¿¡å·è¡¨ç¤ºå‘é€æ–¹å·²ç»å°†æ•°æ®ï¼Œåœ°å€æˆ–è€…æ§åˆ¶ä¿¡æ¯å·²ç»å°±ç»ªï¼Œå¹¶ä¿æŒäºæ¶ˆæ¯æ€»çº¿ä¸Šã€‚ æ¥æ”¶æ–¹ç½®é«˜ READY ä¿¡å·è¡¨ç¤ºæ¥æ”¶æ–¹å·²ç»åšå¥½æ¥æ”¶çš„å‡†å¤‡ã€‚ å½“åŒæ–¹çš„ VALID/READY ä¿¡å·åŒæ—¶ä¸ºé«˜ï¼Œåœ¨æ—¶é’Ÿ ACLK ä¸Šå‡æ²¿ï¼Œå®Œæˆä¸€æ¬¡æ•°æ®ä¼ è¾“ã€‚æ‰€æœ‰æ•°æ®ä¼ è¾“å®Œæ¯•åï¼ŒåŒæ–¹åŒæ—¶ç½®ä½è‡ªå·±çš„ä¿¡å·ã€‚ æ¯ä¸ªé€šé“éƒ½æœ‰è‡ªå·±çš„ VALID /READY æ¡æ‰‹ä¿¡å·å¯¹ï¼š åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šç”¨åˆ° LAST ä¿¡å·ã€‚LAST ä¿¡å·å­˜åœ¨ Write Data Channel å’Œ Read Data Channel ä¸­ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸º WLAST å’Œ RLASTï¼Œç”¨äºæ ‡è®° burst çš„æœ€åä¸€æ¬¡æ•°æ®ä¼ è¾“ï¼Œå½“ slave æ¥æ”¶åˆ° LAST ä¿¡å·åï¼Œè¯´æ˜æœ¬æ¬¡æ•°æ®ä¼ è¾“å®Œæˆã€‚ åŒå‘æµæ§æ‰€è°“çš„åŒå‘æµæ§æœºåˆ¶ï¼ŒæŒ‡çš„æ˜¯å‘é€æ–¹é€šè¿‡ç½®èµ· VALID ä¿¡å·æ§åˆ¶å‘é€çš„æ—¶æœºä¸é€Ÿåº¦ï¼Œæ¥æ”¶æ–¹ä¹Ÿå¯ä»¥é€šè¿‡ READY ä¿¡å·çš„ç½®èµ·ä¸å¦æ§åˆ¶æ¥æ”¶é€Ÿåº¦ã€‚ å‘é€æ–¹æ‹¥æœ‰ä¼ è¾“çš„ä¸»åŠ¨æƒï¼Œä½†æ¥æ”¶æ–¹åœ¨ä¸å…·å¤‡æ¥æ”¶èƒ½åŠ›æ—¶ï¼Œä¹Ÿèƒ½å¤Ÿç½®ä½ä¿¡å·åœæ­¢ä¼ è¾“ï¼Œåå‹å‘é€æ–¹ã€‚ æ¡æ‰‹è¿‡ç¨‹åˆ†æ å›¾ä¸­ INFORMATION ä¿¡å·æ— åº•è‰²åŒºåŸŸè¡¨ç¤ºæ­¤æ—¶æ•°æ®å·²ç»å‡†å¤‡å¥½ï¼Œå·²ç»æœ‰æ–°çš„æ•°æ®åˆ°è¾¾ã€‚ VALID ä¿¡å·å…ˆåˆ° å‘é€æ–¹ VALID ä¿¡å·æ—©æ—©å°±åˆ°äº†ï¼Œä½†æ˜¯æ¥æ”¶æ–¹çš„ READY ä¿¡å·åœ¨ T2 ä¹‹å‰éƒ½æ²¡æœ‰å‘é€ã€‚å¯èƒ½æ¥æ”¶æ–¹åœ¨æ¥æ”¶å…¶ä»–æ•°æ®ï¼Œæˆ–è€…è¢«å µåœ¨æ•°æ®é€šè·¯ä¸Šã€‚ è¿‡äº† T2 åï¼ŒREADY ä¿¡å·åˆ°æ¥ï¼Œæ­¤æ—¶å¼€å§‹ä¼ è¾“ï¼Œç›´åˆ° T3 ç»“æŸï¼Œä¼ è¾“å®Œæˆã€‚ è¿™é‡Œä¹Ÿä½“ç°äº†åŒå‘æµæ§æœºåˆ¶ï¼Œå‘é€æ–¹çš„ VALID ä¿¡å·åªè¦ç½®é«˜ï¼Œå†æ¡æ‰‹å®Œæˆä¹‹å‰éƒ½ä¸èƒ½ç½®ä½ï¼Œå¿…é¡»ç­‰åˆ°æ¥æ”¶æ–¹ READY ä¿¡å·ç½®é«˜ã€‚ READY ä¿¡å·å…ˆåˆ° READY ä¿¡å·å¾ˆè‡ªç”±ï¼Œå¯ä»¥ç­‰å¾… VALID ä¿¡å·åˆ°æ¥å†åšå“åº”ï¼Œä½†ä¹Ÿå®Œå…¨å¯ä»¥åœ¨ VALID ä¿¡å·åˆ°æ¥å‰å°±ç½®é«˜ï¼Œè¡¨ç¤ºæ¥æ”¶ç«¯å·²ç»åšå¥½å‡†å¤‡äº†ã€‚ è€Œä¸”ï¼ŒREADY ä¿¡å·ä¸ VALID ä¸åŒï¼Œæ¥æ”¶æ–¹å¯ä»¥ç½®èµ· READY ä¹‹ååœ¨ VALID ç½®é«˜ä¹‹å‰éƒ½å¯ä»¥éšæ—¶å†ç½®ä½ READY ä¿¡å·ã€‚ ä¿¡å·åŒæ—¶åŒæ—¶åˆ°è¾¾ è¿™ä¸ªæœ€ç®€å•ï¼Œä¸¤ä¸ªä¿¡å·éƒ½ç­‰ç€ä¸€ä¸ªæ—¶é’Ÿä¸Šå‡æ²¿å°±å®Œæˆä¼ è¾“äº†ã€‚ æ¡æ‰‹ä¿¡å·ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¸ºäº†é˜²æ­¢æ­»é”å‘ç”Ÿï¼Œä¿¡å·ä¹‹é—´è¦éµå¾ªä¸€äº›è§„çŸ©ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚ä¸Šé¢æåˆ°çš„ READY ä¿¡å·ä¾èµ– VALID ä¿¡å·ï¼Œä½†æ˜¯ VALID ä¿¡å·ä¸èƒ½æ ¹æ® READY ä¿¡å·æ¥åˆ¤æ–­æ˜¯å¦æ•°æ®å·²å‡†å¤‡å¥½ï¼Œå¦åˆ™å°†ä¼šé€ æˆæ­»é”ã€‚ä¸‹é¢è¯¦ç»†è§£é‡Šè¯»å†™è¿‡ç¨‹ä¸­éœ€è¦éµå¾ªçš„ä¾èµ–å…³ç³»ã€‚ å•ç®­å¤´æŒ‡å‘çš„ä¸¤ä¸ªä¿¡å·ï¼Œä¿¡å·çš„ç½®é«˜ï¼Œä½æ²¡æœ‰é¡ºåºè¦æ±‚ã€‚ åŒç®­å¤´è¡¨ç¤ºç®­å¤´æ‰€æŒ‡å¯¹è±¡åº”è¿Ÿäºç®­å¤´å‡ºå‘ä¿¡å·å‘é€ã€‚ Read transaction dependencies Master ä¸å¾—ç­‰å¾… Slave ç½®é«˜ ARREADY Slave å¯ä»¥åœ¨ç½®é«˜ ARREADY ä¹‹å‰ç­‰å¾… ARVALID ç½®é«˜ Slave èƒ½å¤Ÿåœ¨ ARVALID ç½®é«˜ä¹‹å‰å…ˆç½®é«˜ ARREADY Slave å¿…é¡»ç­‰å¾… ARVALID å’Œ ARREADY éƒ½è¢«ç½®é«˜ï¼Œç„¶åæ‰ç½®é«˜ RVALID ä»¥è¡¨ç¤ºæœ‰æ•ˆæ•°æ®å¯ç”¨ åœ¨ç½®é«˜ RVALID ä¹‹å‰ï¼ŒSlave ä¸å¾—ç­‰å¾… Master ç½®é«˜ RREADY Master å¯ä»¥åœ¨ç½®é«˜ RREADY ä¹‹å‰ç­‰å¾… RVALID è¢«ç½®é«˜ Master å¯ä»¥åœ¨ RVALID è¢«ç½®é«˜ä¹‹å‰ç½®é«˜ RREADY Write transaction dependencies åœ¨ç½®é«˜ AWVALID æˆ– WVALID ä¹‹å‰ï¼ŒMaster ä¸å¾—ç­‰å¾… Slave ç½®é«˜ AWREADY æˆ– WREADY Slave å¯ä»¥åœ¨ç½®é«˜ AWREADY ä¹‹å‰ç­‰å¾… AWVALID æˆ– WVALIDï¼Œæˆ–ä¸¤è€…éƒ½ç­‰å¾… Slave å¯ä»¥åœ¨ AWVALID æˆ– WVALID æˆ–ä¸¤è€…éƒ½è¢«ç½®é«˜ä¹‹å‰ç½®é«˜ AWREADY åœ¨ç½®é«˜ WREADY ä¹‹å‰ï¼ŒSlave å¯ä»¥ç­‰å¾… AWVALID æˆ– WVALIDï¼Œæˆ–ä¸¤è€…éƒ½ç­‰å¾… Slave å¯ä»¥åœ¨ AWVALID æˆ– WVALID æˆ–ä¸¤è€…éƒ½è¢«ç½®é«˜ä¹‹å‰ç½®é«˜ WREADY åœ¨ç½®é«˜ BVALID ä¹‹å‰ï¼ŒSlave å¿…é¡»ç­‰å¾… WVALID å’Œ WREADY éƒ½è¢«ç½®é«˜ Slaveè¿˜å¿…é¡»åœ¨ç½®é«˜ BVALID ä¹‹å‰ç­‰å¾… WLAST è¢«ç½®é«˜ï¼Œå› ä¸ºå†™å…¥å“åº” BRESP å¿…é¡»åœ¨å†™å…¥äº‹åŠ¡çš„æœ€åä¸€æ¬¡æ•°æ®ä¼ è¾“ä¹‹åæ‰å‘å‡ºä¿¡å· åœ¨ç½®é«˜ BVALID ä¹‹å‰ï¼ŒSlave ä¸å¾—ç­‰å¾… Master ç½®é«˜ BREADY Master å¯ä»¥åœ¨ç½®é«˜ BREADY ä¹‹å‰ç­‰å¾… BVALID Master å¯ä»¥åœ¨ BVALID è¢«ç½®é«˜ä¹‹å‰ç½®é«˜ BREADY åœ°å€ç»“æ„ï¼ˆAddress structureï¼‰AXI åè®®æ˜¯åŸºäº Burst çš„ï¼Œåœ°å€ç»“æ„é‡Œå£°æ˜äº†ä¸€äº›ä¼ è¾“è¿‡ç¨‹ä¸­éœ€è¦çš„ä¿¡å·ï¼Œå¦‚èµ·å§‹åœ°å€ï¼Œburst ä¼ è¾“é•¿åº¦ï¼Œä¼ è¾“æ¨¡å¼ç­‰ç­‰ã€‚ Burståœ¨ä»‹ç» Burst transfer ä¹‹å‰ï¼Œéœ€è¦è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ Burstã€‚åœ¨æ‰‹å†Œçš„æœ¯è¯­è¡¨ä¸­ï¼Œä¸ AXI ä¼ è¾“ç›¸å…³çš„æœ‰ä¸‰ä¸ªæ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯ transfer(beat)ã€burstã€transactionã€‚ AXI Transactionï¼šthe complete set of required operations on the AXI bus form the AXI Transaction.è¡¨ç¤ºä¼ è¾“ä¸€æ®µæ•°æ® (AXI burst) æ‰€éœ€çš„ä¸€æ•´å¥—æ“ä½œï¼› AXI Burstï¼šany required payload data is transferred as an AXI Burst.è¡¨ç¤º AXI å¾…ä¼ æ•°æ®ï¼› AXI Beatsï¼ša burst can comprise multiple data transfers, or AXI Beats.è¡¨ç¤º AXI burst çš„ç»„æˆï¼Œä¸€ä¸ª Beat å°±æ˜¯ä¸€ä¸ª transferã€‚ ä¸‰è€…çš„å…³ç³»ï¼šåœ¨ AXI ä¼ è¾“äº‹åŠ¡ï¼ˆTransactionï¼‰ä¸­ï¼Œæ•°æ®ä»¥çªå‘ä¼ è¾“ï¼ˆBurstï¼‰çš„å½¢å¼ç»„ç»‡ã€‚ä¸€æ¬¡çªå‘ä¼ è¾“ä¸­å¯ä»¥åŒ…å«ä¸€è‡³å¤šä¸ªæ•°æ®ï¼ˆTransferï¼‰ã€‚æ¯ä¸ª transfer å› ä¸ºä½¿ç”¨ä¸€ä¸ªå‘¨æœŸï¼Œåˆè¢«ç§°ä¸ºä¸€æ‹æ•°æ®ï¼ˆBeatï¼‰ã€‚ $$\\text{Transaction} = M \\text{Burst} ,M \\geq 1 \\\\text{Burst} = N \\text{Transfer( or Beat)} ,N \\geq 1$$ åœ¨åœ°å€é€šé“ä¸­æœ‰ä¸‰ä¸ªä¿¡å·æ§åˆ¶è¿›è¡Œæ§åˆ¶ï¼ŒåŒ…æ‹¬ï¼š ARLEN(Burst Length) æŒ‡ä¸€æ¬¡çªå‘ä¼ è¾“ä¸­åŒ…å«çš„æ•°æ®ä¼ è¾“ (transfer) æ•°é‡ï¼Œåœ¨åè®®ä¸­ä½¿ç”¨ AxLen ä¿¡å·æ§åˆ¶ã€‚åœ¨ AXI4 ä¸­ï¼ŒINCR ç±»å‹æœ€å¤§æ”¯æŒé•¿åº¦ä¸º 256ï¼Œå…¶ä»–ç±»å‹æœ€å¤§é•¿åº¦ä¸º 16ã€‚è€Œ AXI3 ä¸­è¿™ä¸€æ•°å­—æ— è®ºä½•ç§æ¨¡å¼å‡ä¸º 16ã€‚å› æ­¤ AXI4 ä¸­ AxLen ä¿¡å·ä½å®½ä¸º 8bitï¼ŒAXI3 ä¸­çš„ AxLen åˆ™ä»…éœ€è¦ 4bitã€‚ ARSIZE(Burst Size) æŒ‡ä¼ è¾“ä¸­çš„æ•°æ®ä½å®½ï¼Œå…·ä½“åœ°ï¼Œæ˜¯æ¯å‘¨æœŸä¼ è¾“æ•°æ®çš„å­—èŠ‚æ•°é‡ï¼Œåœ¨åè®®ä¸­ä½¿ç”¨ AXSIZE ä¿¡å·æ§åˆ¶ã€‚çªå‘ä¼ è¾“æ•°æ®å®½åº¦ä¸èƒ½è¶…è¿‡æ•°æ®æ€»çº¿æœ¬èº«çš„ä½å®½ã€‚è€Œå½“æ•°æ®æ€»çº¿ä½å®½å¤§äºçªå‘ä¼ è¾“å®½åº¦æ—¶ï¼Œå°†æ ¹æ®åè®®çš„ç›¸å…³è§„å®šï¼Œå°†æ•°æ®åœ¨éƒ¨åˆ†æ•°æ®çº¿ä¸Šä¼ è¾“ã€‚ ARBURST(Burst Type) Burst Typeï¼šAXI åè®®ä¸­æ”¯æŒä¸åŒçš„ Burst ä¼ è¾“ç±»å‹ï¼Œä¸»è¦åˆ† FIXEDã€INCRã€WRAPã€‚ FIXED ä¼ è¾“ä¸ºåœ°å€å›ºå®šä¼ è¾“ï¼Œæ‰€æœ‰ä¼ è¾“éƒ½ä¼šå†™åœ¨åŒä¸€ä¸ªåœ°å€ä¸­ã€‚ä¸»è¦åº”ç”¨åœ¨ FIFO çš„ä¼ è¾“ä¸­ï¼Œå› ä¸º FIFO ä¸ºå…ˆå…¥å…ˆå‡ºï¼Œåªéœ€è¦å¾€åŒä¸€ä¸ªåœ°å€å†™æ•°æ®å³å¯ã€‚ INCR ä¼ è¾“ä¸ºåœ°å€é€’å¢ä¼ è¾“ï¼Œå¯æ ¹æ®å…·ä½“çš„é…ç½®æœ‰å›ºå®šé•¿åº¦é€’å¢å’Œéå®šé•¿é€’å¢ã€‚å¤§éƒ¨åˆ†çš„æ•°æ®ä¼ è¾“éƒ½æ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå°¤å…¶æ˜¯åœ¨å†…å­˜è®¿é—®ä¸­ï¼Œå¯ä»¥å¤§å¤§æé«˜æ•ˆç‡ã€‚ WRAP ä¼ è¾“ä¸ºåœ°å€å›ç¯ä¼ è¾“ï¼Œåœ¨ä¸€å®šé•¿åº¦åä¼šå›ç¯åˆ°èµ·å§‹åœ°å€ã€‚ä¸»è¦åº”ç”¨åœ¨ Cache æ“ä½œä¸­ï¼Œå› ä¸º cache æ˜¯æŒ‰ç…§ cache line è¿›è¡Œæ“ä½œï¼Œé‡‡ç”¨ wrap ä¼ è¾“å¯ä»¥æ–¹ä¾¿çš„å®ç°ä»å†…å­˜ä¸­å–å›æ•´ä¸ª cache lineã€‚ AXI burst è¯»æ“ä½œï¼šmaster åªéœ€è¦å‘é€ burst çš„èµ·å§‹åœ°å€ï¼Œslave ä¼šæ ¹æ® burst çš„èµ·å§‹åœ°å€ä¸ burst åœºåœ°è‡ªåŠ¨è¿›è¡Œåœ°å€è®¡ç®—ï¼Œå°†å¯¹åº”çš„æ•°æ®ä¸å“åº”å‘é€åˆ° master ä¾§ã€‚ AXI burst å†™æ“ä½œä¸­ï¼Œä¹Ÿåªéœ€è¦å‘é€ burst å†™çš„èµ·å§‹åœ°å€ï¼Œslave åªéœ€è¦æ¥å—èµ·å§‹åœ°å€ï¼Œç„¶åæ ¹æ®ä¼ è¾“çš„é•¿åº¦å°†æ•°æ®ä¼ è¾“åˆ°å¯¹åº”çš„åœ°å€ç¼“å­˜ä¸­ã€‚åªéœ€è¦è¿›è¡Œä¸€æ¬¡æ¡æ‰‹å°±å¯ä»¥å®ç°åœ°å€é€šé“çš„è¯·æ±‚ä¼ è¾“ï¼Œé¿å…ç³»ç»Ÿæ€»çº¿çš„å ç”¨ã€‚ æ•°æ®ç»“æ„ï¼ˆData read and write structureï¼‰è¯»å†™æ•°æ®ç»“æ„ä¸­å£°æ˜äº†å‡ ç§æ•°æ®ä¼ è¾“æ–¹å¼ã€‚ åœ¨ä»‹ç»è¿™äº›ä¼ è¾“æ–¹å¼ä¹‹å‰ï¼Œéœ€è¦äº†è§£WSTRB(Write strobes) å†™é€‰é€šä¿¡å·ã€‚å†™é€‰é€šä¿¡å· WSTRB å…è®¸åœ¨å†™æ•°æ®æ€»çº¿ä¸Šè¿›è¡Œ ç¨€ç–æ•°æ® ä¼ è¾“ã€‚æ¯ä¸ªå†™é€‰é€šä¿¡å·å¯¹åº”å†™æ•°æ®æ€»çº¿ä¸Šçš„ä¸€ä¸ªå­—èŠ‚ã€‚å½“å†™é€‰é€šæ–­è¨€æ—¶ï¼Œè¡¨ç¤ºå†™æ•°æ®æ€»çº¿ä¸Šå¯¹åº”çš„å­—èŠ‚é€šé“ä¸­åŒ…å«å°†è¢«æ›´æ–°åˆ° memory çš„æœ‰æ•ˆä¿¡æ¯ã€‚ å†™æ•°æ®æ€»çº¿ä¸Šæ¯ 8 ä½å…·æœ‰ä¸€ä¸ªå†™é€‰é€šä½ï¼Œå› æ­¤ WSTRB[n] å¯¹åº” WDATA[(8 x n) + 7 : (8 x n)]ã€‚é»˜è®¤æƒ…å†µä¸‹ WSTRB = 0xFFFFã€‚ä¹Ÿå°±æ˜¯æ‰€æœ‰é€šè·¯éƒ½æ˜¯é€šçš„ã€‚ Narrow Transferå½“æœ¬æ¬¡ä¼ è¾“ä¸­æ•°æ®ä½å®½å°äºé€šé“æœ¬èº«çš„æ•°æ®ä½å®½æ—¶ï¼Œç§°ä¸ºçª„ä½å®½æ•°æ®ä¼ è¾“ï¼Œæˆ–è€…ç›´æ¥ç¿»è¯‘æˆçª„ä¼ è¾“ã€‚å¦‚ä¸‹å›¾ï¼Œä¼ è¾“æ€»çº¿ä¸º 32bitï¼Œä½†æ˜¯æ¯æ¬¡åªä¼ äº† 8 bitã€‚ çª„ä¼ è¾“å°±æ˜¯é€šè¿‡ STRB ä¿¡å·æŒ‡å®šæœ‰æ•ˆä¼ è¾“æ•°æ®çš„ä½å®½æ¥å®ç°ã€‚é’ˆå¯¹ä¸€äº›ç‰¹å®šçš„å¯„å­˜å™¨è¯»å†™ï¼Œæˆ–è€…åœ¨ä¸åŒæ•°æ®ä½å®½çš„æ€»çº¿ä¼ è¾“ä¸­ä¼šä½¿ç”¨çª„ä¼ è¾“æ“ä½œã€‚å¦‚å›¾ï¼Œç¬¬ä¸€æ¬¡ä¼ è¾“æ—¶ï¼ŒWSTRB ä¿¡å·ä¸º 0x01ï¼ŒWSTRB = bâ€™001ï¼Œè¡¨ç¤º WDATA[7:0] æ•°æ®æœ‰æ•ˆã€‚ éœ€è¦æ³¨æ„åœ¨å¤šç¬”è¿ç»­çš„çª„ä¼ è¾“æ“ä½œä¸­ï¼ŒSTRB ä¼šéšç€åœ°å€é€’å¢è¿›è¡Œå“åº”çš„å˜åŒ–ï¼Œè¿™æ ·æ–¹ä¾¿åœ¨ç³»ç»Ÿè®¾è®¡ä½¿ç”¨ä¸­å¯ä»¥æ–¹ä¾¿çš„å°†çª„ä¼ è¾“åˆå¹¶ï¼Œä»è€Œæå‡ç³»ç»Ÿä¼ è¾“æ•ˆç‡ã€‚ Unaligned TransferAXI åè®®è§„å®šå•æ¬¡ burst ä¼ è¾“ä¸­çš„æ•°æ®ï¼Œå…¶åœ°å€ä¸èƒ½è·¨è¶Š 4KB è¾¹ç•Œã€‚ä¹Ÿå°±æ˜¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œ 4K å¯¹é½ã€‚ä½†æ˜¯åœ¨æŸäº›æ—¶å€™ï¼Œä¼šæœŸæœ›åœ¨éå¯¹é½çš„åœ°å€å¼€å§‹ä¸€ä¸ªçªå‘ï¼Œå³éå¯¹é½ä¼ è¾“ã€‚ åè®®ä¸­ä¹‹æ‰€ä»¥è§„å®šä¸€ä¸ª burst ä¸èƒ½è·¨è¶Š 4K è¾¹ç•Œæ˜¯ä¸ºäº†é¿å…ä¸€æ¬¡ burst è®¿é—®ä¸¤ä¸ª slaveï¼ˆæ¯ä¸ª slave çš„åœ°å€ç©ºé—´æ˜¯ 4K/1K å¯¹é½çš„ï¼‰ã€‚4K å¯¹é½æœ€å¤§åŸå› æ˜¯ç³»ç»Ÿä¸­å®šä¹‰ä¸€ä¸ª page å¤§å°æ˜¯ 4Kï¼Œè€Œæ‰€è°“çš„ 4K è¾¹ç•Œæ˜¯æŒ‡ä½ 12bit ä¸º 0 çš„åœ°å€ã€‚ éå¯¹é½ä¼ è¾“æ˜¯æŒ‡æœ‰äº›ä¼ è¾“æŒ‡ä»¤ä¸æ˜¯æŒ‰ç…§ word å¯¹é½ï¼Œè€Œæ˜¯æŒ‰ç…§ Byte å¯¹é½è¿›è¡Œä¼ è¾“ã€‚èµ·å§‹åœ°å€å¯èƒ½æ˜¯ä»»æ„çš„åœ°å€ã€‚å¦‚ä¸‹å›¾ä¸­ï¼Œèµ·å§‹åœ°å€ä¸º 0x1ï¼Œåˆ™åœ¨ç³»ç»Ÿä¸Šéœ€è¦æŒ‰ç…§éå¯¹é½çš„æ–¹å¼è¿›è¡Œä¼ è¾“ã€‚ç¬¬ä¸€æ¬¡ä¼ è¾“é‡‡ç”¨ strb ä¿¡å·æŒ‡å®šå¯¹åº”çš„ Byte æœ‰æ•ˆï¼Œåé¢çš„ä¼ è¾“å¯ä»¥æŒ‰ç…§æ­£å¸¸çš„ä¼ è¾“è¿›è¡Œã€‚ ä¸‹å›¾æ˜¯ä¸€äº›ä¼ è¾“ç¤ºä¾‹ï¼Œæœ‰é˜´å½±çš„æ ¼å­è¡¨ç¤ºå½“å‰å­—èŠ‚ä¸ä¼šè¢«ä¼ è¾“ã€‚ å›¾ä¸€ä¸ºæ­£å¸¸çš„å¯¹é½ä¼ è¾“ï¼Œä¼ è¾“èµ·å§‹åœ°å€ä¸º 0x00ã€‚ å›¾äºŒä¸ºéå¯¹é½ä¼ è¾“ï¼Œèµ·å§‹åœ°å€ä¸º 0x01ï¼Œç¬¬ä¸€ä¸ªæ ¼å­å¯¹åº”çš„ WSTRB = bâ€™1110ã€‚ å›¾ä¸‰åŒä¸Šï¼Œåªæ˜¯ Burst length ä¸º 5ã€‚ å›¾å››ä¹Ÿä¸ºéå¯¹é½ä¼ è¾“ï¼Œèµ·å§‹åœ°å€ä¸º 0x07ã€‚å¯¹åº”çš„ WSTRB = bâ€™1000ã€‚","categories":[{"name":"é€šä¿¡åè®®","slug":"é€šä¿¡åè®®","permalink":"http://example.com/categories/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/"}],"tags":[{"name":"AMBA","slug":"AMBA","permalink":"http://example.com/tags/AMBA/"},{"name":"AXI","slug":"AXI","permalink":"http://example.com/tags/AXI/"},{"name":"æ€»çº¿åè®®","slug":"æ€»çº¿åè®®","permalink":"http://example.com/tags/%E6%80%BB%E7%BA%BF%E5%8D%8F%E8%AE%AE/"},{"name":"åè®®","slug":"åè®®","permalink":"http://example.com/tags/%E5%8D%8F%E8%AE%AE/"},{"name":"é€šä¿¡åè®®","slug":"é€šä¿¡åè®®","permalink":"http://example.com/tags/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/"}]},{"title":"C è¯­è¨€å®ç°ç®€å•æœ‰é™çŠ¶æ€æœº","slug":"Cè¯­è¨€å®ç°ç®€å•æœ‰é™çŠ¶æ€æœº","date":"2022-05-15T04:41:30.000Z","updated":"2022-10-15T03:14:29.173Z","comments":true,"path":"2022/05/15/Cè¯­è¨€å®ç°ç®€å•æœ‰é™çŠ¶æ€æœº/","link":"","permalink":"http://example.com/2022/05/15/C%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA/","excerpt":"","text":"ç®€ä»‹å¸¸è¯´çš„çŠ¶æ€æœºæ˜¯æœ‰é™çŠ¶æ€æœº FSMï¼Œæ˜¯è¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦è®¡ç®—æ¨¡å‹ã€‚ä¸‰ä¸ªç‰¹å¾ï¼š çŠ¶æ€æ€»æ•°ï¼ˆstateï¼‰æ˜¯æœ‰é™çš„ã€‚ ä»»ä¸€æ—¶åˆ»ï¼Œåªå¤„åœ¨ä¸€ç§çŠ¶æ€ä¹‹ä¸­ã€‚ æŸç§æ¡ä»¶ä¸‹ï¼Œä¼šä»ä¸€ç§çŠ¶æ€è½¬å˜ï¼ˆtransitionï¼‰åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚ è®¾è®¡çŠ¶æ€æœºçš„å…³é”®ç‚¹ï¼šå½“å‰çŠ¶æ€ã€å¤–éƒ¨è¾“å…¥ã€ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ çŠ¶æ€æœºåˆ†ç±»Moore å‹çŠ¶æ€æœºMoore å‹çŠ¶æ€æœºç‰¹ç‚¹æ˜¯ï¼šè¾“å‡ºåªä¸å½“å‰çŠ¶æ€æœ‰å…³ï¼ˆä¸è¾“å…¥ä¿¡å·æ— å…³ï¼‰ã€‚ç›¸å¯¹ç®€å•ï¼Œè€ƒè™‘çŠ¶æ€æœºçš„ä¸‹ä¸€ä¸ªçŠ¶æ€æ—¶åªéœ€è¦è€ƒè™‘å®ƒçš„å½“å‰çŠ¶æ€å°±è¡Œäº†ã€‚ Mealy å‹çŠ¶æ€æœºMealy å‹çŠ¶æ€æœºçš„ç‰¹ç‚¹æ˜¯ï¼šè¾“å‡ºä¸åªå’Œå½“å‰çŠ¶æ€æœ‰å…³ï¼Œè¿˜ä¸è¾“å…¥ä¿¡å·æœ‰å…³ã€‚çŠ¶æ€æœºæ¥æ”¶åˆ°ä¸€ä¸ªè¾“å…¥ä¿¡å·éœ€è¦è·³è½¬åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€æ—¶ï¼ŒçŠ¶æ€æœºç»¼åˆè€ƒè™‘ 2 ä¸ªæ¡ä»¶ï¼ˆå½“å‰çŠ¶æ€ã€è¾“å…¥å€¼ï¼‰åæ‰å†³å®šè·³è½¬åˆ°å“ªä¸ªçŠ¶æ€ã€‚ å®ç°ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºä»£ç å‚è€ƒAstarLight/FSM-frameworkã€‚ ä»¥å°æ˜çš„ä¸€å¤©è®¾è®¡å‡ºä¸€ä¸ªçŠ¶æ€æœºï¼Œä¸‹å›¾ä¸ºçŠ¶æ€è½¬ç§»å›¾ï¼š é¦–å…ˆï¼Œæœ‰é™çŠ¶æ€æœºçš„çŠ¶æ€æ˜¯æœ‰é™çš„ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€å¤©ä¸­çš„çŠ¶æ€ï¼š 12345678enum&#123; GET_UP, GO_TO_SCHOOL, HAVE_LUNCH, DO_HOMEWORK, SLEEP,&#125;; çŠ¶æ€æœºåœ¨æ²¡æœ‰äº‹ä»¶çš„é©±åŠ¨ä¸‹å°±æ˜¯ä¸€æ½­æ­»æ°´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰å‡ºä¸€äº›ä¼šå‘ç”Ÿçš„äº‹ä»¶ï¼Œå»é©±åŠ¨çŠ¶æ€æœºçš„è¿è½¬ï¼š 123456enum&#123; EVENT1 = 1, EVENT2, EVENT3,&#125;; å†å®šä¹‰ä¸€äº›åœ¨æŸä¸ªçŠ¶æ€ä¸‹éœ€è¦å¤„ç†çš„åŠ¨ä½œï¼Œä¹Ÿå°±æ˜¯å‡½æ•°ï¼š 12345678910111213141516171819202122232425262728293031void GetUp()&#123; // do something printf(&quot;xiao ming gets up!\\n&quot;);&#125;void Go2School()&#123; // do something printf(&quot;xiao ming goes to school!\\n&quot;);&#125;void HaveLunch()&#123; // do something printf(&quot;xiao ming has lunch!\\n&quot;);&#125;void DoHomework()&#123; // do something printf(&quot;xiao ming does homework!\\n&quot;);&#125;void Go2Bed()&#123; // do something printf(&quot;xiao ming goes to bed!\\n&quot;);&#125; å®šä¹‰ä¸€ä¸ªçŠ¶æ€è¡¨ç»“æ„ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€æœºçš„çŠ¶æ€ï¼š 1234567typedef struct FsmTable_s&#123; int event; //äº‹ä»¶ int CurState; //å½“å‰çŠ¶æ€ void (*eventActFun)(); //å‡½æ•°æŒ‡é’ˆ int NextState; //ä¸‹ä¸€ä¸ªçŠ¶æ€&#125;FsmTable_t; æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™ä¸ªç»“æ„å®šä¹‰ä¸€ä¸ªçŠ¶æ€è¡¨ï¼ŒçŠ¶æ€æœºæ ¹æ®è¿™ä¸ªè¡¨è¿›è¡ŒçŠ¶æ€çš„æµè½¬ï¼š 123456789FsmTable_t XiaoMingTable[] =&#123; //&#123;åˆ°æ¥çš„äº‹ä»¶ï¼Œå½“å‰çš„çŠ¶æ€ï¼Œå°†è¦è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œä¸‹ä¸€ä¸ªçŠ¶æ€&#125; &#123; EVENT1, SLEEP, GetUp, GET_UP &#125;, &#123; EVENT2, GET_UP, Go2School, GO_TO_SCHOOL &#125;, &#123; EVENT3, GO_TO_SCHOOL, HaveLunch, HAVE_LUNCH &#125;, &#123; EVENT1, HAVE_LUNCH, DoHomework, DO_HOMEWORK &#125;, &#123; EVENT2, DO_HOMEWORK, Go2Bed, SLEEP &#125;,&#125;; å®šä¹‰ä¸€ä¸ªçŠ¶æ€æœºç»“æ„ï¼Œè¡¨ç¤ºä¸€ä¸ªçŠ¶æ€æœºï¼š 123456typedef struct FSM_s&#123; FsmTable_t* FsmTable; //æŒ‡å‘çš„çŠ¶æ€è¡¨ int curState; //FSMå½“å‰æ‰€å¤„çš„çŠ¶æ€&#125;FSM_t; æœ‰äº†è¿™äº›åŸºæœ¬çš„ç»“æ„ï¼Œå°±å¯ä»¥å†™ä¸»å‡½æ•°äº†ï¼š 12345678910111213141516171819202122232425262728293031323334int main()&#123; FSM_t fsm; // å®ä¾‹åŒ–ä¸€ä¸ªçŠ¶æ€æœº InitFsm(&amp;fsm); // åˆå§‹åŒ–çŠ¶æ€æœº int event = EVENT1; // åˆå§‹åŒ–äº‹ä»¶ï¼Œä¸ºäº†å¯åŠ¨çŠ¶æ€æœºæµè½¬ï¼Œ // å› ä¸ºçŠ¶æ€æœºåªæœ‰åœ¨æœ‰æ—¶é—´å‘ç”Ÿæ—¶æ‰ä¼šæ”¹å˜çŠ¶æ€ //å°æ˜çš„ä¸€å¤©,å‘¨è€Œå¤å§‹çš„ä¸€å¤©åˆä¸€å¤©ï¼Œè¿›è¡Œç€ç›¸åŒçš„æ´»åŠ¨ while (1) &#123; printf(&quot;event %d is coming...\\n&quot;, event); FSM_EventHandle(&amp;fsm, event); // æœ‰äº†åˆå§‹äº‹ä»¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œ // å†å†™ä¸€ä¸ªå¤„ç†äº‹ä»¶çš„å‡½æ•° printf(&quot;fsm current state %d\\n&quot;, fsm.curState); test(&amp;event); Sleep(1); //ä¼‘çœ 1ç§’ï¼Œæ–¹ä¾¿è§‚å¯Ÿ &#125; return 0;&#125;// æµ‹è¯•ç”¨çš„ï¼Œæ¨¡æ‹Ÿäº‹ä»¶çš„å‘ç”Ÿvoid test(int *event)&#123; if (*event == 3) &#123; *event = 1; &#125; else &#123; (*event)++; &#125; &#125; ç¼–å†™åˆå§‹åŒ–çŠ¶æ€æœºçš„å‡½æ•°ï¼š 12345678int g_state_max_num = 0; // çŠ¶æ€æœºçš„çŠ¶æ€æœ€å¤§æ•°é‡ï¼Œæ ¹æ®çŠ¶æ€è¡¨çš„å¤§å°æ¥è®¡ç®—// åˆå§‹åŒ–FSMvoid InitFsm(FSM_t* pFsm)&#123; g_state_max_num = sizeof(XiaoMingTable) / sizeof(FsmTable_t); pFsm-&gt;curState = SLEEP; // åˆå§‹çŠ¶æ€ä¸ºç¡è§‰ pFsm-&gt;FsmTable = XiaoMingTable;&#125; ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ï¼š 123456789101112131415161718192021222324/* äº‹ä»¶å¤„ç† */void FSM_EventHandle(FSM_t* pFsm, int event)&#123; FsmTable_t* pActTable = pFsm-&gt;FsmTable; void (*eventActFun)() = NULL; //å‡½æ•°æŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©º int NextState; int CurState = pFsm-&gt;curState; /* è·å–å½“å‰åŠ¨ä½œå‡½æ•° */ for (int i = 0; i&lt;g_max_num; i++) &#123; //å½“ä¸”ä»…å½“å½“å‰çŠ¶æ€ä¸‹æ¥ä¸ªæŒ‡å®šçš„äº‹ä»¶ï¼Œæˆ‘æ‰æ‰§è¡Œå®ƒ if (event == pActTable[i].event &amp;&amp; CurState == pActTable[i].CurState) &#123; pActTable[i].eventActFun(); // æ‰§è¡ŒåŠ¨ä½œå‡½æ•° FSM_StateTransfer(pFsm, pActTable[i].NextState); // æ‰§è¡ŒçŠ¶æ€è½¬ç§» break; &#125; else &#123; // do nothing &#125; &#125;&#125; 12345/* çŠ¶æ€è¿ç§» */void FSM_StateTransfer(FSM_t* pFsm, int state)&#123; pFsm-&gt;curState = state;&#125; å‚è€ƒèµ„æ–™Linux ç¼–ç¨‹ä¹‹æœ‰é™çŠ¶æ€æœº FSM çš„ç†è§£ä¸å®ç° - Madcola - åšå®¢å›­JavaScript ä¸æœ‰é™çŠ¶æ€æœº - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—æœ‰é™çŠ¶æ€æœº - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"FSM","slug":"FSM","permalink":"http://example.com/tags/FSM/"},{"name":"æœ‰é™çŠ¶æ€æœº","slug":"æœ‰é™çŠ¶æ€æœº","permalink":"http://example.com/tags/%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA/"}]},{"title":"é“¾æ¥è„šæœ¬å…¥é—¨","slug":"é“¾æ¥è„šæœ¬å…¥é—¨","date":"2022-05-08T13:32:23.000Z","updated":"2022-10-15T03:14:29.898Z","comments":true,"path":"2022/05/08/é“¾æ¥è„šæœ¬å…¥é—¨/","link":"","permalink":"http://example.com/2022/05/08/%E9%93%BE%E6%8E%A5%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8/","excerpt":"","text":"é‡å®šä½ä½ç½®æ— å…³ç¼–ç  (PICï¼Œposition independent code)ï¼šæ±‡ç¼–æºæ–‡ä»¶è¢«ç¼–ç æˆäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæ—¶ç¼–ç æ–¹å¼ä¸ä½ç½®ï¼ˆå†…å­˜åœ°å€ï¼‰æ— å…³ã€‚ ä½ç½®æœ‰å…³ç¼–ç ï¼šæ±‡ç¼–æºç ç¼–ç æˆäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºåå’Œå†…å­˜åœ°å€æ˜¯æœ‰å…³çš„ã€‚ æˆ‘ä»¬åœ¨è®¾è®¡ä¸€ä¸ªç¨‹åºæ—¶ï¼Œä¼šç»™è¿™ä¸ªç¨‹åºæŒ‡å®šä¸€ä¸ªè¿è¡Œåœ°å€ï¼ˆé“¾æ¥åœ°å€ï¼‰ã€‚å°±æ˜¯è¯´æˆ‘ä»¬åœ¨ç¼–è¯‘ç¨‹åºæ—¶å…¶å®å¿ƒé‡Œæ˜¯çŸ¥é“æˆ‘ä»¬ç¨‹åºå°†æ¥è¢«è¿è¡Œæ—¶çš„åœ°å€ï¼ˆè¿è¡Œåœ°å€ï¼‰çš„ï¼Œè€Œä¸”å¿…é¡»ç»™ç¼–è¯‘å™¨é“¾æ¥å™¨æŒ‡å®šè¿™ä¸ªåœ°å€ï¼ˆé“¾æ¥åœ°å€ï¼‰æ‰è¡Œã€‚ æœ€åå¾—åˆ°çš„äºŒè¿›åˆ¶ç¨‹åºç†è®ºä¸Šæ˜¯å’Œä½ æŒ‡å®šçš„è¿è¡Œåœ°å€æœ‰å…³çš„ï¼Œå°†æ¥è¿™ä¸ªç¨‹åºè¢«æ‰§è¡Œæ—¶å¿…é¡»æ”¾åœ¨å½“æ—¶ç¼–è¯‘é“¾æ¥æ—¶ç»™å®šçš„é‚£ä¸ªåœ°å€ï¼ˆé“¾æ¥åœ°å€ï¼‰ä¸‹æ‰è¡Œï¼Œå¦åˆ™ä¸èƒ½è¿è¡Œï¼ˆå°±å«ä½ç½®æœ‰å…³ä»£ç ï¼‰ã€‚ä½†æ˜¯æœ‰ä¸ªåˆ«ç‰¹åˆ«çš„æŒ‡ä»¤ä»–å¯ä»¥è·ŸæŒ‡å®šçš„åœ°å€ï¼ˆé“¾æ¥åœ°å€ï¼‰æ²¡æœ‰å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›ä»£ç å®é™…è¿è¡Œæ—¶ä¸ç®¡æ”¾åœ¨å“ªé‡Œéƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚ è¿è¡Œåœ°å€ï¼šç”±è¿è¡Œæ—¶å†³å®šçš„ï¼ˆç¼–è¯‘é“¾æ¥æ—¶æ˜¯æ— æ³•ç»å¯¹ç¡®å®šè¿è¡Œæ—¶åœ°å€çš„ï¼‰ã€‚ é“¾æ¥åœ°å€ï¼šç”±ç¨‹åºå‘˜åœ¨ç¼–è¯‘é“¾æ¥çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Makefileä¸­-Ttext xxxæˆ–è€…åœ¨é“¾æ¥è„šæœ¬ä¸­æŒ‡å®šçš„ã€‚ç¨‹åºå‘˜äº‹å…ˆä¼šé¢„çŸ¥è‡ªå·±çš„ç¨‹åºçš„æ‰§è¡Œè¦æ±‚ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæœŸæœ›çš„æ‰§è¡Œåœ°å€ï¼Œå¹¶ä¸”ä¼šç”¨è¿™ä¸ªåœ°å€æ¥åšé“¾æ¥åœ°å€ã€‚ ä¸¾ä¾‹ï¼šLinux ä¸­çš„åº”ç”¨ç¨‹åºã€‚gcc hello.c -o helloï¼Œè¿™æ—¶ä½¿ç”¨é»˜è®¤çš„é“¾æ¥åœ°å€å°±æ˜¯0x0ï¼Œæ‰€ä»¥åº”ç”¨ç¨‹åºéƒ½æ˜¯é“¾æ¥åœ¨0x0åœ°å€çš„ã€‚å› ä¸ºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œåœ¨è¿™ä¸ªè¿›ç¨‹ä¸­è¿™ä¸ªåº”ç”¨ç¨‹åºç‹¬äº« 4G çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚æ‰€ä»¥åº”ç”¨ç¨‹åºéƒ½å¯ä»¥é“¾æ¥åˆ° 0 åœ°å€ï¼Œå› ä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½æ˜¯ä» 0 åœ°å€å¼€å§‹çš„ã€‚ï¼ˆç¼–è¯‘æ—¶å¯ä»¥ä¸ç»™å®šé“¾æ¥åœ°å€è€Œéƒ½ä½¿ç”¨0x0ï¼‰ ç¼–è¯‘é“¾æ¥è¿‡ç¨‹æ¯ä¸ªè¿‡ç¨‹çš„ä½œç”¨ é¢„ç¼–è¯‘ï¼šé¢„ç¼–è¯‘å™¨æ‰§è¡Œã€‚æ›¿æ¢å®å®šä¹‰ï¼Œåˆ é™¤æ³¨é‡Šç­‰å·¥ä½œã€‚ ç¼–è¯‘ï¼šç¼–è¯‘å™¨æ¥æ‰§è¡Œã€‚æŠŠæºç .c .Sç¼–ç¨‹æœºå™¨ç .oæ–‡ä»¶ã€‚ é“¾æ¥ï¼šé“¾æ¥å™¨æ¥æ‰§è¡Œã€‚æŠŠ.oæ–‡ä»¶ä¸­çš„å„å‡½æ•°ï¼ˆæ®µï¼‰æŒ‰ç…§ä¸€å®šè§„åˆ™ï¼ˆé“¾æ¥è„šæœ¬æ¥æŒ‡å®šï¼‰ç´¯ç§¯åœ¨ä¸€èµ·ï¼Œå½¢æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ stripï¼šstrip æ˜¯æŠŠå¯æ‰§è¡Œç¨‹åºä¸­çš„ç¬¦å·ä¿¡æ¯ç»™æ‹¿æ‰ï¼Œä»¥èŠ‚çœç©ºé—´ã€‚ï¼ˆDebug ç‰ˆæœ¬å’Œ Release ç‰ˆæœ¬ï¼‰ objcopyï¼šç”±å¯æ‰§è¡Œç¨‹åºç”Ÿæˆå¯çƒ§å½•çš„é•œåƒbinæ–‡ä»¶ã€‚ ç¼–è¯‘åç”Ÿæˆçš„æ®µæ®µå°±æ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æŠŠæ•´ä¸ªç¨‹åºçš„æ‰€æœ‰ä¸œè¥¿åˆ†æˆäº†ä¸€ä¸ªä¸€ä¸ªçš„æ®µï¼Œç»™æ¯ä¸ªæ®µèµ·ä¸ªåå­—ï¼Œç„¶ååœ¨é“¾æ¥æ—¶å°±å¯ä»¥ç”¨è¿™ä¸ªåå­—æ¥æŒ‡ç¤ºè¿™äº›æ®µã€‚ä¹Ÿå°±æ˜¯è¯´ç»™æ®µå‘½åå°±æ˜¯ä¸ºäº†åœ¨é“¾æ¥è„šæœ¬ä¸­ç”¨æ®µåæ¥è®©æ®µæ”¾åœ¨åˆé€‚çš„ä½ç½®ã€‚ æ®µååˆ†ä¸º 2 ç§ï¼šä¸€ç§æ˜¯ç¼–è¯‘å™¨é“¾æ¥å™¨å†…éƒ¨å®šå¥½çš„ï¼Œä¸€ç§æ˜¯ç¨‹åºå‘˜è‡ªå·±æŒ‡å®šçš„ã€è‡ªå®šä¹‰çš„æ®µåã€‚å·²æœ‰æ®µåï¼š ä»£ç æ®µï¼šï¼ˆ.textï¼‰ï¼Œåˆå«æ–‡æœ¬æ®µï¼Œä»£ç æ®µå…¶å®å°±æ˜¯å‡½æ•°ç¼–è¯‘åç”Ÿæˆçš„ä¸œè¥¿ æ•°æ®æ®µï¼šï¼ˆ.dataï¼‰ï¼Œæ•°æ®æ®µå°±æ˜¯ C è¯­è¨€ä¸­æœ‰æ˜¾å¼åˆå§‹åŒ–ä¸ºé 0 çš„å…¨å±€å˜é‡ bss æ®µï¼šï¼ˆ.bssï¼‰ï¼Œåˆå« ZIï¼ˆzero initialï¼‰æ®µï¼Œå°±æ˜¯é›¶åˆå§‹åŒ–æ®µï¼Œå¯¹åº” C è¯­è¨€ä¸­åˆå§‹åŒ–ä¸º 0 çš„å…¨å±€å˜é‡ã€‚ è‡ªå®šä¹‰æ®µåï¼šæ®µåç”±ç¨‹åºå‘˜è‡ªå·±å®šä¹‰ï¼Œæ®µçš„å±æ€§å’Œç‰¹å¾ä¹Ÿç”±ç¨‹åºå‘˜è‡ªå·±å®šä¹‰ã€‚ C è¯­è¨€ä¸­å…¨å±€å˜é‡å¦‚æœæœªæ˜¾å¼åˆå§‹åŒ–ï¼Œå€¼æ˜¯ 0ã€‚æœ¬è´¨å°±æ˜¯ C è¯­è¨€æŠŠè¿™ç±»å…¨å±€å˜é‡æ”¾åœ¨äº† bss æ®µï¼Œä»è€Œä¿è¯äº†ä¸º 0ã€‚C è¿è¡Œæ—¶ç¯å¢ƒå¦‚ä½•ä¿è¯æ˜¾å¼åˆå§‹åŒ–ä¸ºé 0 çš„å…¨å±€å˜é‡çš„å€¼åœ¨ main ä¹‹å‰å°±è¢«èµ‹å€¼äº†ï¼Ÿå°±æ˜¯å› ä¸ºå®ƒæŠŠè¿™ç±»å˜é‡æ”¾åœ¨äº†.data æ®µä¸­ï¼Œè€Œ.data æ®µä¼šåœ¨ main æ‰§è¡Œä¹‹å‰è¢«å¤„ç†ï¼ˆåˆå§‹åŒ–ï¼‰ã€‚ é“¾æ¥è„šæœ¬é“¾æ¥è„šæœ¬åšä»€ä¹ˆäº‹ï¼Ÿé“¾æ¥è„šæœ¬å…¶å®æ˜¯ä¸ªè§„åˆ™æ–‡ä»¶ï¼Œä»–æ˜¯ç¨‹åºå‘˜ç”¨æ¥æŒ‡æŒ¥é“¾æ¥å™¨å·¥ä½œçš„ã€‚é“¾æ¥å™¨ä¼šå‚è€ƒé“¾æ¥è„šæœ¬ï¼Œå¹¶ä¸”ä½¿ç”¨å…¶ä¸­è§„å®šçš„è§„åˆ™æ¥å¤„ç†.oæ–‡ä»¶ä¸­é‚£äº›æ®µï¼Œå°†å…¶é“¾æ¥æˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºã€‚ é“¾æ¥è„šæœ¬çš„å…³é”®å†…å®¹æœ‰ 2 éƒ¨åˆ†ï¼šæ®µå + åœ°å€ï¼ˆä½œä¸ºé“¾æ¥åœ°å€çš„å†…å­˜åœ°å€ï¼‰ã€‚æŠŠæ®µï¼Œæ”¾åˆ°ä¸€ä¸ªåœ°å€çš„æ„æ€ã€‚ é“¾æ¥è„šæœ¬å°±åƒæ˜¯ä¸€ä¸ªä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œçš„ä¸€ä¸ªä»£ç  . è¡¨ç¤ºå½“å‰ä½ç½® = è¡¨ç¤ºèµ‹å€¼ * è¡¨ç¤ºé€šé…ç¬¦ é“¾æ¥è„šæœ¬é‡Œçš„ç¬¦å·ï¼Œå¯ä»¥åœ¨æ±‡ç¼–æºç é‡Œå¼•ç”¨ã€‚ ä¸€ä¸ªç®€æ˜“ç¤ºä¾‹ï¼š 1234567891011121314151617181920SECTIONS&#123; . = 0xd0024000; # å½“å‰åœ°å€ä¸º0xd0024000 .text : &#123; start.o * (.text) # æ‰€æœ‰çš„textæ®µ &#125; .data : &#123; * (.data) &#125; bss_start = .; # bss_startçš„å€¼ä¸ºå½“å‰åœ°å€ï¼Œæ˜¯æ‰§è¡Œåˆ°è¿™é‡Œçš„åœ°å€ï¼Œä¸æ˜¯æœ€ä¸Šé¢. = 0xd0024000çš„åœ°å€ .bss : &#123; * (.bss) &#125; bss_end = .; &#125; æ€ä¹ˆåšï¼Ÿä»»åŠ¡ï¼šåœ¨ SRAM ä¸­å°†ä»£ç ä» 0xd0020010 é‡å®šä½åˆ° 0xd0024000ã€‚ ç¬¬ä¸€ç‚¹ï¼šé€šè¿‡é“¾æ¥è„šæœ¬å°†ä»£ç é“¾æ¥åˆ° 0xd0024000 é‡å®šä½ä»£ç çš„ä½œç”¨å°±æ˜¯ï¼šåœ¨PICæ‰§è¡Œå®Œä¹‹å‰ï¼ˆåœ¨ä»£ç ä¸­ç¬¬ä¸€å¥ä½ç½®æœ‰å…³ç æ‰§è¡Œä¹‹å‰ï¼‰å¿…é¡»å°†æ•´ä¸ªä»£ç æ¬ç§»åˆ°0xd0024000ä½ç½®å»æ‰§è¡Œï¼Œè¿™å°±æ˜¯é‡å®šä½ã€‚ ç¬¬äºŒç‚¹ï¼šdnw ä¸‹è½½æ—¶å°† bin æ–‡ä»¶ä¸‹è½½åˆ° 0xd0020010 è¿™æ ·å°±èƒ½å®Œæˆï¼Œä¸‹è½½ä»£ç ä¸è¿è¡Œä»£ç ä½ç½®ä¸åŒã€‚ ç¬¬ä¸‰ç‚¹ï¼šä»£ç æ‰§è¡Œæ—¶é€šè¿‡ä»£ç å‰æ®µçš„å°‘é‡ä½ç½®æ— å…³ç å°†æ•´ä¸ªä»£ç æ¬ç§»åˆ° 0xd0024000ã€‚ ç¬¬å››ç‚¹ï¼šä½¿ç”¨ä¸€ä¸ªé•¿è·³è½¬è·³è½¬åˆ° 0xd0024000 å¤„çš„ä»£ç ç»§ç»­æ‰§è¡Œï¼Œé‡å®šä½å®Œæˆã€‚ é•¿è·³è½¬ï¼šä¸€ç§è·³è½¬æŒ‡ä»¤ï¼Œç±»ä¼¼äºåˆ†æ”¯æŒ‡ä»¤ Bï¼ŒBL ç­‰ä½œç”¨çš„æŒ‡ä»¤ï¼Œè·³è½¬æŒ‡ä»¤é€šè¿‡ç»™ PCï¼ˆr15ï¼‰èµ‹ä¸€ä¸ªæ–°å€¼æ¥å®Œæˆä»£ç è·³è½¬ã€‚å½“æˆ‘ä»¬æ‰§è¡Œå®Œé‡å®šä½åï¼Œå®é™…ä¸Š SRAM ä¸­æœ‰ä¸¤ä»½ä»£ç çš„é•œåƒï¼ˆä¸€ä»½æ˜¯æˆ‘ä»¬ä¸‹è½½åˆ° 0xd0020010 å¤„çš„ï¼Œä¸€ä»½æ˜¯é‡å®šä½åˆ° 0xd0024000 å¤„çš„ï¼‰ï¼Œè¿™ä¸¤ä»½ä»£ç å†…å®¹å®Œå…¨ç›¸åŒã€‚ çŸ­è·³è½¬ï¼šçŸ­è·³è½¬æŒ‡ä»¤å¯ä»¥å®ç°å‘å‰æˆ–å‘å 32MB çš„åœ°å€ç©ºé—´è·³è½¬ã€‚ å½“é“¾æ¥åœ°å€å’Œè¿è¡Œåœ°å€ç›¸åŒæ˜¯ï¼ŒçŸ­è·³è½¬å’Œé•¿è·³è½¬å®é™…æ•ˆæœä¸€æ ·ã€‚ä½†æ˜¯å½“é“¾æ¥åœ°å€å’Œè¿è¡Œåœ°å€ä¸åŒæ—¶ï¼ŒçŸ­è·³è½¬å’Œé•¿è·³è½¬å°±æœ‰å·®å¼‚äº†ï¼Œè¿™æ—¶å€™æ®µè·³è½¬æ‰§è¡Œçš„æ˜¯è¿è¡Œåœ°å€å¤„çš„é‚£ä¸€ä»½ï¼Œè€Œé•¿è·³è½¬æ‰§è¡Œçš„æ˜¯é“¾æ¥åœ°å€çš„é‚£ä¸€ä»½ã€‚ é‡å®šä½å®é™…å°±æ˜¯åœ¨è¿è¡Œåœ°å€å¤„æ‰§è¡Œä¸€æ®µä½ç½®æ— å…³ç  PICï¼Œè®©è¿™æ®µ PICï¼ˆä¹Ÿå°±æ˜¯é‡å®šä½ä»£ç ï¼‰ä»è¿è¡Œåœ°å€å¤„æŠŠæ•´ä¸ªç¨‹åºé•œåƒæ‹·è´ä¸€ä»½åˆ°é“¾æ¥åœ°å€å¤„ï¼Œå®Œäº†ä¹‹åä½¿ç”¨ä¸€å¥é•¿è·³è½¬æŒ‡ä»¤ä»è¿è¡Œåœ°å€å¤„ç›´æ¥è·³è½¬åˆ°é“¾æ¥åœ°å€å¤„å»æ‰§è¡ŒåŒä¸€ä¸ªå‡½æ•°ï¼ˆled_blinkï¼‰ï¼Œè¿™æ ·å°±å®ç°äº†é‡å®šä½ä¹‹åçš„æ— ç¼è¿æ¥ã€‚ æ±‡ç¼–ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475/* * æ–‡ä»¶åï¼š led.s * ä½œè€…ï¼š æœ±è€å¸ˆï¼ˆæœ±å‹é¹ï¼‰ * æè¿°ï¼š æ¼”ç¤ºé‡å®šä½ï¼ˆåœ¨SRAMå†…éƒ¨é‡å®šä½ï¼‰ */#define WTCON 0xE2700000#define SVC_STACK 0xd0037d80.global _start // æŠŠ_starté“¾æ¥å±æ€§æ”¹ä¸ºå¤–éƒ¨ï¼Œè¿™æ ·å…¶ä»–æ–‡ä»¶å°±å¯ä»¥çœ‹è§_startäº†_start: // ç¬¬1æ­¥ï¼šå…³çœ‹é—¨ç‹—ï¼ˆå‘WTCONçš„bit5å†™å…¥0å³å¯ï¼‰ ldr r0, =WTCON ldr r1, =0x0 str r1, [r0] // ç¬¬2æ­¥ï¼šè®¾ç½®SVCæ ˆ ldr sp, =SVC_STACK // ç¬¬3æ­¥ï¼šå¼€/å…³icache mrc p15,0,r0,c1,c0,0; // è¯»å‡ºcp15çš„c1åˆ°r0ä¸­ //bic r0, r0, #(1&lt;&lt;12) // bit12 ç½®0 å…³icache orr r0, r0, #(1&lt;&lt;12) // bit12 ç½®1 å¼€icache mcr p15,0,r0,c1,c0,0; // ç¬¬4æ­¥ï¼šé‡å®šä½ adr r0, _start // adråŠ è½½æ—¶å°±å«çŸ­åŠ è½½ï¼Œæ­¤å¤„adræŒ‡ä»¤ç”¨äºåŠ è½½_startå½“å‰è¿è¡Œåœ°å€ï¼Œè¯¦è§£è§æ­£æ–‡ ldr r1, =_start // ldråŠ è½½æ—¶å¦‚æœç›®æ ‡å¯„å­˜å™¨æ˜¯pcå°±å«é•¿è·³è½¬ï¼Œå¦‚æœç›®æ ‡å¯„å­˜å™¨æ˜¯r1ç­‰å°±å«é•¿åŠ è½½ // æ­¤å¤„ldræŒ‡ä»¤ç”¨äºåŠ è½½_startçš„é“¾æ¥åœ°å€:0xd0024000 // bssæ®µçš„èµ·å§‹åœ°å€ ldr r2, =bss_start // å°±æ˜¯æˆ‘ä»¬é‡å®šä½ä»£ç çš„ç»“æŸåœ°å€ï¼Œé‡å®šä½åªéœ€é‡å®šä½ä»£ç æ®µå’Œæ•°æ®æ®µå³å¯ // è¯¥ç¬¦å·åœ¨é“¾æ¥è„šæœ¬é‡Œå®šä¹‰ cmp r0, r1 // æ¯”è¾ƒ_startçš„è¿è¡Œæ—¶åœ°å€å’Œé“¾æ¥åœ°å€æ˜¯å¦ç›¸ç­‰ beq clean_bss // å¦‚æœç›¸ç­‰è¯´æ˜ä¸éœ€è¦é‡å®šä½ï¼Œæ‰€ä»¥è·³è¿‡copy_loopï¼Œç›´æ¥åˆ°clean_bss // å¦‚æœä¸ç›¸ç­‰è¯´æ˜éœ€è¦é‡å®šä½ï¼Œé‚£ä¹ˆä¼šé¡ºåºæ‰§è¡Œä¸‹é¢çš„copy_loopè¿›è¡Œé‡å®šä½ // é‡å®šä½å®Œæˆåç»§ç»­æ‰§è¡Œclean_bssã€‚// ç”¨æ±‡ç¼–æ¥å®ç°çš„ä¸€ä¸ªwhileå¾ªç¯copy_loop: ldr r3, [r0], #4 // æº r0å†…å®¹å†™å…¥r3ï¼Œç„¶år0è‡ªå¢4 str r3, [r1], #4 // ç›®çš„ r3å†…å®¹å†™å…¥r1ï¼Œç„¶år1è‡ªå¢4 // è¿™ä¸¤å¥ä»£ç å°±å®Œæˆäº†4ä¸ªå­—èŠ‚å†…å®¹çš„æ‹·è´ cmp r1, r2 // r1å’Œr2éƒ½æ˜¯ç”¨ldråŠ è½½çš„ï¼Œéƒ½æ˜¯é“¾æ¥åœ°å€ï¼Œæ‰€ä»¥r1ä¸æ–­+4æ€»èƒ½ç­‰äºr2 bne copy_loop// æ¸…bssæ®µï¼Œå…¶å®å°±æ˜¯åœ¨é“¾æ¥åœ°å€å¤„æŠŠbssæ®µå…¨éƒ¨æ¸…é›¶clean_bss: ldr r0, =bss_start ldr r1, =bss_end cmp r0, r1 // å¦‚æœr0ç­‰äºr1ï¼Œè¯´æ˜bssæ®µä¸ºç©ºï¼Œç›´æ¥ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç  beq run_on_dram // æ¸…é™¤bsså®Œä¹‹åçš„åœ°å€ mov r2, #0clear_loop: str r2, [r0], #4 // å…ˆå°†r2ä¸­çš„å€¼æ”¾å…¥r0æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€ï¼ˆr0ä¸­çš„å€¼ä½œä¸ºå†…å­˜åœ°å€ï¼‰ï¼Œ cmp r0, r1 // ç„¶år0 = r0 + 4 bne clear_loop// æ¸…ç†å®Œbssæ®µåé‡å®šä½å°±ç»“æŸäº†ã€‚ç„¶åå½“å‰çš„çŠ¶å†µæ˜¯ï¼š// 1ã€å½“å‰è¿è¡Œåœ°å€è¿˜åœ¨0xd0020010å¼€å¤´çš„ï¼ˆé‡å®šä½å‰çš„ï¼‰é‚£ä¸€ä»½ä»£ç ä¸­è¿è¡Œç€ã€‚// 2ã€æ­¤æ—¶SRAMä¸­å·²ç»æœ‰äº†2ä»½ä»£ç ï¼Œ1ä»½åœ¨d0020010å¼€å¤´ï¼Œå¦ä¸€ä»½åœ¨d0024000å¼€å¤´çš„ä½ç½®ã€‚// ç„¶åå°±è¦é•¿è·³è½¬äº†ã€‚run_on_dram: // é•¿è·³è½¬åˆ°led_blinkå¼€å§‹ç¬¬äºŒé˜¶æ®µ ldr pc, =led_blink // ldræŒ‡ä»¤å®ç°é•¿è·³è½¬ï¼ŒæŠŠled_blinkçš„å€¼ï¼Œå†™å…¥pcå¯„å­˜å™¨ // ä»è¿™é‡Œä¹‹åå°±å¯ä»¥å¼€å§‹è°ƒç”¨Cç¨‹åºäº† //bl led_blink // blæŒ‡ä»¤å®ç°çŸ­è·³è½¬ // æ±‡ç¼–æœ€åçš„è¿™ä¸ªæ­»å¾ªç¯ä¸èƒ½ä¸¢ b . adrä¸ ldr ä¼ªæŒ‡ä»¤çš„åŒºåˆ«ï¼šldrå’Œadréƒ½æ˜¯ä¼ªæŒ‡ä»¤ adrçŸ­åŠ è½½ï¼ŒæŒ‡ä»¤åŠ è½½ç¬¦å·åœ°å€ï¼ŒåŠ è½½çš„æ˜¯è¿è¡Œæ—¶åœ°å€ï¼› ldré•¿åŠ è½½ï¼ŒæŒ‡ä»¤åœ¨åŠ è½½ç¬¦å·åœ°å€æ—¶ï¼ŒåŠ è½½çš„æ˜¯é“¾æ¥åœ°å€ï¼› é‡å®šä½å°±æ˜¯æ±‡ç¼–ä»£ç ä¸­çš„copy_loopå‡½æ•°ï¼Œä»£ç çš„ä½œç”¨æ˜¯ä½¿ç”¨å¾ªç¯ç»“æ„æ¥é€å¥å¤åˆ¶ä»£ç åˆ°é“¾æ¥åœ°å€ã€‚å¤åˆ¶çš„æºåœ°å€æ˜¯ SRAM çš„0xd0020010ï¼Œå¤åˆ¶ç›®æ ‡åœ°å€æ˜¯ SRAM çš„0xd0024000ï¼Œå¤åˆ¶é•¿åº¦æ˜¯bss_startå‡å»_startï¼Œæ‰€ä»¥å¤åˆ¶çš„é•¿åº¦å°±æ˜¯æ•´ä¸ªé‡å®šä½éœ€è¦é‡å®šä½çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªç¨‹åºä¸­ä»£ç æ®µ + æ•°æ®æ®µçš„é•¿åº¦ã€‚bssæ®µï¼ˆbss æ®µä¸­å°±æ˜¯ 0 åˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼‰ä¸éœ€è¦é‡å®šä½ã€‚ æ¸…é™¤bssæ®µæ˜¯ä¸ºäº†æ»¡è¶³ C è¯­è¨€çš„è¿è¡Œæ—¶è¦æ±‚ï¼ˆC è¯­è¨€è¦æ±‚æ˜¾å¼åˆå§‹åŒ–ä¸º 0 çš„å…¨å±€å˜é‡ï¼Œæˆ–è€…æœªæ˜¾å¼åˆå§‹åŒ–çš„å…¨å±€å˜é‡çš„å€¼ä¸º 0ï¼Œå®é™…ä¸Š C è¯­è¨€ç¼–è¯‘å™¨å°±æ˜¯é€šè¿‡æ¸…bssæ®µæ¥å®ç° C è¯­è¨€çš„è¿™ä¸ªç‰¹æ€§çš„ï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬çš„ç¨‹åºæ˜¯ä¸éœ€è¦è´Ÿè´£æ¸…é›¶bssæ®µçš„ï¼ˆC è¯­è¨€ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨ä¼šå¸®æˆ‘ä»¬çš„ç¨‹åºè‡ªåŠ¨æ·»åŠ ä¸€æ®µå¤´ç¨‹åºï¼Œè¿™æ®µç¨‹åºä¼šåœ¨æˆ‘ä»¬çš„ main å‡½æ•°ä¹‹å‰è¿è¡Œï¼Œè¿™æ®µä»£ç å°±è´Ÿè´£æ¸…é™¤bssï¼‰ã€‚ä½†æ˜¯åœ¨æˆ‘ä»¬ä»£ç é‡å®šä½äº†ä¹‹åï¼Œå› ä¸ºç¼–è¯‘å™¨å¸®æˆ‘ä»¬é™„åŠ çš„ä»£ç åªæ˜¯å¸®æˆ‘ä»¬æ¸…é™¤äº†è¿è¡Œåœ°å€é‚£ä¸€ä»½ä»£ç ä¸­çš„bssï¼Œè€Œæœªæ¸…é™¤é‡å®šä½åœ°å€å¤„å¼€å¤´çš„é‚£ä¸€ä»½ä»£ç çš„bssï¼Œæ‰€ä»¥é‡å®šä½ä¹‹åéœ€è¦è‡ªå·±å»æ¸…é™¤bssã€‚","categories":[],"tags":[{"name":"é“¾æ¥","slug":"é“¾æ¥","permalink":"http://example.com/tags/%E9%93%BE%E6%8E%A5/"},{"name":"ç¼–è¯‘","slug":"ç¼–è¯‘","permalink":"http://example.com/tags/%E7%BC%96%E8%AF%91/"},{"name":"åŠ¨æ€é“¾æ¥","slug":"åŠ¨æ€é“¾æ¥","permalink":"http://example.com/tags/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5/"}]},{"title":"è®¡ç®—æœºç»„æˆåŸç†-å­˜å‚¨ä¸ IO ç³»ç»Ÿ","slug":"è®¡ç®—æœºç»„æˆåŸç†-å­˜å‚¨ä¸IOç³»ç»Ÿ","date":"2022-05-08T02:48:23.000Z","updated":"2022-10-15T03:14:29.872Z","comments":true,"path":"2022/05/08/è®¡ç®—æœºç»„æˆåŸç†-å­˜å‚¨ä¸IOç³»ç»Ÿ/","link":"","permalink":"http://example.com/2022/05/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AD%98%E5%82%A8%E4%B8%8EIO%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"å­˜å‚¨å™¨å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„SRAMï¼ˆStatic Random-Access Memoryï¼Œé™æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼‰CPU å¦‚æœå½¢å®¹æˆäººçš„å¤§è„‘çš„è¯ï¼Œé‚£ä¹ˆ CPU Cache (é«˜é€Ÿç¼“å­˜) å°±å¥½æ¯”äººçš„è®°å¿†ã€‚å®ƒç”¨çš„æ˜¯ SRAM èŠ¯ç‰‡ã€‚ SRAM çš„â€œé™æ€â€çš„æ„æ€æ˜¯ï¼Œåªè¦å¤„äºé€šç”µçŠ¶æ€ï¼Œé‡Œé¢çš„æ•°æ®å°±ä¿æŒå­˜åœ¨ï¼Œä¸€æ—¦æ–­ç”µï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ã€‚SRAM é‡Œ 1bit æ•°æ®éœ€è¦ 6-8 ä¸ªæ™¶ä½“ç®¡ï¼Œæ‰€ä»¥ SRAM çš„å­˜å‚¨å¯†åº¦ä¸é«˜ï¼ŒåŒæ ·çš„ç‰©ç†ç©ºé—´ï¼Œèƒ½å¤Ÿå­˜çš„æ•°æ®æœ‰é™ã€‚å› ä¸ºå…¶ç”µè·¯ç®€å•ï¼Œè®¿é—®é€Ÿåº¦éå¸¸å¿«ã€‚ åœ¨ CPU é‡Œï¼Œé€šå¸¸ä¼šæœ‰ L1ã€L2ã€L3 è¿™æ ·ä¸‰å±‚é«˜é€Ÿç¼“å­˜ã€‚æ¯ä¸ª CPU æ ¸å¿ƒéƒ½æœ‰ä¸€å—å±äºè‡ªå·±çš„ L1 é«˜é€Ÿç¼“å­˜ï¼Œé€šå¸¸åˆ†æˆæŒ‡ä»¤ç¼“å­˜å’Œæ•°æ®ç¼“å­˜ï¼Œåˆ†å¼€å­˜æ”¾ CPU ä½¿ç”¨çš„æŒ‡ä»¤å’Œæ•°æ®ã€‚ L2 çš„ Cache åŒæ ·æ˜¯æ¯ä¸ª CPU æ ¸å¿ƒéƒ½æœ‰çš„ï¼Œä¸è¿‡å®ƒå¾€å¾€ä¸åœ¨ CPU æ ¸å¿ƒçš„å†…éƒ¨ã€‚æ‰€ä»¥ï¼ŒL2 Cache çš„è®¿é—®é€Ÿåº¦ä¼šæ¯” L1 ç¨å¾®æ…¢ä¸€äº›ã€‚è€Œ L3Cacheï¼Œåˆ™é€šå¸¸æ˜¯å¤šä¸ª CPU æ ¸å¿ƒå…±ç”¨çš„ï¼Œå°ºå¯¸ä¼šæ›´å¤§ä¸€äº›ï¼Œè®¿é—®é€Ÿåº¦è‡ªç„¶ä¹Ÿå°±æ›´æ…¢ä¸€äº›ã€‚ ä½ å¯ä»¥æŠŠ CPU ä¸­çš„ L1Cache ç†è§£ä¸ºæˆ‘ä»¬çš„çŸ­æœŸè®°å¿†ï¼ŒæŠŠ L2/L3Cache ç†è§£æˆé•¿æœŸè®°å¿†ï¼ŒæŠŠå†…å­˜å½“æˆæˆ‘ä»¬æ‹¥æœ‰çš„ä¹¦æ¶æˆ–è€…ä¹¦æ¡Œã€‚å½“æˆ‘ä»¬è‡ªå·±è®°å¿†ä¸­æ²¡æœ‰èµ„æ–™çš„æ—¶å€™ï¼Œå¯ä»¥ä»ä¹¦æ¡Œæˆ–è€…ä¹¦æ¶ä¸Šæ‹¿ä¹¦æ¥ç¿»é˜…ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­å°±ç›¸å½“äºï¼Œæ•°æ®ä»å†…å­˜ä¸­åŠ è½½åˆ° CPU çš„å¯„å­˜å™¨å’Œ Cache ä¸­ï¼Œç„¶åé€šè¿‡â€œå¤§è„‘â€ï¼Œä¹Ÿå°±æ˜¯ CPUï¼Œè¿›è¡Œå¤„ç†å’Œè¿ç®—ã€‚ DRAMï¼ˆDynamic Random Access Memoryï¼ŒåŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼‰å†…å­˜ç”¨çš„èŠ¯ç‰‡å’Œ Cache æœ‰æ‰€ä¸åŒï¼Œå®ƒç”¨çš„æ˜¯ä¸€ç§å«ä½œ DRAM çš„èŠ¯ç‰‡ï¼Œæ¯”èµ· SRAM æ¥è¯´ï¼Œå®ƒçš„å¯†åº¦æ›´é«˜ï¼Œæœ‰æ›´å¤§çš„å®¹é‡ï¼Œè€Œä¸”å®ƒä¹Ÿæ¯” SRAM èŠ¯ç‰‡ä¾¿å®œä¸å°‘ã€‚ DRAM è¢«ç§°ä¸ºâ€œåŠ¨æ€â€å­˜å‚¨å™¨ï¼Œæ˜¯å› ä¸º DRAM éœ€è¦é ä¸æ–­åœ°â€œåˆ·æ–°â€ï¼Œæ‰èƒ½ä¿æŒæ•°æ®è¢«å­˜å‚¨èµ·æ¥ã€‚DRAM çš„ä¸€ä¸ªæ¯”ç‰¹ï¼Œåªéœ€è¦ä¸€ä¸ªæ™¶ä½“ç®¡å’Œä¸€ä¸ªç”µå®¹å°±èƒ½å­˜å‚¨ã€‚æ‰€ä»¥ï¼ŒDRAM åœ¨åŒæ ·çš„ç‰©ç†ç©ºé—´ä¸‹ï¼Œèƒ½å¤Ÿå­˜å‚¨çš„æ•°æ®ä¹Ÿå°±æ›´å¤šï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨çš„â€œå¯†åº¦â€æ›´å¤§ã€‚ä½†æ˜¯ï¼Œå› ä¸ºæ•°æ®æ˜¯å­˜å‚¨åœ¨ç”µå®¹é‡Œçš„ï¼Œç”µå®¹ä¼šä¸æ–­æ¼ç”µï¼Œæ‰€ä»¥éœ€è¦å®šæ—¶åˆ·æ–°å……ç”µï¼Œæ‰èƒ½ä¿æŒæ•°æ®ä¸ä¸¢å¤±ã€‚DRAM çš„æ•°æ®è®¿é—®ç”µè·¯å’Œåˆ·æ–°ç”µè·¯éƒ½æ¯” SRAM æ›´å¤æ‚ï¼Œæ‰€ä»¥è®¿é—®å»¶æ—¶ä¹Ÿå°±æ›´é•¿ã€‚ ä» Cacheã€å†…å­˜ï¼Œåˆ° SSD å’Œ HDD ç¡¬ç›˜ï¼Œä¸€å°ç°ä»£è®¡ç®—æœºä¸­ï¼Œå°±ç”¨ä¸Šäº†æ‰€æœ‰è¿™äº›å­˜å‚¨å™¨è®¾å¤‡ã€‚å…¶ä¸­ï¼Œå®¹é‡è¶Šå°çš„è®¾å¤‡é€Ÿåº¦è¶Šå¿«ï¼Œè€Œä¸”ï¼ŒCPU å¹¶ä¸æ˜¯ç›´æ¥å’Œæ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡æ‰“äº¤é“ï¼Œè€Œæ˜¯æ¯ä¸€ç§å­˜å‚¨å™¨è®¾å¤‡ï¼Œåªå’Œå®ƒç›¸é‚»çš„å­˜å‚¨è®¾å¤‡æ‰“äº¤é“ã€‚æ¯”å¦‚ï¼ŒCPUCache æ˜¯ä»å†…å­˜é‡ŒåŠ è½½è€Œæ¥çš„ï¼Œæˆ–è€…éœ€è¦å†™å›å†…å­˜ï¼Œå¹¶ä¸ä¼šç›´æ¥å†™å›æ•°æ®åˆ°ç¡¬ç›˜ï¼Œä¹Ÿä¸ä¼šç›´æ¥ä»ç¡¬ç›˜åŠ è½½æ•°æ®åˆ° CPUCache ä¸­ï¼Œè€Œæ˜¯å…ˆåŠ è½½åˆ°å†…å­˜ï¼Œå†ä»å†…å­˜åŠ è½½åˆ° Cache ä¸­ã€‚ è¿™æ ·ï¼Œå„ä¸ªå­˜å‚¨å™¨åªå’Œç›¸é‚»çš„ä¸€å±‚å­˜å‚¨å™¨æ‰“äº¤é“ï¼Œå¹¶ä¸”éšç€ä¸€å±‚å±‚å‘ä¸‹ï¼Œå­˜å‚¨å™¨çš„å®¹é‡é€å±‚å¢å¤§ï¼Œè®¿é—®é€Ÿåº¦é€å±‚å˜æ…¢ï¼Œè€Œå•ä½å­˜å‚¨æˆæœ¬ä¹Ÿé€å±‚ä¸‹é™ï¼Œä¹Ÿå°±æ„æˆäº†æˆ‘ä»¬æ—¥å¸¸æ‰€è¯´çš„å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ã€‚ ç¼“å­˜CPU cacheé«˜é€Ÿç¼“å­˜ç¼“å­˜ä¸æ˜¯ CPU çš„ä¸“å±åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå®ƒå½“æˆä¸€ç§ç­–ç•¥ï¼Œä»»ä½•æ—¶å€™æƒ³è¦å¢åŠ æ•°æ®ä¼ è¾“æ€§èƒ½ï¼Œéƒ½å¯ä»¥é€šè¿‡åŠ ä¸€å±‚ç¼“å­˜è¯•è¯•ã€‚ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„çš„ä¸­å¿ƒæ€æƒ³æ˜¯ï¼Œå¯¹äºæ¯ä¸ª$k$ï¼Œä½äº$k$å±‚çš„æ›´å¿«æ›´å°çš„å­˜å‚¨è®¾å¤‡ä½œä¸ºä½äº$k+1$å±‚çš„æ›´å¤§æ›´æ…¢çš„å­˜å‚¨è®¾å¤‡çš„ç¼“å­˜ã€‚ä¸‹å›¾å±•ç¤ºäº†å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ä¸­ç¼“å­˜çš„ä¸€èˆ¬æ€§æ¦‚å¿µã€‚ æ•°æ®æ€»æ˜¯ä»¥å—blockä¸ºå•ä½ï¼Œåœ¨å±‚ä¸å±‚ä¹‹é—´æ¥å›å¤åˆ¶ã€‚ è¯´å›é«˜é€Ÿç¼“å­˜ï¼ŒæŒ‰ç…§æ‘©å°”å®šå¾‹ï¼ŒCPU çš„è®¿é—®é€Ÿåº¦æ¯ 18 ä¸ªæœˆä¾¿ä¼šç¿»ä¸€ç¿»ï¼Œç›¸å½“äºæ¯å¹´å¢é•¿ 60%ã€‚å†…å­˜çš„è®¿é—®é€Ÿåº¦è™½ç„¶ä¸æ–­å¢é•¿ï¼Œå´è¿œæ²¡æœ‰é‚£ä¹ˆå¿«ï¼Œæ¯å¹´åªå¢é•¿ 7% å·¦å³ã€‚è¿™æ ·å°±å¯¼è‡´ CPU æ€§èƒ½å’Œå†…å­˜è®¿é—®çš„å·®è·ä¸æ–­æ‹‰å¤§ã€‚ä¸ºäº†å¼¥è¡¥ä¸¤è€…ä¹‹é—´å·®å¼‚ï¼Œç°ä»£ CPU å¼•å…¥äº†é«˜é€Ÿç¼“å­˜ã€‚ CPU çš„è¯»ï¼ˆloadï¼‰å®è´¨ä¸Šå°±æ˜¯ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®åˆ°å¯„å­˜å™¨ï¼ˆregisterï¼‰é‡Œï¼Œåœ¨å¤šçº§ç¼“å­˜çš„æ¶æ„ä¸­ï¼Œå¦‚æœç¼“å­˜ä¸­æ‰¾ä¸åˆ°æ•°æ®ï¼ˆCache missï¼‰ï¼Œå°±ä¼šå±‚å±‚è¯»å–äºŒçº§ç¼“å­˜ä¸‰çº§ç¼“å­˜ï¼Œä¸€æ—¦æ‰€æœ‰çš„ç¼“å­˜é‡Œéƒ½æ‰¾ä¸åˆ°å¯¹åº”çš„æ•°æ®ï¼Œå°±è¦å»å†…å­˜é‡Œå¯»å€äº†ã€‚å¯»å€åˆ°çš„æ•°æ®é¦–å…ˆæ”¾åˆ°å¯„å­˜å™¨é‡Œï¼Œå…¶å‰¯æœ¬ä¼šé©»ç•™åˆ° CPU çš„ç¼“å­˜ä¸­ã€‚ CPU çš„å†™ï¼ˆstoreï¼‰ä¹Ÿæ˜¯é’ˆå¯¹ç¼“å­˜ä½œå†™å…¥ã€‚å¹¶ä¸ä¼šç›´æ¥å’Œå†…å­˜æ‰“äº¤é“ï¼Œè€Œæ˜¯é€šè¿‡æŸç§æœºåˆ¶å®ç°æ•°æ®ä»ç¼“å­˜åˆ°å†…å­˜çš„å†™å›ï¼ˆwrite backï¼‰ã€‚ ç¼“å­˜åˆ°åº•å¦‚ä½•ä¸ CPU å’Œä¸»å­˜æ•°æ®äº¤æ¢çš„ï¼ŸCPU å¦‚ä½•ä»ç¼“å­˜ä¸­è¯»å†™æ•°æ®çš„ï¼Ÿç¼“å­˜ä¸­æ²¡æœ‰è¯»çš„æ•°æ®ï¼Œæˆ–è€…ç¼“å­˜å†™æ»¡äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å…ˆä» CPU å¦‚ä½•è¯»å–æ•°æ®è¯´èµ·ã€‚ ç¼“å­˜è¯»å–CPU å‘èµ·ä¸€ä¸ªè¯»å–è¯·æ±‚åï¼Œè¿”å›çš„ç»“æœä¼šæœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š ç¼“å­˜å‘½ä¸­ (cache hit)è¦è¯»å–çš„æ•°æ®åˆšå¥½åœ¨ç¼“å­˜ä¸­ï¼Œå«åšç¼“å­˜å‘½ä¸­ã€‚ ç¼“å­˜ä¸å‘½ä¸­ (cache miss)å‘é€ç¼“å­˜ä¸å‘½ä¸­ï¼Œç¼“å­˜å°±å¾—æ‰§è¡Œä¸€ç›´æ”¾ç½®ç­–ç•¥(placement policy)ï¼Œæ¯”å¦‚ LRUã€‚æ¥å†³å®šä»ä¸»å­˜ä¸­å–å‡ºçš„æ•°æ®æ”¾åˆ°å“ªé‡Œã€‚ å¼ºåˆ¶æ€§ä¸å‘½ä¸­(compulsory miss)/å†·ä¸å‘½ä¸­(cold miss)ï¼šç¼“å­˜ä¸­æ²¡æœ‰è¦è¯»å–çš„æ•°æ®ï¼Œéœ€è¦ä»ä¸»å­˜è¯»å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®æ”¾å…¥ç¼“å­˜ã€‚ å†²çªä¸å‘½ä¸­(conflict miss)ï¼šç¼“å­˜ä¸­æœ‰è¦è¯»çš„æ•°æ®ï¼Œåœ¨é‡‡å–æ”¾ç½®ç­–ç•¥æ—¶ï¼Œä»ä¸»å­˜ä¸­å–æ•°æ®æ”¾åˆ°ç¼“å­˜æ—¶å‘ç”Ÿäº†å†²çªï¼Œè¿™å«åšå†²çªä¸å‘½ä¸­ã€‚ é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨ç»„ç»‡ç»“æ„æ•´ä¸ª Cache è¢«åˆ’åˆ†ä¸º 1 ä¸ªæˆ–å¤šä¸ªç»„ (Set)ï¼Œ$S$ è¡¨ç¤ºç»„çš„ä¸ªæ•°ã€‚æ¯ä¸ªç»„åŒ…å« 1 ä¸ªæˆ–å¤šä¸ªç¼“å­˜è¡Œ(Cache line)ï¼Œ$E$ è¡¨ç¤ºä¸€ä¸ªç»„ä¸­ç¼“å­˜è¡Œçš„è¡Œæ•°ã€‚æ¯ä¸ªç¼“å­˜è¡Œç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šæœ‰æ•ˆä½(valid)ï¼Œæ ‡è®°ä½ï¼ˆtagï¼‰ï¼Œæ•°æ®å—ï¼ˆcache blockï¼‰ã€‚ æœ‰æ•ˆä½ï¼šè¯¥ä½ç­‰äº 1ï¼Œè¡¨ç¤ºè¿™ä¸ªè¡Œæ•°æ®æœ‰æ•ˆã€‚ æ ‡è®°ä½ï¼šå”¯ä¸€çš„æ ‡è¯†äº†å­˜å‚¨åœ¨é«˜é€Ÿç¼“å­˜ä¸­çš„å—ï¼Œæ ‡è¯†ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ã€‚ æ•°æ®å—ï¼šä¸€éƒ¨åˆ†å†…å­˜æ•°æ®çš„å‰¯æœ¬ã€‚ Cache çš„ç»“æ„å¯ä»¥ç”±å…ƒç»„$(S,E,B,m)$è¡¨ç¤ºã€‚ä¸åŒ…æ‹¬æœ‰æ•ˆä½å’Œæ ‡è®°ä½ã€‚Cache çš„å¤§å°ä¸º $C=S \\times E \\times B$. æ¥ä¸‹æ¥çœ‹çœ‹ Cache æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå½“ CPU æ‰§è¡Œæ•°æ®åŠ è½½æŒ‡ä»¤ï¼Œä»å†…å­˜åœ°å€ A è¯»å–æ•°æ®æ—¶ï¼Œæ ¹æ®å­˜å‚¨å™¨å±‚æ¬¡åŸç†ï¼Œå¦‚æœ Cache ä¸­ä¿å­˜ç€ç›®æ ‡æ•°æ®çš„å‰¯æœ¬ï¼Œé‚£ä¹ˆå°±ç«‹å³å°†æ•°æ®è¿”å›ç»™ CPUã€‚é‚£ä¹ˆ Cache å¦‚ä½•çŸ¥é“è‡ªå·±ä¿å­˜äº†ç›®æ ‡æ•°æ®çš„å‰¯æœ¬å‘¢ï¼Ÿ å‡è®¾ç›®æ ‡åœ°å€çš„æ•°æ®é•¿åº¦ä¸º$m$ä½ï¼Œè¿™ä¸ªåœ°å€è¢«å‚æ•° $S$ å’Œ $B$ åˆ†æˆäº†ä¸‰ä¸ªå­—æ®µï¼š é¦–å…ˆé€šè¿‡é•¿åº¦ä¸º$s$çš„ç»„ç´¢å¼•ï¼Œç¡®å®šç›®æ ‡æ•°æ®ä¿å­˜åœ¨å“ªä¸€ä¸ªç»„ (Set) ä¸­ï¼Œå…¶æ¬¡é€šè¿‡é•¿åº¦ä¸º$t$çš„æ ‡è®°ï¼Œç¡®å®šåœ¨å“ªä¸€è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶æœ‰æ•ˆä½å¿…é¡»ç­‰äº 1ï¼Œæœ€åæ ¹æ®é•¿åº¦ä¸º$b$çš„å—åç§»ï¼Œæ¥ç¡®å®šç›®æ ‡æ•°æ®åœ¨æ•°æ®å—ä¸­çš„ç¡®åˆ‡ä½ç½®ã€‚ Qï¼šæ—¢ç„¶è¯»å– Cache ç¬¬ä¸€æ­¥æ˜¯ç»„é€‰æ‹©ï¼Œä¸ºä»€ä¹ˆä¸ç”¨é«˜ä½ä½œä¸ºç»„ç´¢å¼•ï¼Œè€Œä½¿ç”¨ä¸­é—´çš„ä¸ºä½œä¸ºç»„ç´¢å¼•ï¼ŸAï¼šå¦‚æœä½¿ç”¨äº†é«˜ä½ä½œç´¢å¼•ï¼Œé‚£ä¹ˆä¸€äº›è¿ç»­çš„å†…å­˜å—å°±ä¼šæ˜ å°„åˆ°ç›¸åŒçš„é«˜é€Ÿç¼“å­˜å—ã€‚å¦‚å›¾å‰å››ä¸ªå—æ˜ å°„åˆ°ç¬¬ä¸€ä¸ªç¼“å­˜ç»„ï¼Œç¬¬äºŒä¸ªå››ä¸ªå—æ˜ å°„åˆ°ç¬¬äºŒä¸ªç»„ï¼Œä¾æ¬¡ç±»æ¨ã€‚å¦‚æœä¸€ä¸ªç¨‹åºæœ‰è‰¯å¥½çš„ç©ºé—´å±€éƒ¨æ€§ï¼Œé¡ºåºæ‰«æä¸€ä¸ªæ•°ç»„çš„å…ƒç´ ï¼Œé‚£ä¹ˆåœ¨ä»»ä½•æ—¶å€™ï¼Œç¼“å­˜ä¸­éƒ½åªä¿å­˜åœ¨ä¸€ä¸ªå—å¤§å°çš„æ•°ç»„å†…å®¹ã€‚è¿™æ ·å¯¹ç¼“å­˜çš„ä½¿ç”¨ç‡å¾ˆä½ã€‚ç›¸æ¯”è€Œè¨€ï¼Œå¦‚æœä½¿ç”¨ä¸­é—´çš„ä½ä½œä¸ºç»„ç´¢å¼•ï¼Œé‚£ä¹ˆç›¸é‚»çš„å—æ€»æ˜¯æ˜ å°„åˆ°ä¸åŒçš„ç»„ï¼Œå›¾ä¸­çš„æƒ…å†µèƒ½å¤Ÿå­˜æ”¾æ•´ä¸ªå¤§å°çš„æ•°ç»„ç‰‡ã€‚ ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ Direct Mapped Cacheæ ¹æ®æ¯ä¸ªç»„çš„ç¼“å­˜è¡Œæ•° $E$ çš„ä¸åŒï¼ŒCache è¢«åˆ†ä¸ºä¸åŒçš„ç±»ã€‚æ¯ä¸ªç»„åªæœ‰ä¸€è¡Œ$E=1$çš„é«˜é€Ÿç¼“å­˜è¢«ç§°ä¸ºç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜(direct-mapped cache)ã€‚ å½“ä¸€æ¡åŠ è½½æŒ‡ä»¤æŒ‡ç¤º CPU ä»ä¸»å­˜åœ°å€ A ä¸­è¯»å–ä¸€ä¸ªå­— w æ—¶ï¼Œä¼šå°†è¯¥ä¸»å­˜åœ°å€ A å‘é€åˆ°é«˜é€Ÿç¼“å­˜ä¸­ï¼Œåˆ™é«˜é€Ÿç¼“å­˜ä¼šæ ¹æ®ç»„é€‰æ‹©ï¼Œè¡ŒåŒ¹é…å’Œå­—æŠ½å–ä¸‰æ­¥æ¥åˆ¤æ–­åœ°å€ A æ˜¯å¦å‘½ä¸­ã€‚ ç»„é€‰æ‹©(set selection)ï¼šæ ¹æ®ç»„ç´¢å¼•å€¼æ¥ç¡®å®šå±äºå“ªä¸€ä¸ªç»„ï¼Œå¦‚å›¾ä¸­ç´¢å¼•é•¿åº¦ä¸º 5 ä½ï¼Œå¯ä»¥æ£€ç´¢ 32 ä¸ªç»„ ($2^5=32$)ã€‚å½“$s=0$æ—¶ï¼Œæ­¤æ—¶ç»„é€‰æ‹©çš„ç»“æœä¸ºset 0ï¼Œå½“$s=1$æ—¶ï¼Œæ­¤æ—¶ç»„é€‰æ‹©çš„ç»“æœä¸ºset 1ã€‚ **è¡ŒåŒ¹é… (line match)**ï¼šé¦–å…ˆçœ‹ç¼“å­˜è¡Œçš„æœ‰æ•ˆä½ï¼Œæ­¤æ—¶æœ‰æ•ˆä½ä¸º 1ï¼Œè¡¨ç¤ºå½“å‰æ•°æ®æœ‰æ•ˆã€‚ç„¶åå¯¹æ¯”ç¼“å­˜è¡Œçš„æ ‡è®°0110ä¸åœ°å€ä¸­çš„æ ‡è®°0110æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡æ•°æ®åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰ã€‚å¦‚æœä¸ä¸€è‡´æˆ–è€…æœ‰æ•ˆä½ä¸º 0ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡æ•°æ®ä¸åœ¨å½“å‰çš„ç¼“å­˜è¡Œä¸­ï¼ˆç¼“å­˜ä¸å‘½ä¸­ï¼‰ã€‚å¦‚æœå‘½ä¸­ï¼Œå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥å­—æŠ½å–ã€‚ **å­—æŠ½å– (word extraction)**ï¼šæ ¹æ®åç§»é‡$b$ç¡®å®šç›®æ ‡æ•°æ®çš„ç¡®åˆ‡ä½ç½®ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä»æ•°æ®å—çš„ä»€ä¹ˆä½ç½®å¼€å§‹æŠ½å–ä½ç½®ã€‚å¦‚å½“åç§»å—ç­‰äº100æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡æ•°æ®èµ·å§‹åœ°å€ä½äºå­—èŠ‚ 4 å¤„ã€‚ ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šæ¸…é™¤è¿™ä¸ªè¿‡ç¨‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ï¼Œæè¿°ä¸º$(S,E,B,m) = (4,1,2,4)$ã€‚æ¢å¥è¯è¯´ï¼Œé«˜é€Ÿç¼“å­˜æœ‰ 4 ä¸ªç»„ï¼Œæ¯ä¸ªç»„ 1 è¡Œï¼Œæ¯ä¸ªæ•°æ®å— 2 ä¸ªå­—èŠ‚ï¼Œåœ°å€é•¿åº¦ä¸º 4 ä½ã€‚ ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œ8 ä¸ªå†…å­˜å—ï¼Œä½†åªæœ‰ 4 ä¸ªé«˜é€Ÿç¼“å­˜ç»„ï¼Œæ‰€ä»¥ä¼šæœ‰å¤šä¸ªå—æ˜ å°„åˆ°åŒä¸€ä¸ªé«˜é€Ÿç¼“å­˜ç»„ä¸­ã€‚ä¾‹å¦‚ï¼Œå— 0 å’Œå— 4 éƒ½ä¼šè¢«æ˜ å°„åˆ°ç»„ 0ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥æ¨¡æ‹Ÿå½“ CPU æ‰§è¡Œä¸€ç³»åˆ—è¯»çš„æ—¶å€™ï¼Œé«˜é€Ÿç¼“å­˜çš„æ‰§è¡Œæƒ…å†µï¼Œæˆ‘ä»¬å‡è®¾æ¯æ¬¡ CPU è¯» 1 ä¸ªå­—èŠ‚çš„å­—ã€‚ è¯»åœ°å€ 0(0000) çš„å­—ï¼š è¯»åœ°å€ 1(0001) çš„å­—ï¼š è¯»åœ°å€ 13(1101) çš„å­—ï¼š è¯»åœ°å€ 8(1000) çš„å­—ï¼š è¯»åœ°å€ 0(0000) çš„å­—ï¼š ç»„ç›¸è”é«˜é€Ÿç¼“å­˜ Set Associative Cacheç”±äºç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜çš„ç»„ä¸­åªæœ‰ä¸€è¡Œï¼Œæ‰€ä»¥å®¹æ˜“å‘ç”Ÿå†²çªä¸å‘½ä¸­ã€‚ç»„ç›¸è”é«˜é€Ÿç¼“å­˜ (Set associative cache) è¿è¡Œæœ‰å¤šè¡Œç¼“å­˜è¡Œã€‚ä½†æ˜¯ç¼“å­˜è¡Œæœ€å¤§ä¸èƒ½è¶…è¿‡ $C/B$ã€‚ å¦‚å›¾ä¸€ä¸ªç»„ä¸­åŒ…å«äº†ä¸¤è¡Œç¼“å­˜è¡Œï¼Œè¿™ç§æˆ‘ä»¬ç§°ä¸º 2 è·¯ç›¸è”é«˜é€Ÿç¼“å­˜ã€‚ ç»„é€‰æ‹©ï¼šä¸ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜çš„ç»„é€‰æ‹©è¿‡ç¨‹ä¸€æ ·ã€‚ è¡ŒåŒ¹é…ï¼šå› ä¸ºä¸€ä¸ªç»„æœ‰å¤šè¡Œï¼Œæ‰€ä»¥éœ€è¦éå†æ‰€æœ‰è¡Œï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆä½ä¸º 1ï¼Œå¹¶ä¸”æ ‡è®°ä¸ºä¸åœ°å€ä¸­çš„æ ‡è®°ä½ç›¸åŒ¹é…çš„ä¸€è¡Œã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œè¡¨ç¤ºç¼“å­˜å‘½ä¸­ã€‚ å­—æŠ½å–ï¼šæ ¹æ®åç§»é‡$b$ç¡®å®šç›®æ ‡æ•°æ®çš„ç¡®åˆ‡ä½ç½®ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä»æ•°æ®å—çš„ä»€ä¹ˆä½ç½®å¼€å§‹æŠ½å–ä½ç½®ã€‚å¦‚å½“åç§»å—ç­‰äº100æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡æ•°æ®èµ·å§‹åœ°å€ä½äºå­—èŠ‚ 4 å¤„ã€‚ å¦‚æœä¸å‘½ä¸­ï¼Œé‚£ä¹ˆå°±éœ€è¦ä»ä¸»å­˜ä¸­å–å‡ºéœ€è¦çš„æ•°æ®å—ï¼Œä½†æ˜¯å°†æ•°æ®å—æ”¾åœ¨å“ªä¸€è¡Œç¼“å­˜è¡Œå‘¢ï¼Ÿå¦‚æœå­˜åœ¨ç©ºè¡Œ ($valid=0$)ï¼Œé‚£å°±æ”¾åˆ°ç©ºè¡Œé‡Œã€‚å¦‚æœæ²¡æœ‰ç©ºè¡Œï¼Œå°±å¾—é€‰æ‹©ä¸€ä¸ªéç©ºè¡Œæ¥æ›¿æ¢ï¼ŒåŒæ—¶å¸Œæœ› CPU ä¸ä¼šå¾ˆå¿«å¼•ç”¨è¿™ä¸ªè¢«æ›¿æ¢çš„è¡Œã€‚è¿™é‡Œä»‹ç»å‡ ä¸ªæ›¿æ¢ç­–ç•¥ã€‚ æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯éšæœºé€‰æ‹©ä¸€è¡Œæ¥æ›¿æ¢ï¼Œå…¶ä»–å¤æ‚çš„æ–¹å¼å°±æ˜¯åˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œä½¿å¾—æ¥ä¸‹æ¥ CPU å¼•ç”¨æ›¿æ¢çš„è¡Œæ¦‚ç‡æœ€å°ã€‚å¦‚ ç¼“å­˜ä¸€è‡´æ€§åè®® MESIä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ä¸€è‡´ç›®å‰ä¸»æµç”µè„‘çš„ CPU éƒ½æ˜¯å¤šæ ¸å¿ƒçš„ï¼Œå¤šæ ¸å¿ƒçš„æœ‰ç‚¹å°±æ˜¯åœ¨ä¸èƒ½æå‡ CPU ä¸»é¢‘åï¼Œé€šè¿‡å¢åŠ æ ¸å¿ƒæ¥æå‡ CPU ååé‡ã€‚æ¯ä¸ªæ ¸å¿ƒéƒ½æœ‰è‡ªå·±çš„ L1 Cache å’Œ L2 Cacheï¼Œåªæ˜¯å…±ç”¨ L3 Cache å’Œä¸»å†…å­˜ã€‚æ¯ä¸ªæ ¸å¿ƒæ“ä½œæ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªæ ¸å¿ƒçš„ Cache å°±ä¸æ˜¯åŒæ­¥æ›´æ–°çš„ï¼Œè¿™æ ·å°±ä¼šå¸¦æ¥ç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰çš„é—®é¢˜ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚å›¾ï¼š æœ‰ 2 ä¸ª CPUï¼Œä¸»å†…å­˜é‡Œæœ‰ä¸ªå˜é‡x=0ã€‚CPU A ä¸­æœ‰ä¸ªéœ€è¦å°†å˜é‡xåŠ 1ã€‚CPU A å°±å°†å˜é‡xåŠ è½½åˆ°è‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œç„¶åå°†å˜é‡xåŠ 1ã€‚å› ä¸ºæ­¤æ—¶ CPU A è¿˜æœªå°†ç¼“å­˜æ•°æ®å†™å›ä¸»å†…å­˜ï¼ŒCPU B å†è¯»å–å˜é‡xæ—¶ï¼Œå˜é‡xçš„å€¼ä¾ç„¶æ˜¯0ã€‚ è¿™é‡Œçš„é—®é¢˜å°±æ˜¯æ‰€è°“çš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œå› ä¸º CPU A çš„ç¼“å­˜ä¸ CPU B çš„ç¼“å­˜æ˜¯ä¸ä¸€è‡´çš„ã€‚ å¦‚ä½•è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜é€šè¿‡åœ¨æ€»çº¿åŠ  LOCK é”çš„æ–¹å¼åœ¨é”ä½æ€»çº¿ä¸ŠåŠ ä¸€ä¸ª LOCK æ ‡è¯†ï¼ŒCPU A è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œé”ä½æ€»çº¿ï¼Œå…¶ä»– CPU æ­¤æ—¶æ— æ³•è¿›è¡Œå†…å­˜è¯»å†™æ“ä½œï¼Œåªæœ‰ç­‰è§£é”äº†æ‰èƒ½è¿›è¡Œæ“ä½œã€‚ è¯¥æ–¹å¼å› ä¸ºé”ä½äº†æ•´ä¸ªæ€»çº¿ï¼Œæ‰€ä»¥æ•ˆç‡ä½ã€‚ ç¼“å­˜ä¸€è‡´æ€§åè®® MESIè¯¥æ–¹å¼å¯¹å•ä¸ªç¼“å­˜è¡Œçš„æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä¸ä¼šå½±å“åˆ°å†…å­˜å…¶ä»–æ•°æ®çš„è¯»å†™ã€‚ åœ¨å­¦ä¹  MESI åè®®ä¹‹å‰ï¼Œç®€å•äº†è§£ä¸€ä¸‹æ€»çº¿å—…æ¢æœºåˆ¶ï¼ˆBus Snoopingï¼‰ã€‚è¦å¯¹è‡ªå·±çš„ç¼“å­˜åŠ é”ï¼Œéœ€è¦é€šçŸ¥å…¶ä»– CPUï¼Œå¤šä¸ª CPU æ ¸å¿ƒä¹‹é—´çš„æ•°æ®ä¼ æ’­é—®é¢˜ã€‚æœ€å¸¸è§çš„ä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯æ€»çº¿å—…æ¢ã€‚ è¿™ä¸ªç­–ç•¥ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æŠŠæ‰€æœ‰çš„è¯»å†™è¯·æ±‚éƒ½é€šè¿‡æ€»çº¿å¹¿æ’­ç»™æ‰€æœ‰çš„ CPU æ ¸å¿ƒï¼Œç„¶åè®©å„ä¸ªæ ¸å¿ƒå»â€œå—…æ¢â€è¿™äº›è¯·æ±‚ï¼Œå†æ ¹æ®æœ¬åœ°çš„æƒ…å†µè¿›è¡Œå“åº”ã€‚MESI å°±æ˜¯åŸºäºæ€»çº¿å—…æ¢æœºåˆ¶çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚ MESI åè®®çš„ç”±æ¥æ˜¯å¯¹ Cache Line çš„å››ä¸ªä¸åŒçš„æ ‡è®°ï¼Œåˆ†åˆ«æ˜¯ï¼š çŠ¶æ€ çŠ¶æ€ æè¿° ç›‘å¬ä»»åŠ¡ Modified å·²ä¿®æ”¹ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®è¢«ä¿®æ”¹äº†ï¼Œå’Œå†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬ Cache ä¸­ Cache Line å¿…é¡»æ—¶åˆ»ç›‘å¬æ‰€æœ‰è¯•å›¾è¯»è¯¥ Cache Line ç›¸å¯¹äºä¸»å­˜çš„æ“ä½œï¼Œè¿™ç§æ“ä½œå¿…é¡»åœ¨ç¼“å­˜å°†è¯¥ Cache Line å†™å›ä¸»å­˜å¹¶å°†çŠ¶æ€æ”¹ä¸º S çŠ¶æ€ä¹‹å‰ï¼Œè¢«å»¶è¿Ÿæ‰§è¡Œ Exclusive ç‹¬äº«ï¼Œäº’æ–¥ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬ Cache Cache Line å¿…é¡»ç›‘å¬å…¶ä»–ç¼“å­˜è¯»ä¸»å­˜ä¸­è¯¥ Cache Line çš„æ“ä½œï¼Œä¸€æ—¦æœ‰è¿™ç§æ“ä½œï¼Œè¯¥ Cache Line éœ€è¦æ”¹ä¸º S çŠ¶æ€ Shared å…±äº«çš„ è¯¥ Cache Line æœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œæ•°æ®å­˜åœ¨äºå¾ˆå¤šä¸ª Cache ä¸­ Cache Line å¿…é¡»ç›‘å¬å…¶ä»– Cache Line ä½¿è¯¥ Cache Line æ— æ•ˆæˆ–è€…ç‹¬äº«è¯¥ Cache Line çš„è¯·æ±‚ï¼Œå¹¶å°† Cache Line æ”¹ä¸º I çŠ¶æ€ Invalid æ— æ•ˆçš„ è¯¥ Cache Line æ— æ•ˆ æ—  æ•´ä¸ª MESI çš„çŠ¶æ€ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºæ¥è¡¨ç¤ºå®ƒçš„çŠ¶æ€æµè½¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸åŒçŠ¶æ€è§¦å‘çš„äº‹ä»¶æ“ä½œï¼Œå¯èƒ½æ¥è‡ªäºå½“å‰ CPU æ ¸å¿ƒï¼Œä¹Ÿå¯èƒ½æ¥è‡ªæ€»çº¿é‡Œå…¶ä»– CPU æ ¸å¿ƒå¹¿æ’­å‡ºæ¥çš„ä¿¡å·ã€‚æˆ‘æŠŠå„ä¸ªçŠ¶æ€ä¹‹é—´çš„æµè½¬ç”¨è¡¨æ ¼æ€»ç»“äº†ä¸€ä¸‹ï¼š å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ M Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ M M Local Write ä¿®æ”¹ cache æ•°æ®ï¼ŒçŠ¶æ€ä¸å˜ M M Remote Read è¿™è¡Œæ•°æ®è¢«å†™åˆ°å†…å­˜ä¸­ï¼Œä½¿å…¶ä»–æ ¸èƒ½ä½¿ç”¨åˆ°æœ€æ–°æ•°æ®ï¼ŒçŠ¶æ€å˜ä¸º S S M Remote Write è¿™è¡Œæ•°æ®è¢«å†™å…¥å†…å­˜ä¸­ï¼Œå…¶ä»–æ ¸å¯ä»¥è·å–åˆ°æœ€æ–°æ•°æ®ï¼Œç”±äºå…¶ä»– CPU ä¿®æ”¹è¯¥æ¡æ•°æ®ï¼Œåˆ™æœ¬åœ° Cache å˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ E Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ E E Local Write ä¿®æ”¹æ•°æ®ï¼ŒçŠ¶æ€æ”¹ä¸º M M E Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼Œå˜ä¸º S S E Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ S Local Read ä» Cache ä¸­è¯»ï¼ŒçŠ¶æ€ä¸å˜ S S Local Write ä¿®æ”¹æ•°æ®ï¼ŒçŠ¶æ€æ”¹ä¸º Mï¼Œå…¶ä»– CPU çš„ Cache Line çŠ¶æ€æ”¹ä¸º I M S Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼ŒçŠ¶æ€ä¸å˜ S S Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å½“å‰çŠ¶æ€ äº‹ä»¶ è¡Œä¸º ä¸‹ä¸ªçŠ¶æ€ I Local Read 1. å¦‚æœå…¶ä»– CPU æ²¡æœ‰è¿™ä»½æ•°æ®ï¼Œç›´æ¥ä»å†…å­˜ä¸­åŠ è½½æ•°æ®ï¼ŒçŠ¶æ€å˜ä¸º Eï¼› 2. å¦‚æœå…¶ä»– CPU æœ‰è¿™ä¸ªæ•°æ®ï¼Œä¸” Cache Line çŠ¶æ€ä¸º Mï¼Œåˆ™å…ˆæŠŠ Cache Line ä¸­çš„å†…å®¹å†™å›åˆ°ä¸»å­˜ã€‚æœ¬åœ° Cache å†ä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œè¿™æ—¶ä¸¤ä¸ª Cache Line çš„çŠ¶æ€éƒ½å˜ä¸º Sï¼›3. å¦‚æœå…¶ä»– Cache Line æœ‰è¿™ä»½æ•°æ®ï¼Œå¹¶ä¸”çŠ¶æ€ä¸º S æˆ–è€… Eï¼Œåˆ™æœ¬åœ° Cache Line ä»ä¸»å­˜è¯»å–æ•°æ®ï¼Œå¹¶å°†è¿™äº› Cache Line çŠ¶æ€æ”¹ä¸º S E æˆ–è€… S I Local Write 1. å…ˆä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œå¦‚æœå…¶ä»– Cache Line ä¸­æœ‰è¿™ä»½æ•°æ®ï¼Œä¸”çŠ¶æ€ä¸º Mï¼Œåˆ™ç°å°†æ•°æ®æ›´æ–°åˆ°ä¸»å­˜å†è¯»å–ï¼Œå°† Cache Line çŠ¶æ€æ”¹ä¸º Mï¼› 2. å¦‚æœå…¶ä»– Cache Line æœ‰è¿™ä»½æ•°æ®ï¼Œä¸”çŠ¶æ€ä¸º E æˆ–è€… Sï¼Œåˆ™å…¶ä»– Cache Line çŠ¶æ€æ”¹ä¸º I M I Remote Read æ•°æ®å’Œå…¶ä»– CPU å…±äº«ï¼ŒçŠ¶æ€ä¸å˜ S I Remote Write æ•°æ®è¢«ä¿®æ”¹ï¼Œæœ¬åœ°ç¼“å­˜å¤±æ•ˆï¼Œå˜ä¸º I I å†…å­˜è®¡ç®—æœºæœ‰äº”å¤§ç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ï¼šè¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥è®¾å¤‡å’Œè¾“å‡ºè®¾å¤‡ã€‚è€Œå†…å­˜å°±æ˜¯å…¶ä¸­çš„å­˜å‚¨å™¨ã€‚æˆ‘ä»¬çš„æ•°æ®å’ŒæŒ‡ä»¤éƒ½éœ€è¦å…ˆæ”¾åˆ°å†…å­˜ä¸­ï¼Œç„¶åå†è¢« CPU æ‰§è¡Œã€‚ æ“ä½œç³»ç»Ÿä¸­ç¨‹åºå¹¶ä¸èƒ½ç›´æ¥è®¿é—®ç‰©ç†å†…å­˜ï¼Œæˆ‘ä»¬çš„å†…å­˜éœ€è¦è¢«åˆ†æˆå›ºå®šå¤§å°çš„é¡µï¼ˆPageï¼‰ï¼Œç„¶åå†é€šè¿‡è™šæ‹Ÿå†…å­˜åœ°å€ï¼ˆVirtual Addressï¼‰åˆ°ç‰©ç†å†…å­˜åœ°å€ï¼ˆPhysical Addressï¼‰çš„åœ°å€è½¬æ¢ï¼ˆAddress Translationï¼‰ï¼Œæ‰èƒ½åˆ°è¾¾å®é™…å­˜æ”¾æ•°æ®çš„ç‰©ç†å†…å­˜ä½ç½®ã€‚è€Œæˆ‘ä»¬çš„ç¨‹åºçœ‹åˆ°çš„å†…å­˜åœ°å€ï¼Œéƒ½æ˜¯è™šæ‹Ÿå†…å­˜åœ°å€ã€‚é‚£ä¹ˆå¦‚ä½•è¿›è¡Œè½¬æ¢çš„å‘¢ï¼Ÿ ç®€å•é¡µè¡¨æœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯å»ºç«‹ä¸€å¼ è™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜çš„æ˜ å°„è¡¨ï¼Œåœ¨è®¡ç®—æœºé‡Œå«åšé¡µè¡¨ï¼ˆPage Tableï¼‰ã€‚é¡µè¡¨è¿™ä¸ªåœ°å€è½¬æ¢çš„åŠæ³•ï¼Œä¼šæŠŠä¸€ä¸ªå†…å­˜åœ°å€åˆ†æˆé¡µå·ï¼ˆDirectoryï¼‰å’Œåç§»é‡ï¼ˆOffsetï¼‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ˜¯ä¸æ˜¯ä¼¼æ›¾ç›¸è¯†ï¼Œå› ä¸ºåœ¨å‰é¢çš„é«˜é€Ÿç¼“å­˜é‡Œï¼Œç¼“å­˜çš„ç»“æ„ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚ ä»¥ä¸€ä¸ª 32 ä½åœ°å€ä¸¾ä¾‹ï¼Œé«˜ 20 ä½æ˜¯è™šæ‹Ÿé¡µå·ï¼Œå¯ä»¥ä»è™šæ‹Ÿé¡µè¡¨ä¸­æ‰¾åˆ°ç‰©ç†é¡µå·çš„ä¿¡æ¯ï¼Œä½ 12 ä½æ˜¯åç§»é‡ï¼Œå¯ä»¥å‡†ç¡®è·å¾—ç‰©ç†åœ°å€ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œå¯¹äºä¸€ä¸ªå†…å­˜åœ°å€è½¬æ¢ï¼Œå…¶å®å°±æ˜¯è¿™æ ·ä¸‰ä¸ªæ­¥éª¤ï¼š æŠŠè™šæ‹Ÿå†…å­˜åœ°å€ï¼Œåˆ‡åˆ†æˆé¡µå·å’Œåç§»é‡çš„ç»„åˆï¼› ä»é¡µè¡¨é‡Œé¢ï¼ŒæŸ¥è¯¢å‡ºè™šæ‹Ÿé¡µå·ï¼Œå¯¹åº”çš„ç‰©ç†é¡µå·ï¼› ç›´æ¥æ‹¿ç‰©ç†é¡µå·ï¼ŒåŠ ä¸Šå‰é¢çš„åç§»é‡ï¼Œå°±å¾—åˆ°äº†ç‰©ç†å†…å­˜åœ°å€ã€‚ ä½†æ˜¯è¿™æ ·çš„é¡µè¡¨æœ‰ä¸ªé—®é¢˜ï¼Œå®ƒéœ€è¦è®°å½•$2^{20}$ä¸ªç‰©ç†é¡µè¡¨ï¼Œè¿™ä¸ªå­˜å‚¨å…³ç³»ï¼Œå°±å¥½æ¯”ä¸€ä¸ª $2^{20}$å¤§å°çš„æ•°ç»„ã€‚ä¸€ä¸ªé¡µå·æ˜¯å®Œæ•´çš„ 32 ä½çš„ 4 å­—èŠ‚ï¼ˆByteï¼‰ï¼Œè¿™æ ·ä¸€ä¸ªé¡µè¡¨å°±éœ€è¦ 4MB çš„ç©ºé—´ã€‚å¹¶ä¸”æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰è¿™æ ·ä¸€ä¸ªé¡µè¡¨ï¼Œç°ä»£ç”µè„‘æ­£å¸¸éƒ½æœ‰æˆç™¾ä¸Šåƒä¸ªè¿›ç¨‹ï¼Œå¦‚æœç”¨è¿™æ ·çš„é¡µè¡¨è‚¯å®šè¡Œä¸é€šçš„ã€‚ å¤šçº§é¡µè¡¨æ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªå®é™…çš„ç¨‹åºè¿›ç¨‹é‡Œé¢ï¼Œè™šæ‹Ÿå†…å­˜å ç”¨çš„åœ°å€ç©ºé—´ï¼Œé€šå¸¸æ˜¯ä¸¤æ®µè¿ç»­çš„ç©ºé—´ã€‚è€Œä¸æ˜¯å®Œå…¨æ•£è½çš„éšæœºçš„å†…å­˜åœ°å€ã€‚è€Œå¤šçº§é¡µè¡¨ï¼Œå°±ç‰¹åˆ«é€‚åˆè¿™æ ·çš„å†…å­˜åœ°å€åˆ†å¸ƒã€‚ è°ˆä¸€è°ˆå†…å­˜ç®¡ç†ï¼Œè™šæ‹Ÿå†…å­˜ï¼Œå¤šçº§é¡µè¡¨ - çŸ¥ä¹ TLBå†…å­˜ä¿æŠ¤ - å¯æ‰§è¡Œç©ºé—´ä¿æŠ¤å†…å­˜ä¿æŠ¤ - åœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ–Address Space Layout Randomization æ€»çº¿ï¼šè®¡ç®—æœºå†…éƒ¨çš„é«˜é€Ÿå…¬è·¯è®¡ç®—æœºç”±æ§åˆ¶å™¨ã€è¿ç®—å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥è®¾å¤‡ä»¥åŠè¾“å‡ºè®¾å¤‡äº”å¤§éƒ¨åˆ†ç»„æˆã€‚CPU æ‰€ä»£è¡¨çš„æ§åˆ¶å™¨å’Œè¿ç®—å™¨ï¼Œè¦å’Œå­˜å‚¨å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ä¸»å†…å­˜ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºè®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚é‚£ä¹ˆè®¡ç®—æœºæ˜¯ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼æ¥å®Œæˆï¼ŒCPU å’Œå†…å­˜ã€ä»¥åŠå¤–éƒ¨è¾“å…¥è¾“å‡ºè®¾å¤‡çš„é€šä¿¡å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯é€šè¿‡æ€»çº¿æ¥é€šä¿¡ã€‚ è®¡ç®—æœºé‡Œæœ‰ä¸åŒçš„ç¡¬ä»¶è®¾å¤‡ï¼Œå¦‚æœè®¾å¤‡ä¸è®¾å¤‡ä¹‹é—´éƒ½å•ç‹¬è¿æ¥ï¼Œé‚£ä¹ˆå°±éœ€è¦ N*N çš„è¿çº¿ã€‚é‚£ä¹ˆæ€ä¹ˆé™ä½å¤æ‚åº¦å‘¢ï¼Ÿä¸å…¶è®©å„ä¸ªè®¾å¤‡ä¹‹é—´äº’ç›¸å•ç‹¬é€šä¿¡ï¼Œä¸å¦‚æˆ‘ä»¬å»è®¾è®¡ä¸€ä¸ªå…¬ç”¨çš„çº¿è·¯ã€‚CPU æƒ³è¦å’Œä»€ä¹ˆè®¾å¤‡é€šä¿¡ï¼Œé€šä¿¡çš„æŒ‡ä»¤æ˜¯ä»€ä¹ˆï¼Œå¯¹åº”çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼Œéƒ½å‘é€åˆ°è¿™ä¸ªçº¿è·¯ä¸Šï¼›è®¾å¤‡è¦å‘ CPU å‘é€ä»€ä¹ˆä¿¡æ¯å‘¢ï¼Œä¹Ÿå‘é€åˆ°è¿™ä¸ªçº¿è·¯ä¸Šã€‚è¿™ä¸ªçº¿è·¯å°±å¥½åƒä¸€ä¸ªé«˜é€Ÿå…¬è·¯ï¼Œå„ä¸ªè®¾å¤‡å’Œå…¶ä»–è®¾å¤‡ä¹‹é—´ï¼Œä¸éœ€è¦å•ç‹¬å»ºå…¬è·¯ï¼Œåªå»ºä¸€æ¡å°è·¯é€šå‘è¿™æ¡é«˜é€Ÿå…¬è·¯å°±å¥½äº†ã€‚ ä¸‰ç§çº¿è·¯å’Œå¤šæ€»çº¿æ¶æ„é¦–å…ˆï¼ŒCPU å’Œå†…å­˜ä»¥åŠé«˜é€Ÿç¼“å­˜é€šä¿¡çš„æ€»çº¿ï¼Œè¿™é‡Œé¢é€šå¸¸æœ‰ä¸¤ç§æ€»çº¿ã€‚è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåŒç‹¬ç«‹æ€»çº¿ï¼ˆDual Independent Busï¼Œç¼©å†™ä¸º DIBï¼‰ã€‚CPU é‡Œï¼Œæœ‰ä¸€ä¸ªå¿«é€Ÿçš„æœ¬åœ°æ€»çº¿ï¼ˆLocal Busï¼‰ï¼Œä»¥åŠä¸€ä¸ªé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢çš„å‰ç«¯æ€»çº¿ï¼ˆFront-side Busï¼‰ã€‚ ç°ä»£çš„ CPU é‡Œï¼Œé€šå¸¸æœ‰ä¸“é—¨çš„é«˜é€Ÿç¼“å­˜èŠ¯ç‰‡ã€‚è¿™é‡Œçš„é«˜é€Ÿæœ¬åœ°æ€»çº¿ï¼Œå°±æ˜¯ç”¨æ¥å’Œé«˜é€Ÿç¼“å­˜é€šä¿¡çš„ã€‚è€Œå‰ç«¯æ€»çº¿ï¼Œåˆ™æ˜¯ç”¨æ¥å’Œä¸»å†…å­˜ä»¥åŠè¾“å…¥è¾“å‡ºè®¾å¤‡é€šä¿¡çš„ã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæŠŠæœ¬åœ°æ€»çº¿ä¹Ÿå«ä½œåç«¯æ€»çº¿ï¼ˆBack-sideBusï¼‰ï¼Œå’Œå‰é¢çš„å‰ç«¯æ€»çº¿å¯¹åº”èµ·æ¥ã€‚ é™¤äº†å‰ç«¯æ€»çº¿å‘¢ï¼Œæˆ‘ä»¬å¸¸å¸¸è¿˜ä¼šå¬åˆ° PCI æ€»çº¿ã€I/O æ€»çº¿æˆ–è€…ç³»ç»Ÿæ€»çº¿ï¼ˆSystem Busï¼‰ã€‚çœ‹åˆ°è¿™ä¹ˆå¤šæ€»çº¿çš„åå­—ï¼Œä½ æ˜¯ä¸æ˜¯å·²ç»æœ‰ç‚¹æ™•äº†ã€‚è¿™äº›åè¯ç¡®å®å®¹æ˜“æ··ä¸ºä¸€è°ˆã€‚å…¶å®å„ç§æ€»çº¿çš„å‘½åä¸€ç›´éƒ½å¾ˆæ··ä¹±ï¼Œæˆ‘ä»¬ä¸å¦‚ç›´æ¥æ¥çœ‹ä¸€çœ‹ CPU çš„ç¡¬ä»¶æ¶æ„å›¾ã€‚å¯¹ç…§å›¾æ¥çœ‹ï¼Œä¸€åˆ‡é—®é¢˜å°±éƒ½æ¸…æ¥šäº†ã€‚ CPU é‡Œé¢çš„åŒ—æ¡¥èŠ¯ç‰‡ï¼ŒæŠŠæˆ‘ä»¬ä¸Šé¢è¯´çš„å‰ç«¯æ€»çº¿ï¼Œä¸€åˆ†ä¸ºäºŒï¼Œå˜æˆäº†ä¸‰ä¸ªæ€»çº¿ã€‚æˆ‘ä»¬çš„å‰ç«¯æ€»çº¿ï¼Œå…¶å®å°±æ˜¯ç³»ç»Ÿæ€»çº¿ã€‚CPU é‡Œé¢çš„å†…å­˜æ¥å£ï¼Œç›´æ¥å’Œç³»ç»Ÿæ€»çº¿é€šä¿¡ï¼Œç„¶åç³»ç»Ÿæ€»çº¿å†æ¥å…¥ä¸€ä¸ª I/O æ¡¥æ¥å™¨ï¼ˆI/OBridgeï¼‰ã€‚è¿™ä¸ª I/O æ¡¥æ¥å™¨ï¼Œä¸€è¾¹æ¥å…¥äº†æˆ‘ä»¬çš„å†…å­˜æ€»çº¿ï¼Œä½¿å¾—æˆ‘ä»¬çš„ CPU å’Œå†…å­˜é€šä¿¡ï¼›å¦ä¸€è¾¹å‘¢ï¼Œåˆæ¥å…¥äº†ä¸€ä¸ª I/O æ€»çº¿ï¼Œç”¨æ¥è¿æ¥ I/O è®¾å¤‡ã€‚ äº‹å®ä¸Šï¼ŒçœŸå®çš„è®¡ç®—æœºé‡Œï¼Œè¿™ä¸ªæ€»çº¿å±‚é¢æ‹†åˆ†å¾—æ›´ç»†ã€‚æ ¹æ®ä¸åŒçš„è®¾å¤‡ï¼Œè¿˜ä¼šåˆ†æˆç‹¬ç«‹çš„ PCI æ€»çº¿ã€ISA æ€»çº¿ç­‰ç­‰ã€‚ åœ¨ç‰©ç†å±‚é¢ï¼Œå…¶å®æˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠæ€»çº¿çœ‹ä½œä¸€ç»„â€œç”µçº¿â€ã€‚ä¸è¿‡å‘¢ï¼Œè¿™äº›ç”µçº¿ä¹‹é—´ä¹Ÿæ˜¯æœ‰åˆ†å·¥çš„ï¼Œæˆ‘ä»¬é€šå¸¸æœ‰ä¸‰ç±»çº¿è·¯ã€‚ æ•°æ®çº¿ï¼ˆData Busï¼‰ï¼Œç”¨æ¥ä¼ è¾“å®é™…çš„æ•°æ®ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯å®é™…ä¸Šäº†å…¬äº¤è½¦çš„â€œäººâ€ã€‚ åœ°å€çº¿ï¼ˆAddress Busï¼‰ï¼Œç”¨æ¥ç¡®å®šåˆ°åº•æŠŠæ•°æ®ä¼ è¾“åˆ°å“ªé‡Œå»ï¼Œæ˜¯å†…å­˜çš„æŸä¸ªä½ç½®ï¼Œè¿˜æ˜¯æŸä¸€ä¸ª I/O è®¾å¤‡ã€‚è¿™ä¸ªå…¶å®å°±ç›¸å½“äºæ‹¿äº†ä¸ªçº¸æ¡ï¼Œå†™ä¸‹äº†ä¸Šé¢çš„äººè¦ä¸‹è½¦çš„ç«™ç‚¹ã€‚ æ§åˆ¶çº¿ï¼ˆControlBusï¼‰ï¼Œç”¨æ¥æ§åˆ¶å¯¹äºæ€»çº¿çš„è®¿é—®ã€‚è™½ç„¶æˆ‘ä»¬æŠŠæ€»çº¿æ¯”å–»æˆäº†ä¸€è¾†å…¬äº¤è½¦ã€‚é‚£ä¹ˆæœ‰äººæƒ³è¦åšå…¬äº¤è½¦çš„æ—¶å€™ï¼Œéœ€è¦å‘Šè¯‰å…¬äº¤è½¦å¸æœºï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„æ§åˆ¶ä¿¡å·ã€‚ å°½ç®¡æ€»çº¿å‡å°‘äº†è®¾å¤‡ä¹‹é—´çš„è€¦åˆï¼Œä¹Ÿé™ä½äº†ç³»ç»Ÿè®¾è®¡çš„å¤æ‚åº¦ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªæ–°é—®é¢˜ï¼Œé‚£å°±æ˜¯æ€»çº¿ä¸èƒ½åŒæ—¶ç»™å¤šä¸ªè®¾å¤‡æä¾›é€šä¿¡åŠŸèƒ½ã€‚ æˆ‘ä»¬çš„æ€»çº¿æ˜¯å¾ˆå¤šä¸ªè®¾å¤‡å…¬ç”¨çš„ï¼Œé‚£å¤šä¸ªè®¾å¤‡éƒ½æƒ³è¦ç”¨æ€»çº¿ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œå»å†³å®šè¿™ç§æƒ…å†µä¸‹ï¼Œåˆ°åº•æŠŠæ€»çº¿ç»™å“ªä¸€ä¸ªè®¾å¤‡ç”¨ã€‚è¿™ä¸ªæœºåˆ¶ï¼Œå°±å«ä½œæ€»çº¿è£å†³ï¼ˆBus Arbitractionï¼‰ ç¡¬ç›˜DMAè¿‡å»å‡ å¹´ï¼Œè®¡ç®—æœºäº§ä¸šä¸€ç›´åœ¨ä¸ºæå‡ I/O è®¾å¤‡çš„é€Ÿåº¦è€ŒåŠªåŠ›ï¼Œä»æœºæ¢°ç¡¬ç›˜ HDD åˆ°å›ºæ€ç¡¬ç›˜ SSDï¼Œä» SATA åè®®åˆ° PCIE åè®®ï¼Œè™½ç„¶é€Ÿåº¦éƒ½å‡ åä¸Šç™¾å€çš„å¢åŠ ï¼Œä½†æ˜¯ä»ç„¶ä¸å¤Ÿå¿«ã€‚å› ä¸ºç›¸æ¯”äº CPU åŸºæœ¬éƒ½æ˜¯ 2GHz çš„é¢‘ç‡ï¼ˆæ¯ç§’ä¼šæœ‰ 20 äº¿æ¬¡çš„æ“ä½œï¼‰ï¼ŒSSD ç¡¬ç›˜çš„ IOPS çš„ 2 ä¸‡æ¬¡æ“ä½œå°±æ˜¾å¾—å¾®ä¸è¶³é“ã€‚ å¦‚æœæˆ‘ä»¬å¯¹äº I/O çš„æ“ä½œï¼Œéƒ½æ˜¯ç”± CPU å‘å‡ºå¯¹åº”çš„æŒ‡ä»¤ï¼Œç„¶åç­‰å¾… I/O è®¾å¤‡å®Œæˆæ“ä½œä¹‹åè¿”å›ï¼Œé‚£ CPU æœ‰å¤§é‡çš„æ—¶é—´å…¶å®éƒ½æ˜¯åœ¨ç­‰å¾… I/O è®¾å¤‡å®Œæˆæ“ä½œã€‚ç‰¹åˆ«æ˜¯å½“ä¼ è¾“çš„æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œæ¯”å¦‚è¿›è¡Œå¤§æ–‡ä»¶å¤åˆ¶ï¼Œå¦‚æœæ‰€æœ‰æ•°æ®éƒ½è¦ç»è¿‡ CPUï¼Œå®åœ¨æ˜¯æœ‰ç‚¹å„¿å¤ªæµªè´¹æ—¶é—´äº†ã€‚ å› æ­¤ï¼Œè®¡ç®—æœºå·¥ç¨‹å¸ˆä»¬ï¼Œå°±å‘æ˜äº†DMA æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å†…å­˜è®¿é—®ï¼ˆDirect Memory Accessï¼‰æŠ€æœ¯ï¼Œæ¥å‡å°‘ CPU ç­‰å¾…çš„æ—¶é—´ã€‚ ä»€ä¹ˆæ˜¯ DMAæœ¬è´¨ä¸Šï¼ŒDMA æŠ€æœ¯å°±æ˜¯æˆ‘ä»¬åœ¨ä¸»æ¿ä¸Šæ”¾ä¸€å—ç‹¬ç«‹çš„èŠ¯ç‰‡ã€‚åœ¨è¿›è¡Œå†…å­˜å’Œ I/O è®¾å¤‡çš„æ•°æ®ä¼ è¾“çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å†é€šè¿‡ CPU æ¥æ§åˆ¶æ•°æ®ä¼ è¾“ï¼Œè€Œç›´æ¥é€šè¿‡ DMA æ§åˆ¶å™¨ï¼ˆDMA Controllerï¼Œç®€ç§° DMACï¼‰ã€‚è¿™å—èŠ¯ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªåå¤„ç†å™¨ï¼ˆCo-Processorï¼‰ã€‚ DMAC æœ€æœ‰ä»·å€¼çš„åœ°æ–¹ä½“ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¦ä¼ è¾“çš„æ•°æ®ç‰¹åˆ«å¤§ã€é€Ÿåº¦ç‰¹åˆ«å¿«ï¼Œæˆ–è€…ä¼ è¾“çš„æ•°æ®ç‰¹åˆ«å°ã€é€Ÿåº¦ç‰¹åˆ«æ…¢çš„æ—¶å€™ã€‚ æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ç”¨åƒå…†ç½‘å¡æˆ–è€…ç¡¬ç›˜ä¼ è¾“å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœéƒ½ç”¨ CPU æ¥æ¬è¿çš„è¯ï¼Œè‚¯å®šå¿™ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹© DMACã€‚è€Œå½“æ•°æ®ä¼ è¾“å¾ˆæ…¢çš„æ—¶å€™ï¼ŒDMAC å¯ä»¥ç­‰æ•°æ®åˆ°é½äº†ï¼Œå†å‘ CPU å‘èµ·ä¸­æ–­ï¼Œè®© CPU å»å¤„ç†ï¼Œè€Œä¸æ˜¯è®© CPU åœ¨é‚£é‡Œå¿™ç­‰å¾…ã€‚ é¦–å…ˆï¼ŒCPU è¿˜æ˜¯ä½œä¸ºä¸€ä¸ªä¸»è®¾å¤‡ï¼Œå‘ DMAC è®¾å¤‡å‘èµ·è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚ï¼Œå…¶å®å°±æ˜¯åœ¨ DMAC é‡Œé¢ä¿®æ”¹é…ç½®å¯„å­˜å™¨ã€‚ CPU ä¿®æ”¹ DMAC çš„é…ç½®çš„æ—¶å€™ï¼Œä¼šå‘Šè¯‰ DMAC è¿™æ ·å‡ ä¸ªä¿¡æ¯ï¼š æºåœ°å€çš„åˆå§‹å€¼ï¼šæ•°æ®è¦ä»å“ªé‡Œä¼ è¾“è¿‡æ¥ã€‚å¦‚æœæˆ‘ä»¬è¦ä»å†…å­˜é‡Œé¢å†™å…¥æ•°æ®åˆ°ç¡¬ç›˜ä¸Šï¼Œé‚£ä¹ˆå°±æ˜¯è¦è¯»å–çš„æ•°æ®åœ¨å†…å­˜é‡Œé¢çš„åœ°å€ ä¼ è¾“æ—¶å€™çš„åœ°å€å¢å‡æ–¹å¼ï¼šæ•°æ®æ˜¯ä»å¤§çš„åœ°å€å‘å°çš„åœ°å€ä¼ è¾“ï¼Œè¿˜æ˜¯ä»å°çš„åœ°å€å¾€å¤§çš„åœ°å€ä¼ è¾“ ä¼ è¾“çš„æ•°æ®é•¿åº¦ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸€å…±è¦ä¼ è¾“å¤šå°‘æ•°æ® è®¾ç½®å®Œè¿™äº›ä¿¡æ¯ä¹‹åï¼ŒDMAC å°±ä¼šå˜æˆä¸€ä¸ªç©ºé—²çš„çŠ¶æ€ï¼ˆIdleï¼‰ã€‚ å¦‚æœæˆ‘ä»¬è¦ä»ç¡¬ç›˜ä¸Šå¾€å†…å­˜é‡Œé¢åŠ è½½æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç¡¬ç›˜å°±ä¼šå‘ DMAC å‘èµ·ä¸€ä¸ªæ•°æ®ä¼ è¾“è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚å¹¶ä¸æ˜¯é€šè¿‡æ€»çº¿ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªé¢å¤–çš„è¿çº¿ã€‚ ç„¶åï¼Œæˆ‘ä»¬çš„ DMAC éœ€è¦å†é€šè¿‡ä¸€ä¸ªé¢å¤–çš„è¿çº¿å“åº”è¿™ä¸ªç”³è¯·ã€‚ DMAC è¿™ä¸ªèŠ¯ç‰‡ï¼Œå°±å‘ç¡¬ç›˜çš„æ¥å£å‘èµ·è¦æ€»çº¿è¯»çš„ä¼ è¾“è¯·æ±‚ã€‚æ•°æ®å°±ä»ç¡¬ç›˜é‡Œé¢ï¼Œè¯»åˆ°äº† DMAC çš„æ§åˆ¶å™¨é‡Œé¢ã€‚ DMAC å†å‘æˆ‘ä»¬çš„å†…å­˜å‘èµ·æ€»çº¿å†™çš„æ•°æ®ä¼ è¾“è¯·æ±‚ï¼ŒæŠŠæ•°æ®å†™å…¥åˆ°å†…å­˜é‡Œé¢ã€‚ DMAC ä¼šåå¤è¿›è¡Œä¸Šé¢ç¬¬ 6ã€7 æ­¥çš„æ“ä½œï¼Œç›´åˆ° DMAC çš„å¯„å­˜å™¨é‡Œé¢è®¾ç½®çš„æ•°æ®é•¿åº¦ä¼ è¾“å®Œæˆã€‚ æ•°æ®ä¼ è¾“å®Œæˆä¹‹åï¼ŒDMAC é‡æ–°å›åˆ°ç¬¬ 3 æ­¥çš„ç©ºé—²çŠ¶æ€ã€‚ æ‰€ä»¥ï¼Œæ•´ä¸ªæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸æ˜¯é€šè¿‡ CPU æ¥æ¬è¿æ•°æ®ï¼Œè€Œæ˜¯ç”± DMAC è¿™ä¸ªèŠ¯ç‰‡æ¥æ¬è¿æ•°æ®ã€‚ä½†æ˜¯ CPU åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚å› ä¸ºä¼ è¾“ä»€ä¹ˆæ•°æ®ï¼Œä»å“ªé‡Œä¼ è¾“åˆ°å“ªé‡Œï¼Œå…¶å®è¿˜æ˜¯ç”± CPU æ¥è®¾ç½®çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼ŒDMAC è¢«å«ä½œ åå¤„ç†å™¨ã€‚ å‚è€ƒèµ„æ–™ã€ç¡¬ä»¶ç§‘æ™®ã€‘ç”µè„‘ä¸»æ¿å³ä¸‹è§’çš„æ•£çƒ­ç‰‡ä¸‹é¢ç©¶ç«Ÿéšè—ç€ä»€ä¹ˆï¼Ÿè¯¦è§£ä¸»æ¿å—æ¡¥èŠ¯ç‰‡ç»„çš„åŠŸèƒ½å’Œä½œç”¨_å“”å“©å“”å“©_bilibili","categories":[{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"}],"tags":[{"name":"Cache","slug":"Cache","permalink":"http://example.com/tags/Cache/"},{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"},{"name":"é¡µè¡¨","slug":"é¡µè¡¨","permalink":"http://example.com/tags/%E9%A1%B5%E8%A1%A8/"},{"name":"DMA","slug":"DMA","permalink":"http://example.com/tags/DMA/"},{"name":"è™šæ‹Ÿå†…å­˜","slug":"è™šæ‹Ÿå†…å­˜","permalink":"http://example.com/tags/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://example.com/tags/%E7%BC%93%E5%AD%98/"},{"name":"æ€»çº¿","slug":"æ€»çº¿","permalink":"http://example.com/tags/%E6%80%BB%E7%BA%BF/"}]},{"title":"è®¡ç®—æœºç»„æˆåŸç†-å¤„ç†å™¨","slug":"è®¡ç®—æœºç»„æˆåŸç†-å¤„ç†å™¨","date":"2022-05-01T07:42:11.000Z","updated":"2022-05-08T04:42:11.000Z","comments":true,"path":"2022/05/01/è®¡ç®—æœºç»„æˆåŸç†-å¤„ç†å™¨/","link":"","permalink":"http://example.com/2022/05/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%A4%84%E7%90%86%E5%99%A8/","excerpt":"","text":"å»ºç«‹æ•°æ®é€šè·¯ï¼šæŒ‡ä»¤ + è¿ç®—=CPUæŒ‡ä»¤å‘¨æœŸ Fetchï¼ˆå–å¾—æŒ‡ä»¤ï¼‰ï¼šä»å†…å­˜é‡ŒæŠŠæŒ‡ä»¤åŠ è½½åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­ã€‚ Decodeï¼ˆæŒ‡ä»¤è¯‘ç ï¼‰ Executeï¼ˆæ‰§è¡ŒæŒ‡ä»¤ï¼‰é‡å¤æ“ä½œè¿™ä¸‰æ­¥ï¼Œè¿™ä¸ªå¾ªç¯ç§°ä¸ºæŒ‡ä»¤å‘¨æœŸã€‚ ä¸åŒçš„æ­¥éª¤åœ¨ä¸åŒç»„ä»¶å†…å®Œæˆ æœºå™¨å‘¨æœŸ/CPUå‘¨æœŸï¼šä»å†…å­˜é‡Œè¯»å–ä¸€æ¡æŒ‡ä»¤çš„æœ€çŸ­æ—¶é—´ã€‚æ—¶é’Ÿå‘¨æœŸï¼šå°±æ˜¯æœºå™¨çš„ä¸»é¢‘ï¼Œä¸€ä¸ª CPU å‘¨æœŸç”±å¤šä¸ªæ—¶é’Ÿå‘¨æœŸç»„æˆã€‚ æ“ä½œå…ƒä»¶ï¼šç»„åˆé€»è¾‘å…ƒä»¶ï¼ŒALUï¼ŒåŠŸèƒ½æ˜¯åœ¨ç‰¹å®šçš„è¾“å…¥ä¸‹ï¼Œç”Ÿæˆç‰¹å®šçš„è¾“å‡ºã€‚å­˜å‚¨å…ƒä»¶ï¼šçŠ¶æ€å…ƒä»¶ï¼Œå¯„å­˜å™¨ã€‚ å°†æ“ä½œå…ƒä»¶ï¼Œæ“ä½œåŸä»¶é€šè¿‡æ•°æ®æ€»çº¿çš„æ–¹å¼è¿æ¥èµ·æ¥ï¼Œå°±å»ºç«‹äº†æ•°æ®é€šè·¯äº†ã€‚ æ§åˆ¶å™¨ï¼šå¾ªç¯æ‰§è¡Œå–å€-è¯‘ç ï¼Œäº§ç”Ÿæ§åˆ¶ä¿¡å·äº¤ç»™ ALU å¤„ç†ã€‚ç”µè·¯ç‰¹åˆ«å¤æ‚ï¼ŒCPU å¦‚æœæ”¯æŒ 2000 ä¸ªæŒ‡ä»¤ï¼Œæ„å‘³ç€æ§åˆ¶å™¨è¾“å‡ºçš„ä¿¡å·æœ‰ 2000 ä¸ªä¸åŒçš„ç»„åˆã€‚ CPU éœ€è¦çš„ç”µè·¯ æ ¹æ®è¾“å…¥è®¡ç®—å‡ºç»“æœçš„ä¸€ä¸ªç”µè·¯ï¼ŒALU èƒ½å¤Ÿè¿›è¡ŒçŠ¶æ€è¯»å†™çš„ç”µè·¯å…ƒä»¶ï¼Œå¯„å­˜å™¨ æŒ‰ç…§å›ºå®šå‘¨æœŸï¼Œä¸åœå®ç° PC å¯„å­˜å™¨è‡ªå¢çš„ç”µè·¯ è¯‘ç ç”µè·¯ï¼Œèƒ½å¤Ÿå¯¹äºæ‹¿åˆ°çš„å†…å­˜åœ°å€è·å–å¯¹åº”çš„æ•°æ®æˆ–è€…æŒ‡ä»¤ Q : CPU å¥½åƒä¸€ä¸ªæ°¸ä¸åœæ­‡çš„æœºå™¨ï¼Œä¸€ç›´åœ¨ä¸åœåœ°è¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤å»è¿è¡Œã€‚é‚£ ä¸ºä»€ä¹ˆ CPU è¿˜ä¼šæœ‰æ»¡è½½è¿è¡Œå’Œ Idle é—²ç½®çš„çŠ¶æ€å‘¢ï¼ŸAï¼šCPU è¿˜ä¼šæœ‰æ»¡è½½è¿è¡Œå’Œ Idle é—²ç½®çš„çŠ¶æ€ï¼ŒæŒ‡çš„ç³»ç»Ÿå±‚é¢çš„çŠ¶æ€ã€‚å³ä½¿æ˜¯ Idle ç©ºé—²çŠ¶æ€ï¼ŒCPU ä¹Ÿåœ¨æ‰§è¡Œå¾ªç¯æŒ‡ä»¤ã€‚æ“ä½œç³»ç»Ÿå†…æ ¸æœ‰ idle è¿›ç¨‹ï¼Œä¼˜å…ˆçº§æœ€ä½ï¼Œä»…å½“å…¶ä»–è¿›ç¨‹éƒ½é˜»å¡æ—¶è¢«è°ƒåº¦å™¨é€‰ä¸­ã€‚idle è¿›ç¨‹å¾ªç¯æ‰§è¡Œ HLT æŒ‡ä»¤ï¼Œå…³é—­ CPU å¤§éƒ¨åˆ†åŠŸèƒ½ä»¥é™ä½åŠŸè€—ï¼Œæ”¶åˆ°ä¸­æ–­ä¿¡å·æ—¶ CPU æ¢å¤æ­£å¸¸çŠ¶æ€ã€‚CPU åœ¨ç©ºé—²çŠ¶æ€å°±ä¼šåœæ­¢æ‰§è¡Œï¼Œå³åˆ‡æ–­æ—¶é’Ÿä¿¡å·ï¼ŒCPU ä¸»é¢‘ä¼šç¬é—´é™ä½ä¸º 0ï¼ŒåŠŸè€—ä¹Ÿä¼šç¬é—´é™ä¸º 0ã€‚ç”±äºè¿™ä¸ªç©ºé—²çŠ¶æ€æ˜¯ååˆ†çŸ­æš‚çš„ï¼Œæ‰€ä»¥ä½ åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¹Ÿåªä¼šçœ‹åˆ° CPU é¢‘ç‡ä¸‹é™ï¼Œä¸ä¼šçœ‹åˆ°é™ä¸º 0ã€‚å½“ CPU ä»ç©ºé—²çŠ¶æ€ä¸­æ¢å¤æ—¶ï¼Œå°±ä¼šæ¥é€šæ—¶é’Ÿä¿¡å·ï¼ŒCPU é¢‘ç‡å°±ä¼šä¸Šå‡ã€‚æ‰€ä»¥ä½ ä¼šåœ¨ä»»åŠ¡ç®¡ç†å™¨é‡Œé¢çœ‹åˆ° CPU çš„é¢‘ç‡èµ·ä¼å˜åŒ–ã€‚ å®ç°ä¸€ä¸ªå®Œæ•´çš„ CPUï¼Œé™¤äº†ç»„åˆé€»è¾‘ç”µè·¯ï¼Œè¿˜éœ€è¦æ—¶åºé€»è¾‘ç”µè·¯ã€‚å› ä¸ºç»„åˆé€»è¾‘ç”µè·¯åªæ˜¯å¤„ç†å›ºå®šè¾“å…¥ï¼Œå¾—åˆ°å›ºå®šè¾“å‡ºï¼Œè¿™ç§ç”µè·¯åªèƒ½ååŠ©æˆ‘ä»¬å®Œæˆä¸€äº›è®¡ç®—å·¥ä½œï¼Œå¹²ä¸äº†å¤ªå¤æ‚çš„å·¥ä½œã€‚ æ—¶åºé€»è¾‘ç”µè·¯å¯ä»¥è§£å†³è¿™å‡ ä¸ªé—®é¢˜ï¼š è‡ªåŠ¨è¿è¡Œé—®é¢˜ æ—¶åºç”µè·¯æ¥é€šä¹‹åå¯ä»¥ä¸åœåœ°å¼€å¯å’Œå…³é—­å¼€å…³ï¼Œè¿›å…¥ä¸€ä¸ªè‡ªåŠ¨è¿è¡Œçš„çŠ¶æ€ã€‚è¿™ä¸ªä½¿å¾—æˆ‘ä»¬ä¸Šä¸€è®²è¯´çš„ï¼Œæ§åˆ¶å™¨ä¸åœåœ°è®© PC å¯„å­˜å™¨è‡ªå¢è¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤æˆä¸ºå¯èƒ½ã€‚ å­˜å‚¨é—®é¢˜ é€šè¿‡æ—¶åºç”µè·¯å®ç°çš„è§¦å‘å™¨ï¼Œèƒ½æŠŠè®¡ç®—ç»“æœå­˜å‚¨åœ¨ç‰¹å®šçš„ç”µè·¯é‡Œé¢ï¼Œ è€Œä¸æ˜¯åƒç»„åˆé€»è¾‘ç”µè·¯é‚£æ ·ï¼Œä¸€æ—¦è¾“å…¥æœ‰ä»»ä½•æ”¹å˜ï¼Œå¯¹åº”çš„è¾“å‡ºä¹Ÿä¼šæ”¹å˜ã€‚ æ—¶åºåè°ƒé—®é¢˜ æ— è®ºæ˜¯ç¨‹åºå®ç°çš„è½¯ä»¶æŒ‡ä»¤ï¼Œè¿˜æ˜¯åˆ°ç¡¬ä»¶å±‚é¢ï¼Œå„ç§æŒ‡ä»¤çš„æ“ä½œéƒ½æœ‰å…ˆåçš„é¡ºåºè¦æ±‚ã€‚æ—¶åºç”µè·¯ä½¿å¾—ä¸åŒçš„äº‹ä»¶æŒ‰ç…§æ—¶é—´é¡ºåºå‘ç”Ÿã€‚ è§£å†³è‡ªåŠ¨è¿è¡Œé—®é¢˜å®ç°æ—¶åºé€»è¾‘ç”µè·¯çš„ç¬¬ä¸€æ­¥å°±éœ€è¦ä¸€ä¸ªæ—¶é’Ÿã€‚CPU çš„ä¸»é¢‘æ˜¯ä¸€ä¸ªæ™¶æŒ¯æ¥å®ç°çš„ï¼Œæ™¶æŒ¯ç”Ÿæˆçš„ç”µè·¯ä¿¡å·å°±æ˜¯æˆ‘ä»¬çš„æ—¶é’Ÿä¿¡å·ã€‚ å®ç°å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨åŸå…ˆä¸€èˆ¬åªæ”¾ä¸€ä¸ªå¼€å…³çš„ä¿¡å·è¾“å…¥ç«¯ï¼Œæ”¾ä¸Šäº†ä¸¤ä¸ªå¼€ å…³ã€‚ä¸€ä¸ªå¼€å…³ Aï¼Œä¸€å¼€å§‹æ˜¯æ–­å¼€çš„ï¼Œç”±æˆ‘ä»¬æ‰‹å·¥æ§åˆ¶ï¼›å¦å¤–ä¸€ä¸ªå¼€å…³ Bï¼Œä¸€å¼€å§‹æ˜¯åˆä¸Šçš„ï¼Œç£æ€§çº¿åœˆå¯¹å‡†ä¸€å¼€å§‹å°±åˆä¸Šçš„å¼€å…³ Bã€‚ äºæ˜¯ï¼Œä¸€æ—¦æˆ‘ä»¬åˆä¸Šå¼€å…³ Aï¼Œç£æ€§çº¿åœˆå°±ä¼šé€šç”µï¼Œäº§ç”Ÿç£æ€§ï¼Œå¼€å…³ B å°±ä¼šä»åˆä¸Šå˜æˆæ–­ å¼€ã€‚ä¸€æ—¦è¿™ä¸ªå¼€å…³æ–­å¼€äº†ï¼Œç”µè·¯å°±ä¸­æ–­äº†ï¼Œç£æ€§çº¿åœˆå°±å¤±å»äº†ç£æ€§ã€‚äºæ˜¯ï¼Œå¼€å…³ B åˆä¼šå¼¹ å›åˆ°åˆä¸Šçš„çŠ¶æ€ã€‚è¿™æ ·ä¸€æ¥ï¼Œç”µè·¯æ¥é€šï¼Œçº¿åœˆåˆæœ‰äº†ç£æ€§ã€‚æˆ‘ä»¬çš„ç”µè·¯å°±ä¼šæ¥å›ä¸æ–­åœ°åœ¨å¼€å¯ã€å…³é—­è¿™ä¸¤ä¸ªçŠ¶æ€ä¸­åˆ‡æ¢ã€‚ è¿™ä¸ªä¸æ–­åˆ‡æ¢çš„è¿‡ç¨‹ï¼Œå¯¹äºä¸‹æ¸¸ç”µè·¯æ¥è¯´ï¼Œå°±æ˜¯ä¸æ–­åœ°äº§ç”Ÿæ–°çš„ 0 å’Œ 1 è¿™æ ·çš„ä¿¡å·ã€‚å¦‚æœ ä½ åœ¨ä¸‹æ¸¸çš„ç”µè·¯ä¸Šæ¥ä¸Šä¸€ä¸ªç¯æ³¡ï¼Œå°±ä¼šå‘ç°è¿™ä¸ªç¯æ³¡åœ¨äº®å’Œæš—ä¹‹é—´ä¸åœåˆ‡æ¢ã€‚è¿™ä¸ªæŒ‰ç…§å›ºå®šçš„å‘¨æœŸä¸æ–­åœ¨ 0 å’Œ 1 ä¹‹é—´åˆ‡æ¢çš„ä¿¡å·ï¼Œå°±æ˜¯æˆ‘ä»¬çš„æ—¶é’Ÿä¿¡å·ã€‚ ä¸€èˆ¬è¿™æ ·äº§ç”Ÿçš„æ—¶é’Ÿä¿¡å·ï¼Œå°±åƒä½ åœ¨å„ç§æ•™ç§‘ä¹¦å›¾ä¾‹ä¸­çœ‹åˆ°çš„ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªæŒ¯è¡äº§ç”Ÿçš„ 0ã€1 ä¿¡å·ã€‚ è¿™ç§ç”µè·¯ï¼Œå…¶å®å°±ç›¸å½“äºæŠŠç”µè·¯çš„è¾“å‡ºä¿¡å·ä½œä¸ºè¾“å…¥ä¿¡å·ï¼Œå†å›åˆ°å½“å‰ç”µè·¯ã€‚è¿™æ ·çš„ç”µè·¯æ„ é€ æ–¹å¼å‘¢ï¼Œæˆ‘ä»¬å«ä½œåé¦ˆç”µè·¯ï¼ˆFeedback Circuitï¼‰ã€‚ ä¸Šé¢è¿™ä¸ªåé¦ˆç”µè·¯ä¸€èˆ¬å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªç¤ºæ„å›¾æ¥è¡¨ ç¤ºï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªè¾“å‡ºç»“æœæ¥å›è¾“å…¥çš„åç›¸å™¨ï¼ˆInverterï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„éé—¨ã€‚ è§£å†³å­˜å‚¨é—®é¢˜ æœ‰äº†æ—¶é’Ÿä¿¡å·ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿé‡Œå°±æœ‰äº†ä¸€ä¸ªåƒâ€œè‡ªåŠ¨é—¨â€ä¸€æ ·çš„å¼€å…³ã€‚åˆ©ç”¨è¿™ä¸ªå¼€å…³å’Œç›¸åŒçš„ åé¦ˆç”µè·¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„é€ å‡ºä¸€ä¸ªæœ‰â€œè®°å¿†â€åŠŸèƒ½çš„ç”µè·¯ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™ä¸ª RS è§¦å‘å™¨ç”µè·¯ã€‚è¿™ä¸ªç”µè·¯ç”±ä¸¤ä¸ªæˆ–éé—¨ç”µè·¯ç»„æˆã€‚æˆ‘åœ¨å›¾é‡Œé¢ï¼ŒæŠŠå®ƒ æ ‡æˆäº† A å’Œ Bã€‚ æˆ–éé—¨çœŸå€¼è¡¨ï¼š|NOR|0| 1|| â€”- | â€”- | â€”- ||0|1|0||1|0|0| åœ¨è¿™ä¸ªç”µè·¯ä¸€å¼€å§‹ï¼Œè¾“å…¥å¼€å…³éƒ½æ˜¯å…³é—­çš„ï¼Œæ‰€ä»¥æˆ–éé—¨ï¼ˆNORï¼‰A çš„è¾“å…¥æ˜¯ 0 å’Œ 0ã€‚å¯¹ åº”åˆ°æˆ‘åˆ—çš„è¿™ä¸ªçœŸå€¼è¡¨ï¼Œè¾“å‡ºå°±æ˜¯ 1ã€‚è€Œæˆ–éé—¨ B çš„è¾“å…¥æ˜¯ 0 å’Œ A çš„è¾“å‡º 1ï¼Œå¯¹åº”è¾“å‡º å°±æ˜¯ 0ã€‚B çš„è¾“å‡º 0 åé¦ˆåˆ° Aï¼Œå’Œä¹‹å‰çš„è¾“å…¥æ²¡æœ‰å˜åŒ–ï¼ŒA çš„è¾“å‡ºä»ç„¶æ˜¯ 1ã€‚è€Œæ•´ä¸ªç”µ è·¯çš„è¾“å‡º Qï¼Œä¹Ÿå°±æ˜¯ 0ã€‚ å½“æˆ‘ä»¬æŠŠ A å‰é¢çš„å¼€å…³ R åˆä¸Šçš„æ—¶å€™ï¼ŒA çš„è¾“å…¥å˜æˆäº† 1 å’Œ 0ï¼Œè¾“å‡ºå°±å˜æˆäº† 0ï¼Œå¯¹åº” B çš„è¾“å…¥å˜æˆ 0 å’Œ 0ï¼Œè¾“å‡ºå°±å˜æˆäº† 1ã€‚B çš„è¾“å‡º 1 åé¦ˆç»™åˆ°äº† Aï¼ŒA çš„è¾“å…¥å˜æˆäº† 1 å’Œ 1ï¼Œè¾“å‡ºä»ç„¶æ˜¯ 0ã€‚æ‰€ä»¥æŠŠ A çš„å¼€å…³åˆä¸Šä¹‹åï¼Œç”µè·¯ä»ç„¶æ˜¯ç¨³å®šçš„ï¼Œä¸ä¼šåƒæ™¶æŒ¯é‚£æ · æŒ¯è¡ï¼Œä½†æ˜¯æ•´ä¸ªç”µè·¯çš„è¾“å‡º Q å˜æˆäº† 1ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬å†æŠŠ A å‰é¢çš„å¼€å…³ R æ‰“å¼€ï¼ŒA çš„è¾“å…¥å˜æˆå’Œ 1 å’Œ 0ï¼Œè¾“å‡ºè¿˜æ˜¯ 0ï¼Œå¯¹åº”çš„ B çš„è¾“å…¥æ²¡æœ‰å˜åŒ–ï¼Œè¾“å‡ºä¹Ÿè¿˜æ˜¯ 1ã€‚B çš„è¾“å‡º 1 åé¦ˆç»™åˆ°äº† Aï¼ŒA çš„è¾“å…¥å˜æˆäº† 1 å’Œ 0ï¼Œè¾“å‡ºä»ç„¶æ˜¯ 0ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç”µè·¯ä»ç„¶ç¨³å®šã€‚å¼€å…³ R å’Œ S çš„çŠ¶æ€å’Œä¸Šé¢çš„ç¬¬ä¸€æ­¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ€ç»ˆçš„è¾“å‡º Q ä»ç„¶æ˜¯ 1ï¼Œå’Œç¬¬ 1 æ­¥é‡Œ Q çŠ¶æ€æ˜¯ç›¸åçš„ã€‚æˆ‘ä»¬çš„è¾“å…¥å’Œåˆšæ‰ç¬¬äºŒæ­¥çš„å¼€å…³çŠ¶æ€ä¸ä¸€æ ·ï¼Œä½†æ˜¯è¾“å‡ºç»“æœä»ç„¶ä¿ç•™åœ¨äº†ç¬¬ 2 æ­¥æ—¶çš„è¾“å‡ºæ²¡æœ‰å‘ç”Ÿå˜ åŒ–ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œåªæœ‰æˆ‘ä»¬å†å»å…³é—­ä¸‹é¢çš„å¼€å…³ Sï¼Œæ‰å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒB æœ‰ä¸€ä¸ªè¾“å…¥å¿…ç„¶æ˜¯ 1ï¼Œæ‰€ä»¥ B çš„è¾“å‡ºå¿…ç„¶æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯ç”µè·¯çš„æœ€ç»ˆè¾“å‡º Q å¿…ç„¶æ˜¯ 0ã€‚ è¿™æ ·ä¸€ä¸ªç”µè·¯ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè§¦å‘å™¨ï¼ˆFlip-Flopï¼‰ã€‚æ¥é€šå¼€å…³ Rï¼Œè¾“å‡ºå˜ä¸º 1ï¼Œå³ä½¿æ–­å¼€å¼€ å…³ï¼Œè¾“å‡ºè¿˜æ˜¯ 1 ä¸å˜ã€‚æ¥é€šå¼€å…³ Sï¼Œè¾“å‡ºå˜ä¸º 0ï¼Œå³ä½¿æ–­å¼€å¼€å…³ï¼Œè¾“å‡ºä¹Ÿè¿˜æ˜¯ 0ã€‚ä¹Ÿå°±æ˜¯ï¼Œ å½“ä¸¤ä¸ªå¼€å…³éƒ½æ–­å¼€çš„æ—¶å€™ï¼Œæœ€ç»ˆçš„è¾“å‡ºç»“æœï¼Œå–å†³äºä¹‹å‰åŠ¨ä½œçš„è¾“å‡ºç»“æœï¼Œè¿™ä¸ªä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„è®°å¿†åŠŸèƒ½ã€‚ é¢å‘æµæ°´çº¿çš„æŒ‡ä»¤è®¾è®¡å•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨ä¸€æ¡ CPU æŒ‡ä»¤çš„æ‰§è¡Œï¼Œæœ‰ä¸‰æ­¥ï¼šå–å¾—æŒ‡ä»¤ï¼Œè¯‘ç ï¼Œæ‰§è¡Œã€‚éœ€è¦ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚è‡ªç„¶è®¾è®¡æŒ‡ä»¤æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›ä¸€æ•´æ¡æŒ‡ä»¤èƒ½åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆã€‚è¿™å°±æ˜¯å•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨ã€‚ ä¸è¿‡ï¼Œæ—¶é’Ÿå‘¨æœŸæ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯æŒ‡ä»¤çš„ç”µè·¯å¤æ‚ç¨‹åº¦æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥å®é™…ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´æ˜¯ä¸åŒçš„ã€‚ä»å‰é¢çš„å­¦ä¹ ä¸­ä¹ŸçŸ¥é“ï¼Œéšç€é—¨ç”µè·¯å±‚æ•°çš„å¢åŠ ï¼Œé—¨å»¶è¿Ÿçš„å­˜åœ¨ï¼Œè®¡ç®—å¤æ‚çš„æŒ‡ä»¤éœ€è¦çš„æ—¶é—´æ›´é•¿ã€‚ ä¸åŒæŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´ä¸åŒï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è®©æ‰€æœ‰æŒ‡ä»¤éƒ½åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆï¼Œé‚£å°±åªå¥½æŠŠæ‰§è¡Œæ—¶é—´æœ€é•¿çš„é‚£ä¸ªæŒ‡ä»¤å’Œæ—¶é’Ÿå‘¨æœŸè®¾æˆä¸€æ ·ã€‚ æ‰€ä»¥ï¼Œåœ¨å•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨é‡Œé¢ï¼Œæ— è®ºæ˜¯æ‰§è¡Œä¸€æ¡ç”¨ä¸åˆ° ALU çš„æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼Œè¿˜æ˜¯ä¸€æ¡è®¡ç®—èµ·æ¥ç”µè·¯ç‰¹åˆ«å¤æ‚çš„æµ®ç‚¹æ•°ä¹˜æ³•è¿ç®—ï¼Œæˆ‘ä»¬éƒ½ç­‰è¦ç­‰æ»¡ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚è¿™æ ·æ—¶é’Ÿé¢‘ç‡å°±æ— æ³•æé«˜ï¼Œå› ä¸ºå¤ªé«˜äº†ï¼Œæœ‰äº›å¤æ‚æŒ‡ä»¤æ— æ³•åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…è¿è¡Œå®Œã€‚ åˆ°è¿™å¯èƒ½å°±æœ‰äººå‘é—®äº†ï¼Œä¹‹å‰ä¸æ˜¯è¯´ä¸€ä¸ª CPU æ—¶é’Ÿå‘¨æœŸï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å®Œæˆä¸€æ¡ç®€å•æŒ‡ä»¤çš„æ—¶é—´ã€‚ä¸ºä»€ä¹ˆå•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨ä¸Šï¼Œå´æˆäº†æ‰§è¡Œä¸€æ¡æœ€å¤æ‚çš„æŒ‡ä»¤çš„æ—¶é—´ï¼Ÿ è¿™æ˜¯å› ä¸ºï¼Œæ— è®ºæ˜¯ PC ä¸Šä½¿ç”¨çš„ Intel CPUï¼Œè¿˜æ˜¯æ‰‹æœºä¸Šä½¿ç”¨çš„ ARM CPUï¼Œéƒ½ä¸æ˜¯å•æŒ‡ä»¤å‘¨æœŸå¤„ç†å™¨ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¸€ç§å«ä½œæŒ‡ä»¤æµæ°´çº¿ï¼ˆInstruction Pipelineï¼‰çš„æŠ€æœ¯ã€‚ æµæ°´çº¿è®¾è®¡CPU æ‰§è¡ŒæŒ‡ä»¤çš„è¿‡ç¨‹å’Œæˆ‘ä»¬åšé¥­ä¸€æ ·ï¼Œæˆ‘ä»¬ä¸ä¼šç­‰ç±³é¥­è’¸å¥½å†æ´—èœï¼Œä¸ä¼šç­‰è‚‰è…Œå¥½å†åˆ‡èœï¼Œè€Œæ˜¯è’¸é¥­æ—¶ï¼Œå¯ä»¥æ´—èœï¼Œè…Œè‚‰æ—¶å¯ä»¥åˆ‡èœã€‚ CPU çš„æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œå…¶å®ä¹Ÿæ˜¯ç”±å„ä¸ªç”µè·¯æ¨¡å—ç»„æˆçš„ã€‚æˆ‘ä»¬åœ¨å–æŒ‡ä»¤çš„æ—¶å€™ï¼Œéœ€è¦ä¸€ä¸ªè¯‘ç å™¨æŠŠæ•°æ®ä»å†…å­˜é‡Œé¢å–å‡ºæ¥ï¼Œå†™å…¥åˆ°å¯„å­˜å™¨ä¸­ï¼›åœ¨æŒ‡ä»¤è¯‘ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¦å¤–ä¸€ä¸ªè¯‘ç å™¨ï¼ŒæŠŠæŒ‡ä»¤è§£ææˆå¯¹åº”çš„æ§åˆ¶ä¿¡å·ã€å†…å­˜åœ°å€å’Œæ•°æ®ï¼›åˆ°äº†æŒ‡ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦çš„åˆ™æ˜¯ä¸€ä¸ªå®Œæˆè®¡ç®—å·¥ä½œçš„ ALUã€‚ è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±ä¸ç”¨æŠŠæ—¶é’Ÿå‘¨æœŸè®¾ç½®æˆæ•´æ¡æŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´ï¼Œè€Œæ˜¯æ‹†åˆ†æˆå®Œæˆè¿™æ ·çš„ä¸€ä¸ªä¸€ä¸ªå°æ­¥éª¤éœ€è¦çš„æ—¶é—´ã€‚åŒæ—¶ï¼Œæ¯ä¸€ä¸ªé˜¶æ®µçš„ç”µè·¯åœ¨å®Œæˆå¯¹åº”çš„ä»»åŠ¡ä¹‹åï¼Œä¹Ÿä¸éœ€è¦ç­‰å¾…æ•´ä¸ªæŒ‡ä»¤æ‰§è¡Œå®Œæˆï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤çš„å¯¹åº”é˜¶æ®µã€‚ å¦‚æœæˆ‘ä»¬æŠŠä¸€ä¸ªæŒ‡ä»¤æ‹†åˆ†æˆâ€œå–æŒ‡ä»¤ - æŒ‡ä»¤è¯‘ç  - æ‰§è¡ŒæŒ‡ä»¤â€è¿™æ ·ä¸‰ä¸ªéƒ¨åˆ†ï¼Œé‚£è¿™å°±æ˜¯ä¸€ä¸ªä¸‰çº§çš„æµæ°´çº¿ã€‚å¦‚æœæˆ‘ä»¬è¿›ä¸€æ­¥æŠŠâ€œæ‰§è¡ŒæŒ‡ä»¤â€æ‹†åˆ†æˆâ€œALU è®¡ç®—ï¼ˆæŒ‡ä»¤æ‰§è¡Œï¼‰- å†…å­˜è®¿é—® - æ•°æ®å†™å›â€ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå˜æˆä¸€ä¸ªäº”çº§çš„æµæ°´çº¿ã€‚ äº”çº§çš„æµæ°´çº¿ï¼Œå°±è¡¨ç¤ºæˆ‘ä»¬åœ¨åŒä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸé‡Œé¢ï¼ŒåŒæ—¶è¿è¡Œäº”æ¡æŒ‡ä»¤çš„ä¸åŒé˜¶æ®µã€‚è¿™ä¸ªæ—¶å€™ï¼Œè™½ç„¶æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„æ—¶é’Ÿå‘¨æœŸå˜æˆäº† 5ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠ CPU çš„ä¸»é¢‘æå¾—æ›´é«˜äº†ã€‚æˆ‘ä»¬ä¸éœ€è¦ç¡®ä¿æœ€å¤æ‚çš„é‚£æ¡æŒ‡ä»¤åœ¨æ—¶é’Ÿå‘¨æœŸé‡Œé¢æ‰§è¡Œå®Œæˆï¼Œè€Œåªè¦ä¿éšœä¸€ä¸ªæœ€å¤æ‚çš„æµæ°´çº¿çº§çš„æ“ä½œï¼Œåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆå°±å¥½äº†ã€‚ å¦‚æœæŸä¸€ä¸ªæ“ä½œæ­¥éª¤çš„æ—¶é—´å¤ªé•¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘æŠŠè¿™ä¸ªæ­¥éª¤ï¼Œæ‹†åˆ†æˆæ›´å¤šçš„æ­¥éª¤ï¼Œè®©æ‰€æœ‰æ­¥éª¤éœ€è¦æ‰§è¡Œçš„æ—¶é—´å°½é‡éƒ½å·®ä¸å¤šé•¿ã€‚ æ—¢ç„¶æµæ°´çº¿å¯ä»¥å¢åŠ æˆ‘ä»¬çš„ååç‡ï¼Œä½ å¯èƒ½è¦é—®äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸æŠŠæµæ°´çº¿çº§æ•°åšå¾—æ›´æ·± å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸åšæˆ 20 çº§ï¼Œä¹ƒè‡³ 40 çº§å‘¢ï¼Ÿè¿™ä¸ªå…¶å®æœ‰å¾ˆå¤šåŸå› ï¼Œæˆ‘åœ¨ä¹‹åå‡ è®²é‡Œé¢ä¼šè¯¦ç»†è®²è§£ã€‚è¿™é‡Œï¼Œæˆ‘å…ˆè®²ä¸€ä¸ªæœ€åŸºæœ¬çš„åŸå› ï¼Œå°±æ˜¯å¢åŠ æµæ°´çº¿æ·±åº¦ï¼Œå…¶å®æ˜¯æœ‰æ€§èƒ½æˆæœ¬çš„ã€‚ æˆ‘ä»¬ç”¨æ¥åŒæ­¥æ—¶é’Ÿå‘¨æœŸçš„ï¼Œä¸å†æ˜¯æŒ‡ä»¤çº§åˆ«çš„ï¼Œè€Œæ˜¯æµæ°´çº¿é˜¶æ®µçº§åˆ«çš„ã€‚æ¯ä¸€çº§æµæ°´çº¿å¯¹åº” çš„è¾“å‡ºï¼Œéƒ½è¦æ”¾åˆ°æµæ°´çº¿å¯„å­˜å™¨ï¼ˆPipeline Registerï¼‰é‡Œé¢ï¼Œç„¶ååœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªæµæ°´çº¿çº§å»å¤„ç†ã€‚æ‰€ä»¥ï¼Œæ¯å¢åŠ ä¸€çº§çš„æµæ°´çº¿ï¼Œå°±è¦å¤šä¸€çº§å†™å…¥åˆ°æµæ°´çº¿å¯„å­˜å™¨çš„æ“ä½œã€‚è™½ç„¶æµæ°´çº¿å¯„å­˜å™¨éå¸¸å¿«ï¼Œæ¯”å¦‚åªæœ‰ 20 çš®ç§’ï¼ˆpsï¼Œ10âˆ’12 ç§’ï¼‰ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ–­åŠ æ·±æµæ°´çº¿ï¼Œè¿™äº›æ“ä½œå æ•´ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´çš„æ¯”ä¾‹å°±ä¼šä¸æ–­å¢åŠ ã€‚æœ€åï¼Œæˆ‘ä»¬çš„æ€§èƒ½ç“¶é¢ˆå°±ä¼šå‡ºç°åœ¨è¿™äº› overhead ä¸Šã€‚å¦‚æœæˆ‘ä»¬æŒ‡ä»¤çš„æ‰§è¡Œæœ‰ 3 çº³ç§’ï¼Œä¹Ÿå°± æ˜¯ 3000 çš®ç§’ã€‚æˆ‘ä»¬éœ€è¦ 20 çº§çš„æµæ°´çº¿ï¼Œé‚£æµæ°´çº¿å¯„å­˜å™¨çš„å†™å…¥å°±éœ€è¦èŠ±è´¹ 400 çš®ç§’ï¼Œå äº†è¶…è¿‡ 10%ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦ 50 çº§æµæ°´çº¿ï¼Œå°±è¦å¤šèŠ±è´¹ 1 çº³ç§’åœ¨æµæ°´çº¿å¯„å­˜å™¨ä¸Šï¼Œå åˆ° 25%ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå•çº¯åœ°å¢åŠ æµæ°´çº¿çº§æ•°ï¼Œä¸ä»…ä¸èƒ½æå‡æ€§èƒ½ï¼Œåè€Œä¼šæœ‰æ›´å¤šçš„ overhead çš„å¼€é”€ã€‚æ‰€ä»¥ï¼Œè®¾è®¡åˆç†çš„æµæ°´çº¿çº§æ•°ä¹Ÿæ˜¯ç°ä»£ CPU ä¸­éå¸¸é‡è¦çš„ä¸€ç‚¹ã€‚ FPGA/ASIC/TPUFPGACPU æ˜¯ç”±ç®€å•çš„é—¨ç”µè·¯æ­ç§¯æœ¨ä¸€æ ·æ­å»ºå‡ºæ¥çš„ï¼Œé‚£ä¸€ä¸ª CPU é‡Œæœ‰å¤šå°‘ä¸ªæ™¶ä½“ç®¡è¿™æ ·çš„ç”µè·¯å¼€å…³å‘¢ï¼Ÿä¸€ä¸ªå››æ ¸ i7 çš„ Intel CPUï¼Œæœ‰ 20 äº¿ä¸ªæ™¶ä½“ç®¡ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ª CPUï¼Œå°±è¦æƒ³åŠæ³•è¿æ¥è¿™ 20 äº¿ä¸ªæ™¶ä½“ç®¡ã€‚ è¿æ¥ä¸€æ¬¡å·²ç»å¾ˆéš¾äº†ï¼Œæˆ‘ä»¬è¿˜è¦æ ¹æ®é—®é¢˜é‡æ–°è°ƒæ•´è¿æ¥ã€‚è®¾è®¡æ›´ç®€å•çš„ç‰¹å®šåŠŸèƒ½çš„èŠ¯ç‰‡ï¼Œå°‘è¯´è¦å‡ ä¸ªæœˆã€‚è€Œè®¾è®¡ä¸€ä¸ª CPU å¾€å¾€ä»¥å¹´è®¡ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¡¬ä»¶å·¥ç¨‹å¸ˆè¦è®¾è®¡ã€éªŒè¯å„ç§å„æ ·çš„æ–¹æ¡ˆï¼Œå¯èƒ½ä¼šé‡åˆ°å„ç§ BUGã€‚å¦‚æœæ¯éªŒè¯ä¸€ä¸ªæ–¹æ¡ˆéƒ½è¦ç”Ÿäº§ä¸€å—èŠ¯ç‰‡ï¼Œè¿™ä»£ä»·å¤ªé«˜äº†ã€‚ æˆ‘ä»¬æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œä¸ç”¨å•ç‹¬åˆ¶é€ ä¸€å—ä¸“é—¨çš„èŠ¯ç‰‡æ¥éªŒè¯ ç¡¬ä»¶è®¾è®¡å‘¢ï¼Ÿèƒ½ä¸èƒ½è®¾è®¡ä¸€ä¸ªç¡¬ä»¶ï¼Œé€šè¿‡ä¸åŒçš„ç¨‹åºä»£ç ï¼Œæ¥æ“ä½œè¿™ä¸ªç¡¬ä»¶ä¹‹å‰çš„ç”µè·¯è¿çº¿ï¼Œé€šè¿‡â€œç¼–ç¨‹â€è®©è¿™ä¸ªç¡¬ä»¶ å˜æˆæˆ‘ä»¬è®¾è®¡çš„ç”µè·¯è¿çº¿çš„èŠ¯ç‰‡å‘¢ï¼Ÿ è¿™ä¸ªï¼Œå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦è¯´çš„ FPGAï¼Œä¹Ÿå°±æ˜¯ç°åœºå¯ç¼–ç¨‹é—¨é˜µåˆ—ï¼ˆField-Programmable Gate Arrayï¼‰ã€‚ P ä»£è¡¨ Programmableï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡ç¼–ç¨‹æ¥æ§åˆ¶çš„ç¡¬ä»¶ã€‚ G ä»£è¡¨ Gateï¼Œå®ƒå°±ä»£è¡¨èŠ¯ç‰‡é‡Œé¢çš„é—¨ç”µè·¯ã€‚æˆ‘ä»¬èƒ½å¤Ÿå»è¿›è¡Œç¼–ç¨‹ç»„åˆçš„å°±æ˜¯è¿™æ ·ä¸€ä¸ªä¸€ä¸ªé—¨ç”µè·¯ã€‚ A ä»£è¡¨çš„ Arrayï¼Œå«ä½œé˜µåˆ—ï¼Œè¯´çš„æ˜¯åœ¨ä¸€å— FPGA ä¸Šï¼Œå¯†å¯†éº»éº»åˆ—äº†å¤§é‡ Gate è¿™æ ·çš„é—¨ç”µè·¯ã€‚ Fï¼Œä¸å¤ªå®¹æ˜“ç†è§£ã€‚å®ƒå…¶å®æ˜¯è¯´ï¼Œä¸€å— FPGA è¿™æ ·çš„æ¿å­ï¼Œå¯ä»¥è¿›è¡Œåœ¨â€œç°åœºâ€å¤šæ¬¡åœ°è¿›è¡Œç¼–ç¨‹ã€‚å®ƒä¸åƒ PALï¼ˆProgrammable Array Logicï¼Œå¯ç¼–ç¨‹é˜µåˆ—é€»è¾‘ï¼‰è¿™æ ·æ›´å¤è€çš„ç¡¬ä»¶è®¾å¤‡ï¼Œåªèƒ½â€œç¼–ç¨‹â€ä¸€æ¬¡ï¼ŒæŠŠé¢„å…ˆå†™å¥½çš„ç¨‹åºä¸€æ¬¡æ€§çƒ§å½•åˆ°ç¡¬ä»¶é‡Œé¢ï¼Œä¹‹åå°±ä¸èƒ½å†ä¿®æ”¹äº†ã€‚ æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼ŒCPU å…¶å®å°±æ˜¯é€šè¿‡æ™¶ä½“ç®¡ï¼Œæ¥å®ç°å„ ç§ç»„åˆé€»è¾‘æˆ–è€…æ—¶åºé€»è¾‘ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆå»â€œç¼–ç¨‹â€è¿æ¥è¿™äº›çº¿è·¯å‘¢ï¼Ÿ FPGA çš„è§£å†³æ–¹æ¡ˆåˆ†ä¸‰æ­¥ï¼š ç¬¬ä¸€ï¼Œç”¨å­˜å‚¨æ¢åŠŸèƒ½å®ç°ç»„åˆé€»è¾‘ã€‚åœ¨å®ç° CPU çš„åŠŸèƒ½çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆå„ç§å„æ ·çš„ç”µè·¯é€»è¾‘ã€‚åœ¨ FPGA é‡Œï¼Œè¿™ äº›åŸºæœ¬çš„ç”µè·¯é€»è¾‘ï¼Œä¸æ˜¯é‡‡ç”¨å¸ƒçº¿è¿æ¥çš„æ–¹å¼è¿›è¡Œçš„ï¼Œè€Œæ˜¯ é¢„å…ˆæ ¹æ®æˆ‘ä»¬åœ¨è½¯ä»¶é‡Œé¢è®¾è®¡çš„é€»è¾‘ç”µè·¯ï¼Œç®—å‡ºå¯¹åº”çš„çœŸå€¼è¡¨ï¼Œç„¶åç›´æ¥å­˜åˆ°ä¸€ä¸ªå«ä½œ LUTï¼ˆLook-Up Tableï¼ŒæŸ¥æ‰¾ è¡¨ï¼‰çš„ç”µè·¯é‡Œé¢ã€‚è¿™ä¸ª LUT å‘¢ï¼Œå…¶å®å°±æ˜¯ä¸€å—å­˜å‚¨ç©ºé—´ï¼Œé‡Œé¢å­˜å‚¨äº†â€œç‰¹å®šçš„è¾“å…¥ä¿¡å·ä¸‹ï¼Œå¯¹åº”è¾“å‡º 0 è¿˜æ˜¯ 1â€ã€‚ ç¬¬äºŒï¼Œå¯¹äºéœ€è¦å®ç°çš„æ—¶åºé€»è¾‘ç”µè·¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ FPGA é‡Œé¢ç›´æ¥æ”¾ä¸Š D è§¦å‘å™¨ï¼Œä½œä¸ºå¯„å­˜å™¨ã€‚è¿™ä¸ªå’Œ CPU é‡Œçš„è§¦å‘å™¨æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨ä¸åŒã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬ä¼šæŠŠå¾ˆå¤šä¸ª LUT çš„ç”µè·¯å’Œå¯„å­˜å™¨ç»„åˆåœ¨ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªå«ä½œé€»è¾‘ç°‡ï¼ˆLogic Clusterï¼‰çš„ä¸œè¥¿ã€‚åœ¨ FPGA é‡Œï¼Œè¿™æ ·ç»„åˆäº†å¤šä¸ª LUT å’Œå¯„ å­˜å™¨çš„è®¾å¤‡ï¼Œä¹Ÿè¢«å«åš CLB Configurable Logic Blockï¼Œå¯é…ç½®é€»è¾‘å—ï¼‰ã€‚ å¯ä»¥æŠŠ CLB æƒ³è±¡æˆå‡½æ•°æˆ–è€… APIï¼Œè®¾è®¡æ›´å¤æ‚çš„åŠŸèƒ½ï¼Œä¸ç”¨é‡æ–°é€ è½®å­ï¼Œåªéœ€è¦è°ƒç”¨å‡½æ•°æˆ–è€… API å³å¯ã€‚è®¾è®¡èŠ¯ç‰‡ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸ç”¨å†ä»é—¨ç”µè·¯å¼€å§‹æ­å»ºï¼Œå¯ä»¥é€šè¿‡ CLB ç»„åˆæ­å»ºã€‚ ç¬¬ä¸‰ï¼ŒFPGA æ˜¯é€šè¿‡å¯ç¼–ç¨‹é€»è¾‘å¸ƒçº¿ï¼Œæ¥è¿æ¥å„ä¸ªä¸åŒçš„ CLBï¼Œæœ€ç»ˆå®ç°æˆ‘ä»¬æƒ³è¦å®ç°çš„èŠ¯ç‰‡åŠŸèƒ½ã€‚è¿™ä¸ªå¯ç¼–ç¨‹é€»è¾‘å¸ƒçº¿ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“æˆæˆ‘ä»¬çš„é“è·¯ç½‘ã€‚æ•´ä¸ªé“è·¯ç³»ç»Ÿå·²ç»é“º å¥½äº†ï¼Œä½†æ˜¯æ•´ä¸ªé“è·¯ç½‘é‡Œé¢ï¼Œè®¾è®¡äº†å¾ˆå¤šä¸ªé“å²”ã€‚æˆ‘ä»¬å¯ä»¥ é€šè¿‡æ§åˆ¶é“å²”ï¼Œæ¥ç¡®å®šä¸åŒçš„åˆ—è½¦çº¿è·¯ã€‚åœ¨å¯ç¼–ç¨‹é€»è¾‘å¸ƒçº¿ é‡Œé¢ï¼Œâ€œç¼–ç¨‹â€åœ¨åšçš„ï¼Œå°±æ˜¯æ‹¨åŠ¨åƒé“å²”ä¸€æ ·çš„å„ä¸ªç”µè·¯å¼€ å…³ï¼Œæœ€ç»ˆå®ç°ä¸åŒ CLB ä¹‹é—´çš„è¿æ¥ï¼Œå®Œæˆæˆ‘ä»¬æƒ³è¦çš„èŠ¯ç‰‡åŠŸèƒ½ã€‚ ASICé™¤äº† CPUï¼ŒGPU ä»¥åŠ FPGAï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ°å¾ˆå¤šå…¶ä»–èŠ¯ç‰‡ï¼Œæ¯”å¦‚é™¤äº†éŸ³è§†é¢‘çš„èŠ¯ç‰‡ï¼Œæˆ–è€…ä¸“é—¨ç”¨æ¥æŒ–çŸ¿çš„èŠ¯ç‰‡ã€‚å°½ç®¡ CPU ä¹Ÿèƒ½å®ç°è¿™äº›åŠŸèƒ½ï¼Œä½†æ˜¯æœ‰ç‚¹å¤§ç‚®æ‰“èšŠå­çš„æ„Ÿè§‰ã€‚ äºæ˜¯é’ˆå¯¹ä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œå•ç‹¬è®¾è®¡ä¸€ä¸ªèŠ¯ç‰‡ï¼Œæˆ‘ä»¬ç§°è¿™äº›èŠ¯ç‰‡ä¸º ASICï¼ˆApplication-Specific Integrated Circuitï¼‰ï¼Œä¸“ç”¨é›†æˆç”µè·¯ã€‚è®¾è®¡ç²¾ç®€ï¼Œåˆ¶é€ æˆæœ¬ä½ã€‚ å…¶å®æˆ‘ä»¬çš„ FPGA ä¹Ÿèƒ½åš ASIC çš„äº‹æƒ…ï¼Œæ¯æ¬¡å¯¹ FPGA è¿›è¡Œç¼–ç¨‹ï¼Œå°±æ˜¯æŠŠ FPGA ç”µè·¯ç¼–ç¨‹äº†ä¸€ä¸ª ASICã€‚ä½†æ˜¯å¦‚æœå…¨ç”¨ FPGAï¼ŒåŒæ ·ä¼šæµªè´¹ã€‚å› ä¸ºæ¯ä¸€ä¸ª LUT ç”µè·¯ï¼Œéƒ½å¯ä»¥å®ç°ä¸é—¨ä»¥åŠæˆ–é—¨ï¼Œè¿™æ¯”å•çº¯è¿æ­»çš„ä¸é—¨æˆ–è€…æˆ–é—¨ï¼Œç”¨åˆ°çš„æ™¶ä½“ç®¡æ•°é‡è¦å¤šçš„å¤šã€‚è‡ªç„¶åŠŸè€—ä¹Ÿè¦å¤§å¾—å¤šï¼Œå•ç‰‡ FPGA çš„ç”Ÿäº§åˆ¶é€ æˆæœ¬ä¹Ÿæ¯” ASIC è¦é«˜ã€‚ FPAG ASIC ä¸€æ¬¡æ€§æˆæœ¬ æä½ï¼Œçº¦ç­‰äº 0 é«˜ é‡äº§æˆæœ¬ é«˜ ä½ å»¶è¿Ÿ ä½ ä½ å¼€å‘å‘¨æœŸ çŸ­ é•¿ å¸‚åœºé£é™© ä½ é«˜ å¼€å‘ç¯å¢ƒ è®¾ç½® FPGA éœ€è¦ç¡¬ä»¶çŸ¥è¯†ï¼Œç¼–ç¨‹å’Œé…ç½®é—¨æ§›å¾ˆé«˜ éœ€è¦åº•å±‚ç¡¬ä»¶å˜æˆï¼Œå¼€å‘éš¾åº¦å¾ˆé«˜ TPUTPUï¼ˆTensor Processing Unitï¼‰å¼ é‡å¤„ç†å™¨ï¼›","categories":[{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"}],"tags":[{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"}]},{"title":"æ›¿æ¢ Gitee å›¾åºŠä¸ºè…¾è®¯äº‘ COS","slug":"æ›¿æ¢Giteeå›¾åºŠä¸ºè…¾è®¯äº‘COS","date":"2022-04-09T08:43:08.000Z","updated":"2022-10-15T03:14:29.704Z","comments":true,"path":"2022/04/09/æ›¿æ¢Giteeå›¾åºŠä¸ºè…¾è®¯äº‘COS/","link":"","permalink":"http://example.com/2022/04/09/%E6%9B%BF%E6%8D%A2Gitee%E5%9B%BE%E5%BA%8A%E4%B8%BA%E8%85%BE%E8%AE%AF%E4%BA%91COS/","excerpt":"","text":"Gitee å›¾åºŠæŒ‚äº†ï¼Œä½†æ˜¯å„å¤§äº‘æœåŠ¡å‚å•†æä¾›çš„å¯¹è±¡å­˜å‚¨æœåŠ¡å…è´¹é¢åº¦ï¼Œå¯¹äºä¸ªäººå°åšå®¢æ¥è¯´ä¹Ÿå¤Ÿç”¨äº†ã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•å°†å›¾åºŠæ›´æ¢ä¸ºè…¾è®¯äº‘ COSã€‚ ä¸‹è½½åŸæœ‰å›¾ç‰‡ä»giteeä¸‹è½½æ•´ä¸ªä»“åº“ã€‚ä¿æŒåŸæœ‰ç›®å½•ç»“æ„ã€‚ é…ç½®è…¾è®¯äº‘ COSæ³¨å†Œè…¾è®¯äº‘è´¦å·ï¼Œåˆ›å»º COS å­˜å‚¨æ¡¶ï¼Œé€‰æ‹©å…¬æœ‰è¯»ç§æœ‰å†™ã€‚åˆ›å»º COS å­˜å‚¨æ¡¶åœ°å€ï¼šhttps://console.cloud.tencent.com/cosï¼Œåˆ›å»ºå­˜å‚¨æ¡¶åå¯ä»¥åœ¨å­˜å‚¨æ¡¶é‡Œæ‰“å¼€é˜²ç›—é“¾è®¾ç½®ã€‚ åˆ›å»ºæ¡¶â€“é€‰æ‹©åœ°åŸŸâ€“å¡«å†™åç§°â€“é€‰æ‹©å…¬æœ‰è¯»ç§æœ‰å†™â€“ç‚¹å‡»åˆ›å»ºã€‚ å¦‚æœå¿˜äº†è®¾ç½®è¯»å†™æƒé™å¯ä»¥æŒ‰ä¸€ä¸‹æ–¹æ³•è®¾ç½®ï¼› é€‰æ‹©èœå•â€“æ–‡ä»¶åˆ—è¡¨ã€‚ä¸Šä¼ ä¸‹è½½å¥½çš„æ–‡ä»¶å¤¹ï¼ˆæ•´ä¸ªä»“åº“çš„æ–‡ä»¶å¤¹ï¼‰ã€‚é¼ æ ‡æ”¾åˆ°é€‰æ‹©æ–‡ä»¶å‡ºç°ä¸Šä¼ æ–‡ä»¶å¤¹é€‰é¡¹ï¼Œæˆ–è€…å°†æ–‡ä»¶å¤¹æ‹–å…¥æµè§ˆå™¨ã€‚ é…ç½® Picgo COS ç‰ˆæœ¬ï¼šV5è®¾å®š Secreidï¼Œè®¾å®š Secrekeyï¼Œè®¾å®š APPIDï¼š APPIDã€SecretID ä¸ SecretKey ç‚¹æ­¤ç›´è¾¾è·å–ã€‚é€‰æ‹©ç»§ç»­ä½¿ç”¨â€“åˆ›å»ºç§˜é’¥ã€‚ è®¾å®šå­˜å‚¨ç©ºé—´åï¼Œè®¾å®šå­˜å‚¨åŒºåŸŸï¼š ç‚¹æ­¤è·å–å­˜å‚¨ç©ºé—´åä»¥åŠå­˜å‚¨åŒºåŸŸã€‚æ¡¶åç§°å³å­˜å‚¨ç©ºé—´åï¼Œæ‰€å±åŒºåŸŸï¼šap-shanghaiå³ç¡®è®¤å­˜å‚¨åŒºåŸŸã€‚ æŒ‡å®šå­˜å‚¨åŒºåŸŸï¼šæŒ‡å®šä¸Šä¼ åˆ° COS çš„ç›®å½•ï¼Œæ¯”å¦‚æˆ‘åŸå…ˆä»giteeä¸‹è½½æ¥çš„å›¾åºŠçš„ä»“åº“åæ˜¯markdown_picbedï¼Œå›¾ç‰‡åˆä¿å­˜åœ¨markdown_picbed/imgç›®å½•ä¸‹ï¼Œé‚£ä¹ˆå°±æŒ‡å®šmarkdown_picbed/imgç›®å½•ã€‚ æ›¿æ¢æ—§å›¾åºŠ URLVSCode å…¨å±€æ›¿æ¢ï¼š","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"Markdown","slug":"Markdown","permalink":"http://example.com/tags/Markdown/"},{"name":"å›¾åºŠ","slug":"å›¾åºŠ","permalink":"http://example.com/tags/%E5%9B%BE%E5%BA%8A/"},{"name":"è…¾è®¯äº‘","slug":"è…¾è®¯äº‘","permalink":"http://example.com/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/"}]},{"title":"ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ç¬”è®°","slug":"ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»è¯»ä¹¦ç¬”è®°","date":"2022-03-30T03:12:31.000Z","updated":"2022-04-30T03:12:31.000Z","comments":true,"path":"2022/03/30/ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»è¯»ä¹¦ç¬”è®°/","link":"","permalink":"http://example.com/2022/03/30/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","excerpt":"","text":"é™æ€é“¾æ¥åº“æ˜¯ä¸€ç»„ç›®æ ‡æ–‡ä»¶çš„åŒ…ï¼Œå°±æ˜¯ä¸€äº›å¸¸ç”¨çš„ä»£ç ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶åæ‰“åŒ…å­˜æ”¾ã€‚ ç¬¬ä¸‰ç«  ç›®æ ‡æ–‡ä»¶é‡Œæœ‰ä»€ä¹ˆç›®æ ‡æ–‡ä»¶çš„æ ¼å¼ç›®æ ‡æ–‡ä»¶ä»ç»“æ„ä¸Šè®²ï¼Œå®ƒæ˜¯å·²ç»ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œåªæ˜¯è¿˜æ²¡æœ‰ç»è¿‡é“¾æ¥çš„è¿‡ç¨‹ï¼Œå…¶ä¸­å¯èƒ½æœ‰äº›ç¬¦å·æˆ–è€…æœ‰äº›åœ°å€è¿˜æ²¡æœ‰è¢«è°ƒæ•´ã€‚ ç°åœ¨ PC å¹³å°æµå½¢çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œä¸»è¦æ˜¯ Windows ä¸‹çš„ PEï¼ˆPortable Executableï¼‰å’Œ Linux ä¸‹çš„ ELFï¼ˆExecutable Linkable Formatï¼‰,å®ƒä»¬éƒ½æ˜¯ COFFï¼ˆCommon file formatï¼‰æ ¼å¼çš„å˜ç§ã€‚ æŒ‡ä»¤å’Œæ•°æ®åˆ†å¼€å­˜æ”¾çš„å¥½å¤„ï¼š ä¸€æ–¹é¢å½“ç¨‹åºè¢«è£…è½½åï¼Œæ•°æ®å’ŒæŒ‡ä»¤åˆ†åˆ«è¢«æ˜ å°„åˆ°ä¸¤ä¸ªè™šå­˜åŒºåŸŸã€‚ç”±äºæ•°æ®åŒºåŸŸå¯¹äºè¿›ç¨‹æ¥è¯´æ˜¯å¯è¯»å†™çš„ï¼Œè€ŒæŒ‡ä»¤åŒºåŸŸå¯¹äºè¿›ç¨‹æ¥è¯´æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªè™šå­˜åŒºåŸŸçš„æƒé™å¯ä»¥è¢«è®¾ç½®æˆå¯è¯»å†™å’Œåªè¯»ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢ç¨‹åºçš„æŒ‡ä»¤è¢«æœ‰æ„æˆ–æ— æ„åœ°æ”¹å†™ã€‚ å¦ä¸€æ–¹é¢æ˜¯ç°ä»£ CPU æœ‰å¼ºå¤§çš„ç¼“å­˜ä½“ç³»ï¼Œç”±äºç¼“å­˜å¾ˆé‡è¦ï¼Œæ‰€ä»¥ç¨‹åºå¿…é¡»å°½é‡æé«˜ç¼“å­˜å‘½ä¸­ç‡ã€‚æŒ‡ä»¤åŒºå’Œæ•°æ®åŒºåˆ†ç¦»æœ‰åˆ©äºæé«˜ç¨‹åºçš„å±€éƒ¨æ€§ã€‚ç°ä»£ CPU çš„ç¼“å­˜ä¸€èˆ¬éƒ½è¢«è®¾è®¡æˆæ•°æ®ç¼“å­˜å’ŒæŒ‡ä»¤ç¼“å­˜ï¼Œæ‰€ä»¥ç¨‹åºçš„æŒ‡ä»¤å’Œæ•°æ®åˆ†å¼€å­˜æ”¾å¯¹äº CPU çš„ç¼“å­˜å‘½ä¸­ç‡æé«˜æœ‰å¥½å¤„ã€‚ ç¬¬ä¸‰ä¸ªåŸå› ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„åŸå› ï¼Œå°±æ˜¯å½“ç³»ç»Ÿä¸­è¿è¡Œç€å¤šä¸ªè¯¥è¿›ç¨‹å‰¯æœ¬æ—¶ï¼Œä»–ä»¬çš„æŒ‡ä»¤éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å†…å­˜ä¸­åªéœ€è¦ä¿å­˜ä¸€ä»½ç¨‹åºçš„æŒ‡ä»¤éƒ¨åˆ†ã€‚ çœŸæ­£äº†ç‰›é€¼çš„ç¨‹åºå‘˜å¯¹è‡ªå·±çš„ç¨‹åºæ¯ä¸€ä¸ªå­—èŠ‚éƒ½äº†å¦‚æŒ‡æŒã€‚ 123objdump -h SimpleSsection.o # æ‰“å°elfæ–‡ä»¶å„ä¸ªæ®µçš„ä¿¡æ¯size SimpleSsection.o # æŸ¥çœ‹elfæ–‡ä»¶å„ä¸ªæ®µçš„é•¿åº¦objdump -s -d SimpleSsection.o # -så°†æ‰€æœ‰æ®µå†…å®¹ä»¥åå…­è¿›åˆ¶æ‰“å°ï¼Œ-då°†æ‰€æœ‰åŒ…å«æŒ‡ä»¤çš„æ®µåæ±‡ç¼– æ®µåç§° å†…å®¹ .data - åˆå§‹åŒ–çš„å…¨å±€å˜é‡ - å±€éƒ¨é™æ€å˜é‡ .rodata åªè¯»æ•°æ®æ®µï¼Œå¯¹è¿™ä¸ªæ®µçš„ä»»ä½•ä¿®æ”¹éƒ½æ˜¯éæ³•çš„ï¼Œä¿è¯äº†ç¨‹åºçš„å®‰å…¨æ€§ã€‚ æœ‰æ—¶å€™ç¼–è¯‘å™¨ä¼šæŠŠå­—ç¬¦ä¸²æ”¾åˆ° data æ®µ - åªè¯»å˜é‡ const ä¿®é¥° - å­—ç¬¦ä¸²å¸¸é‡ .bss ä¸å ç£ç›˜ç©ºé—´ï¼Œ - æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ - æœªåˆå§‹åŒ–çš„å±€éƒ¨é™æ€å˜é‡ - åˆå§‹åŒ–ä¸º 0 çš„é™æ€å˜é‡ .comment å­˜æ”¾ç¼–è¯‘å™¨ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²â€œGCCï¼šï¼ˆGNUï¼‰4.2.0â€ .line è°ƒè¯•æ—¶çš„è¡Œå·è¡¨ï¼Œå³æºä»£ç è¡Œå·ä¸ç¼–è¯‘åæŒ‡ä»¤çš„å¯¹åº”è¡¨ .note é¢å¤–çš„ç¼–è¯‘å™¨ä¿¡æ¯ï¼Œå¦‚ç¨‹åºå…¬å¸åï¼Œç‰ˆæœ¬å· .symtab Symbol Table ç¬¦å·è¡¨ .plt åŠ¨æ€é“¾æ¥çš„è·³è½¬è¡¨ .got åŠ¨æ€é“¾æ¥çš„å…¨å±€å…¥å£è¡¨ æ®µåç§°éƒ½æ˜¯.å‰ç¼€ï¼Œè¡¨ç¤ºè¿™äº›è¡¨åå­—æ˜¯ç³»ç»Ÿä¿ç•™çš„ï¼Œåº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›éç³»ç»Ÿä¿ç•™çš„åå­—ä½œä¸ºæ®µåç§°ã€‚æ¯”å¦‚å¯ä»¥åŠ å…¥ä¸€ä¸ªmusicæ®µï¼Œé‡Œé¢å­˜ä¸€é¦– mp3 éŸ³ä¹ï¼Œè¿è¡Œèµ·æ¥åå°±ä¼šæ’­æ”¾éŸ³ä¹ï¼Œæ‰“ç®—è‡ªå®šä¹‰æ®µä¸èƒ½ä½¿ç”¨.ä½œä¸ºå‰ç¼€ï¼Œä»¥å…ä¸ç³»ç»Ÿä¿ç•™æ®µåå†²çªã€‚ Q: å¦‚ä½•å°†ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ï¼ŒMP3 æ–‡ä»¶ä½œä¸ºç›®æ ‡æ–‡ä»¶çš„ä¸€ä¸ªæ®µï¼ŸA: å¯ä»¥ä½¿ç”¨ objcopy å·¥å…·ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªå›¾ç‰‡ image..jpgï¼Œå¤§å°ä¸º 0x2100 å­—èŠ‚ï¼š$ objcopy -I binary -O elf32-i388 -B i38 image.jpg image.o æ­£å¸¸æƒ…å†µä¸‹ç¼–è¯‘å‡ºæ¥çš„ç›®æ ‡æ–‡ä»¶ï¼Œä»£ç ä¼šæ”¾åˆ°.textæ®µï¼Œä½†æ˜¯æœ‰æ—¶å€™ä½ å¸Œæœ›å˜é‡æˆ–è€…æŸäº›ä»£ç èƒ½æ”¾åˆ°ä½ æŒ‡å®šçš„æ®µä¸­å»ï¼Œä»¥å®ç°æŸäº›ç‰¹å®šçš„åŠŸèƒ½ã€‚æ¯”å¦‚ä¸ºäº†æ»¡è¶³æŸäº›ç¡¬ä»¶çš„å†…å­˜å’Œ IO åœ°å€å¸ƒå±€ã€‚GCC æä¾›äº†æ‰©å±•æœºåˆ¶ï¼Œä½¿å¾—ç¨‹åºå‘˜å¯ä»¥æŒ‡å®šå˜é‡æ‰€å¤„çš„æ®µï¼š 12__attribute__((section(&quot;FOO&quot;))) int global = 42;__attribute__((section(&quot;BAR&quot;))) void foo; ELF æ–‡ä»¶ç»“æ„ä½¿ç”¨readelfå‘½ä»¤æŸ¥çœ‹ elf æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ã€‚ ELF é­”æ•°ï¼Œç¡®è®¤æ–‡ä»¶ç±»å‹ã€‚ æ–‡ä»¶ç±»å‹ å¸¸é‡ å€¼ å«ä¹‰ ET_REL 1 å¯é‡å®šä½æ–‡ä»¶ï¼Œä¸€èˆ¬é—®.oæ–‡ä»¶ ET_EXEC 2 å¯æ‰§è¡Œæ–‡ä»¶ ET_DYN 3 å…±äº«ç›®æ ‡æ–‡ä»¶ï¼Œä¸€èˆ¬ä¸º.soæ–‡ä»¶ æœºå™¨ç±»å‹ å¸¸é‡ å€¼ å«ä¹‰ EM_M32 1 AT&amp;T WE 32100 EM_SPARC 2 SPARC EM_M386 3 Intel x86 EM_68K 4 Motorola 68000 EM_88K 5 Motorola 88000 EM_860 6 Intel 80860 æ®µè¡¨æ˜¯ä¿å­˜å„ä¸ªæ®µçš„åŸºæœ¬å±æ€§çš„ç»“æ„ã€‚æ®µè¡¨æ˜¯é™¤æ–‡ä»¶å¤´å¤–æœ€é‡è¦çš„ç»“æ„ã€‚ç¼–è¯‘å™¨ï¼Œé“¾æ¥å™¨å’Œè£…è½½å™¨éƒ½æ˜¯ä¾é æ®µè¡¨æ¥å®šä½å’Œè®¿é—®å„ä¸ªæ®µçš„å±æ€§ã€‚ é“¾æ¥çš„æ¥å£ - ç¬¦å·ç¬¦å·è¡¨ç»“æ„é“¾æ¥è¿‡ç¨‹çš„æœ¬è´¨å°±æ˜¯è¦æŠŠå¤šä¸ªä¸åŒçš„ç›®æ ‡æ–‡ä»¶ä¹‹é—´ç›¸äº’ç²˜åˆ°ä¸€èµ·ã€‚ ç›®æ ‡æ–‡ä»¶ B è¦ç”¨åˆ°ç›®æ ‡æ–‡ä»¶ A çš„å‡½æ•°fooï¼Œæˆ‘ä»¬ç§°ç›®æ ‡æ–‡ä»¶ Aå®šä¹‰äº†å‡½æ•°fooï¼Œç›®æ ‡æ–‡ä»¶ Bå¼•ç”¨äº†ç›®æ ‡æ–‡ä»¶ A çš„å‡½æ•°fooã€‚ é“¾æ¥ä¸­ï¼Œæˆ‘ä»¬å°†å‡½æ•°å’Œå˜é‡ç»Ÿç§°ä¸ºç¬¦å·ï¼Œå‡½æ•°åæˆ–å˜é‡åå°±æ˜¯ç¬¦å·åã€‚ã€ æ¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªç›¸åº”çš„ç¬¦å·è¡¨ï¼Œè¡¨é‡Œè®°å½•äº†ç›®æ ‡æ–‡ä»¶ä¸­æ‰€ç”¨åˆ°çš„æ‰€æœ‰ç¬¦å·ã€‚æ¯ä¸ªç¬¦å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”å€¼ï¼Œå«ç¬¦å·å€¼ï¼Œå¯¹äºå˜é‡å’Œå‡½æ•°æ¥è¯´ï¼Œç¬¦å·å€¼å°±æ˜¯ä»–ä»¬çš„åœ°å€ã€‚ ç¬¦å·ç±»å‹ï¼š å®šä¹‰åœ¨æœ¬ç›®æ ‡æ–‡ä»¶çš„å…¨å±€ç¬¦å·ï¼Œå¯ä»¥è¢«å…¶ä»–ç›®æ ‡å¼•ç”¨ã€‚ åœ¨æœ¬ç›®æ ‡æ–‡ä»¶ä¸­åº”ç”¨çš„å…¨å±€ç¬¦å·ï¼Œå´æ²¡æœ‰å®šä¹‰åœ¨æœ¬ç›®æ ‡æ–‡ä»¶ã€‚ æ®µåç§°ï¼Œä¹Ÿå°±æ˜¯æ®µèµ·å§‹åœ°å€ã€‚ å±€éƒ¨ç¬¦å·ï¼Œä¸€äº›é™æ€å˜é‡ç­‰ã€‚ è¡Œå·ä¿¡æ¯ã€‚ æœ€é‡è¦çš„å°±æ˜¯ç¬¬ä¸€ç±»å’Œç¬¬äºŒç±»ã€‚é“¾æ¥åªå…³å¿ƒå…¨å±€ç¬¦å·çš„ç›¸äº’ç²˜åˆï¼Œå…¶ä»–éƒ½æ˜¯æ¬¡è¦çš„ã€‚ å¯ä»¥ä½¿ç”¨ readelf objdump nmç­‰å‘½ä»¤æŸ¥çœ‹ç¬¦å·ä¿¡æ¯ã€‚ ç‰¹æ®Šç¬¦å·ä¸€äº›ç‰¹æ®Šç¬¦å·ï¼Œæ²¡æœ‰åœ¨ç¨‹åºä¸­å®šä¹‰ï¼Œä½†æ˜¯å¯ä»¥ç›´æ¥å£°æ˜å¹¶å¼•ç”¨å®ƒï¼š __executable_startï¼Œç¨‹åºèµ·å§‹åœ°å€ï¼Œä¸æ˜¯å…¥å£åœ°å€ï¼Œæ˜¯ç¨‹åºæœ€å¼€å§‹çš„åœ°å€ã€‚ __etext __etext etext ä»£ç æ®µç»“æŸåœ°å€ï¼Œä»£ç æ®µæœ€æœ«å°¾çš„åœ°å€ã€‚ _edata edata æ•°æ®æ®µç»“æŸåœ°å€ï¼Œæ•°æ®æ®µæœ€æœ«å°¾åœ°å€ã€‚ __end end ç¨‹åºç»“æŸåœ°å€ã€‚ ç¬¦å·ä¿®é¥°ç¬¦å·åº”ä¸å¯¹åº”çš„å‡½æ•°æˆ–è€…å˜é‡åŒåï¼Œä½†æ˜¯åœ¨ C è¯­è¨€å‘æ˜æ—¶ï¼Œå·²ç»å­˜åœ¨äº†å¾ˆå¤šåº“å’Œç›®æ ‡æ–‡ä»¶ï¼Œå¦‚æœå†ç”¨ä¸€æ ·çš„å‡½æ•°æˆ–å˜é‡å°±ä¼šå†²çªä¸ºäº†é¿å…å†²çªï¼ŒC è¯­è¨€ç¼–è¯‘åç¬¦å·åå‰ä¼šåŠ ä¸Šä¸‹åˆ’çº¿_ï¼Œå¦‚fooå˜æˆ_fooï¼ŒFortran è¯­è¨€ç¼–è¯‘åä¼šåœ¨ç¬¦å·å‰ååŠ ä¸Šä¸‹åˆ’çº¿_foo_ã€‚ C++å…·æœ‰ç±»ï¼Œç»§æ‰¿ï¼Œé‡è½½ç­‰å¤æ‚æœºåˆ¶ï¼Œä¸ºäº†æ”¯æŒè¿™äº›å¤æ‚ç‰¹æ€§ï¼Œäººä»¬å‘æ˜äº†ç¬¦å·ä¿®é¥°å’Œç¬¦å·æ”¹ç¼–ã€‚ å‡½æ•°ç­¾ååŒ…å«äº†ä¸€ä¸ªå‡½æ•°çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‡½æ•°åï¼Œå‚æ•°ç±»å‹ï¼Œæ‰€åœ¨ç±»å’Œåç§°ç©ºé—´ç­‰ä¿¡æ¯ã€‚å®ƒç”¨äºè¯†åˆ«ä¸åŒçš„å‡½æ•°ã€‚åœ¨ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨å¤„ç†ç¬¦å·æ—¶ï¼Œä½¿ç”¨æŸç§åç§°ä¿®é¥°çš„æ–¹æ³•ï¼Œæ˜¯çš„æ¯ä¸ªå‡½æ•°ç­¾åå¯¹åº”ä¸€ä¸ªä¿®é¥°ååç§°ã€‚ ç”±äºä¸åŒçš„ç¼–è¯‘å™¨é‡‡ç”¨ä¸åŒçš„åå­—ä¿®é¥°æ–¹å¼ï¼Œå¿…ç„¶å¯¼è‡´ç”±ä¸åŒç¼–è¯‘å™¨ç¼–è¯‘äº§ç”Ÿçš„ç›®æ ‡æ–‡ä»¶æ— æ³•æ­£å¸¸äº’ç›¸é“¾æ¥ï¼Œè¿™æ˜¯å¯¼è‡´ä¸åŒç¼–è¯‘å™¨ä¹‹é—´ä¸èƒ½äº’æ“ä½œçš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚ extern CC++ä¸ºäº†å…¼å®¹ Cï¼ŒC++ç¼–è¯‘å™¨ä¼šå°†åœ¨extern C çš„å¤§æ‹¬å·å†…éƒ¨çš„ä»£ç å½“åš C è¯­è¨€ä»£ç å¤„ç†ï¼Œè¿™æ ·å°±ä¸ä¼šä½¿ç”¨ C++çš„åç§°ä¿®é¥°æœºåˆ¶ã€‚ï¼ˆä¹Ÿå°±ä¸ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Šä¸‹åˆ’çº¿ï¼‰ ä½†æ˜¯ C è¯­è¨€å¹¶ä¸æ”¯æŒextern Cå…³é”®å­—ï¼Œåˆä¸èƒ½ä¸ºåŒä¸€ä¸ªåº“å‡½æ•°å†™ä¸¤å¥—å¤´æ–‡ä»¶ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨ C++çš„å®ï¼Œ__cplusplusã€‚C++ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘ C++çš„ç¨‹åºæ—¶é»˜è®¤å®šä¹‰è¿™ä¸ªå®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¡ä»¶å®æ¥åˆ¤æ–­å½“å‰ç¼–è¯‘å•å…ƒæ˜¯ä¸æ˜¯ C++ä»£ç ã€‚ 123456789#ifdef __cplusplusextern &quot;C&quot; &#123;#endifvoid *memset(void *, int , size_t);#ifdef __cplusplus&#125;#endif å¼±ç¬¦å·ä¸å¼ºç¬¦å·æˆ‘ä»¬ç»å¸¸ç¢°åˆ°ç¬¦å·é‡å®šä¹‰ï¼Œå¤šä¸ªç›®æ ‡æ–‡ä»¶ä¸­å«æœ‰ç›¸åŒåå­—å…¨å±€ç¬¦å·çš„å®šä¹‰ï¼Œé‚£ä¹ˆè¿™äº›ç›®æ ‡æ–‡ä»¶é“¾æ¥çš„æ—¶å€™å°±ä¼šå‡ºç°ç¬¦å·é‡å®šä¹‰çš„é”™è¯¯ã€‚æ¯”å¦‚åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­å®šä¹‰äº†ç›¸åŒçš„å…¨å±€å˜é‡ã€‚ å¯¹äºC/C++æ¥è¯´ï¼Œç¼–è¯‘å™¨é»˜è®¤å‡½æ•°å’Œåˆå§‹åŒ–äº†çš„å…¨å±€å˜é‡ä¸ºå¼ºç¬¦å·ï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¸ºå¼±ç¬¦å·ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨ GCC çš„__attribute__((weak))æ¥å®šä¹‰ä»»ä½•ä¸€ä¸ªå¼ºç¬¦å·ä¸ºå¼±ç¬¦å·ã€‚ ä¸å…è®¸å¼ºç¬¦å·è¢«å¤šæ¬¡å®šä¹‰ï¼Œå¦‚æœå¤šæ¬¡å®šä¹‰ï¼Œåˆ™é“¾æ¥å™¨æŠ¥é‡å¤å®šä¹‰é”™è¯¯ï¼› å¦‚æœä¸€ä¸ªç¬¦å·åœ¨æŸæ–‡ä»¶ä¸­æ˜¯å¼ºç¬¦å·ï¼Œåœ¨å…¶ä»–æ–‡ä»¶ä¸­éƒ½æ˜¯å¼±ç¬¦å·ï¼Œé‚£ä¹ˆé€‰æ‹©å¼ºç¬¦å·ã€‚ å¦‚æœä¸€ä¸ªç¬¦å·åœ¨æ‰€æœ‰ç›®æ ‡æ–‡ä»¶ä¸­éƒ½æ˜¯å¼±ç¬¦å·ï¼Œé‚£ä¹ˆé€‰æ‹©å…¶ä¸­å ç”¨ç©ºé—´æœ€å¤§çš„ä¸€ä¸ªã€‚ ç¬¬å››ç«  é™æ€é“¾æ¥ç©ºé—´åœ°å€åˆ†é…å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ä»£ç æ®µå’Œæ•°æ®æ®µå°±æ˜¯å¤šä¸ªæ–‡ä»¶åˆå¹¶è€Œæ¥çš„ï¼Œå¯¹äºå¤šä¸ªæ–‡ä»¶é“¾æ¥å™¨å¦‚ä½•å°†å®ƒä»¬åˆå¹¶åˆ°è¾“å‡ºæ–‡ä»¶ï¼Ÿ æŒ‰åºå åŠ ï¼šæœ€ç®€å•çš„æ–¹å¼ï¼ŒæŒ‰ç…§è¾“å…¥æ–‡ä»¶é¡ºåºä¾æ¬¡åˆå¹¶ã€‚è¿™ä¼šå¯¼è‡´å¤§é‡ç¢ç‰‡ï¼Œæ¯”å¦‚ x86 çš„ç¡¬ä»¶ï¼Œæ®µçš„è£…è½½åœ°å€å’Œç©ºé—´çš„å¯¹é½å•ä½æ˜¯é¡µï¼Œä¹Ÿå°±æ˜¯ 4096 å­—èŠ‚ï¼Œé‚£ä¹ˆå¦‚æœä¸€ä¸ªæ®µçš„é•¿åº¦åªæœ‰ 1 å­—èŠ‚ï¼Œå®ƒåœ¨å†…å­˜é‡Œä¹Ÿè¦å ç”¨ 4096 å­—èŠ‚ã€‚ ç›¸ä¼¼æ®µåˆå¹¶ï¼šå°†æ‰€æœ‰ç›¸åŒæ€§è´¨çš„æ®µåˆå¹¶åœ¨ä¸€èµ·ã€‚ ç°åœ¨çš„é“¾æ¥å™¨åŸºæœ¬ä¸Šé‡‡ç”¨ç¬¬äºŒç§ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•çš„é“¾æ¥å™¨éƒ½é‡‡ç”¨ä¸€ç§å«ä¸¤æ­¥é“¾æ¥çš„æ–¹æ³•ã€‚ ç¬¬ä¸€æ­¥ï¼Œç©ºé—´ä¸åœ°å€åˆ†é…ã€‚æ‰«ææ‰€æœ‰çš„è¾“å…¥ç›®æ ‡æ–‡ä»¶ï¼Œå¹¶ä¸”è·å¾—å„ä¸ªæ®µçš„é•¿åº¦ï¼Œå±æ€§å’Œä½ç½®ï¼Œå¹¶å°†è¾“å…¥ç›®æ ‡æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨æ‰€æœ‰çš„ç¬¦å·å®šä¹‰å’Œç¬¦å·å¼•ç”¨æ”¶é›†èµ·æ¥ï¼Œç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªå…¨å±€ç¬¦å·è¡¨ã€‚è¿™ä¸€æ­¥ï¼Œé“¾æ¥å™¨å°†èƒ½å¤Ÿè·å¾—æ‰€æœ‰è¾“å…¥ç›®æ ‡æ–‡ä»¶çš„æ®µé•¿åº¦ï¼Œå¹¶ä¸”å°†ä»–ä»¬åˆå¹¶ï¼Œè®¡ç®—å‡ºè¾“å‡ºæ–‡ä»¶ä¸­å„ä¸ªæ®µåˆå¹¶åçš„é•¿åº¦å’Œä½ç½®ï¼Œå¹¶å»ºç«‹æ˜ å°„å…³ç³»ã€‚ ç¬¬äºŒéƒ¨ï¼Œç¬¦å·è§£æä¸é‡å®šä½ã€‚ä½¿ç”¨ä¸Šé¢æ”¶é›†åˆ°çš„ä¿¡æ¯ï¼Œè¯»å–è¾“å…¥æ–‡ä»¶ä¸­æ®µçš„æ•°æ®ï¼Œé‡å®šä½ä¿¡æ¯ã€‚å¹¶ä¸”è¿›è¡Œç¬¦å·è§£æä¸é‡å®šä½ï¼Œè°ƒæ•´ä»£ç ä¸­çš„åœ°å€ã€‚ VMAï¼ˆVirtual Memory Addressï¼‰è™šæ‹Ÿåœ°å€ï¼ŒLMAï¼ˆLoad Memory Addressï¼‰åŠ è½½åœ°å€ã€‚æ­£å¸¸æƒ…å†µè¿™ä¸¤ä¸ªå€¼æ˜¯ä¸€æ ·çš„ã€‚ é“¾æ¥ä¹‹å‰ç›®æ ‡æ–‡ä»¶çš„æ‰€æœ‰çŸ­ VMA éƒ½æ˜¯ 0ï¼Œå› ä¸ºè™šæ‹Ÿç©ºé—´è¿˜æ²¡æœ‰è¢«åˆ†é…ï¼Œé»˜è®¤ä¸º 0ï¼Œé“¾æ¥ä¹‹åå„ä¸ªæ®µå°±ä¼šè¢«åˆ†é…ç›¸åº”çš„è™šæ‹Ÿåœ°å€ã€‚ Linux ä¸‹ï¼ŒELF å¯æ‰§è¡Œæ–‡ä»¶é»˜è®¤ä»åœ°å€0x8048000å¼€å§‹åˆ†é…ã€‚ ç¬¦å·è§£æä¸é‡å®šä½1objdump -d æŸ¥çœ‹ä»£ç æ®µåæ±‡ç¼–ç»“æœ æºä»£ç åœ¨ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶æ—¶å¹¶ä¸çŸ¥é“å‡½æ•°çš„è°ƒç”¨åœ°å€ã€‚éœ€è¦é€šè¿‡é“¾æ¥æ—¶é‡å®šä½ã€‚ é“¾æ¥å™¨å¦‚ä½•çŸ¥é“å“ªäº›æŒ‡ä»¤éœ€è¦è¢«è°ƒæ•´ï¼Ÿè¿™å°±ç”¨åˆ°äº†é‡å®šä½è¡¨ã€‚ é‡å®šä½è¡¨å°±æ˜¯ ELF æ–‡ä»¶çš„ä¸€ä¸ªæ®µï¼Œæ‰€ä»¥å…¶å®é‡å®šä½è¡¨ä¹Ÿå¯ä»¥å«é‡å®šä½æ®µã€‚ 1objdump -r æŸ¥çœ‹é‡å®šä½è¡¨ æ¯ä¸ªè¦è¢«é‡å®šä½çš„åœ°æ–¹å«ä¸€ä¸ªé‡å®šä½å…¥å£ï¼ˆRelocation Entryï¼‰ã€‚ é‡å®šä½è¿‡ç¨‹ä¹Ÿä¼´éšç€ç¬¦å·çš„è§£æè¿‡ç¨‹ï¼Œæ¯ä¸ªç›®æ ‡æ–‡ä»¶éƒ½å¯èƒ½å®šä¹‰ä¸€äº›ç¬¦å·ï¼Œæˆ–å¼•ç”¨åˆ°å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶çš„ç¬¦å·ã€‚é‡å®šä½è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªé‡å®šä½çš„å…¥å£éƒ½æ˜¯å¯¹ä¸€ä¸ªç¬¦å·çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå½“é“¾æ¥å™¨éœ€è¦å¯¹æŸä¸ªç¬¦å·çš„å¼•ç”¨è¿›è¡Œé‡å®šä½æ—¶ï¼Œä»–å°±è¦ç¡®å®šè¿™ä¸ªç¬¦å·çš„ç›®æ ‡åœ°å€ã€‚è¿™æ—¶å€™é“¾æ¥å™¨å°±ä¼šå–æŸ¥æ‰¾ç”±æ‰€æœ‰è¾“å…¥ç›®æ ‡æ–‡ä»¶çš„ç¬¦å·è¡¨ç»„æˆçš„å…¨å±€ç¬¦å·è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç¬¦å·è¿›è¡Œé‡å®šä½ã€‚ 1readelf -s æŸ¥çœ‹ç¬¦å·è¡¨ å¯¹äº 32 ä½ x86 å¹³å°ä¸‹çš„ ELF æ–‡ä»¶çš„é‡å®šä½å…¥å£æ‰€ä¿®æ­£çš„æŒ‡ä»¤å¯»å€æ–¹å¼åªæœ‰ä¸¤ç§ï¼š ç»å¯¹è¿‘å€ 32 ä½å¯»å€ ç›¸å¯¹è¿‘å€ 32 ä½å¯»å€ x86 åŸºæœ¬é‡å®šä½ç±»å‹ å®å®šä¹‰ å€¼ é‡å®šä½ä¿®æ­£æ–¹æ³• R_386_32 1 ç»å¯¹å¯»å€ä¿®æ­£ S+A R_386_PC32 2 ç›¸å¯¹å¯»å€ä¿®æ­£ S+A-P A = ä¿å­˜åœ¨è¢«ä¿®æ­£ä½ç½®çš„å€¼P = è¢«ä¿®æ­£çš„ä½ç½® (ç›¸å¯¹äºæ®µå¼€å§‹çš„åç§»é‡æˆ–è€…è™šæ‹Ÿåœ°å€)ï¼Œæ³¨æ„ï¼Œè¯¥å€¼å¯é€šè¿‡ r_offset è®¡ç®—å¾—åˆ°S = ç¬¦å·çš„å®é™…åœ°å€ï¼Œå³ç”± r_infoçš„é«˜ 24 ä½æŒ‡å®šçš„ç¬¦å·çš„å®é™…åœ°å€ ç¬¬å…­ç«  å¯æ‰§è¡Œæ–‡ä»¶çš„è£…è½½ä¸è¿›ç¨‹ç¨‹åºè¿è¡Œæ—¶æ˜¯æœ‰å±€éƒ¨æ€§åŸç†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ç¨‹åºæœ€å¸¸ç”¨çš„éƒ¨åˆ†é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œå°†ä¸å¸¸ç”¨çš„æ•°æ®å­˜æ”¾åœ¨ç£ç›˜é‡Œï¼Œè¿™å°±æ˜¯åŠ¨æ€è½½å…¥çš„åŸºæœ¬åŸç†ã€‚ COMMON å— Q:åœ¨ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘å™¨ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¹Ÿå½“åšæœªåˆå§‹åŒ–çš„å±€éƒ¨é™æ€å˜é‡ä¸€æ ·å¤„ç†ï¼Œä¸ºå®ƒåœ¨ BSS æ®µåˆ†é…ç©ºé—´ï¼Œè€Œæ˜¯å°†å…¶æ ‡è®°ä¸ºä¸€ä¸ª COMMON ç±»å‹çš„å˜é‡ï¼ŸA:å½“ç¼–è¯‘å™¨å°†ä¸€ä¸ªç¼–è¯‘å•å…ƒç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶æ—¶ï¼Œå¦‚æœè¯¥ç¼–è¯‘å•å…ƒåŒ…å«äº†å¼±ç¬¦å·ï¼ˆæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å°±æ˜¯å…¸å‹ï¼‰ï¼Œé‚£ä¹ˆè¯¥å¼±ç¬¦å·æœ€ç»ˆæ‰€å å¤§å°æœªçŸ¥ï¼Œå› ä¸ºæœ‰å¯èƒ½å…¶ä»–ç¼–è¯‘å•å…ƒä¸­è¯¥ç¬¦å·æ‰€å ç©ºé—´æ¯”å½“å‰çš„å¤§æ‰€ä»¥ç¼–è¯‘å™¨æ­¤æ—¶æ— æ³•ä¸ºè¯¥ç¬¦å·åœ¨ BSS æ®µåˆ†é…ç©ºé—´ã€‚ä½†é“¾æ¥å™¨åœ¨é“¾æ¥è¿‡ç¨‹ä¸­å¯ä»¥ç¡®å®šå¼±ç¬¦å·å¤§å°ï¼Œå› ä¸ºå½“é“¾æ¥å™¨è¯»å–æ‰€æœ‰è¾“å…¥ç›®æ ‡æ–‡ä»¶åï¼Œä»»ä½•ä¸€ä¸ªå¼±ç¬¦å·å¤§å°éƒ½å¯ä»¥ç¡®å®šï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨æœ€ç»ˆè¾“å‡ºæ–‡ä»¶çš„ BSS æ®µä¸ºå…¶åˆ†é…ç©ºé—´ã€‚æ€»ä½“æ¥çœ‹ï¼Œæœªåˆå§‹åŒ–å…¨å±€å˜é‡æœ€ç»ˆè¿˜æ˜¯è¢«æ”¾åœ¨ BSS æ®µã€‚ GCC çš„-fno-commonå§æ‰€æœ‰æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¸ä»¥ COMMON å—å½¢å¼å¤„ç†ã€‚ __attribute__æ‰©å±•ä¹Ÿå¯ä»¥å®ç°ï¼Œint global __attribute__((nocommon))ã€‚è¿™æ ·æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å°±æ˜¯å¼ºç¬¦å·ã€‚ Q: ä¸ºä»€ä¹ˆé™æ€è¿è¡Œåº“é‡Œé¢ä¸€ä¸ªç›®æ ‡æ–‡ä»¶åªåŒ…å«ä¸€ä¸ªå‡½æ•°ï¼Ÿæ¯”å¦‚ libc.o é‡Œé¢ printf.o åªåŒ…å« printf() å‡½æ•°ï¼Œstrlen.o åªæœ‰ strlen å‡½æ•°ï¼ŸA:å› ä¸ºé“¾æ¥å™¨åœ¨é“¾æ¥é™æ€åº“æ—¶æ˜¯ä»¥ç›®æ ‡æ–‡ä»¶ä¸ºå•ä½çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬å¼•ç”¨äº†é™æ€åº“ä¸­çš„ printf å‡½æ•°ï¼Œé‚£ä¹ˆé“¾æ¥å™¨å°±ä¼šæŠŠåº“ä¸­åŒ…å« printf å‡½æ•°çš„é‚£ä¸ªç›®æ ‡æ–‡ä»¶é“¾æ¥è¿›æ¥ï¼Œå¦‚æœå¾ˆå¤šå‡½æ•°å†™åœ¨ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ä¸­ï¼Œå°±å°†æ²¡ç”¨åˆ°çš„å‡½æ•°ä¸€èµ·é“¾æ¥è¿›äº†è¾“å‡ºç»“æœä¸­ã€‚ é“¾æ¥çš„è¿‡ç¨‹æ§åˆ¶ç¬¬ 6 ç«  å¯æ‰§è¡Œæ–‡ä»¶çš„è£…è½½ä¸è¿›ç¨‹ç¨‹åºè¿è¡Œæ—¶æ˜¯æœ‰å±€éƒ¨æ€§åŸç†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ç¨‹åºæœ€å¸¸ç”¨çš„éƒ¨åˆ†é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œå°†ä¸å¸¸ç”¨çš„æ•°æ®å­˜æ”¾åœ¨ç£ç›˜é‡Œï¼Œè¿™å°±æ˜¯åŠ¨æ€è½½å…¥çš„åŸºæœ¬åŸç†ã€‚ å¯æ‰§è¡Œæ–‡ä»¶åœ¨è£…è½½æ—¶å®é™…ä¸Šæ˜¯è¢«æ˜ å°„çš„è™šæ‹Ÿç©ºé—´ï¼Œæ‰€ä»¥å¯æ‰§è¡Œæ–‡ä»¶åˆè¢«å«åšæ˜ åƒæ–‡ä»¶ (Image)ã€‚ Segment å’Œ Section å¾ˆéš¾ä»ä¸­æ–‡ç¿»è¯‘ä¸ŠåŒºåˆ†ï¼ŒELF æ–‡ä»¶æŒ‰ Section å­˜å‚¨çš„ï¼Œä»è£…è½½çš„è§’åº¦ ELF æ–‡ä»¶åˆå¯ä»¥æŒ‰ç…§ Segment åˆ’åˆ†ã€‚ æ®µåœ°å€å¯¹é½å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦è¢«è£…è½½ï¼Œè£…è½½ä¸€èˆ¬é€šè¿‡è™šæ‹Ÿå†…å­˜é¡µæ˜ å°„æœºåˆ¶å®Œæˆï¼Œé¡µæ˜¯æ˜ å°„çš„æœ€å°å•ä½ï¼Œå¯¹äº x86 å¤„ç†å™¨æ¥è¯´ï¼Œé»˜è®¤é¡µå¤§å°ä¸º 4096 å­—èŠ‚ï¼Œæ‰€ä»¥å†…å­˜ç©ºé—´çš„é•¿åº¦å¿…é¡»æ˜¯ 4096 çš„æ•´æ•°å€ï¼Œå¹¶ä¸”è¿™æ®µç©ºé—´åœ¨ç‰©ç†å†…å­˜å’Œè¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 4096 çš„æ•´æ•°å€ã€‚ ç¬¬ 7 ç«  åŠ¨æ€é“¾æ¥ç¬¬ä¸ƒç«  åŠ¨æ€é“¾æ¥ä¸ºä»€ä¹ˆè¦åŠ¨æ€é“¾æ¥ï¼Ÿ å†…å­˜å’Œç£ç›˜ç©ºé—´ï¼šå¦‚æœä¸¤ä¸ªç¨‹åºéƒ½ç”¨åˆ°ä¸€ä¸ªé™æ€åº“ï¼Œé“¾æ¥æ—¶å°±ä¼šæœ‰é™æ€åº“çš„ä¸¤ä¸ªå‰¯æœ¬ï¼Œè¿è¡Œæ—¶å°±ä¼šå ç”¨ä¸¤ä»½å†…å­˜ã€‚ ç¨‹åºçš„å¼€å‘ä¸å‘å¸ƒï¼šä¸€ä¸ªç¨‹åºç”¨åˆ°çš„é™æ€åº“å¦‚æœæœ‰æ›´æ–°ï¼Œé‚£ä¹ˆç¨‹åºå°±éœ€è¦é‡æ–°é“¾æ¥ï¼Œå‘å¸ƒç»™ç”¨æˆ·ã€‚ è¦è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æŠŠç¨‹åºçš„æ¨¡å—ç›¸äº’åˆ†å‰²å¼€æ¥ï¼Œå½¢æˆç‹¬ç«‹çš„æ–‡ä»¶ï¼Œè€Œä¸å†å°†å®ƒä»¬é™æ€é“¾æ¥ã€‚å°±æ˜¯ä¸å¯¹ç›®æ ‡æ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œè€Œç­‰åˆ°ç¨‹åºè¿è¡Œæ—¶å†é“¾æ¥ã€‚è¿™å°±æ˜¯åŠ¨æ€é“¾æ¥çš„åŸºæœ¬æ€æƒ³ã€‚ åŠ¨æ€é“¾æ¥æ¨¡å—çš„è£…è½½åœ°å€æ˜¯ä»0x00000000å¼€å§‹çš„ã€‚ å…±äº«å¯¹è±¡çš„æœ€ç»ˆè£…è½½åœ°å€åœ¨ç¼–è¯‘æ—¶æ˜¯ä¸ç¡®å®šçš„ã€‚ åœ°å€æ— å…³ä»£ç é™æ€å…±äº«åº“ï¼šå°†ç¨‹åºçš„å„ä¸ªæ¨¡å—äº¤ç»™æ“ä½œç³»ç»Ÿç®¡ç†ï¼Œæ“ä½œç³»ç»Ÿåœ¨æŸä¸ªç‰¹å®šçš„åœ°å€åˆ’åˆ†å‡ºä¸€äº›åœ°å€å—ï¼Œä¸ºé‚£äº›å·²çŸ¥çš„æ¨¡å—é¢„ç•™è¶³å¤Ÿçš„ç©ºé—´ã€‚ è£…è½½æ—¶é‡å®šä½ï¼šç¨‹åºåœ¨ç¼–è¯‘æ—¶è¢«è£…è½½çš„ç›®æ ‡åœ°å€ä¸º0x1000ï¼Œä½†æ˜¯åœ¨è£…è½½æ—¶æ“ä½œç³»ç»Ÿå‘ç°0x1000è¿™ä¸ªåœ°å€å·²ç»è¢«åˆ«çš„ç¨‹åºä½¿ç”¨äº†ï¼Œä»0x4000å¼€å§‹æœ‰ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´å¯ä»¥å®¹çº³ï¼Œé‚£ä¹ˆè¯¥ç¨‹åºå°±å¯ä»¥è¢«è£…è½½è‡³0x4000ï¼Œç¨‹åºæŒ‡ä»¤å’Œæ•°æ®æ‰€æœ‰å¼•ç”¨éƒ½åªéœ€è¦åŠ ä¸Š0x3000åç§»é‡å³å¯ã€‚å› ä¸ºä»–ä»¬åœ¨ç¨‹åºä¸­çš„ç›¸å¯¹ä½ç½®æ˜¯ä¸ä¼šæ”¹å˜çš„ã€‚ åœ°å€æ— å…³ä»£ç ä¸ºäº†è§£å†³å…±äº«å¯¹è±¡æŒ‡ä»¤ä¸­å¯¹ç»å¯¹åœ°å€çš„é‡å®šä½é—®é¢˜ï¼ŒåŸºæœ¬æƒ³æ³•æ˜¯æŠŠæŒ‡ä»¤ä¸­é‚£äº›éœ€è¦è¢«ä¿®æ”¹çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥ï¼Œè·Ÿæ•°æ®éƒ¨åˆ†æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ ·æŒ‡ä»¤éƒ¨åˆ†å°±å¯ä»¥ä¿æŒä¸å˜ï¼Œè€Œæ•°æ®éƒ¨åˆ†å¯ä»¥åœ¨æ¯ä¸ªè¿›ç¨‹ä¸­æ‹¥æœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚ æ¨¡å—ä¸­å››ç±»åœ°å€å¼•ç”¨ï¼š æ¨¡å—å†…éƒ¨è°ƒç”¨æˆ–è€…è·³è½¬ä¸éœ€è¦é‡å®šä½ï¼Œæœ¬èº«å°±æ˜¯åœ°å€æ— å…³çš„ã€‚ æ¨¡å—å†…éƒ¨æ•°æ®è®¿é—®æŒ‡ä»¤ä¸­ä¸èƒ½åŒ…å«æ•°æ®çš„ç»å¯¹åœ°å€ï¼Œæ‰€ä»¥ä½¿ç”¨ç›¸å¯¹å¯»å€çš„æ–¹å¼ã€‚ æ¨¡å—é—´æ•°æ®è®¿é—®æŠŠè·Ÿåœ°å€ç›¸å…³çš„éƒ¨åˆ†æ”¾åˆ°æ•°æ®æ®µé‡Œé¢ã€‚ELF çš„åšæ³•æ˜¯åœ¨æ•°æ®æ®µé‡Œé¢å»ºç«‹ä¸€ä¸ªæŒ‡å‘è¿™äº›æ•°æ®çš„æŒ‡é’ˆæ•°æ®ï¼Œç§°ä¸ºå…¨å±€åç§»è¡¨ï¼ˆGOTï¼‰ã€‚å½“ä»£ç éœ€è¦å¼•ç”¨å…¨å±€å˜é‡æ—¶ï¼Œå¯ä»¥é€šè¿‡ GOT é—´æ¥å¼•ç”¨ã€‚ é“¾æ¥å™¨åœ¨è£…è½½æ—¶ä¼šæŸ¥æ‰¾æ¯ä¸ªå˜é‡çš„åœ°å€ï¼Œå¡«å…… GOT æ¯ä¸ªé¡¹ï¼Œå½“æŒ‡ä»¤ä¸­éœ€è¦è®¿é—®å˜é‡æ—¶ï¼Œç¨‹åºä¼šå…ˆæ‰¾åˆ° GOTï¼Œæ ¹æ® GOT ä¸­å¯¹åº”çš„åœ°å€ï¼Œæ‰¾åˆ°å¯¹åº”çš„å˜é‡ã€‚GOT æœ¬èº«æ”¾åœ¨æ•°æ®æ®µï¼Œæ‰€ä»¥ä»–å¯ä»¥åœ¨æ¨¡å—è£…è½½æ—¶è¢«ä¿®æ”¹ï¼Œå¹¶ä¸”æ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹å‰¯æœ¬ï¼Œç›¸äº’ä¸å½±å“ã€‚ ä»¥è®¿é—®å˜é‡ b ä¸ºä¾‹ï¼Œç¨‹åºé¦–å…ˆè®¡ç®—å‡ºå˜é‡ b çš„åœ°å€åœ¨ GOT ä¸­çš„ä½ç½®ï¼Œå³ 0x10000000 + 0x454 + 0x118c + 0xfffffff8 = 0x100015d8 0xfffffff8ä¸º-8çš„è¡¥ç è¡¨ç¤ºï¼Œç„¶åä½¿ç”¨å¯„å­˜å™¨é—´æ¥å¯»å€æ–¹å¼ç»™å˜é‡ b èµ‹å€¼ 2ã€‚ æ¨¡å—é—´è°ƒç”¨è·³è½¬ç±»ä¼¼äºæ¨¡å—æœºæ•°æ®è®¿é—®ï¼Œä¸åŒçš„æ˜¯ GOT ä¸­ç›¸åº”é¡¹ä¿å­˜çš„æ˜¯ç›®æ ‡å‡½æ•°çš„åœ°å€ã€‚ å„ç§åœ°å€å¼•ç”¨æ–¹å¼ æŒ‡ä»¤è·³è½¬ï¼Œè°ƒç”¨ æ•°æ®è®¿é—® æ¨¡å—å†…éƒ¨ ç›¸å¯¹è·³è½¬å’Œè°ƒç”¨ ç›¸å¯¹åœ°å€è®¿é—® æ¨¡å—å¤–éƒ¨ é—´æ¥è·³è½¬å’Œè°ƒç”¨ï¼ˆGOTï¼‰ é—´æ¥è®¿é—®ï¼ˆGOTï¼‰ Q : -fpic å’Œ-fPIC çš„åŒºåˆ«ï¼ŸA: éƒ½æ˜¯ GCC äº§ç”Ÿåœ°å€æ— å…³ä»£ç çš„å‚æ•°ã€‚-fpicäº§ç”Ÿçš„ä»£ç è¾ƒå°ï¼Œ-fPICäº§ç”Ÿçš„ä»£ç è¾ƒå¤§ã€‚å› ä¸ºåœ°å€æ— å…³ä»£ç å’Œç¡¬ä»¶å¹³å°ç›¸å…³ï¼Œåœ¨ä¸€äº›å¹³å°ä¸Š-fpicä¼šå—åˆ°é™åˆ¶ï¼Œæ¯”å¦‚å…¨å±€ç¬¦å·çš„æ•°é‡æˆ–è€…ä»£ç é•¿åº¦ç­‰ï¼Œè€Œåè€…æ²¡æœ‰è¿™æ ·çš„é™åˆ¶ã€‚ Q: å¦‚æœä¸€ä¸ªå…±äº«å¯¹è±¡ lib.so ä¸­å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡ Gï¼Œè¿›ç¨‹ A å’Œè¿›ç¨‹ B éƒ½æ˜¯ç”¨äº† lib.soã€‚é‚£ä¹ˆå½“è¿›ç¨‹ A æ”¹å˜è¿™ä¸ªå…¨å±€å˜é‡æ—¶ï¼Œè¿›ç¨‹ B çš„ G æ˜¯å¦å—åˆ°å½±å“ï¼ŸA: ä¸ä¼šï¼Œåº”å½“ lib.so è¢«åŠ è½½æ—¶ï¼Œå®ƒçš„æ•°æ®æ®µéƒ¨åˆ†åœ¨æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„å‰¯æœ¬ã€‚å¦‚æœæ˜¯åŒä¸€ä¸ªè¿›ç¨‹é‡Œçš„çº¿ç¨‹ A å’Œçº¿ç¨‹ Bï¼Œé‚£ä¹ˆä»–ä»¬æ˜¯å…±äº«æ•°æ® G çš„ã€‚ å¦‚æœä»£ç ä¸æ˜¯åœ°å€æ— å…³çš„ï¼Œå®ƒå°±ä¸èƒ½è¢«å¤šä¸ªè¿›ç¨‹å…±äº«ï¼Œå°±å¤±å»äº†èŠ‚çœå†…å­˜çš„ä¼˜ç‚¹ã€‚ä½†æ˜¯è£…è½½æ˜¯é‡å®šä½çš„å…±äº«å¯¹è±¡çš„è¿è¡Œé€Ÿåº¦è¦æ¯”ä½¿ç”¨åœ°å€æ— å…³ä»£ç çš„å…±äº«å¯¹è±¡å¿«ï¼Œå› ä¸ºå®ƒçœå»äº†åœ°å€æ— å…³ä»£ç ä¸­æ¯æ¬¡è®¿é—®å…¨å±€æ•°æ®å’Œå‡½æ•°æ˜¯éœ€è¦åšä¸€æ¬¡è®¡ç®—å½“å‰åœ°å€ä»¥åŠé—´æ¥åœ°å€å¯»å€çš„è¿‡ç¨‹ã€‚ å»¶è¿Ÿç»‘å®š PLTåŠ¨æ€é“¾æ¥è¦æ¯”é™æ€é“¾æ¥æ…¢ï¼Œä¸€æ˜¯å› ä¸ºåŠ¨æ€é“¾æ¥ä¸‹ï¼Œå¯¹å…¨å±€å’Œé™æ€æ•°æ®çš„è®¿é—®éƒ½è¦è¿›è¡Œå¤æ‚çš„ GOT å®šä½ï¼Œç„¶åé—´æ¥å¯»å€ã€‚å¦å¤–ï¼Œç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨éƒ½è¦è¿›è¡Œä¸€æ¬¡é“¾æ¥å·¥ä½œã€‚ è€Œåœ¨ä¸€ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å¾ˆå¤šå‡½æ•°åœ¨ç¨‹åºæ‰§è¡Œå®Œæ—¶éƒ½ä¸ä¼šç”¨åˆ°ï¼Œå¦‚æœä¸€å¼€å§‹å°±æŠŠæ‰€æœ‰å‡½æ•°é“¾æ¥å¥½å®é™…å°±æ˜¯ä¸€ç§æµªè´¹ï¼Œæ‰€æœ‰ ELF é‡‡ç”¨äº†ä¸€ç§å«åšå»¶è¿Ÿç»‘å®šçš„åšæ³•ï¼ŒåŸºæœ¬æ€æƒ³å°±æ˜¯å½“å‡½æ•°ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰è¿›è¡Œç»‘å®šï¼ˆç¬¦å·æŸ¥æ‰¾ï¼Œé‡å®šä½ç­‰ï¼‰ã€‚ ELF ä½¿ç”¨ PLTï¼ˆProcedure Linkage Tableï¼‰æ¥å®ç°å»¶è¿Ÿç»‘å®šã€‚ä»¥è°ƒç”¨bar()å‡½æ•°ä¸ºä¾‹ï¼Œä¹‹å‰çš„åšæ³•æ˜¯é€šè¿‡ GOT ä¸­çš„ç›¸åº”é¡¹è¿›è¡Œè·³è½¬ï¼Œè€Œå»¶è¿Ÿç»‘å®šä¸‹ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­é—´åŠ äº†ä¸€å±‚ PLT é—´æ¥è·³è½¬ã€‚æ¯ä¸ªå¤–éƒ¨å‡½æ•°åœ¨ PLT ä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”é¡¹ï¼Œæ¯”å¦‚bar()åœ¨ PLT ä¸­é¡¹çš„åœ°å€ä¸ºbar@pltã€‚ 12345bar@plt: jmp *(bar@GOT) push n push moduleID jump _dl_runtime_resolve ç¬¬ä¸€æ¡æ˜¯æŒ‡ä»¤é€šè¿‡ GOT é—´æ¥è·³è½¬çš„æŒ‡ä»¤ï¼Œå¦‚æœé“¾æ¥å™¨åœ¨åˆå§‹åŒ–é˜¶æ®µå·²ç»åˆå§‹åŒ–è¯¥é¡¹ï¼Œå¹¶å°†bar()åœ°å€å¡«å…¥è¯¥é¡¹ï¼Œé‚£ä¹ˆå°±èƒ½æ­£ç¡®è·³è½¬åˆ°bar()ã€‚ä½†æ˜¯ä¸ºäº†å»¶è¿Ÿç»‘å®šï¼Œé“¾æ¥å™¨åˆå§‹åŒ–æ—¶å¹¶æ²¡æœ‰å°†bar()åœ°å€å¡«å…¥ï¼Œè€Œæ˜¯å°†ç¬¬äºŒæ¡æŒ‡ä»¤push nçš„åœ°å€å¡«å…¥äº†bar@GOTä¸­ï¼Œè¿™ä¸€æ­¥ä¸éœ€è¦æŸ¥æ‰¾ç¬¦å·ï¼Œä»£ä»·å¾ˆä½ã€‚ ç¬¬ä¸€æ¡æŒ‡ä»¤çš„æ•ˆæœå°±æ˜¯è·³è½¬åˆ°ç¬¬äºŒæ¡æŒ‡ä»¤ï¼Œç¬¬äºŒæ¡æŒ‡ä»¤å°†æ•°å­—nå‹å…¥å †æ ˆï¼Œè¿™ä¸ªæ•°å­—æ˜¯barè¿™ä¸ªç¬¦å·å¼•ç”¨åœ¨é‡å®šä½è¡¨.rel.pltä¸­çš„ä¸‹æ ‡ã€‚ç¬¬ä¸‰æ¡æŒ‡ä»¤å°†æ¨¡å— ID å‹å…¥å †æ ˆï¼Œæœ€åè·³è½¬åˆ°_dl_runtime_resolveã€‚ _dl_runtime_resolveè¿›è¡Œä¸€ç³»åˆ—å·¥ä½œåå°†bar()çœŸæ­£åœ°å€å¡«å…¥åˆ°bar@GOTã€‚ ä¸€æ—¦bar()è¿™ä¸ªå‡½æ•°è¢«è§£æå®Œï¼Œå½“é¢å†æ¬¡è°ƒç”¨bar@pltæ—¶ï¼Œç¬¬ä¸€æ¡jumpæŒ‡ä»¤å°±èƒ½è·³è½¬åˆ°bar()çš„çœŸæ­£åœ°å€ã€‚bar()å‡½æ•°è¿”å›æ—¶æ ¹æ®å †æ ˆé‡Œä¿å­˜çš„EIPç›´æ¥è¿”å›åˆ°è°ƒç”¨è€…ï¼Œè€Œä¸ä¼šæ‰§è¡Œbar@pltä¸­ç¬¬äºŒæ¡æŒ‡ä»¤ã€‚é‚£æ®µä»£ç åªä¼šåœ¨ç¬¦å·æœªè¢«è§£ææ—¶æ‰§è¡Œä¸€æ¬¡ã€‚ PLT åœ¨ ELF æ–‡ä»¶ä¸­ä»¥ç‹¬ç«‹æ®µå­˜åœ¨ï¼Œæ®µåé€šå¸¸å«åš.pltï¼Œå› ä¸ºå®ƒæœ¬èº«æ˜¯ä¸€äº›åœ°å€æ— å…³çš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥è·Ÿä»£ç æ®µåˆå¹¶æˆåŒä¸€ä¸ªå¯è¯»å¯æ‰§è¡Œçš„ Segment è¢«è£…è½½å…¥å†…å­˜ã€‚ åŠ¨æ€é“¾æ¥ç›¸å…³ç»“æ„.interp æ®µ 1234objdump -s a.outContents of section .interp:804811 2f6c6962 2f6c696d 6c696e78 782e736f /lib/ld-linux.so.2 é‡Œé¢ä¿å­˜çš„å°±æ˜¯å¯æ‰§è¡Œæ–‡ä»¶æ‰€éœ€è¦çš„åŠ¨æ€é“¾æ¥å™¨çš„è·¯å¾„ï¼Œåœ¨ Linux ä¸‹ï¼Œå¯æ‰§è¡Œæ–‡ä»¶åŠ¨æ€é“¾æ¥å™¨å‡ ä¹éƒ½æ˜¯/lib/ld-linux.so.2ã€‚ è¿™æ˜¯ä¸ªè½¯é“¾æ¥ï¼Œä¼šä»–ä¼šæŒ‡å‘ç³»ç»Ÿä¸­å®‰è£…çš„åŠ¨æ€é“¾æ¥å™¨ã€‚å½“ç³»ç»Ÿä¸­çš„ Glibc åº“æ›´æ–°æ—¶ï¼Œè½¯é“¾æ¥ä¹Ÿä¼šæŒ‡å‘æ–°çš„åŠ¨æ€é“¾æ¥å™¨ï¼Œæ‰€ä»¥.interpæ®µä¸éœ€è¦ä¿®æ”¹ã€‚ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦çš„åŠ¨æ€é“¾æ¥å™¨çš„è·¯å¾„ï¼š 12$ readelf -l a.out | grep interpreter [Requesting program interpreter: /lib/ld-linux.so.2] .dynamic æ®µ åŠ¨æ€é“¾æ¥ ELF ä¸­æœ€é‡è¦çš„ç»“æ„ï¼Œè¿™é‡Œä¿å­˜äº†åŠ¨æ€é“¾æ¥å™¨æ‰€éœ€è¦çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ä¾èµ–å“ªäº›å…±äº«å¯¹è±¡ï¼ŒåŠ¨æ€é“¾æ¥ç¬¦å·è¡¨çš„ä½ç½®ï¼ŒåŠ¨æ€é“¾æ¥é‡å®šä½è¡¨çš„ä½ç½®ï¼Œå…±äº«å¯¹è±¡åˆå§‹åŒ–ä»£ç çš„åœ°å€ç­‰ã€‚ åŠ¨æ€ç¬¦å·è¡¨ Program1ç¨‹åºä¸€æ¥Lib.soï¼Œå¼•ç”¨åˆ°äº†é‡Œé¢çš„foobar()å‡½æ•°ï¼Œé‚£ä¹ˆå¯¹äºProgram1æ¥è¯´ï¼Œç§°Program1å¯¼å…¥ï¼ˆImportï¼‰äº†foobarå‡½æ•°ï¼Œfoobaræ˜¯Program1çš„å¯¼å…¥å‡½æ•°ã€‚ è€Œç«™åœ¨Lib.soè§’åº¦æ¥è¯´ï¼Œå®ƒå®šä¹‰äº†foobarå‡½æ•°ï¼Œæˆ‘ä»¬ç§°Lib.soå¯¼å‡ºï¼ˆExportï¼‰äº†foobarå‡½æ•°ï¼Œfoobaræ˜¯Lib.soçš„å¯¼å‡ºå‡½æ•°ã€‚ ä¸ºäº†è¡¨ç¤ºåŠ¨æ€é“¾æ¥è¿™äº›æ¨¡å—ä¹‹é—´çš„ç¬¦å·å¯¼å…¥å¯¼å‡ºå…³ç³»ï¼ŒELF ä¸“é—¨æœ‰ä¸€ä¸ªå«åšåŠ¨æ€ç¬¦å·è¡¨çš„æ®µæ¥ä¿å­˜è¿™äº›ä¿¡æ¯ï¼Œæ®µåé€šå¸¸å«.dynsymã€‚ .dynsymåªä¿å­˜ä¸åŠ¨æ€é“¾æ¥ç›¸å…³çš„ç¬¦å·ï¼Œå¯¹äºé‚£äº›æ¨¡å—å†…éƒ¨çš„ç¬¦å·ï¼Œæ¯”å¦‚æ¨¡å—ç§æœ‰å˜é‡åˆ™ä¸ä¿å­˜ã€‚ åŠ¨æ€é“¾æ¥é‡å®šä½è¡¨ PIC æ¨¡å¼çš„å…±äº«å¯¹è±¡ä¹Ÿéœ€è¦é‡å®šä½ã€‚ å¯¹äºä½¿ç”¨ PIC æŠ€æœ¯çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«å¯¹è±¡æ¥è¯´ï¼Œè™½ç„¶ä»£ç æ®µä¸éœ€è¦é‡å®šä½ï¼Œä½†æ˜¯æ•°æ®æ®µè¿˜åŒ…å«äº†ç»å¯¹åœ°å€çš„å¼•ç”¨ï¼Œå› ä¸ºä»£ç æ®µä¸­ç»å¯¹åœ°å€ç›¸å…³çš„éƒ¨åˆ†è¢«åˆ†ç¦»å‡ºæ¥ï¼Œå˜æˆäº† GOTï¼Œè€Œ GOT å®é™…ä¸Šæ˜¯æ•°æ®æ®µçš„ä¸€éƒ¨åˆ†ã€‚ ç›®æ ‡æ–‡ä»¶çš„é‡å®šä½åœ¨é™æ€é“¾æ¥æ—¶å®Œæˆï¼Œå…±äº«å¯¹è±¡çš„é‡å®šä½åœ¨è£…è½½æ—¶å®Œæˆã€‚ ç›®æ ‡æ–‡ä»¶é‡ŒåŒ…å«ä¸“é—¨ç”¨äºé‡å®šä½ä¿¡æ¯çš„é‡å®šä½è¡¨ï¼Œæ¯”å¦‚.rel.textè¡¨ç¤ºæ˜¯ä»£ç æ®µé‡å®šä½è¡¨ï¼Œ.rel.dataè¡¨ç¤ºæ•°æ®æ®µé‡å®šä½è¡¨ã€‚ å…±äº«å¯¹è±¡é‡Œç±»ä¼¼çš„é‡å®šä½è¡¨å«åš.rel.dynå’Œ.rel.pltã€‚.rel.dynå®é™…ä¸Šæ˜¯å¯¹æ•°æ®å¼•ç”¨çš„ä¿®æ­£ï¼Œå®ƒæ‰€ä¿®æ­£çš„ä½ç½®ä½äº.gotä»¥åŠæ•°æ®æ®µï¼›.rel.pltå®é™…ä¸Šæ˜¯å¯¹ä»£ç å¼•ç”¨çš„ä¿®æ­£ï¼Œå®ƒæ‰€ä¿®æ­£çš„ä½ç½®ä½äº.got.pltã€‚ ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹é‡å®šä½è¡¨ï¼› printfè¿™ä¸ªé‡å®šä½å…¥å£ï¼Œå®ƒçš„ç±»å‹ä¸ºR_386_JUMP_SLOTï¼Œå®ƒçš„åç§»ä¸º0x000015d8ã€‚å®ƒå®é™…ä½äº.got.pltä¸­ï¼Œå‰ä¸‰é¡¹æ˜¯è¢«ç³»ç»Ÿå ç”¨çš„ï¼Œç¬¬å››é¡¹å¼€å§‹æ‰æ˜¯çœŸæ­£å­˜æ”¾å¯¼å…¥å‡½æ•°åœ°å€çš„åœ°æ–¹ï¼Œåˆšå¥½æ˜¯0x000015c8 + 4 * 3 = 0x000015d4ï¼Œå³__gmon_start__ã€‚ å½“åŠ¨æ€é“¾æ¥å™¨è¦è¿›è¡Œé‡å®šä½æ—¶ï¼Œå…ˆæŸ¥æ‰¾printfçš„åœ°å€ï¼Œå‡è®¾é“¾æ¥å™¨åœ¨å…¨å±€ç¬¦å·è¡¨ä¸­æ‰¾åˆ°printfçš„åœ°å€ä¸º0x08801234ï¼Œé‚£ä¹ˆé“¾æ¥å™¨å°±ä¼šå°†è¿™ä¸ªåœ°å€å¡«å…¥.got.pltä¸­åç§»ä¸º0x000015d8çš„ä½ç½®ã€‚ä»è€Œå®ç°äº†åœ°å€é‡å®šä½ï¼Œå³åŠ¨æ€é“¾æ¥æœ€å…³é”®çš„ä¸€æ­¥ã€‚ åŠ¨æ€é“¾æ¥æ—¶è¿›ç¨‹å †æ ˆåˆå§‹åŒ–ä¿¡æ¯åŠ¨æ€é“¾æ¥çš„æ­¥éª¤å’Œå®ç°åŠ¨æ€é“¾æ¥åˆ†ä¸ºä¸‰æ­¥ï¼šå¯åŠ¨åŠ¨æ€é“¾æ¥æœ¬èº«ï¼Œè£…è½½æ‰€æœ‰çš„å…±äº«å¯¹è±¡ï¼Œé‡å®šä½å’Œåˆå§‹åŒ–ã€‚ Qï¼šåŠ¨æ€é“¾æ¥å™¨æœ¬èº«æ˜¯åŠ¨æ€é“¾æ¥è¿˜æ˜¯é™æ€é“¾æ¥ï¼ŸAï¼šåŠ¨æ€é“¾æ¥å™¨æœ¬èº«åº”è¯¥æ˜¯é™æ€é“¾æ¥çš„ï¼Œå®ƒä¸èƒ½ä¾èµ–äºå…¶ä»–å…±äº«å¯¹è±¡ï¼ŒåŠ¨æ€é“¾æ¥å™¨æœ¬èº«ä½¿ç”¨æ¥å¸®åŠ©å…¶ä»– ELF æ–‡ä»¶è§£å†³å…±äº«å¯¹è±¡ä¾èµ–é—®é¢˜çš„ï¼Œå¦‚æœå®ƒä¹Ÿä¾èµ–å…¶ä»–å…±äº«å¯¹è±¡ï¼Œé‚£å°±é™·å…¥çŸ›ç›¾äº†ã€‚ Qï¼šåŠ¨æ€é“¾æ¥å™¨æœ¬èº«å¿…é¡»æ˜¯ PIC çš„å—ï¼ŸAï¼šåŠ¨æ€é“¾æ¥å™¨å¯ä»¥æ˜¯ PIC çš„ä¹Ÿå¯ä»¥ä¸æ˜¯ï¼Œä½†æ˜¯å¾€å¾€ç”¨ PIC ä¼šç®€å•ä¸€äº›ã€‚ Qï¼šåŠ¨æ€é“¾æ¥å™¨å¯ä»¥è¢«å½“åšå¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œï¼Œé‚£ä¹ˆå®ƒçš„è£…è½½åœ°å€æ˜¯å¤šå°‘ï¼ŸAï¼šld.so çš„è£…è½½åœ°å€è·Ÿä¸€èˆ¬çš„å…±äº«å¯¹è±¡ä¸€æ ·ï¼Œå³0x00000000ã€‚è¿™ä¸ªè£…è½½åœ°å€æ˜¯ä¸€ä¸ªæ— æ•ˆçš„è£…è½½åœ°å€ï¼Œä½œä¸ºä¸€ä¸ªå…±äº«åº“ï¼Œå†…æ ¸åœ¨è£…è½½å®ƒæ—¶ä¼šä¸ºå…¶é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„è£…è½½åœ°å€ã€‚ æ˜¾ç¤ºè¿è¡Œæ—¶é“¾æ¥ç¬¬ 10 ç«  å†…å­˜ç¨‹åºçš„å†…å­˜å¸ƒå±€åœ¨ 32 ä½æ“ä½œç³»ç»Ÿé‡Œï¼Œæœ‰ 4GB çš„å¯»å€èƒ½åŠ›ï¼Œå¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿä¼šå°†ä¸€éƒ¨åˆ†æŒªç»™å†…æ ¸ä½¿ç”¨ï¼Œåº”ç”¨ç¨‹åºæ— æ³•ç›´æ¥è®¿é—®è¿™æ®µå†…å­˜ã€‚è¿™éƒ¨åˆ†ç§°ä¸ºå†…æ ¸ç©ºé—´ã€‚Windows é»˜è®¤å°†é«˜åœ°å€çš„ 2GB åˆ†ç»™å†…æ ¸ï¼ŒLinux é»˜è®¤åˆ† 1GB ç»™å†…æ ¸ã€‚ å‰©ä¸‹çš„ç§°ä¸ºç”¨æˆ·ç©ºé—´ï¼Œåœ¨ç”¨æˆ·ç©ºé—´é‡Œä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šçš„åœ°å€åŒºé—´ï¼š æ ˆï¼šç»´æŠ¤å‡½æ•°è°ƒç”¨ä¸Šä¸‹æ–‡ï¼Œé€šå¸¸åœ¨ç”¨æˆ·ç©ºé—´çš„æœ€é«˜åœ°å€å¤„åˆ†é…ã€‚ å †ï¼šç”¨æ¥å®¹çº³ç¨‹åºåŠ¨æ€åˆ†é…çš„å†…å­˜åŒºåŸŸï¼Œå½“ä½¿ç”¨ malloc æˆ–è€… new åˆ†é…å†…å­˜æ—¶ï¼Œå¾—åˆ°çš„å†…å­˜æ¥è‡ªäºå †ã€‚é€šå¸¸åœ¨æ ˆä¸‹æ–¹ã€‚ å¯æ‰§è¡Œæ–‡ä»¶æ˜ åƒï¼šå­˜å‚¨å¯æ‰§è¡Œæ–‡ä»¶å†å†…å­˜é‡Œçš„æ˜ åƒï¼Œç”±è£…è½½å™¨åœ¨è£…è½½æ—¶å°†å¯æ‰§è¡Œæ–‡ä»¶çš„å†…å­˜è¯»å–æ´»æ˜ å°„åˆ°è¿™é‡Œã€‚ ä¿ç•™åŒºï¼šä¿ç•™åŒºå¹¶ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„å†…å­˜åŒºåŸŸï¼Œè€Œæ˜¯å¯¹å†…å­˜ä¸­å—åˆ°ä¿æŠ¤è€Œç¦æ­¢è®¿é—®çš„å†…å­˜åŒºåŸŸçš„æ€»ç§°ã€‚æ¯”å¦‚NULLã€‚ æ ˆä¸è°ƒç”¨æƒ¯ä¾‹æ ˆä¿å­˜äº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ‰€éœ€è¦çš„ç»´æŠ¤ä¿¡æ¯ï¼Œé€šå¸¸è¿™è¢«ç§°ä¸ºæ ˆå¸§ã€‚ä¸€èˆ¬åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š å‡½æ•°çš„è¿”å›åœ°å€å’Œå‚æ•° ä¸´æ—¶å˜é‡ ä¿å­˜çš„ä¸Šä¸‹æ–‡ ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨æµç¨‹ï¼š I386 æ ‡å‡†å‡½æ•°è¿›å…¥å’Œé€€å‡ºæŒ‡ä»¤åºåˆ—ï¼ŒåŸºæœ¬å½¢å¼ï¼š 123456789101112131415push ebpmov ebp, espsub esp, x[push reg1]...[push regn]å‡½æ•°å®é™…å†…å­˜[pop regn]...[pop reg1]mov esp, ebppop ebpret Hot Patch Prologue çƒ­è¡¥ä¸åœ¨ Windows å‡½æ•°é‡Œï¼Œæœ‰äº›å‡½æ•°å°½ç®¡ä½¿ç”¨äº†æ ‡å‡†çš„è¿›å…¥æŒ‡ä»¤åºåˆ—ï¼Œä½†æ˜¯åœ¨è¿™äº›æŒ‡ä»¤ä¹‹å‰å´æ’å…¥äº†ä¸€äº›ç‰¹æ®Šå†…å®¹ï¼š 1mov edi,edi è¿™æ¡æŒ‡ä»¤æ²¡æœ‰ä»»ä½•ç”¨ï¼Œåœ¨æ±‡ç¼–ä¹‹åä¼šæˆä¸ºä¸€ä¸ªå ç”¨ 2 å­—èŠ‚çš„æœºå™¨ç ï¼Œçº¯ç²¹ä¸ºäº†å ä½ç¬¦è€Œå­˜åœ¨ï¼Œä½¿ç”¨è¿™æ¡æŒ‡ä»¤å¼€å¤´çš„å‡½æ•°æ•´ä½“çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š 123456789nopnopnopnopnopFUNCTION:mov edi,edipush ebpmov ebp, esp å…¶ä¸­ nop å  1 ä¸ªå­—èŠ‚ï¼Œä¹Ÿæ˜¯å ä½ç¬¦ï¼ŒFUNCTION ä¸ºä¸€ä¸ªæ ‡å·ï¼Œè¡¨ç¤ºå‡½æ•°å…¥å£ï¼Œæœ¬èº«ä¸å ç©ºé—´ã€‚ è®¾è®¡æˆè¿™æ ·çš„å‡½æ•°åœ¨è¿è¡Œæ—¶å¯ä»¥å¾ˆå®¹æ˜“è¢«å…¶ä»–å‡½æ•°æ›¿æ¢æ‰ï¼Œåœ¨ä¸Šé¢çš„æŒ‡ä»¤åºåˆ—ä¸­è°ƒç”¨çš„å‡½æ•°æ˜¯ FUNCTIONï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åšä¸€äº›ä¿®æ”¹ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åˆ»æ„æ”¹æˆè°ƒç”¨å‡½æ•° REPLACEMENT_FUNCTIONã€‚é¦–å…ˆåœ¨è¿›ç¨‹å†…å­˜ç©ºé—´ä»»æ„å¤„å†™å…¥ REPLACEMENT_FUNCTION çš„å®šä¹‰ï¼š 1234567REPLACEMENT_FUNCTION:push ebpmov ebp, esp...mov esp, ebppop ebpret ç„¶åä¿®æ”¹åŸå‡½æ•°çš„å†…å®¹ï¼š 1234567LABEL: # æ ‡å·ä¸å å­—èŠ‚jmp REPLACEMENT_FUNCTION # å 5å­—èŠ‚ï¼Œåˆšå¥½äº”ä¸ªnopFUNCTION: # å‡½æ•°å…¥å£æ ‡å·ï¼Œä¸å å­—èŠ‚jmp LABEL # è¿‘è·³æŒ‡ä»¤ï¼Œå 2å­—èŠ‚ï¼Œè·³è·ƒåˆ°ä¸Šæ–¹ï¼Œå³ä½¿æˆªè·å¤±è´¥ä¹Ÿä¸å½±å“åŸå‡½æ•°æ‰§è¡Œpush ebpmov ebp, esp... å°† 5 ä¸ªnopæ¢æˆä¸€ä¸ªjmpæŒ‡ä»¤ï¼Œç„¶åå°†å ç”¨ä¸¤ä¸ªå­—èŠ‚çš„mov edi,ediæ¢æˆå¦ä¸€ä¸ªjmpæŒ‡ä»¤ã€‚å› ä¸ºè¿™ä¸ªjmpæŒ‡ä»¤è·³è½¬çš„è·ç¦»éå¸¸è¿‘ï¼Œå› æ­¤è¢«æ±‡ç¼–å™¨ç¿»è¯‘æˆäº†ä¸€ä¸ªâ€œè¿‘è·³â€æŒ‡ä»¤ï¼Œè¿™ç§æŒ‡ä»¤åªå ç”¨ä¸¤ä¸ªå­—èŠ‚ã€‚ä½†åªèƒ½è·³è·ƒåˆ°å½“å‰åœ°å€å‰å 127 ä¸ªå­—èŠ‚èŒƒå›´çš„ç›®æ ‡ä½ç½®ã€‚ è¿™é‡Œçš„æ›¿æ¢æœºåˆ¶ï¼Œå¯ä»¥å®ç°ä¸€ç§å«åšé’©å­ï¼ˆHOOKï¼‰çš„æŠ€æœ¯ï¼Œå…è®¸ç”¨æˆ·åœ¨æŸæ—¶åˆ»æˆªè·ç‰¹å®šå‡½æ•°çš„è°ƒç”¨ã€‚ å‡½æ•°ä¼ é€’å‚æ•°æ—¶å‹æ ˆé¡ºåºï¼Œä¼ é€’å‚æ•°æ˜¯å¯„å­˜å™¨ä¼ å‚è¿˜æ˜¯æ ˆä¼ å‚ç­‰ç­‰éƒ½éœ€è¦éµå®ˆä¸€å®šçš„çº¦å®šï¼Œå¦åˆ™å‡½æ•°å°†æ— æ³•æ­£ç¡®æ‰§è¡Œï¼Œè¿™æ ·çš„çº¦å®šç§°ä¸ºè°ƒç”¨æƒ¯ä¾‹ã€‚ ä¸€ä¸ªè°ƒç”¨æƒ¯ä¾‹ä¸€èˆ¬ä¼šè§„å®šå¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š å‡½æ•°å‚æ•°çš„ä¼ é€’é¡ºåºå’Œæ–¹å¼ è°ƒç”¨æ–¹å‹æ ˆï¼Œå‡½æ•°è‡ªå·±ä»æ ˆç”¨å–å‚æ•° è°ƒç”¨æ–¹å‹æ ˆé¡ºåºï¼šä»å·¦è‡³å³ï¼Œè¿˜æ˜¯ä»å³è‡³å·¦ï¼Ÿ æ ˆçš„ç»´æŠ¤æ–¹å¼ å‚æ•°å‡ºæ ˆï¼Œå¯ä»¥ç”±è°ƒç”¨æ–¹å®Œæˆè¿˜æ˜¯ç”±å‡½æ•°è‡ªå·±å®Œæˆï¼Ÿ åå­—ä¿®é¥°çš„ç­–ç•¥ ä¸ºäº†é“¾æ¥çš„æ—¶å€™å¯¹è°ƒç”¨æƒ¯ä¾‹è¿›è¡ŒåŒºåˆ†ï¼Œè°ƒç”¨æƒ¯ä¾‹è¦å¯¹å‡½æ•°æœ¬èº«çš„åå­—è¿›è¡Œä¿®é¥°ï¼Œä¸åŒè°ƒç”¨æƒ¯ä¾‹æœ‰ä¸åŒçš„åå­—ä¿®é¥°ç­–ç•¥ æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šè°ƒç”¨æƒ¯ä¾‹çš„å‡½æ•°é»˜è®¤æ˜¯cdeclæƒ¯ä¾‹ 1int _cdecl foo(int n, float m) _cdel æ˜¯éæ ‡å‡†å…³é”®å­—ï¼Œåœ¨ä¸åŒç¼–è¯‘å™¨ä¸­å†™æ³•ä¸åŒï¼Œåœ¨ gcc ä¸­ä½¿ç”¨çš„æ˜¯__attribute__((cdecl)) é™„å½•æ–‡ä»¶å è‹±æ–‡å Linux æ‰©å±•å è‹±æ–‡å Windows æ‰©å±•å åŠŸèƒ½ DSO-Dynamic Shared Objects ELF åŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼ŒåŠ¨æ€å…±äº«å¯¹è±¡ï¼Œå…±äº«å¯¹è±¡ .so DLL-Dynamic Linking Library åŠ¨æ€é“¾æ¥åº“ .dll 1111 Static Shared Library é™æ€å…±äº«åº“ 2222 2222 2222 2222 2222 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://example.com/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://example.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"ZH-ä»€ä¹ˆæ˜¯ Die-to-Die æ¥å£","slug":"ZH-ä»€ä¹ˆæ˜¯Die-to-Dieæ¥å£","date":"2022-03-28T11:06:56.000Z","updated":"2022-10-15T03:14:29.633Z","comments":true,"path":"2022/03/28/ZH-ä»€ä¹ˆæ˜¯Die-to-Dieæ¥å£/","link":"","permalink":"http://example.com/2022/03/28/ZH-%E4%BB%80%E4%B9%88%E6%98%AFDie-to-Die%E6%8E%A5%E5%8F%A3/","excerpt":"","text":"ä»€ä¹ˆæ˜¯ Die-to-Die æ¥å£ Authorï¼šSynopsysè¯‘ï¼šWhat is a Die-to-Die Interface? â€“ How it Works | Synopsys å®šä¹‰è£¸ç‰‡åˆ°è£¸ç‰‡ï¼ˆDie2Dieï¼‰æ¥å£æ˜¯ä¸€ä¸ªåŠŸèƒ½å—ï¼Œå®ƒæä¾›ç»„è£…åœ¨åŒä¸€å°è£…ä¸­çš„ä¸¤ä¸ªç¡…ç®¡èŠ¯ä¹‹é—´çš„æ•°æ®æ¥å£ã€‚èŠ¯ç‰‡åˆ°èŠ¯ç‰‡æ¥å£åˆ©ç”¨éå¸¸çŸ­çš„é€šé“è¿æ¥å°è£…å†…çš„ä¸¤ä¸ªèŠ¯ç‰‡ï¼Œä»¥å®ç°åŠŸç‡æ•ˆç‡å’Œéå¸¸é«˜çš„å¸¦å®½æ•ˆç‡ï¼Œè¿™è¶…å‡ºäº†ä¼ ç»ŸèŠ¯ç‰‡åˆ°èŠ¯ç‰‡æ¥å£æ‰€èƒ½è¾¾åˆ°çš„æ•ˆæœã€‚ Die2Die æ¥å£é€šå¸¸ç”± PHY å’Œæ§åˆ¶å™¨å—ç»„æˆï¼Œæ§åˆ¶å™¨å—åœ¨ä¸¤ä¸ª die ä¸Šçš„å†…éƒ¨äº’è¿ç»“æ„ä¹‹é—´æä¾›æ— ç¼è¿æ¥ã€‚Die2Die çš„ PHY ä½¿ç”¨é«˜é€Ÿ SerDes æ¶æ„æˆ–é«˜å¯†åº¦å¹¶è¡Œæ¶æ„å®ç°ï¼Œç»è¿‡ä¼˜åŒ–ä»¥æ”¯æŒå¤šç§å…ˆè¿›çš„ 2Dã€2.5D å’Œ 3D å°è£…æŠ€æœ¯ã€‚ Die2Die æ¥å£æ˜¯æ¨åŠ¨è¡Œä¸šè¶‹åŠ¿ä»å•ç‰‡ SoC è®¾è®¡è½¬å‘åŒä¸€å°è£…ä¸­çš„å¤š Die SoC ç»„ä»¶çš„å…³é”®æ¨åŠ¨åŠ›ã€‚è¿™ç§æ–¹æ³•å‡è½»äº†äººä»¬å¯¹å°å‹å·¥è‰ºèŠ‚ç‚¹çš„é«˜æˆæœ¬/ä½äº§é‡æ—¥ç›Šå¢é•¿çš„æ‹…å¿§ï¼Œå¹¶æä¾›äº†é¢å¤–çš„äº§å“æ¨¡å—åŒ–å’Œçµæ´»æ€§ã€‚ Die-to-Die æ¥å£å¦‚ä½•å·¥ä½œï¼ŸDie2Die çš„æ¥å£ï¼Œå°±åƒä»»ä½•å…¶ä»–èŠ¯ç‰‡åˆ°èŠ¯ç‰‡çš„æ¥å£ä¸€æ ·ï¼Œåœ¨ä¸¤ä¸ªèŠ¯ç‰‡ä¹‹é—´å»ºç«‹äº†å¯é çš„æ•°æ®é“¾è·¯ã€‚ æ¥å£åœ¨é€»è¾‘ä¸Šåˆ†ä¸ºç‰©ç†å±‚ã€é“¾è·¯å±‚å’Œäº‹åŠ¡å±‚ã€‚å®ƒåœ¨èŠ¯ç‰‡è¿è¡ŒæœŸé—´å»ºç«‹å’Œç»´æŠ¤é“¾è·¯ï¼ŒåŒæ—¶å‘åº”ç”¨ç¨‹åºæä¾›è¿æ¥åˆ°å†…éƒ¨äº’è¿ç»“æ„çš„æ ‡å‡†åŒ–å¹¶è¡Œæ¥å£ã€‚ é€šè¿‡æ·»åŠ è¯¸å¦‚å‰å‘çº é”™ (FEC) å’Œ/æˆ–å¾ªç¯å†—ä½™ç  (CRC) å’Œé‡è¯•ç­‰é”™è¯¯æ£€æµ‹å’Œçº æ­£æœºåˆ¶æ¥ä¿è¯é“¾è·¯å¯é æ€§ã€‚ ç‰©ç†å±‚æ¶æ„å¯ä»¥æ˜¯åŸºäº SerDes æˆ–åŸºäºå¹¶è¡Œçš„ã€‚ åŸºäº SerDes çš„æ¶æ„åŒ…æ‹¬å¹¶è¡Œåˆ°ä¸²è¡Œï¼ˆä¸²è¡Œåˆ°å¹¶è¡Œï¼‰æ•°æ®è½¬æ¢ã€é˜»æŠ—åŒ¹é…ç”µè·¯å’Œæ—¶é’Ÿæ•°æ®æ¢å¤æˆ–æ—¶é’Ÿè½¬å‘åŠŸèƒ½ã€‚å®ƒå¯ä»¥æ”¯æŒæ›´é«˜å¸¦å®½çš„ NRZ ä¿¡ä»¤æˆ– PAM-4 ä¿¡ä»¤ï¼Œæœ€é«˜å¯è¾¾ 112 Gbpsã€‚SerDes æ¶æ„çš„ä¸»è¦ä½œç”¨æ˜¯å°½é‡å‡å°‘ç®€å• 2D ç±»å‹å°è£…ï¼ˆå¦‚æœ‰æœºåŸºæ¿ï¼‰ä¸­çš„ I/O äº’è¿æ•°é‡ã€‚ åŸºäºå¹¶è¡Œçš„æ¶æ„åŒ…æ‹¬è®¸å¤šå¹¶è¡Œçš„ä½é€Ÿç®€å•æ”¶å‘å™¨ï¼Œæ¯ä¸ªæ”¶å‘å™¨éƒ½ç”±é©±åŠ¨å™¨å’Œå…·æœ‰è½¬å‘æ—¶é’ŸæŠ€æœ¯çš„æ¥æ”¶å™¨ç»„æˆï¼Œä»¥è¿›ä¸€æ­¥ç®€åŒ–æ¶æ„ã€‚å®ƒæ”¯æŒ DDR ç±»å‹çš„ä¿¡ä»¤ã€‚å¹¶è¡Œæ¶æ„çš„ä¸»è¦ä½œç”¨æ˜¯æœ€å¤§é™åº¦åœ°é™ä½å¯†é›† 2.5D å‹å°è£…ï¼ˆå¦‚ç¡…ä¸­ä»‹å±‚ï¼‰çš„åŠŸè€—ã€‚ Die2Die çš„ä¼˜åŠ¿ç°ä»£èŠ¯ç‰‡å®ç°è¶‹å‘äºåŸºäºåœ¨å°è£…ä¸­ç»„è£…å¤šä¸ªè£¸ç‰‡ä»¥æé«˜æ¨¡å—åŒ–å’Œçµæ´»æ€§çš„è§£å†³æ–¹æ¡ˆã€‚å½“ï¼ˆå•ç‰‡ï¼‰èŠ¯ç‰‡å°ºå¯¸æ¥è¿‘å…¨å…‰ç½©å°ºå¯¸æ—¶ï¼Œè¿™ç§å¤šç®¡èŠ¯æ–¹æ³•è¿˜é€šè¿‡å°†åŠŸèƒ½åˆ†æˆå‡ ä¸ªç®¡èŠ¯æ¥æé«˜äº§é‡ï¼Œä»è€Œä¿ƒè¿›æ›´å…·æˆæœ¬æ•ˆç›Šçš„è§£å†³æ–¹æ¡ˆã€‚ Die ä¹‹é—´çš„æ¥å£å¿…é¡»æ»¡è¶³æ­¤ç±»ç³»ç»Ÿçš„æ‰€æœ‰å…³é”®è¦æ±‚ï¼š ç”µæºæ•ˆç‡ã€‚å¤šèŠ¯ç‰‡ç³»ç»Ÿå®ç°åº”è¯¥ä¸ç­‰æ•ˆçš„å•ç‰‡å®ç°ä¸€æ ·èŠ‚èƒ½ã€‚Die2Die é“¾æ¥ä½¿ç”¨çŸ­è·ç¦»ã€ä½æŸè€—çš„ä¿¡é“ï¼Œæ²¡æœ‰æ˜æ˜¾çš„ä¸è¿ç»­æ€§ã€‚PHY æ¶æ„åˆ©ç”¨è‰¯å¥½çš„é€šé“ç‰¹æ€§æ¥é™ä½ PHY å¤æ‚æ€§å¹¶èŠ‚çœåŠŸè€—ã€‚ ä½å»¶è¿Ÿã€‚å°†æœåŠ¡å™¨æˆ–åŠ é€Ÿå™¨ SoC åˆ’åˆ†ä¸ºå¤šä¸ª Die ä¸åº”å¯¼è‡´å†…å­˜æ¶æ„ä¸ç»Ÿä¸€ï¼Œå› ä¸ºè®¿é—®ä¸åŒ Die ä¸­çš„å†…å­˜å…·æœ‰æ˜¾ç€ä¸åŒçš„å»¶è¿Ÿã€‚Die2Die æ¥å£å®ç°äº†ç®€åŒ–çš„åè®®ï¼Œå¹¶ç›´æ¥è¿æ¥åˆ°èŠ¯ç‰‡äº’è¿ç»“æ„ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å»¶è¿Ÿã€‚ é«˜å¸¦å®½æ•ˆç‡ã€‚é«˜çº§æœåŠ¡å™¨ã€åŠ é€Ÿå™¨å’Œç½‘ç»œäº¤æ¢æœºéœ€è¦åœ¨ Die ä¹‹é—´ä¼ è¾“å¤§é‡æ•°æ®ã€‚Die2Die æ¥å£å¿…é¡»èƒ½å¤Ÿæ”¯æŒæ‰€æœ‰éœ€è¦çš„å¸¦å®½ï¼ŒåŒæ—¶å‡å°‘ Die è¾¹ç¼˜çš„å ç”¨ã€‚é€šå¸¸ä½¿ç”¨ä¸¤ç§æ›¿ä»£æ–¹æ¡ˆæ¥å®ç°æ­¤ç›®æ ‡ï¼šé€šè¿‡ä»¥éå¸¸é«˜çš„æ¯é€šé“æ•°æ®é€Ÿç‡ï¼ˆé«˜è¾¾ 112 Gbpsï¼‰éƒ¨ç½² PHY æ¥æœ€å°åŒ–æ‰€éœ€é€šé“çš„æ•°é‡ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨æ›´ç²¾ç»†çš„å‡¸å—é—´è·ï¼ˆå¾®å‡¸å—ï¼‰æ¥å¢åŠ  PHY çš„å¯†åº¦) åœ¨å¤§é‡å¹¶è¡ŒåŒ–ä»¥å®ç°æ‰€éœ€å¸¦å®½çš„ä½æ•°æ®é€Ÿç‡é€šé“ï¼ˆé«˜è¾¾ 8 Gbps/é€šé“ï¼‰ä¸Šã€‚ å¥å£®çš„é“¾æ¥ã€‚Die2Die é“¾æ¥å¿…é¡»æ²¡æœ‰é”™è¯¯ã€‚è¯¥æ¥å£å¿…é¡»å®ç°è¶³å¤Ÿå¼ºå¤§çš„ä½å»¶è¿Ÿé”™è¯¯æ£€æµ‹å’Œçº æ­£æœºåˆ¶ï¼Œä»¥æ£€æµ‹æ‰€æœ‰é”™è¯¯å¹¶ä»¥ä½å»¶è¿Ÿçº æ­£å®ƒä»¬ã€‚è¿™äº›æœºåˆ¶é€šå¸¸åŒ…æ‹¬ FEC å’Œé‡è¯•åè®®ã€‚ Die-to-Die æ¥å£ç”¨ä¾‹é€šè¿‡å°†å¤šä¸ª Die ç»„åˆåˆ°ä¸€ä¸ªå°è£…ä¸­ï¼Œå°èŠ¯ç‰‡æä¾›äº†å¦ä¸€ç§æ‰©å±•æ‘©å°”å®šå¾‹çš„æ–¹æ³•ï¼ŒåŒæ—¶å®ç°äº†äº§å“æ¨¡å—åŒ–å’Œå·¥è‰ºèŠ‚ç‚¹ä¼˜åŒ–ã€‚å°èŠ¯ç‰‡ç”¨äºè®¡ç®—å¯†é›†å‹ã€å·¥ä½œè´Ÿè½½ç¹é‡çš„åº”ç”¨ç¨‹åºï¼Œå¦‚é«˜æ€§èƒ½è®¡ç®— (HPC)ã€‚ é’ˆå¯¹ HPCã€ç½‘ç»œã€è¶…å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒå’Œäººå·¥æ™ºèƒ½ (AI) ç­‰åº”ç”¨ç¨‹åºçš„ die-to-die æ¥å£æœ‰å››ä¸ªä¸»è¦ç”¨ä¾‹ï¼š Scale SoCç›®æ ‡æ˜¯é€šè¿‡è™šæ‹Ÿï¼ˆè£¸ç‰‡åˆ°è£¸ç‰‡ï¼‰è¿æ¥æ¥è¿æ¥è£¸ç‰‡ï¼Œä»è€Œæé«˜è®¡ç®—èƒ½åŠ›å¹¶ä¸ºæœåŠ¡å™¨å’Œ AI åŠ é€Ÿå™¨åˆ›å»ºå¤šä¸ª SKUï¼Œä»è€Œå®ç°è£¸ç‰‡ä¹‹é—´çš„ç´§å¯†è€¦åˆæ€§èƒ½ã€‚ Split SoCç›®æ ‡æ˜¯å¯ç”¨éå¸¸å¤§çš„ SoCã€‚å¤§å‹è®¡ç®—å’Œç½‘ç»œäº¤æ¢æœºèŠ¯ç‰‡æ­£åœ¨æ¥è¿‘å…‰ç½©é™åˆ¶ã€‚å°†å®ƒä»¬åˆ†æˆå‡ ä¸ªè£¸ç‰‡ä¼šå¸¦æ¥æŠ€æœ¯å¯è¡Œæ€§ã€æé«˜äº§é‡ã€é™ä½æˆæœ¬å¹¶æ‰©å±•æ‘©å°”å®šå¾‹ã€‚ Aggregateå…¶ç›®çš„æ˜¯èšåˆåœ¨ä¸åŒæ¨¡å…·ä¸­å®ç°çš„å¤šç§ä¸åŒçš„åŠŸèƒ½ï¼Œä»¥åˆ©ç”¨æ¯ä¸ªåŠŸèƒ½çš„æœ€ä½³å·¥è‰ºèŠ‚ç‚¹ï¼Œé™ä½åŠŸç‡ï¼Œå¹¶æ”¹å–„ FPGAã€æ±½è½¦å’Œ 5G åŸºç«™ç­‰åº”ç”¨çš„å¤–å½¢å°ºå¯¸ã€‚ Disaggregateç›®æ ‡æ˜¯å°†ä¸­å¤®èŠ¯ç‰‡ä¸ I/O èŠ¯ç‰‡åˆ†ç¦»ï¼Œä»¥ä¾¿å°†ä¸­å¤®èŠ¯ç‰‡è½»æ¾è¿ç§»åˆ°é«˜çº§å·¥è‰ºï¼ŒåŒæ—¶å°† I/O èŠ¯ç‰‡ä¿æŒåœ¨ä¿å®ˆèŠ‚ç‚¹ä¸­ï¼Œä»¥é™ä½äº§å“æ¼”è¿›çš„é£é™©/æˆæœ¬ï¼Œå®ç°é‡ç”¨å¹¶ç¼©çŸ­æ—¶é—´åœ¨æœåŠ¡å™¨ã€FPGAã€ç½‘ç»œäº¤æ¢æœºå’Œå…¶ä»–åº”ç”¨ç¨‹åºä¸­æŠ•æ”¾å¸‚åœºã€‚ Die-to-Die æ¥å£å’Œ SynopsysSynopsys ç»“åˆäº†å¹¿æ³›çš„ Die2Die 112G USR/XSR å’Œ HBI PHY IPã€æ§åˆ¶å™¨ IP å’Œä¸­ä»‹å±‚ä¸“ä¸šçŸ¥è¯†äº§å“ç»„åˆï¼Œæä¾›å…¨é¢çš„ die-to-die IP è§£å†³æ–¹æ¡ˆï¼Œä»¥æ”¯æŒèŠ¯ç‰‡æ‹†åˆ†ã€èŠ¯ç‰‡åˆ†è§£ã€è®¡ç®—æ‰©å±•å’Œèšåˆçš„åŠŸèƒ½ã€‚åŸºäº SerDes çš„ 112G USR/XSR PHY å’ŒåŸºäºå¹¶è¡Œçš„ 8G OpenHBI PHY å¯ç”¨äºé«˜çº§ FinFET å·¥è‰ºã€‚å¯é…ç½®æ§åˆ¶å™¨ä½¿ç”¨å…·æœ‰é‡æ”¾å’Œå¯é€‰ (FEC) åŠŸèƒ½çš„çº é”™æœºåˆ¶ï¼Œä»¥æœ€å¤§é™åº¦åœ°é™ä½å¯é èŠ¯ç‰‡åˆ°èŠ¯ç‰‡é“¾æ¥çš„è¯¯ç ç‡ã€‚å®ƒæ”¯æŒç”¨äºè¿è´¯å’Œéè¿è´¯æ•°æ®é€šä¿¡çš„ ArmÂ® ç‰¹å®šæ¥å£ã€‚ Q&amp;A PHY æ¶æ„ SerDes æ¶æ„ reticleLCD å‚æ©è†œç‰ˆå« Mask,Fab é‡Œæ©è†œç‰ˆå« reticleï¼Œä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - çŸ¥ä¹ åŸæ–‡å‚è€ƒWhat is a Die-to-Die Interface? â€“ How it Works | Synopsys","categories":[],"tags":[{"name":"Translation","slug":"Translation","permalink":"http://example.com/tags/Translation/"},{"name":"Die2Die","slug":"Die2Die","permalink":"http://example.com/tags/Die2Die/"}]},{"title":"Qt ç¼–è¯‘åçš„ç¨‹åºæ”¾åˆ°æŒ‡å®šç›®å½•ï¼Œå±è”½ qDebug è¾“å‡º","slug":"Qtç¼–è¯‘åçš„ç¨‹åºæ”¾åˆ°æŒ‡å®šç›®å½•ï¼Œå±è”½qDebugè¾“å‡º","date":"2022-03-18T05:50:35.000Z","updated":"2022-10-15T03:14:29.509Z","comments":true,"path":"2022/03/18/Qtç¼–è¯‘åçš„ç¨‹åºæ”¾åˆ°æŒ‡å®šç›®å½•ï¼Œå±è”½qDebugè¾“å‡º/","link":"","permalink":"http://example.com/2022/03/18/Qt%E7%BC%96%E8%AF%91%E5%90%8E%E7%9A%84%E7%A8%8B%E5%BA%8F%E6%94%BE%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%EF%BC%8C%E5%B1%8F%E8%94%BDqDebug%E8%BE%93%E5%87%BA/","excerpt":"","text":"å¯æ‰§è¡Œç¨‹åºæ”¾åˆ°æŒ‡å®šç›®å½•é»˜è®¤æƒ…å†µä¸‹ QtCreator ä¼šå°†ç¼–è¯‘é“¾æ¥åçš„å¯æ‰§è¡Œç¨‹åºä¸ä¸­é—´ç”Ÿæˆçš„æ–‡ä»¶é˜²ç›—build-***-æ–‡ä»¶ä¸­ï¼Œå¦‚ä½•èƒ½å°†å¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆåœ¨æŒ‡å®šç›®å½•ï¼Ÿ ä¿®æ”¹.pro: 12345CONFIG(debug ,debug|release)&#123; DESTDIR = ../debug&#125;else&#123; DESTDIR = ../release&#125; debugç‰ˆæœ¬æ”¾åœ¨../debugç›®å½•ä¸­ï¼Œreleaseç‰ˆæœ¬æ”¾åœ¨../releaseç›®å½•ä¸­ã€‚ å±è”½ qDebug è¾“å‡º12345CONFIG(debug ,debug|release)&#123; DEFINES -= QT_NO_DEBUG_OUTPUT&#125;else&#123; DEFINES += QT_NO_DEBUG_OUTPUT&#125; QT_NO_DEBUG_OUTPUTå³ä¸ºå±è”½ qDebug è¾“å‡ºçš„å®å®šä¹‰ï¼Œå¯ä»¥åœ¨debugç‰ˆæœ¬ä¸­ä¸å±è”½ qDebug è¾“å‡ºï¼Œreleaseç‰ˆæœ¬ä¸­å±è”½ qDebug è¾“å‡ºã€‚ å‚è€ƒQT å±è”½ qDebug()ã€qWarning() æ‰“å°ä¿¡æ¯_qq_35173114 çš„åšå®¢-CSDN åšå®¢_qwarningQT çš„ QDebug æ— æ³•è¾“å‡ºæ—¥å¿—_amwha çš„ä¸“æ  - ç¨‹åºå‘˜å®…åŸºåœ°_qdebug æ‰“å°ä¸å‡ºæ¥ - ç¨‹åºå‘˜å®…åŸºåœ°Qt Creator ä¸­çš„.pro æ–‡ä»¶çš„è¯¦è§£_hebbely çš„åšå®¢-CSDN åšå®¢_qt çš„ pro æ–‡ä»¶","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"QEMU æºç åˆ†æ-QOM","slug":"QEMUæºç åˆ†æ-QOM","date":"2022-03-09T08:02:19.000Z","updated":"2022-11-20T07:03:29.699Z","comments":true,"path":"2022/03/09/QEMUæºç åˆ†æ-QOM/","link":"","permalink":"http://example.com/2022/03/09/QEMU%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-QOM/","excerpt":"","text":"QOM ç®€ä»‹QOM(QEMU Object Model) æ˜¯ QEMU çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºæè¿°è™šæ‹Ÿæœºçš„ç»“æ„ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºçš„ CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œã€è¾“å…¥è¾“å‡ºè®¾å¤‡ç­‰ã€‚QEMU ä¸ºäº†æ–¹ä¾¿æ•´ä¸ªç³»ç»Ÿçš„æ„å»ºï¼Œå®ç°äº†è‡ªå·±çš„ä¸€å¥—çš„é¢å‘å¯¹è±¡æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ QOM(QEMU Object Model)ã€‚å®ƒèƒ½å¤Ÿæ–¹ä¾¿çš„è¡¨ç¤ºå„ä¸ªè®¾å¤‡ï¼ˆDeviceï¼‰ä¸æ€»çº¿ï¼ˆBusï¼‰ä¹‹é—´çš„å…³ç³»ã€‚ è¿™ä¸ªæ¨¡å‹ä¸»è¦åŒ…å«å››ä¸ªç»“æ„ä½“ï¼š Object: æ˜¯æ‰€æœ‰å¯¹è±¡çš„ åŸºç±» Base Object ObjectClass: æ˜¯æ‰€æœ‰ç±»å¯¹è±¡çš„åŸºç±» TypeInfoï¼šæ˜¯ç”¨æˆ·ç”¨æ¥å®šä¹‰ä¸€ä¸ª Type çš„å·¥å…·å‹çš„æ•°æ®ç»“æ„ TypeImplï¼šTypeInfo æŠ½è±¡æ•°æ®ç»“æ„ï¼ŒTypeInfo çš„å±æ€§ä¸ TypeImpl çš„å±æ€§å¯¹åº” åœ¨ QEMU é‡Œè¦åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡éœ€è¦å®Œæˆå››æ­¥ï¼š å°† TypeInfo æ³¨å†Œ TypeImpl å®ä¾‹åŒ– Classï¼ˆObjectClassï¼‰ å®ä¾‹åŒ– Object æ·»åŠ  Property QOM ä¸­çš„é¢å‘å¯¹è±¡ç»§æ‰¿åœ¨ QEMU ä¸­é€šè¿‡ TypeInfo æ¥å®šä¹‰ä¸€ä¸ªç±»ã€‚ ä¾‹å¦‚ x86_base_cpu_type_info å°±æ˜¯ä¸€ä¸ª classï¼Œ 12345static const TypeInfo x86_base_cpu_type_info = &#123; .name = X86_CPU_TYPE_NAME(&quot;base&quot;), .parent = TYPE_X86_CPU, .class_init = x86_cpu_base_class_init,&#125;; åˆ©ç”¨ç»“æ„ä½“åŒ…å«æ¥å®ç°ç»§æ‰¿ã€‚è¿™åº”è¯¥æ˜¯æ‰€æœ‰çš„è¯­è¨€å®ç°ç»§æ‰¿çš„æ–¹æ³•ï¼Œåœ¨ C++ ä¸­ï¼Œç»“æ„ä½“åŒ…å«çš„æ“ä½œè¢«è¯­è¨€å†…éƒ¨å®ç°äº†ï¼Œè€Œ C è¯­è¨€éœ€è¦è‡ªå·±å®ç°ã€‚ ä¾‹å¦‚ x86_cpu_type_info çš„ parent æ˜¯ cpu_type_info, ä»–ä»¬çš„ç»“æ„ä½“åˆ†åˆ«æ˜¯ X86CPU å’Œ CPUStateã€‚ 12345678910111213static const TypeInfo x86_cpu_type_info = &#123; .name = TYPE_X86_CPU, .parent = TYPE_CPU, // ... .instance_size = sizeof(X86CPU),&#125;;static const TypeInfo cpu_type_info = &#123; .name = TYPE_CPU, .parent = TYPE_DEVICE, // ... .instance_size = sizeof(CPUState),&#125;; åœ¨ X86CPU ä¸­åŒ…å«ä¸€ä¸ª CPUStateã€‚ 123456struct X86CPU &#123; /*&lt; private &gt;*/ CPUState parent_obj; /*&lt; public &gt;*/ CPUNegativeOffsetState neg; é™æ€æˆå‘˜é™æ€æˆå‘˜å˜é‡å¯ä»¥åœ¨ç±»çš„å¤šä¸ªå¯¹è±¡ä¸­è®¿é—®ï¼Œä½†æ˜¯è¦åœ¨ç±»å¤–å£°æ˜ã€‚ä¸åŒå¯¹è±¡è®¿é—®çš„å…¶å®æ˜¯åŒä¸€ä¸ªå®ä½“ï¼Œé™æ€æˆå‘˜å˜é‡è¢«å¤šä¸ªå¯¹è±¡å…±äº«ã€‚ 1234567891011static const TypeInfo x86_cpu_type_info = &#123; .name = TYPE_X86_CPU, .parent = TYPE_CPU, .instance_size = sizeof(X86CPU), .instance_init = x86_cpu_initfn, .instance_post_init = x86_cpu_post_initfn, .abstract = true, .class_size = sizeof(X86CPUClass), .class_init = x86_cpu_common_class_init,&#125;; å…¶ä¸­ X86CPU æè¿°çš„æ˜¯éé™æ€æˆå‘˜ï¼Œè€Œ X86CPUClass æè¿°çš„æ˜¯é™æ€çš„æˆå‘˜ã€‚ä¹Ÿå°±æ˜¯è¯´class_initåˆå§‹åŒ–é™æ€æˆå‘˜ï¼Œinstance_initåˆå§‹åŒ–éé™æ€æˆå‘˜ã€‚ é‚£ä¹ˆä½•æ—¶åˆå§‹åŒ–é™æ€æˆå‘˜å‘¢ï¼Ÿé¦–å…ˆå¾—å‘Šè¯‰ç³»ç»Ÿï¼Œå’±æœ‰class_initè¿™ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œç­‰éœ€è¦çš„æ—¶å€™éšæ—¶å¯ä»¥è°ƒç”¨å®ƒåˆå§‹åŒ–ï¼Œæ‰€æœ‰å…ˆè§£å†³å¦‚ä½•å°†è¿™ä¸ªåˆå§‹åŒ–å‡½æ•°æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼Ÿ åœ¨target/i386/cpu.cæœ€åä½¿ç”¨äº†type_initã€‚åœ¨qemu/include/qemu/module.hä¸­æœ‰ä¸€ä¸ªtype_initå®å®šä¹‰ï¼Œé™¤äº†type_initè¿˜æœ‰å…¶ä»–å®ï¼Œæ¯”å¦‚block_initï¼Œopts_initç­‰ã€‚æ¯ä¸ªå®éƒ½è¡¨ç¤ºä¸€ç±»moduleï¼Œé€šè¿‡module_initæ„é€ å‡ºæ¥ã€‚æˆ‘ä»¬å±•å¼€è¿™ä¸ªå®ï¼Œ 1234static void __attribute__((constructor))do_qemu_init_x86_cpu_register_types(void) &#123; register_module_init(x86_cpu_register_types, MODULE_INIT_QOM);&#125; é€šè¿‡ gcc æ‰©å±•å±æ€§__attribute__((constructor))å¯ä»¥è®© do_qemu_init_x86_cpu_register_types åœ¨è¿è¡Œ main å‡½æ•°ä¹‹å‰è¿è¡Œã€‚ register_module_init ä¼šè®© x86_cpu_register_types è¿™ä¸ªå‡½æ•°æŒ‚è½½åˆ° init_type_list[MODULE_INIT_QOM] è¿™ä¸ªé“¾è¡¨ä¸Šã€‚ åˆ°åº•ï¼Œæ‰€æœ‰çš„ TypeInfo é€šè¿‡ type_init éƒ½è¢«æ”¾åˆ° type_table ä¸Šäº†ï¼Œä¹‹åé€šè¿‡ Typeinfo çš„åç§°è°ƒç”¨ type_table_lookup è·å–åˆ° TypeImpl äº†ã€‚ åˆ°è¿™é‡Œï¼Œå°†TYPE_X86_CPUæ³¨å†Œè¿›ç±»ç³»ç»Ÿï¼ŒåŒ…æ‹¬å…¶åˆå§‹åŒ–å‡½æ•°ï¼Œè¿™éƒ¨åˆ†ä¹Ÿå°±æ˜¯ QEMU ä¸­ç±»å‹çš„æ„é€ ã€‚é‚£ä¹ˆä½•æ—¶è°ƒç”¨é™æ€æˆå‘˜åˆå§‹åŒ–å‡½æ•°å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ç±»å‹çš„åˆå§‹åŒ–ã€‚ é™æ€æˆå‘˜æ˜¯æ‰€æœ‰çš„å¯¹è±¡å…¬ç”¨çš„ï¼Œå…¶åˆå§‹åŒ–æ˜¾ç„¶è¦å‘ç”Ÿåœ¨æ‰€æœ‰çš„å¯¹è±¡åˆå§‹åŒ–ä¹‹å‰ã€‚ 12345678910main qemu_init select_machine object_class_get_list object_class_foreach g_hash_table_foreach object_class_foreach_tramp type_initialize type_initialize x86_cpu_common_class_init select_machine éœ€è¦è·å–æ‰€æœ‰çš„ TYPE_MACHINE çš„ class, å…¶é¦–å…ˆä¼šè°ƒç”¨æ‰€æœ‰çš„class_listï¼Œå…¶ä¼šéå† type_tableï¼Œéå†çš„è¿‡ç¨‹ä¸­ä¼šé¡ºå¸¦ type_initialize æ‰€æœ‰çš„ TypeImpl è¿›è€Œè°ƒç”¨çš„ class_initã€‚ è¯´å®Œç±»å‹çš„åˆå§‹åŒ–ï¼Œå†è®²ä¸€ä¸‹å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–éé™æ€æˆå‘˜ï¼Œä¹Ÿå°±æ˜¯instance_initåœ¨ä½•æ—¶è¢«è°ƒç”¨ï¼Ÿ å¯¹è±¡åˆå§‹åŒ–ï¼Œé€šè¿‡è°ƒç”¨ object_new æ¥å®ç°åˆå§‹åŒ–ã€‚ object_initialize_with_type åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ :Object::properties object_init_with_type å¦‚æœ object æœ‰ parentï¼Œé‚£ä¹ˆè°ƒç”¨ object_init_with_type é¦–å…ˆåˆå§‹åŒ– parent çš„ è°ƒç”¨TypeImpl::instance_init 1234567891011121314main qemu_init qmp_x_exit_preconfig qemu_init_board machine_run_board_init pc_init_v6_1 pc_init1 x86_cpus_init x86_cpu_new object_new object_new_with_type object_initialize_with_type object_init_with_type x86_cpu_initfn å¤šæ€å¤šæ€æ˜¯æŒ‡åŒä¸€æ“ä½œä½œç”¨äºä¸åŒçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è§£é‡Šï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœã€‚ä¸ºäº†å®ç°å¤šæ€ï¼ŒQOM å®ç°äº†ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œå°±æ˜¯åŠ¨æ€ç±»å‹è½¬æ¢ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸å…³çš„å‡½æ•°ï¼Œå°†ä¸€ä¸ªObjectçš„æŒ‡é’ˆåœ¨è¿è¡Œæ—¶è½¬æ¢ä¸ºå­ç±»å¯¹è±¡çš„æŒ‡é’ˆï¼Œå¯ä»¥å°†ä¸€ä¸ªObjectClassçš„æŒ‡é’ˆåœ¨è¿è¡Œæ—¶è½¬æ¢ä¸ºå­ç±»çš„æŒ‡é’ˆã€‚è¿™æ ·å°±å¯ä»¥è°ƒç”¨å­ç±»ä¸­å®šä¹‰çš„å‡½æ•°æŒ‡é’ˆæ¥å®Œæˆç›¸åº”çš„åŠŸèƒ½ã€‚ QEMU å®šä¹‰äº†ä¸€äº›åˆ—çš„å®å°æ¥è¿›è¡ŒåŠ¨æ€ç±»å‹è½¬æ¢ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145//include/qom/object.h/** * DECLARE_INSTANCE_CHECKER: * @InstanceType: instance struct name * @OBJ_NAME: the object name in uppercase with underscore separators * @TYPENAME: type name * * Direct usage of this macro should be avoided, and the complete * OBJECT_DECLARE_TYPE macro is recommended instead. * * This macro will provide the instance type cast functions for a * QOM type. */#define DECLARE_INSTANCE_CHECKER(InstanceType, OBJ_NAME, TYPENAME) \\ static inline G_GNUC_UNUSED InstanceType * \\ OBJ_NAME(const void *obj) \\ &#123; return OBJECT_CHECK(InstanceType, obj, TYPENAME); &#125;/** * DECLARE_CLASS_CHECKERS: * @ClassType: class struct name * @OBJ_NAME: the object name in uppercase with underscore separators * @TYPENAME: type name * * Direct usage of this macro should be avoided, and the complete * OBJECT_DECLARE_TYPE macro is recommended instead. * * This macro will provide the class type cast functions for a * QOM type. */#define DECLARE_CLASS_CHECKERS(ClassType, OBJ_NAME, TYPENAME) \\ static inline G_GNUC_UNUSED ClassType * \\ OBJ_NAME##_GET_CLASS(const void *obj) \\ &#123; return OBJECT_GET_CLASS(ClassType, obj, TYPENAME); &#125; \\ \\ static inline G_GNUC_UNUSED ClassType * \\ OBJ_NAME##_CLASS(const void *klass) \\ &#123; return OBJECT_CLASS_CHECK(ClassType, klass, TYPENAME); &#125;/** * DECLARE_OBJ_CHECKERS: * @InstanceType: instance struct name * @ClassType: class struct name * @OBJ_NAME: the object name in uppercase with underscore separators * @TYPENAME: type name * * Direct usage of this macro should be avoided, and the complete * OBJECT_DECLARE_TYPE macro is recommended instead. * * This macro will provide the three standard type cast functions for a * QOM type. */#define DECLARE_OBJ_CHECKERS(InstanceType, ClassType, OBJ_NAME, TYPENAME) \\ DECLARE_INSTANCE_CHECKER(InstanceType, OBJ_NAME, TYPENAME) \\ \\ DECLARE_CLASS_CHECKERS(ClassType, OBJ_NAME, TYPENAME)/** * OBJECT_DECLARE_TYPE: * @InstanceType: instance struct name * @ClassType: class struct name * @MODULE_OBJ_NAME: the object name in uppercase with underscore separators * * This macro is typically used in a header file, and will: * * - create the typedefs for the object and class structs * - register the type for use with g_autoptr * - provide three standard type cast functions * * The object struct and class struct need to be declared manually. */#define OBJECT_DECLARE_TYPE(InstanceType, ClassType, MODULE_OBJ_NAME) \\ typedef struct InstanceType InstanceType; \\ typedef struct ClassType ClassType; \\ \\ G_DEFINE_AUTOPTR_CLEANUP_FUNC(InstanceType, object_unref) \\ \\ DECLARE_OBJ_CHECKERS(InstanceType, ClassType, \\ MODULE_OBJ_NAME, TYPE_##MODULE_OBJ_NAME)/** * OBJECT: * @obj: A derivative of #Object * * Converts an object to a #Object. Since all objects are #Objects, * this function will always succeed. */#define OBJECT(obj) \\ ((Object *)(obj))/** * OBJECT_CLASS: * @class: A derivative of #ObjectClass. * * Converts a class to an #ObjectClass. Since all objects are #Objects, * this function will always succeed. */#define OBJECT_CLASS(class) \\ ((ObjectClass *)(class))/** * OBJECT_CHECK: * @type: The C type to use for the return value. * @obj: A derivative of @type to cast. * @name: The QOM typename of @type * * A type safe version of @object_dynamic_cast_assert. Typically each class * will define a macro based on this type to perform type safe dynamic_casts to * this object type. * * If an invalid object is passed to this function, a run time assert will be * generated. */#define OBJECT_CHECK(type, obj, name) \\ ((type *)object_dynamic_cast_assert(OBJECT(obj), (name), \\ __FILE__, __LINE__, __func__))/** * OBJECT_CLASS_CHECK: * @class_type: The C type to use for the return value. * @class: A derivative class of @class_type to cast. * @name: the QOM typename of @class_type. * * A type safe version of @object_class_dynamic_cast_assert. This macro is * typically wrapped by each type to perform type safe casts of a class to a * specific class type. */#define OBJECT_CLASS_CHECK(class_type, class, name) \\ ((class_type *)object_class_dynamic_cast_assert(OBJECT_CLASS(class), (name), \\ __FILE__, __LINE__, __func__))/** * OBJECT_GET_CLASS: * @class: The C type to use for the return value. * @obj: The object to obtain the class for. * @name: The QOM typename of @obj. * * This function will return a specific class for a given object. Its generally * used by each type to provide a type safe macro to get a specific class type * from an object. */#define OBJECT_GET_CLASS(class, obj, name) \\ OBJECT_CLASS_CHECK(class, object_get_class(OBJECT(obj)), name) ä»¥OBJECT_DECLARE_TYPE(X86CPU, X86CPUClass, X86_CPU)ä¸ºä¾‹ï¼Œå®å±•å¼€å¦‚ä¸‹ï¼š 123456789101112131415161718typedef struct X86CPU X86CPU;typedef struct X86CPUClass X86CPUClass;G_DEFINE_AUTOPTR_CLEANUP_FUNC(X86CPU, object_unref)static inline G_GNUC_UNUSED X86CPU *X86_CPU(const void *obj) &#123; return ((X86CPU *)object_dynamic_cast_assert( ((Object *)(obj)), (TYPE_X86_CPU), &quot;~/core/vn/docs/qemu/res/qom-macros.c&quot;, 64, __func__));&#125;static inline G_GNUC_UNUSED X86CPUClass *X86_CPU_GET_CLASS(const void *obj) &#123; return ((X86CPUClass *)object_class_dynamic_cast_assert( ((ObjectClass *)(object_get_class(((Object *)(obj))))), (TYPE_X86_CPU), &quot;~/core/vn/docs/qemu/res/qom-macros.c&quot;, 64, __func__));&#125;static inline G_GNUC_UNUSED X86CPUClass *X86_CPU_CLASS(const void *klass) &#123; return ((X86CPUClass *)object_class_dynamic_cast_assert( ((ObjectClass *)(klass)), (TYPE_X86_CPU), &quot;~/core/vn/docs/qemu/res/qom-macros.c&quot;, 64, __func__));&#125; OBJECT_DECLARE_TYPEé€šå¸¸åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œæ•ˆæœæ˜¯ï¼š åˆ›å»ºäº†X86CPUå’ŒX86CPUClassçš„typedef ç”¨G_DEFINE_AUTOPTR_CLEANUP_FUNCæ³¨å†Œç±»å‹ åˆ›å»ºäº†ä¸‰ä¸ªç±»å‹è½¬æ¢å‡½æ•° X86_CPU : å°†ä»»ä½•ä¸€ä¸ª object æŒ‡é’ˆ è½¬æ¢ä¸º X86CPUï¼ˆObject è½¬å­å¯¹è±¡ï¼‰ X86_CPU_GET_CLASS : æ ¹æ® object æŒ‡é’ˆè·å–åˆ° X86CPUClass X86_CPU_CLASS : æ ¹æ® ObjectClass æŒ‡é’ˆè½¬æ¢åˆ° X86CPUClassï¼ˆåŸºç±»è½¬å­ç±»ï¼‰ è¿™é‡Œçš„è½¬æ¢ä¾èµ–å†…å­˜å¸ƒå±€ï¼Œå­ç±»å‹çš„ç¬¬ä¸€ä¸ªæˆå‘˜æ€»æ˜¯åŸºç±»å‹ã€‚å­ç±»è½¬åŸºç±»å°±å¾ˆå®¹æ˜“ï¼Œåªéœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢å°±å¯ä»¥å®ç°ã€‚ å‚è€ƒQEMU ä¸­çš„é¢å‘å¯¹è±¡ : QOM | Deep Dark Fantasyæµ…è°ˆ QEMU çš„å¯¹è±¡ç³»ç»Ÿ - ç®€ä¹¦","categories":[{"name":"QEMU æºç åˆ†æ","slug":"QEMU-æºç åˆ†æ","permalink":"http://example.com/categories/QEMU-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"RGB ä¸ YUV é¢œè‰²ç©ºé—´","slug":"RGBä¸YUVé¢œè‰²ç©ºé—´","date":"2022-03-01T08:00:03.000Z","updated":"2022-10-15T03:14:29.519Z","comments":true,"path":"2022/03/01/RGBä¸YUVé¢œè‰²ç©ºé—´/","link":"","permalink":"http://example.com/2022/03/01/RGB%E4%B8%8EYUV%E9%A2%9C%E8%89%B2%E7%A9%BA%E9%97%B4/","excerpt":"","text":"åŸºç¡€æ¦‚å¿µRGB å’Œ YUV éƒ½å±äºä¸€ç§é¢œè‰²ç¼–ç æ–¹å¼ï¼Œæˆ–è€…è¯´é¢œè‰²ç©ºé—´ã€‚ RGB è‰²å½©æ¨¡å¼æ˜¯å·¥ä¸šç•Œçš„ä¸€ç§é¢œè‰²æ ‡å‡†ï¼Œæ˜¯é€šè¿‡å¯¹çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé¢œè‰²é€šé“çš„å˜åŒ–ä»¥åŠå®ƒä»¬ç›¸äº’ä¹‹é—´çš„å åŠ æ¥å¾—åˆ°å„å¼å„æ ·çš„é¢œè‰²çš„ï¼ŒRGB å³æ˜¯ä»£è¡¨çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé€šé“çš„é¢œè‰²ï¼Œè¿™ä¸ªæ ‡å‡†å‡ ä¹åŒ…æ‹¬äº†äººç±»è§†åŠ›æ‰€èƒ½æ„ŸçŸ¥çš„æ‰€æœ‰é¢œè‰²ï¼Œæ˜¯ç›®å‰è¿ç”¨æœ€å¹¿çš„é¢œè‰²ç³»ç»Ÿä¹‹ä¸€ã€‚ åœ¨ YUV ç©ºé—´ä¸­ï¼ŒY ä»£è¡¨äº®åº¦ï¼Œå…¶å® Y å°±æ˜¯å›¾åƒçš„ç°åº¦å€¼ï¼›UV ä»£è¡¨è‰²å·®ï¼ŒU å’Œ V æ˜¯æ„æˆå½©è‰²çš„ä¸¤ä¸ªåˆ†é‡ã€‚åœ¨ç°ä»£å½©è‰²ç”µè§†ç³»ç»Ÿä¸­ï¼Œé€šå¸¸é‡‡ç”¨ä¸‰ç®¡å½©è‰²æ‘„å½±æœºæˆ–å½©è‰² CCD æ‘„å½±æœºè¿›è¡Œå–åƒï¼Œç„¶åæŠŠå–å¾—çš„å½©è‰²å›¾åƒä¿¡å·ç»åˆ†è‰²ã€åˆ†åˆ«æ”¾å¤§æ ¡æ­£åå¾—åˆ° RGBï¼Œå†ç»è¿‡çŸ©é˜µå˜æ¢ç”µè·¯å¾—åˆ°äº®åº¦ä¿¡å· Y å’Œä¸¤ä¸ªè‰²å·®ä¿¡å· Bâ€“Y(å³ U)ã€Râ€“Y(å³ V)ï¼Œæœ€åå‘é€ç«¯å°†äº®åº¦å’Œè‰²å·®ä¸‰ä¸ªä¿¡å·åˆ†åˆ«è¿›è¡Œç¼–ç ï¼Œç”¨åŒä¸€ä¿¡é“å‘é€å‡ºå»ã€‚è¿™ç§è‰²å½©çš„è¡¨ç¤ºæ–¹æ³•å°±æ˜¯æ‰€è°“çš„ YUV è‰²å½©ç©ºé—´è¡¨ç¤ºã€‚ è§£æRGB æ ¼å¼RGB16RGB16 æ•°æ®æ ¼å¼ä¸»è¦æœ‰äºŒç§ï¼šRGB565 å’Œ RGB555ã€‚ RGB565ï¼Œæ¯ä¸ªåƒç´ ç”¨ 16 æ¯”ç‰¹ä½è¡¨ç¤ºï¼Œå  2 ä¸ªå­—èŠ‚ï¼ŒRGB åˆ†é‡åˆ†åˆ«ä½¿ç”¨ 5 ä½ã€6 ä½ã€5 ä½ã€‚ 123456//è·å–é«˜å­—èŠ‚çš„5ä¸ªbitR = color &amp; 0xF800;//è·å–ä¸­é—´6ä¸ªbitG = color &amp; 0x07E0;//è·å–ä½å­—èŠ‚5ä¸ªbitB = color &amp; 0x001F; RGB555ï¼Œæ¯ä¸ªåƒç´ ç”¨ 16 æ¯”ç‰¹ä½è¡¨ç¤ºï¼Œå  2 ä¸ªå­—èŠ‚ï¼ŒRGB åˆ†é‡éƒ½ä½¿ç”¨ 5 ä½ (æœ€é«˜ä½ä¸ç”¨)ã€‚ 123456//è·å–é«˜å­—èŠ‚çš„5ä¸ªbitR = color &amp; 0x7C00;//è·å–ä¸­é—´5ä¸ªbitG = color &amp; 0x03E0;//è·å–ä½å­—èŠ‚5ä¸ªbitB = color &amp; 0x001F; RGB24RGB24 å›¾åƒæ¯ä¸ªåƒç´ ç”¨ 24 æ¯”ç‰¹ä½è¡¨ç¤ºï¼Œå  3 ä¸ªå­—èŠ‚ï¼Œæ³¨æ„ï¼šåœ¨å†…å­˜ä¸­ RGB å„åˆ†é‡çš„æ’åˆ—é¡ºåºä¸ºï¼šBGR BGR BGRã€‚ RGB32RGB32 å›¾åƒæ¯ä¸ªåƒç´ ç”¨ 32 æ¯”ç‰¹ä½è¡¨ç¤ºï¼Œå  4 ä¸ªå­—èŠ‚ï¼ŒRï¼ŒGï¼ŒB åˆ†é‡åˆ†åˆ«ç”¨ 8 ä¸ª bit è¡¨ç¤ºï¼Œå­˜å‚¨é¡ºåºä¸º Bï¼ŒGï¼ŒRï¼Œæœ€å 8 ä¸ªå­—èŠ‚ä¿ç•™ã€‚æ³¨æ„ï¼šåœ¨å†…å­˜ä¸­ RGB å„åˆ†é‡çš„æ’åˆ—é¡ºåºä¸ºï¼šBGRA BGRA BGRA â€¦â€¦ã€‚ æœ¬è´¨å°±æ˜¯å¸¦ alpha é€šé“çš„ RGB24ï¼Œä¸ RGB32 çš„åŒºåˆ«åœ¨ä¸ï¼Œä¿ç•™çš„ 8 ä¸ª bit ç”¨æ¥è¡¨ç¤ºé€æ˜ï¼Œä¹Ÿå°±æ˜¯ alpha çš„å€¼ã€‚ 1234R = color &amp; 0x0000FF00;G = color &amp; 0x00FF0000;B = color &amp; 0xFF000000;A = color &amp; 0x000000FF; YUV é‡‡æ · YUV444ï¼šä¸€ä¸ªåƒç´ å°±æœ‰ YUV ä¸‰ä¸ªå€¼ï¼Œå’Œ RGB ç±»ä¼¼ï¼›ä¸€ä¸ª YUV å  8+8+8 = 24bits 3 ä¸ªå­—èŠ‚ã€‚ YUV422ï¼šç¬¬ä¸€ä¸ªåƒç´ æœ‰ YUV ä¸‰ä¸ªå€¼ï¼Œç¬¬äºŒä¸ªåƒç´ åªæœ‰ Yï¼Œä¸å‰ä¸€ä¸ªåƒç´ å…±ç”¨ UVï¼›ä¸€ä¸ª YUV å  8+4+4 = 16bits 2 ä¸ªå­—èŠ‚ã€‚ YUV420ï¼šä¸Šä¸‹å››ä¸ªåƒç´ å…±ç”¨ä¸€ä¸ª UVã€‚ä¸€ä¸ª YUV å  8+2+2 = 12bits 1.5 ä¸ªå­—èŠ‚ã€‚ è½¬æ¢YUV2RGB$$R = Y + 1.403 \\times (V-128)\\G=Y-0.343 \\times (U-128) - 0.714 \\times (V-128)\\B=Y + 1.770 \\times (U-128)$$ RGB2YUV$$Y = 0.299 \\times R + 0.587 \\times G + 0.114 \\times B\\U = -0.169 \\times R - 0.331 \\times G + 0.500 \\times B + 128\\V = 0.500 \\times R - 0.419 \\times G - 0.081 \\times B + 128\\$$ æµ®ç‚¹å‹è¿ç®—æ¯”è¾ƒè€—æ—¶ï¼Œå°†æ‰€æœ‰è¿ç®—æ¢æˆä½è¿ç®—ï¼Œæé«˜æ•ˆç‡ã€‚å…·ä½“æ¨å€’è¿‡ç¨‹è§è‰²å½©è½¬æ¢ç³»åˆ—ä¹‹ RGB æ ¼å¼ä¸ YUV æ ¼å¼äº’è½¬åŸç†åŠå®ç°_å°æ­¦çš„åšå®¢-CSDN åšå®¢_rgb yuv 123Y= ((R &lt;&lt; 6) + (R &lt;&lt; 3) + (R &lt;&lt; 2) + R + (G &lt;&lt; 7) + (G &lt;&lt; 4) + (G &lt;&lt; 2) + (G &lt;&lt; 1) + (B &lt;&lt; 4) + (B &lt;&lt; 3) + (B &lt;&lt; 2) + B) &gt;&gt; 8U= (-((R &lt;&lt; 5) + (R &lt;&lt; 3) + (R &lt;&lt; 1)+ R) - ((G &lt;&lt; 6) + (G &lt;&lt; 4) + (G &lt;&lt; 2)+G) + (B &lt;&lt; 7) + 32768) &gt;&gt; 8V= ((R &lt;&lt; 7) - ((G &lt;&lt; 6) + (G &lt;&lt; 5) + (G &lt;&lt; 3) + (G &lt;&lt; 3) + G) - ((B &lt;&lt; 4) + (B &lt;&lt; 2) + B) + 32768 )&gt;&gt; 8 å‚è€ƒRGB å’Œ YUV - ç®€ä¹¦é¢œè‰²ç©ºé—´ YUV ç®€ä»‹_ç½‘ç»œèµ„æºæ˜¯æ— é™çš„-CSDN åšå®¢_yuv é¢œè‰²ç©ºé—´å›¾è§£ RGB565ã€RGB555ã€RGB16ã€RGB24ã€RGB32ã€ARGB32 ç­‰æ ¼å¼çš„åŒºåˆ«_handy å‘¨-CSDN åšå®¢_rgb565å›¾è§£ YU12ã€I420ã€YV12ã€NV12ã€NV21ã€YUV420Pã€YUV420SPã€YUV422Pã€YUV444P çš„åŒºåˆ«_handy å‘¨-CSDN åšå®¢_yv12","categories":[],"tags":[]},{"title":"è®¡ç®—æœºç»„æˆåŸç†-æŒ‡ä»¤å’Œè¿ç®—","slug":"è®¡ç®—æœºç»„æˆåŸç†-æŒ‡ä»¤å’Œè¿ç®—","date":"2022-02-28T13:28:56.000Z","updated":"2022-10-15T03:14:29.878Z","comments":true,"path":"2022/02/28/è®¡ç®—æœºç»„æˆåŸç†-æŒ‡ä»¤å’Œè¿ç®—/","link":"","permalink":"http://example.com/2022/02/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E6%8C%87%E4%BB%A4%E5%92%8C%E8%BF%90%E7%AE%97/","excerpt":"","text":"è®¡ç®—æœºæŒ‡ä»¤ä¸Šä¸–çºª 60 å¹´ä»£æ™šæœŸæˆ– 70 å¹´ä»£åˆæœŸï¼Œç¨‹åºéœ€è¦å…ˆå†™åœ¨çº¸ä¸Šï¼Œç„¶åè½¬æˆäºŒè¿›åˆ¶æœºå™¨ç ï¼Œå†æ‰“åˆ°æ‰“å­”å¡ä¸Šï¼ˆ0 è¡¨ç¤ºä¸æ‰“å­”ï¼Œ1 è¡¨ç¤ºæ‰“å­”ï¼‰ï¼Œé€å…¥ç‰¹æ®Šçš„è®¡ç®—æœºä¸­æ‰§è¡Œã€‚ ä»ç¡¬ä»¶çš„è§’åº¦æ¥çœ‹ï¼ŒCPU å°±æ˜¯ä¸€ä¸ªè¶…å¤§è§„æ¨¡é›†æˆç”µè·¯ï¼Œé€šè¿‡ç”µè·¯å®ç°äº†åŠ æ³•ã€ä¹˜æ³•ä¹ƒè‡³å„ç§å„æ ·çš„å¤„ç†é€»è¾‘ã€‚ ä»è½¯ä»¶çš„è§’åº¦æ¥çœ‹ï¼ŒCPU å°±æ˜¯ä¸€ä¸ªæ‰§è¡Œå„ç§è®¡ç®—æœºæŒ‡ä»¤ï¼ˆInstruction Codeï¼‰çš„é€»è¾‘æœºå™¨ã€‚è¿™é‡Œçš„è®¡ç®—æœºæŒ‡ä»¤ï¼Œå°±å¥½æ¯”ä¸€é—¨ CPU èƒ½å¤Ÿå¬å¾—æ‡‚çš„è¯­è¨€ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒå«ä½œæœºå™¨è¯­è¨€ï¼ˆMachine Languageï¼‰ã€‚ ä¸åŒçš„ CPU èƒ½å¤Ÿå¬æ‡‚çš„è¯­è¨€ä¸å¤ªä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯ CPU æ”¯æŒçš„è¯­è¨€ä¸ä¸€æ ·ï¼Œè¿™é‡Œçš„è¯­è¨€å«æŒ‡ä»¤é›†ï¼ˆInstruction Setï¼‰ã€‚ ä¸€ä¸ªè®¡ç®—æœºç¨‹åºç”±æˆåƒä¸Šä¸‡æ¡æŒ‡ä»¤ç»„æˆçš„ã€‚ä½†æ˜¯ CPU é‡Œä¸èƒ½ä¸€ç›´æ”¾ç€æ‰€æœ‰æŒ‡ä»¤ï¼Œæ‰€ä»¥è®¡ç®—æœºç¨‹åºå¹³æ—¶æ˜¯å­˜å‚¨åœ¨å­˜å‚¨å™¨ä¸­çš„ã€‚è¿™ç§ç¨‹åºæŒ‡ä»¤å­˜å‚¨åœ¨å­˜å‚¨å™¨é‡Œé¢çš„è®¡ç®—æœºï¼Œæˆ‘ä»¬å°±å«ä½œå­˜å‚¨ç¨‹åºå‹è®¡ç®—æœºï¼ˆStored-program Computerï¼‰ã€‚ äº†è§£äº†è®¡ç®—æœºæŒ‡ä»¤å’Œè®¡ç®—æœºæŒ‡ä»¤é›†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¹³æ—¶ç¼–å†™çš„ä»£ç ï¼Œåˆ°åº•æ˜¯æ€ä¹ˆå˜æˆä¸€æ¡æ¡è®¡ç®—æœºæŒ‡ä»¤ï¼Œæœ€åè¢« CPU æ‰§è¡Œçš„å‘¢ï¼Ÿæˆ‘ä»¬æ‹¿ä¸€å°æ®µçœŸå®çš„ C è¯­è¨€ç¨‹åºæ¥çœ‹çœ‹ã€‚ 1234567// test.cint main()&#123; int a = 1; int b = 2; a = a + b;&#125; é€šè¿‡ç¼–è¯‘å™¨ï¼Œå¯ä»¥å°†ä¸Šè¿°ä»£ç ç¼–è¯‘æˆæ±‡ç¼–ä»£ç ï¼Œå†é€šè¿‡æ±‡ç¼–å™¨ï¼Œå°†æ±‡ç¼–ä»£ç ç¼–è¯‘æˆæœºå™¨ç ï¼Œæœ€åé€šè¿‡ CPU æ‰§è¡Œã€‚ åœ¨ä¸€ä¸ª Linux æ“ä½œç³»ç»Ÿä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨ gcc å’Œ objdump è¿™æ ·ä¸¤æ¡å‘½ä»¤ï¼ŒæŠŠå¯¹åº”çš„æ±‡ç¼–ä»£ç å’Œæœºå™¨ç éƒ½æ‰“å°å‡ºæ¥ã€‚ 1234567891011121314151617181920$ gcc -g -c test.c$ objdump -d -M intel -S test.otest.o: file format elf64-x86-64Disassembly of section .text:0000000000000000 &lt;main&gt;:int main()&#123; 0: 55 push rbp 1: 48 89 e5 mov rbp,rsp int a = 1; 4: c7 45 fc 01 00 00 00 mov DWORD PTR [rbp-0x4],0x1 int b = 2; b: c7 45 f8 02 00 00 00 mov DWORD PTR [rbp-0x8],0x2 a = a + b; 12: 8b 45 f8 mov eax,DWORD PTR [rbp-0x8] 15: 01 45 fc add DWORD PTR [rbp-0x4],eax&#125; 18: 5d pop rbp 19: c3 ret å·¦ä¾§æœ‰ä¸€å †æ•°å­—ï¼Œè¿™äº›å°±æ˜¯ä¸€æ¡æ¡æœºå™¨ç ï¼›å³è¾¹æœ‰ä¸€ç³»åˆ—çš„pushã€movã€addã€pop ç­‰ï¼Œè¿™äº›å°±æ˜¯å¯¹åº”çš„æ±‡ç¼–ä»£ç ã€‚ äº†è§£äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬æ”¾å¤§å±€éƒ¨ï¼Œæ¥çœ‹çœ‹è¿™ä¸€è¡Œè¡Œçš„æ±‡ç¼–ä»£ç å’Œæœºå™¨æŒ‡ä»¤ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚ å¸¸è§çš„æŒ‡ä»¤å¯ä»¥åˆ†æˆäº”å¤§ç±»ã€‚ ç¬¬ä¸€ç±»æ˜¯ç®—æœ¯ç±»æŒ‡ä»¤ã€‚æˆ‘ä»¬çš„åŠ å‡ä¹˜é™¤ï¼Œåœ¨ CPU å±‚é¢ï¼Œéƒ½ä¼šå˜æˆä¸€æ¡æ¡ç®—æœ¯ç±»æŒ‡ä»¤ã€‚ ç¬¬äºŒç±»æ˜¯æ•°æ®ä¼ è¾“ç±»æŒ‡ä»¤ã€‚ç»™å˜é‡èµ‹å€¼ã€åœ¨å†…å­˜é‡Œè¯»å†™æ•°æ®ï¼Œç”¨çš„éƒ½æ˜¯æ•°æ®ä¼ è¾“ç±»æŒ‡ä»¤ã€‚ ç¬¬ä¸‰ç±»æ˜¯é€»è¾‘ç±»æŒ‡ä»¤ã€‚é€»è¾‘ä¸Šçš„ä¸æˆ–éï¼Œéƒ½æ˜¯è¿™ä¸€ç±»æŒ‡ä»¤ã€‚ ç¬¬å››ç±»æ˜¯æ¡ä»¶åˆ†æ”¯ç±»æŒ‡ä»¤ã€‚æ—¥å¸¸æˆ‘ä»¬å†™çš„â€œif/elseâ€ï¼Œå…¶å®éƒ½æ˜¯æ¡ä»¶åˆ†æ”¯ç±»æŒ‡ä»¤ã€‚ æœ€åä¸€ç±»æ˜¯æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚å†™ä¸€äº›å¤§ä¸€ç‚¹çš„ç¨‹åºï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å†™ä¸€äº›å‡½æ•°æˆ–è€…æ–¹æ³•ã€‚åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå…¶å®å°±æ˜¯å‘èµ·äº†ä¸€ä¸ªæ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚ æŒ‡ä»¤è·³è½¬CPU å¦‚ä½•æ‰§è¡ŒæŒ‡ä»¤çš„ä»£ç ç»è¿‡è½¯ä»¶å±‚é¢çš„ç¼–è¯‘åå°±æ˜¯ä¸€æ¡æ¡äºŒè¿›åˆ¶æŒ‡ä»¤ï¼ŒæŒ‡ä»¤äº¤ç”± CPU ä¸­å‡ ç™¾äº¿ä¸ªæ™¶ä½“ç®¡å»æ‰§è¡Œã€‚æˆ‘ä»¬å…ˆä¸ç®¡å‡ ç™¾äº¿çš„æ™¶ä½“ç®¡çš„èƒŒåæ˜¯æ€ä¹ˆé€šè¿‡ç”µè·¯è¿è½¬èµ·æ¥çš„ï¼Œé€»è¾‘ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼ŒCPU å…¶å®å°±æ˜¯ç”±ä¸€å †å¯„å­˜å™¨ç»„æˆçš„ã€‚è€Œå¯„å­˜å™¨å°±æ˜¯ CPU å†…éƒ¨ï¼Œç”±å¤šä¸ªè§¦å‘å™¨ï¼ˆFlip-Flopï¼‰æˆ–è€…é”å­˜å™¨ï¼ˆLatchesï¼‰ç»„æˆçš„ç®€å•ç”µè·¯ã€‚è§¦å‘å™¨å’Œé”å­˜å™¨ï¼Œå…¶å®å°±æ˜¯ä¸¤ç§ä¸åŒåŸç†çš„æ•°å­—ç”µè·¯ç»„æˆçš„é€»è¾‘é—¨ã€‚ N ä¸ªè§¦å‘å™¨æˆ–è€…é”å­˜å™¨ï¼Œå°±å¯ä»¥ç»„æˆä¸€ä¸ªNä½ï¼ˆBitï¼‰çš„å¯„å­˜å™¨ï¼Œèƒ½å¤Ÿä¿å­˜ Nä½çš„æ•°æ®ã€‚æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬ç”¨çš„64ä½ IntelæœåŠ¡å™¨ï¼Œå¯„å­˜å™¨å°±æ˜¯64 ä½çš„ã€‚ ä¸€ä¸ª CPU é‡Œé¢ä¼šæœ‰å¾ˆå¤šç§ä¸åŒåŠŸèƒ½çš„å¯„å­˜å™¨ã€‚è¿™é‡Œä»‹ç»ä¸‰ç§æ¯”è¾ƒç‰¹æ®Šçš„ã€‚ PC å¯„å­˜å™¨ï¼ˆProgram Counter Registerï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿå«æŒ‡ä»¤åœ°å€å¯„å­˜å™¨ï¼ˆInstruction Address Registerï¼‰ã€‚é¡¾åæ€ä¹‰ï¼Œå®ƒå°±æ˜¯ç”¨æ¥å­˜æ”¾ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„è®¡ç®—æœºæŒ‡ä»¤çš„å†…å­˜åœ°å€ã€‚ æŒ‡ä»¤å¯„å­˜å™¨ï¼ˆInstruction Registerï¼‰ï¼Œç”¨æ¥å­˜æ”¾å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ã€‚ æ¡ä»¶ç å¯„å­˜å™¨ï¼ˆStatus Registerï¼‰ï¼Œç”¨é‡Œé¢çš„ä¸€ä¸ªä¸€ä¸ªæ ‡è®°ä½ï¼ˆFlagï¼‰ï¼Œå­˜æ”¾ CPU è¿›è¡Œç®—æœ¯æˆ–è€…é€»è¾‘è®¡ç®—çš„ç»“æœã€‚ é™¤æ­¤ä¹‹å¤–è¿˜æœ‰æ•´æ•°å¯„å­˜å™¨ã€æµ®ç‚¹æ•°å¯„å­˜å™¨ã€å‘é‡å¯„å­˜å™¨å’Œåœ°å€å¯„å­˜å™¨ç­‰ç­‰ã€‚æœ‰äº›å¯„å­˜å™¨æ—¢å¯ä»¥å­˜æ”¾æ•°æ®ï¼Œåˆèƒ½å­˜æ”¾åœ°å€ï¼Œæˆ‘ä»¬å°±å«å®ƒé€šç”¨å¯„å­˜å™¨ã€‚ å®é™…ä¸Šï¼Œä¸€ä¸ªç¨‹åºæ‰§è¡Œçš„æ—¶å€™ï¼ŒCPU ä¼šæ ¹æ® PC å¯„å­˜å™¨é‡Œçš„åœ°å€ï¼Œä»å†…å­˜é‡Œé¢æŠŠéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤è¯»å–åˆ°æŒ‡ä»¤å¯„å­˜å™¨é‡Œé¢æ‰§è¡Œï¼Œç„¶åæ ¹æ®æŒ‡ä»¤é•¿åº¦è‡ªå¢ï¼Œå¼€å§‹é¡ºåºè¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªç¨‹åºçš„ä¸€æ¡æ¡æŒ‡ä»¤ï¼Œåœ¨å†…å­˜é‡Œé¢æ˜¯è¿ç»­ä¿å­˜çš„ï¼Œä¹Ÿä¼šä¸€æ¡æ¡é¡ºåºåŠ è½½ã€‚ è€Œæœ‰äº›ç‰¹æ®ŠæŒ‡ä»¤ï¼Œæ¯”å¦‚ä¸Šä¸€è®²æˆ‘ä»¬è®²åˆ° J ç±»æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯è·³è½¬æŒ‡ä»¤ï¼Œä¼šä¿®æ”¹ PC å¯„å­˜å™¨é‡Œé¢çš„åœ°å€å€¼ã€‚ ä» ifâ€¦else æ¥çœ‹ç¨‹åºçš„æ‰§è¡Œå’Œè·³è½¬é¦–å…ˆçœ‹å¦‚ä¸‹çš„ä¾‹ç¨‹ï¼Œ 123456789101112131415// test.c#include &lt;time.h&gt;#include &lt;stdlib.h&gt; int main()&#123; srand(time(NULL)); int r = rand() % 2; int a = 10; if (r == 0) &#123; a = 1; &#125; else &#123; a = 2; &#125; 12gcc -g -c test.cobjdump -d -M intel -S test.o ç¼–è¯‘åæ‰“å°å‡ºæ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314if (r == 0) 3b: 83 7d fc 00 cmp DWORD PTR [rbp-0x4],0x0 3f: 75 09 jne 4a &lt;main+0x4a&gt; &#123; a = 1; 41: c7 45 f8 01 00 00 00 mov DWORD PTR [rbp-0x8],0x1 48: eb 07 jmp 51 &lt;main+0x51&gt; &#125; else &#123; a = 2; 4a: c7 45 f8 02 00 00 00 mov DWORD PTR [rbp-0x8],0x2 51: b8 00 00 00 00 mov eax,0x0 &#125; å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå¯¹äº r == 0çš„æ¡ä»¶åˆ¤æ–­ï¼Œè¢«ç¼–è¯‘æˆäº† cmp å’Œ jne è¿™ä¸¤æ¡æŒ‡ä»¤ã€‚ cmp æŒ‡ä»¤æ¯”è¾ƒäº†å‰åä¸¤ä¸ªæ“ä½œæ•°çš„å€¼ï¼Œè¿™é‡Œçš„DWORD PTR ä»£è¡¨æ“ä½œçš„æ•°æ®ç±»å‹æ˜¯ 32ä½çš„æ•´æ•°ï¼Œè€Œ [rbp-0x4] åˆ™æ˜¯ä¸€ä¸ªå¯„å­˜å™¨çš„åœ°å€ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€ä¸ªæ“ä½œæ•°å°±æ˜¯ä»å¯„å­˜å™¨é‡Œæ‹¿åˆ°çš„å˜é‡ r çš„å€¼ã€‚ç¬¬äºŒä¸ªæ“ä½œæ•° 0x0 å°±æ˜¯æˆ‘ä»¬è®¾å®šçš„å¸¸é‡0çš„ 16 è¿›åˆ¶è¡¨ç¤ºã€‚cmp æŒ‡ä»¤çš„æ¯”è¾ƒç»“æœï¼Œä¼šå­˜å…¥åˆ°æ¡ä»¶ç å¯„å­˜å™¨å½“ä¸­å»ã€‚ åœ¨è¿™é‡Œï¼Œå¦‚æœæ¯”è¾ƒçš„ç»“æœæ˜¯ Trueï¼Œä¹Ÿå°±æ˜¯ r == 0ï¼Œå°±æŠŠé›¶æ ‡å¿—æ¡ä»¶ç ï¼ˆå¯¹åº”çš„æ¡ä»¶ç æ˜¯ ZFï¼ŒZero Flagï¼‰è®¾ç½®ä¸º 1ã€‚é™¤äº†é›¶æ ‡å¿—ä¹‹å¤–ï¼ŒIntel çš„ CPU ä¸‹è¿˜æœ‰è¿›ä½æ ‡å¿—ï¼ˆCFï¼ŒCarry Flagï¼‰ã€ç¬¦å·æ ‡å¿—ï¼ˆSFï¼ŒSign Flagï¼‰ä»¥åŠæº¢å‡ºæ ‡å¿—ï¼ˆOFï¼ŒOverflow Flagï¼‰ï¼Œç”¨åœ¨ä¸åŒçš„åˆ¤æ–­æ¡ä»¶ä¸‹ã€‚ cmp æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åï¼ŒPC å¯„å­˜å™¨ä¼šè‡ªåŠ¨è‡ªå¢ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€æ¡ jne çš„æŒ‡ä»¤ã€‚ è·Ÿç€çš„ jne æŒ‡ä»¤ï¼Œæ˜¯ jump if not equal çš„æ„æ€ï¼Œå®ƒä¼šæŸ¥çœ‹å¯¹åº”çš„é›¶æ ‡å¿—ä½ã€‚å¦‚æœä¸º0ï¼Œä¼šè·³è½¬åˆ°åé¢è·Ÿç€çš„æ“ä½œæ•° 4a çš„ä½ç½®ã€‚è¿™ä¸ª 4aï¼Œå¯¹åº”è¿™é‡Œæ±‡ç¼–ä»£ç çš„è¡Œå·ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è®¾ç½®çš„ else æ¡ä»¶é‡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚å½“è·³è½¬å‘ç”Ÿçš„æ—¶å€™ï¼ŒPC å¯„å­˜å™¨å°±ä¸å†æ˜¯è‡ªå¢å˜æˆä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œè€Œæ˜¯è¢«ç›´æ¥è®¾ç½®æˆè¿™é‡Œçš„ 4a è¿™ä¸ªåœ°å€ã€‚è¿™ä¸ªæ—¶å€™ï¼ŒCPU å†æŠŠ 4a åœ°å€é‡Œçš„æŒ‡ä»¤åŠ è½½åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­æ¥æ‰§è¡Œã€‚ è·³è½¬åˆ°æ‰§è¡Œåœ°å€ä¸º 4a çš„æŒ‡ä»¤ï¼Œå®é™…æ˜¯ä¸€æ¡ mov æŒ‡ä»¤ï¼Œç¬¬ä¸€ä¸ªæ“ä½œæ•°å’Œå‰é¢çš„ cmp æŒ‡ä»¤ä¸€æ ·ï¼Œæ˜¯å¦ä¸€ä¸ª 32 ä½æ•´å‹çš„å¯„å­˜å™¨åœ°å€ï¼Œä»¥åŠå¯¹åº”çš„ 2 çš„16 è¿›åˆ¶å€¼ 0x2ã€‚mov æŒ‡ä»¤æŠŠ 2 è®¾ç½®åˆ°å¯¹åº”çš„å¯„å­˜å™¨é‡Œå»ï¼Œç›¸å½“äºä¸€ä¸ªèµ‹å€¼æ“ä½œã€‚ç„¶åï¼ŒPCå¯„å­˜å™¨é‡Œçš„å€¼ç»§ç»­è‡ªå¢ï¼Œæ‰§è¡Œä¸‹ä¸€æ¡ mov æŒ‡ä»¤ã€‚ è¿™æ¡ mov æŒ‡ä»¤çš„ç¬¬ä¸€ä¸ªæ“ä½œæ•°eaxï¼Œä»£è¡¨ç´¯åŠ å¯„å­˜å™¨ï¼Œç¬¬äºŒä¸ªæ“ä½œæ•°0x0åˆ™æ˜¯ 16 è¿›åˆ¶çš„0çš„è¡¨ç¤ºã€‚è¿™æ¡æŒ‡ä»¤å…¶å®æ²¡æœ‰å®é™…çš„ä½œç”¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸€ä¸ªå ä½ç¬¦ã€‚æˆ‘ä»¬å›è¿‡å¤´å»çœ‹å‰é¢çš„ if æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³çš„è¯ï¼Œåœ¨èµ‹å€¼çš„ mov æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åï¼Œæœ‰ä¸€ä¸ª jmp çš„æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚è·³è½¬çš„åœ°å€å°±æ˜¯è¿™ä¸€è¡Œçš„åœ°å€51ã€‚æˆ‘ä»¬çš„ main å‡½æ•°æ²¡æœ‰è®¾å®šè¿”å›å€¼ï¼Œè€Œmov eax, 0x0 å…¶å®å°±æ˜¯ç»™ main å‡½æ•°ç”Ÿæˆäº†ä¸€ä¸ªé»˜è®¤çš„ä¸º 0 çš„è¿”å›å€¼åˆ°ç´¯åŠ å™¨é‡Œé¢ã€‚if æ¡ä»¶é‡Œé¢çš„å†…å®¹æ‰§è¡Œå®Œæˆä¹‹åä¹Ÿä¼šè·³è½¬åˆ°è¿™é‡Œï¼Œå’Œ else é‡Œçš„å†…å®¹ç»“æŸä¹‹åçš„ä½ç½®æ˜¯ä¸€æ ·çš„ã€‚ å‡½æ•°è°ƒç”¨ï¼šä¸ºä»€ä¹ˆä¼šå‘ç”Ÿ Stack Overflowé™æ€é“¾æ¥æ—¢ç„¶æˆ‘ä»¬çš„ç¨‹åºæœ€ç»ˆéƒ½è¢«å˜æˆäº†ä¸€æ¡æ¡æœºå™¨ç å»æ‰§è¡Œï¼Œé‚£ä¸ºä»€ä¹ˆåŒä¸€ä¸ªç¨‹åºï¼Œåœ¨åŒä¸€å°è®¡ç®—æœºä¸Šï¼Œåœ¨ Linux ä¸‹å¯ä»¥è¿è¡Œï¼Œè€Œåœ¨ Windows ä¸‹å´ä¸è¡Œå‘¢ï¼Ÿåè¿‡æ¥ï¼ŒWindows ä¸Šçš„ç¨‹åºåœ¨ Linux ä¸Šä¹Ÿæ˜¯ä¸€æ ·ä¸èƒ½æ‰§è¡Œçš„ã€‚å¯æ˜¯æˆ‘ä»¬çš„ CPU å¹¶æ²¡æœ‰æ¢æ‰ï¼Œå®ƒåº”è¯¥å¯ä»¥è¯†åˆ«åŒæ ·çš„æŒ‡ä»¤å‘€ï¼Ÿ å°†ä»¥ä¸‹ä¸¤ä¸ªä¾‹ç¨‹ç¼–è¯‘ï¼Œç„¶åé€šè¿‡ objdump å‘½ä»¤çœ‹çœ‹å®ƒä»¬çš„æ±‡ç¼–ä»£ç ã€‚ 123456789101112131415// add_lib.cint add(int a, int b)&#123; return a+b;&#125;// link_example.c#include &lt;stdio.h&gt;int main()&#123; int a = 10; int b = 5; int c = add(a, b); printf(&quot;c = %d\\n&quot;, c);&#125; 123gcc -g -c add_lib.c link_example.cobjdump -d -M intel -S add_lib.oobjdump -d -M intel -S link_example.o 123456789101112add_lib.o: file format elf64-x86-64Disassembly of section .text:0000000000000000 &lt;add&gt;: 0: 55 push rbp 1: 48 89 e5 mov rbp,rsp 4: 89 7d fc mov DWORD PTR [rbp-0x4],edi 7: 89 75 f8 mov DWORD PTR [rbp-0x8],esi a: 8b 55 fc mov edx,DWORD PTR [rbp-0x4] d: 8b 45 f8 mov eax,DWORD PTR [rbp-0x8] 10: 01 d0 add eax,edx 12: 5d pop rbp 13: c3 ret 1234567891011121314151617181920212223link_example.o: file format elf64-x86-64Disassembly of section .text:0000000000000000 &lt;main&gt;: 0: 55 push rbp 1: 48 89 e5 mov rbp,rsp 4: 48 83 ec 10 sub rsp,0x10 8: c7 45 fc 0a 00 00 00 mov DWORD PTR [rbp-0x4],0xa f: c7 45 f8 05 00 00 00 mov DWORD PTR [rbp-0x8],0x5 16: 8b 55 f8 mov edx,DWORD PTR [rbp-0x8] 19: 8b 45 fc mov eax,DWORD PTR [rbp-0x4] 1c: 89 d6 mov esi,edx 1e: 89 c7 mov edi,eax 20: b8 00 00 00 00 mov eax,0x0 25: e8 00 00 00 00 call 2a &lt;main+0x2a&gt; 2a: 89 45 f4 mov DWORD PTR [rbp-0xc],eax 2d: 8b 45 f4 mov eax,DWORD PTR [rbp-0xc] 30: 89 c6 mov esi,eax 32: 48 8d 3d 00 00 00 00 lea rdi,[rip+0x0] # 39 &lt;main+0x39&gt; 39: b8 00 00 00 00 mov eax,0x0 3e: e8 00 00 00 00 call 43 &lt;main+0x43&gt; 43: b8 00 00 00 00 mov eax,0x0 48: c9 leave 49: c3 ret æ—¢ç„¶ä»£ç å·²ç»è¢«æˆ‘ä»¬â€œç¼–è¯‘â€æˆäº†æŒ‡ä»¤ï¼Œæˆ‘ä»¬ä¸å¦¨å°è¯•è¿è¡Œä¸€ä¸‹ ./link_example.oã€‚ ç„¶è€Œæˆ‘ä»¬å¹¶ä¸èƒ½æˆåŠŸè¿è¡Œï¼Œä¼šå¾—åˆ°ä¸€æ¡cannot execute binary file: Exec format error çš„é”™è¯¯ã€‚ æˆ‘ä»¬å†ä»”ç»†çœ‹ä¸€ä¸‹ objdump å‡ºæ¥çš„ä¸¤ä¸ªæ–‡ä»¶çš„ä»£ç ï¼Œä¼šå‘ç°ä¸¤ä¸ªç¨‹åºçš„åœ°å€éƒ½æ˜¯ä» 0 å¼€å§‹çš„ã€‚å¦‚æœåœ°å€æ˜¯ä¸€æ ·çš„ï¼Œç¨‹åºå¦‚æœéœ€è¦é€šè¿‡ call æŒ‡ä»¤è°ƒç”¨å‡½æ•°çš„è¯ï¼Œå®ƒæ€ä¹ˆçŸ¥é“åº”è¯¥è·³è½¬åˆ°å“ªä¸€ä¸ªæ–‡ä»¶é‡Œå‘¢ï¼Ÿ æ— è®ºæ˜¯è¿™é‡Œçš„è¿è¡ŒæŠ¥é”™ï¼Œè¿˜æ˜¯ objdump å‡ºæ¥çš„æ±‡ç¼–ä»£ç é‡Œé¢çš„é‡å¤åœ°å€ï¼Œéƒ½æ˜¯å› ä¸ºadd_lib.oä»¥åŠ link_example.o å¹¶ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆExecutable Programï¼‰ï¼Œè€Œæ˜¯ç›®æ ‡æ–‡ä»¶ï¼ˆObject Fileï¼‰ã€‚åªæœ‰é€šè¿‡é“¾æ¥å™¨ï¼ˆLinkerï¼‰æŠŠå¤šä¸ªç›®æ ‡æ–‡ä»¶ä»¥åŠè°ƒç”¨çš„å„ç§å‡½æ•°åº“é“¾æ¥èµ·æ¥ï¼Œæˆ‘ä»¬æ‰èƒ½å¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ é€šè¿‡ gcc çš„-oå‚æ•°ï¼Œå¯ä»¥ç”Ÿæˆå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ 123$ gcc -o link-example add_lib.o link_example.o$ ./link_examplec = 15 ELFï¼ˆExecuatable and Linkable File Formatï¼‰çš„æ–‡ä»¶æ ¼å¼ï¼Œä¸­æ–‡åå­—å«å¯æ‰§è¡Œä¸å¯é“¾æ¥æ–‡ä»¶æ ¼å¼ï¼Œè¿™é‡Œé¢ä¸ä»…å­˜æ”¾äº†ç¼–è¯‘æˆçš„æ±‡ç¼–æŒ‡ä»¤ï¼Œè¿˜ä¿ç•™äº†å¾ˆå¤šåˆ«çš„æ•°æ®ã€‚ é“¾æ¥å™¨ä¼šæ‰«ææ‰€æœ‰è¾“å…¥çš„ç›®æ ‡æ–‡ä»¶ï¼Œç„¶åæŠŠæ‰€æœ‰ç¬¦å·è¡¨é‡Œçš„ä¿¡æ¯æ”¶é›†èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªå…¨å±€çš„ç¬¦å·è¡¨ã€‚ç„¶åå†æ ¹æ®é‡å®šä½è¡¨ï¼ŒæŠŠæ‰€æœ‰ä¸ç¡®å®šè¦è·³è½¬åœ°å€çš„ä»£ç ï¼Œæ ¹æ®ç¬¦å·è¡¨é‡Œé¢å­˜å‚¨çš„åœ°å€ï¼Œè¿›è¡Œä¸€æ¬¡ä¿®æ­£ã€‚æœ€åï¼ŒæŠŠæ‰€æœ‰çš„ç›®æ ‡æ–‡ä»¶çš„å¯¹åº”æ®µè¿›è¡Œä¸€æ¬¡åˆå¹¶ï¼Œå˜æˆäº†æœ€ç»ˆçš„å¯æ‰§è¡Œä»£ç ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œå¯æ‰§è¡Œæ–‡ä»¶é‡Œé¢çš„å‡½æ•°è°ƒç”¨çš„åœ°å€éƒ½æ˜¯æ­£ç¡®çš„ã€‚ åœ¨é“¾æ¥å™¨æŠŠç¨‹åºå˜æˆå¯æ‰§è¡Œæ–‡ä»¶ä¹‹åï¼Œè¦è£…è½½å™¨å»æ‰§è¡Œç¨‹åºå°±å®¹æ˜“å¤šäº†ã€‚è£…è½½å™¨ä¸å†éœ€è¦è€ƒè™‘åœ°å€è·³è½¬çš„é—®é¢˜ï¼Œåªéœ€è¦è§£æ ELF æ–‡ä»¶ï¼ŒæŠŠå¯¹åº”çš„æŒ‡ä»¤å’Œæ•°æ®ï¼ŒåŠ è½½åˆ°å†…å­˜é‡Œé¢ä¾› CPU æ‰§è¡Œå°±å¯ä»¥äº†ã€‚ ä¸ºä»€ä¹ˆåŒæ ·ä¸€ä¸ªç¨‹åºï¼Œåœ¨ Linux ä¸‹å¯ä»¥æ‰§è¡Œè€Œåœ¨ Windows ä¸‹ä¸èƒ½æ‰§è¡Œäº†ã€‚å…¶ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„åŸå› å°±æ˜¯ï¼Œä¸¤ä¸ªæ“ä½œç³»ç»Ÿä¸‹å¯æ‰§è¡Œæ–‡ä»¶çš„æ ¼å¼ä¸ä¸€æ ·ã€‚ æˆ‘ä»¬ä»Šå¤©è®²çš„æ˜¯ Linux ä¸‹çš„ ELF æ–‡ä»¶æ ¼å¼ï¼Œè€Œ Windows çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼æ˜¯ä¸€ç§å«ä½œ PEï¼ˆPortable Executable Formatï¼‰çš„æ–‡ä»¶æ ¼å¼ã€‚Linux ä¸‹çš„è£…è½½å™¨åªèƒ½è§£æ ELF æ ¼å¼è€Œä¸èƒ½è§£æ PE æ ¼å¼ã€‚ å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ä»¥èƒ½å¤Ÿè§£æ PE æ ¼å¼çš„è£…è½½å™¨ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½åœ¨ Linux ä¸‹è¿è¡Œ Windows ç¨‹åºäº†ã€‚è¿™æ ·çš„ç¨‹åºçœŸçš„å­˜åœ¨å—ï¼Ÿæ²¡é”™ï¼ŒLinux ä¸‹è‘—åçš„å¼€æºé¡¹ç›® Wineï¼Œå°±æ˜¯é€šè¿‡å…¼å®¹ PE æ ¼å¼çš„è£…è½½å™¨ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½ç›´æ¥åœ¨ Linux ä¸‹è¿è¡Œ Windows ç¨‹åºçš„ã€‚è€Œç°åœ¨å¾®è½¯çš„ Windows é‡Œé¢ä¹Ÿæä¾›äº† WSLï¼Œä¹Ÿå°±æ˜¯ Windows Subsystem for Linuxï¼Œå¯ä»¥è§£æå’ŒåŠ è½½ ELF æ ¼å¼çš„æ–‡ä»¶ã€‚ ç¨‹åºè£…è½½ç¨‹åºè£…è½½é¢ä¸´çš„æŒ‘æˆ˜ å¯æ‰§è¡Œç¨‹åºåŠ è½½åå ç”¨çš„å†…å­˜ç©ºé—´åº”è¯¥æ˜¯è¿ç»­çš„ã€‚ è¿™ç‚¹å¾ˆå¥½ç†è§£ï¼ŒæŒ‡ä»¤æ­£å¸¸éƒ½æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚ æˆ‘ä»¬éœ€è¦åŒæ—¶åŠ è½½å¾ˆå¤šä¸ªç¨‹åºï¼Œå¹¶ä¸”ä¸èƒ½è®©ç¨‹åºè‡ªå·±è§„å®šåœ¨å†…å­˜ä¸­åŠ è½½çš„ä½ç½®ã€‚ è®¡ç®—æœºé€šå¸¸ä¼šåŒæ—¶è¿è¡Œå¾ˆå¤šä¸ªç¨‹åºï¼Œå¯èƒ½ä½ æƒ³è¦çš„å†…å­˜åœ°å€å·²ç»è¢«å…¶ä»–åŠ è½½äº†çš„ç¨‹åºå ç”¨äº†ã€‚ æˆ‘ä»¬æŠŠæŒ‡ä»¤é‡Œç”¨åˆ°çš„å†…å­˜åœ°å€å«ä½œè™šæ‹Ÿå†…å­˜åœ°å€ï¼ˆVirtual Memory Addressï¼‰ï¼Œå®é™…åœ¨å†…å­˜ç¡¬ä»¶é‡Œé¢çš„ç©ºé—´åœ°å€ï¼Œæˆ‘ä»¬å«ç‰©ç†å†…å­˜åœ°å€ï¼ˆPhysical Memory Addressï¼‰ã€‚ ç¨‹åºé‡Œæœ‰æŒ‡ä»¤å’Œå„ç§å†…å­˜åœ°å€ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒè™šæ‹Ÿå†…å­˜åœ°å€å°±è¡Œäº†ã€‚å¯¹äºä»»ä½•ä¸€ä¸ªç¨‹åºæ¥è¯´ï¼Œå®ƒçœ‹åˆ°çš„éƒ½æ˜¯åŒæ ·çš„å†…å­˜åœ°å€ã€‚æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªè™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜çš„æ˜ å°„è¡¨ï¼Œè¿™æ ·å®é™…ç¨‹åºæŒ‡ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šé€šè¿‡è™šæ‹Ÿå†…å­˜åœ°å€ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å†…å­˜åœ°å€ï¼Œç„¶åæ‰§è¡Œã€‚ å†…å­˜åˆ†æ®µè¿™ç§æ‰¾å‡ºä¸€æ®µè¿ç»­çš„ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜åœ°å€è¿›è¡Œæ˜ å°„çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å«åˆ†æ®µï¼ˆSegmentationï¼‰ã€‚è¿™é‡Œçš„æ®µï¼Œå°±æ˜¯æŒ‡ç³»ç»Ÿåˆ†é…å‡ºæ¥çš„é‚£ä¸ªè¿ç»­çš„å†…å­˜ç©ºé—´ã€‚ åˆ†æ®µçš„åŠæ³•å¾ˆå¥½ï¼Œè§£å†³äº†ç¨‹åºæœ¬èº«ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„ç‰©ç†å†…å­˜åœ°å€çš„é—®é¢˜ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å†…å­˜ç¢ç‰‡ï¼ˆMemory Fragmentationï¼‰çš„é—®é¢˜ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡å†…å­˜äº¤æ¢ï¼ˆMemory Swappingï¼‰æŠ€æœ¯è§£å†³ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠ Python ç¨‹åºå ç”¨çš„é‚£ 256MB å†…å­˜å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç„¶åå†ä»ç¡¬ç›˜ä¸Šè¯»å›æ¥åˆ°å†…å­˜é‡Œé¢ã€‚ä¸è¿‡è¯»å›æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å†æŠŠå®ƒåŠ è½½åˆ°åŸæ¥çš„ä½ç½®ï¼Œè€Œæ˜¯ç´§ç´§è·Ÿåœ¨é‚£å·²ç»è¢«å ç”¨äº†çš„ 512MB å†…å­˜åé¢ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†è¿ç»­çš„ 256MB å†…å­˜ç©ºé—´ï¼Œå°±å¯ä»¥å»åŠ è½½ä¸€ä¸ªæ–°çš„ 200MB çš„ç¨‹åºã€‚ å¦‚æœä½ è‡ªå·±å®‰è£…è¿‡ Linux æ“ä½œç³»ç»Ÿï¼Œä½ åº”è¯¥é‡åˆ°è¿‡åˆ†é…ä¸€ä¸ª swap ç¡¬ç›˜åˆ†åŒºçš„é—®é¢˜ã€‚è¿™å—åˆ†å‡ºæ¥çš„ç£ç›˜ç©ºé—´ï¼Œå…¶å®å°±æ˜¯ä¸“é—¨ç»™ Linux æ“ä½œç³»ç»Ÿè¿›è¡Œå†…å­˜äº¤æ¢ç”¨çš„ã€‚ ç¡¬ç›˜çš„è®¿é—®é€Ÿåº¦è¦æ¯”å†…å­˜æ…¢å¾ˆå¤šï¼Œè€Œæ¯ä¸€æ¬¡å†…å­˜äº¤æ¢ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æŠŠä¸€å¤§æ®µè¿ç»­çš„å†…å­˜æ•°æ®å†™åˆ°ç¡¬ç›˜ä¸Šã€‚æ‰€ä»¥ï¼Œå¦‚æœå†…å­˜äº¤æ¢çš„æ—¶å€™ï¼Œäº¤æ¢çš„æ˜¯ä¸€ä¸ªå¾ˆå å†…å­˜ç©ºé—´çš„ç¨‹åºï¼Œè¿™æ ·æ•´ä¸ªæœºå™¨éƒ½ä¼šæ˜¾å¾—å¡é¡¿ã€‚ å†…å­˜åˆ†é¡µæ—¢ç„¶é—®é¢˜å‡ºåœ¨å†…å­˜ç¢ç‰‡å’Œå†…å­˜äº¤æ¢çš„ç©ºé—´å¤ªå¤§ä¸Šï¼Œé‚£ä¹ˆè§£å†³é—®é¢˜çš„åŠæ³•å°±æ˜¯ï¼Œå°‘å‡ºç°ä¸€äº›å†…å­˜ç¢ç‰‡ï¼Œå¹¶ä¸”è®©éœ€è¦äº¤æ¢å†™å…¥æˆ–è€…ä»ç£ç›˜è£…è½½çš„æ•°æ®æ›´å°‘ä¸€ç‚¹ã€‚äºæ˜¯å°±æœ‰äº†å†…å­˜åˆ†é¡µï¼ˆPagingï¼‰ã€‚ å’Œåˆ†æ®µè¿™æ ·åˆ†é…ä¸€æ•´æ®µè¿ç»­çš„ç©ºé—´ç»™åˆ°ç¨‹åºç›¸æ¯”ï¼Œåˆ†é¡µæ˜¯æŠŠæ•´ä¸ªç‰©ç†å†…å­˜ç©ºé—´åˆ‡æˆä¸€æ®µæ®µå›ºå®šå°ºå¯¸çš„å¤§å°ã€‚è€Œå¯¹åº”çš„ç¨‹åºæ‰€éœ€è¦å ç”¨çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œä¹Ÿä¼šåŒæ ·åˆ‡æˆä¸€æ®µæ®µå›ºå®šå°ºå¯¸çš„å¤§å°ã€‚è¿™æ ·ä¸€ä¸ªè¿ç»­å¹¶ä¸”å°ºå¯¸å›ºå®šçš„å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å«é¡µï¼ˆPageï¼‰ã€‚ ä»è™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜çš„æ˜ å°„ï¼Œä¸å†æ˜¯æ‹¿æ•´æ®µè¿ç»­çš„å†…å­˜çš„ç‰©ç†åœ°å€ï¼Œè€Œæ˜¯æŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªé¡µæ¥çš„ã€‚é¡µçš„å°ºå¯¸ä¸€èˆ¬è¿œè¿œå°äºæ•´ä¸ªç¨‹åºçš„å¤§å°ã€‚åœ¨ Linux ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸åªè®¾ç½®æˆ 4KBã€‚ ç”±äºå†…å­˜ç©ºé—´éƒ½æ˜¯é¢„å…ˆåˆ’åˆ†å¥½çš„ï¼Œä¹Ÿå°±æ²¡æœ‰äº†ä¸èƒ½ä½¿ç”¨çš„ç¢ç‰‡ï¼Œè€Œåªæœ‰è¢«é‡Šæ”¾å‡ºæ¥çš„å¾ˆå¤š 4KB çš„é¡µã€‚å³ä½¿å†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œéœ€è¦è®©ç°æœ‰çš„ã€æ­£åœ¨è¿è¡Œçš„å…¶ä»–ç¨‹åºï¼Œé€šè¿‡å†…å­˜äº¤æ¢é‡Šæ”¾å‡ºä¸€äº›å†…å­˜çš„é¡µå‡ºæ¥ï¼Œä¸€æ¬¡æ€§å†™å…¥ç£ç›˜çš„ä¹Ÿåªæœ‰å°‘æ•°çš„ä¸€ä¸ªé¡µæˆ–è€…å‡ ä¸ªé¡µï¼Œä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´ï¼Œè®©æ•´ä¸ªæœºå™¨è¢«å†…å­˜äº¤æ¢çš„è¿‡ç¨‹ç»™å¡ä½ã€‚ åˆ†é¡µçš„æ–¹å¼ä½¿å¾—æˆ‘ä»¬åœ¨åŠ è½½ç¨‹åºçš„æ—¶å€™ï¼Œä¸å†éœ€è¦ä¸€æ¬¡æ€§éƒ½æŠŠç¨‹åºåŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨è¿›è¡Œè™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„é¡µä¹‹é—´çš„æ˜ å°„ä¹‹åï¼Œå¹¶ä¸çœŸçš„æŠŠé¡µåŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œï¼Œè€Œæ˜¯åªåœ¨ç¨‹åºè¿è¡Œä¸­ï¼Œéœ€è¦ç”¨åˆ°å¯¹åº”è™šæ‹Ÿå†…å­˜é¡µé‡Œé¢çš„æŒ‡ä»¤å’Œæ•°æ®æ—¶ï¼Œå†åŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œé¢å»ã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿï¼Œçš„ç¡®æ˜¯è¿™ä¹ˆåšçš„ã€‚å½“è¦è¯»å–ç‰¹å®šçš„é¡µï¼Œå´å‘ç°æ•°æ®å¹¶æ²¡æœ‰åŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œçš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ªæ¥è‡ªäº CPU çš„ç¼ºé¡µé”™è¯¯ï¼ˆPage Faultï¼‰ã€‚æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿä¼šæ•æ‰åˆ°è¿™ä¸ªé”™è¯¯ï¼Œç„¶åå°†å¯¹åº”çš„é¡µï¼Œä»å­˜æ”¾åœ¨ç¡¬ç›˜ä¸Šçš„è™šæ‹Ÿå†…å­˜é‡Œè¯»å–å‡ºæ¥ï¼ŒåŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œã€‚ åŠ¨æ€é“¾æ¥å¦‚æœæˆ‘ä»¬æœ‰å¾ˆå¤šä¸ªç¨‹åºéƒ½è¦é€šè¿‡è£…è½½å™¨è£…è½½åˆ°å†…å­˜é‡Œé¢ï¼Œé‚£é‡Œé¢é“¾æ¥å¥½çš„åŒæ ·çš„åŠŸèƒ½ä»£ç ï¼Œä¹Ÿéƒ½éœ€è¦å†è£…è½½ä¸€éï¼Œå†å ä¸€éå†…å­˜ç©ºé—´ã€‚åœ¨ä¸€ä¸ªè¿è¡Œä¸Šç™¾ä¸ªè¿›ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œè¿™å°†ä¼šé€ æˆæå¤§çš„èµ„æºæµªè´¹ã€‚ å…±äº«åº“ï¼ˆshared libraryï¼‰æ˜¯è‡´åŠ›äºè§£å†³é™æ€åº“ç¼ºé™·çš„ä¸€ä¸ªç°ä»£åˆ›æ–°äº§ç‰©ã€‚å…±äº«åº“æ˜¯ä¸€ä¸ªç›®æ ‡æ¨¡å—ï¼Œåœ¨è¿è¡Œæˆ–åŠ è½½æ—¶ï¼Œå¯ä»¥åŠ è½½åˆ°ä»»æ„çš„å†…å­˜åœ°å€ï¼Œå¹¶å’Œä¸€ä¸ªåœ¨å†…å­˜ä¸­çš„ç¨‹åºé“¾æ¥èµ·æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåŠ¨æ€é“¾æ¥ï¼ˆdynamic linkingï¼‰æ˜¯ç”±ä¸€ä¸ªå«åšåŠ¨æ€é“¾æ¥å™¨ï¼ˆdynamic linkerï¼‰çš„ç¨‹åºæ¥æ‰§è¡Œçš„ã€‚Linux ä¸­ä¸º.soæ–‡ä»¶ï¼ŒWindows ä¸­ä¸º.dllæ–‡ä»¶ã€‚ PIC ï¼ˆPosition-Independent Codeï¼‰è¦æƒ³è¦åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™å…±äº«ä»£ç ï¼Œä¹Ÿæœ‰ä¸€å®šçš„è¦æ±‚ï¼Œå°±æ˜¯è¿™äº›æœºå™¨ç å¿…é¡»æ˜¯â€œåœ°å€æ— å…³â€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç¼–è¯‘å‡ºæ¥çš„å…±äº«åº“æ–‡ä»¶çš„æŒ‡ä»¤ä»£ç ï¼Œæ”¾åœ¨å“ªä¸ªå†…å­˜åœ°å€éƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚ å¯¹äºæ‰€æœ‰åŠ¨æ€é“¾æ¥å…±äº«åº“çš„ç¨‹åºæ¥è®²ï¼Œè™½ç„¶æˆ‘ä»¬çš„å…±äº«åº“ç”¨çš„éƒ½æ˜¯åŒä¸€æ®µç‰©ç†å†…å­˜åœ°å€ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„åº”ç”¨ç¨‹åºé‡Œï¼Œå®ƒæ‰€åœ¨çš„è™šæ‹Ÿå†…å­˜åœ°å€æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬æ²¡åŠæ³•ã€ä¹Ÿä¸åº”è¯¥è¦æ±‚åŠ¨æ€é“¾æ¥åŒä¸€ä¸ªå…±äº«åº“çš„ä¸åŒç¨‹åºï¼Œå¿…é¡»æŠŠè¿™ä¸ªå…±äº«åº“æ‰€ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜åœ°å€å˜æˆä¸€è‡´ã€‚å¦‚æœè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å†™çš„ç¨‹åºå°±å¿…é¡»æ˜ç¡®åœ°çŸ¥é“å†…éƒ¨çš„å†…å­˜åœ°å€åˆ†é…ã€‚ å¦‚ä½•æ‰èƒ½å®ç°åœ°å€æ— å…³ï¼Ÿ åŠ¨æ€ä»£ç åº“å†…éƒ¨çš„å˜é‡å’Œå‡½æ•°è°ƒç”¨éƒ½å¾ˆå®¹æ˜“è§£å†³ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ç›¸å¯¹åœ°å€ï¼ˆRelative Addressï¼‰å°±å¥½äº†ã€‚å„ç§æŒ‡ä»¤ä¸­ä½¿ç”¨åˆ°çš„å†…å­˜åœ°å€ï¼Œç»™å‡ºçš„ä¸æ˜¯ä¸€ä¸ªç»å¯¹çš„åœ°å€ç©ºé—´ï¼Œè€Œæ˜¯ä¸€ä¸ªç›¸å¯¹äºå½“å‰æŒ‡ä»¤åç§»é‡çš„å†…å­˜åœ°å€ã€‚å› ä¸ºæ•´ä¸ªå…±äº«åº“æ˜¯æ”¾åœ¨ä¸€æ®µè¿ç»­çš„è™šæ‹Ÿå†…å­˜åœ°å€ä¸­çš„ï¼Œæ— è®ºè£…è½½åˆ°å“ªä¸€æ®µåœ°å€ï¼Œä¸åŒæŒ‡ä»¤ä¹‹é—´çš„ç›¸å¯¹åœ°å€éƒ½æ˜¯ä¸å˜çš„ã€‚ PLT å’Œ GOT1234567891011121314// lib.h#ifndef LIB_H#define LIB_H void show_me_the_money(int money);#endif// lib.c#include &lt;stdio.h&gt; void show_me_the_money(int money)&#123; printf(&quot;Show me USD %d from lib.c \\n&quot;, money);&#125; 1234567// show_me_poor.c#include &quot;lib.h&quot;int main()&#123; int money = 5; show_me_the_money(money);&#125; 12gcc lib.c -fPIC -shared -o lib.sogcc -o show_me_poor show_me_poor.c ./lib.so -fpic é€‰é¡¹æŒ‡ç¤ºç¼–è¯‘å™¨ç”Ÿæˆä¸ä½ç½®æ— å…³çš„ä»£ç ã€‚-sharedé€‰é¡¹æŒ‡ç¤ºé“¾æ¥å™¨åˆ›å»ºä¸€ä¸ªå…±äº«çš„ç›®æ ‡æ–‡ä»¶ã€‚ ç„¶åï¼Œæˆ‘ä»¬å†é€šè¿‡ gcc ç¼–è¯‘ show_me_poor åŠ¨æ€é“¾æ¥äº† lib.so çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨è¿™äº›æ“ä½œéƒ½å®Œæˆäº†ä¹‹åï¼Œæˆ‘ä»¬æŠŠ show_me_poor è¿™ä¸ªæ–‡ä»¶é€šè¿‡ objdump å‡ºæ¥çœ‹ä¸€ä¸‹ã€‚ 123456789101112131415161718192021222324252627$ objdump -d -M intel -S show_me_poorâ€¦â€¦0000000000400540 &lt;show_me_the_money@plt-0x10&gt;: 400540: ff 35 12 05 20 00 push QWORD PTR [rip+0x200512] # 600a58 &lt;_GLOBAL_OFFSET_TABLE_+0x8&gt; 400546: ff 25 14 05 20 00 jmp QWORD PTR [rip+0x200514] # 600a60 &lt;_GLOBAL_OFFSET_TABLE_+0x10&gt; 40054c: 0f 1f 40 00 nop DWORD PTR [rax+0x0] 0000000000400550 &lt;show_me_the_money@plt&gt;: 400550: ff 25 12 05 20 00 jmp QWORD PTR [rip+0x200512] # 600a68 &lt;_GLOBAL_OFFSET_TABLE_+0x18&gt; 400556: 68 00 00 00 00 push 0x0 40055b: e9 e0 ff ff ff jmp 400540 &lt;_init+0x28&gt;â€¦â€¦0000000000400676 &lt;main&gt;: 400676: 55 push rbp 400677: 48 89 e5 mov rbp,rsp 40067a: 48 83 ec 10 sub rsp,0x10 40067e: c7 45 fc 05 00 00 00 mov DWORD PTR [rbp-0x4],0x5 400685: 8b 45 fc mov eax,DWORD PTR [rbp-0x4] 400688: 89 c7 mov edi,eax 40068a: e8 c1 fe ff ff call 400550 &lt;show_me_the_money@plt&gt; 40068f: c9 leave 400690: c3 ret 400691: 66 2e 0f 1f 84 00 00 nop WORD PTR cs:[rax+rax*1+0x0] 400698: 00 00 00 40069b: 0f 1f 44 00 00 nop DWORD PTR [rax+rax*1+0x0]â€¦â€¦ åœ¨ main å‡½æ•°è°ƒç”¨ show_me_the_money çš„å‡½æ•°çš„æ—¶å€™ï¼Œå¯¹åº”çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š 1call 400550 &lt;show_me_the_money@plt&gt; è¿™é‡Œåé¢æœ‰ä¸€ä¸ª@plt çš„å…³é”®å­—ï¼Œä»£è¡¨äº†æˆ‘ä»¬éœ€è¦ä»PLTï¼Œä¹Ÿå°±æ˜¯è¿‡ç¨‹é“¾æ¥è¡¨ï¼ˆProcedure Link Tableï¼‰é‡Œé¢æ‰¾è¦è°ƒç”¨çš„å‡½æ•°ã€‚å¯¹åº”çš„åœ°å€å‘¢ï¼Œåˆ™æ˜¯ 400550 è¿™ä¸ªåœ°å€ã€‚ é‚£å½“æˆ‘ä»¬æŠŠç›®å…‰æŒªåˆ°ä¸Šé¢çš„ 400550 è¿™ä¸ªåœ°å€ï¼Œä½ åˆä¼šçœ‹åˆ°é‡Œé¢è¿›è¡Œäº†ä¸€æ¬¡è·³è½¬ï¼Œè¿™ä¸ªè·³è½¬æŒ‡å®šçš„è·³è½¬åœ°å€ï¼Œä½ å¯ä»¥åœ¨åé¢çš„æ³¨é‡Šé‡Œé¢å¯ä»¥çœ‹åˆ°ï¼ŒGLOBAL_OFFSET_TABLE+0x18ã€‚è¿™é‡Œçš„ GLOBAL_OFFSET_TABLEï¼Œå°±æ˜¯æˆ‘æ¥ä¸‹æ¥è¦è¯´çš„å…¨å±€åç§»è¡¨ã€‚ 1400550: ff 25 12 05 20 00 jmp QWORD PTR [rip+0x200512] # 600a68 &lt;_GLOBAL_OFFSET_TABLE_+0x18&gt; åœ¨åŠ¨æ€é“¾æ¥å¯¹åº”çš„å…±äº«åº“ï¼Œæˆ‘ä»¬åœ¨å…±äº«åº“çš„ data section é‡Œé¢ï¼Œä¿å­˜äº†ä¸€å¼ å…¨å±€åç§»è¡¨ï¼ˆGOTï¼ŒGlobal Offset Tableï¼‰ã€‚è™½ç„¶å…±äº«åº“çš„ä»£ç éƒ¨åˆ†çš„ç‰©ç†å†…å­˜æ˜¯å…±äº«çš„ï¼Œä½†æ˜¯æ•°æ®éƒ¨åˆ†æ˜¯å„ä¸ªåŠ¨æ€é“¾æ¥å®ƒçš„åº”ç”¨ç¨‹åºé‡Œé¢å„åŠ è½½ä¸€ä»½çš„ã€‚æ‰€æœ‰éœ€è¦å¼•ç”¨å½“å‰å…±äº«åº“å¤–éƒ¨çš„åœ°å€çš„æŒ‡ä»¤ï¼Œéƒ½ä¼šæŸ¥è¯¢ GOTï¼Œæ¥æ‰¾åˆ°å½“å‰è¿è¡Œç¨‹åºçš„è™šæ‹Ÿå†…å­˜é‡Œçš„å¯¹åº”ä½ç½®ã€‚è€Œ GOT è¡¨é‡Œçš„æ•°æ®ï¼Œåˆ™æ˜¯åœ¨æˆ‘ä»¬åŠ è½½ä¸€ä¸ªä¸ªå…±äº«åº“çš„æ—¶å€™å†™è¿›å»çš„ã€‚ è™½ç„¶ä¸åŒçš„ç¨‹åºè°ƒç”¨çš„åŒæ ·çš„åŠ¨æ€åº“ï¼Œå„è‡ªçš„å†…å­˜åœ°å€æ˜¯ç‹¬ç«‹çš„ï¼Œè°ƒç”¨çš„åˆéƒ½æ˜¯åŒä¸€ä¸ªåŠ¨æ€åº“ï¼Œä½†æ˜¯ä¸éœ€è¦å»ä¿®æ”¹åŠ¨æ€åº“é‡Œé¢çš„ä»£ç æ‰€ä½¿ç”¨çš„åœ°å€ï¼Œè€Œæ˜¯å„ä¸ªç¨‹åºå„è‡ªç»´æŠ¤å¥½è‡ªå·±çš„ GOTï¼Œèƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”çš„åŠ¨æ€åº“å°±å¥½äº†ã€‚ äºŒè¿›åˆ¶ç¼–ç åŸç è¡¨ç¤ºæ³•ï¼Œå·¦ä¾§ç¬¬ä¸€ä½æ˜¯ç¬¦å·ä½ï¼Œç¬¦å·ä½ä¸º 1 æ—¶è¡¨ç¤ºè´Ÿæ•°ï¼Œä¸º 0 æ—¶è¡¨ç¤ºæ­£æ•°ã€‚è¡¥ç è¡¨ç¤ºæ³•ï¼Œæˆ‘ä»¬ä¸å†æŠŠè¿™ä¸€ä½å½“æˆå•ç‹¬çš„ç¬¦å·ä½ï¼Œåœ¨å‰©ä¸‹å‡ ä½è®¡ç®—å‡ºçš„åè¿›åˆ¶å‰åŠ ä¸Šæ­£è´Ÿå·ï¼Œè€Œæ˜¯åœ¨è®¡ç®—æ•´ä¸ªäºŒè¿›åˆ¶å€¼çš„æ—¶å€™ï¼Œåœ¨å·¦ä¾§æœ€é«˜ä½å‰é¢åŠ ä¸ªè´Ÿå·ã€‚ æ¯”å¦‚ï¼Œä¸€ä¸ª 4 ä½çš„äºŒè¿›åˆ¶è¡¥ç æ•°å€¼ 1011ï¼Œè½¬æ¢æˆåè¿›åˆ¶ï¼Œå°±æ˜¯$-1 \\times 2^3 + 0 \\times 2^2 + 1 \\times 2^1 + 1 \\times 2^0 = -5$ ä¸€ä¸ª 4 ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œå¯ä»¥è¡¨ç¤ºä» -8 åˆ° 7 è¿™ 16 ä¸ªæ•´æ•°ï¼Œä¸ä¼šç™½ç™½æµªè´¹ä¸€ä½ã€‚ å­—ç¬¦é›†ï¼šè¡¨ç¤ºçš„å¯ä»¥æ˜¯å­—ç¬¦çš„ä¸€ä¸ªé›†åˆã€‚æ¯”å¦‚è¯´â€œç¬¬ä¸€ç‰ˆã€Šæ–°åå­—å…¸ã€‹é‡Œé¢å‡ºç°çš„æ‰€æœ‰æ±‰å­—â€ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸­æ–‡å­—ç¬¦é›†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æ—¥å¸¸è¯´çš„Unicodeï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼ŒåŒ…å«äº† 150 ç§è¯­è¨€çš„ 14 ä¸‡ä¸ªä¸åŒçš„å­—ç¬¦ã€‚ å­—ç¬¦ç¼–ç ï¼šå¯¹äºå­—ç¬¦é›†é‡Œçš„è¿™äº›å­—ç¬¦ï¼Œæ€ä¹ˆä¸€ä¸€ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå‡ºæ¥çš„ä¸€ä¸ªå­—å…¸ã€‚æˆ‘ä»¬ä¸Šé¢è¯´çš„ Unicodeï¼Œå°±å¯ä»¥ç”¨UTF-8ã€UTF-16ï¼Œä¹ƒè‡³ UTF-32 æ¥è¿›è¡Œç¼–ç ï¼Œå­˜å‚¨æˆäºŒè¿›åˆ¶ã€‚ åŒæ ·çš„æ–‡æœ¬ï¼Œé‡‡ç”¨ä¸åŒçš„ç¼–ç å­˜å‚¨ä¸‹æ¥ã€‚å¦‚æœå¦å¤–ä¸€ä¸ªç¨‹åºï¼Œç”¨ä¸€ç§ä¸åŒçš„ç¼–ç æ–¹å¼æ¥è¿›è¡Œè§£ç å’Œå±•ç¤ºï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚ é”Ÿæ–¤æ‹· çƒ«çƒ«çƒ«Unicode ç¼–ç ä¸€ç›´æŒç»­åœ¨æ”¶å½•å„ç§å­—å…ƒï¼Œè¿™å°±å¯èƒ½ä¼šå‡ºç°å„ç§ä½œä¸šç³»ç»Ÿæ”¯æ´çš„ Unicode å­—å…ƒä¸ä¸€æ ·ã€‚è¿™ä¹Ÿå°±ä¼šå¯¼è‡´ A ä¸Šçš„ä¸€ä¸ªç”¨ Unicode ç¼–ç çš„å­—å…ƒï¼Œåœ¨ B ä¸Šå°±ä¼šå‡ºç°æ— æ³•æ˜¾ç¤ºçš„æƒ…å†µã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåœ¨ Unicode ä¸­å®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šå­—å…ƒï¿½ï¼Œå®ƒçš„ Unicode ç¼–ç ä¸º 0xFFFDã€‚ å‡å¦‚ A æ”¯æ´ç‰¹æ®Šå­—å…ƒâ¬†ï¼Œä½†æ˜¯ B å¹¶ä¸æ”¯æ´è¿™ä¸ªâ¬†ï¼Œé‚£ä¹ˆåœ¨ B ä¸­å°†ä¼šç”¨ï¿½æ¥ä»£æ›¿ã€‚ è¿™ä¸ªå­—å…ƒç”¨ UTF-8 ç¼–ç åï¼Œåå…­è¿›ä½è¡¨ç¤ºä¸º0xEF 0XBF 0XBDã€‚å¦‚æœè¿ç»­å‡ºç°ä¸¤ä¸ªâ¬†ç¬¦å·ï¼Œé‚£ä¹ˆç”¨ UTF-8 ç¼–ç åçš„åå…­è¿›ä½åˆ™è¡¨ç¤ºä¸º0xEF 0XBF 0XBD 0xEF 0XBF 0XBDï¼Œè¿™æ—¶å€™å†è½¬ç æˆ GBKï¼Œå› ä¸º GBK ä¸­ç”¨ä¸¤ä¸ªä½å…ƒç»„è¡¨ç¤ºä¸€ä¸ªå­—å…ƒï¼Œé‚£ä¹ˆä¸Šè¿°çš„å­—å…ƒå°±æˆäº†é”Ÿï¼ˆ0xEFBFï¼‰ï¼Œæ–¤ï¼ˆ0xBDEFï¼‰ï¼Œæ‹·ï¼ˆ0xBFBDï¼‰ã€‚å‡ºç°é”Ÿæ–¤æ‹·çš„åŸå› å°±æ˜¯ UTF-8 è½¬ç  GBK çš„è¿‡ç¨‹ä¸­å‡ºç°äº†é—®é¢˜ã€‚å½“ç„¶å¦‚æœæƒ³è¦å‡ºç°é”Ÿæ–¤æ‹·ï¼Œåˆ™è‡³å°‘éœ€è¦ä¸¤ä¸ªå­—å…ƒå‡ºç°ä¹±ç ã€‚ è€Œâ€œçƒ«çƒ«çƒ«â€ï¼Œåˆ™æ˜¯å› ä¸ºå¦‚æœä½ ç”¨äº† Visual Studio çš„è°ƒè¯•å™¨ï¼Œé»˜è®¤ä½¿ç”¨ MBCS å­—ç¬¦é›†ã€‚â€œçƒ«â€åœ¨é‡Œé¢æ˜¯ç”± 0xCCCC æ¥è¡¨ç¤ºçš„ï¼Œè€Œ 0xCC åˆæ°å¥½æ˜¯æœªåˆå§‹åŒ–çš„å†…å­˜çš„èµ‹å€¼ã€‚äºæ˜¯ï¼Œåœ¨è¯»åˆ°æ²¡æœ‰èµ‹å€¼çš„å†…å­˜åœ°å€æˆ–è€…å˜é‡çš„æ—¶å€™ï¼Œç”µè„‘å°±å¼€å§‹å¤§å«â€œçƒ«çƒ«çƒ«â€äº†ã€‚ ç†è§£ç”µè·¯ä»ä»¥ä¸Šçš„å­¦ä¹ å¯ä»¥çŸ¥é“ï¼Œæœ€ç»ˆæ‰§è¡Œçš„ç¨‹åºéƒ½æ˜¯äºŒè¿›åˆ¶çš„æŒ‡ä»¤ã€‚é‚£ä¸ºä½•è®¡ç®—æœºæœ€ç»ˆé€‰æ‹©äº†äºŒè¿›åˆ¶å‘¢ï¼Ÿæ¥ä¸‹æ¥çœ‹çœ‹è®¡ç®—æœºåœ¨ç¡¬ä»¶å±‚é¢ç©¶ç«Ÿæ˜¯æ€ä¹ˆè¡¨ç¤ºäºŒè¿›åˆ¶çš„ï¼Œä»¥æ­¤ä½ å°±ä¼šæ˜ç™½ï¼Œä¸ºä»€ä¹ˆè®¡ç®—æœºä¼šé€‰æ‹©äºŒè¿›åˆ¶ã€‚ åŠ æ³•å™¨ä¹˜æ³•å™¨æµ®ç‚¹æ•°å’Œå®šç‚¹æ•°","categories":[{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"}],"tags":[{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"}]},{"title":"è§£å†³ OpenSSL SSL_read: Connection was reset, errno 10054","slug":"è§£å†³OpenSSL-SSL-read-Connection-was-reset-errno-10054","date":"2022-02-16T03:12:31.000Z","updated":"2022-10-15T03:14:29.821Z","comments":true,"path":"2022/02/16/è§£å†³OpenSSL-SSL-read-Connection-was-reset-errno-10054/","link":"","permalink":"http://example.com/2022/02/16/%E8%A7%A3%E5%86%B3OpenSSL-SSL-read-Connection-was-reset-errno-10054/","excerpt":"","text":"è§£å†³æ–¹æ³•æ–¹æ³•ä¸€ï¼š 1git config --global http.sslVerify &quot;false&quot; æ–¹æ³•äºŒï¼š 1git config --global https.sslVerify &quot;false&quot; æ–¹æ³•ä¸‰ï¼šè¿™å¯èƒ½æ˜¯å› ä¸ºç‰ˆæœ¬åº“çš„å¤§å°å’Œ git çš„é»˜è®¤ç¼“å†²åŒºå¤§å°ï¼Œæ‰€ä»¥é€šè¿‡ä¸‹è¿°æ“ä½œï¼ˆåœ¨ git bash ä¸Šï¼‰ï¼Œgit çš„ç¼“å†²åŒºå¤§å°ä¼šå¢åŠ ã€‚ 1234//åœ¨ä»“åº“initåï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®git config http.postBuffer 524288000//å¦‚æœä»“åº“ä¸æ˜¯è‡ªå·±çš„ï¼Œå¯ä»¥æ·»åŠ ä»¥ä¸‹é…ç½®git config --global http.postBuffer 524288000 æ–¹æ³•å››ï¼šç½‘é€Ÿå¤ªæ…¢ï¼Œæ¢ä¸ªç½‘é€Ÿå¿«çš„ç¯å¢ƒã€‚ Referencewindows - git clone error: RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 10054 - Stack Overflowè§£å†³ OpenSSL SSL_read: Connection was reset, errno 10054 å•é¡Œ","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"C è¯­è¨€ä¸­çš„å˜é•¿æ•°ç»„ä¸é›¶é•¿æ•°ç»„","slug":"Cè¯­è¨€ä¸­çš„å˜é•¿æ•°ç»„ä¸é›¶é•¿æ•°ç»„","date":"2022-02-11T13:09:35.000Z","updated":"2022-10-15T03:14:29.150Z","comments":true,"path":"2022/02/11/Cè¯­è¨€ä¸­çš„å˜é•¿æ•°ç»„ä¸é›¶é•¿æ•°ç»„/","link":"","permalink":"http://example.com/2022/02/11/C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%8F%98%E9%95%BF%E6%95%B0%E7%BB%84%E4%B8%8E%E9%9B%B6%E9%95%BF%E6%95%B0%E7%BB%84/","excerpt":"","text":"å˜é•¿æ•°ç»„æƒ³å¿…å¾ˆå¤šå­¦ä¹  C è¯­è¨€çš„äººéƒ½ä¼šåœ¨ä¹¦ä¸Šçœ‹åˆ°ï¼Œæ•°ç»„åœ¨åˆå§‹åŒ–æ—¶å¿…é¡»è¦ç¡®å®šé•¿åº¦ï¼ˆç»´åº¦ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´å®šä¹‰æ•°ç»„æ—¶ï¼Œç»´åº¦ä¸€å®šè¦ç”¨å¸¸é‡ã€‚ä½†æ˜¯åœ¨ç¼–ç¨‹ä¸­å¾ˆå¤šäººè‚¯å®šå‘ç°äº†ï¼ŒåŠæ—¶åƒä¸‹é¢è¿™æ ·å†™ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ 12int n; int array[n]; è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿéš¾é“ä»¥å‰æˆ‘å­¦çš„æ˜¯é”™çš„å—ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚æœ€å®˜æ–¹çš„è§£é‡Šåº”è¯¥æ˜¯ C è¯­è¨€çš„è§„èŒƒå’Œç¼–è¯‘å™¨çš„è§„èŒƒè¯´æ˜äº†ã€‚ åœ¨ ISO/IEC9899 æ ‡å‡†çš„ 6.7.5.2 Array declarators ä¸­æ˜ç¡®è¯´æ˜äº†æ•°ç»„çš„é•¿åº¦å¯ä»¥ä¸ºå˜é‡çš„ï¼Œç§°ä¸ºå˜é•¿æ•°ç»„ï¼ˆVLAï¼Œvariable length arrayï¼‰ã€‚ï¼ˆæ³¨ï¼šè¿™é‡Œçš„å˜é•¿æŒ‡çš„æ˜¯æ•°ç»„çš„é•¿åº¦æ˜¯åœ¨è¿è¡Œæ—¶æ‰èƒ½å†³å®šï¼Œä½†ä¸€æ—¦å†³å®šåœ¨æ•°ç»„çš„ç”Ÿå‘½å‘¨æœŸå†…å°±ä¸ä¼šå†å˜ã€‚ï¼‰ åœ¨ GCC æ ‡å‡†è§„èŒƒçš„ 6.19 Arrays of Variable Length ä¸­æŒ‡å‡ºï¼Œä½œä¸ºç¼–è¯‘å™¨æ‰©å±•ï¼ŒGCC åœ¨ C90 æ¨¡å¼å’Œ C++ ç¼–è¯‘å™¨ä¸‹éµå®ˆ ISO C99 å…³äºå˜é•¿æ•°ç»„çš„è§„èŒƒã€‚ åŸæ¥è¿™ç§è¯­æ³•ç¡®å®æ˜¯ C è¯­è¨€è§„èŒƒï¼ŒGCC éå¸¸å®Œç¾çš„æ”¯æŒäº† ISO C99ã€‚ä½†æ˜¯åœ¨ C99 ä¹‹å‰çš„ C è¯­è¨€ä¸­ï¼Œå˜é•¿æ•°ç»„çš„è¯­æ³•æ˜¯ä¸å­˜åœ¨çš„ã€‚ è¿™ç§å˜é•¿æ•°ç»„æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå®ƒå¯ä»¥å®ç°ä¸allocaå‡½æ•°ä¸€æ ·çš„æ•ˆæœï¼Œåœ¨æ ˆä¸Šè¿›è¡ŒåŠ¨æ€çš„ç©ºé—´åˆ†é…ï¼Œå¹¶ä¸”åœ¨å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜ï¼Œæ— éœ€æ‰‹åŠ¨é‡Šæ”¾ã€‚ alloca å‡½æ•°ç”¨æ¥åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œå½“å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€æ‰‹åŠ¨å†å»é‡Šæ”¾ï¼› å¯å˜æ•°ç»„ç¤ºä¾‹ï¼šæ‰€æœ‰å¯å˜ä¿®æ”¹ (VM) ç±»å‹çš„å£°æ˜å¿…é¡»åœ¨å—èŒƒå›´æˆ–å‡½æ•°åŸå‹èŒƒå›´å†…ã€‚ä½¿ç”¨ static æˆ– extern å­˜å‚¨ç±»è¯´æ˜ç¬¦å£°æ˜çš„æ•°ç»„å¯¹è±¡ä¸èƒ½å…·æœ‰å¯å˜é•¿åº¦æ•°ç»„ (VLA) ç±»å‹ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨é™æ€å­˜å‚¨ç±»è¯´æ˜ç¬¦å£°æ˜çš„å¯¹è±¡å¯ä»¥å…·æœ‰ VM ç±»å‹ï¼ˆå³ï¼ŒæŒ‡å‘ VLA ç±»å‹çš„æŒ‡é’ˆï¼‰ã€‚æœ€åï¼Œä½¿ç”¨ VM ç±»å‹å£°æ˜çš„æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½å¿…é¡»æ˜¯æ™®é€šæ ‡è¯†ç¬¦ï¼Œå› æ­¤ä¸èƒ½æ˜¯ç»“æ„æˆ–è”åˆçš„æˆå‘˜ã€‚ 12345678910111213141516171819202122extern int n;int A[n]; // Error - file scope VLA.extern int (*p2)[n]; // Error - file scope VM.int B[100]; // OK - file scope but not VM.void fvla(int m, int C[m][m]) // OK - VLA with prototype scope.&#123; typedef int VLA[m][m] // OK - block scope typedef VLA. struct tag &#123; int (*y)[n]; // Error - y not ordinary identifier. int z[n]; // Error - z not ordinary identifier. &#125;; int D[m]; // OK - auto VLA. static int E[m]; // Error - static block scope VLA. extern int F[m]; // Error - F has linkage and is VLA. int (*s)[m]; // OK - auto pointer to VLA. extern int (*r)[m]; // Error - r had linkage and is // a pointer to VLA. static int (*q)[m] = &amp;B; // OK - q is a static block // pointer to VLA.&#125; é›¶é•¿æ•°ç»„GNU/GCC åœ¨æ ‡å‡†çš„ C/C++ åŸºç¡€ä¸Šåšäº†æœ‰å®ç”¨æ€§çš„æ‰©å±•ï¼Œé›¶é•¿åº¦æ•°ç»„ï¼ˆArrays of Length Zeroï¼‰å°±æ˜¯å…¶ä¸­ä¸€ä¸ªçŸ¥åçš„æ‰©å±•ã€‚ä½¿ç”¨é›¶é•¿æ•°ç»„ï¼ŒæŠŠå®ƒä½œä¸ºç»“æ„ä½“çš„æœ€åä¸€ä¸ªå…ƒç´ éå¸¸æœ‰ç”¨ï¼š 1234567struct line &#123; int length; char contents[0];&#125;;struct line *thisline = (struct line *) malloc (sizeof (struct line) + this_length);thisline-&gt;length = this_length; ä»ä¸Šä¾‹å°±å¯ä»¥çœ‹å‡ºï¼Œé›¶é•¿æ•°ç»„åœ¨æœ‰å›ºå®šå¤´éƒ¨çš„å¯å˜å¯¹è±¡ä¸Šéå¸¸é€‚ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å¯¹è±¡çš„å¤§å°åŠ¨æ€åœ°å»åˆ†é…ç»“æ„ä½“çš„å¤§å°ã€‚ åœ¨ Linux å†…æ ¸ä¸­ä¹Ÿæœ‰è¿™ç§åº”ç”¨ï¼Œä¾‹å¦‚ç”±äº PID å‘½åç©ºé—´çš„å­˜åœ¨ï¼Œæ¯ä¸ªè¿›ç¨‹ PID éœ€è¦æ˜ å°„åˆ°æ‰€æœ‰èƒ½çœ‹åˆ°å…¶çš„å‘½åç©ºé—´ä¸Šï¼Œä½†è¯¥è¿›ç¨‹æ‰€åœ¨çš„å‘½åç©ºé—´åœ¨å¼€å§‹å¹¶ä¸ç¡®å®šï¼ˆä½†è‡³å°‘ä¸º init å‘½åç©ºé—´ï¼‰ï¼Œéœ€è¦åœ¨è¿è¡Œæ˜¯æ ¹æ® level çš„å€¼æ¥ç¡®å®šï¼Œæ‰€ä»¥åœ¨è¯¥ç»“æ„ä½“åé¢å¢åŠ äº†ä¸€ä¸ªé•¿åº¦ä¸º 1 çš„æ•°ç»„ï¼ˆå› ä¸ºè‡³å°‘åœ¨ä¸€ä¸ªinitå‘½åç©ºé—´ä¸Šï¼‰ï¼Œä½¿å¾—è¯¥ç»“æ„ä½“ pid æ˜¯ä¸ªå¯å˜é•¿çš„ç»“æ„ä½“ï¼Œåœ¨è¿è¡Œæ—¶æ ¹æ®è¿›ç¨‹æ‰€å¤„çš„å‘½åç©ºé—´çš„ level æ¥å†³å®š numbers åˆ†é…å¤šå¤§ã€‚ï¼ˆæ³¨ï¼šè™½ç„¶ä¸æ˜¯é›¶é•¿åº¦çš„æ•°ç»„ï¼Œä½†ç”¨æ³•æ˜¯ä¸€æ ·çš„ï¼‰ 123456789struct pid&#123; atomic_t count; unsigned int level; /* lists of tasks that use this pid */ struct hlist_head tasks[PIDTYPE_MAX]; struct rcu_head rcu; struct upid numbers[1];&#125;; ä»€ä¹ˆ 0 é•¿åº¦æ•°ç»„ä¸å ç”¨å­˜å‚¨ç©ºé—´0 é•¿åº¦æ•°ç»„ä¸æŒ‡é’ˆå®ç°æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Œä¸ºä»€ä¹ˆ 0 é•¿åº¦æ•°ç»„ä¸å ç”¨å­˜å‚¨ç©ºé—´å‘¢ï¼Ÿ å…¶å®æœ¬è´¨ä¸Šæ¶‰åŠåˆ°çš„æ˜¯ä¸€ä¸ª C è¯­è¨€é‡Œé¢çš„æ•°ç»„å’ŒæŒ‡é’ˆçš„åŒºåˆ«é—®é¢˜ã€‚char a[1] é‡Œé¢çš„ a å’Œ char *b çš„ b ç›¸åŒå—ï¼Ÿ ã€ŠProgramming Abstractions in Cã€‹ï¼ˆRoberts, E. S.ï¼Œæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾ï¼Œ2004.6ï¼‰82 é¡µé‡Œé¢è¯´ã€‚ â€œarr is defined to be identical to &amp;arr[0]â€. ä¹Ÿå°±æ˜¯è¯´ï¼Œchar a[1]é‡Œé¢çš„aå®é™…æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œç­‰äº&amp;a[0]ã€‚è€Œchar *bæ˜¯æœ‰ä¸€ä¸ªå®å®åœ¨åœ¨çš„æŒ‡é’ˆå˜é‡bå­˜åœ¨ã€‚æ‰€ä»¥ï¼Œa=bæ˜¯ä¸å…è®¸çš„ï¼Œè€Œb=aæ˜¯å…è®¸çš„ã€‚ æœ¬è´¨ä¸Šå› ä¸ºæ•°ç»„åå®ƒåªæ˜¯ä¸€ä¸ªåç§»é‡ï¼Œæ•°ç»„åè¿™ä¸ªç¬¦å·æœ¬èº«ä»£ è¡¨äº†ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„åœ°å€å¸¸é‡ ï¼ˆæ³¨æ„ï¼šæ•°ç»„åæ°¸è¿œéƒ½ä¸ä¼šæ˜¯æŒ‡é’ˆï¼ ï¼‰ï¼Œä½†å¯¹äºè¿™ä¸ªæ•°ç»„çš„å¤§å°ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œå¯¹äºç¼–è¯‘å™¨è€Œè¨€ï¼Œæ•°ç»„åä»…ä»…æ˜¯ä¸€ä¸ªç¬¦å·ï¼Œå®ƒä¸ä¼šå ç”¨ä»»ä½•ç©ºé—´ï¼Œå®ƒåœ¨ç»“æ„ä½“ä¸­ï¼Œåªæ˜¯ä»£è¡¨äº†ä¸€ä¸ªåç§»é‡ï¼Œä»£è¡¨ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„åœ°å€å¸¸é‡ï¼ Referencesalloca å‡½æ•°ç”¨æ¥åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œå½“å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€æ‰‹åŠ¨å†å»é‡Šæ”¾ C è¯­è¨€ 0 é•¿åº¦æ•°ç»„ (å¯å˜æ•°ç»„/æŸ”æ€§æ•°ç»„) è¯¦è§£_OSKernelLAB(gatieme)-CSDN åšå®¢_æŸ”æ€§æ•°ç»„ é›¶é•¿æ•°ç»„ï¼ˆæŸ”æ€§æ•°ç»„ã€å¯å˜æ•°ç»„ï¼‰çš„ä½¿ç”¨_ç¦¾ä»”ä»”çš„åšå®¢-CSDN åšå®¢ Zero Length - Using the GNU Compiler Collection (GCC)","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"}]},{"title":"SSH åŸç†","slug":"SSHåŸç†","date":"2022-01-27T13:30:29.000Z","updated":"2022-10-15T02:59:01.676Z","comments":true,"path":"2022/01/27/SSHåŸç†/","link":"","permalink":"http://example.com/2022/01/27/SSH%E5%8E%9F%E7%90%86/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"QEMU æºç åˆ†æ-å†…å­˜è™šæ‹ŸåŒ–","slug":"QEMUæºç åˆ†æ-å†…å­˜è™šæ‹ŸåŒ–","date":"2022-01-25T05:42:11.000Z","updated":"2022-10-15T03:14:29.433Z","comments":true,"path":"2022/01/25/QEMUæºç åˆ†æ-å†…å­˜è™šæ‹ŸåŒ–/","link":"","permalink":"http://example.com/2022/01/25/QEMU%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E5%86%85%E5%AD%98%E8%99%9A%E6%8B%9F%E5%8C%96/","excerpt":"","text":"1.å¤§éƒ¨åˆ†è½¬è½½è‡ªQEMU å†…å­˜è™šæ‹ŸåŒ–æºç åˆ†æ | Keep Coding | è‹æ˜“åŒ—2.åŸæ–‡æºç ä¸º QEMU1.2.0ï¼Œç‰ˆæœ¬è¾ƒæ—§ï¼Œéƒ¨åˆ†æºç å†…å®¹æ ¹æ® QEMU6.2 ç‰ˆæœ¬ä¿®æ”¹3.éƒ¨åˆ†å†…å®¹æ ¹æ®è‡ªå·±ç†è§£è¡¥å……æ·»åŠ  æ¦‚è¿°æˆ‘ä»¬çŸ¥é“æ“ä½œç³»ç»Ÿç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…è™šæ‹Ÿå†…å­˜ï¼Œé€šè¿‡é¡µè¡¨æ˜ å°„ï¼Œå˜æˆç‰©ç†å†…å­˜è¿›è¡Œè®¿é—®ã€‚å½“æœ‰äº†è™šæ‹Ÿæœºä¹‹åï¼Œæƒ…å†µä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚å› ä¸ºè™šæ‹Ÿæœºå¯¹äºç‰©ç†æœºæ¥è®²æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯è™šæ‹Ÿæœºé‡Œé¢ä¹Ÿæœ‰å†…æ ¸ï¼Œä¹Ÿæœ‰è™šæ‹Ÿæœºé‡Œé¢è·‘çš„è¿›ç¨‹ã€‚æ‰€ä»¥æœ‰äº†è™šæ‹Ÿæœºï¼Œå†…å­˜å°±å˜æˆäº†å››ç±»ï¼š è™šæ‹Ÿæœºé‡Œé¢çš„è™šæ‹Ÿå†…å­˜ï¼ˆGuest OS Virtual Memoryï¼ŒGVAï¼‰ï¼Œè¿™æ˜¯è™šæ‹Ÿæœºé‡Œé¢çš„è¿›ç¨‹çœ‹åˆ°çš„å†…å­˜ç©ºé—´ï¼› è™šæ‹Ÿæœºé‡Œé¢çš„ç‰©ç†å†…å­˜ï¼ˆGuest OS Physical Memoryï¼ŒGPAï¼‰ï¼Œè¿™æ˜¯è™šæ‹Ÿæœºé‡Œé¢çš„æ“ä½œç³»ç»Ÿçœ‹åˆ°çš„å†…å­˜ï¼Œå®ƒè®¤ä¸ºè¿™æ˜¯ç‰©ç†å†…å­˜ï¼› ç‰©ç†æœºçš„è™šæ‹Ÿå†…å­˜ï¼ˆHost Virtual Memoryï¼ŒHVAï¼‰ï¼Œè¿™æ˜¯ç‰©ç†æœºä¸Šçš„ qemu è¿›ç¨‹çœ‹åˆ°çš„å†…å­˜ç©ºé—´ï¼› ç‰©ç†æœºçš„ç‰©ç†å†…å­˜ï¼ˆHost Physical Memoryï¼ŒHPAï¼‰ï¼Œè¿™æ˜¯ç‰©ç†æœºä¸Šçš„æ“ä½œç³»ç»Ÿçœ‹åˆ°çš„å†…å­˜ã€‚ å†…å­˜è™šæ‹ŸåŒ–çš„å…³é”®åœ¨äºç»´æŠ¤ GPA åˆ° HVA çš„æ˜ å°„å…³ç³»ã€‚ é¡µé¢åˆ†é…å’Œæ˜ å°„çš„ä¸¤ç§æ–¹å¼è¦ææ¸…æ¥š QEMU system emulation çš„ä»¿çœŸæ¶æ„ï¼Œé¦–å…ˆå¯¹äº Host OSï¼Œå°† QEMU ä½œä¸ºè¿›ç¨‹å¯åŠ¨ï¼Œç„¶åå¯¹äº QEMU è¿›ç¨‹ï¼Œä¼šä»¿çœŸå„ç§ç¡¬ä»¶å’Œè¿è¡Œ Guest OSï¼Œåœ¨è¿™å±‚ OS ä¸Šè¿è¡Œè¦å…¨ç³»ç»Ÿæ¨¡æ‹Ÿçš„åº”ç”¨ç¨‹åºï¼Œå› æ­¤å¯¹äº Guest OS ç®¡ç†çš„å†…å­˜è¦å®ç°åˆ° QEMU è¿›ç¨‹çš„è™šæ‹Ÿç©ºé—´çš„è½¬æ¢éœ€è¦ softMMUï¼ˆå³éœ€è¦å¯¹ GPA åˆ° HVA è¿›è¡Œè½¬æ¢ï¼‰ã€‚ä» GVA åˆ° GPA åˆ° HVA åˆ° HPAï¼Œæ€§èƒ½å¾ˆå·®ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„æ€è·¯ã€‚ å½±å­é¡µè¡¨ Shadow Page Tableï¼ŒSPTç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯è½¯ä»¶çš„æ–¹å¼ï¼Œå½±å­é¡µè¡¨ï¼ˆShadow Page Tableï¼‰ã€‚ KVM é€šè¿‡ç»´æŠ¤è®°å½• GVA-&gt;HPA çš„å½±å­é¡µè¡¨ SPTï¼Œå‡å°‘äº†åœ°å€è½¬æ¢å¸¦æ¥çš„å¼€é”€ï¼Œå¯ä»¥ç›´æ¥å°† GVA è½¬æ¢ä¸º HPAã€‚ å†…å­˜æ˜ å°„è¦é€šè¿‡é¡µè¡¨æ¥ç®¡ç†ï¼Œé¡µè¡¨åœ°å€åº”è¯¥æ”¾åœ¨ CR3 å¯„å­˜å™¨é‡Œé¢ã€‚åœ¨è½¯ä»¶è™šæ‹ŸåŒ–çš„å†…å­˜è½¬æ¢ä¸­ï¼ŒGVA åˆ° GPA çš„è½¬æ¢é€šè¿‡æŸ¥è¯¢ CR3 å¯„å­˜å™¨æ¥å®Œæˆï¼ŒCR3 ä¸­ä¿å­˜äº† Guest çš„é¡µè¡¨åŸºåœ°å€ï¼Œç„¶åè½½å…¥ MMU ä¸­è¿›è¡Œåœ°å€è½¬æ¢ã€‚ åœ¨åŠ å…¥äº† SPT æŠ€æœ¯åï¼Œå½“ Guest è®¿é—® CR3 æ—¶ï¼ŒKVM ä¼šæ•è·åˆ°è¿™ä¸ªæ“ä½œ EXIT_REASON_CR_ACCESSï¼Œä¹‹å KVM ä¼šè½½å…¥ç‰¹æ®Šçš„ CR3 å’Œå½±å­é¡µè¡¨ï¼Œæ¬ºéª— Guest è¿™å°±æ˜¯çœŸå®çš„ CR3ã€‚ä¹‹åå°±å’Œä¼ ç»Ÿçš„è®¿é—®å†…å­˜æ–¹å¼ä¸€è‡´ï¼Œå½“éœ€è¦è®¿é—®ç‰©ç†å†…å­˜çš„æ—¶å€™ï¼Œåªä¼šç»è¿‡ä¸€å±‚å½±å­é¡µè¡¨çš„è½¬æ¢ã€‚ æœ¬æ¥çš„è¿‡ç¨‹æ˜¯ï¼Œå®¢æˆ·æœºè¦é€šè¿‡ cr3 æ‰¾åˆ°å®¢æˆ·æœºçš„é¡µè¡¨ï¼Œå®ç°ä» GVA åˆ° GPA çš„è½¬æ¢ï¼Œç„¶ååœ¨å®¿ä¸»æœºä¸Šï¼Œè¦é€šè¿‡ cr3 æ‰¾åˆ°å®¿ä¸»æœºçš„é¡µè¡¨ï¼Œå®ç°ä» HVA åˆ° HPA çš„è½¬æ¢ã€‚ä¸ºäº†å®ç°å®¢æˆ·æœºè™šæ‹Ÿåœ°å€ç©ºé—´åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€ç©ºé—´çš„ç›´æ¥æ˜ å°„ã€‚å®¢æˆ·æœºä¸­æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ‰€ä»¥ KVM éœ€è¦ä¸ºå®¢æˆ·æœºä¸­çš„æ¯ä¸ªè¿›ç¨‹é¡µè¡¨éƒ½è¦ç»´æŠ¤ä¸€å¥—ç›¸åº”çš„å½±å­é¡µè¡¨ã€‚åœ¨å®¢æˆ·æœºè®¿é—®å†…å­˜æ—¶ï¼Œä½¿ç”¨çš„ä¸æ˜¯å®¢æˆ·æœºçš„åŸæ¥çš„é¡µè¡¨ï¼Œè€Œæ˜¯è¿™ä¸ªé¡µè¡¨å¯¹åº”çš„å½±å­é¡µè¡¨ï¼Œä»è€Œå®ç°äº†ä»å®¢æˆ·æœºè™šæ‹Ÿåœ°å€åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€çš„ç›´æ¥è½¬æ¢ã€‚è€Œä¸”ï¼Œåœ¨ TLB å’Œ CPU ç¼“å­˜ä¸Šç¼“å­˜çš„æ˜¯æ¥è‡ªå½±å­é¡µè¡¨ä¸­å®¢æˆ·æœºè™šæ‹Ÿåœ°å€å’Œå®¿ä¸»æœºç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„ï¼Œä¹Ÿå› æ­¤æé«˜äº†ç¼“å­˜çš„æ•ˆç‡ã€‚ ä¸ºäº†å¿«é€Ÿæ£€ç´¢ Guest é¡µè¡¨å¯¹åº”çš„å½±å­é¡µè¡¨ï¼ŒKVM ä¸ºæ¯ä¸ªå®¢æˆ·æœºç»´æŠ¤äº†ä¸€ä¸ª hash è¡¨æ¥è¿›è¡Œå®¢æˆ·æœºé¡µè¡¨åˆ°å½±å­é¡µè¡¨ä¹‹é—´çš„æ˜ å°„ã€‚å¯¹äºæ¯ä¸€ä¸ª Guest æ¥è¯´ï¼Œå…¶é¡µç›®å½•å’Œé¡µè¡¨éƒ½æœ‰å”¯ä¸€çš„ GPAï¼Œé€šè¿‡é¡µç›®å½•/é¡µè¡¨çš„ GPA å°±å¯ä»¥åœ¨å“ˆå¸Œé“¾è¡¨ä¸­å¿«é€Ÿåœ°æ‰¾åˆ°å¯¹åº”çš„å½±å­é¡µç›®å½•/é¡µè¡¨ã€‚ å½“ Guest åˆ‡æ¢è¿›ç¨‹æ—¶ï¼ŒGuest ä¼šæŠŠå¾…åˆ‡æ¢è¿›ç¨‹çš„é¡µè¡¨åŸºå€è½½å…¥ CR3ï¼Œè€Œ KVM å°†ä¼šæˆªè·è¿™ä¸€ç‰¹æƒæŒ‡ä»¤ã€‚KVM åœ¨å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°ä¸æ­¤é¡µè¡¨åŸºå€å¯¹åº”çš„å½±å­é¡µè¡¨åŸºå€ï¼Œè½½å…¥ Guest CR3ï¼Œä½¿ Guest åœ¨æ¢å¤è¿è¡Œæ—¶ CR3 å®é™…æŒ‡å‘çš„æ˜¯æ–°åˆ‡æ¢è¿›ç¨‹å¯¹åº”çš„å½±å­é¡µè¡¨ã€‚ å½±å­é¡µè¡¨çš„å¼•å…¥ï¼Œå‡å°‘äº† GVA-&gt;HPA çš„è½¬æ¢å¼€é”€ï¼Œä½†æ˜¯ç¼ºç‚¹åœ¨äºéœ€è¦ä¸º Guest çš„æ¯ä¸ªè¿›ç¨‹éƒ½ç»´æŠ¤ä¸€ä¸ªå½±å­é¡µè¡¨ï¼Œè¿™å°†å¸¦æ¥å¾ˆå¤§çš„å†…å­˜å¼€é”€ã€‚åŒæ—¶å½±å­é¡µè¡¨çš„å»ºç«‹æ˜¯å¾ˆè€—æ—¶çš„ï¼Œå¦‚æœ Guest çš„è¿›ç¨‹è¿‡å¤šï¼Œå°†å¯¼è‡´å½±å­é¡µè¡¨é¢‘ç¹åˆ‡æ¢ã€‚ å› æ­¤ Intel å’Œ AMD åœ¨æ­¤åŸºç¡€ä¸Šæä¾›äº†åŸºäºç¡¬ä»¶çš„è™šæ‹ŸåŒ–æŠ€æœ¯ EPTã€‚ æ‰©å±•é¡µè¡¨ Extent Page Tableï¼ŒEPTIntel çš„ EPTï¼ˆExtent Page Tableï¼‰æŠ€æœ¯å’Œ AMD çš„ NPTï¼ˆNest Page Tableï¼‰æŠ€æœ¯éƒ½å¯¹å†…å­˜è™šæ‹ŸåŒ–æä¾›äº†ç¡¬ä»¶æ”¯æŒã€‚è¿™ä¸¤ç§æŠ€æœ¯åŸç†ç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨ç¡¬ä»¶å±‚é¢ä¸Šå®ç° GVA åˆ° HPA ä¹‹é—´çš„è½¬æ¢ã€‚ä¸‹é¢å°±ä»¥ EPT ä¸ºä¾‹åˆ†æä¸€ä¸‹ KVM åŸºäºç¡¬ä»¶è¾…åŠ©çš„å†…å­˜è™šæ‹ŸåŒ–å®ç°ã€‚ EPT åœ¨åŸæœ‰å®¢æˆ·æœºé¡µè¡¨å¯¹å®¢æˆ·æœºè™šæ‹Ÿåœ°å€ GVA åˆ°å®¢æˆ·æœºç‰©ç†åœ°å€ GPA æ˜ å°„çš„åŸºç¡€ä¸Šï¼Œåˆå¼•å…¥äº† EPT é¡µè¡¨æ¥å®ç°å®¢æˆ·æœºç‰©ç†åœ°å€ GPA åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€ HPA çš„å¦ä¸€æ¬¡æ˜ å°„ã€‚å®¢æˆ·æœºè¿è¡Œæ—¶ï¼Œå®¢æˆ·æœºé¡µè¡¨è¢«è½½å…¥ CR3ï¼Œè€Œ EPT é¡µè¡¨è¢«è½½å…¥ä¸“é—¨çš„ EPT é¡µè¡¨æŒ‡é’ˆå¯„å­˜å™¨ EPTPã€‚ å³ EPT æŠ€æœ¯é‡‡ç”¨äº†åœ¨ä¸¤çº§é¡µè¡¨ç»“æ„ï¼Œå³åŸæœ‰ Guest OS é¡µè¡¨å¯¹ GVA-&gt;GPA æ˜ å°„çš„åŸºç¡€ä¸Šï¼Œåˆå¼•å…¥äº† EPT é¡µè¡¨æ¥å®ç° GPA-&gt;HPA çš„å¦ä¸€æ¬¡æ˜ å°„ï¼Œè¿™ä¸¤æ¬¡åœ°å€æ˜ å°„éƒ½æ˜¯ç”±ç¡¬ä»¶è‡ªåŠ¨å®Œæˆã€‚ æœ‰äº† EPTï¼Œåœ¨GPA-&gt;HPAè½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œç¼ºé¡µä¼šäº§ç”Ÿ EPT ç¼ºé¡µå¼‚å¸¸ã€‚KVM é¦–å…ˆæ ¹æ®å¼•èµ·å¼‚å¸¸çš„å®¢æˆ·æœºç‰©ç†åœ°å€ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„å®¿ä¸»æœºè™šæ‹Ÿåœ°å€ï¼Œç„¶åä¸ºæ­¤è™šæ‹Ÿåœ°å€åˆ†é…æ–°çš„ç‰©ç†é¡µï¼Œæœ€å KVM å†æ›´æ–° EPT é¡µè¡¨ï¼Œå»ºç«‹èµ·å¼•èµ·å¼‚å¸¸çš„å®¢æˆ·æœºç‰©ç†åœ°å€åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„ã€‚ KVM åªéœ€ä¸ºæ¯ä¸ªå®¢æˆ·æœºç»´æŠ¤ä¸€å¥— EPT é¡µè¡¨ï¼Œä¹Ÿå¤§å¤§å‡å°‘äº†å†…å­˜çš„å¼€é”€ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹ç¬¬äºŒç§æ–¹å¼ã€‚å› ä¸ºä½¿ç”¨äº† EPT ä¹‹åï¼Œå®¢æˆ·æœºé‡Œé¢çš„é¡µè¡¨æ˜ å°„ï¼Œä¹Ÿå³ä» GVA åˆ° GPA çš„è½¬æ¢ï¼Œè¿˜æ˜¯ç”¨ä¼ ç»Ÿçš„æ–¹å¼ï¼Œå’Œåœ¨å†…å­˜ç®¡ç†é‚£ä¸€ç« è®²çš„æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚è€Œ EPT é‡ç‚¹å¸®æˆ‘ä»¬è§£å†³çš„å°±æ˜¯ä» GPA åˆ° HPA çš„è½¬æ¢é—®é¢˜ã€‚å› ä¸ºè¦ç»è¿‡ä¸¤æ¬¡é¡µè¡¨ï¼Œæ‰€ä»¥ EPT åˆ tdp(two dimentional paging)ã€‚ EPT çš„é¡µè¡¨ç»“æ„ä¹Ÿæ˜¯åˆ†ä¸ºå››å±‚ï¼ŒEPT Pointerï¼ˆEPTPï¼‰æŒ‡å‘ PML4 çš„é¦–åœ°å€ã€‚ QEMU çš„ä¸»è¦å·¥ä½œå†…å­˜è™šæ‹ŸåŒ–çš„ç›®çš„å°±æ˜¯è®©è™šæ‹Ÿæœºèƒ½å¤Ÿæ— ç¼çš„è®¿é—®å†…å­˜ã€‚æœ‰äº† Intel EPT çš„æ”¯æŒåï¼ŒCPU åœ¨ VMX non-root çŠ¶æ€æ—¶è¿›è¡Œå†…å­˜è®¿é—®ä¼šå†åšä¸€æ¬¡ EPT è½¬æ¢ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒQEMU ä¼šè´Ÿè´£ä»¥ä¸‹å†…å®¹ï¼š é¦–å…ˆéœ€è¦ä»è‡ªå·±çš„è¿›ç¨‹åœ°å€ç©ºé—´ä¸­ç”³è¯·å†…å­˜ç”¨äº Guestéœ€è¦å°†ä¸Šä¸€æ­¥ä¸­ç”³è¯·åˆ°çš„å†…å­˜çš„è™šæ‹Ÿåœ°å€ï¼ˆHVAï¼‰å’Œ Guest çš„ç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ä¼ é€’ç»™ KVMï¼ˆkernelï¼‰ï¼Œå³ GPA-&gt;HVAéœ€è¦ç»„ç»‡ä¸€ç³»åˆ—çš„æ•°æ®ç»“æ„æ¥ç®¡ç†è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œå¹¶åœ¨å†…å­˜æ‹“æ‰‘ç»“æ„æ›´æ”¹æ—¶å°†æœ€æ–°çš„å†…å­˜ä¿¡æ¯åŒæ­¥è‡³ KVM ä¸­ QEMU å’Œ KVM çš„å·¥ä½œåˆ†ç•ŒQEMU å’Œ KVM ä¹‹é—´æ˜¯é€šè¿‡ KVM æä¾›çš„ ioctl() æ¥å£è¿›è¡Œäº¤äº’çš„ã€‚åœ¨å†…æ ¸çš„ kvm_vm_ioctl() ä¸­ï¼Œè®¾ç½®è™šæ‹Ÿæœºå†…å­˜çš„ç³»ç»Ÿè°ƒç”¨ã€kernel å°±æ˜¯ä¸€ç³»åˆ—ç³»ç»Ÿè°ƒç”¨å‡½æ•°æ¥å£å’Œå¤„ç†é€»è¾‘ï¼Œå…¶ä¸­æœ‰ä¸ªå¤„ç†â€åˆ›å»º/è®¾ç½®è™šæ‹Ÿæœºå†…å­˜â€œçš„ç³»ç»Ÿè°ƒç”¨æ¥å£ã€‘ä¸º VM_SET_USER_MEMORY_REGIONï¼š 1234567891011121314151617181920static long kvm_vm_ioctl(struct file *filp, unsigned int ioctl, unsigned long arg)&#123; /* ... */ case KVM_SET_USER_MEMORY_REGION: &#123; // åœ¨ KVM ä¸­æ³¨å†Œç”¨æˆ·ç©ºé—´ä¼ å…¥çš„å†…å­˜ä¿¡æ¯ struct kvm_userspace_memory_region kvm_userspace_mem; r = -EFAULT; // å°†ä¼ å…¥çš„æ•°æ®ç»“æ„å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´ if (copy_from_user(&amp;kvm_userspace_mem, argp, sizeof kvm_userspace_mem)) goto out; // å®é™…è¿›è¡Œå¤„ç†çš„å‡½æ•° r = kvm_vm_ioctl_set_memory_region(kvm, &amp;kvm_userspace_mem, 1); if (r) goto out; break; &#125; /* ... */&#125; å¯ä»¥çœ‹åˆ°è¿™é‡Œéœ€è¦ä¼ é€’çš„å‚æ•°ç±»å‹ä¸º kvm_userspace_memory_regionï¼š 12345678/* for KVM_SET_USER_MEMORY_REGION */struct kvm_userspace_memory_region &#123; __u32 slot; // slot ç¼–å· [å‚è€ƒï¼šhttps://www.cnblogs.com/LoyenWang/p/11922887.html] __u32 flags; // æ ‡å¿—ä½ï¼Œä¾‹å¦‚æ˜¯å¦è¿½è¸ªè„é¡µã€æ˜¯å¦å¯ç”¨ç­‰ __u64 guest_phys_addr; // Guest ç‰©ç†åœ°å€ï¼Œå³ GPA __u64 memory_size; // å†…å­˜å¤§å°ï¼Œå•ä½ bytes __u64 userspace_addr; // ä» QEMU è¿›ç¨‹åœ°å€ç©ºé—´ä¸­åˆ†é…å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå³ HVA&#125;; KVM_SET_USER_MEMORY_REGIONè¿™ä¸ª ioctl ä¸»è¦ç›®çš„å°±æ˜¯è®¾ç½®GPA-&gt;HVAçš„æ˜ å°„å…³ç³»ï¼ŒKVM ä¼šç»§ç»­è°ƒç”¨kvm_vm_ioctl_set_memory_region()ï¼Œåœ¨å†…æ ¸ç©ºé—´ç»´æŠ¤å¹¶ç®¡ç† Guest çš„å†…å­˜ã€‚ ç›¸å…³æ•°æ®ç»“æ„AddressSpaceç»“æ„ä½“å®šä¹‰QEMU ç”¨ AddressSpace ç»“æ„ä½“è¡¨ç¤º Guest ä¸­ CPU/è®¾å¤‡çœ‹åˆ°çš„å†…å­˜ã€ä¹Ÿå°±æ˜¯Guest OS å¯ä»¥åœ¨ QEMU è¿›ç¨‹è™šå­˜ä¸­ç”¨åˆ°çš„æ‰€æœ‰å†…å­˜ï¼Œæ˜¯ MemoryRegion çš„é›†åˆï¼Œå³ GPA çš„æ•´ä½“ã€‘ï¼Œç±»ä¼¼äºç‰©ç†æœºä¸­åœ°å€ç©ºé—´çš„æ¦‚å¿µï¼Œä½†åœ¨è¿™é‡Œè¡¨ç¤ºçš„æ˜¯ Guest çš„ä¸€æ®µåœ°å€ç©ºé—´ï¼Œå¦‚å†…å­˜åœ°å€ç©ºé—´ address_space_memory ã€I/O åœ°å€ç©ºé—´address_space_ioï¼Œå®ƒåœ¨ QEMU æºç memory.cä¸­å®šä¹‰ï¼š 1234567891011121314151617/** * struct AddressSpace: describes a mapping of addresses to #MemoryRegion objects */struct AddressSpace &#123; /* private: */ struct rcu_head rcu; char *name; MemoryRegion *root; /* Accessed via RCU. */ struct FlatView *current_map; int ioeventfd_nb; struct MemoryRegionIoeventfd *ioeventfds; QTAILQ_HEAD(, MemoryListener) listeners; QTAILQ_ENTRY(AddressSpace) address_spaces_link;&#125;; æ¯ä¸ª AddressSpace ä¸€èˆ¬åŒ…å«ä¸€ç³»åˆ—çš„ MemoryRegionï¼šrootæŒ‡é’ˆæŒ‡å‘æ ¹çº§ MemoryRegionï¼Œè€Œ root å¯èƒ½æœ‰è‡ªå·±çš„è‹¥å¹²ä¸ª sub-regionsï¼ˆå­èŠ‚ç‚¹ï¼‰ï¼Œäºæ˜¯å½¢æˆæ ‘çŠ¶ç»“æ„ã€‚è¿™äº› MemoryRegion é€šè¿‡æ ‘è¿æ¥èµ·æ¥ï¼Œæ ‘çš„æ ¹å³ä¸º AddressSpace çš„ root åŸŸã€‚ å…¨å±€å˜é‡å¦å¤–ï¼ŒQEMU ä¸­æœ‰ä¸¤ä¸ªå…¨å±€çš„é™æ€ AddressSpaceï¼Œåœ¨ memory.c ä¸­å®šä¹‰ï¼š 12static AddressSpace address_space_memory; // å†…å­˜åœ°å€ç©ºé—´static AddressSpace address_space_io; // I/O åœ°å€ç©ºé—´ å…¶ root åŸŸåˆ†åˆ«æŒ‡å‘ä¹‹åä¼šæåˆ°çš„ä¸¤ä¸ª MemoryRegion ç±»å‹å˜é‡ï¼šsystem_memoryã€system_ioã€‚ MemoryRegionç»“æ„ä½“å®šä¹‰MemoryRegion è¡¨ç¤ºåœ¨ Guest Memory Layout ä¸­çš„ä¸€æ®µå†…å­˜åŒºåŸŸã€ä¹Ÿå°±æ˜¯å•å…ƒçº§ GPA çš„æ¦‚å¿µï¼ŒGuest OS å¯ä»¥ç®¡ç†åˆ°çš„é‚£äº› Guest ç‰©ç†å†…å­˜å•å…ƒã€‘ï¼Œå®ƒæ˜¯è”ç³» GPA å’Œ RAMBlocksï¼ˆæè¿°çœŸå®å†…å­˜ï¼‰ä¹‹é—´çš„æ¡¥æ¢ï¼Œåœ¨memory.hä¸­å®šä¹‰ï¼š 123456789101112131415161718192021222324252627282930struct MemoryRegion &#123; /* All fields are private - violators will be prosecuted */ const MemoryRegionOps *ops; // å›è°ƒå‡½æ•°é›†åˆ void *opaque; MemoryRegion *parent; // çˆ¶ MemoryRegion æŒ‡é’ˆ Int128 size; // è¯¥åŒºåŸŸå†…å­˜çš„å¤§å° target_phys_addr_t addr; // åœ¨ Address Space ä¸­çš„åœ°å€ï¼Œå³ HVA void (*destructor)(MemoryRegion *mr); ram_addr_t ram_addr; // MemoryRegion çš„èµ·å§‹åœ°å€ï¼Œå³ GPA bool subpage; bool terminates; bool readable; bool ram; // æ˜¯å¦è¡¨ç¤º RAM bool readonly; /* For RAM regions */ bool enabled; // æ˜¯å¦å·²ç»é€šçŸ¥ KVM ä½¿ç”¨è¿™æ®µå†…å­˜ bool rom_device; bool warning_printed; /* For reservations */ MemoryRegion *alias; // æ˜¯å¦ä¸º MemoryRegion alias target_phys_addr_t alias_offset; // è‹¥ä¸º aliasï¼Œåœ¨åŸ MemoryRegion ä¸­çš„ offset unsigned priority; bool may_overlap; QTAILQ_HEAD(subregions, MemoryRegion) subregions; // å­åŒºåŸŸé“¾è¡¨å¤´ QTAILQ_ENTRY(MemoryRegion) subregions_link; // å­åŒºåŸŸé“¾è¡¨èŠ‚ç‚¹ QTAILQ_HEAD(coalesced_ranges, CoalescedMemoryRange) coalesced; const char *name; // MemoryRegion çš„åå­—ï¼Œè°ƒè¯•æ—¶ä½¿ç”¨ uint8_t dirty_log_mask; // è¡¨ç¤ºå“ªä¸€ç§ dirty map è¢«ä½¿ç”¨ï¼Œå…±åˆ†ä¸‰ç§ unsigned ioeventfd_nb; MemoryRegionIoeventfd *ioeventfds;&#125;; å…¨å±€å˜é‡åœ¨ QEMU çš„ exec.c ä¸­ä¹Ÿå®šä¹‰äº†ä¸¤ä¸ªé™æ€çš„ MemoryRegion æŒ‡é’ˆå˜é‡ï¼š 12static MemoryRegion *system_memory; // å†…å­˜ MemoryRegionï¼Œå¯¹åº” address_space_memorystatic MemoryRegion *system_io; // I/O MemoryRegionï¼Œå¯¹åº” address_space_io ä¸ä¸¤ä¸ªå…¨å±€ AddressSpace å¯¹åº”ï¼Œå³ AddressSpace çš„ root åŸŸæŒ‡å‘è¿™ä¸¤ä¸ª MemoryRegionã€‚ MemoryRegion çš„ç±»å‹MemoryRegion æœ‰å¤šç§ç±»å‹ï¼Œå¯ä»¥è¡¨ç¤ºä¸€æ®µ RAMã€ROMã€MMIOã€alias(åˆ«å)ã€‚ è‹¥ä¸º alias åˆ™è¡¨ç¤ºä¸€ä¸ª MemoryRegion çš„éƒ¨åˆ†åŒºåŸŸï¼Œä¾‹å¦‚ï¼ŒQEMU ä¼šä¸º pc.ram è¿™ä¸ªè¡¨ç¤º RAM çš„ MemoryRegion æ·»åŠ ä¸¤ä¸ª aliasï¼šram-below-4g å’Œ ram-above-4gï¼Œä¹‹åä¼šçœ‹åˆ°å…·ä½“çš„ä»£ç å®ä¾‹ã€‚ å¦å¤–ï¼ŒMemoryRegion ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸€ä¸ª containerï¼Œè¿™å°±è¡¨ç¤ºå®ƒåªæ˜¯å…¶ä»–è‹¥å¹²ä¸ª MemoryRegion çš„å®¹å™¨ã€‚ é‚£ä¹ˆè¦å¦‚ä½•åˆ›å»ºä¸åŒç±»å‹çš„ MemoryRegion å‘¢ï¼Ÿ åœ¨ QEMU ä¸­å®é™…ä¸Šæ˜¯é€šè¿‡è°ƒç”¨ä¸åŒçš„åˆå§‹åŒ–å‡½æ•°åŒºåˆ†çš„ã€‚æ ¹æ®ä¸åŒçš„åˆå§‹åŒ–å‡½æ•°åŠå…¶åŠŸèƒ½ï¼Œå¯ä»¥å°† MemoryRegion åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ç±»å‹ï¼š æ ¹çº§ MemoryRegionï¼šç›´æ¥é€šè¿‡ memory_region_init åˆå§‹åŒ–ï¼Œæ²¡æœ‰è‡ªå·±çš„å†…å­˜ï¼Œç”¨äºç®¡ç† subregionï¼Œä¾‹å¦‚ system_memoryï¼š 123456789101112131415161718192021222324252627282930void memory_region_init(MemoryRegion *mr, const char *name, uint64_t size)&#123; mr-&gt;ops = NULL; mr-&gt;parent = NULL; mr-&gt;size = int128_make64(size); if (size == UINT64_MAX) &#123; mr-&gt;size = int128_2_64(); &#125; mr-&gt;addr = 0; mr-&gt;subpage = false; mr-&gt;enabled = true; mr-&gt;terminates = false; // éå®ä½“ MemoryRegionï¼Œæœç´¢æ—¶ä¼šç»§ç»­å‰å¾€å…¶ subregions mr-&gt;ram = false; // æ ¹çº§ MemoryRegion ä¸åˆ†é…å†…å­˜ mr-&gt;readable = true; mr-&gt;readonly = false; mr-&gt;rom_device = false; mr-&gt;destructor = memory_region_destructor_none; mr-&gt;priority = 0; mr-&gt;may_overlap = false; mr-&gt;alias = NULL; QTAILQ_INIT(&amp;mr-&gt;subregions); memset(&amp;mr-&gt;subregions_link, 0, sizeof mr-&gt;subregions_link); QTAILQ_INIT(&amp;mr-&gt;coalesced); mr-&gt;name = g_strdup(name); mr-&gt;dirty_log_mask = 0; mr-&gt;ioeventfd_nb = 0; mr-&gt;ioeventfds = NULL;&#125; å¯ä»¥çœ‹åˆ° mr-&gt;addr è¢«è®¾ç½®ä¸º 0ï¼Œè€Œ mr-&gt;ram_addr åˆ™å¹¶æ²¡æœ‰åˆå§‹åŒ–ã€‚ å®ä½“ MemoryRegionï¼šé€šè¿‡memory_region_init_ram()åˆå§‹åŒ–ï¼Œæœ‰è‡ªå·±çš„å†…å­˜ï¼ˆä» QEMU è¿›ç¨‹åœ°å€ç©ºé—´ä¸­åˆ†é…ï¼‰ï¼Œå¤§å°ä¸ºsizeï¼Œä¾‹å¦‚ram_memoryã€ pci_memoryï¼š 123456789101112131415161718192021222324void *pc_memory_init(MemoryRegion *system_memory, const char *kernel_filename, const char *kernel_cmdline, const char *initrd_filename, ram_addr_t below_4g_mem_size, ram_addr_t above_4g_mem_size, MemoryRegion *rom_memory, MemoryRegion **ram_memory)&#123; MemoryRegion *ram, *option_rom_mr; /* ...*/ /* Allocate RAM. We allocate it as a single memory region and use * aliases to address portions of it, mostly for backwards compatibility * with older qemus that used qemu_ram_alloc(). */ ram = g_malloc(sizeof(*ram)); // è°ƒç”¨ memory_region_init_ram å¯¹ ram_memory è¿›è¡Œåˆå§‹åŒ– memory_region_init_ram(ram, &quot;pc.ram&quot;, below_4g_mem_size + above_4g_mem_size); vmstate_register_ram_global(ram); *ram_memory = ram; /* ... */&#125; 12345678910void memory_region_init_ram(MemoryRegion *mr, const char *name, uint64_t size)&#123; memory_region_init(mr, name, size); mr-&gt;ram = true; mr-&gt;terminates = true; mr-&gt;destructor = memory_region_destructor_ram; mr-&gt;ram_addr = qemu_ram_alloc(size, mr);&#125; å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯å…ˆè°ƒç”¨äº†memory_region_init()ï¼Œä¹‹åè®¾ç½® RAM å±æ€§ï¼Œå¹¶ç»§ç»­è°ƒç”¨qemu_ram_alloc()åˆ†é…å†…å­˜ã€‚ åˆ«å MemoryRegionï¼šé€šè¿‡memory_region_init_alias() åˆå§‹åŒ–ï¼Œæ²¡æœ‰è‡ªå·±çš„å†…å­˜ï¼Œè¡¨ç¤ºå®ä½“ MemoryRegion çš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡ alias æˆå‘˜æŒ‡å‘å®ä½“ MemoryRegionï¼Œalias_offsetä¸ºåœ¨å®ä½“ MemoryRegion ä¸­çš„åç§»é‡ï¼Œä¾‹å¦‚ram_below_4gã€ram_above_4gï¼š 123456789101112131415void *pc_memory_init(MemoryRegion *system_memory, const char *kernel_filename, const char *kernel_cmdline, const char *initrd_filename, ram_addr_t below_4g_mem_size, ram_addr_t above_4g_mem_size, MemoryRegion *rom_memory, MemoryRegion **ram_memory)&#123; MemoryRegion *ram_below_4g, *ram_above_4g; /* ... */ ram_below_4g = g_malloc(sizeof(*ram_below_4g)); // è°ƒç”¨ memory_region_init_alias å¯¹ ram_below_4g è¿›è¡Œåˆå§‹åŒ– memory_region_init_alias(ram_below_4g, &quot;ram-below-4g&quot;, ram, 0, below_4g_mem_size); /* .. 12345678910void memory_region_init_alias(MemoryRegion *mr, const char *name, MemoryRegion *orig, target_phys_addr_t offset, uint64_t size)&#123; memory_region_init(mr, name, size); mr-&gt;alias = orig; // æŒ‡å‘å®ä½“ MemoryRegion mr-&gt;alias_offset = offset; //é€šè¿‡ offset å¾—åˆ°å®ä½“çš„æŸä¸€ä¸ªéƒ¨åˆ†&#125; RAMBlockç»“æ„ä½“å®šä¹‰MemoryRegion ç”¨æ¥æè¿°ä¸€æ®µé€»è¾‘å±‚é¢ä¸Šçš„å†…å­˜åŒºåŸŸï¼Œè€Œè®°å½•å®é™…åˆ†é…çš„å†…å­˜åœ°å€ä¿¡æ¯çš„ç»“æ„ä½“åˆ™æ˜¯ RAMBlockï¼Œåœ¨ramblock.hä¸­å®šä¹‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950struct RAMBlock &#123; struct rcu_head rcu; struct MemoryRegion *mr; uint8_t *host; uint8_t *colo_cache; /* For colo, VM&#x27;s ram cache */ ram_addr_t offset; ram_addr_t used_length; ram_addr_t max_length; void (*resized)(const char*, uint64_t length, void *host); uint32_t flags; /* Protected by iothread lock. */ char idstr[256]; /* RCU-enabled, writes protected by the ramlist lock */ QLIST_ENTRY(RAMBlock) next; QLIST_HEAD(, RAMBlockNotifier) ramblock_notifiers; int fd; size_t page_size; /* dirty bitmap used during migration */ unsigned long *bmap; /* bitmap of already received pages in postcopy */ unsigned long *receivedmap; /* * bitmap to track already cleared dirty bitmap. When the bit is * set, it means the corresponding memory chunk needs a log-clear. * Set this up to non-NULL to enable the capability to postpone * and split clearing of dirty bitmap on the remote node (e.g., * KVM). The bitmap will be set only when doing global sync. * * NOTE: this bitmap is different comparing to the other bitmaps * in that one bit can represent multiple guest pages (which is * decided by the `clear_bmap_shift&#x27; variable below). On * destination side, this should always be NULL, and the variable * `clear_bmap_shift&#x27; is meaningless. */ unsigned long *clear_bmap; uint8_t clear_bmap_shift; /* * RAM block length that corresponds to the used_length on the migration * source (after RAM block sizes were synchronized). Especially, after * starting to run the guest, used_length and postcopy_length can differ. * Used to register/unregister uffd handlers and as the size of the received * bitmap. Receiving any page beyond this length will bail out, as it * could not have been valid on the source. */ ram_addr_t postcopy_length;&#125;; å¯ä»¥çœ‹åˆ°åœ¨ RAMBlock ä¸­ host å’Œ offset åŸŸåˆ†åˆ«å¯¹åº”äº† HVA å’ŒGPAï¼Œå› æ­¤ä¹Ÿå¯ä»¥è¯´ RAMBlock ä¸­å­˜å‚¨äº†GPA-&gt;HVAçš„æ˜ å°„å…³ç³»ï¼Œå¦å¤–æ¯ä¸€ä¸ª RAMBlock éƒ½ä¼šæŒ‡å‘å…¶æ‰€å±çš„ MemoryRegionã€‚ å…¨å±€å˜é‡ ram_listQEMU åœ¨ramlist.hä¸­å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡ram_listï¼Œä»¥é“¾è¡¨çš„å½¢å¼ç»´æŠ¤äº†æ‰€æœ‰çš„ RAMBlockï¼š 12345678910typedef struct RAMList &#123; QemuMutex mutex; RAMBlock *mru_block; /* RCU-enabled, writes protected by the ramlist lock. */ QLIST_HEAD(, RAMBlock) blocks; DirtyMemoryBlocks *dirty_memory[DIRTY_MEMORY_NUM]; uint32_t version; QLIST_HEAD(, RAMBlockNotifier) ramblock_notifiers;&#125; RAMList;extern RAMList ram_list; æ¯ä¸€ä¸ªæ–°åˆ†é…çš„ RAMBlock éƒ½ä¼šè¢«æ’å…¥åˆ°ram_listçš„å¤´éƒ¨ã€‚å¦‚éœ€æŸ¥æ‰¾åœ°å€æ‰€å¯¹åº”çš„ RAMBlockï¼Œåˆ™éœ€è¦éå†ram_listï¼Œå½“ç›®æ ‡åœ°å€è½åœ¨å½“å‰RAMBlockçš„åœ°å€åŒºé—´æ—¶ï¼Œè¯¥ RAMBlock å³ä¸ºæŸ¥æ‰¾ç›®æ ‡ã€‚ ASã€MRã€RAMBlock ä¹‹é—´çš„å…³ç³» FlatViewAddressSpace çš„ root åŸŸåŠå…¶å­æ ‘å…±åŒæ„æˆäº† Guest çš„ç‰©ç†åœ°å€ç©ºé—´ï¼Œä½†è¿™äº›éƒ½æ˜¯åœ¨ QEMU ä¾§å®šä¹‰çš„ã€‚è¦ä¼ å…¥ KVM è¿›è¡Œè®¾ç½®æ—¶ï¼Œå¤æ‚çš„æ ‘çŠ¶ç»“æ„æ˜¯ä¸åˆ©äºå†…æ ¸è¿›è¡Œå¤„ç†çš„ï¼Œå› æ­¤éœ€è¦å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªâ€œå¹³å¦â€çš„åœ°å€æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä»é›¶å¼€å§‹ã€åªåŒ…å«åœ°å€ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼Œè¿™åœ¨ QEMU ä¸­é€šè¿‡ FlatView æ¥è¡¨ç¤ºã€‚æ¯ä¸ª AddressSpace éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ FlatView æŒ‡é’ˆ current_mapï¼Œè¡¨ç¤ºå…¶å¯¹åº”çš„å¹³é¢å±•å¼€è§†å›¾ã€‚ ç»“æ„ä½“å®šä¹‰FlatView åœ¨memory.cä¸­å®šä¹‰ï¼š 12345678910111213/* Flattened global view of current active memory hierarchy. Kept in sorted * order. */struct FlatView &#123; struct rcu_head rcu; unsigned ref; FlatRange *ranges; // å¯¹åº”çš„ FlatRange æ•°ç»„ unsigned nr; // FlatRange çš„æ•°ç›® unsigned nr_allocated; // å½“å‰æ•°ç»„çš„é¡¹æ•° struct AddressSpaceDispatch *dispatch; MemoryRegion *root;&#125;; å…¶ä¸­ï¼Œrangesæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè®°å½•äº† FlatView ä¸‹æ‰€æœ‰çš„ FlatRangeã€‚ FlatRangeåœ¨ FlatView ä¸­ï¼ŒFlatRange è¡¨ç¤ºåœ¨ FlatView ä¸­çš„ä¸€æ®µå†…å­˜èŒƒå›´ï¼ŒåŒæ ·åœ¨memory.cä¸­å®šä¹‰ï¼š 12345678910/* Range of memory in the global map. Addresses are absolute. */struct FlatRange &#123; MemoryRegion *mr; // æŒ‡å‘æ‰€å±çš„ MemoryRegion hwaddr offset_in_region; // åœ¨å…¨å±€ MemoryRegion ä¸­çš„ offsetï¼Œå¯¹åº” GPA AddrRange addr; // ä»£è¡¨çš„åœ°å€åŒºé—´ï¼Œå¯¹åº” HVA uint8_t dirty_log_mask; bool romd_mode; bool readonly; bool nonvolatile;&#125;; æ¯ä¸ª FlatRange å¯¹åº”ä¸€æ®µè™šæ‹Ÿæœºç‰©ç†åœ°å€åŒºé—´ï¼Œå„ä¸ª FlatRange ä¸ä¼šé‡å ï¼ŒæŒ‰ç…§åœ°å€çš„é¡ºåºä¿å­˜åœ¨æ•°ç»„ä¸­ï¼Œå…·ä½“çš„åœ°å€èŒƒå›´ç”±ä¸€ä¸ª AddrRange ç»“æ„æ¥æè¿°ï¼š 1234567/* * AddrRange ç”¨äºè¡¨ç¤º FlatRange çš„èµ·å§‹åœ°å€åŠå¤§å° */struct AddrRange &#123; Int128 start; Int128 size;&#125;; MemoryRegionSectionç»“æ„ä½“å®šä¹‰åœ¨ QEMU ä¸­ï¼Œè¿˜æœ‰å‡ ä¸ªèµ·åˆ°ä¸­ä»‹ä½œç”¨çš„ç»“æ„ä½“ï¼ŒMemoryRegionSection å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚ ä¹‹å‰ä»‹ç»çš„ FlatRange ä»£è¡¨ä¸€ä¸ªç‰©ç†åœ°å€ç©ºé—´çš„ç‰‡æ®µï¼Œåå‘äºæè¿°åœ¨ Host ä¾§å³ AddressSpace ä¸­çš„åˆ†å¸ƒã€Guest çš„ç‰©ç†ç©ºé—´ã€‘ï¼Œè€Œ MemoryRegionSection åˆ™ä»£è¡¨åœ¨ Guest ä¾§å³ MemoryRegion ä¸­çš„ç‰‡æ®µã€‚MemoryRegionSection åœ¨memory.hä¸­å®šä¹‰ï¼š 123456789101112131415161718192021/** * MemoryRegionSection: describes a fragment of a #MemoryRegion * * @mr: the region, or %NULL if empty * @address_space: the address space the region is mapped in * @offset_within_region: the beginning of the section, relative to @mr&#x27;s start * @size: the size of the section; will not exceed @mr&#x27;s boundaries * @offset_within_address_space: the address of the first byte of the section * relative to the region&#x27;s address space * @readonly: writes to this section are ignored */ //åªæ˜¯èµ·åˆ°æè¿°çš„ä½œç”¨ï¼Œæè¿°äº†æ˜¯å“ªä¸ª AddressSpace çš„ MemoryRegionï¼Œ //å¹¶ä¸”åœ¨ MemoryRegion ä¸­çš„ offsetï¼Œå’Œåœ¨ AddressSpace å±•å¼€ä¸ºå¹³å¦å†…å­˜çš„ offsetstruct MemoryRegionSection &#123; MemoryRegion *mr; // æ‰€å±çš„ MemoryRegion MemoryRegion *address_space; // å…³è”çš„ AddressSpace target_phys_addr_t offset_within_region; // åœ¨ MemoryRegion å†…éƒ¨çš„ offset uint64_t size; // Section çš„å¤§å° target_phys_addr_t offset_within_address_space; // åœ¨ AddressSpace å†…éƒ¨çš„ offset bool readonly; // æ˜¯å¦ä¸ºåªè¯»&#125;; offset_within_regionï¼šåœ¨æ‰€å± MemoryRegion ä¸­çš„offsetã€‚ä¸€ä¸ªAddressSpace å¯èƒ½ç”±å¤šä¸ª MemoryRegion ç»„æˆï¼Œå› æ­¤è¯¥ offset æ˜¯å±€éƒ¨çš„ offset_within_address_spaceï¼šåœ¨æ‰€å± AddressSpace ä¸­çš„ offsetï¼Œå®ƒæ˜¯å…¨å±€çš„ å’Œå…¶ä»–æ•°æ®ç»“æ„ä¹‹é—´çš„å…³ç³» AddressSpace çš„rootæŒ‡å‘å¯¹åº”çš„æ ¹çº§MemoryRegionï¼Œcurrent_mapæŒ‡å‘AddressSpace çš„rooté€šè¿‡generate_memory_topology()ç”Ÿæˆçš„ FlatView FlatView ä¸­çš„rangesæ•°ç»„è¡¨ç¤ºè¯¥MemoryRegion æ‰€è¡¨ç¤ºçš„Gueståœ°å€åŒºé—´ã€GPA çš„æ•´ä¸ªå¹³å¦ç‰©ç†ç©ºé—´ã€‘ï¼Œå¹¶æŒ‰ç…§åœ°å€çš„é¡ºåºè¿›è¡Œæ’åˆ— MemoryRegionSection ç”±rangesæ•°ç»„ä¸­çš„ FlatRange å¯¹åº”ç”Ÿæˆï¼Œä½œä¸ºæ³¨å†Œåˆ° KVMä¸­çš„åŸºæœ¬å•ä½ QEMU åœ¨ç”¨æˆ·ç©ºé—´ç”³è¯·å†…å­˜åï¼Œéœ€è¦å°†å†…å­˜ä¿¡æ¯é€šè¿‡ä¸€ç³»åˆ—ç³»ç»Ÿè°ƒç”¨ä¼ å…¥å†…æ ¸ç©ºé—´çš„ KVMï¼Œç”± KVM ä¾§è¿›è¡Œç®¡ç†ï¼Œå› æ­¤ QEMU ä¾§ä¹Ÿå®šä¹‰äº†ä¸€äº›ç”¨äºå‘ KVM ä¼ é€’å‚æ•°çš„ç»“æ„ä½“ã€‚ ä»¥ä¸‹ä¸ºKVMç›¸å…³çš„æ•°æ®ç»“æ„ã€‚ KVMSlotåœ¨ kvm_init.hä¸­å®šä¹‰ï¼Œæ˜¯ KVM ä¸­å†…å­˜ç®¡ç†çš„åŸºæœ¬å•ä½ï¼š 123456789101112131415typedef struct KVMSlot&#123; hwaddr start_addr; // Guest ç‰©ç†åœ°å€ï¼ŒGPA ram_addr_t memory_size; // å†…å­˜å¤§å° void *ram; // QEMU ç”¨æˆ·ç©ºé—´åœ°å€ï¼ŒHVA int slot; // Slot ç¼–å· int flags; // æ ‡å¿—ä½ï¼Œä¾‹å¦‚æ˜¯å¦è¿½è¸ªè„é¡µã€æ˜¯å¦å¯ç”¨ç­‰ /* Dirty bitmap cache for the slot */ unsigned long *dirty_bmap; unsigned long dirty_bmap_size; /* Cache of the address space ID */ int as_id; /* Cache of the offset in ram address space */ ram_addr_t ram_start_offset;&#125; KVMSlot; KVMSlot ç±»ä¼¼äºå†…å­˜æ’æ§½çš„æ¦‚å¿µã€‚ kvm_userspace_memory_regionè°ƒç”¨ioctl(KVM_SET_USER_MEMORY_REGION)æ—¶éœ€è¦å‘ KVM ä¼ é€’çš„å‚æ•°ï¼Œåœ¨kvm.hä¸­å®šä¹‰ 12345678/* for KVM_SET_USER_MEMORY_REGION */struct kvm_userspace_memory_region &#123; __u32 slot; // slot ç¼–å· __u32 flags; // æ ‡å¿—ä½ï¼Œä¾‹å¦‚æ˜¯å¦è¿½è¸ªè„é¡µã€æ˜¯å¦å¯ç”¨ç­‰ __u64 guest_phys_addr; // Guest ç‰©ç†åœ°å€ï¼ŒGPA __u64 memory_size; // å†…å­˜å¤§å°ï¼Œbytes __u64 userspace_addr; // ä» QEMU è¿›ç¨‹ç©ºé—´åˆ†é…çš„èµ·å§‹åœ°å€ï¼ŒHVA&#125;; MemoryListenerç»“æ„ä½“å®šä¹‰ä¸ºäº†ç›‘æ§è™šæ‹Ÿæœºçš„ç‰©ç†åœ°å€è®¿é—®ï¼Œå¯¹äºæ¯ä¸€ä¸ª AddressSpaceï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª MemoryListener ä¸ä¹‹å¯¹åº”ã€‚æ¯å½“ç‰©ç†æ˜ å°„GPA-&gt;HVAå‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¼šå›è°ƒè¿™äº›å‡½æ•°ã€‚MemoryListener æ˜¯å¯¹ä¸€äº›äº‹ä»¶çš„å›è°ƒå‡½æ•°åˆé›†ï¼Œåœ¨memory.hä¸­å®šä¹‰ï¼š 1234567891011121314151617181920212223242526/** * MemoryListener: callbacks structure for updates to the physical memory map * * Allows a component to adjust to changes in the guest-visible memory map. * Use with memory_listener_register() and memory_listener_unregister(). */struct MemoryListener &#123; void (*begin)(MemoryListener *listener); void (*commit)(MemoryListener *listener); void (*region_add)(MemoryListener *listener, MemoryRegionSection *section); void (*region_del)(MemoryListener *listener, MemoryRegionSection *section); void (*region_nop)(MemoryListener *listener, MemoryRegionSection *section); void (*log_start)(MemoryListener *listener, MemoryRegionSection *section); void (*log_stop)(MemoryListener *listener, MemoryRegionSection *section); void (*log_sync)(MemoryListener *listener, MemoryRegionSection *section); void (*log_global_start)(MemoryListener *listener); void (*log_global_stop)(MemoryListener *listener); void (*eventfd_add)(MemoryListener *listener, MemoryRegionSection *section, bool match_data, uint64_t data, EventNotifier *e); void (*eventfd_del)(MemoryListener *listener, MemoryRegionSection *section, bool match_data, uint64_t data, EventNotifier *e); /* Lower = earlier (during add), later (during del) */ unsigned priority; MemoryRegion *address_space_filter; QTAILQ_ENTRY(MemoryListener) link;&#125;; å…¨å±€å˜é‡ memory_listenersæ‰€æœ‰çš„ MemoryListener éƒ½ä¼šæŒ‚åœ¨å…¨å±€å˜é‡memory_listenersé“¾è¡¨ä¸Šï¼Œåœ¨memory.cä¸­å®šä¹‰ï¼š 12static QTAILQ_HEAD(, MemoryListener) memory_listeners = QTAILQ_HEAD_INITIALIZER(memory_listeners); åœ¨memory.cä¸­æšä¸¾äº†ListenerDirection: 1enum ListenerDirection &#123; Forward, Reverse &#125;; é‡è¦æ•°æ®ç»“æ„æ€»è§ˆ ç»“æ„ä½“å è¯´æ˜ AddressSpace VM èƒ½çœ‹åˆ°çš„ä¸€æ®µåœ°å€ç©ºé—´ï¼Œåå‘ Host ä¾§ã€æ³¨æ„æŒ‡çš„æ˜¯åå‘ã€‘ MemoryRegion åœ°å€ç©ºé—´ä¸­ä¸€æ®µé€»è¾‘å±‚é¢çš„å†…å­˜åŒºåŸŸï¼Œåå‘ Guest ä¾§ RAMBlock è®°å½•å®é™…åˆ†é…çš„å†…å­˜åœ°å€ä¿¡æ¯ï¼Œå­˜å‚¨äº† GPA-&gt;HVA çš„æ˜ å°„å…³ç³» FlatView MemoryRegion å¯¹åº”çš„å¹³é¢å±•å¼€è§†å›¾ï¼ŒåŒ…å«ä¸€ä¸ª FlatRange ç±»å‹çš„ ranges æ•°ç»„ FlatRange å¯¹åº”ä¸€æ®µè™šæ‹Ÿæœºç‰©ç†åœ°å€åŒºé—´ï¼Œå„ä¸ª FlatRange ä¸ä¼šé‡å ï¼ŒæŒ‰ç…§åœ°å€çš„é¡ºåºä¿å­˜åœ¨æ•°ç»„ä¸­ MemoryRegionSection è¡¨ç¤º MemoryRegion ä¸­çš„ç‰‡æ®µ MemoryListener å›è°ƒå‡½æ•°é›†åˆ KVMSlot KVM ä¸­å†…å­˜ç®¡ç†çš„åŸºæœ¬å•ä½ï¼Œè¡¨ç¤ºä¸€ä¸ªå†…å­˜æ’æ§½ kvm_userspace_memory_region è°ƒç”¨ ioctl(KVM_SET_USER_MEMORY_REGION) æ—¶éœ€è¦å‘ KVM ä¼ é€’çš„å‚æ•° å…·ä½“å®ç°æœºåˆ¶QEMU çš„å†…å­˜ç”³è¯·æµç¨‹å¤§è‡´å¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šå›è°ƒå‡½æ•°çš„æ³¨å†Œã€AddressSpace çš„åˆå§‹åŒ–ã€å®é™…å†…å­˜çš„åˆ†é…ã€‚ä¸‹é¢å°†æ ¹æ®åœ¨ vl.c çš„ main() å‡½æ•°ä¸­çš„è°ƒç”¨é¡ºåºåˆ†åˆ«ä»‹ç»ã€‚ å›è°ƒå‡½æ•°çš„æ³¨å†Œ 1234567891011int main() â””â”€ static int configure_accelerator() â””â”€ int kvm_init() // åˆå§‹åŒ– KVM â”œâ”€ int kvm_ioctl(KVM_CREATE_VM) // åˆ›å»º VM â”œâ”€ int kvm_arch_init() // é’ˆå¯¹ä¸åŒçš„æ¶æ„è¿›è¡Œåˆå§‹åŒ– â””â”€ void memory_listener_register() // æ³¨å†Œ kvm_memory_listener â””â”€ static void listener_add_address_space() // è°ƒç”¨ region_add å›è°ƒ â””â”€ static void kvm_region_add() // region_add å¯¹åº”çš„å›è°ƒå®ç° â””â”€ static void kvm_set_phys_mem() // æ ¹æ®ä¼ å…¥çš„ section å¡«å…… KVMSlot â””â”€ static int kvm_set_user_memory_region() â””â”€ int ioctl(KVM_SET_USER_MEMORY_REGION) è¿›å…¥configure_accelerator()åï¼ŒQEMUä¼šå…ˆè°ƒç”¨configure_accelerator()è®¾ç½® KVM çš„åŠ é€Ÿæ”¯æŒï¼Œä¹‹åè¿›å…¥kvm_init()ã€‚è¯¥å‡½æ•°ä¸»è¦å®Œæˆå¯¹ KVM çš„åˆå§‹åŒ–ï¼ŒåŒ…æ‹¬ä¸€äº›å¸¸è§„æ£€æŸ¥å¦‚ CPU ä¸ªæ•°ã€KVM ç‰ˆæœ¬ç­‰ï¼Œä¹‹åé€šè¿‡kvm_ioctl(KVM_CREATE_VM)ä¸å†…æ ¸äº¤äº’ï¼Œåˆ›å»º KVM è™šæ‹Ÿæœºã€‚åœ¨kvm_init()çš„æœ€åï¼Œä¼šè°ƒç”¨memory_listener_register()æ³¨å†Œkvm_memory_listenerï¼š 12345678910111213141516171819static int kvm_init(MachineState *ms)&#123; MachineClass *mc = MACHINE_GET_CLASS(ms); // æ‰“å¼€/dev/kvm s-&gt;fd = qemu_open_old(&quot;/dev/kvm&quot;, O_RDWR); // åˆ›å»º VM do &#123; ret = kvm_ioctl(s, KVM_CREATE_VM, type); &#125; while (ret == -EINTR);/* ... */ ret = kvm_arch_init(s); // é’ˆå¯¹ä¸åŒçš„æ¶æ„è¿›è¡Œåˆå§‹åŒ– // å¯¹äºä»¥ä¸‹ AddressSpaceï¼Œè®¾ç½®å…¶å¯¹åº”çš„ listener kvm_memory_listener_register(s, &amp;s-&gt;memory_listener, &amp;address_space_memory, 0, &quot;kvm-memory&quot;); memory_listener_register(&amp;kvm_coalesced_pio_listener, &amp;address_space_io);/* ... */&#125; 12345678910111213141516171819202122232425262728293031323334void memory_listener_register(MemoryListener *listener, AddressSpace *as)&#123; MemoryListener *other = NULL; /* Only one of them can be defined for a listener */ assert(!(listener-&gt;log_sync &amp;&amp; listener-&gt;log_sync_global)); listener-&gt;address_space = as; if (QTAILQ_EMPTY(&amp;memory_listeners) || listener-&gt;priority &gt;= QTAILQ_LAST(&amp;memory_listeners)-&gt;priority) &#123; QTAILQ_INSERT_TAIL(&amp;memory_listeners, listener, link); &#125; else &#123; QTAILQ_FOREACH(other, &amp;memory_listeners, link) &#123; if (listener-&gt;priority &lt; other-&gt;priority) &#123; break; &#125; &#125; QTAILQ_INSERT_BEFORE(other, listener, link); &#125; if (QTAILQ_EMPTY(&amp;as-&gt;listeners) || listener-&gt;priority &gt;= QTAILQ_LAST(&amp;as-&gt;listeners)-&gt;priority) &#123; QTAILQ_INSERT_TAIL(&amp;as-&gt;listeners, listener, link_as); &#125; else &#123; QTAILQ_FOREACH(other, &amp;as-&gt;listeners, link_as) &#123; if (listener-&gt;priority &lt; other-&gt;priority) &#123; break; &#125; &#125; QTAILQ_INSERT_BEFORE(other, listener, link_as); &#125; listener_add_address_space(listener, as);&#125; æœ€åçš„listener_add_address_space()ä¸»è¦æ˜¯å°† listener æ³¨å†Œåˆ°å…¶å¯¹åº”çš„ AddressSpace ä¸Šï¼Œå¹¶æ ¹æ® AddressSpace å¯¹åº”çš„ FlatRange æ•°ç»„ï¼Œç”Ÿæˆ MemoryRegionSectionã€MemoryRegionSectionå°±åƒæ˜¯ä¸ºFlatRangeæ•°ç»„è®¾ç½®çš„ä¸€ç§ä¸­ä»‹è¡¨ç¤ºï¼Œä¾¿äºä¼ å…¥KVMï¼Œå› ä¸ºä¼ å…¥KVMåº”è¯¥æ˜¯å¯¹å¹³å¦å†…å­˜çš„ä¸€ç§è¡¨ç¤ºã€‘ï¼Œå¹¶æ³¨å†Œåˆ° KVM ä¸­ï¼š 12345678910111213141516171819202122232425262728293031323334static void listener_add_address_space(MemoryListener *listener, AddressSpace *as)&#123; FlatView *view; FlatRange *fr; if (listener-&gt;begin) &#123; listener-&gt;begin(listener); &#125; /* å¼€å¯å†…å­˜è„é¡µè®°å½• */ if (global_dirty_tracking) &#123; if (listener-&gt;log_global_start) &#123; listener-&gt;log_global_start(listener); &#125; &#125; /* éå† AddressSpace å¯¹åº”çš„ FlatRange æ•°ç»„ï¼Œå¹¶å°†å…¶è½¬æ¢æˆ MemoryRegionSection */ view = address_space_get_flatview(as); FOR_EACH_FLAT_RANGE(fr, view) &#123; MemoryRegionSection section = section_from_flat_range(fr, view); /* å°† section æ‰€ä»£è¡¨çš„å†…å­˜åŒºåŸŸæ³¨å†Œåˆ° KVM ä¸­ */ if (listener-&gt;region_add) &#123; listener-&gt;region_add(listener, &amp;section); &#125; if (fr-&gt;dirty_log_mask &amp;&amp; listener-&gt;log_start) &#123; listener-&gt;log_start(listener, &amp;section, 0, fr-&gt;dirty_log_mask); &#125; &#125; if (listener-&gt;commit) &#123; listener-&gt;commit(listener); &#125; flatview_unref(view);&#125; ç”±äºæ­¤æ—¶ AddressSapce å°šæœªåˆå§‹åŒ–ï¼Œæ‰€ä»¥æ­¤å¤„çš„å¾ªç¯ä¸ºç©ºï¼Œä»…æ˜¯åœ¨å…¨å±€æ³¨å†Œäº†kvm_memory_listenerã€‚æœ€åè°ƒç”¨äº†kvm_memory_listener-&gt;region_add()ï¼Œå¯¹åº”çš„å®ç°æ˜¯kvm_region_add()ï¼Œè¯¥å‡½æ•°æœ€ç»ˆä¼šé€šè¿‡ioctl(KVM_SET_USER_MEMORY_REGION)ï¼Œå°† QEMU ä¾§ç”³è¯·çš„å†…å­˜ä¿¡æ¯ä¼ å…¥ KVM è¿›è¡Œæ³¨å†Œï¼Œè¿™é‡Œçš„æµç¨‹ä¼šåœ¨ä¸‹ä¸€éƒ¨åˆ†è¿›è¡Œåˆ†æã€‚ AddressSpace çš„åˆå§‹åŒ– 12345678910111213141516171819int main() â””â”€ void cpu_exec_init_all() â”œâ”€ static void memory_map_init() | â”œâ”€ void memory_region_init() // åˆå§‹åŒ– system_memory/io è¿™ä¸¤ä¸ªå…¨å±€ MemoryRegion | â”œâ”€ void set_system_memory_map() // address_space_memory-&gt;root = system_memory | | â””â”€ static void memory_region_update_topology() // ä¸º MemoryRegion ç”Ÿæˆ FlatView | | â””â”€ static void address_space_update_topology() // as-&gt;current_map = new_view | | â””â”€ static void address_space_update_topology_pass() | | â””â”€ static void kvm_region_add() // region_add å¯¹åº”çš„å›è°ƒå®ç° | | â””â”€ static void kvm_set_phys_mem() // æ ¹æ®ä¼ å…¥çš„ section å¡«å…… KVMSlot | | â””â”€ static int kvm_set_user_memory_region() | | â””â”€ int ioctl(KVM_SET_USER_MEMORY_REGION) | | | â””â”€ void memory_listener_register() // æ³¨å†Œå¯¹åº”çš„ MemoryListener | â””â”€ static void listener_add_address_space() | â””â”€ static void io_mem_init() â””â”€ void memory_region_init_io() // ram/rom/unassigned/notdirty/subpage-ram/watch â””â”€ void memory_region_init() ç¬¬ä¸€éƒ¨åˆ†åœ¨å…¨å±€æ³¨å†Œäº†kvm_memory_listenerï¼Œä½†ç”±äºAddressSpace å°šæœªåˆå§‹åŒ–ï¼Œå®é™…ä¸Šå¹¶æœªå‘ KVM ä¸­æ³¨å†Œä»»ä½•å®é™…çš„å†…å­˜ä¿¡æ¯ã€‚QEMU åœ¨main()å‡½æ•°ä¸­ä¼šç»§ç»­è°ƒç”¨cpu_exec_init_all()å¯¹AddressSpaceè¿›è¡Œåˆå§‹åŒ–ï¼Œè¯¥å‡½æ•°å®é™…ä¸Šæ˜¯å¯¹ä¸¤ä¸ª init å‡½æ•°çš„å°è£…è°ƒç”¨ï¼š 12345678910111213141516void cpu_exec_init_all(void)&#123; qemu_mutex_init(&amp;ram_list.mutex); /* The data structures we set up here depend on knowing the page size, * so no more changes can be made after this point. * In an ideal world, nothing we did before we had finished the * machine setup would care about the target page size, and we could * do this much later, rather than requiring board models to state * up front what their requirements are. */ finalize_target_page_bits(); io_mem_init(); // åˆå§‹åŒ–å…­ä¸ªI/O MemoryRegion memory_map_init(); // åˆå§‹åŒ–ä¸¤ä¸ªå…¨å±€ AddressSpaceï¼Œä»¥åŠå¯¹åº”çš„ MemoryRegionã€FlatView qemu_mutex_init(&amp;map_client_list_lock);&#125; å…ˆæ¥çœ‹memory_map_init()ï¼Œä¸»è¦ç”¨æ¥åˆå§‹åŒ–ä¸¤ä¸ªå…¨å±€çš„ç³»ç»Ÿåœ°å€ç©ºé—´system_memoryã€system_io 123456789101112131415161718static void memory_map_init(void)&#123; system_memory = g_malloc(sizeof(*system_memory)); // 1. åˆå§‹åŒ– system_memory memory_region_init(system_memory, NULL, &quot;system&quot;, UINT64_MAX); // 2. è®¾ç½® address_space_memory å…³è” system_memory // è¿™ä¸¤ä¸ªéƒ½æ˜¯å…¨å±€å˜é‡ï¼Œä¹Ÿå°±æ˜¯æŠŠå†…å­˜åœ°å€ç©ºé—´å’Œ IO åœ°å€ç©ºé—´äºå¯¹åº”çš„ MemoryRegion è”ç³»èµ·æ¥ //åŠå…¶å¯¹åº”çš„ FlatView address_space_init(&amp;address_space_memory, system_memory, &quot;memory&quot;); system_io = g_malloc(sizeof(*system_io)); // 1. åˆå§‹åŒ– system_io memory_region_init_io(system_io, NULL, &amp;unassigned_io_ops, NULL, &quot;io&quot;, 65536); // 2. è®¾ç½® address_space_io å…³è” system_io // åŠå…¶å¯¹åº”çš„ FlatView address_space_init(&amp;address_space_io, system_io, &quot;I/O&quot;);&#125; è¿™é‡Œæ¯”è¾ƒé‡è¦çš„æ˜¯address_space_init()ï¼Œå…ˆè®¾ç½® AddressSpace å¯¹åº”çš„ MemoryRegionï¼Œä¹‹åæ ¹æ®system_memoryæ›´æ–°address_space_memoryå¯¹åº”çš„ FlatViewï¼š 123456789101112131415void address_space_init(AddressSpace *as, MemoryRegion *root, const char *name)&#123; memory_region_ref(root); // å°† address_space_memory çš„ root åŸŸæŒ‡å‘ system_memory as-&gt;root = root; as-&gt;current_map = NULL; as-&gt;ioeventfd_nb = 0; as-&gt;ioeventfds = NULL; QTAILQ_INIT(&amp;as-&gt;listeners); QTAILQ_INSERT_TAIL(&amp;address_spaces, as, address_spaces_link); as-&gt;name = g_strdup(name ? name : &quot;anonymous&quot;); // æ ¹æ® system_memory æ›´æ–° address_space_memory å¯¹åº”çš„ FlatView address_space_update_topology(as); address_space_update_ioeventfds(as);&#125; address_space_update_topology()ä¼šç»§ç»­è°ƒç”¨generate_memory_topology()ç”Ÿæˆ AddressSpace å¯¹åº”çš„ FlatViewè§†å›¾ï¼š 12345678910static void address_space_update_topology(AddressSpace *as)&#123; MemoryRegion *physmr = memory_region_get_flatview_root(as-&gt;root); flatviews_init(); if (!g_hash_table_lookup(flat_views, physmr)) &#123; generate_memory_topology(physmr); &#125; address_space_set_flatview(as);&#125; address_space_update_topology()ä¼šå…ˆè°ƒç”¨generate_memory_topology()ç”Ÿæˆsystem_memoryæ›´æ–°åçš„è§†å›¾new_viewï¼Œå†å°†address_space_memoryçš„current_mapæŒ‡å‘è¿™ä¸ªnew_viewï¼Œæœ€åé”€æ¯old_viewï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344static void address_space_set_flatview(AddressSpace *as)&#123; FlatView *old_view = address_space_to_flatview(as); MemoryRegion *physmr = memory_region_get_flatview_root(as-&gt;root); FlatView *new_view = g_hash_table_lookup(flat_views, physmr); assert(new_view); if (old_view == new_view) &#123; return; &#125; if (old_view) &#123; flatview_ref(old_view); &#125; flatview_ref(new_view); if (!QTAILQ_EMPTY(&amp;as-&gt;listeners)) &#123; FlatView tmpview = &#123; .nr = 0 &#125;, *old_view2 = old_view; if (!old_view2) &#123; old_view2 = &amp;tmpview; &#125; address_space_update_topology_pass(as, old_view2, new_view, false); address_space_update_topology_pass(as, old_view2, new_view, true); &#125; /* Writes are protected by the BQL. */ qatomic_rcu_set(&amp;as-&gt;current_map, new_view); if (old_view) &#123; flatview_unref(old_view); &#125; /* Note that all the old MemoryRegions are still alive up to this * point. This relieves most MemoryListeners from the need to * ref/unref the MemoryRegions they get---unless they use them * outside the iothread mutex, in which case precise reference * counting is necessary. */ if (old_view) &#123; flatview_unref(old_view); &#125;&#125; åœ¨address_space_update_topology_pass()çš„æœ€åï¼Œä¼šè°ƒç”¨MEMORY_LISTENER_UPDATE_REGIONè¿™ä¸ªå®ï¼Œè§¦å‘region_addå¯¹åº”çš„å›è°ƒå‡½æ•°kvm_region_add()ã€‚ è¿™ä¸ªå®åœ¨memory.cä¸­å®šä¹‰ï¼Œä¼šå°† FlatView ä¸­çš„ FlatRange è½¬æ¢ä¸º MemoryRegionSectionï¼Œä½œä¸ºå…¥å‚ä¼ é€’ç»™kvm_region_add()ï¼š 1234567/* No need to ref/unref .mr, the FlatRange keeps it alive. */#define MEMORY_LISTENER_UPDATE_REGION(fr, as, dir, callback, _args...) \\ do &#123; \\ MemoryRegionSection mrs = section_from_flat_range(fr, \\ address_space_to_flatview(as)); \\ MEMORY_LISTENER_CALL(as, callback, dir, &amp;mrs, ##_args); \\ &#125; while(0) è€Œkvm_region_add()å®é™…ä¸Šæ˜¯å¯¹kvm_set_phys_mem()çš„å°è£…è°ƒç”¨ã€‚è¯¥å‡½æ•°æ¯”è¾ƒå¤æ‚ï¼Œä¼šæ ¹æ®ä¼ å…¥çš„sectionå¡«å…… KVMSlotï¼Œå†ä¼ é€’ç»™kvm_set_user_memory_region()ï¼š 123456789101112131415161718192021222324252627static int kvm_set_user_memory_region(KVMMemoryListener *kml, KVMSlot *slot, bool new)&#123; KVMState *s = kvm_state; struct kvm_userspace_memory_region mem; int ret; // æ ¹æ® KVMSlot å¡«å…… kvm_userspace_memory_region mem.slot = slot-&gt;slot | (kml-&gt;as_id &lt;&lt; 16); mem.guest_phys_addr = slot-&gt;start_addr; mem.userspace_addr = (unsigned long)slot-&gt;ram; mem.flags = slot-&gt;flags; if (slot-&gt;memory_size &amp;&amp; !new &amp;&amp; (mem.flags ^ slot-&gt;old_flags) &amp; KVM_MEM_READONLY) &#123; /* Set the slot size to 0 before setting the slot to the desired * value. This is needed based on KVM commit 75d61fbc. */ mem.memory_size = 0; ret = kvm_vm_ioctl(s, KVM_SET_USER_MEMORY_REGION, &amp;mem); if (ret &lt; 0) &#123; goto err; &#125; &#125; mem.memory_size = slot-&gt;memory_size; ret = kvm_vm_ioctl(s, KVM_SET_USER_MEMORY_REGION, &amp;mem); slot-&gt;old_flags = mem.flags; return ret;&#125; å¯ä»¥çœ‹åˆ°è¿™é‡Œåˆå°† KVMSlot è½¬æ¢ä¸º kvm_userspace_memory_regionï¼Œä½œä¸ºioctl()çš„å‚æ•°ï¼Œäº¤ç»™å†…æ ¸ä¸­çš„ KVM è¿›è¡Œå†…å­˜çš„æ³¨å†Œã€è®¾ç½®GPA-&gt;HVAçš„æ˜ å°„å…³ç³»ï¼Œåœ¨å†…æ ¸ç©ºé—´ç»´æŠ¤å¹¶ç®¡ç† Guest çš„å†…å­˜ã€‘ã€‚ è‡³æ­¤ QEMU ä¾§è´Ÿè´£ç®¡ç†å†…å­˜çš„æ•°æ®ç»“æ„å‡å·²å®Œæˆåˆå§‹åŒ–ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„å›¾ç‰‡äº†è§£å„æ•°æ®ç»“æ„ä¹‹é—´çš„å¯¹åº”å…³ç³» å®é™…å†…å­˜çš„åˆ†é… 12345678910111213141516171819202122232425int main() â””â”€ void machine-&gt;init(ram_size, ...) â””â”€ static void pc_init_pci(ram_size, ...) // åˆå§‹åŒ–è™šæ‹Ÿæœº â””â”€ static void pc_init1(system_memory, system_io, ram_size, ...) â”œâ”€ void memory_region_init(pci_memory, &quot;pci&quot;, ...) // pci_memory, rom_memory â””â”€ void pc_memory_init() // åˆå§‹åŒ–å†…å­˜ï¼Œåˆ†é…å®é™…çš„ç‰©ç†å†…å­˜åœ°å€ â”œâ”€ void memory_region_init_ram() // åˆ›å»º pc.ram, pc.rom å¹¶åˆ†é…å†…å­˜ | â”œâ”€ void memory_region_init() | â””â”€ ram_addr_t qemu_ram_alloc() | â””â”€ ram_addr_t qemu_ram_alloc_from_ptr() | â”œâ”€ void vmstate_register_ram_global() // å°† MR çš„ name å†™å…¥ RAMBlock çš„ idstr | â””â”€ void vmstate_register_ram() | â””â”€ void qemu_ram_set_idstr() | â”œâ”€ void memory_region_init_alias() // åˆå§‹åŒ– ram_below_4g, ram_above_4g â””â”€ void memory_region_add_subregion() // åœ¨ system_memory ä¸­æ·»åŠ  subregions â””â”€ static void memory_region_add_subregion_common() â””â”€ static void memory_region_update_topology() // ä¸º MemoryRegion ç”Ÿæˆ FlatView â””â”€ static void address_space_update_topology() // as-&gt;current_map = new_view â””â”€ static void address_space_update_topology_pass() â””â”€ static void kvm_region_add() // region_add å¯¹åº”çš„å›è°ƒå®ç° â””â”€ static void kvm_set_phys_mem() // æ ¹æ®ä¼ å…¥çš„ section å¡«å…… KVMSlot â””â”€ static int kvm_set_user_memory_region() â””â”€ int ioctl(KVM_SET_USER_MEMORY_REGION) ä¹‹å‰çš„å›è°ƒå‡½æ•°æ³¨å†Œã€AddressSpace çš„åˆå§‹åŒ–ï¼Œå®é™…ä¸Šå‡æ²¡æœ‰å¯¹åº”çš„ç‰©ç†å†…å­˜ã€‚ã€å®é™…çš„å†…å­˜æ˜¯åœ¨ RAMBlock ä¸­ã€‘ æˆ‘ä»¬å†å›åˆ° qemu å¯åŠ¨çš„ main å‡½æ•°ä¸­ã€‚æ¥ä¸‹æ¥çš„åˆå§‹åŒ–è¿‡ç¨‹ä¼šè°ƒç”¨ pc_init1ã€‚åœ¨è¿™é‡Œé¢ï¼Œå¯¹äº CPU è™šæ‹ŸåŒ–ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨ pc_cpus_initã€‚å¦å¤–ï¼Œpc_init1 è¿˜ä¼šè°ƒç”¨pc_memory_initï¼Œè¿›è¡Œå†…å­˜çš„è™šæ‹ŸåŒ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536void *pc_memory_init(MemoryRegion *system_memory, const char *kernel_filename, const char *kernel_cmdline, const char *initrd_filename, ram_addr_t below_4g_mem_size, ram_addr_t above_4g_mem_size, MemoryRegion *rom_memory, MemoryRegion **ram_memory)&#123; MemoryRegion *ram, *option_rom_mr; // ä¸¤ä¸ªå®ä½“ MR: pc.ram, pc.rom MemoryRegion *ram_below_4g, *ram_above_4g; // ä¸¤ä¸ªåˆ«å MR: ram_below_4g, ram_above_4g /* Allocate RAM. We allocate it as a single memory region and use * aliases to address portions of it, mostly for backwards compatibility * with older qemus that used qemu_ram_alloc(). */ ram = g_malloc(sizeof(*ram)); // åˆ›å»º ram // åˆ†é…å…·ä½“çš„å†…å­˜ï¼ˆå®é™…ä¸Šä¼šåˆ›å»ºä¸€ä¸ª RAMBlock å¹¶å°†å…¶ offset å€¼å†™å…¥ ram.ram_addrï¼Œå¯¹åº” GPAï¼‰ memory_region_init_ram(ram, &quot;pc.ram&quot;, below_4g_mem_size + above_4g_mem_size); // å°† MR çš„ name å†™å…¥ RAMBlock çš„ idstr vmstate_register_ram_global(ram); *ram_memory = ram; // åˆ›å»º ram_below_4g è¡¨ç¤º 4G ä»¥ä¸‹çš„å†…å­˜ ram_below_4g = g_malloc(sizeof(*ram_below_4g)); memory_region_init_alias(ram_below_4g, &quot;ram-below-4g&quot;, ram, 0, below_4g_mem_size); // å°† ram_below_4g æŒ‚åœ¨ system_memory ä¸‹ memory_region_add_subregion(system_memory, 0, ram_below_4g); if (above_4g_mem_size &gt; 0) &#123; ram_above_4g = g_malloc(sizeof(*ram_above_4g)); memory_region_init_alias(ram_above_4g, &quot;ram-above-4g&quot;, ram, below_4g_mem_size, above_4g_mem_size); memory_region_add_subregion(system_memory, 0x100000000ULL, ram_above_4g); &#125; /* ... */&#125; è¿™é‡Œçš„é‡ç‚¹åœ¨äºmemory_region_init_ram()ï¼Œå®ƒé€šè¿‡qemu_ram_alloc()è·å– ram è¿™ä¸ª MemoryRegion å¯¹åº”çš„ RAMBlock çš„offsetï¼Œå¹¶å­˜å…¥ram.ram_addrï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ram_listä¸­æ ¹æ®è¯¥å­—æ®µæŸ¥æ‰¾ MR å¯¹åº”çš„ RAMBlockï¼š 12345678void memory_region_init_ram(MemoryRegion *mr, const char *name, uint64_t size)&#123; memory_region_init(mr, name, size); // å¡«å……å­—æ®µï¼Œåˆå§‹åŒ–é»˜è®¤å€¼ mr-&gt;ram = true; // è¡¨ç¤ºä¸º RAM mr-&gt;terminates = true; // è¡¨ç¤ºä¸ºå®ä½“ MemoryRegion mr-&gt;destructor = memory_region_destructor_ram; mr-&gt;ram_addr = qemu_ram_alloc(size, mr); // è¿™é‡Œä¿å­˜ RAMBlock çš„ offsetï¼Œå³ GPA&#125; è€Œ qemu_ram_alloc() æœ€ç»ˆä¼šè°ƒç”¨ qemu_ram_alloc_from_ptr()ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹åº”å¤§å° RAMBlock å¹¶åˆ†é…å†…å­˜ï¼Œè¿”å›å¯¹åº”çš„ GPA åœ°å€å­˜å…¥ mr-&gt;ram_addr ä¸­ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354ram_addr_t qemu_ram_alloc_from_ptr(ram_addr_t size, void *host, MemoryRegion *mr)&#123; RAMBlock *new_block; // åˆ›å»ºä¸€ä¸ª RAMBlock size = TARGET_PAGE_ALIGN(size); // é¡µå¯¹é½ new_block = g_malloc0(sizeof(*new_block)); // åˆå§‹åŒ– new_block new_block-&gt;mr = mr; // å°† new_block-&gt; æŒ‡å‘å…¥å‚çš„ MemoryRegion new_block-&gt;offset = find_ram_offset(size); // ä» ram_list ä¸­çš„ RAMBlock ä¹‹é—´æ‰¾åˆ°ä¸€æ®µå¯ä»¥æ»¡è¶³ size éœ€æ±‚çš„ gapï¼Œå¹¶è¿”å›èµ·å§‹åœ°å€çš„ offsetï¼Œå¯¹åº” GPA if (host) &#123; // æ–°å»ºçš„ RAMBlock host å­—æ®µä¸ºç©ºï¼Œè·³è¿‡ new_block-&gt;host = host; new_block-&gt;flags |= RAM_PREALLOC_MASK; &#125; else &#123; if (mem_path) &#123; // æœªæŒ‡å®š mem_path#if defined (__linux__) &amp;&amp; !defined(TARGET_S390X) new_block-&gt;host = file_ram_alloc(new_block, size, mem_path); if (!new_block-&gt;host) &#123; new_block-&gt;host = qemu_vmalloc(size); qemu_madvise(new_block-&gt;host, size, QEMU_MADV_MERGEABLE); &#125;#else fprintf(stderr, &quot;-mem-path option unsupported\\n&quot;); exit(1);#endif &#125; else &#123; if (xen_enabled()) &#123; xen_ram_alloc(new_block-&gt;offset, size, mr); &#125; else if (kvm_enabled()) &#123; // ä»è¿™é‡Œç»§ç»­ /* some s390/kvm configurations have special constraints */ new_block-&gt;host = kvm_vmalloc(size); // å®é™…ä¸Šè¿˜æ˜¯è°ƒç”¨ qemu_vmalloc(size) &#125; else &#123; new_block-&gt;host = qemu_vmalloc(size); // ä» QEMU çš„çº¿æ€§ç©ºé—´ä¸­åˆ†é… size å¤§å°çš„å†…å­˜ï¼Œè¿”å› HVA &#125; qemu_madvise(new_block-&gt;host, size, QEMU_MADV_MERGEABLE); &#125; &#125; new_block-&gt;length = size; // å°† length è®¾ç½®ä¸º size QLIST_INSERT_HEAD(&amp;ram_list.blocks, new_block, next); // å°†è¯¥ RAMBlock æ’å…¥ ram_list å¤´éƒ¨ ram_list.phys_dirty = g_realloc(ram_list.phys_dirty, // é‡æ–°åˆ†é… ram_list.phys_dirty çš„å†…å­˜ç©ºé—´ last_ram_offset() &gt;&gt; TARGET_PAGE_BITS); memset(ram_list.phys_dirty + (new_block-&gt;offset &gt;&gt; TARGET_PAGE_BITS), 0, size &gt;&gt; TARGET_PAGE_BITS); cpu_physical_memory_set_dirty_range(new_block-&gt;offset, size, 0xff); // å¯¹è¯¥ RAMBlock å¯¹åº”çš„å†…å­˜æ ‡è®°ä¸º dirty qemu_ram_setup_dump(new_block-&gt;host, size); if (kvm_enabled()) kvm_setup_guest_memory(new_block-&gt;host, size); return new_block-&gt;offset;&#125; è¿™æ ·ä¸€æ¥ramã€å…¶å®å°±æ˜¯system memoryï¼Œæ•´ä¸ªGuestç‰©ç†ç©ºé—´çš„å¤§å°ã€‘å¯¹åº”çš„ RAMBlock ä¸­å°±åˆ†é…å¥½äº† GPA å’Œ HVAï¼Œå°±å¯ä»¥å°†å†…å­˜ä¿¡æ¯åŒæ­¥è‡³ KVM ä¾§äº†ã€‚ æœ€åå›åˆ°pc_memory_init()ä¸­ï¼Œåœ¨åˆ†é…å®Œå®é™…å†…å­˜åï¼Œä¼šå…ˆè°ƒç”¨memory_region_init_alias()åˆå§‹åŒ–ram_below_4gã€ram_above_4gè¿™ä¸¤ä¸ªaliasï¼Œä¹‹åè°ƒç”¨memory_region_add_subregion()å°†è¿™ä¸¤ä¸ª alias æŒ‡å‘ramè¿™ä¸ªå®ä½“ MemoryRegionã€‚å¦‚ä¸‹å›¾ï¼Œè¯¥å‡½æ•°æœ€ç»ˆä¼šè§¦å‘kvm_region_add()å›è°ƒï¼Œå°†å®é™…çš„å†…å­˜ä¿¡æ¯ä¼ å…¥ KVM æ³¨å†Œã€‚è¯¥è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ä¹‹å‰åˆ†æçš„æµç¨‹ç›¸åŒï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚ æ€»ç»“è™šæ‹Ÿæœºçš„å†…å­˜ç®¡ç†ä¹Ÿæ˜¯éœ€è¦ç”¨æˆ·æ€çš„ qemu å’Œå†…æ ¸æ€çš„ KVM å…±åŒå®Œæˆã€‚ä¸ºäº†åŠ é€Ÿå†…å­˜æ˜ å°„ï¼Œéœ€è¦å€ŸåŠ©ç¡¬ä»¶çš„ EPT æŠ€æœ¯ã€‚ QEMU ä¾§ åˆ›å»ºä¸€ç³»åˆ— MemoryRegionï¼Œåˆ†åˆ«è¡¨ç¤º Guest ä¸­çš„ RAMã€ROM ç­‰åŒºåŸŸã€‚MemoryRegionä¹‹é—´é€šè¿‡ alias æˆ– subregions çš„æ–¹å¼ç»´æŠ¤ç›¸äº’ä¹‹é—´çš„å…³ç³»ï¼Œä»è€Œè¿›ä¸€æ­¥ç»†åŒ–åŒºåŸŸçš„å®šä¹‰ å¯¹äºä¸€ä¸ªå®ä½“ MemoryRegionï¼ˆé aliasï¼‰ï¼Œåœ¨åˆå§‹åŒ–å†…å­˜çš„è¿‡ç¨‹ä¸­ QEMU ä¼šåˆ›å»ºå®ƒæ‰€å¯¹åº”çš„ RAMBlockã€‚è¯¥ RAMBlock é€šè¿‡è°ƒç”¨qemu_ram_alloc_from_ptr()ä» QEMU çš„è¿›ç¨‹åœ°å€ç©ºé—´ä¸­ä»¥ mmap çš„æ–¹å¼åˆ†é…å†…å­˜ï¼Œå¹¶è´Ÿè´£ç»´æŠ¤è¯¥ MemoryRegion å¯¹åº”å†…å­˜çš„èµ·å§‹ GPA/HVA/size ç­‰ç›¸å…³ä¿¡æ¯ã€åœ¨qemu_ram_alloc_from_pträ¸­åˆ›å»ºçš„æ–°RAMBlockæœ‰offsetã€hostçš„èµ‹å€¼ï¼Œå³GPA-&gt;HVAçš„å¯¹åº”å…³ç³»ã€‘ AddressSpace è¡¨ç¤º Guest çš„ç‰©ç†åœ°å€ç©ºé—´ã€‚å¦‚æœ AddressSpace ä¸­çš„ MemoryRegion å‘ç”Ÿå˜åŒ–ï¼Œåˆ™æ³¨å†Œçš„ listener ä¼šè¢«è§¦å‘ï¼Œå°†æ‰€å±çš„ MemoryRegion æ ‘å±•å¼€ç”Ÿæˆä¸€ç»´çš„ FlatViewï¼Œæ¯”è¾ƒ FlatRange æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è°ƒç”¨ç›¸åº”çš„æ–¹æ³•å¯¹ MemoryRegionSection è¿›è¡Œæ£€æŸ¥ï¼Œæ›´æ–° QEMU ä¸­çš„ KVMSlotï¼ŒåŒæ—¶å¡«å……kvm_userspace_memory_regionç»“æ„ä½“ï¼Œä½œä¸ºioctl()çš„å‚æ•°æ›´æ–° KVM ä¸­çš„kvm_memory_slot KVM ä¾§ å½“ QEMU é€šè¿‡ioctl()åˆ›å»º vcpu æ—¶ï¼Œè°ƒç”¨kvm_mmu_create()åˆå§‹åŒ– MMU ç›¸å…³ä¿¡æ¯ã€‚å½“ KVM è¦è¿›å…¥ Guest å‰ï¼Œvcpu_enter_guest()=&gt;kvm_mmu_reload()ä¼šå°†æ ¹çº§é¡µè¡¨åœ°å€åŠ è½½åˆ° VMCSï¼Œè®© Guest ä½¿ç”¨è¯¥é¡µè¡¨ å½“å‘ç”ŸEPT Violation æ—¶ï¼ŒVM-EXITåˆ° KVM ä¸­ã€‚å¦‚æœæ˜¯ç¼ºé¡µï¼Œåˆ™æ ¹æ® GPA ç®—å‡º gfnï¼Œå†æ ¹æ® gfn æ‰¾åˆ°å¯¹åº”çš„ KVMSlotï¼Œä»ä¸­å¾—åˆ°å¯¹åº”çš„ HVAã€‚ç„¶åæ ¹æ® HVA ç®—å‡ºå¯¹åº”çš„ pfnï¼Œç¡®ä¿è¯¥ Page ä½äºå†…å­˜ä¸­ã€‚å¡«å¥½ç¼ºå¤±çš„é¡µä¹‹åï¼Œéœ€è¦æ›´æ–° EPTï¼Œå®Œå–„å…¶ä¸­ç¼ºå°‘çš„é¡µè¡¨é¡¹ï¼Œé€å±‚è¡¥å…¨é¡µè¡¨ è™šæ‹Ÿæœºçš„ç‰©ç†å†…å­˜ç©ºé—´é‡Œé¢çš„é¡µé¢å½“ç„¶ä¸æ˜¯ä¸€å¼€å§‹å°±æ˜ å°„åˆ°ç‰©ç†é¡µé¢çš„ï¼Œåªæœ‰å½“è™šæ‹Ÿæœºçš„å†…å­˜è¢«è®¿é—®çš„æ—¶å€™ï¼Œä¹Ÿå³ mmap åˆ†é…çš„è™šæ‹Ÿå†…å­˜ç©ºé—´è¢«è®¿é—®çš„æ—¶å€™ï¼Œå…ˆæŸ¥çœ‹ EPT é¡µè¡¨ï¼Œæ˜¯å¦å·²ç»æ˜ å°„è¿‡ï¼Œå¦‚æœå·²ç»æ˜ å°„è¿‡ï¼Œåˆ™ç»è¿‡å››çº§é¡µè¡¨æ˜ å°„ï¼Œå°±èƒ½è®¿é—®åˆ°ç‰©ç†é¡µé¢ã€‚å¦‚æœæ²¡æœ‰æ˜ å°„è¿‡ï¼Œåˆ™è™šæ‹Ÿæœºä¼šé€šè¿‡VM-ExitæŒ‡ä»¤å›åˆ°å®¿ä¸»æœºæ¨¡å¼ï¼Œé€šè¿‡ handle_ept_violation è¡¥å……é¡µè¡¨æ˜ å°„ã€‚å…ˆæ˜¯é€šè¿‡ handle_mm_faultä¸ºè™šæ‹Ÿæœºçš„ç‰©ç†å†…å­˜ç©ºé—´åˆ†é…çœŸæ­£çš„ç‰©ç†é¡µé¢ï¼Œç„¶åé€šè¿‡ __direct_map æ·»åŠ  EPT é¡µè¡¨æ˜ å°„ã€‚ Referenceâ€œQEMU å†…å­˜ç©ºé—´è™šæ‹ŸåŒ–åŠå†…å­˜ç®¡ç†â€ - B10g | FÎ“om è®¸å¤§ä»™ã€åŸåˆ›ã€‘Linux è™šæ‹ŸåŒ– KVM-Qemu åˆ†æï¼ˆäº”ï¼‰ä¹‹å†…å­˜è™šæ‹ŸåŒ– - LoyenWang - åšå®¢å›­KVM/Qemu å·¥ä½œåŸç†ç³»åˆ—ç›®å½•_xiongwenwu çš„ä¸“æ -CSDN åšå®¢_qemu ç›®å½•ç»“æ„QEMU å†…å­˜è™šæ‹ŸåŒ–æºç åˆ†æ | Keep Coding | è‹æ˜“åŒ—","categories":[{"name":"QEMU æºç åˆ†æ","slug":"QEMU-æºç åˆ†æ","permalink":"http://example.com/categories/QEMU-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"è§£å†³ VSCode é…ç½®è¿œç¨‹è¿æ¥ï¼Œè¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨","slug":"è§£å†³VSCodeé…ç½®è¿œç¨‹è¿æ¥ï¼Œè¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨","date":"2022-01-19T15:07:49.000Z","updated":"2022-10-15T03:14:29.853Z","comments":true,"path":"2022/01/19/è§£å†³VSCodeé…ç½®è¿œç¨‹è¿æ¥ï¼Œè¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨/","link":"","permalink":"http://example.com/2022/01/19/%E8%A7%A3%E5%86%B3VSCode%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%EF%BC%8C%E8%BF%87%E7%A8%8B%E8%AF%95%E5%9B%BE%E5%86%99%E5%85%A5%E7%9A%84%E7%AE%A1%E9%81%93%E4%B8%8D%E5%AD%98%E5%9C%A8/","excerpt":"","text":"ä¿ç•™ç°åœº æ¢ç©¶åŸå› æœ¬åœ°è®°å½•çš„æœåŠ¡å™¨ä¿¡æ¯å’Œç°æœ‰çš„äº§ç”Ÿäº†å†²çª è§£å†³æ–¹æ³•æ–¹æ³•ä¸€å°†known_hostsæ–‡ä»¶çš„å†…å®¹å…¨éƒ¨åˆ é™¤ã€‚ C:\\Users\\user name\\.ssh\\known_hosts æ–¹æ³•äºŒæœéå…¨ç½‘å‡ ä¹éƒ½æ˜¯ä¸Šè¿°æ–¹æ³•ï¼Œåº”è¯¥ç»å¤§éƒ¨åˆ†äººé€šè¿‡ä¸Šè¿°æ–¹æ³•éƒ½èƒ½è§£å†³ã€‚å¦‚æœä½ ä¹Ÿè·Ÿæˆ‘ä¸€æ ·ä¸èµ°è¿ï¼Œä¸ç®¡æ˜¯é‡æ–°ç”Ÿæˆå…¬ç§é’¥ï¼Œè¿˜æ˜¯åˆ é™¤hnow_hostséƒ½ä¸è¡Œï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•ä¿®æ”¹ VSCode ä½¿ç”¨çš„ssh.exeã€‚Windows ä¸‹é»˜è®¤ä½¿ç”¨çš„æ˜¯ç¯å¢ƒå˜é‡é‡Œé…ç½®çš„OpenSSHæä¾›çš„ssh.exeã€‚ä½ å¯ä»¥å°†ç¯å¢ƒå˜é‡é‡Œçš„OpenSSHåˆ é™¤ã€‚ç„¶ååœ¨VSCodeè®¾ç½®é‡Œæœç´¢remoteï¼Œä¹Ÿå°±æ˜¯è®¾ç½®æ’ä»¶remote sshã€‚ å°† Path å¼ºåˆ¶è®¾ç½®æˆGitå®‰è£…åŒ…å†…çš„ssh.exe æˆ–è€…mobaxtermå®‰è£…åŒ…å†…çš„ssh.exe å‚è€ƒDebug | VSCode | è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨ - CodeAntenna VScode é€šè¿‡ remote ssh è¿æ¥è™šæ‹Ÿæœº &amp; æŠ¥é”™ è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨ï¼ˆå·²è§£å†³ï¼‰_Tasdily çš„åšå®¢-CSDN åšå®¢_vscode è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨","categories":[],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Linux å¸§ç¼“å†²","slug":"Linuxå¸§ç¼“å†²","date":"2022-01-17T09:38:04.000Z","updated":"2022-10-15T03:14:29.293Z","comments":true,"path":"2022/01/17/Linuxå¸§ç¼“å†²/","link":"","permalink":"http://example.com/2022/01/17/Linux%E5%B8%A7%E7%BC%93%E5%86%B2/","excerpt":"","text":"ç®€ä»‹FrameBuffer æ˜¯å†…æ ¸å½“ä¸­çš„ä¸€ç§é©±åŠ¨ç¨‹åºæ¥å£ã€‚Linux æ˜¯å·¥ä½œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ‰€ä»¥ç”¨æˆ·æ€è¿›ç¨‹æ˜¯æ— æ³•è±¡ DOS é‚£æ ·ä½¿ç”¨æ˜¾å¡ BIOS é‡Œæä¾›çš„ä¸­æ–­è°ƒç”¨æ¥å®ç°ç›´æ¥å†™å±ï¼ŒLinux æŠ½è±¡å‡º FrameBuffer è¿™ä¸ªè®¾å¤‡æ¥ä¾›ç”¨æˆ·æ€è¿›ç¨‹å®ç°ç›´æ¥å†™å±ã€‚ å¸§ç¼“å†²ä¸»è¦ç»“æ„ fb_info è¯¥ç»“æ„ä½“è®°å½•å½“å‰å¸§ç¼“å†²è®¾å¤‡çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æœç³»ç»Ÿä¸­æœ‰å¤šä¸ªå¸§ç¼“å†²è®¾å¤‡ï¼Œå°±éœ€è¦ä¸¤ä¸ªfb_infoç»“æ„ï¼Œè¿™ä¸ªç»“æ„åªåœ¨å†…æ ¸ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯¹ç”¨æˆ·ç©ºé—´ä¸å¯è§ã€‚ fb_var_screeninfo è¯¥ç»“æ„ä½“è®°å½•æŒ‡å®šçš„å¸§ç¼“å†²è®¾å¤‡å’Œæ˜¾ç¤ºæ¨¡å¼ä¸­å¯ä»¥è¢«ä¿®æ”¹çš„ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡ç­‰ä¿¡æ¯ã€‚ fb_fix_screeninfo è¯¥ç»“æ„ä½“è¡¨ç¤ºå¸§ç¼“å†²è®¾å¤‡ä¸­ä¸€äº›ä¸èƒ½ä¿®æ”¹çš„å‚æ•°ï¼ŒåŒ…æ‹¬ç‰¹å®šçš„æ˜¾ç¤ºæ¨¡å¼ï¼Œå±å¹•ç¼“å†²åŒºçš„ç‰©ç†åœ°å€ï¼Œæ˜¾ç¤ºç¼“å†²åŒºçš„é•¿åº¦ä¿¡æ¯ã€‚ fb_ops LCDåº•å±‚ç¡¬ä»¶æ“ä½œæ¥å£é›†ã€‚æ¯”å¦‚fb_openã€fb_releaseã€fb_readã€fb_writeã€fb_ioctlã€fb_mmapç­‰ï¼š fb_cmap fb_cmapæŒ‡å®šé¢œè‰²æ˜ å°„ï¼Œç”¨äºä»¥å†…æ ¸å¯ä»¥ç†è§£çš„æ–¹å¼å­˜å‚¨ç”¨æˆ·çš„é¢œè‰²å®šä¹‰ã€‚ å¸§ç¼“å†²æ˜¾ç¤ºåŸç†å¸§ç¼“å†²è®¾å¤‡æ˜¯ä¸€ç§æ˜¾ç¤ºæŠ½è±¡çš„è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥è¢«ç†è§£ä¸ºå®ƒæ˜¯ä¸€ä¸ªå†…å­˜åŒºåŸŸï¼Œä¸Šé¢çš„åº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥å¯¹æ˜¾ç¤ºç¼“å†²åŒºè¿›è¡Œè¯»å’Œå†™æ“ä½œï¼Œå°±åƒè®¿é—®æ–‡ä»¶çš„é€šç”¨æ¥å£ä¸€æ ·ï¼Œç”¨æˆ·å¯ä»¥è®¤ä¸ºå¸§ç¼“å†²æ˜¯ä¸€å—å†…å­˜ï¼Œèƒ½è¯»å–æ•°æ®çš„å†…å­˜å—ä¹Ÿå¯ä»¥å‘è¿™ä¸ªå†…å­˜å†™å…¥æ•°æ®ï¼Œå› æ­¤æ˜¾ç¤ºå™¨æ˜¾ç¤ºå›¾å½¢ç•Œé¢å®é™…ä¸Šæ ¹æ®æ ¹æ®çš„æ˜¯æŒ‡å®šçš„å†…å­˜æ•°æ®å—å†…çš„æ•°æ®ã€‚ å¸§ç¼“å†²çš„æ˜¾ç¤ºç¼“å†²åŒºä½äº Linux å†…æ ¸åœ°å€ç©ºé—´ï¼Œåº”ç”¨ç¨‹åºä¸èƒ½ç›´æ¥è®¿é—®å†…æ ¸åœ°å€ç©ºé—´ï¼Œåœ¨ Linux ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå†…å­˜çš„å†…æ ¸åœ°å€ç©ºé—´æ˜ å°„åˆ°ç”¨æˆ·åœ°å€ç©ºé—´æ‰å¯ä»¥ç”±ç”¨æˆ·è®¿é—®ï¼Œå†…å­˜çš„æ˜ å°„æ˜¯é€šè¿‡MMAPå‡½æ•°å®ç°çš„åœ¨ Linux ä¸­ã€‚å¯¹äºå¸§ç¼“å†²ï¼Œè™šæ‹Ÿåœ°å€æ˜¯é€šè¿‡å†…å­˜æ˜ å°„çš„æ–¹æ³•å°†æ˜¾ç¤ºç¼“å†²åŒºå†…æ ¸åœ°å€æ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´çš„ï¼Œç„¶åç”¨æˆ·å¯ä»¥é€šè¿‡è¯»å’Œå†™è¿™éƒ¨åˆ†çš„è™šæ‹Ÿåœ°å€æ¥è®¿é—®æ˜¾ç¤ºç¼“å†²åŒºï¼Œåœ¨å±å¹•ä¸Šç»˜å›¾ã€‚ ä½¿ç”¨æµç¨‹ä½¿ç”¨å¸§ç¼“å†²ä¹‹å‰åº”è¯¥é¦–å…ˆç¡®å®š Linux ç³»ç»Ÿä¸Šå·²å®‰è£…äº†å¸§ç¼“å†²é©±åŠ¨ï¼Œå¯ä»¥åœ¨ç›®å½•/dev/ä¸‹æŸ¥æ‰¾fb*å¦‚ï¼Œ/dev/fb0, /dev/fb1ç­‰è®¾å¤‡æ¥ç¡®å®šæ˜¯å¦å®‰è£…ã€‚å¦‚æœæ²¡æœ‰éœ€è¦å®‰è£…ä¸€ä¸ªå¸§ç¼“å†²é©±åŠ¨çš„æ¨¡å—åˆ°å†…æ ¸ï¼Œæˆ–è€…é‡æ–°ç¼–è¯‘å†…æ ¸ç”Ÿæˆä¸€ä¸ªå¸¦å¸§ç¼“å†²æ¨¡å—çš„é•œåƒã€‚ ä½¿ç”¨å¸§ç¼“å†²éœ€è¦è¿›å…¥æ§åˆ¶å°æ¨¡å¼ï¼Œå³çº¯å‘½ä»¤è¡Œçš„æ¨¡å¼è¿›è¡Œç¼–ç¨‹ã€‚ä¸€èˆ¬å¯ä»¥é€šè¿‡å¿«æ·é”®CTRL+ALT+F1è¿›å…¥æ§åˆ¶å°æ¨¡å¼ï¼ŒCTRL+ALT+F7åˆ‡å›å›¾å½¢çª—å£ã€‚å¦‚æœæ§åˆ¶å°æ¨¡å¼æ²¡æœ‰ç™»å½•ï¼Œå¯ä»¥CTRL+ALT+F6å°è¯•ç™»å½•ã€‚ å› ç¡¬ä»¶æ˜¾ç¤ºè®¾å¤‡çš„ç‰©ç†æ˜¾ç¤ºåŒºæ˜¯é€šè¿‡å¸§ç¼“å­˜åŒºæ“ä½œï¼Œè€Œå¸§ç¼“å­˜åŒºæ˜¯å¤„äºå†…æ ¸ç©ºé—´ï¼Œåº”ç”¨ç¨‹åºä¸èƒ½éšæ„æ“ä½œï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨mmapæŠŠå¸§ç¼“å­˜æ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´ï¼Œåœ¨ç”¨æˆ·ç©ºé—´ä¸­åˆ›å»ºå‡ºå¸§ç¼“å­˜æ˜ å°„åŒºï¼ˆç”¨æˆ·å›¾åƒæ•°æ®ç¼“å­˜åŒºï¼‰ï¼Œä»¥ååªéœ€æŠŠç”¨æˆ·å›¾åƒæ•°æ®å†™å…¥åˆ°å¸§ç¼“å­˜æ˜ å°„åŒºå°±å¯åœ¨ç¡¬ä»¶è®¾å¤‡ä¸Šæ˜¾ç¤ºå›¾åƒã€‚ å…·ä½“å®ç°æµç¨‹å¦‚ä¸‹ï¼š æ‰“å¼€å¸§ç¼“å†²è®¾å¤‡/dev/f0åœ¨Linuxçš„/devç›®å½•çš„å¯»æ‰¾b*è®¾å¤‡æ–‡ä»¶ç„¶åä½¿ç”¨è¯»å†™æ¨¡å¼æ‰“å¼€å®ƒï¼ŒLinux ç³»ç»Ÿå°†ä½¿ç”¨é€šç”¨çš„openç³»ç»Ÿè°ƒç”¨æ¥å®ŒæˆåŠŸèƒ½ï¼Œ opençš„åŠŸèƒ½åŸå‹å¦‚ä¸‹ï¼š 1int open(const char *path, int oflags); Pathæ˜¯å‡†å¤‡æ‰“å¼€çš„æ–‡ä»¶æˆ–è®¾å¤‡çš„è·¯å¾„å‚æ•°ï¼› oflagsæŒ‡å®šæ‰“å¼€æ–‡ä»¶æ—¶ä½¿ç”¨çš„å‚æ•°ï¼› flagså‚æ•°çš„æŒ‡å®šï¼Œæ˜¯é€šè¿‡ç»„åˆæ–‡ä»¶è®¿é—®æ¨¡å¼å’Œå…¶ä»–çš„å¯é€‰æ¨¡å¼ä¸€èµ·çš„ï¼Œå¯ä»¥æ”¯æŒå¤šä¸ªæ¨¡å¼æˆ–ï¼Œå‚æ•°å¿…é¡»æ˜¯æŒ‡å®šä¸‹åˆ—æ–‡ä»¶çš„è®¿é—®æ¨¡å¼ã€‚ åªè¯»ï¼šO_RDONLLY åªå†™ï¼šO_WRONLY è¯»å†™ï¼šO_RDWR ç®€è€Œè¨€ä¹‹ï¼Œ openå‡½æ•°å»ºç«‹è®¾å¤‡æ–‡ä»¶çš„è®¿é—®è·¯å¾„ã€‚å¦‚æœæ“ä½œæˆåŠŸï¼Œå®ƒè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œåªæ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå®ƒå°†ä¸ä½¿ç”¨å…¶ä»–ä»»ä½•æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å…±äº«ã€‚å¦‚æœä¸¤ä¸ªç¨‹åºåŒæ—¶æ‰“å¼€ç›¸åŒçš„æ–‡ä»¶ï¼Œå°†å¾—åˆ°ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ã€‚å¦‚æœä»–ä»¬æ‰§è¡Œæ–‡ä»¶å†™å…¥æ“ä½œï¼Œä»–ä»¬å°†æ“ä½œæ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä¸ä¼šå‘ç”Ÿå†²çªï¼Œå†™å®Œä¹‹åé€€å‡ºã€‚ä»–ä»¬çš„æ•°æ®ä¸ä¼šäº’ç›¸äº¤ç»‡åœ¨ä¸€èµ·çš„ï¼Œä½†ä¼šäº’ç›¸çš„å½¼æ­¤è¦†ç›– (åå†™å®Œçš„å†…å®¹è¦†ç›–å‰é¢å†™çš„å†…å®¹)ï¼Œä¸¤ä¸ªç¨‹åºæ¥è¯»å–å’Œå†™å…¥çš„æ–‡ä»¶ä½ç½®çœ‹ä¼¼ä¸€æ ·ä½†æ˜¯æœ‰å„è‡ªä¸åŒæ‹·è´æ‰€ä»¥ä¸ä¼šå‘ç”Ÿäº¤ç»‡ã€‚å¦‚æœopenè°ƒç”¨æœªèƒ½è¿”å›1ï¼Œåˆ™å°†å…¨å±€å˜é‡errnoè®¾ç½®ä¸ºæŒ‡ç¤ºå¤±è´¥çš„åŸå› ã€‚ é€šè¿‡ç³»ç»Ÿè°ƒç”¨ioctlå‡½æ•°è·å¾—å¸§è®¾å¤‡ç›¸å…³ä¿¡æ¯é€šè¿‡é¡¿ç¼“å†²æ–‡ä»¶æè¿°ç¬¦ï¼Œå±å¹•çš„åˆ†è¾¨ç‡ã€é¢œè‰²æ·±åº¦ç­‰ä¿¡æ¯å¯ä»¥è¢«è·å¾—ï¼Œå¸§ç¼“å†²é©±åŠ¨ä¸­å­˜æ”¾äº†è¿™äº›å¯¹åº”çš„ä¿¡æ¯ï¼Œå¿…é¡»ä½¿ç”¨ Linux ç³»ç»Ÿè°ƒç”¨ioctlé¦–å…ˆå°†å¸§ç¼“å†²çš„æ–‡ä»¶æè¿°ç¬¦å’Œfb_var_screeninfo ç»“æ„ä½“å¯¹åº”èµ·æ¥ã€‚ ç»“æ„ä½“fb_var_screeninfoåŒ…å«ä»¥ä¸‹ä¸‰ä¸ªé‡è¦æ•°æ®ç»“æ„ï¼š å±å¹•çš„ x æ–¹å‘åˆ†è¾¨ç‡ï¼Œåƒç´ ä½œä¸ºå•ä½ã€‚ å±å¹•çš„ Y æ–¹å‘åˆ†è¾¨ç‡ï¼Œåƒç´ ä½œä¸ºå•ä½ã€‚ å±å¹•çš„åƒç´ é¢œè‰²æ·±åº¦ï¼Œæ¯ä¸ªåƒç´ ç”¨å¤šå°‘æ¯”ç‰¹æ•°è¡¨ç¤ºã€‚ ioctlå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š 1extern int ioctl (int __fd, unsigned long int __request, ...) __THROW; ioctlè°ƒç”¨å®ç°è®¿é—®è®¾å¤‡é©±åŠ¨å„ç§å„æ ·çš„é…ç½®ä¿¡æ¯åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ§åˆ¶è®¾å¤‡çš„è¡Œä¸ºå’Œé…ç½®åº•å±‚æœåŠ¡æ¥å£çš„é©±åŠ¨å‡½æ•°ï¼Œå„ç§è®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œä¾‹å¦‚å¥—æ¥å­—å’Œç³»ç»Ÿç»ˆç«¯ï¼Œè¿˜æœ‰ç£å¸¦æœºéƒ½æœ‰ioctlå‘½ä»¤å¯ä»¥æ”¯æŒã€‚ __fdï¼šioctlå‘½ä»¤ä¸­æ˜¯è¯¥å¸§ç¼“å†²çš„æ–‡ä»¶æè¿°ç¬¦ï¼› __requestï¼šioctlå‡½æ•°å°†è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå®ç°å‚æ•°ç»™å®šçš„å¯¹è±¡æè¿°ç¬¦ä¸­æŒ‡å®šçš„å‡½æ•°æ“ä½œï¼Œå„ç§è®¾å¤‡æ”¯æŒçš„åŠŸèƒ½æ˜¯æœ‰å·®å¼‚çš„ FBIOGET_VSCREENINFOå‘½ä»¤å­—è¿”å›ä¸Framebufferæœ‰å…³çš„å›ºå®šçš„ä¿¡æ¯ï¼› FBIOGET_VSCREENINFOå‘½ä»¤å­—è¿”å›ä¸ Framebuffer æœ‰å…³çš„å¯å˜çš„ä¿¡æ¯ï¼› ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆç”¨æ¥æŒ‡å‘ç»“æ„ä½“fb_var_screeninfoã€‚ æœ€åä½¿ç”¨è€…å¯ä»¥é€šè¿‡ç»“æ„ä½“fb_var_screeninfoæ¥è·å¾—å±å¹•çš„åˆ†è¾¨ç‡å’Œé¢œè‰²ä½æ·±å’Œå…¶ä»–é‡è¦çš„å±å¹•ä¿¡æ¯ã€‚æ ¹æ®è¿™äº›ä¿¡æ¯å¯ä»¥è®¡ç®—å±å¹•ç¼“å†²åŒºçš„å¤§å°ï¼šå±å¹•ç¼“å†²åŒºå¤§å° (ä»¥å­—èŠ‚ä¸ºå•ä½) = å±å¹•å®½åº¦xé«˜åº¦xå±å¹•é¢œè‰²æ·±åº¦/8 å¸§ç¼“å†²æ˜ å°„åœ¨è¿›è¡Œå¸§ç¼“å†²çš„MMAPæ˜ å°„ä¹‹å‰ï¼Œè¦å…ˆå¾—åˆ°å¸§ç¼“å†²æ–‡ä»¶æè¿°ç¬¦ï¼Œæ‰èƒ½åƒå±å¹•ä¸Šé¢æ˜¾ç¤ºï¼Œå¿…é¡»é¦–å…ˆå°†ç¼“å†²åŒºçš„å†…æ ¸åœ°å€æ˜ å°„æ˜ å°„åˆ°ç”¨æˆ·åœ°å€ç©ºé—´ã€‚Linux ç³»ç»Ÿå°†ä½¿ç”¨MMAPç³»ç»Ÿè°ƒç”¨å®ŒæˆåŠŸèƒ½ï¼ŒMMAPå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š 12extern void *mmap (void *__addr, size_t __len, int __prot, int __flags, int __fd, __off_t __offset) __THROW; __addrï¼šè¿”å›ä¸€ä¸ªæŒ‡å‘mmapå‡½æ•°çš„å†…å­˜åŒºåŸŸçš„æŒ‡é’ˆï¼Œä¸å†…å®¹ç›¸å…³çš„æ–‡ä»¶æŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆå¯ä»¥è®¿é—®å¸§ç¼“å†²åŒºçš„å†…å­˜åŒºåŸŸã€‚ __lenï¼šå¯ä»¥è¯·æ±‚ä½¿ç”¨ç‰¹å®šå†…å­˜åœ°å€ï¼Œé€šè¿‡è®¾ç½®åœ°å€å‚æ•°ï¼Œå¦‚æœå€¼ä¸º0ï¼Œå°†è‡ªåŠ¨åˆ†é…æŒ‡é’ˆï¼Œè¿™æ˜¯æ¨èçš„åšæ³•ï¼Œå¦åˆ™ä¼šé™ä½ç¨‹åºçš„å¯ç§»æ¤æ€§ï¼Œå› ä¸ºä¸åŒçš„ç³»ç»Ÿå¯ç”¨çš„åœ°å€èŒƒå›´æ˜¯ä¸ä¸€æ ·çš„ã€‚ __protï¼šè®¾ç½®å†…å­˜è®¿é—®çš„æƒé™è®¾å®šï¼Œé€šè¿‡ç«¯å£ç›¸å…³çš„å‚æ•°å®šä¹‰ï¼Œä½çš„å®šä¹‰å€¼å¦‚ä¸‹ï¼š PORT_EXEC:å…è®¸å†…å­˜æ®µçš„æ‰§è¡Œã€‚ PORT_NONE:æ— æ³•è®¿é—®å†…å­˜æ®µã€‚ PORT_READ:å…è®¸è¯»å–å†…å­˜æ®µã€‚ PORT_WRITE:å…è®¸ç¼–å†™å†…å­˜æ®µã€‚ __flagsï¼šæ”¹å˜æ§åˆ¶å‚æ•°æ ‡å¿—ï¼Œèƒ½å¤Ÿå½±å“è¯¥å†…å­˜æ®µçš„ä½œç”¨åŸŸï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š MAP_FIXED:å†…å­˜æ®µå¿…é¡»ä½äºaddrä¸­æŒ‡å®šçš„åœ°å€ã€‚ MAP_SHARED:å†…å­˜çš„ä¿®æ”¹ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ MAP_PRIVATE:å†…å­˜æ®µæ˜¯ç§äººçš„ï¼Œå˜åŒ–ä»…åœ¨æœ¬åœ°èŒƒå›´å†…æœ‰æ•ˆã€‚ __fdï¼šæ˜¯é€šè¿‡ä¸€ä¸ªopenè°ƒç”¨å¾—åˆ°çš„è®¿é—®æ–‡ä»¶çš„æè¿°ç¬¦ã€‚ offsetï¼šç”¨äºæŒ‡å®šè®¿é—®æ•°æ®çš„å¼€å§‹åç§»é‡åœ¨å†…å­˜æ®µä¸­ï¼Œå’Œè®¿é—®æ™®é€šæ–‡ä»¶ä½¿ç”¨æ–¹å¼æ˜¯ç›¸åŒçš„ï¼Œå†æŒ‡å®šæ–‡ä»¶æè¿°ç¬¦å‚æ•°ï¼Œä»¥åŠè®¿é—®çš„æ•°æ®é•¿åº¦å‚æ•°å³å¯ã€‚ è¯»å†™å¸§ç¼“å†²MMAPè¿”å›çš„æŒ‡é’ˆï¼Œå¯ä»¥è®¿é—®åˆ°å¸§ç¼“å†²å†…å­˜åŒºï¼Œå¯ä»¥å®šä½åˆ°å±å¹•ç¼“å†²åŒºå…·ä½“ä¸ºæ¯ä¸ªæ˜¾ç¤ºåƒç´ çš„ä½ç½®ï¼Œé€šè¿‡è¯»å‡½æ•°è°ƒç”¨è¯»å–å¯¹åº”çš„ä½ç½®æ•°æ®åœ¨å¸§ç¼“å†²å†…å­˜ä¸­ï¼Œç›¸åå†™æ“ä½œå¯¹åº”äºå†…å­˜çš„å†™å…¥æ•°æ®å¯ä»¥æ˜¾ç¤ºå†…å®¹å†™åˆ°å±å¹•ä¸Šã€‚ è§£é™¤å¸§ç¼“å†²æ˜ å°„åœ¨ç»˜å›¾å®Œæˆåï¼Œå¸§ç¼“å†²æ–‡ä»¶æè¿°ç¬¦å¿…é¡»è¢«é‡Šæ”¾ä¹‹å‰ï¼Œè§£é™¤å¸§ç¼“å†²åŒºçš„åœ°å€æ˜ å°„ï¼Œä½¿ç”¨ Linux ç³»ç»Ÿè°ƒç”¨å®Œæˆmmapå‡½æ•°çš„é€†å‡½æ•°å®ç°ï¼Œå³æ˜¯munmapï¼Œå‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š 1extern int munmap (void *__addr, size_t __len) __THROW; addrå‚æ•°åº”è¯¥ä¸è°ƒç”¨MMAPæ—¶æŒ‡å®šçš„å‚æ•°å€¼ä¸€è‡´ï¼Œ lenå‚æ•°ä¹Ÿåº”è¯¥ä¸ä¹‹å‰è°ƒç”¨MMAPæ—¶æŒ‡å®šçš„lenå‚æ•°ä¿æŒä¸€è‡´ã€‚ mmapè°ƒç”¨è¿”å›0æˆåŠŸï¼Œå¤±è´¥åˆ™è¿”å›1ï¼ŒåŒæ—¶å°†å…¨å±€å˜é‡ernoè®¾ç½®ä¸ºæŒ‡ç¤ºå¤±è´¥çš„åŸå› ã€‚ è°ƒç”¨closeå…³é—­è®¾å¤‡ä½¿ç”¨å¸§ç¼“å†²è®¾å¤‡åï¼Œåº”å…³é—­ç›¸åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä½¿ç”¨ Linux ç³»ç»Ÿæ ‡å‡†çš„å‡½æ•°å®Œæˆå…³é—­åŠŸèƒ½ï¼Œcloseå‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š 1extern int close (int __fd); closeçš„å‚æ•°å’Œåœ¨å¼€å§‹è°ƒç”¨openæ—¶æŒ‡å®šçš„å‚æ•°ä¸€è‡´ï¼Œæ–‡ä»¶æè¿°ç¬¦é‡Šæ”¾åå¯ä»¥é‡ç”¨ï¼Œç»“æŸè°ƒç”¨æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›1ã€‚ å¸§ç¼“å†²å®ä¾‹ä»¥ä¸‹ä»£ç æ‘˜è‡ªxianjimli/linux-framebuffer-tools: linux framebuffer toolï¼Œæ¼”ç¤ºäº†å¸§ç¼“å†²è®¾å¤‡çš„ä½¿ç”¨æµç¨‹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667fb_info_t *linux_fb_open(const char *filename)&#123; uint32_t size = 0; fb_info_t *fb = NULL; struct fb_fix_screeninfo fix; struct fb_var_screeninfo var; return_value_if_fail(filename != NULL, NULL); fb = (fb_info_t *)calloc(1, sizeof(fb_info_t)); return_value_if_fail(fb != NULL, NULL); // æ‰“å¼€å¸§ç¼“å†²è®¾å¤‡ï¼ŒO_RDWR è¯»å†™æ¨¡å¼ fb-&gt;fd = open(filename, O_RDWR); if (fb-&gt;fd &lt; 0) &#123; log_debug(&quot;open %s failed(%d)\\n&quot;, filename, errno); free(fb); return NULL; &#125; // é€šè¿‡ç³»ç»Ÿè°ƒç”¨ ioctl å‡½æ•°è·å¾—å¸§è®¾å¤‡ç›¸å…³ä¿¡æ¯ // FBIOGET_FSCREENINFO å‘½ä»¤å­—è¿”å›ä¸ Framebuffer æœ‰å…³çš„å›ºå®šçš„ä¿¡æ¯ if (ioctl(fb-&gt;fd, FBIOGET_FSCREENINFO, &amp;fix) &lt; 0) goto fail; //å‘½ä»¤å­—è¿”å›ä¸ Framebuffer æœ‰å…³çš„å¯å˜çš„ä¿¡æ¯ if (ioctl(fb-&gt;fd, FBIOGET_VSCREENINFO, &amp;var) &lt; 0) goto fail; var.xoffset = 0; var.yoffset = 0; // æ˜¾ç¤º ioctl(fb-&gt;fd, FBIOPAN_DISPLAY, &amp;(var)); log_debug(&quot;fb_info_t: %s\\n&quot;, filename); log_debug(&quot;fb_info_t: xres=%d yres=%d bits_per_pixel=%d mem_size=%d\\n&quot;, var.xres, var.yres, var.bits_per_pixel, fb_size(fb)); log_debug(&quot;fb_info_t: red(%d %d) green(%d %d) blue(%d %d)\\n&quot;, var.red.offset, var.red.length, var.green.offset, var.green.length, var.blue.offset, var.blue.length); fb-&gt;w = var.xres; fb-&gt;h = var.yres; fb-&gt;bpp = var.bits_per_pixel / 8; fb-&gt;line_length = fix.line_length; size = fb_size(fb); // å¸§ç¼“å†²æ˜ å°„ // PROT_READ | PROT_WRITE:å¯è¯»å†™ // MAP_SHAREDï¼šå†…å­˜çš„ä¿®æ”¹ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ fb-&gt;data = (uint8_t *)mmap(0, size, PROT_READ | PROT_WRITE, MAP_SHARED, fb-&gt;fd, 0); if (fb-&gt;data == MAP_FAILED) &#123; log_debug(&quot;map framebuffer failed.\\n&quot;); goto fail; &#125; log_debug(&quot;line_length=%d mem_size=%d\\n&quot;, fix.line_length, fb_size(fb)); log_debug(&quot;xres_virtual =%d yres_virtual=%d xpanstep=%d ywrapstep=%d\\n&quot;, var.xres_virtual, var.yres_virtual, fix.xpanstep, fix.ywrapstep); return fb;fail: log_debug(&quot;%s is not a framebuffer.\\n&quot;, filename); close(fb-&gt;fd); free(fb); return NULL;&#125; æ„Ÿå…´è¶£å¯ä»¥ä¸‹è½½æºç ç¼–è¯‘è¿è¡Œï¼Œå…¶ä¸­/bin/fbshowå¯ä»¥ä½¿ç”¨å¸§ç¼“å†²è®¾å¤‡æ˜¾ç¤ºå›¾ç‰‡ã€‚å›¾å½¢ç•Œé¢ä¸‹ç›´æ¥è¿è¡Œå¯èƒ½æç¤ºæ— æ³•è¿è¡Œï¼Œéœ€è¦Chrtl+Alt+F1åˆ‡æ¢åˆ°æ§åˆ¶å°æ¨¡å¼ã€‚ LCD ä¸ Framebuffer çš„å…³ç³» LCD æ§åˆ¶å™¨é¦–å…ˆé€šè¿‡ VDEN ä¿¡å·ï¼Œä½¿èƒ½ã€‚æ¥ä¸‹æ¥æ ¹æ® VCLK æ—¶é’Ÿä¿¡å·ï¼Œåœ¨åƒç´ ç‚¹ä¸Šâ€œå–·æ¶‚â€ä¸åŒçš„é¢œè‰²ï¼ˆæ‰“ä¸ªæ¯”æ–¹ï¼‰ï¼Œæ§åˆ¶å™¨æœ‰ VDï¼ˆvideo dataï¼‰ä¿¡å·ï¼Œä¼ é€ä¸åŒé¢œè‰²ä¿¡æ¯ã€‚æ¯æ¥ä¸€ä¸ªæ—¶é’Ÿä¿¡å·ï¼Œå°±å‘å³ç§»åŠ¨ä¸€ä¸ªåƒç´ ï¼Œæ ¹æ®è¡ŒåŒæ­¥ä¿¡å· HSYNCï¼Œå°±ä»æœ€å³è¾¹ç§»åŠ¨åˆ°æœ€å·¦è¾¹ã€‚å½“ç§»åŠ¨åˆ°å³ä¸‹è§’æ—¶æ ¹æ®å‚ç›´åŒæ­¥ä¿¡å· VSYNCã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸åŒé¢œè‰²çš„ä¿¡æ¯ä»å“ªé‡Œæ¥ï¼Ÿå°±æ˜¯ä»ä¸Šæ–‡ä»‹ç»çš„ Framebuffer ä¸­æ¥çš„ã€‚ å¾ˆå¤šäººéƒ½ä¼šè¯´æ“çºµ LCD æ˜¾ç¤ºå°±æ˜¯æ“çºµ FrameBufferï¼Œè¡¨é¢ä¸Šæ¥çœ‹æ˜¯è¿™æ ·çš„ã€‚å®é™…ä¸Šæ˜¯ FrameBuffer å°±æ˜¯ Linux å†…æ ¸é©±åŠ¨ç”³è¯·çš„ä¸€ç‰‡å†…å­˜ç©ºé—´ï¼Œç„¶å LCD å†…æœ‰ä¸€ç‰‡ sramï¼ŒCPU å†…éƒ¨æœ‰ä¸ª LCD æ§åˆ¶å™¨ï¼Œå®ƒæœ‰ä¸ªå•ç‹¬çš„ dma ç”¨æ¥å°† FrameBuffer ä¸­çš„æ•°æ®æ‹·è´åˆ° LCD çš„ sram ä¸­å» æ‹·è´åˆ° LCD çš„ sram ä¸­çš„æ•°æ®å°±ä¼šæ˜¾ç¤ºåœ¨ LCD ä¸Šï¼ŒLCD é©±åŠ¨å’Œ FrameBuffer é©±åŠ¨æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œå®ƒåªæ˜¯é©±åŠ¨ LCD æ­£å¸¸å·¥ä½œçš„ï¼Œæ¯”å¦‚æœ‰ä¿¡å·ä¼ è¿‡æ¥ï¼Œé‚£ä¹ˆ LCD é©±åŠ¨è´Ÿè´£æŠŠä¿¡å·è½¬æˆæ˜¾ç¤ºå±ä¸Šçš„å†…å®¹ï¼Œè‡³äºä»€ä¹ˆå†…å®¹è¿™å°±æ˜¯åº”ç”¨å±‚è¦å¤„ç†çš„ã€‚ é™æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆStatic Random-Access Memoryï¼ŒSRAMï¼‰æ˜¯éšæœºå­˜å–å­˜å‚¨å™¨çš„ä¸€ç§ã€‚æ‰€è°“çš„â€œé™æ€â€ï¼Œæ˜¯æŒ‡è¿™ç§å­˜å‚¨å™¨åªè¦ä¿æŒé€šç”µï¼Œé‡Œé¢å‚¨å­˜çš„æ•°æ®å°±å¯ä»¥æ’å¸¸ä¿æŒã€‚DMAï¼ˆDirect Memory Accessï¼‰ï¼Œç›´æ¥å†…å­˜è®¿é—®ã€‚ä½¿ç”¨ DMA çš„å¥½å¤„å°±æ˜¯å®ƒä¸éœ€è¦ CPU çš„å¹²é¢„è€Œç›´æ¥æœåŠ¡å¤–è®¾ï¼Œè¿™æ · CPU å°±å¯ä»¥å»å¤„ç†åˆ«çš„äº‹åŠ¡ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ•ˆç‡ã€‚ ReferenceLinux é©±åŠ¨ä¹‹ Framebuffer å­ç³»ç»Ÿ | é‡å­èŒƒå¼Linux é©±åŠ¨å¼€å‘ï¼ˆ9ï¼‰â€”â€”- framebuffer é©±åŠ¨è¯¦è§£ | ç å†œå®¶å›­åµŒå…¥å¼ç³»ç»Ÿä¸­å¸§ç¼“å†²æ˜¾ç¤ºæ¨¡å—çš„è®¾è®¡ä¸å®ç° - ä¸­å›½çŸ¥ç½‘research/framebuffer/fivechess/fivechess-0.1 at master Â· tsuibin/researchäº”å­æ£‹ framebuffer ç‰ˆ - å°šç å›­FrameBuffer é©±åŠ¨ç¨‹åºåˆ†æ_æ·±å…¥å‰–æ Android ç³»ç»Ÿ-CSDN åšå®¢_framebufferxianjimli/linux-framebuffer-tools: linux framebuffer tooléŸ¦ä¸œå±±_åµŒå…¥å¼ Linux_ç¬¬ 2 æœŸ_Linux é«˜çº§é©±åŠ¨è§†é¢‘æ•™ç¨‹_å…è´¹è¯•çœ‹ç‰ˆ_å“”å“©å“”å“©_bilibiliLinux LCD Frambuffer åŸºç¡€ä»‹ç»å’Œä½¿ç”¨ï¼ˆ1ï¼‰ - çŸ¥ä¹","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"FrameBuffer","slug":"FrameBuffer","permalink":"http://example.com/tags/FrameBuffer/"},{"name":"LCD","slug":"LCD","permalink":"http://example.com/tags/LCD/"}]},{"title":"è§£å†³ ssh permission denied(publickey)","slug":"è§£å†³Git ssh permission denied(publickey)","date":"2022-01-13T14:43:02.000Z","updated":"2022-10-15T03:14:29.809Z","comments":true,"path":"2022/01/13/è§£å†³Git ssh permission denied(publickey)/","link":"","permalink":"http://example.com/2022/01/13/%E8%A7%A3%E5%86%B3Git%20ssh%20permission%20denied(publickey)/","excerpt":"","text":"ä¿ç•™ç°åœº12linux&gt; ssh -p 2221 xxx@gerrit.comxxx@gerrit.com: Permission denied(publickey) æ¢ç©¶åŸå› æœ¬æ¬¡å‡ºé”™æ˜¯åœ¨æµ‹è¯•æ˜¯å¦èƒ½è¿æ¥ gerrit æ—¶ã€‚è¿æ¥ GitHub ä¹Ÿå¯èƒ½ä¼šå‡ºç°ã€‚åªè¦ç”¨åˆ° ssh åŠŸèƒ½çš„éƒ½æœ‰å¯èƒ½ã€‚ å‡ºé”™çš„åŸå› ï¼š ç½‘é¡µï¼ˆå¦‚ gerrit,githubï¼‰æ²¡æœ‰è®¾ç½®å…¬é’¥ï¼Œä¸€èˆ¬ä¸ºid_rsa.pubå†…å®¹ï¼› æœ¬åœ°ç”Ÿæˆäº†å¤šä¸ªå…¬ç§é’¥ï¼Œé…å¯¹é…é”™äº†ï¼› æœ¬åœ°æ²¡æœ‰é…ç½®å¥½gitï¼Œæ¯”å¦‚git configæ—¶ç”¨æˆ·åæˆ–è€…é‚®ç®±å¡«é”™ï¼› éœ€è¦å¼€å¯ ssh ä»£ç†ï¼› è§£å†³æ–¹æ³• ç”Ÿæˆå¯†é’¥cd ~/.ssh &amp;&amp; ssh-keygen å¤åˆ¶å…¬é’¥å†…å®¹ï¼Œæ·»åŠ åˆ°ç½‘é¡µä¸­githubæˆ–è€…gerritçš„è®¾ç½®é‡Œã€‚cat id_rsa.pub | xclip é…ç½®gitè´¦æˆ· git config --global user.name &quot;bob&quot; git config --global user.email bob@... ä»¥ä¸Šæ£€æŸ¥æ— è¯¯ï¼Œä»ç„¶æŠ¥é”™ å¼€å¯sshä»£ç† eval $(ssh-agent -s) å°†ç§é’¥åŠ å…¥ä»£ç† ssh-add ~/.ssh/id_rsa ç™»é™†ç”¨æˆ·æ—¶å¯åŠ¨ ssh-agentå¦‚æœä¸å¹¸ä½ çš„é—®é¢˜å°±æ˜¯éœ€è¦å¼€å¯ssh-agentï¼Œé‚£ä¹ˆæ¯æ¬¡é‡å¯ç”µè„‘éƒ½éœ€è¦å¼€å¯ä¸€æ¬¡ã€‚è¿™ä¹Ÿæ˜¯ç›¸å½“éº»çƒ¦çš„ï¼Œå¯ä»¥é€šè¿‡å°†ä»¥ä¸‹é…ç½®æ·»åŠ åˆ°~/.bashrcä¸­ï¼Œè®© Linux å¯åŠ¨æ—¶è‡ªåŠ¨å¼€å¯ssh-agentã€‚ 12345678910111213141516171819202122# Add following code at the end of ~/.bashrc# Check if ~/.pid_ssh_agent exists.if [ -f ~/.pid_ssh_agent ]; then source ~/.pid_ssh_agent # Check process of ssh-agent still exists. TEST=$(ssh-add -l) if [ -z &quot;$TEST&quot; ]; then # Reinit if not. NEED_INIT=1 fielse NEED_INIT=1 # PID file doesm&#x27;t exist, reinit it.fi# Try start ssh-agent.if [ ! -z &quot;$NEED_INIT&quot; ]; then echo $(ssh-agent -s) | sed -e &#x27;s/echo[ A-Za-z0-9]*;//g&#x27; &gt; ~/.pid_ssh_agent # save the PID to file. source ~/.pid_ssh_agentfi å‚è€ƒssh - Git: How to solve Permission denied (publickey) error when using Git? - Stack Overflow Linux ç™»é™†ç”¨æˆ·æ—¶å¯åŠ¨ ssh-agent å¹¶å¤ç”¨ - Fenying","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Linux å®‰è£… Node.js ä»¥åŠ hexo","slug":"Linuxå®‰è£…nodejs","date":"2022-01-10T03:51:50.000Z","updated":"2022-10-15T03:14:29.286Z","comments":true,"path":"2022/01/10/Linuxå®‰è£…nodejs/","link":"","permalink":"http://example.com/2022/01/10/Linux%E5%AE%89%E8%A3%85nodejs/","excerpt":"","text":"å®‰è£… Node.js è¿‡ç¨‹è¿›å…¥è¯¥ç½‘ç«™ä¸‹è½½ | Node.jsä¹Ÿå¯ä»¥è¿›å…¥è¯¥ç½‘ç«™ä¸‹è½½å†å²ç‰ˆæœ¬ï¼ŒPrevious Releases | Node.js è¿›å…¥ download ç›®å½•ï¼Œ 12cd downloadwget https://nodejs.org/dist/v10.16.3/node-v10.16.3-linux-x64.tar.xz -O nodejs.tar.xz è§£å‹ 1tar -xvf node-v10.16.3-linux-x64.tar.xz æ”¹å Node.js 1mv node-v10.16.3-linux-x64 nodejs å°† npmï¼Œnode ä¸¤ä¸ªç¨‹åºå»ºç«‹è½¯è¿æ¥ï¼Œèƒ½å¤Ÿå…¨å±€å¯ç”¨ 123ln -s /download/nodejs/bin/npm /usr/local/bin/ ln -s /download/nodejs/bin/node /usr/local/bin/ æ£€æŸ¥æ˜¯å¦å®‰è£… 123node -vnpm -v å®‰è£… hexo è¿‡ç¨‹12npm i hexo-cli -ghexo -v å¦‚æœå‡ºç°å‘½ä»¤æœªæ‰¾åˆ°åˆ°é”™è¯¯ï¼Œè¯´æ˜ hexo è¿˜æœªåŠ å…¥å…¨å±€å˜é‡ã€‚å°†ä¸‹é¢å‘½ä»¤åŠ å…¥ 12vim ~/.bashrcexport PATH=/usr/local/nodejs/lib/node_modules/hexo-cli/bin/:$PATH ReferencePrevious Releases | Node.jsLinux å®‰è£… Node.js | F2E å‰ç«¯æŠ€æœ¯è®ºå›Linux ä¸‹å®‰è£… node åŠ npm - SegmentFault æ€å¦è¶…è¯¦ç»† Hexo+Github åšå®¢æ­å»ºå°ç™½æ•™ç¨‹ - çŸ¥ä¹","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"C è¯­è¨€__attribute__ä½¿ç”¨","slug":"Cè¯­è¨€-attribute-ä½¿ç”¨","date":"2022-01-08T07:40:51.000Z","updated":"2022-10-15T03:14:29.124Z","comments":true,"path":"2022/01/08/Cè¯­è¨€-attribute-ä½¿ç”¨/","link":"","permalink":"http://example.com/2022/01/08/C%E8%AF%AD%E8%A8%80-attribute-%E4%BD%BF%E7%94%A8/","excerpt":"","text":"ç®€ä»‹__attribute__ å…¶å®æ˜¯ä¸ªç¼–è¯‘å™¨æŒ‡ä»¤ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨å£°æ˜çš„ç‰¹æ€§ï¼Œæˆ–è€…è®©ç¼–è¯‘å™¨è¿›è¡Œæ›´å¤šçš„é”™è¯¯æ£€æŸ¥å’Œé«˜çº§ä¼˜åŒ–ã€‚ __attribute__ å¯ä»¥è®¾ç½®å‡½æ•°å±æ€§ï¼ˆFunction Attributeï¼‰ã€å˜é‡å±æ€§ï¼ˆVariable Attributeï¼‰å’Œç±»å‹å±æ€§ï¼ˆType Attributeï¼‰ã€‚æ¯ä¸€ç±»éƒ½åŒ…å«æ•°åç§å±æ€§ï¼Œæœ¬æ–‡ä¸ä¼šé€ä¸€è§£é‡Šï¼ŒåªæŠ›ç –å¼•ç‰ï¼Œå®Œæ•´å±æ€§å¯ä»¥æŸ¥çœ‹é“¾æ¥ä¸­çš„å®˜æ–¹æ–‡æ¡£ã€‚ ä¸€ä¸ªå±æ€§è¯´æ˜ç¬¦çš„å½¢å¼æ˜¯__attribute__ ((attribute-list))ã€‚ä¸€ä¸ªå±æ€§åˆ—è¡¨æ˜¯ä¸€ä¸ªå¯èƒ½ä¸ºç©ºçš„é€—å·åˆ†éš”çš„å±æ€§åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå±æ€§éƒ½æ˜¯ä»¥ä¸‹çš„ä¸€ä¸ªã€‚ å±æ€§ä¸ºç©ºã€‚ç©ºå±æ€§ä¼šè¢«å¿½ç•¥ã€‚ ä¸€ä¸ªå•è¯ï¼ˆå¯èƒ½æ˜¯æœªä½¿ç”¨çš„æ ‡è¯†ç¬¦ï¼Œä¹Ÿå¯èƒ½æ˜¯ const ç­‰ä¿ç•™å­—ï¼‰ã€‚ ä¸€ä¸ªå•è¯ï¼Œåé¢è·Ÿç€æ‹¬å·ä¸­çš„å±æ€§å‚æ•°ã€‚è¿™äº›å‚æ•°é‡‡ç”¨ä»¥ä¸‹å½¢å¼ä¹‹ä¸€ï¼š ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚ä¾‹å¦‚ï¼Œmodeå±æ€§ä½¿ç”¨è¿™ç§å½¢å¼ã€‚ ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œåè·Ÿä¸€ä¸ªé€—å·å’Œä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„éç©ºè¡¨è¾¾å¼åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œformatå±æ€§ä½¿ç”¨è¿™ç§å½¢å¼ã€‚ ä¸€ä¸ªå¯èƒ½æ˜¯ç©ºçš„é€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œformat_argå±æ€§ä½¿ç”¨è¿™ç§å½¢å¼ï¼Œè¯¥åˆ—è¡¨æ˜¯ä¸€ä¸ªå•ä¸€çš„æ•´æ•°å¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œaliaså±æ€§ä¹Ÿä½¿ç”¨è¿™ç§å½¢å¼ï¼Œè¯¥åˆ—è¡¨æ˜¯ä¸€ä¸ªå•ä¸€çš„å­—ç¬¦ä¸²å¸¸é‡ã€‚ ä½¿ç”¨æ–¹æ³•å‡½æ•°å±æ€§aliasè¯¥å±æ€§å¯ä»¥è®¾ç½®å‡½æ•°çš„åˆ«åã€‚ 12345678910void __f() &#123; printf(&quot;__attribute__ test\\n&quot;); &#125;;void f() __attribute__((weak, alias(&quot;__f&quot;)));int main() &#123; f(); return 0;&#125;/*--- è¾“å‡º ---*/ //__attribute__ test å‡½æ•°f()çš„åˆ«åä¸º__f()ï¼Œè°ƒç”¨f()å³è°ƒç”¨__f()ã€‚ alloc_sizealloc_sizeå±æ€§ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå‡½æ•°çš„è¿”å›å€¼æŒ‡å‘å†…å­˜ï¼Œå…¶ä¸­çš„å¤§å°ç”±ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‡½æ•°å‚æ•°ç»™å‡ºã€‚GCC ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥æé«˜__builtin_object_sizeçš„æ­£ç¡®æ€§ã€‚ alloc_sizeåé¢å¯ä»¥è·Ÿä¸€åˆ°äºŒä¸ªå‚æ•°ï¼Œalloc_size åé¢è·Ÿçš„å‚æ•°æ˜¯æŒ‡å®šä½¿ç”¨å‡½æ•°çš„ç¬¬å‡ ä¸ªå‚æ•°ã€‚ å‡½æ•°çš„å‚æ•°çš„ä¸ªæ•°åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆ alloc_size çš„å‚æ•°åªèƒ½æ˜¯ 1ã€‚é€šè¿‡__builtin_object_size è·å–çš„å€¼ å°±æ˜¯ä¼ å…¥çš„å‚æ•°å€¼ã€‚å¦‚å›¾ï¼Œæˆ‘ä»¬ç»™å‡½æ•°my_malloc ä¼ å…¥çš„å€¼æ˜¯100 ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šè¿‡__builtin_object_size è·å–çš„å€¼å°±æ˜¯100ã€‚ å‡½æ•°çš„å‚æ•°çš„ä¸ªæ•°å¤šä½™ä¸¤ä¸ªï¼Œé‚£ä¹ˆalloc_size çš„æœ€å¤šå¯ä»¥æŒ‡å®šä¸¤ä¸ªå‚æ•°ã€‚ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œ__builtin_object_sizeçš„å€¼æ˜¯è¿™ä¸¤ä¸ªå‚æ•°çš„ä¹˜ç§¯ã€‚ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œ__builtin_object_sizeçš„å€¼å°±æ˜¯è¿™ä¸ªå‚æ•°çš„å€¼ã€‚å¦‚å›¾ï¼Œmy_callocdå‡½æ•°æŒ‡å®šçš„å‚æ•°æ˜¯alloc_size(2,3)ï¼Œé€šè¿‡__builtin_object_sizeè·å–çš„å€¼å°±æ˜¯my_callocdä¼ å…¥çš„ç¬¬äºŒå’Œä¸‰ä¸ªå‚æ•°çš„ä¹˜ç§¯ï¼ˆ2*3=6ï¼‰ã€‚ 1234567891011121314151617void *my_calloc(int a) __attribute__((alloc_size(1)));void *my_realloc(int a, int b, int c) __attribute__((alloc_size(2, 3)));void *my_calloc(int a) &#123; return NULL; &#125;void *my_realloc(int a, int b, int c) &#123; return NULL; &#125;int main() &#123; void *const p = my_calloc(100); printf(&quot;size : %ld\\n&quot;, __builtin_object_size(p, 0)); void *const a = my_realloc(1, 2, 3); printf(&quot;size : %ld\\n&quot;, __builtin_object_size(a, 1)); return 0;&#125;/*--- è¾“å‡º ---*/ //100//6 constructor (priority) / destructor (priority)constructorå±æ€§ä½¿è¯¥å‡½æ•°åœ¨æ‰§è¡Œè¿›å…¥main()ä¹‹å‰è¢«è‡ªåŠ¨è°ƒç”¨ã€‚åŒæ ·åœ°ï¼Œdestructorå±æ€§ä½¿å‡½æ•°åœ¨main()å®Œæˆåæˆ–exit()è¢«è°ƒç”¨åè¢«è‡ªåŠ¨è°ƒç”¨ã€‚å…·æœ‰è¿™äº›å±æ€§çš„å‡½æ•°å¯¹äºåˆå§‹åŒ–å°†åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­éšå«ä½¿ç”¨çš„æ•°æ®éå¸¸æœ‰ç”¨ã€‚ constructor å’Œ +load éƒ½æ˜¯åœ¨ main å‡½æ•°æ‰§è¡Œå‰è°ƒç”¨ï¼Œä½† +load æ¯” constructor æ›´åŠ æ—©ä¸€ä¸¢ä¸¢ï¼Œå› ä¸º dyldï¼ˆåŠ¨æ€é“¾æ¥å™¨ï¼Œç¨‹åºçš„æœ€åˆèµ·ç‚¹ï¼‰åœ¨åŠ è½½ imageï¼ˆå¯ä»¥ç†è§£æˆ Mach-O æ–‡ä»¶ï¼‰æ—¶ä¼šå…ˆé€šçŸ¥ objc runtime å»åŠ è½½å…¶ä¸­æ‰€æœ‰çš„ç±»ï¼Œæ¯åŠ è½½ä¸€ä¸ªç±»æ—¶ï¼Œå®ƒçš„ +load éšä¹‹è°ƒç”¨ï¼Œå…¨éƒ¨åŠ è½½å®Œæˆåï¼Œdyld æ‰ä¼šè°ƒç”¨è¿™ä¸ª image ä¸­æ‰€æœ‰çš„ constructor æ–¹æ³•ã€‚ è‹¥æœ‰å¤šä¸ª constructor ä¸”æƒ³æ§åˆ¶ä¼˜å…ˆçº§çš„è¯ï¼Œå¯ä»¥å†™æˆ attribute((constructor(101)))ï¼Œé‡Œé¢çš„æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œ1 ~ 100 ä¸ºç³»ç»Ÿä¿ç•™ã€‚ å˜é‡å±æ€§cleanupè¯¥å±æ€§åœ¨å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œè°ƒç”¨æŒ‡å®šçš„ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå±æ€§åªèƒ½åº”ç”¨äºè‡ªåŠ¨å‡½æ•°èŒƒå›´çš„å˜é‡ï¼›å®ƒä¸èƒ½åº”ç”¨äºå‚æ•°æˆ–å…·æœ‰é™æ€å­˜å‚¨æœŸé™çš„å˜é‡ã€‚è¯¥å‡½æ•°å¿…é¡»æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæŒ‡å‘ä¸å˜é‡å…¼å®¹çš„ç±»å‹çš„æŒ‡é’ˆã€‚å‡½æ•°çš„è¿”å›å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰è¢«å¿½ç•¥ã€‚ 12345678910111213141516171819#include &lt;stdlib.h&gt;#include &lt;string.h&gt;void test_cleanup(char **str) &#123; printf(&quot;after cleanup: %s\\n&quot;, *str); free(*str);&#125;int main(int argc, char **argv) &#123; char *str __attribute__((__cleanup__(test_cleanup))) = NULL; str = (char *)malloc((sizeof(char)) * 100); strcpy(str, &quot;test&quot;); printf(&quot;before cleanup : %s\\n&quot;, str); return 0;&#125;/*--- è¾“å‡º ---*/ //before cleanup : test//after cleanup: test ä½œç”¨åŸŸç»“æŸåŒ…æ‹¬å¤§æ‹¬å·ç»“æŸã€returnã€gotoã€breakã€exceptionç­‰å„ç§æƒ…å†µã€‚åœ¨ä¸Šé¢çš„å®éªŒä¸­ï¼Œmainå‡½æ•°è¿”å›æ ‡å¿—å˜é‡strä½œç”¨åŸŸç»“æŸï¼Œæ‰€ä»¥æœ€åæ‰æ‰“å°after cleanup: testã€‚ ç±»å‹å±æ€§aligned (alignment)è¿™ä¸ªå±æ€§æŒ‡å®šäº†å‡½æ•°çš„æœ€å°å¯¹é½æ–¹å¼ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚å¯¹é½çš„å¤§å°åªèƒ½å¢åŠ ï¼Œä¸èƒ½å‡å°ã€‚ 1234567891011121314151617181920212223242526#include &lt;stdio.h&gt;struct stu &#123; char sex; int length; char name[2]; char value[15];&#125; __attribute__((aligned(1)));struct stu my_stu;int main() &#123; printf(&quot;%d \\n&quot;, sizeof(my_stu)); printf(&quot;%p %p,%p,%p \\n&quot;, &amp;my_stu, &amp;my_stu.length, &amp;my_stu.name, &amp;my_stu.value); return 0;&#125;/*--- __attribute__((aligned(1)));è¾“å‡º ---*/ //28 //0x55af2ba25020 0x55af2ba25024,0x55af2ba25028,0x55af2ba2502a/*--- __attribute__((aligned(4)));è¾“å‡º ---*/ //28 //0x556fbce54020 0x556fbce54024,0x556fbce54028,0x556fbce5402a /*--- __attribute__((aligned(8)));è¾“å‡º ---*/ //32 //0x5646e130e040 0x5646e130e044,0x5646e130e048,0x5646e130e04a ç”±ä»¥ä¸Šä»£ç å®éªŒç»“æœå‘ç°ï¼Œé»˜è®¤å¯¹é½ä»£ä¸‹ä¸º 4 å­—èŠ‚ï¼Œå°äºè¿™ä¸ªå€¼å°±è¢«å¿½ç•¥ï¼Œå¤§äº 4 å­—èŠ‚æ‰ç”Ÿæ•ˆã€‚ Referneceattribute æœºåˆ¶ä½¿ç”¨ - ç®€ä¹¦C è¯­è¨€å¤æ‚å£°æ˜è§£æ_wangweixaut061 çš„ä¸“æ -CSDN åšå®¢_c è¯­è¨€å¤æ‚å£°æ˜attribute ä½ çŸ¥å¤šå°‘ï¼Ÿ","categories":[],"tags":[]},{"title":"C è¯­è¨€ typedef ç”¨æ³•","slug":"Cè¯­è¨€typedefç”¨æ³•","date":"2022-01-07T03:51:50.000Z","updated":"2022-10-15T03:14:29.145Z","comments":true,"path":"2022/01/07/Cè¯­è¨€typedefç”¨æ³•/","link":"","permalink":"http://example.com/2022/01/07/C%E8%AF%AD%E8%A8%80typedef%E7%94%A8%E6%B3%95/","excerpt":"","text":"ç®€ä»‹typedefä¸º C è¯­è¨€çš„å…³é”®å­—ï¼Œä½œç”¨æ˜¯ä¸ºä¸€ç§æ•°æ®ç±»å‹å®šä¹‰ä¸€ä¸ªæ–°åå­—ã€‚è¿™é‡Œçš„æ•°æ®ç±»å‹åŒ…æ‹¬å†…éƒ¨æ•°æ®ç±»å‹ï¼ˆint,char ç­‰ï¼‰å’Œè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼ˆstruct ç­‰ï¼‰ã€‚åœ¨ä½¿ç”¨è¯­æ³•ä¸Šç±»ä¼¼ä¸staticï¼Œexternç­‰ã€‚typedef è¡Œä¸ºæœ‰ç‚¹åƒ #define å®ï¼Œç”¨å…¶å®é™…ç±»å‹æ›¿ä»£åŒä¹‰å­—ã€‚ä¸åŒç‚¹æ˜¯ typedefåœ¨ç¼–è¯‘æ—¶è¢«è§£é‡Šï¼Œå› æ­¤è®©ç¼–è¯‘å™¨æ¥åº”ä»˜è¶…è¶Šé¢„å¤„ç†å™¨èƒ½åŠ›çš„æ–‡æœ¬æ›¿æ¢ã€‚ åŸºæœ¬ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹ 1ï¼š 123int a; â€”â€”â€”â€” ä¼ ç»Ÿå˜é‡å£°æ˜è¡¨è¾¾å¼int myint_t; â€”â€”â€”â€” ä½¿ç”¨æ–°çš„ç±»å‹åmyint_tæ›¿æ¢å˜é‡åatypedef int myint_t; â€”â€”â€”â€” åœ¨è¯­å¥å¼€å¤´åŠ ä¸Štypedefå…³é”®å­—ï¼Œmyint_tå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„æ–°ç±»å‹ ç¤ºä¾‹ 2ï¼š 123void (*pfunA)(int a); â€”â€”â€”â€” ä¼ ç»Ÿå˜é‡ï¼ˆå‡½æ•°ï¼‰å£°æ˜è¡¨è¾¾å¼void (*PFUNA)(int a); â€”â€”â€”â€” ä½¿ç”¨æ–°çš„ç±»å‹åPFUNAæ›¿æ¢å˜é‡åpfunAtypedef void (*PFUNA)(int a); â€”â€”â€”â€” åœ¨è¯­å¥å¼€å¤´åŠ ä¸Štypedefå…³é”®å­—ï¼ŒPFUNAå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„æ–°ç±»å‹ ä¿ƒä½¿æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„åŸå› ä¸æ˜¯å¦‚ä½•å»ç”¨typedefï¼Œè€Œæ˜¯åœ¨ä»£ç ä¸­çœ‹ä¸æ‡‚å¦‚ä½•ç®€åŒ–äº†ä¸€ä¸ªå¤æ‚å£°æ˜ã€‚æ¯”å¦‚ä¸Šæ–‡çš„ 1typedef void (*PFUNA)(int a); æœ¬ä»¥ä¸ºæ˜¯å°†voidç±»å‹æ›¿æ¢æˆäº†(*PFUNA)(int a)ï¼Œä½†æ˜¯è¯­æ³•ä¸Šè¿™æ˜æ˜¾è®²ä¸é€šå•Šã€‚ç°åœ¨æ˜ç™½äº†ï¼Œè¿™å°±æ˜¯å°†void (*pfunA)(int a);ç±»å‹åæ¢æˆäº†PFUNAã€‚ä»¥åå°±å¯ä»¥ç”¨PFUNAæ¥å£°æ˜å˜é‡ã€‚æ¯”å¦‚ 1PFUNA arr[10] è¡¨ç¤ºå£°æ˜äº†ä¸€ä¸ªå¤§å°ä¸º10çš„æ•°ç»„ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯PFUNAç±»å‹ã€‚å°†PFUNAç±»å‹å±•å¼€å°±æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå‡½æ•°å‚æ•°ä¸ºintç±»å‹ï¼Œè¿”å›å€¼ä¸ºvoidç±»å‹ã€‚å®Œæ•´çš„å«ä¹‰å°±æ˜¯ï¼Œå£°æ˜äº†ä¸€ä¸ªå¤§å°ä¸º10çš„æ•°ç»„ï¼Œæ•°ç»„å…ƒç´ æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œå‡½æ•°å‚æ•°ä¸ºintç±»å‹ï¼Œè¿”å›å€¼ä¸ºvoidç±»å‹ã€‚ ä»£ç ç®€åŒ–typedefå¯ä»¥ä¸ºå¤æ‚çš„å£°æ˜å®šä¹‰ä¸€ä¸ªæ–°çš„ç®€å•çš„åˆ«åã€‚å…³äºå¤æ‚å£°æ˜ï¼Œå¯ä»¥é˜…è¯»è¿™ç¯‡C è¯­è¨€å¤æ‚å£°æ˜ã€‚æ–¹æ³•æ˜¯ï¼šåœ¨åŸæ¥çš„å£°æ˜é‡Œé€æ­¥ç”¨åˆ«åæ›¿æ¢ä¸€éƒ¨åˆ†å¤æ‚å£°æ˜ï¼Œé€’å½’æ“ä½œï¼ŒæŠŠå¸¦å˜é‡åçš„éƒ¨åˆ†ç•™åˆ°æœ€åæ›¿æ¢ï¼Œå¾—åˆ°çš„å°±æ˜¯åŸå£°æ˜çš„æœ€ç®€åŒ–ç‰ˆã€‚ä¸¾ä¾‹ï¼š 12//å¤æ‚å£°æ˜void (*b[10]) (void (*)()); å˜é‡åä¸ºbï¼Œå…ˆæ›¿æ¢å³è¾¹éƒ¨åˆ†æ‹¬å·é‡Œçš„ï¼ŒpFunParamä¸ºåˆ«å 1typedef void (*pFunParam)(); å†æ›¿æ¢å·¦è¾¹çš„å˜é‡bï¼ŒpFunxä¸ºåˆ«åäºŒï¼š 1typedef void (*pFunx)(pFunParam); ç®€åŒ–åçš„å£°æ˜ï¼š 1pFunx b[10]; å‡å°‘é”™è¯¯å®šä¹‰ä¸€ç§ç±»å‹çš„åˆ«åï¼Œè€Œä¸åªæ˜¯ç®€å•çš„å®æ›¿æ¢ã€‚å¯ä»¥ç”¨ä½œåŒæ—¶å£°æ˜æŒ‡é’ˆå‹çš„å¤šä¸ªå¯¹è±¡ã€‚æ¯”å¦‚ï¼š 123// è¿™å¤šæ•°ä¸ç¬¦åˆæˆ‘ä»¬çš„æ„å›¾ï¼Œå®ƒåªå£°æ˜äº†ä¸€ä¸ªæŒ‡å‘å­—ç¬¦å˜é‡çš„æŒ‡é’ˆï¼Œ// å’Œä¸€ä¸ªå­—ç¬¦å˜é‡ï¼›char* pa, pb; ä»¥ä¸‹åˆ™å¯è¡Œï¼š 12typedef char* PCHAR;PCHAR pa, pb; è¿™ç§ç”¨æ³•å¾ˆæœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯char* pa, pbçš„å®šä¹‰ï¼Œåˆå­¦è€…å¾€å¾€è®¤ä¸ºæ˜¯å®šä¹‰äº†ä¸¤ä¸ªå­—ç¬¦å‹æŒ‡é’ˆï¼Œå…¶å®ä¸æ˜¯ï¼Œè€Œç”¨typedef char* PCHARå°±ä¸ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œå‡å°‘äº†é”™è¯¯çš„å‘ç”Ÿã€‚ ç›´è§‚ç®€æ´å£°æ˜structæ–°å¯¹è±¡æ—¶ï¼Œå¿…é¡»è¦å¸¦ä¸Šstruct 123456struct tagPOINT1 &#123; int x; int y; &#125;;struct tagPOINT1 p1; åœ¨ç»å¸¸ä½¿ç”¨è¿™ä¸ªç»“æ„ä½“æ—¶ï¼Œå°±æ˜¾å¾—éº»çƒ¦ï¼Œå¯ä»¥ç”¨typedefç®€åŒ– 12345typedef struct tagPOINT&#123; int x; int y;&#125;POINT; å®šä¹‰å¹³å°æ— å…³çš„ç±»å‹å½“è·¨å¹³å°æ—¶ï¼Œåªè¦æ”¹ä¸‹ typedef æœ¬èº«å°±è¡Œï¼Œä¸ç”¨å¯¹å…¶ä»–æºç åšä»»ä½•ä¿®æ”¹ã€‚ 1typedef unsigned int u_32t; æ©é¥°å¤åˆç±»å‹typedef è¿˜å¯ä»¥æ©é¥°å¤åˆç±»å‹ï¼Œå¦‚æŒ‡é’ˆå’Œæ•°ç»„ã€‚ ä¾‹å¦‚ï¼Œä½ ä¸ç”¨åƒä¸‹é¢è¿™æ ·é‡å¤å®šä¹‰æœ‰ 81 ä¸ªå­—ç¬¦å…ƒç´ çš„æ•°ç»„ï¼š 1char line[81]; å®šä¹‰ä¸€ä¸ª typedefï¼Œæ¯å½“è¦ç”¨åˆ°ç›¸åŒç±»å‹å’Œå¤§å°çš„æ•°ç»„æ—¶ï¼Œå¯ä»¥è¿™æ ·ï¼š 1typedef char Line[81]; æ­¤æ—¶ Line ç±»å‹å³ä»£è¡¨äº†å…·æœ‰ 81 ä¸ªå…ƒç´ çš„å­—ç¬¦æ•°ç»„ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 1Line text, secondline; åŒæ ·ï¼Œå¯ä»¥è±¡ä¸‹é¢è¿™æ ·éšè—æŒ‡é’ˆè¯­æ³•ï¼š 1typedef char * pstr; è¿™é‡Œå°†å¸¦æˆ‘ä»¬åˆ°è¾¾ç¬¬ä¸€ä¸ª typedef é™·é˜±ã€‚æ ‡å‡†å‡½æ•° strcmp()æœ‰ä¸¤ä¸ªconst char *ç±»å‹çš„å‚æ•°ã€‚å› æ­¤ï¼Œå®ƒå¯èƒ½ä¼šè¯¯å¯¼äººä»¬è±¡ä¸‹é¢è¿™æ ·å£°æ˜ mystrcmp()ï¼š 1int mystrcmp(const pstr, const pstr); ç”¨ GNU çš„ gcc å’Œ g++ç¼–è¯‘å™¨ï¼Œæ˜¯ä¼šå‡ºç°è­¦å‘Šçš„ï¼ŒæŒ‰ç…§é¡ºåºï¼Œconst pstrè¢«è§£é‡Šä¸ºchar* constï¼ˆä¸€ä¸ªæŒ‡å‘ char çš„æŒ‡é’ˆå¸¸é‡ï¼‰ï¼Œä¸¤è€…è¡¨è¾¾çš„å¹¶éåŒä¸€æ„æ€ã€‚ä¸ºäº†å¾—åˆ°æ­£ç¡®çš„ç±»å‹ï¼Œåº”å½“å¦‚ä¸‹å£°æ˜ï¼š 1typedef const char* pstr; typedef å’Œå­˜å‚¨ç±»å…³é”®å­—typedef å°±åƒ autoï¼Œexternï¼Œmutableï¼Œstaticï¼Œå’Œ register ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªå­˜å‚¨ç±»å…³é”®å­—ã€‚è¿™å¹¶ä¸æ˜¯è¯´ typedef ä¼šçœŸæ­£å½±å“å¯¹è±¡çš„å­˜å‚¨ç‰¹æ€§ï¼›å®ƒåªæ˜¯è¯´åœ¨è¯­å¥æ„æˆä¸Šï¼Œtypedef å£°æ˜çœ‹èµ·æ¥è±¡ staticï¼Œextern ç­‰ç±»å‹çš„å˜é‡å£°æ˜ã€‚ä¸‹é¢å°†å¸¦åˆ°ç¬¬äºŒä¸ªé™·é˜±ï¼š 1typedef register int FAST_COUNTER; // é”™è¯¯ ç¼–è¯‘é€šä¸è¿‡ã€‚é—®é¢˜å‡ºåœ¨ä½ ä¸èƒ½åœ¨å£°æ˜ä¸­æœ‰å¤šä¸ªå­˜å‚¨ç±»å…³é”®å­—ã€‚å› ä¸ºç¬¦å· typedef å·²ç»å æ®äº†å­˜å‚¨ç±»å…³é”®å­—çš„ä½ç½®ï¼Œåœ¨ typedef å£°æ˜ä¸­ä¸èƒ½ç”¨ registerï¼ˆæˆ–ä»»ä½•å…¶å®ƒå­˜å‚¨ç±»å…³é”®å­—ï¼‰ã€‚ Referencetypedef ä»‹ç»_liitdar çš„åšå®¢-CSDN åšå®¢_typedef å…³äº typedef çš„ç”¨æ³•æ€»ç»“_IT æ°‘å·¥-CSDN åšå®¢_typedef","categories":[],"tags":[]},{"title":"Windows æ‰¹å¤„ç†å®šæ—¶ä»»åŠ¡","slug":"Windowsæ‰¹å¤„ç†å®šæ—¶ä»»åŠ¡","date":"2022-01-05T14:39:03.000Z","updated":"2022-10-15T03:14:29.613Z","comments":true,"path":"2022/01/05/Windowsæ‰¹å¤„ç†å®šæ—¶ä»»åŠ¡/","link":"","permalink":"http://example.com/2022/01/05/Windows%E6%89%B9%E5%A4%84%E7%90%86%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/","excerpt":"","text":"æŠ˜è…¾èƒŒæ™¯ä¸€äº›å¸¸ç”¨çš„ç¦»çº¿è½¯ä»¶åœ¨é‡æ–°å®‰è£…ï¼Œé‡è£…ç”µè„‘æˆ–è€…æ›´å¥½ç¯å¢ƒæ—¶ï¼Œè°ƒæ•™å¥½çš„é…ç½®æ€»éœ€è¦é‡æ–°è®¾ç½®ä¸€éï¼Œç”šæ˜¯éº»çƒ¦ã€‚ä½†æ˜¯è¿™äº›è®¾ç½®é€šå¸¸éƒ½ä¿å­˜åœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œåªè¦èƒ½å¤‡ä»½å¥½è¿™äº›é…ç½®æ–‡ä»¶ï¼Œä¸‹æ¬¡é‡è£…åè¦†ç›–å°±å¯ä»¥æ¢å¤æ‰€éœ€è®¾ç½®ã€‚ ç°åœ¨çš„é—®é¢˜å°±æ˜¯å¦‚ä½•å¤‡ä»½è¿™äº›é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€‰æ‹©å„ç±»ç½‘ç›˜ï¼Œç¡¬ç›˜ç­‰ç­‰ã€‚ä½†æ˜¯è¿™äº›å¤šå°‘éƒ½æœ‰ç‚¹ç‚®æ‰“èšŠå­ï¼Œå°é¢˜å¤§åšã€‚è€Œä¸”å®šæ—¶å¤‡ä»½ä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚æ—¢ç„¶é…ç½®æ–‡ä»¶éƒ½å¾ˆå°ï¼Œå…¶å®å°±æ˜¯ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‚£æœ‰ä¸ªä¸‡èƒ½å…è´¹å­˜å‚¨åœ° GitHub å°±æ´¾ä¸Šç”¨åœºäº†ã€‚æˆ‘ä»¬åªè¦æŠŠé…ç½®æ–‡ä»¶å®šæ—¶ push åˆ° GitHub å³å¯ï¼Œä»¥åéšæ—¶å¯ä»¥ clone ä¸‹æ¥ã€‚ é¦–å…ˆå»ºç«‹ä¸€ä¸ªç§å¯†ä»“åº“ï¼Œç”¨æ¥ä¸“é—¨å­˜æ”¾é…ç½®æ–‡ä»¶ã€‚å…¶æ¬¡é€šè¿‡æ‰¹å¤„ç†å‘½ä»¤ï¼Œå°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°ä»“åº“çš„æ–‡ä»¶å¤¹ä¸‹ã€‚æœ€åè®¾ç½®å®šæ—¶ä»»åŠ¡ã€‚ æŠ˜è…¾è¿‡ç¨‹æ–°å»ºä»“åº“è¿™ä¸€æ­¥ä¸ç”¨èµ˜è¿°äº†ï¼Œä¸»è¦å°±æ˜¯è¦å‹¾é€‰ç§å¯†ä»“åº“ï¼Œä¿æŠ¤éšç§ï¼Œä¸€äº›é…ç½®æ–‡ä»¶å¯èƒ½ä¼šåŒ…å«ä¸ªäººä¿¡æ¯ã€‚ æ‰¹å¤„ç†å°†ä»“åº“å…‹éš†åˆ°æœ¬åœ°åå°±æ˜¯ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™ä¸€æ­¥ä¸»è¦å°±æ˜¯å¦‚ä½•èƒ½æŠŠå®‰è£…åœ¨ä¸åŒä½ç½®çš„è½¯ä»¶çš„é…ç½®æ–‡ä»¶ï¼Œéƒ½æ±‡é›†åˆ°è¿™ä¸ªä»“åº“ä¸‹ã€‚é€šè¿‡æ‰¹å¤„ç†å‘½ä»¤å¯ä»¥å¿«é€Ÿï¼Œæ–¹ä¾¿çš„å®Œæˆã€‚ 123456789101112131415echo Start backup config files! # æ‰“å°è¿™å¥è¯copy D:\\Tools\\MouseInc\\MouseInc.json D:\\Develop\\fxxk-config\\mouseinc # å°†å‰è€…å¤åˆ¶åˆ°åè€…copy D:\\Tools\\JD\\Config.ini D:\\Develop\\fxxk-config\\jdcd /d D:\\Develop\\fxxk-config # åˆ‡æ¢ç›®å½•# gitæ¨é€çš„ä¸€äº›å‘½ä»¤git add . git commit -m &quot;update&quot;git push# é˜²æ­¢çª—å£é—ªé€€pause ä¸€äº›å¸¸ç”¨å‘½ä»¤å‚è€ƒWindowDos æ‰¹å¤„ç†æŒ‡å¯¼ã€‚ å®šæ—¶ä»»åŠ¡æ§åˆ¶é¢æ¿-ç®¡ç†å·¥å…· - ä»»åŠ¡è®¡åˆ’ç¨‹åº","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"DOS","slug":"DOS","permalink":"http://example.com/tags/DOS/"}]},{"title":"è§£å†³ unable to install libpng12.so.0","slug":"è§£å†³unable-to-install-libpng12-so-0","date":"2022-01-05T05:01:47.000Z","updated":"2022-10-15T03:14:29.841Z","comments":true,"path":"2022/01/05/è§£å†³unable-to-install-libpng12-so-0/","link":"","permalink":"http://example.com/2022/01/05/%E8%A7%A3%E5%86%B3unable-to-install-libpng12-so-0/","excerpt":"","text":"ä¿ç•™ç°åœºaptå·¥å…·æŸåäº†ï¼Œåœ¨ä¿®å¤æ—¶ä½¿ç”¨äº†sudo apt-get install -få‘½ä»¤ï¼Œä¸­é€”ä¼šæç¤ºéœ€è¦å®‰è£…libpng12-0ï¼Œä½†æ˜¯å§‹ç»ˆæ— æ³•å®‰è£…ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ã€‚ 1234567Unpacking libpng12-0:amd64 (1.2.50-2+deb8u3) ... dpkg: error processing archive libpng12-0_1.2.50-2+deb8u3_amd64.deb (--install): unable to install new version of &#x27;/usr/lib/x86_64-linux-gnu/libpng12.so.0&#x27;: No such file or directory Errors were encountered while processing: libpng12-0_1.2.50-2+deb8u3_amd64.deb æ¢ç©¶åŸå› å…·ä½“åŸå› æœªçŸ¥ï¼Œç½‘ä¸Šç­”æ¡ˆä¼—è¯´çº·çº­ã€‚ è§£å†³æ–¹æ³•è¿™ä¸ªé—®é¢˜é‡åˆ°çš„äººè¿˜æŒºå¤šçš„ï¼Œè§£å†³æ–¹æ³•ä¹Ÿå„ä¸ç›¸åŒï¼Œæˆ‘å…ˆè¯´æˆ‘è‡ªå·±æœ€ç»ˆè§£å†³çš„æ–¹æ³•ã€‚ æ–¹æ³•ä¸€ å°†è½¯ä»¶æºæ›´æ¢æˆä¸­ç§‘é™¢çš„æºï¼Œä½¿ç”¨ Linux è‡ªå¸¦çš„è½¯ä»¶å’Œæ›´æ–°å·¥å…·ï¼Œå…·ä½“æ–¹æ³•å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚æ›´æ¢å®Œä¹‹åå¯ä»¥é‡æ–°å°è¯•å®‰è£…ï¼Œæœ‰äººæ¢æºåå³å¯æˆåŠŸå®‰è£…ã€‚ å¦‚æœæœªèƒ½å®‰è£…æˆåŠŸï¼Œå¯èƒ½æ›¾ç»æ‰‹åŠ¨æ·»åŠ è¿‡è½¯ä»¶æºï¼Œå°†å…¶åˆ é™¤ã€‚ 12# å°†æ‰€æœ‰å†…å®¹æ³¨é‡Švim /etc/apt/sources.list æ–¹æ³•äºŒ ä¸‹è½½å·²å®‰è£…çš„åº“æ–‡ä»¶libpng12.so.0ï¼Œå¯ä»¥ä»è¯¥é“¾æ¥ä¸‹è½½ã€‚ å°†è¯¥æ–‡ä»¶å¤åˆ¶åˆ°å®ƒæœ¬è¯¥å®‰è£…çš„ä½ç½®ã€‚ 1sudo cp libpng12.so.0 /usr/lib/x86_64-linux-gnu/ æ–¹æ³•ä¸‰123sudo add-apt-repository ppa:linuxuprising/libpng12sudo apt updatesudo apt install libpng12-0","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"RISC-V å…¥é—¨-Trap","slug":"RISC-Vå…¥é—¨-Trapå’ŒException","date":"2021-12-30T05:42:34.000Z","updated":"2022-10-15T03:14:29.553Z","comments":true,"path":"2021/12/30/RISC-Vå…¥é—¨-Trapå’ŒException/","link":"","permalink":"http://example.com/2021/12/30/RISC-V%E5%85%A5%E9%97%A8-Trap%E5%92%8CException/","excerpt":"","text":"Trap ç®€ä»‹æ§åˆ¶æµï¼ˆControl Flowï¼‰å’Œ Trap æ§åˆ¶æµï¼ˆControl Flowï¼‰ä»ç»™å¤„ç†å™¨åŠ ç”µå¼€å§‹ï¼Œç›´åˆ°ä½ æ–­ç”µä¸ºæ­¢ï¼Œç¨‹åºè®¡æ•°å™¨å‡è®¾ä¸€ä¸ªå€¼çš„åºåˆ—$$a_0,a_1,\\dotsb,a_{n-1}$$æ¯ä¸ª$a_k$éƒ½æ˜¯æŒ‡ä»¤çš„åœ°å€ï¼Œæ¯æ¬¡ä»$a_{k}$åˆ°$a_{k+1}$çš„è¿‡æ¸¡ç§°ä¸ºæ§åˆ¶è½¬ç§»ï¼Œè€Œè¿™æ ·çš„æ§åˆ¶è½¬ç§»åºåˆ—å«åšå¤„ç†å™¨çš„æ§åˆ¶æµã€‚ å¼‚å¸¸æ§åˆ¶æµï¼ˆExceptional Control Flow, ECFï¼‰ç³»ç»Ÿä¹Ÿå¿…é¡»èƒ½å¤Ÿå¯¹ç³»ç»ŸçŠ¶æ€çš„å˜åŒ–åšå‡ºååº”ï¼Œè¿™äº›ç³»ç»ŸçŠ¶æ€ä¸æ˜¯è¢«å†…éƒ¨ç¨‹åºå˜é‡æ•è·çš„ï¼Œè€Œä¸”ä¹Ÿä¸ä¸€å®šè¦å’Œç¨‹åºçš„æ‰§è¡Œç›¸å…³ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç¡¬ä»¶å®šæ—¶å™¨å®šæœŸäº§ç”Ÿä¿¡å·ï¼Œè¿™ä¸ªäº‹ä»¶å¿…é¡»å¾—åˆ°å¤„ç†ã€‚åŒ…åˆ°è¾¾ç½‘ç»œé€‚é…å™¨åï¼Œå¿…é¡»å­˜æ”¾åœ¨å†…å­˜ä¸­ã€‚ç¨‹åºå‘ç£ç›˜è¯·æ±‚æ•°æ®ï¼Œç„¶åä¼‘çœ ï¼Œç›´åˆ°è¢«é€šçŸ¥è¯´æ•°æ®å·²å°±ç»ªã€‚ç°ä»£ç³»ç»Ÿé€šè¿‡ä½¿æ§åˆ¶æµå‘ç”Ÿçªå˜æ¥å¯¹è¿™äº›æƒ…å†µåšå‡ºååº”ã€‚æˆ‘ä»¬æŠŠè¿™äº›çªå˜ç§°ä¸ºå¼‚å¸¸æ§åˆ¶æµã€‚ exception interrupt RISC-V æŠŠ ECF ç»Ÿç§°ä¸º Trapã€‚ RISC-V Trap å¤„ç†ä¸­æ¶‰åŠçš„å¯„å­˜å™¨ å¯„å­˜å™¨ å…¨ç§° ç”¨é€”è¯´æ˜ mtvec Machine Trap-Vector Base-Address å®ƒä¿å­˜å‘ç”Ÿå¼‚å¸¸æ—¶å¤„ç†å™¨éœ€è¦è·³è½¬åˆ°çš„åœ°å€ã€‚ mepc Machine Exception Program Counter å½“ trap å‘ç”Ÿæ—¶ï¼Œhart ä¼šå°†å‘ç”Ÿ trap æ‰€å¯¹åº”çš„æŒ‡ä»¤çš„åœ°å€å€¼ï¼ˆpcï¼‰ä¿å­˜åœ¨ mepc ä¸­ã€‚ mcause Machine Cause å½“ trap å‘ç”Ÿæ—¶ï¼Œhart ä¼šè®¾ç½®è¯¥å¯„å­˜å™¨é€šçŸ¥æˆ‘ä»¬ trap å‘ç”Ÿçš„åŸå› ã€‚ mtval Machine Trap Value å®ƒä¿å­˜äº† exception å‘ç”Ÿæ—¶çš„é™„åŠ ä¿¡æ¯ï¼šè­¬å¦‚è®¿é—®åœ°å€å‡ºé”™æ—¶çš„åœ°å€ä¿¡æ¯ã€æˆ–è€…æ‰§è¡Œéæ³•æŒ‡ä»¤æ—¶çš„æŒ‡ä»¤æœ¬èº«ï¼Œå¯¹äºå…¶ä»–å¼‚å¸¸ï¼Œå®ƒçš„å€¼ä¸º 0ã€‚ mstatus Machine Status ç”¨äºè·Ÿè¸ªå’Œæ§åˆ¶ hart çš„å½“å‰æ“ä½œçŠ¶æ€ï¼ˆç‰¹åˆ«åœ°ï¼ŒåŒ…æ‹¬å…³é—­å’Œæ‰“å¼€å…¨å±€ä¸­æ–­ï¼‰ã€‚ mscratch Machine Scratch Machine æ¨¡å¼ä¸‹ä¸“ç”¨å¯„å­˜å™¨ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰å…¶ç”¨æ³•ï¼Œè­¬å¦‚ç”¨è¯¥å¯„å­˜å™¨ä¿å­˜å½“å‰åœ¨ hart ä¸Šè¿è¡Œçš„ task çš„ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰çš„åœ°å€ã€‚ mtvecï¼ˆMachine Trap-Vector Base-Addressï¼‰ WARL: Write Any Values, Read Legal Values BASEï¼štrap å…¥å£å‡½æ•°çš„åŸºåœ°å€ï¼Œå¿…é¡»ä¿è¯å››å­—èŠ‚å¯¹é½ï¼› MODEï¼šè¿›ä¸€æ­¥ç”¨äºæ§åˆ¶å…¥å£å‡½æ•°çš„åœ°å€é…ç½®æ–¹å¼ï¼š Directï¼Œæ‰€æœ‰å¼‚å¸¸å’Œä¸­æ–­å‘ç”Ÿåï¼ŒPCéƒ½è·³è½¬åˆ°BASEæŒ‡å®šçš„åœ°å€å¤„ï¼› é€šå¸¸ä¸­æ–­å¤„ç†å‡½æ•°å†…éƒ¨ä¼šæœ‰switch caseæ¡ä»¶è¯­å¥ï¼Œé€šè¿‡ä¸åŒçš„ä¸­æ–­é‡‡ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚ 123456789101112131415161718192021222324252627282930reg_t trap_handler(reg_t epc, reg_t cause)&#123; reg_t return_pc = epc; reg_t cause_code = cause &amp; 0xfff; if (cause &amp; 0x80000000) &#123; /* Asynchronous trap - interrupt */ switch (cause_code) &#123; case 3: uart_puts(&quot;software interruption!\\n&quot;); break; case 7: uart_puts(&quot;timer interruption!\\n&quot;); break; case 11: uart_puts(&quot;external interruption!\\n&quot;); break; default: uart_puts(&quot;unknown async exception!\\n&quot;); break; &#125; &#125; else &#123; /* Synchronous trap - exception */ printf(&quot;Sync exceptions!, code = %d\\n&quot;, cause_code); panic(&quot;OOPS! What can I do!&quot;); //return_pc += 4; &#125; return return_pc;&#125; Vectoredï¼Œå¼‚å¸¸çš„å¤„ç†æ–¹å¼åŒä¸Šï¼Œä½†æ˜¯ä¸­æ–­çš„å…¥å£åœ°å€ä»¥æ•°ç»„æ–¹å¼æ’åˆ—ï¼› 12345678910111213141516171819202122232425262728trap_vector: # save context(registers). csrrw t6, mscratch, t6 # swap t6 and mscratch reg_save t6 # Save the actual t6 register, which we swapped into # mscratch mv t5, t6 # t5 points to the context of current task csrr t6, mscratch # read t6 back from mscratch sw t6, 120(t5) # save t6 with t5 as base # Restore the context pointer into mscratch csrw mscratch, t5 # call the C trap handler in trap.c csrr a0, mepc csrr a1, mcause call trap_handler # trap_handler will return the return address via a0. csrw mepc, a0 # restore context(registers). csrr t6, mscratch reg_restore t6 # return to whatever we were doing before trap. mret MODEå¯å–å€¼å¦‚ä¸‹ï¼š é‡‡ç”¨Vectoredæ–¹å¼æ•ˆç‡æ›´é«˜ã€‚ mepcï¼ˆMachine Exception Program Counterï¼‰ å½“trapå‘ç”Ÿæ—¶ï¼Œpcä¼šè¢«æ›¿æ¢ä¸º mtvecè®¾å®šçš„åœ°å€ï¼ŒåŒæ—¶hart ä¼šè®¾ç½®mepcä¸ºå½“å‰æŒ‡ä»¤æˆ–è€…ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼ˆå¤„ç†å¼‚å¸¸æ—¶ï¼Œmepc ä¸ºå½“å‰æŒ‡ä»¤çš„åœ°å€ï¼Œå¤„ç†ä¸­æ–­æ—¶ï¼Œmepc ä¸ºä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼‰ã€‚ å½“æˆ‘ä»¬éœ€è¦é€€å‡ºtrap æ—¶å¯ä»¥è°ƒç”¨ç‰¹æ®Šçš„ mret æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ä¼šå°†mepcä¸­çš„å€¼æ¢å¤åˆ°pcä¸­ï¼ˆå®ç°è¿”å›çš„æ•ˆæœï¼‰ï¼› åœ¨å¤„ç† trap çš„ç¨‹åºä¸­æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ mepc çš„å€¼è¾¾åˆ°æ”¹å˜mret è¿”å›åœ°å€çš„ç›®çš„ã€‚ mcauseï¼ˆMachine Causeï¼‰ å½“ trap å‘ç”Ÿæ—¶ï¼Œhart ä¼šè®¾ç½®è¯¥å¯„å­˜å™¨é€šçŸ¥æˆ‘ä»¬ trap å‘ç”Ÿçš„åŸå› ã€‚ æœ€é«˜ä½ Interrupt ä¸º 1 æ—¶æ ‡è¯†äº†å½“å‰ trap ä¸ºinterruptï¼Œå¦åˆ™æ˜¯exceptionã€‚ å‰©ä½™çš„ Exception Code ç”¨äºæ ‡è¯†å…·ä½“çš„interruptæˆ–è€…exception çš„ç§ç±»ã€‚ mtvalï¼ˆMachine Trap Valueï¼‰ å½“ trap å‘ç”Ÿæ—¶ï¼Œé™¤äº†é€šè¿‡mcause å¯ä»¥è·å–exceptionçš„ç§ç±» code å€¼å¤–ï¼Œhart è¿˜æä¾›äº† mtval æ¥æä¾›exception çš„å…¶ä»–ä¿¡æ¯æ¥è¾…åŠ©æˆ‘ä»¬æ‰§è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œã€‚ å…·ä½“çš„è¾…åŠ©ä¿¡æ¯ç”±ç‰¹å®šçš„ç¡¬ä»¶å®ç°å®šä¹‰ï¼ŒRISC-V è§„èŒƒæ²¡æœ‰å®šä¹‰å…·ä½“çš„å€¼ã€‚ä½†è§„èŒƒå®šä¹‰äº†ä¸€äº›è¡Œä¸ºï¼Œè­¬å¦‚è®¿é—®åœ°å€å‡ºé”™æ—¶çš„åœ°å€ä¿¡æ¯ã€æˆ–è€…æ‰§è¡Œéæ³•æŒ‡ä»¤æ—¶çš„æŒ‡ä»¤æœ¬èº«ç­‰ã€‚ mstatusï¼ˆMachine Statusï¼‰ å¯„å­˜å™¨å„ä¸ªä½å¯ä»¥å¤§è‡´åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼Œå…¶ä¸­xå¯ä»¥ä¸ºU,S,Mã€‚è¡¨ç¤ºç”¨æˆ·æ¨¡å¼ä»¥åŠä¸¤ç§ç‰¹æƒæ¨¡å¼ã€‚ xIEï¼ˆx=M/S/Uï¼‰: åˆ†åˆ«ç”¨äºæ‰“å¼€ï¼ˆ1ï¼‰æˆ–è€…å…³é—­ï¼ˆ0ï¼‰M/S/U æ¨¡å¼ä¸‹çš„å…¨å±€ä¸­æ–­ã€‚å½“ trap å‘ç”Ÿæ—¶ï¼Œhartä¼šè‡ªåŠ¨å°† xIE è®¾ç½®ä¸º 0ã€‚ xPIEï¼ˆx=M/S/Uï¼‰:å½“ trap å‘ç”Ÿæ—¶ç”¨äºä¿å­˜ trap å‘ç”Ÿä¹‹å‰çš„ xIE å€¼ã€‚ xPPï¼ˆx=M/Sï¼‰:å½“ trap å‘ç”Ÿæ—¶ç”¨äºä¿å­˜ trap å‘ç”Ÿä¹‹å‰çš„æƒé™çº§åˆ«å€¼ã€‚æ³¨æ„æ²¡æœ‰ UPPã€‚å› ä¸ºå¼‚å¸¸åªä¼šä»ä½æƒé™å‘é«˜æƒé™è·³è½¬ï¼Œé€šå¸¸ä½æƒé™å¦‚useræ¨¡å¼ï¼Œä¼šè¢«ç½®äºä¸Šæ–¹ï¼Œé«˜æƒé™å¦‚å†…æ ¸ä¸€èˆ¬éƒ½ä¼šç”»åœ¨ä¸‹æ–¹ï¼Œè¿™ä¹Ÿè§£é‡Šäº†å¼‚å¸¸ï¼Œä¸­æ–­å¤„ç†ä¸ºä»€ä¹ˆå«trapï¼Œå› ä¸ºæ˜¯å‘ä¸‹é™·å…¥çš„è¿‡ç¨‹ã€‚ å…¶ä»–æ ‡å¿—ä½æ¶‰åŠå†…å­˜è®¿é—®æƒé™ã€è™šæ‹Ÿå†…å­˜æ§åˆ¶ç­‰ï¼Œæš‚ä¸è€ƒè™‘ã€‚ Trap å¤„ç†æµç¨‹ ä¸»è¦ä¸º Exceptionï¼Œä¸‹ä¸€ç« è¯¦è§£ Interruptã€‚ åˆå§‹åŒ–å°†trapçš„åŸºåœ°å€å†™å…¥å¯„å­˜å™¨ï¼Œ Top Half æŠŠ mstatus çš„ MIE å€¼å¤åˆ¶åˆ° MPIE ä¸­ï¼Œæ¸…é™¤ mstatusä¸­çš„ MIE æ ‡å¿—ä½ï¼Œæ•ˆæœæ˜¯ä¸­æ–­è¢«ç¦æ­¢ã€‚ è®¾ç½®mepcï¼ŒåŒæ—¶PCè¢«è®¾ç½®ä¸º mtvecã€‚ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºexceptionï¼Œ mepcæŒ‡å‘å¯¼è‡´å¼‚å¸¸çš„æŒ‡ä»¤ï¼›å¯¹äº interruptï¼Œå®ƒæŒ‡å‘è¢«ä¸­æ–­çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„ä½ç½®ã€‚ï¼‰ æ ¹æ® trap çš„ç§ç±»è®¾ç½® mcauseï¼Œå¹¶æ ¹æ®éœ€è¦ä¸ºmtvalè®¾ç½®é™„åŠ ä¿¡æ¯ã€‚ å°† trap å‘ç”Ÿä¹‹å‰çš„æƒé™æ¨¡å¼ä¿å­˜åœ¨ mstatus çš„ MPP åŸŸä¸­ï¼Œå†æŠŠhart æƒé™æ¨¡å¼æ›´æ”¹ä¸º Mï¼ˆä¹Ÿå°±æ˜¯è¯´æ— è®ºåœ¨ä»»ä½• Level ä¸‹è§¦å‘trapï¼Œhart é¦–å…ˆåˆ‡æ¢åˆ° Machine æ¨¡å¼ï¼‰ã€‚ Bottom Half ä¿å­˜ï¼ˆsaveï¼‰å½“å‰æ§åˆ¶æµçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆåˆ©ç”¨ mscratchï¼‰ï¼› è°ƒç”¨ C è¯­è¨€çš„ trap handler; ä» trap handler å‡½æ•°è¿”å›ï¼Œmepcçš„å€¼æœ‰å¯èƒ½éœ€è¦è°ƒæ•´ï¼› æ¢å¤ï¼ˆrestoreï¼‰ä¸Šä¸‹æ–‡çš„ä¿¡æ¯ï¼› æ‰§è¡ŒMRETæŒ‡ä»¤è¿”å›åˆ° trapä¹‹å‰çš„çŠ¶æ€ã€‚ 12345678910111213141516171819202122232425262728trap_vector: # save context(registers). csrrw t6, mscratch, t6 # swap t6 and mscratch reg_save t6 # Save the actual t6 register, which we swapped into # mscratch mv t5, t6 # t5 points to the context of current task csrr t6, mscratch # read t6 back from mscratch sw t6, 120(t5) # save t6 with t5 as base # Restore the context pointer into mscratch csrw mscratch, t5 # call the C trap handler in trap.c csrr a0, mepc csrr a1, mcause call trap_handler # trap_handler will return the return address via a0. csrw mepc, a0 # restore context(registers). csrr t6, mscratch reg_restore t6 # return to whatever we were doing before trap. mret é€€å‡º trapï¼šç¼–ç¨‹è°ƒç”¨ MRET æŒ‡ä»¤é’ˆå¯¹ä¸åŒæƒé™çº§åˆ«ä¸‹å¦‚ä½•é€€å‡º trap æœ‰å„è‡ªçš„è¿”å›æŒ‡ä»¤xRETï¼ˆx = M/S/Uï¼‰ã€‚ä»¥åœ¨ M æ¨¡å¼ä¸‹æ‰§è¡Œmret æŒ‡ä»¤ä¸ºä¾‹ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š å½“å‰ Hart çš„æƒé™çº§åˆ« = mstatus.MPPï¼›mstatus.MPP = Uï¼ˆå¦‚æœ hart ä¸æ”¯æŒ U åˆ™ä¸º Mï¼‰ mstatus.MIE = mstatus.MPIE; mstatus.MPIE = 1 pc = mepc ä¸­æ–­ä¸­æ–­åˆ†ç±» æœ¬åœ°ï¼ˆLocalï¼‰ä¸­æ–­ è½¯ä¸­æ–­software interrupt å®šæ—¶å™¨ä¸­æ–­ timer interrupt å…¨å±€ï¼ˆGlobalï¼‰ä¸­æ–­ å¤–éƒ¨ä¸­æ–­ externel interrupt RISC-V ä¸­æ–­ç¼–ç¨‹ä¸­æ¶‰åŠçš„å¯„å­˜å™¨ å¯„å­˜å™¨ å…¨ç§° ç”¨é€”è¯´æ˜ mie Machine Interrupt Enable ç”¨äºè¿›ä¸€æ­¥æ§åˆ¶ï¼ˆæ‰“å¼€å’Œå…³é—­ï¼‰software interrupt/timer interrupt/external interrupt mip Machine Interrupt Pending å®ƒåˆ—å‡ºç›®å‰å·²å‘ç”Ÿç­‰å¾…å¤„ç†çš„ä¸­æ–­ã€‚ mie(Machine Interrupt Enable) æ‰“å¼€ï¼ˆ1ï¼‰æˆ–è€…å…³é—­ï¼ˆ0ï¼‰M/S/U æ¨¡å¼ä¸‹å¯¹åº”çš„ External/Timer/Software ä¸­æ–­ã€‚ mip(Machine Interrupt Pending) è·å–å½“å‰ M/S/U æ¨¡å¼ä¸‹å¯¹åº”çš„ External/Timer/Software ä¸­æ–­æ˜¯å¦å‘ç”Ÿã€‚ ä¸­æ–­å¤„ç†æµç¨‹ä¸­æ–­å¤„ç† æŠŠ mstatus çš„ MIE å€¼å¤åˆ¶åˆ° MPIE ä¸­ï¼Œæ¸…é™¤ mstatus ä¸­çš„ MIE æ ‡å¿—ä½ï¼Œæ•ˆæœæ˜¯ä¸­æ–­è¢«ç¦æ­¢ã€‚ å½“å‰çš„ PC çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€è¢«å¤åˆ¶åˆ° mepc ä¸­ï¼ŒåŒæ—¶ PC è¢«è®¾ç½®ä¸ºmtvecã€‚æ³¨æ„å¦‚æœæˆ‘ä»¬è®¾ç½® mtvec.MODE = vetcoredï¼ŒPC =mtvec.BASE + 4 Ã— exception-codeã€‚ æ ¹æ® interrupt çš„ç§ç±»è®¾ç½® mcauseï¼Œå¹¶æ ¹æ®éœ€è¦ä¸º mtval è®¾ç½®é™„åŠ ä¿¡æ¯ã€‚ å°† trap å‘ç”Ÿä¹‹å‰çš„æƒé™æ¨¡å¼ä¿å­˜åœ¨ mstatus çš„ MPP åŸŸä¸­ï¼Œå†æŠŠhart æƒé™æ¨¡å¼æ›´æ”¹ä¸º Mã€‚ é€€å‡ºä¸­æ–­ä»¥åœ¨ M æ¨¡å¼ä¸‹æ‰§è¡Œ mret æŒ‡ä»¤ä¸ºä¾‹ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š å½“å‰ Hart çš„æƒé™çº§åˆ« = mstatus.MPP; mstatus.MPP= Uï¼ˆå¦‚æœ hart ä¸æ”¯æŒ U åˆ™ä¸º Mï¼‰ mstatus.MIE = mstatus.MPIE; mstatus.MPIE = 1 pc = mepc PLICï¼ˆPlatform-Level Interrupt Controllerï¼‰PLIC ç®€ä»‹HART åªèƒ½å¤„ç†ä¸€ä¸ªä¸­æ–­ï¼ŒPLIC ç›¸å½“äºä¸€ä¸ªæ§åˆ¶ä¸­å¿ƒï¼Œå®ƒé€šè¿‡ä¸­æ–­ç±»å‹ï¼Œä¼˜å…ˆçº§ç­‰ç­‰æ¥é€‰å‡ºä¸€ä¸ªéœ€è¦å¤„ç†çš„ä¸­æ–­ã€‚åè°ƒå¤šä¸ªä¸­æ–­ï¼ŒæœåŠ¡ä¸€ä¸ª HARTã€‚ 12345678enum &#123; UART0_IRQ = 10, //Interrupt Source ID RTC_IRQ = 11, VIRTIO_IRQ = 1, /* 1 to 8 */ VIRTIO_COUNT = 8, PCIE_IRQ = 0x20, /* 32 to 35 */ VIRTIO_NDEV = 0x35 /* Arbitrary maximum number of interrupts */&#125;; Interrupt Source ID èŒƒå›´ï¼š1 ~ 53ï¼ˆ0x35ï¼‰ 0 é¢„ç•™ä¸ç”¨ PLICæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¤–è®¾ï¼ŒRISC-V è§„èŒƒè§„å®šï¼ŒPLIC çš„å¯„å­˜å™¨ç¼–å€é‡‡ç”¨å†…å­˜æ˜ å°„ï¼ˆmemory mapï¼‰æ–¹å¼ã€‚æ¯ä¸ªå¯„å­˜å™¨çš„å®½åº¦ä¸º 32-bitã€‚ å…·ä½“å¯„å­˜å™¨ç¼–å€é‡‡ç”¨ base + offset çš„æ ¼å¼ï¼Œä¸” base ç”±å„ä¸ªç‰¹å®šplatform è‡ªå·±å®šä¹‰ã€‚é’ˆå¯¹ QEMU-virtï¼Œå…¶ PLIC çš„è®¾è®¡å‚è€ƒäº†FU540-C000ï¼Œbase ä¸º 0x0c000000ã€‚ 1234567891011121314151617static const MemMapEntry virt_memmap[] = &#123; [VIRT_DEBUG] = &#123; 0x0, 0x100 &#125;, [VIRT_MROM] = &#123; 0x1000, 0xf000 &#125;, [VIRT_TEST] = &#123; 0x100000, 0x1000 &#125;, [VIRT_RTC] = &#123; 0x101000, 0x1000 &#125;, [VIRT_CLINT] = &#123; 0x2000000, 0x10000 &#125;, [VIRT_ACLINT_SSWI] = &#123; 0x2F00000, 0x4000 &#125;, [VIRT_PCIE_PIO] = &#123; 0x3000000, 0x10000 &#125;, [VIRT_PLIC] = &#123; 0xc000000, VIRT_PLIC_SIZE(VIRT_CPUS_MAX * 2) &#125;, [VIRT_UART0] = &#123; 0x10000000, 0x100 &#125;, [VIRT_VIRTIO] = &#123; 0x10001000, 0x1000 &#125;, [VIRT_FW_CFG] = &#123; 0x10100000, 0x18 &#125;, [VIRT_FLASH] = &#123; 0x20000000, 0x4000000 &#125;, [VIRT_PCIE_ECAM] = &#123; 0x30000000, 0x10000000 &#125;, [VIRT_PCIE_MMIO] = &#123; 0x40000000, 0x40000000 &#125;, [VIRT_DRAM] = &#123; 0x80000000, 0x0 &#125;,&#125;; PLIC ç¼–ç¨‹æ¥å£ - å¯„å­˜å™¨PriorityåŠŸèƒ½ï¼šè®¾ç½®æŸä¸€è·¯ä¸­æ–­æºçš„ä¼˜å…ˆçº§å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + (interrupt-id) * 4 æ¯ä¸ª PLIC ä¸­æ–­æºå¯¹åº”ä¸€ä¸ªå¯„å­˜å™¨ï¼Œç”¨äºé…ç½®è¯¥ä¸­æ–­æºçš„ä¼˜å…ˆçº§ã€‚ QEMU-virt æ”¯æŒ 7 ä¸ªä¼˜å…ˆçº§ã€‚0 è¡¨ç¤ºå¯¹è¯¥ä¸­æ–­æºç¦ç”¨ä¸­æ–­ã€‚å…¶ä½™ä¼˜å…ˆçº§ï¼Œ1 æœ€ä½ï¼Œ7 æœ€é«˜ã€‚ å¦‚æœä¸¤ä¸ªä¸­æ–­æºä¼˜å…ˆçº§ç›¸åŒï¼Œåˆ™æ ¹æ®ä¸­æ–­æºçš„ ID å€¼è¿›ä¸€æ­¥åŒºåˆ†ä¼˜å…ˆçº§ï¼ŒID å€¼è¶Šå°çš„ä¼˜å…ˆçº§è¶Šé«˜ã€‚ PendingåŠŸèƒ½ï¼šç”¨äºæŒ‡ç¤ºæŸä¸€è·¯ä¸­æ–­æºæ˜¯å¦å‘ç”Ÿå†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x1000 + ((interrupt-id) / 32) * 4 æ¯ä¸ª PLIC åŒ…å« 2 ä¸ª 32 ä½çš„ Pending å¯„å­˜å™¨ï¼Œå› ä¸ºæ€»å…±æœ‰ 54 ä¸ªä¸­æ–­æºï¼Œæ¯ä¸€ä¸ª bit å¯¹åº”ä¸€ä¸ªä¸­æ–­æºï¼Œå¦‚æœä¸º 1 è¡¨ç¤ºè¯¥ä¸­æ–­æºä¸Šå‘ç”Ÿäº†ä¸­æ–­ï¼ˆè¿›å…¥Pending çŠ¶æ€ï¼‰ï¼Œæœ‰å¾… hart å¤„ç†ï¼Œå¦åˆ™è¡¨ç¤ºè¯¥ä¸­æ–­æºä¸Šå½“å‰æ— ä¸­æ–­å‘ç”Ÿã€‚ Pending å¯„å­˜å™¨ä¸­æ–­çš„ Pending çŠ¶æ€å¯ä»¥é€šè¿‡claim æ–¹å¼æ¸…é™¤ã€‚ ç¬¬ä¸€ä¸ª Pending å¯„å­˜å™¨çš„ç¬¬ 0 ä½å¯¹åº”ä¸å­˜åœ¨çš„ 0 å·ä¸­æ–­æºï¼Œå…¶å€¼æ°¸è¿œä¸º 0ã€‚ EnableåŠŸèƒ½ï¼šé’ˆå¯¹æŸä¸ª hart å¼€å¯æˆ–è€…å…³é—­æŸä¸€è·¯ä¸­æ–­æºå†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x2000 + (hart) * 0x80 æ¯ä¸ª Hart æœ‰ 2 ä¸ª Enable å¯„å­˜å™¨ï¼ˆEnable1 å’Œ Enable2ï¼‰ç”¨äºé’ˆå¯¹è¯¥Hart å¯åŠ¨æˆ–è€…å…³é—­æŸè·¯ä¸­æ–­æºã€‚ æ¯ä¸ªä¸­æ–­æºå¯¹åº” Enable å¯„å­˜å™¨çš„ä¸€ä¸ª bitï¼Œå…¶ä¸­Enable1 è´Ÿè´£æ§åˆ¶ 1 ~ 31 å·ä¸­æ–­æºï¼›Enable2 è´Ÿè´£æ§åˆ¶ 32 ~ 53 å·ä¸­æ–­æºã€‚å°†å¯¹åº”çš„ bit ä½è®¾ç½®ä¸º 1 è¡¨ç¤ºä½¿èƒ½è¯¥ä¸­æ–­æºï¼Œå¦åˆ™è¡¨ç¤ºå…³é—­è¯¥ä¸­æ–­æºã€‚ ThresholdåŠŸèƒ½ï¼šé’ˆå¯¹æŸä¸ª hart è®¾ç½®ä¸­æ–­æºä¼˜å…ˆçº§çš„é˜ˆå€¼å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x200000 + (hart) * 0x1000 æ¯ä¸ª Hart æœ‰ 1 ä¸ª Threshold å¯„å­˜å™¨ç”¨äºè®¾ç½®ä¸­æ–­ä¼˜å…ˆçº§çš„é˜ˆå€¼ã€‚ æ‰€æœ‰å°äºæˆ–è€…ç­‰äºï¼ˆ&lt;=ï¼‰è¯¥é˜ˆå€¼çš„ä¸­æ–­æºå³ä½¿å‘ç”Ÿäº†ä¹Ÿä¼šè¢« PLIC ä¸¢å¼ƒã€‚ç‰¹åˆ«åœ°ï¼Œå½“é˜ˆå€¼ä¸º 0 æ—¶å…è®¸æ‰€æœ‰ä¸­æ–­æºä¸Šå‘ç”Ÿçš„ä¸­æ–­ï¼›å½“é˜ˆå€¼ä¸º 7 æ—¶ä¸¢å¼ƒæ‰€æœ‰ä¸­æ–­æºä¸Šå‘ç”Ÿçš„ä¸­æ–­ã€‚ Claim/CompleteåŠŸèƒ½ï¼šå¦‚ä¸‹å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x200004 + (hart) * 0x1000 Claim å’Œ Complete æ˜¯åŒä¸€ä¸ªå¯„å­˜å™¨ï¼Œæ¯ä¸ª Hart ä¸€ä¸ªã€‚ å¯¹è¯¥å¯„å­˜å™¨æ‰§è¡Œè¯»æ“ä½œç§°ä¹‹ä¸º Claimï¼Œå³è·å–å½“å‰å‘ç”Ÿçš„æœ€é«˜ä¼˜å…ˆçº§çš„ä¸­æ–­æºIDã€‚Claim æˆåŠŸåä¼šæ¸…é™¤å¯¹åº”çš„ Pending ä½ã€‚ å¯¹è¯¥å¯„å­˜å™¨æ‰§è¡Œå†™æ“ä½œç§°ä¹‹ä¸º Completeã€‚æ‰€è°“ CompleteæŒ‡çš„æ˜¯é€šçŸ¥PLIC å¯¹è¯¥è·¯ä¸­æ–­çš„å¤„ç†å·²ç»ç»“æŸã€‚ 1234567891011121314void external_interrupt_handler()&#123; int irq = plic_claim(); // if (irq == UART0_IRQ)&#123; uart_isr(); &#125; else if (irq) &#123; printf(&quot;unexpected interrupt irq = %d\\n&quot;, irq); &#125; if (irq) &#123; plic_complete(irq); // &#125;&#125; CLINT ï¼ˆCore Local INTerruptorï¼‰å®šæ—¶å™¨ä¸­æ–­ï¼Œå±äºæœ¬åœ°ä¸­æ–­çš„ä¸€ç§ï¼Œç”±èŠ¯ç‰‡å†…éƒ¨CLINTè®¾å¤‡äº§ç”Ÿçš„ä¸­æ–­ã€‚ RISC-V è§„èŒƒè§„å®šï¼ŒCLINT çš„å¯„å­˜å™¨ç¼–å€é‡‡ç”¨å†…å­˜æ˜ å°„ï¼ˆmemory mapï¼‰æ–¹å¼ã€‚ å…·ä½“å¯„å­˜å™¨ç¼–å€é‡‡ç”¨base + offsetçš„æ ¼å¼ï¼Œä¸” base ç”±å„ä¸ªç‰¹å®š platform è‡ªå·±å®šä¹‰ã€‚é’ˆå¯¹ QEMU-virtï¼Œå…¶ CLINT çš„è®¾è®¡å‚è€ƒäº† SFIVEï¼Œbase ä¸º 0x2000000ã€‚ CLINT ç¼–ç¨‹æ¥å£ - å¯„å­˜å™¨ (Timer éƒ¨åˆ†)mtimeåŠŸèƒ½ï¼šreal-time è®¡æ•°å™¨ï¼ˆcounterï¼‰å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0xbff8 ç”±æ™¶æŒ¯äº§ç”Ÿï¼Œç³»ç»Ÿå…¨å±€å”¯ä¸€ï¼Œåœ¨ RV32 å’Œ RV64 ä¸Šéƒ½æ˜¯ 64-bitã€‚ç³»ç»Ÿå¿…é¡»ä¿è¯è¯¥è®¡æ•°å™¨çš„å€¼å§‹ç»ˆæŒ‰ç…§ä¸€ä¸ªå›ºå®šçš„é¢‘ç‡é€’å¢ã€‚ ä¸Šç”µå¤ä½æ—¶ï¼Œç¡¬ä»¶è´Ÿè´£å°† mtime çš„å€¼æ¢å¤ä¸º 0ã€‚ mtimecmpåŠŸèƒ½ï¼šå®šæ—¶å™¨æ¯”è¾ƒå¯„å­˜å™¨å†…å­˜æ˜ å°„åœ°å€ï¼šBASE + 0x4000 + (hart) * 8) æ¯ä¸ª hart ä¸€ä¸ª mtimecmp å¯„å­˜å™¨ï¼Œ64-bitã€‚ ä¸Šç”µå¤ä½æ—¶ï¼Œç³»ç»Ÿä¸è´Ÿè´£è®¾ç½® mt`imecmp çš„åˆå€¼ã€‚ å½“mtime &gt;= mtimecmp æ—¶ï¼ŒCLINT ä¼šäº§ç”Ÿä¸€ä¸ª timer ä¸­æ–­ã€‚å¦‚æœè¦ä½¿èƒ½è¯¥ä¸­æ–­éœ€è¦ä¿è¯å…¨å±€ä¸­æ–­æ‰“å¼€å¹¶ä¸”mie.MTIE æ ‡å¿—ä½ç½® 1ã€‚ å½“ timer ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œhart ä¼šè®¾ç½® mip.MTIPï¼Œç¨‹åºå¯ä»¥åœ¨ mtimecmp ä¸­å†™å…¥æ–°çš„å€¼æ¸…é™¤mip.MTIPã€‚ æ—¶é’ŸèŠ‚æ‹ tick æ“ä½œç³»ç»Ÿä¸­æœ€å°çš„æ—¶é—´å•ä½ï¼› Tick çš„å•ä½ï¼ˆå‘¨æœŸï¼‰ç”±ç¡¬ä»¶å®šæ—¶å™¨çš„å‘¨æœŸå†³å®šï¼ˆé€šå¸¸ä¸º 1 ~ 100msï¼‰ï¼› Tick å‘¨æœŸè¶Šå°ï¼Œä¹Ÿå°±æ˜¯1så†…äº§ç”Ÿçš„ä¸­æ–­è¶Šå¤šï¼Œç³»ç»Ÿçš„ç²¾åº¦è¶Šé«˜ï¼Œä½†å¼€é”€è¶Šå¤§ã€‚","categories":[{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"}]},{"title":"VSCode ä½¿ç”¨ sftp æ’ä»¶ä¸Šä¼ æœ¬åœ°æ–‡ä»¶è‡³å±€åŸŸç½‘æœåŠ¡å™¨","slug":"VSCodeä½¿ç”¨sftpæ’ä»¶ä¸Šä¼ æœ¬åœ°æ–‡ä»¶è‡³å±€åŸŸç½‘æœåŠ¡å™¨","date":"2021-12-24T03:39:03.000Z","updated":"2022-02-24T03:39:03.000Z","comments":true,"path":"2021/12/24/VSCodeä½¿ç”¨sftpæ’ä»¶ä¸Šä¼ æœ¬åœ°æ–‡ä»¶è‡³å±€åŸŸç½‘æœåŠ¡å™¨/","link":"","permalink":"http://example.com/2021/12/24/VSCode%E4%BD%BF%E7%94%A8sftp%E6%8F%92%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E8%87%B3%E5%B1%80%E5%9F%9F%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"","text":"æµ‹è¯•ä»£ç æ—¶ç»å¸¸éœ€è¦ä¸Šä¼ æ–‡ä»¶è‡³æœåŠ¡å™¨ç«¯è¿è¡Œï¼Œæ¯æ¬¡ä¸Šä¼ éƒ½éœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹ä¼ è¾“å·¥å…·å¦‚ FileZillaï¼Œæœ‰äº†SFTPæ’ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ VSCode ä¸Šç¼–è¯‘æˆåŠŸåï¼Œä¸€é”®ä¸Šä¼ æœ¬åœ°æ–‡ä»¶ã€‚ å®‰è£…æ’ä»¶æ‰“å¼€æ’ä»¶ä¸­å¿ƒï¼Œæœç´¢sftpï¼Œå®‰è£…é‡æœ€é«˜çš„å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ’ä»¶ï¼Œç‚¹å‡»å®‰è£…ã€‚ é…ç½®æ’ä»¶æ’ä»¶å®‰è£…å®Œæˆåï¼Œè¾“å…¥å¿«æ·é”®Control + Shift + P å¼¹å‡ºå‘½ä»¤é¢æ¿ï¼Œç„¶åè¾“å…¥sftp:configï¼Œå›è½¦ï¼Œå½“å‰å·¥ç¨‹çš„.vscodeæ–‡ä»¶å¤¹ä¸‹å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªsftp.jsonæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé…ç½®çš„å†…å®¹å¯ä»¥æ˜¯ï¼š 123456789101112131415161718192021222324252627282930&#123; &quot;host&quot;: &quot;192.168.xxx.xxx&quot;, //æœåŠ¡å™¨ ip &quot;port&quot;: 22, //ç«¯å£ï¼Œsftp æ¨¡å¼æ˜¯ 22 &quot;username&quot;: &quot;&quot;, //ç”¨æˆ·å &quot;password&quot;: &quot;&quot;, //å¯†ç  &quot;protocol&quot;: &quot;ftp&quot;, //æ¨¡å¼ï¼Œsfpt æˆ–è€… ftp &quot;agent&quot;: null, &quot;privateKeyPath&quot;: null, //å­˜æ”¾åœ¨æœ¬åœ°çš„å·²é…ç½®å¥½çš„ç”¨äºç™»å½•å·¥ä½œç«™çš„å¯†é’¥æ–‡ä»¶ï¼ˆä¹Ÿå¯ä»¥æ˜¯ ppk æ–‡ä»¶ï¼‰ &quot;passphrase&quot;: null, &quot;passive&quot;: false, &quot;interactiveAuth&quot;: false, &quot;remotePath&quot;: &quot;/root/node/build/&quot;, //æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶åœ°å€ &quot;context&quot;: &quot;./server/build&quot;, //æœ¬åœ°çš„æ–‡ä»¶åœ°å€ &quot;uploadOnSave&quot;: true, //ç›‘å¬ä¿å­˜å¹¶ä¸Šä¼  &quot;syncMode&quot;: &quot;update&quot;, &quot;watcher&quot;: &#123; //ç›‘å¬å¤–éƒ¨æ–‡ä»¶ &quot;files&quot;: false, //å¤–éƒ¨æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ &quot;autoUpload&quot;: false, &quot;autoDelete&quot;: false &#125;, &quot;ignore&quot;: [ //æŒ‡å®šåœ¨ä½¿ç”¨ sftp: sync to remote çš„æ—¶å€™å¿½ç•¥çš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹ //æ³¨æ„æ¯ä¸€è¡Œåé¢æœ‰é€—å·ï¼Œæœ€åä¸€è¡Œæ²¡æœ‰é€—å· //å¿½ç•¥é¡¹ &quot;**/.vscode/**&quot;, &quot;**/.git/**&quot;, &quot;**/.DS_Store&quot; ]&#125; æ’ä»¶ä½¿ç”¨ å¯ä»¥ç›´æ¥å³å‡»æ–‡ä»¶ï¼Œé€‰æ‹©Uploadï¼Œä¼šå°†æ–‡ä»¶ä¸Šä¼ è‡³é…ç½®å¥½çš„remotePathã€‚ å¯ä»¥Control + Shift + Pè¾“å…¥sftpï¼Œé€‰æ‹©æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå‘½ä»¤éƒ½æ˜¯å­—é¢æ„æ€ï¼Œä¸å¤šåšè§£é‡Šã€‚ å¦‚æœæœ‰å¤šä¸ª IP éœ€è¦é…ç½®ï¼Œå¯ä»¥åœ¨sftp.jsonæ–‡ä»¶ä¸­ï¼Œé€šè¿‡æ–¹æ‹¬å·[]æ·»åŠ ã€‚æ¯”å¦‚ 1234567891011121314151617181920212223242526[ &#123; &quot;host&quot;: &quot;192.168.xxx.01&quot;, //æœåŠ¡å™¨ ip &quot;port&quot;: 22, //ç«¯å£ï¼Œsftpæ¨¡å¼æ˜¯22 &quot;username&quot;: &quot;&quot;, //ç”¨æˆ·å &quot;password&quot;: &quot;&quot;, //å¯†ç  &quot;protocol&quot;: &quot;sftp&quot;, //æ¨¡å¼ï¼Œsfpt æˆ–è€… ftp &quot;agent&quot;: null, &#125;, &#123; &quot;host&quot;: &quot;192.168.xxx.02&quot;, //æœåŠ¡å™¨ ip &quot;port&quot;: 22, //ç«¯å£ï¼Œsftpæ¨¡å¼æ˜¯22 &quot;username&quot;: &quot;&quot;, //ç”¨æˆ·å &quot;password&quot;: &quot;&quot;, //å¯†ç  &quot;protocol&quot;: &quot;sftp&quot;, //æ¨¡å¼ï¼Œsfpt æˆ–è€… ftp &quot;agent&quot;: null, &#125;, &#123; &quot;host&quot;: &quot;192.168.xxx.03&quot;, //æœåŠ¡å™¨ ip &quot;port&quot;: 22, //ç«¯å£ï¼Œsftpæ¨¡å¼æ˜¯22 &quot;username&quot;: &quot;&quot;, //ç”¨æˆ·å &quot;password&quot;: &quot;&quot;, //å¯†ç  &quot;protocol&quot;: &quot;sftp&quot;, //æ¨¡å¼ï¼Œsfpt æˆ–è€… ftp &quot;agent&quot;: null, &#125;]","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"C ç¨‹åºå†…å­˜åŒºåŸŸåˆ†é…","slug":"Cç¨‹åºå†…å­˜åŒºåŸŸåˆ†é…","date":"2021-12-22T01:16:25.000Z","updated":"2022-10-15T02:59:00.971Z","comments":true,"path":"2021/12/22/Cç¨‹åºå†…å­˜åŒºåŸŸåˆ†é…/","link":"","permalink":"http://example.com/2021/12/22/C%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E5%88%86%E9%85%8D/","excerpt":"","text":"","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"ELF","slug":"ELF","permalink":"http://example.com/tags/ELF/"}]},{"title":"èŠ¯ç‰‡å¯åŠ¨è¿‡ç¨‹å…¨è§£æ","slug":"èŠ¯ç‰‡å¯åŠ¨è¿‡ç¨‹å…¨è§£æ","date":"2021-12-18T14:32:27.000Z","updated":"2023-08-19T06:18:23.756Z","comments":true,"path":"2021/12/18/èŠ¯ç‰‡å¯åŠ¨è¿‡ç¨‹å…¨è§£æ/","link":"","permalink":"http://example.com/2021/12/18/%E8%8A%AF%E7%89%87%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%E5%85%A8%E8%A7%A3%E6%9E%90/","excerpt":"","text":"å†…å®¹æ€»ç»“è‡ª B ç«™ Upã€è›‹é¥¼åµŒå…¥å¼ã€‘æˆ‘æç€é‹å¸¦æ‹è‡ªå·±ï¼ŸåµŒå…¥å¼èŠ¯ç‰‡å¯åŠ¨è¿‡ç¨‹å…¨è§£æï¼Œå½»åº•ç†è§£ bootloader å½“ä½ æŒ‰ä¸‹ç”µæºå¼€å…³çš„é‚£ä¸€ç¬é—´ï¼Œç¬¬ä¸€è¡Œä»£ç å¦‚ä½•åœ¨èŠ¯ç‰‡ä¸Šè¿è¡Œèµ·æ¥çš„å‘¢ï¼ŸåµŒå…¥å¼è½¯ä»¶ä»£ç éœ€è¦ä¸€å®šçš„æ–¹å¼çƒ§å½•åˆ°èŠ¯ç‰‡ä¸­æ‰èƒ½è¿è¡Œï¼Œé™¤äº†ç‰©ç†åˆ»èš€ï¼Œæ— è®ºæ˜¯é€šè®¯ç«¯å£çš„ä¼ è¾“æˆ–è€…è°ƒè¯•ç«¯å£çš„çƒ§å½•ï¼Œéƒ½éœ€è¦é©±åŠ¨ç¨‹åºçš„æ”¯æŒã€‚æ‰€ä»¥è¯´æ˜¯ç¨‹åºçƒ§å½•äº†ç¨‹åºï¼Œè½¯ä»¶å¯åŠ¨äº†è½¯ä»¶ã€‚ è¿™å°±åƒè‡ªå·±æç€è‡ªå·±çš„é‹å¸¦ï¼ŒæŠŠè‡ªå·±æ‹èµ·æ¥ã€‚é´å­ï¼ˆBootï¼‰,é‹å¸¦ï¼ˆStrapï¼‰ï¼Œæé‹å¸¦ï¼ˆLoaderï¼‰ã€‚è¿™å°±æ˜¯Boot Strap Loaderçš„å‘½åæ¥æºã€‚é€šå¸¸ç§°BootLoaderï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºè‡ªä¸¾ã€‚ BootLoaderæ˜¯èŠ¯ç‰‡æœ€åˆè¿è¡Œçš„ä»£ç å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œå…¶å®æ¯ä¸€å—èŠ¯ç‰‡åœ¨å‡ºå‚æ—¶éƒ½åœ¨å…¶å†…éƒ¨çš„ROMä¸­ï¼Œçƒ§å½•äº†å®ƒæœ€åŸºç¡€çš„è½¯ä»¶ã€‚CPU æ¬è¿å¹¶è¿è¡Œçš„ç¬¬ä¸€æ¡ä»£ç çš„é»˜è®¤ä½ç½®ï¼Œå°±åœ¨ROMçš„åœ°å€ç©ºé—´ã€‚æ‰€ä»¥ä¸€åˆ‡çš„èµ·å§‹éƒ½åœ¨ç¡¬ä»¶ä¸Šã€‚ ä»¥ X86 æ¶æ„çš„é¼»ç¥– 8086 èŠ¯ç‰‡ä¸ºä¾‹ï¼ŒæŒ‰ä¸‹å¼€å…³çš„ä¸€ç¬é—´ï¼ŒèŠ¯ç‰‡ Reset å¼•è„šæ¥æ”¶åˆ°äº†ç”µå¹³è·³å˜ï¼Œåœ¨ä¸€è¿ä¸²ç”µè·¯çš„ä½œç”¨ä¸‹ï¼Œä»£ç æ®µå¯„å­˜å™¨CSæ¢å¤æˆ0XFFFFï¼ŒæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨IPæ¢å¤æˆ0X0000ï¼Œä»–ä»¬ç»„åˆæˆ 20 ä½çš„åœ°å€æ­£å¥½ç­‰äº ROM ä¸­å­˜æ”¾ç¬¬ä¸€æ¡ä»£ç çš„ä½ç½®ã€‚ä¹‹åå–å‡ºè¿™é‡Œçš„æŒ‡ä»¤åœ¨è·³è½¬åˆ°åˆ«å¤„ã€‚ ARM æ¶æ„çš„èŠ¯ç‰‡ä¹Ÿæ˜¯ç±»ä¼¼çš„è¿‡ç¨‹ï¼Œå¯¹äº 32 ä½çš„èŠ¯ç‰‡ï¼Œé€šç”µåï¼ŒPCæŒ‡é’ˆå¯„å­˜å™¨å¤ä½è‡³é›¶åœ°å€ï¼Œéšåä»ä¸­æ–­å‘é‡è¡¨è¡¨å¤´çš„ reset å‘é‡å¤„è·å–ä¸‹ä¸€ä¸ªè·³è½¬çš„åœ°å€ã€‚è¿™æ—¶å€™çš„ä»£ç å·²ç»ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨ï¼Œå¤„ç†å™¨å¯ä»¥ç›´æ¥æ¬åˆ°è‡ªèº«ç¼“å­˜ä¸­è¿è¡Œã€‚æœ‰äº†è¿™éƒ¨åˆ†ä»£ç ï¼Œå°±èƒ½è·³è½¬åˆ°å­˜æ”¾æœ‰æ›´å¤šæ›´å¤æ‚çš„ä»£ç çš„åœ°å€ã€‚æ‰§è¡Œç¡¬ä»¶è‡ªæ£€ï¼ŒåŸºæœ¬çš„åˆå§‹åŒ–æ“ä½œï¼Œæä¾›åŸºç¡€çš„è¾“å…¥è¾“å‡ºæ”¯æŒã€‚ä¹‹åå¯ä»¥å°†æ“ä½œç³»ç»Ÿä»å¤–éƒ¨çš„å­˜å‚¨ç©ºé—´åŠ è½½åˆ°å†…éƒ¨ã€‚ä»£ç å°±è¿™æ ·æ¥åŠ›å¼çš„æµè½¬èµ·æ¥ã€‚ æ‰€ä»¥æˆ‘ä»¬æŠŠå‡ºå‚å°±å†™åœ¨ROMé‡Œï¼Œè´Ÿè´£å¯åŠ¨åç»­ç”¨æˆ·è½¯ä»¶çš„è½¯ä»¶ï¼Œç§°ä¸ºBoot ROMæˆ–è€…ROM Codeã€‚ç°åœ¨ä¸ä¸€å®šæ˜¯ç”¨åªè¯»å­˜å‚¨å™¨ï¼ˆRead Only Memoryï¼‰ï¼Œä½†æ˜¯è‡³å°‘æ˜¯ä¸€å—æ‰ç”µä¸æ˜“å¤±çš„å­˜å‚¨å™¨ï¼Œç°åœ¨ä¸»è¦ç”¨EEPROMï¼ŒNOR Flashã€‚æˆ‘ä»¬ä¸€èˆ¬æ²¡æœ‰æƒé™ä¿®æ”¹å®ƒï¼Œä½†æ˜¯å®ƒä¹Ÿä¸å®Œå…¨æ˜¯é»‘ç›’ï¼Œå¤§éƒ¨åˆ†èŠ¯ç‰‡éƒ½ä¼šæœ‰å¤–éƒ¨å¯åŠ¨é…ç½®å¼•è„šï¼Œé€šå¸¸æ˜¯ä»¥æ‹¨ç å¿«å…³çš„å½¢å¼ã€‚å¯¹äº PC æœºæ¥è¯´ï¼ŒBoot ROMå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„BIOSï¼Œå®ƒä¹Ÿæœ‰å¯åŠ¨é…ç½®é€”å¾„ã€‚è€Œä¸”æä¾›äº†äº¤äº’ç•Œé¢ï¼Œç”¨äºé…ç½®éƒ¨åˆ†åŠŸèƒ½å’Œé€‰æ‹©åç»­çš„å¼•å¯¼è®¾å¤‡ã€‚ é™¤äº†èŠ¯ç‰‡è‡ªå¸¦çš„Boot ROMï¼Œè¿˜éœ€è¦å†ç»™è‡ªå·±å®é™…çš„åº”ç”¨ç¨‹åºï¼Œå†™ä¸€ä¸ªäºŒæ¬¡å¼•å¯¼ä»£ç æˆ–è€… N æ¬¡å¼•å¯¼ä»£ç ï¼Œç”¨ä½œæ“ä½œç³»ç»Ÿï¼Œæ–‡ä»¶ç³»ç»ŸåŠ è½½ç­‰ç­‰ã€‚æˆ‘ä»¬æ‰€è¯´çš„Bootloaderæ—¶ï¼Œå…¶å®å¤§å¤šæ•°å°±æ˜¯è¿™æ ·çš„äºŒæ¬¡å¼•å¯¼ä»£ç ã€‚ è¿™äº›äº‹å…¶å®Boot ROMå®ƒä¹Ÿèƒ½åšï¼Œä½†æ˜¯Boot ROMå®ç°çš„åŠŸèƒ½å’Œé…ç½®æ–¹æ³•ä¸çµæ´»ï¼Œä½†æ˜¯Bootloaderæ˜¯å¼€å‘äººå‘˜å¯ä»¥è€Œå®Œå…¨æ§åˆ¶çš„å¼•å¯¼ä»£ç ã€‚ åœ¨è®¾è®¡Bootloaderæ—¶ï¼ŒMCUçš„å¼•å¯¼æ­¥éª¤å°±å¼€å§‹å’ŒåµŒå…¥å¼ Linux æˆ–è€… PC æœ‰æ‰€ä¸åŒã€‚è¿™ä¸€å®šç¨‹åº¦ä¸èŠ¯ç‰‡æ¶æ„æ‰€é‡‡ç”¨çš„çš„å­˜å‚¨æ–¹æ¡ˆæœ‰å…³ã€‚ å…ˆæ¥è¯´MCUï¼Œä¸SOCç›¸æ¯”MCUçš„ä¸»è¦ç‰¹å¾æ˜¯å•æ ¸å’Œæˆ–å¤šæ ¸åŒæ„çš„å¾®å¤„ç†å™¨ï¼Œå•æ ¸æˆ–å¤šæ ¸åŒæ„ï¼Œä¸»é¢‘ &lt; 1GHzï¼Œæ²¡æœ‰MMUå†…å­˜ç®¡ç†å•å…ƒï¼Œåªèƒ½è¿è¡Œå®æ—¶æ“ä½œç³»ç»Ÿã€‚å¸¸è§MCUå†…æ ¸ï¼š ç¨‹åºçš„ä¸»è¦è¿è¡Œä»‹è´¨ä¸ºNOR Flashï¼Œå› ä¸ºå’ŒRAMä¸€æ ·æœ‰åˆ†ç¦»çš„åœ°å€çº¿å’Œæ•°æ®çº¿ã€‚å¹¶ä¸”å¯ä»¥ä»¥å­—èŠ‚é•¿åº¦ç²¾ç¡®å¯»å€ï¼Œæ‰€ä»¥ç¨‹åºä¸éœ€è¦æ‹·è´åˆ°RAMä¸­è¿è¡Œçš„ã€‚ ä»¥è‹±é£å‡Œå®¶çš„ TC27x ç³»åˆ— MCU ä¸ºä¾‹ï¼Œä¸Šç”µåçš„é»˜è®¤å–å€ä½ç½®æ˜¯0x8FFF 8000ï¼Œè¿™å°±æ˜¯ä»–çš„Boot ROMåœ¨NorFlashä¸­çš„åœ°å€ã€‚å¹¶ä¸”è¿™å—Boot Romåˆ†ä¸ºSSWï¼ŒBSLï¼ŒTFã€‚ SSW æ¯æ¬¡ä¸Šç”µå¿…é¡»è¿è¡Œï¼Œä»–ä¼šæ ¹æ®å†™åœ¨program flashï¼ŒPFOåœ°å€çš„å‰ 32byte ä¸­çš„é…ç½®å­—ï¼Œæ¥å†³å®šSSWæ‰§è¡Œå®Œçš„è·³è½¬åœ°å€ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„è·³è½¬åœ°å€ï¼Œæ¯”å¦‚0x80000020ï¼Œæ”¾ä¸Šè‡ªå·±å†™çš„Bootloaderã€‚ä¹Ÿå¯ä»¥é€‰æ‹©ä¸è·³è½¬ï¼Œè¿è¡Œå‚å®¶æä¾›çš„Bootloaderï¼ˆBSLï¼‰ã€‚ MCUä¸‹çš„Bootloaderä¸»è¦å®Œæˆçš„äº‹æƒ…æœ‰ä»¥ä¸‹ï¼š å…³é—­çœ‹é—¨ç‹—ï¼Œåˆå§‹åŒ–ä¸­æ–­å’Œ trap å‘é‡è¡¨ï¼Œè¿›è¡Œæ—¶é’Ÿå’Œå¤–è®¾åˆå§‹åŒ–ï¼Œè®©èŠ¯ç‰‡æ­£å¸¸è¿è¡Œèµ·æ¥ã€‚ æä¾›CAN,UART, ETHç­‰ç”¨äºé€šè®¯åŠŸèƒ½çš„é©±åŠ¨ï¼Œèƒ½å¤Ÿæ¥æ”¶å¤–éƒ¨æ•°æ®ä¼ è¾“è¯·æ±‚ã€‚ æä¾›FLASHçš„è¯»å†™ä¸æ“¦é™¤é©±åŠ¨ï¼Œè®¾è®¡æœåŠ¡æ¥å¯¹é€šè®¯ç«¯å£æ¥æ”¶åˆ°çš„æ›´æ–°ä»£ç è¿›è¡Œæ ¡éªŒã€å­˜å‚¨ï¼Œä»¥åŠè·³è½¬æ“ä½œç³»ç»Ÿæˆ–åç»­åº”ç”¨ç¨‹åºä»£ç ã€‚ å¦‚æœ‰å¿…è¦ï¼Œè¿˜ä¼šå¼€å‘ä¸€äº›åŸºç¡€è¯Šæ–­æœåŠ¡ï¼Œä¸²å£äº¤äº’ç¨‹åºç­‰ç­‰ã€‚ é‚£ä¹ˆè¿è¡Œ Linux çš„SOCå’Œ PC çš„è¿™ä¸€è¿‡ç¨‹æœ‰ä½•ä¸åŒå‘¢ã€‚è¿˜æ˜¯å…ˆçœ‹å­˜å‚¨æ–¹æ¡ˆï¼Œè¿è¡ŒåµŒå…¥å¼ Linux çš„ SoCã€‚ä¸€èˆ¬å°†å®ƒçš„æ“ä½œç³»ç»Ÿï¼Œæ–‡ä»¶ç³»ç»Ÿå’Œä»–çš„åº”ç”¨ç¨‹åºæ”¾åœ¨nand flashä¸­ã€‚è¿è¡Œä»£ç å‰ï¼Œç°å°†ä»£ç æ¬è¿åˆ°SRAMä¸­ï¼Œç›¸æ¯”MCUå¤šäº†ä¸€é“æ­¥éª¤ã€‚ å¯¹äºSOCçš„Boot ROM å’Œ PC çš„BIOSè€Œè¨€ï¼Œä»–ä»¬ç»“æŸè¿è¡Œå‰çš„æœ€ç»ˆä»»åŠ¡ï¼Œæ˜¯å°†æŸäº›ä»£ç ä»nand flashæ¬è¿åˆ°SRAMä¸­ï¼Œå…¶ä¸­æœ€é‡è¦çš„å†…å®¹å°±æ˜¯Boot Loaderã€‚ è€Œä¸€èˆ¬SOCçš„Bootloaderï¼Œåˆåˆ†ä¸ºSPLï¼ˆSecondary Program Loaderï¼‰å’ŒuBOOTä¸¤ä¸ªé˜¶æ®µã€‚SPLçš„ Secondary å°±æ˜¯ç›¸å¯¹äºBootROMè€Œè¨€ï¼Œä»–å°±åƒæ˜¯æ¥åŠ›èµ›ä¸­çš„ç¬¬äºŒæ£’é€‰æ‰‹ã€‚SPLä¼šåˆå§‹åŒ–æ›´å¤§ç©ºé—´çš„å¤–éƒ¨DRAMï¼Œå†æŠŠuBootæ¬è¿åˆ°å¤–éƒ¨DRAMä¸­å»è¿è¡Œã€‚uBootä½œä¸ºç¬¬ä¸‰æ£’é€‰æ‰‹ï¼Œå¼€å§‹è¿è¡Œå®ƒçš„åˆå§‹åŒ–ç¨‹åºã€‚ä¹‹åå†æ ¹æ®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œå°† OS å†…æ ¸æ¬è¿åˆ°å¤–éƒ¨DRAMä¸­å»è¿è¡Œã€‚OS å†å®Œæˆæ ¹æ–‡ä»¶ç³»ç»Ÿçš„åŠ è½½ç­‰ç­‰ç­‰ç­‰ã€‚","categories":[{"name":"Embedded Development","slug":"Embedded-Development","permalink":"http://example.com/categories/Embedded-Development/"}],"tags":[{"name":"Bootloader","slug":"Bootloader","permalink":"http://example.com/tags/Bootloader/"},{"name":"BootRom","slug":"BootRom","permalink":"http://example.com/tags/BootRom/"}]},{"title":"å®šæ—¶å™¨ Timer åŸºç¡€","slug":"å®šæ—¶å™¨TimeråŸºç¡€","date":"2021-12-15T04:22:18.000Z","updated":"2023-08-19T06:19:17.496Z","comments":true,"path":"2021/12/15/å®šæ—¶å™¨TimeråŸºç¡€/","link":"","permalink":"http://example.com/2021/12/15/%E5%AE%9A%E6%97%B6%E5%99%A8Timer%E5%9F%BA%E7%A1%80/","excerpt":"","text":"æ¦‚å¿µå®šæ—¶å™¨ï¼ˆTimerï¼‰ï¼Œåˆå«è®¡æ—¶å™¨ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯è®¡æ—¶ã€‚å› ä¸º CPU è®¡æ—¶ä¼šå ç”¨å¤§é‡èµ„æºï¼Œè€Œå®šæ—¶å™¨ç‹¬ç«‹äº CPUï¼Œä¸“é—¨ç”¨æ¥è®¡æ—¶ã€‚å•æ ¸ CPU å¥½æ¯”äººçš„å¤§è„‘ï¼Œä¸€å¿ƒä¸å¯äºŒç”¨ï¼Œå®ƒåªèƒ½çŸ¥é“è‡ªå·±å½“å‰è¦å¹²ä»€ä¹ˆã€‚äººå¯ä»¥ç”¨é—¹é’Ÿæ¥æé†’è‡ªå·±æŸä¸ªæ—¶é—´éœ€è¦åšæŸä»¶äº‹ï¼Œè€Œ CPU å°±éœ€è¦å®šæ—¶å™¨æ¥å®Œæˆè¿™æ ·çš„å·¥ä½œã€‚ å½“å®šæ—¶å™¨è¢«å¼€å¯åï¼Œé‡Œé¢çš„è®¡æ•°å™¨å°±ä»¥è®¡æ•°å™¨æ—¶é’Ÿçš„é¢‘ç‡å¼€å§‹è¿è¡Œï¼Œå†…éƒ¨çš„è®¡æ•°å€¼ä¸æ–­å¢åŠ ã€‚ä¾‹å¦‚ä¸€ä¸ªæ—¶é’Ÿä¸º1MHzçš„å®šæ—¶å™¨ï¼Œè¢«å¼€å¯åæ¯éš”1usè®¡æ•°å€¼å°±ä¼šåŠ  1ã€‚ä½†è®¡æ•°å€¼ä¸å¯èƒ½æ— é™å¢åŠ ï¼Œæœ€å¤§å€¼æ¯”å¦‚65535ã€‚å°†è¿™ä¸ªåè¿›åˆ¶æ•°è½¬ä¸ºäºŒè¿›åˆ¶æ•°ååº”è¯¥æ˜¯ä¸€ä¸ª 16 ä½çš„äºŒè¿›åˆ¶æ•°1111 1111 1111 1111ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ª 16 ä½å¤§å°çš„å­˜å‚¨ç©ºé—´æ¥å­˜å‚¨å®ƒã€‚é‚£è¿™å°±æ˜¯ä¸€ä¸ª 16 ä½å®šæ—¶å™¨ã€‚ åŠŸèƒ½å®šæ—¶å™¨å¯ä»¥è®© SoC åœ¨æ‰§è¡Œä¸»ç¨‹åºçš„åŒæ—¶ï¼Œå¯ä»¥ (é€šè¿‡å®šæ—¶å™¨) å…·æœ‰è®¡æ—¶åŠŸèƒ½ï¼Œåˆ°äº†ä¸€å®šæ—¶é—´ (è®¡æ—¶ç»“æŸ) åï¼Œå®šæ—¶å™¨ä¼šäº§ç”Ÿä¸­æ–­æé†’ CPUï¼ŒCPU ä¼šå»å¤„ç†ä¸­æ–­å¹¶æ‰§è¡Œå®šæ—¶å™¨ä¸­æ–­çš„ ISRï¼Œä»è€Œå»æ‰§è¡Œé¢„å…ˆè®¾å®šå¥½çš„äº‹ä»¶ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œå®šæ—¶å™¨å°±åƒä¸€ä¸ªç§˜ä¹¦ï¼ŒCPU å°±æ˜¯è€æ¿ã€‚è€æ¿æ¯å¤©éƒ½æœ‰å¾ˆå¤šäº‹è¦åšï¼Œå…·ä½“æ—¶é—´å®‰æ’ä¸æƒ³æ“å¿ƒï¼Œå°±å®‰æ’ç»™ç§˜ä¹¦ã€‚ç§˜ä¹¦æ¯å¤©å°±æ˜¯ç›¯ç€è¡¨ï¼Œåˆ°ç‚¹å°±æé†’è€æ¿è¦åšæŸäº‹ã€‚ åŸç†å¤–è®¾çš„å·¥ä½œé¢‘ç‡æ˜¯ä¸å®ƒæ‰€æŒ‚è½½åœ¨çš„å¤–è®¾æ€»çº¿çš„æ—¶é’Ÿé¢‘ç‡ç›¸åŒçš„ã€‚ä½†å·¥ä½œé¢‘ç‡ä¸æ˜¯æ—¶é’Ÿé¢‘ç‡ï¼Œå·¥ä½œé¢‘ç‡åˆ°æ—¶é’Ÿé¢‘ç‡éœ€è¦è¿›è¡Œä¸€æ¬¡åˆ†é¢‘ã€‚è¿™ä¸ªå¯è°ƒèŠ‚çš„åˆ†é¢‘å€¼ä½¿å¾—å®šæ—¶å™¨çš„è®¡æ—¶æ›´åŠ çµæ´»ã€‚è¿™ä¸ªåˆ†é¢‘å€¼å°±æ˜¯éœ€è¦è®¾ç½®çš„ç¬¬ä¸€ä¸ªå‚æ•°é¢„åˆ†é¢‘ç³»æ•°ã€‚ $$è®¡æ•°å™¨æ—¶é’Ÿé¢‘ç‡ = å·¥ä½œé¢‘ç‡/(é¢„åˆ†é¢‘ç³»æ•°+1)$$ $$å®šæ—¶é¢‘ç‡ = è®¡æ—¶å™¨æ—¶é’Ÿé¢‘ç‡/(è‡ªåŠ¨é‡è½½å€¼+1)$$ å‡è®¾å®šæ—¶å™¨æ—¶é’Ÿé¢‘ç‡ä¸º1MHzï¼Œé‚£å®šæ—¶1msè¯¥å¦‚ä½•åšï¼Ÿè®¡æ•° 1000 æ¬¡å³å¯ã€‚æœ€å¤§çš„è®¡æ•°å€¼å°±æ˜¯è‡ªåŠ¨é‡è½½å€¼ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦è®¾ç½®çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚å®šæ—¶å™¨è¢«æ‰“å¼€åï¼Œè®¡æ•°å€¼å°±å¢åŠ ï¼Œä¸€æ—¦è¾¾åˆ°è‡ªåŠ¨é‡è½½å€¼å°±ä¼šå‡ºå‘å®šæ—¶å™¨æº¢å‡ºä¸­æ–­ï¼Œå°±å®ç°äº†å®šæ—¶1msã€‚ è®¡æ•°æ¨¡å¼ ä¸­å¿ƒè®¡æ•°ï¼šè®¡æ•°å™¨ä» 0 å¼€å§‹è®¡æ•°åˆ°è‡ªåŠ¨è£…å…¥çš„å€¼ -1ï¼Œäº§ç”Ÿä¸€ä¸ªè®¡æ•°å™¨æº¢å‡ºäº‹ä»¶ï¼Œ0 ç„¶åå‘ä¸‹è®¡æ•°åˆ° 1 å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªè®¡æ•°å™¨æº¢å‡ºäº‹ä»¶ï¼Œç„¶åå†ä» 0 å¼€å§‹é‡æ–°è®¡æ•°ã€‚ å‘ä¸Šè®¡æ•°ï¼šè®¡æ•°å™¨ä» 0 è®¡æ•°åˆ°è‡ªåŠ¨åŠ è½½å€¼ (TIMx_ARR) ï¼Œç„¶åé‡æ–°ä» 0 å¼€å§‹è®¡æ•°å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªè®¡æ•°å™¨æº¢å‡ºäº‹ä»¶ã€‚ å‘ä¸‹è®¡æ•°ï¼šè®¡æ•°å™¨ä»è‡ªåŠ¨è£…å…¥çš„å€¼ (TIMx_ARR) å¼€å§‹å‘ä¸‹è®¡æ•°åˆ° 0ï¼Œç„¶åä»è‡ªåŠ¨è£…å…¥çš„å€¼é‡æ–°å¼€å§‹ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªè®¡æ•°å™¨å‘ä¸‹æº¢å‡ºäº‹ä»¶ã€‚","categories":[{"name":"Embedded Development","slug":"Embedded-Development","permalink":"http://example.com/categories/Embedded-Development/"}],"tags":[{"name":"Timer","slug":"Timer","permalink":"http://example.com/tags/Timer/"},{"name":"å¤–è®¾","slug":"å¤–è®¾","permalink":"http://example.com/tags/%E5%A4%96%E8%AE%BE/"},{"name":"Embedded","slug":"Embedded","permalink":"http://example.com/tags/Embedded/"}]},{"title":"è§£å†³ Qt-QObject::connect: Cannot queue arguments of typeâ€˜QTextCursorâ€™é”™è¯¯","slug":"è§£å†³Qt-QObject-connect-Cannot-queue-arguments-of-type-â€˜QTextCursorâ€™é”™è¯¯","date":"2021-12-04T03:41:46.000Z","updated":"2022-10-15T03:14:29.827Z","comments":true,"path":"2021/12/04/è§£å†³Qt-QObject-connect-Cannot-queue-arguments-of-type-â€˜QTextCursorâ€™é”™è¯¯/","link":"","permalink":"http://example.com/2021/12/04/%E8%A7%A3%E5%86%B3Qt-QObject-connect-Cannot-queue-arguments-of-type-%E2%80%98QTextCursor%E2%80%99%E9%94%99%E8%AF%AF/","excerpt":"","text":"ä¿ç•™ç°åœºæˆ‘åœ¨çº¿ç¨‹ä¸­ç›´æ¥è°ƒç”¨äº† QTextEdit çš„ append å‡½æ•°æ—¶ï¼Œå€™å°±ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š 123QObject::connect: Cannot queue arguments of type &#x27;QTextCursor&#x27; (Make sure &#x27;QTextCursor&#x27; is registered using qRegisterMetaType().) æ¢ç©¶åŸå› åŸå› æ˜¯**æˆ‘ä»¬ä¸èƒ½é€šè¿‡çº¿ç¨‹æ¥ä¿®æ”¹ UIï¼Œè¾ƒä¸ºå®‰å…¨çš„ä¿®æ”¹ç”¨æˆ·ç•Œé¢çš„æ–¹å¼æ˜¯å‘ UI çª—å£å‘é€ä¿¡å· (signal)**ï¼Œè¾ƒä¸ºç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ Qt threading ç±»ã€‚ è§£å†³æ–¹æ³•åœ¨çª—å£ç±»ä¸­å®šä¹‰ä¿¡å·å’Œæ§½ï¼Œå¹¶å£°æ˜å’Œå®ç°ä¸€ä¸ªæ¥å£å‡½æ•°ï¼Œè¿™ä¸ªæ¥å£å‡½æ•°ç”±çº¿ç¨‹è°ƒç”¨ï¼Œåœ¨æ¥å£å‡½æ•°ä¸­ emit ä¸€ä¸ªä¿¡å·ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819//mainwindow.hsignals: void AppendText(const QString &amp;text);private slots: void SlotAppendText(const QString &amp;text);public: void Append(const QString &amp;text);//mainwindow.cppconnect(this,SIGNAL(AppendText(QString)),this,SLOT(SlotAppendText(QString)));void ClassName::Append(const QString &amp;text)&#123; emit AppendText(&quot;ok: string1&quot;);&#125;//thread.cppvoid ThreadClassName::SlotAppendText(const QString &amp;text)&#123; mText.append(text);&#125;","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"è§£å†³ Linux å¯åŠ¨å‡ºç° fsck exited with status code 4","slug":"è§£å†³Linuxå¯åŠ¨å‡ºç°fsck-exited-with-status-code-4","date":"2021-12-04T02:18:09.000Z","updated":"2022-10-15T03:14:29.815Z","comments":true,"path":"2021/12/04/è§£å†³Linuxå¯åŠ¨å‡ºç°fsck-exited-with-status-code-4/","link":"","permalink":"http://example.com/2021/12/04/%E8%A7%A3%E5%86%B3Linux%E5%90%AF%E5%8A%A8%E5%87%BA%E7%8E%B0fsck-exited-with-status-code-4/","excerpt":"","text":"ä¿ç•™ç°åœº æ¢ç©¶åŸå› ç£ç›˜æ£€æµ‹ä¸èƒ½é€šè¿‡ï¼Œå¯èƒ½æ˜¯å› ä¸ºç³»ç»Ÿçªç„¶æ–­ç”µæˆ–å…¶å®ƒæœªæ­£å¸¸å…³é—­ç³»ç»Ÿå¯¼è‡´ã€‚ è§£å†³æ–¹æ³•æ ¹æ®æç¤ºå¯ä»¥çœ‹åˆ°æ˜¯dev/sda5è¿™ä¸ªæ‰‡åŒºå‡ºç°äº†å¼‚å¸¸ï¼Œæ‰€ä»¥é€šè¿‡fsckå‘½ä»¤ä¿®å¤æ–‡ä»¶ç³»ç»Ÿã€‚è¯¦ç»†å‘½ä»¤è§£é‡Šã€‚ å°†sda5æ”¹ä¸ºè‡ªå·±æŸåçš„æ‰‡åŒºå³å¯ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ä¿®å¤å®Œæˆåï¼Œè¾“å…¥exitå³å¯é‡å¯ã€‚ 1fsck -y /dev/sda5","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Qt è·¨çª—å£ï¼Œæ§ä»¶ç±»ä¼ é€’æ•°æ®","slug":"Qtè·¨çª—å£ï¼Œæ§ä»¶ç±»ä¼ é€’æ•°æ®","date":"2021-12-02T02:35:14.000Z","updated":"2022-10-15T03:14:29.514Z","comments":true,"path":"2021/12/02/Qtè·¨çª—å£ï¼Œæ§ä»¶ç±»ä¼ é€’æ•°æ®/","link":"","permalink":"http://example.com/2021/12/02/Qt%E8%B7%A8%E7%AA%97%E5%8F%A3%EF%BC%8C%E6%8E%A7%E4%BB%B6%E7%B1%BB%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE/","excerpt":"","text":"é—®é¢˜ç®€ä»‹æœ¬æ–‡åŸºäºã€Qtã€‘çª—ä½“é—´ä¼ é€’æ•°æ®ï¼ˆè·¨æ§ä»¶è·¨ç±»ï¼‰ï¼Œä¸‰ç§æƒ…å†µä¸å¤„ç†æ–¹æ³• å·²çŸ¥ä¸‰ä¸ªçª—ä½“ï¼ŒA ä¸º B C çš„çˆ¶æ§ä»¶ï¼ŒB ä¸ C äº’ä¸ºå…„å¼Ÿæ§ä»¶é‚£ä¹ˆå‚æ•°ä¼ é€’åˆ†ä¸‰ç§æƒ…å†µï¼š B å‘ Aï¼ˆC å‘ Aï¼‰ä¼ é€’å‚æ•° B å‘ Cï¼ˆC å‘ Bï¼‰ä¼ é€’å‚æ•° A å‘ Bï¼ˆA å‘ Cï¼‰ä¼ é€’å‚æ•° ä¸‰ä¸ªç©ºé—´å…³ç³»æ¨¡å‹å‚è€ƒå¦‚ä¸‹ï¼Œ B å‘ Aï¼ˆC å‘ Aï¼‰ä¼ é€’å‚æ•°123456789101112//B.hclass B&#123;signals: void toA([ParamList]);&#125;//B.cppB::B()&#123; emit toA([ParamList]);&#125; 1234567891011121314151617181920//A.hclass A&#123;private: B *b;private slots: void fromB([ParamList]);&#125;//A.cppA::A()&#123; b = new B; connect(b, SIGNAL(toA([ParamList])), this, SLOT(fromB([ParamList])));&#125;void A::fromB([ParamList])&#123;//get[ParamList]&#125; B å‘ Cï¼ˆC å‘ Bï¼‰ä¼ é€’å‚æ•°12345678910111213141516171819202122232425262728293031323334353637383940//A.h&#123;private: B *b; C *c;&#125;//A.cppA::A()&#123; b = new B; c = new C; connect(b, SIGNAL(toC([ParamList]), c, SLOT(fromB([ParamList])));&#125;//B.hclass B&#123;signals: void toC([ParamList]);&#125;//B.cppB::B()&#123; emit toC([ParamList]);&#125;//C.hclass C&#123;private slots: void fromB([ParamList]);&#125;//C.cppvoid C::fromB([ParamList])&#123;//get[ParamList]&#125; A å‘ Bï¼ˆA å‘ Cï¼‰ä¼ é€’å‚æ•°1234567891011121314151617181920212223242526//B.hclass B&#123;public: void fromA([ParamList]);&#125; //B.cppvoid B::fromA([ParamList])&#123;//get[ParamList]&#125;//A.hclass A&#123;private: B *b;&#125;//A.cppA:A()&#123; b = new B; b-&gt;fromA([ParamList]);&#125;","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"Clang-Format æ ¼å¼åŒ–ä»£ç ","slug":"Clang-Formatæ ¼å¼åŒ–ä»£ç ","date":"2021-12-01T09:42:45.000Z","updated":"2022-10-15T03:14:29.062Z","comments":true,"path":"2021/12/01/Clang-Formatæ ¼å¼åŒ–ä»£ç /","link":"","permalink":"http://example.com/2021/12/01/Clang-Format%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BB%A3%E7%A0%81/","excerpt":"","text":"å®‰è£…Linux1sudo apt-get install clang-format windowsæ¯æ¯åˆ°è¿™æ—¶å€™å°±è¶Šèƒ½æ„Ÿå—åˆ°ç”¨ Linux ä½œä¸ºå¼€å‘ç¯å¢ƒçš„ä¼˜åŠ¿ï¼ŒWindows å®‰è£…å°±ç¨æ˜¾å¤æ‚äº†ã€‚ ä½ å¯ä»¥é€‰æ‹©å®‰è£…å®Œæ•´çš„ LLVMï¼Œåœ¨binç›®å½•å¯ä»¥çœ‹åˆ°clang-format.exeã€‚å®‰è£…å®Œåï¼Œå°† bin ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚ ä½ ä¹Ÿå¯ä»¥åªä¸‹è½½clang-format.exeï¼Œä»LLVM Snapshot Buildsä¸‹è½½å®‰è£…åŒ…ã€‚åœ¨ä¸‹è½½é¡µé¢çš„åº•éƒ¨ã€‚åŒæ ·ä½ éœ€è¦å°†å•ç‹¬ä¸‹è½½çš„æ–‡ä»¶åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚ ä½¿ç”¨å…¥é—¨ä½¿ç”¨Linux å¯ä»¥ç›´æ¥å‘½ä»¤è¡Œï¼Œä½¿ç”¨ä»¥ LLVM ä»£ç é£æ ¼æ ¼å¼åŒ–main.cpp, ç»“æœç›´æ¥å†™åˆ°main.cpp 1clang g-format -i main.cpp -style=LLVM è¿›é˜¶é…ç½®å¦‚æœæ¯æ¬¡ç¼–ç éƒ½å‘½ä»¤è¡Œæ‰§è¡Œä¸€éé‚£ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œè€Œä¸”æ¯æ¬¡ä¿®æ”¹ä¹Ÿä¸æ­¢ä¸€ä¸ªæ–‡ä»¶ã€‚æœ€å¥½çš„æ–¹å¼å°±æ˜¯æ¯æ¬¡ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ã€‚æ¯”å¦‚ VSCode å·²ç»å†…ç½®äº†Clang-Formatç¨ä½œé…ç½®å³å¯å®ç°ï¼Œæ¥ä¸‹æ¥ä»‹ç»å‡ ç§å¸¸è§ IDE å¦‚ä½•é…ç½®Clang-Formatã€‚ VSCodeVSCode æœ€å¸¸ç”¨ï¼Œå› ä¸ºå†…ç½®äº†Clang-Formatä¹Ÿæœ€å®¹æ˜“é…ç½®ã€‚ å®‰è£…C/C++æ’ä»¶ï¼ŒCtrl+Shift+Xæ‰“å¼€åº”ç”¨å•†åº—ï¼Œæœç´¢C/C++æ‰¾åˆ°ä¸‹å›¾æ’ä»¶ï¼Œå®‰è£…åä¼šè‡ªåŠ¨å®‰è£…Clang-Formatç¨‹åºï¼Œæ— éœ€å•ç‹¬ä¸‹è½½ã€‚é»˜è®¤å®‰è£…è·¯å¾„ä¸ºï¼šC:\\Users\\(ä½ çš„ç”¨æˆ·å)\\.vscode\\extensions\\ms-vscode.cpptools-1.7.1\\LLVM\\bin\\clang-format.exeã€‚ æ‰“å¼€è®¾ç½®é¡µé¢ï¼ˆå·¦ä¸‹è§’é½¿è½® - è®¾ç½®ï¼‰ï¼Œæœç´¢formatï¼Œå‹¾é€‰Format On Saveï¼Œæ¯æ¬¡ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ ¼å¼åŒ–æ–‡æ¡£ã€‚ä¸‹æ–¹çš„è®¾ç½®æ˜¯å†³å®šæ¯æ¬¡æ ¼å¼åŒ–æ˜¯æ•´ä¸ªæ–‡æ¡£ï¼Œè¿˜æ˜¯åšè¿‡ä¿®æ”¹çš„å†…å®¹ã€‚é»˜è®¤æ˜¯fileï¼Œå¯¹æ•´ä¸ªæ–‡æ¡£è¿›è¡Œæ ¼å¼åŒ–ã€‚ ä»åœ¨è®¾ç½®é¡µé¢æœç´¢Clangï¼Œé…ç½®å¦‚ä¸‹ã€‚.clang-formatæ–‡ä»¶æœ€åè¯¦è§£ã€‚ æ•ˆæœå›¾ QtCreator å®‰è£…Beautifieræ’ä»¶ï¼šå¸®åŠ©ï¼ˆHelpï¼‰-å…³äºæ’ä»¶ï¼ˆAbout Pluginsï¼‰- Beautifierå‹¾é€‰ï¼Œé‡å¯ QtCreatorã€‚ å·¥å…·ï¼ˆToolï¼‰- Beautifierï¼Œé…ç½®å¦‚å›¾ã€‚è¯¥é…ç½®ï¼Œä¿å­˜æ–‡æ¡£æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œå¹¶é€‰æ‹©Clang-Formatä½œä¸ºæ ¼å¼åŒ–å·¥å…·ã€‚é…ç½®Clang-Formatç¨‹åºè·¯å¾„ï¼Œå¦‚æœå¼€å¤´å·²ç»apt installå®‰è£…è¿‡ï¼Œè¿™é‡Œä¼šè‡ªåŠ¨è¡¥å…¨ã€‚ Use predefined styleå¯ä»¥é€‰æ‹©å†…ç½®çš„ä¸€äº›ä»£ç é£æ ¼ï¼Œå¦‚LLVMï¼ŒGoogleç­‰ã€‚ Use customized styleä½¿ç”¨è‡ªå®šä¹‰çš„ä¸€äº›ä»£ç é£æ ¼ã€‚ç‚¹å‡»æ·»åŠ ï¼ˆAddï¼‰å°†é…ç½®æ–‡ä»¶ç²˜è´´è¿›å»å³å¯ï¼Œå…·ä½“é…ç½®æ–‡ä»¶è§æœ€åã€‚ åˆ«å¿˜äº†ç‚¹å‡»OKä¿å­˜ã€‚ Eclipse å®‰è£…cppstyleæ’ä»¶ï¼šHelp - Eclipse Marketplace - æœç´¢cppstyleã€‚ ä¸‹è½½cpplintã€‚ å¯ä»¥å»githubä¸Šä¸‹è½½cpplintçš„æºç ï¼Œä¸‹è½½å®Œä¹‹åè§£å‹æ”¾åˆ°æŸä¸ªç›®å½•ä¸‹ã€‚ åœ¨Window - Preferences - C/C++ - CppStyleé¡µé¢æŠŠclang-formatçš„è·¯å¾„æ·»åŠ è¿›å»ï¼Œç„¶åæŠŠcpplintçš„ç›®å½•æŒ‡å‘åˆšæ‰ä¸‹è½½çš„styleguideç›®å½•ä¸‹çš„cpplint/cpplint.pyå°±å¯ä»¥äº†ã€‚å‹¾é€‰ä¸‹é¢çš„Enable cpplintï¼ŒRun clang-format on file saveï¼Œç„¶åç‚¹å‡»Apply and Closeä¿å­˜ä¿®æ”¹å¹¶é€€å‡ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æ­¤æ—¶å†ä¿å­˜ä»£ç ï¼Œå°†ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æœªç»™å½“å‰é¡¹ç›®ç¼–å†™é…ç½®æ–‡ä»¶.clang-formatã€‚å°†æœ€åä¸€ç« æåˆ°çš„é…ç½®æ–‡ä»¶æ”¾åˆ°å½“å‰é¡¹ç›®çš„ä¸‹å³å¯ï¼Œç¨‹åºä¼šè‡ªåŠ¨æœç´¢ã€‚ 12Cannot find .clang-format or _clang-format configuration file under any level parent directories of path.Clang-format will default to Google style. é…ç½®ç®€ä»‹ä¸Šæ–‡å¤šæ¬¡æåˆ°äº†.clang-formaté…ç½®æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å†³å®šäº†ä»£ç å¦‚ä½•æ ¼å¼åŒ–ï¼Œç°åœ¨æ¥ä»‹ç»å¦‚ä½•ä½¿ç”¨è¯¥æ–‡ä»¶ã€‚ å¯¼å‡º.clang-formatæ–‡ä»¶å¦‚æœé‡æ–°ç¼–å†™ä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œéœ€è¦è€ƒè™‘çš„ä¸œè¥¿å¤ªå¤šï¼Œclang-formatå†…ç½®äº†ä¸€äº›å¸¸è§é£æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å·²æœ‰çš„é…ç½®æ–‡ä»¶ç¨ä½œä¿®æ”¹ï¼Œå½¢æˆè‡ªå·±çš„ä»£ç é£æ ¼ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆå¯¼å‡ºä¸€ä»½å†…ç½®çš„é…ç½®æ–‡ä»¶ã€‚ 12clang-format -style=å¯é€‰æ ¼å¼å -dump-config &gt; .clang-format# å¯é€‰æ ¼å¼æœ€å¥½å†™é¢„è®¾é‚£é‚£å‡ ä¸ªå†™æœ€æ¥è¿‘ä½ æƒ³è¦çš„æ ¼å¼ã€‚æ¯”å¦‚æˆ‘æƒ³è¦æ¥è¿‘ Google C++ style çš„ã€‚æˆ‘å°±å†™-style=google å„ä¸ªé€‰é¡¹çš„å«ä¹‰è¿™é‡Œç»™å‡ºäº†é…ç½®çš„å«ä¹‰ï¼Œæ„Ÿå…´è¶£ä¹Ÿå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œè¿˜æä¾›äº†ä¸€äº›æœ‰æ¡ˆä¾‹ï¼Œæè¿°æ›´æ¸…æ™°ã€‚ ä¸€äº›æ¯”è¾ƒæ˜æ˜¾çš„ä»£ç åˆ†æ ¼åŒºåˆ« 1234567891011121314151617181920212223242526272829303132# æ‹¬å·æ˜¯åˆ†è¡Œï¼Œè¿˜æ˜¯ä¸åˆ†è¡Œï¼Œåªæœ‰å½“ BreakBeforeBraces è®¾ç½®ä¸º Custom æ—¶æ‰æœ‰æ•ˆBraceWrapping: AfterCaseLabel: true # class å®šä¹‰åé¢ AfterClass: true # æ§åˆ¶è¯­å¥åé¢ AfterControlStatement: true AfterEnum: true AfterFunction: true AfterNamespace: true AfterObjCDeclaration: true AfterStruct: true AfterUnion: true AfterExternBlock: true BeforeCatch: true BeforeElse: true # ç¼©è¿›å¤§æ‹¬å·ï¼Œif else è¯­å¥åé¢çš„æ‹¬å·ç¼©è¿› IndentBraces: false SplitEmptyFunction: true SplitEmptyRecord: true SplitEmptyNamespace: trueBreakBeforeBinaryOperators: NoneBreakBeforeBraces: Custom# tab å®½åº¦TabWidth: 4# æ¢è¡Œç¼©è¿›å­—ç¬¦æ•°IndentWidth: 4# å®å®šä¹‰å¯¹é½AlignConsecutiveMacros: AcrossEmptyLinesAndComments åŸºäºLLVMä»£ç é£æ ¼ä¿®æ”¹çš„ä¸ªäººä½¿ç”¨ç‰ˆæœ¬ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145---Language: Cpp# BasedOnStyle: LLVMAccessModifierOffset: -2AlignAfterOpenBracket: Align# å®å®šä¹‰å¯¹é½AlignConsecutiveMacros: AcrossEmptyLinesAndCommentsAlignConsecutiveAssignments: trueAlignConsecutiveDeclarations: trueAlignConsecutiveBitFields: trueAlignEscapedNewlines: RightAlignOperands: trueAlignTrailingComments: trueAllowAllArgumentsOnNextLine: trueAllowAllConstructorInitializersOnNextLine: trueAllowAllParametersOfDeclarationOnNextLine: trueAllowShortBlocksOnASingleLine: NeverAllowShortCaseLabelsOnASingleLine: false# æ˜¯å¦å…è®¸çŸ­æ–¹æ³•å•è¡Œï¼Œåªæœ‰ä¸€è¡Œçš„å‡½æ•°å°†ä¸ä¼šåˆ†è¡Œï¼Œç›´æ¥å†™åœ¨å‡½æ•°ååAllowShortFunctionsOnASingleLine: falseAllowShortLambdasOnASingleLine: AllAllowShortIfStatementsOnASingleLine: NeverAllowShortLoopsOnASingleLine: falseAlwaysBreakAfterDefinitionReturnType: NoneAlwaysBreakAfterReturnType: NoneAlwaysBreakBeforeMultilineStrings: falseAlwaysBreakTemplateDeclarations: MultiLineBinPackArguments: trueBinPackParameters: true# æ‹¬å·æ˜¯åˆ†è¡Œï¼Œè¿˜æ˜¯ä¸åˆ†è¡Œï¼Œåªæœ‰å½“ BreakBeforeBraces è®¾ç½®ä¸º Custom æ—¶æ‰æœ‰æ•ˆBraceWrapping: AfterCaseLabel: true # class å®šä¹‰åé¢ AfterClass: true # æ§åˆ¶è¯­å¥åé¢ AfterControlStatement: true AfterEnum: true AfterFunction: true AfterNamespace: true AfterObjCDeclaration: true AfterStruct: true AfterUnion: true AfterExternBlock: false BeforeCatch: true BeforeElse: true # ç¼©è¿›å¤§æ‹¬å· IndentBraces: false SplitEmptyFunction: true SplitEmptyRecord: true SplitEmptyNamespace: trueBreakBeforeBinaryOperators: NoneBreakBeforeBraces: CustomBreakBeforeInheritanceComma: falseBreakInheritanceList: BeforeColonBreakBeforeTernaryOperators: trueBreakConstructorInitializersBeforeComma: falseBreakConstructorInitializers: BeforeColonBreakAfterJavaFieldAnnotations: falseBreakStringLiterals: trueColumnLimit: 100CommentPragmas: &#x27;^ IWYU pragma:&#x27;CompactNamespaces: falseConstructorInitializerAllOnOneLineOrOnePerLine: falseConstructorInitializerIndentWidth: 4ContinuationIndentWidth: 4Cpp11BracedListStyle: trueDeriveLineEnding: trueDerivePointerAlignment: falseDisableFormat: falseExperimentalAutoDetectBinPacking: falseFixNamespaceComments: trueForEachMacros: - foreach - Q_FOREACH - BOOST_FOREACHIncludeBlocks: PreserveIncludeCategories: - Regex: &#x27;^&quot;(llvm|llvm-c|clang|clang-c)/&#x27; Priority: 2 SortPriority: 0 - Regex: &#x27;^(&lt;|&quot;(gtest|gmock|isl|json)/)&#x27; Priority: 3 SortPriority: 0 - Regex: &#x27;.*&#x27; Priority: 1 SortPriority: 0IncludeIsMainRegex: &#x27;(Test)?$&#x27;IncludeIsMainSourceRegex: &#x27;&#x27;IndentCaseLabels: falseIndentGotoLabels: trueIndentPPDirectives: None# æ¢è¡Œç¼©è¿›å­—ç¬¦æ•°IndentWidth: 4IndentWrappedFunctionNames: falseJavaScriptQuotes: LeaveJavaScriptWrapImports: trueKeepEmptyLinesAtTheStartOfBlocks: trueMacroBlockBegin: &#x27;&#x27;MacroBlockEnd: &#x27;&#x27;MaxEmptyLinesToKeep: 1NamespaceIndentation: NoneObjCBinPackProtocolList: AutoObjCBlockIndentWidth: 0ObjCSpaceAfterProperty: falseObjCSpaceBeforeProtocolList: truePenaltyBreakAssignment: 2PenaltyBreakBeforeFirstCallParameter: 19PenaltyBreakComment: 300PenaltyBreakFirstLessLess: 120PenaltyBreakString: 1000PenaltyBreakTemplateDeclaration: 10PenaltyExcessCharacter: 1000000PenaltyReturnTypeOnItsOwnLine: 60PointerAlignment: RightReflowComments: trueSortIncludes: trueSortUsingDeclarations: trueSpaceAfterCStyleCast: falseSpaceAfterLogicalNot: falseSpaceAfterTemplateKeyword: trueSpaceBeforeAssignmentOperators: trueSpaceBeforeCpp11BracedList: falseSpaceBeforeCtorInitializerColon: trueSpaceBeforeInheritanceColon: trueSpaceBeforeParens: ControlStatementsSpaceBeforeRangeBasedForLoopColon: trueSpaceInEmptyBlock: falseSpaceInEmptyParentheses: falseSpacesBeforeTrailingComments: 1SpacesInAngles: falseSpacesInConditionalStatement: falseSpacesInContainerLiterals: trueSpacesInCStyleCastParentheses: falseSpacesInParentheses: falseSpacesInSquareBrackets: falseSpaceBeforeSquareBrackets: falseStandard: LatestStatementMacros: - Q_UNUSED - QT_REQUIRE_VERSIONTabWidth: 8UseCRLF: falseUseTab: Never... æ ¼å¼åŒ–æœ€æ–°çš„commitä»£ç clang-formatè¿˜æä¾›ä¸€ä¸ªclang-format-diff.pyè„šæœ¬ï¼Œç”¨æ¥æ ¼å¼åŒ–patchï¼Œcode reviewæäº¤ä»£ç å‰ï¼Œè·‘ä¸€éä¸‹é¢çš„ä»£ç ã€‚ 12// æ ¼å¼åŒ–æœ€æ–°çš„ commitï¼Œå¹¶ç›´æ¥åœ¨åŸæ–‡ä»¶ä¸Šä¿®æ”¹git diff -U0 HEAD^ | clang-format-diff.py -i -p1 å¸¸è§é—®é¢˜å¦‚ä½•çœ‹æ‡‚å®˜æ–¹æ–‡æ¡£å¹¶ç¼–å†™é…ç½®æ–‡ä»¶å®˜æ–¹æ–‡æ¡£é‡Œæœ‰å„ç§è®¾ç½®çš„ç¤ºä¾‹ä»£ç ï¼Œå³ä½¿ä¸çŸ¥é“æƒ³è¦çš„æ ¼å¼åŒ–æ˜¯å“ªä¸ªé…ç½®å‚æ•°ï¼Œç¿»ä¸€ç¿»å®˜æ–¹æ–‡æ¡£æ˜¯ç¤ºä¾‹å¤§æ¦‚ç‡èƒ½æ‰¾åˆ°ã€‚é‚£ä¹ˆæ‰¾åˆ°äº†æƒ³è¦çš„é…ç½®å‚æ•°ï¼Œå¦‚ä½•åœ¨æ–‡ä»¶é‡Œé…ç½®å‘¢ï¼Ÿ ä»¥å®å®šä¹‰å¯¹é½ä¸ºä¾‹ã€‚æˆ‘ä»¬æƒ³è¦å®å®šä¹‰çš„å€¼ä¿æŒå¯¹é½çš„çŠ¶æ€ï¼Œå¦‚ä¸‹ä¸€èŠ‚å›¾ç‰‡æ‰€ç¤ºã€‚å¯ä»¥ç¿»ä¸€éå®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥å‘ç°è¿™ä¸ªç¤ºä¾‹ä»£ç å¯¹åº”çš„å‚æ•°å¯èƒ½æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼ŒAlignConsecutiveMacrosç¿»è¯‘ä¸ºå¯¹é½è¿ç»­çš„å®å®šä¹‰ã€‚é‚£åº”è¯¥å…«ä¹ä¸ç¦»åäº†ã€‚ æ‰¾åˆ°äº†å‚æ•°å¦‚ä½•ç¼–å†™é…ç½®æ–‡ä»¶å‘¢ï¼Ÿå¯ä»¥ç»§ç»­çœ‹è¿™ä¸ªå‚æ•°ä¸‹é¢çš„æ›´å¤šç¤ºä¾‹ï¼Œæ¯ä¸€ä¸ªç¤ºä¾‹éƒ½å¯¹åº”ä¸€ä¸ªé…ç½®å¯èƒ½å€¼Possible valuesã€‚ ACS_None (in configuration: None)Do not align macro definitions on consecutive lines.ACS_Noneä¸ºè¿™ä¸ªé…ç½®çš„ç¼©å†™ï¼ŒNoneè¡¨ç¤ºåœ¨é…ç½®æ–‡ä»¶é‡Œçš„å€¼ã€‚è¯¥é…ç½®è¡¨ç¤ºä¸å¯¹å®å®šä¹‰è¿›è¡Œå¯¹é½æ“ä½œï¼Œåœ¨é…ç½®æ–‡ä»¶é‡Œå¯ä»¥æ·»åŠ å¦‚ä¸‹ï¼š 1AlignConsecutiveMacros: None ACS_Consecutive (in configuration: Consecutive)Align macro definitions on consecutive lines. This will result in formattings like: 1234567#define SHORT_NAME 42#define LONGER_NAME 0x007f#define EVEN_LONGER_NAME (2)#define foo(x) (x * x)/* some comment */#define bar(y, z) (y + z) ACS_Consecutiveä¸ºè¿™ä¸ªé…ç½®çš„ç¼©å†™ï¼ŒConsecutiveè¡¨ç¤ºåœ¨é…ç½®æ–‡ä»¶é‡Œçš„å€¼ã€‚è¯¥é…ç½®è¡¨ç¤ºå¯¹è¿ç»­çš„å®å®šä¹‰è¿›è¡Œå¯¹é½ï¼Œåœ¨é…ç½®æ–‡ä»¶é‡Œå¯ä»¥æ·»åŠ å¦‚ä¸‹ï¼š 1AlignConsecutiveMacros: Consecutive å®å®šä¹‰å¯¹é½å¤±æ•ˆ12# å®å®šä¹‰å¯¹é½AlignConsecutiveMacros: AcrossEmptyLinesAndComments ä½¿ç”¨å®å®šä¹‰å¯¹é½æ›´è¯¦ç»†çš„é…ç½®ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ä½¿ç”¨è¯¥é…ç½®ä¸€å®šè¦ä½¿ç”¨ç­‰å®½çš„å­—ä½“ï¼Œå¦åˆ™é…ç½®ç”Ÿæ•ˆä½†æ˜¯æ˜¾ç¤ºä¸æ­£ç¡®ã€‚æ¯”å¦‚æˆ‘æ˜¯ç”¨å¾®è½¯é›…é»‘å­—ä½“ä½œä¸ºç¼–ç å­—ä½“ï¼Œå› ä¸ºè¯¥å­—ä½“æ¯ä¸ªå­—ç¬¦ä¸ç­‰å®½ï¼Œå¯¼è‡´æ ¼å¼åŒ–æ­£ç¡®ï¼Œä½†æ˜¯æ˜¾ç¤ºä¸æ­£ç¡®ã€‚ å¦‚æœå°†å­—ä½“æ¢ä½ç­‰å®½å­—ä½“å¦‚å¸¸ç”¨çš„Consolasï¼Œå°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹è¯»ä¹¦ç¬”è®°","slug":"ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹è¯»ä¹¦ç¬”è®°","date":"2021-11-29T15:20:18.000Z","updated":"2022-10-15T02:59:01.401Z","comments":true,"path":"2021/11/29/ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹è¯»ä¹¦ç¬”è®°/","link":"","permalink":"http://example.com/2021/11/29/%E3%80%8A%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","excerpt":"","text":"ä»£ç æ•´æ´ä¹‹é“æ•´æ´ä»£ç æ•´æ´ä¹‹é“ ä»£ç æ˜¯æˆ‘ä»¬æœ€ç»ˆç”¨æ¥è¡¨è¾¾éœ€æ±‚çš„é‚£ç§è¯­è¨€ï¼Œä»£ç æ°¸å­˜ï¼› æ—¶æ—¶ä¿æŒä»£ç æ•´æ´ï¼Œç¨åç­‰äºæ°¸ä¸ï¼ˆLater equals neverï¼‰ï¼› æ•´æ´ä»£ç åŠ›æ±‚é›†ä¸­ï¼Œæ¯ä¸ªå‡½æ•°ã€æ¯ä¸ªç±»å’Œæ¯ä¸ªæ¨¡å—éƒ½å…¨ç¥è´¯æ³¨äºä¸€ä»¶äº‹ï¼› æ•´æ´ä»£ç ç®€å•ç›´æ¥ï¼Œä»ä¸éšè—è®¾è®¡è€…çš„æ„å›¾ï¼› æ•´æ´ä»£ç åº”å½“æœ‰å•å…ƒæµ‹è¯•å’ŒéªŒæ”¶æµ‹è¯•ã€‚å®ƒä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½åï¼Œä»£ç é€šè¿‡å…¶å­—é¢è¡¨è¾¾å«ä¹‰ï¼› æ¶ˆé™¤é‡å¤ä»£ç ï¼Œæé«˜ä»£ç è¡¨è¾¾åŠ›ã€‚ æœ‰æ„ä¹‰çš„å‘½åé¿å…è¯¯å¯¼ â€œä¸€ç»„è´¦å·â€åˆ«ç”¨accountListè¡¨ç¤ºï¼ŒListå¯¹ç¨‹åºå‘˜æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¯ä»¥ç”¨ accountGroupã€bunchOfAccountsã€ç”šè‡³æ˜¯accountsï¼› ä¸ä½¿ç”¨åŒºåˆ«è¾ƒå°çš„åç§°ï¼ŒZYXControllerForEfficientHandlingOfStringså’Œ ZYXControllerForEfficientStorageOfStringséš¾ä»¥è¾¨åˆ«ï¼› ä¸ä½¿ç”¨å°å†™ lã€å¤§å†™ O ä½œå˜é‡åï¼Œçœ‹èµ·æ¥åƒå¸¸é‡ 1ã€0ã€‚ åšæœ‰æ„ä¹‰çš„åŒºåˆ† ä¸ä»¥æ•°å­—ç³»åˆ—å‘½å(a1ã€a2ã€a3)ï¼ŒæŒ‰ç…§çœŸå®å«ä¹‰å‘½åï¼› Product/ProductInfo/ProductData æ„æ€æ— åŒºåˆ«ï¼Œåªç»Ÿä¸€ç”¨ä¸€ä¸ªï¼› åˆ«å†™å†—ä½™çš„åå­—ï¼Œå˜é‡ååˆ«å¸¦variableã€è¡¨ååˆ«å¸¦tableã€‚ ä½¿ç”¨è¯»å¾—å‡ºæ¥çš„åç§° genymdhmsï¼ˆç”Ÿæˆæ—¥æœŸï¼Œå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ï¼‰è‚¯å®šä¸å¦‚generation timestampï¼ˆç”Ÿæˆæ—¶é—´æˆ³ï¼‰æ–¹ä¾¿äº¤æµã€‚ ä½¿ç”¨å¯æœç´¢çš„åç§° å•å­—æ¯åç§°å’Œæ•°å­—å¸¸é‡å¾ˆéš¾åœ¨ä¸Šä¸‹æ–‡ä¸­æ‰¾å‡ºã€‚åç§°é•¿çŸ­åº”ä¸å…¶ä½œç”¨åŸŸå¤§å°ç›¸å¯¹åº”ï¼Œè¶Šæ˜¯é¢‘ç¹å‡ºç°çš„å˜é‡åç§°å¾—è¶Šå®¹æ˜“æœç´¢ (è¶Šé•¿)ã€‚ å‘½åæ—¶é¿å…ä½¿ç”¨ç¼–ç  æŠŠç±»å‹å’Œä½œç”¨åŸŸç¼–ç è¿›åç§°é‡Œå¢åŠ äº†è§£ç è´Ÿæ‹…ã€‚æ„å‘³ç€æ–°äººé™¤äº†äº†è§£ä»£ç é€»è¾‘ä¹‹å¤–ï¼Œè¿˜éœ€è¦å­¦ä¹ è¿™ç§ç¼–ç è¯­è¨€ï¼› åˆ«ä½¿ç”¨åŒˆç‰™åˆ©è¯­æ ‡è®°æ³•(æ ¼å¼ï¼š**[Prefix]-BaseTag-Name** å…¶ä¸­ BaseTag æ˜¯æ•°æ®ç±»å‹çš„ç¼©å†™ï¼ŒName æ˜¯å˜é‡åå­—)ï¼Œçº¯å±å¤šä½™ã€‚ä¾‹å¦‚ï¼ŒszCmdLineçš„å‰ç¼€szè¡¨ç¤ºâ€œä»¥é›¶ç»“æŸçš„å­—ç¬¦ä¸²â€ï¼› ä¸å¿…ç”¨m_å‰ç¼€æ¥è¡¨æ˜æˆå‘˜å˜é‡ï¼› æ¥å£å’Œå®ç°åˆ«åœ¨åç§°ä¸­ç¼–ç ã€‚æ¥å£åIShapeFactoryçš„å‰å¯¼â€Iâ€æ˜¯åºŸè¯ã€‚å¦‚æœæ¥å£å’Œå®ç°å¿…é¡»é€‰ä¸€ä¸ªç¼–ç ï¼Œå®å¯é€‰å®ç°ï¼ŒShapeFactoryImpéƒ½æ¯”å¯¹æ¥å£åç§°ç¼–ç æ¥çš„å¥½ã€‚ é¿å…æ€ç»´æ˜ å°„ ä¸åº”å½“è®©è¯»è€…åœ¨è„‘ä¸­æŠŠä½ çš„åç§°ç¿»è¯‘ä¸ºä»–ä»¬ç†ŸçŸ¥çš„åç§°ã€‚ä¾‹å¦‚ï¼Œå¾ªç¯è®¡æ•°å™¨è‡ªç„¶æœ‰å¯èƒ½è¢«å‘½åä¸ºiæˆ–jæˆ–kï¼Œä½†åƒä¸‡åˆ«ç”¨å­—æ¯lï¼› ä¸“ä¸šç¨‹åºå‘˜äº†è§£ï¼Œæ˜ç¡®æ˜¯ç‹é“ï¼Œç¼–å†™èƒ½æ–¹ä¾¿ä»–äººç†è§£çš„ä»£ç ã€‚ ç±»åã€æ–¹æ³•å ç±»ååº”å½“æ˜¯åè¯æˆ–åè¯çŸ­è¯­ï¼Œæ–¹æ³•ååº”å½“æ˜¯åŠ¨è¯æˆ–åŠ¨è¯çŸ­è¯­ã€‚ å‘½åä¸è¦è€å®å¹½é»˜ è¨€åˆ°æ„åˆ°ï¼Œæ„åˆ°è¨€åˆ°ï¼Œä¸è¦åœ¨å‘½åä¸Šå±•ç¤ºå¹½é»˜æ„Ÿã€‚ æ¯ä¸ªæ¦‚å¿µç”¨ä¸€ä¸ªè¯ fetchã€retrieveã€getçº¦å®šä¸€ä¸ªä¸€ç›´ç”¨å³å¯ã€‚ å°½ç®¡ä½¿ç”¨è®¡ç®—æœºç§‘å­¦æœ¯è¯­ åªæœ‰ç¨‹åºå‘˜æ‰ä¼šè¯»ä½ çš„ä»£ç ï¼Œä¸éœ€è¦æŒ‰ç…§é—®é¢˜æ‰€åœ¨é‚»åŸŸå–åç§°ã€‚ åˆ«ç”¨åŒå…³è¯­ addæ–¹æ³•ä¸€èˆ¬è¯­ä¹‰æ˜¯ï¼šæ ¹æ®ä¸¤ä¸ªå€¼è·å¾—ä¸€ä¸ªæ–°çš„å€¼ã€‚å¦‚æœè¦æŠŠå•ä¸ªå€¼åŠ å…¥åˆ°æŸä¸ªé›†åˆï¼Œç”¨insertæˆ–appendå‘½åæ›´å¥½ï¼Œè¿™é‡Œç”¨addå°±æ˜¯åŒå…³è¯­äº†ã€‚ æ·»åŠ æœ‰æ„ä¹‰çš„è¯­å¢ƒ å¾ˆå°‘æœ‰åç§°èƒ½è‡ªæˆ‘è¯´æ˜ï¼Œéœ€è¦ç”¨è‰¯å¥½å‘½åçš„ç±»ã€å‡½æ•°ã€æˆ–è€…å‘½åç©ºé—´æ¥æ”¾ç½®åç§°ï¼Œç»™è¯»è€…æä¾›è¯­å¢ƒï¼Œå¦‚æœåšä¸åˆ°çš„è¯ï¼Œç»™åç§°æ·»åŠ å‰ç¼€å°±æ˜¯æœ€åä¸€æ‹›äº†ã€‚ å‡½æ•°è¶ŠçŸ­è¶Šå¥½ çŸ­å°ï¼Œ20 è¡Œå°é¡¶ï¼› if/else/whileè¯­å¥çš„ä»£ç å—åº”è¯¥åªæœ‰ä¸€è¡Œï¼Œè¯¥è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨è¯­å¥ï¼› å‡½æ•°çš„ç¼©è¿›å±‚çº§ä¸åº”è¯¥å¤šäºä¸€å±‚æˆ–ä¸¤å±‚ã€‚ ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ å¦‚æœå‡½æ•°åªæ˜¯åšäº†è¯¥å‡½æ•°åä¸‹åŒä¸€æŠ½è±¡å±‚ä¸Šçš„æ­¥éª¤ï¼Œåˆ™å‡½æ•°åªåšäº†ä¸€ä»¶äº‹ï¼› è¦åˆ¤æ–­å‡½æ•°æ˜¯å¦ä¸æ­¢åšäº†ä¸€ä»¶äº‹ï¼Œå°±æ˜¯è¦çœ‹æ˜¯å¦èƒ½å†æ‹†å‡ºä¸€ä¸ªå‡½æ•°ï¼› æ¯ä¸ªå‡½æ•°ä¸€ä¸ªæŠ½è±¡å±‚çº§ å‘ä¸‹è§„åˆ™ï¼šè®©ä»£ç æ‹¥æœ‰è‡ªé¡¶å‘ä¸‹çš„é˜…è¯»é¡ºåºã€‚æ¯ä¸ªå‡½æ•°åé¢éƒ½è·Ÿç€ä½äºä¸‹ä¸€æŠ½è±¡å±‚çº§çš„å‡½æ•°ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåœ¨æŸ¥çœ‹å‡½æ•°åˆ—è¡¨æ—¶ï¼Œå°±èƒ½å¾ªæŠ½è±¡å±‚çº§å‘ä¸‹é˜…è¯»äº†ã€‚ switch è¯­å¥ æŠŠ switch åŸ‹åœ¨è¾ƒä½çš„æŠ½è±¡å±‚çº§ï¼Œä¸€èˆ¬å¯ä»¥æ”¾åœ¨æŠ½è±¡å·¥å‚åº•ä¸‹ï¼Œç”¨äºåˆ›å»ºå¤šæ€å¯¹è±¡ã€‚ ä½¿ç”¨æè¿°æ€§çš„åç§° å‡½æ•°è¶ŠçŸ­å°ã€åŠŸèƒ½è¶Šé›†ä¸­ï¼Œå°±è¶Šä¾¿äºå–ä¸ªå¥½åå­—ï¼› åˆ«å®³æ€•é•¿åç§°ï¼Œé•¿è€Œå…·æœ‰æè¿°æ€§çš„åç§°ï¼Œè¦æ¯”çŸ­è€Œä»¤äººè´¹è§£çš„åç§°å¥½ï¼Œè¦æ¯”æè¿°æ€§çš„é•¿æ³¨é‡Šå¥½ï¼› åˆ«å®³æ€•èŠ±æ—¶é—´å–åå­—ã€‚ å‡½æ•°å‚æ•° å‚æ•°è¶Šå°‘è¶Šå¥½ï¼Œ0 å‚æ•°æœ€å¥½ï¼Œå°½é‡é¿å…ç”¨ä¸‰ä¸ªä»¥ä¸Šå‚æ•°ï¼› å‚æ•°è¶Šå¤šï¼Œç¼–å†™ç»„åˆå‚æ•°çš„æµ‹è¯•ç”¨ä¾‹å°±è¶Šå›°éš¾ï¼› åˆ«ç”¨æ ‡è¯†å‚æ•°ï¼Œå‘å‡½æ•°ä¼ å…¥boolå€¼æ˜¯ä¸å¥½çš„ï¼Œè¿™æ„å‘³ç€å‡½æ•°ä¸æ­¢åšä¸€ä»¶äº‹ã€‚å¯ä»¥å°†æ­¤å‡½æ•°æ‹†æˆä¸¤ä¸ªï¼› å¦‚æœå‡½æ•°éœ€è¦ä¸¤ä¸ªã€ä¸‰ä¸ªæˆ–è€…ä¸‰ä¸ªä»¥ä¸Šå‚æ•°ï¼Œå°±è¯´æ˜å…¶ä¸­ä¸€äº›å‚æ•°åº”è¯¥å°è£…æˆç±»äº†ï¼› å°†å‚æ•°çš„é¡ºåºç¼–ç è¿›å‡½æ•°åï¼Œå‡è½»è®°å¿†å‚æ•°é¡ºåºçš„è´Ÿæ‹…ï¼Œä¾‹å¦‚ assertExpectedEqualsActual(expected, actual)ã€‚ å‰¯ä½œç”¨ (å‡½æ•°åœ¨æ­£å¸¸å·¥ä½œä»»åŠ¡ä¹‹å¤–å¯¹å¤–éƒ¨ç¯å¢ƒæ‰€æ–½åŠ çš„å½±å“) æ£€æŸ¥å¯†ç å¹¶ä¸”åˆå§‹åŒ–sessionçš„æ–¹æ³•å‘½åä¸ºcheckPasswordAndInitializeSessionè€Œé checkPasswordï¼Œå³ä½¿è¿åå•ä¸€èŒè´£åŸåˆ™ä¹Ÿä¸è¦æœ‰å‰¯ä½œç”¨ï¼› é¿å…ä½¿ç”¨â€è¾“å‡ºå‚æ•°â€ï¼Œå¦‚æœå‡½æ•°å¿…é¡»ä¿®æ”¹æŸç§çŠ¶æ€ï¼Œå°±ä¿®æ”¹æ‰€å±å¯¹è±¡çš„çŠ¶æ€å§ã€‚ è®¾ç½® (å†™) å’ŒæŸ¥è¯¢ (è¯») åˆ†ç¦»- 1234if(set(&quot;username&quot;, &quot;unclebob&quot;)) &#123; ... &#125; å«ä¹‰æ¨¡ç³Šä¸æ¸…ã€‚åº”è¯¥æ”¹ä¸º: 1234if (attributeExists(&quot;username&quot;)) &#123; setAttribute(&quot;username&quot;, &quot;unclebob&quot;);&#125; ä½¿ç”¨å¼‚å¸¸ä»£æ›¿è¿”å›é”™è¯¯ç  è¿”å›é”™è¯¯ç ä¼šè¦æ±‚è°ƒç”¨è€…ç«‹åˆ»å¤„ç†é”™è¯¯ï¼Œä»è€Œå¼•èµ·æ·±å±‚æ¬¡çš„åµŒå¥—ç»“æ„ï¼› 12345678910111213141516171819202122if (deletePate(page) == E_OK) &#123; if (xxx() == E_OK) &#123; if (yyy() == E_OK) &#123; log(); &#125; else &#123; log(); &#125; &#125; else &#123; log(); &#125;&#125; else &#123; log();&#125; æ‰€ä»¥éœ€è¦ç”¨try catchå¼‚å¸¸æœºåˆ¶ï¼› 12345678910try &#123; deletePage(); xxx(); yyy(); zzz();&#125; catch (Exception e) &#123; log(e-&gt;getMessage());&#125; try/catchä»£ç å—ä¸‘é™‹ä¸å ªï¼Œæ‰€ä»¥æœ€å¥½æŠŠtryå’Œ catchä»£ç å—çš„ä¸»ä½“æŠ½ç¦»å‡ºæ¥ï¼Œå•ç‹¬å½¢æˆå‡½æ•°ã€‚ 1234567try &#123; do();&#125; catch (Exception e) &#123; handle();&#125; ä¸è¦å†™é‡å¤ä»£ç  é‡å¤æ˜¯è½¯ä»¶ä¸­ä¸€åˆ‡é‚ªæ¶çš„æ ¹æºã€‚å½“ç®—æ³•æ”¹å˜æ—¶éœ€è¦ä¿®æ”¹å¤šå¤„åœ°æ–¹ã€‚ ç»“æ„åŒ–ç¼–ç¨‹ åªè¦å‡½æ•°ä¿æŒçŸ­å°ï¼Œå¶å°”å‡ºç°çš„returnã€breakã€continueè¯­å¥æ²¡æœ‰åå¤„ï¼Œç”šè‡³è¿˜æ¯”å•å…¥å•å‡ºåŸåˆ™æ›´å…·æœ‰è¡¨è¾¾åŠ›ã€‚gotoåªæœ‰åœ¨å¤§å‡½æ•°é‡Œæ‰æœ‰é“ç†ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨ã€‚ å¹¶ä¸éœ€è¦ä¸€å¼€å§‹å°±æŒ‰ç…§è¿™äº›è§„åˆ™å†™å‡½æ•°ï¼Œæ²¡äººåšå¾—åˆ°ã€‚æƒ³äº›ä»€ä¹ˆå°±å†™ä»€ä¹ˆï¼Œç„¶åå†æ‰“ç£¨è¿™äº›ä»£ç ï¼ŒæŒ‰ç…§è¿™äº›è§„åˆ™ç»„è£…å‡½æ•°ã€‚ æ³¨é‡Š è‹¥ç¼–ç¨‹è¯­è¨€è¶³å¤Ÿæœ‰è¡¨ç°åŠ›ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦æ³¨é‡Šï¼› æ³¨é‡Šæ€»æ˜¯ä¸€ç§å¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•æ‰¾åˆ°ä¸ç”¨æ³¨é‡Šå°±èƒ½è¡¨è¾¾è‡ªæˆ‘çš„æ–¹æ³•ï¼› ä»£ç åœ¨æ¼”åŒ–ï¼Œæ³¨é‡Šå´ä¸æ€»æ˜¯éšä¹‹å˜åŠ¨ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šä¸å‡†ç¡®ã€‚ ç”¨ä»£ç æ¥é˜è¿° åˆ›å»ºä¸€ä¸ªä¸æ³¨é‡Šæ‰€è¨€åŒä¸€äº‹ç‰©çš„å‡½æ•°å³å¯ï¼Œ 12// check to see if the employee is eligible for full benefits if ((employee.falgs &amp; HOURLY_FLAG) &amp;&amp; (employee.age &gt; 65)) åº”æ›¿æ¢ä¸º 1if (employee.isEligibleForFullBenefits()) å¥½æ³¨é‡Š æ³•å¾‹ä¿¡æ¯ï¼Œå¹¶ä¸”åªè¦æœ‰å¯èƒ½å°±æŒ‡å‘æ ‡å‡†è®¸å¯æˆ–è€…å¤–éƒ¨æ–‡æ¡£ï¼Œè€Œä¸æ˜¯æ”¾å…¨æ–‡ï¼› æä¾›åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚è§£é‡ŠæŸä¸ªæŠ½è±¡æ–¹æ³•çš„è¿”å›å€¼ï¼› å¯¹æ„å›¾çš„è§£é‡Šï¼Œååº”äº†ä½œè€…æŸä¸ªå†³å®šåé¢çš„æ„å›¾ï¼› é˜é‡Šã€‚æŠŠæŸäº›æ™¦æ¶©çš„å‚æ•°æˆ–è€…è¿”å›å€¼çš„æ„ä¹‰ç¿»è¯‘æˆå¯è¯»çš„å½¢å¼(æ›´å¥½çš„æ–¹æ³•æ˜¯è®©å®ƒä»¬è‡ªèº«å˜å¾—è¶³å¤Ÿæ¸…æ™°ï¼Œä½†æ˜¯ç±»ä¼¼æ ‡å‡†åº“çš„ä»£ç æˆ‘ä»¬æ— æ³•ä¿®æ”¹)ï¼› 1if (b.compareTo(a) == 1) //b &gt; a è­¦ç¤ºã€‚// don&#39;t run unless you have some time to killï¼› TODOæ³¨é‡Šï¼› æ”¾å¤§ ä¸€äº›çœ‹ä¼¼ä¸åˆç†ä¹‹ç‰©çš„é‡è¦æ€§ã€‚ åæ³¨é‡Š è‡ªè¨€è‡ªè¯­ï¼› å¤šä½™çš„æ³¨é‡Šã€‚æŠŠé€»è¾‘åœ¨æ³¨é‡Šé‡Œå†™ä¸€éä¸èƒ½æ¯”ä»£ç æä¾›æ›´å¤šä¿¡æ¯ï¼Œè¯»å®ƒä¸æ¯”è¯»ä»£ç ç®€å•ã€‚ä¸€ç›®äº†ç„¶çš„æˆå‘˜å˜é‡åˆ«åŠ æ³¨é‡Šï¼Œæ˜¾å¾—å¾ˆå¤šä½™ï¼› è¯¯å¯¼æ€§æ³¨é‡Šï¼› éµå¾ªè§„çŸ©çš„æ³¨é‡Šã€‚æ¯ä¸ªå‡½æ•°éƒ½åŠ æ³¨é‡Šã€æ¯ä¸ªå˜é‡éƒ½åŠ æ³¨é‡Šæ˜¯æ„šè ¢çš„ï¼› æ—¥å¿—å¼æ³¨é‡Šã€‚æœ‰äº†ä»£ç ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œä¸å¿…åœ¨æ–‡ä»¶å¼€å¤´ç»´æŠ¤ä¿®æ”¹æ—¶é—´ã€ä¿®æ”¹äººè¿™ç±»æ—¥å¿—å¼çš„æ³¨é‡Šï¼› èƒ½ç”¨å‡½æ•°æˆ–è€…å˜é‡è¡¨ç¤ºå°±åˆ«ç”¨æ³¨é‡Šï¼› 1234// does the module from the global list &lt;mod&gt; // depend on the subsystem we are part of?if (smodule.getDependSubsystems().contains(subSysMod.getSubSystem()) å¯ä»¥æ”¹ä¸ºï¼š 123ArrayList moduleDependees = smodule.getDependSubsystems();String ourSubSystem = subSysMod.getSubSystem();if (moduleDependees.contains(ourSubSystem)) ä½ç½®æ ‡è®°ã€‚æ ‡è®°å¤šäº†ä¼šè¢«æˆ‘ä»¬å¿½ç•¥æ‰ï¼› ///////////////////// Actions ////////////////////////// å³æ‹¬å·æ³¨é‡Šï¼› 123456789101112try &#123; while () &#123; if () &#123; ... &#125; // if ... &#125; // while ...&#125; // try å¦‚æœä½ æƒ³æ ‡è®°å³æ‹¬å·ï¼Œå…¶å®åº”è¯¥åšçš„æ˜¯ç¼©çŸ­å‡½æ•° ç½²å /* add by rick */ æºä»£ç æ§åˆ¶å·¥å…·ä¼šè®°ä½ä½ ï¼Œç½²åæ³¨é‡Šè·Ÿä¸ä¸Šä»£ç çš„æ¼”å˜ï¼› æ³¨é‡Šæ‰çš„ä»£ç ã€‚ä¼šå¯¼è‡´çœ‹åˆ°è¿™æ®µä»£ç å…¶ä»–äººä¸æ•¢åˆ é™¤ï¼Œä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥å¤§èƒ†åˆ é™¤éœ€è¦æ³¨é‡Šçš„ä»£ç ï¼› ä¿¡æ¯è¿‡å¤šã€‚åˆ«åœ¨æ³¨é‡Šä¸­æ·»åŠ æœ‰è¶£çš„å†å²è¯é¢˜æˆ–è€…æ— å…³çš„ç»†èŠ‚ï¼› æ²¡è§£é‡Šæ¸…æ¥šçš„æ³¨é‡Šã€‚æ³¨é‡Šçš„ä½œç”¨æ˜¯è§£é‡Šæœªèƒ½è‡ªè¡Œè§£é‡Šçš„ä»£ç ï¼Œå¦‚æœæ³¨é‡Šæœ¬èº«è¿˜éœ€è¦è§£é‡Šå°±å¤ªé—æ†¾äº†ï¼› çŸ­å‡½æ•°çš„å‡½æ•°å¤´æ³¨é‡Šã€‚ä¸ºçŸ­å‡½æ•°é€‰ä¸ªå¥½åå­—æ¯”å‡½æ•°å¤´æ³¨é‡Šè¦å¥½ï¼› éå…¬å…±APIå‡½æ•°çš„javadoc/phpdocæ³¨é‡Šã€‚ æ ¼å¼å‚ç›´æ ¼å¼ çŸ­æ–‡ä»¶æ¯”é•¿æ–‡ä»¶æ›´æ˜“äºç†è§£ã€‚å¹³å‡200è¡Œï¼Œæœ€å¤šä¸è¶…è¿‡500è¡Œçš„å•ä¸ªæ–‡ä»¶å¯ä»¥æ„é€ å‡ºè‰²çš„ç³»ç»Ÿï¼› åƒæŠ¥çº¸ä¸€æ ·æ’ç‰ˆï¼Œç”±ç•¥åŠè¯¦ï¼Œå±‚å±‚é€’è¿›ï¼› åŒºéš”: å°åŒ…å£°æ˜ã€å¯¼å…¥å£°æ˜ã€æ¯ä¸ªå‡½æ•°ä¹‹é—´ï¼Œéƒ½ç”¨ç©ºç™½è¡Œåˆ†éš”å¼€ï¼Œç©ºç™½è¡Œä¸‹é¢æ ‡è¯†ç€æ–°çš„ç‹¬ç«‹æ¦‚å¿µï¼Œè¡¨ç¤ºä¸€ä¸ªæ€è·¯çš„å¼€å§‹ é è¿‘: ç´§å¯†ç›¸å…³çš„ä»£ç åº”è¯¥äº’ç›¸é è¿‘ï¼Œä¾‹å¦‚ä¸€ä¸ªç±»é‡Œçš„å±æ€§ä¹‹é—´åˆ«ç”¨ç©ºç™½è¡Œéš”å¼€ï¼› 123456789101112131415161718192021public class ReporterConfig &#123; //The class name of the reporter listener private String m_className; //The properties of the reporter listener private List&lt;Property&gt; m_properties = new ArrayList&lt;Property&gt;(); public void addProperty(Property property) &#123; m_properties.add(property); &#125;&#125;///////////////////////å¯¹æ¯”////////////////////////////////////public class ReporterConfig &#123; private String m_className; private List&lt;Property&gt; m_properties = new ArrayList&lt;Property&gt;(); public void addProperty(Property property) &#123; m_properties.add(property); &#125;&#125; å˜é‡å£°æ˜åº”å°½å¯èƒ½é è¿‘å…¶ä½¿ç”¨ä½ç½®ï¼šå¾ªç¯ä¸­çš„æ§åˆ¶å˜é‡åº”è¯¥æ€»æ˜¯åœ¨å¾ªç¯è¯­å¥ä¸­å£°æ˜ï¼› æˆå‘˜å˜é‡åº”è¯¥æ”¾åœ¨ç±»çš„é¡¶éƒ¨å£°æ˜ï¼Œä¸è¦å››å¤„æ”¾ç½®ï¼› å¦‚æœæŸä¸ªå‡½æ•°è°ƒç”¨äº†å¦å¤–ä¸€ä¸ªï¼Œå°±åº”è¯¥æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬å¸Œæœ›åº•å±‚ç»†èŠ‚æœ€åå±•ç°å‡ºæ¥ï¼Œä¸ç”¨æ²‰æººäºç»†èŠ‚ï¼Œæ‰€ä»¥è°ƒç”¨è€…å°½å¯èƒ½æ”¾åœ¨è¢«è°ƒç”¨è€…ä¹‹ä¸Šï¼› æ‰§è¡ŒåŒä¸€åŸºç¡€ä»»åŠ¡çš„å‡ ä¸ªå‡½æ•°åº”è¯¥æ”¾åœ¨ä¸€èµ·ã€‚ æ°´å¹³æ ¼å¼ ä¸€è¡Œä»£ç ä¸å¿…æ­»å®ˆ80å­—ç¬¦çš„ä¸Šé™ï¼Œå¶å°”åˆ°è¾¾100å­—ç¬¦ä¸è¶…è¿‡120å­—ç¬¦å³å¯ï¼› åŒºéš”ä¸é è¿‘: ç©ºæ ¼å¼ºè°ƒå·¦å³ä¸¤è¾¹çš„åˆ†å‰²ã€‚*èµ‹å€¼è¿ç®—ç¬¦ä¸¤è¾¹åŠ ç©ºæ ¼ï¼Œå‡½æ•°åä¸å·¦åœ†æ‹¬å·ä¹‹é—´ä¸åŠ ç©ºæ ¼ï¼Œä¹˜æ³•è¿ç®—ç¬¦åœ¨ä¸åŠ å‡æ³•è¿ç®—ç¬¦ç»„åˆæ—¶ä¸ç”¨åŠ ç©ºæ ¼(ab - c)**ï¼› ä¸å¿…æ°´å¹³å¯¹é½ã€‚ä¾‹å¦‚å£°æ˜ä¸€å †æˆå‘˜å˜é‡æ—¶ï¼Œå„è¡Œä¸ç”¨æ¯ä¸€ä¸ªå•è¯éƒ½å¯¹é½ï¼Œä»£ç è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·é€šå¸¸ä¼šæŠŠè¿™ç±»å¯¹é½æ¶ˆé™¤æ‰ï¼› 1234567public class FitNesseExpediter implements ResponseSender&#123; private Socket socket; private InputStream input; private OutputStream output; private Request request;&#125; çŸ­å°çš„ifã€whileã€å‡½æ•°é‡Œæœ€å¥½ä¹Ÿä¸è¦è¿åç¼©è¿›è§„åˆ™ï¼Œä¸è¦è¿™æ ·:if (xx == yy) z = 1ï¼› whileè¯­å¥ä¸ºç©ºï¼Œæœ€å¥½åˆ†è¡Œå†™åˆ†å·ï¼› 12while(1); å›¢é˜Ÿè§„åˆ™ å›¢é˜Ÿç»å¯¹ä¸è¦ç”¨å„ç§ä¸åŒçš„é£æ ¼æ¥ç¼–å†™æºä»£ç ï¼Œè¿™æ ·ä¼šå¢åŠ å…¶å¤æ‚åº¦ã€‚ å¯¹è±¡å’Œæ•°æ®ç»“æ„æ•°æ®æŠ½è±¡ å¯¹è±¡ï¼šæš´éœ²è¡Œä¸º (æ¥å£),éšè—æ•°æ® (ç§æœ‰å˜é‡) ï¼› æ•°æ®ç»“æ„ï¼šæ²¡æœ‰æ˜æ˜¾çš„è¡Œä¸º (æ¥å£),æš´éœ²æ•°æ®ã€‚å¦‚DTO(Data Transfer Objects)ã€Entityï¼› æ•°æ®ï¼Œå¯¹è±¡çš„åå¯¹ç§°æ€§ ä½¿ç”¨æ•°æ®ç»“æ„ä¾¿äºåœ¨ä¸æ”¹åŠ¨ç°åœ¨æ•°æ®ç»“æ„çš„å‰æä¸‹æ·»åŠ æ–°å‡½æ•°ï¼›ä½¿ç”¨å¯¹è±¡ä¾¿äºåœ¨ä¸æ”¹åŠ¨æ—¢æœ‰å‡½æ•°çš„å‰æä¸‹æ·»åŠ æ–°ç±»ï¼› ä½¿ç”¨æ•°æ®ç»“æ„éš¾ä»¥æ·»åŠ æ–°æ•°æ®ç»“æ„ï¼Œå› ä¸ºå¿…é¡»ä¿®æ”¹æ‰€æœ‰å‡½æ•°ï¼›ä½¿ç”¨å¯¹è±¡éš¾ä»¥æ·»åŠ æ–°å‡½æ•°ï¼Œå› ä¸ºå¿…é¡»ä¿®æ”¹æ‰€æœ‰ç±»ï¼› ä¸‡ç‰©çš†å¯¹è±¡åªæ˜¯ä¸ªä¼ è¯´ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šåœ¨ç®€å•æ•°æ®ç»“æ„ä¸Šåšä¸€äº›è¿‡ç¨‹å¼çš„æ“ä½œã€‚ Law of Demeter æ¨¡å—ä¸åº”è¯¥äº†è§£å®ƒæ‰€æ“ä½œå¯¹è±¡çš„å†…éƒ¨æƒ…å½¢ï¼› class Cçš„æ–¹æ³•fåªåº”è¯¥è°ƒç”¨ä»¥ä¸‹å¯¹è±¡çš„æ–¹æ³•ï¼š C åœ¨æ–¹æ³•fé‡Œåˆ›å»ºçš„å¯¹è±¡ ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•fçš„å¯¹è±¡ CæŒæœ‰çš„å¯¹è±¡ æ–¹æ³•ä¸åº”è°ƒç”¨ ç”±ä»»ä½•å‡½æ•°è¿”å›çš„å¯¹è±¡ çš„æ–¹æ³•ã€‚ä¸‹é¢çš„ä»£ç è¿åäº† demeter å®šå¾‹ï¼š 1final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath(); ä¸€ä¸ªç®€å•ä¾‹å­æ˜¯ï¼Œäººå¯ä»¥å‘½ä»¤ä¸€æ¡ç‹—è¡Œèµ°ï¼ˆwalkï¼‰ï¼Œä½†æ˜¯ä¸åº”è¯¥ç›´æ¥æŒ‡æŒ¥ç‹—çš„è…¿è¡Œèµ°ï¼Œåº”è¯¥ç”±ç‹—å»æŒ‡æŒ¥æ§åˆ¶å®ƒçš„è…¿å¦‚ä½•è¡Œèµ°ã€‚ é”™è¯¯å¤„ç† é”™è¯¯å¤„ç†å¾ˆé‡è¦ï¼Œä½†æ˜¯ä¸èƒ½å‡Œä¹±åˆ°æ‰“ä¹±ä»£ç é€»è¾‘ã€‚ ä½¿ç”¨å¼‚å¸¸è€Œä¸æ˜¯è¿”å›é”™è¯¯ç  å¦‚æœä½¿ç”¨é”™è¯¯ç ï¼Œè°ƒç”¨è€…å¿…é¡»åœ¨å‡½æ•°è¿”å›æ—¶ç«‹åˆ»å¤„ç†é”™è¯¯ï¼Œä½†è¿™å¾ˆå®¹æ˜“è¢«æˆ‘ä»¬å¿˜è®°ï¼› é”™è¯¯ç é€šå¸¸ä¼šå¯¼è‡´åµŒå¥—if elseã€‚ å…ˆå†™ try-catch è¯­å¥ å½“ç¼–å†™å¯èƒ½ä¼šæŠ›å¼‚å¸¸çš„ä»£ç æ—¶ï¼Œå…ˆå†™å¥½try-catchå†å¾€é‡Œå †é€»è¾‘ã€‚ åœ¨ catch é‡Œå°½å¯èƒ½çš„è®°å½• åœ¨catché‡Œå°½å¯èƒ½çš„è®°å½•é”™è¯¯ä¿¡æ¯ï¼Œè®°å½•å¤±è´¥çš„æ“ä½œä»¥åŠå¤±è´¥çš„ç±»å‹ ä¾è°ƒç”¨è€…å®šä¹‰å¼‚å¸¸ç±» å¯¹é”™è¯¯åˆ†ç±»æœ‰å¾ˆå¤šæ–¹å¼ã€‚å¯ä»¥ä¾å…¶æ¥æºåˆ†ç±»ï¼šæ˜¯æ¥è‡ªç»„ä»¶è¿˜æ˜¯å…¶ä»–åœ°æ–¹ï¼Ÿæˆ–ä¾å…¶ç±»å‹åˆ†ç±»ï¼šæ˜¯è®¾å¤‡é”™è¯¯ã€ç½‘ç»œé”™è¯¯è¿˜æ˜¯ç¼–ç¨‹é”™è¯¯ï¼Ÿ åˆ«è¿”å› null å€¼ è¿”å›nullå€¼åªè¦ä¸€å¤„æ²¡æ£€æŸ¥nullï¼Œåº”ç”¨ç¨‹åºå°±ä¼šå¤±è´¥ï¼› å½“æƒ³è¿”å›nullå€¼çš„æ—¶å€™ï¼Œå¯ä»¥è¯•è¯•æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–è€…è¿”å›ç‰¹ä¾‹æ¨¡å¼çš„å¯¹è±¡ã€‚ åˆ«ä¼ é€’ null å€¼ åœ¨æ–¹æ³•ä¸­ä¼ é€’nullå€¼æ˜¯ä¸€ç§ç³Ÿç³•çš„åšæ³•ï¼Œåº”è¯¥å°½é‡é¿å…ï¼› åœ¨æ–¹æ³•é‡Œç”¨ifæˆ–assertè¿‡æ»¤nullå€¼å‚æ•°ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šå‡ºç°è¿è¡Œæ—¶é”™è¯¯ï¼Œæ²¡æœ‰è‰¯å¥½çš„åŠæ³•å¯¹ä»˜è°ƒåŠ¨è€…æ„å¤–ä¼ å…¥çš„nullå€¼ï¼Œæ°å½“çš„åšæ³•å°±æ˜¯ç¦æ­¢ä¼ å…¥nullå€¼ã€‚ è¾¹ç•Œå°†ç¬¬ä¸‰æ–¹ä»£ç å¹²å‡€åˆ©è½åœ°æ•´åˆè¿›è‡ªå·±çš„ä»£ç ä¸­ é¿å…å…¬å…± API è¿”å›è¾¹ç•Œæ¥å£ï¼Œæˆ–è€…å°†è¾¹ç•Œæ¥å£ä½œä¸ºå‚æ•°ä¼ é€’ç»™ APIã€‚å°†è¾¹ç•Œä¿ç•™åœ¨è¿‘äº²ç±»ä¸­ï¼› ä¸è¦åœ¨ç”Ÿäº§ä»£ç ä¸­è¯•éªŒæ–°ä¸œè¥¿ï¼Œè€Œæ˜¯ç¼–å†™æµ‹è¯•æ¥ç†è§£ç¬¬ä¸‰æ–¹ä»£ç ï¼› é¿å…æˆ‘ä»¬çš„ä»£ç è¿‡å¤šåœ°äº†è§£ç¬¬ä¸‰æ–¹ä»£ç ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚ å­¦ä¹ æ€§æµ‹è¯•æ˜¯ä¸€ç§ç²¾ç¡®è¯•éªŒï¼Œå¸®åŠ©æˆ‘ä»¬å¢è¿›å¯¹ API çš„ç†è§£ã€‚ å•å…ƒæµ‹è¯•TDD(Test-driven development) ä¸‰å®šå¾‹ First Law: You may not write production code until you have written a failing unit test. Second Law: You may not write more of a unit test than is sufficient to fail, and not compiling is failing. Third Law: You may not write more production code than is sufficient to pass the currently failing test. ä¿æŒæµ‹è¯•æ•´æ´ è„æµ‹è¯•ç­‰åŒäºæ²¡æµ‹è¯•ï¼Œæµ‹è¯•ä»£ç è¶Šè„ç”Ÿäº§ä»£ç è¶Šéš¾ä¿®æ”¹ï¼› æµ‹è¯•ä»£ç å’Œç”Ÿäº§ä»£ç ä¸€æ ·é‡è¦ï¼› æ•´æ´çš„æµ‹è¯•ä»£ç æœ€åº”å…·æœ‰çš„è¦ç´ æ˜¯ï¼šæ•´æ´æ€§ã€‚æµ‹è¯•ä»£ç ä¸­ä¸è¦æœ‰å¤§é‡é‡å¤ä»£ç çš„è°ƒç”¨ã€‚ æ¯ä¸ªæµ‹è¯•ä¸€ä¸ªæ–­è¨€ æ¯ä¸ªæµ‹è¯•å‡½æ•°æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ–­è¨€è¯­å¥ï¼› æ¯ä¸ªæµ‹è¯•å‡½æ•°ä¸­åªæµ‹è¯•ä¸€ä¸ªæ¦‚å¿µã€‚ æ•´æ´çš„æµ‹è¯•ä¾èµ–äº FIRST è§„åˆ™ fast: æµ‹è¯•ä»£ç åº”è¯¥èƒ½å¤Ÿå¿«é€Ÿè¿è¡Œï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é¢‘ç¹è¿è¡Œå®ƒï¼› independent: æµ‹è¯•åº”è¯¥ç›¸äº’ç‹¬ç«‹ï¼ŒæŸä¸ªæµ‹è¯•ä¸åº”è¯¥ä¾èµ–ä¸Šä¸€ä¸ªæµ‹è¯•çš„ç»“æœï¼Œæµ‹è¯•å¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿›è¡Œï¼› repeatable: æµ‹è¯•åº”å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸­é€šè¿‡ï¼› self-validating: æµ‹è¯•åº”è¯¥æœ‰boolå€¼è¾“å‡ºï¼Œä¸åº”é€šè¿‡æŸ¥çœ‹æ—¥å¿—æ¥ç¡®è®¤æµ‹è¯•ç»“æœï¼Œä¸åº”æ‰‹å·¥å¯¹æ¯”ä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶ç¡®è®¤æµ‹è¯•ç»“æœï¼› timely: åŠæ—¶ç¼–å†™æµ‹è¯•ä»£ç ã€‚å•å…ƒæµ‹è¯•åº”è¯¥åœ¨ç”Ÿäº§ä»£ç ä¹‹å‰ç¼–å†™ï¼Œå¦åˆ™ç”Ÿäº§ä»£ç ä¼šå˜å¾—éš¾ä»¥æµ‹è¯•ã€‚ ç±»ç±»çš„ç»„ç»‡ä»¥ä¸‹é’ˆå¯¹ JAVA è¯­è¨€ï¼Œå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼Œå˜é‡åœ¨å‰ï¼Œæ–¹æ³•åœ¨åï¼Œå…¬æœ‰åœ¨å‰ï¼Œç§æœ‰åœ¨åã€‚ å…¬å…±é™æ€å¸¸é‡ ç§æœ‰é™æ€å˜é‡ ç§æœ‰å®ä½“å˜é‡ å…¬å…±å‡½æ•° ç§æœ‰å·¥å…·å‡½æ•° å¦‚æœæµ‹è¯•éœ€è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°æˆ–å˜é‡ï¼Œå¯ä»¥è®¾ä¸ºä¿æŠ¤ç±»å‹ã€‚ ç±»åº”è¯¥çŸ­å° å¯¹äºå‡½æ•°æˆ‘ä»¬è®¡ç®—ä»£ç è¡Œæ•°è¡¡é‡å¤§å°ï¼Œå¯¹äºç±»æˆ‘ä»¬ä½¿ç”¨æƒè´£æ¥è¡¡é‡ï¼› ç±»çš„åç§°åº”å½“æè¿°å…¶æƒè´£ã€‚ç±»çš„å‘½åæ˜¯åˆ¤æ–­ç±»é•¿åº¦çš„ç¬¬ä¸€ä¸ªæ‰‹æ®µï¼Œå¦‚æœæ— æ³•ä¸ºæŸä¸ªç±»å‘½ä»¥å‡†ç¡®çš„åç§°ï¼Œè¿™ä¸ªç±»å°±å¤ªé•¿äº†ã€‚ç±»ååŒ…å«æ¨¡ç³Šçš„è¯æ±‡ï¼Œå¦‚Processorã€Managerã€Superï¼Œè¿™ç§ç°è±¡å°±è¯´æ˜æœ‰ä¸æ°å½“çš„æƒè´£èšé›†æƒ…å†µï¼› å•ä¸€æƒè´£åŸåˆ™ï¼ˆSingle Responsibility Principleï¼ŒSRPï¼‰: ç±»æˆ–è€…æ¨¡å—åº”è¯¥æœ‰ä¸€ä¸ªæƒè´£â€”â€”åªæœ‰ä¸€æ¡ä¿®æ”¹çš„ç†ç”± (A class should have only one reason to change.)ï¼› ç³»ç»Ÿåº”è¯¥ç”±è®¸å¤šçŸ­å°çš„ç±»è€Œä¸æ˜¯å°‘é‡å·¨å¤§çš„ç±»ç»„æˆï¼› ç±»åº”è¯¥åªæœ‰å°‘é‡çš„å®ä½“å˜é‡ï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­æ¯ä¸ªå®ä½“å˜é‡éƒ½è¢«æ¯ä¸ªæ–¹æ³•æ‰€ä½¿ç”¨ï¼Œåˆ™è¯´æ˜è¯¥ç±»å…·æœ‰æœ€å¤§çš„å†…èšæ€§ã€‚åˆ›å»ºæœ€å¤§åŒ–çš„å†…èšç±»ä¸å¤ªç°å®ï¼Œä½†æ˜¯åº”è¯¥ä»¥é«˜å†…èšä¸ºç›®æ ‡ï¼Œå†…èšæ€§è¶Šé«˜è¯´æ˜ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡äº’ç›¸ä¾èµ–ã€äº’ç›¸ç»“åˆå½¢æˆä¸€ä¸ªé€»è¾‘æ•´ä½“ï¼› ä¿æŒå†…èšæ€§å°±ä¼šå¾—åˆ°è®¸å¤šçŸ­å°çš„ç±»ã€‚å¦‚æœä½ æƒ³æŠŠä¸€ä¸ªå¤§å‡½æ•°çš„æŸä¸€å°éƒ¨åˆ†æ‹†è§£æˆå•ç‹¬çš„å‡½æ•°ï¼Œæ‹†è§£å‡ºçš„å‡½æ•°ä½¿ç”¨äº†å¤§å‡½æ•°ä¸­çš„ 4 ä¸ªå˜é‡ï¼Œä¸å¿…å°† 4 ä¸ªå˜é‡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°æ–°å‡½æ•°é‡Œï¼Œä»…éœ€å°†è¿™ 4 ä¸ªå˜é‡æå‡ä¸ºå¤§å‡½æ•°æ‰€åœ¨ç±»çš„å®ä½“å˜é‡ï¼Œä½†æ˜¯è¿™ä¹ˆåšå´å› ä¸ºå®ä½“å˜é‡çš„å¢å¤šè€Œä¸§å¤±äº†ç±»çš„å†…èšæ€§ï¼Œæ›´å¥½å¤šåšæ³•æ˜¯è®©è¿™ 4 ä¸ªå˜é‡æ‹†å‡ºæ¥ï¼Œæ‹¥æœ‰è‡ªå·±çš„ç±»ã€‚å°†å¤§å‡½æ•°æ‹†è§£æˆå°å‡½æ•°å¾€å¾€æ˜¯å°†ç±»æ‹†åˆ†ä¸ºå°ç±»çš„æ—¶æœºã€‚ ä¸ºäº†ä¿®æ”¹è€Œç»„ç»‡ ç±»åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ (å¼€æ”¾é—­åˆåŸåˆ™)ï¼› åœ¨ç†æƒ³ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ‰©å±•ç³»ç»Ÿè€Œéä¿®æ”¹ç°æœ‰ä»£ç æ¥æ·»åŠ æ–°ç‰¹æ€§ã€‚ ç³»ç»Ÿå°†ç³»ç»Ÿçš„æ„é€ ä¸ä½¿ç”¨åˆ†å¼€ è½¯ä»¶ç³»ç»Ÿåº”å°†èµ·å§‹è¿‡ç¨‹å’Œä¹‹åçš„è¿è¡Œé€»è¾‘åˆ†å¼€ã€‚ åˆ†è§£ main å°†å…¨éƒ¨æ„é€ è¿‡ç¨‹æ¬è¿åˆ° mainæˆ–è€…è¢«ç§°ä¹‹ä¸ºmainçš„æ¨¡å—ä¸­ï¼Œæ¶‰åŠç³»ç»Ÿå…¶ä½™éƒ¨åˆ†æ—¶ï¼Œå‡è®¾æ‰€æœ‰å¯¹è±¡éƒ½å·²ç»æ­£ç¡®æ„é€ ï¼› ä¾èµ–æ³¨å…¥ (DI)ï¼Œæ§åˆ¶åè½¬ (IoC) æ˜¯åˆ†ç¦»æ„é€ ä¸ä½¿ç”¨çš„å¼ºå¤§æœºåˆ¶ã€‚ è¿­ä»£è¡¨è¾¾åŠ› ä½œè€…æŠŠä»£ç å†™çš„è¶Šæ¸…æ™°ï¼Œå…¶ä»–äººç†è§£ä»£ç å°±è¶Šå¿«ï¼› å¤ªå¤šæ—¶å€™æˆ‘ä»¬æ·±å…¥äºè¦è§£å†³çš„é—®é¢˜ä¸­ï¼Œå†™å‡ºèƒ½å·¥ä½œçš„ä»£ç ä¹‹åï¼Œå°±è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªé—®é¢˜ä¸Šï¼Œæ²¡æœ‰ä¸‹è¶³åŠŸå¤«è°ƒæ•´ä»£ç è®©åæ¥è€…æ˜“äºé˜…è¯»ã€‚å¤šå°‘å°Šé‡ä¸€ä¸‹æˆ‘ä»¬çš„æ‰‹è‰ºï¼ŒèŠ±ä¸€ç‚¹ç‚¹æ—¶é—´åœ¨æ¯ä¸ªå‡½æ•°å’Œç±»ä¸Šã€‚ å°½å¯èƒ½å°‘çš„ç±»å’Œæ–¹æ³• ä¸ºäº†ä¿æŒç±»å’Œå‡½æ•°çš„çŸ­å°ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ—©å‡ºå¤ªå¤šç»†å°çš„ç±»å’Œæ–¹æ³•ï¼› ç±»å’Œæ–¹æ³•æ•°é‡å¤ªå¤šï¼Œæœ‰æ—¶æ˜¯ç”±æ¯«æ— æ„ä¹‰çš„æ•™æ¡ä¸»ä¹‰å¯¼è‡´çš„ã€‚ ä»¥ä¸Š 4 æ¡è§„åˆ™ä¼˜å…ˆçº§ä¾æ¬¡é€’å‡ã€‚é‡è¦çš„æ˜¯æµ‹è¯•ã€æ¶ˆé™¤é‡å¤ã€è¡¨è¾¾æ„å›¾å¹¶å‘ç¼–ç¨‹ä¸ºä»€ä¹ˆè¦å¹¶å‘ç¼–ç¨‹ å¹¶å‘æ€»èƒ½æ”¹è¿›æ€§èƒ½ï¼› ç¼–å†™å¹¶å‘ç¨‹åºæ— éœ€ä¿®æ”¹è®¾è®¡ï¼› åœ¨é‡‡ç”¨Webæˆ–EJBå®¹å™¨çš„æ—¶å€™ï¼Œç†è§£å¹¶å‘é—®é¢˜å¹¶ä¸é‡è¦ã€‚ é˜²å¾¡å¹¶å‘ä»£ç é—®é¢˜çš„åŸåˆ™ä¸æŠ€å·§ éµå¾ªå•ä¸€èŒè´£åŸåˆ™ã€‚åˆ†ç¦»å¹¶å‘ä»£ç ä¸éå¹¶å‘ä»£ç ï¼› é™åˆ¶ä¸´ç•ŒåŒºæ•°é‡ã€é™åˆ¶å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼› é¿å…ä½¿ç”¨å…±äº«æ•°æ®ï¼Œä½¿ç”¨å¯¹è±¡çš„å‰¯æœ¬ï¼› çº¿ç¨‹å°½å¯èƒ½åœ°ç‹¬ç«‹ï¼Œä¸ä¸å…¶ä»–çº¿ç¨‹å…±äº«æ•°æ®ã€‚","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://example.com/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"tags":[]},{"title":"Git-git pull ä¸ git pull --rebase çš„åŒºåˆ«","slug":"Git-git-pullä¸git-pull-rebaseçš„åŒºåˆ«","date":"2021-11-29T08:09:12.000Z","updated":"2022-10-15T03:14:29.209Z","comments":true,"path":"2021/11/29/Git-git-pullä¸git-pull-rebaseçš„åŒºåˆ«/","link":"","permalink":"http://example.com/2021/11/29/Git-git-pull%E4%B8%8Egit-pull-rebase%E7%9A%84%E5%8C%BA%E5%88%AB/","excerpt":"","text":"12git pull == git fetch + git mergegit pull --rebase == git fetch + git rebase æ‹†è§£æ¥çœ‹è¿™ä¸¤ä¸ªå‘½ä»¤å°±æ˜¯åœ¨æ‹‰å–è¿œç«¯ä»£ç åï¼Œæ˜¯åˆå¹¶è¿˜æ˜¯è¿›è¡Œå˜åŸºæ“ä½œã€‚ å‡è®¾å½“å‰æœ‰ä¸‰ä¸ªæäº¤A,B,Cï¼Œå¹¶ä¸”åˆ†æ”¯featureéƒ½ä¸è¿œç¨‹ä»£ç åŒæ­¥ã€‚ æˆ‘ä»¬åœ¨featureä¸Šåšäº†ä¸€äº›ä¿®æ”¹ï¼Œå¹¶äº§ç”Ÿäº†Eæäº¤ï¼Œè¿œç¨‹ä¹Ÿæœ‰ç”¨æˆ·è¿›è¡Œäº†æ›´æ–°åˆ°äº†Dæäº¤ã€‚ æ­¤æ—¶æˆ‘ä»¬éœ€è¦git fetchè·å–æœ€æ–°çš„ä»£ç ï¼Œç„¶ågit mergeè§£å†³å†²çªåé‡æ–°git add git commitï¼Œå¾—åˆ°Fæäº¤ã€‚æœ€ågit pushå³å¯æˆåŠŸæ¨é€ï¼Œå¾—åˆ°å¦‚ä¸‹çš„å…³ç³» è€Œä½¿ç”¨git rebaseå°†ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤Fï¼ŒFçš„æ–‡ä»¶å†…å®¹å’Œä¸Šé¢Fçš„ä¸€æ ·ï¼Œä½†æˆ‘ä»¬å°† E æäº¤åºŸé™¤ï¼Œå½“å®ƒä¸å­˜åœ¨ï¼ˆå›¾ä¸­ç”¨è™šçº¿è¡¨ç¤ºï¼‰ã€‚ç”±äºè¿™ç§åˆ é™¤ï¼Œé¿å…äº†è±å½¢çš„äº§ç”Ÿï¼Œä¿æŒæäº¤æ›²çº¿ä¸ºç›´çº¿ã€‚ åœ¨rebaseçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶ä¹Ÿä¼šæœ‰å†²çªï¼Œè¿™æ—¶ Git ä¼šåœæ­¢rebaseå¹¶è®©ç”¨æˆ·å»è§£å†³å†²çªï¼Œè§£å†³å®Œå†²çªåï¼Œç”¨git addæ·»åŠ ä¿®æ”¹çš„æ–‡ä»¶ï¼Œç„¶åä¸ç”¨æ‰§è¡Œgit commitï¼Œç›´æ¥æ‰§è¡Œgit rebase --continueï¼Œè¿™æ · git ä¼šç»§ç»­ apply ä½™ä¸‹çš„è¡¥ä¸ã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[]},{"title":"Git åŒä¸€æ–‡ä»¶è¢«å¤šäººä¿®æ”¹äº†æ–‡ä»¶åè¯¥å¦‚ä½•å¤„ç†","slug":"GitåŒä¸€æ–‡ä»¶è¢«å¤šäººä¿®æ”¹äº†æ–‡ä»¶åè¯¥å¦‚ä½•å¤„ç†","date":"2021-11-28T13:55:24.000Z","updated":"2022-10-15T02:59:01.420Z","comments":true,"path":"2021/11/28/GitåŒä¸€æ–‡ä»¶è¢«å¤šäººä¿®æ”¹äº†æ–‡ä»¶åè¯¥å¦‚ä½•å¤„ç†/","link":"","permalink":"http://example.com/2021/11/28/Git%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E8%A2%AB%E5%A4%9A%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E6%96%87%E4%BB%B6%E5%90%8D%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","excerpt":"","text":"ç”¨æˆ·ä¸€ä¿®æ”¹äº†æ–‡ä»¶åï¼Œå¹¶æ¨é€åˆ°äº†è¿œç«¯ã€‚ç”¨æˆ·äºŒä¹Ÿä¿®æ”¹äº†æ–‡ä»¶åï¼Œåœ¨è¿›è¡Œæ¨é€æ—¶ï¼Œå°±ä¼šè¢«æ‹’ç»ã€‚ æ‹‰å–æœ€æ–°ä»£ç åå‘ç°æœ‰ç›¸åŒçš„æ–‡ä»¶ï¼Œåªæ˜¯æ–‡ä»¶åä¸åŒã€‚index1.htmå’Œindex2.htmä¸¤ä¸ªæ–‡ä»¶å†…å®¹æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ æŸ¥çœ‹å½“å‰çŠ¶æ€ï¼Œå¯çŸ¥æœ‰å…¶ä»–æƒ³æŠŠæ–‡ä»¶åä¿®æ”¹ä¸ºindex2.htmã€‚æ­¤æ—¶åªéœ€è¦æ ¹æ®æç¤ºï¼Œåˆ é™¤index.htmã€‚åå•†åå†³å®šä¿ç•™å“ªä¸€ä¸ªæ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬å†³å®šä¿ç•™index1.htmã€‚é‚£ä¹ˆåˆ é™¤index2.htmã€‚ æœ€ååœ¨commitä¸€æ¬¡ï¼Œå³å¯é¡ºåˆ©æ¨é€ã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"Git ä»–äººåŒæ—¶ä¿®æ”¹äº†æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹è¯¥å¦‚ä½•å¤„ç†","slug":"Gitä»–äººåŒæ—¶ä¿®æ”¹äº†æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹è¯¥å¦‚ä½•å¤„ç†","date":"2021-11-27T15:07:37.000Z","updated":"2022-10-15T03:14:29.227Z","comments":true,"path":"2021/11/27/Gitä»–äººåŒæ—¶ä¿®æ”¹äº†æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹è¯¥å¦‚ä½•å¤„ç†/","link":"","permalink":"http://example.com/2021/11/27/Git%E4%BB%96%E4%BA%BA%E5%90%8C%E6%97%B6%E4%BF%AE%E6%94%B9%E4%BA%86%E6%96%87%E4%BB%B6%E5%90%8D%E5%92%8C%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","excerpt":"","text":"ç”¨æˆ·ä¸€ä¿®æ”¹äº†æ–‡ä»¶åï¼Œå¹¶æäº¤è¿œç«¯ã€‚ ç”¨æˆ·äºŒä¿®æ”¹äº†æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿè¿›è¡Œäº†æ¨é€ï¼Œ å½“ç„¶ä¼šè¢«æ— æƒ…æ‹’ç»ï¼Œ è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿååˆ†ç®€å•ï¼ŒGit å¯ä»¥æ™ºèƒ½çš„æ„ŸçŸ¥åˆ°åªæ˜¯æ–‡ä»¶åè¢«ä¿®æ”¹ï¼Œåªéœ€è¦ä¸€ä¸ªgit pullå‘½ä»¤å°±å¯ä»¥è§£å†³ã€‚å¼¹å‡ºå¼¹çª—å¯ä»¥ç›´æ¥ä¿å­˜é€€å‡ºï¼Œé»˜è®¤ä¸å˜å°±è¡Œã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"Git ä¸åŒäººä¿®æ”¹äº†ç›¸åŒæ–‡ä»¶çš„ç›¸åŒåŒºåŸŸ","slug":"Gitä¸åŒäººä¿®æ”¹äº†ç›¸åŒæ–‡ä»¶çš„ç›¸åŒåŒºåŸŸ","date":"2021-11-27T14:13:28.000Z","updated":"2022-10-15T03:14:29.222Z","comments":true,"path":"2021/11/27/Gitä¸åŒäººä¿®æ”¹äº†ç›¸åŒæ–‡ä»¶çš„ç›¸åŒåŒºåŸŸ/","link":"","permalink":"http://example.com/2021/11/27/Git%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E7%9B%B8%E5%90%8C%E6%96%87%E4%BB%B6%E7%9A%84%E7%9B%B8%E5%90%8C%E5%8C%BA%E5%9F%9F/","excerpt":"","text":"ä¸åŒäººä¿®æ”¹äº†æ–‡ä»¶çš„ç›¸åŒåŒºåŸŸï¼Œå¦‚æœå‘è¿œç«¯æ¨é€ï¼Œè‚¯å®šä¼šè¢«æ‹’ç»ã€‚è¿™æ—¶å€™å°±éœ€è¦è§£å†³å†²çªï¼Œ é¦–å…ˆæ‹‰å–è¿œç«¯æœ€æ–°çš„ä»£ç ï¼Œä¼šæç¤ºæœ‰å†²çªçš„æ–‡ä»¶ï¼Œ æ‰“å¼€å†²çªçš„æ–‡ä»¶ï¼Œgit ä¼šå¯¹å†²çªåŒºåŸŸè¿›è¡Œæ ‡è®°ï¼Œ&lt;&lt;&lt;&lt;&lt;&lt;åˆ°======åŒºåŸŸè¡¨ç¤ºè¿œç«¯çš„ä»£ç ã€‚======åˆ°&gt;&gt;&gt;&gt;&gt;&gt;&gt;è¡¨ç¤ºæœ¬åœ°çš„ä»£ç ã€‚è¿™æ—¶å€™å°±éœ€è¦è‡ªå·±æ¥åˆ¤æ–­éœ€è¦å“ªäº›ä»£ç ï¼Œä¹Ÿå¯ä»¥å¢åˆ ä¸€äº›å†…å®¹ï¼Œä¿®æ”¹å®Œæˆåå°†è¿™äº›æ ‡è¯†ç¬¦å·åˆ é™¤ï¼Œç„¶åä¿å­˜é€€å‡ºã€‚ git statusæŸ¥çœ‹å½“å‰çŠ¶æ€ï¼Œæç¤ºè¿˜æœ‰æœªåˆå¹¶çš„è·¯å¾„ï¼Œéœ€è¦è¿›è¡Œcommitæ“ä½œã€‚ åŠæ—¶git pushå½“å‰ä»£ç ã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"Linux æ–‡ä»¶åˆ é™¤ä»ç„¶åœ¨ Trash ç›®å½•ä¸‹å ç”¨ç©ºé—´ï¼Œè¯¥å¦‚ä½•åˆ é™¤ Trash ä¸‹çš„æ–‡ä»¶","slug":"Linuxæ–‡ä»¶åˆ é™¤ä»ç„¶åœ¨Trashç›®å½•ä¸‹å ç”¨ç©ºé—´ï¼Œè¯¥å¦‚ä½•åˆ é™¤Trashä¸‹çš„æ–‡ä»¶","date":"2021-11-25T02:31:27.000Z","updated":"2022-10-15T03:14:29.326Z","comments":true,"path":"2021/11/25/Linuxæ–‡ä»¶åˆ é™¤ä»ç„¶åœ¨Trashç›®å½•ä¸‹å ç”¨ç©ºé—´ï¼Œè¯¥å¦‚ä½•åˆ é™¤Trashä¸‹çš„æ–‡ä»¶/","link":"","permalink":"http://example.com/2021/11/25/Linux%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4%E4%BB%8D%E7%84%B6%E5%9C%A8Trash%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%8D%A0%E7%94%A8%E7%A9%BA%E9%97%B4%EF%BC%8C%E8%AF%A5%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4Trash%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6/","excerpt":"","text":"ä¿ç•™ç°åœºæ¢ç©¶åŸå› æŸ¥é˜…äº†ä¸€ä¸ªç½‘ä¸Šçš„ç­”æ¡ˆï¼Œå¤§æ„å°±æ˜¯ï¼Œä½ åˆ é™¤äº†å±äºä½ çš„æ–‡ä»¶å¤¹ï¼Œä½†å…¶ä¸­åŒ…å«å±äºå¦ä¸€ä¸ªç”¨æˆ·çš„æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å¯èƒ½ä¼šå¡ä½ï¼Œå°±ä¼šåœ¨ Trash ç›®å½•é‡Œä¸ä¼šè¢«å½»åº•åˆ é™¤ã€‚ è§£å†³æ–¹æ³•1sudo rm -rv /home/&lt;your_username&gt;/.local/share/Trash/expunged/* PSï¼šå‘ç°ä¸€ä¸ªå¥½ç”¨çš„ç£ç›˜åˆ†æå·¥å…·ï¼ŒLinux å†…ç½®åº”ç”¨Disk Usage Analyzerã€‚æŒ‰Winé”®åæœç´¢æ¡†æœç´¢å³å¯æ‰“å¼€ã€‚ å›¾å½¢åŒ–çš„æ–¹å¼å¿«é€Ÿæ‰¾åˆ°å ç”¨ç©ºé—´è¾ƒå¤§çš„ç›®å½•ï¼Œæ–‡ä»¶ã€‚å¯ä»¥å³å‡»ç›´æ¥åˆ é™¤ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"Git å¦‚ä½•åˆå¹¶è¿ç»­çš„å¤šä¸ª commit","slug":"Gitå¦‚ä½•åˆå¹¶è¿ç»­çš„å¤šä¸ªcommit","date":"2021-11-24T15:18:49.000Z","updated":"2022-10-15T03:14:29.235Z","comments":true,"path":"2021/11/24/Gitå¦‚ä½•åˆå¹¶è¿ç»­çš„å¤šä¸ªcommit/","link":"","permalink":"http://example.com/2021/11/24/Git%E5%A6%82%E4%BD%95%E5%90%88%E5%B9%B6%E8%BF%9E%E7%BB%AD%E7%9A%84%E5%A4%9A%E4%B8%AAcommit/","excerpt":"","text":"ç¡®å®šéœ€è¦åˆå¹¶çš„commit å˜åŸºæ“ä½œï¼Œä»¥éœ€è¦åˆå¹¶çš„commitä¸‹æ–¹çš„ç»“ç‚¹ä¸ºåŸºå‡†ã€‚ äº¤äº’å¼å˜åŸºï¼Œsquashè¡¨ç¤ºåˆå¹¶åˆ°ä¸Šæ–¹commit ç¼–å†™åˆå¹¶commitçš„messageï¼Œä¿ç•™åŸå…ˆçš„ä¸å˜","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"Git ä¸åŒäººä¿®æ”¹äº†åŒä¸€æ–‡ä»¶çš„ä¸åŒåŒºåŸŸè¯¥å¦‚ä½•å¤„ç†","slug":"Gitä¸åŒäººä¿®æ”¹äº†åŒä¸€æ–‡ä»¶çš„ä¸åŒåŒºåŸŸè¯¥å¦‚ä½•å¤„ç†","date":"2021-11-23T14:49:46.000Z","updated":"2022-10-15T03:14:29.220Z","comments":true,"path":"2021/11/23/Gitä¸åŒäººä¿®æ”¹äº†åŒä¸€æ–‡ä»¶çš„ä¸åŒåŒºåŸŸè¯¥å¦‚ä½•å¤„ç†/","link":"","permalink":"http://example.com/2021/11/23/Git%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8D%E5%90%8C%E5%8C%BA%E5%9F%9F%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","excerpt":"","text":"git fetch git mergeæˆ–è€… git pull","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"Git ä¿®æ”¹è€æ—§ commit çš„ message","slug":"Gitä¿®æ”¹è€æ—§commitçš„message","date":"2021-11-22T14:50:25.000Z","updated":"2022-10-15T03:14:29.231Z","comments":true,"path":"2021/11/22/Gitä¿®æ”¹è€æ—§commitçš„message/","link":"","permalink":"http://example.com/2021/11/22/Git%E4%BF%AE%E6%94%B9%E8%80%81%E6%97%A7commit%E7%9A%84message/","excerpt":"","text":"ä»¥ä¸‹æ“ä½œä»…é™äºç»´æŠ¤è‡ªå·±çš„åˆ†æ”¯ï¼Œä¸å»ºè®®å¯¹å›¢é˜Ÿå…±äº«çš„ä»£ç è¿›è¡Œä¿®æ”¹ã€‚ ä»¥æœ€è¿‘ä¸‰æ¬¡æäº¤ä¸ºä¾‹ï¼Œå‡è®¾æƒ³è¦ä¿®æ”¹ç¬¬äºŒä¸ªæäº¤çš„messageã€‚å¯ä»¥ä½¿ç”¨git rebaseå‘½ä»¤ 1git rebase -i 27d2f -iäº¤äº’å¼å˜åŸº 27d2féœ€è¦æ”¹å˜messageçš„æäº¤çš„çˆ¶èŠ‚ç‚¹ å¼¹å‡ºé¡µé¢å¯ä»¥ä½¿ç”¨æä¾›çš„å‘½ä»¤è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚pickæ„æ€å°±æ˜¯æŒ‘é€‰éœ€è¦çš„commitã€‚æœ¬æ¬¡ä»»åŠ¡éœ€è¦ä¿®æ”¹messageï¼Œä»ä¸‹æ–¹å¸®åŠ©æ–‡æ¡£é‡Œå¯ä»¥æ‰¾åˆ°rewordå‘½ä»¤ï¼Œå¯ä»¥ä¿ç•™commitï¼Œåªä¿®æ”¹messageã€‚ ä¿å­˜é€€å‡ºåï¼Œä¼šå¼¹å‡ºå¦å¤–ä¸€ä¸ªç•Œé¢ã€‚ åœ¨è¿™é‡Œå°±å¯ä»¥çœŸæ­£ä¿®æ”¹éœ€è¦æ›´æ–°çš„messageã€‚ä¿å­˜é€€å‡ºå³å¯ã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"Git ä¿®æ”¹æœ€æ–° commit çš„ message","slug":"Gitä¿®æ”¹æœ€æ–°commitçš„message","date":"2021-11-22T14:44:45.000Z","updated":"2022-10-15T03:14:29.228Z","comments":true,"path":"2021/11/22/Gitä¿®æ”¹æœ€æ–°commitçš„message/","link":"","permalink":"http://example.com/2021/11/22/Git%E4%BF%AE%E6%94%B9%E6%9C%80%E6%96%B0commit%E7%9A%84message/","excerpt":"","text":"commitæäº¤åè§‰å¾—æè¿°ä¿¡æ¯ä¸å‡†ç¡®ï¼Œæƒ³é‡æ–°ä¿®æ”¹messageå†…å®¹ï¼Œè¯¥å¦‚ä½•æ“ä½œï¼Ÿ 1git commit --amend å¼¹å‡ºé¡µé¢å°±å’Œgit commitæ“ä½œæ—¶çš„ä¸€æ ·ï¼Œå°†å…¶æ”¹ä¸ºæ–°å†…å®¹å³å¯ã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"è§£å†³ C è¯­è¨€ undefined reference to pthread_join","slug":"è§£å†³Cè¯­è¨€undefined-reference-to-pthread-join","date":"2021-11-17T11:30:20.000Z","updated":"2022-10-15T03:14:29.796Z","comments":true,"path":"2021/11/17/è§£å†³Cè¯­è¨€undefined-reference-to-pthread-join/","link":"","permalink":"http://example.com/2021/11/17/%E8%A7%A3%E5%86%B3C%E8%AF%AD%E8%A8%80undefined-reference-to-pthread-join/","excerpt":"","text":"ä¿ç•™ç°åœºundefined reference to sleepåŒæ ·çš„é—®é¢˜ã€‚åœ¨ä½¿ç”¨ C è¯­è¨€çº¿ç¨‹å‡½æ•°æ—¶ï¼Œéœ€è¦åŒ…å«#include &lt;pthread&gt;ï¼Œç¼–è¯‘æ—¶å°±ä¼šæŠ¥è¿™ç§é”™è¯¯ã€‚ æ¢ç©¶åŸå› pthread åº“ä¸æ˜¯ Linux ç³»ç»Ÿé»˜è®¤çš„åº“ï¼Œè¿æ¥æ—¶éœ€è¦ä½¿ç”¨é™æ€åº“ libpthread.aï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨pthread_create()åˆ›å»ºçº¿ç¨‹ï¼Œä»¥åŠè°ƒç”¨pthread_atfork()å‡½æ•°å»ºç«‹forkå¤„ç†ç¨‹åºæ—¶ï¼Œéœ€è¦é“¾æ¥è¯¥åº“ã€‚ è§£å†³æ–¹æ³•1gcc thread.c -o thread -lpthread å¦‚æœæ˜¯Makefileé…ç½®çš„ç¼–è¯‘æ¡ä»¶ï¼Œåœ¨Makefileæ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹ï¼š 1CFLAGS += -lpthread","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"è§£å†³ QT ç‚¹å‡»æŒ‰é’®æ— å“åº”","slug":"è§£å†³QTç‚¹å‡»æŒ‰é’®æ— å“åº”","date":"2021-11-16T09:42:47.000Z","updated":"2022-10-15T03:14:29.830Z","comments":true,"path":"2021/11/16/è§£å†³QTç‚¹å‡»æŒ‰é’®æ— å“åº”/","link":"","permalink":"http://example.com/2021/11/16/%E8%A7%A3%E5%86%B3QT%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%E6%97%A0%E5%93%8D%E5%BA%94/","excerpt":"","text":"ä¿ç•™ç°åœºåœ¨è¿è¡Œä¸­çš„ç•Œé¢ä¸Šç‚¹å‡»æŒ‰é’®æ²¡æœ‰æ•ˆæœï¼Œåƒæ˜¯æŒ‰é’®ä¸Šå±‚æœ‰å…¶ä»–é®ç›–å±‚ã€‚ æ¢ç©¶åŸå› widgetçš„çˆ¶æ§ä»¶ä¸Šåˆæ·»åŠ äº†å…¶ä»–Widgetï¼Œè¦†ç›–åœ¨äº†æŒ‰é’®ä¸Šï¼Œå› æ­¤æ— æ³•ç‚¹å‡»ã€‚é€šè¿‡newå¾—åˆ°çš„æ§ä»¶ï¼Œé»˜è®¤æ˜¾ç¤ºåœ¨æ¯”å®ƒnewçš„æ—©çš„æ§ä»¶ä¸Šé¢ã€‚ è§£å†³æ–¹æ³•123// å°†æœ‰æŒ‰é’®çš„é‚£ä¸€å±‚widgetç½®äºä¸Šå±‚widget-&gt;raise();","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"è§£å†³ QT åœ¨æ„é€ å‡½æ•°ä¸­å†™çš„æ§ä»¶ä¸æ˜¾ç¤ºçš„é—®é¢˜","slug":"è§£å†³QTåœ¨æ„é€ å‡½æ•°ä¸­å†™çš„æ§ä»¶ä¸æ˜¾ç¤ºçš„é—®é¢˜","date":"2021-11-16T08:15:26.000Z","updated":"2022-10-15T03:14:29.829Z","comments":true,"path":"2021/11/16/è§£å†³QTåœ¨æ„é€ å‡½æ•°ä¸­å†™çš„æ§ä»¶ä¸æ˜¾ç¤ºçš„é—®é¢˜/","link":"","permalink":"http://example.com/2021/11/16/%E8%A7%A3%E5%86%B3QT%E5%9C%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E5%86%99%E7%9A%84%E6%8E%A7%E4%BB%B6%E4%B8%8D%E6%98%BE%E7%A4%BA%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"","text":"ä¿ç•™ç°åœºåœ¨æ–°çª—å£ä¸­çš„æ„é€ å‡½æ•°ä¸­æ·»åŠ æ§ä»¶è¿è¡Œåå´æ²¡æœ‰æ˜¾ç¤º æ¢ç©¶åŸå›  æ–°å»ºçš„å·¥ç¨‹å¸ˆ MainWindow å­ç±»å·¥ç¨‹ï¼Œæ²¡æœ‰è®¾ç½®çˆ¶çª—å£ã€‚ æ²¡æœ‰å°†æ§ä»¶çš„çˆ¶çª—å£è®¾ç½®æˆè‡ªå·±å®šä¹‰çš„ widgetã€‚ 12345678910#include&lt;QMainWindow&gt; QMainWindow::QMainWindow(QMainWindow*parent) : QMainWindow(parent), ui(new Ui::QMainWindow)&#123; ui-&gt;setupUi(this); QPushButton* button_1 = new QPushButton(&quot;add&quot;); QPushButton* button_1 = new QPushButton(&quot;del&quot;);&#125; è§£å†³æ–¹æ³•æ–¹æ³• 1ï¼šç»™æŒ‰é’®æ§ä»¶è®¾ç½®çˆ¶çª—å£ï¼šQWidgetï¼Œå¹¶ä¸”æŠŠæŒ‰é’®æ·»åŠ åˆ°çˆ¶çª—å£ä¸­ã€‚ 123456789101112131415161718#include&lt;QMainWindow&gt;#include&lt;QPushButton&gt;#include&lt;QHBoxLayout&gt; QMainWindow::QMainWindow(QMainWindow*parent) : QMainWindow(parent), ui(new Ui::QMainWindow)&#123; ui-&gt;setupUi(this); QWidget* w = new QWidget(); this-&gt;setCentralWidget(w); QHBoxLayout* hLayout = new QHBoxLayout(); QPushButton* button_1 = new QPushButton(&quot;add&quot;); QPushButton* button_1 = new QPushButton(&quot;del&quot;); hLayout-&gt;addWidget(button_1); hLayout-&gt;addWidget(button_2); w-&gt;setLayout(hLayout);&#125; æ–¹æ³• 2ï¼šæ‰‹åŠ¨æŒ‡å®šçˆ¶çª—å£ 123456789101112131415161718#include&lt;QMainWindow&gt;#include&lt;QPushButton&gt;#include&lt;QHBoxLayout&gt; QMainWindow::QMainWindow(QMainWindow*parent) : QMainWindow(parent), ui(new Ui::QMainWindow)&#123; ui-&gt;setupUi(this); QPushButton* button_1 = new QPushButton(&quot;add&quot;); QPushButton* button_1 = new QPushButton(&quot;del&quot;); button_1-&gt;setParent(this); button_2-&gt;setParent(this); button_2-&gt;move(300,100); &#125;","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"QWidget ä¸­ update ä¸æ‰§è¡Œ paintEvent","slug":"è§£å†³QWidgetä¸­updateä¸æ‰§è¡ŒpaintEvent","date":"2021-11-15T10:04:50.000Z","updated":"2022-10-15T03:14:29.832Z","comments":true,"path":"2021/11/15/è§£å†³QWidgetä¸­updateä¸æ‰§è¡ŒpaintEvent/","link":"","permalink":"http://example.com/2021/11/15/%E8%A7%A3%E5%86%B3QWidget%E4%B8%ADupdate%E4%B8%8D%E6%89%A7%E8%A1%8CpaintEvent/","excerpt":"","text":"ä¿ç•™ç°åœºæ‰‹åŠ¨æ‰§è¡Œupdate()æˆ–è€…repaint()éƒ½ä¸èƒ½æ‰§è¡ŒpaintEventå‡½æ•°ã€‚ æ¢ç©¶åŸå› å¦‚æœæ˜¯ä»£ç newå‡ºæ¥çš„æ§ä»¶ï¼Œæ£€æŸ¥æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºï¼Œæ¯”å¦‚æœ‰æ²¡æœ‰åŠ å…¥åˆ°layoutä¸­ã€‚æˆ–è€…æœ‰æ²¡æœ‰è®¾ç½®çˆ¶çª—å£ï¼ˆå¯èƒ½è¢«å…¶ä»–ç©ºé—´é®æŒ¡ï¼‰ã€‚ æ£€æŸ¥æ§ä»¶widthæˆ–è€…heightå¤§å°æ˜¯å¦ä¸ä¸º 0ã€‚å¦‚æœä¸º 0ï¼Œä¹Ÿä¸ä¼šå‡ºå‡ºå‘paintEventã€‚ è§£å†³æ–¹æ³•å‚è€ƒ QT åœ¨æ„é€ å‡½æ•°ä¸­å†™çš„æ§ä»¶ä¸æ˜¾ç¤º","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"è§£å†³ C++ä¸­ vector å£°æ˜é”™è¯¯ expected parameter declarator","slug":"è§£å†³C-ä¸­vectorå£°æ˜é”™è¯¯expected-parameter-declarator","date":"2021-11-13T11:00:29.000Z","updated":"2022-10-15T03:14:29.794Z","comments":true,"path":"2021/11/13/è§£å†³C-ä¸­vectorå£°æ˜é”™è¯¯expected-parameter-declarator/","link":"","permalink":"http://example.com/2021/11/13/%E8%A7%A3%E5%86%B3C-%E4%B8%ADvector%E5%A3%B0%E6%98%8E%E9%94%99%E8%AF%AFexpected-parameter-declarator/","excerpt":"","text":"ä¿ç•™ç°åœº12QVector&lt;uint32_t&gt; buttonPins(3); å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º 3 çš„vectoræ•°ç»„ï¼Œç¼–è¯‘æ˜¯ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚ æ¢ç©¶åŸå› ç¼–è¯‘å™¨å¯èƒ½æ— æ³•åŒºåˆ†è¿™æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°å£°æ˜è¿˜æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡å£°æ˜ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿæ­§ä¹‰ã€‚ è§£å†³æ–¹æ³•æ–¹æ³• 1ï¼š 12QVector&lt;uint32_t&gt; buttonPins = QVector&lt;uint32_t&gt;(3);//æ˜ç¡®è¿™æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡ æ–¹æ³• 2ï¼šé»˜è®¤æ„é€ å‡½æ•°é‡Œé¢è¿›è¡Œæˆå‘˜å˜é‡çš„åˆå§‹åŒ– 12MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::MainWindow),buttonPins(3)&#123;&#125; æ–¹æ³• 3ï¼šåˆ—è¡¨åˆå§‹åŒ– 1QVector&lt;uint32_t&gt; buttonPins&#123;0, 0, 0&#125;;","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"C++","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"è§£å†³ expected identifier beforeâ€˜(â€™token","slug":"è§£å†³expected-identifier-before-â€˜-â€™-token","date":"2021-11-12T11:34:54.000Z","updated":"2022-10-15T03:14:29.801Z","comments":true,"path":"2021/11/12/è§£å†³expected-identifier-before-â€˜-â€™-token/","link":"","permalink":"http://example.com/2021/11/12/%E8%A7%A3%E5%86%B3expected-identifier-before-%E2%80%98-%E2%80%99-token/","excerpt":"","text":"ä¿ç•™ç°åœºæ¯”å¦‚åœ¨ä¸€ä¸ªæšä¸¾ç±»å‹ä¸­ï¼Œä¼šå‘Šè¯‰ä½ æŸè¡Œæœ‰è¿™ç§é”™è¯¯ã€‚åˆæˆ–è€…ï¼Œåœ¨ä¸€ä¸ªå®å®šä¹‰è¯­å¥ä¸­å‡ºç°è¿™ç§é”™è¯¯ã€‚ æ¢ç©¶åŸå› ä¸€èˆ¬æ¥è¯´ï¼Œå‡ºç°è¿™ç§æƒ…å†µï¼Œæ˜¯è¯­å¥ä¸­æœ‰äº›å®šä¹‰çš„åå­—å‘ç”Ÿäº†å†²çªã€‚ è§£å†³æ–¹æ³•å®šä½é”™è¯¯ä½ç½®ï¼Œæœç´¢æ˜¯å¦æœ‰åŒåçš„å‡½æ•°ï¼Œå˜é‡ç­‰ç­‰ã€‚æ”¹ä¸ªåå­—ã€‚","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"QEMU æºç åˆ†æ-å¤–è®¾æ¨¡æ‹Ÿï¼ˆä»¥ GPIO ä¸ºä¾‹ï¼‰","slug":"QEMUæºç åˆ†æ-å¤–è®¾æ¨¡æ‹Ÿï¼ˆä»¥GPIOä¸ºä¾‹ï¼‰","date":"2021-11-11T02:11:32.000Z","updated":"2022-10-15T03:14:29.437Z","comments":true,"path":"2021/11/11/QEMUæºç åˆ†æ-å¤–è®¾æ¨¡æ‹Ÿï¼ˆä»¥GPIOä¸ºä¾‹ï¼‰/","link":"","permalink":"http://example.com/2021/11/11/QEMU%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E5%A4%96%E8%AE%BE%E6%A8%A1%E6%8B%9F%EF%BC%88%E4%BB%A5GPIO%E4%B8%BA%E4%BE%8B%EF%BC%89/","excerpt":"","text":"QEMU æ¨¡æ‹Ÿå¤–è®¾çš„åŸç†QEMU ä¸»è¦æ˜¯å®ç°äº† CPU æ ¸çš„æ¨¡æ‹Ÿï¼Œå¯ä»¥è¯»å†™æŸä¸ªåœ°å€ã€‚QEMU çš„æ¨¡æ‹Ÿå¤–è®¾çš„åŸç†å¾ˆç®€å•ï¼šç¡¬ä»¶å³å†…å­˜ã€‚è¦åœ¨ QEMU ä¸Šæ¨¡æ‹ŸæŸä¸ªå¤–è®¾ï¼Œæ€è·¯å°±æ˜¯ï¼š CPU è¯»æŸä¸ªåœ°å€æ—¶ï¼ŒQEMU æ¨¡æ‹Ÿå¤–è®¾çš„è¡Œä¸ºï¼ŒæŠŠæ•°æ®è¿”å›ç»™ CPU CPU å†™æŸä¸ªåœ°å€æ—¶ï¼ŒQEMU è·å¾—æ•°æ®ï¼Œç”¨æ¥æ¨¡æ‹Ÿå¤–è®¾çš„è¡Œä¸ºã€‚å³ï¼šè¦æ¨¡æ‹Ÿå¤–è®¾å¤‡ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹å¤–è®¾çš„åœ°å€æä¾›å¯¹åº”çš„è¯»å†™å‡½æ•°å³å¯ã€‚ ä»¥ GPIO ä¸ºä¾‹ï¼š QEMU ä¸ºGPIOå†…å­˜åœ°å€æä¾›è¯»å†™å›è°ƒå‡½æ•°ï¼Œ 123static void sifive_gpio_write(void *opaque, hwaddr offset, uint64_t value, unsigned int size)static uint64_t sifive_gpio_read(void *opaque, hwaddr offset, unsigned int size) ç»™å¤–è®¾åœ°å€æä¾›è¯»å†™å‡½æ•°æ€ä¹ˆæè¿°æŸæ®µåœ°å€ï¼šåŸºåœ°å€ã€å¤§å°ï¼Ÿå¦‚ä½•ç»™è¿™æ®µåœ°å€æä¾›è¯»å†™å‡½æ•°å‘¢ï¼Ÿè¿™æ®µåœ°å€è®¾ç½®å¥½åï¼Œå¦‚ä½•æ·»åŠ è¿›system_memoryå»ï¼Ÿæœ‰ 2 ç§æ–¹æ³•ã€‚ æ³• 1ï¼šmemory_region_init_io/memory_region_add_subregionä»¥SIFIVE_UARTä¸ºä¾‹ï¼Œ 123memory_region_init_io(&amp;s-&gt;mmio, NULL, &amp;uart_ops, s, TYPE_SIFIVE_UART, 0x2000);memory_region_add_subregion(address_space, base, &amp;s-&gt;mmio); memory_region_init_ioå‡½æ•°åˆå§‹åŒ–iomemï¼Œè¯»å†™å‡½æ•°ï¼Œå¤§å°ã€‚memory_region_add_subregionå‡½æ•°s-&gt;iomemæŒ‡å®šäº†åŸºåœ°å€ï¼Œå¹¶æ·»åŠ è¿›system_memoryä¸­ã€‚ä»¥åï¼Œå®¢æˆ·æœºä¸Šçš„ç¨‹åºè¯»å†™è¿™å—åœ°å€æ—¶ï¼Œå°±ä¼šå¯¼è‡´å¯¹åº”çš„è¯»å†™å‡½æ•°è¢«è°ƒç”¨ã€‚ æ³• 2ï¼šmemory_region_init_io/sysbus_init_mmio/sysbus_mmio_mapä»¥SIFIVE_GPIOä¸ºä¾‹ï¼Œ 123memory_region_init_io(&amp;s-&gt;mmio, OBJECT(dev), &amp;gpio_ops, s, TYPE_SIFIVE_GPIO, SIFIVE_GPIO_SIZE);sysbus_init_mmio(SYS_BUS_DEVICE(dev), &amp;s-&gt;mmio); memory_region_init_ioå‡½æ•°åˆå§‹åŒ–iomemï¼Œè¯»å†™å‡½æ•°ï¼Œå¤§å°ã€‚sysbus_init_mmioå°†mminä¼ ç»™è®¾å¤‡ï¼› 1sysbus_mmio_map(SYS_BUS_DEVICE(&amp;s-&gt;gpio), 0, memmap[SIFIVE_E_DEV_GPIO0].base); sysbus_mmio_mapä»è®¾å¤‡ä¸­å§mmioæ·»åŠ è¿›system_memoryå¹¶æŒ‡å®šåŸºåœ°å€ã€‚","categories":[{"name":"QEMU æºç åˆ†æ","slug":"QEMU-æºç åˆ†æ","permalink":"http://example.com/categories/QEMU-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}],"tags":[{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"},{"name":"GPIO","slug":"GPIO","permalink":"http://example.com/tags/GPIO/"}]},{"title":"QEMU æºç åˆ†æ - è™šæ‹Ÿå¤–è®¾åˆ›å»º","slug":"QEMUæºç åˆ†æ-è™šæ‹Ÿå¤–è®¾åˆ›å»º","date":"2021-11-09T09:39:38.000Z","updated":"2022-11-20T07:07:38.480Z","comments":true,"path":"2021/11/09/QEMUæºç åˆ†æ-è™šæ‹Ÿå¤–è®¾åˆ›å»º/","link":"","permalink":"http://example.com/2021/11/09/QEMU%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E8%99%9A%E6%8B%9F%E5%A4%96%E8%AE%BE%E5%88%9B%E5%BB%BA/","excerpt":"","text":"QOM ç®€ä»‹QOM(QEMU Object Model) æ˜¯ QEMU çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºæè¿°è™šæ‹Ÿæœºçš„ç»“æ„ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºçš„ CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œã€è¾“å…¥è¾“å‡ºè®¾å¤‡ç­‰ã€‚QEMU ä¸ºäº†æ–¹ä¾¿æ•´ä¸ªç³»ç»Ÿçš„æ„å»ºï¼Œå®ç°äº†è‡ªå·±çš„ä¸€å¥—çš„é¢å‘å¯¹è±¡æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ QOM(QEMU Object Model)ã€‚å®ƒèƒ½å¤Ÿæ–¹ä¾¿çš„è¡¨ç¤ºå„ä¸ªè®¾å¤‡ï¼ˆDeviceï¼‰ä¸æ€»çº¿ï¼ˆBusï¼‰ä¹‹é—´çš„å…³ç³»ã€‚ è¿™ä¸ªæ¨¡å‹ä¸»è¦åŒ…å«å››ä¸ªç»“æ„ä½“ï¼š Object: æ˜¯æ‰€æœ‰å¯¹è±¡çš„ åŸºç±» Base Object ObjectClass: æ˜¯æ‰€æœ‰ç±»å¯¹è±¡çš„åŸºç±» TypeInfoï¼šæ˜¯ç”¨æˆ·ç”¨æ¥å®šä¹‰ä¸€ä¸ª Type çš„å·¥å…·å‹çš„æ•°æ®ç»“æ„ TypeImplï¼šTypeInfo æŠ½è±¡æ•°æ®ç»“æ„ï¼ŒTypeInfo çš„å±æ€§ä¸ TypeImpl çš„å±æ€§å¯¹åº” åœ¨ QEMU é‡Œè¦åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡éœ€è¦å®Œæˆå››æ­¥ï¼š å°† TypeInfo æ³¨å†Œ TypeImpl å®ä¾‹åŒ– Classï¼ˆObjectClassï¼‰ å®ä¾‹åŒ– Object æ·»åŠ  Property å¦‚ä½•æè¿°ç¡¬ä»¶ä¸€ä¸ªæ¿å­ä¸Šæœ‰å¾ˆå¤šç¡¬ä»¶ï¼šèŠ¯ç‰‡ï¼ŒLEDã€æŒ‰é”®ã€LCDã€è§¦æ‘¸å±ã€ç½‘å¡ç­‰ç­‰ã€‚èŠ¯ç‰‡é‡Œé¢ä¹Ÿæœ‰å¾ˆå¤šéƒ¨ä»¶ï¼Œæ¯”å¦‚ CPUã€GPIOã€SD æ§åˆ¶å™¨ã€ä¸­æ–­æ§åˆ¶å™¨ç­‰ç­‰ã€‚ è¿™äº›ç¡¬ä»¶ï¼Œæˆ–æ˜¯éƒ¨ä»¶ï¼Œå„æœ‰ä¸åŒã€‚æ€ä¹ˆæè¿°å®ƒä»¬ï¼Ÿ æ¯ä¸€ä¸ªéƒ½ä½¿ç”¨ä¸€ä¸ª TypeInfo ç»“æ„ä½“æ¥æè¿°ï¼ŒTypeInfo æ˜¯ç”¨æˆ·ç”¨æ¥å®šä¹‰ä¸€ä¸ª Type çš„å·¥å…·å‹çš„æ•°æ®ç»“æ„ã€‚å®ƒåŒ…å«äº†å¾ˆå¤šæˆå‘˜å˜é‡ï¼Œè¿™äº›æˆå‘˜åˆåœ¨ä¸€èµ·æè¿°äº†ä¸€ä¸ªè®¾å¤‡ç±»å‹ã€‚ 123456789101112131415// include/qom/object.hstruct TypeInfo&#123; const char *name; const char *parent; size_t instance_size; size_t instance_align; void (*instance_init)(Object *obj); void (*instance_post_init)(Object *obj); void (*instance_finalize)(Object *obj); bool abstract; size_t class_size; void (*class_init)(ObjectClass *klass, void *data); void (*class_base_init)(ObjectClass *klass, void *data); void *class_data; InterfaceInfo *interfaces;&#125;; è¿™ä¸ªç»“æ„ä½“æˆ‘ä»¬åœ¨åˆšåˆšä¹Ÿæåˆ°ï¼Œä»–åœ¨å›¾é‡Œæ˜¯ç‹¬ç«‹çš„ï¼Œåœ¨æ³¨å†Œçš„æ—¶å€™ä¼šå°†å®ƒçš„ä¿¡æ¯éƒ½ä¼ ç»™ Typeimpl ç»“æ„ä½“ã€‚ æˆ‘ä»¬ä»¥ Timer ä¸ºä¾‹ï¼Œæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ª Timer å¤–è®¾ï¼Œé¦–å…ˆå°±è¦å®šä¹‰ä¸€ä¸ª Typeinfo ç»“æ„ä½“ã€‚ä»–åœ¨ä»£ç ä¸­åƒè¿™æ ·ã€‚æˆ‘ä»¬åªçœ‹ nameï¼Œè¿™é‡Œç”¨ä¸€ä¸ªå®èµ‹å€¼ï¼Œè¿™ä¸ªå®æ˜¯ä¸ªæˆ‘ä»¬å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œå®ƒå”¯ä¸€æ ‡è¯†äº†è¿™ä¸ªç¡¬ä»¶ã€‚è¿™äº›ç»“æ„ä½“åœ¨è¿è¡Œæ—¶ä¼šè¢«æ³¨å†Œè¿›ç¨‹åºé‡Œï¼Œä¿å­˜åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­å¤‡ç”¨ï¼Œä¸ºä»€ä¹ˆæ˜¯å¤‡ç”¨ï¼Œå› ä¸ºä¸æ˜¯æ¯ä¸€ä¸ªç¡¬ä»¶éƒ½ä¼šè¢«ç”¨åˆ°ã€‚ 12345678// hw/timer/dw_timer.cstatic const TypeInfo dw_timer_info = &#123; .name = TYPE_DW_TIMER, .parent = TYPE_SYS_BUS_DEVICE, .instance_size = sizeof(DWTimerState), .instance_init = dw_timer_init, .class_init = dw_timer_class_init,&#125;; è¿™äº›ç»“æ„ä½“åœ¨è¿è¡Œæ—¶ä¼šè¢«æ³¨å†Œè¿›ç¨‹åºé‡Œï¼Œä¿å­˜åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­å¤‡ç”¨ï¼Œä¸ºä»€ä¹ˆæ˜¯å¤‡ç”¨ï¼Œå› ä¸ºä¸æ˜¯æ¯ä¸€ä¸ªç¡¬ä»¶éƒ½ä¼šè¢«ç”¨åˆ°ã€‚ å¦‚ä½•æ³¨å†Œç¡¬ä»¶ä»€ä¹ˆæ˜¯æ³¨å†Œï¼Œè¯´ç™½äº†å°±æ˜¯å°†ä¸€äº›å¯èƒ½éœ€è¦çš„ä¿¡æ¯æ·»åŠ åˆ°ç³»ç»Ÿä¸­ï¼Œåœ¨ç³»ç»Ÿè¿è¡Œæ—¶èƒ½å¤Ÿéšæ—¶è°ƒç”¨åˆ°ã€‚å°±æ‹¿ Timer æ¥è¯´ï¼Œç°åœ¨å°†ä¸€äº›ä¿¡æ¯æ·»åŠ åˆ°äº†åˆ—è¡¨ï¼Œç³»ç»Ÿè¿è¡Œèµ·æ¥æ—¶æˆ‘å¯ä»¥éšæ—¶ä»é“¾è¡¨ä¸­å–å‡º Timer è¿™ä¸ªè®¾å¤‡çš„ä¿¡æ¯ï¼Œç”¨æ¥å®ä¾‹åŒ–ä¸€ä¸ª Timerï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰æ³¨å†Œ Timerï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å°†å…¶åŠ å…¥åˆ°é“¾è¡¨ï¼Œé‚£æˆ‘åæœŸå°±æ— æ³•æ‰¾åˆ°å®ƒã€‚ æ€ä¹ˆæ³¨å†Œè¿™äº›TypeInfoç»“æ„ä½“å‘¢ï¼Ÿåœ¨å®ç°çš„æºç ä¸­æœ‰è¿™ä¸ªå‡½æ•° dw_timer_register_types()ï¼Œä»–æ˜¯ç”¨æ¥æ³¨å†Œ Timer è¿™ä¸ªè®¾å¤‡çš„ã€‚ æˆ‘ä»¬è¿½æ ¹æº¯æºï¼Œè°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹ï¼Œ åˆ†é…ä¸€ä¸ª TypeImpl ç»“æ„ä½“ï¼Œä½¿ç”¨ Typeinfo æ¥è®¾ç½®å®ƒ æŠŠ TypeImpl åŠ å…¥é“¾è¡¨ï¼štype_table åœ¨ QEMU é‡Œé¢ï¼Œæœ‰ä¸€ä¸ªå…¨å±€çš„å“ˆå¸Œè¡¨ type_tableï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰å®šä¹‰çš„ç±»ã€‚åœ¨ type_new é‡Œé¢ï¼Œæˆ‘ä»¬å…ˆä»å…¨å±€è¡¨é‡Œé¢æ ¹æ®åå­— type_table_lookup æŸ¥æ‰¾æ‰¾è¿™ä¸ªç±»ã€‚ å¦‚æœæ‰¾åˆ°ï¼Œè¯´æ˜è¿™ä¸ªç±»æ›¾ç»è¢«æ³¨å†Œè¿‡ï¼Œå°±æŠ¥é”™ï¼› å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ–°çš„ç±»ï¼Œåˆ™å°† Typeinfo é‡Œé¢ä¿¡æ¯å¡«åˆ° TypeImpl é‡Œé¢ã€‚type_table_add ä¼šå°†è¿™ä¸ªç±»æ³¨å†Œåˆ°å…¨å±€çš„è¡¨é‡Œé¢ã€‚ ä»¥ä¸Šçš„è¿‡ç¨‹å¯ä»¥ç”¨ä¸Šå›¾æ¥è¡¨ç¤ºã€‚Typeinfo é€šè¿‡ type_new() ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ TypeImpl ç±»å‹ï¼Œå¹¶ä»¥ name ä¸ºå…³é”®å­—æ·»åŠ åˆ°åä¸º type_table çš„ä¸€ä¸ª hash table ä¸­ã€‚ ä»€ä¹ˆæ—¶å€™æ³¨å†Œè¿™äº›è®¾å¤‡å‘¢ï¼Ÿä¸éœ€è¦æˆ‘ä»¬å»è°ƒç”¨æ³¨å†Œå‡½æ•°ï¼Œä»¥ Timer ä¸ºä¾‹ï¼Œåœ¨ hw/timer/dw_timer.c ä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼Œä¸€èˆ¬åœ¨æœ€åä¸€è¡Œï¼š 1type_init(dw_timer_register_types) F12æ‰¾åˆ°è¿™ä¸ªå®å®šä¹‰ï¼Œæˆ‘ä»¬è¿½æ ¹æº¯æºï¼Œè°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹ 123456789101112131415161718192021222324252627type_init() -&gt; module_init() -&gt; register_module_init()type_init(dw_timer_register_types)#define type_init(function) module_init(function, MODULE_INIT_QOM)#define module_init(function, type) \\static void __attribute__((constructor)) do_qemu_init_ ## function(void) \\&#123; \\ register_module_init(function, type); \\&#125;void register_module_init(void (*fn)(void), module_init_type type)&#123; ModuleEntry *e; //æ„é€  ModuleEntry ModuleTypeList *l; //æ„é€ é“¾è¡¨ e = g_malloc0(sizeof(*e)); e-&gt;init = fn; //è®¾ç½®åˆå§‹åŒ–å‡½æ•°ï¼Œfn å³ sifive_gpio_register_types e-&gt;type = type; l = find_type(type); QTAILQ_INSERT_TAIL(l, e, node);//å°† ModuleEntry æ’å…¥é“¾è¡¨å°¾&#125; type_initæ˜¯ä¸ªå®å®šä¹‰ï¼Œè°ƒç”¨äº†__attribute__((constructor))å‡½æ•°ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ª C è¯­è¨€ä¸­ä½æ•°ä¸å¤šçš„åœ¨mainå‡½æ•°æ‰§è¡Œå‰ï¼Œæ‰§è¡Œçš„å‡½æ•°ã€‚å‡½æ•°ä¸­è°ƒç”¨äº†register_module_initæ³¨å†Œå‡½æ•°ï¼Œè¯´æ˜åœ¨mainå‡½æ•°æ‰§è¡Œå‰ï¼Œå·²ç»æ³¨å†Œå¥½ç¡¬ä»¶äº†ã€‚è¯¥å‡½æ•°å°†ä¸€ä¸ªæ–°çš„ModuleEntryåŠ åˆ°é“¾è¡¨é‡Œã€‚ æ³¨æ„ï¼Œæ³¨å†Œçš„åªæ˜¯ä¸ªå‡½æ•°ï¼Œå¹¶ä¸æ˜¯æ³¨å†Œäº†è®¾å¤‡ã€‚ä¹Ÿå°±æ˜¯å·²ä¸Šè¿‡ç¨‹ï¼Œåªæ˜¯æŠŠä¸€ä¸ª ModuleEntry æ”¾åˆ°äº†ä¸€ä¸ªé“¾è¡¨é‡Œï¼Œè¿™ä¸ª ModuleEntry å¸¦äº†ä¸¤ä¸ªä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯ç±»å‹ã€‚è¿™ä¸ªå‡½æ•°å°±æ˜¯æˆ‘ä»¬çœŸæ­£çš„æ³¨å†Œæ³¨å†Œå‡½æ•°ã€‚ å·²ä¸Šè¿‡ç¨‹å¤§æ¦‚æ˜¯å¦‚ä¸‹æ‰€ç¤ºï¼š é‚£ä»€ä¹ˆæ—¶å€™è¿˜çœŸæ­£æ³¨å†Œè®¾å¤‡å‘¢ï¼Œæˆ‘ä»¬å°±å¾—å›åˆ°ä¸»å‡½æ•°ï¼Œå®ƒæœ‰ä»¥ä¸‹è°ƒç”¨æµç¨‹ï¼Œåœ¨ module_call_init ä¸­ï¼Œæˆ‘ä»¬ä¼šæ‰¾åˆ° MODULE_INIT_QOM è¿™ç§ç±»å‹å¯¹åº”çš„ ModuleTypeListæ‰¾å‡ºåˆ—è¡¨ä¸­æ‰€æœ‰çš„ ModuleEntryï¼Œç„¶åè°ƒç”¨æ¯ä¸ª ModuleEntry çš„ init å‡½æ•°ã€‚ 12// softmmu/runstate.cmodule_call_init(MODULE_INIT_QOM); 1234567891011// utils/module.csoftmmu/runstate.cvoid module_call_init(module_init_type type)&#123; ModuleTypeList *l; ModuleEntry *e; // æ‰¾åˆ° MODULE_INIT_QOM è¿™ç§ç±»å‹å¯¹åº”çš„ ModuleTypeList l = find_type(type); QTAILQ_FOREACH(e, l, node) &#123; e-&gt;init(); &#125;&#125; åˆå§‹åŒ–è®¾å¤‡åˆ°è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨æ³¨å†Œè®¾å¤‡çš„æ—¶å€™è™½ç„¶å°†è®¾å¤‡ä» Typeinfo å˜æˆäº† TypeImplï¼ŒæŠŠ Typeinfo é‡Œçš„ä¿¡æ¯éƒ½å¤åˆ¶åˆ°äº† TypeImplï¼Œä½†æ˜¯ class_init è¿˜æ²¡æœ‰è¢«è°ƒç”¨ï¼Œä¹Ÿå³è¿™ä¸ªç±»ç°åœ¨è¿˜å¤„äºçº¸é¢çš„çŠ¶æ€ã€‚ ä»€ä¹ˆæ—¶å€™æ‰çœŸæ­£åˆå§‹åŒ–è¿™ä¸ªç±»å‘¢ï¼Œè¿™å¾—ç­‰åœ¨ç”¨åˆ°å®ƒçš„æ—¶å€™ã€‚æˆ‘ä»¬åœ¨ä¸€å—æ¿å­ä¸Šæ‰ä¼šç”¨åˆ°ä¸€ä¸ªè®¾å¤‡ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Sifive-e è¿™ä¸ªæ¿å­ï¼Œå‡†ç¡®æ¥è¯´æˆ‘ä»¬ç”¨çš„ä¸æ˜¯è¿™ä¸ªæ¿å­ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨åŸå…ˆçš„ä»£ç ä¸Šåšäº†ä¿®æ”¹ã€‚ ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œå°±å½“æ˜¯ç”¨çš„ sifive-e è¿™ä¸ªæ¿å­ã€‚åœ¨å®ç°çš„æºç é‡Œï¼Œæœ‰ object_initialize_childå‡½æ•°ï¼Œè·Ÿè¸ªä¸€ä¸‹è°ƒç”¨æµç¨‹å¯ä»¥çœ‹åˆ°æœ€ååœ¨ type_initialize å‡½æ•°ä¸­åˆå§‹åŒ–äº†ç±»ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿçœ‹åˆ°åœ¨ object_init_with_type å‡½æ•°ä¸­å®ä¾‹åŒ–äº†ç±»ã€‚è¿™ä¸ªç¨åå†è®²ã€‚ 123456789// hw/riscv/sifive_e.c static void sifive_e_soc_init(Object *obj)&#123; MachineState *ms = MACHINE(qdev_get_machine()); SiFiveESoCState *s = RISCV_E_SOC(obj); . . . object_initialize_child(obj, &quot;timer&quot;, &amp;s-&gt;timer, TYPE_DW_TIMER);&#125; 123456789101112131415161718object_initialize_child(obj, name, &amp;s-&gt;timer, TYPE_DW_TIMER); object_initialize_child_internal() object_initialize_child_with_props() object_initialize_child_with_propsv() object_initialize() object_initialize_with_type() type_initialize() &#123; if (ti-&gt;class_init) &#123; ti-&gt;class_init(ti-&gt;class, ti-&gt;class_data); &#125; &#125; object_init_with_type() &#123; if (ti-&gt;instance_init) &#123; ti-&gt;instance_init(obj); &#125; &#125; åœ¨è°ƒç”¨ class_init å‡½æ•°æ—¶ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨çš„è®¾å¤‡æ¨¡å—ä¸‹çš„ dw_timer_class_initï¼Œè¿™ä¸ªå‡½æ•°ä¸­åˆæ˜¯ä¸€äº›é…ç½®ï¼Œå°¤å…¶æ˜¯ realize å‡½æ•°çš„é…ç½®ã€‚è¿˜æœ‰ä¸€äº›å±æ€§çš„é…ç½®ï¼Œå¦‚ Timer çš„é¢‘ç‡ã€‚ åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ‰æœ‰æœ‰äº†ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„è®¾å¤‡ç±»ã€‚ 1234567891011hw/timer/dw_timer.c static void dw_timer_class_init(ObjectClass *klass, void *data)&#123; // è¿™é‡Œåˆæ˜¯ä¸€äº›é…ç½®ï¼Œå°¤å…¶æ˜¯å›è°ƒå‡½æ•°çš„é…ç½® DeviceClass *dc = DEVICE_CLASS(klass); dc-&gt;reset = dw_timer_reset; // è®¾ç½® Timer åŸºæœ¬å±æ€§å¦‚é¢‘ç‡ç­‰ device_class_set_props(dc, dw_timer_properties); dc-&gt;vmsd = &amp;vmstate_dw_timer; dc-&gt;realize = dw_timer_realize;&#125; å®ä¾‹åŒ–è®¾å¤‡è¯´ç™½äº†åˆå§‹åŒ–è¿‡ç¨‹å°±æ˜¯åœ¨é…ç½®å„ç§ç»“æ„ä½“æˆå‘˜çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚åˆšåˆšçš„åˆå§‹åŒ–è¿‡ç¨‹å°±æ˜¯åœ¨é…ç½® DeviceClass è¿™ä¸ªç±»çš„å„ä¸ªæˆå‘˜ã€‚å®é™…ä¸Šæˆ‘ä»¬è¿˜æ²¡æœ‰çœŸæ­£å®ä¾‹åŒ– Timerï¼Œæˆ‘ä»¬è¿˜ä¸èƒ½ä½¿ç”¨å®ƒã€‚ æˆ‘ä»¬åªæœ‰åœ¨å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨å®ƒï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰æåˆ°çš„ instance_init()ã€‚ä½†æ˜¯åœ¨ QEMU ä¸­è¦å®ä¾‹åŒ–ä¸€ä¸ªè®¾å¤‡ï¼Œä¸ä»…ä»…éœ€è¦è°ƒç”¨ instance_initï¼Œè¿˜éœ€è¦è°ƒç”¨åˆšåˆšåˆå§‹åŒ–æ—¶è®¾ç½®çš„ realize å‡½æ•°ã€‚ 12345678910111213141516static const TypeInfo dw_timer_info = &#123; .name = TYPE_DW_TIMER, .parent = TYPE_SYS_BUS_DEVICE, .instance_size = sizeof(DWTimerState), .instance_init = dw_timer_init, .class_init = dw_timer_class_init,&#125;;// hw/timer/dw_timer.cstatic void dw_timer_init(Object *obj)&#123; DWTimerState *s = DWTIMER(obj); // ä¸ºè¿™æ®µå†…å­˜æ³¨å†Œå›è°ƒå‡½æ•° memory_region_init_io(&amp;s-&gt;iomem, obj, &amp;dw_timer_ops, s, &quot;dw_timer&quot;, 0x2000); sysbus_init_mmio(SYS_BUS_DEVICE(obj), &amp;s-&gt;iomem);&#125; è¿™ä¸¤ä¸ªå‡½æ•°çš„åŠŸèƒ½å¾ˆåƒï¼Œå…·ä½“ç»†èŠ‚å·®å¼‚æˆ‘ä¹Ÿè¿˜æ²¡å¼„æ˜ç™½ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ instance_init ä¸€å®šè¦åœ¨ realize ä¹‹å‰å®Œæˆï¼Œå¹¶ä¸”æ²¡æœ‰é”™è¯¯ã€‚å¦åˆ™å°†æ— æ³•å®Œæˆå®ä¾‹åŒ–ã€‚ 123456789// hw/timer/dw_timer.cstatic void dw_timer_realize(DeviceState *dev, Error **errp)&#123; DWTimerState *s = DWTIMER(dev); sysbus_init_irq(SYS_BUS_DEVICE(dev), &amp;s-&gt;irq); for (int i = 0; i &lt; n; i++) &#123; s-&gt;timer[i] = timer_new_ns(QEMU_CLOCK_VIRTUAL, dw_timer_interrupt, s); &#125;&#125; instance_init è¿™ä¸ªå‡½æ•°ä¸»è¦å®Œæˆçš„å·¥ä½œå°±æ˜¯ä¸ºä¸€æ®µå†…å­˜ç»‘å®šäº†è¯»å†™å‡½æ•°ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œæˆ‘ä»¬å†å¾€ä¸‹çœ‹ã€‚ å¦‚ä½•æ“ä½œè®¾å¤‡è®¾å¤‡åˆ›å»ºå®Œæˆäº†ï¼Œé‚£ QEMU æ˜¯å¦‚ä½•æ¨¡æ‹Ÿè®¾å¤‡çš„è¡Œä¸ºçš„ï¼Ÿè¿™ä¹Ÿæ˜¯ QEMU é©±åŠ¨å¼€å‘æœ€é‡è¦çš„ä¸€æ­¥ï¼Œå› ä¸ºä»¥ä¸Šçš„éƒ¨åˆ†æ˜¯å®ç°è®¾å¤‡æ‰€å¿…é¡»çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å‚è€ƒå…¶ä»–å·²ç»å®ç°çš„æ¨¡å—ï¼Œä¿®æ”¹æˆæˆ‘ä»¬çš„ä¿¡æ¯å³å¯ã€‚ ä½†æ˜¯æ¯ä¸ª IP çš„å¯„å­˜å™¨ä¸åŒï¼Œä»–ä»¬çš„åŠŸèƒ½ä¹Ÿå°±ä¸åŒï¼Œè¿™æ˜¯æˆ‘ä»¬çœŸæ­£éœ€è¦å®ç°çš„å†…å®¹ã€‚æˆ‘ä»¬çŸ¥é“å†™é©±åŠ¨å…¶å®å°±æ˜¯æ“ä½œå„ä¸ª IP çš„å¯„å­˜å™¨ï¼Œä»¥å®ç°æƒ³è¦çš„åŠŸèƒ½ã€‚å¯¹åº”åˆ° QEMU ä¸­ï¼Œå°±æˆäº†åœ¨æ“ä½œå„ä¸ªå¯„å­˜å™¨æ—¶ï¼Œæˆ‘ä»¬è¦åœ¨ QEMU ä¸­å°†é©±åŠ¨å¯„å­˜å™¨çš„åŠŸèƒ½å…ˆæ¨¡æ‹Ÿå‡ºæ¥ï¼Œå†è¿”å›ç»™é©±åŠ¨ç¨‹åºã€‚ ä»¥ Timer ä¸ºä¾‹æˆ‘æƒ³è¦è·å– TimerNLoadCount çš„å€¼ï¼ŒçœŸå®ç¡¬ä»¶æœ‰è¿™ä¸ªå¯„å­˜å™¨ä¿å­˜äº†å€¼ï¼Œä½†æ˜¯ QEMU ä¸Šæˆ‘ä»¬å°±å¾—ç»´æŠ¤ä¸€ä¸ªå˜é‡å»ä¿å­˜è¿™ä¸ªå€¼ã€‚åœ¨éœ€è¦çš„æ—¶å€™èƒ½è¯»å–åˆ°ã€‚æ¯”å¦‚ä»£ç é‡Œæ¯”è¾ƒé‡è¦çš„å‚æ•°æ˜¯ offsetï¼Œè¿™ä¸ªå‚æ•°æ˜¯åŸºäºå¤–è®¾åŸºåœ°å€çš„åç§»ï¼Œå…¶å®å°±æ˜¯å¯„å­˜å™¨çš„åç§»é‡ã€‚æ¯”å¦‚æˆ‘ä»¬æŸ¥çœ‹ Timer çš„æ‰‹å†Œï¼ŒTimerNLoadCount åç§»é‡ä¸º 0ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åœ¨é©±åŠ¨ä¸­è¯»å–åœ°å€ä¸º 0x2000000 æ—¶ï¼Œä»£ç å°±ä¼šèµ°åˆ°è¿™é‡Œï¼Œå› ä¸ºæˆ‘ä»¬ç»´æŠ¤äº†ä¸€ä¸ª timer_n_load_count å˜é‡ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥å°†è¿™ä¸ªå˜é‡å½“å‰å€¼è¿”å›å³å¯ï¼Œè¿™å°±æ˜¯è¿™ä¸ªå¯„å­˜å™¨çš„å€¼ã€‚æˆ‘ä»¬è¦å†™è¿™ä¸ªå¯„å­˜å™¨ä¹ŸåŒç†ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° timer_n_load_count è¿™ä¸ªå˜é‡ã€‚ 1234567891011121314151617181920212223242526272829303132333435// hw/timer/dw_timer.cstatic uint64_t dw_timer_read(void *opaque, hwaddr offset, unsigned size)&#123; DWTimerState *s = opaque; int index = 0; switch (offset) &#123; case TimerNLoadCount: case 1*0x14: case 2*0x14: index = offset / 0x14; return s-&gt;timer_n_load_count[index];...&#125;static void dw_timer_write(void *opaque, hwaddr offset, uint64_t val64, unsigned size)&#123; DWTimerState *s = opaque; uint32_t value = val64; int index = 0; int change = 0; switch (offset) &#123; case TimerNLoadCount: case 1*0x14: case 2*0x14: index = (offset) / 0x14; s-&gt;timer_n_load_count[index] = value; set_alarm_time(s,index); return;...&#125; è¯»å†™å‡½æ•°å†™å¥½äº†ï¼Œéœ€è¦ç»™è°è°ƒç”¨å‘¢ã€‚æˆ‘ä»¬åˆšåˆšæåˆ°äº†ï¼Œè¿™æ˜¯ä¸ªå›è°ƒå‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ç»™ä¸€æ®µå†…å­˜æ³¨å†Œè¿™ä¸ªå›è°ƒå‡½æ•°ã€‚å¦‚ä»£ç æ‰€ç¤ºã€‚æˆ‘ä»¬ç»™ Timer iomem ç»‘å®šäº†è¯»å†™å‡½æ•°ã€‚å…·ä½“å“ªä¸€æ®µåœ°å€è¿˜æ²¡å®šï¼Œä½†æ˜¯æˆ‘ä»¬å®šäº† 0x2000 è¿™ä¹ˆé•¿ä¸€æ®µã€‚æˆ‘è§‰å¾—è¿™é‡Œåº”è¯¥æ˜¯æœ€é«˜ä½çš„ä¸€ä¸ªå¯„å­˜å™¨åç§»é‡ã€‚å› ä¸ºå†é«˜å°±æ²¡å•¥ç”¨äº†ï¼Œæˆ–è€…å°±æ˜¯ SoC é‡Œå®šçš„å¯„å­˜å™¨ç©ºé—´å¤§å° 0x1000ã€‚è¿™é‡Œåº”è¯¥æ˜¯ä¸ºäº†å›¾çœäº‹å†™çš„ä¸€ä¸ªå€¼ã€‚ 12345678910111213141516// hw/timer/dw_timer.cstatic const MemoryRegionOps dw_timer_ops = &#123; .read = dw_timer_read, .write = dw_timer_write, .endianness = DEVICE_NATIVE_ENDIAN,&#125;;static void dw_timer_init(Object *obj)&#123; DWTimerState *s = DWTIMER(obj); // ä¸ºè¿™æ®µå†…å­˜æ³¨å†Œå›è°ƒå‡½æ•° memory_region_init_io(&amp;s-&gt;iomem, obj, &amp;dw_timer_ops, s, &quot;dw_timer&quot;, 0x2000); sysbus_init_mmio(SYS_BUS_DEVICE(obj), &amp;s-&gt;iomem);&#125; ä¸‹é¢åœ¨hw/riscv/sifive_e.cé‡Œä¼šæ˜ å°„å¯„å­˜å™¨ç©ºé—´åˆ° QEMU çš„å†…å­˜ç©ºé—´ã€‚ 12// hw/riscv/sifive_e.csysbus_mmio_map(SYS_BUS_DEVICE(&amp;s-&gt;timer), 0, memmap[SIFIVE_E_DEV_TIMER].base); å‚è€ƒ QEMU ä¸­åŸºäº QOM çš„ VFIO ç±»çš„å®šä¹‰ - EwanHai - åšå®¢å›­","categories":[{"name":"QEMU æºç åˆ†æ","slug":"QEMU-æºç åˆ†æ","permalink":"http://example.com/categories/QEMU-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}],"tags":[{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"è§£å†³ä¸€å°ç”µè„‘é…ç½®ä¸¤ä¸ª GIT è´¦æˆ·","slug":"è§£å†³ä¸€å°ç”µè„‘é…ç½®ä¸¤ä¸ªGITè´¦æˆ·","date":"2021-10-30T03:14:27.000Z","updated":"2022-10-15T03:14:29.856Z","comments":true,"path":"2021/10/30/è§£å†³ä¸€å°ç”µè„‘é…ç½®ä¸¤ä¸ªGITè´¦æˆ·/","link":"","permalink":"http://example.com/2021/10/30/%E8%A7%A3%E5%86%B3%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E9%85%8D%E7%BD%AE%E4%B8%A4%E4%B8%AAGIT%E8%B4%A6%E6%88%B7/","excerpt":"","text":"å…¬å¸çš„ä¹Ÿåœ¨ç”¨ gitï¼Œä½†æ˜¯è´¦å·å’Œåœ°å€è‚¯å®šéƒ½ä¸åŒï¼Œéœ€è¦é…ç½®ä¸¤ä¸ªä¸åŒçš„æäº¤ç¯å¢ƒã€‚ ç”Ÿæˆä¸¤ä¸ª Keyç”Ÿæˆç¬¬ä¸€ä¸ª Keyå¦‚æœç”µè„‘ä¸Šå·²ç»åœ¨ç”¨ Git äº†å°±æ— éœ€é‡æ–°ç”Ÿæˆ keyï¼Œç”¨å½“å‰çš„å°±å¯ä»¥ã€‚key ä¿å­˜åœ¨~/.sshæ–‡ä»¶å¤¹å†…ã€‚ å¦‚æœç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå°±ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡æ–°ç”Ÿæˆï¼š 1234âœ .ssh ssh-keygen -t rsa -C home_pcGenerating public/private rsa key pair.Enter file in which to save the key (/home/dominic/.ssh/id_rsa): id_rsa_pc home_pcå°±æ˜¯ä¸ªå¤‡æ³¨åï¼Œå‡è®¾æˆ‘ä»¬è¿™ä¸ª key æ˜¯å¹³æ—¶æ£è…¾ GitHub ç©ï¼Œç”¨æ¥å’Œ GitHub åŒæ­¥ç”¨çš„ï¼Œid_rsa_pcæ˜¯ç”Ÿæˆçš„æ–‡ä»¶åï¼Œæ‰“å¼€id_rsa_pc.pubå¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„ key æœ€åå°±æ˜¯å¤‡æ³¨åï¼ˆå¦‚ä¸‹ï¼‰ã€‚ 1ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABR/Fyj7Pz+e+/////////////////ZbdPGtHB86fLQYh/uR+TKcCERedrDKzGPdVt8= home_pc é…ç½® GitHub SSHè·¯å¾„ä¸ºï¼š 1Github-å¤´åƒ-settings-SSH and GPG keys-New SSH key æµ‹è¯•è¿é€š1ssh -T git@github.com ç”Ÿæˆç¬¬äºŒ Keyè¿™ä¸ª key å°±æ‰“ç®—ç”¨æ¥å’Œå…¬å¸ä»£ç åŒæ­¥ç”¨ï¼Œæ‰€ä»¥å¤‡æ³¨åæ¢æˆäº†work_ubuntuï¼Œæ–‡ä»¶åä¹Ÿæ¢æˆäº†id_rsa_workã€‚ 1234âœ .ssh ssh-keygen -t rsa -C work_ubuntuGenerating public/private rsa key pair.Enter file in which to save the key (/home/dominic/.ssh/id_rsa): id_rsa_work é…ç½®å…¬å¸ SSHå’Œ GitHub ç±»ä¼¼ï¼Œæ ¹æ®è‡ªå·±å…¬å¸ä½¿ç”¨çš„å¹³å°è®¾ç½®ã€‚ é…ç½®æœ¬åœ°è´¦æˆ·å› ä¸ºæœ¬åœ°çš„ä»£ç ä»“åº“å¯èƒ½æ˜¯ä» GitHub ä¸‹è½½çš„ï¼Œä¹Ÿæœ‰ä»å…¬å¸ä»“åº“ä¸‹è½½çš„ã€‚é‚£ä¹ˆæäº¤ä»£ç æ—¶å°±éœ€è¦ä¸ºä»“åº“é…ç½®æŒ‡å®šçš„ç”¨æˆ·åå’Œé‚®ç®±ã€‚ä»¥å‰åªæœ‰ä¸€ä¸ª GitHubï¼Œæ‰€ä»¥é…ç½®æ—¶ä½¿ç”¨çš„æ˜¯-globalå‚æ•°ï¼Œä»»ä½•ä¸€ä¸ªä»“åº“éƒ½æ˜¯é…ç½®çš„ç›¸åŒçš„ç”¨æˆ·åä¸é‚®ç®±ï¼Œè€Œç°åœ¨éœ€è¦åŒºåˆ†ã€‚ å–æ¶ˆå…¨å±€é…ç½®12345 # å–æ¶ˆå…¨å±€ ç”¨æˆ·å/é‚®ç®± é…ç½®git config --global --unset user.namegit config --global --unset user.email å•ç‹¬é…ç½®ä»£ç ä»“è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œæœ‰.gitç›®å½•çš„é‚£ä¸€çº§ã€‚ 123# å•ç‹¬è®¾ç½®æ¯ä¸ªrepo ç”¨æˆ·å/é‚®ç®±git config user.email â€œxxxx@xx.comâ€git config user.name â€œxxxxâ€","categories":[],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"C è¯­è¨€å¤æ‚å£°æ˜","slug":"Cè¯­è¨€å¤æ‚å£°æ˜","date":"2021-10-22T03:02:58.000Z","updated":"2022-10-15T03:14:29.167Z","comments":true,"path":"2021/10/22/Cè¯­è¨€å¤æ‚å£°æ˜/","link":"","permalink":"http://example.com/2021/10/22/C%E8%AF%AD%E8%A8%80%E5%A4%8D%E6%9D%82%E5%A3%B0%E6%98%8E/","excerpt":"","text":"C è¯­è¨€å¸¸å¸¸å› ä¸ºå£°æ˜çš„è¯­æ³•é—®é¢˜è€Œå—åˆ°äººä»¬çš„æ‰¹è¯„ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠåˆ°å‡½æ•°æŒ‡é’ˆçš„è¯­æ³•ã€‚C è¯­è¨€çš„è¯­æ³•åŠ›å›¾ä½¿å£°æ˜å’Œä½¿ç”¨ç›¸ä¸€è‡´ã€‚å¯¹äºç®€å•çš„æƒ…å†µï¼ŒC è¯­è¨€çš„åšæ³•æ˜¯å¾ˆæœ‰æ•ˆçš„ï¼Œä½†æ˜¯ï¼Œå¦‚æœæƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œåˆ™å®¹æ˜“è®©äººæ··æ·†ï¼ŒåŸå› åœ¨äºï¼ŒC è¯­è¨€çš„å£°æ˜ä¸èƒ½ä»å·¦è‡³å³é˜…è¯»ï¼Œè€Œä¸”ä½¿ç”¨äº†å¤ªå¤šçš„åœ†æ‹¬å·ã€‚åœ¨ C ä¸­ï¼Œå£°æ˜çš„å½¢å¼ä¸ºï¼ˆdcl æ˜¯ declaration çš„ç®€å†™ï¼‰ï¼š 12345dcl: optional *&#x27;s direct-dclï¼ˆå«æœ‰å¯é€‰&quot;*&quot;çš„direct-dclï¼‰direct-dcl name (dcl) direct-dcl() direct-dcl[optional size] ç®€è€Œè¨€ä¹‹ï¼Œå£°æ˜ç¬¦dc1(å¯ä»¥ç†è§£æˆé—´æ¥å£°æ˜) å°±æ˜¯å‰é¢å¯èƒ½å¸¦æœ‰å¤šä¸ª*çš„direcr-dcloã€‚direct-dclå¯ä»¥æ˜¯nameã€ç”±ä¸€å¯¹åœ†æ‹¬å·æ‹¬èµ·æ¥çš„dclã€åé¢è·Ÿæœ‰ä¸€å¯¹åœ†æ‹¬å·çš„direct-dclã€åé¢è·Ÿæœ‰ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„è¡¨ç¤ºå¯é€‰é•¿åº¦çš„direc-dclã€‚ æ ¹æ®è¯¥è§„åˆ™è¿›è¡Œé€†å‘è§£æï¼Œå°±å¯ä»¥å¾—åˆ°æ­£ç¡®çš„å£°æ˜ã€‚ç®€åŒ–ä¸€ä¸‹ï¼šTypeName Declarator;å…¶ä¸­ï¼ŒDeclaratorå°±æ˜¯å£°æ˜ä¸­çš„é‚£ä¸ªnameã€‚å½“ä½ é‡åˆ°ä»»ä½•ä½ ä¸èƒ½ç†è§£çš„å£°æ˜æ—¶ï¼Œè¿™ä¸ªæ³•åˆ™å°±æ˜¯æ•‘å‘½ç¨»è‰ã€‚æœ€ç®€å•çš„ä¾‹å­ï¼š 1int aInt; è¿™é‡Œï¼Œintæ˜¯TypeNameï¼ŒaIntæ˜¯Declaratorã€‚ å†è¯´æ˜ä¸€ä¸‹ç»“åˆç´§å¯†åº¦ã€‚åœ¨å£°æˆ–å®šä¹‰å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›ä¿®é¥°æ¯”å¦‚*ï¼Œ[]ï¼Œ()ç­‰ã€‚()ï¼ˆéå‡½æ•°å£°æ˜ä¸­çš„()ï¼‰å…·æœ‰æœ€é«˜çš„ç´§å¯†åº¦ï¼Œå…¶æ¬¡æ‰æ˜¯å‡½æ•°å’Œæ•°ç»„çš„()å’Œ[]ã€‚ æ²¡æœ‰*çš„å£°æ˜ç§°ä¸ºç›´æ¥å£°æ˜ï¼ˆdirect-dclï¼‰ï¼Œè€Œæœ‰*ç§°ä¸ºå£°æ˜ï¼ˆdclï¼‰ã€‚ç›´æ¥å£°æ˜è¦æ¯”å£°æ˜ç»“åˆçš„ç´§ã€‚åˆ†è§£å£°æ˜æ—¶ï¼Œå…ˆè¯»å‡ºç»“åˆç´§çš„ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æŠŠdirect-dclç§°ä¸ºæ›´ç´§çš„ç»“åˆï¼Œå®ƒæ¯”dclç»“åˆå¾—ç´§ã€‚ æœ€åï¼Œéœ€è¦ä½ ç”¨è‹±è¯­æ¥è¯»å‡ºè¿™ä¸ªå£°æ˜ã€‚å¯¹äº[]ï¼Œåº”è¯¥è¯»æˆarray ofã€‚ å¯¹äºå¤æ‚çš„å®šä¹‰ï¼Œå¯ä»¥å°†å…¶åˆ†è§£ã€‚æ¯”å¦‚T (*p)()å¯ä»¥åˆ†è§£æˆT D1()ï¼ŒD1è¯»ä½œï¼š*function returning Tã€‚å…¶ä¸­D1æ˜¯*pã€‚é‚£ä¹ˆè¯¥å£°æ˜åº”è¯¥è¯»æˆï¼šp is a poniter to*ã€‚äºŒè€…åˆåœ¨ä¸€èµ·ï¼Œå°±å˜æˆäº† *p is a pointer to function returning T*ï¼Œå³ï¼špæ˜¯æŒ‡å‘è¿”å›Tç±»å¯¹è±¡çš„å‡½æ•°çš„æŒ‡é’ˆã€‚ å†çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚çš„ç¤ºä¾‹ï¼š 1T (*pfa[])(); æ ¹æ®dclå’Œdirect-dclï¼Œå¯ä»¥åˆ†è§£æˆT1 D1ï¼ˆå› ä¸ºç»“åˆç´§å¯†åº¦ï¼‰ï¼ŒT1ä¹Ÿå°±æ˜¯T ()ï¼Œé‚£ä¹ˆåº”è¯¥è¯»ä½œï¼š*D1 is function returning T*ã€‚ D1åˆå¯ä»¥å†™æˆT2 D2ï¼Œå…¶ä¸­T2æ˜¯T1 []ï¼Œå¯ä»¥åˆ†è§£æˆT1 D2[]ï¼Œè¯»ä½œï¼š*array of D2 function returning T*ã€‚ D2æ˜¯æŒ‡é’ˆï¼Œè¯»ä½œï¼š*pointers toã€‚é‚£ä¹ˆæ•´ä¸ª T (*pfa[])() åº”è¯¥è¯»ä½œï¼špfa is an array of pointers to function returning T*ï¼Œå³ï¼špfaæ˜¯ä¸ªå­˜æ”¾æŒ‡å‘è¿”å› T ç±»å¯¹è±¡å‡½æ•°çš„æŒ‡é’ˆçš„æ•°ç»„ã€‚ æ¢ç§æ–¹å¼çœ‹ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œpfaæ˜¯åå­—ï¼ŒT(*[])()æ˜¯ç±»å‹ã€‚å°†(*pfa[])è§†ä¸ºä¸€ä½“ï¼ˆdirect-dclï¼‰ï¼Œç§°ä¸ºD1ï¼Œé‚£ä¹ˆå¯ä»¥å†™æˆT D1()ï¼Œ*function returning object of T*ã€‚åœ¨D1ä¸­ï¼Œå°†*pfaè§†ä¸ºä¸€ä½“ï¼ˆdclï¼‰ï¼Œç§°ä¸ºD2ï¼Œé‚£ä¹ˆ*pfa[]åº”è¯¥æ˜¯D2[]ï¼ˆdirect-dclï¼‰ï¼Œarray of D2ã€‚åˆèµ·æ¥å°±æ˜¯ *array of D2 function returning object of T*ã€‚D2æ˜¯*pfaï¼ˆdclï¼‰ï¼Œæ›¿æ¢åˆ°å‰é¢è¿™å¥è¯ï¼Œç»“æœå°±æ˜¯ *array of pointers to function returning object of T*ã€‚ æœ‰äº†è¿™äº›è¯´æ˜ï¼Œå¯ä»¥è¯•ç€åšä¸€ä¸‹ä¸‹é¢çš„é¢˜ï¼Œçœ‹çœ‹è‡ªå·±æ˜¯å¦çœŸçš„ç†è§£äº†ï¼š 12345678910111213141516171819202122char **argv // argv: pointer to pointer to char // æŒ‡å‘ char å‹æŒ‡é’ˆçš„æŒ‡é’ˆint (*daytab)[13] // daytab: pointer to array[13] of int // æŒ‡å‘ int å‹æ•°ç»„çš„æŒ‡é’ˆint *daytab[13] // daytab: array[13] of pointer to int // å­˜æ”¾ int å‹æŒ‡é’ˆçš„æ•°ç»„void *comp() // comp: function returning pointer to void // è¿”å›å€¼ä¸ºæŒ‡å‘ void å‹æŒ‡é’ˆçš„å‡½æ•°void (*comp)() // comp: pointer to function returning void // æŒ‡å‘è¿”å›å€¼ä¸º void å‹å‡½æ•°çš„æŒ‡é’ˆchar (*(*x())[])() // x: function returning pointer to array[] of // pointer to function returning char // è¿”å›å€¼ä¸º char å‹çš„å‡½æ•°char (*(*x[3])())[5] // x: array[3] of pointer to function returning // pointer to array[5] of char ç†è§£å¤æ‚å£°æ˜å¯ç”¨çš„â€œå³å·¦æ³•åˆ™â€ï¼šä»å˜é‡åçœ‹èµ·ï¼Œå…ˆå¾€å³ï¼Œå†å¾€å·¦ï¼Œç¢°åˆ°ä¸€ä¸ªåœ†æ‹¬å·å°±è°ƒè½¬é˜…è¯»çš„æ–¹å‘ï¼›æ‹¬å·å†…åˆ†æå®Œå°±è·³å‡ºæ‹¬å·ï¼Œè¿˜æ˜¯æŒ‰å…ˆå³åå·¦çš„é¡ºåºï¼Œå¦‚æ­¤å¾ªç¯ï¼Œç›´åˆ°æ•´ä¸ªå£°æ˜åˆ†æå®Œã€‚ä¸¾ä¾‹ï¼š 1int (*func)(int *p); é¦–å…ˆæ‰¾åˆ°å˜é‡åfuncï¼Œå¤–é¢æœ‰ä¸€å¯¹åœ†æ‹¬å·ï¼Œè€Œä¸”å·¦è¾¹æ˜¯ä¸€ä¸ª*å·ï¼Œè¿™è¯´æ˜funcæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼›ç„¶åè·³å‡ºè¿™ä¸ªåœ†æ‹¬å·ï¼Œå…ˆçœ‹å³è¾¹ï¼Œåˆé‡åˆ°åœ†æ‹¬å·ï¼Œè¿™è¯´æ˜(*func)æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥funcæ˜¯ä¸€ä¸ªæŒ‡å‘è¿™ç±»å‡½æ•°çš„æŒ‡é’ˆï¼Œå³å‡½æ•°æŒ‡é’ˆï¼Œè¿™ç±»å‡½æ•°å…·æœ‰int*ç±»å‹çš„å½¢å‚ï¼Œè¿”å›å€¼ç±»å‹æ˜¯intã€‚ 1int (*func[5])(int *); funcå³è¾¹æ˜¯ä¸€ä¸ª[]è¿ç®—ç¬¦ï¼Œè¯´æ˜funcæ˜¯å…·æœ‰5ä¸ªå…ƒç´ çš„æ•°ç»„ï¼›funcçš„å·¦è¾¹æœ‰ä¸€ä¸ª*ï¼Œè¯´æ˜funcçš„å…ƒç´ æ˜¯æŒ‡é’ˆï¼ˆæ³¨æ„è¿™é‡Œçš„*ä¸æ˜¯ä¿®é¥°funcï¼Œè€Œæ˜¯ä¿®é¥°func[5]çš„ï¼ŒåŸå› æ˜¯[]è¿ç®—ç¬¦ä¼˜å…ˆçº§æ¯”*é«˜ï¼Œfuncå…ˆè·Ÿ[]ç»“åˆï¼‰ã€‚è·³å‡ºè¿™ä¸ªæ‹¬å·ï¼Œçœ‹å³è¾¹ï¼Œåˆé‡åˆ°åœ†æ‹¬å·ï¼Œè¯´æ˜funcæ•°ç»„çš„å…ƒç´ æ˜¯å‡½æ•°ç±»å‹çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘çš„å‡½æ•°å…·æœ‰int*ç±»å‹çš„å½¢å‚ï¼Œè¿”å›å€¼ç±»å‹ä¸ºintã€‚ åœ¨ C++ä¸­ï¼Œè§„åˆ™æ¯” C è¦å¤æ‚ä¸€äº›ã€‚ä¸è¿‡ï¼ŒåŸºæœ¬æ€æƒ³ä¿æŒä¸å˜ï¼ŒæŒ‰ç…§ C çš„åŸåˆ™æ¥ç†è§£å¤æ‚çš„å£°æ˜ï¼ŒåŸºæœ¬ä¸Šå°±èƒ½æ»¡è¶³è¦æ±‚äº†ã€‚æ²¡æœ‰åœ¨è¿™é‡Œåˆ—å‡º C++çš„è§„åˆ™ä¸€æ–¹é¢æ˜¯å› ä¸ºå¤ªå¹¿ï¼Œä¸èƒ½è¦†ç›–å…¨ï¼›å¦ä¸€ä¸ªåŸå› å°±æ˜¯ï¼ŒæŒ‰ç…§ C çš„è§„åˆ™æ¥å°±è¶³å¤Ÿäº†ï¼Œæ¯•ç«Ÿ C++è¦ä¸ C å…¼å®¹ã€‚","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"}]},{"title":"C è¯­è¨€å…±äº«å†…å­˜å®ç° CyclicBuffer å¾ªç¯ç¼“å†²åŒº","slug":"Cè¯­è¨€å…±äº«å†…å­˜å®ç°CyclicBufferå¾ªç¯ç¼“å†²åŒº","date":"2021-10-21T09:12:06.000Z","updated":"2022-10-15T03:14:29.156Z","comments":true,"path":"2021/10/21/Cè¯­è¨€å…±äº«å†…å­˜å®ç°CyclicBufferå¾ªç¯ç¼“å†²åŒº/","link":"","permalink":"http://example.com/2021/10/21/C%E8%AF%AD%E8%A8%80%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E5%AE%9E%E7%8E%B0CyclicBuffer%E5%BE%AA%E7%8E%AF%E7%BC%93%E5%86%B2%E5%8C%BA/","excerpt":"","text":"å®Œæ•´ä»£ç è¯¦è§GitHub CyclicBufferã€‚ ä»€ä¹ˆæ˜¯å¾ªç¯ç¼“å†²åŒº å¾ªç¯ç¼“å†²åŒºé€šå¸¸åº”ç”¨åœ¨æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„é€šä¿¡ï¼Œå¯ä»¥å‡å°‘ç¨‹åºæŒ‚èµ·çš„æ—¶é—´ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œè“è‰²ç®­å¤´è¡¨ç¤ºè¯»å–æŒ‡é’ˆï¼Œçº¢è‰²è¡¨ç¤ºå†™å…¥æŒ‡é’ˆã€‚å†™å…¥æŒ‡é’ˆå¯ä»¥åœ¨ç¼“å†²åŒºæœ‰å‰©ä½™ç©ºé—´æ—¶ä¸ä¸­æ–­åœ°å†™å…¥æ•°æ®ï¼Œè¯»å–æŒ‡é’ˆå¯ä»¥åœ¨å¾ªç¯ç¼“å†²åŒºæœ‰æ•°æ®æ—¶ä¸åœè¯»å–ã€‚ å¦‚ä½•è®¾è®¡å¾ªç¯ç¼“å†²åŒºä¸ºäº†æ–¹ä¾¿ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œæˆ‘ä»¬åœ¨å…±äº«å†…å­˜ä¸­åˆ›å»ºå¾ªç¯ç¼“å†²åŒºã€‚åŸºæœ¬åŸç†å¦‚å›¾ï¼š ç»“æ„ä½“å®šä¹‰1234567typedef struct CyclicBuffer&#123; uint8_t buf[CYCBUFFSIZ]; //ç¼“å†²åŒº uint8_t read; //è¯»æŒ‡é’ˆ uint8_t write; //å†™æŒ‡é’ˆ uint32_t valid_size; //å·²å†™å…¥æ•°æ®æ•°&#125; CyCBuf; å†™å…¥æ•°æ®123456789void cycbuff_write(CyCBuf *cycbuff, uint8_t ch)&#123; while (cycbuff_isfull(cycbuff)) ; cycbuff-&gt;buf[cycbuff-&gt;write] = ch; cycbuff-&gt;write++; cycbuff-&gt;write %= CYCBUFFSIZ; cycbuff-&gt;valid_size++;&#125; å†™å…¥æ•°æ®å‰ï¼Œè¦æ£€æŸ¥ç¼“å†²åŒºæ˜¯å¦å·²æ»¡ï¼Œå¦‚æœå·²æ»¡å°±å¾—æŒ‚èµ·ç­‰å¾…ã€‚ç›´åˆ°ç¼“å†²åŒºæœ‰ç©ºé—´å†è¿›è¡Œå†™å…¥ã€‚ å†™å…¥æŒ‡é’ˆæ¯æ¬¡å†™å®Œå‘ååç§»ä¸€ä½ï¼Œvalid_sizeè®°å½•å½“å‰ç¼“å†²åŒºä¸­æœ‰æ•ˆæ•°æ®ä¸ªæ•°ã€‚ è¯»å–æ•°æ®1234567891011uint8_t cycbuff_read(CyCBuf *cycbuff)&#123; uint8_t ch; while (cycbuff_isempty(cycbuff)) ; ch = cycbuff-&gt;buf[cycbuff-&gt;read]; cycbuff-&gt;read++; cycbuff-&gt;read %= CYCBUFFSIZ; cycbuff-&gt;valid_size--; return ch;&#125; è¯»å–æ•°æ®å‰ï¼Œè¦æ£€æŸ¥ç¼“å†²åŒºæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºå°±è¦æŒ‚èµ·ç­‰å¾…ã€‚ åˆ¤æ–­ç©º123456bool cycbuff_isempty(CyCBuf *cycbuff)&#123; if (cycbuff-&gt;valid_size == 0) return true; return false;&#125; åˆ¤æ–­æ»¡123456bool cycbuff_isfull(CyCBuf *cycbuff)&#123; if (cycbuff-&gt;valid_size == CYCBUFFSIZ) return true; return false;&#125; æœ¬æ¬¡å®éªŒä¸­ï¼Œä¸ºäº†æ–¹ä¾¿æœŸé—´ï¼Œç”¨valid_sizeä¿å­˜æœ‰æ•ˆæ•°æ®ä¸ªæ•°ï¼Œæ²¡æœ‰ç”¨è¯»å†™æŒ‡é’ˆæ˜¯å¦é‡åˆæ¥åˆ¤æ–­ï¼Œè¿™å°±æ— éœ€å†è€ƒè™‘è¯»å†™æŒ‡é’ˆé‡åˆæ—¶ï¼Œæ˜¯ç©ºè¿˜æ˜¯æ»¡ã€‚ æ•°æ®æ”¶å‘æµç¨‹æœåŠ¡ç«¯ - å†™å…¥12345678910111213141516void server(CyCBuf *cycbuff, SHMS *shms)&#123; cycbuff_init(cycbuff); while (1) &#123; puts(&quot;Enter Message: &quot;); uint8_t ch[BUFFERSIZE]; fgets(ch, BUFFERSIZE, stdin); for (size_t i = 0; ch[i] != &#x27;\\n&#x27; &amp;&amp; i &lt; BUFFERSIZE; i++) &#123; cycbuff_write(cycbuff, ch[i]); &#125; cycbuff_write(cycbuff, &#x27;\\n&#x27;); &#125; exit(0);&#125; SHMS *shmsä¸ºå…±äº«å†…å­˜ç›¸å…³æ•°æ®ï¼Œæœ‰å…³å…±äº«å†…å­˜çš„ä½¿ç”¨å¯ä»¥å‚è€ƒè¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹å…±äº«å†…å­˜ï¼ˆSharedMemoryï¼‰ã€‚ å®¢æˆ·ç«¯ - è¯»å–1234567891011121314151617181920void client(CyCBuf *cycbuff, SHMS *shms)&#123; printf(&quot;Server operational: shm id is %d\\n&quot;, shms-&gt;shmid); while (1) &#123; uint8_t ch; puts(&quot;Recv Message: &quot;); while (1) &#123; ch = cycbuff_read(cycbuff); if (ch == &#x27;\\n&#x27;) &#123; printf(&quot;\\n&quot;); break; &#125; fflush(stdout); printf(&quot;%c&quot;, ch); &#125; &#125;&#125; è¯»å–æ•°æ®ä»¥å›è½¦ç¬¦ä¸ºåˆ†ç•Œï¼Œå½“è¯»åˆ°å›è½¦ç¬¦æ—¶è¿›è¡Œæ¢è¡Œå¤„ç†ï¼Œå¹¶ç­‰å¾…æ¥æ”¶ä¸‹ä¸€æ³¢æ•°æ®ã€‚ å®éªŒç»“æœ ReferenceCircular buffer","categories":[],"tags":[]},{"title":"è§£å†³ gcc ç¼–è¯‘å fflush å¤±æ•ˆ","slug":"è§£å†³gccç¼–è¯‘åfflushå¤±æ•ˆ","date":"2021-10-21T01:56:51.000Z","updated":"2022-10-15T03:14:29.806Z","comments":true,"path":"2021/10/21/è§£å†³gccç¼–è¯‘åfflushå¤±æ•ˆ/","link":"","permalink":"http://example.com/2021/10/21/%E8%A7%A3%E5%86%B3gcc%E7%BC%96%E8%AF%91%E5%90%8Efflush%E5%A4%B1%E6%95%88/","excerpt":"","text":"ä¿ç•™ç°åœºä½¿ç”¨scanf()è·å–è¾“å…¥æ—¶ï¼Œå› ä¸ºæ¶‰åŠé”®ç›˜ç¼“å†²åŒºçš„é—®é¢˜ï¼Œæ¯æ¬¡è¾“å…¥åæƒ³è¦æŠŠç¼“å†²æ¸…ç©ºï¼Œä½†æ˜¯åœ¨ gcc ç¼–è¯‘åï¼Œä½¿ç”¨fflushæ— æ³•æ¸…ç©ºç¼“å†²åŒºã€‚ æ¢ç©¶åŸå› C æ ‡å‡† (ISO/IEC 9899:1999 standard) è§„å®šfflush(stdin)æ“ä½œæ˜¯æœªå®šä¹‰çš„&lt;å‚çœ‹ã€ŠISO/IEC 9899:1999 standardã€‹p270&gt;;ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ä¸€å®šèƒ½å®ç°åˆ·æ–°åŠŸèƒ½ï¼Œä½†æœ‰çš„ç¼–è¯‘å™¨å¯èƒ½ä¸éµå¾ªæ ‡å‡†ï¼Œå¯¹fflush(stdin)æ“ä½œä¸äºˆè­¦å‘Šï¼Œå¹¶ä¸”æœ‰æ—¶å¯èƒ½äº§ç”Ÿæ­£ç¡®çš„ç»“æœï¼Œä½†æœ€å¥½ä¸è¦è¿™æ ·ä½¿ç”¨ã€‚ è§£å†³æ–¹æ³•é€šè¿‡ while å¾ªç¯æŠŠè¾“å…¥æµä¸­çš„ä½™ç•™æ•°æ®â€œåƒâ€æ‰ï¼š 123int c;while ((c=getchar()) != â€˜\\nâ€™ &amp;&amp; c != EOF);","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"RISC-V å…¥é—¨-RVOS ç³»ç»Ÿå¼•å¯¼","slug":"RISC-Vå…¥é—¨-RVOSç³»ç»Ÿå¼•å¯¼","date":"2021-10-20T15:13:40.000Z","updated":"2022-10-15T03:14:29.542Z","comments":true,"path":"2021/10/20/RISC-Vå…¥é—¨-RVOSç³»ç»Ÿå¼•å¯¼/","link":"","permalink":"http://example.com/2021/10/20/RISC-V%E5%85%A5%E9%97%A8-RVOS%E7%B3%BB%E7%BB%9F%E5%BC%95%E5%AF%BC/","excerpt":"","text":"æ“ä½œç³»ç»Ÿå®šä¹‰ä¸åˆ†ç±»æ“ä½œç³»ç»Ÿï¼ˆè‹±è¯­ï¼šOperating Systemï¼Œç¼©å†™ï¼šOSï¼‰æ˜¯ä¸€ç»„ç³»ç»Ÿè½¯ä»¶ç¨‹åºï¼Œç‹­ä¹‰ä¸Šå°±æ˜¯å†…æ ¸å¦‚ Linuxï¼Œå¹¿ä¹‰ä¸Šå°±æ˜¯å†…æ ¸åŠ ä¸€ç»„è½¯ä»¶ç»„æˆçš„å‘è¡ŒåŒ…ï¼Œå¦‚ Ubuntuï¼ŒDebianï¼š â€¢ ä¸»ç®¡å¹¶æ§åˆ¶è®¡ç®—æœºæ“ä½œã€è¿ç”¨å’Œè¿è¡Œç¡¬ä»¶ã€è½¯ä»¶èµ„æº â€¢ æä¾›å…¬å…±æœåŠ¡æ¥ç»„ç»‡ç”¨æˆ·äº¤äº’ã€‚ ç¡¬ä»¶çš„åŸºæœ¬æ¦‚å¿µ Hart Platformä¸èƒ½è¯´æ˜¯ä¸ªæ¿å­ï¼Œåº”è¯¥ç†è§£ä¸ºèŠ¯ç‰‡ã€‚æ—©æœŸçš„æ¿å­å°±æ˜¯ä¸€å—èŠ¯ç‰‡åŠ ä¸Šå„ç§å¤–è®¾ï¼Œä½†æ˜¯éšç€æŠ€æœ¯å‘å±•ï¼Œæ¿å­è¶Šæ¥è¶Šå°ï¼Œå¤–è®¾å´å¹¶æ²¡æœ‰å˜å°‘ï¼Œæ˜¯å› ä¸ºå¤–è®¾éƒ½è¢«é›†æˆåˆ°äº†èŠ¯ç‰‡ä¸­ã€‚å½“æ‰€æœ‰å¤–è®¾éƒ½è¢«é›†æˆï¼Œé‚£ä¹ˆèŠ¯ç‰‡å°±æ˜¯ platformã€‚ SoC(System on Chip)ç‰‡ä¸Šç³»ç»Ÿ QEMU æ¨¡æ‹Ÿ virt è¿™ä¸ªå¹³å°ï¼Œè¿™ä¸ªå¹³å°æœ‰å…«ä¸ª Hartã€‚ åœ°å€æ˜ å°„ ä¸ºäº†æ–¹ä¾¿è®¿é—®å¤–è®¾ï¼Œç°åœ¨ä¸»æµçš„ platform ä¼šå¯¹å¤–è®¾çš„å†…å­˜åœ°å€åšä¸€ä¸ªæ˜ å°„ã€‚æ˜ å°„åˆ° platform çš„çœŸå®ç‰©ç†åœ°å€ã€‚å¯¹çœŸå®ç‰©ç†åœ°å€è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±æ˜¯å¯¹å¤–è®¾çš„åœ°å€è¿›è¡Œæ“ä½œã€‚ ç‰©ç†åœ°å€ä»æœ€ä½ä½åˆ°æœ€é«˜ä½éƒ½è¢«åˆ†é…ç»™äº†å„ç§å¤–è®¾ã€‚ å¼•å¯¼è¿‡ç¨‹ä»‹ç» é€šç”µåï¼Œä¼šå…ˆåˆ°ç®­å¤´æ‰€æŒ‡çš„åœ°å€ï¼Œè¿™ä¸ªåœ°å€å°±æ˜¯å¯¹åº”çš„ ROM å¤–è®¾é¦–åœ°å€ã€‚ROM ç›¸å½“äºä¸€ä¸ªå°ç¡¬ç›˜ï¼Œæ–­ç”µåä¸ä¼šä¸¢å¤±æ•°æ®ã€‚è¿™é‡Œé¢å›ºåŒ–äº†ä¸€äº›æŒ‡ä»¤ã€‚ ä¸»è¦å°±æ˜¯è·³è½¬æŒ‡ä»¤ï¼Œè¿è¡Œåˆ° kernel æ®µç»§ç»­æ‰§è¡Œã€‚ å…«æ ¸åŒæ—¶ä¼šæ‰§è¡Œè¿™ä¸ªè¿‡ç¨‹ã€‚ ä»¥ä¸Šæ˜¯ç¡¬ä»¶çš„éƒ¨åˆ†è¿‡ç¨‹ï¼Œè½¯ä»¶è¯¥å¦‚ä½•å†™ï¼Ÿ ä¸ºäº†ç®€åŒ–å­¦ä¹ æµç¨‹å’Œé™ä½è°ƒè¯•éš¾åº¦ï¼Œç›®å‰åªæ”¯æŒå•æ ¸ï¼Œå…¶ä½™ä¸ƒä¸ªæ ¸å¤„äºç©ºè½¬çŠ¶æ€ã€‚ å¦‚ä½•åˆ¤æ–­å½“å‰ Hart æ˜¯ä¸æ˜¯ç¬¬ä¸€ä¸ªï¼Ÿ è¿™äº›å¯„å­˜å™¨å¿…é¡»ä½¿ç”¨ä»¥ä¸‹çš„æŒ‡ä»¤è¯»å†™ï¼š ä»¥ä¸ŠæŒ‡ä»¤å°±æ˜¯å°†å¯„å­˜å™¨å€¼è¿›è¡Œä¸€æ¬¡äº¤æ¢ï¼Œåªä¸è¿‡è¿™ä¸ªè¿‡ç¨‹æ˜¯åŸå­æ€§çš„ï¼Œä¸èƒ½è¢«æ‰“æ–­ã€‚ CSRRWç»å¸¸ä¼šç”¨åœ¨ä¼ªæŒ‡ä»¤CSRWä¸­ï¼Œå®Œæ•´æŒ‡ä»¤ä¸­ï¼Œç¬¬ä¸€æ­¥å‘x0å†™å…¥æ•°æ®ï¼Œå°±æ˜¯ç©ºæ“ä½œï¼Œç¬¬äºŒæ­¥å°†rså†™å…¥csrã€‚è¿™ä¸ªä¼ªæŒ‡ä»¤å°±æ˜¯å®Œæˆäº†ä¸€ä¸ªå†™å…¥csrçš„æ“ä½œã€‚ mhartidå°±æ˜¯machine hart idã€‚ å­¦ä¹ ä»¥ä¸Šå‡ ä¸ªæŒ‡ä»¤ï¼Œå°±å¯ä»¥å®Œæˆåˆ¤æ–­ hart æ˜¯å¦ä¸ºç¬¬ä¸€ä¸ªçš„å·¥ä½œäº†ï¼Œ 123csrr t0, mhartid #è¯»å¯„å­˜å™¨å€¼mv tp, t0 #bnez t0, park # è·³è½¬æŒ‡ä»¤ï¼Œä¸ç­‰äº 0 å°±è·³è½¬åˆ° park æ ‡ç­¾ Assembly12wfiä¼‘çœ æŒ‡ä»¤ å¦‚ä½•åˆå§‹åŒ–æ ˆç©ºé—´å¦‚ä½•è·³è½¬åˆ° C è¯­è¨€ç¯å¢ƒAssembly123456789101112131415161718192021222324252627282930313233343536373839# start.S#include &quot;platform.h&quot; # size of each hart&#x27;s stack is 1024 bytes .equ STACK_SIZE, 1024 .global _start .text_start: # park harts with id != 0 csrr t0, mhartid # read current hart id mv tp, t0 # keep CPU&#x27;s hartid in its tp for later usage. bnez t0, park # if we&#x27;re not on the hart 0 # we park the hart # Setup stacks, the stack grows from bottom to top, so we put the # stack pointer to the very end of the stack range. slli t0, t0, 10 # shift left the hart id by 1024 ###### åˆå§‹åŒ–æ ˆç©ºé—´ ###### # set the initial stack pointer to the end of the first stack space la sp, stacks + STACK_SIZE # move the current hart stack pointer to its place in the stack space add sp, sp, t0 ###### åˆå§‹åŒ–æ ˆç©ºé—´ ###### ###### è·³è½¬åˆ°Cè¯­è¨€ç¯å¢ƒ ###### j start_kernel # hart 0 jump to c, start_kernel is the entry point of the kernel ###### è·³è½¬åˆ°Cè¯­è¨€ç¯å¢ƒ ######park: wfi j parkstacks: # allocate space for all the harts stacks .skip STACK_SIZE * MAXNUM_CPU .end # End of file 123456// kernel.cvoid start_kernel(void)&#123; while (1) &#123;&#125;; // stop here!&#125; é€šè¿‡ UART æ‰“å°ä¿¡æ¯è¿æ¥æ–¹å¼ çœŸå®çš„ç¡¬ä»¶å¼€å‘æ˜¯æœ‰ä¸€ä¸ªå¿«å¼€å‘æ¿ï¼Œä½†æ˜¯è¿™ä¸ªè¯¾ç¨‹é‡Œä½¿ç”¨çš„æ˜¯ QEMU æ¥æ¨¡æ‹Ÿå¼€å‘æ¿çš„ç¡¬ä»¶ç¯å¢ƒã€‚å¦‚æœè¦åœ¨ç¨‹åºé‡Œæ‰“å°ä¸€æ®µä¿¡æ¯ï¼Œæ­£å¸¸çš„æƒ…å†µæ˜¯åœ¨å¼€å‘æ¿ä¸Šè¿æ¥æ˜¾ç¤ºå™¨ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯é€šè¿‡å°†ä¿¡æ¯ç”¨ä¸²å£ä¼ åˆ°ä¸»æœºä¸Šï¼Œç„¶åç”¨ä¸»æœºçš„å±å¹•æ˜¾ç¤ºä¿¡æ¯ã€‚ ä¸²å£çº¿é‡Œæ˜¯æœ‰ä¸¤æ ¹çº¿ï¼Œè´Ÿè´£æ”¶ä¿¡æ¯å’Œå‘ä¿¡æ¯ã€‚ UART ç‰¹ç‚¹ å¹¶è¡Œå°±æ˜¯éœ€è¦å¤šæ ¹çº¿ï¼Œæ¯”å¦‚æœ‰ä¸¤æ ¹çº¿ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¸€æ¬¡å‘é€ä¸¤ä½ã€‚ä½†æ˜¯ä¸²è¡ŒèŠ‚çœææ–™ã€‚ æ•°æ®é€šä¿¡å°±ä¼šæ¶‰åŠåŒæ­¥çš„é—®é¢˜ï¼ŒåŒæ­¥çš„è¯éœ€è¦ä¸€æ ¹æ—¶é’Ÿçº¿æ¥åå•†å¥½å‘é€æ—¶é—´å’Œæ¥æ”¶æ—¶é—´ã€‚è€Œ UART ä½¿ç”¨å¼‚æ­¥ï¼Œå‘é€çš„æ•°æ®ä¸ä»…ä»…æ˜¯çœŸå®çš„æ•°æ®ï¼Œè¿˜ä¼šå¸¦æœ‰ä¸€äº›æ ‡è¯†ä¿¡æ¯ã€‚è¿™äº›æ ‡è¯†å¯ä»¥åˆ¤æ–­å‡ºæ˜¯æ”¶è¿˜æ˜¯å‘ã€‚ ç‰©ç†æ¥å£ UART é€šè®¯åè®® å›¾ç¤ºä¸­æ¨ªè½´å¯ä»¥è¡¨ç¤ºæ—¶é—´ï¼Œçºµè½´è¡¨ç¤ºé«˜ä½ç”µå¹³ã€‚ åœ¨éœ€è¦å‘é€æ•°æ®æ—¶ï¼Œä¼šè¿›è¡Œâ€œä¸‹æ‹‰â€1bitï¼Œ1bit æŒç»­çš„æ—¶é—´å°±æ˜¯æ³¢ç‰¹ç‡åˆ†ä¹‹ä¸€ç§’ã€‚ æ•°æ®åœ¨å‘é€è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå—åˆ°å¹²æ‰°ï¼Œä¼šäº§ç”Ÿç•¸å˜ï¼Œæ‰€ä»¥éœ€è¦æ£€éªŒä½æ¥åˆ¤æ–­æ˜¯å¦å‘ç”Ÿç•¸å˜ã€‚ åˆå§‹åŒ– åœ¨è½¯ä»¶ä¸­ï¼Œé…ç½® UART å°±æ˜¯é…ç½®å¯„å­˜å™¨çš„ä¿¡æ¯ã€‚ åœ¨æ¿å­ä¸Šæœ‰ä¸ªå…ƒå™¨ä»¶å«æ™¶æŒ¯ï¼ˆcrystalï¼‰ï¼Œä»–ä¼šäº§ç”Ÿå›ºå®šé¢‘ç‡çš„æ—¶é’Ÿã€‚ä¸€ç§æ˜¯ 1.8432MHZï¼Œä¸€ç§æ˜¯ 7.3728MHZã€‚æƒ³è¦è·å¾—æŒ‡å®šçš„è¾“å‡ºé¢‘ç‡å°±éœ€è¦å¯¹å¯„å­˜å™¨è¿›è¡Œé…ç½®ã€‚æŸ¥è¡¨å¯ä»¥å¾—åˆ°é…ç½®ä¿¡æ¯ã€‚æ¯”å¦‚è·å¾— 38.4K é¢‘ç‡çš„è¾“å‡ºï¼Œå°±è¦é…ç½®å¯„å­˜å™¨å€¼ä¸º 3ã€‚ LCR å¯„å­˜å™¨åŠŸèƒ½æ¯”è¾ƒå¤šï¼Œå°†ç¬¬ 7 ä½è®¾ç½®ä¸º 1 å°±æ˜¯ç”¨æ¥è®¾ç½®æ³¢ç‰¹ç‡ã€‚ å›¾ä¸­DLLå’ŒDLMå¯„å­˜å™¨å°±æ˜¯éœ€è¦é…ç½®çš„å¯„å­˜å™¨ã€‚å› ä¸º UART å¯„å­˜å™¨éƒ½æ˜¯ 8 ä½çš„ï¼Œå°†å€¼0x0003é«˜ä½0x00å­˜åœ¨DLMä¸­ï¼Œå°†ä½ä½0x03å­˜å…¥DLLã€‚","categories":[{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"}]},{"title":"è§£å†³ Segmentation fault (core dumped)","slug":"è§£å†³Segmentation-fault-core-dumped","date":"2021-10-20T06:23:02.000Z","updated":"2022-10-15T03:14:29.836Z","comments":true,"path":"2021/10/20/è§£å†³Segmentation-fault-core-dumped/","link":"","permalink":"http://example.com/2021/10/20/%E8%A7%A3%E5%86%B3Segmentation-fault-core-dumped/","excerpt":"","text":"ç›¸å…³æ¦‚å¿µCoreåœ¨ä½¿ç”¨åŠå¯¼ä½“ä½œä¸ºå†…å­˜çš„ææ–™å‰ï¼Œäººç±»æ˜¯åˆ©ç”¨çº¿åœˆå½“ä½œå†…å­˜çš„ææ–™ï¼ˆå‘æ˜è€…ä¸ºç‹å®‰ï¼‰ï¼Œçº¿åœˆå°±å«ä½œ core ï¼Œç”¨çº¿åœˆåšçš„å†…å­˜å°±å«ä½œ core memoryã€‚å¦‚ä»Šï¼ŒåŠå¯¼ä½“å·¥ä¸šæ¾å‹ƒå‘å±•ï¼Œå·²ç»æ²¡æœ‰äººç”¨core memory äº†ï¼Œä¸è¿‡ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œäººä»¬è¿˜æ˜¯æŠŠè®°å¿†ä½“å«ä½œ core ã€‚ Core dumpæˆ‘ä»¬åœ¨å¼€å‘ï¼ˆæˆ–ä½¿ç”¨ï¼‰ä¸€ä¸ªç¨‹åºæ—¶ï¼Œæœ€æ€•çš„å°±æ˜¯ç¨‹åºè«æ˜å…¶å¦™åœ°å®•æ‰ã€‚è™½ç„¶ç³»ç»Ÿæ²¡äº‹ï¼Œä½†æˆ‘ä»¬ä¸‹æ¬¡ä»å¯èƒ½é‡åˆ°ç›¸åŒçš„é—®é¢˜ã€‚äºæ˜¯è¿™æ—¶æ“ä½œç³»ç»Ÿå°±ä¼šæŠŠç¨‹åºå®•æ‰æ—¶çš„å†…å­˜å†…å®¹ dump å‡ºæ¥ï¼ˆç°åœ¨é€šå¸¸æ˜¯å†™åœ¨ä¸€ä¸ªå« core çš„ file é‡Œé¢ï¼‰ï¼Œè®©æˆ‘ä»¬åšä¸ºå‚è€ƒã€‚è¿™ä¸ªåŠ¨ä½œå°±å«ä½œ core dumpã€‚ å¦‚ä½•è·å– Core æ–‡ä»¶1ã€åœ¨ä¸€äº› Linux ç‰ˆæœ¬ä¸‹ï¼Œé»˜è®¤æ˜¯ä¸äº§ç”Ÿcoreæ–‡ä»¶çš„ï¼Œé¦–å…ˆå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿcoreæ–‡ä»¶çš„å¤§å°é™åˆ¶ï¼š 12$:~/segfault$ ulimit -c0 2ã€å¯ä»¥çœ‹åˆ°é»˜è®¤è®¾ç½®æƒ…å†µä¸‹ï¼Œæœ¬æœº Linux ç¯å¢ƒä¸‹å‘ç”Ÿæ®µé”™è¯¯æ—¶ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆcoreæ–‡ä»¶ï¼Œä¸‹é¢è®¾ç½®ä¸‹coreæ–‡ä»¶çš„å¤§å°é™åˆ¶ï¼ˆå•ä½ä¸º KBï¼‰ï¼š 123$:~/segfault$ ulimit -c 1024$:~/segfault$ ulimit -c1024 3ã€é‡æ–°è¿è¡Œç¨‹åºï¼Œå¦‚æœå‘ç”Ÿæ®µé”™è¯¯ï¼Œå°±ä¼šç”Ÿæˆcoreæ–‡ä»¶ã€‚ å‡ºç°æ®µé”™è¯¯çš„å¯èƒ½åŸå› è®¿é—®ä¸å­˜åœ¨çš„å†…å­˜åœ°å€1234567#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;void main()&#123; int *ptr = NULL; *ptr = 0;&#125; è®¿é—®ç³»ç»Ÿä¿æŠ¤çš„å†…å­˜åœ°å€1234567#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;void main()&#123; int *ptr = (int *)0; *ptr = 100;&#125; è®¿é—®åªè¯»çš„å†…å­˜åœ°å€12345678#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;#include&lt;string.h&gt;void main()&#123; char *ptr = &quot;test&quot;; strcpy(ptr, &quot;TEST&quot;);&#125; æ ˆæº¢å‡º123456#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;void main()&#123; main();&#125; æ®µé”™è¯¯ä¿¡æ¯è·å–ç¨‹åºå‘ç”Ÿæ®µé”™è¯¯æ—¶ï¼Œæç¤ºä¿¡æ¯å¾ˆå°‘ï¼Œä¸‹é¢æœ‰å‡ ç§æŸ¥çœ‹æ®µé”™è¯¯çš„å‘ç”Ÿä¿¡æ¯çš„é€”å¾„ã€‚ dmesgdmesg å¯ä»¥åœ¨åº”ç”¨ç¨‹åº crash æ‰æ—¶ï¼Œæ˜¾ç¤ºå†…æ ¸ä¸­ä¿å­˜çš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œé€šè¿‡dmesgå‘½ä»¤å¯ä»¥æŸ¥çœ‹å‘ç”Ÿæ®µé”™è¯¯çš„ç¨‹åºåç§°ã€å¼•èµ·æ®µé”™è¯¯å‘ç”Ÿçš„å†…å­˜åœ°å€ã€æŒ‡ä»¤æŒ‡é’ˆåœ°å€ã€å †æ ˆæŒ‡é’ˆåœ°å€ã€é”™è¯¯ä»£ç ã€é”™è¯¯åŸå› ç­‰ã€‚ 12$:~/segfault$ dmesg[ 2329.479037] segfault3[2700]: segfault at 80484e0 ip 00d2906a sp bfbbec3c error 7 in libc-2.10.1.so[cb4000+13e000] -gä½¿ç”¨ gcc ç¼–è¯‘ç¨‹åºçš„æºç æ—¶ï¼ŒåŠ ä¸Š-gå‚æ•°ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­åŠ å…¥å¯ä»¥ç”¨äº gdb è°ƒè¯•çš„æœ‰ç”¨ä¿¡æ¯ã€‚ 12$:~/segfault$ gcc -g -o segfault3 segfault3.c nmä½¿ç”¨ nm å‘½ä»¤åˆ—å‡ºäºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ï¼ŒåŒ…æ‹¬ç¬¦å·åœ°å€ã€ç¬¦å·ç±»å‹ã€ç¬¦å·åç­‰ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©å®šä½åœ¨å“ªé‡Œå‘ç”Ÿäº†æ®µé”™è¯¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536panfeng@ubuntu:~/segfault$ nm segfault308049f20 d _DYNAMIC08049ff4 d _GLOBAL_OFFSET_TABLE_080484dc R _IO_stdin_used w _Jv_RegisterClasses08049f10 d __CTOR_END__08049f0c d __CTOR_LIST__08049f18 D __DTOR_END__08049f14 d __DTOR_LIST__080484ec r __FRAME_END__08049f1c d __JCR_END__08049f1c d __JCR_LIST__0804a014 A __bss_start0804a00c D __data_start08048490 t __do_global_ctors_aux08048360 t __do_global_dtors_aux0804a010 D __dso_handle w __gmon_start__0804848a T __i686.get_pc_thunk.bx08049f0c d __init_array_end08049f0c d __init_array_start08048420 T __libc_csu_fini08048430 T __libc_csu_init U __libc_start_main@@GLIBC_2.00804a014 A _edata0804a01c A _end080484bc T _fini080484d8 R _fp_hw080482bc T _init08048330 T _start0804a014 b completed.69900804a00c W data_start0804a018 b dtor_idx.6992080483c0 t frame_dummy080483e4 T main U memcpy@@GLIBC_2.0 lddä½¿ç”¨ ldd å‘½ä»¤æŸ¥çœ‹äºŒè¿›åˆ¶ç¨‹åºçš„å…±äº«é“¾æ¥åº“ä¾èµ–ï¼ŒåŒ…æ‹¬åº“çš„åç§°ã€èµ·å§‹åœ°å€ï¼Œè¿™æ ·å¯ä»¥ç¡®å®šæ®µé”™è¯¯åˆ°åº•æ˜¯å‘ç”Ÿåœ¨äº†è‡ªå·±çš„ç¨‹åºä¸­è¿˜æ˜¯ä¾èµ–çš„å…±äº«åº“ä¸­ã€‚ 1234$:~/segfault$ ldd ./segfault3 linux-gate.so.1 =&gt; (0x00e08000) libc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0x00675000) /lib/ld-linux.so.2 (0x00482000) è°ƒè¯•æ–¹æ³•å’ŒæŠ€å·§ä½¿ç”¨ gcc å’Œ gdbè°ƒè¯•æµç¨‹ ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ gdb è°ƒè¯•ç¨‹åºï¼Œåœ¨ç¼–è¯‘é˜¶æ®µåŠ ä¸Š-g å‚æ•°ï¼Œ 1$:~/segfault$ gcc -g -o segfault3 segfault3.c ä½¿ç”¨ gdb å‘½ä»¤è°ƒè¯•ç¨‹åºï¼š 123$:~/segfault$ gdb -q ./segfault3 Reading symbols from ./segfault3...done.(gdb) è¿›å…¥ gdb åï¼Œè¿è¡Œç¨‹åºï¼š 123456(gdb) runStarting program: ./segfault3 Program received signal SIGSEGV, Segmentation fault.0x001a306a in memcpy () from /lib/tls/i686/cmov/libc.so.6(gdb) ä»è¾“å‡ºçœ‹å‡ºï¼Œç¨‹åºæ”¶åˆ°SIGSEGVä¿¡å·ï¼Œè§¦å‘æ®µé”™è¯¯ï¼Œå¹¶æç¤ºåœ°å€0x001a306aã€è°ƒç”¨ memcpy æŠ¥çš„é”™ï¼Œä½äº/lib/tls/i686/cmov/libc.so.6åº“ä¸­ã€‚ å®Œæˆè°ƒè¯•åï¼Œè¾“å…¥quitå‘½ä»¤é€€å‡º gdbï¼š é€‚ç”¨åœºæ™¯ ä»…å½“èƒ½ç¡®å®šç¨‹åºä¸€å®šä¼šå‘ç”Ÿæ®µé”™è¯¯çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ å½“ç¨‹åºçš„æºç å¯ä»¥è·å¾—çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨-gå‚æ•°ç¼–è¯‘ç¨‹åºã€‚ ä¸€èˆ¬ç”¨äºæµ‹è¯•é˜¶æ®µï¼Œç”Ÿäº§ç¯å¢ƒä¸‹ gdb ä¼šæœ‰å‰¯ä½œç”¨ï¼šä½¿ç¨‹åºè¿è¡Œå‡æ…¢ï¼Œè¿è¡Œä¸å¤Ÿç¨³å®šï¼Œç­‰ç­‰ã€‚ å³ä½¿åœ¨æµ‹è¯•é˜¶æ®µï¼Œå¦‚æœç¨‹åºè¿‡äºå¤æ‚ï¼Œgdb ä¹Ÿä¸èƒ½å¤„ç†ã€‚ ä½¿ç”¨ core æ–‡ä»¶å’Œ gdbåœ¨ä¸ŠèŠ‚ä¸­æåˆ°æ®µé”™è¯¯ä¼šè§¦å‘SIGSEGVä¿¡å·ï¼Œé€šè¿‡man 7 signalï¼Œå¯ä»¥çœ‹åˆ°SIGSEGVé»˜è®¤çš„handlerä¼šæ‰“å°æ®µé”™è¯¯å‡ºé”™ä¿¡æ¯ï¼Œå¹¶äº§ç”Ÿcoreæ–‡ä»¶ï¼Œç”±æ­¤æˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºç¨‹åºå¼‚å¸¸é€€å‡ºæ—¶ç”Ÿæˆçš„coreæ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯ï¼Œä½¿ç”¨ gdb å·¥å…·æ¥è°ƒè¯•ç¨‹åºä¸­çš„æ®µé”™è¯¯ã€‚ è°ƒè¯•æµç¨‹ è¿è¡Œæœ‰æ®µé”™è¯¯çš„ç¨‹åºï¼Œç”Ÿæˆ core æ–‡ä»¶ã€‚ gdb åŠ è½½ core æ–‡ä»¶ 1234567891011$:~/segfault$ gdb ./segfault3 ./core Reading symbols from /home/panfeng/segfault/segfault3...done.warning: Can&#x27;t read pathname for load map: è¾“å…¥/è¾“å‡ºé”™è¯¯.Reading symbols from /lib/tls/i686/cmov/libc.so.6...(no debugging symbols found)...done.Loaded symbols for /lib/tls/i686/cmov/libc.so.6Reading symbols from /lib/ld-linux.so.2...(no debugging symbols found)...done.Loaded symbols for /lib/ld-linux.so.2Core was generated by `./segfault3&#x27;.Program terminated with signal 11, Segmentation fault.#0 0x0018506a in memcpy () from /lib/tls/i686/cmov/libc.6 ä»è¾“å‡ºçœ‹å‡ºï¼ŒåŒä¸ŠèŠ‚ä¸­ä¸€æ ·çš„æ®µé”™è¯¯ä¿¡æ¯ã€‚ é€‚ç”¨åœºæ™¯ é€‚åˆäºåœ¨å®é™…ç”Ÿæˆç¯å¢ƒä¸‹è°ƒè¯•ç¨‹åºçš„æ®µé”™è¯¯ï¼ˆå³åœ¨ä¸ç”¨é‡æ–°å‘ç”Ÿæ®µé”™è¯¯çš„æƒ…å†µä¸‹é‡ç°æ®µé”™è¯¯ï¼‰ã€‚ å½“ç¨‹åºå¾ˆå¤æ‚ï¼Œcore æ–‡ä»¶ç›¸å½“å¤§æ—¶ï¼Œè¯¥æ–¹æ³•ä¸å¯ç”¨ã€‚ ä½¿ç”¨ objdumpè°ƒè¯•æµç¨‹ ä½¿ç”¨ dmesg å‘½ä»¤ï¼Œæ‰¾åˆ°æœ€è¿‘å‘ç”Ÿçš„æ®µé”™è¯¯è¾“å‡ºä¿¡æ¯ï¼š 123$:~/segfault$ dmesg... ...[17257.502808] segfault3[3320]: segfault at 80484e0 ip 0018506a sp bfc1cd6c error 7 in libc-2.10.1.so[110000+13e000] å…¶ä¸­ï¼Œå¯¹æˆ‘ä»¬æ¥ä¸‹æ¥çš„è°ƒè¯•è¿‡ç¨‹æœ‰ç”¨çš„æ˜¯å‘ç”Ÿæ®µé”™è¯¯çš„åœ°å€ï¼š80484e0å’ŒæŒ‡ä»¤æŒ‡é’ˆåœ°å€ï¼š0018506aã€‚ ä½¿ç”¨objdumpç”ŸæˆäºŒè¿›åˆ¶çš„ç›¸å…³ä¿¡æ¯ï¼Œé‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼š 1$:~/segfault$ objdump -d ./segfault3 &gt; segfault3Dump å…¶ä¸­ï¼Œç”Ÿæˆçš„segfault3Dumpæ–‡ä»¶ä¸­åŒ…å«äº†äºŒè¿›åˆ¶æ–‡ä»¶çš„segfault3çš„æ±‡ç¼–ä»£ç ã€‚ åœ¨segfault3Dumpæ–‡ä»¶ä¸­æŸ¥æ‰¾å‘ç”Ÿæ®µé”™è¯¯çš„åœ°å€ï¼š 12345678910111213141516171819202122panfeng@ubuntu:~/segfault$ grep -n -A 10 -B 10 &quot;80484e0&quot; ./segfault3Dump 121- 80483df: ff d0 call *%eax122- 80483e1: c9 leave 123- 80483e2: c3 ret 124- 80483e3: 90 nop125-126-080483e4 &lt;main&gt;:127- 80483e4: 55 push %ebp128- 80483e5: 89 e5 mov %esp,%ebp129- 80483e7: 83 e4 f0 and $0xfffffff0,%esp130- 80483ea: 83 ec 20 sub $0x20,%esp131: 80483ed: c7 44 24 1c e0 84 04 movl $0x80484e0,0x1c(%esp)132- 80483f4: 08 133- 80483f5: b8 e5 84 04 08 mov $0x80484e5,%eax134- 80483fa: c7 44 24 08 05 00 00 movl $0x5,0x8(%esp)135- 8048401: 00 136- 8048402: 89 44 24 04 mov %eax,0x4(%esp)137- 8048406: 8b 44 24 1c mov 0x1c(%esp),%eax138- 804840a: 89 04 24 mov %eax,(%esp)139- 804840d: e8 0a ff ff ff call 804831c &lt;memcpy@plt&gt;140- 8048412: c9 leave 141- 8048413: c3 ret é€šè¿‡å¯¹ä»¥ä¸Šæ±‡ç¼–ä»£ç åˆ†æï¼Œå¾—çŸ¥æ®µé”™è¯¯å‘ç”Ÿmainå‡½æ•°ï¼Œå¯¹åº”çš„æ±‡ç¼–æŒ‡ä»¤æ˜¯movl $0x80484e0,0x1c(%esp)ï¼Œæ¥ä¸‹æ¥æ‰“å¼€ç¨‹åºçš„æºç ï¼Œæ‰¾åˆ°æ±‡ç¼–æŒ‡ä»¤å¯¹åº”çš„æºç ï¼Œä¹Ÿå°±å®šä½åˆ°æ®µé”™è¯¯äº†ã€‚ é€‚ç”¨åœºæ™¯ ä¸éœ€è¦-gå‚æ•°ç¼–è¯‘ï¼Œä¸éœ€è¦å€ŸåŠ©äºcoreæ–‡ä»¶ï¼Œä½†éœ€è¦æœ‰ä¸€å®šçš„æ±‡ç¼–è¯­è¨€åŸºç¡€ã€‚ 2ã€å¦‚æœä½¿ç”¨äº† gcc ç¼–è¯‘ä¼˜åŒ–å‚æ•°ï¼ˆ-O1ï¼Œ-O2ï¼Œ-O3ï¼‰çš„è¯ï¼Œç”Ÿæˆçš„æ±‡ç¼–æŒ‡ä»¤å°†ä¼šè¢«ä¼˜åŒ–ï¼Œä½¿å¾—è°ƒè¯•è¿‡ç¨‹æœ‰äº›éš¾åº¦ã€‚ ä½¿ç”¨ catchsegvcatchsegvå‘½ä»¤ä¸“é—¨ç”¨æ¥æ‰‘è·æ®µé”™è¯¯ï¼Œå®ƒé€šè¿‡åŠ¨æ€åŠ è½½å™¨ï¼ˆld-linux.soï¼‰çš„é¢„åŠ è½½æœºåˆ¶ï¼ˆPRELOADï¼‰æŠŠä¸€ä¸ªäº‹å…ˆå†™å¥½çš„åº“ï¼ˆ/lib/libSegFault.soï¼‰åŠ è½½ä¸Šï¼Œç”¨äºæ•æ‰æ–­é”™è¯¯çš„å‡ºé”™ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445$:~/segfault$ catchsegv ./segfault3Segmentation fault (core dumped)*** Segmentation faultRegister dump: EAX: 00000000 EBX: 00fb3ff4 ECX: 00000002 EDX: 00000000 ESI: 080484e5 EDI: 080484e0 EBP: bfb7ad38 ESP: bfb7ad0c EIP: 00ee806a EFLAGS: 00010203 CS: 0073 DS: 007b ES: 007b FS: 0000 GS: 0033 SS: 007b Trap: 0000000e Error: 00000007 OldMask: 00000000 ESP/signal: bfb7ad0c CR2: 080484e0Backtrace:/lib/libSegFault.so[0x3b606f]??:0(??)[0xc76400]/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0xe89b56]/build/buildd/eglibc-2.10.1/csu/../sysdeps/i386/elf/start.S:122(_start)[0x8048351]Memory map:00258000-00273000 r-xp 00000000 08:01 157 /lib/ld-2.10.1.so00273000-00274000 r--p 0001a000 08:01 157 /lib/ld-2.10.1.so00274000-00275000 rw-p 0001b000 08:01 157 /lib/ld-2.10.1.so003b4000-003b7000 r-xp 00000000 08:01 13105 /lib/libSegFault.so003b7000-003b8000 r--p 00002000 08:01 13105 /lib/libSegFault.so003b8000-003b9000 rw-p 00003000 08:01 13105 /lib/libSegFault.so00c76000-00c77000 r-xp 00000000 00:00 0 [vdso]00e0d000-00e29000 r-xp 00000000 08:01 4817 /lib/libgcc_s.so.100e29000-00e2a000 r--p 0001b000 08:01 4817 /lib/libgcc_s.so.100e2a000-00e2b000 rw-p 0001c000 08:01 4817 /lib/libgcc_s.so.100e73000-00fb1000 r-xp 00000000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so00fb1000-00fb2000 ---p 0013e000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so00fb2000-00fb4000 r--p 0013e000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so00fb4000-00fb5000 rw-p 00140000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so00fb5000-00fb8000 rw-p 00000000 00:00 008048000-08049000 r-xp 00000000 08:01 303895 /home/segfault/segfault308049000-0804a000 r--p 00000000 08:01 303895 /home/segfault/segfault30804a000-0804b000 rw-p 00001000 08:01 303895 /home/segfault/segfault309432000-09457000 rw-p 00000000 00:00 0 [heap]b78cf000-b78d1000 rw-p 00000000 00:00 0b78df000-b78e1000 rw-p 00000000 00:00 0bfb67000-bfb7c000 rw-p 00000000 00:00 0 [stack] å¦‚ä½•é¿å…æ®µé”™è¯¯ å‡ºç°æ®µé”™è¯¯æ—¶ï¼Œé¦–å…ˆåº”è¯¥æƒ³åˆ°æ®µé”™è¯¯çš„å®šä¹‰ï¼Œä»å®ƒå‡ºå‘è€ƒè™‘å¼•å‘é”™è¯¯çš„åŸå› ã€‚ åœ¨ä½¿ç”¨æŒ‡é’ˆæ—¶ï¼Œå®šä¹‰äº†æŒ‡é’ˆåè®°å¾—åˆå§‹åŒ–æŒ‡é’ˆï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™è®°å¾—åˆ¤æ–­æ˜¯å¦ä¸º NULLã€‚ åœ¨ä½¿ç”¨æ•°ç»„æ—¶ï¼Œæ³¨æ„æ•°ç»„æ˜¯å¦è¢«åˆå§‹åŒ–ï¼Œæ•°ç»„ä¸‹æ ‡æ˜¯å¦è¶Šç•Œï¼Œæ•°ç»„å…ƒç´ æ˜¯å¦å­˜åœ¨ç­‰ã€‚ åœ¨è®¿é—®å˜é‡æ—¶ï¼Œæ³¨æ„å˜é‡æ‰€å åœ°å€ç©ºé—´æ˜¯å¦å·²ç»è¢«ç¨‹åºé‡Šæ”¾æ‰ã€‚ åœ¨å¤„ç†å˜é‡æ—¶ï¼Œæ³¨æ„å˜é‡çš„æ ¼å¼æ§åˆ¶æ˜¯å¦åˆç†ç­‰ã€‚ Reference","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"RISC-V å…¥é—¨-RISC-V æ±‡ç¼–è¯­è¨€ç¼–ç¨‹","slug":"RISC-Vå…¥é—¨-RISC-Væ±‡ç¼–è¯­è¨€ç¼–ç¨‹","date":"2021-10-16T15:26:42.000Z","updated":"2022-10-15T03:14:29.532Z","comments":true,"path":"2021/10/16/RISC-Vå…¥é—¨-RISC-Væ±‡ç¼–è¯­è¨€ç¼–ç¨‹/","link":"","permalink":"http://example.com/2021/10/16/RISC-V%E5%85%A5%E9%97%A8-RISC-V%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B/","excerpt":"","text":"æ±‡ç¼–è¯­æ³•ä»‹ç»ä¸€æ¡å…¸å‹çš„ RISC-V æ±‡ç¼–è¯­å¥ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆ[label:][operation][comment]ã€‚åç¼€.så’Œ.SåŒºåˆ«ï¼šåè€…çº¯æ±‡ç¼–ã€‚ label(æ ‡å·) operation å¯ä»¥æœ‰ä»¥ä¸‹å¤šç§ç±»å‹ï¼š instruction (æŒ‡ä»¤) ï¼šç›´æ¥å¯¹åº”äºŒè¿›åˆ¶æœºå™¨æŒ‡ä»¤çš„å®‡ç¬¦ä¸² pseudo-instruction (ä¼ªæŒ‡ä»¤) ï¼šä¸ºäº†æé«˜ç¼–å†™ä»£ç çš„æ•ˆç‡ï¼Œå¯ä»¥ç”¨ä¸€æ¡ä¼ªæŒ‡ä»¤æŒ‡ç¤ºæ±‡ç¼–å™¨äº§ç”Ÿå¤šæ¡å®é™…çš„æŒ‡ä»¤ (instructions)ã€‚ directive (æŒ‡ç¤º/ä¼ªæ“ä½œ) ï¼šé€šè¿‡ç±»ä¼¼æŒ‡ä»¤çš„å½¢å¼(ä»¥â€.â€å¼€å¤´),é€šçŸ¥æ±‡ç¼–å™¨å¦‚ä½•æ§åˆ¶ä»£ç çš„äº§ç”Ÿç­‰ï¼Œä¸å¯¹åº”å…·ä½“çš„æŒ‡ä»¤ã€‚ macroï¼šé‡‡ç”¨.macro/.endm è‡ªå®šä¹‰çš„å®ä¾‹å­ 123456789101112131415.macro do_nothing # directive nop # pseudo-instruction nop # pseudo-instruction.endm # directive .text # directive .global _start # directive_start: # Label li x6, 5 # pseudo-instruction li x7, 4 # pseudo-instruction add x5, x6, x7 # instruction do_nothing # Calling macrostop: j stop # statement in one line .end # End of file commentï¼ˆæ³¨é‡Šï¼‰ä»¥#å¼€å¤´åˆ°è¡Œå°¾ RISC-V æ±‡ç¼–æŒ‡ä»¤æ€»è§ˆæ“ä½œå¯¹è±¡ å¯„å­˜å™¨ 32ä¸ªé€šç”¨å¯„å­˜å™¨,x0 ~ x31ï¼ˆæ³¨æ„ï¼šæœ¬ç« èŠ‚è¯¾ç¨‹ä»…æ¶‰åŠRV32Içš„é€šç”¨å¯„å­˜å™¨ç»„ï¼‰ï¼› åœ¨ RISC-V ä¸­ï¼ŒHart åœ¨æ‰§è¡Œç®—æœ¯é€»è¾‘è¿ç®—æ—¶æ‰€æ“ä½œçš„æ•°æ®å¿…é¡»ç›´æ¥æ¥è‡ªå¯„å­˜å™¨ã€‚ å†…å­˜ Hartå¯ä»¥æ‰§è¡Œåœ¨å¯„å­˜å™¨å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®è¯»å†™æ“ä½œï¼› è¯»å†™æ“ä½œä½¿ç”¨å­—èŠ‚ (Byte) ä¸ºåŸºæœ¬å•ä½è¿›è¡Œå¯»å€ï¼› RV32å¯ä»¥è®¿é—®æœ€å¤š2^32ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ã€‚ ç¼–ç æ ¼å¼ æŒ‡ä»¤é•¿åº¦ï¼š32bitï¼Œæœ¬æ–‡è®¨è®ºçš„éƒ½æ˜¯ RV32 æŒ‡ä»¤é›† æŒ‡ä»¤å¯¹é½ï¼šæŒ‡ä»¤åŠ è½½åˆ°å†…å­˜æ˜¯ä»¥ 32bit å¯¹é½ funct3ã€funct7å’Œopcodeä¸€èµ·å†³å®šæŒ‡ä»¤ç±»å‹ï¼Œfunct3è¡¨ç¤ºå  3bitï¼Œfunct7å  7bitã€‚ opcodeæ˜ å°„å…³ç³»ï¼š [1:0] æ°¸è¿œä¸º 11 [4:2] ä¸ºä¸‹å›¾æ¨ªè½´ [6:5] ä¸ºä¸‹å›¾çºµè½´ï¼Œä¸‰éƒ¨åˆ†å†³å®šæŒ‡ä»¤çš„ç±»å‹ã€‚ ä»¥BEQæŒ‡ä»¤ä¸ºä¾‹opcode=1100011ã€‚[4:2]=000ï¼Œ[6:5]=11æŸ¥è¡¨å¯å¾—BEQæŒ‡ä»¤ç±»å‹ä¸ºBRANCHã€‚ å°ç«¯åº ä¸»æœºå­—èŠ‚åº (HBO-Host Byte Order) ä¸€ä¸ªå¤šå­—èŠ‚æ•´æ•°åœ¨è®¡ç®—æœºå†…å­˜ä¸­å­˜å‚¨çš„å­—èŠ‚é¡ºåºç§°ä¸»æœºå­—èŠ‚åº (HBO- Host Byte Orderï¼Œæˆ–è€…å«æœ¬åœ°å­—èŠ‚åº) ä¸åŒç±»å‹ CPU çš„ HBO ä¸åŒï¼Œè¿™ä¸ CPU çš„è®¾è®¡æœ‰å…³ã€‚åˆ†ä¸ºå¤§ç«¯åº (Big-Endian) å’Œå°ç«¯åº (Little-Endian) æŒ‡ä»¤åˆ†ç±» rdï¼ˆregister destinationï¼‰ç›®æ ‡å¯„å­˜å™¨ï¼Œrsï¼ˆregister sourceï¼‰æºå¯„å­˜å™¨ï¼Œå¤§å°éƒ½æ˜¯ 5bitï¼Œå› ä¸ºå¯ä»¥è¡¨ç¤º2^5=32å¯„å­˜å™¨ã€‚ æŒ‡ä»¤è¯¦è§£ç®—æœ¯è¿ç®—æŒ‡ä»¤ADDç®—æ•°æŒ‡ä»¤åªåŒ…å«åŠ å‡ï¼Œä¸åŒ…å«ä¹˜é™¤ï¼Œä¹˜é™¤è¿ç®—æœ‰ä¸“é—¨çš„æ‰©å±•ã€‚ æ•°æ®ä¼ é€é¡ºåºæ˜¯ç”±åå‘å‰ï¼Œå’Œæ­£å¸¸çš„ç¼–ç ä¹ æƒ¯ç±»ä¼¼ã€‚ SUB Substractç»ƒä¹  ç°çŸ¥é“æŸæ¡ RISC-V çš„æœºå™¨æŒ‡ä»¤åœ¨å†…å­˜ä¸­çš„å€¼ä¸ºb3 05 95 00,ä»å·¦å¾€å³ä¸ºä»ä½åœ°å€åˆ°é«˜åœ°å€ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œè¯·å°†å…¶ç¿»è¯‘ä¸ºå¯¹åº”çš„æ±‡ç¼–æŒ‡ä»¤ã€‚ ç¡®å®šå­—èŠ‚åºåœ¨ RISC-V ä¸­å­˜æ”¾æ˜¯å°ç«¯åºï¼Œæ ¹æ®é¢˜æ„çœŸæ­£æŒ‡ä»¤åº”è¯¥æ˜¯00 95 05 b3 è½¬æ¢äºŒè¿›åˆ¶æœºå™¨ç æ˜¯äºŒè¿›åˆ¶ï¼Œæ‰€ä»¥éœ€è¦å°†ä¸Šè¿°æŒ‡ä»¤å€¼è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œå¯å¾—0000000 01001 01010 000 01011 0110011 æŸ¥é˜…æ‰‹å†ŒæŸ¥é˜…The RISC-V Instruction Set Manual Volume I: Unprivileged ISAæ‰¾åˆ°RV32/64G Instruction Set ListingsæŒ‡ä»¤è¡¨æ ¼ï¼Œä½ 7 ä½æ˜¯opcodeï¼ŒæŸ¥è¡¨å¯å¾—0110011å¯¹åº”æ“ä½œç æœ‰å¤šä¸ªSLLI SRAI SUBç­‰ç­‰ï¼Œæ­¤æ—¶å†çœ‹æœ€é«˜ä½00000000,å¯ä»¥ç¡®å®šæ˜¯ADDæŒ‡ä»¤ å°†åˆ†å‰²çš„äºŒè¿›åˆ¶è½¬æˆåè¿›åˆ¶0000000 9 10 000 11 010011-&gt;ADD x11 x10 x9 ADDI ADD Immediate LUI Load Upper Immediate LI AUIPC ç»å¸¸ç”¨äºæ„é€ ä¸€ä¸ªç›¸å¯¹åœ°å€ã€‚ LA åŸºäºç®—æœ¯è¿ç®—æŒ‡ä»¤å®ç°çš„å…¶ä»–ä¼ªæŒ‡ä»¤x0å¯„å­˜å™¨å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¾€é‡Œå†™æ•°æ®æ²¡æœ‰æ„ä¹‰NOPæŒ‡ä»¤ä¸»è¦ä¸ºäº†å ä½ï¼Œç©ºè½¬ é€»è¾‘è¿ç®—æŒ‡ä»¤ NOTAssembly12341010101011111111(-1)-------- XOR01010101 ç§»ä½è¿ç®—æŒ‡ä»¤ ç®—æ•°ç§»ä½åªæœ‰å³ç§»ï¼Œæ²¡æœ‰å·¦ç§»ã€‚å·¦ç§»ä¼šæŠŠæœ€é«˜ä½è¦†ç›–ã€‚ Assembly1210001000 &gt;&gt; 2= 11100001 å†…å­˜è¯»å†™æŒ‡ä»¤åŠ è½½ï¼Œå†…å­˜è¯»ï¼Œå°†æ•°æ®ä»å†…å­˜è¯»å…¥å¯„å­˜å™¨ Storeï¼Œå†…å­˜å†™ï¼Œå°†æ•°æ®ä»å¯„å­˜å™¨å†™å‡ºåˆ°å†…å­˜ ä¸ºä½•å¯¹ word çš„ åŠ è½½ ä¸åŒºåˆ†æ— ç¬¦å·å’Œæœ‰ç¬¦å·æ–¹å¼ (RV32)ï¼ŸRV32 ä¸‹å¯„å­˜å™¨æ˜¯ 4 å­—èŠ‚ï¼ŒåŠ è½½ word ä¹Ÿæ˜¯ 4 å­—èŠ‚ï¼Œè‡ªç„¶ä¸éœ€è¦æ‰©å±•ã€‚ ä¸ºä½• store ä¸åŒºåˆ†æœ‰ç¬¦å·è¿˜æ˜¯æ— ç¬¦å·ï¼Ÿå› ä¸ºä»ç›®çš„åœ°å€åªæœ‰ 1 å­—èŠ‚ï¼Œä¸ç®¡æ˜¯å†™ 1 å­—èŠ‚ï¼Œ2 å­—èŠ‚ï¼Œè¿˜æ˜¯ 4 å­—èŠ‚ï¼Œéƒ½åªç”¨åˆ°æœ€ä½çš„ 1 å­—èŠ‚ã€‚ä¸éœ€è¦è€ƒè™‘ç¬¦å· ç«‹å³æ•°åˆ†ä¸¤ä¸ªåœ°æ–¹å­˜ï¼Œä¸ºäº†è§£ç æ•ˆç‡ æ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ æŒ‡ä»¤æ ¼å¼ä¸­çš„ç«‹å³æ•° (imm) å­˜æ”¾æœ‰äº›å¥‡æ€ªï¼Œç¬¬ [1-4] ä½å’Œç¬¬ [11] ä½æ”¾åœ¨ä¸€èµ·ï¼Œç¬¬ [5-10] ä½å’Œç¬¬ [12] ä½æ”¾åœ¨ä¸€èµ·ã€‚è¿™æ˜¯ä¸ºäº†è¿åˆç¡¬ä»¶å¤„ç†æ•ˆç‡ï¼Œç¼–ç¨‹æ—¶ä¸éœ€è¦è€ƒè™‘ç«‹å³æ•°å­˜å‚¨æ–¹å¼ã€‚ æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ 1234567891011121314int a = 1;int b = 1;void sum()&#123; a = a+b; return; // jalr x0 0(x5) å½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤å­˜åˆ°x0ä¸­ï¼Œå¹¶è·³è½¬åˆ°ï¼ˆ0 + x5)ï¼Œä¹Ÿå°±æ˜¯sumçš„ä¸‹ä¸€æ¡æŒ‡ä»¤&#125;void _start()&#123; sum(); // jal x5 sum æŠŠsumçš„ä¸‹ä¸€æ¡æŒ‡ä»¤å­˜åˆ°x5ï¼Œç„¶åè·³è½¬åˆ°sum ...&#125; å¦‚ä½•è§£å†³é•¿è·ç¦»è·³è½¬ï¼Ÿä½¿ç”¨ AUIPC æ¥æ„å»ºä¸€ä¸ªå¤§æ•°ï¼Œé…åˆ JALR ä½¿ç”¨ã€‚å¦‚ auipc x6,imm-20 jalr x1,x6,imm-12 RISC-V æŒ‡ä»¤å¯»å€æ¨¡å¼æ€»ç»“ æ±‡ç¼–å‡½æ•°è°ƒç”¨çº¦å®šå‡½æ•°è°ƒç”¨è¿‡ç¨‹æ¦‚è¿°æ ˆï¼ˆstackï¼‰æ•°æ®ç»“æ„ï¼Œåœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ä¼šç”¨æ¥ä¿å­˜å˜é‡ï¼Œå‡½æ•°åœ°å€ç­‰ç­‰ã€‚ æ ˆå¸§é‡Œä¿å­˜çš„å˜é‡æ˜¯è‡ªåŠ¨å˜é‡ï¼Œä¼šè¢«å†…å­˜è‡ªåŠ¨é‡Šæ”¾ã€‚ ä¸ºä½•è¦æœ‰è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…ä¿å­˜çš„æ¦‚å¿µ å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å°±ä¼šæœ‰å‚æ•°å’Œè¿”å›å€¼çš„ä¼ é€’ï¼Œè‡ªå·±å†™çš„å‡½æ•°å¯èƒ½ç”±åˆ«äººæ¥è°ƒç”¨ï¼Œå¦‚æœæ²¡æœ‰çº¦å®šå¥½æŸä¸ªå‚æ•°å­˜æ”¾ä½ç½®ï¼Œå°±ä¸èƒ½å¤Ÿé¡ºåˆ©æ‰§è¡Œå‡½æ•°ã€‚ å› ä¸ºå¯„å­˜å™¨éœ€è¦ç»å¸¸åœ¨ç¼–ç¨‹ä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥ ABI åå°±æ˜¯å¯„å­˜å™¨çš„åˆ«åã€‚ è¿™äº›å¯„å­˜å™¨å…¶å®éƒ½å¯ä»¥è®¾ç½®æˆè¢«è°ƒç”¨è€…ä¿å­˜ï¼Œä¹Ÿå°±æ˜¯åœ¨è¢«è°ƒç”¨å‡½æ•°ä¸­ä¿å­˜ä¸€éä¸ºå•¥è¿˜è¦åˆ†è¿™ä¹ˆå¤šç­”ï¼šå› ä¸ºä¿å­˜ä¸€éæ•ˆç‡ä½ å°¾è°ƒç”¨å®ä¾‹Assembly12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061# Calling Convention# Demo to create a leaf routine## void _start()# &#123;# // calling leaf routine# square(3);# &#125;## int square(int num)# &#123;# return num * num;# &#125; .text # Define beginning of text section .global _start # Define entry _start_start: la sp, stack_end # prepare stack for calling functions li a0, 3 # pass 3 to square call square # call square # the time return here, a0 should stores the resultstop: j stop # Infinite loop to stop execution# int square(int num)square: # prologue addi sp, sp, -8 # reserve space for local variables sw s0, 0(sp) # save s0 sw s1, 4(sp) # save s1 # `mul a0, a0, a0` should be fine, # programing as below just to demo we can contine use the stack mv s0, a0 # s0 = a0 mul s1, s0, s0 # s1 = s0 * s0 mv a0, s1 # a0 = s1 # epilogue lw s0, 0(sp) # restore s0 lw s1, 4(sp) # restore s1 addi sp, sp, 8 # release space for local variables ret # return from function # add nop here just for demo in gdb nop # allocate stack spacestack_start: .rept 10 # reserve 10 words for stack .word 0 # fill with 0 .endr # end of repeatstack_end: .end # End of file éå°¾è°ƒç”¨å®ä¾‹Assembly123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899# Calling Convention# Demo how to write nested routines## void _start()# &#123;# // calling nested routine# aa_bb(3, 4);# &#125;## int aa_bb(int a, int b)# &#123;# return square(a) + square(b);# &#125;## int square(int num)# &#123;# return num * num;# &#125; .text # Define beginning of text section .global _start # Define entry _start_start: la sp, stack_end # prepare stack for calling functions # aa_bb(3, 4); li a0, 3 # load argument a li a1, 4 # load argument b call aa_bb # call aa_bbstop: j stop # Infinite loop to stop execution# int aa_bb(int a, int b)# return a^2 + b^2aa_bb: # prologue addi sp, sp, -16 # decrement stack pointer by 16 bytes sw s0, 0(sp) # save s0 sw s1, 4(sp) # save s1 sw s2, 8(sp) # save s2 sw ra, 12(sp) # save ra # cp and store the input params mv s0, a0 # copy a to s0 mv s1, a1 # copy b to s1 # sum will be stored in s2 and is initialized as zero li s2, 0 # initialize s2 to zero mv a0, s0 # copy s0 to a0 jal square # call square add s2, s2, a0 # add a0 to s2 mv a0, s1 # copy s1 to a0 jal square # call square add s2, s2, a0 # add a0 to s2 mv a0, s2 # copy s2 to a0 # epilogue lw s0, 0(sp) # restore s0 lw s1, 4(sp) # restore s1 lw s2, 8(sp) # restore s2 lw ra, 12(sp) # restore ra addi sp, sp, 16 # increment stack pointer by 16 bytes ret # return from aa_bb# int square(int num)square: # prologue addi sp, sp, -8 # decrement stack pointer by 8 bytes sw s0, 0(sp) # save s0 sw s1, 4(sp) # save s1 # `mul a0, a0, a0` should be fine, # programing as below just to demo we can contine use the stack mv s0, a0 # copy a to s0 mul s1, s0, s0 # s1 = a * a mv a0, s1 # copy s1 to a0 # epilogue lw s0, 0(sp) # restore s0 lw s1, 4(sp) # restore s1 addi sp, sp, 8 # increment stack pointer by 8 bytes ret # return from square # add nop here just for demo in gdb nop # allocate stack spacestack_start: .rept 10 # allocate 10 words of stack space .word 0 # initialize stack space to 0 .endr # end of stack allocationstack_end: .end # End of file æ±‡ç¼–ä¸ C æ··åˆç¼–ç¨‹å‰æéµå®ˆ ABIï¼ˆAbstract Binary Interfaceï¼‰çš„è§„å®š æ•°æ®ç±»å‹å¤§å°ï¼Œå¸ƒå±€ï¼Œå¯¹é½ å‡½æ•°è°ƒç”¨çº¦å®š ç³»ç»Ÿè°ƒç”¨çº¦å®šç­‰ç­‰ RISC-V å‡½æ•°è°ƒç”¨çº¦å®šè§„å®š å‡½æ•°å‚æ•°é‡‡ç”¨å¯„å­˜å™¨a0-a7 å‡½æ•°è¿”å›å€¼é‡‡ç”¨å¯„å­˜å™¨a0,a1 æ±‡ç¼–åµŒå…¥ C è¯­è¨€Assembly1234567891011121314151617181920212223242526272829# ASM call C .text # Define beginning of text section .global _start # Define entry _start .global foo # foo is a C function defined in test.c_start: la sp, stack_end # prepare stack for calling functions # RISC-V uses a0 ~ a7 to transfer parameters li a0, 1 li a1, 2 call foo #è°ƒç”¨äº†Cè¯­è¨€å‡½æ•° # RISC-V uses a0 &amp; a1 to transfer return value # check value of a0stop: j stop # Infinite loop to stop execution nop # just for demo effectstack_start: .rept 10 .word 0 .endrstack_end: .end # End of file call fooå°±æ˜¯åœ¨è°ƒç”¨ C è¯­è¨€å‡½æ•°ï¼Œfooã€‚.global fooå‘Šè¯‰ç¼–è¯‘å™¨fooå‡½æ•°å®šä¹‰åœ¨å¤–é¢ã€‚ C è¯­è¨€åµŒå…¥æ±‡ç¼–ä¸‹å›¾ä¸­ä¸ºç®€åŒ–å†™æ³•","categories":[{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"}]},{"title":"C è¯­è¨€å¯å˜å‚æ•°","slug":"Cè¯­è¨€å¯å˜å‚æ•°","date":"2021-10-12T03:21:49.000Z","updated":"2022-10-15T03:14:29.161Z","comments":true,"path":"2021/10/12/Cè¯­è¨€å¯å˜å‚æ•°/","link":"","permalink":"http://example.com/2021/10/12/C%E8%AF%AD%E8%A8%80%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0/","excerpt":"","text":"å­¦ä¹ è¿‡ç¨‹ä¸­æŸ¥çœ‹äº†printf()æºç ï¼Œé‡åˆ°äº†è¿™æ ·çš„å‡½æ•°å®šä¹‰ï¼Œ 1234567891011void printf(char *fmt, ...)&#123; char buf[256]; va_list args; memset(buf, 0, sizeof(buf)); va_start(args, fmt); vsprint(buf, fmt, args); va_end(args); puts(buf);&#125; å‚æ•°ä¸­çš„ä¸‰ä¸ªç‚¹å·ï¼Œå°±æ˜¯ C è¯­è¨€ä¸­å¯å˜å‚æ•°çš„æ ‡è¯†ã€‚è¿™æ ·çš„å‡½æ•°ç§°ä¸ºå¯å˜å‚æ•°å‡½æ•°ã€‚è¿™ç§å‡½æ•°éœ€è¦å›ºå®šæ•°é‡çš„å¼ºåˆ¶å‚æ•°ï¼ˆmandatory argumentï¼‰ï¼Œåé¢æ˜¯æ•°é‡å¯å˜çš„å¯é€‰å‚æ•°ï¼ˆoptional argumentï¼‰ã€‚ è¿™ç§å‡½æ•°å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªå¼ºåˆ¶å‚æ•°ã€‚å¯é€‰å‚æ•°çš„ç±»å‹å¯ä»¥å˜åŒ–ã€‚å¯é€‰å‚æ•°çš„æ•°é‡ç”±å¼ºåˆ¶å‚æ•°çš„å€¼å†³å®šï¼Œæˆ–ç”±ç”¨æ¥å®šä¹‰å¯é€‰å‚æ•°åˆ—è¡¨çš„ç‰¹æ®Šå€¼å†³å®šã€‚ C è¯­è¨€ä¸­æœ€å¸¸ç”¨çš„å¯å˜å‚æ•°å‡½æ•°ä¾‹å­æ˜¯printfï¼ˆï¼‰å’Œ scanfï¼ˆï¼‰ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå¼ºåˆ¶å‚æ•°ï¼Œå³æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„è½¬æ¢ä¿®é¥°ç¬¦å†³å®šäº†å¯é€‰å‚æ•°çš„æ•°é‡å’Œç±»å‹ã€‚ å¯å˜å‚æ•°å‡½æ•°è¦è·å–å¯é€‰å‚æ•°æ—¶ï¼Œå¿…é¡»é€šè¿‡ä¸€ä¸ªç±»å‹ä¸º va_list çš„å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†å‚æ•°ä¿¡æ¯ã€‚è¿™ç§ç±»å‹çš„å¯¹è±¡ä¹Ÿç§°ä¸ºå‚æ•°æŒ‡é’ˆï¼ˆargument pointerï¼‰ï¼Œå®ƒåŒ…å«äº†æ ˆä¸­è‡³å°‘ä¸€ä¸ªå‚æ•°çš„ä½ç½®ã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‚æ•°æŒ‡é’ˆä»ä¸€ä¸ªå¯é€‰å‚æ•°ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”±æ­¤ï¼Œå‡½æ•°å°±å¯ä»¥è·å–æ‰€æœ‰çš„å¯é€‰å‚æ•°ã€‚va_list ç±»å‹è¢«å®šä¹‰åœ¨å¤´æ–‡ä»¶ stdarg.h ä¸­ã€‚ å½“ç¼–å†™æ”¯æŒå‚æ•°æ•°é‡å¯å˜çš„å‡½æ•°æ—¶ï¼Œå¿…é¡»ç”¨ va_list ç±»å‹å®šä¹‰å‚æ•°æŒ‡é’ˆï¼Œä»¥è·å–å¯é€‰å‚æ•°ã€‚åœ¨ä¸‹é¢çš„è®¨è®ºä¸­ï¼Œva_list å¯¹è±¡è¢«å‘½åä¸º argptrã€‚å¯ä»¥ç”¨ 4ä¸ªå®æ¥å¤„ç†è¯¥å‚æ•°æŒ‡é’ˆï¼Œè¿™äº›å®éƒ½å®šä¹‰åœ¨å¤´æ–‡ä»¶ stdarg.h ä¸­ï¼š å® va_start ä½¿ç”¨ç¬¬ä¸€ä¸ªå¯é€‰å‚æ•°çš„ä½ç½®æ¥åˆå§‹åŒ– argptr å‚æ•°æŒ‡é’ˆã€‚è¯¥å®çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯è¯¥å‡½æ•°æœ€åä¸€ä¸ªæœ‰åç§°å‚æ•°çš„åç§°ã€‚å¿…é¡»å…ˆè°ƒç”¨è¯¥å®ï¼Œæ‰å¯ä»¥å¼€å§‹ä½¿ç”¨å¯é€‰å‚æ•°ã€‚ 1void va_start(va_list argptr, lastparam); å±•å¼€å® va_arg ä¼šå¾—åˆ°å½“å‰ argptr æ‰€å¼•ç”¨çš„å¯é€‰å‚æ•°ï¼Œä¹Ÿä¼šå°† argptr ç§»åŠ¨åˆ°åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå‚æ•°ã€‚å® va_arg çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯åˆšåˆšè¢«è¯»å…¥çš„å‚æ•°çš„ç±»å‹ã€‚ 1type va_arg(va_list argptr, type); å½“ä¸å†éœ€è¦ä½¿ç”¨å‚æ•°æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»è°ƒç”¨å® va_endã€‚å¦‚æœæƒ³ä½¿ç”¨å® va_start æˆ–è€…å® va_copy æ¥é‡æ–°åˆå§‹åŒ–ä¸€ä¸ªä¹‹å‰ç”¨è¿‡çš„å‚æ•°æŒ‡é’ˆï¼Œä¹Ÿå¿…é¡»å…ˆè°ƒç”¨å® va_endã€‚va_endè¢«å®šä¹‰ä¸ºç©ºã€‚å®ƒåªæ˜¯ä¸ºå®ç°ä¸ va_start é…å¯¹ (å®ç°ä»£ç å¯¹ç§°å’Œâ€ä»£ç è‡ªæ³¨é‡Šâ€(æ ¹æ®ä»£ç å°±èƒ½çŸ¥é“åŠŸèƒ½ï¼Œä¸éœ€è¦é¢å¤–æ³¨é‡Š) åŠŸèƒ½) 1void va_end(va_list argptr); å® va_copy ä½¿ç”¨å½“å‰çš„srcå€¼æ¥åˆå§‹åŒ–å‚æ•°æŒ‡é’ˆ destã€‚ç„¶åå°±å¯ä»¥ä½¿ç”¨ destä¸­çš„å¤‡ä»½è·å–å¯é€‰å‚æ•°åˆ—è¡¨ï¼Œä»src æ‰€å¼•ç”¨çš„ä½ç½®å¼€å§‹ã€‚ 1void va_copy(va_list dest, va_list src); 1234567891011121314// å‡½æ•° add() è®¡ç®—å¯é€‰å‚æ•°ä¹‹å’Œ// å‚æ•°ï¼šç¬¬ä¸€ä¸ªå¼ºåˆ¶å‚æ•°æŒ‡å®šäº†å¯é€‰å‚æ•°çš„æ•°é‡ï¼Œå¯é€‰å‚æ•°ä¸º double ç±»å‹// è¿”å›å€¼ï¼šå’Œå€¼ï¼Œdouble ç±»å‹double add( int n, ... )&#123; int i = 0; double sum = 0.0; va_list argptr; va_start( argptr, n ); // åˆå§‹åŒ– argptr for ( i = 0; i &lt; n; ++i ) // å¯¹æ¯ä¸ªå¯é€‰å‚æ•°ï¼Œè¯»å–ç±»å‹ä¸º double çš„å‚æ•°ï¼Œ sum += va_arg( argptr, double ); // ç„¶åç´¯åŠ åˆ° sum ä¸­ va_end( argptr ); return sum;&#125; ç®€æ˜“printfå‡½æ•° 12345678910111213141516171819202122232425262728293031323334353637#include &lt;stdarg.h&gt;/* minprintf: minimal printf with variable arqument list */void minprintf(char *fmt, ...)&#123; GPIO va_list ap; /* points to each unnamed arq in turn */ char *p, *sval; int ival; double dval; va_start(ap, fmt); /* make ap point to 1st unnamed arg */ for (p = fmt; *p; p++) &#123; if (*p != &#x27;%&#x27;) &#123; putchar(*p); continue; &#125; &#125; switch (*++p) &#123; case &#x27;d&#x27;: ival = va_arg(ap, int); printf(&quot;%d&quot;, ival); break; case &#x27;f&#x27;: dval = va_arg(ap, double); printf(&quot;%f&quot;, dval); break; case &#x27;s&#x27;: for (sval = va_arq(ap, char *); *sval; sval++) putchar(*sval); break; default: putchar(*p); break; &#125; va_end(ap); /* clean up when done */&#125;","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"C++","slug":"C","permalink":"http://example.com/tags/C/"}]},{"title":"Linux ä¸‹å°†ç¼–è¯‘ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶","slug":"Linuxä¸‹å°†ç¼–è¯‘ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶","date":"2021-09-30T07:18:32.000Z","updated":"2022-10-15T03:14:29.281Z","comments":true,"path":"2021/09/30/Linuxä¸‹å°†ç¼–è¯‘ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶/","link":"","permalink":"http://example.com/2021/09/30/Linux%E4%B8%8B%E5%B0%86%E7%BC%96%E8%AF%91%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%E5%88%B0%E6%96%87%E4%BB%B6/","excerpt":"","text":"åœ¨å‘½ä»¤è¡Œç¼–è¯‘é¡¹ç›®æ—¶ï¼Œç»å¸¸é‡åˆ°ç¼–è¯‘ç»“æœå¤ªé•¿ï¼Œè¦†ç›–äº†æœ€å…ˆè¾“å‡ºçš„ç»“æœï¼Œæ­¤æ—¶å°±éœ€è¦å°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶å†æŸ¥çœ‹ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š 123456make &gt; make.log 2&gt;&amp;1# make ç¼–è¯‘å‘½ä»¤# make.log è¾“å‡ºæ–‡ä»¶å# 2 æ–‡ä»¶æè¿°ç¬¦ï¼Œæ ‡å‡†é”™è¯¯# &gt; é‡å®šå‘ç¬¦ï¼Œè¾“å‡º# &amp;1 æ–‡ä»¶æè¿°ç¬¦&amp;ï¼Œæ–‡ä»¶æè¿°ç¬¦1 æ ‡å‡†è¾“å…¥ è¯¥å‘½ä»¤åŠŸèƒ½å³å°†makeç¼–è¯‘æ—¶è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯é‡å®šå‘ä¸ºæ ‡å‡†è¾“å…¥ï¼Œå†™å…¥åˆ°make.logæ–‡ä»¶ä¸­ã€‚ç¬¦å·çš„å«ä¹‰å¯ä»¥å‚è€ƒLinux æ–‡ä»¶æè¿°ç¬¦","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"Linux æ–‡ä»¶æè¿°ç¬¦","slug":"Linuxæ–‡ä»¶æè¿°ç¬¦","date":"2021-09-30T03:13:02.000Z","updated":"2022-10-15T03:14:29.331Z","comments":true,"path":"2021/09/30/Linuxæ–‡ä»¶æè¿°ç¬¦/","link":"","permalink":"http://example.com/2021/09/30/Linux%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6/","excerpt":"","text":"å‰è¨€Linux ä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œæ¯”å¦‚ C++ æºæ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ã€Shell è„šæœ¬ã€å¯æ‰§è¡Œæ–‡ä»¶ç­‰ï¼Œå°±è¿é”®ç›˜ã€æ˜¾ç¤ºå™¨ã€é¼ æ ‡ç­‰ç¡¬ä»¶è®¾å¤‡ä¹Ÿéƒ½æ˜¯æ–‡ä»¶ã€‚ ä¸€ä¸ª Linux è¿›ç¨‹å¯ä»¥æ‰“å¼€æˆç™¾ä¸Šåƒä¸ªæ–‡ä»¶ï¼Œä¸ºäº†è¡¨ç¤ºå’ŒåŒºåˆ†å·²ç»æ‰“å¼€çš„æ–‡ä»¶ï¼ŒLinux ä¼šç»™æ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€ä¸ªç¼–å·ï¼ˆä¸€ä¸ª IDï¼‰ï¼Œè¿™ä¸ªç¼–å·å°±æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¢«ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptorï¼‰ã€‚ æ–‡ä»¶æè¿°ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿä¸€ä¸ª Linux è¿›ç¨‹å¯åŠ¨åï¼Œä¼šåœ¨å†…æ ¸ç©ºé—´ä¸­åˆ›å»ºä¸€ä¸ª PCB æ§åˆ¶å—ï¼ŒPCB å†…éƒ¨æœ‰ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è¡¨ï¼ˆFile descriptor tableï¼‰ï¼Œè®°å½•ç€å½“å‰è¿›ç¨‹æ‰€æœ‰å¯ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¹Ÿå³å½“å‰è¿›ç¨‹æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶ã€‚ é™¤äº†æ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œç³»ç»Ÿè¿˜éœ€è¦ç»´æŠ¤å¦å¤–ä¸¤å¼ è¡¨ï¼š æ‰“å¼€æ–‡ä»¶è¡¨ï¼ˆOpen file tableï¼‰ i-node è¡¨ï¼ˆi-node tableï¼‰ æ–‡ä»¶æè¿°ç¬¦è¡¨æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªï¼Œæ‰“å¼€æ–‡ä»¶è¡¨å’Œ i-node è¡¨æ•´ä¸ªç³»ç»Ÿåªæœ‰ä¸€ä¸ªï¼Œå®ƒä»¬ä¸‰è€…ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å¯¹ä¸Šå›¾çš„è¯´æ˜ï¼š åœ¨è¿›ç¨‹A ä¸­ï¼Œæ–‡ä»¶æè¿°ç¬¦ 1 å’Œ20 éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªæ‰“å¼€æ–‡ä»¶è¡¨é¡¹ï¼Œæ ‡å·ä¸º 23ï¼ˆæŒ‡å‘äº†æ‰“å¼€æ–‡ä»¶è¡¨ä¸­ä¸‹æ ‡ä¸º 23 çš„æ•°ç»„å…ƒç´ ï¼‰ï¼Œè¿™å¯èƒ½æ˜¯é€šè¿‡è°ƒç”¨ dup()ã€dup2()ã€fcntl() æˆ–è€…å¯¹åŒä¸€ä¸ªæ–‡ä»¶å¤šæ¬¡è°ƒç”¨äº† open() å‡½æ•°å½¢æˆçš„ã€‚ è¿›ç¨‹ A çš„æ–‡ä»¶æè¿°ç¬¦ 2å’Œè¿›ç¨‹B çš„æ–‡ä»¶æè¿°ç¬¦2 éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™å¯èƒ½æ˜¯åœ¨è°ƒç”¨ fork() åå‡ºç°çš„ï¼ˆå³è¿›ç¨‹ Aã€Bæ˜¯çˆ¶å­è¿›ç¨‹å…³ç³»ï¼‰ï¼Œæˆ–è€…æ˜¯ä¸åŒçš„è¿›ç¨‹ç‹¬è‡ªå»è°ƒç”¨open() å‡½æ•°æ‰“å¼€äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ­¤æ—¶è¿›ç¨‹å†…éƒ¨çš„æè¿°ç¬¦æ­£å¥½åˆ†é…åˆ°ä¸å…¶ä»–è¿›ç¨‹æ‰“å¼€è¯¥æ–‡ä»¶çš„æè¿°ç¬¦ä¸€æ ·ã€‚ è¿›ç¨‹ A çš„æè¿°ç¬¦0å’Œè¿›ç¨‹Bçš„æè¿°ç¬¦3åˆ†åˆ«æŒ‡å‘ä¸åŒçš„æ‰“å¼€æ–‡ä»¶è¡¨é¡¹ï¼Œä½†è¿™äº›è¡¨é¡¹å‡æŒ‡å‘ i-node è¡¨çš„åŒä¸€ä¸ªæ¡ç›®ï¼ˆæ ‡å·ä¸º 1976ï¼‰ï¼›æ¢è¨€ä¹‹ï¼Œå®ƒä»¬æŒ‡å‘äº†åŒä¸€ä¸ªæ–‡ä»¶ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸ºæ¯ä¸ªè¿›ç¨‹å„è‡ªå¯¹åŒä¸€ä¸ªæ–‡ä»¶å‘èµ·äº† open() è°ƒç”¨ã€‚åŒä¸€ä¸ªè¿›ç¨‹ä¸¤æ¬¡æ‰“å¼€åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿä¼šå‘ç”Ÿç±»ä¼¼æƒ…å†µã€‚ é€šè¿‡æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥æ‰¾åˆ°æ–‡ä»¶æŒ‡é’ˆï¼Œä»è€Œè¿›å…¥æ‰“å¼€æ–‡ä»¶è¡¨ã€‚è¯¥è¡¨å­˜å‚¨äº†ä»¥ä¸‹ä¿¡æ¯ï¼š æ–‡ä»¶åç§»é‡ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶å†…éƒ¨æŒ‡é’ˆåç§»é‡ã€‚è°ƒç”¨read()æˆ–è€…write() å‡½æ•°æ—¶ï¼Œæ–‡ä»¶åç§»é‡ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ lseek() ç›´æ¥ä¿®æ”¹ã€‚ çŠ¶æ€æ ‡å¿—ï¼Œæ¯”å¦‚åªè¯»æ¨¡å¼ã€è¯»å†™æ¨¡å¼ã€è¿½åŠ æ¨¡å¼ã€è¦†ç›–æ¨¡å¼ç­‰ã€‚ i-node è¡¨æŒ‡é’ˆã€‚ ç„¶è€Œï¼Œè¦æƒ³çœŸæ­£è¯»å†™æ–‡ä»¶ï¼Œè¿˜å¾—é€šè¿‡æ‰“å¼€æ–‡ä»¶è¡¨çš„ i-node æŒ‡é’ˆè¿›å…¥ i-node è¡¨ï¼Œè¯¥è¡¨åŒ…å«äº†è¯¸å¦‚ä»¥ä¸‹çš„ä¿¡æ¯ï¼š æ–‡ä»¶ç±»å‹ï¼Œä¾‹å¦‚å¸¸è§„æ–‡ä»¶ã€å¥—æ¥å­—æˆ– FIFOã€‚ æ–‡ä»¶å¤§å°ã€‚ æ—¶é—´æˆ³ï¼Œæ¯”å¦‚åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ã€‚ æ–‡ä»¶é”ã€‚ æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦ æ–‡ä»¶æè¿°ç¬¦ ç”¨é€” POSIX åç§° stdio æµ 0 æ ‡å‡†è¾“å…¥ STDIN FILENO stdin 1 æ ‡å‡†è¾“å‡º STDOUT FILENO stdout 2 æ ‡å‡†é”™è¯¯ STDERR FILENO stderr æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦é€šå¸¸ä¼šå’Œé‡å®šå‘ç¬¦&lt;,&gt;,&lt;&lt;,&gt;&gt;ç»“åˆä½¿ç”¨ã€‚ç®­å¤´å‘å·¦è¡¨ç¤ºè¾“å…¥é‡å®šå‘ï¼Œå‘å³è¡¨ç¤ºè¾“å‡ºé‡å®šå‘ã€‚æ–‡ä»¶æè¿°ç¬¦ä¸­çš„0é€šå¸¸çœç•¥ã€‚å¦‚0&lt; ~ &lt;ï¼Œ0&lt;&lt; ~ &lt;&lt;ã€‚ æ ‡å‡†è¾“å…¥ä½¿ç”¨wcå‘½ä»¤ç»Ÿè®¡æ–‡æ¡£ä¸­æœ‰å¤šå°‘è¡Œå­—ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼Œè¯¦ç»†ä»‹ç»å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ 1wc [é€‰é¡¹] [æ–‡ä»¶å] 123456$ cat test.txtThis is a test file.Hello world!$ wc -l &lt;test.txt2 è¿™é‡Œçš„é‡å®šå‘ç¬¦å·&lt;ä½œç”¨å°±æ˜¯å°†test.txtçš„å†…å®¹ä½œä¸ºæ ‡å‡†è¾“å…¥ï¼Œä¼ é€’ç»™wcå‘½ä»¤ã€‚ æ ‡å‡†è¾“å‡ºä¸æ ‡å‡†é”™è¯¯è¿™ä¸ªæˆ‘ä»¬æ¯å¤©éƒ½åœ¨æ¥è§¦ï¼Œä½†æ˜¯å¯èƒ½æ²¡æœ‰ç•™æ„ã€‚å‡è®¾æˆ‘å½“å‰ç›®å½•ä¸‹åªæœ‰ä¸€ä¸ªtest.txtæ–‡ä»¶ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ 1234567891011121314$ cat text.txtThis is a test file.Hello world! #æ ‡å‡†è¾“å‡º1$ cat text.mdcat: test.md: No such file or directory #æ ‡å‡†é”™è¯¯2$ ls text.txt text.md 1&gt;file.out 2&gt;file.err # æ‰§è¡Œå,æ²¡æœ‰ä»»ä½•è¿”å›å€¼. åŸå› æ˜¯, è¿”å›å€¼éƒ½é‡å®šå‘åˆ°ç›¸åº”çš„æ–‡ä»¶ä¸­äº†,è€Œä¸å†å‰ç«¯æ˜¾ç¤º $ cat file.out text.txt $ cat file.err cat: test.md: No such file or directory &amp;æè¿°ç¬¦&amp; æ˜¯ä¸€ä¸ªæè¿°ç¬¦ï¼Œå¦‚æœ1æˆ–2å‰ä¸åŠ &amp;ï¼Œä¼šè¢«å½“æˆä¸€ä¸ªæ™®é€šæ–‡ä»¶ã€‚ 1&gt;&amp;2 æ„æ€æ˜¯æŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†é”™è¯¯ã€‚2&gt;&amp;1 æ„æ€æ˜¯æŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºã€‚&amp;&gt;filename æ„æ€æ˜¯æŠŠæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºéƒ½é‡å®šå‘åˆ°æ–‡ä»¶ filename ä¸­ å‚è€ƒLinux Shell é‡å®šå‘ï¼ˆè¾“å…¥è¾“å‡ºé‡å®šå‘ï¼‰ç²¾è®²","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"VScode å¿«é€Ÿæ·»åŠ æ³¨é‡Šæ¨¡æ¿","slug":"VScodeå¿«é€Ÿæ·»åŠ æ³¨é‡Šæ¨¡æ¿","date":"2021-09-29T09:03:13.000Z","updated":"2022-10-15T03:18:34.344Z","comments":true,"path":"2021/09/29/VScodeå¿«é€Ÿæ·»åŠ æ³¨é‡Šæ¨¡æ¿/","link":"","permalink":"http://example.com/2021/09/29/VScode%E5%BF%AB%E9%80%9F%E6%B7%BB%E5%8A%A0%E6%B3%A8%E9%87%8A%E6%A8%A1%E6%9D%BF/","excerpt":"","text":"éœ€æ±‚é€šå¸¸å‡½æ•°çš„æ³¨é‡Šä¸€èˆ¬éƒ½æ¯”è¾ƒé•¿ï¼Œè€Œä¸”æ¯ä¸ªå‡½æ•°æ³¨é‡Šéƒ½æ ¼å¼ä¸€è‡´ï¼Œä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°æ³¨é‡Šæ¨¡æ¿ã€‚å¦‚æœæ¯æ¬¡å†™æ³¨é‡Šéƒ½è¦å¤åˆ¶ä¸€éæ¯”è¾ƒéº»çƒ¦ï¼Œå¤åˆ¶å®Œè¿˜è¦åˆ é™¤å¤šä½™çš„å­—ç¬¦ã€‚ä½†æ˜¯ç°æœ‰çš„ç¼–è¾‘å™¨ä¸€èˆ¬éƒ½æ”¯æŒå¿«æ·è¾“å…¥ã€‚ä¸‹é¢ä»‹ç»åœ¨ VSCode ä¸­å¦‚ä½•å¿«æ·è¾“å…¥æ³¨é‡Šæ¨¡æ¿ã€‚ æ–¹æ³• Ctrl+Shift+Pæ‰“å¼€ç¼–è¾‘å™¨å‘½ä»¤çª—å£ - è¾“å…¥snippets-é€‰æ‹©Preferences:Configure User Snippets-é€‰æ‹©Â·c.jsonÂ· æ›´æ”¹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627 &#123;// Place your snippets for c here. Each snippet is defined under a snippet name and has a prefix, body and// description. The prefix is what is used to trigger the snippet and the body will be expanded and inserted. Possible variables are:// $1, $2 for tab stops, $0 for the final cursor position, and $&#123;1:label&#125;, $&#123;2:another&#125; for placeholders. Placeholders with the// same ids are connected.// Example:// &quot;Print to console&quot;: &#123;// &quot;prefix&quot;: &quot;log&quot;,// &quot;body&quot;: [// &quot;console.log(&#x27;$1&#x27;);&quot;,// &quot;$2&quot;// ],// &quot;description&quot;: &quot;Log output to console&quot;// &#125; &quot;Function comment&quot;: &#123; &quot;prefix&quot;: &quot;funcom&quot;, &quot;body&quot;: [ &quot;/*&quot; &quot;* Description: &quot; &quot;*Input Parameter: &quot; &quot;* Output Parameter: &quot; &quot;*Return: &quot; &quot;*/ &quot; ], &quot;description&quot;: &quot;function comment&quot; &#125; prefix:è¾“å…¥æ—¶çš„ç¼©å†™ï¼Œè§¦å‘å™¨ body:å†…å®¹ description:æè¿° å‚è€ƒèµ„æ–™VSCode åˆ©ç”¨ Snippets è®¾ç½®è¶…å®ç”¨çš„ä»£ç å— - æ˜é‡‘","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"QtCreator å¿«é€Ÿæ·»åŠ æ³¨é‡Šæ¨¡æ¿","slug":"QtCreatorå¿«é€Ÿæ·»åŠ æ³¨é‡Šæ¨¡æ¿","date":"2021-09-28T11:26:03.000Z","updated":"2022-10-15T03:14:29.458Z","comments":true,"path":"2021/09/28/QtCreatorå¿«é€Ÿæ·»åŠ æ³¨é‡Šæ¨¡æ¿/","link":"","permalink":"http://example.com/2021/09/28/QtCreator%E5%BF%AB%E9%80%9F%E6%B7%BB%E5%8A%A0%E6%B3%A8%E9%87%8A%E6%A8%A1%E6%9D%BF/","excerpt":"","text":"éœ€æ±‚é€šå¸¸å‡½æ•°çš„æ³¨é‡Šä¸€èˆ¬éƒ½æ¯”è¾ƒé•¿ï¼Œè€Œä¸”æ¯ä¸ªå‡½æ•°æ³¨é‡Šéƒ½æ ¼å¼ä¸€è‡´ï¼Œä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°æ³¨é‡Šæ¨¡æ¿ã€‚å¦‚æœæ¯æ¬¡å†™æ³¨é‡Šéƒ½è¦å¤åˆ¶ä¸€éæ¯”è¾ƒéº»çƒ¦ï¼Œå¤åˆ¶å®Œè¿˜è¦åˆ é™¤å¤šä½™çš„å­—ç¬¦ã€‚ä½†æ˜¯ç°æœ‰çš„ç¼–è¾‘å™¨ä¸€èˆ¬éƒ½æ”¯æŒå¿«æ·è¾“å…¥ã€‚ä¸‹é¢ä»‹ç»åœ¨ QtCreator ä¸­å¦‚ä½•å¿«æ·è¾“å…¥æ³¨é‡Šæ¨¡æ¿ã€‚ 123456/* * Description: // å‡½æ•°åŠŸèƒ½ã€æ€§èƒ½ç­‰çš„æè¿° * Input Parameter: // è¾“å…¥å‚æ•°è¯´æ˜ï¼ŒåŒ…æ‹¬æ¯ä¸ªå‚æ•°çš„ä½œ * Output Parameter: // å¯¹è¾“å‡ºå‚æ•°çš„è¯´æ˜ã€‚ * Return: // å‡½æ•°è¿”å›å€¼çš„è¯´æ˜ */ æ–¹æ³• QtCreator-èœå•æ å·¥å…·ï¼ˆToolï¼‰- é€‰é¡¹ï¼ˆOptionsï¼‰- æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆText Editorï¼‰- ç‰‡æ®µï¼ˆSnippetsï¼‰ ç»„ï¼ˆGroupï¼‰é€‰æ‹©C++-æ·»åŠ ï¼ˆAddï¼‰ ç°åœ¨è¦ä¸ºæˆ‘ä»¬çš„è§¦å‘ï¼ˆTriggerï¼‰èµ·ä¸ªåå­—ï¼Œå› ä¸ºæ˜¯å‡½æ•°æ³¨é‡Šï¼Œæˆ‘èµ·äº†ä¸ªfuncomï¼Œç„¶ååœ¨ä¸‹æ–¹ç©ºç™½æ¡†é‡Œå¡«å…¥æ³¨é‡Šæ¨¡æ¿ã€‚Apply ä¿å­˜ã€‚å¦‚å›¾ åœ¨éœ€è¦æ·»åŠ æ³¨é‡Šæ¨¡æ¿çš„åœ°æ–¹è¾“å…¥funcomå³å¯æç¤ºå¿«æ·è¾“å…¥ï¼Œå›è½¦å³å¯æ·»åŠ æ³¨é‡Šæ¨¡æ¿ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç‰‡æ®µé‡Œæœ‰å¾ˆå¤šç†Ÿæ‚‰çš„å†…å®¹ï¼Œæ¯”å¦‚if elseï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶è¾“å…¥if elseè‡ªåŠ¨è¡¥å…¨èŠ±æ‹¬å·å…¶å®å°±æ˜¯åœ¨è¿™é‡Œè®¾ç½®çš„ã€‚åŒç†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ä¸€äº›å…¶ä»–éœ€è¦çš„å¿«æ·è¾“å…¥å†…å®¹ã€‚æ¯”å¦‚è¡Œæ³¨é‡Šï¼Œæ–‡ä»¶æ³¨é‡Šï¼Œç»å¸¸ä½¿ç”¨çš„ä»£ç æ¡†æ¶ç­‰ç­‰ã€‚","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"QtCreator","slug":"QtCreator","permalink":"http://example.com/tags/QtCreator/"}]},{"title":"Qt ä¿®æ”¹ UI æ–‡ä»¶ä¸ç”Ÿæ•ˆ","slug":"Qtä¿®æ”¹UIæ–‡ä»¶ä¸ç”Ÿæ•ˆ","date":"2021-09-26T01:19:18.000Z","updated":"2022-10-15T03:14:29.466Z","comments":true,"path":"2021/09/26/Qtä¿®æ”¹UIæ–‡ä»¶ä¸ç”Ÿæ•ˆ/","link":"","permalink":"http://example.com/2021/09/26/Qt%E4%BF%AE%E6%94%B9UI%E6%96%87%E4%BB%B6%E4%B8%8D%E7%94%9F%E6%95%88/","excerpt":"","text":"ä¿ç•™ç°åœºä¿®æ”¹äº† UI æ–‡ä»¶åï¼Œåœ¨ä»£ç ä¸­æ— æ³•è°ƒç”¨æ–°å¢çš„å†…å®¹ã€‚ æ¢ç©¶åŸå› å¯¼è‡´ui_*.hæ–‡ä»¶æ²¡æœ‰æ›´æ–°çš„åŸå› æ˜¯æºä»£ç ä¸­#include ui_*.hçš„ä½ç½®å’Œå®é™…ç”Ÿæˆçš„ä½ç½®ä¸åŒï¼Œå¼•ç”¨çš„æ˜¯è€çš„ui_*.h è§£å†³æ–¹æ³•æ–¹æ³•ä¸€ï¼š é¡¹ç›®è®¾ç½®æ–‡ä»¶.proå†…å¢åŠ  UI_DIR=./UIï¼ŒåŒæ—¶åˆ é™¤æ‰æºä»£ç ç›®å½•ä¸­ui_*.hï¼Œclear all,-&gt;qmake-&gt;rebuilt allæ–¹æ³•äºŒï¼š","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"QtCreator ä¿®æ”¹é¡¹ç›®æ„å»ºç›®å½•","slug":"QtCreatorä¿®æ”¹é¡¹ç›®æ„å»ºç›®å½•","date":"2021-09-25T11:17:46.000Z","updated":"2022-10-15T03:14:29.455Z","comments":true,"path":"2021/09/25/QtCreatorä¿®æ”¹é¡¹ç›®æ„å»ºç›®å½•/","link":"","permalink":"http://example.com/2021/09/25/QtCreator%E4%BF%AE%E6%94%B9%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E7%9B%AE%E5%BD%95/","excerpt":"","text":"ä¿ç•™ç°åœºQtCreator æ„å»ºé¡¹ç›®æ—¶ï¼Œä¼šåœ¨ç»Ÿè®¡ç›®å½•æ–°å»ºä¸€ä¸ªbuild-xxx-debugçš„ç›®å½•ï¼Œå¦‚æœæƒ³è¦è‡ªå·±ä¿®æ”¹è¿™ä¸ªç›®å½•çš„ä½ç½®ï¼Œåç§°ï¼Œè¯¥æ€ä¹ˆåŠã€‚ è§£å†³æ–¹æ³•ä»…ä¿®æ”¹å·¥å…·ï¼ˆToolï¼‰â€“&gt;é€‰é¡¹ (Options)â€“&gt;æ„å»ºå’Œè¿è¡Œ (Build&amp;Run) ä¸­Default build directoryï¼š./%&#123;CurrentBuild:Name&#125;æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚ å°†å·¥å…·â€“&gt;é€‰é¡¹â€“&gt;æ„å»ºå’Œè¿è¡Œä¸­Default build directoryä¿®æ”¹ä¸º./%&#123;CurrentBuild:Name&#125;ï¼ˆæ”¹ä¸ºä½ æƒ³è¦çš„ç›®æ ‡ç›®å½•éƒ½è¡Œï¼‰ï¼› æŠŠ QtCreator å…³é—­ï¼ŒæŠŠå·¥ç¨‹ç›®å½•ä¸‹åç¼€åä¸º.pro.userçš„æ–‡ä»¶åˆ æ‰ï¼› ç”¨ QtCreator æ‰“å¼€å·¥ç¨‹ï¼Œä¼šæç¤ºä½ åˆ›å»ºæ„å»ºç›®å½•ï¼Œæ­¤æ—¶æç¤ºçš„å°±æ˜¯ä½ ä¿®æ”¹åçš„Default build directoryä¸­å¡«å†™çš„ç›®å½•ï¼› å…¶ä¸­.pro.useræ–‡ä»¶è®°å½•äº†ç¼–è¯‘å™¨ã€æ„å»ºå·¥å…·é“¾ã€æ„å»ºç›®å½•ã€ç‰ˆæœ¬â€¦..ç­‰å·¥ç¨‹ç¼–è¯‘ç›¸å…³ä¿¡æ¯ï¼Œæƒ³è¦æ›´æ¢é¡¹ç›®çš„ç¼–è¯‘ç¯å¢ƒï¼Œå¾—åˆ é™¤è¿™ä¸ªæ–‡ä»¶ï¼Œç”± QtCreator è‡ªåŠ¨é‡æ–°åˆ›å»ºã€‚","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"Git-æŠŠæœ¬åœ°ä»“åº“åŒæ­¥åˆ° GitHub","slug":"GitæŠŠæœ¬åœ°ä»“åº“åŒæ­¥åˆ°GitHub","date":"2021-09-23T15:06:28.000Z","updated":"2022-10-15T03:14:29.239Z","comments":true,"path":"2021/09/23/GitæŠŠæœ¬åœ°ä»“åº“åŒæ­¥åˆ°GitHub/","link":"","permalink":"http://example.com/2021/09/23/Git%E6%8A%8A%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E5%90%8C%E6%AD%A5%E5%88%B0GitHub/","excerpt":"","text":"éœ€æ±‚å› ä¸ºç°åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯å…ˆä»è¿œç¨‹ Clone ä¸‹æ¥ä»£ç ï¼Œæ‰€ä»¥è¿™ä¸€åŠŸèƒ½ç”¨çš„ä¸å¤šã€‚ä½†æ˜¯å¦‚æœè‡ªå·±æƒ³æŠŠæœ¬åœ°å·²æœ‰çš„ä»£ç åŒæ­¥åˆ°è¿œç¨‹ï¼Œæœ¬æ–‡å°±å¯ä»¥è§£å†³è¿™ä¸€çš„éœ€æ±‚ã€‚ æ–¹æ³• GitHub æ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå¹¶å¤åˆ¶ SSH åœ°å€ 1git@github.com:git201901/git_learning.git git remote add åç§° 1pc:git-learning suling$ git remote add github git@github.com:git201901/git_learning.git è¿™é‡Œçš„githubå°±æ˜¯è‡ªå®šä¹‰çš„ä¸€ä¸ªåç§°ï¼Œç”¨äºæ›¿æ¢åé¢çš„è¿œç¨‹åœ°å€ã€‚æ–¹ä¾¿åç»­git push githubä»¥åŠgit fetch githubã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"è§£å†³ Undefined reference to é—®é¢˜","slug":"è§£å†³Undefined-reference-toé—®é¢˜","date":"2021-09-17T03:14:30.000Z","updated":"2022-10-15T03:14:29.846Z","comments":true,"path":"2021/09/17/è§£å†³Undefined-reference-toé—®é¢˜/","link":"","permalink":"http://example.com/2021/09/17/%E8%A7%A3%E5%86%B3Undefined-reference-to%E9%97%AE%E9%A2%98/","excerpt":"","text":"é“¾æ¥æ—¶ç¼ºå¤±äº†ç›¸å…³ç›®æ ‡æ–‡ä»¶è¿™æ˜¯æœ€å…¸å‹æœ€å¸¸è§çš„æƒ…å†µã€‚æ¯”å¦‚æ–°æ·»åŠ äº†ä¸€ä¸ªæ¨¡å—fun.h fun.cä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨äº†è¿™ä¸ªæ¨¡å—é‡Œçš„å‡½æ•°ï¼Œå¦‚æœç¼–è¯‘æ—¶å¿˜è®°åŠ ä¸Šè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œè°ƒç”¨funæ¨¡å—å‡½æ•°çš„åœ°æ–¹ï¼Œå°±ä¼šæŠ¥undefined referenceé”™è¯¯ã€‚ è¿™ä¸ªé—®é¢˜åœ¨ç¼–è¾‘å™¨ä¸­ä¸€èˆ¬ä¸å®¹æ˜“å‘ç°ï¼Œå› ä¸ºå¤´æ–‡ä»¶åŒ…å«æ˜¯æ­£ç¡®çš„ï¼Œç¼–è¾‘å™¨èƒ½å¤Ÿæ‰¾åˆ°ç›¸å…³çš„å‡½æ•°åŠå…¶å®ç°ï¼Œæ‰€ä»¥åœ¨ç¼–å†™ä»£ç æ—¶ä¸ä¼šæŠ¥é”™ã€‚ é“¾æ¥æ—¶ç¼ºå°‘ç›¸å…³çš„åº“æ–‡ä»¶è¿™ä¸ªåŸå› å’Œä¸Šä¸€æ¡ç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨é™æ€åº“ä¸­çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘æ—¶å¦‚æœæ²¡æœ‰å°†é™æ€åº“ä¸€èµ·ç¼–è¯‘ï¼Œå°±ä¼šæŠ¥åŒæ ·çš„é”™è¯¯ã€‚ é“¾æ¥çš„åº“æ–‡ä»¶ä¸­åˆä½¿ç”¨äº†å¦ä¸€ä¸ªåº“æ–‡ä»¶åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¸€å®šè¦åœ¨ç¼–è¯‘ä¸­åŠ å…¥ç¬¬ä¸‰æ–¹åº“çš„è·¯å¾„ã€‚ å¤šä¸ªåº“æ–‡ä»¶é“¾æ¥é¡ºåºé—®é¢˜åœ¨é“¾æ¥å‘½ä»¤ä¸­ç»™å‡ºæ‰€ä¾èµ–çš„åº“æ—¶ï¼Œéœ€è¦æ³¨æ„åº“ä¹‹é—´çš„ä¾èµ–é¡ºåºï¼Œä¾èµ–å…¶ä»–åº“çš„åº“ä¸€å®šè¦æ”¾åˆ°è¢«ä¾èµ–åº“çš„å‰é¢ï¼Œè¿™æ ·æ‰èƒ½çœŸæ­£é¿å… undefined reference çš„é”™è¯¯ï¼Œå®Œæˆç¼–è¯‘é“¾æ¥ã€‚ å£°æ˜ä¸å®ç°ä¸ä¸€è‡´è¿™ä¸ªåŸå› ä¹Ÿæ¯”è¾ƒå…¸å‹ï¼Œæ³¨æ„æ’æŸ¥å£°æ˜ä¸å®ç°çš„å‚æ•°æ˜¯å¦ä¸€è‡´ï¼Œè¿”å›å€¼æ˜¯å¦ä¸€è‡´ã€‚ åœ¨ c++ä»£ç ä¸­é“¾æ¥ c è¯­è¨€çš„åº“åœ¨C++ä»£ç ä¸­ï¼Œè°ƒç”¨äº†Cè¯­è¨€åº“çš„å‡½æ•°ï¼Œå› æ­¤é“¾æ¥çš„æ—¶å€™æ‰¾ä¸åˆ°ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨ç›¸å…³æ–‡ä»¶æ·»åŠ ä¸€ä¸ªextern &quot;C&quot;çš„å£°æ˜å³å¯ã€‚ æ€»ç»“é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªé”™è¯¯å°±æ˜¯æœªå®šä¹‰ä½ ä½¿ç”¨çš„å†…å®¹å¯¼è‡´çš„ã€‚æ‰€ä»¥è¦æ’æŸ¥ä½¿ç”¨çš„å†…å®¹æ˜¯å¦èƒ½å¤Ÿè¢«æ­£ç¡®â€œæ‰¾åˆ°â€ã€‚ä½¿ç”¨çš„æ—¶å€™æœ‰æ²¡æœ‰å£°æ˜ï¼Œæœ‰æ²¡æœ‰å®šä¹‰ï¼Œå£°æ˜ä¸å®šä¹‰æ˜¯å¦ä¸€è‡´ï¼Œç¼–è¯‘æ—¶èƒ½å¦æ­£ç¡®é“¾æ¥ç­‰ç­‰ã€‚ ç›¸å…³å‚è€ƒâ€œundefined reference toâ€ é—®é¢˜æ±‡æ€»åŠè§£å†³æ–¹æ³•","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"C++","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"C/C++å¦‚ä½•é¿å…è¿‡å¤šä½¿ç”¨å…¨å±€å˜é‡","slug":"C-C-å¦‚ä½•é¿å…è¿‡å¤šä½¿ç”¨å…¨å±€å˜é‡","date":"2021-09-17T02:49:15.000Z","updated":"2022-10-15T03:14:29.050Z","comments":true,"path":"2021/09/17/C-C-å¦‚ä½•é¿å…è¿‡å¤šä½¿ç”¨å…¨å±€å˜é‡/","link":"","permalink":"http://example.com/2021/09/17/C-C-%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E8%BF%87%E5%A4%9A%E4%BD%BF%E7%94%A8%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/","excerpt":"","text":"â€˜ å…·ä½“å®ä¾‹å¯ä»¥å‚è€ƒMarc Pony æŒ‡é’ˆä¼ å‚C è¯­è¨€ä¸­ï¼Œå…¨å±€å˜é‡ç”¨ç»“æ„ä½“å°è£…ï¼Œè®¾è®¡å‡½æ•°æ—¶ï¼Œå°†å‚æ•°ä»¥ç»“æ„ä½“æŒ‡é’ˆå½¢å¼ä¼ å…¥ã€‚ å®šä¹‰è·å–å˜é‡çš„æ–¹æ³•/å‡½æ•°å®šä¹‰ä¸€ä¸ªå‡½æ•°ä»¥get/setå…¨å±€å˜é‡ï¼Œåˆ©ç”¨staticå˜é‡ï¼Œå°†å…¨å±€å˜é‡ä½œç”¨åŸŸé™å®šäºè¯¥å‡½æ•°ï¼Œå°†å…¨å±€å˜é‡éšè—èµ·æ¥ã€‚ å–„ç”¨staticæŠŠå…¨å±€å˜é‡å®šä¹‰åœ¨æŸä¸€ä¸ª .c æ–‡ä»¶ä¸­ï¼Œå¹¶å®šä¹‰ä¸º static ç±»å‹ï¼Œç„¶åå®šä¹‰ä¸€ç³»åˆ—æ“ä½œè¿™ä¸ªå˜é‡çš„å‡½æ•°ï¼Œå¤´æ–‡ä»¶é‡Œé¢åªæœ‰æ“ä½œå‡½æ•°ï¼Œæ²¡æœ‰å˜é‡çš„å£°æ˜","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"C++","slug":"C","permalink":"http://example.com/tags/C/"}]},{"title":"C è¯­è¨€ sizeof(ç»“æ„ä½“) åˆ°åº•æœ‰å¤šå¤§","slug":"Cè¯­è¨€sizeof-ç»“æ„ä½“-åˆ°åº•æœ‰å¤šå¤§","date":"2021-09-15T10:38:07.000Z","updated":"2022-10-15T03:14:29.138Z","comments":true,"path":"2021/09/15/Cè¯­è¨€sizeof-ç»“æ„ä½“-åˆ°åº•æœ‰å¤šå¤§/","link":"","permalink":"http://example.com/2021/09/15/C%E8%AF%AD%E8%A8%80sizeof-%E7%BB%93%E6%9E%84%E4%BD%93-%E5%88%B0%E5%BA%95%E6%9C%89%E5%A4%9A%E5%A4%A7/","excerpt":"","text":"C è¯­è¨€ä¸­å„ä¸ªæ•°æ®ç±»å‹çš„å¤§å° ç±»å‹ å¤§å° èŒƒå›´ char 1 å­—èŠ‚ -128 åˆ° 127 æˆ– 0 åˆ° 255 unsigned char 1 å­—èŠ‚ 0 åˆ° 255 signed char 1 å­—èŠ‚ -128 åˆ° 127 int 2 æˆ– 4 å­—èŠ‚ -32,768 åˆ° 32,767 æˆ– -2,147,483,648 åˆ° 2,147,483,647 unsigned int 2 æˆ– 4 å­—èŠ‚ 0 åˆ° 65,535 æˆ– 0 åˆ° 4,294,967,295 short 2 å­—èŠ‚ -32,768 åˆ° 32,767 unsigned short 2 å­—èŠ‚ 0 åˆ° 65,535 long 4 å­—èŠ‚ -2,147,483,648 åˆ° 2,147,483,647 unsigned long 4 å­—èŠ‚ 0 åˆ° 4,294,967,295 ç»“æ„ä½“ (struct) å¾…åˆ†æï¼Œéœ€è¦è€ƒè™‘å­—èŠ‚å¯¹é½ è”åˆ (union) æ‰€æœ‰æˆå‘˜ä¸­æœ€é•¿çš„ æšä¸¾ (enum) æ ¹æ®æ•°æ®ç±»å‹ å•å±‚ç»“æ„ä½“å¤§å°å¦‚æœç»“æ„ä½“ä¸­çš„æˆå‘˜æ•°æ®ç±»å‹ç›¸åŒï¼Œè¿™æ ·çš„æƒ…å†µæœ€ç®€å•ï¼Œç»“æ„ä½“å¤§å°=æ•°æ®ç±»å‹*æ•°æ®ä¸ªæ•°ã€‚ 123456789101112131415161718192021222324#include &lt;stdio.h&gt;typedef struct Test1&#123; int a; int b;&#125; T1;typedef struct Test2&#123; char a; char b;&#125; T2;int main()&#123; T1 t1; int siz01 = sizeof(t1); printf(&quot;%d\\n&quot;, siz01); //8 T2 t2; int siz02 = sizeof(t2); printf(&quot;%d\\n&quot;, siz02); //2 return 0;&#125; ä½†æ˜¯ç»“æ„ä½“ä¸­é€šå¸¸æ•°æ®ç±»å‹éƒ½å„ä¸ç›¸åŒï¼Œæˆå‘˜æŒ‰ç…§å®šä¹‰æ—¶çš„é¡ºåºä¾æ¬¡å­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚å’Œæ•°ç»„ä¸ä¸€æ ·çš„æ˜¯ï¼Œç»“æ„ä½“çš„å¤§å°ä¸æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°ç®€å•çš„ç›¸åŠ ï¼Œéœ€è¦è€ƒè™‘åˆ°åœ°å€å¯¹é½é—®é¢˜ã€‚çœ‹ä¸‹é¢è¿™æ ·çš„ä¸€ä¸ªç»“æ„ä½“ï¼š 123456789101112131415#include &lt;stdio.h&gt;typedef struct Test3&#123; int a; char b; int c;&#125; T3;int main()&#123; T3 t3; int siz03 = sizeof(t3); printf(&quot;t3: %d\\n&quot;, siz03); //t3: 12 return 0;&#125; ç”¨sizeofæ±‚è¯¥ç»“æ„ä½“çš„å¤§å°ï¼Œå‘ç°å€¼ä¸º12ã€‚intå 4ä¸ªå­—èŠ‚ï¼Œcharå 1ä¸ªå­—èŠ‚ï¼Œç»“æœåº”è¯¥æ˜¯9ä¸ªå­—èŠ‚æ‰å¯¹å•Šï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å…ˆä»‹ç»ä¸€ä¸ªç›¸å…³çš„æ¦‚å¿µâ€”â€”åç§»é‡ã€‚åç§»é‡æŒ‡çš„æ˜¯ç»“æ„ä½“å˜é‡ä¸­æˆå‘˜çš„åœ°å€å’Œç»“æ„ä½“å˜é‡åœ°å€çš„å·®ã€‚ç»“æ„ä½“å¤§å°ç­‰äºæœ€åä¸€ä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šæœ€åä¸€ä¸ªæˆå‘˜çš„å¤§å°ã€‚æ˜¾ç„¶ï¼Œç»“æ„ä½“å˜é‡ä¸­ç¬¬ä¸€ä¸ªæˆå‘˜çš„åœ°å€å°±æ˜¯ç»“æ„ä½“å˜é‡çš„é¦–åœ°å€ã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜int açš„åç§»é‡ä¸º0ã€‚ç¬¬äºŒä¸ªæˆå‘˜char bçš„åç§»é‡æ˜¯ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šç¬¬ä¸€ä¸ªæˆå‘˜çš„å¤§å°0+4,å…¶å€¼ä¸º4ï¼›ç¬¬ä¸‰ä¸ªæˆå‘˜int cçš„åç§»é‡æ˜¯ç¬¬äºŒä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šç¬¬äºŒä¸ªæˆå‘˜çš„å¤§å°4+1,å…¶å€¼ä¸º5ã€‚ å³ç»“æ„ä½“çš„å¤§å°ç­‰äºæœ€åä¸€ä¸ªæˆå‘˜å˜é‡çš„åœ°å€ä¸ç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡çš„åœ°å€ä¹‹å·®ï¼Œå†åŠ ä¸Šæœ€åä¸€ä¸ªæˆå‘˜å˜é‡çš„å¤§å°ã€‚ å¦‚æœä¸è€ƒè™‘å¯¹é½çš„æƒ…å†µï¼Œå˜é‡åœ¨å†…å­˜ä¸­çš„å­˜æ”¾å¦‚ä¸‹ï¼Œ 12345//t3 ________0 |aaaabccc| 78 |c | 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ å½“æˆ‘ä»¬å‡­ç›´è§‰å»ç”¨4+1+4=9æ¥è®¡ç®—ç»“æ„ä½“å¤§å°æ—¶å¹¶ä¸ä¼šè§‰å¾—æœ‰ä»€ä¹ˆé”™ï¼Œä½†æ˜¯é€šè¿‡å†…å­˜çš„æ’æ”¾å¯ä»¥ç›´è§‚çš„çœ‹åˆ°ï¼Œç¬¬ä¸‰ä¸ªå˜é‡çš„å­˜æ”¾æœ‰ç‚¹å¥‡æ€ªã€‚CPU ä»å†…å­˜ä¸­è¯»å–è‚¯å®šä¹Ÿæ˜¯æä¸ºä¸ä¾¿çš„ã€‚å®é™…å­˜å‚¨å˜é‡æ—¶ï¼Œåœ°å€è¦æ±‚å¯¹é½çš„ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ç¨‹åºæ—¶ä¼šéµå¾ªä¸¤æ¡åŸåˆ™ï¼š ç»“æ„ä½“å˜é‡ä¸­æˆå‘˜çš„åç§»é‡å¿…é¡»æ˜¯æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼ˆ0è¢«è®¤ä¸ºæ˜¯ä»»ä½•æ•°çš„æ•´æ•°å€ï¼‰ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œä¹Ÿå³æ‰€æœ‰æˆå‘˜å¤§å°çš„å…¬å€æ•°ã€‚ æˆ‘ä»¬åœ¨å›å¤´åˆ†æä¸Šè¿°çš„ä¾‹å­ï¼Œå‰ä¸¤ä¸ªæˆå‘˜çš„åç§»é‡0 4éƒ½æ»¡è¶³è¦æ±‚ï¼Œä½†ç¬¬ä¸‰ä¸ªæˆå‘˜çš„åç§»é‡ä¸º5ï¼Œå¹¶ä¸æ˜¯è‡ªèº«intå¤§å°çš„æ•´æ•°å€ã€‚ç¼–è¯‘å™¨åœ¨å¤„ç†æ—¶ä¼šåœ¨ç¬¬äºŒä¸ªæˆå‘˜åé¢è¡¥ä¸Š3ä¸ªç©ºå­—èŠ‚ï¼Œä½¿å¾—ç¬¬ä¸‰ä¸ªæˆå‘˜çš„åç§»é‡å˜æˆ8ã€‚ç»“æ„ä½“å¤§å°ç­‰äºæœ€åä¸€ä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šå…¶å¤§å°ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­è®¡ç®—å‡ºæ¥çš„å¤§å°ä¸º12ï¼Œæ»¡è¶³å…¬å€æ•°è¦æ±‚ã€‚ ç›´è§‚æè¿°è¿™ä¸ªç»“æ„ä½“åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å¦‚ä¸‹ï¼Œæ˜Ÿå·*è¡¨ç¤ºè¯¥æ®µå†…å­˜å› ä¸ºå†…å­˜å¯¹é½è¢«å ç”¨ï¼Œä¹Ÿå°±æ˜¯å…¶å®é™…å¤§å°ã€‚å­—æ¯ä¸ªæ•°è¡¨ç¤ºå…¶å•ç‹¬æ‹¿å‡ºæ¥çš„å¤§å° 12345//t3 ________0 |aaaab***| 78 |cccc | 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ å†çœ‹ä¸€ä¾‹ï¼Œ 12345678910111213#include &lt;stdio.h&gt;typedef struct Test4&#123; int a; short b;&#125; T4;int main()&#123; T4 t4; int siz04 = sizeof(t4); printf(&quot;t4: %d\\n&quot;, siz04); //t4: 8 return 0;&#125; æˆå‘˜int açš„åç§»é‡ä¸º 0ï¼›æˆå‘˜short bçš„åç§»é‡ä¸º 4ï¼Œéƒ½ä¸éœ€è¦è°ƒæ•´ã€‚ä½†è®¡ç®—å‡ºæ¥çš„å¤§å°ä¸º6ï¼Œæ˜¾ç„¶ä¸æ˜¯æˆå‘˜int aå¤§å°çš„æ•´æ•°å€ã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨ä¼šåœ¨æˆå‘˜int båé¢è¡¥ä¸Š2ä¸ªå­—èŠ‚ï¼Œä½¿å¾—ç»“æ„ä½“çš„å¤§å°å˜æˆ8ä»è€Œæ»¡è¶³ç¬¬äºŒä¸ªå…¬å€æ•°è¦æ±‚ã€‚ ç”±æ­¤å¯è§ï¼Œç»“æ„ä½“ç±»å‹éœ€è¦è€ƒè™‘åˆ°å­—èŠ‚å¯¹é½çš„æƒ…å†µï¼Œä¸åŒçš„é¡ºåºä¼šå½±å“ç»“æ„ä½“çš„å¤§å°ã€‚ 123456789101112131415161718192021222324#include &lt;stdio.h&gt;typedef struct Test5&#123; char a; int b; char c;&#125; T5;typedef struct Test6&#123; char a; char b; int c;&#125; T6;int main()&#123; T5 t5; int siz05 = sizeof(t5); printf(&quot;t5: %d\\n&quot;, siz05); //t5: 12 T4 t6; int siz06 = sizeof(t6); printf(&quot;t6: %d\\n&quot;, siz06); //t6: 8 return 0;&#125; ä¸¤ä¸ªç»“æ„ä½“æˆå‘˜éƒ½ä¸€æ ·ï¼Œä½†æ˜¯ä¸€ä¸ªå¤§å°ä¸º12ä¸€ä¸ªå¤§å°ä¸º8ã€‚æˆ‘ä»¬å°†å…¶åœ¨å†…å­˜çš„å­˜å‚¨ç”»å‡ºæ¥å°±å¯ä»¥æ˜ç™½ï¼Œ 123456789//t5 ________0 |a***bbbb| 78 |c*** | 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾//t6 ________0 |ab**cccc| 7 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ æ€»ç»“ï¼š ç»“æ„ä½“å¤§å°ç­‰äºæœ€åä¸€ä¸ªæˆå‘˜çš„åç§»é‡åŠ ä¸Šæœ€åä¸€ä¸ªæˆå‘˜çš„å¤§å° ç»“æ„ä½“å˜é‡ä¸­æˆå‘˜çš„åç§»é‡å¿…é¡»æ˜¯æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼ˆ0è¢«è®¤ä¸ºæ˜¯ä»»ä½•æ•°çš„æ•´æ•°å€ï¼‰ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œä¹Ÿå³æ‰€æœ‰æˆå‘˜å¤§å°çš„å…¬å€æ•° ä¸åŒçš„é¡ºåºä¼šå½±å“ç»“æ„ä½“çš„å¤§å° åµŒå¥—ç»“æ„ä½“å¤§å°å¯¹äºåµŒå¥—çš„ç»“æ„ä½“ï¼Œéœ€è¦å°†å…¶å±•å¼€ã€‚å¯¹ç»“æ„ä½“æ±‚sizeofæ—¶ï¼Œä¸Šè¿°ä¸¤ç§åŸåˆ™å˜ä¸ºï¼š å±•å¼€åçš„ç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡åº”å½“æ˜¯è¢«å±•å¼€çš„ç»“æ„ä½“ä¸­æœ€å¤§çš„æˆå‘˜çš„æ•´æ•°å€ã€‚ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œè¿™é‡Œæ‰€æœ‰æˆå‘˜è®¡ç®—çš„æ˜¯å±•å¼€åçš„æˆå‘˜ï¼Œè€Œä¸æ˜¯å°†åµŒå¥—çš„ç»“æ„ä½“å½“åšä¸€ä¸ªæ•´ä½“ã€‚ 123456789101112131415161718#include &lt;stdio.h&gt;typedef struct Test7&#123; short a; struct &#123; char b; int c; &#125; tt; int d;&#125; T7;int main()&#123; T7 t7; int siz07 = sizeof(t7); printf(&quot;t7: %d\\n&quot;, siz07); //t7: 16 return 0;&#125; æ ¹æ®åŸåˆ™ä¸€ï¼Œttçš„åç§»é‡åº”è¯¥æ˜¯4ï¼Œè€Œä¸æ˜¯2ã€‚ åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œ 12345//t7 ________0 |aa**b***| 78 |ccccdddd| 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ 1234567891011121314151617181920212223#include &lt;stdio.h&gt;typedef struct Test8&#123; char a; struct &#123; char b; int c; &#125; tt; char d; char e; char f; char g; char h;&#125; T8;int main()&#123; T8 t8; int siz08 = sizeof(t8); printf(&quot;t8: %d\\n&quot;, siz08); //t8: 20 return 0;&#125; ç»“æ„ä½“ttå•ç‹¬è®¡ç®—å ç”¨ç©ºé—´ä¸º8ï¼Œè€Œt8åˆ™æ˜¯20ï¼Œä¸æ˜¯8çš„æ•´æ•°å€ï¼Œè¿™è¯´æ˜åœ¨è®¡ç®—sizeof(t8)æ—¶ï¼Œå°†åµŒå¥—çš„ç»“æ„ä½“ttå±•å¼€äº†ï¼Œè¿™æ ·t8ä¸­æœ€å¤§çš„æˆå‘˜ä¸ºtt.cï¼Œå ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œ20ä¸º 4 çš„æ•´æ•°å€ã€‚å¦‚æœå°†ttå½“åšä¸€ä¸ªæ•´ä½“ï¼Œç»“æœåº”è¯¥æ˜¯24äº†ã€‚ åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œ 123456//t8 ________0 |a***b***| 78 |ccccdefg| 1516 |h*** | 31 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ å¦ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­æ˜¯ç»“æ„ä½“ä¸­åŒ…å«æ•°ç»„ï¼Œå…¶å¤§å°è®¡ç®—åº”å½“å’Œå¤„ç†åµŒå¥—ç»“æ„ä½“ä¸€æ ·ï¼Œå°†å…¶å±•å¼€ï¼Œå¦‚ä¸‹ä¾‹å­ï¼š 1234567891011121314#include &lt;stdio.h&gt;typedef struct Test9&#123; char a; float b; int c[2];&#125; T9;int main()&#123; T9 t9; int siz09 = sizeof(t9); printf(&quot;t9: %d\\n&quot;, siz09); //t9: 16 return 0;&#125; char aå ä¸€ä¸ªå­—èŠ‚ï¼Œåç§»é‡ä¸º0ï¼Œshort bå å››å­—èŠ‚ï¼Œåç§»é‡ä¸º2ï¼Œä¸æ˜¯æœ€å¤§æˆå‘˜çš„æ•´æ•°å€ï¼Œè¿™é‡Œå–æœ€å¤§æˆå‘˜æ˜¯intæˆ–è€…shortçš„å¤§å°çš„å€æ•°ã€‚è€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„int c[2]çš„å€æ•°ã€‚æ‰€ä»¥short båç§»é‡æ‰©å±•ä¸º4ã€‚ å†…å­˜ä¸­å­˜å‚¨ï¼Œ 12345//t9 ________0 |a***bbbb| 78 |cccccccc| 15 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ æ€»ç»“ï¼š å±•å¼€åçš„ç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡åº”å½“æ˜¯è¢«å±•å¼€çš„ç»“æ„ä½“ä¸­æœ€å¤§çš„æˆå‘˜çš„æ•´æ•°å€ã€‚ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œè¿™é‡Œæ‰€æœ‰æˆå‘˜è®¡ç®—çš„æ˜¯å±•å¼€åçš„æˆå‘˜ï¼Œè€Œä¸æ˜¯å°†åµŒå¥—çš„ç»“æ„ä½“å½“åšä¸€ä¸ªæ•´ä½“ã€‚ æƒ³è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œä¿è¯å¯¹é½è¦æ±‚ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ¯”è¾ƒå‡†ç¡®çš„ç®—å‡ºæ¥","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"}]},{"title":"Qt å‘½ä»¤è¡Œå¸¦å‚æ•°å¯åŠ¨ Qt ç¨‹åº","slug":"Qtå‘½ä»¤è¡Œå¸¦å‚æ•°å¯åŠ¨Qtç¨‹åº","date":"2021-09-13T04:03:44.000Z","updated":"2022-10-15T03:14:29.468Z","comments":true,"path":"2021/09/13/Qtå‘½ä»¤è¡Œå¸¦å‚æ•°å¯åŠ¨Qtç¨‹åº/","link":"","permalink":"http://example.com/2021/09/13/Qt%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%A6%E5%8F%82%E6%95%B0%E5%90%AF%E5%8A%A8Qt%E7%A8%8B%E5%BA%8F/","excerpt":"","text":"ç®€ä»‹æˆ‘ä»¬ç»å¸¸ç”¨åˆ°å‘½ä»¤è¡Œå‚æ•°ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ Linux å‘½ä»¤ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ls -a,lså…¶å®å°±æ˜¯ä¸€ä¸ªç¨‹åºï¼Œ-aå°±æ˜¯è¯¥ç¨‹åºéœ€è¦è§£æçš„ä¸€ä¸ªå‚æ•°ã€‚é‚£ä¹ˆå¦‚ä½•èƒ½è®© Qt ç¨‹åºä¹Ÿèƒ½è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œä»å‘½ä»¤è¡Œå¯åŠ¨å‘¢ï¼Ÿ Qt ä» 5.2 ç‰ˆå¼€å§‹æä¾›äº†ä¸¤ä¸ªç±»QCommandLineOptionå’ŒQCommandLineParseræ¥è§£æåº”ç”¨çš„å‘½ä»¤è¡Œå‚æ•°ã€‚ æ·»åŠ ç¨‹åºå±æ€§ä¿¡æ¯ï¼Œå¸®åŠ©ï¼Œç‰ˆæœ¬ä¸€ä¸ªç¨‹åºå¯åŠ¨åï¼Œæˆ‘ä»¬ä¼šåœ¨å‘½ä»¤è¡Œçœ‹åˆ°ç¨‹åºçš„ä¸€äº›ç®€è¦ä¿¡æ¯ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨-vå‘½ä»¤æ˜¾ç¤ºå…¶ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™äº›é€šç”¨çš„å‚æ•°ä»¥åŠè¢« Qt åˆ†è£…å¥½ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ 123456789101112131415161718#include &quot;mainwindow.h&quot;#include &lt;QApplication&gt;#include &lt;QCommandLineParser&gt;int main(int argc, char *argv[])&#123; QApplication a(argc, argv); QCommandLineParser parser; // å®šä¹‰è§£æå®ä¾‹ parser.setApplicationDescription(&quot;TestCommandLine&quot;); // æè¿°å¯æ‰§è¡Œç¨‹åºçš„å±æ€§ parser.addHelpOption(); // æ·»åŠ å¸®åŠ©å‘½ä»¤ parser.addVersionOption(); // æ·»åŠ ç‰ˆæœ¬é€‰æ‹©å‘½ä»¤ parser.process(a); // æŠŠç”¨æˆ·çš„å‘½ä»¤è¡Œçš„æ”¾å…¥è§£æå®ä¾‹ MainWindow w; w.show(); return a.exec();&#125; è¿è¡Œç»“æœï¼š 12345678âœ ./CommandLine -hUsage: ./CommandLine [options]TestCommandLineOptions: -h, --help Displays help on commandline options. --help-all Displays help including Qt specific options. -v, --version Displays version information. è‡ªå®šä¹‰å‚æ•°12345678910111213141516171819202122232425#include &quot;mainwindow.h&quot;#include &lt;QApplication&gt;#include &lt;QCommandLineParser&gt;#include &lt;QCommandLineOption&gt;int main(int argc, char *argv[])&#123; QApplication a(argc, argv); QCommandLineParser parser; // å®šä¹‰è§£æå®ä¾‹ parser.setApplicationDescription(&quot;TestCommandLine&quot;); // æè¿°å¯æ‰§è¡Œç¨‹åºçš„å±æ€§ parser.addHelpOption(); // æ·»åŠ å¸®åŠ©å‘½ä»¤ parser.addVersionOption(); // æ·»åŠ ç‰ˆæœ¬é€‰æ‹©å‘½ä»¤ QCommandLineOption CommandExe(&quot;c&quot;, QGuiApplication::translate(&quot;main&quot;,&quot;Take the first argument as a command to execute, &quot; &quot;rather than reading commands from a script or standard input. &quot; &quot;If any furâ€\\ther arguments are given, &quot; &quot;the first one is assigned to $0,&quot; &quot; rather than being used as a positional parameter.&quot;)); parser.addOption(CommandExe); parser.process(a); // æŠŠç”¨æˆ·çš„å‘½ä»¤è¡Œçš„æ”¾å…¥è§£æå®ä¾‹ MainWindow w; w.show(); return a.exec();&#125; è¿è¡Œç»“æœï¼š 123456789101112âœ ./CommandLine -hUsage: ./CommandLine [options]TestCommandLineOptions: -h, --help Displays help on commandline options. --help-all Displays help including Qt specific options. -v, --version Displays version information. -c Take the first argument as a command to execute, rather than reading commands from a script or standard input. If any furâ€ her arguments are given, the first one is assigned to $0, rather than being used as a positional parameter. è·å–å‚æ•°å€¼å¦‚æœéœ€è¦ä»å‘½ä»¤è¡Œè·å–å‚æ•°å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¦ç»™å‚æ•°å€¼ï¼ŒæŒ‡å®šä¸€ä¸ªåå­—ã€‚å¦‚ï¼Œå‚æ•°æ¥æ”¶çš„æ˜¯è·¯å¾„ï¼Œå¯ä»¥setValueName(&quot;path&quot;)ï¼Œå¦‚ï¼Œå‚æ•°æ¥æ”¶çš„æ˜¯ä¸ªæ•°å€¼ï¼Œå¯ä»¥setValueName(&quot;value&quot;)ã€‚ å¦‚æœä¸è®¾ç½®å‚æ•°å€¼åç§°ï¼Œé‚£ä¹ˆå°†æ— æ³•è·å–å…¶å€¼ã€‚","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"Git ä¸åŒäººä¿®æ”¹äº†ä¸åŒçš„æ–‡ä»¶è¯¥å¦‚ä½•å¤„ç†","slug":"Gitä¸åŒäººä¿®æ”¹äº†ä¸åŒçš„æ–‡ä»¶è¯¥å¦‚ä½•å¤„ç†","date":"2021-09-12T15:19:28.000Z","updated":"2022-10-15T03:14:29.218Z","comments":true,"path":"2021/09/12/Gitä¸åŒäººä¿®æ”¹äº†ä¸åŒçš„æ–‡ä»¶è¯¥å¦‚ä½•å¤„ç†/","link":"","permalink":"http://example.com/2021/09/12/Git%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E4%B8%8D%E5%90%8C%E7%9A%84%E6%96%87%E4%BB%B6%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","excerpt":"","text":"éœ€æ±‚åŒä¸€ä¸ªé¡¹ç›®ï¼Œä¸åŒçš„å¼€å‘è€…ä¿®æ”¹äº†ä¸åŒçš„æ–‡ä»¶ï¼Œå¦‚ä½•è§£å†³åŒæ­¥å†²çªã€‚ æ¨¡æ‹Ÿç”¨æˆ·ä¸€ä¿®æ”¹ç¬¬ä¸€ä¸ªç”¨æˆ·æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œ ä»¥ä¸Šå‘½ä»¤å°±æ˜¯æ–°å»ºä¸€ä¸ªåˆ†æ”¯feature/add_git_commands å°†å…¶ä¸è¿œç«¯åˆ†æ”¯origin/feature/add_git_commandsç›¸å…³è”ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ã€‚ ä¿®æ”¹ readme æ–‡ä»¶ï¼Œå¹¶æ¨é€åˆ°è¿œç«¯ã€‚å› ä¸ºæ–°å»ºåˆ†æ”¯æ—¶å·²ç»åšäº†ä¸è¿œç«¯å…³è”ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥git pushã€‚ ç”¨æˆ·äºŒä¿®æ”¹ç¬¬äºŒä¸ªç”¨æˆ·ï¼Œé¦–å…ˆæ‹‰å–è¿œç«¯åˆ†æ”¯ã€‚ git branch -væŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ï¼Œä¿æŒä¸å˜ï¼Œä½†æ˜¯git branch -avæŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼Œå¯ä»¥å‘ç°å¤šäº†ä¸¤ä¸ªè¿œç«¯åˆ†æ”¯ã€‚ æ–°å»ºæœ¬åœ°åˆ†æ”¯ï¼Œä¿æŒä¸è¿œç«¯åˆ†æ”¯åç›¸åŒã€‚ æ­¤æ—¶å†å¯¹ä¸ readme ä¸åŒçš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œæäº¤ï¼Œæ¨é€éƒ½ä¼šæ¯”è¾ƒé¡ºåˆ©ã€‚å› ä¸ºå½“å‰åˆ†æ”¯ä¿æŒfast forwardã€‚ ç”¨æˆ·äºŒç»§ç»­åšå¼€å‘ï¼Œä½†æ˜¯æ²¡å†å¾€è¿œç«¯æ¨é€ä»£ç ã€‚åœ¨æ­¤æœŸé—´ï¼Œç”¨æˆ·ä¸€å¯¹è¿œç«¯ä»£ç è¿›è¡Œäº†æ›´æ–°ã€‚ç”¨æˆ·äºŒæƒ³å†æ¬¡æ¨é€ä»£ç ï¼Œå°†ä¼šæŠ¥é”™ï¼Œæç¤ºå½“å‰æäº¤ä¸å†fast forwardã€‚ è§£å†³æ–¹æ³• git fetchè¿œç«¯åˆ†æ”¯ git mergeåˆå¹¶è¿œç«¯åˆ†æ”¯ å› ä¸ºä¸¤ä¸ªç”¨æˆ·ä¿®æ”¹çš„ä¸åŒæ–‡ä»¶ï¼Œæ‰€ä»¥åˆå¹¶ä¸ä¼šäº§ç”Ÿå†²çªã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"è§£å†³ TypeError [ERR_INVALID_ARG_TYPE]: The data argument must be of type string or an instance of Buffe","slug":"è§£å†³TypeError-ERR-INVALID-ARG-TYPE-The-data-argument-must-be-of-type-string-or-an-instance-of-Buffe","date":"2021-09-10T07:59:34.000Z","updated":"2022-10-15T03:14:29.839Z","comments":true,"path":"2021/09/10/è§£å†³TypeError-ERR-INVALID-ARG-TYPE-The-data-argument-must-be-of-type-string-or-an-instance-of-Buffe/","link":"","permalink":"http://example.com/2021/09/10/%E8%A7%A3%E5%86%B3TypeError-ERR-INVALID-ARG-TYPE-The-data-argument-must-be-of-type-string-or-an-instance-of-Buffe/","excerpt":"","text":"å®‰è£… GitBook æ—¶å‡ºç°è¿™ä¸ªé”™è¯¯ï¼Œå°†nodeç‰ˆæœ¬é™çº§å³å¯ 12345678MINGW64 ~/Desktop/dir1/dir11$ gitbook initwarn: no summary file in this bookinfo: create SUMMARY.mdTypeError [ERR_INVALID_ARG_TYPE]: The &quot;data&quot; argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received an instance ofPromise","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"C è¯­è¨€é¢„å¤„ç†","slug":"Cè¯­è¨€é¢„å¤„ç†","date":"2021-09-09T06:10:40.000Z","updated":"2022-10-15T03:18:34.051Z","comments":true,"path":"2021/09/09/Cè¯­è¨€é¢„å¤„ç†/","link":"","permalink":"http://example.com/2021/09/09/C%E8%AF%AD%E8%A8%80%E9%A2%84%E5%A4%84%E7%90%86/","excerpt":"","text":"ä»€ä¹ˆæ˜¯é¢„å¤„ç†C è¯­è¨€é€šè¿‡é¢„å¤„ç†å™¨æä¾›äº†ä¸€äº›è¯­è¨€åŠŸèƒ½ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œé¢„å¤„ç†å™¨æ˜¯ç¼–è¯‘è¿‡ç¨‹ä¸­å•ç‹¬æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ­¥éª¤ã€‚ä¸¤ä¸ªæœ€å¸¸ç”¨çš„é¢„å¤„ç†å™¨æŒ‡ä»¤æ˜¯ï¼š#include æŒ‡ä»¤ (ç”¨äºåœ¨ç¼–è¯‘æœŸé—´æŠŠæŒ‡å®šæ–‡ä»¶çš„å†…å®¹åŒ…å«è¿›å½“å‰æ–‡ä»¶ä¸­) å’Œ #define æŒ‡ä»¤ (ç”¨ä»»æ„å­—ç¬¦åºåˆ—æ›¿ä»£ä¸€ä¸ªæ ‡è®°)ã€‚ ä¸ºå•¥è¦è¿›è¡Œé¢„å…ˆå¤„ç†å‘¢ï¼Ÿå¦‚æœè¦æ·±å…¥çš„äº†è§£çš„è¯å¯ä»¥å‚è€ƒã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ï¼šé“¾æ¥ã€è£…è½½ä¸åº“ã€‹è¿™æœ¬ä¹¦ã€‚è¿™é‡Œä¸¾ä¸€ä¸ªéå¸¸å¸¸è§çš„ä¾‹å­ï¼Œå‡å¦‚æˆ‘ä»¬ç¼–å†™è·¨å¹³å°çš„ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘ä¸åŒå¹³å°çš„ç³»ç»Ÿåº“æ˜¯ä¸åŒçš„ï¼Œå¦‚æœåªåŒ…å«äº†ä¸€ä¸ªå¹³å°ä¸‹çš„åº“æ–‡ä»¶ï¼Œæ¢ä¸ªå¹³å°ç¼–è¯‘å°±å¯èƒ½å‡ºé”™ã€‚è¿™æ—¶å€™å°±éœ€è¦åœ¨ç¼–è¯‘å‰è¿›è¡Œé¢„å¤„ç†ã€‚ æœ‰é‡è¦çš„é¢„å¤„ç†å™¨æŒ‡ä»¤ï¼š| æŒ‡ä»¤ | æè¿°||:â€”â€”â€”-:|:â€”â€“:|| #define | å®šä¹‰å®|| #include | åŒ…å«ä¸€ä¸ªæºä»£ç æ–‡ä»¶|| #undef | å–æ¶ˆå·²å®šä¹‰çš„å®|| #ifdef | å¦‚æœå®å·²ç»å®šä¹‰ï¼Œåˆ™è¿”å›çœŸ|| #ifndef | å¦‚æœå®æ²¡æœ‰å®šä¹‰ï¼Œåˆ™è¿”å›çœŸ|| #if | å¦‚æœç»™å®šæ¡ä»¶ä¸ºçœŸï¼Œåˆ™ç¼–è¯‘ä¸‹é¢ä»£ç || #else | #if çš„æ›¿ä»£æ–¹æ¡ˆ|| #elif | å¦‚æœå‰é¢çš„ #if ç»™å®šæ¡ä»¶ä¸ä¸ºçœŸï¼Œå½“å‰æ¡ä»¶ä¸ºçœŸï¼Œåˆ™ç¼–è¯‘ä¸‹é¢ä»£ç  || #endif | ç»“æŸä¸€ä¸ª #ifâ€¦â€¦#else æ¡ä»¶ç¼–è¯‘å—|| #error | å½“é‡åˆ°æ ‡å‡†é”™è¯¯æ—¶ï¼Œè¾“å‡ºé”™è¯¯æ¶ˆæ¯|| #pragma | ä½¿ç”¨æ ‡å‡†åŒ–æ–¹æ³•ï¼Œå‘ç¼–è¯‘å™¨å‘å¸ƒç‰¹æ®Šçš„å‘½ä»¤åˆ°ç¼–è¯‘å™¨ä¸­| æ¡ä»¶ç¼–è¯‘#if123456789#if æ•´å‹å¸¸é‡è¡¨è¾¾å¼1 ç¨‹åºæ®µ1#elif æ•´å‹å¸¸é‡è¡¨è¾¾å¼2 ç¨‹åºæ®µ2#elif æ•´å‹å¸¸é‡è¡¨è¾¾å¼3 ç¨‹åºæ®µ3#else ç¨‹åºæ®µ4#endif å®ƒçš„æ„æ€æ˜¯ï¼šå¦‚å¸¸â€œè¡¨è¾¾å¼ 1â€çš„å€¼ä¸ºçœŸï¼ˆé 0ï¼‰ï¼Œå°±å¯¹â€œç¨‹åºæ®µ 1â€è¿›è¡Œç¼–è¯‘ï¼Œå¦åˆ™å°±è®¡ç®—â€œè¡¨è¾¾å¼ 2â€ï¼Œç»“æœä¸ºçœŸçš„è¯å°±å¯¹â€œç¨‹åºæ®µ 2â€è¿›è¡Œç¼–è¯‘ï¼Œä¸ºå‡çš„è¯å°±ç»§ç»­å¾€ä¸‹åŒ¹é…ï¼Œç›´åˆ°é‡åˆ°å€¼ä¸ºçœŸçš„è¡¨è¾¾å¼ï¼Œæˆ–è€…é‡åˆ° #else ã€‚è¿™ä¸€ç‚¹å’Œ if else éå¸¸ç±»ä¼¼ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ #if å‘½ä»¤è¦æ±‚åˆ¤æ–­æ¡ä»¶ä¸ºæ•´å‹å¸¸é‡è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¡¨è¾¾å¼ä¸­ä¸èƒ½åŒ…å«å˜é‡ï¼Œè€Œä¸”ç»“æœå¿…é¡»æ˜¯æ•´æ•°ï¼›è€Œ if åé¢çš„è¡¨è¾¾å¼æ²¡æœ‰é™åˆ¶ï¼Œåªè¦ç¬¦åˆè¯­æ³•å°±è¡Œã€‚è¿™æ˜¯ #if å’Œ if çš„ä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚ 1234567891011121314151617#include &lt;stdio.h&gt;//ä¸åŒçš„å¹³å°ä¸‹å¼•å…¥ä¸åŒçš„å¤´æ–‡ä»¶#if _WIN32 //è¯†åˆ« Windows å¹³å°#include &lt;windows.h&gt;#elif __linux__ //è¯†åˆ« Linux å¹³å°#include &lt;unistd.h&gt;#endifint main() &#123; //ä¸åŒçš„å¹³å°ä¸‹è°ƒç”¨ä¸åŒçš„å‡½æ•° #if _WIN32 //è¯†åˆ« Windows å¹³å° Sleep(5000); #elif __linux__ //è¯†åˆ« Linux å¹³å° sleep(5); #endif puts(&quot;http://c.biancheng.net/&quot;); return 0;&#125; #ifedf12345#ifdef å®å ç¨‹åºæ®µ1#else ç¨‹åºæ®µ2#endif #ifndef12345#ifndef å®å ç¨‹åºæ®µ1 #else ç¨‹åºæ®µ2 #endif ä¸#ifdefç›¸æ¯”ï¼Œä»…ä»…æ˜¯å°† #ifdef æ”¹ä¸ºäº† #ifndefã€‚å®ƒçš„æ„æ€æ˜¯ï¼Œå¦‚æœå½“å‰çš„å®æœªè¢«å®šä¹‰ï¼Œåˆ™å¯¹â€œç¨‹åºæ®µ 1â€è¿›è¡Œç¼–è¯‘ï¼Œå¦åˆ™å¯¹â€œç¨‹åºæ®µ 2â€è¿›è¡Œç¼–è¯‘ï¼Œè¿™ä¸#ifdef çš„åŠŸèƒ½æ­£å¥½ç›¸åã€‚ æ–‡ä»¶åŒ…å«#include#include å«åšæ–‡ä»¶åŒ…å«å‘½ä»¤ï¼Œç”¨æ¥å¼•å…¥å¯¹åº”çš„å¤´æ–‡ä»¶ï¼ˆ.h æ–‡ä»¶ï¼‰ã€‚ #include çš„å¤„ç†è¿‡ç¨‹å¾ˆç®€å•ï¼Œå°±æ˜¯å°†å¤´æ–‡ä»¶çš„å†…å®¹æ’å…¥åˆ°è¯¥å‘½ä»¤æ‰€åœ¨çš„ä½ç½®ï¼Œä»è€ŒæŠŠå¤´æ–‡ä»¶å’Œå½“å‰æºæ–‡ä»¶è¿æ¥æˆä¸€ä¸ªæºæ–‡ä»¶ï¼Œè¿™ä¸å¤åˆ¶ç²˜è´´çš„æ•ˆæœç›¸åŒã€‚ #include çš„ç”¨æ³•æœ‰ä¸¤ç§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12#include &lt;stdHeader.h&gt;#include &quot;myHeader.h&quot; ä½¿ç”¨å°–æ‹¬å· &lt; &gt; å’ŒåŒå¼•å· &quot; &quot; çš„åŒºåˆ«åœ¨äºå¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„ä¸åŒï¼š ä½¿ç”¨å°–æ‹¬å·&lt; &gt;ï¼Œç¼–è¯‘å™¨ä¼šåˆ°ç¯å¢ƒå˜é‡ä¸‹æŸ¥æ‰¾å¤´æ–‡ä»¶ï¼› ä½¿ç”¨åŒå¼•å·&quot; &quot;ï¼Œç¼–è¯‘å™¨é¦–å…ˆåœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾å¤´æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå†åˆ°ç¯å¢ƒå˜é‡ä¸‹æŸ¥æ‰¾ã€‚ æ³¨æ„äº‹é¡¹ï¼š åœ¨å¤´æ–‡ä»¶ä¸­å°½é‡ä¸è¦è¿›è¡Œå‡½æ•°çš„å®šä¹‰ï¼Œåªå¯¹å…¶è¿›è¡Œå£°æ˜ã€‚å¦åˆ™å¦‚æœæœ‰å¤šä¸ªæºæ–‡ä»¶é“¾æ¥æ—¶ä¼šæŠ¥é”™ æŸä¸€ä¸ªå¤´æ–‡ä»¶çš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰åŒ…å«è¯¥æ–‡ä»¶çš„æºæ–‡ä»¶éƒ½éœ€è¦é‡æ–°ç¼–è¯‘ ä¸€ä¸ª#includeå‘½ä»¤æŒ‡å®šä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œå¤šä¸ªå¤´æ–‡ä»¶éœ€è¦å¤šä¸ª#include åŒ…å«å¯ä»¥åµŒå¥— æ–‡ä»¶ 1 åŒ…å«æ–‡ä»¶ 2ï¼Œæ–‡ä»¶ 2 ç”¨åˆ°æ–‡ä»¶ 3ï¼Œåˆ™æ–‡ä»¶ 3 çš„åŒ…å«å‘½ä»¤#include åº”æ”¾åœ¨æ–‡ä»¶ 1 çš„å¤´éƒ¨ç¬¬ä¸€è¡Œï¼› è¢«åŒ…å«æ–‡ä»¶ä¸­çš„é™æ€å…¨å±€å˜é‡ä¸ç”¨åœ¨åŒ…å«æ–‡ä»¶ä¸­å£°æ˜ å®å®šä¹‰what#define å«åšå®å®šä¹‰å‘½ä»¤ï¼Œå®ƒä¹Ÿæ˜¯ C è¯­è¨€é¢„å¤„ç†å‘½ä»¤çš„ä¸€ç§ã€‚æ‰€è°“å®å®šä¹‰ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªæ ‡è¯†ç¬¦æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨åé¢çš„ä»£ç ä¸­å‡ºç°äº†è¯¥æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆå°±å…¨éƒ¨æ›¿æ¢æˆæŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚ 123456#define å®å å­—ç¬¦ä¸² //åŸºæœ¬æ ¼å¼#define N 100 //å°†æ‰€æœ‰Néƒ½æ›¿æ¢æˆæ•´æ•°100#define forever for (;;) //è¯¥è¯­å¥ä¸ºæ— é™å¾ªç¯å®šä¹‰äº†ä¸€ä¸ªæ–°åå­—forever#define max(A, B) ((A)&gt; (B) ? (A) : (B) ) whyå¯¹äºå‡½æ•°ï¼Œå…¶è°ƒç”¨å¿…é¡»è¦å°†ç¨‹åºæ‰§è¡Œçš„é¡ºåºè·³è½¬åˆ°å‡½æ•°æ‰€åœ¨å†…å­˜çš„æŸä¸ªåœ°å€ï¼Œåœ¨å°†å‡½æ•°ç¨‹åºæ‰§è¡Œå®Œæˆåï¼Œå†è·³è½¬å›å»æ‰§è¡Œå‡½æ•°è°ƒç”¨å‰çš„åœ°æ–¹ã€‚è¿™ç§è·³è½¬æ“ä½œè¦æ±‚åœ¨å‡½æ•°æ‰§è¡Œå‰ä¿å­˜ç°åœºå¹¶è®°å½•å½“å‰æ‰§è¡Œåœ°å€ï¼Œå‡½æ•°è°ƒç”¨è¿”å›åè¦æ¢å¤ç°åœºï¼Œå¹¶æŒ‰åŸæ¥ä¿å­˜åœ°å€ç»§ç»­æ‰§è¡Œã€‚å› æ­¤ï¼Œå‡½æ•°è°ƒç”¨ä¼šæœ‰ä¸€å®šçš„æ—¶é—´å’Œç©ºé—´æ–¹é¢çš„å¼€é”€ï¼Œå¿…å°†å½±å“ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚ å¯¹äºå®ï¼Œå®ƒåªæ˜¯åœ¨é¢„å¤„ç†çš„åœ°æ–¹æŠŠä»£ç å±•å¼€ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´å’Œæ—¶é—´æ–¹é¢çš„å¼€é”€ï¼Œå› æ­¤è°ƒç”¨å®æ¯”è°ƒç”¨å‡½æ•°æ›´æœ‰æ•ˆç‡ã€‚ ä½†æ˜¯ï¼Œå®ä¹Ÿæœ‰å¾ˆå¤šçš„é—®é¢˜å’Œç¼ºé™·ï¼š åœ¨ C è¯­è¨€ä¸­ï¼Œå®å®¹æ˜“å‡ºç°ä¸€äº›è¾¹ç•Œæ€§çš„é—®é¢˜ï¼Œå®¹æ˜“äº§ç”Ÿæ­§ä¹‰ã€‚(ä¼˜å…ˆçº§çš„é—®é¢˜ï¼Œèƒ½åŠ æ‹¬å·éƒ½åŠ æ‹¬å·) åœ¨ C++è¯­è¨€ä¸­ï¼Œå®ä¸å¯ä»¥è°ƒç”¨ C++ç±»ä¸­çš„ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜ã€‚ Tips èƒ½ç”¨æ‹¬å·çš„åœ°æ–¹éƒ½ç”¨æ‹¬å·ï¼Œä¸è¦å·æ‡’çœç•¥ï¼Œä»¥å…æ­§ä¹‰ï¼Œç‰¹åˆ«æ˜¯äºå¸¦å‚å®å®šä¹‰ä¸ä»…è¦åœ¨å‚æ•°ä¸¤ä¾§åŠ æ‹¬å·ï¼Œè¿˜åº”è¯¥åœ¨æ•´ä¸ªå­—ç¬¦ä¸²å¤–åŠ æ‹¬å· å®å®šä¹‰ä¸æ˜¯è¯´æ˜æˆ–è¯­å¥ï¼Œåœ¨è¡Œæœ«ä¸å¿…åŠ åˆ†å·ï¼Œå¦‚åŠ ä¸Šåˆ†å·åˆ™è¿åˆ†å·ä¹Ÿä¸€èµ·æ›¿æ¢ å®å®šä¹‰å¿…é¡»å†™åœ¨å‡½æ•°ä¹‹å¤–ï¼Œå…¶ä½œç”¨åŸŸä¸ºå®å®šä¹‰å‘½ä»¤èµ·åˆ°æºç¨‹åºç»“æŸã€‚å¦‚è¦ç»ˆæ­¢å…¶ä½œç”¨åŸŸå¯ä½¿ç”¨#undefå‘½ä»¤ ä»£ç ä¸­çš„å®åå¦‚æœè¢«å¼•å·åŒ…å›´ï¼Œé‚£ä¹ˆé¢„å¤„ç†ç¨‹åºä¸å¯¹å…¶ä½œå®ä»£æ›¿ å®å®šä¹‰å…è®¸åµŒå¥—ï¼Œåœ¨å®å®šä¹‰çš„å­—ç¬¦ä¸²ä¸­å¯ä»¥ä½¿ç”¨å·²ç»å®šä¹‰çš„å®åï¼Œåœ¨å®å±•å¼€æ—¶ç”±é¢„å¤„ç†ç¨‹åºå±‚å±‚ä»£æ¢ ä¹ æƒ¯ä¸Šå®åç”¨å¤§å†™å­—æ¯è¡¨ç¤ºï¼Œä»¥ä¾¿äºä¸å˜é‡åŒºåˆ« å¯ç”¨å®å®šä¹‰è¡¨ç¤ºæ•°æ®ç±»å‹ï¼Œä½¿ä¹¦å†™æ–¹ä¾¿ å¸¦å‚æ•°çš„å®å’Œå‡½æ•°å¾ˆç›¸ä¼¼ï¼Œä½†æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼šå®å±•å¼€ä»…ä»…æ˜¯å­—ç¬¦ä¸²çš„æ›¿æ¢ï¼Œä¸ä¼šå¯¹è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ï¼›å®åœ¨ç¼–è¯‘ä¹‹å‰å°±è¢«å¤„ç†æ‰äº†ï¼Œå®ƒæ²¡æœ‰æœºä¼šå‚ä¸ç¼–è¯‘ï¼Œä¹Ÿä¸ä¼šå ç”¨å†…å­˜ã€‚è€Œå‡½æ•°æ˜¯ä¸€æ®µå¯ä»¥é‡å¤ä½¿ç”¨çš„ä»£ç ï¼Œä¼šè¢«ç¼–è¯‘ï¼Œä¼šç»™å®ƒåˆ†é…å†…å­˜ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°ï¼Œå°±æ˜¯æ‰§è¡Œè¿™å—å†…å­˜ä¸­çš„ä»£ç ã€‚ å†…è”å‡½æ•°ä»ä¸Šæ–‡å¯çŸ¥ï¼Œå¯ä»¥çœ‹åˆ°å®æœ‰ä¸€äº›éš¾ä»¥é¿å…çš„é—®é¢˜ï¼Œå¯¹äºä¸èƒ½è®¿é—® C++ç±»ä¸­ç§æœ‰æˆ–è€…å—ä¿æŠ¤çš„æˆå‘˜ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ whatå…³é”®å­— inline å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œä»»ä½•åœ°æ–¹åªè¦è°ƒç”¨å†…è”å‡½æ•°ï¼Œå°±ç›´æ¥æŠŠè¯¥å‡½æ•°çš„æœºå™¨ç æ’å…¥åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹ã€‚è¿™æ ·ç¨‹åºæ‰§è¡Œæ›´æœ‰æ•ˆç‡ï¼Œå°±å¥½åƒå°†å†…è”å‡½æ•°ä¸­çš„è¯­å¥ç›´æ¥æ’å…¥åˆ°äº†æºä»£ç æ–‡ä»¶ä¸­éœ€è¦è°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹ä¸€æ ·ã€‚ whyå†…è”å‡½æ•°æ˜¯ä»£ç è¢«æ’å…¥åˆ°è°ƒç”¨è€…ä»£ç å¤„çš„å‡½æ•°ã€‚å¦‚åŒ #define å®ï¼Œå†…è”å‡½æ•°é€šè¿‡é¿å…è¢«è°ƒç”¨çš„å¼€é”€æ¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå°¤å…¶æ˜¯å®ƒèƒ½å¤Ÿé€šè¿‡è°ƒç”¨ï¼ˆè¿‡ç¨‹åŒ–é›†æˆï¼‰è¢«ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚ å†…è”å‡½æ•°å’Œå®å¾ˆç±»ä¼¼ï¼Œè€ŒåŒºåˆ«åœ¨äºï¼Œå®æ˜¯ç”±é¢„å¤„ç†å™¨å¯¹å®è¿›è¡Œæ›¿ä»£ï¼Œè€Œå†…è”å‡½æ•°æ˜¯é€šè¿‡ç¼–è¯‘å™¨æ§åˆ¶æ¥å®ç°çš„ã€‚è€Œä¸”å†…è”å‡½æ•°æ˜¯çœŸæ­£çš„å‡½æ•°ï¼Œåªæ˜¯åœ¨éœ€è¦ç”¨åˆ°çš„æ—¶å€™ï¼Œå†…è”å‡½æ•°åƒå®ä¸€æ ·çš„å±•å¼€ï¼Œæ‰€ä»¥å–æ¶ˆäº†å‡½æ•°çš„å‚æ•°å‹æ ˆï¼Œå‡å°‘äº†è°ƒç”¨çš„å¼€é”€ã€‚ä½ å¯ä»¥åƒè°ƒç”¨å‡½æ•°ä¸€æ ·æ¥è°ƒç”¨å†…è”å‡½æ•°ï¼Œè€Œä¸å¿…æ‹…å¿ƒä¼šäº§ç”Ÿäºå¤„ç†å®çš„ä¸€äº›é—®é¢˜ã€‚ Howå¯¹äºå†…è”å‡½æ•°ï¼Œå…¶å·¥ä½œåŸç†æ˜¯ï¼š å¯¹äºä»»ä½•å†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨åœ¨ç¬¦å·è¡¨é‡Œæ”¾å…¥å‡½æ•°çš„å£°æ˜ï¼ˆåŒ…æ‹¬åå­—ã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ï¼‰ã€‚å¦‚æœç¼–è¯‘å™¨æ²¡æœ‰å‘ç°å†…è”å‡½æ•°å­˜åœ¨é”™è¯¯ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°çš„ä»£ç ä¹Ÿè¢«æ”¾å…¥ç¬¦å·è¡¨é‡Œã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå†…è”å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨é¦–å…ˆæ£€æŸ¥è°ƒç”¨æ˜¯å¦æ­£ç¡®ï¼ˆè¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œæˆ–è€…è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œå½“ç„¶å¯¹æ‰€æœ‰çš„å‡½æ•°éƒ½ä¸€æ ·ï¼‰ã€‚å¦‚æœæ­£ç¡®ï¼Œå†…è”å‡½æ•°çš„ä»£ç å°±ä¼šç›´æ¥æ›¿æ¢å‡½æ•°è°ƒç”¨ï¼Œäºæ˜¯çœå»äº†å‡½æ•°è°ƒç”¨çš„å¼€é”€ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¸é¢„å¤„ç†æœ‰æ˜¾è‘—çš„ä¸åŒï¼Œå› ä¸ºé¢„å¤„ç†å™¨ä¸èƒ½è¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œæˆ–è€…è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ã€‚å‡å¦‚å†…è”å‡½æ•°æ˜¯æˆå‘˜å‡½æ•°ï¼Œå¯¹è±¡çš„åœ°å€ï¼ˆthisï¼‰ä¼šè¢«æ”¾åœ¨åˆé€‚çš„åœ°æ–¹ï¼Œè¿™ä¹Ÿæ˜¯é¢„å¤„ç†å™¨åŠä¸åˆ°çš„ã€‚ Tips å½“ä½ å®šä¹‰ä¸€ä¸ªå†…è”å‡½æ•°æ—¶ï¼Œåœ¨å‡½æ•°å®šä¹‰å‰åŠ ä¸Š inline å…³é”®å­—ï¼Œå¹¶ä¸”å°†å®šä¹‰æ”¾å…¥å¤´æ–‡ä»¶ã€‚ å†…è”å‡½æ•°å¿…é¡»æ˜¯å’Œå‡½æ•°ä½“å£°æ˜åœ¨ä¸€èµ·æ‰æœ‰æ•ˆ å†…è”å‡½æ•°ä¸å®œè¿‡å¤§ï¼Œæ¯”å¦‚å¾ªç¯ä½“ï¼Œé€’å½’ä½“å°±ä¸é€‚åˆå†…è”ã€‚å¦‚æœè¿‡å¤§ï¼Œç¼–è¯‘å™¨ä¼šæ”¾å¼ƒå†…è”ï¼Œé‡‡ç”¨æ™®é€šæ–¹å¼è°ƒç”¨å‡½æ•°ã€‚ ç›¸å…³å‚è€ƒC é¢„å¤„ç†å™¨C è¯­è¨€é¢„å¤„ç†å‘½ä»¤æ˜¯ä»€ä¹ˆï¼ŸC è¯­è¨€ä¸­å®ä¸å†…è”å‡½æ•°è§£æC è¯­è¨€å†…è”å‡½æ•°å†…è”å‡½æ•°","categories":[],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"}]},{"title":"è§£å†³ expected 'char * const*' but argument is of type 'char **'","slug":"è§£å†³expected-char-const-but-argument-is-of-type-char","date":"2021-09-08T11:07:27.000Z","updated":"2022-10-15T03:14:29.799Z","comments":true,"path":"2021/09/08/è§£å†³expected-char-const-but-argument-is-of-type-char/","link":"","permalink":"http://example.com/2021/09/08/%E8%A7%A3%E5%86%B3expected-char-const-but-argument-is-of-type-char/","excerpt":"","text":"åœ¨ä½¿ç”¨execç³»åˆ—å‡½æ•°æ—¶ï¼Œexecleï¼Œexecvï¼Œexecvpä¸‰ä¸ªå‡½æ•°ï¼Œéƒ½å¯ä»¥ä½¿ç”¨char *arg[]ä¼ å…¥å¯åŠ¨å‚æ•°ã€‚ä»¥ä¸‹é¢çš„ç¨‹åºä¸ºä¾‹ï¼Œ 12345678910111213#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;int main(void)&#123; int ret; char *argv[] = &#123;&quot;ls&quot;,&quot;-l&quot;,NULL&#125;; ret = execvp(&quot;ls&quot;,argv); if(ret == -1) perror(&quot;execl error&quot;); return 0;&#125; ç¼–è¯‘æ—¶å°±ä¼šå‡ºç°ä¸€ä¸‹ï¼Œè­¦å‘Šï¼Œ 1expected &#x27;char * const*&#x27; but argument is of type &#x27;const char **&#x27; å› ä¸ºé¡¹ç›®ä¸­ä¸å…è®¸è­¦å‘Šäº§ç”Ÿï¼Œæ‰€ä»¥ç¼–è¯‘é€‰é¡¹æ˜¯-Werrorï¼Œæ‰€æœ‰è­¦å‘Šéƒ½ä¼šè¢«å‡çº§æˆé”™è¯¯ã€‚ç¼–è¯‘æ—¶å°±ä¼šäº§ç”Ÿå¦‚ä¸‹æç¤ºï¼Œ 1ccl : all warnings being treated as errors å¦‚æœæ˜¯å¹³æ—¶ç»ƒä¹ ï¼Œæ”¹ä¸€ä¸‹ç¼–è¯‘é€‰é¡¹ï¼ŒæŠŠè¿™ä¸ªè­¦å‘Šå¿½ç•¥å°±è¡Œï¼Œä½†æ˜¯ç°åœ¨åªèƒ½è§£å†³ã€‚ å‡ºç°è¿™ä¸ªé—®é¢˜å°±æ˜¯å› ä¸ºå®šä¹‰æ•°ç»„æ—¶char *argv[]ç±»å‹æ˜¯char **ã€‚ä½†æ˜¯execvp()å‡½æ•°ç­¾åæ˜¯execvp(const char *file, char *const argv[]);ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹æ˜¯char * const *ã€‚ æœ¬ä»¥ä¸ºç›´æ¥å°†å˜é‡å®šä¹‰æ›´æ”¹æˆchar * const argv[]å°±è¡Œäº†ï¼Œä½†æ˜¯å®ƒç­‰ä»·äºconst char **ï¼Œæ‰€ä»¥ä»ç„¶ä¸èƒ½å’Œå‡½æ•°ç­¾ååŒ¹é…ã€‚ å®åœ¨æ²¡åŠæ³•åªèƒ½æ”¹æˆå¦‚ä¸‹ï¼š 1234567891011121314151617#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;int main(void)&#123; printf(&quot;entering main process---\\n&quot;); int ret; char str1[] = &quot;ls&quot;; char str2[] = &quot;-l&quot;; char * const argv[] = &#123;str1, str2, NULL&#125;; ret = execvp(&quot;ls&quot;,argv); if(ret == -1) perror(&quot;execl error&quot;); printf(&quot;exiting main process ----\\n&quot;); return 0;&#125; æˆ–è€…åœ¨å°†å½¢å‚argvè¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚ 123456789101112131415#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;int main(void)&#123; printf(&quot;entering main process---\\n&quot;); int ret; char const *argv[] = &#123;&quot;ls&quot;, &quot;-l&quot;, NULL&#125;; ret = execvp(&quot;ls&quot;,(char * const *)argv); if(ret == -1) perror(&quot;execl error&quot;); printf(&quot;exiting main process ----\\n&quot;); return 0;&#125;","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"VSCode ä¸­è°ƒè¯•å¸¦ Makefile æ–‡ä»¶çš„é¡¹ç›®","slug":"VSCodeä¸­è°ƒè¯•å¸¦Makefileæ–‡ä»¶çš„é¡¹ç›®","date":"2021-09-06T07:41:56.000Z","updated":"2022-10-15T02:59:01.683Z","comments":true,"path":"2021/09/06/VSCodeä¸­è°ƒè¯•å¸¦Makefileæ–‡ä»¶çš„é¡¹ç›®/","link":"","permalink":"http://example.com/2021/09/06/VSCode%E4%B8%AD%E8%B0%83%E8%AF%95%E5%B8%A6Makefile%E6%96%87%E4%BB%B6%E7%9A%84%E9%A1%B9%E7%9B%AE/","excerpt":"","text":"åœ¨è°ƒè¯• QEMU æ—¶ï¼Œè‡ªå·±éœ€è¦ä¿®æ”¹æºæ–‡ä»¶ï¼Œä½†æ˜¯æ¯æ¬¡ä¿®æ”¹éƒ½éœ€è¦åœ¨å‘½ä»¤è¡Œé‡æ–°makeç¼–è¯‘ä¸€éï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæƒ³åˆ°ä¹‹å‰åˆšåˆšé…ç½®è¿‡tasks.jsonæ–‡ä»¶ï¼Œå¯ä»¥æŠŠå‘½ä»¤è¡Œä»»åŠ¡é…ç½®åˆ°æ–‡ä»¶é‡Œï¼Œmakeå‘½ä»¤ä¸ä¹Ÿä¸€æ ·å¯ä»¥åŠ å…¥å—ï¼Ÿä¿®æ”¹tasks.jsonæ–‡ä»¶å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132&#123; &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ &#123; //ä»»åŠ¡çš„åå­—æ–¹ä¾¿æ‰§è¡Œ &quot;label&quot;: &quot;make qemu&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;make&quot;, &quot;args&quot;:[ //8 çº¿ç¨‹ç¼–è¯‘ &quot;-j8&quot;, ], &quot;options&quot;: &#123; //åˆ‡æ¢åˆ° build æ–‡ä»¶å¤¹ä¸‹ &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;/build&quot; &#125;, &#125;, &#123; // å¯åŠ¨ qemu ä¾›è°ƒè¯•å™¨è¿æ¥ &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;Run Qemu Server(RISCV)&quot;, //åœ¨æ‰§è¡Œè¿™ä¸ªä»»åŠ¡å‰ï¼Œå…ˆæ‰§è¡Œ make qemu ä»»åŠ¡ã€ //è¿™æ ·å°±å¯ä»¥åœ¨æ‰§è¡Œè°ƒè¯•æ—¶ï¼Œè‡ªåŠ¨å…ˆç¼–è¯‘ä¸€é &quot;dependsOn&quot;: &quot;make qemu&quot;, &quot;command&quot;: &quot;qemu-system-riscv64&quot;, &quot;args&quot;: [ &quot;-g&quot;, &quot;$&#123;workspaceFolder&#125;/debug/$&#123;fileBasenameNoExtension&#125;&quot; ], &#125;, ]&#125;","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"è§£å†³ gcc-multilib : ä¾èµ–ï¼šgcc-4.8-multilib (>= 4.8.2-5~) ä½†æ˜¯å®ƒå°†ä¸ä¼šè¢«å®‰è£…","slug":"è§£å†³gcc-multilib-ä¾èµ–-gcc-4-8-multilib-4-8-2-5-ä½†æ˜¯å®ƒå°†ä¸ä¼šè¢«å®‰è£…","date":"2021-09-03T02:44:44.000Z","updated":"2022-10-15T03:14:29.804Z","comments":true,"path":"2021/09/03/è§£å†³gcc-multilib-ä¾èµ–-gcc-4-8-multilib-4-8-2-5-ä½†æ˜¯å®ƒå°†ä¸ä¼šè¢«å®‰è£…/","link":"","permalink":"http://example.com/2021/09/03/%E8%A7%A3%E5%86%B3gcc-multilib-%E4%BE%9D%E8%B5%96-gcc-4-8-multilib-4-8-2-5-%E4%BD%86%E6%98%AF%E5%AE%83%E5%B0%86%E4%B8%8D%E4%BC%9A%E8%A2%AB%E5%AE%89%E8%A3%85/","excerpt":"","text":"é—®é¢˜è¿™æ˜¯ä¸€ç±»é—®é¢˜ï¼Œä¸ä»…é™äºå®‰è£… gccï¼Œè¿™ç±»é—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºï¼ŒUbuntu å·²å®‰è£…çš„è½¯ä»¶åŒ…ç‰ˆæœ¬é«˜ï¼Œè€Œæ‰€å®‰è£…è½¯ä»¶çš„ä¾èµ–åŒ…ç‰ˆæœ¬ä½ï¼Œè¿™æ ·åœ¨å®‰è£…é«˜ç‰ˆè½¯ä»¶æ—¶ï¼Œå·²æœ‰çš„è½¯ä»¶åŒ…ä¾èµ–ä½ è¦å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œä½ æŠŠè½¯ä»¶åŒ…å‡çº§äº†ï¼Œå¯èƒ½å°±ä¼šç ´åè¿™ä¸ªä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥apt-getä¸è®©ä½ å®‰è£…ã€‚ è¿™æ—¶å°±è¦è¯·åˆ°å¤§æ€å™¨-aptitudeï¼Œå®ƒä¸ apt-getä¸€æ ·ï¼Œæ˜¯ Debian åŠå…¶è¡ç”Ÿç³»ç»Ÿä¸­åŠŸèƒ½æå…¶å¼ºå¤§çš„åŒ…ç®¡ç†å·¥å…·ã€‚ä¸ apt-get ä¸åŒçš„æ˜¯ï¼Œaptitudeåœ¨å¤„ç†ä¾èµ–é—®é¢˜ä¸Šæ›´ä½³ä¸€äº›ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œaptitudeåœ¨åˆ é™¤ä¸€ä¸ªåŒ…æ—¶ï¼Œä¼šåŒæ—¶åˆ é™¤æœ¬èº«æ‰€ä¾èµ–çš„åŒ…ã€‚è¿™æ ·ï¼Œç³»ç»Ÿä¸­ä¸ä¼šæ®‹ç•™æ— ç”¨çš„åŒ…ï¼Œæ•´ä¸ªç³»ç»Ÿæ›´ä¸ºå¹²å‡€ã€‚ æ–¹æ³•12$sudo apt-get install aptitude //å®‰è£…aptitudeåŒ…ç®¡ç†å™¨$sudo aptitude install gcc-multilib //ç”¨æ–°çš„åŒ…ç®¡ç†å™¨å®‰è£…ä½ è¦å®‰è£…çš„è½¯ä»¶ å®‰è£…gcc-multilibæ—¶ä¼šæŠŠæ‰€æœ‰ä¾èµ–åŒ…ä¸€å¹¶å®‰è£…ï¼Œæ­¤æ—¶ä¼šè®©ä½ åŒæ„ï¼Œé€‰æ‹©nå°±è¡Œã€‚ æ¥ä¸‹æ¥å°±ä¼šè§£å†³å·²ç»å®‰è£…çš„åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»–ä¼šé™çº§æˆ–å‡çº§ä¸€äº›è½¯ä»¶åŒ…æ¥åŒ¹é…å½“å‰å®‰è£…çš„è½¯ä»¶ç‰ˆæœ¬ï¼Œæ­¤æ—¶é€‰æ‹©yã€‚ å®Œæˆä»¥ä¸Šæ“ä½œï¼Œå†æ¬¡æ­£å¸¸å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…å³å¯æˆåŠŸå®‰è£…ã€‚ å¦‚æœæ— æ³•æ­£å¸¸å®‰è£…ï¼Œé‡å¤ä»¥ä¸Šæ“ä½œï¼Œæ¯æ¬¡éƒ½é€‰æ‹©nã€‚","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"è§£å†³ fatal error: bits/libc-header-start.hï¼šno such file","slug":"è§£å†³fatal-error-bits-libc-header-start-hï¼šno-such-file","date":"2021-09-03T01:26:34.000Z","updated":"2022-10-15T03:14:29.803Z","comments":true,"path":"2021/09/03/è§£å†³fatal-error-bits-libc-header-start-hï¼šno-such-file/","link":"","permalink":"http://example.com/2021/09/03/%E8%A7%A3%E5%86%B3fatal-error-bits-libc-header-start-h%EF%BC%9Ano-such-file/","excerpt":"","text":"ä¿ç•™ç°åœºæƒ³è¦åˆ†åˆ«ç¼–è¯‘ 32 ä½å’Œ 64 ä½çš„ç¨‹åºæ—¶ï¼Œgcc å‡ºç°äº†é”™è¯¯ï¼Œ 12345In file included from func_call.c:1:/usr/include/stdio.h:27:10: fatal error: bits/libc-header-start.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½• 27 | #include &lt;bits/libc-header-start.h&gt; | ^~~~~~~~~~~~~~~~~~~~~~~~~~compilation terminated. é—®é¢˜è§£å†³é—®é¢˜åŸå› çŒœæµ‹æ˜¯é»˜è®¤ gcc åªæä¾›å½“å‰æœºå™¨çš„ç‰ˆæœ¬ï¼Œè§£å†³å¦‚ä¸‹ 1apt install gcc-multilib","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"},{"name":"æ±‡ç¼–è¯­è¨€","slug":"æ±‡ç¼–è¯­è¨€","permalink":"http://example.com/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"},{"name":"GCC","slug":"GCC","permalink":"http://example.com/tags/GCC/"}]},{"title":"QEMU æºç åˆ†æ-è™šæ‹Ÿ CPU åˆ›å»º","slug":"QEMUæºç åˆ†æ-è™šæ‹ŸCPUåˆ›å»º","date":"2021-09-01T10:22:14.000Z","updated":"2022-10-15T03:14:29.445Z","comments":true,"path":"2021/09/01/QEMUæºç åˆ†æ-è™šæ‹ŸCPUåˆ›å»º/","link":"","permalink":"http://example.com/2021/09/01/QEMU%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E8%99%9A%E6%8B%9FCPU%E5%88%9B%E5%BB%BA/","excerpt":"","text":"æµç¨‹å›¾å…ˆå¼€ä¸ªå¤´å§ï¼ŒæŠŠåˆ›å»ºæµç¨‹ç¨å¾®æ‹ä¸€ä¸‹ï¼Œæ‰¾åˆ°åˆ›å»ºè™šæ‹Ÿ CPU çš„æ¨¡å—ã€‚è‡³äºä¸­é—´çš„æµç¨‹è¿˜æ²¡æœ‰è¯¦ç»†åˆ†æï¼Œä¸‡äº‹å¼€å¤´éš¾ï¼Œå…ˆä¸Šæ‰‹å†è¯´å§ã€‚ qemu_add_optsè§£æ qemu çš„å‘½ä»¤è¡Œqemu_initå‡½æ•°ä¸­ä¸‹é¢è¿™ä¸€é•¿ä¸²å†…å®¹ï¼Œå°±æ˜¯åœ¨è§£æå‘½ä»¤è¡Œçš„å‚æ•°ã€‚ 1234567891011121314151617qemu add opts (&amp;qemu drive opts);qemu add drive opts(&amp;qemu Legacy drive opts);qemu add drive opts (&amp;qemu common drive opts);qemu add drive opts (&amp;qemu drive opts);qemu add drive opts (sbdry runtime opts);qemu add opts (qemu chardev opts);qemu add opts (&amp;qemu device opts);qemu add opts (&amp;qemu netdev opts);qemu add opts (&amp;qemu nic opts);qemu add opts (sqemu net optsqemu add opts (&amp;qemu rtc opts)qemu add opts (&amp;qemu global_opts);qemu add opts (&amp;qemu mon opts);qemu add opts (sqemu trace opts);... ä¸ºä»€ä¹ˆæœ‰è¿™ä¹ˆå¤šçš„ optså‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œå®é™…è¿è¡Œä¸­åˆ›å»ºçš„kvmå‚æ•°ä¼šå¤æ‚Nå€ã€‚è¿™é‡Œæˆ‘ä»¬è´´ä¸€ä¸ªå¼€æºäº‘å¹³å°è½¯ä»¶ OpenStack åˆ›å»ºå‡ºæ¥çš„KVMçš„å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 12345678910111213141516qemu-system-x86_64-enable-kvm-name instance-00000024-machine pc-i440fx-trusty,accel=kvm,usb=off-cpu SandyBridge,+erms,+smep,+fsgsbase,+pdpe1gb,+rdrand,+f16c,+osxsave,+dca,+pcid,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vme-m 2048-smp 1,sockets=1,cores=1,threads=1......-rtc base=utc,driftfix=slew-drive file=/var/lib/nova/instances/1f8e6f7e-5a70-4780-89c1-464dc0e7f308/disk,if=none,id=drive-virtio-disk0,format=qcow2,cache=none-device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x4,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1-netdev tap,fd=32,id=hostnet0,vhost=on,vhostfd=37-device virtio-net-pci,netdev=hostnet0,id=net0,mac=fa:16:3e:d1:2d:99,bus=pci.0,addr=0x3-chardev file,id=charserial0,path=/var/lib/nova/instances/1f8e6f7e-5a70-4780-89c1-464dc0e7f308/console.log-vnc 0.0.0.0:12-device cirrus-vga,id=video0,bus=pci.0,addr=0x2 -enable-kvmï¼šè¡¨ç¤ºå¯ç”¨ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ã€‚ -name instance-00000024ï¼šè¡¨ç¤ºè™šæ‹Ÿæœºçš„åç§°ã€‚ -machine pc-i440fx-trusty,accel=kvm,usb=offï¼šmachine æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å°±æ˜¯è®¡ç®—æœºä½“ç³»ç»“æ„ã€‚ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ä½“ç³»ç»“æ„çš„è¯ï¼Œå¯ä»¥è®¢é˜…æå®¢æ—¶é—´çš„å¦ä¸€ä¸ªä¸“æ ã€Šæ·±å…¥æµ…å‡ºè®¡ç®—æœºç»„æˆåŸç†ã€‹ã€‚qemu ä¼šæ¨¡æ‹Ÿå¤šç§ä½“ç³»ç»“æ„ï¼Œå¸¸ç”¨çš„æœ‰æ™®é€š PC æœºï¼Œä¹Ÿå³ x86 çš„ 32 ä½æˆ–è€… 64 ä½çš„ä½“ç³»ç»“æ„ã€Mac ç”µè„‘ PowerPC çš„ä½“ç³»ç»“æ„ã€Sun çš„ä½“ç³»ç»“æ„ã€MIPS çš„ä½“ç³»ç»“æ„ï¼Œç²¾ç®€æŒ‡ä»¤é›†ã€‚å¦‚æœä½¿ç”¨ KVM hardware-assisted virtualizationï¼Œä¹Ÿå³ BIOS ä¸­ VD-T æ˜¯æ‰“å¼€çš„ï¼Œåˆ™å‚æ•°ä¸­ accel=kvmã€‚å¦‚æœä¸ä½¿ç”¨ hardware-assisted virtualizationï¼Œç”¨çš„æ˜¯çº¯æ¨¡æ‹Ÿï¼Œåˆ™æœ‰å‚æ•° accel = tcgï¼Œ-no-kvmã€‚ -cpu SandyBridge,+erms,+smep,+fsgsbase,+pdpe1gb,+rdrand,+f16c,+osxsave,+dca,+pcid,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vmeï¼šè¡¨ç¤ºè®¾ç½® CPUï¼ŒSandyBridge æ˜¯ Intel å¤„ç†å™¨ï¼Œåé¢çš„åŠ å·éƒ½æ˜¯æ·»åŠ çš„ CPU çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šæ˜¾ç¤ºåœ¨ /proc/cpuinfo é‡Œé¢ã€‚ -m 2048ï¼šè¡¨ç¤ºå†…å­˜ã€‚ -smp 1,sockets=1,cores=1,threads=1ï¼šSMP æˆ‘ä»¬è§£æè¿‡ï¼Œå«å¯¹ç§°å¤šå¤„ç†å™¨ï¼Œå’ŒNUMA å¯¹åº”ã€‚qemu ä»¿çœŸäº†ä¸€ä¸ªå…·æœ‰ 1 ä¸ª vcpuï¼Œä¸€ä¸ª socketï¼Œä¸€ä¸ª coreï¼Œä¸€ä¸ª threads çš„å¤„ç†å™¨ã€‚socketã€coreã€threads æ˜¯ä»€ä¹ˆæ¦‚å¿µå‘¢ï¼Ÿsocket å°±æ˜¯ä¸»æ¿ä¸Šæ’ CPU çš„æ§½çš„æ•°ç›®ï¼Œä¹Ÿå³å¸¸è¯´çš„â€œè·¯â€ï¼Œcore å°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¯´çš„â€œæ ¸â€ï¼Œå³åŒæ ¸ã€4 æ ¸ç­‰ã€‚thread å°±æ˜¯æ¯ä¸ª core çš„ç¡¬ä»¶çº¿ç¨‹æ•°ï¼Œå³è¶…çº¿ç¨‹ã€‚ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼ŒæŸä¸ªæœåŠ¡å™¨æ˜¯ï¼š2 è·¯ 4 æ ¸è¶…çº¿ç¨‹ï¼ˆä¸€èˆ¬é»˜è®¤ä¸º 2 ä¸ªçº¿ç¨‹ï¼‰ï¼Œé€šè¿‡ cat /proc/cpuinfoï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ 242=16 ä¸ªprocessorï¼Œå¾ˆå¤šäººä¹Ÿä¹ æƒ¯æˆä¸º 16 æ ¸äº†ã€‚ -rtc base=utc,driftfix=slewï¼šè¡¨ç¤ºç³»ç»Ÿæ—¶é—´ç”±å‚æ•° -rtc æŒ‡å®šã€‚ -device cirrus-vga,id=video0,bus=pci.0,addr=0x2ï¼šè¡¨ç¤ºæ˜¾ç¤ºå™¨ç”¨å‚æ•° -vga è®¾ç½®ï¼Œé»˜è®¤ä¸º cirrusï¼Œå®ƒæ¨¡æ‹Ÿäº† CL-GD5446PCI VGA cardã€‚ æœ‰å…³ç½‘å¡ï¼Œä½¿ç”¨ -net å‚æ•°å’Œ -deviceã€‚ ä» HOST è§’åº¦ï¼š-netdev tap,fd=32,id=hostnet0,vhost=on,vhostfd=37ã€‚ ä» GUEST è§’åº¦ï¼š-device virtio-net-pci,netdev=hostnet0,id=net0,mac=fa:16:3e:d1:2d:99,bus=pci.0,addr=0x3ã€‚ æœ‰å…³ç¡¬ç›˜ï¼Œä½¿ç”¨ -hda -hdbï¼Œæˆ–è€…ä½¿ç”¨ -drive å’Œ -deviceã€‚ ä» HOST è§’åº¦ï¼š-drive file=/var/lib/nova/instances/1f8e6f7e-5a70-4780-89c1-464dc0e7f308/disk,if=none,id=drive-virtio-disk0,format=qcow2,cache=none ä» GUEST è§’åº¦ï¼š-device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x4,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -vnc 0.0.0.0:12ï¼šè®¾ç½® VNCã€‚ module_call_initåˆå§‹åŒ–æ‰€æœ‰æ¨¡å—1234int main()--&gt; qemu_init()--&gt; qemu_init_subsystems()--&gt; module_call_init() å½“è™šæ‹ŸæœºçœŸçš„è¦ä½¿ç”¨ç‰©ç†èµ„æºçš„æ—¶å€™ï¼Œå¯¹ä¸‹é¢çš„ç‰©ç†æœºä¸Šçš„èµ„æºè¦è¿›è¡Œè¯·æ±‚ï¼Œæ‰€ä»¥å®ƒçš„å·¥ä½œæ¨¡å¼æœ‰ç‚¹å„¿ç±»ä¼¼æ“ä½œç³»ç»Ÿå¯¹æ¥é©±åŠ¨ã€‚é©±åŠ¨è¦ç¬¦åˆä¸€å®šçš„æ ¼å¼ï¼Œæ‰èƒ½ç®—æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªæ¨¡å—ã€‚åŒç†ï¼Œqemu ä¸ºäº†æ¨¡æ‹Ÿå„ç§å„æ ·çš„è®¾å¤‡ï¼Œä¹Ÿéœ€è¦ç®¡ç†å„ç§å„æ ·çš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—ä¹Ÿéœ€è¦ç¬¦åˆä¸€å®šçš„æ ¼å¼ã€‚ å®šä¹‰ä¸€ä¸ª qemu æ¨¡å—ä¼šè°ƒç”¨ type_initã€‚ä¾‹å¦‚ï¼Œkvm çš„æ¨¡å—è¦åœ¨ accel/kvm/kvm-all.c æ–‡ä»¶é‡Œé¢å®ç°ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œæœ‰ä¸€è¡Œä¸‹é¢çš„ä»£ç ï¼š 1234567891011121314static const TypeInfo kvm_accel_type = &#123; .name = TYPE_KVM_ACCEL, .parent = TYPE_ACCEL, .instance_init = kvm_accel_instance_init, .class_init = kvm_accel_class_init, .instance_size = sizeof(KVMState),&#125;;static void kvm_type_init(void)&#123; type_register_static(&amp;kvm_accel_type);&#125;type_init(kvm_type_init); æ‰¾åˆ°type_initçš„å®šä¹‰ 1#define type_init(function) module_init(function, MODULE_INIT_QOM) ä»ä»£ç é‡Œé¢çš„å®šä¹‰æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œtype_init åé¢çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨ type_init å°±ç›¸å½“äºè°ƒç”¨ module_initï¼Œåœ¨è¿™é‡Œå‡½æ•°å°±æ˜¯ kvm_type_initï¼Œç±»å‹å°±æ˜¯ MODULE_INIT_QOMã€‚ å†æŸ¥çœ‹ä¸€ä¸‹module_initçš„å®šä¹‰ 123456//include/qemu/module.h#define module_init(function, type) \\static void __attribute__((constructor)) do_qemu_init_ ## function(void) \\&#123; \\ register_module_init(function, type); \\&#125; module_init æœ€ç»ˆè¦è°ƒç”¨ register_module_initã€‚å±äº MODULE_INIT_QOM è¿™ç§ç±»å‹çš„ï¼Œæœ‰ä¸€ä¸ª Module åˆ—è¡¨ ModuleTypeListï¼Œåˆ—è¡¨é‡Œé¢æ˜¯ä¸€é¡¹ä¸€é¡¹çš„ ModuleEntryã€‚KVM å°±æ˜¯å…¶ä¸­ä¸€é¡¹ï¼Œå¹¶ä¸”ä¼šåˆå§‹åŒ–æ¯ä¸€é¡¹çš„ init å‡½æ•°ä¸ºå‚æ•°è¡¨ç¤ºçš„å‡½æ•° fnï¼Œä¹Ÿå³ KVM è¿™ä¸ª module çš„ init å‡½æ•°å°±æ˜¯ kvm_type_initã€‚ å½“ç„¶ï¼ŒMODULE_INIT_QOM è¿™ç§ç±»å‹ä¼šæœ‰å¾ˆå¤šå¾ˆå¤šçš„ moduleï¼Œä»åé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰è°ƒç”¨ type_init çš„åœ°æ–¹éƒ½æ³¨å†Œäº†ä¸€ä¸ª MODULE_INIT_QOM ç±»å‹çš„ Moduleã€‚ äº†è§£äº† Module çš„æ³¨å†Œæœºåˆ¶ï¼Œæˆ‘ä»¬ç»§ç»­å›åˆ° qemu_init_subsystems å‡½æ•°ä¸­ module_call_init çš„è°ƒç”¨ã€‚ 123456789101112131415void qemu_init_subsystems(void)&#123; Error *err; os_set_line_buffering(); module_call_init(MODULE_INIT_TRACE); qemu_init_cpu_list(); qemu_init_cpu_loop(); qemu_mutex_lock_iothread(); atexit(qemu_run_exit_notifiers); module_call_init(MODULE_INIT_QOM); module_call_init(MODULE_INIT_MIGRATION);...&#125; 12345678910// utils/module.cvoid module_call_init(module_init_type type)&#123; ModuleTypeList *l; ModuleEntry *e; l = find_type(type); QTAILQ_FOREACH(e, l, node) &#123; e-&gt;init(); &#125;&#125; åœ¨ module_call_init ä¸­ï¼Œæˆ‘ä»¬ä¼šæ‰¾åˆ° MODULE_INIT_QOM è¿™ç§ç±»å‹å¯¹åº”çš„ ModuleTypeListï¼Œæ‰¾å‡ºåˆ—è¡¨ä¸­æ‰€æœ‰çš„ ModuleEntryï¼Œç„¶åè°ƒç”¨æ¯ä¸ª ModuleEntry çš„ init å‡½æ•°ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ module_call_init è°ƒç”¨çš„è¿™ä¸€æ­¥ï¼Œæ‰€æœ‰ Module çš„ init å‡½æ•°éƒ½å·²ç»è¢«è°ƒç”¨è¿‡äº†ã€‚ åé¢æˆ‘ä»¬ä¼šçœ‹åˆ°å¾ˆå¤šçš„ Moduleï¼Œå½“æˆ‘ä»¬åé¢å†æ¬¡é‡åˆ°æ—¶ï¼Œéœ€è¦æ„è¯†åˆ°ï¼Œå®ƒçš„ init å‡½æ•°åœ¨è¿™é‡Œä¹Ÿè¢«è°ƒç”¨è¿‡äº†ã€‚è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä»¥å¯¹äº kvm è¿™ä¸ª module ä¸ºä¾‹å­ï¼Œçœ‹çœ‹å®ƒçš„ init å‡½æ•°éƒ½åšäº†å“ªäº›äº‹æƒ…ã€‚æˆ‘ä»¬ä¼šå‘ç°ï¼Œå…¶å®å®ƒè°ƒç”¨çš„æ˜¯ kvm_type_initã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566static void kvm_type_init(void)&#123; type_register_static(&amp;kvm_accel_type);&#125;TypeImpl *type_register_static(const TypeInfo *info)&#123; return type_register(info);&#125;TypeImpl *type_register(const TypeInfo *info)&#123; assert(info-&gt;parent); return type_register_internal(info);&#125;static TypeImpl *type_register_internal(const TypeInfo *info)&#123; TypeImpl *ti; ti = type_new(info); type_table_add(ti); return ti;&#125;static TypeImpl *type_new(const TypeInfo *info)&#123; TypeImpl *ti = g_malloc0(sizeof(*ti)); int i; if (type_table_lookup(info-&gt;name) != NULL) &#123; &#125; ti-&gt;name = g_strdup(info-&gt;name); ti-&gt;parent = g_strdup(info-&gt;parent); ti-&gt;class_size = info-&gt;class_size; ti-&gt;instance_size = info-&gt;instance_size; ti-&gt;class_init = info-&gt;class_init; ti-&gt;class_base_init = info-&gt;class_base_init; ti-&gt;class_data = info-&gt;class_data; ti-&gt;instance_init = info-&gt;instance_init; ti-&gt;instance_post_init = info-&gt;instance_post_init; ti-&gt;instance_finalize = info-&gt;instance_finalize; ti-&gt;abstract = info-&gt;abstract; for (i = 0; info-&gt;interfaces &amp;&amp; info-&gt;interfaces[i].type; i++) &#123; ti-&gt;interfaces[i].typename = g_strdup(info-&gt;interfaces[i].type); &#125; ti-&gt;num_interfaces = i; return ti;&#125;static void type_table_add(TypeImpl *ti)&#123; assert(!enumerating_types); g_hash_table_insert(type_table_get(), (void *)ti-&gt;name, ti);&#125;static GHashTable *type_table_get(void)&#123; static GHashTable *type_table; if (type_table == NULL) &#123; type_table = g_hash_table_new(g_str_hash, g_str_equal); &#125; return type_table;&#125;static const TypeInfo kvm_accel_type = &#123; .name = TYPE_KVM_ACCEL, .parent = TYPE_ACCEL, .class_init = kvm_accel_class_init, .instance_size = sizeof(KVMState),&#125;; è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼šè™šçº¿è¡¨ç¤ºè¿”å› æ¯ä¸€ä¸ª Module æ—¢ç„¶è¦æ¨¡æ‹ŸæŸç§è®¾å¤‡ï¼Œé‚£åº”è¯¥å®šä¹‰ä¸€ç§ç±»å‹ TypeImpl æ¥è¡¨ç¤ºè¿™äº›è®¾å¤‡ï¼Œè¿™å…¶å®æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€è·¯ï¼Œåªä¸è¿‡è¿™é‡Œç”¨çš„æ˜¯çº¯ C è¯­è¨€çš„å®ç°ï¼Œæ‰€ä»¥éœ€è¦å˜ç›¸å®ç°ä¸€ä¸‹ç±»å’Œå¯¹è±¡ã€‚ kvm_type_init ä¼šæ³¨å†Œ kvm_accel_typeï¼Œå®šä¹‰ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™æ ·åŠ¨æ€å®šä¹‰äº†ä¸€ä¸ªç±»ã€‚è¿™ä¸ªç±»çš„åå­—æ˜¯ TYPE_KVM_ACCELï¼Œè¿™ä¸ªç±»æœ‰çˆ¶ç±» TYPE_ACCELï¼Œè¿™ä¸ªç±»çš„åˆå§‹åŒ–åº”è¯¥è°ƒç”¨å‡½æ•° kvm_accel_class_initã€‚å¦‚æœç”¨è¿™ä¸ªç±»å£°æ˜ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å¤§å°åº”è¯¥æ˜¯ instance_sizeã€‚ åœ¨ type_register_internal ä¸­ï¼Œæˆ‘ä»¬ä¼šæ ¹æ® kvm_accel_type è¿™ä¸ª TypeInfoï¼Œåˆ›å»ºä¸€ä¸ªTypeImpl æ¥è¡¨ç¤ºè¿™ä¸ªæ–°æ³¨å†Œçš„ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒTypeImpl æ‰æ˜¯æˆ‘ä»¬æƒ³è¦å£°æ˜çš„é‚£ä¸ª classã€‚åœ¨ qemu é‡Œé¢ï¼Œæœ‰ä¸€ä¸ªå…¨å±€çš„å“ˆå¸Œè¡¨ type_tableï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰å®šä¹‰çš„ç±»ã€‚åœ¨ type_new é‡Œé¢ï¼Œæˆ‘ä»¬å…ˆä»å…¨å±€è¡¨é‡Œé¢æ ¹æ®åå­—type_table_lookupæŸ¥æ‰¾æ‰¾è¿™ä¸ªç±»ã€‚å¦‚æœæ‰¾åˆ°ï¼Œè¯´æ˜è¿™ä¸ªç±»æ›¾ç»è¢«æ³¨å†Œè¿‡ï¼Œå°±æŠ¥é”™ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ–°çš„ç±»ï¼Œåˆ™å°† TypeInfo é‡Œé¢ä¿¡æ¯å¡«åˆ° TypeImpl é‡Œé¢ã€‚type_table_add ä¼šå°†è¿™ä¸ªç±»æ³¨å†Œåˆ°å…¨å±€çš„è¡¨é‡Œé¢ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ³¨æ„ï¼Œclass_init è¿˜æ²¡æœ‰è¢«è°ƒç”¨ï¼Œä¹Ÿå³è¿™ä¸ªç±»ç°åœ¨è¿˜å¤„äºçº¸é¢çš„çŠ¶æ€ã€‚ è¿™ç‚¹æ›´åŠ åƒ Java çš„åå°„æœºåˆ¶äº†ã€‚åœ¨ Java é‡Œé¢ï¼Œå¯¹äºä¸€ä¸ªç±»ï¼Œé¦–å…ˆæˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™è¦å†™ä¸€ä¸ª class xxx çš„å®šä¹‰ï¼Œç¼–è¯‘å¥½å°±æ”¾åœ¨.class æ–‡ä»¶ä¸­ï¼Œè¿™ä¹Ÿæ˜¯å‡ºäºçº¸é¢çš„çŠ¶æ€ã€‚ç„¶åï¼ŒJava ä¼šæœ‰ä¸€ä¸ª Class å¯¹è±¡ï¼Œç”¨äºè¯»å–å’Œè¡¨ç¤ºè¿™ä¸ªçº¸é¢ä¸Šçš„ class xxxï¼Œå¯ä»¥ç”ŸæˆçœŸæ­£çš„å¯¹è±¡ã€‚ ç›¸åŒçš„è¿‡ç¨‹åœ¨åé¢çš„ä»£ç ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œclass_init ä¼šç”ŸæˆXXXClassï¼Œå°±ç›¸å½“äº Java é‡Œé¢çš„ Classå¯¹è±¡ï¼ŒTypeImpl è¿˜ä¼šæœ‰ä¸€ä¸ª instance_init å‡½æ•°ï¼Œç›¸å½“äºæ„é€ å‡½æ•°ï¼Œç”¨äºæ ¹æ® XXXClass ç”Ÿæˆ Objectï¼Œè¿™å°±ç›¸å½“äº Java åå°„é‡Œé¢æœ€ç»ˆåˆ›å»ºçš„å¯¹è±¡ã€‚å’Œæ„é€ å‡½æ•°å¯¹åº”çš„è¿˜æœ‰ instance_finalizeï¼Œç›¸å½“äºææ„å‡½æ•°ã€‚ è¿™ä¸€å¥—åå°„æœºåˆ¶æ”¾åœ¨ qom æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå…¨ç§° QEMU Object Modelï¼Œä¹Ÿå³ç”¨ C å®ç°äº†ä¸€å¥—é¢å‘å¯¹è±¡çš„åå°„æœºåˆ¶ã€‚ åˆå§‹åŒ– machine 12//vl.cqemu_create_machine (select_machine()); åœ¨åˆ›å»º machine ä¹‹å‰ï¼Œå…ˆè¦é€šè¿‡select_machineç¡®å®šä¸€ä¸ªmachineã€‚select_machineåˆæ˜¯æ€ä¹ˆç¡®å®šçš„å‘¢ï¼Œè¿™å°±å’Œæˆ‘ä»¬å‘½ä»¤è¡Œçš„è¾“å…¥æœ‰å…³ï¼Œæ¯”å¦‚æˆ‘ä»¬-m spikeï¼Œé‚£ä¹ˆè¿™é‡Œå°±ä¼šé€‰æ‹©spikeä½œä¸ºmachineã€‚å®ƒçš„å®šä¹‰åœ¨hw/riscv/spike.cä¸­ã€‚ åœ¨æºç æœ€åæœ‰è¿™ä¹ˆä¸€å¥ï¼Œä¼šå’Œæˆ‘ä»¬ä¸Šé¢è§£æçš„type_init æ˜¯ä¸€æ ·çš„ï¼Œåœ¨å…¨å±€çš„è¡¨é‡Œé¢æ³¨å†Œäº†ä¸€ä¸ªå…¨å±€çš„åå­—æ˜¯spikeçš„çº¸é¢ä¸Šçš„ classï¼Œä¹Ÿå³ TypeImplã€‚ 1type_init(spike_machine_init_reqister_types) ç°åœ¨å…¨å±€è¡¨ä¸­æœ‰è¿™ä¸ªçº¸é¢ä¸Šçš„ class äº†ã€‚æˆ‘ä»¬å›åˆ° select_machineã€‚ åœ¨ select_machine ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ç”Ÿæˆ MachineClassã€‚ä¸€ç§æ–¹å¼æ˜¯ find_default_machineï¼Œæ‰¾ä¸€ä¸ªé»˜è®¤çš„ï¼›å¦ä¸€ç§æ–¹å¼æ˜¯ machine_parseï¼Œé€šè¿‡è§£æå‚æ•°ç”Ÿæˆ MachineClassã€‚æ— è®ºå“ªç§æ–¹å¼ï¼Œéƒ½ä¼šè°ƒç”¨ object_class_get_list è·å¾—ä¸€ä¸ª MachineClass çš„åˆ—è¡¨ï¼Œç„¶ååœ¨é‡Œé¢æ‰¾ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566static MachineClass *select_machine(void)&#123; GSList *machines = object_class_get_list(TYPE_MACHINE, false); MachineClass *machine_class = find_default_machine(machines); const char *optarg; QemuOpts *opts; Location loc; loc_push_none(&amp;loc); opts = qemu_get_machine_opts(); qemu_opts_loc_restore(opts); optarg = qemu_opt_get(opts, &quot;type&quot;); if (optarg) &#123; machine_class = machine_parse(optarg, machines); &#125; if (!machine_class) &#123; error_report(&quot;No machine specified, and there is no default&quot;); error_printf(&quot;Use -machine help to list supported machines\\n&quot;); exit(1); &#125; loc_pop(&amp;loc); g_slist_free(machines); return machine_class;&#125;static MachineClass *find_default_machine(GSList *machines)&#123; GSList *el; MachineClass *default_machineclass = NULL; for (el = machines; el; el = el-&gt;next) &#123; MachineClass *mc = el-&gt;data; if (mc-&gt;is_default) &#123; assert(default_machineclass == NULL &amp;&amp; &quot;Multiple default machines&quot;); default_machineclass = mc; &#125; &#125; return default_machineclass;&#125;static MachineClass *machine_parse(const char *name, GSList *machines)&#123; MachineClass *mc; GSList *el; if (is_help_option(name)) &#123; printf(&quot;Supported machines are:\\n&quot;); machines = g_slist_sort(machines, machine_class_cmp); for (el = machines; el; el = el-&gt;next) &#123; MachineClass *mc = el-&gt;data; if (mc-&gt;alias) &#123; printf(&quot;%-20s %s (alias of %s)\\n&quot;, mc-&gt;alias, mc-&gt;desc, mc-&gt;name); &#125; printf(&quot;%-20s %s%s%s\\n&quot;, mc-&gt;name, mc-&gt;desc, mc-&gt;is_default ? &quot; (default)&quot; : &quot;&quot;, mc-&gt;deprecation_reason ? &quot; (deprecated)&quot; : &quot;&quot;); &#125; exit(0); &#125; mc = find_machine(name, machines); if (!mc) &#123; error_report(&quot;unsupported machine type&quot;); error_printf(&quot;Use -machine help to list supported machines\\n&quot;); exit(1); &#125; return mc;&#125; object_class_get_list å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718GSList *object_class_get_list(const char *implements_type,bool include_abstract)&#123; GSList *list = NULL; object_class_foreach(object_class_get_list_tramp, implements_type, include_abstract, &amp;list); return list;&#125;void object_class_foreach(void (*fn)(ObjectClass *klass, void *opaque), const char *implements_type, bool include_abstract, void *opaque)&#123; OCFData data = &#123; fn, implements_type, include_abstract, opaque &#125;; enumerating_types = true; g_hash_table_foreach(type_table_get(), object_class_foreach_tramp, &amp;data); enumerating_types = false;&#125; åœ¨å…¨å±€è¡¨ type_table_get() ä¸­ï¼Œå¯¹äºæ¯ä¸€é¡¹ TypeImplï¼Œæˆ‘ä»¬éƒ½æ‰§è¡Œ object_class_foreach_trampã€‚ 1234567891011121314151617static void object_class_foreach_tramp(gpointer key, gpointer value, gpointer opaque)&#123; OCFData *data = opaque; TypeImpl *type = value; ObjectClass *k; type_initialize(type); k = type-&gt;class; if (!data-&gt;include_abstract &amp;&amp; type-&gt;abstract) &#123; return; &#125; if (data-&gt;implements_type &amp;&amp; !object_class_dynamic_cast(k, data-&gt;implements_type)) &#123; return; &#125; data-&gt;fn(k, data-&gt;opaque);&#125; åœ¨ object_class_foreach_tramp ä¸­ï¼Œä¼šè°ƒç”¨å°† type_initializeï¼Œè¿™é‡Œé¢ä¼šè°ƒç”¨ class_init å°†çº¸é¢ä¸Šçš„ class ä¹Ÿå³ TypeImpl å˜ä¸º ObjectClassï¼ŒObjectClass æ˜¯æ‰€æœ‰Class ç±»çš„ç¥–å…ˆï¼ŒMachineClass æ˜¯å®ƒçš„å­ç±»ã€‚ å› ä¸ºåœ¨ machine çš„å‘½ä»¤è¡Œé‡Œé¢ï¼Œæˆ‘ä»¬æŒ‡å®šäº†åå­—ä¸ºspikeï¼Œå°±è‚¯å®šèƒ½å¤Ÿæ‰¾åˆ°æˆ‘ä»¬æ³¨å†Œè¿‡äº†çš„ TypeImplï¼Œå¹¶è°ƒç”¨å®ƒçš„ class_init å‡½æ•°ã€‚ æ‰€ä»¥ï¼Œå½“ select_machine æ‰§è¡Œå®Œæ¯•åï¼Œå°±æœ‰ä¸€ä¸ª MachineClass äº†ã€‚ æ¥ç€ï¼Œæˆ‘ä»¬å›åˆ° qemu_create_machine ä¸­çš„object_new_with_classã€‚è¿™å°±å¾ˆå¥½ç†è§£äº†ï¼ŒMachineClass æ˜¯ä¸€ä¸ª Class ç±»ï¼Œæ¥ä¸‹æ¥åº”è¯¥é€šè¿‡å®ƒç”Ÿæˆä¸€ä¸ª Instanceï¼Œä¹Ÿå³å¯¹è±¡ï¼Œè¿™å°±æ˜¯ object_new_with_class çš„ä½œç”¨ã€‚ object_new_with_class ä¸­ï¼ŒTypeImpl çš„ instance_init ä¼šè¢«è°ƒç”¨ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚current_machine å°±æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œå®ƒçš„ç±»å‹æ˜¯MachineStateã€‚ 1234567891011121314Object *object_new_with_class(ObjectClass *klass)&#123; return object_new_with_type(klass-&gt;type);&#125;static Object *object_new_with_type(Type type)&#123; Object *obj; type_initialize(type); obj = g_malloc(type-&gt;instance_size); object_initialize_with_type(obj, type-&gt;instance_size, type); obj-&gt;free = g_free; return obj;&#125; è‡³æ­¤ï¼Œç»•äº†è¿™ä¹ˆå¤§ä¸€åœˆï¼Œæœ‰å…³ä½“ç³»ç»“æ„çš„å¯¹è±¡æ‰åˆ›å»ºå®Œæ¯•ï¼Œæ¥ä¸‹æ¥å¾ˆå¤šçš„è®¾å¤‡çš„åˆå§‹åŒ–ï¼ŒåŒ…æ‹¬ CPU å’Œå†…å­˜çš„åˆå§‹åŒ–ï¼Œéƒ½æ˜¯å›´ç»•ç€ä½“ç³»ç»“æ„çš„å¯¹è±¡æ¥çš„ï¼Œåé¢æˆ‘ä»¬ä¼šå¸¸å¸¸çœ‹åˆ°current_machineã€‚ å‚è€ƒQemu CPU è™šæ‹ŸåŒ– - äººç”Ÿä¸€ä¸–ï¼Œè‰æœ¨ä¸€ç§‹ã€‚ - åšå®¢å›­ã€åŸåˆ›ã€‘Linux è™šæ‹ŸåŒ– KVM-Qemu åˆ†æï¼ˆå››ï¼‰ä¹‹ CPU è™šæ‹ŸåŒ–ï¼ˆ2ï¼‰ - LoyenWang - åšå®¢å›­","categories":[{"name":"QEMU æºç åˆ†æ","slug":"QEMU-æºç åˆ†æ","permalink":"http://example.com/categories/QEMU-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"Qt æ–‡ä»¶ç³»ç»Ÿ","slug":"Qtæ–‡ä»¶ç³»ç»Ÿ","date":"2021-08-31T12:00:06.000Z","updated":"2022-10-15T03:14:29.476Z","comments":true,"path":"2021/08/31/Qtæ–‡ä»¶ç³»ç»Ÿ/","link":"","permalink":"http://example.com/2021/08/31/Qt%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"Qt é€šè¿‡QIODeviceæä¾›äº†å¯¹ I/O è®¾å¤‡çš„æŠ½è±¡ï¼Œè¿™äº›è®¾å¤‡å…·æœ‰è¯»å†™å­—èŠ‚å—çš„èƒ½åŠ›ã€‚ä¸‹é¢æ˜¯ I/O è®¾å¤‡çš„ç±»å›¾ï¼š å›¾ä¸­æ‰€æ¶‰åŠçš„ç±»åŠå…¶ç”¨é€”ç®€è¦è¯´æ˜å¦‚ä¸‹ï¼š QIODeviceï¼šæ‰€æœ‰I/Oè®¾å¤‡ç±»çš„çˆ¶ç±»ï¼Œæä¾›äº†å­—èŠ‚å—è¯»å†™çš„é€šç”¨æ“ä½œä»¥åŠåŸºæœ¬æ¥å£ï¼›QFlieï¼šè®¿é—®æœ¬åœ°æ–‡ä»¶æˆ–è€…åµŒå…¥èµ„æºï¼›QTemporaryFileï¼šåˆ›å»ºå’Œè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼›QBufferï¼šè¯»å†™QByteArrayï¼›QProcessï¼šè¿è¡Œå¤–éƒ¨ç¨‹åºï¼Œå¤„ç†è¿›ç¨‹é—´é€šè®¯ï¼›QAbstractSocketï¼šæ‰€æœ‰å¥—æ¥å­—ç±»çš„çˆ¶ç±»ï¼›QTcpSocketï¼šTCPåè®®ç½‘ç»œæ•°æ®ä¼ è¾“ï¼›QUdpSocketï¼šä¼ è¾“ UDP æŠ¥æ–‡ï¼›QSslSocketï¼šä½¿ç”¨ SSL/TLS ä¼ è¾“æ•°æ®ï¼›QFileDeviceï¼šQt5 æ–°å¢åŠ çš„ç±»ï¼Œæä¾›äº†æœ‰å…³æ–‡ä»¶æ“ä½œçš„é€šç”¨å®ç°ã€‚ QFile åŠå…¶ç›¸å…³ç±»æˆ‘ä»¬é€šå¸¸ä¼šå°†æ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ä¼ ç»™QFileçš„æ„é€ å‡½æ•°ã€‚ä¸è¿‡ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå¥½å¯¹è±¡æœ€åï¼Œä½¿ç”¨setFileName()æ¥ä¿®æ”¹ã€‚QFileéœ€è¦ä½¿ç”¨/ä½œä¸ºæ–‡ä»¶åˆ†éš”ç¬¦ï¼Œä¸è¿‡ï¼Œå®ƒä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢æˆæ“ä½œç³»ç»Ÿæ‰€éœ€è¦çš„å½¢å¼ã€‚ä¾‹å¦‚C:/windowsè¿™æ ·çš„è·¯å¾„åœ¨ Windows å¹³å°ä¸‹åŒæ ·æ˜¯å¯ä»¥çš„ã€‚ QFileä¸»è¦æä¾›äº†æœ‰å…³æ–‡ä»¶çš„å„ç§æ“ä½œï¼Œæ¯”å¦‚æ‰“å¼€æ–‡ä»¶ã€å…³é—­æ–‡ä»¶ã€åˆ·æ–°æ–‡ä»¶ç­‰ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨QDataStreamæˆ–QTextStreamç±»æ¥è¯»å†™æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨QIODeviceç±»æä¾›çš„read()ã€readLine()ã€readAll()ä»¥åŠwrite()è¿™æ ·çš„å‡½æ•°ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ‰å…³æ–‡ä»¶æœ¬èº«çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶åã€æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„åå­—ç­‰ï¼Œåˆ™æ˜¯é€šè¿‡QFileInfoè·å–ï¼Œè€Œä¸æ˜¯è‡ªå·±åˆ†ææ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²ã€‚ åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨QFileåˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ã€‚è¿™ä¸ªæ–‡ä»¶åå­—æ˜¯ test.txtã€‚åªè¦å°†è¿™ä¸ªæ–‡ä»¶æ”¾åœ¨åŒæ‰§è¡Œè·¯å¾„ä¸€è‡´çš„ç›®å½•ä¸‹å³å¯ã€‚å¯ä»¥ä½¿ç”¨QDir::currentPath()æ¥è·å¾—åº”ç”¨ç¨‹åºæ‰§è¡Œæ—¶çš„å½“å‰è·¯å¾„ã€‚åªè¦å°†è¿™ä¸ªæ–‡ä»¶æ”¾åœ¨ä¸å½“å‰è·¯å¾„ä¸€è‡´çš„ç›®å½•ä¸‹å³å¯ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨open()å‡½æ•°æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰“å¼€å½¢å¼æ˜¯åªè¯»æ–¹å¼ï¼Œæ–‡æœ¬æ ¼å¼ã€‚è¿™ä¸ªç±»ä¼¼äºfopen()çš„ r è¿™æ ·çš„å‚æ•°ã€‚open()å‡½æ•°è¿”å›ä¸€ä¸ª bool ç±»å‹ï¼Œå¦‚æœæ‰“å¼€å¤±è´¥ï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°è¾“å‡ºä¸€æ®µæç¤ºç„¶åç¨‹åºé€€å‡ºã€‚å¦åˆ™ï¼Œæˆ‘ä»¬åˆ©ç”¨ while å¾ªç¯ï¼Œå°†æ¯ä¸€è¡Œè¯»åˆ°çš„å†…å®¹è¾“å‡ºã€‚ 123456789101112131415161718192021222324252627282930313233343536373839#include &lt;QWidget&gt;#include &lt;QApplication&gt;#include &lt;QDebug&gt;#include &lt;QFile&gt;#include &lt;QFileInfo&gt;#include &lt;QMainWindow&gt;int main(int argc, char *argv[])&#123; QApplication app(argc, argv); QFile file(&quot;test.txt&quot;); if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) &#123; qDebug() &lt;&lt; &quot;Open file failed.&quot;; return -1; &#125; else &#123; while (!file.atEnd()) &#123; qDebug() &lt;&lt; file.readLine(); &#125; &#125; QFileInfo info(file); qDebug() &lt;&lt; info.isDir(); //false qDebug() &lt;&lt; info.isExecutable(); //false qDebug() &lt;&lt; info.baseName(); //test qDebug() &lt;&lt; info.completeBaseName(); //test.txt qDebug() &lt;&lt; info.suffix(); //txt qDebug() &lt;&lt; info.completeSuffix(); //txt QFileInfo fi(&quot;/tmp/archive.tar.gz&quot;); QString base = fi.baseName(); // base = &quot;archive&quot; QString cbase = fi.completeBaseName(); // base = &quot;archive.tar&quot; QString ext = fi.suffix(); // ext = &quot;gz&quot; QString ext = fi.completeSuffix(); // ext = &quot;tar.gz&quot; return app.exec();&#125; äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†å­¦ä¹ QDataStreamçš„ä½¿ç”¨ä»¥åŠä¸€äº›æŠ€å·§ã€‚ QDataStreamæä¾›äº†åŸºäºQIODeviceçš„äºŒè¿›åˆ¶æ•°æ®çš„åºåˆ—åŒ–ã€‚æ•°æ®æµæ˜¯ä¸€ç§äºŒè¿›åˆ¶æµï¼Œè¿™ç§æµå®Œå…¨ä¸ä¾èµ–äºåº•å±‚æ“ä½œç³»ç»Ÿã€CPU æˆ–è€…å­—èŠ‚é¡ºåºï¼ˆå¤§ç«¯æˆ–å°ç«¯ï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨å®‰è£…äº† Windows å¹³å°çš„ PC ä¸Šé¢å†™å…¥çš„ä¸€ä¸ªæ•°æ®æµï¼Œå¯ä»¥ä¸ç»è¿‡ä»»ä½•å¤„ç†ï¼Œç›´æ¥æ‹¿åˆ°è¿è¡Œäº† Solaris çš„ SPARC æœºå™¨ä¸Šè¯»å–ã€‚ç”±äºæ•°æ®æµå°±æ˜¯äºŒè¿›åˆ¶æµï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è¯»å†™æ²¡æœ‰ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰ã€‚ QDataStreamæ—¢èƒ½å¤Ÿå­˜å– C++ åŸºæœ¬ç±»å‹ï¼Œå¦‚ intã€charã€short ç­‰ï¼Œä¹Ÿå¯ä»¥å­˜å–å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚è‡ªå®šä¹‰çš„ç±»ã€‚å®é™…ä¸Šï¼ŒQDataStreamå¯¹äºç±»çš„å­˜å‚¨ï¼Œæ˜¯å°†å¤æ‚çš„ç±»åˆ†å‰²ä¸ºå¾ˆå¤šåŸºæœ¬å•å…ƒå®ç°çš„ã€‚ ç»“åˆQIODeviceï¼ŒQDataStreamå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æ–‡ä»¶ã€ç½‘ç»œå¥—æ¥å­—ç­‰è¿›è¡Œè¯»å†™æ“ä½œã€‚ 12345QFile file(&quot;file.dat&quot;);file.open(QIODevice::WriteOnly);QDataStream out(&amp;file);out &lt;&lt; QString(&quot;the answer is&quot;);out &lt;&lt; (qint32)42; åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ‰“å¼€ä¸€ä¸ªåä¸º file.dat çš„æ–‡ä»¶ï¼ˆæ³¨æ„ï¼Œæˆ‘ä»¬ä¸ºç®€å•èµ·è§ï¼Œå¹¶æ²¡æœ‰æ£€æŸ¥æ–‡ä»¶æ‰“å¼€æ˜¯å¦æˆåŠŸï¼Œè¿™åœ¨æ­£å¼ç¨‹åºä¸­æ˜¯ä¸å…è®¸çš„ï¼‰ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†åˆšåˆšåˆ›å»ºçš„fileå¯¹è±¡çš„æŒ‡é’ˆä¼ é€’ç»™ä¸€ä¸ªQDataStreamå®ä¾‹outã€‚ç±»ä¼¼äºstd::coutæ ‡å‡†è¾“å‡ºæµï¼ŒQDataStreamä¹Ÿé‡è½½äº†è¾“å‡ºé‡å®šå‘&lt;&lt;è¿ç®—ç¬¦ã€‚åé¢çš„ä»£ç å°±å¾ˆç®€å•äº†ï¼šå°†â€œthe answer isâ€å’Œæ•°å­—42è¾“å‡ºåˆ°æ•°æ®æµï¼ˆå¦‚æœä½ ä¸æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œè¿™å¯æ˜¯å®‡å®™ç»ˆæé—®é¢˜çš„ç­”æ¡ˆï¼Œè¯·è‡ªè¡Œæœç´¢ã€Šé“¶æ²³ç³»æ¼«æ¸¸æŒ‡å—ã€‹ï¼‰ã€‚ç”±äºæˆ‘ä»¬çš„ out å¯¹è±¡å»ºç«‹åœ¨fileä¹‹ä¸Šï¼Œå› æ­¤ç›¸å½“äºå°†å®‡å®™ç»ˆæé—®é¢˜çš„ç­”æ¡ˆå†™å…¥fileã€‚ éœ€è¦æŒ‡å‡ºä¸€ç‚¹ï¼šæœ€å¥½ä½¿ç”¨Qtæ•´å‹æ¥è¿›è¡Œè¯»å†™ï¼Œæ¯”å¦‚ç¨‹åºä¸­çš„qint32ã€‚è¿™ä¿è¯äº†åœ¨ä»»æ„å¹³å°å’Œä»»æ„ç¼–è¯‘å™¨éƒ½èƒ½å¤Ÿæœ‰ç›¸åŒçš„è¡Œä¸ºã€‚ æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹ Qt æ˜¯å¦‚ä½•å­˜å‚¨æ•°æ®çš„ã€‚ä¾‹å¦‚char *å­—ç¬¦ä¸²ï¼Œåœ¨å­˜å‚¨æ—¶ï¼Œä¼šé¦–å…ˆå­˜å‚¨è¯¥å­—ç¬¦ä¸²åŒ…æ‹¬\\0ç»“æŸç¬¦çš„é•¿åº¦ï¼ˆ32ä½æ•´å‹ï¼‰ï¼Œç„¶åæ˜¯å­—ç¬¦ä¸²çš„å†…å®¹ä»¥åŠç»“æŸç¬¦\\0ã€‚åœ¨è¯»å–æ—¶ï¼Œå…ˆä»¥32ä½æ•´å‹è¯»å‡ºæ•´ä¸ªçš„é•¿åº¦ï¼Œç„¶åæŒ‰ç…§è¿™ä¸ªé•¿åº¦å–å‡ºæ•´ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ ç›´æ¥è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªç©ºç™½çš„ file.datï¼Œå¹¶æ²¡æœ‰å†™å…¥ä»»ä½•æ•°æ®ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„fileæ²¡æœ‰æ­£å¸¸å…³é—­ã€‚ä¸ºæ€§èƒ½èµ·è§ï¼Œæ•°æ®åªæœ‰åœ¨æ–‡ä»¶å…³é—­æ—¶æ‰ä¼šçœŸæ­£å†™å…¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æœ€åæ·»åŠ ä¸€è¡Œä»£ç ï¼š 1file.close(); // å¦‚æœä¸æƒ³å…³é—­æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ file.flush(); é‡æ–°è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œä½ å°±å¾—åˆ°å®‡å®™ç»ˆæé—®é¢˜çš„ç­”æ¡ˆäº†ã€‚ æˆ‘ä»¬å·²ç»è·å¾—å®‡å®™ç»ˆæé—®é¢˜çš„ç­”æ¡ˆäº†ï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬è¦å°†è¿™ä¸ªç­”æ¡ˆè¯»å–å‡ºæ¥ï¼š 123456QFile file(&quot;file.dat&quot;);file.open(QIODevice::ReadOnly);QDataStream in(&amp;file);QString str;qint32 a;in &gt;&gt; str &gt;&gt; a; è¿™æ®µä»£ç æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ å¿…é¡»æŒ‰ç…§å†™å…¥çš„é¡ºåºï¼Œå°†æ•°æ®è¯»å–å‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºæ•°æ®å†™å…¥çš„é¡ºåºå¿…é¡»é¢„å…ˆå®šä¹‰å¥½ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå†™å…¥å­—ç¬¦ä¸²ï¼Œç„¶åå†™å…¥æ•°å­—ï¼Œé‚£ä¹ˆå°±é¦–å…ˆè¯»å‡ºæ¥çš„å°±æ˜¯å­—ç¬¦ä¸²ï¼Œç„¶åæ‰æ˜¯æ•°å­—ã€‚é¡ºåºé¢ å€’çš„è¯ï¼Œç¨‹åºè¡Œä¸ºæ˜¯ä¸ç¡®å®šçš„ï¼Œä¸¥é‡æ—¶ä¼šç›´æ¥é€ æˆç¨‹åºå´©æºƒã€‚ ç”±äºäºŒè¿›åˆ¶æµæ˜¯çº¯ç²¹çš„å­—èŠ‚æ•°æ®ï¼Œå¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœç¨‹åºä¸åŒç‰ˆæœ¬ä¹‹é—´æŒ‰ç…§ä¸åŒçš„æ–¹å¼è¯»å–ï¼ˆå‰é¢è¯´è¿‡ï¼ŒQt ä¿è¯è¯»å†™å†…å®¹çš„ä¸€è‡´ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯ä¸åŒ Qt ç‰ˆæœ¬ä¹‹é—´çš„ä¸€è‡´ï¼‰ï¼Œæ•°æ®å°±ä¼šå‡ºç°é”™è¯¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»æä¾›ä¸€ç§æœºåˆ¶æ¥ç¡®ä¿ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å¦‚ä¸‹çš„ä»£ç å†™å…¥ï¼š 123456789101112QFile file(&quot;file.dat&quot;);file.open(QIODevice::WriteOnly);QDataStream out(&amp;file);// å†™å…¥é­”æœ¯æ•°å­—å’Œç‰ˆæœ¬out &lt;&lt; (quint32)0xA0B0C0D0;out &lt;&lt; (qint32)123;out.setVersion(QDataStream::Qt_4_0);// å†™å…¥æ•°æ®out &lt;&lt; lots_of_interesting_data; æ‰€è°“é­”æœ¯æ•°å­—ï¼Œæ˜¯äºŒè¿›åˆ¶è¾“å‡ºä¸­ç»å¸¸ä½¿ç”¨çš„ä¸€ç§æŠ€æœ¯ã€‚äºŒè¿›åˆ¶æ ¼å¼æ˜¯äººä¸å¯è¯»çš„ï¼Œå¹¶ä¸”é€šå¸¸å…·æœ‰ç›¸åŒçš„åç¼€åï¼ˆæ¯”å¦‚ dat ä¹‹ç±»ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰åŠæ³•åŒºåˆ†ä¸¤ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å“ªä¸ªæ˜¯åˆæ³•çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å®šä¹‰çš„äºŒè¿›åˆ¶æ ¼å¼é€šå¸¸å…·æœ‰ä¸€ä¸ªé­”æœ¯æ•°å­—ï¼Œç”¨äºæ ‡è¯†æ–‡ä»¶çš„åˆæ³•æ€§ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶æœ€å¼€å§‹å†™å…¥ 0xA0B0C0D0ï¼Œåœ¨è¯»å–çš„æ—¶å€™é¦–å…ˆæ£€æŸ¥è¿™ä¸ªæ•°å­—æ˜¯ä¸æ˜¯ 0xA0B0C0D0ã€‚å¦‚æœä¸æ˜¯çš„è¯ï¼Œè¯´æ˜è¿™ä¸ªæ–‡ä»¶ä¸æ˜¯å¯è¯†åˆ«æ ¼å¼ï¼Œå› æ­¤æ ¹æœ¬ä¸éœ€è¦å»ç»§ç»­è¯»å–ã€‚ä¸€èˆ¬äºŒè¿›åˆ¶æ–‡ä»¶éƒ½ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªé­”æœ¯æ•°å­—ï¼Œä¾‹å¦‚ Java çš„ class æ–‡ä»¶çš„é­”æœ¯æ•°å­—å°±æ˜¯ 0xCAFEBABEï¼Œä½¿ç”¨äºŒè¿›åˆ¶æŸ¥çœ‹å™¨å°±å¯ä»¥æŸ¥çœ‹ã€‚é­”æœ¯æ•°å­—æ˜¯ä¸€ä¸ª 32 ä½çš„æ— ç¬¦å·æ•´å‹ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨quint32æ¥å¾—åˆ°ä¸€ä¸ªå¹³å°æ— å…³çš„ 32 ä½æ— ç¬¦å·æ•´å‹ã€‚ out &lt;&lt; (qint32)123æ˜¯æ ‡è¯†æ–‡ä»¶çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬ç”¨é­”æœ¯æ•°å­—æ ‡è¯†æ–‡ä»¶çš„ç±»å‹ï¼Œä»è€Œåˆ¤æ–­æ–‡ä»¶æ˜¯ä¸æ˜¯åˆæ³•çš„ã€‚ä½†æ˜¯ï¼Œæ–‡ä»¶çš„ä¸åŒç‰ˆæœ¬ä¹‹é—´ä¹Ÿå¯èƒ½å­˜åœ¨å·®å¼‚ï¼šæˆ‘ä»¬å¯èƒ½åœ¨ç¬¬ä¸€ç‰ˆä¿å­˜æ•´å‹ï¼Œç¬¬äºŒç‰ˆå¯èƒ½ä¿å­˜å­—ç¬¦ä¸²ã€‚ä¸ºäº†æ ‡è¯†ä¸åŒçš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åªèƒ½å°†ç‰ˆæœ¬å†™å…¥æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œç°åœ¨æˆ‘ä»¬çš„ç‰ˆæœ¬æ˜¯ 123ã€‚ out.setVersion(QDataStream::Qt_4_0)ä¸Šé¢ä¸€å¥æ˜¯æ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œä½†æ˜¯ï¼ŒQtä¸åŒç‰ˆæœ¬ä¹‹é—´çš„è¯»å–æ–¹å¼å¯èƒ½ä¹Ÿä¸ä¸€æ ·ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—æŒ‡å®šQt æŒ‰ç…§å“ªä¸ªç‰ˆæœ¬å»è¯»ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡å®šä»¥Qt 4.0 æ ¼å¼å»è¯»å–å†…å®¹ã€‚ å½“æˆ‘ä»¬è¿™æ ·å†™å…¥æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬åœ¨è¯»å–çš„æ—¶å€™å°±éœ€è¦å¢åŠ ä¸€ç³»åˆ—çš„åˆ¤æ–­ï¼š 12345678910111213141516171819202122232425262728293031323334QFile file(&quot;file.dat&quot;);file.open(QIODevice::ReadOnly);QDataStream in(&amp;file);// æ£€æŸ¥é­”æœ¯æ•°å­—quint32 magic;in &gt;&gt; magic;if (magic != 0xA0B0C0D0) &#123; return BAD_FILE_FORMAT;&#125;// æ£€æŸ¥ç‰ˆæœ¬qint32 version;in &gt;&gt; version;if (version &lt; 100) &#123; return BAD_FILE_TOO_OLD;&#125;if (version &gt; 123) &#123; return BAD_FILE_TOO_NEW;&#125;if (version &lt;= 110) &#123; in.setVersion(QDataStream::Qt_3_2);&#125; else &#123; in.setVersion(QDataStream::Qt_4_0);&#125;// è¯»å–æ•°æ®in &gt;&gt; lots_of_interesting_data;if (version &gt;= 120) &#123; in &gt;&gt; data_new_in_version_1_2;&#125;in &gt;&gt; other_interesting_data; æˆ‘ä»¬é€šè¿‡ä¸‹é¢ä¸€æ®µä»£ç çœ‹çœ‹ä»€ä¹ˆæ˜¯æµçš„å½¢å¼ï¼š 12345678910QFile file(&quot;file.dat&quot;);file.open(QIODevice::ReadWrite);QDataStream stream(&amp;file);QString str = &quot;the answer is 42&quot;;QString strout;stream &lt;&lt; str;file.flush();stream &gt;&gt; strout; åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ï¼Œç´§æ¥ç€æŠŠæ•°æ®è¯»å‡ºæ¥ã€‚æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿè¿è¡Œä¹‹åä½ ä¼šå‘ç°ï¼Œstroutå®é™…æ˜¯ç©ºçš„ã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰è¯»å–å‡ºæ¥ï¼Ÿæˆ‘ä»¬ä¸æ˜¯å·²ç»æ·»åŠ äº†file.flush();è¯­å¥å—ï¼ŸåŸå› å¹¶ä¸åœ¨äºæ–‡ä»¶æœ‰æ²¡æœ‰å†™å…¥ï¼Œè€Œæ˜¯åœ¨äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯â€œæµâ€ã€‚æ‰€è°“æµï¼Œå°±åƒæ°´æµä¸€æ ·ï¼Œå®ƒçš„æ¸¸æ ‡ä¼šéšç€è¾“å‡ºå‘åç§»åŠ¨ã€‚å½“ä½¿ç”¨&lt;&lt;æ“ä½œç¬¦è¾“å‡ºä¹‹åï¼Œæµçš„æ¸¸æ ‡å·²ç»åˆ°äº†æœ€åï¼Œæ­¤æ—¶ä½ å†å»è¯»ï¼Œå½“ç„¶ä»€ä¹ˆä¹Ÿè¯»ä¸åˆ°äº†ã€‚æ‰€ä»¥ä½ éœ€è¦åœ¨è¾“å‡ºä¹‹åé‡æ–°æŠŠæ¸¸æ ‡è®¾ç½®ä¸º0çš„ä½ç½®æ‰èƒ½å¤Ÿç»§ç»­è¯»å–ã€‚å…·ä½“ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š 123stream &lt;&lt; str;stream.device()-&gt;seek(0);stream &gt;&gt; strout; æ–‡æœ¬æ–‡ä»¶è¯»å†™","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"Linux æ“ä½œç³»ç»Ÿ-è™šæ‹ŸåŒ–","slug":"Linuxæ“ä½œç³»ç»Ÿ-è™šæ‹ŸåŒ–","date":"2021-08-31T01:44:40.000Z","updated":"2022-10-15T03:14:29.309Z","comments":true,"path":"2021/08/31/Linuxæ“ä½œç³»ç»Ÿ-è™šæ‹ŸåŒ–/","link":"","permalink":"http://example.com/2021/08/31/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%99%9A%E6%8B%9F%E5%8C%96/","excerpt":"","text":"è™šæ‹ŸåŒ–è™šæ‹ŸæœºQEMU å·¥ä½œåŸç† å•çº¯ä½¿ç”¨ qemuï¼Œé‡‡ç”¨çš„æ˜¯å®Œå…¨è™šæ‹ŸåŒ–çš„æ¨¡å¼ã€‚qemu å‘ Guest OS æ¨¡æ‹Ÿ CPUï¼Œä¹Ÿæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼ŒGuestOS è®¤ä¸ºè‡ªå·±å’Œç¡¬ä»¶ç›´æ¥æ‰“äº¤é“ï¼Œå…¶å®æ˜¯åŒ qemu æ¨¡æ‹Ÿå‡ºæ¥çš„ç¡¬ä»¶æ‰“äº¤é“ï¼Œqemu ä¼šå°†è¿™äº›æŒ‡ä»¤è½¬è¯‘ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚ç”±äºæ‰€æœ‰çš„æŒ‡ä»¤éƒ½è¦ä» qemu é‡Œé¢è¿‡ä¸€æ‰‹ï¼Œå› è€Œæ€§èƒ½å°±ä¼šæ¯”è¾ƒå·®ã€‚ å®Œå…¨è™šæ‹ŸåŒ–æ˜¯éå¸¸æ…¢çš„ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ Intel-VTï¼ŒAMD-Vï¼Œæ‰€ä»¥éœ€è¦ CPU ç¡¬ä»¶å¼€å¯è¿™ä¸ªæ ‡å¿—ä½ï¼Œä¸€èˆ¬åœ¨ BIOS é‡Œé¢è®¾ç½®ã€‚å½“ç¡®è®¤å¼€å§‹äº†æ ‡å¿—ä½ä¹‹åï¼Œé€šè¿‡ KVMï¼ŒGuestOS çš„ CPU æŒ‡ä»¤ä¸ç”¨ç»è¿‡ Qemu è½¬è¯‘ï¼Œç›´æ¥è¿è¡Œï¼Œå¤§å¤§æé«˜äº†é€Ÿåº¦ã€‚æ‰€ä»¥ï¼ŒKVM åœ¨å†…æ ¸é‡Œé¢éœ€è¦æœ‰ä¸€ä¸ªæ¨¡å—ï¼Œæ¥è®¾ç½®å½“å‰ CPU æ˜¯ Guest OS åœ¨ç”¨ï¼Œè¿˜æ˜¯ Host OS åœ¨ç”¨ã€‚ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å†…æ ¸æ¨¡å—ä¸­æ˜¯å¦æœ‰ KVM 1lsmod | grep kvm KVM å†…æ ¸æ¨¡å—é€šè¿‡ /dev/kvm æš´éœ²æ¥å£ï¼Œç”¨æˆ·æ€ç¨‹åºå¯ä»¥é€šè¿‡ ioctlæ¥è®¿é—®è¿™ä¸ªæ¥å£ã€‚Qemu å°† KVM æ•´åˆè¿›æ¥ï¼Œå°†æœ‰å…³ CPU æŒ‡ä»¤çš„éƒ¨åˆ†äº¤ç”±å†…æ ¸æ¨¡å—æ¥åšï¼Œå°±æ˜¯ qemu-kvm (qemu-system-XXX)ã€‚ qemu å’Œ kvm æ•´åˆä¹‹åï¼ŒCPU çš„æ€§èƒ½é—®é¢˜è§£å†³äº†ã€‚å¦å¤– Qemu è¿˜ä¼šæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼Œå¦‚ç½‘ç»œå’Œç¡¬ç›˜ã€‚åŒæ ·ï¼Œå…¨è™šæ‹ŸåŒ–çš„æ–¹å¼ä¹Ÿä¼šå½±å“è¿™äº›è®¾å¤‡çš„æ€§èƒ½ã€‚ äºæ˜¯ï¼Œqemu é‡‡å–åŠè™šæ‹ŸåŒ–çš„æ–¹å¼ï¼Œè®© Guest OS åŠ è½½ç‰¹æ®Šçš„é©±åŠ¨æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ ä¾‹å¦‚ï¼Œç½‘ç»œéœ€è¦åŠ è½½ virtio_netï¼Œå­˜å‚¨éœ€è¦åŠ è½½ virtio_blkï¼ŒGuest éœ€è¦å®‰è£…è¿™äº›åŠè™šæ‹ŸåŒ–é©±åŠ¨ï¼ŒGuestOS çŸ¥é“è‡ªå·±æ˜¯è™šæ‹Ÿæœºï¼Œæ‰€ä»¥æ•°æ®ä¼šç›´æ¥å‘é€ç»™åŠè™šæ‹ŸåŒ–è®¾å¤‡ï¼Œç»è¿‡ç‰¹æ®Šå¤„ç†ï¼ˆä¾‹å¦‚æ’é˜Ÿã€ç¼“å­˜ã€æ‰¹é‡å¤„ç†ç­‰æ€§èƒ½ä¼˜åŒ–æ–¹å¼ï¼‰ï¼Œæœ€ç»ˆå‘é€ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†æ€§èƒ½ã€‚ è®¡ç®—è™šæ‹ŸåŒ–ä¹‹ CPUè®¡ç®—è™šæ‹ŸåŒ–ä¹‹å†…å­˜","categories":[{"name":"Linux æ“ä½œç³»ç»Ÿ","slug":"Linux-æ“ä½œç³»ç»Ÿ","permalink":"http://example.com/categories/Linux-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[]},{"title":"Linux æ“ä½œç³»ç»Ÿ-è¿›ç¨‹ç®¡ç†","slug":"Linuxæ“ä½œç³»ç»Ÿ-è¿›ç¨‹ç®¡ç†","date":"2021-08-30T01:41:50.000Z","updated":"2022-07-04T00:41:50.000Z","comments":true,"path":"2021/08/30/Linuxæ“ä½œç³»ç»Ÿ-è¿›ç¨‹ç®¡ç†/","link":"","permalink":"http://example.com/2021/08/30/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/","excerpt":"","text":"è¿›ç¨‹æºç 1234567891011121314151617181920//process.c#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;extern int create_process (char* program, char** arg_list);int create_process (char* program, char** arg_list)&#123; pid_t child_pid; child_pid = fork (); if (child_pid != 0) &#123; return child_pid; &#125; else &#123; execvp (program, arg_list); abort (); &#125;&#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºçš„å­ç¨‹åºè¿è¡Œäº†ä¸€ä¸ªæœ€æœ€ç®€å•çš„å‘½ä»¤ lsã€‚ 1234567891011121314151617//createprocess.c#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;extern int create_process (char* program, char** arg_list);int main ()&#123; char* arg_list[] = &#123; &quot;ls&quot;, &quot;-l&quot;, &quot;/etc/yum.repos.d/&quot;, NULL &#125;; create_process (&quot;ls&quot;, arg_list); return 0;&#125; ç¼–è¯‘CPU çœ‹ä¸æ‡‚æºç é‡Œçš„å‡½æ•°ï¼Œå‘½ä»¤ï¼ŒCPU åªè®¤äºŒè¿›åˆ¶æ•°æ®ï¼Œæ‰€ä»¥æºç éœ€è¦ç¿»è¯‘æˆ01äºŒè¿›åˆ¶æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ç¼–è¯‘ï¼ˆCompileï¼‰çš„è¿‡ç¨‹ã€‚ ç¼–è¯‘å‡ºçš„æ–‡ä»¶å¥½æ¯”ä¸€ä¸ªå…¬å¸çš„é¡¹ç›®æ‰§è¡Œè®¡åˆ’ä¹¦ï¼Œä½ è¦æŠŠä¸€ä¸ªé¡¹ç›®æ‰§è¡Œå¥½ï¼Œè®¡åˆ’ä¹¦å¾—æœ‰ç« æ³•ï¼Œæœ‰ä¸€å®šæ ¼å¼ã€‚åœ¨ Linux ä¸‹ï¼ŒäºŒè¿›åˆ¶ç¨‹åºä¹Ÿæœ‰è¿™æ ·çš„æ ¼å¼ï¼Œå«ELFï¼ˆExecuteable and Linkable Formatï¼Œå¯æ‰§è¡Œä¸å¯é“¾æ¥æ ¼å¼ï¼‰ï¼Œè¿™ä¸ªæ ¼å¼å¯ä»¥æ ¹æ®ç¼–è¯‘çš„ç»“æœä¸åŒï¼Œåˆ†ä¸ºä¸åŒçš„æ ¼å¼ã€‚ ELF-å¯é‡å®šä½æ–‡ä»¶ä¸‹å›¾å±•ç¤ºäº†å¦‚ä½•ä»æºç åˆ°äºŒè¿›åˆ¶æ–‡ä»¶çš„è½¬åŒ– 12gcc -c -fPIC process.cgcc -c -fPIC createprocess.c -fPICä½œç”¨äºç¼–è¯‘é˜¶æ®µï¼Œå‘Šè¯‰ç¼–è¯‘å™¨äº§ç”Ÿä¸ä½ç½®æ— å…³ä»£ç  (Position-Independent Code)ã€‚äº§ç”Ÿçš„ä»£ç ä¸­ï¼Œæ²¡æœ‰ç»å¯¹åœ°å€ï¼Œå…¨éƒ¨ä½¿ç”¨ç›¸å¯¹åœ°å€ï¼Œæ•…è€Œä»£ç å¯ä»¥è¢«åŠ è½½å™¨åŠ è½½åˆ°å†…å­˜çš„ä»»æ„ä½ç½®ï¼Œéƒ½å¯ä»¥æ­£ç¡®çš„æ‰§è¡Œã€‚ åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå…ˆåšé¢„å¤„ç†å·¥ä½œï¼Œä¾‹å¦‚å°†å¤´æ–‡ä»¶åµŒå…¥åˆ°æ­£æ–‡ä¸­ï¼Œå°†å®šä¹‰çš„å®å±•å¼€ï¼Œç„¶åå°±æ˜¯çœŸæ­£çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œæœ€ç»ˆç¼–è¯‘æˆä¸º.oæ–‡ä»¶ï¼Œè¿™å°±æ˜¯ELFçš„ç¬¬ä¸€ç§ç±»å‹ï¼Œå¯é‡å®šä½æ–‡ä»¶ï¼ˆRelocatable Fileï¼‰ã€‚æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼Œ ELF æ–‡ä»¶çš„å¤´æ˜¯ç”¨äºæè¿°æ•´ä¸ªæ–‡ä»¶çš„ã€‚è¿™ä¸ªæ–‡ä»¶æ ¼å¼åœ¨å†…æ ¸ä¸­æœ‰å®šä¹‰ï¼Œåˆ†åˆ«ä¸º struct elf32_hdr å’Œ struct elf64_hdrã€‚ section å†…å®¹ .text æ”¾ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œä»£ç  .data å·²ç»åˆå§‹åŒ–å¥½çš„å…¨å±€å˜é‡ï¼ˆä¸´æ—¶å˜é‡æ”¾åœ¨æ ˆé‡Œï¼‰ .rodata åªè¯»æ•°æ®ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²å¸¸é‡ã€const çš„å˜é‡ .bss æœªåˆå§‹åŒ–å…¨å±€å˜é‡ï¼Œè¿è¡Œæ—¶ä¼šç½® 0 .symtab ç¬¦å·è¡¨ï¼Œè®°å½•çš„åˆ™æ˜¯å‡½æ•°å’Œå˜é‡ .strtab å­—ç¬¦ä¸²è¡¨ã€å­—ç¬¦ä¸²å¸¸é‡å’Œå˜é‡å ç¬¬ä¸€ç§ ELF æ–‡ä»¶å«å¯é‡å®šä½æ–‡ä»¶ï¼Œä¸ºå•¥å¯é‡å®šä½ï¼Ÿæˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™ä¸ªç¼–è¯‘å¥½çš„ä»£ç å’Œå˜é‡ï¼Œå°†æ¥åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„æ—¶å€™ï¼Œéƒ½æ˜¯è¦åŠ è½½åˆ°ä¸€å®šä½ç½®çš„ã€‚æ¯”å¦‚è¯´ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå…¶å®å°±æ˜¯è·³åˆ°è¿™ä¸ªå‡½æ•°æ‰€åœ¨çš„ä»£ç ä½ç½®æ‰§è¡Œï¼›å†æ¯”å¦‚ä¿®æ”¹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¹Ÿæ˜¯è¦åˆ°å˜é‡çš„ä½ç½®é‚£é‡Œå»ä¿®æ”¹ã€‚ä½†æ˜¯ç°åœ¨è¿™ä¸ªæ—¶å€™ï¼Œè¿˜æ˜¯.oæ–‡ä»¶ï¼Œä¸æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥è¿è¡Œçš„ç¨‹åºï¼Œè¿™é‡Œé¢åªæ˜¯éƒ¨åˆ†ä»£ç ç‰‡æ®µã€‚ ä¾‹å¦‚è¿™é‡Œçš„ create_processå‡½æ•°ï¼Œå°†æ¥è¢«è°è°ƒç”¨ï¼Œåœ¨å“ªé‡Œè°ƒç”¨éƒ½ä¸æ¸…æ¥šï¼Œå°±æ›´åˆ«æç¡®å®šä½ç½®äº†ã€‚æ‰€ä»¥ï¼Œ.oé‡Œé¢çš„ä½ç½®æ˜¯ä¸ç¡®å®šçš„ï¼Œä½†æ˜¯å¿…é¡»æ˜¯å¯é‡æ–°å®šä½çš„ï¼Œå› ä¸ºå®ƒå°†æ¥æ˜¯è¦åšå‡½æ•°åº“çš„å˜›ï¼Œå°±æ˜¯ä¸€å—ç –ï¼Œå“ªé‡Œéœ€è¦å“ªé‡Œæ¬ï¼Œæ¬åˆ°å“ªé‡Œå°±é‡æ–°å®šä½è¿™äº›ä»£ç ã€å˜é‡çš„ä½ç½®ã€‚ ELF-å¯æ‰§è¡Œæ–‡ä»¶è¦è®©create_processè¿™ä¸ªå‡½æ•°ä½œä¸ºåº“æ–‡ä»¶é‡ç”¨ï¼Œéœ€è¦å°†å…¶å½¢æˆåº“æ–‡ä»¶ï¼Œæœ€ç®€å•çš„ç±»å‹æ˜¯é™æ€é“¾æ¥åº“.aæ–‡ä»¶ï¼Œå®ƒå°†ä¸€ç³»åˆ—.oæ–‡ä»¶å½’æ¡£ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚ä½¿ç”¨arå‘½ä»¤åˆ›å»º.aæ–‡ä»¶ã€‚ä½¿ç”¨æ–¹æ³•çœ‹è¿™é‡Œã€‚ 1ar cr libstaticprocess.a process.o è™½ç„¶è¿™é‡Œ libstaticprocess.a é‡Œé¢åªæœ‰ä¸€ä¸ª.oï¼Œä½†æ˜¯å®é™…æƒ…å†µå¯ä»¥æœ‰å¤šä¸ª.oã€‚å½“æœ‰ç¨‹åºè¦ä½¿ç”¨è¿™ä¸ªé™æ€è¿æ¥åº“çš„æ—¶å€™ï¼Œä¼šå°†.o æ–‡ä»¶æå–å‡ºæ¥ï¼Œé“¾æ¥åˆ°ç¨‹åºä¸­ã€‚ 1gcc -o staticcreateprocess createprocess.o -L. -lstaticprocess -Lè¡¨ç¤ºåœ¨å½“å‰ç›®å½•ä¸‹æ‰¾.aæ–‡ä»¶ï¼Œ-lstaticprocess ä¼šè‡ªåŠ¨è¡¥å…¨æ–‡ä»¶åï¼Œæ¯”å¦‚åŠ å‰ç¼€ libï¼Œåç¼€.aï¼Œå˜æˆ libstaticprocess.aï¼Œæ‰¾åˆ°è¿™ä¸ª.aæ–‡ä»¶åï¼Œå°†é‡Œé¢çš„ process.o å–å‡ºæ¥ï¼Œå’Œ createprocess.o åšä¸€ä¸ªé“¾æ¥ï¼Œå½¢æˆäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ staticcreateprocessã€‚ åœ¨é“¾æ¥è¿‡ç¨‹ä¸­ï¼Œé‡å®šä½å°±èµ·ä½œç”¨äº†ï¼Œåœ¨createprocess.oé‡Œè°ƒç”¨äº†create_processå‡½æ•°ï¼Œä½†æ˜¯ä¸èƒ½ç¡®å®šä½ç½®ï¼Œç°åœ¨å°†process.oåˆå¹¶è¿›æ¥ï¼Œå°±çŸ¥é“ä½ç½®äº†ã€‚ è¿™ä¸ªæ ¼å¼å’Œ.o æ–‡ä»¶å¤§è‡´ç›¸ä¼¼ï¼Œè¿˜æ˜¯åˆ†æˆä¸€ä¸ªä¸ªçš„ sectionï¼Œå¹¶ä¸”è¢«èŠ‚å¤´è¡¨æè¿°ã€‚åªä¸è¿‡è¿™äº›section æ˜¯å¤šä¸ª.o æ–‡ä»¶åˆå¹¶è¿‡çš„ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶å·²ç»æ˜¯é©¬ä¸Šå°±å¯ä»¥åŠ è½½åˆ°å†…å­˜é‡Œé¢æ‰§è¡Œçš„æ–‡ä»¶äº†ï¼Œå› è€Œè¿™äº› section è¢«åˆ†æˆäº†éœ€è¦åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„ä»£ç æ®µã€æ•°æ®æ®µå’Œä¸éœ€è¦åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„éƒ¨åˆ†ï¼Œå°†å°çš„ section åˆæˆäº†å¤§çš„æ®µ segmentï¼Œå¹¶ä¸”åœ¨æœ€å‰é¢åŠ ä¸€ä¸ªæ®µå¤´è¡¨ï¼ˆSegment Header Tableï¼‰ã€‚ åœ¨ä»£ç é‡Œé¢çš„å®šä¹‰ä¸º struct elf32_phdrå’Œ struct elf64_phdrï¼Œè¿™é‡Œé¢é™¤äº†æœ‰å¯¹äºæ®µçš„æè¿°ä¹‹å¤–ï¼Œæœ€é‡è¦çš„æ˜¯ p_vaddrï¼Œè¿™ä¸ªæ˜¯è¿™ä¸ªæ®µåŠ è½½åˆ°å†…å­˜çš„è™šæ‹Ÿåœ°å€ã€‚ åœ¨ ELF å¤´é‡Œé¢ï¼Œæœ‰ä¸€é¡¹ e_entryï¼Œä¹Ÿæ˜¯ä¸ªè™šæ‹Ÿåœ°å€ï¼Œæ˜¯è¿™ä¸ªç¨‹åºè¿è¡Œçš„å…¥å£ã€‚ ELF-å…±äº«å¯¹è±¡æ–‡ä»¶é™æ€åº“ä¸€æ—¦è¢«é“¾æ¥ï¼Œä»£ç å’Œå˜é‡çš„sectionä¼šè¢«åˆå¹¶ï¼Œæ‰€ä»¥è¿è¡Œæ—¶ä¸ä¾èµ–é™æ€åº“æ–‡ä»¶ï¼Œä½†æ˜¯ç¼ºç‚¹å°±æ˜¯ï¼Œç›¸åŒä»£ç æ®µè¢«å¤šä¸ªç¨‹åºä½¿ç”¨ï¼Œåœ¨å†…å­˜é‡Œä¼šæœ‰å¤šä»½ï¼Œè€Œä¸”é™æ€åº“æ›´æ–°éœ€è¦é‡æ–°ç¼–è¯‘ã€‚ å› è€Œå°±å‡ºç°äº†å¦ä¸€ç§ï¼ŒåŠ¨æ€é“¾æ¥åº“ï¼ˆShared Librariesï¼‰ï¼Œä¸ä»…ä»…æ˜¯ä¸€ç»„å¯¹è±¡æ–‡ä»¶çš„ç®€å•å½’æ¡£ï¼Œè€Œæ˜¯å¤šä¸ªå¯¹è±¡æ–‡ä»¶çš„é‡æ–°ç»„åˆï¼Œå¯è¢«å¤šä¸ªç¨‹åºå…±äº«ã€‚ 1gcc -shared -fPIC -o libdynamicprocess.so process.o å½“ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“è¢«é“¾æ¥åˆ°ä¸€ä¸ªç¨‹åºæ–‡ä»¶ä¸­çš„æ—¶å€™ï¼Œæœ€åçš„ç¨‹åºæ–‡ä»¶å¹¶ä¸åŒ…æ‹¬åŠ¨æ€é“¾æ¥åº“ä¸­çš„ä»£ç ï¼Œè€Œä»…ä»…åŒ…æ‹¬å¯¹åŠ¨æ€é“¾æ¥åº“çš„å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¿å­˜åŠ¨æ€é“¾æ¥åº“çš„å…¨è·¯å¾„ï¼Œä»…ä»…ä¿å­˜åŠ¨æ€é“¾æ¥åº“çš„åç§°ã€‚ 1gcc -o dynamiccreateprocess createprocess.o -L. -ldynamicprocess å½“è¿è¡Œè¿™ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œé¦–å…ˆå¯»æ‰¾åŠ¨æ€é“¾æ¥åº“ï¼Œç„¶ååŠ è½½å®ƒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿåœ¨ /lib å’Œ/usr/lib æ–‡ä»¶å¤¹ä¸‹å¯»æ‰¾åŠ¨æ€é“¾æ¥åº“ã€‚å¦‚æœæ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥è®¾å®š LD_LIBRARY_PATHç¯å¢ƒå˜é‡ï¼Œç¨‹åºè¿è¡Œæ—¶ä¼šåœ¨æ­¤ç¯å¢ƒå˜é‡æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸‹å¯»æ‰¾åŠ¨æ€é“¾æ¥åº“ã€‚ 12345# export LD_LIBRARY_PATH=.# ./dynamiccreateprocess# total 40-rw-r--r--. 1 root root 1572 Oct 24 18:38 CentOS-Base.repo...... åŠ¨æ€é“¾æ¥åº“ï¼Œå°±æ˜¯ELFçš„ç¬¬ä¸‰ç§ç±»å‹ï¼Œå…±äº«å¯¹è±¡æ–‡ä»¶ï¼ˆShared Objectï¼‰ã€‚ æ–‡ä»¶æ ¼å¼å’Œä¸Šä¸¤ç§æ–‡ä»¶ç¨æœ‰ä¸åŒï¼Œé¦–å…ˆï¼Œå¤šäº†ä¸€ä¸ª.interpçš„ Segmentï¼Œè¿™é‡Œé¢æ˜¯ ld-linux.soï¼Œè¿™æ˜¯åŠ¨æ€é“¾æ¥å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿è¡Œæ—¶çš„é“¾æ¥åŠ¨ä½œéƒ½æ˜¯å®ƒåšçš„ã€‚ å¦å¤–ï¼ŒELFæ–‡ä»¶ä¸­è¿˜å¤šäº†ä¸¤ä¸ªsectionï¼Œä¸€ä¸ªæ˜¯.pltï¼Œè¿‡ç¨‹é“¾æ¥è¡¨ï¼ˆProcedure Linkage Tableï¼ŒPLTï¼‰ï¼Œä¸€ä¸ªæ˜¯ã€‚got.pltï¼Œå…¨å±€åç§»é‡è¡¨ï¼ˆGlobal Offset Tableï¼ŒGOTï¼‰ã€‚ è¿è¡Œåœ¨å†…æ ¸ä¸­ï¼Œæœ‰linux_binfmt elf_formatæ•°æ®ç»“æ„å®šä¹‰äº†åŠ è½½ ELF çš„æ–¹æ³•ï¼Œä½¿ç”¨load_elf_binaryåŠ è½½äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¯¥å‡½æ•°ç”±do_execveè°ƒç”¨ï¼Œå­¦è¿‡ç³»ç»Ÿè°ƒç”¨çŸ¥é“execè°ƒç”¨äº†do_execveå‡½æ•°ã€‚æ‰€ä»¥æµç¨‹ä¸º 1exec-&gt;do_execve-&gt;load_elf_binary è¿›ç¨‹æ ‘æ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯ä»çˆ¶è¿›ç¨‹ fork æ¥çš„ï¼Œç¥–å®—è¿›ç¨‹å°±æ˜¯init è¿›ç¨‹ã€‚ ç³»ç»Ÿå¯åŠ¨ä¹‹åï¼Œinit è¿›ç¨‹ä¼šå¯åŠ¨å¾ˆå¤šçš„daemon è¿›ç¨‹ï¼Œä¸ºç³»ç»Ÿè¿è¡Œæä¾›æœåŠ¡ï¼Œç„¶åå°±æ˜¯å¯åŠ¨ gettyï¼Œè®©ç”¨æˆ·ç™»å½•ï¼Œç™»å½•åè¿è¡Œ shellï¼Œç”¨æˆ·å¯åŠ¨çš„è¿›ç¨‹éƒ½æ˜¯é€šè¿‡ shellè¿è¡Œçš„ï¼Œä»è€Œå½¢æˆäº†ä¸€æ£µè¿›ç¨‹æ ‘ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ ps -efå‘½ä»¤æŸ¥çœ‹å½“å‰ç³»ç»Ÿå¯åŠ¨çš„è¿›ç¨‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ‰ä¸‰ç±»è¿›ç¨‹ã€‚PID 1 çš„è¿›ç¨‹å°±æ˜¯æˆ‘ä»¬çš„initè¿›ç¨‹ systemdï¼ŒPID 2 çš„è¿›ç¨‹æ˜¯å†…æ ¸çº¿ç¨‹ kthreaddã€‚ å†…æ ¸æ€è¿›ç¨‹çš„PPIDç¥–å…ˆè¿›ç¨‹éƒ½æ˜¯ 2 å·è¿›ç¨‹ï¼Œç”¨æˆ·æ€è¿›ç¨‹ç¥–å…ˆè¿›ç¨‹éƒ½æ˜¯ 1 å·è¿›ç¨‹ï¼Œttyåˆ—æ˜¯é—®å·çš„ï¼Œè¯´æ˜æ˜¯åå°æœåŠ¡è¿›ç¨‹ã€‚ è¿›ç¨‹æ•°æ®ç»“æ„åœ¨ Linux é‡Œé¢ï¼Œæ— è®ºæ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹ï¼Œåˆ°äº†å†…æ ¸é‡Œé¢ï¼Œæˆ‘ä»¬ç»Ÿä¸€éƒ½å«ä»»åŠ¡ï¼ˆTaskï¼‰ï¼Œç”±ä¸€ä¸ªç»Ÿä¸€çš„ç»“æ„task_structè¿›è¡Œç®¡ç†ã€‚ æ¯ä¸ªä»»åŠ¡åº”è¯¥åŒ…å«çš„å­—æ®µï¼š ä»»åŠ¡ ID123pid_t pid; #process idpid_t tgid; #thread group IDstruct task_struct *group_leader; ä¸ºä½•è¦æœ‰è¿™ä¹ˆå¤š IDï¼Œä¸€ä¸ªä¸å¤Ÿå—ï¼Ÿ å¯ä»¥æ–¹ä¾¿ä»»åŠ¡å±•ç¤ºï¼Œæ¯”å¦‚åœ¨å‘½ä»¤è¡Œä¸­ ps æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œåªæ˜¾ç¤ºpid_t pidï¼Œè€Œä¸ä¼šæŠŠæ‰€æœ‰å†…éƒ¨çº¿ç¨‹æ‘Šå¼€å±•ç¤ºï¼Œè¿™æ ·å¤ªç¢çœ¼ã€‚ æ–¹ä¾¿ä¸‹è¾¾å‘½ä»¤ï¼Œå½“æˆ‘ kill ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¯¹æ•´ä¸ªè¿›ç¨‹å‘é€ä¿¡å·ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸€äº›å‘½ä»¤åªéœ€è¦å¯¹æŸä¸ªçº¿ç¨‹å‘é€ä¿¡å·ã€‚ ä¿¡å·å¤„ç†12345678910/* Signal handlers: */struct signal_struct *signal;struct sighand_struct *sighand;sigset_t blocked;sigset_t real_blocked;sigset_t saved_sigmask;struct sigpending pending;unsigned long sas_ss_sp;size_t sas_ss_size;unsigned int sas_ss_flags; è¿™é‡Œå®šä¹‰äº†å“ªäº›ä¿¡å·è¢«é˜»å¡æš‚ä¸å¤„ç†ï¼ˆblockedï¼‰ï¼Œå“ªäº›ä¿¡å·å°šç­‰å¾…å¤„ç†ï¼ˆpendingï¼‰ï¼Œå“ªäº›ä¿¡å·æ­£åœ¨é€šè¿‡ä¿¡å·å¤„ç†å‡½æ•°è¿›è¡Œå¤„ç†ï¼ˆsighandï¼‰ã€‚å¤„ç†çš„ç»“æœå¯ä»¥æ˜¯å¿½ç•¥ï¼Œå¯ä»¥æ˜¯ç»“æŸè¿›ç¨‹ç­‰ç­‰ã€‚ ä»»åŠ¡çŠ¶æ€1234567volatile long state; /* -1 unrunnable, 0 runnable, &gt;0 stopped */int exit_state;unsigned int flags; stateå¯å–å€¼å®šä¹‰å¦‚ä¸‹ 123456789101112131415161718/* Used in tsk-&gt;state: */#define TASK_RUNNING 0#define TASK_INTERRUPTIBLE 1#define TASK_UNINTERRUPTIBLE 2#define __TASK_STOPPED 4#define __TASK_TRACED 8/* Used in tsk-&gt;exit_state: */#define EXIT_DEAD 16#define EXIT_ZOMBIE 32#define EXIT_TRACE (EXIT_ZOMBIE | EXIT_DEAD)/* Used in tsk-&gt;state again: */#define TASK_DEAD 64#define TASK_WAKEKILL 128#define TASK_WAKING 256#define TASK_PARKED 512#define TASK_NOLOAD 1024#define TASK_NEW 2048#define TASK_STATE_MAX 4096 å¯ä»¥å‘ç° Linux é€šè¿‡ bitset æ–¹å¼è®¾ç½®çŠ¶æ€ï¼Œå½“å‰ä»€ä¹ˆçŠ¶æ€ï¼Œå“ªä¸€ä½å°±ç½® 1ã€‚ è¿›ç¨‹è°ƒåº¦è¿›ç¨‹çš„çŠ¶æ€åˆ‡æ¢å¾€å¾€æ¶‰åŠè°ƒåº¦ï¼Œä¸‹é¢è¿™äº›å­—æ®µéƒ½æ˜¯ç”¨äºè°ƒåº¦çš„ã€‚ 12345678910111213141516171819// æ˜¯å¦åœ¨è¿è¡Œé˜Ÿåˆ—ä¸Šint on_rq;// ä¼˜å…ˆçº§int prio;int static_prio;int normal_prio;unsigned int rt_priority;// è°ƒåº¦å™¨ç±»const struct sched_class *sched_class;// è°ƒåº¦å®ä½“struct sched_entity se;struct sched_rt_entity rt;struct sched_dl_entity dl;// è°ƒåº¦ç­–ç•¥unsigned int policy;// å¯ä»¥ä½¿ç”¨å“ªäº› CPUint nr_cpus_allowed;cpumask_t cpus_allowed;struct sched_info sched_info; è¿è¡Œç»Ÿè®¡ä¿¡æ¯123456u64 utime;// ç”¨æˆ·æ€æ¶ˆè€—çš„ CPU æ—¶é—´u64 stime;// å†…æ ¸æ€æ¶ˆè€—çš„ CPU æ—¶é—´unsigned long nvcsw;// è‡ªæ„¿ (voluntary) ä¸Šä¸‹æ–‡åˆ‡æ¢è®¡æ•°unsigned long nivcsw;// éè‡ªæ„¿ (involuntary) ä¸Šä¸‹æ–‡åˆ‡æ¢è®¡æ•°u64 start_time;// è¿›ç¨‹å¯åŠ¨æ—¶é—´ï¼Œä¸åŒ…å«ç¡çœ æ—¶é—´u64 real_start_time;// è¿›ç¨‹å¯åŠ¨æ—¶é—´ï¼ŒåŒ…å«ç¡çœ æ—¶é—´ è¿›ç¨‹äº²ç¼˜å…³ç³»è¿›ç¨‹æœ‰æ£µè¿›ç¨‹æ ‘ï¼Œæ‰€ä»¥æœ‰äº²ç¼˜å…³ç³»ã€‚ 1234struct task_struct __rcu *real_parent; /* real parent process */struct task_struct __rcu *parent; /* recipient of SIGCHLD, wait4() reports */struct list_head children; /* list of my children */struct list_head sibling; /* linkage in my parent&#x27;s children list */ é€šå¸¸æƒ…å†µä¸‹ï¼Œreal_parent å’Œ parent æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¹Ÿä¼šæœ‰å¦å¤–çš„æƒ…å†µå­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œbash åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£è¿›ç¨‹çš„ parent å’Œ real_parent å°±éƒ½æ˜¯ bashã€‚å¦‚æœåœ¨ bash ä¸Šä½¿ç”¨ GDB æ¥ debug ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªæ—¶å€™ GDB æ˜¯ real_parentï¼Œbash æ˜¯è¿™ä¸ªè¿›ç¨‹çš„ parentã€‚ è¿›ç¨‹æƒé™1234/* Objective and real subjective task credentials (COW): */const struct cred __rcu *real_cred;/* Effective (overridable) subjective task credentials (COW): */const struct cred __rcu real_cred å°±æ˜¯è¯´æ˜è°èƒ½æ“ä½œæˆ‘è¿™ä¸ªè¿›ç¨‹ï¼Œè€Œ cred å°±æ˜¯è¯´æ˜æˆ‘è¿™ä¸ªè¿›ç¨‹èƒ½å¤Ÿæ“ä½œè°ã€‚ æ€»ç»“åˆ°ä¸€èµ·ï¼Œtask_structç»“æ„å›¾å¦‚ä¸‹ï¼Œ","categories":[{"name":"Linux æ“ä½œç³»ç»Ÿ","slug":"Linux-æ“ä½œç³»ç»Ÿ","permalink":"http://example.com/categories/Linux-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"CSAPPLAB-Bomb Lab","slug":"CSAPP-LAB-Bomb Lab","date":"2021-08-29T10:40:16.000Z","updated":"2022-10-15T03:14:29.112Z","comments":true,"path":"2021/08/29/CSAPP-LAB-Bomb Lab/","link":"","permalink":"http://example.com/2021/08/29/CSAPP-LAB-Bomb%20Lab/","excerpt":"","text":"Tipsç¼©å†™æ³¨é‡ŠCSAPPï¼šComputer Systems A Programmerâ€™s Perspectiveï¼ˆæ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼‰ã€‚CSAPPï¼ˆCï¼šP166ï¼ŒOï¼šP278ï¼‰è¡¨ç¤ºä¹¦æœ¬çš„ä¸­æ–‡ç‰ˆç¬¬ 166 é¡µï¼Œè‹±æ–‡åŸç‰ˆç¬¬ 278 é¡µã€‚ å¯„å­˜å™¨ä¿¡æ¯äº†è§£å¯„å­˜å™¨çš„åŸºæœ¬ç”¨é€”ï¼Œçœ‹åˆ°ä¸€ä¸ªæ±‡ç¼–ä»£ç ï¼Œå¯ä»¥å¤§æ¦‚äº†è§£è¿™ä¸ªå¯„å­˜å™¨æ˜¯åœ¨æ ˆä¸­ä½¿ç”¨çš„ï¼Œè¿˜æ˜¯ä¿å­˜å‚æ•°çš„ï¼Œæ˜¯è°ƒç”¨è€…ä¿å­˜ï¼Œè¿˜æ˜¯è¢«è°ƒç”¨è€…ä¿å­˜ã€‚ GDBè°ƒè¯•è¿‡ç¨‹ç”¨åˆ°çš„ GDB å‘½ä»¤å¯ä»¥å…ˆå‚è€ƒGDB è°ƒè¯•å…¥é—¨è¿™ç¯‡æ–‡ç« ã€‚æ–‡ä¸­æ‰€ç”¨ä¾‹å­ä¹Ÿæ˜¯æ‘˜è‡ªä¸ BombLab çš„æºç ï¼Œæ›´å®¹æ˜“ç†è§£å¦‚ä½•ä½¿ç”¨ã€‚è¿˜æœ‰ä¸€å®šæ¯”è¾ƒé‡è¦çš„æ˜¯ï¼Œå¦‚ä½•ä½¿ç”¨ gdb å¸¦å‚æ•°è°ƒè¯•ã€‚ä¸ºäº†ä¸ç”¨æ¯æ¬¡è¿è¡Œbombç¨‹åºéƒ½éœ€è¦é‡æ–°è¾“å…¥ç­”æ¡ˆï¼Œbombç¨‹åºå¯ä»¥è¯»å–æ–‡æœ¬ä¿¡æ¯ï¼Œåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­å†™å…¥ç­”æ¡ˆå³å¯å…å»æ‰‹åŠ¨è¾“å…¥ã€‚ phase_1æ‹†å¼¹ä¸“å®¶å·²ä¸Šçº¿ï¼Œå¼€å¹²ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ 1234567891011121314(gdb) b phase_1(gdb) b explode_bomb(gdb) disas phase_1Dump of assembler code for function phase_1:&#x27; 0x0000000000400ee0 &lt;+0&gt;: sub $0x8,%rsp 0x0000000000400ee4 &lt;+4&gt;: mov $0x402400,%esi 0x0000000000400ee9 &lt;+9&gt;: callq 0x401338 &lt;strings_not_equal&gt; 0x0000000000400eee &lt;+14&gt;: test %eax,%eax 0x0000000000400ef0 &lt;+16&gt;: je 0x400ef7 &lt;phase_1+23&gt; 0x0000000000400ef2 &lt;+18&gt;: callq 0x40143a &lt;explode_bomb&gt; 0x0000000000400ef7 &lt;+23&gt;: add $0x8,%rsp 0x0000000000400efb &lt;+27&gt;: retq End of assembler dump. 3ï¼šå°†æ ˆæŒ‡é’ˆrspå‡å» 8 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯ç”³è¯· 8 ä¸ªå­—èŠ‚çš„æ ˆç©ºé—´ 4ï¼šå°†ä¸€ä¸ªç«‹å³æ•°å­˜åˆ°å¯„å­˜å™¨esiä¸­ 5ï¼šè°ƒç”¨å‡½æ•°strings_not_equalï¼Œè¯¥å‡½æ•°ç¬¬ä¸€æ¡è¯­å¥çš„åœ°å€ä¸º0x401338ã€‚callqæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹å¯å‚è€ƒä¹¦æœ¬ CSAPPï¼ˆCï¼šP166ï¼ŒOï¼šP278ï¼‰ 6ï¼šä½¿ç”¨testå‘½ä»¤ï¼ˆåŒandå‘½ä»¤ï¼Œä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„å€¼ï¼‰æ¥æµ‹è¯•eaxä¸­çš„å€¼æ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸º0åˆ™è·³è¿‡å¼•çˆ†ç‚¸å¼¹çš„å‡½æ•° 7ï¼šè¿™ä¸€å¥å’Œä¸Šä¸€å¥æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå¦‚æœeax==0,å°±è·³è½¬åˆ°0x400ef7ï¼Œè¿™ä¸ªåœ°å€ä¹Ÿå°±æ˜¯ç¬¬ 9 è¡Œçš„åœ°å€ï¼ŒæˆåŠŸè·³è¿‡äº†å¼•çˆ†ç‚¸å¼¹å‡½æ•°ã€‚æ„æ€å°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„æŸä¸ªå­—ç¬¦ä¸²æˆåŠŸåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯strings_not_equalå‡½æ•°è¿”å›å€¼ä¸º 0ã€‚ 8ï¼šè°ƒç”¨å‡½æ•°explode_bombï¼Œå¼•çˆ†ç‚¸å¼¹ 9ï¼šå°†æ ˆæŒ‡é’ˆrspåŠ ä¸Š 8 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯æ¢å¤ 8 ä¸ªå­—èŠ‚çš„æ ˆç©ºé—´ 123456789101112131415161718192021222324252627282930313233343536373839404142(gdb) disas strings_not_equal Dump of assembler code for function strings_not_equal:=&gt; 0x0000000000401338 &lt;+0&gt;: push %r12 0x000000000040133a &lt;+2&gt;: push %rbp 0x000000000040133b &lt;+3&gt;: push %rbx 0x000000000040133c &lt;+4&gt;: mov %rdi,%rbx 0x000000000040133f &lt;+7&gt;: mov %rsi,%rbp 0x0000000000401342 &lt;+10&gt;: callq 0x40131b &lt;string_length&gt; 0x0000000000401347 &lt;+15&gt;: mov %eax,%r12d 0x000000000040134a &lt;+18&gt;: mov %rbp,%rdi 0x000000000040134d &lt;+21&gt;: callq 0x40131b &lt;string_length&gt; 0x0000000000401352 &lt;+26&gt;: mov $0x1,%edx 0x0000000000401357 &lt;+31&gt;: cmp %eax,%r12d 0x000000000040135a &lt;+34&gt;: jne 0x40139b &lt;strings_not_equal+99&gt; 0x000000000040135c &lt;+36&gt;: movzbl (%rbx),%eax 0x000000000040135f &lt;+39&gt;: test %al,%al 0x0000000000401361 &lt;+41&gt;: je 0x401388 &lt;strings_not_equal+80&gt; 0x0000000000401363 &lt;+43&gt;: cmp 0x0(%rbp),%al 0x0000000000401366 &lt;+46&gt;: je 0x401372 &lt;strings_not_equal+58&gt; 0x0000000000401368 &lt;+48&gt;: jmp 0x40138f &lt;strings_not_equal+87&gt; 0x000000000040136a &lt;+50&gt;: cmp 0x0(%rbp),%al 0x000000000040136d &lt;+53&gt;: nopl (%rax) 0x0000000000401370 &lt;+56&gt;: jne 0x401396 &lt;strings_not_equal+94&gt; 0x0000000000401372 &lt;+58&gt;: add $0x1,%rbx 0x0000000000401376 &lt;+62&gt;: add $0x1,%rbp 0x000000000040137a &lt;+66&gt;: movzbl (%rbx),%eax 0x000000000040137d &lt;+69&gt;: test %al,%al 0x000000000040137f &lt;+71&gt;: jne 0x40136a &lt;strings_not_equal+50&gt; 0x0000000000401381 &lt;+73&gt;: mov $0x0,%edx 0x0000000000401386 &lt;+78&gt;: jmp 0x40139b &lt;strings_not_equal+99&gt; 0x0000000000401388 &lt;+80&gt;: mov $0x0,%edx 0x000000000040138d &lt;+85&gt;: jmp 0x40139b &lt;strings_not_equal+99&gt; 0x000000000040138f &lt;+87&gt;: mov $0x1,%edx 0x0000000000401394 &lt;+92&gt;: jmp 0x40139b &lt;strings_not_equal+99&gt; 0x0000000000401396 &lt;+94&gt;: mov $0x1,%edx 0x000000000040139b &lt;+99&gt;: mov %edx,%eax 0x000000000040139d &lt;+101&gt;: pop %rbx 0x000000000040139e &lt;+102&gt;: pop %rbp 0x000000000040139f &lt;+103&gt;: pop %r12 0x00000000004013a1 &lt;+105&gt;: retq End of assembler dump. 3-5ï¼šåœ¨å‡½æ•°è°ƒç”¨æ—¶å…ˆä¿å­˜ç›¸å…³å¯„å­˜å™¨å€¼ï¼Œrbpå’Œrbxå°±æ˜¯ç”¨æ¥ä¿å­˜ä¸¤ä¸ªå‚æ•°çš„å¯„å­˜å™¨ 6ï¼šå°†å¯„å­˜å™¨rdiçš„å€¼å¤åˆ¶åˆ°å¯„å­˜å™¨rbp 7ï¼šå°†å¯„å­˜å™¨rsiçš„å€¼å¤åˆ¶åˆ°å¯„å­˜å™¨rbx å…¶å®çœ‹åˆ°è¿™é‡Œå°±ä¸€ç›´èƒ½å¤ŸçŒœåˆ°ç­”æ¡ˆæ˜¯ä»€ä¹ˆäº†ã€‚æˆ‘ä»¬é€šè¿‡ä¹‹å‰çš„phase_1å‡½æ•°èƒ½å¤Ÿå¤§æ¦‚çŸ¥é“éœ€è¦è¾“å…¥ä¸€ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ¯”è¾ƒæ­£ç¡®å°±èƒ½è§£é™¤ç‚¸å¼¹ã€‚ç°åœ¨æˆ‘ä»¬åˆè¿›å…¥åˆ°äº†è¿™ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œæ¯”è¾ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¿å­˜åœ¨ä¸¤ä¸ªå¯„å­˜å™¨é‡Œã€‚æˆ‘ä»¬æ­£å¸¸çš„æ€ç»´å¦‚æœå†™ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œè‚¯å®šä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¾“å…¥çš„å€¼ï¼Œä¸€ä¸ªå‚æ•°æ˜¯æ­£ç¡®çš„å€¼ã€‚ è¿™é‡Œçœ‹åˆ°äº†rsiå¯„å­˜å™¨ï¼Œæˆ‘ä»¬è¿˜è®°å¾—åœ¨phase_1å‡½æ•°ä¸­ç¬¬ 4 è¡Œçš„esiå¯„å­˜å™¨å—ï¼Ÿè¿™ä¸¤ä¸ªå¯„å­˜å™¨æ˜¯åŒä¸€ä¸ªå¯„å­˜å™¨ï¼Œåªä¸è¿‡esiæ˜¯å¯„å­˜å™¨çš„ä½ 32 ä½ï¼Œæ—¢ç„¶esiå·²ç»èµ‹å€¼äº†ï¼Œé‚£å‰©ä¸‹çš„ä¸€ä¸ªå‚æ•°ä¿å­˜æˆ‘ä»¬è¾“å…¥çš„å†…å®¹ã€‚æ‰€ä»¥esiå†…å­˜çš„å†…å®¹å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ­£ç¡®ç­”æ¡ˆã€‚æˆ‘ä»¬åªè¦æŠŠå¯„å­˜å™¨esiä¸­çš„å€¼æ‰“å°å‡ºæ¥ï¼Œæˆ–è€…å†…å­˜åœ°å€ä¸º0x402400çš„å†…å®¹æ‰“å°å‡ºæ¥å³å¯ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰æ¡å‘½ä»¤æŸ¥çœ‹ã€‚ 123456(gdb) p (char*)($esi)$5 = 0x402400 &quot;Border relations with Canada have never been better.&quot;(gdb) x/s 0x4024000x402400: &quot;Border relations with Canada have never been better.&quot;(gdb) x/s $esi0x402400: &quot;Border relations with Canada have never been better.&quot; å°†ç­”æ¡ˆå¤åˆ¶ï¼Œç„¶åç»§ç»­è¿è¡Œ 123456789101112131415The program being debugged has been started already.Start it from the beginning? (y or n) yStarting program: /home/dominic/learning-linux/bomb/bomb Welcome to my fiendish little bomb. You have 6 phases withwhich to blow yourself up. Have a nice day!Border relations with Canada have never been better.Breakpoint 2, 0x0000000000400ee0 in phase_1 ()(gdb) sSingle stepping until exit from function phase_1,which has no line number information.main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at bomb.c:7575 phase_defused(); /* Drat! They figured it out!(gdb) s77 printf(&quot;Phase 1 defused. How about the next one?\\n&quot;); ä» 13 è¡Œphase_defused()å¯ä»¥çŸ¥é“æˆ‘ä»¬å·²ç»è§£é™¤äº†ç‚¸å¼¹ï¼Œä» 15 è¡Œprintfå‡½æ•°ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œéœ€è¦è¿›è¡Œä¸‹ä¸€ä¸ªç‚¸å¼¹çš„æ‹†é™¤ã€‚è¿‡æ¥äººçš„å»ºè®®ï¼Œåœ¨è¿™é‡Œå°±å¼€å§‹åˆ†æphase_2ï¼Œå¯»æ‰¾ç­”æ¡ˆï¼Œå› ä¸ºç»§ç»­æ‰§è¡Œå°±è¦å¼€å§‹è¾“å…¥å†…å®¹äº†ï¼Œå°†æ— æ³•è°ƒè¯•ã€‚ phase_2ç»§ç»­åˆ†æç¬¬äºŒä¸ªç‚¸å¼¹ï¼Œ 12345678910111213141516171819202122232425262728(gdb) disas phase_2Dump of assembler code for function phase_2: 0x0000000000400efc &lt;+0&gt;: push %rbp 0x0000000000400efd &lt;+1&gt;: push %rbx 0x0000000000400efe &lt;+2&gt;: sub $0x28,%rsp 0x0000000000400f02 &lt;+6&gt;: mov %rsp,%rsi 0x0000000000400f05 &lt;+9&gt;: callq 0x40145c &lt;read_six_numbers&gt; 0x0000000000400f0a &lt;+14&gt;: cmpl $0x1,(%rsp) 0x0000000000400f0e &lt;+18&gt;: je 0x400f30 &lt;phase_2+52&gt; 0x0000000000400f10 &lt;+20&gt;: callq 0x40143a &lt;explode_bomb&gt; 0x0000000000400f15 &lt;+25&gt;: jmp 0x400f30 &lt;phase_2+52&gt; 0x0000000000400f17 &lt;+27&gt;: mov -0x4(%rbx),%eax 0x0000000000400f1a &lt;+30&gt;: add %eax,%eax 0x0000000000400f1c &lt;+32&gt;: cmp %eax,(%rbx) 0x0000000000400f1e &lt;+34&gt;: je 0x400f25 &lt;phase_2+41&gt; 0x0000000000400f20 &lt;+36&gt;: callq 0x40143a &lt;explode_bomb&gt; 0x0000000000400f25 &lt;+41&gt;: add $0x4,%rbx 0x0000000000400f29 &lt;+45&gt;: cmp %rbp,%rbx 0x0000000000400f2c &lt;+48&gt;: jne 0x400f17 &lt;phase_2+27&gt; 0x0000000000400f2e &lt;+50&gt;: jmp 0x400f3c &lt;phase_2+64&gt; 0x0000000000400f30 &lt;+52&gt;: lea 0x4(%rsp),%rbx 0x0000000000400f35 &lt;+57&gt;: lea 0x18(%rsp),%rbp 0x0000000000400f3a &lt;+62&gt;: jmp 0x400f17 &lt;phase_2+27&gt; 0x0000000000400f3c &lt;+64&gt;: add $0x28,%rsp 0x0000000000400f40 &lt;+68&gt;: pop %rbx 0x0000000000400f41 &lt;+69&gt;: pop %rbp 0x0000000000400f42 &lt;+70&gt;: retq End of assembler dump. 3-6ï¼šä¿å­˜ç¨‹åºå…¥å£åœ°å€ï¼Œå˜é‡ç­‰å†…å®¹ï¼Œå°±ä¸å†èµ˜è¿°äº† 7: è°ƒç”¨read_six_numberså‡½æ•°ï¼Œæ ¹æ®å‡½æ•°åæˆ‘ä»¬å¯ä»¥çŒœæµ‹è¿™ä¸ªå‡½æ•°éœ€è¦è¯»å…¥å…­ä¸ªæ•°å­— 8-9ï¼šæ¯”è¾ƒå¯„å­˜å™¨rspå­˜çš„ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯å¦ç­‰äº0x1ï¼Œå¦‚æœç­‰äºå°±è·³è½¬åˆ°phase_2+52å¤„ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœä¸ç­‰äºå°±æ‰§è¡Œexplode_bombã€‚æ ˆä¸­ä¿å­˜äº†å…­ä¸ªè¾“å…¥çš„æ•°å­—ï¼Œä¿å­˜é¡ºåºæ˜¯ä»å³å¾€å·¦ï¼Œå‡å¦‚è¾“å…¥1,2,3,4,5,6ã€‚é‚£ä¹ˆå…¥æ ˆçš„é¡ºåºå°±æ˜¯6,5,4,3,2,1ï¼Œå¯„å­˜å™¨rspæŒ‡å‘æ ˆé¡¶ï¼Œä¹Ÿå°±æ˜¯æ•°å­—1çš„åœ°å€ã€‚ 21:å‡è®¾ç¬¬ä¸€ä¸ªæ•°å­—æ­£ç¡®ï¼Œæˆ‘ä»¬è·³è½¬åˆ°&lt;+52&gt;ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ç¬¬ 21 è¡Œï¼Œå°†rsp+0x4å†™å…¥å¯„å­˜å™¨rbxï¼Œæ ˆæŒ‡é’ˆå‘ä¸Šç§»åŠ¨å››ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯å–ç¬¬äºŒä¸ªè¾“å…¥çš„å‚æ•°ï¼Œå°†å®ƒèµ‹ç»™å¯„å­˜å™¨rbx 22ï¼šå°†rsp+0x18å†™å…¥å¯„å­˜å™¨rbpï¼Œåå…­è¿›åˆ¶0x18=24ï¼Œ4 ä¸ªå­—èŠ‚ä¸€ä¸ªæ•°ï¼Œåˆšå¥½ 6 ä¸ªæ•°ï¼Œå°±æ˜¯å°†è¾“å…¥å‚æ•°çš„æœ€åä¸€ä¸ªä½ç½®èµ‹ç»™å¯„å­˜å™¨rbp 23ï¼šè·³åˆ°phase_2+27ç»§ç»­æ‰§è¡Œ 12ï¼šrbx-0x4èµ‹ç»™å¯„å­˜å™¨eaxã€‚ç¬¬ 21 è¡Œæˆ‘ä»¬çŸ¥é“ï¼Œrbxæ­¤æ—¶å·²ç»åˆ°ç¬¬äºŒä¸ªå‚æ•°äº†ï¼Œè¿™ä¸€å¥å°±æ˜¯è¯´æŠŠç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼å†™å…¥å¯„å­˜å™¨eax 13ï¼šå°†eaxç¿»ä¸€å€ï¼Œç¬¬ 8 è¡ŒçŸ¥é“ç¬¬ä¸€ä¸ªå‚æ•°å€¼ä¸º1ï¼Œæ‰€ä»¥æ­¤æ—¶eaxå€¼ä¸º2 14-15ï¼šæ¯”è¾ƒeaxæ˜¯å¦ç­‰äºrbxã€‚rbxæ­¤æ—¶ä¿å­˜çš„æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯æ¯”è¾ƒç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦ç­‰äº2ã€‚å¦‚æœç­‰äºè·³è½¬åˆ°phase_2+41ä½ç½®ï¼Œå¦‚æœä¸ç­‰äºå°±è°ƒç”¨çˆ†ç‚¸å‡½æ•° 17-18ï¼šå‡è®¾ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ 2ï¼Œæˆ‘ä»¬è·³è¿‡äº†ç‚¸å¼¹æ¥åˆ°ç¬¬ 17 è¡Œï¼Œå°†rbxç»§ç»­ä¸Šç§»ï¼Œç„¶åæ¯”è¾ƒrbpæ˜¯å¦ç­‰äºrbxï¼Œæˆ‘ä»¬çŸ¥é“rbpä¿å­˜äº†æœ€åä¸€ä¸ªå‚æ•°çš„åœ°å€ï¼Œæ‰€ä»¥è¿™é‡Œçš„æ„æ€å°±æ˜¯çœ‹çœ‹å‚æ•°æœ‰æ²¡æœ‰åˆ°æœ€åä¸€ä¸ªå‚æ•°ã€‚ 19ï¼šå¦‚æœrbx&lt;rbpï¼Œæ„æ€å°±æ˜¯è¿˜æ²¡åˆ°æœ€åä¸€ä¸ªå‚æ•°ï¼Œå°±è·³è½¬åˆ°phase_2+27 12ï¼šå†æ¬¡å›åˆ°ç¬¬ 12 è¡Œï¼Œè¿™é‡Œå°±æ˜¯ç›¸å½“äºä¸€ä¸ªå¾ªç¯äº†ï¼Œè®©rbxä¸€ç›´å‘ä¸Šç§»åŠ¨ï¼Œåˆ†åˆ«å­˜å…¥ç¬¬ 2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6 ä¸ªå‚æ•°ï¼Œåœ¨ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå‚æ•°æ—¶å…ˆä¿å­˜å½“å‰å‚æ•°åˆ°å¯„å­˜å™¨eaxè®©å…¶ç¿»ä¸€å€ï¼Œç„¶årbxå†ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå‚æ•°ï¼Œæ¯”è¾ƒeax==rbxã€‚ç›´åˆ°rbxè¶Šè¿‡äº†rbpã€‚ç¨‹åºè·³è½¬åˆ°phase_2+64ï¼Œå°†æ ˆç©ºé—´æ¢å¤ã€‚ ä»¥ä¸Šåˆ†æä¹Ÿå¯ä»¥å¾—å‡ºç­”æ¡ˆäº†ï¼Œæˆ‘ä»¬åªè¦è¾“å…¥ä¸€ä¸ªä»¥1ä¸ºåˆå€¼ï¼Œå…¬æ¯”ä¸º2ï¼Œä¸ªæ•°ä¸º6çš„ç­‰æ¯”æ•°åˆ—å°±æ˜¯ç­”æ¡ˆï¼Œä¹Ÿå°±æ˜¯1 2 4 8 16 32ã€‚ 123456789101112(gdb) cContinuing.Phase 1 defused. How about the next one?1 2 4 8 16 32Breakpoint 6, 0x00000000004015c4 in phase_defused ()(gdb) sSingle stepping until exit from function phase_defused,which has no line number information.main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at bomb.c:8484 printf(&quot;That&#x27;s number 2. Keep going!\\n&quot;);(gdb) s è¿™ä¸ªç‚¸å¼¹çš„ä½œè€…åº”è¯¥å†å¿ƒç‹ æ‰‹è¾£ä¸€ç‚¹ï¼ŒæŠŠå‡½æ•°åæ¢æˆread_some_numbersï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¾—ä¸çœ‹è¿™ä¸ªå‡½æ•°çš„å†…å®¹äº†ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°é‡Œè¿˜æœ‰ä¸€ä¸ªå‘ï¼Œè¿™ä¸ªå‘åœ¨å‡½æ•°åå­—ä¸Šä¸€å¥è¢«å¡«äº†ã€‚é‚£å°±æ˜¯è¿™ä¸ªå‡½æ•°ä¼šå¯¹å‚æ•°ä¸ªæ•°åšåˆ¤æ–­ï¼Œå¦‚æœå°äº 5 å°±çˆ†ç‚¸ã€‚ 1234567891011121314151617181920(gdb) disas read_six_numbersDump of assembler code for function read_six_numbers: 0x000000000040145c &lt;+0&gt;: sub $0x18,%rsp 0x0000000000401460 &lt;+4&gt;: mov %rsi,%rdx 0x0000000000401463 &lt;+7&gt;: lea 0x4(%rsi),%rcx 0x0000000000401467 &lt;+11&gt;: lea 0x14(%rsi),%rax 0x000000000040146b &lt;+15&gt;: mov %rax,0x8(%rsp) 0x0000000000401470 &lt;+20&gt;: lea 0x10(%rsi),%rax 0x0000000000401474 &lt;+24&gt;: mov %rax,(%rsp) 0x0000000000401478 &lt;+28&gt;: lea 0xc(%rsi),%r9 0x000000000040147c &lt;+32&gt;: lea 0x8(%rsi),%r8 0x0000000000401480 &lt;+36&gt;: mov $0x4025c3,%esi 0x0000000000401485 &lt;+41&gt;: mov $0x0,%eax 0x000000000040148a &lt;+46&gt;: callq 0x400bf0 &lt;__isoc99_sscanf@plt&gt; 0x000000000040148f &lt;+51&gt;: cmp $0x5,%eax 0x0000000000401492 &lt;+54&gt;: jg 0x401499 &lt;read_six_numbers+61&gt; 0x0000000000401494 &lt;+56&gt;: callq 0x40143a &lt;explode_bomb&gt; 0x0000000000401499 &lt;+61&gt;: add $0x18,%rsp 0x000000000040149d &lt;+65&gt;: retq End of assembler dump. 3ï¼šç”³è¯· 24 ä¸ªå­—èŠ‚æ ˆç©ºé—´ 4ï¼šrdx=rsiï¼Œå°†è¾“å…¥å‚æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ”¾åˆ°å¯„å­˜å™¨rdxä¸­ï¼Œä¸ºå•¥æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå› ä¸ºrsiç°åœ¨ä¿å­˜çš„åœ°å€æ˜¯æ ˆé¡¶ä½ç½®ï¼Œæ ˆé¡¶ç›®å‰ä¿å­˜å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ 5ï¼šrcx = rsi + 4ï¼ŒæŠŠç¬¬äºŒä¸ªå‚æ•°çš„åœ°å€ä¼ ç»™å¯„å­˜å™¨rcx 6ï¼šrax = rsi + 20ï¼ŒæŠŠç¬¬å…­ä¸ªå‚æ•°çš„åœ°å€ä¼ ç»™å¯„å­˜å™¨rax 7ï¼šrsp + 8 = raxç¬¬å…«ä¸ªå‚æ•° 8ï¼šrax = rsi + 16ï¼ŒæŠŠç¬¬äº”ä¸ªå‚æ•°ä¼ ç»™ 9ï¼šrsp = raxç¬¬ä¸ƒä¸ªå‚æ•° 10ï¼šr9 = rsi + 12æŠŠç¬¬å››ä¸ªå‚æ•°ä¼ ç»™å¯„å­˜å™¨r9 11ï¼šr8 = rsi + 8æŠŠç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ç»™å¯„å­˜å™¨r8 12ï¼š 13ï¼šeax = 0 14ï¼šè°ƒç”¨è¾“å…¥å‡½æ•°sscanf 15-17ï¼šå‡½æ•°è¿”å›å€¼ä¸ªæ•°ä¸ 5 æ¯”è¾ƒï¼Œå¦‚æœå°äº 5 å°±çˆ†ç‚¸ï¼Œå¦åˆ™è¿”å› phase_3123456789101112131415161718192021222324252627282930313233343536370x0000000000400f43 &lt;+0&gt;: sub $0x18,%rsp0x0000000000400f47 &lt;+4&gt;: lea 0xc(%rsp),%rcx0x0000000000400f4c &lt;+9&gt;: lea 0x8(%rsp),%rdx0x0000000000400f51 &lt;+14&gt;: mov $0x4025cf,%esi0x0000000000400f56 &lt;+19&gt;: mov $0x0,%eax0x0000000000400f5b &lt;+24&gt;: callq 0x400bf0 &lt;__isoc99_sscanf@plt&gt;0x0000000000400f60 &lt;+29&gt;: cmp $0x1,%eax0x0000000000400f63 &lt;+32&gt;: jg 0x400f6a &lt;phase_3+39&gt;0x0000000000400f65 &lt;+34&gt;: callq 0x40143a &lt;explode_bomb&gt;0x0000000000400f6a &lt;+39&gt;: cmpl $0x7,0x8(%rsp)0x0000000000400f6f &lt;+44&gt;: ja 0x400fad &lt;phase_3+106&gt;0x0000000000400f71 &lt;+46&gt;: mov 0x8(%rsp),%eax0x0000000000400f75 &lt;+50&gt;: jmpq *0x402470(,%rax,8)0x0000000000400f7c &lt;+57&gt;: mov $0xcf,%eax0x0000000000400f81 &lt;+62&gt;: jmp 0x400fbe &lt;phase_3+123&gt;0x0000000000400f83 &lt;+64&gt;: mov $0x2c3,%eax0x0000000000400f88 &lt;+69&gt;: jmp 0x400fbe &lt;phase_3+123&gt;0x0000000000400f8a &lt;+71&gt;: mov $0x100,%eax0x0000000000400f8f &lt;+76&gt;: jmp 0x400fbe &lt;phase_3+123&gt;0x0000000000400f91 &lt;+78&gt;: mov $0x185,%eax0x0000000000400f96 &lt;+83&gt;: jmp 0x400fbe &lt;phase_3+123&gt;0x0000000000400f98 &lt;+85&gt;: mov $0xce,%eax0x0000000000400f9d &lt;+90&gt;: jmp 0x400fbe &lt;phase_3+123&gt;0x0000000000400f9f &lt;+92&gt;: mov $0x2aa,%eax0x0000000000400fa4 &lt;+97&gt;: jmp 0x400fbe &lt;phase_3+123&gt;0x0000000000400fa6 &lt;+99&gt;: mov $0x147,%eax0x0000000000400fab &lt;+104&gt;: jmp 0x400fbe &lt;phase_3+123&gt;0x0000000000400fad &lt;+106&gt;: callq 0x40143a &lt;explode_bomb&gt;0x0000000000400fb2 &lt;+111&gt;: mov $0x0,%eax0x0000000000400fb7 &lt;+116&gt;: jmp 0x400fbe &lt;phase_3+123&gt;0x0000000000400fb9 &lt;+118&gt;: mov $0x137,%eax0x0000000000400fbe &lt;+123&gt;: cmp 0xc(%rsp),%eax0x0000000000400fc2 &lt;+127&gt;: je 0x400fc9 &lt;phase_3+134&gt;0x0000000000400fc4 &lt;+129&gt;: callq 0x40143a &lt;explode_bomb&gt;0x0000000000400fc9 &lt;+134&gt;: add $0x18,%rsp0x0000000000400fcd &lt;+138&gt;: retq 1ï¼šå¼€è¾Ÿ 24 å­—èŠ‚çš„æ ˆç©ºé—´ 2ï¼šrcx = rsp + 12ç¬¬äºŒä¸ªå‚æ•° 3ï¼šrdx = rsp + 8ç¬¬ä¸€ä¸ªå‚æ•° 4-8ï¼šå’Œphase_2é‡Œread_six_numberså‡½æ•°ä¸­çš„ç¬¬ 13 è¡Œå¼€å§‹ä¸€æ ·ï¼Œè¾“å…¥æ•°æ®ï¼Œåˆ¤æ–­ä¸€ä¸‹è¾“å…¥å‚æ•°çš„ä¸ªæ•°ï¼Œåªä¸è¿‡è¿™é‡Œæ˜¯è¿”å›å€¼ä¸ªæ•°å¤§äº 1ï¼Œå¦‚æœå‚æ•°ä¸ªæ•°æ­£ç¡®å°±è·³åˆ°phase_3+39ä¹Ÿå°±æ˜¯ç¬¬ 10 è¡Œï¼Œå¦åˆ™å¼•çˆ†ç‚¸å¼¹ã€‚ 10-11ï¼šå¦‚æœ7 &lt; rsp + 8 ç­‰ä»·äº 7 &lt; rdx ç­‰ä»·äº 7 &lt; ç¬¬ä¸€ä¸ªå‚æ•°å°±è·³è½¬åˆ°phase_3+106ï¼Œçˆ†ç‚¸ã€‚è¿™é‡Œç¡®å®šç¬¬ä¸€ä¸ªæ•°å¿…é¡»å°äº 7 12ï¼šeax = rsp + 8 ç­‰ä»·äº eax = ç¬¬ä¸€ä¸ªå‚æ•° 13ï¼šè·³è½¬è‡³0x402470 + 8 * raxå¤„ï¼Œå…·ä½“è·³è½¬åˆ°å“ªé‡Œæ ¹æ®ç¬¬ä¸€ä¸ªå€¼åšåˆ¤æ–­ 14ï¼šeax = 207 15ï¼šè·³è½¬è‡³phase_3+123,å³ 32 è¡Œ 16ï¼šeax = 707 17ï¼šè·³è½¬åˆ° 32 è¡Œ 18ï¼šeax = 256 19ï¼šè·³è½¬åˆ° 32 è¡Œ 20ï¼šeax = 389 21-27ï¼šä»¥æ­¤ç±»æ¨ 29ï¼šeax = 0 30ï¼š 31ï¼šeax = 311 32-34ï¼šæ¯”è¾ƒeaxå’Œrsp + 12 ç­‰ä»·äº æ¯”è¾ƒ ç¬¬äºŒä¸ªå‚æ•°å’Œeaxã€‚å¦‚æœç›¸ç­‰å°±è¿”å›ï¼Œå¦‚æœä¸ç­‰å°±å¼•çˆ†ã€‚ åˆ†æè‡³æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå°±çŸ¥é“äº†ç¨‹åºçš„å¤§æ¦‚æµç¨‹ï¼Œè¾“å…¥ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªå€¼å¿…é¡»å°äºç­‰äº 7ï¼Œç¬¬äºŒä¸ªå€¼æ ¹æ®ç¬¬ä¸€ä¸ªå€¼æ¥ç¡®å®šï¼Œå…·ä½“ç­‰äºå¤šå°‘ï¼Œæ ¹æ®è·³è½¬è¡¨ç¡®å®šï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå€¼æœ‰å…«ä¸ªæ•°ï¼Œä¹Ÿå°±å¯¹åº”ç€æ±‡ç¼–ä¸­å…«æ®µå¯„å­˜å™¨eaxèµ‹å€¼çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬åªè¦è¾“å…¥ç¬¬ä¸€ä¸ªåˆæ³•çš„æ•°å€¼ï¼Œç„¶åå†æ‰“å°å‡ºå¯„å­˜å™¨eaxçš„å€¼ï¼Œå³å¯ç¡®å®šç­”æ¡ˆã€‚ æ¯”å¦‚æˆ‘ä»¬å…ˆæµ‹è¯•ä¸€ä¸‹ç¬¬ä¸€ä¸ªå€¼ä¸º 0 æ—¶ï¼Œå¯¹åº”çš„ç¬¬äºŒä¸ªå€¼ä¸ºå¤šå°‘ï¼Œæˆ‘ä»¬è¾“å…¥0 10ï¼Œå› ä¸ºåªæ˜¯æµ‹è¯•ï¼Œç¬¬äºŒä¸ªå€¼ä»»æ„ã€‚ 12345678910111213That&#x27;s number 2. Keep going! //æ¥ä¸Šä¸ªç‚¸å¼¹åé¢88 input = read_line();(gdb) n0 10 //è¾“å…¥æµ‹è¯•ç­”æ¡ˆ89 phase_3(input);(gdb) nBreakpoint 4, 0x0000000000400f43 in phase_3 ()(gdb) nSingle stepping until exit from function phase_3,which has no line number information.Breakpoint 2, 0x000000000040143a in explode_bomb ()(gdb) p $eax$14 = 207 //207å³æ˜¯ç­”æ¡ˆ è¾“å…¥çœŸæ­£ç­”æ¡ˆæµ‹è¯•ï¼Œ 123456789101112(gdb) n0 207 //è¾“å…¥ç­”æ¡ˆ89 phase_3(input);(gdb) nBreakpoint 4, 0x0000000000400f43 in phase_3 ()(gdb) nSingle stepping until exit from function phase_3,which has no line number information.main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at bomb.c:9090 phase_defused(); //ç‚¸å¼¹æ‹†é™¤(gdb) 91 printf(&quot;Halfway there!\\n&quot;); æˆ‘ä»¬ä¸Šé¢è¯´è¿‡ï¼Œç¬¬ä¸€ä¸ªå€¼æœ‰å…«ç§å¯èƒ½ï¼Œæ‰€ä»¥è¿™é¢˜ç­”æ¡ˆä¹Ÿæœ‰å…«ä¸ªï¼Œæˆ‘ä»¬åªè¦æŒ¨ä¸ªæµ‹è¯•0-7ï¼Œåˆ†åˆ«æ‰“å°å‡ºå¯„å­˜å™¨eaxçš„å€¼å°±å¯ä»¥å¾—åˆ°æ‰€æœ‰ç­”æ¡ˆã€‚ä»–ä»¬åˆ†åˆ«æ˜¯ 123456780 2071 3112 7073 2564 3895 2066 6827 327 phase_4è¡Œç™¾é‡Œè€…åŠä¹åï¼ŒNO 123456789101112131415161718192021222324(gdb) disas phase_4Dump of assembler code for function phase_4: 0x000000000040100c &lt;+0&gt;: sub $0x18,%rsp 0x0000000000401010 &lt;+4&gt;: lea 0xc(%rsp),%rcx 0x0000000000401015 &lt;+9&gt;: lea 0x8(%rsp),%rdx 0x000000000040101a &lt;+14&gt;: mov $0x4025cf,%esi 0x000000000040101f &lt;+19&gt;: mov $0x0,%eax 0x0000000000401024 &lt;+24&gt;: callq 0x400bf0 &lt;__isoc99_sscanf@plt&gt; 0x0000000000401029 &lt;+29&gt;: cmp $0x2,%eax 0x000000000040102c &lt;+32&gt;: jne 0x401035 &lt;phase_4+41&gt; 0x000000000040102e &lt;+34&gt;: cmpl $0xe,0x8(%rsp) 0x0000000000401033 &lt;+39&gt;: jbe 0x40103a &lt;phase_4+46&gt; 0x0000000000401035 &lt;+41&gt;: callq 0x40143a &lt;explode_bomb&gt; 0x000000000040103a &lt;+46&gt;: mov $0xe,%edx 0x000000000040103f &lt;+51&gt;: mov $0x0,%esi 0x0000000000401044 &lt;+56&gt;: mov 0x8(%rsp),%edi 0x0000000000401048 &lt;+60&gt;: callq 0x400fce &lt;func4&gt; 0x000000000040104d &lt;+65&gt;: test %eax,%eax 0x000000000040104f &lt;+67&gt;: jne 0x401058 &lt;phase_4+76&gt; 0x0000000000401051 &lt;+69&gt;: cmpl $0x0,0xc(%rsp) 0x0000000000401056 &lt;+74&gt;: je 0x40105d &lt;phase_4+81&gt; 0x0000000000401058 &lt;+76&gt;: callq 0x40143a &lt;explode_bomb&gt; 0x000000000040105d &lt;+81&gt;: add $0x18,%rsp 0x0000000000401061 &lt;+85&gt;: retq 1-8ï¼šå¼€è¾Ÿç©ºé—´ï¼Œä¿å­˜å‚æ•°ä¿¡æ¯ï¼Œè°ƒç”¨è¾“å…¥å‡½æ•°ï¼Œå’Œä¸Šé¢çš„åˆ†æé‡å¤ï¼Œä¸å†èµ˜è¿°ã€‚æ³¨æ„çš„æ˜¯ç¬¬ 6 è¡Œï¼Œx/s 0x4025cfå¯çŸ¥ä¸¤ä¸ªå‚æ•°æ˜¯æ•´å‹æ•°å€¼ã€‚ 9-10ï¼šå‚æ•°ä¸ªæ•°å¿…é¡»ç­‰äº 2ï¼Œå¦åˆ™å¼•çˆ† 11-12ï¼š14ä¸rsp + 8æ¯”è¾ƒï¼Œç­‰ä»·äº14ä¸ç¬¬ä¸€ä¸ªå‚æ•°æ¯”è¾ƒã€‚è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»å°äºç­‰äº 14ï¼Œå¦åˆ™å¼•çˆ†ã€‚ 14ï¼šedx = 14 15ï¼šesi = 0 16ï¼šedi = rsp + 8å³edi = ç¬¬ä¸€ä¸ªå‚æ•° 17ï¼šè°ƒç”¨å‡½æ•°fun4ï¼Œå‚æ•°åˆ†åˆ«ä¸ºedi 0 14 18ï¼šæµ‹è¯•è¿”å›å€¼æ˜¯å¦ä¸º 0ï¼Œå¦‚æœä¸ä¸º 0ï¼Œå¼•çˆ† 20-22ï¼šæ¯”è¾ƒ0å’Œrsp + 12ï¼Œå¦‚æœä¸ç­‰ï¼Œå¼•çˆ†ï¼Œå¦åˆ™è¿”å› 123456789101112131415161718192021222324(gdb) disas func4Dump of assembler code for function func4: 0x0000000000400fce &lt;+0&gt;: sub $0x8,%rsp 0x0000000000400fd2 &lt;+4&gt;: mov %edx,%eax 0x0000000000400fd4 &lt;+6&gt;: sub %esi,%eax 0x0000000000400fd6 &lt;+8&gt;: mov %eax,%ecx 0x0000000000400fd8 &lt;+10&gt;: shr $0x1f,%ecx 0x0000000000400fdb &lt;+13&gt;: add %ecx,%eax 0x0000000000400fdd &lt;+15&gt;: sar %eax 0x0000000000400fdf &lt;+17&gt;: lea (%rax,%rsi,1),%ecx 0x0000000000400fe2 &lt;+20&gt;: cmp %edi,%ecx 0x0000000000400fe4 &lt;+22&gt;: jle 0x400ff2 &lt;func4+36&gt; 0x0000000000400fe6 &lt;+24&gt;: lea -0x1(%rcx),%edx 0x0000000000400fe9 &lt;+27&gt;: callq 0x400fce &lt;func4&gt; 0x0000000000400fee &lt;+32&gt;: add %eax,%eax 0x0000000000400ff0 &lt;+34&gt;: jmp 0x401007 &lt;func4+57&gt; 0x0000000000400ff2 &lt;+36&gt;: mov $0x0,%eax 0x0000000000400ff7 &lt;+41&gt;: cmp %edi,%ecx 0x0000000000400ff9 &lt;+43&gt;: jge 0x401007 &lt;func4+57&gt; 0x0000000000400ffb &lt;+45&gt;: lea 0x1(%rcx),%esi 0x0000000000400ffe &lt;+48&gt;: callq 0x400fce &lt;func4&gt; 0x0000000000401003 &lt;+53&gt;: lea 0x1(%rax,%rax,1),%eax 0x0000000000401007 &lt;+57&gt;: add $0x8,%rsp 0x000000000040100b &lt;+61&gt;: retq 12345678910111213141516171819202122232425262728293031323334func (edi, esi, edx)&#123; // edi = ç¬¬ä¸€ä¸ªå‚æ•°, esi = 0, edx = 14 eax = edx // 4:mov %edx, %eax eax = eax -esi // 5:sub esi, %eax eax = edx -esi ecx = eax // 6:mov %eax, %ecx ecx = edx - esi eÑx = ecx &gt;&gt; 31 // 7:shr $0x1f, %ecx ecx = (edx - esi) &gt;&gt; 31 eax = eax + ecx // 8:add %ecx, %eax eax = (edx - esi) + ((edx - esi) &gt;&gt; 31)//æ›¿æ¢eaxå’Œecx eax = eax &gt; 1; // 9:sar %eax eax = ((edx - esi) +((edx -esi) &gt;&gt; 31)) / 2 ecx = eax + esi * 1 // 10:lea (rax,ersi,1), %ecx ecx = ((edx - esi) +((edx -esi) &gt;&gt; 31)) / 2 + esi * 1 ecx = ((14 - 0) + ((14 - 0) &gt;&gt; 31)) / 2 + 0 ecx = 7 // 11:cmp %edi, %ecx if (ecx &lt;= edi) &#123; // 12:jle 400ff2 eax = 0 // mov $0x0,%eax // 18:cmp %edi, %ecx if(ecx &gt;= edi) &#123; // 19:jge 0x401007 &lt;func4+57&gt; return; //ç”±æ­¤å¯ä»¥å¾—çŸ¥é“ edx == edi &#125; &#125;&#125; phase_51234567891011121314151617181920212223242526272829303132333435363738390x0000000000401062 &lt;+0&gt;: push %rbx0x0000000000401063 &lt;+1&gt;: sub $0x20,%rsp0x0000000000401067 &lt;+5&gt;: mov %rdi,%rbx0x000000000040106a &lt;+8&gt;: mov %fs:0x28,%rax0x0000000000401073 &lt;+17&gt;: mov %rax,0x18(%rsp)0x0000000000401078 &lt;+22&gt;: xor %eax,%eax0x000000000040107a &lt;+24&gt;: callq 0x40131b &lt;string_length&gt;0x000000000040107f &lt;+29&gt;: cmp $0x6,%eax0x0000000000401082 &lt;+32&gt;: je 0x4010d2 &lt;phase_5+112&gt;0x0000000000401084 &lt;+34&gt;: callq 0x40143a &lt;explode_bomb&gt;0x0000000000401089 &lt;+39&gt;: jmp 0x4010d2 &lt;phase_5+112&gt;0x000000000040108b &lt;+41&gt;: movzbl (%rbx,%rax,1),%ecx0x000000000040108f &lt;+45&gt;: mov %cl,(%rsp)0x0000000000401092 &lt;+48&gt;: mov (%rsp),%rdx0x0000000000401096 &lt;+52&gt;: and $0xf,%edx0x0000000000401099 &lt;+55&gt;: movzbl 0x4024b0(%rdx),%edx0x00000000004010a0 &lt;+62&gt;: mov %dl,0x10(%rsp,%rax,1)0x00000000004010a4 &lt;+66&gt;: add $0x1,%rax0x00000000004010a8 &lt;+70&gt;: cmp $0x6,%rax0x00000000004010ac &lt;+74&gt;: jne 0x40108b &lt;phase_5+41&gt;0x00000000004010ae &lt;+76&gt;: movb $0x0,0x16(%rsp)0x00000000004010b3 &lt;+81&gt;: mov $0x40245e,%esi 0x00000000004010b8 &lt;+86&gt;: lea 0x10(%rsp),%rdi0x00000000004010bd &lt;+91&gt;: callq 0x401338 &lt;strings_not_equal&gt;0x00000000004010c2 &lt;+96&gt;: test %eax,%eax0x00000000004010c4 &lt;+98&gt;: je 0x4010d9 &lt;phase_5+119&gt;0x00000000004010c6 &lt;+100&gt;: callq 0x40143a &lt;explode_bomb&gt;0x00000000004010cb &lt;+105&gt;: nopl 0x0(%rax,%rax,1)0x00000000004010d0 &lt;+110&gt;: jmp 0x4010d9 &lt;phase_5+119&gt;0x00000000004010d2 &lt;+112&gt;: mov $0x0,%eax0x00000000004010d7 &lt;+117&gt;: jmp 0x40108b &lt;phase_5+41&gt;0x00000000004010d9 &lt;+119&gt;: mov 0x18(%rsp),%rax0x00000000004010de &lt;+124&gt;: xor %fs:0x28,%rax0x00000000004010e7 &lt;+133&gt;: je 0x4010ee &lt;phase_5+140&gt;0x00000000004010e9 &lt;+135&gt;: callq 0x400b30 &lt;__stack_chk_fail@plt&gt;0x00000000004010ee &lt;+140&gt;: add $0x20,%rsp0x00000000004010f2 &lt;+144&gt;: pop %rbx0x00000000004010f3 &lt;+145&gt;: retq","categories":[{"name":"CSAPP-Lab","slug":"CSAPP-Lab","permalink":"http://example.com/categories/CSAPP-Lab/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"GDB","slug":"GDB","permalink":"http://example.com/tags/GDB/"},{"name":"CSAPP","slug":"CSAPP","permalink":"http://example.com/tags/CSAPP/"}]},{"title":"GDB è°ƒè¯•å…¥é—¨","slug":"GDBè°ƒè¯•å…¥é—¨","date":"2021-08-29T10:40:16.000Z","updated":"2022-10-15T03:14:29.201Z","comments":true,"path":"2021/08/29/GDBè°ƒè¯•å…¥é—¨/","link":"","permalink":"http://example.com/2021/08/29/GDB%E8%B0%83%E8%AF%95%E5%85%A5%E9%97%A8/","excerpt":"","text":"file åŠ è½½ç¨‹åº12(gdb) file bombReading symbols from bomb... set args å¸¦å‚æ•°è°ƒè¯•æœ‰æ—¶å€™ç¨‹åºä¸æ˜¯ç›´æ¥å¯ä»¥è¿è¡Œçš„ï¼Œéœ€è¦åŠ ä¸Šä¸€äº›å¿…è¦çš„å‚æ•°ã€‚å¸¦ä¸Šå‚æ•°è¿è¡Œå¾ˆå®¹æ˜“ï¼Œåªè¦åœ¨ç¨‹åºåååŠ ä¸Šç›¸åº”å‚æ•°å³å¯ï¼Œä½†æ˜¯å¦‚ä½•å¸¦ä¸Šå‚æ•°è¿›è¡Œè°ƒè¯•å‘¢ï¼Ÿè¿™å°±éœ€è¦set argså‘½ä»¤ã€‚ æ¯”å¦‚åœ¨BombLabå®éªŒä¸­ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€æ¬¡è§£å†³æ‰€æœ‰phaseï¼Œä½†æ˜¯æ¯æ¬¡é‡æ–°è°ƒè¯•ï¼Œå·²ç»è§£å†³çš„phaseè¿˜è¦é‡æ–°è¾“å…¥ä¸€æ¬¡ç­”æ¡ˆï¼Œè¿™å°±å¾ˆéº»çƒ¦ï¼Œå¥½åœ¨è¿™ä¸ªå®éªŒçš„ä½œè€…ä¹Ÿè€ƒè™‘åˆ°äº†ï¼Œä»–æ”¯æŒè¯»å–æ–‡æœ¬ã€‚æˆ‘ä»¬å¯ä»¥æŠŠç­”æ¡ˆé¢„å…ˆå†™å…¥ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œç¨‹åºè¯»å–å·²ç»ä¿å­˜çš„ç­”æ¡ˆå³å¯è·³è¿‡ç›¸åº”çš„phaseã€‚ å‡è®¾æˆ‘ä»¬æŠŠç­”æ¡ˆå†™å…¥äº†solutions.txtæ–‡ä»¶ä¸­ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬åŠ è½½ç¨‹åºï¼Œç„¶åé€šè¿‡set args solutions.txtè®¾ç½®è¿è¡Œå‚æ•°ã€‚ 123456789(gdb) file bombReading symbols from bomb...(gdb) set args solutions.txt (gdb) rStarting program: /home/dominic/learning-linux/bomb/bomb solutions.txt Welcome to my fiendish little bomb. You have 6 phases withwhich to blow yourself up. Have a nice day!Phase 1 defused. How about the next one?That&#x27;s number 2. Keep going! list æŸ¥çœ‹æºç æŸ¥çœ‹ 10 è¡Œæºç æ¯æ¡å‘½ä»¤æ˜¾ç¤º 10 è¡Œä»£ç  12345678910111213141516171819202122(gdb) l23 #include &lt;stdio.h&gt;24 #include &lt;stdlib.h&gt;25 #include &quot;support.h&quot;26 #include &quot;phases.h&quot;27 28 /* 29 * Note to self: Remember to erase this file so my victims will have no30 * idea what is going on, and so they will all blow up in a31 * spectaculary fiendish explosion. -- Dr. Evil 32 */(gdb) l33 34 FILE *infile;35 36 int main(int argc, char *argv[])37 &#123;38 char *input;39 40 /* Note to self: remember to port this bomb to Windows and put a 41 * fantastic GUI on it. */42 set list num è®¾ç½®é»˜è®¤æ˜¾ç¤ºä»£ç è¡Œæ•°1(gdb) set list 20 //é»˜è®¤æ˜¾ç¤º20è¡Œä»£ç  list linenumber æŸ¥çœ‹æŒ‡å®šè¡Œä»£ç 12(gdb) l 10 (gdb) l main.h : 10 //æŒ‡å®šmain.cæ–‡ä»¶ä¸­çš„ç¬¬åè¡Œ list function æŸ¥çœ‹æŒ‡å®šå‡½æ•°çš„ä»£ç break æ‰“æ–­ç‚¹break linenum å¯¹æŒ‡å®šè¡Œæ‰“æ–­ç‚¹123(gdb) b 36Note: breakpoint 1 also set at pc 0x400da0.Breakpoint 2 at 0x400da0: file bomb.c, line 37. break function å¯¹æŒ‡å®šå‡½æ•°æ‰“æ–­ç‚¹1234(gdb) b mainBreakpoint 3 at 0x400da0: file bomb.c, line 37.(gdb) b phase_1Breakpoint 4 at 0x400ee0 åˆ é™¤æ–­ç‚¹åŒ…æ‹¬ç¦ç”¨æ–­ç‚¹delete åˆ é™¤æ‰€æœ‰æ–­ç‚¹12(gdb) delete Delete all breakpoints? (y or n) y disable breakpoint ç¦ç”¨æ–­ç‚¹12345678(gdb) info b #å…ˆçœ‹æœ‰å“ªäº›æ–­ç‚¹Num Type Disp Enb Address What3 breakpoint keep y 0x0000000000400da0 in main at bomb.c:374 breakpoint keep y 0x0000000000400ee0 &lt;phase_1&gt;(gdb) d 3 #ç¦ç”¨ç¬¬ä¸‰å·æ–­ç‚¹(gdb) info b #å†æ¬¡æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯å‘ç°å·²ç»æ²¡æœ‰ç¬¬ä¸‰å·æ–­ç‚¹Num Type Disp Enb Address What4 breakpoint keep y 0x0000000000400ee0 &lt;phase_1&gt; clear function åˆ é™¤ä¸€ä¸ªå‡½æ•°ä¸­æ‰€æœ‰çš„æ–­ç‚¹123456(gdb) info bNum Type Disp Enb Address What4 breakpoint keep y 0x0000000000400ee0 &lt;phase_1&gt;(gdb) clear phase_1(gdb) info bDeleted breakpoint 4 No breakpoints or watchpoints. å¯åŠ¨ä¸é€€å‡ºrun å¯åŠ¨ç¨‹åºç›´åˆ°é‡åˆ°æ–­ç‚¹1(gdb) run start å¯åŠ¨ç¨‹åºå¹¶åœ¨ç¬¬ä¸€æ¡ä»£ç å¤„åœä¸‹1(gdb) start x é…ç½® gdb å¸¸ç”¨å‘½ä»¤1gdb -q -x gdbinit 1234567//gdbinitdisplay/z $xsdisplay/z $x6display/z $x7set disassemble-next-line onb _starttarget remote: 34 æœ‰äº†é…ç½®æ–‡ä»¶ï¼Œå°±ä¸ç”¨æ¯æ¬¡å¯åŠ¨ gdb æ—¶éƒ½è¦é‡æ–°è¾“å…¥ä¸€éè°ƒè¯•å‘½ä»¤ã€‚ quit é€€å‡ºè°ƒè¯•1(gdb) quit è°ƒè¯•å‘½ä»¤print æ‰“å°å˜é‡å€¼ æ ¼å¼åŒ–å­—ç¬¦ (/fmt) è¯´æ˜ /x ä»¥åå…­è¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /d ä»¥æœ‰ç¬¦å·ã€åè¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /u ä»¥æ— ç¬¦å·ã€åè¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /o ä»¥å…«è¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /t ä»¥äºŒè¿›åˆ¶çš„å½¢å¼æ‰“å°å‡ºæ•´æ•°ã€‚ /f ä»¥æµ®ç‚¹æ•°çš„å½¢å¼æ‰“å°å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼ã€‚ /c ä»¥å­—ç¬¦å½¢å¼æ‰“å°å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼ã€‚ 1234567(gdb) p i # 10è¿›åˆ¶$5 = 3(gdb) p/x i # 16è¿›åˆ¶$6 = 0x3(gdb) p/o i # 8è¿›åˆ¶$7 = 03 æ‰“å°åœ°å€å€¼è¡¨ç¤ºä»å†…å­˜åœ°å€ 0x54320 è¯»å–å†…å®¹ï¼Œh è¡¨ç¤ºä»¥åŒå­—èŠ‚ä¸ºå•ä½ï¼Œ3 è¡¨ç¤ºè¾“å‡º 3 ä¸ªå•ä½ï¼Œu è¡¨ç¤ºæŒ‰ç…§åå…­è¿›åˆ¶æ˜¾ç¤ºã€‚ 1(gdb) x/3uh 0x54320 æŸ¥çœ‹å½“å‰ç¨‹åºæ ˆçš„å†…å®¹ï¼šx/10x $spâ€“&gt;æ‰“å° stack çš„å‰ 10 ä¸ªå…ƒç´ æŸ¥çœ‹å½“å‰ç¨‹åºæ ˆçš„ä¿¡æ¯ï¼šinfo frameâ€”-list general info about the frameæŸ¥çœ‹å½“å‰ç¨‹åºæ ˆçš„å‚æ•°ï¼šinfo argsâ€”lists arguments to the functionæŸ¥çœ‹å½“å‰ç¨‹åºæ ˆçš„å±€éƒ¨å˜é‡ï¼šinfo localsâ€”list variables stored in the frameæŸ¥çœ‹å½“å‰å¯„å­˜å™¨çš„å€¼ï¼šinfo registers(ä¸åŒ…æ‹¬æµ®ç‚¹å¯„å­˜å™¨) ptype æ‰“å°å˜é‡ç±»å‹123456(gdb) ptype itype = int(gdb) ptype array[i]type = int(gdb) ptype arraytype = int [12] display è·Ÿè¸ªæ˜¾ç¤ºå˜é‡printå‘½ä»¤å¯ä»¥æ‰“å°å‡ºå˜é‡çš„å€¼ï¼Œä½†æ˜¯åªæ˜¯ä¸€æ¬¡æ€§çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è·Ÿè¸ªæŸä¸ªå˜é‡çš„å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨displayå‘½ä»¤ï¼Œæ¯å½“ç¨‹åºåœ¨æ–­ç‚¹å¤„åœä¸‹ï¼Œéƒ½ä¼šæ‰“å°å‡ºè·Ÿè¸ªçš„å˜é‡å€¼ã€‚ 1(gdb) display info displayæŸ¥çœ‹å·²è·Ÿè¸ªçš„å˜é‡ï¼Œdelete displayå–æ¶ˆè·Ÿè¸ªæ˜¾ç¤ºå˜é‡ã€‚ step æ‰§è¡Œä¸€è¡Œä»£ç æ‰§è¡Œä¸€è¡Œä»£ç ï¼Œå¦‚æœæ”¹è¡Œä»£ç æ˜¯å‡½æ•°ï¼Œå°†è¿›å…¥å‡½æ•°å†…éƒ¨ã€‚ 1(gdb) s finish è·³å‡ºå‡½æ•°å¦‚æœé€šè¿‡så•æ­¥è°ƒè¯•è¿›å…¥åˆ°å‡½æ•°å†…éƒ¨ï¼Œæƒ³è¦è·³å‡ºè¿™ä¸ªå‡½æ•°ä½“ï¼Œå¯ä»¥æ‰§è¡Œ finishå‘½ä»¤ã€‚å¦‚æœæƒ³è¦è·³å‡ºå‡½æ•°ä½“å¿…é¡»è¦ä¿è¯å‡½æ•°ä½“å†…ä¸èƒ½æœ‰æœ‰æ•ˆæ–­ç‚¹ï¼Œå¦åˆ™æ— æ³•è·³å‡ºã€‚ next æ‰§è¡Œä¸€è¡Œä»£ç next å‘½ä»¤å’Œ step å‘½ä»¤åŠŸèƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯åœ¨ä½¿ç”¨ next è°ƒè¯•ç¨‹åºçš„æ—¶å€™ä¸ä¼šè¿›å…¥åˆ°å‡½æ•°ä½“å†…éƒ¨ï¼Œnext å¯ä»¥ç¼©å†™ä¸º nã€‚ until è·³å‡ºå¾ªç¯ä½“é€šè¿‡ until å‘½ä»¤å¯ä»¥ç›´æ¥è·³å‡ºæŸä¸ªå¾ªç¯ä½“ï¼Œè¿™æ ·å°±èƒ½æé«˜è°ƒè¯•æ•ˆç‡äº†ã€‚å¦‚æœæƒ³ç›´æ¥ä»å¾ªç¯ä½“ä¸­è·³å‡ºï¼Œå¿…é¡»è¦ä¿è¯ï¼Œè¦è·³å‡ºçš„å¾ªç¯ä½“å†…éƒ¨ä¸èƒ½æœ‰æœ‰æ•ˆçš„æ–­ç‚¹ï¼Œå¿…é¡»è¦åœ¨å¾ªç¯ä½“çš„å¼€å§‹ / ç»“æŸè¡Œæ‰§è¡Œè¯¥å‘½ä»¤ã€‚ layout åˆ†å‰²çª—å£ï¼Œè¾¹è°ƒè¯•è¾¹çœ‹æºç layout src layout asm layout split è¿œç¨‹è°ƒè¯•-s -S-så¯åŠ¨gdb serverï¼Œé»˜è®¤ç«¯å£å·ä¸º 1234-Sè®©ç¨‹åºåœ¨_startå¤„åœä¸‹ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"GDB","slug":"GDB","permalink":"http://example.com/tags/GDB/"},{"name":"CSAPP","slug":"CSAPP","permalink":"http://example.com/tags/CSAPP/"}]},{"title":"oh-my-zsh è®©ä½ çš„ç»ˆç«¯æ›´åŠ é¡ºæ‰‹ï¼ˆçœ¼ï¼‰","slug":"oh-my-zshè®©ä½ çš„ç»ˆç«¯æ›´åŠ é¡ºæ‰‹ï¼ˆçœ¼ï¼‰","date":"2021-08-29T01:56:21.000Z","updated":"2022-10-15T03:14:29.371Z","comments":true,"path":"2021/08/29/oh-my-zshè®©ä½ çš„ç»ˆç«¯æ›´åŠ é¡ºæ‰‹ï¼ˆçœ¼ï¼‰/","link":"","permalink":"http://example.com/2021/08/29/oh-my-zsh%E8%AE%A9%E4%BD%A0%E7%9A%84%E7%BB%88%E7%AB%AF%E6%9B%B4%E5%8A%A0%E9%A1%BA%E6%89%8B%EF%BC%88%E7%9C%BC%EF%BC%89/","excerpt":"","text":"æ•ˆæœä¸»é¢˜ï¼ševan ä¸»é¢˜ï¼šdallas ä¸»é¢˜ï¼šrobbyrussell å¦‚æœåŸå…ˆå…¶ä»–ç”µè„‘å®‰è£…è¿‡æŠŠ.oh-my-zshæ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œ.zshrcï¼Œ.zsh_historyå¤åˆ¶åˆ°/home/user/ç›®å½•ï¼› å®‰è£…zsh 12sudo apt install zsh åˆ‡æ¢shell 1chsh -s /bin/zsh 1source ~/.zshrc å³å¯ä½¿ç”¨ã€‚æ‰€æœ‰é…ç½®éƒ½ä¼šå’ŒåŸå…ˆä¸€æ ·ã€‚ å¦‚æœæ˜¯æ–°å®‰è£…å®˜æ–¹æ–¹æ³•ï¼Œcurlå’ŒwgetäºŒé€‰ä¸€å³å¯ 12curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.shwget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh åº”è¯¥ä¹Ÿæœ‰äººå’Œæˆ‘ä¸€æ ·ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿æ¥ GitHub å¤±è´¥çš„é—®é¢˜ï¼Œè¦ä¸å°±æ˜¯ SSL éªŒè¯å¤±è´¥ï¼Œè¦ä¸å°±æ˜¯è¿æ¥æ— å“åº”ã€‚å¯ä»¥æ›´æ¢ä¸‹é¢çš„æ–¹æ³•ã€‚ 1234# å…ˆä¸‹è½½git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh## å†æ›¿æ¢cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc é‡å¯ç»ˆç«¯å³å¯æˆåŠŸã€‚ å¦‚æœæ— æ³•è®¿é—® GitHubï¼Œå…¶å®oh-my-zshå¹¶ä¸éœ€è¦å®‰è£…ï¼Œå®Œæ•´çš„å·¥ç¨‹å°±æ˜¯oh-my-zshæœ¬ä½“ï¼Œåªè¦æƒ³åŠæ³•æŠŠæ•´ä¸ªå·¥ç¨‹ä¸‹è½½ä¸‹æ¥ï¼Œå¹¶é‡å‘½åä¸ºoh-my-zshå³å¯ã€‚æ‰€ä»¥æ‰¾æ‰¾ gitee æœ‰æ²¡æœ‰ç›¸å…³å·¥ç¨‹ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä»æ—§ç”µè„‘é‡Œç›´æ¥å¤åˆ¶.oh-my-zshå°±èƒ½ç”¨çš„åŸå› ã€‚ é—®é¢˜oh-my-zsh.sh parse error near `&lt;&lt;&lt;â€™ä¸€èˆ¬æ˜¯åœ¨æ›´æ–°oh-my-zshæ—¶å‡ºç°ï¼Œå› ä¸ºæ›´æ–°ç›¸å½“äºå°±æ˜¯ä»è¿œç¨‹æ‹‰å–äº†å†…å®¹ï¼Œå¯èƒ½æœ¬åœ°çš„oh-my-zsh.shè„šæœ¬è‡ªå·±åšäº†ä¿®æ”¹ä¸è¿œç¨‹å†²çªäº†ã€‚åªè¦é€€å›ä¸Šä¸ªç‰ˆæœ¬ï¼Œé‡æ–°æ‹‰å–å°±å¯ä»¥äº†ã€‚ 123cd $ZSHgit reset --hard HEAD^git pull --rebase å¦‚æœæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›å†…å®¹éœ€è¦ä¿ç•™ï¼Œå¯ä»¥æ‰“å¼€oh-my-zsh.shçœ‹çœ‹å†²çªåœ¨å“ªï¼Œè‡ªå·±åšä¸ªå¤‡ä»½ï¼Œä¿å­˜ä¸€ä¸‹ã€‚","categories":[{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Plugins","slug":"Plugins","permalink":"http://example.com/tags/Plugins/"},{"name":"zsh","slug":"zsh","permalink":"http://example.com/tags/zsh/"}]},{"title":"Qt ç»˜åˆ¶ç³»ç»Ÿ","slug":"Qtç»˜åˆ¶ç³»ç»Ÿ","date":"2021-08-27T06:39:12.000Z","updated":"2022-10-15T03:14:29.507Z","comments":true,"path":"2021/08/27/Qtç»˜åˆ¶ç³»ç»Ÿ/","link":"","permalink":"http://example.com/2021/08/27/Qt%E7%BB%98%E5%88%B6%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"æœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç å¯åœ¨æ­¤å¤„æŸ¥çœ‹ã€‚ ç»˜åˆ¶ç³»ç»Ÿç®€ä»‹Qt çš„ç»˜å›¾ç³»ç»Ÿå…è®¸ä½¿ç”¨ç›¸åŒçš„ API åœ¨å±å¹•å’Œå…¶å®ƒæ‰“å°è®¾å¤‡ä¸Šè¿›è¡Œç»˜åˆ¶ã€‚æ•´ä¸ªç»˜å›¾ç³»ç»ŸåŸºäºQPainter,QPainterDeviceå’ŒQPaintEngineä¸‰ä¸ªç±»ã€‚ QPainterç”¨æ¥æ‰§è¡Œç»˜åˆ¶çš„æ“ä½œï¼›QPaintDeviceæ˜¯ä¸€ä¸ªäºŒç»´ç©ºé—´çš„æŠ½è±¡ï¼Œè¿™ä¸ªäºŒç»´ç©ºé—´å…è®¸QPainteråœ¨å…¶ä¸Šé¢è¿›è¡Œç»˜åˆ¶ï¼Œä¹Ÿå°±æ˜¯QPainterå·¥ä½œçš„ç©ºé—´ï¼›QPaintEngineæä¾›äº†ç”»ç¬”ï¼ˆQPainterï¼‰åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šè¿›è¡Œç»˜åˆ¶çš„ç»Ÿä¸€çš„æ¥å£ã€‚QPaintEngineç±»åº”ç”¨äºQPainterå’ŒQPaintDeviceä¹‹é—´ï¼Œé€šå¸¸å¯¹å¼€å‘äººå‘˜æ˜¯é€æ˜çš„ã€‚ ä¸‰ä¸ªç±»çš„å…³ç³»ï¼šQPainter-&gt;QPaintEngine-&gt;QPaintDeviceã€‚é€šè¿‡è¿™ä¸ªå…³ç³»æˆ‘ä»¬ä¹Ÿå¯ä»¥çŸ¥é“ï¼ŒQPainteré€šè¿‡QPaintEngineç¿»è¯‘æŒ‡ä»¤åœ¨QPaintDeviceä¸Šç»˜åˆ¶ã€‚ é€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥äº†è§£ä¸€ä¸‹ç»˜åˆ¶ç³»ç»Ÿçš„ï¼Œ 12345678910111213141516//main.h#include &lt;QPainter&gt;#include &lt;QWidget&gt;#include &lt;QPaintEvent&gt;#include &lt;QApplication&gt;#include &lt;QMainWindow&gt;class PaintedWidget : public QWidget&#123; Q_OBJECTpublic: PaintedWidget(QWidget *parent = 0);protected: void paintEvent(QPaintEvent *);&#125;; 1234567891011121314151617181920212223242526272829//main.cpp#include &quot;paintwidget.h&quot;PaintedWidget::PaintedWidget(QWidget *parent) : QWidget(parent)&#123; resize(800, 600); setWindowTitle(tr(&quot;Paint Demo&quot;));&#125;void PaintedWidget::paintEvent(QPaintEvent *)&#123; QPainter painter(this); painter.drawLine(20, 20, 700, 20); painter.setPen(Qt::red); painter.drawRect(10, 10, 100, 400); painter.setPen(QPen(Qt::green, 5)); painter.setBrush(Qt::blue); painter.drawEllipse(0, 0, 300, 40); // painter.drawRect(120, 50, 50, 400);&#125;int main(int argc, char *argv[])&#123; QApplication app(argc, argv); PaintedWidget paintMap; paintMap.show(); return app.exec();&#125; åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä»…ä»…è®¾ç½®äº†çª—å£çš„å¤§å°å’Œæ ‡é¢˜ã€‚è€ŒpaintEvent()å‡½æ•°åˆ™æ˜¯ç»˜åˆ¶çš„ä»£ç ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æ ˆä¸Šåˆ›å»ºäº†ä¸€ä¸ªQPainterå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è¿è¡ŒpaintEvent()å‡½æ•°çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡å»ºè¿™ä¸ªQPainterå¯¹è±¡ã€‚æ³¨æ„ï¼Œè¿™ä¸€ç‚¹å¯èƒ½ä¼šå¼•å‘æŸäº›ç»†èŠ‚é—®é¢˜ï¼šç”±äºæˆ‘ä»¬æ¯æ¬¡é‡å»ºQPainterï¼Œå› æ­¤ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶æ‰€è®¾ç½®çš„ç”»ç¬”é¢œè‰²ã€çŠ¶æ€ç­‰ï¼Œç¬¬äºŒæ¬¡å†è¿›å…¥è¿™ä¸ªå‡½æ•°æ—¶å°±ä¼šå…¨éƒ¨ä¸¢å¤±ã€‚æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä¿å­˜ç”»ç¬”çŠ¶æ€ï¼Œå°±å¿…é¡»è‡ªå·±ä¿å­˜æ•°æ®ï¼Œå¦åˆ™çš„è¯åˆ™éœ€è¦å°†QPainterä½œä¸ºç±»çš„æˆå‘˜å˜é‡ã€‚ paintEvent()ä½œä¸ºé‡ç»˜å‡½æ•°ï¼Œä¼šåœ¨éœ€è¦é‡ç»˜æ—¶ç”± Qt è‡ªåŠ¨è°ƒç”¨ã€‚â€œéœ€è¦é‡ç»˜â€å¯èƒ½å‘ç”Ÿåœ¨å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”å¦‚ç»„ä»¶åˆšåˆšåˆ›å»ºå‡ºæ¥çš„æ—¶å€™å°±éœ€è¦é‡ç»˜ï¼›ç»„ä»¶æœ€å¤§åŒ–ã€æœ€å°åŒ–çš„æ—¶å€™ä¹Ÿéœ€è¦é‡æ–°ç»˜åˆ¶ï¼›ç»„ä»¶ç”±é®æŒ¡å˜æˆå®Œå…¨æ˜¾ç¤ºçš„æ—¶å€™ä¹Ÿéœ€è¦ç­‰ç­‰ã€‚ QPainteræ¥æ”¶ä¸€ä¸ªQPaintDeviceæŒ‡é’ˆä½œä¸ºå‚æ•°ã€‚QPaintDeviceæœ‰å¾ˆå¤šå­ç±»ï¼Œæ¯”å¦‚QImageï¼Œä»¥åŠQWidgetã€‚æ³¨æ„å›å¿†ä¸€ä¸‹ï¼ŒQPaintDeviceå¯ä»¥ç†è§£æˆè¦åœ¨å“ªé‡Œå»ç»˜åˆ¶ï¼Œè€Œç°åœ¨æˆ‘ä»¬å¸Œæœ›ç”»åœ¨è¿™ä¸ªç»„ä»¶ï¼Œå› æ­¤ä¼ å…¥çš„æ˜¯ this æŒ‡é’ˆã€‚ æˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ç»˜åˆ¶çš„é¡ºåºï¼Œç›´çº¿-çŸ©å½¢ - æ¤­åœ†ï¼Œæ‰€ä»¥ç›´çº¿ä½äºæœ€ä¸‹æ–¹ï¼Œä»¥æ­¤ç±»æ¨ã€‚ å¦‚æœäº†è§£ OpenGLï¼Œè‚¯å®šå¬è¯´è¿‡è¿™ä¹ˆä¸€å¥è¯ï¼šOpenGL æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚æ‰€è°“çŠ¶æ€æœºï¼Œå°±æ˜¯è¯´ï¼ŒOpenGL ä¿å­˜çš„åªæ˜¯å„ç§çŠ¶æ€ã€‚æ¯”å¦‚ï¼Œå°†ç”»ç¬”é¢œè‰²è®¾ç½®æˆçº¢è‰²ï¼Œé‚£ä¹ˆï¼Œé™¤éä½ é‡æ–°è®¾ç½®å¦å¤–çš„é¢œè‰²ï¼Œå®ƒçš„é¢œè‰²ä¼šä¸€ç›´æ˜¯çº¢è‰²ã€‚QPainterä¹Ÿæ˜¯è¿™æ ·ï¼Œå®ƒçš„çŠ¶æ€ä¸ä¼šè‡ªå·±æ¢å¤ï¼Œé™¤éä½ ä½¿ç”¨äº†å„ç§è®¾ç½®å‡½æ•°ã€‚å› æ­¤ï¼Œå¦‚æœåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨æ¤­åœ†ç»˜åˆ¶ä¹‹åå†ç”»ä¸€ä¸ªçŸ©å½¢ï¼Œå®ƒçš„æ ·å¼è¿˜ä¼šæ˜¯ç»¿è‰²5åƒç´ çš„è½®å»“çº¿ä»¥åŠè“è‰²çš„å¡«å……ï¼Œé™¤éä½ æ˜¾å¼åœ°è°ƒç”¨äº†è®¾ç½®å‡½æ•°è¿›è¡ŒçŠ¶æ€çš„æ›´æ–°ã€‚ è¿™æ˜¯å¤§å¤šæ•°ç»˜å›¾ç³»ç»Ÿçš„å®ç°æ–¹å¼ï¼ŒåŒ…æ‹¬ OpenGLã€QPainterä»¥åŠ Java2Dã€‚æ­£å› ä¸ºQPainteræ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ‰ä¼šå¼•å‡ºæˆ‘ä»¬å‰é¢æ›¾ç»ä»‹ç»è¿‡çš„ä¸€ä¸ªç»†èŠ‚é—®é¢˜ï¼šç”±äºpaintEvent()æ˜¯éœ€è¦é‡å¤è¿›å…¥çš„ï¼Œå› æ­¤ï¼Œéœ€è¦æ³¨æ„ç¬¬äºŒæ¬¡è¿›å…¥æ—¶ï¼ŒQPainterçš„çŠ¶æ€æ˜¯ä¸æ˜¯å’Œç¬¬ä¸€æ¬¡ä¸€è‡´ï¼Œå¦åˆ™çš„è¯å¯èƒ½ä¼šé€ æˆé—ªçƒçš„ç°è±¡ã€‚è¿™ä¸ªé—ªçƒå¹¶ä¸æ˜¯ç”±äºåŒç¼“å†²çš„é—®é¢˜ï¼Œè€Œæ˜¯ç”±äºç»˜åˆ¶çŠ¶æ€çš„å¿«é€Ÿåˆ‡æ¢ã€‚ ç”»åˆ·å’Œç”»ç¬”ç”»åˆ·å’Œç”»ç¬”ã€‚å‰è€…ä½¿ç”¨QBrushæè¿°ï¼Œå¤§å¤šç”¨äºå¡«å……ï¼›åè€…ä½¿ç”¨QPenæè¿°ï¼Œå¤§å¤šç”¨äºç»˜åˆ¶è½®å»“çº¿ã€‚ 123456789101112131415161718192021222324//main.cppvoid PaintedWidget::paintEvent(QPaintEvent *)&#123; QPainter painter(this); painter.drawLine(20, 20, 700, 20); painter.setPen(Qt::red); painter.drawRect(10, 10, 100, 400); painter.setPen(QPen(Qt::green, 5)); painter.setBrush(Qt::blue); painter.drawEllipse(0, 0, 300, 40); painter.drawRect(120, 50, 50, 400); ///////////////////ç”»ç¬”ä¸ç¬”åˆ· QLinearGradient gradient(QPointF(180, 50), QPointF(230, 400)); gradient.setColorAt(0, Qt::black); gradient.setColorAt(1, Qt::red); gradient.setSpread(QGradient::PadSpread); QBrush brush(gradient); QPen pen(Qt::green, 3, Qt::DashDotLine, Qt::RoundCap, Qt::RoundJoin); // painter.setPen(pen); painter.setBrush(brush); painter.drawRect(180, 50, 50, 400);&#125; ç”»åˆ·çš„style()å®šä¹‰äº†å¡«å……çš„æ ·å¼ï¼Œä½¿ç”¨Qt::BrushStyleæšä¸¾ï¼Œé»˜è®¤å€¼æ˜¯Qt::NoBrushï¼Œä¹Ÿå°±æ˜¯ä¸è¿›è¡Œä»»ä½•å¡«å……ã€‚æˆ‘ä»¬å¯ä»¥ä»ä¸‹é¢çš„å›¾ç¤ºä¸­çœ‹åˆ°å„ç§å¡«å……æ ·å¼çš„åŒºåˆ«ï¼š ç”»åˆ·çš„gradient()å®šä¹‰äº†æ¸å˜å¡«å……ã€‚è¿™ä¸ªå±æ€§åªæœ‰åœ¨æ ·å¼æ˜¯Qt::LinearGradientPatternã€Qt::RadialGradientPatternæˆ–è€…Qt::ConicalGradientPatternä¹‹ä¸€æ—¶æ‰æœ‰æ•ˆã€‚æ¸å˜å¯ä»¥ç”±QGradientå¯¹è±¡è¡¨ç¤ºã€‚Qt æä¾›äº†ä¸‰ç§æ¸å˜ï¼šQLinearGradientã€QConicalGradientå’ŒQRadialGradientï¼Œå®ƒä»¬éƒ½æ˜¯QGradientçš„å­ç±»ã€‚ æœ¬æ–‡ä»¥QLinearGradientä¸ºä¾‹ï¼Œä¸¤ä¸ªåæ ‡åˆ†åˆ«ä¸ºèµ·ç‚¹ä¸é‡ç‚¹åæ ‡ã€‚setColorAtè®¾ç½®æ¸å˜é¢œè‰²ï¼Œ0è¡¨ç¤ºå¼€å§‹ï¼Œ1è¡¨ç¤ºç»“æŸã€‚æ„æ€å°±æ˜¯ä»é»‘è‰²æ¸å˜åˆ°çº¢è‰²ã€‚setSpreadè®¾ç½®æ˜¾ç¤ºæ–¹å¼ä¸ºå¹³é“ºã€‚ 1234QLinearGradient gradient(QPointF(180, 50), QPointF(230, 400));gradient.setColorAt(0, Qt::black);gradient.setColorAt(1, Qt::red);gradient.setSpread(QGradient::PadSpread); é»˜è®¤çš„ç”»ç¬”å±æ€§æ˜¯çº¯é»‘è‰²ï¼Œ0 åƒç´ ï¼Œæ–¹å½¢ç¬”å¸½ï¼ˆQt::SquareCapï¼‰ï¼Œæ–œé¢å‹è¿æ¥ï¼ˆQt::BevelJoinï¼‰ã€‚ ç”»ç¬”æ ·å¼æœ‰ä¸€ä¸‹å‡ ç§ï¼Œ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨setDashPattern()å‡½æ•°è‡ªå®šä¹‰æ ·å¼ï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š 123456789QVector&lt;qreal&gt; dashes;qreal space = 4;dashes &lt;&lt; 1 &lt;&lt; space &lt;&lt; 3 &lt;&lt; space &lt;&lt; 9 &lt;&lt; space &lt;&lt; 27 &lt;&lt; space &lt;&lt; 9 &lt;&lt; space;pen.setColor(Qt::black);pen.setDashPattern(dashes);painter.setPen(pen);painter.drawLine(30, 300, 600, 30); pen.setCapStyle(Qt::RoundCap)ç¬”å¸½å®šä¹‰äº†ç”»ç¬”æœ«ç«¯çš„æ ·å¼ï¼Œä¾‹å¦‚ï¼š pen.setJoinStyle(Qt::RoundJoin)è¿æ¥æ ·å¼å®šä¹‰äº†ä¸¤æ¡çº¿è¿æ¥æ—¶çš„æ ·å¼ï¼Œä¾‹å¦‚ï¼š åèµ°æ ·æˆ‘ä»¬åœ¨å…‰æ …å›¾å½¢æ˜¾ç¤ºå™¨ä¸Šç»˜åˆ¶éæ°´å¹³ã€éå‚ç›´çš„ç›´çº¿æˆ–å¤šè¾¹å½¢è¾¹ç•Œæ—¶ï¼Œæˆ–å¤šæˆ–å°‘ä¼šå‘ˆç°é”¯é½¿çŠ¶å¤–è§‚ã€‚è¿™æ˜¯å› ä¸ºç›´çº¿å’Œå¤šè¾¹å½¢çš„è¾¹ç•Œæ˜¯è¿ç»­çš„ï¼Œè€Œå…‰æ …åˆ™æ˜¯ç”±ç¦»æ•£çš„ç‚¹ç»„æˆã€‚åœ¨å…‰æ …æ˜¾ç¤ºè®¾å¤‡ä¸Šè¡¨ç°ç›´çº¿ã€å¤šè¾¹å½¢ç­‰ï¼Œå¿…é¡»åœ¨ç¦»æ•£ä½ç½®é‡‡æ ·ã€‚ç”±äºé‡‡æ ·ä¸å……åˆ†é‡å»ºåé€ æˆçš„ä¿¡æ¯å¤±çœŸï¼Œå°±å«èµ°æ ·ï¼›ç”¨äºå‡å°‘æˆ–æ¶ˆé™¤è¿™ç§æ•ˆæœçš„æŠ€æœ¯ï¼Œå°±ç§°ä¸ºåèµ°æ ·ã€‚ä¹Ÿå°±æ˜¯å¸¸è¯´çš„é˜²é”¯é½¿ç°è±¡ã€‚å› ä¸ºæ€§èƒ½æ–¹é¢çš„è€ƒè™‘ï¼ŒQt é»˜è®¤å…³é—­åèµ°æ ·ã€‚ 12345678910111213void paintEvent(QPaintEvent *)&#123; ///////////////////å¯¹æ¯”åèµ°æ ·æ•ˆæœ QPainter painter(this); painter.setPen(QPen(Qt::black, 5, Qt::DashDotLine, Qt::RoundCap)); painter.setBrush(Qt::yellow); painter.drawEllipse(550, 150, 200, 150); painter.setRenderHint(QPainter::Antialiasing, true); painter.setPen(QPen(Qt::black, 5, Qt::DashDotLine, Qt::RoundCap)); painter.setBrush(Qt::yellow); painter.drawEllipse(300, 150, 200, 150);&#125; æˆ‘ä»¬å¯ä»¥æ˜æ˜¾è§‚å¯Ÿåˆ°å³è¾¹çš„æ¤­åœ†è½®å»“æ˜¯æœ‰é”¯é½¿ç°è±¡çš„ï¼Œè¿™ä¸¤ä¸ªæ¤­åœ†é™¤äº†ä½ç½®ä½ç½®ä¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å³è¾¹çš„å¼€å¯äº†åé”¯é½¿ã€‚ 1painter.setRenderHint(QPainter::Antialiasing, true); è™½ç„¶åèµ°æ ·æ¯”ä¸åèµ°æ ·çš„å›¾åƒè´¨é‡é«˜å¾ˆå¤šï¼Œä½†æ˜¯ï¼Œæ²¡æœ‰åèµ°æ ·çš„å›¾å½¢ç»˜åˆ¶è¿˜æ˜¯æœ‰å¾ˆå¤§ç”¨å¤„çš„ã€‚é¦–å…ˆï¼Œå°±åƒå‰é¢è¯´çš„ä¸€æ ·ï¼Œåœ¨ä¸€äº›å¯¹å›¾åƒè´¨é‡è¦æ±‚ä¸é«˜çš„ç¯å¢ƒä¸‹ï¼Œæˆ–è€…è¯´æ€§èƒ½å—é™çš„ç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚åµŒå…¥å¼å’Œæ‰‹æœºç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯ä¸è¿›è¡Œåèµ°æ ·çš„ã€‚å¦å¤–ï¼Œåœ¨ä¸€äº›å¿…é¡»ç²¾ç¡®æ“ä½œåƒç´ çš„åº”ç”¨ä¸­ï¼Œä¹Ÿæ˜¯ä¸èƒ½è¿›è¡Œåèµ°æ ·çš„ã€‚ åæ ‡ç³»ç»Ÿåœ¨ Qt çš„åæ ‡ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªåƒç´ å æ® 1x1 çš„ç©ºé—´ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€å¼ æ–¹æ ¼çº¸ï¼Œæ¯ä¸ªå°æ ¼éƒ½æ˜¯ 1 ä¸ªåƒç´ ã€‚æ–¹æ ¼çš„ç„¦ç‚¹å®šä¹‰äº†åæ ‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåƒç´  (x, y) çš„ä¸­å¿ƒä½ç½®å…¶å®æ˜¯åœ¨(x + 0.5, y + 0.5)çš„ä½ç½®ä¸Šã€‚è¿™ä¸ªåæ ‡ç³»ç»Ÿå®é™…ä¸Šæ˜¯ä¸€ä¸ªâ€œåŠåƒç´ åæ ‡ç³»â€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„ç¤ºæ„å›¾æ¥ç†è§£è¿™ç§åæ ‡ç³»ï¼š æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåƒç´ çš„ç”»ç¬”è¿›è¡Œç»˜åˆ¶ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ªç»˜åˆ¶åƒç´ éƒ½æ˜¯ä»¥åæ ‡ç‚¹ä¸ºä¸­å¿ƒçš„çŸ©å½¢ã€‚æ³¨æ„ï¼Œè¿™æ˜¯åæ ‡çš„é€»è¾‘è¡¨ç¤ºï¼Œå®é™…ç»˜åˆ¶åˆ™ä¸æ­¤ä¸åŒã€‚å› ä¸ºåœ¨å®é™…è®¾å¤‡ä¸Šï¼Œåƒç´ æ˜¯æœ€å°å•ä½ï¼Œæˆ‘ä»¬ä¸èƒ½åƒä¸Šé¢ä¸€æ ·ï¼Œåœ¨ä¸¤ä¸ªåƒç´ ä¹‹é—´è¿›è¡Œç»˜åˆ¶ã€‚æ‰€ä»¥åœ¨å®é™…ç»˜åˆ¶æ—¶ï¼ŒQt çš„å®šä¹‰æ˜¯ï¼Œç»˜åˆ¶ç‚¹æ‰€åœ¨åƒç´ æ˜¯é€»è¾‘å®šä¹‰ç‚¹çš„å³ä¸‹æ–¹çš„åƒç´ ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¢ç©¶ Qt ç»˜åˆ¶å›¾åƒçš„åæ ‡æƒ…å†µï¼Œå¯¹äºç”»ç¬”å¤§å°ä¸ºä¸€ä¸ªåƒç´ çš„æƒ…å†µæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œå½“æˆ‘ä»¬ç»˜åˆ¶çŸ©å½¢å·¦ä¸Šè§’ (1, 2) æ—¶ï¼Œå®é™…ç»˜åˆ¶çš„åƒç´ æ˜¯åœ¨å³ä¸‹æ–¹ã€‚ å½“ç”»ç¬”å¤§å°è¶…è¿‡ 1 ä¸ªåƒç´ æ—¶ï¼Œå°±ç•¥æ˜¾å¤æ‚äº†ã€‚å¦‚æœç»˜åˆ¶åƒç´ æ˜¯å¶æ•°ï¼Œåˆ™å®é™…ç»˜åˆ¶ä¼šåŒ…è£¹ä½é€»è¾‘åæ ‡å€¼ï¼›å¦‚æœæ˜¯å¥‡æ•°ï¼Œåˆ™æ˜¯åŒ…è£¹ä½é€»è¾‘åæ ‡å€¼ï¼Œå†åŠ ä¸Šå³ä¸‹è§’ä¸€ä¸ªåƒç´ çš„åç§»ã€‚å…·ä½“è¯·çœ‹ä¸‹é¢çš„å›¾ç¤ºï¼š ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœå®é™…ç»˜åˆ¶æ˜¯å¶æ•°åƒç´ ï¼Œåˆ™ä¼šå°†é€»è¾‘åæ ‡å€¼å¤¹åœ¨ç›¸ç­‰çš„ä¸¤éƒ¨åˆ†åƒç´ ä¹‹é—´ï¼›å¦‚æœæ˜¯å¥‡æ•°ï¼Œåˆ™ä¼šåœ¨å³ä¸‹æ–¹å¤šå‡ºä¸€ä¸ªåƒç´ ã€‚ Qt çš„è¿™ç§å¤„ç†ï¼Œå¸¦æ¥çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½è·å–ä¸åˆ°çœŸå®çš„åæ ‡å€¼ã€‚ç”±äºå†å²åŸå› ï¼ŒQRect::right()å’ŒQRect::bottom()çš„è¿”å›å€¼å¹¶ä¸æ˜¯çŸ©å½¢å³ä¸‹è§’ç‚¹çš„çœŸå®åæ ‡å€¼ï¼šQRect::right()è¿”å›çš„æ˜¯left() + width() - 1ï¼›QRect::bottom()åˆ™è¿”å› top() + height() - 1ï¼Œä¸Šå›¾çš„ç»¿è‰²ç‚¹æŒ‡å‡ºäº†è¿™ä¸¤ä¸ªå‡½æ•°çš„è¿”å›ç‚¹çš„åæ ‡ã€‚ ä¸ºé¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å»ºè®®æ˜¯ä½¿ç”¨QRectFã€‚QRectFä½¿ç”¨æµ®ç‚¹å€¼ï¼Œè€Œä¸æ˜¯æ•´æ•°å€¼ï¼Œæ¥æè¿°åæ ‡ã€‚è¿™ä¸ªç±»çš„ä¸¤ä¸ªå‡½æ•°QRectF::right()å’ŒQRectF::bottom()æ˜¯æ­£ç¡®çš„ã€‚å¦‚æœä½ ä¸å¾—ä¸ä½¿ç”¨QRectï¼Œé‚£ä¹ˆå¯ä»¥åˆ©ç”¨ x() + width() å’Œ y() + height()æ¥æ›¿ä»£ right()å’Œbottom()å‡½æ•°ã€‚ å¯¹äºåèµ°æ ·ï¼Œå®é™…ç»˜åˆ¶ä¼šåŒ…è£¹ä½é€»è¾‘åæ ‡å€¼ï¼š å‰é¢è¯´è¿‡ï¼ŒQPainteræ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚é‚£ä¹ˆï¼Œæœ‰æ—¶æˆ‘æƒ³ä¿å­˜ä¸‹å½“å‰çš„çŠ¶æ€ï¼šå½“æˆ‘ä¸´æ—¶ç»˜åˆ¶æŸäº›å›¾åƒæ—¶ï¼Œå°±å¯èƒ½æƒ³è¿™ä¹ˆåšã€‚å½“ç„¶ï¼Œæˆ‘ä»¬æœ‰æœ€åŸå§‹çš„åŠæ³•ï¼šå°†å¯èƒ½æ”¹å˜çš„çŠ¶æ€ï¼Œæ¯”å¦‚ç”»ç¬”é¢œè‰²ã€ç²—ç»†ç­‰ï¼Œåœ¨ä¸´æ—¶ç»˜åˆ¶ç»“æŸä¹‹åå†å…¨éƒ¨æ¢å¤ã€‚å¯¹æ­¤ï¼ŒQPainteræä¾›äº†å†…ç½®çš„å‡½æ•°ï¼šsave()å’Œrestore()ã€‚save()å°±æ˜¯ä¿å­˜ä¸‹å½“å‰çŠ¶æ€ï¼›restore()åˆ™æ¢å¤ä¸Šä¸€æ¬¡ä¿å­˜çš„ç»“æœã€‚è¿™ä¸¤ä¸ªå‡½æ•°å¿…é¡»æˆå¯¹å‡ºç°ï¼šQPainterä½¿ç”¨æ ˆæ¥ä¿å­˜æ•°æ®ï¼Œæ¯ä¸€æ¬¡save()ï¼Œå°†å½“å‰çŠ¶æ€å‹å…¥æ ˆé¡¶ï¼Œrestore()åˆ™å¼¹å‡ºæ ˆé¡¶è¿›è¡Œæ¢å¤ã€‚ åœ¨äº†è§£äº†è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œç¤ºä¾‹ä»£ç äº†ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//ç»˜åˆ¶ä¸€ä¸ªç½‘æ ¼èƒŒæ™¯void CoordinateWidget::paintGrid()&#123; size_t win_width = this-&gt;geometry().width(); size_t win_height = this-&gt;geometry().height(); QPainter painter(this); for (size_t x = 0; x &lt; win_width; x += 25) &#123; painter.drawLine(QPoint(x, 1), QPoint(x, win_height)); &#125; for (size_t y = 0; y &lt; win_height; y += 25) &#123; painter.drawLine(QPoint(1, y), QPoint(win_width, y)); &#125;&#125;void CoordinateWidget::paintEvent(QPaintEvent *)&#123; paintGrid(); QPainter painter(this); painter.fillRect(10, 10, 50, 100, Qt::red); painter.save(); painter.translate(100, 0); // å‘å³å¹³ç§» 100px painter.fillRect(10, 10, 50, 100, Qt::yellow); painter.restore(); painter.save(); painter.translate(300, 0); // å‘å³å¹³ç§» 300px painter.rotate(30); // é¡ºæ—¶é’ˆæ—‹è½¬ 30 åº¦ painter.fillRect(10, 10, 50, 100, Qt::green); painter.restore(); painter.save(); painter.translate(400, 0); // å‘å³å¹³ç§» 400px painter.scale(2, 3); // æ¨ªåæ ‡å•ä½æ”¾å¤§ 2 å€ï¼Œçºµåæ ‡æ”¾å¤§ 3 å€ painter.fillRect(10, 10, 50, 100, Qt::blue); painter.restore(); painter.save(); painter.translate(600, 0); // å‘å³å¹³ç§» 600px painter.shear(0, 1); // æ¨ªå‘ä¸å˜ï¼Œçºµå‘æ‰­æ›² 1 å€ painter.fillRect(10, 10, 50, 100, Qt::cyan); painter.restore();&#125; Qt æä¾›äº†å››ç§åæ ‡å˜æ¢ï¼šå¹³ç§» translateï¼Œæ—‹è½¬ rotateï¼Œç¼©æ”¾ scale å’Œæ‰­æ›² shearã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨ (10, 10) ç‚¹ç»˜åˆ¶ä¸€ä¸ªçº¢è‰²çš„ 50x100 çŸ©å½¢ã€‚ä¿å­˜å½“å‰çŠ¶æ€ï¼Œå°†åæ ‡ç³»å¹³ç§»åˆ° (100, 0)ï¼Œç»˜åˆ¶ä¸€ä¸ªé»„è‰²çš„çŸ©å½¢ã€‚æ³¨æ„ï¼Œtranslate()æ“ä½œå¹³ç§»çš„æ˜¯åæ ‡ç³»ï¼Œä¸æ˜¯çŸ©å½¢ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯åœ¨(10, 10) ç‚¹ç»˜åˆ¶ä¸€ä¸ª 50x100 çŸ©å½¢ï¼Œç°åœ¨ï¼Œå®ƒè·‘åˆ°äº†å³ä¾§çš„ä½ç½®ã€‚ç„¶åæ¢å¤å…ˆå‰çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æŠŠåæ ‡ç³»é‡æ–°è®¾ä¸ºé»˜è®¤åæ ‡ç³»ï¼ˆç›¸å½“äºè¿›è¡Œtranslate(-100, 0)ï¼‰ï¼Œå†è¿›è¡Œä¸‹é¢çš„æ“ä½œã€‚ä¹‹åä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚ç”±äºæˆ‘ä»¬åªæ˜¯ä¿å­˜äº†é»˜è®¤åæ ‡ç³»çš„çŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬ä¹‹åçš„translate()æ¨ªåæ ‡å€¼å¿…é¡»å¢åŠ ï¼Œå¦åˆ™å°±ä¼šè¦†ç›–æ‰å‰é¢çš„å›¾å½¢ã€‚æ‰€æœ‰è¿™äº›æ“ä½œéƒ½æ˜¯é’ˆå¯¹åæ ‡ç³»çš„ï¼Œå› æ­¤åœ¨ç»˜åˆ¶æ—¶ï¼Œæˆ‘ä»¬æä¾›çš„çŸ©å½¢çš„åæ ‡å‚æ•°éƒ½æ˜¯ä¸å˜çš„ã€‚ ä¸ºäº†æ›´ç›´è§‚çš„æŸ¥çœ‹ç»˜åˆ¶åæ ‡ï¼Œå…ˆåœ¨èƒŒæ™¯ç”»äº†ä¸€ä¸ªç½‘æ ¼ã€‚ è¿è¡Œç»“æœå¦‚ä¸‹ï¼š","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"RISC-V å…¥é—¨ - è®¡ç®—æœºåŸºç¡€","slug":"RISC-Vå…¥é—¨-è®¡ç®—æœºåŸºç¡€","date":"2021-08-26T05:42:34.000Z","updated":"2022-10-15T03:14:29.570Z","comments":true,"path":"2021/08/26/RISC-Vå…¥é—¨-è®¡ç®—æœºåŸºç¡€/","link":"","permalink":"http://example.com/2021/08/26/RISC-V%E5%85%A5%E9%97%A8-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/","excerpt":"","text":"è®¡ç®—æœºåŸºç¡€è®¡ç®—æœºç¡¬ä»¶åŸºç¡€ä¸¤å¤§ç¡¬ä»¶æ¶æ„ å†¯è¯ºä¾æ›¼æ¶æ„ ä¸€æ ¹æ€»çº¿ï¼Œå¼€é”€å°ï¼Œæ§åˆ¶é€»è¾‘å®ç°ç®€å• æ‰§è¡Œæ•ˆç‡ä½ å“ˆä½›æ¶æ„ ä¸ä¸Šä¸€æ¶æ„ç›¸å ç¨‹åºçš„å­˜å‚¨ä¸æ‰§è¡Œ.cæ–‡ä»¶ç»è¿‡ç¼–è¯‘é“¾æ¥ï¼Œç”Ÿæˆ.outæ–‡ä»¶ã€‚åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåˆ°æ§åˆ¶å•å…ƒè¿è¡Œã€‚è¿›è¡Œå–å€¼ï¼Œè¯‘ç ï¼Œæ‰§è¡Œã€‚ æ™¶æŒ¯å‘å‡ºè„‰å†²ã€‚ è¯­è¨€çš„è®¾è®¡ä¸è¿›åŒ–ä¸Šå›¾æ˜¯å†¯è¯ºä¾æ›¼æ¶æ„ï¼Œç‰¹ç‚¹å°±æ˜¯æŒ‡ä»¤ä¸æ•°æ®æ”¾åœ¨ä¸€èµ·ã€‚é»„è‰²éƒ¨åˆ†è¡¨ç¤ºæŒ‡ä»¤ï¼Œç»¿è‰²éƒ¨åˆ†è¡¨ç¤ºæ•°æ®ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹æŒ‡ä»¤æ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚ProgramCounteræŒ‡åˆ°å³å›¾å†…å­˜çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œç¨‹åºå¼€å§‹æ‰§è¡Œã€‚å°†ç¬¬ä¸€æ¡ æŒ‡ä»¤è¯»å…¥æŒ‡ä»¤å¯„å­˜å™¨ã€‚ç„¶åå°†æŒ‡ä»¤è§£ç ï¼Œæ ¹æ®ä¹‹å‰çš„è§„å®šï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“è¿™æ¡æŒ‡ä»¤æ˜¯å°†0100(äºŒè¿›åˆ¶å³ 5)ä½ç½®çš„æ•°æ®ï¼Œ00(load)åˆ°00(Register 0)ä¸­ã€‚ä¸‹é¢çš„æŒ‡ä»¤ä¸€æ¬¡ç±»æ¨ï¼Œæ¯æ¬¡å–æŒ‡ï¼ŒProgram Counterç§»åŠ¨ä¸€æ¬¡ã€‚","categories":[{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"}]},{"title":"VSCode å•æ­¥è°ƒè¯• QEMU","slug":"VSCodeå•æ­¥è°ƒè¯•QEMU","date":"2021-08-24T11:24:08.000Z","updated":"2022-10-15T02:59:01.689Z","comments":true,"path":"2021/08/24/VSCodeå•æ­¥è°ƒè¯•QEMU/","link":"","permalink":"http://example.com/2021/08/24/VSCode%E5%8D%95%E6%AD%A5%E8%B0%83%E8%AF%95QEMU/","excerpt":"","text":"äº†è§£äº†å¦‚ä½•åœ¨VSCode ä¸­è°ƒè¯•ç¨‹åºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ VSCode ä¸­æ­å»ºè°ƒè¯• QEMU çš„ç¯å¢ƒã€‚ é…ç½®é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸‹è½½å’Œç¼–è¯‘ QEMU æºç  1./configure --enable-debug --target-list=riscv32-softmmu,riscv32-linux-user --enable-kvm ä¸€å®šè¦åŠ ä¸Š--enable-debugï¼Œç¼–è¯‘å‡ºçš„ç¨‹åºæ‰å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œä¸ç”¨è®¾ç½®å®‰è£…è·¯å¾„ï¼Œç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨åœ¨ qemu æ–‡ä»¶å¤¹ä¸‹è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªbuildæ–‡ä»¶å¤¹ï¼Œç¼–è¯‘åçš„ç¨‹åºä¹Ÿåœ¨buildæ–‡ä»¶å¤¹ä¸‹ã€‚ ç”¨ VSCode æ‰“å¼€qemu-6.X.Xæ–‡ä»¶å¤¹ï¼ŒCtrl+Shift+Dæ‰“å¼€è°ƒè¯•é…ç½®ã€‚å¦‚æœå‚è€ƒè¿‡VSCode ä¸­è°ƒè¯•ç¨‹åºè¿™ç¯‡æ–‡ç« ï¼Œæ¥ä¸‹æ¥å°±å¾ˆå®¹æ˜“ã€‚æˆ‘ä»¬åªéœ€è¦å°†launch.jasonæ–‡ä»¶ä¸­çš„programå±æ€§æ”¹ä¸º$&#123;workspaceFolder&#125;/build/qemu-system-riscv32å³å¯ã€‚ è°ƒè¯•æ‰“å¼€qemu-6.X.X/softmmu/main.cæ–‡ä»¶ï¼Œåœ¨mainå‡½æ•°å…¥å£å¤„æ‰“ä¸Šæ–­ç‚¹ï¼Œå³å¯å¼€å§‹è°ƒè¯•ã€‚ ç°åœ¨åªéœ€è¦ç‚¹å‡»å±å¹•ä¸Šçš„å›¾æ ‡ï¼Œå°±å¯ä»¥å¿«é€Ÿçš„è¿›è¡Œå•æ­¥è°ƒè¯•ã€‚ å¦‚æœéœ€è¦è¿›è¡Œå‘½ä»¤è¡Œæ“ä½œï¼Œåœ¨å±å¹•ä¸‹æ–¹æ‰“å¼€DEBUG CONSOLEï¼Œè¾“å…¥-exec+æ­£å¸¸å‘½ä»¤è¡Œä¸‹çš„å‘½ä»¤å³å¯åœ¨å‘½ä»¤è¡Œä¸­è¿›è¡Œæ›´å¤šçš„è°ƒè¯•ã€‚å¦‚æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯-exec info breakpoints","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"Qt æ¨¡ä»¿ç™»å½•ç•Œé¢-é¡µé¢åè½¬æ•ˆæœ","slug":"Qtæ¨¡ä»¿ç™»å½•ç•Œé¢-é¡µé¢åè½¬æ•ˆæœ","date":"2021-08-24T05:55:37.000Z","updated":"2022-10-15T03:14:29.492Z","comments":true,"path":"2021/08/24/Qtæ¨¡ä»¿ç™»å½•ç•Œé¢-é¡µé¢åè½¬æ•ˆæœ/","link":"","permalink":"http://example.com/2021/08/24/Qt%E6%A8%A1%E4%BB%BF%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-%E9%A1%B5%E9%9D%A2%E5%8F%8D%E8%BD%AC%E6%95%88%E6%9E%9C/","excerpt":"","text":"è®¾ç½®ä¸€ä¸ªæ—‹è½¬æ•ˆæœï¼Œå°†ç™»å½•ç•Œé¢æ—‹è½¬ç¿»ä¸ªé¢ï¼Œè®¾ç½®ä¸€äº›ç½‘ç»œå‚æ•°ã€‚ æ•ˆæœ ç½‘ç»œå‚æ•°è®¾ç½®ç•Œé¢å¸ƒå±€ ç½‘ç»œå‚æ•°è®¾ç½®ç•Œé¢123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//loginnetsetwindow.cpp//åˆå§‹åŒ–æ ‡é¢˜void LoginNetSetWindow::initMyTitle()&#123; m_titleBar-&gt;move(0, 0); m_titleBar-&gt;raise(); m_titleBar-&gt;setBackgroundColor(0, 0, 0, true); m_titleBar-&gt;setButtonType(MIN_BUTTON); m_titleBar-&gt;setTitleWidth(this-&gt;width()); m_titleBar-&gt;setMoveParentWindowFlag(false);&#125;void LoginNetSetWindow::initWindow()&#123; QLabel* pBack = new QLabel(this); QMovie *movie = new QMovie(); movie-&gt;setFileName(&quot;:/Resources/NetSetWindow/headBack.gif&quot;); pBack-&gt;setMovie(movie); movie-&gt;start(); pBack-&gt;move(0, 0); connect(ui.pButtonOk, SIGNAL(clicked()), this, SIGNAL(rotateWindow())); connect(ui.pButtonCancel, SIGNAL(clicked()), this, SIGNAL(rotateWindow())); ui.comboBoxNetType-&gt;addItem(QStringLiteral(&quot;ä¸ä½¿ç”¨ä»£ç†&quot;)); ui.comboBoxServerType-&gt;addItem(QStringLiteral(&quot;ä¸ä½¿ç”¨é«˜çº§é€‰é¡¹&quot;));&#125;void LoginNetSetWindow::paintEvent(QPaintEvent *event)&#123; // ç»˜åˆ¶èƒŒæ™¯å›¾; QPainter painter(this); QPainterPath pathBack; pathBack.setFillRule(Qt::WindingFill); pathBack.addRoundedRect(QRect(0, 0, this-&gt;width(), this-&gt;height()), 3, 3); painter.setRenderHint(QPainter::Antialiasing, true); painter.fillPath(pathBack, QBrush(QColor(235, 242, 249))); QPainterPath pathBottom; pathBottom.setFillRule(Qt::WindingFill); pathBottom.addRoundedRect(QRect(0, 300, this-&gt;width(), this-&gt;height() - 300), 3, 3); painter.setRenderHint(QPainter::Antialiasing, true); painter.fillPath(pathBottom, QBrush(QColor(205, 226, 242))); painter.setPen(QPen(QColor(160 , 175 , 189))); painter.drawRoundedRect(QRect(0, 0, this-&gt;width(), this-&gt;height()), 3, 3);&#125; initMyTitle()å°±ä¸å¤šè¯´äº†ï¼Œå’Œæ­£é¢ç™»å½•ç•Œé¢å·®ä¸å¤šã€‚ QPainterPathç±»å®ƒæ˜¯ç”±ä¸€äº›å›¾å½¢å¦‚æ›²çº¿ã€çŸ©å½¢ã€æ¤­åœ†ç»„æˆçš„å¯¹è±¡ã€‚ä¸»è¦çš„ç”¨é€”æ˜¯ï¼Œèƒ½ä¿å­˜å·²ç»ç»˜åˆ¶å¥½çš„å›¾å½¢ã€‚å®ç°å›¾å½¢å…ƒç´ çš„æ„é€ å’Œå¤ç”¨ï¼›å›¾å½¢çŠ¶åªéœ€åˆ›å»ºä¸€æ¬¡ï¼Œç„¶åè°ƒç”¨QPainter::drawPath() å‡½æ•°å¤šæ¬¡ç»˜åˆ¶ã€‚painterpathå¯ä»¥åŠ å…¥é—­åˆæˆ–ä¸é—­åˆçš„å›¾å½¢ ( å¦‚ï¼šçŸ©å½¢ã€æ¤­åœ†å’Œæ›²çº¿) ã€‚QPainterPath å¯ç”¨äºå¡«å……ï¼Œæè¾¹ï¼Œclippingã€‚ setFillRule()è®¾ç½®å¡«å……æ¨¡å¼ä¸æ˜¯å¾ˆç†è§£ https://doc.qt.io/qt-5/qt.html#FillRule-enum addRoundedRect(QRect(0, 0, this-&gt;width(), this-&gt;height()), 3, 3)åœ†è§’çŸ©å½¢ QRect(0, 300, this-&gt;width(), this-&gt;height() - 300)è®¾ç½®äº†çŸ©å½¢çš„ä½ç½®åŠå¤§å° (3,3)è¡¨ç¤ºå€’åœ†è§’çš„å¤§å° setRenderHint()å¼€å¯åèµ°æ · QPainter::Antialiasing å‘Šè¯‰ç»˜å›¾å¼•æ“åº”è¯¥åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¿›è¡Œè¾¹çš„åé”¯é½¿ç»˜åˆ¶ QPainter::TextAntialiasing å°½å¯èƒ½çš„æƒ…å†µä¸‹æ–‡å­—çš„åé”¯é½¿ç»˜åˆ¶ QPainter::SmoothPixmapTransform ä½¿ç”¨å¹³æ»‘çš„ pixmap å˜æ¢ç®—æ³• (åŒçº¿æ€§æ’å€¼ç®—æ³•),è€Œä¸æ˜¯è¿‘é‚»æ’å€¼ç®— åˆå§‹åŒ–æ—‹è½¬çª—å£1234567891011121314151617181920// åˆå§‹åŒ–æ—‹è½¬çš„çª—å£;void RotateWidget::initRotateWindow()&#123; m_loginWindow = new LoginWindow(this); // è¿™é‡Œå®šä¹‰äº†ä¸¤ä¸ªä¿¡å·ï¼Œéœ€è¦è‡ªå·±å»å‘é€ä¿¡å·; connect(m_loginWindow, SIGNAL(rotateWindow()), this, SLOT(onRotateWindow())); connect(m_loginWindow, SIGNAL(closeWindow()), this, SLOT(close())); connect(m_loginWindow, SIGNAL(hideWindow()), this, SLOT(onHideWindow())); m_loginNetSetWindow = new LoginNetSetWindow(this); connect(m_loginNetSetWindow, SIGNAL(rotateWindow()), this, SLOT(onRotateWindow())); connect(m_loginNetSetWindow, SIGNAL(closeWindow()), this, SLOT(close())); connect(m_loginNetSetWindow, SIGNAL(hideWindow()), this, SLOT(onHideWindow())); this-&gt;addWidget(m_loginWindow); this-&gt;addWidget(m_loginNetSetWindow); // è¿™é‡Œå®½å’Œé«˜éƒ½å¢åŠ ï¼Œæ˜¯å› ä¸ºåœ¨æ—‹è½¬è¿‡ç¨‹ä¸­çª—å£å®½å’Œé«˜éƒ½ä¼šå˜åŒ–; this-&gt;setFixedSize(QSize(m_loginWindow-&gt;width() + 20, m_loginWindow-&gt;height() + 100));&#125; å¯¹æ­£é¢å’Œåé¢åˆ†åˆ«å®šä¹‰äº†ä¿¡å·æ§½ï¼Œå½“å¯¹åº”çš„é¢æ¥æ”¶åˆ°ä¿¡å·æ—¶ï¼Œæ‰§è¡Œå¯¹åº”çš„åŠ¨ä½œã€‚å› ä¸ºæ˜¯æ—‹è½¬ä¸€ç™¾å…«ååº¦ï¼Œæ‰€ä»¥é€‰æ‹©å‡½æ•°å¯ä»¥å…¬ç”¨ã€‚ æ—‹è½¬çª—å£ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071// å¼€å§‹æ—‹è½¬çª—å£;void RotateWidget::onRotateWindow()&#123; // å¦‚æœçª—å£æ­£åœ¨æ—‹è½¬ï¼Œç›´æ¥è¿”å›; if (m_isRoratingWindow) &#123; return; &#125; m_isRoratingWindow = true; m_nextPageIndex = (currentIndex() + 1) &gt;= count() ? 0 : (currentIndex() + 1); QPropertyAnimation *rotateAnimation = new QPropertyAnimation(this, &quot;rotateValue&quot;); // è®¾ç½®æ—‹è½¬æŒç»­æ—¶é—´; rotateAnimation-&gt;setDuration(1500); // è®¾ç½®æ—‹è½¬è§’åº¦å˜åŒ–è¶‹åŠ¿; rotateAnimation-&gt;setEasingCurve(QEasingCurve::InCubic); // è®¾ç½®æ—‹è½¬è§’åº¦èŒƒå›´; rotateAnimation-&gt;setStartValue(0); rotateAnimation-&gt;setEndValue(180); connect(rotateAnimation, SIGNAL(valueChanged(QVariant)), this, SLOT(repaint())); connect(rotateAnimation, SIGNAL(finished()), this, SLOT(onRotateFinished())); // éšè—å½“å‰çª—å£ï¼Œé€šè¿‡ä¸åŒè§’åº¦çš„ç»˜åˆ¶æ¥è¾¾åˆ°æ—‹è½¬çš„æ•ˆæœ; currentWidget()-&gt;hide(); rotateAnimation-&gt;start();&#125;// æ—‹è½¬ç»“æŸ;void RotateWidget::onRotateFinished()&#123; m_isRoratingWindow = false; setCurrentWidget(widget(m_nextPageIndex)); repaint();&#125;/ ç»˜åˆ¶æ—‹è½¬æ•ˆæœ;void RotateWidget::paintEvent(QPaintEvent *event)&#123; if (m_isRoratingWindow) &#123; // å°äº 90 åº¦æ—¶; int rotateValue = this-&gt;property(&quot;rotateValue&quot;).toInt(); if (rotateValue &lt;= 90) &#123; QPixmap rotatePixmap(currentWidget()-&gt;size()); currentWidget()-&gt;render(&amp;rotatePixmap); QPainter painter(this); painter.setRenderHint(QPainter::Antialiasing); QTransform transform; transform.translate(width() / 2, 0); transform.rotate(rotateValue, Qt::YAxis); painter.setTransform(transform); painter.drawPixmap(-1 * width() / 2, 0, rotatePixmap); &#125; // å¤§äº 90 åº¦æ—¶ else &#123; QPixmap rotatePixmap(widget(m_nextPageIndex)-&gt;size()); widget(m_nextPageIndex)-&gt;render(&amp;rotatePixmap); QPainter painter(this); painter.setRenderHint(QPainter::Antialiasing); QTransform transform; transform.translate(width() / 2, 0); transform.rotate(rotateValue + 180, Qt::YAxis); painter.setTransform(transform); painter.drawPixmap(-1 * width() / 2, 0, rotatePixmap); &#125; &#125; else &#123; return QStackedWidget::paintEvent(event); &#125;&#125; QPropertyAnimationåŠ¨ç”»ç±»QPropertyAnimation *rotateAnimation = new QPropertyAnimation(this, &quot;rotateValue&quot;) rotateValueå°±æ˜¯è¿™ä¸ªåŠ¨ç”»çš„å±æ€§ï¼Œæˆ‘ä»¬è¿™ä¸ªåŠ¨ç”»ä¸­å˜åŒ–çš„å°±æ˜¯æ—‹è½¬å€¼ï¼Œä¹Ÿå°±æ˜¯æ—‹è½¬è§’åº¦ã€‚è¿™ä¸ªå±æ€§åå®Œå…¨è‡ªå·±èµ·ï¼Œä¹Ÿå¯ä»¥æ”¹æˆrotateAngleç­‰ç­‰ï¼Œæˆ–è€…è¯´æƒ³åšä¸€ä¸ªå¹³ç§»çš„åŠ¨ç”»ï¼Œä¹Ÿå¯ä»¥å–ä¸€ä¸ªmoveDistç­‰åå­—ã€‚ ä¸‹é¢è¿™ä¸€ä¸²å°±æ˜¯æ ‡å‡†çš„ä¸€å¥—åŠ¨ç”»æµç¨‹ 123456789// è®¾ç½®æ—‹è½¬æŒç»­æ—¶é—´;rotateAnimation-&gt;setDuration(1000);// è®¾ç½®æ—‹è½¬è§’åº¦å˜åŒ–è¶‹åŠ¿;rotateAnimation-&gt;setEasingCurve(QEasingCurve::InCubic);// è®¾ç½®æ—‹è½¬è§’åº¦èŒƒå›´;rotateAnimation-&gt;setStartValue(0);rotateAnimation-&gt;setEndValue(180);//å¼€å§‹åŠ¨ç”»rotateAnimation-&gt;start(); paintEventç»˜å›¾äº‹ä»¶12345678910#include &lt;QtWidgets/QApplication&gt;#include &quot;rotatewidget.h&quot;int main(int argc, char *argv[])&#123; QApplication a(argc, argv); RotateWidget w; w.show(); return a.exec();&#125; æˆ‘ä»¬mainå‡½æ•°å¾—çŸ¥ï¼Œæœ€å¼€å§‹æ˜¾ç¤ºçš„çª—å£å°±æ˜¯RotateWidgetã€‚åœ¨å®ä¾‹åŒ–ä¸€ä¸ªRotateWidgetç±»åï¼Œè¿›è¡Œäº†æ ‡é¢˜æ çš„åˆå§‹åŒ–å·¥ä½œï¼Œç„¶åå¼€å§‹æ‰§è¡Œw.show()æ˜¾ç¤ºï¼Œä½†æ˜¯æ­¤æ—¶çª—å£æ˜¯ä¸æ˜¾ç¤ºçš„ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨RotateWidgetçš„æ„é€ å‡½æ•°ä¸­è¿›è¡Œäº†è®¾ç½®ä¸æ˜¾ç¤ºçª—å£ã€‚ 123this-&gt;setWindowFlags(Qt::FramelessWindowHint | Qt::WindowStaysOnTopHint | Qt::WindowMinimizeButtonHint); å½“è¿è¡Œåˆ°return a.exec()æ—¶ï¼ŒQt ä¼šè‡ªåŠ¨è°ƒç”¨void RotateWidget::paintEvent()ã€‚æ­¤æ—¶å¼€å§‹æ­£å¼ç»˜åˆ¶çª—å£ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡å“Ÿç‚¹å‡»ç™»å½•é¡µé¢çš„ç½‘ç»œè®¾ç½®æŒ‰é’®ï¼Œæ‰€ä»¥m_isRoratingWindow=0ã€‚ä¼šè°ƒç”¨çˆ¶ç±»çš„ç»˜å›¾äº‹ä»¶ï¼ŒQStackedWidget::paintEvent()ï¼Œæœ€åä¹Ÿå°±æ˜¯BaseWindow::paintEvent()ã€‚ä¼šå°†ç™»å½•é¡µé¢å…ˆç»˜åˆ¶å‡ºæ¥ã€‚ å½“æˆ‘ä»¬ç‚¹å‡»ç½‘ç»œè®¾ç½®æŒ‰é’®æ—¶ï¼Œm_isRoratingWindow=1å¼€å§‹ç»˜åˆ¶æ—‹è½¬ç”»é¢ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"Linux æ“ä½œç³»ç»Ÿ-ç³»ç»Ÿåˆå§‹åŒ–","slug":"Linuxæ“ä½œç³»ç»Ÿ-ç³»ç»Ÿåˆå§‹åŒ–","date":"2021-08-24T01:45:57.000Z","updated":"2022-10-15T03:14:29.307Z","comments":true,"path":"2021/08/24/Linuxæ“ä½œç³»ç»Ÿ-ç³»ç»Ÿåˆå§‹åŒ–/","link":"","permalink":"http://example.com/2021/08/24/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/","excerpt":"","text":"ç³»ç»Ÿåˆå§‹åŒ–x86 æ¶æ„æ¦‚è¿°CPUï¼ˆCentral Processing Unitï¼‰ï¼šä¸­å¤®å¤„ç†å™¨ï¼Œè®¡ç®—æœºæ‰€æœ‰è®¾å¤‡éƒ½å›´ç»•å®ƒå±•å¼€å·¥ä½œã€‚ è¿ç®—å•å…ƒï¼šåªç®¡ç®—ï¼Œä¾‹å¦‚åšåŠ æ³•ã€åšä½ç§»ç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œå®ƒä¸çŸ¥é“åº”è¯¥ç®—å“ªäº›æ•°æ®ï¼Œè¿ç®—ç»“æœåº”è¯¥æ”¾åœ¨å“ªé‡Œã€‚ æ•°æ®å•å…ƒï¼šè¿ç®—å•å…ƒè®¡ç®—çš„æ•°æ®å¦‚æœæ¯æ¬¡éƒ½è¦ç»è¿‡æ€»çº¿ï¼Œåˆ°å†…å­˜é‡Œé¢ç°æ‹¿ï¼Œè¿™æ ·å°±å¤ªæ…¢äº†ï¼Œæ‰€ä»¥å°±æœ‰äº†æ•°æ®å•å…ƒã€‚æ•°æ®å•å…ƒåŒ…æ‹¬ CPU å†…éƒ¨çš„ç¼“å­˜å’Œå¯„å­˜å™¨ç»„ï¼Œç©ºé—´å¾ˆå°ï¼Œä½†æ˜¯é€Ÿåº¦é£å¿«ï¼Œå¯ä»¥æš‚æ—¶å­˜æ”¾æ•°æ®å’Œè¿ç®—ç»“æœã€‚ æ§åˆ¶å•å…ƒï¼šæœ‰äº†æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œä¹Ÿæœ‰äº†ç®—çš„åœ°æ–¹ï¼Œè¿˜éœ€è¦æœ‰ä¸ªæŒ‡æŒ¥åˆ°åº•åšä»€ä¹ˆè¿ç®—çš„åœ°æ–¹ï¼Œè¿™å°±æ˜¯æ§åˆ¶å•å…ƒã€‚æ§åˆ¶å•å…ƒæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æŒ‡æŒ¥ä¸­å¿ƒï¼Œå®ƒå¯ä»¥è·å¾—ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œè¿™æ¡æŒ‡ä»¤ã€‚è¿™ä¸ªæŒ‡ä»¤ä¼šæŒ‡å¯¼è¿ç®—å•å…ƒå–å‡ºæ•°æ®å•å…ƒä¸­çš„æŸå‡ ä¸ªæ•°æ®ï¼Œè®¡ç®—å‡ºä¸ªç»“æœï¼Œç„¶åæ”¾åœ¨æ•°æ®å•å…ƒçš„æŸä¸ªåœ°æ–¹ã€‚ å†…å­˜ï¼ˆMemoryï¼‰ï¼šCPU æœ¬èº«ä¸èƒ½ä¿å­˜å¤§é‡æ•°æ®ï¼Œè®¸å¤šå¤æ‚çš„è®¡ç®—éœ€è¦å°†ä¸­é—´ç»“æœä¿å­˜ä¸‹æ¥å°±å¿…é¡»ç”¨åˆ°å†…å­˜ã€‚ æ€»çº¿ï¼ˆBusï¼‰ï¼šCPU å’Œå…¶ä»–è®¾å¤‡è¿æ¥ï¼Œå°±é æ€»çº¿ï¼Œå…¶å®å°±æ˜¯ä¸»æ¿ä¸Šå¯†å¯†éº»éº»çš„é›†æˆç”µè·¯ï¼Œè¿™äº›ä¸œè¥¿ç»„æˆäº† CPU å’Œå…¶ä»–è®¾å¤‡çš„é«˜é€Ÿé€šé“ã€‚ åœ°å€æ€»çº¿ï¼šä¼ è¾“åœ°å€æ•°æ®ï¼ˆæˆ‘æƒ³æ‹¿å†…å­˜ä¸­å“ªä¸ªä½ç½®çš„æ•°æ®ï¼‰ æ•°æ®æ€»çº¿ï¼šä¼ è¾“çœŸæ­£çš„æ•°æ® æ€»çº¿å°±åƒ CPU å’Œå†…å­˜ä¹‹é—´çš„é«˜é€Ÿå…¬è·¯ï¼Œæ€»çº¿å¤šå°‘ä½å°±ç±»ä¼¼é«˜é€Ÿå…¬è·¯å¤šå°‘ä¸ªè½¦é“ï¼Œä½†ä¸¤ç§æ€»çº¿çš„ä½æ•°æ„ä¹‰ä¸åŒã€‚ åœ°å€æ€»çº¿çš„ä½æ•°å†³å®šäº†è®¿é—®åœ°å€èŒƒå›´æœ‰å¤šå¹¿ï¼Œæ•°æ®æ€»çº¿ä½æ•°å†³å®šäº†ä¸€æ¬¡èƒ½æ‹¿å¤šå°‘æ•°æ®è¿›æ¥ã€‚é‚£ä¹ˆ CPU ä¸­æ€»çº¿çš„ä½æ•°æœ‰æ²¡æœ‰æ ‡å‡†å‘¢ï¼Ÿå¦‚æœæ²¡æœ‰æ ‡å‡†ï¼Œé‚£æ“ä½œç³»ç»Ÿä½œä¸ºè½¯ä»¶å°±å¾ˆéš¾åŠäº†ï¼Œå› ä¸ºè½¯ä»¶å±‚æ²¡åŠæ³•å®ç°é€šç”¨çš„è¿ç®—é€»è¾‘ã€‚æ—©æœŸæ¯å®¶å…¬å¸çš„ CPU æ¶æ„éƒ½ä¸åŒï¼Œåæ¥å†å²å°† x86 å¹³å°æ¨åˆ°äº†å¼€æ”¾ï¼Œç»Ÿä¸€ï¼Œå…¼å®¹çš„ä½ç½®ã€‚ 8086 æ¶æ„å›¾ æ•°æ®å•å…ƒï¼š 8086 å¤„ç†å™¨å†…éƒ¨å…±æœ‰ 8 ä¸ª 16 ä½çš„é€šç”¨å¯„å­˜å™¨ï¼Œåˆ†åˆ«æ˜¯ æ•°æ®å¯„å­˜å™¨ï¼ˆAXã€BXã€CXã€DXï¼‰ã€æŒ‡é’ˆå¯„å­˜å™¨ï¼ˆSPã€BPï¼‰ã€å˜å€å¯„å­˜å™¨ï¼ˆSIã€DIï¼‰ã€‚å…¶ä¸­ AXã€BXã€CXã€DX å¯ä»¥åˆ†æˆä¸¤ä¸ª 8 ä½çš„å¯„å­˜å™¨æ¥ä½¿ç”¨ï¼Œåˆ†åˆ«æ˜¯ AHã€ALã€BHã€BLã€CHã€CLã€DHã€DLï¼Œå…¶ä¸­ H å°±æ˜¯ Highï¼ˆé«˜ä½ï¼‰ï¼ŒL å°±æ˜¯ Lowï¼ˆä½ä½ï¼‰çš„æ„æ€ã€‚ æ§åˆ¶å•å…ƒï¼š IP å¯„å­˜å™¨ï¼ˆInstruction Pointer Registerï¼‰å°±æ˜¯æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼Œå®ƒæŒ‡å‘ä»£ç æ®µä¸­ä¸‹ä¸€æ¡æŒ‡ä»¤çš„ä½ç½®ã€‚CPU ä¼šæ ¹æ®å®ƒæ¥ä¸æ–­åœ°å°†æŒ‡ä»¤ä»å†…å­˜çš„ä»£ç æ®µä¸­ï¼ŒåŠ è½½åˆ° CPU çš„æŒ‡ä»¤é˜Ÿåˆ—ä¸­ï¼Œç„¶åäº¤ç»™è¿ç®—å•å…ƒå»æ‰§è¡Œã€‚ å¦‚æœéœ€è¦åˆ‡æ¢è¿›ç¨‹å‘¢ï¼Ÿæ¯ä¸ªè¿›ç¨‹éƒ½åˆ†ä»£ç æ®µå’Œæ•°æ®æ®µï¼Œä¸ºäº†æŒ‡å‘ä¸åŒè¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œæœ‰å››ä¸ª 16 ä½çš„æ®µå¯„å­˜å™¨ï¼Œåˆ†åˆ«æ˜¯ CSã€DSã€SSã€ESã€‚ å…¶ä¸­ï¼ŒCS å°±æ˜¯ä»£ç æ®µå¯„å­˜å™¨ï¼ˆCode Segment Registerï¼‰ï¼Œé€šè¿‡å®ƒå¯ä»¥æ‰¾åˆ°ä»£ç åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼›DS æ˜¯æ•°æ®æ®µçš„å¯„å­˜å™¨ï¼ˆData Segment Registerï¼‰ï¼Œé€šè¿‡å®ƒå¯ä»¥æ‰¾åˆ°æ•°æ®åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚SS æ˜¯æ ˆå¯„å­˜å™¨ï¼ˆStack Registerï¼‰ã€‚æ ˆæ˜¯ç¨‹åºè¿è¡Œä¸­ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œæ•°æ®çš„å­˜å–åªèƒ½ä»ä¸€ç«¯è¿›è¡Œï¼Œç§‰æ‰¿åè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚ESæ˜¯æ‰©å±•æ®µå¯„å­˜å™¨ï¼ˆExtra Segment Registerï¼‰é¡¾åæ€ä¹‰ã€‚ å¦‚æœ CPU è¿ç®—ä¸­éœ€è¦åŠ è½½å†…å­˜ä¸­çš„æ•°æ®ï¼Œéœ€è¦é€šè¿‡ DS æ‰¾åˆ°å†…å­˜ä¸­çš„æ•°æ®ï¼ŒåŠ è½½åˆ°é€šç”¨å¯„å­˜å™¨ä¸­ï¼Œåº”è¯¥å¦‚ä½•åŠ è½½å‘¢ï¼Ÿå¯¹äºä¸€ä¸ªæ®µï¼Œæœ‰ä¸€ä¸ªèµ·å§‹çš„åœ°å€ï¼Œè€Œæ®µå†…çš„å…·ä½“ä½ç½®ï¼Œæˆ‘ä»¬ç§°ä¸ºåç§»é‡ï¼ˆOffsetï¼‰ã€‚åœ¨ CS å’Œ DS ä¸­éƒ½å­˜æ”¾ç€ä¸€ä¸ªæ®µçš„èµ·å§‹åœ°å€ã€‚ä»£ç æ®µçš„åç§»é‡åœ¨ IP å¯„å­˜å™¨ä¸­ï¼Œæ•°æ®æ®µçš„åç§»é‡ä¼šæ”¾åœ¨é€šç”¨å¯„å­˜å™¨ä¸­ã€‚å› ä¸ºæ®µå¯„å­˜å™¨éƒ½æ˜¯ 16 ä½çš„ï¼Œè€Œåœ°å€æ€»çº¿æ˜¯ 20 ä½çš„ï¼Œæ‰€ä»¥é€šè¿‡ *èµ·å§‹åœ°å€ 16+ åç§»é‡ çš„æ–¹å¼ï¼Œå°†å¯»å€ä½æ•°éƒ½å˜æˆ 20 ä½ï¼Œä¹Ÿå°±æ˜¯å°† CS å’Œ DS çš„å€¼å·¦ç§» 4 ä½ã€‚ å¯¹äºåªæœ‰ 20 ä½åœ°å€æ€»çº¿çš„ 8086 æ¥è¯´ï¼Œå¯»å€ç©ºé—´æœ€å¤§ä¹Ÿå°±æ˜¯$2^{20}=1\\text{M}$ï¼Œè¶…è¿‡è¿™ä¸ªä½ç½®å°±è®¿é—®ä¸åˆ°äº†ï¼Œä¸€ä¸ªæ®µå› ä¸ºåç§»é‡åªæœ‰ 16 ä½ï¼Œæ‰€ä»¥ä¸€ä¸ªæ®µæœ€å¤§æ˜¯$2^{16}=64\\text{k}$ã€‚ 32 ä½å¤„ç†å™¨éšç€è®¡ç®—æœºå‘å±•ï¼Œå†…å­˜è¶Šæ¥è¶Šå¤§ï¼Œæ€»çº¿ä¹Ÿè¶Šæ¥è¶Šå®½ã€‚åœ¨ 32 ä½å¤„ç†å™¨ä¸­ï¼Œæœ‰ 32 æ ¹åœ°å€æ€»çº¿ï¼Œå¯ä»¥è®¿é—® $2^{32}=4\\text{G}$ çš„å†…å­˜ã€‚ä½¿ç”¨åŸæ¥çš„æ¨¡å¼è‚¯å®šä¸è¡Œäº†ï¼Œä½†æ˜¯åˆä¸èƒ½å®Œå…¨æŠ›å¼ƒåŸæ¥çš„æ¨¡å¼ï¼Œå› ä¸ºè¿™ä¸ªæ¶æ„æ˜¯å¼€æ”¾çš„ã€‚é‚£ä¹ˆåœ¨å¼€å‘æ¶æ„çš„åŸºç¡€ä¸Šå¦‚ä½•ä¿æŒå…¼å®¹å‘¢ï¼Ÿ é¦–å…ˆï¼Œé€šç”¨å¯„å­˜å™¨æœ‰æ‰©å±•ï¼Œå¯ä»¥å°† 8 ä¸ª 16 ä½çš„æ‰©å±•åˆ° 8 ä¸ª 32 ä½çš„ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ä¿ç•™ 16 ä½çš„å’Œ 8 ä½çš„ä½¿ç”¨æ–¹å¼ã€‚å…¶ä¸­ï¼ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤çš„æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ IPï¼Œå°±ä¼šæ‰©å±•æˆ 32 ä½çš„ï¼ŒåŒæ ·ä¹Ÿå…¼å®¹ 16 ä½çš„ã€‚ æ®µå¯„å­˜å™¨æ”¹åŠ¨è¾ƒå¤§ï¼Œæ–°çš„æ®µå¯„å­˜å™¨éƒ½æ”¹æˆäº† 32 ä½çš„ï¼Œæ¯ä¸ªå¯„å­˜å™¨åˆåˆ†ä¸ºæ®µæè¿°ç¬¦ç¼“å­˜å™¨ï¼ˆSegment Descriptorï¼‰ï¼Œå’Œæ®µé€‰æ‹©å­å¯„å­˜å™¨ï¼ˆSelectorï¼‰ ,ç°åœ¨çš„æ®µå¯„å­˜å™¨ä¸åœ¨æ˜¯æ®µçš„èµ·å§‹åœ°å€ï¼Œæ®µçš„èµ·å§‹åœ°å€ä¿å­˜åœ¨è¡¨æ ¼ä¸€æ ·çš„æ®µæè¿°ç¬¦ç¼“å†²å™¨ä¸­ï¼Œæ®µé€‰æ‹©å­å¯„å­˜å™¨ä¿å­˜åœ°å€åœ¨æ®µæè¿°ç¬¦ç¼“å­˜å™¨ä¸­çš„å“ªä¸€é¡¹ã€‚è¿™æ ·ï¼Œå°†ä¸€ä¸ªä»æ®µå¯„å­˜å™¨ç›´æ¥æ‹¿åˆ°çš„æ®µèµ·å§‹åœ°å€ï¼Œå°±å˜æˆäº†å…ˆé—´æ¥åœ°ä»æ®µå¯„å­˜å™¨æ‰¾åˆ°è¡¨æ ¼ä¸­çš„ä¸€é¡¹ï¼Œå†ä»è¡¨æ ¼ä¸­çš„ä¸€é¡¹ä¸­æ‹¿åˆ°æ®µèµ·å§‹åœ°å€ã€‚ è™½ç„¶ç°åœ¨çš„è¿™ç§æ¨¡å¼å’Œä¹‹å‰çš„æ¨¡å¼ä¸å…¼å®¹ï¼Œä½†æ˜¯åé¢è¿™ç§æ¨¡å¼çµæ´»çš„éå¸¸é«˜ï¼Œå¯ä»¥ä¿æŒä¸€ç›´å…¼å®¹ä¸‹å»ã€‚åœ¨ 32 ä½çš„ç³»ç»Ÿæ¶æ„ä¸‹ï¼Œå°†å‰ä¸€ç§æ¨¡å¼ç§°ä¸ºå®æ¨¡å¼ï¼ˆReal Patternï¼‰ï¼Œåä¸€ç§æ¨¡å¼ç§°ä¸ºä¿æŠ¤æ¨¡å¼ï¼ˆProtected Patternï¼‰ ã€‚å½“ç³»ç»Ÿåˆšåˆšå¯åŠ¨çš„æ—¶å€™ï¼ŒCPU æ˜¯å¤„äºå®æ¨¡å¼çš„ï¼Œè¿™ä¸ªæ—¶å€™å’ŒåŸæ¥çš„æ¨¡å¼æ˜¯å…¼å®¹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå“ªæ€•ä½ ä¹°äº† 32 ä½çš„ CPUï¼Œä¹Ÿæ”¯æŒåœ¨åŸæ¥çš„æ¨¡å¼ä¸‹è¿è¡Œã€‚ æ±‡ç¼–å‘½ä»¤å­¦ä¹ mov,call, jmp, int, ret, add, or, xor, shl, shr, push, pop, inc, dec, sub, cmpã€‚ BIOS ä¸ BootLoaderBIOSï¼šåŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ ROMï¼šåªè¯»å­˜å‚¨å™¨ RAMï¼šéšæœºå­˜å–å­˜å‚¨å™¨ åœ¨æˆ‘ä»¬æŒ‰ä¸‹ç”µè„‘ç”µæºé”®çš„é‚£ä¸€åˆ»ï¼Œä¸»æ¿å°±åŠ ç”µäº†ï¼ŒCPU å°±è¦å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤äº†ï¼Œä½†æ˜¯åˆšå¼€å§‹æ“ä½œç³»ç»Ÿéƒ½æ²¡ï¼ŒCPU æ‰§è¡Œä»€ä¹ˆæŒ‡ä»¤å‘¢ï¼Ÿè¿™å°±æœ‰äº†BIOSï¼Œå®ƒç›¸å½“äºä¸€ä¸ªæŒ‡å¯¼æ‰‹å†Œï¼Œå‘Šè¯‰ CPU æ¥ä¸‹æ¥è¦å¹²å•¥ã€‚ åˆšå¼€æœºæ—¶ï¼Œç³»ç»Ÿåˆå§‹åŒ–ä»£ç ä» ROM è¯»å–ï¼Œå°† CS è®¾ç½®ä¸º 0xFFFFï¼Œå°† IP è®¾ç½®ä¸º 0x0000ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¡æŒ‡ä»¤å°±ä¼šæŒ‡å‘ 0xFFFF0ï¼Œåˆå§‹åŒ–å®Œæˆåç¡®å®šè®¿é—®æŒ‡ä»¤ä½ç½®ã€‚ æ¥ä¸‹æ¥ BIOS ä¼šæ£€æŸ¥å„ä¸ªç¡¬ä»¶æ˜¯å¦æ­£å¸¸ï¼Œæ£€æµ‹å†…å®¹æ˜¾å¡ç­‰å…³é”®éƒ¨ä»¶çš„å­˜åœ¨äºå·¥ä½œçŠ¶æ€ï¼Œè®¾å¤‡åˆå§‹åŒ–ï¼Œæ‰§è¡Œç³»ç»Ÿ BIOS è¿›è¡Œç³»ç»Ÿæ£€æµ‹ï¼Œæ›´æ–° CMOS ä¸­çš„æ‰©å±•ç³»ç»Ÿé…ç½®æ•°æ® ESCDã€‚è¿™æœŸé—´ä¹Ÿä¼šå»ºç«‹ä¸­æ–­å‘é‡è¡¨å’Œä¸­æ–­æœåŠ¡ç¨‹åºï¼Œå› ä¸ºè¦ä½¿ç”¨é”®ç›˜é¼ æ ‡éƒ½éœ€è¦ä¸­æ–­è¿›è¡Œã€‚ ä¸‹ä¸€æ­¥ BIOS å°±å¾—è¦æ‰¾æ“ä½œç³»ç»Ÿäº†ï¼Œæ“ä½œç³»ç»Ÿä¸€èˆ¬å®‰è£…åœ¨ç¡¬ç›˜ä¸Šï¼Œä½†æ˜¯ BIOS å¾—å…ˆæ‰¾åˆ°å¯åŠ¨ç›˜ï¼Œå¯åŠ¨ç›˜ä¸€èˆ¬å®‰è£…åœ¨ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå  512 å­—èŠ‚ï¼Œä¼šåŒ…å«å¯åŠ¨çš„ç›¸å…³ä»£ç ã€‚åœ¨ Linux ä¸­ï¼Œå¯ä»¥é€šè¿‡Grub2é…ç½®è¿™äº›ä»£ç ã€‚ 1grub2-mkconfig -o /boot/grub2/grub.cfg grub2ç¬¬ä¸€ä¸ªè¦å®‰è£…çš„å°±æ˜¯boot.imgã€‚å®ƒç”± boot.Sç¼–è¯‘è€Œæˆï¼Œä¸€å…± 512 å­—èŠ‚ï¼Œæ­£å¼å®‰è£…åˆ°å¯åŠ¨ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºã€‚è¿™ä¸ªæ‰‡åŒºé€šå¸¸ç§°ä¸ºMBRï¼ˆMaster Boot Recordï¼Œä¸»å¼•å¯¼è®°å½• / æ‰‡åŒºï¼‰ã€‚ BIOS å®Œæˆä»»åŠ¡åï¼Œä¼šå°† boot.img ä»ç¡¬ç›˜åŠ è½½åˆ°å†…å­˜ä¸­çš„ 0x7c00æ¥è¿è¡Œã€‚ ç”±äº 512 ä¸ªå­—èŠ‚å®åœ¨æœ‰é™ï¼Œboot.img åšä¸äº†å¤ªå¤šçš„äº‹æƒ…ã€‚å®ƒèƒ½åšçš„æœ€é‡è¦çš„ä¸€ä¸ªäº‹æƒ…å°±æ˜¯åŠ è½½grub2 çš„å¦ä¸€ä¸ªé•œåƒ core.imgã€‚ core.img ç”±lzma_decompress.imgã€diskboot.imgã€kernel.img å’Œä¸€ç³»åˆ—çš„æ¨¡å—ç»„æˆï¼ŒåŠŸèƒ½æ¯”è¾ƒä¸°å¯Œï¼Œèƒ½åšå¾ˆå¤šäº‹æƒ…ã€‚ boot.img å…ˆåŠ è½½çš„æ˜¯ core.img çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºã€‚å¦‚æœä»ç¡¬ç›˜å¯åŠ¨çš„è¯ï¼Œè¿™ä¸ªæ‰‡åŒºé‡Œé¢æ˜¯diskboot.imgï¼Œå¯¹åº”çš„ä»£ç æ˜¯ diskboot.Sã€‚ boot.img å°†æ§åˆ¶æƒäº¤ç»™ diskboot.img åï¼Œdiskboot.img çš„ä»»åŠ¡å°±æ˜¯å°†core.img çš„å…¶ä»–éƒ¨åˆ†åŠ è½½è¿›æ¥ï¼Œå…ˆæ˜¯è§£å‹ç¼©ç¨‹åº lzma_decompress.imgï¼Œå†å¾€ä¸‹æ˜¯ kernel.imgï¼Œæœ€åæ˜¯å„ä¸ªæ¨¡å—moduleå¯¹åº”çš„æ˜ åƒã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå®ƒä¸æ˜¯ Linux çš„å†…æ ¸ï¼Œè€Œæ˜¯grub çš„å†…æ ¸ã€‚ åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬æ‰€æœ‰é‡åˆ°è¿‡çš„ç¨‹åºéƒ½éå¸¸éå¸¸å°ï¼Œå®Œå…¨å¯ä»¥åœ¨å®æ¨¡å¼ä¸‹è¿è¡Œï¼Œä½†æ˜¯éšç€æˆ‘ä»¬åŠ è½½çš„ä¸œè¥¿è¶Šæ¥è¶Šå¤§ï¼Œå®æ¨¡å¼è¿™1M çš„åœ°å€ç©ºé—´å®åœ¨æ”¾ä¸ä¸‹äº†ï¼Œæ‰€ä»¥åœ¨çœŸæ­£çš„è§£å‹ç¼©ä¹‹å‰ï¼Œlzma_decompress.img åšäº†ä¸€ä¸ªé‡è¦çš„å†³å®šï¼Œå°±æ˜¯è°ƒç”¨ real_to_protï¼Œåˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ï¼Œè¿™æ ·å°±èƒ½åœ¨æ›´å¤§çš„å¯»å€ç©ºé—´é‡Œé¢ï¼ŒåŠ è½½æ›´å¤šçš„ä¸œè¥¿ã€‚ BIOSå°†åŠ è½½ç¨‹åºä»ç¡¬ç›˜çš„å¼•å¯¼æ‰‡åŒºåŠ è½½åˆ°æŒ‡å®šä½ç½®ï¼Œå†è·³è½¬åˆ°æŒ‡å®šä½ç½®ï¼Œå°†æ§åˆ¶æƒè½¬äº¤ç»™åŠ è½½ç¨‹åºã€‚åŠ è½½ç¨‹åºå°†æ“ä½œç³»ç»Ÿä»£ç è¯»å–åˆ°å†…å­˜ï¼Œå¹¶å°†æ§åˆ¶æƒè½¬åˆ°æ“ä½œç³»ç»Ÿã€‚ Qï¼šBIOS-æ“ä½œç³»ç»Ÿï¼Œä¸­é—´ç»è¿‡åŠ è½½ç¨‹åºã€‚ä¸ºä½•ä¸ç›´æ¥è¯»å–ï¼ŸAï¼šç£ç›˜æ–‡ä»¶ç³»ç»Ÿå¤šç§å¤šæ ·ï¼Œç¡¬ç›˜å‡ºå‚æ—¶ä¸èƒ½é™åˆ¶åªèƒ½ç”¨ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œ BIOS ä¹Ÿä¸èƒ½åŠ ä¸Šè¯†åˆ«æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿçš„ä»£ç ã€‚æ‰€æœ‰ä¸ºäº†çµæ´»æ€§åªè¯»å–ç£ç›˜çš„ä¸€å—ï¼Œç”±åŠ è½½ç¨‹åºæ¥è¯†åˆ«ç£ç›˜çš„æ–‡ä»¶ç³»ç»Ÿã€‚ åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼åï¼Œå°†ä¼šåšä»¥ä¸‹è¿™äº›äº‹ï¼Œå¤§å¤šæ•°éƒ½ä¸å†…å­˜è®¿é—®æ–¹å¼æœ‰å…³ã€‚ é¦–å…ˆå¯åŠ¨åˆ†æ®µï¼Œå°±æ˜¯åœ¨å†…å­˜é‡Œé¢å»ºç«‹æ®µæè¿°ç¬¦è¡¨ï¼Œå°†å¯„å­˜å™¨é‡Œé¢çš„æ®µå¯„å­˜å™¨å˜æˆæ®µé€‰æ‹©å­ï¼ŒæŒ‡å‘æŸä¸ªæ®µæè¿°ç¬¦ï¼Œè¿™æ ·å°±èƒ½å®ç°ä¸åŒè¿›ç¨‹çš„åˆ‡æ¢äº†ã€‚ æ¥ç€æ˜¯å¯åŠ¨åˆ†é¡µã€‚èƒ½å¤Ÿç®¡ç†çš„å†…å­˜å˜å¤§äº†ï¼Œå°±éœ€è¦å°†å†…å­˜åˆ†æˆç›¸ç­‰å¤§å°çš„å—ã€‚ æ‰“å¼€ Gate20ï¼Œä¹Ÿå°±æ˜¯ç¬¬ 21 æ ¹åœ°å€çº¿çš„æ§åˆ¶çº¿ã€‚å› ä¸ºåœ¨å®æ¨¡å¼ 8086 ä¸‹ï¼Œä¸€å…±å°± 20 æ ¹åœ°å€çº¿ï¼Œæœ€å¤§è®¿é—®1Mçš„åœ°å€ç©ºé—´ã€‚åˆ‡æ¢ä¿æŠ¤æ¨¡å¼çš„å‡½æ•°DATA32 call real_to_protä¼šæ‰“å¼€Gate A20ã€‚ ç°åœ¨å¥½äº†ï¼Œæœ‰çš„æ˜¯ç©ºé—´äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦å¯¹å‹ç¼©è¿‡çš„ kernel.img è¿›è¡Œè§£å‹ç¼©ï¼Œç„¶åè·³è½¬åˆ° kernel.img å¼€å§‹è¿è¡Œã€‚ å†…æ ¸åˆå§‹åŒ– start_kernel() INIT_TASK(init_task) trap_init() mm_init() sched_init() rest_init() kernel_thread(kernel_init, NULL,CLONE_FS) kernel_thread(kthreadd, NULL, CLONE_FS | CLONE_FILES) å†…æ ¸çš„å¯åŠ¨ä»å…¥å£å‡½æ•°start_kernel() å¼€å§‹ã€‚åœ¨ init/main.c æ–‡ä»¶ä¸­ï¼Œstart_kernel ç›¸å½“äºå†…æ ¸çš„ main å‡½æ•°ã€‚æ‰“å¼€è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œé‡Œé¢æ˜¯å„ç§å„æ ·åˆå§‹åŒ–å‡½æ•° XXXX_initã€‚ åœ¨æ“ä½œç³»ç»Ÿé‡Œé¢ï¼Œå…ˆè¦æœ‰ä¸ªåˆ›å§‹è¿›ç¨‹ï¼Œæœ‰ä¸€è¡ŒæŒ‡ä»¤ set_task_stack_end_magic(&amp;init_task)ã€‚è¿™é‡Œé¢æœ‰ä¸€ä¸ªå‚æ•° init_taskï¼Œå®ƒçš„å®šä¹‰æ˜¯ struct task_struct init_task = INIT_TASK(init_task)ã€‚å®ƒæ˜¯ç³»ç»Ÿåˆ›å»ºçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸º0å·è¿›ç¨‹ã€‚è¿™æ˜¯å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰é€šè¿‡fork æˆ–è€…kernel_thread äº§ç”Ÿçš„è¿›ç¨‹ï¼Œæ˜¯è¿›ç¨‹åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªã€‚ trap_init()é‡Œè®¾ç½®äº†å¾ˆå¤š**ä¸­æ–­é—¨ (Interrupt Gate)**å¤„ç†å„ç§ä¸­æ–­ã€‚ mm_init()åˆå§‹åŒ–å†…å­˜ç®¡ç†æ¨¡å—ï¼Œsched_init()åˆå§‹åŒ–è°ƒåº¦æ¨¡å—ã€‚ vfs_caches_init() ä¼šç”¨æ¥åˆå§‹åŒ–åŸºäºå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿ rootfsã€‚åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œä¼šè°ƒç”¨ mnt_init()-&gt;init_rootfs()ã€‚è¿™é‡Œé¢æœ‰ä¸€è¡Œä»£ç ï¼Œregister_filesystem(&amp;rootfs_fs_type)ã€‚åœ¨ VFS è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿé‡Œé¢æ³¨å†Œäº†ä¸€ç§ç±»å‹ï¼Œæˆ‘ä»¬å®šä¹‰ä¸º struct file_system_type rootfs_fs_typeã€‚ä¸ºäº†å…¼å®¹å„ç§å„æ ·çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦å°†æ–‡ä»¶çš„ç›¸å…³æ•°æ®ç»“æ„å’Œæ“ä½œæŠ½è±¡å‡ºæ¥ï¼Œå½¢æˆä¸€ä¸ªæŠ½è±¡å±‚å¯¹ä¸Šæä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œè¿™ä¸ªæŠ½è±¡å±‚å°±æ˜¯ VFSï¼ˆVirtual File Systemï¼‰ï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚ æœ€åstart_kernel()è°ƒç”¨rest_init()æ¥åšå…¶ä»–æ–¹é¢çš„åˆå§‹åŒ–ï¼Œå¦‚åˆå§‹åŒ– 1 å·è¿›ç¨‹ï¼Œå†…æ ¸æ€ä¸ç”¨æˆ·æ€è½¬åŒ–ç­‰ã€‚ rest_init çš„ç¬¬ä¸€å¤§å·¥ä½œæ˜¯ï¼Œç”¨ kernel_thread(kernel_init, NULL, CLONE_FS)åˆ›å»ºç¬¬äºŒä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªæ˜¯1 å·è¿›ç¨‹ã€‚è¿™å¯¹æ“ä½œç³»ç»Ÿæ„ä¹‰éå‡¡ï¼Œå› ä¸ºä»–å°†è¿è¡Œç¬¬ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ï¼Œä¸€æ—¦æœ‰äº†ç”¨æˆ·è¿›ç¨‹ï¼Œè¿è¡Œæ¨¡å¼ä¹Ÿå°†å‘ç”Ÿæ”¹å˜ï¼Œä¹‹å‰æ‰€æœ‰èµ„æºéƒ½æ˜¯ç»™ä¸€ä¸ªè¿›ç¨‹ç”¨ï¼Œç°åœ¨æœ‰äº†ç”¨æˆ·è¿›ç¨‹ï¼Œå°±ä¼šå‡ºç°æŠ¢å¤ºèµ„æºçš„ç°è±¡ã€‚èµ„æºä¹Ÿåˆ†æ ¸å¿ƒå’Œéæ ¸å¿ƒèµ„æºï¼Œå…·æœ‰ä¸åŒæƒé™çš„è¿›ç¨‹å¯ä»¥è·å–ä¸åŒçš„èµ„æºã€‚x86æä¾›äº†åˆ†å±‚çš„æƒé™æœºåˆ¶ï¼Œåˆ†æˆå››ä¸ªRingï¼Œè¶Šå¾€é‡Œæƒé™è¶Šé«˜ã€‚ æ“ä½œç³»ç»Ÿå¾ˆå¥½åœ°åˆ©ç”¨äº†è¿™ä¸ªæœºåˆ¶ï¼Œå°†èƒ½å¤Ÿè®¿é—®å…³é”®èµ„æºçš„ä»£ç æ”¾åœ¨ Ring0ï¼Œæˆ‘ä»¬ç§°ä¸ºå†…æ ¸æ€ï¼ˆKernel Modeï¼‰ï¼›å°†æ™®é€šçš„ç¨‹åºä»£ç æ”¾åœ¨ Ring3ï¼Œæˆ‘ä»¬ç§°ä¸ºç”¨æˆ·æ€ï¼ˆUser Modeï¼‰ã€‚ ç»§ç»­æ¢ç©¶kernel_thread()è¿™ä¸ªå‡½æ•°ï¼Œå®ƒçš„ä¸€ä¸ªå‚æ•°æœ‰ä¸€ä¸ªå‡½æ•°kernel_initï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œä¼šè°ƒç”¨kernel_init_freeable()ï¼Œé‡Œé¢æœ‰è¿™æ ·ä¸€æ®µä»£ç  12if (!ramdisk_execute_command) ramdisk_execute_command = &quot;/init&quot;; å…ˆä¸ç®¡ramdisk æ˜¯å•¥ï¼Œæˆ‘ä»¬å›åˆ° kernel_init é‡Œé¢ã€‚è¿™é‡Œé¢æœ‰è¿™æ ·çš„ä»£ç å—ï¼š 12345678910if (ramdisk_execute_command) &#123; ret = run_init_process(ramdisk_execute_command);....&#125;....if (!try_to_run_init_process(&quot;/sbin/init&quot;) || !try_to_run_init_process(&quot;/etc/init&quot;) || !try_to_run_init_process(&quot;/bin/init&quot;) || !try_to_run_init_process(&quot;/bin/sh&quot;)) return 0; æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ1 å·è¿›ç¨‹è¿è¡Œçš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬æ‰“å¼€run_init_processå‡½æ•°ï¼Œä¼šå‘ç°å®ƒè°ƒç”¨çš„æ˜¯do_execveã€‚ å‰é¢è®²ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œexecve æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯è¿è¡Œä¸€ä¸ªæ‰§è¡Œæ–‡ä»¶ã€‚åŠ ä¸€ä¸ª do_ çš„å¾€å¾€æ˜¯å†…æ ¸ç³»ç»Ÿè°ƒç”¨çš„å®ç°ã€‚æ²¡é”™ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒä¼šå°è¯•è¿è¡Œ ramdisk çš„â€œ/initâ€ï¼Œæˆ–è€…æ™®é€šæ–‡ä»¶ç³»ç»Ÿä¸Šçš„â€œ/sbin/initâ€â€œ/etc/initâ€â€œ/bin/initâ€â€œ/bin/shâ€ã€‚ä¸åŒç‰ˆæœ¬çš„ Linux ä¼šé€‰æ‹©ä¸åŒçš„æ–‡ä»¶å¯åŠ¨ï¼Œä½†æ˜¯åªè¦æœ‰ä¸€ä¸ªèµ·æ¥äº†å°±å¯ä»¥ã€‚ 1234567static int run_init_process(const char *init_filename)&#123; argv_init[0] = init_filename; return do_execve(getname_kernel(init_filename), (const char __user *const __user *)argv_init, (const char __user *const __user *)envp_init);&#125; å¦‚ä½•åˆ©ç”¨æ‰§è¡Œ init æ–‡ä»¶çš„æœºä¼šï¼Œä»å†…æ ¸æ€å›åˆ°ç”¨æˆ·æ€å‘¢ï¼Ÿ æˆ‘ä»¬ä»ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹å¯ä»¥å¾—åˆ°å¯å‘ï¼Œâ€œç”¨æˆ·æ€ - ç³»ç»Ÿè°ƒç”¨ - ä¿å­˜å¯„å­˜å™¨ - å†…æ ¸æ€æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ - æ¢å¤å¯„å­˜å™¨ - è¿”å›ç”¨æˆ·æ€â€ï¼Œç„¶åæ¥ç€è¿è¡Œã€‚è€Œå’±ä»¬åˆšæ‰è¿è¡Œinitï¼Œæ˜¯è°ƒç”¨ do_execveï¼Œæ­£æ˜¯ä¸Šé¢çš„è¿‡ç¨‹çš„ååŠéƒ¨åˆ†ï¼Œä»å†…æ ¸æ€æ‰§è¡Œç³»ç»Ÿè°ƒç”¨å¼€å§‹ã€‚ do_execve-&gt;do_execveat_common-&gt;exec_binprm-&gt;search_binary_handlerï¼Œè¿™é‡Œé¢ä¼šè°ƒç”¨è¿™æ®µå†…å®¹ï¼š 12345678int search_binary_handler(struct linux_binprm *bprm)&#123; ...... struct linux_binfmt *fmt; ...... retval = fmt-&gt;load_binary(bprm); ......&#125; ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘è¦è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œéœ€è¦åŠ è½½è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„é¡¹ç›®æ‰§è¡Œè®¡åˆ’ä¹¦ã€‚å®ƒæ˜¯æœ‰ä¸€å®šæ ¼å¼çš„ã€‚Linux ä¸‹ä¸€ä¸ªå¸¸ç”¨çš„æ ¼å¼æ˜¯ ELFï¼ˆExecutable and Linkable Formatï¼Œå¯æ‰§è¡Œä¸å¯é“¾æ¥æ ¼å¼ï¼‰ã€‚äºæ˜¯æˆ‘ä»¬å°±æœ‰äº†ä¸‹é¢è¿™ä¸ªå®šä¹‰ï¼š 1234567static struct linux_binfmt elf_format = &#123;.module = THIS_MODULE,.load_binary = load_elf_binary,.load_shlib = load_elf_library,.core_dump = elf_core_dump,.min_coredump = ELF_EXEC_PAGESIZE,&#125;; è¿™å…¶å®å°±æ˜¯å…ˆè°ƒç”¨ load_elf_binaryï¼Œæœ€åè°ƒç”¨ start_threadã€‚ 123456789101112131415voidstart_thread(struct pt_regs *regs, unsigned long new_ip, unsigned long new_sp)&#123;set_user_gs(regs, 0);regs-&gt;fs = 0;regs-&gt;ds = __USER_DS;regs-&gt;es = __USER_DS;regs-&gt;ss = __USER_DS;regs-&gt;cs = __USER_CS;regs-&gt;ip = new_ip;regs-&gt;sp = new_sp;regs-&gt;flags = X86_EFLAGS_IF;force_iret();&#125;EXPORT_SYMBOL_GPL(start_thread); struct pt_regsï¼Œçœ‹åå­—é‡Œçš„ registerï¼Œå°±æ˜¯å¯„å­˜å™¨å•Šï¼è¿™ä¸ªç»“æ„å°±æ˜¯åœ¨ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œå†…æ ¸ä¸­ä¿å­˜ç”¨æˆ·æ€è¿è¡Œä¸Šä¸‹æ–‡çš„ï¼Œé‡Œé¢å°†ç”¨æˆ·æ€çš„ä»£ç æ®µ CSè®¾ç½®ä¸º __USER_CSï¼Œå°†ç”¨æˆ·æ€çš„æ•°æ®æ®µ DS è®¾ç½®ä¸º __USER_DSï¼Œä»¥åŠæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ IPã€æ ˆæŒ‡é’ˆå¯„å­˜å™¨ SPã€‚è¿™é‡Œç›¸å½“äºè¡¥ä¸Šäº†åŸæ¥ç³»ç»Ÿè°ƒç”¨é‡Œï¼Œä¿å­˜å¯„å­˜å™¨çš„ä¸€ä¸ªæ­¥éª¤ã€‚ æœ€åçš„ iret æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿå®ƒæ˜¯ç”¨äºä»ç³»ç»Ÿè°ƒç”¨ä¸­è¿”å›ã€‚è¿™ä¸ªæ—¶å€™ä¼šæ¢å¤å¯„å­˜å™¨ã€‚ä»å“ªé‡Œæ¢å¤å‘¢ï¼ŸæŒ‰è¯´æ˜¯ä»è¿›å…¥ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œä¿å­˜çš„å¯„å­˜å™¨é‡Œé¢æ‹¿å‡ºã€‚å¥½åœ¨ä¸Šé¢çš„å‡½æ•°è¡¥ä¸Šäº†å¯„å­˜å™¨ã€‚CS å’ŒæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ IP æ¢å¤äº†ï¼ŒæŒ‡å‘ç”¨æˆ·æ€ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„è¯­å¥ã€‚DS å’Œå‡½æ•°æ ˆæŒ‡é’ˆ SP ä¹Ÿè¢«æ¢å¤äº†ï¼ŒæŒ‡å‘ç”¨æˆ·æ€å‡½æ•°æ ˆçš„æ ˆé¡¶ã€‚æ‰€ä»¥ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œå°±ä»ç”¨æˆ·æ€å¼€å§‹è¿è¡Œäº†ã€‚ init ç»ˆäºä»å†…æ ¸åˆ°ç”¨æˆ·æ€äº†ã€‚ä¸€å¼€å§‹åˆ°ç”¨æˆ·æ€çš„æ˜¯ ramdisk çš„ initï¼Œåæ¥ä¼šå¯åŠ¨çœŸæ­£æ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ initï¼Œæˆä¸ºæ‰€æœ‰ç”¨æˆ·æ€è¿›ç¨‹çš„ç¥–å…ˆã€‚ ä¸ºä»€ä¹ˆä¼šæœ‰ ramdisk è¿™ä¸ªä¸œè¥¿å‘¢ï¼Ÿè¿˜è®°å¾—ä¸Šä¸€èŠ‚å’±ä»¬å†…æ ¸å¯åŠ¨çš„æ—¶å€™ï¼Œé…ç½®è¿‡è¿™ä¸ªå‚æ•°ï¼š 1initrd16 /boot/initramfs-3.10.0-862.el7.x86_64.img å°±æ˜¯è¿™ä¸ªä¸œè¥¿ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿã€‚ä¸ºå•¥ä¼šæœ‰è¿™ä¸ªå‘¢ï¼Ÿ æ˜¯å› ä¸ºåˆšæ‰é‚£ä¸ª init ç¨‹åºæ˜¯åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ï¼Œæ–‡ä»¶ç³»ç»Ÿä¸€å®šæ˜¯åœ¨ä¸€ä¸ªå­˜å‚¨è®¾å¤‡ä¸Šçš„ï¼Œä¾‹å¦‚ç¡¬ç›˜ã€‚Linux è®¿é—®å­˜å‚¨è®¾å¤‡ï¼Œè¦æœ‰é©±åŠ¨æ‰èƒ½è®¿é—®ã€‚å¦‚æœå­˜å‚¨ç³»ç»Ÿæ•°ç›®å¾ˆæœ‰é™ï¼Œé‚£é©±åŠ¨å¯ä»¥ç›´æ¥æ”¾åˆ°å†…æ ¸é‡Œé¢ï¼Œåæ­£å‰é¢æˆ‘ä»¬åŠ è½½è¿‡å†…æ ¸åˆ°å†…å­˜é‡Œäº†ï¼Œç°åœ¨å¯ä»¥ç›´æ¥å¯¹å­˜å‚¨ç³»ç»Ÿè¿›è¡Œè®¿é—®ã€‚ ä½†æ˜¯å­˜å‚¨ç³»ç»Ÿè¶Šæ¥è¶Šå¤šäº†ï¼Œå¦‚æœæ‰€æœ‰å¸‚é¢ä¸Šçš„å­˜å‚¨ç³»ç»Ÿçš„é©±åŠ¨éƒ½é»˜è®¤æ”¾è¿›å†…æ ¸ï¼Œå†…æ ¸å°±å¤ªå¤§äº†ã€‚è¿™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ æˆ‘ä»¬åªå¥½å…ˆå¼„ä¸€ä¸ªåŸºäºå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿã€‚å†…å­˜è®¿é—®æ˜¯ä¸éœ€è¦é©±åŠ¨çš„ï¼Œè¿™ä¸ªå°±æ˜¯ ramdiskã€‚è¿™ä¸ªæ—¶å€™ï¼Œramdisk æ˜¯æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚ ç„¶åï¼Œæˆ‘ä»¬å¼€å§‹è¿è¡Œ ramdisk ä¸Šçš„ /initã€‚ç­‰å®ƒè¿è¡Œå®Œäº†å°±å·²ç»åœ¨ç”¨æˆ·æ€äº†ã€‚/init è¿™ä¸ªç¨‹åºä¼šå…ˆæ ¹æ®å­˜å‚¨ç³»ç»Ÿçš„ç±»å‹åŠ è½½é©±åŠ¨ï¼Œæœ‰äº†é©±åŠ¨å°±å¯ä»¥è®¾ç½®çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿäº†ã€‚æœ‰äº†çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œramdiskä¸Šçš„ /init ä¼šå¯åŠ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ initã€‚ æ¥ä¸‹æ¥å°±æ˜¯å„ç§ç³»ç»Ÿçš„åˆå§‹åŒ–ã€‚å¯åŠ¨ç³»ç»Ÿçš„æœåŠ¡ï¼Œå¯åŠ¨æ§åˆ¶å°ï¼Œç”¨æˆ·å°±å¯ä»¥ç™»å½•è¿›æ¥äº†ã€‚ è‡³æ­¤ï¼Œç”¨æˆ·æ€è¿›ç¨‹æœ‰äº†ä¸€ä¸ªç¥–å®—ï¼Œé‚£å†…æ ¸æ€çš„è¿›ç¨‹å‘¢ï¼Ÿè¿™å°±æ˜¯rest_initæ¥ä¸‹æ¥è¦åšçš„æ˜¯ï¼Œåˆ›å»º 2 å·çº¿ç¨‹ã€‚ kernel_thread(kthreadd, NULL, CLONE_FS | CLONE_FILES)åˆä¸€æ¬¡ä½¿ç”¨ kernel_thread å‡½æ•°åˆ›å»ºè¿›ç¨‹ã€‚è¿™é‡Œçš„å‡½æ•° kthreaddï¼Œè´Ÿè´£æ‰€æœ‰å†…æ ¸æ€çš„çº¿ç¨‹çš„è°ƒåº¦å’Œç®¡ç†ï¼Œæ˜¯å†…æ ¸æ€æ‰€æœ‰çº¿ç¨‹è¿è¡Œçš„ç¥–å…ˆã€‚ ç³»ç»Ÿè°ƒç”¨Linux æä¾›äº†glibcè¿™ä¸ªåº“å°è£…äº†ç³»ç»Ÿè°ƒç”¨ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚é‚£ä¹ˆåœ¨æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œglibcæ˜¯å¦‚ä½•è°ƒç”¨å†…æ ¸çš„opençš„å‘¢ï¼Ÿ åœ¨ glibc çš„æºä»£ç ä¸­ï¼Œæœ‰ä¸ªæ–‡ä»¶syscalls.listï¼Œé‡Œé¢åˆ—ç€æ‰€æœ‰ glibc çš„å‡½æ•°å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå°±åƒä¸‹é¢è¿™ä¸ªæ ·å­ï¼š 12# File name Caller Syscall name Args Strong name Weak namesopen - open Ci:siv __libc_open __open open å¦å¤–ï¼Œglibc è¿˜æœ‰ä¸€ä¸ªè„šæœ¬ make-syscall.shï¼Œå¯ä»¥æ ¹æ®ä¸Šé¢çš„é…ç½®æ–‡ä»¶ï¼Œå¯¹äºæ¯ä¸€ä¸ªå°è£…å¥½çš„ç³»ç»Ÿè°ƒç”¨ï¼Œç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰äº†ä¸€äº›å®ï¼Œä¾‹å¦‚ #define SYSCALL_NAME openã€‚ glibc è¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶ syscall-template.Sï¼Œä½¿ç”¨ä¸Šé¢è¿™ä¸ªå®ï¼Œå®šä¹‰äº†è¿™ä¸ªç³»ç»Ÿè°ƒç”¨çš„è°ƒç”¨æ–¹å¼ã€‚ å¯¹äºä»»ä½•ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œä¼šè°ƒç”¨DO_CALLã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå®ï¼Œè¿™ä¸ªå® 32 ä½å’Œ 64 ä½çš„å®šä¹‰æ˜¯ä¸ä¸€æ ·çš„ã€‚ 32 ä½ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹i386 ç›®å½•ä¸‹çš„sysdep.h æ–‡ä»¶ 12345678910111213141516/* Linux takes system call arguments in registers: syscall number %eax call-clobbered arg 1 %ebx call-saved arg 2 %ecx call-clobbered arg 3 %edx call-clobbered arg 4 %esi call-saved arg 5 %edi call-saved arg 6 %ebp call-saved......*/#define DO_CALL(syscall_name, args) PUSHARGS_##args DOARGS_##args movl $SYS_ify (syscall_name), %eax; ENTER_KERNEL POPARGS_##args è¿™é‡Œï¼Œæˆ‘ä»¬å°†è¯·æ±‚å‚æ•°æ”¾åœ¨å¯„å­˜å™¨é‡Œé¢ï¼Œæ ¹æ®ç³»ç»Ÿè°ƒç”¨çš„åç§°ï¼Œå¾—åˆ°ç³»ç»Ÿè°ƒç”¨å·ï¼Œæ”¾åœ¨å¯„å­˜å™¨ eax é‡Œé¢ï¼Œç„¶åæ‰§è¡Œ ENTER_KERNELã€‚ 1# define ENTER_KERNEL int $0x80 ENTER_KERNELå°±æ˜¯ä¸€ä¸ªè½¯ä¸­æ–­ï¼Œé€šè¿‡å®ƒå¯ä»¥é™·å…¥ (trap) å†…æ ¸ã€‚ åœ¨å†…æ ¸å¯åŠ¨çš„æ—¶å€™ï¼Œè¿˜è®°å¾—æœ‰ä¸€ä¸ª trap_init()ï¼Œè¿™æ˜¯ä¸€ä¸ªè½¯ä¸­æ–­çš„é™·å…¥é—¨ã€‚å½“æ¥åˆ°ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œtrap_init()å°±ä¼šè°ƒç”¨entry_INT80_32ã€‚ é€šè¿‡ push å’Œ SAVE_ALL å°†å½“å‰ç”¨æˆ·æ€çš„å¯„å­˜å™¨ï¼Œä¿å­˜åœ¨ pt_regs ç»“æ„é‡Œé¢ï¼Œç„¶åè°ƒç”¨ do_syscall_32_irqs_onã€‚ 64 ä½ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹","categories":[{"name":"Linux æ“ä½œç³»ç»Ÿ","slug":"Linux-æ“ä½œç³»ç»Ÿ","permalink":"http://example.com/categories/Linux-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"VSCode è°ƒè¯• RISC-V ç¨‹åº","slug":"VSCodeè°ƒè¯•ç¨‹åº","date":"2021-08-23T07:51:51.000Z","updated":"2022-10-15T03:14:29.607Z","comments":true,"path":"2021/08/23/VSCodeè°ƒè¯•ç¨‹åº/","link":"","permalink":"http://example.com/2021/08/23/VSCode%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F/","excerpt":"","text":"å‰ææœ¬æ–‡ä¸»è¦æ¶‰åŠ VSCode çš„ç›¸å…³é…ç½®ï¼Œç¼–è¯‘åŠè°ƒè¯•å·¥å…·éœ€è¦æå‰å®‰è£…å¥½ã€‚ å·²ç»å®‰è£…å¥½riscv-toolchainï¼ŒåŒ…æ‹¬riscv64-unknown-elf-gccï¼Œriscv64-unknown-elf-gdb å·²ç»å®‰è£…å¥½qemuï¼ŒåŒ…æ‹¬riscv32-softmmu,riscv32-linux-user,riscv64-softmmu,riscv64-linux-user å·²ç»å®‰è£…å¥½g++,gdb è°ƒè¯•æµç¨‹ç®€ä»‹å¯¹äºæˆ‘è¿™æ ·çš„æ–°æ‰‹ï¼Œè¦è°ƒè¯•ä¸€ä¸ªé¡¹ç›®æºç æœ€æ€•çš„å°±æ˜¯å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯æ€ä¹ˆèƒ½æŠŠé¡¹ç›®è·‘èµ·æ¥ã€‚ æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„testé¡¹ç›®ï¼Œçœ‹çœ‹åœ¨ VSCode é‡Œæ€ä¹ˆè·‘èµ·æ¥ã€‚ æ‹¿åˆ°æºç åï¼Œå°†å…¶ä»¥æ–‡ä»¶å¤¹å½¢å¼ï¼ŒåŠ å…¥åˆ° VSCode ä¸­ï¼Œæ–‡ä»¶ - æ‰“å¼€æ–‡ä»¶å¤¹ - é€‰æ‹© test é¡¹ç›®æ–‡ä»¶å¤¹ã€‚é¡¹ç›®å°±ä¼šåœ¨ VSCode ä¸­æ‰“å¼€ï¼Œä½†æ˜¯æ­¤æ—¶æˆ‘ä»¬è¿˜æ— æ³•ç¼–è¯‘è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨ VSCode ä¸Šæ„å»ºå‡ºä¸€ä¸ª C è¯­è¨€çš„ç¼–è¯‘ä¸è°ƒè¯•ç¯å¢ƒã€‚ é¦–å…ˆå¾—å®‰è£…ä¸€ä¸ªæ’ä»¶C/C++ï¼Œæ‰“å¼€æ’ä»¶ä¸­å¿ƒCtrl+Shit+Xï¼Œæœç´¢ï¼Œå®‰è£…ã€‚ ç„¶åè¾“å…¥F5ï¼Œä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼Œé€‰æ‹©C++(GDB)ï¼Œç»§ç»­é€‰æ‹©g++ã€‚VSCode ä¼šè‡ªåŠ¨åˆ›å»º.vscodeæ–‡ä»¶å¤¹ï¼Œå·²ç»ä¸¤ä¸ªæ–‡ä»¶launch.jsonå’Œtasks.jsonã€‚ launch.jsonç”¨æ¥é…ç½®è°ƒè¯•ç¯å¢ƒï¼Œtasks.jsonä¸»è¦ç”¨æ¥é…ç½®ç¼–è¯‘ç¯å¢ƒï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é…ç½®å…¶ä»–ä»»åŠ¡ã€‚task.jsoné‡Œé…ç½®çš„æ¯ä¸ªä»»åŠ¡å…¶å®å°±ç›¸å½“äºå¤šå¼€ä¸€ä¸ªæ§åˆ¶å°ã€‚ é…ç½®tasks.jsonå› ä¸ºæˆ‘ä»¬å…ˆè¦ç¼–è¯‘æºç ï¼Œç”Ÿæˆ.outæˆ–è€….exeæ–‡ä»¶ï¼Œæ‰èƒ½è°ƒè¯•ï¼Œæ‰€ä»¥å…ˆè¿›è¡Œç¼–è¯‘ä»»åŠ¡é…ç½®ã€‚ è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶æ˜¯ä¸ªé…ç½®æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè¿›è¡Œé…ç½®ï¼Œä¹Ÿæœ‰ä¸€éƒ¨åˆ†å¯ä»¥ä¿æŒé»˜è®¤ã€‚ 12345678910111213141516171819202122232425// tasks.json&#123; // https://code.visualstudio.com/docs/editor/tasks &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ &#123; // ä»»åŠ¡çš„åå­—ï¼Œæ³¨æ„æ˜¯å¤§å°å†™åŒºåˆ†çš„ //ä¼šåœ¨launchä¸­è°ƒç”¨è¿™ä¸ªåå­— &quot;label&quot;: &quot;C/C++: g++ build active file&quot;, // ä»»åŠ¡æ‰§è¡Œçš„æ˜¯shell &quot;type&quot;: &quot;shell&quot;, // å‘½ä»¤æ˜¯g++ &quot;command&quot;: &quot;g++&quot;, //g++ åé¢å¸¦çš„å‚æ•° &quot;args&quot;: [ &quot;&#x27;-Wall&#x27;&quot;, &quot;-g&quot;, // ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼Œå¦åˆ™æ— æ³•è¿›å…¥æ–­ç‚¹ &quot;&#x27;-std=c++17&#x27;&quot;, //ä½¿ç”¨c++17æ ‡å‡†ç¼–è¯‘ &quot;&#x27;$&#123;file&#125;&#x27;&quot;, //å½“å‰æ–‡ä»¶å &quot;-o&quot;, //å¯¹è±¡åï¼Œä¸è¿›è¡Œç¼–è¯‘ä¼˜åŒ– &quot;&#x27;$&#123;fileBasenameNoExtension&#125;.exe&#x27;&quot;, //å½“å‰æ–‡ä»¶åï¼ˆå»æ‰æ‰©å±•åï¼‰ ], &#125; ]&#125; å¦‚æœé¡¹ç›®æ˜¯é€šè¿‡ Makefile ç¼–è¯‘çš„ï¼Œé‚£å°±æ›´åŠ ç®€å•ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸ªä»»åŠ¡å³å¯ã€‚ 123456789101112131415&#123; &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ &#123; //ä»»åŠ¡çš„åå­—æ–¹ä¾¿æ‰§è¡Œ &quot;label&quot;: &quot;Make Project&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;make&quot;, &quot;args&quot;:[ //8çº¿ç¨‹ç¼–è¯‘ &quot;-j8&quot;, ], &#125;, ]&#125; è¿è¡Œè¯¥ä»»åŠ¡æ—¶å°±ä¼šæ‰§è¡Œmakeå‘½ä»¤è¿›è¡Œç¼–è¯‘ã€‚ é…ç½®launch.json123456789101112131415161718192021222324252627282930313233// launch.json&#123; &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [ &#123; //è°ƒè¯•ä»»åŠ¡çš„åå­— &quot;name&quot;: &quot;g++ - Build and debug active file&quot;, //åœ¨launchä¹‹å‰è¿è¡Œçš„ä»»åŠ¡åï¼Œè¿™ä¸ªåå­—ä¸€å®šè¦è·Ÿtasks.jsonä¸­çš„ä»»åŠ¡åå­—å¤§å°å†™ä¸€è‡´ &quot;preLaunchTask&quot;: &quot;C/C++: g++ build active file&quot;, &quot;type&quot;: &quot;cppdbg&quot;, &quot;request&quot;: &quot;launch&quot;, //éœ€è¦è¿è¡Œçš„æ˜¯å½“å‰æ‰“å¼€æ–‡ä»¶çš„ç›®å½•ä¸­ï¼Œ //åå­—å’Œå½“å‰æ–‡ä»¶ç›¸åŒï¼Œä½†æ‰©å±•åä¸ºexeçš„ç¨‹åº &quot;program&quot;: &quot;$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.exe&quot;, &quot;args&quot;: [], // é€‰ä¸ºtrueåˆ™ä¼šåœ¨æ‰“å¼€æ§åˆ¶å°ååœæ»ï¼Œæš‚æ—¶ä¸æ‰§è¡Œç¨‹åº &quot;stopAtEntry&quot;: false, // å½“å‰å·¥ä½œè·¯å¾„ï¼šå½“å‰æ–‡ä»¶æ‰€åœ¨çš„å·¥ä½œç©ºé—´ &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;, &quot;environment&quot;: [], // æ˜¯å¦ä½¿ç”¨å¤–éƒ¨æ§åˆ¶å° &quot;externalConsole&quot;: false, &quot;MIMode&quot;: &quot;gdb&quot;, &quot;setupCommands&quot;: [ &#123; &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;, &quot;text&quot;: &quot;-enable-pretty-printing&quot;, &quot;ignoreFailures&quot;: true &#125; ] &#125;]&#125; è¿è¡Œç»è¿‡ä»¥ä¸Šé…ç½®åï¼Œæˆ‘ä»¬æ‰“å¼€main.cppæ–‡ä»¶ï¼Œåœ¨coutå¤„æ‰“ä¸€ä¸ªæ–­ç‚¹ï¼ŒæŒ‰F5ï¼Œå³å¯ç¼–è¯‘ï¼Œè¿è¡Œï¼Œè°ƒè¯•ã€‚ä¸€å®šè¦æ‰“å¼€main.cppæ–‡ä»¶ï¼Œä¸èƒ½éšä¾¿æ‰“å¼€æ–‡ä»¶å°±å¼€å§‹å“¦ã€‚å› ä¸ºæˆ‘ä»¬åœ¨é…ç½®æ—¶ä½¿ç”¨äº†ä¸€äº›é¢„å®šä¹‰ï¼Œæ¯”å¦‚$&#123;file&#125;è¡¨ç¤ºå½“å‰æ–‡ä»¶ï¼Œæ‰€ä»¥åªæœ‰æ‰“å¼€éœ€è¦è°ƒè¯•çš„æ–‡ä»¶æ‰èƒ½å¼€å§‹ã€‚ ç¨‹åºå°†ä¼šåœ¨coutè¯­å¥åœä¸‹æ¥ã€‚ æˆ‘ä»¬å¯ä»¥æ³¨æ„ä¸€ä¸‹ç•Œé¢ä¸‹æ–¹çš„æ§åˆ¶å°ï¼Œå¯ä»¥æ›´ç›´è§‚äº†è§£launch.jasonå’Œtasks.jasonã€‚ å³è¾¹çš„æ¡†ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨tasks.jasonä¸­é…ç½®çš„ä»»åŠ¡ï¼Œå·¦è¾¹çš„æ¡†å°±æ˜¯æˆ‘ä»¬åœ¨tasks.jasonä¸­commandä»¥åŠargsçš„å†…å®¹ï¼Œä»–å°±æ˜¯å¸®æˆ‘ä»¬æå‰å†™å¥½ç¼–è¯‘çš„é€‰é¡¹ã€‚ç„¶ååœ¨ shell ä¸­è¿è¡Œã€‚ ç¼–è¯‘è°ƒè¯• RISC-V ç¨‹åºäº†è§£ä»¥ä¸Šè¿™äº›ï¼Œå°±å¯ä»¥æŒ‰éœ€é…ç½®æ‰€éœ€çš„ç¯å¢ƒäº†ã€‚æˆ‘ä»¬è¿˜æ˜¯ä»tasks.jasonå¼€å§‹ã€‚å› ä¸ºå¼€å‘ç”¨çš„ç”µè„‘æ˜¯x86çš„ï¼Œæ‰€ä»¥å…ˆè¦ç¼–è¯‘å‡ºriscvçš„ç¨‹åºï¼Œå†ç”¨æ¨¡æ‹Ÿå™¨æ¨¡æ‹Ÿå‡ºrsicvçš„ç¯å¢ƒï¼Œç„¶ååœ¨æ¨¡æ‹Ÿçš„ç¯å¢ƒä¸­è¿è¡Œç¨‹åºï¼Œæœ€åæ‰èƒ½å¼€å§‹è°ƒè¯•ã€‚ å‡è®¾å·²ç»å®‰è£…å¥½å¼€å¤´æ‰€æåˆ°çš„å·¥å…·ã€‚é¦–å…ˆé…ç½®tasks.jasonï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344&#123; &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ &#123; // ç¼–è¯‘å½“å‰ä»£ç  &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;C/C++(RISCV): Build active file&quot;, // ç¼–è¯‘å™¨çš„ä½ç½® &quot;command&quot;: &quot;/opt/riscv/bin/riscv64-unknown-elf-g++&quot;, &quot;args&quot;: [ &quot;-Wall&quot;, // å¼€å¯æ‰€æœ‰è­¦å‘Š &quot;-g&quot;, // ç”Ÿæˆè°ƒè¯•ä¿¡æ¯s &quot;$&#123;file&#125;&quot;, &quot;-o&quot;, &quot;$&#123;workspaceFolder&#125;/debug/$&#123;fileBasenameNoExtension&#125;&quot; // æˆ‘é€‰æ‹©å°†å¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨debugç›®å½•ä¸‹ ], // å½“å‰å·¥ä½œè·¯å¾„ï¼šæ‰§è¡Œå½“å‰å‘½ä»¤æ—¶æ‰€åœ¨çš„è·¯å¾„ &quot;options&quot;: &#123; &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot; &#125;, &quot;problemMatcher&quot;: [ &quot;$gcc&quot; ] &#125;, &#123; // å¯åŠ¨qemuä¾›è°ƒè¯•å™¨è¿æ¥ &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;Run Qemu Server(RISCV)&quot;, &quot;dependsOn&quot;: &quot;C/C++(RISCV): Build active file&quot;, &quot;command&quot;: &quot;qemu-system-riscv64&quot;, &quot;args&quot;: [ &quot;-g&quot;, &quot;65500&quot;, // gdbç«¯å£ï¼Œè‡ªå·±å®šä¹‰ &quot;$&#123;workspaceFolder&#125;/debug/$&#123;fileBasenameNoExtension&#125;&quot; ], &#125;, &#123; // æœ‰æ—¶å€™qemuæœ‰å¯èƒ½æ²¡æ³•é€€å‡ºï¼Œæ•…ç¼–å†™ä¸€ä¸ªä»»åŠ¡ç”¨äºå¼ºè¡Œç»“æŸqemuè¿›ç¨‹ &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;Kill Qemu Server(RISCV)&quot;, &quot;command&quot;: &quot;ps -C qemu-riscv64 --no-headers | cut -d \\\\ -f 1 | xargs kill -9&quot;, &#125; ]&#125; tasks.jasonæ˜¯å¯ä»¥é…ç½®å¤šä¸ªä»»åŠ¡çš„ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡ç”¨æ¥ç¼–è¯‘æˆriscvæ¶æ„ä¸‹çš„ç¨‹åºï¼Œç¬¬äºŒä¸ªä»»åŠ¡ç”¨æ¥å¯åŠ¨ qemuï¼Œè®©ç¨‹åºåœ¨ qemu ä¸Šè¿è¡Œèµ·æ¥ã€‚ ç¬¬ä¸€ä¸ªä»»åŠ¡ä¸­ï¼Œcommandå°±æ˜¯é…ç½®ç¼–è¯‘å™¨riscv64-unkonown-elf-gccçš„å±æ€§ï¼Œç¬¬äºŒä¸ªä»»åŠ¡ä¸­ï¼Œcommandæ˜¯é…ç½® qemu æ¨¡æ‹Ÿå™¨qemu-system-riscv32çš„å±æ€§ã€‚ç¬¬ä¸‰ä¸ªä»»åŠ¡ä¸­ï¼Œç”¨æ¥é…ç½®ç»“æŸ qemu æ¨¡æ‹Ÿå™¨çš„å‘½ä»¤ã€‚ æ¥ä¸‹æ¥é…ç½®launch.jasonï¼š 12345678910111213141516171819202122232425262728&#123; &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [ &#123; &quot;name&quot;: &quot;C/C++(RISCV) - Debug Active File&quot;, &quot;type&quot;: &quot;cppdbg&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;program&quot;: &quot;$&#123;workspaceFolder&#125;/debug/$&#123;fileBasenameNoExtension&#125;&quot;, &quot;args&quot;: [], &quot;stopAtEntry&quot;: false, &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;, &quot;environment&quot;: [], &quot;externalConsole&quot;: false, &quot;MIMode&quot;: &quot;gdb&quot;, &quot;setupCommands&quot;: [ &#123; &quot;description&quot;: &quot;ä¸º gdb å¯ç”¨æ•´é½æ‰“å°&quot;, &quot;text&quot;: &quot;-enable-pretty-printing&quot;, &quot;ignoreFailures&quot;: true &#125; ], // RISC-Vå·¥å…·é“¾ä¸­çš„gdb &quot;miDebuggerPath&quot;: &quot;/opt/riscv/bin/riscv64-unknown-elf-gdb&quot;, // è¿™é‡Œéœ€è¦ä¸task.jsonä¸­å®šä¹‰çš„ç«¯å£ä¸€è‡´ &quot;miDebuggerServerAddress&quot;: &quot;localhost:65500&quot; &#125; ]&#125; æˆ‘ä»¬åœ¨é…ç½®x86ä¸‹çš„è°ƒè¯•ç¯å¢ƒæ—¶ï¼Œlaunch.jasonä¸­æœ‰ä¸ª&quot;preLaunchTask&quot;: &quot;C/C++: g++ build active file&quot;ï¼Œå±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„ç›®çš„æ˜¯åœ¨å¯åŠ¨è°ƒè¯•ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œä»»åŠ¡åå­—ä¸º&quot;C/C++: g++ build active file&quot;ä»»åŠ¡ï¼Œä¹Ÿæ˜¯å°±ç¼–è¯‘çš„ä»»åŠ¡ã€‚ å› ä¸ºå¯åŠ¨ qemu ä¼šå¯¼è‡´é˜»å¡ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰åŠ preLaunchTaskï¼Œåœ¨å¯åŠ¨è°ƒè¯•ä¹‹å‰ï¼Œå…ˆæŠŠ qemu è¿è¡Œèµ·æ¥ã€‚è¾“å…¥Ctrl+Shift+Pï¼Œæ‰“å¼€ VSCode å‘½ä»¤è¡Œã€‚è¾“å…¥Run Taskï¼Œ ç‚¹å‡»ç¬¬ä¸€ä¸ªï¼Œé€‰æ‹©ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡ºç°çš„ä¸‰ä¸ªä»»åŠ¡å°±æ˜¯æˆ‘ä»¬åœ¨tasks.jasonä¸­é…ç½®çš„ä¸‰ä¸ªä»»åŠ¡ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ª Buildï¼Œç¼–è¯‘å‡ºç¨‹åºï¼Œå†é‡å¤æ“ä½œï¼Œé€‰æ‹©ç¬¬ä¸‰ä¸ªæ‰§è¡Œ QEMU ä»»åŠ¡ã€‚ é¢„å®šä¹‰å˜é‡å®˜ç½‘","categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"GDB","slug":"GDB","permalink":"http://example.com/tags/GDB/"},{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"}]},{"title":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹ä¿¡å·é‡ï¼ˆSemaphoreï¼‰","slug":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹ä¿¡å·é‡ï¼ˆSemaphoreï¼‰","date":"2021-08-19T07:36:02.000Z","updated":"2022-10-15T03:14:29.884Z","comments":true,"path":"2021/08/19/è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹ä¿¡å·é‡ï¼ˆSemaphoreï¼‰/","link":"","permalink":"http://example.com/2021/08/19/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%88IPC%EF%BC%89%E4%B9%8B%E4%BF%A1%E5%8F%B7%E9%87%8F%EF%BC%88Semaphore%EF%BC%89/","excerpt":"","text":"ç®€ä»‹ä¸ºäº†é˜²æ­¢å‡ºç°å› å¤šä¸ªç¨‹åºåŒæ—¶è®¿é—®ä¸€ä¸ªå…±äº«èµ„æºè€Œå¼•å‘çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œå®ƒå¯ä»¥é€šè¿‡ç”Ÿæˆå¹¶ä½¿ç”¨ä»¤ç‰Œæ¥æˆæƒï¼Œåœ¨ä»»ä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹è®¿é—®ä»£ç çš„ä¸´ç•ŒåŒºåŸŸã€‚ä¸´ç•ŒåŒºåŸŸæ˜¯æŒ‡æ‰§è¡Œæ•°æ®æ›´æ–°çš„ä»£ç éœ€è¦ç‹¬å å¼åœ°æ‰§è¡Œã€‚è€Œä¿¡å·é‡å°±å¯ä»¥æä¾›è¿™æ ·çš„ä¸€ç§è®¿é—®æœºåˆ¶ï¼Œè®©ä¸€ä¸ªä¸´ç•ŒåŒºåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å®ƒï¼Œä¹Ÿå°±æ˜¯è¯´ä¿¡å·é‡æ˜¯ç”¨æ¥è°ƒåè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®çš„ã€‚ ä¿¡å·é‡æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œç¨‹åºå¯¹å…¶è®¿é—®éƒ½æ˜¯åŸå­æ“ä½œï¼Œä¸”åªå…è®¸å¯¹å®ƒè¿›è¡Œç­‰å¾…ï¼ˆå³P) å’Œå‘é€ï¼ˆå³V) ä¿¡æ¯æ“ä½œã€‚æœ€ç®€å•çš„ä¿¡å·é‡æ˜¯åªèƒ½å– 0 å’Œ 1 çš„å˜é‡ï¼Œè¿™ä¹Ÿæ˜¯ä¿¡å·é‡æœ€å¸¸è§çš„ä¸€ç§å½¢å¼ï¼Œå«åšäºŒè¿›åˆ¶ä¿¡å·é‡ã€‚è€Œå¯ä»¥å–å¤šä¸ªæ­£æ•´æ•°çš„ä¿¡å·é‡è¢«ç§°ä¸ºé€šç”¨ä¿¡å·é‡ã€‚è¿™é‡Œä¸»è¦è®¨è®ºäºŒè¿›åˆ¶ä¿¡å·é‡ã€‚ ç”±äºä¿¡å·é‡åªèƒ½è¿›è¡Œä¸¤ç§æ“ä½œç­‰å¾…å’Œå‘é€ä¿¡å·ï¼Œå³ P(sv) å’Œ V(sv),ä»–ä»¬çš„è¡Œä¸ºæ˜¯è¿™æ ·çš„ï¼š P(sv)ï¼šå¦‚æœsvçš„å€¼å¤§äºé›¶ï¼Œå°±ç»™å®ƒå‡ 1ï¼›å¦‚æœå®ƒçš„å€¼ä¸ºé›¶ï¼Œå°±æŒ‚èµ·è¯¥è¿›ç¨‹çš„æ‰§è¡Œ V(sv)ï¼šå¦‚æœæœ‰å…¶ä»–è¿›ç¨‹å› ç­‰å¾…svè€Œè¢«æŒ‚èµ·ï¼Œå°±è®©å®ƒæ¢å¤è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰è¿›ç¨‹å› ç­‰å¾…svè€ŒæŒ‚èµ·ï¼Œå°±ç»™å®ƒåŠ  1. ä¸¾ä¸ªä¾‹å­ï¼Œå°±æ˜¯ä¸¤ä¸ªè¿›ç¨‹å…±äº«ä¿¡å·é‡svï¼Œä¸€æ—¦å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œäº†P(sv)æ“ä½œï¼Œå®ƒå°†å¾—åˆ°ä¿¡å·é‡ï¼Œå¹¶å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºï¼Œä½¿svå‡ 1ã€‚è€Œç¬¬äºŒä¸ªè¿›ç¨‹å°†è¢«é˜»æ­¢è¿›å…¥ä¸´ç•ŒåŒºï¼Œå› ä¸ºå½“å®ƒè¯•å›¾æ‰§è¡ŒP(sv)æ—¶ï¼Œsvä¸º 0ï¼Œå®ƒä¼šè¢«æŒ‚èµ·ä»¥ç­‰å¾…ç¬¬ä¸€ä¸ªè¿›ç¨‹ç¦»å¼€ä¸´ç•ŒåŒºåŸŸå¹¶æ‰§è¡ŒV(sv)é‡Šæ”¾ä¿¡å·é‡ï¼Œè¿™æ—¶ç¬¬äºŒä¸ªè¿›ç¨‹å°±å¯ä»¥æ¢å¤æ‰§è¡Œã€‚ æœ¬æ–‡ä»£ç åŒæ­¥åœ¨è¿™é‡Œã€‚ ç›¸å…³å‡½æ•°Linux æä¾›äº†ä¸€ç»„ç²¾å¿ƒè®¾è®¡çš„ä¿¡å·é‡æ¥å£æ¥å¯¹ä¿¡å·è¿›è¡Œæ“ä½œï¼Œå®ƒä»¬ä¸åªæ˜¯é’ˆå¯¹äºŒè¿›åˆ¶ä¿¡å·é‡ï¼Œä¸‹é¢å°†ä¼šå¯¹è¿™äº›å‡½æ•°è¿›è¡Œä»‹ç»ï¼Œä½†è¯·æ³¨æ„ï¼Œè¿™äº›å‡½æ•°éƒ½æ˜¯ç”¨æ¥å¯¹æˆç»„çš„ä¿¡å·é‡å€¼è¿›è¡Œæ“ä½œçš„ã€‚å®ƒä»¬å£°æ˜åœ¨å¤´æ–‡ä»¶ sys/sem.h ä¸­ã€‚ semget()å®ƒçš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæ–°ä¿¡å·é‡æˆ–å–å¾—ä¸€ä¸ªå·²æœ‰ä¿¡å·é‡ï¼ŒåŸå‹ä¸ºï¼š 1int semget(key_t key, int num_sems, int sem_flags); keyæ˜¯æ•´æ•°å€¼ï¼ˆå”¯ä¸€éé›¶ï¼‰ï¼Œä¸ç›¸å…³çš„è¿›ç¨‹å¯ä»¥é€šè¿‡å®ƒè®¿é—®ä¸€ä¸ªä¿¡å·é‡ï¼Œå®ƒä»£è¡¨ç¨‹åºå¯èƒ½è¦ä½¿ç”¨çš„æŸä¸ªèµ„æºï¼Œç¨‹åºå¯¹æ‰€æœ‰ä¿¡å·é‡çš„è®¿é—®éƒ½æ˜¯é—´æ¥çš„ï¼Œç¨‹åºå…ˆé€šè¿‡è°ƒç”¨semget()å‡½æ•°å¹¶æä¾›ä¸€ä¸ªé”®ï¼Œå†ç”±ç³»ç»Ÿç”Ÿæˆä¸€ä¸ªç›¸åº”çš„ä¿¡å·æ ‡è¯†ç¬¦ï¼ˆsemget()å‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œåªæœ‰semget()å‡½æ•°æ‰ç›´æ¥ä½¿ç”¨ä¿¡å·é‡é”®ï¼Œæ‰€æœ‰å…¶ä»–çš„ä¿¡å·é‡å‡½æ•°ä½¿ç”¨ç”±semget()å‡½æ•°è¿”å›çš„ä¿¡å·é‡æ ‡è¯†ç¬¦ã€‚å¦‚æœå¤šä¸ªç¨‹åºä½¿ç”¨ç›¸åŒçš„keyå€¼ï¼Œkeyå°†è´Ÿè´£åè°ƒå·¥ä½œã€‚ num_semsæŒ‡å®šéœ€è¦çš„ä¿¡å·é‡æ•°ç›®ï¼Œå®ƒçš„å€¼å‡ ä¹æ€»æ˜¯ 1ã€‚ sem_flagsæ˜¯ä¸€ç»„æ ‡å¿—ï¼Œå½“æƒ³è¦å½“ä¿¡å·é‡ä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡å·é‡ï¼Œå¯ä»¥å’Œå€¼IPC_CREATåšæŒ‰ä½æˆ–æ“ä½œã€‚è®¾ç½®äº†IPC_CREATæ ‡å¿—åï¼Œå³ä½¿ç»™å‡ºçš„é”®æ˜¯ä¸€ä¸ªå·²æœ‰ä¿¡å·é‡çš„é”®ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿé”™è¯¯ã€‚è€ŒIPC_CREAT | IPC_EXCLåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œå”¯ä¸€çš„ä¿¡å·é‡ï¼Œå¦‚æœä¿¡å·é‡å·²å­˜åœ¨ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ semget()å‡½æ•°æˆåŠŸè¿”å›ä¸€ä¸ªç›¸åº”ä¿¡å·æ ‡è¯†ç¬¦ï¼ˆéé›¶ï¼‰ï¼Œå¤±è´¥è¿”å›-1. semop()å®ƒçš„ä½œç”¨æ˜¯æ”¹å˜ä¿¡å·é‡çš„å€¼ï¼ŒåŸå‹ä¸ºï¼š 1int semop(int sem_id, struct sembuf *sem_opa, size_t num_sem_ops); sem_idæ˜¯ç”±semget()è¿”å›çš„ä¿¡å·é‡æ ‡è¯†ç¬¦ï¼Œsembufç»“æ„çš„å®šä¹‰å¦‚ä¸‹ï¼š 1234567struct sembuf&#123; short sem_num; // é™¤éä½¿ç”¨ä¸€ç»„ä¿¡å·é‡ï¼Œå¦åˆ™å®ƒä¸º0 short sem_op; // ä¿¡å·é‡åœ¨ä¸€æ¬¡æ“ä½œä¸­éœ€è¦æ”¹å˜çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸¤ä¸ªæ•°ï¼Œä¸€ä¸ªæ˜¯-1ï¼Œå³ Pï¼ˆç­‰å¾…ï¼‰æ“ä½œï¼Œ // ä¸€ä¸ªæ˜¯+1ï¼Œå³Vï¼ˆå‘é€ä¿¡å·ï¼‰æ“ä½œã€‚ short sem_flg; // é€šå¸¸ä¸º SEM_UNDOï¼Œä½¿æ“ä½œç³»ç»Ÿè·Ÿè¸ªä¿¡å·ï¼Œ // å¹¶åœ¨è¿›ç¨‹æ²¡æœ‰é‡Šæ”¾è¯¥ä¿¡å·é‡è€Œç»ˆæ­¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿé‡Šæ”¾ä¿¡å·é‡&#125;; num_sem_opsï¼šæ“ä½œsopsä¸­çš„æ“ä½œä¸ªæ•°ï¼Œé€šå¸¸å–å€¼ä¸º 1 semctl()è¯¥å‡½æ•°ç”¨æ¥ç›´æ¥æ§åˆ¶ä¿¡å·é‡ä¿¡æ¯ï¼Œå®ƒçš„åŸå‹ä¸ºï¼š 1int semctl(int sem_id, int sem_num, int command, ...); å¦‚æœæœ‰ç¬¬å››ä¸ªå‚æ•°ï¼Œå®ƒé€šå¸¸æ˜¯ä¸€ä¸ªunion semumç»“æ„ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 12345union semun &#123; int val; struct semid_ds *buf; unsigned short *arry;&#125;; å‰ä¸¤ä¸ªå‚æ•°ä¸å‰é¢ä¸€ä¸ªå‡½æ•°ä¸­çš„ä¸€æ ·ï¼Œcommandé€šå¸¸æ˜¯ä¸‹é¢ä¸¤ä¸ªå€¼ä¸­çš„å…¶ä¸­ä¸€ä¸ª SETVALï¼šç”¨æ¥æŠŠä¿¡å·é‡åˆå§‹åŒ–ä¸ºä¸€ä¸ªå·²çŸ¥çš„å€¼ã€‚p è¿™ä¸ªå€¼é€šè¿‡ union semun ä¸­çš„ val æˆå‘˜è®¾ç½®ï¼Œå…¶ä½œç”¨æ˜¯åœ¨ä¿¡å·é‡ç¬¬ä¸€æ¬¡ä½¿ç”¨å‰å¯¹å®ƒè¿›è¡Œè®¾ç½®ã€‚ IPC_RMIDï¼šç”¨äºåˆ é™¤ä¸€ä¸ªå·²ç»æ— éœ€ç»§ç»­ä½¿ç”¨çš„ä¿¡å·é‡æ ‡è¯†ç¬¦ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"IPC","slug":"IPC","permalink":"http://example.com/tags/IPC/"}]},{"title":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰","slug":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰","date":"2021-08-19T02:53:09.000Z","updated":"2022-10-15T03:14:29.894Z","comments":true,"path":"2021/08/19/è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰/","link":"","permalink":"http://example.com/2021/08/19/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%88IPC%EF%BC%89%E4%B9%8B%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%88MessageQueue%EF%BC%89/","excerpt":"","text":"ç®€ä»‹æ¶ˆæ¯é˜Ÿåˆ—æä¾›äº†ä¸€ç§ä»ä¸€ä¸ªè¿›ç¨‹å‘å¦ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ä¸ªæ•°æ®å—çš„æ–¹æ³•ã€‚ æ¯ä¸ªæ•°æ®å—éƒ½è¢«è®¤ä¸ºå«æœ‰ä¸€ä¸ªç±»å‹ï¼Œæ¥æ”¶è¿›ç¨‹å¯ä»¥ç‹¬ç«‹åœ°æ¥æ”¶å«æœ‰ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘é€æ¶ˆæ¯æ¥é¿å…å‘½åç®¡é“çš„åŒæ­¥å’Œé˜»å¡é—®é¢˜ã€‚ä½†æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä¸å‘½åç®¡é“ä¸€æ ·ï¼Œæ¯ä¸ªæ•°æ®å—éƒ½æœ‰ä¸€ä¸ªæœ€å¤§é•¿åº¦çš„é™åˆ¶ã€‚ æœ¬æ–‡ä»£ç åŒæ­¥åœ¨è¿™é‡Œã€‚ ç›¸å…³å‡½æ•°msgget()è¯¥å‡½æ•°ç”¨æ¥åˆ›å»ºå’Œè®¿é—®ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ã€‚å®ƒçš„åŸå‹ä¸ºï¼š 1int msgget(key_t, key, int msgflg); keyï¼šä¸å…¶ä»–çš„ IPC æœºåˆ¶ä¸€æ ·ï¼Œç¨‹åºå¿…é¡»æä¾›ä¸€ä¸ªé”®æ¥å‘½åæŸä¸ªç‰¹å®šçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚ msgflgæ˜¯ä¸€ä¸ªæƒé™æ ‡å¿—ï¼Œè¡¨ç¤ºæ¶ˆæ¯é˜Ÿåˆ—çš„è®¿é—®æƒé™ï¼Œå®ƒä¸æ–‡ä»¶çš„è®¿é—®æƒé™ä¸€æ ·ã€‚msgflgå¯ä»¥ä¸IPC_CREATåšæˆ–æ“ä½œï¼Œè¡¨ç¤ºå½“ key æ‰€å‘½åçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚æœ key æ‰€å‘½åçš„æ¶ˆæ¯é˜Ÿåˆ—å­˜åœ¨æ—¶ï¼ŒIPC_CREATæ ‡å¿—ä¼šè¢«å¿½ç•¥ï¼Œè€Œåªè¿”å›ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚ å®ƒè¿”å›ä¸€ä¸ªä»¥keyå‘½åçš„æ¶ˆæ¯é˜Ÿåˆ—çš„æ ‡è¯†ç¬¦ï¼ˆéé›¶æ•´æ•°ï¼‰ï¼Œå¤±è´¥æ—¶è¿”å›-1. msgsnd()è¯¥å‡½æ•°ç”¨æ¥æŠŠæ¶ˆæ¯æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚å®ƒçš„åŸå‹ä¸ºï¼š 1int msgsend(int msgid, const void *msg_ptr, size_t msg_sz, int msgflg); msgidæ˜¯ç”±msggetå‡½æ•°è¿”å›çš„æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦ã€‚ msg_ptræ˜¯ä¸€ä¸ªæŒ‡å‘å‡†å¤‡å‘é€æ¶ˆæ¯çš„æŒ‡é’ˆï¼Œä½†æ˜¯æ¶ˆæ¯çš„æ•°æ®ç»“æ„å´æœ‰ä¸€å®šçš„è¦æ±‚ï¼ŒæŒ‡é’ˆmsg_ptræ‰€æŒ‡å‘çš„æ¶ˆæ¯ç»“æ„ä¸€å®šè¦æ˜¯ä»¥ä¸€ä¸ªé•¿æ•´å‹æˆå‘˜å˜é‡å¼€å§‹çš„ç»“æ„ä½“ï¼Œæ¥æ”¶å‡½æ•°å°†ç”¨è¿™ä¸ªæˆå‘˜æ¥ç¡®å®šæ¶ˆæ¯çš„ç±»å‹ã€‚æ‰€ä»¥æ¶ˆæ¯ç»“æ„è¦å®šä¹‰æˆè¿™æ ·ï¼š 1234struct my_message &#123; long int message_type; /* The data you wish to transfer */&#125;; msg_sz æ˜¯msg_ptræŒ‡å‘çš„æ¶ˆæ¯çš„é•¿åº¦ msgflg ç”¨äºæ§åˆ¶å½“å‰æ¶ˆæ¯é˜Ÿåˆ—æ»¡æˆ–é˜Ÿåˆ—æ¶ˆæ¯åˆ°è¾¾ç³»ç»ŸèŒƒå›´çš„é™åˆ¶æ—¶å°†è¦å‘ç”Ÿçš„äº‹æƒ… å¦‚æœè°ƒç”¨æˆåŠŸï¼Œæ¶ˆæ¯æ•°æ®çš„å‰¯æœ¬å°†è¢«æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¹¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›-1. msgrcv()è¯¥å‡½æ•°ç”¨æ¥ä»ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—è·å–æ¶ˆæ¯ï¼Œå®ƒçš„åŸå‹ä¸º 1int msgrcv(int msgid, void *msg_ptr, size_t msg_st, long int msgtype, int msgflg); å‰ä¸‰ä¸ªå‚æ•°å‚ç…§å‰é¢çš„è§£é‡Š msgtype å¯ä»¥å®ç°ä¸€ç§ç®€å•çš„æ¥æ”¶ä¼˜å…ˆçº§ã€‚å¦‚æœmsgtypeä¸º0ï¼Œå°±è·å–é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯ã€‚å¦‚æœå®ƒçš„å€¼å¤§äºé›¶ï¼Œå°†è·å–å…·æœ‰ç›¸åŒæ¶ˆæ¯ç±»å‹çš„ç¬¬ä¸€ä¸ªä¿¡æ¯ã€‚å¦‚æœå®ƒå°äºé›¶ï¼Œå°±è·å–ç±»å‹ç­‰äºæˆ–å°äºmsgtypeçš„ç»å¯¹å€¼çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯ã€‚ msgflg ç”¨äºæ§åˆ¶å½“é˜Ÿåˆ—ä¸­æ²¡æœ‰ç›¸åº”ç±»å‹çš„æ¶ˆæ¯å¯ä»¥æ¥æ”¶æ—¶å°†å‘ç”Ÿçš„äº‹æƒ…ã€‚ è°ƒç”¨æˆåŠŸæ—¶ï¼Œè¯¥å‡½æ•°è¿”å›æ”¾åˆ°æ¥æ”¶ç¼“å­˜åŒºä¸­çš„å­—èŠ‚æ•°ï¼Œæ¶ˆæ¯è¢«å¤åˆ¶åˆ°ç”±msg_ptræŒ‡å‘çš„ç”¨æˆ·åˆ†é…çš„ç¼“å­˜åŒºä¸­ï¼Œç„¶ååˆ é™¤æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„å¯¹åº”æ¶ˆæ¯ã€‚å¤±è´¥æ—¶è¿”å›-1ã€‚ msgctl()è¯¥å‡½æ•°ç”¨æ¥æ§åˆ¶æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®ƒä¸å…±äº«å†…å­˜çš„shmctlå‡½æ•°ç›¸ä¼¼ï¼Œå®ƒçš„åŸå‹ä¸ºï¼š 1int msgctl(int msgid, int command, struct msgid_ds *buf); msgidåŒä¸Š commandæ˜¯å°†è¦é‡‡å–çš„åŠ¨ä½œï¼Œå®ƒå¯ä»¥å–3ä¸ªå€¼: IPC_STATï¼šæŠŠmsgid_dsç»“æ„ä¸­çš„æ•°æ®è®¾ç½®ä¸ºæ¶ˆæ¯é˜Ÿåˆ—çš„å½“å‰å…³è”å€¼ï¼Œå³ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„å½“å‰å…³è”å€¼è¦†ç›–msgid_dsçš„å€¼ã€‚ IPC_SETï¼šå¦‚æœè¿›ç¨‹æœ‰è¶³å¤Ÿçš„æƒé™ï¼Œå°±æŠŠæ¶ˆæ¯åˆ—é˜Ÿçš„å½“å‰å…³è”å€¼è®¾ç½®ä¸ºmsgid_dsç»“æ„ä¸­ç»™å‡ºçš„å€¼ IPC_RMIDï¼šåˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— bufæ˜¯æŒ‡å‘msgid_dsç»“æ„çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å¼å’Œè®¿é—®æƒé™çš„ç»“æ„ã€‚msgid_dsç»“æ„è‡³å°‘åŒ…æ‹¬ä»¥ä¸‹æˆå‘˜ï¼š 123456struct msgid_ds&#123; uid_t shm_perm.uid; uid_t shm_perm.gid; mode_t shm_perm.mode;&#125;; æˆåŠŸæ—¶è¿”å› 0ï¼Œå¤±è´¥æ—¶è¿”å› -1. Demo123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354//msgsnd#include &lt;stdio.h&gt;#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/msg.h&gt;#define MAX_TXT 512struct msg_st&#123; long int msg_type; char msg[MAX_TXT];&#125;;int main()&#123; struct msg_st message; int msgid = 1; char buffer[BUFSIZ]; key_t msgKey = ftok(&quot;./msgsnd.c&quot;, 0); msgid = msgget(msgKey, 0666 | IPC_CREAT); if (msgid == -1) &#123; fprintf(stderr, &quot;masget failed error: %d\\n&quot;, errno); exit(EXIT_FAILURE); &#125; while (1) &#123; printf(&quot;Enter some text: \\n&quot;); fgets(buffer, BUFSIZ, stdin); message.msg_type = 1; // æ³¨æ„ 2 strcpy(message.msg, buffer); // å‘é˜Ÿåˆ—é‡Œå‘é€æ•°æ® if (msgsnd(msgid, (void *)&amp;message, MAX_TXT, 0) == -1) &#123; fprintf(stderr, &quot;msgsnd failed\\n&quot;); exit(EXIT_FAILURE); &#125; // è¾“å…¥ end ç»“æŸè¾“å…¥ if (strncmp(buffer, &quot;end&quot;, 3) == 0) &#123; break; &#125; sleep(1); &#125; exit(EXIT_SUCCESS);&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546//msgrcv#include &lt;stdio.h&gt;#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/msg.h&gt;#define MAX_TXT 512struct msg_st&#123; long int msg_type; char msg[MAX_TXT];&#125;;int main()&#123; struct msg_st message; int msgid = 1; long int msgtype = 0; key_t msgKey = ftok(&quot;./msgsnd.c&quot;, 0); msgid = msgget(msgKey, 0666 | IPC_CREAT); if (msgid == -1) &#123; fprintf(stderr, &quot;masget failed error: %d\\n&quot;, errno); exit(EXIT_FAILURE); &#125; while (1) &#123; if (msgrcv(msgid, (void *)&amp;message, BUFSIZ, msgtype, 0) == -1) &#123; fprintf(stderr, &quot;msgsnd failed\\n&quot;); exit(EXIT_FAILURE); &#125; printf(&quot;You wrote: %s\\n&quot;, message.msg); if (strncmp(message.msg, &quot;end&quot;, 3) == 0) &#123; break; &#125; &#125; exit(EXIT_SUCCESS);&#125; è¿è¡Œç»“æœ","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"IPC","slug":"IPC","permalink":"http://example.com/tags/IPC/"}]},{"title":"Linux(Ubuntu) ç¯å¢ƒä¸‹å®‰è£… VSCode","slug":"Linux-Ubuntu-ç¯å¢ƒä¸‹å®‰è£…VSCode","date":"2021-08-19T01:38:22.000Z","updated":"2022-10-15T03:14:29.276Z","comments":true,"path":"2021/08/19/Linux-Ubuntu-ç¯å¢ƒä¸‹å®‰è£…VSCode/","link":"","permalink":"http://example.com/2021/08/19/Linux-Ubuntu-%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85VSCode/","excerpt":"","text":"æœ¬æ¥ä¸æƒ³å†™è¿™ä¸€ç¯‡çš„ï¼Œå®‰è£… VSCode æ—¶éšä¾¿æœä¸€ä¸‹å°± OK äº†ï¼Œä½†æ˜¯å› ä¸º APT æºä¸­æ²¡æœ‰ VSCodeï¼Œæ‰€ä»¥éœ€è¦æ‰¾ä¸‹è½½ç½‘å€ï¼Œå‡ æ¬¡çš„å®‰è£…ç»å†ä¸‹æ¥ï¼Œæ‰¾ä¸‹è½½ç½‘å€ä¹Ÿç»å†äº†ä¸€ç•ªæŠ˜è…¾ã€‚ä»Šå¤©åˆè¦å®‰è£…ä¸€éï¼Œå°±é¡ºæ‰‹è®°å½•ä¸€ä¸‹å§ã€‚ä»¥åç¿»è‡ªå·±è®°å½•æ€»æ¯”ç¿»å…¨ç½‘è®°å½•æ–¹ä¾¿ã€‚ å®˜æ–¹æ–‡æ¡£å…¶å®æœ€å®Œå¤‡å®‰è£…æ•™ç¨‹åœ¨å®˜æ–¹æ–‡æ¡£é‡Œã€‚æœ¬æ–‡ä¹Ÿç®—æ˜¯å¯¹å®˜æ–¹æ–‡æ¡£çš„ä¸€ä¸ªç¿»è¯‘ç‰ˆå§ã€‚ åŸºäº Debian å’Œ Ubuntu çš„å‘è¡Œç‰ˆå¦‚æœä¸‹è½½äº†.deb å®‰è£…åŒ…ï¼Œé‚£ä¹ˆåªéœ€è¦ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥å®Œæˆå®‰è£…äº†ã€‚ 1sudo apt install ./&lt;file&gt;.deb æ— å¥ˆçš„æ˜¯ï¼Œæˆ‘éœ€è¦åœ¨å¼€å‘æœºå®‰è£…ï¼Œæ— æ³•ä¸‹è½½å®‰è£…åŒ…ï¼Œä½†æ˜¯æˆ‘åˆä¸æƒ³ç”¨ftpä¼ æ¥ä¼ å»ï¼Œè¦æ˜¯aptèƒ½å®Œæˆï¼Œç»ä¸å•ç‹¬ä¸‹è½½å®‰è£…åŒ…ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬æ‰‹åŠ¨å®‰è£…å­˜å‚¨åº“å’Œå¯†é’¥ 1wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor &gt; packages.microsoft.gpg 1sudo install -o root -g root -m 644 packages.microsoft.gpg /etc/apt/trusted.gpg.d/ 1sudo sh -c &#x27;echo &quot;deb [arch=amd64,arm64,armhf signed-by=/etc/apt/trusted.gpg.d/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main&quot; &gt; /etc/apt/sources.list.d/vscode.list&#x27; 1rm -f packages.microsoft.gpg æ›´æ–°ä¸å®‰è£… 123sudo apt install apt-transport-httpssudo apt updatesudo apt install code # or code-insiders","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"}]},{"title":"Linux æ“ä½œç³»ç»Ÿ-å†…å­˜ç®¡ç†","slug":"Linuxæ“ä½œç³»ç»Ÿ-å†…å­˜ç®¡ç†","date":"2021-08-19T01:37:04.000Z","updated":"2022-10-15T03:14:29.298Z","comments":true,"path":"2021/08/19/Linuxæ“ä½œç³»ç»Ÿ-å†…å­˜ç®¡ç†/","link":"","permalink":"http://example.com/2021/08/19/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","excerpt":"","text":"å†…å­˜ç®¡ç†æ¦‚è¿°è®¡ç®—æœºæ‰€è°“çš„â€œè®¡ç®—â€æŒ‡çš„æ˜¯ï¼š è¿›ç¨‹å’Œçº¿ç¨‹å¯¹äº CPU çš„ä½¿ç”¨ å¯¹å†…å­˜çš„ç®¡ç† ç‹¬äº«å†…å­˜ç©ºé—´çš„åŸç†æ¯ä¸ªè¿›ç¨‹éƒ½ç‹¬äº«ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”çœŸå®ç‰©ç†å†…å­˜åœ°å€å¯¹è¿›ç¨‹ä¸å¯è§ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™è¿›ç¨‹åˆ†é…ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œæ¯ä¸ªè¿›ç¨‹çœ‹åˆ°çš„å†…å­˜åœ°å€éƒ½æ˜¯ä» 0 å¼€å§‹ã€‚æ“ä½œç³»ç»Ÿä¼šå°†ä¸åŒè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€å’Œä¸åŒå†…å­˜çš„ç‰©ç†åœ°å€åšæ˜ å°„ã€‚å½“ç¨‹åºè®¿é—®è™šæ‹Ÿåœ°å€æ—¶ï¼Œç”±å†…æ ¸çš„æ•°æ®ç»“æ„è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆä¸åŒçš„ç‰©ç†åœ°å€ï¼Œè¿™æ ·ä¸åŒçš„è¿›ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œå†™å…¥çš„æ˜¯ä¸åŒçš„ç‰©ç†åœ°å€ã€‚ è§„åˆ’è™šæ‹Ÿåœ°å€ç©ºé—´é€šè¿‡ä»¥ä¸Šçš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ–¹é¢ã€‚ ç‰©ç†å†…å­˜çš„ç®¡ç†ï¼› è™šæ‹Ÿåœ°å€çš„ç®¡ç†ï¼› è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€å¦‚ä½•æ˜ å°„ï¼› è¿›ç¨‹è·å–äº†ä¸€æ®µç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´åï¼Œå¯ä»¥ä¸ç”¨ç®¡å…¶ä»–è¿›ç¨‹ï¼Œâ€œä»»æ„â€ä½¿ç”¨è¿™ç‰‡å†…å­˜ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ç‚¹è§„åˆ™ã€‚è¿™ç¯‡å†…å­˜éœ€è¦å­˜æ”¾å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„å†…å®¹ã€‚é«˜åœ°å€å­˜æ”¾å†…æ ¸æ€çš„å†…å®¹ï¼Œä½åœ°å€å­˜æ”¾ç”¨æˆ·æ€çš„å†…å®¹ã€‚å…·ä½“åˆ†ç•Œçº¿ 64 ä½ä¸ 32 ä½ä¸åŒï¼Œæš‚ä¸æ·±ç©¶ã€‚ æˆ‘ä»¬ä»æœ€ä½ä½å¼€å§‹æ’èµ·ï¼Œå…ˆæ˜¯Text Segmentã€Data Segment å’Œ BSS Segmentã€‚Text Segment æ˜¯å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œä»£ç çš„ä½ç½®ï¼ŒData Segment å­˜æ”¾é™æ€å¸¸é‡ï¼ŒBSS Segment å­˜æ”¾æœªåˆå§‹åŒ–çš„é™æ€å˜é‡ã€‚æ˜¯ä¸æ˜¯è§‰å¾—è¿™å‡ ä¸ªåå­—å¾ˆç†Ÿæ‚‰ï¼Ÿæ²¡é”™ï¼Œå’±ä»¬å‰é¢è®² ELF æ ¼å¼çš„æ—¶å€™æåˆ°è¿‡ï¼Œåœ¨äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶é‡Œé¢ï¼Œå°±æœ‰è¿™ä¸‰ä¸ªéƒ¨åˆ†ã€‚è¿™é‡Œå°±æ˜¯æŠŠäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶çš„ä¸‰ä¸ªéƒ¨åˆ†åŠ è½½åˆ°å†…å­˜é‡Œé¢ã€‚ æ¥ä¸‹æ¥æ˜¯å †ï¼ˆHeapï¼‰æ®µã€‚å †æ˜¯å¾€é«˜åœ°å€å¢é•¿çš„ï¼Œæ˜¯ç”¨æ¥åŠ¨æ€åˆ†é…å†…å­˜çš„åŒºåŸŸï¼Œmalloc å°±æ˜¯åœ¨è¿™é‡Œé¢åˆ†é…çš„ã€‚æ¥ä¸‹æ¥çš„åŒºåŸŸæ˜¯Memory Mapping Segmentã€‚è¿™å—åœ°å€å¯ä»¥ç”¨æ¥æŠŠæ–‡ä»¶æ˜ å°„è¿›å†…å­˜ç”¨çš„ï¼Œå¦‚æœäºŒè¿›åˆ¶çš„æ‰§è¡Œæ–‡ä»¶ä¾èµ–äºæŸä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œå°±æ˜¯åœ¨è¿™ä¸ªåŒºåŸŸé‡Œé¢å°† so æ–‡ä»¶æ˜ å°„åˆ°äº†å†…å­˜ä¸­ã€‚å†ä¸‹é¢å°±æ˜¯æ ˆï¼ˆStackï¼‰åœ°å€æ®µã€‚ä¸»çº¿ç¨‹çš„å‡½æ•°è°ƒç”¨çš„å‡½æ•°æ ˆå°±æ˜¯ç”¨è¿™é‡Œçš„ã€‚ æ™®é€šè¿›ç¨‹ä¸èƒ½è®¿é—®å†…æ ¸ç©ºé—´ï¼Œå¦‚æœéœ€è¦è¿›è¡Œæ›´é«˜æƒé™çš„å·¥ä½œï¼Œå°±éœ€è¦ç³»ç»Ÿè°ƒç”¨è¿›å…¥å†…æ ¸ã€‚æ¯ä¸€æ®µè¿›ç¨‹çš„å†…å­˜ç©ºé—´å­˜æ”¾çš„å†…å®¹å„ä¸ç›¸åŒï¼Œä½†æ˜¯è¿›å…¥å†…æ ¸åçœ‹åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå†…æ ¸ç©ºé—´ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹åˆ—è¡¨ã€‚ å†…æ ¸çš„ä»£ç è®¿é—®å†…æ ¸çš„æ•°æ®ç»“æ„ï¼Œå¤§éƒ¨åˆ†çš„æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨è™šæ‹Ÿåœ°å€çš„ï¼Œè™½ç„¶å†…æ ¸ä»£ç æƒé™å¾ˆå¤§ï¼Œä½†æ˜¯èƒ½å¤Ÿä½¿ç”¨çš„è™šæ‹Ÿåœ°å€èŒƒå›´ä¹Ÿåªèƒ½åœ¨å†…æ ¸ç©ºé—´ï¼Œä¹Ÿå³å†…æ ¸ä»£ç è®¿é—®å†…æ ¸æ•°æ®ç»“æ„ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œå¦‚ä½•å°†å…¶æ˜ å°„æˆä¸ºç‰©ç†åœ°å€å‘¢ï¼Ÿ å’±ä»¬å‰é¢è®² x86 CPU çš„æ—¶å€™ï¼Œè®²è¿‡åˆ†æ®µæœºåˆ¶ï¼Œå’±ä»¬è§„åˆ’è™šæ‹Ÿç©ºé—´çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å°†ç©ºé—´åˆ†æˆå¤šä¸ªæ®µè¿›è¡Œä¿å­˜ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹åˆ†æ®µæœºåˆ¶çš„åŸç†ã€‚ åˆ†æ®µæœºåˆ¶ä¸‹çš„è™šæ‹Ÿåœ°å€ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ®µé€‰æ‹©å­å’Œæ®µå†…åç§»é‡ã€‚æ®µé€‰æ‹©å­å°±ä¿å­˜åœ¨å’±ä»¬å‰é¢è®²è¿‡çš„æ®µå¯„å­˜å™¨é‡Œé¢ã€‚æ®µé€‰æ‹©å­é‡Œé¢æœ€é‡è¦çš„æ˜¯æ®µå·ï¼Œç”¨ä½œæ®µè¡¨çš„ç´¢å¼•ã€‚æ®µè¡¨é‡Œé¢ä¿å­˜çš„æ˜¯è¿™ä¸ªæ®µçš„åŸºåœ°å€ã€æ®µçš„ç•Œé™å’Œç‰¹æƒç­‰çº§ç­‰ã€‚è™šæ‹Ÿåœ°å€ä¸­çš„æ®µå†…åç§»é‡åº”è¯¥ä½äº 0 å’Œæ®µç•Œé™ä¹‹é—´ã€‚å¦‚æœæ®µå†…åç§»é‡æ˜¯åˆæ³•çš„ï¼Œå°±å°†æ®µåŸºåœ°å€åŠ ä¸Šæ®µå†…åç§»é‡å¾—åˆ°ç‰©ç†å†…å­˜åœ°å€ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„è™šæ‹Ÿç©ºé—´åˆ†æˆä»¥ä¸‹ 4 ä¸ªæ®µï¼Œç”¨ 0ï½3 æ¥ç¼–å·ã€‚æ¯ä¸ªæ®µåœ¨æ®µè¡¨ä¸­æœ‰ä¸€ä¸ªé¡¹ï¼Œåœ¨ç‰©ç†ç©ºé—´ä¸­ï¼Œæ®µçš„æ’åˆ—å¦‚ä¸‹å›¾çš„å³è¾¹æ‰€ç¤ºã€‚å¦‚æœè¦è®¿é—®æ®µ 2 ä¸­åç§»é‡ 600 çš„è™šæ‹Ÿåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºç‰©ç†åœ°å€ä¸ºï¼Œæ®µ 2 åŸºåœ°å€ 2000 + åç§»é‡ 600 = 2600ã€‚ åœ¨ Linux é‡Œé¢ï¼Œæ®µè¡¨å…¨ç§°æ®µæè¿°ç¬¦è¡¨ï¼ˆsegment descriptorsï¼‰ï¼Œæ”¾åœ¨å…¨å±€æè¿°ç¬¦è¡¨ GDTï¼ˆGlobal Descriptor Tableï¼‰é‡Œé¢ï¼Œä¼šæœ‰ä¸‹é¢çš„å®æ¥åˆå§‹åŒ–æ®µæè¿°ç¬¦è¡¨é‡Œé¢çš„è¡¨é¡¹ã€‚ 12345#define GDT_ENTRY_INIT(flags, base, limit) &#123; &#123; &#123; \\ .a = ((limit) &amp; 0xffff) | (((base) &amp; 0xffff) &lt;&lt; 16), \\ .b = (((base) &amp; 0xff0000) &gt;&gt; 16) | (((flags) &amp; 0xf0ff) &lt;&lt; 8) | \\ ((limit) &amp; 0xf0000) | ((base) &amp; 0xff000000), \\ &#125; &#125; &#125; ä¸€ä¸ªæ®µè¡¨é¡¹ç”±æ®µåŸºåœ°å€ baseã€æ®µç•Œé™ limitï¼Œè¿˜æœ‰ä¸€äº›æ ‡è¯†ç¬¦ç»„æˆã€‚ 1234567891011121314151617DEFINE_PER_CPU_PAGE_ALIGNED(struct gdt_page, gdt_page) = &#123; .gdt = &#123;#ifdef CONFIG_X86_64 [GDT_ENTRY_KERNEL32_CS] = GDT_ENTRY_INIT(0xc09b, 0, 0xfffff), [GDT_ENTRY_KERNEL_CS] = GDT_ENTRY_INIT(0xa09b, 0, 0xfffff), [GDT_ENTRY_KERNEL_DS] = GDT_ENTRY_INIT(0xc093, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER32_CS] = GDT_ENTRY_INIT(0xc0fb, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER_DS] = GDT_ENTRY_INIT(0xc0f3, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER_CS] = GDT_ENTRY_INIT(0xa0fb, 0, 0xfffff),#else [GDT_ENTRY_KERNEL_CS] = GDT_ENTRY_INIT(0xc09a, 0, 0xfffff), [GDT_ENTRY_KERNEL_DS] = GDT_ENTRY_INIT(0xc092, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER_CS] = GDT_ENTRY_INIT(0xc0fa, 0, 0xfffff), [GDT_ENTRY_DEFAULT_USER_DS] = GDT_ENTRY_INIT(0xc0f2, 0, 0xfffff),......#endif&#125; &#125;;EXPORT_PER_CPU_SYMBOL_GPL(gdt_page); è¿™é‡Œé¢å¯¹äº 64 ä½çš„å’Œ 32 ä½çš„ï¼Œéƒ½å®šä¹‰äº†å†…æ ¸ä»£ç æ®µã€å†…æ ¸æ•°æ®æ®µã€ç”¨æˆ·ä»£ç æ®µå’Œç”¨æˆ·æ•°æ®æ®µã€‚å¦å¤–ï¼Œè¿˜ä¼šå®šä¹‰ä¸‹é¢å››ä¸ªæ®µé€‰æ‹©å­ï¼ŒæŒ‡å‘ä¸Šé¢çš„æ®µæè¿°ç¬¦è¡¨é¡¹ã€‚ 1234#define __KERNEL_CS (GDT_ENTRY_KERNEL_CS*8)#define __KERNEL_DS (GDT_ENTRY_KERNEL_DS*8)#define __USER_DS (GDT_ENTRY_DEFAULT_USER_DS*8 + 3)#define __USER_CS (GDT_ENTRY_DEFAULT_USER_CS*8 + 3) é€šè¿‡åˆ†æï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ‰€æœ‰çš„æ®µçš„èµ·å§‹åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ 0ã€‚æ‰€ä»¥ï¼Œåœ¨ Linux æ“ä½œç³»ç»Ÿä¸­ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ°å…¨éƒ¨çš„åˆ†æ®µåŠŸèƒ½ã€‚é‚£åˆ†æ®µæ˜¯ä¸æ˜¯å®Œå…¨æ²¡æœ‰ç”¨å¤„å‘¢ï¼Ÿåˆ†æ®µå¯ä»¥åšæƒé™å®¡æ ¸ï¼Œä¾‹å¦‚ç”¨æˆ·æ€ DPL æ˜¯ 3ï¼Œå†…æ ¸æ€ DPL æ˜¯ 0ã€‚å½“ç”¨æˆ·æ€è¯•å›¾è®¿é—®å†…æ ¸æ€çš„æ—¶å€™ï¼Œä¼šå› ä¸ºæƒé™ä¸è¶³è€ŒæŠ¥é”™ã€‚å…¶å® Linux å€¾å‘äºå¦å¤–ä¸€ç§ä»è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢æ–¹å¼ï¼Œç§°ä¸ºåˆ†é¡µï¼ˆPagingï¼‰ã€‚å¯¹äºç‰©ç†å†…å­˜ï¼Œæ“ä½œç³»ç»ŸæŠŠå®ƒåˆ†æˆä¸€å—ä¸€å—å¤§å°ç›¸åŒçš„é¡µï¼Œè¿™æ ·æ›´æ–¹ä¾¿ç®¡ç†ï¼Œä¾‹å¦‚æœ‰çš„å†…å­˜é¡µé¢é•¿æ—¶é—´ä¸ç”¨äº†ï¼Œå¯ä»¥æš‚æ—¶å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç§°ä¸ºæ¢å‡ºã€‚ä¸€æ—¦éœ€è¦çš„æ—¶å€™ï¼Œå†åŠ è½½è¿›æ¥ï¼Œå«ä½œæ¢å…¥ã€‚è¿™æ ·å¯ä»¥æ‰©å¤§å¯ç”¨ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œæé«˜ç‰©ç†å†…å­˜çš„åˆ©ç”¨ç‡ã€‚ è¿™ä¸ªæ¢å…¥å’Œæ¢å‡ºéƒ½æ˜¯ä»¥é¡µä¸ºå•ä½çš„ã€‚é¡µé¢çš„å¤§å°ä¸€èˆ¬ä¸º 4KBã€‚ä¸ºäº†èƒ½å¤Ÿå®šä½å’Œè®¿é—®æ¯ä¸ªé¡µï¼Œéœ€è¦æœ‰ä¸ªé¡µè¡¨ï¼Œä¿å­˜æ¯ä¸ªé¡µçš„èµ·å§‹åœ°å€ï¼Œå†åŠ ä¸Šåœ¨é¡µå†…çš„åç§»é‡ï¼Œç»„æˆçº¿æ€§åœ°å€ï¼Œå°±èƒ½å¯¹äºå†…å­˜ä¸­çš„æ¯ä¸ªä½ç½®è¿›è¡Œè®¿é—®äº†ã€‚ è™šæ‹Ÿåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œé¡µå·å’Œé¡µå†…åç§»ã€‚é¡µå·ä½œä¸ºé¡µè¡¨çš„ç´¢å¼•ï¼Œé¡µè¡¨åŒ…å«ç‰©ç†é¡µæ¯é¡µæ‰€åœ¨ç‰©ç†å†…å­˜çš„åŸºåœ°å€ã€‚è¿™ä¸ªåŸºåœ°å€ä¸é¡µå†…åç§»çš„ç»„åˆå°±å½¢æˆäº†ç‰©ç†å†…å­˜åœ°å€ã€‚ 32 ä½ç¯å¢ƒä¸‹ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´å…± 4GBã€‚å¦‚æœåˆ†æˆ 4KB ä¸€ä¸ªé¡µï¼Œé‚£å°±æ˜¯ 1M ä¸ªé¡µã€‚æ¯ä¸ªé¡µè¡¨é¡¹éœ€è¦ 4 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œé‚£ä¹ˆæ•´ä¸ª 4GB ç©ºé—´çš„æ˜ å°„å°±éœ€è¦ 4MB çš„å†…å­˜æ¥å­˜å‚¨æ˜ å°„è¡¨ã€‚å¦‚æœæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„æ˜ å°„è¡¨ï¼Œ100 ä¸ªè¿›ç¨‹å°±éœ€è¦ 400MB çš„å†…å­˜ã€‚å¯¹äºå†…æ ¸æ¥è®²ï¼Œæœ‰ç‚¹å¤§äº†ã€‚ é¡µè¡¨ä¸­æ‰€æœ‰é¡µè¡¨é¡¹å¿…é¡»æå‰å»ºå¥½ï¼Œå¹¶ä¸”è¦æ±‚æ˜¯è¿ç»­çš„ã€‚å¦‚æœä¸è¿ç»­ï¼Œå°±æ²¡æœ‰åŠæ³•é€šè¿‡è™šæ‹Ÿåœ°å€é‡Œé¢çš„é¡µå·æ‰¾åˆ°å¯¹åº”çš„é¡µè¡¨é¡¹äº†ã€‚ é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¯•ç€å°†é¡µè¡¨å†åˆ†é¡µï¼Œ4G çš„ç©ºé—´éœ€è¦ 4M çš„é¡µè¡¨æ¥å­˜å‚¨æ˜ å°„ã€‚æˆ‘ä»¬æŠŠè¿™ 4M åˆ†æˆ 1Kï¼ˆ1024ï¼‰ä¸ª 4Kï¼Œæ¯ä¸ª 4K åˆèƒ½æ”¾åœ¨ä¸€é¡µé‡Œé¢ï¼Œè¿™æ · 1K ä¸ª 4K å°±æ˜¯ 1K ä¸ªé¡µï¼Œè¿™ 1K ä¸ªé¡µä¹Ÿéœ€è¦ä¸€ä¸ªè¡¨è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬ç§°ä¸ºé¡µç›®å½•è¡¨ï¼Œè¿™ä¸ªé¡µç›®å½•è¡¨é‡Œé¢æœ‰ 1K é¡¹ï¼Œæ¯é¡¹ 4 ä¸ªå­—èŠ‚ï¼Œé¡µç›®å½•è¡¨å¤§å°ä¹Ÿæ˜¯ 4Kã€‚ é¡µç›®å½•æœ‰ 1K é¡¹ï¼Œç”¨ 10 ä½å°±å¯ä»¥è¡¨ç¤ºè®¿é—®é¡µç›®å½•çš„å“ªä¸€é¡¹ã€‚è¿™ä¸€é¡¹å…¶å®å¯¹åº”çš„æ˜¯ä¸€æ•´é¡µçš„é¡µè¡¨é¡¹ï¼Œä¹Ÿå³ 4K çš„é¡µè¡¨é¡¹ã€‚æ¯ä¸ªé¡µè¡¨é¡¹ä¹Ÿæ˜¯ 4 ä¸ªå­—èŠ‚ï¼Œå› è€Œä¸€æ•´é¡µçš„é¡µè¡¨é¡¹æ˜¯ 1K ä¸ªã€‚å†ç”¨ 10 ä½å°±å¯ä»¥è¡¨ç¤ºè®¿é—®é¡µè¡¨é¡¹çš„å“ªä¸€é¡¹ï¼Œé¡µè¡¨é¡¹ä¸­çš„ä¸€é¡¹å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªé¡µï¼Œæ˜¯å­˜æ”¾æ•°æ®çš„é¡µï¼Œè¿™ä¸ªé¡µçš„å¤§å°æ˜¯ 4Kï¼Œç”¨ 12 ä½å¯ä»¥å®šä½è¿™ä¸ªé¡µå†…çš„ä»»ä½•ä¸€ä¸ªä½ç½®ã€‚ è¿™æ ·åŠ èµ·æ¥æ­£å¥½ 32 ä½ï¼Œä¹Ÿå°±æ˜¯ç”¨å‰ 10 ä½å®šä½åˆ°é¡µç›®å½•è¡¨ä¸­çš„ä¸€é¡¹ã€‚å°†è¿™ä¸€é¡¹å¯¹åº”çš„é¡µè¡¨å–å‡ºæ¥å…± 1k é¡¹ï¼Œå†ç”¨ä¸­é—´ 10 ä½å®šä½åˆ°é¡µè¡¨ä¸­çš„ä¸€é¡¹ï¼Œå°†è¿™ä¸€é¡¹å¯¹åº”çš„å­˜æ”¾æ•°æ®çš„é¡µå–å‡ºæ¥ï¼Œå†ç”¨æœ€å 12 ä½å®šä½åˆ°é¡µä¸­çš„å…·ä½“ä½ç½®è®¿é—®æ•°æ®ã€‚ ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œæ˜ å°„ 4GB åœ°å€ç©ºé—´å°±éœ€è¦ 4MB+4KB çš„å†…å­˜ï¼Œè¿™æ ·ä¸æ˜¯æ›´å¤§äº†å—ï¼Ÿå½“ç„¶å¦‚æœé¡µæ˜¯æ»¡çš„ï¼Œå½“æ—¶æ˜¯æ›´å¤§äº†ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¾€å¾€ä¸ä¼šä¸ºä¸€ä¸ªè¿›ç¨‹åˆ†é…é‚£ä¹ˆå¤šå†…å­˜ã€‚ æ¯”å¦‚è¯´ï¼Œä¸Šé¢å›¾ä¸­ï¼Œæˆ‘ä»¬å‡è®¾åªç»™è¿™ä¸ªè¿›ç¨‹åˆ†é…äº†ä¸€ä¸ªæ•°æ®é¡µã€‚å¦‚æœåªä½¿ç”¨é¡µè¡¨ï¼Œä¹Ÿéœ€è¦å®Œæ•´çš„ 1M ä¸ªé¡µè¡¨é¡¹å…± 4M çš„å†…å­˜ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº†é¡µç›®å½•ï¼Œé¡µç›®å½•éœ€è¦ 1K ä¸ªå…¨éƒ¨åˆ†é…ï¼Œå ç”¨å†…å­˜ 4Kï¼Œä½†æ˜¯é‡Œé¢åªæœ‰ä¸€é¡¹ä½¿ç”¨äº†ã€‚åˆ°äº†é¡µè¡¨é¡¹ï¼Œåªéœ€è¦åˆ†é…èƒ½å¤Ÿç®¡ç†é‚£ä¸ªæ•°æ®é¡µçš„é¡µè¡¨é¡¹é¡µå°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤š 4Kï¼Œè¿™æ ·å†…å­˜å°±èŠ‚çœå¤šäº†ã€‚ å½“ç„¶å¯¹äº 64 ä½çš„ç³»ç»Ÿï¼Œä¸¤çº§è‚¯å®šä¸å¤Ÿäº†ï¼Œå°±å˜æˆäº†å››çº§ç›®å½•ï¼Œåˆ†åˆ«æ˜¯å…¨å±€é¡µç›®å½•é¡¹ PGDï¼ˆPage Global Directoryï¼‰ã€ä¸Šå±‚é¡µç›®å½•é¡¹ PUDï¼ˆPage Upper Directoryï¼‰ã€ä¸­é—´é¡µç›®å½•é¡¹ PMDï¼ˆPage Middle Directoryï¼‰å’Œé¡µè¡¨é¡¹ PTEï¼ˆPage Table Entryï¼‰ã€‚ è¿›ç¨‹ç©ºé—´ç®¡ç†ç‰©ç†å†…å­˜ç®¡ç†ç”¨æˆ·æ€å†…å­˜æ˜ å°„12345#define GDT_ENTRY_INIT(flags, base, limit) &#123; &#123; &#123; \\ .a = ((limit) &amp; 0xffff) | (((base) &amp; 0xffff) &lt;&lt; 16), \\ .b = (((base) &amp; 0xff0000) &gt;&gt; 16) | (((flags) &amp; 0xf0ff) &lt;&lt; 8) | \\ ((limit) &amp; 0xf0000) | ((base) &amp; 0xff000000), \\ &#125; &#125; &#125; é€šè¿‡åˆ†æï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ‰€æœ‰çš„æ®µçš„èµ·å§‹åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ 0ã€‚è¿™ç®—å“ªé—¨å­åˆ†æ®µå˜›ï¼æ‰€ä»¥ï¼Œåœ¨ Linux æ“ä½œç³»ç»Ÿä¸­ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ°å…¨éƒ¨çš„åˆ†æ®µåŠŸèƒ½ã€‚é‚£åˆ†æ®µæ˜¯ä¸æ˜¯å®Œå…¨æ²¡æœ‰ç”¨å¤„å‘¢ï¼Ÿåˆ†æ®µå¯ä»¥åšæƒé™å®¡æ ¸ï¼Œä¾‹å¦‚ç”¨æˆ·æ€ DPL æ˜¯ 3ï¼Œå†…æ ¸æ€ DPL æ˜¯ 0ã€‚å½“ç”¨æˆ·æ€è¯•å›¾è®¿é—®å†…æ ¸æ€çš„æ—¶å€™ï¼Œä¼šå› ä¸ºæƒé™ä¸è¶³è€ŒæŠ¥é”™ã€‚ å…¶å® Linux å€¾å‘äºå¦å¤–ä¸€ç§ä»è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢æ–¹å¼ï¼Œç§°ä¸ºåˆ†é¡µï¼ˆPagingï¼‰ã€‚ å¯¹äºç‰©ç†å†…å­˜ï¼Œæ“ä½œç³»ç»ŸæŠŠå®ƒåˆ†æˆä¸€å—ä¸€å—å¤§å°ç›¸åŒçš„é¡µï¼Œè¿™æ ·æ›´æ–¹ä¾¿ç®¡ç†ï¼Œä¾‹å¦‚æœ‰çš„å†…å­˜é¡µé¢é•¿æ—¶é—´ä¸ç”¨äº†ï¼Œå¯ä»¥æš‚æ—¶å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç§°ä¸ºæ¢å‡ºã€‚ä¸€æ—¦éœ€è¦çš„æ—¶å€™ï¼Œå†åŠ è½½è¿›æ¥ï¼Œå«ä½œæ¢å…¥ã€‚è¿™æ ·å¯ä»¥æ‰©å¤§å¯ç”¨ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œæé«˜ç‰©ç†å†…å­˜çš„åˆ©ç”¨ç‡ã€‚","categories":[{"name":"Linux æ“ä½œç³»ç»Ÿ","slug":"Linux-æ“ä½œç³»ç»Ÿ","permalink":"http://example.com/categories/Linux-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"Qt æ¨¡ä»¿ç™»å½•ç•Œé¢-äº¤äº’å“åº”","slug":"Qtæ¨¡ä»¿ç™»å½•ç•Œé¢-äº¤äº’å“åº”","date":"2021-08-18T05:07:01.000Z","updated":"2022-10-15T03:14:29.482Z","comments":true,"path":"2021/08/18/Qtæ¨¡ä»¿ç™»å½•ç•Œé¢-äº¤äº’å“åº”/","link":"","permalink":"http://example.com/2021/08/18/Qt%E6%A8%A1%E4%BB%BF%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-%E4%BA%A4%E4%BA%92%E5%93%8D%E5%BA%94/","excerpt":"","text":"æ•ˆæœé¢„è§ˆ è®¾ç½®çª—å£æ‹–åŠ¨å› ä¸ºè¿™ä¸ªé¡¹ç›®ä¸­æ²¡æœ‰å°†ç™»å½•ç•Œé¢ç›´æ¥ç»§æ‰¿MainWindowï¼Œè€Œæ˜¯ç»§æ‰¿çš„Dialogç±»ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸èƒ½ç›´æ¥ç§»åŠ¨çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ·»åŠ ç›¸åº”çš„æ–¹æ³•ã€‚è¿™é‡Œå®ç°äº†ä¸‰ç§æ–¹æ³•ï¼Œç‚¹å‡»ï¼Œæ‹–åŠ¨ï¼Œé‡Šæ”¾ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839//mytitlebar.cpp// ä»¥ä¸‹é€šè¿‡ mousePressEventã€mouseMoveEventã€mouseReleaseEvent ä¸‰ä¸ªäº‹ä»¶å®ç°äº†é¼ æ ‡æ‹–åŠ¨æ ‡é¢˜æ ç§»åŠ¨çª—å£çš„æ•ˆæœ;void MyTitleBar::mousePressEvent(QMouseEvent *event)&#123; if (m_buttonType == MIN_MAX_BUTTON) &#123; // åœ¨çª—å£æœ€å¤§åŒ–æ—¶ç¦æ­¢æ‹–åŠ¨çª—å£; if (m_pButtonMax-&gt;isVisible()) &#123; m_isPressed = true; m_startMovePos = event-&gt;globalPos(); &#125; &#125; else &#123; m_isPressed = true; m_startMovePos = event-&gt;globalPos(); &#125; return QWidget::mousePressEvent(event);&#125;void MyTitleBar::mouseMoveEvent(QMouseEvent *event)&#123; if (m_isPressed &amp;&amp; m_isMoveParentWindow) &#123; QPoint movePoint = event-&gt;globalPos() - m_startMovePos; QPoint widgetPos = this-&gt;parentWidget()-&gt;pos() + movePoint; m_startMovePos = event-&gt;globalPos(); this-&gt;parentWidget()-&gt;move(widgetPos.x(), widgetPos.y()); &#125; return QWidget::mouseMoveEvent(event);&#125;void MyTitleBar::mouseReleaseEvent(QMouseEvent *event)&#123; m_isPressed = false; return QWidget::mouseReleaseEvent(event);&#125; globalPos()è·å–å…¨å±€çš„åæ ‡event-&gt;globalPos()æ˜¯è·å–å…¨å±€çš„åæ ‡ï¼Œå…¨å±€æ˜¯ç›¸å¯¹äºæ•´ä¸ªå±å¹•è€Œè¨€çš„ã€‚è¿˜æœ‰ä¸€ä¸ªå‡½æ•°pos()è·å–çš„æ˜¯å±€éƒ¨åæ ‡ï¼Œç›¸å¯¹äºä¸€ä¸ªwidgetçª—å£è€Œè¨€ã€‚ move()ç§»åŠ¨çª—å£12void move(int x, int y);void move(const QPoint &amp;); å…¶ä¸­moveçš„åŸç‚¹æ˜¯çˆ¶çª—å£çš„å·¦ä¸Šè§’ï¼Œå¦‚æœæ²¡æœ‰çˆ¶çª—å£ï¼Œåˆ™æ¡Œé¢å³ä¸ºçˆ¶çª—å£ã€‚x å¾€å³é€’å¢ï¼Œy å¾€ä¸‹é€’å¢ mouseMoveEvent()è¿™ä¸ªå‡½æ•°é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œm_startMovePos = event-&gt;globalPos()è¿™æ¡è¯­å¥ã€‚æ¯æ¬¡ç§»åŠ¨çª—å£ä¹‹å‰ï¼Œå…ˆæŠŠé¼ æ ‡ç§»åŠ¨åçš„ä½ç½®è®°å½•ä¸‹æ¥ï¼Œä½œä¸ºä¸‹ä¸€æ¬¡ç§»åŠ¨çš„èµ·ç‚¹ã€‚ è®¾ç½®æœ€å°åŒ–ï¼Œå…³é—­1234567891011121314151617//mytitlebar.cpp// ä¿¡å·æ§½çš„ç»‘å®š;void MyTitleBar::initConnections()&#123; connect(m_pButtonMin, SIGNAL(clicked()), this, SLOT(onButtonMinClicked())); connect(m_pButtonClose, SIGNAL(clicked()), this, SLOT(onButtonCloseClicked()));&#125;void MyTitleBar::onButtonMinClicked()&#123; emit signalButtonMinClicked();&#125;void MyTitleBar::onButtonCloseClicked()&#123; emit signalButtonCloseClicked();&#125; æ ‡é¢˜æ æ˜¯åœ¨basewindowä¸­ new å‡ºæ¥çš„ï¼Œmytitlebarç±»åªè´Ÿè´£å‘é€ä¿¡å·ï¼ŒçœŸæ­£å¤„ç†ä¿¡å·çš„æ˜¯åœ¨basewindowç±»ä¸­ã€‚ 123456789101112131415161718192021222324252627//basewindow.cppvoid BaseWindow::initTitleBar()&#123; createMyTitle(this); m_titleBar-&gt;move(0, 0); connect(m_titleBar, SIGNAL(signalButtonMinClicked()), this, SLOT(onButtonMinClicked())); connect(m_titleBar, SIGNAL(signalButtonCloseClicked()), this, SLOT(onButtonCloseClicked()));&#125;void BaseWindow::onButtonMinClicked()&#123; if (Qt::Tool == (windowFlags() &amp; Qt::Tool)) &#123; hide(); &#125; else &#123; showMinimized(); &#125;&#125;void BaseWindow::onButtonCloseClicked()&#123; close();&#125; åœ¨åˆå§‹åŒ–æ ‡é¢˜æ æ—¶ï¼Œå°±æŠŠç‚¹å‡»ä¿¡å·ä¸ç›¸å…³çš„æ§½å‡½æ•°ç»‘å®šã€‚å½“æœ‰æœ€å°åŒ–ç‚¹å‡»ä¿¡å·å‘ç”Ÿæ—¶ï¼Œå°±ä¼šè°ƒç”¨æœ€å°åŒ–æ“ä½œã€‚ å’Œçª—å£ç›¸å…³çš„å‡ ä¸ªå‡½æ•°12345678showMinimized() //æœ€å°åŒ–showNormal() //ä»æœ€å°åŒ–æˆ–è€…æœ€å¤§åŒ–çª—å£æ¢å¤åˆ°æ­£å¸¸çª—å£showMaximized() //æœ€å¤§åŒ–show() //æ˜¾ç¤ºçª—å£ï¼Œå¯ä»¥æ˜¾ç¤ºæ¨¡æ€çª—å£ä¹Ÿå¯ä»¥æ˜¾ç¤ºéæ¨¡æ€hide() //éšè—çª—å£isVisible() //åˆ¤æ–­æ˜¯å¦å¯è§isMinimized() //åˆ¤æ–­æ˜¯å¦å¤„äºæœ€å°åŒ–çŠ¶æ€close() //å…³é—­çª—å£ åˆ‡æ¢ç”¨æˆ·åŠåˆ é™¤ç”¨æˆ·12345678910111213141516171819202122232425262728293031323334353637383940414243//loginwindow.cpp// åˆå§‹åŒ–ç”¨æˆ·ç™»å½•ä¿¡æ¯;void LoginWindow::initAccountList()&#123; // è®¾ç½®ä»£ç†; m_Accountlist = new QListWidget(this); ui-&gt;accountComboBox-&gt;setModel(m_Accountlist-&gt;model()); ui-&gt;accountComboBox-&gt;setView(m_Accountlist); for (int i = 0; i &lt; 3; i++) &#123; AccountItem *account_item = new AccountItem(); account_item-&gt;setAccountInfo(i, QStringLiteral(&quot;Dominic%1å·&quot;).arg(i), QString(&quot;:/Resources/LoginWindow/headImage/head_%1.png&quot;).arg(i)); connect(account_item, SIGNAL(signalShowAccountInfo(int, QString)), this, SLOT(onShowAccountInfo(int, QString))); connect(account_item, SIGNAL(signalRemoveAccount(int)), this, SLOT(onRemoveAccount(int))); QListWidgetItem *list_item = new QListWidgetItem(m_Accountlist); m_Accountlist-&gt;setItemWidget(list_item, account_item); &#125;&#125;//å°†é€‰é¡¹æ–‡æœ¬æ˜¾ç¤ºåœ¨ QComboBox å½“ä¸­void LoginWindow::onShowAccountInfo(int index, QString accountName)&#123; ui-&gt;accountComboBox-&gt;setEditText(accountName); ui-&gt;accountComboBox-&gt;hidePopup(); // æ›´æ¢ç”¨æˆ·å¤´åƒ; QString fileName = QString(&quot;:/Resources/LoginWindow/headImage/head_%1.png&quot;).arg(index); ui-&gt;userHead-&gt;setPixmap(QPixmap(fileName).scaled(ui-&gt;userHead-&gt;width(), ui-&gt;userHead-&gt;height()));&#125;// ç§»é™¤å½“å‰ç™»å½•åˆ—è¡¨ä¸­æŸä¸€é¡¹;void LoginWindow::onRemoveAccount(int index)&#123; for (int row = 0; row &lt; m_Accountlist-&gt;count(); row++) &#123; AccountItem* itemWidget = (AccountItem*)m_Accountlist-&gt;itemWidget(m_Accountlist-&gt;item(row)); if (itemWidget != NULL &amp;&amp; itemWidget-&gt;getItemWidgetIndex() == index) &#123; m_Accountlist-&gt;takeItem(row); itemWidget-&gt;deleteLater(); &#125; &#125;&#125; åœ¨initAccountList()ä¸­ï¼Œåˆå§‹åŒ–å¥½äº†ä¸‰ä¸ªè´¦æˆ·ä¿¡æ¯ï¼Œå½“æ¥æ”¶åˆ°æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯çš„ä¿¡å·signalShowAccountInfoåï¼Œå°±ä¼šè°ƒç”¨onShowAccountInfoæ§½å‡½æ•°æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå°†ä¸‹æ‹‰æ¡†çš„å†…å®¹è®¾ç½®æˆåˆ‡æ¢åçš„ç”¨æˆ·åï¼Œç„¶åéšè—ä¸‹æ‹‰æ¡†hidPopupã€‚æ›´æ”¹å¤´åƒã€‚ å½“æ¥æ”¶åˆ°åˆ é™¤ä¿¡å·æ—¶ï¼Œè°ƒç”¨onRemoveAccountæ§½å‡½æ•°ï¼Œåˆ é™¤æŒ‡å®šçš„ç”¨æˆ·ä¿¡æ¯ã€‚ hidPopup()éšè—ä¸‹æ‹‰æ¡†æ–‡ç« å¼€å¤´çš„æ•ˆæœå›¾æ˜¯éšè—ä¸‹æ‹‰æ¡†çš„æ•ˆæœï¼Œæ¯æ¬¡åˆ‡æ¢ç”¨æˆ·ä¸‹æ‹‰æ¡†éšè—ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ä¸éšè—ä»€ä¹ˆæ•ˆæœå°±å®¹æ˜“ç†è§£äº†ã€‚ takeItem()åˆ é™¤éƒ¨ä»¶1QListWidgetItem *QListWidget::takeItem(int row) ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ä¸€è¡Œéƒ¨ä»¶åˆ é™¤ã€‚ deleteLater()ç¨ååˆ é™¤å¯¹è±¡deletelaterçš„åŸç†æ˜¯ QObject::deleteLater()å¹¶æ²¡æœ‰å°†å¯¹è±¡ç«‹å³é”€æ¯ï¼Œè€Œæ˜¯å‘ä¸»æ¶ˆæ¯å¾ªç¯å‘é€äº†ä¸€ä¸ªeventï¼Œä¸‹ä¸€æ¬¡ä¸»æ¶ˆæ¯å¾ªç¯æ”¶åˆ°è¿™ä¸ªeventä¹‹åæ‰ä¼šé”€æ¯å¯¹è±¡ã€‚ åˆ‡æ¢ç™»å½•çŠ¶æ€123456789101112131415161718192021222324252627282930313233343536//loginwindow.cpp// é€‰æ‹©äº†æ–°çš„ç”¨æˆ·ç™»å½•çŠ¶æ€;void LoginWindow::onLoginStateClicked()&#123; m_loginStateMemu = new QMenu(); QAction *pActionOnline = m_loginStateMemu-&gt;addAction(QIcon(&quot;:/Resources/LoginWindow/LoginState/state_online.png&quot;), QStringLiteral(&quot;æˆ‘åœ¨çº¿ä¸Š&quot;)); QAction *pActionActive = m_loginStateMemu-&gt;addAction(QIcon(&quot;:/Resources/LoginWindow/LoginState/state_Qme.png&quot;), QStringLiteral(&quot;Q æˆ‘å§&quot;)); m_loginStateMemu-&gt;addSeparator(); QAction *pActionAway = m_loginStateMemu-&gt;addAction(QIcon(&quot;:/Resources/LoginWindow/LoginState/state_away.png&quot;), QStringLiteral(&quot;ç¦»å¼€&quot;)); QAction *pActionBusy = m_loginStateMemu-&gt;addAction(QIcon(&quot;:/Resources/LoginWindow/LoginState/state_busy.png&quot;), QStringLiteral(&quot;å¿™ç¢Œ&quot;)); QAction *pActionNoDisturb = m_loginStateMemu-&gt;addAction(QIcon(&quot;:/Resources/LoginWindow/LoginState/state_notdisturb.png&quot;), QStringLiteral(&quot;è¯·å‹¿æ‰“æ‰°&quot;)); m_loginStateMemu-&gt;addSeparator(); QAction *pActionHide = m_loginStateMemu-&gt;addAction(QIcon(&quot;:/Resources/LoginWindow/LoginState/state_hide.png&quot;), QStringLiteral(&quot;éšèº«&quot;)); // è®¾ç½®çŠ¶æ€å€¼; pActionOnline-&gt;setData(ONLINE); pActionActive-&gt;setData(ACTIVE); pActionAway-&gt;setData(AWAY); pActionBusy-&gt;setData(BUSY); pActionNoDisturb-&gt;setData(NOT_DISTURB); pActionHide-&gt;setData(HIDE); connect(m_loginStateMemu, SIGNAL(triggered(QAction *)), this, SLOT(onMenuClicked(QAction*))); QPoint pos = ui-&gt;loginState-&gt;mapToGlobal(QPoint(0, 0)) + QPoint(0, 20); m_loginStateMemu-&gt;exec(pos);&#125;// ç”¨æˆ·çŠ¶æ€èœå•ç‚¹å‡»;void LoginWindow::onMenuClicked(QAction * action)&#123; ui-&gt;loginState-&gt;setIcon(action-&gt;icon()); // è·å–çŠ¶æ€å€¼; m_loginState = (LoginState)action-&gt;data().toInt(); qDebug() &lt;&lt; &quot;onMenuClicked&quot; &lt;&lt; m_loginState;&#125; åœ¨æ¥æ”¶åˆ°ç‚¹å‡»çŠ¶æ€æŒ‰é’®ä¿¡å·æ—¶ï¼Œè°ƒç”¨onLoginStateClickedæ§½å‡½æ•°ï¼Œæ”¹å˜ç”¨æˆ·ç™»å½•çŠ¶æ€ã€‚åˆ‡æ¢çš„ä¸‹æ‹‰èœå•ç”¨çš„æ˜¯QMenuã€‚ addSeparator()æ·»åŠ åˆ†å‰²çº¿Q æˆ‘å§å’Œç¦»å¼€çŠ¶æ€ä¹‹é—´çš„åˆ†å‰²çº¿ã€‚ mapToGlobal()æ˜ å°„æˆå…¨å±€åæ ‡å¼¹å‡ºç™»å½•çŠ¶æ€èœå•m_loginStateMemuæ˜¯æˆ‘ä»¬è‡ªå·± new å‡ºæ¥çš„ï¼Œé»˜è®¤æ˜¾ç¤ºæ˜¯ä»å·¦ä¸Šè§’å¼€å§‹æ˜¾ç¤ºï¼Œè¿™æ ·å½“ç„¶ä¸è¡Œã€‚ mapToGlobal()çš„ä½œç”¨å°±æ˜¯å°†æ§ä»¶çš„åæ ‡æ˜ å°„æˆå…¨å±€åæ ‡ã€‚ä»£ç é‡Œçš„æ„æ€å°±æ˜¯å°†loginStateæ§ä»¶é‡Œé¢çš„åæ ‡ç”¨å…¨å±€åæ ‡è¡¨ç¤ºã€‚ç„¶åå†å‘ä¸‹åç§»20ä¸ªå•ä½ã€‚å†æŠŠå¾—åˆ°çš„å…¨å±€åæ ‡ä½œä¸ºm_loginStateMemuæ˜¾ç¤ºèµ·å§‹åæ ‡ã€‚ ä¸‹å›¾æ˜¯æœªåç§»çš„ç»“æœï¼Œ å‘ä¸‹åç§»20ä¸ªå•ä½çš„æ•ˆæœï¼Œå› ä¸ºæˆ‘ä»¬mapToGlobal(QPoint(0, 0))çš„å‚æ•°æ˜¯(0,0)ä¸ºèµ·ç‚¹ã€‚å¦‚æœæˆ‘ä»¬mapToGlobal(QPoint(0, 20))çš„å‚æ•°æ˜¯(0,20)ï¼Œå°±ä¸ç”¨å†åŠ ä¸Šåç§»äº†ã€‚","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"Qt æ¨¡ä»¿ç™»å½•ç•Œé¢-çª—å£å¸ƒå±€åŠæ ·å¼","slug":"Qtæ¨¡ä»¿ç™»å½•ç•Œé¢-çª—å£å¸ƒå±€åŠæ ·å¼","date":"2021-08-17T03:30:06.000Z","updated":"2022-10-15T03:14:29.487Z","comments":true,"path":"2021/08/17/Qtæ¨¡ä»¿ç™»å½•ç•Œé¢-çª—å£å¸ƒå±€åŠæ ·å¼/","link":"","permalink":"http://example.com/2021/08/17/Qt%E6%A8%A1%E4%BB%BF%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-%E7%AA%97%E5%8F%A3%E5%B8%83%E5%B1%80%E5%8F%8A%E6%A0%B7%E5%BC%8F/","excerpt":"","text":"æ¡†æ¶ç±»å›¾ æ•ˆæœé¢„è§ˆå®Œæ•´é¡¹ç›®åŠèµ„æºæ–‡ä»¶è¯·åœ¨GithubæŸ¥çœ‹ã€‚ é¡µé¢å¸ƒå±€ åˆå§‹åŒ–æ ‡é¢˜æ 12345678910111213// åˆå§‹åŒ–æ ‡é¢˜æ ;void LoginWindow::initMyTitle()&#123; // å› ä¸ºè¿™é‡Œæœ‰æ§ä»¶å±‚å äº†ï¼Œæ‰€ä»¥è¦æ³¨æ„æ§ä»¶ raise() æ–¹æ³•çš„è°ƒç”¨é¡ºåº; m_titleBar-&gt;move(0, 0); m_titleBar-&gt;raise(); m_titleBar-&gt;setBackgroundColor(100, 0, 0, true); m_titleBar-&gt;setButtonType(MIN_BUTTON); m_titleBar-&gt;setTitleWidth(this-&gt;width()); // è¿™é‡Œéœ€è¦è®¾ç½®æˆ falseï¼Œä¸å…è®¸é€šè¿‡æ ‡é¢˜æ æ‹–åŠ¨æ¥ç§»åŠ¨çª—å£ä½ç½®ï¼Œå¦åˆ™ä¼šé€ æˆçª—å£ä½ç½®é”™è¯¯; m_titleBar-&gt;setMoveParentWindowFlag(false); ui-&gt;pButtonArrow-&gt;raise();&#125; raise()å°†æ§ä»¶ç½®äºé¡¶å±‚ç¨‹åºåœ¨æ‰“å¼€åä¸€èˆ¬éƒ½åœ¨æ‰€æœ‰çª—ä½“çš„é¡¶å±‚ï¼Œæ‰“å¼€å…¶ä»–ç¨‹åºåä¹‹å‰çš„ç¨‹åºå°±ä¼šè¢«æ”¾åˆ°ä¸‹ä¸€å±‚ï¼Œåœ¨è¿™é‡Œï¼Œå½“è®¾ç½®å®Œmy_titleBaråå¯¹å…¶ä»–æ§ä»¶æ“ä½œå°±ä¼šæŠŠmy_titleBaræ§ä»¶è¦†ç›–ã€‚æ‰€æœ‰è¦ç”¨raise()æ–¹æ³•å°†å…¶ç½®äºé¡¶å±‚ã€‚ åˆå§‹åŒ–çª—å£12345678910111213141516171819202122232425262728293031323334353637383940// åˆå§‹åŒ–çª—å£;void LoginWindow::initWindow()&#123; //èƒŒæ™¯ GIG å›¾; QLabel* pBack = new QLabel(this); QMovie *movie = new QMovie(); movie-&gt;setFileName(&quot;:/Resources/LoginWindow/back.gif&quot;); pBack-&gt;setMovie(movie); movie-&gt;start(); pBack-&gt;move(0, 0); //æ–‡æœ¬æ¡†å†…æç¤º ui-&gt;accountComboBox-&gt;setEditable(true); QLineEdit* lineEdit = ui-&gt;accountComboBox-&gt;lineEdit(); lineEdit-&gt;setPlaceholderText(QStringLiteral(&quot;QQ å·ç /æ‰‹æœº/é‚®ç®±&quot;)); QRegExp regExp(&quot;[A-Za-z0-9_]&#123;6,30&#125;&quot;); //æ­£åˆ™è¡¨è¾¾å¼é™åˆ¶ç”¨æˆ·åè¾“å…¥ä¸èƒ½è¾“å…¥æ±‰å­— lineEdit-&gt;setValidator(new QRegExpValidator(regExp,this)); ui-&gt;passwordEdit-&gt;setPlaceholderText(QStringLiteral(&quot;å¯†ç &quot;)); //å¯†ç æ¡†ä¸­çš„å°é”®ç›˜æŒ‰é’®; m_keyboardButton = new QPushButton(); m_keyboardButton-&gt;setObjectName(&quot;pButtonKeyboard&quot;); m_keyboardButton-&gt;setFixedSize(QSize(16, 16)); m_keyboardButton-&gt;setCursor(QCursor(Qt::PointingHandCursor));//é¼ æ ‡æ”¾ä¸Šå»å˜æˆæ‰‹å½¢ QHBoxLayout* passwordEditLayout = new QHBoxLayout(); passwordEditLayout-&gt;addStretch(); passwordEditLayout-&gt;addWidget(m_keyboardButton); passwordEditLayout-&gt;setSpacing(0); passwordEditLayout-&gt;setContentsMargins(0, 0, 8, 0); ui-&gt;passwordEdit-&gt;setLayout(passwordEditLayout); //è®¾ç½®å¯†ç è¾¾åˆ°æœ€é•¿æ—¶æœ€åä¸€ä¸ªå­—ç¬¦ç¦»å°é”®ç›˜å›¾æ ‡çš„è·ç¦»ï¼ˆ12ï¼‰ ui-&gt;passwordEdit-&gt;setTextMargins(0, 0, m_keyboardButton-&gt;width() + 12, 0); //è®¾ç½®å¤´åƒä»¥åŠçŠ¶æ€å›¾æ ‡ ui-&gt;userHead-&gt;setPixmap(QPixmap(&quot;:/Resources/LoginWindow/HeadImage.png&quot;)); ui-&gt;loginState-&gt;setIcon(QIcon(&quot;:/Resources/LoginWindow/LoginState/state_online.png&quot;)); ui-&gt;loginState-&gt;setIconSize(QSize(13, 13));&#125; lineEdit-&gt;setPlaceholderTextQStringLiteral:å¦‚æœè¯¥ QString ä¸ä¼šä¿®æ”¹çš„è¯ï¼Œé‚£ä½¿ç”¨ QStringLiteral setPlaceholderText()è®¾ç½®æ–‡æœ¬æç¤ºè¯¥æ–¹æ³•å¯ä»¥è®¾ç½®æ–‡æœ¬æ¡†ä¸­çš„é»˜è®¤æ–‡å­—æç¤ºï¼Œå¦‚å›¾ç‰‡ä¸­çš„ QQ å·ç /æ‰‹æœº/é‚®ç®±ã€‚ setCursor()è®¾ç½®é¼ æ ‡å½¢æ€å…±æœ‰ä»¥ä¸‹ 19 ç§é¼ æ ‡å½¢æ€ï¼š å›¾ç‰‡æ¥è‡ªè¿™é‡Œ addStretch()å¸ƒå±€åŠ å…¥å¼¹ç°§123QHBoxLayout* passwordEditLayout = new QHBoxLayout();passwordEditLayout-&gt;addStretch();passwordEditLayout-&gt;addWidget(m_keyboardButton); addStretch()ç”¨æ¥åœ¨å¸ƒå±€ä¸­å¹³åˆ†å¸ƒå±€ï¼Œä»–å°±æ˜¯ä¸ªå¼¹ç°§çš„ä½œç”¨ã€‚å¦‚æœä¸åŠ å‚æ•°ï¼Œå°±æ˜¯ç­‰äºåŠ ä¸ªå¼¹ç°§ï¼Œä¼šæŠŠå°é”®ç›˜å›¾æ ‡æŒ¤åˆ°è¾¹ä¸Šã€‚å¦‚å›¾ï¼š å¦‚æœå°†ä»£ç æ”¹ä¸€ä¸‹ï¼š 1234QHBoxLayout* passwordEditLayout = new QHBoxLayout();passwordEditLayout-&gt;addStretch(1);passwordEditLayout-&gt;addWidget(m_keyboardButton);passwordEditLayout-&gt;addStretch(1); æ„æ€å°±æ˜¯å°†é™¤äº†å°é”®ç›˜å›¾æ ‡ä»¥å¤–çš„ç©ºé—´åˆ†æˆä¸¤ä»½ï¼Œé‚£ä¹ˆåˆšå¥½å°é”®ç›˜å›¾æ ‡å°±æ˜¯åœ¨ä¸­é—´ä½ç½®ï¼Œå°±åƒä¸¤éå„é˜²æ­¢äº†ä¸€ä¸ªå¼¹ç°§ã€‚æ•ˆæœå¦‚ä¸‹ï¼š setSpacing()è®¾ç½®ç©ºé—´ä¹‹é—´ä¸Šä¸‹è·ç¦»ï¼Œè¿˜æœ‰ä¸€ä¸ªå®¹æ˜“æ··æ·†çš„è®¾ç½®setMargin()è¡¨ç¤ºè®¾ç½®ç©ºé—´ä¸çª—å£è¾¹ç¼˜çš„å·¦å³è·ç¦»ã€‚ setContentsMarginsè®¾ç½®å·¦ä¾§ã€é¡¶éƒ¨ã€å³ä¾§å’Œåº•éƒ¨è¾¹è·ï¼Œä»¥ä¾¿åœ¨å¸ƒå±€å‘¨å›´ä½¿ç”¨ã€‚ ç°åœ¨æˆ‘ä»¬è®¾ç½®çš„æ˜¯setContentsMargins(0, 0, 8, 0)ï¼Œç°åœ¨æˆ‘ä»¬è®¾ç½®å¤§ä¸€ç‚¹çœ‹çœ‹æ•ˆæœã€‚ QLineEdit.setTextMargins(left=,top=,right=,bottom=)è®¾ç½®æ–‡æœ¬è¾¹è·ï¼Œè¿™é‡Œä¸»è¦ä¸ºäº†è®¾ç½®å¯†ç è¾“å…¥è¿‡é•¿æ—¶ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦è·ç¦»å°é”®ç›˜å›¾æ ‡æœ‰ä¸€å®šé—´éš™ã€‚ åˆå§‹åŒ–ç”¨æˆ·ç™»å½•ä¿¡æ¯1234567891011//accountitem.cppvoid LoginWindow::initAccountList()&#123; for (int i = 0; i &lt; 3; i++) &#123; AccountItem *account_item = new AccountItem(); account_item-&gt;setAccountInfo(i, QStringLiteral(&quot;Dominic_%1å·&quot;).arg(i), QString(&quot;:/Resources/LoginWindow/headImage/head_%1.png&quot;).arg(i)); QListWidgetItem *list_item = new QListWidgetItem(m_Accountlist); m_Accountlist-&gt;setItemWidget(list_item, account_item); &#125;&#125;","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"Linux æ“ä½œç³»ç»Ÿ-è¿›ç¨‹é—´é€šä¿¡","slug":"Linuxæ“ä½œç³»ç»Ÿ-è¿›ç¨‹é—´é€šä¿¡","date":"2021-08-14T01:46:39.000Z","updated":"2022-10-15T03:14:29.324Z","comments":true,"path":"2021/08/14/Linuxæ“ä½œç³»ç»Ÿ-è¿›ç¨‹é—´é€šä¿¡/","link":"","permalink":"http://example.com/2021/08/14/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/","excerpt":"","text":"Linux ç¯å¢ƒä¸‹ï¼Œè¿›ç¨‹åœ°å€ç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼Œæ¯ä¸ªè¿›ç¨‹å„è‡ªæœ‰ä¸åŒçš„ç”¨æˆ·åœ°å€ç©ºé—´ã€‚ä»»ä½•ä¸€ä¸ªè¿›ç¨‹çš„å…¨å±€å˜é‡åœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­éƒ½çœ‹ä¸åˆ°ï¼Œæ‰€ä»¥è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´ä¸èƒ½ç›¸äº’è®¿é—®ï¼Œè¦äº¤æ¢æ•°æ®å¿…é¡»é€šè¿‡å†…æ ¸ï¼Œåœ¨å†…æ ¸ä¸­å¼€è¾Ÿä¸€å—ç¼“å†²åŒºï¼Œè¿›ç¨‹ 1 æŠŠæ•°æ®ä»ç”¨æˆ·ç©ºé—´æ‹·åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œè¿›ç¨‹ 2 å†ä»å†…æ ¸ç¼“å†²åŒºæŠŠæ•°æ®è¯»èµ°ï¼Œå†…æ ¸æä¾›çš„è¿™ç§æœºåˆ¶ç§°ä¸ºè¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼ŒInterProcess Communicationï¼‰ã€‚ è¿›ç¨‹é—´é€šä¿¡æ¦‚è¿°ç®¡é“åœ¨å­¦ Linux å‘½ä»¤æ—¶å°±æœ‰ç®¡é“åœ¨è¿™ä¸ªæ¦‚å¿µï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªå‘½ä»¤ 1ps -ef | -grep root | xargs kill -9 å°†ä¸Šä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ï¼Œæ•°æ®åªèƒ½å‘ä¸€ä¸ªæ–¹å‘æµåŠ¨ï¼›åŒæ–¹éœ€è¦äº’ç›¸é€šä¿¡æ—¶ï¼Œéœ€è¦å»ºç«‹èµ·ä¸¤ä¸ªç®¡é“ã€‚ ç®¡é“æœ‰ä¸¤ç§ç±»å‹ï¼šåŒ¿åç®¡é“å’Œå‘½åç®¡é“ã€‚ä¸Šé¢æåˆ°çš„å‘½ä»¤ä¸­|è¡¨ç¤ºçš„ç®¡é“å³åŒ¿åç®¡é“ pipeã€‚ç”¨å®Œå³é”€æ¯ï¼Œè‡ªåŠ¨åˆ›å»ºï¼Œè‡ªåŠ¨é”€æ¯ã€‚ ä½¿ç”¨mkfifoæ˜¾ç¤ºåˆ›å»ºçš„æ˜¯å‘½åç®¡é“ fifoï¼Œ 1mkfifo hello helloå³æ˜¯ç®¡é“åç§°ï¼Œç±»å‹ä¸ºpï¼Œå°±æ˜¯pipeï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ç®¡é“é‡Œå†™å…¥ä¸œè¥¿ï¼Œ 1# echo &quot;hello world&quot; &gt; hello å…‰å†™å…¥è¿˜ä¸è¡Œï¼Œåªæœ‰æœ‰å¦ä¸€ä¸ªè¿›ç¨‹è¯»å–äº†å†…å®¹æ‰å®Œæˆä¸€æ¬¡ä¿¡æ¯äº¤æ¢ï¼Œæ‰å®Œæˆä¸€æ¬¡é€šä¿¡ï¼Œ 12# cat &lt; hello hello world è¿™ç§æ–¹å¼é€šä¿¡æ•ˆç‡ä½ï¼Œæ— æ³•é¢‘ç¹é€šä¿¡ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ç±»ä¼¼äºæ—¥å¸¸æ²Ÿé€šä½¿ç”¨çš„é‚®ä»¶ï¼Œæœ‰ä¸€å®šæ ¼å¼ï¼Œæœ‰ä¸ªæ”¶ä»¶åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸Šçš„ç”¨æˆ·éƒ½å¯ä»¥åå¤åœ¨åŸé‚®ä»¶åŸºç¡€ä¸Šå›å¤ï¼Œè¾¾åˆ°é¢‘ç¹äº¤æµçš„ç›®çš„ã€‚è¿™ç§æ¨¡å‹å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹ã€‚ å…±äº«å†…å­˜å…±äº«å†…å­˜å…è®¸ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒºï¼Œè¿™ä¸€æ®µå­˜å‚¨åŒºå¯ä»¥è¢«ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æ˜ å°„è‡³è‡ªèº«çš„åœ°å€ç©ºé—´ä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å†™å…¥å…±äº«å†…å­˜çš„ä¿¡æ¯ï¼Œå¯ä»¥è¢«å…¶ä»–ä½¿ç”¨è¿™ä¸ªå…±äº«å†…å­˜çš„è¿›ç¨‹ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„å†…å­˜è¯»å–é”™åšè¯»å‡ºï¼Œä»è€Œå®ç°äº†è¿›ç¨‹é—´çš„é€šä¿¡ã€‚ æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´æ˜ å°„åˆ°ä¸åŒçš„ç‰©ç†å†…å­˜ä¸­å»ã€‚è¿™ä¸ªè¿›ç¨‹è®¿é—® A åœ°å€å’Œå¦ä¸€ä¸ªè¿›ç¨‹è®¿é—® A åœ°å€ï¼Œå…¶å®è®¿é—®çš„æ˜¯ä¸åŒçš„ç‰©ç†å†…å­˜åœ°å€ï¼Œå¯¹äºæ•°æ®çš„å¢åˆ æŸ¥æ”¹äº’ä¸å½±å“ã€‚ ä½†æ˜¯ï¼Œå’±ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å˜é€šä¸€ä¸‹ï¼Œæ‹¿å‡ºä¸€å—è™šæ‹Ÿåœ°å€ç©ºé—´æ¥ï¼Œæ˜ å°„åˆ°ç›¸åŒçš„ç‰©ç†å†…å­˜ä¸­ã€‚è¿™æ ·è¿™ä¸ªè¿›ç¨‹å†™å…¥çš„ä¸œè¥¿ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹é©¬ä¸Šå°±èƒ½çœ‹åˆ°äº†ï¼Œéƒ½ä¸éœ€è¦æ‹·è´æ¥æ‹·è´å»ï¼Œä¼ æ¥ä¼ å»ã€‚ ä½¿ç”¨shmgetå‡½æ•°åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜ï¼Œ 1234//key_t key: å”¯ä¸€å®šä½ä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡//size_t size: å…±äº«å†…å­˜å¤§å°//int flag: å¦‚æœæ˜¯ IPC_CREAT è¡¨ç¤ºåˆ›å»ºæ–°çš„å…±äº«å†…å­˜ç©ºé—´int shmget(key_t key, size_t size, int flag); åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ipcs å‘½ä»¤æŸ¥çœ‹è¿™ä¸ªå…±äº«å†…å­˜ã€‚ 12345#ipcs Â­Â­--shmems ------ Shared Memory Segments ------ Â­Â­Â­Â­Â­Â­Â­Â­key shmid owner perms bytes nattch status0x00000000 19398656 marc 600 1048576 2 dest è¿›ç¨‹é€šè¿‡shmatï¼Œå°±æ˜¯attachçš„æ„æ€ï¼Œå°†å†…å­˜åŠ è½½åˆ°è‡ªå·±è™šæ‹Ÿåœ°å€ç©ºé—´æŸä¸ªä½ç½®ã€‚ 1234//int shm_id://const void *addr: åŠ è½½çš„åœ°å€ï¼Œé€šå¸¸è®¾ä¸º NULLï¼Œè®©å†…æ ¸é€‰ä¸€ä¸ªåˆé€‚åœ°å€//int flag:void *shmat(int shm_id, const void *addr, int flag); å¦‚æœå…±äº«å†…å­˜ä½¿ç”¨å®Œæ¯•ï¼Œå¯ä»¥é€šè¿‡ shmdt è§£é™¤ç»‘å®šï¼Œç„¶åé€šè¿‡ shmctlï¼Œå°† cmd è®¾ç½®ä¸º IPC_RMIDï¼Œä»è€Œåˆ é™¤è¿™ä¸ªå…±äº«å†…å­˜å¯¹è±¡ã€‚ 12int shmdt(void *addr); int shmctl(int shm_id, int cmd, struct shmid_ds *buf); å…±äº«å†…å­˜çš„æœ€å¤§ä¸è¶³ä¹‹å¤„åœ¨äºï¼Œç”±äºå¤šä¸ªè¿›ç¨‹å¯¹åŒä¸€å—å†…å­˜åŒºå…·æœ‰è®¿é—®çš„æƒé™ï¼Œå„ä¸ªè¿›ç¨‹ä¹‹é—´çš„åŒæ­¥é—®é¢˜æ˜¾å¾—å°¤ä¸ºçªå‡ºã€‚å¿…é¡»æ§åˆ¶åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯¹å…±äº«å†…å­˜åŒºåŸŸå†™å…¥æ•°æ®ï¼Œå¦åˆ™å°†é€ æˆæ•°æ®çš„æ··ä¹±ã€‚ ä¿¡å·é‡å¦‚æœä¸¤ä¸ªè¿›ç¨‹åŒæ—¶å‘ä¸€ä¸ªå…±äº«å†…å­˜è¯»å†™æ•°æ®ï¼Œå¾ˆå¯èƒ½å°±ä¼šå¯¼è‡´å†²çªã€‚æ‰€ä»¥éœ€è¦æœ‰ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œä½¿å¾—åŒä¸€ä¸ªå…±äº«èµ„æºåŒæ—¶åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹è®¿é—®ã€‚åœ¨è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ä¸­ï¼Œä¿¡å·é‡ï¼ˆSemaphoreï¼‰å°±æ˜¯ç”¨æ¥å®ç°è¿›ç¨‹é—´äº’æ–¥ä¸åŒæ­¥çš„ã€‚å®ƒå…¶å®æ˜¯ä¸ªè®¡æ•°å™¨ï¼Œåªä¸è¿‡ä¸æ˜¯ç”¨æ¥è®°å½•è¿›ç¨‹é—´é€šä¿¡æ•°æ®çš„ã€‚ æˆ‘ä»¬å¯ä»¥å°†ä¿¡å·é‡åˆå§‹åŒ–ä¸ºä¸€ä¸ªæ•°å€¼ï¼Œæ¥ä»£è¡¨æŸç§èµ„æºçš„æ€»ä½“æ•°é‡ã€‚å¯¹äºä¿¡å·é‡æ¥è®²ï¼Œä¼šå®šä¹‰ä¸¤ç§åŸå­æ“ä½œï¼Œä¸€ä¸ªæ˜¯P æ“ä½œï¼Œæˆ‘ä»¬ç§°ä¸ºç”³è¯·èµ„æºæ“ä½œã€‚è¿™ä¸ªæ“ä½œä¼šç”³è¯·å°†ä¿¡å·é‡çš„æ•°å€¼å‡å» Nï¼Œè¡¨ç¤ºè¿™äº›æ•°é‡è¢«ä»–ç”³è¯·ä½¿ç”¨äº†ï¼Œå…¶ä»–äººä¸èƒ½ç”¨äº†ã€‚å¦ä¸€ä¸ªæ˜¯Væ“ä½œï¼Œæˆ‘ä»¬ç§°ä¸ºå½’è¿˜èµ„æºæ“ä½œï¼Œè¿™ä¸ªæ“ä½œä¼šç”³è¯·å°†ä¿¡å·é‡åŠ ä¸Š Mï¼Œè¡¨ç¤ºè¿™äº›æ•°é‡å·²ç»è¿˜ç»™ä¿¡å·é‡äº†ï¼Œå…¶ä»–äººå¯ä»¥ä½¿ç”¨äº†ã€‚ æ‰€è°“åŸå­æ“ä½œï¼ˆAtom Operationï¼‰å°±æ˜¯ä¸å¯è¢«ä¸­æ–­çš„ä¸€ä¸ªæˆ–ä¸€ç³»åˆ—æ“ä½œã€‚ ä½¿ç”¨semgetåˆ›å»ºä¿¡å·é‡ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå”¯ä¸€æ ‡è¯†ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªä¿¡å·é‡ã€‚ 1int semget(key_t key, int num_sems, int sem_flags); æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¿¡å·é‡çš„æ€»çš„èµ„æºæ•°é‡ã€‚é€šè¿‡semctl å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•° semidæ˜¯è¿™ä¸ªä¿¡å·é‡ç»„çš„idï¼Œç¬¬äºŒä¸ªå‚æ•° semnum æ‰æ˜¯åœ¨è¿™ä¸ªä¿¡å·é‡ç»„ä¸­æŸä¸ªä¿¡å·é‡çš„idï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å‘½ä»¤ï¼Œå¦‚æœæ˜¯åˆå§‹åŒ–ï¼Œåˆ™ç”¨ SETVALï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª unionã€‚å¦‚æœåˆå§‹åŒ–ï¼Œåº”è¯¥ç”¨é‡Œé¢çš„valè®¾ç½®èµ„æºæ€»é‡ã€‚ 12345678910int semctl(int semid, int semnum, int cmd, union semun args); union semun&#123; int val; struct semid_ds *buf; unsigned short int *array; struct seminfo *__buf;&#125;; æ— è®ºæ˜¯ P æ“ä½œè¿˜æ˜¯ V æ“ä½œï¼Œæˆ‘ä»¬ç»Ÿä¸€ç”¨ semop å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°è¿˜æ˜¯ä¿¡å·é‡ç»„çš„ idï¼Œä¸€æ¬¡å¯ä»¥æ“ä½œå¤šä¸ªä¿¡å·é‡ã€‚ç¬¬ä¸‰ä¸ªå‚æ•° numops å°±æ˜¯æœ‰å¤šå°‘ä¸ªæ“ä½œï¼Œç¬¬äºŒä¸ªå‚æ•°å°†è¿™äº›æ“ä½œæ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ã€‚ æ•°ç»„çš„æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª struct sembufï¼Œé‡Œé¢çš„ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯è¿™ä¸ªæ“ä½œçš„å¯¹è±¡æ˜¯å“ªä¸ªä¿¡å·é‡ã€‚ç¬¬äºŒä¸ªæˆå‘˜å°±æ˜¯è¦å¯¹è¿™ä¸ªä¿¡å·é‡åšå¤šå°‘æ”¹å˜ã€‚å¦‚æœ sem_op &lt; 0ï¼Œå°±è¯·æ±‚ sem_op çš„ç»å¯¹å€¼çš„èµ„æºã€‚å¦‚æœç›¸åº”çš„èµ„æºæ•°å¯ä»¥æ»¡è¶³è¯·æ±‚ï¼Œåˆ™å°†è¯¥ä¿¡å·é‡çš„å€¼å‡å» sem_op çš„ç»å¯¹å€¼ï¼Œå‡½æ•°æˆåŠŸè¿”å›ã€‚ å½“ç›¸åº”çš„èµ„æºæ•°ä¸èƒ½æ»¡è¶³è¯·æ±‚æ—¶ï¼Œå°±è¦çœ‹sem_flg äº†ã€‚å¦‚æœæŠŠ sem_flg è®¾ç½®ä¸ºIPC_NOWAITï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰èµ„æºä¹Ÿä¸ç­‰å¾…ï¼Œåˆ™ semop å‡½æ•°å‡ºé”™è¿”å› EAGAINã€‚å¦‚æœ sem_flg æ²¡æœ‰æŒ‡å®šIPC_NOWAITï¼Œåˆ™è¿›ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°å½“ç›¸åº”çš„èµ„æºæ•°å¯ä»¥æ»¡è¶³è¯·æ±‚ã€‚è‹¥ sem_op &gt; 0ï¼Œè¡¨ç¤ºè¿›ç¨‹å½’è¿˜ç›¸åº”çš„èµ„æºæ•°ï¼Œå°† sem_op çš„å€¼åŠ åˆ°ä¿¡å·é‡çš„å€¼ä¸Šã€‚å¦‚æœæœ‰è¿›ç¨‹æ­£åœ¨ä¼‘çœ ç­‰å¾…æ­¤ä¿¡å·é‡ï¼Œåˆ™å”¤é†’å®ƒä»¬ã€‚ 1234567int semop(int semid, struct sembuf semoparray[], size_t numops);struct sembuf &#123; short sem_num; // ä¿¡å·é‡ç»„ä¸­å¯¹åº”çš„åºå·ï¼Œ0ï½sem_nums-1 short sem_op; // ä¿¡å·é‡å€¼åœ¨ä¸€æ¬¡æ“ä½œä¸­çš„æ”¹å˜é‡ short sem_flg; // IPC_NOWAIT, SEM_UNDO&#125; ä¿¡å·ä»¥ä¸Šæåˆ°çš„é€šä¿¡æ–¹å¼ï¼Œéƒ½æ˜¯å¸¸è§„çŠ¶æ€ä¸‹çš„å·¥ä½œæ¨¡å¼ï¼Œè€Œä¿¡å·ä¸€èˆ¬æ˜¯ç”±é”™è¯¯äº§ç”Ÿçš„ã€‚ ä¿¡å·æ²¡æœ‰ç‰¹åˆ«å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªä»£å·ä¸€æ ·çš„æ•°å­—ã€‚Linux æä¾›äº†å‡ åç§ä¿¡å·ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçš„æ„ä¹‰ã€‚ä¿¡å·ä¹‹é—´ä¾é å®ƒä»¬çš„å€¼æ¥åŒºåˆ†ã€‚","categories":[{"name":"Linux æ“ä½œç³»ç»Ÿ","slug":"Linux-æ“ä½œç³»ç»Ÿ","permalink":"http://example.com/categories/Linux-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-rename æ‰¹é‡é‡å‘½å","slug":"æ¯å¤©å­¦å‘½ä»¤-renameæ‰¹é‡é‡å‘½å","date":"2021-08-13T10:40:16.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2021/08/13/æ¯å¤©å­¦å‘½ä»¤-renameæ‰¹é‡é‡å‘½å/","link":"","permalink":"http://example.com/2021/08/13/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-rename%E6%89%B9%E9%87%8F%E9%87%8D%E5%91%BD%E5%90%8D/","excerpt":"","text":"Commands1rename [options] &quot;s/oldname/newname/&quot; file æ ¼å¼å°±å¾ˆå®¹æ˜“çœ‹å‡ºæ¥æ€ä¹ˆç”¨çš„ï¼Œå°±æ˜¯/ä¸èƒ½ä¸¢ã€‚ 12345-v å°†é‡å‘½åçš„å†…å®¹éƒ½æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼Œv å¯ä»¥çœ‹æˆ verbose-n æµ‹è¯•ä¼šé‡å‘½åçš„å†…å®¹ï¼Œå°†ç»“æœéƒ½æ‰“å°ï¼Œä½†æ˜¯å¹¶ä¸çœŸæ­£æ‰§è¡Œé‡å‘½åçš„è¿‡ç¨‹-f force ä¼šè¦†ç›–æœ¬åœ°å·²ç»å­˜åœ¨çš„æ–‡ä»¶-h -m -V åˆ†åˆ«ä¸ºå¸®åŠ©ï¼Œå¸®åŠ©ï¼Œç‰ˆæœ¬-e æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥é€šè¿‡è¯¥é€‰é¡¹ï¼Œå†™ä¸€äº›è„šæœ¬æ¥åšä¸€äº›å¤æ‚çš„äº‹æƒ… Examplesæ›¿æ¢æ–‡ä»¶åä¸­çš„ç‰¹å®šå­—æ®µ1rename &quot;s/AA/aa/&quot; * # æŠŠæ–‡ä»¶åä¸­çš„AAæ›¿æ¢æˆaa ä¿®æ”¹æ–‡ä»¶åç¼€12rename &quot;s/.html/.php/&quot; * # æŠŠ.html åç¼€çš„æ”¹æˆ .phpåç¼€rename &quot;s/.png/.jpg/&quot; * # å°† png æ”¹ä¸º jpg æ·»åŠ åç¼€1rename &quot;s/$/.txt/&quot; * # æŠŠæ‰€æœ‰çš„æ–‡ä»¶åéƒ½ä»¥txtç»“å°¾ $æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºç»“å°¾ã€‚ ä¿ç•™éƒ¨åˆ†æ–‡ä»¶åå‡å¦‚éœ€è¦åœ¨æ‰¹é‡ä¿®æ”¹çš„æ—¶å€™ä¿ç•™éƒ¨åˆ†æ–‡ä»¶åï¼Œå¯ä»¥ä½¿ç”¨å¼•ç”¨\\1 ï¼Œæ¯”å¦‚æœ‰ä¸‹é¢æ ¼å¼çš„æ–‡ä»¶ï¼Œåªæƒ³ä¿ç•™æ—¥æœŸéƒ¨åˆ†ã€‚ 12Screenshot from 2019-01-02 15-56-49.jpgrename -n &quot;s/Screenshot from ([0-9\\\\- ]+).jpg/\\1.jpg/&quot; * å°†() åŒ¹é…çš„å†…å®¹å–å‡ºæ¥æ”¾åˆ°æ›¿æ¢éƒ¨åˆ†ã€‚","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-apt å®‰è£…å¸è½½è½¯ä»¶","slug":"æ¯å¤©å­¦å‘½ä»¤-aptå®‰è£…å¸è½½è½¯ä»¶","date":"2021-08-12T10:42:39.000Z","updated":"2022-10-15T03:14:29.710Z","comments":true,"path":"2021/08/12/æ¯å¤©å­¦å‘½ä»¤-aptå®‰è£…å¸è½½è½¯ä»¶/","link":"","permalink":"http://example.com/2021/08/12/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-apt%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6/","excerpt":"","text":"è¿™ä¸ªå‘½ä»¤åº”è¯¥æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€å¤šçš„å‘½ä»¤ä¹‹ä¸€äº†ï¼Œåº”è¯¥æ—©å°±æ‹¿å‡ºæ¥è®²ä¸€ä¸‹çš„ã€‚ä½†æ˜¯å¹³æ—¶ç”¨çš„å¤ªå¤šï¼Œæ€»æ„Ÿè§‰è‡ªå·±éƒ½ä¼šç”¨äº†ï¼Œä½†æ˜¯ä»”ç»†çœ‹äº†æ‰€æœ‰å‘½ä»¤ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æ¯”è¾ƒå®ç”¨ä½†æ˜¯æ²¡è®°ä½çš„å‘½ä»¤ã€‚ aptçš„å…¨ç§°æ˜¯Advanced Packaging Toolæ˜¯ Linux ç³»ç»Ÿä¸‹çš„ä¸€æ¬¾å®‰è£…åŒ…ç®¡ç†å·¥å…·ã€‚APT å¯ä»¥è‡ªåŠ¨ä¸‹è½½ã€é…ç½®å’Œå®‰è£…äºŒè¿›åˆ¶æˆ–æºä»£ç æ ¼å¼è½¯ä»¶åŒ…ï¼Œç®€åŒ–äº† Unix ç³»ç»Ÿä¸Šç®¡ç†è½¯ä»¶çš„è¿‡ç¨‹ã€‚ APT ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªå‘½ä»¤ç»„æˆï¼š 123apt-getapt-cacheapt-file Commandsæœç´¢è½¯ä»¶åŒ…1apt search python3 å®‰è£…è½¯ä»¶åŒ…1apt install python3 æ›´æ–°æº1sudo apt install update æ›´æ–°è½¯ä»¶æ‰§è¡Œå®Œ update å‘½ä»¤åï¼Œå°±å¯ä»¥ä½¿ç”¨ apt upgrade æ¥å‡çº§è½¯ä»¶åŒ…äº†ã€‚æ‰§è¡Œå‘½ä»¤åç³»ç»Ÿä¼šæç¤ºæœ‰å‡ ä¸ªè½¯ä»¶éœ€è¦å‡çº§ã€‚åœ¨å¾—åˆ°ä½ çš„åŒæ„åï¼Œç³»ç»Ÿå³å¼€å§‹è‡ªåŠ¨ä¸‹è½½å®‰è£…è½¯ä»¶åŒ…ã€‚ 1sudo apt install upgrade å¸è½½è½¯ä»¶123apt remove python3 # ç§»é™¤è½¯ä»¶åŒ…ï¼Œä½†æ˜¯ä¿ç•™é…ç½®æ–‡ä»¶apt purge python3 #ç§»é™¤è½¯ä»¶åŒ…å¹¶ç§»é™¤é…ç½®apt autoremove # ç§»é™¤å­¤ç«‹çš„å¹¶ä¸è¢«ä¾èµ–çš„è½¯ä»¶åŒ… åˆ—å‡ºè½¯ä»¶æ¸…å•1apt list","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"Qt æ·»åŠ èµ„æºæ–‡ä»¶ï¼ˆQtCreatorï¼‰","slug":"Qtæ·»åŠ èµ„æºæ–‡ä»¶ï¼ˆQtCreatorï¼‰","date":"2021-08-12T02:23:58.000Z","updated":"2022-10-15T03:14:29.496Z","comments":true,"path":"2021/08/12/Qtæ·»åŠ èµ„æºæ–‡ä»¶ï¼ˆQtCreatorï¼‰/","link":"","permalink":"http://example.com/2021/08/12/Qt%E6%B7%BB%E5%8A%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%EF%BC%88QtCreator%EF%BC%89/","excerpt":"","text":"QtCreatorâœæ–°å»ºæ–‡ä»¶æˆ–é¡¹ç›®âœQtâœQt Resource File ç‚¹å‡»Chooseï¼Œè®¾ç½®èµ„æºæ–‡ä»¶åå’Œè·¯å¾„ã€‚èµ„æºæ–‡ä»¶æ˜¯ä¸€ç³»åˆ—æ–‡ä»¶çš„é›†åˆï¼Œæ¯”å¦‚æˆ‘è¦å»ºç«‹ä¸€ä¸ªå›¾ç‰‡çš„èµ„æºæ–‡ä»¶ï¼Œæˆ‘å¯ä»¥è®¾ç½®imgä¸ºèµ„æºæ–‡ä»¶åï¼Œå°†æ¥æ‰€æœ‰å›¾ç‰‡ç±»èµ„æºï¼Œéƒ½æ”¾åˆ°è¿™ä¸ªèµ„æºæ–‡ä»¶é‡Œï¼ŒåŠ å…¥è¿˜æœ‰éŸ³é¢‘ç±»çš„æ–‡ä»¶ï¼Œæˆ‘å¯ä»¥æ–°å»ºä¸€ä¸ªaudioçš„èµ„æºæ–‡ä»¶ï¼Œä»¥åæ‰€æœ‰éŸ³é¢‘ç±»çš„æ–‡ä»¶éƒ½æ”¾åˆ°è¿™ä¸ªèµ„æºæ–‡ä»¶ä¸‹ã€‚ è€Œä¸æ˜¯æˆ‘æƒ³è¦æ·»åŠ çš„æ–‡ä»¶åã€‚ å³ä¾§ç¼–è¾‘å™¨ä¸‹æ–¹æœ‰ä¸ªAdd Prefix(æ·»åŠ å‰ç¼€)ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ·»åŠ æ–‡ä»¶å‰ç¼€ï¼Œå‰ç¼€å°±æ˜¯å­˜æ”¾æ–‡ä»¶çš„æ–‡ä»¶å¤¹åï¼Œç„¶åæ·»åŠ éœ€è¦çš„æ–‡ä»¶ã€‚æ·»åŠ å®Œä»¥åçœ‹æ•ˆæœå°±çŸ¥é“å•¥æ„æ€äº†ã€‚ è¿™ä¹ˆåšå¸¦æ¥çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœä»¥åæˆ‘ä»¬è¦æ›´æ”¹æ–‡ä»¶åï¼Œæ¯”å¦‚å°† xbl.png æ”¹æˆ xiabanle.pngï¼Œé‚£ä¹ˆï¼Œæ‰€æœ‰ä½¿ç”¨äº†è¿™ä¸ªåå­—çš„è·¯å¾„éƒ½éœ€è¦ä¿®æ”¹ã€‚æ‰€ä»¥ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯ï¼Œæˆ‘ä»¬ç»™è¿™ä¸ªæ–‡ä»¶å»ä¸€ä¸ªâ€œåˆ«åâ€ï¼Œä»¥åå°±ä»¥è¿™ä¸ªåˆ«åæ¥å¼•ç”¨è¿™ä¸ªæ–‡ä»¶ã€‚å…·ä½“åšæ³•æ˜¯ï¼Œé€‰ä¸­è¿™ä¸ªæ–‡ä»¶ï¼Œæ·»åŠ åˆ«åä¿¡æ¯ï¼š è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨:/images/avatarç”¨åˆ°è¿™ä¸ªèµ„æºï¼Œæ— éœ€å…³å¿ƒå›¾ç‰‡çš„çœŸå®æ–‡ä»¶åã€‚","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-kill è¿™ä¸ªè¿›ç¨‹","slug":"æ¯å¤©å­¦å‘½ä»¤-killè¿™ä¸ªè¿›ç¨‹","date":"2021-08-11T07:22:40.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2021/08/11/æ¯å¤©å­¦å‘½ä»¤-killè¿™ä¸ªè¿›ç¨‹/","link":"","permalink":"http://example.com/2021/08/11/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-kill%E8%BF%99%E4%B8%AA%E8%BF%9B%E7%A8%8B/","excerpt":"","text":"å¯¹äºåœ¨å‰å°è¿è¡Œçš„ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Ctrl+Cæ¥ç»ˆæ­¢è¿è¡Œï¼Œä½†æ˜¯åœ¨åå°çš„ç¨‹åºå°±å¿…é¡»ç”¨killå‘½ä»¤æ¥ç»ˆæ­¢äº†ã€‚ Command12345-l ä¿¡å·ï¼Œè‹¥æœä¸åŠ ä¿¡å·çš„ç¼–å·å‚æ•°ï¼Œåˆ™ä½¿ç”¨â€œ-lâ€å‚æ•°ä¼šåˆ—å‡ºå…¨éƒ¨çš„ä¿¡å·åç§°-a å½“å¤„ç†å½“å‰è¿›ç¨‹æ—¶ï¼Œä¸é™åˆ¶å‘½ä»¤åå’Œè¿›ç¨‹å·çš„å¯¹åº”å…³ç³»-p æŒ‡å®š kill å‘½ä»¤åªæ‰“å°ç›¸å…³è¿›ç¨‹çš„è¿›ç¨‹å·ï¼Œè€Œä¸å‘é€ä»»ä½•ä¿¡å·-s æŒ‡å®šå‘é€ä¿¡å·-u æŒ‡å®šç”¨æˆ· ExamplesæŸ¥çœ‹æ‰€æœ‰ä¿¡å·1234âœ kill -lHUP INT QUIT ILL TRAP ABRT BUS FPE KILL USR1 SEGV USR2 PIPE ALRM TERM STKFLT CHLD CONT STOP TSTP TTIN TTOU URG XCPU XFSZ VTALRM PROF WINCH POLL PWR SYS å¸¸ç”¨ä¿¡å· 1234567HUP 1 ç»ˆç«¯æ–­çº¿INT 2 ä¸­æ–­ï¼ˆåŒ Ctrl + Cï¼‰QUIT 3 é€€å‡ºï¼ˆåŒ Ctrl + \\ï¼‰TERM 15 ç»ˆæ­¢KILL 9 å¼ºåˆ¶ç»ˆæ­¢CONT 18 ç»§ç»­ï¼ˆä¸ STOP ç›¸åï¼Œ fg/bg å‘½ä»¤ï¼‰STOP 19 æš‚åœï¼ˆåŒ Ctrl + Zï¼‰ ç”¨ ps æŸ¥æ‰¾è¿›ç¨‹ï¼Œç„¶åç”¨ kill æ€æ‰12ps -ef | grep &#x27;program&#x27;kill PID æ— æ¡ä»¶å½»åº•æ€æ­»è¿›ç¨‹1kill â€“9 PID æ€æ­»æŒ‡å®šç”¨æˆ·æ‰€æœ‰è¿›ç¨‹12kill -9 $(ps -ef | grep username)kill -u username","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹ä¿¡å·ï¼ˆSignalï¼‰","slug":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹ä¿¡å·ï¼ˆSignalï¼‰","date":"2021-08-11T02:59:22.000Z","updated":"2022-10-15T03:14:29.881Z","comments":true,"path":"2021/08/11/è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹ä¿¡å·ï¼ˆSignalï¼‰/","link":"","permalink":"http://example.com/2021/08/11/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%88IPC%EF%BC%89%E4%B9%8B%E4%BF%A1%E5%8F%B7%EF%BC%88Signal%EF%BC%89/","excerpt":"","text":"å…³äºè¿›ç¨‹é—´é€šä¿¡çš„æ¦‚è¿°å¯ä»¥æŸ¥çœ‹Linux æ“ä½œç³»ç»Ÿ - è¿›ç¨‹é—´é€šä¿¡ï¼Œä»£ç åŒæ­¥åœ¨è¿™é‡Œã€‚ æœ¬æ–‡é€šè¿‡å®ä¾‹ä»‹ç»é€šè¿‡å…±äº«å†…å­˜å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚ ç®€ä»‹ä¿¡å·å°±åƒå®é™…ç”Ÿäº§è¿‡ç¨‹ä¸­çš„åº”æ€¥é¢„æ¡ˆï¼Œå‘ç”Ÿäº†æŸä¸ªå¼‚å¸¸å°±ä¼šå¯åŠ¨ç‰¹å®šçš„åº”æ€¥é¢„æ¡ˆï¼Œä¸ºäº†å“åº”å„ç±»å¼‚å¸¸æƒ…å†µï¼Œæ‰€ä»¥å°±å®šä¹‰äº†å¾ˆå¤šä¸ªä¿¡å·ï¼Œä¿¡å·çš„åç§°æ˜¯åœ¨å¤´æ–‡ä»¶signal.hä¸­å®šä¹‰çš„ï¼Œä¿¡å·éƒ½ä»¥SIGå¼€å¤´ï¼Œå¸¸ç”¨çš„ä¿¡å·å¹¶ä¸å¤šï¼Œå¸¸ç”¨çš„ä¿¡å·å¦‚ä¸‹ï¼š 1234567SIGALRM #æ—¶é’Ÿå®šæ—¶ä¿¡å·, è®¡ç®—çš„æ˜¯å®é™…çš„æ—¶é—´æˆ–æ—¶é’Ÿæ—¶é—´SIGHUP #ç»ˆç«¯çš„æŒ‚æ–­æˆ–è¿›ç¨‹æ­»äº¡SIGINT #æ¥è‡ªé”®ç›˜çš„ä¸­æ–­ä¿¡å·SIGKILL #ç”¨æ¥ç«‹å³ç»“æŸç¨‹åºçš„è¿è¡Œ. æœ¬ä¿¡å·ä¸èƒ½è¢«é˜»å¡ã€å¤„ç†å’Œå¿½ç•¥ã€‚SIGPIPE #ç®¡é“ç ´è£‚SIGTERM #ç¨‹åºç»“æŸ(terminate)ä¿¡å·, ä¸SIGKILLä¸åŒçš„æ˜¯è¯¥ä¿¡å·å¯ä»¥è¢«é˜»å¡å’Œå¤„ç†SIGUSR1,SIGUSR2 #ç•™ç»™ç”¨æˆ·ä½¿ç”¨ å®ä¾‹12345678910111213141516171819202122232425#include &lt;signal.h&gt;#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;void signalHandler(int sig)&#123; printf(&quot;\\nOps! - I got signal %d\\n&quot;, sig); // æ¢å¤ç»ˆç«¯ä¸­æ–­ä¿¡å· SIGINT çš„é»˜è®¤è¡Œä¸º (void)signal(SIGINT, SIG_DFL);&#125;int main()&#123; // æ”¹å˜ç»ˆç«¯ä¸­æ–­ä¿¡å· SIGINT çš„é»˜è®¤è¡Œä¸ºï¼Œä½¿ä¹‹æ‰§è¡Œ ouch å‡½æ•° // è€Œä¸æ˜¯ç»ˆæ­¢ç¨‹åºçš„æ‰§è¡Œ (void)signal(SIGINT, signalHandler); while (1) &#123; printf(&quot;Hello World!\\n&quot;); sleep(1); &#125; return 0;&#125; æˆ‘ä»¬å¯ä»¥ç”¨signal()å‡½æ•°å¤„ç†æŒ‡å®šçš„ä¿¡å·ï¼Œä¸»è¦é€šè¿‡å¿½ç•¥å’Œæ¢å¤å…¶é»˜è®¤è¡Œä¸ºæ¥å·¥ä½œã€‚signal() å‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š 1void (*signal(int sig, void (*func)(int)))(int); è¿™æ˜¯ä¸€ä¸ªç›¸å½“å¤æ‚çš„å£°æ˜ï¼Œè€å¿ƒç‚¹çœ‹å¯ä»¥çŸ¥é“ signal æ˜¯ä¸€ä¸ªå¸¦æœ‰sigå’Œfuncä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œfuncæ˜¯ä¸€ä¸ªç±»å‹ä¸ºvoid (*)(int)çš„å‡½æ•°æŒ‡é’ˆã€‚è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªä¸funcç›¸åŒç±»å‹çš„æŒ‡é’ˆï¼ŒæŒ‡å‘å…ˆå‰æŒ‡å®šä¿¡å·å¤„ç†å‡½æ•°çš„å‡½æ•°æŒ‡é’ˆã€‚å‡†å¤‡æ•è·çš„ä¿¡å·çš„å‚æ•°ç”±sigç»™å‡ºï¼Œæ¥æ”¶åˆ°çš„æŒ‡å®šä¿¡å·åè¦è°ƒç”¨çš„å‡½æ•°ç”±å‚æ•°funcç»™å‡ºã€‚å…¶å®è¿™ä¸ªå‡½æ•°çš„ä½¿ç”¨æ˜¯ç›¸å½“ç®€å•çš„ï¼Œé€šè¿‡ä¸‹é¢çš„ä¾‹å­å°±å¯ä»¥çŸ¥é“ã€‚æ³¨æ„ä¿¡å·å¤„ç†å‡½æ•°çš„åŸå‹å¿…é¡»ä¸ºvoid funcï¼ˆintï¼‰ï¼Œæˆ–è€…æ˜¯ä¸‹é¢çš„ç‰¹æ®Šå€¼ï¼š 12SIG_IGN : å¿½ç•¥ä¿¡å·SIG_DFL : æ¢å¤ä¿¡å·çš„é»˜è®¤è¡Œä¸º æˆ‘ä»¬ç¨‹åºçš„ç›®çš„æ˜¯æƒ³è¦æ•è·é”®ç›˜è¾“å…¥Ctrl+Cï¼Œè¿™ä¸ªä¸­æ–­ã€‚é€šè¿‡è¡¨é‡Œå¯ä»¥æŸ¥åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨SIGINTè¿™ä¸ªä¿¡å·ï¼Œå½“æˆ‘ä»¬çš„ç¨‹åºå‡ºç°SIGINTä¿¡å·æ—¶ï¼Œè®©ç¨‹åºæ¥ä¸‹æ¥å¹²å•¥å‘¢ï¼Ÿæ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„Ctrl+Cä¼šä¸­æ–­å½“å‰è¿è¡Œçš„ç¨‹åºï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬åšäº†ä¸€äº›æ›´æ”¹ï¼Œæ›´æ”¹çš„å†…å®¹åœ¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„signalHandlerä¸­ã€‚æˆ‘ä»¬è®©ç¨‹åºè¾“å‡ºä¸€è¡Œå­—ç¬¦ä¸²åŠ ä¸Šä¿¡å·å€¼ã€‚ç„¶åå†æŠŠä¿¡å·çš„è¡Œä¸ºæ¢å¤åŸæ ·ã€‚æ­¤æ—¶æˆ‘ä»¬è¿è¡Œç¨‹åºå¯ä»¥å¾—åˆ°å¦‚ä¸‹ åœ¨æˆ‘ä»¬ç¬¬ä¸€è¾“å…¥Ctrl+Cæ—¶ï¼Œç¨‹åºæ²¡æœ‰ä¸­æ–­ï¼Œè€Œæ˜¯è°ƒç”¨äº†signalHanlderå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬æ›´æ”¹äº†ä¿¡å·çš„è¡Œä¸ºã€‚ä½†æ˜¯ç¬¬äºŒæ¬¡è¾“å…¥Ctrl+Cæ—¶ï¼Œç¨‹åºä¸­æ–­äº†ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"IPC","slug":"IPC","permalink":"http://example.com/tags/IPC/"}]},{"title":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹å…±äº«å†…å­˜ (SharedMemory)","slug":"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹å…±äº«å†…å­˜ï¼ˆSharedMemoryï¼‰","date":"2021-08-10T09:41:26.000Z","updated":"2022-10-15T03:14:29.888Z","comments":true,"path":"2021/08/10/è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¹‹å…±äº«å†…å­˜ï¼ˆSharedMemoryï¼‰/","link":"","permalink":"http://example.com/2021/08/10/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%88IPC%EF%BC%89%E4%B9%8B%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%EF%BC%88SharedMemory%EF%BC%89/","excerpt":"","text":"å…³äºè¿›ç¨‹é—´é€šä¿¡çš„æ¦‚è¿°å¯ä»¥æŸ¥çœ‹Linux æ“ä½œç³»ç»Ÿ - è¿›ç¨‹é—´é€šä¿¡ï¼Œä»£ç åŒæ­¥åœ¨è¿™é‡Œã€‚ æœ¬æ–‡é€šè¿‡å®ä¾‹ä»‹ç»é€šè¿‡å…±äº«å†…å­˜å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚ shmget(å¾—åˆ°ä¸€ä¸ªå…±äº«å†…å­˜æ ‡è¯†ç¬¦æˆ–åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡)æˆ‘ä»¬å¯ä»¥é€šè¿‡shmgetå‡½æ•°åˆ›å»ºæˆ–æ‰“å¼€å…±äº«å†…å­˜ï¼Œé€šè¿‡å‡½æ•°ç­¾å 1234//key_t key: å”¯ä¸€å®šä½ä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡//size_t size: å…±äº«å†…å­˜å¤§å°//int flag: å¦‚æœæ˜¯ IPC_CREAT è¡¨ç¤ºåˆ›å»ºæ–°çš„å…±äº«å†…å­˜ç©ºé—´int shmget(key_t key, size_t size, int flag); ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…±äº«å†…å­˜çš„å”¯ä¸€æ ‡è¯†ï¼Œæ˜¯éœ€è¦æˆ‘ä»¬æŒ‡å®šçš„ã€‚é‚£ä¹ˆå¦‚ä½•æŒ‡å®škeyå‘¢ï¼Ÿå¦‚ä½•ä¿è¯å”¯ä¸€æ€§å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ï¼Œftokä¼šæ ¹æ®è¿™ä¸ªæ–‡ä»¶çš„ inodeï¼Œç”Ÿæˆä¸€ä¸ªè¿‘ä¹å”¯ä¸€çš„ keyã€‚åªè¦åœ¨è¿™ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸è¦è¢«åˆ é™¤å°±å¯ä»¥äº†ã€‚åªè¦ä¸åˆ é™¤ï¼Œæ— è®ºä»€ä¹ˆæ—¶åˆ»ï¼Œå†è°ƒç”¨ ftokï¼Œä¹Ÿä¼šå¾—åˆ°åŒæ ·çš„keyã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”³è¯·çš„ç©ºé—´å¤§å°ï¼Œæˆ‘ä»¬å°±ç”³è¯· 1024Bã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æƒé™æ ‡è¯†ï¼ŒIPC_CREATè¡¨ç¤ºåˆ›å»ºå…±äº«å†…å­˜ï¼Œ0644è¡¨ç¤ºå…è®¸ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºçš„å…±äº«å†…å­˜è¢«å†…å­˜åˆ›å»ºè€…æ‰€æ‹¥æœ‰çš„è¿›ç¨‹å‘å…±äº«å†…å­˜è¯»å–å’Œå†™å…¥æ•°æ®ï¼ŒåŒæ—¶å…¶ä»–ç”¨æˆ·åˆ›å»ºçš„è¿›ç¨‹åªèƒ½è¯»å–å…±äº«å†…å­˜ã€‚ shmat(æŠŠå…±äº«å†…å­˜åŒºå¯¹è±¡æ˜ å°„åˆ°è°ƒç”¨è¿›ç¨‹çš„åœ°å€ç©ºé—´)ç¬¬ä¸€æ¬¡åˆ›å»ºå®Œå…±äº«å†…å­˜æ—¶ï¼Œå®ƒè¿˜ä¸èƒ½è¢«ä»»ä½•è¿›ç¨‹è®¿é—®ï¼Œshmat()å‡½æ•°çš„ä½œç”¨å°±æ˜¯ç”¨æ¥å¯åŠ¨å¯¹è¯¥å…±äº«å†…å­˜çš„è®¿é—®ï¼Œå¹¶æŠŠå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚å®ƒçš„ç­¾åå¦‚ä¸‹ï¼š 1void *shmat(int shm_id, const void *shm_addr, int shmflg); ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ä¸Šæ–‡äº§ç”Ÿçš„å”¯ä¸€æ ‡è¯†ã€‚ ç¬¬äºŒä¸ªå‚æ•°ï¼Œshm_addræŒ‡å®šå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹ä¸­çš„åœ°å€ä½ç½®ï¼Œé€šå¸¸ä¸ºç©ºï¼Œè¡¨ç¤ºè®©ç³»ç»Ÿæ¥é€‰æ‹©å…±äº«å†…å­˜çš„åœ°å€ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œshm_flgæ˜¯ä¸€ç»„æ ‡å¿—ä½ï¼Œé€šå¸¸ä¸º 0ã€‚è°ƒç”¨æˆåŠŸæ—¶è¿”å›ä¸€ä¸ªæŒ‡å‘å…±äº«å†…å­˜ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æŒ‡é’ˆï¼Œå¦‚æœè°ƒç”¨å¤±è´¥è¿”å›-1. (void *) - 1æŠŠ-1è½¬æ¢ä¸ºæŒ‡é’ˆ0xFFFFFFFFï¼Œæœ‰æ—¶ä¹Ÿä¼šç”¨åˆ°(void*)0ï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºæŒ‡é’ˆã€‚ shmdt(æ–­å¼€å…±äº«å†…å­˜è¿æ¥)ä¸ shmat å‡½æ•°ç›¸åï¼Œæ˜¯ç”¨æ¥æ–­å¼€ä¸å…±äº«å†…å­˜é™„åŠ ç‚¹çš„åœ°å€ï¼Œç¦æ­¢æœ¬è¿›ç¨‹è®¿é—®æ­¤ç‰‡å…±äº«å†…å­˜ å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š 1int shmdt(const void *shmaddr) å‚æ•°ä¸€shmaddrä¸ºè¿æ¥å…±äº«å†…å­˜çš„èµ·å§‹åœ°å€ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬å‡½æ•°è°ƒç”¨å¹¶ä¸åˆ é™¤æ‰€æŒ‡å®šçš„å…±äº«å†…å­˜åŒºï¼Œè€Œåªæ˜¯å°†å…ˆå‰ç”¨ shmat å‡½æ•°è¿æ¥ï¼ˆattachï¼‰å¥½çš„å…±äº«å†…å­˜è„±ç¦»ï¼ˆdetachï¼‰ç›®å‰çš„è¿›ç¨‹ã€‚åˆ é™¤å…±äº«å†…å­˜å°±éœ€è¦ä¸‹é¢çš„è¿™ä¸ªå‡½æ•°ã€‚ shmctl(å…±äº«å†…å­˜ç®¡ç†)å®Œæˆå¯¹å…±äº«å†…å­˜çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬æ”¹å˜çŠ¶æ€ï¼Œåˆ é™¤å…±äº«å†…å­˜ç­‰ã€‚ å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š 1int shmctl(int shmid, int cmd, struct shmid_ds *buf) shmidå…±äº«å†…å­˜å”¯ä¸€æ ‡è¯†ç¬¦ cmdæ‰§è¡Œçš„æ“ä½œï¼ŒåŒ…æ‹¬å¦‚ä¸‹ IPC_STATï¼šå¾—åˆ°å…±äº«å†…å­˜çš„çŠ¶æ€ï¼ŒæŠŠå…±äº«å†…å­˜çš„shmid_dsç»“æ„å¤åˆ¶åˆ°bufä¸­ IPC_SETï¼šæ”¹å˜å…±äº«å†…å­˜çš„çŠ¶æ€ï¼ŒæŠŠbufæ‰€æŒ‡çš„shmid_dsç»“æ„ä¸­çš„uidã€gidã€modeå¤åˆ¶åˆ°å…±äº«å†…å­˜çš„shmid_dsç»“æ„å†… IPC_RMIDï¼šåˆ é™¤è¿™ç‰‡å…±äº«å†…å­˜ bufå…±äº«å†…å­˜ç®¡ç†ç»“æ„ä½“ã€‚å…·ä½“è¯´æ˜å‚è§å…±äº«å†…å­˜å†…æ ¸ç»“æ„å®šä¹‰éƒ¨åˆ† 1234567891011121314151617181920212223242526272829303132333435363738//server.c#include &lt;sys/types.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int main(void)&#123; int shmid; key_t shmkey; char *shmptr; shmkey = ftok(&quot;./client.c&quot;, 0); // åˆ›å»ºæˆ–æ‰“å¼€å†…å­˜å…±äº«åŒºåŸŸ shmid = shmget(shmkey, 1024, 0666 | IPC_CREAT); if (shmid == -1) &#123; printf(&quot;shmget error!\\n&quot;); exit(1); &#125; //å°†å…±äº«å†…å­˜æ˜ å°„åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ä¸­ï¼Œ //ä¹‹åç›´æ¥å¯¹è¿›ç¨‹ä¸­çš„åœ°å€ addr æ“ä½œå°±æ˜¯å¯¹å…±äº«å†…å­˜æ“ä½œ shmptr = (char *)shmat(shmid, NULL, 0); if (shmptr == (void *)-1) &#123; printf(&quot;shmat error!\\n&quot;); exit(1); &#125; while (1) &#123; // æŠŠç”¨æˆ·çš„è¾“å…¥å­˜åˆ°å…±äº«å†…å­˜åŒºåŸŸä¸­ printf(&quot;input:&quot;); scanf(&quot;%s&quot;, shmptr); &#125; exit(0);&#125; 123456789101112131415161718192021222324252627282930313233343536373839//client.c#include &lt;sys/types.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;int main(void)&#123; int shmid; char *shmptr; key_t shmkey; shmkey = ftok(&quot;./client.c&quot;, 0); // åˆ›å»ºæˆ–æ‰“å¼€å†…å­˜å…±äº«åŒºåŸŸ shmid = shmget(shmkey, 1024, 0666 | IPC_CREAT); if (shmid == -1) &#123; printf(&quot;shmget error!\\n&quot;); exit(1); &#125; //å°†å…±äº«å†…å­˜æ˜ å°„åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ä¸­ï¼Œ //ä¹‹åç›´æ¥å¯¹è¿›ç¨‹ä¸­çš„åœ°å€ addr æ“ä½œå°±æ˜¯å¯¹å…±äº«å†…å­˜æ“ä½œ shmptr = (char *)shmat(shmid, NULL, 0); if (shmptr == (void *)-1) &#123; fprintf(stderr, &quot;shmat error!\\n&quot;); exit(1); &#125; while (1) &#123; // æ¯éš” 3 ç§’ä»å…±äº«å†…å­˜ä¸­å–ä¸€æ¬¡æ•°æ®å¹¶æ‰“å°åˆ°æ§åˆ¶å° printf(&quot;string:%s\\n&quot;, shmptr); sleep(3); &#125; exit(0);&#125; åœ¨ä¸¤ä¸ªç»ˆç«¯åˆ†åˆ«è¿è¡Œclientå’Œserverï¼Œclientä¼šæ¯ä¸‰ç§’åœ¨ç»ˆç«¯æ‰“å°å‡ºserverè¾“å…¥çš„å†…å®¹ã€‚ å¦‚ä½•æ‰‹åŠ¨åˆ é™¤å…±äº«å†…å­˜ï¼Ÿåˆ—å‡ºæ‰€æœ‰çš„å…±äº«å†…å­˜æ®µï¼š 123456789101112ipcs -m------------ å…±äº«å†…å­˜æ®µ --------------é”® shmid æ‹¥æœ‰è€… æƒé™ å­—èŠ‚ è¿æ¥æ•° çŠ¶æ€ 0x00000000 2 dominic 600 16384 1 ç›®æ ‡ 0x00000000 753668 dominic 606 10089696 2 ç›®æ ‡ 0x00000000 622597 dominic 600 4194304 2 ç›®æ ‡ 0x00000000 753670 dominic 606 10089696 2 ç›®æ ‡ 0x00000000 688135 dominic 600 899976 2 ç›®æ ‡ 0x00000000 8 dominic 600 524288 2 ç›®æ ‡ 0x00000000 9 dominic 600 524288 2 ç›®æ ‡ 0x00000000 753674 dominic 600 7127040 2 ç›®æ ‡ 0x0000006f 720918 dominic 666 1024 0 æˆ‘ä»¬å‘ç°æœ€åä¸€ä¸ªé”®å€¼ä¸º0x0000006f = 111çš„å…±äº«å†…å­˜æ®µï¼Œå°±æ˜¯æˆ‘ä»¬åˆ›å»ºçš„å…±äº«å†…å­˜æ®µã€‚åˆ é™¤æŒ‡å®šå…±äº«å†…å­˜æ®µï¼š 123ipcrm -m 720918 æˆ–è€… ipcrm -M 0x0000006f ä¿¡å·é‡å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„æ“ä½œï¼Œå‘½ä»¤ç±»ä¼¼ï¼Œåªæ˜¯å‚æ•°ä¸åŒã€‚æŸ¥çœ‹å‘½ä»¤ï¼š 1ipcs [-m|-q|-s] -m è¾“å‡ºæœ‰å…³å…±äº«å†…å­˜ (shared memory) çš„ä¿¡æ¯ -q è¾“å‡ºæœ‰å…³ä¿¡æ¯é˜Ÿåˆ— (message queue) çš„ä¿¡æ¯ -s è¾“å‡ºæœ‰å…³â€œä¿¡å·é‡â€(semaphore) çš„ä¿¡æ¯ åˆ é™¤å‘½ä»¤ 1ipcrm [ -M key | -m id | -Q key | -q id | -S key | -s id ] -Mç”¨ shmkey åˆ é™¤å…±äº«å†…å­˜ -mç”¨ shmid åˆ é™¤å…±äº«å†…å­˜ -Qç”¨ msgkey åˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— -qç”¨ msgid åˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— -Sç”¨ semkey åˆ é™¤ä¿¡å·é‡ -sç”¨ semid åˆ é™¤ä¿¡å·é‡ è¶…è¿‡å…±äº«å†…å­˜çš„å¤§å°é™åˆ¶å…±äº«å†…å­˜çš„æ€»ä½“å¤§å°æ˜¯æœ‰é™åˆ¶çš„ï¼Œè¿™ä¸ªå¤§å°é€šè¿‡ SHMMAX å‚æ•°æ¥å®šä¹‰ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®å®š SHMMAX çš„å€¼ï¼š 1cat /proc/sys/kernel/shmmax å¦‚æœæœºå™¨ä¸Šåˆ›å»ºçš„å…±äº«å†…å­˜çš„æ€»å…±å¤§å°è¶…å‡ºäº†è¿™ä¸ªé™åˆ¶ï¼Œåœ¨ç¨‹åºä¸­ä½¿ç”¨æ ‡å‡†é”™è¯¯perrorå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹çš„ä¿¡æ¯ï¼š 1unable to attach to shared memory 1ã€è®¾ç½® SHMMAX SHMMAX çš„é»˜è®¤å€¼æ˜¯ 32MB ã€‚ä¸€èˆ¬ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¹‹ä¸€ç§å°† SHMMAX å‚æ•°è®¾ä¸º 2GB ï¼šé€šè¿‡ç›´æ¥æ›´æ”¹ /proc æ–‡ä»¶ç³»ç»Ÿï¼Œä½ ä¸éœ€é‡æ–°å¯åŠ¨æœºå™¨å°±å¯ä»¥æ”¹å˜ SHMMAX çš„é»˜è®¤è®¾ç½®ã€‚æˆ‘ä½¿ç”¨çš„æ–¹æ³•æ˜¯å°†ä»¥ä¸‹å‘½ä»¤æ”¾å…¥ /&gt;etc/rc.local å¯åŠ¨æ–‡ä»¶ä¸­ï¼š 1echo &quot;2147483648&quot; &gt; /proc/sys/kernel/shmmax æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ sysctl å‘½ä»¤æ¥æ›´æ”¹ SHMMAX çš„å€¼ï¼š 1sysctl -w kernel.shmmax=2147483648 æœ€åï¼Œé€šè¿‡å°†è¯¥å†…æ ¸å‚æ•°æ’å…¥åˆ°/etc/sysctl.conf å¯åŠ¨æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿è¿™ç§æ›´æ”¹æ°¸ä¹…æœ‰æ•ˆï¼š 1echo &quot;kernel.shmmax=2147483648&quot; &gt;&gt; /etc/sysctl.conf 2ã€è®¾ç½® SHMMNI æˆ‘ä»¬ç°åœ¨æ¥çœ‹ SHMMNI å‚æ•°ã€‚è¿™ä¸ªå†…æ ¸å‚æ•°ç”¨äºè®¾ç½®ç³»ç»ŸèŒƒå›´å†…å…±äº«å†…å­˜æ®µçš„æœ€å¤§æ•°é‡ã€‚è¯¥å‚æ•°çš„é»˜è®¤å€¼æ˜¯ 4096 ã€‚è¿™ä¸€æ•°å€¼å·²ç»è¶³å¤Ÿï¼Œé€šå¸¸ä¸éœ€è¦æ›´æ”¹ã€‚æ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®å®š SHMMNI çš„å€¼ï¼š 1cat /proc/sys/kernel/shmmni 3ã€è®¾ç½® SHMALL æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ SHMALL å…±äº«å†…å­˜å†…æ ¸å‚æ•°ã€‚è¯¥å‚æ•°æ§åˆ¶ç€ç³»ç»Ÿä¸€æ¬¡å¯ä»¥ä½¿ç”¨çš„å…±äº«å†…å­˜æ€»é‡ï¼ˆä»¥é¡µä¸ºå•ä½ï¼‰ã€‚ç®€è¨€ä¹‹ï¼Œè¯¥å‚æ•°çš„å€¼å§‹ç»ˆåº”è¯¥è‡³å°‘ä¸ºï¼šceil(SHMMAX/PAGE_SIZE) SHMALL çš„é»˜è®¤å¤§å°ä¸º 2097152 ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒæŸ¥è¯¢ï¼š 1cat /proc/sys/kernel/shmall SHMALL çš„é»˜è®¤è®¾ç½®å¯¹äºæˆ‘ä»¬æ¥è¯´åº”è¯¥è¶³å¤Ÿä½¿ç”¨ã€‚æ³¨æ„ï¼šåœ¨ i386 å¹³å°ä¸Š Red Hat Linux çš„ é¡µé¢å¤§å° ä¸º 4096 å­—èŠ‚ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ bigpages ï¼Œå®ƒæ”¯æŒé…ç½®æ›´å¤§çš„å†…å­˜é¡µé¢å°ºå¯¸ã€‚ å¤šæ¬¡è¿›è¡Œ shmat æ“ä½œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ä¸€ä¸ªè¿›ç¨‹æ˜¯å¯ä»¥å¯¹åŒä¸€ä¸ªå…±äº«å†…å­˜å¤šæ¬¡ shmat è¿›è¡ŒæŒ‚è½½çš„ï¼Œç‰©ç†å†…å­˜æ˜¯æŒ‡å‘åŒä¸€å—ï¼Œå¦‚æœ shmaddr ä¸º NULLï¼Œåˆ™æ¯æ¬¡è¿”å›çš„çº¿æ€§åœ°å€ç©ºé—´éƒ½ä¸åŒã€‚è€Œä¸”æŒ‡å‘è¿™å—å…±äº«å†…å­˜çš„å¼•ç”¨è®¡æ•°ä¼šå¢åŠ ã€‚ä¹Ÿå°±æ˜¯è¿›ç¨‹å¤šå—çº¿æ€§ç©ºé—´ä¼šæŒ‡å‘åŒä¸€å—ç‰©ç†åœ°å€ã€‚è¿™æ ·ï¼Œå¦‚æœä¹‹å‰æŒ‚è½½è¿‡è¿™å—å…±äº«å†…å­˜çš„è¿›ç¨‹çš„çº¿æ€§åœ°å€æ²¡æœ‰è¢«shmdtæ‰ï¼Œå³ç”³è¯·çš„çº¿æ€§åœ°å€éƒ½æ²¡æœ‰é‡Šæ”¾ï¼Œå°±ä¼šä¸€ç›´æ¶ˆè€—è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šæœ€åå¯¼è‡´è¿›ç¨‹çº¿æ€§ç©ºé—´è¢«ä½¿ç”¨å®Œè€Œå¯¼è‡´ä¸‹æ¬¡ shmat æˆ–è€…å…¶ä»–æ“ä½œå¤±è´¥ã€‚ shmget åˆ›å»ºå…±äº«å†…å­˜ï¼Œå½“ key ç›¸åŒæ—¶ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºé”™ï¼Ÿå½“åˆ›å»ºä¸€ä¸ªæ–°çš„å…±äº«å†…å­˜åŒºæ—¶ï¼Œsize çš„å€¼å¿…é¡»å¤§äº 0ï¼›å¦‚æœæ˜¯è®¿é—®ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å†…å­˜å…±äº«åŒºï¼Œåˆ™ç½® size ä¸º 0ã€‚ å·²ç»åˆ›å»ºçš„å…±äº«å†…å­˜çš„å¤§å°æ˜¯å¯ä»¥è°ƒæ•´çš„ï¼Œä½†æ˜¯å·²ç»åˆ›å»ºçš„å…±äº«å†…å­˜çš„å¤§å°åªèƒ½è°ƒå°ï¼Œä¸èƒ½è°ƒå¤§ å½“å¤šä¸ªè¿›ç¨‹éƒ½èƒ½åˆ›å»ºå…±äº«å†…å­˜çš„æ—¶å€™ï¼Œå¦‚æœ key å‡ºç°ç›¸åŒçš„æƒ…å†µï¼Œå¹¶ä¸”ä¸€ä¸ªè¿›ç¨‹éœ€è¦åˆ›å»ºçš„å…±äº«å†…å­˜çš„å¤§å°è¦æ¯”å¦å¤–ä¸€ä¸ªè¿›ç¨‹è¦åˆ›å»ºçš„å…±äº«å†…å­˜å°ï¼Œå…±äº«å†…å­˜å¤§çš„è¿›ç¨‹å…ˆåˆ›å»ºå…±äº«å†…å­˜ï¼Œå…±äº«å†…å­˜å°çš„è¿›ç¨‹ååˆ›å»ºå…±äº«å†…å­˜ï¼Œå°å…±äº«å†…å­˜çš„è¿›ç¨‹å°±ä¼šè·å–åˆ°å¤§çš„å…±äº«å†…å­˜è¿›ç¨‹çš„å…±äº«å†…å­˜ï¼Œå¹¶ä¿®æ”¹å…¶å…±äº«å†…å­˜çš„å¤§å°å’Œå†…å®¹ï¼Œä»è€Œå¯èƒ½å¯¼è‡´å¤§çš„å…±äº«å†…å­˜è¿›ç¨‹å´©æºƒã€‚ ftok æ˜¯å¦ä¸€å®šä¼šäº§ç”Ÿå”¯ä¸€çš„ key å€¼ï¼Ÿftok åŸå‹å¦‚ä¸‹ï¼š 1key_t ftok(char * pathname, int proj_id) pathnameå°±æ—¶ä½ æŒ‡å®šçš„æ–‡ä»¶åï¼Œproj_idæ˜¯å­åºå·ã€‚åœ¨ä¸€èˆ¬çš„ UNIX å®ç°ä¸­ï¼Œæ˜¯å°†æ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹å·å–å‡ºï¼Œå‰é¢åŠ ä¸Šå­åºå·å¾—åˆ°key_tçš„è¿”å›å€¼ã€‚å¦‚æŒ‡å®šæ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹å·ä¸º 65538ï¼Œæ¢ç®—æˆ 16 è¿›åˆ¶ä¸º0Ã—010002ï¼Œè€Œä½ æŒ‡å®šçš„proj_idå€¼ä¸º38ï¼Œæ¢ç®—æˆ 16 è¿›åˆ¶ä¸º0Ã—26ï¼Œåˆ™æœ€åçš„key_tè¿”å›å€¼ä¸º0Ã—26010002ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"IPC","slug":"IPC","permalink":"http://example.com/tags/IPC/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-ar å¤šæ–‡ä»¶å½’æ¡£ä¸ºä¸€ä¸ªæ–‡ä»¶","slug":"æ¯å¤©å­¦å‘½ä»¤-arå¤šæ–‡ä»¶å½’æ¡£ä¸ºä¸€ä¸ªæ–‡ä»¶","date":"2021-08-10T03:33:49.000Z","updated":"2022-10-15T03:14:29.712Z","comments":true,"path":"2021/08/10/æ¯å¤©å­¦å‘½ä»¤-arå¤šæ–‡ä»¶å½’æ¡£ä¸ºä¸€ä¸ªæ–‡ä»¶/","link":"","permalink":"http://example.com/2021/08/10/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-ar%E5%A4%9A%E6%96%87%E4%BB%B6%E5%BD%92%E6%A1%A3%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6/","excerpt":"","text":"ç°åœ¨æˆ‘ä»¬æœ‰solution.c,solution.hä¸¤ä¸ªæ–‡ä»¶ï¼Œä»–ä»¬å®ç°äº†æŸä¸€ä¸ªåŠŸèƒ½ï¼Œè‡ªæˆä¸€ä¸ªæ¨¡å—ã€‚åœ¨å…¶ä»–é¡¹ç›®ä¸­ä¹Ÿå¯å¤ç”¨ã€‚æˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒåšæˆåº“æ–‡ä»¶ã€‚arå‘½ä»¤å°±å¯ä»¥å°†é”å“¥æ–‡ä»¶æ•´åˆæˆä¸€ä¸ªåº“æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä»ä¸€ä¸ªåº“ä¸­å•ç‹¬æå–å‡ºæŸä¸€ä¸ªæ–‡ä»¶ã€‚ Commands1234567-d åˆ é™¤å¤‡å­˜æ–‡ä»¶ä¸­çš„æˆå‘˜æ–‡ä»¶ã€‚-m å˜æ›´æˆå‘˜æ–‡ä»¶åœ¨å¤‡å­˜æ–‡ä»¶ä¸­çš„æ¬¡åºã€‚-p æ˜¾ç¤ºå¤‡å­˜æ–‡ä»¶ä¸­çš„æˆå‘˜æ–‡ä»¶å†…å®¹ã€‚-q å°†æ–‡ä»¶é™„åŠ åœ¨å¤‡å­˜æ–‡ä»¶æœ«ç«¯ã€‚-r å°†æ–‡ä»¶æ’å…¥å¤‡å­˜æ–‡ä»¶ä¸­ã€‚-t æ˜¾ç¤ºå¤‡å­˜æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ–‡ä»¶ã€‚-x è‡ªå¤‡å­˜æ–‡ä»¶ä¸­å–å‡ºæˆå‘˜æ–‡ä»¶ã€‚ Examplesæ‰“åŒ…æ–‡ä»¶å°†solution.c solution.hä¸¤ä¸ªæ–‡ä»¶æ‰“åŒ…æˆsolution.bakï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ 1234âœ ar rv solution.bak solution.c solution.har: æ­£åœ¨åˆ›å»º solution.baka - solution.ca - solution.h æ˜¾ç¤ºæ‰“åŒ…æ–‡ä»¶å†…å®¹123âœ ar t solution.bak solution.csolution.h","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"æ¯æ—¥å­¦å‘½ä»¤-ps æ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€","slug":"æ¯æ—¥å­¦å‘½ä»¤-psæ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€","date":"2021-08-09T11:37:38.000Z","updated":"2022-10-15T03:02:55.820Z","comments":true,"path":"2021/08/09/æ¯æ—¥å­¦å‘½ä»¤-psæ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€/","link":"","permalink":"http://example.com/2021/08/09/%E6%AF%8F%E6%97%A5%E5%AD%A6%E5%91%BD%E4%BB%A4-ps%E6%98%BE%E7%A4%BA%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81/","excerpt":"","text":"pså‘½ä»¤æ˜¾ç¤ºçš„ä¿¡æ¯ç±»ä¼¼äº Windows çš„ä»»åŠ¡ç®¡ç†å™¨ã€‚ä¹Ÿæ˜¯å‚æ•°è¶…çº§å¤šçš„ä¸€ä¸ªå‘½ä»¤ï¼Œæ‰€ä»¥å°±ä¸åˆ—å‚æ•°äº†ï¼Œéœ€è¦æŸ¥çœ‹æ—¶ç›´æ¥æœç´¢ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹å®ä¾‹ã€‚ ä½¿ç”¨å®ä¾‹æ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„æ‰€æœ‰ç¨‹åº 1234567âœ ~ ps -a PID TTY TIME CMD 879 tty2 00:03:43 Xorg 990 tty2 00:00:00 gnome-session-b 2653 pts/0 00:00:00 zsh 12365 pts/0 00:00:00 ps æ˜¾ç¤ºæ‰€æœ‰ç¨‹åº 1234567891011121314151617âœ ~ ps -A PID TTY TIME CMD 1 ? 00:00:01 systemd 2 ? 00:00:00 kthreadd 3 ? 00:00:00 rcu_gp 4 ? 00:00:00 rcu_par_gp 6 ? 00:00:00 kworker/0:0H-kblockd 9 ? 00:00:00 mm_percpu_wq 10 ? 00:00:00 ksoftirqd/0 11 ? 00:00:02 rcu_sched 12 ? 00:00:00 migration/0 13 ? 00:00:00 idle_inject/0 14 ? 00:00:00 cpuhp/0 15 ? 00:00:00 kdevtmpfs... æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯ 1âœ ~ ps -u root aæ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„ç¨‹åºï¼Œuä»¥ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µï¼Œxæ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä¸ä»¥ç»ˆç«¯æœºæ¥åŒºåˆ†USERï¼è¿è¡Œè¯¥æµç¨‹çš„ç”¨æˆ·ã€‚ %CPUï¼è¿›ç¨‹ CPU åˆ©ç”¨ç‡ã€‚ %MEMï¼è¿›ç¨‹é©»ç•™é›†å¤§å°å è®¡ç®—æœºç‰©ç†å†…å­˜çš„ç™¾åˆ†æ¯”ã€‚ VSZï¼KiB ä¸­è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜å¤§å°ã€‚ RSSï¼è¿›ç¨‹æ­£åœ¨ä½¿ç”¨çš„ç‰©ç†å†…å­˜çš„å¤§å°ã€‚ STATï¼è¿›ç¨‹çŠ¶æ€ä»£ç ï¼Œå¯ä»¥æ˜¯ Zï¼ˆzombieï¼‰ï¼ŒSï¼ˆä¼‘çœ ï¼‰ï¼ŒRï¼ˆè¿è¡Œï¼‰..ç­‰ç­‰ã€‚ STARTï¼å‘½ä»¤å¯åŠ¨çš„æ—¶é—´ã€‚ 12345âœ ~ ps aux USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMANDroot 1 0.0 0.2 102084 11540 ? Ss 09:09 0:01 /sbin/init splashroot 2 0.0 0.0 0 0 ? S 09:09 0:00 [kthreadd]root 3 0.0 0.0 0 0 ? I&lt; 09:09 0:00 [rcu_gp] æŒ‰ CPU èµ„æºçš„ä½¿ç”¨é‡å¯¹è¿›ç¨‹è¿›è¡Œæ’åºï¼š 1234567891011âœ ~ ps aux | sort -nk 3avahi 492 0.0 0.0 8536 3260 ? Ss 09:09 0:00 avahi-daemon: running [hanhan.local]avahi 552 0.0 0.0 8352 332 ? S 09:09 0:00 avahi-daemon: chroot helpercolord 1442 0.0 0.3 255144 14408 ? Ssl 09:09 0:00 /usr/libexec/colorddominic 1068 0.0 0.0 31244 364 ? S 09:09 0:00 /usr/bin/VBoxClient --clipboarddominic 1069 0.0 0.9 163512 39088 ? Sl 09:09 0:00 /usr/bin/VBoxClient --clipboarddominic 1080 0.0 0.0 31244 364 ? S 09:09 0:00 /usr/bin/VBoxClient --seamless# å…¶ä¸­`sort`å‘½ä»¤ä¸­`-n`ä¸ºæŒ‰æ•°å€¼è¿›è¡Œæ’åºï¼Œ`-k 3` è¡¨ç¤ºä»¥è¾“å‡ºç»“æœçš„ç¬¬ä¸‰åˆ—æ¥è¿›è¡Œæ’åºï¼Œ# ä»ä¸Šä¸€ä¸ªå®ä¾‹ä¸­çœ‹åˆ°ï¼Œç¬¬ä¸‰åˆ—ä¸ºCPUä½¿ç”¨ç‡`%CPU`ã€‚# åŒç†ps aux | sort -rnk 4 å³æŒ‰å†…å­˜ä½¿ç”¨é™åºæ’åº æ˜¾ç¤ºå‰ 5 åæœ€è€— CPU çš„è¿›ç¨‹ 12345âœ ~ ps aux --sort=-pcpu | head -5USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMANDroot 1 2.6 0.7 51396 7644 ? Ss 02:02 0:03 /usr/lib/systemd/systemd --switched-root --system --deserialize 23root 1249 2.6 3.0 355800 30896 tty1 Rsl+ 02:02 0:02 /usr/bin/X -background none :0 vt01 -nolisten tcproot 508 2.4 1.6 248488 16776 ? Ss 02:02 0:03 /usr/bin/python /usr/sbin/firewalld --nofor ä¸‹é¢çš„å‘½ä»¤ä¼šæ˜¾ç¤ºè¿›ç¨‹ id ä¸º 3150 çš„è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹ 1âœ ~ ps -p 3150 -L","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"è§£å†³ OpenSSL SSL_connect: Connection was reset in connection to github.com:443","slug":"è§£å†³OpenSSL-SSL-connect-Connection-was-reset-in-connection-to-github-com-443","date":"2021-08-09T10:20:51.000Z","updated":"2022-10-15T03:14:29.819Z","comments":true,"path":"2021/08/09/è§£å†³OpenSSL-SSL-connect-Connection-was-reset-in-connection-to-github-com-443/","link":"","permalink":"http://example.com/2021/08/09/%E8%A7%A3%E5%86%B3OpenSSL-SSL-connect-Connection-was-reset-in-connection-to-github-com-443/","excerpt":"","text":"åœ¨å‘ GitHub æ¨é€åšå®¢æ—¶ï¼Œæ¨é€å¤±è´¥æŠ¥äº†è¿™ä¸ªé”™ã€‚ä¹Ÿä¸çŸ¥é“æ˜¯æ”¹äº†ä»€ä¹ˆè®¾ç½®çªç„¶æŠ¥é”™ã€‚SSL çš„é”™ä¹‹å‰é‡åˆ°ä¸€æ¬¡ï¼Œå°±æ˜¯åˆšå¼€å§‹é…ç½® Git æ—¶ç”¨çš„httpsåè®®ï¼Œæ¯æ¬¡pushéƒ½éœ€è¦é‡æ–°è¾“å…¥ä¸€æ¬¡å¯†ç ã€‚æ”¹æˆsslåè®®å°± OK äº†ã€‚å½“æ—¶æŠŠ Linux ç¯å¢ƒçš„ Git æ”¹äº†ï¼Œä½†æ˜¯ç°åœ¨çš„ Windows ä¸‹æ²¡æ”¹ï¼ŒçŒœæµ‹å¯èƒ½å’Œè¿™ä¹Ÿæœ‰å…³ï¼Œäºæ˜¯å°±æŠŠ URL æ”¹äº†ä¸€ä¸‹ï¼Œç»“æœè¿˜çœŸå¥½äº†ã€‚åœ¨æœ¬åœ°ä»“åº“çš„.gitæ–‡ä»¶é‡Œæ‰¾åˆ°configæ–‡ä»¶ï¼Œæ‰“å¼€åå°†urlæ”¹ä¸ºsslåè®®ï¼Œgit@github.com:XXXæ ¼å¼çš„ã€‚ å°† Hexo çš„é…ç½®ä¹Ÿæ”¹äº†ï¼Œæ‰¾åˆ°ä»“åº“ä¸‹çš„_config.yml 1234deploy: type: git repository: æ”¹æˆsslåè®®åœ°å€ branch: master","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"},{"name":"Hexo","slug":"Hexo","permalink":"http://example.com/tags/Hexo/"}]},{"title":"Qt äº‹ä»¶","slug":"Qtäº‹ä»¶","date":"2021-08-09T01:55:07.000Z","updated":"2022-10-15T03:14:29.464Z","comments":true,"path":"2021/08/09/Qtäº‹ä»¶/","link":"","permalink":"http://example.com/2021/08/09/Qt%E4%BA%8B%E4%BB%B6/","excerpt":"","text":"æœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç å¯åœ¨æ­¤å¤„æŸ¥çœ‹ äº‹ä»¶ä»¥åŠä¸ä¿¡å·çš„åŒºåˆ«äº‹ä»¶ï¼ˆeventï¼‰æ˜¯ç”±ç³»ç»Ÿæˆ–è€… Qt æœ¬èº«åœ¨ä¸åŒçš„æ—¶åˆ»å‘å‡ºçš„ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹é¼ æ ‡ã€æ•²ä¸‹é”®ç›˜ï¼Œæˆ–è€…æ˜¯çª—å£éœ€è¦é‡æ–°ç»˜åˆ¶çš„æ—¶å€™ï¼Œéƒ½ä¼šå‘å‡ºä¸€ä¸ªç›¸åº”çš„äº‹ä»¶ã€‚ä¸€äº›äº‹ä»¶åœ¨å¯¹ç”¨æˆ·æ“ä½œåšå‡ºå“åº”æ—¶å‘å‡ºï¼Œå¦‚é”®ç›˜äº‹ä»¶ç­‰ï¼›å¦ä¸€äº›äº‹ä»¶åˆ™æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨å‘å‡ºï¼Œå¦‚è®¡æ—¶å™¨äº‹ä»¶ã€‚ äº‹ä»¶å’Œä¿¡å·æ§½çš„åŒºåˆ« ä¿¡å·æ˜¯ç”±å…·ä½“å¯¹è±¡å‘å‡ºï¼Œç„¶åé©¬ä¸Šäº¤ç»™connectå‡½æ•°è¿æ¥çš„æ§½è¿›è¡Œå¤„ç†ï¼Œå¦‚æœå¤„ç†è¿‡ç¨‹ä¸­äº§ç”Ÿäº†æ–°çš„ä¿¡å·ï¼Œå°†ä¼šç»§ç»­æ‰§è¡Œæ–°çš„ä¿¡å·ï¼Œä¸€ç›´è¿™æ ·é€’å½’è¿›è¡Œä¸‹å»ã€‚è€Œäº‹ä»¶ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—å¯¹å‘å‡ºçš„æ‰€æœ‰äº‹ä»¶è¿›è¡Œç»´æŠ¤ï¼Œå½“æ–°çš„äº‹ä»¶äº§ç”Ÿæ—¶ä¼šè¢«åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚ åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç°ï¼Œåˆšå¯åŠ¨æ—¶å¹¶ä¸ä¼šæ˜¾ç¤ºä»»ä½•å†…å®¹ï¼Œåªæœ‰åœ¨ç‚¹å‡»ä¸€æ¬¡åï¼Œå¹³é¢æ‰ä¼šæ˜¾ç¤ºä¿¡æ¯ã€‚è¿™æ˜¯å› ä¸ºQWidgetä¸­æœ‰ä¸€ä¸ªmouseTrackingå±æ€§ï¼Œè¯¥å±æ€§ç”¨äºè®¾ç½®æ˜¯å¦è¿½è¸ªé¼ æ ‡ã€‚åªæœ‰é¼ æ ‡è¢«è¿½è¸ªæ—¶ï¼ŒmouseMoveEvent()æ‰ä¼šå‘å‡ºã€‚å¦‚æœmouseTrackingæ˜¯ falseï¼ˆé»˜è®¤å³æ˜¯ï¼‰ï¼Œç»„ä»¶åœ¨è‡³å°‘ä¸€æ¬¡é¼ æ ‡ç‚¹å‡»ä¹‹åï¼Œæ‰èƒ½å¤Ÿè¢«è¿½è¸ªï¼Œä¹Ÿå°±æ˜¯èƒ½å¤Ÿå‘å‡ºmouseMoveEvent()äº‹ä»¶ã€‚å¦‚æœmouseTrackingä¸º trueï¼Œåˆ™mouseMoveEvent()ç›´æ¥å¯ä»¥è¢«å‘å‡ºã€‚çŸ¥é“äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨main()å‡½æ•°ä¸­ç›´æ¥è®¾ç½®ä¸‹ï¼š 12345EventLabel *label = new EventLabel;label-&gt;setWindowTitle(&quot;MouseEvent Demo&quot;);label-&gt;resize(300, 200);label-&gt;setMouseTracking(true);label-&gt;show(); æ˜¾ç¤ºæ•ˆæœ äº‹ä»¶çš„æ¥å—ä¸å¿½ç•¥12345678910111213141516//custombutton.h#include &lt;QDebug&gt;#include &lt;QMouseEvent&gt;#include &lt;QApplication&gt;#include &lt;QPushButton&gt;class CustomButton : public QPushButton&#123; Q_OBJECTprivate: void onButtonClicked();public: CustomButton(QWidget *parent = 0);&#125;; 123456789101112//custombutton.cpp#include &quot;custombutton.h&quot;CustomButton::CustomButton(QWidget *parent) : QPushButton(parent)&#123; connect(this, &amp;CustomButton::clicked, this, &amp;CustomButton::onButtonClicked);&#125;void CustomButton::onButtonClicked()&#123; qDebug() &lt;&lt; &quot;You clicked this!&quot;;&#125; 123456789101112//main02.cpp#include &quot;custombutton.h&quot;int main(int argc, char *argv[])&#123; QApplication a(argc, argv); CustomButton btn; btn.setText(&quot;This is a Button!&quot;); btn.show(); return a.exec();&#125; ä»¥ä¸Šä»£ç è¿è¡Œç»“æœå°±æ˜¯ç‚¹å‡»æŒ‰é’®ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºï¼šâ€You clicked this!â€ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨CustomButtonç±»ä¸­å†æ·»åŠ ä¸€ä¸ªäº‹ä»¶å‡½æ•°ï¼š 123//custombutton.hprotected: void mousePressEvent(QMouseEvent *event); 123456789101112//custombutton.cppvoid CustomButton::mousePressEvent(QMouseEvent *event)&#123; if (event-&gt;button() == Qt::LeftButton) &#123; qDebug() &lt;&lt; &quot;Left&quot;; &#125; else &#123; QPushButton::mousePressEvent(event); &#125;&#125; è¿™æ—¶è¿è¡Œç»“æœä¸ºç‚¹å‡»æŒ‰é”®è¾“å‡ºâ€Leftâ€ã€‚è€Œæ²¡æœ‰å†è¾“å‡ºâ€You clicked this!â€ã€‚è¯´æ˜æˆ‘ä»¬æŠŠçˆ¶ç±»çš„å®ç°è¦†ç›–äº†ã€‚å½“é‡å†™äº‹ä»¶å›è°ƒå‡½æ•°æ—¶ï¼Œæ—¶åˆ»æ³¨æ„æ˜¯å¦éœ€è¦é€šè¿‡è°ƒç”¨çˆ¶ç±»çš„åŒåå‡½æ•°æ¥ç¡®ä¿åŸæœ‰å®ç°ä»èƒ½è¿›è¡Œï¼ã€‚è¿™ä¸€å®šç¨‹åº¦ä¸Šè¯´ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¿½ç•¥äº†çˆ¶ç±»çš„äº‹ä»¶ã€‚ é€šè¿‡è°ƒç”¨çˆ¶ç±»çš„åŒåå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Qt çš„äº‹ä»¶ä¼ é€’çœ‹æˆé“¾çŠ¶ï¼šå¦‚æœå­ç±»æ²¡æœ‰å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä¼šç»§ç»­å‘å…¶çˆ¶ç±»ä¼ é€’ã€‚Qt çš„äº‹ä»¶å¯¹è±¡æœ‰ä¸¤ä¸ªå‡½æ•°ï¼šaccept()å’Œignore()ã€‚æ­£å¦‚å®ƒä»¬çš„åå­—ä¸€æ ·ï¼Œå‰è€…ç”¨æ¥å‘Šè¯‰ Qtï¼Œè¿™ä¸ªç±»çš„äº‹ä»¶å¤„ç†å‡½æ•°æƒ³è¦å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼›åè€…åˆ™å‘Šè¯‰ Qtï¼Œè¿™ä¸ªç±»çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸æƒ³è¦å¤„ç†è¿™ä¸ªäº‹ä»¶ã€‚åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨isAccepted()æ¥æŸ¥è¯¢è¿™ä¸ªäº‹ä»¶æ˜¯ä¸æ˜¯å·²ç»è¢«æ¥æ”¶äº†ã€‚å…·ä½“æ¥è¯´ï¼šå¦‚æœä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°è°ƒç”¨äº†ä¸€ä¸ªäº‹ä»¶å¯¹è±¡çš„accept()å‡½æ•°ï¼Œè¿™ä¸ªäº‹ä»¶å°±ä¸ä¼šè¢«ç»§ç»­ä¼ æ’­ç»™å…¶çˆ¶ç»„ä»¶ï¼›å¦‚æœå®ƒè°ƒç”¨äº†äº‹ä»¶çš„ignore()å‡½æ•°ï¼ŒQt ä¼šä»å…¶çˆ¶ç»„ä»¶ä¸­å¯»æ‰¾å¦å¤–çš„æ¥å—è€…ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677//custombutton01.h#include &lt;QDebug&gt;#include &lt;QVBoxLayout&gt;#include &lt;QMainWindow&gt;#include &lt;QMouseEvent&gt;#include &lt;QPushButton&gt;#include &lt;QApplication&gt;class CustomButton : public QPushButton&#123; Q_OBJECTpublic: CustomButton(QWidget *parent) : QPushButton(parent) &#123; &#125;protected: void mousePressEvent(QMouseEvent *event) &#123; qDebug() &lt;&lt; &quot;CustomButton&quot;; &#125;&#125;;class CustomButtonEx : public CustomButton&#123; Q_OBJECTpublic: CustomButtonEx(QWidget *parent) : CustomButton(parent) &#123; &#125;protected: void mousePressEvent(QMouseEvent *event) &#123; qDebug() &lt;&lt; &quot;CustomButtonEx&quot;; &#125;&#125;;class CustomWidget : public QWidget&#123; Q_OBJECTpublic: CustomWidget(QWidget *parent) : QWidget(parent) &#123; &#125;protected: void mousePressEvent(QMouseEvent *event) &#123; qDebug() &lt;&lt; &quot;CustomWidget&quot;; &#125;&#125;;class MainWindow : public QMainWindow&#123; Q_OBJECTpublic: MainWindow(QWidget *parent = 0) : QMainWindow(parent) &#123; CustomWidget *widget = new CustomWidget(this); CustomButton *cbex = new CustomButton(widget); cbex-&gt;setText(tr(&quot;CustomButton&quot;)); CustomButtonEx *cb = new CustomButtonEx(widget); cb-&gt;setText(tr(&quot;CustomButtonEx&quot;)); QVBoxLayout *widgetLayout = new QVBoxLayout(widget); widgetLayout-&gt;addWidget(cbex); widgetLayout-&gt;addWidget(cb); this-&gt;setCentralWidget(widget); &#125;protected: void mousePressEvent(QMouseEvent *event) &#123; qDebug() &lt;&lt; &quot;MainWindow&quot;; &#125;&#125;; 12345678910//mai03.cpp#include &quot;custombutton01.h&quot;int main(int argc, char *argv[])&#123; QApplication app(argc, argv); MainWindow win; win.show(); return app.exec();&#125; è¿™æ®µä»£ç åœ¨ä¸€ä¸ªMainWindowä¸­æ·»åŠ äº†ä¸€ä¸ªCustomWidgetï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªæŒ‰é’®å¯¹è±¡ï¼šCustomButtonå’ŒCustomButtonExã€‚æ¯ä¸€ä¸ªç±»éƒ½é‡å†™äº†mousePressEvent()å‡½æ•°ã€‚ è¿è¡Œç¨‹åºç‚¹å‡» CustomButtonExï¼Œç»“æœæ˜¯ 1CustomButtonEx å› ä¸ºæˆ‘ä»¬é‡å†™äº†mousePressEvent()ï¼Œæ‰€ä»¥è°ƒç”¨å­ç±»è‡ªå·±çš„å‡½æ•°ï¼Œå¦‚æœåœ¨CustomButtonExçš„mousePressEvent()ç¬¬ä¸€è¡Œå¢åŠ ä¸€å¥event-&gt;accept()ï¼Œé‡æ–°è¿è¡Œï¼Œå‘ç°ç»“æœä¸å˜ã€‚æ­£å¦‚æˆ‘ä»¬å‰é¢æ‰€è¯´ï¼ŒQEvent é»˜è®¤æ˜¯acceptçš„ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ç„¶åæˆ‘ä»¬å°†CustomButtonExçš„event-&gt;accept()æ”¹æˆevent-&gt;ignore()ã€‚è¿™æ¬¡è¿è¡Œç»“æœæ˜¯ 12CustomButtonExCustomWidget ignore()è¯´æ˜æˆ‘ä»¬æƒ³è®©äº‹ä»¶ç»§ç»­ä¼ æ’­ï¼Œäºæ˜¯CustomButtonExçš„çˆ¶ç»„ä»¶CustomWidgetä¹Ÿæ”¶åˆ°äº†è¿™ä¸ªäº‹ä»¶ï¼Œæ‰€ä»¥è¾“å‡ºäº†è‡ªå·±çš„ç»“æœã€‚ åŒç†ï¼ŒCustomWidgetåˆæ²¡æœ‰è°ƒç”¨çˆ¶ç±»å‡½æ•°æˆ–è€…æ˜¾å¼è®¾ç½®accept()æˆ–ignore()ï¼Œæ‰€ä»¥äº‹ä»¶ä¼ æ’­å°±æ­¤æ‰“ä½ã€‚ è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒCustomButtonExçš„äº‹ä»¶ä¼ æ’­ç»™äº†çˆ¶ç»„ä»¶CustomWidgetï¼Œè€Œä¸æ˜¯å®ƒçš„çˆ¶ç±»CustomButtonã€‚äº‹ä»¶çš„ä¼ æ’­æ˜¯åœ¨ç»„ä»¶å±‚æ¬¡ä¸Šé¢çš„ï¼Œè€Œä¸æ˜¯ä¾é ç±»ç»§æ‰¿æœºåˆ¶ã€‚ åœ¨ä¸€ä¸ªç‰¹æ®Šçš„æƒ…å½¢ä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨accept()å’Œignore()å‡½æ•°ï¼Œé‚£å°±æ˜¯çª—å£å…³é—­çš„äº‹ä»¶ã€‚å¯¹äºçª—å£å…³é—­QCloseEventäº‹ä»¶ï¼Œè°ƒç”¨accept()æ„å‘³ç€ Qt ä¼šåœæ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œçª—å£å…³é—­ï¼›è°ƒç”¨ignore()åˆ™æ„å‘³ç€äº‹ä»¶ç»§ç»­ä¼ æ’­ï¼Œå³é˜»æ­¢çª—å£å…³é—­ã€‚å›åˆ°æˆ‘ä»¬å‰é¢å†™çš„ç®€å•çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚ event() å‡½æ•°äº‹ä»¶å¯¹è±¡åˆ›å»ºå®Œæ¯•åï¼ŒQt å°†è¿™ä¸ªäº‹ä»¶å¯¹è±¡ä¼ é€’ç»™QObjectçš„event()å‡½æ•°ã€‚event()å‡½æ•°å¹¶ä¸ç›´æ¥å¤„ç†äº‹ä»¶ï¼Œè€Œæ˜¯å°†è¿™äº›äº‹ä»¶å¯¹è±¡æŒ‰ç…§å®ƒä»¬ä¸åŒçš„ç±»å‹ï¼Œåˆ†å‘ç»™ä¸åŒçš„äº‹ä»¶å¤„ç†å™¨ï¼ˆevent handlerï¼‰ã€‚ å¦‚ä¸Šæ‰€è¿°ï¼Œevent()å‡½æ•°ä¸»è¦ç”¨äºäº‹ä»¶çš„åˆ†å‘ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ å¸Œæœ›åœ¨äº‹ä»¶åˆ†å‘ä¹‹å‰åšä¸€äº›æ“ä½œï¼Œå°±å¯ä»¥é‡å†™è¿™ä¸ªevent()å‡½æ•°äº†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸€ä¸ª QWidget ç»„ä»¶ä¸­ç›‘å¬ tab é”®çš„æŒ‰ä¸‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç»§æ‰¿ QWidgetï¼Œå¹¶é‡å†™å®ƒçš„event()å‡½æ•°ï¼Œæ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼š 12345678910111213bool CustomWidget::event(QEvent *e)&#123; if (e-&gt;type() == QEvent::KeyPress) &#123; QKeyEvent *keyEvent = static_cast&lt;QKeyEvent *&gt;(e); if (keyEvent-&gt;key() == Qt::Key_Tab) &#123; qDebug() &lt;&lt; &quot;You press tab.&quot;; return true; &#125; &#125; return QWidget::event(e);&#125; CustomWidgetæ˜¯ä¸€ä¸ªæ™®é€šçš„QWidgetå­ç±»ã€‚æˆ‘ä»¬é‡å†™äº†å®ƒçš„event()å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªQEventå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œä¹Ÿå°±æ˜¯éœ€è¦è½¬å‘çš„äº‹ä»¶å¯¹è±¡ã€‚å‡½æ•°è¿”å›å€¼æ˜¯ bool ç±»å‹ã€‚å¦‚æœä¼ å…¥çš„äº‹ä»¶å·²è¢«è¯†åˆ«å¹¶ä¸”å¤„ç†ï¼Œåˆ™éœ€è¦è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚å¦‚æœè¿”å›å€¼æ˜¯ trueï¼Œå¹¶ä¸”ï¼Œè¯¥äº‹ä»¶å¯¹è±¡è®¾ç½®äº†accept()ï¼Œé‚£ä¹ˆ Qt ä¼šè®¤ä¸ºè¿™ä¸ªäº‹ä»¶å·²ç»å¤„ç†å®Œæ¯•ï¼Œä¸ä¼šå†å°†è¿™ä¸ªäº‹ä»¶å‘é€ç»™å…¶å®ƒå¯¹è±¡ï¼Œè€Œæ˜¯ä¼šç»§ç»­å¤„ç†äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€äº‹ä»¶ã€‚æ³¨æ„ï¼Œåœ¨event()å‡½æ•°ä¸­ï¼Œè°ƒç”¨äº‹ä»¶å¯¹è±¡çš„accept()å’Œignore()å‡½æ•°æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼Œä¸ä¼šå½±å“åˆ°äº‹ä»¶çš„ä¼ æ’­ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨QEvent::type()å‡½æ•°å¯ä»¥æ£€æŸ¥äº‹ä»¶çš„å®é™…ç±»å‹ï¼Œå…¶è¿”å›å€¼æ˜¯QEvent::Typeç±»å‹çš„æšä¸¾ã€‚æˆ‘ä»¬å¤„ç†è¿‡è‡ªå·±æ„Ÿå…´è¶£çš„äº‹ä»¶ä¹‹åï¼Œå¯ä»¥ç›´æ¥è¿”å› trueï¼Œè¡¨ç¤ºæˆ‘ä»¬å·²ç»å¯¹æ­¤äº‹ä»¶è¿›è¡Œäº†å¤„ç†ï¼›å¯¹äºå…¶å®ƒæˆ‘ä»¬ä¸å…³å¿ƒçš„äº‹ä»¶ï¼Œåˆ™éœ€è¦è°ƒç”¨çˆ¶ç±»çš„event()å‡½æ•°ç»§ç»­è½¬å‘ï¼Œå¦åˆ™è¿™ä¸ªç»„ä»¶å°±åªèƒ½å¤„ç†æˆ‘ä»¬å®šä¹‰çš„äº‹ä»¶äº†ã€‚ä¸ºäº†æµ‹è¯•è¿™ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä¸‹é¢çš„ä»£ç ï¼š 1234567891011bool CustomTextEdit::event(QEvent *e)&#123; if (e-&gt;type() == QEvent::KeyPress) &#123; QKeyEvent *keyEvent = static_cast&lt;QKeyEvent *&gt;(e); if (keyEvent-&gt;key() == Qt::Key_Tab) &#123; qDebug() &lt;&lt; &quot;You press tab.&quot;; return true; &#125; &#125; return false;&#125; CustomTextEditæ˜¯QTextEditçš„ä¸€ä¸ªå­ç±»ã€‚æˆ‘ä»¬é‡å†™äº†å…¶event()å‡½æ•°ï¼Œå´æ²¡æœ‰è°ƒç”¨çˆ¶ç±»çš„åŒåå‡½æ•°ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å°±åªèƒ½å¤„ç† Tab é”®ï¼Œå†ä¹Ÿæ— æ³•è¾“å…¥ä»»ä½•æ–‡æœ¬ï¼Œä¹Ÿä¸èƒ½å“åº”å…¶å®ƒäº‹ä»¶ï¼Œæ¯”å¦‚é¼ æ ‡ç‚¹å‡»ä¹‹åä¹Ÿä¸ä¼šæœ‰å…‰æ ‡å‡ºç°ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åªå¤„ç†çš„KeyPressç±»å‹çš„äº‹ä»¶ï¼Œå¹¶ä¸”å¦‚æœä¸æ˜¯KeyPressäº‹ä»¶ï¼Œåˆ™ç›´æ¥è¿”å› falseï¼Œé¼ æ ‡äº‹ä»¶æ ¹æœ¬ä¸ä¼šè¢«è½¬å‘ï¼Œä¹Ÿå°±æ²¡æœ‰äº†é¼ æ ‡äº‹ä»¶ã€‚ äº‹ä»¶è¿‡æ»¤å™¨æœ‰æ—¶å€™ï¼Œå¯¹è±¡éœ€è¦æŸ¥çœ‹ã€ç”šè‡³è¦æ‹¦æˆªå‘é€åˆ°å¦å¤–å¯¹è±¡çš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œå¯¹è¯æ¡†å¯èƒ½æƒ³è¦æ‹¦æˆªæŒ‰é”®äº‹ä»¶ï¼Œä¸è®©åˆ«çš„ç»„ä»¶æ¥æ”¶åˆ°ï¼›æˆ–è€…è¦ä¿®æ”¹å›è½¦é”®çš„é»˜è®¤å¤„ç†ã€‚ é€šè¿‡å‰é¢çš„ç« èŠ‚ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼ŒQt åˆ›å»ºäº†QEventäº‹ä»¶å¯¹è±¡ä¹‹åï¼Œä¼šè°ƒç”¨QObjectçš„event()å‡½æ•°å¤„ç†äº‹ä»¶çš„åˆ†å‘ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨event()å‡½æ•°ä¸­å®ç°æ‹¦æˆªçš„æ“ä½œã€‚ç”±äºevent()å‡½æ•°æ˜¯ protected çš„ï¼Œå› æ­¤ï¼Œéœ€è¦ç»§æ‰¿å·²æœ‰ç±»ã€‚å¦‚æœç»„ä»¶å¾ˆå¤šï¼Œå°±éœ€è¦é‡å†™å¾ˆå¤šä¸ªevent()å‡½æ•°ã€‚è¿™å½“ç„¶ç›¸å½“éº»çƒ¦ï¼Œæ›´ä¸ç”¨è¯´é‡å†™event()å‡½æ•°è¿˜å¾—å°å¿ƒä¸€å †é—®é¢˜ã€‚å¥½åœ¨ Qt æä¾›äº†å¦å¤–ä¸€ç§æœºåˆ¶æ¥è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼šäº‹ä»¶è¿‡æ»¤å™¨ã€‚ QObjectæœ‰ä¸€ä¸ªeventFilter()å‡½æ•°ï¼Œç”¨äºå»ºç«‹äº‹ä»¶è¿‡æ»¤å™¨ã€‚è¿™ä¸ªå‡½æ•°çš„ç­¾åå¦‚ä¸‹ï¼š è¿™ä¸ªå‡½æ•°æ­£å¦‚å…¶åå­—æ˜¾ç¤ºçš„é‚£æ ·ï¼Œæ˜¯ä¸€ä¸ªâ€œäº‹ä»¶è¿‡æ»¤å™¨â€ã€‚æ‰€è°“äº‹ä»¶è¿‡æ»¤å™¨ï¼Œå¯ä»¥ç†è§£æˆä¸€ç§è¿‡æ»¤ä»£ç ã€‚æƒ³æƒ³åšåŒ–å­¦å®éªŒæ—¶ç”¨åˆ°çš„è¿‡æ»¤å™¨ï¼Œå¯ä»¥å°†æ‚è´¨ç•™åˆ°æ»¤çº¸ä¸Šï¼Œè®©è¿‡æ»¤åçš„æ¶²ä½“æºœèµ°ã€‚äº‹ä»¶è¿‡æ»¤å™¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼šå®ƒä¼šæ£€æŸ¥æ¥æ”¶åˆ°çš„äº‹ä»¶ã€‚å¦‚æœè¿™ä¸ªäº‹ä»¶æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç±»å‹ï¼Œå°±è¿›è¡Œæˆ‘ä»¬è‡ªå·±çš„å¤„ç†ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±ç»§ç»­è½¬å‘ã€‚è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª bool ç±»å‹ï¼Œå¦‚æœä½ æƒ³å°†å‚æ•° event è¿‡æ»¤å‡ºæ¥ï¼Œæ¯”å¦‚ï¼Œä¸æƒ³è®©å®ƒç»§ç»­è½¬å‘ï¼Œå°±è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚äº‹ä»¶è¿‡æ»¤å™¨çš„è°ƒç”¨æ—¶é—´æ˜¯ç›®æ ‡å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å‚æ•°é‡Œé¢çš„watchedå¯¹è±¡ï¼‰æ¥æ”¶åˆ°äº‹ä»¶å¯¹è±¡ä¹‹å‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ åœ¨äº‹ä»¶è¿‡æ»¤å™¨ä¸­åœæ­¢äº†æŸä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆï¼Œwatchedå¯¹è±¡ä»¥åŠä»¥åæ‰€æœ‰çš„äº‹ä»¶è¿‡æ»¤å™¨æ ¹æœ¬ä¸ä¼šçŸ¥é“è¿™ä¹ˆä¸€ä¸ªäº‹ä»¶ã€‚ 1234567891011121314151617181920212223242526272829303132class MainWindow : public QMainWindow &#123; public: MainWindow(); protected: bool eventFilter(QObject *obj, QEvent *event); private: QTextEdit *textEdit; &#125;; MainWindow::MainWindow() &#123; textEdit = new QTextEdit; setCentralWidget(textEdit); textEdit-&gt;installEventFilter(this); &#125; bool MainWindow::eventFilter(QObject *obj, QEvent *event) &#123; if (obj == textEdit) &#123; if (event-&gt;type() == QEvent::KeyPress) &#123; QKeyEvent *keyEvent = static_cast&lt;QKeyEvent *&gt;(event); qDebug() &lt;&lt; &quot;Ate key press&quot; &lt;&lt; keyEvent-&gt;key(); return true; &#125; else &#123; return false; &#125; &#125; else &#123; // pass the event on to the parent class return QMainWindow::eventFilter(obj, event); &#125; &#125; MainWindowæ˜¯æˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªç±»ã€‚æˆ‘ä»¬é‡å†™äº†å®ƒçš„eventFilter()å‡½æ•°ã€‚ä¸ºäº†è¿‡æ»¤ç‰¹å®šç»„ä»¶ä¸Šçš„äº‹ä»¶ï¼Œé¦–å…ˆéœ€è¦åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç»„ä»¶ï¼Œç„¶ååˆ¤æ–­è¿™ä¸ªäº‹ä»¶çš„ç±»å‹ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸æƒ³è®©textEditç»„ä»¶å¤„ç†é”®ç›˜æŒ‰ä¸‹çš„äº‹ä»¶ã€‚æ‰€ä»¥ï¼Œé¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°è¿™ä¸ªç»„ä»¶ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶æ˜¯é”®ç›˜äº‹ä»¶ï¼Œåˆ™ç›´æ¥è¿”å› trueï¼Œä¹Ÿå°±æ˜¯è¿‡æ»¤æ‰äº†è¿™ä¸ªäº‹ä»¶ï¼Œå…¶ä»–äº‹ä»¶è¿˜æ˜¯è¦ç»§ç»­å¤„ç†ï¼Œæ‰€ä»¥è¿”å› falseã€‚å¯¹äºå…¶å®ƒçš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¹¶ä¸ä¿è¯æ˜¯ä¸æ˜¯è¿˜æœ‰è¿‡æ»¤å™¨ï¼Œäºæ˜¯æœ€ä¿é™©çš„åŠæ³•æ˜¯è°ƒç”¨çˆ¶ç±»çš„å‡½æ•°ã€‚ eventFilter()å‡½æ•°ç›¸å½“äºåˆ›å»ºäº†è¿‡æ»¤å™¨ï¼Œç„¶åæˆ‘ä»¬éœ€è¦å®‰è£…è¿™ä¸ªè¿‡æ»¤å™¨ã€‚å®‰è£…è¿‡æ»¤å™¨éœ€è¦è°ƒç”¨QObject::installEventFilter()å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„ç­¾åå¦‚ä¸‹ï¼š 1void QObject::installEventFilter ( QObject * filterObj ) è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªQObject *ç±»å‹çš„å‚æ•°ã€‚è®°å¾—åˆšåˆšæˆ‘ä»¬è¯´çš„ï¼ŒeventFilter()å‡½æ•°æ˜¯QObjectçš„ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œå› æ­¤ï¼Œä»»æ„QObjectéƒ½å¯ä»¥ä½œä¸ºäº‹ä»¶è¿‡æ»¤å™¨ï¼ˆé—®é¢˜åœ¨äºï¼Œå¦‚æœä½ æ²¡æœ‰é‡å†™eventFilter()å‡½æ•°ï¼Œè¿™ä¸ªäº‹ä»¶è¿‡æ»¤å™¨æ˜¯æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ï¼Œå› ä¸ºé»˜è®¤ä»€ä¹ˆéƒ½ä¸ä¼šè¿‡æ»¤ï¼‰ã€‚å·²ç»å­˜åœ¨çš„è¿‡æ»¤å™¨åˆ™å¯ä»¥é€šè¿‡QObject::removeEventFilter()å‡½æ•°ç§»é™¤ã€‚ æˆ‘ä»¬å¯ä»¥å‘ä¸€ä¸ªå¯¹è±¡ä¸Šé¢å®‰è£…å¤šä¸ªäº‹ä»¶å¤„ç†å™¨ï¼Œåªè¦è°ƒç”¨å¤šæ¬¡installEventFilter()å‡½æ•°ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å­˜åœ¨å¤šä¸ªäº‹ä»¶è¿‡æ»¤å™¨ï¼Œé‚£ä¹ˆï¼Œæœ€åä¸€ä¸ªå®‰è£…çš„ä¼šç¬¬ä¸€ä¸ªæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åè¿›å…ˆæ‰§è¡Œçš„é¡ºåºã€‚ è¿˜è®°å¾—æˆ‘ä»¬å‰é¢çš„é‚£ä¸ªä¾‹å­å—ï¼Ÿæˆ‘ä»¬ä½¿ç”¨event()å‡½æ•°å¤„ç†äº† Tab é”®ï¼š 1234567891011bool CustomWidget::event(QEvent *e)&#123; if (e-&gt;type() == QEvent::KeyPress) &#123; QKeyEvent *keyEvent = static_cast&lt;QKeyEvent *&gt;(e); if (keyEvent-&gt;key() == Qt::Key_Tab) &#123; qDebug() &lt;&lt; &quot;You press tab.&quot;; return true; &#125; &#125; return QWidget::event(e);&#125; 12345678910111213bool FilterObject::eventFilter(QObject *object, QEvent *event)&#123; if (object == target &amp;&amp; event-&gt;type() == QEvent::KeyPress) &#123; QKeyEvent *keyEvent = static_cast&lt;QKeyEvent *&gt;(event); if (keyEvent-&gt;key() == Qt::Key_Tab) &#123; qDebug() &lt;&lt; &quot;You press tab.&quot;; return true; &#125; else &#123; return false; &#125; &#125; return false;&#125; äº‹ä»¶è¿‡æ»¤å™¨çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ•´ä¸ªåº”ç”¨ç¨‹åºæ·»åŠ ä¸€ä¸ªäº‹ä»¶è¿‡æ»¤å™¨ã€‚è®°å¾—ï¼ŒinstallEventFilter()å‡½æ•°æ˜¯QObjectçš„å‡½æ•°ï¼ŒQApplicationæˆ–è€…QCoreApplicationå¯¹è±¡éƒ½æ˜¯QObjectçš„å­ç±»ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å‘QApplicationæˆ–è€…QCoreApplicationæ·»åŠ äº‹ä»¶è¿‡æ»¤å™¨ã€‚è¿™ç§å…¨å±€çš„äº‹ä»¶è¿‡æ»¤å™¨å°†ä¼šåœ¨æ‰€æœ‰å…¶å®ƒç‰¹æ€§å¯¹è±¡çš„äº‹ä»¶è¿‡æ»¤å™¨ä¹‹å‰è°ƒç”¨ã€‚å°½ç®¡å¾ˆå¼ºå¤§ï¼Œä½†è¿™ç§è¡Œä¸ºä¼šä¸¥é‡é™ä½æ•´ä¸ªåº”ç”¨ç¨‹åºçš„äº‹ä»¶åˆ†å‘æ•ˆç‡ã€‚å› æ­¤ï¼Œé™¤éæ˜¯ä¸å¾—ä¸ä½¿ç”¨çš„æƒ…å†µï¼Œå¦åˆ™çš„è¯æˆ‘ä»¬ä¸åº”è¯¥è¿™ä¹ˆåšã€‚ æ³¨æ„ï¼Œå¦‚æœä½ åœ¨äº‹ä»¶è¿‡æ»¤å™¨ä¸­ delete äº†æŸä¸ªæ¥æ”¶ç»„ä»¶ï¼ŒåŠ¡å¿…å°†å‡½æ•°è¿”å›å€¼è®¾ä¸º trueã€‚å¦åˆ™ï¼ŒQt è¿˜æ˜¯ä¼šå°†äº‹ä»¶åˆ†å‘ç»™è¿™ä¸ªæ¥æ”¶ç»„ä»¶ï¼Œä»è€Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚ äº‹ä»¶è¿‡æ»¤å™¨å’Œè¢«å®‰è£…è¿‡æ»¤å™¨çš„ç»„ä»¶å¿…é¡»åœ¨åŒä¸€çº¿ç¨‹ï¼Œå¦åˆ™ï¼Œè¿‡æ»¤å™¨å°†ä¸èµ·ä½œç”¨ã€‚å¦å¤–ï¼Œå¦‚æœåœ¨å®‰è£…è¿‡æ»¤å™¨ä¹‹åï¼Œè¿™ä¸¤ä¸ªç»„ä»¶åˆ°äº†ä¸åŒçš„çº¿ç¨‹ï¼Œé‚£ä¹ˆï¼Œåªæœ‰ç­‰åˆ°äºŒè€…é‡æ–°å›åˆ°åŒä¸€çº¿ç¨‹çš„æ—¶å€™è¿‡æ»¤å™¨æ‰ä¼šæœ‰æ•ˆã€‚ äº‹ä»¶è¿‡æ»¤å™¨å’Œå®‰è£…è¿‡æ»¤å™¨çš„ç»„ä»¶å¿…é¡»åœ¨åŒä¸€çº¿ç¨‹ã€‚Qt é‡Œé¢ï¼Œå¯¹è±¡åˆ›å»ºä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ moveToThread() å‡½æ•°å°†ä¸€ä¸ªå¯¹è±¡ç§»åŠ¨åˆ°å¦å¤–çš„çº¿ç¨‹ã€‚åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼ˆå½“ç„¶ï¼Œäº‹ä»¶è¿‡æ»¤å™¨å¿…é¡»åœ¨åŒä¸€çº¿ç¨‹æ—¶æ‰èƒ½è¢«æ­£ç¡®å®‰è£…ï¼Œè¿™æ˜¯ç¬¬ä¸€å¥è¯è¯´æ˜çš„ï¼‰ï¼Œåœ¨å®ƒä»¬åˆ†å±åœ¨ä¸åŒçº¿ç¨‹æ—¶ï¼Œäº‹ä»¶è¿‡æ»¤å™¨ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œåªç”¨å½“å®ƒä»¬é‡æ–°å›åˆ°åŒä¸€çº¿ç¨‹ï¼ˆä½¿ç”¨ moveToThread() æˆ–è€…æ˜¯çº¿ç¨‹è‡ªç„¶ç»“æŸï¼‰æ—¶ï¼Œè¿‡æ»¤å™¨æ‰èƒ½é‡æ–°å·¥ä½œ","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-scp è¿œç¨‹æ‹·è´æ–‡ä»¶","slug":"æ¯å¤©å­¦å‘½ä»¤-scpè¿œç¨‹æ‹·è´æ–‡ä»¶","date":"2021-08-06T12:05:56.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2021/08/06/æ¯å¤©å­¦å‘½ä»¤-scpè¿œç¨‹æ‹·è´æ–‡ä»¶/","link":"","permalink":"http://example.com/2021/08/06/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-scp%E8%BF%9C%E7%A8%8B%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6/","excerpt":"","text":"çœ‹åˆ°åŒäº‹è¦å®‰è£…è‡ªå·±ç¼–è¯‘ä¸€å¤©çš„åº“ï¼Œæœ¬æƒ³ä¼ æˆä¸€ä¸‹â€œè¸©å‘ç»éªŒâ€ï¼Œç»“æœä»–ç”¨scpå‘½ä»¤ç›´æ¥ä»å·²ç»å®‰è£…å¥½çš„ç”µè„‘é‡Œå¤åˆ¶äº†ä¸€ä»½ã€‚å¿ƒé‡Œä¸€ä¸‡åª XXX åœ¨å¥”è…¾ã€‚ æ—©çŸ¥é“å…ˆå­¦å­¦è¿™ä¸ªå‘½ä»¤äº†ã€‚ å¯é€‰å‚æ•° å‚æ•° åŠŸèƒ½ -1 å¼ºåˆ¶ scp å‘½ä»¤ä½¿ç”¨åè®® ssh1 -2 å¼ºåˆ¶ scp å‘½ä»¤ä½¿ç”¨åè®® ssh2 -4 å¼ºåˆ¶ scp å‘½ä»¤ä½¿ç”¨åè®® ssh2 -6 å¼ºåˆ¶ scp å‘½ä»¤åªä½¿ç”¨ IPv6 å¯»å€ -B ä½¿ç”¨æ‰¹å¤„ç†æ¨¡å¼ï¼ˆä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¯¢é—®ä¼ è¾“å£ä»¤æˆ–çŸ­è¯­ï¼‰ -C å…è®¸å‹ç¼© -p ä¿ç•™åŸæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼Œè®¿é—®æ—¶é—´å’Œè®¿é—®æƒé™ã€‚ -q ä¸æ˜¾ç¤ºä¼ è¾“è¿›åº¦æ¡ -r é€’å½’å¤åˆ¶æ•´ä¸ªç›®å½• -v è¯¦ç»†æ–¹å¼æ˜¾ç¤ºè¾“å‡º -P æ³¨æ„æ˜¯å¤§å†™çš„ P, port æ˜¯æŒ‡å®šæ•°æ®ä¼ è¾“ç”¨åˆ°çš„ç«¯å£å· ä½¿ç”¨å®ä¾‹å¤åˆ¶æ–‡ä»¶ 12scp local_file rmot_usr@rmot_ip:rmot_folderscp /opt/soft/ root@192.168.120.204:/opt/soft/nginx-0.5.38.tar.gz","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-grep æ–‡æœ¬æœç´¢","slug":"æ¯å¤©å­¦å‘½ä»¤-grepæ–‡æœ¬æœç´¢","date":"2021-08-05T11:27:48.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2021/08/05/æ¯å¤©å­¦å‘½ä»¤-grepæ–‡æœ¬æœç´¢/","link":"","permalink":"http://example.com/2021/08/05/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-grep%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/","excerpt":"","text":"grepå…¨ç§°global search regular expression(RE) and print out the lineï¼Œå…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥ã€‚è¿™åå­—å°±æ€ªå“äººï¼Œå¦‚æœç†Ÿç»ƒæŒæ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œé…ä¸Šè¿™å‘½ä»¤ Linux é‡Œå¯ä»¥æ¨ªç€èµ°äº†ã€‚ è¿™ä¸ªå‘½ä»¤å‚æ•°å®åœ¨å¤ªå¤šï¼ŒåŠ ä¸Šæ­£åˆ™è¡¨è¾¾å¼ä¼°è®¡ä¸€å¼ çº¸ä¸å¤Ÿã€‚é‚£å°±ç›´æ¥ä¸Šå®ä¾‹å§ã€‚ ä½¿ç”¨å®ä¾‹åœ¨å½“å‰ç›®å½•ä¸­ï¼ŒæŸ¥æ‰¾åç¼€å¸¦æœ‰cppå­—æ ·çš„æ–‡ä¸­åŒ…å«testå­—ç¬¦ä¸²çš„æ–‡ä»¶ï¼Œå¹¶æ‰“å°æ‰€åœ¨è¡Œ 12grep test *cppgrep --colorauto test *cpp # ç”¨é¢œè‰²æ ‡è®° é€šè¿‡â€-vâ€å‚æ•°å¯ä»¥æ‰“å°å‡ºä¸ç¬¦åˆæ¡ä»¶è¡Œçš„å†…å®¹ã€‚ 1grep -v test *cpp ç³»ç»ŸæŠ¥è­¦æ˜¾ç¤ºäº†æ—¶é—´ï¼Œä½†æ˜¯æ—¥å¿—æ–‡ä»¶å¤ªå¤§æ— æ³•ç›´æ¥ cat æŸ¥çœ‹ã€‚(æŸ¥è¯¢å«æœ‰ç‰¹å®šæ–‡æœ¬çš„æ–‡ä»¶ï¼Œå¹¶æ‹¿åˆ°è¿™äº›æ–‡æœ¬æ‰€åœ¨çš„è¡Œ)ã€‚-n æˆ– --line-number å¯ä»¥æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å‰ï¼Œæ ‡ç¤ºå‡ºè¯¥è¡Œçš„åˆ—æ•°ç¼–å·ã€‚ 1grep -n &#x27;2019-10-24 00:01:11&#x27; *.log grep é™é»˜è¾“å‡ºï¼Œä¸ä¼šè¾“å‡ºä»»ä½•ä¿¡æ¯ï¼Œå¦‚æœå‘½ä»¤è¿è¡ŒæˆåŠŸè¿”å› 0ï¼Œå¤±è´¥åˆ™è¿”å›é 0 å€¼ã€‚ä¸€èˆ¬ç”¨äºæ¡ä»¶æµ‹è¯•ã€‚ 1grep -q &quot;test&quot; filename åœ¨å¤šçº§ç›®å½•ä¸­å¯¹æ–‡æœ¬è¿›è¡Œé€’å½’æœç´¢ 1grep &quot;text&quot; . -r -n é…åˆç®¡é“ï¼ŒæŸ¥æ‰¾æŒ‡å®šçš„è¿›ç¨‹ä¿¡æ¯ 1ps -ef | grep svn æŸ¥æ‰¾æŒ‡å®šçš„è¿›ç¨‹ä¸ªæ•°ï¼Œ-cè®¡æ•° 1ps -ef | grep svn -c å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼é€šé…ç¬¦| é€šé…ç¬¦ | åŠŸèƒ½ || :â€”-: | :â€”-: || c* | å°†åŒ¹é… 0 ä¸ªï¼ˆå³ç©ºç™½ï¼‰æˆ–å¤šä¸ªå­—ç¬¦ cï¼ˆc ä¸ºä»»ä¸€å­—ç¬¦ï¼‰ || . | å°†åŒ¹é…ä»»ä½•ä¸€ä¸ªå­—ç¬¦ï¼Œä¸”åªèƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ || [xyz] | åŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ || [^xyz] | åŒ¹é…é™¤æ–¹æ‹¬å·ä¸­å­—ç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦ || ^ | é”å®šè¡Œçš„å¼€å¤´ || $ | é”å®šè¡Œçš„ç»“å°¾ | åœ¨id.txtä¸­æ‰¾åˆ°æ‰€æœ‰ä»¥ 3207 å¼€å¤´çš„æ•°æ® 1grep ^3207 id.txt","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"Qt å¯¹è¯æ¡†","slug":"Qtå¯¹è¯æ¡†","date":"2021-08-05T02:11:33.000Z","updated":"2022-10-15T03:14:29.472Z","comments":true,"path":"2021/08/05/Qtå¯¹è¯æ¡†/","link":"","permalink":"http://example.com/2021/08/05/Qt%E5%AF%B9%E8%AF%9D%E6%A1%86/","excerpt":"","text":"æœ¬ç¯‡æ–‡ç« æ‰€æ¶‰åŠä»£ç ï¼Œå¯åœ¨æ­¤å¤„æŸ¥çœ‹ Qt ä¸­ä½¿ç”¨ QDialog ç±»å®ç°å¯¹è¯æ¡†ã€‚å°±åƒä¸»çª—å£ä¸€æ ·ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè®¾è®¡ä¸€ä¸ªç±»ç»§æ‰¿ QDialogã€‚QDialogï¼ˆåŠå…¶å­ç±»ï¼Œä»¥åŠæ‰€æœ‰ Qt::Dialog ç±»å‹çš„ç±»ï¼‰çš„å¯¹äºå…¶ parent æŒ‡é’ˆéƒ½æœ‰é¢å¤–çš„è§£é‡Šï¼š å¦‚æœ parent ä¸º NULLï¼Œåˆ™è¯¥å¯¹è¯æ¡†ä¼šä½œä¸ºä¸€ä¸ªé¡¶å±‚çª—å£ï¼Œå¦åˆ™åˆ™ä½œä¸ºå…¶çˆ¶ç»„ä»¶çš„å­å¯¹è¯æ¡†ï¼ˆæ­¤æ—¶ï¼Œå…¶é»˜è®¤å‡ºç°çš„ä½ç½®æ˜¯ parent çš„ä¸­å¿ƒï¼‰ã€‚ é¡¶å±‚çª—å£ä¸éé¡¶å±‚çª—å£çš„åŒºåˆ«åœ¨äºï¼Œé¡¶å±‚çª—å£åœ¨ä»»åŠ¡æ ä¼šæœ‰è‡ªå·±çš„ä½ç½®ï¼Œè€Œéé¡¶å±‚çª—å£åˆ™ä¼šå…±äº«å…¶çˆ¶ç»„ä»¶çš„ä½ç½®ã€‚ å¯¹è¯æ¡†åˆ†ä¸ºæ¨¡æ€å¯¹è¯æ¡†å’Œéæ¨¡æ€å¯¹è¯æ¡†ã€‚æ‰€è°“æ¨¡æ€å¯¹è¯æ¡†ï¼Œå°±æ˜¯ä¼šé˜»å¡åŒä¸€åº”ç”¨ç¨‹åºä¸­å…¶å®ƒçª—å£çš„è¾“å…¥ã€‚æ¨¡æ€å¯¹è¯æ¡†å¾ˆå¸¸è§ï¼Œæ¯”å¦‚â€œæ‰“å¼€æ–‡ä»¶â€åŠŸèƒ½ã€‚ä½ å¯ä»¥å°è¯•ä¸€ä¸‹è®°äº‹æœ¬çš„æ‰“å¼€æ–‡ä»¶ï¼Œå½“æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†å‡ºç°æ—¶ï¼Œæˆ‘ä»¬æ˜¯ä¸èƒ½å¯¹é™¤æ­¤å¯¹è¯æ¡†ä¹‹å¤–çš„çª—å£éƒ¨åˆ†è¿›è¡Œæ“ä½œçš„ã€‚ ä¸æ­¤ç›¸åçš„æ˜¯éæ¨¡æ€å¯¹è¯æ¡†ï¼Œä¾‹å¦‚æŸ¥æ‰¾å¯¹è¯æ¡†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ˜¾ç¤ºç€æŸ¥æ‰¾å¯¹è¯æ¡†çš„åŒæ—¶ï¼Œç»§ç»­å¯¹è®°äº‹æœ¬çš„å†…å®¹è¿›è¡Œç¼–è¾‘ã€‚ Qt æ”¯æŒæ¨¡æ€å¯¹è¯æ¡†å’Œéæ¨¡æ€å¯¹è¯æ¡†ã€‚å…¶ä¸­ï¼ŒQt æœ‰ä¸¤ç§çº§åˆ«çš„æ¨¡æ€å¯¹è¯æ¡†ï¼šåº”ç”¨ç¨‹åºçº§åˆ«çš„æ¨¡æ€å’Œçª—å£çº§åˆ«çš„æ¨¡æ€ï¼Œé»˜è®¤æ˜¯åº”ç”¨ç¨‹åºçº§åˆ«çš„æ¨¡æ€ã€‚åº”ç”¨ç¨‹åºçº§åˆ«çš„æ¨¡æ€æ˜¯æŒ‡ï¼Œå½“è¯¥ç§æ¨¡æ€çš„å¯¹è¯æ¡†å‡ºç°æ—¶ï¼Œç”¨æˆ·å¿…é¡»é¦–å…ˆå¯¹å¯¹è¯æ¡†è¿›è¡Œäº¤äº’ï¼Œç›´åˆ°å…³é—­å¯¹è¯æ¡†ï¼Œç„¶åæ‰èƒ½è®¿é—®ç¨‹åºä¸­å…¶ä»–çš„çª—å£ã€‚çª—å£çº§åˆ«çš„æ¨¡æ€æ˜¯æŒ‡ï¼Œè¯¥æ¨¡æ€ä»…ä»…é˜»å¡ä¸å¯¹è¯æ¡†å…³è”çš„çª—å£ï¼Œä½†æ˜¯ä¾ç„¶å…è®¸ç”¨æˆ·ä¸ç¨‹åºä¸­å…¶å®ƒçª—å£äº¤äº’ã€‚ æ¶ˆæ¯å¯¹è¯æ¡† QMessageBoxæ–‡ä»¶å¯¹è¯æ¡† QFileDialogâ€˜QTextEditâ€™ Does not name a typeéœ€è¦åŒ…å«å¤´æ–‡ä»¶ 1#include &lt;QTextEdit&gt; Qt éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶å®åœ¨å¤ªå¤šäº†ã€‚ å¯èƒ½æ·»åŠ äº†å¤´æ–‡ä»¶ä»ç„¶æŠ¥åŒæ ·çš„é”™ï¼Œæ²¡æœ‰æœç´¢åˆ°ç›¸å…³çš„è§£ç­”ã€‚ æˆ‘çš„åšæ³•æ˜¯ï¼š ç¡®ä¿åœ¨.proæ–‡ä»¶ä¸­åŠ å…¥QT += widgetså’ŒCONFIG += c++11 å°†åŒ…å«åº“æ–‡ä»¶è¯­å¥éƒ½æ”¾åˆ°å¤´æ–‡ä»¶.hä¸­","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"Git ä¸­æ·»åŠ  gitignore å¹¶æ›´æ–°è¿œç¨‹ä»“åº“","slug":"Gitä¸­æ·»åŠ gitignoreå¹¶æ›´æ–°è¿œç¨‹ä»“åº“","date":"2021-08-04T06:09:20.000Z","updated":"2022-10-15T03:14:29.225Z","comments":true,"path":"2021/08/04/Gitä¸­æ·»åŠ gitignoreå¹¶æ›´æ–°è¿œç¨‹ä»“åº“/","link":"","permalink":"http://example.com/2021/08/04/Git%E4%B8%AD%E6%B7%BB%E5%8A%A0gitignore%E5%B9%B6%E6%9B%B4%E6%96%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/","excerpt":"","text":"gitignore çš„ä½œç”¨åœ¨ä½¿ç”¨Gitç‰ˆæœ¬æ§åˆ¶æ—¶ï¼Œå¿…é¡»è¦ç”¨.gitignoreè¿™ä¸ªæ–‡ä»¶æ¥å‘Šè¯‰Gité‚£äº›æ–‡ä»¶æˆ–ç›®å½•ä¸éœ€è¦æ·»åŠ åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­ã€‚é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯ä¸éœ€è¦git pushåˆ°è¿œç¨‹ä»“åº“ã€‚ åœ¨å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¼€å‘ç›®å½•ä¸‹ä¼šæœ‰å„ç§æ ¼å¼çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ C è¯­è¨€é™¤äº†.cæºç ï¼Œè¿˜ä¼šæœ‰.oç›®æ ‡æ–‡ä»¶ï¼Œæ²¡æœ‰åç¼€çš„å¯æ‰§è¡Œç¨‹åºç­‰ç­‰ï¼Œå‡å¦‚ä½ è¦è¿›è¡Œæ·±åº¦å­¦ä¹ ç±»çš„å¼€å‘ï¼Œå¦‚å›¾åƒè¯†åˆ«ï¼Œéœ€è¦è®­ç»ƒå¤§é‡æ•°æ®ï¼Œå¦‚æœè¿™äº›è®­ç»ƒæ•°æ®ä¹Ÿåˆ°è·Ÿè¸ªç®¡ç†ï¼Œé‚£pushä¸€æ¬¡å°±å¯ä»¥ä¸‹ç­å›å®¶äº†ã€‚ ä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆè®©GitçŸ¥é“å“ªäº›æ–‡ä»¶éœ€è¦è·Ÿè¸ªï¼Œå“ªäº›æ–‡ä»¶ä¸éœ€è¦å‘¢ï¼Œè¿™æ—¶å€™.gitignoreæ–‡ä»¶å°±èµ·ä½œç”¨äº†ã€‚ å¸¸ç”¨è§„åˆ™ç®€å•ä»‹ç»ä¸€ä¸‹å¸¸ç”¨çš„è§„åˆ™ï¼Œè™½ç„¶åé¢æœ‰ç°æˆçš„æ¨¡æ¿ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯äº†è§£ä¸€ä¸‹å¸¸ç”¨è§„åˆ™ï¼Œèƒ½çœ‹å¾—æ‡‚.gitignoreé‡Œå†™äº†å•¥ã€‚ä¹Ÿæ–¹ä¾¿è‡ªå·±ç¼–å†™ä¸€äº›è§„åˆ™é€‚åº”è‡ªå·±çš„å·¥ä½œã€‚ 12345/test/ # è¿‡æ»¤æ•´ä¸ªtestæ–‡ä»¶å¤¹*.o # è¿‡æ»¤æ‰€æœ‰.oæ–‡ä»¶/test/hello.o # è¿‡æ»¤testæ–‡ä»¶å¤¹ä¸‹hello.oè¿™ä¸ªæ–‡ä»¶!src/ # ä¸è¿‡æ»¤srcè¿™ä¸ªæ–‡ä»¶å¤¹!*.c # ä¸è¿‡æ»¤.cæ–‡ä»¶ é€šè¿‡ gitignore æ–‡ä»¶æ›´æ–°è¿œç¨‹ä»“åº“ä¸Šé¢è¯´åˆ°æˆ‘ä»¬åœ¨ä¸åŒç¯å¢ƒä¸‹éœ€è¦åˆ¶å®šä¸åŒçš„è§„åˆ™ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦é‡æ–°å†™ä¸€éï¼Œåˆæˆ–è€…ä¸çŸ¥é“åˆ¶å®šä»€ä¹ˆæ ·çš„è§„åˆ™ï¼Œè¿˜æ˜¯æŒºéº»çƒ¦çš„ã€‚ é¦–å…ˆæ¨èä¸€ä¸ª.gitignoreæ¨¡æ¿ä»“åº“ï¼Œåœ¨å¹³æ—¶å·¥ä½œå­¦ä¹ ä¸­é‡åˆ°çš„å„ç§è¯­è¨€ç¯å¢ƒä¸‹çš„æ¨¡æ¿éƒ½èƒ½æ‰¾åˆ°ã€‚è¿™æ˜¯å¹¿å¤§å¼€å‘äººå‘˜æ€»ç»“çš„ä¸€äº›è§„åˆ™ã€‚ æœ€è¿‘åœ¨å­¦ä¹ Qtï¼Œåœ¨æ‰€æœ‰æ¨¡æ¿ä¸­æœç´¢å…³é”®å­—ï¼Œæ‰¾åˆ°äº†Qt.gitignoreè¿™ä¸ªæ¨¡æ¿æ‰“å¼€å¹¶å¤åˆ¶ï¼Œåœ¨è‡ªå·±æœ¬åœ°ä»“åº“é‡Œæ–°å»ºä¸€ä¸ª.gitignoreæ–‡ä»¶ï¼Œå°†å¤åˆ¶çš„å†…å®¹ç²˜è´´è¿›å»ã€‚ ç°åœ¨å°±è¦è§£å†³å¦‚ä½•æ›´æ–°è¿œç¨‹ä»“åº“çš„å†…å®¹ï¼Œå› ä¸ºæˆ‘åœ¨ä½¿ç”¨.gitignoreæ–‡ä»¶ä¹‹å‰å·²ç»å‘è¿œç¨‹pushè¿‡äº†ï¼Œç°åœ¨éœ€è¦åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ã€‚ 1git rm -r --cached . rmå°±æ˜¯Linuxä¸‹å¸¸ç”¨çš„åˆ é™¤å‘½ä»¤ï¼Œ-rè¡¨ç¤ºé€’å½’åˆ é™¤ï¼Œ--cachedè¡¨ç¤ºéœ€è¦åœ¨æœ¬åœ°ç«¯ï¼ˆå·¥ä½œåŒºï¼‰ä¿ç•™æ–‡ä»¶ï¼Œ.è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶ã€‚ 123git add . # é‡æ–°æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œç„¶åæäº¤ï¼Œæ¨é€git commit -m &quot;update&quot;git push","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"Qt æ·»åŠ èµ„æºæ–‡ä»¶","slug":"Qtæ·»åŠ èµ„æºæ–‡ä»¶","date":"2021-08-04T03:34:10.000Z","updated":"2022-10-15T03:14:29.500Z","comments":true,"path":"2021/08/04/Qtæ·»åŠ èµ„æºæ–‡ä»¶/","link":"","permalink":"http://example.com/2021/08/04/Qt%E6%B7%BB%E5%8A%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/","excerpt":"","text":"æœ¬æ–‡æ˜¯å­¦ä¹ ã€Qt å­¦ä¹ ä¹‹è·¯ã€‘çš„å­¦ä¹ ç¬”è®°ï¼Œæºç éåŸåˆ›ã€‚GithubåŒæ­¥æœ¬æ–‡æ›´æ”¹çš„ä»£ç ã€‚ åœ¨å»ºç«‹ Qt å­¦ä¹ ä»£ç ä»“æ—¶ï¼Œæ¨é€åˆ°è¿œç¨‹çš„ä»£ç æ¯”è¾ƒä¹±ï¼Œæ‰€ä»¥ç”¨gitignoreæ–‡ä»¶å±è”½äº†ä¸€äº›ã€‚ç›¸å…³æ–¹æ³•åœ¨è¿™é‡Œã€‚ èµ„æºæ–‡ä»¶Qt èµ„æºç³»ç»Ÿæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„èµ„æºæœºåˆ¶ï¼Œç”¨äºå°†ç¨‹åºè¿è¡Œæ—¶æ‰€éœ€è¦çš„èµ„æºä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨äºå¯æ‰§è¡Œæ–‡ä»¶å†…éƒ¨ã€‚å¦‚æœä½ çš„ç¨‹åºéœ€è¦åŠ è½½ç‰¹å®šçš„èµ„æºï¼ˆå›¾æ ‡ã€æ–‡æœ¬ç¿»è¯‘ç­‰ï¼‰ï¼Œé‚£ä¹ˆï¼Œå°†å…¶æ”¾ç½®åœ¨èµ„æºæ–‡ä»¶ä¸­ï¼Œå°±å†ä¹Ÿä¸éœ€è¦æ‹…å¿ƒè¿™äº›æ–‡ä»¶çš„ä¸¢å¤±ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ å°†èµ„æºä»¥èµ„æºæ–‡ä»¶å½¢å¼å­˜å‚¨ï¼Œå®ƒæ˜¯ä¼šç¼–è¯‘åˆ°å¯æ‰§è¡Œæ–‡ä»¶å†…éƒ¨ã€‚ ä½¿ç”¨ QtCreator çš„ç›¸å…³æ–¹æ³•ï¼Œè®²å¾—ä¹Ÿå¾ˆæ¸…æ¥šäº†ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚ ä¸ä½¿ç”¨ QtCreator æ·»åŠ èµ„æºæ–‡ä»¶åœ¨ä½¿ç”¨å‘½ä»¤è¡Œç¼–è¯‘è¿è¡Œæ—¶ï¼Œå¹¶ä¸èƒ½åƒåœ¨ QtCreator ä¸­ä¸€æ ·ï¼Œå¯ä»¥è‡ªåŠ¨çš„ç”Ÿæˆä¸€ä¸ª.qrcæ–‡ä»¶ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±å»ç¼–å†™ã€‚ä»åŸæ–‡çš„è®²è§£ä¸­æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªXMLæè¿°æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†æ–‡ä»¶ä½ç½®ç­‰ä¿¡æ¯ã€‚å¦‚åŸæ–‡ä¸­çš„.qrcæ–‡ä»¶ï¼š 12345&lt;RCC&gt; &lt;qresource prefix=&quot;/images&quot;&gt; &lt;file alias=&quot;doc-open&quot;&gt;document-open.png&lt;/file&gt; &lt;/qresource&gt;&lt;/RCC&gt; å…¶ä¸­ 12345&lt;RCC&gt; &lt;qresource&gt; &lt;/qresource&gt;&lt;/RCC&gt; æ˜¯å›ºå®šçš„æ ‡è®°ï¼Œå†å¾€ä¸­é—´åŠ ä¸œè¥¿ã€‚å¦‚æœå­¦è¿‡htmlè¯­è¨€å°±å¾ˆå®¹æ˜“ç†è§£ã€‚å…¶ä¸­prefix=&quot;/images&quot;å°±æ˜¯è‡ªåŠ¨åŠ ä¸Šå‰ç¼€/imagesï¼Œå› ä¸ºå›¾ç‰‡åœ¨imagesç›®å½•ä¸‹ï¼Œæ¯æ¬¡éƒ½åŠ è¿™ä¸ªè·¯å¾„å¤ªéº»çƒ¦ï¼Œå¤ªé•¿ã€‚ alias=&quot;doc-open&quot;æ„æ€æ˜¯å°†document-open.pngè¿™ä¸ªæ–‡ä»¶èµ·ä¸ªåˆ«åï¼ŒåŸæ¥çš„å¤ªé•¿äº†ã€‚ä¸‹æ¬¡å†ç”¨document-open.pngå°±åªéœ€è¦ç”¨doc-openå°±è¡Œäº†ã€‚ æˆ‘ä»¬çŸ¥é“äº†è¿™äº›ï¼Œå°±å¯ä»¥ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„.qrcæ–‡ä»¶äº†ã€‚æˆ‘ä¹Ÿè‡ªå·±ä¸‹è½½äº†ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„å›¾æ ‡open.pngï¼Œæ–‡ä»¶æ¯”è¾ƒå°‘ï¼Œå°±å’Œä»£ç æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹äº†ã€‚æˆ‘ä»¬å°†å…¶å‘½åä¸ºico.qrcï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ä»¥åéƒ½å­˜æ”¾æœ‰å…³å›¾æ ‡çš„èµ„æºï¼Œæˆ‘ä»¬å¼€å§‹ç¼–å†™ï¼š 12345&lt;RCC&gt; &lt;qresource&gt; &lt;file&gt;open.png&lt;/file&gt; &lt;/qresource&gt;&lt;/RCC&gt; å› ä¸ºæ·»åŠ èµ„æºåéœ€è¦æ›´æ–°.proæ–‡ä»¶æ‰èƒ½æ­£å¸¸ç¼–è¯‘ï¼Œæ‰€ä»¥éœ€è¦åœ¨.proä¸­åŠ å…¥RESOURCES ä¿¡æ¯ï¼Œå°±åœ¨.proæ–‡ä»¶æœ€åä¸€è¡ŒåŠ å…¥ï¼š 1RESOURCES += ico.qrc ç„¶åè¾“å…¥å‘½ä»¤ 1234qmake MainWindow.promake clean #å› ä¸ºä¹‹å‰å¯èƒ½makeè¿‡ï¼Œå…ˆæ¸…ç†ä¸€émake./MainWindow å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œå°†ä¼šå¾—åˆ°ä¸‹é¢çš„çª—å£ï¼š Reference https://www.devbean.net/2012/08/qt-study-road-2-action/","categories":[],"tags":[{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-cat å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„å°çŒ«å’ª","slug":"æ¯å¤©å­¦å‘½ä»¤-catå¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„å°çŒ«å’ª","date":"2021-08-04T01:57:51.000Z","updated":"2022-10-15T03:14:29.714Z","comments":true,"path":"2021/08/04/æ¯å¤©å­¦å‘½ä»¤-catå¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„å°çŒ«å’ª/","link":"","permalink":"http://example.com/2021/08/04/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-cat%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E7%9A%84%E5%B0%8F%E7%8C%AB%E5%92%AA/","excerpt":"","text":"cat å¯ä»¥å°†æ–‡ä»¶çš„å†…å®¹æ–¹ä¾¿åœ°è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚ä½†æ˜¯å®ƒçš„å…¨ç§°concatenateæ„ä¸ºâ€œè¿æ¥â€ï¼Œè¿æ¥æ–‡ä»¶ä¹Ÿæ˜¯å®ƒçš„é‡è¦åŠŸèƒ½ä¹‹ä¸€ï¼Œå¾ˆå¤šäººå¯èƒ½éƒ½ä¸å¸¸ç”¨ã€‚åªè®°å¾—è¾“å‡ºæ–‡ä»¶å†…å®¹äº†ã€‚ å¯é€‰å‚æ•°123456789-n æˆ– --number #ç”± 1 å¼€å§‹å¯¹æ‰€æœ‰è¾“å‡ºçš„è¡Œæ•°ç¼–å·ã€‚-b æˆ– --number-nonblank #å’Œ -n ç›¸ä¼¼ï¼Œåªä¸è¿‡å¯¹äºç©ºç™½è¡Œä¸ç¼–å·ã€‚-s æˆ– --squeeze-blank #å½“é‡åˆ°æœ‰è¿ç»­ä¸¤è¡Œä»¥ä¸Šçš„ç©ºç™½è¡Œï¼Œå°±ä»£æ¢ä¸ºä¸€è¡Œçš„ç©ºç™½è¡Œã€‚-v æˆ– --show-nonprinting #ä½¿ç”¨ ^ å’Œ M- ç¬¦å·ï¼Œé™¤äº† LFD å’Œ TAB ä¹‹å¤–ã€‚-E æˆ– --show-ends # åœ¨æ¯è¡Œç»“æŸå¤„æ˜¾ç¤º $ã€‚-T æˆ– --show-tabs: #å°† TAB å­—ç¬¦æ˜¾ç¤ºä¸º ^Iã€‚-A, --show-all #ç­‰ä»·äº -vETã€‚-e #ç­‰ä»·äº&quot;-vE&quot;é€‰é¡¹ï¼›-t #ç­‰ä»·äº&quot;-vT&quot;é€‰é¡¹ï¼› ä½¿ç”¨å®ä¾‹å°†æ–‡ä»¶å†…å®¹è¾“å‡ºåˆ°å±å¹• 12345âœ ~ cat test.txt This is firt line!This is second line!This is third line!This is fourth line! å°†test.txtçš„å†…å®¹è¾“å…¥åˆ°test01.txtä¸­ 123456âœ ~ cat test.txt &gt; test01.txtâœ ~ cat test01.txt This is firt line!This is second line!This is third line!This is fourth line! å¸¦è¡Œå·è¾“å‡º 12345âœ ~ cat -n test.txt 1 This is firt line! 2 This is second line! 3 This is third line! 4 This is fourth line! å°†ä¸¤ä¸ªæ–‡ä»¶å†…å®¹åˆå¹¶ï¼Œå†å†™å…¥åˆ°ç¬¬ä¸‰ä¸ªæ–‡ä»¶ä¸­ 12345678910âœ ~ cat test.txt test01.txt &gt;&gt; test02.txtâœ ~ cat test02.txt This is firt line!This is second line!This is third line!This is fourth line!This is firt line!This is second line!This is third line!This is fourth line! æ¸…ç©ºæ–‡ä»¶ä¸­çš„å†…å®¹ 123âœ ~ cat /dev/null &gt; test.txt âœ ~ cat test.txt âœ ~ åœ¨ç±» Unix ç³»ç»Ÿä¸­ï¼Œ/dev/null ç§°ç©ºè®¾å¤‡ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è®¾å¤‡æ–‡ä»¶ï¼Œå®ƒä¸¢å¼ƒä¸€åˆ‡å†™å…¥å…¶ä¸­çš„æ•°æ®ï¼ˆä½†æŠ¥å‘Šå†™å…¥æ“ä½œæˆåŠŸï¼‰ï¼Œè¯»å–å®ƒåˆ™ä¼šç«‹å³å¾—åˆ°ä¸€ä¸ª EOFã€‚ Reference https://www.runoob.com/linux/linux-comm-cat.html","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"è§£å†³/usr/bin/env:python:No such file or directory","slug":"è§£å†³-usr-bin-env-python-No-such-file-or-directory","date":"2021-08-03T07:58:44.000Z","updated":"2022-10-15T03:14:29.848Z","comments":true,"path":"2021/08/03/è§£å†³-usr-bin-env-python-No-such-file-or-directory/","link":"","permalink":"http://example.com/2021/08/03/%E8%A7%A3%E5%86%B3-usr-bin-env-python-No-such-file-or-directory/","excerpt":"","text":"åœ¨æ‰§è¡Œçš„ç¨‹åºæºç å¼€å¤´æœ‰è¿™ä¹ˆä¸€å¥!#/usr/bin/env pythonï¼Œ!#è¿™ç©æ„å«shebangä¹Ÿå«hashbangã€‚ä»–ç”¨æ¥æŒ‡å®šè„šæœ¬çš„è§£é‡Šå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç¨‹åºæŒ‡å®špythonè§£é‡Šå™¨ã€‚ å†çœ‹è¿™ä¸ªé”™è¯¯æç¤ºï¼Œç½ªé­ç¥¸é¦–å°±æ˜¯è¿™å¥å‘½ä»¤ï¼Œå°±æ˜¯è¯´åœ¨ç¯å¢ƒå˜é‡æ‰¾ä¸åˆ°pythonï¼Œé€šä¿—ç‚¹è¯´ï¼Œå‡å¦‚æˆ‘è¦èƒ½ç›´æ¥ç”¨pythonæ¥è·‘è¿™ä¸ªç¨‹åºï¼Œæˆ‘åœ¨å‘½ä»¤è¡Œç›´æ¥è¾“å…¥pythonåº”è¯¥æ˜¯å¯ä»¥è¿›å…¥pythonç¯å¢ƒçš„ï¼Œä½†æ˜¯æ­¤æ—¶è‚¯å®šä¸èƒ½ã€‚æˆ‘ä»¬å¯ä»¥è¯•è¯• 12dominic@hanhan:~$ pythonCommond not found xxxxxxxxxxx è§£å†³æ–¹æ¡ˆä¸€ç³»ç»Ÿé‡Œæ²¡æœ‰pythonè¿˜è·‘ä¸ªé”¤å­ï¼Œå…ˆè£…ä¸Šå†è¯´ 1apt-get install python3 è¿™æ—¶å€™å¯èƒ½å°±è§£å†³é—®é¢˜äº† è§£å†³æ–¹æ¡ˆäºŒæœ‰çš„äººå¯èƒ½pythonæ—©å°±è£…äº†ï¼Œä½†æ˜¯ä»ç„¶æœ‰è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å‘½ä»¤è¾“å…¥pythonä»ç„¶æ²¡æ³•ç”¨ï¼Œä½†æ˜¯è¾“å…¥python3å°±å¯ä»¥ é‚£python3å¯ä»¥ï¼Œæˆ‘ç›´æ¥å°†pythonæ”¹æˆpython3ä¸å°±å®Œäº†ã€‚æ²¡é”™ï¼ æ‰“å¼€æ–‡ä»¶å°†!#/usr/bin/env pythonæ”¹æˆ!#/usr/bin/env python3 è§£å†³æ–¹æ¡ˆä¸‰å¦‚æœäº†è§£è½¯é“¾æ¥ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ä¸ç”¨å»æ”¹æºç äº†ï¼Œæºç æœ€å¥½è¿˜æ˜¯ä¿æŒåŸæ ·ã€‚ æ—¢ç„¶æ‰¾ä¸åˆ°pythonè¿™ç©æ„ï¼Œé‚£æˆ‘ä»¬ç»™ä»–å»ºä¸€ä¸ªä¸å°±å®Œäº†ã€‚ ä»–è¦pythonå°±æ˜¯ç”¨æ¥è§£é‡Šç¨‹åºçš„ï¼Œæˆ‘ä»¬æœ¬åœ°è£…çš„python3å°±æ˜¯ä»–éœ€è¦çš„ä¸œè¥¿ å…ˆæ‰¾æ‰¾æˆ‘ä»¬çš„python3åœ¨å“ª 12dominic@hanhan:~$ whereis python3python3: /usr/bin/python3.8 /usr/bin/python3.8-config /usr/bin/python3 ä¸€èˆ¬åœ¨/usr/binç›®å½•ä¸‹ï¼Œç„¶åæˆ‘ä»¬åœ¨è¿™ä¸ªç›®å½•ä¸‹ç»™ä»–åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥â€œå¿«æ·æ–¹å¼â€ï¼Œå…·ä½“å’‹ç”¨çš„å•¥æ„æ€ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ 1sudo ln -s /usr/bin/python3 /usr/bin/python è¿™æ ·ç¨‹åºå†æ‰¾pythonæ—¶å°±ä¼šé“¾æ¥åˆ°python3ï¼Œç„¶åç”¨python3å»å½“è§£é‡Šå™¨ã€‚ è§£å†³æ–¹æ¡ˆå››å¯èƒ½åœ¨rootç›®å½•ä¸‹ä½¿ç”¨è¿‡repoï¼Œå°†å…¶åˆ é™¤","categories":[{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-ln è½¯ç¡¬é“¾æ¥","slug":"æ¯å¤©å­¦å‘½ä»¤-lnè½¯ç¡¬é“¾æ¥","date":"2021-08-03T03:57:02.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2021/08/03/æ¯å¤©å­¦å‘½ä»¤-lnè½¯ç¡¬é“¾æ¥/","link":"","permalink":"http://example.com/2021/08/03/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-ln%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5/","excerpt":"","text":"Linux lnï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šlink filesï¼‰å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸é‡è¦å‘½ä»¤ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä¸ºæŸä¸€ä¸ªæ–‡ä»¶åœ¨å¦å¤–ä¸€ä¸ªä½ç½®å»ºç«‹ä¸€ä¸ªåŒæ­¥çš„é“¾æ¥ã€‚è¿™æœ‰ç‚¹åƒ Windows ç¯å¢ƒä¸‹çš„å¿«æ·æ–¹å¼ã€‚ä»‹ç»å‘½ä»¤å‰äº†è§£ä¸€ä¸‹è½¯é“¾æ¥ï¼Œç¡¬é“¾æ¥å…·ä½“æ˜¯ä»€ä¹ˆã€‚ ç¡¬é“¾æ¥ Hard Linkåœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª inodeï¼Œæ–‡ä»¶çš„å†…å®¹åœ¨å­˜å‚¨åœ¨ inode æŒ‡å‘çš„ data block ä¸­ã€‚è¦è¯»å–è¯¥æ–‡ä»¶çš„å†…å®¹ï¼Œéœ€è¦é€šè¿‡æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸­è®°å½•çš„æ–‡ä»¶åæ‰¾åˆ°æ–‡ä»¶çš„ inode å·ï¼Œç„¶åé€šè¿‡ inode æ‰¾åˆ°å­˜å‚¨æ–‡ä»¶å†…å®¹çš„ data blockã€‚å½“ç„¶å¤šä¸ªæ–‡ä»¶åå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªinodeã€‚ ä½¿ç”¨llå‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œ-iå‚æ•°æ˜¾ç¤ºå…¶ç»“ç‚¹ä¿¡æ¯ï¼Œå…¶ä¸­æœ€å‰é¢çš„ä¸€ä¸²æ•°å­—å°±æ˜¯inodeä¿¡æ¯ã€‚æˆ‘ä»¬ä»¥/opt/test.txtæ–‡ä»¶ä¸ºä¾‹ï¼ŒæŸ¥çœ‹å…¶ç»“ç‚¹ä¿¡æ¯ã€‚ 12dominic@hanhan:/opt$ ll -i test.txt 2498138 -rw-r--r-- 1 root root 4 8æœˆ 3 12:16 test.txt ä½¿ç”¨ ln å‘½ä»¤åœ¨/opt/tempç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª test.txt æ–‡ä»¶çš„ç¡¬é“¾æ¥ï¼Œç„¶åè§‚å¯Ÿå…¶æ–‡ä»¶å±æ€§ï¼š 1234dominic@hanhan:/opt/temp$ sudo ln ../test.txt .dominic@hanhan:/opt/temp$ ll -i ../test.txt test.txt 2498138 -rw-r--r-- 2 root root 4 8æœˆ 3 12:16 ../test.txt2498138 -rw-r--r-- 2 root root 4 8æœˆ 3 12:16 test.txt æˆ‘ä»¬å†ç”¨ll -iå‘½ä»¤æŸ¥çœ‹ç»“ç‚¹ä¿¡æ¯ï¼Œå‘ç°è¿™ä¸¤ä¸ªæ–‡ä»¶åçš„ç»“ç‚¹ä¿¡æ¯æ˜¯ä¸€æ ·çš„ã€‚è¯´æ˜è¿™ä¸¤ä¸ªæ–‡ä»¶åæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ã€‚å…¶ä¸­ç¬¬ä¸‰ä¸ªå­—æ®µæ˜¯é“¾æ¥æ•°ï¼Œæ•°å­—2ï¼Œè¡¨ç¤ºæœ‰ä¸¤ä¸ªæ–‡ä»¶åé“¾æ¥åˆ°åŒä¸€ä¸ªinodeã€‚ ç¡¬é“¾æ¥çš„ç‰¹ç‚¹ ç¡¬é“¾æ¥ï¼Œä»¥æ–‡ä»¶å‰¯æœ¬çš„å½¢å¼å­˜åœ¨ã€‚ä½†ä¸å ç”¨å®é™…ç©ºé—´ã€‚ç”±äºç¡¬é“¾æ¥åªæ˜¯åœ¨ç›®å½•ä¸­æ·»åŠ äº†ä¸€æ¡åŒ…å«æ–‡ä»¶åå’Œ å¯¹åº” inode çš„è®°å½•ï¼Œæ‰€ä»¥å®ƒå‡ ä¹ä¸ä¼šæ¶ˆè€—é¢å¤–çš„ç£ç›˜å®¹é‡ã€‚ ä¸å…è®¸ç»™ç›®å½•åˆ›å»ºç¡¬é“¾æ¥ ç¡¬é“¾æ¥åªæœ‰åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­æ‰èƒ½åˆ›å»º åªè¦è¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶åå¼•ç”¨ç€æ–‡ä»¶ï¼Œæ–‡ä»¶å°±ä¸ä¼šè¢«çœŸæ­£åˆ é™¤åˆ é™¤ç¡¬é“¾æ¥æ‰€å…³è”çš„æ–‡ä»¶æ—¶ï¼Œå…¶å®åªæ˜¯åˆ é™¤äº†ä¸€æ¡ç›®å½•ä¸­çš„è®°å½•ï¼ŒçœŸæ­£çš„æ–‡ä»¶å¹¶ä¸å—å½±å“ã€‚åªæœ‰åœ¨åˆ é™¤æœ€åä¸€ä¸ªç¡¬é“¾æ¥æ—¶æ‰ä¼šçœŸæ­£åˆ é™¤æ–‡ä»¶çš„å†…å®¹æ•°æ®ã€‚ è½¯é“¾æ¥ Symbolic Linkè½¯é“¾æ¥çš„å®ç°æ–¹å¼ä¸ç¡¬é“¾æ¥æœ‰æœ¬è´¨ä¸Šçš„ä¸åŒã€‚åˆ›å»ºè½¯é“¾æ¥æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ (åˆ†é…ä¸€ä¸ªinode å’Œå¯¹åº”çš„ data block)ï¼Œæ–°æ–‡ä»¶çš„ data block ä¸­å­˜å‚¨äº†ç›®æ ‡æ–‡ä»¶çš„è·¯å¾„ã€‚ æˆ‘ä»¬ä»¥/opt/test.txtä¸ºä¾‹ï¼Œåœ¨/opt/tempç›®å½•ä¸­ï¼Œä¸ºå…¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œç„¶åæŸ¥çœ‹å…¶inodeç»“ç‚¹ä¿¡æ¯ã€‚ 1234dominic@hanhan:/opt/temp$ sudo ln -s ../test.txt test2.txtdominic@hanhan:/opt/temp$ ll -i ../test.txt test2.txt 2498139 lrwxrwxrwx 1 root root 11 8æœˆ 3 14:01 test2.txt -&gt; ../test.txt2498138 -rw-r--r-- 2 root root 4 8æœˆ 3 12:16 ../test.txt ç¬¬ä¸€ä¸ªå­—æ®µä¸åŒï¼Œè¯´æ˜æ˜¯ä¸¤ä¸ªæ–‡ä»¶äº† ç¬¬äºŒä¸ªå­—æ®µè¡¨ç¤ºæƒé™ï¼Œç¬¬ä¸€ä¸ªå­—æ¯è¡¨ç¤ºæ–‡ä»¶ç±»å‹ï¼Œlè¯´æ˜ä¹¦è½¯é“¾æ¥æ–‡ä»¶ ç¬¬ä¸‰ä¸ªå­—æ®µè¡¨ç¤ºé“¾æ¥æ•°ï¼Œä»ç„¶æ˜¯2ï¼Œè¯´æ˜è½¯é“¾æ¥ä¸å¢åŠ æºæ–‡ä»¶é“¾æ¥æ•° ç¬¬å…­ä¸ªå­—æ®µæ˜¯æ–‡ä»¶å¤§å°ï¼Œæ–°å»ºçš„è½¯é“¾æ¥æ–‡ä»¶æ—¶ 11 å­—èŠ‚ï¼Œè¿™å°±æ˜¯/opt/test.txtçš„é•¿åº¦ã€‚ è½¯é“¾æ¥ç‰¹ç‚¹ è½¯é“¾æ¥ï¼Œä»¥è·¯å¾„çš„å½¢å¼å­˜åœ¨ã€‚ç±»ä¼¼äº Windows æ“ä½œç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ è½¯é“¾æ¥å¯ä»¥ è·¨æ–‡ä»¶ç³»ç»Ÿï¼Œç¡¬é“¾æ¥ä¸å¯ä»¥ è½¯é“¾æ¥å¯ä»¥å¯¹ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶åè¿›è¡Œé“¾æ¥ è½¯é“¾æ¥å¯ä»¥å¯¹ç›®å½•è¿›è¡Œé“¾æ¥ ä½¿ç”¨å®ä¾‹ln [å‚æ•°][æºæ–‡ä»¶æˆ–ç›®å½•][ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•]ä¸ºæ–‡ä»¶test.txtåˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥ 1sudo ln test.txt /etc/ åˆ é™¤test.txtçš„ç¡¬é“¾æ¥ï¼Œå› ä¸ºæ˜¯ä»¥å‰¯æœ¬å½¢å¼å­˜åœ¨çš„ï¼Œæ‰€ä»¥ç›´æ¥ç”¨rmå‘½ä»¤å°†å…¶åˆ é™¤å³å¯ã€‚ 1sudo rm /etc/test.txt ä¸ºæ–‡ä»¶test.txtåˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ 1sudo ln -s test.txt /etc/test2.txt åˆ é™¤è½¯é“¾æ¥ä¹Ÿä¸€æ ·ï¼Œç›´æ¥ç”¨rmå‘½ä»¤åˆ é™¤è½¯é“¾æ¥çš„åç§°å³å¯ã€‚ Reference https://www.runoob.com/linux/linux-comm-ln.html https://www.cnblogs.com/lixuze/p/14248559.html","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-ed è¡Œç¼–è¾‘å™¨","slug":"æ¯å¤©å­¦å‘½ä»¤-edè¡Œç¼–è¾‘å™¨","date":"2021-08-02T01:57:10.000Z","updated":"2022-10-15T03:14:29.722Z","comments":true,"path":"2021/08/02/æ¯å¤©å­¦å‘½ä»¤-edè¡Œç¼–è¾‘å™¨/","link":"","permalink":"http://example.com/2021/08/02/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-ed%E8%A1%8C%E7%BC%96%E8%BE%91%E5%99%A8/","excerpt":"","text":"edå‘½ä»¤æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç”¨äºæ–‡æœ¬ç¼–è¾‘ã€‚ edæ˜¯ Linux ä¸­åŠŸèƒ½æœ€ç®€å•çš„æ–‡æœ¬ç¼–è¾‘ç¨‹åºï¼Œä¸€æ¬¡ä»…èƒ½ç¼–è¾‘ä¸€è¡Œè€Œéå…¨å±å¹•æ–¹å¼çš„æ“ä½œã€‚å¾ˆå¤šå‘½ä»¤å’Œvimç›¸ä¼¼ï¼Œå¹³æ—¶å¼€å‘ä¸­å¹¶ä¸å¸¸ç”¨ï¼Œä½†æ˜¯åœ¨ç¼–è¾‘å¤§æ–‡æœ¬æ—¶è¿˜æ˜¯ä¼šç”¨åˆ°ã€‚ å­¦å­¦æ— å¦¨æ¯•ç«Ÿè¿™æ˜¯ Unix ç³»ç»Ÿä¸‰å¤§è¦ä»¶ï¼ˆç¼–è¾‘å™¨ï¼Œæ±‡ç¼–å™¨å’Œ shellï¼‰ä¹‹ä¸€ã€‚ edç¼–è¾‘å™¨æœ‰ä¸¤ç§æ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼å’Œè¾“å…¥æ¨¡å¼ã€‚å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥a,i,c,då¯ä»¥è¿›å…¥å¯¹åº”çš„ç¼–è¾‘æ¨¡å¼ï¼Œæ¥ä¸‹æ¥å¯ä»¥è¾“å…¥ä»»ä½•æƒ³è¦è¾“å…¥çš„å†…å®¹ï¼Œè¾“å…¥å®Œæ¯•æˆ–è€…è¦åˆ‡æ¢å‘½ä»¤æ—¶ï¼Œå¯ä»¥è¾“å…¥.é€€å‡ºè¾“å…¥æ¨¡å¼ã€‚ Commands1234a #æ·»åŠ åˆ°è¡Œi #æ·»åŠ åˆ°è¡Œé¦–c #æ”¹å˜è¡Œd #åˆ é™¤è¡Œ Line Address12345678910. #buffer ä¸­ å½“å‰è¡Œ$ #æœ€åä¸€è¡Œn #ç¬¬ n è¡Œï¼Œè¡Œçš„èŒƒå›´æ˜¯ [0,$]- or ^ #å‰ä¸€è¡Œ-n or ^n #å‰ n è¡Œ+ or +n #åä¸€è¡ŒåŠånè¡Œ, or % #å…¨éƒ¨è¡Œï¼Œç­‰åŒäº 1,$; #å½“å‰è¡Œåˆ°æœ€åä¸€è¡Œ .,$/re/ #ä¸‹ä¸€ä¸ªåŒ…å«æ­£åˆ™ re çš„è¡Œ?re? #ä¸Šä¸€ä¸ªåŒ…å«æ­£åˆ™ re çš„è¡Œ ä½¿ç”¨å®ä¾‹12345678910111213141516171819202122232425262728293031dominic@hanhan:~$ ed # è¿›å…¥ç¼–è¾‘æ¨¡å¼This is a test text! # è¾“å…¥æ–‡æœ¬. # ç»“æŸè¾“å…¥å‘½ä»¤This is a test text! # å›æ˜¾å½“å‰è¡Œn # æ˜¾ç¤ºè¡Œå·å‘½ä»¤1 This is a test text! # å›æ˜¾å½“å‰è¡Œå¹¶æ˜¾ç¤ºè¡Œå·c # æ”¹å˜è¡Œå‘½ä»¤This is changed text! # è¾“å…¥æ›´æ”¹åçš„å†…å®¹. # ç»“æŸè¾“å…¥å‘½ä»¤n # æ˜¾ç¤ºè¡Œå·å‘½ä»¤1 This is changed text! # å›æ˜¾å½“å‰è¡Œå¹¶æ˜¾ç¤ºè¡Œå·i # åœ¨é¦–è¡Œæ’å…¥å‘½ä»¤This is first line! # è¾“å…¥æ’å…¥å†…å®¹. # ç»“æŸè¾“å…¥å‘½ä»¤+ # åä¸€è¡Œå‘½ä»¤This is changed text! # å›æ˜¾åä¸€è¡Œd # åˆ é™¤å½“å‰è¡Œ . # å›æ˜¾å½“å‰è¡Œå‘½ä»¤This is firt line! # å›æ˜¾å½“å‰è¡ŒaThis is second line!This is third line!This is fourth line!w test.txt # å†™å…¥å¹¶ä¿å­˜æ–‡ä»¶q # é€€å‡ºç¼–è¾‘å™¨dominic@hanhan:~$ cat test.txt # æŸ¥çœ‹å†…å®¹This is first line!sThis is second line!This is third line!This is fourth line!","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-wc ç»Ÿè®¡æ–‡ä»¶æœ‰å¤šå°‘å­—å¤šå°‘è¡Œ","slug":"æ¯å¤©å­¦å‘½ä»¤-wcç»Ÿè®¡æ–‡ä»¶æœ‰å¤šå°‘å­—å¤šå°‘è¡Œ","date":"2021-07-30T09:26:39.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2021/07/30/æ¯å¤©å­¦å‘½ä»¤-wcç»Ÿè®¡æ–‡ä»¶æœ‰å¤šå°‘å­—å¤šå°‘è¡Œ/","link":"","permalink":"http://example.com/2021/07/30/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-wc%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E6%9C%89%E5%A4%9A%E5%B0%91%E5%AD%97%E5%A4%9A%E5%B0%91%E8%A1%8C/","excerpt":"","text":"æƒ³çŸ¥é“è‡ªå·±ä»£ç å†™äº†å¤šå°‘è¡Œï¼Œå¯ä»¥ä¸€ä¸ªwcå‘½ä»¤æå®šã€‚ å¯é€‰å‚æ•°123-lï¼šä»…åˆ—å‡ºè¡Œï¼›-wï¼šä»…åˆ—å‡ºå¤šå°‘å­— (è‹±æ–‡å•å­—)ï¼›-mï¼šå¤šå°‘å­—ç¬¦ ä½¿ç”¨å®ä¾‹ç»Ÿè®¡hello.cæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶æ€»å…±å¤šå°‘è¡Œ 12$ wc -l hello.c14 hello.c ç»Ÿè®¡æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•° 12ls -l | grep &quot;^-&quot; | wc -l ç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ–‡ä»¶çš„ä¸ªæ•°ï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰ 12ls -lR| grep &quot;^-&quot; | wc -l æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶å¤¹ (ç›®å½•) çš„ä¸ªæ•°ï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰ 1ls -lR | grep &quot;^d&quot; | wc -l è¿‡æ»¤lsçš„è¾“å‡ºä¿¡æ¯ï¼Œåªä¿ç•™ä¸€èˆ¬æ–‡ä»¶ï¼Œåªä¿ç•™ç›®å½•æ˜¯grep &quot;^d&quot;ã€‚","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"æ›´æ¢ Ubuntu è½¯ä»¶æ›´æ–°æº","slug":"Linuxæ›´æ¢Ubuntuè½¯ä»¶æ›´æ–°æº","date":"2021-07-30T03:14:41.000Z","updated":"2022-11-20T07:03:29.733Z","comments":true,"path":"2021/07/30/Linuxæ›´æ¢Ubuntuè½¯ä»¶æ›´æ–°æº/","link":"","permalink":"http://example.com/2021/07/30/Linux%E6%9B%B4%E6%8D%A2Ubuntu%E8%BD%AF%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%BA%90/","excerpt":"","text":"Ubuntu é»˜è®¤æ˜¯å›½å¤–çš„æºï¼Œè½¯ä»¶ä¸‹è½½å’Œæ›´æ–°éƒ½æ¯”è¾ƒæ…¢ã€‚ä¸¤ç§æ–¹æ³•å°†ä¸‹è½½æºæ¢æˆå›½å†…çš„æºã€‚ ç”¨â€è½¯ä»¶å’Œæ›´æ–°â€å·¥å…·ä» Ubuntu èœå•ä¸­æ‰¾åˆ°è½¯ä»¶å’Œæ›´æ–°è¿™ä¸ªåº”ç”¨å¹¶æ‰“å¼€ã€‚ æ‰¾åˆ°ä¸‹è½½è‡ªï¼Œé€‰æ‹©å…¶ä»– - å›½å†…-aliyunï¼Œç„¶åå‹¾é€‰å‰å››ä¸ªé€‰é¡¹ã€‚å…³é—­æ—¶ä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼Œç‚¹å‡»æ›´æ–°ã€‚ç„¶åå°±èƒ½æ„‰å¿«çš„ä¸‹è½½è½¯ä»¶äº†ã€‚ ä¿®æ”¹sourcelistå¤‡ä»½åŸæ–‡ä»¶è¿™ä¹Ÿç®—æ˜¯ç³»ç»Ÿæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜æ˜¯ä¿é™©ä¸€ç‚¹ï¼Œå‡ºé”™äº†å†æ”¹å›æ¥ã€‚ 1sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup æ‰“å¼€å¹¶ä¿®æ”¹1sudo vi /etc/apt/sources.list vimç”¨çš„ä¸ä¹ æƒ¯çš„ä¼°è®¡ä¼šå’Œæˆ‘ä¸€æ ·æ‰¾å…¨é€‰å†…å®¹æ€ä¹ˆæ“ä½œã€‚æ•™ç»™ä½ äº†åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œå°±æ˜¯æŒ‰ä¸€ä¸‹escé”®ï¼Œç„¶åè¾“å…¥ggvGã€‚å…·ä½“ä»€ä¹ˆå«ä¹‰çœ‹VIM ç¬”è®°å§ï¼Œé€‰æ‹©åç›´æ¥deleteåˆ é™¤ï¼Œå†æŠŠé˜¿é‡Œäº‘æºç²˜è´´è¿›å»ã€‚ä¿å­˜é€€å‡ºã€‚ 1234567891011#é˜¿é‡Œäº‘deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse æ›´æ–°123sudo apt-get updatesudo apt-get dist-upgradesudo apt-get upgrade","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-find æŸ¥æ‰¾æ–‡ä»¶","slug":"æ¯å¤©å­¦å‘½ä»¤-findæŸ¥æ‰¾æ–‡ä»¶","date":"2021-07-29T03:05:43.000Z","updated":"2022-10-15T03:03:19.398Z","comments":true,"path":"2021/07/29/æ¯å¤©å­¦å‘½ä»¤-findæŸ¥æ‰¾æ–‡ä»¶/","link":"","permalink":"http://example.com/2021/07/29/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-find%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6/","excerpt":"","text":"å‘½ä»¤æ ¼å¼1find [path] [expression] åœ¨pathä¸‹æŸ¥æ‰¾expressionè¡¨ç¤ºçš„æ–‡ä»¶ å¸¸ç”¨å‘½ä»¤ä¸€èˆ¬å¸¸è§å°±æ˜¯è‡ªå·±ä¸çŸ¥é“å†™çš„æŸä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ”¾å“ªé‡Œäº†ï¼Œåˆæˆ–è€…åªè®°ä½éƒ¨åˆ†æ–‡ä»¶åã€‚ä»¥ä¸‹å‡ ä¸ªå‘½ä»¤å°±èƒ½å¸®åˆ°ä½ ã€‚ æŒ‰æ–‡ä»¶åæŸ¥æ‰¾12345find -name filename(æŸ¥æ‰¾ç»“æœæ˜¾ç¤ºè·¯å¾„)æˆ–è€… find filename(æŸ¥æ‰¾ç»“æœä¸æ˜¾ç¤ºè·¯å¾„)find hello.cpp #å½“å‰ç›®å½•ä¸‹ç²¾ç¡®æŸ¥æ‰¾hello.cppæ–‡ä»¶find hello #å½“å‰ç›®å½•ä¸‹ç²¾ç¡®æŸ¥æ‰¾helloæ–‡ä»¶find hello* #å½“å‰ç›®å½•ä¸‹æ¨¡ç³ŠæŸ¥æ‰¾ä»¥helloä¸ºå‰ç¼€çš„æ–‡ä»¶ æŒ‰ç±»å‹æŸ¥æ‰¾è¿™å°±æ˜¯ä¸ºæŸ¥æ‰¾æ–‡ä»¶å¤¹ç”¨çš„ã€‚ 1find -type [fdlcb] name [fdlcb]éƒ½æ˜¯ç±»å‹ï¼Œdå°±æ˜¯ç›®å½•ï¼Œæ–‡ä»¶å¤¹ç±»å‹ã€‚ 1find / -type d -name &quot;helloworld&quot; #æŸ¥æ‰¾åä¸ºhelloworldçš„æ–‡ä»¶å¤¹ æŒ‰æ–‡ä»¶åæŸ¥æ‰¾ä»¥ä¸‹å°±è¯¦ç»†ä»‹ç»ä¸€äº›å‚æ•° 12find -name &quot;hello.cpp&quot; # æœç´¢æ–‡ä»¶åï¼Œå¤§å°å†™æ•æ„Ÿfind -iname &quot;hello.cpp&quot; #å¤§å°å†™ä¸æ•æ„Ÿ æŒ‰æ–‡ä»¶å¤§å°æŸ¥æ‰¾12345find [path] -size 50Mfind / -size 10M # æŸ¥æ‰¾ç³»ç»Ÿä¸­å¤§å°ç­‰äº10Mçš„æ–‡ä»¶find / -size +50M # æŸ¥æ‰¾ç³»ç»Ÿä¸­å¤§å°å¤§äº50Mçš„æ–‡ä»¶find / -size -30M # æŸ¥æ‰¾ç³»ç»Ÿä¸­å¤§å°å°äº30Mçš„æ–‡ä»¶ æŒ‰æ—¶é—´æ¥æŸ¥æ‰¾æ–‡ä»¶Linux ä¼šå­˜å‚¨ä¸‹é¢çš„æ—¶é—´ï¼š Access time ä¸Šä¸€æ¬¡æ–‡ä»¶è¯»æˆ–è€…å†™çš„æ—¶é—´ Modifica time ä¸Šä¸€æ¬¡æ–‡ä»¶è¢«ä¿®æ”¹çš„æ—¶é—´ Change time ä¸Šä¸€æ¬¡æ–‡ä»¶ inode meta ä¿¡æ¯è¢«ä¿®æ”¹çš„æ—¶é—´ åœ¨æŒ‰ç…§æ—¶é—´æŸ¥æ‰¾æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ -atimeï¼Œ -mtime æˆ–è€… -ctimeï¼Œå’Œä¹‹å‰ sizeå‚æ•°ä¸€æ ·å¯ä»¥ä½¿ç”¨ + æˆ–è€… -æ—¶é—´èŒƒå›´ï¼Œä¸‹å›¾è¡¨ç¤ºfindçš„æ—¶é—´è½´ã€‚+è¡¨ç¤ºè¶…è¿‡å¤šå°‘å¤©ï¼Œ-è¡¨ç¤ºå¤šå°‘å¤©ä»¥å†…ã€‚ æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥æ¢æˆ-aminï¼Œ -mmin æˆ–è€… -cminå‚æ•°ï¼Œå•ä½æ˜¯åˆ†é’Ÿã€‚ 123find / -mtime 1 # å¯»æ‰¾ä¿®æ”¹æ—¶é—´è¶…è¿‡ä¸€å¤©çš„æ–‡ä»¶find / -atime -1 # å¯»æ‰¾åœ¨ä¸€å¤©æ—¶é—´å†…è¢«è®¿é—®çš„æ–‡ä»¶find / -ctime +3 # å¯»æ‰¾ meta ä¿¡æ¯è¢«ä¿®æ”¹çš„æ—¶é—´è¶…è¿‡ 3 å¤©çš„æ–‡ä»¶ Reference http://c.biancheng.net/view/779.html https://einverne.github.io/post/2018/02/find-command.html#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E6%97%B6%E9%97%B4%E8%B6%85%E8%BF%87-1-%E5%A4%A9%E7%9A%84%E6%96%87%E4%BB%B6","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"git clone å¿«é€Ÿä¸‹è½½å­æ¨¡å—","slug":"git-cloneå¿«é€Ÿä¸‹è½½å­æ¨¡å—","date":"2021-07-28T07:28:58.000Z","updated":"2022-10-15T03:14:29.206Z","comments":true,"path":"2021/07/28/git-cloneå¿«é€Ÿä¸‹è½½å­æ¨¡å—/","link":"","permalink":"http://example.com/2021/07/28/git-clone%E5%BF%AB%E9%80%9F%E4%B8%8B%E8%BD%BD%E5%AD%90%E6%A8%A1%E5%9D%97/","excerpt":"","text":"åœ¨git cloneæ—¶å€™ï¼Œå¦‚æœé‡åˆ°é¡¹ç›®é‡Œæœ‰å­æ¨¡å—é€šå¸¸ä¼šåœ¨ä¸‹è½½æ—¶åŠ ä¸Š--recursiveå‚æ•°ï¼Œä¸€èµ·ä¸‹è½½ã€‚ä½†æ˜¯å­æ¨¡å—è¾ƒå¤šï¼Œä½“ç§¯è¾ƒå¤§æ—¶å¤§æ¦‚ç‡éƒ½ä¼šä¸‹è½½å¤±è´¥ã€‚ å¥½åœ¨å¯ä»¥é€šè¿‡ä¸€äº›å°æŠ€å·§ï¼Œä¸‹è½½å›½å†…é•œåƒï¼Œè¿›è¡ŒåŠ é€Ÿã€‚ä½†æ˜¯ä¸‹è½½é¡¹ç›®æ—¶ï¼Œåªæ˜¯ä¸»ä½“æ˜¯å›½å†…çš„é•œåƒï¼Œå­æ¨¡å—ä»ç„¶ä¸‹è½½å¾ˆæ…¢ã€‚é¦–å…ˆè§£å†³è·å–å›½å†…é•œåƒçš„é—®é¢˜ã€‚æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š åœ¨ç äº‘ Gitee ä¸Šæœç´¢ä¸‹è½½ åœ¨ç äº‘ä¸Šæœç´¢åŒæ ·çš„é¡¹ç›®ï¼Œç„¶åç”¨ç äº‘git çš„åœ°å€ä¸‹è½½ã€‚ åŠ ä¸Š.cnpmjs.orgåç¼€ åœ¨åœ°å€åé¢åŠ ä¸Šåç¼€ï¼Œå¦‚git clone https://github.com.cnpmjs.org/riscv/riscv-binutils-gdb.gitã€‚ ä½¿ç”¨æ²¹çŒ´è„šæœ¬è·å–é•œåƒåœ°å€ å¦‚æœä½ æœ‰æ²¹çŒ´æ’ä»¶å¯ä»¥å»greasyforkæœç´¢å®‰è£…GitHubé•œåƒè®¿é—®ï¼ŒåŠ é€Ÿä¸‹è½½è¿™ä¸ªè„šæœ¬ï¼Œåˆ·æ–°GitHubä»“åº“ç•Œé¢å°±ä¼šå¤šå‡ºå‡ ä¸ªé•œåƒåœ°å€ï¼Œä¸€èˆ¬ä¸‹è½½éƒ½ä¼šå¿«å¥½å‡ å€ã€‚ å†æ¥è§£å†³å­æ¨¡å—ä¸‹è½½é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼Œä¸‹è½½é¡¹ç›®æ—¶ï¼Œå…ˆä¸åŠ --recursiveå‚æ•°ï¼Œåªä¸‹è½½é¡¹ç›®çš„æœ¬é¢˜ã€‚ ä¸‹è½½å®Œåæ‰¾åˆ°.gitmodulesæ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªéšè—æ–‡ä»¶ï¼Œéœ€è¦æ˜¾ç¤ºéšè—æ–‡ä»¶ï¼ŒLinux ä¸‹ä½¿ç”¨å¿«æ·é”®Ctrl+Hã€‚ç”¨vimæ‰“å¼€åå¯ä»¥å¾—åˆ°ï¼š è¿™ä¸ªæ–‡ä»¶é‡Œå†™å…¥äº†å­æ¨¡å—çš„ä¸‹è½½ä¿¡æ¯ï¼Œurlå°±æ˜¯ä¸‹è½½åœ°å€ã€‚æˆ‘ä»¬æŠŠæ‰€æœ‰å­æ¨¡å—ä¸­çš„ URL åœ°å€åŒæ ·åŠ ä¸Š.cnpmjs.orgåç¼€ã€‚æˆ–è€…ä½¿ç”¨ä¸Šè¿°ä¸‰ç§æ–¹å¼å¾—åˆ°çš„é•œåƒåœ°å€ã€‚ ç„¶ååˆ©ç”¨git submodule syncæ›´æ–°å­é¡¹ç›®å¯¹åº”çš„url æœ€åå†git submodule update --init --recursiveï¼Œå³å¯å¿«é€Ÿä¸‹è½½æ‰€æœ‰å­é¡¹ç›®ã€‚","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"åœ¨ QEMU ä¸Šè¿è¡Œ 64 ä½å’Œ 32 ä½ RISC-V-Linux","slug":"QEMUä¸Šè¿è¡Œ64ä½å’Œ32ä½RISC-V-Linux","date":"2021-07-28T05:47:56.000Z","updated":"2022-10-15T03:14:29.375Z","comments":true,"path":"2021/07/28/QEMUä¸Šè¿è¡Œ64ä½å’Œ32ä½RISC-V-Linux/","link":"","permalink":"http://example.com/2021/07/28/QEMU%E4%B8%8A%E8%BF%90%E8%A1%8C64%E4%BD%8D%E5%92%8C32%E4%BD%8DRISC-V-Linux/","excerpt":"","text":"åˆ¶ä½œäº¤å‰å·¥å…·é“¾ riscv-gnu-toolchainä¸‹è½½æºç è¿™ä¸ªä»“åº“æ˜¯æˆ‘é‡åˆ°çš„æœ€éš¾ä¸‹è½½çš„ä¸€ä¸ªä»“åº“äº†ï¼Œå…¬å¸ç½‘æ…¢å’Œè™šæ‹Ÿæœºæ€§èƒ½å·®éƒ½è„±ä¸äº†å¹²ç³»ã€‚ä¼°è®¡ä¸‹è½½äº†äº”å°æ—¶éƒ½ä¸æ­¢ï¼Œåˆšå¼€å§‹è¿˜æŒ‡æœ›ä¸€ä¸ªå‘½ä»¤æ‰€æœ‰å­æ¨¡å—éƒ½ä¸‹è½½å®Œçš„ï¼Œç»“æœæ„£æ˜¯ç­‰äº†åŠå¤©ä¸­æ–­äº†ã€‚è¯•äº†ä¸¤æ¬¡åæ”¾å¼ƒäº†ã€‚å¦‚æœå„ä½çœ‹å®˜èƒ½ä¸€æ¬¡å®Œæˆï¼Œé‚£æ‚¨æ˜¯ç¦å¤§ã€‚ å›½å†…çš„ç äº‘å¹³å°æœ‰ä¸ªGitee æé€Ÿä¸‹è½½é¡¹ç›®ï¼Œä¸Šé¢æœ‰ GitHub çš„ä¸€äº›å¸¸ç”¨å¼€æºé¡¹ç›®çš„é•œåƒï¼Œå¯ä¾›åŠ é€Ÿä¸‹è½½ã€‚ 12# riscv-gnu-toolchainhttps://gitee.com/mirrors/riscv-gnu-toolchain.git ä¸‹è½½æ—¶é—®é¢˜å‡ºç°äº†ï¼Œå¦‚æœä¸‹è½½å­æ¨¡å—ä»ç„¶ä¼šå¡ä½ï¼Œå¦‚æœä¸åŠ --recursiveå°±åªèƒ½ä¸‹è½½ä¸»ä½“å†…å®¹ï¼Œå­æ¨¡å—éƒ½æ²¡æœ‰ã€‚ï¼ˆä»¥ä¸‹å†…å®¹ä¸ºç¬¬ä¸€å®‰è£…æ—¶çš„æ–¹æ³•ï¼Œåç»­åˆæ‰¾åˆ°äº†git clone å¿«é€Ÿä¸‹è½½å­æ¨¡å—çš„æ–¹æ³•ï¼‰ å¼€å§‹ä¸‹è½½æ—¶ä¸åŠ --recursiveå‚æ•°ï¼Œåªä¸‹è½½riscv-gnu-toolchainçš„ä¸»ä½“å†…å®¹ï¼Œç„¶åè¿›å…¥åˆ°riscv-gnu-toolchainæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰‹åŠ¨ä¸‹è½½å­æ¨¡å—çš„å†…å®¹ã€‚ å½“ä¸‹å®Œriscv-binutilsç»§ç»­ä¸‹è½½riscv-gdbæ—¶å‘ç°è¿™ä¸¤ä¸ªé¡¹ç›®æ˜¯åŒä¸€ä¸ªé¡¹ç›®ï¼Œåªæ˜¯ä¸åŒçš„åˆ†æ”¯ã€‚ä½†æ˜¯ç äº‘ä¸Šå¹¶æ²¡æœ‰åŒºåˆ†ï¼Œä½†æ˜¯æˆ‘ä¹Ÿæ²¡æ‰¾åˆ°åœ¨ç äº‘ä¸Šçš„å¯¹åº”åˆ†æ”¯ã€‚åªèƒ½ç”¨æ²¹çŒ´è„šæœ¬äº†ã€‚ å¦‚æœä½ æœ‰æ²¹çŒ´æ’ä»¶å¯ä»¥å»greasyforkæœç´¢å®‰è£…GitHub é•œåƒè®¿é—®ï¼ŒåŠ é€Ÿä¸‹è½½è¿™ä¸ªè„šæœ¬ï¼Œåˆ·æ–° GitHub ä»“åº“ç•Œé¢å°±ä¼šå¤šå‡ºå‡ ä¸ªé•œåƒåœ°å€ï¼Œä¸€èˆ¬ä¸‹è½½éƒ½ä¼šå¿«å¥½å‡ å€ã€‚å¦‚æœä¸ç”¨æ²¹çŒ´æ’ä»¶çš„å¯ä»¥ç”¨æˆ‘å¤åˆ¶å¥½çš„é“¾æ¥ã€‚ 123456789101112# riscv-binutilsgit clone https://gitee.com/mirrors/riscv-binutils-gdb.git# riscv-gccgit clone https://gitee.com/mirrors/riscv-gcc.git# riscv-dejagnugit clone https://gitee.com/mirrors/riscv-dejagnu.git# riscv-glibcgit clone https://gitee.com/mirrors/riscv-glibc.git# riscv-newlibgit clone https://gitee.com/mirrors/riscv-newlib.git# riscv-gdbgit clone --depth=1 https://hub.fastgit.org/riscv/riscv-binutils-gdb.git ç¼–è¯‘ riscv-gnu-toolchainæå‰å®‰è£…å¦‚ä¸‹è½¯ä»¶ï¼š 1sudo apt-get install autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev ä¸å¬è€äººè¨€ï¼Œåƒäºåœ¨çœ¼å‰å‘€ï¼Œæœ¬ä»¥ä¸ºè¿™æ˜¯å¯é€‰é¡¹ï¼Œå¾ˆå¤šåº“éƒ½å®‰è£…äº†ï¼Œå°±æ²¡æœ‰æ“ä½œè¿™ä¸€æ­¥ï¼Œç»“æœå°±æ˜¯ç¼–è¯‘åŠå¤©ç»“æœè¿˜é”™äº†ã€‚å¦‚æœæŠ¥make é”™è¯¯ 127ï¼Œé‚£å°±è€è€å®å®æŠŠå‰ç½®çš„è¿™äº›åº“éƒ½è£…ä¸Šã€‚ å»ºç«‹riscv-gnu-toolchainå®‰è£…ç›®å½•/opt/riscv64ã€‚ 12./configure --prefix=/opt/riscv64 sudo make linux -j8 å¯¼å‡ºå®‰è£…è·¯å¾„1export PATH=&quot;$PATH:/opt/riscv64/bin&quot; å‡ºç°ä¸€ä¸‹ä¿¡æ¯è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ 12345678Using built-in specs.COLLECT_GCC=riscv64-unknown-linux-gnu-gccCOLLECT_LTO_WRAPPER=/opt/riscv64/libexec/gcc/riscv64-unknown-linux-gnu/10.2.0/lto-wrapperTarget: riscv64-unknown-linux-gnuConfigured with: /home/dominic/riscv64-linux/riscv-gnu-toolchain/riscv-gcc/configure --target=riscv64-unknown-linux-gnu --prefix=/opt/riscv64 --with-sysroot=/opt/riscv64/sysroot --with-system-zlib --enable-shared --enable-tls --enable-languages=c,c++,fortran --disable-libmudflap --disable-libssp --disable-libquadmath --disable-libsanitizer --disable-nls --disable-bootstrap --src=.././riscv-gcc --disable-multilib --with-abi=lp64d --with-arch=rv64imafdc --with-tune=rocket &#x27;CFLAGS_FOR_TARGET=-O2 -mcmodel=medlow&#x27; &#x27;CXXFLAGS_FOR_TARGET=-O2 -mcmodel=medlow&#x27;Thread model: posixSupported LTO compression algorithms: zlibgcc version 10.2.0 (GCC) åˆ¶ä½œå†…æ ¸ä¸‹è½½ Linux å†…æ ¸makefile","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"},{"name":"RISC-V","slug":"RISC-V","permalink":"http://example.com/tags/RISC-V/"}]},{"title":"æ¯å¤©å­¦å‘½ä»¤-df/duæŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´","slug":"æ¯å¤©å­¦å‘½ä»¤-df-duæŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´","date":"2021-07-28T02:13:58.000Z","updated":"2022-10-15T03:14:29.720Z","comments":true,"path":"2021/07/28/æ¯å¤©å­¦å‘½ä»¤-df-duæŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´/","link":"","permalink":"http://example.com/2021/07/28/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4-df-du%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E5%89%A9%E4%BD%99%E7%A9%BA%E9%97%B4/","excerpt":"","text":"dfå…¨ç§°disk filesystem ï¼Œä»¥ç£ç›˜åˆ†åŒºä¸ºå•ä½æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æŸ¥çœ‹ç£ç›˜æ–‡ä»¶å ç”¨ç©ºé—´ï¼Œç£ç›˜å‰©ä½™ç©ºé—´ç­‰ä¿¡æ¯ã€‚ å‘½ä»¤æ ¼å¼1df [] [] å¯é€‰å‚æ•°1234567891011-a å…¨éƒ¨æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨-h æ–¹ä¾¿é˜…è¯»æ–¹å¼æ˜¾ç¤º-H ç­‰äºâ€œ-hâ€ï¼Œä½†æ˜¯è®¡ç®—å¼ï¼Œ1K=1000ï¼Œè€Œä¸æ˜¯ 1K=1024-i æ˜¾ç¤º inode ä¿¡æ¯-k åŒºå—ä¸º 1024 å­—èŠ‚-l åªæ˜¾ç¤ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ-m åŒºå—ä¸º 1048576 å­—èŠ‚--no-sync å¿½ç•¥ sync å‘½ä»¤-P è¾“å‡ºæ ¼å¼ä¸º POSIX--sync åœ¨å–å¾—ç£ç›˜ä¿¡æ¯å‰ï¼Œå…ˆæ‰§è¡Œ sync å‘½ä»¤-T æ–‡ä»¶ç³»ç»Ÿç±»å‹ ä½¿ç”¨å®ä¾‹df -Tæ˜¾ç¤ºåŒ…å«æ–‡ä»¶ç³»ç»Ÿï¼Œç±»å‹ï¼Œå¯ç”¨å¤§å°ï¼Œå·²ç”¨å¤§å°ï¼ŒæŒ‚è½½ç‚¹ç­‰ä¿¡æ¯ã€‚ 12345678910dominic@hanhan:~$ df -Tæ–‡ä»¶ç³»ç»Ÿ ç±»å‹ 1K-å— å·²ç”¨ å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹udev devtmpfs 1985056 0 1985056 0% /devtmpfs tmpfs 403036 1304 401732 1% /run/dev/sda5 ext4 50824704 20826256 27386992 44% /tmpfs tmpfs 2015172 0 2015172 0% /dev/shmtmpfs tmpfs 5120 4 5116 1% /run/locktmpfs tmpfs 2015172 0 2015172 0% /sys/fs/cgroup/dev/loop0 squashfs 56832 56832 0 100% /snap/core18/1988/dev/loop1 squashfs 56832 56832 0 100% /snap/core18/2074 duå…¨ç§°disk usageå¯ä»¥æŸ¥çœ‹æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹å ç”¨æƒ…å†µã€‚ å‘½ä»¤æ ¼å¼1du [opt] [filename] å¯é€‰å‚æ•°12345678910111213141516171819-aæˆ–-all #æ˜¾ç¤ºç›®å½•ä¸­ä¸ªåˆ«æ–‡ä»¶çš„å¤§å°ã€‚-bæˆ–-bytes #æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶å¤§å°æ—¶ï¼Œä»¥byteä¸ºå•ä½ã€‚-cæˆ–--total #é™¤äº†æ˜¾ç¤ºä¸ªåˆ«ç›®å½•æˆ–æ–‡ä»¶çš„å¤§å°å¤–ï¼ŒåŒæ—¶ä¹Ÿæ˜¾ç¤ºæ‰€æœ‰ç›®å½•æˆ–æ–‡ä»¶çš„æ€»å’Œã€‚-Dæˆ–--dereference-args #æ˜¾ç¤ºæŒ‡å®šç¬¦å·è¿æ¥çš„æºæ–‡ä»¶å¤§å°ã€‚-hæˆ–--human-readable #ä»¥Kï¼ŒMï¼ŒGä¸ºå•ä½ï¼Œæé«˜ä¿¡æ¯çš„å¯è¯»æ€§ã€‚-Hæˆ–--si #ä¸-hå‚æ•°ç›¸åŒï¼Œä½†æ˜¯Kï¼ŒMï¼ŒGæ˜¯ä»¥1000ä¸ºæ¢ç®—å•ä½ã€‚-kæˆ–--kilobytes #ä»¥1024 bytesä¸ºå•ä½ã€‚-læˆ–--count-links #é‡å¤è®¡ç®—ç¡¬ä»¶è¿æ¥çš„æ–‡ä»¶ã€‚-L&lt;ç¬¦å·è¿æ¥&gt;æˆ–--dereference&lt;ç¬¦å·è¿æ¥&gt; #æ˜¾ç¤ºé€‰é¡¹ä¸­æ‰€æŒ‡å®šç¬¦å·è¿æ¥çš„æºæ–‡ä»¶å¤§å°ã€‚-mæˆ–--megabytes #ä»¥1MBä¸ºå•ä½ã€‚-sæˆ–--summarize #ä»…æ˜¾ç¤ºæ€»è®¡ã€‚-Sæˆ–--separate-dirs #æ˜¾ç¤ºä¸ªåˆ«ç›®å½•çš„å¤§å°æ—¶ï¼Œå¹¶ä¸å«å…¶å­ç›®å½•çš„å¤§å°ã€‚-xæˆ–--one-file-xystem #ä»¥ä¸€å¼€å§‹å¤„ç†æ—¶çš„æ–‡ä»¶ç³»ç»Ÿä¸ºå‡†ï¼Œè‹¥é‡ä¸Šå…¶å®ƒä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç›®å½•åˆ™ç•¥è¿‡ã€‚-X&lt;æ–‡ä»¶&gt;æˆ–--exclude-from=&lt;æ–‡ä»¶&gt; #åœ¨&lt;æ–‡ä»¶&gt;æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶ã€‚--exclude=&lt;ç›®å½•æˆ–æ–‡ä»¶&gt; #ç•¥è¿‡æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶ã€‚--max-depth=&lt;ç›®å½•å±‚æ•°&gt; #è¶…è¿‡æŒ‡å®šå±‚æ•°çš„ç›®å½•åï¼Œäºˆä»¥å¿½ç•¥ã€‚--help #æ˜¾ç¤ºå¸®åŠ©ã€‚--version #æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ ä½¿ç”¨å®ä¾‹æŸ¥çœ‹å½“å‰ç›®å½•ä½¿ç”¨æƒ…å†µ 12345678dominic@hanhan:~/learning-linux$ du56 ./.git/hooks8 ./.git/logs/refs/heads8 ./.git/logs/refs/remotes/origin12 ./.git/logs/refs/remotes24 ./.git/logs/refs32 ./.git/logs8 ./.git/info ä»¥æ˜“è¯»çš„æ–¹å¼æŸ¥çœ‹ä½¿ç”¨æƒ…å†µ 12345678dominic@hanhan:~/learning-linux$ du -h56K ./.git/hooks8.0K ./.git/logs/refs/heads8.0K ./.git/logs/refs/remotes/origin12K ./.git/logs/refs/remotes24K ./.git/logs/refs32K ./.git/logs8.0K ./.git/info åªè¾“å‡ºå½“å‰ç›®å½•å ç”¨æ€»ç©ºé—´ï¼ŒåŒä¸Š-hå‘½ä»¤å°±æ˜¯ä»¥äººè¯»çš„æ–¹å¼ï¼ˆåŠ ä¸Šäº†æ•°æ®å•ä½ï¼‰ 12dominic@hanhan:~/learning-linux$ du -hs264K . æŸ¥çœ‹å½“å‰ç›®å½•åŠå…¶æŒ‡å®šæ·±åº¦ç›®å½•çš„å¤§å° 123ä¸æ·±å…¥å­ç›®å½•ï¼Œå°±æ˜¯å½“å‰æ–‡ä»¶å¤¹æ‰€å ç”¨å¤§å°dominic@hanhan:~/learning-linux$ du -h --max-depth=0264K . 12345678910111213æ·±å…¥ä¸€å±‚dominic@hanhan:~/learning-linux$ du -h --max-depth=256K ./.git/hooks32K ./.git/logs8.0K ./.git/info28K ./.git/objects4.0K ./.git/branches28K ./.git/refs180K ./.git24K ./helloworld/c44K ./helloworld/shell72K ./helloworld264K . å¿½ç•¥helloworldè¿™ä¸ªæ–‡ä»¶å¤¹ 12345678910111213141516171819dominic@hanhan:~/learning-linux$ du --exclude=helloworld56 ./.git/hooks8 ./.git/logs/refs/heads8 ./.git/logs/refs/remotes/origin12 ./.git/logs/refs/remotes24 ./.git/logs/refs32 ./.git/logs8 ./.git/info4 ./.git/objects/info20 ./.git/objects/pack28 ./.git/objects4 ./.git/branches8 ./.git/refs/heads4 ./.git/refs/tags8 ./.git/refs/remotes/origin12 ./.git/refs/remotes28 ./.git/refs180 ./.git192 . Refernece https://einverne.github.io/post/2018/03/du-find-out-which-fold-take-space.html https://www.runoob.com/linux/linux-comm-du.html","categories":[{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"}]},{"title":"Linux(Ubuntu) ç¯å¢ƒä¸‹å®‰è£… Qt","slug":"Linux-Ubuntu-ç¯å¢ƒä¸‹å®‰è£…Qt","date":"2021-07-27T08:34:50.000Z","updated":"2022-10-15T03:14:29.271Z","comments":true,"path":"2021/07/27/Linux-Ubuntu-ç¯å¢ƒä¸‹å®‰è£…Qt/","link":"","permalink":"http://example.com/2021/07/27/Linux-Ubuntu-%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85Qt/","excerpt":"","text":"çœŸè ¢ï¼Œä¹‹å‰è´¹é‚£ä¹ˆå¤§åŠ²ï¼Œåªè¦ä¸€å¥å‘½ä»¤å°±å®Œäº‹äº† ä¸‹è½½å®‰è£…1sudo apt install qtcreator ä½†æ˜¯åœ¨ç”¨å‘½ä»¤è¡Œæ„å»º project æ—¶å¯èƒ½ä¼šæŠ¥é”™ 12qmake -projectcould not find a Qt installation of &#x27;&#x27; è¿™æ—¶å€™éœ€è¦ 1sudo apt-get install qt5-default å¥½äº†å¯ä»¥æ„‰å¿«ç©è€äº†ã€‚ çæŠ˜è…¾ ä¸‹è½½ Qtä» Qt5.15.0 èµ·ï¼Œå¯¹äºå¼€æºç”¨æˆ·ï¼ŒQt å®˜æ–¹ä¸å†æä¾›ç‹¬ç«‹å®‰è£…æ–‡ä»¶ï¼Œä¸”ä¸å†æœ‰ bug ä¿®å¤ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ Qt5.15.1ï¼‰ï¼Œå¦‚æœä»å®˜ç½‘ä¸‹è½½ï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘ã€‚è™½ç„¶æƒ³è¯•è¯•ç¼–è¯‘ï¼Œä½†æ˜¯è™šæ‹Ÿæœºåˆšå¼€å§‹å¼€çš„ç©ºé—´å¤ªå°äº†ï¼Œè¿˜æ˜¯å¦å¯»ä»–æ³•å§ã€‚ä»¥åæœ‰æœºä¼šå†æ¥ç¼–è¯‘è¯•è¯•æ–°åŠŸèƒ½ã€‚è‹¥è¯»è€…æœ‰å…´è¶£å¯ä»¥ä»å®˜ç½‘ä¸‹è½½æºç å¹¶ç¼–è¯‘ã€‚æˆ–è€…å‚è€ƒå®˜æ–¹çš„ç¼–è¯‘æ•™ç¨‹ï¼Œä» GitHub ä¸Šä¸‹è½½ã€‚ å›½å†…æœ‰ä¸€äº›é•œåƒç«™ï¼Œæä¾› qt é•œåƒä¸‹è½½ï¼šæ¸…åå¤§å­¦ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/qt/archive/qt/ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼šhttp://mirrors.ustc.edu.cn/qtproject/åŒ—äº¬ç†å·¥å¤§å­¦ï¼šhttps://mirrors.cnnic.cn/qt/ ä»¥æ¸…åå¤§å­¦çš„é•œåƒä¸ºä¾‹ï¼Œæ‰¾åˆ°archive/qt/5.14/5.14.0/qt-opensource-linux-x64-5.14.0.runï¼Œç‚¹å‡»å³å¯å¼€å§‹ä¸‹è½½ã€‚ qt 5.15 å·²ç»ä¸æä¾›å®‰è£…åŒ…ï¼Œæƒ³è¦æœ€æ–°ç‰ˆæœ¬ï¼Œåªèƒ½ä¸‹ 5.14ï¼Œä½†æ˜¯ 5.14.2 ä¸‹è½½æ²¡èµ„æºï¼Œä¸‹ä¸åŠ¨ï¼Œå¦‚æœé‡åˆ°ä¸‹ä¸åŠ¨çš„æƒ…å†µæ¢ä¸€ä¸ªç‰ˆæœ¬å§ å®‰è£… Qtä¸‹è½½çš„.runæ–‡ä»¶åŒå‡»æ˜¯æ— æ³•å®‰è£…çš„ï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰å¯æ‰§è¡Œçš„æƒé™ï¼Œéœ€è¦æˆ‘ä»¬èµ‹ç»™å®ƒæ‰§è¡Œæƒé™ï¼Œæ‰“å¼€ç»ˆç«¯è¿›å…¥å®‰è£…åŒ…çš„ç›®å½•ã€‚ 1chmod +x filename.run chmodå‘½ä»¤æ˜¯æ§åˆ¶ç”¨æˆ·å¯¹æ–‡ä»¶çš„æƒé™ä¿®æ”¹çš„å‘½ä»¤ï¼Œxæ˜¯å¯æ‰§è¡Œæƒé™çš„å‚æ•°ã€‚æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åå°±å¯ä»¥ç›´æ¥åŒå‡»å®‰è£…äº†ã€‚ ç½‘ä¸Šä¸€äº›æ•™ç¨‹å¯ä»¥è·³è¿‡ç™»å½•ï¼Œæˆ‘æ²¡æ‰¾åˆ°è·³è¿‡æŒ‰é’®ï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ªè´¦å·æ‰èƒ½ç»§ç»­å®‰è£…ã€‚ å®‰è£…ç›®å½•ä¸€èˆ¬é€‰æ‹©åœ¨/optç›®å½•ä¸‹ å®‰è£…çš„é™„åŠ ç»„ä»¶æœ€å¥½éƒ½é€‰æ‹©ï¼Œä»¥å…åæœŸä½¿ç”¨å†å®‰è£…éº»çƒ¦ã€‚Qt Creator è‚¯å®šè¦è£…çš„ã€‚ å®‰è£…ä¾èµ–åº“12345apt-get install g++apt-get install libgl1-mesa-devapt-get install libqt4-devapt-get install build-essential # Build Essentialï¼Œå®ƒæ˜¯ä¸€ä¸ªå…ƒè½¯ä»¶åŒ…ï¼Œå¯è®©æ‚¨åœ¨Ubuntuä¸­å®‰è£…å’Œä½¿ç”¨c ++å·¥å…·ã€‚sudo apt install qt5-default # å¦‚æœè¦å°†Qt 5ç”¨ä½œé»˜è®¤çš„Qt Creatorç‰ˆæœ¬éœ€è¦å®‰è£…ï¼Œå¦åˆ™ä¼šæŠ¥ qmake: could not find a Qt installation of &#x27;&#x27;çš„é”™è¯¯ ä½¿ç”¨ Qt Creator åˆ›å»ºç¬¬ä¸€ä¸ªç¨‹åºä½¿ç”¨ Qt Creator åˆ›å»ºé¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªä¸å¸¦çª—å£çš„ HelloWorld ç¨‹åºï¼Œæµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸï¼Œæ‰“å¼€ Qt Creator-æ–‡ä»¶ - æ–°å»ºæ–‡ä»¶æˆ–é¡¹ç›®ï¼Œé€‰æ‹© Non-Qt Project-Plain C++ Applicationã€‚æ¥ä¸‹æ¥å°±è®¾ç½®é¡¹ç›®åç­‰ï¼Œä¸€ç›´ä¸‹ä¸€æ­¥ã€‚å®Œæˆåå°±å¯ä»¥åœ¨ç¼–è¾‘å™¨çœ‹åˆ°å¦‚ä¸‹ ç‚¹å‡»å·¦ä¸‹è§’è¿è¡ŒæŒ‰é’®å°±å¯ä»¥å¾—åˆ°å¦‚ä¸‹ï¼š å†åˆ›å»ºä¸€ä¸ªå¸¦çª—å£çš„ HelloWorldï¼Œåœ¨é€‰æ‹©æ¨¡æ¿æ—¶é€‰æ‹© Application-Qt Widgets Applicationã€‚ä¸€è·¯ç‚¹ä¸‹ä¸€æ­¥å°±å¯ä»¥å®Œæˆåˆ›å»ºï¼Œè¿è¡Œåå°±å¯å¾—åˆ°ä¸€ä¸ªç°ç™½çš„ HelloWorld çª—å£ã€‚ å‘½ä»¤è¡Œç¼–è¯‘ç¬¬ä¸€ä¸ª Qt ç¨‹åºé¦–å…ˆåˆ›å»ºå·¥ä½œç›®å½•HelloWorldQt 1mkdir HelloWorld è¿›å…¥é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªmain.cppæ–‡ä»¶ 12cd HelloWorldQtvim main.cpp ç¼–è¾‘ä»¥ä¸‹å†…å®¹ï¼š 12345678910111213#include &lt;QApplication&gt;#include &lt;QLabel&gt;#include &lt;QWidget&gt;int main(int argc, char *argv[ ])&#123; QApplication app(argc, argv); QLabel hello(&quot;&lt;center&gt;Welcome to my first Qt program&lt;/center&gt;&quot;); hello.setWindowTitle(&quot;My First Qt Program&quot;); hello.resize(400, 400); hello.show(); return app.exec();&#125; å»ºç«‹ QtProject æ–‡ä»¶ 1qmake -project ç”¨vimæ‰“å¼€HelloWorldQt.proæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ 1QT += gui widgets è¿è¡Œqmakeï¼Œä½¿é¡¹ç›® platform-specificï¼Œä¼šå¾—åˆ°ä¸€ä¸ªMakefileæ–‡ä»¶ 1qmake HelloWorldQt.pro ä½¿ç”¨makeå‘½ä»¤å°†Makefileç¼–è¯‘ä¸ºå¯æ‰§è¡Œç¨‹åº 123456789101112131415âœ HelloWorldQt makeg++ -c -pipe -O2 -Wall -W -D_REENTRANT -fPIC -DQT_DEPRECATED_WARNINGS / -DQT_NO_DEBUG -DQT_WIDGETS_LIB /-DQT_GUI_LIB -DQT_CORE_LIB -I. / -I. -isystem / /usr/include/x86_64-linux-gnu/qt5 -isystem / /usr/include/x86_64-linux-gnu/qt5/QtWidgets /-isystem /usr/include/x86_64-linux-gnu/qt5/QtGui /-isystem /usr/include/x86_64-linux-gnu/qt5/QtCore -I. /-I/usr/lib/x86_64-linux-gnu/qt5/mkspecs/linux-g++ -o main.o main.cppg++ -Wl,-O1 -o HelloWorldQt main.o //usr/lib/x86_64-linux-gnu/libQt5Widgets.so //usr/lib/x86_64-linux-gnu/libQt5Gui.so / /usr/lib/x86_64-linux-gnu/libQt5Core.so //usr/lib/x86_64-linux-gnu/libGL.so -lpthread å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‰§è¡Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ 1./HelloWorldQt","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"}]},{"title":"QEMU æ–‡æ¡£","slug":"QEMUæ–‡æ¡£","date":"2021-07-27T03:12:01.000Z","updated":"2022-10-15T03:14:29.406Z","comments":true,"path":"2021/07/27/QEMUæ–‡æ¡£/","link":"","permalink":"http://example.com/2021/07/27/QEMU%E6%96%87%E6%A1%A3/","excerpt":"","text":"è°ƒç”¨æ–‡æ¡£qemu-system-x86_64 [options] [disk_image] disk_imageæ˜¯ IDE ç¡¬ç›˜ 0 çš„åŸå§‹ç¡¬ç›˜æ˜ åƒã€‚æŸäº›ç›®æ ‡ä¸éœ€è¦ç£ç›˜æ˜ åƒã€‚ æ ‡å‡†å‚æ•° Standard options-h åŠŸèƒ½æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º å­å‚æ•° è°ƒç”¨å®ä¾‹ 1qemu-system-riscv32 -h -version åŠŸèƒ½æ˜¾ç¤º qemu ç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º å­å‚æ•° è°ƒç”¨å®ä¾‹ 1qemu-system-riscv32 -version -machine [type=]name[,prop=value[,...]] åŠŸèƒ½é€šè¿‡åç§°é€‰æ‹©æ¨¡æ‹Ÿå™¨ã€‚ä½¿ç”¨ -machine help å¯ä»¥æŸ¥çœ‹å¯ç”¨çš„æ¨¡æ‹Ÿå™¨ã€‚å¯¹äºæ”¯æŒè·¨ç‰ˆæœ¬å®æ—¶è¿ç§»å…¼å®¹æ€§çš„æ¶æ„ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½ä¼šå¼•å…¥ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬åŒ–æ¨¡æ‹Ÿå™¨ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ2.8.0 ç‰ˆæœ¬ä¸º x86_64/i686 æ¶æ„å¼•å…¥äº†â€œpc-i440fx-2.8â€å’Œâ€œpc-q35-2.8â€ã€‚ å­å‚æ•°ä¸ºäº†å…è®¸ç”¨æˆ·ä» QEMU 2.8.0 ç‰ˆå®æ—¶è¿ç§»åˆ° QEMU 2.9.0 ç‰ˆï¼Œ2.9.0 ç‰ˆä¹Ÿå¿…é¡»æ”¯æŒâ€œpc-i440fx-2.8â€å’Œâ€œpc-q35-2.8â€æœºå™¨ã€‚ä¸ºäº†å…è®¸ç”¨æˆ·åœ¨å‡çº§æ—¶å®æ—¶è¿ç§» VMs è·³è¿‡å¤šä¸ªä¸­é—´ç‰ˆæœ¬ï¼ŒQEMU çš„æ–°ç‰ˆæœ¬å°†æ”¯æŒå¤šä¸ªä»¥å‰ç‰ˆæœ¬çš„æœºå™¨ç±»å‹ã€‚æ”¯æŒçš„æœºå™¨å±æ€§æœ‰ï¼š accel=accels1[:accels2[:...]]This is used to enable an accelerator. Depending on the target architecture, kvm, xen, hax, hvf, nvmm, whpx or tcg can be available. By default, tcg is used. If there is more than one accelerator specified, the next one is used if the previous one fails to initialize. vmport=on|off|autoEnables emulation of VMWare IO port, for vmmouse etc. auto says to select the value based on accel. For accel=xen the default is off otherwise the default is on. dump-guest-core=on|offInclude guest memory in a core dump. The default is on. mem-merge=on|offEnables or disables memory merge support. This feature, when supported by the host, de-duplicates identical memory pages among VMs instances (enabled by default). aes-key-wrap=on|offEnables or disables AES key wrapping support on s390-ccw hosts. This feature controls whether AES wrapping keys will be created to allow execution of AES cryptographic functions. The default is on. dea-key-wrap=on|offEnables or disables DEA key wrapping support on s390-ccw hosts. This feature controls whether DEA wrapping keys will be created to allow execution of DEA cryptographic functions. The default is on. nvdimm=on|offEnables or disables NVDIMM support. The default is off. memory-encryption=Memory encryption object to use. The default is none. hmat=on|offEnables or disables ACPI Heterogeneous Memory Attribute Table (HMAT) support. The default is off. memory-backend=&#39;id&#39;An alternative to legacy -mem-path and mem-prealloc options. Allows to use a memory backend as main RAM.For example: :: -object memory-backend-file,id=pc.ram,size=512M,mem-path=/hugetlbfs,prealloc=on,share=on -machine memory-backend=pc.ram -m 512MMigration compatibility note: a) as backend id one shall use value of â€˜default-ram-idâ€™, advertised by machine type (available via query-machines QMP command), if migration to/from old QEMU (&lt;5.0) is expected. b) for machine types 4.0 and older, user shall use x-use-canonical-path-for-ramblock-id=off backend option if migration to/from old QEMU (&lt;5.0) is expected. For example: :: -object memory-backend-ram,id=pc.ram,size=512M,x-use-canonical-path-for-ramblock-id=off -machine memory-backend=pc.ram -m 512M è°ƒç”¨å®ä¾‹ï¼š 1qemu-system-riscv32 -machine virt,mem-merge=on -cpu model åŠŸèƒ½é€‰æ‹© CPU å‹å·ï¼ˆ-cpu helpæ˜¾ç¤ºå¸®åŠ©åˆ—è¡¨å’Œé™„åŠ åŠŸèƒ½çš„é€‰é¡¹ï¼‰ é»˜è®¤æƒ…å†µä¼šç»™å®¢æˆ·æœºæä¾› qemu64 æˆ– qemu32 çš„åŸºæœ¬ CPU æ¨¡å‹ã€‚è¿™æ ·åšå¯ä»¥å¯¹ CPU ç‰¹æ€§æä¾›ä¸€äº›é«˜çº§çš„è¿‡æ»¤åŠŸèƒ½ï¼Œè®©å®¢æˆ·æœºåœ¨åŒä¸€ç»„ç¡¬ä»¶å¹³å°ä¸Šçš„åŠ¨æ€è¿ç§»ä¼šæ›´åŠ å¹³æ»‘å’Œå®‰å…¨ã€‚åœ¨å®¢æˆ·æœºä¸­æŸ¥çœ‹ CPU ä¿¡æ¯ (cat /proc/cpuinfo)ï¼Œmodel name å°±æ˜¯å½“å‰ CPU æ¨¡å‹çš„åç§°ã€‚ è°ƒç”¨å®ä¾‹ 1qemu-system-riscv32 -cpu rv32 accel name[,prop=value[,...]] åŠŸèƒ½This is used to enable an accelerator. Depending on the target architecture, kvm, xen, hax, hvf, nvmm, whpx or tcg can be available. By default, tcg is used. If there is more than one accelerator specified, the next one is used if the previous one fails to initialize. å­å‚æ•° igd-passthru=on|offWhen Xen is in use, this option controls whether Intel integrated graphics devices can be passed through to the guest (default=off) kernel-irqchip=on|off|splitControls KVM in-kernel irqchip support. The default is full acceleration of the interrupt controllers. On x86, split irqchip reduces the kernel attack surface, at a performance cost for non-MSI interrupts. Disabling the in-kernel irqchip completely is not recommended except for debugging purposes. kvm-shadow-mem=sizeDefines the size of the KVM shadow MMU. split-wx=on|offControls the use of split w^x mapping for the TCG code generation buffer. Some operating systems require this to be enabled, and in such a case this will default on. On other operating systems, this will default off, but one may enable this for testing or debugging. tb-size=nControls the size (in MiB) of the TCG translation block cache. thread=single|multiControls number of TCG threads. When the TCG is multi-threaded there will be one thread per vCPU therefore taking advantage of additional host cores. The default is to enable multi-threading where both the back-end and front-ends support it and no incompatible TCG features have been enabled (e.g. icount/replay). dirty-ring-size=nWhen the KVM accelerator is used, it controls the size of the per-vCPU dirty page ring buffer (number of entries for each vCPU). It should be a value that is power of two, and it should be 1024 or bigger (but still less than the maximum value that the kernel supports). 4096 could be a good initial value if you have no idea which is the best. Set this value to 0 to disable the feature. By default, this feature is disabled (dirty-ring-size=0). When enabled, KVM will instead record dirty pages in a bitmap. smp [[cpus=]n][,maxcpus=maxcpus][,sockets=sockets][,dies=dies][,cores=cores][,threads=threads] åŠŸèƒ½é…ç½®å®¢æˆ·æœºçš„ SMPï¼ˆSymmetric Multi-Processingï¼‰ï¼Œå¯¹ç§°å¤šå¤„ç†æœº å­å‚æ•° [cpus=]nè®¾ç½®å®¢æˆ·æœºä¸­ä½¿ç”¨é€»è¾‘çš„ CPU æ•°é‡ï¼ˆé»˜è®¤å€¼æ˜¯ 1ï¼‰ã€‚ [,maxcpus=cpus]è®¾ç½®å®¢æˆ·æœºæœ€å¤§å¯èƒ½è¢«ä½¿ç”¨çš„ CPU æ•°é‡ï¼ˆå¯ä»¥ç”¨çƒ­æ’æ‹” hot-plug æ·»åŠ  CPUï¼Œä¸èƒ½è¶…è¿‡ maxcpus ä¸Šé™ï¼‰ã€‚ [,cores=cores]è®¾ç½®æ¯ä¸ª CPU socket ä¸Šçš„ core æ•°é‡ï¼ˆé»˜è®¤å€¼æ˜¯ 1ï¼‰ã€‚ [,threads=threads]è®¾ç½®æ¯ä¸ª CPU core ä¸Šçš„çº¿ç¨‹æ•°ï¼ˆé»˜è®¤å€¼æ˜¯ 1ï¼‰ã€‚ [,sockets=sockets]è®¾ç½®å®¢æˆ·æœºä¸­æ€»çš„ CPU socket æ•°é‡ã€‚ è°ƒç”¨å®ä¾‹ 1qemu-system-x86_64 -smp 1,sockets=1,cores=2,threads=2 -numa node[,mem=size][,cpus=firstcpu[-lastcpu]][,nodeid=node][,initiator=initiator]-numa node[,memdev=id][,cpus=firstcpu[-lastcpu]][,nodeid=node][,initiator=initiator]-numa dist,src=source,dst=destination,val=distance-numa cpu,node-id=node[,socket-id=x][,core-id=y][,thread-id=z]-numa hmat-lb,initiator=node,target=node,hierarchy=hierarchy,data-type=tpye[,latency=lat][,bandwidth=bw]-numa hmat-cache,node-id=node,size=size,level=level[,associativity=str][,policy=str][,line=size] åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -add-fd fd=fd,set=set[,opaque=opaque] åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -set group.id.arg=value åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -global driver.prop=value åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -global driver=driver,property=property,value=value åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -boot [order=drives][,once=drives][,menu=on|off][,splash=sp_name][,splash-time=sp_time][,reboot-timeout=rb_timeout][,strict=on|off] åŠŸèƒ½è®¾ç½®å®¢æˆ·æœºå¯åŠ¨é¡ºåº åœ¨ qemu æ¨¡æ‹Ÿçš„ x86 å¹³å°ä¸­ï¼Œç”¨â€aâ€ã€â€bâ€åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€å’Œç¬¬äºŒè½¯é©±ï¼Œç”¨â€câ€è¡¨ç¤ºç¬¬ä¸€ä¸ªç¡¬ç›˜ï¼Œç”¨â€dâ€è¡¨ç¤º CD-ROM å…‰é©±ï¼Œç”¨â€nâ€è¡¨ç¤ºä»ç½‘ç»œå¯åŠ¨ã€‚é»˜è®¤ä»ç¡¬ç›˜å¯åŠ¨ã€‚ å­å‚æ•° [order=drives]è®¾ç½®å¯åŠ¨é¡ºåºã€‚ [,once=drives]åªè®¾ç½®ä¸‹ä¸€æ¬¡å¯åŠ¨çš„é¡ºåºï¼Œå†é‡å¯åæ— æ•ˆã€‚ [,menu=on|off]åªè¦å›ºä»¶/BIOS æ”¯æŒï¼Œå°±å¯ä»¥å¯ç”¨äº¤äº’å¼å¼•å¯¼èœå•/æç¤ºã€‚é»˜è®¤ä¸ºéäº¤äº’å¼å¼•å¯¼ã€‚ [,splash=sp_name]å¦‚æœå›ºä»¶/BIOS æ”¯æŒé€‰é¡¹ splash=sp_name å’Œ menu=onï¼Œåˆ™å¯ä»¥å°†å¯åŠ¨ç”»é¢ä¼ é€’ç»™ biosï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå°†å…¶æ˜¾ç¤ºä¸ºå¾½æ ‡ã€‚ç›®å‰ Seabios for X86 ç³»ç»Ÿæ”¯æŒå®ƒã€‚é™åˆ¶ï¼šå¯åŠ¨æ–‡ä»¶å¯ä»¥æ˜¯ 24 BPP æ ¼å¼ï¼ˆçœŸå½©è‰²ï¼‰çš„ jpeg æ–‡ä»¶æˆ– BMP æ–‡ä»¶ã€‚åˆ†è¾¨ç‡åº”è¯¥æ˜¯ SVGA æ¨¡å¼æ”¯æŒçš„ï¼Œæ¨è 320x240ã€640x480ã€800x640ã€‚ [,splash-time=sp_time] [,reboot-timeout=rb_timeout]å¼•å¯¼å¤±è´¥æ—¶ï¼Œå®¢æˆ·æœºå°†æš‚åœ rb_timeout æ¯«ç§’ï¼Œç„¶åé‡æ–°å¯åŠ¨ã€‚å¦‚æœ rb_timeout ä¸º â€˜-1â€™ï¼Œå®¢æˆ·æœºä¸ä¼šé‡å¯ï¼Œqemu é»˜è®¤å°† â€˜-1â€™ ä¼ é€’ç»™ biosã€‚ç›®å‰ Seabios for X86 ç³»ç»Ÿæ”¯æŒå®ƒã€‚ [,strict=on|off]åªè¦å›ºä»¶/BIOS æ”¯æŒï¼Œå°±é€šè¿‡ä¸¥æ ¼å¯åŠ¨ã€‚è¿™ä»…åœ¨ bootindex é€‰é¡¹æ›´æ”¹å¼•å¯¼ä¼˜å…ˆçº§æ—¶æœ‰æ•ˆã€‚é»˜è®¤ä¸ºéä¸¥æ ¼å¼•å¯¼ã€‚ è°ƒç”¨å®ä¾‹ 123456# å°è¯•å…ˆä»ç½‘ç»œå¯åŠ¨ï¼Œç„¶åä»ç¡¬ç›˜å¯åŠ¨qemu-system-x86_64 -boot order=nc# å…ˆä»å…‰é©±å¯åŠ¨ï¼Œé‡å¯ååˆ‡æ¢å›é»˜è®¤é¡ºåºqemu-system-x86_64 -boot once=d# 5 ç§’é’Ÿçš„å¯åŠ¨ç”»é¢ã€‚qemu-system-x86_64 -boot menu=on,splash=/root/boot.bmp,splash-time=5000 -m [size=]megs[,slots=n,maxmem=size] åŠŸèƒ½å°†å®¢æˆ·æœºå†…å­˜è®¾ç½®ä¸º megs Må­—èŠ‚ã€‚é»˜è®¤å€¼ä¸º 128 MiBã€‚æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨â€œMâ€æˆ–â€œGâ€çš„åç¼€ã€‚é½ã€‚ å­å‚æ•° [size=]megså°†å®¢æˆ·æœºå†…å­˜è®¾ç½®ä¸º megs Må­—èŠ‚ [,slots=n,maxmem=size]å¯ç”¨äºè®¾ç½®å¯çƒ­æ’æ‹”å†…å­˜æ’æ§½çš„æ•°é‡å’Œæœ€å¤§å†…å­˜æ•°é‡ã€‚maxmem å¿…é¡»ä¸é¡µé¢å¤§å°å¯¹ è°ƒç”¨å®ä¾‹ä»¥ä¸‹å‘½ä»¤è¡Œå°†å®¢æˆ·æœºå¯åŠ¨ RAM å¤§å°è®¾ç½®ä¸º 1GBï¼Œåˆ›å»º 3 ä¸ªæ’æ§½ä»¥çƒ­æ’æ‹”é¢å¤–å†…å­˜ï¼Œå¹¶å°†å®¢æˆ·æœºå¯ä»¥è¾¾åˆ°çš„æœ€å¤§å†…å­˜è®¾ç½®ä¸º 4GBï¼š 1qemu-system-x86_64 -m 1G,slots=3,maxmem=4G å¦‚æœæœªæŒ‡å®š slot å’Œ maxmemï¼Œåˆ™ä¸ä¼šå¯ç”¨å†…å­˜çƒ­æ’æ‹”ï¼Œå¹¶ä¸”å®¢æˆ·æœºå†…å­˜æ°¸è¿œä¸ä¼šå¢åŠ ã€‚ -mem-path path åŠŸèƒ½ä½¿ç”¨huge pageã€‚å¯¹äºå†…å­˜è®¿é—®å¯†é›†å‹çš„åº”ç”¨ï¼Œä½¿ç”¨huge pageæ˜¯å¯ä»¥æ¯”è¾ƒæ˜æ˜¾åœ°æé«˜å®¢æˆ·æœºæ€§èƒ½ã€‚ ä½¿ç”¨huge pageçš„å†…å­˜ä¸èƒ½è¢«æ¢å‡ºï¼ˆswap outï¼‰ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ballooningæ–¹å¼è‡ªåŠ¨å¢é•¿ã€‚ å­å‚æ•° è°ƒç”¨å®ä¾‹ -mem-prealloc åŠŸèƒ½ä½¿å®¿ä¸»æœºåœ¨å®¢æˆ·æœºå¯åŠ¨æ—¶å°±å…¨éƒ¨åˆ†é…å¥½å®¢æˆ·æœºçš„å†…å­˜ å­å‚æ•° è°ƒç”¨å®ä¾‹ -k language åŠŸèƒ½è®¾ç½®é”®ç›˜å¸ƒå±€è¯­è¨€ï¼Œé»˜è®¤ä¸ºen-us å­å‚æ•°å¯ç”¨å¸ƒå±€ï¼š 123ar de-ch es fo fr-ca hu ja mk no pt-br svda en-gb et fr fr-ch is lt nl pl ru thde en-us fi fr-be hr it lv nl-be pt sl tr è°ƒç”¨å®ä¾‹ å—è®¾å¤‡å‚æ•° Block device optionsfda file åŠŸèƒ½ä¸ºå®¢æˆ·æœºæŒ‡å®šè½¯ç›˜è®¾å¤‡ï¼ŒæŒ‡å®šå®¢æˆ·æœºçš„ç¬¬ä¸€ä¸ªè½¯ç›˜è®¾å¤‡ï¼Œåœ¨å®¢æˆ·æœºä¸­æ˜¾ç¤ºä¸º/dev/fd0 å­å‚æ•° è°ƒç”¨å®ä¾‹ fdb file åŠŸèƒ½ä¸ºå®¢æˆ·æœºæŒ‡å®šè½¯ç›˜è®¾å¤‡ï¼ŒæŒ‡å®šå®¢æˆ·æœºçš„ç¬¬ä¸€ä¸ªè½¯ç›˜è®¾å¤‡ï¼Œåœ¨å®¢æˆ·æœºä¸­æ˜¾ç¤ºä¸º/dev/fd1 å­å‚æ•° è°ƒç”¨å®ä¾‹ hda filehdb filehdc filehdd file åŠŸèƒ½ä¸ºå®¢æˆ·æœºæŒ‡å®šå—å­˜å‚¨è®¾å¤‡ï¼ŒæŒ‡å®šå®¢æˆ·æœºç§çš„ç¬¬ä¸€ä¸ª IDE è®¾å¤‡ å­å‚æ•°è‹¥å®¢æˆ·æœºä½¿ç”¨PIIX_IDEé©±åŠ¨ï¼Œæ˜¾ç¤ºä¸º/dev/hdaè®¾å¤‡ï¼›è‹¥å®¢æˆ·æœºä½¿ç”¨ata_piixé©±åŠ¨ï¼Œæ˜¾ç¤ºä¸º/dev/sdaè®¾å¤‡ã€‚è‹¥æ²¡æœ‰ä½¿ç”¨-hdxçš„å‚æ•°ï¼Œåˆ™é»˜è®¤ä½¿ç”¨-hdaå‚æ•°ï¼›å¯ä»¥å°†å®¿ä¸»æœºçš„ä¸€å—ç¡¬ç›˜ä½œä¸º-hdaçš„å‚æ•°ä½¿ç”¨ï¼›è‹¥æ–‡ä»¶ååŒ…å«é€—å·ï¼Œåº”ä½¿ç”¨ä¸¤ä¸ªè¿ç»­çš„é€—å·è¿›è¡Œè½¬ä¹‰ã€‚ è°ƒç”¨å®ä¾‹ -cdrom file åŠŸèƒ½ä¸ºå®¢æˆ·æœºæŒ‡å®šå…‰ç›˜ CD-ROMã€‚å¯ä»¥å°†å®¿ä¸»æœºçš„å…‰é©±/dev/cdromè®¾å¤‡ä½œä¸º-cdromå‚æ•°ä½¿ç”¨ã€‚-cdromå‚æ•°ä¸èƒ½ä¸-hdcå‚æ•°åŒæ—¶ä½¿ç”¨ï¼Œå› ä¸º-cdromå°±æ˜¯å®¢æˆ·æœºé‡Œçš„ç¬¬ä¸‰ä¸ª IDE è®¾å¤‡ å­å‚æ•° è°ƒç”¨å®ä¾‹ -blockdev option[,option[,option[,...]]] åŠŸèƒ½ å­å‚æ•° è°ƒç”¨å®ä¾‹ -drive option[,option[,option[,...]]] åŠŸèƒ½å®šä¹‰ä¸€ä¸ªå­˜å‚¨é©±åŠ¨å™¨ å­å‚æ•° [file=file]åŠ è½½fileé•œåƒæ–‡ä»¶åˆ°å®¢æˆ·æœºçš„é©±åŠ¨å™¨ä¸­ã€‚ [,if=type]æŒ‡å®šé©±åŠ¨å™¨ä½¿ç”¨çš„æ¥å£ç±»å‹ï¼šå¯ç”¨çš„ç±»ç±»å‹æœ‰ï¼šideã€scsiã€virtioã€sdã€floopyã€pflashç­‰ã€‚ [,bus=n]è®¾ç½®é©±åŠ¨å™¨åœ¨å®¢æˆ·æœºä¸­çš„æ€»çº¿ç¼–å·ã€‚ [,unit=m]è®¾ç½®é©±åŠ¨å™¨åœ¨å®¢æˆ·æœºä¸­çš„å•å…ƒç¼–å·ã€‚ [,media=d]è®¾ç½®é©±åŠ¨å™¨ä¸­åª’ä»‹çš„ç±»å‹ï¼Œå€¼ä¸º disk æˆ– cdromã€‚ [,index=i]è®¾ç½®åœ¨é€šä¸€ç§æ¥å£çš„é©±åŠ¨å™¨ä¸­çš„ç´¢å¼•ç¼–å·ã€‚ [,snapshot=on|off]å½“å€¼ä¸º on æ—¶ï¼Œqemu ä¸ä¼šå°†ç£ç›˜æ•°æ®çš„æ›´æ”¹å†™å›åˆ°é•œåƒæ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å†™åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¯ä»¥åœ¨ qemu moinitor ä¸­ä½¿ç”¨ commit å‘½ä»¤å¼ºåˆ¶å°†ç£ç›˜æ•°æ®ä¿å­˜å›é•œåƒæ–‡ä»¶ä¸­ã€‚ [,cache=writethrough|writeback|none|directsync|unsafe]è®¾ç½®å®¿ä¸»æœºå¯¹å—è®¾å¤‡æ•°æ®è®¿é—®çš„ cache æ¨¡å¼ã€‚ï¼Œwritethroughï¼ˆç›´å†™æ¨¡å¼ï¼‰ï¼šè°ƒç”¨ write å†™å…¥æ•°æ®çš„åŒæ—¶å°†æ•°æ®å†™å…¥ç£ç›˜ç¼“å­˜å’Œåç«¯å—è®¾å¤‡ä¸­ã€‚writebackï¼ˆå›å†™æ¨¡å¼ï¼‰ï¼šè°ƒç”¨ write å†™å…¥æ•°æ®æ—¶åªå°†æ•°æ®å†™å…¥åˆ°ç£ç›˜ç¼“å­˜ä¸­ï¼Œå½“æ•°æ®è¢«æ¢å‡ºç¼“å­˜æ—¶æ‰å†™å…¥åˆ°åç«¯å­˜å‚¨ä¸­ã€‚ä¼˜ç‚¹å†™å…¥æ•°æ®å—ï¼Œç¼ºç‚¹ç³»ç»Ÿæ‰ç”µæ•°æ®æ— æ³•æ¢å¤ã€‚ [,aio=threads|native]é€‰æ‹©å¼‚æ­¥ IO çš„æ–¹å¼ threadsä¸º aio å‚æ•°çš„é»˜è®¤å€¼ï¼Œè®©ä¸€ä¸ªçº¿ç¨‹æ± å»å¤„ç†å¼‚æ­¥ IOï¼› nativeåªé€‚ç”¨äº cache=none çš„æƒ…å†µï¼Œä½¿ç”¨çš„æ˜¯ Linux åŸç”Ÿçš„ AIOã€‚ [,format=f]æŒ‡å®šä½¿ç”¨çš„ç£ç›˜æ ¼å¼ï¼Œé»˜è®¤æ˜¯ QEMU è‡ªåŠ¨æ£€æµ‹ç£ç›˜æ ¼å¼çš„ã€‚ [,serial=s]æŒ‡å®šåˆ†é…ç»™è®¾å¤‡çš„åºåˆ—å·ã€‚ [,addr=A]åˆ†é…ç»™é©±åŠ¨å™¨æ§åˆ¶å™¨çš„ PCI åœ°å€ï¼Œåªåœ¨ä½¿ç”¨ virtio æ¥å£æ—¶é€‚ç”¨ã€‚ [,id=name]è®¾ç½®é©±åŠ¨å™¨çš„ IDï¼Œå¯ä»¥åœ¨ QEMU monitor ä¸­ç”¨ info block çœ‹åˆ°ã€‚[,readonly=on|off]è®¾ç½®é©±åŠ¨å™¨æ˜¯å¦åªè¯»ã€‚ è°ƒç”¨å®ä¾‹ USB å‚æ•° USB convenience optionsæ˜¾ç¤ºå‚æ•° Display optionsä»…é™ i386 æ¶æ„çš„å‚æ•° i386 target onlyç½‘ç»œå‚æ•° Network optionså­—ç¬¦è®¾å¤‡å‚æ•° Character device optionsTPM è®¾å¤‡ TPM device optionsæŒ‡å®šå¯åŠ¨æŒ‡å¼• Linux/Multiboot boot specificå½“ä½¿ç”¨è¯¥è°ƒç”¨å‚æ•°æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ç»™å®šçš„ Linux æˆ–è€…å¤šé‡å¼•å¯¼å†…æ ¸ï¼Œè€Œä¸éœ€è¦å®‰è£…å†…æ ¸åˆ°ä¸€ä¸ªå…‰ç›˜ä¸­ã€‚è¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿åœ°æµ‹è¯•ä¸åŒå†…æ ¸ã€‚ -kernel bzImage åŠŸèƒ½ç”¨ bzImage ä½œä¸ºå†…æ ¸é•œåƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å¯åŠ¨æ ¼å¼ã€‚ -append cmdline åŠŸèƒ½ç”¨cmdå‘½ä»¤è¡Œï¼Œä½œä¸ºå†…æ ¸çš„å‘½ä»¤è¡Œ -initrd file åŠŸèƒ½ç”¨æ–‡ä»¶ä½œä¸ºåˆå§‹åŒ– ram -initrd &quot;file1 arg=foo,file2&quot; åŠŸèƒ½æ­¤è¯­æ³•ä»…é€‚ç”¨äºå¤šé‡å¼•å¯¼ä½¿ç”¨ file1 å’Œ file2 ä½œä¸ºæ¨¡å—å¹¶å°† arg=foo ä½œä¸ºå‚æ•°ä¼ é€’ç»™ç¬¬ä¸€ä¸ªæ¨¡å— -dtb file åŠŸèƒ½å°†æ–‡ä»¶ç”¨ä½œè®¾å¤‡æ ‘äºŒè¿›åˆ¶ (dtb) æ˜ åƒå¹¶åœ¨å¯åŠ¨æ—¶å°†å…¶ä¼ é€’ç»™å†…æ ¸","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"Git è¸©å‘è®°å½•","slug":"gitè¸©å‘è®°å½•","date":"2021-07-23T03:55:57.000Z","updated":"2022-10-15T03:14:29.241Z","comments":true,"path":"2021/07/23/gitè¸©å‘è®°å½•/","link":"","permalink":"http://example.com/2021/07/23/git%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/","excerpt":"","text":"åˆ›å»ºä»“åº“æ—¶æ²¡æœ‰åŠ å…¥ gitignore æ–‡ä»¶ï¼Œä¸Šä¼ äº†ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œåæ·»åŠ äº† gitignore æ–‡ä»¶å¦‚ä½•åŒæ­¥è¿œç¨‹ä¸æœ¬åœ°çš„æ–‡ä»¶ï¼ˆè‡ªåŠ¨åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ï¼‰1234567# æ³¨æ„æœ‰ä¸ªç‚¹â€œ.â€å–æ¶ˆç‰ˆæœ¬æ§åˆ¶git rm -r --cached .é‡æ–°æ·»åŠ git add -Aé‡æ–°æäº¤git commit -m &quot;update .gitignore&quot; Git rm å’Œ rm â€“cached åŒºåˆ«rm ï¼šå½“éœ€è¦åˆ é™¤æš‚å­˜åŒºæˆ–åˆ†æ”¯ä¸Šçš„æ–‡ä»¶ï¼ŒåŒæ—¶å·¥ä½œåŒºä¸éœ€è¦è¿™ä¸ªæ–‡ä»¶ rm --cachedï¼šå½“éœ€è¦åˆ é™¤æš‚å­˜åŒºæˆ–åˆ†æ”¯ä¸Šçš„æ–‡ä»¶ï¼ŒåŒæ—¶å·¥ä½œåŒºéœ€è¦è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ä¸éœ€è¦è¢«ç‰ˆæœ¬æ§åˆ¶ã€‚å°±æ˜¯æœ¬åœ°éœ€è¦ä¿ç•™ï¼Œä½†æ˜¯è¿œç¨‹ä¸ä¿ç•™ æ¨é€ç©ºæ–‡ä»¶å¤¹åˆ°è¿œç¨‹ä»“åº“åœ¨éœ€è¦æ¨é€çš„ç©ºæ–‡ä»¶ä¸‹åˆ›å»ºâ€.gitkeepâ€æ–‡ä»¶åœ¨â€.gitignoreâ€æ–‡ä»¶ä¸­ç¼–å†™è§„åˆ™!.gitkeep å…‹éš†æŒ‡å®šåˆ†æ”¯ä»£ç 1git clone -b master https://github.com/Dunky-Z/Dunky-Z.github.io.git masterå°±æ˜¯åˆ†æ”¯å","categories":[{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"}]},{"title":"QEMU åˆè¯†","slug":"QEMUåˆè¯†","date":"2021-07-23T03:54:49.000Z","updated":"2022-10-15T03:14:29.378Z","comments":true,"path":"2021/07/23/QEMUåˆè¯†/","link":"","permalink":"http://example.com/2021/07/23/QEMU%E5%88%9D%E8%AF%86/","excerpt":"","text":"ç®€ä»‹QEMU æ˜¯ä¸€æ¬¾å¼€æºçš„æ¨¡æ‹Ÿå™¨åŠè™šæ‹Ÿæœºç›‘ç®¡å™¨ (Virtual Machine Monitor, VMM)ã€‚QEMU ä¸»è¦æä¾›ä¸¤ç§åŠŸèƒ½ç»™ç”¨æˆ·ä½¿ç”¨ã€‚ä¸€æ˜¯ä½œä¸ºç”¨æˆ·æ€æ¨¡æ‹Ÿå™¨ï¼Œåˆ©ç”¨åŠ¨æ€ä»£ç ç¿»è¯‘æœºåˆ¶æ¥æ‰§è¡Œä¸åŒäºä¸»æœºæ¶æ„çš„ä»£ç ã€‚äºŒæ˜¯ä½œä¸ºè™šæ‹Ÿæœºç›‘ç®¡å™¨ï¼Œæ¨¡æ‹Ÿå…¨ç³»ç»Ÿï¼Œåˆ©ç”¨å…¶ä»– VMM(Xen, KVM, etc) æ¥ä½¿ç”¨ç¡¬ä»¶æä¾›çš„è™šæ‹ŸåŒ–æ”¯æŒï¼Œåˆ›å»ºæ¥è¿‘äºä¸»æœºæ€§èƒ½çš„è™šæ‹Ÿæœºã€‚ å®‰è£…ä½¿ç”¨åŒ…ç®¡ç†å®‰è£…1sudo apt-get install qemu ä½¿ç”¨æºç å®‰è£…123wget wget https://download.qemu.org/qemu-6.1.0-rc3.tar.xztar xvJf qemu-6.1.0-rc3.tar.xzcd qemu-6.1.0-rc3 å®‰è£…ç›¸å…³åº“12345apt-get install libglib2.0-devapt-get install ninja-buildapt install g++apt install libpixman-1-devapt install libsdl2-dev -y é…ç½®é€šè¿‡./configure --help çš„æŸ¥çœ‹ç¼–è¯‘æ—¶çš„é€‰é¡¹ï¼Œ--target-listé€‰é¡¹ä¸ºå¯é€‰çš„æ¨¡æ‹Ÿå™¨ï¼Œé»˜è®¤å…¨é€‰ã€‚--target-list ä¸­çš„ xxx-soft å’Œ xxx-linux-user åˆ†åˆ«æŒ‡ç³»ç»Ÿæ¨¡æ‹Ÿå™¨å’Œåº”ç”¨ç¨‹åºæ¨¡æ‹Ÿå™¨ï¼Œç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶åå­—ä¸ºqemu-system-xxxå’Œ qemu-xxxæœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼š 1234./configure --prefix=XXX --enable-debug --target-list=riscv32-softmmu,riscv32-linux-user,riscv64-linux-user,riscv64-softmmu --enable-kvm# --prefix é€‰é¡¹è®¾ç½®qemuçš„å®‰è£…ä½ç½®ç»å¯¹è·¯å¾„ï¼Œä¹‹åè‹¥è¦å¸è½½åˆ é™¤qemuåªè¦åˆ é™¤è¯¥æ–‡ä»¶å¤¹å³å¯ï¼Œ--enable-kvmå¼€å¯kvm# configå®Œï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„qemuå®‰è£…æ–‡ä»¶å¤¹ä¸‹é¢æ‰¾åˆ°config-host.makæ–‡ä»¶ï¼Œ# è¯¥æ–‡ä»¶è®°å½•ç€qemué…ç½®çš„é€‰é¡¹ï¼Œå¯ä»¥å’Œè‡ªå·±è®¾ç½®çš„è¿›è¡Œå¯¹æ¯”ï¼Œç¡®ä¿é…ç½®å’Œè‡ªå·±å·²çŸ¥ æ¥ç€è¿›è¡Œç¼–è¯‘ 1make -j8 ç›´æ¥makeä¼šå¾ˆæ…¢ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘æ—¶é»˜è®¤å®‰è£…è¯´æœ‰æ¨¡æ‹Ÿå™¨ï¼Œç¼–è¯‘äº†ä¸‰å››ä¸ªå°æ—¶ã€‚åŠ ä¸Š-j8å¯ä»¥è¿›è¡Œå¤šçº¿ç¨‹ç¼–è¯‘ åˆ›å»ºä¸ä½¿ç”¨åˆ›å»ºè™šæ‹Ÿé•œåƒä½¿ç”¨è™šæ‹Ÿé•œåƒæ¥æ¨¡æ‹Ÿè™šæ‹Ÿæœºçš„ç¡¬ç›˜ï¼Œåœ¨å¯åŠ¨è™šæ‹Ÿæœºä¹‹å‰éœ€è¦åˆ›å»ºä¸€ä¸ªé•œåƒæ–‡ä»¶ 1234root@hanhan:/home/dominic/qemu/# qemu-img create -f qcow2 qmtest.img 10GFormatting &#x27;qmtest.img&#x27;, fmt=qcow2 size=10737418240 encryption=off cluster_size=65536 lazy_refcounts=off root@hanhan:/home/dominic/qemu/# lsqmtest.img -fé€‰é¡¹ç”¨äºæŒ‡å®šé•œåƒçš„æ ¼å¼ï¼Œqcow2æ ¼å¼æ˜¯ QEMU æœ€å¸¸ç”¨çš„é•œåƒæ ¼å¼ï¼Œé‡‡ç”¨å†™æ—¶å¤åˆ¶æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½ã€‚qmtest.imgæ˜¯é•œåƒæ–‡ä»¶çš„åå­—ï¼Œ10Gæ˜¯é•œåƒæ–‡ä»¶å¤§å°ã€‚ é•œåƒæ–‡ä»¶åˆ›å»ºå®Œæˆåï¼Œå¯ä½¿ç”¨qemu-system-x86æ¥å¯åŠ¨x86æ¶æ„çš„è™šæ‹Ÿæœºï¼š 1qemu-system-x86_64 qmtest.img qmtest.img ä¸­è¿˜æœªå®‰è£…æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥ä¼šæç¤ºâ€œNo bootable deviceâ€çš„é”™è¯¯ã€‚ å‡†å¤‡æ“ä½œç³»ç»Ÿé•œåƒä¸‹è½½éœ€è¦çš„ Linux å‘è¡Œç‰ˆé•œåƒæ–‡ä»¶ï¼Œhttps://launchpad.net/ubuntu/+cdmirrorsï¼Œæ‰¾åˆ°æƒ³è¦ä¸‹è½½çš„é•œåƒï¼Œè¿™é‡Œä»¥äº¤é€šå¤§å­¦çš„é•œåƒä¸ºä¾‹å³å‡»é“¾æ¥å¤åˆ¶åœ°å€ï¼šhttps://ftp.sjtu.edu.cn/ubuntu-cd/20.10/ubuntu-20.10-live-server-amd64.iso 1root@hanhan:/home/dominic/qemu/# wget https://ftp.sjtu.edu.cn/ubuntu-cd/20.10/ubuntu-20.10-live-server-amd64.iso æ£€æŸ¥ KVM æ˜¯å¦å¯ç”¨QEMU ä½¿ç”¨ KVM æ¥æå‡è™šæ‹Ÿæœºæ€§èƒ½ï¼Œå¦‚æœä¸å¯ç”¨ KVM ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ã€‚è¦ä½¿ç”¨ KVMï¼Œé¦–å…ˆè¦æ£€æŸ¥ç¡¬ä»¶æ˜¯å¦æœ‰è™šæ‹ŸåŒ–æ”¯æŒï¼š 1root@hanhan:/home/dominic/qemu/# grep -E &#x27;vmx|svm&#x27; /proc/cpuinfo å¦‚æœæœ‰è¾“å‡ºåˆ™è¡¨ç¤ºç¡¬ä»¶æœ‰è™šæ‹ŸåŒ–æ”¯æŒã€‚å…¶æ¬¡è¦æ£€æŸ¥ kvm æ¨¡å—æ˜¯å¦å·²ç»åŠ è½½ï¼š 123root@hanhan:/home/dominic/qemu/# lsmod | grep kvmkvm_intel 142999 0 kvm 444314 1 kvm_intel å¦‚æœkvm_intel/kvm_amdã€kvmæ¨¡å—è¢«æ˜¾ç¤ºå‡ºæ¥ï¼Œåˆ™kvmæ¨¡å—å·²ç»åŠ è½½ã€‚æœ€åè¦ç¡®ä¿ qemu åœ¨ç¼–è¯‘çš„æ—¶å€™ä½¿èƒ½äº†KVMï¼Œå³åœ¨æ‰§è¡Œconfigureè„šæœ¬çš„æ—¶å€™åŠ å…¥äº†â€“enable-kvmé€‰é¡¹ã€‚ å¯åŠ¨è™šæ‹Ÿæœºå®‰è£…æ“ä½œç³»ç»Ÿ1root@hanhan:/home/dominic/qemu/# qemu-system-x86_64 -m 2048 -enable-kvm qmtest.img -cdrom ./Fedora-Live-Desktop-x86_64-20-1.iso -mæŒ‡å®šè™šæ‹Ÿæœºå†…å­˜å¤§å°ï¼Œé»˜è®¤å•ä½æ˜¯ MBï¼Œ-enable-kvmä½¿ç”¨ KVM è¿›è¡ŒåŠ é€Ÿï¼Œ-cdromæ·»åŠ  fedora çš„å®‰è£…é•œåƒã€‚å¯åœ¨å¼¹å‡ºçš„çª—å£ä¸­æ“ä½œè™šæ‹Ÿæœºï¼Œå®‰è£…æ“ä½œç³»ç»Ÿï¼Œå®‰è£…å®Œæˆåé‡èµ·è™šæ‹Ÿæœºä¾¿ä¼šä»ç¡¬ç›˜ (qmtest.img) å¯åŠ¨ã€‚ä¹‹åå†å¯åŠ¨è™šæ‹Ÿæœºåªéœ€è¦æ‰§è¡Œï¼š 1root@hanhan:/home/dominic/qemu/# qemu-system-x86_64 -m 2048 -enable-kvm qmtest.img é€€å‡º qemuåœ¨è¿è¡Œ qemu åï¼Œå…³é—­å›¾å½¢ç•Œé¢ä½†æ˜¯ç»ˆç«¯ä»ç„¶æ˜¯å¤„äº qemu ç¯å¢ƒä¸­ï¼Œå¯ä»¥ç›´æ¥å…³é—­ç»ˆç«¯é€€å‡ºã€‚å¦‚æœä¸æƒ³å…³é—­ç»ˆç«¯ï¼Œå¯ä»¥å¦å¤–æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ kill è¿›ç¨‹ 1killall qemu-system-riscv32 å¦‚æœè®°ä¸æ¸…å…¨ç§°ï¼Œå¯ä»¥è¾“å…¥å¤§æ¦‚åç§°å›è½¦åä¼šåˆ—å‡ºç›¸å…³çš„è¿›ç¨‹","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"ä»€ä¹ˆæ˜¯é©±åŠ¨ï¼Œé©±åŠ¨çš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ","slug":"ä»€ä¹ˆæ˜¯é©±åŠ¨ï¼Œé©±åŠ¨çš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ","date":"2021-07-21T07:02:58.000Z","updated":"2022-10-15T02:59:01.706Z","comments":true,"path":"2021/07/21/ä»€ä¹ˆæ˜¯é©±åŠ¨ï¼Œé©±åŠ¨çš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ/","link":"","permalink":"http://example.com/2021/07/21/%E4%BB%80%E4%B9%88%E6%98%AF%E9%A9%B1%E5%8A%A8%EF%BC%8C%E9%A9%B1%E5%8A%A8%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8F%88%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/","excerpt":"","text":"ä»»ä½•ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œéƒ½æ˜¯ç³»ç»Ÿä¸­è½¯ç¡¬ä»¶åä½œçš„ç»“æœï¼Œæ²¡æœ‰ç¡¬ä»¶çš„è½¯ä»¶æ˜¯ç©ºä¸­æ¥¼é˜ï¼Œè€Œæ²¡æœ‰è½¯ä»¶çš„ç¡¬ä»¶åˆ™åªæ˜¯ä¸€å †åºŸé“ã€‚â€“å¤©æœ— - æ˜Ÿç©º ç¡¬ä»¶æ˜¯åº•å±‚åŸºç¡€ï¼Œæ‰€æœ‰è½¯ä»¶ä»£ç çš„è¿è¡Œå¹³å°ï¼Œç›¸å¯¹å›ºå®šä¸æ˜“æ”¹å˜ï¼Œè€Œè½¯ä»¶æ˜¯å…·ä½“çš„åº”ç”¨ï¼Œå®ƒçµæ´»å¤šå˜ï¼Œå¯ä»¥åº”å¯¹ç”¨æˆ·çš„ä¸åŒéœ€æ±‚ã€‚ ä¸ºå°½å¯èƒ½å¿«é€Ÿåœ°å®Œæˆè®¾è®¡ï¼Œåº”ç”¨è½¯ä»¶å·¥ç¨‹å¸ˆä¸æƒ³ä¹Ÿä¸å¿…å…³å¿ƒç¡¬ä»¶ï¼Œè€Œç¡¬ä»¶å·¥ç¨‹å¸ˆä¹Ÿéš¾æœ‰è¶³å¤Ÿçš„é—²æš‡å’Œèƒ½åŠ›æ¥é¡¾å¿Œè½¯ä»¶ã€‚è­¬å¦‚ï¼Œåº”ç”¨è½¯ä»¶å·¥ç¨‹å¸ˆåœ¨è°ƒç”¨å¥—æ¥å­—å‘é€å’Œæ¥æ”¶æ•°æ®åŒ…çš„æ—¶å€™ï¼Œä¸å¿…å…³å¿ƒç½‘å¡ä¸Šçš„å¯„å­˜å™¨ã€å­˜å‚¨ç©ºé—´ã€I/O ç«¯å£ã€ç‰‡é€‰ä»¥åŠå…¶ä»–ä»»ä½•ç¡¬ä»¶å±‚é¢çš„æ“ä½œè°ƒåº¦ï¼›åœ¨ä½¿ç”¨printf()å‡½æ•°è¾“å‡ºä¿¡æ¯çš„æ—¶å€™ï¼Œä»–ä¸ç”¨çŸ¥é“åº•å±‚ç©¶ç«Ÿæ˜¯æ€æ ·æŠŠç›¸åº”çš„ä¿¡æ¯è¾“å‡ºåˆ°å±å¹•æˆ–è€…ä¸²å£çš„å…·ä½“ç¡¬ä»¶è¿‡ç¨‹ï¼Œéœ€è¦çš„åªæ˜¯å‡ºç°ç›¸åº”çš„æ˜¾ç¤ºæ•ˆæœã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨è½¯ä»¶å·¥ç¨‹å¸ˆéœ€è¦çœ‹åˆ°ä¸€ä¸ªæ²¡æœ‰ç¡¬ä»¶çš„çº¯ç²¹çš„è½¯ä»¶ä¸–ç•Œï¼Œç¡¬ä»¶å¿…é¡»è¢«é€æ˜åœ°å‘ˆç°ç»™ä»–ä»¬ã€‚è°æ¥å®ç°ç¡¬ä»¶å¯¹åº”ç”¨è½¯ä»¶å·¥ç¨‹å¸ˆçš„éšå½¢ï¼Ÿè¿™ä¸ªè‰°å·¨çš„ä»»åŠ¡å°±è½åœ¨äº†é©±åŠ¨å·¥ç¨‹å¸ˆçš„å¤´ä¸Šã€‚ å¯¹è®¾å¤‡é©±åŠ¨æœ€é€šä¿—çš„è§£é‡Šå°±æ˜¯â€œé©±ä½¿ç¡¬ä»¶è®¾å¤‡è¡ŒåŠ¨â€ ã€‚è®¾å¤‡é©±åŠ¨ä¸åº•å±‚ç¡¬ä»¶ç›´æ¥æ‰“äº¤é“ï¼ŒæŒ‰ç…§ç¡¬ä»¶è®¾å¤‡çš„å…·ä½“å·¥ä½œæ–¹å¼è¯»å†™è®¾å¤‡å¯„å­˜å™¨ï¼Œå®Œæˆè®¾å¤‡çš„è½®è¯¢ã€ä¸­æ–­å¤„ç†ã€DMA é€šä¿¡ï¼Œè¿›è¡Œç‰©ç†å†…å­˜å‘è™šæ‹Ÿå†…å­˜çš„æ˜ å°„ï¼Œæœ€ç»ˆä½¿é€šä¿¡è®¾å¤‡èƒ½å¤Ÿæ”¶å‘æ•°æ®ï¼Œä½¿æ˜¾ç¤ºè®¾å¤‡èƒ½å¤Ÿæ˜¾ç¤ºæ–‡å­—å’Œç”»é¢ï¼Œä½¿å­˜å‚¨è®¾å¤‡èƒ½å¤Ÿè®°å½•æ–‡ä»¶å’Œæ•°æ®ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Driver","slug":"Driver","permalink":"http://example.com/tags/Driver/"}]},{"title":"Hexo æ­å»º GitHub åšå®¢å¦‚ä½•æ·»åŠ  README æ–‡ä»¶","slug":"Hexoæ­å»ºGitHubåšå®¢å¦‚ä½•æ·»åŠ READMEæ–‡ä»¶","date":"2021-07-21T04:14:46.000Z","updated":"2022-10-15T03:14:29.254Z","comments":true,"path":"2021/07/21/Hexoæ­å»ºGitHubåšå®¢å¦‚ä½•æ·»åŠ READMEæ–‡ä»¶/","link":"","permalink":"http://example.com/2021/07/21/Hexo%E6%90%AD%E5%BB%BAGitHub%E5%8D%9A%E5%AE%A2%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0README%E6%96%87%E4%BB%B6/","excerpt":"","text":"åˆšå¼€å§‹æ­å»ºçš„æ—¶å€™å¹¶æ²¡æœ‰ä¸ºä»“åº“æ·»åŠ  Readme æ–‡ä»¶ï¼Œä½†æ˜¯åæœŸæ·»åŠ ä¹Ÿä¸èƒ½ç›´æ¥åœ¨ä»“åº“é‡Œç›´æ¥æ·»åŠ ï¼Œå› ä¸ºæ¯æ¬¡éƒ¨ç½²éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚æ·»åŠ æ–¹æ³•ï¼š åœ¨åšå®¢æ ¹ç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹æ–°å»ºREADME.mdæ–‡ä»¶ åœ¨æ ¹ç›®å½•çš„_config.ymlæ–‡ä»¶ä¸­æœç´¢skip_renderï¼Œå¹¶åšå¦‚ä¸‹æ›´æ”¹ 1skip_render: README.md å› ä¸ºåœ¨æ¯æ¬¡hexo gæ—¶å€™ï¼ŒREADME æ–‡ä»¶éƒ½ä¼šè¢«è‡ªåŠ¨æ¸²æŸ“ä¸º HTML æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰æ¸²æŸ“å™¨è·³è¿‡è¿™ä¸ªæ–‡ä»¶ä¸è¦æ¸²æŸ“å®ƒã€‚","categories":[],"tags":[{"name":"HEXO","slug":"HEXO","permalink":"http://example.com/tags/HEXO/"}]},{"title":"QEMU å­¦ä¹ è®°å½•","slug":"QEMUå­¦ä¹ è®°å½•","date":"2021-07-20T08:51:34.000Z","updated":"2022-10-15T03:14:29.386Z","comments":true,"path":"2021/07/20/QEMUå­¦ä¹ è®°å½•/","link":"","permalink":"http://example.com/2021/07/20/QEMU%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","excerpt":"","text":"QEMU å­¦ä¹ è®°å½•ä»€ä¹ˆæ˜¯ KVMï¼ŸåŸºäºå†…æ ¸çš„è™šæ‹Ÿæœº Kernel-based Virtual Machineï¼ˆKVMï¼‰æ˜¯ä¸€ç§å†…å»ºäº Linux ä¸­çš„å¼€æºè™šæ‹ŸåŒ–æŠ€æœ¯ã€‚å…·ä½“è€Œè¨€ï¼ŒKVM å¯å¸®åŠ©ç”¨æˆ·å°† Linux è½¬å˜ä¸ºè™šæ‹Ÿæœºç›‘æ§ç¨‹åºï¼Œä½¿ä¸»æœºè®¡ç®—æœºèƒ½å¤Ÿè¿è¡Œå¤šä¸ªéš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒï¼Œå³è™šæ‹Ÿå®¢æˆ·æœºæˆ–è™šæ‹Ÿæœºï¼ˆVMï¼‰ã€‚ ä»€ä¹ˆæ˜¯ QEMUï¼ŸQemu æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯ä»¥å•ç‹¬è¿è¡Œçš„è½¯ä»¶ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿä¸åŒæ¶æ„çš„æœºå™¨ï¼Œéå¸¸çµæ´»å’Œå¯ç§»æ¤ã€‚å®ƒä¸»è¦é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„â€™é‡ç¼–è¯‘å™¨â€™å°†ä¸ºç‰¹å®šå¤„ç†å™¨ç¼–å†™äºŒè¿›åˆ¶ä»£ç è½¬æ¢ä¸ºå¦ä¸€ç§ã€‚ KVM ä¸ QEMU çš„å…³ç³»KVM æ˜¯ Linux çš„ä¸€ä¸ªæ¨¡å—ã€‚å¯ä»¥ç”¨modprobeå»åŠ è½½ KVM æ¨¡å—ã€‚åŠ è½½äº†æ¨¡å—åï¼Œæ‰èƒ½è¿›ä¸€æ­¥é€šè¿‡å…¶ä»–å·¥å…·åˆ›å»ºè™šæ‹Ÿæœºã€‚ä½†ä»…æœ‰ KVM æ¨¡å—æ˜¯ è¿œè¿œä¸å¤Ÿçš„ï¼Œå› ä¸ºç”¨æˆ·æ— æ³•ç›´æ¥æ§åˆ¶å†…æ ¸æ¨¡å—å»ä½œäº‹æƒ…ï¼šè¿˜å¿…é¡»æœ‰ä¸€ä¸ªç”¨æˆ·ç©ºé—´çš„å·¥å…·æ‰è¡Œã€‚è¿™ä¸ªç”¨æˆ·ç©ºé—´çš„å·¥å…·ï¼Œå¼€å‘è€…é€‰æ‹©äº†å·²ç»æˆå‹çš„å¼€æºè™šæ‹ŸåŒ–è½¯ä»¶ QEMUã€‚KVM ä½¿ç”¨äº† QEMU çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ç¨åŠ æ”¹é€ ï¼Œå°±æˆäº†å¯æ§åˆ¶ KVM çš„ç”¨æˆ·ç©ºé—´å·¥å…·äº†ã€‚æ‰€ä»¥ä½ ä¼šçœ‹åˆ°ï¼Œå®˜æ–¹æä¾›çš„ KVM ä¸‹è½½æœ‰ä¸¤ å¤§éƒ¨åˆ†ä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ KVM æ¨¡å—ã€QEMU å·¥å…·ä»¥åŠäºŒè€…çš„åˆé›†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥åªå‡çº§ KVM æ¨¡å—ï¼Œä¹Ÿå¯ä»¥åªå‡çº§ QEMU å·¥å…·ã€‚ QEMU ç”¨æˆ·æ¨¡å¼ä¸ç³»ç»Ÿæ¨¡å¼QEMU å±äºåº”ç”¨å±‚çš„ä»¿çœŸç¨‹åºï¼Œå®ƒæ”¯æŒä¸¤ç§æ“ä½œæ¨¡å¼ï¼šç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿå’Œç³»ç»Ÿæ¨¡å¼æ¨¡æ‹Ÿã€‚ ç”¨æˆ·æ¨¡å¼ä»¿çœŸ åˆ©ç”¨åŠ¨æ€ä»£ç ç¿»è¯‘æœºåˆ¶ï¼Œå¯ä»¥åœ¨å½“å‰ CPU ä¸Šæ‰§è¡Œè¢«ç¼–è¯‘ä¸ºæ”¯æŒå…¶ä»– CPU çš„ç¨‹åºï¼Œå¦‚å¯ä»¥åœ¨ x86 æœºå™¨ä¸Šæ‰§è¡Œä¸€ä¸ª ARM äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºã€‚ï¼ˆæ‰§è¡Œä¸»æœº CPU æŒ‡ä»¤çš„åŠ¨æ€ç¿»è¯‘å¹¶ç›¸åº”åœ°è½¬æ¢ Linux ç³»ç»Ÿè°ƒç”¨ï¼‰ã€‚ ç³»ç»Ÿæ¨¡å¼ä»¿çœŸ åˆ©ç”¨å…¶å®ƒ VMM(Xen, KVM) æ¥ä½¿ç”¨ç¡¬ä»¶æä¾›çš„è™šæ‹ŸåŒ–æ”¯æŒï¼Œåˆ›å»ºæ¥è¿‘äºä¸»æœºæ€§èƒ½çš„å…¨åŠŸèƒ½è™šæ‹Ÿæœºï¼ŒåŒ…æ‹¬å¤„ç†å™¨å’Œé…å¥—çš„å¤–å›´è®¾å¤‡ï¼ˆç£ç›˜ï¼Œä»¥å¤ªç½‘ç­‰ï¼‰ã€‚ ç”¨æˆ·æ¨¡å¼æ”¯æŒçš„ CPUï¼šx86 (32 and 64 bit), PowerPC (32 and 64 bit), ARM, MIPS (32 bit only), Sparc (32 and 64 bit), Alpha, ColdFire(m68k), CRISv32 å’Œ MicroBlazeä¸‹åˆ—æ“ä½œç³»ç»Ÿæ”¯æŒ QEMU çš„ç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿï¼š Linux (referred as qemu-linux-user) BSD (referred as qemu-bsd-user) è°ƒç”¨ï¼ˆå…·ä½“å‚æ•°å«ä¹‰ï¼‰ 1qemu-i386 [-h] [-d] [-L path] [-s size] [-cpu model] [-g port] [-B offset] [-R size] program [arguments...] ç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿç¯å¢ƒä¸‹è¿è¡Œé€Ÿåº¦è¦æ¯”ç³»ç»Ÿæ¨¡å¼æ¨¡æ‹Ÿç¯å¢ƒä¸‹å¿«ï¼Œä½†å¹¶ä¸æ˜¯å®Œç¾æ¨¡æ‹Ÿï¼Œæ¯”å¦‚ç¨‹åºè¯»å–/proc/cpuinfoå†…å®¹æ—¶ï¼Œç”±ä¸»æœºå†…æ ¸è¿”å›ï¼Œå› æ­¤è¿”å›çš„ä¿¡æ¯æ˜¯æè¿°ä¸»æœº CPU çš„ï¼Œè€Œä¸æ˜¯æ¨¡æ‹Ÿçš„ CPUã€‚ ç³»ç»Ÿæ¨¡å¼é¦–å…ˆåˆ›å»ºè™šæ‹Ÿé•œåƒï¼Œæ¨¡æ‹Ÿç¡¬ç›˜ç©ºé—´ï¼š 1234root@hanhan:/home/dominic/qemu/# qemu-img create -f qcow2 qmtest.img 10GFormatting &#x27;qmtest.img&#x27;, fmt=qcow2 size=10737418240 encryption=off cluster_size=65536 lazy_refcounts=off root@hanhan:/home/dominic/qemu/# lsqmtest.img -fé€‰é¡¹ç”¨äºæŒ‡å®šé•œåƒçš„æ ¼å¼ï¼Œqcow2æ ¼å¼æ˜¯ QEMU æœ€å¸¸ç”¨çš„é•œåƒæ ¼å¼ï¼Œé‡‡ç”¨å†™æ—¶å¤åˆ¶æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½ã€‚qmtest.imgæ˜¯é•œåƒæ–‡ä»¶çš„åå­—ï¼Œ10Gæ˜¯é•œåƒæ–‡ä»¶å¤§å°ã€‚ é•œåƒæ–‡ä»¶åˆ›å»ºå®Œæˆåï¼Œå¯ä½¿ç”¨qemu-system-x86æ¥å¯åŠ¨x86æ¶æ„çš„è™šæ‹Ÿæœºï¼š 1qemu-system-x86_64 qmtest.img qmtest.img ä¸­è¿˜æœªå®‰è£…æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥ä¼šæç¤ºâ€œNo bootable deviceâ€çš„é”™è¯¯ã€‚ å…¶æ¬¡ï¼Œå‡†å¤‡æ“ä½œç³»ç»Ÿé•œåƒä¸‹è½½éœ€è¦çš„ Linux å‘è¡Œç‰ˆé•œåƒæ–‡ä»¶ï¼Œhttps://launchpad.net/ubuntu/+cdmirrorsï¼Œæ‰¾åˆ°æƒ³è¦ä¸‹è½½çš„é•œåƒï¼Œè¿™é‡Œä»¥äº¤é€šå¤§å­¦çš„é•œåƒä¸ºä¾‹å³å‡»é“¾æ¥å¤åˆ¶åœ°å€ï¼šhttps://ftp.sjtu.edu.cn/ubuntu-cd/20.10/ubuntu-20.10-live-server-amd64.iso 1root@hanhan:/home/dominic/qemu/# wget https://ftp.sjtu.edu.cn/ubuntu-cd/20.10/ubuntu-20.10-live-server-amd64.iso æœ€åï¼Œå¯åŠ¨è™šæ‹Ÿæœºå®‰è£…æ“ä½œç³»ç»Ÿ 1root@hanhan:/home/dominic/qemu/# qemu-system-x86_64 -m 2048 -enable-kvm qmtest.img -cdrom ./Fedora-Live-Desktop-x86_64-20-1.iso -mæŒ‡å®šè™šæ‹Ÿæœºå†…å­˜å¤§å°ï¼Œé»˜è®¤å•ä½æ˜¯ MBï¼Œ-enable-kvmä½¿ç”¨ KVM è¿›è¡ŒåŠ é€Ÿï¼Œ-cdromæ·»åŠ  fedora çš„å®‰è£…é•œåƒã€‚ è¯¥æ¨¡å¼ä¸‹ï¼Œè¦æ¯”ç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿæ…¢å¾—å¤šï¼Œå› ä¸ºæ¨¡æ‹Ÿäº†ç›®æ ‡å†…æ ¸ï¼Œä»¥åŠè®¾å¤‡è¾“å…¥/è¾“å‡ºã€ä¸­æ–­ç­‰ã€‚ QEMU å·¥ä½œåŸç†å•çº¯ä½¿ç”¨ qemuï¼Œé‡‡ç”¨çš„æ˜¯å®Œå…¨è™šæ‹ŸåŒ–çš„æ¨¡å¼ã€‚qemu å‘ Guest OS æ¨¡æ‹Ÿ CPUï¼Œä¹Ÿæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼ŒGuestOS è®¤ä¸ºè‡ªå·±å’Œç¡¬ä»¶ç›´æ¥æ‰“äº¤é“ï¼Œå…¶å®æ˜¯åŒ qemu æ¨¡æ‹Ÿå‡ºæ¥çš„ç¡¬ä»¶æ‰“äº¤é“ï¼Œqemu ä¼šå°†è¿™äº›æŒ‡ä»¤è½¬è¯‘ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚ç”±äºæ‰€æœ‰çš„æŒ‡ä»¤éƒ½è¦ä» qemu é‡Œé¢è¿‡ä¸€æ‰‹ï¼Œå› è€Œæ€§èƒ½å°±ä¼šæ¯”è¾ƒå·®ã€‚ å®Œå…¨è™šæ‹ŸåŒ–æ˜¯éå¸¸æ…¢çš„ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ Intel-VTï¼ŒAMD-Vï¼Œæ‰€ä»¥éœ€è¦ CPU ç¡¬ä»¶å¼€å¯è¿™ä¸ªæ ‡å¿—ä½ï¼Œä¸€èˆ¬åœ¨ BIOS é‡Œé¢è®¾ç½®ã€‚å½“ç¡®è®¤å¼€å§‹äº†æ ‡å¿—ä½ä¹‹åï¼Œé€šè¿‡KVMï¼ŒGuestOS çš„ CPU æŒ‡ä»¤ä¸ç”¨ç»è¿‡ Qemu è½¬è¯‘ï¼Œç›´æ¥è¿è¡Œï¼Œå¤§å¤§æé«˜äº†é€Ÿåº¦ã€‚æ‰€ä»¥ï¼ŒKVM åœ¨å†…æ ¸é‡Œé¢éœ€è¦æœ‰ä¸€ä¸ªæ¨¡å—ï¼Œæ¥è®¾ç½®å½“å‰ CPU æ˜¯ Guest OS åœ¨ç”¨ï¼Œè¿˜æ˜¯ Host OS åœ¨ç”¨ã€‚ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å†…æ ¸æ¨¡å—ä¸­æ˜¯å¦æœ‰ KVM 1lsmod | grep kvm KVM å†…æ ¸æ¨¡å—é€šè¿‡ /dev/kvm æš´éœ²æ¥å£ï¼Œç”¨æˆ·æ€ç¨‹åºå¯ä»¥é€šè¿‡ ioctlæ¥è®¿é—®è¿™ä¸ªæ¥å£ã€‚Qemu å°† KVM æ•´åˆè¿›æ¥ï¼Œå°†æœ‰å…³ CPU æŒ‡ä»¤çš„éƒ¨åˆ†äº¤ç”±å†…æ ¸æ¨¡å—æ¥åšï¼Œå°±æ˜¯ qemu-kvm (qemu-system-XXX)ã€‚ qemu å’Œ kvm æ•´åˆä¹‹åï¼ŒCPU çš„æ€§èƒ½é—®é¢˜è§£å†³äº†ã€‚å¦å¤– Qemu è¿˜ä¼šæ¨¡æ‹Ÿå…¶ä»–çš„ç¡¬ä»¶ï¼Œå¦‚ç½‘ç»œå’Œç¡¬ç›˜ã€‚åŒæ ·ï¼Œå…¨è™šæ‹ŸåŒ–çš„æ–¹å¼ä¹Ÿä¼šå½±å“è¿™äº›è®¾å¤‡çš„æ€§èƒ½ã€‚ äºæ˜¯ï¼Œqemu é‡‡å–åŠè™šæ‹ŸåŒ–çš„æ–¹å¼ï¼Œè®© Guest OS åŠ è½½ç‰¹æ®Šçš„é©±åŠ¨æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ ä¾‹å¦‚ï¼Œç½‘ç»œéœ€è¦åŠ è½½ virtio_netï¼Œå­˜å‚¨éœ€è¦åŠ è½½ virtio_blkï¼ŒGuest éœ€è¦å®‰è£…è¿™äº›åŠè™šæ‹ŸåŒ–é©±åŠ¨ï¼ŒGuestOS çŸ¥é“è‡ªå·±æ˜¯è™šæ‹Ÿæœºï¼Œæ‰€ä»¥æ•°æ®ä¼šç›´æ¥å‘é€ç»™åŠè™šæ‹ŸåŒ–è®¾å¤‡ï¼Œç»è¿‡ç‰¹æ®Šå¤„ç†ï¼ˆä¾‹å¦‚æ’é˜Ÿã€ç¼“å­˜ã€æ‰¹é‡å¤„ç†ç­‰æ€§èƒ½ä¼˜åŒ–æ–¹å¼ï¼‰ï¼Œæœ€ç»ˆå‘é€ç»™çœŸæ­£çš„ç¡¬ä»¶ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†æ€§èƒ½ã€‚ Q : ç³»ç»Ÿæ¨¡å¼å’Œç”¨æˆ·æ¨¡å¼çš„åŒºåˆ«ï¼Ÿç³»ç»Ÿæ¨¡å¼ æ˜¯ qemu è™šæ‹Ÿå‡ºä¸€å¥—å®Œæ•´çš„ç¡¬ä»¶ç¯å¢ƒï¼ŒåŒ…å« CPUï¼Œå†…å­˜ï¼Œç½‘å¡ï¼Œç¡¬ç›˜ï¼Œå¯¹äºè™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ OS çœ‹åˆ°çš„å’Œç¡¬ä»¶å’ŒçœŸå®çš„æ˜¯ä¸€æ ·çš„ã€‚ç”¨æˆ·æ¨¡å¼æ˜¯ç›´æ¥å°†å¯æ‰§è¡Œçš„æ–‡ä»¶è¿›è¡ŒæŒ‡ä»¤ç¿»è¯‘ï¼Œåªè™šæ‹Ÿå‡º CPUã€‚å‡è®¾æœ‰ KVMï¼šhost æ˜¯ x86ï¼ŒQEMU è™šæ‹Ÿå‡º x86 çš„ç³»ç»Ÿæ¨¡å¼ è¿è¡Œ Windows ç³»ç»Ÿã€‚QEMU ä¼šå°† Windows æŒ‡ä»¤ç›´æ¥äº¤ç»™ host CPU ç›´æ¥è¿è¡Œï¼ˆè¿™ä¸ªåŠŸèƒ½æ˜¯ç”± KVM å®ç°çš„ï¼Œç›¸å½“äºç›´æ¥è°ƒç”¨ host CPUï¼‰ï¼Œæ€§èƒ½æŸå¤±å°ã€‚å†…å­˜ï¼Œç¡¬ç›˜ï¼Œç½‘ç»œç­‰å¤–è®¾æ˜¯ç”± qemu è™šæ‹Ÿå‡ºæ¥çš„ã€‚å‡è®¾æ—  KVMï¼šhost æ˜¯ x86ï¼ŒQEMU è™šæ‹Ÿå‡º x86 çš„ç³»ç»Ÿæ¨¡å¼è¿è¡Œ Windows ç³»ç»Ÿã€‚QEMU ä¼šå°† Windows æŒ‡ä»¤ç¿»è¯‘æˆä¸­é—´ç ï¼Œä¸­é—´ç å†è½¬æˆ host CPU æŒ‡ä»¤ï¼ˆè¿™ä¸ªåŠŸèƒ½æ˜¯ç”± qemu TCG å®ç°çš„ï¼‰ï¼Œæ€§èƒ½æŸå¤±å¤§ã€‚å†…å­˜ï¼Œç¡¬ç›˜ï¼Œç½‘æ´›ç­‰å¤–è®¾æ˜¯ç”± qemu è™šæ‹Ÿå‡ºæ¥çš„ã€‚å‡è®¾æœ‰ KVMï¼šhost æ˜¯ x86ï¼ŒQEMU è™šæ‹Ÿå‡º RISC-V çš„ç³»ç»Ÿæ¨¡å¼ è¿è¡Œ Linux ç³»ç»Ÿã€‚QEMU ä¼šå°† Linux æŒ‡ä»¤ç¿»è¯‘æˆä¸­é—´ç ï¼Œä¸­é—´ç å†è½¬æˆ host CPU æŒ‡ä»¤ï¼ˆè¿™ä¸ªåŠŸèƒ½æ˜¯ç”± qemu TCG å®ç°çš„ï¼‰ï¼Œæ€§èƒ½æŸå¤±å¤§ã€‚å†…å­˜ï¼Œç¡¬ç›˜ï¼Œç½‘æ´›ç­‰å¤–è®¾æ˜¯ç”± qemu è™šæ‹Ÿå‡ºæ¥çš„ã€‚KVM éœ€è¦åœ¨è™šæ‹Ÿæœºä¸å®¿ä¸»æœºæ¶æ„ç›¸åŒæ—¶æ‰ç”Ÿæ•ˆã€‚æ­¤å¤–ï¼Œç”¨æˆ·æ¨¡å¼ä¸‹è°ƒç”¨ IO ç¡¬ä»¶ä¼šæŠ¥é”™ã€‚qemu ç³»ç»Ÿæ¨¡å¼ä¸‹ä¼šæ¨¡æ‹Ÿå‡ºæ‰€æœ‰è®¾å¤‡ï¼Œä½†æ˜¯æ¨¡æ‹Ÿçš„ IO è®¾å¤‡æ•ˆç‡ä½ï¼Œæ‰€ä»¥åæ¥æœ‰äº†åŠè™šæ‹ŸåŒ–ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"}]},{"title":"ZH-Unix æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ","slug":"ZH-Unixæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ","date":"2021-07-20T07:44:05.000Z","updated":"2022-10-15T03:14:29.629Z","comments":true,"path":"2021/07/20/ZH-Unixæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ/","link":"","permalink":"http://example.com/2021/07/20/ZH-Unix%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%8D%E8%A6%81%EF%BC%9F/","excerpt":"","text":"Unix æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ Authorï¼šCHRIS HOFFMANè¯‘ï¼šWhat Is Unix, and Why Does It Matter? å¤§å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ã€‚é™¤äº†å¾®è½¯åŸºäº Windows NT çš„æ“ä½œç³»ç»Ÿä¹‹å¤–ï¼Œå‡ ä¹æ‰€æœ‰å…¶ä»–ç³»ç»Ÿçš„ç¥–å®—éƒ½æ˜¯ Unixã€‚ Linuxã€Mac OS Xã€Androidã€iOSã€Chrome OSã€PlayStation 4 ä¸Šä½¿ç”¨çš„ Orbis æ“ä½œç³»ç»Ÿï¼Œæ— è®ºè·¯ç”±å™¨ä¸Šè¿è¡Œçš„æ˜¯ä»€ä¹ˆå›ºä»¶â€”â€”æ‰€æœ‰è¿™äº›æ“ä½œç³»ç»Ÿé€šå¸¸éƒ½è¢«ç§°ä¸ºâ€œç±» Unixâ€æ“ä½œç³»ç»Ÿã€‚ Unix çš„è®¾è®¡å»¶ç»­è‡³ä»Š19 ä¸–çºªä¸­åæœŸ Unix åœ¨è´å°”å®éªŒå®¤ä¸­è¢«å¼€å‘å‡ºæ¥ã€‚æœ€åˆç‰ˆçš„ Unix æœ‰è®¸å¤šé‡è¦çš„è®¾è®¡ç‰¹æ€§è‡³ä»Šä»ç„¶åœ¨ä½¿ç”¨ã€‚ â€œUnix å“²å­¦â€ä¹‹ä¸€å°±æ˜¯ï¼Œåˆ›å»ºå°å‹ã€æ¨¡å—åŒ–çš„ç¨‹åºï¼Œä¸€ä¸ªç¨‹åºåªåšä¸€ä»¶äº‹å¹¶æŠŠå®ƒåšå¥½ã€‚å¦‚æœä½ ç»å¸¸ä½¿ç”¨ Linux ç»ˆç«¯ï¼Œé‚£ä¹ˆä½ åº”è¯¥å¯¹æ­¤å¾ˆç†Ÿæ‚‰â€”â€”ç³»ç»Ÿæä¾›äº†è®¸å¤šå®ç”¨ç¨‹åºï¼Œè¿™äº›ç¨‹åºå¯ä»¥é€šè¿‡ç®¡é“å’Œå…¶ä»–åŠŸèƒ½ä»¥ä¸åŒæ–¹å¼ç»„åˆä»¥æ‰§è¡Œæ›´å¤æ‚çš„ä»»åŠ¡ã€‚ç”šè‡³å›¾å½¢ç¨‹åºä¹Ÿå¯èƒ½åœ¨åå°è°ƒç”¨æ›´ç®€å•çš„å®ç”¨ç¨‹åºæ¥å®Œæˆå¤æ‚çš„å·¥ä½œã€‚è¿™ä¹Ÿä½¿å¾—åˆ›å»º shell è„šæœ¬å˜å¾—å®¹æ˜“ï¼Œå°†ç®€å•çš„å·¥å…·ä¸²åœ¨ä¸€èµ·æ¥å®Œæˆå¤æ‚çš„äº‹æƒ…ã€‚ Unix æœ‰ä¸€ä¸ªç¨‹åºä¹‹é—´é€šä¿¡ç”¨çš„å•ä¸€æ–‡ä»¶ç³»ç»Ÿã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ Linux ä¸Šâ€œä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶â€ â€”â€”åŒ…æ‹¬ç¡¬ä»¶è®¾å¤‡å’Œæä¾›ç³»ç»Ÿä¿¡æ¯æˆ–å…¶ä»–æ•°æ®çš„ç‰¹æ®Šæ–‡ä»¶ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåªæœ‰ Windows æœ‰é©±åŠ¨å™¨å·ï¼ˆCã€Dã€E ç›˜ï¼‰çš„åŸå› ï¼Œå®ƒæ˜¯ä» DOS ç»§æ‰¿çš„â€”â€”åœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šï¼Œç³»ç»Ÿä¸Šçš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯å•ä¸ªç›®å½•å±‚æ¬¡ç»“æ„çš„ä¸€éƒ¨åˆ†ã€‚ è¿½å¯» Unix çš„åä»£Unix åŠå…¶åä»£çš„å†å²é”™ç»¼å¤æ‚ï¼Œç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬å¤§è‡´å°† Unix çš„åä»£åˆ†ä¸ºä¸¤ç±»ã€‚ ä¸€ç±» Unix åä»£æ˜¯åœ¨å­¦æœ¯ç•Œå‘å±•èµ·æ¥çš„ã€‚ç¬¬ä¸€ä¸ªæ˜¯ BSDï¼ˆBerkeleySoftwareDistributionï¼‰ï¼Œä¸€ä¸ªå¼€æºã€ç±» Unix æ“ä½œç³»ç»Ÿã€‚BSD é€šè¿‡ FreeBSDã€NetBSD å’Œ OpenBSD å»¶ç»­è‡³ä»Šã€‚NeXTStep ä¹Ÿæ˜¯åŸºäºæœ€åˆçš„ BSD å¼€å‘çš„ï¼ŒApple çš„ Mac OS X æ˜¯åŸºäº NeXTStep å¼€å‘å‡ºæ¥çš„ï¼Œè€Œ iOS åˆ™åŸºäº Mac OS Xã€‚è¿˜æœ‰ä¸€äº›æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ PlayStation 4 ä¸Šä½¿ç”¨çš„ Orbis OSï¼Œéƒ½æ˜¯ä» BSD æ“ä½œç³»ç»Ÿè¡ç”Ÿè€Œæ¥çš„ã€‚ Richard Stallman çš„ GNU é¡¹ç›®ä¹Ÿæ˜¯ä¸ºäº†åº”å¯¹ AT&amp;T æ—¥ç›Šä¸¥æ ¼çš„ Unix è½¯ä»¶è®¸å¯æ¡æ¬¾è€Œå¯åŠ¨çš„ã€‚MINIX æ˜¯ä¸€ä¸ªä¸ºæ•™è‚²ç›®çš„è€Œåˆ›å»ºçš„ç±» Unix æ“ä½œç³»ç»Ÿï¼ŒLinux çš„çµæ„Ÿæ¥è‡ªäº MINIXã€‚æˆ‘ä»¬ä»Šå¤©æ‰€çŸ¥é“çš„ Linux å®é™…ä¸Šæ˜¯ GNU/Linuxï¼Œå› ä¸ºå®ƒç”± Linux å†…æ ¸å’Œè®¸å¤š GNU å®ç”¨ç¨‹åºç»„æˆã€‚GNU/Linux å¹¶éç›´æ¥ç»§æ‰¿è‡ª BSDï¼Œä½†å®ƒç»§æ‰¿äº† Unix çš„è®¾è®¡å¹¶æ¤æ ¹äºå­¦æœ¯ç•Œã€‚å½“ä»Šçš„è®¸å¤šæ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ Androidã€ChromeOSã€SteamOS ä»¥åŠå¤§é‡è®¾å¤‡çš„åµŒå…¥å¼æ“ä½œç³»ç»Ÿï¼Œéƒ½åŸºäº Linuxã€‚ å¦ä¸€ç±»å°±æ˜¯å•†ä¸š Unix æ“ä½œç³»ç»Ÿã€‚AT&amp;T UNIXã€SCO UnixWareã€Sun Microsystems Solarisã€HP-UXã€IBM AIXã€SGI IRIXâ€”â€”è®¸å¤šå¤§å…¬å¸æƒ³è¦åˆ›å»ºä»–ä»¬è‡ªå·±çš„ Unix ç‰ˆæœ¬ã€‚è¿™äº›åœ¨ä»Šå¤©å¹¶ä¸å¸¸è§ï¼Œä½†å…¶ä¸­ä¸€äº›ä»ç„¶å­˜åœ¨ã€‚ DOS å’Œ Windows NT çš„å´›èµ·è®¸å¤šäººæœŸæœ› Unix æˆä¸ºè¡Œä¸šæ ‡å‡†æ“ä½œç³»ç»Ÿï¼Œä½† DOS ç³»ç»Ÿå’Œâ€œIBM PC å…¼å®¹â€çš„è®¡ç®—æœºæœ€ç»ˆæµè¡Œèµ·æ¥ã€‚Microsoft çš„ DOS æˆä¸ºå…¶ä¸­æœ€æˆåŠŸçš„ DOS ç³»ç»Ÿã€‚DOS ç³»ç»Ÿå®Œå…¨ä¸åŒäº Unixï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Windows ä½¿ç”¨åæ–œæ ä½œä¸ºæ–‡ä»¶è·¯å¾„ï¼Œè€Œå…¶ä»–ä¸€åˆ‡éƒ½ä½¿ç”¨æ­£æ–œæ ã€‚è¿™ä¸ªå†³å®šæ˜¯åœ¨ DOS ç³»ç»Ÿæ—©æœŸåšå‡ºçš„ï¼Œåæ¥çš„ Windows ç‰ˆæœ¬ç»§æ‰¿äº†å®ƒï¼Œå°±åƒ BSDã€Linuxã€Mac OS X å’Œå…¶ä»–ç±» Unix æ“ä½œç³»ç»Ÿç»§æ‰¿äº†è®¸å¤š Unix çš„è®¾è®¡ä¸€æ ·ã€‚ Windows 3.1ã€Windows 95ã€Windows 98 å’Œ Windows ME éƒ½åŸºäºåº•å±‚çš„ DOSã€‚å½“æ—¶ï¼Œå¾®è½¯æ­£åœ¨å¼€å‘ä¸€ç§æ›´ç°ä»£ã€æ›´ç¨³å®šçš„æ“ä½œç³»ç»Ÿï¼Œä»–ä»¬å°†å…¶å‘½åä¸º Windows NTâ€”â€”å³â€œWindows New Technologyâ€ã€‚Windows NT æœ€ç»ˆä»¥ Windows XP çš„å½¢å¼å‡ºç°åœ¨æ™®é€šç”¨æˆ·çš„è®¡ç®—æœºä¸­ï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œå®ƒä»¥ Windows 2000 å’Œ Windows NT çš„å½¢å¼ä¾›å…¬å¸ä½¿ç”¨ã€‚ ä»Šå¤©ï¼Œå¾®è½¯çš„æ‰€æœ‰æ“ä½œç³»ç»Ÿéƒ½åŸºäº Windows NT å†…æ ¸ã€‚Windows 7ã€Windows 8ã€Windows RTã€Windows Phone 8ã€Windows Server å’Œ Xbox One çš„æ“ä½œç³»ç»Ÿéƒ½ä½¿ç”¨ Windows NT å†…æ ¸ã€‚ä¸å¤§å¤šæ•°å…¶ä»–æ“ä½œç³»ç»Ÿä¸åŒï¼ŒWindows NT å¹¶ä¸æ˜¯ä½œä¸ºç±» Unix æ“ä½œç³»ç»Ÿå¼€å‘çš„ã€‚ å½“ç„¶ï¼Œå¾®è½¯å¹¶ä¸æ˜¯å®Œå…¨é‡æ–°å¼€å§‹ã€‚ä¸ºäº†ä¿æŒä¸ DOS å’Œæ—§çš„ Windows è½¯ä»¶çš„å…¼å®¹æ€§ï¼ŒWindows NT ç»§æ‰¿äº†è®¸å¤š DOS çº¦å®šï¼Œå¦‚é©±åŠ¨å™¨å·ã€æ–‡ä»¶è·¯å¾„çš„åæ–œæ å’Œå‘½ä»¤è¡Œçš„æ­£æ–œæ ã€‚ â€œåœ¨ç»å¤§å¤šæ•°åœ°æ–¹ï¼Œç”¨çš„éƒ½æ˜¯/ï¼ˆslashï¼‰ï¼ŒåŒ…æ‹¬ Mac/Linuxï¼Œä¹ŸåŒ…æ‹¬ URLã€‚ä½ å”¯ä¸€éœ€è¦è®°ä½çš„æ˜¯ï¼ŒMicrosoft è¿™ä¸ªæ€ªé¸¡åœ¨è‡ªå·±çš„æ“ä½œç³»ç»Ÿé‡Œé¢åè¦ç”¨\\ï¼ˆbackslashï¼‰ï¼Œä½¿å¾—è‡ªå·±ä¸ä¼—ä¸åŒã€‚åœ¨ Windows ä¸­ï¼Œæ­£æ–œæ /è¡¨ç¤ºé™¤æ³•ï¼Œç”¨æ¥è¿›è¡Œæ•´é™¤è¿ç®—ï¼›åæ–œæ \\ç”¨æ¥è¡¨ç¤ºç›®å½•ã€‚åœ¨ Unix ç³»ç»Ÿä¸­ï¼Œ/è¡¨ç¤ºç›®å½•ï¼›\\è¡¨ç¤ºè·³è„±å­—ç¬¦å°†ç‰¹æ®Šå­—ç¬¦å˜æˆä¸€èˆ¬å­—ç¬¦Windowsç”±äºä½¿ç”¨æ–œæ /ä½œä¸ºDOSå‘½ä»¤æç¤ºç¬¦çš„å‚æ•°æ ‡å¿—äº†ï¼Œä¸ºäº†ä¸æ··æ·†ï¼Œæ‰€ä»¥é‡‡ç”¨åæ–œæ \\ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ã€‚æ‰€ä»¥ç›®å‰windowsç³»ç»Ÿä¸Šçš„æ–‡ä»¶æµè§ˆå™¨éƒ½æ˜¯ç”¨åæ–œæ \\ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ã€‚ ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿä½ æ˜¯å¦æ›¾ç»çœ‹è¿‡ Mac OS X ç»ˆç«¯æˆ–æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶æ³¨æ„åˆ°å®ƒä¸ Linux çš„ç›¸ä¼¼ä¹‹å¤„ï¼Œä»¥åŠå®ƒä»¬ä¸ Windows çš„ä¸åŒä¹‹å¤„ï¼Ÿå—¯ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆâ€”â€”Mac OSX å’Œ Linux éƒ½æ˜¯ç±» Unix æ“ä½œç³»ç»Ÿã€‚ äº†è§£è¿™æ®µå†å²æœ‰åŠ©äºæ‚¨äº†è§£ä»€ä¹ˆæ˜¯â€œç±» Unixâ€æ“ä½œç³»ç»Ÿï¼Œä»¥åŠä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šæ“ä½œç³»ç»Ÿçœ‹èµ·æ¥å½¼æ­¤å¦‚æ­¤ç›¸ä¼¼è€Œ Windows ä¼¼ä¹å¦‚æ­¤ä¸åŒã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆ Linux æå®¢ä¼šè§‰å¾— Mac OS X ä¸Šçš„ç»ˆç«¯å¦‚æ­¤ç†Ÿæ‚‰ï¼Œè€Œ Windows ä¸Šçš„å‘½ä»¤æç¤ºç¬¦å’Œ PowerShell ä¸å…¶ä»–å‘½ä»¤è¡Œç¯å¢ƒå¦‚æ­¤ä¸åŒã€‚ è¿™åªæ˜¯ä¸€ä¸ªç®€çŸ­çš„å†å²ï¼Œå®ƒå°†å¸®åŠ©æ‚¨äº†è§£æˆ‘ä»¬å¦‚ä½•åˆ°è¾¾ä»Šå¤©çš„ä½ç½®ï¼Œè€Œä¸ä¼šé™·å…¥ç»†èŠ‚ä¸­ã€‚å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥æ‰¾åˆ°æœ‰å…³ Unix å†å²çš„æ•´æœ¬ä¹¦ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"Translation","slug":"Translation","permalink":"http://example.com/tags/Translation/"},{"name":"Unix","slug":"Unix","permalink":"http://example.com/tags/Unix/"}]},{"title":"Hexo å®æ—¶æ›´æ–°é¢„è§ˆ","slug":"Hexoå®æ—¶æ›´æ–°é¢„è§ˆ","date":"2021-07-20T06:32:12.000Z","updated":"2022-10-15T03:14:29.252Z","comments":true,"path":"2021/07/20/Hexoå®æ—¶æ›´æ–°é¢„è§ˆ/","link":"","permalink":"http://example.com/2021/07/20/Hexo%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0%E9%A2%84%E8%A7%88/","excerpt":"","text":"åœ¨é¡¹ç›®ç›®å½•ä¸‹å®‰è£… hexo-browsersync æ’ä»¶ 1npm install hexo-browsersync --save hexo så¯åŠ¨æœåŠ¡åï¼Œæ¯æ¬¡ä¿å­˜ Markdown æ–‡ä»¶éƒ½ä¼šå®æ—¶æ›´æ–°é¡µé¢ã€‚","categories":[],"tags":[{"name":"HEXO","slug":"HEXO","permalink":"http://example.com/tags/HEXO/"}]},{"title":"Hexo å’Œ GitHub æ­å»ºåšå®¢ä»¥åŠæ›´æ¢ç”µè„‘åŒæ­¥åšå®¢","slug":"Hexoå’ŒGitHubæ­å»ºåšå®¢ä»¥åŠæ›´æ¢ç”µè„‘åŒæ­¥åšå®¢","date":"2021-07-20T04:04:37.000Z","updated":"2022-10-15T03:16:50.608Z","comments":true,"path":"2021/07/20/Hexoå’ŒGitHubæ­å»ºåšå®¢ä»¥åŠæ›´æ¢ç”µè„‘åŒæ­¥åšå®¢/","link":"","permalink":"http://example.com/2021/07/20/Hexo%E5%92%8CGitHub%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E4%BB%A5%E5%8F%8A%E6%9B%B4%E6%8D%A2%E7%94%B5%E8%84%91%E5%90%8C%E6%AD%A5%E5%8D%9A%E5%AE%A2/","excerpt":"","text":"åªè¦æœ‰sourceæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æºæ–‡ä»¶å°±å¯ä»¥é‡æ–°éƒ¨ç½²ï¼ŒæŒ‰ç…§æ­£å¸¸çš„æ­å»º Hexo ç¯å¢ƒå¼€å§‹æ­å»ºï¼Œæ­å»ºå¥½ä»¥åå°†sourceæ–‡ä»¶å¤¹æ›¿æ¢å³å¯ï¼Œéœ€è¦åº”ç”¨ä¸»é¢˜å°±ä¸‹è½½ä¸»é¢˜ç„¶åæ›¿æ¢ã€‚ æ³¨æ„ï¼š ä¸»é¢˜æ›´æ¢éœ€è¦æ›´æ”¹_config_ymlæ–‡ä»¶ _config_ymlæ–‡ä»¶ä¸­çš„éƒ¨ç½²é…ç½®ï¼Œbranch:masterå°±æ˜¯æ¯æ¬¡hexo dæ“ä½œæ¨é€çš„åˆ†æ”¯ã€‚è€Œåœ¨å‘½ä»¤è¡Œæ¯æ¬¡git pushæ¨é€çš„åˆ†æ”¯æ˜¯è®¾ç½®çš„é»˜è®¤åˆ†æ”¯hexo 1234deploy: type: git repository: https://github.com/Dunky-Z/Dunky-Z.github.io.git branch: master åˆ©ç”¨ Hexo åœ¨å¤šå°ç”µè„‘ä¸Šæäº¤å’Œæ›´æ–° GitHub pages åšå®¢","categories":[],"tags":[{"name":"HEXO","slug":"HEXO","permalink":"http://example.com/tags/HEXO/"}]},{"title":"HelloWorld","slug":"HelloWorld","date":"2020-08-23T01:09:13.000Z","updated":"2022-10-15T03:14:29.243Z","comments":true,"path":"2020/08/23/HelloWorld/","link":"","permalink":"http://example.com/2020/08/23/HelloWorld/","excerpt":"","text":"è¿™æ˜¯åšå®¢çš„ç¬¬ä¸€ç¯‡æ–‡ç« ","categories":[],"tags":[]}],"categories":[{"name":"ä¸‡èƒ½ VSCode","slug":"ä¸‡èƒ½-VSCode","permalink":"http://example.com/categories/%E4%B8%87%E8%83%BD-VSCode/"},{"name":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","slug":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨","permalink":"http://example.com/categories/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8/"},{"name":"QEMU æºç åˆ†æ","slug":"QEMU-æºç åˆ†æ","permalink":"http://example.com/categories/QEMU-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"},{"name":"OpenStack","slug":"OpenStack","permalink":"http://example.com/categories/OpenStack/"},{"name":"Bug è¸©å‘è®°å½•","slug":"Bug-è¸©å‘è®°å½•","permalink":"http://example.com/categories/Bug-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"},{"name":"JAVA å¼€å‘","slug":"JAVA-å¼€å‘","permalink":"http://example.com/categories/JAVA-%E5%BC%80%E5%8F%91/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/categories/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"},{"name":"Git å®æˆ˜","slug":"Git-å®æˆ˜","permalink":"http://example.com/categories/Git-%E5%AE%9E%E6%88%98/"},{"name":"Embedded Development","slug":"Embedded-Development","permalink":"http://example.com/categories/Embedded-Development/"},{"name":"RISC-V å…¥é—¨","slug":"RISC-V-å…¥é—¨","permalink":"http://example.com/categories/RISC-V-%E5%85%A5%E9%97%A8/"},{"name":"LaTeX","slug":"LaTeX","permalink":"http://example.com/categories/LaTeX/"},{"name":"CSAPP-Lab","slug":"CSAPP-Lab","permalink":"http://example.com/categories/CSAPP-Lab/"},{"name":"é€šä¿¡åè®®","slug":"é€šä¿¡åè®®","permalink":"http://example.com/categories/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/"},{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://example.com/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"Linux æ“ä½œç³»ç»Ÿ","slug":"Linux-æ“ä½œç³»ç»Ÿ","permalink":"http://example.com/categories/Linux-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"VSCode","slug":"VSCode","permalink":"http://example.com/tags/VSCode/"},{"name":"Efficiency","slug":"Efficiency","permalink":"http://example.com/tags/Efficiency/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7/"},{"name":"å·¥å…·ï¼ŒEfficiencyï¼Œå†…ç½‘ç©¿é€","slug":"å·¥å…·ï¼ŒEfficiencyï¼Œå†…ç½‘ç©¿é€","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7%EF%BC%8CEfficiency%EF%BC%8C%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"},{"name":"NAS","slug":"NAS","permalink":"http://example.com/tags/NAS/"},{"name":"Docker","slug":"Docker","permalink":"http://example.com/tags/Docker/"},{"name":"Radarr","slug":"Radarr","permalink":"http://example.com/tags/Radarr/"},{"name":"Docker-Compose","slug":"Docker-Compose","permalink":"http://example.com/tags/Docker-Compose/"},{"name":"SSH,Linux","slug":"SSH-Linux","permalink":"http://example.com/tags/SSH-Linux/"},{"name":"QEMU","slug":"QEMU","permalink":"http://example.com/tags/QEMU/"},{"name":"Linux,ç½‘ç»œé…ç½®","slug":"Linux-ç½‘ç»œé…ç½®","permalink":"http://example.com/tags/Linux-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/"},{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"http://example.com/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"},{"name":"ç½‘ç»œé…ç½®","slug":"ç½‘ç»œé…ç½®","permalink":"http://example.com/tags/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/"},{"name":"å·¥å…·æ¨è","slug":"å·¥å…·æ¨è","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/"},{"name":"RISC-V","slug":"RISC-V","permalink":"http://example.com/tags/RISC-V/"},{"name":"OpenEuler","slug":"OpenEuler","permalink":"http://example.com/tags/OpenEuler/"},{"name":"Linux","slug":"Linux","permalink":"http://example.com/tags/Linux/"},{"name":"OpenStack","slug":"OpenStack","permalink":"http://example.com/tags/OpenStack/"},{"name":"Bug","slug":"Bug","permalink":"http://example.com/tags/Bug/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"äº‘è®¡ç®—","slug":"äº‘è®¡ç®—","permalink":"http://example.com/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"},{"name":"Devstack","slug":"Devstack","permalink":"http://example.com/tags/Devstack/"},{"name":"åç«¯å¼€å‘","slug":"åç«¯å¼€å‘","permalink":"http://example.com/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"},{"name":"WSL2","slug":"WSL2","permalink":"http://example.com/tags/WSL2/"},{"name":"JAVA","slug":"JAVA","permalink":"http://example.com/tags/JAVA/"},{"name":"å®‰è£…æ•™ç¨‹","slug":"å®‰è£…æ•™ç¨‹","permalink":"http://example.com/tags/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"},{"name":"æ¯å¤©å­¦å‘½ä»¤","slug":"æ¯å¤©å­¦å‘½ä»¤","permalink":"http://example.com/tags/%E6%AF%8F%E5%A4%A9%E5%AD%A6%E5%91%BD%E4%BB%A4/"},{"name":"Git","slug":"Git","permalink":"http://example.com/tags/Git/"},{"name":"CodeReview","slug":"CodeReview","permalink":"http://example.com/tags/CodeReview/"},{"name":"Office","slug":"Office","permalink":"http://example.com/tags/Office/"},{"name":"OpenSBI","slug":"OpenSBI","permalink":"http://example.com/tags/OpenSBI/"},{"name":"Debian","slug":"Debian","permalink":"http://example.com/tags/Debian/"},{"name":"Github","slug":"Github","permalink":"http://example.com/tags/Github/"},{"name":"CI","slug":"CI","permalink":"http://example.com/tags/CI/"},{"name":"åŠ å¯†ç®—æ³•","slug":"åŠ å¯†ç®—æ³•","permalink":"http://example.com/tags/%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/"},{"name":"Cryptography","slug":"Cryptography","permalink":"http://example.com/tags/Cryptography/"},{"name":"Makefile","slug":"Makefile","permalink":"http://example.com/tags/Makefile/"},{"name":"Shell","slug":"Shell","permalink":"http://example.com/tags/Shell/"},{"name":"Embedded","slug":"Embedded","permalink":"http://example.com/tags/Embedded/"},{"name":"LaTeX","slug":"LaTeX","permalink":"http://example.com/tags/LaTeX/"},{"name":"Markdown","slug":"Markdown","permalink":"http://example.com/tags/Markdown/"},{"name":"Pandoc","slug":"Pandoc","permalink":"http://example.com/tags/Pandoc/"},{"name":"Translation","slug":"Translation","permalink":"http://example.com/tags/Translation/"},{"name":"æ’ä»¶","slug":"æ’ä»¶","permalink":"http://example.com/tags/%E6%8F%92%E4%BB%B6/"},{"name":"æ¨è","slug":"æ¨è","permalink":"http://example.com/tags/%E6%8E%A8%E8%8D%90/"},{"name":"Python","slug":"Python","permalink":"http://example.com/tags/Python/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://example.com/tags/%E6%95%88%E7%8E%87/"},{"name":"å­—ä½“","slug":"å­—ä½“","permalink":"http://example.com/tags/%E5%AD%97%E4%BD%93/"},{"name":"LaTex","slug":"LaTex","permalink":"http://example.com/tags/LaTex/"},{"name":"æ”’æœº","slug":"æ”’æœº","permalink":"http://example.com/tags/%E6%94%92%E6%9C%BA/"},{"name":"Clash","slug":"Clash","permalink":"http://example.com/tags/Clash/"},{"name":"HEXO","slug":"HEXO","permalink":"http://example.com/tags/HEXO/"},{"name":"RISCV","slug":"RISCV","permalink":"http://example.com/tags/RISCV/"},{"name":"pip","slug":"pip","permalink":"http://example.com/tags/pip/"},{"name":"PDF","slug":"PDF","permalink":"http://example.com/tags/PDF/"},{"name":"listing","slug":"listing","permalink":"http://example.com/tags/listing/"},{"name":"SoC","slug":"SoC","permalink":"http://example.com/tags/SoC/"},{"name":"IIC","slug":"IIC","permalink":"http://example.com/tags/IIC/"},{"name":"MCU","slug":"MCU","permalink":"http://example.com/tags/MCU/"},{"name":"BootROM","slug":"BootROM","permalink":"http://example.com/tags/BootROM/"},{"name":"C","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"GDB","slug":"GDB","permalink":"http://example.com/tags/GDB/"},{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"http://example.com/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"èŠ¯ç‰‡å¼€å‘","slug":"èŠ¯ç‰‡å¼€å‘","permalink":"http://example.com/tags/%E8%8A%AF%E7%89%87%E5%BC%80%E5%8F%91/"},{"name":"ç¡¬ä»¶","slug":"ç¡¬ä»¶","permalink":"http://example.com/tags/%E7%A1%AC%E4%BB%B6/"},{"name":"JTAG","slug":"JTAG","permalink":"http://example.com/tags/JTAG/"},{"name":"OpenOCD","slug":"OpenOCD","permalink":"http://example.com/tags/OpenOCD/"},{"name":"SSH","slug":"SSH","permalink":"http://example.com/tags/SSH/"},{"name":"Jellyfin","slug":"Jellyfin","permalink":"http://example.com/tags/Jellyfin/"},{"name":"åŒæ­¥","slug":"åŒæ­¥","permalink":"http://example.com/tags/%E5%90%8C%E6%AD%A5/"},{"name":"å¤‡ä»½","slug":"å¤‡ä»½","permalink":"http://example.com/tags/%E5%A4%87%E4%BB%BD/"},{"name":"Gerrit","slug":"Gerrit","permalink":"http://example.com/tags/Gerrit/"},{"name":"SPI","slug":"SPI","permalink":"http://example.com/tags/SPI/"},{"name":"Virtual Memory","slug":"Virtual-Memory","permalink":"http://example.com/tags/Virtual-Memory/"},{"name":"TLB","slug":"TLB","permalink":"http://example.com/tags/TLB/"},{"name":"å†…å­˜ç®¡ç†","slug":"å†…å­˜ç®¡ç†","permalink":"http://example.com/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"},{"name":"é¡µè¡¨","slug":"é¡µè¡¨","permalink":"http://example.com/tags/%E9%A1%B5%E8%A1%A8/"},{"name":"å¤šçº§é¡µè¡¨","slug":"å¤šçº§é¡µè¡¨","permalink":"http://example.com/tags/%E5%A4%9A%E7%BA%A7%E9%A1%B5%E8%A1%A8/"},{"name":"MMU","slug":"MMU","permalink":"http://example.com/tags/MMU/"},{"name":"NOC","slug":"NOC","permalink":"http://example.com/tags/NOC/"},{"name":"ACPI","slug":"ACPI","permalink":"http://example.com/tags/ACPI/"},{"name":"Kernel","slug":"Kernel","permalink":"http://example.com/tags/Kernel/"},{"name":"å†…æ ¸","slug":"å†…æ ¸","permalink":"http://example.com/tags/%E5%86%85%E6%A0%B8/"},{"name":"Cache","slug":"Cache","permalink":"http://example.com/tags/Cache/"},{"name":"CSAPP","slug":"CSAPP","permalink":"http://example.com/tags/CSAPP/"},{"name":"ç¼“å­˜ä¸€è‡´æ€§","slug":"ç¼“å­˜ä¸€è‡´æ€§","permalink":"http://example.com/tags/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/"},{"name":"ç»„æˆåŸç†","slug":"ç»„æˆåŸç†","permalink":"http://example.com/tags/%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"},{"name":"KeePass","slug":"KeePass","permalink":"http://example.com/tags/KeePass/"},{"name":"å¯†ç ç®¡ç†","slug":"å¯†ç ç®¡ç†","permalink":"http://example.com/tags/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86/"},{"name":"é€šä¿¡åè®®","slug":"é€šä¿¡åè®®","permalink":"http://example.com/tags/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/"},{"name":"è®¡ç®—æœºç»„æˆåŸç†","slug":"è®¡ç®—æœºç»„æˆåŸç†","permalink":"http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"},{"name":"CPU","slug":"CPU","permalink":"http://example.com/tags/CPU/"},{"name":"MESI","slug":"MESI","permalink":"http://example.com/tags/MESI/"},{"name":"Gitbash","slug":"Gitbash","permalink":"http://example.com/tags/Gitbash/"},{"name":"äº²å’Œæ€§","slug":"äº²å’Œæ€§","permalink":"http://example.com/tags/%E4%BA%B2%E5%92%8C%E6%80%A7/"},{"name":"Affinity","slug":"Affinity","permalink":"http://example.com/tags/Affinity/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"http://example.com/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"å›ºä»¶å¼€å‘","slug":"å›ºä»¶å¼€å‘","permalink":"http://example.com/tags/%E5%9B%BA%E4%BB%B6%E5%BC%80%E5%8F%91/"},{"name":"å­˜å‚¨å™¨","slug":"å­˜å‚¨å™¨","permalink":"http://example.com/tags/%E5%AD%98%E5%82%A8%E5%99%A8/"},{"name":"Interlaken","slug":"Interlaken","permalink":"http://example.com/tags/Interlaken/"},{"name":"AMBA","slug":"AMBA","permalink":"http://example.com/tags/AMBA/"},{"name":"AXI","slug":"AXI","permalink":"http://example.com/tags/AXI/"},{"name":"æ€»çº¿åè®®","slug":"æ€»çº¿åè®®","permalink":"http://example.com/tags/%E6%80%BB%E7%BA%BF%E5%8D%8F%E8%AE%AE/"},{"name":"åè®®","slug":"åè®®","permalink":"http://example.com/tags/%E5%8D%8F%E8%AE%AE/"},{"name":"FSM","slug":"FSM","permalink":"http://example.com/tags/FSM/"},{"name":"æœ‰é™çŠ¶æ€æœº","slug":"æœ‰é™çŠ¶æ€æœº","permalink":"http://example.com/tags/%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA/"},{"name":"é“¾æ¥","slug":"é“¾æ¥","permalink":"http://example.com/tags/%E9%93%BE%E6%8E%A5/"},{"name":"ç¼–è¯‘","slug":"ç¼–è¯‘","permalink":"http://example.com/tags/%E7%BC%96%E8%AF%91/"},{"name":"åŠ¨æ€é“¾æ¥","slug":"åŠ¨æ€é“¾æ¥","permalink":"http://example.com/tags/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5/"},{"name":"DMA","slug":"DMA","permalink":"http://example.com/tags/DMA/"},{"name":"è™šæ‹Ÿå†…å­˜","slug":"è™šæ‹Ÿå†…å­˜","permalink":"http://example.com/tags/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://example.com/tags/%E7%BC%93%E5%AD%98/"},{"name":"æ€»çº¿","slug":"æ€»çº¿","permalink":"http://example.com/tags/%E6%80%BB%E7%BA%BF/"},{"name":"å›¾åºŠ","slug":"å›¾åºŠ","permalink":"http://example.com/tags/%E5%9B%BE%E5%BA%8A/"},{"name":"è…¾è®¯äº‘","slug":"è…¾è®¯äº‘","permalink":"http://example.com/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://example.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"Die2Die","slug":"Die2Die","permalink":"http://example.com/tags/Die2Die/"},{"name":"Qt","slug":"Qt","permalink":"http://example.com/tags/Qt/"},{"name":"FrameBuffer","slug":"FrameBuffer","permalink":"http://example.com/tags/FrameBuffer/"},{"name":"LCD","slug":"LCD","permalink":"http://example.com/tags/LCD/"},{"name":"DOS","slug":"DOS","permalink":"http://example.com/tags/DOS/"},{"name":"ELF","slug":"ELF","permalink":"http://example.com/tags/ELF/"},{"name":"Bootloader","slug":"Bootloader","permalink":"http://example.com/tags/Bootloader/"},{"name":"BootRom","slug":"BootRom","permalink":"http://example.com/tags/BootRom/"},{"name":"Timer","slug":"Timer","permalink":"http://example.com/tags/Timer/"},{"name":"å¤–è®¾","slug":"å¤–è®¾","permalink":"http://example.com/tags/%E5%A4%96%E8%AE%BE/"},{"name":"C++","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"GPIO","slug":"GPIO","permalink":"http://example.com/tags/GPIO/"},{"name":"QtCreator","slug":"QtCreator","permalink":"http://example.com/tags/QtCreator/"},{"name":"æ±‡ç¼–è¯­è¨€","slug":"æ±‡ç¼–è¯­è¨€","permalink":"http://example.com/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"},{"name":"GCC","slug":"GCC","permalink":"http://example.com/tags/GCC/"},{"name":"Plugins","slug":"Plugins","permalink":"http://example.com/tags/Plugins/"},{"name":"zsh","slug":"zsh","permalink":"http://example.com/tags/zsh/"},{"name":"IPC","slug":"IPC","permalink":"http://example.com/tags/IPC/"},{"name":"Hexo","slug":"Hexo","permalink":"http://example.com/tags/Hexo/"},{"name":"Driver","slug":"Driver","permalink":"http://example.com/tags/Driver/"},{"name":"Unix","slug":"Unix","permalink":"http://example.com/tags/Unix/"}]}